var e_=Object.defineProperty;var t_=(h,s,i)=>s in h?e_(h,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[s]=i;var j=(h,s,i)=>t_(h,typeof s!="symbol"?s+"":s,i);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const v of f)if(v.type==="childList")for(const x of v.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&c(x)}).observe(document,{childList:!0,subtree:!0});function i(f){const v={};return f.integrity&&(v.integrity=f.integrity),f.referrerPolicy&&(v.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?v.credentials="include":f.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function c(f){if(f.ep)return;f.ep=!0;const v=i(f);fetch(f.href,v)}})();const de={cleanup:Symbol("cleanup"),currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),internalEvent:Symbol("internalEvent"),intervals:Symbol("intervals"),isProxy:Symbol("isProxy"),launched:Symbol("launched"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),routerHooks:Symbol("routerHooks"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),config:Symbol.for("config"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType"),isComponent:Symbol.for("isComponent"),effects:Symbol.for("effects"),removeGlobalEffects:Symbol.for("removeGlobalEffects")},si={[de.settings]:{},get(h,s=null){return h in this[de.settings]?this[de.settings][h]:s},set(h,s){typeof h=="object"?Object.keys(h).forEach(i=>{this.set(i,h[i])}):this[de.settings][h]=s}},jd=()=>{},Lm=h=>String(h).padStart(2,"0"),Pm=()=>{const h=new Date;return Lm(h.getHours())+":"+Lm(h.getMinutes())+":"+Lm(h.getSeconds())},$3=h=>{const s=si.get("debugLevel"),i={};return Object.defineProperty(i,"info",{get(){return(s>=1||Array.isArray(s)&&s.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${h} %c ${Pm()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||jd}}),Object.defineProperty(i,"warn",{get(){return(s>=1||Array.isArray(s)&&s.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${h} %c ${Pm()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||jd}}),Object.defineProperty(i,"error",{get(){return(s>=1||Array.isArray(s)&&s.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${h} %c ${Pm()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||jd}}),Object.defineProperty(i,"debug",{get(){return(s>=2||Array.isArray(s)&&s.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${h} %c (${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||jd}}),i};let Mt;const n_=()=>{Mt=$3("Blits")},$d={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},i_=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,r_=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,o_=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,Dm={},zd=h=>{if(Dm[h]!==void 0)return Dm[h];const s=parseInt(h).toString(16).padStart(2,"0");return Dm[h]=s,s},Gu={normalize:(h="",s="0xffffffff")=>{if(h=h.toString(),h.startsWith("0x")&&h.length===10)return h;if($d[h]!==void 0)return $d[h];if(i_.test(h)){h=h.replace("#","").toLowerCase(),h.length===3&&(h=h.split("").map(f=>f+f).join(""));const c="0x"+h.padEnd(8,"f");return $d[h]=c,c}const i=r_.exec(h);if(i){const c=zd(i[3]),f=zd(i[5]),v=zd(i[7]);let x="ff";if(i[10]&&i[1]==="rgba"){const l=Math.min(Math.max(Math.round(parseFloat(i[10])*255),0),255);x=zd(l)}const m="0x"+c+f+v+x;return $d[h]=m,m}return o_.test(h)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):s}},s_=(h="",s,i,c=null)=>{let f=0,v=0,x=[],m=null,l=0;const r=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,S=/^\s*(\/?>)\s*/,_=/^([A-Za-z0-9:.\-_@$]+)=\s*(["'])/,k=/^<>\s*/,I=/^\s*(<\/>)\s*/,b=()=>{h=E(h);try{return C(U),me(x)}catch(W){throw(W.name=="TemplateParseError"||W.name=="TemplateStructureError")&&(W.message=`${W.message}
${W.context}`),W}},C=W=>{f>=h.length||W()},E=W=>W.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),A=W=>{const G=h.slice(f).match(W);return G&&(v=f,f+=G[0].length),G},U=()=>{A(k)?(x.push({[Symbol.for("componentType")]:null,[de.type]:"opening",[de.level]:l,[de.cursorTagStart]:v}),l++,C(U)):C(K)},K=()=>{A(I)?(l--,x.push({[Symbol.for("componentType")]:null,[de.type]:"closing",[de.level]:l}),C(U)):C(R)},R=()=>{const W=A(r);if(W)m={[Symbol.for("componentType")]:W[1],[de.level]:l,[de.cursorTagStart]:v},W[0].startsWith("</")?(l--,m[de.type]="closing",m[de.level]=l):(m[de.type]="opening",l++),C(le);else throw ce("InvalidTag")},le=()=>{const W=A(S);if(W){if(W[1]==="/>"){if(m[de.type]==="closing")throw ce("InvalidClosingTag");m[de.type]="self-closing",l--}if(m[de.type]==="opening"){const G=h.slice(f,h.indexOf("<",f));G&&(m.content=G,f+=G.length)}x.push(m),C(U)}else C(ge)},ge=()=>{const W=A(_);if(W){if(m[de.type]==="closing")throw ce("AttributesInClosingTag");const G=W[2],ue=new RegExp(`^(.*?)${G}\\s*`),Ce=A(ue);if(Ce){const Fe=pe(W[1],Ce[1]);m[Fe.name]=Fe.value,C(le)}else throw ce("MissingOrInvalidAttributeValue")}else throw ce("InvalidAttribute")},pe=(W,G)=>{if(W.includes(".")){const[ue,Ce]=W.split(".");return{name:ue,value:`{${Ce}: ${G}}`}}return["color",":color",":effects","effects"].includes(W)?oe(W,G):{name:W,value:G}},oe=(W,G)=>{let ue=G,Ce=Gu.normalize(ue,null);if(Ce===null){const Fe=/'([^']+)'/g;let Ze,je=0,Ae="";for(;(Ze=Fe.exec(G))!==null;){const $=Ze[1],ft=Ze.index,De=Ze[0].length;Ae+=G.slice(je,ft),Ce=Gu.normalize($,null),Ce===null?Ae+=G.slice(ft,ft+De):Ae+=`'${Ce}'`,je=ft+De}Ae+=G.slice(je),ue=Ae}else ue=Ce;return{name:W,value:ue}},me=W=>{let G=[],ue=!1,Ce={children:[]},Fe=Ce;for(let Ze=0;Ze<W.length;Ze++){let je=W[Ze];if(je[de.level]===0&&je[de.type]!=="closing"){if(ue)throw ve("MultipleTopLevelTags",je);if(je[":for"]!==void 0)throw ve("ForAttributeOnRootElement",je);ue=!0}if(je[de.type]==="opening")G.push({[de.level]:je[de.level],[de.type]:je[de.type],[de.cursorTagStart]:je[de.cursorTagStart],[Symbol.for("componentType")]:je[Symbol.for("componentType")],parent:Fe});else if(je[de.type]==="closing"){const $=G.length===0;let ft=!1,De=!1;if($||(ft=G[G.length-1][de.level]!==je[de.level],De=G[G.length-1][Symbol.for("componentType")]!==je[Symbol.for("componentType")]),$||ft||De)throw ve("MismatchedClosingTag",je);Fe=G.pop().parent}const Ae={...je};delete Ae[de.type],delete Ae[de.level],delete Ae[de.cursorTagStart],je[de.type]==="opening"?(Ze+1<W.length&&W[Ze+1][de.type]!=="closing"&&(Ae.children=[]),Fe.children.push(Ae),Fe=Ae):je[de.type]==="self-closing"&&Fe.children.push(Ae)}if(G.length>0)throw ve("UnclosedTags",G);return Ce},D=10,te=50,ce=W=>{const G=ie();W=`${W} in ${G}`;const ue=new Error(W);ue.name="TemplateParseError";const Ce=Math.max(0,v-D),Fe=Math.min(h.length,f+te),Ze=h.slice(Ce,Fe),je=f-Ce;return ue.context=X(je,Ze),ue},ve=(W,G)=>{const ue=ie();W=`${W} in ${ue}`;const Ce=new Error(W);Ce.name="TemplateStructureError",Array.isArray(G)?Ce.context=G.map(Ze=>Fe(Ze)).join(`
`):Ce.context=Fe(G);function Fe(Ze){const je=Math.max(0,Ze[de.cursorTagStart]-D),Ae=h.slice(je,je+te);return X(D,Ae)}return Ce},X=(W,G)=>{const ue=" ".repeat(W)+"^";return`
${G}
${ue}
`},ie=()=>c||"Blits.Application";return b()};let wt,xh;function u_(h={children:[]},s=!1){const i={renderCode:["const elms = []","const elementConfigs = []","const forloops = []","const props = []","const created = []","const skips = []","let componentType","let rootComponent = component","let propData","let slotComponent","let inSlot = false","let slotChildCounter = 0","let cmps = []"],effectsCode:[],cleanupCode:["rootComponent = null","propData = null","slotComponent = null","component = null","parent = null"],context:{props:[],components:this.components}};return wt=-1,xh=s,xh===!0&&i.renderCode.push(`
      function propInComponent(prop, kind="dynamic") {
        const property = prop.includes('.') ? prop.split('.')[0] : prop
        if (kind === 'reactive' || prop.includes('.') === false) {
          if (property in component === false) {
            Log.warn('Property ' +  property + ' was accessed during render but is not defined on instance')
          }
        } else {
          const nestedKeys = prop.split('.')
          let base = component
          for(let i =0; i<nestedKeys.length;i++){
            if (base[nestedKeys[i]] === undefined) {
              Log.warn('Property ' +  nestedKeys.slice(0,i+1).join('.') + ' was accessed during render but is not defined on instance')
            }
            base = base[nestedKeys[i]]
          }
        }
      }
    `),V3.call(i,h),i.renderCode.push(`
    return { elms, cleanup: () => {
      ${i.cleanupCode.join(`
`)}
      cmps.length = 0
      elms.length = 0
      components.length = 0
      elementConfigs.length = 0
      forloops.length = 0
      props.length = 0
      skips.length = 0
    }}
  `),{render:new Function("parent","component","context","components","effect","getRaw","Log",i.renderCode.join(`
`)),effects:i.effectsCode.map(c=>new Function("component","elms","context","components","rootComponent","effect",c)),context:i.context}}const l_=function(h){const s=/\$\$?\w+(\.\w+)?/g,i=h.match(s);if(i!==null){const c=/\$shader/;return i.filter(f=>!c.test(f))}else return!1},WC=function(h,s,i="dynamic"){const c=l_(h);if(c!==!1)for(let f=0;f<c.length;f++){let v=c[f];i==="reactive"&&v.includes(".")&&(v=v.split(".")[0]),s.push(`propInComponent('${v.replace("$","")}', '${i}')`)}},wh=function(h,s=!1,i={key:!1,component:"component.",forceEffect:!1,forloop:!1}){const c=i.forceEffect?this.effectsCode:this.renderCode;s&&c.push(`parent = ${s}`),"key"in h&&(i.key=Ri(h.key,i.component));const f=i.key?`elms[${wt}][${i.key}]`:`elms[${wt}]`;i.key&&c.push(`
      if(elms[${wt}] === undefined) {
        elms[${wt}] = {}
      }
    `),c.push(`elementConfigs[${wt}] = {}`),i.forloop&&c.push(`if(${f} === undefined) {`),c.push(`
    ${f} = this.element({parent: parent || 'root'}, inSlot === true ? slotComponent : component)
  `),i.forloop&&c.push("}");const v=h.children;delete h.children,h[Symbol.for("componentType")]==="Slot"&&c.push(`elementConfigs[${wt}][Symbol.for('isSlot')] = true`),Object.keys(h).forEach(x=>{if(x==="slot"&&c.push(`
        elementConfigs[${wt}]['parent'] = slotComponent[Symbol.for('slots')] !== undefined && Array.isArray(slotComponent[Symbol.for('slots')]) === true && slotComponent[Symbol.for('slots')].filter(slot => slot.ref === '${h.slot}').shift() || parent
      `),x==="key")return;const m=h[x];if(H3(x)){if(i.holder&&x===":color")return;i.holder?this.effectsCode.push(`
        if(typeof skips === 'undefined' || (typeof skips[${wt}] === 'undefined' ||
          skips[${wt}].indexOf('${x.substring(1)}') === -1))
          ${f}.set('${x.substring(1)}', ${Ri(h[x],i.component)})
        `):this.effectsCode.push(`
            ${f}.set('${x.substring(1)}', ${Ri(h[x],i.component)})
          `),xh===!0&&i.component!=="scope."&&m.includes("$")&&WC(m,c,"reactive"),c.push(`elementConfigs[${wt}]['${x.substring(1)}'] = ${Ri(m,i.component)}`)}else xh===!0&&i.component!=="scope."&&m.includes("$")&&WC(m,c),c.push(`elementConfigs[${wt}]['${x}'] = ${by(m,x,i.component)}`)}),i.holder===!0&&c.push(`
    skips[${wt}] = []
    if(typeof cmps[${wt}] !== 'undefined') {
      for(let key in cmps[${wt}][Symbol.for('config')].props) {
        delete elementConfigs[${wt}][cmps[${wt}][Symbol.for('config')].props[key]]
        skips[${wt}].push(cmps[${wt}][Symbol.for('config')].props[key])
      }
    }
    `),i.forloop&&c.push(`if(${f}.nodeId === undefined) {`),c.push(`${f}.populate(elementConfigs[${wt}])`),c.push(`
    if(inSlot === true) {
      slotChildCounter -= 1
    }
  `),i.forloop&&c.push("}"),v&&V3.call(this,{children:v},`${f}`,i)},z3=function(h,s=!1,i={key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1}){const c=i.forceEffect?this.effectsCode:this.renderCode;c.push(`
    cmps[${wt}] =
      (context.components && context.components['${h[Symbol.for("componentType")]}']) || components['${h[Symbol.for("componentType")]}']
  `),this.cleanupCode.push(`
    cmps[${wt}] = null
  `),"key"in h&&(i.key=Ri(h.key,i.component));const f=h.children;delete h.children,wh.call(this,h,s,{...i,holder:!0}),s=i.key?`elms[${wt}][${i.key}]`:`elms[${wt}]`,wt++;const v=i.key?`elms[${wt}][${i.key}]`:`elms[${wt}]`;i.key&&c.push(`
      if(elms[${wt}] === undefined) {
        elms[${wt}] = {}
      }
    `),s&&c.push(`parent = ${s};`),c.push(`props[${wt}] = {}`),this.cleanupCode.push(`props[${wt}] = null`),i.forloop&&c.push(`if(${v} === undefined) {`),Object.keys(h).forEach(x=>{H3(x)?(this.effectsCode.push(`
        ${v}[Symbol.for('props')]['${x.substring(1)}'] = ${Ri(h[x],i.component)}`),c.push(`
        propData = ${Ri(h[x],i.component)}
        if (Array.isArray(propData) === true) {
          propData = getRaw(propData).slice(0)
        }
        props[${wt}]['${x.substring(1)}'] = propData`)):c.push(`props[${wt}]['${x}'] = ${by(h[x],x,i.component)}`)}),c.push(`
    componentType = props[${wt}]['is'] || '${h[Symbol.for("componentType")]}'

    components[${wt}]
    if(typeof componentType === 'string') {
      components[${wt}] = context.components && context.components[componentType] || components[componentType]
      if(!components[${wt}]) {
        throw new Error('Component "${h[Symbol.for("componentType")]}" not found')
      }
    } else if(typeof componentType === 'function' && componentType[Symbol.for('isComponent')] === true) {
      components[${wt}] = componentType
    }

    ${v} = components[${wt}].call(null, {props: props[${wt}]}, ${s}, component)

    if (${v}[Symbol.for('slots')][0]) {
      parent = ${v}[Symbol.for('slots')][0]
      slotComponent = ${v}
      inSlot = true
    } else {
      parent = ${v}[Symbol.for('children')][0]
    }
  `),this.cleanupCode.push(`components[${wt}] = null`),i.forloop&&c.push("}"),f&&(i.forloop||c.push(`
        if(inSlot === true) {
          slotChildCounter = ${f.length}  + 1
        }
      `),wt++,wh.call(this,{children:f},!1,{...i})),i.forloop||c.push(`
      if (inSlot === true && slotChildCounter === 0) {
        inSlot = false
      }
    `)},a_=function(h,s){const i=h[":for"];delete h[":for"];const c=h.range||h[":range"]||"{}";delete h.range,delete h[":range"];const f=h.key,v=Ri(f,"scope."),x=!(h.$shallow&&h.$shallow.toLowerCase()==="false");delete h.$shallow,delete h.key;const l=/(.+)\s+in\s+(.+)/gi.exec(i),[r,S]=l[1].replace("(","").replace(")","").split(/\s*,\s*/),_=new RegExp(`(scope\\.(?!${r}\\.|${S}|key)(\\w+))`,"gi"),k={renderCode:[],effectsCode:[],cleanupCode:[],context:{props:[],components:this.components}};if(s&&k.renderCode.push(`parent = ${s}`),S!==void 0){const pe=new RegExp(`\\$${S}(?!['\\w])`).exec(f);Array.isArray(pe)&&k.renderCode.push(`console.warn(" Using '${S}' in the key, like key=${f},  is not recommended")`)}const I=wt;k.renderCode.push(`
    created[${I}] = []

    let from${I}
    let to${I}

    forloops[${I}] = (collection = [], elms, created) => {
      const rawCollection = getRaw(collection)
      const keys = new Set()
      let l = rawCollection.length

      const range = ${Ri(c)} || {}
      from${I} = range['from'] || 0
      to${I} = 'to' in range ? range['to'] : rawCollection.length

      while(l--) {
        const ${r} = rawCollection[l]
  `),k.cleanupCode.push(`
    created[${I}].length = 0
    forloops[${I}] = null
  `),S!==void 0&&k.renderCode.push(`
        const ${S} = l
    `),k.renderCode.push(`
        if(l < to${I} && l >= from${I}) {
          keys.add('' +  ${Ri(f,"")||"l"})
        }
      }
  `);const b=k.renderCode.length;k.renderCode.push(`
      created.length = 0
      const length = rawCollection.length
      const effects = []
      for(let __index = 0; __index < length; __index++) {
        if(__index < from${I} || __index >= to${I}) continue
        const scope = Object.create(component)
        parent = ${s}
        scope['${r}'] = rawCollection[__index]
  `),S!==""&&k.renderCode.push(`
        scope['${S}'] = __index
    `),k.renderCode.push(`
        scope['key'] = '' + ${v||"__index"}
  `),"ref"in h&&h.ref.indexOf("$")===-1&&(k.renderCode.push(`
        scope['__ref'] = '${h.ref}' + __index
    `),h.ref="$__ref"),k.renderCode.push(`
        created.push(scope.key)
  `),h[Symbol.for("componentType")]==="Element"||h[Symbol.for("componentType")]==="Slot"||h[Symbol.for("componentType")]==="Text"?(h[Symbol.for("componentType")]==="Text"&&(h.__textnode="true"),wh.call(k,h,s,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0})):z3.call(k,h,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});const C=k.effectsCode.filter(ge=>[...ge.matchAll(_)].length===0),E=k.effectsCode.filter(ge=>[...ge.matchAll(_)].length!==0);x===!1&&k.renderCode.push(`
      scope['${r}'] = null
      scope['${r}'] = collection[__index]
  `),C.forEach((ge,pe)=>{const oe=ge.indexOf(`scope.${pe}`)>-1?`'${Ri(l[2],"")}'`:null;ge.indexOf("Symbol.for('props')")===-1?k.renderCode.push(`
        let eff${pe} = () => {
          ${ge}
        }
        effect(eff${pe}, ${oe})
        effects.push(eff${pe})
        component[Symbol.for('effects')].push(eff${pe})
      `):k.renderCode.push(`
        ${ge}
      `)}),k.renderCode.push(`
    }
    return effects
  }`);const A=[];A.push(`
      let i = created.length

      while (i--) {
        if (keys.has(created[i]) === false) {
          const key = created[i]
  `);const U=wt;for(let ge=I;ge<=U;ge++)A.push(`
        elms[${ge}][key] && elms[${ge}][key].destroy()
        elms[${ge}][key] = null
        delete elms[${ge}][key]
    `);A.push(`
      }
    }
  `),k.renderCode.splice(b,0,...A);let K=`${Ri(l[2],"")}`;K&&K.includes(".")&&(K=K.match(/[^.]+$/)[0]);const R=/\$([^,} ]+)/g,le=[...c.matchAll(R)].map(ge=>`'${ge[1]}'`);k.renderCode.push(`
    let eff${I} = () => {
      forloops[${I}](${by(l[2],":for")}, elms, created[${I}])
    }

    component[Symbol.for('effects')].push(eff${I})

    effect(eff${I}, ['${K}', ${le.join(",")}] )
  `),k.cleanupCode.push(`
    eff${I} = null
  `),E.forEach((ge,pe)=>{const oe=[...ge.matchAll(_)];let me=oe.length;const D=[];for(;me--;){const te=oe[me],ce=`component.${te[2]}`;D.indexOf(ce)===-1&&D.push(ce),te[2]!==r&&(ge=ge.substring(0,te.index)+ce+ge.substring(te.index+te[1].length))}k.renderCode.push(`
      let eff${I}_${pe} = () => {
        void ${D.join(", ")}
        for(let __index = 0; __index < ${Ri(l[2])}.length; __index++) {
          if(__index < from${I} || __index >= to${I}) continue
          const scope = {}
          scope['${S}'] = __index
          scope['${r}'] = ${Ri(l[2])}[__index]
          scope['key'] = ${v||"__index"}
    `),k.cleanupCode.push(`eff${I}_${pe} = null`),k.renderCode.push(`
          ${ge}
        }
      }
      component[Symbol.for('effects')].push(eff${I}_${pe})
      effect(eff${I}_${pe})
    `)}),this.renderCode.push(k.renderCode.join(`
`)),this.cleanupCode.push(k.cleanupCode.join(`
`))},V3=function(h,s=!1,i={}){h.children&&h.children.forEach(c=>{wt++,Object.keys(c).indexOf(":for")>-1?a_.call(this,c,s):c[Symbol.for("componentType")]==="Element"||c[Symbol.for("componentType")]==="Slot"||c[Symbol.for("componentType")]==="Text"||c[Symbol.for("componentType")]==="Layout"?(c[Symbol.for("componentType")]==="Text"&&(c.__textnode="true"),c[Symbol.for("componentType")]==="Layout"&&(c.__layout="true"),wh.call(this,c,s,i)):z3.call(this,c,s,i)})},Ri=(h,s="component.")=>{if(h===void 0)return h;const i=/('.*?')+/gi,c=/\$(\$(?=\$)|\$?)/g,f=h.matchAll(i),v=[];let x=0;for(const m of f)v.push(m[0]),h=h.replace(m[0],`[@@REPLACEMENT${x}@@]`),x++;return h=h.replace(c,(m,l)=>{if(l==="")return s;if(l==="$")return s+"$"}),v.forEach((m,l)=>{h=h.replace(`[@@REPLACEMENT${l}@@]`,m)}),h},by=(h="",s=!1,i="component.")=>{const c=/\$\w+/gi;let f;if(s==="content")if(h.startsWith("$"))f=`${i}${h.replace("$","")}`;else{const v=h.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");f=`'${f_(v,i)}'`}else if(s!=="color"&&/[^0-9%\s.eE]/.test(h)===!1&&!isNaN(parseFloat(h))){if(f=parseFloat(h),h.endsWith("%")){const x={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[s];x&&(f=`parent.node.${x} * (${f} / 100)`)}}else if(h.toLowerCase()==="true")f=!0;else if(h.toLowerCase()==="false")f=!1;else if(s.startsWith("@")&&h){const v=i.slice(0,-1);f=`${v}['${h.replace("$","")}'] && ${v}['${h.replace("$","")}'].bind(${v})`}else if(h.startsWith("$"))f=`${i}${h.replace("$","")}`;else if(c.exec(h)){const v=/\w+\s*:\s*(?:[^\s,}]+|".*?"|'.*?')/g,x=h.match(v);if(f={},x)for(let m=0;m<x.length;m++){const l=x[m].split(/\s*:\s*/);l&&c_(l[0],l[1],i,f)}return d_(f)}else f=`"${h}"`;return f},H3=h=>h.startsWith(":"),f_=(h,s)=>{const i=/\{\{\s*(\$\S+)\s*\}\}/g,c=[...h.matchAll(i)];if(c.length)for(let[f,v]of c)h=h.replace(f,`${v.replace("$",`'+${s}`)}+'`);return h},c_=(h,s,i,c)=>{s.startsWith("$")?c[h]=`${i}${s.replace("$","")}`:c[h]=s},d_=h=>{const s=[];return Object.keys(h).forEach(i=>{s.push(`${i}: ${h[i]}`)}),` { ${s.join(", ")} }`},KC={};let h_=0;const p_=h=>`BlitsComponent::${h}_${KC[h]=(KC[h]||0)+1}`,g_=()=>++h_,Mo={},ty=(h,s,i,c=[])=>{Mo[s]&&Mo[s][h]&&Mo[s][h].apply(i,c)},m_=(h,s,i)=>{const c=de[h];Mo[s]&&Mo[s][c]&&Mo[s][c].apply(i)},y_=(h={},s)=>{Mo[s]={},[...Object.keys(h),...Object.getOwnPropertySymbols(h)].forEach(c=>{typeof h[c]=="function"&&(Mo[s][c]=h[c])})};let Xu=null,ju=null,Oh=!1;const v_=()=>{Oh=!0},x_=()=>{Oh=!1},Sh=new WeakMap,oh=new Map,YC=h=>{if(oh.size!==0)for(const[s,i]of oh){if(h.indexOf(s)===-1)continue;const c=Sh.get(i);if(c!==void 0)for(const f of c.values())f.delete(s),oh.delete(s)}},sh=(h,s,i=!1)=>{if(Xu!==null){if(Oh)return;if(Array.isArray(ju)===!0){if(ju.includes(s)===!1)return}else if(ju!==null&&s!==ju)return;let c=Sh.get(h);c===void 0&&(c=new Map,Sh.set(h,c));let f=c.get(s);f===void 0&&(f=new Set,c.set(s,f)),f.add(Xu),i===!0&&oh.set(Xu,h)}},Wu=(h,s,i=!1)=>{if(Oh===!0)return;const c=Sh.get(h);if(c===void 0)return;const f=c.get(s);if(f!==void 0)for(let v of f)v(i)},Vd=(h,s=null)=>{Xu=h,ju=s,Xu(),Xu=null,ju=null},ny=(h,s)=>{if(h===s)return!0;if(h.length!==s.length)return!1;let i=h.length;for(;i--;){const c=h[i],f=s[i];if(Array.isArray(c)&&Array.isArray(f)){if(ny(c,f)===!1)return!1}else if(typeof c=="object"&&c!==null&&typeof f=="object"&&f!==null){if(ny(Object.entries(c),Object.entries(f))===!1)return!1}else if(c!==f)return!1}return!0},uh=["push","pop","shift","unshift","splice","sort"],qC=new WeakMap,Ao=h=>{const s=h&&h[de.raw];return s?Ao(s):h},iy=(h,s=null,i,c)=>{if(typeof h=="object"&&Array.isArray(h)===!1&&Object.getPrototypeOf(h)!==Object.prototype)return h;const f=qC.get(h);if(f!==void 0)return f;const v={get(m,l,r){return l===de.isProxy?!0:l===de.raw?h:Array.isArray(m)===!0?typeof m[l]=="object"&&m[l]!==null?(Array.isArray(m[l])===!0&&sh(m,l,c),iy(Ao(m[l]),m,l)):uh.indexOf(l)!==-1?function(...S){v_();const _=m[l].apply(this,S);return x_(),Wu(s,i),_}:l==="length"?h.length:Reflect.get(m,l,r):typeof m[l]=="object"&&m[l]!==null?(Array.isArray(m[l])===!0&&sh(m,l,c),iy(Ao(m[l]),m,l)):(sh(m,l,c),Reflect.get(m,l,r))},set(m,l,r,S){const _=Ao(m[l]),k=Ao(r);let I=!0,b=!1;return Array.isArray(k)===!0&&Array.isArray(_)===!0?b=ny(_,k):_===k&&(b=!0),b===!1&&(typeof r=="object"&&(Array.isArray(r)===!0?r=Ao(r).slice(0):r!==null&&m[l]!==null&&m[l]!==void 0&&Array.isArray(m)===!1&&Object.getPrototypeOf(r)===Object.prototype&&(r=Object.assign(S[l],r))),I=Reflect.set(m,l,r,S)),I===!0&&b===!1&&(Array.isArray(m)===!0&&l in m&&Wu(s,i,!0),Wu(m,l,!0)),I}},x=new Proxy(h,v);return qC.set(h,x),x},G3=(h,s)=>(Object.keys(h).forEach(i=>{let c=h[i];if(h[i]!==null&&typeof h[i]=="object"){if(Object.getPrototypeOf(h[i])===Object.prototype)return G3(h[i]);if(Array.isArray(h[i])===!0)for(let f=0;f<uh.length;f++)h[i][uh[f]]=function(v){Array.prototype[uh[f]].call(this,v),Wu(h,i)}}Object.defineProperty(h,i,{enumerable:!0,configurable:!0,get(){return sh(h,i,s),c},set(f){c!==f&&(c=f,Wu(h,i))}})}),h),w_=typeof Proxy<"u",Xa=(h,s="Proxy",i=!1)=>(w_===!1&&(s="defineProperty"),s==="defineProperty"?G3(h,i):iy(h,void 0,void 0,i)),S_=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],T_={previous:null,current:null,get state(){return this.current},set state(h){if(S_.indexOf(h)>-1&&h!==this.current||h==="refocus"){if(Mt.debug(`Setting lifecycle state from ${this.current} to ${h} for ${this.component.componentId}`),this.previous=this.current,this.current=h,h==="refocus")return;m_(h,this.component[de.identifier],this.component),ty(h,this.component[de.identifier],this.component),h==="focus"&&(this.component[de.state].hasFocus=!0),h==="unfocus"&&(this.component[de.state].hasFocus=!1)}}},C_="modulepreload",b_=function(h){return"/"+h},JC={},X3=function(s,i,c){let f=Promise.resolve();if(i&&i.length>0){let x=function(r){return Promise.all(r.map(S=>Promise.resolve(S).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),l=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));f=x(i.map(r=>{if(r=b_(r),r in JC)return;JC[r]=!0;const S=r.endsWith(".css"),_=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${_}`))return;const k=document.createElement("link");if(k.rel=S?"stylesheet":C_,S||(k.as="script"),k.crossOrigin="",k.href=r,l&&k.setAttribute("nonce",l),document.head.appendChild(k),S)return new Promise((I,b)=>{k.addEventListener("load",I),k.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${r}`)))})}))}function v(x){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=x,window.dispatchEvent(m),!m.defaultPrevented)throw x}return f.then(x=>{for(const m of x||[])m.status==="rejected"&&v(m.reason);return s().catch(v)})},k_={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",VITE_TMDB_KEY:"ABC123"};function A_(h,s=!1,i){const c={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},f=h.getContext(s?"webgl2":"webgl",c)||h.getContext("experimental-webgl",c);if(!f)throw new Error("Unable to create WebGL context");return i?new Proxy(f,{get(v,x){const m=v[x];return typeof m=="function"?(i.increment(String(x)),m.bind(v)):m}}):f}function nt(h,s){if(qu()!==!0&&!h)throw new Error(s||"Assertion failed")}function QC(h,s,i){const c=Math.trunc(h>>>24),f=Math.trunc(h>>>16&255),v=Math.trunc(h>>>8&255),x=Math.trunc(h&255),m=Math.trunc(s>>>24),l=Math.trunc(s>>>16&255),r=Math.trunc(s>>>8&255),S=Math.trunc(s&255),_=Math.round(m*i+c*(1-i)),k=Math.round(l*i+f*(1-i)),I=Math.round(r*i+v*(1-i)),b=Math.round(S*i+x*(1-i));return(_<<24|k<<16|I<<8|b)>>>0}function E_(h,s){const i=h>>>24,c=h>>>16&255,f=h>>>8&255,v=Math.trunc((h&255)*s);return(i<<24|c<<16|f<<8|v)>>>0}let W3=!0;function I_(h){W3=h==="webgl"}function Hd(h,s,i=!1){const c=(h&255)/255*s,f=W3?c:1,v=Math.trunc((h>>>24)*f),x=Math.trunc((h>>>16&255)*f),m=Math.trunc((h>>>8&255)*f),l=Math.trunc(c*255);return i?(l<<24|m<<16|x<<8|v)>>>0:(v<<24|x<<16|m<<8|l)>>>0}function Th(h,s){return Object.prototype.hasOwnProperty.call(h,s)}function qu(){return k_&&!0}let M_=1;function R_(){return M_++}class Kr{constructor(){j(this,"eventListeners",{})}on(s,i){let c=this.eventListeners[s];c||(c=[]),c.push(i),this.eventListeners[s]=c}off(s,i){const c=this.eventListeners[s];if(!c)return;if(!i){delete this.eventListeners[s];return}const f=c.indexOf(i);f>=0&&c.splice(f,1)}once(s,i){const c=(f,v)=>{this.off(s,c),i(f,v)};this.on(s,c)}emit(s,i){const c=this.eventListeners[s];c&&[...c].forEach(f=>{f(this,i)})}removeAllListeners(){this.eventListeners={}}}var on;(function(h){h[h.generic=0]="generic",h[h.color=1]="color",h[h.image=2]="image",h[h.noise=3]="noise",h[h.renderToTexture=4]="renderToTexture",h[h.subTexture=5]="subTexture"})(on||(on={}));class Wr extends Kr{constructor(i){super();j(this,"txManager");j(this,"_dimensions",null);j(this,"_error",null);j(this,"state","initial");j(this,"renderableOwners",new Set);j(this,"renderable",!1);j(this,"type",on.generic);j(this,"preventCleanup",!1);j(this,"ctxTexture");j(this,"textureData",null);this.txManager=i}get dimensions(){return this._dimensions}get error(){return this._error}setRenderableOwner(i,c){var v,x;const f=this.renderableOwners.size;if(c===!0){this.renderableOwners.has(i)===!1&&this.renderableOwners.add(i);const m=this.renderableOwners.size;m>f&&m===1&&(this.renderable=!0,(v=this.onChangeIsRenderable)==null||v.call(this,!0),this.load())}else{this.renderableOwners.delete(i);const m=this.renderableOwners.size;m<f&&m===0&&(this.renderable=!1,(x=this.onChangeIsRenderable)==null||x.call(this,!1),this.txManager.orphanTexture(this))}}load(){this.txManager.loadTexture(this)}loadCtxTexture(){return this.ctxTexture===void 0&&(this.ctxTexture=this.txManager.renderer.createCtxTexture(this)),this.ctxTexture}free(){var i;(i=this.ctxTexture)==null||i.free()}destroy(){this.state==="loaded"&&this.free(),this.freeTextureData()}freeTextureData(){this.textureData=null}setState(i,c){if(this.state===i)return;let f=null;i==="loaded"?(c!==void 0&&"width"in c&&"height"in c&&c.width!==void 0&&c.height!==void 0&&(this._dimensions=c),f=this._dimensions):i==="failed"&&(this._error=c,f=this._error),this.state=i,this.emit(i,f)}async getTextureData(){return this.textureData===null&&(this.textureData=await this.getTextureSource()),this.textureData}static makeCacheKey(i){return!1}static resolveDefaults(i){return{}}}j(Wr,"TRANSITIONAL_TEXTURE_STATES",["fetching","fetched","loading"]);const __=/^(data|ftps?|https?):/,qa=h=>{const s=h>>>24,i=h>>>16&255,c=h>>>8&255,f=h&255;return[s/255,i/255,c/255,f/255]},ZC=h=>{const s=h>>>24,i=h>>>16&255,c=h>>>8&255,f=h&255;return[s,i,c,f]};function e3(h){return(h&255)/255}function Om(h){const s=Math.floor(h[0]*255),i=Math.floor(h[1]*255),c=Math.floor(h[2]*255),f=Math.floor(h[3]*255);return`rgba(${s},${i},${c},${f.toFixed(4)})`}function $u(h,s,i,c,f){return f?(f.x1=h,f.y1=s,f.x2=i,f.y2=c,f):{x1:h,y1:s,x2:i,y2:c}}function Nm(h,s){return h.x1<s.x2&&h.x2>s.x1&&h.y1<s.y2&&h.y2>s.y1}function L_(h,s){return s?(s.x=h.x1,s.y=h.y1,s.width=h.x2-h.x1,s.height=h.y2-h.y1,s):{x:h.x1,y:h.y1,width:h.x2-h.x1,height:h.y2-h.y1}}function K3(h,s,i){const c=Math.max(h.x,s.x),f=Math.max(h.y,s.y),v=Math.min(h.x+h.width,s.x+s.width)-c,x=Math.min(h.y+h.height,s.y+s.height)-f;return v>0&&x>0?i?(i.x=c,i.y=f,i.width=v,i.height=x,i):{x:c,y:f,width:v,height:x}:i?(i.x=0,i.y=0,i.width=0,i.height=0,i):{x:0,y:0,width:0,height:0}}function Y3(h,s){return s?(s.x=h.x,s.y=h.y,s.width=h.width,s.height=h.height,s):{x:h.x,y:h.y,width:h.width,height:h.height}}function P_(h,s){return h===s?!0:h===null||s===null?!1:h.x===s.x&&h.y===s.y&&h.width===s.width&&h.height===s.height}function Um(h,s){return h.x1<=s.x2&&h.y1<=s.y2&&h.x2>=s.x1&&h.y2>=s.y1}function D_(h,s){return h.x1<s.x1&&h.x2>s.x2&&h.y1<s.y1&&h.y2>s.y2}function O_(h,s,i){return!(h<i.x1||h>i.x2||s<i.y1||s>i.y2)}function N_(h){return h.x1<h.x2&&h.y1<h.y2}function ry(h,s){return $u(h.x1-s[3],h.y1-s[0],h.x2+s[1],h.y2+s[2])}function U_(h){if(self.location.protocol==="file:"&&!__.test(h)){const i=self.location.pathname.split("/");i.pop();const c=i.join("/"),f=self.location.protocol+"//"+c;return h.charAt(0)==="."&&(h=h.slice(1)),h.charAt(0)==="/"&&(h=h.slice(1)),f+"/"+h}return new URL(h,self.location.href).href}function Bm(h){return h.startsWith("data:")===!0}function B_(h){var l,r;h=h.replace(/^data:/,"");const s=((l=h.match(/image\/[^;]+/))==null?void 0:l[0])||"",i=h.replace(/^[^,]+,/,""),c=1024,f=atob(i),v=f.length,x=Math.ceil(v/c),m=new Array(x);for(let S=0;S<x;++S){const _=S*c,k=Math.min(_+c,v),I=new Array(k-_);for(let b=_,C=0;b<k;++C,++b)I[C]=(r=f[b])==null?void 0:r.charCodeAt(0);m[S]=new Uint8Array(I)}return new Blob(m,{type:s})}class Fn{constructor(){j(this,"ta");j(this,"tb");j(this,"tx");j(this,"tc");j(this,"td");j(this,"ty");j(this,"_floatArr",null);j(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return F_}static multiply(s,i,c){const f=s.ta*i.ta+s.tb*i.tc,v=s.ta*i.tb+s.tb*i.td,x=s.ta*i.tx+s.tb*i.ty+s.tx,m=s.tc*i.ta+s.td*i.tc,l=s.tc*i.tb+s.td*i.td,r=s.tc*i.tx+s.td*i.ty+s.ty;return c||(c=new Fn),c.ta=f,c.tb=v,c.tx=x,c.tc=m,c.td=l,c.ty=r,c.mutation=!0,c}static identity(s){return s||(s=new Fn),s.ta=1,s.tb=0,s.tx=0,s.tc=0,s.td=1,s.ty=0,s.mutation=!0,s}static translate(s,i,c){return c||(c=new Fn),c.ta=1,c.tb=0,c.tx=s,c.tc=0,c.td=1,c.ty=i,c.mutation=!0,c}static scale(s,i,c){return c||(c=new Fn),c.ta=s,c.tb=0,c.tx=0,c.tc=0,c.td=i,c.ty=0,c.mutation=!0,c}static rotate(s,i){const c=Math.cos(s),f=Math.sin(s);return i||(i=new Fn),i.ta=c,i.tb=-f,i.tx=0,i.tc=f,i.td=c,i.ty=0,i.mutation=!0,i}static copy(s,i){return i||(i=new Fn),i.ta=s.ta,i.tc=s.tc,i.tb=s.tb,i.td=s.td,i.tx=s.tx,i.ty=s.ty,i.mutation=!0,i}translate(s,i){return this.tx=this.ta*s+this.tb*i+this.tx,this.ty=this.tc*s+this.td*i+this.ty,this.mutation=!0,this}scale(s,i){return this.ta=this.ta*s,this.tb=this.tb*i,this.tc=this.tc*s,this.td=this.td*i,this.mutation=!0,this}rotate(s){if(s===0||!(s%Math.PI*2))return this;const i=Math.cos(s),c=Math.sin(s),f=this.ta*i+this.tb*c,v=this.tb*i-this.ta*c,x=this.tc*i+this.td*c,m=this.td*i-this.tc*c;return this.ta=f,this.tb=v,this.tc=x,this.td=m,this.mutation=!0,this}multiply(s){return Fn.multiply(this,s,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const F_=new Fn,Gd=0,Xd=2,Wd=4,Kd=6,Yd=1,qd=3,Jd=5,Qd=7;class zu{constructor(s){j(this,"data");this.data=new Float32Array(8),s&&(this.data[Gd]=s[Gd],this.data[Xd]=s[Xd],this.data[Wd]=s[Wd],this.data[Kd]=s[Kd],this.data[Yd]=s[Yd],this.data[qd]=s[qd],this.data[Jd]=s[Jd],this.data[Qd]=s[Qd])}static translate(s,i,c,f,v,x,m,l,r){return r||(r=new zu),r.data[Gd]=s,r.data[Xd]=c,r.data[Wd]=v,r.data[Kd]=m,r.data[Yd]=i,r.data[qd]=f,r.data[Jd]=x,r.data[Qd]=l,r}get x1(){return this.data[Gd]}get x2(){return this.data[Xd]}get x3(){return this.data[Wd]}get x4(){return this.data[Kd]}get y1(){return this.data[Yd]}get y2(){return this.data[qd]}get y3(){return this.data[Jd]}get y4(){return this.data[Qd]}}const q3=(h,s,i,c)=>{const f=3*h,v=3*(i-h)-f,x=1-f-v,m=3*s,l=3*(c-s)-m,r=1-m-l;return function(S){if(S>=1)return 1;if(S<=0)return 0;let _=.5,k,I,b;for(let A=0;A<20;A++){if(k=_*(_*(_*x+v)+f),b=S-k,b>-1e-8&&b<1e-8)return _*(_*(_*r+l)+m);if(I=_*(_*(3*x)+2*v)+f,I>1e-10&&I<1e-10)break;_+=b/I}let C=0,E=1;for(let A=0;A<20;A++){if(_=.5*(C+E),k=_*(_*(_*x+v)+f),b=S-k,b>-1e-8&&b<1e-8)return _*(_*(_*r+l)+m);b<0?E=_:C=_}}},lh={},j_={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},ah=h=>h,$_=h=>{const s=/-?\d*\.?\d+/g,i=h.match(s);if(i){const[c,f,v,x]=i,m=parseFloat(c||"0.42"),l=parseFloat(f||"0"),r=parseFloat(v||"1"),S=parseFloat(x||"1"),_=q3(m,l,r,S);return lh[h]=_,_}return console.warn("Unknown cubic-bezier timing: "+h),ah},z_=h=>{if(h==="linear")return ah;if(lh[h]!==void 0)return lh[h]||ah;if(h==="step-start")return()=>1;if(h==="step-end")return i=>i===1?1:0;const s=j_[h];if(s!==void 0){const[i,c,f,v]=s,x=q3(i,c,f,v);return lh[h]=x,x}return h.startsWith("cubic-bezier")?$_(h):(console.warn("Unknown timing function: "+h),ah)};function t3(h){return(h/1024/1024).toFixed(2)}class V_ extends Kr{constructor(i,c,f){super();j(this,"node");j(this,"props");j(this,"settings");j(this,"progress",0);j(this,"delayFor",0);j(this,"delay",0);j(this,"timingFunction");j(this,"propValuesMap",{});j(this,"dynPropValuesMap");this.node=i,this.props=c;for(const m in c)if(m!=="shaderProps")this.propValuesMap.props===void 0&&(this.propValuesMap.props={}),this.propValuesMap.props[m]={start:i[m]||0,target:c[m]};else if(i.shader.type!=="DynamicShader"){this.propValuesMap.shaderProps={};for(const l in c.shaderProps)this.propValuesMap.shaderProps[l]={start:i.shader.props[l],target:c.shaderProps[l]}}else{const l=Object.keys(c.shaderProps),r=l.length;this.dynPropValuesMap={};for(let S=0;S<r;S++){const _=l[S],k=c.shaderProps[_];this.dynPropValuesMap[_]={};const I=Object.entries(k),b=I.length;for(let C=0;C<b;C++){const[E,A]=I[C];this.dynPropValuesMap[_][E]={start:i.shader.props[_][E],target:A}}}}const v=f.easing||"linear",x=f.delay??0;this.settings={duration:f.duration??0,delay:x,easing:v,loop:f.loop??!1,repeat:f.repeat??0,repeatDelay:f.repeatDelay??0,stopMethod:f.stopMethod??!1},this.timingFunction=z_(v),this.delayFor=x,this.delay=x}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(i,c){const f=Object.entries(c),v=f.length;for(let x=0;x<v;x++){const[m,l]=f[x];i[m]=l.start}}restore(){if(this.reset(),this.propValuesMap.props!==void 0&&this.restoreValues(this.node,this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),c=i.length;if(c>0)for(let f=0;f<c;f++){const v=i[f];this.restoreValues(this.node.shader.props[v],this.dynPropValuesMap[v])}}}reverseValues(i){const c=Object.entries(i),f=c.length;for(let v=0;v<f;v++){const[x,m]=c[v];i[x]={start:m.target,target:m.start}}}reverse(){if(this.progress=0,this.propValuesMap.props!==void 0&&this.reverseValues(this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.reverseValues(this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),c=i.length;if(c>0)for(let f=0;f<c;f++){const v=i[f];this.reverseValues(this.dynPropValuesMap[v])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(i,c,f){return(this.timingFunction(i)||i)*(f-c)+c}updateValue(i,c,f,v){if(this.progress===1)return c;if(this.progress===0)return f;const x=c;if(i.indexOf("color")!==-1){if(f===x)return f;if(v){const m=this.timingFunction(this.progress)||this.progress;return QC(f,x,m)}return QC(f,x,this.progress)}return v?this.applyEasing(this.progress,f,x):f+(x-f)*this.progress}updateValues(i,c,f){const v=Object.entries(c),x=v.length;for(let m=0;m<x;m++){const[l,r]=v[m];i[l]=this.updateValue(l,r.target,r.start,f)}}update(i){const{duration:c,loop:f,easing:v,stopMethod:x}=this.settings,{delayFor:m}=this;if(this.node.destroyed){this.emit("destroyed",{});return}if(c===0&&m===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=i,this.delayFor>=0)return;i=-this.delayFor,this.delayFor=0}if(c===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=i/c,this.progress>1&&(this.progress=f?0:1,this.delayFor=this.delay,x)){this.emit("finished",{});return}if(this.propValuesMap.props!==void 0&&this.updateValues(this.node,this.propValuesMap.props,v),this.propValuesMap.shaderProps!==void 0&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,v),this.dynPropValuesMap!==void 0){const l=Object.keys(this.dynPropValuesMap),r=l.length;if(r>0)for(let S=0;S<r;S++){const _=l[S];this.updateValues(this.node.shader.props[_],this.dynPropValuesMap[_],v)}}this.progress<1&&this.emit("tick",{progress:this.progress}),this.progress===1&&this.emit("finished",{})}}class H_ extends Kr{constructor(i,c){super();j(this,"manager");j(this,"animation");j(this,"stoppedPromise");j(this,"stoppedResolve",null);j(this,"state");this.manager=i,this.animation=c,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this),this.onTick=this.onTick.bind(this),this.onDestroy=this.onDestroy.bind(this)}start(){return this.state!=="running"&&this.state!=="scheduled"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="scheduled"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.animation.on("tick",this.onTick),this.animation.on("destroyed",this.onDestroy),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating),this.animation.off("tick",this.onTick),this.animation.off("destroy",this.onDestroy)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(i=>{this.stoppedResolve=i}))}onDestroy(){this.unregisterAnimation(),this.state="stopped"}onFinished(){const{loop:i,stopMethod:c}=this.animation.settings;if(c==="reverse"){this.animation.once("finished",this.onFinished),this.animation.reverse();return}i||(this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.emit("stopped",this),this.state="stopped")}onAnimating(){this.state="running",this.emit("animating",this)}onTick(i,c){this.emit("tick",c)}}var Hn;(function(h){h[h.Init=0]="Init",h[h.OutOfBounds=2]="OutOfBounds",h[h.InBounds=4]="InBounds",h[h.InViewport=8]="InViewport"})(Hn||(Hn={}));const Ja=new Map;Ja.set(Hn.Init,"init");Ja.set(Hn.OutOfBounds,"outOfBounds");Ja.set(Hn.InBounds,"inBounds");Ja.set(Hn.InViewport,"inViewport");var Ee;(function(h){h[h.Children=1]="Children",h[h.ScaleRotate=2]="ScaleRotate",h[h.Local=4]="Local",h[h.Global=8]="Global",h[h.Clipping=16]="Clipping",h[h.CalculatedZIndex=32]="CalculatedZIndex",h[h.ZIndexSortedChildren=64]="ZIndexSortedChildren",h[h.PremultipliedColors=128]="PremultipliedColors",h[h.WorldAlpha=256]="WorldAlpha",h[h.RenderState=512]="RenderState",h[h.IsRenderable=1024]="IsRenderable",h[h.RenderTexture=2048]="RenderTexture",h[h.ParentRenderTexture=4096]="ParentRenderTexture",h[h.RenderBounds=8192]="RenderBounds",h[h.None=0]="None",h[h.All=14335]="All"})(Ee||(Ee={}));class oy extends Kr{constructor(i,c){super();j(this,"stage");j(this,"children",[]);j(this,"_id",R_());j(this,"props");j(this,"updateType",Ee.All);j(this,"childUpdateType",Ee.None);j(this,"globalTransform");j(this,"scaleRotateTransform");j(this,"localTransform");j(this,"sceneGlobalTransform");j(this,"renderCoords");j(this,"sceneRenderCoords");j(this,"renderBound");j(this,"strictBound");j(this,"preloadBound");j(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});j(this,"isRenderable",!1);j(this,"renderState",Hn.Init);j(this,"worldAlpha",1);j(this,"premultipliedColorTl",0);j(this,"premultipliedColorTr",0);j(this,"premultipliedColorBl",0);j(this,"premultipliedColorBr",0);j(this,"calcZIndex",0);j(this,"hasRTTupdates",!1);j(this,"parentHasRenderTexture",!1);j(this,"rttParent",null);j(this,"destroyed",!1);j(this,"onTextureLoaded",(i,c)=>{var f,v;this.autosizeNode(c),this.setUpdateType(Ee.IsRenderable),this.stage.requestRender(),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),c.width>1&&c.height>1&&this.emit("loaded",{type:"texture",dimensions:c}),((v=(f=this.props.textureOptions)==null?void 0:f.resizeMode)==null?void 0:v.type)==="contain"&&this.setUpdateType(Ee.Local)});j(this,"onTextureFailed",(i,c)=>{this.isRenderable=!1,this.setUpdateType(Ee.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("failed",{type:"texture",error:c})});j(this,"onTextureFreed",()=>{this.isRenderable=!1,this.setUpdateType(Ee.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("freed",{type:"texture"})});this.stage=i,this.props={...c,parent:null,texture:null,src:null,rtt:!1},this.parent=c.parent,this.texture=c.texture,this.src=c.src,this.rtt=c.rtt,this.interactive=c.interactive,c.boundsMargin&&(this.boundsMargin=Array.isArray(c.boundsMargin)?c.boundsMargin:[c.boundsMargin,c.boundsMargin,c.boundsMargin,c.boundsMargin]),this.setUpdateType(Ee.ScaleRotate|Ee.Local|Ee.RenderBounds|Ee.RenderState),qu()===!1&&c.preventCleanup===!0&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.stage.defaultTexture&&this.stage.defaultTexture.state!=="loaded"&&this.stage.defaultTexture.once("loaded",()=>{this.setUpdateType(Ee.IsRenderable)})}loadTexture(){const{texture:i}=this.props;nt(i),queueMicrotask(()=>{var c;if(this.textureOptions.preload===!0&&this.stage.txManager.loadTexture(i),i.preventCleanup=((c=this.props.textureOptions)==null?void 0:c.preventCleanup)??!1,i.on("loaded",this.onTextureLoaded),i.on("failed",this.onTextureFailed),i.on("freed",this.onTextureFreed),this.parentHasRenderTexture){this.notifyParentRTTOfUpdate();return}i.state==="loaded"?(nt(i.dimensions),this.onTextureLoaded(i,i.dimensions)):i.state==="failed"?(nt(i.error),this.onTextureFailed(i,i.error)):i.state==="freed"&&this.onTextureFreed(i)})}unloadTexture(){this.texture!==null&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(i){this.autosize&&(this.width=i.width,this.height=i.height)}setUpdateType(i){this.updateType|=i;const c=this.props.parent;c&&(c.updateType&Ee.Children)===0&&c.setUpdateType(Ee.Children)}sortChildren(){this.children.sort((i,c)=>i.calcZIndex-c.calcZIndex)}updateScaleRotateTransform(){const{rotation:i,scaleX:c,scaleY:f}=this.props;if(i===0&&c===1&&f===1){this.scaleRotateTransform=void 0;return}this.scaleRotateTransform=Fn.rotate(i,this.scaleRotateTransform).scale(c,f)}updateLocalTransform(){var r,S;const{x:i,y:c,width:f,height:v}=this.props,x=this.props.mountX*f,m=this.props.mountY*v;if(this.scaleRotateTransform){const _=this.props.pivotX*f,k=this.props.pivotY*v;this.localTransform=Fn.translate(i-x+_,c-m+k,this.localTransform).multiply(this.scaleRotateTransform).translate(-_,-k)}else this.localTransform=Fn.translate(i-x,c-m,this.localTransform);const l=this.props.texture;if(l&&l.dimensions&&((S=(r=this.props.textureOptions)==null?void 0:r.resizeMode)==null?void 0:S.type)==="contain"){let _=1,k=1,I=0,b=0;const{width:C,height:E}=l.dimensions,A=C/E,U=f/v;if(A>U){const K=f/C,R=E*K;b=(v-R)/2,k=R/v}else{const K=v/E,R=C*K;I=(f-R)/2,_=R/f}this.localTransform.translate(I,b).scale(_,k)}this.setUpdateType(Ee.Global)}update(i,c){this.updateType&Ee.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(Ee.Local)),this.updateType&Ee.Local&&(this.updateLocalTransform(),this.setUpdateType(Ee.Global));const f=this.props.parent;let v=null;if(this.updateType&Ee.RenderTexture&&this.rtt&&(this.hasRTTupdates=!0),this.updateType&Ee.Global&&(nt(this.localTransform),this.parentHasRenderTexture===!0&&(f==null?void 0:f.rtt)===!0?(this.globalTransform=Fn.identity(),this.sceneGlobalTransform=Fn.copy((f==null?void 0:f.globalTransform)||Fn.identity()).multiply(this.localTransform)):this.parentHasRenderTexture===!0&&(f==null?void 0:f.rtt)===!1?(this.sceneGlobalTransform=Fn.copy((f==null?void 0:f.sceneGlobalTransform)||this.localTransform).multiply(this.localTransform),this.globalTransform=Fn.copy((f==null?void 0:f.globalTransform)||this.localTransform,this.globalTransform)):this.globalTransform=Fn.copy((f==null?void 0:f.globalTransform)||this.localTransform,this.globalTransform),f!==null&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(Ee.RenderState|Ee.Children),this.childUpdateType|=Ee.Global,this.clipping===!0&&(this.setUpdateType(Ee.Clipping|Ee.RenderBounds),this.childUpdateType|=Ee.RenderBounds)),this.updateType&Ee.RenderBounds&&(this.createRenderBounds(),this.setUpdateType(Ee.RenderState),this.setUpdateType(Ee.Children),this.childUpdateType|=Ee.RenderBounds),this.updateType&Ee.RenderState&&(v=this.checkRenderBounds(),this.setUpdateType(Ee.IsRenderable),v!==Hn.OutOfBounds&&this.updateRenderState(v)),this.updateType&Ee.WorldAlpha&&(f?this.worldAlpha=f.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(Ee.Children|Ee.PremultipliedColors|Ee.IsRenderable),this.childUpdateType|=Ee.WorldAlpha),this.updateType&Ee.IsRenderable&&this.updateIsRenderable(),this.updateType&Ee.Clipping&&(this.calculateClippingRect(c),this.setUpdateType(Ee.Children),this.childUpdateType|=Ee.Clipping,this.childUpdateType|=Ee.RenderBounds),this.updateType&Ee.PremultipliedColors&&(this.premultipliedColorTl=Hd(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=Hd(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=Hd(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=Hd(this.props.colorBr,this.worldAlpha,!0))),f!==null&&this.updateType&Ee.CalculatedZIndex&&(this.calculateZIndex(),f.setUpdateType(Ee.ZIndexSortedChildren)),this.props.strictBounds===!0&&this.renderState===Hn.OutOfBounds){this.updateType&=~Ee.RenderBounds;return}if(this.updateType&Ee.Children&&this.children.length>0)for(let x=0,m=this.children.length;x<m;x++){const l=this.children[x];if(l.setUpdateType(this.childUpdateType),l.updateType===0)continue;let r=this.clippingRect;this.rtt===!0&&(r={x:0,y:0,width:0,height:0,valid:!1}),l.update(i,r)}this.parentHasRenderTexture&&this.updateType>0&&this.notifyParentRTTOfUpdate(),this.updateType&Ee.ZIndexSortedChildren&&this.sortChildren(),v===Hn.OutOfBounds&&(this.updateRenderState(v),this.updateIsRenderable(),this.rtt===!0&&v===Hn.OutOfBounds&&this.notifyChildrenRTTOfUpdate(v)),this.updateType=0,this.childUpdateType=0}findParentRTTNode(){let i=this.parent;for(;i&&!i.rtt;)i=i.parent;return i}getRTTParentRenderState(){const i=this.rttParent||this.findParentRTTNode();return i?i.renderState:null}notifyChildrenRTTOfUpdate(i){for(const c of this.children)c.updateRenderState(i),c.updateIsRenderable(),c.notifyChildrenRTTOfUpdate(i)}notifyParentRTTOfUpdate(){if(this.parent===null)return;const i=this.rttParent||this.findParentRTTNode();i&&(i.hasRTTupdates=!0,i.setUpdateType(Ee.RenderTexture),i.parentHasRenderTexture===!0&&i.notifyParentRTTOfUpdate())}checkRenderBounds(){return nt(this.renderBound),nt(this.strictBound),nt(this.preloadBound),Um(this.renderBound,this.strictBound)?Hn.InViewport:Um(this.renderBound,this.preloadBound)?Hn.InBounds:D_(this.renderBound,this.strictBound)?Hn.InViewport:this.parent!==null&&(this.props.width===0||this.props.height===0)?this.parent.renderState:Hn.OutOfBounds}updateBoundingRect(){const i=this.sceneGlobalTransform||this.globalTransform,c=this.sceneRenderCoords||this.renderCoords;nt(i),nt(c);const{tb:f,tc:v}=i,{x1:x,y1:m,x3:l,y3:r}=c;if(f===0||v===0)this.renderBound=$u(x,m,l,r,this.renderBound);else{const{x2:S,x4:_,y2:k,y4:I}=c;this.renderBound=$u(Math.min(x,S,l,_),Math.min(m,k,r,I),Math.max(x,S,l,_),Math.max(m,k,r,I),this.renderBound)}}createRenderBounds(){if(nt(this.stage),this.parent!==null&&this.parent.strictBound!==void 0){const S=this.parent.strictBound;this.strictBound=$u(S.x1,S.y1,S.x2,S.y2),this.preloadBound=ry(this.strictBound,this.boundsMargin)}else this.strictBound=this.stage.strictBound,this.preloadBound=this.stage.preloadBound;if(this.props.clipping===!1||this.renderBound===void 0||Um(this.renderBound,this.strictBound)===!1)return;const{x:i,y:c,width:f,height:v}=this.props,{tx:x,ty:m}=this.sceneGlobalTransform||this.globalTransform||{},l=x??i,r=m??c;this.strictBound=$u(l,r,l+f,r+v,this.strictBound),this.preloadBound=ry(this.strictBound,this.boundsMargin)}updateRenderState(i){if(i===this.renderState)return;const c=this.renderState;this.renderState=i;const f=Ja.get(i);nt(f),this.emit(f,{previous:c,current:i})}updateIsRenderable(){let i=!1,c=!1;if(this.checkBasicRenderability()===!1){this.updateTextureOwnership(!1),this.setRenderable(!1);return}this.texture!==null?(c=!0,i=this.texture.state==="loaded"):(this.hasShader()||this.hasColorProperties()===!0)&&this.hasDimensions()===!0&&this.stage.defaultTexture&&this.stage.defaultTexture.state==="loaded"&&(i=!0),this.updateTextureOwnership(c),this.setRenderable(i)}checkBasicRenderability(){return!(this.worldAlpha===0||this.isOutOfBounds()===!0)}setRenderable(i){this.isRenderable=i}updateTextureOwnership(i){var c;(c=this.texture)==null||c.setRenderableOwner(this,i)}isOutOfBounds(){return this.renderState<=Hn.OutOfBounds}hasDimensions(){return this.props.width!==0&&this.props.height!==0}hasColorProperties(){return this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0}hasShader(){return this.props.shader!==null}calculateRenderCoords(){const{width:i,height:c}=this,{tx:f,ty:v,ta:x,tb:m,tc:l,td:r}=this.globalTransform;if(m===0&&l===0){const E=f,A=f+i*x,U=v,K=v+c*r;this.renderCoords=zu.translate(E,U,A,U,A,K,E,K,this.renderCoords)}else this.renderCoords=zu.translate(f,v,f+i*x,v+i*l,f+i*x+c*m,v+i*l+c*r,f+c*m,v+c*r,this.renderCoords);if(this.sceneGlobalTransform===void 0)return;const{tx:S,ty:_,ta:k,tb:I,tc:b,td:C}=this.sceneGlobalTransform;if(I===0&&b===0){const E=S,A=S+i*k,U=_,K=_+c*C;this.sceneRenderCoords=zu.translate(E,U,A,U,A,K,E,K,this.sceneRenderCoords)}else this.sceneRenderCoords=zu.translate(S,_,S+i*k,_+i*b,S+i*k+c*I,_+i*b+c*C,S+c*I,_+c*C,this.sceneRenderCoords)}calculateClippingRect(i){nt(this.globalTransform);const{clippingRect:c,props:f,globalTransform:v}=this,{clipping:x}=f,m=v.tb!==0||v.tc!==0;x===!0&&m===!1?(c.x=v.tx,c.y=v.ty,c.width=this.width*v.ta,c.height=this.height*v.td,c.valid=!0):c.valid=!1,i.valid===!0&&c.valid===!0?K3(i,c,c):i.valid===!0&&(Y3(i,c),c.valid=!0)}calculateZIndex(){var x,m;const i=this.props,c=i.zIndex||0,f=((x=i.parent)==null?void 0:x.zIndex)||0;let v=c;(m=i.parent)!=null&&m.zIndexLocked&&(v=c<f?c:f),this.calcZIndex=v}destroy(){var i;if(this.destroyed!==!0){for(this.destroyed=!0,this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,this.renderCoords=void 0,this.renderBound=void 0,this.strictBound=void 0,this.preloadBound=void 0,this.globalTransform=void 0,this.scaleRotateTransform=void 0,this.localTransform=void 0,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;this.children.length>0;)(i=this.children[0])==null||i.destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}}renderQuads(i){this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(nt(this.globalTransform),nt(this.renderCoords),i.addQuad({width:this.props.width,height:this.props.height,colorTl:this.premultipliedColorTl,colorTr:this.premultipliedColorTr,colorBl:this.premultipliedColorBl,colorBr:this.premultipliedColorBr,texture:this.texture||this.stage.defaultTexture,textureOptions:this.textureOptions,zIndex:this.zIndex,shader:this.shader.shader,shaderProps:this.shader.getResolvedProps(),alpha:this.worldAlpha,clippingRect:this.clippingRect,tx:this.globalTransform.tx,ty:this.globalTransform.ty,ta:this.globalTransform.ta,tb:this.globalTransform.tb,tc:this.globalTransform.tc,td:this.globalTransform.td,renderCoords:this.renderCoords,rtt:this.rtt,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions}))}get id(){return this._id}get data(){return this.props.data}set data(i){this.props.data=i}get x(){return this.props.x}set x(i){this.props.x!==i&&(this.props.x=i,this.setUpdateType(Ee.Local))}get absX(){var i,c,f;return this.props.x+-this.props.width*this.props.mountX+(((i=this.props.parent)==null?void 0:i.absX)||((f=(c=this.props.parent)==null?void 0:c.globalTransform)==null?void 0:f.tx)||0)}get absY(){var i;return this.props.y+-this.props.height*this.props.mountY+(((i=this.props.parent)==null?void 0:i.absY)??0)}get y(){return this.props.y}set y(i){this.props.y!==i&&(this.props.y=i,this.setUpdateType(Ee.Local))}get width(){return this.props.width}set width(i){this.props.width!==i&&(this.props.width=i,this.setUpdateType(Ee.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Ee.RenderTexture)))}get height(){return this.props.height}set height(i){this.props.height!==i&&(this.props.height=i,this.setUpdateType(Ee.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Ee.RenderTexture)))}get scale(){return this.scaleX}set scale(i){this.scaleX=i,this.scaleY=i}get scaleX(){return this.props.scaleX}set scaleX(i){this.props.scaleX!==i&&(this.props.scaleX=i,this.setUpdateType(Ee.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(i){this.props.scaleY!==i&&(this.props.scaleY=i,this.setUpdateType(Ee.ScaleRotate))}get mount(){return this.props.mount}set mount(i){(this.props.mountX!==i||this.props.mountY!==i)&&(this.props.mountX=i,this.props.mountY=i,this.props.mount=i,this.setUpdateType(Ee.Local))}get mountX(){return this.props.mountX}set mountX(i){this.props.mountX!==i&&(this.props.mountX=i,this.setUpdateType(Ee.Local))}get mountY(){return this.props.mountY}set mountY(i){this.props.mountY!==i&&(this.props.mountY=i,this.setUpdateType(Ee.Local))}get pivot(){return this.props.pivot}set pivot(i){(this.props.pivotX!==i||this.props.pivotY!==i)&&(this.props.pivotX=i,this.props.pivotY=i,this.props.pivot=i,this.setUpdateType(Ee.Local))}get pivotX(){return this.props.pivotX}set pivotX(i){this.props.pivotX!==i&&(this.props.pivotX=i,this.setUpdateType(Ee.Local))}get pivotY(){return this.props.pivotY}set pivotY(i){this.props.pivotY!==i&&(this.props.pivotY=i,this.setUpdateType(Ee.Local))}get rotation(){return this.props.rotation}set rotation(i){this.props.rotation!==i&&(this.props.rotation=i,this.setUpdateType(Ee.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(i){this.props.alpha=i,this.setUpdateType(Ee.PremultipliedColors|Ee.WorldAlpha|Ee.Children|Ee.IsRenderable),this.childUpdateType|=Ee.WorldAlpha}get autosize(){return this.props.autosize}set autosize(i){this.props.autosize=i}get boundsMargin(){var i;return this.props.boundsMargin??((i=this.parent)==null?void 0:i.boundsMargin)??this.stage.boundsMargin}set boundsMargin(i){if(i!==this.props.boundsMargin){if(i===null)this.props.boundsMargin=i;else{const c=Array.isArray(i)?i:[i,i,i,i];this.props.boundsMargin=c}this.setUpdateType(Ee.RenderBounds)}}get clipping(){return this.props.clipping}set clipping(i){this.props.clipping=i,this.setUpdateType(Ee.Clipping|Ee.RenderBounds|Ee.Children),this.childUpdateType|=Ee.Global|Ee.Clipping}get color(){return this.props.color}set color(i){this.colorTop=i,this.colorBottom=i,this.colorLeft=i,this.colorRight=i,this.props.color=i,this.setUpdateType(Ee.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(i){(this.props.colorTl!==i||this.props.colorTr!==i)&&(this.colorTl=i,this.colorTr=i),this.props.colorTop=i,this.setUpdateType(Ee.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(i){(this.props.colorBl!==i||this.props.colorBr!==i)&&(this.colorBl=i,this.colorBr=i),this.props.colorBottom=i,this.setUpdateType(Ee.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(i){(this.props.colorTl!==i||this.props.colorBl!==i)&&(this.colorTl=i,this.colorBl=i),this.props.colorLeft=i,this.setUpdateType(Ee.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(i){(this.props.colorTr!==i||this.props.colorBr!==i)&&(this.colorTr=i,this.colorBr=i),this.props.colorRight=i,this.setUpdateType(Ee.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(i){this.props.colorTl=i,this.setUpdateType(Ee.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(i){this.props.colorTr=i,this.setUpdateType(Ee.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(i){this.props.colorBl=i,this.setUpdateType(Ee.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(i){this.props.colorBr=i,this.setUpdateType(Ee.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(i){this.props.zIndexLocked=i,this.setUpdateType(Ee.CalculatedZIndex|Ee.Children);for(let c=0,f=this.children.length;c<f;c++)this.children[c].setUpdateType(Ee.CalculatedZIndex)}get zIndex(){return this.props.zIndex}set zIndex(i){this.props.zIndex=i,this.setUpdateType(Ee.CalculatedZIndex|Ee.Children);for(let c=0,f=this.children.length;c<f;c++)this.children[c].setUpdateType(Ee.CalculatedZIndex)}get parent(){return this.props.parent}set parent(i){const c=this.props.parent;if(c!==i){if(this.props.parent=i,c){const f=c.children.indexOf(this);nt(f!==-1,"CoreNode.parent: Node not found in old parent's children!"),c.children.splice(f,1),c.setUpdateType(Ee.Children|Ee.ZIndexSortedChildren)}i&&(i.children.push(this),this.setUpdateType(Ee.All),i.setUpdateType(Ee.Children|Ee.ZIndexSortedChildren),(i.rtt||i.parentHasRenderTexture)&&this.applyRTTInheritance(i)),this.updateScaleRotateTransform(),this.setUpdateType(Ee.RenderBounds|Ee.Children)}}get preventCleanup(){return this.props.textureOptions.preventCleanup||!1}set preventCleanup(i){qu()===!1&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.props.textureOptions.preventCleanup=i}get rtt(){return this.props.rtt}set rtt(i){this.props.rtt!==i&&(this.props.rtt=i,i===!0?(this.initRenderTexture(),this.markChildrenWithRTT()):this.cleanupRenderTexture(),this.setUpdateType(Ee.RenderTexture),this.parentHasRenderTexture===!0&&this.notifyParentRTTOfUpdate())}initRenderTexture(){this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.stage.renderer.renderToTexture(this)}cleanupRenderTexture(){this.unloadTexture(),this.clearRTTInheritance(),this.hasRTTupdates=!1,this.texture=null}markChildrenWithRTT(i=null){const c=i||this;for(const f of c.children)f.setUpdateType(Ee.All),f.parentHasRenderTexture=!0,f.markChildrenWithRTT()}applyRTTInheritance(i){i.rtt&&i.setUpdateType(Ee.RenderTexture),this.markChildrenWithRTT(i)}clearRTTInheritance(){if(!this.rtt)for(const i of this.children)i.parentHasRenderTexture=!1,i.rttParent=null,i.setUpdateType(Ee.All),i.clearRTTInheritance()}get shader(){return this.props.shader}set shader(i){this.props.shader!==i&&(this.props.shader=i,this.setUpdateType(Ee.IsRenderable))}get src(){return this.props.src}set src(i){if(this.props.src!==i){if(this.props.src=i,!i){this.texture=null;return}this.texture=this.stage.txManager.createTexture("ImageTexture",{src:i,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight})}}set imageType(i){this.props.imageType!==i&&(this.props.imageType=i)}get imageType(){return this.props.imageType||null}get srcHeight(){return this.props.srcHeight}set srcHeight(i){this.props.srcHeight=i}get srcWidth(){return this.props.srcWidth}set srcWidth(i){this.props.srcWidth=i}get srcX(){return this.props.srcX}set srcX(i){this.props.srcX=i}get srcY(){return this.props.srcY}set srcY(i){this.props.srcY=i}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let i=this.parent;for(;i;){if(i.rtt)return i;i=i.parent}return null}get texture(){return this.props.texture}set texture(i){if(this.props.texture===i)return;const c=this.props.texture;c&&(c.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=i,i!==null&&(i.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(Ee.IsRenderable)}set textureOptions(i){this.props.textureOptions=i}get textureOptions(){return this.props.textureOptions}get strictBounds(){return this.props.strictBounds}set strictBounds(i){i!==this.props.strictBounds&&(this.props.strictBounds=i,this.setUpdateType(Ee.RenderBounds|Ee.Children),this.childUpdateType|=Ee.RenderBounds|Ee.Children)}set interactive(i){this.props.interactive=i,i===!0&&this.stage.interactiveNodes.add(this)}get interactive(){return this.props.interactive}animate(i,c){const f=new V_(this,i,c);return new H_(this.stage.animationManager,f)}flush(){}}const G_=h=>{let s=!1,i=0;const c=(f=0)=>{const v=h.targetFrameTime;if(v>0&&f-i<v){const x=v-(f-i);setTimeout(()=>requestAnimationFrame(c),x);return}if(i=f,h.updateFrameTime(),h.updateAnimations(),!h.hasSceneUpdates()){h.calculateFps(),v>0?setTimeout(()=>requestAnimationFrame(c),Math.max(v,16.666666666666668)):setTimeout(()=>requestAnimationFrame(c),16.666666666666668),s||(h.eventBus.emit("idle"),s=!0),h.txMemManager.checkCleanup()===!0&&h.txMemManager.cleanup(!1),h.flushFrameEvents();return}if(s=!1,h.drawFrame(),h.flushFrameEvents(),v>0){const x=Math.max(0,v-(performance.now()-f));setTimeout(()=>requestAnimationFrame(c),x)}else requestAnimationFrame(c)};requestAnimationFrame(c)},Ku=()=>performance?performance.now():Date.now();class X_{constructor(){j(this,"activeAnimations",new Set)}registerAnimation(s){this.activeAnimations.add(s)}unregisterAnimation(s){this.activeAnimations.delete(s)}update(s){this.activeAnimations.forEach(i=>{i.update(s)})}}function W_(){function h(i){return i.indexOf("image/png")!==-1}function s(i,c,f,v,x,m,l){return new Promise(function(r,S){var _=new XMLHttpRequest;_.open("GET",i,!0),_.responseType="blob",_.onload=function(){if(_.status!==200&&_.status!==0)return S(new Error("Failed to load image: "+_.statusText));var k=_.response;c!==void 0||h(k.type),createImageBitmap(k).then(function(I){r({data:I,premultiplyAlpha:c})}).catch(function(I){S(I)})},_.onerror=function(){S(new Error("Network error occurred while trying to fetch the image."))},_.send()})}self.onmessage=i=>{var c=i.data.src,f=i.data.id,v=i.data.premultiplyAlpha;i.data.sx,i.data.sy,i.data.sw,i.data.sh,s(c,v).then(function(x){self.postMessage({id:f,src:c,data:x},[x.data])}).catch(function(x){self.postMessage({id:f,src:c,error:x.message})})}}class K_{constructor(s,i){j(this,"imageWorkersEnabled",!0);j(this,"messageManager",{});j(this,"workers",[]);j(this,"workerIndex",0);j(this,"nextId",0);this.workers=this.createWorkers(s,i),this.workers.forEach(c=>{c.onmessage=this.handleMessage.bind(this)})}handleMessage(s){const{id:i,data:c,error:f}=s.data,v=this.messageManager[i];if(v){const[x,m]=v;delete this.messageManager[i],f?m(new Error(f)):x(c)}}createWorkers(s=1,i){let c=`(${W_.toString()})()`;i.options===!0&&(c=c.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")),i.full===!0&&(c=c.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;"),c=c.replace("var supportsFullCreateImageBitmap = false;","var supportsFullCreateImageBitmap = true;")),c=c.replace('"use strict";',"");const f=new Blob([c],{type:"application/javascript"}),v=(self.URL?URL:webkitURL).createObjectURL(f),x=[];for(let m=0;m<s;m++)x.push(new Worker(v));return x}getNextWorker(){const s=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,s}getImage(s,i,c,f,v,x){return new Promise((m,l)=>{try{if(this.workers){const r=this.nextId++;this.messageManager[r]=[m,l];const S=this.getNextWorker();S&&S.postMessage({id:r,src:s,premultiplyAlpha:i,sx:c,sy:f,sw:v,sh:x})}}catch(r){l(r)}})}}const za=class za extends Wr{constructor(i,c){super(i);j(this,"type",on.color);j(this,"props");this.props=za.resolveDefaults(c||{})}get color(){return this.props.color}set color(i){this.props.color=i}async getTextureSource(){const i=new Uint8Array(4);return this.color===4294967295?(i[0]=255,i[1]=255,i[2]=255,i[3]=255):(i[0]=this.color>>16&255,i[1]=this.color>>8&255,i[2]=this.color&255,i[3]=this.color>>>24&255),this.setState("fetched",{width:1,height:1}),{data:i,premultiplyAlpha:!0}}static makeCacheKey(i){return`ColorTexture,${za.resolveDefaults(i).color}`}static resolveDefaults(i){return{color:i.color||4294967295}}};j(za,"z$__type__Props");let Ch=za;function Y_(h){return/\.(ktx|pvr)$/.test(h)}const n3=async h=>{const i=await(await fetch(h)).arrayBuffer();return h.indexOf(".ktx")!==-1?q_(i):J_(i)},q_=async h=>{const s=new DataView(h),i=s.getUint32(12)===16909060,c=[],f={glInternalFormat:s.getUint32(28,i),pixelWidth:s.getUint32(36,i),pixelHeight:s.getUint32(40,i),numberOfMipmapLevels:s.getUint32(56,i),bytesOfKeyValueData:s.getUint32(60,i)};let v=64;v+=f.bytesOfKeyValueData;for(let x=0;x<f.numberOfMipmapLevels;x++){const m=s.getUint32(v);v+=4,c.push(s.buffer.slice(v,m)),v+=m}return{data:{glInternalFormat:f.glInternalFormat,mipmaps:c,width:f.pixelWidth||0,height:f.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},J_=async h=>{const m=h,l=new Int32Array(m,0,13),r=l[12]+52,S=new Uint8Array(m,r),_=[],k={pixelWidth:l[7],pixelHeight:l[6],numberOfMipmapLevels:l[11]||0};let I=0,b=k.pixelWidth||0,C=k.pixelHeight||0;for(let E=0;E<k.numberOfMipmapLevels;E++){const A=(b+3>>2)*(C+3>>2)*8,U=new Uint8Array(m,S.byteOffset+I,A);_.push(U),I+=A,b=b>>1,C=C>>1}return{data:{glInternalFormat:36196,mipmaps:_,width:k.pixelWidth||0,height:k.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}};function Q_(h){return/\.(svg)(\?.*)?$/.test(h)}const i3=(h,s,i,c,f,v,x)=>new Promise((m,l)=>{const r=document.createElement("canvas"),S=r.getContext("2d");nt(S),S.imageSmoothingEnabled=!0;const _=new Image;_.onload=()=>{const k=c??0,I=f??0,b=s||_.width,C=i||_.height;r.width=b,r.height=C,S.drawImage(_,0,0,b,C),m({data:S.getImageData(k,I,v??b,x??C),premultiplyAlpha:!1})},_.onerror=k=>{l(k)},_.src=h});function J3(h,s=""){return new Promise((i,c)=>{const f=new XMLHttpRequest;f.responseType=s,f.onreadystatechange=function(){f.readyState==XMLHttpRequest.DONE&&(f.status===0||f.status===200?i(f.response):c(f.statusText))},f.open("GET",h,!0),f.send(null)})}const Va=class Va extends Wr{constructor(i,c){super(i);j(this,"props");j(this,"type",on.image);this.props=Va.resolveDefaults(c)}hasAlphaChannel(i){return i.indexOf("image/png")!==-1}async loadImageFallback(i,c){const f=new Image;return typeof i=="string"&&Bm(i)===!1&&(f.crossOrigin="anonymous"),new Promise(v=>{f.onload=()=>{v({data:f,premultiplyAlpha:c})},f.onerror=()=>{console.warn("Image loading failed, returning fallback object."),v({data:null,premultiplyAlpha:c})},i instanceof Blob?f.src=URL.createObjectURL(i):f.src=i})}async createImageBitmap(i,c,f,v,x,m){const l=c??i.type.includes("image/png"),r=this.txManager.imageBitmapSupported;return r.full===!0&&x!==null&&m!==null?{data:await createImageBitmap(i,f||0,v||0,x,m,{premultiplyAlpha:l?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:l}:r.basic===!0?{data:await createImageBitmap(i),premultiplyAlpha:l}:{data:await createImageBitmap(i,{premultiplyAlpha:l?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:l}}async loadImage(i){const{premultiplyAlpha:c,sx:f,sy:v,sw:x,sh:m}=this.props;if(this.txManager.hasCreateImageBitmap===!0){if(Bm(i)===!1&&this.txManager.hasWorker===!0&&this.txManager.imageWorkerManager!==null)return this.txManager.imageWorkerManager.getImage(i,c,f,v,x,m);let l;return Bm(i)===!0?l=B_(i):l=await J3(i,"blob").then(r=>r),this.createImageBitmap(l,c,f,v,x,m)}return this.loadImageFallback(i,c??!0)}async getTextureSource(){var v,x;let i;try{i=await this.determineImageTypeAndLoadImage()}catch(m){return this.setState("failed",m),{data:null}}if(i.data===null)return this.setState("failed",Error("ImageTexture: No image data")),{data:null};let c,f;return i.data instanceof Uint8Array?(c=this.props.width??0,f=this.props.height??0):(c=((v=i.data)==null?void 0:v.width)??(this.props.width||0),f=((x=i.data)==null?void 0:x.height)??(this.props.height||0)),this.setState("fetched",{width:c,height:f}),{data:i.data,premultiplyAlpha:this.props.premultiplyAlpha??!0}}determineImageTypeAndLoadImage(){const{src:i,premultiplyAlpha:c,type:f}=this.props;if(i===null)return{data:null};if(typeof i!="string"){if(i instanceof Blob)if(this.txManager.hasCreateImageBitmap===!0){const{sx:x,sy:m,sw:l,sh:r}=this.props;return this.createImageBitmap(i,c,x,m,l,r)}else return this.loadImageFallback(i,c??!0);return i instanceof ImageData?{data:i,premultiplyAlpha:c}:{data:i(),premultiplyAlpha:c}}const v=U_(i);return f==="regular"?this.loadImage(v):f==="svg"?i3(v,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):Q_(i)===!0?i3(v,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):f==="compressed"||Y_(i)===!0?n3(v):this.loadImage(v)}static makeCacheKey(i){const c=Va.resolveDefaults(i),f=c.key||c.src;if(typeof f!="string")return!1;let v="";return c.sh!==null&&c.sw!==null&&(v+=",",v+=c.sx??"",v+=c.sy??"",v+=c.sw||"",v+=c.sh||""),`ImageTexture,${f},${c.premultiplyAlpha??"true"}${v}`}static resolveDefaults(i){return{src:i.src??"",premultiplyAlpha:i.premultiplyAlpha??!0,key:i.key??null,type:i.type??null,width:i.width??null,height:i.height??null,sx:i.sx??null,sy:i.sy??null,sw:i.sw??null,sh:i.sh??null}}};j(Va,"z$__type__Props");let Wa=Va;const Ha=class Ha extends Wr{constructor(i,c){super(i);j(this,"props");j(this,"type",on.noise);this.props=Ha.resolveDefaults(c)}async getTextureSource(){const{width:i,height:c}=this.props,f=i*c*4,v=new Uint8ClampedArray(f);for(let x=0;x<f;x+=4){const m=Math.floor(Math.random()*256);v[x]=m,v[x+1]=m,v[x+2]=m,v[x+3]=255}return this.setState("fetched"),{data:new ImageData(v,i,c)}}static makeCacheKey(i){if(i.cacheId===void 0)return!1;const c=Ha.resolveDefaults(i);return`NoiseTexture,${c.width},${c.height},${c.cacheId}`}static resolveDefaults(i){return{width:i.width??128,height:i.height??128,cacheId:i.cacheId??0}}};j(Ha,"z$__type__Props");let sy=Ha;const Ph=class Ph extends Wr{constructor(i,c){super(i);j(this,"props");j(this,"parentTexture");j(this,"type",on.subTexture);j(this,"onParentTxLoaded",()=>{this.forwardParentTxState("loaded",{width:this.props.width,height:this.props.height})});j(this,"onParentTxFailed",(i,c)=>{this.forwardParentTxState("failed",c)});j(this,"onParentTxFetched",()=>{this.forwardParentTxState("fetched",{width:this.props.width,height:this.props.height})});j(this,"onParentTxFetching",()=>{this.forwardParentTxState("fetching")});j(this,"onParentTxLoading",()=>{this.forwardParentTxState("loading")});j(this,"onParentTxFreed",()=>{this.forwardParentTxState("freed")});this.props=Ph.resolveDefaults(c||{}),nt(this.props.texture,"SubTexture requires a parent texture"),nt(this.props.texture instanceof Wa,"SubTexture requires an ImageTexture parent"),this.parentTexture=i.resolveParentTexture(this.props.texture),this.renderableOwners.size>0&&this.parentTexture.setRenderableOwner(this,!0),queueMicrotask(()=>{const f=this.parentTexture;f.state==="loaded"?this.onParentTxLoaded(f,f.dimensions):f.state==="fetching"?this.onParentTxFetching():f.state==="fetched"?this.onParentTxFetched():f.state==="loading"?this.onParentTxLoading():f.state==="failed"?this.onParentTxFailed(f,f.error):f.state==="freed"&&this.onParentTxFreed(),f.on("fetched",this.onParentTxFetched),f.on("loading",this.onParentTxLoading),f.on("fetching",this.onParentTxFetching),f.on("loaded",this.onParentTxLoaded),f.on("failed",this.onParentTxFailed),f.on("freed",this.onParentTxFreed)})}forwardParentTxState(i,c){this.setState(i,c)}onChangeIsRenderable(i){this.parentTexture.setRenderableOwner(this,i)}async getTextureSource(){return new Promise((i,c)=>{this.setState("fetched"),i({data:this.props})})}static makeCacheKey(i){return!1}static resolveDefaults(i){return{texture:i.texture,x:i.x||0,y:i.y||0,width:i.width||0,height:i.height||0}}};j(Ph,"z$__type__Props");let Ka=Ph;const Dh=class Dh extends Wr{constructor(i,c){super(i);j(this,"props");j(this,"type",on.renderToTexture);this.props=Dh.resolveDefaults(c||{})}get width(){return this.props.width}set width(i){this.props.width=i}get height(){return this.props.height}set height(i){this.props.height=i}async getTextureSource(){return this.setState("fetched"),{data:null,premultiplyAlpha:null}}static resolveDefaults(i){return{width:i.width||256,height:i.height||256}}};j(Dh,"z$__type__Props");let bh=Dh;async function Z_(){var f,v,x;const h=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,1,3,0,0,0,37,219,86,202,0,0,0,3,80,76,84,69,0,0,0,167,122,61,218,0,0,0,1,116,82,78,83,0,64,230,216,102,0,0,0,10,73,68,65,84,8,215,99,96,0,0,0,2,0,1,226,33,188,51,0,0,0,0,73,69,78,68,174,66,96,130]),s={basic:!1,options:!1,full:!1},i=new Blob([h],{type:"image/png"}),c=await createImageBitmap(i);(f=c.close)==null||f.call(c),s.basic=!0;try{const m={premultiplyAlpha:"none"},l=await createImageBitmap(i,m);(v=l.close)==null||v.call(l),s.options=!0}catch{}try{const m=await createImageBitmap(i,0,0,1,1,{premultiplyAlpha:"none"});(x=m.close)==null||x.call(m),s.full=!0}catch{}return s}class e8 extends Kr{constructor(i,c){super();j(this,"keyCache",new Map);j(this,"inverseKeyCache",new WeakMap);j(this,"txConstructors",{});j(this,"priorityQueue",[]);j(this,"uploadTextureQueue",[]);j(this,"initialized",!1);j(this,"stage");j(this,"numImageWorkers");j(this,"imageWorkerManager",null);j(this,"hasCreateImageBitmap",!!self.createImageBitmap);j(this,"imageBitmapSupported",{basic:!1,options:!1,full:!1});j(this,"hasWorker",!!self.Worker);j(this,"renderer");j(this,"frameTime",0);const{numImageWorkers:f,createImageBitmapSupport:v}=c;this.stage=i,this.numImageWorkers=f,v==="auto"?Z_().then(x=>{this.initialize(x)}).catch(()=>{console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.initialized=!0,this.emit("initialized")}):this.initialize({basic:v==="basic",options:v==="options",full:v==="full"}),this.registerTextureType("ImageTexture",Wa),this.registerTextureType("ColorTexture",Ch),this.registerTextureType("NoiseTexture",sy),this.registerTextureType("SubTexture",Ka),this.registerTextureType("RenderTexture",bh)}registerTextureType(i,c){this.txConstructors[i]=c}initialize(i){this.hasCreateImageBitmap=i.basic||i.options||i.full,this.imageBitmapSupported=i,this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.hasCreateImageBitmap&&this.hasWorker&&this.numImageWorkers>0?this.imageWorkerManager=new K_(this.numImageWorkers,i):console.warn("[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower."),this.initialized=!0,this.emit("initialized")}enqueueUploadTexture(i){this.uploadTextureQueue.includes(i)===!1&&this.uploadTextureQueue.push(i)}createTexture(i,c){let f;const v=this.txConstructors[i];if(!v)throw new Error(`Texture type "${i}" is not registered`);const x=v.makeCacheKey(c);return x&&this.keyCache.has(x)?f=this.keyCache.get(x):(f=new v(this,c),x&&this.initTextureToCache(f,x)),f}orphanTexture(i){this.removeTextureFromQueue(i),i.type!==on.subTexture&&this.stage.txMemManager.addToOrphanedTextures(i)}loadTexture(i,c){if(this.stage.txMemManager.removeFromOrphanedTextures(i),i.type!==on.subTexture&&i.state!=="loaded"&&!Wr.TRANSITIONAL_TEXTURE_STATES.includes(i.state)){if(this.initialized===!1){this.priorityQueue.push(i);return}i.state==="failed"&&(i.free(),i.freeTextureData()),i.setState("loading"),i.getTextureData().then(()=>{if(i.state!=="fetched"){i.setState("failed");return}i.type!==on.image?this.uploadTexture(i).catch(f=>{console.error("Failed to upload non-image texture:",f),i.setState("failed")}):c===!0?this.uploadTexture(i).catch(f=>{console.error("Failed to upload priority texture:",f),i.setState("failed")}):this.enqueueUploadTexture(i)}).catch(f=>{console.error(f),i.setState("failed")})}}async uploadTexture(i){if(this.stage.txMemManager.doNotExceedCriticalThreshold===!0&&this.stage.txMemManager.criticalCleanupRequested===!0){this.enqueueUploadTexture(i);return}const c=i.loadCtxTexture();if(c!==null&&c.state==="loaded"){i.setState("loaded");return}await c.load()}isProcessingTexture(i){return this.uploadTextureQueue.includes(i)===!0}async processSome(i){if(this.initialized===!1)return;const c=Ku();for(;this.priorityQueue.length>0&&Ku()-c<i;){const f=this.priorityQueue.pop();try{await f.getTextureData(),await this.uploadTexture(f)}catch(v){console.error("Failed to process priority texture:",v)}}for(;this.uploadTextureQueue.length>0&&Ku()-c<i;){const f=this.uploadTextureQueue.shift();try{await this.uploadTexture(f)}catch(v){console.error("Failed to upload texture:",v)}}}hasUpdates(){return this.uploadTextureQueue.length>0}initTextureToCache(i,c){const{keyCache:f,inverseKeyCache:v}=this;f.set(c,i),v.set(i,c)}getTextureFromCache(i){return this.keyCache.get(i)}removeTextureFromCache(i){const{inverseKeyCache:c,keyCache:f}=this,v=c.get(i);v&&f.delete(v)}removeTextureFromQueue(i){const c=this.uploadTextureQueue.indexOf(i);c!==-1&&this.uploadTextureQueue.splice(c,1)}resolveParentTexture(i){if(!(i!=null&&i.props))return i;const c=Wa.makeCacheKey(i.props);return(c?this.getTextureFromCache(c):void 0)??i}}const t8={normal:400,bold:700,bolder:900,lighter:100},r3=h=>typeof h=="number"?h:t8[h]||400;function n8(h,s,i,c,f){let v=r3(i);for(const x of h){const m=x[s];if(!m)continue;if(m.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${s}' - will be used for all weights and styles`),m.values().next().value;const l=new Map;for(const S of m){const _=r3(S.descriptors.weight);if(_===v&&S.descriptors.style===c&&S.descriptors.stretch===f)return S;l.set(_,S)}const r=`TrFontManager: No exact match: '${s} Weight: ${v} Style: ${c} Stretch: ${f}'`;if(console.error(r),v===400&&l.has(500))return l.get(500);if(v===500&&l.has(400))return l.get(400);if(v<400){for(;v>0;){if(l.has(v))return l.get(v);v-=100}v=600}for(;v<1e3;){if(l.has(v))return l.get(v);v+=100}for(v=500;v>0;){if(l.has(v))return l.get(v);v-=100}}}class i8{constructor(s){j(this,"textRenderers");j(this,"fontCache",new Map);this.textRenderers=s}addFontFace(s){for(const i in this.textRenderers){const c=this.textRenderers[i];c&&c.isFontFaceSupported(s)&&c.addFontFace(s)}}resolveFontFace(s,i,c){const{fontFamily:f,fontWeight:v,fontStyle:x,fontStretch:m}=i,l=`${c}_${f}_${x}_${v}_${m}`;if(this.fontCache.has(l)===!0)return this.fontCache.get(l);const r=n8(s,f,v,x,m);return r!==void 0&&this.fontCache.set(l,r),r}}class Q3{static makeCacheKey(s){return!1}static resolveDefaults(s){return{}}}function o3(h,s,i){const c=h.createShader(s);if(!c){const v=h.getError();throw new Error(`Unable to create the shader: ${s===h.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER"}.${v?` WebGlContext Error: ${v}`:""}`)}if(h.shaderSource(c,i),h.compileShader(c),!!h.getShaderParameter(c,h.COMPILE_STATUS))return c;console.error(h.getShaderInfoLog(c)),h.deleteShader(c)}function r8(h,s,i){const c=h.createProgram();if(!c)throw new Error("Unable to create program");if(h.attachShader(c,s),h.attachShader(c,i),h.linkProgram(c),!!h.getProgramParameter(c,h.LINK_STATUS))return c;console.warn(h.getProgramInfoLog(c)),h.deleteProgram(c)}class ys extends Q3{constructor(i){super();j(this,"boundBufferCollection",null);j(this,"buffersBound",!1);j(this,"program");j(this,"vao");j(this,"renderer");j(this,"glw");j(this,"attributeBuffers");j(this,"attributeLocations");j(this,"attributeNames");j(this,"uniformLocations");j(this,"uniformTypes");j(this,"supportsIndexedTextures");const c=this.renderer=i.renderer,f=this.glw=this.renderer.glw;this.supportsIndexedTextures=i.supportsIndexedTextures||!1;const v=f.isWebGl2(),x=v&&i.webgl2Extensions||!v&&i.webgl1Extensions||[],m=v?"2.0":"1.0";x.forEach(C=>{if(!f.getExtension(C))throw new Error(`Shader "${this.constructor.name}" requires extension "${C}" for WebGL ${m} but wasn't found`)});const l=i.shaderSources||this.constructor.shaderSources;if(l)v&&(l!=null&&l.webGl2)&&(l.fragment=l.webGl2.fragment,l.vertex=l.webGl2.vertex,delete l.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const r=c.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,S=l.vertex instanceof Function?l.vertex(r):l.vertex,_=l.fragment instanceof Function?l.fragment(r):l.fragment,k=o3(f,f.VERTEX_SHADER,S),I=o3(f,f.FRAGMENT_SHADER,_);if(!k||!I)throw new Error(`Unable to create the following shader(s): ${[!k&&"VERTEX_SHADER",!I&&"FRAGMENT_SHADER"].filter(Boolean).join(" and ")}`);const b=r8(f,k,I);if(!b)throw new Error("Unable to create program");this.program=b,this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...i.attributes].forEach(C=>{const E=f.getAttribLocation(this.program,C);if(E<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${C}"!`);const A=f.createBuffer();if(!A)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${C}"`);this.attributeLocations[C]=E,this.attributeBuffers[C]=A,this.attributeNames.push(C)}),this.uniformLocations={},this.uniformTypes={},i.uniforms.forEach(C=>{const E=f.getUniformLocation(this.program,C.name);if(this.uniformTypes[C.name]=C.uniform,!E){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${C.name}"`);return}this.uniformLocations[C.name]=E})}bindBufferAttribute(i,c,f){const{glw:v}=this;v.enableVertexAttribArray(i),v.vertexAttribPointer(c,i,f.size,f.type,f.normalized,f.stride,f.offset)}disableAttribute(i){this.glw.disableVertexAttribArray(i)}disableAttributes(){for(const i in this.attributeLocations)this.disableAttribute(this.attributeLocations[i]);this.boundBufferCollection=null}canBatchShaderProps(i,c){return!1}bindRenderOp(i,c){var m;this.bindBufferCollection(i.buffers),i.textures.length>0&&((m=i.textures[0])!=null&&m.ctxTexture)&&this.bindTextures(i.textures);const{glw:f,parentHasRenderTexture:v,renderToTexture:x}=i;if(!(x&&v)){if(v){const{width:l,height:r}=i.framebufferDimensions||{};f.uniform1f(this.getUniformLocation("u_pixelRatio"),1),f.uniform2f(this.getUniformLocation("u_resolution"),l??0,r??0)}else f.uniform1f(this.getUniformLocation("u_pixelRatio"),i.options.pixelRatio),f.uniform2f(this.getUniformLocation("u_resolution"),f.canvas.width,f.canvas.height);if(c){if(Th(c,"$dimensions")){let l=c.$dimensions;l||(l=i.dimensions),f.uniform2f(this.getUniformLocation("u_dimensions"),l.width,l.height)}if(Th(c,"$alpha")){let l=c.$alpha;l||(l=i.alpha),f.uniform1f(this.getUniformLocation("u_alpha"),l)}this.bindProps(c)}}}getUniformLocation(i){return this.uniformLocations[i]||null}bindBufferCollection(i){if(this.boundBufferCollection!==i){for(const c in this.attributeLocations){const f=i.getBuffer(c),v=i.getAttributeInfo(c);nt(f,`Buffer for "${c}" not found`),nt(v),this.bindBufferAttribute(this.attributeLocations[c],f,v)}this.boundBufferCollection=i}}bindProps(i){}bindTextures(i){}attach(){this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}j(ys,"shaderSources");class Z3 extends ys{constructor(s){super({renderer:s,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(s){const{glw:i}=this;i.activeTexture(0),i.bindTexture(s[0].ctxTexture)}}j(Z3,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class eb extends ys{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});j(this,"supportsIndexedTextures",!0)}bindTextures(i){const{renderer:c,glw:f}=this;if(i.length>c.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${c.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);i.forEach((x,m)=>{f.activeTexture(m),f.bindTexture(x.ctxTexture)});const v=Array.from(Array(i.length).keys());this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"),v)}}j(eb,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:i=>`
      #define txUnits ${i}
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${i}], int idx, vec2 uv) {
        ${Array.from(Array(i).keys()).map(c=>`
          ${c!==0?"else ":""}if (idx == ${c}) {
            return texture2D(textures[${c}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class Xn{constructor(s){j(this,"priority",1);j(this,"name","");j(this,"ref");j(this,"target");j(this,"passParameters","");j(this,"declaredUniforms","");j(this,"uniformInfo",{});const{ref:i,target:c,props:f={}}=s;this.ref=i,this.target=c;const v={},x=[];let m="";const l=this.constructor.uniforms||{};for(const r in l){const S=l[r],_=S.type,k=`${i}_${r}`;let I="";S.size&&(I=`[${S.size(f)}]`),x.push(k),m+=`uniform ${_} ${k}${I};`,v[r]={name:k,uniform:l[r].method}}this.passParameters=x.join(","),this.declaredUniforms=m,this.uniformInfo=v}static getEffectKey(s){return""}static getMethodParameters(s,i){const c=[];for(const f in s){const v=s[f];let x="";v.size&&(x=`[${v.size(i)}]`),c.push(`${v.type} ${f}${x}`)}return c.join(",")}static resolveDefaults(s){return{}}static makeEffectKey(s){return!1}}j(Xn,"uniforms",{}),j(Xn,"methods"),j(Xn,"onShaderMask"),j(Xn,"onColorize"),j(Xn,"onEffectMask");const Fm=new Map,o8=(h,s)=>{const i=JSON.stringify(h);if(Fm.has(i))return Fm.get(i);h=h??[];const c=[],f=h.length;let v=0;for(;v<f;v++){const{name:x,type:m,props:l}=h[v],r={name:x,type:m,props:{}},S=s[m],_=S.resolveDefaults(l),k=S.uniforms,I=Object.keys(k),b=I.length;let C=0;for(;C<b;C++){const E=I[C],A=k[E],U={value:_[E],programValue:void 0,method:A.method,updateOnBind:A.updateOnBind||!1,hasValidator:A.validator!==void 0,hasProgramValueUpdater:A.updateProgramValue!==void 0},K=U.hasValidator&&A.validator(_[E],_)||_[E];_[E]!==K&&(U.validatedValue=K),U.hasProgramValueUpdater&&A.updateProgramValue(U),U.programValue===void 0&&(U.programValue=U.value),r.props[E]=U}c.push(r)}return Fm.set(i,c),c},Gr=class Gr extends ys{constructor(i,c,f){const v=Gr.createShader(c,f);super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...v.uniforms],shaderSources:{vertex:v.vertex,fragment:v.fragment}});j(this,"effects",[]);this.effects=v.effects}bindTextures(i){const{glw:c}=this;c.activeTexture(0),c.bindTexture(i[0].ctxTexture)}bindUniformMethods(i){const c=this.glw,f=i.effects,v=f.length;for(let x=0;x<v;x++){const m=this.effects[x].uniformInfo,l=f[x],r=Object.keys(l.props),S=r.length;for(let _=0;_<S;_++){const k=r[_],I=l.props[k].method,b=this.getUniformLocation(m[k].name);if(I==="uniform2fv"||I==="uniform2iv"||I==="uniform3iv"||I==="uniform4fv"||I==="uniform4iv"||I==="uniformMatrix2fv"||I==="uniformMatrix3fv"||I==="uniformMatrix4fv"||I==="uniform1f"||I==="uniform1fv"||I==="uniform1i"||I==="uniform1iv"){l.props[k].setUniformValue=function(){c[I](b,this.programValue)};continue}if(I==="uniform2f"||I==="uniform2i"){l.props[k].setUniformValue=function(){c[I](b,this.programValue[0],this.programValue[1])};continue}if(I==="uniform3f"||I==="uniform3i"){l.props[k].setUniformValue=function(){c[I](b,this.programValue[0],this.programValue[1],this.programValue[2])};continue}if(I==="uniform4f"||I==="uniform4i"){l.props[k].setUniformValue=function(){c[I](b,this.programValue[0],this.programValue[1],this.programValue[2],this.programValue[3])};continue}}}}bindProps(i){var x;const c=i.effects,f=c.length;let v=0;for(;v<f;v++){const m=c[v],l=Object.keys(m.props),r=l.length;let S=0;for(;S<r;S++){const _=l[S],k=m.props[_];if(k.updateOnBind===!0){const I=(x=this.renderer.shManager.getRegisteredEffects()[m.type])==null?void 0:x.uniforms[_];I==null||I.updateProgramValue(m.props[_],i)}k.setUniformValue()}}}canBatchShaderProps(i,c){if(i.$alpha!==c.$alpha||i.$dimensions.width!==c.$dimensions.width||i.$dimensions.height!==c.$dimensions.height||i.effects.length!==c.effects.length)return!1;const f=i.effects.length;let v=0;for(;v<f;v++){const x=i.effects[v],m=c.effects[v];if(x.type!==m.type)return!1;for(const l in x.props)if(m.props&&!m.props[l]||x.props[l].value!==m.props[l].value)return!1}return!0}static createShader(i,c){const f={},v={};let x="";const m=[],l=[],r=i.effects.map(b=>{const C=c[b.type],E=C.getEffectKey(b.props||{});f[E]=f[E]?++f[E]:1;const A=f[E];A===1&&l.push({key:E,type:b.type,props:b.props});const U=new C({ref:`${E}${A===1?"":A}`,target:E,props:b.props});return x+=U.declaredUniforms,m.push(...Object.values(U.uniformInfo)),U});let S="";l==null||l.forEach(b=>{const C=c[b.type],E=C.resolveDefaults(b.props??{}),A=[];for(const pe in C.methods){let oe=pe;const me=C.methods[pe];v[pe]&&v[pe]!==me&&(oe=Gr.resolveMethodDuplicate(pe,me,v)),v[oe]=me.replace("function",oe),A.push({m:pe,cm:oe})}let U=C.onShaderMask instanceof Function?C.onShaderMask(E):C.onShaderMask,K=C.onColorize instanceof Function?C.onColorize(E):C.onColorize,R=C.onEffectMask instanceof Function?C.onEffectMask(E):C.onEffectMask;A.forEach(pe=>{const{m:oe,cm:me}=pe,D=new RegExp(`\\$${oe}`,"g");U&&(U=U.replace(D,me)),K&&(K=K.replace(D,me)),R&&(R=R.replace(D,me))});const le=C.getMethodParameters(C.uniforms,E),ge=le.length>0?`, ${le}`:"";U&&(S+=`
        float fx_${b.key}_onShaderMask(float shaderMask ${ge}) {
          ${U}
        }
        `),K&&(S+=`
          vec4 fx_${b.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${ge}) {
            ${K}
          }
        `),R&&(S+=`
          vec4 fx_${b.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${ge}) {
            ${R}
          }
        `)});let _="";for(const b in v)_+=v[b];let k="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",I=`

    `;for(let b=0;b<r.length;b++){const C=r[b],E=C.passParameters.length>0?`, ${C.passParameters}`:"",A=c[C.name];A.onShaderMask&&(I+=`
        shaderMask = fx_${C.target}_onShaderMask(shaderMask ${E});
        `),A.onColorize&&(I+=`
        maskColor = fx_${C.target}_onColorize(shaderMask, maskColor, shaderColor${E});
        `),A.onEffectMask&&(k=`fx_${C.target}_onEffectMask(shaderMask, maskColor, shaderColor${E})`);const U=r[b+1];(U===void 0||c[U.name].onEffectMask)&&(I+=`
          shaderColor = ${k};
        `)}return{effects:r,uniforms:m,fragment:Gr.fragment(x,_,S,I),vertex:Gr.vertex()}}static resolveMethodDuplicate(i,c,f,v=0){const x=i+(v>0?v:"");return f[x]&&f[x]!==c?this.resolveMethodDuplicate(i,c,f,++v):x}static resolveDefaults(i,c){return nt(c),{effects:o8(i.effects??[],c),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(i,c){var v;let f="";return(v=i.effects)==null||v.forEach(x=>{const l=c[x.type].getEffectKey(x.props||{});f+=`,${l}`}),`DynamicShader${f}`}};j(Gr,"z$__type__Props"),j(Gr,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),j(Gr,"fragment",(i,c,f,v)=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${i}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${c}

    ${f}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${v}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let Vu=Gr;class uy extends ys{constructor(s){super({renderer:s,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(s){return{radius:s.radius||10,$dimensions:{width:0,height:0}}}bindTextures(s){const{glw:i}=this;i.activeTexture(0),i.bindTexture(s[0].ctxTexture)}bindProps(s){const i=Math.min(s.$dimensions.width,s.$dimensions.height)/(2*s.radius);this.glw.uniform1f(this.getUniformLocation("u_radius"),s.radius*Math.min(i,1))}canBatchShaderProps(s,i){return s.radius===i.radius&&s.$dimensions.width===i.$dimensions.width&&s.$dimensions.height===i.$dimensions.height}}j(uy,"z$__type__Props"),j(uy,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const s8=new Float32Array([1,0,0,0,1,0,0,0,1]),Ga=class Ga extends ys{constructor(s){super({renderer:s,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(s){const{glw:i}=this;i.activeTexture(0),i.bindTexture(s[0].ctxTexture)}bindProps(s){const i=Ga.resolveDefaults(s);for(const c in i)if(c==="transform")this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"),i[c]);else if(c==="scrollY")this.glw.uniform1f(this.getUniformLocation("u_scrollY"),i[c]);else if(c==="color"){const f=qa(i.color);this.glw.uniform4fv(this.getUniformLocation("u_color"),f)}else c==="size"?this.glw.uniform1f(this.getUniformLocation("u_size"),i[c]):c==="distanceRange"?this.glw.uniform1f(this.getUniformLocation("u_distanceRange"),i[c]):c==="debug"&&this.glw.uniform1i(this.getUniformLocation("u_debug"),i[c]?1:0)}static resolveDefaults(s={}){return{transform:s.transform??s8,scrollY:s.scrollY??0,color:s.color??4294967295,size:s.size??16,distanceRange:s.distanceRange??1,debug:s.debug??!1}}};j(Ga,"z$__type__Props"),j(Ga,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let ly=Ga;const Ju=h=>{h.programValue===void 0&&(h.programValue=new Float32Array(4));const s=h.value,i=h.programValue;i[0]=(s>>>24)/255,i[1]=(s>>>16&255)/255,i[2]=(s>>>8&255)/255,i[3]=(s&255)/255},u8=h=>{const s=h.validatedValue||h.value;if(h.programValue instanceof Float32Array){const i=h.programValue;i[0]=s[0],i[1]=s[1]}else h.programValue=new Float32Array(s)},l8=h=>{const s=h.validatedValue||h.value;if(h.programValue instanceof Float32Array){const i=h.programValue;i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3]}else h.programValue=new Float32Array(s)},tb=h=>{const s=h.validatedValue||h.value;if(h.programValue instanceof Float32Array){const i=s.length,c=h.programValue;for(let f=0;f<i;f++)c[f]=s[f]}else h.programValue=new Float32Array(s)},ky=h=>{const s=Array.isArray(h);if(s){if(s&&h.length===4)return h;if(s&&h.length===2)return[h[0],h[1],h[0],h[1]];if(s&&h.length===3)return[h[0],h[1],h[2],h[0]]}else return[h,h,h,h];return[h[0],h[0],h[0],h[0]]},nb=(h,s)=>{h.programValue===void 0&&(h.programValue=new Float32Array(4));const i=h.programValue,c=h.validatedValue||h.value;if(s===void 0&&h.$dimensions===void 0){i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3];return}let f=h.$dimensions;if(s!==void 0){const{$dimensions:k}=s;if(f!==void 0&&(f.width===k.width||f.height===k.height))return;f===void 0&&(f={width:k==null?void 0:k.width,height:k==null?void 0:k.height},h.$dimensions=f)}const{width:v,height:x}=f,[m,l,r,S]=c,_=Math.min(Math.min(Math.min(v/Math.max(v,m+l),v/Math.max(v,r+S)),Math.min(x/Math.max(x,m+r),x/Math.max(x,l+S))),1);i[0]=m*_,i[1]=l*_,i[2]=r*_,i[3]=S*_};class Ru extends Xn{constructor(){super(...arguments);j(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(i){return{radius:i.radius??10}}}j(Ru,"z$__type__Props"),j(Ru,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:ky,updateProgramValue:nb}}),j(Ru,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),j(Ru,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),j(Ru,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class Pa extends Xn{constructor(){super(...arguments);j(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}j(Pa,"z$__type__Props"),j(Pa,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Ju,method:"uniform4fv",type:"vec4"}}),j(Pa,"onEffectMask",`
  float intR = shaderMask + 1.0;
  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),j(Pa,"onColorize",`
    return color;
  `);const ko=class ko extends Xn{constructor(){super(...arguments);j(this,"name","linearGradient")}static getEffectKey(i){return i.colors.value?`linearGradient${i.colors.value.length}`:`linearGradient${i.colors.length}`}static resolveDefaults(i){const c=i.colors??[4278190080,4294967295];let f=i.stops||[];if(f.length===0||f.length!==c.length){const v=c.length;let x=0;const m=f;for(;x<v;x++)f[x]?(m[x]=f[x],f[x-1]===void 0&&m[x-2]!==void 0&&(m[x-1]=m[x-2]+(f[x]-m[x-2])/2)):m[x]=x*(1/(c.length-1));f=m}return{colors:c,stops:f,angle:i.angle??0}}};j(ko,"z$__type__Props"),j(ko,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:i=>i.reduce((c,f)=>c.concat(qa(f)),[]),updateProgramValue:tb,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),j(ko,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),j(ko,"ColorLoop",i=>{let c="";for(let f=2;f<i;f++)c+=`colorOut = mix(colorOut, colors[${f}], clamp((dist - stops[${f-1}]) / (stops[${f}] - stops[${f-1}]), 0.0, 1.0));`;return c}),j(ko,"onColorize",i=>{const c=i.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${ko.ColorLoop(c)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let ay=ko;class fy extends Xn{constructor(){super(...arguments);j(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(i){return{amount:i.amount??1}}}j(fy,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),j(fy,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class _u extends Xn{constructor(){super(...arguments);j(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}j(_u,"z$__type__Props"),j(_u,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Ju,method:"uniform4fv",type:"vec4"}}),j(_u,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),j(_u,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),j(_u,"onColorize",`
    return color;
  `);class Lu extends Xn{constructor(){super(...arguments);j(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}j(Lu,"z$__type__Props"),j(Lu,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Ju,method:"uniform4fv",type:"vec4"}}),j(Lu,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),j(Lu,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),j(Lu,"onColorize",`
    return color;
  `);class Pu extends Xn{constructor(){super(...arguments);j(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}j(Pu,"z$__type__Props"),j(Pu,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Ju,method:"uniform4fv",type:"vec4"}}),j(Pu,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),j(Pu,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),j(Pu,"onColorize",`
    return color;
  `);class Du extends Xn{constructor(){super(...arguments);j(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}j(Du,"z$__type__Props"),j(Du,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Ju,method:"uniform4fv",type:"vec4"}}),j(Du,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),j(Du,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),j(Du,"onColorize",`
    return color;
  `);class Da extends Xn{constructor(){super(...arguments);j(this,"name","glitch")}static getEffectKey(i){return"glitch"}static resolveDefaults(i){return{amplitude:i.amplitude??.2,narrowness:i.narrowness??4,blockiness:i.blockiness??2,minimizer:i.minimizer??8,time:i.time??Date.now()}}}j(Da,"z$__type__Props"),j(Da,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:i=>{const c=i.value=(Date.now()-i.value)%1e3;i.programValue=c},type:"float"}}),j(Da,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),j(Da,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class fh extends Xn{constructor(){super(...arguments);j(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(i){return{fade:i.fade??10}}}j(fh,"z$__type__Props"),j(fh,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:ky,updateProgramValue:l8}}),j(fh,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const cs=class cs extends Xn{constructor(){super(...arguments);j(this,"name","radialGradient")}static getEffectKey(i){return i.colors.value?`radialGradient${i.colors.value.length}`:`radialGradient${i.colors.length}`}static resolveDefaults(i){const c=i.colors??[4278190080,4294967295];let f=i.stops||[];if(f.length===0||f.length!==c.length){const v=c.length;let x=0;const m=f;for(;x<v;x++)f[x]?(m[x]=f[x],f[x-1]===void 0&&m[x-2]!==void 0&&(m[x-1]=m[x-2]+(f[x]-m[x-2])/2)):m[x]=x*(1/(c.length-1));f=m}return{colors:c,stops:f,width:i.width??0,height:i.height??i.width??0,pivot:i.pivot??[.5,.5]}}};j(cs,"z$__type__Props"),j(cs,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:u8,method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:i=>i.reduce((c,f)=>c.concat(qa(f)),[]),updateProgramValue:tb,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),j(cs,"ColorLoop",i=>{let c="";for(let f=2;f<i;f++)c+=`colorOut = mix(colorOut, colors[${f}], clamp((dist - stops[${f-1}]) / (stops[${f}] - stops[${f-1}]), 0.0, 1.0));`;return c}),j(cs,"onColorize",i=>{const c=i.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${cs.ColorLoop(c)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let cy=cs;class Ou extends Xn{constructor(){super(...arguments);j(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(i){return{width:i.width??10,progress:i.progress??.5,offset:i.offset??0,range:i.range??Math.PI*2,rounded:i.rounded??!1,radius:i.radius??1,color:i.color??4294967295}}}j(Ou,"z$__type__Props"),j(Ou,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:i=>i?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:Ju,method:"uniform4fv",type:"vec4"}}),j(Ou,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),j(Ou,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),j(Ou,"onColorize",`
    return color;
  `);class Nu extends Xn{constructor(){super(...arguments);j(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(i){return{x:i.x||0,y:i.y||0,width:i.width||50,height:i.height||50,radius:i.radius??0}}}j(Nu,"z$__type__Props"),j(Nu,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:ky,updateProgramValue:nb}}),j(Nu,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),j(Nu,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),j(Nu,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const a8="RoundedRectangle";class Nh extends Q3{constructor(i){super();j(this,"shType");this.shType=i}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class f8{constructor(s,i,c,f){j(this,"type");j(this,"shader");j(this,"resolvedProps");j(this,"props");this.type=s,this.shader=i,this.resolvedProps=c;const v=Object.keys(c),x=v.length,m={};for(let l=0;l<x;l++){const r=v[l];Object.defineProperty(m,r,{get:()=>this.resolvedProps[r],set:S=>{this.resolvedProps[r]=S,f.requestRender()}})}this.props=m}getResolvedProps(){return this.resolvedProps}}class c8{constructor(s,i,c){j(this,"shader");j(this,"resolvedProps");j(this,"props");j(this,"type");this.shader=s,this.type="DynamicShader",this.resolvedProps=i;const f=c.getRegisteredEffects(),v={},x=i.effects,m=x.length;for(let l=0;l<m;l++){const{name:r,props:S,type:_}=x[l];if(r===void 0)continue;const k={},I=Object.keys(S),b=I.length;for(let C=0;C<b;C++){const E=I[C];Object.defineProperty(k,E,{get:()=>this.resolvedProps.effects[l].props[E].value,set:A=>{var K,R;const U=this.resolvedProps.effects[l].props[E];U.value=A,U.hasValidator&&(A=U.validatedValue=(K=f[_].uniforms[E])==null?void 0:K.validator(A,S)),U.hasProgramValueUpdater?(R=f[_].uniforms[E])==null||R.updateProgramValue(U):U.programValue=A,c.renderer.stage.requestRender()}})}Object.defineProperty(v,r,{get:()=>k})}this.props=v}getResolvedProps(){return this.resolvedProps}}class d8{constructor(){j(this,"shCache",new Map);j(this,"shConstructors",{});j(this,"attachedShader",null);j(this,"effectConstructors",{});j(this,"renderer");this.registerShaderType("DefaultShader",Z3),this.registerShaderType("DefaultShaderBatched",eb),this.registerShaderType("RoundedRectangle",uy),this.registerShaderType("DynamicShader",Vu),this.registerShaderType("SdfShader",ly),this.registerEffectType("border",Pa),this.registerEffectType("borderBottom",Pu),this.registerEffectType("borderLeft",Du),this.registerEffectType("borderRight",_u),this.registerEffectType("borderTop",Lu),this.registerEffectType("fadeOut",fh),this.registerEffectType("linearGradient",ay),this.registerEffectType("radialGradient",cy),this.registerEffectType("grayscale",fy),this.registerEffectType("glitch",Da),this.registerEffectType("radius",Ru),this.registerEffectType("radialProgress",Ou),this.registerEffectType("holePunch",Nu)}registerShaderType(s,i){this.shConstructors[s]=i}registerEffectType(s,i){this.effectConstructors[s]=i}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(s,i){if(!this.renderer)throw new Error("Renderer is not been defined");const c=this.shConstructors[s];if(!c)throw new Error(`Shader type "${s}" is not registered`);if(this.renderer.mode==="canvas"&&c.prototype instanceof ys)return this._createShaderCtr(s,new Nh(s),i);if(s==="DynamicShader")return this.loadDynamicShader(i);const f=c.resolveDefaults(i),v=c.makeCacheKey(f)||c.name;if(v&&this.shCache.has(v))return this._createShaderCtr(s,this.shCache.get(v),f);const x=new c(this.renderer,i);return v&&this.shCache.set(v,x),this._createShaderCtr(s,x,f)}loadDynamicShader(s){if(!this.renderer)throw new Error("Renderer is not been defined");const i=Vu.resolveDefaults(s,this.effectConstructors),c=Vu.makeCacheKey(i,this.effectConstructors);if(c&&this.shCache.has(c))return this._createDynShaderCtr(this.shCache.get(c),i);const f=new Vu(this.renderer,s,this.effectConstructors);return c&&this.shCache.set(c,f),this._createDynShaderCtr(f,i)}_createShaderCtr(s,i,c){return new f8(s,i,c,this.renderer.stage)}_createDynShaderCtr(s,i){return s.bindUniformMethods(i),new c8(s,i,this)}useShader(s){this.attachedShader!==s&&(this.attachedShader&&this.attachedShader.detach(),s.attach(),this.attachedShader=s)}}const h8={x:(h,s)=>{h.props.x=s},y:(h,s)=>{h.props.y=s},width:(h,s)=>{h.props.width=s},height:(h,s)=>{h.props.height=s},color:(h,s)=>{h.props.color=s},zIndex:(h,s)=>{h.props.zIndex=s},fontFamily:(h,s)=>{h.props.fontFamily=s},fontWeight:(h,s)=>{h.props.fontWeight=s},fontStyle:(h,s)=>{h.props.fontStyle=s},fontStretch:(h,s)=>{h.props.fontStretch=s},fontSize:(h,s)=>{h.props.fontSize=s},text:(h,s)=>{h.props.text=s},textAlign:(h,s)=>{h.props.textAlign=s},contain:(h,s)=>{h.props.contain=s},offsetY:(h,s)=>{h.props.offsetY=s},scrollable:(h,s)=>{h.props.scrollable=s},scrollY:(h,s)=>{h.props.scrollY=s},letterSpacing:(h,s)=>{h.props.letterSpacing=s},lineHeight:(h,s)=>{h.props.lineHeight=s},maxLines:(h,s)=>{h.props.maxLines=s},textBaseline:(h,s)=>{h.props.textBaseline=s},verticalAlign:(h,s)=>{h.props.verticalAlign=s},overflowSuffix:(h,s)=>{h.props.overflowSuffix=s},debug:(h,s)=>{h.props.debug=s}};class Ay{constructor(s){j(this,"stage");j(this,"set");this.stage=s;const i={...h8,...this.getPropertySetters()},c={};Object.keys(i).forEach(f=>{Object.defineProperty(c,f,{value:(v,x)=>{v.props[f]!==x&&(i[f](v,x),this.stage.requestRender())},writable:!1,configurable:!1})}),this.set=c}setStatus(s,i,c){s.status!==i&&(s.status=i,s.emitter.emit(i,c))}setIsRenderable(s,i){s.isRenderable=i}destroyState(s){this.setStatus(s,"destroyed"),s.emitter.removeAllListeners()}scheduleUpdateState(s){s.updateScheduled||(s.updateScheduled=!0,queueMicrotask(()=>{s.status!=="destroyed"&&(s.updateScheduled=!1,this.updateState(s))}))}}class p8{constructor(){j(this,"data",{})}reset(){this.data={}}increment(s){this.data[s]||(this.data[s]=0),this.data[s]++}getData(){return{...this.data}}}class g8{constructor(s,i){j(this,"stage");j(this,"memUsed",0);j(this,"loadedTextures",new Map);j(this,"orphanedTextures",[]);j(this,"criticalThreshold");j(this,"targetThreshold");j(this,"cleanupInterval");j(this,"debugLogging");j(this,"lastCleanupTime",0);j(this,"baselineMemoryAllocation");j(this,"criticalCleanupRequested",!1);j(this,"doNotExceedCriticalThreshold");j(this,"frameTime",0);this.stage=s;const{criticalThreshold:c,doNotExceedCriticalThreshold:f}=i;this.doNotExceedCriticalThreshold=f||!1,this.criticalThreshold=Math.round(c);const v=Math.max(0,Math.min(1,i.targetThresholdLevel));if(this.cleanupInterval=i.cleanupInterval,this.debugLogging=i.debugLogging,this.baselineMemoryAllocation=Math.round(i.baselineMemoryAllocation),this.targetThreshold=Math.max(Math.round(c*v),this.baselineMemoryAllocation),this.memUsed=Math.round(i.baselineMemoryAllocation),i.debugLogging){let x=0;setInterval(()=>{x!==this.memUsed&&(x=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${t3(this.memUsed)} mb / ${t3(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}c===0&&(this.setTextureMemUse=()=>{})}addToOrphanedTextures(s){this.orphanedTextures.includes(s)&&this.removeFromOrphanedTextures(s),s.preventCleanup===!1&&this.orphanedTextures.push(s)}removeFromOrphanedTextures(s){const i=this.orphanedTextures.indexOf(s);i!==-1&&this.orphanedTextures.splice(i,1)}setTextureMemUse(s,i){if(this.loadedTextures.has(s)&&(this.memUsed-=this.loadedTextures.get(s)),i===0){this.loadedTextures.delete(s);return}else this.memUsed+=i,this.loadedTextures.set(s,i);this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}checkCriticalCleanup(){return this.memUsed>this.criticalThreshold}cleanupQuick(s){const i=this.targetThreshold,c=Ku();for(;this.memUsed>=i&&this.orphanedTextures.length>0&&(s||Ku()-c<10);){const f=this.orphanedTextures.shift();f!==void 0&&f.renderable!==!0&&(Wr.TRANSITIONAL_TEXTURE_STATES.includes(f.state)||this.destroyTexture(f))}}destroyTexture(s){this.debugLogging===!0&&console.log(`[TextureMemoryManager] Destroying texture. State: ${s.state}`);const i=this.stage.txManager;i.removeTextureFromQueue(s),i.removeTextureFromCache(s),s.destroy(),this.removeFromOrphanedTextures(s),this.loadedTextures.delete(s)}cleanupDeep(s){const i=s?this.criticalThreshold:this.targetThreshold,c=[],f=[...this.loadedTextures.keys()];for(let v=0;v<f.length;v++){const x=f[v];x!==void 0&&(x.type===on.image||x.type===on.noise||x.type===on.renderToTexture)&&(x.renderable===!0?c.push(x):c.unshift(x))}for(;this.memUsed>=i&&c.length>0;){const v=c.shift();if(v!==void 0&&v.preventCleanup!==!0){if(v.renderable===!0||Wr.TRANSITIONAL_TEXTURE_STATES.includes(v.state))break;this.destroyTexture(v)}}}cleanup(s=!1){const i=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,i===!0&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging===!0&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${i}. Aggressive: ${s}`),this.cleanupQuick(i),s===!0&&this.memUsed>=this.criticalThreshold&&this.cleanupDeep(i),this.memUsed>=this.criticalThreshold?(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),(this.debugLogging===!0||qu()===!1)&&console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`)):this.criticalCleanupRequested=!1}getMemoryInfo(){let s=0;const i=[...this.loadedTextures.keys()].reduce((c,f)=>{s+=f.renderable?1:0;const v=this.loadedTextures.get(f)??0;return c+(f.renderable?v:0)},this.baselineMemoryAllocation);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:i,memUsed:this.memUsed,renderableTexturesLoaded:s,loadedTextures:this.loadedTextures.size,baselineMemoryAllocation:this.baselineMemoryAllocation}}}class ib{constructor(s,i){j(this,"textureSource");j(this,"memManager");j(this,"state","freed");this.memManager=s,this.textureSource=i}setTextureMemUse(s){this.memManager.setTextureMemUse(this.textureSource,s)}get renderable(){return this.textureSource.renderable}}class rb{constructor(s){j(this,"options");j(this,"mode");j(this,"stage");j(this,"txManager");j(this,"txMemManager");j(this,"shManager");j(this,"rttNodes",[]);this.options=s,this.stage=s.stage,this.txManager=s.txManager,this.txMemManager=s.txMemManager,this.shManager=s.shManager}}class m8 extends oy{constructor(i,c,f){super(i,c);j(this,"textRenderer");j(this,"trState");j(this,"_textRendererOverride",null);j(this,"onTextLoaded",()=>{const{contain:i}=this,c=this.trState.props.width,f=this.trState.props.height,v=this.trState.textW||0,x=this.trState.textH||0;i==="both"?(this.props.width=c,this.props.height=f):i==="width"?(this.props.width=c,this.props.height=x):i==="none"&&(this.props.width=v,this.props.height=x),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});j(this,"onTextFailed",(i,c)=>{this.emit("failed",{type:"text",error:c})});this._textRendererOverride=c.textRendererOverride,this.textRenderer=f;const v=this.createState({x:0,y:0,width:c.width,height:c.height,textAlign:c.textAlign,color:c.color,zIndex:c.zIndex,contain:c.contain,scrollable:c.scrollable,scrollY:c.scrollY,offsetY:c.offsetY,letterSpacing:c.letterSpacing,debug:c.debug,fontFamily:c.fontFamily,fontSize:c.fontSize,fontStretch:c.fontStretch,fontStyle:c.fontStyle,fontWeight:c.fontWeight,text:c.text,lineHeight:c.lineHeight,maxLines:c.maxLines,textBaseline:c.textBaseline,verticalAlign:c.verticalAlign,overflowSuffix:c.overflowSuffix});this.trState=v}get width(){return this.props.width}set width(i){this.props.width=i,this.textRenderer.set.width(this.trState,i),this.contain==="none"&&this.setUpdateType(Ee.Local)}get height(){return this.props.height}set height(i){this.props.height=i,this.textRenderer.set.height(this.trState,i),this.contain!=="both"&&this.setUpdateType(Ee.Local)}get color(){return this.trState.props.color}set color(i){this.textRenderer.set.color(this.trState,i)}get text(){return this.trState.props.text}set text(i){this.textRenderer.set.text(this.trState,i)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(i){this._textRendererOverride=i,this.textRenderer.destroyState(this.trState);const c=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);if(!c){console.warn("Text Renderer not found for font",this.trState.props.fontFamily);return}this.textRenderer=c,this.trState=this.createState(this.trState.props)}get fontSize(){return this.trState.props.fontSize}set fontSize(i){this.textRenderer.set.fontSize(this.trState,i)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(i){this.textRenderer.set.fontFamily(this.trState,i)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(i){this.textRenderer.set.fontStretch(this.trState,i)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(i){this.textRenderer.set.fontStyle(this.trState,i)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(i){this.textRenderer.set.fontWeight(this.trState,i)}get textAlign(){return this.trState.props.textAlign}set textAlign(i){this.textRenderer.set.textAlign(this.trState,i)}get contain(){return this.trState.props.contain}set contain(i){this.textRenderer.set.contain(this.trState,i)}get scrollable(){return this.trState.props.scrollable}set scrollable(i){this.textRenderer.set.scrollable(this.trState,i)}get scrollY(){return this.trState.props.scrollY}set scrollY(i){this.textRenderer.set.scrollY(this.trState,i)}get offsetY(){return this.trState.props.offsetY}set offsetY(i){this.textRenderer.set.offsetY(this.trState,i)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(i){this.textRenderer.set.letterSpacing(this.trState,i)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(i){this.textRenderer.set.lineHeight(this.trState,i)}get maxLines(){return this.trState.props.maxLines}set maxLines(i){this.textRenderer.set.maxLines(this.trState,i)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(i){this.textRenderer.set.textBaseline(this.trState,i)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(i){this.textRenderer.set.verticalAlign(this.trState,i)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(i){this.textRenderer.set.overflowSuffix(this.trState,i)}get debug(){return this.trState.props.debug}set debug(i){this.textRenderer.set.debug(this.trState,i)}update(i,c){super.update(i,c),nt(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkBasicRenderability(){return this.worldAlpha===0||this.isOutOfBounds()===!0?!1:!!(this.trState&&this.trState.props.text!=="")}setRenderable(i){super.setRenderable(i),this.textRenderer.setIsRenderable(this.trState,i)}renderQuads(i){var c;if(nt(this.globalTransform),!this.textRenderer.renderQuads){super.renderQuads(i);return}this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(this.parentHasRenderTexture&&((c=this.props.parent)!=null&&c.rtt)&&(this.globalTransform=Fn.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),nt(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}createState(i){const c=this.textRenderer.createState(i,this);return c.emitter.on("loaded",this.onTextLoaded),c.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(c),c}}function y8(h){const s={boolean:!0,string:!0,number:!0,undefined:!0},i=Object.keys(h);for(let c=0;c<i.length;c++){const f=i[c];if(!f)continue;const v=h[f],x=typeof v;x==="string"&&v.length>2048&&(console.warn(`Custom Data value for ${f} is too long, it will be truncated to 2048 characters`),h[f]=v.substring(0,2048)),s[x]||(console.warn(`Custom Data value for ${f} is not a boolean, string, or number, it will be ignored`),delete h[f])}return h}const v8=2e6;class x8{constructor(s){j(this,"options");j(this,"animationManager");j(this,"txManager");j(this,"txMemManager");j(this,"fontManager");j(this,"textRenderers");j(this,"shManager");j(this,"renderer");j(this,"root");j(this,"interactiveNodes",new Set);j(this,"boundsMargin");j(this,"defShaderCtr");j(this,"strictBound");j(this,"preloadBound");j(this,"strictBounds");j(this,"defaultTexture",null);j(this,"targetFrameTime",0);j(this,"eventBus");j(this,"deltaTime",0);j(this,"lastFrameTime",0);j(this,"currentFrameTime",0);j(this,"fpsNumFrames",0);j(this,"fpsElapsedTime",0);j(this,"numQuadsRendered",0);j(this,"renderRequested",!1);j(this,"frameEventQueue",[]);j(this,"fontResolveMap",{});j(this,"contextSpy",null);this.options=s;const{canvas:i,clearColor:c,appWidth:f,appHeight:v,boundsMargin:x,enableContextSpy:m,forceWebGL2:l,numImageWorkers:r,textureMemory:S,renderEngine:_,fontEngines:k,createImageBitmapSupport:I}=s;this.eventBus=s.eventBus,this.targetFrameTime=s.targetFPS>0?1e3/s.targetFPS:0,this.txManager=new e8(this,{numImageWorkers:r,createImageBitmapSupport:I}),this.txManager.on("initialized",()=>{this.requestRender()}),this.txMemManager=new g8(this,S),this.shManager=new d8,this.animationManager=new X_,this.contextSpy=m?new p8:null,this.strictBounds=s.strictBounds;let b=[0,0,0,0];x&&(b=Array.isArray(x)?x:[x,x,x,x]),this.boundsMargin=b,this.strictBound=$u(0,0,f,v),this.preloadBound=ry(this.strictBound,b);const C={stage:this,canvas:i,pixelRatio:s.devicePhysicalPixelRatio*s.deviceLogicalPixelRatio,clearColor:c??4278190080,bufferMemory:v8,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy,forceWebGL2:l};this.renderer=new _(C);const E=this.renderer.mode||"webgl";this.createDefaultTexture(),this.defShaderCtr=this.renderer.getDefShaderCtr(),I_(E),this.txManager.renderer=this.renderer,this.textRenderers={},k.forEach(U=>{const K=new U(this),R=K.type;if(R==="sdf"&&E==="canvas"){console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...");return}K instanceof Ay&&(R==="canvas"?this.textRenderers.canvas=K:R==="sdf"&&(this.textRenderers.sdf=K))}),Object.keys(this.textRenderers).length===0&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new i8(this.textRenderers);const A=new oy(this,{x:0,y:0,width:f,height:v,alpha:1,autosize:!1,boundsMargin:null,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1,strictBounds:this.strictBounds});this.root=A,G_(this)}setClearColor(s){this.renderer.updateClearColor(s),this.renderRequested=!0}updateTargetFrameTime(){this.targetFrameTime=this.options.targetFPS>0?1e3/this.options.targetFPS:0}updateFrameTime(){const s=Ku();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=s,this.deltaTime=this.lastFrameTime?s-this.lastFrameTime:100/6,this.txManager.frameTime=s,this.txMemManager.frameTime=s,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}createDefaultTexture(){console.log("Creating default texture"),this.defaultTexture=this.txManager.createTexture("ColorTexture",{color:4294967295}),nt(this.defaultTexture instanceof Ch),this.txManager.loadTexture(this.defaultTexture,!0),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.requestRender()})}updateAnimations(){const{animationManager:s}=this;this.root&&s.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested||this.txManager.hasUpdates()}drawFrame(){const{renderer:s,renderRequested:i}=this;nt(s),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),this.txManager.processSome(this.options.textureProcessingTimeLimit).catch(c=>{console.error("Error processing textures:",c)}),s.reset(),this.txMemManager.criticalCleanupRequested===!0&&(this.txMemManager.cleanup(!1),this.txMemManager.criticalCleanupRequested===!0&&this.txMemManager.cleanup(!0)),s.rttNodes.length>0&&s.renderRTTNodes(),this.addQuads(this.root),s==null||s.render(),this.calculateFps(),this.calculateQuads(),i&&(this.renderRequested=!1)}queueFrameEvent(s,i){this.frameEventQueue.push([s,i])}flushFrameEvents(){for(const[s,i]of this.frameEventQueue)this.eventBus.emit(s,i);this.frameEventQueue=[]}calculateFps(){var i,c;const{fpsUpdateInterval:s}=this.options;if(s&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=s)){const f=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:f,contextSpyData:((i=this.contextSpy)==null?void 0:i.getData())??null}),(c=this.contextSpy)==null||c.reset()}}calculateQuads(){const s=this.renderer.getQuadCount();s&&s!==this.numQuadsRendered&&(this.numQuadsRendered=s,this.queueFrameEvent("quadsUpdate",{quads:s}))}addQuads(s){nt(this.renderer),s.isRenderable===!0&&s.renderQuads(this.renderer);for(let i=0;i<s.children.length;i++){const c=s.children[i];c!==void 0&&(c.worldAlpha===0||c.strictBounds===!0&&c.renderState===Hn.OutOfBounds||this.addQuads(c))}}requestRender(){this.renderRequested=!0}findNodesAtPoint(s){const i=s.x/this.options.deviceLogicalPixelRatio,c=s.y/this.options.deviceLogicalPixelRatio,f=[];for(const v of this.interactiveNodes)v.isRenderable!==!1&&O_(i,c,v.renderBound)===!0&&f.push(v);return f}getNodeFromPosition(s){const i=this.findNodesAtPoint(s);if(i.length===0)return null;let c=i[0];for(let f=0;f<i.length;f++)i[f].zIndex>c.zIndex&&(c=i[f]);return c||null}resolveTextRenderer(s,i=null){const c=`${s.fontFamily}${s.fontStyle}${s.fontWeight}${s.fontStretch}${i||""}`;if(this.fontResolveMap[c]!==void 0)return this.fontResolveMap[c];let f=i,v=!1;if(f){const m=this.textRenderers[f];m?m.canRenderFont(s)||(console.warn(`Cannot use override text renderer '${f}' for font`,s),f=null,v=!0):(console.warn(`Text renderer override '${f}' not found.`),f=null,v=!0)}if(!f){for(const[m,l]of Object.entries(this.textRenderers))if(l.canRenderFont(s)){f=m;break}!f&&this.textRenderers.canvas!==void 0&&(f="canvas")}if(v&&console.warn(`Falling back to text renderer ${String(f)}`),!f)return null;const x=this.textRenderers[f];return nt(x,"resolvedTextRenderer undefined"),this.fontResolveMap[c]=x,x}createShaderCtr(s,i){return this.shManager.loadShader(s,i)}createNode(s){const i=this.resolveNodeDefaults(s);return new oy(this,i)}createTextNode(s){const i=s.fontSize??16,c={...this.resolveNodeDefaults(s),text:s.text??"",textRendererOverride:s.textRendererOverride??null,fontSize:i,fontFamily:s.fontFamily??"sans-serif",fontStyle:s.fontStyle??"normal",fontWeight:s.fontWeight??"normal",fontStretch:s.fontStretch??"normal",textAlign:s.textAlign??"left",contain:s.contain??"none",scrollable:s.scrollable??!1,scrollY:s.scrollY??0,offsetY:s.offsetY??0,letterSpacing:s.letterSpacing??0,lineHeight:s.lineHeight,maxLines:s.maxLines??0,textBaseline:s.textBaseline??"alphabetic",verticalAlign:s.verticalAlign??"middle",overflowSuffix:s.overflowSuffix??"...",debug:s.debug??{},shaderProps:null},f=this.resolveTextRenderer(c,s.textRendererOverride);if(!f)throw new Error(`No compatible text renderer found for ${c.fontFamily}`);return new m8(this,c,f)}setBoundsMargin(s){this.boundsMargin=Array.isArray(s)?s:[s,s,s,s],this.root.setUpdateType(Ee.RenderBounds)}resolveNodeDefaults(s){const i=s.color??4294967295,c=s.colorTl??s.colorTop??s.colorLeft??i,f=s.colorTr??s.colorTop??s.colorRight??i,v=s.colorBl??s.colorBottom??s.colorLeft??i,x=s.colorBr??s.colorBottom??s.colorRight??i;let m={};return this.options.inspector===!0&&(m=y8(s.data??{})),{x:s.x??0,y:s.y??0,width:s.width??0,height:s.height??0,alpha:s.alpha??1,autosize:s.autosize??!1,boundsMargin:s.boundsMargin??null,clipping:s.clipping??!1,color:i,colorTop:s.colorTop??i,colorBottom:s.colorBottom??i,colorLeft:s.colorLeft??i,colorRight:s.colorRight??i,colorBl:v,colorBr:x,colorTl:c,colorTr:f,zIndex:s.zIndex??0,zIndexLocked:s.zIndexLocked??0,parent:s.parent??null,texture:s.texture??null,textureOptions:s.textureOptions??{},shader:s.shader??this.defShaderCtr,src:s.src??null,srcHeight:s.srcHeight,srcWidth:s.srcWidth,srcX:s.srcX,srcY:s.srcY,scale:s.scale??null,scaleX:s.scaleX??s.scale??1,scaleY:s.scaleY??s.scale??1,mount:s.mount??0,mountX:s.mountX??s.mount??0,mountY:s.mountY??s.mount??0,pivot:s.pivot??.5,pivotX:s.pivotX??s.pivot??.5,pivotY:s.pivotY??s.pivot??.5,rotation:s.rotation??0,rtt:s.rtt??!1,data:m,preventCleanup:s.preventCleanup??!1,imageType:s.imageType,interactive:s.interactive??!1,strictBounds:s.strictBounds??this.strictBounds}}cleanup(s){this.txMemManager.cleanup(s)}}class w8 extends Kr{constructor(i,c){var C,E,A,U,K,R;super();j(this,"root");j(this,"canvas");j(this,"settings");j(this,"stage");j(this,"inspector",null);const f={criticalThreshold:((C=i.textureMemory)==null?void 0:C.criticalThreshold)||124e6,targetThresholdLevel:((E=i.textureMemory)==null?void 0:E.targetThresholdLevel)||.5,cleanupInterval:((A=i.textureMemory)==null?void 0:A.cleanupInterval)||5e3,debugLogging:((U=i.textureMemory)==null?void 0:U.debugLogging)||!1,baselineMemoryAllocation:((K=i.textureMemory)==null?void 0:K.baselineMemoryAllocation)||26e6,doNotExceedCriticalThreshold:((R=i.textureMemory)==null?void 0:R.doNotExceedCriticalThreshold)||!1},v={appWidth:i.appWidth||1920,appHeight:i.appHeight||1080,textureMemory:f,boundsMargin:i.boundsMargin||0,deviceLogicalPixelRatio:i.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:i.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:i.clearColor??0,fpsUpdateInterval:i.fpsUpdateInterval||0,targetFPS:i.targetFPS||0,numImageWorkers:i.numImageWorkers!==void 0?i.numImageWorkers:2,enableContextSpy:i.enableContextSpy??!1,forceWebGL2:i.forceWebGL2??!1,inspector:i.inspector??!1,renderEngine:i.renderEngine,quadBufferSize:i.quadBufferSize??4*1024*1024,fontEngines:i.fontEngines,strictBounds:i.strictBounds??!0,textureProcessingTimeLimit:i.textureProcessingTimeLimit||42,canvas:i.canvas||document.createElement("canvas"),createImageBitmapSupport:i.createImageBitmapSupport||"full"};this.settings=v;const{appWidth:x,appHeight:m,deviceLogicalPixelRatio:l,devicePhysicalPixelRatio:r,inspector:S,canvas:_}=v,k=x*l,I=m*l;this.canvas=_,_.width=k*r,_.height=I*r,_.style.width=`${k}px`,_.style.height=`${I}px`,this.stage=new x8({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,forceWebGL2:this.settings.forceWebGL2,fpsUpdateInterval:this.settings.fpsUpdateInterval,targetFPS:this.settings.targetFPS,numImageWorkers:this.settings.numImageWorkers,renderEngine:this.settings.renderEngine,textureMemory:f,eventBus:this,quadBufferSize:this.settings.quadBufferSize,fontEngines:this.settings.fontEngines,inspector:this.settings.inspector!==null,strictBounds:this.settings.strictBounds,textureProcessingTimeLimit:this.settings.textureProcessingTimeLimit,createImageBitmapSupport:this.settings.createImageBitmapSupport}),this.root=this.stage.root;let b;if(typeof c=="string"?b=document.getElementById(c):b=c,!b)throw new Error("Could not find target element");b.appendChild(_),S&&!qu()&&(this.inspector=new S(_,v))}createNode(i){const c=this.stage.createNode(i);return this.inspector?this.inspector.createNode(c):c}createTextNode(i){const c=this.stage.createTextNode(i);return this.inspector?this.inspector.createTextNode(c):c}destroyNode(i){return this.inspector&&this.inspector.destroyNode(i.id),i.destroy()}createTexture(i,c){return this.stage.txManager.createTexture(i,c)}createShader(i,c){return this.stage.shManager.loadShader(i,c)}createDynamicShader(i){return this.stage.shManager.loadDynamicShader({effects:i})}createEffect(i,c,f){return{name:f,type:i,props:c}}getNodeById(i){var v;const c=(v=this.stage)==null?void 0:v.root;if(!c)return null;const f=x=>{if(x.id===i)return x;for(const m of x.children){const l=f(m);if(l)return l}return null};return f(c)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){this.stage.requestRender()}cleanup(i=!1){this.stage.cleanup(i)}setClearColor(i){this.stage.setClearColor(i)}get targetFPS(){return this.stage.options.targetFPS}set targetFPS(i){this.stage.options.targetFPS=i>0?i:0,this.stage.updateTargetFrameTime()}}class ob extends Kr{constructor(i){super();j(this,"fontFamily");j(this,"descriptors");j(this,"loaded",!1);j(this,"metrics",null);const{fontFamily:c,descriptors:f,metrics:v}=i;v&&(this.metrics={ascender:v.ascender/v.unitsPerEm,descender:v.descender/v.unitsPerEm,lineGap:v.lineGap/v.unitsPerEm}),this.fontFamily=c,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...f}}static convertToCssFontFaceDescriptors(i){return{style:i.style,weight:typeof i.weight=="number"?`${i.weight}`:i.weight,stretch:i.stretch,unicodeRange:i.unicodeRange,featureSettings:i.featureSettings,display:i.display}}}class ch extends ob{constructor(i){super(i);j(this,"fontFace");j(this,"fontUrl");const{fontFamily:c,fontUrl:f}=i,v=f.replace(/\(|\)/g,""),x=this.descriptors;let m={style:x.style,weight:typeof x.weight=="number"?`${x.weight}`:x.weight,stretch:x.stretch,unicodeRange:x.unicodeRange,featureSettings:x.featureSettings,display:x.display};for(const r in m){const S=r;m[S]===void 0&&delete m[S]}const l=new FontFace(c,`url(${v})`,m);v.length>0?l.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error):(this.loaded=!0,this.emit("loaded")),this.fontFace=l,this.fontUrl=f}}class S8{}class sb extends S8{constructor(i,c,f,v,x,m,l,r,S,_,k,I,b){super();j(this,"glw");j(this,"options");j(this,"buffers");j(this,"shader");j(this,"shaderProps");j(this,"alpha");j(this,"clippingRect");j(this,"dimensions");j(this,"bufferIdx");j(this,"zIndex");j(this,"renderToTexture");j(this,"parentHasRenderTexture");j(this,"framebufferDimensions");j(this,"length",0);j(this,"numQuads",0);j(this,"textures",[]);j(this,"maxTextures");this.glw=i,this.options=c,this.buffers=f,this.shader=v,this.shaderProps=x,this.alpha=m,this.clippingRect=l,this.dimensions=r,this.bufferIdx=S,this.zIndex=_,this.renderToTexture=k,this.parentHasRenderTexture=I,this.framebufferDimensions=b,this.maxTextures=v.supportsIndexedTextures?i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(i){const{textures:c,maxTextures:f}=this;let v=-1;const x=c.length;for(let m=0;m<x;m++)if(c[m]===i){v=m;break}return v!==-1?v:x>=f?4294967295:(this.textures.push(i),x)}draw(){const{glw:i,shader:c,shaderProps:f,options:v}=this,{shManager:x}=v;x.useShader(c),c.bindRenderOp(this,f);const m=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:l,y:r,width:S,height:_}=this.clippingRect,k=this.parentHasRenderTexture?1:v.pixelRatio,I=v.canvas.height,b=Math.round(l*k),C=Math.round(S*k),E=Math.round(_*k);let A=Math.round(I-E-r*k);this.parentHasRenderTexture&&(A=this.framebufferDimensions?this.framebufferDimensions.height-this.dimensions.height:0),i.setScissorTest(!0),i.scissor(b,A,C,E)}else i.setScissorTest(!1);i.drawElements(i.TRIANGLES,6*this.numQuads,i.UNSIGNED_SHORT,m)}}function T8(h){const s={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(s).forEach(c=>{s[c]=h.getParameter(h[c])}),s}function C8(h){const s={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(s).forEach(c=>{s[c]=h.getExtension(c)}),s}function b8(h,s){const i=~~(s/80),c=new Uint16Array(i*6);for(let v=0,x=0;v<i;v+=6,x+=4)c[v]=x,c[v+1]=x+1,c[v+2]=x+2,c[v+3]=x+2,c[v+4]=x+1,c[v+5]=x+3;const f=h.createBuffer();h.elementArrayBufferData(f,c,h.STATIC_DRAW)}function k8(h){return h!==null&&(typeof h=="object"&&h.constructor&&h.constructor.name==="HTMLImageElement"||typeof HTMLImageElement<"u"&&h instanceof HTMLImageElement)}const jm=new Uint8Array([0,0,0,0]);class Ey extends ib{constructor(i,c,f){super(c,f);j(this,"glw");j(this,"_nativeCtxTexture",null);j(this,"_w",0);j(this,"_h",0);this.glw=i}get ctxTexture(){return this.state==="freed"?(this.load(),null):(nt(this._nativeCtxTexture),this._nativeCtxTexture)}get w(){return this._w}get h(){return this._h}async load(){if(this.state==="loading"||this.state==="loaded")return Promise.resolve();if(this.state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this._nativeCtxTexture===null){this.state="failed";const i=new Error("Could not create WebGL Texture");throw this.textureSource.setState("failed",i),console.error("Could not create WebGL Texture"),i}try{const{width:i,height:c}=await this.onLoadRequest();if(this.state==="freed")return;this.state="loaded",this._w=i,this._h=c,this.textureSource.setState("loaded",{width:i,height:c}),queueMicrotask(()=>{this.textureSource.freeTextureData()})}catch(i){if(this.state==="freed")return;this.state="failed";const c=i instanceof Error?i:new Error(String(i));throw this.textureSource.setState("failed",c),this.textureSource.freeTextureData(),console.error(i),c}}async onLoadRequest(){const{glw:i}=this,c=this.textureSource.textureData;if(c===null||this._nativeCtxTexture===null)throw new Error("Texture data or native texture is null "+this.textureSource.type);i.texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(jm.byteLength);let f=0,v=0;i.activeTexture(0);const x=c.data,m=i.RGBA,l=4,r=1.1;if(typeof ImageBitmap<"u"&&x instanceof ImageBitmap||x instanceof ImageData||k8(x))f=x.width,v=x.height,i.bindTexture(this._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!c.premultiplyAlpha),i.texImage2D(0,m,m,i.UNSIGNED_BYTE,x),this.setTextureMemUse(v*f*l*r);else if(x===null)f=0,v=0,i.bindTexture(this._nativeCtxTexture),i.texImage2D(0,m,1,1,0,m,i.UNSIGNED_BYTE,jm),this.setTextureMemUse(jm.byteLength);else if("mipmaps"in x&&x.mipmaps){const{mipmaps:S,width:_=0,height:k=0,type:I,glInternalFormat:b}=x,C=I==="ktx"?new DataView(S[0]??new ArrayBuffer(0)):S[0];i.bindTexture(this._nativeCtxTexture),i.compressedTexImage2D(0,b,_,k,0,C),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),this.setTextureMemUse(C.byteLength)}else x&&x instanceof Uint8Array?(f=1,v=1,i.bindTexture(this._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!c.premultiplyAlpha),i.texImage2D(0,m,f,v,0,m,i.UNSIGNED_BYTE,x),this.setTextureMemUse(f*v*l)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",c);return{width:f,height:v}}free(){this.state!=="freed"&&(this.state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,this._nativeCtxTexture!==null&&(this.glw.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null),this.textureSource.freeTextureData())}createNativeCtxTexture(){const{glw:i}=this,c=i.createTexture();return c?(i.activeTexture(0),i.bindTexture(c),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),c):null}}class A8 extends Ey{constructor(s,i,c){super(s,i,c)}async onLoadRequest(){var i,c;const s=this.textureSource.textureData;return nt(s,"SubTexture must have texture data"),s.data instanceof Uint8Array?{width:1,height:1}:{width:((i=s.data)==null?void 0:i.width)||0,height:((c=s.data)==null?void 0:c.height)||0}}}class ub{constructor(s){j(this,"config");this.config=s}getBuffer(s){var i;return(i=this.config.find(c=>c.attributes[s]))==null?void 0:i.buffer}getAttributeInfo(s){var i;return(i=this.config.find(c=>c.attributes[s]))==null?void 0:i.attributes[s]}}function E8(h){return self.WebGL2RenderingContext&&h instanceof self.WebGL2RenderingContext}class I8{constructor(s){j(this,"gl");j(this,"activeTextureUnit",0);j(this,"texture2dUnits");j(this,"texture2dParams",new WeakMap);j(this,"scissorEnabled");j(this,"scissorX");j(this,"scissorY");j(this,"scissorWidth");j(this,"scissorHeight");j(this,"blendEnabled");j(this,"blendSrcRgb");j(this,"blendDstRgb");j(this,"blendSrcAlpha");j(this,"blendDstAlpha");j(this,"boundArrayBuffer");j(this,"boundElementArrayBuffer");j(this,"curProgram");j(this,"canvas");j(this,"MAX_RENDERBUFFER_SIZE");j(this,"MAX_TEXTURE_SIZE");j(this,"MAX_VIEWPORT_DIMS");j(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");j(this,"MAX_TEXTURE_IMAGE_UNITS");j(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");j(this,"MAX_VERTEX_ATTRIBS");j(this,"MAX_VARYING_VECTORS");j(this,"MAX_VERTEX_UNIFORM_VECTORS");j(this,"MAX_FRAGMENT_UNIFORM_VECTORS");j(this,"TEXTURE_MAG_FILTER");j(this,"TEXTURE_MIN_FILTER");j(this,"TEXTURE_WRAP_S");j(this,"TEXTURE_WRAP_T");j(this,"LINEAR");j(this,"CLAMP_TO_EDGE");j(this,"RGB");j(this,"RGBA");j(this,"UNSIGNED_BYTE");j(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");j(this,"UNPACK_FLIP_Y_WEBGL");j(this,"FLOAT");j(this,"TRIANGLES");j(this,"UNSIGNED_SHORT");j(this,"ONE");j(this,"ONE_MINUS_SRC_ALPHA");j(this,"VERTEX_SHADER");j(this,"FRAGMENT_SHADER");j(this,"STATIC_DRAW");j(this,"COMPILE_STATUS");j(this,"LINK_STATUS");j(this,"DYNAMIC_DRAW");j(this,"COLOR_ATTACHMENT0");j(this,"INVALID_ENUM");j(this,"INVALID_OPERATION");this.gl=s,this.activeTextureUnit=s.getParameter(s.ACTIVE_TEXTURE)-s.TEXTURE0;const i=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(i).fill(void 0).map((f,v)=>(this.activeTexture(v),s.getParameter(s.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=s.isEnabled(s.SCISSOR_TEST);const c=s.getParameter(s.SCISSOR_BOX);this.scissorX=c[0],this.scissorY=c[1],this.scissorWidth=c[2],this.scissorHeight=c[3],this.blendEnabled=s.isEnabled(s.BLEND),this.blendSrcRgb=s.getParameter(s.BLEND_SRC_RGB),this.blendDstRgb=s.getParameter(s.BLEND_DST_RGB),this.blendSrcAlpha=s.getParameter(s.BLEND_SRC_ALPHA),this.blendDstAlpha=s.getParameter(s.BLEND_DST_ALPHA),this.boundArrayBuffer=s.getParameter(s.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=s.getParameter(s.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=s.getParameter(s.CURRENT_PROGRAM),this.canvas=s.canvas,this.MAX_RENDERBUFFER_SIZE=s.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=s.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=s.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=s.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=s.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=s.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=s.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=s.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=s.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=s.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=s.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=s.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=s.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=s.TEXTURE_WRAP_T,this.LINEAR=s.LINEAR,this.CLAMP_TO_EDGE=s.CLAMP_TO_EDGE,this.RGB=s.RGB,this.RGBA=s.RGBA,this.UNSIGNED_BYTE=s.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=s.UNPACK_FLIP_Y_WEBGL,this.FLOAT=s.FLOAT,this.TRIANGLES=s.TRIANGLES,this.UNSIGNED_SHORT=s.UNSIGNED_SHORT,this.ONE=s.ONE,this.ONE_MINUS_SRC_ALPHA=s.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=s.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=s.TRIANGLES,this.UNSIGNED_SHORT=s.UNSIGNED_SHORT,this.VERTEX_SHADER=s.VERTEX_SHADER,this.FRAGMENT_SHADER=s.FRAGMENT_SHADER,this.STATIC_DRAW=s.STATIC_DRAW,this.COMPILE_STATUS=s.COMPILE_STATUS,this.LINK_STATUS=s.LINK_STATUS,this.DYNAMIC_DRAW=s.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=s.COLOR_ATTACHMENT0,this.INVALID_ENUM=s.INVALID_ENUM,this.INVALID_OPERATION=s.INVALID_OPERATION}isWebGl2(){return E8(this.gl)}activeTexture(s){const{gl:i}=this;this.activeTextureUnit!==s&&(i.activeTexture(s+i.TEXTURE0),this.activeTextureUnit=s)}bindTexture(s){const{gl:i,activeTextureUnit:c,texture2dUnits:f}=this;f[c]!==s&&(f[c]=s,i.bindTexture(this.gl.TEXTURE_2D,s))}_getActiveTexture(){const{activeTextureUnit:s,texture2dUnits:i}=this;return i[s]}texParameteri(s,i){const{gl:c,texture2dParams:f}=this,v=this._getActiveTexture();if(!v)throw new Error("No active texture");let x=f.get(v);x||(x={},f.set(v,x)),x[s]!==i&&(x[s]=i,c.texParameteri(c.TEXTURE_2D,s,i))}texImage2D(s,i,c,f,v,x,m,l){const{gl:r}=this;x?r.texImage2D(r.TEXTURE_2D,s,i,c,f,v,x,m,l):r.texImage2D(r.TEXTURE_2D,s,i,c,f,v)}compressedTexImage2D(s,i,c,f,v,x){const{gl:m}=this;m.compressedTexImage2D(m.TEXTURE_2D,s,i,c,f,v,x)}pixelStorei(s,i){const{gl:c}=this;c.pixelStorei(s,i)}generateMipmap(){const{gl:s}=this;s.generateMipmap(s.TEXTURE_2D)}createTexture(){const{gl:s}=this;return s.createTexture()}deleteTexture(s){const{gl:i}=this;s&&this.texture2dParams.delete(s),i.deleteTexture(s)}deleteFramebuffer(s){this.gl.deleteFramebuffer(s)}viewport(s,i,c,f){const{gl:v}=this;v.viewport(s,i,c,f)}clearColor(s,i,c,f){const{gl:v}=this;v.clearColor(s,i,c,f)}setScissorTest(s){const{gl:i,scissorEnabled:c}=this;s!==c&&(s?i.enable(i.SCISSOR_TEST):i.disable(i.SCISSOR_TEST),this.scissorEnabled=s)}scissor(s,i,c,f){const{gl:v,scissorX:x,scissorY:m,scissorWidth:l,scissorHeight:r}=this;(s!==x||i!==m||c!==l||f!==r)&&(v.scissor(s,i,c,f),this.scissorX=s,this.scissorY=i,this.scissorWidth=c,this.scissorHeight=f)}setBlend(s){const{gl:i,blendEnabled:c}=this;s!==c&&(s?i.enable(i.BLEND):i.disable(i.BLEND),this.blendEnabled=s)}blendFunc(s,i){const{gl:c,blendSrcRgb:f,blendDstRgb:v,blendSrcAlpha:x,blendDstAlpha:m}=this;(s!==f||i!==v||s!==x||i!==m)&&(c.blendFunc(s,i),this.blendSrcRgb=s,this.blendDstRgb=i,this.blendSrcAlpha=s,this.blendDstAlpha=i)}createBuffer(){const{gl:s}=this;return s.createBuffer()}createFramebuffer(){const{gl:s}=this;return s.createFramebuffer()}bindFramebuffer(s){const{gl:i}=this;i.bindFramebuffer(i.FRAMEBUFFER,s)}framebufferTexture2D(s,i,c){const{gl:f}=this;f.framebufferTexture2D(f.FRAMEBUFFER,s,f.TEXTURE_2D,i,c)}clear(){const{gl:s}=this;s.clear(s.COLOR_BUFFER_BIT)}arrayBufferData(s,i,c){const{gl:f,boundArrayBuffer:v}=this;v!==s&&(f.bindBuffer(f.ARRAY_BUFFER,s),this.boundArrayBuffer=s),f.bufferData(f.ARRAY_BUFFER,i,c)}elementArrayBufferData(s,i,c){const{gl:f,boundElementArrayBuffer:v}=this;v!==s&&(f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),this.boundElementArrayBuffer=s),f.bufferData(f.ELEMENT_ARRAY_BUFFER,i,c)}vertexAttribPointer(s,i,c,f,v,x,m){const{gl:l,boundArrayBuffer:r}=this;r!==s&&(l.bindBuffer(l.ARRAY_BUFFER,s),this.boundArrayBuffer=s),l.vertexAttribPointer(i,c,f,v,x,m)}useProgram(s){const{gl:i,curProgram:c}=this;c!==s&&(i.useProgram(s),this.curProgram=s)}uniform1f(s,i){const{gl:c}=this;c.uniform1f(s,i)}uniform1fv(s,i){const{gl:c}=this;c.uniform1fv(s,i)}uniform1i(s,i){const{gl:c}=this;c.uniform1i(s,i)}uniform1iv(s,i){const{gl:c}=this;c.uniform1iv(s,i)}uniform2f(s,i,c){const{gl:f}=this;f.uniform2f(s,i,c)}uniform2fv(s,i){const{gl:c}=this;c.uniform2fv(s,i)}uniform2i(s,i,c){const{gl:f}=this;f.uniform2i(s,i,c)}uniform2iv(s,i){const{gl:c}=this;c.uniform2iv(s,i)}uniform3f(s,i,c,f){const{gl:v}=this;v.uniform3f(s,i,c,f)}uniform3fv(s,i){const{gl:c}=this;c.uniform3fv(s,i)}uniform3i(s,i,c,f){const{gl:v}=this;v.uniform3i(s,i,c,f)}uniform3iv(s,i){const{gl:c}=this;c.uniform3iv(s,i)}uniform4f(s,i,c,f,v){const{gl:x}=this;x.uniform4f(s,i,c,f,v)}uniform4fv(s,i){const{gl:c}=this;c.uniform4fv(s,i)}uniform4i(s,i,c,f,v){const{gl:x}=this;x.uniform4i(s,i,c,f,v)}uniform4iv(s,i){const{gl:c}=this;c.uniform4iv(s,i)}uniformMatrix2fv(s,i){const{gl:c}=this;c.uniformMatrix2fv(s,!1,i)}uniformMatrix3fv(s,i){const{gl:c}=this;c.uniformMatrix3fv(s,!1,i)}uniformMatrix4fv(s,i){const{gl:c}=this;c.uniformMatrix4fv(s,!1,i)}getParameter(s){const{gl:i}=this;return i.getParameter(s)}drawElements(s,i,c,f){const{gl:v}=this;v.drawElements(s,i,c,f)}getExtension(s){const{gl:i}=this;return i.getExtension(s)}getError(){const{gl:s}=this;return s.getError()}createVertexArray(){const{gl:s}=this;return nt(s instanceof WebGL2RenderingContext),s.createVertexArray()}bindVertexArray(s){const{gl:i}=this;nt(i instanceof WebGL2RenderingContext),i.bindVertexArray(s)}getAttribLocation(s,i){const{gl:c}=this;return c.getAttribLocation(s,i)}getUniformLocation(s,i){const{gl:c}=this;return c.getUniformLocation(s,i)}enableVertexAttribArray(s){const{gl:i}=this;i.enableVertexAttribArray(s)}disableVertexAttribArray(s){const{gl:i}=this;i.disableVertexAttribArray(s)}createShader(s){const{gl:i}=this;return i.createShader(s)}compileShader(s){const{gl:i}=this;i.compileShader(s)}attachShader(s,i){const{gl:c}=this;c.attachShader(s,i)}linkProgram(s){const{gl:i}=this;i.linkProgram(s)}deleteProgram(s){const{gl:i}=this;i.deleteProgram(s)}getShaderParameter(s,i){const{gl:c}=this;return c.getShaderParameter(s,i)}getShaderInfoLog(s){const{gl:i}=this;return i.getShaderInfoLog(s)}createProgram(){const{gl:s}=this;return s.createProgram()}getProgramParameter(s,i){const{gl:c}=this;return c.getProgramParameter(s,i)}getProgramInfoLog(s){const{gl:i}=this;return i.getProgramInfoLog(s)}shaderSource(s,i){const{gl:c}=this;c.shaderSource(s,i)}deleteShader(s){const{gl:i}=this;i.deleteShader(s)}}class s3 extends Ey{constructor(i,c,f){super(i,c,f);j(this,"framebuffer",null)}async onLoadRequest(){const{glw:i}=this,c=this._nativeCtxTexture=this.createNativeCtxTexture();if(!c)throw new Error("Failed to create native texture for RenderTexture");const{width:f,height:v}=this.textureSource;return this.framebuffer=i.createFramebuffer(),i.texImage2D(0,i.RGBA,f,v,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(f*v*4),i.bindFramebuffer(this.framebuffer),i.framebufferTexture2D(i.COLOR_ATTACHMENT0,c,0),i.bindFramebuffer(null),{width:f,height:v}}free(){super.free(),this.glw.deleteFramebuffer(this.framebuffer),this.framebuffer=null}}const M8=24;class Iy extends rb{constructor(i){super(i);j(this,"glw");j(this,"system");j(this,"quadBuffer");j(this,"fQuadBuffer");j(this,"uiQuadBuffer");j(this,"renderOps",[]);j(this,"curBufferIdx",0);j(this,"curRenderOp",null);j(this,"rttNodes",[]);j(this,"activeRttNode",null);j(this,"defShaderCtrl");j(this,"defaultShader");j(this,"quadBufferCollection");j(this,"clearColor",{raw:0,normalized:[0,0,0,0]});j(this,"quadBufferUsage",0);j(this,"numQuadsRendered",0);j(this,"renderToTextureActive",!1);this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:c,clearColor:f,bufferMemory:v}=i,x=A_(c,i.forceWebGL2,i.contextSpy),m=this.glw=new I8(x);m.viewport(0,0,c.width,c.height),this.updateClearColor(f),m.setBlend(!0),m.blendFunc(m.ONE,m.ONE_MINUS_SRC_ALPHA),b8(m,v),this.system={parameters:T8(this.glw),extensions:C8(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const l=m.createBuffer();nt(l);const r=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new ub([{buffer:l,attributes:{a_position:{name:"a_position",size:2,type:m.FLOAT,normalized:!1,stride:r,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:m.FLOAT,normalized:!1,stride:r,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:m.UNSIGNED_BYTE,normalized:!0,stride:r,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:m.FLOAT,normalized:!1,stride:r,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:i}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,i.setScissorTest(!1),i.clear()}getShaderManager(){return this.shManager}createCtxTexture(i){return i instanceof Ka?new A8(this.glw,this.txMemManager,i):i instanceof bh?new s3(this.glw,this.txMemManager,i):new Ey(this.glw,this.txMemManager,i)}addQuad(i){var A;const{fQuadBuffer:c,uiQuadBuffer:f}=this;let v=i.texture;if(nt(v!==null,"Texture is required"),i.shaderProps!==null){if(Th(i.shaderProps,"$dimensions")==!0){const U=i.shaderProps.$dimensions;U.width=i.width,U.height=i.height}Th(i.shaderProps,"$alpha")===!0&&(i.shaderProps.$alpha=i.alpha)}let{curBufferIdx:x,curRenderOp:m}=this;const l={width:-1,height:-1};l.width=i.width,l.height=i.height;const r=i.shader||this.defaultShader;nt(r.getUniformLocation!==void 0,"Invalid WebGL shader"),this.reuseRenderOp(i)===!1&&(this.newRenderOp(r,i.shaderProps,i.alpha,l,i.clippingRect,x,i.rtt,i.parentHasRenderTexture,i.framebufferDimensions),m=this.curRenderOp,nt(m));let S=0,_=0,k=1,I=1;if(v.type===on.subTexture){const{x:U,y:K,width:R,height:le}=v.props,{width:ge=0,height:pe=0}=v.parentTexture.dimensions||{width:0,height:0};S=U/ge,k=S+R/ge,_=K/pe,I=_+le/pe,v=v.parentTexture}if(v.type===on.image&&i.textureOptions!==null&&i.textureOptions.resizeMode!==void 0&&v.dimensions!==null){const U=i.textureOptions.resizeMode,{width:K,height:R}=v.dimensions;if(U.type==="cover"){const le=i.width/K,ge=i.height/R,pe=Math.max(le,ge),oe=1/pe;if(pe&&le&&le<pe){const me=oe*i.width;S=(1-me/K)*(U.clipX??.5),k=S+me/K}if(pe&&ge&&ge<pe){const me=oe*i.height;_=(1-me/R)*(U.clipY??.5),I=_+me/R}}}let b=0;i.textureOptions!==null&&(i.textureOptions.flipX===!0&&([S,k]=[k,S]),b=+(i.textureOptions.flipY||!1)),b^+(v.type===on.renderToTexture)&&([_,I]=[I,_]);let C=v.ctxTexture;C===void 0&&(C=(A=this.stage.defaultTexture)==null?void 0:A.ctxTexture,console.warn("WebGL Renderer: Texture does not have a ctxTexture, using default texture instead"));const E=this.addTexture(C,x);if(nt(this.curRenderOp!==null),i.renderCoords)c[x++]=i.renderCoords.x1,c[x++]=i.renderCoords.y1,c[x++]=S,c[x++]=_,f[x++]=i.colorTl,c[x++]=E,c[x++]=i.renderCoords.x2,c[x++]=i.renderCoords.y2,c[x++]=k,c[x++]=_,f[x++]=i.colorTr,c[x++]=E,c[x++]=i.renderCoords.x4,c[x++]=i.renderCoords.y4,c[x++]=S,c[x++]=I,f[x++]=i.colorBl,c[x++]=E,c[x++]=i.renderCoords.x3,c[x++]=i.renderCoords.y3,c[x++]=k,c[x++]=I,f[x++]=i.colorBr,c[x++]=E;else if(i.tb!==0||i.tc!==0)c[x++]=i.tx,c[x++]=i.ty,c[x++]=S,c[x++]=_,f[x++]=i.colorTl,c[x++]=E,c[x++]=i.tx+i.width*i.ta,c[x++]=i.ty+i.width*i.tc,c[x++]=k,c[x++]=_,f[x++]=i.colorTr,c[x++]=E,c[x++]=i.tx+i.height*i.tb,c[x++]=i.ty+i.height*i.td,c[x++]=S,c[x++]=I,f[x++]=i.colorBl,c[x++]=E,c[x++]=i.tx+i.width*i.ta+i.height*i.tb,c[x++]=i.ty+i.width*i.tc+i.height*i.td,c[x++]=k,c[x++]=I,f[x++]=i.colorBr,c[x++]=E;else{const U=i.tx+i.width*i.ta,K=i.ty+i.height*i.td;c[x++]=i.tx,c[x++]=i.ty,c[x++]=S,c[x++]=_,f[x++]=i.colorTl,c[x++]=E,c[x++]=U,c[x++]=i.ty,c[x++]=k,c[x++]=_,f[x++]=i.colorTr,c[x++]=E,c[x++]=i.tx,c[x++]=K,c[x++]=S,c[x++]=I,f[x++]=i.colorBl,c[x++]=E,c[x++]=U,c[x++]=K,c[x++]=k,c[x++]=I,f[x++]=i.colorBr,c[x++]=E}this.curRenderOp.length+=M8,this.curRenderOp.numQuads++,this.curBufferIdx=x}newRenderOp(i,c,f,v,x,m,l,r,S){const _=new sb(this.glw,this.options,this.quadBufferCollection,i,c,f,x,v,m,0,l,r,S);this.curRenderOp=_,this.renderOps.push(_)}addTexture(i,c,f){const{curRenderOp:v}=this;nt(v);const x=v.addTexture(i);if(x===4294967295){if(f)throw new Error("Unable to add texture to render op");return this.newRenderOp(v.shader,v.shaderProps,v.alpha,v.dimensions,v.clippingRect,c),this.addTexture(i,c,!0)}return x}reuseRenderOp(i){var r;const{shader:c,shaderProps:f,parentHasRenderTexture:v,rtt:x,clippingRect:m}=i,l=c||this.defaultShader;return!(((r=this.curRenderOp)==null?void 0:r.shader)!==l||P_(this.curRenderOp.clippingRect,m)===!1||v!==void 0||x!==void 0||this.curRenderOp.shader!==this.defaultShader&&(f===null||this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,f)===!1))}addRenderOp(i){this.renderOps.push(i),this.curRenderOp=null}render(i="screen"){const{glw:c,quadBuffer:f}=this,v=new Float32Array(f,0,this.curBufferIdx),x=this.quadBufferCollection.getBuffer("a_position")||null;c.arrayBufferData(x,v,c.STATIC_DRAW);for(let l=0,r=this.renderOps.length;l<r;l++)this.renderOps[l].draw();this.quadBufferUsage=this.curBufferIdx*v.BYTES_PER_ELEMENT;const m=4*(6*v.BYTES_PER_ELEMENT);this.numQuadsRendered=this.quadBufferUsage/m}getQuadCount(){return this.numQuadsRendered}renderToTexture(i){for(let c=0;c<this.rttNodes.length;c++)if(this.rttNodes[c]===i)return;this.insertRTTNodeInOrder(i)}insertRTTNodeInOrder(i){let c=this.rttNodes.length,f=i;for(;f&&f.parent;){const x=this.rttNodes.indexOf(f.parent);if(x!==-1){c=x;break}f=f.parent}const v=this.findMaxChildRTTIndex(i);v!==-1&&(c=Math.max(c,v+1)),this.rttNodes.splice(c,0,i)}findMaxChildRTTIndex(i){let c=-1;const f=v=>{const x=this.rttNodes.indexOf(v);x!==-1&&(c=Math.max(c,x));for(const m of v.children)f(m)};return f(i),c}renderRTTNodes(){const{glw:i}=this,{txManager:c}=this.stage;for(let v=0;v<this.rttNodes.length;v++){const x=this.rttNodes[v];if(x===void 0||x.hasRTTupdates===!1||x.worldAlpha===0||x.strictBounds===!0&&x.renderState===Hn.OutOfBounds||x.texture===null||x.texture.state!=="loaded")continue;this.activeRttNode=x,nt(x.texture,"RTT node missing texture");const m=x.texture.ctxTexture;nt(m instanceof s3),this.renderToTextureActive=!0,i.bindFramebuffer(m.framebuffer),i.viewport(0,0,m.w,m.h),i.clearColor(0,0,0,0),i.clear();for(let l=0;l<x.children.length;l++){const r=x.children[l];r!==void 0&&(this.stage.addQuads(r),r.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,x.hasRTTupdates=!1}const f=this.clearColor.normalized;i.clearColor(f[0],f[1],f[2],f[3]),i.bindFramebuffer(null),i.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(i){const c=this.rttNodes.indexOf(i);c!==-1&&this.rttNodes.splice(c,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}updateClearColor(i){if(this.clearColor.raw===i)return;const c=this.glw,f=qa(i);c.clearColor(f[0],f[1],f[2],f[3]),this.clearColor={raw:i,normalized:f},c.clear()}}const R8={LINE_FEED:10};class _8{}class L8 extends _8{constructor(i,c){super();j(this,"data");j(this,"glyphMap");j(this,"kernings");this.data=i,this.glyphMap=c;const f=this.kernings={};i.kernings.forEach(v=>{const x=v.second,m=f[x]=f[x]||{};m[v.first]=v.amount}),this.kernings=f}*shapeText(i,c){var x;let f,v;for(;(f=c.peek())&&!f.done;){const m=f.value,l=this.glyphMap.get(m);if(c.next(),l!==void 0){const r=v!==void 0?(((x=this.kernings[l.id])==null?void 0:x[v])||0)+i.letterSpacing:0;v=l.id,yield{mapped:!0,glyphId:l.id,codepoint:m,cluster:c.lastIndex,xAdvance:l.xadvance+r,yAdvance:0,xOffset:l.xoffset+r,yOffset:l.yoffset,xBearing:0,yBearing:0,width:l.width,height:l.height}}else m===R8.LINE_FEED&&(v=void 0),yield{mapped:!1,codepoint:m,cluster:c.lastIndex}}}}class dy extends ob{constructor(i,c){super(c);j(this,"type");j(this,"texture");j(this,"maxCharHeight",0);j(this,"shaper");j(this,"glyphMap",new Map);j(this,"data");const{atlasUrl:f,atlasDataUrl:v,stage:x}=c;this.type=i;const m=x.renderer;nt(m instanceof Iy,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=x.txManager.createTexture("ImageTexture",{src:f,premultiplyAlpha:!1}),x.txManager.loadTexture(this.texture,!0),this.texture.preventCleanup=!0,this.texture.on("loaded",()=>{this.checkLoaded(),x.requestRender()}),J3(v).then(l=>{var S;this.data=JSON.parse(l),nt(this.data);let r=0;if(this.data.chars.forEach(_=>{this.glyphMap.set(_.id,_);const k=_.yoffset+_.height;k>r&&(r=k)}),this.maxCharHeight=r,this.shaper=new L8(this.data,this.glyphMap),!this.metrics)if((S=this.data)!=null&&S.lightningMetrics){const{ascender:_,descender:k,lineGap:I,unitsPerEm:b}=this.data.lightningMetrics;this.metrics={ascender:_/b,descender:k/b,lineGap:I/b}}else throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);this.checkLoaded()}).catch(console.error)}getAtlasEntry(i){const c=this.glyphMap.get(i);if(c===void 0)throw new Error(`Glyph ${i} not found in font ${this.fontFamily}`);return{x:c.x,y:c.y,width:c.width,height:c.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}const P8=24;function D8(h,s,i,c,f,v,x,m,l){const r=Math.min(Math.max(x.firstLineIdx,0),m.length),S=0,{metrics:_}=i;nt(_,"Font metrics not loaded"),nt(i.data,"Font data not loaded");const k=(_.ascender-_.descender)*h;let I=0;c==="middle"?I=(s-k)/2:c==="bottom"&&(I=s-k);const b=f/v,C=i.data.common.base,A=_.ascender*h-C,U=b+A+r*s+I;if(!(l&&U>=l/v))return{sdfX:S,sdfY:U,lineIndex:r}}class Oa{constructor(s,i=0){j(this,"iterator");j(this,"peekBuffer",[]);j(this,"_lastIndex");this.iterator=s,this.iterator=s,this._lastIndex=i-1,this.peekBuffer=[]}next(){const s=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return s.done?this._lastIndex=-1:this._lastIndex++,s}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const s=this.iterator.next();return this.peekBuffer.push(s),s}get lastIndex(){return this._lastIndex}}function*Na(h,s=0){let i=s;for(;i<h.length;){const c=h.codePointAt(i);if(c===void 0)throw new Error("Invalid Unicode code point");yield c,i+=c<=65535?1:2}}function O8(h,s,i){const c=i.shapeText(s,new Oa(Na(h,0),0));let f=0;for(const v of c)v.mapped&&v.codepoint!==8203&&(f+=v.xAdvance);return f}function N8(h,s,i,c,f,v,x,m,l,r,S,_,k,I,b,C,E,A,U){nt(b,"Font face must be loaded"),nt(b.loaded,"Font face must be loaded"),nt(b.data,"Font face must be loaded"),nt(b.shaper,"Font face must be loaded");const K=m/b.data.info.size,R=l/K,le=v/K,ge=r/K,pe=k[h],oe=(pe==null?void 0:pe.codepointIndex)||0,me=(pe==null?void 0:pe.maxX)||0,D=(pe==null?void 0:pe.maxY)||0;let te=me,ce=D,ve=s,X=i,ie=0;const W={codepointIndex:-1,bufferOffset:-1,xStart:-1},G=b.shaper,ue={letterSpacing:ge};c.endsWith(" ")&&(c+=" ");let Ce=G.shapeText(ue,new Oa(Na(c,oe),oe)),Fe,Ze=-1;const je=[],Ae=x/K,$=O8(A,ue,G);let ft=!0;for(;ft;){const De=(U===0||h+1<U)&&(_!=="both"||E||X+R+b.maxCharHeight<=Ae),qe=De?le:le-$;let an=0;const wi=X+b.maxCharHeight>=I.y1,tr=X<=I.y2,ui=wi&&tr;for(;(Fe=Ce.next())&&!Fe.done;){const be=Fe.value;if(h===k.length)k.push({codepointIndex:be.cluster,maxY:ce,maxX:te});else if(h>k.length)throw new Error("Unexpected lineCache length");if(be.codepoint===32||be.codepoint===10||be.codepoint===8203?W.codepointIndex!==-1&&(W.codepointIndex=-1,an=ve):W.codepointIndex===-1&&(W.codepointIndex=be.cluster,W.bufferOffset=ie,W.xStart=an),be.mapped){const Gi=ve+be.xOffset+be.width;if(_!=="none"&&Gi>=qe&&W.codepointIndex!==-1&&W.xStart>0)if(De){Ce=G.shapeText(ue,new Oa(Na(c,W.codepointIndex),W.codepointIndex)),ie=W.bufferOffset;break}else Ce=G.shapeText(ue,new Oa(Na(A,0),0)),ve=W.xStart,ie=W.bufferOffset,_="none";else{const Si=ve+be.xOffset,li=X+be.yOffset;if(ui){Ze===-1&&(Ze=ie);const ar=b.getAtlasEntry(be.glyphId),Rn=ar.x/b.data.common.scaleW,st=ar.y/b.data.common.scaleH,ai=ar.width/b.data.common.scaleW,Yr=ar.height/b.data.common.scaleH;S[ie++]=Si,S[ie++]=li,S[ie++]=Rn,S[ie++]=st,S[ie++]=Si+be.width,S[ie++]=li,S[ie++]=Rn+ai,S[ie++]=st,S[ie++]=Si,S[ie++]=li+be.height,S[ie++]=Rn,S[ie++]=st+Yr,S[ie++]=Si+be.width,S[ie++]=li+be.height,S[ie++]=Rn+ai,S[ie++]=st+Yr}ce=Math.max(ce,li+be.height),te=Math.max(te,Si+be.width),ve+=be.xAdvance}}else if(be.codepoint===10){if(De)break;Ce=G.shapeText(ue,new Oa(Na(A,0),0)),_="none"}}Ze!==-1&&(je.push({bufferStart:Ze,bufferEnd:ie}),Ze=-1),ve=0,X+=R,h++,W.codepointIndex=-1,an=0,!C&&_==="both"&&X>I.y2||Fe&&Fe.done?ft=!1:De||(ft=!1)}if(f==="center"){const De=_==="none"?te:le;for(let qe=0;qe<je.length;qe++){const an=je[qe],wi=S[an.bufferEnd-4]-S[an.bufferStart],tr=(De-wi)/2;for(let ui=an.bufferStart;ui<an.bufferEnd;ui+=4)S[ui]+=tr}}else if(f==="right"){const De=_==="none"?te:le;for(let qe=0;qe<je.length;qe++){const an=je[qe],wi=an.bufferEnd===an.bufferStart?0:S[an.bufferEnd-4]-S[an.bufferStart],tr=De-wi;for(let ui=an.bufferStart;ui<an.bufferEnd;ui+=4)S[ui]+=tr}}return nt(Fe),{bufferNumFloats:ie,bufferNumQuads:ie/16,layoutNumCharacters:Fe.done?c.length-oe:Fe.value.cluster-oe+1,fullyProcessed:!!Fe.done,maxX:te,maxY:ce,numLines:k.length}}function U8(h,s){return Math.ceil(h/s)*s}function B8(h,s){return Math.floor(h/s)*s}function F8(h,s,i,c,f,v,x,m){const{screen:l,sdf:r}=h;if(!N_(x))l.x1=0,l.y1=0,l.x2=0,l.y2=0,r.x1=0,r.y1=0,r.x2=0,r.y2=0,h.numLines=0,h.firstLineIdx=0;else{const S=x.x1-s,_=S+(x.x2-x.x1),k=x.y1-i+c,I=B8(k-v,f||1),b=U8(k+(x.y2-x.y1)+v,f||1);l.x1=S,l.y1=I,l.x2=_,l.y2=b,r.x1=S/m,r.y1=I/m,r.x2=_/m,r.y2=b/m,h.numLines=Math.ceil((b-I)/f),h.firstLineIdx=f?Math.floor(I/f):0}h.valid=!0}function lb(h,s){return s*(h.ascender-h.descender+h.lineGap)}const j8={x:0,y:0,width:0,height:0};class $8 extends Ay{constructor(i){super(i);j(this,"ssdfFontFamilies",{});j(this,"msdfFontFamilies",{});j(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);j(this,"sdfShader");j(this,"rendererBounds");j(this,"type","sdf");this.sdfShader=this.stage.shManager.loadShader("SdfShader",{transform:new Float32Array,color:0,size:0,scrollY:0,distanceRange:0,debug:!1}).shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(i,c)=>{i.props.fontFamily=c,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontWeight:(i,c)=>{i.props.fontWeight=c,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStyle:(i,c)=>{i.props.fontStyle=c,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStretch:(i,c)=>{i.props.fontStretch=c,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontSize:(i,c)=>{i.props.fontSize=c,this.invalidateLayoutCache(i)},text:(i,c)=>{i.props.text=c,this.invalidateLayoutCache(i)},textAlign:(i,c)=>{i.props.textAlign=c,this.invalidateLayoutCache(i)},color:(i,c)=>{i.props.color=c},x:(i,c)=>{i.props.x=c,i.elementBounds.valid&&(this.setElementBoundsX(i),!i.renderWindow.valid&&Nm(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},y:(i,c)=>{i.props.y=c,i.elementBounds.valid&&(this.setElementBoundsY(i),!i.renderWindow.valid&&Nm(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},contain:(i,c)=>{i.props.contain=c,this.invalidateLayoutCache(i)},width:(i,c)=>{i.props.width=c,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,c)=>{i.props.height=c,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,c)=>{i.props.offsetY=c,this.invalidateLayoutCache(i)},scrollable:(i,c)=>{i.props.scrollable=c,this.invalidateLayoutCache(i)},scrollY:(i,c)=>{i.props.scrollY=c,this.scheduleUpdateState(i)},letterSpacing:(i,c)=>{i.props.letterSpacing=c,this.invalidateLayoutCache(i)},lineHeight:(i,c)=>{i.props.lineHeight=c,i.resLineHeight=void 0,this.invalidateLayoutCache(i)},maxLines:(i,c)=>{i.props.maxLines=c,this.invalidateLayoutCache(i)},textBaseline:(i,c)=>{i.props.textBaseline=c,this.invalidateLayoutCache(i)},verticalAlign:(i,c)=>{i.props.verticalAlign=c,this.invalidateLayoutCache(i)},overflowSuffix:(i,c)=>{i.props.overflowSuffix=c,this.invalidateLayoutCache(i)},debug:(i,c)=>{i.props.debug=c}}}canRenderFont(i){const{fontFamily:c}=i;return c in this.ssdfFontFamilies||c in this.msdfFontFamilies||c==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(i){return i instanceof dy}addFontFace(i){nt(i instanceof dy);const c=i.fontFamily,f=i.type==="ssdf"?this.ssdfFontFamilies:i.type==="msdf"?this.msdfFontFamilies:void 0;if(!f){console.warn(`Invalid font face type: ${i.type}`);return}let v=f[c];v||(v=new Set,f[c]=v),v.add(i)}createState(i){return{props:i,status:"initialState",updateScheduled:!1,emitter:new Kr,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(i){let{trFontFace:c}=i;const{textH:f,lineCache:v,debugData:x,forceFullLayoutCalc:m}=i;if(x.updateCount++,i.status==="initialState"&&this.setStatus(i,"loading"),c===void 0){if(c=this.resolveFontFace(i.props),i.trFontFace=c,c===void 0){const G=`SdfTextRenderer: Could not resolve font face for family: '${i.props.fontFamily}'`;console.error(G),this.setStatus(i,"failed",new Error(G));return}c.texture.setRenderableOwner(i,!0)}if(c.loaded===!1){c.once("loaded",()=>{this.scheduleUpdateState(i)});return}nt(c.data,"Font face data should be loaded"),nt(c.metrics,"Font face metrics should be loaded");const{text:l,fontSize:r,x:S,y:_,contain:k,width:I,height:b,verticalAlign:C,scrollable:E,overflowSuffix:A,maxLines:U}=i.props,K=k==="both"&&E?i.props.scrollY:0,{renderWindow:R}=i,le=c.data.info.size,ge=r/le;let pe=i.resLineHeight;if(pe===void 0){const G=i.props.lineHeight;G===void 0?pe=lb(c.metrics,r):pe=G,i.resLineHeight=pe}const oe=pe/ge;i.distanceRange=ge*c.data.distanceField.distanceRange;const me=l.length*P8;let D=i.vertexBuffer;(!D||D.length<me)&&(D=new Float32Array(me*2));const te=i.elementBounds;if(te.valid||(this.setElementBoundsX(i),this.setElementBoundsY(i),te.valid=!0),!m&&R.valid){const G=R.screen;if(S+G.x1<=te.x1&&S+G.x2>=te.x2&&_-K+G.y1<=te.y1&&_-K+G.y2>=te.y2){this.setStatus(i,"loaded");return}R.valid=!1,this.setStatus(i,"loading")}const{offsetY:ce,textAlign:ve}=i.props;if(!R.valid){if(!Nm(te,this.rendererBounds))return;F8(R,S,_,K,pe,k==="both"?te.y2-te.y1:0,te,ge)}const X=D8(le,oe,c,C,ce,ge,R,v,f);if(!X){this.setStatus(i,"loaded");return}const{letterSpacing:ie}=i.props,W=N8(X.lineIndex,X.sdfX,X.sdfY,l,ve,I,b,r,pe,ie,D,k,v,R.sdf,c,m,E,A,U);i.bufferUploaded=!1,i.bufferNumFloats=W.bufferNumFloats,i.bufferNumQuads=W.bufferNumQuads,i.vertexBuffer=D,i.renderWindow=R,x.lastLayoutNumCharacters=W.layoutNumCharacters,x.bufferSize=D.byteLength,W.fullyProcessed&&(i.textW=W.maxX*ge,i.textH=W.numLines*oe*ge),this.setStatus(i,"loaded")}renderQuads(i,c,f,v,x,m){var te,ce;if(!i.vertexBuffer)return;const l=this.stage.renderer;nt(l instanceof Iy);const{fontSize:r,color:S,contain:_,scrollable:k,zIndex:I,debug:b}=i.props,C=_==="both"&&k?i.props.scrollY:0,{textW:E=0,textH:A=0,distanceRange:U,vertexBuffer:K,bufferUploaded:R,trFontFace:le,elementBounds:ge}=i;let{webGlBuffers:pe}=i;if(!pe){const ve=l.glw,X=4*Float32Array.BYTES_PER_ELEMENT,ie=ve.createBuffer();nt(ie),i.webGlBuffers=new ub([{buffer:ie,attributes:{a_position:{name:"a_position",size:2,type:ve.FLOAT,normalized:!1,stride:X,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:ve.FLOAT,normalized:!1,stride:X,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),i.bufferUploaded=!1,nt(i.webGlBuffers),pe=i.webGlBuffers}if(!R){const ve=l.glw,X=(pe==null?void 0:pe.getBuffer("a_textureCoordinate"))??null;ve.arrayBufferData(X,K,ve.STATIC_DRAW),i.bufferUploaded=!0}if(nt(le),k&&_==="both"){nt(ge.valid);const ve=L_(ge,j8);f.valid?(i.clippingRect.valid=!0,f=K3(f,ve,i.clippingRect)):(i.clippingRect.valid=!0,f=Y3(ve,i.clippingRect))}const oe=new sb(l.glw,l.options,pe,this.sdfShader,{transform:c.getFloatArr(),color:E_(S,v),size:r/(((te=le.data)==null?void 0:te.info.size)||0),scrollY:C,distanceRange:U,debug:b.sdfShaderDebug},v,f,{height:A,width:E},0,I,!1,x,m),me=(ce=i.trFontFace)==null?void 0:ce.texture;nt(me);const D=me.ctxTexture;oe.addTexture(D),oe.length=i.bufferNumFloats,oe.numQuads=i.bufferNumQuads,l.addRenderOp(oe)}setIsRenderable(i,c){var f;super.setIsRenderable(i,c),(f=i.trFontFace)==null||f.texture.setRenderableOwner(i,c)}destroyState(i){var c;super.destroyState(i),(c=i.trFontFace)==null||c.texture.setRenderableOwner(i,!1)}resolveFontFace(i){return this.stage.fontManager.resolveFontFace(this.fontFamilyArray,i,"sdf")}releaseFontFace(i){i.resLineHeight=void 0,i.trFontFace&&(i.trFontFace.texture.setRenderableOwner(i,!1),i.trFontFace=void 0)}invalidateLayoutCache(i){i.renderWindow.valid=!1,i.elementBounds.valid=!1,i.textH=void 0,i.textW=void 0,i.lineCache=[],this.setStatus(i,"loading"),this.scheduleUpdateState(i)}setElementBoundsX(i){const{x:c,contain:f,width:v}=i.props,{elementBounds:x}=i;x.x1=c,x.x2=f!=="none"?c+v:1/0}setElementBoundsY(i){const{y:c,contain:f,height:v}=i.props,{elementBounds:x}=i;x.y1=c,x.y2=f==="both"?c+v:1/0}}function u3(h){return h===""||h==="​"}function z8(h,s,i){if(s.metrics)return s.metrics;const c=h.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${s.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let f;return c.actualBoundingBoxDescent&&c.actualBoundingBoxAscent?f={ascender:c.actualBoundingBoxAscent/i,descender:-c.actualBoundingBoxDescent/i,lineGap:.2}:f={ascender:.8,descender:-.2,lineGap:.2},s.metrics=f,f}const l3=2048;function a3(h,s,i,c,f){const v=h!=="bottom"?.5*s:0;return i*(c-1)+v+Math.max(i,s)+(f||0)}class V8{constructor(s,i){j(this,"_canvas");j(this,"_context");j(this,"_settings");this._canvas=s,this._context=i,this._settings=this.mergeDefaults({})}set settings(s){this._settings=this.mergeDefaults(s)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const s=[this._settings.fontFamily],i=[];for(let c=0,f=s.length;c<f;c++)s[c]==="serif"||s[c]==="sans-serif"?i.push(s[c]):i.push(`"${s[c]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${i.join(",")}`}_load(){if(document.fonts){const s=this._getFontSetting();try{if(!document.fonts.check(s,this._settings.text))return document.fonts.load(s,this._settings.text).catch(i=>{console.warn("[Lightning] Font load error",i,s)}).then(()=>{document.fonts.check(s,this._settings.text)||console.warn("[Lightning] Font not found",s)})}catch{console.warn("[Lightning] Can't check font loading for "+s)}}}calculateRenderInfo(){const s={},i=this.getPrecision(),c=this._settings.paddingLeft*i,f=this._settings.paddingRight*i,v=this._settings.fontSize*i;let x=this._settings.offsetY===null?null:this._settings.offsetY*i;const m=this._settings.w*i,l=this._settings.h*i;let r=this._settings.wordWrapWidth*i;const S=this._settings.cutSx*i,_=this._settings.cutEx*i,k=this._settings.cutSy*i,I=this._settings.cutEy*i,b=(this._settings.letterSpacing||0)*i,C=this._settings.textIndent*i,E=this._settings.trFontFace;this.setFontProperties(),nt(E);const A=z8(this._context,E,v),U=lb(A,v)*i,K=this._settings.lineHeight!==null?this._settings.lineHeight*i:U,R=this._settings.maxHeight,le=R!==null&&K>0?Math.floor(R/K):0,ge=this._settings.maxLines,pe=le>0&&ge>0?Math.min(le,ge):Math.max(le,ge);let oe=m||2048/this.getPrecision(),me=oe-c;if(me<10&&(oe+=10-me,me=10),r||(r=me),this._settings.textOverflow&&!this._settings.wordWrap){let ie;switch(this._settings.textOverflow){case"clip":ie="";break;case"ellipsis":ie=this._settings.overflowSuffix;break;default:ie=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,r-C,ie)}let D;if(this._settings.wordWrap)D=this.wrapText(this._settings.text,r,b,C);else{D={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const ie=D.l.length;for(let W=0;W<ie-1;W++)D.n.push(W)}let te=D.l;if(pe&&te.length>pe){const ie=te.slice(0,pe);let W=null;if(this._settings.overflowSuffix){const Ze=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,je=this.wrapText(ie[ie.length-1],r-Ze,b,C);ie[ie.length-1]=`${je.l[0]}${this._settings.overflowSuffix}`,W=[je.l.length>1?je.l[1]:""]}else W=[""];let G;const ue=te.length;let Ce=0;const Fe=D.n.length;for(G=pe;G<ue;G++)W[Ce]+=`${W[Ce]?" ":""}${te[G]}`,G+1<Fe&&D.n[G+1]&&Ce++;s.remainingText=W.join(`
`),s.moreTextLines=!0,te=ie}else s.moreTextLines=!1,s.remainingText="";let ce=0;const ve=[];for(let ie=0;ie<te.length;ie++){const W=this.measureText(te[ie],b)+(ie===0?C:0);ve.push(W),ce=Math.max(ce,W)}s.lineWidths=ve,m||(oe=ce+c+f,me=ce),this._settings.wordWrap&&m>ce&&this._settings.textAlign==="left"&&te.length===1&&(oe=ce+c+f);let X;return l?X=l:X=a3(this._settings.textBaseline,v,K,te.length,x),x===null&&(x=v),s.w=oe,s.h=X,s.lines=te,s.precision=i,oe||(oe=1),X||(X=1),(S||_)&&(oe=Math.min(oe,_-S)),(k||I)&&(X=Math.min(X,I-k)),s.width=oe,s.innerWidth=me,s.height=X,s.fontSize=v,s.cutSx=S,s.cutSy=k,s.cutEx=_,s.cutEy=I,s.lineHeight=K,s.defLineHeight=U,s.lineWidths=ve,s.offsetY=x,s.paddingLeft=c,s.paddingRight=f,s.letterSpacing=b,s.textIndent=C,s.metrics=A,s}draw(s,i){const c=this.getPrecision(),f=(i==null?void 0:i.lines)||s.lines,v=(i==null?void 0:i.lineWidths)||s.lineWidths,x=i?a3(this._settings.textBaseline,s.fontSize,s.lineHeight,i.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*c):s.height;this._canvas.width=Math.min(Math.ceil(s.width+this._settings.textRenderIssueMargin),l3),this._canvas.height=Math.min(Math.ceil(x),l3),this.setFontProperties(),s.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(s.cutSx||s.cutSy)&&this._context.translate(-s.cutSx,-s.cutSy);let m,l;const r=[],{metrics:S}=s,_=S?S.ascender*s.fontSize:s.fontSize,k=(S.ascender-S.descender)*s.fontSize;for(let b=0,C=f.length;b<C;b++)m=b===0?s.textIndent:0,l=b*s.lineHeight+_,this._settings.verticalAlign=="middle"?l+=(s.lineHeight-k)/2:this._settings.verticalAlign=="bottom"&&(l+=s.lineHeight-k),this._settings.textAlign==="right"?m+=s.innerWidth-v[b]:this._settings.textAlign==="center"&&(m+=(s.innerWidth-v[b])/2),m+=s.paddingLeft,r.push({text:f[b],x:m,y:l,w:v[b]});if(this._settings.highlight){const b=this._settings.highlightColor,C=this._settings.highlightHeight*c||s.fontSize*1.5,E=this._settings.highlightOffset*c,A=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*c:s.paddingLeft,U=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*c:s.paddingRight;this._context.fillStyle=Om(b);for(let K=0;K<r.length;K++){const R=r[K];this._context.fillRect(R.x-A,R.y-s.offsetY+E,R.w+U+A,C)}}let I=null;this._settings.shadow&&(I=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Om(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*c,this._context.shadowOffsetY=this._settings.shadowOffsetY*c,this._context.shadowBlur=this._settings.shadowBlur*c),this._context.fillStyle=Om(this._settings.textColor);for(let b=0,C=r.length;b<C;b++){const E=r[b];if(s.letterSpacing===0)this._context.fillText(E.text,E.x,E.y);else{const A=E.text.split("");let U=E.x;for(let K=0,R=A.length;K<R;K++)this._context.fillText(A[K],U,E.y),U+=this.measureText(A[K],s.letterSpacing)}}I&&(this._context.shadowColor=I[0],this._context.shadowOffsetX=I[1],this._context.shadowOffsetY=I[2],this._context.shadowBlur=I[3]),(s.cutSx||s.cutSy)&&this._context.translate(s.cutSx,s.cutSy)}wrapWord(s,i,c){const f=this._context.measureText(c).width,v=s.length,x=this._context.measureText(s).width;if(x<=i)return s;let m=Math.floor(i*v/x),l=this._context.measureText(s.substring(0,m)).width+f;if(l>i)for(;m>0&&(l=this._context.measureText(s.substring(0,m)).width+f,l>i);)m-=1;else for(;m<v;)if(l=this._context.measureText(s.substring(0,m)).width+f,l<i)m+=1;else{m-=1;break}return s.substring(0,m)+(i>=f?c:"")}wrapText(s,i,c,f=0){const v=/ |\u200B/g,x=s.split(/\r?\n/g);let m=[];const l=[];for(let r=0;r<x.length;r++){const S=[];let _="",k=i-f;const I=x[r].split(v),b=x[r].match(v)||[];for(let C=0;C<I.length;C++){const E=b[C-1]||"",A=I[C],U=this.measureText(A,c),K=u3(E)?U:U+this.measureText(E,c);C===0||K>k?(C>0&&(S.push(_),_=""),_+=A,k=i-U-(C===0?f:0)):(k-=K,_+=E+A)}S.push(_),_="",m=m.concat(S),r<x.length-1&&l.push(m.length)}return{l:m,n:l}}measureText(s,i=0){return i?s.split("").reduce((c,f)=>u3(f)?c:c+this._context.measureText(f).width+i,0):this._context.measureText(s).width}mergeDefaults(s){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...s}}}const f3=typeof self>"u"?globalThis:self;var j3;const c3=((j3=f3.document)==null?void 0:j3.fonts)||f3.fonts;function H8(h){const{fontFamily:s,fontStyle:i,fontWeight:c,fontStretch:f,fontSize:v}=h;return[i,c,f,`${v}px`,s].join(" ")}class d3 extends Ay{constructor(i){super(i);j(this,"canvas");j(this,"context");j(this,"fontFamilies",{});j(this,"fontFamilyArray",[this.fontFamilies]);j(this,"type","canvas");j(this,"loadFont",i=>{const c=H8(i.props),f=this.stage.fontManager.resolveFontFace(this.fontFamilyArray,i.props,"canvas");if(nt(f,`Could not resolve font face for ${c}`),i.fontInfo={fontFace:f,cssString:c,loaded:!1},!i.fontInfo.loaded){c3.load(c).then(this.onFontLoaded.bind(this,i,c)).catch(this.onFontLoadError.bind(this,i,c));return}});typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let c=this.canvas.getContext("2d",{willReadFrequently:!0});c||(this.canvas=document.createElement("canvas"),c=this.canvas.getContext("2d",{willReadFrequently:!0})),nt(c),this.context=c,this.addFontFace(new ch({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(i,c)=>{i.props.fontFamily=c,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontWeight:(i,c)=>{i.props.fontWeight=c,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStyle:(i,c)=>{i.props.fontStyle=c,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStretch:(i,c)=>{i.props.fontStretch=c,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontSize:(i,c)=>{i.props.fontSize=c,i.fontInfo=void 0,this.invalidateLayoutCache(i)},text:(i,c)=>{i.props.text=c,this.invalidateLayoutCache(i)},textAlign:(i,c)=>{i.props.textAlign=c,this.invalidateLayoutCache(i)},color:(i,c)=>{i.props.color=c,this.invalidateLayoutCache(i)},x:(i,c)=>{i.props.x=c},y:(i,c)=>{i.props.y=c},contain:(i,c)=>{i.props.contain=c,this.invalidateLayoutCache(i)},width:(i,c)=>{i.props.width=c,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,c)=>{i.props.height=c,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,c)=>{i.props.offsetY=c,this.invalidateLayoutCache(i)},scrollY:(i,c)=>{i.props.scrollY=c},letterSpacing:(i,c)=>{i.props.letterSpacing=c,this.invalidateLayoutCache(i)},lineHeight:(i,c)=>{i.props.lineHeight=c,this.invalidateLayoutCache(i)},maxLines:(i,c)=>{i.props.maxLines=c,this.invalidateLayoutCache(i)},textBaseline:(i,c)=>{i.props.textBaseline=c,this.invalidateLayoutCache(i)},verticalAlign:(i,c)=>{i.props.verticalAlign=c,this.invalidateLayoutCache(i)},overflowSuffix:(i,c)=>{i.props.overflowSuffix=c,this.invalidateLayoutCache(i)}}}canRenderFont(i){return!0}isFontFaceSupported(i){return i instanceof ch}addFontFace(i){nt(i instanceof ch);const c=i.fontFamily;c!=="sans-serif"&&c3.add(i.fontFace);let f=this.fontFamilies[c];f||(f=new Set,this.fontFamilies[c]=f),f.add(i)}createState(i,c){return{node:c,props:i,status:"initialState",updateScheduled:!1,emitter:new Kr,textureNode:void 0,lightning2TextRenderer:new V8(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(i){if(i.status==="initialState"&&this.setStatus(i,"loading"),i.status!=="loaded"){if(!i.fontInfo)return this.loadFont(i);i.fontInfo.loaded&&(i.renderInfo||(i.renderInfo=this.calculateRenderInfo(i),i.textH=i.renderInfo.lineHeight*i.renderInfo.lines.length,i.textW=i.renderInfo.width,this.renderSingleCanvasPage(i)))}}renderSingleCanvasPage(i){nt(i.renderInfo);const c=i.node,f=this.stage.txManager.createTexture("ImageTexture",{premultiplyAlpha:!0,src:(function(v,x){return nt(x),v.draw(x,{lines:x.lines,lineWidths:x.lineWidths}),this.canvas.width===0||this.canvas.height===0?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}).bind(this,i.lightning2TextRenderer,i.renderInfo)});if(i.textureNode)i.textureNode.texture=f,i.textureNode.alpha=e3(i.props.color);else{const v=this.stage.createNode({parent:c,texture:f,autosize:!0,alpha:e3(i.props.color)});i.textureNode=v}this.setStatus(i,"loaded")}calculateRenderInfo(i){var c;return i.lightning2TextRenderer.settings={text:i.props.text,textAlign:i.props.textAlign,fontFamily:i.props.fontFamily,trFontFace:(c=i.fontInfo)==null?void 0:c.fontFace,fontSize:i.props.fontSize,fontStyle:[i.props.fontStretch,i.props.fontStyle,i.props.fontWeight].join(" "),textColor:qa(i.props.color),offsetY:i.props.offsetY,wordWrap:i.props.contain!=="none",wordWrapWidth:i.props.contain==="none"?void 0:i.props.width,letterSpacing:i.props.letterSpacing,lineHeight:i.props.lineHeight??null,maxLines:i.props.maxLines,maxHeight:i.props.contain==="both"?i.props.height-i.props.offsetY:null,textBaseline:i.props.textBaseline,verticalAlign:i.props.verticalAlign,overflowSuffix:i.props.overflowSuffix,w:i.props.contain!=="none"?i.props.width:void 0},i.renderInfo=i.lightning2TextRenderer.calculateRenderInfo(),i.renderInfo}renderQuads(){}destroyState(i){i.status!=="destroyed"&&(super.destroyState(i),i.textureNode&&(i.textureNode.destroy(),delete i.textureNode),delete i.renderInfo)}invalidateLayoutCache(i){i.renderInfo=void 0,this.setStatus(i,"loading"),this.scheduleUpdateState(i)}onFontLoaded(i,c){var f;c!==((f=i.fontInfo)==null?void 0:f.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,this.scheduleUpdateState(i))}onFontLoadError(i,c,f){var v;c!==((v=i.fontInfo)==null?void 0:v.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${i.fontInfo.cssString}'`,f),this.scheduleUpdateState(i))}}const ab={isWhite:!0,a:1,r:255,g:255,b:255};function $m(h){if(h===4294967295)return ab;const s=(h>>>24&255)/255,i=h>>>16&255&255,c=h>>>8&255&255,f=h&255&255;return{isWhite:!1,a:s,r:f,g:c,b:i}}function fb(h){if(h===4294967295)return ab;const s=h>>>24&255,i=h>>>16&255&255,c=h>>>8&255&255,f=(h&255&255)/255;return{isWhite:!1,r:s,g:i,b:c,a:f}}function Hu({a:h,r:s,g:i,b:c}){return`rgba(${s},${i},${c},${h})`}class G8 extends ib{constructor(){super(...arguments);j(this,"image");j(this,"tintCache")}async load(){this.textureSource.setState("loading");try{const i=await this.onLoadRequest();this.textureSource.setState("loaded",i),this.textureSource.freeTextureData(),this.updateMemSize()}catch(i){throw this.textureSource.setState("failed",i),this.textureSource.freeTextureData(),i}}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0),this.textureSource.freeTextureData()}updateMemSize(){const i=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:c,height:f}=this.textureSource.dimensions;this.setTextureMemUse(c*f*i)}}hasImage(){return this.image!==void 0}getImage(i){var x;const c=this.image;if(nt(c,"Attempt to get unloaded image texture"),i.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),c;const f=Hu(i);if(((x=this.tintCache)==null?void 0:x.key)===f)return this.tintCache.image;const v=this.tintTexture(c,f);return this.tintCache={key:f,image:v},this.updateMemSize(),v}tintTexture(i,c){const{width:f,height:v}=i,x=document.createElement("canvas");x.width=f,x.height=v;const m=x.getContext("2d");return m&&(m.fillStyle=c,m.globalCompositeOperation="copy",m.fillRect(0,0,f,v),m.globalCompositeOperation="multiply",m.drawImage(i,0,0,f,v,0,0,f,v),m.globalCompositeOperation="destination-in",m.drawImage(i,0,0,f,v,0,0,f,v)),x}async onLoadRequest(){var c,f;nt((f=(c=this.textureSource)==null?void 0:c.textureData)==null?void 0:f.data,"Texture data is null");const{data:i}=this.textureSource.textureData;if(i instanceof ImageData){const v=document.createElement("canvas");v.width=i.width,v.height=i.height;const x=v.getContext("2d");return x&&x.putImageData(i,0,0),this.image=v,{width:i.width,height:i.height}}else if(typeof ImageBitmap<"u"&&i instanceof ImageBitmap||i instanceof HTMLImageElement)return this.image=i,{width:i.width,height:i.height};return{width:0,height:0}}}function X8(h){var s,i;if(h.shader instanceof Nh){const c=h.shader.shType;if(c===a8)return((s=h.shaderProps)==null?void 0:s.radius)??0;if(c==="DynamicShader"){const f=(i=h.shaderProps)==null?void 0:i.effects;if(f){const v=f.find(x=>{var m;return x.type==="radius"&&((m=x==null?void 0:x.props)==null?void 0:m.radius)});return v&&v.type==="radius"&&v.props.radius||0}}}return 0}function ka(h,s=""){var i;if(h.shader instanceof Nh&&h.shader.shType==="DynamicShader"){const f=(i=h.shaderProps)==null?void 0:i.effects;if(f&&f.length){const v=f.find(x=>x.type===`border${s}`&&x.props&&x.props.width);return v&&v.props}}}function h3(h,s,i,c,f){if(Object.getPrototypeOf(this).roundRect)this.roundRect(h,s,i,c,f);else{const x=l=>{const r=Math.min(i/2,c/2),S=l.topLeft+l.topRight+l.bottomRight+l.bottomLeft;if(S>i||S>c){const _=r/Math.max(l.topLeft,l.topRight,l.bottomRight,l.bottomLeft);l.topLeft*=_,l.topRight*=_,l.bottomRight*=_,l.bottomLeft*=_}},m=typeof f=="number"?{topLeft:f,topRight:f,bottomRight:f,bottomLeft:f}:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,...f};x(m),this.moveTo(h+m.topLeft,s),this.lineTo(h+i-m.topRight,s),this.ellipse(h+i-m.topRight,s+m.topRight,m.topRight,m.topRight,0,1.5*Math.PI,2*Math.PI),this.lineTo(h+i,s+c-m.bottomRight),this.ellipse(h+i-m.bottomRight,s+c-m.bottomRight,m.bottomRight,m.bottomRight,0,0,.5*Math.PI),this.lineTo(h+m.bottomLeft,s+c),this.ellipse(h+m.bottomLeft,s+c-m.bottomLeft,m.bottomLeft,m.bottomLeft,0,.5*Math.PI,Math.PI),this.lineTo(h,s+m.topLeft),this.ellipse(h+m.topLeft,s+m.topLeft,m.topLeft,m.topLeft,0,Math.PI,1.5*Math.PI)}}function Zd(h,s,i,c,f,v=0,x,m){if(!v)return;let l,r=0,S,_=0;switch(m){case"Top":l=s,r=i,S=c+s,_=i;break;case"Right":l=s+c,r=i,S=s+c,_=i+f;break;case"Bottom":l=s,r=i+f,S=s+c,_=i+f;break;case"Left":l=s,r=i,S=s,_=i+f;break}h.beginPath(),h.lineWidth=v,h.strokeStyle=Hu(fb(x??0)),h.moveTo(l,r),h.lineTo(S,_),h.stroke()}class W8 extends rb{constructor(i){super(i);j(this,"context");j(this,"canvas");j(this,"pixelRatio");j(this,"clearColor");j(this,"renderToTextureActive",!1);j(this,"activeRttNode",null);j(this,"defShaderCtr");this.mode="canvas",this.shManager.renderer=this;const{canvas:c,pixelRatio:f,clearColor:v}=i;this.canvas=c,this.context=c.getContext("2d"),this.pixelRatio=f,this.clearColor=v?ZC(v):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new Nh("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const i=this.context;if(this.clearColor){const[c,f,v,x]=this.clearColor;i.fillStyle=`rgba(${c}, ${f}, ${v}, ${x/255})`,i.fillRect(0,0,this.canvas.width,this.canvas.height)}i.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(i){const c=this.context,{tx:f,ty:v,width:x,height:m,alpha:l,colorTl:r,colorTr:S,colorBr:_,ta:k,tb:I,tc:b,td:C,clippingRect:E}=i;let A=i.texture,U,K;const R=A==null?void 0:A.type;if(nt(R,"Texture type is not defined"),R!==on.image&&R!==on.color&&R!==on.subTexture&&R!==on.noise||A&&(A instanceof Ka&&(K=A.props,A=A.parentTexture),U=A.ctxTexture,A.state==="freed"||A.state!=="loaded"))return;const le=$m(r),ge=k!==1,pe=E.width!==0&&E.height!==0,oe=r!==S||r!==_,me=!!i.shader,D=me?X8(i):0,te=me?ka(i):void 0;if((ge||pe||D)&&c.save(),pe){const ce=new Path2D,{x:ve,y:X,width:ie,height:W}=E;ce.rect(ve,X,ie,W),c.clip(ce)}if(ge){const ce=this.pixelRatio;c.setTransform(k,b,I,C,f*ce,v*ce),c.scale(ce,ce),c.translate(-f,-v)}if(D){const ce=new Path2D;h3.call(ce,f,v,x,m,D),c.clip(ce)}if((R===on.image||R===on.subTexture||R===on.noise)&&U){const ce=U.getImage(le);if(c.globalAlpha=le.a??l,K)c.drawImage(ce,K.x,K.y,K.width,K.height,f,v,x,m);else try{c.drawImage(ce,f,v,x,m)}catch{}c.globalAlpha=1}else if(R===on.color&&oe){let ce=f,ve=v,X;r===S?(ce=f,ve=v+m,X=$m(_)):(ce=f+x,ve=v,X=$m(S));const ie=c.createLinearGradient(f,v,ce,ve);ie.addColorStop(0,Hu(le)),ie.addColorStop(1,Hu(X)),c.fillStyle=ie,c.fillRect(f,v,x,m)}else R===on.color&&(c.fillStyle=Hu(le),c.fillRect(f,v,x,m));if(te&&te.width){const ce=te.width,ve=te.width/2,X=Hu(fb(te.color??0));c.beginPath(),c.lineWidth=ce,c.strokeStyle=X,c.globalAlpha=l,D?(h3.call(c,f+ve,v+ve,x-ce,m-ce,D),c.stroke()):c.strokeRect(f+ve,v+ve,x-ce,m-ce),c.globalAlpha=1}else if(me){const ce=ka(i,"Top"),ve=ka(i,"Right"),X=ka(i,"Bottom"),ie=ka(i,"Left");ce&&Zd(c,f,v,x,m,ce.width,ce.color,"Top"),ve&&Zd(c,f,v,x,m,ve.width,ve.color,"Right"),X&&Zd(c,f,v,x,m,X.width,X.color,"Bottom"),ie&&Zd(c,f,v,x,m,ie.width,ie.color,"Left")}(ge||pe||D)&&c.restore()}createCtxTexture(i){return new G8(this.txMemManager,i)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(i){}renderToTexture(i){}getBufferInfo(){return null}getQuadCount(){return null}updateClearColor(i){this.clearColor=i?ZC(i):void 0}}const Ua={alpha:h=>h===1?null:{prop:"opacity",value:`${h}`},x:h=>({prop:"left",value:`${h}px`}),y:h=>({prop:"top",value:`${h}px`}),width:h=>h===0?null:{prop:"width",value:`${h}px`},height:h=>h===0?null:{prop:"height",value:`${h}px`},fontSize:h=>h===0?null:{prop:"font-size",value:`${h}px`},lineHeight:h=>h===0?null:{prop:"line-height",value:`${h}px`},zIndex:()=>"z-index",fontFamily:()=>"font-family",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:h=>h===!1?null:{prop:"overflow",value:h?"hidden":"visible"},rotation:h=>h===0?null:{prop:"transform",value:`rotate(${h}rad)`},scale:h=>h===1?null:{prop:"transform",value:`scale(${h})`},scaleX:h=>h===1?null:{prop:"transform",value:`scaleX(${h})`},scaleY:h=>h===1?null:{prop:"transform",value:`scaleY(${h})`},color:h=>h===0?null:{prop:"color",value:cb(h)}},cb=h=>{const s=(h&255)/255,i=h>>8&255,c=h>>16&255;return`rgba(${h>>24&255},${c},${i},${s})`},hy={id:"test-id"},K8=new Set([...Object.keys(Ua),...Object.keys(hy),"src","parent","data"]);class Y8{constructor(s,i){j(this,"root",null);j(this,"canvas",null);j(this,"height",1080);j(this,"width",1920);j(this,"scaleX",1);j(this,"scaleY",1);if(qu())return;if(!i)throw new Error("settings is required");this.height=Math.ceil(i.appHeight??1080/(i.deviceLogicalPixelRatio??1)),this.width=Math.ceil(i.appWidth??1920/(i.deviceLogicalPixelRatio??1)),this.scaleX=i.deviceLogicalPixelRatio??1,this.scaleY=i.deviceLogicalPixelRatio??1,this.canvas=s,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(s,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(s),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const s=this.canvas.getBoundingClientRect(),i=document.documentElement.scrollTop+s.top,c=document.documentElement.scrollLeft+s.left;this.root.id="root",this.root.style.left=`${c}px`,this.root.style.top=`${i}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(s,i){const c=document.createElement("div");c.style.position="absolute",c.id=s.toString();for(const f in i)this.updateNodeProperty(c,f,i[f],i);return c}createNode(s){const i=this.createDiv(s.id,s.props);return i.node=s,s.div=i,s.on("inViewport",()=>i.setAttribute("state","inViewport")),s.on("inBounds",()=>i.setAttribute("state","inBounds")),s.on("outOfBounds",()=>i.setAttribute("state","outOfBounds")),this.createProxy(s,i)}createTextNode(s){const i=this.createDiv(s.id,s.props);return i.node=s,s.div=i,this.createProxy(s,i)}createProxy(s,i){K8.forEach(v=>{let x=Object.getOwnPropertyDescriptor(s,v);if(x===void 0){const m=Object.getPrototypeOf(s);x=Object.getOwnPropertyDescriptor(m,v)}x!==void 0&&Object.defineProperty(s,v,{get(){var m;return(m=x==null?void 0:x.get)==null?void 0:m.call(s)},set:m=>{var l;(l=x==null?void 0:x.set)==null||l.call(s,m),this.updateNodeProperty(i,v,m,s.props)},configurable:!0,enumerable:!0})});const c=s.destroy;Object.defineProperty(s,"destroy",{value:()=>{this.destroyNode(s.id),c.call(s)}});const f=s.animate;return Object.defineProperty(s,"animate",{value:(v,x)=>{const m=f.call(s,v,x),l=m.start.bind(m);return m.start=()=>(this.animateNode(i,v,x),l()),m}}),s}destroyNode(s){const i=document.getElementById(s.toString());i==null||i.remove()}updateNodeProperty(s,i,c,f){var v;if(!(this.root===null||c===void 0||c===null)){if(i==="parent"){const x=c.id;if(x===1){this.root.appendChild(s);return}const m=document.getElementById(x.toString());m==null||m.appendChild(s);return}if(i==="text"){s.innerHTML=String(c),s.style.visibility="hidden";return}if(i==="src"&&c){s.setAttribute("data-src",String(c));return}if(i==="rtt"&&c){s.setAttribute("data-rtt",String(c));return}if(Ua[i]){const x=(v=Ua[i])==null?void 0:v.call(Ua,c);if(x===null)return;if(typeof x=="string"){s.style.setProperty(x,String(c));return}if(typeof x=="object"){let m=x.value;if(i==="x"){const l=f.mountX,r=f.width;l&&(m=`${parseInt(m)-r*l}px`)}else if(i==="y"){const l=f.mountY,r=f.height;l&&(m=`${parseInt(m)-r*l}px`)}s.style.setProperty(x.prop,m)}return}if(hy[i]){const x=hy[i];if(!x)return;s.setAttribute(String(x),String(c));return}if(i==="data"){for(const x in c){const m=c[x];m===void 0?s.removeAttribute(`data-${x}`):s.setAttribute(`data-${x}`,String(m))}return}}}animateNode(s,i,c){const{duration:f=1e3,delay:v=0}=c,{x,y:m,width:l,height:r,alpha:S=1,rotation:_=0,scale:k=1,color:I,mountX:b,mountY:C}=i;function E(){setTimeout(()=>{s.style.top=`${m-r*C}px`,s.style.left=`${x-l*b}px`,s.style.width=`${l}px`,s.style.height=`${r}px`,s.style.opacity=`${S}`,s.style.rotate=`${_}rad`,s.style.scale=`${k}`,s.style.color=cb(I)},f)}setTimeout(E,v)}}const db=50,p3={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},q8={low:.66666667,medium:.85,high:1,retina:2},J8=()=>{const h=er.stage;si.get("fonts",[]).forEach(s=>{s.type==="sdf"||s.type==="msdf"?(!s.png&&s.file&&(s.png=s.file.replace(/\.[^.]+$/,`.${s.type}.png`)),!s.json&&s.file&&(s.json=s.file.replace(/\.[^.]+$/,`.${s.type}.json`)),h.fontManager.addFontFace(new dy(s.type,{fontFamily:s.family,descriptors:{},atlasUrl:s.png,atlasDataUrl:s.json,stage:h,metrics:s.metrics}))):s.type==="web"&&h.fontManager.addFontFace(new ch({fontFamily:s.family,fontUrl:s.file,descriptors:{},metrics:s.metrics}))})},Q8=()=>{const h=er.stage;si.get("shaders",[]).forEach(s=>{h.shManager.registerShaderType(s.name,s.type)}),si.get("effects",[]).forEach(s=>{h.shManager.registerShaderType(s.name,s.type)})};let er={};const Z8=h=>{const s="renderMode"in h?h.renderMode:"webgl";if(s==="webgl")return Iy;if(s==="canvas")return W8},eL=h=>{const s="renderMode"in h?h.renderMode:"webgl";if(s==="webgl")return[$8,d3];if(s==="canvas")return[d3]},tL=h=>{const s={max:200,target:.8,cleanupInterval:5e3,baseline:25,strict:!1,..."gpuMemory"in h?h.gpuMemory:{}};return{criticalThreshold:s.max*1024*1024,targetThresholdLevel:s.target,cleanupInterval:s.cleanupInterval,baselineMemoryAllocation:s.baseline*1024*1024,doNotExceedCriticalThreshold:s.strict}},nL=(h,s,i={})=>{er=new w8({appWidth:i.w||1920,appHeight:i.h||1080,fpsUpdateInterval:i.fpsInterval||1e3,devicePhysicalPixelRatio:q8[i.renderQuality]||i.renderQuality||1,deviceLogicalPixelRatio:i.pixelRatio||p3[i.screenResolution]||p3[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in i?i.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:i.canvasColor&&Gu.normalize(i.canvasColor)||0,inspector:i.inspector===!0?Y8:void 0,boundsMargin:i.viewportMargin||0,renderEngine:Z8(i),fontEngines:eL(i),canvas:i.canvas,textureProcessingTimeLimit:i.textureProcessingTimeLimit,textureMemory:tL(i),createImageBitmapSupport:"auto",targetFPS:"maxFPS"in i?i.maxFPS:0,...i.advanced||{}},s);const c=()=>{let f=h();f.quit=()=>{Mt.info("Closing App"),f.destroy(),f=null,er=null}};return Q8(),J8(),c(),er},iL=(h,s)=>{if(h===void 0)return{start:0,end:0,oppositeStart:0,oppositeEnd:0};if(typeof h=="number")return{start:h,end:h,oppositeStart:h,oppositeEnd:h};if(Co(h)===!0&&(h=bo(h)),typeof h=="object"){const{top:i=void 0,right:c=void 0,bottom:f=void 0,left:v=void 0,x=0,y:m=0}=h;return s==="vertical"?{start:i!==void 0?i:m,end:f!==void 0?f:m,oppositeStart:v!==void 0?v:x,oppositeEnd:c!==void 0?c:x}:{start:v!==void 0?v:x,end:c!==void 0?c:x,oppositeStart:i!==void 0?i:m,oppositeEnd:f!==void 0?f:m}}return{start:0,end:0,oppositeStart:0,oppositeEnd:0}},rL=function(h){const s=h.direction==="vertical"?"y":"x",i=h.direction==="vertical"?"x":"y",c=h.direction==="vertical"?"mountX":"mountY",f=h.direction==="vertical"?"height":"width",v=h.direction==="vertical"?"width":"height",x=iL(h.padding,h.direction);let m=x.start;const l=this.node.children,r=l.length,S=this.children;let _=0;const k=h.gap||0;for(let b=0;b<r;b++){if(S[b]!==void 0&&S[b].props.raw.show===!1)continue;const C=l[b];C[s]=m,C[i]=x.oppositeStart,f==="width"?m+=C.width+(C.width!==("text"in C?1:0)?k:0):m+="text"in C?C.width>1?C.height+k:0:C.height!==0?C.height+k:0,_=Math.max(_,C[v]+x.oppositeStart+x.oppositeEnd)}this.node[f]=m-k+x.end,this.node[v]=_;const I={start:0,end:1,center:.5}[h["align-items"]||"start"];if(I!==0)for(let b=0;b<r;b++){const C=l[b];C[i]=_*I,C[c]=I}h["@updated"]!==void 0&&h["@updated"]({w:this.node.width,h:this.node.height},this),this.config.parent&&this.config.parent.props.__layout===!0&&this.config.parent.triggerLayout(this.config.parent.props)},g3=h=>h!==null&&typeof h=="object"&&"transition"in h,Co=h=>typeof h=="string"&&h.startsWith("{")&&h.endsWith("}"),bo=h=>JSON.parse(h.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),Au=function(h,s){return typeof h!="string"?h:h.indexOf("%")===h.length-1?this.element.config.parent&&(this.element.config.parent.node[s]||0)*(parseFloat(h)/100)||0:h},py=h=>{if(typeof h!="object"||h===null)return h;if(h.constructor===Object){if("value"in h)return h.value;if("transition"in h)return py(h.transition)}return h},oL={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};let gy=null;const sL={set parent(h){this.props.parent=h==="root"?er.root:h.node},set rotation(h){this.props.rotation=h*(Math.PI/180)},set w(h){this.props.width=Au.call(this,h,"width")},set width(h){this.props.width=Au.call(this,h,"width")},set h(h){this.props.height=Au.call(this,h,"height")},set height(h){this.props.height=Au.call(this,h,"height")},set x(h){this.props.x=Au.call(this,h,"width")},set y(h){this.props.y=Au.call(this,h,"height")},set z(h){this.props.zIndex=h},set zIndex(h){this.props.zIndex=h},set color(h){typeof h=="string"&&h.startsWith("{")===!1?this.props.color=Gu.normalize(h):(typeof h=="object"||Co(h)===!0&&(h=bo(h)))&&(this.props.color=0,Object.entries(h).forEach(s=>{this.props[oL[s[0]]]=Gu.normalize(s[1])}))},set src(h){this.props.src=h,this.raw.color===void 0&&(this.props.color=this.props.src?4294967295:0),!("w"in this.raw)&&!("w"in this.raw)&&!("h"in this.raw)&&!("height"in this.raw)&&(this.props.autosize=!0)},set texture(h){this.props.texture=h,this.raw.color===void 0&&h==null?this.props.color=0:this.raw.color===void 0&&(this.props.color=4294967295)},set fit(h){const s={};if(h==="cover"||h==="contain"){this.props.textureOptions={resizeMode:{type:h}};return}(typeof h=="object"||Co(h)===!0&&(h=bo(h)))&&(s.type=h.type||"cover",typeof h.position=="number"&&(s.clipY=s.clipX=h.position),typeof h.position=="object"&&(s.clipX="x"in h.position?h.position.x:null,s.clipY="y"in h.position?h.position.y:null),this.props.textureOptions={resizeMode:s})},set rtt(h){this.props.rtt=h,this.raw.color===void 0&&(this.props.color=h===!0?4294967295:0)},set mount(h){typeof h=="object"||Co(h)===!0&&(h=bo(h))?("x"in h&&(this.props.mountX=h.x),"y"in h&&(this.props.mountY=h.y)):(this.props.mountX=h,this.props.mountY=h)},set pivot(h){typeof h=="object"||Co(h)===!0&&(h=bo(h))?("x"in h&&(this.props.pivotX=h.x),"y"in h&&(this.props.pivotY=h.y)):(this.props.pivotX=h,this.props.pivotY=h)},set scale(h){typeof h=="object"||Co(h)===!0&&(h=bo(h))?("x"in h&&(this.props.scaleX=h.x),"y"in h&&(this.props.scaleY=h.y)):this.props.scale=h},set show(h){h?this.props.alpha=this.raw.alpha!==void 0?this.raw.alpha:1:this.props.alpha=0},set alpha(h){(this.raw.show===void 0||this.raw.show==!0)&&(this.props.alpha=h)},set shader(h){h!==null?this.props.shader=er.createShader(h.type,h.props):this.props.shader=er.createShader("DefaultShader")},set effects(h){for(let s=0;s<h.length;s++)h[s].props&&h[s].props.color&&(h[s].props.color=Gu.normalize(h[s].props.color));this.element.node===void 0&&(this.props.shader=er.createShader("DynamicShader",{effects:h.map(s=>er.createEffect(s.type,s.props))}))},set clipping(h){this.props.clipping=h},set overflow(h){this.props.clipping=!h},set font(h){this.props.fontFamily=h},set size(h){this.props.fontSize=h},set wordwrap(h){Mt.warn("The wordwrap attribute is deprecated, use maxwidth instead"),this.props.width=h,this.props.contain="width"},set maxwidth(h){this.props.width=h,this.props.contain="width"},set maxheight(h){this.props.height=h,this.props.contain="both"},set contain(h){this.props.contain=h},set maxlines(h){this.props.maxLines=h},set textoverflow(h){this.props.overflowSuffix=h===!1?" ":h===!0?void 0:h},set letterspacing(h){this.props.letterSpacing=h||1},set lineheight(h){this.props.lineHeight=h},set align(h){this.props.textAlign=h},set content(h){this.props.text=""+h},set placement(h){let s,i;typeof h=="object"||Co(h)===!0&&(h=bo(h))?("x"in h&&(s=h.x),"y"in h&&(i=h.y)):h==="center"||h==="right"?s=h:i=h,s==="center"?(this.x="50%",this.props.mountX=.5):s==="right"&&(this.x="100%",this.props.mountX=1),i==="middle"?(this.y="50%",this.props.mountY=.5):i==="bottom"&&(this.y="100%",this.props.mountY=1)},set"inspector-data"(h){(typeof h=="object"||Co(h)===!0&&(h=bo(h)))&&(this.props.data=h)}},uL={populate(h){const s=h;s.node=this.config.node,s[de.isSlot]===!0&&(this[de.isSlot]=!0),this.props.element=this,this.props.parent=s.parent||this.config.parent,delete s.parent,this.props.raw=h;const i=Object.keys(s),c=i.length;for(let f=0;f<c;f++){const v=i[f],x=s[v];x!==void 0&&(this.props[v]=py(x))}this.props.props.color===void 0&&!("__textnode"in s)&&(this.props.props.color=0),this.node=s.__textnode?er.createTextNode({...gy,...this.props.props}):er.createNode(this.props.props),s["@loaded"]!==void 0&&typeof s["@loaded"]=="function"&&this.node.on("loaded",(f,{type:v,dimensions:x})=>{s["@loaded"]({w:x.width,h:x.height,type:v},this)}),s["@error"]!==void 0&&typeof s["@error"]=="function"&&this.node.on("failed",(f,v)=>{s["@error"](v,this)}),s.__layout===!0&&(this.triggerLayout=rL.bind(this)),this.config.parent.props!==void 0&&this.config.parent.props.__layout===!0&&(this.config.parent.triggerLayout(this.config.parent.props),this.node.on("loaded",()=>{this.config.parent.triggerLayout(this.config.parent.props)}))},set(h,s){if(s===void 0||this.props.raw[h]===s)return;this.props.raw[h]=s,this.props.props={},this.props[h]=py(s);const i=Object.keys(this.props.props);if(i.length===1){if(g3(s)===!0)return this.animate(i[0],this.props.props[i[0]],s.transition);this.node[i[0]]=this.props.props[i[0]]}else for(let c=0;c<i.length;c++){if(g3(s)===!0)return this.animate(i[c],this.props.props[i[c]],s.transition);this.node[i[c]]=this.props.props[i[c]]}this.config.parent.props&&this.config.parent.props.__layout===!0&&this.config.parent.triggerLayout(this.config.parent.props)},animate(h,s,i){if(this.scheduledTransitions[h]!==void 0&&this.scheduledTransitions[h].f.state==="scheduled"&&this.scheduledTransitions[h].f.stop(),this.node[h]===s)return;const c={};c[h]=s;const f=this.node.animate(c,{duration:typeof i=="object"&&"duration"in i?i.duration:300,easing:typeof i=="object"&&"easing"in i?i.easing:"ease",delay:typeof i=="object"&&"delay"in i?i.delay:0}),v=this.node[h];if(this.scheduledTransitions[h]={v:c[h],f},i.start!==void 0&&typeof i.start=="function"&&f.once("animating",()=>{i.start.call(this.component,this,h,v)}),this.config.parent.props&&this.config.parent.props.__layout===!0&&f.on("tick",()=>{this.config.parent.triggerLayout(this.config.parent.props)}),i.progress!==void 0&&typeof i.progress=="function"){let x=0;f.on("tick",(m,{progress:l})=>{i.progress.call(this.component,this,h,l,x),x=l})}f.once("stopped",()=>{this.scheduledTransitions[h]!==void 0&&this.scheduledTransitions[h].canceled===!0||(this.node!==void 0&&i.end&&typeof i.end=="function"&&i.end.call(this.component,this,h,this.node[h]),delete this.scheduledTransitions[h])}),f.start()},destroy(){if(this.node===null)return;Mt.debug("Deleting Node",this.nodeId);const h=Object.keys(this.scheduledTransitions);for(let s=0;s<h.length;s++){const i=this.scheduledTransitions[h[s]];i!==void 0&&(i.canceled=!0,i.f!==void 0&&i.f.stop())}this.scheduledTransitions={},this.component=null,delete this.component,this.config=null,delete this.config,this.props.raw={},this.props.element=null,this.props.props=null,this.props={},delete this.props,this.triggerLayout=null,delete this.triggerLayout,this.forComponent=null,delete this.forComponent,this.node.destroy(),this.node=null},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){const h=this.component[de.getChildren](),s=[],i=h.length;for(let c=0;c<i;c++){const f=h[c];f!==void 0&&f.parent===(this[de.isSlot]?this.node.children[0]:this.node)&&s.push(f)}return s}},lL=(h,s)=>(gy===null&&(gy={fontSize:32,fontFamily:si.get("defaultFont","sans-serif")}),Object.assign(Object.create(uL),{props:Object.assign(Object.create(sL),{props:{}}),scheduledTransitions:{},config:h,component:s})),m3={Element:lL,Launch:nL},aL="1.38.2",fL={"@lightningjs/renderer":"^2.15.0"},hb={version:aL,dependencies:fL};let kh={};const My={};async function cL(){let h;try{if(h=await X3(()=>import("./package-OhhVVrMQ.js"),[]),h!==void 0)return h.version}catch{return hb.dependencies["@lightningjs/renderer"]}}const dL=(h,s,i)=>{si.set(i),n_(),cL().then(c=>{Mt.info("Blits Version ",hb.version),Mt.info("Renderer Version ",c)}),My.element=m3.Element,kh=m3.Launch(h,s,i)},hL={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},ps=window.speechSynthesis,pL=/android/i.test((window.navigator||{}).userAgent||""),zm=new Map;let pb=!1,$a=null;const Ah=()=>{$a&&(clearTimeout($a),$a=null)},my=h=>{if(!h||$a)return Ah();ps.pause(),setTimeout(()=>{ps.resume()},0),$a=setTimeout(()=>{my(h)},5e3)},Uu={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},gL=()=>{const h=ps.getVoices();Uu.voice=h[0]||null,pb=!0},mL=h=>{const s=new SpeechSynthesisUtterance(h.message),i=h.id;return s.lang=h.lang||Uu.lang,s.pitch=h.pitch||Uu.pitch,s.rate=h.rate||Uu.rate,s.voice=h.voice||Uu.voice,s.volume=h.volume||Uu.volume,zm.set(i,s),pL===!1&&(s.onstart=()=>{my(s)},s.onresume=()=>{my(s)}),new Promise((c,f)=>{s.onend=()=>{Ah(),zm.delete(i),c()},s.onerror=v=>{Ah(),zm.delete(i),f(v)},ps.speak(s)})},Ry={speak(h){return ps!==void 0?(pb===!1&&gL(),mL(h)):(Mt.error("speechSynthesis web API not available"),Promise.reject({error:"unavailable"}))},cancel(){ps!==void 0&&(ps.cancel(),Ah())}};let Qa=!1,yL=0;const Eo=[];let fs=!1,Ba=null,eh=null;const gb={then(){},done(){},cancel(){},remove(){},stop(){}},vL=()=>{Qa=!0},xL=()=>{Qa=!1},wL=h=>{Qa=!!h},_y=(h,s="off")=>Qa===!1?gb:mb(h,s),SL=h=>Qa===!1?gb:mb(void 0,void 0,h),mb=(h,s,i=!1)=>{const c=yL++;let f;const v=new Promise(x=>{f=x});return v.remove=v.cancel=()=>{const x=Eo.findIndex(m=>m.id===c);x!==-1&&Eo.splice(x,1),Mt.debug(`Announcer - removed from queue: "${h}" (id: ${c})`),f("canceled")},v.stop=()=>{c===Ba&&(Ry.cancel(),fs=!1,f("interupted"))},i===!1?s==="assertive"?Eo.unshift({message:h,resolveFn:f,id:c}):Eo.push({message:h,resolveFn:f,id:c}):Eo.push({delay:i,resolveFn:f,id:c}),Mt.debug(`Announcer - added to queue: "${h}" (id: ${c})`),setTimeout(()=>{dh()},100),v},dh=async()=>{if(fs===!0||Eo.length===0)return;fs=!0;const{message:h,resolveFn:s,delay:i,id:c}=Eo.shift();Ba=c,i?setTimeout(()=>{fs=!1,Ba=null,s("finished"),dh()},i):(eh!==null&&clearTimeout(eh),eh=setTimeout(()=>{Mt.debug(`Announcer - speaking: "${h}" (id: ${c})`),Ry.speak({message:h,id:c}).then(()=>{Mt.debug(`Announcer - finished speaking: "${h}" (id: ${c})`),Ba=null,fs=!1,s("finished"),dh()}).catch(f=>{Ba=null,fs=!1,Mt.debug(`Announcer - error ("${f.error}") while speaking: "${h}" (id: ${c})`),s(f.error),dh()}),eh=null},200))},TL=h=>_y(h,"polite"),CL=h=>_y(h,"assertive"),bL=()=>{Ry.cancel()},kL=()=>{fs=!1,Eo.length=0},hh={speak:_y,polite:TL,assertive:CL,stop:bL,enable:vL,disable:xL,toggle:wL,clear:kL,pause:SL};let Io;const Xr=Xa({path:"",navigating:!1,data:null,params:null,hash:""},si.get("reactivityMode"),!0),yy=new Map,yb=[];let vb={},xb={},ph=!1,vy;const AL=()=>{const h=(document.location.hash||"/").replace(/^#/,"").split("?");return{path:h[0],queryParams:new URLSearchParams(h[1]),hash:document.location.hash}},y3=h=>h.replace(/^\/+|\/+$/g,"").toLowerCase(),v3=h=>typeof h=="object"&&h!==null,x3=h=>typeof h=="string",wb=(h,s=[])=>{const i=h.replace(/^\/+|\/+$/g,"");h=y3(h);let c=!1,f=0;for(;!c&&f<s.length;){const v=s[f];if(v.path=y3(v.path),v.path===h)v.params={},c=v;else if(v.path.indexOf(":")>-1){const x=[...v.path.matchAll(/:([^\s/]+)/gi)];let m=v.path;x.reverse().forEach(r=>{m=m.substring(0,r.index)+"([^\\s/]+)"+m.substring(r.index+r[0].length)}),m="^"+m;const l=i.match(new RegExp(`${m}`,"i"));l&&(v.params=x.reverse().reduce((r,S,_)=>(r[S[1]]=l[_+1],r),{}),c=v)}else if(v.path.endsWith("*")){const x=new RegExp(v.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),m=h.match(x);m&&(m[1]&&(v.params={path:m[1]}),c=v)}f++}return c&&(c.options={...EL,...c.options,...vb},c.data||(c.data={})),c},EL={inHistory:!0,keepAlive:!1,passFocus:!0,reuseComponent:!1},IL=async function(){hh.stop(),hh.clear(),Xr.navigating=!0;let h=!1;if(this.parent[de.routes]){let s=Io;const{hash:i,path:c,queryParams:f}=AL();let v=wb(c,this.parent[de.routes]);if(Io=v,v){const x={},m=[...f.entries()];for(let E=0;E<m.length;E++)x[m[E][0]]=m[E][1];v.data={...v.data,...xb,...x},i!==null&&(v.hash=i);let l;if(this.parent[de.routerHooks]){const E=this.parent[de.routerHooks];if(E.beforeEach&&(l=await E.beforeEach.call(this.parent,v,s),x3(l))){Ya(l);return}}v=v3(l)?l:v;let r;if(v.hooks&&v.hooks.before&&(r=await v.hooks.before.call(this.parent,v,s),x3(r))){Io=s,Ya(r);return}v=v3(r)?r:v,ph===!1&&s&&s.options.inHistory===!0&&yb.push(s),"transition"in v||(v.transition=hL),typeof v.transition=="function"&&(v.transition=v.transition(s,v));let S,{view:_,focus:k}=yy.get(v.hash)||{};const I={...this[de.props],...v.params,...v.data};if(s&&v.component===s.component&&v.options.reuseComponent===!0&&v.options.keepAlive!==!0){h=!0,_=this[de.children][this[de.children].length-1];for(const E in I)_[de.props][E]=I[E]}if(v.announce&&(typeof v.announce=="string"&&(v.announce={message:v.announce}),hh.speak(v.announce.message,v.announce.politeness)),!_)S=My.element({parent:this[de.children][0]}),S.populate({}),S.set("w","100%"),S.set("h","100%"),_=await v.component({props:I},S,this),_[Symbol.toStringTag]==="Module"&&(_.default&&typeof _.default=="function"?_=_.default({props:I},S,this):Mt.error("Dynamic import doesn't have a default export or default is not a function")),typeof _=="function"&&(_=_({props:I},S,this));else{S=_[de.holder];let E=!1;if(v.transition.before)if(Array.isArray(v.transition.before)){for(let A=0;A<v.transition.before.length;A++)if(v.transition.before[A].prop==="alpha"){E=!0;break}}else v.transition.before.prop==="alpha"&&(E=!0);E===!1&&S.set("alpha",1)}h===!1&&this[de.children].push(_),vy=ds.get();const b=this[de.children];if(this.activeView=b[b.length-1],(v.options===void 0||v.options.passFocus!==!1)&&(k?k.$focus():_.$focus()),v.transition.before)if(Array.isArray(v.transition.before))for(let E=0;E<v.transition.before.length;E++)S.set(v.transition.before[E].prop,v.transition.before[E].value);else S.set(v.transition.before.prop,v.transition.before.value);let C=!1;if(s&&h===!1){C=!0;const E=this[de.children].splice(1,1).pop();E&&ML(s,E,v.transition.out,ph)}if(Xr.path=v.path,Xr.params=v.params,Xr.hash=i,Xr.data=v.data,v.transition.in)if(Array.isArray(v.transition.in))for(let E=0;E<v.transition.in.length;E++)E===v.transition.length-1?await Yu(S,v.transition.in[E],C):Yu(S,v.transition.in[E],C);else await Yu(S,v.transition.in,C)}else{Mt.error(`Route ${i} not found`);const x=this.parent[de.routerHooks];x&&typeof x.error=="function"&&x.error.call(this.parent,`Route ${i} not found`)}}ph=!1,Xr.navigating=!1},ML=async(h,s,i,c)=>{if(i)if(Array.isArray(i))for(let f=0;f<i.length;f++)f===i.length-1?await Yu(s[de.holder],i[f]):Yu(s[de.holder],i[f]);else await Yu(s[de.holder],i);c===!1&&h.options&&h.options.keepAlive===!0?yy.set(h.hash,{view:s,focus:vy}):c===!0&&yy.delete(h.hash),h.options&&(h.options.keepAlive!==!0||c===!0)&&(s.destroy(),s=null),vy=null},Yu=(h,s,i=!0)=>new Promise(c=>{if(i===!0){let f=s.end;s.end=(...v)=>{f&&f(v),f=null,c()},h!==void 0?h.set(s.prop,{transition:s}):c()}else h!==void 0&&h.set(s.prop,s.value),c()}),Ya=(h,s={},i={})=>{xb=s,vb=i,window.location.hash=h},Sb=function(){const h=yb.pop();if(h&&Io!==h)return ph=!0,Ya(h.hash,h.data,h.options),!0;const s=Io&&Io.options.backtrack||!1;if(s===!1)return!1;const i=/(\/:?[\w%\s-]+)$/;let c=Io.path,f=c.split("/").length;if(f<=1)return!1;for(;f--;){if(!i.test(c))return!1;c=c.replace(i,"");const v=wb(c,this.parent[de.routes]);if(v&&s)return Ya(v.path),!0}return!1},Vm={navigate:IL,back:Sb};let Bu=null,lr=[],w3;const xy=new Map,ds={_hold:!1,set hold(h){this._hold=h},get hold(){return this._hold},get(){return Bu},set(h,s){if(clearTimeout(w3),h===Bu)return;if(Bu===null&&(lr=wy([h])),Bu!==null)if(lr[lr.length-1]===h.parent)lr.push(h);else{const c=wy([h]);let f=lr.length;for(;f--&&!(c.indexOf(lr[f])>-1);)lr[f].lifecycle.state="unfocus";lr=c}let i=0;for(;i<lr.length-1;)lr[i].lifecycle.state="focus",i++;w3=setTimeout(()=>RL(h,s),this.hold===!0?si.get("holdTimeout",db):0)},input(h,s){if(Xr.navigating===!0)return;const i=Tb(Bu,h);if(i===null)return;const c=i[de.inputEvents];let f;c[h]?f=c[h].call(i,s):c.any&&(f=c.any.call(i,s)),f!==void 0&&xy.set(s.code,f)}},wy=h=>h[0].parent!==void 0?(h.unshift(h[0].parent),wy(h)):h,Tb=(h,s)=>h[de.inputEvents]&&(typeof h[de.inputEvents][s]=="function"||typeof h[de.inputEvents].any=="function")?h:h.parent!==void 0?Tb(h.parent,s):null,RL=(h,s)=>{if(Mt.info(`
Focus chain:
`,lr.map((i,c)=>"	".repeat(c)+"↳ "+i.componentId).join(`
`)),Bu=h,h.lifecycle.state="focus",s instanceof KeyboardEvent){const i=new KeyboardEvent("keydown",s);i[de.internalEvent]=!0,document.dispatchEvent(i)}},ls=new Map,Eu=new Map;function _L(h){return h&&typeof h=="object"&&h[de.isProxy]===!0}function Cb(h){if(h===null||typeof h!="object")return h;const s=_L(h)?Ao(h):h,i=Array.isArray(s)?[]:{};for(const c of Object.keys(s)){const f=s[c];i[c]=f&&typeof f=="object"?Cb(f):f}return i}const gh={registerListener(h,s,i,c=0){let f=ls.get(s);f===void 0&&(f=new Map,ls.set(s,f));let v=f.get(h);v===void 0&&(v=new Set,f.set(h,v)),v.add({cb:i,priority:c}),Eu.delete(s)},deregisterListener(h,s){let i=ls.get(s);i!==void 0&&i.has(h)&&(i.delete(h),ls.set(s,i),Eu.delete(s))},executeListeners(h,s,i){i===!1&&(s=Cb(s));const c=ls.get(h);if(c===void 0||c.size===0)return!0;if(Eu.has(h)===!1){const v=[];for(const[x,m]of c)for(const l of m)v.push({...l,component:x});v.sort((x,m)=>m.priority-x.priority),Eu.set(h,v)}const f=Eu.get(h);for(let v=0;v<f.length;v++){const{cb:x,component:m}=f[v];if(x.call(m,s)===!1)return!1}return!0},removeListeners(h){for(const[s,i]of ls)i.has(h)&&(i.delete(h),Eu.delete(s),i.size===0&&ls.delete(s))}},LL={focus:{value:function(h){return Mt.warn("this.focus is deprecated, use this.$focus instead"),this.$focus(h)},writable:!1,enumerable:!0,configurable:!1},$focus:{value:function(h){this.lifecycle.state==="focus"&&(this.lifecycle.state="refocus"),ds.set(this,h)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[de.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.eol=!0,this.lifecycle.state="destroy",this.hasFocus===!0&&this.parent.$focus();for(let h in this[de.state])Array.isArray(this[de.state][h])&&(this[de.state][h]=[]);this.$clearTimeouts(),this.$clearIntervals(),gh.removeListeners(this),bb(this[de.children]),this[de.children].length=0,YC(this[de.effects]),this[de.state]={},this[de.props]={},this[de.computed]=null,this.lifecycle={},this[de.effects].length=0,this.parent=null,this.rootParent=null,this[de.wrapper]=null,this[de.originalState]=null,this[de.slots].length=0,delete this[de.computed],delete this[de.effects],delete this.parent,delete this.rootParent,delete this[de.wrapper],delete this[de.originalState],delete this[de.children],delete this[de.slots],delete this.componentId,delete this[de.id],delete this.ref,delete this[de.state].hasFocus,this[de.holder].destroy(),this[de.holder]=null,delete this[de.holder],this[de.cleanup](),delete this[de.cleanup],Mt.debug(`Destroyed component ${this.componentId}`)},writable:!1,enumerable:!0,configurable:!1},[de.removeGlobalEffects]:{value:function(h=[]){YC(h)},writable:!1,enumerable:!1,configurable:!1},select:{value:function(h){return Mt.warn("this.select is deprecated, use this.$select instead"),this.$select(h)},writable:!1,enumerable:!0,configurable:!1},$select:{value:function(h){if(this.eol===!0)return;let s=null;return this[de.children].forEach(i=>{Array.isArray(i)?i.forEach(c=>{c.ref===h&&(s=c)}):Object.getPrototypeOf(i)===Object.prototype?Object.keys(i).forEach(c=>{i[c].ref===h&&(s=i[c])}):i.ref===h&&(s=i)}),s},writable:!1,enumerable:!0,configurable:!1},trigger:{value:function(h){return Mt.warn("this.trigger is deprecated, use this.$trigger instead"),this.$trigger(h)},writable:!1,enumerable:!0,configurable:!1},$trigger:{value:function(h){let s=this[de.originalState];if(h.indexOf(".")>-1){const i=h.split(".");h=i.pop(i);for(let c=0;c<i.length;c++)s=s[i[c]]}Wu(s,h,!0)},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(h,s){return{type:h,props:s}},writable:!1,enumerable:!0,configurable:!1}},bb=function(h){for(let s=0;s<h.length;s++){if(!h[s])return;h[s].destroy&&typeof h[s].destroy=="function"?h[s].destroy():Object.getPrototypeOf(h[s])===Object.prototype&&bb(Object.values(h[s])),h[s]=null}h.length=0},PL={$setTimeout:{value:function(h,s,...i){if(this.eol===!0)return;const c=setTimeout(()=>{this.$clearTimeout(c),h.apply(null,i)},s,i);return this[de.timeouts].push(c),c},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(h){const s=this[de.timeouts].indexOf(h);s>-1&&(this[de.timeouts].splice(s,1),clearTimeout(h))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(let h=0;h<this[de.timeouts].length;h++)clearTimeout(this[de.timeouts][h]);this[de.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(h,s,...i){if(this.eol===!0)return;const c=setInterval(()=>h.apply(null,i),s,i);return this[de.intervals].push(c),c},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(h){const s=this[de.intervals].indexOf(h);s>-1&&(this[de.intervals].splice(s,1),clearTimeout(h))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(let h=0;h<this[de.intervals].length;h++)clearInterval(this[de.intervals][h]);this[de.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},DL={$emit:{value:function(h,s,i=!0){if(this.eol!==!0)return gh.executeListeners(h,s,i)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(h,s,i=0){this.eol!==!0&&gh.registerListener(this,h,s,i)},writable:!1,enumerable:!0,configurable:!1},$unlisten:{value:function(h){gh.deregisterListener(this,h)},writable:!1,enumerable:!0,configurable:!1}},OL={$router:{value:{to:Ya,back:Sb,get currentRoute(){return Io},get routes(){return this[de.routes]},get navigating(){return Xr.navigating},state:Xr},writable:!1,enumerable:!0,configurable:!1}},NL={$announcer:{value:hh,writable:!1,enumerable:!0,configurable:!1}},UL={$size:{value:function(h={w:0,h:0}){this[de.holder].set("w",h.w||0),this[de.holder].set("h",h.h||0)},writable:!1,enumerable:!0,configurable:!1},[de.renderer]:{value:()=>kh,writable:!1,enumerable:!0,configurable:!1},[de.getChildren]:{value(){const h=this.rootParent||this.parent;return(this[de.children]||[]).concat(h&&h[de.getChildren]().map(s=>Object.getPrototypeOf(s)===Object.prototype?Object.values(s).map(i=>(i.forComponent=i[Symbol.for("config")]&&i[Symbol.for("config")].parent.component,i)):s).flat().filter(s=>{if(s&&s.component)return s.component&&s.component.componentId===this.componentId||s.forComponent&&s.forComponent.componentId===this.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}},kb={...DL,...OL,...NL},as=Object.defineProperties({[de.launched]:!1},{...LL,...PL,...kb,...UL}),BL={cast:h=>h,required:!1},FL=(h,s=[])=>{s.indexOf("ref")===-1&&s.push("ref"),h[de.propKeys]=[];const i=s.length;for(let c=0;c<i;c++){const f={...BL,...typeof s[c]=="object"?s[c]:{key:s[c]}};h[de.propKeys].push(f.key),Object.defineProperty(h,f.key,{get(){const v=f.cast(this[de.props]!==void 0&&f.key in this[de.props]?this[de.props][f.key]:"default"in f?f.default:void 0);return f.required===!0&&v===void 0&&Mt.warn(`${f.key} is required`),v},set(v){Mt.warn(`Warning! Avoid mutating props directly (prop "${f.key}" in component "${this.componentId}")`),this[de.props][f.key]=v}})}},jL=(h,s)=>{h[de.methodKeys]=[];for(let i in s)h[de.propKeys]&&h[de.propKeys].indexOf(i)>-1?Mt.error(`${i} already exists as a prop`):(typeof s[i]!="function"&&Mt.warn(`${i} is not a function`),h[de.methodKeys].push(i),h[i]=s[i])},$L=(h,s=()=>{})=>{Object.defineProperty(h,de.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1});const i=Object.keys(s.apply(h)||{});i.indexOf("hasFocus")>-1?Mt.warn("State `hasFocus` already exists as a built-in Component variable (to indicate whether the component currently has focus). Avoid using your own `hasFocus` key in the Component state"):i.push(["hasFocus"]);const c=i.length;for(let f=0;f<c;f++){const v=i[f];h[de.propKeys]!==void 0&&h[de.propKeys].indexOf(v)>-1&&Mt.error(`State ${v} already exists as a prop`),h[de.methodKeys]!==void 0&&h[de.methodKeys].indexOf(v)>-1&&Mt.error(`State ${v} already exists as a method`),h[de.stateKeys].push(v),Object.defineProperty(h,v,{get(){return this[de.state][v]},set(x){this[de.state][v]=x}})}},zL=(h,s)=>{h[de.computedKeys]=[];for(let i in s)h[de.stateKeys]&&h[de.stateKeys].indexOf(i)>-1?Mt.error(`${i} already exists as a state variable`):h[de.propKeys]&&h[de.propKeys].indexOf(i)>-1?Mt.error(`${i} already exists as a prop`):h[de.methodKeys]&&h[de.methodKeys].indexOf(i)>-1?Mt.error(`${i} already exists as a method`):(typeof s[i]!="function"&&Mt.warn(`${i} is not a function`),h[de.computedKeys].push(i),Object.defineProperty(h,i,{get(){return s[i].apply(this)}}))},VL=(h,s)=>{h[de.inputEvents]=[],Object.keys(s).forEach(i=>{typeof s[i]!="function"&&Mt.warn(`${s[i]} is not a function`),h[de.inputEvents][i]=s[i]})},HL=(h,s)=>{let i=s;Array.isArray(s)===!1&&(h[de.routerHooks]=s.hooks,i=s.routes),h[de.routes]=[];const c=i.length;for(let f=0;f<c;f++)h[de.routes][f]=i[f],h[de.routes][f].options={inHistory:!0,...i[f].options}},GL=(h,s)=>{h[de.watchKeys]=[],h[de.watchers]={};for(let i in s)typeof s[i]!="function"&&console.warn(`${i} is not a function`),h[de.watchKeys].push(i),h[de.watchers][i]=function(c,f){s[i].call(this,c,f)}};let XL=0;function WL(h,s){h[de.identifier]=++XL,y_(s.hooks,h[de.identifier]),FL(h,s.props),s.methods&&jL(h,s.methods),$L(h,s.state),s.computed&&zL(h,s.computed),s.watch&&GL(h,s.watch);const i=s.router!==void 0?s.router:s.routes;return i!==void 0&&HL(h,i),s.input&&VL(h,s.input),h}const KL=()=>Qu("Circle",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].color=i.color,r[0].w=i.size,r[0].h=i.size,r[0].effects=[i.shader("radius",{radius:i.radius})],l[0].populate(r[0]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("color",s.color)},function(s,i,c,f,v,x){i[0].set("w",s.size)},function(s,i,c,f,v,x){i[0].set("h",s.size)},function(s,i,c,f,v,x){i[0].set("effects",[s.shader("radius",{radius:s.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let Hm=null;const YL=()=>Qu("RouterView",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=s.node.width*(100/100),r[0].height=s.node.height*(100/100),l[0].populate(r[0]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[],context:{}},state(){return{activeView:null}},hooks:{async ready(){this.parent[de.routerHooks]&&this.parent[de.routerHooks].init&&await this.parent[de.routerHooks].init.apply(this.parent),Hm=()=>Vm.navigate.apply(this),Vm.navigate.apply(this),window.addEventListener("hashchange",Hm)},destroy(){window.removeEventListener("hashchange",Hm,!1)},focus(){this.activeView&&ds.get()===this&&this.activeView.$focus()}},input:{back(h){Vm.back.call(this)===!1&&this.parent.$focus(h)}}}),qL=()=>Qu("Sprite",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=s.node.width*(100/100),r[0].h=s.node.height*(100/100),r[0].texture=i.texture,r[0].color=i.color,l[0].populate(r[0]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("texture",s.texture)},function(s,i,c,f,v,x){i[0].set("color",s.color)}],context:{}},props:["image","map","frame","color"],state(){return{spriteTexture:null}},computed:{texture(){const h="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(this.spriteTexture!==null&&h)return this[de.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:h.x,y:h.y,width:h.w,height:h.h})}},hooks:{ready(){this.spriteTexture=this[de.renderer]().createTexture("ImageTexture",{src:this.image})}}}),JL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",QL=()=>Qu("FPScounter",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),l[0].populate(r[0]),C===!0&&(E-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].y=15,r[1].x=20,l[1].populate(r[1]),C===!0&&(E-=1),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},C===!0?b:i),l[2].populate(r[2]),C===!0&&(E-=1),A[3]=c.components&&c.components.Sprite||f.Sprite,s=l[2],r[3]={},l[3]=this.element({parent:s||"root"},C===!0?b:i),r[3].image=i.image,r[3].w=43,r[3].h=25,r[3].map=i.sprite,r[3].frame="fps",_[3]=[],typeof A[3]<"u")for(let U in A[3][Symbol.for("config")].props)delete r[3][A[3][Symbol.for("config")].props[U]],_[3].push(A[3][Symbol.for("config")].props[U]);if(l[3].populate(r[3]),C===!0&&(E-=1),s=l[3],S[4]={},S[4].image=i.image,S[4].w=43,S[4].h=25,S[4].map=i.sprite,S[4].frame="fps",k=S[4].is||"Sprite",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);if(l[4]=f[4].call(null,{props:S[4]},l[3],i),l[4][Symbol.for("slots")][0]?(s=l[4][Symbol.for("slots")][0],b=l[4],C=!0):s=l[4][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),s=l[2],r[5]={},l[5]=this.element({parent:s||"root"},C===!0?b:i),r[5].x=58,r[5].y=2,l[5].populate(r[5]),C===!0&&(E-=1),A[6]=c.components&&c.components.Sprite||f.Sprite,s=l[5],r[6]={},l[6]=this.element({parent:s||"root"},C===!0?b:i),r[6].image=i.image,r[6].x=0,r[6].h=20,r[6].w=20,r[6].map=i.sprite,r[6].frame=i.fps[0],_[6]=[],typeof A[6]<"u")for(let U in A[6][Symbol.for("config")].props)delete r[6][A[6][Symbol.for("config")].props[U]],_[6].push(A[6][Symbol.for("config")].props[U]);if(l[6].populate(r[6]),C===!0&&(E-=1),s=l[6],S[7]={},S[7].image=i.image,S[7].x=0,S[7].h=20,S[7].w=20,S[7].map=i.sprite,I=i.fps[0],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[7].frame=I,k=S[7].is||"Sprite",f[7],typeof k=="string"){if(f[7]=c.components&&c.components[k]||f[k],!f[7])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[7]=k);if(l[7]=f[7].call(null,{props:S[7]},l[6],i),l[7][Symbol.for("slots")][0]?(s=l[7][Symbol.for("slots")][0],b=l[7],C=!0):s=l[7][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[8]=c.components&&c.components.Sprite||f.Sprite,s=l[5],r[8]={},l[8]=this.element({parent:s||"root"},C===!0?b:i),r[8].image=i.image,r[8].x=18,r[8].h=20,r[8].w=20,r[8].map=i.sprite,r[8].frame=i.fps[1],_[8]=[],typeof A[8]<"u")for(let U in A[8][Symbol.for("config")].props)delete r[8][A[8][Symbol.for("config")].props[U]],_[8].push(A[8][Symbol.for("config")].props[U]);if(l[8].populate(r[8]),C===!0&&(E-=1),s=l[8],S[9]={},S[9].image=i.image,S[9].x=18,S[9].h=20,S[9].w=20,S[9].map=i.sprite,I=i.fps[1],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[9].frame=I,k=S[9].is||"Sprite",f[9],typeof k=="string"){if(f[9]=c.components&&c.components[k]||f[k],!f[9])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[9]=k);if(l[9]=f[9].call(null,{props:S[9]},l[8],i),l[9][Symbol.for("slots")][0]?(s=l[9][Symbol.for("slots")][0],b=l[9],C=!0):s=l[9][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[10]=c.components&&c.components.Sprite||f.Sprite,s=l[5],r[10]={},l[10]=this.element({parent:s||"root"},C===!0?b:i),r[10].image=i.image,r[10].x=36,r[10].h=20,r[10].w=20,r[10].map=i.sprite,r[10].frame=i.fps[2],_[10]=[],typeof A[10]<"u")for(let U in A[10][Symbol.for("config")].props)delete r[10][A[10][Symbol.for("config")].props[U]],_[10].push(A[10][Symbol.for("config")].props[U]);if(l[10].populate(r[10]),C===!0&&(E-=1),s=l[10],S[11]={},S[11].image=i.image,S[11].x=36,S[11].h=20,S[11].w=20,S[11].map=i.sprite,I=i.fps[2],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[11].frame=I,k=S[11].is||"Sprite",f[11],typeof k=="string"){if(f[11]=c.components&&c.components[k]||f[k],!f[11])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[11]=k);if(l[11]=f[11].call(null,{props:S[11]},l[10],i),l[11][Symbol.for("slots")][0]?(s=l[11][Symbol.for("slots")][0],b=l[11],C=!0):s=l[11][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),s=l[1],r[12]={},l[12]=this.element({parent:s||"root"},C===!0?b:i),r[12].x=150,l[12].populate(r[12]),C===!0&&(E-=1),A[13]=c.components&&c.components.Sprite||f.Sprite,s=l[12],r[13]={},l[13]=this.element({parent:s||"root"},C===!0?b:i),r[13].image=i.image,r[13].y=2,r[13].w=48,r[13].h=25,r[13].map=i.sprite,r[13].frame="avg",_[13]=[],typeof A[13]<"u")for(let U in A[13][Symbol.for("config")].props)delete r[13][A[13][Symbol.for("config")].props[U]],_[13].push(A[13][Symbol.for("config")].props[U]);if(l[13].populate(r[13]),C===!0&&(E-=1),s=l[13],S[14]={},S[14].image=i.image,S[14].y=2,S[14].w=48,S[14].h=25,S[14].map=i.sprite,S[14].frame="avg",k=S[14].is||"Sprite",f[14],typeof k=="string"){if(f[14]=c.components&&c.components[k]||f[k],!f[14])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[14]=k);if(l[14]=f[14].call(null,{props:S[14]},l[13],i),l[14][Symbol.for("slots")][0]?(s=l[14][Symbol.for("slots")][0],b=l[14],C=!0):s=l[14][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),s=l[12],r[15]={},l[15]=this.element({parent:s||"root"},C===!0?b:i),r[15].x=63,r[15].y=2,l[15].populate(r[15]),C===!0&&(E-=1),A[16]=c.components&&c.components.Sprite||f.Sprite,s=l[15],r[16]={},l[16]=this.element({parent:s||"root"},C===!0?b:i),r[16].image=i.image,r[16].x=0,r[16].h=20,r[16].w=20,r[16].map=i.sprite,r[16].frame=i.avgFps[0],_[16]=[],typeof A[16]<"u")for(let U in A[16][Symbol.for("config")].props)delete r[16][A[16][Symbol.for("config")].props[U]],_[16].push(A[16][Symbol.for("config")].props[U]);if(l[16].populate(r[16]),C===!0&&(E-=1),s=l[16],S[17]={},S[17].image=i.image,S[17].x=0,S[17].h=20,S[17].w=20,S[17].map=i.sprite,I=i.avgFps[0],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[17].frame=I,k=S[17].is||"Sprite",f[17],typeof k=="string"){if(f[17]=c.components&&c.components[k]||f[k],!f[17])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[17]=k);if(l[17]=f[17].call(null,{props:S[17]},l[16],i),l[17][Symbol.for("slots")][0]?(s=l[17][Symbol.for("slots")][0],b=l[17],C=!0):s=l[17][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[18]=c.components&&c.components.Sprite||f.Sprite,s=l[15],r[18]={},l[18]=this.element({parent:s||"root"},C===!0?b:i),r[18].image=i.image,r[18].x=18,r[18].h=20,r[18].w=20,r[18].map=i.sprite,r[18].frame=i.avgFps[1],_[18]=[],typeof A[18]<"u")for(let U in A[18][Symbol.for("config")].props)delete r[18][A[18][Symbol.for("config")].props[U]],_[18].push(A[18][Symbol.for("config")].props[U]);if(l[18].populate(r[18]),C===!0&&(E-=1),s=l[18],S[19]={},S[19].image=i.image,S[19].x=18,S[19].h=20,S[19].w=20,S[19].map=i.sprite,I=i.avgFps[1],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[19].frame=I,k=S[19].is||"Sprite",f[19],typeof k=="string"){if(f[19]=c.components&&c.components[k]||f[k],!f[19])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[19]=k);if(l[19]=f[19].call(null,{props:S[19]},l[18],i),l[19][Symbol.for("slots")][0]?(s=l[19][Symbol.for("slots")][0],b=l[19],C=!0):s=l[19][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[20]=c.components&&c.components.Sprite||f.Sprite,s=l[15],r[20]={},l[20]=this.element({parent:s||"root"},C===!0?b:i),r[20].image=i.image,r[20].x=36,r[20].h=20,r[20].w=20,r[20].map=i.sprite,r[20].frame=i.avgFps[2],_[20]=[],typeof A[20]<"u")for(let U in A[20][Symbol.for("config")].props)delete r[20][A[20][Symbol.for("config")].props[U]],_[20].push(A[20][Symbol.for("config")].props[U]);if(l[20].populate(r[20]),C===!0&&(E-=1),s=l[20],S[21]={},S[21].image=i.image,S[21].x=36,S[21].h=20,S[21].w=20,S[21].map=i.sprite,I=i.avgFps[2],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[21].frame=I,k=S[21].is||"Sprite",f[21],typeof k=="string"){if(f[21]=c.components&&c.components[k]||f[k],!f[21])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[21]=k);if(l[21]=f[21].call(null,{props:S[21]},l[20],i),l[21][Symbol.for("slots")][0]?(s=l[21][Symbol.for("slots")][0],b=l[21],C=!0):s=l[21][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),s=l[1],r[22]={},l[22]=this.element({parent:s||"root"},C===!0?b:i),r[22].x=0,r[22].y=40,l[22].populate(r[22]),C===!0&&(E-=1),A[23]=c.components&&c.components.Sprite||f.Sprite,s=l[22],r[23]={},l[23]=this.element({parent:s||"root"},C===!0?b:i),r[23].image=i.image,r[23].x="-2",r[23].w=47,r[23].h=25,r[23].map=i.sprite,r[23].frame="min",_[23]=[],typeof A[23]<"u")for(let U in A[23][Symbol.for("config")].props)delete r[23][A[23][Symbol.for("config")].props[U]],_[23].push(A[23][Symbol.for("config")].props[U]);if(l[23].populate(r[23]),C===!0&&(E-=1),s=l[23],S[24]={},S[24].image=i.image,S[24].x="-2",S[24].w=47,S[24].h=25,S[24].map=i.sprite,S[24].frame="min",k=S[24].is||"Sprite",f[24],typeof k=="string"){if(f[24]=c.components&&c.components[k]||f[k],!f[24])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[24]=k);if(l[24]=f[24].call(null,{props:S[24]},l[23],i),l[24][Symbol.for("slots")][0]?(s=l[24][Symbol.for("slots")][0],b=l[24],C=!0):s=l[24][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),s=l[22],r[25]={},l[25]=this.element({parent:s||"root"},C===!0?b:i),r[25].x=58,r[25].y=2,l[25].populate(r[25]),C===!0&&(E-=1),A[26]=c.components&&c.components.Sprite||f.Sprite,s=l[25],r[26]={},l[26]=this.element({parent:s||"root"},C===!0?b:i),r[26].image=i.image,r[26].x=0,r[26].h=20,r[26].w=20,r[26].map=i.sprite,r[26].frame=i.minFps[0],_[26]=[],typeof A[26]<"u")for(let U in A[26][Symbol.for("config")].props)delete r[26][A[26][Symbol.for("config")].props[U]],_[26].push(A[26][Symbol.for("config")].props[U]);if(l[26].populate(r[26]),C===!0&&(E-=1),s=l[26],S[27]={},S[27].image=i.image,S[27].x=0,S[27].h=20,S[27].w=20,S[27].map=i.sprite,I=i.minFps[0],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[27].frame=I,k=S[27].is||"Sprite",f[27],typeof k=="string"){if(f[27]=c.components&&c.components[k]||f[k],!f[27])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[27]=k);if(l[27]=f[27].call(null,{props:S[27]},l[26],i),l[27][Symbol.for("slots")][0]?(s=l[27][Symbol.for("slots")][0],b=l[27],C=!0):s=l[27][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[28]=c.components&&c.components.Sprite||f.Sprite,s=l[25],r[28]={},l[28]=this.element({parent:s||"root"},C===!0?b:i),r[28].image=i.image,r[28].x=18,r[28].h=20,r[28].w=20,r[28].map=i.sprite,r[28].frame=i.minFps[1],_[28]=[],typeof A[28]<"u")for(let U in A[28][Symbol.for("config")].props)delete r[28][A[28][Symbol.for("config")].props[U]],_[28].push(A[28][Symbol.for("config")].props[U]);if(l[28].populate(r[28]),C===!0&&(E-=1),s=l[28],S[29]={},S[29].image=i.image,S[29].x=18,S[29].h=20,S[29].w=20,S[29].map=i.sprite,I=i.minFps[1],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[29].frame=I,k=S[29].is||"Sprite",f[29],typeof k=="string"){if(f[29]=c.components&&c.components[k]||f[k],!f[29])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[29]=k);if(l[29]=f[29].call(null,{props:S[29]},l[28],i),l[29][Symbol.for("slots")][0]?(s=l[29][Symbol.for("slots")][0],b=l[29],C=!0):s=l[29][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[30]=c.components&&c.components.Sprite||f.Sprite,s=l[25],r[30]={},l[30]=this.element({parent:s||"root"},C===!0?b:i),r[30].image=i.image,r[30].x=36,r[30].h=20,r[30].w=20,r[30].map=i.sprite,r[30].frame=i.minFps[2],_[30]=[],typeof A[30]<"u")for(let U in A[30][Symbol.for("config")].props)delete r[30][A[30][Symbol.for("config")].props[U]],_[30].push(A[30][Symbol.for("config")].props[U]);if(l[30].populate(r[30]),C===!0&&(E-=1),s=l[30],S[31]={},S[31].image=i.image,S[31].x=36,S[31].h=20,S[31].w=20,S[31].map=i.sprite,I=i.minFps[2],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[31].frame=I,k=S[31].is||"Sprite",f[31],typeof k=="string"){if(f[31]=c.components&&c.components[k]||f[k],!f[31])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[31]=k);if(l[31]=f[31].call(null,{props:S[31]},l[30],i),l[31][Symbol.for("slots")][0]?(s=l[31][Symbol.for("slots")][0],b=l[31],C=!0):s=l[31][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),s=l[1],r[32]={},l[32]=this.element({parent:s||"root"},C===!0?b:i),r[32].x=150,r[32].y=40,l[32].populate(r[32]),C===!0&&(E-=1),A[33]=c.components&&c.components.Sprite||f.Sprite,s=l[32],r[33]={},l[33]=this.element({parent:s||"root"},C===!0?b:i),r[33].image=i.image,r[33].w=53,r[33].h=25,r[33].map=i.sprite,r[33].frame="max",_[33]=[],typeof A[33]<"u")for(let U in A[33][Symbol.for("config")].props)delete r[33][A[33][Symbol.for("config")].props[U]],_[33].push(A[33][Symbol.for("config")].props[U]);if(l[33].populate(r[33]),C===!0&&(E-=1),s=l[33],S[34]={},S[34].image=i.image,S[34].w=53,S[34].h=25,S[34].map=i.sprite,S[34].frame="max",k=S[34].is||"Sprite",f[34],typeof k=="string"){if(f[34]=c.components&&c.components[k]||f[k],!f[34])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[34]=k);if(l[34]=f[34].call(null,{props:S[34]},l[33],i),l[34][Symbol.for("slots")][0]?(s=l[34][Symbol.for("slots")][0],b=l[34],C=!0):s=l[34][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),s=l[32],r[35]={},l[35]=this.element({parent:s||"root"},C===!0?b:i),r[35].x=63,r[35].y=2,l[35].populate(r[35]),C===!0&&(E-=1),A[36]=c.components&&c.components.Sprite||f.Sprite,s=l[35],r[36]={},l[36]=this.element({parent:s||"root"},C===!0?b:i),r[36].image=i.image,r[36].x=0,r[36].h=20,r[36].w=20,r[36].map=i.sprite,r[36].frame=i.maxFps[0],_[36]=[],typeof A[36]<"u")for(let U in A[36][Symbol.for("config")].props)delete r[36][A[36][Symbol.for("config")].props[U]],_[36].push(A[36][Symbol.for("config")].props[U]);if(l[36].populate(r[36]),C===!0&&(E-=1),s=l[36],S[37]={},S[37].image=i.image,S[37].x=0,S[37].h=20,S[37].w=20,S[37].map=i.sprite,I=i.maxFps[0],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[37].frame=I,k=S[37].is||"Sprite",f[37],typeof k=="string"){if(f[37]=c.components&&c.components[k]||f[k],!f[37])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[37]=k);if(l[37]=f[37].call(null,{props:S[37]},l[36],i),l[37][Symbol.for("slots")][0]?(s=l[37][Symbol.for("slots")][0],b=l[37],C=!0):s=l[37][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[38]=c.components&&c.components.Sprite||f.Sprite,s=l[35],r[38]={},l[38]=this.element({parent:s||"root"},C===!0?b:i),r[38].image=i.image,r[38].x=18,r[38].h=20,r[38].w=20,r[38].map=i.sprite,r[38].frame=i.maxFps[1],_[38]=[],typeof A[38]<"u")for(let U in A[38][Symbol.for("config")].props)delete r[38][A[38][Symbol.for("config")].props[U]],_[38].push(A[38][Symbol.for("config")].props[U]);if(l[38].populate(r[38]),C===!0&&(E-=1),s=l[38],S[39]={},S[39].image=i.image,S[39].x=18,S[39].h=20,S[39].w=20,S[39].map=i.sprite,I=i.maxFps[1],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[39].frame=I,k=S[39].is||"Sprite",f[39],typeof k=="string"){if(f[39]=c.components&&c.components[k]||f[k],!f[39])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[39]=k);if(l[39]=f[39].call(null,{props:S[39]},l[38],i),l[39][Symbol.for("slots")][0]?(s=l[39][Symbol.for("slots")][0],b=l[39],C=!0):s=l[39][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[40]=c.components&&c.components.Sprite||f.Sprite,s=l[35],r[40]={},l[40]=this.element({parent:s||"root"},C===!0?b:i),r[40].image=i.image,r[40].x=36,r[40].h=20,r[40].w=20,r[40].map=i.sprite,r[40].frame=i.maxFps[2],_[40]=[],typeof A[40]<"u")for(let U in A[40][Symbol.for("config")].props)delete r[40][A[40][Symbol.for("config")].props[U]],_[40].push(A[40][Symbol.for("config")].props[U]);if(l[40].populate(r[40]),C===!0&&(E-=1),s=l[40],S[41]={},S[41].image=i.image,S[41].x=36,S[41].h=20,S[41].w=20,S[41].map=i.sprite,I=i.maxFps[2],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[41].frame=I,k=S[41].is||"Sprite",f[41],typeof k=="string"){if(f[41]=c.components&&c.components[k]||f[k],!f[41])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[41]=k);return l[41]=f[41].call(null,{props:S[41]},l[40],i),l[41][Symbol.for("slots")][0]?(s=l[41][Symbol.for("slots")][0],b=l[41],C=!0):s=l[41][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[3]=null,S[4]=null,f[4]=null,A[6]=null,S[7]=null,f[7]=null,A[8]=null,S[9]=null,f[9]=null,A[10]=null,S[11]=null,f[11]=null,A[13]=null,S[14]=null,f[14]=null,A[16]=null,S[17]=null,f[17]=null,A[18]=null,S[19]=null,f[19]=null,A[20]=null,S[21]=null,f[21]=null,A[23]=null,S[24]=null,f[24]=null,A[26]=null,S[27]=null,f[27]=null,A[28]=null,S[29]=null,f[29]=null,A[30]=null,S[31]=null,f[31]=null,A[33]=null,S[34]=null,f[34]=null,A[36]=null,S[37]=null,f[37]=null,A[38]=null,S[39]=null,f[39]=null,A[40]=null,S[41]=null,f[41]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[6]>"u"||skips[6].indexOf("frame")===-1)&&i[6].set("frame",s.fps[0])},function(s,i,c,f,v,x){i[7][Symbol.for("props")].frame=s.fps[0]},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[8]>"u"||skips[8].indexOf("frame")===-1)&&i[8].set("frame",s.fps[1])},function(s,i,c,f,v,x){i[9][Symbol.for("props")].frame=s.fps[1]},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[10]>"u"||skips[10].indexOf("frame")===-1)&&i[10].set("frame",s.fps[2])},function(s,i,c,f,v,x){i[11][Symbol.for("props")].frame=s.fps[2]},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[16]>"u"||skips[16].indexOf("frame")===-1)&&i[16].set("frame",s.avgFps[0])},function(s,i,c,f,v,x){i[17][Symbol.for("props")].frame=s.avgFps[0]},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[18]>"u"||skips[18].indexOf("frame")===-1)&&i[18].set("frame",s.avgFps[1])},function(s,i,c,f,v,x){i[19][Symbol.for("props")].frame=s.avgFps[1]},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[20]>"u"||skips[20].indexOf("frame")===-1)&&i[20].set("frame",s.avgFps[2])},function(s,i,c,f,v,x){i[21][Symbol.for("props")].frame=s.avgFps[2]},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[26]>"u"||skips[26].indexOf("frame")===-1)&&i[26].set("frame",s.minFps[0])},function(s,i,c,f,v,x){i[27][Symbol.for("props")].frame=s.minFps[0]},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[28]>"u"||skips[28].indexOf("frame")===-1)&&i[28].set("frame",s.minFps[1])},function(s,i,c,f,v,x){i[29][Symbol.for("props")].frame=s.minFps[1]},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[30]>"u"||skips[30].indexOf("frame")===-1)&&i[30].set("frame",s.minFps[2])},function(s,i,c,f,v,x){i[31][Symbol.for("props")].frame=s.minFps[2]},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[36]>"u"||skips[36].indexOf("frame")===-1)&&i[36].set("frame",s.maxFps[0])},function(s,i,c,f,v,x){i[37][Symbol.for("props")].frame=s.maxFps[0]},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[38]>"u"||skips[38].indexOf("frame")===-1)&&i[38].set("frame",s.maxFps[1])},function(s,i,c,f,v,x){i[39][Symbol.for("props")].frame=s.maxFps[1]},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[40]>"u"||skips[40].indexOf("frame")===-1)&&i[40].set("frame",s.maxFps[2])},function(s,i,c,f,v,x){i[41][Symbol.for("props")].frame=s.maxFps[2]}],context:{}},state(){return{image:JL,sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready(){}}}),ZL=()=>({Circle:KL(),RouterView:YL(),Sprite:qL(),FPScounter:QL()}),eP={name:"log",plugin(){return $3("App")}},Sy={log:eP},Ab=(h,s="",i={})=>{let c;if(typeof s=="object"?i=s:c=s,typeof h=="function"){if(c===void 0)throw Error("Error registering plugin: name is required for plugin");Sy[c]={plugin:h,options:i}}else h.plugin&&Ab(h.plugin,c||h.name,i)};let Gm;const S3=h=>{throw new Error(`Parameter ${h} is required`)},Qu=(h=S3("name"),s=S3("config"))=>{let i;const c=function(v,x,m,l){this.componentId=p_(h),this[de.effects]=[],this.lifecycle=Object.assign(Object.create(T_),{component:this,previous:null,current:null}),this.parent=m,this.rootParent=l,this[de.holder]=x,this[de.id]=g_(),this[de.props]=Xa(v.props||{},si.get("reactivityMode")),this[de.timeouts]=[],this[de.intervals]=[],this[de.originalState]=s.state&&typeof s.state=="function"&&s.state.apply(this)||{},this[de.originalState].hasFocus=!1,this[de.state]=Xa(this[de.originalState],si.get("reactivityMode")),this.lifecycle.state="init";const{elms:r,cleanup:S}=s.code.render.apply(My,[x,this,s,Gm,Vd,Ao,Mt])||{elms:[],cleanup:()=>{}};this[de.children]=r,this[de.cleanup]=S,this[de.wrapper]=this[de.children][0],this[de.slots]=this[de.children].filter(k=>k[de.isSlot]),s.hooks&&(s.hooks.frameTick&&kh.on("frameTick",(k,I)=>ty("frameTick",this[de.identifier],this,[I])),s.hooks.idle&&kh.on("idle",()=>{ty("idle",this[de.identifier],this)}),s.hooks.attach&&this[de.wrapper].node.on("inBounds",()=>{this.lifecycle.state="attach"}),s.hooks.detach&&this[de.wrapper].node.on("outOfBounds",(k,{previous:I})=>{I>0&&(this.lifecycle.state="detach")}),s.hooks.enter&&this[de.wrapper].node.on("inViewport",()=>{this.lifecycle.state="enter"}),s.hooks.exit&&this[de.wrapper].node.on("outOfBounds",()=>{this.lifecycle.state="exit"}));const _=s.code.effects;for(let k=0;k<_.length;k++){const I=()=>{_[k](this,this[de.children],s,Gm,l,Vd)};this[de.effects].push(I),Vd(I)}if(this[de.watchers]){const k=Object.keys(this[de.watchers]),I=k.length;for(let b=0;b<I;b++){let C=this,E=k[b];const A=E;if(E.indexOf(".")>-1){const R=E.split(".");E=R.pop();for(let le=0;le<R.length;le++)C=C[R[le]]}let U=this[E];const K=(R=!1)=>{const le=C[E];(U!==le||R===!0)&&(this[de.watchers][A].apply(this,[le,U]),U=le)};this[de.effects].push(K),Vd(K)}}return setTimeout(()=>this.lifecycle.state="ready"),this},f=(v={},x,m,l)=>{if(as[de.launched]===!1){const r=Object.keys(Sy),S=r.length,_={};for(let k=0;k<S;k++){const I=r[k],b=`$${I}`;b in as&&Mt.warn(`"${I}" (this.${b}) already exists as a property or plugin on the Base Component. You may be overwriting built-in functionality. Proceed with care!`);const C=Sy[I];_[b]={value:Object.defineProperties(C.plugin(C.options),kb),writable:!1,enumerable:!0,configurable:!0}}Object.defineProperties(as,_);for(const k in _)Object.defineProperties(as[k],_),delete as[k][k];Gm=ZL(),as[de.launched]=!0}return i===void 0&&(Mt.debug(`Setting up ${h} component`),i=WL(Object.create(as),s)),s.code===void 0&&(Mt.debug(`Generating code for ${h} component`),s.code=u_.call(s,s_(s.template))),c.call(Object.create(i),v,x,m,l)};return f[Symbol.for("config")]=s,f[de.isComponent]=!0,f},tP=h=>{const s={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};h.hooks=h.hooks||{};let i,c,f,v=0,x=null;return h.hooks[de.destroy]=function(){document.removeEventListener("keydown",i),document.removeEventListener("keyup",c)},h.hooks[de.init]=function(){this.$announcer.toggle(si.get("announcer",!1));const m={...s,...si.get("keymap",{})},l=si.get("inputThrottle",0);i=async S=>{const _=performance.now(),k=m[S.key]||m[S.keyCode]||S.key||S.keyCode,I=x===k;if(x=k,l===0||S[de.internalEvent]===!0||I===!1)return await r.call(this,S,k);_-v<l||(v=_,await r.call(this,S,k))};const r=async function(S,_){this[de.inputEvents]!==void 0&&this[de.inputEvents].intercept!==void 0&&(S=await this[de.inputEvents].intercept.call(this,S),!(S instanceof KeyboardEvent))||(ds.input(_,S),clearTimeout(f),f=setTimeout(()=>{ds.hold=!0},si.get("holdTimeout",db)))};c=S=>{const _=xy.get(S.code);_!==void 0&&typeof _=="function"&&(xy.delete(S.code),_()),clearTimeout(f),ds.hold=!1},document.addEventListener("keydown",i),document.addEventListener("keyup",c),setTimeout(()=>ds.set(this))},Qu("App",h)},Oe={Component:Qu,Application:tP,Launch:dL,Plugin:Ab},T3=h=>new Promise((s,i)=>{const c=new XMLHttpRequest;c.onreadystatechange=function(){c.readyState==XMLHttpRequest.DONE&&(c.status===0||c.status===200?s(JSON.parse(c.responseText)):i(c.statusText))},c.open("GET",h),c.send(null)}),nP={name:"language",plugin(h={}){let s={},i={};const c=Xa({language:"",loaded:0},si.get("reactivityMode"),!0),f=l=>{const r=Object.keys(s).length===0?"No translations loaded. Please load a file with translations or specify a translations object manually":l in s?!1:`Language ${l} not available in the loaded translations`;r?(Mt.warn(r),c.language=l):v(l).then(()=>{c.language=l})},v=l=>new Promise(r=>{const S=s[l];typeof S=="object"?(i=S,r()):typeof S=="string"&&T3(S).then(_=>{s[l]=_,i=_,r()}).catch(_=>{Mt.error(_)})}),x=l=>T3(l).then(r=>{m(r)}).catch(r=>{Mt.error(r)}),m=l=>{s=l,v(c.language).then(()=>{c.loaded++})};return"file"in h?x(h.file).then(()=>{"language"in h&&f(h.language)}):"language"in h&&f(h.language),{translate(l){c.language,c.loaded;let r=[...arguments].slice(1);return r.length===0?i&&i[l]||l:(r.length===1&&typeof r[0]=="object"&&(r=r.pop()),Object.keys(Array.isArray(r)?Object.assign({},r):r).reduce((S,_)=>S.replace(new RegExp("{\\s?"+_+"\\s?}","g"),r[_]),i&&i[l]||l))},get language(){return c.language},set(l){f(l)},translations(l){m(l)},load(l){return x(l)}}}},iP=(h,s,i)=>{const c=i.split(".");for(let f=0;f<c.length;f++){const v=c[f];if(h!==null&&v in h)h=h[v],s=s!==null&&v in s?s[v]:null;else if(s!==null&&v in s)s=s[v],h=s;else{h=void 0;break}}return h},Eb={name:"theme",plugin(h={}){let s={};const i=Xa({current:"default"},si.get("reactivityMode"),!0);let c={},f=null;return"themes"in h?(c=h.themes,i.current=h.current||"default",f=h.base||"default"):c={default:h},{get(v,x){if(i.current,s[v]!==void 0)return s[v];const m=iP(c[i.current],c[f]||null,v);return m!==void 0?(s[v]=m,m):x},set(v){v in c?(s={},i.current=v):Mt.warn(`Theme ${v} not found`)}}}};class rP{constructor(s){return s=s||{},this.forceCookies=s.forceCookies||!1,this._checkIfLocalStorageWorks()===!0&&s.forceCookies!==!0?{getItem:this._getItemLocalStorage,setItem:this._setItemLocalStorage,removeItem:this._removeItemLocalStorage,clear:this._clearLocalStorage,keys:this._getLocalStorageKeys}:{getItem:this._getItemCookie,setItem:this._setItemCookie,removeItem:this._removeItemCookie,clear:this._clearCookies,keys:this._getCookieKeys}}_checkIfLocalStorageWorks(){if(typeof localStorage<"u")try{return localStorage.setItem("feature_test","yes"),localStorage.getItem("feature_test")==="yes"?(localStorage.removeItem("feature_test"),!0):!1}catch{return!1}else return!1}_getItemLocalStorage(s){return window.localStorage.getItem(s)}_setItemLocalStorage(s,i){return window.localStorage.setItem(s,i)}_removeItemLocalStorage(s){return window.localStorage.removeItem(s)}_clearLocalStorage(){return window.localStorage.clear()}_getLocalStorageKeys(){return Object.keys(window.localStorage)}_getItemCookie(s){function i(f){return f.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")}var c=document.cookie.match(RegExp("(?:^|;\\s*)"+i(s)+"=([^;]*)"));return c&&c[1]===""&&(c[1]=null),c?c[1]:null}_setItemCookie(s,i){var c=new Date,f=new Date(c.getTime()+1e3*60*60*24*365*5);document.cookie=`${s}=${i}; expires=${f.toUTCString()};`}_removeItemCookie(s){document.cookie=`${s}=;Max-Age=-99999999;`}_clearCookies(){document.cookie.split(";").forEach(s=>{document.cookie=s.replace(/^ +/,"").replace(/=.*/,"=;expires=;Max-Age=-99999999")})}_getCookieKeys(){return document.cookie.split(";").map(s=>s.trim().split("=")[0])}}new rP;const Xm=h=>new URLSearchParams(window.location.search).get(h),Aa={sky:{test(){return navigator.userAgent.indexOf("WPE Sky")>-1||Xm("keymapping")==="sky"},mapping:{Escape:"back",27:"back"}},webos:{test(){return navigator.userAgent.indexOf("WebOS")>-1||Xm("keymapping")==="webos"},mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test(){return navigator.userAgent.indexOf("Tizen")>-1||Xm("keymapping")==="tizen"},mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},oP=()=>{let h={};return Object.keys(Aa).forEach(s=>{if(Aa[s].test&&typeof Aa[s].test=="function"&&Aa[s].test()===!0){h=Aa[s].mapping;return}}),h},sP=Oe.Component("PortalItem",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=370,r[0].h=320,r[0].scale={transition:i.hasFocus?1.1:1},r[0].color=i.backgroundColor,r[0].effects=[{type:"radius",props:{radius:6}}],l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].x=30,r[1].y=30,r[1].content=i.number,r[1].size=84,r[1].color=i.fontColor,r[1].__textnode=!0,l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].x=30,r[2].y=140,r[2].content=i.title,r[2].size=42,r[2].font="raleway",r[2].color=i.fontColor,r[2].letterspacing=2,r[2].__textnode=!0,l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].x=30,r[3].y=200,r[3].content=i.description,r[3].maxwidth=300,r[3].size=28,r[3].color=i.fontColor,r[3].lineheight=32,r[3].__textnode=!0,l[3].populate(r[3]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("scale",{transition:s.hasFocus?1.1:1})},function(s,i,c,f,v,x){i[0].set("color",s.backgroundColor)},function(s,i,c,f,v,x){i[0].set("effects",[{type:"radius",props:{radius:6}}])},function(s,i,c,f,v,x){i[1].set("content",s.number)},function(s,i,c,f,v,x){i[1].set("color",s.fontColor)},function(s,i,c,f,v,x){i[2].set("content",s.title)},function(s,i,c,f,v,x){i[2].set("color",s.fontColor)},function(s,i,c,f,v,x){i[3].set("content",s.description)},function(s,i,c,f,v,x){i[3].set("color",s.fontColor)}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),uP=Oe.Component("PortalRow",{components:{PortalItem:sP},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E,A=!1,U=[];r[0]={},l[0]=this.element({parent:s||"root"},A===!0?E:i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},A===!0?E:i),r[1].alpha={transition:{value:i.itemOffset<240?1:0,duration:200}},l[1].populate(r[1]),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},A===!0?E:i),r[2].content=i.title,r[2].x=60,r[2].__textnode=!0,l[2].populate(r[2]),s=l[1],r[3]={},l[3]=this.element({parent:s||"root"},A===!0?E:i),r[3].y=50,r[3].x=60,r[3].h=1,r[3].w=1800,r[3].color="0xe8d7f9ff",l[3].populate(r[3]),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},A===!0?E:i),r[4].y=100,r[4].x={transition:i.rowOffset},l[4].populate(r[4]),s=l[4],k[5]=[];let K,R;S[5]=(oe=[],me,D)=>{const te=x(oe),ce=new Set;let ve=te.length;const X={};for(K=X.from||0,R=("to"in X)?X.to:te.length;ve--;){const ue=te[ve];ve<R&&ve>=K&&ce.add(""+ue.id)}let ie=D.length;for(;ie--;)if(ce.has(D[ie])===!1){const ue=D[ie];me[5][ue]&&me[5][ue].destroy(),me[5][ue]=null,delete me[5][ue],me[6][ue]&&me[6][ue].destroy(),me[6][ue]=null,delete me[6][ue]}D.length=0;const W=te.length,G=[];for(let ue=0;ue<W;ue++){if(ue<K||ue>=R)continue;const Ce=Object.create(i);if(s=me[4],Ce.item=te[ue],Ce.index=ue,Ce.key=""+Ce.item.id,D.push(Ce.key),U[5]=c.components&&c.components.PortalItem||f.PortalItem,me[5]===void 0&&(me[5]={}),r[5]={},me[5][Ce.key]===void 0&&(me[5][Ce.key]=this.element({parent:s||"root"},A===!0?E:i)),r[5].x={transition:{value:Ce.itemOffset+Ce.index*430,delay:50*(Ce.index%4),duration:500}},r[5].title=Ce.item.title,r[5].description=Ce.item.description,r[5].id=Ce.item.id,r[5].index=Ce.index,r[5].ref="item"+Ce.index,I[5]=[],typeof U[5]<"u")for(let Ze in U[5][Symbol.for("config")].props)delete r[5][U[5][Symbol.for("config")].props[Ze]],I[5].push(U[5][Symbol.for("config")].props[Ze]);if(me[5][Ce.key].nodeId===void 0&&me[5][Ce.key].populate(r[5]),me[6]===void 0&&(me[6]={}),s=me[5][Ce.key],_[6]={},me[6][Ce.key]===void 0){if(C={transition:{value:Ce.itemOffset+Ce.index*430,delay:50*(Ce.index%4),duration:500}},Array.isArray(C)===!0&&(C=x(C).slice(0)),_[6].x=C,_[6].title=Ce.item.title,_[6].description=Ce.item.description,_[6].id=Ce.item.id,_[6].index=Ce.index,C="item"+Ce.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[6].ref=C,b=_[6].is||"PortalItem",f[6],typeof b=="string"){if(f[6]=c.components&&c.components[b]||f[b],!f[6])throw new Error('Component "PortalItem" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[6]=b);me[6][Ce.key]=f[6].call(null,{props:_[6]},me[5][Ce.key],i),me[6][Ce.key][Symbol.for("slots")][0]?(s=me[6][Ce.key][Symbol.for("slots")][0],E=me[6][Ce.key],A=!0):s=me[6][Ce.key][Symbol.for("children")][0]}let Fe=()=>{(typeof I>"u"||typeof I[5]>"u"||I[5].indexOf("ref")===-1)&&me[5][Ce.key].set("ref","item"+Ce.index)};v(Fe,null),G.push(Fe),i[Symbol.for("effects")].push(Fe),me[6][Ce.key][Symbol.for("props")].ref="item"+Ce.index}return G};let le=()=>{S[5](i.items,l,k[5])};i[Symbol.for("effects")].push(le),v(le,["items"]);let ge=()=>{i.itemOffset;for(let oe=0;oe<i.items.length;oe++){if(oe<K||oe>=R)continue;const me={};me.index=oe,me.item=i.items[oe],me.key=me.item.id,(typeof I>"u"||typeof I[5]>"u"||I[5].indexOf("x")===-1)&&l[5][me.key].set("x",{transition:{value:i.itemOffset+me.index*430,delay:50*(me.index%4),duration:500}})}};i[Symbol.for("effects")].push(ge),v(ge);let pe=()=>{i.itemOffset;for(let oe=0;oe<i.items.length;oe++){if(oe<K||oe>=R)continue;const me={};me.index=oe,me.item=i.items[oe],me.key=me.item.id,l[6][me.key][Symbol.for("props")].x={transition:{value:i.itemOffset+me.index*430,delay:50*(me.index%4),duration:500}}}};return i[Symbol.for("effects")].push(pe),v(pe),{elms:l,cleanup:()=>{C=null,E=null,i=null,s=null,k[5].length=0,S[5]=null,U[5]=null,_[6]=null,f[6]=null,le=null,ge=null,pe=null,U.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("alpha",{transition:{value:s.itemOffset<240?1:0,duration:200}})},function(s,i,c,f,v,x){i[4].set("x",{transition:s.rowOffset})}],context:{}},props:["title","items"],state(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(h){const s=this.$select(`item${h}`);s&&s.$focus&&(s.$focus(),h<1?this.rowOffset=60:h>this.items.length-2?this.rowOffset=60-(this.items.length-2)*430+430:this.rowOffset=60-h*430+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),Ib=Oe.Component("SourceInfo",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].x=1860,r[0].y={transition:{value:1060+i.offsetY,delay:1e3,duration:300,easing:"ease-out"}},r[0].alpha={transition:{value:i.alpha,delay:1e3,duration:300,easing:"ease-out"}},r[0].w=480,r[0].h=100,r[0].mount=1,r[0].color="{top: '0x000000dd', bottom: '0x000000ff'}",r[0].effects=[{type:"radius",props:{radius:10}}],l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].y=18,r[1].x=20,r[1].size=26,r[1].maxwidth=440,r[1].align="center",r[1].lineheight=32,r[1].content='Press "U" to check out the source code of this example on GitHub',r[1].__textnode=!0,l[1].populate(r[1]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("y",{transition:{value:1060+s.offsetY,delay:1e3,duration:300,easing:"ease-out"}})},function(s,i,c,f,v,x){i[0].set("alpha",{transition:{value:s.alpha,delay:1e3,duration:300,easing:"ease-out"}})},function(s,i,c,f,v,x){i[0].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state(){return{offsetY:15,alpha:0}},hooks:{ready(){this.offsetY=0,this.alpha=1}}}),lP="1.16.1",aP={version:lP},fP=Oe.Component("Portal",{components:{PortalRow:uP,SourceInfo:Ib},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),r[0].w=1920,r[0].h=1080,r[0].color="{top: '0x44037aff', bottom: '0x240244ff'}",l[0].populate(r[0]),C===!0&&(E-=1),A[1]=c.components&&c.components.PortalRow||f.PortalRow,s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].mount="{y: 0.5}",r[1].h=500,r[1].y={transition:-i.rowFocused*420+550},r[1].title="Demos",r[1].items=i.demo,r[1].ref="row0",_[1]=[],typeof A[1]<"u")for(let U in A[1][Symbol.for("config")].props)delete r[1][A[1][Symbol.for("config")].props[U]],_[1].push(A[1][Symbol.for("config")].props[U]);if(l[1].populate(r[1]),C===!0&&(E-=1),s=l[1],S[2]={},S[2].mount="{y: 0.5}",S[2].h=500,I={transition:-i.rowFocused*420+550},Array.isArray(I)===!0&&(I=x(I).slice(0)),S[2].y=I,S[2].title="Demos",S[2].items=i.demo,S[2].ref="row0",k=S[2].is||"PortalRow",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "PortalRow" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);if(l[2]=f[2].call(null,{props:S[2]},l[1],i),l[2][Symbol.for("slots")][0]?(s=l[2][Symbol.for("slots")][0],b=l[2],C=!0):s=l[2][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[3]=c.components&&c.components.PortalRow||f.PortalRow,s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},C===!0?b:i),r[3].mount="{y: 0.5}",r[3].h=500,r[3].y={transition:-i.rowFocused*420+1100},r[3].title="Examples and tests",r[3].items=i.example,r[3].ref="row1",_[3]=[],typeof A[3]<"u")for(let U in A[3][Symbol.for("config")].props)delete r[3][A[3][Symbol.for("config")].props[U]],_[3].push(A[3][Symbol.for("config")].props[U]);if(l[3].populate(r[3]),C===!0&&(E-=1),s=l[3],S[4]={},S[4].mount="{y: 0.5}",S[4].h=500,I={transition:-i.rowFocused*420+1100},Array.isArray(I)===!0&&(I=x(I).slice(0)),S[4].y=I,S[4].title="Examples and tests",S[4].items=i.example,S[4].ref="row1",k=S[4].is||"PortalRow",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "PortalRow" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);if(l[4]=f[4].call(null,{props:S[4]},l[3],i),l[4][Symbol.for("slots")][0]?(s=l[4][Symbol.for("slots")][0],b=l[4],C=!0):s=l[4][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[5]=c.components&&c.components.PortalRow||f.PortalRow,s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},C===!0?b:i),r[5].mount="{y: 0.5}",r[5].h=500,r[5].y={transition:-i.rowFocused*420+1650},r[5].title="Benchmarks and stress tests",r[5].items=i.benchmark,r[5].ref="row2",_[5]=[],typeof A[5]<"u")for(let U in A[5][Symbol.for("config")].props)delete r[5][A[5][Symbol.for("config")].props[U]],_[5].push(A[5][Symbol.for("config")].props[U]);if(l[5].populate(r[5]),C===!0&&(E-=1),s=l[5],S[6]={},S[6].mount="{y: 0.5}",S[6].h=500,I={transition:-i.rowFocused*420+1650},Array.isArray(I)===!0&&(I=x(I).slice(0)),S[6].y=I,S[6].title="Benchmarks and stress tests",S[6].items=i.benchmark,S[6].ref="row2",k=S[6].is||"PortalRow",f[6],typeof k=="string"){if(f[6]=c.components&&c.components[k]||f[k],!f[6])throw new Error('Component "PortalRow" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[6]=k);return l[6]=f[6].call(null,{props:S[6]},l[5],i),l[6][Symbol.for("slots")][0]?(s=l[6][Symbol.for("slots")][0],b=l[6],C=!0):s=l[6][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),s=l[0],r[7]={},l[7]=this.element({parent:s||"root"},C===!0?b:i),r[7].w=1920,r[7].h=200,r[7].color="0x44037aff",l[7].populate(r[7]),C===!0&&(E-=1),s=l[7],r[8]={},l[8]=this.element({parent:s||"root"},C===!0?b:i),r[8].w=1920,r[8].h=70,r[8].y=200,r[8].color="{top: '0x44037aff'}",l[8].populate(r[8]),C===!0&&(E-=1),s=l[7],r[9]={},l[9]=this.element({parent:s||"root"},C===!0?b:i),r[9].y={transition:{value:80-i.logoOffset,duration:400}},l[9].populate(r[9]),C===!0&&(E-=1),s=l[9],r[10]={},l[10]=this.element({parent:s||"root"},C===!0?b:i),r[10].src="assets/blits-logo-full.png",r[10].w=200,r[10].h=112,r[10].x=60,l[10].populate(r[10]),C===!0&&(E-=1),s=l[9],r[11]={},l[11]=this.element({parent:s||"root"},C===!0?b:i),r[11].w=2,r[11].h=120,r[11].y="-10",r[11].color="0xffffff80",r[11].x=300,l[11].populate(r[11]),C===!0&&(E-=1),s=l[9],r[12]={},l[12]=this.element({parent:s||"root"},C===!0?b:i),r[12].x=320,r[12].y=16,l[12].populate(r[12]),C===!0&&(E-=1),s=l[12],r[13]={},l[13]=this.element({parent:s||"root"},C===!0?b:i),r[13].y=0,r[13].size=36,r[13].content="Example App",r[13].__textnode=!0,l[13].populate(r[13]),C===!0&&(E-=1),s=l[12],r[14]={},l[14]=this.element({parent:s||"root"},C===!0?b:i),r[14].y=50,r[14].size=24,r[14].content="v"+i.version,r[14].__textnode=!0,l[14].populate(r[14]),C===!0&&(E-=1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[1]=null,S[2]=null,f[2]=null,A[3]=null,S[4]=null,f[4]=null,A[5]=null,S[6]=null,f[6]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[1]>"u"||skips[1].indexOf("y")===-1)&&i[1].set("y",{transition:-s.rowFocused*420+550})},function(s,i,c,f,v,x){i[2][Symbol.for("props")].y={transition:-s.rowFocused*420+550}},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[3]>"u"||skips[3].indexOf("y")===-1)&&i[3].set("y",{transition:-s.rowFocused*420+1100})},function(s,i,c,f,v,x){i[4][Symbol.for("props")].y={transition:-s.rowFocused*420+1100}},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[5]>"u"||skips[5].indexOf("y")===-1)&&i[5].set("y",{transition:-s.rowFocused*420+1650})},function(s,i,c,f,v,x){i[6][Symbol.for("props")].y={transition:-s.rowFocused*420+1650}},function(s,i,c,f,v,x){i[9].set("y",{transition:{value:80-s.logoOffset,duration:400}})}],context:{}},state(){return{version:aP.version,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"},{title:"Router Hooks",id:"examples/router-hooks",description:"Example of router before hook"},{title:"Image resizing",id:"examples/resize",description:'Using the "fit" syntax for resizing images on the fly'},{title:"Translations",id:"examples/translations",description:"Language Plugin for internationalization"},{title:"Firebolt",id:"examples/firebolt",description:"Example Firebolt Integration"},{title:"Keycodes",id:"examples/keycodes",description:"Find the correct keycode mappings for your device"},{title:"Special Chars",id:"examples/special-characters",description:"Accents and special characters with MSDF fonts"},{title:"Layout",id:"examples/layout",description:'Using the built-in "Layout" Component'},{title:"Announcer",id:"examples/announcer",description:'Using the built-in "Announcer" plugin'}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready(){this.logoOffset=0},focus(){this.$trigger("rowFocused")}},watch:{rowFocused(h){const s=this.$select(`row${h}`);s&&s.$focus&&s.$focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),cP=Oe.Component("Letter",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].w=i.w,r[1].h={transition:{value:410+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},r[1].color="0xe6e6e6ff",l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].w=i.w,r[2].h=280,r[2].src=i.image,r[2].y={transition:{value:400+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].w=i.w,r[3].color="0xe6e6e6ff",r[3].h={transition:{value:500-i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},r[3].y={transition:{value:660+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},l[3].populate(r[3]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("h",{transition:{value:410+s.offset,duration:s.duration,delay:s.wait,easing:s.timingFunction}})},function(s,i,c,f,v,x){i[2].set("src",s.image)},function(s,i,c,f,v,x){i[2].set("y",{transition:{value:400+s.offset,duration:s.duration,delay:s.wait,easing:s.timingFunction}})},function(s,i,c,f,v,x){i[3].set("h",{transition:{value:500-s.offset,duration:s.duration,delay:s.wait,easing:s.timingFunction}})},function(s,i,c,f,v,x){i[3].set("y",{transition:{value:660+s.offset,duration:s.duration,delay:s.wait,easing:s.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return this.letter,`assets/${this.letter}.png`}},state(){return{offset:this.direction==="up"?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),dP=Oe.Component("Intro",{components:{Letter:cP},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b=!1,C=0,E=[];if(r[0]={},l[0]=this.element({parent:s||"root"},b===!0?I:i),r[0].w=1920,r[0].h=1080,r[0].src="assets/background.jpg",l[0].populate(r[0]),b===!0&&(C-=1),E[1]=c.components&&c.components.Letter||f.Letter,s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},b===!0?I:i),r[1].letter="l",r[1].w=294,_[1]=[],typeof E[1]<"u")for(let A in E[1][Symbol.for("config")].props)delete r[1][E[1][Symbol.for("config")].props[A]],_[1].push(E[1][Symbol.for("config")].props[A]);if(l[1].populate(r[1]),b===!0&&(C-=1),s=l[1],S[2]={},S[2].letter="l",S[2].w=294,k=S[2].is||"Letter",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);if(l[2]=f[2].call(null,{props:S[2]},l[1],i),l[2][Symbol.for("slots")][0]?(s=l[2][Symbol.for("slots")][0],I=l[2],b=!0):s=l[2][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),E[3]=c.components&&c.components.Letter||f.Letter,s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},b===!0?I:i),r[3].letter="i-1",r[3].w=128,r[3].x=294,r[3].direction="up",r[3].delay=50,_[3]=[],typeof E[3]<"u")for(let A in E[3][Symbol.for("config")].props)delete r[3][E[3][Symbol.for("config")].props[A]],_[3].push(E[3][Symbol.for("config")].props[A]);if(l[3].populate(r[3]),b===!0&&(C-=1),s=l[3],S[4]={},S[4].letter="i-1",S[4].w=128,S[4].x=294,S[4].direction="up",S[4].delay=50,k=S[4].is||"Letter",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);if(l[4]=f[4].call(null,{props:S[4]},l[3],i),l[4][Symbol.for("slots")][0]?(s=l[4][Symbol.for("slots")][0],I=l[4],b=!0):s=l[4][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),E[5]=c.components&&c.components.Letter||f.Letter,s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},b===!0?I:i),r[5].letter="g-1",r[5].w=205,r[5].x=422,r[5].delay=100,_[5]=[],typeof E[5]<"u")for(let A in E[5][Symbol.for("config")].props)delete r[5][E[5][Symbol.for("config")].props[A]],_[5].push(E[5][Symbol.for("config")].props[A]);if(l[5].populate(r[5]),b===!0&&(C-=1),s=l[5],S[6]={},S[6].letter="g-1",S[6].w=205,S[6].x=422,S[6].delay=100,k=S[6].is||"Letter",f[6],typeof k=="string"){if(f[6]=c.components&&c.components[k]||f[k],!f[6])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[6]=k);if(l[6]=f[6].call(null,{props:S[6]},l[5],i),l[6][Symbol.for("slots")][0]?(s=l[6][Symbol.for("slots")][0],I=l[6],b=!0):s=l[6][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),E[7]=c.components&&c.components.Letter||f.Letter,s=l[0],r[7]={},l[7]=this.element({parent:s||"root"},b===!0?I:i),r[7].letter="h",r[7].w=224,r[7].x=627,r[7].direction="up",r[7].delay=150,_[7]=[],typeof E[7]<"u")for(let A in E[7][Symbol.for("config")].props)delete r[7][E[7][Symbol.for("config")].props[A]],_[7].push(E[7][Symbol.for("config")].props[A]);if(l[7].populate(r[7]),b===!0&&(C-=1),s=l[7],S[8]={},S[8].letter="h",S[8].w=224,S[8].x=627,S[8].direction="up",S[8].delay=150,k=S[8].is||"Letter",f[8],typeof k=="string"){if(f[8]=c.components&&c.components[k]||f[k],!f[8])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[8]=k);if(l[8]=f[8].call(null,{props:S[8]},l[7],i),l[8][Symbol.for("slots")][0]?(s=l[8][Symbol.for("slots")][0],I=l[8],b=!0):s=l[8][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),E[9]=c.components&&c.components.Letter||f.Letter,s=l[0],r[9]={},l[9]=this.element({parent:s||"root"},b===!0?I:i),r[9].letter="t",r[9].w=190,r[9].x=851,r[9].delay=200,_[9]=[],typeof E[9]<"u")for(let A in E[9][Symbol.for("config")].props)delete r[9][E[9][Symbol.for("config")].props[A]],_[9].push(E[9][Symbol.for("config")].props[A]);if(l[9].populate(r[9]),b===!0&&(C-=1),s=l[9],S[10]={},S[10].letter="t",S[10].w=190,S[10].x=851,S[10].delay=200,k=S[10].is||"Letter",f[10],typeof k=="string"){if(f[10]=c.components&&c.components[k]||f[k],!f[10])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[10]=k);if(l[10]=f[10].call(null,{props:S[10]},l[9],i),l[10][Symbol.for("slots")][0]?(s=l[10][Symbol.for("slots")][0],I=l[10],b=!0):s=l[10][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),E[11]=c.components&&c.components.Letter||f.Letter,s=l[0],r[11]={},l[11]=this.element({parent:s||"root"},b===!0?I:i),r[11].letter="n-1",r[11].w=221,r[11].x=1041,r[11].direction="up",r[11].delay=250,_[11]=[],typeof E[11]<"u")for(let A in E[11][Symbol.for("config")].props)delete r[11][E[11][Symbol.for("config")].props[A]],_[11].push(E[11][Symbol.for("config")].props[A]);if(l[11].populate(r[11]),b===!0&&(C-=1),s=l[11],S[12]={},S[12].letter="n-1",S[12].w=221,S[12].x=1041,S[12].direction="up",S[12].delay=250,k=S[12].is||"Letter",f[12],typeof k=="string"){if(f[12]=c.components&&c.components[k]||f[k],!f[12])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[12]=k);if(l[12]=f[12].call(null,{props:S[12]},l[11],i),l[12][Symbol.for("slots")][0]?(s=l[12][Symbol.for("slots")][0],I=l[12],b=!0):s=l[12][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),E[13]=c.components&&c.components.Letter||f.Letter,s=l[0],r[13]={},l[13]=this.element({parent:s||"root"},b===!0?I:i),r[13].letter="i-2",r[13].w=115,r[13].x=1262,r[13].delay=300,_[13]=[],typeof E[13]<"u")for(let A in E[13][Symbol.for("config")].props)delete r[13][E[13][Symbol.for("config")].props[A]],_[13].push(E[13][Symbol.for("config")].props[A]);if(l[13].populate(r[13]),b===!0&&(C-=1),s=l[13],S[14]={},S[14].letter="i-2",S[14].w=115,S[14].x=1262,S[14].delay=300,k=S[14].is||"Letter",f[14],typeof k=="string"){if(f[14]=c.components&&c.components[k]||f[k],!f[14])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[14]=k);if(l[14]=f[14].call(null,{props:S[14]},l[13],i),l[14][Symbol.for("slots")][0]?(s=l[14][Symbol.for("slots")][0],I=l[14],b=!0):s=l[14][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),E[15]=c.components&&c.components.Letter||f.Letter,s=l[0],r[15]={},l[15]=this.element({parent:s||"root"},b===!0?I:i),r[15].letter="n-2",r[15].w=219,r[15].x=1377,r[15].direction="up",r[15].delay=350,_[15]=[],typeof E[15]<"u")for(let A in E[15][Symbol.for("config")].props)delete r[15][E[15][Symbol.for("config")].props[A]],_[15].push(E[15][Symbol.for("config")].props[A]);if(l[15].populate(r[15]),b===!0&&(C-=1),s=l[15],S[16]={},S[16].letter="n-2",S[16].w=219,S[16].x=1377,S[16].direction="up",S[16].delay=350,k=S[16].is||"Letter",f[16],typeof k=="string"){if(f[16]=c.components&&c.components[k]||f[k],!f[16])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[16]=k);if(l[16]=f[16].call(null,{props:S[16]},l[15],i),l[16][Symbol.for("slots")][0]?(s=l[16][Symbol.for("slots")][0],I=l[16],b=!0):s=l[16][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),E[17]=c.components&&c.components.Letter||f.Letter,s=l[0],r[17]={},l[17]=this.element({parent:s||"root"},b===!0?I:i),r[17].letter="g-2",r[17].w=324,r[17].x=1596,r[17].direction="up",r[17].delay=400,_[17]=[],typeof E[17]<"u")for(let A in E[17][Symbol.for("config")].props)delete r[17][E[17][Symbol.for("config")].props[A]],_[17].push(E[17][Symbol.for("config")].props[A]);if(l[17].populate(r[17]),b===!0&&(C-=1),s=l[17],S[18]={},S[18].letter="g-2",S[18].w=324,S[18].x=1596,S[18].direction="up",S[18].delay=400,k=S[18].is||"Letter",f[18],typeof k=="string"){if(f[18]=c.components&&c.components[k]||f[k],!f[18])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[18]=k);return l[18]=f[18].call(null,{props:S[18]},l[17],i),l[18][Symbol.for("slots")][0]?(s=l[18][Symbol.for("slots")][0],I=l[18],b=!0):s=l[18][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),{elms:l,cleanup:()=>{I=null,i=null,s=null,E[1]=null,S[2]=null,f[2]=null,E[3]=null,S[4]=null,f[4]=null,E[5]=null,S[6]=null,f[6]=null,E[7]=null,S[8]=null,f[8]=null,E[9]=null,S[10]=null,f[10]=null,E[11]=null,S[12]=null,f[12]=null,E[13]=null,S[14]=null,f[14]=null,E[15]=null,S[16]=null,f[16]=null,E[17]=null,S[18]=null,f[18]=null,E.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[],context:{}}}),hP=Oe.Component("Toggle",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),r[0].w=100,r[0].h=50,r[0].y=5,r[0].color=i.bgColor,r[0].effects=[{type:"radius",props:{radius:25}}],l[0].populate(r[0]),C===!0&&(E-=1),A[1]=c.components&&c.components.Circle||f.Circle,s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].x={transition:i.on?0:50},r[1].size=50,_[1]=[],typeof A[1]<"u")for(let U in A[1][Symbol.for("config")].props)delete r[1][A[1][Symbol.for("config")].props[U]],_[1].push(A[1][Symbol.for("config")].props[U]);if(l[1].populate(r[1]),C===!0&&(E-=1),s=l[1],S[2]={},I={transition:i.on?0:50},Array.isArray(I)===!0&&(I=x(I).slice(0)),S[2].x=I,S[2].size=50,I=i.primaryColor,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[2].color=I,k=S[2].is||"Circle",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "Circle" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);return l[2]=f[2].call(null,{props:S[2]},l[1],i),l[2][Symbol.for("slots")][0]?(s=l[2][Symbol.for("slots")][0],b=l[2],C=!0):s=l[2][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[1]=null,S[2]=null,f[2]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("color",s.bgColor)},function(s,i,c,f,v,x){i[0].set("effects",[{type:"radius",props:{radius:25}}])},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[1]>"u"||skips[1].indexOf("x")===-1)&&i[1].set("x",{transition:s.on?0:50})},function(s,i,c,f,v,x){i[2][Symbol.for("props")].x={transition:s.on?0:50}},function(s,i,c,f,v,x){i[2][Symbol.for("props")].color=s.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),pP=Oe.Component("Bar",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w={value:i.w,duration:i.duration},r[0].h={value:i.h,duration:i.duration},r[0].color=i.bgColor,r[0].x=i.index*(i.w+i.w/4),r[0].effects=[{type:"radius",props:{radius:10}}],l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].w=i.w,r[1].y={transition:{value:i.h-i.innerH,duration:i.duration}},r[1].h={transition:{value:i.innerH,duration:i.duration}},r[1].color=i.primaryColor,r[1].effects=[{type:"radius",props:{radius:10}}],l[1].populate(r[1]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("w",{value:s.w,duration:s.duration})},function(s,i,c,f,v,x){i[0].set("h",{value:s.h,duration:s.duration})},function(s,i,c,f,v,x){i[0].set("color",s.bgColor)},function(s,i,c,f,v,x){i[0].set("x",s.index*(s.w+s.w/4))},function(s,i,c,f,v,x){i[0].set("effects",[{type:"radius",props:{radius:10}}])},function(s,i,c,f,v,x){i[1].set("w",s.w)},function(s,i,c,f,v,x){i[1].set("y",{transition:{value:s.h-s.innerH,duration:s.duration}})},function(s,i,c,f,v,x){i[1].set("h",{transition:{value:s.innerH,duration:s.duration}})},function(s,i,c,f,v,x){i[1].set("color",s.primaryColor)},function(s,i,c,f,v,x){i[1].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state(){return{h:200,innerH:0,duration:400}},hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size,this.size==="large"?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),gP=Oe.Component("Theming",{components:{Bar:pP,Toggle:hP},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),r[0].w=1920,r[0].h=1080,r[0].color={transition:i.$colors.get("bg")},l[0].populate(r[0]),C===!0&&(E-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].y=1020,r[1].x=1160,r[1].size=28,r[1].color=i.$colors.get("color4"),r[1].content='Use "up", "down", "left" and "right" to change the appearance',r[1].__textnode=!0,l[1].populate(r[1]),C===!0&&(E-=1),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},C===!0?b:i),r[2].x={transition:(1920-i.$sizes.get("w"))/2},r[2].y={transition:(1080-i.$sizes.get("h"))/2},l[2].populate(r[2]),C===!0&&(E-=1),s=l[2],r[3]={},l[3]=this.element({parent:s||"root"},C===!0?b:i),r[3].x="-250",r[3].y="-100",r[3].src="assets/shadow.png",r[3].w=1e3,r[3].h=900,r[3].alpha=.5,l[3].populate(r[3]),C===!0&&(E-=1),s=l[2],r[4]={},l[4]=this.element({parent:s||"root"},C===!0?b:i),r[4].w={transition:i.$sizes.get("w")},r[4].h={transition:i.$sizes.get("h")},r[4].color=i.$colors.get("color1"),r[4].effects=[{type:"radius",props:{radius:i.radius}}],l[4].populate(r[4]),C===!0&&(E-=1),s=l[4],r[5]={},l[5]=this.element({parent:s||"root"},C===!0?b:i),r[5].w={transition:i.$sizes.get("w")},r[5].h=100,r[5].color=i.$colors.get("color2"),r[5].effects=[{type:"radius",props:{radius:i.radius}}],l[5].populate(r[5]),C===!0&&(E-=1),s=l[4],r[6]={},l[6]=this.element({parent:s||"root"},C===!0?b:i),r[6].w={transition:i.$sizes.get("w")},r[6].h=80,r[6].y=20,r[6].color=i.$colors.get("color2"),l[6].populate(r[6]),C===!0&&(E-=1),s=l[4],r[7]={},l[7]=this.element({parent:s||"root"},C===!0?b:i),r[7].content=i.text,r[7].color=i.$colors.get("color3"),r[7].size=28,r[7].x=20,r[7].y=14,r[7].__textnode=!0,l[7].populate(r[7]),C===!0&&(E-=1),A[8]=c.components&&c.components.Toggle||f.Toggle,s=l[4],r[8]={},l[8]=this.element({parent:s||"root"},C===!0?b:i),r[8].x={transition:i.$sizes.get("w")-120},r[8].on=i.mode==="dark",r[8].bgColor=i.$colors.get("color1"),r[8].primaryColor="#22c55e",_[8]=[],typeof A[8]<"u")for(let U in A[8][Symbol.for("config")].props)delete r[8][A[8][Symbol.for("config")].props[U]],_[8].push(A[8][Symbol.for("config")].props[U]);if(l[8].populate(r[8]),C===!0&&(E-=1),s=l[8],S[9]={},I={transition:i.$sizes.get("w")-120},Array.isArray(I)===!0&&(I=x(I).slice(0)),S[9].x=I,I=i.mode==="dark",Array.isArray(I)===!0&&(I=x(I).slice(0)),S[9].on=I,I=i.$colors.get("color1"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[9].bgColor=I,S[9].primaryColor="#22c55e",k=S[9].is||"Toggle",f[9],typeof k=="string"){if(f[9]=c.components&&c.components[k]||f[k],!f[9])throw new Error('Component "Toggle" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[9]=k);if(l[9]=f[9].call(null,{props:S[9]},l[8],i),l[9][Symbol.for("slots")][0]?(s=l[9][Symbol.for("slots")][0],b=l[9],C=!0):s=l[9][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),s=l[2],r[10]={},l[10]=this.element({parent:s||"root"},C===!0?b:i),r[10].w=200,r[10].h={transition:i.$sizes.get("block1.h")},r[10].x=25,r[10].y=140,r[10].color=i.$colors.get("color2"),r[10].effects=[{type:"radius",props:{radius:i.radius/2}}],l[10].populate(r[10]),C===!0&&(E-=1),s=l[2],r[11]={},l[11]=this.element({parent:s||"root"},C===!0?b:i),r[11].w={transition:i.$sizes.get("block2.w")},r[11].h=i.$sizes.get("block2.h"),r[11].x=270,r[11].y={transition:i.$sizes.get("block2.y")},r[11].color=i.$colors.get("color2"),r[11].effects=[{type:"radius",props:{radius:i.radius/2}}],l[11].populate(r[11]),C===!0&&(E-=1),s=l[2],r[12]={},l[12]=this.element({parent:s||"root"},C===!0?b:i),r[12].x={transition:i.$sizes.get("graph.x")},r[12].y={transition:i.$sizes.get("graph.y")},r[12].w=i.$sizes.get("graph.w"),r[12].h=i.$sizes.get("graph.h"),r[12].color="0x00000000",l[12].populate(r[12]),C===!0&&(E-=1),s=l[12],r[13]={},l[13]=this.element({parent:s||"root"},C===!0?b:i),r[13].x={transition:i.$sizes.get("graph.offset")},r[13].y={transition:i.$sizes.get("graph.offset")},l[13].populate(r[13]),C===!0&&(E-=1),A[14]=c.components&&c.components.Bar||f.Bar,s=l[13],r[14]={},l[14]=this.element({parent:s||"root"},C===!0?b:i),r[14].bgColor=i.$colors.get("color2"),r[14].primaryColor=i.$colors.get("color4"),r[14].size=i.$sizes.get("graph.size"),r[14].height=100,r[14].index=0,_[14]=[],typeof A[14]<"u")for(let U in A[14][Symbol.for("config")].props)delete r[14][A[14][Symbol.for("config")].props[U]],_[14].push(A[14][Symbol.for("config")].props[U]);if(l[14].populate(r[14]),C===!0&&(E-=1),s=l[14],S[15]={},I=i.$colors.get("color2"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[15].bgColor=I,I=i.$colors.get("color4"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[15].primaryColor=I,I=i.$sizes.get("graph.size"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[15].size=I,S[15].height=100,S[15].index=0,k=S[15].is||"Bar",f[15],typeof k=="string"){if(f[15]=c.components&&c.components[k]||f[k],!f[15])throw new Error('Component "Bar" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[15]=k);if(l[15]=f[15].call(null,{props:S[15]},l[14],i),l[15][Symbol.for("slots")][0]?(s=l[15][Symbol.for("slots")][0],b=l[15],C=!0):s=l[15][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[16]=c.components&&c.components.Bar||f.Bar,s=l[13],r[16]={},l[16]=this.element({parent:s||"root"},C===!0?b:i),r[16].bgColor=i.$colors.get("color2"),r[16].primaryColor=i.$colors.get("color4"),r[16].size=i.$sizes.get("graph.size"),r[16].height=140,r[16].index=1,_[16]=[],typeof A[16]<"u")for(let U in A[16][Symbol.for("config")].props)delete r[16][A[16][Symbol.for("config")].props[U]],_[16].push(A[16][Symbol.for("config")].props[U]);if(l[16].populate(r[16]),C===!0&&(E-=1),s=l[16],S[17]={},I=i.$colors.get("color2"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[17].bgColor=I,I=i.$colors.get("color4"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[17].primaryColor=I,I=i.$sizes.get("graph.size"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[17].size=I,S[17].height=140,S[17].index=1,k=S[17].is||"Bar",f[17],typeof k=="string"){if(f[17]=c.components&&c.components[k]||f[k],!f[17])throw new Error('Component "Bar" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[17]=k);if(l[17]=f[17].call(null,{props:S[17]},l[16],i),l[17][Symbol.for("slots")][0]?(s=l[17][Symbol.for("slots")][0],b=l[17],C=!0):s=l[17][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[18]=c.components&&c.components.Bar||f.Bar,s=l[13],r[18]={},l[18]=this.element({parent:s||"root"},C===!0?b:i),r[18].bgColor=i.$colors.get("color2"),r[18].primaryColor=i.$colors.get("color4"),r[18].size=i.$sizes.get("graph.size"),r[18].height=170,r[18].index=2,_[18]=[],typeof A[18]<"u")for(let U in A[18][Symbol.for("config")].props)delete r[18][A[18][Symbol.for("config")].props[U]],_[18].push(A[18][Symbol.for("config")].props[U]);if(l[18].populate(r[18]),C===!0&&(E-=1),s=l[18],S[19]={},I=i.$colors.get("color2"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[19].bgColor=I,I=i.$colors.get("color4"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[19].primaryColor=I,I=i.$sizes.get("graph.size"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[19].size=I,S[19].height=170,S[19].index=2,k=S[19].is||"Bar",f[19],typeof k=="string"){if(f[19]=c.components&&c.components[k]||f[k],!f[19])throw new Error('Component "Bar" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[19]=k);if(l[19]=f[19].call(null,{props:S[19]},l[18],i),l[19][Symbol.for("slots")][0]?(s=l[19][Symbol.for("slots")][0],b=l[19],C=!0):s=l[19][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[20]=c.components&&c.components.Bar||f.Bar,s=l[13],r[20]={},l[20]=this.element({parent:s||"root"},C===!0?b:i),r[20].bgColor=i.$colors.get("color2"),r[20].primaryColor=i.$colors.get("color4"),r[20].size=i.$sizes.get("graph.size"),r[20].height=150,r[20].index=3,_[20]=[],typeof A[20]<"u")for(let U in A[20][Symbol.for("config")].props)delete r[20][A[20][Symbol.for("config")].props[U]],_[20].push(A[20][Symbol.for("config")].props[U]);if(l[20].populate(r[20]),C===!0&&(E-=1),s=l[20],S[21]={},I=i.$colors.get("color2"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[21].bgColor=I,I=i.$colors.get("color4"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[21].primaryColor=I,I=i.$sizes.get("graph.size"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[21].size=I,S[21].height=150,S[21].index=3,k=S[21].is||"Bar",f[21],typeof k=="string"){if(f[21]=c.components&&c.components[k]||f[k],!f[21])throw new Error('Component "Bar" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[21]=k);if(l[21]=f[21].call(null,{props:S[21]},l[20],i),l[21][Symbol.for("slots")][0]?(s=l[21][Symbol.for("slots")][0],b=l[21],C=!0):s=l[21][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[22]=c.components&&c.components.Bar||f.Bar,s=l[13],r[22]={},l[22]=this.element({parent:s||"root"},C===!0?b:i),r[22].bgColor=i.$colors.get("color2"),r[22].primaryColor=i.$colors.get("color4"),r[22].size=i.$sizes.get("graph.size"),r[22].height=90,r[22].index=4,_[22]=[],typeof A[22]<"u")for(let U in A[22][Symbol.for("config")].props)delete r[22][A[22][Symbol.for("config")].props[U]],_[22].push(A[22][Symbol.for("config")].props[U]);if(l[22].populate(r[22]),C===!0&&(E-=1),s=l[22],S[23]={},I=i.$colors.get("color2"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[23].bgColor=I,I=i.$colors.get("color4"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[23].primaryColor=I,I=i.$sizes.get("graph.size"),Array.isArray(I)===!0&&(I=x(I).slice(0)),S[23].size=I,S[23].height=90,S[23].index=4,k=S[23].is||"Bar",f[23],typeof k=="string"){if(f[23]=c.components&&c.components[k]||f[k],!f[23])throw new Error('Component "Bar" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[23]=k);return l[23]=f[23].call(null,{props:S[23]},l[22],i),l[23][Symbol.for("slots")][0]?(s=l[23][Symbol.for("slots")][0],b=l[23],C=!0):s=l[23][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[8]=null,S[9]=null,f[9]=null,A[14]=null,S[15]=null,f[15]=null,A[16]=null,S[17]=null,f[17]=null,A[18]=null,S[19]=null,f[19]=null,A[20]=null,S[21]=null,f[21]=null,A[22]=null,S[23]=null,f[23]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("color",{transition:s.$colors.get("bg")})},function(s,i,c,f,v,x){i[1].set("color",s.$colors.get("color4"))},function(s,i,c,f,v,x){i[2].set("x",{transition:(1920-s.$sizes.get("w"))/2})},function(s,i,c,f,v,x){i[2].set("y",{transition:(1080-s.$sizes.get("h"))/2})},function(s,i,c,f,v,x){i[4].set("w",{transition:s.$sizes.get("w")})},function(s,i,c,f,v,x){i[4].set("h",{transition:s.$sizes.get("h")})},function(s,i,c,f,v,x){i[4].set("color",s.$colors.get("color1"))},function(s,i,c,f,v,x){i[4].set("effects",[{type:"radius",props:{radius:s.radius}}])},function(s,i,c,f,v,x){i[5].set("w",{transition:s.$sizes.get("w")})},function(s,i,c,f,v,x){i[5].set("color",s.$colors.get("color2"))},function(s,i,c,f,v,x){i[5].set("effects",[{type:"radius",props:{radius:s.radius}}])},function(s,i,c,f,v,x){i[6].set("w",{transition:s.$sizes.get("w")})},function(s,i,c,f,v,x){i[6].set("color",s.$colors.get("color2"))},function(s,i,c,f,v,x){i[7].set("content",s.text)},function(s,i,c,f,v,x){i[7].set("color",s.$colors.get("color3"))},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[8]>"u"||skips[8].indexOf("x")===-1)&&i[8].set("x",{transition:s.$sizes.get("w")-120})},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[8]>"u"||skips[8].indexOf("on")===-1)&&i[8].set("on",s.mode==="dark")},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[8]>"u"||skips[8].indexOf("bgColor")===-1)&&i[8].set("bgColor",s.$colors.get("color1"))},function(s,i,c,f,v,x){i[9][Symbol.for("props")].x={transition:s.$sizes.get("w")-120}},function(s,i,c,f,v,x){i[9][Symbol.for("props")].on=s.mode==="dark"},function(s,i,c,f,v,x){i[9][Symbol.for("props")].bgColor=s.$colors.get("color1")},function(s,i,c,f,v,x){i[10].set("h",{transition:s.$sizes.get("block1.h")})},function(s,i,c,f,v,x){i[10].set("color",s.$colors.get("color2"))},function(s,i,c,f,v,x){i[10].set("effects",[{type:"radius",props:{radius:s.radius/2}}])},function(s,i,c,f,v,x){i[11].set("w",{transition:s.$sizes.get("block2.w")})},function(s,i,c,f,v,x){i[11].set("h",s.$sizes.get("block2.h"))},function(s,i,c,f,v,x){i[11].set("y",{transition:s.$sizes.get("block2.y")})},function(s,i,c,f,v,x){i[11].set("color",s.$colors.get("color2"))},function(s,i,c,f,v,x){i[11].set("effects",[{type:"radius",props:{radius:s.radius/2}}])},function(s,i,c,f,v,x){i[12].set("x",{transition:s.$sizes.get("graph.x")})},function(s,i,c,f,v,x){i[12].set("y",{transition:s.$sizes.get("graph.y")})},function(s,i,c,f,v,x){i[12].set("w",s.$sizes.get("graph.w"))},function(s,i,c,f,v,x){i[12].set("h",s.$sizes.get("graph.h"))},function(s,i,c,f,v,x){i[13].set("x",{transition:s.$sizes.get("graph.offset")})},function(s,i,c,f,v,x){i[13].set("y",{transition:s.$sizes.get("graph.offset")})},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[14]>"u"||skips[14].indexOf("bgColor")===-1)&&i[14].set("bgColor",s.$colors.get("color2"))},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[14]>"u"||skips[14].indexOf("primaryColor")===-1)&&i[14].set("primaryColor",s.$colors.get("color4"))},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[14]>"u"||skips[14].indexOf("size")===-1)&&i[14].set("size",s.$sizes.get("graph.size"))},function(s,i,c,f,v,x){i[15][Symbol.for("props")].bgColor=s.$colors.get("color2")},function(s,i,c,f,v,x){i[15][Symbol.for("props")].primaryColor=s.$colors.get("color4")},function(s,i,c,f,v,x){i[15][Symbol.for("props")].size=s.$sizes.get("graph.size")},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[16]>"u"||skips[16].indexOf("bgColor")===-1)&&i[16].set("bgColor",s.$colors.get("color2"))},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[16]>"u"||skips[16].indexOf("primaryColor")===-1)&&i[16].set("primaryColor",s.$colors.get("color4"))},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[16]>"u"||skips[16].indexOf("size")===-1)&&i[16].set("size",s.$sizes.get("graph.size"))},function(s,i,c,f,v,x){i[17][Symbol.for("props")].bgColor=s.$colors.get("color2")},function(s,i,c,f,v,x){i[17][Symbol.for("props")].primaryColor=s.$colors.get("color4")},function(s,i,c,f,v,x){i[17][Symbol.for("props")].size=s.$sizes.get("graph.size")},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[18]>"u"||skips[18].indexOf("bgColor")===-1)&&i[18].set("bgColor",s.$colors.get("color2"))},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[18]>"u"||skips[18].indexOf("primaryColor")===-1)&&i[18].set("primaryColor",s.$colors.get("color4"))},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[18]>"u"||skips[18].indexOf("size")===-1)&&i[18].set("size",s.$sizes.get("graph.size"))},function(s,i,c,f,v,x){i[19][Symbol.for("props")].bgColor=s.$colors.get("color2")},function(s,i,c,f,v,x){i[19][Symbol.for("props")].primaryColor=s.$colors.get("color4")},function(s,i,c,f,v,x){i[19][Symbol.for("props")].size=s.$sizes.get("graph.size")},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[20]>"u"||skips[20].indexOf("bgColor")===-1)&&i[20].set("bgColor",s.$colors.get("color2"))},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[20]>"u"||skips[20].indexOf("primaryColor")===-1)&&i[20].set("primaryColor",s.$colors.get("color4"))},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[20]>"u"||skips[20].indexOf("size")===-1)&&i[20].set("size",s.$sizes.get("graph.size"))},function(s,i,c,f,v,x){i[21][Symbol.for("props")].bgColor=s.$colors.get("color2")},function(s,i,c,f,v,x){i[21][Symbol.for("props")].primaryColor=s.$colors.get("color4")},function(s,i,c,f,v,x){i[21][Symbol.for("props")].size=s.$sizes.get("graph.size")},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[22]>"u"||skips[22].indexOf("bgColor")===-1)&&i[22].set("bgColor",s.$colors.get("color2"))},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[22]>"u"||skips[22].indexOf("primaryColor")===-1)&&i[22].set("primaryColor",s.$colors.get("color4"))},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[22]>"u"||skips[22].indexOf("size")===-1)&&i[22].set("size",s.$sizes.get("graph.size"))},function(s,i,c,f,v,x){i[23][Symbol.for("props")].bgColor=s.$colors.get("color2")},function(s,i,c,f,v,x){i[23][Symbol.for("props")].primaryColor=s.$colors.get("color4")},function(s,i,c,f,v,x){i[23][Symbol.for("props")].size=s.$sizes.get("graph.size")}],context:{}},state(){return{mode:"dark",sizes:"small",radius:20}},watch:{mode(h){this.$colors.set(h)},sizes(h){this.$sizes.set(h)}},computed:{text(){return this.mode,this.mode==="dark"?"Dark mode":"Light mode"}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.sizes="large"},down(){this.sizes="small"}}}),mP="ABC123",yP="https://8b4fa39d.lightningjs.workers.dev";let Mb,Rb;const vP="w185",xP={headers:{"Content-Type":"application/json",Authorization:"Bearer "+mP}};function C3(h,s=vP){return Rb+s+h}function wP(...h){return Mb?Ty(...h):_b().then(()=>Ty(...h))}function Ty(h,s={}){return fetch(yP+h,{...xP,...s}).then(i=>i.json())}function _b(){return Ty("/configuration").then(h=>(Mb=h,Rb=h.images.secure_base_url,h))}const Ly={get:wP,loadConfig:_b},b3=h=>Ly.get(`/${h}/popular`).then(Lb),Lb=h=>h.results.filter(i=>!i.adult).map(i=>({poster:C3(i.poster_path||i.profile_path),background:C3(i.backdrop_path,"w1280"),identifier:i.id,title:i.title||i.name,overview:i.overview})),Ea=h=>{const s=Array.isArray(h)?h:[h];return SP("movie").then(({genres:i})=>{let c=[];return i.forEach(f=>{s.includes(f.name)&&c.push(f.id)}),Ly.get(`/discover/movie?with_genres=${c.join()}`).then(Lb)})},SP=h=>Ly.get(`/genre/${h}/list`),TP=Oe.Component("Poster",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=1280,r[0].h=720,r[0].x=i.x,r[0].src=i.item.background,r[0].color="{top: '0xffffffff', bottom: '0x000000ff'}",r[0].scale={transition:{value:i.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},r[0]._effects=[{type:"radius",props:{radius:8}}],l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l[1].populate(r[1]),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].w=185,r[2].h=278,r[2].x=54,r[2].y=220,r[2].src=i.item.poster,l[2].populate(r[2]),s=l[1],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].content=i.item.title,r[3].font="raleway",r[3].y=520,r[3].x=54,r[3].size=64,r[3].maxwidth=1e3,r[3].maxlines=1,r[3].__textnode=!0,l[3].populate(r[3]),s=l[1],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].content=i.item.overview,r[4].size=21,r[4].y=620,r[4].x=60,r[4].color="0xccccccff",r[4].maxwidth=1e3,r[4].maxlines=2,r[4].lineheight=36,r[4].__textnode=!0,l[4].populate(r[4]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("src",s.item.background)},function(s,i,c,f,v,x){i[0].set("scale",{transition:{value:s.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(s,i,c,f,v,x){i[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(s,i,c,f,v,x){i[1].set("alpha",{transition:{value:s.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(s,i,c,f,v,x){i[2].set("src",s.item.poster)},function(s,i,c,f,v,x){i[3].set("content",s.item.title)},function(s,i,c,f,v,x){i[4].set("content",s.item.overview)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,zIndex:1,alpha:0}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1},unfocus(){this.scale=1,this.alpha=0}}}),CP=Oe.Component("Poster",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=185,r[0].h=278,r[0].x=i.x,r[0].src=i.item.poster,r[0].scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},r[0]._effects=[{type:"radius",props:{radius:8}}],l[0].populate(r[0]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("src",s.item.poster)},function(s,i,c,f,v,x){i[0].set("scale",{transition:{value:s.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(s,i,c,f,v,x){i[0].set("_effects",[{type:"radius",props:{radius:8}}])}],context:{}},props:["src","index","item","width"],state(){return{scale:1,color:"#333"}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.color="#fff",this.scale=1.1},unfocus(){this.color="#333",this.scale=1}}}),bP=Oe.Component("PosterTitle",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=185,r[0].h=278,r[0].x=i.x,r[0].src=i.item.poster,r[0].scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},r[0]._effects=[{type:"radius",props:{radius:8}}],l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].x=10,r[1].y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},r[1].alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l[1].populate(r[1]),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].content=i.item.title,r[2].font="raleway",r[2].size=22,r[2].maxwidth=185,r[2].maxlines=2,r[2].lineheight=28,r[2].__textnode=!0,l[2].populate(r[2]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("src",s.item.poster)},function(s,i,c,f,v,x){i[0].set("scale",{transition:{value:s.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(s,i,c,f,v,x){i[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(s,i,c,f,v,x){i[1].set("y",{transition:{value:s.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(s,i,c,f,v,x){i[1].set("alpha",{transition:{value:s.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(s,i,c,f,v,x){i[2].set("content",s.item.title)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,alpha:0,y:278}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1,this.y=288},unfocus(){this.scale=1,this.alpha=0,this.y=278}}}),kP=Oe.Component("TmdbRow",{components:{Hero:TP,Poster:CP,PosterTitle:bP},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E=!1,A=[];r[0]={},l[0]=this.element({parent:s||"root"},E===!0?C:i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},E===!0?C:i),r[1].x={transition:{value:i.x,duration:300,easing:"ease-in-out"}},r[1].y=80,l[1].populate(r[1]),s=l[1],k[2]=[];let U,K;S[2]=(le=[],ge,pe)=>{const oe=x(le),me=new Set;let D=oe.length;const te={};for(U=te.from||0,K=("to"in te)?te.to:oe.length;D--;){const ie=oe[D];D<K&&D>=U&&me.add(""+ie.identifier)}let ce=pe.length;for(;ce--;)if(me.has(pe[ce])===!1){const ie=pe[ce];ge[2][ie]&&ge[2][ie].destroy(),ge[2][ie]=null,delete ge[2][ie],ge[3][ie]&&ge[3][ie].destroy(),ge[3][ie]=null,delete ge[3][ie]}pe.length=0;const ve=oe.length,X=[];for(let ie=0;ie<ve;ie++){if(ie<U||ie>=K)continue;const W=Object.create(i);if(s=ge[1],W.item=oe[ie],W.index=ie,W.key=""+W.item.identifier,W.__ref="poster"+ie,pe.push(W.key),A[2]=c.components&&c.components.Component||f.Component,ge[2]===void 0&&(ge[2]={}),r[2]={},ge[2][W.key]===void 0&&(ge[2][W.key]=this.element({parent:s||"root"},E===!0?C:i)),r[2].is=W.type,r[2].index=W.index,r[2].item=W.item,r[2].ref=W.__ref,r[2].width=W.width,I[2]=[],typeof A[2]<"u")for(let G in A[2][Symbol.for("config")].props)delete r[2][A[2][Symbol.for("config")].props[G]],I[2].push(A[2][Symbol.for("config")].props[G]);if(ge[2][W.key].nodeId===void 0&&ge[2][W.key].populate(r[2]),ge[3]===void 0&&(ge[3]={}),s=ge[2][W.key],_[3]={},ge[3][W.key]===void 0){if(_[3].is=W.type,_[3].index=W.index,_[3].item=W.item,_[3].ref=W.__ref,_[3].width=W.width,b=_[3].is||"Component",f[3],typeof b=="string"){if(f[3]=c.components&&c.components[b]||f[b],!f[3])throw new Error('Component "Component" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[3]=b);ge[3][W.key]=f[3].call(null,{props:_[3]},ge[2][W.key],i),ge[3][W.key][Symbol.for("slots")][0]?(s=ge[3][W.key][Symbol.for("slots")][0],C=ge[3][W.key],E=!0):s=ge[3][W.key][Symbol.for("children")][0]}}return X};let R=()=>{S[2](i.items,l,k[2])};return i[Symbol.for("effects")].push(R),v(R,["items"]),{elms:l,cleanup:()=>{C=null,i=null,s=null,k[2].length=0,S[2]=null,A[2]=null,_[3]=null,f[3]=null,R=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("x",{transition:{value:s.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state(){return{focused:0,offset:0}},hooks:{focus(){this.$trigger("focused")}},computed:{x(){return this.focused,this.items,this.width,150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused(h){const s=this.$select("poster"+h);s&&s.$focus&&(s.$focus(),this.$emit("posterSelect",this.items[h]))}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),AP=Oe.Component("Background",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].src=i.bg1,r[1].w=1920,r[1].h=1080,r[1].color="{top: '0xffffffff', bottom: '0x000000ff'}",r[1].alpha={transition:{value:i.alpha1,duration:400,easing:"ease-in"}},l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].src=i.bg2,r[2].w=1920,r[2].h=1080,r[2].color="{top: '0xffffffff', bottom: '0x000000ff'}",r[2].alpha={transition:{value:i.alpha2,duration:400,easing:"ease-in"}},l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].w=1920,r[3].h=1080,r[3].src="assets/gradient.png",r[3].color="0x8866ddff",r[3].alpha=.8,l[3].populate(r[3]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("src",s.bg1)},function(s,i,c,f,v,x){i[1].set("alpha",{transition:{value:s.alpha1,duration:400,easing:"ease-in"}})},function(s,i,c,f,v,x){i[2].set("src",s.bg2)},function(s,i,c,f,v,x){i[2].set("alpha",{transition:{value:s.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["bgImg"],state(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{bgImg(h){this.counter=(this.counter+1)%2,this.counter===0?(this.bg1=h,this.alpha1=.8,this.alpha2=0):(this.bg2=h,this.alpha1=0,this.alpha2=.8)}}}),EP=Oe.Component("TMdb",{components:{Background:AP,TmdbRow:kP},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E,A=!1,U=0,K=[];if(r[0]={},l[0]=this.element({parent:s||"root"},A===!0?E:i),r[0].w=1920,r[0].h=1080,r[0].color="0x000000ff",l[0].populate(r[0]),A===!0&&(U-=1),K[1]=c.components&&c.components.Background||f.Background,s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},A===!0?E:i),r[1].bgImg=i.src,I[1]=[],typeof K[1]<"u")for(let pe in K[1][Symbol.for("config")].props)delete r[1][K[1][Symbol.for("config")].props[pe]],I[1].push(K[1][Symbol.for("config")].props[pe]);if(l[1].populate(r[1]),A===!0&&(U-=1),s=l[1],_[2]={},C=i.src,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[2].bgImg=C,b=_[2].is||"Background",f[2],typeof b=="string"){if(f[2]=c.components&&c.components[b]||f[b],!f[2])throw new Error('Component "Background" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[2]=b);l[2]=f[2].call(null,{props:_[2]},l[1],i),l[2][Symbol.for("slots")][0]?(s=l[2][Symbol.for("slots")][0],E=l[2],A=!0):s=l[2][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},A===!0?E:i),l[3].populate(r[3]),A===!0&&(U-=1),s=l[3],r[4]={},l[4]=this.element({parent:s||"root"},A===!0?E:i),r[4].y={transition:{value:i.contentY,duration:i.duration}},r[4].alpha={transition:{value:i.alpha,duration:i.duration}},l[4].populate(r[4]),A===!0&&(U-=1),s=l[4],r[5]={},l[5]=this.element({parent:s||"root"},A===!0?E:i),r[5].src="assets/logo.png",r[5].x=140,r[5].y=90,r[5].w=243,r[5].h=52,l[5].populate(r[5]),A===!0&&(U-=1),s=l[4],r[6]={},l[6]=this.element({parent:s||"root"},A===!0?E:i),r[6].content=i.title,r[6].font="raleway",r[6].size=80,r[6].x=140,r[6].y=300,r[6].maxwidth=1e3,r[6]["@loaded"]=i.positionText&&i.positionText.bind(i),r[6].maxlines=1,r[6].__textnode=!0,l[6].populate(r[6]),A===!0&&(U-=1),s=l[4],r[7]={},l[7]=this.element({parent:s||"root"},A===!0?E:i),r[7].content=i.overview,r[7].maxwidth=880,r[7].x=140,r[7].y=430,r[7].lineheight=40,r[7].maxlines=3,r[7].__textnode=!0,l[7].populate(r[7]),A===!0&&(U-=1),s=l[3],r[8]={},l[8]=this.element({parent:s||"root"},A===!0?E:i),r[8].y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},l[8].populate(r[8]),A===!0&&(U-=1),s=l[8],k[9]=[];let R,le;S[9]=(pe=[],oe,me)=>{const D=x(pe),te=new Set;let ce=D.length;const ve={};for(R=ve.from||0,le=("to"in ve)?ve.to:D.length;ce--;){const G=D[ce];ce<le&&ce>=R&&te.add(""+G.title)}let X=me.length;for(;X--;)if(te.has(me[X])===!1){const G=me[X];oe[9][G]&&oe[9][G].destroy(),oe[9][G]=null,delete oe[9][G],oe[10][G]&&oe[10][G].destroy(),oe[10][G]=null,delete oe[10][G]}me.length=0;const ie=D.length,W=[];for(let G=0;G<ie;G++){if(G<R||G>=le)continue;const ue=Object.create(i);if(s=oe[8],ue.row=D[G],ue.index=G,ue.key=""+ue.row.title,ue.__ref="row"+G,me.push(ue.key),K[9]=c.components&&c.components.TmdbRow||f.TmdbRow,oe[9]===void 0&&(oe[9]={}),r[9]={},oe[9][ue.key]===void 0&&(oe[9][ue.key]=this.element({parent:s||"root"},A===!0?E:i)),r[9].title=ue.row.title,r[9].items=ue.row.items,r[9].type=ue.row.type,r[9].width=ue.row.width,r[9].y=ue.row.y,r[9].ref=ue.__ref,I[9]=[],typeof K[9]<"u")for(let je in K[9][Symbol.for("config")].props)delete r[9][K[9][Symbol.for("config")].props[je]],I[9].push(K[9][Symbol.for("config")].props[je]);if(oe[9][ue.key].nodeId===void 0&&(oe[9][ue.key].populate(r[9]),A===!0&&(U-=1)),oe[10]===void 0&&(oe[10]={}),s=oe[9][ue.key],_[10]={},oe[10][ue.key]===void 0){if(_[10].title=ue.row.title,C=ue.row.items,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[10].items=C,C=ue.row.type,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[10].type=C,C=ue.row.width,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[10].width=C,_[10].y=ue.row.y,_[10].ref=ue.__ref,b=_[10].is||"TmdbRow",f[10],typeof b=="string"){if(f[10]=c.components&&c.components[b]||f[b],!f[10])throw new Error('Component "TmdbRow" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[10]=b);oe[10][ue.key]=f[10].call(null,{props:_[10]},oe[9][ue.key],i),oe[10][ue.key][Symbol.for("slots")][0]?(s=oe[10][ue.key][Symbol.for("slots")][0],E=oe[10][ue.key],A=!0):s=oe[10][ue.key][Symbol.for("children")][0]}let Ce=()=>{(typeof I>"u"||typeof I[9]>"u"||I[9].indexOf("items")===-1)&&oe[9][ue.key].set("items",ue.row.items)};v(Ce,null),W.push(Ce),i[Symbol.for("effects")].push(Ce);let Fe=()=>{(typeof I>"u"||typeof I[9]>"u"||I[9].indexOf("type")===-1)&&oe[9][ue.key].set("type",ue.row.type)};v(Fe,null),W.push(Fe),i[Symbol.for("effects")].push(Fe);let Ze=()=>{(typeof I>"u"||typeof I[9]>"u"||I[9].indexOf("width")===-1)&&oe[9][ue.key].set("width",ue.row.width)};v(Ze,null),W.push(Ze),i[Symbol.for("effects")].push(Ze),oe[10][ue.key][Symbol.for("props")].items=ue.row.items,oe[10][ue.key][Symbol.for("props")].type=ue.row.type,oe[10][ue.key][Symbol.for("props")].width=ue.row.width}return W};let ge=()=>{S[9](i.rows,l,k[9])};return i[Symbol.for("effects")].push(ge),v(ge,["rows"]),{elms:l,cleanup:()=>{C=null,E=null,i=null,s=null,K[1]=null,_[2]=null,f[2]=null,k[9].length=0,S[9]=null,K[9]=null,_[10]=null,f[10]=null,ge=null,K.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[1]>"u"||skips[1].indexOf("bgImg")===-1)&&i[1].set("bgImg",s.src)},function(s,i,c,f,v,x){i[2][Symbol.for("props")].bgImg=s.src},function(s,i,c,f,v,x){i[4].set("y",{transition:{value:s.contentY,duration:s.duration}})},function(s,i,c,f,v,x){i[4].set("alpha",{transition:{value:s.alpha,duration:s.duration}})},function(s,i,c,f,v,x){i[6].set("content",s.title)},function(s,i,c,f,v,x){i[7].set("content",s.overview)},function(s,i,c,f,v,x){i[8].set("y",{transition:{value:s.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state(){return{rows:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}},watch:{focused(h){const s=this.$select("row"+h);s&&s.$focus&&s.$focus()}},hooks:{async init(){this.rows=[{title:"Popular Movies",items:await b3("movie"),type:"Poster",width:215,y:0},{title:"Best Western movies",items:await Ea(["Western"]),type:"Hero",width:1370,y:358},{title:"Best Comedy movies",items:await Ea(["Comedy"]),type:"PosterTitle",width:215,y:1158},{title:"Popular TV shows",items:await b3("tv"),type:"PosterTitle",width:215,y:1536},{title:"Best Adventure and Action movies",items:await Ea(["adventure","action"]),type:"Hero",width:1370,y:1914},{title:"Best Documentaries",items:await Ea("Documentary"),type:"PosterTitle",width:215,y:2714},{title:"Best Western movies 2",items:await Ea("Western"),type:"PosterTitle",width:215,y:3092}],this.focused=0},ready(){this.$listen("posterSelect",h=>{this.focused===0&&(this.src=h.background,this.title=h.title,this.overview=h.overview)})},focus(){this.$trigger("focused")}},input:{up(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0},down(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0}}}),IP=Oe.Component("MenuSprite",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),l[0].populate(r[0]),C===!0&&(E-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].src="assets/menusprite.png",r[1].x=748,r[1].y=120,r[1].w=425,r[1].h=340,l[1].populate(r[1]),C===!0&&(E-=1),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},C===!0?b:i),r[2].y=680,r[2].x=560,l[2].populate(r[2]),C===!0&&(E-=1),A[3]=c.components&&c.components.Sprite||f.Sprite,s=l[2],r[3]={},l[3]=this.element({parent:s||"root"},C===!0?b:i),r[3].image="assets/menusprite.png",r[3].x=0,r[3].w=140,r[3].h=140,r[3].map=i.map,r[3].frame=i.icon1,_[3]=[],typeof A[3]<"u")for(let U in A[3][Symbol.for("config")].props)delete r[3][A[3][Symbol.for("config")].props[U]],_[3].push(A[3][Symbol.for("config")].props[U]);if(l[3].populate(r[3]),C===!0&&(E-=1),s=l[3],S[4]={},S[4].image="assets/menusprite.png",S[4].x=0,S[4].w=140,S[4].h=140,S[4].map=i.map,I=i.icon1,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[4].frame=I,k=S[4].is||"Sprite",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);if(l[4]=f[4].call(null,{props:S[4]},l[3],i),l[4][Symbol.for("slots")][0]?(s=l[4][Symbol.for("slots")][0],b=l[4],C=!0):s=l[4][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[5]=c.components&&c.components.Sprite||f.Sprite,s=l[2],r[5]={},l[5]=this.element({parent:s||"root"},C===!0?b:i),r[5].image="assets/menusprite.png",r[5].x=220,r[5].w=140,r[5].h=140,r[5].map=i.map,r[5].frame="icon2",_[5]=[],typeof A[5]<"u")for(let U in A[5][Symbol.for("config")].props)delete r[5][A[5][Symbol.for("config")].props[U]],_[5].push(A[5][Symbol.for("config")].props[U]);if(l[5].populate(r[5]),C===!0&&(E-=1),s=l[5],S[6]={},S[6].image="assets/menusprite.png",S[6].x=220,S[6].w=140,S[6].h=140,S[6].map=i.map,S[6].frame="icon2",k=S[6].is||"Sprite",f[6],typeof k=="string"){if(f[6]=c.components&&c.components[k]||f[k],!f[6])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[6]=k);if(l[6]=f[6].call(null,{props:S[6]},l[5],i),l[6][Symbol.for("slots")][0]?(s=l[6][Symbol.for("slots")][0],b=l[6],C=!0):s=l[6][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[7]=c.components&&c.components.Sprite||f.Sprite,s=l[2],r[7]={},l[7]=this.element({parent:s||"root"},C===!0?b:i),r[7].image="assets/menusprite.png",r[7].x=440,r[7].w=140,r[7].h=140,r[7].map=i.map,r[7].frame="icon3",_[7]=[],typeof A[7]<"u")for(let U in A[7][Symbol.for("config")].props)delete r[7][A[7][Symbol.for("config")].props[U]],_[7].push(A[7][Symbol.for("config")].props[U]);if(l[7].populate(r[7]),C===!0&&(E-=1),s=l[7],S[8]={},S[8].image="assets/menusprite.png",S[8].x=440,S[8].w=140,S[8].h=140,S[8].map=i.map,S[8].frame="icon3",k=S[8].is||"Sprite",f[8],typeof k=="string"){if(f[8]=c.components&&c.components[k]||f[k],!f[8])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[8]=k);if(l[8]=f[8].call(null,{props:S[8]},l[7],i),l[8][Symbol.for("slots")][0]?(s=l[8][Symbol.for("slots")][0],b=l[8],C=!0):s=l[8][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[9]=c.components&&c.components.Sprite||f.Sprite,s=l[2],r[9]={},l[9]=this.element({parent:s||"root"},C===!0?b:i),r[9].image="assets/menusprite.png",r[9].x=660,r[9].w=140,r[9].h=140,r[9].map=i.map,r[9].frame="icon4_unfocus",_[9]=[],typeof A[9]<"u")for(let U in A[9][Symbol.for("config")].props)delete r[9][A[9][Symbol.for("config")].props[U]],_[9].push(A[9][Symbol.for("config")].props[U]);if(l[9].populate(r[9]),C===!0&&(E-=1),s=l[9],S[10]={},S[10].image="assets/menusprite.png",S[10].x=660,S[10].w=140,S[10].h=140,S[10].map=i.map,S[10].frame="icon4_unfocus",k=S[10].is||"Sprite",f[10],typeof k=="string"){if(f[10]=c.components&&c.components[k]||f[k],!f[10])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[10]=k);return l[10]=f[10].call(null,{props:S[10]},l[9],i),l[10][Symbol.for("slots")][0]?(s=l[10][Symbol.for("slots")][0],b=l[10],C=!0):s=l[10][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[3]=null,S[4]=null,f[4]=null,A[5]=null,S[6]=null,f[6]=null,A[7]=null,S[8]=null,f[8]=null,A[9]=null,S[10]=null,f[10]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[3]>"u"||skips[3].indexOf("frame")===-1)&&i[3].set("frame",s.icon1)},function(s,i,c,f,v,x){i[4][Symbol.for("props")].frame=s.icon1}],context:{}},state(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready(){this.$setInterval(()=>{this.icon1=this.icon1==="icon1_unfocus"?"icon1_focus":"icon1_unfocus"},2e3)}}}),th=["menu"],MP=Oe.Component("Sprites",{components:{MenuSprite:IP},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),l[0].populate(r[0]),C===!0&&(E-=1),A[1]=c.components&&c.components.MenuSprite||f.MenuSprite,s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].show=i.currentSprite==="menu",_[1]=[],typeof A[1]<"u")for(let U in A[1][Symbol.for("config")].props)delete r[1][A[1][Symbol.for("config")].props[U]],_[1].push(A[1][Symbol.for("config")].props[U]);if(l[1].populate(r[1]),C===!0&&(E-=1),s=l[1],S[2]={},I=i.currentSprite==="menu",Array.isArray(I)===!0&&(I=x(I).slice(0)),S[2].show=I,k=S[2].is||"MenuSprite",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "MenuSprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);return l[2]=f[2].call(null,{props:S[2]},l[1],i),l[2][Symbol.for("slots")][0]?(s=l[2][Symbol.for("slots")][0],b=l[2],C=!0):s=l[2][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[1]=null,S[2]=null,f[2]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[1]>"u"||skips[1].indexOf("show")===-1)&&i[1].set("show",s.currentSprite==="menu")},function(s,i,c,f,v,x){i[2][Symbol.for("props")].show=s.currentSprite==="menu"}],context:{}},state(){return{currentSprite:"menu"}},input:{down(){const h=th.indexOf(this.currentSprite);h<th.length-1?this.currentSprite=th[h+1]:this.currentSprite=th[0]}}}),Eh=Oe.Component("Button",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=300,r[0].h=80,r[0].color=i.color||"0xff0000ff",r[0].effects=[{type:"radius",props:{radius:20}}],r[0].alpha={transition:i.alpha},r[0].scale={transition:i.scale},r[0].rotation=i.rotate,l[0].populate(r[0]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("effects",[{type:"radius",props:{radius:20}}])},function(s,i,c,f,v,x){i[0].set("alpha",{transition:s.alpha})},function(s,i,c,f,v,x){i[0].set("scale",{transition:s.scale})},function(s,i,c,f,v,x){i[0].set("rotation",s.rotate)}],context:{}},props:["color"],state(){return{alpha:.4,scale:1,rotate:0}},hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=this.scale===1?1.2:1},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.rotate=0}},input:{enter(){this.rotate=this.rotate===0?-4:0,this.scale=this.scale===1.2?1.3:1.2}}}),RP=Oe.Component("Menu",{components:{Button:Eh},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b=!1,C=0,E=[];if(r[0]={},l[0]=this.element({parent:s||"root"},b===!0?I:i),r[0].x={transition:i.x},r[0].w=400,r[0].h=1080,r[0].color="{right: '0x64748baa', left: '0x475569aa'}",l[0].populate(r[0]),b===!0&&(C-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},b===!0?I:i),r[1].x=50,r[1].y=40,l[1].populate(r[1]),b===!0&&(C-=1),E[2]=c.components&&c.components.Button||f.Button,s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},b===!0?I:i),r[2].color="0xe4e4e7ff",r[2].ref="menu1",_[2]=[],typeof E[2]<"u")for(let A in E[2][Symbol.for("config")].props)delete r[2][E[2][Symbol.for("config")].props[A]],_[2].push(E[2][Symbol.for("config")].props[A]);if(l[2].populate(r[2]),b===!0&&(C-=1),s=l[2],S[3]={},S[3].color="0xe4e4e7ff",S[3].ref="menu1",k=S[3].is||"Button",f[3],typeof k=="string"){if(f[3]=c.components&&c.components[k]||f[k],!f[3])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[3]=k);if(l[3]=f[3].call(null,{props:S[3]},l[2],i),l[3][Symbol.for("slots")][0]?(s=l[3][Symbol.for("slots")][0],I=l[3],b=!0):s=l[3][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),E[4]=c.components&&c.components.Button||f.Button,s=l[1],r[4]={},l[4]=this.element({parent:s||"root"},b===!0?I:i),r[4].color="0xe4e4e7ff",r[4].y=100,r[4].ref="menu2",_[4]=[],typeof E[4]<"u")for(let A in E[4][Symbol.for("config")].props)delete r[4][E[4][Symbol.for("config")].props[A]],_[4].push(E[4][Symbol.for("config")].props[A]);if(l[4].populate(r[4]),b===!0&&(C-=1),s=l[4],S[5]={},S[5].color="0xe4e4e7ff",S[5].y=100,S[5].ref="menu2",k=S[5].is||"Button",f[5],typeof k=="string"){if(f[5]=c.components&&c.components[k]||f[k],!f[5])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[5]=k);if(l[5]=f[5].call(null,{props:S[5]},l[4],i),l[5][Symbol.for("slots")][0]?(s=l[5][Symbol.for("slots")][0],I=l[5],b=!0):s=l[5][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),E[6]=c.components&&c.components.Button||f.Button,s=l[1],r[6]={},l[6]=this.element({parent:s||"root"},b===!0?I:i),r[6].color="0xe4e4e7ff",r[6].y=200,r[6].ref="menu3",_[6]=[],typeof E[6]<"u")for(let A in E[6][Symbol.for("config")].props)delete r[6][E[6][Symbol.for("config")].props[A]],_[6].push(E[6][Symbol.for("config")].props[A]);if(l[6].populate(r[6]),b===!0&&(C-=1),s=l[6],S[7]={},S[7].color="0xe4e4e7ff",S[7].y=200,S[7].ref="menu3",k=S[7].is||"Button",f[7],typeof k=="string"){if(f[7]=c.components&&c.components[k]||f[k],!f[7])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[7]=k);if(l[7]=f[7].call(null,{props:S[7]},l[6],i),l[7][Symbol.for("slots")][0]?(s=l[7][Symbol.for("slots")][0],I=l[7],b=!0):s=l[7][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),E[8]=c.components&&c.components.Button||f.Button,s=l[1],r[8]={},l[8]=this.element({parent:s||"root"},b===!0?I:i),r[8].color="0xe4e4e7ff",r[8].y=300,r[8].ref="menu4",_[8]=[],typeof E[8]<"u")for(let A in E[8][Symbol.for("config")].props)delete r[8][E[8][Symbol.for("config")].props[A]],_[8].push(E[8][Symbol.for("config")].props[A]);if(l[8].populate(r[8]),b===!0&&(C-=1),s=l[8],S[9]={},S[9].color="0xe4e4e7ff",S[9].y=300,S[9].ref="menu4",k=S[9].is||"Button",f[9],typeof k=="string"){if(f[9]=c.components&&c.components[k]||f[k],!f[9])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[9]=k);return l[9]=f[9].call(null,{props:S[9]},l[8],i),l[9][Symbol.for("slots")][0]?(s=l[9][Symbol.for("slots")][0],I=l[9],b=!0):s=l[9][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),{elms:l,cleanup:()=>{I=null,i=null,s=null,E[2]=null,S[3]=null,f[3]=null,E[4]=null,S[5]=null,f[5]=null,E[6]=null,S[7]=null,f[7]=null,E[8]=null,S[9]=null,f[9]=null,E.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("x",{transition:s.x})}],context:{}},state(){return{x:-360,focused:1}},hooks:{focus(){this.$trigger("focused"),this.x=0}},watch:{focused(){const h=this.$select(`menu${this.focused}`);h&&h.$focus&&h.$focus()}},input:{right(){this.parent.$focus(),this.x=-360},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)},left(){}}}),_P=Oe.Component("FocusHandling",{components:{Menu:RP,Button:Eh},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),l[0].populate(r[0]),C===!0&&(E-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].x=300,r[1].y=150,l[1].populate(r[1]),C===!0&&(E-=1),A[2]=c.components&&c.components.Button||f.Button,s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},C===!0?b:i),r[2].color="0xef4444ff",r[2].x=0,r[2].ref="button1",r[2].z=i.focused===1?1:0,_[2]=[],typeof A[2]<"u")for(let U in A[2][Symbol.for("config")].props)delete r[2][A[2][Symbol.for("config")].props[U]],_[2].push(A[2][Symbol.for("config")].props[U]);if(l[2].populate(r[2]),C===!0&&(E-=1),s=l[2],S[3]={},S[3].color="0xef4444ff",S[3].x=0,S[3].ref="button1",I=i.focused===1?1:0,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[3].z=I,k=S[3].is||"Button",f[3],typeof k=="string"){if(f[3]=c.components&&c.components[k]||f[k],!f[3])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[3]=k);if(l[3]=f[3].call(null,{props:S[3]},l[2],i),l[3][Symbol.for("slots")][0]?(s=l[3][Symbol.for("slots")][0],b=l[3],C=!0):s=l[3][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[4]=c.components&&c.components.Button||f.Button,s=l[1],r[4]={},l[4]=this.element({parent:s||"root"},C===!0?b:i),r[4].color="0xf97316ff",r[4].x=320,r[4].ref="button2",r[4].z=i.focused===2?1:0,_[4]=[],typeof A[4]<"u")for(let U in A[4][Symbol.for("config")].props)delete r[4][A[4][Symbol.for("config")].props[U]],_[4].push(A[4][Symbol.for("config")].props[U]);if(l[4].populate(r[4]),C===!0&&(E-=1),s=l[4],S[5]={},S[5].color="0xf97316ff",S[5].x=320,S[5].ref="button2",I=i.focused===2?1:0,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[5].z=I,k=S[5].is||"Button",f[5],typeof k=="string"){if(f[5]=c.components&&c.components[k]||f[k],!f[5])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[5]=k);if(l[5]=f[5].call(null,{props:S[5]},l[4],i),l[5][Symbol.for("slots")][0]?(s=l[5][Symbol.for("slots")][0],b=l[5],C=!0):s=l[5][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[6]=c.components&&c.components.Button||f.Button,s=l[1],r[6]={},l[6]=this.element({parent:s||"root"},C===!0?b:i),r[6].color="0x84cc16ff",r[6].x=640,r[6].ref="button3",r[6].z=i.focused===3?1:0,_[6]=[],typeof A[6]<"u")for(let U in A[6][Symbol.for("config")].props)delete r[6][A[6][Symbol.for("config")].props[U]],_[6].push(A[6][Symbol.for("config")].props[U]);if(l[6].populate(r[6]),C===!0&&(E-=1),s=l[6],S[7]={},S[7].color="0x84cc16ff",S[7].x=640,S[7].ref="button3",I=i.focused===3?1:0,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[7].z=I,k=S[7].is||"Button",f[7],typeof k=="string"){if(f[7]=c.components&&c.components[k]||f[k],!f[7])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[7]=k);if(l[7]=f[7].call(null,{props:S[7]},l[6],i),l[7][Symbol.for("slots")][0]?(s=l[7][Symbol.for("slots")][0],b=l[7],C=!0):s=l[7][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[8]=c.components&&c.components.Button||f.Button,s=l[1],r[8]={},l[8]=this.element({parent:s||"root"},C===!0?b:i),r[8].color="0x10b981ff",r[8].x=0,r[8].y=100,r[8].ref="button4",r[8].z=i.focused===4?1:0,_[8]=[],typeof A[8]<"u")for(let U in A[8][Symbol.for("config")].props)delete r[8][A[8][Symbol.for("config")].props[U]],_[8].push(A[8][Symbol.for("config")].props[U]);if(l[8].populate(r[8]),C===!0&&(E-=1),s=l[8],S[9]={},S[9].color="0x10b981ff",S[9].x=0,S[9].y=100,S[9].ref="button4",I=i.focused===4?1:0,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[9].z=I,k=S[9].is||"Button",f[9],typeof k=="string"){if(f[9]=c.components&&c.components[k]||f[k],!f[9])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[9]=k);if(l[9]=f[9].call(null,{props:S[9]},l[8],i),l[9][Symbol.for("slots")][0]?(s=l[9][Symbol.for("slots")][0],b=l[9],C=!0):s=l[9][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[10]=c.components&&c.components.Button||f.Button,s=l[1],r[10]={},l[10]=this.element({parent:s||"root"},C===!0?b:i),r[10].color="0x06b6d4ff",r[10].y=100,r[10].x=320,r[10].ref="button5",r[10].z=i.focused===5?1:0,_[10]=[],typeof A[10]<"u")for(let U in A[10][Symbol.for("config")].props)delete r[10][A[10][Symbol.for("config")].props[U]],_[10].push(A[10][Symbol.for("config")].props[U]);if(l[10].populate(r[10]),C===!0&&(E-=1),s=l[10],S[11]={},S[11].color="0x06b6d4ff",S[11].y=100,S[11].x=320,S[11].ref="button5",I=i.focused===5?1:0,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[11].z=I,k=S[11].is||"Button",f[11],typeof k=="string"){if(f[11]=c.components&&c.components[k]||f[k],!f[11])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[11]=k);if(l[11]=f[11].call(null,{props:S[11]},l[10],i),l[11][Symbol.for("slots")][0]?(s=l[11][Symbol.for("slots")][0],b=l[11],C=!0):s=l[11][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[12]=c.components&&c.components.Button||f.Button,s=l[1],r[12]={},l[12]=this.element({parent:s||"root"},C===!0?b:i),r[12].color="0x3b82f6ff",r[12].y=100,r[12].x=640,r[12].ref="button6",r[12].z=i.focused===6?1:0,_[12]=[],typeof A[12]<"u")for(let U in A[12][Symbol.for("config")].props)delete r[12][A[12][Symbol.for("config")].props[U]],_[12].push(A[12][Symbol.for("config")].props[U]);if(l[12].populate(r[12]),C===!0&&(E-=1),s=l[12],S[13]={},S[13].color="0x3b82f6ff",S[13].y=100,S[13].x=640,S[13].ref="button6",I=i.focused===6?1:0,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[13].z=I,k=S[13].is||"Button",f[13],typeof k=="string"){if(f[13]=c.components&&c.components[k]||f[k],!f[13])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[13]=k);if(l[13]=f[13].call(null,{props:S[13]},l[12],i),l[13][Symbol.for("slots")][0]?(s=l[13][Symbol.for("slots")][0],b=l[13],C=!0):s=l[13][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[14]=c.components&&c.components.Button||f.Button,s=l[1],r[14]={},l[14]=this.element({parent:s||"root"},C===!0?b:i),r[14].color="0x8b5cf6ff",r[14].y=200,r[14].x=0,r[14].ref="button7",r[14].z=i.focused===7?1:0,_[14]=[],typeof A[14]<"u")for(let U in A[14][Symbol.for("config")].props)delete r[14][A[14][Symbol.for("config")].props[U]],_[14].push(A[14][Symbol.for("config")].props[U]);if(l[14].populate(r[14]),C===!0&&(E-=1),s=l[14],S[15]={},S[15].color="0x8b5cf6ff",S[15].y=200,S[15].x=0,S[15].ref="button7",I=i.focused===7?1:0,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[15].z=I,k=S[15].is||"Button",f[15],typeof k=="string"){if(f[15]=c.components&&c.components[k]||f[k],!f[15])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[15]=k);if(l[15]=f[15].call(null,{props:S[15]},l[14],i),l[15][Symbol.for("slots")][0]?(s=l[15][Symbol.for("slots")][0],b=l[15],C=!0):s=l[15][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[16]=c.components&&c.components.Button||f.Button,s=l[1],r[16]={},l[16]=this.element({parent:s||"root"},C===!0?b:i),r[16].color="0xd946efff",r[16].y=200,r[16].x=320,r[16].ref="button8",r[16].z=i.focused===8?1:0,_[16]=[],typeof A[16]<"u")for(let U in A[16][Symbol.for("config")].props)delete r[16][A[16][Symbol.for("config")].props[U]],_[16].push(A[16][Symbol.for("config")].props[U]);if(l[16].populate(r[16]),C===!0&&(E-=1),s=l[16],S[17]={},S[17].color="0xd946efff",S[17].y=200,S[17].x=320,S[17].ref="button8",I=i.focused===8?1:0,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[17].z=I,k=S[17].is||"Button",f[17],typeof k=="string"){if(f[17]=c.components&&c.components[k]||f[k],!f[17])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[17]=k);if(l[17]=f[17].call(null,{props:S[17]},l[16],i),l[17][Symbol.for("slots")][0]?(s=l[17][Symbol.for("slots")][0],b=l[17],C=!0):s=l[17][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[18]=c.components&&c.components.Button||f.Button,s=l[1],r[18]={},l[18]=this.element({parent:s||"root"},C===!0?b:i),r[18].color="0xf43f5eff",r[18].y=200,r[18].x=640,r[18].ref="button9",r[18].z=i.focused===9?1:0,_[18]=[],typeof A[18]<"u")for(let U in A[18][Symbol.for("config")].props)delete r[18][A[18][Symbol.for("config")].props[U]],_[18].push(A[18][Symbol.for("config")].props[U]);if(l[18].populate(r[18]),C===!0&&(E-=1),s=l[18],S[19]={},S[19].color="0xf43f5eff",S[19].y=200,S[19].x=640,S[19].ref="button9",I=i.focused===9?1:0,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[19].z=I,k=S[19].is||"Button",f[19],typeof k=="string"){if(f[19]=c.components&&c.components[k]||f[k],!f[19])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[19]=k);if(l[19]=f[19].call(null,{props:S[19]},l[18],i),l[19][Symbol.for("slots")][0]?(s=l[19][Symbol.for("slots")][0],b=l[19],C=!0):s=l[19][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[20]=c.components&&c.components.Menu||f.Menu,s=l[0],r[20]={},l[20]=this.element({parent:s||"root"},C===!0?b:i),r[20].ref="menu",_[20]=[],typeof A[20]<"u")for(let U in A[20][Symbol.for("config")].props)delete r[20][A[20][Symbol.for("config")].props[U]],_[20].push(A[20][Symbol.for("config")].props[U]);if(l[20].populate(r[20]),C===!0&&(E-=1),s=l[20],S[21]={},S[21].ref="menu",k=S[21].is||"Menu",f[21],typeof k=="string"){if(f[21]=c.components&&c.components[k]||f[k],!f[21])throw new Error('Component "Menu" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[21]=k);return l[21]=f[21].call(null,{props:S[21]},l[20],i),l[21][Symbol.for("slots")][0]?(s=l[21][Symbol.for("slots")][0],b=l[21],C=!0):s=l[21][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[2]=null,S[3]=null,f[3]=null,A[4]=null,S[5]=null,f[5]=null,A[6]=null,S[7]=null,f[7]=null,A[8]=null,S[9]=null,f[9]=null,A[10]=null,S[11]=null,f[11]=null,A[12]=null,S[13]=null,f[13]=null,A[14]=null,S[15]=null,f[15]=null,A[16]=null,S[17]=null,f[17]=null,A[18]=null,S[19]=null,f[19]=null,A[20]=null,S[21]=null,f[21]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[2]>"u"||skips[2].indexOf("z")===-1)&&i[2].set("z",s.focused===1?1:0)},function(s,i,c,f,v,x){i[3][Symbol.for("props")].z=s.focused===1?1:0},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[4]>"u"||skips[4].indexOf("z")===-1)&&i[4].set("z",s.focused===2?1:0)},function(s,i,c,f,v,x){i[5][Symbol.for("props")].z=s.focused===2?1:0},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[6]>"u"||skips[6].indexOf("z")===-1)&&i[6].set("z",s.focused===3?1:0)},function(s,i,c,f,v,x){i[7][Symbol.for("props")].z=s.focused===3?1:0},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[8]>"u"||skips[8].indexOf("z")===-1)&&i[8].set("z",s.focused===4?1:0)},function(s,i,c,f,v,x){i[9][Symbol.for("props")].z=s.focused===4?1:0},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[10]>"u"||skips[10].indexOf("z")===-1)&&i[10].set("z",s.focused===5?1:0)},function(s,i,c,f,v,x){i[11][Symbol.for("props")].z=s.focused===5?1:0},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[12]>"u"||skips[12].indexOf("z")===-1)&&i[12].set("z",s.focused===6?1:0)},function(s,i,c,f,v,x){i[13][Symbol.for("props")].z=s.focused===6?1:0},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[14]>"u"||skips[14].indexOf("z")===-1)&&i[14].set("z",s.focused===7?1:0)},function(s,i,c,f,v,x){i[15][Symbol.for("props")].z=s.focused===7?1:0},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[16]>"u"||skips[16].indexOf("z")===-1)&&i[16].set("z",s.focused===8?1:0)},function(s,i,c,f,v,x){i[17][Symbol.for("props")].z=s.focused===8?1:0},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[18]>"u"||skips[18].indexOf("z")===-1)&&i[18].set("z",s.focused===9?1:0)},function(s,i,c,f,v,x){i[19][Symbol.for("props")].z=s.focused===9?1:0}],context:{}},state(){return{focused:1}},hooks:{focus(){this.$trigger("focused")}},watch:{focused(h){const s=this.$select(`button${h}`);s&&s.$focus&&s.$focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const h=this.focused-1;if(h===0){const s=this.$select("menu");s&&s.$focus&&s.$focus()}else this.focused=Math.max(h,1)},a(){const h=this.$select("menu");h&&h.$focus&&h.$focus()}}}),LP=Oe.Component("Positioning",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b=!1,C=0,E=[];if(r[0]={},l[0]=this.element({parent:s||"root"},b===!0?I:i),l[0].populate(r[0]),b===!0&&(C-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},b===!0?I:i),r[1].w=100,r[1].h=100,r[1].x=20,r[1].y=20,r[1].color="0xecfeffff",l[1].populate(r[1]),b===!0&&(C-=1),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},b===!0?I:i),r[2].w=100,r[2].h=100,r[2].x=140,r[2].y=20,r[2].color="0xa5f3fcff",l[2].populate(r[2]),b===!0&&(C-=1),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},b===!0?I:i),r[3].w=100,r[3].h=100,r[3].x=260,r[3].y=20,r[3].color="0x22d3eeff",l[3].populate(r[3]),b===!0&&(C-=1),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},b===!0?I:i),r[4].w=100,r[4].h=100,r[4].x=380,r[4].y=20,r[4].color="0x0891b2ff",l[4].populate(r[4]),b===!0&&(C-=1),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},b===!0?I:i),r[5].w=100,r[5].h=100,r[5].x=i.x1,r[5].y=i.y,r[5].color="0xfdf4ffff",l[5].populate(r[5]),b===!0&&(C-=1),s=l[0],r[6]={},l[6]=this.element({parent:s||"root"},b===!0?I:i),r[6].w=100,r[6].h=100,r[6].x=i.x2,r[6].y=i.y,r[6].color="0xf5d0feff",l[6].populate(r[6]),b===!0&&(C-=1),s=l[0],r[7]={},l[7]=this.element({parent:s||"root"},b===!0?I:i),r[7].w=100,r[7].h=100,r[7].x=i.x3,r[7].y=i.y,r[7].color="0xe879f9ff",l[7].populate(r[7]),b===!0&&(C-=1),s=l[0],r[8]={},l[8]=this.element({parent:s||"root"},b===!0?I:i),r[8].w=100,r[8].h=100,r[8].x=i.x4,r[8].y=i.y,r[8].color="0xc026d3ff",l[8].populate(r[8]),b===!0&&(C-=1),s=l[0],r[9]={},l[9]=this.element({parent:s||"root"},b===!0?I:i),r[9].w=100,r[9].h=100,r[9].x=i.xA,r[9].y=260,r[9].color="0xfff7edff",l[9].populate(r[9]),b===!0&&(C-=1),s=l[0],r[10]={},l[10]=this.element({parent:s||"root"},b===!0?I:i),r[10].w=100,r[10].h=100,r[10].x=i.xB,r[10].y=260,r[10].color="0xfed7aaff",l[10].populate(r[10]),b===!0&&(C-=1),s=l[0],r[11]={},l[11]=this.element({parent:s||"root"},b===!0?I:i),r[11].w=100,r[11].h=100,r[11].x=i.xC,r[11].y=260,r[11].color="0xfb923cff",l[11].populate(r[11]),b===!0&&(C-=1),s=l[0],r[12]={},l[12]=this.element({parent:s||"root"},b===!0?I:i),r[12].w=100,r[12].h=100,r[12].x=i.xD,r[12].y=260,r[12].color="0xea580cff",l[12].populate(r[12]),b===!0&&(C-=1),s=l[0],r[13]={},l[13]=this.element({parent:s||"root"},b===!0?I:i),r[13].w=800,r[13].h=800,r[13].y=20,r[13].x=800,r[13].color="0xecfdf5ff",l[13].populate(r[13]),b===!0&&(C-=1),s=l[13],r[14]={},l[14]=this.element({parent:s||"root"},b===!0?I:i),r[14].w=600,r[14].h=600,r[14].y=20,r[14].x=20,r[14].color="0xa7f3d0ff",l[14].populate(r[14]),b===!0&&(C-=1),s=l[14],r[15]={},l[15]=this.element({parent:s||"root"},b===!0?I:i),r[15].w=400,r[15].h=400,r[15].y=100,r[15].x=20,r[15].color="0x34d399ff",l[15].populate(r[15]),b===!0&&(C-=1),s=l[15],r[16]={},l[16]=this.element({parent:s||"root"},b===!0?I:i),r[16].w=200,r[16].h=100,r[16].y=300/2,r[16].x=200/2,r[16].color="0x059669ff",l[16].populate(r[16]),b===!0&&(C-=1),s=l[16],r[17]={},l[17]=this.element({parent:s||"root"},b===!0?I:i),r[17].w=50,r[17].h=50,r[17].y={transition:i.yNested},r[17].x={transition:i.xNested},r[17].color="0x065f46ff",l[17].populate(r[17]),b===!0&&(C-=1),s=l[0],r[18]={},l[18]=this.element({parent:s||"root"},b===!0?I:i),r[18].w=100,r[18].h=100,r[18].y=500,r[18].x=20,r[18].color="0xe11d48ff",l[18].populate(r[18]),b===!0&&(C-=1),s=l[0],r[19]={},l[19]=this.element({parent:s||"root"},b===!0?I:i),r[19].w=200,r[19].h=200,r[19].x=50,r[19].y=700,r[19].color="0x94a3b8ff",r[19].z=100,l[19].populate(r[19]),b===!0&&(C-=1),s=l[19],r[20]={},l[20]=this.element({parent:s||"root"},b===!0?I:i),r[20].content="Lightning!",r[20].x=100,r[20].y=140,r[20].__textnode=!0,l[20].populate(r[20]),b===!0&&(C-=1),s=l[19],r[21]={},l[21]=this.element({parent:s||"root"},b===!0?I:i),r[21].w=300,r[21].h=100,r[21].color="0x475569ff",l[21].populate(r[21]),b===!0&&(C-=1),E[22]=c.components&&c.components.Circle||f.Circle,s=l[19],r[22]={},l[22]=this.element({parent:s||"root"},b===!0?I:i),r[22].x=150,r[22].y=150,r[22].size=100,r[22].color="0xffffffff",_[22]=[],typeof E[22]<"u")for(let A in E[22][Symbol.for("config")].props)delete r[22][E[22][Symbol.for("config")].props[A]],_[22].push(E[22][Symbol.for("config")].props[A]);if(l[22].populate(r[22]),b===!0&&(C-=1),s=l[22],S[23]={},S[23].x=150,S[23].y=150,S[23].size=100,S[23].color="0xffffffff",k=S[23].is||"Circle",f[23],typeof k=="string"){if(f[23]=c.components&&c.components[k]||f[k],!f[23])throw new Error('Component "Circle" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[23]=k);return l[23]=f[23].call(null,{props:S[23]},l[22],i),l[23][Symbol.for("slots")][0]?(s=l[23][Symbol.for("slots")][0],I=l[23],b=!0):s=l[23][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),s=l[0],r[24]={},l[24]=this.element({parent:s||"root"},b===!0?I:i),r[24].w=300,r[24].h=300,r[24].x=50,r[24].y=700,r[24].color="0xef444480",l[24].populate(r[24]),b===!0&&(C-=1),s=l[0],r[25]={},l[25]=this.element({parent:s||"root"},b===!0?I:i),r[25].w=400,r[25].h=100,r[25].x=800,r[25].y=900,r[25].color="0x0284c7ff",l[25].populate(r[25]),b===!0&&(C-=1),s=l[25],r[26]={},l[26]=this.element({parent:s||"root"},b===!0?I:i),r[26].w=s.node.width*(42/100),r[26].h=s.node.height*(30/100),r[26].y=s.node.height*(5/100),r[26].x=s.node.width*(1/100),r[26].color="0x075985ff",l[26].populate(r[26]),b===!0&&(C-=1),s=l[25],r[27]={},l[27]=this.element({parent:s||"root"},b===!0?I:i),r[27].w=i.bar2.v,r[27].h=s.node.height*(30/100),r[27].y=s.node.height*(35/100),r[27].x=s.node.width*(1/100),r[27].color="0x6b21a8ff",l[27].populate(r[27]),b===!0&&(C-=1),s=l[25],r[28]={},l[28]=this.element({parent:s||"root"},b===!0?I:i),r[28].w={transition:i.bar3},r[28].h=s.node.height*(30/100),r[28].y=s.node.height*(65/100),r[28].x=s.node.width*(1/100),r[28].color="0x9f1239ff",l[28].populate(r[28]),b===!0&&(C-=1),s=l[0],r[29]={},l[29]=this.element({parent:s||"root"},b===!0?I:i),r[29].w=250,r[29].h=250,r[29].color="0xfef08aff",r[29].x=450,r[29].y=700,l[29].populate(r[29]),b===!0&&(C-=1),s=l[29],r[30]={},l[30]=this.element({parent:s||"root"},b===!0?I:i),r[30].w=40,r[30].h=40,r[30].placement="left",r[30].color="0x818cf8ff",l[30].populate(r[30]),b===!0&&(C-=1),s=l[29],r[31]={},l[31]=this.element({parent:s||"root"},b===!0?I:i),r[31].w=40,r[31].h=40,r[31].placement="center",r[31].color="0x2563ebff",l[31].populate(r[31]),b===!0&&(C-=1),s=l[29],r[32]={},l[32]=this.element({parent:s||"root"},b===!0?I:i),r[32].w=40,r[32].h=40,r[32].placement="right",r[32].color="0x1e40afff",l[32].populate(r[32]),b===!0&&(C-=1),s=l[29],r[33]={},l[33]=this.element({parent:s||"root"},b===!0?I:i),r[33].w=40,r[33].h=40,r[33].x=54,r[33].placement="top",r[33].color="0xf472b6ff",l[33].populate(r[33]),b===!0&&(C-=1),s=l[29],r[34]={},l[34]=this.element({parent:s||"root"},b===!0?I:i),r[34].w=40,r[34].h=40,r[34].x=54,r[34].placement="middle",r[34].color="0xdb2777ff",l[34].populate(r[34]),b===!0&&(C-=1),s=l[29],r[35]={},l[35]=this.element({parent:s||"root"},b===!0?I:i),r[35].w=40,r[35].h=40,r[35].x=54,r[35].placement="bottom",r[35].color="0xbe185dff",l[35].populate(r[35]),b===!0&&(C-=1),s=l[29],r[36]={},l[36]=this.element({parent:s||"root"},b===!0?I:i),r[36].w=40,r[36].h=40,r[36].placement="{x: 'center', y: 'bottom'}",r[36].color="0xa3e635ff",l[36].populate(r[36]),b===!0&&(C-=1),s=l[29],r[37]={},l[37]=this.element({parent:s||"root"},b===!0?I:i),r[37].w=40,r[37].h=40,r[37].placement="{x: 'right', y: 'middle'}",r[37].color="0x65a30dff",l[37].populate(r[37]),b===!0&&(C-=1),s=l[29],r[38]={},l[38]=this.element({parent:s||"root"},b===!0?I:i),r[38].w=40,r[38].h=40,r[38].placement="{x: 'center', y: 'middle'}",r[38].color="0x4d7c0fff",l[38].populate(r[38]),b===!0&&(C-=1),{elms:l,cleanup:()=>{I=null,i=null,s=null,E[22]=null,S[23]=null,f[23]=null,E.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[9].set("x",s.xA)},function(s,i,c,f,v,x){i[10].set("x",s.xB)},function(s,i,c,f,v,x){i[11].set("x",s.xC)},function(s,i,c,f,v,x){i[12].set("x",s.xD)},function(s,i,c,f,v,x){i[16].set("y",300/2)},function(s,i,c,f,v,x){i[16].set("x",200/2)},function(s,i,c,f,v,x){i[17].set("y",{transition:s.yNested})},function(s,i,c,f,v,x){i[17].set("x",{transition:s.xNested})},function(s,i,c,f,v,x){i[27].set("w",s.bar2.v)},function(s,i,c,f,v,x){i[28].set("w",{transition:s.bar3})}],context:{}},state(){return{x1:20,x2:140,x3:260,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=this.yNested===0?50:0},2e3),this.$setInterval(()=>{this.xNested=this.xNested===0?150:0},1e3),this.$setInterval(()=>{const h=parseFloat(this.bar2.v),s=this.bar2.direction==="up"?h+10:h-10;this.bar2.v=s+"%",s>=90&&(this.bar2.direction="down"),s<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(Math.random()*96)+"%"},2e3)}}});var PP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function DP(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Wm={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var k3;function OP(){return k3||(k3=1,(function(h){(function(){var s=typeof window<"u"?window:PP,i={};(function(f,v,x){var m,l=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},r=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function S(e){e=[typeof globalThis=="object"&&globalThis,e,typeof f=="object"&&f,typeof self=="object"&&self,typeof v=="object"&&v];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var _=S(this);function k(e,t){if(t)e:{var n=_;e=e.split(".");for(var o=0;o<e.length-1;o++){var u=e[o];if(!(u in n))break e;n=n[u]}e=e[e.length-1],o=n[e],t=t(o),t!=o&&t!=null&&r(n,e,{configurable:!0,writable:!0,value:t})}}var I;if(typeof Object.setPrototypeOf=="function")I=Object.setPrototypeOf;else{var b;e:{var C={a:!0},E={};try{E.__proto__=C,b=E.a;break e}catch{}b=!1}I=b?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var A=I;function U(e,t){if(e.prototype=l(t.prototype),e.prototype.constructor=e,A)A(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(t,n);o&&Object.defineProperty(e,n,o)}else e[n]=t[n];e.Jm=t.prototype}function K(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function R(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:K(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function le(e){if(!(e instanceof Array)){e=R(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}k("Symbol",function(e){function t(a){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(o+(a||"")+"_"+u++,a)}function n(a,d){this.g=a,r(this,"description",{configurable:!0,writable:!0,value:d})}if(e)return e;n.prototype.toString=function(){return this.g};var o="jscomp_symbol_"+(Math.random()*1e9>>>0)+"_",u=0;return t}),k("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var o=_[t[n]];typeof o=="function"&&typeof o.prototype[e]!="function"&&r(o.prototype,e,{configurable:!0,writable:!0,value:function(){return ge(K(this))}})}return e});function ge(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function pe(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.B=this.i=null}function oe(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}pe.prototype.u=function(e){this.h=e};function me(e,t){e.i={Xh:t,li:!0},e.g=e.m||e.j}pe.prototype.return=function(e){this.i={return:e},this.g=this.j};function D(e,t,n){return e.g=n,{value:t}}pe.prototype.A=function(e){this.g=e};function te(e){e.g=0}function ce(e,t,n){e.m=t,n!=null&&(e.j=n)}function ve(e,t){e.m=0,e.j=t||0}function X(e,t,n){e.g=t,e.m=n||0}function ie(e,t){return e.m=t||0,t=e.i.Xh,e.i=null,t}function W(e){e.B=[e.i],e.m=0,e.j=0}function G(e,t){var n=e.B.splice(0)[0];(n=e.i=e.i||n)?n.li?e.g=e.m||e.j:n.A!=null&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function ue(e){this.g=new pe,this.h=e}function Ce(e,t){oe(e.g);var n=e.g.l;return n?Fe(e,"return"in n?n.return:function(o){return{value:o,done:!0}},t,e.g.return):(e.g.return(t),Ze(e))}function Fe(e,t,n,o){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var a=u.value}catch(d){return e.g.l=null,me(e.g,d),Ze(e)}return e.g.l=null,o.call(e.g,a),Ze(e)}function Ze(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,me(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.li)throw t.Xh;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function je(e){this.next=function(t){return oe(e.g),e.g.l?t=Fe(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=Ze(e)),t},this.throw=function(t){return oe(e.g),e.g.l?t=Fe(e,e.g.l.throw,t,e.g.u):(me(e.g,t),t=Ze(e)),t},this.return=function(t){return Ce(e,t)},this[Symbol.iterator]=function(){return this}}function Ae(e){function t(o){return e.next(o)}function n(o){return e.throw(o)}return new Promise(function(o,u){function a(d){d.done?o(d.value):Promise.resolve(d.value).then(t,n).then(a,u)}a(e.next())})}function $(e){return Ae(new je(new ue(e)))}function ft(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}k("Promise",function(e){function t(d){this.h=0,this.i=void 0,this.g=[],this.o=!1;var p=this.j();try{d(p.resolve,p.reject)}catch(g){p.reject(g)}}function n(){this.g=null}function o(d){return d instanceof t?d:new t(function(p){p(d)})}if(e)return e;n.prototype.h=function(d){if(this.g==null){this.g=[];var p=this;this.i(function(){p.l()})}this.g.push(d)};var u=_.setTimeout;n.prototype.i=function(d){u(d,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var d=this.g;this.g=[];for(var p=0;p<d.length;++p){var g=d[p];d[p]=null;try{g()}catch(y){this.j(y)}}}this.g=null},n.prototype.j=function(d){this.i(function(){throw d})},t.prototype.j=function(){function d(y){return function(w){g||(g=!0,y.call(p,w))}}var p=this,g=!1;return{resolve:d(this.G),reject:d(this.l)}},t.prototype.G=function(d){if(d===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof t)this.I(d);else{e:switch(typeof d){case"object":var p=d!=null;break e;case"function":p=!0;break e;default:p=!1}p?this.F(d):this.m(d)}},t.prototype.F=function(d){var p=void 0;try{p=d.then}catch(g){this.l(g);return}typeof p=="function"?this.J(p,d):this.m(d)},t.prototype.l=function(d){this.u(2,d)},t.prototype.m=function(d){this.u(1,d)},t.prototype.u=function(d,p){if(this.h!=0)throw Error("Cannot settle("+d+", "+p+"): Promise already settled in state"+this.h);this.h=d,this.i=p,this.h===2&&this.H(),this.B()},t.prototype.H=function(){var d=this;u(function(){if(d.C()){var p=_.console;typeof p<"u"&&p.error(d.i)}},1)},t.prototype.C=function(){if(this.o)return!1;var d=_.CustomEvent,p=_.Event,g=_.dispatchEvent;return typeof g>"u"?!0:(typeof d=="function"?d=new d("unhandledrejection",{cancelable:!0}):typeof p=="function"?d=new p("unhandledrejection",{cancelable:!0}):(d=_.document.createEvent("CustomEvent"),d.initCustomEvent("unhandledrejection",!1,!0,d)),d.promise=this,d.reason=this.i,g(d))},t.prototype.B=function(){if(this.g!=null){for(var d=0;d<this.g.length;++d)a.h(this.g[d]);this.g=null}};var a=new n;return t.prototype.I=function(d){var p=this.j();d.Pe(p.resolve,p.reject)},t.prototype.J=function(d,p){var g=this.j();try{d.call(p,g.resolve,g.reject)}catch(y){g.reject(y)}},t.prototype.then=function(d,p){function g(M,L){return typeof M=="function"?function(P){try{y(M(P))}catch(N){w(N)}}:L}var y,w,T=new t(function(M,L){y=M,w=L});return this.Pe(g(d,y),g(p,w)),T},t.prototype.catch=function(d){return this.then(void 0,d)},t.prototype.Pe=function(d,p){function g(){switch(y.h){case 1:d(y.i);break;case 2:p(y.i);break;default:throw Error("Unexpected state: "+y.h)}}var y=this;this.g==null?a.h(g):this.g.push(g),this.o=!0},t.resolve=o,t.reject=function(d){return new t(function(p,g){g(d)})},t.race=function(d){return new t(function(p,g){for(var y=R(d),w=y.next();!w.done;w=y.next())o(w.value).Pe(p,g)})},t.all=function(d){var p=R(d),g=p.next();return g.done?o([]):new t(function(y,w){function T(P){return function(N){M[P]=N,L--,L==0&&y(M)}}var M=[],L=0;do M.push(void 0),L++,o(g.value).Pe(T(M.length-1),w),g=p.next();while(!g.done)})},t});function De(e,t){return Object.prototype.hasOwnProperty.call(e,t)}k("WeakMap",function(e){function t(g){if(this.g=(p+=Math.random()+1).toString(),g){g=R(g);for(var y;!(y=g.next()).done;)y=y.value,this.set(y[0],y[1])}}function n(){}function o(g){var y=typeof g;return y==="object"&&g!==null||y==="function"}function u(g){if(!De(g,d)){var y=new n;r(g,d,{value:y})}}function a(g){var y=Object[g];y&&(Object[g]=function(w){return w instanceof n?w:(Object.isExtensible(w)&&u(w),y(w))})}if((function(){if(!e||!Object.seal)return!1;try{var g=Object.seal({}),y=Object.seal({}),w=new e([[g,2],[y,3]]);return w.get(g)!=2||w.get(y)!=3?!1:(w.delete(g),w.set(y,4),!w.has(g)&&w.get(y)==4)}catch{return!1}})())return e;var d="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var p=0;return t.prototype.set=function(g,y){if(!o(g))throw Error("Invalid WeakMap key");if(u(g),!De(g,d))throw Error("WeakMap key fail: "+g);return g[d][this.g]=y,this},t.prototype.get=function(g){return o(g)&&De(g,d)?g[d][this.g]:void 0},t.prototype.has=function(g){return o(g)&&De(g,d)&&De(g[d],this.g)},t.prototype.delete=function(g){return o(g)&&De(g,d)&&De(g[d],this.g)?delete g[d][this.g]:!1},t}),k("Map",function(e){function t(){var p={};return p.wc=p.next=p.head=p}function n(p,g){var y=p[1];return ge(function(){if(y){for(;y.head!=p[1];)y=y.wc;for(;y.next!=y.head;)return y=y.next,{done:!1,value:g(y)};y=null}return{done:!0,value:void 0}})}function o(p,g){var y=g&&typeof g;y=="object"||y=="function"?a.has(g)?y=a.get(g):(y=""+ ++d,a.set(g,y)):y="p_"+g;var w=p[0][y];if(w&&De(p[0],y))for(p=0;p<w.length;p++){var T=w[p];if(g!==g&&T.key!==T.key||g===T.key)return{id:y,list:w,index:p,entry:T}}return{id:y,list:w,index:-1,entry:void 0}}function u(p){if(this[0]={},this[1]=t(),this.size=0,p){p=R(p);for(var g;!(g=p.next()).done;)g=g.value,this.set(g[0],g[1])}}if((function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var p=Object.seal({x:4}),g=new e(R([[p,"s"]]));if(g.get(p)!="s"||g.size!=1||g.get({x:4})||g.set({x:4},"t")!=g||g.size!=2)return!1;var y=g.entries(),w=y.next();return w.done||w.value[0]!=p||w.value[1]!="s"?!1:(w=y.next(),!(w.done||w.value[0].x!=4||w.value[1]!="t"||!y.next().done))}catch{return!1}})())return e;var a=new WeakMap;u.prototype.set=function(p,g){p=p===0?0:p;var y=o(this,p);return y.list||(y.list=this[0][y.id]=[]),y.entry?y.entry.value=g:(y.entry={next:this[1],wc:this[1].wc,head:this[1],key:p,value:g},y.list.push(y.entry),this[1].wc.next=y.entry,this[1].wc=y.entry,this.size++),this},u.prototype.delete=function(p){return p=o(this,p),p.entry&&p.list?(p.list.splice(p.index,1),p.list.length||delete this[0][p.id],p.entry.wc.next=p.entry.next,p.entry.next.wc=p.entry.wc,p.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this[0]={},this[1]=this[1].wc=t(),this.size=0},u.prototype.has=function(p){return!!o(this,p).entry},u.prototype.get=function(p){return(p=o(this,p).entry)&&p.value},u.prototype.entries=function(){return n(this,function(p){return[p.key,p.value]})},u.prototype.keys=function(){return n(this,function(p){return p.key})},u.prototype.values=function(){return n(this,function(p){return p.value})},u.prototype.forEach=function(p,g){for(var y=this.entries(),w;!(w=y.next()).done;)w=w.value,p.call(g,w[1],w[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var d=0;return u}),k("Set",function(e){function t(n){if(this.g=new Map,n){n=R(n);for(var o;!(o=n.next()).done;)this.add(o.value)}this.size=this.g.size}return(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),o=new e(R([n]));if(!o.has(n)||o.size!=1||o.add(n)!=o||o.size!=1||o.add({x:4})!=o||o.size!=2)return!1;var u=o.entries(),a=u.next();return a.done||a.value[0]!=n||a.value[1]!=n?!1:(a=u.next(),a.done||a.value[0]==n||a.value[0].x!=4||a.value[1]!=a.value[0]?!1:u.next().done)}catch{return!1}})()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,o){var u=this;this.g.forEach(function(a){return n.call(o,a,a,u)})},t)});function qe(e,t,n){e instanceof String&&(e=String(e));for(var o=e.length,u=0;u<o;u++){var a=e[u];if(t.call(n,a,u,e))return{gi:u,v:a}}return{gi:-1,v:void 0}}k("Array.prototype.findIndex",function(e){return e||function(t,n){return qe(this,t,n).gi}});function an(e,t){e instanceof String&&(e+="");var n=0,o=!1,u={next:function(){if(!o&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return o=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}k("Array.prototype.values",function(e){return e||function(){return an(this,function(t,n){return n})}}),k("Array.from",function(e){return e||function(t,n,o){n=n??function(p){return p};var u=[],a=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof a=="function"){t=a.call(t);for(var d=0;!(a=t.next()).done;)u.push(n.call(o,a.value,d++))}else for(a=t.length,d=0;d<a;d++)u.push(n.call(o,t[d],d));return u}}),k("Array.prototype.keys",function(e){return e||function(){return an(this,function(t){return t})}}),k("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),k("Array.prototype.includes",function(e){return e||function(t,n){var o=this;o instanceof String&&(o=String(o));var u=o.length;for(n=n||0,n<0&&(n=Math.max(n+u,0));n<u;n++){var a=o[n];if(a===t||Object.is(a,t))return!0}return!1}});function wi(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}k("String.prototype.includes",function(e){return e||function(t,n){return wi(this,t,"includes").indexOf(t,n||0)!==-1}}),k("String.fromCodePoint",function(e){return e||function(t){for(var n="",o=0;o<arguments.length;o++){var u=Number(arguments[o]);if(u<0||u>1114111||u!==Math.floor(u))throw new RangeError("invalid_code_point "+u);u<=65535?n+=String.fromCharCode(u):(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),n+=String.fromCharCode(u&1023|56320))}return n}}),k("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=R(n);for(var o;!(o=n.next()).done;)this.add(o.value)}}return(function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),o=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(o)?!1:(u.delete(n),u.add(o),!u.has(n)&&u.has(o))}catch{return!1}})()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),k("Array.prototype.find",function(e){return e||function(t,n){return qe(this,t,n).v}}),k("String.prototype.startsWith",function(e){return e||function(t,n){var o=wi(this,t,"startsWith"),u=o.length,a=t.length;n=Math.max(0,Math.min(n|0,o.length));for(var d=0;d<a&&n<u;)if(o[n++]!=t[d++])return!1;return d>=a}}),k("Object.entries",function(e){return e||function(t){var n=[],o;for(o in t)De(t,o)&&n.push([o,t[o]]);return n}});var tr=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(o)for(var u in o)De(o,u)&&(e[u]=o[u])}return e};k("Object.assign",function(e){return e||tr}),k("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),k("Array.prototype.entries",function(e){return e||function(){return an(this,function(t,n){return[t,n]})}}),k("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),k("String.prototype.repeat",function(e){return e||function(t){var n=wi(this,null,"repeat");if(t<0||t>1342177279)throw new RangeError("Invalid count value");t|=0;for(var o="";t;)t&1&&(o+=n),(t>>>=1)&&(n+=n);return o}}),k("Number.EPSILON",function(){return 2220446049250313e-31}),k("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),k("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),k("Object.values",function(e){return e||function(t){var n=[],o;for(o in t)De(t,o)&&n.push(t[o]);return n}}),k("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),k("String.prototype.endsWith",function(e){return e||function(t,n){var o=wi(this,t,"endsWith");n===void 0&&(n=o.length),n=Math.max(0,Math.min(n|0,o.length));for(var u=t.length;u>0&&n>0;)if(o[--n]!=t[--u])return!1;return u<=0}}),k("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return t<0?-n:n}});var ui=this||self;function be(e,t){e=e.split(".");var n=ui;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var o;e.length&&(o=e.shift());)e.length||t===void 0?n[o]&&n[o]!==Object.prototype[o]?n=n[o]:n=n[o]={}:n[o]=t}function Gi(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}Gi.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function Si(e){return e.h/(1-Math.pow(e.g,e.i))}function li(){this.h=new Gi(2),this.j=new Gi(5),this.g=0,this.i=128e3,this.l=16e3}li.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},li.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},li.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(Si(this.h),Si(this.j))};function ar(){}function Rn(){}function st(){}function ai(e){var t=ft.apply(1,arguments);Be.has(e)||(Be.add(e),st.apply(ar,le(t)))}function Yr(){}function ef(){}function tf(){}var Be=new Set;f.console&&(new Map().set(1,function(){return console.error.apply(console,le(ft.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,le(ft.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,le(ft.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,le(ft.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,le(ft.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,le(ft.apply(0,arguments)))}),st=function(){return console.warn.apply(console,le(ft.apply(0,arguments)))},Rn=function(){console.error.apply(console,le(ft.apply(0,arguments)))});function Z(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Ue(e,t){t=e.indexOf(t),t>-1&&e.splice(t,1)}function Je(e,t,n){if(n||(n=Z),e.length!=t.length)return!1;t=t.slice(),e=R(e);for(var o=e.next(),u={};!o.done;u={mi:void 0},o=e.next()){if(u.mi=o.value,o=t.findIndex((function(a){return function(d){return n(a.mi,d)}})(u)),o==-1)return!1;t[o]=t[t.length-1],t.pop()}return t.length==0}function Rt(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=Z),e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(!n(e[o],t[o]))return!1;return!0}function it(){this.g=new Map}m=it.prototype,m.push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},m.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},m.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(o){return o!=t});this.g.set(e,n),n.length||this.g.delete(e)}},m.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},m.size=function(){return this.g.size},m.keys=function(){return Array.from(this.g.keys())};function Le(){this.g=new it}m=Le.prototype,m.release=function(){this.Qa(),this.g=null},m.D=function(e,t,n,o){this.g&&(e=new xt(e,t,n,o),this.g.push(t,e))},m.Aa=function(e,t,n,o){function u(d){a.Ma(e,t,u),n(d)}var a=this;this.D(e,t,u,o)},m.Ma=function(e,t,n){if(this.g){var o=this.g.get(t)||[];o=R(o);for(var u=o.next();!u.done;u=o.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.Ma(),this.g.remove(t,u))}},m.Qa=function(){if(this.g){for(var e=[],t=R(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,le(n.value));for(e=R(e),t=e.next();!t.done;t=e.next())t.value.Ma();this.g.g.clear()}},be("shaka.util.EventManager",Le),Le.prototype.removeAll=Le.prototype.Qa,Le.prototype.unlisten=Le.prototype.Ma,Le.prototype.listenOnce=Le.prototype.Aa,Le.prototype.listen=Le.prototype.D,Le.prototype.release=Le.prototype.release;function xt(e,t,n,o){this.target=e,this.type=t,this.listener=n,this.g=dn(e,o),this.target.addEventListener(t,n,this.g)}xt.prototype.Ma=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function dn(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(o){return!n.has(o)}),zt(e)?t:t.capture||!1}function zt(e){var t=Se;if(t==null){t=!1;try{var n={},o={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",o),Object.defineProperty(n,"capture",o),o=function(){},e.addEventListener("test",o,n),e.removeEventListener("test",o,n)}catch{t=!1}Se=t}return t||!1}var Se=void 0;be("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function re(e){this.h=e,this.g=void 0}re.prototype.value=function(){return this.g===void 0&&(this.g=this.h()),this.g};/*
 @license
 Shaka Player
 Copyright 2025 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Me(){return Jb.value()}var fn=null,xs=null,Jb=new re(function(){var e=void 0;return fn&&(e=fn()),!e&&xs&&(e=xs()),e});function jh(e,t){this.g=e,this.h=t}jh.prototype.toString=function(){return"v"+this.g+"."+this.h};function yt(e,t){var n=new jh(5,0),o=Oy,u=o.g,a=n.h-u.h;((n.g-u.g||a)>0?o.i:o.h)(o.g,n,e,t)}function Qb(e,t,n,o){st([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",o].join(" "))}function Zb(e,t,n,o){Rn([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",o].join(" "))}var Oy=null;/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var e4=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Qt(e){var t;e instanceof Qt?(nf(this,e.bc),this.hd=e.hd,rf(this,e.Eb),$h(this,e.Cd),this.qb=e.qb,_o(this,e.g.clone()),this.Rc=e.Rc):e&&(t=String(e).match(e4))?(nf(this,t[1]||"",!0),this.hd=ws(t[2]||""),rf(this,t[3]||"",!0),$h(this,t[4]),this.qb=ws(t[5]||"",!0),_o(this,t[6]||"",!0),this.Rc=ws(t[7]||"")):this.g=new Ss(null)}m=Qt.prototype,m.bc="",m.hd="",m.Eb="",m.Cd=null,m.qb="",m.Rc="",m.toString=function(){var e=[],t=this.bc;if(t&&e.push(el(t,Ny,!0),":"),t=this.Eb){e.push("//");var n=this.hd;n&&e.push(el(n,Ny,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Cd,t!=null&&e.push(":",String(t))}return(t=this.qb)&&(this.Eb&&t.charAt(0)!="/"&&e.push("/"),e.push(el(t,t.charAt(0)=="/"?i4:n4,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Rc)&&e.push("#",el(t,o4)),e.join("")},m.resolve=function(e){var t=this.clone();t.bc==="data"&&(t=new Qt);var n=!!e.bc;n?nf(t,e.bc):n=!!e.hd,n?t.hd=e.hd:n=!!e.Eb,n?rf(t,e.Eb):n=e.Cd!=null;var o=e.qb;if(n)$h(t,e.Cd);else if(n=!!e.qb){if(o.charAt(0)!="/")if(this.Eb&&!this.qb)o="/"+o;else{var u=t.qb.lastIndexOf("/");u!=-1&&(o=t.qb.substr(0,u+1)+o)}if(o==".."||o==".")o="";else if(o.indexOf("./")!=-1||o.indexOf("/.")!=-1){u=o.lastIndexOf("/",0)==0,o=o.split("/");for(var a=[],d=0;d<o.length;){var p=o[d++];p=="."?u&&d==o.length&&a.push(""):p==".."?((a.length>1||a.length==1&&a[0]!="")&&a.pop(),u&&d==o.length&&a.push("")):(a.push(p),u=!0)}o=a.join("/")}}return n?t.qb=o:n=e.g.toString()!=="",n?_o(t,e.g.clone()):n=!!e.Rc,n&&(t.Rc=e.Rc),t},m.clone=function(){return new Qt(this)};function nf(e,t,n){e.bc=n?ws(t,!0):t,e.bc&&(e.bc=e.bc.replace(/:$/,""))}function rf(e,t,n){e.Eb=n?ws(t,!0):t}function $h(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.Cd=t}else e.Cd=null}function _o(e,t,n){t instanceof Ss?e.g=t:(n||(t=el(t,r4)),e.g=new Ss(t))}function ws(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function el(e,t,n){return e!=null?(e=encodeURI(e).replace(t,t4),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function t4(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Ny=/[#\/\?@]/g,n4=/[#\?:]/g,i4=/[#\?]/g,r4=/[#\?@]/g,o4=/#/g;function Ss(e){this.g=e||null}function of(e){if(!e.eb&&(e.eb=new Map,e.Qd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var o=t[n].indexOf("="),u=null;if(o>=0){var a=t[n].substring(0,o);u=t[n].substring(o+1)}else a=t[n];a=decodeURIComponent(a),u=u||"",e.add(a,decodeURIComponent(u))}}m=Ss.prototype,m.eb=null,m.Qd=null;function Uy(e){return of(e),e.Qd}m.add=function(e,t){of(this),this.g=null;var n=this.eb.has(e)?this.eb.get(e):null;return n||this.eb.set(e,n=[]),n.push(t),this.Qd++,this},m.set=function(e,t){return of(this),this.g=null,this.eb.has(e)?this.eb.set(e,[t]):this.add(e,t),this},m.get=function(e){return of(this),this.eb.get(e)||[]},m.toString=function(){if(this.g)return this.g;if(!this.eb||!this.eb.size)return"";for(var e=[],t=R(this.eb.keys()),n=t.next();!n.done;n=t.next()){var o=n.value;n=encodeURIComponent(o),o=this.eb.get(o);for(var u=0;u<o.length;u++){var a=n;o[u]!==""&&(a+="="+encodeURIComponent(o[u])),e.push(a)}}return this.g=e.join("&")},m.clone=function(){var e=new Ss;if(e.g=this.g,this.eb){for(var t=new Map,n=R(this.eb),o=n.next();!o.done;o=n.next()){var u=R(o.value);o=u.next().value,u=u.next().value,t.set(o,u.concat())}e.eb=t,e.Qd=this.Qd}return e};function Ts(){}function wr(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=et(e);t=et(t);for(var o=0;o<e.byteLength;o++)if(n[o]!=t[o])return!1;return!0}function _i(e){return ArrayBuffer.isView(e)?e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function et(e,t,n){return n=n===void 0?1/0:n,zh(e,t===void 0?0:t,n,Uint8Array)}function By(e,t,n){return n=n===void 0?1/0:n,zh(e,t===void 0?0:t,n,Uint16Array)}function Zn(e,t,n){return n=n===void 0?1/0:n,zh(e,t===void 0?0:t,n,DataView)}function zh(e,t,n,o){var u=ArrayBuffer.isView(e)?e.buffer:e,a=1;"BYTES_PER_ELEMENT"in o&&(a=o.BYTES_PER_ELEMENT);var d=((e.byteOffset||0)+e.byteLength)/a;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/a,d))),new o(u,e,Math.floor(Math.min(e+Math.max(n,0),d))-e)}be("shaka.util.BufferUtils",Ts),Ts.toDataView=Zn,Ts.toUint16=By,Ts.toUint8=et,Ts.toArrayBuffer=_i,Ts.equal=wr;function q(e,t,n){var o=ft.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=o,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}q.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},be("shaka.util.Error",q),q.Severity={RECOVERABLE:1,CRITICAL:2},q.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},q.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4054,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007};function Lo(){}function Ht(e){if(!e)return"";if(e=et(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),f.TextDecoder&&!Me().sh())return e=new TextDecoder().decode(e),e.includes("�")&&Rn('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var o=65533;if((e[n]&128)==0?o=e[n]:e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(o=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(o=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(o=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3),o<=65535)t+=String.fromCharCode(o);else{o-=65536;var u=o&1023;t+=String.fromCharCode(55296+(o>>10)),t+=String.fromCharCode(56320+u)}}return t}function qr(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new q(2,2,2004);n=Math.floor(e.byteLength/2);var o=new Uint16Array(n);e=Zn(e);for(var u=0;u<n;u++)o[u]=e.getUint16(u*2,t);return Hh(o)}function fr(e){function t(o){return n.byteLength<=o||n[o]>=9&&n[o]<=126}if(!e)return"";var n=et(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Ht(n);if(n[0]==254&&n[1]==255)return qr(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return qr(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return qr(e,!1);if(n[1]==0&&n[3]==0)return qr(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Ht(e);throw new q(2,2,2003)}function Xi(e){if(f.TextEncoder&&!Me().sh()){var t=new TextEncoder;return _i(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return _i(t)}function Vh(e,t){for(var n=new ArrayBuffer(e.length*2),o=new DataView(n),u=0;u<e.length;++u)o.setUint16(u*2,e.charCodeAt(u),t);return n}function Hh(e){return Fy.value()(e)}function Wn(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,o=RegExp(n.source);return e&&o.test(e)?e.replace(n,function(u){return u[1]=="#"?(u=u[2]=="x"||u[2]=="X"?parseInt(u.substring(3),16):parseInt(u.substring(2),10),u>=0&&u<=1114111?String.fromCodePoint(u):""):t[u]||"'"}):e||""}be("shaka.util.StringUtils",Lo),Lo.resetFromCharCode=function(){Fy.g=void 0},Lo.toUTF16=Vh,Lo.toUTF8=Xi,Lo.fromBytesAutoDetect=fr,Lo.fromUTF16=qr,Lo.fromUTF8=Ht;var Fy=new re(function(){function e(n){try{var o=new Uint8Array(n);return String.fromCharCode.apply(null,o).length>0}catch{return!1}}for(var t={Oc:65536};t.Oc>0;t={Oc:t.Oc},t.Oc/=2)if(e(t.Oc))return(function(n){return function(o){for(var u="",a=0;a<o.length;a+=n.Oc)u+=String.fromCharCode.apply(null,o.subarray(a,a+n.Oc));return u}})(t);return null});function _n(){}function sf(e){return e=Hh(et(e)),btoa(e)}function Sr(e,t){return t=t??!0,e=sf(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Li(e){e=f.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function Po(e){for(var t=e.length/2,n=new Uint8Array(t),o=0;o<t;o++)n[o]=f.parseInt(e.substr(o*2,2),16);return n}function Tr(e){var t=et(e);e="",t=R(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function sn(){for(var e=ft.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var o=n=0;o<e.length;++o){var u=e[o];ArrayBuffer.isView(u)&&u.BYTES_PER_ELEMENT===1?t.set(u,n):t.set(et(u),n),n+=u.byteLength}return t}be("shaka.util.Uint8ArrayUtils",_n),_n.concat=sn,_n.toHex=Tr,_n.fromHex=Po,_n.fromBase64=Li,_n.toBase64=Sr,_n.toStandardBase64=sf;function wn(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var o=new Qt(e[0]);return t=new Qt(t[0]),t=o.resolve(t),n&&_o(t,n),[t.toString()]}t=t.map(function(p){return new Qt(p)}),o=[],e=R(e);for(var u=e.next();!u.done;u=e.next()){u=new Qt(u.value);for(var a=R(t),d=a.next();!d.done;d=a.next())d=u.resolve(d.value),n&&_o(d,n),o.push(d.toString())}return o}function Cr(e,t,n,o){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},o&&(e.keySystemUris=new Set([o])),e}function jy(e,t){t=t===void 0?"cenc":t;var n=[],o=[],u=[];e.forEach(function(d,p){var g=p;g.length!=22&&(g=Sr(Po(p),!1));var y=d;y.length!=22&&(y=Sr(Po(d),!1)),d={kty:"oct",kid:g,k:y},n.push(d),o.push(d.kid),u.push(p)}),e=JSON.stringify({keys:n});var a=JSON.stringify({kids:o});return a=[{initData:et(Xi(a)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+f.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:a,keyIds:new Set(u)}}function Cs(e,t){if(t.length==1)return t[0];if(e=ei(e,t),e!=null)return e;throw new q(2,4,4025,t)}function ei(e,t){var n=zy.get(e);n=R(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;for(var u=R(t),a=u.next();!a.done;a=u.next())if(a=a.value,o.test(a.trim()))return a.trim()}return e==lt?"":null}function Gh(e,t){var n=[];e=zy.get(e),e=R(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;for(var u=R(t),a=u.next();!a.done;a=u.next())a=a.value,o.test(a.trim())&&n.push(a.trim())}return n}var lt="text",cn={Ca:"video",ia:"audio",Na:lt,Uf:"image",ql:"application"},$y=1/15,zy=new Map().set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function tl(e,t,n,o){this.g=null,this.l=e,this.i=t,this.m=n,this.o=o,this.j=!1;e:{if(typeof libDPIModule>"u"&&st("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,yt("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{st("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(st("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||st(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function uf(e,t,n,o){o.type!=="video"||e.o&&!o.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",o.id,-n,!e.o)}function Vy(e){e.g&&e.i.classList.add("shaka-hidden")}tl.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Hy(e){return e&&typeof LCEVCdec<"u"?e.codecs=="lvc1":!1}be("shaka.lcevc.Dec",tl),tl.prototype.release=tl.prototype.release;function jn(e){if(Xh.has(e))return Xh.get(e);var t=f.ManagedMediaSource||f.MediaSource;return t?(t=t.isTypeSupported(e),Xh.set(e,t),t):!1}function bs(){var e=f.ManagedSourceBuffer||f.SourceBuffer;return!!e&&!!e.prototype&&!!e.prototype.changeType}function Gy(){var e=f.ManagedMediaSource||f.MediaSource;return e&&e.prototype?!!e.prototype.setLiveSeekableRange&&!!e.prototype.clearLiveSeekableRange:!1}var Xh=new Map;function nl(){}nl.prototype.extract=function(){},nl.prototype.decode=function(){return[]},nl.prototype.clear=function(){},nl.prototype.getStreams=function(){return[]};function Wh(){}Wh.prototype.init=function(){},Wh.prototype.parse=function(){return[]};function Xy(){}m=Xy.prototype,m.init=function(){},m.xf=function(){},m.Ld=function(){},m.remove=function(){},m.Vf=function(){},be("shaka.media.IClosedCaptionParser",Xy);function nr(e){this.h=new Map,this.i=0,this.j=new Wh,(e=Wy(e.toLowerCase()))&&(this.j=e()),this.g=new nl,(e=Do)&&(this.g=e(),this.h.set(this.i,this.g))}m=nr.prototype,m.init=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?-1:n,n!=-1&&this.i!=n){t=n;var o=this.h.get(t);this.h.set(this.i,this.g),o?this.g=o:((o=Do)&&(this.g=o()),this.h.set(t,this.g))}else t||this.Ld();this.j.init(e),n!=-1&&(this.i=n)},m.xf=function(e){e=this.j.parse(e),e=R(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=et(t.packet);n.length>0&&this.g.extract(n,t.pts)}return this.g.decode()},m.Ld=function(){this.g.clear()},m.remove=function(e){e=e===void 0?[]:e,e=new Set(e);for(var t=R(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var o=this.h.get(n);o&&o.clear(),this.h.delete(n)}},m.Vf=function(){return this.g.getStreams()};function Kh(e,t){Yh.set(e,t)}function Wy(e){return Yh.get(e)}be("shaka.media.ClosedCaptionParser",nr),nr.findDecoder=function(){return Do},nr.unregisterDecoder=function(){Do=null},nr.registerDecoder=function(e){Do=e},nr.findParser=Wy,nr.unregisterParser=function(e){Yh.delete(e)},nr.registerParser=Kh;var Yh=new Map,Do=null;function Oo(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=fi,this.scroll=Ky}be("shaka.text.CueRegion",Oo);var fi=1;Oo.units={PX:0,PERCENTAGE:fi,LINES:2};var Ky="";Oo.scrollMode={NONE:Ky,UP:"up"};function ks(e){this.h=e||"",this.g=0}function As(e){No(e,/[ \t]+/gm)}function No(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Uo(e){return e.g==e.h.length?null:(e=No(e,/[^ \t\n]*/gm))?e[0]:null}function il(e){if(e=No(e,s4),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return t>59||n>59?null:(Number(e[6])||0)/1e3+n+t*60+(Number(e[1])||0)*3600}function Es(e){return e?il(new ks(e)):null}var s4=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function lf(){}function Wi(e){function t(o){switch(typeof o){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return o;default:if(!o||ArrayBuffer.isView(o))return o;if(n.has(o))return null;var u=Array.isArray(o);if(o.constructor!=Object&&!u)return null;n.add(o);var a=u?[]:{},d;for(d in o)a[d]=t(o[d]);return u&&(a.length=o.length),a}}var n=new WeakSet;return t(e)}function Jr(e){var t={},n;for(n in e)t[n]=e[n];return t}function af(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var o=n.toString(),u=e[n];u!==void 0&&(u=af(u))&&t.push(o+":"+u)}e="["+t.join(",")+"]"}else if(typeof e=="function")e="";else if(e instanceof Object){for(n=Object.keys(e),n.sort(),t=[],n=R(n),o=n.next();!o.done;o=n.next())u=o.value,o=JSON.stringify(u),u=e[u],u!==void 0&&(u=af(u))&&t.push(o+":"+u);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}be("shaka.util.ObjectUtils",lf),lf.alphabeticalKeyOrderStringify=af,lf.shallowCloneObject=Jr,lf.cloneObject=Wi;/*
 @license
 tXml
 Copyright 2015 Tobias Nickel
 SPDX-License-Identifier: MIT
*/function rl(e,t){var n=n===void 0?!1:n;return e=fr(e),Bo(e,t,n)}function Bo(e,t,n){return e=u4(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(o){return t.split(",").includes(o.tagName)}))?e:null}function qh(e){return Qh.has(e)?Qh.get(e):""}function u4(e,t){function n(a,d){d=d===void 0?!1:d;for(var p=[];e[u];)if(e.charCodeAt(u)==60){if(e.charCodeAt(u+1)===47){d=u+2,u=e.indexOf(">",u),d=e.substring(d,u);var g=d.indexOf(a);if(g==-1){var y=a.indexOf(".");y>0&&(g=d.indexOf(a.substring(0,y)))}if(g==-1)throw a=e.substring(0,u).split(`
`),Error(`Unexpected close tag
Line: `+(a.length-1)+`
Column: `+(a[a.length-1].length+1)+`
Char: `+e[u]);u+1&&(u+=1);break}else if(e.charCodeAt(u+1)===33){if(e.charCodeAt(u+2)==45){for(;u!==-1&&(e.charCodeAt(u)!==62||e.charCodeAt(u-1)!=45||e.charCodeAt(u-2)!=45||u==-1);)u=e.indexOf(">",u+1);u===-1&&(u=e.length)}else if(e.charCodeAt(u+2)===91&&e.charCodeAt(u+8)===91&&e.substr(u+3,5).toLowerCase()==="cdata"){g=e.indexOf("]]>",u),g==-1?(p.push(e.substr(u+9)),u=e.length):(p.push(e.substring(u+9,g)),u=g+3);continue}u++;continue}e:{y=d,u++;var w=o(),T={};for(g=[];e.charCodeAt(u)!==62&&e[u];){var M=e.charCodeAt(u);if(M>64&&M<91||M>96&&M<123){M=o();for(var L=e.charCodeAt(u);L&&L!==39&&L!==34&&!(L>64&&L<91||L>96&&L<123)&&L!==62;)u++,L=e.charCodeAt(u);var P=u+1;if(u=e.indexOf(e[u],P),P=e.slice(P,u),L===39||L===34){if(u===-1){if(y={tagName:w,attributes:T,children:g,parent:null},t)for(w=0;w<g.length;w++)typeof g[w]!="string"&&(g[w].parent=y);g=y;break e}}else P=null,u--;if(M.startsWith("xmlns:")){L=P;var N=M.split(":")[1];Qh.set(L,N),Zh.set(N,L)}w==="tt"&&M==="xml:space"&&P==="preserve"&&(y=!0),T[M]=P}u++}for(e.charCodeAt(u-1)!==47?(u++,g=n(w,y)):u++,y={tagName:w,attributes:T,children:g,parent:null},w=g.length,T=0;T<w;T++)M=g[T],typeof M!="string"?t&&(M.parent=y):T==w-1&&M==`
`&&g.pop();g=y}if(p.push(g),typeof g=="string")break;g.tagName[0]==="?"&&g.children&&(p.push.apply(p,le(g.children)),g.children=[])}else g=u,u=e.indexOf("<",u)-1,u===-2&&(u=e.length),g=e.slice(g,u+1),d?g.length>0&&p.push(g):(p.length&&g.length==1&&g[0]==`
`||g.trim().length>0)&&p.push(g),u++;return p}function o(){for(var a=u;`\r
	>/= `.indexOf(e[u])===-1&&e[u];)u++;return e.slice(a,u)}var u=0;return n("")}function ff(e){return typeof e=="string"}function Yy(e){var t=[];if(!e.children)return[];e=R(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function bt(e,t){var n=[];if(!e.children)return[];e=R(e.children);for(var o=e.next();!o.done;o=e.next())o=o.value,o.tagName===t&&n.push(o);return n}function nn(e){return typeof e=="string"?Wn(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:Wn(e))}function Kn(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=nn(e))&&(e=e.trim()),e):null}function ir(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=R(e.children);for(var o=e.next();!o.done;o=e.next())ir(o.value,t,n)}return n}function Ft(e,t){return e=bt(e,t),e.length!=1?null:e[0]}function Pi(e,t,n){return e=qy(e,t,n),e.length!=1?null:e[0]}function Qe(e,t,n,o){o=o===void 0?null:o;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u??o}function br(e,t,n){return t=qh(t),e.attributes[t+":"+n]||null}function qy(e,t,n){var o=qh(t);if(t=[],e.children)for(n=o?o+":"+n:n,e=R(e.children),o=e.next();!o.done;o=e.next())(o=o.value)&&o.tagName===n&&t.push(o);return t}function cr(e,t,n){t=R(t);for(var o=t.next();!o.done;o=t.next())if(o=br(e,o.value,n))return o;return null}function kr(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function dr(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function cf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function bn(e){return e=Number(e),e%1===0?e:null}function hr(e){return e=Number(e),e%1===0&&e>0?e:null}function kn(e){return e=Number(e),e%1===0&&e>=0?e:null}function df(e){return e=Number(e),isNaN(e)?null:e}function hf(e){return e?e.toLowerCase()==="true":!1}function l4(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function pf(e){var t=[];e=Wn(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=R(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var o=n.match(/^([\w]+)/);if(o){var u=n.match(/(@id='(.*?)')/),a=n.match(/(@t='(\d+)')/),d=n.match(/(@n='(\d+)')/),p=n.match(/\[(\d+)\]/);t.push({name:o[0],id:u?u[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:a?Number(a[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:d?Number(d[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:p?Number(p[1])-1:null,Cc:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Cc=n.slice(1))}return t}function Jy(e,t){var n=pf(t.attributes.sel||"");if(n.length){var o=n[n.length-1],u=t.attributes.pos||null;n=o.position,n==null&&(o.t!==null&&(n=Qy(e,"t",o.t)),o.n!==null&&(n=Qy(e,"n",o.n))),n===null?n=u==="prepend"?0:e.length:u==="prepend"?--n:u==="after"&&++n,u=t.tagName,(o=o.Cc)&&e[n]?Zy(e[n],u,o,Kn(t)||""):(u!=="remove"&&u!=="replace"||e.splice(n,1),u!=="add"&&u!=="replace"||e.splice.apply(e,[n,0].concat(le(t.children))))}}function Qy(e,t,n){var o=0;e=R(e);for(var u=e.next();!u.done;u=e.next()){if(Number(u.value.attributes[t])===n)return o;o++}return null}function Zy(e,t,n,o){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=o)}function e1(e){var t="",n=e.tagName.split(":");n.length>0&&(t=n[0],t=Zh.has(t)?Zh.get(t):""),t=document.createElementNS(t,e.tagName);for(var o in e.attributes)t.setAttribute(o,e.attributes[o]);for(e=R(e.children),o=e.next();!o.done;o=e.next())o=o.value,n=void 0,typeof o=="string"?n=new Text(o):n=e1(o),t.appendChild(n);return t}function Jh(e){if(!e)return null;var t={tagName:e.tagName,attributes:Jr(e.attributes),children:[],parent:null};e=R(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=Jh(n),n.parent=t),t.children.push(n);return t}var Qh=new Map,Zh=new Map;function Ut(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Oo,this.position=null,this.positionAlign=yf,this.size=0,this.textAlign=pr,this.direction=ul,this.writingMode=Fo,this.lineInterpretation=ll,this.line=null,this.lineHeight="",this.lineAlign=jo,this.displayAlign=sl,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=u1,this.fontStyle=np,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={columns:32,rows:15}}function t1(e,t){return e=new Ut(e,t,""),e.lineBreak=!0,e}Ut.prototype.clone=function(){var e=new Ut(0,0,""),t;for(t in this)e[t]=this[t],Array.isArray(e[t])&&(e[t]=e[t].slice());return e};function gf(e,t){if(e.payload!=t.payload||!(Math.abs(e.startTime-t.startTime)<.001&&Math.abs(e.endTime-t.endTime)<.001))return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Rt(e.nestedCues,t.nestedCues,gf))return!1}else if(n=="region"||n=="cellResolution"){for(var o in e[n])if(e[n][o]!=t[n][o])return!1}else if(Array.isArray(e[n])){if(!Rt(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function mf(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&n1(t);var o=n;n=[];for(var u=-1,a=0;a<o.length;a++)o[a]==="<"?u=a+1:o[a]===">"&&u>0&&(u=o.substr(u,a-u),u.match(f4)&&n.push(u),u=-1);for(n=R(n),a=n.next();!a.done;a=n.next())a=a.value,o=o.replace("<"+a+">",'<div time="'+a+'">'),o+="</div>";e:{a=o,u=[];var d=-1;n="",o=!1;for(var p=0;p<a.length;p++)if(a[p]==="/"){var g=a.indexOf(">",p);if(g===-1){n=a;break e}if((g=a.substring(p+1,g))&&g=="v"){o=!0;var y=null;if(u.length&&(y=u[u.length-1]),y){if(y===g)n+="/"+g+">";else{if(!y.startsWith("v")){n+=a[p];continue}n+="/"+y+">"}p+=g.length+1}else n+=a[p]}else n+=a[p]}else a[p]==="<"?(d=p+1,a[d]!="v"&&(d=-1)):a[p]===">"&&d>0&&(u.push(a.substr(d,p-d)),d=-1),n+=a[p];for(a=R(u),u=a.next();!u.done;u=a.next())u=u.value,d=u.replace(" ",".voice-"),n=n.replace("<"+u+">","<"+d+">"),n=n.replace("</"+u+">","</"+d+">"),o||(n+="</"+d+">")}n=a4(n),e.payload="";try{var w=Bo("<span>"+n+"</span>","span")}catch{}if(w)if(w=w.children,w.length!=1||w[0].tagName)for(w=R(w),n=w.next();!n.done;n=w.next())i1(n.value,e,t);else e.payload=Wn(n);else e.payload=Wn(n)}else e.payload=Wn(n)}function n1(e){for(var t=R(Object.entries(o1)),n=t.next();!n.done;n=t.next()){var o=R(n.value);n=o.next().value,o=o.next().value;var u=new Ut(0,0,"");u.color=o,e.set("."+n,u)}for(t=R(Object.entries(s1)),n=t.next();!n.done;n=t.next())o=R(n.value),n=o.next().value,o=o.next().value,u=new Ut(0,0,""),u.backgroundColor=o,e.set("."+n,u)}function a4(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,o=RegExp(n.source);return e&&o.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function i1(e,t,n){var o=t.clone();if(o.nestedCues=[],o.payload="",o.rubyTag="",o.line=null,o.region=new Oo,o.position=null,o.size=0,o.textAlign=pr,e.tagName)for(var u=R(e.tagName.split(/(?=[ .])+/g)),a=u.next();!a.done;a=u.next()){var d=a=a.value;if(d.startsWith(".voice-")){var p=d.split("-").pop();d='v[voice="'+p+'"]',n.has(d)||(d="v[voice="+p+"]")}switch(n.has(d)&&(p=o,d=n.get(d))&&(p.backgroundColor=ol(d.backgroundColor,p.backgroundColor),p.color=ol(d.color,p.color),p.fontFamily=ol(d.fontFamily,p.fontFamily),p.fontSize=ol(d.fontSize,p.fontSize),p.textShadow=ol(d.textShadow,p.textShadow),p.fontWeight=d.fontWeight,p.fontStyle=d.fontStyle,p.opacity=d.opacity,p.rubyTag=d.rubyTag,p.textCombineUpright=d.textCombineUpright,p.wrapLine=d.wrapLine),a){case"br":o=t1(o.startTime,o.endTime),t.nestedCues.push(o);return;case"b":o.fontWeight=Is;break;case"i":o.fontStyle=Ms;break;case"u":o.textDecoration.push(Ar);break;case"font":(a=e.attributes.color)&&(o.color=a);break;case"div":if(a=e.attributes.time,!a)break;(a=Es(a))&&(o.startTime=a);break;case"ruby":case"rp":case"rt":o.rubyTag=a}}if(u=e.children,ff(e)||u.length==1&&ff(u[0]))for(n=nn(e).split(`
`),e=!0,n=R(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=t1(o.startTime,o.endTime),t.nestedCues.push(e)),u.length>0&&(e=o.clone(),e.payload=Wn(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(o),t=R(u),e=t.next();!e.done;e=t.next())i1(e.value,o,n)}function ol(e,t){return e&&e.length>0?e:t}be("shaka.text.Cue",Ut),Ut.parseCuePayload=mf,Ut.equal=gf,Ut.prototype.clone=Ut.prototype.clone;var yf="auto";Ut.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:yf};var pr="center",ep={LEFT:"left",RIGHT:"right",CENTER:pr,START:"start",END:"end"};Ut.textAlign=ep;var sl="after",r1={BEFORE:"before",CENTER:"center",AFTER:sl};Ut.displayAlign=r1;var ul="ltr";Ut.direction={HORIZONTAL_LEFT_TO_RIGHT:ul,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Fo="horizontal-tb";Ut.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Fo,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var ll=0;Ut.lineInterpretation={LINE_NUMBER:ll,PERCENTAGE:1};var jo="start",tp={CENTER:"center",START:jo,END:"end"};Ut.lineAlign=tp;var o1={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Ut.defaultTextColor=o1;var s1={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Ut.defaultTextBackgroundColor=s1;var u1=400,Is=700;Ut.fontWeight={NORMAL:u1,BOLD:Is};var np="normal",Ms="italic",l1={NORMAL:np,ITALIC:Ms,OBLIQUE:"oblique"};Ut.fontStyle=l1;var Ar="underline";Ut.textDecoration={UNDERLINE:Ar,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var f4=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Qr(){}Qr.prototype.destroy=function(){};function Er(e,t,n){ip.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,yf:t})}function Rs(e,t){for(var n=e.toLowerCase().split(";")[0],o=R([a1,op,rp,Zr]),u=o.next();!u.done;u=o.next())if(u=ip.get(n+"-"+u.value)){var a=u.yf(),d=a.isSupported(e,t);if(a.destroy(),d)return u.yf}return null}be("shaka.transmuxer.TransmuxerEngine",Qr),Qr.findTransmuxer=Rs,Qr.unregisterTransmuxer=function(e,t){ip.delete(e.toLowerCase().split(";")[0]+"-"+t)},Qr.registerTransmuxer=Er,Qr.prototype.destroy=Qr.prototype.destroy;var ip=new Map,Zr=1,rp=2,op=3,a1=4;Qr.PluginPriority={FALLBACK:Zr,PREFERRED_SECONDARY:rp,PREFERRED:op,APPLICATION:a1};function sp(){}function en(e,t){var n=e;return t&&!to.includes(e)&&(n+='; codecs="'+t+'"'),n}function vf(e,t){return t&&(e+='; codecs="'+t+'"'),e}function up(e,t,n){var o=en(e,t);return t=vf(e,t),Rs(t)?(e=Rs(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?o.replace("video","audio"):o,n}function al(e){return e.split(";")[0].split("/")[1]}function Ln(e){var t=f1(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):case e==="ac3":case e==="ac-3":return"ac-3";case(e==="mp4a"&&t==="a6"):case e==="eac3":case e==="ec-3":return"ec-3";case e==="ac-4":return"ac-4";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="vp09":case e==="vp9":return"vp9";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function eo(e){var t=[];e=R(e.split(","));for(var n=e.next();!n.done;n=e.next())n=f1(n.value),t.push(n[0]);return t.sort().join(",")}function ci(e){return e.split(";")[0]}function ti(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function fl(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function f1(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}be("shaka.util.MimeUtils",sp),sp.getFullTypeWithAllCodecs=vf,sp.getFullType=en,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var to=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Ir(e){this.i=null,this.j=e,this.C=!1,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.F="",this.B=function(){},this.o=new Map}function An(e,t){hl.set(e,t)}function cl(e){return hl.get(e)}function dl(e){return hl.has(e)?!0:e=="application/cea-608"||e=="application/cea-708"?!!Do:!1}Ir.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function c4(e,t,n,o,u){var a,d,p,g,y,w,T;return $(function(M){if(M.g==1)return D(M,Promise.resolve(),2);if(!e.i||!e.j)return M.return();if(n==null||o==null)return e.i.parseInit(et(t)),M.return();for(a=e.C?n:e.u,d={periodStart:e.u,segmentStart:n,segmentEnd:o,vttOffset:a},p=e.i.parseMedia(et(t),d,u,[]),g=R(p),y=g.next();!y.done;y=g.next())w=y.value,e.B(w,u||null,d);T=p.filter(function(L){return L.startTime>=e.l&&L.startTime<e.m}),e.j.append(T),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(o,e.m),te(M)})}Ir.prototype.remove=function(e,t){var n=this;return $(function(o){if(o.g==1)return D(o,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),te(o)})};function d4(e,t,n){e.l=t,e.m=n}function c1(e,t,n){if(e.F=t,t=e.o.get(t))for(var o=R(t.keys()),u=o.next();!u.done;u=o.next())(u=t.get(u.value).filter(function(a){return a.endTime<=n}))&&e.j.append(u)}function d1(e,t,n){t.startTime+=n,t.endTime+=n,t=R(t.nestedCues);for(var o=t.next();!o.done;o=t.next())d1(e,o.value,n)}function h4(e,t,n,o,u){var a=n+" "+o,d=new Map;t=R(t);for(var p=t.next();!p.done;p=t.next()){var g=p.value;p=g.stream,g=g.cue,d.has(p)||d.set(p,new Map),d.get(p).has(a)||d.get(p).set(a,[]),d1(e,g,u),g.startTime>=e.l&&g.startTime<e.m&&(d.get(p).get(a).push(g),p==e.F&&e.j.append([g]))}for(u=R(d.keys()),a=u.next();!a.done;a=u.next())for(a=a.value,e.o.has(a)||e.o.set(a,new Map),t=R(d.get(a).keys()),p=t.next();!p.done;p=t.next())p=p.value,g=d.get(a).get(p),e.o.get(a).set(p,g);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(o,e.m))}be("shaka.text.TextEngine",Ir),Ir.prototype.destroy=Ir.prototype.destroy,Ir.findParser=cl,Ir.unregisterParser=function(e){hl.delete(e)},Ir.registerParser=An;var hl=new Map;function pl(e){this.h=e,this.g=null}pl.prototype.ka=function(e){var t=this;this.stop();var n=!0,o=null;return this.g=function(){f.clearTimeout(o),n=!1},o=f.setTimeout(function(){n&&t.h()},e*1e3),this},pl.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function dt(e){this.h=e,this.g=null}dt.prototype.Kb=function(){return this.stop(),this.h(),this},dt.prototype.ka=function(e){var t=this;return this.stop(),this.g=new pl(function(){t.h()}).ka(e),this},dt.prototype.Fa=function(e){var t=this;return this.stop(),this.g=new pl(function(){t.g.ka(e),t.h()}).ka(e),this},dt.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},be("shaka.util.Timer",dt),dt.prototype.stop=dt.prototype.stop,dt.prototype.tickEvery=dt.prototype.Fa,dt.prototype.tickAfter=dt.prototype.ka,dt.prototype.tickNow=dt.prototype.Kb;function p4(e,t){return e.concat(t)}function g4(){}function no(e){return e!=null}function gl(e,t){return Promise.race([t,new Promise(function(n,o){new dt(o).ka(e)})])}function Ki(){}function _s(e,t){return e=St(e),t=St(t),e.split("-")[0]==t.split("-")[0]}function ml(e,t){return e=St(e),t=St(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function lp(e,t){return e=St(e),t=St(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function St(e){e=R(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=R(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=h1.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function $o(e,t){return e=St(e),t=St(t),t==e?4:ml(t,e)?3:lp(t,e)?2:ml(e,t)?1:0}function xf(e){var t=e.indexOf("-");return e=t>=0?e.substring(0,t):e,e=e.toLowerCase(),e=h1.get(e)||e}function ap(e){return e.language?St(e.language):e.audio&&e.audio.language?St(e.audio.language):e.video&&e.video.language?St(e.video.language):"und"}function wf(e,t){e=St(e);var n=new Set;t=R(t);for(var o=t.next();!o.done;o=t.next())n.add(St(o.value));for(t=R(n),o=t.next();!o.done;o=t.next())if(o=o.value,o==e)return o;for(t=R(n),o=t.next();!o.done;o=t.next())if(o=o.value,ml(o,e))return o;for(t=R(n),o=t.next();!o.done;o=t.next())if(o=o.value,lp(o,e))return o;for(n=R(n),t=n.next();!t.done;t=n.next())if(t=t.value,ml(e,t))return t;return null}be("shaka.util.LanguageUtils",Ki),Ki.findClosestLocale=wf,Ki.getLocaleForVariant=ap,Ki.getLocaleForText=function(e){return St(e.language||"und")},Ki.getBase=xf,Ki.relatedness=$o,Ki.areSiblings=function(e,t){var n=xf(e),o=xf(t);return e!=n&&t!=o&&n==o},Ki.normalize=St,Ki.isSiblingOf=lp,Ki.isParentOf=ml,Ki.areLanguageCompatible=_s,Ki.areLocaleCompatible=function(e,t){return e=St(e),t=St(t),e==t};var h1=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function p1(){}function g1(e,t,n,o,u){function a(F){var B=String(F.width||"")+String(F.height||"")+String(Math.round(F.frameRate||0))+(F.hdr||"")+F.fastSwitching;return F.dependencyStream&&(B+=F.dependencyStream.baseOriginalId||""),F.roles&&(B+=F.roles.sort().join("_")),B}function d(F){var B=F.language+(F.channelsCount||0)+(F.audioSamplingRate||0)+F.roles.join(",")+F.label+F.groupId+F.fastSwitching;return F.dependencyStream&&(B+=F.dependencyStream.baseOriginalId||""),B}if(u.length){var p=e.textStreams;u=R(u);for(var g=u.next(),y={};!g.done;y={Ch:void 0},g=u.next())if(y.Ch=g.value,g=p.filter((function(F){return function(B){return!!(B.codecs.startsWith(F.Ch)||B.mimeType.startsWith(F.Ch))}})(y)),g.length){p=g;break}e.textStreams=p}if(p=e.variants,(t.length||n.length)&&(p=m4(p,t,n)),o.length){for(t=new it,n=R(p),p=n.next();!p.done;p=n.next())p=p.value,t.push(String(p.video.width||0),p);var w=[];t.forEach(function(F,B){F=0;var V=[];B=R(B);for(var Y=B.next(),J={};!Y.done;J={Tf:void 0},Y=B.next())J.Tf=Y.value,Y=o.filter((function(H){return function(z){return H.Tf.decodingInfos[0][z]}})(J)).length,Y>F?(F=Y,V=[J.Tf]):Y==F&&V.push(J.Tf);w.push.apply(w,le(V))}),p=w}for(n=new Set,t=new Set,p=R(p),u=p.next();!u.done;u=p.next())u=u.value,u.audio&&n.add(u.audio),u.video&&t.add(u.video);p=Array.from(n).sort(function(F,B){return F.bandwidth-B.bandwidth});var T=[];for(n=new Map,p=R(p),u=p.next();!u.done;u=p.next()){if(u=u.value,g=d(u),y=n.get(g)||[],y.length){var M=y[y.length-1],L=Ln(M.codecs),P=Ln(u.codecs);L!=P||u.bandwidth&&M.bandwidth&&!(u.bandwidth>M.bandwidth)||(y.push(u),T.push(u.id))}else y.push(u),T.push(u.id);n.set(g,y)}var N={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};p=Array.from(t).sort(function(F,B){if(!F.bandwidth||!B.bandwidth||F.bandwidth==B.bandwidth){if(F.codecs&&B.codecs&&F.codecs!=B.codecs&&F.width==B.width){var V=Ln(F.codecs),Y=Ln(B.codecs);if(V!=Y)return(N[V]||1)-(N[Y]||1)}return F.width-B.width}return F.bandwidth-B.bandwidth}),t=bs();var O=[];for(n=new Map,p=R(p),u=p.next();!u.done;u=p.next()){if(u=u.value,g=a(u),y=n.get(g)||[],y.length){if(M=y[y.length-1],!t&&(L=Ln(M.codecs),P=Ln(u.codecs),L!==P))continue;L=Ln(M.codecs),P=Ln(u.codecs),L!=P||u.bandwidth&&M.bandwidth&&!(u.bandwidth>M.bandwidth)||(y.push(u),O.push(u.id))}else y.push(u),O.push(u.id);n.set(g,y)}e.variants=e.variants.filter(function(F){var B=F.audio;return F=F.video,!(B&&!T.includes(B.id)||F&&!O.includes(F.id))})}function m4(e,t,n){t=R(t);for(var o=t.next(),u={};!o.done;u={videoCodec:void 0},o=t.next())if(u.videoCodec=o.value,o=e.filter((function(a){return function(d){return d.video&&d.video.codecs.startsWith(a.videoCodec)}})(u)),o.length){e=o;break}for(n=R(n),t=n.next(),o={};!t.done;o={audioCodec:void 0},t=n.next())if(o.audioCodec=t.value,t=e.filter((function(a){return function(d){return d.audio&&d.audio.codecs.startsWith(a.audioCodec)}})(o)),t.length){e=t;break}return e}function y4(e,t,n){e.variants=e.variants.filter(function(o){return Sf(o,t,n)})}function Sf(e,t,n){function o(p,g,y){return p>=g&&p<=y}var u=e.video;if(u&&u.width&&u.height){var a=u.width,d=u.height;if(d>a&&(d=R([d,a]),a=d.next().value,d=d.next().value),!o(a,t.minWidth,Math.min(t.maxWidth,n.width))||!o(d,t.minHeight,Math.min(t.maxHeight,n.height))||!o(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!o(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!o(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!o(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function v4(e,t,n,o){return n=n===void 0?[]:n,o=o===void 0?{}:o,$(function(u){return u.g==1?D(u,m1(e,t,t.offlineSessionIds.length>0,n,o),2):(T4(t),D(u,C4(t),0))})}function m1(e,t,n,o,u){var a,d;return $(function(p){if(p.g==1)return Me().Ui()&&x4(t.variants),D(p,fp(t.variants,n,!1,o),2);a=null,e&&(d=e.g)&&(a=d.keySystem),t.variants=t.variants.filter(function(g){var y=w4(g,a,u);if(!y){var w=[];g.audio&&w.push(C1(g.audio)),g.video&&w.push(C1(g.video))}return y}),te(p)})}function x4(e){var t=new Map().set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set;e=R(e);for(var o=e.next();!o.done;o=e.next())o=o.value,o.video&&n.add(o.video);for(n=R(n),e=n.next();!e.done;e=n.next()){e=e.value,o=R(t);for(var u=o.next();!u.done;u=o.next()){var a=R(u.value);if(u=a.next().value,a=a.next().value,e.codecs.includes(u)){e.codecs=e.codecs.replace(u,a);break}}}}function w4(e,t,n){if(!e.decodingInfos.some(function(g){return!(!g.supported||t&&(g=g.keySystemAccess)&&(n[g.keySystem]||g.keySystem)!=t)}))return!1;var o=Me(),u=o.Ob()==="Xbox";o=o.Oa()==="MOBILE"&&o.Ea()==="GECKO";var a=e.video,d=a&&a.width||0,p=a&&a.height||0;return u&&a&&(d>1920||p>1080)&&(a.codecs.includes("avc1.")||a.codecs.includes("avc3."))||(u=a&&a.dependencyStream)&&!Hy(u)?!1:(e=e.audio,!(o&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function y1(e,t){var n,o,u,a,d,p,g;return $(function(y){if(y.g==1){for(n=function(w,T){if(w){var M=Jr(w);return M.supported=w.supported&&T.supported,M.powerEfficient=w.powerEfficient&&T.powerEfficient,M.smooth=w.smooth&&T.smooth,T.keySystemAccess&&!M.keySystemAccess&&(M.keySystemAccess=T.keySystemAccess),M}return T},o=null,u=[],a=R(t),d=a.next(),p={};!d.done;p={cache:void 0,Oe:void 0},d=a.next())g=d.value,p.Oe=af(g),p.cache=kf,p.cache.has(p.Oe)?o=n(o,p.cache.get(p.Oe)):u.push(S4(g).then((function(w){return function(T){var M=null;T=R(T||[]);for(var L=T.next();!L.done;L=T.next())M=n(M,L.value);M&&(w.cache.set(w.Oe,M),o=n(o,M))}})(p)));return D(y,Promise.all(u),2)}o&&e.decodingInfos.push(o),te(y)})}function S4(e){var t=[""];e.video&&(t=ti(e.video.contentType).split(","));var n=[""];e.audio&&(n=ti(e.audio.contentType).split(","));var o=[];t=R(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var a=R(n),d=a.next(),p={};!d.done;p={Qc:void 0},d=a.next())d=d.value,p.Qc=Wi(e),e.video&&(p.Qc.video.contentType=en(ci(p.Qc.video.contentType),u)),e.audio&&(p.Qc.audio.contentType=en(ci(p.Qc.audio.contentType),d)),o.push(new Promise((function(g){return function(y,w){(Me().Oa()=="MOBILE"?gl(5,navigator.mediaCapabilities.decodingInfo(g.Qc)):navigator.mediaCapabilities.decodingInfo(g.Qc)).then(function(T){y(T)}).catch(w)}})(p)))}return Promise.all(o).catch(function(){return JSON.stringify(e),null})}function fp(e,t,n,o){var u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J;return $(function(H){switch(H.g){case 1:if(e.some(function(z){return z.decodingInfos.length}))return H.return();u=R(o),a=u.next(),d={};case 2:if(a.done){H.A(4);break}d.Ci=a.value,p=!1,g=R(e),y=g.next();case 5:if(y.done){H.A(7);break}w=y.value,T=v1(w,t,n).filter((function(z){return function(Q){return Q=Q[0],(Q.keySystemConfiguration&&Q.keySystemConfiguration.keySystem)===z.Ci}})(d)),M=R(T),L=M.next();case 8:if(L.done){H.A(10);break}return P=L.value,D(H,y1(w,P),9);case 9:L=M.next(),H.A(8);break;case 10:w.decodingInfos.some(function(z){return z.supported})&&(p=!0),y=g.next(),H.A(5);break;case 7:if(p)return H.return();d={Ci:void 0},a=u.next(),H.A(2);break;case 4:N=R(e),O=N.next();case 12:if(O.done){H.A(0);break}F=O.value,B=v1(F,t,n).filter(function(z){return z=z[0],z=z.keySystemConfiguration&&z.keySystemConfiguration.keySystem,!z||!o.includes(z)}),V=R(B),Y=V.next();case 15:if(Y.done){O=N.next(),H.A(12);break}return J=Y.value,D(H,y1(F,J),16);case 16:Y=V.next(),H.A(15)}})}function v1(e,t,n){var o=e.audio,u=e.video,a=[],d=[];if(u)for(var p=R(u.fullMimeTypes),g=p.next();!g.done;g=p.next()){g=g.value;var y=ti(g);if(y.includes(",")&&!o){var w=y.split(","),T=ci(g);y=Cs("video",w),w=Cs("audio",w),w=yl(w,T),T=up(T,w,"audio"),d.push({contentType:T,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(y=x1(y),g={contentType:up(ci(g),y,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||30},u.hdr)switch(u.hdr){case"PQ":g.transferFunction="pq";break;case"HLG":g.transferFunction="hlg"}u.colorGamut&&(g.colorGamut=u.colorGamut),a.push(g)}if(o)for(p=R(o.fullMimeTypes),g=p.next();!g.done;g=p.next())y=g.value,g=ci(y),y=yl(ti(y),g),g=up(g,y,"audio"),d.push({contentType:g,channels:o.channelsCount||2,bitrate:o.bandwidth||e.bandwidth||1,samplerate:o.audioSamplingRate||1,spatialRendering:o.spatialAudio});for(p=[],a.length==0&&a.push(null),d.length==0&&d.push(null),a=R(a),g=a.next();!g.done;g=a.next())for(g=g.value,y=R(d),T=y.next();!T.done;T=y.next())T=T.value,w={type:n?"file":"media-source"},g&&(w.video=g),T&&(w.audio=T),p.push(w);if(d=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!d.length)return[p];for(e=[],n=new Map,d=R(d),a=d.next();!a.done;a=d.next())a=a.value,n.get(a.keySystem)||n.set(a.keySystem,[]),n.get(a.keySystem).push(a);for(d=t?"required":"optional",t=t?["persistent-license"]:["temporary"],a=R(n.keys()),g=a.next();!g.done;g=a.next()){for(g=g.value,T=n.get(g),y=new Map,T=R(T),w=T.next();!w.done;w=T.next()){w=w.value;var M=w.videoRobustness+","+w.audioRobustness;y.get(M)||y.set(M,[]),y.get(M).push(w)}for(y=R(y.values()),T=y.next();!T.done;T=y.next()){T=T.value,w=[],M=R(p);for(var L=M.next();!L.done;L=M.next()){L=Object.assign({},L.value);for(var P={keySystem:g,initDataType:"cenc",persistentState:d,distinctiveIdentifier:"optional",sessionTypes:t},N=R(T),O=N.next();!O.done;O=N.next()){if(O=O.value,O.initData&&O.initData.length){for(var F=new Set,B=R(O.initData),V=B.next();!V.done;V=B.next())F.add(V.value.initDataType);P.initDataType=O.initData[0].initDataType}O.distinctiveIdentifierRequired&&(P.distinctiveIdentifier="required"),O.persistentStateRequired&&(P.persistentState="required"),O.sessionType&&(P.sessionTypes=[O.sessionType]),o&&(P.audio?(O.encryptionScheme&&(P.audio.encryptionScheme=P.audio.encryptionScheme||O.encryptionScheme),P.audio.robustness=P.audio.robustness||O.audioRobustness):(P.audio={robustness:O.audioRobustness},O.encryptionScheme&&(P.audio.encryptionScheme=O.encryptionScheme)),P.audio.robustness==""&&delete P.audio.robustness),u&&(P.video?(O.encryptionScheme&&(P.video.encryptionScheme=P.video.encryptionScheme||O.encryptionScheme),P.video.robustness=P.video.robustness||O.videoRobustness):(P.video={robustness:O.videoRobustness},O.encryptionScheme&&(P.video.encryptionScheme=O.encryptionScheme)),P.video.robustness==""&&delete P.video.robustness)}L.keySystemConfiguration=P,w.push(L)}e.push(w)}}return e}function yl(e,t){var n=Me();return e.toLowerCase()=="flac"?n.Ea()!="WEBKIT"?"flac":"fLaC":e.toLowerCase()==="opus"?n.Ea()!="WEBKIT"?"opus":al(t)=="mp4"?"Opus":"opus":e.toLowerCase()=="ac-3"&&n.le()?"ec-3":e}function x1(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function T4(e){e.textStreams=e.textStreams.filter(function(t){return t=en(t.mimeType,t.codecs),dl(t)})}function C4(e){var t,n,o,u,a,d,p;return $(function(g){switch(g.g){case 1:t=[],n=R(e.imageStreams),o=n.next();case 2:if(o.done){g.A(4);break}if(u=o.value,a=u.mimeType,a=="application/mp4"&&u.codecs=="mjpg"&&(a="image/jpg"),Af.has(a)){g.A(5);break}if(d=E4.get(a),!d){Af.set(a,!1),g.A(5);break}return D(g,b4(d),7);case 7:p=g.h,Af.set(a,p);case 5:Af.get(a)&&t.push(u),o=n.next(),g.A(2);break;case 4:e.imageStreams=t,te(g)}})}function b4(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function zo(e){var t=e.audio,n=e.video,o=t?t.mimeType:null,u=n?n.mimeType:null,a=t?t.codecs:null,d=n?n.codecs:null,p=t?t.groupId:null,g=[];n&&g.push(n.mimeType),t&&g.push(t.mimeType),g=g[0]||null;var y=[];t&&y.push(t.kind),n&&y.push(n.kind),y=y[0]||null;var w=new Set;if(t)for(var T=R(t.roles),M=T.next();!M.done;M=T.next())w.add(M.value);if(n)for(T=R(n.roles),M=T.next();!M.done;M=T.next())w.add(M.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,videoLabel:null,kind:y,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:g,audioMimeType:o,videoMimeType:u,codecs:"",audioCodec:a,videoCodec:d,primary:e.primary,roles:Array.from(w),audioRoles:null,videoRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:p,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,e.videoRoles=n.roles,e.videoLabel=n.label,(o=n.dependencyStream)&&(e.width=o.width||e.width,e.height=o.height||e.height,e.videoCodec=o.codecs||e.videoCodec,e.videoBandwidth&&o.bandwidth&&(e.videoBandwidth+=o.bandwidth)),d.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=u,n=d.split(",");try{e.videoCodec=Cs("video",n),e.audioCodec=Cs("audio",n)}catch{}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,t=t.dependencyStream)&&(e.audioCodec=t.codecs||e.audioCodec,e.audioBandwidth&&t.bandwidth&&(e.audioBandwidth+=t.bandwidth)),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function Vo(e){return{id:e.id,active:!1,type:lt,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function cp(e){var t=e.width||null,n=e.height||null,o=null;e.segmentIndex&&(o=rr(e.segmentIndex));var u=e.tilesLayout;return o&&(u=o.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:u||null,originalImageId:e.originalId}}function Tf(e){return e.__shaka_id||(e.__shaka_id=A4++),e.__shaka_id}function w1(e){var t={id:Tf(e),active:e.mode!="disabled",type:lt,bandwidth:0,language:St(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:e.kind=="forced",originalTextId:e.id,originalLanguage:e.language};return e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function Cf(e,t){var n=e?e.language:null;if(n={id:Tf(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:St(n||"und"),label:e?e.label:null,videoLabel:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:e?e.kind=="main":!1,roles:[],forced:!1,audioRoles:null,videoRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+(","+n.videoCodec):n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function vl(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function bf(e){return e.filter(function(t){return vl(t)})}function Ls(e,t,n,o){var u=e,a=e.filter(function(g){return g.primary});a.length&&(u=a);var d=u.length?u[0].language:"";if(u=u.filter(function(g){return g.language==d}),t){var p=wf(St(t),e.map(function(g){return g.language}));p&&(u=e.filter(function(g){return St(g.language)==p}))}if(u=u.filter(function(g){return g.forced==o}),n){if(e=S1(u,n),e.length)return e}else if(e=u.filter(function(g){return g.roles.length==0}),e.length)return e;return e=u.map(function(g){return g.roles}).reduce(p4,[]),e.length?S1(u,e[0]):u}function S1(e,t){return e.filter(function(n){return n.roles.includes(t)})}function k4(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}function T1(e,t){t.length&&(t=t.filter(function(n){return Ln(e.codecs)==Ln(n.codecs)}).sort(function(n,o){return n.bandwidth&&o.bandwidth&&n.bandwidth!=o.bandwidth?n.bandwidth-o.bandwidth:(n.width||0)-(o.width||0)}),e.trickModeVideo=t[0],t.length>1&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function C1(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function b1(e,t,n){if(n.autoShowText==0)return!1;if(n.autoShowText==1)return!0;var o=St(n.preferredTextLanguage);return t=St(t.language),n.autoShowText==2?_s(t,o):n.autoShowText==3?e?(e=St(e.language),_s(t,o)&&!_s(e,t)):!1:(st("Invalid autoShowText setting!"),!1)}function k1(e){var t={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]};e=R(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var o={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n?ci(n):"",codecs:n?ti(n):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"video",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};o.fullMimeTypes.add(en(o.mimeType,o.codecs)),n.startsWith("audio/")?(o.type="audio",t.audio=o):t.video=o}return t}be("shaka.util.StreamUtils",p1),p1.meetsRestrictions=Sf;var kf=new Map,A4=0,Af=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),E4=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Yt(){var e=this;this.H=null,this.B=!1,this.u=new li,this.j=new Le,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){if(e.B&&e.g.useNetworkInformation){e.u=new li,e.g&&e.u.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.H(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.o=[],this.I=1,this.J=!1,this.h=this.m=this.g=this.C=null,this.l=new dt(function(){if(e.B&&(e.g.restrictToElementSize||e.g.restrictToScreenSize)){var t=e.chooseVariant();t&&e.H(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.F=f,"documentPictureInPicture"in f&&this.j.D(f.documentPictureInPicture,"enter",function(){e.F=f.documentPictureInPicture.window,e.l&&e.l.Kb(),e.j.Aa(e.F,"pagehide",function(){e.F=f,e.l&&e.l.Kb()})}),this.G=this.i=null}m=Yt.prototype,m.stop=function(){this.H=null,this.B=!1,this.o=[],this.I=1,this.m=this.C=null,this.h&&(this.h.disconnect(),this.h=null),this.l&&this.l.stop(),this.G=this.i=null},m.release=function(){this.stop(),this.j.release(),this.l=null},m.init=function(e){this.H=e},m.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:this.F.devicePixelRatio,t=this.F.screen.height*n,n*=this.F.screen.width),this.h&&this.g.restrictToElementSize){var o=this.g.ignoreDevicePixelRatio?1:this.F.devicePixelRatio,u=this.m.clientHeight,a=this.m.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.m&&(u=this.i.height,a=this.i.width),t=Math.min(t,u*o),n=Math.min(n,a*o)}if(u=this.o.filter(function(y){return y&&!(y.audio&&y.audio.fastSwitching||y.video&&y.video.fastSwitching)}),u.length||(u=this.o),o=u,e&&u.length!=this.o.length&&(o=this.o.filter(function(y){return y&&!!(y.audio&&y.audio.fastSwitching||y.video&&y.video.fastSwitching)})),e=dp(this,this.g.restrictions,o,1/0,1/0),t!=1/0||n!=1/0){for(e=I4(e),e=R(e),u=e.next();!u.done;u=e.next())if(u=u.value,u.height>=t&&u.width>=n){t=u.height,n=u.width;break}e=dp(this,this.g.restrictions,o,t,n)}for(t=this.getBandwidthEstimate(),o.length&&!e.length&&(e=dp(this,null,o,1/0,1/0),e=[e[0]]),n=e[0]||null,o=0;o<e.length;o++){u=e[o];var d=isNaN(this.I)?1:Math.abs(this.I);a=d*u.bandwidth/this.g.bandwidthDowngradeTarget;for(var p={bandwidth:1/0},g=o+1;g<e.length;g++)if(u.bandwidth!=e[g].bandwidth){p=e[g];break}d=d*p.bandwidth/this.g.bandwidthUpgradeTarget,t>=a&&t<=d&&(n.bandwidth!=u.bandwidth||n.bandwidth==u.bandwidth&&n.video&&u.video&&(n.video.width<u.video.width||n.video.height<u.video.height))&&(n=u)}return this.C=Date.now(),n},m.enable=function(){this.B=!0},m.disable=function(){this.B=!1},m.segmentDownloaded=function(e,t,n,o){var u=e;this.g.removeLatencyFromFirstPacketTime&&o&&o.packetNumber===1&&o.timeToFirstByte&&(u=e-o.timeToFirstByte),u>=this.g.cacheLoadThreshold&&this.u.sample(u,t),n&&this.C!=null&&this.B&&A1(this)},m.trySuggestStreams=function(){this.B&&(this.C=Date.now(),A1(this,!0))},m.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=navigator.connection.downlink*1e6),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.u.getBandwidthEstimate(e),this.G?this.G.getBandwidthEstimate(e):e)},m.setVariants=function(e){return Je(e,this.o)?!1:(this.o=e,!0)},m.playbackRateChanged=function(e){this.I=e},m.setMediaElement=function(e){function t(){n.l.ka(M4)}var n=this;this.m=e,this.h&&(this.h.disconnect(),this.h=null),this.m&&"ResizeObserver"in f&&(this.h=new ResizeObserver(t),this.h.observe(this.m)),this.j.D(e,"enterpictureinpicture",function(o){o.pictureInPictureWindow&&(n.i=o.pictureInPictureWindow,n.j.D(n.i,"resize",t))}),this.j.D(e,"leavepictureinpicture",function(){n.i&&n.j.Ma(n.i,"resize",t),n.i=null})},m.setCmsdManager=function(e){this.G=e},m.configure=function(e){this.g=e,this.u&&this.g&&this.u.configure(this.g.advanced)};function A1(e,t){if(t===void 0||!t){if(!e.J){if(t=e.u,!(t.g>=t.i))return;e.J=!0,e.C-=(e.g.switchInterval-e.g.minTimeToSwitch)*1e3}if(Date.now()-e.C<e.g.switchInterval*1e3)return}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.H(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function dp(e,t,n,o,u){if(e.G){var a=e.G.ci();a&&(n=n.filter(function(d){return d.bandwidth&&a?d.bandwidth<=a:!0}))}return t&&(n=n.filter(function(d){return Sf(d,t,{width:u,height:o})})),n.sort(function(d,p){return d.bandwidth-p.bandwidth})}function I4(e){var t=[];e=R(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(o,u){return o.width-u.width})}be("shaka.abr.SimpleAbrManager",Yt),Yt.prototype.configure=Yt.prototype.configure,Yt.prototype.setCmsdManager=Yt.prototype.setCmsdManager,Yt.prototype.setMediaElement=Yt.prototype.setMediaElement,Yt.prototype.playbackRateChanged=Yt.prototype.playbackRateChanged,Yt.prototype.setVariants=Yt.prototype.setVariants,Yt.prototype.getBandwidthEstimate=Yt.prototype.getBandwidthEstimate,Yt.prototype.trySuggestStreams=Yt.prototype.trySuggestStreams,Yt.prototype.segmentDownloaded=Yt.prototype.segmentDownloaded,Yt.prototype.disable=Yt.prototype.disable,Yt.prototype.enable=Yt.prototype.enable,Yt.prototype.chooseVariant=Yt.prototype.chooseVariant,Yt.prototype.init=Yt.prototype.init,Yt.prototype.release=Yt.prototype.release,Yt.prototype.stop=Yt.prototype.stop;var M4=1;function E1(e,t){if(e===t||!e.length||!t.length)return!0;e=R(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,If(n))return!0;for(var o=R(t),u=o.next();!u.done;u=o.next())if(u=u.value,n.keySystem===u.keySystem||If(u))return!0}return!1}function I1(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=R(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;for(var u=R(t),a=u.next();!a.done;a=u.next())if(a=a.value,o.keySystem==a.keySystem){u=new Map;for(var d=R((o.initData||[]).concat(a.initData||[])),p=d.next();!p.done;p=d.next())p=p.value,u.set(p.keyId,p);u=Array.from(u.values()),d=o.keyIds&&a.keyIds?new Set([].concat(le(o.keyIds),le(a.keyIds))):o.keyIds||a.keyIds,n.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||a.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||a.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||a.persistentStateRequired,videoRobustness:o.videoRobustness||a.videoRobustness,audioRobustness:o.audioRobustness||a.audioRobustness,serverCertificate:o.serverCertificate||a.serverCertificate,serverCertificateUri:o.serverCertificateUri||a.serverCertificateUri,initData:u,keyIds:d});break}else If(o)?n.push(o):If(a)&&n.push(a)}return n}function hp(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Ef(e){return e?!!e.match(/^com\.apple\.fps/):!1}function If(e){return(e=e.licenseServerUri)?e.startsWith("data:application/json;base64,"):!1}var Mf=new re(function(){return _i(new Uint8Array([0]))}),Ps=new Map;function M1(e,t){var n=Yi();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function R1(e){var t,n;return $(function(o){if(o.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new q(2,7,1010);return t=e.g,e.g++,t==0?o.return():(n=e.h*(1+(Math.random()*2-1)*e.o),D(o,new Promise(function(u){new dt(u).ka(n/1e3)}),2))}e.h*=e.m,te(o)})}function Yi(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function _t(){var e,t,n=new Promise(function(o,u){e=o,t=u});return n.resolve=e,n.reject=t,n}_t.prototype.resolve=function(){},_t.prototype.reject=function(){};function tn(e,t){this.promise=e,this.i=t,this.g=null}function io(e){return new tn(Promise.reject(e),function(){return Promise.resolve()})}function pp(){var e=Promise.reject(new q(2,7,7001));return e.catch(function(){}),new tn(e,function(){return Promise.resolve()})}function Ds(e){return new tn(Promise.resolve(e),function(){return Promise.resolve()})}function _1(e){return new tn(e,function(){return e.catch(function(){})})}tn.prototype.abort=function(){return this.g||(this.g=this.i()),this.g};function L1(e){return new tn(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}tn.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},tn.prototype.Xa=function(e,t){function n(p){return function(g){if(u.g&&p)a.reject(d);else{var y=p?e:t;y?o=R4(y,g,a):(p?a.resolve:a.reject)(g)}}}function o(){return a.reject(d),u.abort()}var u=this,a=new _t;a.catch(function(){});var d=new q(2,7,7001);return this.promise.then(n(!0),n(!1)),new tn(a,function(){return o()})};function R4(e,t,n){try{var o=e(t);return o&&o.promise&&o.abort?(n.resolve(o.promise),function(){return o.abort()}):(n.resolve(o),function(){return Promise.resolve(o).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}_.Object.defineProperties(tn.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g!==null}}}),be("shaka.util.AbortableOperation",tn),tn.prototype.chain=tn.prototype.Xa,tn.prototype.finally=tn.prototype.finally,tn.all=L1,tn.prototype.abort=tn.prototype.abort,tn.notAbortable=_1,tn.completed=Ds,tn.aborted=pp,tn.failed=io;function Ie(e,t){if(t)if(t instanceof Map)for(var n=R(t.keys()),o=n.next();!o.done;o=n.next())o=o.value,Object.defineProperty(this,o,{value:t.get(o),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=f.performance&&f.performance.now?f.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function P1(e){var t=new Ie(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Ie.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Ie.prototype.stopImmediatePropagation=function(){this.g=!0},Ie.prototype.stopPropagation=function(){},be("shaka.util.FakeEvent",Ie);var Rf={ul:"abrstatuschanged",vl:"adaptation",wl:"audiotrackchanged",xl:"audiotrackschanged",yl:"boundarycrossed",zl:"buffering",Al:"canupdatestarttime",Bl:"complete",Cl:"currentitemchanged",Dl:"downloadcompleted",El:"downloadfailed",Fl:"downloadheadersreceived",Gl:"drmsessionupdate",Il:"emsg",Ol:"itemsinserted",Pl:"itemsremoved",gm:"prft",Error:"error",Jl:"expirationupdated",Kl:"firstquartile",Ll:"gapjumped",Ql:"keystatuschanged",Ul:"loaded",Vl:"loading",Xl:"manifestparsed",Yl:"manifestupdated",Zl:"mediaqualitychanged",$l:"mediasourcerecovered",am:"metadataadded",Metadata:"metadata",bm:"midpoint",dm:"nospatialvideoinfo",fm:"onstatechange",hm:"ratechange",lm:"segmentappended",nm:"sessiondata",om:"spatialvideoinfo",pm:"stalldetected",qm:"started",rm:"statechanged",sm:"streaming",tm:"textchanged",um:"texttrackvisibility",vm:"thirdquartile",wm:"timelineregionadded",xm:"timelineregionenter",ym:"timelineregionexit",zm:"trackschanged",Bm:"unloading",Dm:"variantchanged"};function Tt(){this.ab=new it,this.Ee=this}Tt.prototype.addEventListener=function(e,t){this.ab&&this.ab.push(e,t)},Tt.prototype.removeEventListener=function(e,t){this.ab&&this.ab.remove(e,t)},Tt.prototype.dispatchEvent=function(e){if(!this.ab)return!0;var t=this.ab.get(e.type)||[],n=this.ab.get("All");for(n&&(t=t.concat(n)),t=R(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Ee,e.currentTarget=this.Ee;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Tt.prototype.release=function(){this.ab=null};function Os(){this.g=[]}function Ho(e,t){e.g.push(t.finally(function(){Ue(e.g,t)}))}Os.prototype.destroy=function(){for(var e=[],t=R(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function jt(e,t,n,o,u,a,d){Tt.call(this),this.i=null,this.j=!1,this.u=new Os,this.g=new Set,this.h=new Set,this.o=e||null,this.m=t||null,this.B=n||null,this.C=o||null,this.F=u||null,this.H=a||null,this.G=d||null,this.l=new Map}U(jt,Tt),m=jt.prototype,m.configure=function(e){this.i=e};function Mr(e,t,n,o){o=o===void 0?!1:o,n=n||B1;var u=Lf.get(e);(!u||n>=u.priority)&&Lf.set(e,{priority:n,yf:t,Gk:o})}function D1(e,t){for(var n=R(e.g),o=n.next();!o.done;o=n.next())t.g.add(o.value);for(e=R(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}m.Jk=function(e){this.g.add(e)},m.il=function(e){this.g.delete(e)},m.pj=function(){this.g.clear()},m.Kk=function(e){this.h.add(e)},m.jl=function(e){this.h.delete(e)},m.qj=function(){this.h.clear()},m.Rh=function(){this.l.clear()};function un(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}m.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),Tt.prototype.release.call(this),this.u.destroy()},m.request=function(e,t,n){var o=this,u=new U1;if(this.j){var a=Promise.reject(new q(2,7,7001));return a.catch(function(){}),new _f(a,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Wi(t.retryParameters):Yi(),t.uris=Wi(t.uris),a=_4(this,e,t,n);var d=a.Xa(function(){return O1(o,e,t,n,new M1(t.retryParameters,!1),0,null,u)}),p=d.Xa(function(M){return L4(o,e,M,n)}),g=Date.now(),y=0;a.promise.then(function(){y=Date.now()-g},function(){});var w=0;d.promise.then(function(){w=Date.now()},function(){});var T=p.Xa(function(M){var L=Date.now()-w,P=M.response;return P.timeMs+=y,P.timeMs+=L,M.gk||!o.o||P.fromCache||t.method=="HEAD"||e!=Di||o.o(P.timeMs,P.data.byteLength,N1(n),t,n),o.G&&o.G(e,P,n),P},function(M){throw M&&(M.severity=2),M});return a=new _f(T.promise,function(){return T.abort()},u),Ho(this.u,a),a};function _4(e,t,n,o){function u(p){a=a.Xa(function(){return n.body&&(n.body=_i(n.body)),p(t,n,o)})}var a=Ds(void 0);e.F&&u(e.F),e=R(e.g);for(var d=e.next();!d.done;d=e.next())u(d.value);return a.Xa(void 0,function(p){throw p instanceof q&&p.code==7001?p:new q(2,1,1006,p)})}function O1(e,t,n,o,u,a,d,p){e.i.forceHTTP&&(n.uris[a]=n.uris[a].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[a]=n.uris[a].replace("http://","https://")),a>0&&e.H&&e.H(t,o,n.uris[a],n.uris[a-1]);var g=new Qt(n.uris[a]),y=g.bc,w=!1;y||(y=location.protocol,y=y.slice(0,-1),nf(g,y),n.uris[a]=g.toString()),y=y.toLowerCase();var T=(y=Lf.get(y))?y.yf:null;if(!T)return io(new q(2,1,1e3,g));var M=y.Gk;(g=e.l.get(g.Eb))&&(n.headers["common-access-token"]=g);var L=null,P=null,N=!1,O=!1,F;return _1(R1(u)).Xa(function(){if(e.j)return pp();F=Date.now();var B=0;n.requestStartTime=Date.now();var V=T(n.uris[a],n,t,function(H,z,Q){L&&L.stop(),P&&P.ka(J/1e3),e.o&&t==Di&&(B++,n.packetNumber=B,e.o(H,z,N1(o),n,o),w=!0,p.g=Q)},function(H){O=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(H,n,t)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!M)return V;var Y=n.retryParameters.connectionTimeout;Y&&(L=new dt(function(){N=!0,V.abort()}),L.ka(Y/1e3));var J=n.retryParameters.stallTimeout;return J&&(P=new dt(function(){N=!0,V.abort()})),V}).Xa(function(B){L&&L.stop(),P&&P.stop(),B.timeMs==null&&(B.timeMs=Date.now()-F);var V=B.headers["common-access-token"];if(V){var Y=new Qt(B.uri);e.l.set(Y.Eb,V)}return V={response:B,gk:w},!O&&e.m&&e.m(B.headers,n,t),e.B&&e.B(n,B),V},function(B){if(L&&L.stop(),P&&P.stop(),e.C){var V=null,Y=0;B instanceof q&&(V=B,B.code==1001&&(Y=B.data[1])),e.C(n,V,Y,N)}if(e.j)return pp();if(N&&(B=new q(1,1,1003,n.uris[a],t)),B instanceof q){if(B.code==7001)throw B;if(B.code==1010)throw d;if(B.severity==1){if(V=new Map().set("error",B),V=new Ie("retry",V),V.cancelable=!0,e.dispatchEvent(V),V.defaultPrevented)throw B;return a=(a+1)%n.uris.length,O1(e,t,n,o,u,a,B,p)}}throw B})}function L4(e,t,n,o){var u=Ds(void 0);e=R(e.h);for(var a=e.next(),d={};!a.done;d={Ji:void 0},a=e.next())d.Ji=a.value,u=u.Xa((function(p){return function(){var g=n.response;return g.data&&(g.data=_i(g.data)),(0,p.Ji)(t,g,o)}})(d));return u.Xa(function(){return n},function(p){var g=2;if(p instanceof q){if(p.code==7001)throw p;g=p.severity}throw new q(g,1,1007,p)})}function N1(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.Xc)return!1}return!0}be("shaka.net.NetworkingEngine",jt),jt.prototype.request=jt.prototype.request,jt.prototype.destroy=jt.prototype.destroy,jt.makeRequest=un,jt.defaultRetryParameters=function(){return Yi()},jt.prototype.clearCommonAccessTokenMap=jt.prototype.Rh,jt.prototype.clearAllResponseFilters=jt.prototype.qj,jt.prototype.unregisterResponseFilter=jt.prototype.jl,jt.prototype.registerResponseFilter=jt.prototype.Kk,jt.prototype.clearAllRequestFilters=jt.prototype.pj,jt.prototype.unregisterRequestFilter=jt.prototype.il,jt.prototype.registerRequestFilter=jt.prototype.Jk,jt.unregisterScheme=function(e){Lf.delete(e)},jt.registerScheme=Mr,jt.prototype.configure=jt.prototype.configure;function U1(){this.g=0}jt.NumBytesRemainingClass=U1;function _f(e,t,n){tn.call(this,e,t),this.h=n}U(_f,tn),jt.PendingRequest=_f;var Di=1;jt.RequestType={MANIFEST:0,SEGMENT:Di,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8,CMCD:9},jt.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var B1=3;jt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:B1};var Lf=new Map;function Ns(e){this.g=!1,this.h=new _t,this.i=e}Ns.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Ot(e,t){if(e.g)throw t instanceof q&&t.code==7003?t:new q(2,7,7003,t)}function gp(e,t){var n=[];e=R(e);for(var o=e.next();!o.done;o=e.next())n.push(t(o.value));return n}function P4(e,t){e=R(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Us(e){for(var t=new Map,n=R(Object.keys(e)),o=n.next();!o.done;o=n.next())o=o.value,t.set(o,e[o]);return t}function mp(e){var t={};return e.forEach(function(n,o){t[o]=n}),t}function Bt(e,t){this.h=Zn(e),this.i=t==F1,this.g=0}m=Bt.prototype,m.Ia=function(){return this.g<this.h.byteLength},m.Pa=function(){return this.g},m.getLength=function(){return this.h.byteLength},m.Y=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw Rr()}},m.Ba=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw Rr()}},m.U=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw Rr()}},m.$g=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw Rr()}},m.Dd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw Rr()}if(t>2097151)throw new q(2,3,3001);return this.g+=8,t*4294967296+e},m.Tb=function(e){if(this.g+e>this.h.byteLength)throw Rr();var t=et(this.h,this.g,e);return this.g+=e,t},m.skip=function(e){if(this.g+e>this.h.byteLength)throw Rr();this.g+=e},m.Ki=function(e){if(this.g<e)throw Rr();this.g-=e},m.seek=function(e){if(e<0||e>this.h.byteLength)throw Rr();this.g=e},m.Yc=function(){for(var e=this.g;this.Ia()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=et(this.h,e,this.g-e),this.g+=1,Ht(e)};function Rr(){return new q(2,3,3e3)}be("shaka.util.DataViewReader",Bt),Bt.prototype.readTerminatedString=Bt.prototype.Yc,Bt.prototype.seek=Bt.prototype.seek,Bt.prototype.rewind=Bt.prototype.Ki,Bt.prototype.skip=Bt.prototype.skip,Bt.prototype.readBytes=Bt.prototype.Tb,Bt.prototype.readUint64=Bt.prototype.Dd,Bt.prototype.readInt32=Bt.prototype.$g,Bt.prototype.readUint32=Bt.prototype.U,Bt.prototype.readUint16=Bt.prototype.Ba,Bt.prototype.readUint8=Bt.prototype.Y,Bt.prototype.getLength=Bt.prototype.getLength,Bt.prototype.getPosition=Bt.prototype.Pa,Bt.prototype.hasMoreData=Bt.prototype.Ia;var F1=1;Bt.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:F1};function Lt(){this.i=new Map,this.h=new Map,this.g=!1}m=Lt.prototype,m.box=function(e,t){return e=j1(e),this.i.set(e,D4),this.h.set(e,t),this},m.T=function(e,t){return e=j1(e),this.i.set(e,$1),this.h.set(e,t),this},m.stop=function(){this.g=!0},m.parse=function(e,t,n){for(e=new Bt(e,0),this.g=!1;e.Ia()&&!this.g;)this.zd(0,e,t,n)},m.zd=function(e,t,n,o){var u=t.Pa();if(o&&u+8>t.getLength())this.g=!0;else{var a=t.U(),d=t.U(),p=Df(d),g=!1;switch(a){case 0:a=t.getLength()-u;break;case 1:if(o&&t.Pa()+8>t.getLength()){this.g=!0;return}a=t.Dd(),g=!0}var y=this.h.get(d);if(y){var w=null,T=null;if(this.i.get(d)==$1){if(o&&t.Pa()+4>t.getLength()){this.g=!0;return}T=t.U(),w=T>>>24,T&=16777215}d=u+a,n&&d>t.getLength()&&(d=t.getLength()),o&&d>t.getLength()?this.g=!0:(d-=t.Pa(),t=d>0?t.Tb(d):new Uint8Array(0),t=new Bt(t,0),y({name:p,parser:this,partialOkay:n||!1,stopOnPartial:o||!1,version:w,flags:T,reader:t,size:a,start:u+e,has64BitSize:g}))}else t.skip(Math.min(u+a-t.Pa(),t.getLength()-t.Pa()))}};function ot(e){for(var t=ro(e);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function _r(e){for(var t=ro(e),n=e.reader.U(),o=0;o<n&&(e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial),!e.parser.g);o++);}function di(e){var t=ro(e);for(e.reader.skip(78);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function Pf(e){var t=ro(e);e.reader.skip(8);var n=e.reader.Ba();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function Bs(e){return function(t){e(t.reader.Tb(t.reader.getLength()-t.reader.Pa()))}}function j1(e){var t=0;e=R(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Df(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function ro(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}be("shaka.util.Mp4Parser",Lt),Lt.headerSize=ro,Lt.typeToString=Df,Lt.allData=Bs,Lt.audioSampleEntry=Pf,Lt.visualSampleEntry=di,Lt.sampleDescription=_r,Lt.children=ot,Lt.prototype.parseNext=Lt.prototype.zd,Lt.prototype.parse=Lt.prototype.parse,Lt.prototype.stop=Lt.prototype.stop,Lt.prototype.fullBox=Lt.prototype.T,Lt.prototype.box=Lt.prototype.box;var D4=0,$1=1;function yp(e){var t=this;this.g=[],this.h=[],this.data=[],new Lt().box("moov",ot).box("moof",ot).T("pssh",function(n){if(!(n.version>1)){var o=et(n.reader.h,-12,n.size);if(t.data.push(o),t.g.push(Tr(n.reader.Tb(16))),n.version>0){o=n.reader.U();for(var u=0;u<o;u++){var a=Tr(n.reader.Tb(16));t.h.push(a)}}}}).parse(e)}function Of(e,t,n,o){var u=e.length,a=12+t.length+4+u;o>0&&(a+=4+16*n.size);var d=new Uint8Array(a),p=Zn(d),g=0;if(p.setUint32(g,a),g+=4,p.setUint32(g,1886614376),g+=4,o<1?p.setUint32(g,0):p.setUint32(g,16777216),g+=4,d.set(t,g),g+=t.length,o>0)for(p.setUint32(g,n.size),g+=4,t=R(n),n=t.next();!n.done;n=t.next())n=Po(n.value),d.set(n,g),g+=n.length;return p.setUint32(g,u),d.set(e,g+4),d}function Nf(e){var t=this;this.F=e,this.j=this.B=null,this.oa=this.S=!1,this.I=0,this.g=null,this.o=new Le,this.i=new Map,this.X=[],this.C=new Map,this.J=!1,this.m=new _t,this.h=null,this.u=function(n){n.severity==2&&t.m.reject(n),e.onError(n)},this.ba=new Map,this.ma=new Map,this.K=new dt(function(){return G4(t)}),this.R=!1,this.N=[],this.$=!1,this.G=new dt(function(){W4(t)}),this.m.catch(function(){}),this.l=new Ns(function(){return O4(t)}),this.O=!1,this.M=this.H=null,this.V=function(){return!1}}m=Nf.prototype,m.destroy=function(){return this.l.destroy()};function O4(e){return $(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.G.stop(),e.G=null,e.K.stop(),e.K=null,D(t,wl(e),2);case 2:if(!e.j){t.A(3);break}return ce(t,4),D(t,e.j.setMediaKeys(null),6);case 6:X(t,5);break;case 4:ie(t);case 5:e.j=null;case 3:e.g=null,e.B=null,e.C=new Map,e.h=null,e.u=function(){},e.F=null,e.O=!1,e.H=null,te(t)}})}m.configure=function(e,t){this.h=e,t&&(this.V=t),this.G&&this.S&&this.g&&this.G.Fa(this.h.updateExpirationTime)};function N4(e,t,n){return e.oa=!0,e.C=new Map,e.R=n,V1(e,t,!1)}function z1(e,t,n,o){o=o===void 0?!0:o,e.C=new Map,n=R(n);for(var u=n.next();!u.done;u=n.next())e.C.set(u.value,{initData:null,initDataType:null});for(n=R(e.h.persistentSessionsMetadata),u=n.next();!u.done;u=n.next())u=u.value,e.C.set(u.sessionId,{initData:u.initData,initDataType:u.initDataType});return e.R=e.C.size>0,V1(e,t,o)}function U4(e,t,n,o,u,a){var d,p,g,y,w;return $(function(T){return T.g==1?(d=[],a.length&&d.push(a[0].contentType),u.length&&d.push(u[0].contentType),p=function(M){return M=Cr(t,M,null),M.licenseServerUri=n,M.serverCertificate=o,M.persistentStateRequired=!0,M.sessionType="persistent-license",M},g=k1(d),g.video&&(y=p(a[0].encryptionScheme||""),g.video.drmInfos.push(y)),g.audio&&(w=p(u[0].encryptionScheme||""),g.audio.drmInfos.push(w)),D(T,fp([g],!0,e.O,[]),2)):(Ot(e.l),T.return(W1(e,[g])))})}function V1(e,t,n){var o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y;return $(function(J){if(J.g==1){for(Z1(e.h.clearKeys,t),o=t.some(function(H){return!!(H.video&&H.video.drmInfos.length||H.audio&&H.audio.drmInfos.length)}),u=Us(e.h.servers),a=Us(e.h.advanced||{}),!o&&n&&Y4(t,u),d=new WeakSet,p=R(t),g=p.next();!g.done;g=p.next())for(y=g.value,w=Q1(y),T=R(w),M=T.next();!M.done;M=T.next())L=M.value,d.has(L)||(d.add(L),J4(L,u,a,e.h.keySystemsMapping));for(P=function(H,z){var Q=[];H=R(H);for(var ee=H.next();!ee.done;ee=H.next()){ee=ee.value;var se=ee[z]||a.has(ee.keySystem)&&a.get(ee.keySystem)[z]||"",fe;if((fe=se=="")&&(fe=(fe=ee.keySystem)?!!fe.match(/^com\.widevine\.alpha/):!1),fe&&(z=="audioRobustness"?se=[e.h.defaultAudioRobustnessForWidevine]:z=="videoRobustness"&&(se=[e.h.defaultVideoRobustnessForWidevine])),typeof se=="string")Q.push(ee);else if(Array.isArray(se))for(se.length===0&&(se=[""]),se=R(se),fe=se.next();!fe.done;fe=se.next()){var ne={};Q.push(Object.assign({},ee,(ne[z]=fe.value,ne)))}}return Q},N=new WeakSet,O=R(t),F=O.next();!F.done;F=O.next())B=F.value,B.video&&!N.has(B.video)&&(B.video.drmInfos=P(B.video.drmInfos,"videoRobustness"),B.video.drmInfos=P(B.video.drmInfos,"audioRobustness"),N.add(B.video)),B.audio&&!N.has(B.audio)&&(B.audio.drmInfos=P(B.audio.drmInfos,"videoRobustness"),B.audio.drmInfos=P(B.audio.drmInfos,"audioRobustness"),N.add(B.audio));return D(J,fp(t,e.R,e.O,e.h.preferredKeySystems),2)}return Ot(e.l),V=o||u.size>0,V?(Y=W1(e,t),J.return(o?Y:Y.catch(function(){}))):(e.S=!0,J.return(Promise.resolve()))})}function H1(e){var t;return $(function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.H){n.A(2);break}return D(n,e.H,3);case 3:return Ot(e.l),n.return();case 2:return ce(n,4),e.H=e.j.setMediaKeys(e.B),D(n,e.H,6);case 6:X(n,5);break;case 4:t=ie(n),e.u(new q(2,6,6003,t.message));case 5:Ot(e.l),te(n)}})}function B4(e,t){return $(function(n){if(n.g==1)return D(n,H1(e),2);xl(e,t.initDataType,et(t.initData)),te(n)})}m.fc=function(e){var t=this,n;return $(function(o){if(o.g==1)return t.j===e?o.return():t.B?(t.j=e,t.h.delayLicenseRequestUntilPlayed&&t.o.Aa(t.j,"play",function(){for(var u=R(t.N),a=u.next();!a.done;a=u.next())xp(t,a.value);t.$=!0,t.N=[]}),t.j.remote?(t.o.D(t.j.remote,"connect",function(){return wl(t)}),t.o.D(t.j.remote,"connecting",function(){return wl(t)}),t.o.D(t.j.remote,"disconnect",function(){return wl(t)})):"webkitCurrentPlaybackTargetIsWireless"in t.j&&t.o.D(t.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return wl(t)}),t.M=t.g&&t.g.initData.find(function(u){return u.initData.length>0})||null,n=t.g.keySystem,Me().Sg(n)||!(t.M||t.C.size||t.h.parseInbandPsshEnabled)?(t.o.D(t.j,"encrypted",function(u){return B4(t,u)}),o.A(2)):D(o,H1(t),2)):(t.o.Aa(e,"encrypted",function(){t.u(new q(2,6,6010))}),o.return());G1(t).catch(function(){}),te(o)})};function F4(e){var t,n,o,u,a;return $(function(d){switch(d.g){case 1:if(!e.B||!e.g)return d.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){d.A(2);break}return t=un([e.g.serverCertificateUri],e.h.retryParameters),ce(d,3),n=e.F.tc.request(5,t,{isPreload:e.V()}),D(d,n.promise,5);case 5:o=d.h,e.g.serverCertificate=et(o.data),X(d,4);break;case 3:throw u=ie(d),new q(2,6,6017,u);case 4:if(e.l.g)return d.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?d.return():(ce(d,6),D(d,e.B.setServerCertificate(e.g.serverCertificate),8));case 8:X(d,0);break;case 6:throw a=ie(d),new q(2,6,6004,a.message)}})}function j4(e,t){var n,o,u;return $(function(a){if(a.g==1)return D(a,Y1(e,t,{initData:null,initDataType:null}),2);if(a.g!=3)return n=a.h,n?(o=[],(u=e.i.get(n))&&(u.Lb=new _t,o.push(u.Lb)),o.push(n.remove()),D(a,Promise.all(o),3)):a.return();e.i.delete(n),te(a)})}function G1(e){var t,n,o,u,a;return $(function(d){if(d.g==1)return e.C.size?(e.C.forEach(function(p,g){Y1(e,g,p)}),D(d,e.m,3)):d.A(2);if(d.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),t.size>0&&K4(e))return d.return(e.m);e.J=!1,e.m=new _t,e.m.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],o=R(n),u=o.next();!u.done;u=o.next())a=u.value,xl(e,a.initDataType,a.initData);return Sl(e)&&e.m.resolve(),d.return(e.m)})}function xl(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var o=e.i.values();o=R(o);for(var u=o.next();!u.done;u=o.next())if(wr(n,u.value.initData))return;var a=!1;if(e.C.forEach(function(d){!a&&wr(n,d.initData)&&(a=!0)}),a)return}e.J=!0,e.i.size>0&&Sl(e)&&(e.m.resolve(),e.J=!1,e.m=new _t,e.m.catch(function(){})),V4(e,t,n,e.g.sessionType)}}function X1(e){return e=e.i.keys(),e=gp(e,function(t){return t.sessionId}),Array.from(e)}m.Gg=function(){var e=this,t=this.i.keys();return t=gp(t,function(n){var o=e.i.get(n);return{sessionId:n.sessionId,sessionType:o.type,initData:o.initData,initDataType:o.initDataType}}),Array.from(t)},m.Ud=function(){var e=1/0,t=this.i.keys();t=R(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};function $4(e){return e.I?e.I:NaN}m.We=function(){return mp(this.ma)};function W1(e,t){var n,o,u,a,d,p,g;return $(function(y){switch(y.g){case 1:if(n=new Map,o=z4(e,t,n),!o)throw navigator.requestMediaKeySystemAccess?new q(2,6,6001):new q(2,6,6020);Ot(e.l),ce(y,2),o.getConfiguration();var w=u=e.h.keySystemsMapping[o.keySystem]||o.keySystem,T=n.get(u),M=[],L=[],P=[],N=[],O=[],F=new Set,B=new Set;q4(T,M,L,N,P,O,F,B);var V=e.R?"persistent-license":"temporary";for(w={keySystem:w,encryptionScheme:M[0],licenseServerUri:L[0],distinctiveIdentifierRequired:T[0].distinctiveIdentifierRequired,persistentStateRequired:T[0].persistentStateRequired,sessionType:T[0].sessionType||V,audioRobustness:T[0].audioRobustness||"",videoRobustness:T[0].videoRobustness||"",serverCertificate:N[0],serverCertificateUri:P[0],initData:O,keyIds:F},B.size>0&&(w.keySystemUris=B),T=R(T),B=T.next();!B.done;B=T.next())B=B.value,B.distinctiveIdentifierRequired&&(w.distinctiveIdentifierRequired=B.distinctiveIdentifierRequired),B.persistentStateRequired&&(w.persistentStateRequired=B.persistentStateRequired);if(e.g=w,!e.g.licenseServerUri)throw new q(2,6,6012,e.g.keySystem);return D(y,o.createMediaKeys(),4);case 4:if(a=y.h,Ot(e.l),e.B=a,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.B)){y.A(5);break}return ce(y,6),D(y,e.B.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),8);case 8:if(d=y.h,d!="usable")throw new q(2,6,6018);Ot(e.l),X(y,5,2);break;case 6:throw p=ie(y,2),p instanceof q?p:new q(2,6,6019,p.message);case 5:return e.S=!0,e.G.Fa(e.h.updateExpirationTime),D(y,F4(e),9);case 9:Ot(e.l),X(y,0);break;case 2:throw g=ie(y),Ot(e.l,g),e.g=null,g instanceof q?g:new q(2,6,6002,g.message)}})}function z4(e,t,n){for(var o=R(t),u=o.next();!u.done;u=o.next()){u=R(Q1(u.value));for(var a=u.next();!a.done;a=u.next())a=a.value,n.has(a.keySystem)||n.set(a.keySystem,[]),n.get(a.keySystem).push(a)}if(n.size==1&&n.has(""))throw new q(2,6,6e3);o=e.h.preferredKeySystems,o.length||(u=Us(e.h.servers),u.size==1&&(o=Array.from(u.keys()))),u=R(o);var d=u.next();for(a={};!d.done;a={Di:void 0},d=u.next()){a.Di=d.value,d=R(t);for(var p=d.next();!p.done;p=d.next())if(p=p.value.decodingInfos.find((function(T){return function(M){return M.supported&&M.keySystemAccess!=null&&M.keySystemAccess.keySystem==T.Di}})(a)))return p.keySystemAccess}for(u=R([!0,!1]),a=u.next();!a.done;a=u.next())for(a=a.value,d=R(t),p=d.next();!p.done;p=d.next()){p=R(p.value.decodingInfos);for(var g=p.next();!g.done;g=p.next())if(g=g.value,g.supported&&g.keySystemAccess){var y=g.keySystemAccess.keySystem;if(!o.includes(y)){var w=n.get(y);for(!w&&e.h.keySystemsMapping[y]&&(w=n.get(e.h.keySystemsMapping[y])),y=R(w),w=y.next();!w.done;w=y.next())if(!!w.value.licenseServerUri==a)return g.keySystemAccess}}}return null}function vp(e){Sl(e)&&e.m.resolve()}function K1(e,t){new dt(function(){t.loaded=!0,vp(e)}).ka(Z4)}function Y1(e,t,n){var o,u,a,d,p,g,y;return $(function(w){switch(w.g){case 1:try{o=e.B.createSession("persistent-license")}catch(T){return u=new q(2,6,6005,T.message),e.u(u),w.return(Promise.reject(u))}return e.o.D(o,"message",function(T){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.$?e.N.push(T):xp(e,T)}),e.o.D(o,"keystatuseschange",function(T){return q1(e,T)}),a={initData:n.initData,initDataType:n.initDataType,loaded:!1,Vg:1/0,Lb:null,type:"persistent-license"},e.i.set(o,a),ce(w,2),D(w,o.load(t),4);case 4:return d=w.h,Ot(e.l),d||(e.i.delete(o),p=e.h.persistentSessionOnlinePlayback?1:2,e.u(new q(p,6,6013)),a.loaded=!0),K1(e,a),vp(e),w.return(o);case 2:g=ie(w),Ot(e.l,g),e.i.delete(o),y=e.h.persistentSessionOnlinePlayback?1:2,e.u(new q(y,6,6005,g.message)),a.loaded=!0,vp(e);case 3:return w.return(Promise.resolve())}})}function V4(e,t,n,o){try{var u=e.B.createSession(o)}catch(a){e.u(new q(2,6,6005,a.message));return}e.o.D(u,"message",function(a){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.$?e.N.push(a):xp(e,a)}),e.o.D(u,"keystatuseschange",function(a){return q1(e,a)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,Vg:1/0,Lb:null,type:o});try{n=e.h.initDataTransform(n,t,e.g)}catch(a){t=a,a instanceof q||(t=new q(2,6,6016,a)),e.u(t);return}e.h.logLicenseExchange&&Sr(n),u.generateRequest(t,n).catch(function(a){if(!e.l.g){e.i.delete(u);var d=a.errorCode;if(d&&d.systemCode){var p=d.systemCode;p<0&&(p+=4294967296),p="0x"+p.toString(16)}e.u(new q(2,6,6006,a.message,a,p))}})}function H4(e){return $(function(t){return t.g==1?e.J?D(t,e.m,3):t.A(0):D(t,Promise.all(e.X.map(function(n){return n.promise})),0)})}function xp(e,t){var n,o,u,a,d,p,g,y,w,T,M,L,P,N,O,F;$(function(B){switch(B.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Sr(t.message),o=e.i.get(n),u=e.g.licenseServerUri,a=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&a&&a.individualizationServer&&(u=a.individualizationServer),d=un([u],e.h.retryParameters),d.body=t.message,d.method="POST",d.licenseRequestType=t.messageType,d.sessionId=n.sessionId,d.drmInfo=e.g,o&&(d.initData=o.initData,d.initDataType=o.initDataType),a&&a.headers)for(p in a.headers)d.headers[p]=a.headers[p];if(e.g.keySystem==="org.w3.clearkey"){var V=d,Y=e.g;try{var J=fr(V.body);if(J){var H=JSON.parse(J);H.type||(H.type=Y.sessionType,V.body=Xi(JSON.stringify(H)))}}catch{}}if(hp(e.g.keySystem))if(V=qr(d.body,!0,!0),V.includes("PlayReadyKeyMessage")){for(V=Bo(V,"PlayReadyKeyMessage"),Y=ir(V,"HttpHeader"),Y=R(Y),J=Y.next();!J.done;J=Y.next())H=J.value,J=ir(H,"name")[0],H=ir(H,"value")[0],d.headers[nn(J)]=nn(H);V=ir(V,"Challenge")[0],d.body=Li(nn(V))}else d.headers["Content-Type"]="text/xml; charset=utf-8";return g=Date.now(),ce(B,2),w=e.F.tc.request(2,d,{isPreload:e.V()}),e.X.push(w),D(B,w.promise,4);case 4:y=B.h,Ue(e.X,w),X(B,3);break;case 2:return T=ie(B),e.l.g||(M={sessionId:n.sessionId,sessionType:o.type,initData:o.initData,initDataType:o.initDataType},L=new q(2,6,6007,T,M),e.i.size==1?(e.u(L),o&&o.Lb&&o.Lb.reject(L)):(o&&o.Lb&&o.Lb.reject(L),e.i.delete(n),Sl(e)&&(e.m.resolve(),e.K.ka(.1)))),B.return();case 3:return e.l.g?B.return():(e.I+=(Date.now()-g)/1e3,e.h.logLicenseExchange&&Sr(y.data),ce(B,5),D(B,n.update(y.data),7));case 7:X(B,6);break;case 5:return N=(P=ie(B))&&P.message||String(P),O=new q(2,6,6008,N),e.u(O),o&&o.Lb&&o.Lb.reject(O),B.return();case 6:if(e.l.g)return B.return();F=new Ie("drmsessionupdate"),e.F.onEvent(F),o&&(o.Lb&&o.Lb.resolve(),K1(e,o)),te(B)}})}function q1(e,t){t=t.target;var n=e.i.get(t),o=!1;t.keyStatuses.forEach(function(a,d){if(typeof d=="string"){var p=d;d=a,a=p}if(p=Me(),hp(e.g.keySystem)&&d.byteLength==16&&p.hh()){p=Zn(d);var g=p.getUint32(0,!0),y=p.getUint16(4,!0),w=p.getUint16(6,!0);p.setUint32(0,g,!1),p.setUint16(4,y,!1),p.setUint16(6,w,!1)}a!="status-pending"&&(n.loaded=!0),a=="expired"&&(o=!0),d=Tr(d).slice(0,32),e.ba.set(d,a)});var u=t.expiration-Date.now();(u<0||o&&u<1e3)&&n&&!n.Lb&&(e.i.delete(t),J1(t)),Sl(e)&&(e.m.resolve(),e.K.ka(ek))}function G4(e){var t=e.ba,n=e.ma;n.clear(),t.forEach(function(o,u){return n.set(u,o)}),t=Array.from(n.values()),t.length&&t.every(function(o){return o=="expired"})&&e.u(new q(2,6,6014)),e.F.uf(mp(n))}function X4(){var e,t,n,o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye,ae,he,Te,ke;return $(function(Ke){if(Ke.g==1){if(e="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(f.MediaKeys&&f.navigator&&f.navigator.requestMediaKeySystemAccess&&f.MediaKeySystemAccess&&f.MediaKeySystemAccess.prototype.getConfiguration)){for(t={},n=R(e),o=n.next();!o.done;o=n.next())u=o.value,t[u]=null;return Ke.return(t)}for(a="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),d=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],p=["150","2000","3000"],g={"com.widevine.alpha":d,"com.widevine.alpha.experiment":d,"com.microsoft.playready.recommendation":p},y=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],w=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],T={videoCapabilities:y,audioCapabilities:w,initDataTypes:["cenc","sinf","skd","keyids"]},M=[null,"cenc","cbcs"],L=new Map,P=Me(),N=function(Re,pt){var ht,At,ut,tt,Et,at,rt,ct,Xt,Vt,Wt,yn,rn;return $(function(It){switch(It.g){case 1:return ce(It,2),D(It,pt.createMediaKeys(),5);case 5:ht=It.h;case 4:X(It,3);break;case 2:return ie(It),It.return();case 3:if(ut=(At=pt.getConfiguration().sessionTypes)?At.includes("persistent-license"):!1,P.ti()&&(ut=!1),tt=pt.getConfiguration().videoCapabilities,Et=pt.getConfiguration().audioCapabilities,at={persistentState:ut,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},L.has(Re)&&L.get(Re)?at=L.get(Re):L.set(Re,at),(rt=tt[0].encryptionScheme)&&!at.encryptionSchemes.includes(rt)&&at.encryptionSchemes.push(rt),(ct=tt[0].robustness)&&!at.videoRobustnessLevels.includes(ct)&&at.videoRobustnessLevels.push(ct),(Xt=Et[0].robustness)&&!at.audioRobustnessLevels.includes(Xt)&&at.audioRobustnessLevels.push(Xt),"getStatusForPolicy"in ht){for(Vt=[],Wt=R(a),yn=Wt.next(),rn={};!yn.done;rn={Yd:void 0},yn=Wt.next())rn.Yd=yn.value,at.minHdcpVersions.includes(rn.Yd)||Vt.push(ht.getStatusForPolicy({minHdcpVersion:rn.Yd}).then((function(vo){return function(xi){xi!="usable"||at.minHdcpVersions.includes(vo.Yd)||at.minHdcpVersions.push(vo.Yd)}})(rn)));return D(It,Promise.all(Vt),0)}It.A(0)}})},O=function(Re,pt,ht,At){var ut,tt,Et,at,rt,ct,Xt,Vt,Wt,yn,rn;return $(function(It){switch(It.g){case 1:for(ce(It,2),ut=Wi(T),tt=R(ut.videoCapabilities),Et=tt.next();!Et.done;Et=tt.next())at=Et.value,at.encryptionScheme=pt,at.robustness=ht;for(rt=R(ut.audioCapabilities),ct=rt.next();!ct.done;ct=rt.next())Xt=ct.value,Xt.encryptionScheme=pt,Xt.robustness=At;return Vt=Wi(ut),Vt.persistentState="required",Vt.sessionTypes=["persistent-license"],Wt=[Vt,ut],rn=Me(),rn.Oa()=="MOBILE"?D(It,gl(5,navigator.requestMediaKeySystemAccess(Re,Wt)),7):D(It,navigator.requestMediaKeySystemAccess(Re,Wt),6);case 6:yn=It.h,It.A(5);break;case 7:yn=It.h;case 5:return D(It,N(Re,yn),8);case 8:X(It,0);break;case 2:ie(It),te(It)}})},F=function(Re,pt,ht,At){var ut,tt,Et,at;return $(function(rt){switch(rt.g){case 1:return ce(rt,2),ut={type:"media-source",video:{contentType:y[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:w[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:Re,video:{encryptionScheme:pt,robustness:ht},audio:{encryptionScheme:pt,robustness:At}}},Et=Me(),Et.Oa()=="MOBILE"?D(rt,gl(5,navigator.mediaCapabilities.decodingInfo(ut)),7):D(rt,navigator.mediaCapabilities.decodingInfo(ut),6);case 6:tt=rt.h,rt.A(5);break;case 7:tt=rt.h;case 5:return at=tt.keySystemAccess,D(rt,N(Re,at),8);case 8:X(rt,0);break;case 2:ie(rt),te(rt)}})},B=R(e),V=B.next();!V.done;V=B.next())Y=V.value,L.set(Y,null);for(J=function(Re){return!(Me().Ea()==="WEBKIT"&&Re==="org.w3.clearkey")},H=[],z=R(M),Q=z.next();!Q.done;Q=z.next())for(ee=Q.value,se=R(e),fe=se.next();!fe.done;fe=se.next())ne=fe.value,J(ne)&&(H.push(O(ne,ee,"","")),H.push(F(ne,ee,"","")));for(xe=R(e),ye=xe.next();!ye.done;ye=xe.next())for(ae=ye.value,he=R(g[ae]||[]),Te=he.next();!Te.done;Te=he.next())ke=Te.value,J(ae)&&(H.push(O(ae,null,ke,"")),H.push(O(ae,null,"",ke)),H.push(F(ae,null,ke,"")),H.push(F(ae,null,"",ke)));return D(Ke,Promise.all(H),2)}return Ke.return(mp(L))})}function J1(e){return $(function(t){if(t.g==1)return ce(t,2),D(t,gl(Q4,Promise.all([e.close().catch(function(){}),e.closed])),4);if(t.g!=2)return X(t,0);ie(t),te(t)})}function wl(e){var t;return $(function(n){return t=Array.from(e.i.entries()),e.i.clear(),D(n,Promise.all(t.map(function(o){o=R(o);var u=o.next().value,a=o.next().value;return $(function(d){if(d.g==1)return ce(d,2),e.oa||e.C.has(u.sessionId)||a.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?D(d,J1(u),5):D(d,u.remove(),5);if(d.g!=2)return X(d,0);ie(d),te(d)})})),0)})}function Q1(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function W4(e){e.i.forEach(function(t,n){var o=t.Vg,u=n.expiration;isNaN(u)&&(u=1/0),u!=o&&(e.F.onExpirationUpdated(n.sessionId,u),t.Vg=u)})}function Sl(e){return e=e.i.values(),P4(e,function(t){return t.loaded})}function K4(e){for(var t=R(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.ba.get(n.value)!=="usable")return!1;return!0}function Y4(e,t){var n=[];for(t.forEach(function(o,u){n.push({keySystem:u,licenseServerUri:o,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=R(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function q4(e,t,n,o,u,a,d,p){var g=[];e=R(e);for(var y=e.next(),w={};!y.done;w={Ka:void 0},y=e.next()){if(w.Ka=y.value,t.includes(w.Ka.encryptionScheme)||t.push(w.Ka.encryptionScheme),w.Ka.keySystem=="org.w3.clearkey"&&w.Ka.licenseServerUri.startsWith("data:application/json;base64,")?g.includes(w.Ka.licenseServerUri)||g.push(w.Ka.licenseServerUri):n.includes(w.Ka.licenseServerUri)||n.push(w.Ka.licenseServerUri),u.includes(w.Ka.serverCertificateUri)||u.push(w.Ka.serverCertificateUri),w.Ka.serverCertificate&&(o.some((function(L){return function(P){return wr(P,L.Ka.serverCertificate)}})(w))||o.push(w.Ka.serverCertificate)),w.Ka.initData){y=R(w.Ka.initData);for(var T=y.next(),M={};!T.done;M={Mg:void 0},T=y.next())M.Mg=T.value,a.some((function(L){return function(P){var N=L.Mg;return P.keyId&&P.keyId==N.keyId?!0:P.initDataType==N.initDataType&&wr(P.initData,N.initData)}})(M))||a.push(M.Mg)}if(w.Ka.keyIds)for(y=R(w.Ka.keyIds),T=y.next();!T.done;T=y.next())d.add(T.value);if(w.Ka.keySystemUris&&p)for(w=R(w.Ka.keySystemUris),y=w.next();!y.done;y=w.next())p.add(y.value)}if(g.length==1)n.push(g[0]);else if(g.length>0){for(t=[],g=R(g),o=g.next();!o.done;o=g.next())o=f.atob(o.value.split("data:application/json;base64,").pop()),o=JSON.parse(o),t.push.apply(t,le(o.keys));g=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+f.btoa(g))}}function J4(e,t,n,o){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&t.get(u)&&(t=t.get(u),e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),o[u]&&(e.keySystem=o[u]),f.cast&&f.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}function Z1(e,t){if(e=Us(e),e.size!=0){e=jy(e),t=R(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}var Q4=1,Z4=5,ek=.5;function tk(){this.g=Fs,this.i=new Map().set(Fs,2).set(Go,1),this.h=0}function wp(e,t){var n=e.g!==t;return e.g=t,n&&t===Fs&&(e.h=Date.now()),n}var Go=0,Fs=1;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Sp(e,t,n){this.g=e,this.i=t,this.h=n}function ev(e,t){return $(function(n){if(n.g==1)return D(n,v4(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||g1(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(vl))throw new q(2,4,4032);return n.return(nv(e,t))})}function tv(e,t){var n=e.g.restrictions;e=e.i;var o=!1;t=R(t.variants);for(var u=t.next();!u.done;u=t.next()){u=u.value;var a=u.allowedByApplication;u.allowedByApplication=Sf(u,n,e),a!=u.allowedByApplication&&(o=!0)}return o}function nv(e,t){var n=tv(e,t);if(t){var o=e.h?e.h.g:null;if(o&&e.h.B){for(var u=new Set,a=R(t.variants),d=a.next();!d.done;d=a.next())d=d.value,d.audio&&u.add(d.audio),d.video&&u.add(d.video);for(u=R(u),a=u.next();!a.done;a=u.next())iv(e,o.keySystem,a.value)}rv(e,t)}return n}function iv(e,t,n){n=R(n.drmInfos);for(var o=n.next();!o.done;o=n.next())if(o=o.value,o.keySystem==t){o=R(o.initData||[]);for(var u=o.next();!u.done;u=o.next())u=u.value,xl(e.h,u.initDataType,u.initData)}}function rv(e,t){e=e.h?e.h.We():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var o=!1,u=!1,a=new Set,d=new Set,p=new Set;t=R(t.variants);for(var g=t.next();!g.done;g=t.next())g=g.value,g.audio&&p.add(g.audio),g.video&&p.add(g.video),g.allowedByApplication?g.allowedByKeySystem&&(o=!0):u=!0;for(p=R(p),t=p.next();!t.done;t=p.next())if(t=t.value,t.keyIds.size)for(t=R(t.keyIds),g=t.next();!g.done;g=t.next()){g=g.value;var y=e[n?"00":g];y?ov.includes(y)&&d.add(y):a.add(g)}if(!o)throw e={hasAppRestrictions:u,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(d)},new q(2,4,4012,e)}var ov=["output-restricted","internal-error"];function Tl(){}function Xo(e,t){js.set(e,t)}function nk(){var e={};if(Me(),mr())for(var t=R(js.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(t=R(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),n=t.next();!n.done;n=t.next())n=n.value,e[n]=mr()?js.has(n):Ko().canPlayType(n)!="";return e}function sv(e,t){if(t){var n=js.get(t.toLowerCase());if(n)return n}throw new q(2,4,4e3,e,t)}be("shaka.media.ManifestParser",Tl),Tl.unregisterParserByMime=function(e){js.delete(e)},Tl.registerParserByMime=Xo,Tl.registerParserByExtension=function(){yt("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Tl.AccessibilityPurpose={Cm:"visually impaired",Ml:"hard of hearing",jm:"spoken subtitles"};var js=new Map;be("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function Uf(e,t){var n=null,o=null,u=null,a=null,d=e.U();return t&1&&(u=e.Dd()),t&2&&(a=e.U()),t&8&&(n=e.U()),t&16&&(o=e.U()),{trackId:d,Rd:n,Sd:o,lj:u,Li:a}}function Bf(e,t){return t==1?(t=e.U(),e=e.U(),{baseMediaDecodeTime:t*4294967296+e}):{baseMediaDecodeTime:e.U()}}function Ff(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.U(),e.skip(4),e=e.Ba(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function jf(e,t,n){var o=e.U(),u=[],a=null;n&1&&(a=e.$g()),n&4&&e.skip(4);for(var d=0;d<o;d++){var p={jh:null,sampleSize:null,Cf:null};n&256&&(p.jh=e.U()),n&512&&(p.sampleSize=e.U()),n&1024&&e.skip(4),n&2048&&(p.Cf=t==0?e.U():e.$g()),u.push(p)}return{Im:o,ih:u,mg:a}}function uv(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Ba();return e.skip(2),e.skip(2),e.skip(2),e=e.Ba()+e.Ba()/65536,{channelCount:t,sampleRate:e}}function Tp(e){return e=e.U(),{codec:Df(e)}}function ik(e){var t=null,n=null,o=e.Tb(4),u=String.fromCharCode(o[0]);if(u+=String.fromCharCode(o[1]),u+=String.fromCharCode(o[2]),u+=String.fromCharCode(o[3]),u==="nclx"){switch(e.Ba()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(o=e.Ba(),e.Ba(),o){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,ue:n}}function Cl(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function hi(e){return(e<10?"0":"")+e}function $s(e){this.g=e}function zs(e){for(var t=[],n=R(e.g),o=n.next();!o.done;o=n.next()){var u=t,a=u.push,d=o.value;o=mt;var p=d.id+1,g=d.stream.width||0,y=d.stream.height||0;d.type=="audio"&&(y=g=0);var w=d.duration*d.timescale,T=Math.floor(w/(oo+1));switch(w=Math.floor(w%(oo+1)),p=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(le(Gt(p,4)),[0,0,0,0],le(Gt(T,4)),le(Gt(w,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],le(Gt(g,2)),[0,0],le(Gt(y,2)),[0,0])),p=mt("tkhd",p),g=mt,T=d.duration*d.timescale,y=Math.floor(T/(oo+1)),T=Math.floor(T%(oo+1)),w=d.stream.language,w=w.charCodeAt(0)-96<<10|w.charCodeAt(1)-96<<5|w.charCodeAt(2)-96,y=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(le(Gt(d.timescale,4)),le(Gt(y,4)),le(Gt(T,4)),le(Gt(w,2)),[0,0])),y=mt("mdhd",y),T=d,w=new Uint8Array([]),T.type){case"video":w=ok.value();break;case"audio":w=sk.value()}T=mt("hdlr",w);e:{switch(d.type){case"video":d=mt("minf",mt("vmhd",ck.value()),hv.value(),lv(d));break e;case"audio":d=mt("minf",mt("smhd",dk.value()),hv.value(),lv(d));break e}d=new Uint8Array([])}d=g("mdia",y,T,d),o=o("trak",p,d),a.call(u,o)}for(t=sn.apply(_n,le(t)),a=e.g[0],n=mt,o=a.duration*a.timescale,u=Math.floor(o/(oo+1)),o=Math.floor(o%(oo+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(le(Gt(a.timescale,4)),le(Gt(u,4)),le(Gt(o,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=mt("mvhd",u),o=[],e=R(e.g),g=e.next();!g.done;g=e.next())d=o,p=d.push,g=new Uint8Array([0,0,0,0].concat(le(Gt(g.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),g=mt("trex",g),p.call(d,g);if(e=sn.apply(_n,le(o)),e=mt("mvex",e),o=[],a.encrypted){for(a=R(a.stream.drmInfos),d=a.next();!d.done;d=a.next())if(d=d.value,d.initData)for(d=R(d.initData),p=d.next();!p.done;p=d.next())o.push(p.value.initData);a=sn.apply(_n,le(o))}else a=new Uint8Array([]);return e=n("moov",u,t,e,a),t=pk.value(),n=new Uint8Array(t.byteLength+e.byteLength),n.set(t),n.set(e,t.byteLength),n}function lv(e){var t=mt,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=Me().le()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var o=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,o=e.stream.height||0,e.Ra.byteLength>0)var u=mt("avcC",e.Ra);else{u=mt;for(var a=7,d=[],p=[],g=0,y=0,w=0,T=0;T<e.Cb.length;T++){var M=fv(e.Cb[T]);switch(M[0]&31){case 7:d.push(M),a+=M.length+2;break;case 8:p.push(M),a+=M.length+2}}for(d.length>0&&(g=d[0][1],w=d[0][2],y=d[0][3]),a=new Uint8Array(a),T=0,a[T++]=1,a[T++]=g,a[T++]=w,a[T++]=y,a[T++]=255,a[T++]=224|d.length,g=0;g<d.length;g++)a[T++]=(d[g].length&65280)>>8,a[T++]=d[g].length&255,a.set(d[g],T),T+=d[g].length;for(a[T++]=p.length,d=0;d<p.length;d++)a[T++]=(p[d].length&65280)>>8,a[T++]=p[d].length&255,a.set(p[d],T),T+=p[d].length;u=u("avcC",a)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(le(Gt(n,2)),le(Gt(o,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),o="avc1",p=av(e),d=new Uint8Array([]),e.encrypted&&(d=Wo(e.stream,e.codecs),o="encv"),o=mt(o,n,u,p,d)}else e.codecs.includes("hvc1")&&(o=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),e.Ra.byteLength>0&&(n=mt("hvcC",e.Ra)),o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(le(Gt(o,2)),le(Gt(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",p=av(e),d=new Uint8Array([]),e.encrypted&&(d=Wo(e.stream,e.codecs),u="encv"),o=mt(u,o,n,p,d));break;case"audio":n=="mp3"?e=mt(".mp3",bl(e)):n=="ac-3"?(n=mt("dac3",e.Ha),o="ac-3",u=new Uint8Array([]),e.encrypted&&(u=Wo(e.stream,e.codecs),o="enca"),e=mt(o,bl(e),n,u)):n=="ec-3"?(n=mt("dec3",e.Ha),o="ec-3",u=new Uint8Array([]),e.encrypted&&(u=Wo(e.stream,e.codecs),o="enca"),e=mt(o,bl(e),n,u)):n=="opus"?(n=mt("dOps",e.Ha),o="Opus",u=new Uint8Array([]),e.encrypted&&(u=Wo(e.stream,e.codecs),o="enca"),e=mt(o,bl(e),n,u)):(e.Ha.byteLength>0?n=mt("esds",e.Ha):(n=mt,o=e.id+1,u=e.stream.channelsCount||2,d=e.stream.audioSamplingRate||44100,g=Cs("audio",e.codecs.split(",")),y={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},p=y[d],(g==="mp4a.40.5"||g==="mp4a.40.29")&&(p=y[d*2]),d=parseInt(g.split(".").pop(),10),o=new Uint8Array([0,0,0,0,3,25].concat(le(Gt(o,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,d<<3|p>>>1,p<<7|u<<3,6,1,2])),n=n("esds",o)),o="mp4a",u=new Uint8Array([]),e.encrypted&&(u=Wo(e.stream,e.codecs),o="enca"),e=mt(o,bl(e),n,u)),o=e}return e=mt("stsd",hk.value(),o),t("stbl",e,mt("stts",uk.value()),mt("stsc",lk.value()),mt("stsz",fk.value()),mt("stco",ak.value()))}function av(e){if(!e.Za&&!e.$a)return new Uint8Array([]);var t=e.$a;return e=new Uint8Array([].concat(le(Gt(e.Za,4)),le(Gt(t,4)))),mt("pasp",e)}function bl(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(le(Gt(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Wo(e,t){var n=mt;t=new Uint8Array([].concat(le(Gt(cv(t.split(".")[0]),4)))),t=mt("frma",t);var o="cenc",u=e.drmInfos[0];u&&u.encryptionScheme&&(o=u.encryptionScheme),o=new Uint8Array([0,0,0,0].concat(le(Gt(cv(o),4)),[0,1,0,0])),o=mt("schm",o),u=mt;var a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=R(e.drmInfos);for(var d=e.next();!d.done;d=e.next())if((d=d.value)&&d.keyIds&&d.keyIds.size){d=R(d.keyIds);for(var p=d.next();!p.done;p=d.next())a=fv(p.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),a=mt("tenc",e,a),n("sinf",t,o,u("schi",a))}function kl(e){var t=[];e=R(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var o=t.push,u=o.apply,a=mt,d=new Uint8Array([0,0,0,0].concat(le(Gt(n.data?n.data.sequenceNumber:0,4))));d=mt("mfhd",d);var p,g=n.data?n.data.Bb:[],y=new Uint8Array(4+g.length);for(p=0;p<g.length;p++){var w=g[p].flags;y[p+4]=w.hb<<4|w.mb<<2|w.jb}g=mt("sdtp",y);var T=g.length+32+20+8+16+8+8;y=mt,p=new Uint8Array([0,0,0,58].concat(le(Gt(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),p=mt("tfhd",p),w=n.data?n.data.baseMediaDecodeTime:0;var M=Math.floor(w%(oo+1));w=new Uint8Array([1,0,0,0].concat(le(Gt(Math.floor(w/(oo+1)),4)),le(Gt(M,4)))),w=mt("tfdt",w);var L=T;T=n.data?n.data.Bb:[],M=T.length;var P=12+16*M,N=new Uint8Array(P);for(L+=8+P,N.set([n.type==="video"?1:0,0,15,1].concat(le(Gt(M,4)),le(Gt(L,4))),0),L=0;L<M;L++){var O=T[L];P=Gt(O.duration,4);var F=Gt(O.size,4),B=O.flags;O=Gt(O.wb,4),N.set([].concat(le(P),le(F),[B.zb<<2|B.hb,B.mb<<6|B.jb<<4|B.Ab,B.gb&61440,B.gb&15],le(O)),12+16*L)}T=mt("trun",N),g=y("traf",p,w,T,g),a=a("moof",d,g),u.call(o,t,[a,rk(n)])}return sn.apply(_n,le(t))}function rk(e){return e=(e.data?e.data.Bb:[]).map(function(t){return t.data}),e=sn.apply(_n,le(e)),mt("mdat",e)}function Gt(e,t){var n=[];for(--t;t>=0;t--)n.push(e>>8*t&255);return n}function fv(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[n*2]+e[n*2+1]),16);return t}function cv(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<(e.length-n-1)*8;return t}function mt(e){var t=ft.apply(1,arguments),n=dv.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],dv.set(e,n));for(var o=8,u=t.length-1;u>=0;u--)o+=t[u].byteLength;for(u=new Uint8Array(o),u[0]=o>>24&255,u[1]=o>>16&255,u[2]=o>>8&255,u[3]=o&255,u.set(n,4),n=0,o=8;n<t.length;n++)u.set(t[n],o),o+=t[n].byteLength;return u}var oo=4294967295,dv=new Map,ok=new re(function(){return new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0])}),sk=new re(function(){return new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),uk=new re(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),lk=new re(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),ak=new re(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),fk=new re(function(){return new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])}),ck=new re(function(){return new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}),dk=new re(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),hk=new re(function(){return new Uint8Array([0,0,0,0,0,0,0,1])}),pk=new re(function(){var e=new Uint8Array([105,115,111,109]),t=new Uint8Array([97,118,99,49]),n=new Uint8Array([0,0,0,1]);return mt("ftyp",e,n,e,t)}),hv=new re(function(){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);return e=mt("dref",e),mt("dinf",e)});function gk(e){e=et(e);var t=null;return new Lt().box("moov",ot).box("trak",ot).box("mdia",ot).box("minf",ot).box("stbl",ot).T("stsd",_r).box("enca",function(n){return t=n.reader.h,Pf(n)}).box("sinf",ot).box("frma",function(n){n.parser.stop(),Tp(n.reader).codec==="ec-3"&&t&&t.getUint16(16)!==2&&t.setUint16(16,2)}).parse(e),e}function mk(e,t,n){function o(L){T.push({box:L,wi:1701733217})}function u(L){T.push({box:L,wi:1701733238})}function a(L){g=!0,L.parser.stop()}function d(L){w.push(L),ot(L)}var p=t=et(t),g=!1,y,w=[],T=[];if(new Lt().box("moov",d).box("trak",d).box("mdia",d).box("minf",d).box("stbl",d).T("stsd",function(L){y=L,w.push(L),_r(L)}).T("encv",a).T("enca",a).T("dvav",u).T("dva1",u).T("dvh1",u).T("dvhe",u).T("dvc1",u).T("dvi1",u).T("hev1",u).T("hvc1",u).T("avc1",u).T("avc3",u).T("ac-3",o).T("ec-3",o).T("ac-4",o).T("Opus",o).T("fLaC",o).T("mp4a",o).parse(t),g)return t;if(T.length==0||!y)throw Tr(t),new q(2,3,3019,n);T.reverse(),n=R(T);for(var M=n.next();!M.done;M=n.next())M=M.value,p=xk(e,p,y,M.box,w,M.wi);return Me().Gi()?(e=new Uint8Array(t.byteLength+p.byteLength),e.set(p),e.set(t,p.byteLength),e):p}function yk(e){e=et(e);var t=[];new Lt().box("mdat",function(d){t.push(d)}).parse(e);for(var n=[],o=0;o<t.length;o++){var u=t[o-1],a=t[o];n.push(vk(e.subarray(u?u.start+u.size:0,a.start+a.size)))}return sn.apply(_n,le(n))}function vk(e){function t(T){d.push(T),ot(T)}var n,o,u,a,d=[];if(new Lt().box("moof",t).box("traf",t).T("tfhd",function(T){n=T,u=Uf(T.reader,T.flags)}).T("trun",function(T){o=T,a=jf(T.reader,T.version,T.flags)}).parse(e),u&&u.Li!==2){var p=n.start+ro(n)+4+(u.lj!==null?8:0),g=Zn(e);if(u.Li!==null)g.setUint32(p,2);else{$f(e,n.start,n.size+4);var y=g.getUint32(n.start+8);g.setUint32(n.start+8,y|2),a&&a.mg!==null&&g.setInt32(o.start+ro(o)+4,a.mg+4),y=e.subarray(0,p),g=e.subarray(p),e=new Uint8Array(e.byteLength+4),e.set(y),y=[];for(var w=3;w>=0;w--)y.push(2>>8*w&255);for(e.set(new Uint8Array(y),p),e.set(g,p+4),p=R(d),g=p.next();!g.done;g=p.next())g=g.value,$f(e,g.start,g.size+4)}}return e}function xk(e,t,n,o,u,a){var d=Wo(e,o.name),p=t.subarray(o.start,o.start+o.size);for(e=new Uint8Array(o.size+d.byteLength),e.set(p,0),Zn(e).setUint32(4,a),e.set(d,o.size),$f(e,0,e.byteLength),a=new Uint8Array(t.byteLength+e.byteLength),o=Me().cf()?o.start:o.start+o.size,d=t.subarray(o),a.set(t.subarray(0,o)),a.set(e,o),a.set(d,o+e.byteLength),t=R(u),u=t.next();!u.done;u=t.next())u=u.value,$f(a,u.start,u.size+e.byteLength);return e=Zn(a,n.start),n=ro(n),t=e.getUint32(n),e.setUint32(n,t+1),a}function $f(e,t,n){e=Zn(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}function wk(e){function t(u){o.push({start:u.start,size:u.size}),ot(u)}var n=et(e),o=[];return new Lt().box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(u){o.push({start:u.start,size:u.size});for(var a=Zn(n,u.start),d=0;d<u.size-3;d++){var p=a.getUint32(d);p==1633889587?a.setUint32(d,1700998451):p==1684103987&&a.setUint32(d,1684366131)}}).parse(n),n}function ni(e,t,n,o,u,a,d,p){this.P=e,this.startByte=t,this.endByte=n,this.xd=o===void 0?null:o,this.timescale=u===void 0?null:u,this.h=a===void 0?null:a,this.aesKey=d===void 0?null:d,this.g=this.mimeType=this.codecs=null,this.encrypted=p===void 0?!1:p}ni.prototype.Jc=function(){return this.startByte},ni.prototype.Gc=function(){return this.endByte},ni.prototype.me=function(e){this.h=e},ni.prototype.Yb=function(){return this.h};function Al(e,t){return e===t?!0:e&&t?e.Jc()==t.Jc()&&e.Gc()==t.Gc()&&Rt(e.P().sort(),t.P().sort())&&wr(e.Yb(),t.Yb()):e==t}be("shaka.media.InitSegmentReference",ni),ni.prototype.getEndByte=ni.prototype.Gc,ni.prototype.getStartByte=ni.prototype.Jc;function Ve(e,t,n,o,u,a,d,p,g,y,w,T,M,L,P,N){for(y=y===void 0?[]:y,L=L===void 0?Lr:L,this.startTime=e,this.j=this.endTime=t,this.C=n,this.startByte=o,this.endByte=u,this.aa=a,this.timestampOffset=d,this.appendWindowStart=p,this.appendWindowEnd=g,this.g=y,this.tilesLayout=w===void 0?"":w,this.B=T===void 0?null:T,this.h=M===void 0?null:M,this.status=L,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=P===void 0?null:P,this.thumbnailSprite=null,this.i=-1,this.u=N===void 0?!1:N,this.ce=this.Xc=!1,e=R(this.g),t=e.next();!t.done;t=e.next())t.value.ri();this.u&&this.g.length&&this.g[this.g.length-1].pi(),this.o=this.bandwidth=this.mimeType=this.codecs=null,this.F=!1}m=Ve.prototype,m.P=function(){return this.C()},m.getStartTime=function(){return this.startTime},m.Fj=function(){return this.endTime},m.Jc=function(){return this.startByte},m.Gc=function(){return this.endByte},m.bk=function(){return this.tilesLayout},m.$j=function(){return this.B},m.Kc=function(){return this.status},m.yk=function(){this.status=gv},m.Rg=function(){this.preload=!0},m.isPreload=function(){return this.preload},m.wd=function(){this.l=!1},m.lk=function(){return this.l},m.ri=function(){this.Xc=!0},m.pk=function(){return this.Xc},m.pi=function(){this.ce=!0},m.nk=function(){return this.ce},m.oi=function(){this.m=!0},m.hk=function(){return this.m},m.If=function(e){this.thumbnailSprite=e},m.Yj=function(){return this.thumbnailSprite},m.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=R(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},m.Ah=function(e){this.h==null?Rn("Sync attempted without sync time!"):(e=this.h-e-this.startTime,Math.abs(e)>=.001&&this.offset(e))},m.me=function(e,t){this.o=e,this.F=t===void 0?!1:t},m.Yb=function(e){var t=this.o;return(e===void 0||e)&&this.F&&(this.o=null),t};function pv(e,t){e.aa=t,e=R(e.g);for(var n=e.next();!n.done;n=e.next())pv(n.value,t)}be("shaka.media.SegmentReference",Ve),Ve.prototype.getSegmentData=Ve.prototype.Yb,Ve.prototype.setSegmentData=Ve.prototype.me,Ve.prototype.syncAgainst=Ve.prototype.Ah,Ve.prototype.offset=Ve.prototype.offset,Ve.prototype.getThumbnailSprite=Ve.prototype.Yj,Ve.prototype.setThumbnailSprite=Ve.prototype.If,Ve.prototype.hasByterangeOptimization=Ve.prototype.hk,Ve.prototype.markAsByterangeOptimization=Ve.prototype.oi,Ve.prototype.isLastPartial=Ve.prototype.nk,Ve.prototype.markAsLastPartial=Ve.prototype.pi,Ve.prototype.isPartial=Ve.prototype.pk,Ve.prototype.markAsPartial=Ve.prototype.ri,Ve.prototype.isIndependent=Ve.prototype.lk,Ve.prototype.markAsNonIndependent=Ve.prototype.wd,Ve.prototype.isPreload=Ve.prototype.isPreload,Ve.prototype.markAsPreload=Ve.prototype.Rg,Ve.prototype.markAsUnavailable=Ve.prototype.yk,Ve.prototype.getStatus=Ve.prototype.Kc,Ve.prototype.getTileDuration=Ve.prototype.$j,Ve.prototype.getTilesLayout=Ve.prototype.bk,Ve.prototype.getEndByte=Ve.prototype.Gc,Ve.prototype.getStartByte=Ve.prototype.Jc,Ve.prototype.getEndTime=Ve.prototype.Fj,Ve.prototype.getStartTime=Ve.prototype.getStartTime,Ve.prototype.getUris=Ve.prototype.P;var Lr=0,gv=1;Ve.Status={rl:Lr,Am:gv,Wl:2};function El(e){return e.length==1&&e.end(0)-e.start(0)<1e-4}function mv(e){return!e||El(e)?null:e.length==1&&e.start(0)<0?0:e.length?e.start(0):null}function zf(e){return!e||El(e)?null:e.length?e.end(e.length-1):null}function Cp(e,t){return!e||!e.length||El(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function yv(e,t){if(!e||!e.length||El(e))return 0;var n=0;e=R(Pr(e));for(var o=e.next();!o.done;o=e.next()){var u=o.value;o=u.start,u=u.end,u>t&&(n+=u-Math.max(o,t))}return n}function Sk(e,t,n){return!e||!e.length||El(e)?null:(e=Pr(e).findIndex(function(o,u,a){return o.start>t&&(u==0||a[u-1].end-t<=n)}),e>=0?e:null)}function Pr(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function bp(){}function vv(e,t){var n=document.createElement("source");return n.src=e,n.type=t===void 0?"":t,n}function Vf(e){for(var t=!1,n=e.getElementsByTagName("source"),o=n.length-1;o>=0;--o)e.removeChild(n[o]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function Il(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Ko(){return Vs||(kp||(kp=new dt(function(){Vs=null})),(Vs=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Vs=document.createElement("video")),kp.ka(1),Vs)}function Tk(e,t){var n,o,u,a,d;return $(function(p){if(p.g==1)return"fonts"in document&&"FontFace"in f?D(p,document.fonts.ready,2):p.return();if(!("entries"in document.fonts))return p.return();for(n=function(g){g=g.entries();for(var y=[],w=g.next();w.done===!1;)y.push(w.value),w=g.next();return y},o=R(n(document.fonts)),u=o.next();!u.done;u=o.next())if(a=u.value,a.family===e&&a.display==="swap")return p.return();d=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(d),te(p)})}be("shaka.util.Dom",bp),bp.removeAllChildren=Il,bp.clearSourceFromVideo=Vf;var kp=null,Vs=null;/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Ap(){}function xv(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function wv(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Ep(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function Ck(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(e.size<2||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var o=Ht(et(e.data,1,n)),u=e.data[2+n],a=e.data.subarray(3+n).indexOf(0);if(a===-1)return null;var d=Ht(et(e.data,3+n,a)),p;return o==="-->"?p=Ht(et(e.data,4+n+a)):p=_i(e.data.subarray(4+n+a)),t.mimeType=o,t.pictureType=u,t.description=d,t.data=p,t}return e.type==="TXXX"?e.size<2||e.data[0]!==3||(o=e.data.subarray(1).indexOf(0),o===-1)?null:(n=Ht(et(e.data,1,o)),e=Ht(et(e.data,2+o)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?e.size<2||e.data[0]!==3||(o=e.data.subarray(1).indexOf(0),o===-1)?null:(n=Ht(et(e.data,1,o)),e=Ht(et(e.data,2+o)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?e.size<2||(n=e.data.indexOf(0),n===-1)?null:(n=Ht(et(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=_i(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?e.size<2||e.data[0]!==3?null:(e=Ht(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Ht(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=_i(e.data),t):null}function Yo(e){for(var t=0,n=[];xv(e,t);){var o=Ep(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,o=t+o;t+10<o;){var u=e.subarray(t),a=Ep(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:a,data:u.subarray(10,10+a)},(a=Ck(u))&&n.push(a),t+=u.size+10}wv(e,t)&&(t+=10)}return n}function Hs(e,t){for(var n=t=t===void 0?0:t,o=0;xv(e,t);)e[t+5]>>6&1&&(o+=10),o+=10,o+=Ep(e,t+6),wv(e,t+10)&&(o+=10),t+=o;return o>0?e.subarray(n,n+o):new Uint8Array([])}be("shaka.util.Id3Utils",Ap),Ap.getID3Data=Hs,Ap.getID3Frames=Yo;function Sv(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function Dr(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,o=0;o<e.byteLength;o++)o>=2&&e[o]==3&&e[o-1]==0&&e[o-2]==0||(t[n]=e[o],n++);this.j=et(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Ip(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),o=Math.min(4,e.i);o!==0&&(n.set(e.j.subarray(t,t+o)),e.h=new Bt(n,0).U(),e.g=o*8,e.i-=o)}function pi(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=n*8,e.g-=n,Ip(e)}e.h<<=t,e.g-=t}function gt(e,t){var n=Math.min(e.g,t),o=e.h>>>32-n;return e.g-=n,e.g>0?e.h<<=n:e.i>0&&Ip(e),n=t-n,n>0?o<<n|gt(e,n):o}function Mp(e){var t;for(t=0;t<e.g;++t)if((e.h&2147483648>>>t)!==0)return e.h<<=t,e.g-=t,t;return Ip(e),t+Mp(e)}function En(e){pi(e,1+Mp(e))}function Pe(e){var t=Mp(e);return gt(e,t+1)-1}function Gs(e){return e=Pe(e),1&e?1+e>>>1:-1*(e>>>1)}function $e(e){return gt(e,1)===1}function Ct(e){return gt(e,8)}function Hf(e,t){for(var n=8,o=8,u=0;u<t;u++)o!==0&&(o=Gs(e),o=(n+o+256)%256),n=o===0?n:o}function bk(e){return Ct(e),Pe(e),Pe(e)}be("shaka.util.ExpGolomb",Dr);function Nt(){this.I=null,this.J=!1,this.m=this.K=null,this.j=[],this.g=[],this.C=this.F=null,this.i=[],this.h=[],this.G=null,this.l=[],this.B=this.H=this.o=this.u=null}m=Nt.prototype,m.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},m.Gf=function(e){this.B!=null&&this.B!=e&&(this.o=this.u=null),this.B=e},m.parse=function(e){if(e.length<564)return this;for(var t=Math.max(0,_p(e)),n=e.length-(e.length+t)%188,o=!1,u=t;u<n;u+=188)if(e[u]==71){var a=!!(e[u+1]&64),d=((e[u+1]&31)<<8)+e[u+2];if((e[u+3]&48)>>4>1){var p=u+5+e[u+4];if(p==u+188)continue}else p=u+4;switch(d){case 0:a&&(p+=e[p]+1),this.I=(e[p+10]&31)<<8|e[p+11];break;case 17:case 8191:break;case this.I:a&&(p+=e[p]+1),a=e,d={audio:-1,video:-1,$e:-1,audioCodec:"",videoCodec:""};var g=p+3+((a[p+1]&15)<<8|a[p+2])-4;for(p+=12+((a[p+10]&15)<<8|a[p+11]);p<g;){var y=(a[p+1]&31)<<8|a[p+2],w=(a[p+3]&15)<<8|a[p+4];switch(a[p]){case 6:if(w>0)for(var T=p+5,M=w;M>2;){var L=a[T+1]+2;switch(a[T]){case 5:var P=Hh(a.subarray(T+2,T+L));d.audio==-1&&P==="Opus"?(d.audio=y,d.audioCodec="opus"):d.video==-1&&P==="AV01"&&(d.video=y,d.videoCodec="av1");break;case 106:d.audio==-1&&(d.audio=y,d.audioCodec="ac3");break;case 122:d.audio==-1&&(d.audio=y,d.audioCodec="ec3");break;case 124:d.audio==-1&&(d.audio=y,d.audioCodec="aac");break;case 127:d.audioCodec=="opus"&&(P=null,a[T+2]===128&&(P=a[T+3]),P!=null&&(this.H={channelCount:(P&15)===0?2:P&15,oj:P,sampleRate:48e3}))}T+=L,M-=L}break;case 15:d.audio==-1&&(d.audio=y,d.audioCodec="aac");break;case 17:d.audio==-1&&(d.audio=y,d.audioCodec="aac-loas");break;case 21:d.$e==-1&&(d.$e=y);break;case 27:d.video==-1&&(d.video=y,d.videoCodec="avc");break;case 3:case 4:d.audio==-1&&(d.audio=y,d.audioCodec="mp3");break;case 36:d.video==-1&&(d.video=y,d.videoCodec="hvc");break;case 129:d.audio==-1&&(d.audio=y,d.audioCodec="ac3");break;case 132:case 135:d.audio==-1&&(d.audio=y,d.audioCodec="ec3")}p+=w+5}a=d,a.video!=-1&&(this.K=a.video,this.m=a.videoCodec),a.audio!=-1&&(this.F=a.audio,this.C=a.audioCodec),a.$e!=-1&&(this.G=a.$e),o&&!this.J&&(o=!1,u=t-188),this.J=!0;break;case this.K:p=e.subarray(p,u+188),a?this.j.push([p]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(p);break;case this.F:p=e.subarray(p,u+188),a?this.i.push([p]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(p);break;case this.G:p=e.subarray(p,u+188),a?this.l.push([p]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(p);break;default:o=!0}}return this};function Rp(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var o=t[7];if(o&192){var u=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2;e.u==null&&(e.u=u),n.pts=Cv(u,e.u),e.u=n.pts,n.dts=n.pts,o&64&&(o=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,e.o==null&&(e.o=o),n.dts=n.pts!=u?Cv(o,e.o):o),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}m.Fk=function(e){return yt("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Xg(e,{fe:null,state:null})},m.Xg=function(e,t){var n=e.pts?e.pts/9e4:null;e=e.data;var o=e.byteLength,u=1;this.m=="hvc"&&(u=2);var a=t.state||0,d=a,p=0,g=[],y=-1,w=0;for(a==-1&&(y=0,w=this.m=="hvc"?e[0]>>1&63:e[0]&31,a=0,p=1);p<o;){var T=e[p++];a?a===1?a=T?0:2:T?T==1?(T=p-a-1,y>=0?g.push({data:e.subarray(y+u,T),fullData:e.subarray(y,T),type:w,time:n,state:null}):(a=g.length?g[g.length-1]:t.fe)&&(d&&p<=4-d&&a.state&&(a.data=a.data.subarray(0,a.data.byteLength-d),a.fullData=a.fullData.subarray(0,a.fullData.byteLength-d)),T>0&&(T=e.subarray(0,T),a.data=sn(a.data,T),a.fullData=sn(a.fullData,T),a.state=0)),p<o?(w=this.m=="hvc"?e[p]>>1&63:e[p]&31,y=p,a=0):a=-1):a=0:a=3:a=T?0:1}return y>=0&&a>=0&&g.push({data:e.subarray(y+u,o),fullData:e.subarray(y,o),type:w,time:n,state:a}),!g.length&&t.fe&&(n=g.length?g[g.length-1]:t.fe)&&(n.data=sn(n.data,e),n.fullData=sn(n.fullData,e)),t.state=a,g},m.getMetadata=function(){for(var e=[],t=R(this.l),n=t.next();!n.done;n=t.next())n=sn.apply(_n,le(n.value)),(n=Rp(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Yo(n.data),dts:n.dts,pts:n.pts});return e},m.xb=function(){if(this.i.length&&!this.h.length)for(var e=R(this.i),t=e.next();!t.done;t=e.next()){var n=sn.apply(_n,le(t.value)),o=Rp(this,n);t=this.h.length?this.h[this.h.length-1]:null,o&&o.pts!=null&&o.dts!=null&&(!t||t.pts!=o.pts&&t.dts!=o.dts)?this.h.push(o):this.h.length&&(n=o?o.data:n)&&(t=this.h.pop(),t.data=sn(t.data,n),this.h.push(t))}return this.h},m.ud=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=R(this.j),n=t.next();!n.done;n=t.next()){var o=sn.apply(_n,le(n.value)),u=Rp(this,o);n=this.g.length?this.g[this.g.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?this.g.push(u):this.g.length&&(o=u?u.data:o)&&(n=this.g.pop(),n.data=sn(n.data,o),this.g.push(n))}if(e){for(t={fe:null,state:null},n=[],o=R(this.g),u=o.next();!u.done;u=o.next())u=u.value,u.nalus=this.Xg(u,t),u.nalus.length&&(n.push(u),t.fe=u.nalus[u.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},m.getStartTime=function(e){if(e=="audio"){e=null;var t=this.xb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.ud(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},m.Td=function(){return{audio:this.C,video:this.m}},m.Ze=function(){for(var e=[],t=R(this.ud()),n=t.next();!n.done;n=t.next())e.push.apply(e,le(n.value.nalus));return e},m.ek=function(){yt("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Kg();return{height:e.height,width:e.width}},m.Kg=function(){return this.m=="hvc"?Ak(this):kk(this)};function Tv(e){var t=e.ud();return t.length>1&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function kk(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Ze();if(!n.length||(n=n.find(function(L){return L.type==7}),!n))return t;n=new Dr(n.data);var o=Ct(n),u=Ct(n),a=Ct(n);if(En(n),Ek.includes(o)){var d=Pe(n);if(d===3&&pi(n,1),En(n),En(n),pi(n,1),$e(n)){d=d!==3?8:12;for(var p=0;p<d;p++)$e(n)&&(p<6?Hf(n,16):Hf(n,64))}}if(En(n),d=Pe(n),d===0)Pe(n);else if(d===1)for(pi(n,1),En(n),En(n),d=Pe(n),p=0;p<d;p++)En(n);En(n),pi(n,1),d=Pe(n),p=Pe(n);var g=gt(n,1);g===0&&pi(n,1),pi(n,1);var y=0,w=0,T=0,M=0;return $e(n)&&(y=Pe(n),w=Pe(n),T=Pe(n),M=Pe(n)),t.height=String((2-g)*(p+1)*16-T*2-M*2),t.width=String((d+1)*16-y*2-w*2),t.codec="avc1."+("0"+o.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2)+("0"+a.toString(16).toUpperCase()).slice(-2),t.frameRate=Tv(e),t}function Ak(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Ze();if(!n.length||(n=n.find(function(J){return J.type==33}),!n))return t;var o=new Dr(n.fullData,!0);Ct(o),Ct(o),gt(o,4);var u=gt(o,3);$e(o);var a=gt(o,2),d=gt(o,1),p=gt(o,5),g=gt(o,32);n=Ct(o);for(var y=Ct(o),w=Ct(o),T=Ct(o),M=Ct(o),L=Ct(o),P=Ct(o),N=[],O=[],F=0;F<u;F++)N.push($e(o)),O.push($e(o));if(u>0)for(F=u;F<8;F++)gt(o,2);for(F=0;F<u;F++)N[F]&&gt(o,88),O[F]&&Ct(o);Pe(o),u=Pe(o),u==3&&gt(o,1),N=Pe(o),O=Pe(o);var B=F=0,V=0,Y=0;return $e(o)&&(F+=Pe(o),B+=Pe(o),V+=Pe(o),Y+=Pe(o)),t.width=String(N-(F+B)*(u===1||u===2?2:1)),t.height=String(O-(V+Y)*(u===1?2:1)),o=(function(J){for(var H=0,z=0;z<32;z++)H|=(J>>z&1)<<31-z;return H>>>0})(g),d=d==1?"H":"L",a="hvc1"+("."+["","A","B","C"][a]+p),a+="."+o.toString(16).toUpperCase(),a+="."+d+P,L&&(a+="."+L.toString(16).toUpperCase()),M&&(a+="."+M.toString(16).toUpperCase()),T&&(a+="."+T.toString(16).toUpperCase()),w&&(a+="."+w.toString(16).toUpperCase()),y&&(a+="."+y.toString(16).toUpperCase()),n&&(a+="."+n.toString(16).toUpperCase()),t.codec=a,t.frameRate=Tv(e),t}function Cv(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=n*8589934592;return e}function Xs(e){return!(_p(e)<0)}function _p(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}be("shaka.util.TsParser",Nt),Nt.syncOffset=_p,Nt.probe=Xs,Nt.prototype.getVideoInfo=Nt.prototype.Kg,Nt.prototype.getVideoResolution=Nt.prototype.ek,Nt.prototype.getVideoNalus=Nt.prototype.Ze,Nt.prototype.getCodecs=Nt.prototype.Td,Nt.prototype.getStartTime=Nt.prototype.getStartTime,Nt.prototype.getVideoData=Nt.prototype.ud,Nt.prototype.getAudioData=Nt.prototype.xb,Nt.prototype.getMetadata=Nt.prototype.getMetadata,Nt.prototype.parseNalus=Nt.prototype.Xg,Nt.prototype.parseAvcNalus=Nt.prototype.Fk,Nt.prototype.parse=Nt.prototype.parse,Nt.prototype.setDiscontinuitySequence=Nt.prototype.Gf,Nt.prototype.clearData=Nt.prototype.clearData,Nt.Timescale=9e4;var Ek=[100,110,122,244,44,83,86,118,128,138,139,134];function bv(e,t,n,o,u){var a=this;this.g=e,this.O=n,this.B=o,this.ba=t,this.l=new Map,this.F=new Map,this.Sa=new Map,this.h=null,this.Ga=!1,this.H=u||null,this.o=new Map,this.u=new Le,this.j=new Map,this.K=null,this.M=new _t,this.Da="",this.ob=!1,this.ya=!0,this.N=!1,this.C=this.R=null,this.i=Lp(this,this.M),this.ab=this.G=!1,this.J=new Ns(function(){return Rk(a)}),this.I=!1,this.X="UNKNOWN",this.ib=this.kb=!1,this.Ta=new _t,this.m=!1,this.xa=null,this.$=new Map,this.oa=this.S=this.wa=this.V=null,this.ma=new _t,this.g.remote&&(this.N=this.g.remote.state!="disconnected",this.u.D(this.g.remote,"connect",function(){a.N=a.g.remote.state!="disconnected"}),this.u.D(this.g.remote,"connecting",function(){a.N=a.g.remote.state!="disconnected"}),this.u.D(this.g.remote,"disconnect",function(){a.N=a.g.remote.state!="disconnected"}))}function Lp(e,t){if(e.ya=!0,f.ManagedMediaSource){e.C||(e.g.disableRemotePlayback=!0);var n=new ManagedMediaSource;e.u.D(n,"startstreaming",function(){e.ya=!0}),e.u.D(n,"endstreaming",function(){e.ya=!1})}else n=new MediaSource;return e.u.Aa(n,"sourceopen",function(){URL.revokeObjectURL(e.Da),t.resolve()}),e.u.Aa(e.g,"playing",function(){e.ob=!0}),e.Da=Np(n),e.B.useSourceElements?(e.g.removeAttribute("src"),e.R&&e.g.removeChild(e.R),e.C&&e.g.removeChild(e.C),e.R=vv(e.Da),e.g.appendChild(e.R),e.C&&e.g.appendChild(e.C),e.g.load()):e.g.src=e.Da,n}function Ik(e,t,n){e.g&&f.ManagedMediaSource&&e.i&&e.B.useSourceElements&&(e.C&&e.g.removeChild(e.C),e.C=vv(t,n),e.g.appendChild(e.C),e.g.disableRemotePlayback=!1)}function Mk(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(le(to)),t={};Me(),e=R(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,dl(n))t[n]=!0;else if(mr()){var o=ci(n),u=yl(ti(n),o);o=en(o,u),t[n]=jn(o)||!!Rs(o)}else t[n]=Ko().canPlayType(n)!="";o=n.split(";")[0],t[o]=t[o]||t[n]}return t}m=bv.prototype,m.destroy=function(){return this.J.destroy()};function Rk(e){var t,n,o,u,a,d,p,g,y,w,T,M,L,P,N;return $(function(O){if(O.g==1){for(t=[],n=R(e.o),o=n.next();!o.done;o=n.next())for(u=o.value,a=R(u),d=a.next().value,p=a.next().value,g=p[0],y=d,e.o.set(y,p.slice(0,1)),g&&t.push(g.p.catch(g4)),w=R(p.slice(1)),T=w.next();!T.done;T=w.next())M=T.value,M.p.reject(new q(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),D(O,Promise.all(t),2)}for(L=R(e.j.values()),P=L.next();!P.done;P=L.next())N=P.value,N.destroy();e.u&&(e.u.release(),e.u=null),e.g&&e.C&&e.g.removeChild(e.C),e.g&&e.R&&(e.g.removeChild(e.R),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.R=null,e.C=null,e.B=null,e.i=null,e.h=null,e.ba=null,e.l.clear(),e.Sa.clear(),e.j.clear(),e.K=null,e.o.clear(),e.H=null,e.$.clear(),e.O=null,te(O)})}m.init=function(e,t,n,o){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,o=o===void 0?!1:o;var u=this,a,d,p,g,y,w;return $(function(T){if(T.g==1)return a=cn,D(T,u.M,2);if(T.g!=3)return!qo(u)&&!Jo(u)?T.A(3):(Rn("Expected MediaSource to be open during init(); reopening the media source."),u.M=new _t,u.i=Lp(u,u.M),D(T,u.M,3));for(u.I=t,u.X=n,u.kb=o,u.ib=!u.I&&u.X=="HLS"&&!u.kb,u.$.clear(),u.V=null,u.wa=null,u.S=null,u.oa=null,u.ma=new _t,d=R(e.keys()),p=d.next();!p.done;p=d.next())g=p.value,y=e.get(g),Gf(u,g,y,y.codecs),u.m?(u.o.set(a.ia,[]),u.o.set(a.Ca,[])):u.o.set(g,[]);(w=e.get(a.ia))&&w.isAudioMuxedInVideo&&(u.m=!0),te(T)})};function Gf(e,t,n,o){t=="audio"&&o&&(o=yl(o,n.mimeType));var u=en(n.mimeType,o);if(t==lt)Xf(e,u,e.I,n.external);else{var a=e.B.forceTransmux;(!jn(u)||!e.I&&to.includes(u))&&(a=!0);var d=vf(n.mimeType,o);if(a){if(a=ei("audio",(o||"").split(",")),o=ei("video",(o||"").split(",")),a&&o){e.m=!0,Gf(e,"audio",n,a),Gf(e,"video",n,o);return}(o=Rs(d))&&(u=o(),e.j.set(t,u),u=u.convertCodecs(t,d))}d=u+e.B.addExtraFeaturesToSourceBuffer(u),Ot(e.J);try{var p=e.i.addSourceBuffer(d)}catch(g){throw new q(2,3,3015,g,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.I&&(p.mode=Vk),e.u.D(p,"error",function(){var g=e.o.get(t)[0];g.p.reject(new q(2,3,3014,e.g.error?e.g.error.code:0,g.uri))}),e.u.D(p,"updateend",function(){return so(e,t)}),e.l.set(t,p),e.F.set(t,u),e.Sa.set(t,!!n.drmInfos.length)}}m.configure=function(e){this.B=e,this.h&&(this.h.B=e.modifyCueCallback)};function kv(e){return e.ya&&!e.N&&!e.G}function Xf(e,t,n,o){e.h||(e.h=new Ir(e.ba),e.h&&(e.h.B=e.B.modifyCueCallback));var u=e.h;o=o||e.Ga,e=e.X,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=hl.get(t)(),u.i.setSequenceMode?u.i.setSequenceMode(n):yt("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):yt("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.C=o)}function qo(e){return e.G?!1:e.i?e.i.readyState=="ended":!0}function Jo(e){return e.G?!1:e.i?e.i.readyState=="closed":!0}function Pp(e,t){return e.l.size?t==lt?e.h.g:mv(Ws(e,t)):null}function Qo(e,t){return e.l.size?t==lt?e.h.h:zf(Ws(e,t)):null}function _k(e,t,n){return t==lt?(e=e.h,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Ws(e,t),yv(e,n))}m.Fc=function(){var e={total:this.G?[]:Pr(this.g.buffered),audio:Pr(Ws(this,"audio")),video:Pr(Ws(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Ws(e,t){if(e.G||e.N)return null;try{return e.l.get(t).buffered}catch{return e.l.has(t),null}}function Lk(e,t,n,o,u,a){var d=null,p=[],g=et(n);if(to.includes(a))t=Yo(g),t.length&&o&&((n=t.find(function(L){return L.description==="com.apple.streaming.transportStreamTimestamp"}))&&typeof n.data=="number"&&(d=Math.round(n.data)/1e3),e.O.onMetadata([{cueTime:o.startTime,data:g,frames:t,dts:o.startTime,pts:o.startTime}],0,o.endTime));else if(a.includes("/mp4")&&o&&o.aa&&o.aa.timescale){var y=o.aa.timescale;if(!isNaN(y)){var w=u.emsgSchemeIdUris!=null&&u.emsgSchemeIdUris.length>0||e.B.dispatchAllEmsgBoxes,T=0,M=!1;g=new Lt,w&&g.T("emsg",function(L){var P=u.emsgSchemeIdUris;if(L.version===0)var N=L.reader.Yc(),O=L.reader.Yc(),F=L.reader.U(),B=L.reader.U(),V=L.reader.U(),Y=L.reader.U(),J=o.startTime+B/F;else F=L.reader.U(),J=L.reader.Dd()/F+o.timestampOffset,B=J-o.startTime,V=L.reader.U(),Y=L.reader.U(),N=L.reader.Yc(),O=L.reader.Yc();L=L.reader.Tb(L.reader.getLength()-L.reader.Pa()),(P&&P.includes(N)||e.B.dispatchAllEmsgBoxes)&&(N=="urn:mpeg:dash:event:2012"?e.O.Ek():(P=new Uint8Array(L.byteLength),P.set(L),L=J+V/F,e.O.Ck({startTime:J,endTime:L,schemeIdUri:N,value:O,timescale:F,presentationTimeDelta:B,eventDuration:V,id:Y,messageData:P}),(N=="https://aomedia.org/emsg/ID3"||N=="https://developer.apple.com/streaming/emsg-id3")&&(F=Yo(P),F.length&&e.O.onMetadata([{cueTime:J,data:P,frames:F,dts:J,pts:J}],0,L))))}),g.T("prft",function(L){var P=L.reader,N=L.version;P.U(),L=P.U();var O=P.U();L=L*1e3+O/4294967296*1e3,N===0?P=P.U():(N=P.U(),P=P.U(),P=N*4294967296+P),L=Sv(L),P=new Map().set("detail",{wallClockTime:L,programStartDate:new Date(L-P/y*1e3)}),P=new Ie("prft",P),e.O.onEvent(P)}).box("moof",ot).box("traf",ot).T("tfdt",function(L){M||(T=Bf(L.reader,L.version).baseMediaDecodeTime/y,M=!0,w||L.parser.stop())}).parse(n,!0),M&&o.timestampOffset==0&&(d=T)}}else a.includes("/mp4")||a.includes("/webm")||!Xs(g)||(e.$.has(t)||e.$.set(t,new Nt),p=e.$.get(t),p.clearData(),p.Gf(o.i),p.parse(g),g=p.getStartTime(t),g!=null&&(d=g),p=p.getMetadata());return{timestamp:d,metadata:p}}function Wf(e,t,n,o,u,a,d,p,g,y,w){d=d===void 0?!1:d,p=p===void 0?!1:p,g=g===void 0?!1:g,y=y===void 0?!1:y;var T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye;return $(function(ae){switch(ae.g){case 1:if(T=cn,t!=T.Na){ae.A(2);break}if(e.X!="HLS"){ae.A(3);break}return D(ae,e.Ta,4);case 4:M=ae.h,e.h.u=M;case 3:return D(ae,c4(e.h,n,o?o.startTime:null,o?o.endTime:null,o?o.P()[0]:null),5);case 5:return ae.return();case 2:if(y||!e.m){ae.A(6);break}return D(ae,Wf(e,T.ia,n,o,u,a,d,p,g,!0),7);case 7:return D(ae,Wf(e,T.Ca,n,o,u,a,d,p,g,!0),8);case 8:return ae.return();case 6:if(!e.l.has(t))return ae.return();if(L=e.l.get(t).timestampOffset,P=e.F.get(t),e.j.has(t)&&(P=e.j.get(t).getOriginalMimeType()),o&&(N=Lk(e,t,n,o,u,P),O=N.timestamp,F=N.metadata,O!=null&&(e.V==null&&t==T.Ca&&(e.V=O,e.wa=o.startTime,e.S!=null&&(B=0,e.wa==e.oa&&(B=e.V-e.S),e.ma.resolve(B))),e.S==null&&t==T.ia&&(e.S=O,e.oa=o.startTime,e.V!=null&&(V=0,e.wa==e.oa&&(V=e.V-e.S),e.ma.resolve(V))),Y=O,J=to,!e.I&&J.includes(e.F.get(t))&&(Y=0),H=o.startTime-Y,z=Math.abs(L-H),(z>=.001||d||p)&&(!g||H>0||!L)&&(L=H,e.ib&&(hn(e,t,function(){return Ks(e,t)},null),hn(e,t,function(){return Ys(e,t,L)},null))),(t==T.Ca||!e.l.has(T.Ca))&&e.Ta.resolve(L)),F.length)&&e.O.onMetadata(F,L,o?o.endTime:null),a&&t==T.Ca&&(e.h||Xf(e,"application/cea-608",e.I,!1),e.K||(Q=P.split(";",1)[0],e.K=new nr(Q)),o?(ee=e.K.xf(n),ee.length&&h4(e.h,ee,o.startTime,o.endTime,L)):e.K.init(n,p,w)),!e.j.has(t)){ae.A(9);break}return D(ae,e.j.get(t).transmux(n,u,o,e.i.duration,t),10);case 10:se=ae.h,ArrayBuffer.isView(se)?n=se:(fe=se,fe.init!=null&&(ne=fe.init,hn(e,t,function(){e.H&&uf(e.H,ne,L,u),e.l.get(t).appendBuffer(ne)},o?o.P()[0]:null)),n=fe.data);case 9:if(n=Bk(e,u,n,o,t),!o||!e.I||t==T.Na){ae.A(11);break}if(!d&&!p){ae.A(11);break}if(xe=o.startTime,e.X!="HLS"||e.m||t!=T.ia||!e.l.has(T.Ca)){ae.A(13);break}return D(ae,e.ma,14);case 14:ye=ae.h,Math.abs(ye)>.15&&(xe-=ye);case 13:hn(e,t,function(){return Ks(e,t)},null),hn(e,t,function(){return Ys(e,t,xe)},null);case 11:return D(ae,hn(e,t,function(){var he=n;e.H&&uf(e.H,he,L,u),e.l.get(t).appendBuffer(he)},o?o.P()[0]:null),15);case 15:te(ae)}})}function Pk(e,t){var n=Qo(e,"video")||0;c1(e.h,t,n)}function Dk(e){e.h&&c1(e.h,"",0)}m.remove=function(e,t,n,o){var u=this,a;return $(function(d){return d.g==1?(a=cn,e==a.Ca&&u.K&&u.K.remove(o),e==a.Na?D(d,u.h.remove(t,n),0):n>t?D(d,hn(u,e,function(){return Kf(u,e,t,n)},null),5):d.A(0)):u.m?D(d,hn(u,a.ia,function(){return Kf(u,a.ia,t,n)},null),0):d.A(0)})};function Av(e,t){var n;return $(function(o){return o.g==1?(n=cn,t==n.Na?e.h?D(o,e.h.remove(0,1/0),0):o.return():D(o,hn(e,t,function(){return Kf(e,t,0,e.i.duration)},null),4)):e.m?D(o,hn(e,n.ia,function(){return Kf(e,n.ia,0,e.i.duration)},null),0):o.A(0)})}m.flush=function(e){var t=this,n;return $(function(o){return o.g==1?(n=cn,e==n.Na?o.return():D(o,hn(t,e,function(){t.g.currentTime-=.001,so(t,e)},null),2)):t.m?D(o,hn(t,n.ia,function(){var u=n.ia;t.g.currentTime-=.001,so(t,u)},null),0):o.A(0)})};function Ev(e,t,n,o,u,a,d,p,g){var y,w,T;return $(function(M){return M.g==1?(y=cn,t==y.Na?(a||(e.h.u=n),d4(e.h,o,u),M.return()):(w=[],D(M,$k(e,t,d,p,g),2))):(T=M.h,T||(w.push(hn(e,t,function(){return Ks(e,t)},null)),e.m&&w.push(hn(e,y.ia,function(){return Ks(e,y.ia)},null))),a||(w.push(hn(e,t,function(){return Ys(e,t,n)},null)),e.m&&w.push(hn(e,y.ia,function(){return Ys(e,y.ia,n)},null))),(o!=0||u!=1/0)&&(w.push(hn(e,t,function(){return Iv(e,t,o,u)},null)),e.m&&w.push(hn(e,y.ia,function(){return Iv(e,y.ia,o,u)},null))),w.length?D(M,Promise.all(w),0):M.A(0))})}function Ok(e,t,n){var o,u;return $(function(a){return a.g==1?(o=cn,t==o.Na||(t==o.Ca&&(e.Ta=new _t),!e.I||(u=Qo(e,t))&&Math.abs(u-n)<.15)?a.return():(hn(e,t,function(){return Ks(e,t)},null),e.m&&hn(e,o.ia,function(){return Ks(e,o.ia)},null),D(a,hn(e,t,function(){return Ys(e,t,n)},null),2))):e.m?D(a,hn(e,o.ia,function(){return Ys(e,o.ia,n)},null),0):a.A(0)})}m.endOfStream=function(e){var t=this;return $(function(n){return D(n,Ml(t,function(){qo(t)||Jo(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},m.rb=function(e){var t=this;return $(function(n){return D(n,Ml(t,function(){if(t.B.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var o=R(t.l.keys()),u=o.next();!u.done;u=o.next()){u=u.value;var a={start:function(){},p:new _t,uri:null};t.o.get(u).unshift(a)}t.i.duration=e,t.xa=e}),0)})},m.getDuration=function(){return this.i.duration};function Nk(e,t,n){$(function(o){return e.J.g||e.g.error||e.N||e.G||qo(e)||Jo(e)?o.return():D(o,Ml(e,function(){qo(e)||Jo(e)||e.i.setLiveSeekableRange(t,n)}),0)})}function Dp(e){$(function(t){return e.J.g||e.g.error||e.N||e.G||qo(e)||Jo(e)?t.return():D(t,Ml(e,function(){qo(e)||Jo(e)||e.i.clearLiveSeekableRange()}),0)})}function Kf(e,t,n,o){o<=n?so(e,t):e.l.get(t).remove(n,o)}function Ks(e,t){var n=e.l.get(t),o=n.appendWindowStart,u=n.appendWindowEnd;n.abort(),n.appendWindowStart=o,n.appendWindowEnd=u,so(e,t)}function Ys(e,t,n){n<0&&(n+=.001),e.l.get(t).timestampOffset=n,so(e,t)}function Iv(e,t,n,o){var u=e.l.get(t);(u.appendWindowEnd!==o||u.appendWindowStart!==n)&&(u.appendWindowStart=0,u.appendWindowEnd=o,u.appendWindowStart=n),so(e,t)}function so(e,t){if(e.G||e.J.g){var n=e.o.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.o.set(t,[]))}else(n=e.o.get(t)[0])&&(n.p.resolve(),Op(e,t))}function hn(e,t,n,o){return Ot(e.J),n={start:n,p:new _t,uri:o},e.o.get(t).push(n),e.o.get(t).length==1&&Mv(e,t),n.p}function Ml(e,t){var n,o,u,a,d,p,g,y,w,T,M,L,P;return $(function(N){switch(N.g){case 1:for(Ot(e.J),n=[],o=Array.from(e.l.keys()),u=R(o),a=u.next(),d={};!a.done;d={ready:void 0},a=u.next())p=a.value,d.ready=new _t,g={start:(function(O){return function(){return O.ready.resolve()}})(d),p:d.ready,uri:null},y=e.o.get(p),y.push(g),n.push(d.ready),y.length==1&&g.start();return ce(N,2),D(N,Promise.all(n),4);case 4:X(N,3);break;case 2:throw w=ie(N),w;case 3:return ce(N,5,6),D(N,t(),6);case 6:for(W(N),T=R(o),M=T.next();!M.done;M=T.next())L=M.value,Op(e,L);G(N,0);break;case 5:throw P=ie(N),new q(2,3,3015,P,e.g.error||"No error in the media element",null)}})}function Op(e,t){e.o.get(t).shift(),Mv(e,t)}function Mv(e,t){var n=e.o.get(t)[0];if(n)try{n.start()}catch(o){o.name=="QuotaExceededError"?n.p.reject(new q(2,3,3017,t)):kv(e)?n.p.reject(new q(2,3,3015,o,e.g.error||"No error in the media element",n.uri)):n.p.reject(new q(2,3,3024,t)),Op(e,t)}}function Uk(e,t){e.ba=t,e.h&&(e.h.j=t)}function Bk(e,t,n,o,u){if(al(e.F.get(u))!="mp4")return n;var a=o===null,d=e.Sa.get(u),p=e.O.Kj(),g=!1;o&&o.aa&&(g=o.aa.encrypted),o=o?o.P()[0]:null;var y=Me();return e.B.correctEc3Enca&&a&&u==="audio"&&(n=gk(n)),e.B.insertFakeEncryptionInInit&&d&&y.Ed(p,u)&&(a?n=mk(t,n,o):!g&&y.Hi(u)&&(n=yk(n))),a&&y.le()&&(n=wk(n)),n}function Fk(e,t,n,o){return hn(e,t,function(){if(t!==lt){if(e.F.get(t),bs()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),o&&e.j.set(t,o);var u=n+e.B.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(u),e.F.set(t,n)}so(e,t)}},null)}function jk(e,t){var n,o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J;return $(function(H){if(H.g==1){if(e.G||e.N)return H.return();for(n=cn,e.G=!0,e.m=!1,o=e.g.currentTime,u=e.g.autoplay,e.g.paused||(e.ab=!0),e.ob&&(e.g.autoplay=!1),ve(H,2),e.u.Qa(),a=R(e.j.values()),d=a.next();!d.done;d=a.next())p=d.value,p.destroy();for(g=R(e.l.values()),y=g.next();!y.done;y=g.next()){w=y.value;try{e.i.removeSourceBuffer(w)}catch{}}return e.j.clear(),e.l.clear(),T=e.i.duration,e.M=new _t,e.i=Lp(e,e.M),D(H,e.M,4)}if(H.g!=2){for(!isNaN(T)&&T?e.i.duration=T:!isNaN(e.xa)&&e.xa&&(e.i.duration=e.xa),M=new _t,L=e.i.sourceBuffers,P=t.size,N=0,O=function(){N++,N===P&&(M.resolve(),e.u.Ma(L,"addsourcebuffer",O))},e.u.D(L,"addsourcebuffer",O),F=R(t.keys()),B=F.next();!B.done;B=F.next())V=B.value,Y=t.get(V),Gf(e,V,Y,Y.codecs);return(J=t.get(n.ia))&&J.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.o.has(n.ia)&&e.o.set(n.ia,[]),e.g.currentTime=o,D(H,M,2)}return W(H),e.G=!1,Ot(e.J),e.u.Aa(e.g,"canplaythrough",function(){e.J.g||(e.g.autoplay=u,e.ab&&(e.ab=!1,e.g.play()))}),G(H,0)})}function Rv(e,t){return Ml(e,function(){return jk(e,t)})}function _v(e,t,n,o){var u=!1,a=ei("audio",(o||"").split(",")),d=ei("video",(o||"").split(",")),p=d;t=="audio"&&(p=a),p||(p=o),o=en(n,p);var g=ci(e.F.get(t)),y=e.B.forceTransmux;if(!jn(o)||!e.I&&to.includes(o)?y=!0:y||n==g||(y=!Me().Jf()&&to.includes(n)),y&&(e=vf(n,p),n=Rs(e))){var w=n();a&&d&&(u=!0),o=w.convertCodecs(t,e)}return t=Ln(ti(o)),{dc:w,hl:u,Oh:ci(o),codec:t,mimeType:o}}function Lv(e,t,n,o,u){if(t==lt)return{type:Up,qf:n,dc:null};var a=Ln(ti(e.F.get(t))),d=ci(e.F.get(t)),p=_v(e,t,n,o),g=p.dc,y=p.hl,w=p.Oh,T=p.codec;p=p.mimeType;var M=!0;return y&&e.F.has("audio")&&(n=_v(e,"audio",n,o),o=Ln(ti(e.F.get("audio"))),M=ci(e.F.get("audio")),M=o==n.codec&&M==n.Oh,n.dc&&n.dc.destroy()),a===T&&d===w&&M?{type:Up,qf:p,dc:g}:(a=!0,(e.m&&!u.has("audio")||y&&g&&!e.j.has(t))&&(a=!1),a&&e.B.codecSwitchingStrategy==="smooth"&&bs()?{type:Pv,qf:p,dc:g}:(g&&g.destroy(),{type:Bp,qf:p,dc:null}))}function $k(e,t,n,o,u){var a,d,p,g,y,w;return $(function(T){return T.g==1?(a=cn,d=Lv(e,t,n,o,u),p=d.type,g=d.dc,y=d.qf,(w=u.get(a.ia))&&(e.m=w.isAudioMuxedInVideo),p==Up?(e.j.has(t)&&!g?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&g?e.j.set(t,g):g&&(e.j.has(t)&&e.j.get(t).transmux!==g.transmux?(e.j.get(t).destroy(),e.j.set(t,g)):g.destroy()),T.return(!1)):p==Pv?D(T,Fk(e,t,y,g),3):p!=Bp?T.A(3):(g&&g.destroy(),D(T,Rv(e,u),3))):T.return(!0)})}function zk(e,t,n,o,u){return e=Lv(e,t,n,o,u),e.dc&&e.dc.destroy(),e.type==Bp}var Np=f.URL.createObjectURL,Vk="sequence",Up="none",Bp="reset",Pv="changeType";function Ye(e,t,n){this.i=e,this.F=t,this.u=this.l=1/0,this.h=1,this.g=this.j=null,this.B=0,this.C=!0,this.J=!1,this.I=0,this.G=n===void 0?!0:n,this.H=0,this.o=!1,this.m=e}m=Ye.prototype,m.getDuration=function(){return this.l},m.Nj=function(){return this.h},m.Qi=function(e){this.i=e},m.rb=function(e){this.l=e},m.Tj=function(){return this.i},m.Pi=function(e){this.B=e},m.cd=function(e){e&&!this.C&&(this.J=!0),this.C=e},m.Hf=function(e){this.u=e},m.Ye=function(){return this.u},m.oh=function(e){this.F=e},m.Ej=function(){return this.F},m.Ai=function(e,t){if(e.length!=0){var n=(Date.now()+this.B)/1e3;if(e=e.filter(function(u){return u.start+t<n}),e.length!=0){var o=e[e.length-1].end+t;this.rf(e[0].start+t),this.h=e.reduce(function(u,a){return Math.max(u,a.end-a.start)},this.h),this.g=Math.max(this.g,o),this.i!=null&&this.G&&!this.o&&(this.i=n-this.g-this.h)}}},m.ge=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,o=(Date.now()+this.B)/1e3;e=R(e);for(var u=e.next();!u.done;u=e.next())u=u.value,o<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.h=Math.max(this.h,u.endTime-u.startTime));this.rf(t),this.g=Math.max(this.g,n),this.i!=null&&this.G&&!this.o&&(this.i=o-this.g-this.h)}},m.zi=function(e,t){this.rf(e),t==1/0||this.W()||(this.g=Math.max(this.g,t))},m.Oj=function(){return this.g},m.kf=function(){this.o=!0},m.qk=function(){return this.o},m.ph=function(e){this.m=e},m.Jj=function(){return this.m},m.rf=function(e){this.j==null?this.j=e:this.J||(this.j=Math.min(this.j,e))},m.Tg=function(e){this.h=Math.max(this.h,e)},m.offset=function(e){this.j!=null&&(this.j+=e),this.g!=null&&(this.g+=e)},m.W=function(){return this.l==1/0&&!this.C},m.Vc=function(){return this.l!=1/0&&!this.C},m.Ib=function(){return Math.max(this.I,this.Ic()-this.u)},m.Si=function(e){this.I=e},m.Ic=function(){return this.W()||this.Vc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.h-this.i)+this.H,this.l):this.g?Math.min(this.g,this.l):this.l},m.Vd=function(e){var t=Math.max(this.j,this.I);return this.u==1/0?Math.ceil(t*1e3)/1e3:Math.max(t,Math.min(this.Ic()-this.u+e,this.Hb()))},m.Xb=function(){return this.Vd(0)},m.Hb=function(){return Math.max(0,this.Ic()-(this.W()||this.Vc()?this.F:0))},m.ej=function(){return!(this.i==null||this.g!=null&&this.G)},m.Oi=function(e){this.H=e},m.zj=function(){return this.H},be("shaka.media.PresentationTimeline",Ye),Ye.prototype.getAvailabilityTimeOffset=Ye.prototype.zj,Ye.prototype.setAvailabilityTimeOffset=Ye.prototype.Oi,Ye.prototype.usingPresentationStartTime=Ye.prototype.ej,Ye.prototype.getSeekRangeEnd=Ye.prototype.Hb,Ye.prototype.getSeekRangeStart=Ye.prototype.Xb,Ye.prototype.getSafeSeekRangeStart=Ye.prototype.Vd,Ye.prototype.getSegmentAvailabilityEnd=Ye.prototype.Ic,Ye.prototype.setUserSeekStart=Ye.prototype.Si,Ye.prototype.getSegmentAvailabilityStart=Ye.prototype.Ib,Ye.prototype.isInProgress=Ye.prototype.Vc,Ye.prototype.isLive=Ye.prototype.W,Ye.prototype.offset=Ye.prototype.offset,Ye.prototype.notifyMaxSegmentDuration=Ye.prototype.Tg,Ye.prototype.notifyMinSegmentStartTime=Ye.prototype.rf,Ye.prototype.getInitialProgramDateTime=Ye.prototype.Jj,Ye.prototype.setInitialProgramDateTime=Ye.prototype.ph,Ye.prototype.isStartTimeLocked=Ye.prototype.qk,Ye.prototype.lockStartTime=Ye.prototype.kf,Ye.prototype.getMaxSegmentEndTime=Ye.prototype.Oj,Ye.prototype.notifyPeriodDuration=Ye.prototype.zi,Ye.prototype.notifySegments=Ye.prototype.ge,Ye.prototype.notifyTimeRange=Ye.prototype.Ai,Ye.prototype.getDelay=Ye.prototype.Ej,Ye.prototype.setDelay=Ye.prototype.oh,Ye.prototype.getSegmentAvailabilityDuration=Ye.prototype.Ye,Ye.prototype.setSegmentAvailabilityDuration=Ye.prototype.Hf,Ye.prototype.setStatic=Ye.prototype.cd,Ye.prototype.setClockOffset=Ye.prototype.Pi,Ye.prototype.getPresentationStartTime=Ye.prototype.Tj,Ye.prototype.setDuration=Ye.prototype.rb,Ye.prototype.setPresentationStartTime=Ye.prototype.Qi,Ye.prototype.getMaxSegmentDuration=Ye.prototype.Nj,Ye.prototype.getDuration=Ye.prototype.getDuration;function Fp(e,t,n,o){var u=this;this.u=o,this.g=e,this.F=t,this.h=n,this.j=new Le,this.m=!1,this.l=0,this.C=!1,this.H=this.G=0,this.o=Gk(this),this.B=!1,this.j.D(e,"waiting",function(){return Rl(u)}),this.i=new dt(function(){Rl(u)}).Fa(this.h.gapJumpTimerTime)}Fp.prototype.release=function(){this.j&&(this.j.release(),this.j=null),this.i!=null&&(this.i.stop(),this.i=null),this.o&&(this.o.release(),this.o=null),this.g=this.F=this.u=null},Fp.prototype.vf=function(){this.B=!0,this.i&&this.i.Fa(this.h.gapJumpTimerTime),Rl(this)};function Rl(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||e.g.currentTime==e.l&&(e.g.autoplay||e.g.currentTime!=e.l)){var t;if(!(t=!e.o)){t=e.o;var n=t.h,o=Nv(n),u=n.g.currentTime,a=Date.now()/1e3;(t.g!=u||t.m!=o)&&(t.l=a,t.g=u,t.m=o,t.i=!1),u=a-t.l,(o=u>=t.o&&o&&!t.i)&&(t.j&&t.j(t.g,u),t.i=!0,t.g=n.g.currentTime),t=!o}t&&(t=e.g.currentTime,n=e.g.buffered,o=Sk(n,t,e.h.gapDetectionThreshold),o==null||o==0&&!e.B||(u=n.start(o),(a=e.h.gapPadding)&&(u=Math.ceil((u+a)*100)/100),u>=e.F.Hb()||u-t<.001||(o!=0&&n.end(o-1),Hk(e,u),t==e.l&&(e.l=u),e.G++,e.u(new Ie("gapjumped")))))}}}function Hk(e,t){e.C=!0,e.j.Aa(e.g,"seeked",function(){e.C=!1}),e.g.currentTime=t}function Gk(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new Dv(new Ov(e.g),t,function(){var o;return $(function(u){if(u.g==1)return o=Pr(e.g.buffered),o.length?n?(e.g.currentTime+=n,u.A(2)):D(u,e.g.play(),3):u.return();if(u.g!=2){if(!e.g)return u.return();e.g.pause(),e.g.play()}e.H++,e.u(new Ie("stalldetected")),te(u)})})}function Dv(e,t,n){this.h=e,this.m=Nv(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.o=t,this.j=n}Dv.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null};function Ov(e){var t=this;this.g=e,this.h=new Le,this.i=!1,this.h.D(this.g,"audiofocuspaused",function(){t.i=!0}),this.h.D(this.g,"audiofocusgranted",function(){t.i=!1}),this.h.D(this.g,"audiofocuslost",function(){t.i=!0})}function Nv(e){if(e.g.paused||e.g.playbackRate==0||e.i||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=R(Pr(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}Ov.prototype.release=function(){this.h&&this.h.release(),this.h=null};function qs(e,t,n,o){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?o():(t=Xk.value().get(t),n.Aa(e,t,o))}var Xk=new re(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Uv(e,t,n,o){var u=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return u.l==null&&(u.l=o()),u.l},this.o=!1,this.h=new Le,this.i=new $v(e),qs(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Fv(u,u.j())})}Uv.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function jp(e){return e.o?e.g.currentTime:e.j()}function Bv(e,t){e.g.readyState>0?zv(e.i,t):qs(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){Fv(e,e.j())})}function Fv(e,t){Math.abs(e.g.currentTime-t)<.001?jv(e):(e.h.Aa(e.g,"seeking",function(){jv(e)}),zv(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function jv(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function $v(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new dt(function(){t.i<=0||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}$v.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function zv(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Fa(.1)}function Vv(e){this.g=e,this.i=!1,this.h=null,this.j=new Le}m=Vv.prototype,m.ready=function(){function e(){if(t.h==null||t.h==0&&t.g.duration!=1/0)t.i=!0;else{var n=t.g.currentTime,o=null;if(typeof t.h=="number")o=t.h;else if(t.h instanceof Date){var u=Hv(t);u!==null&&(o=t.h.getTime()/1e3-u,o=Gv(t,o))}o==null?t.i=!0:(o<0&&(o=Math.max(0,n+o)),n!=o?(t.j.Aa(t.g,"seeking",function(){t.i=!0}),t.g.currentTime=o):t.i=!0)}}var t=this;qs(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){e()})},m.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},m.Wf=function(e){this.h=this.i?this.h:e},m.He=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=e.getTime()/1e3-(Hv(this)||0),e=Gv(this,e)),e||0},m.Jh=function(){return 0},m.Hh=function(){return 0},m.Ih=function(){return!1},m.xi=function(){},m.ki=function(){var e=zf(this.g.buffered);return e!=null&&e>=this.g.duration-1};function Hv(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function Gv(e,t){return e=e.g.seekable,e.length>0&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function Xv(e,t,n,o,u,a){var d=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.u=u,this.o=null,this.i=new Fp(e,t.presentationTimeline,n,a),this.j=new Uv(e,function(){e:{var p=d.i;p.m=!0,p.B=!1,p.i&&p.i.Fa(p.h.gapJumpTimerTime),Rl(p);var g=jp(d.j);if(p=Yv(d,g),!Gy()&&Math.abs(p-g)>.001){g=!1;var y=Me().Mi();if(y){var w=Date.now()/1e3;(!d.o||d.o<w-y)&&(d.o=w,g=!0)}else g=!0;if(g){Bv(d.j,p),p=void 0;break e}}d.u(),p=void 0}return p},function(p){var g=d.i;g.g.seeking&&!g.m&&(g.m=!0,g.l=p),g.i&&g.i.Fa(g.h.gapJumpTimerTime),Rl(g)},function(){return Wv(d,o)}),this.m=new dt(function(){if(d.h.readyState!=0&&!d.h.paused){var p=jp(d.j),g=d.g.Xb(),y=d.g.Hb();y-g<3&&(g=y-3),p<g&&(p=Yv(d,p),d.h.currentTime=p)}})}m=Xv.prototype,m.ready=function(){this.m.Fa(.25)},m.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.m&&(this.m.stop(),this.m=null),this.h=this.j=this.g=this.l=null,this.u=function(){}},m.Wf=function(e){Bv(this.j,Wv(this,e))},m.He=function(){var e=jp(this.j);return this.h.readyState>0&&!this.h.paused?qv(this,e):e},m.Jh=function(){return this.i.H},m.Hh=function(){return this.i.G},m.Ih=function(){return this.i.C};function Wv(e,t){return t==null?t=e.g.getDuration()<1/0?e.g.Xb():e.g.Hb():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):t<0&&(t=e.g.Hb()+t),Kv(e,qv(e,t))}m.xi=function(){this.i.vf()},m.ki=function(){if(this.g.W()){var e=this.g.Ic(),t=zf(this.h.buffered);if(t!=null&&t>=e)return!0}return!1};function Kv(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Yv(e,t){var n=e.l.rebufferingGoal,o=e.l.safeSeekOffset,u=e.g.Xb(),a=e.g.Hb(),d=e.g.getDuration();a-u<3&&(u=a-3);var p=e.g.Vd(n),g=e.g.Vd(o);return n=e.g.Vd(n+o),t>=d?Kv(e,t):t>a?a-e.l.safeSeekEndOffset:t<u?e.g.W()&&e.l.returnToEndOfLiveWindowWhenOutside?a-e.l.safeSeekEndOffset:Cp(e.h.buffered,g)?g:n:t>=p||Cp(e.h.buffered,t)?t:n}function qv(e,t){var n=e.g.Xb();return t<n?n:(e=e.g.Hb(),t>e?e:t)}function vt(e){this.g=e,this.m=null,this.i=0,this.o=!1}m=vt.prototype,m.getNumReferences=function(){return this.g.length},m.getNumEvicted=function(){return this.i},m.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},m.zk=function(){this.o=!0},m.Gb=function(e){for(var t=R(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function rr(e){return e.g[0]||null}m.find=function(e){for(var t=this.g.length-1,n=t;n>=0;--n){var o=this.g[n],u=n<t?this.g[n+1].startTime:o.endTime;if(e>=o.startTime&&e<u)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},m.get=function(e){return this.g.length==0?null:(e-=this.i,e<0||e>=this.g.length?null:this.g[e])},m.offset=function(e){if(!this.o)for(var t=R(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},m.mf=function(e){if(!this.o&&e.length){var t=Math.round(e[0].startTime*1e3)/1e3;this.g=this.g.filter(function(n){return Math.round(n.startTime*1e3)/1e3<t}),this.g.push.apply(this.g,le(e))}},m.ee=function(e,t){var n=this;e=e.filter(function(o){return o.endTime>t&&(n.g.length==0||o.endTime>n.g[0].startTime)}),this.mf(e),this.Ya(t)},m.Ya=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},m.pd=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new Ve(e.startTime,t,e.C,e.startByte,e.endByte,e.aa,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},m.Nf=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new dt(function(){var o=t();o?n.g.push.apply(n.g,le(o)):(n.m.stop(),n.m=null)}),this.m.Fa(e))},vt.prototype[Symbol.iterator]=function(){return this.Vb(0)},vt.prototype.Vb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var o=this.find(e);if(o==null)return null;var u=this.get(o);n?o++:o--;var a=-1;if(u&&u.g.length>0)for(var d=u.g.length-1;d>=0;--d){var p=u.g[d];if(e>=p.startTime&&e<p.endTime){if(!t){for(;d&&!p.l;)d--,p=u.g[d];if(!p.l)return Rn("No independent partial segment found!"),null}n?o--:o++,a=d-1;break}}return new Oi(this,o,a,n)},vt.prototype.Se=function(){return-1};function Yf(e,t,n){return e=new Ve(e,e+t,function(){return n},0,null,null,e,e,e+t),new vt([e])}be("shaka.media.SegmentIndex",vt),vt.forSingleSegment=Yf,vt.prototype.getIteratorForTime=vt.prototype.Vb,vt.prototype.updateEvery=vt.prototype.Nf,vt.prototype.fit=vt.prototype.pd,vt.prototype.evict=vt.prototype.Ya,vt.prototype.mergeAndEvict=vt.prototype.ee,vt.prototype.offset=vt.prototype.offset,vt.prototype.get=vt.prototype.get,vt.prototype.find=vt.prototype.find,vt.prototype.markImmutable=vt.prototype.zk,vt.prototype.release=vt.prototype.release,vt.prototype.getNumEvicted=vt.prototype.getNumEvicted,vt.prototype.getNumReferences=vt.prototype.getNumReferences;function Oi(e,t,n,o){this.i=e,this.h=t,this.g=n,this.reverse=o}m=Oi.prototype,m.Id=function(e){this.reverse=e},m.uj=function(){return this.h},m.current=function(){var e=this.i.get(this.h);return e&&e.g.length>0&&e.u&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&e.g.length>0?e.g[this.g]:e},m.next=function(){var e=this.i.get(this.h);return this.reverse?e&&e.g.length>0?(this.g--,this.g<0&&(this.h--,this.g=(e=this.i.get(this.h))&&e.g.length>0?e.g.length-1:0)):(this.h--,this.g=0):e&&e.g.length>0?(this.g++,e.u&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},m.fh=function(){var e=this.current();if(e.Xc&&!e.l&&(e=this.i.get(this.h))&&e.g.length>0)for(var t=e.g[this.g];t.l&&!(this.g<=0);)this.g--,t=e.g[this.g]},be("shaka.media.SegmentIterator",Oi),Oi.prototype.resetToLastIndependent=Oi.prototype.fh,Oi.prototype.next=Oi.prototype.next,Oi.prototype.current=Oi.prototype.current,Oi.prototype.currentPosition=Oi.prototype.uj,Oi.prototype.setReverse=Oi.prototype.Id;function qt(){vt.call(this,[]),this.h=[]}U(qt,vt),m=qt.prototype,m.clone=function(){var e=new qt;return e.h=this.h.slice(),e.i=this.i,e},m.release=function(){for(var e=R(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},m.Gb=function(e){for(var t=R(this.h),n=t.next();!n.done;n=t.next())n.value.Gb(e)};function Wk(e,t){e=R(e.h);for(var n=e.next();!n.done;n=e.next())t(n.value)}m.find=function(e){for(var t=this.i,n=R(this.h),o=n.next();!o.done;o=n.next()){o=o.value;var u=o.find(e);if(u!=null)return u+t;t+=o.getNumEvicted()+o.getNumReferences()}return null};function Kk(e,t){e=R(e.h);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.find(t)!=null)return n.Se();return-1}m.get=function(e){for(var t=this.i,n=R(this.h),o=n.next();!o.done;o=n.next()){o=o.value;var u=o.get(e-t);if(u)return u;u=o.getNumReferences(),t+=o.getNumEvicted()+u}return null},m.offset=function(){},m.mf=function(){},m.Ya=function(e){if(this.h.length){var t=this.h[0];t.Ya(e),t.getNumReferences()==0&&(this.h.shift(),this.i+=t.getNumEvicted(),t.release(),this.Ya(e))}},m.ee=function(){},m.pd=function(){},m.Nf=function(){},be("shaka.media.MetaSegmentIndex",qt),qt.prototype.updateEvery=qt.prototype.Nf,qt.prototype.fit=qt.prototype.pd,qt.prototype.mergeAndEvict=qt.prototype.ee,qt.prototype.evict=qt.prototype.Ya,qt.prototype.merge=qt.prototype.mf,qt.prototype.offset=qt.prototype.offset,qt.prototype.get=qt.prototype.get,qt.prototype.find=qt.prototype.find,qt.prototype.forEachTopLevelReference=qt.prototype.Gb,qt.prototype.release=qt.prototype.release;function _l(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Xe(),this.h=new dt(function(){t.g.ui(t.i*.25)})}_l.prototype.release=function(){this.set(this.Tc()),this.h&&(this.h.stop(),this.h=null),this.g=null},_l.prototype.set=function(e){this.i=e,$p(this)},_l.prototype.Tc=function(){return this.g.Tc()};function $p(e){e.h.stop();var t=e.j?0:e.i;if(t>=0)try{e.g.Xe()!=t&&e.g.qh(t);return}catch{}e.h.Fa(.25),e.g.Xe()!=0&&e.g.qh(0)}function zp(e){var t=this;this.j=e,this.h=new Le,this.g=new Set,this.i=new dt(function(){Jv(t,!1)}).Kb(),e.paused||this.i.Fa(.25),this.h.D(e,"playing",function(){t.i.Kb().Fa(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}zp.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=R(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function Jv(e,t){var n=e.j.currentTime;e=R(e.g);for(var o=e.next();!o.done;o=e.next())o.value.j(n,t)}function qf(e){Tt.call(this),this.g=new Map,this.h=e}U(qf,Tt),qf.prototype.release=function(){this.g.clear(),Tt.prototype.release.call(this)};function Yk(e,t){var n=e.g.get(t);return n||(n={ke:[],lg:null,contentType:t},e.g.set(t,n)),n}function qk(e,t,n){var o=Yk(e,t.contentType);Jk(e,o),e={xd:t,position:n},o=o.ke,t=o.findIndex(function(u){return u.position>=n}),t>=0?o.splice(t,o[t].position==n?1:0,e):o.push(e)}qf.prototype.j=function(e){for(var t=R(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var o=n.lg;e:{for(var u=n.ke,a=u.length-1;a>=0;a--){var d=u[a];if(d.position<=e){u=d.xd;break e}}u=null}a=u&&!(o===u||o&&u&&o.bandwidth==u.bandwidth&&o.audioSamplingRate==u.audioSamplingRate&&o.codecs==u.codecs&&o.contentType==u.contentType&&o.frameRate==u.frameRate&&o.height==u.height&&o.mimeType==u.mimeType&&o.channelsCount==u.channelsCount&&o.pixelAspectRatio==u.pixelAspectRatio&&o.width==u.width),d=u&&o&&u.label&&o.label&&o.label!==u.label;var p=u&&o&&u.language&&o.language&&o.language!==u.language;o=u&&o&&u.roles&&o.roles&&!Rt(o.roles,u.roles),(d||p||o)&&Qv(this,e,u.contentType)&&(n.lg=u,o=new Ie("audiotrackchange",new Map([["quality",u],["position",e]])),this.dispatchEvent(o)),a&&Qv(this,e,u.contentType)&&(n.lg=u,JSON.stringify(u),n=new Ie("qualitychange",new Map([["quality",u],["position",e]])),this.dispatchEvent(n))}};function Qv(e,t,n){return!!((e=e.h()[n])&&e.length>0&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function Jk(e,t){if((e=e.h()[t.contentType])&&e.length>0){var n=e[0].start,o=e[e.length-1].end,u=t.ke;t.ke=u.filter(function(a,d){return!(a.position<=n&&d+1<u.length&&u[d+1].position<=n||a.position>=o)})}else t.ke=[]}function Jf(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function Ll(e){Tt.call(this),this.h=new Map,this.i=e,this.g=null}U(Ll,Tt),Ll.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),Tt.prototype.release.call(this)};function Vp(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+(t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1));e.h.has(n)||(e.h.set(n,t),t=new Ie("regionadd",new Map([["region",t]])),e.dispatchEvent(t),Qk(e))}function Qk(e){e.g||(e.g=new dt(function(){for(var t=e.i(),n=R(e.h),o=n.next();!o.done;o=n.next()){var u=R(o.value);o=u.next().value,u=u.next().value,u.endTime<t.start&&(e.h.delete(o),o=new Ie("regionremove",new Map([["region",u]])),e.dispatchEvent(o))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).Fa(2))}function Qf(e,t,n,o,u){function a(d,p){return!(p.fastSwitching&&d.Xc&&d.ce)}this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=o,this.u=u||a}function Zk(e,t){e.l=t,e=R(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function Pl(e,t,n){if(n=n===void 0?!1:n,!e.i.segmentIndex||(e.g||(e.g=e.i.segmentIndex.Vb(t,!0,e.o)),!e.g))return Promise.resolve();for(n&&e.g.next(),t=[];e.h.size<e.m&&(n=e.g.next().value,!!n);){var o=!0;if(n.isPreload()&&n.endByte!=null&&(o=!1),n.Kc()==2&&(o=!1),n.Yb(!1)&&(o=!1),o&&n.aa&&t.push(Zv(e,n.aa)),o&&!e.h.has(n)&&(o=new Gp(e.l),t.push(nx(o,n,e.i)),e.h.set(n,o)),!e.u(n,e.i))break}return Hp(e),Promise.all(t)}function Zv(e,t){if(!e.i.segmentIndex||t.Yb()||Array.from(e.j.keys()).some(function(u){return Al(u,t)}))return Promise.resolve();var n=new Gp(e.l),o=nx(n,t,e.i);return e.j.set(t,n),o}function ex(e,t){t=R(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Dl(e,n)}function or(e){ex(e,e.h),ex(e,e.j),e.g=null}Qf.prototype.Ya=function(e,t){t=t===void 0?!1:t;for(var n=R(this.h.keys()),o=n.next();!o.done;o=n.next())o=o.value,e>o.endTime&&Dl(this,o);t&&Hp(this)},Qf.prototype.Id=function(e){this.o=e,this.g&&this.g.Id(e)};function Hp(e){for(var t=Array.from(e.h.keys()),n=R(e.j.keys()),o=n.next(),u={};!o.done;u={Ng:void 0},o=n.next())u.Ng=o.value,t.some((function(a){return function(d){return Al(d.aa,a.Ng)}})(u))||Dl(e,u.Ng)}function tx(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var o=n.pop();o&&Dl(e,o)}Hp(e)}function eA(e,t){t&&t!==e.i&&(or(e),e.i=t)}function Dl(e,t){var n=e.h;t instanceof ni&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function Gp(e){this.g=e,this.ie=this.xh=null}function nx(e,t,n){var o=new Uint8Array(0);return e.ie=e.g(t,n,function(u){return $(function(a){if(a.g==1)return o.byteLength>0?o=sn(o,u):o=u,e.xh?D(a,e.xh(o),3):a.A(0);o=new Uint8Array(0),te(a)})}),e.ie.promise.catch(function(u){return u instanceof q&&u.code==7001?Promise.resolve():Promise.reject(u)})}Gp.prototype.abort=function(){this.ie&&this.ie.abort()},be("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});function Xp(e){var t=ci(e),n=t.split("/")[0];return e=ti(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,ue:null,colorGamut:null,frameRate:null}}function tA(e,t,n){function o(z){F=z.name;var Q=z.reader;Q.skip(24);var ee=Q.Ba(),se=Q.Ba();Q.skip(50),M=String(ee),T=String(se),z.reader.Ia()&&ot(z)}function u(z){var Q=uv(z.reader);L=Q.channelCount,P=Q.sampleRate,a(z.name)}function a(z){switch(z=z.toLowerCase(),z){case"avc1":case"avc3":p.push(z+".42E01E"),y=!0;break;case"hev1":case"hvc1":p.push(z+".1.6.L93.90"),y=!0;break;case"dvh1":case"dvhe":p.push(z+".05.04"),y=!0;break;case"vp09":p.push(z+".00.10.08"),y=!0;break;case"av01":p.push(z+".0.01M.08"),y=!0;break;case"mp4a":d.push("mp4a.40.2"),g=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":d.push(z),g=!0;break;case"apac":d.push("apac.31.00"),g=!0}}var d=[],p=[],g=!1,y=!1,w=null,T=null,M=null,L=null,P=null,N=null,O=null,F;if(new Lt().box("moov",ot).box("trak",ot).box("mdia",ot).T("mdhd",function(z){w=Ff(z.reader,z.version).language}).box("minf",ot).box("stbl",ot).T("stsd",_r).box("mp4a",function(z){var Q=uv(z.reader);L=Q.channelCount,P=Q.sampleRate,z.reader.Ia()?ot(z):a(z.name)}).box("esds",function(z){z=z.reader;for(var Q="mp4a",ee,se;z.Ia();){ee=z.Y();for(var fe=z.Y();fe&128;)fe=z.Y();if(ee==3)z.Ba(),fe=z.Y(),fe&128&&z.Ba(),fe&64&&z.skip(z.Y()),fe&32&&z.Ba();else if(ee==4)se=z.Y(),z.skip(12);else if(ee==5)break}se&&(Q+="."+Cl(se),ee==5&&z.Ia()&&(ee=z.Y(),se=(ee&248)>>3,se===31&&z.Ia()&&(se=32+((ee&7)<<3)+((z.Y()&224)>>5)),Q+="."+se)),d.push(Q),g=!0}).box("ac-3",u).box("ec-3",u).box("ac-4",u).box("Opus",u).box("fLaC",u).box("apac",u).box("avc1",o).box("avc3",o).box("hev1",o).box("hvc1",o).box("dva1",o).box("dvav",o).box("dvh1",o).box("dvhe",o).box("vp09",o).box("av01",o).box("avcC",function(z){var Q=F||"";switch(F){case"dvav":Q="avc3";break;case"dva1":Q="avc1"}z=z.reader,z.skip(1),z=Q+"."+Cl(z.Y())+Cl(z.Y())+Cl(z.Y()),p.push(z),y=!0}).box("hvcC",function(z){var Q=F||"";switch(F){case"dvh1":Q="hvc1";break;case"dvhe":Q="hev1"}var ee=z.reader;ee.skip(1),z=ee.Y();var se=["","A","B","C"][z>>6],fe=z&31,ne=ee.U(),xe=(z&32)>>5?"H":"L";z=[ee.Y(),ee.Y(),ee.Y(),ee.Y(),ee.Y(),ee.Y()],ee=ee.Y();for(var ye=0,ae=0;ae<32&&(ye|=ne&1,ae!=31);ae++)ye<<=1,ne>>=1;for(Q=Q+("."+se+fe)+("."+Cl(ye,!0)),Q+="."+xe+ee,se="",fe=z.length;fe--;)((xe=z[fe])||se)&&(se="."+xe.toString(16).toUpperCase()+se);Q+=se,p.push(Q),y=!0}).box("dvcC",function(z){var Q=F||"";switch(F){case"hvc1":Q="dvh1";break;case"hev1":Q="dvhe";break;case"avc1":Q="dva1";break;case"avc3":Q="dvav";break;case"av01":Q="dav1"}var ee=z.reader;ee.skip(2),z=ee.Y(),ee=ee.Y(),p.push(Q+"."+hi(z>>1&127)+"."+hi(z<<5&32|ee>>3&31)),y=!0}).box("dvvC",function(z){var Q=F||"";switch(F){case"hvc1":Q="dvh1";break;case"hev1":Q="dvhe";break;case"avc1":Q="dva1";break;case"avc3":Q="dvav";break;case"av01":Q="dav1"}var ee=z.reader;ee.skip(2),z=ee.Y(),ee=ee.Y(),p.push(Q+"."+hi(z>>1&127)+"."+hi(z<<5&32|ee>>3&31)),y=!0}).T("vpcC",function(z){var Q=F||"",ee=z.reader;z=ee.Y();var se=ee.Y();ee=ee.Y()>>4&15,p.push(Q+"."+hi(z)+"."+hi(se)+"."+hi(ee)),y=!0}).box("av1C",function(z){var Q=F||"";switch(F){case"dav1":Q="av01"}var ee=z.reader;ee.skip(1),z=ee.Y(),ee=ee.Y();var se=z>>>5,fe=(ee&64)>>6;p.push(Q+"."+se+"."+hi(z&31)+(ee>>>7?"H":"M")+"."+hi(se===2&&fe?(ee&32)>>5?12:10:fe?10:8)+"."+((ee&16)>>4)+"."+((ee&8)>>3)+((ee&4)>>2)+(ee&3)+"."+hi(1)+"."+hi(1)+"."+hi(1)+".0"),y=!0}).box("enca",Pf).box("encv",di).box("sinf",ot).box("frma",function(z){z=Tp(z.reader).codec,a(z)}).box("colr",function(z){p=p.map(function(se){if(se.startsWith("av01.")){var fe=z.reader,ne=fe.Pa(),xe=fe.Tb(4),ye=String.fromCharCode(xe[0]);if(ye+=String.fromCharCode(xe[1]),ye+=String.fromCharCode(xe[2]),ye+=String.fromCharCode(xe[3]),ye==="nclx"){xe=fe.Ba(),ye=fe.Ba();var ae=fe.Ba(),he=fe.Y()>>7,Te=se.split(".");Te.length==10&&(Te[6]=hi(xe),Te[7]=hi(ye),Te[8]=hi(ae),Te[9]=String(he),se=Te.join("."))}fe.seek(ne)}return se});var Q=ik(z.reader),ee=Q.colorGamut;N=Q.ue,O=ee}).parse(e||t,!0,!0),!d.length&&!p.length)return null;var B=g&&!y,V=new Map;if(y&&!n){n=new nr("video/mp4"),e&&n.init(e);try{n.xf(t);for(var Y=R(n.Vf()),J=Y.next();!J.done;J=Y.next()){var H=J.value;V.set(H,H)}}catch{}n.Ld()}return{type:B?"audio":"video",mimeType:B?"audio/mp4":"video/mp4",codecs:Wp(d.concat(p)).join(", "),language:w,height:T,width:M,channelCount:L,sampleRate:P,closedCaptions:V,ue:N,colorGamut:O,frameRate:null}}function Wp(e){var t=new Set,n=[];e=R(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var u=eo(o);t.has(u)||(n.push(o),t.add(u))}return t=Gh("audio",n),o=Gh("video",n),e=Gh(lt,n),o=nA(o),t=t.concat(o).concat(e),n.length&&!t.length?n:t}function nA(e){if(e.length<=1)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?jn('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function iA(e){var t=null;return new Lt().box("moov",ot).box("trak",ot).box("mdia",ot).box("minf",ot).box("stbl",ot).T("stsd",_r).box("encv",di).box("enca",Pf).box("sinf",ot).box("schi",ot).T("tenc",function(n){n=n.reader,n.Y(),n.Y(),n.Y(),n.Y(),t=Tr(n.Tb(16))}).parse(e,!0),t}function Kp(e,t,n){var o,u,a,d,p;return $(function(g){if(g.g==1)return o=t,o.cryptoKey?g.A(2):D(g,o.fetchKey(),3);if(u=o.iv,!u)for(u=et(new ArrayBuffer(16)),a=o.firstMediaSequenceNumber+n,d=u.byteLength-1;d>=0;d--)u[d]=a&255,a>>=8;return t.blockCipherMode=="CBC"?p={name:"AES-CBC",iv:u}:p={name:"AES-CTR",counter:u,length:64},g.return(f.crypto.subtle.decrypt(p,o.cryptoKey,e))})}function Ol(e,t,n,o,u){return e=un(e,o,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function ix(e,t){var n=this;this.g=t,this.j=e,this.i=null,this.N=new Map,this.F=1,this.B=this.o=null,this.V=0,this.h=new Map,this.M=!1,this.X=null,this.C=!1,this.l=new Ns(function(){return rA(n)}),this.R=Date.now()/1e3,this.m=new Map,this.S={projection:null,hfov:null},this.ba=0,this.$=1/0,this.H=null,this.O=[],this.u=new dt(function(){if(n.j&&n.g)if(n.j.presentationTimeline.W()){var o=n.j.presentationTimeline.Xb(),u=n.j.presentationTimeline.Hb();u-o>1?Nk(n.g.Z,o,u):Dp(n.g.Z)}else Dp(n.g.Z),n.u&&n.u.stop();else n.u&&n.u.stop()}),this.I=null,this.J=!1,this.K=new dt(function(){var o=n.g.video;!o.ended&&n.I&&(n.J=!0,o.currentTime=n.I,n.I=null)}),this.G=new Le}m=ix.prototype,m.destroy=function(){return this.l.destroy()};function rA(e){var t,n,o,u,a,d,p;return $(function(g){if(g.g==1){for(e.u&&e.u.stop(),e.u=null,e.K&&e.K.stop(),e.K=null,e.G&&(e.G.release(),e.G=null),t=[],n=R(e.h.values()),o=n.next();!o.done;o=n.next())u=o.value,Or(u),t.push(nc(u)),u.ea&&(or(u.ea),u.ea=null);for(a=R(e.m.values()),d=a.next();!d.done;d=a.next())p=d.value,or(p);return D(g,Promise.all(t),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.I=null,te(g)})}m.configure=function(e){if(this.i=e,this.X=new M1({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.h.get("audio");t&&t.ea&&(or(t.ea),t.ea=null),t=R(this.m.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,or(this.m.get(n)),this.m.delete(n)}for(e.disableTextPrefetch&&(t=this.h.get(lt))&&t.ea&&(or(t.ea),t.ea=null),e.disableVideoPrefetch&&(t=this.h.get("video"))&&t.ea&&(or(t.ea),t.ea=null),t=R(this.h.keys()),n=t.next();!n.done;n=t.next())n=this.h.get(n.value),n.ea?(tx(n.ea,e.segmentPrefetchLimit),e.segmentPrefetchLimit>0||(or(n.ea),n.ea=null)):e.segmentPrefetchLimit>0&&(n.ea=qp(this,n.stream));e.disableAudioPrefetch||cA(this)};function oA(e,t,n){e.j.presentationTimeline.W()||(e.ba=t,e.$=n)}m.start=function(e){var t=this;return $(function(n){if(n.g==1)return D(n,fA(t,e||new Map),2);Ot(t.l),t.M=!0,te(n)})};function sA(e,t){var n,o,u,a,d,p;$(function(g){switch(g.g){case 1:return n=cn,e.V++,o=e.V,ce(g,2),D(g,Av(e.g.Z,n.Na),4);case 4:X(g,3);break;case 2:u=ie(g),e.g&&e.g.onError(u);case 3:a=en(t.mimeType,t.codecs),Xf(e.g.Z,a,e.j.sequenceMode,t.external),d=e.g.Z.ba,(d.isTextVisible()||e.i.alwaysStreamText)&&e.V==o&&(p=ec(e,t),e.h.set(n.Na,p),$n(e,p,0)),te(g)}})}function uA(e){var t=e.h.get(lt);t&&(Or(t),nc(t).catch(function(){}),e.H=e.h.get(lt),e.h.delete(lt),t.stream&&t.stream.closeSegmentIndex&&t.stream.closeSegmentIndex()),e.B=null}function rx(e,t){for(var n=e.g.Pb()<0,o=R(e.h.values()),u=o.next();!u.done;u=o.next())u=u.value,u.ua&&u.ua.Id(n),u.ea&&u.ea.Id(n);for(o=R(e.m.values()),u=o.next();!u.done;u=o.next())u.value.Id(n);(n=e.h.get("video"))&&(o=n.stream)&&(t?(t=o.trickModeVideo)&&!n.Mc&&(Js(e,t,!1,0,!1),n.Mc=o):(t=n.Mc)&&(n.Mc=null,Js(e,t,!0,0,!1)))}function ox(e,t,n,o,u,a){n=n===void 0?!1:n,o=o===void 0?0:o,u=u===void 0?!1:u,a=a===void 0?!1:a,e.o=t,e.M&&(t.video&&Js(e,t.video,n,o,u,a),t.audio&&Js(e,t.audio,n,o,u,a))}function Zf(e,t){$(function(n){if(n.g==1)return e.H=null,e.B=t,e.M?t.segmentIndex?n.A(2):D(n,t.createSegmentIndex(),2):n.return();Js(e,t,!0,0,!1),te(n)})}function lA(e){var t=e.h.get(lt);t&&Js(e,t.stream,!0,0,!0)}function aA(e,t){for(var n=R(e.N.entries()),o=n.next();!o.done;o=n.next()){var u=R(o.value);o=u.next().value,u=u.next().value,o.includes(t.type)&&(u(),e.N.delete(o))}}function Js(e,t,n,o,u,a){var d=e.h.get(t.type);d||t.type!=lt?d&&(d.Mc&&(t.trickModeVideo?(d.Mc=t,t=t.trickModeVideo):d.Mc=null),d.stream!=t||u)&&(e.m.has(t)?d.ea=e.m.get(t):d.ea&&eA(d.ea,t),t.type==lt&&d.stream!=t&&(u=en(t.mimeType,t.codecs),Xf(e.g.Z,u,e.j.sequenceMode,t.external)),!e.m.has(d.stream)&&d.stream.closeSegmentIndex&&(d.Ja?(u="("+d.type+":"+d.stream.id+")",e.N.has(u)||e.N.set(u,d.stream.closeSegmentIndex)):d.stream.closeSegmentIndex()),u=d.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,d.stream=t,d.ua=null,d.cg=!!a,t.dependencyStream?d.Ec=ec(e,t.dependencyStream):d.Ec=null,fx(e),u&&(d.pb=null,d.nc=null,d.mc=null,t.isAudioMuxedInVideo&&(t=null,d.type==="video"?t=e.h.get("audio"):d.type==="audio"&&(t=e.h.get("video")),t&&(nc(t).catch(function(){}),t.pb=null,t.nc=null,t.mc=null,Yp(e,t),sx(e,t).catch(function(p){e.g&&e.g.onError(p)})))),n?d.Ub?d.Jd=!0:d.Ja?(d.ec=!0,d.ld=o,d.Jd=!0):(Or(d),e0(e,d,!0,o).catch(function(p){e.g&&e.g.onError(p)})):d.Ja||d.sb||$n(e,d,0),sx(e,d).catch(function(p){e.g&&e.g.onError(p)})):sA(e,t)}function sx(e,t){var n,o,u;return $(function(a){if(a.g==1)return t.Ua?(n=t.stream,o=t.Ua,n.segmentIndex?a.A(2):D(a,n.createSegmentIndex(),2)):a.return();if(a.g!=4)return u=n.dependencyStream,!u||u.segmentIndex?a.A(4):D(a,u.createSegmentIndex(),4);if(t.Ua!=o||t.stream!=n)return a.return();var d=e.g.Hc(),p=Qo(e.g.Z,t.type),g=t.stream.segmentIndex.find(t.La?t.La.endTime:d),y=g==null?null:t.stream.segmentIndex.get(g);g=y&&y.endByte?y.endByte-y.startByte:null,y&&!g&&(g=(y.endTime-y.getStartTime())*(t.stream.bandwidth||0)/8),g?((y=y.aa)&&(g+=(y.endByte?y.endByte-y.startByte:null)||0),y=e.g.getBandwidthEstimate(),d=g*8/y<(p||0)-d-e.i.rebufferingGoal||t.Ua.h.g>g):d=!1,d&&t.Ua.abort(),te(a)})}m.bd=function(){if(this.g){for(var e=this.g.Hc(),t=R(this.h.keys()),n=t.next();!n.done;n=t.next()){var o=n.value;n=this.h.get(o);var u;if((u=!this.J)&&(u=this.g.Z,o==lt?(u=u.h,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Ws(u,o),u=Cp(u,e)),u=!u),u){if(this.R=0,n.ea&&(n.ea.g=null),n.type==="audio"){u=R(this.m.values());for(var a=u.next();!a.done;a=u.next())a.value.g=null}n.ua=null,(Qo(this.g.Z,o)!=null||n.Ja)&&Yp(this,n),n.Ua&&(n.Ua.abort(),n.Ua=null),o===lt&&(o=this.g.Z,o.K&&o.K.Ld()),n.bd=!0}!this.J||n.Ub||n.Ja||n.sb||$n(this,n,0)}Ul(this)&&n0(this)}};function Yp(e,t){t.Ub||t.ec||(t.Ja?(t.ec=!0,t.ld=0):Pp(e.g.Z,t.type)==null?t.sb==null&&$n(e,t,0):(Or(t),e0(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function fA(e,t){var n,o,u,a,d,p,g,y;return $(function(w){if(w.g==1){if(!e.o)throw new q(2,5,5006);return n=rc(e,!0),o=e.g.Z,D(w,o.init(n,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(Ot(e.l),e.updateDuration(),u=R(n.keys()),a=u.next();!a.done;a=u.next())d=a.value,p=n.get(d),e.h.has(d)||(g=ec(e,p),t.has(p.id)&&(y=t.get(p.id),Zk(y,function(T,M,L){return tc(T,M,L||null,e.i.retryParameters,e.g.tc)}),g.ea=y),e.h.set(d,g),$n(e,g,0));fx(e),te(w)})}function ec(e,t){var n={stream:t,type:t.type,ua:null,ea:qp(e,t),La:null,pb:null,jf:null,nc:null,mc:null,gf:null,hf:null,Mc:null,endOfStream:!1,Ja:!1,sb:null,ec:!1,ld:0,Jd:!1,Ub:!1,bd:!0,cg:!1,bh:!1,Xd:!1,Ua:null,Ec:null};return t.dependencyStream&&(n.Ec=ec(e,t.dependencyStream)),n}function qp(e,t){if(t.type==="video"&&e.i.disableVideoPrefetch||t.type==="audio"&&e.i.disableAudioPrefetch||t.type===lt&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===lt&&e.i.disableTextPrefetch)return null;if(e.m.has(t))return e.m.get(t);var n=e.h.get(t.type);return(n=n&&n.ea)&&t===n.i?n:e.i.segmentPrefetchLimit>0?new Qf(e.i.segmentPrefetchLimit,t,function(o,u,a){return tc(o,u,a||null,e.i.retryParameters,e.g.tc)},e.g.Pb()<0,e.g.cl):null}function cA(e){for(var t=e.i.segmentPrefetchLimit,n=e.i.prefetchAudioLanguages,o=R(e.j.variants),u=o.next(),a={};!u.done;a={Nb:void 0},u=o.next())if(a.Nb=u.value,a.Nb.audio)if(e.m.has(a.Nb.audio)){if(u=e.m.get(a.Nb.audio),tx(u,t),!(t>0&&n.some((function(p){return function(g){return _s(p.Nb.audio.language,g)}})(a)))){var d=e.h.get(a.Nb.audio.type);u!==(d&&d.ea)&&or(u),e.m.delete(a.Nb.audio)}}else t<=0||!n.some((function(p){return function(g){return _s(p.Nb.audio.language,g)}})(a))||!(u=qp(e,a.Nb.audio))||(a.Nb.audio.segmentIndex||a.Nb.audio.createSegmentIndex(),e.m.set(a.Nb.audio,u))}m.updateDuration=function(){var e=Gy(),t=this.j.presentationTimeline.getDuration();t<1/0?(e&&(this.u&&this.u.stop(),Dp(this.g.Z)),this.g.Z.rb(t)):e?(this.u&&this.u.Fa(.5),this.g.Z.rb(1/0)):this.g.Z.rb(4294967296)};function dA(e,t){var n,o,u,a,d,p,g,y,w;return $(function(T){switch(T.g){case 1:if(Ot(e.l),n=cn,t.Ja||t.sb==null||t.Ub)return T.return();if(t.sb=null,!t.ec){T.A(2);break}return D(T,e0(e,t,t.Jd,t.ld),3);case 3:return T.return();case 2:if(aA(e,t),t.stream.segmentIndex){T.A(4);break}return o=t.stream,ce(T,5),D(T,t.stream.createSegmentIndex(),7);case 7:X(T,6);break;case 5:return u=ie(T),D(T,t0(e,t,u),8);case 8:return T.return();case 6:if(o!=t.stream)return o.closeSegmentIndex&&o.closeSegmentIndex(),t.Ja||t.sb||$n(e,t,0),T.return();case 4:if(!t.Ec){T.A(9);break}if(t.Ec.stream.segmentIndex){T.A(9);break}return ce(T,11),D(T,t.Ec.stream.createSegmentIndex(),13);case 13:X(T,9);break;case 11:ie(T);case 9:ce(T,14),a=hA(e,t),a!=null&&($n(e,t,a),t.Xd=!1),X(T,15);break;case 14:return d=ie(T),D(T,t0(e,t,d),16);case 16:return T.return();case 15:if(t.type===n.Na)return T.return();if(p=[t],g=t.type===n.ia?n.Ca:n.ia,(y=e.h.get(g))&&p.push(y),!e.M||!p.every(function(M){return M.endOfStream})){T.A(0);break}return D(T,e.g.Z.endOfStream(),18);case 18:Ot(e.l),w=e.g.Z.getDuration(),w!=0&&w<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.rb(w),te(T)}})}function hA(e,t){if(Zp(t))return Pk(e.g.Z,t.stream.originalId||""),null;if(t.type==lt&&Dk(e.g.Z),t.stream.isAudioMuxedInVideo&&t.type=="audio")return null;if(t.type!=lt&&Jo(e.g.Z))return ic(e,!0),null;var n=e.i.updateIntervalSeconds/Math.max(1,Math.abs(e.g.Pb()));if(!kv(e.g.Z)&&t.type!=lt)return n/2;var o=e.g.Hc();if(t.type==="audio")for(var u=R(e.m.keys()),a=u.next();!a.done;a=u.next())a=e.m.get(a.value),a.Ya(o,!0),Pl(a,o);u=t.La?t.La.endTime:o;var d=_k(e.g.Z,t.type,o);a=Math.max(1,Math.max(e.i.rebufferingGoal,e.i.bufferingGoal)*e.F);var p=e.j.presentationTimeline.getDuration()-u,g=Qo(e.g.Z,t.type);if(p<1e-6&&g)return t.endOfStream=!0,t.type=="video"&&(e=e.h.get(lt))&&Zp(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,d>=a)return n/2;if(p=!t.ua,g=ux(e,t,o,g),!g)return n;d=t.pb;var y=g.aa;d&&y&&Al(y,d)&&(d.g=y.g),d=!1,p&&t.cg&&(d=!0,t.cg=!1),p=1/0,y=Array.from(e.h.values()),y=R(y);for(var w=y.next();!w.done;w=y.next())w=w.value,Zp(w)||w.ua&&!w.ua.current()||(p=Math.min(p,w.La?w.La.endTime:o));return u>=p+e.j.presentationTimeline.h?n:(t.ea&&t.ua&&!e.m.has(t.stream)&&(t.ea.Ya(g.startTime+.001),Pl(t.ea,g.startTime).catch(function(){})),Ul(e)&&vA(e,t,g)||(pA(e,t,o,g,d).catch(function(){}),t.Ec&&lx(e,t.Ec,o,a)),null)}function ux(e,t,n,o){if(t.ua)return(n=t.ua.current())&&t.La&&Math.abs(t.La.startTime-n.startTime)<.001&&(n=t.ua.next().value),n;if(t.La||o)return n=t.La?t.La.endTime:o,e=e.g.Pb()<0,t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(n,!1,e)),t.ua&&t.ua.next().value;o=e.j.sequenceMode||Ul(e)?0:e.i.inaccurateManifestTolerance;var u=Math.max(n-o,0);e=e.g.Pb()<0;var a=null;return o&&(t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(u,!1,e)),a=t.ua&&t.ua.next().value),a||(t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(n,!1,e)),a=t.ua&&t.ua.next().value),a}function pA(e,t,n,o,u){var a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J;return $(function(H){switch(H.g){case 1:if(a=cn,d=t.stream,p=t.ua,t.Ja=!0,ce(H,2),o.Kc()==2)throw new q(1,1,1011);return D(H,mA(e,t,o,u),4);case 4:return Ot(e.l),e.C?H.return():(g=d.mimeType=="video/mp4"||d.mimeType=="audio/mp4",y=f.ReadableStream,e.i.lowLatencyMode&&e.j.isLowLatency&&y&&g&&(e.j.type!="HLS"||o.m)?(M=new Uint8Array(0),P=L=!1,O=function(z){var Q,ee,se;return $(function(fe){switch(fe.g){case 1:if(L||(P=!0,Ot(e.l),e.C))return fe.return();if(ce(fe,2),M=sn(M,z),Q=!1,ee=0,new Lt().box("mdat",function(ne){ee=ne.size+ne.start,Q=!0}).parse(M,!1,!0),!Q){fe.A(4);break}return se=M.subarray(0,ee),M=M.subarray(ee),D(fe,Jp(e,t,n,d,o,se,!0,u),5);case 5:t.ea&&t.ua&&Pl(t.ea,o.startTime,!0);case 4:X(fe,0);break;case 2:N=ie(fe),te(fe)}})},D(H,Nl(e,t,o,O),9)):(w=Nl(e,t,o),D(H,w,7)));case 7:return T=H.h,Ot(e.l),e.C?H.return():(Ot(e.l),t.ec?(t.Ja=!1,$n(e,t,0),H.return()):D(H,Jp(e,t,n,d,o,T,!1,u),6));case 9:if(F=H.h,N)throw N;if(P){H.A(10);break}return L=!0,Ot(e.l),e.C?H.return():t.ec?(t.Ja=!1,$n(e,t,0),H.return()):D(H,Jp(e,t,n,d,o,F,!1,u),10);case 10:t.ea&&t.ua&&Pl(t.ea,o.startTime,!0);case 6:if(Ot(e.l),e.C)return H.return();t.La=o,p.next(),t.Ja=!1,t.bh=!1,B=e.g.Z.Fc(),V=B[t.type],JSON.stringify(V),t.ec||(Y=null,t.type===a.Ca?Y=e.h.get(a.ia):t.type===a.ia&&(Y=e.h.get(a.Ca)),Y&&Y.type==a.ia?e.g.vf(o,t.stream,Y.stream.isAudioMuxedInVideo):e.g.vf(o,t.stream,t.stream.codecs.includes(","))),Or(t),$n(e,t,0),X(H,0);break;case 2:if(J=ie(H),Ot(e.l,J),e.C)return H.return();if(t.Ja=!1,J.code==7001)t.Ja=!1,Or(t),$n(e,t,0),H.A(0);else if(t.type==a.Na&&e.i.ignoreTextStreamFailures)e.h.delete(a.Na),H.A(0);else return J.code==3017?D(H,gA(e,t,J),0):(t.Xd=!0,J.category==1&&t.ea&&Dl(t.ea,o),J.severity=2,D(H,t0(e,t,J),0))}})}function lx(e,t,n,o){var u,a,d,p,g,y,w,T,M,L,P;return $(function(N){switch(N.g){case 1:for(u=t.stream,p=(d=(a=u.segmentIndex)&&a.Vb(n))&&d.next().value;p&&e.O.includes(p.startTime);)p=d&&d.next().value;if(!p){N.A(0);break}if(g=p.aa,!g||Al(g,t.pb)){N.A(3);break}return t.pb=g,ce(N,4),D(N,Nl(e,t,g),6);case 6:y=N.h;var O=e.g.Z;O.H&&uf(O.H,y,0,u),e.O=[],X(N,3);break;case 4:throw w=ie(N),t.pb=null,w;case 3:if(t.La&&t.La==p){N.A(0);break}return t.La=p,ce(N,8),D(N,Nl(e,t,p),10);case 10:T=N.h,O=e.g.Z,O.H&&uf(O.H,T,0,u),e.O.push(p.startTime),X(N,9);break;case 8:throw M=ie(N),t.La=null,M;case 9:if(L=Math.max.apply(Math,[0].concat(le(e.O))),P=e.g.Hc(),P+o>L)return D(N,lx(e,t,p.startTime,o),0);N.A(0)}})}function gA(e,t,n){var o,u,a,d;return $(function(p){if(p.g==1){if(o=Array.from(e.h.values()),o.some(function(g){return g!=t&&g.bh}))return p.A(2);if(u=e.i.maxDisabledTime===0&&n.code==1011?1:e.i.maxDisabledTime,e.g.disableStream(t.stream,u))return p.return();if(e.i.avoidEvictionOnQuotaExceededError)return $n(e,t,4),p.return();if(a=Math.round(100*e.F),a>20)e.F-=.2;else if(a>4)e.F-=.04;else return t.Xd=!0,e.C=!0,e.g.onError(n),p.return();return t.bh=!0,d=e.g.Hc(),D(p,Qp(e,t,d),2)}$n(e,t,4),te(p)})}function mA(e,t,n,o){var u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V;return $(function(Y){switch(Y.g){case 1:if(u=cn,a=t.La==null,d=[],p=Math.max(0,Math.max(n.appendWindowStart,e.ba)-.1),g=Math.min(n.appendWindowEnd,e.$)+.1,y=n.codecs||t.stream.codecs,w=eo(y),T=ci(n.mimeType||t.stream.mimeType),M=n.timestampOffset,M==t.jf&&p==t.nc&&g==t.mc&&w==t.gf&&T==t.hf){Y.A(2);break}if(L=t.gf&&t.hf&&zk(e.g.Z,t.type,T,y,rc(e)),!L){Y.A(3);break}if(P=null,t.type===u.Ca?P=e.h.get(u.ia):t.type===u.ia&&(P=e.h.get(u.Ca)),!P){Y.A(3);break}return D(Y,nc(P).catch(function(){}),5);case 5:P.pb=null,P.nc=null,P.mc=null,Yp(e,P);case 3:return D(Y,ax(e,t,M,p,g,n,w,T),2);case 2:return Al(n.aa,t.pb)||(t.pb=n.aa,n.l&&n.aa&&(N=Nl(e,t,n.aa),O=function(){var J,H,z,Q,ee,se,fe,ne,xe,ye,ae;return $(function(he){switch(he.g){case 1:return ce(he,2),D(he,N,4);case 4:return J=he.h,Ot(e.l),H=null,z=new Map,Q={projection:null,hfov:null},t.stream&&(ee=t.stream.videoLayout)&&(se=ee.split("/"),se.includes("PROJ-RECT")?Q.projection="rect":se.includes("PROJ-EQUI")?Q.projection="equi":se.includes("PROJ-HEQU")?Q.projection="hequ":se.includes("PROJ-PRIM")?Q.projection="prim":se.includes("PROJ-AIV")&&(Q.projection="hequ")),fe=new Lt,fe.box("moov",ot).box("trak",ot).box("mdia",ot).T("mdhd",function(Te){H=Ff(Te.reader,Te.version).timescale}).box("hdlr",function(Te){switch(Te=Te.reader,Te.skip(8),Te.Yc()){case"soun":z.set(u.ia,H);break;case"vide":z.set(u.Ca,H)}H=null}),t.type!==u.Ca||Q.projection||fe.box("minf",ot).box("stbl",ot).T("stsd",_r).box("encv",di).box("avc1",di).box("avc3",di).box("hev1",di).box("hvc1",di).box("dvav",di).box("dva1",di).box("dvh1",di).box("dvhe",di).box("dvc1",di).box("dvi1",di).box("vexu",ot).box("proj",ot).T("prji",function(Te){Te=Te.reader.Yc(),Q.projection=Te}).box("hfov",function(Te){Te=Te.reader.U()/1e3,Q.hfov=Te}),fe.parse(J,!0,!0),t.type===u.Ca&&yA(e,Q),z.has(t.type)?n.aa.timescale=z.get(t.type):H!=null&&(n.aa.timescale=H),ne=t.stream.segmentIndex,ne instanceof qt&&(xe=Kk(ne,n.startTime)),ye=t.stream.closedCaptions&&t.stream.closedCaptions.size>0,D(he,e.g.Ph(t.type,J),5);case 5:return D(he,Wf(e.g.Z,t.type,J,null,t.stream,ye,t.bd,o,!1,!1,xe),6);case 6:X(he,0);break;case 2:throw ae=ie(he),t.pb=null,ae}})},F=n.startTime,a&&(B=Qo(e.g.Z,t.type),B!=null&&(F=B)),e.g.Dk(F,n.aa),d.push(O()))),V=t.La?t.La.i:-1,n.i!=V&&d.push(Ok(e.g.Z,t.type,n.startTime)),D(Y,Promise.all(d),0)}})}function ax(e,t,n,o,u,a,d,p){var g,y,w,T,M;return $(function(L){switch(L.g){case 1:if(g=cn,y=rc(e),ce(L,2),t.nc=o,t.mc=u,d&&(t.gf=d),p&&(t.hf=p),t.jf=n,w=e.j.sequenceMode||e.j.type=="HLS",T=null,t.type===g.Ca?T=e.h.get(g.ia):t.type===g.ia&&(T=e.h.get(g.Ca)),!(T&&T.stream&&T.stream.isAudioMuxedInVideo)){L.A(4);break}return D(L,Ev(e.g.Z,T.type,n,o,u,w,T.stream.mimeType,T.stream.codecs,y),4);case 4:return D(L,Ev(e.g.Z,t.type,n,o,u,w,a.mimeType||t.stream.mimeType,a.codecs||t.stream.codecs,y),6);case 6:X(L,0);break;case 2:throw M=ie(L),t.nc=null,t.mc=null,t.gf=null,t.hf=null,t.jf=null,M}})}function Jp(e,t,n,o,u,a,d,p){d=d===void 0?!1:d,p=p===void 0?!1:p;var g,y,w,T;return $(function(M){switch(M.g){case 1:return g=o.closedCaptions&&o.closedCaptions.size>0,e.i.shouldFixTimestampOffset&&(y=o.mimeType=="video/mp4"||o.mimeType=="audio/mp4",w=null,u.aa&&(w=u.aa.timescale),y&&w&&o.type==="video"&&e.j.type=="DASH"&&new Lt().box("moof",ot).box("traf",ot).T("tfdt",function(L){var P,N,O,F,B,V;return $(function(Y){return P=Bf(L.reader,L.version),N=P.baseMediaDecodeTime,N?(O=-N/w,F=Number(t.jf)||0,F<O?(B=t.nc,V=t.mc,D(Y,ax(e,t,O,B,V,u),0)):Y.A(0)):Y.return()})}).parse(a,!1,d)),D(M,Qp(e,t,n),2);case 2:return Ot(e.l),T=t.bd,t.bd=!1,D(M,e.g.Ph(t.type,a),3);case 3:return D(M,Wf(e.g.Z,t.type,a,u,o,g,T,p,d),4);case 4:Ot(e.l),te(M)}})}function Qp(e,t,n){var o,u,a,d,p,g,y,w,T;return $(function(M){if(M.g==1)return o=t.stream.segmentIndex,o instanceof qt&&(o.Ya(e.j.presentationTimeline.Ib()),u=[],Wk(o,function(L){u.push(L.Se())})),a=Math.max(e.i.bufferBehind*e.F,e.j.presentationTimeline.h),d=Pp(e.g.Z,t.type),d==null?(e.H==t&&(e.H=null),M.return()):(p=n-d,g=e.i.evictionGoal,y=e.j.presentationTimeline.Xb(),w=e.j.presentationTimeline.Hb(),T=p-a,w-y>g&&(T=Math.max(p-a,y-g-d)),T<=g?M.return():D(M,e.g.Z.remove(t.type,d,d+T,u),2));if(M.g!=4)return Ot(e.l),e.H?D(M,Qp(e,e.H,n),4):M.A(0);Ot(e.l),te(M)})}function Zp(e){return e&&e.type==lt&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Nl(e,t,n,o){var u,a,d,p,g;return $(function(y){switch(y.g){case 1:if(u=n.Yb())return y.return(u);if(a=null,t.ea){var w=t.ea,T=w.h;n instanceof ni&&(T=w.j),T.has(n)?(w=T.get(n),o&&(w.xh=o),a=w.ie):a=null}return a||(a=tc(n,t.stream,o||null,e.i.retryParameters,e.g.tc)),d=0,t.ua&&(d=t.ua.h),t.Ua=a,D(y,a.promise,2);case 2:if(p=y.h,t.Ua=null,g=p.data,!n.aesKey){y.A(3);break}return D(y,Kp(g,n.aesKey,d),4);case 4:g=y.h;case 3:return y.return(g)}})}function tc(e,t,n,o,u,a){a=a===void 0?!1:a;var d=e instanceof Ve?e:void 0,p=d?1:0;return e=Ol(e.P(),e.startByte,e.endByte,o,n),e.contentType=t.type,u.request(Di,e,{type:p,stream:t,segment:d,isPreload:a})}function e0(e,t,n,o){var u,a;return $(function(d){if(d.g==1)return t.ec=!1,t.Jd=!1,t.ld=0,t.Ub=!0,t.La=null,t.ua=null,t.ea&&!e.m.has(t.stream)&&or(t.ea),o?(u=e.g.Hc(),a=e.g.Z.getDuration(),D(d,e.g.Z.remove(t.type,u+o,a),3)):D(d,Av(e.g.Z,t.type),4);if(d.g!=3)return Ot(e.l),n?D(d,e.g.Z.flush(t.type),3):d.A(3);Ot(e.l),t.Ub=!1,t.endOfStream=!1,t.Ja||t.sb||$n(e,t,0),te(d)})}function $n(e,t,n){var o=t.type;(o!=lt||e.h.has(o))&&(t.sb=new pl(function(){var u;return $(function(a){if(a.g==1)return ce(a,2),D(a,dA(e,t),4);if(a.g!=2)return X(a,0);u=ie(a),e.g&&e.g.onError(u),te(a)})}).ka(n))}function Or(e){e.sb!=null&&(e.sb.stop(),e.sb=null)}function nc(e){return $(function(t){return e.Ua?D(t,e.Ua.abort(),0):t.A(0)})}function t0(e,t,n){var o;return $(function(u){if(u.g==1)return n.code==3024?(t.Ja=!1,Or(t),$n(e,t,0),u.return()):D(u,R1(e.X),2);if(Ot(e.l),n.category===1&&n.code!=1003){if(t.Mc)return rx(e,!1),u.return();o=e.i.maxDisabledTime===0&&n.code==1011?1:e.i.maxDisabledTime,n.handled=e.g.disableStream(t.stream,o),n.handled&&(n.severity=1)}(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.i.failureCallback(n),te(u)})}function ic(e,t){t=t===void 0?!1:t;var n,o,u,a,d,p;return $(function(g){if(g.g==1){if(n=Date.now()/1e3,o=e.i.minTimeBetweenRecoveries,!t){if(!e.i.allowMediaSourceRecoveries||n-e.R<o)return g.return(!1);e.R=n}return u=cn,(a=e.h.get(u.ia))&&(Or(a),a.Ua&&(a.Ua.abort(),a.Ua=null),a.pb=null,a.nc=null,a.mc=null,a.Ja=!1,a.ec=!1,a.ld=0,a.Jd=!1,a.Ub=!1,a.ua&&a.ua.fh()),(d=e.h.get(u.Ca))&&(Or(d),d.Ua&&(d.Ua.abort(),d.Ua=null),d.pb=null,d.nc=null,d.mc=null,d.Ja=!1,d.ec=!1,d.ld=0,d.Jd=!1,d.Ub=!1,d.ua&&d.ua.fh()),p=e.g.video.paused,D(g,Rv(e.g.Z,rc(e)),2)}return!d||d.Ub||d.Ja||d.sb||$n(e,d,0),!a||a.Ub||a.Ja||a.sb||$n(e,a,0),p||e.g.video.play(),g.return(!0)})}function yA(e,t){if(e.S.projection!=t.projection||e.S.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Ie("spatialvideoinfo",n)}else n=new Ie("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.S=t}}function Ul(e){if(e.i.crossBoundaryStrategy!=="keep")return!0;var t=Me();if(!bs()||!t.Pc()){t=R(e.h.keys());for(var n=t.next();!n.done;n=t.next())if(n=e.h.get(n.value),n.type!==cn.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1)return!0}else if(!t.Jf()){for(t=R(e.h.keys()),n=t.next();!n.done;n=t.next())if(n=e.h.get(n.value),n.type!==cn.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1){for(e=new Set,t=R(n.fullMimeTypes),n=t.next();!n.done;n=t.next())e.add(al(n.value));return e.size>1}}return!1}function fx(e){e.G.Qa(),Ul(e)&&(e.G.D(e.g.video,"waiting",function(){return n0(e)}),e.G.D(e.g.video,"timeupdate",function(){return n0(e)}))}function n0(e){if(Ul(e)){e.K.stop();var t=e.g.Hc(),n=e.h.get("video")||e.h.get("audio");n&&(n=n.pb)&&n.g!==null&&(t=n.g-t,t<0||t>1||(e.I=n.g+.1,e.K.ka(t)))}}function vA(e,t,n){if(t.type===lt)return!1;var o=t.pb;if(!o)return!1;var u=n.aa;if(n=o.g!==u.g,e.i.crossBoundaryStrategy==="reset_to_encrypted"&&(o.encrypted||u.encrypted||(n=!1),o.encrypted&&(e.i.crossBoundaryStrategy="keep")),e.i.crossBoundaryStrategy==="RESET_ON_ENCRYPTION_CHANGE"&&o.encrypted==u.encrypted&&(n=!1),e.i.crossBoundaryStrategy==="keep"&&o.mimeType&&u.mimeType){var a=Ln(ti(o.mimeType)),d=Ln(ti(o.mimeType));o.mimeType==u.mimeType&&a==d&&(n=!1)}return n&&(e.J||t.bd)&&(e.J=!1,ic(e,!0).then(function(){var p=new Map().set("oldEncrypted",o.encrypted).set("newEncrypted",u.encrypted);e.g.onEvent(new Ie("boundarycrossed",p))})),n}function rc(e,t){function n(a){if(a.fullMimeTypes&&a.fullMimeTypes.size>1&&e.h.has(a.type)){var d=e.h.get(a.type),p=Qo(e.g.Z,d.type),g=e.g.Hc();(d=ux(e,d,g,p))&&d.codecs&&d.mimeType&&(a.codecs=d.codecs,a.mimeType=d.mimeType)}}t=t===void 0?!1:t;var o=new Map,u=e.o.audio;return u&&(n(u),o.set("audio",u)),(u=e.o.video)&&(n(u),o.set("video",u)),t&&e.B&&o.set(lt,e.B),o}function oc(){}function i0(e,t,n,o,u){var a=u in o,d=a?n.constructor==Object&&Object.keys(o).length==0:n.constructor==Object&&Object.keys(n).length==0,p=a||d,g=!0,y;for(y in t){var w=u+"."+y,T=a?o[u]:n[y];p||y in n?t[y]===void 0?T===void 0||p?delete e[y]:e[y]=Wi(T):d?e[y]=t[y]:T.constructor==Object&&t[y]&&t[y].constructor==Object?(e[y]||(e[y]=Wi(T)),w=i0(e[y],t[y],T,o,w),g=g&&w):typeof t[y]!=typeof T||t[y]==null||typeof t[y]!="function"&&t[y].constructor!=T.constructor?(Rn("Invalid config, wrong type for "+w),g=!1):typeof n[y]=="function"&&n[y].length!=t[y].length?(st("Unexpected number of arguments for "+w),e[y]=t[y]):e[y]=Array.isArray(e[y])?t[y].slice():t[y]:(Rn("Invalid config, unrecognized key "+w),g=!1)}return g}function sc(e,t){for(var n={},o=n,u=0,a=0;u=e.indexOf(".",u),!(u<0);)(u==0||e[u-1]!="\\")&&(a=e.substring(a,u).replace(/\\\./g,"."),o[a]={},o=o[a],a=u+1),u+=1;return o[e.substring(a).replace(/\\\./g,".")]=t,n}function Qs(e,t){return e&&t}function cx(e,t){function n(a){for(var d=R(Object.keys(a)),p=d.next();!p.done;p=d.next())if(p=p.value,!(a[p]instanceof HTMLElement))if(u(a[p])&&Object.keys(a[p]).length===0)delete a[p];else{var g=a[p];Array.isArray(g)&&g.length===0||typeof a[p]=="function"?delete a[p]:u(a[p])&&(n(a[p]),Object.keys(a[p]).length===0&&delete a[p])}}function o(a,d){return Object.keys(a).reduce(function(p,g){var y=a[g];return d.hasOwnProperty(g)?y instanceof HTMLElement&&d[g]instanceof HTMLElement?y.isEqualNode(d[g])||(p[g]=y):u(y)&&u(d[g])?(y=o(y,d[g]),(Object.keys(y).length>0||!u(y))&&(p[g]=y)):Array.isArray(y)&&Array.isArray(d[g])?Je(y,d[g])||(p[g]=y):Number.isNaN(y)&&Number.isNaN(d[g])||y!==d[g]&&(p[g]=y):p[g]=y,p},{})}function u(a){return a&&typeof a=="object"&&!Array.isArray(a)}return e=o(e,t),n(e),e}be("shaka.util.ConfigUtils",oc),oc.getDifferenceFromConfigObjects=cx,oc.convertToConfigObject=sc,oc.mergeConfigObjects=i0,be("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2});function ii(){}function dx(e){return e=fr(e),new Qt(e).Eb}function Bl(e,t,n){function o(p){Zn(a).setUint32(d,p.byteLength,!0),d+=4,a.set(et(p),d),d+=p.byteLength}if(!n||!n.byteLength)throw new q(2,6,6015);var u;typeof t=="string"?u=Vh(t,!0):u=t,e=fr(e),e=Vh(e,!0);var a=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),d=0;return o(e),o(u),o(n),a}function r0(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=fr(e).split("skd://").pop(),Bl(e,n,t))}function uc(e,t){e===2&&(e=t.drmInfo)&&Ef(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}be("shaka.drm.FairPlay",ii),ii.commonFairPlayResponse=function(e,t){if(e===2&&(e=t.originalRequest.drmInfo)&&Ef(e.keySystem)){try{var n=Ht(t.data)}catch{return}if(e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0),!e)try{var o=JSON.parse(n);o.ckc&&(n=o.ckc,e=!0),o.CkcMessage&&(n=o.CkcMessage,e=!0),o.License&&(n=o.License,e=!0)}catch{}e&&(t.data=_i(Li(n)))}},ii.muxFairPlayRequest=function(e,t){uc(e,t)},ii.expressplayFairPlayRequest=function(e,t){if(e===2){var n=t.drmInfo;n&&Ef(n.keySystem)&&uc(e,t)}},ii.conaxFairPlayRequest=function(e,t){uc(e,t)},ii.ezdrmFairPlayRequest=function(e,t){uc(e,t)},ii.verimatrixFairPlayRequest=function(e,t){e===2&&(e=t.drmInfo)&&Ef(e.keySystem)&&(e=et(t.body),e=Sr(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Xi("spc="+e))},ii.muxInitDataTransform=function(e,t,n){return r0(e,t,n)},ii.expressplayInitDataTransform=function(e,t,n){return r0(e,t,n)},ii.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=fr(e).split("skd://").pop().split("?").shift(),n=f.atob(n);var o=new ArrayBuffer(n.length*2);o=By(o);for(var u=0,a=n.length;u<a;u++)o[u]=n.charCodeAt(u);return Bl(e,o,t)},ii.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=fr(e).split(";").pop(),Bl(e,n,t))},ii.verimatrixInitDataTransform=function(e,t,n){return r0(e,t,n)},ii.initDataTransform=Bl,ii.defaultGetContentId=dx,ii.isFairPlaySupported=function(){var e;return $(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ce(t,2),D(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(ie(t),t.return(!1))})};function lc(e,t,n){for(n=n===void 0?!0:n,this.h=e,this.g=new Set([e]),t=t||[],e=R(t),t=e.next();!t.done;t=e.next())this.add(t.value,n)}lc.prototype.add=function(e,t){var n=this.h;t=t===void 0?!0:t;var o;if(!(o=!!n.audio!=!!e.audio||!!n.video!=!!e.video||n.language!=e.language)&&(o=n.audio&&e.audio)){o=n.audio;var u=e.audio;o=!(!((!o.channelsCount||!u.channelsCount||o.channelsCount>2||u.channelsCount>2)&&o.channelsCount!=u.channelsCount||o.spatialAudio!==u.spatialAudio||t&&!hx(o,u))&&px(o.roles,u.roles)&&o.groupId===u.groupId)}return!o&&(o=n.video&&e.video)&&(n=n.video,o=e.video,o=!((!t||hx(n,o))&&px(n.roles,o.roles))),o?!1:(this.g.add(e),!0)},lc.prototype.values=function(){return this.g.values()};function hx(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(o){return eo(o)}),t=t.codecs.split(",").map(function(o){return eo(o)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function px(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=R(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}be("shaka.media.AdaptationSet",lc);function ac(){this.g=null}ac.prototype.configure=function(e){this.g=e},ac.prototype.getConfiguration=function(){return this.g},ac.prototype.create=function(e){var t;if(this.g.language){var n=xA(e,this.g.language);n.length&&(t=n)}t||(t=e.filter(function(a){return a.primary}),t=t.length?t:e),e=wA(t,this.g.role),e.length&&(t=e),e=SA(t,this.g.videoRole),e.length&&(t=e),this.g.videoLayout&&(e=AA(t,this.g.videoLayout),e.length&&(t=e)),this.g.hdrLevel&&(e=kA(t,this.g.hdrLevel),e.length&&(t=e));var o=[this.g.channelCount,this.g.preferredAudioChannelCount];if(e=o.filter(function(a,d){return a&&o.indexOf(a)===d}),e.length){for(e=R(e),n=e.next();!n.done;n=e.next())if(n=bA(t,n.value),n.length){t=n;break}}this.g.audioLabel&&(e=TA(t,this.g.audioLabel),e.length&&(t=e)),this.g.videoLabel&&(e=CA(t,this.g.videoLabel),e.length&&(t=e)),e=EA(t,this.g.spatialAudio),e.length&&(t=e);var u=[this.g.audioCodec,this.g.activeAudioCodec].concat(le(this.g.preferredAudioCodecs));if(e=u.filter(function(a,d){return a&&u.indexOf(a)===d}),e.length){for(e=R(e),n=e.next();!n.done;n=e.next())if(n=IA(t,n.value),n.length){t=n;break}}return new lc(t[0],t,!(this.g.codecSwitchingStrategy=="smooth"&&bs()))};function xA(e,t){t=St(t);var n=wf(t,e.map(function(o){return ap(o)}));return n?e.filter(function(o){return n==ap(o)}):[]}function wA(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function SA(e,t){return e.filter(function(n){return n.video?t?n.video.roles.includes(t):n.video.roles.length==0:!1})}function TA(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function CA(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function bA(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount>t)}).sort(function(n,o){return n.audio||o.audio?n.audio?o.audio?(o.audio.channelsCount||0)-(n.audio.channelsCount||0):1:-1:0})}function kA(e,t){if(t=="AUTO"){var n=e.some(function(o){return!!(o.video&&o.video.hdr&&o.video.hdr=="HLG")});t=Me().sd(n)}return e.filter(function(o){return!(o.video&&o.video.hdr&&o.video.hdr!=t)})}function AA(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function EA(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function IA(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function fc(){}function Zs(){var e=1/0,t=Me();navigator.connection&&navigator.connection.saveData&&(e=360);var n={retryParameters:Yi(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(p,g,y){return f.shakaMediaKeysPolyfill==="apple"&&g=="skd"&&(g=y.serverCertificate,y=dx(p),p=Bl(p,y,g)),p},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},o="reload";bs()&&t.Pc()&&(o="smooth");var u={retryParameters:Yi(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,enableAudioGroups:!0,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:cc,manifestPreprocessorTXml:dc,sequenceMode:!1,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:t.fd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:cc,manifestPreprocessorTXml:dc,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},a={trackSelectionCallback:function(p){return $(function(g){return g.return(p)})},downloadSizeCallback:function(p){var g;return $(function(y){return y.g==1?navigator.storage&&navigator.storage.estimate?D(y,navigator.storage.estimate(),3):y.return(!0):(g=y.h,y.return(g.usage+p<g.quota*.95))})},progressCallback:function(p,g){return Qs([p,g])},usePersistentLicense:!0,numberOfParallelDownloads:5},d={drm:n,manifest:u,streaming:{retryParameters:Yi(),failureCallback:function(p){return Qs([p])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!0,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:o,addExtraFeaturesToSourceBuffer:function(p){return Qs([p],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(p,g){return Qs([p,g])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:a,abrFactory:function(){return new Yt},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(ac,[null].concat(le(ft.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:5,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredAudioRole:"",preferredVideoRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1,targets:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:1/0,preloadPrevItem:!0,repeatMode:0}};return a.trackSelectionCallback=function(p){return $(function(g){return g.return(MA(p,d.preferredAudioLanguage,d.preferredVideoHdrLevel))})},t.Wa(d)}function gx(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function Nr(e,t,n){var o={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return i0(e,t,n||Zs(),o,"")}function MA(e,t,n){var o=n;o=="AUTO"&&(n=e.some(function(p){return!!(p.hdr&&p.hdr=="HLG")}),o=Me().sd(n));var u=e.filter(function(p){return!(p.type!="variant"||p.hdr&&p.hdr!=o)});n=[];var a=wf(t,u.map(function(p){return p.language}));a&&(n=u.filter(function(p){return St(p.language)==a})),n.length==0&&(n=u.filter(function(p){return p.primary})),n.length==0&&(u.map(function(p){return p.language}),n=u);var d=n.filter(function(p){return p.height&&p.height<=480});for(d.length&&(d.sort(function(p,g){return g.height-p.height}),n=d.filter(function(p){return p.height==d[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(p,g){return p.bandwidth-g.bandwidth}),t.push(n[u])),e=R(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=lt&&n.type!="image"||t.push(n);return t}function cc(e){return Qs([e],e)}function dc(e){return Qs([e],e)}be("shaka.util.PlayerConfiguration",fc),fc.mergeConfigObjects=Nr,fc.createDefaultForLL=gx,fc.createDefault=Zs;function RA(){this.g=null,this.h=[]}function o0(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=R(e.h);for(var o=e.next();!o.done;o=e.next())o=o.value,n+=o.state==t?o.duration:0;return n}function _A(e){function t(a){return{timestamp:a.timestamp,state:a.state,duration:a.duration}}for(var n=[],o=R(e.h),u=o.next();!u.done;u=o.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function LA(){this.i=this.h=null,this.g=[]}function s0(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function hc(){this.C=this.X=NaN,this.l="",this.j=this.ni=this.u=this.B=this.K=this.F=this.o=this.m=this.J=this.G=this.i=this.S=this.V=this.N=this.O=this.R=NaN,this.M=0,this.H=this.I=NaN,this.g=new RA,this.h=new LA}function PA(e,t,n){e.R=t,e.O=n}function mx(e,t,n){e.X=t,e.C=n}function DA(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}function yx(e,t){e.j=isNaN(e.j)?t:e.j+t}function OA(e){var t=e.X,n=e.C,o=e.l,u=e.B,a=e.O,d=e.R,p=e.N,g=e.V,y=e.S,w=e.u,T=e.i,M=e.G,L=e.J,P=e.m,N=o0(e.g,"playing"),O=o0(e.g,"paused"),F=o0(e.g,"buffering"),B=e.o,V=e.F,Y=e.K,J=e.ni,H=e.j,z=e.M,Q=e.I,ee=e.H,se=_A(e.g),fe=[];e=R(e.h.g);for(var ne=e.next();!ne.done;ne=e.next())ne=ne.value,fe.push({timestamp:ne.timestamp,id:ne.id,type:ne.type,fromAdaptation:ne.fromAdaptation,bandwidth:ne.bandwidth});return{width:t,height:n,currentCodecs:o,streamBandwidth:u,decodedFrames:a,droppedFrames:d,corruptedFrames:p,stallsDetected:g,gapsJumped:y,estimatedBandwidth:w,completionPercent:T,loadLatency:M,manifestTimeSeconds:L,drmTimeSeconds:P,playTime:N,pauseTime:O,bufferingTime:F,licenseTime:B,liveLatency:V,maxSegmentDuration:Y,manifestSizeBytes:J,bytesDownloaded:H,nonFatalErrorCount:z,manifestPeriodCount:Q,manifestGapCount:ee,stateHistory:se,switchHistory:fe}}function Ni(e,t,n,o){Tt.call(this),this.N=e,this.V=t,this.Da=o.networkingEngine,this.m=n,this.C=null,this.ya=0,this.Sa=o.md,this.G=o.wk,this.Ta=o.xk,this.g=o.config,this.l=this.H=this.h=null,this.oa=!1,this.I=o.Ik,this.wa=!1,this.i=null,this.ba=!1,this.u=null,this.M=new Map,this.xa=!1,this.Ga=o.Hk,this.X=new hc,this.ma=new _t,this.B=new _t,this.O=null,this.j=!1,this.$=o.jj,this.S=this.o=null,this.R=!1,this.K=[],this.J=[],this.F=!0}U(Ni,Tt);function Fl(e,t,n){(e=t?e.J:e.K)?e.push(n):n()}function NA(e){if(e.J)for(var t=R(e.J),n=t.next();!n.done;n=t.next())n=n.value,n();e.J=null}function vx(e,t){if(e.O=t,e.R=!0,e.K){t=R(e.K);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.K=null}m=Ni.prototype,m.getStartTime=function(){return this.m},m.rd=function(){return this.N},m.Hg=function(){return this.h};function UA(e){return e.wa=!0,e.I}m.getStats=function(){return this.X};function BA(e){return e.ba=!0,e.i}m.Sj=function(){return this.o?zo(this.o):null},m.Rj=function(){return this.S?Vo(this.S):null};function FA(e){return e.xa=!0,e.M}m.start=function(){var e=this;(function(){var t;return $(function(n){switch(n.g){case 1:return D(n,Promise.resolve(),2);case 2:return ce(n,3),D(n,jA(e),5);case 5:if(Zo(e),f.shakaMediaKeysPolyfill==="webkit"){n.A(6);break}return D(n,xx(e),7);case 7:Zo(e);case 6:if(!e.$){n.A(8);break}return D(n,zA(e),9);case 9:Zo(e);case 8:if(!e.$||!e.i){n.A(10);break}return D(n,H4(e.i),11);case 11:Zo(e);case 10:e.B.resolve(),X(n,0);break;case 3:t=ie(n),t instanceof q&&(t.code==7001||t.code==7003)||e.B.reject(t),te(n)}})})()},m.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):Tt.prototype.dispatchEvent.call(this,e)},m.onError=function(e){e.severity===2&&(this.B.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Ie("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function Zo(e){if(e.j)throw new q(2,7,7003)}function u0(e,t){e.dispatchEvent(new Ie("onstatechange",new Map().set("state",t)))}function jA(e){var t,n,o,u,a,d;return $(function(p){switch(p.g){case 1:if(u0(e,"manifest-parser"),e.l||(e.H=sv(e.N,e.V),e.l=e.H(),e.l.configure(e.g.manifest,function(){return e.F})),t=Date.now()/1e3,u0(e,"manifest"),e.h){p.A(2);break}return D(p,e.l.start(e.N,e.Ta),3);case 3:return e.h=p.h,D(p,$A(e),2);case 2:return e.ma.resolve(),n=new Ie("manifestparsed",void 0),D(p,Promise.resolve(),5);case 5:if(e.dispatchEvent(n),e.h.variants.length==0)throw new q(2,4,4036);if(VA(e.h),o=tv(e.G,e.h),!o){p.A(6);break}return u=new Ie("trackschanged",void 0),D(p,Promise.resolve(),7);case 7:Zo(e),e.dispatchEvent(u);case 6:a=Date.now()/1e3,d=a-t,e.X.J=d,te(p)}})}function xx(e,t){var n,o,u,a;return $(function(d){switch(d.g){case 1:return!e.h||e.i?d.return():(u0(e,"drm-engine"),e.ya=Date.now()/1e3,e.i=e.Sa(),e.G.h=e.i,e.i.configure(e.g.drm,function(){return e.F}),n=bf(e.h.variants),o=!0,e.h&&e.h.presentationTimeline&&(o=e.h.presentationTimeline.W()),D(d,z1(e.i,n,e.h.offlineSessionIds,o),2));case 2:if(Zo(e),!t){d.A(3);break}return D(d,e.i.fc(t),4);case 4:Zo(e);case 3:return D(d,ev(e.G,e.h),5);case 5:if(u=d.h,!u){d.A(0);break}return a=new Ie("trackschanged",void 0),D(d,Promise.resolve(),7);case 7:e.dispatchEvent(a),te(d)}})}m.configure=function(e,t){e=sc(e,t),Nr(this.g,e)},m.getConfiguration=function(){return Wi(this.g)};function $A(e){var t,n,o,u,a;return $(function(d){if(e.C||(e.C=e.g.adaptationSetCriteriaFactory(),e.C.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredAudioRole,videoRole:e.g.preferredVideoRole,channelCount:e.g.preferredAudioChannelCount,hdrLevel:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,audioLabel:e.g.preferredAudioLabel,videoLabel:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),e.h.variants.length!=1&&e.h.type!="HLS"||(t=wx(e),!t))return d.A(0);for(n=[],o=R([t.video,t.audio]),u=o.next();!u.done;u=o.next())(a=u.value)&&!a.segmentIndex&&n.push(a.createSegmentIndex());return n.length>0?D(d,Promise.all(n),0):d.A(0)})}function zA(e){var t,n,o,u,a;return $(function(d){return!e.o&&(t=wx(e))&&(e.o=t),e.o?(n=e.h.presentationTimeline.W(),o=[],u=e.o,u.video&&o.push(l0(e,u.video,n)),u.audio&&o.push(l0(e,u.audio,n)),(a=Ls(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&b1(u.audio,a,e.g)&&(o.push(l0(e,a,n)),e.S=a),D(d,Promise.all(o),0)):d.A(0)})}function wx(e){if(!e.u){var t=e.g.abrFactory;e.u=t(),e.u.configure(e.g.abr)}return t=bf(e.h.variants),t=e.C.create(t),e.u.setVariants(Array.from(t.values())),e.u.chooseVariant(!0)}function l0(e,t,n){var o,u,a,d,p;return $(function(g){return g.g==1?(o=e.g.streaming.segmentPrefetchLimit||2,u=new Qf(o,t,function(y,w,T){return tc(y,w,T||null,e.g.streaming.retryParameters,e.Da,e.F)},!1),e.M.set(t.id,u),t.segmentIndex?g.A(2):D(g,t.createSegmentIndex(),2)):(a=typeof e.m=="number"?e.m:0,d=t.segmentIndex.Vb(a),p=null,d&&(p=d.current(),p||(p=d.next().value)),p||(p=rr(t.segmentIndex)),p?n?p.aa?D(g,Zv(u,p.aa),0):g.A(0):D(g,Pl(u,p.startTime),0):g.A(0))})}m.ol=function(){return this.B},m.destroy=function(){var e=this,t,n,o;return $(function(u){if(u.g==1)return e.j=!0,!e.l||e.oa?u.A(2):D(u,e.l.stop(),2);if(u.g!=4)return e.u&&e.u.release(),e.I&&!e.wa&&e.I.release(),!e.i||e.ba?u.A(4):D(u,e.i.destroy(),4);if(e.M.size>0&&!e.xa)for(t=R(e.M.values()),n=t.next();!n.done;n=t.next())o=n.value,or(o);te(u)})};function VA(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}be("shaka.media.PreloadManager",Ni),Ni.prototype.destroy=Ni.prototype.destroy,Ni.prototype.waitForFinish=Ni.prototype.ol,Ni.prototype.getPrefetchedTextTrack=Ni.prototype.Rj,Ni.prototype.getPrefetchedVariantTrack=Ni.prototype.Sj;function es(e,t){Tt.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{kd:null,jd:eu,Uc:function(o,u){return Ur(n,"enter",o,u)}},{kd:jl,jd:eu,Uc:function(o,u){return Ur(n,"enter",o,u)}},{kd:$l,jd:eu,Uc:function(o,u){return Ur(n,"enter",o,u)}},{kd:eu,jd:jl,Uc:function(o,u){return Ur(n,"exit",o,u)}},{kd:eu,jd:$l,Uc:function(o,u){return Ur(n,"exit",o,u)}},{kd:jl,jd:$l,Uc:function(o,u){u?Ur(n,"skip",o,u):(Ur(n,"enter",o,u),Ur(n,"exit",o,u))}},{kd:$l,jd:jl,Uc:function(o,u){return Ur(n,"skip",o,u)}}],this.h=new Le,this.h.D(this.i,"regionremove",function(o){n.g.delete(o.region)})}U(es,Tt),es.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Tt.prototype.release.call(this)},es.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=R(this.i.h.values()),o=n.next();!o.done;o=n.next()){o=o.value;var u=this.g.get(o),a=e<o.startTime?jl:e>o.endTime?$l:eu;this.g.set(o,a);for(var d=R(this.m),p=d.next();!p.done;p=d.next())p=p.value,p.kd==u&&p.jd==a&&p.Uc(o,t)}}};function Ur(e,t,n,o){t=new Ie(t,new Map([["region",n],["seeking",o]])),e.dispatchEvent(t)}var jl=1,eu=2,$l=3;function ts(e,t,n){var o,u,a,d,p,g,y;return $(function(w){switch(w.g){case 1:var T=new Qt(e).qb.split("/").pop().split(".");return o=T.length==1?"":T.pop().toLowerCase(),(u=HA.get(o))?w.return(u):(a=0,d=un([e],n),ce(w,2),d.method="HEAD",D(w,t.request(a,d).promise,4));case 4:p=w.h,u=p.headers["content-type"],X(w,3);break;case 2:if(g=ie(w),!g||g.code!=1002&&g.code!=1001){w.A(3);break}return d.method="GET",D(w,t.request(a,d).promise,6);case 6:y=w.h,u=y.headers["content-type"];case 3:return w.return(u?u.toLowerCase().split(";").shift():"")}})}var HA=new Map().set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html");/*
		 @license
		 Copyright 2013 Ali Al Dallal

		 Licensed under the MIT license.

		 Permission is hereby granted, free of charge, to any person obtaining a copy
		 of this software and associated documentation files (the "Software"), to deal
		 in the Software without restriction, including without limitation the rights
		 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
		 copies of the Software, and to permit persons to whom the Software is
		 furnished to do so, subject to the following conditions:

		 The above copyright notice and this permission notice shall be included in
		 all copies or substantial portions of the Software.

		 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
		 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
		 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
		 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
		 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
		 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
		 SOFTWARE.
		*/for(var uo={ach:"Lwo",ady:"Адыгэбзэ",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Tɕɥi",ar:"العربية","ar-AR":"العربية","ar-MA":"العربية","ar-SA":"العربية (السعودية)","ay-BO":"Aymar aru",az:"Azərbaycan dili","az-AZ":"Azərbaycan dili","be-BY":"Беларуская",bg:"Български","bg-BG":"Български",bn:"বাংলা","bn-IN":"বাংলা (ভারত)","bn-BD":"বাংলা(বাংলাদেশ)","bs-BA":"Bosanski",ca:"Català","ca-ES":"Català",cak:"Maya Kaqchikel","ck-US":"ᏣᎳᎩ (tsalagi)",cs:"Čeština","cs-CZ":"Čeština",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (Österreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbšćina",el:"Ελληνικά","el-GR":"Ελληνικά",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Español","es-AR":"Español (Argentine)","es-419":"Español (Latinoamérica)","es-CL":"Español (Chile)","es-CO":"Español (Colombia)","es-EC":"Español (Ecuador)","es-ES":"Español (España)","es-LA":"Español (Latinoamérica)","es-NI":"Español (Nicaragua)","es-MX":"Español (México)","es-US":"Español (Estados Unidos)","es-VE":"Español (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"فارسی","fa-IR":"فارسی","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Føroyskt",fr:"Français","fr-CA":"Français (Canada)","fr-FR":"Français (France)","fr-BE":"Français (Belgique)","fr-CH":"Français (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avañe'ẽ","gu-IN":"ગુજરાતી","gx-GR":"Ἑλληνική ἀρχαία",he:"עברית‏","he-IL":"עברית‏",hi:"हिन्दी","hi-IN":"हिन्दी",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbšćina",ht:"Kreyòl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"Հայերեն",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"Íslenska","is-IS":"Íslenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"日本語","ja-JP":"日本語","jv-ID":"Basa Jawa","ka-GE":"ქართული","kk-KZ":"Қазақша",km:"ភាសាខ្មែរ","km-KH":"ភាសាខ្មែរ",kab:"Taqbaylit",kn:"ಕನ್ನಡ","kn-IN":"ಕನ್ನಡ (India)",ko:"한국어","ko-KR":"한국어 (韩国)",ku:"Kurdî","ku-TR":"Kurdî",la:"Latin","la-VA":"Latin",lb:"Lëtzebuergesch","li-NL":"Lèmbörgs",lt:"Lietuvių","lt-LT":"Lietuvių",lv:"Latviešu","lv-LV":"Latviešu",mai:"मैथिली, মৈথিলী","mg-MG":"Malagasy",mk:"Македонски","mk-MK":"Македонски (Македонски)",ml:"മലയാളം","ml-IN":"മലയാളം","mn-MN":"Монгол",mr:"मराठी","mr-IN":"मराठी",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"ဗမာစကာ",nb:"Norsk (bokmål)","nb-NO":"Norsk (bokmål)",ne:"नेपाली","ne-NP":"नेपाली",nl:"Nederlands","nl-BE":"Nederlands (België)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"ଓଡ଼ିଆ",pa:"ਪੰਜਾਬੀ","pa-IN":"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",pl:"Polski","pl-PL":"Polski","ps-AF":"پښتو",pt:"Português","pt-BR":"Português (Brasil)","pt-PT":"Português (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Română","ro-RO":"Română",ru:"Русский","ru-RU":"Русский","sa-IN":"संस्कृतम्","se-NO":"Davvisámegiella","si-LK":"පළාත",sk:"Slovenčina","sk-SK":"Slovenčina (Slovakia)",sl:"Slovenščina","sl-SI":"Slovenščina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"Српски","sr-RS":"Српски (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"தமிழ்","ta-IN":"தமிழ்",te:"తెలుగు","te-IN":"తెలుగు",tg:"забо́ни тоҷикӣ́","tg-TJ":"тоҷикӣ",th:"ภาษาไทย","th-TH":"ภาษาไทย (ประเทศไทย)",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Türkçe","tr-TR":"Türkçe","tt-RU":"татарча",uk:"Українська","uk-UA":"Українська",ur:"اردو","ur-PK":"اردو",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Tiếng Việt","vi-VN":"Tiếng Việt","xh-ZA":"isiXhosa",yi:"ייִדיש","yi-DE":"ייִדיש (German)",zh:"中文","zh-HANS":"中文简体","zh-HANT":"中文繁體","zh-CN":"中文（中国）","zh-HK":"中文（香港）","zh-SG":"中文（新加坡）","zh-TW":"中文（台灣）","zu-ZA":"isiZulu"},Sx=R(Object.keys(uo)),a0=Sx.next();!a0.done;a0=Sx.next()){var Tx=a0.value;uo[Tx.toLowerCase()]=uo[Tx]}function Cx(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(d){return Cx(d,e)}).join("");if(!e.payload)return e.payload;var n=[],o=e.fontWeight>=Is,u=e.fontStyle==Ms,a=e.textDecoration.includes(Ar);return o&&n.push(["b"]),u&&n.push(["i"]),a&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),o="",(u=bx(u))&&(o+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=bx(u))&&(o+=".bg_"+t),o&&n.push(["c",o]),n.reduceRight(function(d,p){var g=R(p);return p=g.next().value,g=g.next().value,"<"+p+(g===void 0?"":g)+">"+d+"</"+p+">"},e.payload)}function bx(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&e.length>7&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function f0(e,t){var n=[];e=R(kx(e));for(var o=e.next();!o.done;o=e.next())if(o=o.value,o.isContainer)n.push.apply(n,le(f0(o.nestedCues,o)));else{var u=o.clone();u.nestedCues=[],u.payload=Cx(o,t),n.push(u)}return n}function kx(e){var t=[];e=R(e);for(var n=e.next(),o={};!n.done;o={ig:void 0},n=e.next())o.ig=n.value,t.some((function(u){return function(a){return gf(u.ig,a)}})(o))||t.push(o.ig);return t}function GA(e){function t(o){for(var u=5381,a=o.length;a;)u=u*33^o.charCodeAt(--a);return(u>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function Ax(e,t){var n=f0(t),o=[];t=e.cues?Array.from(e.cues):[],n=R(n);for(var u=n.next(),a={};!u.done;a={vd:void 0},u=n.next())a.vd=u.value,!t.some((function(d){return function(p){return p.startTime==d.vd.startTime&&p.endTime==d.vd.endTime&&p.text==d.vd.payload}})(a))&&a.vd.payload&&(u=GA(a.vd))&&o.push(u);for(t=o.slice().sort(function(d,p){return d.startTime!=p.startTime?d.startTime-p.startTime:d.endTime!=p.endTime?d.endTime-p.startTime:"line"in VTTCue.prototype?o.indexOf(p)-o.indexOf(d):o.indexOf(d)-o.indexOf(p)}),t=R(t),n=t.next();!n.done;n=t.next())e.addCue(n.value)}function c0(e,t){var n=!1;e.mode==="disabled"&&(n=!0,e.mode="hidden");for(var o=0;o<e.cues.length;){var u=e.cues[o];t(u)?e.removeCue(u):o++}n&&(e.mode="disabled")}function pn(e){var t=this;this.i=e,this.l=new Le,this.j=null,this.h=new Map,this.g=-1,this.u=!1,this.o=null,this.C=function(){t.l.Ma(t.i,"textchanged",t.m),t.l.Ma(t.j.textTracks,"change",t.B);for(var n=R(t.h.values()),o=n.next();!o.done;o=n.next())o.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){var n=new Map,o=t.i.Lc();o=R(o);for(var u=o.next();!u.done;u=o.next()){if(u=u.value,t.h.has(u.id)){var a=t.h.get(u.id);u.active||a.track.mode==="disabled"||(a.track.mode="disabled"),t.h.delete(u.id)}else{a=t.j.ownerDocument.createElement("track"),a.kind=XA(u);var d=a,p=void 0;if(u.label)p=u.label;else if(u.language)if(u.language in uo)p=uo[u.language];else{var g=xf(u.language);g in uo&&(p=uo[g]+" ("+u.language+")")}p||(p=u.originalTextId,u.language&&u.language!==u.originalTextId&&(p+=" ("+u.language+")")),d.label=p,u.language in uo&&(a.srclang=u.language),Me().Ea()==="CHROMIUM"&&(a.src="data:,WEBVTT"),a.track.mode="disabled",t.j.appendChild(a)}n.set(u.id,a),u.active&&(t.g=u.id)}for(o=R(t.h.values()),u=o.next();!u.done;u=o.next())u.value.remove();t.g>-1&&(n.has(t.g)?(o=n.get(t.g).track,o.mode==="disabled"&&(o.mode=t.u?"showing":"hidden")):t.g=-1),t.h=n},this.B=function(){if(!t.o){var n=t.j;t.o=new dt(function(){if(t.o=null,t.j===n){var o=-1,u=!1;if(t.h.has(t.g)){var a=t.h.get(t.g);a.track.mode==="showing"?(o=t.g,u=!0):a.track.mode==="hidden"&&(o=t.g)}if(!u)for(u=R(t.h),a=u.next();!a.done;a=u.next()){var d=R(a.value);if(a=d.next().value,d=d.next().value,d.track.mode==="showing"){o=a;break}else o<0&&d.track.mode==="hidden"&&(o=a)}for(u=R(t.h),a=u.next();!a.done;a=u.next())d=R(a.value),a=d.next().value,d=d.next().value,a!==o&&d.track.mode!=="disabled"&&(d.track.mode="disabled");t.g!==o&&(t.g=o,o>-1&&t.i.mh({id:o})),t.i.rh(o>-1&&t.h.get(o).track.mode==="showing")}}).ka(0)}},this.l.D(e,"loaded",function(){return t.enableTextDisplayer()}),this.enableTextDisplayer()}m=pn.prototype,m.configure=function(){},m.remove=function(e,t){if(this.i)this.h.has(this.g)&&c0(this.h.get(this.g).track,function(n){return n.startTime<t&&n.endTime>e});else return!1;return!0},m.append=function(e){this.h.has(this.g)&&Ax(this.h.get(this.g).track,e)},m.destroy=function(){return this.i&&(this.j&&this.C(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},m.isTextVisible=function(){return this.u},m.setTextVisibility=function(e){if(this.u=e,this.h.has(this.g)){var t=this.h.get(this.g).track;t.mode!=="disabled"&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&this.i.m===3)if(t=Array.from(this.i.h.textTracks).filter(function(o){return["captions","subtitles","forced"].includes(o.kind)}),e){e=null,t=R(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.mode==="showing"){e=null;break}else e||n.mode!=="hidden"||(e=n);e&&(e.mode="showing")}else for(e=R(t),t=e.next();!t.done;t=e.next())t=t.value,t.mode==="showing"&&(t.mode="hidden")},m.setTextLanguage=function(){},m.enableTextDisplayer=function(){!this.j&&this.i&&this.i.m===2&&(this.j=this.i.h,this.l.Aa(this.i,"unloading",this.C),this.l.D(this.i,"textchanged",this.m),this.l.D(this.j.textTracks,"change",this.B),this.m())};function XA(e){var t=Me();return e.forced&&t.Ea()==="WEBKIT"?"forced":e.kind==="caption"||e.roles&&e.roles.some(function(n){return n.includes("transcribes-spoken-dialog")})&&e.roles.some(function(n){return n.includes("describes-music-and-sound")})?"captions":"subtitles"}be("shaka.text.NativeTextDisplayer",pn),pn.prototype.enableTextDisplayer=pn.prototype.enableTextDisplayer,pn.prototype.setTextLanguage=pn.prototype.setTextLanguage,pn.prototype.setTextVisibility=pn.prototype.setTextVisibility,pn.prototype.isTextVisible=pn.prototype.isTextVisible,pn.prototype.destroy=pn.prototype.destroy,pn.prototype.append=pn.prototype.append,pn.prototype.remove=pn.prototype.remove,pn.prototype.configure=pn.prototype.configure;function Pn(e,t){for(yt("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,e=R(Array.from(this.h.textTracks)),t=e.next();!t.done;t=e.next())t=t.value,t.kind!=="metadata"&&t.kind!=="chapters"&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}m=Pn.prototype,m.configure=function(){},m.remove=function(e,t){return this.g?(c0(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},m.append=function(e){this.g&&Ax(this.g,e)},m.destroy=function(){return this.g&&(c0(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},m.isTextVisible=function(){return this.g?this.g.mode=="showing":!1},m.setTextVisibility=function(e){e&&!this.g&&Ex(this),this.g&&(this.g.mode=e?"showing":"hidden")},m.setTextLanguage=function(){},m.enableTextDisplayer=function(){Ex(this)};function Ex(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}be("shaka.text.SimpleTextDisplayer",Pn),Pn.prototype.enableTextDisplayer=Pn.prototype.enableTextDisplayer,Pn.prototype.setTextLanguage=Pn.prototype.setTextLanguage,Pn.prototype.setTextVisibility=Pn.prototype.setTextVisibility,Pn.prototype.isTextVisible=Pn.prototype.isTextVisible,Pn.prototype.destroy=Pn.prototype.destroy,Pn.prototype.append=Pn.prototype.append,Pn.prototype.remove=Pn.prototype.remove,Pn.prototype.configure=Pn.prototype.configure;function Dn(){}m=Dn.prototype,m.configure=function(){},m.remove=function(){},m.append=function(){},m.destroy=function(){},m.isTextVisible=function(){return!1},m.setTextVisibility=function(){},m.setTextLanguage=function(){},m.enableTextDisplayer=function(){},be("shaka.text.StubTextDisplayer",Dn),Dn.prototype.enableTextDisplayer=Dn.prototype.enableTextDisplayer,Dn.prototype.setTextLanguage=Dn.prototype.setTextLanguage,Dn.prototype.setTextVisibility=Dn.prototype.setTextVisibility,Dn.prototype.isTextVisible=Dn.prototype.isTextVisible,Dn.prototype.destroy=Dn.prototype.destroy,Dn.prototype.append=Dn.prototype.append,Dn.prototype.remove=Dn.prototype.remove,Dn.prototype.configure=Dn.prototype.configure;function On(e,t){var n=this;this.m=!1,this.h=[],this.j=e,this.o=t,this.C=this.u=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.B=new dt(function(){n.j.paused||lo(n)}),zl(this),this.l=new Map,this.i=new Le,this.i.D(document,"fullscreenchange",function(){lo(n,!0)}),this.i.D(this.j,"seeking",function(){lo(n,!0)}),this.i.D(this.j,"ratechange",function(){zl(n)}),this.i.D(this.j,"resize",function(){var o=n.j,u=o.videoWidth;o=o.videoHeight,u&&o?n.u=u/o:n.u=null}),this.F=null,"ResizeObserver"in f&&(this.F=new ResizeObserver(function(){lo(n,!0)}),this.F.observe(this.g)),this.G=new Map}m=On.prototype,m.configure=function(e){this.C=e,zl(this),lo(this,!0)},m.append=function(e){var t=[].concat(le(this.h));e=R(kx(e));for(var n=e.next(),o={};!n.done;o={jg:void 0},n=e.next())o.jg=n.value,t.some((function(u){return function(a){return gf(a,u.jg)}})(o))||this.h.push(o.jg);this.h.length&&zl(this),lo(this)},m.destroy=function(){return this.g&&(this.g.parentElement&&this.o.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.B&&(this.B.stop(),this.B=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.F&&(this.F.disconnect(),this.F=null)),Promise.resolve()},m.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(o){return o.startTime<e||o.endTime>=t}),lo(this,n>this.h.length),this.h.length||zl(this),!0},m.isTextVisible=function(){return this.m},m.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.o.appendChild(this.g),lo(this,!0)):this.g.parentElement&&this.o.removeChild(this.g)},m.setTextLanguage=function(e){e&&e!="und"?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},m.enableTextDisplayer=function(){};function zl(e){e.B&&(e.h.length?e.B.Fa((e.C?e.C.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.B.stop())}function WA(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function Ix(e,t,n,o,u){var a=!1,d=[],p=[];t=R(t);for(var g=t.next();!g.done;g=t.next()){g=g.value,u.push(g);var y=e.l.get(g),w=g.startTime<=o&&g.endTime>o,T=y?y.gj:null;y&&(d.push(y.kg),y.$c&&d.push(y.$c),w||(a=!0,e.l.delete(g),y=null)),w&&(p.push(g),y?WA(e,T)||(a=!0):(KA(e,g,u),y=e.l.get(g),T=y.gj,a=!0)),g.nestedCues.length>0&&T&&Ix(e,g.nestedCues,T,o,u),u.pop()}if(a){for(o=R(d),u=o.next();!u.done;u=o.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(p.sort(function(M,L){return M.startTime!=L.startTime?M.startTime-L.startTime:M.endTime-L.endTime}),p=R(p),o=p.next();!o.done;o=p.next())o=e.l.get(o.value),o.$c?(o.$c.contains(n)&&o.$c.removeChild(n),n.appendChild(o.$c),o.$c.appendChild(o.kg)):n.appendChild(o.kg)}}function lo(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||t!==void 0&&t){t=R(e.G.values());for(var o=t.next();!o.done;o=t.next())Il(o.value);Il(e.g),e.l.clear(),e.G.clear()}e.m&&Ix(e,e.h,e.g,n,[])}}function KA(e,t,n){var o=n.length>1,u=o?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),o=!o&&t.nestedCues.length>0;var a=document.createElement(u);if(u!="br"&&qA(e,a,t,n,o),n=null,t.region&&t.region.id){var d=t.region,p=e.u===4/3?2.5:1.9;if(n=d.id+"_"+d.width+"x"+d.height+(d.heightUnits==fi?"%":"px")+"-"+d.viewportAnchorX+"x"+d.viewportAnchorY+(d.viewportAnchorUnits==fi?"%":"px"),e.G.has(n))n=e.G.get(n);else{u=document.createElement("span");var g=d.heightUnits==fi?"%":"px",y=d.widthUnits==fi?"%":"px",w=d.viewportAnchorUnits==fi?"%":"px";u.id="shaka-text-region---"+n,u.classList.add("shaka-text-region"),u.style.position="absolute";var T=d.height,M=d.width;d.heightUnits===2&&(T=d.height*5.33,g="%"),d.widthUnits===2&&(M=d.width*p,y="%"),u.style.height=T+g,u.style.width=M+y,d.viewportAnchorUnits===2?(p=d.viewportAnchorY/75*100,g=d.viewportAnchorX/(e.u===4/3?160:210)*100,p-=d.regionAnchorY*T/100,g-=d.regionAnchorX*M/100,u.style.top=p+"%",u.style.left=g+"%"):(u.style.top=d.viewportAnchorY-d.regionAnchorY*T/100+w,u.style.left=d.viewportAnchorX-d.regionAnchorX*M/100+w),d.heightUnits!==0&&d.widthUnits!==0&&d.viewportAnchorUnits!==0&&(d=Math.max(0,Math.min(100-(parseInt(u.style.width.slice(0,-1),10)||0),parseInt(u.style.left.slice(0,-1),10)||0)),u.style.top=Math.max(0,Math.min(100-(parseInt(u.style.height.slice(0,-1),10)||0),parseInt(u.style.top.slice(0,-1),10)||0))+"%",u.style.left=d+"%"),u.style.display="flex",u.style.flexDirection="column",u.style.alignItems="center",u.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.G.set(n,u),n=u}}u=a,o&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",a.appendChild(u)),e.l.set(t,{kg:a,gj:u,$c:n})}function YA(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==yf?n:e==="left"||e==="start"&&t===ul||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===ul?"line-right":"center"}function qA(e,t,n,o,u){var a=t.style,d=n.nestedCues.length==0,p=o.length>1;a.whiteSpace="pre-wrap";var g=n.payload.replace(/\s+$/g,function(w){return" ".repeat(w.length)});if(a.webkitTextStrokeColor=n.textStrokeColor,a.webkitTextStrokeWidth=n.textStrokeWidth,a.color=n.color,a.direction=n.direction,a.opacity=n.opacity,a.paddingLeft=d0(n.linePadding,n,e.o),a.paddingRight=d0(n.linePadding,n,e.o),a.textCombineUpright=n.textCombineUpright,a.textShadow=n.textShadow,n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",n.backgroundColor&&(a.backgroundColor=n.backgroundColor),a.width="100%",a.height="100%";else{if(n.nestedCues.length)var y=t;else y=document.createElement("span"),t.appendChild(y);n.border&&(y.style.border=n.border),u||((t=JA(o,function(w){return w.backgroundColor}))?y.style.backgroundColor=t:g&&(y.style.backgroundColor="rgba(0, 0, 0, 0.8)")),g&&(y.setAttribute("translate","no"),y.textContent=g)}p&&!o[o.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(a.width="100%",a.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(a.width="100%",a.alignItems="end"),a.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),d||(a.margin="0"),a.fontFamily=n.fontFamily,a.fontWeight=n.fontWeight.toString(),a.fontStyle=n.fontStyle,a.letterSpacing=n.letterSpacing,a.fontSize=d0(n.fontSize,n,e.o,e.C?e.C.fontScaleFactor:1),o=n.line,o!=null&&(d=n.lineInterpretation,d==ll&&(d=1,p=16,e.u&&e.u<1&&(p=32),o=o<0?100+o/p*100:o/p*100),d==1&&(a.position="absolute",n.writingMode==Fo?(a.width="100%",n.lineAlign==jo?a.top=o+"%":n.lineAlign=="end"&&(a.bottom=100-o+"%")):n.writingMode=="vertical-lr"?(a.height="100%",n.lineAlign==jo?a.left=o+"%":n.lineAlign=="end"&&(a.right=100-o+"%")):(a.height="100%",n.lineAlign==jo?a.right=o+"%":n.lineAlign=="end"&&(a.left=100-o+"%")))),a.lineHeight=n.lineHeight,e=YA(n),e=="line-left"?(a.cssFloat="left",n.position!==null&&(a.position="absolute",n.writingMode==Fo?(a.left=n.position+"%",a.width="auto"):a.top=n.position+"%")):e=="line-right"?(a.cssFloat="right",n.position!==null&&(a.position="absolute",n.writingMode==Fo?(a.right=100-n.position+"%",a.width="auto"):a.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(a.position="absolute",n.writingMode==Fo?(a.left=n.position+"%",a.width="auto"):a.top=n.position+"%",n.size&&(a.transform="translateX(-50%)")),a.textAlign=n.textAlign,a.textDecoration=n.textDecoration.join(" "),a.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Fo?a.width=n.size+"%":a.height=n.size+"%")}function d0(e,t,n,o){o=o===void 0?1:o;var u=(u=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(u[1]),unit:u[2]}:null;if(!u)return e;switch(e=u.unit,o*=u.value,e){case"%":return o/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*o/t.cellResolution.rows+"px";default:return o+e}}function JA(e,t){for(var n=e.length-1;n>=0;n--){var o=t(e[n]);if(o||o===0)return o}return null}be("shaka.text.UITextDisplayer",On),On.prototype.enableTextDisplayer=On.prototype.enableTextDisplayer,On.prototype.setTextLanguage=On.prototype.setTextLanguage,On.prototype.setTextVisibility=On.prototype.setTextVisibility,On.prototype.isTextVisible=On.prototype.isTextVisible,On.prototype.remove=On.prototype.remove,On.prototype.destroy=On.prototype.destroy,On.prototype.append=On.prototype.append,On.prototype.configure=On.prototype.configure;function QA(e,t){function n(a){for(var d=a,p=R(t),g=p.next();!g.done;g=p.next())g=g.value,g.end&&g.start<a&&(d+=g.end-g.start);return a=Math.floor(d/3600),p=Math.floor(d/60%60),g=Math.floor(d%60),d=Math.floor(d*1e3%1e3),(a<10?"0":"")+a+":"+(p<10?"0":"")+p+":"+(g<10?"0":"")+g+"."+(d<100?d<10?"00":"0":"")+d}var o=f0(e);e=`WEBVTT

`,o=R(o);for(var u=o.next();!u.done;u=o.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+(function(a){var d=[];switch(a.textAlign){case"left":d.push("align:left");break;case"right":d.push("align:right");break;case pr:d.push("align:middle");break;case"start":d.push("align:start");break;case"end":d.push("align:end")}switch(a.writingMode){case"vertical-lr":d.push("vertical:lr");break;case"vertical-rl":d.push("vertical:rl")}return d.length?" "+d.join(" "):""})(u)+`
`,e+=u.payload+`

`;return e}be("shaka.text.WebVttGenerator",function(){});function h0(e,t){this.g=t,this.j=e,this.F=new Map,this.l=void 0,this.C=!1,this.J=!0,this.o=this.I=!1,this.B=this.u=void 0,this.H=0,this.K={request:!1,response:!1,event:!1},this.m={},this.i=new Le,this.G=[],this.h=null}h0.prototype.setMediaElement=function(e){this.h=e,iE(this)},h0.prototype.configure=function(e){this.g=e,rE(this)};function ZA(e){e.F.clear(),e.C=!1,e.J=!0,e.I=!1,e.o=!1,e.u=0,e.B=0,e.H=0,e.K={request:!1,response:!1,event:!1},Mx(e),e.m={},e.h=null,e.i.Qa()}function eE(e,t){e.o=t,e.o?e.l==xc?e.l=wc:e.l==Sc&&(e.l=Tc):e.l==wc?e.l=xc:e.l==Tc&&(e.l=Sc)}function tE(e,t){if(e.g&&e.g.enabled&&(Nn(e,"ps",{dd:"d"}),e.h&&e.h.autoplay)){var n=e.h.play();n&&n.then(function(){e.H=t}).catch(function(){e.H=0})}}function nE(e,t,n){try{if(!e.g.enabled)return t;var o=p0(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=gc;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=yc;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=Nx;break e}u=void 0}o.ot=u,o.su=!0;var a=Vl(o);return pc(t,a)}catch(d){return ai("CMCD_SRC_ERROR","Could not generate src CMCD data.",d),t}}function iE(e){e.i.D(e.h,"playing",function(){e.B||(e.B=Date.now()),Nn(e,"ps",{dd:"p"})}),e.i.D(e.h,"volumechange",function(){Nn(e,e.h.muted?"m":"um")}),e.i.D(e.h,"play",function(){e.u||(e.u=Date.now(),Nn(e,"ps",{dd:"s"}))}),e.i.D(e.h,"pause",function(){Nn(e,"ps",{dd:"a"})}),e.i.D(e.j,"buffering",function(){Nn(e,"ps",{dd:"w"})}),e.i.D(e.h,"seeking",function(){return Nn(e,"ps",{dd:"k"})}),e.i.D(document,"fullscreenchange",function(){Nn(e,document.fullscreenElement?"pe":"pc")});var t=e.h;(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.i.D(t,"webkitpresentationmodechanged",function(){t.webkitPresentationMode?Nn(e,t.webkitPresentationMode!=="inline"?"pe":"pc"):t.webkitSupportsFullscreen&&Nn(e,t.webkitDisplayingFullscreen?"pe":"pc")}),e.i.D(e.h,"enterpictureinpicture",function(){Nn(e,"pe")}),e.i.D(e.h,"leavepictureinpicture",function(){Nn(e,"pc")}),"documentPictureInPicture"in f&&e.i.D(f.documentPictureInPicture,"enter",function(n){Nn(e,"pe"),e.i.Aa(n.window,"pagehide",function(){Nn(e,"pc")})}),e.i.D(document,"visibilitychange",function(){document.hidden?Nn(e,"b",{bg:!0}):Nn(e,"b")}),e.i.D(e.j,"complete",function(){Nn(e,"ps",{dd:"e"})})}function rE(e){Mx(e);var t=Rx(e);t=R(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value.timeInterval,n===void 0&&(n=vE),n>=1){var o=new dt(function(){return Nn(e,xE)});o.Fa(n),e.G.push(o)}}function Mx(e){if(e.G)for(var t=R(e.G),n=t.next();!n.done;n=t.next())n.value.stop();e.G=[]}function Rx(e){return(e=e.g.targets)?e.filter(function(t){return t.mode===$x&&t.enabled}):[]}function p0(e){return e.g.sessionId||(e.g.sessionId=f.crypto.randomUUID()),{v:e.g.version,sf:e.l,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.j.getBandwidthEstimate()/1e3}}function Nn(e,t,n){if(n=n===void 0?{}:n,t=Object.assign({e:t,ts:Date.now()},n),t=y0(e,t,$x),n=e.g.targets,!(e.g.version<x0)&&n){var o=Rx(e);n=Array.from(new Set([].concat(le(w0),le(gE)))),o=R(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var a=g0(u.includeKeys||[],n);a.includes(Bx)||a.push(Bx),a=m0(t,a);var d=u.events||[],p=a.e,g=a.sta;p&&(!mE.includes(p)||!(p!=="ps"||g&&yE.includes(g))||d&&d.length>0&&!d.includes(p))||_x(e,a,u)}}}function tu(e,t,n){if(e.g.enabled){n=y0(e,n,Fx);var o=Lx({mode:Fx,useHeaders:e.g.useHeaders,includeKeys:e.g.includeKeys||[]});e.m[o]||(e.m[o]={request:1,response:1}),n.sn=e.m[o].request++,o=e.g.includeKeys||[];var u=e.g.version==x0?Array.from(new Set([].concat(le(w0),le(hE)))):Ux;o=g0(o,u),n=m0(n,o),sE(n,t,e.g.useHeaders)}}function oE(e,t,n){var o=e.g.targets;if(o){var u=o.filter(function(g){return g.mode===jx&&g.enabled===!0});o=e.g.version==x0?Array.from(new Set([].concat(le(w0),le(pE)))):Ux,n.rc=t.status||0,n=y0(e,n,jx),t.headers&&t.headers["CMSD-Static"]&&(n.cmsds=btoa(t.headers["CMSD-Static"])),t.headers&&t.headers["CMSD-Dynamic"]&&(n.cmsdd=btoa(t.headers["CMSD-Dynamic"])),u=R(u);for(var a=u.next();!a.done;a=u.next()){a=a.value;var d=g0(a.includeKeys||[],o),p=Lx(a);e.m[p]||(e.m[p]={request:1,response:1}),n.sn=e.m[p].response++,d=m0(n,d),_x(e,d,a,t)}}}function _x(e,t,n,o){var u=Yi(),a=n.url;if(n.useHeaders){if(t=Ox(t),!Object.keys(t).length)return;o&&Object.assign(o.headers,t),o=un([a],u),Object.assign(o.headers,t)}else{if(t=Vl(t),!t)return;a=pc(a,t),o&&(o.uri=a),o=un([a],u)}e.j.Wb().request(9,o)}function sE(e,t,n){if(n)e=Ox(e),Object.keys(e).length&&Object.assign(t.headers,e);else{var o=Vl(e);o&&(t.uris=t.uris.map(function(u){return pc(u,o)}))}}function g0(e,t){if(!e||e.length===0)return t;for(var n=R(e),o=n.next();!o.done;o=n.next())t.includes(o.value);return e=e.filter(function(u){return t.includes(u)})}function m0(e,t){return Object.keys(e).reduce(function(n,o){return t.includes(o)&&(n[o]=e[o]),n},{})}function uE(e){if(e.type===0)return fE;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?yc:mc;if(t=="audio")return gc;if(t=="text")return e.mimeType==="application/mp4"?vc:v0}}function Lx(e){var t=Object.keys(e).sort().reduce(function(n,o){return o!=="enabled"&&(n[o]=e[o]),n},{});return JSON.stringify(t)}function lE(e,t){if(t=e.j.Fc()[t],!t.length)return NaN;var n=e.h?e.h.currentTime:0;return(e=t.find(function(o){return o.start<=n&&o.end>=n}))?(e.end-n)*1e3:NaN}function Px(e,t){if(t=e.j.Fc()[t],!t.length)return 0;var n=e.h?e.h.currentTime:0;return(e=t.find(function(o){return o.start<=n&&o.end>=n}))?(e.end-n)*1e3:0}function aE(e,t){var n=e.j.lc();if(!n.length)return NaN;e=n[0],n=R(n);for(var o=n.next();!o.done;o=n.next())o=o.value,o.type==="variant"&&o.bandwidth>e.bandwidth&&(e=o);switch(t){case mc:return e.videoBandwidth||NaN;case gc:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Dx(e,t,n){var o=t.segment,u=0;o&&(u=o.endTime-o.startTime),u={d:u*1e3,st:e.j.W()?dE:cE},u.ot=uE(t);var a=u.ot===mc||u.ot===gc||u.ot===yc||u.ot===vc;if(t=t.stream){var d=e.j.Pb();if(a&&(u.bl=lE(e,t.type),u.ot!==vc)){var p=Px(e,t.type);u.dl=d?p/Math.abs(d):p}if(t.bandwidth&&(u.br=t.bandwidth/1e3),t.segmentIndex&&o){if((d=t.segmentIndex.Vb(o.endTime,!0,d<0))&&(d=d.next().value)&&d!=o){if(n&&!Rt(o.P(),d.P())){p=d.P()[0];var g=new URL(p);if(n=new URL(n),g.origin!==n.origin)n=p;else{for(p=g.pathname.split("/").slice(1),n=n.pathname.split("/").slice(1,-1);p[0]===n[0];)p.shift(),n.shift();for(;n.length;)n.shift(),p.unshift("..");n=p.join("/")}u.nor=n}!d.startByte&&!d.endByte||o.startByte==d.startByte&&o.endByte==d.endByte||(n=d.startByte+"-",d.endByte&&(n+=d.endByte),u.nrr=n)}n=e.j.Pb()||1,d=Px(e,t.type)||500,o=(t=t.bandwidth)?t*(o.endTime-o.startTime)/1e3/(d/n/1e3)*e.g.rtpSafetyFactor:NaN,isNaN(o)||(u.rtp=o)}}return a&&u.ot!==vc&&(u.tb=aE(e,u.ot)/1e3),u}function y0(e,t,n){Object.assign(t,p0(e)),t.pr=e.j.Pb();var o=t.ot===mc||t.ot===yc;return e.I&&o&&(t.bs=!0,t.su=!0,e.I=!1),t.su==null&&(t.su=e.J),e.j.W()&&(o=l2(e.j),t.ltc=o||void 0),document.hidden&&(t.bg=!0),o=e.B&&e.u?e.B-(e.H||e.u):void 0,o==null||e.K[n]||(t.msd=o,e.K[n]=!0),t}function Vl(e){function t(T){return n(T/100)*100}function n(T){return Math.round(T)}function o(T){return!Number.isNaN(T)&&T!=null&&T!==""&&T!==!1}var u=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(T){return encodeURIComponent(T)},rtp:t,tb:n,ttfb:n,ttlb:n},d=Object.keys(e||{}).sort();d=R(d);for(var p=d.next();!p.done;p=d.next()){p=p.value;var g=e[p];if(o(g)&&(p!=="v"||g!==1)&&(p!="pr"||g!==1)){var y=a[p];y&&(g=y(g)),y=typeof g;var w=void 0;w=y==="string"&&p!=="ot"&&p!=="sf"&&p!=="st"?p+"="+JSON.stringify(g):y==="boolean"?p:y==="symbol"?p+"="+g.description:p+"="+g,u.push(w)}}return u.join(",")}function Ox(e){var t=Object.keys(e),n={},o=["Object","Request","Session","Status"],u=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,url:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,ttfb:1,ttlb:1,ts:1,rc:1,cmsdd:1,cmsds:1,sn:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3,bg:3};t=R(t);for(var d=t.next();!d.done;d=t.next())d=d.value,u[a[d]!=null?a[d]:1][d]=e[d];for(e=0;e<u.length;e++)(a=Vl(u[e]))&&(n["CMCD-"+o[e]]=a);return n}function pc(e,t){return!t||e.includes("offline:")?e:(e=new Qt(e),e.g.set("CMCD",t),e.toString())}var Nx="m",gc="a",mc="v",yc="av",fE="i",v0="c",vc="tt",x0=2,cE="v",dE="l",xc="d",wc="ld",Sc="h",Tc="lh";be("shaka.util.CmcdManager.StreamingFormat",{DASH:xc,Sl:wc,HLS:Sc,Tl:Tc,im:"s",OTHER:"o"});var Ux="br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),w0="br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(" "),hE="ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(" "),pE="d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),gE=["e","sta"],mE="ps e t c b m um pe pc".split(" "),yE="spawkrfeqd".split(""),vE=10,Bx="ts",xE="t",Fx="request",jx="response",$x="event";function Ui(e){this.h=e,this.g=null}m=Ui.prototype,m.configure=function(e){this.h=e},m.ci=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(Hx)?this.g.get(Hx)*1e3:null},m.ai=function(){return this.h.enabled&&this.g&&this.g.has(Vx)?this.g.get(Vx)*1e3:null},m.Uj=function(){return this.h.enabled&&this.g&&this.g.has(Gx)?this.g.get(Gx):null},m.Vj=function(){return this.h.enabled&&this.g&&this.g.has(Xx)?this.g.get(Xx):null},m.getBandwidthEstimate=function(e){var t=this.ai();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return n>0&&n<=1?e*(1-n)+t*n:e};function zx(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}be("shaka.util.CmsdManager",Ui),Ui.prototype.getBandwidthEstimate=Ui.prototype.getBandwidthEstimate,Ui.prototype.getRoundTripTime=Ui.prototype.Vj,Ui.prototype.getResponseDelay=Ui.prototype.Uj,Ui.prototype.getEstimatedThroughput=Ui.prototype.ai,Ui.prototype.getMaxBitrate=Ui.prototype.ci;var Vx="etp",Hx="mb",Gx="rd",Xx="rtt";function Wx(){this.g=null,this.h=[]}function S0(e,t){return $(function(n){if(n.g==1)return e.g?D(n,new Promise(function(o){return e.h.push(o)}),2):n.A(2);e.g=t,te(n)})}Wx.prototype.release=function(){this.h.length>0?this.h.shift()():this.g=null};function we(e,t,n){t=t===void 0?null:t,Tt.call(this);var o=this;this.m=Ic,this.h=null,this.ve=t,this.$=!1,this.Ge=new Le,this.we=new Le,this.j=new Le,this.ac=new Le,this.xc=new Le,this.G=this.H=this.F=this.J=null,this.Ie=0,this.ma=new Wx,this.O=this.ba=this.X=this.i=this.uc=this.I=this.l=this.re=this.S=this.Lh=this.wa=this.K=this.ib=this.ya=this.se=this.R=this.Ga=this.M=this.ob=null,this.Sa=!1,this.Be=this.o=null,this.Ae=1e9,this.Fe=[],this.kb=[],this.Xf=-1,this.g=sr(this),this.Zf=gx(),this.V=null,this.Je=-1,this.Zb=null,this.xa={width:1/0,height:1/0},this.ze=new Sp(this.g,this.xa,null),this.De=[],this.B=null,this.N=this.g.adaptationSetCriteriaFactory(),this.N.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredAudioRole,videoRole:this.g.preferredVideoRole,channelCount:0,hdrLevel:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,audioLabel:this.g.preferredAudioLabel,videoLabel:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.yc=this.g.preferredTextLanguage,this.Kd=this.g.preferredTextRole,this.ye=this.g.preferForcedSubs,this.xe=[],n&&n(this),this.K=new h0(this,this.g.cmcd),this.wa=new Ui(this.g.cmsd),this.J=e2(this),this.Fd=this.oa=this.Da=this.C=null,this.ag=!1,this.Yf=[],this.$f=new dt(function(){return $(function(u){if(u.g==1)return o.oa?D(u,o.fc(o.Fd,!0),3):u.A(0);if(u.g!=4)return D(u,o.load(o.oa),4);o.ag?o.Fd.pause():o.Fd.play(),o.oa=null,o.ag=!1,te(u)})}),Mc&&(this.C=Mc(),this.C.configure(this.g.ads),this.xc.D(this.C,"ad-content-pause-requested",function(u){var a;return $(function(d){if(d.g==1)return o.$f.stop(),o.oa?d.A(0):(o.Fd=o.h,o.ag=o.ae(),a=u.saveLivePosition||!1,D(d,o.Vh(!0,a),3));o.oa=d.h,te(d)})}),this.xc.D(this.C,"ad-content-resume-requested",function(u){if(u=u.offset||0,o.oa){var a=o.oa;a.m&&u&&(typeof a.m=="number"?a.m+=u:a.m.setTime(a.m.getTime()+u*1e3))}o.$f.ka(.1)}),this.xc.D(this.C,"ad-content-attach-requested",function(){return $(function(u){return o.h||!o.Fd?u.A(0):D(u,o.fc(o.Fd,!0),0)})})),Rc&&(this.Da=Rc(this),this.Da.configure(this.g.queue)),this.Ge.D(f,"online",function(){M0(o),o.gh()}),this.Ce=new dt(function(){for(var u=Date.now()/1e3,a=!1,d=!0,p=R(o.i.variants),g=p.next();!g.done;g=p.next())g=g.value,g.disabledUntilTime>0&&g.disabledUntilTime<=u&&(g.disabledUntilTime=0,a=!0),g.disabledUntilTime>0&&(d=!1);d&&o.Ce.stop(),a&&fo(o,!1,void 0,!1,!1)}),this.Ta=null,e&&(yt("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.fc(e,!0)),this.u=null}U(we,Tt);function Cc(e){e.S!=null&&(Vy(e.S),e.S.release(),e.S=null)}function wE(e,t,n){n||t.lcevc.enabled?(Cc(e),e.S==null&&(e.S=new tl(e.h,e.Lh,t.lcevc,n),e.H&&(e.H.H=e.S))):Cc(e)}function Dt(e,t){return new Ie(e,t)}m=we.prototype,m.destroy=function(){var e=this,t;return $(function(n){switch(n.g){case 1:return e.m==qi?n.return():(Cc(e),t=e.detach(),e.m=qi,D(n,t,2));case 2:return D(n,e.ng(),3);case 3:if(e.Ge&&(e.Ge.release(),e.Ge=null),e.we&&(e.we.release(),e.we=null),e.j&&(e.j.release(),e.j=null),e.ac&&(e.ac.release(),e.ac=null),e.xc&&(e.xc.release(),e.xc=null),e.Be=null,e.g=null,e.B=null,e.ve=null,e.K=null,e.wa=null,!e.J){n.A(4);break}return D(n,e.J.destroy(),5);case 5:e.J=null;case 4:e.o&&(e.o.release(),e.o=null),e.Da&&(e.Da.destroy(),e.Da=null),Tt.prototype.release.call(e),te(n)}})};function Kx(e,t){C2.set(e,t)}function nu(e,t){e.dispatchEvent(Dt("onstatechange",new Map().set("state",t)))}m.fc=function(e,t){t=t===void 0?!0:t;var n=this,o,u,a;return $(function(d){switch(d.g){case 1:if(n.m==qi)throw new q(2,7,7e3);if(o=n.h&&n.h==e,!n.h||n.h==e){d.A(2);break}return D(d,n.detach(),2);case 2:return D(d,T0(n,"attach"),4);case 4:if(d.h)return d.return();if(ce(d,5,6),o||(nu(n,"attach"),u=function(){var p=R0(n,!1);p&&iu(n,p)},n.we.D(e,"error",u),n.h=e,n.K&&n.K.setMediaElement(e)),Me(),!t||!mr()||n.H){d.A(6);break}return D(d,C0(n),6);case 6:W(d),n.ma.release(),G(d,0);break;case 5:return a=ie(d),D(d,n.detach(),10);case 10:throw a}})},m.kj=function(e){this.Lh=e},m.detach=function(e){e=e===void 0?!1:e;var t=this;return $(function(n){if(n.g==1){if(t.m==qi)throw new q(2,7,7e3);return D(n,t.Bc(!1,e),2)}if(n.g!=3)return D(n,T0(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.we.Qa(),t.h=null),nu(t,"detach"),t.C&&!e&&t.C.release()}finally{t.ma.release()}te(n)})};function T0(e,t){var n;return $(function(o){return o.g==1?(n=++e.Ie,D(o,S0(e.ma,t),2)):n!=e.Ie?(e.ma.release(),o.return(!0)):o.return(!1)})}m.Bc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,o,u,a,d,p,g,y,w,T,M,L,P,N;return $(function(O){switch(O.g){case 1:return n.m!=qi&&(n.m=Ic),D(O,T0(n,"unload"),2);case 2:return O.h?O.return():(ve(O,3),n.Sa=!1,nu(n,"unload"),Cc(n),o=n.xe.map(function(F){return F()}),n.xe=[],D(O,Promise.all(o),5));case 5:if(n.dispatchEvent(Dt("unloading")),n.se&&(n.se.release(),n.se=null),n.ya&&(n.ya.release(),n.ya=null),n.ib&&(n.ib.release(),n.ib=null),n.h&&(n.j.Qa(),n.ac.Qa()),n.Ce.stop(),n.ob&&(n.ob.release(),n.ob=null),n.Ga&&(n.Ga.stop(),n.Ga=null),!n.I){O.A(6);break}return D(O,n.I.stop(),7);case 7:n.I=null,n.uc=null;case 6:if(n.o&&n.o.stop(),!n.l){O.A(8);break}return D(O,n.l.destroy(),9);case 9:n.l=null;case 8:if(n.M&&(n.M.release(),n.M=null),n.G&&(n.G.release(),n.G=null),f.shakaMediaKeysPolyfill!=="webkit"||!n.F){O.A(10);break}return D(O,n.F.destroy(),11);case 11:n.F=null;case 10:if(!n.H){O.A(12);break}return D(O,n.H.destroy(),13);case 13:n.H=null;case 12:if(n.C&&!t&&n.C.onAssetUnload(),n.oa&&!t&&(n.oa.destroy(),n.oa=null),t||n.$f.stop(),n.K&&ZA(n.K),n.wa&&(n.wa.g=null),!n.u){O.A(14);break}return D(O,n.u.destroy(),15);case 15:n.u=null;case 14:if(n.$=!1,n.h){for(u=R(n.Yf),a=u.next();!a.done;a=u.next())d=a.value,d.src.startsWith("blob:")&&URL.revokeObjectURL(d.src),d.remove();n.Yf=[],Vf(n.h)&&n.h.load()}if(!n.F){O.A(16);break}return D(O,n.F.destroy(),17);case 17:n.F=null;case 16:if(n.Ta&&n.X!=n.Ta.rd()&&(n.Ta.j||n.Ta.destroy(),n.Ta=null),n.X=null,n.ba=null,n.R=null,n.i){for(p=R(n.i.variants),g=p.next();!g.done;g=p.next())for(y=g.value,w=R([y.audio,y.video]),T=w.next();!T.done;T=w.next())(M=T.value)&&M.segmentIndex&&M.segmentIndex.release();for(L=R(n.i.textStreams),P=L.next();!P.done;P=L.next())N=P.value,N.segmentIndex&&N.segmentIndex.release()}n.g&&n.g.streaming.clearDecodingCache&&(kf.clear(),Ps.clear()),n.i=null,n.B=new hc,n.Kh=null,n.Zb=null,n.V=null,n.Je=-1,n.Fe=[],n.kb=[],n.Xf=-1,n.J&&n.J.Rh(),Hl(n);case 3:W(O),n.ma.release(),G(O,4);break;case 4:if(Me(),e&&mr()&&!n.H&&n.h)return D(O,C0(n),0);O.A(0)}})},m.ll=function(e){this.O=e},m.load=function(e,t,n){t=t===void 0?null:t;var o=this,u,a,d,p,g,y,w,T,M,L,P,N,O,F;return $(function(B){switch(B.g){case 1:if(o.m==qi)throw new q(2,7,7e3);if(u=null,a="",e instanceof Ni){if(e.j)throw new q(2,7,7006);u=e,a=u.rd()||""}else a=e||"";return D(B,S0(o.ma,"load"),2);case 2:if(o.ma.release(),!o.h)throw new q(2,7,7002);if(!o.X){B.A(3);break}return o.X=a,D(B,o.Bc(!1),3);case 3:if(d=++o.Ie,p=function(){return $(function(V){if(V.g==1)return o.Ie==d?V.A(0):u?D(V,u.destroy(),3):V.A(3);throw new q(2,7,7e3)})},g=function(V,Y){return $(function(J){switch(J.g){case 1:return ve(J,2),D(J,S0(o.ma,Y),4);case 4:return D(J,p(),5);case 5:return D(J,V(),6);case 6:return D(J,p(),7);case 7:u&&o.g&&(u.g=o.g);case 2:W(J),o.ma.release(),G(J,0)}})},ce(B,5,6),t==null&&u&&(t=u.getStartTime()),o.O=t,o.Sa=!1,o.dispatchEvent(Dt("loading")),u){n=u.V,B.A(8);break}if(n){B.A(8);break}return D(B,g(function(){return $(function(V){if(V.g==1)return D(V,Qx(o,a),2);n=V.h,te(V)})},"guessMimeType_"),8);case 8:if(y=!!u,u){vx(u,o),o.B=u.getStats(),B.A(11);break}return D(B,qx(o,a,t,n,!0,o.g),12);case 12:(u=B.h)?(u.F=!1,vx(u,o),o.B=u.getStats(),u.start(),u.B.catch(function(){})):o.B=new hc;case 11:return w=!u,T=Date.now()/1e3,o.B=u?u.getStats():new hc,o.X=a,o.ba=n||null,Hl(o),M=function(){var V=o.h?o.h.buffered:null;return{start:mv(V)||0,end:zf(V)||0}},o.ya=new Ll(M),o.ya.addEventListener("regionadd",function(V){b0(o,V.region,"metadataadded")}),w?D(B,g(function(){return $(function(V){return D(V,bE(o,n),0)})},"initializeSrcEqualsDrmInner_"),23):(o.ib=new Ll(M),D(B,g(function(){return $(function(V){if(V.g==1)return D(V,Promise.race([u.ma,u.B]),2);o.uc=u.H;var Y=u;Y.oa=!0,o.I=Y.l,o.i=u.Hg(),te(V)})},"waitForFinish"),15));case 15:if(o.H){B.A(16);break}return D(B,g(function(){return $(function(V){return D(V,C0(o),0)})},"initializeMediaSourceEngineInner_"),16);case 16:return o.i&&o.i.textStreams.length&&(o.u.enableTextDisplayer?o.u.enableTextDisplayer():yt("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),D(B,g(function(){return $(function(V){return D(V,u.B,0)})},"waitForFinish"),18);case 18:if(o.g=u.getConfiguration(),o.ze=u.G,o.I&&o.I.setMediaElement&&o.h&&o.I.setMediaElement(o.h),o.se=UA(u),o.re=u.Ga,(L=u.C)&&(o.N=L),y&&o.h&&o.h.nodeName==="AUDIO"&&(SE(o),o.configure("manifest.disableVideo",!0)),u.i){B.A(19);break}return D(B,g(function(){return $(function(V){return D(V,xx(u,o.h),0)})},"drmEngine_.init"),19);case 19:return o.F=BA(u),D(B,g(function(){return $(function(V){return D(V,o.F.fc(o.h),0)})},"drmEngine_.attach"),21);case 21:return P=o.g.abrFactory,o.o&&o.Be==P||(o.Be=P,o.o&&o.o.release(),o.o=P(),typeof o.o.setMediaElement!="function"&&(yt("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),o.o.setMediaElement=function(){}),typeof o.o.setCmsdManager!="function"&&(yt("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),o.o.setCmsdManager=function(){}),typeof o.o.trySuggestStreams!="function"&&(yt("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),o.o.trySuggestStreams=function(){}),o.o.configure(o.g.abr)),N=FA(u),O=u.o,D(B,g(function(){return $(function(V){return D(V,CE(o,T,O,N),0)})},"loadInner_"),22);case 22:NA(u),o.ba&&Me().aj()&&fl(o.ba)&&Ik(o.H,o.X,o.ba),B.A(14);break;case 23:return D(B,g(function(){return $(function(V){return D(V,kE(o,T,n),0)})},"srcEqualsInner_"),14);case 14:o.dispatchEvent(Dt("loaded"));case 6:if(W(B),!u){B.A(25);break}return D(B,u.destroy(),25);case 25:o.Ta=null,G(B,0);break;case 5:if(F=ie(B),!F||F.code==7e3){B.A(27);break}return D(B,o.Bc(!1),27);case 27:throw F}})};function SE(e){for(var t=R(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(o){return o.audio})}m.dj=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,o;return $(function(u){return u.g==1?D(u,Yx(n),2):u.g!=3?(o=u.h,D(u,n.Bc(e,t),3)):u.return(o)})},m.Vh=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,o;return $(function(u){return u.g==1?D(u,Yx(n,t),2):u.g!=3?(o=u.h,D(u,n.detach(e),3)):u.return(o)})};function Yx(e,t){t=t===void 0?!1:t;var n,o,u;return $(function(a){if(a.g==1)return n=null,e.i&&e.I&&e.uc&&e.X&&e.g?(o=e.h.currentTime,e.W()&&!t&&(o=null),D(a,Jx(e,e.X,o,e.ba,e.g,!0,!1),3)):a.A(2);if(a.g!=2){n=a.h,e.De.push(n),e.I&&e.I.setMediaElement&&e.I.setMediaElement(null),(u=e.l?e.l.o:null)&&(n.o=u);var d=n,p=e.I,g=e.uc;d.h=e.i,d.l=p,d.H=g,n.C=e.N,n.start(),e.i=null,e.I=null,e.uc=null,e.o=null,e.Be=null}return a.return(n)})}m.preload=function(e,t,n,o){t=t===void 0?null:t;var u=this,a,d;return $(function(p){return p.g==1?(a=sr(u),Nr(a,o||u.g,sr(u)),D(p,qx(u,e,t,n,!1,a),2)):((d=p.h)?d.start():iu(u,new q(2,7,7005)),p.return(d))})},m.ng=function(){var e=this,t,n,o,u;return $(function(a){for(t=[],n=R(e.De),o=n.next();!o.done;o=n.next())u=o.value,u.j||t.push(u.destroy());return e.De=[],D(a,Promise.all(t),0)})};function qx(e,t,n,o,u,a){u=u===void 0?!1:u;var d,p,g;return $(function(y){return y.g==1?o?y.A(2):D(y,Qx(e,t),3):(y.g!=2&&(o=y.h),TE(e,o)?y.return(null):(d=a||e.g,p=!1,u&&e.h&&e.h.nodeName==="AUDIO"&&(p=!0),g=Jx(e,t,n,o||null,d,!u,p),g=u?g.then(function(w){return w.F=!1,w}):g.then(function(w){return e.De.push(w),w}),y.return(g)))})}function Jx(e,t,n,o,u,a,d){a=a===void 0?!0:a,d=d===void 0?!1:d;var p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J;return $(function(H){return H.g==1?(p=null,g=Wi(u),d&&(g.manifest.disableVideo=!0),y=function(){return p.R&&p.j?null:p},w=function(){return y()?y().getConfiguration():e.g},e.xa.width!=1/0||e.xa.height!=1/0||e.g.ignoreHardwareResolution?H.A(2):(T=Me(),D(H,T.jc(),3))):(H.g!=2&&(M=H.h,e.xa.width=M.width,e.xa.height=M.height),L=new Sp(g,e.xa,null),P={networkingEngine:e.J,filter:function(z){var Q,ee;return $(function(se){if(se.g==1)return D(se,ev(L,z),2);if(se.g!=4)return Q=se.h,Q?(ee=Dt("trackschanged"),D(se,Promise.resolve(),4)):se.A(0);p.dispatchEvent(ee),te(se)})},makeTextStreamsForClosedCaptions:function(z){return BE(e,z)},onTimelineRegionAdded:function(z){Vp(p.I,z)},onEvent:function(z){return p.dispatchEvent(z)},onError:function(z){return p.onError(z)},isLowLatencyMode:function(){return w().streaming.lowLatencyMode},updateDuration:function(){e.l&&p.R&&e.l.updateDuration()},newDrmInfo:function(z){var Q=p.i,ee=Q?Q.g:null;ee&&Q.B&&iv(L,ee.keySystem,z)},onManifestUpdated:function(){var z=new Map().set("isLive",e.W());p.dispatchEvent(Dt("manifestupdated",z)),Fl(p,!1,function(){e.C&&e.C.onManifestUpdated(e.W())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(z,Q,ee,se){var fe=z;(z=="com.apple.hls.interstitial"||z=="com.apple.hls.overlay")&&(fe="com.apple.quicktime.HLS",z={startTime:Q,endTime:ee,values:se},e.C&&e.C.onHLSInterstitialMetadata(e,e.h,z)),se=R(se),z=se.next();for(var ne={};!z.done;ne={Zg:void 0},z=se.next())ne.Zg=z.value,ne.Zg.name!="ID"&&Fl(p,!1,(function(xe){return function(){k0(e,Q,ee,fe,xe.Zg)}})(ne))},disableStream:function(z){return e.disableStream(z,e.g.streaming.maxDisabledTime)},addFont:function(z,Q){return e.addFont(z,Q)}},N=new Ll(function(){return e.Va()}),N.addEventListener("regionadd",function(z){var Q=z.region;Wl(e,"timelineregionadded",Q,p),Fl(p,!1,function(){e.C&&(e.C.onDashTimedMetadata(Q),e.C.onDASHInterstitialMetadata(e,e.h,Q))})}),O=null,g.streaming.observeQualityChanges&&(O=new qf(function(){return e.Fc()}),O.addEventListener("qualitychange",function(z){x2(e,z.quality,z.position)}),O.addEventListener("audiotrackchange",function(z){x2(e,z.quality,z.position,!0)})),F=!0,B={tc:e.J,onError:function(z){return p.onError(z)},uf:function(z){Fl(p,!0,function(){e.F&&jE(e,z)})},onExpirationUpdated:function(z,Q){var ee=Dt("expirationupdated");p.dispatchEvent(ee),(ee=p.l)&&ee.onExpirationUpdated&&ee.onExpirationUpdated(z,Q)},onEvent:function(z){p.dispatchEvent(z),z.type=="drmsessionupdate"&&F&&(F=!1,z=Date.now()/1e3-p.ya,(e.B||p.getStats()).m=z,e.S&&Vy(e.S))}},V=e2(e,y),D1(e.J,V),Y=function(){return e.md(B)},J={config:g,xk:P,Ik:N,Hk:O,md:Y,wk:L,networkingEngine:V,jj:a},p=new Ni(t,o,n,J),H.return(p))})}function Qx(e,t){var n,o,u,a;return $(function(d){return d.g==1?(n=e.g.manifest.retryParameters,D(d,ts(t,e.J,n),2)):(o=d.h,o=="application/x-mpegurl"&&(u=Me(),u.Ea()==="WEBKIT"&&(o="application/vnd.apple.mpegurl")),o=="video/quicktime"&&(a=Me(),a.Ea()==="CHROMIUM"&&(o="video/mp4")),d.return(o))})}function TE(e,t){if(!mr(Me()))return!0;if(t){if((e.h||Ko()).canPlayType(t)=="")return!1;if(!mr(Me())||!js.has(t))return!0;if(fl(t))return Me().Ea()==="WEBKIT"&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if(t==="application/dash+xml"||t==="video/vnd.mpeg.dash.mpd")return e.g.streaming.preferNativeDash}return!1}function bc(e,t){var n=e.g.textDisplayFactory;e.Kh!==n||t!==void 0&&t?(t=e.u,e.u=n(),e.u.configure?e.u.configure(e.g.textDisplayer):yt("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||yt("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),t?(e.u.setTextVisibility(t.isTextVisible()),t.destroy().catch(function(){})):e.u.setTextVisibility(e.$),e.H&&Uk(e.H,e.u),e.Kh=n,e.l&&lA(e.l)):e.u&&e.u.configure&&e.u.configure(e.g.textDisplayer)}function C0(e){var t,n,o;return $(function(u){if(u.g==1)return Me(),nu(e,"media-source"),e.g.mediaSource.useSourceElements&&Vf(e.h),bc(e),t=PE(e.h,e.u,{Kj:function(){return e.keySystem()},onMetadata:function(a,d,p){a=R(a);for(var g=a.next();!g.done;g=a.next())if(g=g.value,g.data&&typeof g.cueTime=="number"&&g.frames){var y=g.cueTime+d,w=p;w&&y>w&&(w=y);for(var T=R(g.frames),M=T.next();!M.done;M=T.next())k0(e,y,w,"org.id3",M.value);e.C&&e.C.onHlsTimedMetadata(g,y)}},Ck:function(a){e.ib&&Vp(e.ib,{schemeIdUri:a.schemeIdUri,startTime:a.startTime,endTime:a.endTime,id:String(a.id),emsg:a})},onEvent:function(a){return e.dispatchEvent(a)},Ek:function(){e.I&&e.I.update&&e.I.update()}},e.S,e.g.mediaSource),n=e.g.manifest,o=n.segmentRelativeVttTiming,t.Ga=o,D(u,t.M,2);e.H=t,te(u)})}function Zx(e,t,n){function o(){return E0(e)}if(e.j.D(t,"playing",o),e.j.D(t,"pause",o),e.j.D(t,"ended",o),e.j.D(t,"ratechange",function(){var a=e.h.playbackRate;a!=0&&(e.M&&(e.M.set(a),e.m==In&&e.o.playbackRateChanged(a),f2(e,a)),a=Dt("ratechange"),e.dispatchEvent(a))}),t.remote&&(e.j.D(t.remote,"connect",function(){e.l&&t.remote.state=="connected"&&ns(e),Yn(e)}),e.j.D(t.remote,"connecting",function(){return Yn(e)}),e.j.D(t.remote,"disconnect",function(){return $(function(a){if(a.g==1)return e.l&&t.remote.state=="disconnected"?D(a,ic(e.l),3):a.A(2);a.g!=2&&ns(e),Yn(e),te(a)})})),t.audioTracks&&(e.j.D(t.audioTracks,"addtrack",function(){return Yn(e)}),e.j.D(t.audioTracks,"removetrack",function(){return Yn(e)}),e.j.D(t.audioTracks,"change",function(){return Yn(e)})),t.videoTracks&&(e.j.D(t.videoTracks,"addtrack",function(){return Yn(e)}),e.j.D(t.videoTracks,"removetrack",function(){return Yn(e)}),e.j.D(t.videoTracks,"change",function(){return Yn(e)})),(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.j.D(t,"webkitpresentationmodechanged",function(){e.ve&&bc(e,!0)}),t.textTracks){var u=function(){e.m===gi&&e.u instanceof pn&&ns(e),Yn(e)};e.j.D(t.textTracks,"addtrack",function(a){if(a.track)switch(a=a.track,a.kind){case"metadata":IE(e,a);break;case"chapters":ME(e,a);break;default:u()}}),e.j.D(t.textTracks,"removetrack",u),e.j.D(t.textTracks,"change",u)}t.preload!="none"&&e.j.Aa(t,"loadedmetadata",function(){e.B.G=Date.now()/1e3-n})}function CE(e,t,n,o){var u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye,ae;return $(function(he){switch(he.g){case 1:for(nu(e,"load"),u=e.h,e.M=new _l({Xe:function(){return u.playbackRate},Tc:function(){return u.defaultPlaybackRate},qh:function(Te){u.playbackRate=Te},ui:function(Te){u.currentTime+=Te}}),Zx(e,u,t),("onchange"in f.screen)&&e.j.D(f.screen,"change",function(){if(e.N.getConfiguration){var Te=e.N.getConfiguration();Te.hdrLevel=="AUTO"?ao(e):e.g.preferredVideoHdrLevel=="AUTO"&&e.g.abr.enabled&&(Te.hdrLevel="AUTO",e.N.configure(Te),ao(e))}}),a=!1,d=R(e.i.variants),p=d.next();!p.done;p=d.next())g=p.value,(y=g.video&&g.video.dependencyStream)&&(a=Hy(y));wE(e,e.g,a),e.yc=e.g.preferredTextLanguage,e.Kd=e.g.preferredTextRole,e.ye=e.g.preferForcedSubs,_0(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(Te,ke,Ke){e.i&&e.l&&Te!=e.l.o&&Gl(e,Te,!0,ke===void 0?!1:ke,Ke===void 0?0:Ke)}),e.o.setMediaElement(u),e.o.setCmsdManager(e.wa),e.l=DE(e),e.l.configure(e.g.streaming),e.m=In,e.dispatchEvent(Dt("streaming")),w=n;case 2:for((M=e.l.o)||w||(w=d2(e,!0)),L=[],T=M||w,P=R([T.video,T.audio]),N=P.next();!N.done;N=P.next())(O=N.value)&&!O.segmentIndex&&(L.push(O.createSegmentIndex()),O.dependencyStream&&L.push(O.dependencyStream.createSegmentIndex()));if(!(L.length>0)){he.A(4);break}return D(he,Promise.all(L),4);case 4:if(!T||T.disabledUntilTime!=0){he.A(2);break}if(e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(T),e.i.isLowLatency&&(e.g.streaming.lowLatencyMode?e.configure(e.Zf):st("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),e.K&&(eE(e.K,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),tE(e.K,t*1e3)),_0(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),oA(e.l,e.g.playRangeStart,e.g.playRangeEnd),e.Sa=!0,e.dispatchEvent(Dt("canupdatestarttime")),F=function(Te){e.G=RE(e,Te),e.ob=_E(e,Te),t2(e,u,!1)},e.g.streaming.startAtSegmentBoundary||(B=e.O,B==null&&e.i.startTime&&(B=e.i.startTime),F(B)),M){he.A(7);break}if(!e.g.streaming.startAtSegmentBoundary){he.A(8);break}return V=e.i.presentationTimeline,e.O instanceof Date&&(J=V.m||V.i,H=e.O.getTime()/1e3-J,H!=null&&(Y=H)),Y==null&&(Y=typeof e.O=="number"?e.O:e.h.currentTime),e.O==null&&e.i.startTime&&(Y=e.i.startTime),z=V.Xb(),Q=V.Hb(),Y<z?Y=z:Y>Q&&(Y=Q),D(he,FE(w,Y),9);case 9:ee=he.h,F(ee);case 8:Gl(e,w,!0,!1,0);case 7:return e.G.ready(),se=e.Lc().find(function(Te){return Te.active}),se||((fe=Ls(e.i.textStreams,e.yc,e.Kd,e.ye)[0]||null)&&s0(e.B.h,fe,!0),w&&(fe?(b1(w.audio,fe,e.g)&&(e.$=!0),e.$&&e.u.setTextVisibility(!0)):(e.$=!1,e.u.setTextVisibility(!1)),y2(e)),fe&&(e.g.streaming.alwaysStreamText||e.Pg())&&(Zf(e.l,fe),Xl(e))),D(he,e.l.start(o),10);case 10:e.g.abr.enabled&&(e.o.enable(),v2(e)),Yn(e),ao(e),e.i.variants.some(function(Te){return Te.primary}),((ne=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(xe=function(){return c2(e)},e.j.D(u,"timeupdate",xe)),ne||(ye=function(){return Ec(e)},e.j.D(u,"timeupdate",ye),Ec(e),e.i.nextUrl&&(e.g.streaming.preloadNextUrlWindow>0&&(ae=function(){var Te;return $(function(ke){if(ke.g==1)return Te=e.Va().end-e.h.currentTime,isNaN(Te)||!(Te<=e.g.streaming.preloadNextUrlWindow)?ke.A(0):(e.j.Ma(u,"timeupdate",ae),D(ke,e.preload(e.i.nextUrl),4));e.Ta=ke.h,te(ke)})},e.j.D(u,"timeupdate",ae)),e.j.D(u,"ended",function(){e.load(e.Ta||e.i.nextUrl)}))),e.C&&e.C.onManifestUpdated(ne),te(he)}})}function bE(e,t){var n,o,u;return $(function(a){return a.g==1?(n=Date.now()/1e3,o=!0,e.F=e.md({tc:e.J,onError:function(d){iu(e,d)},uf:function(){},onExpirationUpdated:function(){var d=Dt("expirationupdated");e.dispatchEvent(d)},onEvent:function(d){e.dispatchEvent(d),d.type=="drmsessionupdate"&&o&&(o=!1,e.B.m=Date.now()/1e3-n)}}),e.F.configure(e.g.drm),u=k1([t]),e.F.O=!0,D(a,z1(e.F,[u],[]),2)):D(a,e.F.fc(e.h),0)})}function kE(e,t,n){var o,u,a,d,p,g,y,w,T,M,L,P;return $(function(N){switch(N.g){case 1:if(nu(e,"src-equals"),o=e.h,e.G=new Vv(o),u=!1,e.xe.push(function(){u=!0}),e.dispatchEvent(Dt("canupdatestarttime")),e.O!=null&&e.G.Wf(e.O),e.ob=LE(e,e.O||0),e.M=new _l({Xe:function(){return o.playbackRate},Tc:function(){return o.defaultPlaybackRate},qh:function(O){o.playbackRate=O},ui:function(O){o.currentTime+=O}}),t2(e,o,!0),o.textTracks&&(bc(e),a=function(O){if(!(e.u instanceof pn)){var F=kc(e).find(function(B){return B.mode!=="disabled"});F&&(F.mode=O?"showing":"hidden"),e.u instanceof Pn&&(F=OE(e))&&(F.mode=!O&&e.u.isTextVisible()?"showing":"hidden")}},e.j.D(o,"enterpictureinpicture",function(){return a(!0)}),e.j.D(o,"leavepictureinpicture",function(){return a(!1)}),o.remote?(e.j.D(o.remote,"connect",function(){return a(!1)}),e.j.D(o.remote,"connecting",function(){return a(!1)}),e.j.D(o.remote,"disconnect",function(){return a(!1)})):"webkitCurrentPlaybackTargetIsWireless"in o&&e.j.D(o,"webkitcurrentplaybacktargetiswirelesschanged",function(){return a(!1)}),d=o,(d.webkitPresentationMode||d.webkitSupportsFullscreen)&&e.j.D(d,"webkitpresentationmodechanged",function(){d.webkitPresentationMode?a(d.webkitPresentationMode!=="inline"):d.webkitSupportsFullscreen&&a(d.webkitDisplayingFullscreen)})),Zx(e,o,t),p=nE(e.K,e.X,n),!p.includes("#t=")&&(e.g.playRangeStart>0||isFinite(e.g.playRangeEnd))&&(p+="#t=",e.g.playRangeStart>0&&(p+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(p+=","+e.g.playRangeEnd)),!e.H){N.A(2);break}return D(N,e.H.destroy(),3);case 3:e.H=null;case 2:return Vf(o),o.src=p,g=Me(),g.Oa()=="TV"&&o.load(),o.preload!="none"&&!o.autoplay&&fl(n)&&g.Ea()==="WEBKIT"&&o.load(),e.m=gi,e.dispatchEvent(Dt("streaming")),y=new _t,qs(o,HTMLMediaElement.HAVE_METADATA,e.j,function(){e.G.ready(),e.ba&&fl(e.ba)||y.resolve()}),w=function(){return new Promise(function(O){var F=new dt(O);e.j.D(o.textTracks,"change",function(){return F.ka(.5)}),F.ka(.5)})},qs(o,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var O,F,B,V,Y;return $(function(J){if(J.g==1)return D(J,w(),2);if(u)return J.return();if(AE(e),O=kc(e),O.some(function(H){return H.mode==="showing"})&&(e.$=!0,e.u.setTextVisibility(!0)),!(e.u instanceof pn))for(O.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():yt("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),F=!1,B=R(O),V=B.next();!V.done;V=B.next())Y=V.value,Y.mode!=="disabled"&&(F?(Y.mode="disabled",st("Found more than one enabled text track, disabling it",Y)):(u2(e,Y),F=!0));EE(e),e.ba&&fl(e.ba)&&y.resolve(),te(J)})}),o.error?y.reject(R0(e)):o.preload=="none"&&(st('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),y.resolve()),e.j.Aa(o,"error",function(){y.reject(R0(e))}),D(N,gl(e.g.streaming.loadTimeout,y),4);case 4:((T=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(M=function(){return c2(e)},e.j.D(o,"timeupdate",M)),T||(L=function(){return Ec(e)},e.j.D(o,"timeupdate",L),Ec(e)),e.C&&(e.C.onManifestUpdated(T),T&&(P=e.Va().end,e.j.D(o,"progress",function(){var O=e.Va().end;P!=O&&(e.C.onManifestUpdated(e.W()),P=O)}))),e.Sa=!0,te(N)}})}function AE(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Ni(t,e.g.preferredAudioRole)}function EE(e){var t=e.g.preferredTextLanguage;t!=""&&e.kh(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function IE(e,t){if(t.kind=="metadata"){t.mode="hidden",e.j.D(t,"cuechange",function(){if(t.activeCues)for(var o=R(t.activeCues),u=o.next();!u.done;u=o.next())u=u.value,k0(e,u.startTime,u.endTime,u.type,u.value),e.C&&e.C.onCueMetadataChange(u.value);if(t.cues){o=[],u=R(t.cues);for(var a=u.next(),d={};!a.done;d={Dc:void 0},a=u.next())d.Dc=a.value,d.Dc.type=="com.apple.quicktime.HLS"&&d.Dc.startTime!=null&&(a=o.find((function(p){return function(g){return g.startTime==p.Dc.startTime&&g.endTime==p.Dc.endTime}})(d)),a||(a={startTime:d.Dc.startTime,endTime:d.Dc.endTime,values:[]},o.push(a)),a.values.push(d.Dc.value));for(o=R(o),u=o.next();!u.done;u=o.next())u=u.value,u.values.some(function(p){return p.key=="X-ASSET-URI"||p.key=="X-ASSET-LIST"})&&e.C&&(u.values.push({key:"CUE",description:"",data:u.startTime!=0||e.W()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.C.onHLSInterstitialMetadata(e,e.h,u))}});var n=new dt(function(){var o=NE(e);o=R(o);for(var u=o.next();!u.done;u=o.next())u.value.mode="hidden"}).Kb().ka(.5);e.xe.push(function(){n.stop()})}}function b0(e,t,n){t=new Map().set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(Dt(n,t))}function k0(e,t,n,o,u){e.ya&&(t={schemeIdUri:o,startTime:t,endTime:n||1/0,id:"",payload:u},t.id=JSON.stringify(t),Vp(e.ya,t))}function ME(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new dt(function(){t.mode="hidden"}).Kb().ka(.5);e.xe.push(function(){n.stop()})}}m.Mk=function(){for(var e=this.ma;e.g;)e.release()},m.md=function(e){return new Nf(e)};function e2(e,t){function n(a){t()?t().dispatchEvent(a):e.dispatchEvent(a)}function o(a){t()?Fl(t(),!0,a):a()}t||(t=function(){return null});var u=new jt(function(a,d,p,g,y){o(function(){e.o&&e.o.segmentDownloaded(a,d,p,g,y)})},function(a,d,p){d=new Map().set("headers",a).set("request",d).set("requestType",p),n(Dt("downloadheadersreceived",d)),o(function(){if(e.wa){var g=e.wa;if(g.h.enabled){var y=a["cmsd-static"];if(y)try{var w=new Map,T=y.split(",");for(y=0;y<T.length;y++){var M=T[y].split("=");w.set(M[0],zx(M[1]))}}catch{}if(w=a["cmsd-dynamic"]){e:{try{var L=new Map,P=w.split(";");for(w=1;w<P.length;w++){var N=P[w].split("=");L.set(N[0],zx(N[1]))}var O=L;break e}catch{O=null;break e}O=void 0}O&&(g.g=O)}}}})},function(a,d){a=new Map().set("request",a).set("response",d),n(Dt("downloadcompleted",a))},function(a,d,p,g){a=new Map().set("request",a).set("error",d).set("httpResponseCode",p).set("aborted",g),n(Dt("downloadfailed",a))},function(a,d,p){o(function(){if(e.K){var g=e.K,y=p;if(y=y===void 0?{}:y,g.g.enabled)if(d.method==="HEAD")tu(g,d,{});else switch(a){case 0:try{if(g.g.enabled){if(y.type){e:{switch(y.type){case 4:var w=g.o?wc:xc;break e;case 3:case 2:w=g.o?Tc:Sc;break e;case 5:w="s";break e}w=void 0}g.l=w}tu(g,d,{ot:Nx,su:!g.C})}}catch(M){ai("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",M)}break;case Di:try{if(g.g.enabled){var T=Dx(g,y,d.uris[0]);T.ts=Date.now(),g.F.set(d,T.ts),tu(g,d,T)}}catch(M){ai("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",M)}break;case 2:case 5:case 6:tu(g,d,{ot:"k"});break;case 4:tu(g,d,{ot:"o"})}}})},function(a,d,p,g){(a=t()?t().l:e.I)&&a.banLocation&&a.banLocation(g)},function(a,d,p){if(d.data){var g=d.data.byteLength,y=t()?t().getStats():e.B;switch(y&&(yx(y,g),a===0&&(y.ni=g)),g=e.K,p=p===void 0?{}:p,a){case Di:try{var w=Dx(g,p,d.uri);d.originalRequest&&d.originalRequest.timeToFirstByte!=null&&(w.ttfb=d.originalRequest.timeToFirstByte),d.timeMs!=null&&(w.ttlb=d.timeMs);var T=d.originalUri||d.uri;if(T.includes("CMCD="))try{var M=new URL(T);M.searchParams.delete("CMCD");var L=M.toString()}catch{L=T}else L=T;w.url=L,g.F.has(d.originalRequest)?(w.ts=g.F.get(d.originalRequest),g.F.delete(d.originalRequest)):w.ts||(w.ts=Date.now()),oE(g,d,w)}catch(P){ai("CMCD_SEGMENT_ERROR","Could not generate response segment CMCD data.",P)}}}});return u.configure(e.g.networking),u}function RE(e,t){return new Xv(e.h,e.i,e.g.streaming,t,function(){e.ob&&Jv(e.ob,!e.G.Ih()),e.l&&e.l.bd(),e.R&&gr(e,"seeking")},function(n){return e.dispatchEvent(n)})}function _E(e,t){var n=e.W()||typeof t=="number"&&t>0;t=new es(e.se,n),t.addEventListener("enter",function(a){Wl(e,"timelineregionenter",a.region)}),t.addEventListener("exit",function(a){Wl(e,"timelineregionexit",a.region)}),t.addEventListener("skip",function(a){var d=a.region;a.seeking||(Wl(e,"timelineregionenter",d),Wl(e,"timelineregionexit",d))});var o=new es(e.ya,n);o.addEventListener("enter",function(a){b0(e,a.region,"metadata")}),n=new es(e.ib,n),n.addEventListener("enter",function(a){a=new Map().set("detail",a.region.emsg),e.dispatchEvent(Dt("emsg",a))});var u=new zp(e.h);return u.g.add(t),u.g.add(o),u.g.add(n),e.re&&u.g.add(e.re),u}function LE(e,t){t=new es(e.ya,t instanceof Date||t>0),t.addEventListener("enter",function(o){b0(e,o.region,"metadata")});var n=new zp(e.h);return n.g.add(t),n}function t2(e,t,n){e.R=new tk,wp(e.R,Go),n2(e),Hl(e),e.Ga=new dt(function(){gr(e)}),e.g.streaming.rebufferingGoal&&e.Ga.Fa(.25),e.j.D(t,"waiting",function(){return gr(e,"waiting")}),e.j.D(t,"canplaythrough",function(){return gr(e,"canplaythrough")}),e.j.D(t,"playing",function(){return gr(e,"playing")}),e.j.D(t,"seeked",function(){return gr(e,"seeked")}),n&&(e.j.D(t,"stalled",function(){return gr(e,"stalled")}),e.j.D(t,"progress",function(){return gr(e,"progress")}),e.j.D(t,"timeupdate",function(){return gr(e,"timeupdate")}))}function n2(e){var t=e.g.streaming.rebufferingGoal;e.R.i.set(Fs,Math.min(.5,t/2)).set(Go,t)}function gr(e,t){if(e.g.streaming.rebufferingGoal){t=e.H?qo(e.H):!1,t=e.ae()||t||e.G.ki();var n=yv(e.h.buffered,e.h.currentTime),o=e.R,u=o.i.get(o.g);wp(o,t||n>=u&&n>0?Fs:Go)&&Hl(e)}else if(t){switch(n=void 0,t){case"seeking":case"waiting":n=Go;break;case"canplaythrough":case"playing":case"seeked":n=Fs}n!==void 0&&wp(e.R,n)&&Hl(e)}}function PE(e,t,n,o,u){return new bv(e,t,n,u,o)}function DE(e){return new ix(e.i,{Hc:function(){return e.G?e.G.He():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},Pb:function(){return e.Pb()},video:e.h,Z:e.H,tc:e.J,onError:function(t){return iu(e,t)},onEvent:function(t){return e.dispatchEvent(t)},vf:function(t,n,o){var u=t.startTime,a=t.endTime,d=n.type;if(d!=lt){if(e.G){e.G.xi();var p=Pp(e.H,d);!e.W()&&e.h.paused&&!e.h.seeking&&p!=null&&p>0&&e.G.He()<p&&e.G.Wf(p)}gr(e)}o=new Map().set("start",u).set("end",a).set("contentType",d).set("isMuxed",o),e.dispatchEvent(Dt("segmentappended",o)),e.o&&n.fastSwitching&&t.Xc&&t.ce&&e.o.trySuggestStreams()},Dk:function(t,n){(n=n.xd)&&e.re&&qk(e.re,n,t)},Ph:function(t,n){var o=e.F;if(o.h.parseInbandPsshEnabled&&!o.M&&["audio","video"].includes(t)){t=new yp(et(n)),n=0;for(var u=R(t.data),a=u.next();!a.done;a=u.next())n+=a.value.length;if(n==0)o=Promise.resolve();else{for(n=new Uint8Array(n),u=0,t=R(t.data),a=t.next();!a.done;a=t.next())a=a.value,n.set(a,u),u+=a.length;xl(o,"cenc",n),o=o.m}}else o=Promise.resolve();return o},disableStream:function(t,n){return e.disableStream(t,n)},cl:function(t,n){return!(e.g.abr.enabled&&n.fastSwitching&&t.Xc&&t.ce)}})}m.configure=function(e,t){var n=this.getConfiguration();if(arguments.length==2&&typeof e=="string"&&(e=sc(e,t)),"preferredVariantRole"in e&&(yt("preferredVariantRole configuration","Please Use preferredAudioRole instead."),e.preferredAudioRole=e.preferredVariantRole,delete e.preferredVariantRole),e.streaming&&"forceTransmuxTS"in e.streaming&&(yt("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(yt("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){yt("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var o=Me();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&o.Ea()==="WEBKIT",delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&typeof e.streaming.liveSync=="boolean"&&(yt("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),o=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=o),e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){o=e.streaming.liveSyncMinLatency||0;var u=Math.abs((e.streaming.liveSyncMaxLatency||1)-o)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=o+u,e.streaming.liveSync.targetLatencyTolerance=u}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(yt("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(yt("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(yt("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(yt("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(yt("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(yt("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(yt("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(yt("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){yt("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var a=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return a},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(yt("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(yt("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(yt("manifest.dash.enableAudioGroups configuration","Please Use manifest.enableAudioGroups instead."),e.manifest.enableAudioGroups=e.manifest.dash.enableAudioGroups,delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(yt("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(yt("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(yt("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(yt("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(yt("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(yt("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(yt("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){o=!1;for(var d in e.drm.advanced){var p=e.drm.advanced[d];u=p.videoRobustness,p=p.audioRobustness,"videoRobustness"in e.drm.advanced[d]&&!Array.isArray(e.drm.advanced[d].videoRobustness)&&(e.drm.advanced[d].videoRobustness=[u],o=!0),"audioRobustness"in e.drm.advanced[d]&&!Array.isArray(e.drm.advanced[d].audioRobustness)&&(e.drm.advanced[d].audioRobustness=[p],o=!0)}o&&yt("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(yt("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(yt("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(yt("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),d=Nr(this.g,e,sr(this)),i2(this,n),d},m.tj=function(e){this.Zf=e};function i2(e,t){if(e.ze=new Sp(e.g,e.xa,e.F),e.I){var n=Wi(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(n.disableVideo=!0),e.I.configure(n)}if(e.F&&e.F.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=qi&&nv(e.ze,e.i)&&Yn(e)}catch(u){iu(e,u)}e.o&&ao(e),n=e.l.o,!n||n.allowedByApplication&&n.allowedByKeySystem||fo(e)}if(e.J&&e.J.configure(e.g.networking),e.H&&(e.H.configure(e.g.mediaSource),e.H.Ga=e.g.manifest.segmentRelativeVttTiming),e.u&&bc(e),e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),v2(e)),e.R&&n2(e),e.Ga&&(e.g.streaming.rebufferingGoal?e.Ga.Fa(.25):e.Ga.stop()),e.i&&_0(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C&&e.C.configure(e.g.ads),e.K&&e.K.configure(e.g.cmcd),e.wa&&e.wa.configure(e.g.cmsd),e.Da&&e.Da.configure(e.g.queue),e.m==In&&e.N.getConfiguration){n=e.N.getConfiguration();var o=!1;t.preferredVideoHdrLevel!=e.g.preferredVideoHdrLevel&&n.hdrLevel!=e.g.preferredVideoHdrLevel&&(n.hdrLevel=e.g.preferredVideoHdrLevel,o=!0),t.preferredVideoLayout!=e.g.preferredVideoLayout&&n.videoLayout!=e.g.preferredVideoLayout&&(n.videoLayout=e.g.preferredVideoLayout,o=!0),t.preferSpatialAudio!=e.g.preferSpatialAudio&&n.spatialAudio!=e.g.preferSpatialAudio&&(n.spatialAudio=e.g.preferSpatialAudio,o=!0),t.preferredVideoRole!=e.g.preferredVideoRole&&n.videoRole!=e.g.preferredVideoRole&&(n.videoRole=e.g.preferredVideoRole,o=!0),o&&(e.N.configure(n),fo(e))}}m.getConfiguration=function(){var e=sr(this);return Nr(e,this.g,sr(this)),e},m.Dj=function(){return this.Zf},m.di=function(){var e=sr(this);return Nr(e,this.g,sr(this)),cx(this.g,sr(this))},m.$h=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Va().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},m.Ii=function(){var e=this.getConfiguration(),t;for(t in this.g)delete this.g[t];Nr(this.g,sr(this),sr(this)),i2(this,e)},m.Lj=function(){return this.m},m.bi=function(){return this.i?this.i.type:null},m.Pj=function(){return this.h},m.Wb=function(){return this.J},m.rd=function(){return this.X},m.Zh=function(){return this.C?this.C:null},m.ei=function(){return this.Da?this.Da:null},m.W=function(){return this.i&&!this.va()?this.i.presentationTimeline.W():this.h&&(this.h.src||this.va())?this.h.duration==1/0:!1},m.Vc=function(){return this.i?this.i.presentationTimeline.Vc():!1},m.ik=function(){if(this.i&&!this.va()){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&(this.h.src||this.va())?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},m.rk=function(){if(this.i&&!this.va()){var e=this.i.variants;return e.length?(e=e[0],e.audio||!e.video?!1:!e.video.codecs.includes(",")):!1}return this.h&&(this.h.src||this.va())&&this.h.audioTracks?this.h.audioTracks.length==0:!1},m.Va=function(){if(this.i&&!this.va()){if(!this.Sa&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Xb(),end:e.Hb()}}if(this.h&&(this.h.src||this.va())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),n),{start:t,end:e}}return{start:0,end:0}},m.fk=function(){this.W()&&(this.h.currentTime=this.Va().end)},m.jk=function(){return this.Sa},m.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},m.drmInfo=function(){return this.F?this.F.g:null},m.Ud=function(){return this.F?this.F.Ud():1/0},m.Gg=function(){return this.F?this.F.Gg():[]},m.We=function(){return this.F?this.F.We():{}},m.Og=function(){return this.R?this.R.g==Go:!!this.X},m.Pb=function(){return this.h?this.M?this.M.i:1:0},m.Gh=function(e){this.m==In&&this.l&&rx(this.l,e)},m.qe=function(e,t){t=t===void 0?!0:t,e==0?st("A trick play rate of 0 is unsupported!"):(this.M.set(e),this.m==In&&(this.o.playbackRateChanged(e),this.Gh(t&&e!=1)),f2(this,e))},m.Nd=function(){var e=this.M.Tc();this.m==gi&&this.M.set(e),this.m==In&&(this.M.set(e),this.o.playbackRateChanged(e),this.Gh(!1)),this.ac.Qa()},m.lc=function(){if(this.i&&!this.va()){for(var e=this.l?this.l.o:null,t=[],n=0,o=R(this.i.variants),u=o.next();!u.done;u=o.next())if(u=u.value,vl(u)){var a=zo(u);a.active=u==e,a.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(a.active=!0),a.active&&n++,t.push(a)}return t}if(this.h&&this.h.audioTracks){var d=h2(this);return e=Array.from(this.h.audioTracks),e.length?e.map(function(p){return Cf(p,d)}):d?[Cf(null,d)]:[]}return[]},m.Lc=function(){if(this.i){if(this.va())return[];for(var e=this.l?this.l.B:null,t=[],n=R(this.i.textStreams),o=n.next();!o.done;o=n.next()){o=o.value;var u=Vo(o);u.active=o==e,t.push(u)}return t}return this.h&&this.h.src&&this.h.textTracks?kc(this).map(function(a){return w1(a)}):[]},m.Ij=function(){var e=this.Fe;return this.i&&(e=this.i.imageStreams),e.map(function(t){return cp(t)})},m.wj=function(e){var t=this,n,o;return $(function(u){return u.g==1?D(u,o2(t,e),2):(n=u.h,n?(o=[],n.segmentIndex.Gb(function(a){var d=r2(a.tilesLayout||n.tilesLayout);if(d)for(var p=d.rows*d.columns,g=a.j-a.startTime,y=0;y<p;y++){var w=s2(a,n,a.startTime+g*y/p,d);o.push(w)}}),n.closeSegmentIndex&&n.closeSegmentIndex(),u.return(o)):u.return(null))})};function r2(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}m.Zj=function(e,t){var n=this,o,u,a,d;return $(function(p){return p.g==1?D(p,o2(n,e),2):(o=p.h,!o||(u=o.segmentIndex.find(t),u==null)?p.return(null):(a=o.segmentIndex.get(u),(d=r2(a.tilesLayout||o.tilesLayout))?p.return(s2(a,o,t,d)):p.return(null)))})};function o2(e,t){var n,o;return $(function(u){return u.g==1?e.m!=In&&e.m!=gi||(n=e.Fe,e.i&&(n=e.i.imageStreams),o=n[0],!o)?u.return(null):(t!=null&&(o=n.find(function(a){return a.id==t})),o?o.segmentIndex?u.A(2):D(u,o.createSegmentIndex(),2):u.return(null)):u.return(o)})}function s2(e,t,n,o){var u=t.width||0,a=t.height||0,d=u/o.columns,p=a/o.rows,g=o.columns*o.rows,y=e.j-e.startTime;y=e.B||y/g;var w=e.startTime,T=0,M=0;return g>1&&(M=Math.floor((n-e.startTime)/y),w=e.startTime+M*y,T=M%o.columns*d,M=Math.floor(M/o.columns)*p),o=!1,(n=e.thumbnailSprite)&&(o=!0,p=n.height,T=n.positionX,M=n.positionY,d=n.width),{segment:e,imageHeight:a,imageWidth:u,height:p,positionX:T,positionY:M,startTime:w,duration:y,uris:e.P(),startByte:e.Jc(),endByte:e.Gc(),width:d,sprite:o,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}m.mh=function(e){function t(){var o=n.i.textStreams.find(function(u){return u.id==e.id});o&&o!=n.l.B&&(s0(n.B.h,o,!1),Zf(n.l,o),ns(n),Xl(n),n.yc=o.language)}var n=this;this.i&&this.G&&(t(),!this.va())||(function(){if(n.h&&n.h.textTracks){var o=kc(n),u=o.find(function(p){return Tf(p)===e.id});if(u){if(n.u instanceof pn){o=R(o);for(var a=o.next();!a.done;a=o.next()){a=a.value;var d=a===u?n.$?"showing":"hidden":"disabled";a.mode!==d&&(a.mode=d)}}else o=o.find(function(p){return p.mode!=="disabled"}),o!==u&&(o&&(o.mode="disabled",n.j.Ma(o,"cuechange"),n.u.remove(0,1/0)),u&&u2(n,u));ns(n),Xl(n)}}})()};function u2(e,t){e.j.D(t,"cuechange",function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},o=[],u=Array.from(t.activeCues||[]);u=R(u);for(var a=u.next();!a.done;a=u.next()){if(a=a.value,a.endTime===1/0||a.endTime<a.startTime)a=null;else{var d=new Ut(a.startTime,a.endTime,a.text);d.line=typeof a.line=="number"?a.line:null,a.lineAlign&&(d.lineAlign=a.lineAlign),d.lineInterpretation=a.snapToLines?ll:1,d.position=typeof a.position=="number"?a.position:null,a.positionAlign&&(d.positionAlign=a.positionAlign),d.size=a.size,d.textAlign=a.align,a.vertical==="lr"?d.writingMode="vertical-lr":a.vertical==="rl"&&(d.writingMode="vertical-rl"),a.region&&(d.region.id=a.region.id,d.region.height=a.region.lines,d.region.heightUnits=2,d.region.regionAnchorX=a.region.regionAnchorX,d.region.regionAnchorY=a.region.regionAnchorY,d.region.scroll=a.region.scroll,d.region.viewportAnchorX=a.region.viewportAnchorX,d.region.viewportAnchorY=a.region.viewportAnchorY,d.region.viewportAnchorUnits=fi,d.region.width=a.region.width,d.region.widthUnits=fi),mf(d),a=d}a&&((d=e.g.mediaSource.modifyCueCallback)&&d(a,null,n),o.push(a))}e.u.append(o)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}m.Ff=function(e,t,n){function o(){var a=u.i.variants.find(function(p){return p.id==e.id});if(a&&vl(a)){var d=u.l.o;u.g.abr.enabled&&(d.video!=a.video||d.audio&&a.audio&&d.audio.language==a.audio.language&&d.audio.channelsCount==a.audio.channelsCount&&d.audio.label==a.audio.label)&&st("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),u.va()?Gl(u,a,!1,!1,0):Gl(u,a,!1,t||!1,n||0),u.N.configure({language:a.language,role:a.audio&&a.audio.roles&&a.audio.roles[0]||"",videoRole:a.video&&a.video.roles&&a.video.roles[0]||"",channelCount:a.audio&&a.audio.channelsCount?a.audio.channelsCount:0,hdrLevel:a.video&&a.video.hdr?a.video.hdr:"",spatialAudio:a.audio&&a.audio.spatialAudio?a.audio.spatialAudio:!1,videoLayout:a.video&&a.video.videoLayout?a.video.videoLayout:"",audioLabel:a.audio&&a.audio.label?a.audio.label:"",videoLabel:a.video&&a.video.label?a.video.label:"",codecSwitchingStrategy:u.g.mediaSource.codecSwitchingStrategy,audioCodec:a.audio&&a.audio.codecs?a.audio.codecs:"",activeAudioCodec:d.audio&&d.audio.codecs?d.audio.codecs:"",activeAudioChannelCount:d.audio&&d.audio.channelsCount?d.audio.channelsCount:0,preferredAudioCodecs:u.g.preferredAudioCodecs,preferredAudioChannelCount:u.g.preferredAudioChannelCount}),ao(u)}}var u=this;t=t===void 0?!1:t,n=n===void 0?0:n,!(this.i&&this.G&&(o(),!this.va()))&&(function(){if(e.originalAudioId&&u.h&&u.h.audioTracks){var a=Array.from(u.h.audioTracks);a=R(a);for(var d=a.next();!d.done;d=a.next())if(d=d.value,Tf(d)==e.id){I0(u,d);break}}})()},m.Uk=function(e,t){function n(){var u=o.N.getConfiguration();u.audioCodec=e.codecs||"",u.audioLabel=e.label||"",u.channelCount=e.channelsCount||0,u.language=e.language,u.role=e.roles[0]||"",u.spatialAudio=e.spatialAudio,o.N.configure(u),fo(o,!0,t,!1,!1)}var o=this;t=t===void 0?0:t,!(this.i&&this.G&&(n(),!this.va()))&&(function(){if(o.h&&o.h.audioTracks){var u=St(e.language),a=Array.from(o.h.audioTracks),d=null;a=R(a);for(var p=a.next();!p.done;p=a.next()){p=p.value;var g=p.language||"und";if(p.label==e.label&&St(g)==u&&p.kind==e.roles[0]){d=p;break}}d&&I0(o,d)}})()},m.getAudioTracks=function(){if(this.i&&!this.va()){var e=this.lc();if(!e.length)return[];var t=e.find(function(a){return a.active});if(!t)return[];var n=e;if(this.m!=In||this.va()||(n=e.filter(function(a){return a.originalVideoId===t.originalVideoId&&a.audioCodec})),!n.length)return[];e=new Map,n=R(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var u=o.originalAudioId;u||o.audioId==null||(u=String(o.audioId)),u&&(u+=[o.language,o.label,o.channelsCount,o.spatialAudio].join("_"),e.set(u,{active:o.active,language:o.language,label:o.label,mimeType:o.audioMimeType,codecs:o.audioCodec,primary:o.primary,roles:o.audioRoles||[],accessibilityPurpose:o.accessibilityPurpose,channelsCount:o.channelsCount,audioSamplingRate:o.audioSamplingRate,spatialAudio:o.spatialAudio,originalLanguage:o.originalLanguage}))}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(a){var d=a.language;return d={active:a.enabled,language:St(d||"und"),label:a.label,mimeType:null,codecs:null,primary:a.kind=="main",roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:d},a.kind&&d.roles.push(a.kind),a.configuration&&(a.configuration.codec&&(d.codecs=a.configuration.codec),a.configuration.sampleRate&&(d.audioSamplingRate=a.configuration.sampleRate),a.configuration.numberOfChannels&&(d.channelsCount=a.configuration.numberOfChannels)),d}):[]},m.Wk=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?0:n;var o=this.lc();if(o.length){var u=o.find(function(a){return a.active});u&&(o=o.find(function(a){return a.audioId===u.audioId&&(a.videoBandwidth||a.bandwidth)==e.bandwidth&&a.width==e.width&&a.height==e.height&&a.frameRate==e.frameRate&&a.pixelAspectRatio==e.pixelAspectRatio&&a.hdr==e.hdr&&a.colorGamut==e.colorGamut&&a.videoLayout==e.videoLayout&&a.videoMimeType==e.mimeType&&a.videoCodec==e.codecs&&Rt(a.videoRoles,e.roles)&&a.videoLabel==e.label}))&&!o.active&&this.Ff(o,t,n)}},m.getVideoTracks=function(){if(this.m==gi||this.va())return[];var e=this.lc();if(!e.length)return[];var t=e.find(function(a){return a.active});if(!t)return[];var n=e.filter(function(a){return a.originalAudioId===t.originalAudioId&&a.audioId===t.audioId&&a.audioGroupId===t.audioGroupId&&a.videoCodec});if(!n.length)return[];e=new Map,n=R(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var u=o.originalVideoId;u||o.videoId==null||(u=String(o.videoId)),u&&e.set(u,{active:o.active,bandwidth:o.videoBandwidth||o.bandwidth,width:o.width,height:o.height,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,hdr:o.hdr,colorGamut:o.colorGamut,videoLayout:o.videoLayout,mimeType:o.videoMimeType,codecs:o.videoCodec,roles:o.videoRoles||[],label:o.videoLabel})}return Array.from(e.values())},m.yj=function(){return S2(this.lc())},m.Xj=function(){return S2(this.Lc())},m.xj=function(){return Array.from(w2(this.lc()))},m.Wj=function(){return Array.from(w2(this.Lc()))},m.Ni=function(e,t,n,o,u,a,d){function p(){function y(P,N){return P.video||N.video?P.video&&N.video?Math.abs((P.video.height||0)-(N.video.height||0))+Math.abs((P.video.width||0)-(N.video.width||0)):1/0:0}var w=g.l.o;g.N=g.g.adaptationSetCriteriaFactory(),g.N.configure({language:e,role:t||"",videoRole:w.video&&w.video.roles&&w.video.roles[0]||"",channelCount:n||0,hdrLevel:"",spatialAudio:a||!1,videoLayout:"",audioLabel:d||"",videoLabel:"",codecSwitchingStrategy:g.g.mediaSource.codecSwitchingStrategy,audioCodec:u||"",activeAudioCodec:w.audio&&w.audio.codecs?w.audio.codecs:"",activeAudioChannelCount:w.audio&&w.audio.channelsCount?w.audio.channelsCount:0,preferredAudioCodecs:g.g.preferredAudioCodecs,preferredAudioChannelCount:g.g.preferredAudioChannelCount});var T=g.N.create(g.i.variants),M=null;T=R(T.values());for(var L=T.next();!L.done;L=T.next())L=L.value,vl(L)&&(!M||y(M,w)>y(L,w))&&(M=L);M!=w&&(M?(w=zo(M),g.Ff(w,!0,o||0)):fo(g))}var g=this;n=n===void 0?0:n,o=o===void 0?0:o,u=u===void 0?"":u,a=a===void 0?!1:a,d=d===void 0?"":d,!(this.i&&this.G&&(p(),!this.va()))&&(function(){if(g.h&&g.h.audioTracks){var y=Ls(g.lc(),e,t||"",!1)[0];y&&g.Ff(y)}})()},m.kh=function(e,t,n){function o(){u.yc=e,u.Kd=t||"",u.ye=n||!1;var a=Ls(u.i.textStreams,u.yc,u.Kd,u.ye)[0]||null;a&&a!=u.l.B&&(s0(u.B.h,a,!1),u.g.streaming.alwaysStreamText||u.Pg())&&(Zf(u.l,a),ns(u),Xl(u))}var u=this;n=n===void 0?!1:n,!(this.i&&this.G&&(o(),!this.va()))&&(function(){var a=Ls(u.Lc(),e,t||"",n||!1)[0];a&&u.mh(a)})()},m.Vk=function(e,t,n){function o(){for(var a=null,d=R(u.i.variants),p=d.next();!p.done;p=d.next())if(p=p.value,p.audio.label==e){a=p;break}a!=null&&(u.N=u.g.adaptationSetCriteriaFactory(),u.N.configure({language:a.language,role:"",videoRole:"",channelCount:0,hdrLevel:"",spatialAudio:!1,videoLayout:"",videoLabel:"",audioLabel:e,codecSwitchingStrategy:u.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:u.g.preferredAudioCodecs,preferredAudioChannelCount:u.g.preferredAudioChannelCount}),fo(u,t,n))}var u=this;t=t===void 0?!0:t,n=n===void 0?0:n,!(this.i&&this.G&&(o(),!this.va()))&&(function(){if(u.h&&u.h.audioTracks){var a=Array.from(u.h.audioTracks),d=null;a=R(a);for(var p=a.next();!p.done;p=a.next())p=p.value,p.label==e&&(d=p);d&&I0(u,d)}})()},m.Pg=function(){var e=this.$;return this.u?this.u.isTextVisible():e},m.Cj=function(){return this.kb.map(function(e){return Vo(e)})},m.Aj=function(e){if(yt("getChapters","Please use an getChaptersAsync."),!this.kb.length)return[];var t=St(e);if(e=this.kb.filter(function(a){return St(a.language)==t}),!e.length)return[];var n=[],o=new Set;e=R(e);for(var u=e.next();!u.done;u=e.next())u=u.value,u.segmentIndex&&u.segmentIndex.Gb(function(a){var d=a.P()[0],p=a.startTime+"-"+a.endTime+"-"+d;a={id:p,title:d,startTime:a.startTime,endTime:a.endTime},o.has(p)||(n.push(a),o.add(p))});return n},m.Bj=function(e){var t=this,n,o,u,a,d,p,g;return $(function(y){switch(y.g){case 1:if(!t.kb.length)return y.return([]);if(n=St(e),o=t.kb.filter(function(w){return St(w.language)==n}),!o.length)return y.return([]);u=[],a=new Set,d=R(o),p=d.next();case 2:if(p.done){y.A(4);break}if(g=p.value,g.segmentIndex){y.A(5);break}return D(y,g.createSegmentIndex(),5);case 5:g.segmentIndex.Gb(function(w){var T=w.P()[0],M=w.startTime+"-"+w.endTime+"-"+T;w={id:M,title:T,startTime:w.startTime,endTime:w.endTime},a.has(M)||(u.push(w),a.add(M))}),p=d.next(),y.A(2);break;case 4:return y.return(u)}})};function kc(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function OE(e){return Array.from(e.h.textTracks).find(function(t){return t.label=="Shaka Player TextTrack"})}function NE(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}m.rh=function(e){e=!!e,this.$!=e&&(this.$=e,this.m==In?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.B||(e=Ls(this.i.textStreams,this.yc,this.Kd,this.ye),e.length>0&&(Zf(this.l,e[0]),ns(this),Xl(this))):uA(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),y2(this))},m.Qj=function(){if(this.G)var e=this.G.He();else{if(this.O==null)return new Date;if(this.O instanceof Date)return this.O;e=this.O}if(this.i&&!this.va()){var t=this.i.presentationTimeline;return new Date(((t.m||t.i)+e)*1e3)}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+e*1e3)):null},m.Ig=function(){if(this.i&&!this.va()){var e=this.i.presentationTimeline;return e=e.m||e.i,e===null?null:new Date(e*1e3)}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},m.Ye=function(){return this.W()&&this.i?this.i.presentationTimeline.Ye():null},m.Fc=function(){if(this.m==In)return this.H.Fc();var e={total:[],audio:[],video:[],text:[]};return this.m==gi&&(e.total=Pr(this.h.buffered)),e};function l2(e){return!e.h||!e.h.currentTime?null:(e=e.Ig().getTime()+e.h.currentTime*1e3,Math.floor(Date.now()-e))}m.getBandwidthEstimate=function(){return this.o?this.o.getBandwidthEstimate():NaN},m.getStats=function(){if(this.m!=In&&this.m!=gi)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};E0(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.W()||DA(this.B,Math.round(100*t)),this.G&&(this.B.S=this.G.Hh(),this.B.V=this.G.Jh()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),PA(this.B,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.B.N=Number(t.corruptedVideoFrames)),this.B.o=this.F?$4(this.F):NaN,mx(this.B,e.videoWidth||NaN,e.videoHeight||NaN),this.B.l="",this.W()&&this.Ig()!=null&&(e=l2(this)||0,this.B.F=e/1e3),t=this.lc().find(function(u){return u.active}),e=this.Lc().find(function(u){return u.active}),t){if(t.bandwidth){var n=this.M?this.M.i:1,o=n*t.bandwidth;e&&e.bandwidth&&(o+=n*e.bandwidth),this.B.B=o}t.width&&t.height&&mx(this.B,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.B.l=t)}return this.m!=In||this.va()||(this.i&&(this.B.I=this.i.periodCount,this.B.H=this.i.gapCount,this.i.presentationTimeline&&(this.B.K=this.i.presentationTimeline.h)),e=this.o.getBandwidthEstimate(),this.B.u=e),this.m==gi&&yx(this.B,NaN),OA(this.B)},m.Md=function(e,t,n,o,u,a,d){d=d===void 0?!1:d;var p=this,g,y,w,T,M,L,P,N,O,F,B,V;return $(function(Y){switch(Y.g){case 1:if(p.m!=In&&p.m!=gi)throw new q(1,7,7004);if(n!="subtitles"&&n!="captions"&&st("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),o){Y.A(2);break}return D(Y,A0(p,e),3);case 3:o=Y.h;case 2:if(g=[],p.C&&(g=p.C.getCuePoints()),p.m!=gi){Y.A(4);break}return y=Me(),d&&y.Ea()==="WEBKIT"&&(n="forced"),D(Y,UE(p,e,t,n,o,a||"",g),5);case 5:if(w=Y.h,w.track)return Yn(p),Y.return(w1(w.track));throw new q(1,2,2012);case 4:if(T=cn,M=p.Va(),L=M.end-M.start,p.i&&(L=p.i.presentationTimeline.getDuration()),L==1/0)throw new q(1,4,4033);if(!g.length){Y.A(6);break}return D(Y,Ac(p,e,p.J,p.g.streaming.retryParameters),7);case 7:P=Y.h,N=a2(p,P,o,g),O=new Blob([N],{type:"text/vtt"}),e=Np(O),o="text/vtt";case 6:if(F={id:p.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Yf(0,L,[e]),mimeType:o||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:a||null,type:T.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!d,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([en(o||"",u||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},B=en(F.mimeType,F.codecs),V=dl(B),!V)throw new q(2,2,2014,o);return p.i.textStreams.push(F),Yn(p),Y.return(Vo(F))}})},m.Le=function(e,t){var n=this,o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y;return $(function(J){switch(J.g){case 1:if(n.m!=In&&n.m!=gi)throw new q(1,7,7004);if(t){J.A(2);break}return D(J,A0(n,e),3);case 3:t=J.h;case 2:if(t!="text/vtt")throw new q(1,2,2017,e);if(o=cn,u=n.Va(),a=u.end-u.start,n.i&&(a=n.i.presentationTimeline.getDuration()),a==1/0)throw new q(1,4,4045);return D(J,Ac(n,e,n.J,n.g.streaming.retryParameters),4);case 4:if(d=J.h,p=cl(t),!p)throw new q(2,2,2014,t);for(g=p(),y={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},w=et(d),T=g.parseMedia(w,y,e,[]),M=[],L=R(T),P=L.next(),N={};!P.done;N={Sf:void 0,nd:void 0},P=L.next())N.nd=P.value,N.Sf=null,O=(function(H){return function(){return H.Sf==null&&(H.Sf=wn([e],[H.nd.payload])),H.Sf||[]}})(N),F=new Ve(N.nd.startTime,N.nd.endTime,O,0,null,null,0,0,1/0),N.nd.payload.includes("#xywh")&&(B=N.nd.payload.split("#xywh=")[1].split(","),B.length===4&&F.If({height:parseInt(B[3],10),positionX:parseInt(B[0],10),positionY:parseInt(B[1],10),width:parseInt(B[2],10)})),M.push(F);if(V=t,!M.length){J.A(5);break}return D(J,ts(M[0].P()[0],n.J,n.g.manifest.retryParameters),6);case 6:V=J.h;case 5:return Y={id:n.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vt(M),mimeType:V||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:o.Uf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([en(V||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},n.m==gi?n.Fe.push(Y):n.i.imageStreams.push(Y),Yn(n),J.return(cp(Y))}})},m.Ke=function(e,t,n){var o=this,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B;return $(function(V){switch(V.g){case 1:if(o.m!=In&&o.m!=gi)throw new q(1,7,7004);if(n){V.A(2);break}return D(V,A0(o,e),3);case 3:n=V.h;case 2:if(u=cn,a=o.Va(),d=a.end-a.start,o.i&&(d=o.i.presentationTimeline.getDuration()),d==1/0)throw new q(1,4,4054);return D(V,Ac(o,e,o.J,o.g.streaming.retryParameters),4);case 4:if(p=V.h,g=cl(n),!g)throw new q(2,2,2014,n);for(y=g(),w={periodStart:0,segmentStart:0,segmentEnd:d,vttOffset:0},T=et(p),M=y.parseMedia(T,w,e,[]),L=[],P=R(M),N=P.next(),O={};!N.done;O={Te:void 0},N=P.next())O.Te=N.value,F=new Ve(O.Te.startTime,O.Te.endTime,(function(Y){return function(){return[Y.Te.payload]}})(O),0,null,null,0,0,1/0),L.push(F);return B={id:o.Ae++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vt(L),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:u.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([en("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},o.kb.push(B),Yn(o),V.return(Vo(B))}})};function A0(e,t){var n;return $(function(o){switch(o.g){case 1:return ce(o,2),D(o,ts(t,e.J,e.g.streaming.retryParameters),4);case 4:n=o.h,X(o,3);break;case 2:ie(o);case 3:if(n)return o.return(n);throw new q(1,2,2011,t)}})}function UE(e,t,n,o,u,a,d){var p,g,y,w;return $(function(T){if(T.g==1)return u!="text/vtt"||d.length?D(T,Ac(e,t,e.J,e.g.streaming.retryParameters),3):T.A(2);T.g!=2&&(p=T.h,g=a2(e,p,u,d),y=new Blob([g],{type:"text/vtt"}),t=Np(y),u="text/vtt"),w=document.createElement("track");e:{var M=e.K,L=t;try{if(!M.g.enabled){var P=L;break e}var N=p0(M);N.ot=v0,N.su=!0;var O=Vl(N);P=pc(L,O);break e}catch(F){ai("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",F),P=L;break e}P=void 0}return w.src=P,w.label=a,w.kind=o,w.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(w),e.Yf.push(w),T.return(w)})}function Ac(e,t,n,o){var u,a,d;return $(function(p){if(p.g==1){u=Di,a=un([t],o),a.method="GET";var g=e.K;try{g.g.enabled&&tu(g,a,{ot:v0,su:!0})}catch(y){ai("CMCD_TEXT_ERROR","Could not generate text CMCD data.",y)}return D(p,n.request(u,a).promise,2)}return d=p.h,p.return(d.data)})}function a2(e,t,n,o){var u=cl(n);if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=et(t),t=n.parseMedia(t,e,null,[]),QA(t,o);throw new q(2,2,2014,n)}m.al=function(e,t){this.xa.width=e,this.xa.height=t},m.gh=function(e){if(this.m==In){var t=this.l;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.C)t=!1;else{for(var n=R(t.h.values()),o=n.next();!o.done;o=n.next())o=o.value,!o.Xd||o.Ja||o.sb||(o.Xd=!1,$n(t,o,e));t=!0}}else t=!1;return t},m.Hg=function(){return st("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},m.Mj=function(){return this.uc},m.Gj=function(){var e={video:null,audio:null,text:null};if(this.m!=In)return e;var t=this.l.o,n=this.h.currentTime;t=R([t.video,t.audio,this.l.B]);for(var o=t.next();!o.done;o=t.next())if((o=o.value)&&o.segmentIndex){var u=o.segmentIndex.find(n);u=o.segmentIndex.get(u),u={codecs:u.codecs||o.codecs,mimeType:u.mimeType||o.mimeType,bandwidth:u.bandwidth||o.bandwidth},o.type=="video"?(u.width=o.width,u.height=o.height,e.video=u):o.type=="audio"?e.audio=u:o.type==lt&&(e.text=u)}return e};function sr(e){var t=Zs();return t.streaming.failureCallback=function(n){if(e.W()){var o=null;n.code==1001||n.code==1002?(o=1,e.g.streaming.lowLatencyMode&&(o=.1)):n.code==1003&&(o=.1),o!=null&&(n.severity=1,e.gh(o))}},t.textDisplayFactory=function(){if(e.ve){var n=e.h;n=!(n.webkitDisplayingFullscreen||n.webkitPresentationMode&&n.webkitPresentationMode!="inline")}else n=!1;return n?new On(e.h,e.ve):"track"in document.createElement("track")?new pn(e):new Dn},t}m.Ti=function(e){this.ve=e};function BE(e,t){for(var n=new Set,o=R(t.textStreams),u=o.next();!u.done;u=o.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(o=R(t.variants),u=o.next();!u.done;u=o.next())if((u=u.value.video)&&u.closedCaptions){for(var a=R(u.closedCaptions.keys()),d=a.next();!d.done;d=a.next())if(d=d.value,!n.has(d)){var p=d.startsWith("CC")?"application/cea-608":"application/cea-708",g=new qt,y=u.closedCaptions.get(d);p={id:e.Ae++,originalId:d,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:g,mimeType:p,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:y,originalLanguage:y,label:null,type:lt,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([en(p,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(p),n.add(d)}}}function FE(e,t){var n,o,u,a,d;return $(function(p){return p.g==1?(n=e.audio,o=e.video,u=function(g,y){var w,T,M;return $(function(L){return L.g==1?g?g.segmentIndex?L.A(2):D(L,g.createSegmentIndex(),2):L.return(null):(T=(w=g.segmentIndex.Vb(y))?w.next().value:null,T?(M=T.startTime,L.return(M)):L.return(null))})},D(p,u(n,t),2)):p.g!=3?(a=p.h,D(p,u(o,t),3)):(d=p.h,d!=null&&a!=null?p.return(Math.max(d,a)):d!=null?p.return(d):a!=null?p.return(a):p.return(t))})}function Hl(e){var t=e.Og();if(e.B&&e.R&&e.G){if(e.g.streaming.rebufferingGoal==0){var n=e.M;n.j=!1,$p(n)}else n=e.M,n.j=t,$p(n);if(e.K&&(n=e.K,t||n.C||(n.C=!0),n.C&&t&&(n.I=!0,Nn(n,"ps",{dd:"r"})),n.J=t),E0(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Je<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var o=e.g.streaming.liveSync.targetLatencyTolerance,u=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.V&&(e.V=Math.min(e.V+ ++e.Je*u,n-o))}}t=new Map().set("buffering",t),e.dispatchEvent(Dt("buffering",t))}function f2(e,t){e.ac.Qa(),e.ac.D(e.h,"timeupdate",function(){var n=e.h.currentTime,o=e.Va(),u=e.W(),a=u?e.g.streaming.safeSeekOffset:0;t>0?(!u||t>=1)&&Math.floor(n)>=Math.floor(o.end)&&e.Nd():Math.floor(n)<=Math.floor(o.start+a)&&e.Nd()})}function E0(e){if(e.B&&e.R){var t=e.B.g,n="playing";e.R.g==Go?n="buffering":e.ae()?n="ended":e.h.paused&&(n="paused");var o=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:o,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==o?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:o,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Dt("statechanged",n)))}}function c2(e){var t=e.h.playbackRate,n=e.W();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var o=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.$h();u<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=o&&e.qe(o,!1):u==1&&t!==e.M.Tc()&&e.Nd()}if(n&&(n=e.Va(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){o=e.g.streaming.liveSync.targetLatencyTolerance,u=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var a=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var d=e.g.streaming.liveSync.targetLatency,p=d+o,g=Math.max(0,d-o),y=e.g.streaming.liveSync.maxPlaybackRate,w=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(d=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?p=e.i.serviceDescription.targetLatency+o:e.i.serviceDescription.maxLatency!=null&&(p=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?g=Math.max(0,e.i.serviceDescription.targetLatency-o):e.i.serviceDescription.minLatency!=null&&(g=e.i.serviceDescription.minLatency),y=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,w=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.V||typeof d!="number"||(e.V=d);var T=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;u&&e.Zb&&e.V!==null&&typeof d=="number"&&e.Je<T&&Date.now()-e.Zb>a*1e3&&(a=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.V=Math.max(e.V-(d-a)/2,a+o),e.Zb=Date.now()),u&&e.V!==null&&(p=e.V+o,g=e.V-o),d=n.end-e.h.currentTime,o=0,e.m==gi&&(u=e.h.buffered,u.length>0&&(o=u.end(u.length-1),o=Math.max(y,o-n.end))),n=e.g.streaming.liveSync.panicMode,u=e.g.streaming.liveSync.panicThreshold*1e3,a=Date.now()-e.R.h,n&&!w&&(w=e.g.streaming.liveSync.minPlaybackRate),n&&w&&a<=u?t!=w&&e.qe(w,!1):p!=null&&y&&d-o>p?(t!=y&&e.qe(y,!1),e.Zb=null):g!=null&&w&&d-o<g?(t!=w&&e.qe(w,!1),e.Zb=null):t!==e.M.Tc()&&(e.Nd(),e.Zb=Date.now())}}function Ec(e){if(e.h){var t=function(u,a){var d=d===void 0?Number.EPSILON:d;if(u===a)d=!0;else{var p=Math.abs(u-a);d=p<=d?!0:d!==Number.EPSILON?Math.abs(p-d)<=Number.EPSILON:!1}return(d||a>u)&&e.Xf<u?(e.Xf=u,!0):!1},n=e.Va();if(n=n.end-n.start,n=n>0?e.h.currentTime/n:0,!isNaN(n)){if(n*=100,t(0,n))var o=Dt("started");else t(25,n)?o=Dt("firstquartile"):t(50,n)?o=Dt("midpoint"):t(75,n)?o=Dt("thirdquartile"):((t(100,n)||n>100)&&(o=Dt("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.ae()&&e.h.pause());o&&e.dispatchEvent(o)}}}function ao(e){try{rv(e.ze,e.i)}catch(n){return iu(e,n),!1}var t=bf(e.i.variants);return t=e.N.create(t),e=e.o.setVariants(Array.from(t.values())),typeof e=="boolean"?e:!0}function d2(e,t){return t=t===void 0?!1:t,ao(e)?e.o.chooseVariant(t):null}function fo(e,t,n,o,u){t=t===void 0?!0:t,n=n===void 0?0:n,o=o===void 0?!1:o,u=u===void 0?!0:u;var a=d2(e);a&&Gl(e,a,u,t,n,o)}function Gl(e,t,n,o,u,a){a=a===void 0?!1:a;var d=e.l.o;if(t==d)o&&ox(e.l,t,o,u,!0);else{var p=e.B.h;if(p.h!=t&&(p.h=t,p.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),ox(e.l,t,o,u,a,n),o=null,d&&(o=zo(d)),d=zo(t),d.active=!0,e.S&&(u=e.S,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),a=0,p=-1,t.mimeType){case"video/webm":a=1;break;case"video/mp4":a=2}switch(e.bi()){case"DASH":p=1;break;case"HLS":p=0}u.g&&(u.g.setLevelSwitching(t.id,!0),u.g.setContainerFormat(a),u.j||u.g.setStreamingFormat(p))}n?(n=new Map().set("oldTrack",o).set("newTrack",d),n=Dt("adaptation",n),is(e,n)):p2(e,o,d),g2(e,o,d)}}function I0(e,t){var n=Array.from(e.h.audioTracks).find(function(u){return u.enabled});if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var o=h2(e);n=Cf(n,o),t=Cf(t,o),p2(e,n,t),g2(e,n,t)}}function h2(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(t){return t.selected}):null}function Yn(e){var t=Dt("trackschanged");is(e,t),m2(e)}function p2(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),t=Dt("variantchanged",t),is(e,t)}function g2(e,t,n){var o=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(o=!0),o&&m2(e)}function m2(e){var t=Dt("audiotrackschanged");is(e,t)}function ns(e){var t=Dt("textchanged");is(e,t)}function y2(e){var t=Dt("texttrackvisibility");is(e,t)}function v2(e){e.g.abr.enabled||M0(e);var t=new Map().set("newStatus",e.g.abr.enabled);is(e,Dt("abrstatuschanged",t))}function Xl(e){var t=e.Lc().find(function(n){return n.active});t&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(t.language)}function M0(e,t){if(t=t===void 0?!0:t,e.m==In){e.Ce.stop();for(var n=R(e.i.variants),o=n.next();!o.done;o=n.next())o.value.disabledUntilTime=0;t&&ao(e)}}m.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===qi||!navigator.onLine||t==0||!this.i)return!1;if(this.i.variants.some(function(p){var g=p[e.type];return g&&g.id!==e.id&&!p.disabledUntilTime?e.type=="audio"?e.language===g.language:!0:!1})){for(var n=!1,o=!1,u=R(this.i.variants),a=u.next();!a.done;a=u.next()){a=a.value;var d=a[e.type];d&&(d.id===e.id?(a.disabledUntilTime=Date.now()/1e3+t,n=!0):d.trickModeVideo&&d.trickModeVideo.id==e.id&&(o=!0))}return!n&&o?!1:(this.Ce.Fa(1),t=this.Fc().video.reduce(function(p,g){return p+g.end-g.start},0),fo(this,!1,t,!0,!1),!0)}return!1};function iu(e,t){var n,o,u,a,d;return $(function(p){switch(p.g){case 1:if(e.m==qi)return p.return();if(t.severity===1&&e.B.M++,n=!0,!(e.Sa&&e.i&&e.l)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3024&&t.code!=3018){p.A(2);break}return o=Me(),o.Ea()==="WEBKIT"&&t.code==3016?p.return():(ce(p,3),D(p,ic(e.l),5));case 5:u=p.h,n=!u,u&&(a=Dt("mediasourcerecovered"),e.dispatchEvent(a)),X(p,2);break;case 3:ie(p),n=!0;case 2:if(!n)return p.return();t.severity===2&&M0(e,!1),d=Dt("error",new Map().set("detail",t)),e.dispatchEvent(d),d.defaultPrevented&&(t.handled=!0),te(p)}})}m.addFont=function(e,t){return Tk(e,t)};function Wl(e,t,n,o){o=o===void 0?e:o,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),o.dispatchEvent(Dt(t,e))}function x2(e,t,n,o){o=o===void 0?!1:o,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Dt(o?"audiotrackchanged":"mediaqualitychanged",t))}function R0(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new q(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(t<0&&(t+=4294967296),t=t.toString(16)),new q(2,3,3016,n,t,e.h.error.message))}function jE(e,t){var n=Dt("keystatuschanged");e.dispatchEvent(n);var o=Object.keys(t);o.length==1&&o[0]==""&&(o=["00"],t={"00":t[""]});var u=o.length==1&&o[0]=="00";if(n=!1,o.length){o=e.keySystem();for(var a=Us(e.g.drm.clearKeys),d=function(P,N){P.allowedByKeySystem=!0,N=R(N);for(var O=N.next();!O.done;O=N.next())O=O.value,((O=t[u?"00":O])||e.F.M)&&(P.allowedByKeySystem=P.allowedByKeySystem&&!!O&&!ov.includes(O))},p=R(e.i.variants),g=p.next();!g.done;g=p.next()){g=g.value;var y=k4(g);y=R(y);for(var w=y.next();!w.done;w=y.next()){w=w.value;var T=g.allowedByKeySystem;if(w.keyIds.size)if(w.drmInfos.length&&!a.size&&e.i.type=="HLS")for(var M=R(w.drmInfos),L=M.next();!L.done;L=M.next())L=L.value,L.keySystem==o&&(L.keyIds.size?d(g,L.keyIds):d(g,w.keyIds));else d(g,w.keyIds);T!=g.allowedByKeySystem&&(n=!0)}}}n&&(Yn(e),!ao(e))||(n=e.l.o)&&!n.allowedByKeySystem&&fo(e)}function _0(e,t,n){t>0&&(e.W()||e.Si(t)),t=e.getDuration(),n<t&&(e.W()||e.rb(n))}function is(e,t){$(function(n){if(n.g==1)return D(n,Promise.resolve(),2);e.m!=qi&&e.dispatchEvent(t),te(n)})}function w2(e){var t=new Set;e=R(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(St(n.language)):t.add("und");return t}function S2(e){for(var t=new Map,n=new Map,o=0;o<e.length;o++){var u=e[o],a="und",d=[];u.language&&(a=St(u.language)),u.type=="variant"?d=u.audioRoles:d=u.roles,d&&d.length||(d=[""]),t.has(a)||t.set(a,new Set),d=R(d);for(var p=d.next();!p.done;p=d.next())p=p.value,t.get(a).add(p),u.label&&(n.has(a)||n.set(a,new Map),n.get(a).set(p,u.label))}var g=[];return t.forEach(function(y,w){y=R(y);for(var T=y.next();!T.done;T=y.next()){T=T.value;var M=null;n.has(w)&&n.get(w).has(T)&&(M=n.get(w).get(T)),g.push({language:w,role:T,label:M})}}),g}m.va=function(){return this.h&&this.h.remote?this.h.remote.state!="disconnected":!1},m.ae=function(){return!this.h||this.h.ended?!0:this.Sa&&!this.W()&&this.h.currentTime>=this.Va().end},be("shaka.Player",we),we.prototype.isEnded=we.prototype.ae,we.prototype.isRemotePlayback=we.prototype.va,we.prototype.addFont=we.prototype.addFont,we.prototype.setVideoContainer=we.prototype.Ti,we.prototype.getFetchedPlaybackInfo=we.prototype.Gj,we.prototype.getManifestParserFactory=we.prototype.Mj,we.prototype.getManifest=we.prototype.Hg,we.prototype.retryStreaming=we.prototype.gh,we.prototype.setMaxHardwareResolution=we.prototype.al,we.prototype.addChaptersTrack=we.prototype.Ke,we.prototype.addThumbnailsTrack=we.prototype.Le,we.prototype.addTextTrackAsync=we.prototype.Md,we.prototype.getStats=we.prototype.getStats,we.prototype.getBufferedInfo=we.prototype.Fc,we.prototype.getSegmentAvailabilityDuration=we.prototype.Ye,we.prototype.getPresentationStartTimeAsDate=we.prototype.Ig,we.prototype.getPlayheadTimeAsDate=we.prototype.Qj,we.prototype.setTextTrackVisibility=we.prototype.rh,we.prototype.getChaptersAsync=we.prototype.Bj,we.prototype.getChapters=we.prototype.Aj,we.prototype.getChaptersTracks=we.prototype.Cj,we.prototype.isTextTrackVisible=we.prototype.Pg,we.prototype.selectVariantsByLabel=we.prototype.Vk,we.prototype.selectTextLanguage=we.prototype.kh,we.prototype.selectAudioLanguage=we.prototype.Ni,we.prototype.getTextLanguages=we.prototype.Wj,we.prototype.getAudioLanguages=we.prototype.xj,we.prototype.getTextLanguagesAndRoles=we.prototype.Xj,we.prototype.getAudioLanguagesAndRoles=we.prototype.yj,we.prototype.getVideoTracks=we.prototype.getVideoTracks,we.prototype.selectVideoTrack=we.prototype.Wk,we.prototype.getAudioTracks=we.prototype.getAudioTracks,we.prototype.selectAudioTrack=we.prototype.Uk,we.prototype.selectVariantTrack=we.prototype.Ff,we.prototype.selectTextTrack=we.prototype.mh,we.prototype.getThumbnails=we.prototype.Zj,we.prototype.getAllThumbnails=we.prototype.wj,we.prototype.getImageTracks=we.prototype.Ij,we.prototype.getTextTracks=we.prototype.Lc,we.prototype.getVariantTracks=we.prototype.lc,we.prototype.cancelTrickPlay=we.prototype.Nd,we.prototype.trickPlay=we.prototype.qe,we.prototype.useTrickPlayTrackIfAvailable=we.prototype.Gh,we.prototype.getPlaybackRate=we.prototype.Pb,we.prototype.isBuffering=we.prototype.Og,we.prototype.getKeyStatuses=we.prototype.We,we.prototype.getActiveSessionsMetadata=we.prototype.Gg,we.prototype.getExpiration=we.prototype.Ud,we.prototype.drmInfo=we.prototype.drmInfo,we.prototype.keySystem=we.prototype.keySystem,we.prototype.isFullyLoaded=we.prototype.jk,we.prototype.goToLive=we.prototype.fk,we.prototype.seekRange=we.prototype.Va,we.prototype.isVideoOnly=we.prototype.rk,we.prototype.isAudioOnly=we.prototype.ik,we.prototype.isInProgress=we.prototype.Vc,we.prototype.isLive=we.prototype.W,we.prototype.getQueueManager=we.prototype.ei,we.prototype.getAdManager=we.prototype.Zh,we.prototype.getAssetUri=we.prototype.rd,we.prototype.getNetworkingEngine=we.prototype.Wb,we.prototype.getMediaElement=we.prototype.Pj,we.prototype.getManifestType=we.prototype.bi,we.prototype.getLoadMode=we.prototype.Lj,we.prototype.resetConfiguration=we.prototype.Ii,we.prototype.getBufferFullness=we.prototype.$h,we.prototype.getNonDefaultConfiguration=we.prototype.di,we.prototype.getConfigurationForLowLatency=we.prototype.Dj,we.prototype.getConfiguration=we.prototype.getConfiguration,we.prototype.configurationForLowLatency=we.prototype.tj,we.prototype.configure=we.prototype.configure,we.prototype.releaseAllMutexes=we.prototype.Mk,we.prototype.destroyAllPreloads=we.prototype.ng,we.prototype.preload=we.prototype.preload,we.prototype.detachAndSavePreload=we.prototype.Vh,we.prototype.unloadAndSavePreload=we.prototype.dj,we.prototype.load=we.prototype.load,we.prototype.updateStartTime=we.prototype.ll,we.prototype.unload=we.prototype.Bc,we.prototype.detach=we.prototype.detach,we.prototype.attachCanvas=we.prototype.kj,we.prototype.attach=we.prototype.fc,we.probeSupport=function(e){e=e===void 0?!0:e;var t,n,o,u,a,d,p;return $(function(g){switch(g.g){case 1:if(t={},!e){g.A(2);break}return D(g,X4(),3);case 3:t=g.h;case 2:return n=nk(),o=Mk(),u=Me(),D(g,u.jc(),4);case 4:return a=g.h,d={manifest:n,media:o,drm:t,hardwareResolution:a},p=C2,p.forEach(function(y,w){d[w]=y()}),g.return(d)}})},we.isBrowserSupported=function(){return f.Promise||st("A Promise implementation or polyfill is required"),!(f.Promise&&f.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/")?!1:(Me(),mr()?!0:Ko().canPlayType("application/x-mpegurl")!="")},we.setQueueManagerFactory=function(e){Rc=e},we.setAdManagerFactory=function(e){Mc=e},we.registerSupportPlugin=Kx,we.prototype.destroy=we.prototype.destroy;var qi=0,Ic=1,In=2,gi=3;we.LoadMode={DESTROYED:qi,NOT_LOADED:Ic,MEDIA_SOURCE:In,SRC_EQUALS:gi},we.version="v4.16.0";var T2=["4","16"];Oy=new function(e){this.g=e,this.i=Qb,this.h=Zb}(new jh(Number(T2[0]),Number(T2[1])));var C2=new Map,Mc=null,Rc=null;function b2(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function $E(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function He(e,t,n){var o=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new Le,this.l.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){o.i=!0}),this.l.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){o.i=!1})}m=He.prototype,m.needsSkipUI=function(){return!1},m.isClientRendering=function(){return!0},m.hasCustomClick=function(){return!0},m.isUsingAnotherMediaElement=function(){return!0},m.getDuration=function(){return this.g.getDuration()},m.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},m.getRemainingTime=function(){return this.h.getRemainingTime()},m.isPaused=function(){return this.i},m.isSkippable=function(){return this.g.getSkipTimeOffset()>=0},m.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},m.canSkipNow=function(){return this.h.getAdSkippableState()},m.skip=function(){return this.h.skip()},m.pause=function(){return this.h.pause()},m.play=function(){return this.h.resume()},m.getVolume=function(){return this.h.getVolume()},m.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},m.isMuted=function(){return this.h.getVolume()==0},m.isLinear=function(){return this.g.isLinear()},m.resize=function(e,t){this.h.resize(e,t)},m.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},m.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},m.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},m.getTitle=function(){return this.g.getTitle()},m.getDescription=function(){return this.g.getDescription()},m.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},m.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},m.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},m.getVastAdId=function(){return""},m.getAdId=function(){return this.g.getAdId()},m.getCreativeAdId=function(){return this.g.getCreativeAdId()},m.getAdvertiserName=function(){return this.g.getAdvertiserName()},m.getMediaUrl=function(){return this.g.getMediaUrl()},m.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},m.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},m.release=function(){this.h=this.g=null},be("shaka.ads.ClientSideAd",He),He.prototype.release=He.prototype.release,He.prototype.getPodIndex=He.prototype.getPodIndex,He.prototype.getTimeOffset=He.prototype.getTimeOffset,He.prototype.getMediaUrl=He.prototype.getMediaUrl,He.prototype.getAdvertiserName=He.prototype.getAdvertiserName,He.prototype.getCreativeAdId=He.prototype.getCreativeAdId,He.prototype.getAdId=He.prototype.getAdId,He.prototype.getVastAdId=He.prototype.getVastAdId,He.prototype.getVastMediaWidth=He.prototype.getVastMediaWidth,He.prototype.getVastMediaHeight=He.prototype.getVastMediaHeight,He.prototype.getVastMediaBitrate=He.prototype.getVastMediaBitrate,He.prototype.getDescription=He.prototype.getDescription,He.prototype.getTitle=He.prototype.getTitle,He.prototype.getPositionInSequence=He.prototype.getPositionInSequence,He.prototype.getSequenceLength=He.prototype.getSequenceLength,He.prototype.setMuted=He.prototype.setMuted,He.prototype.resize=He.prototype.resize,He.prototype.isLinear=He.prototype.isLinear,He.prototype.isMuted=He.prototype.isMuted,He.prototype.setVolume=He.prototype.setVolume,He.prototype.getVolume=He.prototype.getVolume,He.prototype.play=He.prototype.play,He.prototype.pause=He.prototype.pause,He.prototype.skip=He.prototype.skip,He.prototype.canSkipNow=He.prototype.canSkipNow,He.prototype.getTimeUntilSkippable=He.prototype.getTimeUntilSkippable,He.prototype.isSkippable=He.prototype.isSkippable,He.prototype.isPaused=He.prototype.isPaused,He.prototype.getRemainingTime=He.prototype.getRemainingTime,He.prototype.getMinSuggestedDuration=He.prototype.getMinSuggestedDuration,He.prototype.getDuration=He.prototype.getDuration,He.prototype.isUsingAnotherMediaElement=He.prototype.isUsingAnotherMediaElement,He.prototype.hasCustomClick=He.prototype.hasCustomClick,He.prototype.isClientRendering=He.prototype.isClientRendering,He.prototype.needsSkipUI=He.prototype.needsSkipUI;function $t(){}function k2(e,t){var n=[];e=R(bt(e,"Ad"));for(var o=e.next();!o.done;o=e.next())if((o=Ft(o.value,"InLine"))&&(o=Ft(o,"Creatives"))){o=R(bt(o,"Creative"));for(var u=o.next();!u.done;u=o.next()){u=u.value;var a=Ft(u,"Linear");if(a&&zE(n,t,a),u=Ft(u,"NonLinearAds")){u=bt(u,"NonLinear"),u=R(u);for(var d=u.next();!d.done;d=u.next())e:{a=n;var p=t,g=d.value,y=Ft(g,"StaticResource");if(y)d=y.attributes.creativeType;else{if(y=Ft(g,"HTMLResource"),!y)break e;d="text/html"}if(y=Kn(y)){d==="text/html"&&(y="data:text/html;charset=UTF-8,"+encodeURIComponent(y));var w=Qe(g,"width",bn)||Qe(g,"expandedWidth",bn),T=Qe(g,"height",bn)||Qe(g,"expandedHeight",bn);if(w||T){var M=null,L=Ft(g,"NonLinearClickThrough");L&&(L=Kn(L))&&(M=L),L=null,(g=g.attributes.minSuggestedDuration)&&(L=Es(g)),g=0,p!=null&&(g=p),a.push({id:null,groupId:null,startTime:g,endTime:null,uri:y,mimeType:d,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:L,once:!0,pre:p==null,post:p==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:w||0,y:T||0}},displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:M})}}}}}}return n}function zE(e,t,n){var o=0;t!=null&&(o=t);var u=null;n.attributes.skipoffset&&(u=Es(n.attributes.skipoffset),isNaN(u)&&(u=null));var a=Ft(n,"MediaFiles");if(a){var d=null;for((n=Ft(n,"VideoClicks"))&&(n=Ft(n,"ClickThrough"))&&(n=Kn(n))&&(d=n),a=n=bt(a,"MediaFile"),n=n.filter(function(g){return g.attributes.delivery=="streaming"}),n.length&&(a=n),a=a.sort(function(g,y){return(parseInt(y.attributes.height,10)||0)-(parseInt(g.attributes.height,10)||0)}),a=R(a),n=a.next();!n.done;n=a.next())if(n=n.value,!n.attributes.apiFramework){var p=Kn(n);if(p){e.push({id:null,groupId:null,startTime:o,endTime:null,uri:p,mimeType:n.attributes.type||null,isSkippable:u!=null,skipOffset:u,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:d});break}}}}function VE(e){var t=[];e=R(bt(e,"vmap:AdBreak"));for(var n=e.next();!n.done;n=e.next()){var o=n.value,u=o.attributes.timeOffset;u&&(n=null,u=="start"?n=null:u=="end"?n=1/0:n=Es(u),(o=Ft(o,"vmap:AdSource"))&&(o=Ft(o,"vmap:AdTagURI"))&&(o=nn(o))&&t.push({time:n,uri:o}))}return t}be("shaka.ads.Utils",$t),$t.ADS_LOADED="ads-loaded",$t.AD_STARTED="ad-started",$t.AD_FIRST_QUARTILE="ad-first-quartile",$t.AD_MIDPOINT="ad-midpoint",$t.AD_THIRD_QUARTILE="ad-third-quartile",$t.AD_COMPLETE="ad-complete",$t.AD_STOPPED="ad-stopped",$t.AD_SKIPPED="ad-skipped",$t.AD_VOLUME_CHANGED="ad-volume-changed",$t.AD_MUTED="ad-muted",$t.AD_PAUSED="ad-paused",$t.AD_RESUMED="ad-resumed",$t.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",$t.CUEPOINTS_CHANGED="ad-cue-points-changed",$t.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",$t.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",$t.AD_CLICKED="ad-clicked",$t.AD_PROGRESS="ad-progress",$t.AD_BUFFERING="ad-buffering",$t.AD_IMPRESSION="ad-impression",$t.AD_DURATION_CHANGED="ad-duration-changed",$t.AD_CLOSED="ad-closed",$t.AD_LOADED="ad-loaded",$t.ALL_ADS_COMPLETED="all-ads-completed",$t.AD_LINEAR_CHANGED="ad-linear-changed",$t.AD_METADATA="ad-metadata",$t.AD_RECOVERABLE_ERROR="ad-recoverable-error",$t.AD_ERROR="ad-error",$t.AD_BREAK_READY="ad-break-ready",$t.AD_INTERACTION="ad-interaction",$t.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",$t.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",$t.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function _c(e,t,n,o,u){var a=this;this.u=e,this.i=t,this.G=!1,this.B=this.o=null,this.H=NaN,this.l=u,this.j=null,this.h=new Le,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.F=new google.ima.AdDisplayContainer(this.u,this.i),this.F.initialize(),this.m=new google.ima.AdsLoader(this.F),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.16.0"),this.g=null,this.C=o||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(d){HE(a,d)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(d){A2(a,d)}),this.h.D(this.i,"ended",function(){a.m.contentComplete()}),this.h.Aa(this.i,"play",function(){a.G=!0})}_c.prototype.configure=function(e){this.o=e},_c.prototype.stop=function(){this.g&&this.g.stop(),this.u&&Il(this.u)},_c.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.F.destroy()};function A2(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new Ie("ad-error",t)),Lc(e,null),e.l(new Ie("ad-cue-points-changed",new Map().set("cuepoints",[])))}function HE(e,t){if(e.l(new Ie("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.H))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.C),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.C);e.l(new Ie("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var o=e.g.getCuePoints();if(o.length){t=[],o=R(o);for(var u=o.next();!u.done;u=o.next())t.push({start:u.value,end:null});e.l(new Ie("ad-cue-points-changed",new Map().set("cuepoints",t)))}GE(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),"ResizeObserver"in f?(e.B=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.B.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.G||e.o.skipPlayDetection?e.g.start():e.h.Aa(e.i,"play",function(){e.G=!0,e.g.start()})}catch{Lc(e,null)}}function GE(e){function t(n,o){n=new Map().set("originalEvent",n),e.l(new Ie(o,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){A2(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){E2(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){E2(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Lc(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){Lc(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function E2(e,t){var n=t.getAd();n?(e.j=new He(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new Ie("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new Ie("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):st("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Lc(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new Ie("ad-content-resume-requested")),e.l(new Ie("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function Ge(e,t,n,o,u,a){this.g=e,this.h=t,this.j=(this.i=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.B=n,this.o=o,this.m=u,this.u=a,this.C=t.overlay}m=Ge.prototype,m.needsSkipUI=function(){return!0},m.isClientRendering=function(){return!0},m.hasCustomClick=function(){return this.h.clickThroughUrl!=null},m.isUsingAnotherMediaElement=function(){return this.u},m.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},m.getMinSuggestedDuration=function(){return this.getDuration()},m.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},m.isPaused=function(){return this.g.paused},m.isSkippable=function(){return this.i&&this.l!=null?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.i},m.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},m.canSkipNow=function(){return this.i&&this.getTimeUntilSkippable()==0},m.skip=function(){this.canSkipNow()&&this.B()},m.pause=function(){return this.g.pause()},m.play=function(){return this.g.play()},m.getVolume=function(){return this.g.volume},m.setVolume=function(e){this.g.volume=e},m.isMuted=function(){return this.g.muted},m.isLinear=function(){return this.C==null},m.resize=function(){},m.setMuted=function(e){this.g.muted=e},m.getSequenceLength=function(){return this.o},m.getPositionInSequence=function(){return this.m},m.getTitle=function(){return""},m.getDescription=function(){return""},m.getVastMediaBitrate=function(){return 0},m.getVastMediaHeight=function(){return 0},m.getVastMediaWidth=function(){return 0},m.getVastAdId=function(){return""},m.getAdId=function(){return this.h.id||""},m.getCreativeAdId=function(){return""},m.getAdvertiserName=function(){return""},m.getMediaUrl=function(){return this.h.uri},m.getTimeOffset=function(){return 0},m.getPodIndex=function(){return 0},m.release=function(){this.g=null},be("shaka.ads.InterstitialAd",Ge),Ge.prototype.release=Ge.prototype.release,Ge.prototype.getPodIndex=Ge.prototype.getPodIndex,Ge.prototype.getTimeOffset=Ge.prototype.getTimeOffset,Ge.prototype.getMediaUrl=Ge.prototype.getMediaUrl,Ge.prototype.getAdvertiserName=Ge.prototype.getAdvertiserName,Ge.prototype.getCreativeAdId=Ge.prototype.getCreativeAdId,Ge.prototype.getAdId=Ge.prototype.getAdId,Ge.prototype.getVastAdId=Ge.prototype.getVastAdId,Ge.prototype.getVastMediaWidth=Ge.prototype.getVastMediaWidth,Ge.prototype.getVastMediaHeight=Ge.prototype.getVastMediaHeight,Ge.prototype.getVastMediaBitrate=Ge.prototype.getVastMediaBitrate,Ge.prototype.getDescription=Ge.prototype.getDescription,Ge.prototype.getTitle=Ge.prototype.getTitle,Ge.prototype.getPositionInSequence=Ge.prototype.getPositionInSequence,Ge.prototype.getSequenceLength=Ge.prototype.getSequenceLength,Ge.prototype.setMuted=Ge.prototype.setMuted,Ge.prototype.resize=Ge.prototype.resize,Ge.prototype.isLinear=Ge.prototype.isLinear,Ge.prototype.isMuted=Ge.prototype.isMuted,Ge.prototype.setVolume=Ge.prototype.setVolume,Ge.prototype.getVolume=Ge.prototype.getVolume,Ge.prototype.play=Ge.prototype.play,Ge.prototype.pause=Ge.prototype.pause,Ge.prototype.skip=Ge.prototype.skip,Ge.prototype.canSkipNow=Ge.prototype.canSkipNow,Ge.prototype.getTimeUntilSkippable=Ge.prototype.getTimeUntilSkippable,Ge.prototype.isSkippable=Ge.prototype.isSkippable,Ge.prototype.isPaused=Ge.prototype.isPaused,Ge.prototype.getRemainingTime=Ge.prototype.getRemainingTime,Ge.prototype.getMinSuggestedDuration=Ge.prototype.getMinSuggestedDuration,Ge.prototype.getDuration=Ge.prototype.getDuration,Ge.prototype.isUsingAnotherMediaElement=Ge.prototype.isUsingAnotherMediaElement,Ge.prototype.hasCustomClick=Ge.prototype.hasCustomClick,Ge.prototype.isClientRendering=Ge.prototype.isClientRendering,Ge.prototype.needsSkipUI=Ge.prototype.needsSkipUI;function Xe(e,t,n){this.g=e,this.j=t,this.h=n,this.i=e.overlay==null}m=Xe.prototype,m.needsSkipUI=function(){return!0},m.isClientRendering=function(){return!0},m.hasCustomClick=function(){return this.g.clickThroughUrl!=null},m.isUsingAnotherMediaElement=function(){return!1},m.getDuration=function(){return-1},m.getMinSuggestedDuration=function(){return this.getDuration()},m.getRemainingTime=function(){return-1},m.isPaused=function(){return!1},m.isSkippable=function(){return!1},m.getTimeUntilSkippable=function(){return 0},m.canSkipNow=function(){return!1},m.skip=function(){},m.pause=function(){},m.play=function(){},m.getVolume=function(){return 1},m.setVolume=function(){},m.isMuted=function(){return!1},m.isLinear=function(){return this.i},m.resize=function(){},m.setMuted=function(){},m.getSequenceLength=function(){return this.j},m.getPositionInSequence=function(){return this.h},m.getTitle=function(){return""},m.getDescription=function(){return""},m.getVastMediaBitrate=function(){return 0},m.getVastMediaHeight=function(){return 0},m.getVastMediaWidth=function(){return 0},m.getVastAdId=function(){return""},m.getAdId=function(){return this.g.id||""},m.getCreativeAdId=function(){return""},m.getAdvertiserName=function(){return""},m.getMediaUrl=function(){return this.g.uri},m.getTimeOffset=function(){return 0},m.getPodIndex=function(){return 0},m.release=function(){},be("shaka.ads.InterstitialStaticAd",Xe),Xe.prototype.release=Xe.prototype.release,Xe.prototype.getPodIndex=Xe.prototype.getPodIndex,Xe.prototype.getTimeOffset=Xe.prototype.getTimeOffset,Xe.prototype.getMediaUrl=Xe.prototype.getMediaUrl,Xe.prototype.getAdvertiserName=Xe.prototype.getAdvertiserName,Xe.prototype.getCreativeAdId=Xe.prototype.getCreativeAdId,Xe.prototype.getAdId=Xe.prototype.getAdId,Xe.prototype.getVastAdId=Xe.prototype.getVastAdId,Xe.prototype.getVastMediaWidth=Xe.prototype.getVastMediaWidth,Xe.prototype.getVastMediaHeight=Xe.prototype.getVastMediaHeight,Xe.prototype.getVastMediaBitrate=Xe.prototype.getVastMediaBitrate,Xe.prototype.getDescription=Xe.prototype.getDescription,Xe.prototype.getTitle=Xe.prototype.getTitle,Xe.prototype.getPositionInSequence=Xe.prototype.getPositionInSequence,Xe.prototype.getSequenceLength=Xe.prototype.getSequenceLength,Xe.prototype.setMuted=Xe.prototype.setMuted,Xe.prototype.resize=Xe.prototype.resize,Xe.prototype.isLinear=Xe.prototype.isLinear,Xe.prototype.isMuted=Xe.prototype.isMuted,Xe.prototype.setVolume=Xe.prototype.setVolume,Xe.prototype.getVolume=Xe.prototype.getVolume,Xe.prototype.play=Xe.prototype.play,Xe.prototype.pause=Xe.prototype.pause,Xe.prototype.skip=Xe.prototype.skip,Xe.prototype.canSkipNow=Xe.prototype.canSkipNow,Xe.prototype.getTimeUntilSkippable=Xe.prototype.getTimeUntilSkippable,Xe.prototype.isSkippable=Xe.prototype.isSkippable,Xe.prototype.isPaused=Xe.prototype.isPaused,Xe.prototype.getRemainingTime=Xe.prototype.getRemainingTime,Xe.prototype.getMinSuggestedDuration=Xe.prototype.getMinSuggestedDuration,Xe.prototype.getDuration=Xe.prototype.getDuration,Xe.prototype.isUsingAnotherMediaElement=Xe.prototype.isUsingAnotherMediaElement,Xe.prototype.hasCustomClick=Xe.prototype.hasCustomClick,Xe.prototype.isClientRendering=Xe.prototype.isClientRendering,Xe.prototype.needsSkipUI=Xe.prototype.needsSkipUI;function I2(e,t,n,o){var u=this;this.N=null,this.o=e,this.F=t,this.g=n,this.H=null,this.C=!0,this.h=this.g,this.i=o,this.V=new Set,this.I=new Set,this.G=new Map,this.M=new Map,this.j=new we,O0(this),this.J=new Le,this.l=new Le,this.K=!1,this.ba=this.u=this.B=this.m=null,this.ma=!1,this.R=-1,this.$=function(){if(!u.K&&u.m&&!u.F.va()){u.m=u.g.currentTime;var a=ru(u);a&&Pc(u,a,1,1,Date.now())}},this.X=function(){if(!(u.K||u.m||u.F.va())){u.m=u.g.currentTime;var a=ru(u,!0);a||(a=ru(u)),a&&Pc(u,a,1,1,Date.now())}},this.oa=function(){if(!u.K&&u.m&&!u.F.va()){var a=u.g.currentTime;u.B&&!u.B.pre&&!u.B.post&&a<(u.B.endTime||u.B.startTime)&&(u.B=null)}},this.S=new dt(this.$),this.O=new dt(function(){var a,d,p,g,y,w,T,M,L,P,N;return $(function(O){switch(O.g){case 1:if(!u.I.size||u.m==null){O.A(0);break}if(a=u.F.m,a==qi||a==Ic)return O.return();d=!1,p=Array.from(u.I),g=u.F.Va(),y=R(p),w=y.next();case 3:if(w.done){O.A(5);break}if(T=w.value,T==u.B){O.A(4);break}if(M=T.endTime||T.startTime,!(g.start-M>=1)){L=T.startTime-u.m,L>0&&L<=10&&(!u.G.has(T)&&R2(T)&&u.G.set(T,u.j.preload(T.uri,null,T.mimeType||void 0)),L2(u,T)),O.A(4);break}if(!u.G.has(T)){O.A(7);break}return D(O,u.G.get(T),8);case 8:(P=O.h)&&P.destroy(),u.G.delete(T);case 7:P2(u,T),N=JSON.stringify(T),u.V.has(N)&&u.V.delete(N),u.I.delete(T),L0(u),T.overlay||(d=!0);case 4:w=y.next(),O.A(3);break;case 5:d&&Dc(u),te(O)}})}),this.configure(this.F.getConfiguration().ads)}m=I2.prototype,m.configure=function(e){this.N=e,P0(this)};function XE(e){if(!e.ma&&e.I.size){if(e.J.D(e.g,"playing",e.X),e.J.D(e.g,"timeupdate",e.X),e.J.D(e.g,"seeked",e.oa),e.J.D(e.g,"ended",e.$),"requestVideoFrameCallback"in e.g&&!_2()){var t=e.g,n=function(){e.R!=-1&&(e.$(),e.R!=-1&&(e.R=t.requestVideoFrameCallback(n)))};e.R=t.requestVideoFrameCallback(n)}else e.S.Fa(.025);e.O&&e.O.Fa(1),e.ma=!0}}function L0(e){e.ma&&!e.I.size&&(e.J.Ma(e.g,"playing",e.X),e.J.Ma(e.g,"timeupdate",e.X),e.J.Ma(e.g,"seeked",e.oa),e.J.Ma(e.g,"ended",e.$),e.R!=-1&&(e.g.cancelVideoFrameCallback(e.R),e.R=-1),e.S&&e.S.stop(),e.O&&e.O.stop(),e.ma=!1)}function P0(e){if(e.o&&e.N&&!e.K){var t=e.N.supportsMultipleMediaElements,n=e.g;(n.webkitPresentationMode&&n.webkitPresentationMode!=="inline"||n.webkitDisplayingFullscreen)&&(t=!1),e.C==t&&(e.C=!t,e.C?(e.h=e.g,e.H&&(e.H.parentElement&&e.o.removeChild(e.H),e.H=null)):(e.H||(t=document.createElement(e.g.tagName),t.autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.H=t),e.h=e.H))}else e.C=!0}m.stop=function(){if(this.l&&this.l.Qa(),this.V.clear(),this.I.clear(),this.j.ng(),this.G.size){var e=Array.from(this.G.values());e=R(e);for(var t=e.next();!t.done;t=e.next())(t=t.value)&&t.then(function(n){n&&n.destroy()})}if(this.G.clear(),this.M.size)for(e=Array.from(this.M.keys()),e=R(e),t=e.next();!t.done;t=e.next())P2(this,t.value);this.M.clear(),this.j.detach(),this.K=!1,this.B=this.m=null,this.C=!0,this.h=this.g,this.H=null,D0(this),L0(this),this.o&&Il(this.o),this.u&&(this.u.stop(),this.u=null)},m.release=function(){this.stop(),this.J&&this.J.release(),this.l&&this.l.release(),this.S&&(this.S.stop(),this.S=null),this.O&&(this.O.stop(),this.O=null),this.j.destroy()},m.td=function(){return this.j};function WE(e,t){var n;$(function(o){if(o.g==1)return O0(e),n=[],t&&t.values.find(function(u){return u.key=="X-OVERLAY-ID"})?(n=QE(t),o.A(2)):D(o,JE(e,t),3);o.g!=2&&(n=o.h),n.length?Kl(e,n):st("Unsupported HLS interstitial",t),te(o)})}function KE(e,t){var n=Ft(t.eventNode,"OverlayEvent"),o=n.attributes.uri,u=n.attributes.mimeType,a=n.attributes.loop=="true",d=Qe(n,"z",bn);if(o&&d!=0){var p=null,g=Ft(n,"Background");if(g){var y=g.attributes.uri;y?p="center / contain no-repeat url('"+y+"')":p=Kn(g)}g=1920,y=1080;var w=Ft(n,"Viewport");if(w&&(g=Qe(w,"x",bn),g==null||(y=Qe(w,"y",bn),y==null)))return;var T={viewport:{x:g,y},topLeft:{x:0,y:0},size:{x:g,y}},M=Ft(n,"Overlay");if(w&&M){var L=Ft(M,"TopLeft"),P=Ft(M,"Size");if(L&&P){if(M=Qe(L,"x",bn),M==null||(L=Qe(L,"y",bn),L==null))return;var N=Qe(P,"x",bn);if(N==null||(P=Qe(P,"y",bn),P==null))return;T.topLeft.x=M,T.topLeft.y=L,T.size.x=N,T.size.y=P}}if(M=null,n=Ft(n,"Squeeze"),w&&n&&(P=Ft(n,"TopLeft"),n=Ft(n,"Size"),P&&n)){if(w=Qe(P,"x",bn),w==null||(M=Qe(P,"y",bn),M==null)||(P=Qe(n,"x",bn),P==null)||(n=Qe(n,"y",bn),n==null))return;M={viewport:{x:g,y},topLeft:{x:w,y:M},size:{x:P,y:n}}}Kl(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:o,mimeType:u,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:a,overlay:T,displayOnBackground:d==-1,currentVideo:M,background:p,clickThroughUrl:null}])}}m.addAdUrlInterstitial=function(e){var t=this,n,o,u,a,d,p,g,y,w;return $(function(T){if(T.g==1)return n={type:12},D(T,N0(t,e,n),2);if(T.g!=3){if(o=T.h,u=rl(o,"VAST,vmap:VMAP"),!u)throw new q(2,10,10007);if(a=[],u.tagName=="VAST")return a=k2(u,t.m),T.A(3);if(u.tagName!="vmap:VMAP")return T.A(3);for(d=function(M){var L,P;return $(function(N){if(N.g==1)return D(N,N0(t,M.uri,n),2);if(L=N.h,P=rl(L,"VAST"),!P)throw new q(2,10,10007);a.push.apply(a,le(k2(P,M.time))),te(N)})},p=[],g=R(VE(u)),y=g.next();!y.done;y=g.next())w=y.value,p.push(d(w));return p.length?D(T,Promise.all(p),3):T.A(3)}Kl(t,a),te(T)})};function Kl(e,t){var n,o,u,a,d,p,g,y;$(function(w){switch(w.g){case 1:n=!1,o=R(t),u=o.next();case 2:if(u.done){w.A(4);break}if(a=u.value,!a.uri){st("Missing URL in interstitial",a),w.A(3);break}if(a.mimeType){w.A(5);break}return ce(w,6),d=e.j.Wb(),D(w,ts(a.uri,d,e.F.getConfiguration().streaming.retryParameters),8);case 8:a.mimeType=w.h,X(w,5);break;case 6:ie(w);case 5:if(p=a.id||JSON.stringify(a),e.V.has(p)){w.A(3);break}a.loop&&!a.overlay&&st("Loop is only supported in overlay interstitials",a),a.overlay||(n=!0),e.V.add(p),e.I.add(a),g=!1,a.pre&&e.m==null?g=!0:a.startTime!=0||a.canJump?e.m!=null&&(y=a.startTime-e.m,y>0&&y<=10&&(g=!0)):g=!0,g&&(!e.G.has(a)&&R2(a)&&e.G.set(a,e.j.preload(a.uri,null,a.mimeType||void 0)),L2(e,a));case 3:u=o.next(),w.A(2);break;case 4:n&&Dc(e),XE(e),te(w)}})}function ru(e,t,n){t=t===void 0?!1:t,n=n===void 0?null:n;var o=0,u=null;if(e.I.size&&e.m!=null){var a=e.g.ended,d=Array.from(e.I).sort(function(T,M){return M.startTime-T.startTime}),p=d;for(p=t?d.filter(function(T){return T.pre}):a?d.filter(function(T){return T.post}):d.filter(function(T){return!T.pre&&!T.post}),d=R(p),p=d.next();!p.done;p=d.next()){p=p.value;var g=!1;if(t)g=p.pre;else if(a)g=p.post;else if(!p.pre&&!p.post){var y=e.m-Math.round(p.startTime*1e3)/1e3,w=1;e.N.allowStartInMiddleOfInterstitial&&p.endTime&&p.endTime!=1/0&&(w=p.endTime-p.startTime),(y>0||y==0&&e.m==0)&&(y<=w||!p.canJump)&&(g=!(n==null&&e.B&&!e.B.pre&&!e.B.post&&e.B.startTime>=p.startTime))}g&&(!e.B||p.startTime>=e.B.startTime)&&(o==(n||0)?u=p:u&&!p.canJump&&Math.round(p.startTime*1e3)/1e3-Math.round(u.startTime*1e3)/1e3>.001&&(u=p,o=0),o++)}}return u}function Pc(e,t,n,o,u,a){a=a===void 0?0:a,e.B=t,P0(e),e.C||!e.o||e.h.parentElement||e.o.appendChild(e.h),o==1&&n==1&&(n=Array.from(e.I).filter(function(d){return t.pre?d.pre==t.pre:t.post?d.post==t.post:Math.abs(d.startTime-t.startTime)<.001}).length),t.once&&(a++,e.I.delete(t),L0(e),t.overlay||Dc(e)),t.mimeType&&(t.mimeType.startsWith("image/")||t.mimeType==="text/html")?t.overlay?YE(e,t,n,o,a):st("Unsupported interstitial",t):e.C&&t.overlay?st("Unsupported interstitial",t):qE(e,t,n,o,u,a)}function YE(e,t,n,o,u){function a(){e.u&&(e.u.stop(),e.u=null),e.o.removeChild(g),D0(e,t),e.i(new Ie("ad-stopped")),e.l.Qa();var M=ru(e,t.pre,o-u);M?Pc(e,M,n,++o,Date.now(),u):e.K=!1}e.K=!0;var d=t.overlay,p=t.mimeType=="text/html"?"iframe":"img",g=document.createElement(p);g.style.objectFit="contain",g.style.position="absolute",g.style.border="none",M2(e,t),e.i(new Ie("ad-started",new Map().set("ad",new Xe(t,n,o)))),p=="iframe"?g.src=t.uri:(g.src=t.uri,g.onerror=function(M){e.i(new Ie("ad-error",new Map().set("originalEvent",M))),a()});var y=d.viewport,w=d.topLeft;d=d.size,y.x==0&&y.y==0?(g.width=t.overlay.size.x,g.height=t.overlay.size.y,g.style.bottom="10%",g.style.left="0",g.style.right="0",g.style.width="100%",t.overlay.size.y||p!="iframe"||(g.style.height="auto")):(g.style.height=d.y/y.y*100+"%",g.style.left=w.x/y.x*100+"%",g.style.top=w.y/y.y*100+"%",g.style.width=d.x/y.x*100+"%"),e.o.appendChild(g);var T=Date.now();e.u&&e.u.stop(),e.u=new dt(function(){t.playoutLimit&&(Date.now()-T)/1e3>t.playoutLimit?(e.i(new Ie("ad-complete")),a()):t.endTime&&e.g.currentTime>t.endTime?(e.i(new Ie("ad-complete")),a()):e.g.currentTime<t.startTime&&(e.i(new Ie("ad-skipped")),a())}),t.playoutLimit&&!t.endTime?e.u.ka(t.playoutLimit):t.endTime&&e.u.Fa(.025),e.l.D(e.g,"seeked",function(){var M=e.g.currentTime;(M<t.startTime||t.endTime&&M>t.endTime)&&(e.u&&e.u.stop(),e.i(new Ie("ad-skipped")),a())}),t.clickThroughUrl&&e.l.D(g,"click",function(){t.clickThroughUrl&&f.open(t.clickThroughUrl,"_blank")})}function qE(e,t,n,o,u,a){var d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se;$(function(fe){switch(fe.g){case 1:if(d=Date.now(),e.K=!0,p=!1,g=function(){if(!e.C&&!t.overlay&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.g.currentTime!=t.endTime&&(e.g.currentTime=t.endTime);else{var ne=Date.now();e.g.currentTime+=(ne-u)/1e3,u=ne}},y=function(ne){var xe,ye;return $(function(ae){if(ae.g==1){if(g(),xe=ru(e,t.pre,o-a),ne&&t.groupId)for(;xe&&xe.groupId==t.groupId;)o++,xe=ru(e,t.pre,o-a);return e.u&&(!t.groupId||xe&&xe.groupId!=t.groupId)&&(e.u.stop(),e.u=null),D0(e,t),xe&&!xe.overlay?ae.A(2):(t.post&&(e.m=null,e.B=null),e.C?D(ae,e.j.detach(),4):D(ae,e.j.Bc(),4))}ae.g!=2&&(e.C&&(ye=t.resumeOffset,ye==null&&(ye=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.m||0):(Date.now()-u)/1e3),e.i(new Ie("ad-content-resume-requested",new Map().set("offset",ye)))),e.i(new Ie("ad-stopped")),e.l.Qa(),e.K=!1,e.C?Dc(e):(e.h.style.display="none",g(),e.g.ended||e.g.play())),P0(e),xe&&(e.i(new Ie("ad-stopped")),e.l.Qa(),Pc(e,xe,n,++o,u,a)),te(ae)})},w=function(ne){return $(function(xe){return p?xe.return():(p=!0,e.i(new Ie("ad-error",new Map().set("originalEvent",ne))),D(xe,y(!1),0))})},T=function(){return $(function(ne){if(ne.g==1)return p?ne.return():(p=!0,D(ne,y(!1),2));e.i(new Ie("ad-complete")),te(ne)})},e.ba=function(){return $(function(ne){return p?ne.return():(p=!0,e.i(new Ie("ad-skipped")),D(ne,y(!0),0))})},M=new Ge(e.h,t,e.ba,n,o,!e.C),e.C||(M.setMuted(e.g.muted),M.setVolume(e.g.volume)),e.i(new Ie("ad-started",new Map().set("ad",M))),(L=M.canSkipNow())&&e.i(new Ie("ad-skip-state-changed")),e.l.Aa(e.j,"error",w),e.l.D(e.h,"timeupdate",function(){if(e.h.duration){var ne=M.canSkipNow();L!=ne&&M.getRemainingTime()>0&&M.getDuration()>0&&e.i(new Ie("ad-skip-state-changed")),L=ne}}),e.l.Aa(e.j,"firstquartile",function(){g(),e.i(new Ie("ad-first-quartile"))}),e.l.Aa(e.j,"midpoint",function(){g(),e.i(new Ie("ad-midpoint"))}),e.l.Aa(e.j,"thirdquartile",function(){g(),e.i(new Ie("ad-third-quartile"))}),e.l.Aa(e.j,"complete",T),e.l.D(e.h,"play",function(){e.i(new Ie("ad-resumed"))}),e.l.D(e.h,"pause",function(){var ne=e.j.getConfiguration();e.h.currentTime>=ne.playRangeEnd?T():e.i(new Ie("ad-paused"))}),e.l.D(e.h,"volumechange",function(){e.h.muted?e.i(new Ie("ad-muted")):e.i(new Ie("ad-volume-changed"))}),t.clickThroughUrl&&(P=e.o||e.h,e.l.D(P,"click",function(){t.clickThroughUrl&&(M.isPaused()||M.pause(),f.open(t.clickThroughUrl,"_blank"))})),!e.C||o!=1){fe.A(2);break}return e.i(new Ie("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),N=new _t,O=function(ne){return $(function(xe){if(xe.g==1)return ne.state!="detach"?xe.A(0):_2()?D(xe,new Promise(function(ye){return new dt(ye).ka(.1)}),3):xe.A(3);N.resolve(),e.l.Ma(e.F,"onstatechange",O),te(xe)})},e.l.D(e.F,"onstatechange",O),D(fe,N,2);case 2:return M2(e,t),e.C||(e.h.style.display="",t.overlay?(e.h.loop=t.loop,F=t.overlay.viewport,B=t.overlay.topLeft,V=t.overlay.size,e.h.style.height=V.y/F.y*100+"%",e.h.style.left=B.x/F.x*100+"%",e.h.style.top=B.y/F.y*100+"%",e.h.style.width=V.x/F.x*100+"%"):(e.g.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.g.currentTime+=t.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),ce(fe,4),O0(e),t.startTime&&t.endTime&&t.endTime!=1/0&&t.startTime!=t.endTime&&(Y=t.endTime-t.startTime,Y>0&&e.j.configure("playRangeEnd",Y)),t.playoutLimit&&!e.u&&(e.u=new dt(function(){e.ba()}).ka(t.playoutLimit),e.j.configure("playRangeEnd",t.playoutLimit)),D(fe,e.j.fc(e.h),6);case 6:return J=null,e.N.allowStartInMiddleOfInterstitial&&e.m!=null&&(H=e.m-t.startTime,Math.abs(H)>.25&&(J=H)),e.G.has(t)?D(fe,e.G.get(t),10):D(fe,e.j.load(t.uri,J,t.mimeType||void 0),8);case 10:return z=fe.h,e.G.delete(t),z?D(fe,e.j.load(z),8):D(fe,e.j.load(t.uri,J,t.mimeType||void 0),8);case 8:e.h.play(),Q=(Date.now()-d)/1e3,e.i(new Ie("ads-loaded",new Map().set("loadTime",Q))),e.C&&e.g.play(),t.overlay&&(ee=function(){var ne=e.g.currentTime-t.startTime;Math.abs(ne-e.h.currentTime)>.1&&(e.h.currentTime=ne)},e.l.Aa(e.h,"playing",ee),e.l.D(e.g,"seeking",ee),e.l.D(e.g,"seeked",function(){var ne=e.g.currentTime;(ne<t.startTime||t.endTime&&ne>t.endTime)&&e.ba()})),X(fe,0);break;case 4:if(se=ie(fe),!e.K)return fe.return();w(se),te(fe)}})}function M2(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),t.currentVideo!=null){var n=t.currentVideo;e.g.style.transformOrigin="top left";var o=!0,u=[],a=n.topLeft.x/n.viewport.x*100;a>0&&a<=100&&(u.push("translateX("+a+"%)"),o=!1),a=n.topLeft.y/n.viewport.y*100,a>0&&a<=100&&(u.push("translateY("+a+"%)"),o=!1),a=n.size.x/n.viewport.x,a<1&&u.push("scaleX("+a+")"),n=n.size.y/n.viewport.y,a<1&&u.push("scaleY("+n+")"),u.length&&(e.g.style.transform=u.join(" ")),o&&(e.g.style.transition="transform 250ms")}e.o&&(t.clickThroughUrl?(e.o.setAttribute("ad-active","true"),e.o.style.pointerEvents=""):e.o.style.pointerEvents="none",t.background&&(e.o.style.background=t.background)),e.H&&(e.H.style.background=t.overlay?"":"rgb(0, 0, 0)")}function D0(e,t){(!t||t.displayOnBackground)&&(e.g.style.zIndex=""),t&&t.currentVideo==null||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.o&&(e.o.removeAttribute("ad-active"),e.o.style.pointerEvents="",!t||t.background)&&(e.o.style.background=""),e.H&&(e.H.style.background="")}function JE(e,t){var n,o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye,ae,he,Te,ke,Ke,Re,pt,ht,At,ut,tt,Et,at;return $(function(rt){switch(rt.g){case 1:if(n=[],!t||(o=t.values.find(function(ct){return ct.key=="X-ASSET-URI"}),u=t.values.find(function(ct){return ct.key=="X-ASSET-LIST"}),!o&&!u))return rt.return(n);if(a=null,(d=t.values.find(function(ct){return ct.key=="ID"}))&&(a=d.data),p=a==null?Math.floor(t.startTime*10)/10:t.startTime,(g=t.endTime)&&t.endTime!=1/0&&typeof t.endTime=="number"&&(g=a==null?Math.floor(t.endTime*10)/10:t.endTime),y=t.values.find(function(ct){return ct.key=="X-RESTRICT"}),T=w=!0,y&&y.data&&(M=y.data,w=!M.includes("SKIP"),T=!M.includes("JUMP")),L=w?0:null,(P=t.values.find(function(ct){return ct.key=="X-ENABLE-SKIP-AFTER"}))&&(N=P.data,L=parseFloat(N),isNaN(L)&&(L=w?0:null)),O=null,(F=t.values.find(function(ct){return ct.key=="X-ENABLE-SKIP-FOR"}))&&(B=F.data,O=parseFloat(B),isNaN(L)&&(O=null)),V=null,(Y=t.values.find(function(ct){return ct.key=="X-RESUME-OFFSET"}))&&(J=Y.data,V=parseFloat(J),isNaN(V)&&(V=null)),H=null,(z=t.values.find(function(ct){return ct.key=="X-PLAYOUT-LIMIT"}))&&(Q=z.data,H=parseFloat(Q),isNaN(H)&&(H=null)),fe=se=ee=!1,(ne=t.values.find(function(ct){return ct.key=="CUE"}))&&(xe=ne.data,ee=xe.includes("ONCE"),se=xe.includes("PRE"),fe=xe.includes("POST")),ye=!1,(ae=t.values.find(function(ct){return ct.key=="X-TIMELINE-OCCUPIES"}))?(he=ae.data,ye=he.includes("RANGE")):!Y&&e.F.W()&&(ye=!se&&!fe),o){if(Te=o.data,!Te)return rt.return(n);n.push({id:a,groupId:null,startTime:p,endTime:g,uri:Te,mimeType:null,isSkippable:w,skipOffset:L,skipFor:O,canJump:T,resumeOffset:V,playoutLimit:H,once:ee,pre:se,post:fe,timelineRange:ye,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}),rt.A(2);break}if(!u){rt.A(2);break}return ke=u.data,ke?(ce(rt,4),Ke={type:11},D(rt,N0(e,ke,Ke),6)):rt.return(n);case 6:for(Re=rt.h,pt=Ht(Re),ht=JSON.parse(pt),(At=ht["SKIP-CONTROL"])&&(ut=At["ENABLE-SKIP-AFTER"],typeof ut=="number"&&(L=parseFloat(ut),isNaN(ut)&&(L=w?0:null)),tt=At["ENABLE-SKIP-FOR"],typeof tt=="number"&&(O=parseFloat(tt),isNaN(tt)&&(O=null))),Et=0;Et<ht.ASSETS.length;Et++)at=ht.ASSETS[Et],at.URI&&n.push({id:a+"_shaka_asset_"+Et,groupId:a,startTime:p,endTime:g,uri:at.URI,mimeType:null,isSkippable:w,skipOffset:L,skipFor:O,canJump:T,resumeOffset:V,playoutLimit:H,once:ee,pre:se,post:fe,timelineRange:ye,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null});X(rt,2);break;case 4:ie(rt);case 2:return rt.return(n)}})}function QE(e){var t=[];if(!e)return t;var n=e.values.find(function(O){return O.key=="X-ASSET-URI"});if(!n||(n=n.data,!n))return t;var o=null,u=e.values.find(function(O){return O.key=="X-OVERLAY-ID"});u&&(o=u.data),u=o==null?Math.floor(e.startTime*10)/10:e.startTime;var a=e.endTime;e.endTime&&e.endTime!=1/0&&typeof e.endTime=="number"&&(a=o==null?Math.floor(e.endTime*10)/10:e.endTime);var d=!1,p=!1,g=!1,y=e.values.find(function(O){return O.key=="CUE"});y&&(g=y.data,d=g.includes("ONCE"),p=g.includes("PRE"),g=g.includes("POST")),y=null;var w=e.values.find(function(O){return O.key=="X-ASSET-MIMETYPE"});w&&(y=w.data),w=!1;var T=e.values.find(function(O){return O.key=="X-LOOP"});T&&(w=T.data=="YES"),T=1;var M=e.values.find(function(O){return O.key=="X-DEPTH"});M&&(T=parseFloat(M.data),isNaN(T)&&(T=1)),M=null;var L=e.values.find(function(O){return O.key=="X-BACKGROUND"});L&&(M=L.data),L=1920;var P=1080,N=e.values.find(function(O){return O.key=="X-VIEWPORT"});if(N){if(P=N.data.split("x"),P.length!=2)return t;L=parseFloat(P[0]),P=parseFloat(P[1])}if(L={viewport:{x:L,y:P},topLeft:{x:0,y:0},size:{x:L,y:P}},P=e.values.find(function(O){return O.key=="X-OVERLAY-POSITION"})){if(P=P.data.split("x"),P.length!=2)return t;L.topLeft.x=parseFloat(P[0]),L.topLeft.y=parseFloat(P[1])}if(P=e.values.find(function(O){return O.key=="X-OVERLAY-SIZE"})){if(P=P.data.split("x"),P.length!=2)return t;L.size.x=parseFloat(P[0]),L.size.y=parseFloat(P[1])}if(P=null,(N=e.values.find(function(O){return O.key=="X-SQUEEZECURRENT"}))&&(P=parseFloat(N.data),isNaN(P)&&(P=1),P={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*P,y:1080*P}},e=e.values.find(function(O){return O.key=="X-SQUEEZECURRENT-POSITION"}))){if(e=e.data.split("x"),e.length!=2)return t;P.topLeft.x=parseFloat(e[0]),P.topLeft.y=parseFloat(e[1])}return t.push({id:o,groupId:null,startTime:u,endTime:a,uri:n,mimeType:y,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:d,pre:p,post:g,timelineRange:!0,loop:w,overlay:L,displayOnBackground:T==-1,currentVideo:P,background:M,clickThroughUrl:null}),t}function Dc(e){for(var t=[],n=R(e.I),o=n.next(),u={};!o.done;u={Ac:void 0},o=n.next())o=o.value,o.overlay||(u.Ac={start:o.startTime,end:null},o.pre?(u.Ac.start=0,u.Ac.end=null):o.post?(u.Ac.start=-1,u.Ac.end=null):o.timelineRange&&(u.Ac.end=o.endTime),t.find((function(a){return function(d){return a.Ac.start==d.start&&a.Ac.end==d.end}})(u))||t.push(u.Ac));e.i(new Ie("ad-cue-points-changed",new Map().set("cuepoints",t)))}function O0(e){e.j.configure(e.F.di()),e.j.configure("ads.disableHLSInterstitial",!0),e.j.configure("ads.disableDASHInterstitial",!0),e.j.configure("playRangeEnd",1/0),D1(e.F.Wb(),e.j.Wb())}function N0(e,t,n){var o,u,a;return $(function(d){return d.g==1?(o=un([t],Yi()),u=e.F.Wb().request(7,o,n),D(d,u.promise,2)):(a=d.h,d.return(a.data))})}function R2(e){return(e=e.mimeType)?!e.startsWith("image/")&&e!=="text/html":!0}function _2(){var e=Me().Oa();return e=="TV"||e=="CONSOLE"||e=="CAST"}function L2(e,t){if(!(e.M.has(t)||e.N&&!e.N.allowPreloadOnDomElements)){var n=function(a){var d=document.createElement("link");return d.rel="preload",d.href=a,d.as="image",document.head.appendChild(d),d},o=[];if(t.background){var u=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);u&&o.push(n(u[2]))}t.mimeType.startsWith("image/")&&o.push(n(t.uri)),e.M.set(t,o)}}function P2(e,t){if(e.M.has(t)){var n=e.M.get(t);n=R(n);for(var o=n.next();!o.done;o=n.next())o=o.value,o.parentNode.removeChild(o);e.M.delete(t)}}function ze(e,t,n,o,u){this.h=e,this.j=Es(this.h.skipOffset),this.g=u,this.i=t,this.l=n,this.o=o,this.m=!1}m=ze.prototype,m.needsSkipUI=function(){return!0},m.isClientRendering=function(){return!1},m.hasCustomClick=function(){return!1},m.isUsingAnotherMediaElement=function(){return!1},m.getDuration=function(){return this.h.durationInSeconds},m.getMinSuggestedDuration=function(){return this.getDuration()},m.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},m.isPaused=function(){return this.g.paused},m.isSkippable=function(){return typeof this.j=="number"},m.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},m.canSkipNow=function(){return this.getTimeUntilSkippable()==0},m.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},m.pause=function(){return this.g.pause()},m.play=function(){return this.g.play()},m.getVolume=function(){return this.g.volume},m.setVolume=function(e){this.g.volume=e},m.isMuted=function(){return this.g.muted},m.isLinear=function(){return this.o},m.resize=function(){},m.setMuted=function(e){this.g.muted=e},m.getSequenceLength=function(){return this.l?this.l:1},m.getPositionInSequence=function(){return this.i?this.i:1},m.getTitle=function(){return this.h.adTitle},m.getDescription=function(){return""},m.getVastMediaBitrate=function(){return 0},m.getVastMediaHeight=function(){return 0},m.getVastMediaWidth=function(){return 0},m.getVastAdId=function(){return this.h.vastAdId||""},m.getAdId=function(){return this.h.adId},m.getCreativeAdId=function(){return this.h.creativeId},m.getAdvertiserName=function(){return""},m.getMediaUrl=function(){return null},m.getTimeOffset=function(){return 0},m.getPodIndex=function(){return 0},m.release=function(){this.l=this.i=this.g=this.h=null},be("shaka.ads.MediaTailorAd",ze),ze.prototype.release=ze.prototype.release,ze.prototype.getPodIndex=ze.prototype.getPodIndex,ze.prototype.getTimeOffset=ze.prototype.getTimeOffset,ze.prototype.getMediaUrl=ze.prototype.getMediaUrl,ze.prototype.getAdvertiserName=ze.prototype.getAdvertiserName,ze.prototype.getCreativeAdId=ze.prototype.getCreativeAdId,ze.prototype.getAdId=ze.prototype.getAdId,ze.prototype.getVastAdId=ze.prototype.getVastAdId,ze.prototype.getVastMediaWidth=ze.prototype.getVastMediaWidth,ze.prototype.getVastMediaHeight=ze.prototype.getVastMediaHeight,ze.prototype.getVastMediaBitrate=ze.prototype.getVastMediaBitrate,ze.prototype.getDescription=ze.prototype.getDescription,ze.prototype.getTitle=ze.prototype.getTitle,ze.prototype.getPositionInSequence=ze.prototype.getPositionInSequence,ze.prototype.getSequenceLength=ze.prototype.getSequenceLength,ze.prototype.setMuted=ze.prototype.setMuted,ze.prototype.resize=ze.prototype.resize,ze.prototype.isLinear=ze.prototype.isLinear,ze.prototype.isMuted=ze.prototype.isMuted,ze.prototype.setVolume=ze.prototype.setVolume,ze.prototype.getVolume=ze.prototype.getVolume,ze.prototype.play=ze.prototype.play,ze.prototype.pause=ze.prototype.pause,ze.prototype.skip=ze.prototype.skip,ze.prototype.canSkipNow=ze.prototype.canSkipNow,ze.prototype.getTimeUntilSkippable=ze.prototype.getTimeUntilSkippable,ze.prototype.isSkippable=ze.prototype.isSkippable,ze.prototype.isPaused=ze.prototype.isPaused,ze.prototype.getRemainingTime=ze.prototype.getRemainingTime,ze.prototype.getMinSuggestedDuration=ze.prototype.getMinSuggestedDuration,ze.prototype.getDuration=ze.prototype.getDuration,ze.prototype.isUsingAnotherMediaElement=ze.prototype.isUsingAnotherMediaElement,ze.prototype.hasCustomClick=ze.prototype.hasCustomClick,ze.prototype.isClientRendering=ze.prototype.isClientRendering,ze.prototype.needsSkipUI=ze.prototype.needsSkipUI;function Yl(e,t,n,o){this.C=e,this.K=t,this.h=n,this.l=null,this.R=NaN,this.i=o,this.J=!1,this.B=null,this.j=[],this.N=[],this.M=this.F=this.g=null,this.G=new Map,this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.o=new Le}Yl.prototype.stop=function(){for(var e=R(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ma(t.target,t.type,t.listener);ou(this),this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.B=null,this.j=[],this.N=[],this.G.clear()},Yl.prototype.release=function(){this.stop(),this.o&&this.o.release()},Yl.prototype.onManifestUpdated=function(e){this.J=e,this.H!=""&&(eI(this,this.H,this.O),this.O=!1)},Yl.prototype.getCuePoints=function(){for(var e=[],t=R(this.j),n=t.next();!n.done;n=t.next()){n=R(n.value.ads);for(var o=n.next();!o.done;o=n.next())o=o.value,e.push({start:o.startTimeInSeconds,end:o.startTimeInSeconds+o.durationInSeconds})}return e};function ZE(e,t,n){var o,u,a,d,p,g,y,w,T,M,L,P;$(function(N){if(N.g==1)return o={type:7},u=un([t],Yi()),u.method="POST",n&&(a=JSON.stringify(n),u.body=Xi(a)),d=e.K.request(7,u,o),ce(N,2),D(N,d.promise,4);if(N.g!=2){if(p=N.h,g=Ht(p.data),y=JSON.parse(g),y.manifestUrl&&y.trackingUrl)w=new Qt(t),T=new Qt(y.trackingUrl),e.H=w.resolve(T).toString(),M=Date.now()/1e3,L=M-e.R,e.i(new Ie("ads-loaded",new Map().set("loadTime",L))),P=new Qt(y.manifestUrl),e.l.resolve(w.resolve(P).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return X(N,0)}if(ie(N),!e.I.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,N.return();e.l.resolve(e.I),e.l=null,te(N)})}function eI(e,t,n){var o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B;$(function(V){if(V.g==1)return o={type:8},u=un([t],Yi()),a=e.K.request(7,u,o),ce(V,2),D(V,a.promise,4);if(V.g!=2){if(d=V.h,p=[],g=Ht(d.data),y=JSON.parse(g),y.avails.length>0){if(JSON.stringify(e.j)!=JSON.stringify(y.avails)){for(e.j=y.avails,w=R(e.j),T=w.next();!T.done;T=w.next())for(M=T.value,L=R(M.nonLinearAdsList),P=L.next();!P.done;P=L.next())for(N=P.value,O=R(N.nonLinearAdList),F=O.next();!F.done;F=O.next())B=F.value,tI(e,B);p=e.getCuePoints(),e.i(new Ie("ad-cue-points-changed",new Map().set("cuepoints",p)))}}else e.j.length&&e.i(new Ie("ad-cue-points-changed",new Map().set("cuepoints",p))),ou(e),e.j=[];return n&&(e.J||p.length>0)&&nI(e),X(V,0)}ie(V),te(V)})}function tI(e,t){var n,o,u,a,d,p,g,y;$(function(w){if(w.g==1)return!t.staticResource||(n=D2(t),e.G.get(n))?w.return():(o={type:9},u=un([t.staticResource],Yi()),a=e.K.request(7,u,o),ce(w,2),e.G.set(n,[]),D(w,a.promise,4));if(w.g!=2)return d=w.h,p=Ht(d.data),g=JSON.parse(p),y=g.apps,e.G.set(n,y),X(w,0);ie(w),e.G.delete(n),te(w)})}function D2(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function nI(e){N2(e),e.J||(O2(e),e.o.D(e.h,"seeked",function(){O2(e)}),e.o.D(e.h,"ended",function(){ou(e)})),e.o.D(e.h,"timeupdate",function(){N2(e)})}function O2(e){var t=e.h.currentTime;if(t!=0&&e.B==null){for(var n,o,u=R(e.j),a=u.next();!a.done;a=u.next()){a=a.value;for(var d=R(a.ads),p=d.next();!p.done;p=d.next())if(p=p.value,!o)p.startTimeInSeconds<t&&(o=p,n=a);else if(p.startTimeInSeconds<t&&p.startTimeInSeconds>o.startTimeInSeconds+o.durationInSeconds){o=p,n=a;break}}n&&o&&!e.N.includes(o.adId)&&(e.B=t,e.h.currentTime=n.startTimeInSeconds)}}function N2(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var o=e.F,u=o.startTimeInSeconds+.5*o.durationInSeconds,a=o.startTimeInSeconds+.75*o.durationInSeconds;t>=o.startTimeInSeconds+.25*o.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),qn(e,"firstQuartile")):t>=u&&!e.u.includes("midpoint")?(e.u.push("midpoint"),qn(e,"midpoint")):t>=a&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),qn(e,"thirdQuartile")),o=e.g.getRemainingTime(),u=e.g.getDuration(),e.g.canSkipNow()&&o>0&&u>0&&qn(e,"skipStateChanged"),u>0&&(o<=0||o>u)&&ou(e)}if(!e.g||!e.g.isLinear()){e:for(o=R(e.j),u=o.next();!u.done&&(u=u.value,!(e.g&&e.g.isLinear()));u=o.next())for(a=0;a<u.ads.length;a++){var d=u.ads[a],p=d.startTimeInSeconds+d.durationInSeconds;if(d.startTimeInSeconds<=t&&p>t){if(e.N.includes(d.adId)){if(e.h.ended)continue;e.h.currentTime=p;break e}ou(e),e.M=u,e.g=new ze(d,a+1,u.ads.length,!0,e.h),e.F=d,a===0&&qn(e,"breakStart"),U2(e);break}}if(!e.g){for(o=R(e.j),u=o.next();!u.done&&(u=u.value,!e.g);u=o.next())for(a=0;a<u.nonLinearAdsList.length;a++)if(d=u.nonLinearAdsList[a],d.nonLinearAdList.length){p=u.startTimeInSeconds;var g=e.G.get(D2(d.nonLinearAdList[0]));if(p<=t&&g&&g.length){ou(e),p=e,g=R(g);for(var y=g.next();!y.done;y=g.next())if(y=y.value,y.data.source.length){var w=document.createElement("img");w.src=y.data.source[0].url,w.style.top=(y.placeholder.top||0)+"%",w.style.height=100-(y.placeholder.top||0)+"%",w.style.left=(y.placeholder.left||0)+"%",w.style.maxWidth=100-(y.placeholder.left||0)+"%",w.style.objectFit="contain",w.style.position="absolute",p.C.appendChild(w)}e.M=u,e.g=new ze(d,a+1,u.ads.length,!1,e.h),e.F=d,a===0&&qn(e,"breakStart"),U2(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.B&&e.B>t&&(e.h.currentTime=e.B),e.B=null)}}}function ou(e){if(e.g){for(;e.C.lastChild;)e.C.removeChild(e.C.firstChild);e.J||e.N.push(e.F.adId);var t=e.g.m;t!==void 0&&t?qn(e,"skip"):qn(e,"complete"),t=R(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.Ma(n.target,n.type,n.listener);e.m=[],e.u=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&qn(e,"breakEnd"),e.g=null,e.F=null,e.M=null}}function U2(e){var t=!1;e.h.paused?t=!0:(qn(e,"impression"),qn(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&qn(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||qn(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(qn(e,"impression"),qn(e,"start"),t=!1):qn(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){qn(e,"pause")}});for(var n=R(e.m),o=n.next();!o.done;o=n.next())o=o.value,e.o.D(o.target,o.type,o.listener)}function qn(e,t){var n=e.F.trackingEvents.find(function(a){return a.eventType==t});if(n||(n=e.M.adBreakTrackingEvents.find(function(a){return a.eventType==t})),n){var o={type:10};n=R(n.beaconUrls);for(var u=n.next();!u.done;u=n.next())(u=u.value)&&u!=""&&(u=un([u],Yi()),u.method="POST",e.K.request(7,u,o))}switch(t){case"impression":e.i(new Ie("ad-impression"));break;case"start":e.i(new Ie("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new Ie("ad-muted"));break;case"unmute":e.i(new Ie("ad-volume-changed"));break;case"resume":e.i(new Ie("ad-resumed"));break;case"pause":e.i(new Ie("ad-paused"));break;case"firstQuartile":e.i(new Ie("ad-first-quartile"));break;case"midpoint":e.i(new Ie("ad-midpoint"));break;case"thirdQuartile":e.i(new Ie("ad-third-quartile"));break;case"complete":e.i(new Ie("ad-complete")),e.i(new Ie("ad-stopped"));break;case"skip":e.i(new Ie("ad-skipped")),e.i(new Ie("ad-stopped"));break;case"breakStart":e.C.setAttribute("ad-active","true");break;case"breakEnd":e.C.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new Ie("ad-skip-state-changed"))}}function We(e,t){this.g=e,this.i=null,this.h=t}m=We.prototype,m.needsSkipUI=function(){return!0},m.isClientRendering=function(){return!1},m.hasCustomClick=function(){return!0},m.isUsingAnotherMediaElement=function(){return!1},m.getDuration=function(){return this.i?this.i.duration:-1},m.getMinSuggestedDuration=function(){return this.getDuration()},m.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},m.isPaused=function(){return this.h.paused},m.isSkippable=function(){return this.g.isSkippable()},m.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},m.canSkipNow=function(){return this.getTimeUntilSkippable()==0},m.skip=function(){this.h.currentTime+=this.getRemainingTime()},m.pause=function(){return this.h.pause()},m.play=function(){return this.h.play()},m.getVolume=function(){return this.h.volume},m.setVolume=function(e){this.h.volume=e},m.isMuted=function(){return this.h.muted},m.isLinear=function(){return!0},m.resize=function(){},m.setMuted=function(e){this.h.muted=e},m.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},m.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},m.getTitle=function(){return this.g.getTitle()},m.getDescription=function(){return this.g.getDescription()},m.getVastMediaBitrate=function(){return 0},m.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},m.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},m.getVastAdId=function(){return""},m.getAdId=function(){return this.g.getAdId()},m.getCreativeAdId=function(){return this.g.getCreativeAdId()},m.getAdvertiserName=function(){return this.g.getAdvertiserName()},m.getMediaUrl=function(){return null},m.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},m.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},m.release=function(){this.h=this.i=this.g=null},be("shaka.ads.ServerSideAd",We),We.prototype.release=We.prototype.release,We.prototype.getPodIndex=We.prototype.getPodIndex,We.prototype.getTimeOffset=We.prototype.getTimeOffset,We.prototype.getMediaUrl=We.prototype.getMediaUrl,We.prototype.getAdvertiserName=We.prototype.getAdvertiserName,We.prototype.getCreativeAdId=We.prototype.getCreativeAdId,We.prototype.getAdId=We.prototype.getAdId,We.prototype.getVastAdId=We.prototype.getVastAdId,We.prototype.getVastMediaWidth=We.prototype.getVastMediaWidth,We.prototype.getVastMediaHeight=We.prototype.getVastMediaHeight,We.prototype.getVastMediaBitrate=We.prototype.getVastMediaBitrate,We.prototype.getDescription=We.prototype.getDescription,We.prototype.getTitle=We.prototype.getTitle,We.prototype.getPositionInSequence=We.prototype.getPositionInSequence,We.prototype.getSequenceLength=We.prototype.getSequenceLength,We.prototype.setMuted=We.prototype.setMuted,We.prototype.resize=We.prototype.resize,We.prototype.isLinear=We.prototype.isLinear,We.prototype.isMuted=We.prototype.isMuted,We.prototype.setVolume=We.prototype.setVolume,We.prototype.getVolume=We.prototype.getVolume,We.prototype.play=We.prototype.play,We.prototype.pause=We.prototype.pause,We.prototype.skip=We.prototype.skip,We.prototype.canSkipNow=We.prototype.canSkipNow,We.prototype.getTimeUntilSkippable=We.prototype.getTimeUntilSkippable,We.prototype.isSkippable=We.prototype.isSkippable,We.prototype.isPaused=We.prototype.isPaused,We.prototype.getRemainingTime=We.prototype.getRemainingTime,We.prototype.getMinSuggestedDuration=We.prototype.getMinSuggestedDuration,We.prototype.getDuration=We.prototype.getDuration,We.prototype.isUsingAnotherMediaElement=We.prototype.isUsingAnotherMediaElement,We.prototype.hasCustomClick=We.prototype.hasCustomClick,We.prototype.isClientRendering=We.prototype.isClientRendering,We.prototype.needsSkipUI=We.prototype.needsSkipUI;function B2(e,t,n,o){var u=this;this.u=e,this.l=t,this.j=null,this.G=NaN,this.i=o,this.H=!1,this.B=this.m=this.o=null,this.C="",this.F=[],this.h=new Le,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new Ie("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(a){iI(u,a)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.C.length?u.j.resolve(u.C):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(a){a=a.getAd(),u.m=new We(a,u.l),u.B&&(u.m.i=u.B),u.i(new Ie("ad-started",new Map().set("ad",u.m))),u.u.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.u.removeAttribute("ad-active");var a=u.l.currentTime;u.o&&u.o>a&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(a){u.B=a.getStreamData().adProgressData,u.m&&(u.m.i=u.B)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new Ie("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new Ie("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new Ie("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new Ie("ad-complete")),u.i(new Ie("ad-stopped")),u.u.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new Ie("ad-skipped")),u.i(new Ie("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(a){var d=a.getStreamData();a=[],d=R(d.cuepoints);for(var p=d.next();!p.done;p=d.next())p=p.value,a.push({start:p.start,end:p.end});u.F=a,u.i(new Ie("ad-cue-points-changed",new Map().set("cuepoints",a)))})}m=B2.prototype,m.configure=function(){},m.stop=function(){this.C="",this.o=null,this.F=[]},m.release=function(){this.stop(),this.h&&this.h.release()},m.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},m.getCuePoints=function(){return this.F};function iI(e,t){e.i(new Ie("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.H||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var o=e.g.previousCuePointForStreamTime(n);o&&!o.played&&(e.o=n,e.l.currentTime=o.start)}})}function _e(){Tt.call(this),this.h=this.i=this.j=this.g=null,this.m=new b2,this.o=navigator.language,this.l=null}U(_e,Tt),m=_e.prototype,m.setLocale=function(e){this.o=e},m.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},m.initInterstitial=function(e,t,n){var o=this;this.g&&this.g.release(),this.g=new I2(e,t,n,function(u){return Oc(o,u)}),this.g.configure(this.l)},m.initClientSide=function(e,t,n){var o=this;if(!f.google||!google.ima||!google.ima.AdsLoader)throw new q(2,10,1e4);this.j&&this.j.release(),this.j=new _c(e,t,this.o,n,function(u){return Oc(o,u)}),this.j.configure(this.l)},m.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),Tt.prototype.release.call(this)},m.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new Ie("ad-stopped")),this.dispatchEvent(new Ie("ad-content-attach-requested")),this.m=new b2},m.requestClientSideAds=function(e){if(!this.j)throw new q(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.H=Date.now()/1e3,t.m.requestAds(e)},m.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new q(1,10,10001);var t=this.j;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},m.initMediaTailor=function(e,t,n){var o=this;this.i&&this.i.release(),this.i=new Yl(e,t,n,function(u){return Oc(o,u)})},m.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new q(1,10,10005);var o=this.i;return n=n===void 0?"":n,o.l?e=Promise.reject(new q(1,10,10004)):(o.l=new _t,ZE(o,e,t),o.I=n||"",o.R=Date.now()/1e3,e=o.l),e},m.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new q(1,10,10005);var t=this.i;t.H=e,t.i(new Ie("ads-loaded",new Map().set("loadTime",0)))},m.initServerSide=function(e,t){var n=this;if(!f.google||!google.ima||!google.ima.dai)throw new q(2,10,10002);this.h&&this.h.release(),this.h=new B2(e,t,this.o,function(o){return Oc(n,o)}),this.h.configure(this.l)},m.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.h)throw new q(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&st('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.16.0",n=this.h,n.j?e=Promise.reject(new q(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.H=!0),n.j=new _t,n.g.requestStream(e),n.C=t||"",n.G=Date.now()/1e3,e=n.j),e},m.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new q(1,10,10003);(e.mpt||e.mpv)&&st('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.16.0",this.h.g.replaceAdTagParameters(e)},m.getServerSideCuePoints=function(){return yt("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},m.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},m.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:$E(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},m.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},m.onDashTimedMetadata=function(e){this.h&&e.schemeIdUri=="urn:google:dai:2018"&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},m.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},m.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},m.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&WE(this.g,n))},m.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var o=n.schemeIdUri;if(o=="urn:mpeg:dash:event:alternativeMPD:insert:2025"||o=="urn:mpeg:dash:event:alternativeMPD:replace:2025"){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:replace:2025",o=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:insert:2025",t||o)){for(var u=n.startTime,a=n.endTime,d=null,p=0,g,y=R(n.eventNode.children),w=y.next();!w.done;w=y.next())if(w=w.value,w.tagName=="AlternativeMPD"){if(w=w.attributes.uri){g=w;break}}else if(w.tagName=="InsertPresentation"||w.tagName=="ReplacePresentation"){var T=w.attributes.url;if(T){g=Wn(T),(y=Qe(w,"maxDuration",bn))&&(d=y/n.timescale),(y=Qe(w,"returnOffset",bn))&&(p=y/n.timescale),t&&p&&(a=u+p);break}}g&&Kl(e,[{id:n.id,groupId:null,startTime:u,endTime:a,uri:g,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:o?p:null,playoutLimit:d,once:!1,pre:!1,post:!1,timelineRange:t&&!o,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}])}}else(o=="urn:mpeg:dash:event:2012"||o=="urn:scte:dash:scte214-events")&&n.eventNode&&Ft(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&KE(this.g,n))}},m.addCustomInterstitial=function(e){if(!this.g)throw new q(1,10,10006);Kl(this.g,[e])},m.addAdUrlInterstitial=function(e){if(!this.g)throw new q(1,10,10006);return this.g.addAdUrlInterstitial(e)},m.getInterstitialPlayer=function(){if(!this.g)throw new q(1,10,10006);return this.g.td()};function Oc(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}be("shaka.ads.AdManager",_e),_e.prototype.getInterstitialPlayer=_e.prototype.getInterstitialPlayer,_e.prototype.addAdUrlInterstitial=_e.prototype.addAdUrlInterstitial,_e.prototype.addCustomInterstitial=_e.prototype.addCustomInterstitial,_e.prototype.onDASHInterstitialMetadata=_e.prototype.onDASHInterstitialMetadata,_e.prototype.onHLSInterstitialMetadata=_e.prototype.onHLSInterstitialMetadata,_e.prototype.onCueMetadataChange=_e.prototype.onCueMetadataChange,_e.prototype.onHlsTimedMetadata=_e.prototype.onHlsTimedMetadata,_e.prototype.onDashTimedMetadata=_e.prototype.onDashTimedMetadata,_e.prototype.onManifestUpdated=_e.prototype.onManifestUpdated,_e.prototype.getStats=_e.prototype.getStats,_e.prototype.getCuePoints=_e.prototype.getCuePoints,_e.prototype.getServerSideCuePoints=_e.prototype.getServerSideCuePoints,_e.prototype.replaceServerSideAdTagParameters=_e.prototype.replaceServerSideAdTagParameters,_e.prototype.requestServerSideStream=_e.prototype.requestServerSideStream,_e.prototype.initServerSide=_e.prototype.initServerSide,_e.prototype.addMediaTailorTrackingUrl=_e.prototype.addMediaTailorTrackingUrl,_e.prototype.requestMediaTailorStream=_e.prototype.requestMediaTailorStream,_e.prototype.initMediaTailor=_e.prototype.initMediaTailor,_e.prototype.updateClientSideAdsRenderingSettings=_e.prototype.updateClientSideAdsRenderingSettings,_e.prototype.requestClientSideAds=_e.prototype.requestClientSideAds,_e.prototype.onAssetUnload=_e.prototype.onAssetUnload,_e.prototype.release=_e.prototype.release,_e.prototype.initClientSide=_e.prototype.initClientSide,_e.prototype.initInterstitial=_e.prototype.initInterstitial,_e.prototype.configure=_e.prototype.configure,_e.prototype.setLocale=_e.prototype.setLocale,_e.ADS_LOADED="ads-loaded",_e.AD_STARTED="ad-started",_e.AD_FIRST_QUARTILE="ad-first-quartile",_e.AD_MIDPOINT="ad-midpoint",_e.AD_THIRD_QUARTILE="ad-third-quartile",_e.AD_COMPLETE="ad-complete",_e.AD_STOPPED="ad-stopped",_e.AD_SKIPPED="ad-skipped",_e.AD_VOLUME_CHANGED="ad-volume-changed",_e.AD_MUTED="ad-muted",_e.AD_PAUSED="ad-paused",_e.AD_RESUMED="ad-resumed",_e.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",_e.CUEPOINTS_CHANGED="ad-cue-points-changed",_e.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",_e.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",_e.AD_CLICKED="ad-clicked",_e.AD_PROGRESS="ad-progress",_e.AD_BUFFERING="ad-buffering",_e.AD_IMPRESSION="ad-impression",_e.AD_DURATION_CHANGED="ad-duration-changed",_e.AD_CLOSED="ad-closed",_e.AD_LOADED="ad-loaded",_e.ALL_ADS_COMPLETED="all-ads-completed",_e.AD_LINEAR_CHANGED="ad-linear-changed",_e.AD_METADATA="ad-metadata",_e.AD_RECOVERABLE_ERROR="ad-recoverable-error",_e.AD_ERROR="ad-error",_e.AD_BREAK_READY="ad-break-ready",_e.AD_INTERACTION="ad-interaction",_e.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",_e.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",_e.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Mc=function(){return new _e};function F2(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Ie){var o={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(o[u]=t):u in Event||(o[u]=t);return o}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(o in n)u.add(o);for(o=R(Object.getOwnPropertyNames(n)),t=o.next();!t.done;t=o.next())u.add(t.value);for(o={},u=R(u),t=u.next();!t.done;t=u.next())t=t.value,o[t]=n[t];n={__type__:"Error",contents:o}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=R(Pr(n)),o=n.next();!o.done;o=n.next())o=o.value,t=o.end,u.start.push(o.start),u.end.push(t);n=u}else n=ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT===1?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:n<0?"-Infinity":"Infinity":n;return n}})}function U0(e){return JSON.parse(e,function(t,n){if(n=="NaN")var o=NaN;else if(n=="-Infinity")o=-1/0;else if(n=="Infinity")o=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")o=rI(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")o=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(o in t)n[o]=t[o];o=n}else o=n;return o})}function rI(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var j2="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),oI="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),B0=["loop","playbackRate"],sI=["pause","play"],F0=new Map().set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1).set("getBandwidthEstimate",1),j0=new Map().set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),$2=new Map().set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),z2=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],V2=[["isTextTrackVisible","setTextTrackVisibility"]],uI="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),lI="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function $0(e,t,n,o,u,a,d){var p=this;this.H=e,this.K=d,this.l=new dt(t),this.M=n,this.u=!1,this.B=o,this.G=u,this.N=a,this.i=this.m=!1,this.J="",this.o=null,this.C=function(){return z0(p)},this.F=function(g,y){switch(g=U0(y),g.type){case"event":var w=g.targetName,T=P1(g.event);p.B(w,T);break;case"update":w=g.update;for(T in w){g=p.g[T]||{};for(var M in w[T])g[M]=w[T][M]}p.u&&(p.M(),p.u=!1);break;case"asyncComplete":if(M=g.id,T=g.error,y=g.res,g=p.h.get(M),p.h.delete(M),g)if(T){M=new q(T.severity,T.category,T.code);for(w in T)M[w]=T[w];g.reject(M)}else g.resolve(y)}},this.g={video:{},player:{}},this.I=0,this.h=new Map,this.j=null,Jl.add(this)}m=$0.prototype,m.destroy=function(){return Jl.delete(this),V0(this),Ji&&G2(this),this.l&&(this.l.stop(),this.l=null),this.G=this.B=null,this.i=this.m=!1,this.F=this.C=this.j=this.h=this.g=this.o=null,Promise.resolve()},m.yb=function(){return this.i},m.ah=function(){return this.J},m.init=function(){if(this.H.length)if(f.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Kb();var e=new chrome.cast.SessionRequest(this.H,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=R(Jl),o=n.next();!o.done;o=n.next()){o=o.value;var u=t;o.j=new _t,o.u=!0,Nc(o,u)}},function(t){for(var n=R(Jl),o=n.next();!o.done;o=n.next())o=o.value,Uc=t=="available",o.l.Kb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Uc&&this.l.ka(fI),(e=Ji)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new _t,this.u=!0,Nc(this,e)):Ji=null}else f.__onGCastApiAvailable!==X2&&(Bc=f.__onGCastApiAvailable||null,f.__onGCastApiAvailable=X2)},m.nh=function(e){this.o=e,this.i&&ql(this,{type:"appData",appData:this.o})},m.cast=function(){var e=this;return $(function(t){if(!e.m)throw new q(1,8,8e3);if(!Uc)throw new q(1,8,8001);if(e.i)throw new q(1,8,8002);return e.j=new _t,chrome.cast.requestSession(function(n){return Nc(e,n)},function(n){return H2(e,n)}),D(t,e.j,0)})};function aI(e){e.i&&chrome.cast.requestSession(function(t){return Nc(e,t)},function(t){return H2(e,t)})}m.qd=function(){if(this.i){if(V0(this),Ji){G2(this);try{Ji.stop(function(){},function(){})}catch{}Ji=null}z0(this)}},m.get=function(e,t){var n=this;if(e=="video"){if(sI.includes(t))return function(){return n.Fi.apply(n,[e,t].concat(le(ft.apply(0,arguments))))}}else if(e=="player"){if($2.has(t)&&!this.get("player","isLive")())return function(){};if(uI.includes(t))return function(){return n.Fi.apply(n,[e,t].concat(le(ft.apply(0,arguments))))};if(lI.includes(t))return function(){return n.Nk.apply(n,[e,t].concat(le(ft.apply(0,arguments))))};if(F0.has(t)||j0.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},m.set=function(e,t,n){this.g[e][t]=n,ql(this,{type:"set",targetName:e,property:t,value:n})};function Nc(e,t){var n=e.N();Ji=t,t.addUpdateListener(e.C),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.F),z0(e),ql(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function H2(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new q(2,8,n,t))}m.Fi=function(e,t){ql(this,{type:"call",targetName:e,methodName:t,args:ft.apply(2,arguments)})},m.Nk=function(e,t){var n=ft.apply(2,arguments),o=new _t,u=this.I.toString();this.I++,this.h.set(u,o);try{ql(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(a){o.reject(a)}return o};function G2(e){var t=Ji;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.F)}function z0(e){var t=Ji?Ji.status=="connected":!1;if(e.i&&!t){e.G();for(var n in e.g)e.g[n]={};V0(e)}e.i=t,e.J=t?Ji.receiver.friendlyName:"",e.l.Kb()}function V0(e){if(e.h)for(var t=R(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var o=e.h.get(n);e.h.delete(n),o.reject(new q(1,7,7e3))}}function ql(e,t){t=F2(t);var n=Ji;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},Yr)}catch(o){throw t=new q(2,8,8005,o),n=new Ie("error",new Map().set("detail",t)),e.B("player",n),e.qd(),t}}var fI=.02,Uc=!1,Ji=null,Bc=null,Jl=new Set;function X2(e){if(Bc?f.__onGCastApiAvailable=Bc:delete f.__onGCastApiAvailable,Bc=null,e)for(var t=R(Jl),n=t.next();!n.done;n=t.next())n.value.init();typeof f.__onGCastApiAvailable=="function"&&f.__onGCastApiAvailable(e)}function ln(e,t,n,o){o=o===void 0?!1:o,Tt.call(this);var u=this;this.i=e,this.h=t,this.l=this.o=this.m=this.u=this.j=null,this.I=n,this.H=o,this.F=[],this.C=[],this.B=[],this.G=new Map,this.g=null,f.chrome?(this.g=new $0(n,function(){return Y2(u)},function(){return q2(u)},function(a,d){return Q2(u,a,d)},function(){return J2(u)},function(){return K2(u)},o),cI(this)):(this.j=this.i,this.u=this.h)}U(ln,Tt),m=ln.prototype,m.destroy=function(e){return this.g&&(e!==void 0&&e)&&this.g.qd(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,Tt.prototype.release.call(this),Promise.all(e)},m.dk=function(){return this.j},m.td=function(){return this.u},m.mj=function(){return this.g?this.g.m&&Uc:!1},m.yb=function(){return this.g?this.g.yb():!1},m.ah=function(){return this.g?this.g.ah():""},m.cast=function(){var e=this;return $(function(t){return t.g==1?e.g?D(t,e.g.cast(),2):t.return():e.h?D(t,e.h.Bc(),0):t.return()})},m.nh=function(e){this.g&&this.g.nh(e)},m.fl=function(){this.g&&aI(this.g)},m.qd=function(){this.g&&this.g.qd()},m.nj=function(e,t){t=t===void 0?!1:t;var n=this;return $(function(o){if(o.g==1)return e==n.I&&t==n.H||(n.I=e,n.H=t,!n.g)?o.return():(n.g.qd(),D(o,n.g.destroy(),2));n.g=null,n.g=new $0(e,function(){return Y2(n)},function(){return q2(n)},function(u,a){return Q2(n,u,a)},function(){return J2(n)},function(){return K2(n)},t),n.g.init(),te(o)})};function cI(e){e.g.init(),e.l=new Le;for(var t=R(j2),n=t.next();!n.done;n=t.next())e.l.D(e.i,n.value,function(a){e.g.yb()||(a=P1(a),e.m.dispatchEvent(a))});for(var o in Rf)e.l.D(e.h,Rf[o],function(a){e.g.yb()||e.o.dispatchEvent(a)});e.j={},t={};for(var u in e.i)t={be:t.be},t.be=u,Object.defineProperty(e.j,t.be,{configurable:!1,enumerable:!0,get:(function(a){return function(){return hI(e,a.be)}})(t),set:(function(a){return function(d){var p=a.be;e.g.yb()?e.g.set("video",p,d):e.i[p]=d}})(t)});e.u={},W2(e,function(a){Object.defineProperty(e.u,a,{configurable:!1,enumerable:!0,get:function(){return Fc(e,a)}})}),dI(e),e.m=new Tt,e.m.Ee=e.j,e.o=new Tt,e.o.Ee=e.u,e.l.D(e.h,"unloading",function(){e.g&&e.g.yb()||H0(e)})}function dI(e){var t=new Map;W2(e,function(n,o){t.has(o)?(o=t.get(o),n.length<o.length?e.G.set(n,o):e.G.set(o,n)):t.set(o,n)})}function W2(e,t){function n(g){return g=="constructor"||typeof o[g]!="function"?!1:!u.has(g)}var o=e.h,u=new Set,a;for(a in o)n(a)&&(u.add(a),t(a,o[a]));for(e=Object.getPrototypeOf(o),a=Object.getPrototypeOf({});e&&e!=a;){for(var d=R(Object.getOwnPropertyNames(e)),p=d.next();!p.done;p=d.next())p=p.value,n(p)&&(u.add(p),t(p,o[p]));e=Object.getPrototypeOf(e)}}function K2(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.rd(),startTime:null,addThumbnailsTrackCalls:e.F,addTextTrackAsyncCalls:e.C,addChaptersTrackCalls:e.B};e.i.pause();for(var n=R(B0),o=n.next();!o.done;o=n.next())o=o.value,t.video[o]=e.i[o];for(e.i.ended||(t.startTime=e.i.currentTime),n=R(z2),o=n.next();!o.done;o=n.next()){var u=o.value;o=u[1],u=e.h[u[0]](),t.player[o]=u}for(n=R(V2),o=n.next();!o.done;o=n.next())u=o.value,o=u[1],u=e.h[u[0]](),t.playerAfterLoad[o]=u;return t}function Y2(e){var t=new Ie("caststatuschanged");e.dispatchEvent(t)}function q2(e){var t=new Ie(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function J2(e){for(var t=R(z2),n=t.next();!n.done;n=t.next()){var o=n.value;n=o[1],o=e.g.get("player",o[0])(),e.h[n](o)}var u=e.F,a=e.C,d=e.B;H0(e);var p=e.g.get("player","getAssetUri")();o=e.g.get("video","ended"),t=Promise.resolve();var g=e.i.autoplay;n=null,o||(n=e.g.get("video","currentTime"));var y;(o=e.g.get("player","getTextTracks")())&&o.length&&(y=o.find(function(M){return M.active}));var w=e.g.get("player","isTextTrackVisible")();p&&(e.i.autoplay=!1,t=e.h.load(p,n));var T={};for(n=R(B0),o=n.next();!o.done;o=n.next())o=o.value,T[o]=e.g.get("video",o);t.then(function(){if(e.i){for(var M=R(u),L=M.next();!L.done;L=M.next()){L=L.value;var P;(P=e.td()).Le.apply(P,le(L))}for(M=R(a),P=M.next();!P.done;P=M.next()){P=P.value;var N;(N=e.td()).Md.apply(N,le(P))}for(N=R(d),M=N.next();!M.done;M=N.next()){M=M.value;var O;(O=e.td()).Ke.apply(O,le(M))}for(O=R(B0),N=O.next();!N.done;N=O.next())N=N.value,e.i[N]=T[N];for(O=R(V2),N=O.next();!N.done;N=O.next())M=N.value,N=M[1],M=e.g.get("player",M[0])(),e.h[N](M);e.h.rh(w),y&&e.h.kh(y.language,y.roles,y.forced),e.i.autoplay=g,p&&e.i.play()}},function(M){M=new Map().set("detail",M),M=new Ie("error",M),e.h.dispatchEvent(M)})}function hI(e,t){if(t=="addEventListener")return function(o,u,a){return e.m.addEventListener(o,u,a)};if(t=="removeEventListener")return function(o,u,a){return e.m.removeEventListener(o,u,a)};if(e.g.yb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.yb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function Fc(e,t,n){if(n=n===void 0?!1:n,e.G.has(t)&&(t=e.G.get(t)),t=="addEventListener")return function(o,u,a){return e.o.addEventListener(o,u,a)};if(t=="removeEventListener")return function(o,u,a){return e.o.removeEventListener(o,u,a)};if(t=="getMediaElement")return function(){return e.j};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Wb()};if(t=="getDrmEngine")return function(){return e.h.F};if(t=="getAdManager")return function(){return e.h.Zh()};if(t=="getQueueManager")return function(){return e.h.ei()};if(t=="setVideoContainer")return function(o){return e.h.Ti(o)};if(!n){if(t=="addThumbnailsTrack")return function(){var o=ft.apply(0,arguments);return e.F.push(o),Fc(e,t,!0).apply(null,le(o))};if(t=="addTextTrackAsync")return function(){var o=ft.apply(0,arguments);return e.C.push(o),Fc(e,t,!0).apply(null,le(o))};if(t=="addChaptersTrack")return function(){var o=ft.apply(0,arguments);return e.B.push(o),Fc(e,t,!0).apply(null,le(o))}}if(e.g.yb()){if(t=="getManifest"||t=="drmInfo")return function(){return st(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return st(t+"() does not work while casting!"),Promise.resolve()};if(t=="getChapters")return function(){return st(t+"() does not work while casting!"),[]}}return e.g.yb()&&Object.keys(e.g.g.video).length==0&&(F0.has(t)||j0.has(t))||!e.g.yb()?e.h[t].bind(e.h):e.g.get("player",t)}function Q2(e,t,n){e.g.yb()&&(t=="video"?e.m.dispatchEvent(n):t=="player"&&(n.type=="unloading"&&H0(e),e.o.dispatchEvent(n)))}function H0(e){e.F=[],e.C=[],e.B=[]}be("shaka.cast.CastProxy",ln),ln.prototype.changeReceiverId=ln.prototype.nj,ln.prototype.forceDisconnect=ln.prototype.qd,ln.prototype.suggestDisconnect=ln.prototype.fl,ln.prototype.setAppData=ln.prototype.nh,ln.prototype.cast=ln.prototype.cast,ln.prototype.receiverName=ln.prototype.ah,ln.prototype.isCasting=ln.prototype.yb,ln.prototype.canCast=ln.prototype.mj,ln.prototype.getPlayer=ln.prototype.td,ln.prototype.getVideo=ln.prototype.dk,ln.prototype.destroy=ln.prototype.destroy;function Un(e,t,n,o){Tt.call(this);var u=this;this.h=e,this.g=t,this.j=new Le,this.I={video:e,player:t},this.G=n||function(){},this.J=o||function(a){return a},this.i=null,this.H=!1,this.o=!0,this.m=0,this.C=!1,this.B=!0,this.u=this.l=null,this.F=new dt(function(){G0(u)}),pI(this)}U(Un,Tt),m=Un.prototype,m.isConnected=function(){return this.H},m.kk=function(){return this.o},m.Zk=function(e){this.i=e},m.rj=function(){this.i=null},m.$k=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},m.Yk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},m.Xk=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},m.destroy=function(){var e=this,t,n;return $(function(o){if(o.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.g&&(t.push(e.g.destroy()),e.g=null),e.F&&(e.F.stop(),e.F=null),e.h=null,e.I=null,e.G=null,e.H=!1,e.o=!0,e.l=null,e.u=null,Tt.prototype.release.call(e),D(o,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),te(o)})};function pI(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Z2(e)},t.onSenderDisconnected=function(){return Z2(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&Br(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),Br(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(u){return yI(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return mI(e,u)},t.start(),t=R(j2);for(var n=t.next();!n.done;n=t.next())e.j.D(e.h,n.value,function(u){return ew(e,"video",u)});for(var o in Rf)e.j.D(e.g,Rf[o],function(u){return ew(e,"player",u)});e.j.D(e.h,"loadeddata",function(){e.C=!0}),e.j.D(e.g,"loading",function(){e.o=!1,su(e)}),e.j.D(e.h,"playing",function(){e.o=!1,su(e)}),e.j.D(e.h,"pause",function(){su(e)}),e.j.D(e.g,"unloading",function(){e.o=!0,su(e)}),e.j.D(e.h,"ended",function(){new dt(function(){e.h&&e.h.ended&&(e.o=!0,su(e))}).ka(xI)})}function Z2(e){e.m=0,e.B=!0,e.H=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,su(e)}function su(e){var t;$(function(n){if(n.g==1)return D(n,Promise.resolve(),2);if(!e.g)return n.return();t=new Ie("caststatuschanged"),e.dispatchEvent(t),tw(e)||Fr(e),te(n)})}function gI(e,t,n){var o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J;$(function(H){switch(H.g){case 1:for(o in t.player)u=t.player[o],e.g[o](u);return e.G(n),a=e.h.autoplay,t.manifest?(e.h.autoplay=!1,ce(H,5),D(H,e.g.load(t.manifest,t.startTime),7)):D(H,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(d=R(t.addThumbnailsTrackCalls),p=d.next();!p.done;p=d.next())g=p.value,e.g.Le.apply(e.g,le(g));if(t.addTextTrackAsyncCalls)for(y=R(t.addTextTrackAsyncCalls),w=y.next();!w.done;w=y.next())T=w.value,e.g.Md.apply(e.g,le(T));if(t.addChaptersTrackCalls)for(M=R(t.addChaptersTrackCalls),L=M.next();!L.done;L=M.next())P=L.value,e.g.Ke.apply(e.g,le(P));X(H,3);break;case 5:return N=ie(H),O=new Map().set("detail",N),F=new Ie("error",O),e.g&&e.g.dispatchEvent(F),H.return();case 3:if(!e.g)return H.return();for(B in t.video)V=t.video[B],e.h[B]=V;for(Y in t.playerAfterLoad)J=t.playerAfterLoad[Y],e.g[Y](J);e.h.autoplay=a,t.manifest&&(e.h.play(),Fr(e)),te(H)}})}function ew(e,t,n){e.g&&(G0(e),Br(e,{type:"event",targetName:t,event:n},e.l))}function G0(e){e.F.ka(vI);for(var t={video:{},player:{}},n=R(oI),o=n.next();!o.done;o=n.next())o=o.value,t.video[o]=e.h[o];e.g.W()&&$2.forEach(function(u,a){e.m%u==0&&(t.player[a]=e.g[a]())}),F0.forEach(function(u,a){e.m%u==0&&(t.player[a]=e.g[a]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Br(e,{type:"update",update:t},e.l),j0.forEach(function(u,a){e.m%u==0&&(u={player:{}},u.player[a]=e.g[a](),Br(e,{type:"update",update:u},e.l))}),e.C&&(e.m+=1),tw(e)}function tw(e){return e.B&&(e.h.duration||e.g.W())?(X0(e),e.B=!1,!0):!1}function X0(e,t){var n={contentId:e.g.rd(),streamType:e.g.W()?"LIVE":"BUFFERED",contentType:""};e.g.W()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),Fr(e,t===void 0?0:t,n)}function mI(e,t){var n=U0(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.B=!0,gI(e,n.initState,n.appData),G0(e);break;case"appData":e.G(n.appData);break;case"set":var o=n.targetName,u=n.property;if(n=n.value,o=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.I[o][u]=n;break;case"call":o=e.I[n.targetName],o[n.methodName].apply(o,n.args);break;case"asyncCall":o=n.targetName,u=n.methodName,o=="player"&&u=="load"&&(e.m=0,e.C=!1);var a=n.id,d=t.senderId;t=e.I[o],n=t[u].apply(t,n.args),o=="player"&&u=="load"&&(n=n.then(function(){e.B=!0})),n.then(function(p){return nw(e,d,a,null,p)},function(p){return nw(e,d,a,p,null)})}}function yI(e,t){var n=U0(t.data);switch(n.type){case"PLAY":e.h.play(),Fr(e);break;case"PAUSE":e.h.pause(),Fr(e);break;case"SEEK":t=n.currentTime;var o=n.resumeState;t!=null&&(e.h.currentTime=Number(t)),o&&o=="PLAYBACK_START"?(e.h.play(),Fr(e)):o&&o=="PLAYBACK_PAUSE"&&(e.h.pause(),Fr(e));break;case"STOP":e.g.Bc().then(function(){e.g&&Fr(e)});break;case"GET_STATUS":X0(e,Number(n.requestId));break;case"VOLUME":o=n.volume,t=o.level,o=o.muted;var u=e.h.volume,a=e.h.muted;t!=null&&(e.h.volume=Number(t)),o!=null&&(e.h.muted=o),u==e.h.volume&&a==e.h.muted||Fr(e);break;case"LOAD":e.m=0,e.C=!1,e.B=!1,t=n.media,o=n.currentTime,u=e.J(t.contentId),a=n.autoplay||!0,e.G(t.customData),a&&(e.h.autoplay=!0),e.g.load(u,o).then(function(){e.g&&X0(e)}).catch(function(d){var p="LOAD_FAILED";d.category==7&&d.code==7e3&&(p="LOAD_CANCELLED"),Br(e,{requestId:Number(n.requestId),type:p},e.u)});break;default:Br(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function nw(e,t,n,o,u){e.g&&Br(e,{type:"asyncComplete",id:n,error:o,res:u},e.l,t)}function Br(e,t,n,o){e.H&&(e=F2(t),o?n.getCastChannel(o).send(e):n.broadcast(e))}function Fr(e,t,n){n=n===void 0?null:n;var o={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.o?wI:e.g.Og()?TI:e.h.paused?CI:SI,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(o.media=n),Br(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[o]},e.u)}be("shaka.cast.CastReceiver",Un),Un.prototype.destroy=Un.prototype.destroy,Un.prototype.setContentArtist=Un.prototype.Xk,Un.prototype.setContentImage=Un.prototype.Yk,Un.prototype.setContentTitle=Un.prototype.$k,Un.prototype.clearContentMetadata=Un.prototype.rj,Un.prototype.setContentMetadata=Un.prototype.Zk,Un.prototype.isIdle=Un.prototype.kk,Un.prototype.isConnected=Un.prototype.isConnected;var vI=.5,xI=5,wI="IDLE",SI="PLAYING",TI="BUFFERING",CI="PAUSED";function iw(e,t,n,o,u){if(o>=u)return null;for(var a=-1,d=-1,p=0;p<n.length;p++)if(n[p].some(function(Y){return Y!=null&&Y.g.trim()!=""})){a=p;break}for(p=n.length-1;p>=0;p--)if(n[p].some(function(Y){return Y!=null&&Y.g.trim()!=""})){d=p;break}if(a===-1||d===-1)return null;for(var g=p=!1,y="white",w="black",T=W0(o,u,p,g,y,w);a<=d;a++){for(var M=n[a],L=-1,P=-1,N=0;N<M.length;N++)if(M[N]!=null&&M[N].g.trim()!==""){L=N;break}for(N=M.length-1;N>=0;N--)if(M[N]!=null&&M[N].g.trim()!==""){P=N;break}if(L===-1||P===-1)M=rw(o,u),e.nestedCues.push(M);else{for(;L<=P;L++)if(N=M[L]){var O=N.l,F=N.i,B=N.j,V=N.h;(O!=p||F!=g||B!=y||V!=w)&&(T.payload&&e.nestedCues.push(T),T=W0(o,u,O,F,B,V),p=O,g=F,y=B,w=V),T.payload+=N.g}else T.payload+=" ";T.payload&&e.nestedCues.push(T),a!==d&&(T=rw(o,u),e.nestedCues.push(T)),T=W0(o,u,p,g,y,w)}}return e.nestedCues.length?{cue:e,stream:t}:null}function W0(e,t,n,o,u,a){return e=new Ut(e,t,""),n&&e.textDecoration.push(Ar),o&&(e.fontStyle=Ms),e.color=u,e.backgroundColor=a,e}function rw(e,t){return e=new Ut(e,t,""),e.lineBreak=!0,e}function ow(e,t,n,o,u){this.g=e,this.l=t,this.i=n,this.h=o,this.j=u}function K0(e,t){this.i=[],this.g=1,this.h=0,this.F=e,this.C=t,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.B=null,Ql(this)}function jc(e,t,n){var o="CC"+((e.F<<1|e.C)+1),u=new Ut(t,n,"");u.lineInterpretation=1;var a=lw.get(e.g);return a&&(u.line=a),e.u!=null&&e.B!=null&&(u.position=10+Math.min(70,e.u*10)+e.B*2.5),(t=iw(u,o,e.i,t,n))&&e.g+t.cue.nestedCues.length-3>15&&(a=lw.get(e.g+3-t.cue.nestedCues.length))&&(u.line=a),t}function Ql(e){jr(e,0,15),e.g=1}function uu(e,t,n){if(!(n<32||n>127)){var o="";switch(t){case 0:o=uw.has(n)?uw.get(n):String.fromCharCode(n);break;case 1:o=bI.get(n);break;case 2:e.i[e.g].pop(),o=kI.get(n);break;case 3:e.i[e.g].pop(),o=AI.get(n)}o&&e.i[e.g].push(new ow(o,e.m,e.j,e.o,e.l))}}function sw(e,t,n,o){if(!(n<0||t<0))if(t>=n)for(--o;o>=0;o--)e.i[t+o]=e.i[n+o].map(function(a){return a});else for(var u=0;u<o;u++)e.i[t+u]=e.i[n+u].map(function(a){return a})}function jr(e,t,n){for(var o=0;o<=n;o++)e.i[t+o]=[]}var uw=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),bI=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),kI=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),AI=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),lw=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function $c(e,t){this.h=0,this.o=new K0(e,t),this.i=new K0(e,t),this.g=this.j=new K0(e,t),this.l=0,this.m=null}function Y0(e,t,n){e.g=e.i;var o=e.g,u=null;return e.h!==3&&e.h!==4&&(u=jc(o,e.l,n),n=e.i,n.g=n.h>0?n.h:0,jr(n,0,15),n=e.j,n.g=n.h>0?n.h:0,jr(n,0,15),o.g=15),e.h=3,o.h=t,u}function aw(e){e.h=1,e.g=e.j,e.g.h=0}function fw(e){ai("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var EI="black green blue cyan red yellow magenta black".split(" "),cw="white green blue cyan red yellow magenta white_italics".split(" ");function q0(e,t){this.J=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.H=this.M=this.I=0,this.G=2,this.i=[],this.g=this.h=this.j=0,this.F=this.B=!1,this.C="white",this.u="black",J0(this)}function J0(e){e.i=[];for(var t=0;t<16;t++)e.i.push(Q0())}function Q0(){for(var e=[],t=0;t<42;t++)e.push(null);return e}function co(e,t){dw(e)&&(e.i[e.h][e.g]=new ow(t,e.F,e.B,e.u,e.C),e.g++)}function dw(e){var t=e.g<e.m&&e.g>=0;return e.h<e.o&&e.h>=0&&t}q0.prototype.isVisible=function(){return this.l};function II(e){for(var t=0,n=1;n<16;n++,t++)e.i[t]=e.i[n];for(n=0;n<1;n++,t++)e.i[t]=Q0()}function rs(e,t,n){var o=new Ut(e.j,t,"");o.textAlign=e.G===0?"left":e.G===1?"right":pr;var u=o.region;switch(e.J&&(u.id+="svc"+e.J),u.id+="win"+e.N,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.I,u.viewportAnchorY=e.M,u.viewportAnchorUnits=e.K?fi:2,e.H){case 0:u.regionAnchorX=0,u.regionAnchorY=0;break;case 1:u.regionAnchorX=50,u.regionAnchorY=0;break;case 2:u.regionAnchorX=100,u.regionAnchorY=0;break;case 3:u.regionAnchorX=0,u.regionAnchorY=50;break;case 4:u.regionAnchorX=50,u.regionAnchorY=50;break;case 5:u.regionAnchorX=100,u.regionAnchorY=50;break;case 6:u.regionAnchorX=0,u.regionAnchorY=100;break;case 7:u.regionAnchorX=50,u.regionAnchorY=100;break;case 8:u.regionAnchorX=100,u.regionAnchorY=100}return(n=iw(o,"svc"+n,e.i,e.j,t))&&(e.j=t),n}q0.prototype.display=function(){this.l=!0};function MI(){this.i=[],this.h=null,this.g=0}function RI(e,t){t.type===3?(e.g=(t.value&63)*2-1,e.h=[]):e.h&&(e.g>0&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Zl(e.h)),e.h=null,e.g=0))}function Zl(e){this.g=0,this.h=e}Zl.prototype.Ia=function(){return this.g<this.h.length},Zl.prototype.Pa=function(){return this.g};function gn(e){if(!e.Ia())throw new q(2,2,3e3);return e.h[e.g++]}Zl.prototype.skip=function(e){if(this.g+e>this.h.length)throw new q(2,2,3e3);this.g+=e},Zl.prototype.Ki=function(e){if(this.g-e<0)throw new q(2,2,3e3);this.g-=e};function _I(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function LI(e,t,n,o){if(!e.g)return[];if(n==24)return n=gn(t).value,o=gn(t).value,n=(function(a){return a.map(function(d){return("0"+(d&255).toString(16)).slice(-2)}).join("")})([n,o]),co(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var u=null;switch(n){case 8:!dw(t)||t.g<=0&&t.h<=0||(t.g<=0?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(u=rs(t,o,e.i)),t.h+1>=t.o?II(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(u=rs(t,o,e.i)),t.i[t.h]=Q0(),t.g=0;break;case 12:t.isVisible()&&(u=rs(t,o,e.i)),J0(t),t.h=0,t.g=0}return u?[u]:[]}function PI(e,t,n,o){if(n>=128&&n<=135)o=n&7,e.h[o]&&(e.g=e.h[o]);else{if(n===136){n=gn(t).value,t=[],n=R(ea(e,n));for(var u=n.next();!u.done;u=n.next()){if(u=e.h[u.value],u.isVisible()){var a=rs(u,o,e.i);a&&t.push(a)}J0(u)}return t}if(n===137)for(t=gn(t).value,t=R(ea(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=o),n.display();else{if(n===138){for(n=gn(t).value,t=null,n=R(ea(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=rs(u,o,e.i)),u.l=!1;return t?[t]:[]}if(n===139){for(n=gn(t).value,t=null,n=R(ea(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=rs(u,o,e.i):u.j=o,u.l=!u.l;return t?[t]:[]}if(n===140)return t=gn(t).value,hw(e,t,o);if(n===143)return o=hw(e,255,o),pw(e),o;if(n===144)t.skip(1),o=gn(t).value,e.g&&(e.g.B=(o&128)>0,e.g.F=(o&64)>0);else if(n===145)o=gn(t).value,n=gn(t).value,t.skip(1),e.g&&(t=gw((n&48)>>4,(n&12)>>2,n&3),e.g.C=gw((o&48)>>4,(o&12)>>2,o&3),e.g.u=t);else if(n===146)o=gn(t).value,t=gn(t).value,e.g&&(e=e.g,e.h=o&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),o=gn(t).value,t.skip(1),e.g&&(e.g.G=o&3);else if(n>=152&&n<=159){n=(n&15)-8,u=e.h[n]!==null,u||(a=new q0(n,e.i),a.j=o,e.h[n]=a),o=gn(t).value,a=gn(t).value;var d=gn(t).value,p=gn(t).value,g=gn(t).value;t=gn(t).value,u&&(t&7)===0||(t=e.h[n],t.h=0,t.g=0,t.F=!1,t.B=!1,t.C="white",t.u="black"),t=e.h[n],t.l=(o&32)>0,t.M=a&127,t.I=d,t.H=(p&240)>>4,t.K=(a&128)>0,t.o=(p&15)+1,t.m=(g&63)+1,e.g=e.h[n]}}}return[]}function ea(e,t){for(var n=[],o=0;o<8;o++)(t&1)===1&&e.h[o]&&n.push(o),t>>=1;return n}function hw(e,t,n){var o=[];t=R(ea(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var a=e.h[u];a.isVisible()&&(a=rs(a,n,e.i))&&o.push(a),e.h[u]=null}return o}function pw(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function gw(e,t,n){var o={0:0,1:0,2:1,3:1};return e=o[e],t=o[t],n=o[n],DI[e<<2|t<<1|n]}var mw=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),DI="black blue green cyan red magenta yellow white".split(" ");function lu(){this.h=[],this.g=[],this.i=new MI,this.l=0,this.m=new Map([["CC1",new $c(0,0)],["CC2",new $c(0,1)],["CC3",new $c(1,0)],["CC4",new $c(1,1)]]),this.u=this.o=0,this.j=new Map,this.C=!0,this.B=new Set,Z0(this)}lu.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,Z0(this),e=R(this.j.values());for(var t=e.next();!t.done;t=e.next())pw(t.value)};function Z0(e){e.o=0,e.u=0;for(var t=R(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Ql(n.i),Ql(n.j),Ql(n.o);e.C=!0}lu.prototype.extract=function(e,t){if(this.C){for(var n=R(this.m.values()),o=n.next();!o.done;o=n.next())o.value.l=t;this.C=!1}if(e=new Bt(e,0),!(e.getLength()<8)&&e.Y()===181&&e.Ba()===49&&e.U()===1195456820&&e.Y()===3&&(n=e.Y(),(n&64)!==0))for(n&=31,e.skip(1),o=0;o<n;o++){var u=e.Y(),a=(u&4)>>2,d=e.Y(),p=e.Y();a&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,Db:d,hc:p,order:this.h.length}):(this.g.push({pts:t,type:u,value:d,order:this.g.length}),this.g.push({pts:t,type:2,value:p,order:this.g.length})))}},lu.prototype.decode=function(){function e(u,a){return u.pts-a.pts||u.order-a.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=R(this.h),o=n.next();!o.done;o=n.next())(o=OI(this,o.value))&&t.push(o);for(n=R(this.g),o=n.next();!o.done;o=n.next())RI(this.i,o.value);for(n=R(this.i.i),o=n.next();!o.done;o=n.next())o=NI(this,o.value),t.push.apply(t,le(o));return this.i.i=[],this.h=[],this.g=[],t};function OI(e,t){var n=t.type;if((t.Db&112)===16){var o=t.Db>>3&1;n===0?e.o=o:e.u=o}if(o="CC"+((n<<1|(n?e.u:e.o))+1),n=e.m.get(o),t.Db===255&&t.hc===255||!t.Db&&!t.hc||!yw(t.Db)||!yw(t.hc))return++e.l>=45&&Z0(e),null;e.l=0,t.Db&=127,t.hc&=127;var u=t.Db;if(u>=1&&u<=15||!t.Db&&!t.hc)return null;if(u=null,(t.Db&112)===16)e:{if(e.B.add(o),o=t.Db,e=t.hc,n.m===(o<<8|e))n.m=null;else if(n.m=o<<8|e,(o&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(o&7)<<1|e>>5&1],o="white",u=!1;var a=null,d=e>95?e-96:e-64;d<=13?o=cw[Math.floor(d/2)]:d<=15?u=!0:a=Math.floor((d-16)/2),e=(e&1)===1,n.h!==4&&(d=n.g,n.h===3&&t!==d.g&&(n=1+t-d.h,sw(d,n,1+d.g-d.h,d.h),jr(d,0,n-1),jr(d,t+1,15-t)),d.g=t,d.m=e,d.j=u,d.l=o,d.u=a,d.o="black")}else if((o&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",uu(n.g,0,32),o=!1,t=cw[(e&14)>>1],t==="white_italics"&&(t="white",o=!0),n.g.m=(e&1)===1,n.g.j=o,n.g.l=t;else if((o&247)===16&&(e&240)===32||(o&247)===23&&(e&255)===45)t="black",(o&7)===0&&(t=EI[(e&14)>>1]),n.g.o=t;else if((o&247)===17&&(e&240)===48)uu(n.g,1,e);else if((o&246)===18&&(e&224)===32)uu(n.g,o&1?3:2,e);else{if((o&246)===20&&(e&240)===32){switch(e=t.pts,o=null,t.hc){case 32:aw(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:o=Y0(n,2,e);break;case 38:o=Y0(n,3,e);break;case 39:o=Y0(n,4,e);break;case 40:uu(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Ql(n.o),fw(n);break;case 43:fw(n);break;case 44:t=n.i,o=null,n.h!==4&&(o=jc(t,n.l,e)),jr(t,0,15);break;case 45:t=n.g,n.h!==3?o=null:(o=jc(t,n.l,e),u=t.g-t.h+1,sw(t,u-1,u,t.h),jr(t,0,u-1),jr(t,t.g,15-t.g),n.l=e);break;case 46:jr(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=jc(n.i,n.l,e)),o=n.j,n.j=n.i,n.i=o,aw(n),n.l=e,o=t}u=o;break e}(o==23||o==31)&&e>=33&&e<=35&&(n.g.B=e-32)}u=null}else e=t.hc,uu(n.g,0,t.Db),uu(n.g,0,e);return u}function NI(e,t){var n=[];try{for(;t.Ia();){var o=gn(t).value,u=(o&224)>>5,a=o&31;if(u===7&&a!=0&&(u=gn(t).value&63),u!=0){e.B.add("svc"+u),e.j.has(u)||e.j.set(u,new _I(u));for(var d=e.j.get(u),p=t.Pa();t.Pa()-p<a;){u=d;var g=t,y=gn(g),w=y.value,T=y.pts;if(w===16){var M=gn(g);w=w<<16|M.value}if(w>=0&&w<=31)var L=LI(u,g,w,T);else if(w>=128&&w<=159)L=PI(u,g,w,T);else{if(w>=4096&&w<=4127)u=g,g=w&255,g>=8&&g<=15?u.skip(1):g>=16&&g<=23?u.skip(2):g>=24&&g<=31&&u.skip(3);else if(w>=4224&&w<=4255)u=g,g=w&255,g>=128&&g<=135?u.skip(4):g>=136&&g<=143&&u.skip(5);else if(w>=32&&w<=127)g=w,u.g&&(g===127?co(u.g,"♪"):co(u.g,String.fromCharCode(g)));else if(w>=160&&w<=255)u.g&&co(u.g,String.fromCharCode(w));else if(w>=4128&&w<=4223){if(g=w&255,u.g)if(mw.has(g)){var P=mw.get(g);co(u.g,P)}else co(u.g,"_")}else w>=4256&&w<=4351&&u.g&&((w&255)!=160?co(u.g,"_"):co(u.g,"[CC]"));L=[]}n.push.apply(n,le(L))}}}}catch(N){if(N instanceof q&&N.code===3e3)ai("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw N}return n}function yw(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}lu.prototype.getStreams=function(){return Array.from(this.B)},be("shaka.cea.CeaDecoder",lu),Do=function(){return new lu};function vw(e){for(var t=[],n=e,o=e=0;o<n.length;)e==2&&n[o]==3?(e=0,n=[].concat(le(n)),n.splice(o,1),n=new Uint8Array(n)):n[o]==0?e++:e=0,o++;for(e=n,o=0;o<e.length;){for(n=0;e[o]==255;)n+=255,o++;n+=e[o++];for(var u=0;e[o]==255;)u+=255,o++;u+=e[o++],n==4&&t.push(e.subarray(o,o+u)),o+=u}return t}function zc(){this.j=new Map,this.i=this.h=0,this.g=eg}zc.prototype.init=function(e){function t(a){a=a.name,Vc.has(a)&&(n.g=Vc.get(a))}var n=this,o=[],u=[];if(new Lt().box("moov",ot).box("mvex",ot).T("trex",function(a){var d=a.reader;d.skip(4),d.skip(4),a=d.U(),d=d.U(),n.h=a,n.i=d}).box("trak",ot).T("tkhd",function(a){var d=a.reader;a=a.version,a==1?(d.skip(8),d.skip(8)):(d.skip(4),d.skip(4));var p=d.U();a==1?d.skip(8):d.skip(4),d.skip(4),d.skip(8),d.skip(2),d.skip(2),d.skip(2),d.skip(2),d.skip(36),d.Ba(),d.Ba(),d.Ba(),d.Ba(),o.push(p)}).box("mdia",ot).T("mdhd",function(a){a=Ff(a.reader,a.version),u.push(a.timescale)}).box("minf",ot).box("stbl",ot).T("stsd",_r).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",di).box("sinf",ot).box("frma",function(a){a=Tp(a.reader).codec,Vc.has(a)&&(n.g=Vc.get(a))}).parse(e,!0,!0),!o.length||!u.length||o.length!=u.length)throw new q(2,2,2010);this.g==eg&&st("Unable to determine bitstream format for CEA parsing!"),o.forEach(function(a,d){n.j.set(a,u[d])})},zc.prototype.parse=function(e){var t=this;if(this.g==eg)return[];var n=[],o=0,u=[];return new Lt().box("moof",function(a){o=a.start,u=[],ot(a)}).box("traf",function(a){u.push({baseMediaDecodeTime:null,Rd:t.h,Sd:t.i,Bi:[],timescale:9e4}),ot(a)}).T("trun",function(a){var d=u[u.length-1];a=jf(a.reader,a.version,a.flags),d.Bi.push(a)}).T("tfhd",function(a){var d=u[u.length-1];a=Uf(a.reader,a.flags),d.Rd=a.Rd||t.h,d.Sd=a.Sd||t.i,a=a.trackId,t.j.has(a)&&(d.timescale=t.j.get(a))}).T("tfdt",function(a){var d=u[u.length-1];a=Bf(a.reader,a.version),d.baseMediaDecodeTime=a.baseMediaDecodeTime}).box("mdat",function(a){for(var d=o-a.start-8,p=a.reader.Pa(),g=R(u),y=g.next();!y.done;y=g.next())y=y.value,y.baseMediaDecodeTime===null?st("Unable to find base media decode time for CEA captions!"):(a.reader.seek(p),UI(t,a.reader,y.baseMediaDecodeTime,y.timescale,y.Rd,y.Sd,d,y.Bi,n))}).parse(e,!1,!0),n};function UI(e,t,n,o,u,a,d,p,g){var y=0,w=a,T=p.map(function(P){return P.ih});for(T=[].concat.apply([],le(T)),T.length&&(w=T[0].sampleSize||a),t.skip(d+p[0].mg);t.Ia();){d=t.U();var M=t.Y(),L=null;switch(L=!1,p=1,e.g){case ta:L=M&31,L=L==6;break;case na:p=2,t.skip(1),L=M>>1&63,L=L==39||L==40;break;case ia:p=2,t.skip(1),L=M>>1&63,L=L==23||L==24;break;default:return}if(L)for(M=0,y<T.length&&(M=T[y].Cf||0),M=(n+M)/o,p=R(vw(t.Tb(d-p))),L=p.next();!L.done;L=p.next())g.push({packet:L.value,pts:M});else try{t.skip(d-p)}catch{break}w-=d+4,w==0&&(n=y<T.length?n+(T[y].jh||u):n+u,y++,y<T.length?w=T[y].sampleSize||a:w=a)}}be("shaka.cea.Mp4CeaParser",zc);var eg=0,ta=1,na=2,ia=3,Vc=new Map().set("avc1",ta).set("avc3",ta).set("dvav",ta).set("dva1",ta).set("hev1",na).set("hvc1",na).set("dvh1",na).set("dvhe",na).set("vvc1",ia).set("vvi1",ia).set("dvc1",ia).set("dvi1",ia);Kh("video/mp4",function(){return new zc});function Hc(){this.g=null}Hc.prototype.init=function(){},Hc.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Nt;var t=[];if(e=et(e),!Xs(e))return t;e=this.g.parse(e);var n=e.Td(),o=e.Ze();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=R(o),o=n.next();!o.done;o=n.next())if(o=o.value,e.includes(o.type)&&o.time!=null)for(var u=R(vw(o.data)),a=u.next();!a.done;a=u.next())t.push({packet:a.value,pts:o.time});return t},be("shaka.cea.TsCeaParser",Hc),Kh("video/mp2t",function(){return new Hc});function BI(e){var t=0,n=Zn(e),o=n.getUint32(t,!0);if(o!=e.byteLength)return[];e:{for(e=t+4+2,t=[];e<n.byteLength-1;){o=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,(u&1)!=0||u+e>n.byteLength){n=[];break e}var a=et(n,e,u);t.push({type:o,value:a}),e+=u}n=t}return n}function xw(e){return e=Li(nn(e)),e=BI(e).filter(function(t){return t.type===FI})[0],e?(e=qr(e.value,!0),(e=Bo(e,"WRMHEADER"))?e:null):null}function Gc(e){try{var t=xw(e);if(t)e:{for(var n=R(ir(t,"DATA")),o=n.next();!o.done;o=n.next()){var u=o.value;if(u.children)for(var a=R(u.children),d=a.next();!d.done;d=a.next()){var p=d.value;if(p.tagName=="LA_URL"){var g=nn(p);break e}}}g=""}else g="";return g}catch{return""}}var FI=1;function ww(){this.g=new Map}ww.prototype.release=function(){this.g.clear()};function Sw(e,t,n,o){var u=zI(e,t),a=null;e=[];var d=[];t=null;var p=new Set(u.map(function(y){return y.keyId}));p.delete(null);var g="cenc";if(p.size>1)throw new q(2,4,4010);if(!n){if(d=u.filter(function(y){return y.Gd=="urn:mpeg:dash:sea:2012"}),d.length>1)throw new q(2,4,4050);d.length&&(t=HI(d[0])),(d=u.find(function(y){return y.Gd=="urn:mpeg:dash:mp4protection:2011"}))&&d.encryptionScheme&&(g=d.encryptionScheme),d=u.filter(function(y){return y.Gd=="urn:mpeg:dash:mp4protection:2011"?(a=y.init||a,!1):y.Gd!="urn:mpeg:dash:sea:2012"}),d.length&&(e=$I(a,g,d,o,p),e.length==0&&(e=[Cr("",g,a)]))}if(u.length&&!t&&(n||!d.length))for(e=[],n=R(Object.values(o)),o=n.next();!o.done;o=n.next())o=o.value,o!="org.w3.clearkey"&&e.push(Cr(o,g,a));if(p=Array.from(p)[0]||null)for(g=R(e),n=g.next();!n.done;n=g.next())for(n=R(n.value.initData),o=n.next();!o.done;o=n.next())o.value.keyId=p;return{Th:p,Fm:a,drmInfos:e,dg:t,Yh:!0}}function jI(e,t,n,o,u){var a=Sw(e,t,o,u);if(n.Yh)e=n.drmInfos.length==1&&!n.drmInfos[0].keySystem,t=a.drmInfos.length==0,(n.drmInfos.length==0||e&&!t)&&(n.drmInfos=a.drmInfos),n.Yh=!1;else if(a.drmInfos.length>0&&(n.drmInfos=n.drmInfos.filter(function(d){return a.drmInfos.some(function(p){return p.keySystem==d.keySystem})}),n.drmInfos.length==0))throw new q(2,4,4008);return a.Th||n.Th}function Xc(e){var t=Pi(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=nn(t)))return t;if((t=Pi(e.node,"urn:microsoft:playready","pro"))&&nn(t))return Gc(t);if((e=Pi(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=nn(e))){t=Li(e),e=8,t=Zn(t);var n=t.getUint8(e);return e+=20,n>0&&(e+=4+16*t.getUint32(e)),e=et(t,e+4),e=sf(e),e=Bo("<pro>"+e+"</pro>"),Gc(e)}return""}function $I(e,t,n,o,u){var a=[];n=R(n);for(var d=n.next();!d.done;d=n.next()){d=d.value;var p=o[d.Gd];if(p){var g;if((g=Pi(d.node,"urn:microsoft:playready","pro"))&&nn(g)){g=nn(g),g=Li(g);var y=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);g=[{initData:Of(g,y,new Set,0),initDataType:"cenc",keyId:d.keyId}]}else g=null;if(y=null,d.Gd==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){y=d;var w=u;if(w.size==0)y=null;else{var T=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),M=new Uint8Array([]);y=[{initData:Of(M,T,w,1),initDataType:"cenc",keyId:y.keyId}]}}g=Cr(p,t,d.init||e||g||y),(p=GI.get(p))&&(g.licenseServerUri=p(d));e:{if((d=Pi(d.node,"https://dashif.org/CPS","Certurl"))&&(d=nn(d)))break e;d=""}g.serverCertificateUri=d,a.push(g)}}return a}function zI(e,t){var n=[];t=R(t);for(var o=t.next();!o.done;o=t.next())(o=VI(e,o.value))&&n.push(o);return n}function VI(e,t){var n=t.attributes.schemeIdUri,o=br(t,"urn:mpeg:cenc:2013","default_KID"),u=qy(t,"urn:mpeg:cenc:2013","pssh").map(Kn),a=t.attributes.value;if(!n)return null;if(n=n.toLowerCase(),o&&(o=o.replace(/-/g,"").toLowerCase(),o.includes(" ")))throw new q(2,4,4009);var d=[];try{d=u.map(function(p){if(!e.g.has(p)){var g=Li(p);e.g.set(p,g)}return{initDataType:"cenc",initData:e.g.get(p),keyId:null}})}catch{throw new q(2,4,4007)}return{node:t,Gd:n,keyId:o,init:d.length>0?d:null,encryptionScheme:a}}function HI(e){if(!f.crypto||!f.crypto.subtle)throw st("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new q(2,4,4042);var t=Pi(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new q(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new q(2,4,4051);if(t=Pi(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new q(2,4,4051);if(e=t.attributes.IV,t=Wn(t.attributes.keyUriTemplate),!e||!t)throw new q(2,4,4051);if(e=Po(e.substr(2)),e.byteLength!=16)throw new q(2,4,4048);return{tk:t,iv:e}}var GI=new Map().set("com.apple.fps",function(e){if(f.shakaMediaKeysPolyfill==="apple")throw new q(2,4,4054);return(e=Pi(e.node,"https://dashif.org/CPS","Laurl"))&&(e=nn(e))?e:""}).set("com.widevine.alpha",function(e){var t=Pi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=nn(t))?t:(e=Pi(e.node,"urn:microsoft","laurl"))&&Wn(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Xc).set("com.microsoft.playready.recommendation",Xc).set("com.microsoft.playready.software",Xc).set("com.microsoft.playready.hardware",Xc).set("org.w3.clearkey",function(e){var t=Pi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=nn(t))?t:(e=Pi(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=nn(e))?e:""});function ra(e,t,n,o,u,a){var d=new Map().set("RepresentationID",t).set("Number",n).set("SubNumber",o).set("Bandwidth",u).set("Time",a);return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(p,g,y,w){if(p=="$$")return"$";var T=d.get(g);if(T==null)return p;switch(g=="RepresentationID"&&y&&(y=void 0),g=="Time"&&typeof T!="bigint"&&(Math.abs(T-Math.round(T))>=.2&&st("Calculated $Time$ values must be close to integers"),T=Math.round(T)),w){case void 0:case"d":case"i":case"u":p=T.toString();break;case"o":p=T.toString(8);break;case"x":p=T.toString(16);break;case"X":p=T.toString(16).toUpperCase();break;default:p=T.toString()}return y=f.parseInt(y,10)||1,Array(Math.max(0,y-p.length)+1).join("0")+p})}function Tw(e,t){var n=Qi(e,t,"timescale"),o=1;n&&(o=hr(n)||1),n=Qi(e,t,"duration");var u=(n=hr(n||""))?n/o:null,a=Qi(e,t,"startNumber"),d=Number(Qi(e,t,"presentationTimeOffset"))||0,p=kn(a||"");if((a==null||p==null)&&(p=1),a=null,t=au(e,t,"SegmentTimeline")){t=bt(t,"S"),a=o,e=e.na.duration||1/0;for(var g=p,y=[],w=-d,T=0;T<t.length;++T){var M=t[T],L=t[T+1],P=Qe(M,"t",kn),N=Qe(M,"d",kn),O=Qe(M,"r",bn);if(M=Qe(M,"k",bn)||0,P!=null&&(P-=d),N){if(P=P??w,O=O||0,O<0)if(L){if(L=Qe(L,"t",kn),L==null)break;if(P>=L)break;O=Math.ceil((L-P)/N)-1}else{if(e==1/0)break;if(P/a>=e)break;O=Math.ceil((e*a-P)/N)-1}for(y.length>0&&P!=w&&(y[y.length-1].end=P/a),L=0;L<=O;++L)w=P+N,y.push({start:P/a,end:w/a,Fh:P,vc:M,Tk:y.length+g}),P=w}}a=y}return{timescale:o,Mf:n,fb:u,oe:p,Jb:d/o||0,gd:d,timeline:a}}function Cw(e,t){return[t(e.L),t(e.qa),t(e.sa)].filter(no)}function Qi(e,t,n){t=Cw(e,t),e=null,t=R(t);for(var o=t.next();!o.done&&!(e=o.value.attributes[n]);o=t.next());return e}function au(e,t,n){t=Cw(e,t),e=null,t=R(t);for(var o=t.next();!o.done&&!(e=Ft(o.value,n));o=t.next());return e}function XI(e,t,n,o,u,a){for(var d=br(e,"http://www.w3.org/1999/xlink","href"),p=br(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",g=R(Object.keys(e.attributes)),y=g.next();!y.done;y=g.next()){y=y.value;var w=y.split(":"),T=qh("http://www.w3.org/1999/xlink");w[0]==T&&delete e.attributes[y]}if(a>=5)return io(new q(2,4,4028));if(p!="onLoad")return io(new q(2,4,4027));var M=wn([o],[d]);return u.request(0,un(M,t)).Xa(function(L){if(L=rl(L.data,e.tagName),!L)return io(new q(2,4,4001,d));for(e.children=[];L.children.length;){var P=L.children.shift();e.children.push(P)}P=R(Object.keys(L.attributes));for(var N=P.next();!N.done;N=P.next())N=N.value,e.attributes[N]=L.attributes[N];return Wc(e,t,n,M[0],u,a+1)})}function Wc(e,t,n,o,u,a){if(a=a===void 0?0:a,br(e,"http://www.w3.org/1999/xlink","href")){var d=XI(e,t,n,o,u,a);return n&&(d=d.Xa(void 0,function(){return Wc(e,t,n,o,u,a)})),d}d=[];for(var p=R(Yy(e)),g=p.next(),y={};!g.done;y={Od:void 0},g=p.next())y.Od=g.value,br(y.Od,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter((function(w){return function(T){return T!==w.Od}})(y)):y.Od.tagName!="SegmentTimeline"&&d.push(Wc(y.Od,t,n,o,u,a));return L1(d).Xa(function(){return e})}function WI(e,t,n,o,u,a,d){var p,g=new Lt().T("sidx",function(y){p=KI(t,o,u,a,d,n,y)});if(e&&g.parse(e),p)return p;throw new q(2,3,3004)}function KI(e,t,n,o,u,a,d){var p=[];d.reader.skip(4);var g=d.reader.U();if(g==0)throw new q(2,3,3005);if(d.version==0)var y=d.reader.U(),w=d.reader.U();else y=d.reader.Dd(),w=d.reader.Dd();d.reader.skip(2);var T=d.reader.Ba();for(e=e+d.size+w,w=0;w<T;w++){var M=d.reader.U(),L=(M&2147483648)>>>31;M&=2147483647;var P=d.reader.U();if(d.reader.skip(4),L==1)throw new q(2,3,3006);p.push(new Ve(y/g+n,(y+P)/g+n,function(){return a},e,e+M-1,t,n,o,u)),y+=P,e+=M}return d.parser.stop(),p}function ho(e){this.h=Zn(e),this.g=new Bt(this.h,0)}ho.prototype.Ia=function(){return this.g.Ia()};function $r(e){var t=bw(e);if(t.length>7)throw new q(2,3,3002);var n=0;t=R(t);for(var o=t.next();!o.done;o=t.next())n=256*n+o.value;t=bw(e);e:{o=R(YI);for(var u=o.next();!u.done;u=o.next())if(wr(t,new Uint8Array(u.value))){o=!0;break e}o=!1}if(o)t=e.h.byteLength-e.g.Pa();else{if(t.length==8&&t[1]&224)throw new q(2,3,3001);for(u=o=0;u<t.length;u++){var a=t[u];o=u==0?a&(1<<8-t.length)-1:256*o+a}t=o}return t=e.g.Pa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Pa(),o=Zn(e.h,e.g.Pa(),t),e.g.skip(t),new qI(n,o)}function bw(e){var t=e.g.Pa(),n=e.g.Y();if(n==0)throw new q(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),et(e.h,t,n)}var YI=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function qI(e,t){this.id=e,this.g=t}function tg(e){if(e.g.byteLength>8)throw new q(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new q(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var o=e.g.getUint8(n);t=256*t+o}return t}function JI(e,t,n,o,u,a,d,p,g){function y(){return u}var w=[];e=new ho(e.g);for(var T=null,M=null;e.Ia();){var L=$r(e);if(L.id==187){var P=QI(L);P&&(L=n*P.kl,P=t+P.Lk,T!=null&&w.push(new Ve(T+d,L+d,y,M,P-1,a,d,p,g)),T=L,M=P)}}return T!=null&&w.push(new Ve(T+d,o+d,y,M,null,a,d,p,g)),w}function QI(e){var t=new ho(e.g);if(e=$r(t),e.id!=179)throw new q(2,3,3013);if(e=tg(e),t=$r(t),t.id!=183)throw new q(2,3,3012);t=new ho(t.g);for(var n=0;t.Ia();){var o=$r(t);if(o.id==241){n=tg(o);break}}return{kl:e,Lk:n}}function kw(e,t,n){if(t=au(e,t,"Initialization"),!t)return null;var o=e.L.cb(),u=t.attributes.sourceURL;u&&(o=wn(o,[Wn(u)],e.Mb())),u=0;var a=null;return(t=Qe(t,"range",cf))&&(u=t.start,a=t.end),n=new ni(function(){return o},u,a,Mw(e),null,null,n,e.qa.encrypted),n.codecs=e.L.codecs,n.mimeType=e.L.mimeType,e.na&&!e.na.df&&(n.g=e.na.start+e.na.duration),n}function ZI(e,t,n){var o=Number(Qi(e,fu,"presentationTimeOffset"))||0,u=Qi(e,fu,"timescale"),a=1;u&&(a=hr(u)||1);var d=o/a||0,p=kw(e,fu,n);e5(e,p);var g=Jr(e);return{endTime:-1,timeline:-1,Sc:function(){var y=au(g,fu,"RepresentationIndex"),w=g.L.cb();return y&&(y=Wn(y.attributes.sourceURL))&&(w=wn(w,[y],g.Mb())),y=Ew(g),Aw(g,t,p,w,y.start,y.end,d)},timescale:a}}function Aw(e,t,n,o,u,a,d){var p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q;return $(function(ee){if(ee.g==1)return p=e.presentationTimeline,g=!e.Fb||!e.na.df,y=e.na.start,w=e.na.duration,T=e.L.mimeType.split("/")[1],M=t,L=null,P=[M(o,u,a,!1),T=="webm"?M(n.P(),n.startByte,n.endByte,!0):null],M=null,D(ee,Promise.all(P),2);if(N=ee.h,O=N[0],F=N[1]||null,B=null,V=y-d,Y=y,J=w?y+w:1/0,T=="mp4")var se=WI(O,u,o,n,V,Y,J);else{se=O;var fe=new ho(F);if($r(fe).id!=440786851)throw new q(2,3,3008);var ne=$r(fe);if(ne.id!=408125543)throw new q(2,3,3009);fe=ne.g.byteOffset,ne=new ho(ne.g);for(var xe=null;ne.Ia();){var ye=$r(ne);if(ye.id==357149030){xe=ye;break}}if(!xe)throw new q(2,3,3010);for(xe=new ho(xe.g),ye=1e6,ne=null;xe.Ia();){var ae=$r(xe);if(ae.id==2807729)ye=tg(ae);else if(ae.id==17545)if(ae.g.byteLength==4)ne=ae.g.getFloat32(0);else if(ae.g.byteLength==8)ne=ae.g.getFloat64(0);else throw new q(2,3,3003)}if(ne==null)throw new q(2,3,3011);if(xe=ye/1e9,ne*=xe,se=$r(new ho(se)),se.id!=475249515)throw new q(2,3,3007);se=JI(se,fe,xe,ne,o,n,V,Y,J)}for(B=se,H=R(B),z=H.next();!z.done;z=H.next())Q=z.value,Q.codecs=e.L.codecs,Q.mimeType=e.L.mimeType,Q.bandwidth=e.bandwidth;return p.ge(B),L=new vt(B),g&&L.pd(Y,J,!0),ee.return(L)})}function fu(e){return e.Hd}function Ew(e){var t=au(e,fu,"RepresentationIndex");return e=Qi(e,fu,"indexRange"),e=cf(e||""),t&&(e=Qe(t,"range",cf,e)),e}function e5(e,t){if(Iw(e,t),!Ew(e))throw new q(2,4,4002)}function Iw(e,t){var n=e.L.mimeType.split("/")[1];if(e.L.contentType!=lt&&n!="mp4"&&n!="webm")throw new q(2,4,4006);if(n=="webm"&&!t)throw new q(2,4,4005)}function Mw(e){var t=e.L;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.tf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.qa.label||null,roles:e.roles||null,language:e.qa.language||null}}function t5(e,t,n){var o=kw(e,Rw,n),u=n5(e);if(!u.fb&&!u.timeline&&u.yd.length>1)throw new q(2,4,4002);if(!u.fb&&!e.na.duration&&!u.timeline&&u.yd.length==1)throw new q(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new q(2,4,4002);var a=null,d=null;e.sa.id&&e.L.id&&(d=t.get(e.sa.id+","+e.L.id))&&(a=d.segmentIndex);var p=i5(e.na.start,e.na.duration,e.L.cb,u,o,n,e.L.mimeType,e.L.codecs,e.bandwidth,e.Mb);return t=!a,a?a.ee(p,e.presentationTimeline.Ib()):a=new vt(p),e.presentationTimeline.ge(p),e.Fb&&e.na.df||a.pd(e.na.start,e.na.duration?e.na.start+e.na.duration:1/0,t),d&&(d.segmentIndex=a),{endTime:-1,timeline:-1,Sc:function(){return a&&a.getNumReferences()!=0||a.mf(p),Promise.resolve(a)},timescale:u.timescale}}function Rw(e){return e.zc}function n5(e){var t=r5(e);e=Tw(e,Rw);var n=e.oe;n==0&&(n=1);var o=0;return e.fb?o=e.fb*(n-1):e.timeline&&e.timeline.length>0&&(o=e.timeline[0].start),{fb:e.fb,startTime:o,oe:n,Jb:e.Jb,timescale:e.timescale,timeline:e.timeline,yd:t}}function i5(e,t,n,o,u,a,d,p,g,y){var w=o.yd.length;o.timeline&&o.timeline.length!=o.yd.length&&(w=Math.min(o.timeline.length,o.yd.length));for(var T=e-o.Jb,M=t?e+t:1/0,L=[],P=o.startTime,N={},O=0;O<w;N={Of:void 0,Df:void 0},O++){N.Df=o.yd[O];var F=P;P=void 0,P=o.fb!=null?F+o.fb:o.timeline?o.timeline[O].end:F+t,N.Of=null,N=new Ve(e+F,e+P,(function(B){return function(){return B.Of==null&&(B.Of=wn(n(),[B.Df.Ak],y())),B.Of}})(N),N.Df.start,N.Df.end,u,T,e,M,[],"",null,null,Lr,a),N.codecs=p,N.mimeType=d,N.bandwidth=g,L.push(N)}return L}function r5(e){return[e.L.zc,e.qa.zc,e.sa.zc].filter(no).map(function(t){return bt(t,"SegmentURL")}).reduce(function(t,n){return t.length>0?t:n}).map(function(t){t.attributes.indexRange&&!e.Lg&&(e.Lg=!0);var n=Wn(t.attributes.media);return t=Qe(t,"mediaRange",cf,{start:0,end:null}),{Ak:n,start:t.start,end:t.end}})}function _w(e,t,n,o,u,a,d,p,g,y){g||e.L.bf||(e.L.bf=Qi(e,po,"initialization"));var w=e.L.bf?l5(e,d):null,T=o5(e);s5(T);var M=Jr(e);if(T.$d)return Iw(e,w),{endTime:-1,timeline:-1,Sc:function(){var F=ra(T.$d,M.L.originalId,null,null,M.bandwidth||null,null);return F=wn(M.L.cb(),[F]),Aw(M,t,w,F,0,null,T.Jb)},timescale:T.timescale};if(T.fb)return o||e.qa.contentType==="image"||e.qa.contentType==="text"||(o=e.na.start,y=e.sa.id,n=e.na.duration,y=(y=y!=null&&a.get(y)||n)?o+y:1/0,e.presentationTimeline.Tg(T.fb),e.presentationTimeline.zi(o,y)),{endTime:-1,timeline:-1,Sc:function(){return u5(M,T,u,w,a,d,p,e.L.Ef)},timescale:T.timescale};var L=null;o=o=null,e.sa.id&&e.L.id&&(o=e.sa.id+","+e.L.id,o=n.get(o))&&(L=o.segmentIndex);var P=e.na.start,N=e.na.duration?P+e.na.duration:1/0;if(L)y=L,Lw(y,T,P,N,w,e.Fb),y.Ya(e.presentationTimeline.Ib());else{if(n=0,g=-1,e.sa.id!=null&&e.L.id!=null){var O=y.get(e.sa.id);if(O)g=O.timeline;else for(y=R(y.values()),O=y.next();!O.done;O=y.next())if(O=O.value,Math.abs(T.Jb-O.endTime)<=$y&&O.dh.includes(e.L.id)){g=O.timeline;break}else O.timeline>=n&&(n=O.timeline+1)}g==-1&&(g=n),L=new oa(e.Fb,T,e.L.originalId,e.bandwidth,e.L.cb,e.Mb,P,N,w,d,e.L.Ef,g)}return T.timeline&&e.qa.contentType!=="image"&&e.qa.contentType!=="text"&&e.presentationTimeline.Ai(L.h?L.h.timeline:[],P),o&&e.Fb&&(o.segmentIndex=L),o=(o=(o=T.timeline)&&o[o.length-1])?o.end+T.Jb:-1,y=-1,L instanceof oa&&(y=L.Se()),{endTime:o,timeline:y,Sc:function(){return L instanceof oa&&L.getNumReferences()==0&&Lw(L,T,P,N,w,e.Fb),Promise.resolve(L)},timescale:T.timescale}}function po(e){return e.Nc}function o5(e){var t=Tw(e,po),n=Qi(e,po,"media"),o=Qi(e,po,"index"),u=Qi(e,po,"k"),a=0;return u&&(a=parseInt(u,10)),{Mf:t.Mf,fb:t.fb,timescale:t.timescale,oe:t.oe,Jb:t.Jb,gd:t.gd,timeline:t.timeline,$b:n&&Wn(n),$d:o,mimeType:e.L.mimeType,codecs:e.L.codecs,bandwidth:e.bandwidth,Bk:a}}function s5(e){var t=e.$d?1:0;if(t+=e.timeline?1:0,t+=e.fb?1:0,t==0)throw new q(2,4,4002);if(t!=1&&(e.$d&&(e.timeline=null),e.Mf=null,e.fb=null),!e.$d&&!e.$b)throw new q(2,4,4002)}function u5(e,t,n,o,u,a,d,p){function g(ne){var xe=ne-O,ye=xe*N,ae=t.Mf,he=xe*ae;"BigInt"in f&&he>Number.MAX_SAFE_INTEGER&&(he=BigInt(xe)*BigInt(ae)),ye+=M,xe=ye+N,ae=Math.min(xe,w());var Te=[],ke=t.Bk;if(ke)for(var Ke=(ae-ye)/ke,Re={},pt=0;pt<ke;Re={Wi:void 0},pt++){var ht=ye+Ke*pt,At=ht+Ke;Re.Wi=pt,Re=new Ve(ht,At,(function(ut){return function(){var tt=ra(F,V,ne,ut.Wi,B,he);return wn(Y(),[tt],J())}})(Re),0,null,o,H,M,w(),[],"",null,null,Lr,a),Re.codecs=e.L.codecs,Re.mimeType=e.L.mimeType,p==0?pt>0&&Re.wd():pt%p!=0&&Re.wd(),Te.push(Re)}return ye=new Ve(ye,ae,function(){if(ke)return[];var ut=ra(F,V,ne,null,B,he);return wn(Y(),[ut],J())},0,null,o,H,M,w(),Te,"",null,null,Lr,a,Te.length>0),ye.codecs=e.L.codecs,ye.mimeType=e.L.mimeType,ye.bandwidth=e.bandwidth,ye.j=xe,ye}function y(){var ne=[Math.max(T.Ib(),M),Math.min(T.Ic(),w())].map(function(xe){return xe-M});return ne=[Math.ceil(ne[0]/N),Math.ceil(ne[1]/N)-1],e.L.ub&&ne[1]++,ne.map(function(xe){return xe+O})}function w(){var ne=L!=null&&u.get(L)||P;return ne?M+ne:1/0}var T=e.presentationTimeline,M=e.na.start,L=e.sa.id,P=e.na.duration,N=t.fb,O=t.oe,F=t.$b,B=e.bandwidth||null,V=e.L.originalId,Y=e.L.cb,J=e.Mb,H=M-t.Jb,z=y();n=e.Fb?Math.max(z[0],z[1]-n+1):z[0],d=d||z[1],z=[];for(var Q=n;Q<=d;++Q){var ee=g(Q);z.push(ee)}var se=new vt(z);if(z=T.Ic()<w(),Q=T.W(),z||Q){var fe=Math.max(n,d+1);n=N,e.L.ub&&(n=.1),se.Nf(n,function(){var ne=T.Ib();se.Ya(ne);var xe=R(y());xe.next(),xe=xe.next().value;for(var ye=[];fe<=xe;){var ae=g(fe);ye.push(ae),fe++}return ne>w()&&!ye.length?null:ye})}return Promise.resolve(se)}function l5(e,t){var n=e.L.bf;if(n||(n=Qi(e,po,"initialization")),!n)return null;n=Wn(n);var o=e.L.originalId,u=e.bandwidth||null,a=e.L.cb,d=e.Mb;return t=new ni(function(){var p=ra(n,o,null,null,u,null);return wn(a(),[p],d())},0,null,Mw(e),null,null,t,e.qa.encrypted),t.codecs=e.L.codecs,t.mimeType=e.L.mimeType,e.na&&!e.na.df&&(t.g=e.na.start+e.na.duration),t}function oa(e,t,n,o,u,a,d,p,g,y,w,T){vt.call(this,[]),this.F=e,this.h=t,this.H=n,this.C=o,this.G=u,this.J=a,this.j=d,this.l=p,this.u=g,this.B=y,this.I=w,this.K=T,ng(this)}U(oa,vt),m=oa.prototype,m.getNumReferences=function(){return this.h?this.h.timeline.length:0},m.release=function(){vt.prototype.release.call(this),this.h=null},m.Ya=function(e){if(this.h){for(var t=0,n=this.h.timeline,o=0;o<n.length&&n[o].end+this.j<=e;o+=1)t+=1;t>0&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function Lw(e,t,n,o,u,a){if(a5(e,u),e.F=a,e.h){if(e.h.gd!==t.gd&&(e.h.timeline=t.timeline,e.h.gd=t.gd,e.h.Jb=t.Jb),e.h.$b!==t.$b&&(e.h.$b=t.$b),n=e.h.timeline,n.length){var d=n[n.length-1];t=t.timeline.filter(function(p){return p.end>d.end})}else t=t.timeline.slice();t.length>0&&e.h.timeline.push.apply(e.h.timeline,le(t)),e.l!==o&&(e.l=o)}else e.h=t,e.j=n,e.l=o;ng(e)}function a5(e,t){if(e.u!==t){e.u=t,e=R(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&pv(n,t)}}function ng(e){if(e.h&&!e.o){for(var t=[],n=R(e.h.timeline),o=n.next();!o.done;o=n.next())o=o.value,o.start>=e.l||o.end<=0||t.push(o);e.h.timeline=t,e.Ya(e.j)}}m.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,o=0;o<t.length;o++){var u=t[o],a=u.start+this.j;if(u=o<n?t[o+1].start+this.j:this.l===1/0?u.end+this.j:this.l,e>=a&&e<u)return o+this.i}return null},m.get=function(e){var t=this;if(e-=this.i,e<0||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){n=this.h.timeline[e];var o=n.Tk,u=n.Fh+this.h.gd,a=this.j-this.h.Jb,d=this.j+n.end,p=d;e===this.getNumReferences()-1&&this.l!==1/0&&(p=this.F&&Math.abs(p-this.l)>.1?Math.min(p,this.l):this.l);var g=this.h.codecs,y=this.h.mimeType,w=this.h.bandwidth,T=[],M=!1;if(n.vc&&this.h&&this.h.$b&&(M=this.h.$b.includes("$SubNumber$")),M){M=(n.end-n.start)/n.vc;for(var L={},P=0;P<n.vc;L={Pf:void 0,Xi:void 0},P++){var N=n.start+M*P,O=N+M;L.Xi=P,L.Pf=null,L=new Ve(this.j+N,this.j+O,(function(F){return function(){return t.h?(F.Pf==null&&(F.Pf=Pw(t.h.$b,t.H,o,t.C,u,F.Xi,t.G,t.J)),F.Pf):[]}})(L),0,null,this.u,a,this.j,this.l,[],"",null,null,Lr,this.B),L.codecs=g,L.mimeType=y,L.bandwidth=w,this.I==0?P>0&&L.wd():P%this.I!=0&&L.wd(),T.push(L)}}n=new Ve(this.j+n.start,p,function(){return T.length>0||!t.h?[]:Pw(t.h.$b,t.H,o,t.C,u,null,t.G,t.J)},0,null,this.u,a,this.j,this.l,T,"",null,null,Lr,this.B,T.length>0),n.codecs=g,n.mimeType=y,n.j=d,n.bandwidth=w,this.g[e]=n}return n},m.Gb=function(e){ng(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}};function Pw(e,t,n,o,u,a,d,p){return e=ra(e,t,n,a,o||null,u),wn(d(),[e],p()).map(function(g){return g.toString()})}m.Se=function(){return this.K};function cu(e){this.o=null,this.B=e,this.H=new Os,this.i=[],this.h=null,this.m=[],this.C=null,this.G=[],this.F=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}cu.prototype.configure=function(e){this.o=e},cu.prototype.destroy=function(){return this.B=this.o=null,this.i=[],this.h=null,this.m=[],this.G=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.H.destroy()},cu.prototype.setManifestType=function(e){this.u=e};function sa(e,t){var n,o,u,a,d,p,g;return $(function(y){if(y.g==1)return n=wn(e.i,[f5(e,t)]),o=un(n,e.o.retryParameters),u=e.B.networkingEngine.request(8,o),Ho(e.H,u),ce(y,2),D(y,u.promise,4);if(y.g!=2)return a=y.h,d=Ht(a.data),p=JSON.parse(d),p.VERSION==1&&c5(e,p,a.uri),X(y,0);if((g=ie(y))&&g.code==7001)return y.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new dt(function(){sa(e,t)}),e.g.ka(e.F),te(y)})}function f5(e,t){if(!e.m.length)return t;t=new Qt(t);var n=e.C||e.m[0],o=Math.round(e.B.getBandwidthEstimate()),u=t.g;return e.u=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(o))):e.u=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(o))),Uy(u)&&_o(t,u),t.toString()}function c5(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var o=t["RELOAD-URI"]||n;e.g=new dt(function(){sa(e,o)}),(n=t.TTL)&&(e.F=n),e.g.ka(e.F),e.m=t["PATHWAY-PRIORITY"]||[],e.G=t["PATHWAY-CLONES"]||[]}function du(e,t,n,o){var u=e.l.get(t);u||(u=new Map),u.set(n,o),e.l.set(t,u)}cu.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function ua(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var o=[],u=R(e.m),a=u.next(),d={};!a.done;d={Bd:void 0},a=u.next())if(d.Bd=a.value,a=t.get(d.Bd))o.push({Yg:d.Bd,location:a});else if(a=e.G.find((function(g){return function(y){return y.Nl==g.Bd}})(d))){var p=t.get(a["BASE-ID"]);p&&(a["URI-REPLACEMENT"].hj?(p=new Qt(p),rf(p,a["URI-REPLACEMENT"].hj),o.push({Yg:d.Bd,location:p.toString()})):o.push({Yg:d.Bd,location:p}))}for(u=Date.now(),d=R(e.j.keys()),a=d.next();!a.done;a=d.next())a=a.value,p=e.j.get(a),u>p&&e.j.delete(a);if(o=o.filter(function(g){for(var y=R(e.j.keys()),w=y.next();!w.done;w=y.next())if(w.value.includes(new Qt(g.location).Eb))return!1;return!0}),o.length&&(e.C=o[0].Yg),o=o.map(function(g){return g.location}),!o.length&&e.h)for(u=R(e.h.split(",")),d=u.next();!d.done;d=u.next())(d=t.get(d.value))&&(e.C=e.h,o.push(d));if(!o.length)for(t=R(t.values()),u=t.next();!u.done;u=t.next())o.push(u.value);return n?o:wn(e.i,o)}function ri(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.o=!1,this.m=new Set}m=ri.prototype,m.release=function(){for(var e=R(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.o=!1,this.m.clear()},m.ck=function(){return this.l},m.Jg=function(){return this.j.slice()},m.Hj=function(){return this.i},m.Uh=function(e,t){if(e){if(e.type=="audio")for(var n=R(this.h),o=n.next();!o.done;o=n.next())o=o.value,o.matchedStreams=o.matchedStreams.filter(function(u){return u!==e});else if(e.type=="video")for(n=R(this.g),o=n.next();!o.done;o=n.next())o=o.value,o.matchedStreams=o.matchedStreams.filter(function(u){return u!==e}),o.trickModeVideo&&(o.trickModeVideo.matchedStreams=o.trickModeVideo.matchedStreams.filter(function(u){return u!==e})),o.dependencyStream&&(o.dependencyStream.matchedStreams=o.dependencyStream.matchedStreams.filter(function(u){return u!==e}));else if(e.type==lt)for(n=R(this.j),o=n.next();!o.done;o=n.next())o=o.value,o.matchedStreams=o.matchedStreams.filter(function(u){return u!==e});else if(e.type=="image")for(n=R(this.i),o=n.next();!o.done;o=n.next())o=o.value,o.matchedStreams=o.matchedStreams.filter(function(u){return u!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function Dw(e,t){var n=[],o=[],u=[],a=[];e=R(e);for(var d=e.next();!d.done;d=e.next()){var p=d.value;d=new Map(p.audioStreams.map(function(T){return[sg(T),T]}));var g=new Map(p.videoStreams.map(function(T){return[og(T),T]})),y=new Map(p.textStreams.map(function(T){return[aa(T),T]}));if(p=new Map(p.imageStreams.map(function(T){return[fa(T),T]})),t){var w=$w(lt);y.set(aa(w),w),w=$w("image"),p.set(fa(w),w)}n.push(d),o.push(g),u.push(y),a.push(p)}return{Nh:n,fj:o,bj:u,ji:a}}m.hg=function(e,t,n){n=n===void 0?!1:n;var o=this,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye,ae,he,Te,ke,Ke;return $(function(Re){if(Re.g==1){if(u=cn,!t&&e.length==1)return a=Dw(e,!1),d=a.Nh,p=a.fj,g=a.bj,y=a.ji,o.h=Array.from(d[0].values()),o.g=Array.from(p[0].values()),o.j=Array.from(g[0].values()),o.i=Array.from(y[0].values()),Re.A(2);for(w=n?o.m.size:0,T=-1,M=0;M<e.length;M++)L=e[M],o.m.has(L.id)||(o.m.add(L.id),T==-1&&(T=M));return T==-1?Re.return():(P=Dw(e,!0),N=P.Nh,O=P.fj,F=P.bj,B=P.ji,D(Re,Promise.all([go(o,o.h,N,T,hu,mo,w),go(o,o.g,O,T,hu,mo,w),go(o,o.j,F,T,hu,mo,w),go(o,o.i,B,T,hu,mo,w)]),2))}if(V=0,Y=[],o.g.length&&o.h.length)for(fe=R(o.h),ne=fe.next();!ne.done;ne=fe.next())for(xe=ne.value,ye=R(o.g),ae=ye.next();!ae.done;ae=ye.next())he=ae.value,Te=I1(xe.drmInfos,he.drmInfos),xe.drmInfos.length&&he.drmInfos.length&&!Te.length||(ke=(xe.bandwidth||0)+(he.bandwidth||0),xe.dependencyStream&&(ke+=xe.dependencyStream.bandwidth||0),he.dependencyStream&&(ke+=he.dependencyStream.bandwidth||0),Ke=V++,Y.push({id:Ke,language:xe.language,disabledUntilTime:0,primary:xe.primary,audio:xe,video:he,bandwidth:ke,drmInfos:Te,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(J=o.g.length?o.g:o.h,H=R(J),z=H.next();!z.done;z=H.next())Q=z.value,ee=V++,se=Q.bandwidth||0,Q.dependencyStream&&(se+=Q.dependencyStream.bandwidth||0),Y.push({id:ee,language:Q.language,disabledUntilTime:0,primary:Q.primary,audio:Q.type==u.ia?Q:null,video:Q.type==u.Ca?Q:null,bandwidth:se,drmInfos:Q.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});o.l=Y,te(Re)})};function Ow(e){var t,n,o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye;return $(function(ae){switch(ae.g){case 1:if(t=cn,e.length==1)return ae.return(e[0]);for(n=e.map(function(he){return new Map(he.filter(function(Te){return Te.type===t.ia}).map(function(Te){return[sg(Te),Te]}))}),o=e.map(function(he){return new Map(he.filter(function(Te){return Te.type===t.Ca}).map(function(Te){return[og(Te),Te]}))}),u=e.map(function(he){return new Map(he.filter(function(Te){return Te.type===t.Na}).map(function(Te){return[aa(Te),Te]}))}),a=e.map(function(he){return new Map(he.filter(function(Te){return Te.type===t.Uf}).map(function(Te){return[fa(Te),Te]}))}),d=R(u),p=d.next();!p.done;p=d.next())g=p.value,y=jw(t.Na),g.set(aa(y),y);for(w=R(a),T=w.next();!T.done;T=w.next())M=T.value,L=jw(t.Uf),M.set(fa(L),L);return P=new ri,D(ae,go(P,[],n,0,Kc,Yc,0),2);case 2:return N=ae.h,D(ae,go(P,[],o,0,Kc,Yc,0),3);case 3:return O=ae.h,D(ae,go(P,[],u,0,Kc,Yc,0),4);case 4:return F=ae.h,D(ae,go(P,[],a,0,Kc,Yc,0),5);case 5:if(B=ae.h,V=0,O.length&&N.length)for(Q=R(N),ee=Q.next();!ee.done;ee=Q.next())for(se=ee.value,fe=R(O),ne=fe.next();!ne.done;ne=fe.next())xe=ne.value,ye=V++,xe.variantIds.push(ye),se.variantIds.push(ye);else for(Y=O.concat(N),J=R(Y),H=J.next();!H.done;H=J.next())z=H.value,z.variantIds=[V++];return ae.return(O.concat(N).concat(F).concat(B))}})}function go(e,t,n,o,u,a,d){var p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee;return $(function(se){switch(se.g){case 1:for(p=[],g=0;g<n.length;g++)g>=o?p.push(new Set(n[g].values())):p.push(new Set);y=R(t),w=y.next();case 2:if(w.done){se.A(4);break}return T=w.value,D(se,d5(e,T,n,o,a,p,d),5);case 5:if(M=se.h,!M)throw new q(2,4,4037);w=y.next(),se.A(2);break;case 4:for(L=R(p),P=L.next();!P.done;P=L.next())for(N=P.value,O=R(N),F=O.next();!F.done;F=O.next())B=F.value,(V=h5(e,B,n,u,a,p))&&t.push(V);for(Y=R(p),J=Y.next();!J.done;J=Y.next())for(H=J.value,z=R(H),Q=z.next(),ee={};!Q.done;ee={uh:void 0},Q=z.next())if(ee.uh=Q.value,!rg(ee.uh)&&t.some((function(fe){return function(ne){return ig(fe.uh,ne)}})(ee)))throw new q(2,4,4037);return se.return(t)}})}function d5(e,t,n,o,u,a,d){return $(function(p){return p.g==1?(Bw(e,n,t,d>0),t.matchedStreams?t.segmentIndex?D(p,Nw(t,o+d),2):p.A(2):p.return(!1)):(Uw(t,o,u,a,d),p.return(!0))})}function Nw(e,t){var n,o,u,a,d,p;return $(function(g){if(g.g==1){for(n=[],o=e.matchedStreams,u=t;u<o.length;u++)a=o[u],n.push(a.createSegmentIndex()),a.trickModeVideo&&!a.trickModeVideo.segmentIndex&&n.push(a.trickModeVideo.createSegmentIndex()),a.dependencyStream&&!a.dependencyStream.segmentIndex&&n.push(a.dependencyStream.createSegmentIndex());return D(g,Promise.all(n),2)}if(e.segmentIndex instanceof qt)for(d=t;d<o.length;d++)p=o[d],p.segmentIndex&&e.segmentIndex.h.push(p.segmentIndex);te(g)})}function h5(e,t,n,o,u,a){if(rg(t))return null;var d=o(t);return Bw(e,n,d),d.createSegmentIndex&&(d.createSegmentIndex=function(){return $(function(p){return d.segmentIndex?p.A(0):(d.segmentIndex=new qt,D(p,Nw(d,0),0))})}),!d.matchedStreams||!d.matchedStreams.length?null:(Uw(d,0,u,a,0),d)}function Uw(e,t,n,o,u){var a=e.matchedStreams;for(t+=u;t<a.length;t++){var d=a[t];n(e,d);var p=!0;if(e.type=="audio"&&$o(e.language,d.language)==0&&(p=!1),p&&(o[t-u].delete(d),d.fullMimeTypes))for(d=R(d.fullMimeTypes.values()),p=d.next();!p.done;p=d.next())e.fullMimeTypes.add(p.value)}}function hu(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=R(t.matchedStreams),o=n.next();!o.done;o=n.next())o=o.value,o.segmentIndex&&(o.segmentIndex.release(),o.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function Kc(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function mo(e,t){function n(d,p){d||(d=[]),p=R(p);for(var g=p.next();!g.done;g=p.next())g=g.value,d.includes(g)||d.push(g);return d}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var o=R(t.keyIds),u=o.next();!u.done;u=o.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:(o=t.originalId||"")&&!e.originalId.endsWith(o)&&(e.originalId+=","+o),o=I1(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!o.length)throw new q(2,4,4038);if(e.drmInfos=o,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),o=R(t.closedCaptions),u=o.next();!u.done;u=o.next()){var a=R(u.value);u=a.next().value,a=a.next().value,e.closedCaptions.set(u,a)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=hu(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var d=new qt,p=R(e.trickModeVideo.matchedStreams),g=p.next();!g.done;g=p.next())d.h.push(g.value.segmentIndex);return e.trickModeVideo.segmentIndex=d,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),mo(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),mo(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=hu(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var d=new qt,p=R(e.dependencyStream.matchedStreams),g=p.next();!g.done;g=p.next())d.h.push(g.value.segmentIndex);return e.dependencyStream.segmentIndex=d,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),mo(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),mo(e.dependencyStream,t))}function Yc(e,t){var n=e.roles;n||(n=[]);for(var o=R(t.roles),u=o.next();!u.done;u=o.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=R(t.keyIds),o=n.next();!o.done;o=n.next())e.keyIds.add(o.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,le(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=R(t.closedCaptions),n=t.next();!n.done;n=t.next())o=R(n.value),n=o.next().value,o=o.next().value,e.closedCaptions.set(n,o)}function Bw(e,t,n,o){o=o!==void 0&&o?n.matchedStreams:[],t=R(t);for(var u=t.next();!u.done;u=t.next()){if(u=p5(e,u.value,n),!u)return;o.push(u)}n.matchedStreams=o}function p5(e,t,n){var o={audio:sg,video:og,text:aa,image:fa}[n.type],u=null,a=o(n);if(t.has(a))u=t.get(a);else{a={audio:function(y,w){return ig(y,w)},video:function(y,w){return ig(y,w)},text:g5,image:m5}[n.type];for(var d={audio:y5,video:v5,text:x5,image:w5}[n.type],p=R(t.values()),g=p.next();!g.done;g=p.next())g=g.value,!a(n,g)||n.fastSwitching!=g.fastSwitching||u&&!d(n,u,g)||(u=g)}return e.o&&!rg(u)&&t.delete(o(u)),u}function Fw(e,t){return e.mimeType!=t.mimeType?!1:Hw(e.codecs)===Hw(t.codecs)}m.Ri=function(e){this.o=e};function ig(e,t){return!(e.drmInfos&&!E1(e.drmInfos,t.drmInfos))}function g5(e,t){return t.language?!(e.forced!==t.forced||$o(e.language,t.language)==0||t.kind!=e.kind):!0}function m5(){return!0}function y5(e,t,n){var o=zw(e,t,n);if(o===mi)return!0;if(o===Bi)return!1;o=$o(e.language,t.language);var u=$o(e.language,n.language);if(u>o)return!0;if(u<o)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(o=t.roles.filter(function(a){return e.roles.includes(a)}),u=n.roles.filter(function(a){return e.roles.includes(a)}),u.length>o.length)return!0;if(u.length<o.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(o=la(e.channelsCount,t.channelsCount,n.channelsCount),o==mi?!0:o==Bi?!1:(o=la(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),o==mi?!0:o==Bi?!1:!!(e.bandwidth&&Vw(e.bandwidth,t.bandwidth,n.bandwidth)==mi)))}function v5(e,t,n){var o=zw(e,t,n);if(o===mi)return!0;if(o===Bi)return!1;if(o=la(e.width*e.height,t.width*t.height,n.width*n.height),o==mi)return!0;if(o==Bi)return!1;if(e.frameRate){if(o=la(e.frameRate,t.frameRate,n.frameRate),o==mi)return!0;if(o==Bi)return!1}return!!(e.bandwidth&&Vw(e.bandwidth,t.bandwidth,n.bandwidth)==mi)}function x5(e,t,n){var o=$o(e.language,t.language),u=$o(e.language,n.language);if(u>o)return!0;if(u<o)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(o=t.roles.filter(function(a){return e.roles.includes(a)}),u=n.roles.filter(function(a){return e.roles.includes(a)}),u.length>o.length)return!0;if(u.length<o.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function w5(e,t,n){return la(e.width*e.height,t.width*t.height,n.width*n.height)==mi}function jw(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function $w(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vt([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function la(e,t,n){if(t==e&&e!=n)return Bi;if(n==e&&e!=t)return mi;if(t>e){if(n<=e||n-e<t-e)return mi;if(n-e>t-e)return Bi}else{if(n>e)return Bi;if(e-n<e-t)return mi;if(e-n>e-t)return Bi}return ug}function zw(e,t,n){var o=e.mimeType===t.mimeType&&e.codecs===t.codecs,u=e.mimeType===n.mimeType&&e.codecs===n.codecs;return o&&!u?Bi:!o&&u?mi:(t=Fw(e,t),e=Fw(e,n),t&&!e?Bi:!t&&e?mi:ug)}function Vw(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?mi:t<e?Bi:ug}function rg(e){switch(e.type){case lt:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function og(e){return qc([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function sg(e){return qc([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function aa(e){return qc([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function fa(e){return qc([e.width,e.codecs,e.mimeType])}function qc(e){return JSON.stringify(e)}function Hw(e){if(!lg.has(e)){var t=Ln(e);lg.set(e,t)}return lg.get(e)}be("shaka.util.PeriodCombiner",ri),ri.prototype.setUseStreamOnce=ri.prototype.Ri,ri.prototype.combinePeriods=ri.prototype.hg,ri.prototype.deleteStream=ri.prototype.Uh,ri.prototype.getImageStreams=ri.prototype.Hj,ri.prototype.getTextStreams=ri.prototype.Jg,ri.prototype.getVariants=ri.prototype.ck;var mi=1,ug=0,Bi=-1,lg=new Map;function S5(e,t){var n=new DOMParser,o=T5.value()(e);e=null;try{e=n.parseFromString(o,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function Gw(e,t){try{var n=fr(e);return S5(n,t)}catch{return null}}var T5=new re(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Jc(){var e=this;this.j=this.g=null,this.B=[],this.h=null,this.Ga=1,this.H=[],this.l={pf:"",type:"",profiles:[],sc:null,ub:0,cb:null,je:0},this.u=new Map,this.C=new Map,this.o=new Map,this.F=new Map,this.ya=new Map,this.m=new ri,this.K=0,this.Da=new Gi(5),this.M=new dt(function(){if(e.J&&!e.g.continueLoadingWhenPaused&&(e.I.Ma(e.J,"timeupdate"),e.J.paused)){e.I.Aa(e.J,"timeupdate",function(){return Qw(e)});return}Qw(e)}),this.R=new Os,this.O=null,this.G=[],this.ba=1/0,this.wa=!1,this.i=null,this.N=0,this.S=!1,this.I=new Le,this.J=null,this.V=!1,this.$="",this.oa=function(){return!1},this.X=[],this.ma=new Set,this.xa=new ww}m=Jc.prototype,m.configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.oa=t),n&&this.h&&this.h.presentationTimeline.W()&&this.M.Kb(),this.i&&this.i.configure(this.g),this.m&&this.m.Ri(this.g.dash.useStreamOnceInPeriodFlattening)},m.start=function(e,t){var n=this,o;return $(function(u){if(u.g==1)return n.wa=t.isLowLatencyMode(),n.B=[e],n.j=t,D(u,ag(n),2);if(o=u.h,n.j&&fg(n,o),!n.j)throw new q(2,7,7001);return u.return(n.h)})},m.stop=function(){for(var e=R(this.o.values()),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.B=[],this.h=null,this.o.clear(),this.F.clear(),this.u.clear(),this.C.clear(),this.l={pf:"",type:"",profiles:[],sc:null,ub:0,cb:null,je:0},this.m=null,this.M!=null&&(this.M.stop(),this.M=null),this.i&&this.i.destroy(),this.I&&(this.I.release(),this.I=null),this.ma.clear(),this.xa.release(),this.R.destroy()},m.update=function(){var e=this,t;return $(function(n){if(n.g==1)return ce(n,2),D(n,ag(e),4);if(n.g!=2)return X(n,0);if(t=ie(n),!e.j||!t)return n.return();e.j.onError(t),te(n)})},m.onExpirationUpdated=function(){},m.onInitialVariantChosen=function(e){if(this.h&&this.h.presentationTimeline.W()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.h.presentationTimeline.Ic();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.K=t.endTime-e,fg(this,0))}}},m.banLocation=function(e){this.i&&this.i.banLocation(e)},m.setMediaElement=function(e){this.J=e};function ag(e){var t,n,o,u,a,d,p,g,y,w,T;return $(function(M){return M.g==1?(t=4,n="MPD",o=j5(e),u=e.B,o.length?(u=o,n="Patch",t=6):e.B.length>1&&e.i&&(a=ua(e.i,"Location",!0),a.length&&(u=a)),d=un(u,e.g.retryParameters),p=Date.now(),D(M,dg(e,d,0,{type:t}),2)):M.g!=3?(g=M.h,e.j?(g.uri&&g.uri!=g.originalUri&&!e.B.includes(g.uri)&&e.B.unshift(g.uri),y=new Qt(g.uri),e.$=y.g.toString(),D(M,C5(e,g.data,g.uri,n),3)):M.return(0)):(w=Date.now(),T=(w-p)/1e3,e.Da.sample(1,T),e.ma.clear(),M.return(T))})}function C5(e,t,n,o){var u,a,d,p,g,y,w,T,M,L;return $(function(P){if(P.g==1){if(u=t,a=e.g.dash.manifestPreprocessor,d=cc,a!=d){if(yt("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),p=Gw(u,o),!p)throw new q(2,4,4001,n);a(p),u=Xi(p.outerHTML)}if(g=rl(u,o),!g)throw new q(2,4,4001,n);return y=e.g.dash.manifestPreprocessorTXml,w=dc,y!=w&&y(g),o==="Patch"?P.return(b5(e,g)):e.g.dash.disableXlinkProcessing?P.return(Xw(e,g,n)):(T=e.g.dash.xlinkFailGracefully,M=Wc(g,e.g.retryParameters,T,n,e.j.networkingEngine),Ho(e.R,M),D(P,M.promise,2))}return L=P.h,P.return(Xw(e,L,n))})}function Xw(e,t,n){var o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye,ae,he,Te,ke,Ke,Re,pt,ht,At,ut,tt,Et,at,rt,ct,Xt,Vt,Wt,yn,rn,It,vo,xi,xo,wu,Su;return $(function(ur){switch(ur.g){case 1:for(e.i&&e.i.l.clear(),o=[n],u=[],a=new Map,d=bt(t,"Location"),p=R(d),g=p.next();!g.done;g=p.next())y=g.value,w=y.attributes.serviceLocation,(T=Kn(y))&&(M=wn(o,[T])[0],w&&(e.i?du(e.i,"Location",w,M):a.set(w,M)),u.push(M));if(e.i?(L=ua(e.i,"Location",!0),L.length>0&&(o=e.B=L)):u.length&&(o=e.B=u),e.l.pf=t.attributes.id||"",e.l.je=Qe(t,"publishTime",kr)||0,e.H=bt(t,"PatchLocation"),P=Promise.resolve(),(N=Ft(t,"ContentSteering"))&&e.j)for(O=N.attributes.defaultServiceLocation,e.i?(e.i.i=o,e.i.h=O):(e.i=new cu(e.j),e.i.configure(e.g),e.i.setManifestType("DASH"),e.i.i=o,e.i.h=O,(F=Kn(N))&&(Qe(N,"queryBeforeStart",hf,!1)?P=sa(e.i,F):sa(e.i,F))),B=R(a.keys()),V=B.next();!V.done;V=B.next())Y=V.value,J=a.get(Y),du(e.i,"Location",Y,J);if(H=bt(t,"BaseURL"),z=!1,e.i)for(Q=R(H),ee=Q.next();!ee.done;ee=Q.next())se=ee.value,fe=se.attributes.serviceLocation,ne=Kn(se),fe&&ne&&(du(e.i,"BaseURL",fe,ne),z=!0);if(e.X.splice(0),z&&e.i||(xe=H.map(Kn),e.X.push.apply(e.X,le(wn(o,xe)))),ye=e.i,ae=e.X,he=function(){return ye&&z?ua(ye,"BaseURL"):ae.slice()},e.l.cb=he,Te=0,H&&H.length&&(Te=Qe(H[0],"availabilityTimeOffset",df)||0),e.l.ub=Te,e.K=Qe(t,"minimumUpdatePeriod",dr,-1),ke=Qe(t,"availabilityStartTime",kr),Ke=Qe(t,"timeShiftBufferDepth",dr),Re=e.g.dash.ignoreSuggestedPresentationDelay,pt=null,Re||(pt=Qe(t,"suggestedPresentationDelay",dr)),ht=e.g.dash.ignoreMaxSegmentDuration,At=null,ht||(At=Qe(t,"maxSegmentDuration",dr)),ut=t.attributes.type||"static",e.h&&e.h.presentationTimeline&&(e.V=e.h.presentationTimeline.W()&&ut=="static"),e.l.type=ut,e.h)for(tt=e.h.presentationTimeline,Et=tt.Ib(),at=R(e.o.values()),rt=at.next();!rt.done;rt=at.next())ct=rt.value,ct.segmentIndex&&ct.segmentIndex.Ya(Et);else Xt=e.g.dash.ignoreMinBufferTime,Vt=0,Xt||(Vt=Qe(t,"minBufferTime",dr)||0),Wt=0,Wt=pt!=null?Math.min(pt,Ke||1/0):e.g.defaultPresentationDelay>0?e.g.defaultPresentationDelay:Math.min(Vt*1.5,Ke||1/0),tt=new Ye(ke,Wt,e.g.dash.autoCorrectDrift);return tt.cd(ut=="static"),tt.W()&&!isNaN(e.g.availabilityWindowOverride)&&(Ke=e.g.availabilityWindowOverride),Ke==null&&(Ke=1/0),tt.Hf(Ke),yn=t.attributes.profiles||"",e.l.profiles=yn.split(","),rn={Fb:ut!="static",presentationTimeline:tt,sa:null,na:null,qa:null,L:null,bandwidth:0,Lg:!1,ub:Te,sc:null,profiles:yn.split(","),roles:null,Mb:function(){return""}},D(ur,P,2);case 2:return e.N=0,It=qw(e,rn,he,t,!1),vo=It.duration,xi=It.periods,(ut!="static"||e.V)&&It.Wh||tt.rb(vo||1/0),e.S&&e.wa&&tt.Oi(e.ba),tt.Tg(At||1),e.S&&e.wa&&(xo=pt??e.g.defaultPresentationDelay,tt.oh(xo)),e.h?(e.h.periodCount=xi.length,e.h.gapCount=e.N,D(ur,Ww(e,xi,!1),4)):D(ur,e.m.hg(xi,rn.Fb),6);case 6:if(e.h={presentationTimeline:tt,variants:e.m.l,textStreams:e.m.Jg(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:E5(t),nextUrl:I5(t),periodCount:xi.length,gapCount:e.N,isLowLatency:e.S,startTime:null},!tt.ej()){ur.A(7);break}return wu=bt(t,"UTCTiming"),D(ur,B5(e,he,wu),8);case 8:if(Su=ur.h,!e.j)return ur.return();tt.Pi(Su);case 7:tt.kf(),e.m&&!e.h.presentationTimeline.W()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.h),M5(e),R5(e,xi),te(ur)}})}function Ww(e,t,n){var o;return $(function(u){if(u.g==1)return D(u,e.m.hg(t,!0,n),2);e.h.variants=e.m.l,o=e.m.Jg(),o.length>0&&(e.h.textStreams=o),e.h.imageStreams=e.m.i,e.j.filter(e.h),te(u)})}function b5(e,t){var n,o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne;return $(function(xe){if(xe.g==1){if(n=t.attributes.mpdId,o=Qe(t,"originalPublishTime",kr),!n||n!==e.l.pf||o!==e.l.je)throw e.H=[],new q(1,4,4052);for(u=[],a=[],d=new Set,p=R(Yy(t)),g=p.next();!g.done;g=p.next())if(y=g.value,w=pf(y.attributes.sel||""),T=w[w.length-1],M=Kn(y)||"",T.name==="MPD")if(T.Cc==="mediaPresentationDuration"){L=Kn(y)||"";var ye=dr(L);if(ye!=null){e.l.sc=ye;for(var ae=R(e.u.values()),he=ae.next();!he.done;he=ae.next())he.value.sc=ye}}else if(T.Cc==="type"){for(e.h.presentationTimeline.cd(M=="static"),e.l.type=M,ye=R(e.u.values()),ae=ye.next();!ae.done;ae=ye.next())ae.value.Fb=M=="dynamic";M=="static"&&(e.K=-1)}else T.Cc==="publishTime"?e.l.je=kr(M)||0:T.Cc===null&&y.tagName==="add"&&a.push(y);else if(T.name==="PatchLocation")Jy(e.H,y);else if(T.name==="Period")y.tagName==="add"?a.push(y):y.tagName==="remove"&&T.id&&A5(e,T.id);else if(T.name==="SegmentTemplate"){if(ae=pf(y.attributes.sel||""),ye=ae[ae.length-1],ye.Cc){ae=Kw(e,ae),he=Kn(y)||"";for(var Te=R(ae),ke=Te.next();!ke.done;ke=Te.next())ke=e.u.get(ke.value),Zy(ke.L.Nc,y.tagName,ye.Cc,he);ye=ae}else ye=[];for(P=ye,N=R(P),O=N.next();!O.done;O=N.next())F=O.value,d.add(F)}else if(T.name==="SegmentTimeline"||T.name==="S"){for(ye=pf(y.attributes.sel||""),ye=Kw(e,ye),ae=R(ye),he=ae.next();!he.done;he=ae.next())he=e.u.get(he.value),he=au(he,po,"SegmentTimeline"),Te=bt(he,"S"),Jy(Te,y),he.children=Te;for(B=ye,V=R(B),Y=V.next();!Y.done;Y=V.next())J=Y.value,d.add(J)}for(H=R(d),z=H.next();!z.done;z=H.next())Q=z.value,Yw(e,Q);for(ee=R(a),se=ee.next();!se.done;se=ee.next())fe=se.value,u.push.apply(u,le(k5(e,fe)));return u.length?(e.h.periodCount+=u.length,e.h.gapCount=e.N,D(xe,Ww(e,u,!0),2)):xe.A(2)}e.l.type=="static"&&(ne=e.l.sc,e.h.presentationTimeline.rb(ne||1/0)),te(xe)})}function k5(e,t){return qw(e,{Fb:e.l.type=="dynamic",presentationTimeline:e.h.presentationTimeline,sa:null,na:null,qa:null,L:null,bandwidth:0,Lg:!1,ub:e.l.ub,profiles:e.l.profiles,sc:e.l.sc,roles:null,Mb:function(){return""}},e.l.cb,t,!0).periods}function A5(e,t){e.h.periodCount--;for(var n=R(e.u.keys()),o=n.next();!o.done;o=n.next())if(o=o.value,o.startsWith(t)){var u=e.u.get(o);au(u,po,"SegmentTimeline").children=[],Yw(e,o),e.u.delete(o)}e.G=e.G.filter(function(a){return a!==t})}function Kw(e,t){var n="",o="",u=-1,a="";t=R(t);for(var d=t.next();!d.done;d=t.next())d=d.value,d.name==="Period"?n=d.id:d.name==="AdaptationSet"?(o=d.id,d.position!==null&&(u=d.position)):d.name==="Representation"&&(a=d.id);if(t=[],a)t.push(n+","+a);else if(o)for(u=R(e.u.values()),e=u.next();!e.done;e=u.next())e=e.value,e.sa.id===n&&e.qa.id===o&&e.L.id&&t.push(n+","+e.L.id);else if(u>-1)for(o=R(e.u.values()),e=o.next();!e.done;e=o.next())e=e.value,e.sa.id===n&&e.qa.position===u&&e.L.id&&t.push(n+","+e.L.id);return t}function Yw(e,t){var n=e.u.get(t),o=e.o.get(t);o.segmentIndex&&o.segmentIndex.Ya(e.h.presentationTimeline.Ib());try{var u=_w(n,function(a,d,p,g){return eS(e,a,d,p,g)},e.o,!0,e.g.dash.initialSegmentLimit,e.ya,n.L.aesKey,null,!0,e.C);o.createSegmentIndex=function(){return $(function(a){if(a.g==1)return o.segmentIndex?a.A(0):D(a,u.Sc(),3);o.segmentIndex=a.h,te(a)})}}catch(a){if(t=n.L.contentType,t!=lt&&t!="application"&&t!="image"||a.code!=4002)throw a}}function E5(e){var t=Ft(e,"ServiceDescription");if(!t||(e=Ft(t,"Latency"),t=Ft(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function I5(e){if(e=bt(e,"SupplementalProperty"),!e.length)return null;e=R(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function qw(e,t,n,o,u){var a=t.sc;a||(a=Qe(o,"mediaPresentationDuration",dr),e.l.sc=a);var d=0;e.h&&e.h.presentationTimeline&&e.V&&(d=e.h.presentationTimeline.Xb());var p=[],g=d;o=bt(o,"Period");for(var y=0;y<o.length;y++){var w=o[y],T=o[y+1],M=Qe(w,"start",dr,g),L=w.attributes.id,P=Qe(w,"duration",dr);M=y==0&&M==0&&e.V?d:M;var N=null;if(T){var O=Qe(T,"start",dr);O!=null&&(N=O-M+d)}else a!=null&&(N=a-M+d);if(O=$y,N&&P&&Math.abs(N-P)>O&&N>P&&e.N++,N==null&&(N=P),!(e.O!==null&&L!==null&&M!==null&&M<e.O)||e.G.includes(L)||y+1==o.length){if(M!==null&&(e.O===null||M>e.O)&&(e.O=M),g=_5(e,t,n,{start:M,duration:N,node:w,df:N==null||!T}),p.push(g),t.sa.id&&N&&e.ya.set(t.sa.id,N),N==null){g=null;break}g=M+N}}if(u)for(t=R(p),n=t.next();!n.done;n=t.next())n=n.value.id,e.G.includes(n)||e.G.push(n);else e.G=p.map(function(F){return F.id});return a!=null?{periods:p,duration:a+d,Wh:!1}:{periods:p,duration:g,Wh:!0}}function M5(e){var t=Array.from(e.F.keys()).filter(function(p){return!e.G.includes(p)});t=R(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var o=!0,u=R(e.F.get(n)),a=u.next();!a.done;a=u.next()){a=a.value;var d=e.o.get(a);d&&(d.segmentIndex&&d.segmentIndex.getNumReferences()!=0?o=!1:(e.m&&e.m.Uh(d,n),e.o.delete(a)))}o&&e.F.delete(n)}}function R5(e,t){t=new Set(t.map(function(u){return u.id}));for(var n=R(e.C.keys()),o=n.next();!o.done;o=n.next())o=o.value,t.has(o)||e.C.delete(o)}function _5(e,t,n,o){t.sa=cg(e,o.node,null,n),t.na=o,t.sa.ub=t.ub,t.sa.id||(t.sa.id="__shaka_period_"+o.start);var u=bt(o.node,"EventStream");n=t.presentationTimeline.Ib(),u=R(u);for(var a=u.next();!a.done;a=u.next())F5(e,o.start,o.duration,a.value,n);for(n=bt(o.node,"SupplementalProperty"),n=R(n),u=n.next();!u.done;u=n.next())u=u.value,u.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(u=ca(e,u))&&(t.Mb=u);if(n=bt(o.node,"AdaptationSet").map(function(L,P){return Jw(e,t,P,L)}).filter(no),t.Fb){u=[],a=R(n);for(var d=a.next();!d.done;d=a.next()){d=R(d.value.Pk);for(var p=d.next();!p.done;p=d.next())u.push(p.value)}if(u.length!=new Set(u).size)throw new q(2,4,4018)}for(u=new Map,a=R(n),d=a.next();!d.done;d=a.next())for(d=R(d.value.vj),p=d.next();!p.done;p=d.next()){var g=R(p.value);p=g.next().value,g=g.next().value,u.set(p,g)}if(u.size)for(a=null,d=R(n),p=d.next();!p.done;p=d.next()){p=p.value,g=[];for(var y=R(p.streams),w=y.next(),T={};!w.done;T={wh:void 0},w=y.next())if(T.wh=w.value,u.has(T.wh.originalId)){a||(a=bt(o.node,"AdaptationSet").map(function(L,P){return Jw(e,t,P,L)}).filter(no)),w=R(a);for(var M=w.next();!M.done;M=w.next())(M=M.value.streams.find((function(L){return function(P){return P.originalId==L.wh.originalId}})(T)))&&(M.dependencyStream=u.get(M.originalId),M.originalId+=M.dependencyStream.originalId,g.push(M))}g.length&&p.streams.push.apply(p.streams,le(g))}if(o=n.filter(function(L){return!L.Eh}),n=n.filter(function(L){return L.Eh}),!e.g.disableIFrames){for(n=R(n),u=n.next();!u.done;u=n.next())for(u=u.value,a=u.Eh.split(" "),d=R(o),p=d.next();!p.done;p=d.next())if(p=p.value,a.includes(p.id))for(p=R(p.streams),g=p.next();!g.done;g=p.next())T1(g.value,u.streams)}if(n=Qc(e.g.disableAudio,o,"audio"),u=Qc(e.g.disableVideo,o,"video"),a=Qc(e.g.disableText,o,lt),o=Qc(e.g.disableThumbnails,o,"image"),u.length===0&&n.length===0)throw new q(2,4,4004);return{id:t.sa.id,audioStreams:n,videoStreams:u,textStreams:a,imageStreams:o}}function Qc(e,t,n){return e||!t.length?[]:t.reduce(function(o,u){return u.contentType!=n||o.push.apply(o,le(u.streams)),o},[])}function Jw(e,t,n,o){function u(ne){var xe=ne.attributes["dvb:fontFamily"];ne=ne.attributes["dvb:url"],xe&&ne&&(ne=wn(t.qa.cb(),[ne],t.Mb()),e.j.addFont(xe,ne[0]))}function a(ne){switch(ne){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function d(ne){switch(ne){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.qa=cg(e,o,t.sa,null),t.qa.position=n;var p=!1;n=bt(o,"Role");var g=n.map(function(ne){return ne.attributes.value}).filter(no),y=void 0,w=t.qa.contentType==lt;w&&(y="subtitle"),n=R(n);for(var T=n.next();!T.done;T=n.next()){T=T.value;var M=T.attributes.schemeIdUri;if(M==null||M=="urn:mpeg:dash:role:2011")switch(T=T.attributes.value,T){case"main":p=!0;break;case"caption":case"subtitle":y=T}}var L=bt(o,"EssentialProperty");n=null;var P=!1;T=null,M=!1,L=R(L);for(var N=L.next();!N.done;N=L.next()){N=N.value;var O=N.attributes.schemeIdUri;if(O=="http://dashif.org/guidelines/trickmode")n=N.attributes.value;else if(O=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var F=d(parseInt(N.attributes.value,10));else if(O=="urn:mpeg:mpegB:cicp:ColourPrimaries")var B=a(parseInt(N.attributes.value,10));else O!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(O=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?P=!0:O=="urn:dvb:dash:fontdownload:2014"?u(N):O=="urn:mpeg:dash:urlparam:2014"&&(T=ca(e,N))||(M=!0))}if(M)return null;var V=null;for(M=bt(o,"SupplementalProperty"),M=R(M),L=M.next();!L.done;L=M.next())L=L.value,N=L.attributes.schemeIdUri,N=="http://dashif.org/guidelines/last-segment-number"?V=parseInt(L.attributes.value,10)-1:N=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?F=d(parseInt(L.attributes.value,10)):N=="urn:mpeg:mpegB:cicp:ColourPrimaries"?B=a(parseInt(L.attributes.value,10)):N=="urn:dvb:dash:fontdownload:2014"?u(L):N=="urn:mpeg:dash:urlparam:2014"&&(T=ca(e,L));T&&(t.Mb=T),T=bt(o,"Accessibility");var Y=new Map,J;for(T=R(T),M=T.next();!M.done;M=T.next())if(L=M.value,M=L.attributes.schemeIdUri,L=L.attributes.value,M!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(M!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)M=="urn:mpeg:dash:role:2011"?L!=null&&(g.push(L),L=="captions"&&(y="caption")):M=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(L=="1"?J="visually impaired":L=="2"?J="hard of hearing":L=="9"&&(J="spoken subtitles"));else if(M=1,L!=null)for(L=R(L.split(";")),N=L.next();!N.done;N=L.next()){O=N.value;var H=N=void 0;O.includes("=")?(O=O.split("="),N="svc"+O[0],H=O[1].split(",")[0].split(":").pop()):(N="svc"+M,M++,H=O),Y.set(N,St(H))}else Y.set("svc1","und");else if(M=1,L!=null)for(L=L.split(";"),N=R(L),O=N.next();!O.done;O=N.next()){H=O.value;var z=O=void 0;H.includes("=")?(H=H.split("="),O=H[0].startsWith("CC")?H[0]:"CC"+H[0],z=H[1]||"und"):(O="CC"+M,L.length==2?M+=2:M++,z=H),Y.set(O,St(z))}else Y.set("CC1","und");T=bt(o,"ContentProtection");var Q=Sw(e.xa,T,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);t.qa.encrypted=T.length>0;var ee=St(t.qa.language||"und"),se=t.qa.label,fe=new Map;if(o=bt(o,"Representation"),!e.g.ignoreSupplementalCodecs){for(T=[],M=R(o),L=M.next();!L.done;L=M.next())N=L.value,(L=br(N,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(N=Wi(N),N.attributes.codecs=L.split(" ").join(","),N.attributes.id&&(N.attributes.supplementalId=N.attributes.id+"_supplementalCodecs"),T.push(N));o.push.apply(o,le(T))}if(T=o.map(function(ne){var xe=L5(e,t,Q,y,ee,se,p,g,Y,ne,J,V);return xe&&(xe.hdr=xe.hdr||F,xe.colorGamut=xe.colorGamut||B,xe.fastSwitching=P,ne=ne.attributes.dependencyId)?(xe.baseOriginalId=ne,fe.set(ne,xe),null):xe}).filter(function(ne){return!!ne}),T.length==0&&fe.size==0){if(n=t.qa.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||w||n)return null;throw new q(2,4,4003)}if(!t.qa.contentType||t.qa.contentType=="application")for(t.qa.contentType=tS(T[0].mimeType,T[0].codecs),w=R(T),M=w.next();!M.done;M=w.next())M.value.type=t.qa.contentType;for(w=t.qa.id||"__fake__"+e.Ga++,M=R(T),L=M.next();!L.done;L=M.next()){for(L=L.value,N=R(Q.drmInfos),O=N.next();!O.done;O=N.next())O=O.value,O.keyIds=O.keyIds&&L.keyIds?new Set([].concat(le(O.keyIds),le(L.keyIds))):O.keyIds||L.keyIds;e.g.enableAudioGroups&&(L.groupId=w)}return o=o.map(function(ne){return ne.attributes.supplementalId||ne.attributes.id}).filter(no),{id:w,contentType:t.qa.contentType,language:ee,Gm:p,streams:T,drmInfos:Q.drmInfos,Eh:n,Pk:o,vj:fe}}function ca(e,t){if((t=Pi(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&Qe(t,"useMPDUrlQuery",hf,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.$:n.split("&").map(function(o){if(o=="$querypart$")return e.$;var u=/\$query:(.*?)\$/g.exec(o);if(u&&u.length==2){u=u[1];var a=new Ss(e.$).get(u);if(a.length)return u+"="+a[0]}return o}).join("&")}}return null}function L5(e,t,n,o,u,a,d,p,g,y,w,T){t.L=cg(e,y,t.qa,null);var M=t.L.id;if(e.ba=Math.min(e.ba,t.L.ub),e.S=e.ba>0,!U5(t.L))return null;var L=t.na.start;t.bandwidth=Qe(y,"bandwidth",hr)||0,t.roles=p;var P=bt(y,"SupplementalProperty"),N=bt(y,"EssentialProperty"),O=bt(y,"ContentProtection");y=null;var F=N.find(function(ae){return ae.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(F||(F=P.find(function(ae){return ae.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(y=ca(e,F)),y&&(t.Mb=y),F=t.L.contentType,y=F==lt||F=="application",F=F=="image",O.length&&(t.qa.encrypted=!0);try{var B=void 0;if(n.dg){var V=t.L.cb,Y=t.Mb,J=wn(V(),[n.dg.tk],Y()),H=un(J,e.g.retryParameters);B={bitsKey:128,blockCipherMode:"CBC",iv:n.dg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var ae,he,Te;return $(function(ke){if(ke.g==1)return D(ke,dg(e,H,6),2);if(ke.g!=3){if(ae=ke.h,!ae.data||ae.data.byteLength!=16)throw new q(2,4,4049);return he={name:"AES-CBC"},Te=B,D(ke,f.crypto.subtle.importKey("raw",ae.data,he,!0,["decrypt"]),3)}Te.cryptoKey=ke.h,B.fetchKey=void 0,te(ke)})}}}if(t.L.aesKey=B,V=function(ae,he,Te,ke){return eS(e,ae,he,Te,ke)},t.L.Hd)var z=ZI(t,V,B);else if(t.L.zc)z=t5(t,e.o,B);else if(t.L.Nc)z=_w(t,V,e.o,!!e.h,e.g.dash.initialSegmentLimit,e.ya,B,T,!1,e.C);else{var Q=t.na.duration||0,ee=t.L.cb,se=t.L.mimeType,fe=t.L.codecs;z={endTime:-1,timeline:-1,Sc:function(){var ae=Yf(L,Q,ee());return ae.Gb(function(he){he.mimeType=se,he.codecs=fe}),Promise.resolve(ae)},timescale:1}}}catch(ae){if((y||F)&&ae.code==4002)return null;throw ae}T=jI(e.xa,O,n,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI),T=new Set(T?[T]:[]),O=!1,P.some(function(ae){return ae.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&ae.attributes.value=="JOC"})&&(O=!0),P=!1,y&&(P=p.includes("forced_subtitle")||p.includes("forced-subtitle"));var ne;if(F&&((N=N.find(function(ae){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(ae.attributes.schemeIdUri)}))&&(ne=N.attributes.value),!ne))return null;var xe;y=t.L.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(y.includes("hvc1.2.4.L153.B0")||y.includes("hev1.2.4.L153.B0"))&&(xe="PQ"),N=t.L.id?t.sa.id+","+t.L.id:"",e.H.length&&M&&e.u.set(t.sa.id+","+M,D5(t)),t.L.zf&&P5(e,t.L.zf,z,t.presentationTimeline),z.endTime!=-1&&t.sa.id!=null&&t.L.id!=null&&((M=e.C.get(t.sa.id))?(M.endTime=z.endTime,M.dh.includes(t.L.id)||M.dh.push(t.L.id),e.C.set(t.sa.id,M)):e.C.set(t.sa.id,{endTime:z.endTime,timeline:z.timeline,dh:[t.L.id]}));var ye=N&&e.o.has(N)?e.o.get(N):{id:e.Ga++,originalId:t.L.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){ye.segmentIndex&&(ye.segmentIndex.release(),ye.segmentIndex=null)},segmentIndex:null,mimeType:t.L.mimeType,codecs:y,frameRate:t.L.frameRate,pixelAspectRatio:t.L.pixelAspectRatio,bandwidth:t.bandwidth,width:t.L.width,height:t.L.height,kind:o,encrypted:n.drmInfos.length>0,drmInfos:n.drmInfos,keyIds:T,language:u,originalLanguage:t.qa.language,label:a,type:t.qa.contentType,primary:d,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:t.L.emsgSchemeIdUris,roles:p,forced:P,channelsCount:t.L.tf,audioSamplingRate:t.L.audioSamplingRate,spatialAudio:O,closedCaptions:g,hdr:xe,colorGamut:void 0,videoLayout:void 0,tilesLayout:ne,accessibilityPurpose:w,external:!1,fastSwitching:!1,fullMimeTypes:new Set([en(t.L.mimeType,t.L.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return ye.createSegmentIndex=function(){var ae;return $(function(he){if(he.g==1)return ye.segmentIndex?he.A(0):(ae=ye,D(he,z.Sc(),3));ae.segmentIndex=he.h,te(he)})},N&&t.Fb&&!e.o.has(N)&&(t=t.sa.id||"",e.F.has(t)||e.F.set(t,[]),e.o.set(N,ye),e.F.get(t).push(N)),ye}function P5(e,t,n,o){if(!e.ma.has(t)){e.ma.add(t);var u=Qe(t,"presentationTime",kn)||0,a=Ft(t,"UTCTiming"),d;(d=a&&a.attributes.schemeIdUri)&&(a=a.attributes.schemeIdUri,d=!(a==="urn:mpeg:dash:utc:http-ntp:2014"||a==="urn:mpeg:dash:utc:ntp:2014"||a==="urn:mpeg:dash:utc:sntp:2014")),d?t=(Qe(t,"wallClockTime",kr)||0)*1e3:(t=Qe(t,"wallClockTime",kn)||0,t=Sv(t)),n=new Date(t-u/n.timescale*1e3),u=n.getTime()/1e3,isNaN(u)||(o.o||o.ph(u),o=new Map().set("detail",{wallClockTime:t,programStartDate:n}),o=new Ie("prft",o),e.j.onEvent(o))}}function D5(e){function t(n){return n?(n=Jr(n),n.Hd=null,n.zc=null,n.Nc=Jh(n.Nc),n.zf=null,n):null}return e=Jr(e),e.sa=t(e.sa),e.qa=t(e.qa),e.L=t(e.L),e.na&&(e.na=Jr(e.na),e.na.node=null),e}function Qw(e){var t,n;return $(function(o){switch(o.g){case 1:return t=0,ce(o,2),D(o,ag(e),4);case 4:t=o.h,X(o,3);break;case 2:if(n=ie(o),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),o.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return o.return();e.j.onManifestUpdated(),fg(e,t),te(o)}})}function fg(e,t){if(!(e.K<0)){var n=e.K;e.g.updatePeriod>=0&&(n=e.g.updatePeriod),e.M.ka(Math.max(n-t,Si(e.Da)))}}function cg(e,t,n,o){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,tf:null,audioSamplingRate:null,ub:0,Ef:1,encrypted:!1},o=o||n.cb;var u=t.attributes.id,a=t.attributes.supplementalId,d=bt(t,"BaseURL"),p,g=!1;if(e.i)for(var y=R(d),w=y.next();!w.done;w=y.next()){var T=w.value;w=T.attributes.serviceLocation,T=Kn(T),w&&T&&(du(e.i,u,w,T),g=!0)}g&&e.i||(p=d.map(Kn));var M=e.i;e=t.attributes.contentType||n.contentType,y=t.attributes.mimeType||n.mimeType,w=Wp([t.attributes.codecs||n.codecs]).join(","),T=Qe(t,"frameRate",l4)||n.frameRate;var L=t.attributes.sar||n.pixelAspectRatio,P=O5(bt(t,"InbandEventStream"),n.emsgSchemeIdUris),N=bt(t,"AudioChannelConfiguration");N=N5(N)||n.tf;var O=Qe(t,"audioSamplingRate",kn)||n.audioSamplingRate;e||(e=tS(y,w));var F=Ft(t,"SegmentBase"),B=Ft(t,"SegmentTemplate"),V=F&&Qe(F,"availabilityTimeOffset",df)||0,Y=B&&Qe(B,"availabilityTimeOffset",df)||0,J=d&&d.length&&Qe(d[0],"availabilityTimeOffset",df)||0;V=n.ub+J+V+Y,Y=null,(J=Ft(t,"SegmentSequenceProperties"))&&(J=Qe(J,"cadence",hr))&&(Y=J),J=t.attributes.label;var H=bt(t,"Label");return H&&H.length&&(H=H[0],nn(H)&&(J=nn(H))),{cb:function(){return wn(o(),d.length?M&&g?ua(M,u):p||[]:[])},Hd:F||n.Hd,zc:Ft(t,"SegmentList")||n.zc,Nc:B||n.Nc,zf:Ft(t,"ProducerReferenceTime")||n.zf,width:Qe(t,"width",kn)||n.width,height:Qe(t,"height",kn)||n.height,contentType:e,mimeType:y,codecs:w,frameRate:T,pixelAspectRatio:L,emsgSchemeIdUris:P,id:a||u,originalId:u,language:t.attributes.lang,tf:N,audioSamplingRate:O,ub:V,bf:null,Ef:Y||n.Ef,label:J||null,encrypted:!1}}function O5(e,t){t=t.slice(),e=R(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function N5(e){e=R(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=t.attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(t,10),!t)continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],t=parseInt(t,16),!t)continue;for(var o=0,u=0;u<n.length;u++)t&1<<u&&(o+=n[u]);if(o)return o;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),t=parseInt(t,16),!t)continue;for(u=o=0;u<n.length;u++)t&1<<u&&(o+=n[u]);if(o)return o;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&t>0&&t<n.length)return n[t]}}return null}function U5(e){var t=e.Hd?1:0;return t+=e.zc?1:0,t+=e.Nc?1:0,t==0?e.contentType==lt||e.contentType=="application":(t!=1&&(e.Hd&&(e.zc=null),e.Nc=null),!0)}function Zw(e,t,n,o){var u,a,d,p,g,y,w;return $(function(T){if(T.g==1)return u=[Wn(n)],a=wn(t(),u),d=un(a,e.g.retryParameters),d.method=o,p=e.j.networkingEngine.request(4,d,{isPreload:e.oa()}),Ho(e.R,p),D(T,p.promise,2);if(g=T.h,o=="HEAD"){if(!g.headers||!g.headers.date)return T.return(0);y=g.headers.date}else y=Ht(g.data);return w=Date.parse(y),isNaN(w)?T.return(0):T.return(w-Date.now())})}function B5(e,t,n){var o,u,a,d,p,g,y,w;return $(function(T){switch(T.g){case 1:o=n.map(function(M){return{scheme:M.attributes.schemeIdUri,value:M.attributes.value}}),u=e.g.dash.clockSyncUri,!o.length&&u&&o.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),a=R(o),d=a.next();case 2:if(d.done){T.A(4);break}switch(p=d.value,ce(T,5),g=p.scheme,y=p.value,g){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return T.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return T.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return w=Date.parse(y),T.return(isNaN(w)?0:w-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":st("NTP UTCTiming scheme is not supported");break;default:st("Unrecognized scheme in UTCTiming element",g)}T.A(9);break;case 7:return D(T,Zw(e,t,y,"HEAD"),10);case 10:return T.return(T.h);case 8:return D(T,Zw(e,t,y,"GET"),11);case 11:return T.return(T.h);case 9:X(T,3);break;case 5:ie(T);case 3:d=a.next(),T.A(2);break;case 4:return st("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),T.return(0)}})}function F5(e,t,n,o,u){var a=o.attributes.schemeIdUri||"",d=o.attributes.value||"",p=Qe(o,"timescale",kn)||1,g=Qe(o,"presentationTimeOffset",kn)||0;o=R(bt(o,"Event"));for(var y=o.next();!y.done;y=o.next()){y=y.value;var w=Qe(y,"presentationTime",kn)||0,T=Qe(y,"duration",kn)||0;w=Math.max((w-g)/p+t,t),T=w+T/p,n!=null&&(w=Math.min(w,t+n),T=Math.min(T,t+n)),T<u||(y={schemeIdUri:a,value:d,startTime:w,endTime:T,id:y.attributes.id||"",timescale:p,eventElement:e1(y),eventNode:Jh(y)},e.j.onTimelineRegionAdded(y))}}function eS(e,t,n,o,u){var a,d,p,g;return $(function(y){return y.g==1?(a=Di,d=u?0:1,p=Ol(t,n,o,e.g.retryParameters),D(y,dg(e,p,a,{type:d}),2)):(g=y.h,y.return(g.data))})}function tS(e,t){return t=en(e,t),dl(t)?lt:e.split("/")[0]}function dg(e,t,n,o){return o||(o={}),o.isPreload=e.oa(),t=e.j.networkingEngine.request(n,t,o),Ho(e.R,t),t.promise}function j5(e){var t=e.l.je;if(!e.l.pf||!t||!e.H.length)return[];var n=Date.now()/1e3,o=e.H.filter(function(u){return u=kn(u.attributes.ttl),!u||t+u>n}).map(Kn).filter(no);return o.length?wn(e.B,o):[]}be("shaka.dash.DashParser",Jc),Xo("application/dash+xml",function(){return new Jc}),Xo("video/vnd.mpeg.dash.mpd",function(){return new Jc});function Zc(){}be("shaka.dependencies",Zc),Zc.has=function(e){return hg.has(e)},Zc.add=function(e,t){if(!iS[e])throw Error(e+" is not supported");e==nS?yt("mux.js","mux.js is no longer used in Shaka Player."):hg.set(e,function(){return t})};var nS="muxjs",iS={Hm:nS,ISOBoxer:"ISOBoxer"};Zc.Allowed=iS;var hg=new Map([["ISOBoxer",function(){return f.ISOBoxer}]]);function kt(){this.j=new re(function(){return["Oculus","Quest"].some(function(e){return navigator.userAgent.includes(e.toLowerCase())})?"VR":navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android"?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new re(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function mr(){var e=f.ManagedMediaSource||f.MediaSource;return!!(e&&e.isTypeSupported)}m=kt.prototype,m.cc=function(){return!!navigator.mediaCapabilities},m.Oa=function(){return this.j.value()},m.Ea=function(){return this.l.value()},m.Ed=function(){return!1},m.Gi=function(){return!1},m.cf=function(){return!1},m.Hi=function(){return!1},m.le=function(){return!1},m.fd=function(){return!0},m.Pc=function(){return!0},m.pe=function(){return!0},m.Mi=function(){return 0},m.jc=function(){return Promise.resolve({width:1/0,height:1/0})},m.Ui=function(){return!1},m.sh=function(){return!1},m.Wa=function(e){var t=this.Oa();return(t==="TV"||t==="CONSOLE"||t==="CAST")&&(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},m.yh=function(){return!!f.indexedDB},m.Ei=function(){return[]},m.sd=function(e){return f.matchMedia!==void 0&&f.matchMedia("(color-gamut: p3)").matches?e?"HLG":"PQ":"SDR"},m.aj=function(){return!1},m.si=function(){return!1},m.hh=function(){return!1},m.Kf=function(){return!0},m.ti=function(){return!1},m.$i=function(){return!0},m.ed=function(){return!1},m.Sg=function(e){return e==="com.apple.fps"},m.Jf=function(){return!0},m.toString=function(){return"Device: "+this.Ob()+" v"+this.za()+"; Type: "+this.Oa()};function pg(){kt.call(this),this.g=new re(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new re(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1?"xr"in navigator?"APPLE_VR":"MOBILE":"xr"in navigator?"APPLE_VR":"DESKTOP"})}U(pg,kt),m=pg.prototype,m.za=function(){return this.g.value()},m.Ob=function(){return"Apple Browser"},m.Oa=function(){return this.h.value()},m.Ea=function(){return"WEBKIT"},m.cc=function(){return!1},m.Ed=function(e,t){return t==="audio"},m.cf=function(){return!0},m.Hi=function(e){return e==="audio"},m.Wa=function(e){return kt.prototype.Wa.call(this,e),e.abr.minTimeToSwitch=.5,e},m.aj=function(){return!0},m.Jf=function(){return!1},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(fn=function(){return new pg});function gg(){if(!rS())throw Error("Not a Chromecast device!");kt.call(this),this.h=new re(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new re(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return e=e.toLowerCase(),e.includes("android")?oS:e.includes("fuchsia")?sS:mg})}U(gg,kt),m=gg.prototype,m.za=function(){return this.h.value()},m.Ob=function(){return"Chromecast with "+this.g.value()},m.Oa=function(){return"CAST"},m.Ea=function(){return"CHROMIUM"},m.cc=function(){return kt.prototype.cc.call(this)&&this.g.value()!==mg},m.Pc=function(){return this.g.value()!==mg},m.Mi=function(){switch(this.g.value()){case oS:return 0;case sS:return 3;default:return 1}},m.jc=function(){var e,t,n,o,u;return $(function(a){switch(a.g){case 1:if(e=f.cast&&cast.__platform__&&cast.__platform__.canDisplayType,t={width:1280,height:720},ce(a,2),!(n=e)){a.A(4);break}return D(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:n=a.h;case 4:if(n){t.width=3840,t.height=2160,a.A(6);break}if(!(o=e)){a.A(7);break}return D(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:o=a.h;case 7:o&&(t.width=1920,t.height=1080);case 6:X(a,3);break;case 2:u=ie(a),Rn("Failed to check canDisplayType:",u);case 3:return a.return(t)}})},m.Wa=function(e){return kt.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},m.yh=function(){return!1},m.ed=function(){return!0};function rS(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}var oS="Android",sS="Fuchsia",mg="Linux";rS()&&(fn=function(){return new gg});function yg(){kt.call(this);var e=this;this.i=new re(function(){var t=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return t?parseInt(t[2],10):null}),this.g=new re(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new re(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("win32"):!1}),this.u=new re(function(){return navigator.userAgent.match(/Edge?\//)?!e.h.value():!0}),this.o=new re(function(){return navigator.userAgent.includes("sony.hbbtv.tv")}),this.m=new re(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android":!!navigator.userAgent.includes("Android")})}U(yg,kt),m=yg.prototype,m.za=function(){return this.i.value()},m.Ob=function(){return this.g.value()},m.Ed=function(e){return hp(e)?this.g.value()==="Edge"&&this.h.value():!1},m.Gi=function(){return this.g.value()==="Edge"&&this.h.value()},m.cf=function(){return this.g.value()==="Edge"&&this.h.value()},m.Pc=function(){return this.u.value()},m.Wa=function(e){if(kt.prototype.Wa.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return this.m.value()&&(e.drm.defaultAudioRobustnessForWidevine="",e.drm.defaultVideoRobustnessForWidevine=""),e},m.hh=function(){return this.g.value()==="Edge"||this.o.value()},m.ed=function(){if(this.Ea()==="GECKO"){var e=this.za();return e!==null?e>=100:kt.prototype.ed.call(this)}return kt.prototype.ed.call(this)},m.Sg=function(e){return this.Ea()==="GECKO"?e.startsWith("com.microsoft.playready.recommendation"):kt.prototype.Sg.call(this,e)},xs=function(){return new yg};function vg(){kt.apply(this,arguments)}U(vg,kt),m=vg.prototype,m.za=function(){return null},m.Ob=function(){return"Hisense"},m.Oa=function(){return"TV"},m.cc=function(){return!1},m.jc=function(){var e={width:1920,height:1080},t=null;if(f.Hisense_Get4KSupportState)try{t=f.Hisense_Get4KSupportState()}catch{}return t==null&&(t=navigator.userAgent.includes("UHD")),t&&(e.width=3840,e.height=2160),Promise.resolve(e)},m.Wa=function(e){return kt.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(fn=function(){return new vg});function xg(){kt.call(this),this.g=new re(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}U(xg,kt),m=xg.prototype,m.Ob=function(){return"PlayStation"},m.Oa=function(){return"CONSOLE"},m.Ea=function(){return"WEBKIT"},m.za=function(){return this.g.value()},m.cc=function(){return!1},m.fd=function(){return!1},m.Pc=function(){return!1},m.sh=function(){return this.za()===4},m.jc=function(){var e,t,n,o,u;return $(function(a){switch(a.g){case 1:return e={width:1920,height:1080},t=!1,ce(a,2),D(a,f.msdk.device.getDisplayInfo(),4);case 4:n=a.h,t=n.resolution==="4K",X(a,3);break;case 2:return ie(a),ce(a,5),D(a,f.msdk.device.getDisplayInfoImmediate(),7);case 7:o=a.h,t=o.resolution==="4K",X(a,3);break;case 5:u=ie(a),st("PlayStation: Failed to get the display info:",u);case 3:return t&&(e.width=3840,e.height=2160),a.return(e)}})},m.Wa=function(e){return kt.prototype.Wa.call(this,e),this.za()===4&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},m.hh=function(){return this.za()===4},m.Kf=function(){return this.za()!==4},navigator.userAgent.includes("PlayStation")&&(fn=function(){return new xg});function wg(){kt.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}U(wg,kt),m=wg.prototype,m.za=function(){return this.g},m.Ob=function(){return"Tizen"},m.Ea=function(){return"CHROMIUM"},m.Oa=function(){return"TV"},m.Ed=function(){return!0},m.le=function(){return this.za()===3},m.cc=function(){return!1},m.fd=function(){var e=this.za();return e!==null?e>=4:kt.prototype.fd.call(this)},m.Pc=function(){return!1},m.pe=function(){return this.g&&this.h?this.g===5?this.h>=5:this.g>5:kt.prototype.pe.call(this)},m.jc=function(){var e=f.devicePixelRatio;e={width:f.screen.width*e>1920?3840:1920,height:f.screen.height*e>1080?2160:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var t=webapis.systeminfo.getMaxVideoResolution();e.width=t.width,e.height=t.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{st("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},m.Wa=function(e){return kt.prototype.Wa.call(this,e),e.drm.ignoreDuplicateInitData=this.za()!==2,this.za()===3&&(e.streaming.crossBoundaryStrategy="reset_to_encrypted"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},m.Ei=function(){var e=[];return this.g!==null&&this.g<5&&e.push("opus"),e},m.sd=function(e){try{if(webapis.avinfo.isHdrTvSupport())return e?"HLG":"PQ"}catch{return kt.prototype.sd.call(this,e)}return"SDR"},m.si=function(){return!0},m.ti=function(){return this.za()===3},navigator.userAgent.includes("Tizen")&&(fn=function(){return new wg});function pu(){kt.apply(this,arguments)}U(pu,kt),pu.prototype.za=function(){return null},pu.prototype.Ob=function(){return"Vizio"},pu.prototype.Oa=function(){return"TV"},pu.prototype.cc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(fn=function(){return new pu});function Sg(){kt.call(this),this.i=new re(function(){return navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")}),this.h=new re(function(){return navigator.userAgent.includes("SOPOpenBrowser")}),this.g=new re(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}U(Sg,kt),m=Sg.prototype,m.za=function(){return this.g.value()},m.Ob=function(){return"WebKit STB"},m.Oa=function(){return"TV"},m.Ea=function(){return"WEBKIT"},m.cc=function(){return!1},m.fd=function(){var e=this.g.value();return e!==null?e>=15:!0},m.Ed=function(){return this.h.value()},m.jc=function(){return Promise.resolve({width:f.screen.width*f.devicePixelRatio,height:f.screen.height*f.devicePixelRatio})},m.Kf=function(){return!this.i.value()},m.Jf=function(){return!1},(navigator.userAgent.includes("SOPOpenBrowser")||navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(fn=function(){return new Sg});function Tg(){kt.call(this);var e=this;this.h=$5(),this.g=null;try{var t=new PalmServiceBridge;t.onservicecallback=function(n){n=JSON.parse(n),e.g=n.sj["tv.model.supportHDR"]||n.sj["tv.config.supportDolbyHDRContents"]||!1},t.call("luna://com.webos.service.config/getConfigs",JSON.stringify({Em:["tv.model.supportHDR","tv.config.supportDolbyHDRContents"]}))}catch(n){st("WebOS: getConfigs call failed",n)}}U(Tg,kt),m=Tg.prototype,m.za=function(){return this.h},m.Ob=function(){return"WebOS"},m.Oa=function(){return"TV"},m.Ea=function(){return"CHROMIUM"},m.cc=function(){return!1},m.fd=function(){var e=this.za();return e!==null?e>3:kt.prototype.fd.call(this)},m.Pc=function(){var e=this.za();return e!==null?e>6:kt.prototype.Pc.call(this)},m.pe=function(){var e=this.za();return e!==null?e>3:kt.prototype.pe.call(this)},m.jc=function(){var e={width:1920,height:1080};try{var t=JSON.parse(f.PalmSystem.deviceInfo);e.width=Math.max(1920,t.screenWidth),e.height=Math.max(1080,t.screenHeight)}catch{st("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},m.Wa=function(e){return kt.prototype.Wa.call(this,e),this.za()===3&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e},m.sd=function(e){return this.g==null?(st("WebOS: getConfigs call haven't finished"),kt.prototype.sd.call(this,e)):this.g?e?"HLG":"PQ":"SDR"};function $5(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}if(m.$i=function(){return!1},m.ed=function(){var e=this.za();return e!==null?e>=6:kt.prototype.ed.call(this)},navigator.userAgent.includes("Web0S")){var z5=new Tg;fn=function(){return z5}}function Cg(){kt.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}U(Cg,kt),m=Cg.prototype,m.za=function(){return this.h},m.Ob=function(){return"Xbox"},m.Oa=function(){return"CONSOLE"},m.Ea=function(){return this.g?"EDGE":"CHROMIUM"},m.Ed=function(){return!0},m.cf=function(){return!0},m.Ui=function(){return this.g},m.jc=function(){var e={width:1920,height:1080},t=uS();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,o=t.Media.Protection.ProtectionCapabilityResult;t=null;do t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(t===o.maybe);t===o.probably&&(e.width=3840,e.height=2160)}catch{st("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},m.Wa=function(e){return kt.prototype.Wa.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},m.yh=function(){return!1};function uS(){var e=null;try{e=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows}catch{}return e}(navigator.userAgent.includes("Xbox One")||uS()!==null)&&(fn=function(){return new Cg});function lS(e,t,n){this.type=e,this.ha=t,this.segments=n||null}function ed(e,t,n,o){this.id=e,this.name=t,this.attributes=n,this.value=o===void 0?null:o}ed.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,o=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&o.unshift(this.value),o.length>0&&(n+=":"+o.join(",")),n};function aS(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function gu(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function Ne(e,t,n){return(e=gu(e,t))?e.value:n||null}function Pt(e,t){if(e=gu(e,t),!e)throw new q(2,4,4023,t);return e.value}function fS(e,t,n){n=n===void 0?[]:n,this.ha=t,this.g=e,this.vc=n}function td(e,t){this.name=e,this.value=t}function Fi(e,t){return e.filter(function(n){return n.name==t})}function cS(e,t){return e.filter(function(n){return Pt(n,"TYPE")==t})}function Tn(e,t){e=R(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function mu(e,t,n){return n=n===void 0?0:n,(e=Tn(e,t))?Number(e.value):n}function yo(e,t,n){return t?dS(e,[t],n):[]}function dS(e,t,n){if(!t.length)return[];var o=t;return n&&n.size&&(o=t.map(function(u){return hS(u,n)})),wn(e,o)}function hS(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=R(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var u=o.slice(2,o.length-1),a=t.get(u);if(a)e=e.replace(o,a);else throw new q(2,4,4039,u)}}return e}function V5(){this.g=0}function bg(e,t){t=Ht(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new q(2,4,4015);t=0;for(var o=!0,u=R(n),a=u.next();!a.done;a=u.next())if(a=a.value,/^#(?!EXT)/m.test(a)||o)o=!1;else if(a=kg(e,a),--e.g,pS.includes(a.name)){t=1;break}else a.name=="EXT-X-STREAM-INF"&&(o=!0);for(u=[],o=!0,a=0;a<n.length;a++){var d=n[a],p=n[a+1];if(/^#(?!EXT)/m.test(d)||o)o=!1;else{if(d=kg(e,d),H5.includes(d.name)){if(t!=1)throw new q(2,4,4017);d=n.splice(a,n.length-a),n=[],o=[],a=[],p=null,d=R(d);for(var g=d.next();!g.done;g=d.next())g=g.value,/^(#EXT)/.test(g)?(g=kg(e,g),pS.includes(g.name)?u.push(g):g.name=="EXT-X-MAP"?p=g:g.name=="EXT-X-PART"?a.push(g):g.name=="EXT-X-PRELOAD-HINT"?Ne(g,"TYPE")=="PART"?a.push(g):Ne(g,"TYPE")=="MAP"&&(g.name="EXT-X-MAP",p=g):o.push(g)):/^#(?!EXT)/m.test(g)||(g=g.trim(),p&&o.push(p),n.push(new fS(g,o,a)),o=[],a=[]);return a.length&&(p&&o.push(p),n.push(new fS("",o,a))),new lS(t,u,n)}u.push(d),d.name=="EXT-X-STREAM-INF"&&(d.attributes.push(new td("URI",p)),o=!0)}}return new lS(t,u)}function kg(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new q(2,4,4016,t);t=n[1];var o=n[2];n=[];var u;if(o){o=new ks(o);var a;(a=No(o,/^([^,=]+)(?:,|$)/g))&&(u=a[1]);for(var d=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=No(o,d);)n.push(new td(a[1],a[2]||a[3])),As(o)}return new ed(e,t,n,u)}var pS="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),H5="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");function gS(){}function mS(e,t){try{var n=nd(e);return Ds({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(o){return io(o)}}function nd(e){var t=e.split(":");if(t.length<2||t[0]!="data")throw new q(2,1,1004,e);if(t=t.slice(1).join(":").split(","),t.length<2)throw new q(2,1,1004,e);var n=t[0];e=f.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var o=!1;t.length>1&&t[t.length-1]=="base64"&&(o=!0,t.pop());var u;return o?u=Li(e):u=Xi(e),{data:u,contentType:n}}be("shaka.net.DataUriPlugin",gS),gS.parse=mS,Mr("data",mS);function id(){var e=this;this.g=this.h=null,this.G=1,this.B=new Map,this.M=new Map,this.C=new Map,this.C.set("video",new Map),this.C.set("audio",new Map),this.C.set(lt,new Map),this.C.set("image",new Map),this.uc=new Map().set("com.apple.streamingkeydelivery",function(t,n,o){return vM(e,t,n,o)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(t){var n=Pt(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var o="cenc";n=="SAMPLE-AES"&&(o="cbcs");var u=Pt(t,"URI");n=nd(u.split("?")[0]),u=u.split("?")[0],e.I.has(u)||(n=et(n.data),e.I.set(u,n)),o=Cr("com.widevine.alpha",o,[{initDataType:"cenc",initData:e.I.get(u)}]),(t=Ne(t,"KEYID"))&&o.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(o)}else t=Promise.resolve(null);return t}).set("com.microsoft.playready",function(t){var n=Pt(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var o="cenc";n=="SAMPLE-AES"&&(o="cbcs"),t=Pt(t,"URI"),t=nd(t.split("?")[0]),t=et(t.data),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),n=Of(t,n,new Set,0),o=Cr("com.microsoft.playready",o,[{initDataType:"cenc",initData:n}]),(t=Bo(["<PLAYREADY>",Sr(t),"</PLAYREADY>"].join(`
`)))&&(o.licenseServerUri=Gc(t)),o=Promise.resolve(o)}else o=Promise.resolve(null);return o}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(t){var n=Pt(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var o="cenc";n=="SAMPLE-AES"&&(o="cbcs");var u=Pt(t,"URI");n=nd(u.split("?")[0]),u=u.split("?")[0],e.I.has(u)||(n=et(n.data),e.I.set(u,n)),o=Cr("com.huawei.wiseplay",o,[{initDataType:"cenc",initData:e.I.get(u)}]),(t=Ne(t,"KEYID"))&&o.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(o)}else t=Promise.resolve(null);return t}),this.ob=new Set,this.i=new Map,this.l=null,this.H="",this.Ta=new V5,this.N=-1,this.ma=1/0,this.ba=this.yc=this.kb=!1,this.F=new dt(function(){if(e.X&&!e.g.continueLoadingWhenPaused&&(e.V.Ma(e.X,"timeupdate"),e.X.paused)){e.V.Aa(e.X,"timeupdate",function(){return US(e)});return}US(e)}),this.Ga=ld,this.m=null,this.ib=0,this.o=1/0,this.ab=this.Sa=this.S=0,this.$=new Os,this.J=new Map,this.K=new Map,this.Da=new Map,this.wa=new Map,this.O=new Map,this.xa=new Map,this.ya=new Map,this.xc=this.oa=!1,this.Zb=new Gi(5),this.j=null,this.R=!0,this.V=new Le,this.u=this.X=null,this.ac=function(){return!1},this.I=new Map}m=id.prototype,m.configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.ac=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.W()&&this.F.Kb()},m.start=function(e,t){var n=this,o;return $(function(u){return u.g==1?(n.h=t,n.oa=t.isLowLatencyMode(),D(u,Pg(n,[e]).promise,2)):u.g!=3?(o=u.h,n.H=o.uri,D(u,W5(n,o.data),3)):u.return(n.m)})},m.stop=function(){this.F&&(this.F.stop(),this.F=null);var e=[];return this.$&&(e.push(this.$.destroy()),this.$=null),this.g=this.h=null,this.ob.clear(),this.m=null,this.i.clear(),this.M.clear(),this.K.clear(),this.B.clear(),this.Da.clear(),this.wa.clear(),this.O.clear(),this.xa.clear(),this.ya.clear(),this.I.clear(),this.j&&this.j.destroy(),this.V&&(this.V.release(),this.V=null),Promise.all(e)},m.update=function(){var e=this,t,n,o,u,a,d,p,g,y,w,T,M;return $(function(L){if(L.g==1){if(!zn(e))return L.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,o=n.filter(function(P){return P.stream.segmentIndex}),u=R(o),a=u.next();!a.done;a=u.next())d=a.value,t.push(G5(e,d));return D(L,Promise.all(t),2)}for(bS(e,o.map(function(P){return P.stream})),p=o.some(function(P){return P.Wd==0}),o.length&&!p&&(g=CM,sd(e,g.ij),y=o.map(function(P){return P.qc}),e.l.rb(Math.min.apply(Math,le(y))),e.h.updateDuration()),p&&Eg(e),w=R(o),T=w.next();!T.done;T=w.next())M=T.value,M.stream.isAudioMuxedInVideo||!M.stream.segmentIndex||rr(M.stream.segmentIndex)||e.h.disableStream(M.stream);te(L)})};function Ag(e,t){return zn(e)?e.C.get(t.type):t.lf}function G5(e,t){var n,o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye,ae,he,Te,ke,Ke,Re,pt;return $(function(ht){switch(ht.g){case 1:if(t.stream.isAudioMuxedInVideo)return ht.return();for(n=[],o=R(t.P()),u=o.next();!u.done;u=o.next())a=u.value,d=new Qt(a),p=d.g,t.Qe&&(t.Rb>=0&&p.add("_HLS_msn",String(t.Rb)),t.Sb>=0&&p.add("_HLS_part",String(t.Sb))),t.Re&&p.add("_HLS_skip","YES"),Uy(p)&&_o(d,ws(p.toString())),n.push(d.toString());return ce(ht,2),D(ht,Pg(e,n,!0).promise,4);case 4:g=ht.h,X(ht,3);break;case 2:throw y=ie(ht),e.h&&e.h.disableStream(t.stream),y;case 3:if(!t.stream.segmentIndex)return ht.return();if(w=bg(e.Ta,g.data),w.type!=1)throw new q(2,4,4017);return T=g.uri,T==g.originalUri||t.P().includes(T)||t.Af.push(T),M=Fi(w.ha,"EXT-X-DEFINE"),L=Ig(e,M,T),P=t.stream,N=Ag(e,t),D(ht,IS(e,w,P.mimeType,t.P,L),5);case 5:for(O=ht.h,F=O.keyIds,B=O.drmInfos,V=O.encrypted,Y=O.Mh,P.encrypted||!V||Y||(P.encrypted=!0),J=function(At,ut){return At.size===ut.size&&[].concat(le(At)).every(function(tt){return ut.has(tt)})},J(P.keyIds,F)||(P.keyIds=F,P.drmInfos=B,e.h.newDrmInfo(P)),H=DS(e,w,N,L,t.P,t.type),z=H.segments,(Q=H.bandwidth)&&(P.bandwidth=Q),ee=Jf(P),se=R(z),fe=se.next();!fe.done;fe=se.next())ne=fe.value,ne.aa&&(ne.aa.xd=ee);P.segmentIndex.ee(z,e.l.Ib()),z.length&&(xe=mu(w.ha,"EXT-X-MEDIA-SEQUENCE",0),ae=(ye=Tn(w.ha,"EXT-X-SKIP"))?Number(Ne(ye,"SKIPPED-SEGMENTS")):0,he=AS(xe,z),Te=he.Rb,ke=he.Sb,t.Rb=Te+ae,t.Sb=ke,Ke=N.get(xe),P.segmentIndex.Ya(Ke)),(Re=rr(P.segmentIndex))&&(t.Wc=Re.startTime,pt=z[z.length-1],t.qc=pt.endTime),Tn(w.ha,"EXT-X-ENDLIST")&&(t.Wd=!0),Rg(e,w),_g(e,w.ha,P.type,L,t.P),te(ht)}})}m.onExpirationUpdated=function(){},m.onInitialVariantChosen=function(){},m.banLocation=function(e){this.j&&this.j.banLocation(e)},m.setMediaElement=function(e){this.X=e};function yS(e,t,n){n=n===void 0?!1:n;for(var o=e.N==-1,u=R(t),a=u.next();!a.done;a=u.next()){a=a.value;var d=a.stream.segmentIndex,p=Ag(e,a);if(d=rr(d)){p=R(p);for(var g=p.next();!g.done;g=p.next()){g=R(g.value);var y=g.next().value;if(g.next().value==d.startTime){o&&(e.N=Math.max(e.N,y)),a.og=y;break}}}}if(!(e.N<0))for(t=R(t),o=t.next();!o.done;o=t.next())o=o.value,(da(e,o.type)||n)&&(u=o.stream.segmentIndex)&&(a=e.N-o.og,a>0&&(u.g.splice(0,a),u=rr(u))&&(u=-u.startTime,o.stream.segmentIndex.offset(u),vS(e,o,u)))}function X5(e,t){if(e.ma==1/0){t=R(t);for(var n=t.next();!n.done;n=t.next())n=rr(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.ma=Math.min(e.ma,n.h))}if(t=e.ma,t!=1/0){n=R(e.i.values());for(var o=n.next();!o.done;o=n.next())if(o=o.value,!da(e,o.type)){var u=o.stream.segmentIndex;if(u!=null){var a=rr(u);if(a)if(a.h==null)Rn("Missing EXT-X-PROGRAM-DATE-TIME for stream",o.P(),"Expect AV sync issues!");else for(vS(e,o,a.h-t-a.startTime),o=R(u),u=o.next();!u.done;u=o.next())u.value.Ah(t)}}}}function vS(e,t,n){if(!(Math.abs(n)<.001)){t.Wc+=n,t.qc+=n,e=Ag(e,t);for(var o=R(e),u=o.next();!u.done;u=o.next()){var a=R(u.value);u=a.next().value,a=a.next().value,e.set(u,a+n)}t.P()}}function W5(e,t){var n,o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye,ae,he,Te,ke,Ke,Re,pt,ht,At,ut,tt,Et,at,rt;return $(function(ct){switch(ct.g){case 1:return n=cn,o=bg(e.Ta,t),u=Fi(o.ha,"EXT-X-DEFINE"),a=[],d=[],p=[],e.l=new Ye(null,0),e.l.cd(!0),g=function(){return[e.H]},y=null,w=new Map,o.type==1?(e.R=!1,Te=Fi(o.ha,"EXT-X-DEFINE"),w=Ig(e,Te,e.H),y=n.Ca,ke="",Ke=new Map,D(ct,kS(e,e.G++,w,o,g,"",y,ke,!0,"Media Playlist",null,Ke,null,!1,null,!1),7)):(Y5(e,u),T=Fi(o.ha,"EXT-X-MEDIA"),M=Fi(o.ha,"EXT-X-STREAM-INF"),L=Fi(o.ha,"EXT-X-IMAGE-STREAM-INF"),P=Fi(o.ha,"EXT-X-I-FRAME-STREAM-INF"),N=Fi(o.ha,"EXT-X-SESSION-KEY"),O=Fi(o.ha,"EXT-X-SESSION-DATA"),F=Fi(o.ha,"EXT-X-CONTENT-STEERING"),J5(e,O),D(ct,Q5(e,F),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(B=[],V=R(M),Y=V.next(),J={};!Y.done;J={Yi:void 0},Y=V.next())H=Y.value,(z=Ne(H,"SUPPLEMENTAL-CODECS"))&&(J.Yi=z.split(/\s*,\s*/).map(function(Xt){return Xt.split("/")[0]}),Q=H.attributes.map((function(Xt){return function(Vt){var Wt=Vt.name,yn=Vt.value;return Wt=="CODECS"&&(yn=Xt.Yi.join(","),Vt=Vt.value.split(","),Vt.length>1&&(Vt=ei("audio",Vt))&&(yn+=","+Vt)),new td(Wt,yn)}})(J)),B.push(new ed(H.id,H.name,Q,null)));for(M.push.apply(M,le(B)),ee=[],se=R(P),fe=se.next(),ne={};!fe.done;ne={Zi:void 0},fe=se.next())xe=fe.value,(ye=Ne(xe,"SUPPLEMENTAL-CODECS"))&&(ne.Zi=ye.split(/\s*,\s*/).map(function(Xt){return Xt.split("/")[0]}),ae=xe.attributes.map((function(Xt){return function(Vt){var Wt=Vt.name;return Vt=Vt.value,Wt=="CODECS"&&(Vt=Xt.Zi.join(",")),new td(Wt,Vt)}})(ne)),ee.push(new ed(xe.id,xe.name,ae,null)));P.push.apply(P,le(ee))}return q5(e,M),fM(e,T),he=nM(e,P),D(ct,iM(e,M,N,T,g,e.B,he),5);case 5:return a=ct.h,d=Z5(e,T),D(ct,eM(e,L,P),6);case 6:p=ct.h,ct.A(3);break;case 7:Re=ct.h,e.i.set(e.H,Re),Re.stream&&(pt=Jf(Re.stream),Re.stream.segmentIndex.Gb(function(Xt){Xt.aa&&(Xt.aa.xd=pt)})),y=Re.stream.type,ht=!0,(e.g.disableAudio&&Re.type=="audio"||e.g.disableVideo&&Re.type=="video"&&!Re.stream.codecs.includes(","))&&(ht=!1),ht&&a.push({id:0,language:St(ke||"und"),disabledUntilTime:0,primary:!0,audio:Re.type=="audio"?Re.stream:null,video:Re.type=="video"?Re.stream:null,bandwidth:Re.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new q(2,7,7001);if(RS(e,o),o.type==1&&(zn(e)&&(_S(e,o),At=e.o,e.F.ka(At)),ut=Array.from(e.i.values()),Mg(e,ut),Eg(e),_g(e,o.ha,y,w,g)),e.m={presentationTimeline:e.l,variants:a,textStreams:d,imageStreams:p,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.u},e.ba||!e.g.hls.disableCodecGuessing){ct.A(8);break}for(tt=[],Et=R(e.m.variants),at=Et.next();!at.done;at=Et.next())rt=at.value,rt.audio&&rt.audio.codecs===""&&tt.push(rt.audio.createSegmentIndex()),rt.video&&rt.video.codecs===""&&tt.push(rt.video.createSegmentIndex());return D(ct,Promise.all(tt),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),te(ct)}})}function K5(e,t){var n,o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V;return $(function(Y){if(Y.g==1)return n=Xp(e.g.hls.mediaPlaylistFullMimeType),t.length?(o=OS(e,t),u=o.segment,a=o.segmentIndex,d=u.P(),p=d[0],g=new Qt(p),y=g.qb.split(".").pop(),(w=Dg.get(y))?Y.return(Xp(w)):D(Y,Promise.all([xS(e,u.aa,0),xS(e,u,a)]),2)):Y.return(n);if(T=Y.h,M=T[1].mimeType,L=T[0].data,P=T[1].data,N="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),O=["audio/mp4","video/mp4","video/iso.segment"],F=u.aa||O.includes(M),!F&&Xs(et(P))){var J=P,H=e.g.disableAudio,z=e.g.disableVideo,Q=e.g.disableText,ee=et(J),se=new Nt().parse(ee),fe=se.Td();ee=se.Kg();var ne=[],xe=!1,ye=!1;if(!H)switch(fe.audio){case"aac":case"aac-loas":se.xb().length&&(ne.push("mp4a.40.2"),xe=!0);break;case"mp3":se.xb().length&&(ne.push("mp4a.40.34"),xe=!0);break;case"ac3":se.xb().length&&(ne.push("ac-3"),xe=!0);break;case"ec3":se.xb().length&&(ne.push("ec-3"),xe=!0);break;case"opus":se.xb().length&&(ne.push("opus"),xe=!0)}if(!z)switch(fe.video){case"avc":ee.codec?ne.push(ee.codec):ne.push("avc1.42E01E"),ye=!0;break;case"hvc":ee.codec?ne.push(ee.codec):ne.push("hvc1.1.6.L93.90"),ye=!0;break;case"av1":ne.push("av01.0.01M.08"),ye=!0}if(ne.length){if(H=xe&&!ye,z=new Map,ye&&!Q){for(Q=new nr("video/mp2t"),Q.xf(J),J=R(Q.Vf()),ye=J.next();!ye.done;ye=J.next())ye=ye.value,z.set(ye,ye);Q.Ld()}ee={type:H?"audio":"video",mimeType:"video/mp2t",codecs:ne.join(", "),language:null,height:ee.height,width:ee.width,channelCount:null,sampleRate:null,closedCaptions:z,ue:null,colorGamut:null,frameRate:ee.frameRate}}else ee=null;if(B=ee)return Y.return(B)}else if((F||N.includes(y))&&(V=tA(L,P,e.g.disableText)))return Y.return(V);return M?Y.return(Xp(M)):Y.return(n)})}function xS(e,t,n){var o,u,a,d,p,g;return $(function(y){switch(y.g){case 1:return t?(o=Di,u=Ol(t.P(),t.Jc(),t.Gc(),e.g.retryParameters),a=t instanceof Ve?1:0,D(y,zr(e,u,o,{type:a}).promise,2)):y.return({mimeType:null,data:null});case 2:if(d=y.h,p=d.data,!t.aesKey){y.A(3);break}return D(y,Kp(p,t.aesKey,n),4);case 4:p=y.h;case 3:return t instanceof Ve?t.me(p,!0):t.me(p),(g=d.headers["content-type"])&&(g=g.split(";")[0].toLowerCase()),y.return({mimeType:g,data:p})}})}function Eg(e){if(zn(e)){if(e.Ga==ad){for(var t=1/0,n=1/0,o=R(e.i.values()),u=o.next();!u.done;u=o.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&!u.stream.isAudioMuxedInVideo&&(t=Math.min(t,u.qc),n=Math.min(n,u.Wc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Hf(t)}}else e.l.rb(CS(e));if(!e.l.o)for(t=R(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=rr(n.stream.segmentIndex))&&n.h&&e.l.ph(n.h);e.l.kf()}function Y5(e,t){var n=new Qt(e.H).g;t=R(t);for(var o=t.next();!o.done;o=t.next()){var u=o.value;o=Ne(u,"NAME");var a=Ne(u,"VALUE");u=Ne(u,"QUERYPARAM"),o&&a&&(e.B.has(o)||e.B.set(o,a)),u&&(o=n.get(u)[0])&&!e.B.has(o)&&e.B.set(u,o)}}function Ig(e,t,n){n=new Qt(n).g;var o=new Map;t=R(t);for(var u=t.next();!u.done;u=t.next()){var a=u.value,d=Ne(a,"NAME"),p=Ne(a,"VALUE");u=Ne(a,"QUERYPARAM"),a=Ne(a,"IMPORT"),d&&p&&(o.has(d)||o.set(d,p)),u&&(d=n.get(u)[0])&&!o.has(d)&&o.set(u,d),a&&(u=e.B.get(a))&&o.set(a,u)}return o}function q5(e,t){t=R(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value,u=Ne(o,"AUDIO");n=Ne(o,"VIDEO");var a=Ne(o,"SUBTITLES");if(o=wS(e,o),a){var d=ei(lt,o);e.K.set(a,d),Ue(o,d)}u&&(a=ei("audio",o),a||(a=e.g.hls.defaultAudioCodec),e.K.set(u,a)),n&&(u=ei("video",o),u||(u=e.g.hls.defaultVideoCodec),e.K.set(n,u))}}function J5(e,t){t=R(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value,u=Ne(o,"DATA-ID");n=Ne(o,"URI");var a=Ne(o,"LANGUAGE");o=Ne(o,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",yo([e.H],n,e.B)[0]),a&&u.set("language",a),o&&u.set("value",o),n=new Ie("sessiondata",u),e.h&&e.h.onEvent(n)}}function Q5(e,t){var n,o,u,a,d,p;return $(function(g){if(!e.h||!e.g)return g.return();for(o=R(t),u=o.next();!u.done;u=o.next())if(a=u.value,d=Ne(a,"PATHWAY-ID"),p=Ne(a,"SERVER-URI"),d&&p){e.j=new cu(e.h),e.j.configure(e.g),e.j.i=[e.H],e.j.setManifestType("HLS"),e.j.h=d,n=sa(e.j,p);break}return D(g,n,0)})}function Z5(e,t){var n=cS(t,"SUBTITLES");t=n.map(function(d){if(e.g.disableText)return null;try{return SS(e,[d],new Map).stream}catch(p){if(e.g.hls.ignoreTextStreamFailures)return null;throw p}}),n=R(n);for(var o=n.next();!o.done;o=n.next()){var u=Pt(o.value,"GROUP-ID");if((o=e.K.get(u))&&(u=e.M.get(u))){u=R(u);for(var a=u.next();!a.done;a=u.next())a=a.value,a.stream.codecs=o,a.stream.mimeType=Lg(lt,o)||od(lt),yu(a.stream)}}return t.filter(function(d){return d})}function yu(e){var t=new Set([en(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Gb(function(n){n.mimeType&&t.add(en(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function eM(e,t,n){var o,u;return $(function(a){return a.g==1?(o=t.map(function(d){var p,g;return $(function(y){if(y.g==1)return e.g.disableThumbnails?y.return(null):(ce(y,2),D(y,cM(e,d),4));if(y.g!=2)return p=y.h,y.return(p.stream);if(g=ie(y),e.g.hls.ignoreImageStreamFailures)return y.return(null);throw g})}).concat(n.map(function(d){if(e.g.disableThumbnails)return null;try{var p=TS(e,d);return p.stream.type!=="image"?null:p.stream}catch(g){if(e.g.hls.ignoreImageStreamFailures)return null;throw g}})),D(a,Promise.all(o),2)):(u=a.h,a.return(u.filter(function(d){return d})))})}function tM(e,t,n){t=t.filter(function(p){var g=Ne(p,"URI")||"";return p=Ne(p,"TYPE"),p!="SUBTITLES"&&(g!=""||p=="AUDIO")});var o={};t=R(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var a=aS(u,!e.j);o[a]?o[a].push(u):o[a]=[u]}for(var d in o)SS(e,o[d],n,!1)}function nM(e,t){return t.map(function(n){return n=TS(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function iM(e,t,n,o,u,a,d){var p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye,ae,he,Te,ke,Ke,Re,pt,ht,At,ut,tt,Et;return $(function(at){switch(at.g){case 1:if(p=[],g=new Set,e.g.ignoreDrmInfo||!(n.length>0)){at.A(2);break}y=R(n),w=y.next();case 3:if(w.done){at.A(2);break}if(T=w.value,M=Pt(T,"METHOD"),L=Ne(T,"KEYFORMAT")||"identity",P=null,M=="NONE"){at.A(4);break}if(ud(M)){N=yo(u(),Pt(T,"URI"),a),O=N.sort().join(""),e.O.has(O)||(F=un(N,e.g.retryParameters),B=zr(e,F,6).promise,e.O.set(O,B)),at.A(4);break}if(L=="identity")return D(at,BS(e,T,"",u,null,a),12);if(V=e.uc.get(L),!V){Y=null,at.A(10);break}return D(at,V(T,"",null),11);case 11:Y=at.h;case 10:P=Y,at.A(6);break;case 12:P=at.h;case 6:if(P){if(P.keyIds)for(J=R(P.keyIds),H=J.next();!H.done;H=J.next())z=H.value,g.add(z);p.push(P)}case 4:w=y.next(),at.A(3);break;case 2:for(Q={},ee=R(t),se=ee.next();!se.done;se=ee.next())fe=se.value,ne=aS(fe,!e.j),Q[ne]?Q[ne].push(fe):Q[ne]=[fe];xe=[];for(ye in Q)ae=Q[ye],he=ae[0],Te=Ne(he,"FRAME-RATE"),ke=Number(Ne(he,"AVERAGE-BANDWIDTH"))||Number(Pt(he,"BANDWIDTH")),Ke=Ne(he,"RESOLUTION"),Re=R(Ke?Ke.split("x"):[null,null]),pt=Re.next().value,ht=Re.next().value,At=Ne(he,"VIDEO-RANGE"),(ut=Ne(he,"REQ-VIDEO-LAYOUT"))&&ut.includes(",")&&(tt=ut.split(",").filter(function(rt){return rt=="CH-STEREO"||rt=="CH-MONO"}),ut=tt[0]),ut=ut||"CH-MONO",Et=rM(e,ae,o),xe.push.apply(xe,le(aM(e,Et.audio,Et.video,ke,pt,ht,Te,At,ut,p,g,d)));return at.return(xe.filter(function(rt){return rt!=null}))}})}function rM(e,t,n){for(var o={audio:[],video:[]},u=new Map,a=[],d=!1,p=!1,g=R(t),y=g.next();!y.done;y=g.next()){var w=y.value;y=Ne(w,"AUDIO");var T=Ne(w,"VIDEO"),M=y||T;M&&(a.includes(M)||a.push(M),(w=Ne(w,"PATHWAY-ID"))&&u.set(M,w),y?d=!0:T&&(p=!0))}a.length&&n.length&&(n=n.filter(function(P){return a.includes(Pt(P,"GROUP-ID"))}),tM(e,n,u)),n=(u=a.sort().join(","))&&e.M.has(u)?e.M.get(u):[],d?o.audio.push.apply(o.audio,le(n)):p&&o.video.push.apply(o.video,le(n)),p=!1;var L=t.map(function(P){return Pt(P,"URI")});return d=o.audio.find(function(P){return P&&P.P().find(function(N){return L.includes(N)})}),n=wS(e,t[0]),g=ei("video",n),(y=ei("audio",n))&&!g?(d="audio",p=o.audio.length>0&&!o.audio.some(function(P){return P.stream.isAudioMuxedInVideo})):!o.audio.length&&!o.video.length&&y&&g?(d="video",n=[[g,y].join()]):o.audio.length&&d?(d="audio",p=!0):d=o.video.length&&!o.audio.length?"audio":"video",p||(t=dM(e,t,n,d),u&&e.g.enableAudioGroups&&(t.stream.groupId=u),t.stream.type=="audio"&&d==="audio"&&o.audio.some(function(P){return P.stream.isAudioMuxedInVideo})&&(e=o.audio[0].stream,t.stream.language=e.language,t.stream.channelsCount=e.channelsCount,t.stream.label=e.label,t.stream.audioSamplingRate=e.audioSamplingRate,t.stream.originalId=e.originalId,t.stream.originalLanguage=e.originalLanguage),o[t.stream.type]=[t]),o}function wS(e,t){return t=Ne(t,"CODECS")||"",e.ba=t.length>0,e.ba||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),Wp(t.split(/\s*,\s*/))}function oM(e){return(e=Ne(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function sM(e){return(e=Ne(e,"SAMPLE-RATE"))?parseInt(e,10):null}function uM(e){return e=Ne(e,"CHANNELS"),e?(e=e.split("/"),e.length!=2?!1:e[1]==="JOC"||e[1].includes("ATMOS")):!1}function lM(e){return e=Pt(e,"TYPE").toLowerCase(),e=="subtitles"&&(e=lt),e}function aM(e,t,n,o,u,a,d,p,g,y,w,T){for(var M=R(n),L=M.next();!L.done;L=M.next())NS(L.value.stream,u,a,d,p,g,null);for(u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u&&(t=t.filter(function(F){return!F.stream.isAudioMuxedInVideo})),u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=[],t=R(t),a=t.next();!a.done;a=t.next())for(a=a.value,d=R(n),p=d.next();!p.done;p=d.next()){var P=p.value;(p=a?a.stream:null)&&(p.drmInfos=y,p.keyIds=w),(g=P?P.stream:null)&&(g.drmInfos=y,g.keyIds=w,e.g.disableIFrames||T1(g,T)),g&&!p&&(g.bandwidth=o),!g&&p&&(p.bandwidth=o),M=a?a.stream.drmInfos:null,L=P?P.stream.drmInfos:null,P=P?P.P().sort().join(","):"";var N=a?a.P().sort().join(","):"",O=[];p&&p.codecs&&O.push(p.codecs),g&&g.codecs&&O.push(g.codecs),P=[P,N,O.sort()].join("-"),p&&g&&!E1(M,L)||e.ob.has(P)||(p={id:e.G++,language:p?p.language:"und",disabledUntilTime:0,primary:!!p&&p.primary||!!g&&g.primary,audio:p,video:g,bandwidth:o,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(p),e.ob.add(P))}return u}function fM(e,t){t=cS(t,"CLOSED-CAPTIONS"),e.R=t.length==0,t=R(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value,u=Ne(o,"LANGUAGE");n=St(u||"und"),u||(u=Ne(o,"NAME"))&&(n=u),u=Pt(o,"GROUP-ID"),o=Pt(o,"INSTREAM-ID").replace("SERVICE","svc"),e.J.get(u)||e.J.set(u,new Map),e.J.get(u).set(o,n)}}function SS(e,t,n,o){o=o===void 0?!0:o;for(var u=[],a=[],d=new Map,p=R(t),g=p.next(),y={};!g.done;y={ii:void 0},g=p.next())g=g.value,y.ii=++e.G,y=(function(N){return function(){return"shaka://hls-muxed"+N.ii}})(y),y=o?Pt(g,"URI"):Ne(g,"URI")||y(),g=Pt(g,"GROUP-ID"),u.push(y),a.push(g),d.set(g,y);if(o=a.sort().join(","),g=t[0],t="",p=lM(g),p==lt)t=Ne(g,"CODECS")||"";else for(a=R(a),y=a.next();!y.done;y=a.next())if(y=y.value,e.K.has(y)){t=e.K.get(y);break}if(a=u.sort().join(","),e.i.has(a))return e.i.get(a);if(y=e.G++,e.j){d=R(d);for(var w=d.next();!w.done;w=d.next()){var T=R(w.value);w=T.next().value,T=T.next().value,(w=n.get(w))&&du(e.j,y,w,T)}}n=Ne(g,"LANGUAGE"),d=Ne(g,"NAME"),w=Ne(g,"DEFAULT")=="YES",T=p=="audio"?oM(g):null;var M=p=="audio"?uM(g):!1,L=Ne(g,"CHARACTERISTICS"),P=Ne(g,"FORCED")=="YES";return g=p=="audio"?sM(g):null,u=rd(e,y,u,t,p,n,w,d,T,null,L,P,g,M),u.stream&&e.g.enableAudioGroups&&(u.stream.groupId=o),e.M.has(o)?e.M.get(o).push(u):e.M.set(o,[u]),e.i.set(a,u),u}function cM(e,t){var n,o,u,a,d,p,g,y,w,T;return $(function(M){return M.g==1?(n=Pt(t,"URI"),o=Ne(t,"CODECS","jpeg")||"",e.i.has(n)?M.return(e.i.get(n)):(u=Ne(t,"LANGUAGE"),a=Ne(t,"NAME"),d=Ne(t,"CHARACTERISTICS"),p=rd(e,e.G++,[n],o,"image",u,!1,a,null,null,d,!1,null,!1),(g=Ne(t,"RESOLUTION"))?D(M,p.stream.createSegmentIndex(),3):M.A(2))):(M.g!=2&&(y=rr(p.stream.segmentIndex),w=y.tilesLayout)&&(p.stream.width=Number(g.split("x")[0])*Number(w.split("x")[0]),p.stream.height=Number(g.split("x")[1])*Number(w.split("x")[1])),(T=Ne(t,"BANDWIDTH"))&&(p.stream.bandwidth=Number(T)),e.i.set(n,p),M.return(p))})}function TS(e,t){var n="video",o=Pt(t,"URI"),u=Ne(t,"CODECS")||"";if(u=="mjpg"&&(n="image"),e.i.has(o))return e.i.get(o);var a=Ne(t,"LANGUAGE"),d=Ne(t,"NAME"),p=Ne(t,"CHARACTERISTICS");return n=rd(e,e.G++,[o],u,n,a,!1,d,null,null,p,!1,null,!1),u=Ne(t,"RESOLUTION"),a=R(u?u.split("x"):[null,null]),u=a.next().value,a=a.next().value,n.stream.width=Number(u)||void 0,n.stream.height=Number(a)||void 0,(t=Ne(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(o,n),n}function dM(e,t,n,o){for(var u=e.G++,a=[],d=R(t),p=d.next();!p.done;p=d.next()){var g=p.value;p=Pt(g,"URI"),g=Ne(g,"PATHWAY-ID"),e.j&&g&&du(e.j,u,g,p),a.push(p)}if(d=a.sort().join(",")+n.sort().join(","),e.i.has(d))return e.i.get(d);p=a.join(",");e:{if(t=Ne(t[0],"CLOSED-CAPTIONS"),o=="video"){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if(t!="NONE"){t=e.J.get(t);break e}e.R=!1}else if(!t&&e.J.size)for(t=R(e.J.keys()),t=t.next();!t.done;t=t.next()){t=e.J.get(t.value);break e}}t=null}return n=Cs(o,n),o=rd(e,u,a,n,o,null,!1,p,null,t,null,!1,null,!1),e.i.set(d,o),o}function rd(e,t,n,o,u,a,d,p,g,y,w,T,M,L){function P(Y){var J,H,z,Q,ee,se,fe,ne,xe,ye,ae,he,Te,ke,Ke,Re,pt,ht,At,ut;return $(function(tt){switch(tt.g){case 1:return J=cn,ce(tt,2),D(tt,Y.promise,4);case 4:if(H=tt.h,Y.aborted)return tt.return();if(z=H.uri,z!=H.originalUri&&(Q=F.P(),Q.includes(z)||F.Af.push(z)),ee=bg(e.Ta,H.data),ee.type!=1)throw new q(2,4,4017);return se=Fi(ee.ha,"EXT-X-DEFINE"),fe=Ig(e,se,z),ne=!1,(!e.ba&&e.g.hls.disableCodecGuessing||e.R&&u==J.Ca&&!e.g.hls.disableClosedCaptionsDetection)&&ee.segments.length>0&&(e.R=!1,ne=!0),xe=!e.ba&&e.g.hls.disableCodecGuessing,ye=zn(e),D(tt,kS(e,0,fe,ee,N,o,u,a,d,p,g,y,w,T,M,L,void 0,ne,xe),5);case 5:if(ae=tt.h,Y.aborted)return tt.return();he=ae.stream,RS(e,ee),zn(e)&&!ye&&_S(e,ee),F.Wc=ae.Wc,F.qc=ae.qc,F.Re=ae.Re,F.Qe=ae.Qe,F.Wd=ae.Wd,F.lf=ae.lf,F.Rb=ae.Rb,F.Sb=ae.Sb,O.segmentIndex=he.segmentIndex,O.encrypted=he.encrypted,O.drmInfos=he.drmInfos,O.keyIds=he.keyIds,O.mimeType=he.mimeType,O.bandwidth=O.bandwidth||he.bandwidth,O.codecs=O.codecs||he.codecs,O.closedCaptions=O.closedCaptions||he.closedCaptions,O.width=O.width||he.width,O.height=O.height||he.height,O.hdr=O.hdr||he.hdr,O.colorGamut=O.colorGamut||he.colorGamut,O.frameRate=O.frameRate||he.frameRate,O.language=="und"&&he.language!="und"&&(O.language=he.language),O.language=O.language||he.language,O.channelsCount=O.channelsCount||he.channelsCount,O.audioSamplingRate=O.audioSamplingRate||he.audioSamplingRate,yu(O),O.drmInfos.length&&e.h.newDrmInfo(O),Te=!1,(!y&&O.closedCaptions||y&&O.closedCaptions&&y.size!=O.closedCaptions.size)&&(Te=!0),e.m&&Te&&e.h.makeTextStreamsForClosedCaptions(e.m),u==J.Na&&(ke=rr(he.segmentIndex))&&ke.aa&&(O.mimeType="application/mp4",yu(O)),Ke=Jf(O),O.segmentIndex.Gb(function(Et){Et.aa&&(Et.aa.xd=Ke)}),hM(e)&&(e.yc?Mg(e,[F]):(e.yc=!0,Re=Array.from(e.i.values()),pt=Re.filter(function(Et){return Et.stream.segmentIndex}),Mg(e,pt),Eg(e),ht=e.o,ht>0&&e.F.ka(ht))),_g(e,ee.ha,O.type,fe,N),e.m&&(e.m.startTime=e.u),X(tt,0);break;case 2:if(At=ie(tt),O.closeSegmentIndex(),At.code===7001)return tt.return();if(ut=e.h.disableStream(O),!ut)throw At;te(tt)}})}function N(){return e.j&&n.length>1?ua(e.j,t):F.Af.concat(dS([e.H],n,e.B))}var O=ES(e,o,u,a,d,p,g,y,w,T,M,L);n.some(function(Y){return Y.startsWith("shaka://hls-muxed")})&&(O.isAudioMuxedInVideo=!0,O.mimeType="video/mp2t",yu(O));var F={stream:O,type:u,Af:[],Wc:0,qc:0,lf:new Map,Re:!1,Qe:!1,Wd:!1,og:-1,Rb:-1,Sb:-1,P:N},B=null,V;return O.createSegmentIndex=function(){return B||(O.isAudioMuxedInVideo?(O.segmentIndex=new vt([]),Promise.resolve()):(V=Pg(e,F.P(),!0),B=new Promise(function(Y){Y(P(V))})))},O.closeSegmentIndex=function(){B&&!O.segmentIndex&&V.abort(),O.segmentIndex&&(O.segmentIndex.release(),O.segmentIndex=null),B=null},F}function CS(e){var t=1/0;e=R(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.qc));return t}function bS(e,t){var n=[];t=R(t);for(var o=t.next();!o.done;o=t.next())o=o.value,o.segmentIndex&&o.segmentIndex.Gb(function(u){n.push(u)});e.l.ge(n)}function Mg(e,t){if(!zn(e))for(var n=CS(e),o=R(t),u=o.next();!u.done;u=o.next())u.value.stream.segmentIndex.pd(0,n);bS(e,t.map(function(a){return a.stream})),o=Array.from(e.i.values()).filter(function(a){return a.stream.segmentIndex}),n=o.some(function(a){return a.stream.type=="audio"}),u=o.some(function(a){return a.stream.type=="video"}),o=zn(e)&&!e.kb,n=!zn(e)&&e.kb&&!(n&&u),e.g.hls.ignoreManifestProgramDateTime||o||n?yS(e,t,o):(X5(e,t),e.g.hls.ignoreManifestProgramDateTimeForTypes.length>0&&yS(e,t))}function da(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function hM(e){if(!e.m)return!1;var t=[],n=[];e=R(e.m.variants);for(var o=e.next();!o.done;o=e.next())o=o.value,o.video&&t.push(o.video),o.audio&&n.push(o.audio);return!(t.length>0&&!t.some(function(u){return u.segmentIndex})||n.length>0&&!n.some(function(u){return u.segmentIndex}))}function kS(e,t,n,o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B){F=F===void 0?!0:F,B=B===void 0?!0:B;var V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye,ae,he,Te,ke,Ke,Re,pt,ht,At,ut,tt,Et,at,rt,ct,Xt,Vt;return $(function(Wt){switch(Wt.g){case 1:if(V=o.segments||[],Y=V.every(function(yn){return!!Tn(yn.ha,"EXT-X-GAP")}),!V.length||Y)throw new q(2,4,4053);if(pM(e,o),zn(e)&&Rg(e,o),J=zn(e)?e.C.get(d):new Map,H=DS(e,o,J,n,u,d),z=H.segments,Q=H.bandwidth,xe=ne=fe=se=ee=null,!(z.length>0&&F)){Wt.A(2);break}return D(Wt,K5(e,z),3);case 3:ye=Wt.h,d!=ye.type&&zn(e)&&(e.C.set(ye.type,e.C.get(d)),e.C.set(d,new Map)),d=ye.type,p=ye.language,w=ye.channelCount,P=ye.sampleRate,e.g.disableText||(T=ye.closedCaptions),se=ye.height,ee=ye.width,fe=ye.ue,ne=ye.colorGamut,xe=ye.frameRate,B&&(O=ye.mimeType,a=ye.codecs);case 2:if(O){Wt.A(4);break}return D(Wt,yM(e,d,a,z),5);case 5:O=Wt.h,d!=lt||a||O!="application/mp4"||!z[0]||z[0].aa||(O="text/vtt");case 4:return D(Wt,IS(e,o,O,u,n),6);case 6:if(ae=Wt.h,he=ae.drmInfos,Te=ae.keyIds,ke=ae.encrypted,Ke=ae.Mh,ke&&!he.length&&!Ke)throw new q(2,4,4026);return Re=ES(e,a,d,p,g,y,w,T,M,L,P,N),Re.encrypted=ke&&!Ke,Re.drmInfos=he,Re.keyIds=Te,Re.mimeType=O,Q&&(Re.bandwidth=Q),yu(Re),d=="video"&&(ee||se||fe||ne)&&NS(Re,ee,se,xe,fe,null,ne),zn(e)&&Rg(e,o),pt=z[0].startTime,ht=z[z.length-1],At=ht.endTime,ut=new vt(z),Re.segmentIndex=ut,Et=(tt=Tn(o.ha,"EXT-X-SERVER-CONTROL"))?gu(tt,"CAN-SKIP-UNTIL")!=null:!1,at=tt?gu(tt,"CAN-BLOCK-RELOAD")!=null:!1,rt=mu(o.ha,"EXT-X-MEDIA-SEQUENCE",0),ct=AS(rt,z),Xt=ct.Rb,Vt=ct.Sb,Wt.return({stream:Re,type:d,Af:[],P:u,Wc:pt,qc:At,Re:Et,Qe:at,Wd:!1,og:-1,Rb:Xt,Sb:Vt,lf:J})}})}function AS(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Rb:e,Sb:n};t=t[t.length-1];var o=t.g;return t.g.length?(n=o.length-1,o[o.length-1].isPreload()||(e++,n=0),{Rb:e,Sb:n}):(e++,t.m&&(n=0),{Rb:e,Sb:n})}function ES(e,t,n,o,u,a,d,p,g,y,w,T){var M=Lg(n,t)||od(n),L=[];if(g){g=R(g.split(","));for(var P=g.next();!P.done;P=g.next())L.push(P.value)}return g=void 0,P=null,n==lt?g=L.includes("public.accessibility.transcribes-spoken-dialog")&&L.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":L.includes("public.accessibility.describes-video")&&(P="visually impaired"),L.length||g!=="subtitle"||L.push("subtitle"),e={id:e.G++,originalId:a,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:M,codecs:t,kind:n==lt?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:St(o||"und"),originalLanguage:o,label:a,type:n,primary:u,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:L,forced:y,channelsCount:d,audioSamplingRate:w,spatialAudio:T,closedCaptions:p,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:P,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},yu(e),e}function IS(e,t,n,o,u){var a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye,ae,he,Te;return $(function(ke){switch(ke.g){case 1:if(a=new Map,!e.g.ignoreDrmInfo&&t.segments){for(d=R(t.segments),p=d.next();!p.done;p=d.next())if(g=p.value,y=Fi(g.ha,"EXT-X-KEY"),w=null,y.length)for(w=LS(e,t,g.ha,o,u),T=R(y),M=T.next();!M.done;M=T.next())L=M.value,a.set(L,w)}N=P=!1,O=[],F=new Set,B=R(a),V=B.next();case 2:if(V.done){ke.A(4);break}if(Y=V.value,J=R(Y),H=J.next().value,z=J.next().value,Q=H,ee=z,se=Pt(Q,"METHOD"),se=="NONE"){ke.A(3);break}if(P=!0,fe=Ne(Q,"KEYFORMAT")||"identity",ne=null,ud(se)){N=!0,ke.A(3);break}if(fe=="identity")return D(ke,BS(e,Q,n,o,ee,u),11);if(xe=e.uc.get(fe),!xe){ye=null,ke.A(9);break}return D(ke,xe(Q,n,ee),10);case 10:ye=ke.h;case 9:ne=ye,ke.A(6);break;case 11:ne=ke.h;case 6:if(ne){if(ne.keyIds)for(ae=R(ne.keyIds),he=ae.next();!he.done;he=ae.next())Te=he.value,F.add(Te);O.push(ne)}case 3:V=B.next(),ke.A(2);break;case 4:return ke.return({drmInfos:O,keyIds:F,encrypted:P,Mh:N})}})}function MS(e,t,n,o,u){if(!f.crypto||!f.crypto.subtle)throw st("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new q(2,4,4042);var a=0,d=Ne(t,"IV","");if(d){var p=Po(d.substr(2));if(p.byteLength!=16)throw new q(2,4,4048)}else a=mu(n.ha,"EXT-X-MEDIA-SEQUENCE",0);var g=yo(o(),Pt(t,"URI"),u),y=g.sort().join("");if(n=t.toString()+"-"+a+"-"+y,!e.wa.has(n)){var w={bitsKey:128,blockCipherMode:"CBC",iv:p,firstMediaSequenceNumber:a};switch(Pt(t,"METHOD")){case"AES-256":w.bitsKey=256;break;case"AES-256-CTR":w.bitsKey=256,w.blockCipherMode="CTR"}w.fetchKey=function(){var T,M,L,P;return $(function(N){if(N.g==1)return e.O.has(y)||(T=un(g,e.g.retryParameters),M=zr(e,T,6).promise,e.O.set(y,M)),D(N,e.O.get(y),2);if(N.g!=3){if(L=N.h,!L.data||L.data.byteLength!=w.bitsKey/8)throw new q(2,4,4049);return P={name:w.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:w.bitsKey},D(N,f.crypto.subtle.importKey("raw",L.data,P,!0,["decrypt"]),3)}w.cryptoKey=N.h,w.fetchKey=void 0,te(N)})},e.wa.set(n,w)}return e.wa.get(n)}function RS(e,t){e.u==null&&(t=Tn(t.ha,"EXT-X-START"))&&(e.u=Number(Pt(t,"TIME-OFFSET")))}function pM(e,t){var n=Tn(t.ha,"EXT-X-PLAYLIST-TYPE");t=Tn(t.ha,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?sd(e,ld):n?sd(e,ad):sd(e,$S)}function Rg(e,t){var n=1/0,o=t.segments;if(o.length)for(var u=o.length-1;u>=0;){var a=Tn(o[u].ha,"EXTINF");if(a){n=Number(a.value.split(",")[0]);break}u--}if(o=Tn(t.ha,"EXT-X-TARGETDURATION"),!o)throw new q(2,4,4024,"EXT-X-TARGETDURATION");o=Number(o.value),(u=Tn(t.ha,"EXT-X-PART-INF"))&&(e.S=Number(Pt(u,"PART-TARGET"))),t=Tn(t.ha,"EXT-X-SERVER-CONTROL"),e.oa&&e.S?(e.o=e.xc?e.S*5<=n?Math.min(e.S,e.o):Math.min(n,e.o):Math.min(e.S,e.o),e.ab=t?Number(Pt(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?gu(t,"HOLD-BACK"):null,e.Sa=n?Number(n.value):0),e.ib=Math.max(o,e.ib)}function _S(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.ab)n=e.ab;else if(e.Sa)n=e.Sa;else for(var o=t.segments.length,u=o-Math.min(o,e.g.hls.liveSegmentsDelay);u<o;u++){var a=Tn(t.segments[u].ha,"EXTINF");n=a?n+Number(a.value.split(",")[0]):n+e.ib}e.u&&e.u<0&&(n=Math.min(-e.u,n),e.u+=n),e.l.Qi(0),e.l.oh(n),e.l.cd(!1)}function LS(e,t,n,o,u){var a=Tn(n,"EXT-X-MAP");if(!a)return null;var d=Pt(a,"URI"),p=yo(o(),d,u);if(d=[p.toString(),Ne(a,"BYTERANGE","")].join("-"),!e.Da.has(d)){var g=void 0,y=null,w=!1;n=R(n);for(var T=n.next();!T.done;T=n.next())T=T.value,T.name=="EXT-X-KEY"?(w=Pt(T,"METHOD"),ud(w)&&T.id<a.id?(w=!1,g=MS(e,T,t,o,u)):w=w!="NONE"):T.name=="EXT-X-BYTERANGE"&&T.id<a.id&&(y=T);t=gM(p,a,y,g,w),e.Da.set(d,t)}return e.Da.get(d)}function gM(e,t,n,o,u){var a=0,d=null;return t=Ne(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(a=t.split("@"),d=Number(a[0]),a=Number(a[1]),d=a+d-1,o&&(n=d+1-a,n%16&&(d+=16-n%16))),new ni(function(){return e},a,d,null,null,null,o,u)}function mM(e,t,n,o,u,a,d,p,g){function y(ke){ke=new Qt(ke).qb.split(".").pop();var Ke=Og.get(d).get(ke);return Ke||(Ke=Dg.get(ke)),Ke}var w=o.ha,T=Tn(w,"EXTINF"),M=0,L=0,P=null;o.vc.length&&(e.m.isLowLatency=!0);var N=null;if(!e.g.hls.ignoreManifestProgramDateTime){var O=Tn(w,"EXT-X-PROGRAM-DATE-TIME");O&&O.value&&(N=kr(O.value),e.kb=!0)}var F=Lr;if(Tn(w,"EXT-X-GAP")&&(e.m.gapCount++,F=2),!T){if(o.vc.length==0)throw new q(2,4,4024,"EXTINF");if(!e.oa)return null}var B=[];O=!1;var V=null,Y=!1,J=!1;if(e.oa&&o.vc.length){M=t&&f.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var H=N,z={},Q=0;Q<o.vc.length;z={Qf:void 0,wf:void 0},Q++){var ee=o.vc[Q],se=Q==0?n:B[B.length-1],fe=Q==0?u:se.endTime,ne=Number(Ne(ee,"DURATION"))||e.S;if(ne){var xe=fe+ne,ye=0,ae=null;if(ee.name=="EXT-X-PRELOAD-HINT"?(ye=(ye=Ne(ee,"BYTERANGE-START"))?Number(ye):0,(se=Ne(ee,"BYTERANGE-LENGTH"))?ae=ye+Number(se)-1:ye&&(ae=Number.MAX_SAFE_INTEGER)):(ye=Ne(ee,"BYTERANGE"),ae=R(PS(se,ye)),ye=ae.next().value,ae=ae.next().value),z.wf=Ne(ee,"URI"),z.wf){se=Lr,Ne(ee,"GAP")=="YES"&&(e.m.gapCount++,se=2,Y=!0),z.Qf=null;var he=(function(ke){return function(){return ke.Qf==null&&(ke.Qf=yo(p(),ke.wf,a)),ke.Qf}})(z);M&&ye>=0&&ae!=null&&(V=he,O=!0),fe=new Ve(fe,xe,he,ye,ae,t,0,0,1/0,[],"",null,H,se,g),ee.name=="EXT-X-PRELOAD-HINT"&&(fe.Rg(),J=!0),Ne(ee,"INDEPENDENT")!="YES"&&Q>0&&fe.wd(),(z=y(z.wf))&&(fe.mimeType=z,jS.has(z)&&(fe.aa=null)),B.push(fe),H&&(H+=ne)}}}}if(T){if(T=Number(T.value.split(",")[0]),T==0)return null;M=u+T}else if(B.length)M=B[B.length-1].endTime;else return null;O&&(Y||B[0].startByte!=0?(O=!1,V=null):B=[]),(T=Tn(w,"EXT-X-BYTERANGE"))?(P=R(PS(n,T.value)),L=P.next().value,P=P.next().value):B.length&&(L=B[0].startByte,P=B[B.length-1].endByte),n="",T=null,d=="image"&&(n="1x1",w=Tn(w,"EXT-X-TILES"))&&(n=Pt(w,"LAYOUT"),(w=Ne(w,"DURATION"))&&(T=Number(w)));var Te=null;return t=new Ve(u,M,function(){return V?V():(Te==null&&(Te=yo(p(),o.g,a)),Te||[])},L,P,t,0,0,1/0,B,n,T,N,F,g,B.length>0&&!!o.g),(u=y(o.g))&&(t.mimeType=u,jS.has(u)&&(t.aa=null)),O&&(e.xc=!0,t.oi(),J&&t.Rg()),t}function PS(e,t){var n=0,o=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.endByte+1,o=n+t-1),[n,o]}function _g(e,t,n,o,u){if(n=="video"||n=="audio"){var a=e.l.m;if(a&&!da(e,n))for(t=Fi(t,"EXT-X-DATERANGE"),t=t.filter(function(se){return gu(se,"START-DATE")!=null}).sort(function(se,fe){return se=Pt(se,"START-DATE"),fe=Pt(fe,"START-DATE"),se<fe?-1:se>fe?1:0}),n=0;n<t.length;n++){var d=t[n];try{var p=Pt(d,"START-DATE"),g=kr(p);if(!isNaN(g)){var y=Math.max(0,g-a),w=null,T=Ne(d,"END-DATE");if(T){var M=kr(T);if(!isNaN(M)&&(w=M-a,w<0))continue}if(w==null){var L=Ne(d,"DURATION")||Ne(d,"PLANNED-DURATION");if(L){var P=parseFloat(L);if(isNaN(P)||(w=y+P),g-a+P<0)continue}}var N=Ne(d,"CLASS")||"com.apple.quicktime.HLS",O=Ne(d,"END-ON-NEXT")=="YES";if(w==null&&O){for(var F=n+1;F<t.length;F++){var B=Ne(t[F],"CLASS")||"com.apple.quicktime.HLS";if(N==B){var V=Pt(t[F],"START-DATE"),Y=kr(V);if(!isNaN(Y)&&Y&&Y>g){w=Math.max(0,Y-a);break}}}if(w==null)continue}F=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var J=[],H=R(d.attributes),z=H.next();!z.done;z=H.next()){var Q=z.value;if(!F.includes(Q.name)){var ee=hS(Q.value,o);(Q.name=="X-ASSET-URI"||Q.name=="X-ASSET-LIST")&&(ee=yo(u(),Q.value,o)[0]),J.push({key:Q.name,description:"",data:ee,mimeType:null,pictureType:null})}}J.length>1&&e.h.onMetadata(N,y,w,J)}}catch{}}}}function DS(e,t,n,o,u,a){var d=t.segments,p=void 0,g=mu(t.ha,"EXT-X-DISCONTINUITY-SEQUENCE",-1),y=mu(t.ha,"EXT-X-MEDIA-SEQUENCE",0),w=Tn(t.ha,"EXT-X-SKIP"),T=w?Number(Ne(w,"SKIPPED-SEGMENTS")):0,M=y+T,L=0;zn(e)&&n.has(M)&&(L=n.get(M)),L===0&&e.Ga==ad&&n.size>0&&!n.has(M)&&e.l.i!=null&&(L=e.l.Ib());var P=[],N=null;w=[];for(var O=0;O<d.length;O++){var F=d[O],B=O==0?L:N.endTime;M=y+T+O,Tn(F.ha,"EXT-X-DISCONTINUITY")&&(g++,N&&N.aa&&(N.aa.g=B));for(var V=R(F.ha),Y=V.next();!Y.done;Y=V.next())Y=Y.value,Y.name=="EXT-X-KEY"&&(ud(Pt(Y,"METHOD"))?p=MS(e,Y,t,u,o):p=void 0);n.set(M,B),V=LS(e,t,F.ha,u,o),(B=mM(e,V,N,F,B,o,a,u,p))&&((N=mu(F.ha,"EXT-X-BITRATE"))?w.push({bitrate:N,duration:B.endTime-B.startTime}):w.length&&(N=w.pop(),N.duration+=B.endTime-B.startTime,w.push(N)),N=B,B.i=g,da(e,a)&&e.N!=null&&M<e.N||P.push(B))}if(t=void 0,w.length&&(t=w.reduce(function(J,H){return J+H.duration},0),t=Math.round(w.reduce(function(J,H){return J+H.bitrate*H.duration},0)/t*1e3)),w=P.some(function(J){return J.h!=null})){for(n={},o=0;o<P.length;n={Ve:void 0,Ue:void 0,Ne:void 0,Zc:void 0,Me:void 0},o++)if(n.Zc=P[o],n.Zc.h==null)for(n.Ue=0,n.Ve=o,u=(function(J){return function(){var H=P[J.Ve];if(H){if(H.h!=null)return H.h+J.Ue;J.Ue-=H.endTime-H.startTime,J.Ve+=1}return null}})(n),n.Me=0,n.Ne=o,d=(function(J){return function(){var H=P[J.Ne];if(H){if(H!=J.Zc&&(J.Me+=H.endTime-H.startTime),H.h!=null)return H.h+J.Me;--J.Ne}return null}})(n);n.Zc.h==null;)n.Zc.h=d(),n.Zc.h==null&&(n.Zc.h=u())}if(w)for(n=R(P),o=n.next();!o.done;o=n.next())for(u=o.value,o=u.h,u=R(u.g),d=u.next();!d.done;d=u.next())d=d.value,d.h=o,o+=d.endTime-d.startTime;if(n=e.ma,w&&n!=1/0&&!da(e,a))for(e=R(P),a=e.next();!a.done;a=e.next())a.value.Ah(n);return{segments:P,bandwidth:t}}function Lg(e,t){if(e==lt){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function od(e){return e==lt?"text/vtt":Og.get(e).get("mp4")}function OS(e,t){e=zn(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.Kc()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function yM(e,t,n,o){var u,a,d,p,g,y,w,T,M,L,P,N,O;return $(function(F){switch(F.g){case 1:return u=Di,a=OS(e,o),d=a.segment,d.status==2?F.return(od(t)):(p=d.P(),g=new Qt(p[0]),y=g.qb.split(".").pop(),w=Og.get(t),(T=w.get(y))||(T=Dg.get(y))||(T=Lg(t,n))?F.return(T):(L=1,P=un(p,e.g.retryParameters),ce(F,2),P.method="HEAD",D(F,zr(e,P,u,{type:L}).promise,4)));case 4:N=F.h,M=N.headers["content-type"],X(F,3);break;case 2:if(O=ie(F),!O||O.code!=1002&&O.code!=1001){F.A(3);break}return P.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(P.headers.Range="bytes=0-0"),D(F,zr(e,P,u,{type:L}).promise,6);case 6:N=F.h,M=N.headers["content-type"];case 3:if(!M){F.A(7);break}if(T=M.toLowerCase().split(";")[0],T!="application/octet-stream"){F.A(8);break}if(N.data.byteLength){F.A(9);break}return P.method="GET",D(F,zr(e,P,u,{type:L}).promise,10);case 10:N=F.h;case 9:Xs(et(N.data))&&(T="video/mp2t");case 8:if(T!="application/octet-stream")return F.return(T);case 7:return F.return(od(t))}})}function NS(e,t,n,o,u,a,d){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(o)||void 0,e.hdr=u||void 0,e.videoLayout=a||void 0,e.colorGamut=d||void 0)}function Pg(e,t,n){return zr(e,un(t,e.g.retryParameters),0,{type:n?2:3})}function US(e){var t,n,o,u,a,d;return $(function(p){switch(p.g){case 1:return e.h?(ce(p,2),t=Date.now(),D(p,e.update(),4)):p.return();case 4:n=Date.now(),zn(e)&&(o=(n-t)/1e3,e.Zb.sample(1,o),u=e.g.updatePeriod>0?e.g.updatePeriod:e.o,a=Math.max(0,u-Si(e.Zb)),e.F.ka(a)),X(p,3);break;case 2:if(d=ie(p),!e.h)return p.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(d),p.return();d.severity=1,e.h.onError(d),e.F.ka(.1);case 3:if(!e.h)return p.return();e.h.onManifestUpdated(),te(p)}})}function zn(e){return e.Ga!=ld}function sd(e,t){e.Ga=t,e.l&&e.l.cd(!zn(e)),zn(e)||e.F.stop()}function zr(e,t,n,o){if(!e.$)throw new q(2,7,7001);return o||(o={}),o.isPreload=e.ac(),t=e.h.networkingEngine.request(n,t,o),Ho(e.$,t),t}function ud(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function vM(e,t,n,o){var u,a,d,p,g,y;return $(function(w){if(w.g==1){if(n=="video/mp2t")throw new q(2,4,4040);if(f.shakaMediaKeysPolyfill==="apple")throw new q(2,4,4041);if(u=Pt(t,"METHOD"),a=["SAMPLE-AES","SAMPLE-AES-CTR"],!a.includes(u))return w.return(null);d="cenc",u=="SAMPLE-AES"&&(d="cbcs"),p=Pt(t,"URI"),g=Cr("com.apple.fps",d,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],p);var T=new Qt(p).Eb.replace(/-/g,"").toLowerCase();return(y=T.length===32&&/^[0-9a-f]+$/.test(T)?T:null)||!o?w.A(2):D(w,FS(e,o),3)}return w.g!=2&&(y=w.h),y&&g.keyIds.add(y),w.return(g)})}function BS(e,t,n,o,u,a){var d,p,g,y,w,T,M,L,P,N,O,F;return $(function(B){switch(B.g){case 1:if(n=="video/mp2t")throw new q(2,4,4040);if(f.shakaMediaKeysPolyfill==="apple")throw new q(2,4,4041);if(d=Pt(t,"METHOD"),p=["SAMPLE-AES","SAMPLE-AES-CTR"],!p.includes(d))return B.return(null);if(g=yo(o(),Pt(t,"URI"),a),g[0].startsWith("data:text/plain;base64,")){y=Tr(Li(g[0].split("data:text/plain;base64,").pop())),B.A(2);break}return w=g.sort().join(""),e.xa.has(w)||(T=un(g,e.g.retryParameters),M=zr(e,T,6).promise,e.xa.set(w,M)),D(B,e.xa.get(w),3);case 3:L=B.h,y=Tr(L.data);case 2:if(P="00000000000000000000000000000000",!u){B.A(4);break}return D(B,FS(e,u),5);case 5:(N=B.h)&&(P=N);case 4:return O=new Map,O.set(P,y),F="cenc",d=="SAMPLE-AES"&&(F="cbcs"),B.return(jy(O,F))}})}function FS(e,t){var n,o,u,a;return $(function(d){return d.g==1?(n=null,e.ya.has(t)?(n=e.ya.get(t),d.A(2)):(o=Ol(t.P(),t.Jc(),t.Gc(),e.g.retryParameters),u=Di,D(d,zr(e,o,u,{type:0}).promise,3))):(d.g!=2&&(a=d.h,t.me(a.data),n=iA(a.data),e.ya.set(t,n)),d.return(n))})}be("shaka.hls.HlsParser",id);var Dg=new Map().set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),xM=new Map().set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),wM=new Map().set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),SM=new Map().set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),TM=new Map().set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),Og=new Map().set("audio",xM).set("video",wM).set("text",SM).set("image",TM),jS=new Set(["video/mp2t"].concat(le(to))),ld="VOD",$S="EVENT",ad="LIVE",CM={ij:ld,Hl:$S,Rl:ad};Xo("application/x-mpegurl",function(){return new id}),Xo("application/vnd.apple.mpegurl",function(){return new id});function fd(e){return Gc(e)}var bM=new Map().set("com.microsoft.playready",fd).set("com.microsoft.playready.recommendation",fd).set("com.microsoft.playready.software",fd).set("com.microsoft.playready.hardware",fd);function Ng(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.F=new Gi(5),this.o=new dt(function(){kM(e)}),this.C=new Os,this.m=new Map,this.B=function(){return!1}}m=Ng.prototype,m.configure=function(e,t){this.g=e,t&&(this.B=t)},m.start=function(e,t){var n=this;return $(function(o){if(o.g==1)return n.l=[e],n.h=t,D(o,Ug(n),2);if(!n.h)throw new q(2,7,7001);return o.return(n.j)})};function kM(e){var t;$(function(n){switch(n.g){case 1:return ce(n,2),D(n,Ug(e),4);case 4:X(n,3);break;case 2:t=ie(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();te(n)}})}m.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.C.destroy()},m.update=function(){var e=this,t;return $(function(n){if(n.g==1)return ce(n,2),D(n,Ug(e),4);if(n.g!=2)return X(n,0);if(t=ie(n),!e.h||!t)return n.return();e.h.onError(t),te(n)})},m.onExpirationUpdated=function(){},m.onInitialVariantChosen=function(){},m.banLocation=function(){},m.setMediaElement=function(){};function Ug(e){var t,n,o,u,a,d,p;return $(function(g){if(g.g==1)return t=un(e.l,e.g.retryParameters),n=e.h.networkingEngine,o=Date.now(),u=n.request(0,t,{type:5,isPreload:e.B()}),Ho(e.C,u),D(g,u.promise,2);if(a=g.h,!e.h)return g.return();a.uri&&!e.l.includes(a.uri)&&e.l.unshift(a.uri);var y=a.uri,w=a.data,T=e.g.mss.manifestPreprocessor;if(T!=cc){if(yt("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),w=Gw(w,"SmoothStreamingMedia"),!w)throw new q(2,4,4046,y);T(w),w=Xi(w.outerHTML)}var M=rl(w,"SmoothStreamingMedia");if(!M)throw new q(2,4,4046,y);if(y=e.g.mss.manifestPreprocessorTXml,y!=dc&&y(M),e.i||(e.i=new Ye(null,0)),y=Qe(M,"IsLive",hf,!1))throw new q(2,4,4047);e.i.cd(!y),T=Qe(M,"TimeScale",kn,1e7),w=Qe(M,"DVRWindowLength",kn),y&&(w===0||isNaN(w))&&(w=1/0);var L=Qe(M,"CanSeek",hf,!1);w===0&&L&&(w=1/0),L=null,w&&w>0&&(L=w/T),y&&!isNaN(e.g.availabilityWindowOverride)&&(L=e.g.availabilityWindowOverride),L==null&&(L=1/0),e.i.Hf(L),w=Qe(M,"Duration",kn,1/0),y||e.i.rb(w/T),y={variants:[],textStreams:[],timescale:T,duration:w/T};var P;for(L=bt(M,"Protection"),T=e.g.mss.keySystemsBySystemId,w=[],L=R(L),P=L.next();!P.done;P=L.next())w=w.concat(bt(P.value,"ProtectionHeader"));if(w.length){for(L=[],P=0;P<w.length;P++){var N=w[P],O=N.attributes.SystemID.toLowerCase(),F=T[O];if(F){var B;e:{if(B=xw(N)){B=R(ir(B,"DATA"));for(var V=B.next();!V.done;V=B.next())if(V=Ft(V.value,"KID")){B=Li(nn(V)),B=new Uint8Array([B[3],B[2],B[1],B[0],B[5],B[4],B[7],B[6]].concat(le(B.slice(8)))),B=Tr(B);break e}}B=null}V=Li(nn(N)),O=Po(O.replace(/-/g,"")),O=[{initData:Of(V,O,new Set,0),initDataType:"cenc",keyId:B}],O=Cr(F,"cenc",O),B&&O.keyIds.add(B),(F=bM.get(F))&&(O.licenseServerUri=F(N)),L.push(O)}}T=L}else T=[];for(P=T,L=[],T=[],w=[],M=bt(M,"StreamIndex"),M=R(M),N=M.next();!N.done;N=M.next()){N=N.value,F=bt(N,"QualityLevel"),O=y.timescale,B=y.duration,V=bt(N,"c");for(var Y=[],J=0,H=0;H<V.length;++H){var z=V[H],Q=V[H+1],ee=Qe(z,"t",kn),se=Qe(z,"d",kn);if(z=Qe(z,"r",bn),!se)break;if(ee=ee??J,(z=z||0)&&z--,z<0)if(Q){if(Q=Qe(Q,"t",kn),Q==null)break;if(ee>=Q)break;z=Math.ceil((Q-ee)/se)-1}else{if(B==1/0)break;if(ee/O>=B)break;z=Math.ceil((B*O-ee)/se)-1}for(Q=0;Q<=z;++Q)J=ee+se,Y.push({start:ee/O,end:J/O,Fh:ee}),ee=J}for(O=Y,F=R(F),B=F.next();!B.done;B=F.next())(B=AM(e,N,B.value,O,P,y))&&(B.type!="audio"||e.g.disableAudio?B.type!="video"||e.g.disableVideo?B.type!=lt||e.g.disableText||w.push(B):T.push(B):L.push(B))}for(M=[],L=R(L.length>0?L:[null]),P=L.next();!P.done;P=L.next())for(P=P.value,N=R(T.length>0?T:[null]),Y=N.next();!Y.done;Y=N.next())F=M,O=F.push,B=e,V=P,Y=Y.value,H=0,V&&V.bandwidth&&V.bandwidth>0&&(H+=V.bandwidth),Y&&Y.bandwidth&&Y.bandwidth>0&&(H+=Y.bandwidth),B={id:B.u++,language:V?V.language:"und",disabledUntilTime:0,primary:!!V&&V.primary||!!Y&&Y.primary,audio:V,video:Y,bandwidth:H,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},O.call(F,B);y.variants=M,y.textStreams=w,e.j?(e.j.variants=y.variants,e.j.textStreams=y.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:y.variants,textStreams:y.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.kf()),Promise.resolve(),d=Date.now(),p=(d-o)/1e3,e.F.sample(1,p),te(g)})}function AM(e,t,n,o,u,a){var d=t.attributes.Type;if(d!=="audio"&&d!=="video"&&d!=="text")return st("Ignoring unrecognized type:",d),null;var p=t.attributes.Language,g=e.u++,y=Qe(n,"Bitrate",hr),w=Qe(n,"MaxWidth",hr),T=Qe(n,"MaxHeight",hr),M=Qe(n,"Channels",hr),L=Qe(n,"SamplingRate",hr),P=a.duration;o.length&&(P=o[o.length-1].end-o[0].start);var N=e.i.getDuration();e.i.rb(Math.min(P,N));var O={id:g,originalId:t.attributes.Name||String(g),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:y||0,width:w||void 0,height:T||void 0,kind:"",encrypted:u.length>0,drmInfos:u,keyIds:new Set,language:St(p||"und"),originalLanguage:p,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:M,audioSamplingRate:L,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:P,timescale:a.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((u=t.attributes.Subtype)&&((u=LM.get(u))&&O.roles.push(u),u==="main"&&(O.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(d==="audio")u="AAC";else if(d==="video")return st('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!_M.includes(u.toUpperCase()))return st("Codec not supported:",u),null;switch(n=EM(n,d,u,O),O.mssPrivateData.codecPrivateData=n,d){case"audio":if(!n)return st("Quality unsupported without CodecPrivateData",d),null;O.type="audio",O.mimeType="mss/audio/mp4",O.codecs=IM(u,n);break;case"video":if(!n)return st("Quality unsupported without CodecPrivateData",d),null;O.type="video",O.mimeType="mss/video/mp4",O.codecs=MM(n);break;case"text":O.type=lt,O.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(O.codecs="stpp")}return O.fullMimeTypes.add(en(O.mimeType,O.codecs)),O.createSegmentIndex=function(){if(O.segmentIndex)return Promise.resolve();if(e.m.has(O.id))var F=e.m.get(O.id);else F=[],O.type=="video"&&(F=O.mssPrivateData.codecPrivateData.split("00000001").slice(1)),F={id:O.id,type:O.type,codecs:O.codecs,encrypted:O.encrypted,timescale:O.mssPrivateData.timescale,duration:O.mssPrivateData.duration,Cb:F,Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:null,stream:O},F=zs(new $s([F])),e.m.set(O.id,F);return F=RM(e,new ni(function(){return[]},0,null,Jf(O),O.mssPrivateData.timescale,F,null,O.encrypted),O,t,o),O.segmentIndex=new vt(F),Promise.resolve()},O.closeSegmentIndex=function(){O.segmentIndex&&(O.segmentIndex.release(),O.segmentIndex=null)},O}function EM(e,t,n,o){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=o.channelsCount||2,e=o.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return o=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[e*2],n[0]=40|o>>1,n[1]=o<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|o>>1,n[1]=o<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function IM(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function MM(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function RM(e,t,n,o,u){var a=o.attributes.Url.replace("{bitrate}",String(n.bandwidth));o=[],u=R(u);for(var d=u.next(),p={};!d.done;p={Lf:void 0},d=u.next())p.Lf=d.value,o.push(new Ve(p.Lf.start,p.Lf.end,(function(g){return function(){return wn(e.l,[a.replace("{start time}",String(g.Lf.Fh))])}})(p),0,null,t,0,0,n.mssPrivateData.duration));return o}be("shaka.mss.MssParser",Ng);var _M="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),LM=new Map().set("CAPT","main").set("SUBT","alternate").set("DESC","main");Xo("application/vnd.ms-sstr+xml",function(){return new Ng});function zS(e,t,n,o,u,a,d){if(n>=200&&n<=299&&n!=202||n==304)return{uri:u||o,originalUri:o,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:a};a=null;try{a=fr(t)}catch{}throw new q(n==401||n==403?2:1,1,1001,o,n,a,e,d,u||o)}function Bg(){}function cd(e,t,n,o,u,a){var d=new BM;try{Us(t.headers).forEach(function(w,T){d.append(T,w)})}catch(w){return io(new q(1,1,1002,e,w,n))}var p=new NM,g={Qh:!1,cj:!1};if(e=PM(e,t,n,{body:t.body||void 0,headers:d,method:t.method,signal:p.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},g,o,u,t.streamDataCallback,a.minBytesForProgressEvents||0),e=new tn(e,function(){return g.Qh=!0,p.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var y=new dt(function(){g.cj=!0,p.abort()});y.ka(t/1e3),e.finally(function(){y.stop()})}return e}function PM(e,t,n,o,u,a,d,p,g){var y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z;return $(function(Q){switch(Q.g){case 1:return y=OM,w=UM,M=new ArrayBuffer(0),P=L=0,N={},O=Date.now(),ce(Q,2),D(Q,y(e,o),4);case 4:if(T=Q.h,N=DM(T.headers),d(N),o.method=="HEAD"){Q.A(5);break}return B=(F=T.headers.get("Content-Length"))?parseInt(F,10):0,T.body?(V=T.clone().body.getReader(),Y=function(ee){function se(){var fe,ne,xe,ye;return $(function(ae){switch(ae.g){case 1:return ce(ae,2),D(ae,V.read(),4);case 4:fe=ae.h,X(ae,3);break;case 2:return ie(ae),ae.return();case 3:if(fe.done){ae.A(5);break}if(L+=fe.value.byteLength,!p){ae.A(5);break}return D(ae,p(fe.value),5);case 5:ne=Date.now(),xe=L-P,(ne-O>100&&xe>=g||fe.done)&&(ye=fe.done?0:B-L,a(ne-O,xe,ye),P=L,O=ne),fe.done?ee.close():(ee.enqueue(fe.value),se()),te(ae)}})}se()},new w({start:Y}),D(Q,T.arrayBuffer(),8)):D(Q,T.arrayBuffer(),9);case 8:M=Q.h,Q.A(5);break;case 9:M=Q.h,J=Date.now(),a(J-O,M.byteLength,0);case 5:t.headers.Range&&(H=t.headers.Range.replace("bytes=","").split("-").filter(function(ee){return ee}).map(function(ee){return parseInt(ee,10)}),H.length==2&&M.byteLength!=H[1]-H[0]+1&&st("Payload length does not match range requested bytes",t,T)),X(Q,3);break;case 2:throw z=ie(Q),u.Qh?new q(1,1,7001,e,n):u.cj?new q(1,1,1003,e,n):new q(1,1,1002,e,z,n);case 3:return Q.return(zS(N,M,T.status,e,T.url,t,n))}})}function DM(e){var t={};return e.forEach(function(n,o){t[o.trim()]=n}),t}function VS(){if(f.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(f.Response){if(!new Response("").body)return!1}else return!1;return!(!f.fetch||"polyfill"in f.fetch||!f.AbortController)}be("shaka.net.HttpFetchPlugin",Bg),Bg.isSupported=VS,Bg.parse=cd;var OM=f.fetch,NM=f.AbortController,UM=f.ReadableStream,BM=f.Headers;VS()&&(Mr("http",cd,2,!0),Mr("https",cd,2,!0),Mr("blob",cd,2,!0));function HS(){}function dd(e,t,n,o,u,a){var d=new FM,p=Date.now(),g=0,y=new Promise(function(w,T){d.open(t.method,e,!0),d.responseType="arraybuffer",d.timeout=t.retryParameters.timeout,d.withCredentials=t.allowCrossSiteCredentials;var M={};d.onabort=function(){T(new q(1,1,7001,e,n))},d.onreadystatechange=function(){if(d.readyState===XMLHttpRequest.HEADERS_RECEIVED){var P=d.getAllResponseHeaders().trim().split(`\r
`),N={};P=R(P);for(var O=P.next();!O.done;O=P.next())O=O.value.split(": "),N[O[0].toLowerCase()]=O.slice(1).join(": ");M=N,u(M)}},d.onload=function(P){var N=d.response;try{o(Date.now()-p,P.loaded-g,0);var O=zS(M,N,d.status,e,d.responseURL,t,n);w(O)}catch(F){T(F)}},d.onerror=function(P){T(new q(1,1,1002,e,P,n))},d.ontimeout=function(){T(new q(1,1,1003,e,n))},d.onprogress=function(P){var N=Date.now(),O=a.minBytesForProgressEvents||0,F=P.loaded-g;(N-p>100&&F>=O||P.lengthComputable&&P.loaded==P.total)&&(o(N-p,F,d.readyState==4?0:P.total-P.loaded),g=P.loaded,p=N)};for(var L in t.headers)try{d.setRequestHeader(L.toLowerCase(),t.headers[L])}catch(P){throw new q(1,1,1002,e,P,n)}d.send(t.body)});return new tn(y,function(){return d.abort(),Promise.resolve()})}be("shaka.net.HttpXHRPlugin",HS),HS.parse=dd;var FM=f.XMLHttpRequest;Mr("http",dd,1,!0),Mr("https",dd,1,!0),Mr("blob",dd,1,!0);function GS(e,t,n,o,u){this.g=e,this.i=t,this.groupId=n,this.h=o,this.j=u}function Fg(e){var t=e.Yb(!1);return t?Sr(t):e.P().map(function(n){return"{"+encodeURI(n.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function jM(e,t){return Ol(e.g.P(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function XS(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function WS(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}XS.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}};function KS(e){return e.i==0?0:e.j/e.i}function jg(e){var t=this;this.u=e,this.i=new Map,this.h=new Ns(function(){return $g(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new XS,this.l=!1}jg.prototype.destroy=function(){return this.h.destroy()};function $M(e,t,n){e.o=t,e.m=n}function $g(e){e.l=!0;var t=e.j.map(function(n){return n()});return e.j=[],Promise.all(t)}jg.prototype.queue=function(e,t,n,o,u){var a=this;Ot(this.h);var d=(this.i.get(e)||Promise.resolve()).then(function(){var p,g,y,w,T,M,L;return $(function(P){if(P.g==1)return D(P,HM(a,t),2);if(p=P.h,a.h.g)throw new q(2,9,7001);if(o)for(w in g=et(p),y=new yp(g),y.data)T=Number(w),M=y.data[T],L=y.g[T],a.m(M,L);return a.g.close(n,p.byteLength),a.o(KS(a.g),a.g.g),P.return(u(p))})});return this.i.set(e,d),d};function zM(e,t,n,o,u,a){Ot(e.h);var d=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new q(2,9,7001);if(u){var p=et(n);p=new yp(p);for(var g in p.data){var y=Number(g);e.m(p.data[y],p.g[y])}}return e.g.close(o,n.byteLength),e.o(KS(e.g),e.g.g),a(n)});e.i.set(t,d)}function VM(e){return $(function(t){return t.g==1?D(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}function HM(e,t){var n,o,u,a;return $(function(d){return d.g==1?(n=Di,o=e.u.request(n,t),u=function(){return o.abort()},e.j.push(u),D(d,o.promise,2)):(a=d.h,Ue(e.j,u),d.return(a.data))})}function hd(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new _t,e.onabort=function(o){o.preventDefault(),n.g.reject()},e.onerror=function(o){o.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}hd.prototype.abort=function(){var e=this;return $(function(t){if(t.g==1){try{e.i.abort()}catch{}return ce(t,2),D(t,e.g,4)}if(t.g!=2)return X(t,0);ie(t),te(t)})};function zg(e,t){return new Promise(function(n,o){var u=e.h.openCursor();u.onerror=o,u.onsuccess=function(){var a;return $(function(d){if(d.g==1)return u.result==null?(n(),d.return()):(a=u.result,D(d,t(a.key,a.value,a),2));a.continue(),te(d)})}})}hd.prototype.store=function(){return this.h},hd.prototype.promise=function(){return this.g};function Vg(e){this.h=e,this.g=[]}Vg.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function os(e,t){return pd(e,t,"readwrite")}function pd(e,t,n){n=e.h.transaction([t],n);var o=new hd(n,t);return e.g.push(o),o.promise().then(function(){Ue(e.g,o)},function(){Ue(e.g,o)}),o}function ss(e,t,n){this.h=new Vg(e),this.i=t,this.g=n}m=ss.prototype,m.destroy=function(){return this.h.destroy()},m.hasFixedKeySpace=function(){return!0},m.addSegments=function(){return YS(this.i)},m.removeSegments=function(e,t){return qS(this,this.i,e,t)},m.getSegments=function(e){var t=this,n;return $(function(o){return o.g==1?D(o,JS(t,t.i,e),2):(n=o.h,o.return(n.map(function(u){return t.Sh(u)})))})},m.addManifests=function(){return YS(this.g)},m.updateManifest=function(){return Promise.reject(new q(2,9,9016,"Cannot modify values in "+this.g))};function GM(e,t,n){e=os(e.h,e.g);var o=e.store();return o.get(t).onsuccess=function(){o.put(n,t)},e.promise()}m.updateManifestExpiration=function(e,t){var n=os(this.h,this.g),o=n.store();return o.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,o.put(u,e))},n.promise()},m.removeManifests=function(e,t){return qS(this,this.g,e,t)},m.getManifests=function(e){var t=this,n;return $(function(o){return o.g==1?D(o,JS(t,t.g,e),2):(n=o.h,o.return(Promise.all(n.map(function(u){return t.Pd(u)}))))})},m.getAllManifests=function(){var e=this,t,n;return $(function(o){return o.g==1?(t=pd(e.h,e.g,"readonly"),n=new Map,D(o,zg(t,function(u,a){var d;return $(function(p){if(p.g==1)return D(p,e.Pd(a),2);d=p.h,n.set(u,d),te(p)})}),2)):o.g!=3?D(o,t.promise(),3):o.return(n)})},m.Sh=function(e){return e},m.Pd=function(e){return Promise.resolve(e)};function YS(e){return Promise.reject(new q(2,9,9011,"Cannot add new value to "+e))}m.add=function(e,t){var n=this,o,u,a,d,p,g,y;return $(function(w){if(w.g==1){for(o=os(n.h,e),u=o.store(),a=[],d=R(t),p=d.next(),g={};!p.done;g={eh:void 0},p=d.next())y=p.value,g.eh=u.add(y),g.eh.onsuccess=(function(T){return function(){a.push(T.eh.result)}})(g);return D(w,o.promise(),2)}return w.return(a)})};function qS(e,t,n,o){e=os(e.h,t),t=e.store(),n=R(n);for(var u=n.next(),a={};!u.done;a={Qg:void 0},u=n.next())a.Qg=u.value,t.delete(a.Qg).onsuccess=(function(d){return function(){return o(d.Qg)}})(a);return e.promise()}function JS(e,t,n){var o,u,a,d,p,g,y;return $(function(w){if(w.g==1){for(o=pd(e.h,t,"readonly"),u=o.store(),a={},d=[],p=R(n),g=p.next(),y={};!g.done;y={Bf:void 0,ef:void 0},g=p.next())y.ef=g.value,y.Bf=u.get(y.ef),y.Bf.onsuccess=(function(T){return function(){T.Bf.result==null&&d.push(T.ef),a[T.ef]=T.Bf.result}})(y);return D(w,o.promise(),2)}if(d.length)throw new q(2,9,9012,"Could not find values for "+d);return w.return(n.map(function(T){return a[T]}))})}function ha(e){this.g=new Vg(e)}ha.prototype.destroy=function(){return this.g.destroy()},ha.prototype.getAll=function(){var e=this,t,n;return $(function(o){return o.g==1?(t=pd(e.g,"session-ids","readonly"),n=[],D(o,zg(t,function(u,a){n.push(a)}),2)):o.g!=3?D(o,t.promise(),3):o.return(n)})},ha.prototype.add=function(e){var t=os(this.g,"session-ids"),n=t.store();e=R(e);for(var o=e.next();!o.done;o=e.next())n.add(o.value);return t.promise()},ha.prototype.remove=function(e){var t=this,n;return $(function(o){return o.g==1?(n=os(t.g,"session-ids"),D(o,zg(n,function(u,a,d){e.includes(a.sessionId)&&d.delete()}),2)):D(o,n.promise(),0)})};function oi(){this.g=new Map}oi.prototype.destroy=function(){for(var e=[],t=R(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},oi.prototype.init=function(){var e=this;pa.forEach(function(u,a){(u=u())&&e.g.set(a,u)});for(var t=[],n=R(this.g.values()),o=n.next();!o.done;o=n.next())t.push(o.value.init());return Promise.all(t)};function QS(e){var t=null;if(e.g.forEach(function(n,o){n.getCells().forEach(function(u,a){u.hasFixedKeySpace()||t||(t={path:{Qb:o,bb:a},bb:u})})}),t)return t;throw new q(2,9,9013,"Could not find a cell that supports add-operations")}function XM(e,t){e.g.forEach(function(n,o){n.getCells().forEach(function(u,a){t({Qb:o,bb:a},u)})})}function gd(e,t,n){if(e=e.g.get(t),!e)throw new q(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new q(2,9,9013,"Could not find cell with name "+n);return t}function WM(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function KM(e){var t=Array.from(e.g.keys());if(!t.length)throw new q(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function YM(e){var t,n,o;return $(function(u){return u.g==1?(t=Array.from(e.g.values()),n=t.length>0,n||(o=pa,o.forEach(function(a){(a=a())&&t.push(a)})),D(u,Promise.all(t.map(function(a){return a.erase()})),2)):n?u.A(0):D(u,Promise.all(t.map(function(a){return a.destroy()})),0)})}function ZS(e,t){pa.set(e,t)}be("shaka.offline.StorageMuxer",oi),oi.unregister=function(e){pa.delete(e)},oi.register=ZS,oi.prototype.destroy=oi.prototype.destroy;var pa=new Map;function ga(){ss.apply(this,arguments)}U(ga,ss),ga.prototype.updateManifestExpiration=function(e,t){var n=this,o,u,a;return $(function(d){return o=os(n.h,n.g),u=o.store(),a=new _t,u.get(e).onsuccess=function(p){(p=p.target.result)?(p.expiration=t,u.put(p),a.resolve()):a.reject(new q(2,9,9012,"Could not find values for "+e))},D(d,Promise.all([o.promise(),a]),0)})},ga.prototype.Pd=function(e){var t,n,o,u,a,d;return $(function(p){if(p.g==1){for(t=[],n=0;n<e.periods.length;++n)o=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=o-e.periods[n].startTime,a=qM(e.periods[n],u),t.push(a);return D(p,Ow(t),2)}return d=p.h,p.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:d,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function qM(e,t){QM(e);for(var n=R(e.streams),o=n.next();!o.done;o=n.next());return e.streams.map(function(u){return JM(u,e.startTime,t)})}function JM(e,t,n){var o=e.initSegmentUri?eT(e.initSegmentUri):null,u=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:o,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(d){var p=eT(d.uri);return{startTime:t+d.startTime,endTime:t+d.endTime,dataKey:p,initSegmentKey:o,appendWindowStart:t,appendWindowEnd:a,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}ga.prototype.Sh=function(e){return{data:e.data}};function eT(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new q(2,9,9004,"Could not parse uri "+e)}function QM(e){var t=e.streams.filter(function(p){return p.contentType=="audio"});if(e=e.streams.filter(function(p){return p.contentType=="video"}),!t.every(function(p){return p.variantIds})||!e.every(function(p){return p.variantIds})){for(var n=R(t),o=n.next();!o.done;o=n.next())o.value.variantIds=[];for(n=R(e),o=n.next();!o.done;o=n.next())o.value.variantIds=[];if(n=0,e.length&&!t.length){o=n++;for(var u=R(e),a=u.next();!a.done;a=u.next())a.value.variantIds.push(o)}if(!e.length&&t.length)for(o=n++,u=R(t),a=u.next();!a.done;a=u.next())a.value.variantIds.push(o);if(e.length&&t.length)for(t=R(t),o=t.next();!o.done;o=t.next())for(o=o.value,u=R(e),a=u.next();!a.done;a=u.next()){a=a.value;var d=n++;o.variantIds.push(d),a.variantIds.push(d)}}}function md(){ss.apply(this,arguments)}U(md,ss),md.prototype.Pd=function(e){var t,n,o,u,a,d;return $(function(p){if(p.g==1){for(t=[],n=0;n<e.periods.length;++n){o=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=o-e.periods[n].startTime;for(var g=e.periods[n],y=[],w=R(g.streams),T=w.next();!T.done;T=w.next())T=T.value,T.variantIds.length!=0&&y.push(ZM(T,g.startTime,g.startTime+u));a=y,t.push(a)}return D(p,Ow(t),2)}return d=p.h,p.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:d,sequenceMode:!1})})};function ZM(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(o){return{startTime:t+o.startTime,endTime:t+o.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:o.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function Hg(){ss.apply(this,arguments)}U(Hg,ss),m=Hg.prototype,m.hasFixedKeySpace=function(){return!1},m.addSegments=function(e){return this.add(this.i,e)},m.addManifests=function(e){return this.add(this.g,e)},m.updateManifest=function(e,t){return GM(this,e,t)},m.Pd=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function tT(){this.m=this.j=this.i=this.h=this.g=this.l=null}m=tT.prototype,m.init=function(){var e=this,t=new _t,n=!1,o=new dt(function(){n=!0,t.reject(new q(2,9,9017))});typeof yd=="number"&&yd>0&&o.ka(yd);var u=f.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){o.stop();var a=u.result;e.l=a;var d=a.objectStoreNames;d=d.contains("manifest")&&d.contains("segment")?new ga(a,"segment","manifest"):null,e.g=d,d=a.objectStoreNames,d=d.contains("manifest-v2")&&d.contains("segment-v2")?new md(a,"segment-v2","manifest-v2"):null,e.h=d,d=a.objectStoreNames,d=d.contains("manifest-v3")&&d.contains("segment-v3")?new md(a,"segment-v3","manifest-v3"):null,e.i=d,d=a.objectStoreNames,d=d.contains("manifest-v5")&&d.contains("segment-v5")?new Hg(a,"segment-v5","manifest-v5"):null,e.j=d,a=a.objectStoreNames.contains("session-ids")?new ha(a):null,e.m=a,t.resolve()}},u.onupgradeneeded=function(){for(var a=u.result,d=R(["segment-v5","manifest-v5","session-ids"]),p=d.next();!p.done;p=d.next())p=p.value,a.objectStoreNames.contains(p)||a.createObjectStore(p,{autoIncrement:!0})},u.onerror=function(a){n||(o.stop(),t.reject(new q(2,9,9001,u.error)),a.preventDefault())},t},m.destroy=function(){var e=this;return $(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return D(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return D(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return D(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return D(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return D(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),te(t)}})},m.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},m.getEmeSessionCell=function(){return this.m},m.erase=function(){var e=this;return $(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return D(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return D(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return D(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return D(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),D(t,e6(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,D(t,e.init(),0)}})};function e6(){var e=new _t,t=f.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new q(2,9,9001,t.error)),n.preventDefault()},e}var yd=5;be("shaka.offline.indexeddb.StorageMechanismOpenTimeout",yd),ZS("idb",function(){return Me().yh()?new tT:null});function yr(e,t,n,o){this.g=e,this.i=t,this.h=n,this.l=o,this.j=["offline:",e,"/",t,"/",n,"/",o].join("")}yr.prototype.Qb=function(){return this.i},yr.prototype.bb=function(){return this.h},yr.prototype.key=function(){return this.l},yr.prototype.toString=function(){return this.j};function Gg(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var o=e[3];return o&&t!=null?new yr(t,n,o,Number(e[4])):null}function nT(e,t){this.h=e,this.g=t}function iT(e,t){var n=new Ye(null,0);n.rb(t.duration);var o=t.streams.filter(function(y){return y.type=="audio"}),u=t.streams.filter(function(y){return y.type=="video"});o=t6(e,o,u,n),u=t.streams.filter(function(y){return y.type==lt}).map(function(y){return vd(e,y,n)});var a=t.streams.filter(function(y){return y.type=="image"}).map(function(y){return vd(e,y,n)}),d=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var p=R(o.values()),g=p.next();!g.done;g=p.next())g=g.value,g.audio&&g.audio.encrypted&&(g.audio.drmInfos=d),g.video&&g.video.encrypted&&(g.video.drmInfos=d);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(o.values()),textStreams:u,imageStreams:a,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function t6(e,t,n,o){for(var u=new Set,a=R(t),d=a.next();!d.done;d=a.next()){d=R(d.value.variantIds);for(var p=d.next();!p.done;p=d.next())u.add(p.value)}for(a=R(n),d=a.next();!d.done;d=a.next())for(d=R(d.value.variantIds),p=d.next();!p.done;p=d.next())u.add(p.value);for(a=new Map,u=R(u),d=u.next();!d.done;d=u.next())d=d.value,a.set(d,{id:d,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=R(t),u=t.next();!u.done;u=t.next())for(d=u.value,u=vd(e,d,o),d=R(d.variantIds),p=d.next();!p.done;p=d.next())p=a.get(p.value),p.language=u.language,p.primary=p.primary||u.primary,p.audio=u;for(n=R(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=vd(e,u,o),u=R(u.variantIds),d=u.next();!d.done;d=u.next())d=a.get(d.value),d.primary=d.primary||t.primary,d.video=t;return a}function vd(e,t,n){var o=t.segments.map(function(u){return n6(e,u,t)});return n.ge(o),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vt(o),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([en(t.mimeType,t.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function n6(e,t,n){var o=new yr("segment",e.h,e.g,t.dataKey);return e=new Ve(t.startTime,t.endTime,function(){return[o.toString()]},0,null,t.initSegmentKey!=null?i6(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.If(t.thumbnailSprite),e}function i6(e,t){var n=new yr("segment",e.h,e.g,t);return new ni(function(){return[n.toString()]},0,null)}function rT(){this.g=null}m=rT.prototype,m.configure=function(){},m.start=function(e,t){var n=this,o,u,a,d,p,g,y;return $(function(w){switch(w.g){case 1:if(o=Gg(e),n.g=o,o==null||o.g!="manifest")throw new q(2,1,9004,e);return u=new oi,ve(w,2),D(w,u.init(),4);case 4:return D(w,gd(u,o.Qb(),o.bb()),5);case 5:return a=w.h,D(w,a.getManifests([o.key()]),6);case 6:return d=w.h,p=d[0],g=new nT(o.Qb(),o.bb()),y=iT(g,p),t.makeTextStreamsForClosedCaptions(y),w.return(y);case 2:return W(w),D(w,u.destroy(),7);case 7:G(w,0)}})},m.stop=function(){return Promise.resolve()},m.update=function(){},m.onExpirationUpdated=function(e,t){var n=this,o,u,a,d,p,g,y;return $(function(w){switch(w.g){case 1:return o=n.g,u=new oi,ce(w,2,3),D(w,u.init(),5);case 5:return D(w,gd(u,o.Qb(),o.bb()),6);case 6:return a=w.h,D(w,a.getManifests([o.key()]),7);case 7:if(d=w.h,p=d[0],g=p.sessionIds.includes(e),y=p.expiration==null||p.expiration>t,!g||!y){w.A(3);break}return D(w,a.updateManifestExpiration(o.key(),t),3);case 3:return W(w),D(w,u.destroy(),10);case 10:G(w,0);break;case 2:ie(w),w.A(3)}})},m.onInitialVariantChosen=function(){},m.banLocation=function(){},m.setMediaElement=function(){},Xo("application/x-offline-manifest",function(){return new rT});function oT(){}function sT(e,t){var n=Gg(e);return n&&n.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t},e=Ds(e)):e=n&&n.g=="segment"?r6(n.key(),n,t):io(new q(2,1,9004,e)),e}function r6(e,t,n){var o=new oi;return Ds(void 0).Xa(function(){return o.init()}).Xa(function(){return gd(o,t.Qb(),t.bb())}).Xa(function(u){return u.getSegments([t.key()])}).Xa(function(u){return{uri:t,data:u[0].data,headers:{},originalRequest:n}}).finally(function(){return o.destroy()})}be("shaka.offline.OfflineScheme",oT),oT.plugin=sT,Mr("offline",sT);function uT(e,t,n){var o,u,a,d,p,g;return $(function(y){switch(y.g){case 1:o=[];for(var w=[],T=R(n),M=T.next();!M.done;M=T.next()){M=M.value;for(var L=!1,P=R(w),N=P.next();!N.done;N=P.next())if(N=N.value,s6(N.info,M)){N.sessionIds.push(M.sessionId),L=!0;break}L||w.push({info:M,sessionIds:[M.sessionId]})}u=R(w),a=u.next();case 2:if(a.done){y.A(4);break}return d=a.value,p=o6(e,t,d),D(y,p,5);case 5:g=y.h,o=o.concat(g),a=u.next(),y.A(2);break;case 4:return y.return(o)}})}function o6(e,t,n){var o,u;return $(function(a){switch(a.g){case 1:return o=new Nf({tc:t,onError:function(){},uf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ce(a,2),o.configure(e),D(a,U4(o,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:X(a,3);break;case 2:return ie(a),D(a,o.destroy(),5);case 5:return a.return([]);case 3:return u=[],D(a,Promise.all(n.sessionIds.map(function(d){return $(function(p){if(p.g==1)return ce(p,2),D(p,j4(o,d),4);if(p.g!=2)return u.push(d),X(p,0);ie(p),te(p)})})),6);case 6:return D(a,o.destroy(),7);case 7:return a.return(u)}})}function s6(e,t){function n(o,u){return o.robustness==u.robustness&&o.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Je(e.audioCapabilities,t.audioCapabilities,n)&&Je(e.videoCapabilities,t.videoCapabilities,n)}function u6(e,t,n){var o=t.presentationTimeline.getDuration();return t=lT(t),{offlineUri:null,originalManifestUri:e,duration:o,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function Xg(e,t){var n=iT(new nT(e.Qb(),e.bb()),t),o=t.appMetadata||{};return n=lT(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:o,isIncomplete:t.isIncomplete||!1}}function lT(e){var t=[],n=bf(e.variants);n=R(n);for(var o=n.next();!o.done;o=n.next())t.push(zo(o.value));for(e=R(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Vo(n.value));return t}function l6(){this.g=new Map}function a6(e,t){var n=t.audio,o=t.video;if(n&&!o&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&o&&e.g.set(o.id,o.bandwidth||t.bandwidth),n&&o){var u=n.bandwidth||393216,a=o.bandwidth||t.bandwidth-u;a<=0&&(a=t.bandwidth),e.g.set(n.id,u),e.g.set(o.id,a)}}function f6(e,t){e.g.set(t.id,t.bandwidth||2048)}function aT(e,t){return e=e.g.get(t),e==null&&(e=0),e}function Cn(e){var t=this;if(e&&e.constructor!=we)throw new q(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Wb()):(this.h=Zs(),this.g=new jt,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new Ns(function(){var o,u,a,d,p;return $(function(g){switch(g.g){case 1:return D(g,Promise.all(t.l.map(function(y){return $g(y)})),2);case 2:for(o=function(){},u=[],a=R(t.i),d=a.next();!d.done;d=a.next())p=d.value,u.push(p.then(o,o));return D(g,Promise.all(u),3);case 3:if(!n){g.A(4);break}return D(g,t.g.destroy(),4);case 4:t.h=null,t.g=null,te(g)}})}),this.m=1e9}function Wg(){if(mr(Me()))e:{for(var e=R(pa.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}m=Cn.prototype,m.destroy=function(){return this.j.destroy()},m.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=sc(e,t)),Nr(this.h,e)},m.getConfiguration=function(){var e=Zs();return Nr(e,this.h,Zs()),e},m.Wb=function(){return this.g},m.store=function(e,t,n,o,u){var a=this,d=this.getConfiguration(),p=new jg(this.g);return this.l.push(p),t=c6(this,e,t||{},o||[],u||[],function(){var g;return $(function(y){return y.g==1?n?y.A(2):D(y,ts(e,a.g,d.manifest.retryParameters),3):(y.g!=2&&(n=y.h),g=sv(e,n||null),y.return(g()))})},d,p),t=new tn(t,function(){return $g(p)}),t.finally(function(){Ue(a.l,p)}),E6(this,t)};function c6(e,t,n,o,u,a,d,p){var g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye,ae;return $(function(he){switch(he.g){case 1:return xd(),y=g=null,w=new oi,L=M=T=null,ce(he,2,3),D(he,a(),5);case 5:return g=he.h,D(he,w6(e,t,g,d),6);case 6:if(P=he.h,Ti(e),N=!P.presentationTimeline.W()&&!P.presentationTimeline.Vc(),!N)throw new q(2,9,9005,t);O=R(o),F=O.next();case 7:if(F.done){he.A(9);break}return B=F.value,D(he,S6(e,B,P),10);case 10:V=he.h,P.imageStreams.push(V),Ti(e),F=O.next(),he.A(7);break;case 9:Y=R(u),J=Y.next();case 11:return J.done?(Z1(d.drm.clearKeys,P.variants),Q=P.variants.some(function(Te){if(Te.audio){for(var ke=R(Te.audio.drmInfos),Ke=ke.next();!Ke.done;Ke=ke.next())if(Ke.value.licenseServerUri.startsWith("data:"))return!0}if(Te.video){for(Te=R(Te.video.drmInfos),ke=Te.next();!ke.done;ke=Te.next())if(ke.value.licenseServerUri.startsWith("data:"))return!0}return!1}),ee=d.offline.usePersistentLicense,Q&&(ee=!1),D(he,e.md(P,function(Te){L=L||Te},d,ee),15)):(H=J.value,D(he,T6(e,P,H.uri,H.language,H.kind,H.mime,H.codecs),14));case 14:z=he.h,P.textStreams.push(z),Ti(e),J=Y.next(),he.A(11);break;case 15:if(y=he.h,Ti(e),L)throw L;return D(he,h6(P,y,d,ee),16);case 16:return D(he,w.init(),17);case 17:return Ti(e),D(he,QS(w),18);case 18:return T=he.h,Ti(e),se=p6(y,P,t,n,d,p,ee),fe=se.vk,ne=se.Dh,D(he,T.bb.addManifests([fe]),19);case 19:if(xe=he.h,Ti(e),M=xe[0],Ti(e),L)throw L;return D(he,d6(e,ne,M,fe,p,d,T.bb,P,y,ee),20);case 20:return Ti(e),hT(P,fe,y,ee),D(he,T.bb.updateManifest(M,fe),21);case 21:return Ti(e),ye=new yr("manifest",T.path.Qb,T.path.bb,M),he.return(Xg(ye,fe));case 3:return W(he),D(he,w.destroy(),22);case 22:if(!g){he.A(23);break}return D(he,g.stop(),23);case 23:if(!y){he.A(25);break}return D(he,y.destroy(),25);case 25:G(he,0);break;case 2:if(ae=ie(he),M==null){he.A(27);break}return D(he,fT(M),27);case 27:throw L||ae}})}function d6(e,t,n,o,u,a,d,p,g,y){var w,T,M,L,P,N,O,F,B,V,Y;return $(function(J){switch(J.g){case 1:if(w={},T=0,M=function(){if(e.j.g||u.l)throw new q(2,9,7001)},L=function(H,z){var Q,ee,se,fe,ne,xe,ye,ae,he;return $(function(Te){if(Te.g==1){for(Q=R(H),ee=Q.next(),se={};!ee.done;se={kc:void 0},ee=Q.next())se.kc=ee.value,M(),fe=jM(se.kc,a),ne=se.kc.i,xe=se.kc.h,ye=(function(ke){return function(Ke){var Re,pt,ht,At;return $(function(ut){switch(ut.g){case 1:if(Re=ke.kc.g,pt=Re.Yb(!1),!Re.aesKey||pt){ut.A(2);break}return D(ut,Kp(Ke,Re.aesKey,ke.kc.j),3);case 3:Ke=ut.h;case 2:return ht=Fg(Re),D(ut,d.addSegments([{data:Ke}]),4);case 4:At=ut.h,M(),w[ht]=At[0],T+=Ke.byteLength,te(ut)}})}})(se),ae=se.kc.g,(he=ae.Yb(!1))?zM(u,se.kc.groupId,he,ne,xe,ye):u.queue(se.kc.groupId,fe,ne,xe,ye);return D(Te,VM(u),2)}return M(),!z||u.l?Te.A(0):(hT(p,o,g,y),D(Te,d.updateManifest(n,o),0))})},P=!1,ce(J,2),!Kg(p)||!P||dT(p)){J.A(4);break}return D(J,L(t.filter(function(H){return H.h}),!0),5);case 5:return M(),t=t.filter(function(H){return!H.h}),N=w,O=T,w={},T=0,D(J,cT(d,n,o,N,O,function(){return Ti(e)}),6);case 6:M();case 4:if(P){J.A(7);break}return D(J,L(t,!1),8);case 8:return M(),F=w,B=T,w={},T=0,D(J,cT(d,n,o,F,B,function(){return M()}),9);case 9:M();case 7:X(J,0);break;case 2:return V=ie(J),Y=Object.values(w),D(J,d.removeSegments(Y,function(){}),10);case 10:throw V}})}function fT(e){var t,n,o,u;return $(function(a){switch(a.g){case 1:return t=new oi,D(a,t.init(),2);case 2:return D(a,QS(t),3);case 3:return n=a.h,o=new yr("manifest",n.path.Qb,n.path.bb,e),D(a,t.destroy(),4);case 4:return u=new Cn,D(a,u.remove(o.toString()),0)}})}function cT(e,t,n,o,u,a){var d,p,g,y,w,T,M,L,P,N,O;return $(function(F){switch(F.g){case 1:for(d=!1,ce(F,2),p=!0,g=R(n.streams),y=g.next();!y.done;y=g.next())for(w=y.value,T=R(w.segments),M=T.next();!M.done;M=T.next())L=M.value,P=L.pendingSegmentRefId?o[L.pendingSegmentRefId]:null,P!=null&&(L.dataKey=P,L.pendingSegmentRefId=void 0),P=L.pendingInitSegmentRefId?o[L.pendingInitSegmentRefId]:null,P!=null&&(L.initSegmentKey=P,L.pendingInitSegmentRefId=void 0),L.pendingSegmentRefId&&(p=!1),L.pendingInitSegmentRefId&&(p=!1);return n.size+=u,p&&(n.isIncomplete=!1),D(F,e.updateManifest(t,n),4);case 4:d=!0,a(),X(F,0);break;case 2:return N=ie(F),D(F,fT(t),5);case 5:if(d){F.A(6);break}return O=Object.values(o),D(F,e.removeSegments(O,function(){}),6);case 6:throw N}})}function h6(e,t,n,o){var u,a,d,p,g,y,w,T,M,L,P,N,O,F,B,V,Y,J,H,z,Q,ee,se,fe,ne,xe,ye,ae,he,Te;return $(function(ke){switch(ke.g){case 1:return u={width:1/0,height:1/0},y4(e,n.restrictions,u),D(ke,m1(t,e,o,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(a=[],d=n.preferredDecodingAttributes,p=n.preferredVideoCodecs,g=n.preferredAudioCodecs,y=n.preferredTextFormats,g1(e,p,g,d,y),w=R(e.variants),T=w.next();!T.done;T=w.next())M=T.value,a.push(zo(M));for(L=R(e.textStreams),P=L.next();!P.done;P=L.next())N=P.value,a.push(Vo(N));for(O=R(e.imageStreams),F=O.next();!F.done;F=O.next())B=F.value,a.push(cp(B));return D(ke,n.offline.trackSelectionCallback(a),3);case 3:for(V=ke.h,Y=e.presentationTimeline.getDuration(),J=0,H=R(V),z=H.next();!z.done;z=H.next())Q=z.value,ee=Q.bandwidth*Y/8,J+=ee;return ce(ke,4),D(ke,n.offline.downloadSizeCallback(J),6);case 6:if(se=ke.h,!se)throw new q(2,9,9014);X(ke,5);break;case 4:throw fe=ie(ke),fe instanceof q?fe:new q(2,9,9015);case 5:for(ne=new Set,xe=new Set,ye=new Set,ae=R(V),he=ae.next();!he.done;he=ae.next())Te=he.value,Te.type=="variant"&&ne.add(Te.id),Te.type=="text"&&xe.add(Te.id),Te.type=="image"&&ye.add(Te.id);e.variants=e.variants.filter(function(Ke){return ne.has(Ke.id)}),e.textStreams=e.textStreams.filter(function(Ke){return xe.has(Ke.id)}),e.imageStreams=e.imageStreams.filter(function(Ke){return ye.has(Ke.id)}),R6(e),te(ke)}})}function p6(e,t,n,o,u,a,d){var p=u6(n,t,o),g=u.offline.progressCallback;$M(a,function(P,N){p.size=N,g(p,P)},function(P,N){y&&d&&w==N&&xl(e,"cenc",P)});var y=Kg(t)&&!dT(t),w=null;y&&(w=_6.get(e.g.keySystem));for(var T=new l6,M=R(t.textStreams),L=M.next();!L.done;L=M.next())T.g.set(L.value.id,52);for(M=R(t.imageStreams),L=M.next();!L.done;L=M.next())f6(T,L.value);for(M=R(t.variants),L=M.next();!L.done;L=M.next())a6(T,L.value);return a=b6(a,T,t,u),u=a.streams,a=a.Dh,(T=e.g)&&d&&(T.initData=[]),{vk:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Ud(),streams:u,sessionIds:d?X1(e):[],drmInfo:T,appMetadata:o,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Dh:a}}function Kg(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function dT(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function hT(e,t,n,o){if(t.expiration=n.Ud(),n=X1(n),t.sessionIds=o?n:[],Kg(e)&&o&&!n.length)throw new q(2,9,9007)}m.remove=function(e){return Yg(this,g6(this,e))};function g6(e,t){var n,o,u,a,d,p;return $(function(g){switch(g.g){case 1:if(xd(),n=Gg(t),n==null||n.g!="manifest")throw new q(2,9,9004,t);return o=n,u=new oi,ve(g,2),D(g,u.init(),4);case 4:return D(g,gd(u,o.Qb(),o.bb()),5);case 5:return a=g.h,D(g,a.getManifests([o.key()]),6);case 6:return d=g.h,p=d[0],D(g,Promise.all([m6(e,p,u),y6(a,o,p)]),2);case 2:return W(g),D(g,u.destroy(),8);case 8:G(g,0)}})}function pT(e,t){for(var n=[],o=R(e.streams),u=o.next();!u.done;u=o.next())u=u.value,t&&u.type=="video"?n.push({contentType:en(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:en(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function m6(e,t,n){return $(function(o){return D(o,M6(e.g,e.h.drm,n,t),0)})}function y6(e,t,n){function o(){}var u=I6(n);return Xg(t,n),Promise.all([e.removeSegments(u,o),e.removeManifests([t.key()],o)])}m.Ok=function(){return Yg(this,v6(this))};function v6(e){var t,n,o,u,a,d,p,g,y,w;return $(function(T){switch(T.g){case 1:return xd(),t=e.g,n=e.h.drm,o=new oi,u=!1,ve(T,2),D(T,o.init(),4);case 4:a=[],WM(o,function(M){return a.push(M)}),d=R(a),p=d.next();case 5:if(p.done){T.A(2);break}return g=p.value,D(T,g.getAll(),8);case 8:return y=T.h,D(T,uT(n,t,y),9);case 9:return w=T.h,D(T,g.remove(w),10);case 10:w.length!=y.length&&(u=!0),p=d.next(),T.A(5);break;case 2:return W(T),D(T,o.destroy(),11);case 11:G(T,3);break;case 3:return T.return(!u)}})}m.list=function(){return Yg(this,x6())};function x6(){var e,t,n;return $(function(o){switch(o.g){case 1:return xd(),e=[],t=new oi,ve(o,2),D(o,t.init(),4);case 4:return n=Promise.resolve(),XM(t,function(u,a){n=n.then(function(){var d;return $(function(p){if(p.g==1)return D(p,a.getAllManifests(),2);d=p.h,d.forEach(function(g,y){g=Xg(new yr("manifest",u.Qb,u.bb,y),g),e.push(g)}),te(p)})})}),D(o,n,2);case 2:return W(o),D(o,t.destroy(),6);case 6:G(o,3);break;case 3:return o.return(e)}})}function w6(e,t,n,o){var u,a,d,p,g;return $(function(y){if(y.g==1)return u=null,a=e.g,d={networkingEngine:a,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(w){u=w},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return o.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(o.manifest),Ti(e),D(y,n.start(t,d),2);if(y.g!=3)return p=y.h,Ti(e),g=mT(p),D(y,Promise.all(gp(g,function(w){return w.createSegmentIndex()})),3);if(Ti(e),u)throw u;return y.return(p)})}function S6(e,t,n){var o,u,a,d,p,g,y,w,T,M,L,P,N,O,F;return $(function(B){switch(B.g){case 1:return D(B,gT(e,t),2);case 2:if(o=B.h,o!="text/vtt")throw new q(1,2,2017,t);return D(B,C6(t,e.g,e.h.streaming.retryParameters),3);case 3:if(u=B.h,a=cl(o),!a)throw new q(2,2,2014,o);for(d=a(),p={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},g=et(u),y=d.parseMedia(g,p,t,[]),w=[],T=R(y),M=T.next(),L={};!M.done;L={Rf:void 0,od:void 0},M=T.next())L.od=M.value,L.Rf=null,P=(function(V){return function(){return V.Rf==null&&(V.Rf=wn([t],[V.od.payload])),V.Rf||[]}})(L),N=new Ve(L.od.startTime,L.od.endTime,P,0,null,null,0,0,1/0),L.od.payload.includes("#xywh")&&(O=L.od.payload.split("#xywh=")[1].split(","),O.length===4&&N.If({height:parseInt(O[3],10),positionX:parseInt(O[0],10),positionY:parseInt(O[1],10),width:parseInt(O[2],10)})),w.push(N);if(F=o,!w.length){B.A(4);break}return D(B,ts(w[0].P()[0],e.g,e.h.manifest.retryParameters),5);case 5:F=B.h;case 4:return B.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vt(w),mimeType:F||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([en(F||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function T6(e,t,n,o,u,a,d){var p,g,y;return $(function(w){if(w.g==1)return a?w.A(2):D(w,gT(e,n),3);if(w.g!=2&&(a=w.h),p={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Yf(0,t.presentationTimeline.getDuration(),[n]),mimeType:a||"",codecs:d||"",kind:u,encrypted:!1,drmInfos:[],keyIds:new Set,language:o,originalLanguage:o,label:null,type:lt,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([en(a||"",d||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},g=en(p.mimeType,p.codecs),y=dl(g),!y)throw new q(2,2,2014,a);return w.return(p)})}function gT(e,t){var n;return $(function(o){switch(o.g){case 1:return ce(o,2),D(o,ts(t,e.g,e.h.streaming.retryParameters),4);case 4:n=o.h,X(o,3);break;case 2:ie(o);case 3:if(n)return o.return(n);throw new q(1,2,2011,t)}})}function C6(e,t,n){var o,u,a;return $(function(d){return d.g==1?(o=Di,u=un([e],n),u.method="GET",D(d,t.request(o,u).promise,2)):(a=d.h,d.return(a.data))})}m.md=function(e,t,n,o){var u=this,a;return $(function(d){return d.g==1?(a=new Nf({tc:u.g,onError:t,uf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a.configure(n.drm),D(d,N4(a,e.variants,o),2)):d.g!=3?D(d,G1(a),3):d.return(a)})};function b6(e,t,n,o){var u=new Map,a=mT(n),d=new Map;a=R(a);for(var p=a.next();!p.done;p=a.next()){p=p.value;var g=k6(e,t,n,p,o,u);d.set(p.id,g)}for(e=R(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&d.get(t.audio.id).variantIds.push(t.id),t.video&&d.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(d.values()),Dh:Array.from(u.values())}}function k6(e,t,n,o,u,a){var d={id:o.id,originalId:o.originalId,groupId:o.groupId,primary:o.primary,type:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,hdr:o.hdr,colorGamut:o.colorGamut,videoLayout:o.videoLayout,kind:o.kind,language:o.language,originalLanguage:o.originalLanguage,label:o.label,width:o.width||null,height:o.height||null,encrypted:o.encrypted,keyIds:o.keyIds,segments:[],variantIds:[],roles:o.roles,forced:o.forced,channelsCount:o.channelsCount,audioSamplingRate:o.audioSamplingRate,spatialAudio:o.spatialAudio,closedCaptions:o.closedCaptions,tilesLayout:o.tilesLayout,mssPrivateData:o.mssPrivateData,external:o.external,fastSwitching:o.fastSwitching,isAudioMuxedInVideo:o.isAudioMuxedInVideo},p=u.offline.numberOfParallelDownloads,g=p===0?o.id:0;return A6(o,n.presentationTimeline.Ib(),function(y,w){var T=Fg(y),M=void 0;if(!a.has(T)){var L=y.endTime-y.startTime;L=aT(t,o.id)*L,L=WS(e.g,L),a.set(T,new GS(y,L,g,!1,w))}y.aa&&(M=Fg(y.aa),a.has(M)||(L=aT(t,o.id)*.5,L=WS(e.g,L),a.set(M,new GS(y.aa,L,g,!0,w)))),d.segments.push({pendingInitSegmentRefId:M,initSegmentKey:M?0:null,startTime:y.startTime,endTime:y.endTime,appendWindowStart:y.appendWindowStart,appendWindowEnd:y.appendWindowEnd,timestampOffset:y.timestampOffset,tilesLayout:y.tilesLayout,pendingSegmentRefId:T,dataKey:0,mimeType:y.mimeType,codecs:y.codecs,thumbnailSprite:y.thumbnailSprite}),p!==0&&(g=(g+1)%p)}),d}function A6(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var o=e.segmentIndex.get(t);o;)n(o,t),o=e.segmentIndex.get(++t)}function Ti(e){if(e.j.g)throw new q(2,9,7001)}function xd(){if(!Wg())throw new q(2,9,9e3)}function Yg(e,t){return $(function(n){return n.g==1?(e.i.push(t),ve(n,2),D(n,t,4)):n.g!=2?n.return(n.h):(W(n),Ue(e.i,t),G(n,0))})}function E6(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Ue(e.i,n)})}function I6(e){var t=new Set;e=R(e.streams);for(var n=e.next();!n.done;n=e.next()){n=R(n.value.segments);for(var o=n.next();!o.done;o=n.next())o=o.value,o.initSegmentKey!=null&&t.add(o.initSegmentKey),t.add(o.dataKey)}return Array.from(t)}function M6(e,t,n,o){var u,a,d;return $(function(p){return p.g==1?o.drmInfo?(u=KM(n),a=o.sessionIds.map(function(g){return{sessionId:g,keySystem:o.drmInfo.keySystem,licenseUri:o.drmInfo.licenseServerUri,serverCertificate:o.drmInfo.serverCertificate,audioCapabilities:pT(o,!1),videoCapabilities:pT(o,!0)}}),D(p,uT(t,e,a),2)):p.return():p.g!=3?(d=p.h,D(p,u.remove(d),3)):D(p,u.add(a.filter(function(g){return!d.includes(g.sessionId)})),0)})}function mT(e){for(var t=new Set,n=R(e.variants),o=n.next();!o.done;o=n.next())o=o.value,o.audio&&t.add(o.audio),o.video&&t.add(o.video);for(n=R(e.textStreams),o=n.next();!o.done;o=n.next())t.add(o.value);for(e=R(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function R6(e){e.variants.map(function(a){return a.video});var t=new Set(e.variants.map(function(a){return a.audio}));e=e.textStreams;for(var n=R(t),o=n.next();!o.done;o=n.next()){o=R(t);for(var u=o.next();!u.done;u=o.next());}for(t=R(e),n=t.next();!n.done;n=t.next())for(n=R(e),o=n.next();!o.done;o=n.next());}be("shaka.offline.Storage",Cn),Cn.deleteAll=function(){var e;return $(function(t){return t.g==1?(e=new oi,ve(t,2),D(t,YM(e),2)):t.g!=5?(W(t),D(t,e.destroy(),5)):G(t,0)})},Cn.prototype.list=Cn.prototype.list,Cn.prototype.removeEmeSessions=Cn.prototype.Ok,Cn.prototype.remove=Cn.prototype.remove,Cn.prototype.store=Cn.prototype.store,Cn.prototype.getNetworkingEngine=Cn.prototype.Wb,Cn.prototype.getConfiguration=Cn.prototype.getConfiguration,Cn.prototype.configure=Cn.prototype.configure,Cn.prototype.destroy=Cn.prototype.destroy,Cn.support=Wg;var _6=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");Kx("offline",Wg);function Mn(){}function Vn(e,t){for(e={priority:t||0,callback:e},t=0;t<ma.length;t++)if(ma[t].priority<e.priority){ma.splice(t,0,e);return}ma.push(e)}be("shaka.polyfill",Mn),Mn.register=Vn,Mn.installAll=function(){for(var e=R(ma),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){st("Error installing polyfill!",n)}}};var ma=[];function yT(){}function vT(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=R(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())L6(t.value)}function L6(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Mn.Aria=yT,yT.install=vT,Vn(vT);function wd(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}wd.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=R(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=R(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},wd.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function xT(e){return e.startsWith("com.apple")?"cbcs":e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("org.w3")||e.startsWith("com.huawei")?"cenc":(st("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function wT(e){if(!e)return!1;e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function qg(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&Me().ed())}function ST(){}var ya;function TT(){Me().Kf()&&!ya&&!navigator.emeEncryptionSchemePolyfilled&&navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration&&(ya=navigator.requestMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=P6,navigator.emeEncryptionSchemePolyfilled=!0)}function P6(e,t){var n=this,o;return $(function(u){return u.g==1?D(u,ya.call(n,e,t),2):(o=u.h,wT(o)?(navigator.requestMediaKeySystemAccess=ya,u.return(o)):(navigator.requestMediaKeySystemAccess=CT,u.return(CT.call(n,e,t))))})}function CT(e,t){var n=this,o,u,a,d,p,g,y,w,T,M,L,P;return $(function(N){if(N.g==1){for(o=xT(e),u=[],a=R(t),d=a.next();!d.done;d=a.next())p=d.value,g=bT(p.videoCapabilities,o),y=bT(p.audioCapabilities,o),p.videoCapabilities&&p.videoCapabilities.length&&!g.length||p.audioCapabilities&&p.audioCapabilities.length&&!y.length||(w=Object.assign({},p),w.videoCapabilities=g,w.audioCapabilities=y,u.push(w));if(!u.length)throw T=Error("Unsupported keySystem or supportedConfigurations."),T.name="NotSupportedError",T.code=DOMException.NOT_SUPPORTED_ERR,T;return D(N,ya.call(n,e,u),2)}return M=N.h,P=L=null,u[0]&&(u[0].videoCapabilities&&(L=u[0].videoCapabilities[0].encryptionScheme),u[0].audioCapabilities&&(P=u[0].audioCapabilities[0].encryptionScheme)),N.return(new wd(M,L,P))})}function bT(e,t){return e&&e.filter(function(n){return qg(n.encryptionScheme,t)})}Mn.EmeEncryptionScheme=ST,ST.install=TT,Vn(TT);function kT(){}function AT(){if(f.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",vu),document.addEventListener("webkitfullscreenerror",vu),document.addEventListener("mozfullscreenchange",vu),document.addEventListener("mozfullscreenerror",vu),document.addEventListener("MSFullscreenChange",vu),document.addEventListener("MSFullscreenError",vu)}}function vu(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Mn.Fullscreen=kT,kT.install=AT,Vn(AT);function ET(){}var va;function IT(){Me().Kf()&&!va&&!navigator.mediaCapabilitiesEncryptionSchemePolyfilled&&navigator.mediaCapabilities&&(va=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=D6,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0)}function D6(e){var t=this,n,o;return $(function(u){switch(u.g){case 1:return D(u,va.call(t,e),2);case 2:if(n=u.h,!n.supported||!e.keySystemConfiguration)return u.return(n);if(o=n.keySystemAccess,wT(o))return navigator.mediaCapabilities.decodingInfo=va,u.return(n);if(navigator.mediaCapabilities.decodingInfo=MT,o){u.A(3);break}return D(u,RT(e),4);case 4:return n.keySystemAccess=u.h,u.return(n);case 3:return u.return(MT.call(t,e))}})}function MT(e){var t=this,n,o,u,a,d,p,g;return $(function(y){switch(y.g){case 1:return o=n=null,!e.keySystemConfiguration||(u=e.keySystemConfiguration,a=u.keySystem,o=u.audio&&u.audio.encryptionScheme,n=u.video&&u.video.encryptionScheme,d=xT(a),p={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},qg(o,d)&&qg(n,d))?D(y,va.call(t,e),2):y.return(p);case 2:if(g=y.h,g.keySystemAccess){g.keySystemAccess=new wd(g.keySystemAccess,n,o),y.A(3);break}if(!e.keySystemConfiguration){y.A(3);break}return D(y,RT(e),5);case 5:g.keySystemAccess=y.h;case 3:return y.return(g)}})}function RT(e){var t,n;return $(function(o){if(o.g==1){var u=e.keySystemConfiguration,a=[],d=[];return u.audio&&a.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:u.audio.encryptionScheme}),u.video&&d.push({robustness:u.video.robustness||"",contentType:e.video.contentType,encryptionScheme:u.video.encryptionScheme}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},a.length&&(u.audioCapabilities=a),d.length&&(u.videoCapabilities=d),t=u,D(o,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=o.h,o.return(n)})}Mn.MCapEncryptionScheme=ET,ET.install=IT,Vn(IT,-2);function Sd(){}function _T(){Me().cc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Sd.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=O6)}function O6(e){var t,n,o,u,a,d,p,g,y,w,T;return $(function(M){switch(M.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},Me(),n=e.video,o=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(u=n.contentType,a=Ko().canPlayType(u)!="",!a)||o&&(d=o.contentType,p=Ko().canPlayType(d)!="",!p))return M.return(t)}else return M.return(t);M.A(2);break}if(!mr())return M.return(t);if(!n){M.A(3);break}return D(M,N6(n),4);case 4:if(g=M.h,!g)return M.return(t);case 3:if(o){var L=Me().Oa(),P=o.contentType;if(L==="CAST"&&o.spatialRendering&&(P+="; spatialRendering=true"),y=jn(P),!y)return M.return(t)}case 2:return e.keySystemConfiguration?(w=e.keySystemConfiguration,D(M,U6(n,o,w),6)):(t.supported=!0,M.return(t));case 6:(T=M.h)&&(t.supported=!0,t.keySystemAccess=T);case 5:return M.return(t)}})}function N6(e){var t,n,o;return $(function(u){return u.g==1?(t=Me(),n=t.Oa(),n!=="CAST"?u.A(2):D(u,B6(e),3)):u.g!=2?(o=u.h,u.return(o)):u.return(jn(e.contentType))})}function U6(e,t,n){var o,u,a,d,p,g,y,w,T,M,L;return $(function(P){switch(P.g){case 1:if(o=[],u=[],n.audio&&(a={robustness:n.audio.robustness||"",contentType:t.contentType},Me().si()&&t.contentType.includes('codecs="ac-3"')&&(a.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(a.encryptionScheme=n.audio.encryptionScheme),o.push(a)),n.video&&(d={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(d.encryptionScheme=n.video.encryptionScheme),u.push(d)),p={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},o.length&&(p.audioCapabilities=o),u.length&&(p.videoCapabilities=u),g=e?e.contentType:"",y=t?t.contentType:"",w=ci(g)+";"+eo(g),T=ci(y)+";"+eo(y),M=n.keySystem,L=null,ce(P,2),Ps.has(w+"#"+T+"#"+M)){L=Ps.get(w+"#"+T+"#"+M)||null,P.A(4);break}return D(P,navigator.requestMediaKeySystemAccess(n.keySystem,[p]),5);case 5:L=P.h,Ps.set(w+"#"+T+"#"+M,L);case 4:X(P,3);break;case 2:ie(P);case 3:return P.return(L)}})}function B6(e){var t,n,o,u,a;return $(function(d){if(d.g==1){if(!(f.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return d.return(jn(e.contentType));switch(t=e.contentType,e.width&&e.height&&e.width>1280&&e.height>720&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(n=Math.round(e.framerate),n<24||n>30)&&(t+="; framerate="+e.framerate),o=e.transferFunction||"",o){case"":case"srgb":break;case"pq":t+="; eotf=smpte2084";break;case"hlg":t+="; eotf=arib-std-b67";break;default:return d.return(!1)}return u=!1,a=F6,a.has(t)?(u=a.get(t),d.A(2)):D(d,cast.__platform__.canDisplayType(t),3)}return d.g!=2&&(u=d.h,a.set(t,u)),d.return(u)})}Mn.MediaCapabilities=Sd,Sd.install=_T,Sd.originalMcap=null;var F6=new Map;Vn(_T,-1);function LT(){}function PT(){var e=Me(),t=e.Ea()==="WEBKIT"?e.za():null;for((f.MediaSource||f.ManagedMediaSource)&&t&&f.MediaSource&&(t<=12?(DT(),j6()):t<=15&&DT()),e=R(e.Ei()),t=e.next();!t.done;t=e.next())z6(t.value);(f.MediaSource||f.ManagedMediaSource)&&$6(),f.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&V6()}function DT(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,ft.apply(0,arguments));return t.abort=function(){},t}}function j6(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function $6(){if(f.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return al(n)!="mp2t"&&e(n)}}if(f.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);f.ManagedMediaSource.isTypeSupported=function(n){return al(n)!="mp2t"&&t(n)}}}function z6(e){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(o){return eo(o)!=e&&t(o)},f.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);f.ManagedMediaSource.isTypeSupported=function(o){return eo(o)!=e&&n(o)}}}function V6(){var e=MediaSource.isTypeSupported;Me().$i()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),o=n.findIndex(function(d){return d.startsWith("codecs=")});if(o<0)return e(t);var u=n[o].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=u.findIndex(function(d){return d.startsWith("vp09")});return a>=0&&(u[a]="vp9",n[o]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}Mn.MediaSource=LT,LT.install=PT,Vn(PT);function OT(){}function NT(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?H6():f.orientation!=null&&G6())}function H6(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function G6(){function e(){switch(f.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new Td;screen.orientation=t,e(),f.addEventListener("orientationchange",function(){e();var n=new Ie("change");t.dispatchEvent(n)})}Mn.Orientation=OT,OT.install=NT;function Td(){Tt.call(this),this.type="",this.angle=0}U(Td,Tt),Td.prototype.lock=function(e){function t(o){return screen.lockOrientation?screen.lockOrientation(o):screen.mozLockOrientation?screen.mozLockOrientation(o):screen.msLockOrientation?screen.msLockOrientation(o):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Td.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Vn(NT);function Jg(){}var Qg,Zg,em,tm,nm,im;function UT(e){f.HTMLVideoElement&&f.WebKitMediaKeys&&f.shakaMediaKeysPolyfill!=om&&(e!==void 0&&e&&(Qg=!0,Zg=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),em=HTMLMediaElement.prototype.setMediaKeys,tm=f.MediaKeys,nm=f.MediaKeySystemAccess,im=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=W6,f.MediaKeys=xa,f.MediaKeySystemAccess=Cd,navigator.requestMediaKeySystemAccess=X6,f.shakaMediaKeysPolyfill=om,kf.clear(),Ps.clear())}function X6(e,t){try{var n=new Cd(e,t);return Promise.resolve(n)}catch(o){return Promise.reject(o)}}function W6(e){var t=this.mediaKeys;return t&&t!=e&&BT(t,null),delete this.mediaKeys,(this.mediaKeys=e)?BT(e,this):Promise.resolve()}function K6(e){if(e=et(e.initData),Zn(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=qr(e.subarray(4),!0),e=Xi(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=_i(e),this.dispatchEvent(t)}Mn.PatchedMediaKeysApple=Jg,Jg.uninstall=function(){f.shakaMediaKeysPolyfill==om&&Qg&&(Qg=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Zg),HTMLMediaElement.prototype.setMediaKeys=em,f.MediaKeys=tm,f.MediaKeySystemAccess=nm,navigator.requestMediaKeySystemAccess=im,Zg=im=em=nm=tm=null,f.shakaMediaKeysPolyfill="",kf.clear(),Ps.clear())},Jg.install=UT;function Cd(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=R(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var o=!1,u=!1;if(n.audioCapabilities)for(var a=R(n.audioCapabilities),d=a.next();!d.done;d=a.next())d=d.value,d.contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,d.contentType.split(";")[0])&&(t.audioCapabilities.push(d),u=!0));if(n.videoCapabilities)for(n=R(n.videoCapabilities),a=n.next();!a.done;a=n.next())a=a.value,a.contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),u=!0));o||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Cd.prototype.createMediaKeys=function(){var e=new xa(this.keySystem);return Promise.resolve(e)},Cd.prototype.getConfiguration=function(){return this.g};function xa(e){this.h=new WebKitMediaKeys(e),this.g=new Le}xa.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new rm(this.h)},xa.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function BT(e,t){if(e.g.Qa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",K6);try{return qs(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}xa.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function rm(e){Tt.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Le,this.sessionId="",this.expiration=NaN,this.closed=new _t,this.keyStatuses=new FT,this.onkeystatuseschange=null}U(rm,Tt),m=rm.prototype,m.generateRequest=function(e,t){var n=this;this.h=new _t;try{var o=this.l.createSession("video/mp4",et(t));this.i=o,this.sessionId=o.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.Kc()==null?"license-request":"license-renewal").set("message",_i(u.message)),u=new Ie("message",u),n.dispatchEvent(u)}),this.j.D(o,"webkitkeyadded",function(){n.g&&(bd(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(o,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:bd(n,"output-not-allowed");break;default:bd(n,"internal-error")}}),bd(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},m.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},m.update=function(e){this.g=new _t;try{this.i.update(et(e))}catch(t){this.g.reject(t)}return this.g},m.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Qa()}catch(e){this.closed.reject(e)}return this.closed},m.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function bd(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Ie("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function FT(){this.size=0,this.g=void 0}m=FT.prototype,m.Kc=function(){return this.g},m.forEach=function(e){this.g&&e(this.g,Mf.value())},m.get=function(e){if(this.has(e))return this.g},m.has=function(e){var t=Mf.value();return!!(this.g&&wr(e,t))},m.entries=function(){},m.keys=function(){},m.values=function(){};var om="apple";Vn(function(){f.HTMLVideoElement&&f.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||UT())});function jT(){}function $T(){if(f.MediaKeys){var e=Me();MediaKeys.prototype.setServerCertificate&&e.pe()||(MediaKeys.prototype.setServerCertificate=Y6)}}function Y6(){return Promise.resolve(!1)}Mn.PatchedMediaKeysCert=jT,jT.install=$T,Vn($T);function zT(){}function VT(){if(!(!f.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)fm="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=q6,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=J6,f.MediaKeys=wa,f.MediaKeySystemAccess=kd,f.shakaMediaKeysPolyfill=Q6}}function sm(e){var t=fm;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function q6(e,t){try{var n=new kd(e,t);return Promise.resolve(n)}catch(o){return Promise.reject(o)}}function J6(e){var t=this.mediaKeys;return t&&t!=e&&HT(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&HT(e,this),Promise.resolve()}Mn.PatchedMediaKeysWebkit=zT,zT.install=VT;function kd(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var o=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=R(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var d={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes,sessionTypes:["temporary"],label:a.label},p=!1;if(a.audioCapabilities)for(var g=R(a.audioCapabilities),y=g.next();!y.done;y=g.next())y=y.value,y.contentType&&(p=!0,u.canPlayType(y.contentType.split(";")[0],this.g)&&(d.audioCapabilities.push(y),o=!0));if(a.videoCapabilities)for(g=R(a.videoCapabilities),y=g.next();!y.done;y=g.next())y=y.value,y.contentType&&(p=!0,u.canPlayType(y.contentType,this.g)&&(d.videoCapabilities.push(y),o=!0));if(p||(o=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),a.persistentState=="required"&&(n?(d.persistentState="required",d.sessionTypes=["persistent-license"]):o=!1),o){this.h=d;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}kd.prototype.createMediaKeys=function(){var e=new wa(this.g);return Promise.resolve(e)},kd.prototype.getConfiguration=function(){return this.h};function wa(e){this.l=e,this.h=null,this.g=new Le,this.i=[],this.j=new Map}function HT(e,t){e.h=t,e.g.Qa();var n=fm;t&&(e.g.D(t,n+"needkey",function(o){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=_i(o.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(o){var u=um(e,o.sessionId);u&&(o=new Map().set("messageType",u.keyStatuses.Kc()==null?"licenserequest":"licenserenewal").set("message",o.message),o=new Ie("message",o),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(o))}),e.g.D(t,n+"keyadded",function(o){(o=um(e,o.sessionId))&&o.ready()}),e.g.D(t,n+"keyerror",function(o){var u=um(e,o.sessionId);if(u){var a=Error("EME v0.1b key error"),d=o.errorCode;d.systemCode=o.systemCode,a.errorCode=d,!o.sessionId&&u.h?(o.systemCode==45&&(a.message="Unsupported session type."),u.h.reject(a),u.h=null):o.sessionId&&u.g?(u.g.reject(a),u.g=null):(a=o.systemCode,o.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ad(u,"output-restricted"):a==1?Ad(u,"expired"):Ad(u,"internal-error"))}}))}wa.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new lm(t,this.l,e),this.i.push(e),e},wa.prototype.setServerCertificate=function(){return Promise.resolve(!1)},wa.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function um(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function lm(e,t,n){Tt.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new _t,this.keyStatuses=new XT,this.onkeystatuseschange=null}U(lm,Tt),m=lm.prototype,m.ready=function(){Ad(this,"usable"),this.g&&this.g.resolve(),this.g=null};function GT(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var o=et(Xi("LOAD_SESSION|"+n));else{var u=Xi("PERSISTENT|");o=sn(u,t)}else o=et(t)}catch(d){return Promise.reject(d)}e.h=new _t;var a=sm("generateKeyRequest");try{e.j[a](e.i,o)}catch(d){if(d.name!="InvalidStateError")return e.h=null,Promise.reject(d);new dt(function(){try{e.j[a](e.i,o)}catch(p){e.h.reject(p),e.h=null}}).ka(.01)}return e.h}function am(e,t,n){if(e.g)e.g.then(function(){return am(e,t,n)}).catch(function(){return am(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var o=Ht(n),u=JSON.parse(o);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),o=Li(u.keys[0].k),u=Li(u.keys[0].kid)}else o=et(n),u=null;var a=sm("addKey");try{e.j[a](e.i,o,u,e.sessionId)}catch(d){e.g.reject(d),e.g=null}}}function Ad(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Ie("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}m.generateRequest=function(e,t){return GT(this,t,null)},m.load=function(e){return this.l=="persistent-license"?GT(this,null,e):Promise.reject(Error("Not a persistent session."))},m.update=function(e){var t=new _t;return am(this,t,e),t},m.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=sm("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},m.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function XT(){this.size=0,this.g=void 0}m=XT.prototype,m.Kc=function(){return this.g},m.forEach=function(e){this.g&&e(this.g,Mf.value())},m.get=function(e){if(this.has(e))return this.g},m.has=function(e){var t=Mf.value();return!!(this.g&&wr(e,t))},m.entries=function(){},m.keys=function(){},m.values=function(){};var fm="",Q6="webkit";Vn(VT);function WT(){}function KT(){if(f.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=eR,Object.defineProperty(e,"disablePictureInPicture",{get:nR,set:iR,enumerable:!0,configurable:!0}),document.exitPictureInPicture=tR,document.addEventListener("webkitpresentationmodechanged",Z6,!0))}}function Z6(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function eR(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function tR(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function nR(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function iR(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Mn.PiPWebkit=WT,WT.install=KT,Vn(KT);function YT(){}function qT(){f.crypto&&("randomUUID"in f.crypto||(f.crypto.randomUUID=rR))}function rR(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Mn.RandomUUID=YT,YT.install=qT,Vn(qT);function JT(){}function QT(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:oR})}function oR(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Mn.Symbol=JT,JT.install=QT,Vn(QT);function ZT(){}function eC(){for(var e=R([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())t=t.value,t.prototype.indexOf||(t.prototype.indexOf=sR),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=uR),t.prototype.includes||(t.prototype.includes=lR)}function sR(e,t){return Array.prototype.indexOf.call(this,e,t)}function uR(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function lR(e,t){return this.indexOf(e,t)!==-1}Mn.TypedArray=ZT,ZT.install=eC,Vn(eC);function tC(){}function nC(){if(f.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Mn.VideoPlayPromise=tC,tC.install=nC,Vn(nC);function iC(){}function rC(){if(f.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||typeof Ko().webkitDroppedFrameCount=="number")&&(e.getVideoPlaybackQuality=aR)}}function aR(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Mn.VideoPlaybackQuality=iC,iC.install=rC,Vn(rC);function oC(){}function sC(){if(!f.VTTCue&&f.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=cm;else if(t==6)e=fR;else{try{var n=!!cm(1,2,"")}catch{n=!1}n&&(e=cm)}e&&(f.VTTCue=function(o,u,a){return e(o,u,a)})}}function cm(e,t,n){return new f.TextTrackCue(e,t,n)}function fR(e,t,n){return new f.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Mn.VTTCue=oC,oC.install=sC,Vn(sC);function Sn(e){Tt.call(this),this.g=e,this.m=null,this.h=[],this.j=-1,this.i=this.l=null,this.o=new Le}U(Sn,Tt),m=Sn.prototype,m.destroy=function(){var e=this;return $(function(t){if(t.g==1)return D(t,e.removeAllItems(),2);e.g=null,e.o&&(e.o.release(),e.o=null),Tt.prototype.release.call(e),te(t)})},m.configure=function(e){this.m=e},m.getConfiguration=function(){return this.m},m.getCurrentItem=function(){return this.h.length&&this.j>=0&&this.j<this.h.length?this.h[this.j]:null},m.getCurrentItemIndex=function(){return this.j},m.getItems=function(){return this.h.slice()},m.insertItems=function(e){this.h.push.apply(this.h,le(e)),this.dispatchEvent(new Ie("itemsinserted"))},m.removeAllItems=function(){var e=this,t,n,o,u;return $(function(a){if(a.g==1)return e.o.Qa(),e.h.length&&e.j>=0?D(a,e.g.Bc(),2):a.A(2);if(a.g!=4){for(t=[],e.i&&(e.i.preloadManager.j||t.push(e.i.preloadManager.destroy()),e.i=null),e.l&&(e.l.preloadManager.j||t.push(e.l.preloadManager.destroy()),e.l=null),n=R(e.h),o=n.next();!o.done;o=n.next())u=o.value,u.preloadManager&&!u.preloadManager.j&&t.push(u.preloadManager.destroy());return t.length?D(a,Promise.all(t),4):a.A(4)}e.h=[],e.j=-1,e.dispatchEvent(new Ie("itemsremoved")),te(a)})},m.playItem=function(e){var t=this,n,o,u,a,d,p,g,y,w,T,M,L,P,N,O,F,B;return $(function(V){switch(V.g){case 1:if(t.o.Qa(),!t.h.length||e>=t.h.length)throw new q(2,7,7007);if(n=t.getCurrentItem(),o=t.h[e],t.j!=e&&(t.j=e,t.dispatchEvent(new Ie("currentitemchanged"))),u=t.g.h,a=t.m?t.m.preloadNextUrlWindow:0,a>0&&(d=!1,t.o.D(u,"timeupdate",function(){var Y,J,H,z;return $(function(Q){switch(Q.g){case 1:if(t.l||t.h.length<=1||d||t.g.W()||!u.duration)return Q.return();if(Y=t.g.Va().end-u.currentTime,isNaN(Y)){Q.A(0);break}if(!(Y<=a)){Q.A(0);break}if(J=t.m&&t.m.repeatMode,H=null,t.j+1<t.h.length?H=t.h[t.j+1]:J==1&&(H=t.h[0]),!H||H.preloadManager&&!H.preloadManager.j){Q.A(0);break}return d=!0,z=null,ce(Q,5),D(Q,t.g.preload(H.manifestUri,H.startTime,H.mimeType,H.config),7);case 7:z=Q.h,X(Q,6);break;case 5:ie(Q),z=null;case 6:t.l={item:H,preloadManager:z},d=!1,te(Q)}})})),t.o.D(t.g,"complete",function(){var Y=t.m&&t.m.repeatMode,J=!1;if(Y==2)J=!0;else{var H=t.j+1;H<t.h.length?t.playItem(H):Y==1&&(t.h.length==1?J=!0:t.playItem(0))}J&&(u.paused?(u.currentTime=t.g.Va().start,u.play()):t.o.D(u,"paused",function(){u.currentTime=t.g.Va().start,u.play()}))}),p=o.manifestUri,o.preloadManager&&!o.preloadManager.j&&(p=o.preloadManager),g=!1,t.l&&t.l.item==o&&t.l.preloadManager?p=t.l.preloadManager:t.i&&t.i.item==o&&t.i.preloadManager&&(p=t.i.preloadManager,g=!0),!t.i){V.A(2);break}if(g||t.i.preloadManager.j){V.A(3);break}return D(V,t.i.preloadManager.destroy(),3);case 3:t.i=null;case 2:if(!(t.m&&t.m.preloadPrevItem&&n&&t.g.m===In)){V.A(5);break}return y=null,ce(V,6),D(V,t.g.dj(),8);case 8:y=V.h,X(V,7);break;case 6:ie(V),y=null;case 7:t.i={item:n,preloadManager:y};case 5:return o.config&&(t.g.Ii(),t.g.configure(o.config)),D(V,t.g.load(p,o.startTime,o.mimeType),9);case 9:if(t.l=null,o.extraText)for(w=R(o.extraText),T=w.next();!T.done;T=w.next())M=T.value,M.mime?t.g.Md(M.uri,M.language,M.kind,M.mime,M.codecs):t.g.Md(M.uri,M.language,M.kind);if(o.extraThumbnail)for(L=R(o.extraThumbnail),P=L.next();!P.done;P=L.next())N=P.value,t.g.Le(N);if(o.extraChapter)for(O=R(o.extraChapter),F=O.next();!F.done;F=O.next())B=F.value,t.g.Ke(B.uri,B.language,B.mime);te(V)}})},be("shaka.queue.QueueManager",Sn),Sn.prototype.playItem=Sn.prototype.playItem,Sn.prototype.removeAllItems=Sn.prototype.removeAllItems,Sn.prototype.insertItems=Sn.prototype.insertItems,Sn.prototype.getItems=Sn.prototype.getItems,Sn.prototype.getCurrentItemIndex=Sn.prototype.getCurrentItemIndex,Sn.prototype.getCurrentItem=Sn.prototype.getCurrentItem,Sn.prototype.getConfiguration=Sn.prototype.getConfiguration,Sn.prototype.configure=Sn.prototype.configure,Sn.prototype.destroy=Sn.prototype.destroy,Rc=function(e){return new Sn(e)};function Ci(){}Ci.prototype.parseInit=function(){},Ci.prototype.setSequenceMode=function(){},Ci.prototype.setManifestType=function(){},Ci.prototype.parseMedia=function(e,t){var n=null,o=[];e=Ht(e).split(/\r?\n/),e=R(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=cR.exec(u))){var a=dR.exec(u[1]);a=parseInt(a[1],10)*60+parseFloat(a[2].replace(",",".")),u=new Ut(a,t.segmentEnd?t.segmentEnd:a+2,u[2]),n&&(n.endTime=a,o.push(n)),n=u}return n&&o.push(n),o},be("shaka.text.LrcTextParser",Ci),Ci.prototype.parseMedia=Ci.prototype.parseMedia,Ci.prototype.setManifestType=Ci.prototype.setManifestType,Ci.prototype.setSequenceMode=Ci.prototype.setSequenceMode,Ci.prototype.parseInit=Ci.prototype.parseInit;var cR=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,dR=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;An("application/x-subtitle-lrc",function(){return new Ci});function yi(){this.g="UNKNOWN"}yi.prototype.parseInit=function(){},yi.prototype.setSequenceMode=function(){},yi.prototype.setManifestType=function(e){this.g=e},yi.prototype.parseMedia=function(e,t,n,o){var u=Ht(e);if(e=[],u=="")return e;var a=Bo(u,"tt",!0);if(!a)throw new q(2,2,2005,"Failed to parse TTML.");if(u=ir(a,"body")[0],!u)return[];var d=cr(a,Sa,"frameRate"),p=cr(a,Sa,"subFrameRate"),g=cr(a,Sa,"frameRateMultiplier"),y=cr(a,Sa,"tickRate"),w=cr(a,Sa,"cellResolution"),T=a.attributes["xml:space"]||"default",M=cr(a,Md,"extent");if(T!="default"&&T!="preserve")throw new q(2,2,2005,"Invalid xml:space value: "+T);T=T=="default",d=new yR(d,p,g,y),w=mR(w),p=ir(a,"metadata")[0],p=(p?p.children:[]).filter(function(N){return N!=`
`}),g=ir(a,"style"),a=ir(a,"region"),y=[];for(var L=R(a),P=L.next();!P.done;P=L.next())(P=hR(this,P.value,g,M))&&y.push(P);if(bt(u,"p").length)throw new q(2,2,2001,"<p> can only be inside <div> in TTML");for(M=R(bt(u,"div")),L=M.next();!L.done;L=M.next())if(bt(L.value,"span").length)throw new q(2,2,2001,"<span> can only be inside <p> in TTML");return(t=uC(this,u,t,d,p,g,a,y,T,w,null,!1,n,o))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function uC(e,t,n,o,u,a,d,p,g,y,w,T,M,L){var P=w;if(ff(t)){if(!T)return null;var N={tagName:"span",children:[nn(t)],attributes:{},parent:null}}else N=t;for(var O=null,F=R(yC),B=F.next();!B.done&&!(O=Id(N,"backgroundImage",u,"#",B.value)[0]);B=F.next());F=null,B=cr(N,yC,"backgroundImage");var V=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(B&&V.test(B)){if(F=parseInt(B.split(":").pop(),10)-1,F>=L.length)return null;F=L[F]}else M&&B&&!B.startsWith("#")&&(V=new Qt(M),B=new Qt(B),(B=V.resolve(B).toString())&&(F=B));if((t.tagName=="p"||O||F)&&(T=!0),t=T,B=(N.attributes["xml:space"]||(g?"default":"preserve"))=="default",V=N.children.every(ff),g=[],!V)for(var Y=R(N.children),J=Y.next();!J.done;J=Y.next())(J=uC(e,J.value,n,o,u,a,d,p,B,y,N,T,M,L))&&g.push(J);if(u=w!=null,M=nn(N),M=N.children.length&&M&&/\S/.test(M),Y=N.attributes.begin||N.attributes.end||N.attributes.dur,!(Y||M||N.tagName=="br"||g.length!=0||u&&!B))return null;for(L=fC(N,o),M=L.start,L=L.end;P&&P.tagName&&P.tagName!="tt";)L=gR(P,o,M,L),M=L.start,L=L.end,P=P.parent;if(M==null&&(M=0),M+=n.periodStart,L=L==null?1/0:L+n.periodStart,e.g!=="HLS"&&(M=Math.max(M,n.segmentStart),L=Math.min(L,n.segmentEnd)),!Y&&g.length>0)for(M=1/0,L=0,n=R(g),o=n.next();!o.done;o=n.next())o=o.value,M=Math.min(M,o.startTime),L=Math.max(L,o.endTime);if(N.tagName=="br")return e=new Ut(M,L,""),e.lineBreak=!0,e;if(n="",V&&(n=Wn(nn(N)||""),B&&(n=n.replace(/\s+/g," "))),n=new Ut(M,L,n),n.nestedCues=g,T||(n.isContainer=!0),y&&(n.cellResolution=y),y=Id(N,"region",d,"")[0],N.attributes.region&&y&&y.attributes["xml:id"]){var H=y.attributes["xml:id"];n.region=p.filter(function(z){return z.id==H})[0]}return p=y,w&&u&&!N.attributes.region&&!N.attributes.style&&(p=Id(w,"region",d,"")[0]),pR(e,n,N,p,O,F,a,t,g.length==0),n}function hR(e,t,n,o){var u=new Oo,a=t.attributes["xml:id"];if(!a)return null;u.id=a,a=null,o&&(a=mm.exec(o)||ym.exec(o)),o=a?Number(a[1]):null,a=a?Number(a[2]):null;var d,p=Ed(e,t,n,"extent");if(p){var g=(d=mm.exec(p))||ym.exec(p);g!=null&&(u.width=Number(g[1]),u.height=Number(g[2]),d||(o!=null&&(u.width=u.width*100/o),a!=null&&(u.height=u.height*100/a)),u.widthUnits=d||o!=null?fi:0,u.heightUnits=d||a!=null?fi:0)}return(e=Ed(e,t,n,"origin"))&&(g=(d=mm.exec(e))||ym.exec(e),g!=null&&(u.viewportAnchorX=Number(g[1]),u.viewportAnchorY=Number(g[2]),d?p||(u.width=100-u.viewportAnchorX,u.widthUnits=fi,u.height=100-u.viewportAnchorY,u.heightUnits=fi):(a!=null&&(u.viewportAnchorY=u.viewportAnchorY*100/a),o!=null&&(u.viewportAnchorX=u.viewportAnchorX*100/o)),u.viewportAnchorUnits=d||o!=null?fi:0)),u}function dm(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function pR(e,t,n,o,u,a,d,p,g){if(p=p||g,Bn(e,n,o,d,"direction",p)=="rtl"&&(t.direction="rtl"),g=Bn(e,n,o,d,"writingMode",p),g=="tb"||g=="tblr"?t.writingMode="vertical-lr":g=="tbrl"?t.writingMode="vertical-rl":g=="rltb"||g=="rl"?t.direction="rtl":g&&(t.direction=ul),(g=Bn(e,n,o,d,"textAlign",!0))?(t.positionAlign=wR.get(g),t.lineAlign=xR.get(g),t.textAlign=ep[g.toUpperCase()]):t.textAlign=pr,(g=Bn(e,n,o,d,"displayAlign",!0))&&(t.displayAlign=r1[g.toUpperCase()]),(g=Bn(e,n,o,d,"color",p))&&(t.color=dm(g)),(g=Bn(e,n,o,d,"backgroundColor",p))&&(t.backgroundColor=dm(g)),(g=Bn(e,n,o,d,"border",p))&&(t.border=g),g=Bn(e,n,o,d,"fontFamily",p))switch(g){case"monospaceSerif":t.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":t.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":t.fontFamily="sans-serif";break;case"monospaceSansSerif":t.fontFamily="Consolas,monospace";break;case"proportionalSerif":t.fontFamily="serif";break;default:t.fontFamily=g.split(",").filter(function(y){return y!="default"}).join(",")}switch((g=Bn(e,n,o,d,"fontWeight",p))&&g=="bold"&&(t.fontWeight=Is),g=Bn(e,n,o,d,"wrapOption",p),t.wrapLine=!(g&&g=="noWrap"),(g=Bn(e,n,o,d,"lineHeight",p))&&g.match(xu)&&(t.lineHeight=g),(g=Bn(e,n,o,d,"fontSize",p))&&(g.match(xu)||g.match(vR))&&(t.fontSize=g),(g=Bn(e,n,o,d,"fontStyle",p))&&(t.fontStyle=l1[g.toUpperCase()]),u?(a=u.attributes.imageType||u.attributes.imagetype,g=u.attributes.encoding,u=nn(u).trim(),a=="PNG"&&g=="Base64"&&u&&(t.backgroundImage="data:image/png;base64,"+u)):a&&(t.backgroundImage=a),(u=Bn(e,n,o,d,"textOutline",p))&&(u=u.split(" "),u[0].match(xu)?t.textStrokeColor=t.color:(t.textStrokeColor=dm(u[0]),u.shift()),u[0]&&u[0].match(xu)?t.textStrokeWidth=u[0]:t.textStrokeColor=""),(u=Bn(e,n,o,d,"letterSpacing",p))&&u.match(xu)&&(t.letterSpacing=u),(u=Bn(e,n,o,d,"linePadding",p))&&u.match(xu)&&(t.linePadding=u),(u=Bn(e,n,o,d,"opacity",p))&&(t.opacity=parseFloat(u)),(u=Ed(e,o,d,"textDecoration"))&&lC(t,u),(u=hm(e,n,d,"textDecoration"))&&lC(t,u),(u=Bn(e,n,o,d,"textCombine",p))&&(t.textCombineUpright=u),Bn(e,n,o,d,"ruby",p)){case"container":t.rubyTag="ruby";break;case"text":t.rubyTag="rt"}}function lC(e,t){t=R(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(Ar)||e.textDecoration.push(Ar);break;case"noUnderline":e.textDecoration.includes(Ar)&&Ue(e.textDecoration,Ar);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ue(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ue(e.textDecoration,"overline")}}function Bn(e,t,n,o,u,a){return a=a===void 0?!0:a,(t=hm(e,t,o,u))?t:a?Ed(e,n,o,u):null}function Ed(e,t,n,o){if(!t)return null;var u=cr(t,Md,o);return u||aC(e,t,n,o)}function hm(e,t,n,o){var u=cr(t,Md,o);return u||aC(e,t,n,o)}function aC(e,t,n,o){t=Id(t,"style",n,"");for(var u=null,a=0;a<t.length;a++){var d=br(t[a],"urn:ebu:tt:style",o);d||(d=cr(t[a],Md,o)),d||(d=hm(e,t[a],n,o)),d&&(u=d)}return u}function Id(e,t,n,o,u){var a=[];if(!e||n.length<1)return a;var d=e;for(e=null;!e&&!(e=u?br(d,u,t):d.attributes[t])&&(d=d.parent,d););if(t=e){for(t=R(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=R(n),d=e.next();!d.done;d=e.next())if(d=d.value,o+d.attributes["xml:id"]==u){a.push(d);break}}return a}function gR(e,t,n,o){return e=fC(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),o==null?o=e.end:e.start!=null&&(o+=e.start),{start:n,end:o}}function fC(e,t){var n=pm(e.attributes.begin,t),o=pm(e.attributes.end,t);return e=pm(e.attributes.dur,t),o==null&&e!=null&&(o=n+e),{start:n,end:o}}function pm(e,t){var n=null;if(cC.test(e)){e=cC.exec(e),n=Number(e[1]);var o=Number(e[2]),u=Number(e[3]),a=Number(e[4]);a+=(Number(e[5])||0)/t.h,u+=a/t.frameRate,n=u+o*60+n*3600}else if(dC.test(e))n=gm(dC,e);else if(hC.test(e))n=gm(hC,e);else if(pC.test(e))e=pC.exec(e),n=Number(e[1])/t.frameRate;else if(gC.test(e))e=gC.exec(e),n=Number(e[1])/t.g;else if(mC.test(e))n=gm(mC,e);else if(e)throw new q(2,2,2001,"Could not parse cue time range in TTML");return n}function gm(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+(Number(e[2])||0)*60+(Number(e[1])||0)*3600}function mR(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}be("shaka.text.TtmlTextParser",yi),yi.prototype.parseMedia=yi.prototype.parseMedia,yi.prototype.setManifestType=yi.prototype.setManifestType,yi.prototype.setSequenceMode=yi.prototype.setSequenceMode,yi.prototype.parseInit=yi.prototype.parseInit;function yR(e,t,n,o){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(o),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var mm=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,vR=/^(\d{1,4}(?:\.\d+)?|100)%$/,xu=/^(\d+px|\d+em|\d*\.?\d+c)$/,ym=/^(\d+)px (\d+)px$/,cC=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,dC=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,hC=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,pC=/^(\d*(?:\.\d*)?)f$/,gC=/^(\d*(?:\.\d*)?)t$/,mC=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),xR=new Map().set("left",jo).set("center","center").set("right","end").set("start",jo).set("end","end"),wR=new Map().set("left","line-left").set("center","center").set("right","line-right"),Sa=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Md=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],yC=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];An("application/ttml+xml",function(){return new yi});function mn(){this.g=new yi}mn.prototype.parseInit=function(e){var t=!1;if(new Lt().box("moov",ot).box("trak",ot).box("mdia",ot).box("minf",ot).box("stbl",ot).T("stsd",_r).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new q(2,2,2007)},mn.prototype.setSequenceMode=function(e){this.g.setSequenceMode(e)},mn.prototype.setManifestType=function(e){this.g.setManifestType(e)},mn.prototype.parseMedia=function(e,t,n){var o=[],u=null,a=[],d=new Map,p=[];if(new Lt().box("moof",ot).box("traf",ot).T("tfhd",function(F){u=Uf(F.reader,F.flags).Sd}).T("trun",function(F){F=jf(F.reader,F.version,F.flags),F=R(F.ih);for(var B=F.next();!B.done;B=F.next())p.push(B.value.sampleSize||u||0)}).T("subs",function(F){for(var B=F.reader,V=B.U(),Y=-1,J=0;J<V;J++){var H=B.U();Y+=H,H=B.Ba();for(var z=[],Q=0;Q<H;Q++)F.version==1?z.push(B.U()):z.push(B.Ba()),B.Y(),B.Y(),B.U();d.set(Y,z)}}).box("mdat",Bs(function(F){a.push(F)})).parse(e,!1),a.length==0)throw new q(2,2,2007);for(var g=sn.apply(_n,le(a)),y=0,w=0;w<p.length;w++){var T=et(g,y,p[w]);y+=p[w];var M=d.get(w);if(M&&M.length){T=et(T,0,M[0]);for(var L=[],P=M[0],N=1;N<M.length;N++){var O=et(e,P,M[N]);O=sf(O),L.push("data:image/png;base64,"+O),P+=M[N]}o=o.concat(this.g.parseMedia(T,t,n,L))}else o=o.concat(this.g.parseMedia(T,t,n,[]))}return o},be("shaka.text.Mp4TtmlParser",mn),mn.prototype.parseMedia=mn.prototype.parseMedia,mn.prototype.setManifestType=mn.prototype.setManifestType,mn.prototype.setSequenceMode=mn.prototype.setSequenceMode,mn.prototype.parseInit=mn.prototype.parseInit,An('application/mp4; codecs="stpp"',function(){return new mn}),An('application/mp4; codecs="stpp.ttml"',function(){return new mn}),An('application/mp4; codecs="stpp.ttml.im1i"',function(){return new mn}),An('application/mp4; codecs="stpp.ttml.im1t"',function(){return new mn}),An('application/mp4; codecs="stpp.ttml.im2i"',function(){return new mn}),An('application/mp4; codecs="stpp.ttml.im2t"',function(){return new mn}),An('application/mp4; codecs="stpp.ttml.etd1"',function(){return new mn}),An('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new mn}),An('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new mn}),An('application/mp4; codecs="stpp.TTML.im1t"',function(){return new mn});function Jn(){this.g="UNKNOWN"}Jn.prototype.parseInit=function(){},Jn.prototype.setSequenceMode=function(){},Jn.prototype.setManifestType=function(e){this.g=e},Jn.prototype.parseMedia=function(e,t){e=Ht(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new q(2,2,2e3);if(e=t.vttOffset,this.g=="HLS")if(n[0].includes("X-TIMESTAMP-MAP")){var o=n[0];if(e=o.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=o.match(/MPEGTS:(\d+)/m),!e||!o)throw new q(2,2,2e3);if(e=Es(e[1]),e==null)throw new q(2,2,2e3);o=Number(o[1]);for(var u=t.segmentStart-t.periodStart;u>=95443.7176888889;)u-=95443.7176888889,o+=8589934592;e=t.periodStart+o/9e4-e}else t.periodStart&&t.vttOffset==t.periodStart&&(e=0);for(t=[],o=R(n[0].split(`
`)),u=o.next();!u.done;u=o.next())if(u=u.value,/^Region:/.test(u)){u=new ks(u);var a=new Oo;Uo(u),As(u);for(var d=Uo(u);d;){var p=a,g=d;(d=/^id=(.*)$/.exec(g))?p.id=d[1]:(d=/^width=(\d{1,2}|100)%$/.exec(g))?p.width=Number(d[1]):(d=/^lines=(\d+)$/.exec(g))?(p.height=Number(d[1]),p.heightUnits=2):(d=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(g))?(p.regionAnchorX=Number(d[1]),p.regionAnchorY=Number(d[2])):(d=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(g))?(p.viewportAnchorX=Number(d[1]),p.viewportAnchorY=Number(d[2])):/^scroll=up$/.exec(g)&&(p.scroll="up"),As(u),d=Uo(u)}t.push(a)}for(o=new Map,n1(o),u=[],n=R(n.slice(1)),a=n.next();!a.done;a=n.next()){if(a=a.value.split(`
`),(a.length!=1||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&a[0]=="STYLE"){for(p=[],d=-1,g=1;g<a.length;g++)a[g].includes("::cue")&&(p.push([]),d=p.length-1),d!=-1&&(p[d].push(a[g]),a[g].includes("}")&&(d=-1));for(p=R(p),d=p.next();!d.done;d=p.next()){var y=d.value;d="global",(g=y[0].match(/\((.*)\)/))&&(d=g.pop()),g=y.slice(1,-1),y[0].includes("}")&&(y=/\{(.*?)\}/.exec(y[0]))&&(g=y[1].split(";")),(y=o.get(d))||(y=new Ut(0,0,""));for(var w=!1,T=0;T<g.length;T++){var M=/^\s*([^:]+):\s*(.*)/.exec(g[T]);if(M){var L=M[2].trim().replace(";","");switch(M[1].trim()){case"background-color":case"background":w=!0,y.backgroundColor=L;break;case"color":w=!0,y.color=L;break;case"font-family":w=!0,y.fontFamily=L;break;case"font-size":w=!0,y.fontSize=L;break;case"font-weight":(parseInt(L,10)>=700||L=="bold")&&(w=!0,y.fontWeight=Is);break;case"font-style":switch(L){case"normal":w=!0,y.fontStyle=np;break;case"italic":w=!0,y.fontStyle=Ms;break;case"oblique":w=!0,y.fontStyle="oblique"}break;case"opacity":w=!0,y.opacity=parseFloat(L);break;case"text-combine-upright":w=!0,y.textCombineUpright=L;break;case"text-shadow":w=!0,y.textShadow=L;break;case"white-space":w=!0,y.wrapLine=L!="noWrap"}}}w&&o.set(d,y)}}if(y=a,w=e,y.length==1&&!y[0]||/^NOTE($|[ \t])/.test(y[0])||y[0]=="STYLE"||y[0]=="REGION")a=null;else if(a=null,y[0].includes("-->")||(a=y[0],y.splice(0,1)),p=new ks(y[0]),d=il(p),T=No(p,/[ \t]+--\x3e[ \t]+/g),g=il(p),d==null||T==null||g==null)st("Failed to parse VTT time code. Cue skipped:",a,y),a=null;else{for(d+=w,g+=w,w=y.slice(1).join(`
`).trim(),o.has("global")?(y=o.get("global").clone(),y.startTime=d,y.endTime=g,y.payload=w):y=new Ut(d,g,w),As(p),d=Uo(p);d;)vC(y,d,t),As(p),d=Uo(p);mf(y,o),a!=null&&(y.id=a),a=y}a&&u.push(a)}return u};function vC(e,t,n){var o;(o=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=o[1],t=="middle"?e.textAlign=pr:e.textAlign=ep[t.toUpperCase()]):(o=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=o[1]=="lr"?"vertical-lr":"vertical-rl":(o=/^size:([\d.]+)%$/.exec(t))?e.size=Number(o[1]):(o=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(o[1]),o[2]&&(t=o[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":yf)):(o=/^region:(.*)$/.exec(t))?(t=SR(n,o[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=tp[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=ll,e.line=Number(n[1]),n[2]&&(e.lineAlign=tp[n[2].toUpperCase()]))}function SR(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}be("shaka.text.VttTextParser",Jn),Jn.prototype.parseMedia=Jn.prototype.parseMedia,Jn.prototype.setManifestType=Jn.prototype.setManifestType,Jn.prototype.setSequenceMode=Jn.prototype.setSequenceMode,Jn.prototype.parseInit=Jn.prototype.parseInit,An("text/vtt",function(){return new Jn}),An('text/vtt; codecs="vtt"',function(){return new Jn}),An('text/vtt; codecs="wvtt"',function(){return new Jn});function bi(){this.g=null}bi.prototype.parseInit=function(e){var t=this,n=!1;if(new Lt().box("moov",ot).box("trak",ot).box("mdia",ot).T("mdhd",function(o){o=Ff(o.reader,o.version),t.g=o.timescale}).box("minf",ot).box("stbl",ot).T("stsd",_r).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new q(2,2,2008);if(!n)throw new q(2,2,2008)},bi.prototype.setSequenceMode=function(){},bi.prototype.setManifestType=function(){},bi.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new q(2,2,2008);var n=0,o=[],u,a=[],d=!1,p=!1,g=!1,y=null;if(new Lt().box("moof",ot).box("traf",ot).T("tfdt",function(V){d=!0,n=Bf(V.reader,V.version).baseMediaDecodeTime}).T("tfhd",function(V){y=Uf(V.reader,V.flags).Rd}).T("trun",function(V){p=!0,o=jf(V.reader,V.version,V.flags).ih}).box("mdat",Bs(function(V){g=!0,u=V})).parse(e,!1),!g&&!d&&!p)throw new q(2,2,2008);e=n;for(var w=new Bt(u,0),T=R(o),M=T.next();!M.done;M=T.next()){M=M.value;var L=M.jh||y,P=M.Cf?n+M.Cf:e;e=P+(L||0);var N=0;do{var O=w.U();N+=O;var F=w.U(),B=null;Df(F)=="vttc"?O>8&&(B=w.Tb(O-8)):w.skip(O-8),L&&B&&(O=TR(B,t.periodStart+P/this.g,t.periodStart+e/this.g),a.push(O))}while(M.sampleSize&&N<M.sampleSize)}return a.filter(no)};function TR(e,t,n){var o,u,a;return new Lt().box("payl",Bs(function(d){o=Ht(d)})).box("iden",Bs(function(d){u=Ht(d)})).box("sttg",Bs(function(d){a=Ht(d)})).parse(e),o?CR(o,u,a,t,n):null}function CR(e,t,n,o,u){if(e=new Ut(o,u,e),mf(e),t&&(e.id=t),n)for(t=new ks(n),n=Uo(t);n;)vC(e,n,[]),As(t),n=Uo(t);return e}be("shaka.text.Mp4VttParser",bi),bi.prototype.parseMedia=bi.prototype.parseMedia,bi.prototype.setManifestType=bi.prototype.setManifestType,bi.prototype.setSequenceMode=bi.prototype.setSequenceMode,bi.prototype.parseInit=bi.prototype.parseInit,An('application/mp4; codecs="wvtt"',function(){return new bi});function ki(){}ki.prototype.parseInit=function(){},ki.prototype.setSequenceMode=function(){},ki.prototype.setManifestType=function(){},ki.prototype.parseMedia=function(e){var t=Ht(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=R(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var o=new ks(n[0]),u=il(o),a=No(o,/,/g);if(o=il(o),u==null||a==null||o==null)throw new q(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Ut(u,o,n.slice(1).join(`
`).trim()))}return e},be("shaka.text.SbvTextParser",ki),ki.prototype.parseMedia=ki.prototype.parseMedia,ki.prototype.setManifestType=ki.prototype.setManifestType,ki.prototype.setSequenceMode=ki.prototype.setSequenceMode,ki.prototype.parseInit=ki.prototype.parseInit,An("text/x-subviewer",function(){return new ki});function vi(){this.g=new Jn}vi.prototype.parseInit=function(){},vi.prototype.setSequenceMode=function(){},vi.prototype.setManifestType=function(){},vi.prototype.parseMedia=function(e,t,n){return e=Ht(e),e=xC(e),e=et(Xi(e)),this.g.parseMedia(e,t,n,[])};function xC(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=R(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}be("shaka.text.SrtTextParser",vi),vi.srt2webvtt=xC,vi.prototype.parseMedia=vi.prototype.parseMedia,vi.prototype.setManifestType=vi.prototype.setManifestType,vi.prototype.setSequenceMode=vi.prototype.setSequenceMode,vi.prototype.parseInit=vi.prototype.parseInit,An("text/srt",function(){return new vi});function Ai(){}Ai.prototype.parseInit=function(){},Ai.prototype.setSequenceMode=function(){},Ai.prototype.setManifestType=function(){},Ai.prototype.parseMedia=function(e){var t="",n="",o=null,u=null;for(u=Ht(e).split(/\r?\n\s*\r?\n/),e=R(u),u=e.next();!u.done;u=e.next()){var a=u.value;u=a,(a=kR.exec(a))&&(o=a[1],u=a[2]),o=="V4 Styles"||o=="V4+ Styles"?(t=u,t=n?t+(`
`+u):u):o=="Events"&&(n=n?n+(`
`+u):u)}for(o=[],u=null,t=R(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(a=TC.exec(e))){if(e=a[1].trim(),a=a[2].trim(),e=="Format")u=a.split(Rd);else if(e=="Style"){e=a.split(Rd),a={};for(var d=0;d<u.length&&d<e.length;d++)a[u[d]]=e[d];o.push(a)}}for(u=[],t=null,n=R(n.split(/\r?\n/)),a=n.next(),e={};!a.done;e={Vi:void 0},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(d=TC.exec(a))){if(a=d[1].trim(),d=d[2].trim(),a=="Format")t=d.split(Rd);else if(a=="Dialogue"){d=d.split(Rd),a={};for(var p=0;p<t.length&&p<d.length;p++)a[t[p]]=d[p];p=SC(a.Start);var g=SC(a.End);d=new Ut(p,g,d.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.Vi=a.Style,(e=o.find((function(y){return function(w){return w.Name==y.Vi}})(e)))&&bR(d,e),u.push(d)}}return u};function bR(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=wC(n))&&(e.color=n),(n=t.BackColour)&&(n=wC(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=Is),t.Italic&&(e.fontStyle=Ms),t.Underline&&e.textDecoration.push(Ar),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=sl,e.textAlign="start";break;case 2:e.displayAlign=sl,e.textAlign=pr;break;case 3:e.displayAlign=sl,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=pr;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=pr;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function wC(e){return e=parseInt(e.replace("&H",""),16),e>=0?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function SC(e){return e=AR.exec(e),(e[1]?parseInt(e[1].replace(":",""),10):0)*3600+parseInt(e[2],10)*60+parseFloat(e[3])}be("shaka.text.SsaTextParser",Ai),Ai.prototype.parseMedia=Ai.prototype.parseMedia,Ai.prototype.setManifestType=Ai.prototype.setManifestType,Ai.prototype.setSequenceMode=Ai.prototype.setSequenceMode,Ai.prototype.parseInit=Ai.prototype.parseInit;var kR=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,TC=/^\s*([^:]+):\s*(.*)/,Rd=/\s*,\s*/,AR=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;An("text/x-ssa",function(){return new Ai});function CC(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,e>0)?{Zd:n,ra:e}:null}function bC(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=(e[t+2]&60)>>>2;if(o>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,a=(e[t+2]&1)<<2;return a|=(e[t+3]&192)>>>6,{sampleRate:n[o],channelCount:a,codec:"mp4a.40."+u}}function kC(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var o=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return o<=n?!1:(t+=o,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function ER(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Ei(e){this.j=e,this.h=0,this.g=new Map,this.i=null}m=Ei.prototype,m.destroy=function(){this.g.clear()},m.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?jn(this.convertCodecs("audio",e)):!1},m.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(ti(t)||"mp4a.40.2")+'"':t},m.getOriginalMimeType=function(){return this.j},m.transmux=function(e,t,n,o){for(var u=et(e),a=Hs(u),d=a.length;d<u.length&&!kC(u,d);d++);if(e=n.endTime*1e3,a=Yo(a),a.length&&n&&(a=a.find(function(w){return w.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=a.data),a=bC(u,d),!a)return Promise.reject(new q(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=a.sampleRate,t.channelsCount=a.channelCount;for(var p=[];d<u.length;){var g=CC(u,d);if(!g)return Promise.reject(new q(2,3,3018,n?n.P()[0]:null));var y=g.Zd+g.ra;d+y<=u.length&&p.push({data:u.subarray(d+g.Zd,d+y),size:g.ra,duration:1024,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),d+=y}return u=a.sampleRate,e=Math.floor(e*u/1e3),o={id:t.id,type:"audio",codecs:a.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:u,duration:o,Cb:[],Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,Bb:p},stream:t},o=new $s([o]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=zs(o),this.g.set(n,t)),n=this.i!==t,o=kl(o),this.i=t,this.h++,Promise.resolve({data:o,init:n?t:null})},be("shaka.transmuxer.AacTransmuxer",Ei),Ei.prototype.transmux=Ei.prototype.transmux,Ei.prototype.getOriginalMimeType=Ei.prototype.getOriginalMimeType,Ei.prototype.convertCodecs=Ei.prototype.convertCodecs,Ei.prototype.isSupported=Ei.prototype.isSupported,Ei.prototype.destroy=Ei.prototype.destroy,Er("audio/aac",function(){return new Ei("audio/aac")},Zr);function AC(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(n>=3)return null;var o=e[t+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][o*3+n]*2;if(t+u>e.length)return null;var a=e[t+6]>>5,d=0;a===2?d+=2:(a&1&&a!==1&&(d+=2),a&4&&(d+=2)),d=(e[t+6]<<8|e[t+7])>>12-d&1;var p=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|p>>2,(p&3)<<6|a<<3|d<<2|o>>4,o<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][a]+d,Ha:e,ra:u}}function IR(e,t){if(e[t]===11&&e[t+1]===119){var n=0,o=5;t+=o;for(var u,a;o>0;){a=e[t];var d=Math.min(o,8),p=8-d;u=4278190080>>>24+p<<p,u=(a&u)>>p,n=n?n<<d|u:u,t+=1,o-=d}if(n<16)return!0}return!1}function ji(e){this.j=e,this.h=0,this.g=new Map,this.i=null}m=ji.prototype,m.destroy=function(){this.g.clear()},m.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?jn(this.convertCodecs("audio",e)):!1},m.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?Me().le()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},m.getOriginalMimeType=function(){return this.j},m.transmux=function(e,t,n,o){e=et(e);for(var u=Hs(e),a=u.length;a<e.length&&!IR(e,a);a++);var d=n.endTime*1e3;u=Yo(u),u.length&&n&&(u=u.find(function(w){return w.description==="com.apple.streaming.transportStreamTimestamp"}))&&(d=u.data),u=0;for(var p=new Uint8Array([]),g=[];a<e.length;){var y=AC(e,a);if(!y)return Promise.reject(new q(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=y.sampleRate,t.channelsCount=y.channelCount,u=y.sampleRate,p=y.Ha,g.push({data:e.subarray(a,a+y.ra),size:y.ra,duration:1536,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),a+=y.ra}return e=Math.floor(d*u/1e3),o={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:u,duration:o,Cb:[],Ha:p,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,Bb:g},stream:t},o=new $s([o]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=zs(o),this.g.set(n,t)),n=this.i!==t,o=kl(o),this.i=t,this.h++,Promise.resolve({data:o,init:n?t:null})},be("shaka.transmuxer.Ac3Transmuxer",ji),ji.prototype.transmux=ji.prototype.transmux,ji.prototype.getOriginalMimeType=ji.prototype.getOriginalMimeType,ji.prototype.convertCodecs=ji.prototype.convertCodecs,ji.prototype.isSupported=ji.prototype.isSupported,ji.prototype.destroy=ji.prototype.destroy,Er("audio/ac3",function(){return new ji("audio/ac3")},Zr);function EC(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Dr(e.subarray(t+2));pi(n,2),pi(n,3);var o=gt(n,11)+1<<1,u=gt(n,2);if(u==3){u=gt(n,2),u=[24e3,22060,16e3][u];var a=3}else u=[48e3,44100,32e3][u],a=gt(n,2);var d=gt(n,3),p=gt(n,1);return n=gt(n,5),t+o>e.byteLength?null:(e=Math.floor(o*u/([1,2,3,6][a]*16)),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|d<<1|p<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][d]+p,Ha:e,ra:o})}function $i(e){this.j=e,this.h=0,this.g=new Map,this.i=null}m=$i.prototype,m.destroy=function(){this.g.clear()},m.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?jn(this.convertCodecs("audio",e)):!1},m.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},m.getOriginalMimeType=function(){return this.j},m.transmux=function(e,t,n,o){e=et(e);for(var u=Hs(e),a=u.length;a<e.length&&(e[a]<<8|e[a+1]<<0)!==2935;a++);var d=n.endTime*1e3;u=Yo(u),u.length&&n&&(u=u.find(function(w){return w.description==="com.apple.streaming.transportStreamTimestamp"}))&&(d=u.data),u=0;for(var p=new Uint8Array([]),g=[];a<e.length;){var y=EC(e,a);if(!y)return Promise.reject(new q(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=y.sampleRate,t.channelsCount=y.channelCount,u=y.sampleRate,p=y.Ha,g.push({data:e.subarray(a,a+y.ra),size:y.ra,duration:1536,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),a+=y.ra}return e=Math.floor(d*u/1e3),o={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:u,duration:o,Cb:[],Ha:p,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,Bb:g},stream:t},o=new $s([o]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=zs(o),this.g.set(n,t)),n=this.i!==t,o=kl(o),this.i=t,this.h++,Promise.resolve({data:o,init:n?t:null})},be("shaka.transmuxer.Ec3Transmuxer",$i),$i.prototype.transmux=$i.prototype.transmux,$i.prototype.getOriginalMimeType=$i.prototype.getOriginalMimeType,$i.prototype.convertCodecs=$i.prototype.convertCodecs,$i.prototype.isSupported=$i.prototype.isSupported,$i.prototype.destroy=$i.prototype.destroy,Er("audio/ec3",function(){return new $i("audio/ec3")},Zr);function MR(e){if(!e.length)return null;var t=e.find(function(N){return N.type==7});if(e=e.find(function(N){return N.type==8}),!t||!e)return null;var n=new Dr(t.data),o=Ct(n);if(Ct(n),Ct(n),En(n),_R.includes(o)&&(o=Pe(n),o===3&&pi(n,1),En(n),En(n),pi(n,1),$e(n))){o=o!==3?8:12;for(var u=0;u<o;u++)$e(n)&&(u<6?Hf(n,16):Hf(n,64))}if(En(n),o=Pe(n),o===0)Pe(n);else if(o===1)for(pi(n,1),En(n),En(n),o=Pe(n),u=0;u<o;u++)En(n);En(n),pi(n,1);var a=Pe(n),d=Pe(n),p=gt(n,1);p===0&&pi(n,1),pi(n,1);var g=0,y=0,w=0,T=0;if($e(n)&&(g=Pe(n),y=Pe(n),w=Pe(n),T=Pe(n)),u=o=1,$e(n)&&$e(n)){var M=Ct(n),L=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],P=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];M>0&&M<=16?(o=L[M-1],u=P[M-1]):M===255&&(o=gt(n,16),u=gt(n,16))}return n=(2-p)*(d+1)*16-w*2-T*2,a=(a+1)*16-g*2-y*2,g=[],t=t.fullData,g.push(t.byteLength>>>8&255),g.push(t.byteLength&255),g=g.concat.apply(g,le(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,le(e)),e=new Uint8Array([1,g[3],g[4],g[5],255,225].concat(g,[1],t)),{height:n,width:a,Ra:e,Za:o,$a:u}}function RR(e){function t(P){u={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:P.pts,dts:P.dts,nalus:[]}}function n(){if(u&&u.nalus.length&&u.frame){for(var P=[],N=R(u.nalus),O=N.next();!O.done;O=N.next()){O=O.value;var F=O.fullData.byteLength,B=new Uint8Array(4);B[0]=F>>24&255,B[1]=F>>16&255,B[2]=F>>8&255,B[3]=F&255,P.push(B),P.push(O.fullData)}u.data=sn.apply(_n,le(P)),o.push(u)}}for(var o=[],u=null,a=!1,d=0;d<e.length;d++){var p=e[d],g=p.nalus,y=!1;u&&g.length&&!a&&(n(),t(p)),g=R(p.nalus);for(var w=g.next();!w.done;w=g.next()){w=w.value;var T=!1;switch(w.type){case 1:var M=!1;T=!0;var L=w.data;y&&L.length>4&&(L=bk(new Dr(L)),L===2||L===4||L===7||L===9)&&(M=!0),M&&u&&u.frame&&!u.isKeyframe&&(n(),u=null),u||t(p),u.frame=!0,u.isKeyframe=M;break;case 5:T=!0,u&&u.frame&&!u.isKeyframe&&(n(),u=null),u||t(p),u.frame=!0,u.isKeyframe=!0;break;case 6:T=!0;break;case 7:y=T=!0;break;case 8:T=!0;break;case 9:a=T=!0,u&&u.frame&&(n(),u=null),u||t(p);break;case 12:T=!0;break;default:T=!1}u&&T&&u.nalus.push(w)}}return n(),o}var _R=[100,110,122,244,44,83,86,118,128,138,139,134];function LR(e){if(!e.length)return null;var t=e.find(function(d){return d.type==32}),n=e.find(function(d){return d.type==33}),o=e.find(function(d){return d.type==34});if(!t||!n||!o)return null;var u=PR(t.fullData);e=DR(n.fullData);var a=OR(o.fullData);return t=NR(t.fullData,n.fullData,o.fullData,{Ug:u.Ug,Bh:u.Bh,Eg:e.Eg,Fg:e.Fg,yg:e.yg,Dg:e.Dg,zg:e.zg,Ag:e.Ag,Bg:e.Bg,Cg:e.Cg,rg:e.rg,sg:e.sg,ug:e.ug,vg:e.vg,wg:e.wg,xg:e.xg,nf:e.nf,gg:e.gg,fg:e.fg,eg:e.eg,Wg:a.Wg,qg:e.qg,pg:e.pg}),{height:e.height,width:e.width,Ra:t,Za:e.Sk,$a:e.Rk}}function PR(e){var t=new Dr(e,!0);return Ct(t),Ct(t),gt(t,4),gt(t,2),gt(t,6),e=gt(t,3),t=$e(t),{Ug:e+1,Bh:t}}function DR(e){e=new Dr(e,!0),Ct(e),Ct(e);var t=0,n=0,o=0,u=0;gt(e,4);var a=gt(e,3);$e(e);for(var d=gt(e,2),p=gt(e,1),g=gt(e,5),y=Ct(e),w=Ct(e),T=Ct(e),M=Ct(e),L=Ct(e),P=Ct(e),N=Ct(e),O=Ct(e),F=Ct(e),B=Ct(e),V=Ct(e),Y=[],J=[],H=0;H<a;H++)Y.push($e(e)),J.push($e(e));if(a>0)for(H=a;H<8;H++)gt(e,2);for(H=0;H<a;H++)Y[H]&&gt(e,88),J[H]&&Ct(e);Pe(e),Y=Pe(e),Y==3&&gt(e,1),J=Pe(e),H=Pe(e),$e(e)&&(t+=Pe(e),n+=Pe(e),o+=Pe(e),u+=Pe(e));var z=Pe(e),Q=Pe(e),ee=Pe(e);if($e(e))for(var se=0;se<=a;se++)Pe(e),Pe(e),Pe(e);else Pe(e),Pe(e),Pe(e);if(Pe(e),Pe(e),Pe(e),Pe(e),Pe(e),Pe(e),$e(e)&&$e(e))for(se=0;se<4;se++)for(var fe=0;fe<(se===3?2:6);fe++)if($e(e)){var ne=Math.min(64,1<<4+(se<<1));se>1&&Gs(e);for(var xe=0;xe<ne;xe++)Gs(e)}else Pe(e);for($e(e),$e(e),$e(e)&&(Ct(e),Pe(e),Pe(e),$e(e)),se=Pe(e),ne=fe=0;ne<se;ne++)if(xe=!1,ne!==0&&(xe=$e(e)),xe){ne===se&&Pe(e),$e(e),Pe(e);for(var ye=xe=0;ye<=fe;ye++){var ae=$e(e),he=!1;ae||(he=$e(e)),(ae||he)&&xe++}fe=xe}else{for(ye=Pe(e),xe=Pe(e),fe=ye+xe,ae=0;ae<ye;ae++)Pe(e),$e(e);for(ye=0;ye<xe;ye++)Pe(e),$e(e)}if($e(e))for(se=Pe(e),fe=0;fe<se;fe++){for(ne=0;ne<ee+4;ne++)gt(e,1);gt(e,1)}if(se=ee=1,fe=!0,ne=1,ye=xe=0,$e(e),$e(e),$e(e)){if($e(e)){ae=Ct(e),he=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2];var Te=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];ae>0&&ae<=16?(ee=he[ae-1],se=Te[ae-1]):ae===255&&(ee=gt(e,16),se=gt(e,16))}if($e(e)&&$e(e),$e(e)&&(gt(e,3),$e(e),$e(e)&&(Ct(e),Ct(e),Ct(e))),$e(e)&&(Pe(e),Pe(e)),$e(e),$e(e),$e(e),(ae=$e(e))&&(En(e),En(e),En(e),En(e)),$e(e)&&(ne=gt(e,32),xe=gt(e,32),$e(e)&&Pe(e),$e(e))){Te=!1,ae=$e(e),he=$e(e),(ae||he)&&((Te=$e(e))&&(Ct(e),gt(e,5),$e(e),gt(e,5)),gt(e,4),gt(e,4),Te&&gt(e,4),gt(e,5),gt(e,5),gt(e,5));for(var ke=0;ke<=a;ke++){fe=$e(e);var Ke=!0,Re=1;fe||(Ke=$e(e));var pt=!1;if(Ke?Pe(e):pt=$e(e),pt||(Re=Pe(e)+1),ae){for(Ke=0;Ke<Re;Ke++)Pe(e),Pe(e),Te&&(Pe(e),Pe(e));$e(e)}if(he){for(Ke=0;Ke<Re;Ke++)Pe(e),Pe(e),Te&&(Pe(e),Pe(e));$e(e)}}}$e(e)&&($e(e),$e(e),$e(e),ye=Pe(e),Pe(e),Pe(e),Pe(e),Pe(e))}return{yg:V,Eg:d,Fg:p,Dg:g,zg:y,Ag:w,Bg:T,Cg:M,rg:L,sg:P,ug:N,vg:O,wg:F,xg:B,nf:ye,gg:Y,fg:z,eg:Q,width:J-(t+n)*(Y===1||Y===2?2:1),height:H-(o+u)*(Y===1?2:1),Sk:ee,Rk:se,qg:xe/ne,pg:fe}}function OR(e){var t=new Dr(e,!0);Ct(t),Ct(t),Pe(t),Pe(t),$e(t),$e(t),gt(t,3),$e(t),$e(t),Pe(t),Pe(t),Gs(t),$e(t),$e(t),$e(t)&&Pe(t),Gs(t),Gs(t),$e(t),$e(t),$e(t),$e(t),e=$e(t),t=$e(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Wg:n}}function NR(e,t,n,o){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));for(u[0]=1,u[1]=(o.Eg&3)<<6|(o.Fg?1:0)<<5|o.Dg&31,u[2]=o.zg,u[3]=o.Ag,u[4]=o.Bg,u[5]=o.Cg,u[6]=o.rg,u[7]=o.sg,u[8]=o.ug,u[9]=o.vg,u[10]=o.wg,u[11]=o.xg,u[12]=o.yg,u[13]=240|(o.nf&3840)>>8,u[14]=o.nf&255,u[15]=252|o.Wg&3,u[16]=252|o.gg&3,u[17]=248|o.fg&7,u[18]=248|o.eg&7,u[19]=0,u[20]=parseInt(o.qg,10),u[21]=((o.pg?1:0)&3)<<6|(o.Ug&7)<<3|(o.Bh?1:0)<<2|3,u[22]=3,e=[e,t,n],t=23,n=e.length-1,o=0;o<e.length;o+=1)u.set(new Uint8Array([32+o|(o===n?128:0),0,1]),t),t+=3,u.set(new Uint8Array([e[o].byteLength>>8,e[o].byteLength&255]),t),t+=2,u.set(e[o],t),t+=e[o].byteLength;return u}function _d(e,t){var n=e[t+1]>>3&3,o=e[t+1]>>1&3,u=e[t+2]>>4&15,a=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&a!==3){var d=e[t+3]>>6;u=UR[(n===3?3-o:o===3?3:4)*14+u-1]*1e3,a=BR[(n===3?0:n===2?1:2)*3+a],n=FR[n][o];var p=jR[o],g=Math.floor(n*u/a+(e[t+2]>>1&1))*p,y=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(y=y?parseInt(y[1],10):0)&&y<=87&&o===2&&u>=224e3&&d===0&&(e[t+3]|=128),{sampleRate:a,channelCount:d===3?1:2,ra:g,Qk:n*8*p}}return null}function IC(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function MC(e,t){if(t+1<e.length&&IC(e,t)){var n=_d(e,t),o=4;return n&&n.ra&&(o=n.ra),t+=o,t===e.length||t+1<e.length&&IC(e,t)}return!1}var UR=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],BR=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],FR=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],jR=[0,1,1,4];function zi(e){this.j=e,this.h=0,this.g=new Map,this.i=null}m=zi.prototype,m.destroy=function(){this.g.clear()},m.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?jn(this.convertCodecs("audio",e)):!1},m.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},m.getOriginalMimeType=function(){return this.j},m.transmux=function(e,t,n,o){for(var u=et(e),a=Hs(u).length;a<u.length&&!MC(u,a);a++);var d;for(e=[];a<u.length;){var p=_d(u,a);if(!p)return Promise.reject(new q(2,3,3018,n?n.P()[0]:null));d||(d=p),a+p.ra<=u.length&&e.push({data:u.subarray(a,a+p.ra),size:p.ra,duration:1152,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),a+=p.ra}return d?(u=d.Qk*9e4/d.sampleRate*this.h,o={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:d.sampleRate,duration:o,Cb:[],Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:u,Bb:e},stream:t},o=new $s([o]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=zs(o),this.g.set(n,t)),n=this.i!==t,o=kl(o),this.i=t,this.h++,Promise.resolve({data:o,init:n?t:null})):Promise.reject(new q(2,3,3018,n?n.P()[0]:null))},be("shaka.transmuxer.Mp3Transmuxer",zi),zi.prototype.transmux=zi.prototype.transmux,zi.prototype.getOriginalMimeType=zi.prototype.getOriginalMimeType,zi.prototype.convertCodecs=zi.prototype.convertCodecs,zi.prototype.isSupported=zi.prototype.isSupported,zi.prototype.destroy=zi.prototype.destroy,Er("audio/mpeg",function(){return new zi("audio/mpeg")},Zr);function Vi(e){this.h=e,this.g=null}m=Vi.prototype,m.destroy=function(){},m.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=ti(e).split(","),n=ei("audio",t);return t=ei("video",t),!n||t||Ln(n)!="mp3"?!1:jn(this.convertCodecs("audio",e))},m.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},m.getOriginalMimeType=function(){return this.h},m.transmux=function(e,t,n,o,u){if(this.g?this.g.clearData():this.g=new Nt,this.g.Gf(n.i),e=et(e),e=this.g.parse(e),e.Td().audio!="mp3"||u!="audio")return Promise.reject(new q(2,3,3018,n?n.P()[0]:null));for(n=new Uint8Array([]),u=R(e.xb()),e=u.next();!e.done;e=u.next())if(e=e.value.data)for(t=0;t<e.length;)(o=_d(e,t))?(t+o.ra<=e.length&&(n=sn(n,e.subarray(t,t+o.ra))),t+=o.ra):t++;return Promise.resolve(n)},be("shaka.transmuxer.MpegTsTransmuxer",Vi),Vi.prototype.transmux=Vi.prototype.transmux,Vi.prototype.getOriginalMimeType=Vi.prototype.getOriginalMimeType,Vi.prototype.convertCodecs=Vi.prototype.convertCodecs,Vi.prototype.isSupported=Vi.prototype.isSupported,Vi.prototype.destroy=Vi.prototype.destroy,Er("video/mp2t",function(){return new Vi("video/mp2t")},rp);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function Ii(e){this.h=e,(this.g=hg.get("ISOBoxer")())&&$R(this)}function $R(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(o){this._procEntryField(o,"BytesOfClearData","uint",16),this._procEntryField(o,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,o=0;o<16;o++)this.usertype[o]!==zR[o]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}m=Ii.prototype,m.destroy=function(){},m.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?jn(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),jn(t)||jn(e))},m.convertCodecs=function(e,t){return t.replace("mss/","")},m.getOriginalMimeType=function(){return this.h},m.transmux=function(e,t,n){if(!n)return Promise.resolve(et(e));if(!t.mssPrivateData)return Promise.reject(new q(2,3,3020,n?n.P()[0]:null));try{var o,u=this.g.parseBuffer(e),a=u.fetch("tfhd");a.track_ID=t.id+1;var d=u.fetch("tfdt"),p=u.fetch("traf");d===null&&(d=this.g.createFullBox("tfdt",p,a),d.version=1,d.flags=0,d.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var g=u.fetch("trun"),y=u.fetch("tfxd");y&&y._parent.boxes.splice(y._parent.boxes.indexOf(y),1);var w=u.fetch("tfrf");w&&w._parent.boxes.splice(w._parent.boxes.indexOf(w),1);var T=u.fetch("sepiff");if(T!==null){T.type="senc",T.usertype=void 0;var M=u.fetch("saio");if(M===null){M=this.g.createFullBox("saio",p),M.version=0,M.flags=0,M.entry_count=1,M.offset=[0];var L=this.g.createFullBox("saiz",p);if(L.version=0,L.flags=0,L.sample_count=T.sample_count,L.default_sample_info_size=0,L.sample_info_size=[],T.flags&2)for(o=0;o<T.sample_count;o+=1)L.sample_info_size[o]=10+6*T.entry[o].NumberOfEntries;else L.default_sample_info_size=8}}a.flags&=16777214,a.flags|=131072,g.flags|=1;var P=u.fetch("moof");g.data_offset=P.getLength()+8;var N=u.fetch("saio");N!==null&&(N.offset[0]=RC(P,"traf")+RC(p,"senc")+16);var O=et(u.write());return Promise.resolve(O)}catch(F){return F instanceof q?Promise.reject(F):Promise.reject(new q(2,3,3022,n?n.P()[0]:null))}};function RC(e,t){for(var n=8,o=0;o<e.boxes.length&&e.boxes[o].type!==t;o++)n+=e.boxes[o].size;return n}be("shaka.transmuxer.MssTransmuxer",Ii),Ii.prototype.transmux=Ii.prototype.transmux,Ii.prototype.getOriginalMimeType=Ii.prototype.getOriginalMimeType,Ii.prototype.convertCodecs=Ii.prototype.convertCodecs,Ii.prototype.isSupported=Ii.prototype.isSupported,Ii.prototype.destroy=Ii.prototype.destroy;var zR=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Er("mss/audio/mp4",function(){return new Ii("mss/audio/mp4")},Zr),Er("mss/video/mp4",function(){return new Ii("mss/video/mp4")},Zr);function Hi(e){this.m=e,this.g=0,this.j=new Map,this.l=this.i=this.h=null}m=Hi.prototype,m.destroy=function(){this.j.clear(),this.i&&this.i.destroy()},m.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var o=ti(n).split(",");return n=ei("audio",o),o=ei("video",o),n&&(n=Ln(n),!VR.includes(n))||o&&(n=Ln(o),!HR.includes(n))?!1:t?jn(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),jn(t)||jn(e))},m.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=ti(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return yl(n,"audio/mp4")}).map(x1).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},m.getOriginalMimeType=function(){return this.m},m.transmux=function(e,t,n,o,u){var a=et(e);if(u=="audio"&&!Xs(a)){for(var d=Hs(a),p=d.length;p<a.length;p++)if(MC(a,p))return Promise.reject(new q(2,3,3018,n?n.P()[0]:null));for(p=d.length;p<a.length;p++)if(kC(a,p))return this.i||(this.i=new Ei("audio/aac")),this.i.transmux(e,t,n,o,u);return Promise.reject(new q(2,3,3018,n?n.P()[0]:null))}this.h?this.h.clearData():this.h=new Nt,this.h.Gf(n.i);var g=this.h.parse(a),y=[],w=g.Td();try{var T=null;if(u=="video"){switch(w.video){case"avc":var M=[],L=null,P=g.ud(),N=RR(P);if(!N.length)throw new q(2,3,3023,n?n.P()[0]:null);for(var O=0;O<N.length;O++){var F=N[O];L==null&&(L=F.dts);var B=void 0;B=O+1<N.length?(N[O+1].dts||0)-(F.dts||0):N.length>1?(F.dts||0)-(N[O-1].dts||0):(n.endTime-n.startTime)*9e4,M.push({data:F.data,size:F.data.byteLength,duration:B,wb:Math.round((F.pts||0)-(F.dts||0)),flags:{zb:0,mb:0,jb:0,gb:0,hb:F.isKeyframe?2:1,Ab:F.isKeyframe?0:1}})}for(var V=[],Y=R(P),J=Y.next();!J.done;J=Y.next())V.push.apply(V,le(J.value.nalus));var H=MR(V);if(!H||L==null)throw new q(2,3,3018,n?n.P()[0]:null);t.height=H.height,t.width=H.width,T={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:o,Cb:[],Ha:new Uint8Array([]),Ra:H.Ra,Za:H.Za,$a:H.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:L,Bb:M},stream:t};break;case"hvc":var z=[],Q=null,ee=[],se=g.ud();if(!se.length)throw new q(2,3,3023,n?n.P()[0]:null);for(var fe=0;fe<se.length;fe++){var ne=se[fe],xe=ne.nalus;ee.push.apply(ee,le(xe));for(var ye=!1,ae=[],he=!1,Te=R(xe),ke=Te.next();!ke.done;ke=Te.next()){var Ke=ke.value;switch(Ke.type){case 1:case 0:var Re=he=!0;break;case 19:case 20:case 21:ye=Re=he=!0;break;case 32:Re=!0;break;case 33:Re=!0;break;case 34:Re=!0;break;case 35:he=Re=!0;break;case 39:case 40:Re=!0;break;default:Re=!1}if(he&&Re){var pt=Ke.fullData.byteLength,ht=new Uint8Array(4);ht[0]=pt>>24&255,ht[1]=pt>>16&255,ht[2]=pt>>8&255,ht[3]=pt&255,ae.push(ht),ae.push(Ke.fullData)}}var At=ae.length?{data:sn.apply(_n,le(ae)),isKeyframe:ye}:null;if(At){Q==null&&ne.dts!=null&&(Q=ne.dts);var ut=void 0;ut=fe+1<se.length?(se[fe+1].dts||0)-(ne.dts||0):se.length>1?(ne.dts||0)-(se[fe-1].dts||0):(n.endTime-n.startTime)*9e4,z.push({data:At.data,size:At.data.byteLength,duration:ut,wb:Math.round((ne.pts||0)-(ne.dts||0)),flags:{zb:0,mb:0,jb:0,gb:0,hb:At.isKeyframe?2:1,Ab:At.isKeyframe?0:1}})}}var tt=LR(ee);if(!tt||Q==null)throw new q(2,3,3018,n?n.P()[0]:null);t.height=tt.height,t.width=tt.width,T={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:o,Cb:[],Ha:new Uint8Array([]),Ra:tt.Ra,Za:tt.Za,$a:tt.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:Q,Bb:z},stream:t}}T&&(y.push(T),T=null)}if(u=="audio"){switch(w.audio){case"aac":for(var Et=[],at,rt=null,ct=null,Xt=null,Vt=R(g.xb()),Wt=Vt.next();!Wt.done;Wt=Vt.next()){var yn=Wt.value,rn=yn.data;if(rn){var It=0;if(ct==-1&&Xt)rn=sn(Xt,yn.data),ct=null;else if(ct!=null&&Xt){It=Math.max(0,ct);var vo=sn(Xt,rn.subarray(0,It));Et.push({data:vo,size:vo.byteLength,duration:1024,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),ct=Xt=null}if(at=bC(rn,It),!at)throw new q(2,3,3018,n?n.P()[0]:null);for(t.audioSamplingRate=at.sampleRate,t.channelsCount=at.channelCount,rt==null&&yn.pts!==null&&(rt=yn.pts);It<rn.length;){var xi=CC(rn,It);if(!xi){Xt=rn.subarray(It,rn.length),ct=-1;break}var xo=xi.Zd+xi.ra;ct=Math.max(0,It+xo-rn.length),ct!=0?Xt=rn.subarray(It+xi.Zd,It+xo):It+xo<=rn.length&&Et.push({data:rn.subarray(It+xi.Zd,It+xo),size:xi.ra,duration:1024,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),It+=xo}}}if(!at||rt==null){rt=n.startTime*9e4;var wu=ei("audio",t.codecs.split(","));if(!wu||!t.channelsCount||!t.audioSamplingRate)throw new q(2,3,3018,n?n.P()[0]:null);at={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:wu};var Su=ER(wu,t.channelsCount);if(!Su)throw new q(2,3,3018,n?n.P()[0]:null);for(var ur=rt+(n.endTime-n.startTime)*9e4,LC=rt;LC<ur;)Et.push({data:Su,size:Su.byteLength,duration:1024,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),LC+=1024/at.sampleRate*9e4}var PC=at.sampleRate,GR=rt/9e4*PC;T={id:t.id,type:"audio",codecs:at.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:PC,duration:o,Cb:[],Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:GR,Bb:Et},stream:t};break;case"ac3":for(var DC=[],Ld=0,vm=new Uint8Array([]),Pd=null,OC=R(g.xb()),xm=OC.next();!xm.done;xm=OC.next()){var wm=xm.value,Sm=wm.data;Pd==null&&wm.pts!==null&&(Pd=wm.pts);for(var Tu=0;Tu<Sm.length;){var wo=AC(Sm,Tu);wo?(t.audioSamplingRate=wo.sampleRate,t.channelsCount=wo.channelCount,Ld=wo.sampleRate,vm=wo.Ha,DC.push({data:Sm.subarray(Tu,Tu+wo.ra),size:wo.ra,duration:1536,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),Tu+=wo.ra):Tu++}}if(Ld==0||vm.byteLength==0||Pd==null)throw new q(2,3,3018,n?n.P()[0]:null);var XR=Pd/9e4*Ld;T={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Ld,duration:o,Cb:[],Ha:vm,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:XR,Bb:DC},stream:t};break;case"ec3":for(var NC=[],Dd=0,Tm=new Uint8Array([]),Od=null,UC=R(g.xb()),Cm=UC.next();!Cm.done;Cm=UC.next()){var bm=Cm.value,km=bm.data;Od==null&&bm.pts!==null&&(Od=bm.pts);for(var Cu=0;Cu<km.length;){var So=EC(km,Cu);So?(t.audioSamplingRate=So.sampleRate,t.channelsCount=So.channelCount,Dd=So.sampleRate,Tm=So.Ha,NC.push({data:km.subarray(Cu,Cu+So.ra),size:So.ra,duration:1536,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),Cu+=So.ra):Cu++}}if(Dd==0||Tm.byteLength==0||Od==null)throw new q(2,3,3018,n?n.P()[0]:null);var WR=Od/9e4*Dd;T={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Dd,duration:o,Cb:[],Ha:Tm,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:WR,Bb:NC},stream:t};break;case"mp3":for(var BC=[],Nd,Ud=null,FC=R(g.xb()),Am=FC.next();!Am.done;Am=FC.next()){var Em=Am.value,Ta=Em.data;if(Ta){Ud==null&&Em.pts!==null&&(Ud=Em.pts);for(var us=0;us<Ta.length;){var bu=_d(Ta,us);bu?(Nd||(Nd=bu),us+bu.ra<=Ta.length&&BC.push({data:Ta.subarray(us,us+bu.ra),size:bu.ra,duration:1152,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),us+=bu.ra):us++}}}if(!Nd||Ud==null)throw new q(2,3,3018,n?n.P()[0]:null);var jC=Nd.sampleRate,KR=Ud/9e4*jC;T={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:jC,duration:o,Cb:[],Ha:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:KR,Bb:BC},stream:t};break;case"opus":var $C=[],Bd=null,vr=g.H;if(!vr)throw new q(2,3,3018,n?n.P()[0]:null);var Qn=[];switch(vr.oj){case 1:case 2:Qn=[0];break;case 0:Qn=[255,1,1,0,1];break;case 128:Qn=[255,2,0,0,1];break;case 3:Qn=[1,2,1,0,2,1];break;case 4:Qn=[1,2,2,0,1,2,3];break;case 5:Qn=[1,3,2,0,4,1,2,3];break;case 6:Qn=[1,4,2,0,4,1,2,3,5];break;case 7:Qn=[1,4,2,0,4,1,2,3,5,6];break;case 8:Qn=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Qn=[1,1,2,0,1];break;case 131:Qn=[1,1,3,0,1,2];break;case 132:Qn=[1,1,4,0,1,2,3];break;case 133:Qn=[1,1,5,0,1,2,3,4];break;case 134:Qn=[1,1,6,0,1,2,3,4,5];break;case 135:Qn=[1,1,7,0,1,2,3,4,5,6];break;case 136:Qn=[1,1,8,0,1,2,3,4,5,6,7]}for(var zC=new Uint8Array([0,vr.channelCount,0,0,vr.sampleRate>>>24&255,vr.sampleRate>>>17&255,vr.sampleRate>>>8&255,vr.sampleRate>>>0&255,0,0].concat(le(Qn))),VC=vr.sampleRate,HC=R(g.xb()),Im=HC.next();!Im.done;Im=HC.next()){var Mm=Im.value,ku=Mm.data;Bd==null&&Mm.pts!==null&&(Bd=Mm.pts);for(var Ca=0;Ca<ku.length;){for(var YR=(ku[Ca+1]&16)!==0,qR=(ku[Ca+1]&8)!==0,Vr=Ca+2,Fd=0;ku[Vr]===255;)Fd+=255,Vr+=1;Fd+=ku[Vr],Vr+=1,Vr+=YR?2:0,Vr+=qR?2:0;var GC=ku.slice(Vr,Vr+Fd);$C.push({data:GC,size:GC.byteLength,duration:960,wb:0,flags:{zb:0,mb:0,jb:0,gb:0,hb:2,Ab:0}}),Ca=Vr+Fd}}if(zC.byteLength==0||Bd==null)throw new q(2,3,3018,n?n.P()[0]:null);t.audioSamplingRate=vr.sampleRate,t.channelsCount=vr.channelCount;var JR=Bd/9e4*VC;T={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:VC,duration:o,Cb:[],Ha:zC,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:JR,Bb:$C},stream:t}}T&&(y.push(T),T=null)}}catch(_m){return _m&&_m.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(_m)}if(!y.length)return Promise.reject(new q(2,3,3018,n?n.P()[0]:null));var XC=new $s(y),Rm=t.id+"_"+n.i;if(this.j.has(Rm))var ba=this.j.get(Rm);else ba=zs(XC),this.j.set(Rm,ba);var QR=this.l!==ba,ZR=kl(XC);return this.l=ba,this.g++,Promise.resolve({data:ZR,init:QR?ba:null})},be("shaka.transmuxer.TsTransmuxer",Hi),Hi.prototype.transmux=Hi.prototype.transmux,Hi.prototype.getOriginalMimeType=Hi.prototype.getOriginalMimeType,Hi.prototype.convertCodecs=Hi.prototype.convertCodecs,Hi.prototype.isSupported=Hi.prototype.isSupported,Hi.prototype.destroy=Hi.prototype.destroy;var VR=["aac","ac-3","ec-3","mp3","opus"],HR=["avc","hevc"];Er("video/mp2t",function(){return new Hi("video/mp2t")},op);function _C(){}U(_C,ii),be("shaka.util.FairPlayUtils",_C)}).call(i,s,s,void 0);for(var c in i.shaka)h[c]=i.shaka[c]})()})(Wm)),Wm}var NP=OP();const A3=DP(NP);let gs,Gn;const Py={playingState:!1},UP=async h=>{A3.polyfill.installAll(),Gn=h,Gn||(Gn=document.createElement("video"),Gn.style.cssText="position: absolute; top: 0; left: 0; z-index: -1",Gn.width=window.innerWidth,Gn.height=window.innerHeight,gs=new A3.Player,await gs.attach(Gn),Gn.autoplay=!1,gs.addEventListener("error",s=>{console.error(s)}),document.body.insertBefore(Gn,document.body.firstChild))},BP=async h=>{if(!gs||!Gn)throw"Player not initialized yet";await gs.load(h.streamUrl)},FP=()=>{Gn.play().then(()=>{Py.playingState=!0})},jP=()=>{Gn.pause(),Py.playingState=!1},$P=async()=>{await gs.destroy(),gs=null,Gn.remove(),Gn=null},zP=()=>Gn.currentTime,VP=()=>Gn.duration,HP=()=>{let h=s=>new Date(s*1e3).toISOString().substr(14,5);return`${h(Gn.currentTime)} : ${h(Math.floor(Gn.duration))}`},To={init:UP,load:BP,play:FP,pause:jP,getCurrentTime:zP,getVideoDuration:VP,getTimeFormat:HP,state:Py,destroy:$P},GP=Oe.Component("Player",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),l[0].populate(r[0]),C===!0&&(E-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].y=1080,r[1].mount="{y:1}",r[1].w=1920,r[1].h=150,r[1].color={top:"0x00000000",bottom:"0x444444ff"},r[1].alpha={transition:i.controlsVisibility},l[1].populate(r[1]),C===!0&&(E-=1),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},C===!0?b:i),r[2].x=60,r[2].y=50,l[2].populate(r[2]),C===!0&&(E-=1),s=l[2],r[3]={},l[3]=this.element({parent:s||"root"},C===!0?b:i),r[3].w=60,r[3].h=60,r[3].color="0x0087ceeb",r[3].effects=[{type:"radius",props:{radius:16}}],l[3].populate(r[3]),C===!0&&(E-=1),s=l[3],r[4]={},l[4]=this.element({parent:s||"root"},C===!0?b:i),r[4].y=14,r[4].x=14,r[4].w=32,r[4].h=32,r[4].src=i.playing?"assets/player/pause.png":"assets/player/play.png",l[4].populate(r[4]),C===!0&&(E-=1),s=l[2],r[5]={},l[5]=this.element({parent:s||"root"},C===!0?b:i),r[5].y=22,r[5].x=100,r[5].w=i.progressLength,r[5].h=16,r[5].color="0xffffff80",r[5].effects=[{type:"radius",props:{radius:8}}],l[5].populate(r[5]),C===!0&&(E-=1),s=l[5],r[6]={},l[6]=this.element({parent:s||"root"},C===!0?b:i),r[6].h=16,r[6].w={transition:{value:i.progress,d:100,f:"ease-in-out"}},r[6].effects=[{type:"radius",props:{radius:8}}],r[6].color="0x0087ceeb",l[6].populate(r[6]),C===!0&&(E-=1),A[7]=c.components&&c.components.Circle||f.Circle,s=l[5],r[7]={},l[7]=this.element({parent:s||"root"},C===!0?b:i),r[7].size=28,r[7].color="0xffffffff",r[7].y="-6",r[7].x={transition:{value:i.progress-8,d:100,f:"ease-in-out"}},_[7]=[],typeof A[7]<"u")for(let U in A[7][Symbol.for("config")].props)delete r[7][A[7][Symbol.for("config")].props[U]],_[7].push(A[7][Symbol.for("config")].props[U]);if(l[7].populate(r[7]),C===!0&&(E-=1),s=l[7],S[8]={},S[8].size=28,S[8].color="0xffffffff",S[8].y="-6",I={transition:{value:i.progress-8,d:100,f:"ease-in-out"}},Array.isArray(I)===!0&&(I=x(I).slice(0)),S[8].x=I,k=S[8].is||"Circle",f[8],typeof k=="string"){if(f[8]=c.components&&c.components[k]||f[k],!f[8])throw new Error('Component "Circle" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[8]=k);return l[8]=f[8].call(null,{props:S[8]},l[7],i),l[8][Symbol.for("slots")][0]?(s=l[8][Symbol.for("slots")][0],b=l[8],C=!0):s=l[8][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),s=l[2],r[9]={},l[9]=this.element({parent:s||"root"},C===!0?b:i),r[9].x=1660,r[9].y=16,l[9].populate(r[9]),C===!0&&(E-=1),s=l[9],r[10]={},l[10]=this.element({parent:s||"root"},C===!0?b:i),r[10].content=i.currentTime,r[10].size=25,r[10].__textnode=!0,l[10].populate(r[10]),C===!0&&(E-=1),s=l[9],r[11]={},l[11]=this.element({parent:s||"root"},C===!0?b:i),r[11].x=70,r[11].size=25,r[11].content="/",r[11].__textnode=!0,l[11].populate(r[11]),C===!0&&(E-=1),s=l[9],r[12]={},l[12]=this.element({parent:s||"root"},C===!0?b:i),r[12].x=85,r[12].size=25,r[12].content=i.duration,r[12].__textnode=!0,l[12].populate(r[12]),C===!0&&(E-=1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[7]=null,S[8]=null,f[8]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(s,i,c,f,v,x){i[1].set("alpha",{transition:s.controlsVisibility})},function(s,i,c,f,v,x){i[3].set("effects",[{type:"radius",props:{radius:16}}])},function(s,i,c,f,v,x){i[4].set("src",s.playing?"assets/player/pause.png":"assets/player/play.png")},function(s,i,c,f,v,x){i[5].set("effects",[{type:"radius",props:{radius:8}}])},function(s,i,c,f,v,x){i[6].set("w",{transition:{value:s.progress,d:100,f:"ease-in-out"}})},function(s,i,c,f,v,x){i[6].set("effects",[{type:"radius",props:{radius:8}}])},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[7]>"u"||skips[7].indexOf("x")===-1)&&i[7].set("x",{transition:{value:s.progress-8,d:100,f:"ease-in-out"}})},function(s,i,c,f,v,x){i[8][Symbol.for("props")].x={transition:{value:s.progress-8,d:100,f:"ease-in-out"}}},function(s,i,c,f,v,x){i[10].set("content",s.currentTime)},function(s,i,c,f,v,x){i[12].set("content",s.duration)}],context:{}},state(){return{controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}},hooks:{focus(){this.$emit("clearBackground")},unfocus(){this.$emit("changeBackground")},async init(){await To.init()},async ready(){await To.load({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});const h=i=>new Date(i*1e3).toISOString().substr(14,5),s=To.getVideoDuration();s&&(this.duration=h(s),this.progressChunkSize=Math.round(this.progressLength/s*100)/100),this.$setInterval(()=>{const i=To.getCurrentTime();this.currentTime=h(i),this.progress=Math.round(i*this.progressChunkSize)},1e3),this.play()},async destroy(){await To.destroy()}},input:{space(){this.play()},up(){this.showControls(1)},down(){this.showControls(0)}},methods:{play(){this.showControls(1),this.hideTimeout=this.$setTimeout(()=>this.showControls(0),3e3),To.state.playingState==!0?(To.pause(),this.playing=!1):(console.log("play!"),To.play(),this.playing=!0)},showControls(h){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=h}}}),XP=Oe.Component("Colors",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=1920,r[0].h=1080,r[0].color={transition:i.bg},l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].x=20,r[1].y=20,l[1].populate(r[1]),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].w=100,r[2].h=100,r[2].x=0,r[2].color="0xecfeffff",l[2].populate(r[2]),s=l[1],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].w=100,r[3].h=100,r[3].x=120,r[3].color="0xa5f3fcff",l[3].populate(r[3]),s=l[1],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].w=100,r[4].h=100,r[4].x=240,r[4].color="0x22d3eeff",l[4].populate(r[4]),s=l[1],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].w=100,r[5].h=100,r[5].x=360,r[5].color="0x0891b2ff",l[5].populate(r[5]),s=l[0],r[6]={},l[6]=this.element({parent:s||"root"},i),r[6].x=20,r[6].y=140,l[6].populate(r[6]),s=l[6],r[7]={},l[7]=this.element({parent:s||"root"},i),r[7].w=100,r[7].h=100,r[7].x=0,r[7].color="0xecfeffff",l[7].populate(r[7]),s=l[6],r[8]={},l[8]=this.element({parent:s||"root"},i),r[8].w=100,r[8].h=100,r[8].x=120,r[8].color="0xa5f3fcff",l[8].populate(r[8]),s=l[6],r[9]={},l[9]=this.element({parent:s||"root"},i),r[9].w=100,r[9].h=100,r[9].x=240,r[9].color="0x22d3eeff",l[9].populate(r[9]),s=l[6],r[10]={},l[10]=this.element({parent:s||"root"},i),r[10].w=100,r[10].h=100,r[10].x=360,r[10].color="0x0891b2ff",l[10].populate(r[10]),s=l[0],r[11]={},l[11]=this.element({parent:s||"root"},i),r[11].x=20,r[11].y=260,l[11].populate(r[11]),s=l[11],r[12]={},l[12]=this.element({parent:s||"root"},i),r[12].w=100,r[12].h=100,r[12].x=0,r[12].color="0xecfeffaa",l[12].populate(r[12]),s=l[11],r[13]={},l[13]=this.element({parent:s||"root"},i),r[13].w=100,r[13].h=100,r[13].x=120,r[13].color="0xa5f3fc33",l[13].populate(r[13]),s=l[11],r[14]={},l[14]=this.element({parent:s||"root"},i),r[14].w=100,r[14].h=100,r[14].x=240,r[14].color="0x22d3ee20",l[14].populate(r[14]),s=l[11],r[15]={},l[15]=this.element({parent:s||"root"},i),r[15].w=100,r[15].h=100,r[15].x=360,r[15].color="0x0891b2ff",l[15].populate(r[15]),s=l[0],r[16]={},l[16]=this.element({parent:s||"root"},i),r[16].x=20,r[16].y=380,l[16].populate(r[16]),s=l[16],r[17]={},l[17]=this.element({parent:s||"root"},i),r[17].w=100,r[17].h=100,r[17].x=0,r[17].color="0xecfeffff",l[17].populate(r[17]),s=l[16],r[18]={},l[18]=this.element({parent:s||"root"},i),r[18].w=100,r[18].h=100,r[18].x=120,r[18].color="0xa5f3fcff",l[18].populate(r[18]),s=l[16],r[19]={},l[19]=this.element({parent:s||"root"},i),r[19].w=100,r[19].h=100,r[19].x=240,r[19].color="0x22d3eeff",l[19].populate(r[19]),s=l[16],r[20]={},l[20]=this.element({parent:s||"root"},i),r[20].w=100,r[20].h=100,r[20].x=360,r[20].color="0x0891b2ff",l[20].populate(r[20]),s=l[0],r[21]={},l[21]=this.element({parent:s||"root"},i),r[21].x=20,r[21].y=500,l[21].populate(r[21]),s=l[21],r[22]={},l[22]=this.element({parent:s||"root"},i),r[22].w=100,r[22].h=100,r[22].x=0,r[22].color="0xecfeffab",l[22].populate(r[22]),s=l[21],r[23]={},l[23]=this.element({parent:s||"root"},i),r[23].w=100,r[23].h=100,r[23].x=120,r[23].color="0xa5f3fc33",l[23].populate(r[23]),s=l[21],r[24]={},l[24]=this.element({parent:s||"root"},i),r[24].w=100,r[24].h=100,r[24].x=240,r[24].color="0x22d3ee21",l[24].populate(r[24]),s=l[21],r[25]={},l[25]=this.element({parent:s||"root"},i),r[25].w=100,r[25].h=100,r[25].x=360,r[25].color="0x0891b2ff",l[25].populate(r[25]),s=l[0],r[26]={},l[26]=this.element({parent:s||"root"},i),r[26].x=20,r[26].y=620,l[26].populate(r[26]),s=l[26],r[27]={},l[27]=this.element({parent:s||"root"},i),r[27].w=100,r[27].h=100,r[27].x=0,r[27].color="0x000000ff",l[27].populate(r[27]),s=l[26],r[28]={},l[28]=this.element({parent:s||"root"},i),r[28].w=100,r[28].h=100,r[28].x=120,r[28].color="0xccccccff",l[28].populate(r[28]),s=l[26],r[29]={},l[29]=this.element({parent:s||"root"},i),r[29].w=100,r[29].h=100,r[29].x=240,r[29].color="0x889900ff",l[29].populate(r[29]),s=l[26],r[30]={},l[30]=this.element({parent:s||"root"},i),r[30].w=100,r[30].h=100,r[30].x=360,r[30].color="0x00ff00ff",l[30].populate(r[30]),s=l[0],r[31]={},l[31]=this.element({parent:s||"root"},i),r[31].x=20,r[31].y=740,l[31].populate(r[31]),s=l[31],r[32]={},l[32]=this.element({parent:s||"root"},i),r[32].w=100,r[32].h=100,r[32].x=0,r[32].color="0x000000ff",l[32].populate(r[32]),s=l[31],r[33]={},l[33]=this.element({parent:s||"root"},i),r[33].w=100,r[33].h=100,r[33].x=120,r[33].color="0xccccccff",l[33].populate(r[33]),s=l[31],r[34]={},l[34]=this.element({parent:s||"root"},i),r[34].w=100,r[34].h=100,r[34].x=240,r[34].color="0x889900ff",l[34].populate(r[34]),s=l[31],r[35]={},l[35]=this.element({parent:s||"root"},i),r[35].w=100,r[35].h=100,r[35].x=360,r[35].color="0x00ff00ff",l[35].populate(r[35]),s=l[0],r[36]={},l[36]=this.element({parent:s||"root"},i),r[36].x=620,r[36].y=20,l[36].populate(r[36]),s=l[36],r[37]={},l[37]=this.element({parent:s||"root"},i),r[37].w=300,r[37].h=200,r[37].x=0,r[37].color={transition:i.color1},l[37].populate(r[37]),s=l[36],r[38]={},l[38]=this.element({parent:s||"root"},i),r[38].w=300,r[38].h=200,r[38].x=0,r[38].y=250,r[38].color={transition:i.color2},l[38].populate(r[38]),s=l[36],r[39]={},l[39]=this.element({parent:s||"root"},i),r[39].w=300,r[39].h=200,r[39].x=100,r[39].y=400,r[39].color={transition:i.color3},l[39].populate(r[39]),s=l[36],r[40]={},l[40]=this.element({parent:s||"root"},i),r[40].w=300,r[40].h=200,r[40].x=0,r[40].y=650,r[40].color={transition:{value:i.color4,d:1e3,f:"ease-in-out"}},l[40].populate(r[40]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("color",{transition:s.bg})},function(s,i,c,f,v,x){i[37].set("color",{transition:s.color1})},function(s,i,c,f,v,x){i[38].set("color",{transition:s.color2})},function(s,i,c,f,v,x){i[39].set("color",{transition:s.color3})},function(s,i,c,f,v,x){i[40].set("color",{transition:{value:s.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter(){this.color1=this.color1==="#0891b2"?"#22d3ee":"#0891b2",this.color2=this.color2==="#dc2626"?"#0f0":"#dc2626",this.color3=this.color3==="rgba(251, 191, 36)"?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4=this.color4==="#1e3a8a"?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let h=0;const s=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{h=h+1,h===s.length-1&&(h=0),this.bg=s[h]},2e3)}}}),WP=Oe.Component("Gradients",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].w=1920/4,r[1].h=1080,r[1].color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].w=1920/4,r[2].h=1080,r[2].x=1920/4,r[2].color="{left: '0xdc2626ff',  right: '0xf87171ff'}",l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].w=1920/4,r[3].h=1080,r[3].x=1920/4*2,r[3].color="{top: '0x0891b2ff', right: '0xf87171ff'}",l[3].populate(r[3]),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].w=1920/4,r[4].h=1080,r[4].x=1920/4*3,r[4].color="{right: '0x008000ff', bottom: '0xffd700ff'}",l[4].populate(r[4]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("w",1920/4)},function(s,i,c,f,v,x){i[2].set("w",1920/4)},function(s,i,c,f,v,x){i[2].set("x",1920/4)},function(s,i,c,f,v,x){i[3].set("w",1920/4)},function(s,i,c,f,v,x){i[3].set("x",1920/4*2)},function(s,i,c,f,v,x){i[4].set("w",1920/4)},function(s,i,c,f,v,x){i[4].set("x",1920/4*3)}],context:{}}}),KP=Oe.Component("Transitions",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].x=60,l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].w=200,r[1].h=200,r[1].x=50,r[1].y={transition:i.y},r[1].color="0xc4b5fdff",l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].w=200,r[2].h=200,r[2].x=300,r[2].y={transition:{value:i.y}},r[2].color="0xa78bfaff",l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].w=200,r[3].h=200,r[3].x=550,r[3].y={transition:{value:i.y,duration:1e3,start:i.start,end:i.doneTransition3}},r[3].color="0x8b5cf6ff",r[3].ref="bla",l[3].populate(r[3]),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].w=200,r[4].h=200,r[4].x=800,r[4].y={transition:{value:i.y,duration:500,delay:500,start:i.start,end:i.finished}},r[4].color="0x7c3aedff",l[4].populate(r[4]),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].w=200,r[5].h=200,r[5].x=1050,r[5].y={transition:{value:i.y,easing:"ease-in-out",end:i.finished}},r[5].color="0x6d28d9ff",l[5].populate(r[5]),s=l[0],r[6]={},l[6]=this.element({parent:s||"root"},i),r[6].w=200,r[6].h=200,r[6].x=1300,r[6].y={transition:{value:i.y,duration:3e3,easing:"ease-in-out-back",end:i.finished}},r[6].color="0x5b21b6ff",l[6].populate(r[6]),s=l[0],r[7]={},l[7]=this.element({parent:s||"root"},i),r[7].w=200,r[7].h=200,r[7].x=1550,r[7].y={transition:{value:i.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},r[7].color="0x4c1d95ff",l[7].populate(r[7]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("y",{transition:s.y})},function(s,i,c,f,v,x){i[2].set("y",{transition:{value:s.y}})},function(s,i,c,f,v,x){i[3].set("y",{transition:{value:s.y,duration:1e3,start:s.start,end:s.doneTransition3}})},function(s,i,c,f,v,x){i[4].set("y",{transition:{value:s.y,duration:500,delay:500,start:s.start,end:s.finished}})},function(s,i,c,f,v,x){i[5].set("y",{transition:{value:s.y,easing:"ease-in-out",end:s.finished}})},function(s,i,c,f,v,x){i[6].set("y",{transition:{value:s.y,duration:3e3,easing:"ease-in-out-back",end:s.finished}})},function(s,i,c,f,v,x){i[7].set("y",{transition:{value:s.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state(){return{y:50}},hooks:{init(){this.$setInterval(()=>{this.go()},12e3),this.go()}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(h,s,i){this.$log.info("Start transition",h.nodeId,s,i)},finished(h,s,i){this.$log.info("Finished transition",h.nodeId,s,i)},go(){this.y=50,this.$setTimeout(()=>{this.y=830},1e3),this.$setTimeout(()=>{this.y=50,this.$setTimeout(()=>{this.y=200},1e3)},6e3)}}}),YP=Oe.Component("Alpha",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].y=100,l[1].populate(r[1]),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].w=200,r[2].h=200,r[2].x=100,r[2].color="0xffffffff",r[2].alpha=.2,l[2].populate(r[2]),s=l[1],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].w=200,r[3].h=200,r[3].x=320,r[3].color="0xffffffff",r[3].alpha=.4,l[3].populate(r[3]),s=l[1],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].w=200,r[4].h=200,r[4].x=540,r[4].color="0xffffffff",r[4].alpha=.6,l[4].populate(r[4]),s=l[1],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].w=200,r[5].h=200,r[5].x=760,r[5].color="0xffffffff",r[5].alpha=.8,l[5].populate(r[5]),s=l[1],r[6]={},l[6]=this.element({parent:s||"root"},i),r[6].w=200,r[6].h=200,r[6].x=980,r[6].color="0xffffffff",r[6].alpha=1,l[6].populate(r[6]),s=l[0],r[7]={},l[7]=this.element({parent:s||"root"},i),r[7].w=200,r[7].h=200,r[7].x=100,r[7].y=320,r[7].color="0xffffffff",r[7].alpha=i.alpha,l[7].populate(r[7]),s=l[0],r[8]={},l[8]=this.element({parent:s||"root"},i),r[8].w=200,r[8].h=200,r[8].x=100,r[8].y=540,r[8].color="0xffffffff",r[8].alpha=i.alpha,l[8].populate(r[8]),s=l[0],r[9]={},l[9]=this.element({parent:s||"root"},i),r[9].w=200,r[9].h=200,r[9].x=100,r[9].y=760,r[9].color="0xffffffff",r[9].alpha={transition:{value:i.alpha,duration:1e3,easing:"ease-in-out-circ"}},l[9].populate(r[9]),s=l[0],r[10]={},l[10]=this.element({parent:s||"root"},i),r[10].w=428,r[10].h=234,r[10].x=1200,r[10].y=100,r[10].src=i.image,r[10].alpha=1,l[10].populate(r[10]),s=l[0],r[11]={},l[11]=this.element({parent:s||"root"},i),r[11].w=428,r[11].h=234,r[11].x=1300,r[11].y=294,r[11].src=i.image,r[11].alpha=.4,l[11].populate(r[11]),s=l[0],r[12]={},l[12]=this.element({parent:s||"root"},i),r[12].w=428,r[12].h=234,r[12].x=1200,r[12].y=488,r[12].src=i.image,r[12].alpha=.1,l[12].populate(r[12]),s=l[0],r[13]={},l[13]=this.element({parent:s||"root"},i),r[13].x=400,r[13].y=400,r[13].alpha=.2,r[13].content="Text with alpha applied directly",r[13].__textnode=!0,l[13].populate(r[13]),s=l[0],r[14]={},l[14]=this.element({parent:s||"root"},i),r[14].alpha=.5,r[14].x=400,r[14].y=500,l[14].populate(r[14]),s=l[14],r[15]={},l[15]=this.element({parent:s||"root"},i),r[15].content="Text with alpha applied on parent element",r[15].__textnode=!0,l[15].populate(r[15]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[8].set("alpha",s.alpha)},function(s,i,c,f,v,x){i[9].set("alpha",{transition:{value:s.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(s,i,c,f,v,x){i[10].set("src",s.image)},function(s,i,c,f,v,x){i[11].set("y",294)},function(s,i,c,f,v,x){i[11].set("src",s.image)},function(s,i,c,f,v,x){i[12].set("y",488)},function(s,i,c,f,v,x){i[12].set("src",s.image)}],context:{}},state(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready(){this.$setInterval(()=>{const h=this.direction==="up"?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(h,1),.1),this.alpha===1&&(this.direction="down"),this.alpha===.1&&(this.direction="up")},1400)}}}),qP=Oe.Component("Scaling",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].x=100,r[1].y=100,r[1].w=150,r[1].h=150,r[1].color="0x64748bff",l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].x=300,r[2].y=100,r[2].w=100,r[2].h=100,r[2].color="0x64748bff",r[2].scale=1.5,l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].x=100,r[3].y=400,r[3].w=100,r[3].h=100,r[3].color="0xb45309ff",r[3].scale=i.scale,l[3].populate(r[3]),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].x=900,r[4].y=400,r[4].w=100,r[4].h=100,r[4].src=i.balloon,r[4].scale={transition:{value:i.scale,easing:"ease-in-out"}},l[4].populate(r[4]),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].x=300,r[5].y=600,r[5].w=100,r[5].h=100,r[5].color="0x059669ff",r[5].scale=i.scale2,l[5].populate(r[5]),s=l[5],r[6]={},l[6]=this.element({parent:s||"root"},i),r[6].x=10,r[6].y=10,r[6].h=60,r[6].w=80,r[6].color="0x0369a1ff",l[6].populate(r[6]),s=l[0],r[7]={},l[7]=this.element({parent:s||"root"},i),r[7].x=1500,r[7].y=600,r[7].w=100,r[7].h=100,r[7].color="0x059669ff",r[7].scale=i.scale2,l[7].populate(r[7]),s=l[7],r[8]={},l[8]=this.element({parent:s||"root"},i),r[8].x=10,r[8].y=10,r[8].h=60,r[8].w=80,r[8].color="0x0369a1ff",r[8].scale=i.scale2/2,l[8].populate(r[8]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[4].set("src",s.balloon)},function(s,i,c,f,v,x){i[4].set("scale",{transition:{value:s.scale,easing:"ease-in-out"}})},function(s,i,c,f,v,x){i[5].set("scale",s.scale2)},function(s,i,c,f,v,x){i[7].set("scale",s.scale2)},function(s,i,c,f,v,x){i[8].set("scale",s.scale2/2)}],context:{}},state(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.scale+.5:0;this.scale=Math.max(Math.min(i,8),0),this.scale===8&&(this.direction="down"),this.scale===0&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=this.scale2===1?3:1},2e3)}}}),JP=Oe.Component("Rotation",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].y=70,l[1].populate(r[1]),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].x=100,r[2].y=0,r[2].w=200,r[2].h=100,r[2].color="0xfee2e2ff",r[2].rotation=0,l[2].populate(r[2]),s=l[1],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].x=100,r[3].y=150,r[3].w=200,r[3].h=100,r[3].color="0xfecacaff",r[3].rotation=10,l[3].populate(r[3]),s=l[1],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].x=100,r[4].y=300,r[4].w=200,r[4].h=100,r[4].color="0xfca5a5ff",r[4].rotation=20,l[4].populate(r[4]),s=l[1],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].x=100,r[5].y=450,r[5].w=200,r[5].h=100,r[5].color="0xf87171ff",r[5].rotation=30,l[5].populate(r[5]),s=l[1],r[6]={},l[6]=this.element({parent:s||"root"},i),r[6].x=100,r[6].y=610,r[6].w=200,r[6].h=100,r[6].color="0xef4444ff",r[6].rotation=40,l[6].populate(r[6]),s=l[1],r[7]={},l[7]=this.element({parent:s||"root"},i),r[7].x=100,r[7].y=800,r[7].w=200,r[7].h=100,r[7].color="0xdc2626ff",r[7].rotation=50,l[7].populate(r[7]),s=l[0],r[8]={},l[8]=this.element({parent:s||"root"},i),r[8].y=70,r[8].x=300,l[8].populate(r[8]),s=l[8],r[9]={},l[9]=this.element({parent:s||"root"},i),r[9].x=100,r[9].y=0,r[9].w=200,r[9].h=100,r[9].color="0xfee2e2ff",r[9].rotation=60,l[9].populate(r[9]),s=l[8],r[10]={},l[10]=this.element({parent:s||"root"},i),r[10].x=100,r[10].y=150,r[10].w=200,r[10].h=100,r[10].color="0xfecacaff",r[10].rotation=70,l[10].populate(r[10]),s=l[8],r[11]={},l[11]=this.element({parent:s||"root"},i),r[11].x=100,r[11].y=300,r[11].w=200,r[11].h=100,r[11].color="0xfca5a5ff",r[11].rotation=80,l[11].populate(r[11]),s=l[8],r[12]={},l[12]=this.element({parent:s||"root"},i),r[12].x=100,r[12].y=450,r[12].w=200,r[12].h=100,r[12].color="0xf87171ff",r[12].rotation=90,l[12].populate(r[12]),s=l[8],r[13]={},l[13]=this.element({parent:s||"root"},i),r[13].x=100,r[13].y=610,r[13].w=200,r[13].h=100,r[13].color="0xef4444ff",r[13].rotation=100,l[13].populate(r[13]),s=l[8],r[14]={},l[14]=this.element({parent:s||"root"},i),r[14].x=100,r[14].y=800,r[14].w=200,r[14].h=100,r[14].color="0xdc2626ff",r[14].rotation=100,l[14].populate(r[14]),s=l[0],r[15]={},l[15]=this.element({parent:s||"root"},i),r[15].y=70,r[15].x=600,l[15].populate(r[15]),s=l[15],r[16]={},l[16]=this.element({parent:s||"root"},i),r[16].x=100,r[16].y=0,r[16].w=200,r[16].h=100,r[16].color="0xfee2e2ff",r[16].rotation=110,l[16].populate(r[16]),s=l[15],r[17]={},l[17]=this.element({parent:s||"root"},i),r[17].x=100,r[17].y=150,r[17].w=200,r[17].h=100,r[17].color="0xfecacaff",r[17].rotation=120,l[17].populate(r[17]),s=l[15],r[18]={},l[18]=this.element({parent:s||"root"},i),r[18].x=100,r[18].y=300,r[18].w=200,r[18].h=100,r[18].color="0xfca5a5ff",r[18].rotation=130,l[18].populate(r[18]),s=l[15],r[19]={},l[19]=this.element({parent:s||"root"},i),r[19].x=100,r[19].y=450,r[19].w=200,r[19].h=100,r[19].color="0xf87171ff",r[19].rotation=140,l[19].populate(r[19]),s=l[15],r[20]={},l[20]=this.element({parent:s||"root"},i),r[20].x=100,r[20].y=610,r[20].w=200,r[20].h=100,r[20].color="0xef4444ff",r[20].rotation=150,l[20].populate(r[20]),s=l[15],r[21]={},l[21]=this.element({parent:s||"root"},i),r[21].x=100,r[21].y=800,r[21].w=200,r[21].h=100,r[21].color="0xdc2626ff",r[21].rotation=160,l[21].populate(r[21]),s=l[0],r[22]={},l[22]=this.element({parent:s||"root"},i),r[22].y=70,r[22].x=900,l[22].populate(r[22]),s=l[22],r[23]={},l[23]=this.element({parent:s||"root"},i),r[23].x=100,r[23].y=0,r[23].w=200,r[23].h=100,r[23].color="0xfee2e2ff",r[23].rotation=170,l[23].populate(r[23]),s=l[22],r[24]={},l[24]=this.element({parent:s||"root"},i),r[24].x=100,r[24].y=150,r[24].w=200,r[24].h=100,r[24].color="0xfecacaff",r[24].rotation=180,l[24].populate(r[24]),s=l[22],r[25]={},l[25]=this.element({parent:s||"root"},i),r[25].x=100,r[25].y=300,r[25].w=200,r[25].h=100,r[25].color="0xfca5a5ff",r[25].rotation=190,l[25].populate(r[25]),s=l[22],r[26]={},l[26]=this.element({parent:s||"root"},i),r[26].x=100,r[26].y=450,r[26].w=200,r[26].h=100,r[26].color="0xf87171ff",r[26].rotation=200,l[26].populate(r[26]),s=l[22],r[27]={},l[27]=this.element({parent:s||"root"},i),r[27].x=100,r[27].y=610,r[27].w=200,r[27].h=100,r[27].color="0xef4444ff",r[27].rotation=210,l[27].populate(r[27]),s=l[22],r[28]={},l[28]=this.element({parent:s||"root"},i),r[28].x=100,r[28].y=800,r[28].w=200,r[28].h=100,r[28].color="0xdc2626ff",r[28].rotation=220,l[28].populate(r[28]),s=l[0],r[29]={},l[29]=this.element({parent:s||"root"},i),r[29].y=70,r[29].x=1200,l[29].populate(r[29]),s=l[29],r[30]={},l[30]=this.element({parent:s||"root"},i),r[30].x=100,r[30].y=0,r[30].w=200,r[30].h=100,r[30].color="0xfee2e2ff",r[30].rotation=230,l[30].populate(r[30]),s=l[29],r[31]={},l[31]=this.element({parent:s||"root"},i),r[31].x=100,r[31].y=150,r[31].w=200,r[31].h=100,r[31].color="0xfecacaff",r[31].rotation=240,l[31].populate(r[31]),s=l[29],r[32]={},l[32]=this.element({parent:s||"root"},i),r[32].x=100,r[32].y=300,r[32].w=200,r[32].h=100,r[32].color="0xfca5a5ff",r[32].rotation=250,l[32].populate(r[32]),s=l[29],r[33]={},l[33]=this.element({parent:s||"root"},i),r[33].x=100,r[33].y=450,r[33].w=200,r[33].h=100,r[33].color="0xf87171ff",r[33].rotation=260,l[33].populate(r[33]),s=l[29],r[34]={},l[34]=this.element({parent:s||"root"},i),r[34].x=100,r[34].y=610,r[34].w=200,r[34].h=100,r[34].color="0xef4444ff",r[34].rotation=270,l[34].populate(r[34]),s=l[29],r[35]={},l[35]=this.element({parent:s||"root"},i),r[35].x=100,r[35].y=800,r[35].w=200,r[35].h=100,r[35].color="0xdc2626ff",r[35].rotation=280,l[35].populate(r[35]),s=l[0],r[36]={},l[36]=this.element({parent:s||"root"},i),r[36].y=70,r[36].x=1500,l[36].populate(r[36]),s=l[36],r[37]={},l[37]=this.element({parent:s||"root"},i),r[37].x=100,r[37].y=0,r[37].w=200,r[37].h=100,r[37].color="0xfee2e2ff",r[37].rotation=290,l[37].populate(r[37]),s=l[36],r[38]={},l[38]=this.element({parent:s||"root"},i),r[38].x=100,r[38].y=150,r[38].w=200,r[38].h=100,r[38].color="0xfecacaff",r[38].rotation=300,l[38].populate(r[38]),s=l[36],r[39]={},l[39]=this.element({parent:s||"root"},i),r[39].x=100,r[39].y=300,r[39].w=200,r[39].h=100,r[39].color="0xfca5a5ff",r[39].rotation=310,l[39].populate(r[39]),s=l[36],r[40]={},l[40]=this.element({parent:s||"root"},i),r[40].x=100,r[40].y=450,r[40].w=200,r[40].h=100,r[40].color="0xf87171ff",r[40].rotation=320,l[40].populate(r[40]),s=l[36],r[41]={},l[41]=this.element({parent:s||"root"},i),r[41].x=100,r[41].y=610,r[41].w=200,r[41].h=100,r[41].color="0xef4444ff",r[41].rotation=330,l[41].populate(r[41]),s=l[36],r[42]={},l[42]=this.element({parent:s||"root"},i),r[42].x=100,r[42].y=800,r[42].w=200,r[42].h=100,r[42].color="0xdc2626ff",r[42].rotation=340,l[42].populate(r[42]),s=l[0],r[43]={},l[43]=this.element({parent:s||"root"},i),r[43].x=200,r[43].y=200,r[43].w=400,r[43].h=400,r[43].color="0x0891b2ff",r[43].rotation=i.rotation1,l[43].populate(r[43]),s=l[0],r[44]={},l[44]=this.element({parent:s||"root"},i),r[44].x=800,r[44].y=200,r[44].w=400,r[44].h=400,r[44].color="0x0891b2ff",r[44].rotation=i.rotation2,l[44].populate(r[44]),s=l[0],r[45]={},l[45]=this.element({parent:s||"root"},i),r[45].x=1400,r[45].y=200,r[45].w=400,r[45].h=400,r[45].color="0x0891b2ff",r[45].rotation={transition:i.rotation3},l[45].populate(r[45]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[44].set("rotation",s.rotation2)},function(s,i,c,f,v,x){i[45].set("rotation",{transition:s.rotation3})}],context:{}},state(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready(){let h=800,s=2e3;this.$setInterval(()=>{const i=this.rotation2+10;this.rotation2=i<=360?i:0},h),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,this.rotation3*2)),this.rotation3===720&&(this.rotation3=0)},s)}}}),QP=Oe.Component("KeyInput",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].x=525,r[0].y=130,l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].w=200,r[1].h=200,r[1].color=i.focusColor,r[1].x=i.focusedX*220,r[1].y=i.focusedY*210,l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].w=180,r[2].h=180,r[2].x=10,r[2].y=10,r[2].color=i.blockColor,l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].w=180,r[3].h=180,r[3].x=230,r[3].y=10,r[3].color=i.blockColor,l[3].populate(r[3]),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].w=180,r[4].h=180,r[4].x=450,r[4].y=10,r[4].color=i.blockColor,l[4].populate(r[4]),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].w=180,r[5].h=180,r[5].x=670,r[5].y=10,r[5].color=i.blockColor,l[5].populate(r[5]),s=l[0],r[6]={},l[6]=this.element({parent:s||"root"},i),r[6].w=180,r[6].h=180,r[6].x=10,r[6].y=220,r[6].color=i.blockColor,l[6].populate(r[6]),s=l[0],r[7]={},l[7]=this.element({parent:s||"root"},i),r[7].w=180,r[7].h=180,r[7].x=230,r[7].y=220,r[7].color=i.blockColor,l[7].populate(r[7]),s=l[0],r[8]={},l[8]=this.element({parent:s||"root"},i),r[8].w=180,r[8].h=180,r[8].x=450,r[8].y=220,r[8].color=i.blockColor,l[8].populate(r[8]),s=l[0],r[9]={},l[9]=this.element({parent:s||"root"},i),r[9].w=180,r[9].h=180,r[9].x=670,r[9].y=220,r[9].color=i.blockColor,l[9].populate(r[9]),s=l[0],r[10]={},l[10]=this.element({parent:s||"root"},i),r[10].w=180,r[10].h=180,r[10].x=10,r[10].y=430,r[10].color=i.blockColor,l[10].populate(r[10]),s=l[0],r[11]={},l[11]=this.element({parent:s||"root"},i),r[11].w=180,r[11].h=180,r[11].x=230,r[11].y=430,r[11].color=i.blockColor,l[11].populate(r[11]),s=l[0],r[12]={},l[12]=this.element({parent:s||"root"},i),r[12].w=180,r[12].h=180,r[12].x=450,r[12].y=430,r[12].color=i.blockColor,l[12].populate(r[12]),s=l[0],r[13]={},l[13]=this.element({parent:s||"root"},i),r[13].w=180,r[13].h=180,r[13].x=670,r[13].y=430,r[13].color=i.blockColor,l[13].populate(r[13]),s=l[0],r[14]={},l[14]=this.element({parent:s||"root"},i),r[14].w=180,r[14].h=180,r[14].x=10,r[14].y=640,r[14].color=i.blockColor,l[14].populate(r[14]),s=l[0],r[15]={},l[15]=this.element({parent:s||"root"},i),r[15].w=180,r[15].h=180,r[15].x=230,r[15].y=640,r[15].color=i.blockColor,l[15].populate(r[15]),s=l[0],r[16]={},l[16]=this.element({parent:s||"root"},i),r[16].w=180,r[16].h=180,r[16].x=450,r[16].y=640,r[16].color=i.blockColor,l[16].populate(r[16]),s=l[0],r[17]={},l[17]=this.element({parent:s||"root"},i),r[17].w=180,r[17].h=180,r[17].x=670,r[17].y=640,r[17].color=i.blockColor,l[17].populate(r[17]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("color",s.focusColor)},function(s,i,c,f,v,x){i[1].set("x",s.focusedX*220)},function(s,i,c,f,v,x){i[1].set("y",s.focusedY*210)},function(s,i,c,f,v,x){i[2].set("color",s.blockColor)},function(s,i,c,f,v,x){i[3].set("color",s.blockColor)},function(s,i,c,f,v,x){i[4].set("color",s.blockColor)},function(s,i,c,f,v,x){i[5].set("color",s.blockColor)},function(s,i,c,f,v,x){i[6].set("color",s.blockColor)},function(s,i,c,f,v,x){i[7].set("color",s.blockColor)},function(s,i,c,f,v,x){i[8].set("color",s.blockColor)},function(s,i,c,f,v,x){i[9].set("color",s.blockColor)},function(s,i,c,f,v,x){i[10].set("color",s.blockColor)},function(s,i,c,f,v,x){i[11].set("color",s.blockColor)},function(s,i,c,f,v,x){i[12].set("color",s.blockColor)},function(s,i,c,f,v,x){i[13].set("color",s.blockColor)},function(s,i,c,f,v,x){i[14].set("color",s.blockColor)},function(s,i,c,f,v,x){i[15].set("color",s.blockColor)},function(s,i,c,f,v,x){i[16].set("color",s.blockColor)},function(s,i,c,f,v,x){i[17].set("color",s.blockColor)}],context:{}},state(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor(){return this.colorscheme,this.colorscheme==="yellow"?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme,this.colorscheme==="yellow"?"#facc15":"#38bdf8"}},input:{left(){const h=this.focusedX-1;this.focusedX=Math.max(h,0)},right(){const h=this.focusedX+1;this.focusedX=Math.min(h,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme=this.colorscheme==="yellow"?"blue":"yellow"},any(h){const s=parseInt(h.key);isNaN(s)?this.parent.$focus(h):(this.focusedX=Math.max(0,(s-1)%4),this.focusedY=Math.max(0,Math.ceil(s/4)-1))}}}),Km=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],Ym=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],ZP=Oe.Component("Texts",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].x=100,r[0].y=100,l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].content="Default text",r[1]["@loaded"]=i.textLoaded&&i.textLoaded.bind(i),r[1].__textnode=!0,l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].content="123456",r[2].x=400,r[2].__textnode=!0,l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].content="Text with a different fontsize",r[3].size=i.size,r[3].y=120,r[3].font="raleway",r[3].__textnode=!0,l[3].populate(r[3]),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].content="Text with a different color",r[4].size=50,r[4].color=i.color,r[4].y=250,r[4].__textnode=!0,l[4].populate(r[4]),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].content="Letterspacing",r[5].size=50,r[5].color="0x38bdf8ff",r[5].y=450,r[5].letterspacing=40,r[5].__textnode=!0,l[5].populate(r[5]),s=l[0],r[6]={},l[6]=this.element({parent:s||"root"},i),r[6].w=800,r[6].h=100,r[6].y=550,r[6].color="0x94a3b8ff",l[6].populate(r[6]),s=l[6],r[7]={},l[7]=this.element({parent:s||"root"},i),r[7].content="Text align center",r[7].size=50,r[7].y=15,r[7].color="0xbae6fdff",r[7].align="center",r[7].maxwidth=800,r[7].__textnode=!0,l[7].populate(r[7]),s=l[0],r[8]={},l[8]=this.element({parent:s||"root"},i),r[8].w=800,r[8].h=200,r[8].x=900,r[8].y=550,r[8].color="0x94a3b8ff",l[8].populate(r[8]),s=l[8],r[9]={},l[9]=this.element({parent:s||"root"},i),r[9].content=i.longText,r[9].size=40,r[9].color="0xbae6fdff",r[9].maxwidth=800,r[9].maxlines=5,r[9].textoverflow="!!!",r[9].__textnode=!0,l[9].populate(r[9]),s=l[0],r[10]={},l[10]=this.element({parent:s||"root"},i),r[10].w=800,r[10].h=120,r[10].x=900,r[10].y=800,r[10].color="0x94a3b8ff",l[10].populate(r[10]),s=l[10],r[11]={},l[11]=this.element({parent:s||"root"},i),r[11].content=i.longText,r[11].size=40,r[11].color="0xbae6fdff",r[11].maxwidth=800,r[11].maxlines=2,r[11].lineheight=60,r[11].textoverflow=!1,r[11].__textnode=!0,l[11].populate(r[11]),s=l[0],r[12]={},l[12]=this.element({parent:s||"root"},i),r[12].content=i.character,r[12].size=50,r[12].color=i.color,r[12].y=750,r[12].font="opensans",r[12].__textnode=!0,l[12].populate(r[12]),s=l[0],r[13]={},l[13]=this.element({parent:s||"root"},i),r[13].x=1200,r[13].y=300,l[13].populate(r[13]),s=l[13],r[14]={},l[14]=this.element({parent:s||"root"},i),r[14].rotation={transition:i.rotation},r[14].pivot=0,r[14].content="Hello",r[14].__textnode=!0,l[14].populate(r[14]),s=l[13],r[15]={},l[15]=this.element({parent:s||"root"},i),r[15].x=150,r[15].rotation={transition:i.rotation},r[15].pivot=.5,r[15].content="World",r[15].__textnode=!0,l[15].populate(r[15]),s=l[13],r[16]={},l[16]=this.element({parent:s||"root"},i),r[16].x=300,r[16].rotation={transition:i.rotation},r[16].pivot=1,r[16].content="!!",r[16].__textnode=!0,l[16].populate(r[16]),s=l[0],r[17]={},l[17]=this.element({parent:s||"root"},i),r[17].x=500,r[17].y=700,l[17].populate(r[17]),s=l[17],_[18]=[];let k,I;S[18]=(E=[],A,U)=>{const K=x(E),R=new Set;let le=K.length;const ge={};for(k=ge.from||0,I=("to"in ge)?ge.to:K.length;le--;)K[le],le<I&&le>=k&&R.add(""+le);let pe=U.length;for(;pe--;)if(R.has(U[pe])===!1){const D=U[pe];A[18][D]&&A[18][D].destroy(),A[18][D]=null,delete A[18][D]}U.length=0;const oe=K.length,me=[];for(let D=0;D<oe;D++){if(D<k||D>=I)continue;const te=Object.create(i);s=A[17],te.text=K[D],te.index=D,te.key=""+D,U.push(te.key),s=A[17],A[18]===void 0&&(A[18]={}),r[18]={},A[18][te.key]===void 0&&(A[18][te.key]=this.element({parent:s||"root"},i)),r[18].content=te.text,r[18].y=te.index*50,r[18].__textnode=!0,A[18][te.key].nodeId===void 0&&A[18][te.key].populate(r[18]);let ce=()=>{A[18][te.key].set("y",te.index*50)};v(ce,null),me.push(ce),i[Symbol.for("effects")].push(ce)}return me};let b=()=>{S[18](i.texts,l,_[18])};i[Symbol.for("effects")].push(b),v(b,["texts"]);let C=()=>{i.text;for(let E=0;E<i.texts.length;E++){if(E<k||E>=I)continue;const A={};A.index=E,A.text=i.texts[E],A.key=E,l[18][A.key].set("content",A.text)}};return i[Symbol.for("effects")].push(C),v(C),{elms:l,cleanup:()=>{i=null,s=null,_[18].length=0,S[18]=null,b=null,C=null,l.length=0,f.length=0,r.length=0,S.length=0}}},effects:[function(s,i,c,f,v,x){i[3].set("size",s.size)},function(s,i,c,f,v,x){i[4].set("color",s.color)},function(s,i,c,f,v,x){i[12].set("content",s.character)},function(s,i,c,f,v,x){i[12].set("color",s.color)},function(s,i,c,f,v,x){i[14].set("rotation",{transition:s.rotation})},function(s,i,c,f,v,x){i[15].set("rotation",{transition:s.rotation})},function(s,i,c,f,v,x){i[16].set("rotation",{transition:s.rotation})}],context:{}},state(){return{color:Km[0],size:10,character:Ym[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0,texts:["Hello","World","Lightning 3","Blits"]}},hooks:{ready(){let h=0;this.$setInterval(()=>{h++,h>Km.length-1&&(h=0),this.color=Km[h],this.size=10*(h*2+1),this.rotation+=30},1e3);let s=0;this.$setInterval(()=>{s++,s>Ym.length-1&&(s=0),this.character=Ym[s]},1400)}},methods:{textLoaded(h){this.$log.info(`Text loaded with w: ${h.w} and h: ${h.h}`)}}}),nh=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],eD=Oe.Component("Images",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].src="assets/lightningbolt.png",r[1].w=428,r[1].h=234,r[1].x=100,r[1].y=100,l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",r[2].w=428,r[2].h=234,r[2].x=100,r[2].y=400,l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].src=i.image,r[3].x=100,r[3].y=700,r[3]["@loaded"]=i.imageLoaded&&i.imageLoaded.bind(i),l[3].populate(r[3]),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].color="{top: '0xff0000ff', bottom: '0xffd700ff'}",r[4].src="assets/lightningbolt.png",r[4].w=428,r[4].h=234,r[4].x=600,r[4].y=100,l[4].populate(r[4]),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].x=600,r[5].y=400,r[5].w=428,r[5].h=234,r[5].clipping=i.clipping,l[5].populate(r[5]),s=l[5],r[6]={},l[6]=this.element({parent:s||"root"},i),r[6].src="assets/lightningbolt.png",r[6].w=856,r[6].h=468,l[6].populate(r[6]),s=l[0],r[7]={},l[7]=this.element({parent:s||"root"},i),r[7].color=i.color,r[7].src="assets/lightningbolt.png",r[7].w=428,r[7].h=234,r[7].x=1100,r[7].y=100,l[7].populate(r[7]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[3].set("src",s.image)},function(s,i,c,f,v,x){i[5].set("clipping",s.clipping)},function(s,i,c,f,v,x){i[7].set("color",s.color)}],context:{}},state(){return{image:nh[0],clipping:!0,color:"red"}},hooks:{ready(){this.$setInterval(()=>{this.image=this.image===nh[0]?nh[1]:nh[0],this.clipping=!this.clipping,this.color=this.color==="red"?"blue":"red"},2e3)}},methods:{imageLoaded(h){console.log("backstopjs:ready"),this.$log.info(`Image loaded with w: ${h.w} and h: ${h.h}`)}}}),Zu=Oe.Component("Square",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w={transition:i.size},r[0].h={transition:i.size},r[0].color={transition:i.color},l[0].populate(r[0]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("w",{transition:s.size})},function(s,i,c,f,v,x){i[0].set("h",{transition:s.size})},function(s,i,c,f,v,x){i[0].set("color",{transition:s.color})}],context:{}},props:[{key:"size",default:80}],state(){return{color:"#86198f"}},watch:{size(h,s){this.$log.info(`Size changed from ${s} to ${h}`),this.color=this.color==="#86198f"?"#9d174d":"#86198f"}}}),Pb=Oe.Component("Card",{components:{Square:Zu},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b=!1,C=0,E=[];if(r[0]={},l[0]=this.element({parent:s||"root"},b===!0?I:i),r[0].w=i.w,r[0].h=i.h,r[0].color="0x0891b2ff",l[0].populate(r[0]),b===!0&&(C-=1),E[1]=c.components&&c.components.Square||f.Square,s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},b===!0?I:i),r[1].x=80,r[1].y=80,_[1]=[],typeof E[1]<"u")for(let A in E[1][Symbol.for("config")].props)delete r[1][E[1][Symbol.for("config")].props[A]],_[1].push(E[1][Symbol.for("config")].props[A]);if(l[1].populate(r[1]),b===!0&&(C-=1),s=l[1],S[2]={},S[2].x=80,S[2].y=80,k=S[2].is||"Square",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);if(l[2]=f[2].call(null,{props:S[2]},l[1],i),l[2][Symbol.for("slots")][0]?(s=l[2][Symbol.for("slots")][0],I=l[2],b=!0):s=l[2][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),E[3]=c.components&&c.components.Square||f.Square,s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},b===!0?I:i),r[3].x=20,r[3].y=20,r[3].size=40,_[3]=[],typeof E[3]<"u")for(let A in E[3][Symbol.for("config")].props)delete r[3][E[3][Symbol.for("config")].props[A]],_[3].push(E[3][Symbol.for("config")].props[A]);if(l[3].populate(r[3]),b===!0&&(C-=1),s=l[3],S[4]={},S[4].x=20,S[4].y=20,S[4].size=40,k=S[4].is||"Square",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);return l[4]=f[4].call(null,{props:S[4]},l[3],i),l[4][Symbol.for("slots")][0]?(s=l[4][Symbol.for("slots")][0],I=l[4],b=!0):s=l[4][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),{elms:l,cleanup:()=>{I=null,i=null,s=null,E[1]=null,S[2]=null,f[2]=null,E[3]=null,S[4]=null,f[4]=null,E.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[],context:{}},props:["size"],computed:{w(){return this.size,this.size==="large"?400:200},h(){return this.size,this.size==="large"?500:300}}}),tD=Oe.Component("Components",{components:{Square:Zu,Card:Pb},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E,A=!1,U=0,K=[];if(r[0]={},l[0]=this.element({parent:s||"root"},A===!0?E:i),l[0].populate(r[0]),A===!0&&(U-=1),K[1]=c.components&&c.components.Square||f.Square,s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},A===!0?E:i),r[1].x=100,r[1].y=100,r[1].size=50,I[1]=[],typeof K[1]<"u")for(let pe in K[1][Symbol.for("config")].props)delete r[1][K[1][Symbol.for("config")].props[pe]],I[1].push(K[1][Symbol.for("config")].props[pe]);if(l[1].populate(r[1]),A===!0&&(U-=1),s=l[1],_[2]={},_[2].x=100,_[2].y=100,_[2].size=50,b=_[2].is||"Square",f[2],typeof b=="string"){if(f[2]=c.components&&c.components[b]||f[b],!f[2])throw new Error('Component "Square" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[2]=b);if(l[2]=f[2].call(null,{props:_[2]},l[1],i),l[2][Symbol.for("slots")][0]?(s=l[2][Symbol.for("slots")][0],E=l[2],A=!0):s=l[2][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[3]=c.components&&c.components.Square||f.Square,s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},A===!0?E:i),r[3].x=100,r[3].y=200,r[3].size=100,I[3]=[],typeof K[3]<"u")for(let pe in K[3][Symbol.for("config")].props)delete r[3][K[3][Symbol.for("config")].props[pe]],I[3].push(K[3][Symbol.for("config")].props[pe]);if(l[3].populate(r[3]),A===!0&&(U-=1),s=l[3],_[4]={},_[4].x=100,_[4].y=200,_[4].size=100,b=_[4].is||"Square",f[4],typeof b=="string"){if(f[4]=c.components&&c.components[b]||f[b],!f[4])throw new Error('Component "Square" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[4]=b);if(l[4]=f[4].call(null,{props:_[4]},l[3],i),l[4][Symbol.for("slots")][0]?(s=l[4][Symbol.for("slots")][0],E=l[4],A=!0):s=l[4][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[5]=c.components&&c.components.Square||f.Square,s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},A===!0?E:i),r[5].x=100,r[5].y=350,r[5].size=200,I[5]=[],typeof K[5]<"u")for(let pe in K[5][Symbol.for("config")].props)delete r[5][K[5][Symbol.for("config")].props[pe]],I[5].push(K[5][Symbol.for("config")].props[pe]);if(l[5].populate(r[5]),A===!0&&(U-=1),s=l[5],_[6]={},_[6].x=100,_[6].y=350,_[6].size=200,b=_[6].is||"Square",f[6],typeof b=="string"){if(f[6]=c.components&&c.components[b]||f[b],!f[6])throw new Error('Component "Square" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[6]=b);if(l[6]=f[6].call(null,{props:_[6]},l[5],i),l[6][Symbol.for("slots")][0]?(s=l[6][Symbol.for("slots")][0],E=l[6],A=!0):s=l[6][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[7]=c.components&&c.components.Square||f.Square,s=l[0],r[7]={},l[7]=this.element({parent:s||"root"},A===!0?E:i),r[7].x={transition:i.x},r[7].y=600,r[7].size=50,I[7]=[],typeof K[7]<"u")for(let pe in K[7][Symbol.for("config")].props)delete r[7][K[7][Symbol.for("config")].props[pe]],I[7].push(K[7][Symbol.for("config")].props[pe]);if(l[7].populate(r[7]),A===!0&&(U-=1),s=l[7],_[8]={},C={transition:i.x},Array.isArray(C)===!0&&(C=x(C).slice(0)),_[8].x=C,_[8].y=600,_[8].size=50,b=_[8].is||"Square",f[8],typeof b=="string"){if(f[8]=c.components&&c.components[b]||f[b],!f[8])throw new Error('Component "Square" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[8]=b);if(l[8]=f[8].call(null,{props:_[8]},l[7],i),l[8][Symbol.for("slots")][0]?(s=l[8][Symbol.for("slots")][0],E=l[8],A=!0):s=l[8][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[9]=c.components&&c.components.Card||f.Card,s=l[0],r[9]={},l[9]=this.element({parent:s||"root"},A===!0?E:i),r[9].x=500,r[9].y=100,I[9]=[],typeof K[9]<"u")for(let pe in K[9][Symbol.for("config")].props)delete r[9][K[9][Symbol.for("config")].props[pe]],I[9].push(K[9][Symbol.for("config")].props[pe]);if(l[9].populate(r[9]),A===!0&&(U-=1),s=l[9],_[10]={},_[10].x=500,_[10].y=100,b=_[10].is||"Card",f[10],typeof b=="string"){if(f[10]=c.components&&c.components[b]||f[b],!f[10])throw new Error('Component "Card" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[10]=b);if(l[10]=f[10].call(null,{props:_[10]},l[9],i),l[10][Symbol.for("slots")][0]?(s=l[10][Symbol.for("slots")][0],E=l[10],A=!0):s=l[10][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[11]=c.components&&c.components.Card||f.Card,s=l[0],r[11]={},l[11]=this.element({parent:s||"root"},A===!0?E:i),r[11].x=500,r[11].y=500,r[11].size="large",I[11]=[],typeof K[11]<"u")for(let pe in K[11][Symbol.for("config")].props)delete r[11][K[11][Symbol.for("config")].props[pe]],I[11].push(K[11][Symbol.for("config")].props[pe]);if(l[11].populate(r[11]),A===!0&&(U-=1),s=l[11],_[12]={},_[12].x=500,_[12].y=500,_[12].size="large",b=_[12].is||"Card",f[12],typeof b=="string"){if(f[12]=c.components&&c.components[b]||f[b],!f[12])throw new Error('Component "Card" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[12]=b);if(l[12]=f[12].call(null,{props:_[12]},l[11],i),l[12][Symbol.for("slots")][0]?(s=l[12][Symbol.for("slots")][0],E=l[12],A=!0):s=l[12][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),s=l[0],r[13]={},l[13]=this.element({parent:s||"root"},A===!0?E:i),r[13].x=1e3,r[13].y=100,l[13].populate(r[13]),A===!0&&(U-=1),s=l[13],r[14]={},l[14]=this.element({parent:s||"root"},A===!0?E:i),r[14].content="Dynamic components",r[14].__textnode=!0,l[14].populate(r[14]),A===!0&&(U-=1),K[15]=c.components&&c.components.Component||f.Component,s=l[13],r[15]={},l[15]=this.element({parent:s||"root"},A===!0?E:i),r[15].is=i.dynamicComponent,r[15].y=100,r[15].color="0x0000ffff",I[15]=[],typeof K[15]<"u")for(let pe in K[15][Symbol.for("config")].props)delete r[15][K[15][Symbol.for("config")].props[pe]],I[15].push(K[15][Symbol.for("config")].props[pe]);if(l[15].populate(r[15]),A===!0&&(U-=1),s=l[15],_[16]={},_[16].is=i.dynamicComponent,_[16].y=100,_[16].color="0x0000ffff",b=_[16].is||"Component",f[16],typeof b=="string"){if(f[16]=c.components&&c.components[b]||f[b],!f[16])throw new Error('Component "Component" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[16]=b);l[16]=f[16].call(null,{props:_[16]},l[15],i),l[16][Symbol.for("slots")][0]?(s=l[16][Symbol.for("slots")][0],E=l[16],A=!0):s=l[16][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),s=l[13],k[17]=[];let R,le;S[17]=(pe=[],oe,me)=>{const D=x(pe),te=new Set;let ce=D.length;const ve={};for(R=ve.from||0,le=("to"in ve)?ve.to:D.length;ce--;)D[ce],ce<le&&ce>=R&&te.add(""+ce);let X=me.length;for(;X--;)if(te.has(me[X])===!1){const G=me[X];oe[17][G]&&oe[17][G].destroy(),oe[17][G]=null,delete oe[17][G],oe[18][G]&&oe[18][G].destroy(),oe[18][G]=null,delete oe[18][G]}me.length=0;const ie=D.length,W=[];for(let G=0;G<ie;G++){if(G<R||G>=le)continue;const ue=Object.create(i);if(s=oe[13],ue.bla=D[G],ue.index=G,ue.key=""+G,me.push(ue.key),K[17]=c.components&&c.components.Component||f.Component,oe[17]===void 0&&(oe[17]={}),r[17]={},oe[17][ue.key]===void 0&&(oe[17][ue.key]=this.element({parent:s||"root"},A===!0?E:i)),r[17].is=ue.bla,r[17].x=205*ue.index,r[17].y=300,I[17]=[],typeof K[17]<"u")for(let Fe in K[17][Symbol.for("config")].props)delete r[17][K[17][Symbol.for("config")].props[Fe]],I[17].push(K[17][Symbol.for("config")].props[Fe]);if(oe[17][ue.key].nodeId===void 0&&(oe[17][ue.key].populate(r[17]),A===!0&&(U-=1)),oe[18]===void 0&&(oe[18]={}),s=oe[17][ue.key],_[18]={},oe[18][ue.key]===void 0){if(_[18].is=ue.bla,C=205*ue.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[18].x=C,_[18].y=300,b=_[18].is||"Component",f[18],typeof b=="string"){if(f[18]=c.components&&c.components[b]||f[b],!f[18])throw new Error('Component "Component" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[18]=b);oe[18][ue.key]=f[18].call(null,{props:_[18]},oe[17][ue.key],i),oe[18][ue.key][Symbol.for("slots")][0]?(s=oe[18][ue.key][Symbol.for("slots")][0],E=oe[18][ue.key],A=!0):s=oe[18][ue.key][Symbol.for("children")][0]}let Ce=()=>{(typeof I>"u"||typeof I[17]>"u"||I[17].indexOf("x")===-1)&&oe[17][ue.key].set("x",205*ue.index)};v(Ce,null),W.push(Ce),i[Symbol.for("effects")].push(Ce),oe[18][ue.key][Symbol.for("props")].x=205*ue.index}return W};let ge=()=>{S[17](i.dynamicComponents,l,k[17])};return i[Symbol.for("effects")].push(ge),v(ge,["dynamicComponents"]),{elms:l,cleanup:()=>{C=null,E=null,i=null,s=null,K[1]=null,_[2]=null,f[2]=null,K[3]=null,_[4]=null,f[4]=null,K[5]=null,_[6]=null,f[6]=null,K[7]=null,_[8]=null,f[8]=null,K[9]=null,_[10]=null,f[10]=null,K[11]=null,_[12]=null,f[12]=null,K[15]=null,_[16]=null,f[16]=null,k[17].length=0,S[17]=null,K[17]=null,_[18]=null,f[18]=null,ge=null,K.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[7]>"u"||skips[7].indexOf("x")===-1)&&i[7].set("x",{transition:s.x})},function(s,i,c,f,v,x){i[8][Symbol.for("props")].x={transition:s.x}}],context:{}},state(){return{x:100,dynamicComponent:Eh,dynamicComponents:["Square","Card","Square",Eh],toggle:!1,size:50}},hooks:{ready(){this.$setInterval(()=>{this.x=this.x===100?250:100,this.size=this.size===50?200:50},2e3)}}}),Mi=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],nD=Oe.Component("ForLoop",{components:{Square:Zu},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E,A=!1,U=[];r[0]={},l[0]=this.element({parent:s||"root"},A===!0?E:i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},A===!0?E:i),r[1].y=20,l[1].populate(r[1]),s=l[1],k[2]=[];let K,R;S[2]=(Be=[],Z,Ue)=>{const Je=x(Be),Rt=new Set;let it=Je.length;const Le={};for(K=Le.from||0,R=("to"in Le)?Le.to:Je.length;it--;)Je[it],it<R&&it>=K&&Rt.add(""+it);let xt=Ue.length;for(;xt--;)if(Rt.has(Ue[xt])===!1){const Se=Ue[xt];Z[2][Se]&&Z[2][Se].destroy(),Z[2][Se]=null,delete Z[2][Se]}Ue.length=0;const dn=Je.length,zt=[];for(let Se=0;Se<dn;Se++){if(Se<K||Se>=R)continue;const re=Object.create(i);s=Z[1],re.item=Je[Se],re.undefined=Se,re.key=""+Se,Ue.push(re.key),s=Z[1],Z[2]===void 0&&(Z[2]={}),r[2]={},Z[2][re.key]===void 0&&(Z[2][re.key]=this.element({parent:s||"root"},A===!0?E:i)),r[2].w=80,r[2].h=80,r[2].x=re.item,r[2].color="0x4d7c0fff",Z[2][re.key].nodeId===void 0&&Z[2][re.key].populate(r[2])}return zt};let le=()=>{S[2](i.collection1,l,k[2])};i[Symbol.for("effects")].push(le),v(le,["collection1"]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},A===!0?E:i),r[3].y=120,l[3].populate(r[3]),s=l[3],k[4]=[];let ge,pe;S[4]=(Be=[],Z,Ue)=>{const Je=x(Be),Rt=new Set;let it=Je.length;const Le={};for(ge=Le.from||0,pe=("to"in Le)?Le.to:Je.length;it--;){const Se=Je[it];it<pe&&it>=ge&&Rt.add(""+Se.id)}let xt=Ue.length;for(;xt--;)if(Rt.has(Ue[xt])===!1){const Se=Ue[xt];Z[4][Se]&&Z[4][Se].destroy(),Z[4][Se]=null,delete Z[4][Se]}Ue.length=0;const dn=Je.length,zt=[];for(let Se=0;Se<dn;Se++){if(Se<ge||Se>=pe)continue;const re=Object.create(i);s=Z[3],re.item=Je[Se],re.index=Se,re.key=""+re.item.id,Ue.push(re.key),s=Z[3],Z[4]===void 0&&(Z[4]={}),r[4]={},Z[4][re.key]===void 0&&(Z[4][re.key]=this.element({parent:s||"root"},A===!0?E:i)),r[4].w=80,r[4].h=80,r[4].x=re.item.x*re.index,r[4].color=re.item.color,Z[4][re.key].nodeId===void 0&&Z[4][re.key].populate(r[4]);let Me=()=>{Z[4][re.key].set("x",re.item.x*re.index)};v(Me,null),zt.push(Me),i[Symbol.for("effects")].push(Me)}return zt};let oe=()=>{S[4](i.collection2,l,k[4])};i[Symbol.for("effects")].push(oe),v(oe,["collection2"]),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},A===!0?E:i),r[5].y=220,l[5].populate(r[5]),s=l[5],k[6]=[];let me,D;S[6]=(Be=[],Z,Ue)=>{const Je=x(Be),Rt=new Set;let it=Je.length;const Le={};for(me=Le.from||0,D=("to"in Le)?Le.to:Je.length;it--;)Je[it],it<D&&it>=me&&Rt.add(""+it);let xt=Ue.length;for(;xt--;)if(Rt.has(Ue[xt])===!1){const Se=Ue[xt];Z[6][Se]&&Z[6][Se].destroy(),Z[6][Se]=null,delete Z[6][Se]}Ue.length=0;const dn=Je.length,zt=[];for(let Se=0;Se<dn;Se++){if(Se<me||Se>=D)continue;const re=Object.create(i);s=Z[5],re.item=Je[Se],re.undefined=Se,re.key=""+Se,Ue.push(re.key),s=Z[5],Z[6]===void 0&&(Z[6]={}),r[6]={},Z[6][re.key]===void 0&&(Z[6][re.key]=this.element({parent:s||"root"},A===!0?E:i)),r[6].w=80,r[6].h=80,r[6].x=re.item.x,r[6].color=re.item.color,Z[6][re.key].nodeId===void 0&&Z[6][re.key].populate(r[6]);let Me=()=>{Z[6][re.key].set("x",re.item.x)};v(Me,null),zt.push(Me),i[Symbol.for("effects")].push(Me)}return zt};let te=()=>{S[6](i.collection3,l,k[6])};i[Symbol.for("effects")].push(te),v(te,["collection3"]),s=l[0],r[7]={},l[7]=this.element({parent:s||"root"},A===!0?E:i),r[7].y=320,l[7].populate(r[7]),s=l[7],k[8]=[];let ce,ve;S[8]=(Be=[],Z,Ue)=>{const Je=x(Be),Rt=new Set;let it=Je.length;const Le={};for(ce=Le.from||0,ve=("to"in Le)?Le.to:Je.length;it--;)Je[it],it<ve&&it>=ce&&Rt.add(""+it);let xt=Ue.length;for(;xt--;)if(Rt.has(Ue[xt])===!1){const Se=Ue[xt];Z[8][Se]&&Z[8][Se].destroy(),Z[8][Se]=null,delete Z[8][Se],Z[9][Se]&&Z[9][Se].destroy(),Z[9][Se]=null,delete Z[9][Se]}Ue.length=0;const dn=Je.length,zt=[];for(let Se=0;Se<dn;Se++){if(Se<ce||Se>=ve)continue;const re=Object.create(i);if(s=Z[7],re.item=Je[Se],re.index=Se,re.key=""+Se,Ue.push(re.key),U[8]=c.components&&c.components.Square||f.Square,Z[8]===void 0&&(Z[8]={}),r[8]={},Z[8][re.key]===void 0&&(Z[8][re.key]=this.element({parent:s||"root"},A===!0?E:i)),r[8].x=re.item.x*re.index,r[8].ref="square"+re.index,r[8].alpha=re.alpha,I[8]=[],typeof U[8]<"u")for(let xs in U[8][Symbol.for("config")].props)delete r[8][U[8][Symbol.for("config")].props[xs]],I[8].push(U[8][Symbol.for("config")].props[xs]);if(Z[8][re.key].nodeId===void 0&&Z[8][re.key].populate(r[8]),Z[9]===void 0&&(Z[9]={}),s=Z[8][re.key],_[9]={},Z[9][re.key]===void 0){if(C=re.item.x*re.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[9].x=C,C="square"+re.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[9].ref=C,C=re.alpha,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[9].alpha=C,b=_[9].is||"Square",f[9],typeof b=="string"){if(f[9]=c.components&&c.components[b]||f[b],!f[9])throw new Error('Component "Square" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[9]=b);Z[9][re.key]=f[9].call(null,{props:_[9]},Z[8][re.key],i),Z[9][re.key][Symbol.for("slots")][0]?(s=Z[9][re.key][Symbol.for("slots")][0],E=Z[9][re.key],A=!0):s=Z[9][re.key][Symbol.for("children")][0]}let Me=()=>{(typeof I>"u"||typeof I[8]>"u"||I[8].indexOf("x")===-1)&&Z[8][re.key].set("x",re.item.x*re.index)};v(Me,null),zt.push(Me),i[Symbol.for("effects")].push(Me);let fn=()=>{(typeof I>"u"||typeof I[8]>"u"||I[8].indexOf("ref")===-1)&&Z[8][re.key].set("ref","square"+re.index)};v(fn,null),zt.push(fn),i[Symbol.for("effects")].push(fn),Z[9][re.key][Symbol.for("props")].x=re.item.x*re.index,Z[9][re.key][Symbol.for("props")].ref="square"+re.index}return zt};let X=()=>{S[8](i.collection2,l,k[8])};i[Symbol.for("effects")].push(X),v(X,["collection2"]);let ie=()=>{i.alpha;for(let Be=0;Be<i.collection2.length;Be++){if(Be<ce||Be>=ve)continue;const Z={};Z.index=Be,Z.item=i.collection2[Be],Z.key=Be,(typeof I>"u"||typeof I[8]>"u"||I[8].indexOf("alpha")===-1)&&l[8][Z.key].set("alpha",i.alpha)}};i[Symbol.for("effects")].push(ie),v(ie);let W=()=>{i.alpha;for(let Be=0;Be<i.collection2.length;Be++){if(Be<ce||Be>=ve)continue;const Z={};Z.index=Be,Z.item=i.collection2[Be],Z.key=Be,l[9][Z.key][Symbol.for("props")].alpha=i.alpha}};i[Symbol.for("effects")].push(W),v(W),s=l[0],r[10]={},l[10]=this.element({parent:s||"root"},A===!0?E:i),r[10].y=420,l[10].populate(r[10]),s=l[10],k[11]=[];let G,ue;S[11]=(Be=[],Z,Ue)=>{const Je=x(Be),Rt=new Set;let it=Je.length;const Le={};for(G=Le.from||0,ue=("to"in Le)?Le.to:Je.length;it--;){const Se=Je[it];it<ue&&it>=G&&Rt.add(""+Se.color)}let xt=Ue.length;for(;xt--;)if(Rt.has(Ue[xt])===!1){const Se=Ue[xt];Z[11][Se]&&Z[11][Se].destroy(),Z[11][Se]=null,delete Z[11][Se],Z[12][Se]&&Z[12][Se].destroy(),Z[12][Se]=null,delete Z[12][Se]}Ue.length=0;const dn=Je.length,zt=[];for(let Se=0;Se<dn;Se++){if(Se<G||Se>=ue)continue;const re=Object.create(i);if(s=Z[10],re.item=Je[Se],re.undefined=Se,re.key=""+re.item.color,Ue.push(re.key),U[11]=c.components&&c.components.Square||f.Square,Z[11]===void 0&&(Z[11]={}),r[11]={},Z[11][re.key]===void 0&&(Z[11][re.key]=this.element({parent:s||"root"},A===!0?E:i)),r[11].x=re.item.x,r[11].alpha=re.alpha,I[11]=[],typeof U[11]<"u")for(let fn in U[11][Symbol.for("config")].props)delete r[11][U[11][Symbol.for("config")].props[fn]],I[11].push(U[11][Symbol.for("config")].props[fn]);if(Z[11][re.key].nodeId===void 0&&Z[11][re.key].populate(r[11]),Z[12]===void 0&&(Z[12]={}),s=Z[11][re.key],_[12]={},Z[12][re.key]===void 0){if(C=re.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[12].x=C,C=re.alpha,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[12].alpha=C,b=_[12].is||"Square",f[12],typeof b=="string"){if(f[12]=c.components&&c.components[b]||f[b],!f[12])throw new Error('Component "Square" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[12]=b);Z[12][re.key]=f[12].call(null,{props:_[12]},Z[11][re.key],i),Z[12][re.key][Symbol.for("slots")][0]?(s=Z[12][re.key][Symbol.for("slots")][0],E=Z[12][re.key],A=!0):s=Z[12][re.key][Symbol.for("children")][0]}let Me=()=>{(typeof I>"u"||typeof I[11]>"u"||I[11].indexOf("x")===-1)&&Z[11][re.key].set("x",re.item.x)};v(Me,null),zt.push(Me),i[Symbol.for("effects")].push(Me),Z[12][re.key][Symbol.for("props")].x=re.item.x}return zt};let Ce=()=>{S[11](i.collection3,l,k[11])};i[Symbol.for("effects")].push(Ce),v(Ce,["collection3"]);let Fe=()=>{i.alpha;for(let Be=0;Be<i.collection3.length;Be++){if(Be<G||Be>=ue)continue;const Z={};Z.undefined=Be,Z.item=i.collection3[Be],Z.key=Z.item.color,(typeof I>"u"||typeof I[11]>"u"||I[11].indexOf("alpha")===-1)&&l[11][Z.key].set("alpha",i.alpha)}};i[Symbol.for("effects")].push(Fe),v(Fe);let Ze=()=>{i.alpha;for(let Be=0;Be<i.collection3.length;Be++){if(Be<G||Be>=ue)continue;const Z={};Z.undefined=Be,Z.item=i.collection3[Be],Z.key=Z.item.color,l[12][Z.key][Symbol.for("props")].alpha=i.alpha}};i[Symbol.for("effects")].push(Ze),v(Ze),s=l[0],r[13]={},l[13]=this.element({parent:s||"root"},A===!0?E:i),r[13].y=520,l[13].populate(r[13]),s=l[13],k[14]=[];let je,Ae;S[14]=(Be=[],Z,Ue)=>{const Je=x(Be),Rt=new Set;let it=Je.length;const Le={};for(je=Le.from||0,Ae=("to"in Le)?Le.to:Je.length;it--;)Je[it],it<Ae&&it>=je&&Rt.add(""+it);let xt=Ue.length;for(;xt--;)if(Rt.has(Ue[xt])===!1){const Se=Ue[xt];Z[14][Se]&&Z[14][Se].destroy(),Z[14][Se]=null,delete Z[14][Se]}Ue.length=0;const dn=Je.length,zt=[];for(let Se=0;Se<dn;Se++){if(Se<je||Se>=Ae)continue;const re=Object.create(i);s=Z[13],re.item=Je[Se],re.undefined=Se,re.key=""+Se,Ue.push(re.key),s=Z[13],Z[14]===void 0&&(Z[14]={}),r[14]={},Z[14][re.key]===void 0&&(Z[14][re.key]=this.element({parent:s||"root"},A===!0?E:i)),r[14].w=80,r[14].h=80,r[14].x=re.item,r[14].color="0xeab308ff",r[14].alpha=re.alpha,Z[14][re.key].nodeId===void 0&&Z[14][re.key].populate(r[14])}return zt};let $=()=>{S[14](i.collection1,l,k[14])};i[Symbol.for("effects")].push($),v($,["collection1"]);let ft=()=>{i.item;for(let Be=0;Be<i.collection1.length;Be++){if(Be<je||Be>=Ae)continue;const Z={};Z.undefined=Be,Z.item=i.collection1[Be],Z.key=Be,l[14][Z.key].set("x",Z.item)}};i[Symbol.for("effects")].push(ft),v(ft);let De=()=>{i.alpha;for(let Be=0;Be<i.collection1.length;Be++){if(Be<je||Be>=Ae)continue;const Z={};Z.undefined=Be,Z.item=i.collection1[Be],Z.key=Be,l[14][Z.key].set("alpha",i.alpha)}};i[Symbol.for("effects")].push(De),v(De),s=l[0],r[15]={},l[15]=this.element({parent:s||"root"},A===!0?E:i),r[15].y=620,l[15].populate(r[15]),s=l[15],k[16]=[];let qe,an;S[16]=(Be=[],Z,Ue)=>{const Je=x(Be),Rt=new Set;let it=Je.length;const Le={};for(qe=Le.from||0,an=("to"in Le)?Le.to:Je.length;it--;){const Se=Je[it];it<an&&it>=qe&&Rt.add(""+Se.id)}let xt=Ue.length;for(;xt--;)if(Rt.has(Ue[xt])===!1){const Se=Ue[xt];Z[16][Se]&&Z[16][Se].destroy(),Z[16][Se]=null,delete Z[16][Se]}Ue.length=0;const dn=Je.length,zt=[];for(let Se=0;Se<dn;Se++){if(Se<qe||Se>=an)continue;const re=Object.create(i);s=Z[15],re.item=Je[Se],re.undefined=Se,re.key=""+re.item.id,Ue.push(re.key),s=Z[15],Z[16]===void 0&&(Z[16]={}),r[16]={},Z[16][re.key]===void 0&&(Z[16][re.key]=this.element({parent:s||"root"},A===!0?E:i)),r[16].w=80,r[16].h=80,r[16].x=re.item.x,r[16].color=re.item.color,r[16].alpha=re.alpha,Z[16][re.key].nodeId===void 0&&Z[16][re.key].populate(r[16]);let Me=()=>{Z[16][re.key].set("x",re.item.x)};v(Me,null),zt.push(Me),i[Symbol.for("effects")].push(Me)}return zt};let wi=()=>{S[16](i.collection2,l,k[16])};i[Symbol.for("effects")].push(wi),v(wi,["collection2"]);let tr=()=>{i.alpha;for(let Be=0;Be<i.collection2.length;Be++){if(Be<qe||Be>=an)continue;const Z={};Z.undefined=Be,Z.item=i.collection2[Be],Z.key=Z.item.id,l[16][Z.key].set("alpha",i.alpha)}};i[Symbol.for("effects")].push(tr),v(tr),s=l[0],r[17]={},l[17]=this.element({parent:s||"root"},A===!0?E:i),r[17].y=720,l[17].populate(r[17]),s=l[17],k[18]=[];let ui,be;S[18]=(Be=[],Z,Ue)=>{const Je=x(Be),Rt=new Set;let it=Je.length;const Le={};for(ui=Le.from||0,be=("to"in Le)?Le.to:Je.length;it--;){const Se=Je[it];it<be&&it>=ui&&Rt.add(""+Se.id)}let xt=Ue.length;for(;xt--;)if(Rt.has(Ue[xt])===!1){const Se=Ue[xt];Z[18][Se]&&Z[18][Se].destroy(),Z[18][Se]=null,delete Z[18][Se]}Ue.length=0;const dn=Je.length,zt=[];for(let Se=0;Se<dn;Se++){if(Se<ui||Se>=be)continue;const re=Object.create(i);s=Z[17],re.item=Je[Se],re.undefined=Se,re.key=""+re.item.id,Ue.push(re.key),s=Z[17],Z[18]===void 0&&(Z[18]={}),r[18]={},Z[18][re.key]===void 0&&(Z[18][re.key]=this.element({parent:s||"root"},A===!0?E:i)),r[18].w=80,r[18].h=80,r[18].x=re.item.x,r[18].color="0x06b6d4ff",Z[18][re.key].nodeId===void 0&&Z[18][re.key].populate(r[18]);let Me=()=>{Z[18][re.key].set("x",re.item.x)};v(Me,null),zt.push(Me),i[Symbol.for("effects")].push(Me)}return zt};let Gi=()=>{S[18](i.collection4,l,k[18])};i[Symbol.for("effects")].push(Gi),v(Gi,["collection4"]),s=l[0],r[19]={},l[19]=this.element({parent:s||"root"},A===!0?E:i),r[19].y=720,r[19].x=700,l[19].populate(r[19]),s=l[19],k[20]=[];let Si,li;S[20]=(Be=[],Z,Ue)=>{const Je=x(Be),Rt=new Set;let it=Je.length;const Le={};for(Si=Le.from||0,li=("to"in Le)?Le.to:Je.length;it--;)Je[it],it<li&&it>=Si&&Rt.add(""+it);let xt=Ue.length;for(;xt--;)if(Rt.has(Ue[xt])===!1){const Se=Ue[xt];Z[20][Se]&&Z[20][Se].destroy(),Z[20][Se]=null,delete Z[20][Se]}Ue.length=0;const dn=Je.length,zt=[];for(let Se=0;Se<dn;Se++){if(Se<Si||Se>=li)continue;const re=Object.create(i);s=Z[19],re.item=Je[Se],re.undefined=Se,re.key=""+Se,Ue.push(re.key),s=Z[19],Z[20]===void 0&&(Z[20]={}),r[20]={},Z[20][re.key]===void 0&&(Z[20][re.key]=this.element({parent:s||"root"},A===!0?E:i)),r[20].w=80,r[20].h=80,r[20].x=re.item.x,r[20].color="0x8b5cf6ff",Z[20][re.key].nodeId===void 0&&Z[20][re.key].populate(r[20]);let Me=()=>{Z[20][re.key].set("x",re.item.x)};v(Me,null),zt.push(Me),i[Symbol.for("effects")].push(Me)}return zt};let ar=()=>{S[20](i.collection4,l,k[20])};i[Symbol.for("effects")].push(ar),v(ar,["collection4"]),s=l[0],r[21]={},l[21]=this.element({parent:s||"root"},A===!0?E:i),r[21].y=920,l[21].populate(r[21]),s=l[21],k[22]=[];let Rn,st;S[22]=(Be=[],Z,Ue)=>{const Je=x(Be),Rt=new Set;let it=Je.length;const Le={};for(Rn=Le.from||0,st=("to"in Le)?Le.to:Je.length;it--;){const Se=Je[it];it<st&&it>=Rn&&Rt.add(""+Se.id)}let xt=Ue.length;for(;xt--;)if(Rt.has(Ue[xt])===!1){const Se=Ue[xt];Z[22][Se]&&Z[22][Se].destroy(),Z[22][Se]=null,delete Z[22][Se],Z[23][Se]&&Z[23][Se].destroy(),Z[23][Se]=null,delete Z[23][Se]}Ue.length=0;const dn=Je.length,zt=[];for(let Se=0;Se<dn;Se++){if(Se<Rn||Se>=st)continue;const re=Object.create(i);if(s=Z[21],re.item=Je[Se],re.undefined=Se,re.key=""+re.item.id,Ue.push(re.key),U[22]=c.components&&c.components.Square||f.Square,Z[22]===void 0&&(Z[22]={}),r[22]={},Z[22][re.key]===void 0&&(Z[22][re.key]=this.element({parent:s||"root"},A===!0?E:i)),r[22].w=80,r[22].h=80,r[22].x=re.item.x,I[22]=[],typeof U[22]<"u")for(let fn in U[22][Symbol.for("config")].props)delete r[22][U[22][Symbol.for("config")].props[fn]],I[22].push(U[22][Symbol.for("config")].props[fn]);if(Z[22][re.key].nodeId===void 0&&Z[22][re.key].populate(r[22]),Z[23]===void 0&&(Z[23]={}),s=Z[22][re.key],_[23]={},Z[23][re.key]===void 0){if(_[23].w=80,_[23].h=80,C=re.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[23].x=C,b=_[23].is||"Square",f[23],typeof b=="string"){if(f[23]=c.components&&c.components[b]||f[b],!f[23])throw new Error('Component "Square" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[23]=b);Z[23][re.key]=f[23].call(null,{props:_[23]},Z[22][re.key],i),Z[23][re.key][Symbol.for("slots")][0]?(s=Z[23][re.key][Symbol.for("slots")][0],E=Z[23][re.key],A=!0):s=Z[23][re.key][Symbol.for("children")][0]}let Me=()=>{(typeof I>"u"||typeof I[22]>"u"||I[22].indexOf("x")===-1)&&Z[22][re.key].set("x",re.item.x)};v(Me,null),zt.push(Me),i[Symbol.for("effects")].push(Me),Z[23][re.key][Symbol.for("props")].x=re.item.x}return zt};let ai=()=>{S[22](i.collection4,l,k[22])};i[Symbol.for("effects")].push(ai),v(ai,["collection4"]),s=l[0],r[24]={},l[24]=this.element({parent:s||"root"},A===!0?E:i),r[24].y=920,r[24].x=700,l[24].populate(r[24]),s=l[24],k[25]=[];let Yr,ef;S[25]=(Be=[],Z,Ue)=>{const Je=x(Be),Rt=new Set;let it=Je.length;const Le={};for(Yr=Le.from||0,ef=("to"in Le)?Le.to:Je.length;it--;)Je[it],it<ef&&it>=Yr&&Rt.add(""+it);let xt=Ue.length;for(;xt--;)if(Rt.has(Ue[xt])===!1){const Se=Ue[xt];Z[25][Se]&&Z[25][Se].destroy(),Z[25][Se]=null,delete Z[25][Se],Z[26][Se]&&Z[26][Se].destroy(),Z[26][Se]=null,delete Z[26][Se]}Ue.length=0;const dn=Je.length,zt=[];for(let Se=0;Se<dn;Se++){if(Se<Yr||Se>=ef)continue;const re=Object.create(i);if(s=Z[24],re.item=Je[Se],re.undefined=Se,re.key=""+Se,Ue.push(re.key),U[25]=c.components&&c.components.Square||f.Square,Z[25]===void 0&&(Z[25]={}),r[25]={},Z[25][re.key]===void 0&&(Z[25][re.key]=this.element({parent:s||"root"},A===!0?E:i)),r[25].w=80,r[25].h=80,r[25].x=re.item.x,I[25]=[],typeof U[25]<"u")for(let fn in U[25][Symbol.for("config")].props)delete r[25][U[25][Symbol.for("config")].props[fn]],I[25].push(U[25][Symbol.for("config")].props[fn]);if(Z[25][re.key].nodeId===void 0&&Z[25][re.key].populate(r[25]),Z[26]===void 0&&(Z[26]={}),s=Z[25][re.key],_[26]={},Z[26][re.key]===void 0){if(_[26].w=80,_[26].h=80,C=re.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[26].x=C,b=_[26].is||"Square",f[26],typeof b=="string"){if(f[26]=c.components&&c.components[b]||f[b],!f[26])throw new Error('Component "Square" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[26]=b);Z[26][re.key]=f[26].call(null,{props:_[26]},Z[25][re.key],i),Z[26][re.key][Symbol.for("slots")][0]?(s=Z[26][re.key][Symbol.for("slots")][0],E=Z[26][re.key],A=!0):s=Z[26][re.key][Symbol.for("children")][0]}let Me=()=>{(typeof I>"u"||typeof I[25]>"u"||I[25].indexOf("x")===-1)&&Z[25][re.key].set("x",re.item.x)};v(Me,null),zt.push(Me),i[Symbol.for("effects")].push(Me),Z[26][re.key][Symbol.for("props")].x=re.item.x}return zt};let tf=()=>{S[25](i.collection4,l,k[25])};return i[Symbol.for("effects")].push(tf),v(tf,["collection4"]),{elms:l,cleanup:()=>{C=null,E=null,i=null,s=null,k[2].length=0,S[2]=null,le=null,k[4].length=0,S[4]=null,oe=null,k[6].length=0,S[6]=null,te=null,k[8].length=0,S[8]=null,U[8]=null,_[9]=null,f[9]=null,X=null,ie=null,W=null,k[11].length=0,S[11]=null,U[11]=null,_[12]=null,f[12]=null,Ce=null,Fe=null,Ze=null,k[14].length=0,S[14]=null,$=null,ft=null,De=null,k[16].length=0,S[16]=null,wi=null,tr=null,k[18].length=0,S[18]=null,Gi=null,k[20].length=0,S[20]=null,ar=null,k[22].length=0,S[22]=null,U[22]=null,_[23]=null,f[23]=null,ai=null,k[25].length=0,S[25]=null,U[25]=null,_[26]=null,f[26]=null,tf=null,U.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[],context:{}},state(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:Mi[0]},{id:"block2",x:100,color:Mi[1]},{id:"block3",x:200,color:Mi[2]},{id:"block4",x:300,color:Mi[3]},{id:"block5",x:400,color:Mi[4]},{id:"block6",x:500,color:Mi[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=Mi[5],this.collection2[1].color=Mi[4],this.collection2[2].color=Mi[3],this.collection2[3].color=Mi[2],this.collection2[4].color=Mi[1],this.collection2[5].color=Mi[0]},4e3);let h=0;const s=this.$setInterval(()=>{this.collection3.push({x:h*100,color:Mi[h]}),h++,h===Mi.length&&clearInterval(s)},1e3);this.$setInterval(()=>{this.alpha=this.alpha===.5?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),E3=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],I3=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],M3=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],qm=h=>Math.round(Math.random()*1e3)%h;let iD=0;const Fa=()=>({id:iD++,text:`${E3[qm(E3.length)]} ${I3[qm(I3.length)]} ${M3[qm(M3.length)]}`}),rD=(h=1)=>{const s=[];for(let i=0;i<h;i++)s.push(Fa());return s},oD=Oe.Component("LegendItem",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b=!1,C=0,E=[];if(r[0]={},l[0]=this.element({parent:s||"root"},b===!0?I:i),l[0].populate(r[0]),b===!0&&(C-=1),E[1]=c.components&&c.components.Circle||f.Circle,s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},b===!0?I:i),r[1].color="0xfb923cff",r[1].size=60,_[1]=[],typeof E[1]<"u")for(let A in E[1][Symbol.for("config")].props)delete r[1][E[1][Symbol.for("config")].props[A]],_[1].push(E[1][Symbol.for("config")].props[A]);if(l[1].populate(r[1]),b===!0&&(C-=1),s=l[1],S[2]={},S[2].color="0xfb923cff",S[2].size=60,k=S[2].is||"Circle",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "Circle" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);return l[2]=f[2].call(null,{props:S[2]},l[1],i),l[2][Symbol.for("slots")][0]?(s=l[2][Symbol.for("slots")][0],I=l[2],b=!0):s=l[2][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},b===!0?I:i),r[3].color="0xe5e5e5ff",r[3].size=32,r[3].y=10,r[3].maxwidth=57,r[3].align="center",r[3].content=""+i.id,r[3].__textnode=!0,l[3].populate(r[3]),b===!0&&(C-=1),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},b===!0?I:i),r[4].color="0xe5e5e5ff",r[4].x=80,r[4].y=14,r[4].size=28,r[4].content=""+i.text,r[4].__textnode=!0,l[4].populate(r[4]),b===!0&&(C-=1),{elms:l,cleanup:()=>{I=null,i=null,s=null,E[1]=null,S[2]=null,f[2]=null,E.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[],context:{}},props:["id","text"]}),Db=Oe.Component("Row",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=380,r[0].h=60,r[0].y=i.index*80,r[0].color="0xfff7edff",l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].w=10,r[1].h=60,r[1].color="0x06b6d4ff",l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].content=i.text,r[2].x=30,r[2].y=15,r[2].font="lato",r[2].size=28,r[2].color=i.activeRow==i.index?"0x06b6d4ff":"0x1e293bff",r[2].__textnode=!0,l[2].populate(r[2]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("y",s.index*80)},function(s,i,c,f,v,x){i[2].set("content",s.text)},function(s,i,c,f,v,x){i[2].set("color",s.activeRow==s.index?"0x06b6d4ff":"0x1e293bff")}],context:{}},props:["index","text","activeRow"]}),sD=Oe.Component("Rows",{components:{Row:Db},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E,A=!1,U=[];r[0]={},l[0]=this.element({parent:s||"root"},A===!0?E:i),l[0].populate(r[0]),s=l[0],k[1]=[];let K,R;S[1]=(oe=[],me,D)=>{const te=x(oe),ce=new Set;let ve=te.length;const X={};for(K=X.from||0,R=("to"in X)?X.to:te.length;ve--;){const ue=te[ve];ve<R&&ve>=K&&ce.add(""+ue.id+"key2")}let ie=D.length;for(;ie--;)if(ce.has(D[ie])===!1){const ue=D[ie];me[1][ue]&&me[1][ue].destroy(),me[1][ue]=null,delete me[1][ue],me[2][ue]&&me[2][ue].destroy(),me[2][ue]=null,delete me[2][ue]}D.length=0;const W=te.length,G=[];for(let ue=0;ue<W;ue++){if(ue<K||ue>=R)continue;const Ce=Object.create(i);if(s=me[0],Ce.item=te[ue],Ce.index=ue,Ce.key=""+Ce.item.id+"key2",D.push(Ce.key),U[1]=c.components&&c.components.Row||f.Row,me[1]===void 0&&(me[1]={}),r[1]={},me[1][Ce.key]===void 0&&(me[1][Ce.key]=this.element({parent:s||"root"},A===!0?E:i)),r[1].activeRow=Ce.activeRowIndex,r[1].index=Ce.index,r[1].text=Ce.item.text,r[1].y=50,I[1]=[],typeof U[1]<"u")for(let je in U[1][Symbol.for("config")].props)delete r[1][U[1][Symbol.for("config")].props[je]],I[1].push(U[1][Symbol.for("config")].props[je]);if(me[1][Ce.key].nodeId===void 0&&me[1][Ce.key].populate(r[1]),me[2]===void 0&&(me[2]={}),s=me[1][Ce.key],_[2]={},me[2][Ce.key]===void 0){if(C=Ce.activeRowIndex,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[2].activeRow=C,C=Ce.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[2].index=C,C=Ce.item.text,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[2].text=C,_[2].y=50,b=_[2].is||"Row",f[2],typeof b=="string"){if(f[2]=c.components&&c.components[b]||f[b],!f[2])throw new Error('Component "Row" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[2]=b);me[2][Ce.key]=f[2].call(null,{props:_[2]},me[1][Ce.key],i),me[2][Ce.key][Symbol.for("slots")][0]?(s=me[2][Ce.key][Symbol.for("slots")][0],E=me[2][Ce.key],A=!0):s=me[2][Ce.key][Symbol.for("children")][0]}let Fe=()=>{(typeof I>"u"||typeof I[1]>"u"||I[1].indexOf("index")===-1)&&me[1][Ce.key].set("index",Ce.index)};v(Fe,null),G.push(Fe),i[Symbol.for("effects")].push(Fe);let Ze=()=>{(typeof I>"u"||typeof I[1]>"u"||I[1].indexOf("text")===-1)&&me[1][Ce.key].set("text",Ce.item.text)};v(Ze,null),G.push(Ze),i[Symbol.for("effects")].push(Ze),me[2][Ce.key][Symbol.for("props")].index=Ce.index,me[2][Ce.key][Symbol.for("props")].text=Ce.item.text}return G};let le=()=>{S[1](i.data,l,k[1])};i[Symbol.for("effects")].push(le),v(le,["data"]);let ge=()=>{i.activeRowIndex;for(let oe=0;oe<i.data.length;oe++){if(oe<K||oe>=R)continue;const me={};me.index=oe,me.item=i.data[oe],me.key=me.item.id+"key2",(typeof I>"u"||typeof I[1]>"u"||I[1].indexOf("activeRow")===-1)&&l[1][me.key].set("activeRow",i.activeRowIndex)}};i[Symbol.for("effects")].push(ge),v(ge);let pe=()=>{i.activeRowIndex;for(let oe=0;oe<i.data.length;oe++){if(oe<K||oe>=R)continue;const me={};me.index=oe,me.item=i.data[oe],me.key=me.item.id+"key2",l[2][me.key][Symbol.for("props")].activeRow=i.activeRowIndex}};return i[Symbol.for("effects")].push(pe),v(pe),{elms:l,cleanup:()=>{C=null,E=null,i=null,s=null,k[1].length=0,S[1]=null,U[1]=null,_[2]=null,f[2]=null,le=null,ge=null,pe=null,U.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[],context:{}},props:["data","activeRowIndex"]}),uD=Oe.Component("ForLoop",{components:{Square:Zu,LegendItem:oD,Row:Db,Rows:sD},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E,A=!1,U=0,K=[];if(r[0]={},l[0]=this.element({parent:s||"root"},A===!0?E:i),l[0].populate(r[0]),A===!0&&(U-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},A===!0?E:i),r[1].x=100,r[1].y=60,r[1].size=48,r[1].content="Array operations test",r[1].__textnode=!0,l[1].populate(r[1]),A===!0&&(U-=1),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},A===!0?E:i),r[2].y=170,r[2].x=140,l[2].populate(r[2]),A===!0&&(U-=1),s=l[2],r[3]={},l[3]=this.element({parent:s||"root"},A===!0?E:i),r[3].x="-10",r[3].w=500,r[3].h=80,r[3].color="0x64748bff",r[3].y={transition:i.y},r[3].alpha={transition:!i.hide},l[3].populate(r[3]),A===!0&&(U-=1),K[4]=c.components&&c.components.LegendItem||f.LegendItem,s=l[2],r[4]={},l[4]=this.element({parent:s||"root"},A===!0?E:i),r[4].y=0,r[4].id="a",r[4].text="Fill array by assignment",I[4]=[],typeof K[4]<"u")for(let ve in K[4][Symbol.for("config")].props)delete r[4][K[4][Symbol.for("config")].props[ve]],I[4].push(K[4][Symbol.for("config")].props[ve]);if(l[4].populate(r[4]),A===!0&&(U-=1),s=l[4],_[5]={},_[5].y=0,_[5].id="a",_[5].text="Fill array by assignment",b=_[5].is||"LegendItem",f[5],typeof b=="string"){if(f[5]=c.components&&c.components[b]||f[b],!f[5])throw new Error('Component "LegendItem" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[5]=b);if(l[5]=f[5].call(null,{props:_[5]},l[4],i),l[5][Symbol.for("slots")][0]?(s=l[5][Symbol.for("slots")][0],E=l[5],A=!0):s=l[5][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[6]=c.components&&c.components.LegendItem||f.LegendItem,s=l[2],r[6]={},l[6]=this.element({parent:s||"root"},A===!0?E:i),r[6].y=90,r[6].id="b",r[6].text="Push new item to array",I[6]=[],typeof K[6]<"u")for(let ve in K[6][Symbol.for("config")].props)delete r[6][K[6][Symbol.for("config")].props[ve]],I[6].push(K[6][Symbol.for("config")].props[ve]);if(l[6].populate(r[6]),A===!0&&(U-=1),s=l[6],_[7]={},_[7].y=90,_[7].id="b",_[7].text="Push new item to array",b=_[7].is||"LegendItem",f[7],typeof b=="string"){if(f[7]=c.components&&c.components[b]||f[b],!f[7])throw new Error('Component "LegendItem" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[7]=b);if(l[7]=f[7].call(null,{props:_[7]},l[6],i),l[7][Symbol.for("slots")][0]?(s=l[7][Symbol.for("slots")][0],E=l[7],A=!0):s=l[7][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[8]=c.components&&c.components.LegendItem||f.LegendItem,s=l[2],r[8]={},l[8]=this.element({parent:s||"root"},A===!0?E:i),r[8].y=180,r[8].id="c",r[8].text="Pop item from array",I[8]=[],typeof K[8]<"u")for(let ve in K[8][Symbol.for("config")].props)delete r[8][K[8][Symbol.for("config")].props[ve]],I[8].push(K[8][Symbol.for("config")].props[ve]);if(l[8].populate(r[8]),A===!0&&(U-=1),s=l[8],_[9]={},_[9].y=180,_[9].id="c",_[9].text="Pop item from array",b=_[9].is||"LegendItem",f[9],typeof b=="string"){if(f[9]=c.components&&c.components[b]||f[b],!f[9])throw new Error('Component "LegendItem" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[9]=b);if(l[9]=f[9].call(null,{props:_[9]},l[8],i),l[9][Symbol.for("slots")][0]?(s=l[9][Symbol.for("slots")][0],E=l[9],A=!0):s=l[9][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[10]=c.components&&c.components.LegendItem||f.LegendItem,s=l[2],r[10]={},l[10]=this.element({parent:s||"root"},A===!0?E:i),r[10].y=270,r[10].id="d",r[10].text="Shift item from array",I[10]=[],typeof K[10]<"u")for(let ve in K[10][Symbol.for("config")].props)delete r[10][K[10][Symbol.for("config")].props[ve]],I[10].push(K[10][Symbol.for("config")].props[ve]);if(l[10].populate(r[10]),A===!0&&(U-=1),s=l[10],_[11]={},_[11].y=270,_[11].id="d",_[11].text="Shift item from array",b=_[11].is||"LegendItem",f[11],typeof b=="string"){if(f[11]=c.components&&c.components[b]||f[b],!f[11])throw new Error('Component "LegendItem" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[11]=b);if(l[11]=f[11].call(null,{props:_[11]},l[10],i),l[11][Symbol.for("slots")][0]?(s=l[11][Symbol.for("slots")][0],E=l[11],A=!0):s=l[11][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[12]=c.components&&c.components.LegendItem||f.LegendItem,s=l[2],r[12]={},l[12]=this.element({parent:s||"root"},A===!0?E:i),r[12].y=360,r[12].id="e",r[12].text="Splice 2 items from array",I[12]=[],typeof K[12]<"u")for(let ve in K[12][Symbol.for("config")].props)delete r[12][K[12][Symbol.for("config")].props[ve]],I[12].push(K[12][Symbol.for("config")].props[ve]);if(l[12].populate(r[12]),A===!0&&(U-=1),s=l[12],_[13]={},_[13].y=360,_[13].id="e",_[13].text="Splice 2 items from array",b=_[13].is||"LegendItem",f[13],typeof b=="string"){if(f[13]=c.components&&c.components[b]||f[b],!f[13])throw new Error('Component "LegendItem" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[13]=b);if(l[13]=f[13].call(null,{props:_[13]},l[12],i),l[13][Symbol.for("slots")][0]?(s=l[13][Symbol.for("slots")][0],E=l[13],A=!0):s=l[13][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[14]=c.components&&c.components.LegendItem||f.LegendItem,s=l[2],r[14]={},l[14]=this.element({parent:s||"root"},A===!0?E:i),r[14].y=450,r[14].id="f",r[14].text="Unshift 2 items into array",I[14]=[],typeof K[14]<"u")for(let ve in K[14][Symbol.for("config")].props)delete r[14][K[14][Symbol.for("config")].props[ve]],I[14].push(K[14][Symbol.for("config")].props[ve]);if(l[14].populate(r[14]),A===!0&&(U-=1),s=l[14],_[15]={},_[15].y=450,_[15].id="f",_[15].text="Unshift 2 items into array",b=_[15].is||"LegendItem",f[15],typeof b=="string"){if(f[15]=c.components&&c.components[b]||f[b],!f[15])throw new Error('Component "LegendItem" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[15]=b);if(l[15]=f[15].call(null,{props:_[15]},l[14],i),l[15][Symbol.for("slots")][0]?(s=l[15][Symbol.for("slots")][0],E=l[15],A=!0):s=l[15][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[16]=c.components&&c.components.LegendItem||f.LegendItem,s=l[2],r[16]={},l[16]=this.element({parent:s||"root"},A===!0?E:i),r[16].y=540,r[16].id="g",r[16].text="Empty array by assignment",I[16]=[],typeof K[16]<"u")for(let ve in K[16][Symbol.for("config")].props)delete r[16][K[16][Symbol.for("config")].props[ve]],I[16].push(K[16][Symbol.for("config")].props[ve]);if(l[16].populate(r[16]),A===!0&&(U-=1),s=l[16],_[17]={},_[17].y=540,_[17].id="g",_[17].text="Empty array by assignment",b=_[17].is||"LegendItem",f[17],typeof b=="string"){if(f[17]=c.components&&c.components[b]||f[b],!f[17])throw new Error('Component "LegendItem" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[17]=b);if(l[17]=f[17].call(null,{props:_[17]},l[16],i),l[17][Symbol.for("slots")][0]?(s=l[17][Symbol.for("slots")][0],E=l[17],A=!0):s=l[17][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[18]=c.components&&c.components.LegendItem||f.LegendItem,s=l[2],r[18]={},l[18]=this.element({parent:s||"root"},A===!0?E:i),r[18].y=630,r[18].id="h",r[18].text="Concat an array with items",I[18]=[],typeof K[18]<"u")for(let ve in K[18][Symbol.for("config")].props)delete r[18][K[18][Symbol.for("config")].props[ve]],I[18].push(K[18][Symbol.for("config")].props[ve]);if(l[18].populate(r[18]),A===!0&&(U-=1),s=l[18],_[19]={},_[19].y=630,_[19].id="h",_[19].text="Concat an array with items",b=_[19].is||"LegendItem",f[19],typeof b=="string"){if(f[19]=c.components&&c.components[b]||f[b],!f[19])throw new Error('Component "LegendItem" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[19]=b);if(l[19]=f[19].call(null,{props:_[19]},l[18],i),l[19][Symbol.for("slots")][0]?(s=l[19][Symbol.for("slots")][0],E=l[19],A=!0):s=l[19][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),K[20]=c.components&&c.components.LegendItem||f.LegendItem,s=l[2],r[20]={},l[20]=this.element({parent:s||"root"},A===!0?E:i),r[20].y=720,r[20].id="i",r[20].text="Sort array alphabetically",I[20]=[],typeof K[20]<"u")for(let ve in K[20][Symbol.for("config")].props)delete r[20][K[20][Symbol.for("config")].props[ve]],I[20].push(K[20][Symbol.for("config")].props[ve]);if(l[20].populate(r[20]),A===!0&&(U-=1),s=l[20],_[21]={},_[21].y=720,_[21].id="i",_[21].text="Sort array alphabetically",b=_[21].is||"LegendItem",f[21],typeof b=="string"){if(f[21]=c.components&&c.components[b]||f[b],!f[21])throw new Error('Component "LegendItem" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[21]=b);l[21]=f[21].call(null,{props:_[21]},l[20],i),l[21][Symbol.for("slots")][0]?(s=l[21][Symbol.for("slots")][0],E=l[21],A=!0):s=l[21][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),s=l[2],r[22]={},l[22]=this.element({parent:s||"root"},A===!0?E:i),r[22].y=840,l[22].populate(r[22]),A===!0&&(U-=1),s=l[22],r[23]={},l[23]=this.element({parent:s||"root"},A===!0?E:i),r[23].size=26,r[23].y=10,r[23].content="Array length:",r[23].__textnode=!0,l[23].populate(r[23]),A===!0&&(U-=1),s=l[22],r[24]={},l[24]=this.element({parent:s||"root"},A===!0?E:i),r[24].content=i.data.length,r[24].size=40,r[24].x=180,r[24].color="0xfb923cff",r[24].__textnode=!0,l[24].populate(r[24]),A===!0&&(U-=1),s=l[0],r[25]={},l[25]=this.element({parent:s||"root"},A===!0?E:i),r[25].x=660,r[25].y=100,l[25].populate(r[25]),A===!0&&(U-=1),s=l[25],r[26]={},l[26]=this.element({parent:s||"root"},A===!0?E:i),r[26].content="For loop on Element",r[26].__textnode=!0,l[26].populate(r[26]),A===!0&&(U-=1),s=l[25],k[27]=[];let R,le;S[27]=(ve=[],X,ie)=>{const W=x(ve),G=new Set;let ue=W.length;const Ce={};for(R=Ce.from||0,le=("to"in Ce)?Ce.to:W.length;ue--;){const Ae=W[ue];ue<le&&ue>=R&&G.add(""+Ae.id+"key")}let Fe=ie.length;for(;Fe--;)if(G.has(ie[Fe])===!1){const Ae=ie[Fe];X[27][Ae]&&X[27][Ae].destroy(),X[27][Ae]=null,delete X[27][Ae],X[28][Ae]&&X[28][Ae].destroy(),X[28][Ae]=null,delete X[28][Ae],X[29][Ae]&&X[29][Ae].destroy(),X[29][Ae]=null,delete X[29][Ae]}ie.length=0;const Ze=W.length,je=[];for(let Ae=0;Ae<Ze;Ae++){if(Ae<R||Ae>=le)continue;const $=Object.create(i);s=X[25],$.item=W[Ae],$.index=Ae,$.key=""+$.item.id+"key",ie.push($.key),s=X[25],X[27]===void 0&&(X[27]={}),r[27]={},X[27][$.key]===void 0&&(X[27][$.key]=this.element({parent:s||"root"},A===!0?E:i)),r[27].w=380,r[27].h=60,r[27].y=$.index*80+50,r[27].color="0xfff7edff",X[27][$.key].nodeId===void 0&&(X[27][$.key].populate(r[27]),A===!0&&(U-=1)),s=X[27][$.key],X[28]===void 0&&(X[28]={}),r[28]={},X[28][$.key]===void 0&&(X[28][$.key]=this.element({parent:s||"root"},A===!0?E:i)),r[28].w=10,r[28].h=60,r[28].color="0xfb923cff",X[28][$.key].nodeId===void 0&&(X[28][$.key].populate(r[28]),A===!0&&(U-=1)),s=X[27][$.key],X[29]===void 0&&(X[29]={}),r[29]={},X[29][$.key]===void 0&&(X[29][$.key]=this.element({parent:s||"root"},A===!0?E:i)),r[29].content=$.item.text,r[29].x=30,r[29].y=15,r[29].font="lato",r[29].size=28,r[29].color=$.activeRowIndex===$.index?"0x06b6d4ff":"0x1e293bff",r[29].__textnode=!0,X[29][$.key].nodeId===void 0&&(X[29][$.key].populate(r[29]),A===!0&&(U-=1));let ft=()=>{X[27][$.key].set("y",$.index*80+50)};v(ft,null),je.push(ft),i[Symbol.for("effects")].push(ft);let De=()=>{X[29][$.key].set("content",$.item.text)};v(De,null),je.push(De),i[Symbol.for("effects")].push(De)}return je};let ge=()=>{S[27](i.data,l,k[27])};i[Symbol.for("effects")].push(ge),v(ge,["data"]);let pe=()=>{i.activeRowIndex;for(let ve=0;ve<i.data.length;ve++){if(ve<R||ve>=le)continue;const X={};X.index=ve,X.item=i.data[ve],X.key=X.item.id+"key",l[29][X.key].set("color",i.activeRowIndex===X.index?"0x06b6d4ff":"0x1e293bff")}};i[Symbol.for("effects")].push(pe),v(pe),s=l[0],r[30]={},l[30]=this.element({parent:s||"root"},A===!0?E:i),r[30].x=1080,r[30].y=100,l[30].populate(r[30]),A===!0&&(U-=1),s=l[30],r[31]={},l[31]=this.element({parent:s||"root"},A===!0?E:i),r[31].content="For loop on Component",r[31].__textnode=!0,l[31].populate(r[31]),A===!0&&(U-=1),s=l[30],k[32]=[];let oe,me;S[32]=(ve=[],X,ie)=>{const W=x(ve),G=new Set;let ue=W.length;const Ce={};for(oe=Ce.from||0,me=("to"in Ce)?Ce.to:W.length;ue--;){const Ae=W[ue];ue<me&&ue>=oe&&G.add(""+Ae.id+"key2")}let Fe=ie.length;for(;Fe--;)if(G.has(ie[Fe])===!1){const Ae=ie[Fe];X[32][Ae]&&X[32][Ae].destroy(),X[32][Ae]=null,delete X[32][Ae],X[33][Ae]&&X[33][Ae].destroy(),X[33][Ae]=null,delete X[33][Ae]}ie.length=0;const Ze=W.length,je=[];for(let Ae=0;Ae<Ze;Ae++){if(Ae<oe||Ae>=me)continue;const $=Object.create(i);if(s=X[30],$.item=W[Ae],$.index=Ae,$.key=""+$.item.id+"key2",ie.push($.key),K[32]=c.components&&c.components.Row||f.Row,X[32]===void 0&&(X[32]={}),r[32]={},X[32][$.key]===void 0&&(X[32][$.key]=this.element({parent:s||"root"},A===!0?E:i)),r[32].activeRow=($.count>0,$.activeRowIndex),r[32].index=$.index,r[32].text=$.item.text,r[32].y=50,I[32]=[],typeof K[32]<"u")for(let qe in K[32][Symbol.for("config")].props)delete r[32][K[32][Symbol.for("config")].props[qe]],I[32].push(K[32][Symbol.for("config")].props[qe]);if(X[32][$.key].nodeId===void 0&&(X[32][$.key].populate(r[32]),A===!0&&(U-=1)),X[33]===void 0&&(X[33]={}),s=X[32][$.key],_[33]={},X[33][$.key]===void 0){if(C=($.count>0,$.activeRowIndex),Array.isArray(C)===!0&&(C=x(C).slice(0)),_[33].activeRow=C,C=$.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[33].index=C,C=$.item.text,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[33].text=C,_[33].y=50,b=_[33].is||"Row",f[33],typeof b=="string"){if(f[33]=c.components&&c.components[b]||f[b],!f[33])throw new Error('Component "Row" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[33]=b);X[33][$.key]=f[33].call(null,{props:_[33]},X[32][$.key],i),X[33][$.key][Symbol.for("slots")][0]?(s=X[33][$.key][Symbol.for("slots")][0],E=X[33][$.key],A=!0):s=X[33][$.key][Symbol.for("children")][0]}let ft=()=>{(typeof I>"u"||typeof I[32]>"u"||I[32].indexOf("index")===-1)&&X[32][$.key].set("index",$.index)};v(ft,null),je.push(ft),i[Symbol.for("effects")].push(ft);let De=()=>{(typeof I>"u"||typeof I[32]>"u"||I[32].indexOf("text")===-1)&&X[32][$.key].set("text",$.item.text)};v(De,null),je.push(De),i[Symbol.for("effects")].push(De),X[33][$.key][Symbol.for("props")].index=$.index,X[33][$.key][Symbol.for("props")].text=$.item.text}return je};let D=()=>{S[32](i.data,l,k[32])};i[Symbol.for("effects")].push(D),v(D,["data"]);let te=()=>{i.activeRowIndex,i.count;for(let ve=0;ve<i.data.length;ve++){if(ve<oe||ve>=me)continue;const X={};X.index=ve,X.item=i.data[ve],X.key=X.item.id+"key2",(typeof I>"u"||typeof I[32]>"u"||I[32].indexOf("activeRow")===-1)&&l[32][X.key].set("activeRow",(i.count>0,i.activeRowIndex))}};i[Symbol.for("effects")].push(te),v(te);let ce=()=>{i.activeRowIndex,i.count;for(let ve=0;ve<i.data.length;ve++){if(ve<oe||ve>=me)continue;const X={};X.index=ve,X.item=i.data[ve],X.key=X.item.id+"key2",l[33][X.key][Symbol.for("props")].activeRow=(i.count>0,i.activeRowIndex)}};if(i[Symbol.for("effects")].push(ce),v(ce),s=l[0],r[34]={},l[34]=this.element({parent:s||"root"},A===!0?E:i),r[34].x=1500,r[34].y=100,l[34].populate(r[34]),A===!0&&(U-=1),s=l[34],r[35]={},l[35]=this.element({parent:s||"root"},A===!0?E:i),r[35].content="RowsComponent",r[35].__textnode=!0,l[35].populate(r[35]),A===!0&&(U-=1),K[36]=c.components&&c.components.Rows||f.Rows,s=l[34],r[36]={},l[36]=this.element({parent:s||"root"},A===!0?E:i),r[36].data=i.data,r[36].activeRowIndex=i.activeRowIndex,I[36]=[],typeof K[36]<"u")for(let ve in K[36][Symbol.for("config")].props)delete r[36][K[36][Symbol.for("config")].props[ve]],I[36].push(K[36][Symbol.for("config")].props[ve]);if(l[36].populate(r[36]),A===!0&&(U-=1),s=l[36],_[37]={},C=i.data,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[37].data=C,C=i.activeRowIndex,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[37].activeRowIndex=C,b=_[37].is||"Rows",f[37],typeof b=="string"){if(f[37]=c.components&&c.components[b]||f[b],!f[37])throw new Error('Component "Rows" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[37]=b);return l[37]=f[37].call(null,{props:_[37]},l[36],i),l[37][Symbol.for("slots")][0]?(s=l[37][Symbol.for("slots")][0],E=l[37],A=!0):s=l[37][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),{elms:l,cleanup:()=>{C=null,E=null,i=null,s=null,K[4]=null,_[5]=null,f[5]=null,K[6]=null,_[7]=null,f[7]=null,K[8]=null,_[9]=null,f[9]=null,K[10]=null,_[11]=null,f[11]=null,K[12]=null,_[13]=null,f[13]=null,K[14]=null,_[15]=null,f[15]=null,K[16]=null,_[17]=null,f[17]=null,K[18]=null,_[19]=null,f[19]=null,K[20]=null,_[21]=null,f[21]=null,k[27].length=0,S[27]=null,ge=null,pe=null,k[32].length=0,S[32]=null,K[32]=null,_[33]=null,f[33]=null,D=null,te=null,ce=null,K[36]=null,_[37]=null,f[37]=null,K.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[function(s,i,c,f,v,x){i[3].set("y",{transition:s.y})},function(s,i,c,f,v,x){i[3].set("alpha",{transition:!s.hide})},function(s,i,c,f,v,x){i[24].set("content",s.data.length)},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[36]>"u"||skips[36].indexOf("data")===-1)&&i[36].set("data",s.data)},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[36]>"u"||skips[36].indexOf("activeRowIndex")===-1)&&i[36].set("activeRowIndex",s.activeRowIndex)},function(s,i,c,f,v,x){i[37][Symbol.for("props")].data=s.data},function(s,i,c,f,v,x){i[37][Symbol.for("props")].activeRowIndex=s.activeRowIndex}],context:{}},state(){return{count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1,activeRowIndex:0}},computed:{show(){return this.hide,this.hide===!0},data2(){return this.data,this.data}},watch:{y(){this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(()=>{this.hide=!0},600)}},input:{a(){this.y=-10,this.$trigger("y");const h=[];for(let s=0;s<6;s++)h.push(Fa());this.data=h},b(){this.y=80,this.$trigger("y"),this.data.push(Fa())},c(){this.y=170,this.$trigger("y"),this.data.pop()},d(){this.y=260,this.$trigger("y"),this.data.shift()},e(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f(){this.y=440,this.data.unshift(Fa(),Fa())},g(){this.y=530,this.$trigger("y"),this.data=[]},h(){this.y=620,this.$trigger("y"),this.data=this.data.concat(rD(3))},i(){this.y=710,this.$trigger("y"),this.sortDirection=this.sortDirection===1?0:1,this.data=this.data.sort((h,s)=>{const i=h.text.toLowerCase(),c=s.text.toLowerCase();return this.sortDirection===1?i<c?-1:i>c?1:0:i>c?-1:i<c?1:0})},up(){this.activeRowIndex>0&&(this.activeRowIndex-=1)},down(){this.activeRowIndex<this.data.length-1&&(this.activeRowIndex+=1)}}}),lD=Oe.Component("Effects",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].w=160,r[1].h=160,r[1].x=40,r[1].y=40,r[1].color="0xfb923cff",r[1].effects=[{type:"radius",props:{radius:44}}],l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].w=160,r[2].h=160,r[2].x=240,r[2].y=40,r[2].color="0xd97706ff",r[2].effects=[{type:"radius",props:{radius:25}}],l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].w=160,r[3].h=160,r[3].x=440,r[3].y=40,r[3].color="0xb45309ff",r[3].effects=[{type:"radius",props:{radius:80}}],l[3].populate(r[3]),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].w=160,r[4].h=160,r[4].x=640,r[4].y=40,r[4].color="0x78350fff",r[4].effects=[{type:"radius",props:{radius:10}}],l[4].populate(r[4]),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].w=160,r[5].h=160,r[5].x=40,r[5].y=240,r[5].color="0x65a30dff",r[5].effects=[{type:"radius",props:{radius:i.radius}}],l[5].populate(r[5]),s=l[0],r[6]={},l[6]=this.element({parent:s||"root"},i),r[6].w=300,r[6].h=300,r[6].x=40,r[6].y=440,r[6].color="0x0c4a6eff",r[6].effects=[{type:"radius",props:{radius:30}}],l[6].populate(r[6]),s=l[6],r[7]={},l[7]=this.element({parent:s||"root"},i),r[7].w=200,r[7].h=200,r[7].x=50,r[7].y=50,r[7].color="0x0284c7ff",r[7].effects=[{type:"radius",props:{radius:40}}],l[7].populate(r[7]),s=l[7],r[8]={},l[8]=this.element({parent:s||"root"},i),r[8].w=100,r[8].h=100,r[8].x=50,r[8].y=50,r[8].color="0x38bdf8ff",r[8].effects=[{type:"radius",props:{radius:50}}],l[8].populate(r[8]),s=l[8],r[9]={},l[9]=this.element({parent:s||"root"},i),r[9].w=40,r[9].h=40,r[9].x=30,r[9].y=30,r[9].color="0xbae6fdff",r[9].effects=[{type:"radius",props:{radius:20}}],l[9].populate(r[9]),s=l[0],r[10]={},l[10]=this.element({parent:s||"root"},i),r[10].w=160,r[10].h=160,r[10].x=840,r[10].y=40,r[10].color="0x3b82f6ff",r[10].effects=[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}],l[10].populate(r[10]),s=l[0],r[11]={},l[11]=this.element({parent:s||"root"},i),r[11].w=160,r[11].h=160,r[11].x=1040,r[11].y=40,r[11].color="0x500724ff",r[11].effects=i.effects,l[11].populate(r[11]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("effects",[{type:"radius",props:{radius:44}}])},function(s,i,c,f,v,x){i[2].set("effects",[{type:"radius",props:{radius:25}}])},function(s,i,c,f,v,x){i[3].set("effects",[{type:"radius",props:{radius:80}}])},function(s,i,c,f,v,x){i[4].set("effects",[{type:"radius",props:{radius:10}}])},function(s,i,c,f,v,x){i[5].set("effects",[{type:"radius",props:{radius:s.radius}}])},function(s,i,c,f,v,x){i[6].set("effects",[{type:"radius",props:{radius:30}}])},function(s,i,c,f,v,x){i[7].set("effects",[{type:"radius",props:{radius:40}}])},function(s,i,c,f,v,x){i[8].set("effects",[{type:"radius",props:{radius:50}}])},function(s,i,c,f,v,x){i[9].set("effects",[{type:"radius",props:{radius:20}}])},function(s,i,c,f,v,x){i[10].set("effects",[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}])},function(s,i,c,f,v,x){i[11].set("effects",s.effects)}],context:{}},state(){return{direction:"up",radius:0,effects:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]}},hooks:{ready(){this.$setInterval(()=>{const s=this.direction==="up"?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(s,80),0),this.radius===80&&(this.direction="down"),this.radius===0&&(this.direction="up")},500);let h=0;this.$setInterval(()=>{h++,h%2?this.effects=[{type:"borderTop",props:{width:50,color:"#f43f5e"}},{type:"borderBottom",props:{width:50,color:"#be123c"}}]:this.effects=[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]},2e3)}}}),aD=Oe.Component("ShowIf",{components:{Square:Zu},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),l[0].populate(r[0]),C===!0&&(E-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].y=40,l[1].populate(r[1]),C===!0&&(E-=1),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},C===!0?b:i),r[2].x=50,r[2].w=200,r[2].h=300,r[2].color="0xbef264ff",r[2].show=!0,l[2].populate(r[2]),C===!0&&(E-=1),s=l[1],r[3]={},l[3]=this.element({parent:s||"root"},C===!0?b:i),r[3].x=350,r[3].w=200,r[3].h=300,r[3].color="0xff0000ff",r[3].show=!1,l[3].populate(r[3]),C===!0&&(E-=1),s=l[1],r[4]={},l[4]=this.element({parent:s||"root"},C===!0?b:i),r[4].x=650,r[4].w=200,r[4].h=300,r[4].color="0x84cc16ff",r[4].show=1,l[4].populate(r[4]),C===!0&&(E-=1),s=l[1],r[5]={},l[5]=this.element({parent:s||"root"},C===!0?b:i),r[5].x=950,r[5].w=200,r[5].h=300,r[5].color="0xff0000ff",r[5].show=0,l[5].populate(r[5]),C===!0&&(E-=1),s=l[0],r[6]={},l[6]=this.element({parent:s||"root"},C===!0?b:i),r[6].y=380,l[6].populate(r[6]),C===!0&&(E-=1),s=l[6],r[7]={},l[7]=this.element({parent:s||"root"},C===!0?b:i),r[7].x=50,r[7].w=200,r[7].h=300,r[7].color="0xfde047ff",r[7].show=i.showNr,l[7].populate(r[7]),C===!0&&(E-=1),s=l[6],r[8]={},l[8]=this.element({parent:s||"root"},C===!0?b:i),r[8].x=350,r[8].w=200,r[8].h=300,r[8].color="0x0000ffff",r[8].show=i.hideNr,l[8].populate(r[8]),C===!0&&(E-=1),s=l[6],r[9]={},l[9]=this.element({parent:s||"root"},C===!0?b:i),r[9].x=650,r[9].w=200,r[9].h=300,r[9].color="0x84cc16ff",r[9].show=i.showBool,l[9].populate(r[9]),C===!0&&(E-=1),s=l[6],r[10]={},l[10]=this.element({parent:s||"root"},C===!0?b:i),r[10].x=950,r[10].w=200,r[10].h=300,r[10].color="0xff0000ff",r[10].show=i.hideBool,l[10].populate(r[10]),C===!0&&(E-=1),s=l[0],r[11]={},l[11]=this.element({parent:s||"root"},C===!0?b:i),r[11].y=720,l[11].populate(r[11]),C===!0&&(E-=1),s=l[11],r[12]={},l[12]=this.element({parent:s||"root"},C===!0?b:i),r[12].x=50,r[12].w=200,r[12].h=300,r[12].color="0x5eead4ff",r[12].show=i.showHideToggle,l[12].populate(r[12]),C===!0&&(E-=1),s=l[0],r[13]={},l[13]=this.element({parent:s||"root"},C===!0?b:i),r[13].y=40,r[13].x=1e3,l[13].populate(r[13]),C===!0&&(E-=1),A[14]=c.components&&c.components.Square||f.Square,s=l[13],r[14]={},l[14]=this.element({parent:s||"root"},C===!0?b:i),r[14].show=!0,_[14]=[],typeof A[14]<"u")for(let U in A[14][Symbol.for("config")].props)delete r[14][A[14][Symbol.for("config")].props[U]],_[14].push(A[14][Symbol.for("config")].props[U]);if(l[14].populate(r[14]),C===!0&&(E-=1),s=l[14],S[15]={},S[15].show=!0,k=S[15].is||"Square",f[15],typeof k=="string"){if(f[15]=c.components&&c.components[k]||f[k],!f[15])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[15]=k);if(l[15]=f[15].call(null,{props:S[15]},l[14],i),l[15][Symbol.for("slots")][0]?(s=l[15][Symbol.for("slots")][0],b=l[15],C=!0):s=l[15][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[16]=c.components&&c.components.Square||f.Square,s=l[13],r[16]={},l[16]=this.element({parent:s||"root"},C===!0?b:i),r[16].y=100,r[16].show=!1,_[16]=[],typeof A[16]<"u")for(let U in A[16][Symbol.for("config")].props)delete r[16][A[16][Symbol.for("config")].props[U]],_[16].push(A[16][Symbol.for("config")].props[U]);if(l[16].populate(r[16]),C===!0&&(E-=1),s=l[16],S[17]={},S[17].y=100,S[17].show=!1,k=S[17].is||"Square",f[17],typeof k=="string"){if(f[17]=c.components&&c.components[k]||f[k],!f[17])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[17]=k);if(l[17]=f[17].call(null,{props:S[17]},l[16],i),l[17][Symbol.for("slots")][0]?(s=l[17][Symbol.for("slots")][0],b=l[17],C=!0):s=l[17][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[18]=c.components&&c.components.Square||f.Square,s=l[13],r[18]={},l[18]=this.element({parent:s||"root"},C===!0?b:i),r[18].y=200,r[18].show=i.showHideToggle,_[18]=[],typeof A[18]<"u")for(let U in A[18][Symbol.for("config")].props)delete r[18][A[18][Symbol.for("config")].props[U]],_[18].push(A[18][Symbol.for("config")].props[U]);if(l[18].populate(r[18]),C===!0&&(E-=1),s=l[18],S[19]={},S[19].y=200,I=i.showHideToggle,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[19].show=I,k=S[19].is||"Square",f[19],typeof k=="string"){if(f[19]=c.components&&c.components[k]||f[k],!f[19])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[19]=k);return l[19]=f[19].call(null,{props:S[19]},l[18],i),l[19][Symbol.for("slots")][0]?(s=l[19][Symbol.for("slots")][0],b=l[19],C=!0):s=l[19][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),s=l[0],r[20]={},l[20]=this.element({parent:s||"root"},C===!0?b:i),r[20].y=40,r[20].x=1400,l[20].populate(r[20]),C===!0&&(E-=1),s=l[20],r[21]={},l[21]=this.element({parent:s||"root"},C===!0?b:i),r[21].w=80,r[21].h=80,r[21].show=!0,r[21].alpha=.8,r[21].color="0xff00e4ff",l[21].populate(r[21]),C===!0&&(E-=1),s=l[20],r[22]={},l[22]=this.element({parent:s||"root"},C===!0?b:i),r[22].y=100,r[22].w=80,r[22].h=80,r[22].show=!1,r[22].alpha=.8,r[22].color="0xff00e4ff",l[22].populate(r[22]),C===!0&&(E-=1),s=l[20],r[23]={},l[23]=this.element({parent:s||"root"},C===!0?b:i),r[23].y=200,r[23].w=80,r[23].h=80,r[23].show=i.showHideToggle,r[23].alpha=.8,r[23].color="0xff00e4ff",l[23].populate(r[23]),C===!0&&(E-=1),s=l[0],r[24]={},l[24]=this.element({parent:s||"root"},C===!0?b:i),r[24].x=1e3,r[24].y=380,r[24].direction="horizontal",r[24].gap=20,r[24].padding=20,r[24].color="0xffffffff",r[24].__layout=!0,l[24].populate(r[24]),C===!0&&(E-=1),s=l[24],r[25]={},l[25]=this.element({parent:s||"root"},C===!0?b:i),r[25].w=40,r[25].h=40,r[25].show=i.showHideToggle,r[25].color="0xbfdbfeff",l[25].populate(r[25]),C===!0&&(E-=1),s=l[24],r[26]={},l[26]=this.element({parent:s||"root"},C===!0?b:i),r[26].w=40,r[26].h=40,r[26].color="0x60a5faff",l[26].populate(r[26]),C===!0&&(E-=1),s=l[24],r[27]={},l[27]=this.element({parent:s||"root"},C===!0?b:i),r[27].w=40,r[27].h=40,r[27].color="0x2563ebff",l[27].populate(r[27]),C===!0&&(E-=1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[14]=null,S[15]=null,f[15]=null,A[16]=null,S[17]=null,f[17]=null,A[18]=null,S[19]=null,f[19]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[12].set("show",s.showHideToggle)},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[18]>"u"||skips[18].indexOf("show")===-1)&&i[18].set("show",s.showHideToggle)},function(s,i,c,f,v,x){i[19][Symbol.for("props")].show=s.showHideToggle},function(s,i,c,f,v,x){i[23].set("show",s.showHideToggle)},function(s,i,c,f,v,x){i[25].set("show",s.showHideToggle)}],context:{}},state(){return{showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready(){this.$setInterval(()=>{console.log("backstopjs:ready"),this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),fD=Oe.Component("Events",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].x=400,r[0].y=360,l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].w=280,r[1].h=280,r[1].color="0xe5e7ebff",r[1].x=i.x,r[1].y="-5",l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].w=250,r[2].h=250,r[2].x=10,r[2].y=10,r[2].color=i.colors[0],l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].w=250,r[3].h=250,r[3].x=290,r[3].y=10,r[3].color=i.colors[1],l[3].populate(r[3]),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].w=250,r[4].h=250,r[4].x=570,r[4].y=10,r[4].color=i.colors[2],l[4].populate(r[4]),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].w=250,r[5].h=250,r[5].x=850,r[5].y=10,r[5].color=i.colors[3],l[5].populate(r[5]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("x",s.x)}],context:{}},state(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x(){return this.count,this.count*280-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(h){const s=this.count-1;s===-1?this.parent.$focus(h):this.count=Math.max(s,0)},right(h){const s=this.count+1;s===4?this.parent.$focus(h):this.count=Math.min(s,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),cD=Oe.Component("SlotCard",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=300,r[0].h=500,r[0].effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],r[0].color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1][Symbol.for("isSlot")]=!0,r[1].x=20,r[1].y=20,l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].content=i.label,r[2].maxwidth=260,r[2].x=20,r[2].y=400,r[2].align="center",r[2].__textnode=!0,l[2].populate(r[2]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}},props:[{key:"label"}]}),dD=Oe.Component("NamedSlotCard",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=700,r[0].h=300,r[0].effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],r[0].color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].x=20,r[1].y=20,l[1].populate(r[1]),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].content="First slot",r[2].__textnode=!0,l[2].populate(r[2]),s=l[1],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3][Symbol.for("isSlot")]=!0,r[3].y=40,r[3].ref="first",l[3].populate(r[3]),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].x=200,r[4].y=20,l[4].populate(r[4]),s=l[4],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].content="Second slot",r[5].__textnode=!0,l[5].populate(r[5]),s=l[4],r[6]={},l[6]=this.element({parent:s||"root"},i),r[6][Symbol.for("isSlot")]=!0,r[6].y=40,r[6].ref="second",l[6].populate(r[6]),s=l[0],r[7]={},l[7]=this.element({parent:s||"root"},i),r[7].x=480,r[7].y=20,l[7].populate(r[7]),s=l[7],r[8]={},l[8]=this.element({parent:s||"root"},i),r[8].content="Third slot",r[8].__textnode=!0,l[8].populate(r[8]),s=l[7],r[9]={},l[9]=this.element({parent:s||"root"},i),r[9][Symbol.for("isSlot")]=!0,r[9].y=40,r[9].ref="third",l[9].populate(r[9]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}}}),Ia=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],hD=Oe.Component("Components",{components:{SlotCard:cD,NamedSlotCard:dD,Card:Pb,Square:Zu},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b=!1,C=0,E=[];if(r[0]={},l[0]=this.element({parent:s||"root"},b===!0?I:i),l[0].populate(r[0]),b===!0&&(C-=1),E[1]=c.components&&c.components.SlotCard||f.SlotCard,s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},b===!0?I:i),r[1].x=400,r[1].y=100,r[1].label="Element",_[1]=[],typeof E[1]<"u")for(let A in E[1][Symbol.for("config")].props)delete r[1][E[1][Symbol.for("config")].props[A]],_[1].push(E[1][Symbol.for("config")].props[A]);if(l[1].populate(r[1]),b===!0&&(C-=1),s=l[1],S[2]={},S[2].x=400,S[2].y=100,S[2].label="Element",k=S[2].is||"SlotCard",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "SlotCard" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);if(l[2]=f[2].call(null,{props:S[2]},l[1],i),l[2][Symbol.for("slots")][0]?(s=l[2][Symbol.for("slots")][0],I=l[2],b=!0):s=l[2][Symbol.for("children")][0],b===!0&&(C=2),r[3]={},l[3]=this.element({parent:s||"root"},b===!0?I:i),l[3].populate(r[3]),b===!0&&(C-=1),s=l[3],r[4]={},l[4]=this.element({parent:s||"root"},b===!0?I:i),r[4].color=i.color,r[4].w=100,r[4].h=100,l[4].populate(r[4]),b===!0&&(C-=1),b===!0&&C===0&&(b=!1),E[5]=c.components&&c.components.SlotCard||f.SlotCard,s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},b===!0?I:i),r[5].x=800,r[5].y=100,r[5].label="Component",_[5]=[],typeof E[5]<"u")for(let A in E[5][Symbol.for("config")].props)delete r[5][E[5][Symbol.for("config")].props[A]],_[5].push(E[5][Symbol.for("config")].props[A]);if(l[5].populate(r[5]),b===!0&&(C-=1),s=l[5],S[6]={},S[6].x=800,S[6].y=100,S[6].label="Component",k=S[6].is||"SlotCard",f[6],typeof k=="string"){if(f[6]=c.components&&c.components[k]||f[k],!f[6])throw new Error('Component "SlotCard" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[6]=k);if(l[6]=f[6].call(null,{props:S[6]},l[5],i),l[6][Symbol.for("slots")][0]?(s=l[6][Symbol.for("slots")][0],I=l[6],b=!0):s=l[6][Symbol.for("children")][0],b===!0&&(C=2),r[7]={},l[7]=this.element({parent:s||"root"},b===!0?I:i),l[7].populate(r[7]),b===!0&&(C-=1),E[8]=c.components&&c.components.Square||f.Square,s=l[7],r[8]={},l[8]=this.element({parent:s||"root"},b===!0?I:i),r[8].size=200,r[8].y=50,_[8]=[],typeof E[8]<"u")for(let A in E[8][Symbol.for("config")].props)delete r[8][E[8][Symbol.for("config")].props[A]],_[8].push(E[8][Symbol.for("config")].props[A]);if(l[8].populate(r[8]),b===!0&&(C-=1),s=l[8],S[9]={},S[9].size=200,S[9].y=50,k=S[9].is||"Square",f[9],typeof k=="string"){if(f[9]=c.components&&c.components[k]||f[k],!f[9])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[9]=k);if(l[9]=f[9].call(null,{props:S[9]},l[8],i),l[9][Symbol.for("slots")][0]?(s=l[9][Symbol.for("slots")][0],I=l[9],b=!0):s=l[9][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),b===!0&&C===0&&(b=!1),E[10]=c.components&&c.components.SlotCard||f.SlotCard,s=l[0],r[10]={},l[10]=this.element({parent:s||"root"},b===!0?I:i),r[10].x=1200,r[10].y=100,r[10].label="Element & Component",_[10]=[],typeof E[10]<"u")for(let A in E[10][Symbol.for("config")].props)delete r[10][E[10][Symbol.for("config")].props[A]],_[10].push(E[10][Symbol.for("config")].props[A]);if(l[10].populate(r[10]),b===!0&&(C-=1),s=l[10],S[11]={},S[11].x=1200,S[11].y=100,S[11].label="Element & Component",k=S[11].is||"SlotCard",f[11],typeof k=="string"){if(f[11]=c.components&&c.components[k]||f[k],!f[11])throw new Error('Component "SlotCard" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[11]=k);if(l[11]=f[11].call(null,{props:S[11]},l[10],i),l[11][Symbol.for("slots")][0]?(s=l[11][Symbol.for("slots")][0],I=l[11],b=!0):s=l[11][Symbol.for("children")][0],b===!0&&(C=3),r[12]={},l[12]=this.element({parent:s||"root"},b===!0?I:i),l[12].populate(r[12]),b===!0&&(C-=1),s=l[12],r[13]={},l[13]=this.element({parent:s||"root"},b===!0?I:i),r[13].color=i.color,r[13].w=100,r[13].h=100,l[13].populate(r[13]),b===!0&&(C-=1),E[14]=c.components&&c.components.Square||f.Square,s=l[12],r[14]={},l[14]=this.element({parent:s||"root"},b===!0?I:i),r[14].size=200,r[14].y=150,_[14]=[],typeof E[14]<"u")for(let A in E[14][Symbol.for("config")].props)delete r[14][E[14][Symbol.for("config")].props[A]],_[14].push(E[14][Symbol.for("config")].props[A]);if(l[14].populate(r[14]),b===!0&&(C-=1),s=l[14],S[15]={},S[15].size=200,S[15].y=150,k=S[15].is||"Square",f[15],typeof k=="string"){if(f[15]=c.components&&c.components[k]||f[k],!f[15])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[15]=k);if(l[15]=f[15].call(null,{props:S[15]},l[14],i),l[15][Symbol.for("slots")][0]?(s=l[15][Symbol.for("slots")][0],I=l[15],b=!0):s=l[15][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),b===!0&&C===0&&(b=!1),E[16]=c.components&&c.components.Card||f.Card,s=l[0],r[16]={},l[16]=this.element({parent:s||"root"},b===!0?I:i),r[16].x=400,r[16].y=700,r[16].size="small",_[16]=[],typeof E[16]<"u")for(let A in E[16][Symbol.for("config")].props)delete r[16][E[16][Symbol.for("config")].props[A]],_[16].push(E[16][Symbol.for("config")].props[A]);if(l[16].populate(r[16]),b===!0&&(C-=1),s=l[16],S[17]={},S[17].x=400,S[17].y=700,S[17].size="small",k=S[17].is||"Card",f[17],typeof k=="string"){if(f[17]=c.components&&c.components[k]||f[k],!f[17])throw new Error('Component "Card" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[17]=k);if(l[17]=f[17].call(null,{props:S[17]},l[16],i),l[17][Symbol.for("slots")][0]?(s=l[17][Symbol.for("slots")][0],I=l[17],b=!0):s=l[17][Symbol.for("children")][0],b===!0&&(C=2),r[18]={},l[18]=this.element({parent:s||"root"},b===!0?I:i),l[18].populate(r[18]),b===!0&&(C-=1),s=l[18],r[19]={},l[19]=this.element({parent:s||"root"},b===!0?I:i),r[19].color=i.color,r[19].w=100,r[19].h=100,l[19].populate(r[19]),b===!0&&(C-=1),b===!0&&C===0&&(b=!1),E[20]=c.components&&c.components.NamedSlotCard||f.NamedSlotCard,s=l[0],r[20]={},l[20]=this.element({parent:s||"root"},b===!0?I:i),r[20].x=800,r[20].y=700,_[20]=[],typeof E[20]<"u")for(let A in E[20][Symbol.for("config")].props)delete r[20][E[20][Symbol.for("config")].props[A]],_[20].push(E[20][Symbol.for("config")].props[A]);if(l[20].populate(r[20]),b===!0&&(C-=1),s=l[20],S[21]={},S[21].x=800,S[21].y=700,k=S[21].is||"NamedSlotCard",f[21],typeof k=="string"){if(f[21]=c.components&&c.components[k]||f[k],!f[21])throw new Error('Component "NamedSlotCard" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[21]=k);if(l[21]=f[21].call(null,{props:S[21]},l[20],i),l[21][Symbol.for("slots")][0]?(s=l[21][Symbol.for("slots")][0],I=l[21],b=!0):s=l[21][Symbol.for("children")][0],b===!0&&(C=5),r[22]={},l[22]=this.element({parent:s||"root"},b===!0?I:i),l[22].populate(r[22]),b===!0&&(C-=1),s=l[22],r[23]={},l[23]=this.element({parent:s||"root"},b===!0?I:i),r[23].color="0x0891b2ff",r[23].x=10,r[23].y=140,r[23].w=80,r[23].h=60,r[23].parent=I[Symbol.for("slots")]!==void 0&&Array.isArray(I[Symbol.for("slots")])===!0&&I[Symbol.for("slots")].filter(A=>A.ref==="second").shift()||s,r[23].slot="second",l[23].populate(r[23]),b===!0&&(C-=1),s=l[22],r[24]={},l[24]=this.element({parent:s||"root"},b===!0?I:i),r[24].color=i.color,r[24].w=100,r[24].h=100,r[24].parent=I[Symbol.for("slots")]!==void 0&&Array.isArray(I[Symbol.for("slots")])===!0&&I[Symbol.for("slots")].filter(A=>A.ref==="third").shift()||s,r[24].slot="third",l[24].populate(r[24]),b===!0&&(C-=1),E[25]=c.components&&c.components.Square||f.Square,s=l[22],r[25]={},l[25]=this.element({parent:s||"root"},b===!0?I:i),r[25].size=100,r[25].parent=I[Symbol.for("slots")]!==void 0&&Array.isArray(I[Symbol.for("slots")])===!0&&I[Symbol.for("slots")].filter(A=>A.ref==="first").shift()||s,r[25].slot="first",_[25]=[],typeof E[25]<"u")for(let A in E[25][Symbol.for("config")].props)delete r[25][E[25][Symbol.for("config")].props[A]],_[25].push(E[25][Symbol.for("config")].props[A]);if(l[25].populate(r[25]),b===!0&&(C-=1),s=l[25],S[26]={},S[26].size=100,S[26].slot="first",k=S[26].is||"Square",f[26],typeof k=="string"){if(f[26]=c.components&&c.components[k]||f[k],!f[26])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[26]=k);return l[26]=f[26].call(null,{props:S[26]},l[25],i),l[26][Symbol.for("slots")][0]?(s=l[26][Symbol.for("slots")][0],I=l[26],b=!0):s=l[26][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),s=l[22],r[27]={},l[27]=this.element({parent:s||"root"},b===!0?I:i),r[27].color="0x4d7c0fff",r[27].x=40,r[27].y=40,r[27].w=40,r[27].h=60,r[27].parent=I[Symbol.for("slots")]!==void 0&&Array.isArray(I[Symbol.for("slots")])===!0&&I[Symbol.for("slots")].filter(A=>A.ref==="second").shift()||s,r[27].slot="second",l[27].populate(r[27]),b===!0&&(C-=1),b===!0&&C===0&&(b=!1),{elms:l,cleanup:()=>{I=null,i=null,s=null,E[1]=null,S[2]=null,f[2]=null,E[5]=null,S[6]=null,f[6]=null,E[8]=null,S[9]=null,f[9]=null,E[10]=null,S[11]=null,f[11]=null,E[14]=null,S[15]=null,f[15]=null,E[16]=null,S[17]=null,f[17]=null,E[20]=null,S[21]=null,f[21]=null,E[25]=null,S[26]=null,f[26]=null,E.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[4].set("color",s.color)},function(s,i,c,f,v,x){i[13].set("color",s.color)},function(s,i,c,f,v,x){i[19].set("color",s.color)},function(s,i,c,f,v,x){i[24].set("color",s.color)}],context:{}},state(){return{color:Ia[0]}},hooks:{ready(){this.$setInterval(()=>{const h=Ia.indexOf(this.color)+1;this.color=h<=Ia.length?Ia[h]:Ia[0]},600)}}}),pD=Oe.Component("MemoryCard",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=320,r[0].h=200,r[0].x=i.col*360,r[0].y=i.row*250,r[0].scale={transition:i.scale},r[0].rotation={transition:i.disabled?-2:0},l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].h={transition:i.h},r[1].w=320,r[1].y=125,r[1].mount="{y: 0.5}",r[1].color={transition:i.disabled?"#ccc":"#fff"},r[1].src=i.image+"&w=320&h=200",r[1].effects=[{type:"radius",props:{radius:6}}],r[1].show=i.open,l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].h={transition:i.h},r[2].w=320,r[2].y=125,r[2].mount="{y: 0.5}",r[2].color=i.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},r[2].effects=[{type:"radius",props:{radius:6}}],l[2].populate(r[2]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("scale",{transition:s.scale})},function(s,i,c,f,v,x){i[0].set("rotation",{transition:s.disabled?-2:0})},function(s,i,c,f,v,x){i[1].set("h",{transition:s.h})},function(s,i,c,f,v,x){i[1].set("color",{transition:s.disabled?"#ccc":"#fff"})},function(s,i,c,f,v,x){i[1].set("src",s.image+"&w=320&h=200")},function(s,i,c,f,v,x){i[1].set("effects",[{type:"radius",props:{radius:6}}])},function(s,i,c,f,v,x){i[1].set("show",s.open)},function(s,i,c,f,v,x){i[2].set("h",{transition:s.h})},function(s,i,c,f,v,x){i[2].set("color",s.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(s,i,c,f,v,x){i[2].set("effects",[{type:"radius",props:{radius:6}}])}],context:{}},props:["row","col","image","description","index"],state(){return{disabled:!1,open:!1,h:200,scale:1,announcement:null}},hooks:{init(){this.$listen("closeMemoryCard",h=>{h===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",h=>{h===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(){this.scale=1.08;const h="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.announcement=this.$announcer.speak(h)},unfocus(){this.scale=1,this.announcement.cancel()}},input:{enter(){if(!this.disabled){if(this.open){this.$announcer.speak("Card already open. Choose another");return}this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)}}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),gD=Oe.Component("Toggle",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].w=i.width,r[1].h=i.height,r[1].color="0x121212ff",r[1].alpha={transition:i.hasFocus?0:1},r[1].effects=[{type:"radius",props:{radius:i.radius}},{type:"border",props:{width:2,color:"0x888888ff"}}],l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].w=i.width,r[2].h=i.height,r[2].color="0x121212ff",r[2].alpha={transition:i.hasFocus?1:0},r[2].effects=[{type:"radius",props:{radius:i.radius}},{type:"border",props:{width:4,color:"0xffffffff"}}],l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].w=i.innerWidth,r[3].h=i.innerHeight,r[3].mount=.5,r[3].x={transition:i.toggled?i.width-i.offset:i.offset},r[3].y=i.height/2,r[3].color={transition:i.toggled?"#fff":"#888"},r[3].effects=[{type:"radius",props:{radius:i.innerRadius}}],l[3].populate(r[3]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("alpha",{transition:s.hasFocus?0:1})},function(s,i,c,f,v,x){i[1].set("effects",[{type:"radius",props:{radius:s.radius}},{type:"border",props:{width:2,color:"0x888888ff"}}])},function(s,i,c,f,v,x){i[2].set("alpha",{transition:s.hasFocus?1:0})},function(s,i,c,f,v,x){i[2].set("effects",[{type:"radius",props:{radius:s.radius}},{type:"border",props:{width:4,color:"0xffffffff"}}])},function(s,i,c,f,v,x){i[3].set("x",{transition:s.toggled?s.width-s.offset:s.offset})},function(s,i,c,f,v,x){i[3].set("color",{transition:s.toggled?"#fff":"#888"})},function(s,i,c,f,v,x){i[3].set("effects",[{type:"radius",props:{radius:s.innerRadius}}])}],context:{}},props:["toggled"],state(){return{borderWidth:2,height:40,innerHeight:18,innerRadius:9,innerWidth:18,radius:20,width:60,offset:20}}}),R3=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],mD=Oe.Component("Announcer",{components:{MemoryCard:pD,Toggle:gD},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E,A=!1,U=0,K=[];if(r[0]={},l[0]=this.element({parent:s||"root"},A===!0?E:i),l[0].populate(r[0]),A===!0&&(U-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},A===!0?E:i),r[1].font="raleway",r[1].size=80,r[1].color="0xffffffff",r[1].content="Let's play memory!",r[1].x=580,r[1].y=60,r[1].__textnode=!0,l[1].populate(r[1]),A===!0&&(U-=1),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},A===!0?E:i),r[2].font="kalam",r[2].size=40,r[2].color="0xb91c1cff",r[2].content="the Accessible edition :)",r[2].x=1200,r[2].y=170,r[2].rotation="-6",r[2].__textnode=!0,l[2].populate(r[2]),A===!0&&(U-=1),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},A===!0?E:i),r[3].size=26,r[3].color="0xffffffff",r[3].content="Announcer on / off",r[3].x=260,r[3].y=200,r[3].__textnode=!0,l[3].populate(r[3]),A===!0&&(U-=1),K[4]=c.components&&c.components.Toggle||f.Toggle,s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},A===!0?E:i),r[4].ref="toggle",r[4].x=525,r[4].y=200,r[4].toggled=i.toggle,I[4]=[],typeof K[4]<"u")for(let pe in K[4][Symbol.for("config")].props)delete r[4][K[4][Symbol.for("config")].props[pe]],I[4].push(K[4][Symbol.for("config")].props[pe]);if(l[4].populate(r[4]),A===!0&&(U-=1),s=l[4],_[5]={},_[5].ref="toggle",_[5].x=525,_[5].y=200,C=i.toggle,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[5].toggled=C,b=_[5].is||"Toggle",f[5],typeof b=="string"){if(f[5]=c.components&&c.components[b]||f[b],!f[5])throw new Error('Component "Toggle" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[5]=b);l[5]=f[5].call(null,{props:_[5]},l[4],i),l[5][Symbol.for("slots")][0]?(s=l[5][Symbol.for("slots")][0],E=l[5],A=!0):s=l[5][Symbol.for("children")][0],A===!0&&U===0&&(A=!1),s=l[0],r[6]={},l[6]=this.element({parent:s||"root"},A===!0?E:i),r[6].x=260,r[6].y=260,l[6].populate(r[6]),A===!0&&(U-=1),s=l[6],k[7]=[];let R,le;S[7]=(pe=[],oe,me)=>{const D=x(pe),te=new Set;let ce=D.length;const ve={};for(R=ve.from||0,le=("to"in ve)?ve.to:D.length;ce--;){const G=D[ce];ce<le&&ce>=R&&te.add(""+G.id)}let X=me.length;for(;X--;)if(te.has(me[X])===!1){const G=me[X];oe[7][G]&&oe[7][G].destroy(),oe[7][G]=null,delete oe[7][G],oe[8][G]&&oe[8][G].destroy(),oe[8][G]=null,delete oe[8][G]}me.length=0;const ie=D.length,W=[];for(let G=0;G<ie;G++){if(G<R||G>=le)continue;const ue=Object.create(i);if(s=oe[6],ue.card=D[G],ue.index=G,ue.key=""+ue.card.id,me.push(ue.key),K[7]=c.components&&c.components.MemoryCard||f.MemoryCard,oe[7]===void 0&&(oe[7]={}),r[7]={},oe[7][ue.key]===void 0&&(oe[7][ue.key]=this.element({parent:s||"root"},A===!0?E:i)),r[7].col=ue.index%4,r[7].row=Math.floor(ue.index/4)%3,r[7].image=ue.card.image,r[7].description=ue.card.description,r[7].ref="card"+ue.index,r[7].index=ue.index,I[7]=[],typeof K[7]<"u")for(let Ae in K[7][Symbol.for("config")].props)delete r[7][K[7][Symbol.for("config")].props[Ae]],I[7].push(K[7][Symbol.for("config")].props[Ae]);if(oe[7][ue.key].nodeId===void 0&&(oe[7][ue.key].populate(r[7]),A===!0&&(U-=1)),oe[8]===void 0&&(oe[8]={}),s=oe[7][ue.key],_[8]={},oe[8][ue.key]===void 0){if(C=ue.index%4,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[8].col=C,C=Math.floor(ue.index/4)%3,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[8].row=C,_[8].image=ue.card.image,_[8].description=ue.card.description,C="card"+ue.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[8].ref=C,C=ue.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[8].index=C,b=_[8].is||"MemoryCard",f[8],typeof b=="string"){if(f[8]=c.components&&c.components[b]||f[b],!f[8])throw new Error('Component "MemoryCard" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[8]=b);oe[8][ue.key]=f[8].call(null,{props:_[8]},oe[7][ue.key],i),oe[8][ue.key][Symbol.for("slots")][0]?(s=oe[8][ue.key][Symbol.for("slots")][0],E=oe[8][ue.key],A=!0):s=oe[8][ue.key][Symbol.for("children")][0]}let Ce=()=>{(typeof I>"u"||typeof I[7]>"u"||I[7].indexOf("col")===-1)&&oe[7][ue.key].set("col",ue.index%4)};v(Ce,null),W.push(Ce),i[Symbol.for("effects")].push(Ce);let Fe=()=>{(typeof I>"u"||typeof I[7]>"u"||I[7].indexOf("row")===-1)&&oe[7][ue.key].set("row",Math.floor(ue.index/4)%3)};v(Fe,null),W.push(Fe),i[Symbol.for("effects")].push(Fe);let Ze=()=>{(typeof I>"u"||typeof I[7]>"u"||I[7].indexOf("ref")===-1)&&oe[7][ue.key].set("ref","card"+ue.index)};v(Ze,null),W.push(Ze),i[Symbol.for("effects")].push(Ze);let je=()=>{(typeof I>"u"||typeof I[7]>"u"||I[7].indexOf("index")===-1)&&oe[7][ue.key].set("index",ue.index)};v(je,null),W.push(je),i[Symbol.for("effects")].push(je),oe[8][ue.key][Symbol.for("props")].col=ue.index%4,oe[8][ue.key][Symbol.for("props")].row=Math.floor(ue.index/4)%3,oe[8][ue.key][Symbol.for("props")].ref="card"+ue.index,oe[8][ue.key][Symbol.for("props")].index=ue.index}return W};let ge=()=>{S[7](i.cards,l,k[7])};return i[Symbol.for("effects")].push(ge),v(ge,["cards"]),{elms:l,cleanup:()=>{C=null,E=null,i=null,s=null,K[4]=null,_[5]=null,f[5]=null,k[7].length=0,S[7]=null,K[7]=null,_[8]=null,f[8]=null,ge=null,K.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[4]>"u"||skips[4].indexOf("toggled")===-1)&&i[4].set("toggled",s.toggle)},function(s,i,c,f,v,x){i[5][Symbol.for("props")].toggled=s.toggle}],context:{}},state(){return{cards:R3.concat(R3).map((h,s)=>({...h,id:`card${s}`})),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0,toggle:!0,focusable:["toggle"],focusIndex:0}},hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",h=>{this.openCards.length<2&&this.openCards.push(h),this.openCards.length===2&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},ready(){this.$announcer.enable(),this.focusedRow=0,this.focusedCol=0},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(h){if(this.focusedRow===-1){this.focusedRow=0;return}h=h+this.focusedRow*4,this.$select("card"+h).$focus()},focusedRow(h){if(this.focusedCol===-1){this.focusedCol=0;return}h=this.focusedCol+h*4,this.$select("card"+h).$focus()}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){this.focusIndex===0&&(this.focusedCol===0?this.focusedRow===0?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1))},right(){this.focusIndex===0&&(this.focusedCol===3?this.focusedRow===2?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1))},up(){this.focusIndex===0&&(this.focusedRow===0?(this.$select("toggle").$focus(),this.focusIndex=-1):this.focusedRow=Math.max(0,this.focusedRow-1))},down(){this.focusIndex===-1?(this.$select("card0").$focus(),this.focusIndex=0,this.focusedRow=0,this.focusedCol=0):this.focusedRow===2?this.$announcer.speak("You are already at the last card"):this.focusedRow=Math.min(2,this.focusedRow+1)},enter(){this.focusIndex===-1&&(this.toggle=!this.toggle,console.log("Toggle:",this.toggle),this.toggle?this.$announcer.enable():this.$announcer.disable())}}}),Ma=(h,s)=>Math.floor(Math.random()*(s-h+1)+h),yD=Oe.Component("Item",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].src="assets/blits-b-small.png",r[0].w=96,r[0].h=168,r[0].x={transition:{value:i.x,duration:2900}},r[0].y={transition:{value:i.y,duration:2900}},r[0].rotation={transition:{value:i.rotation,duration:2900}},r[0].scale={transition:{value:i.scale,duration:1e3}},l[0].populate(r[0]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("x",{transition:{value:s.x,duration:2900}})},function(s,i,c,f,v,x){i[0].set("y",{transition:{value:s.y,duration:2900}})},function(s,i,c,f,v,x){i[0].set("rotation",{transition:{value:s.rotation,duration:2900}})},function(s,i,c,f,v,x){i[0].set("scale",{transition:{value:s.scale,duration:1e3}})}],context:{}},state(){return{x:Ma(20,1560),y:Ma(20,720),rotation:0,scale:.1}},hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=Ma(20,1740),this.y=Ma(20,900),this.rotation=Ma(10,360)},3e3)}}}),vD=Oe.Component("Exponential",{components:{Item:yD},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E=!1,A=[];r[0]={},l[0]=this.element({parent:s||"root"},E===!0?C:i),l[0].populate(r[0]),s=l[0],k[1]=[];let U,K;S[1]=(le=[],ge,pe)=>{const oe=x(le),me=new Set;let D=oe.length;const te={};for(U=te.from||0,K=("to"in te)?te.to:oe.length;D--;){const ie=oe[D];D<K&&D>=U&&me.add(""+ie)}let ce=pe.length;for(;ce--;)if(me.has(pe[ce])===!1){const ie=pe[ce];ge[1][ie]&&ge[1][ie].destroy(),ge[1][ie]=null,delete ge[1][ie],ge[2][ie]&&ge[2][ie].destroy(),ge[2][ie]=null,delete ge[2][ie]}pe.length=0;const ve=oe.length,X=[];for(let ie=0;ie<ve;ie++){if(ie<U||ie>=K)continue;const W=Object.create(i);if(s=ge[0],W.item=oe[ie],W.undefined=ie,W.key=""+W.item,pe.push(W.key),A[1]=c.components&&c.components.Item||f.Item,ge[1]===void 0&&(ge[1]={}),r[1]={},ge[1][W.key]===void 0&&(ge[1][W.key]=this.element({parent:s||"root"},E===!0?C:i)),I[1]=[],typeof A[1]<"u")for(let G in A[1][Symbol.for("config")].props)delete r[1][A[1][Symbol.for("config")].props[G]],I[1].push(A[1][Symbol.for("config")].props[G]);if(ge[1][W.key].nodeId===void 0&&ge[1][W.key].populate(r[1]),ge[2]===void 0&&(ge[2]={}),s=ge[1][W.key],_[2]={},ge[2][W.key]===void 0){if(b=_[2].is||"Item",f[2],typeof b=="string"){if(f[2]=c.components&&c.components[b]||f[b],!f[2])throw new Error('Component "Item" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[2]=b);ge[2][W.key]=f[2].call(null,{props:_[2]},ge[1][W.key],i),ge[2][W.key][Symbol.for("slots")][0]?(s=ge[2][W.key][Symbol.for("slots")][0],C=ge[2][W.key],E=!0):s=ge[2][W.key][Symbol.for("children")][0]}}return X};let R=()=>{S[1](i.items,l,k[1])};return i[Symbol.for("effects")].push(R),v(R,["items"]),{elms:l,cleanup:()=>{C=null,i=null,s=null,k[1].length=0,S[1]=null,A[1]=null,_[2]=null,f[2]=null,R=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[],context:{}},state(){return{items:[]}},hooks:{ready(){const h=this.$setInterval(()=>{for(let s=0;s<=Math.floor(this.items.length/10);s++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(h)},2e3)}}}),Ob=Oe.Component("Ball",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=100,r[0].h=100,r[0].src="/assets/basketball.png",l[0].populate(r[0]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[],context:{}},hooks:{attach(){this.$emit("ballUpdate","Attached to render tree")},detach(){this.$emit("ballUpdate","Detached from render tree")},enter(){this.$emit("ballUpdate","Entered viewport")},exit(){this.$emit("ballUpdate","Exited viewport")}}}),ih=(h,s)=>Math.floor(Math.random()*(s-h+1)+h),xD=Oe.Component("Viewport",{components:{Ball:Ob},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),l[0].populate(r[0]),C===!0&&(E-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].size=32,r[1].x=960,r[1].y=540,r[1].mount=.5,r[1].content=i.status.join(`
`),r[1].lineheight=52,r[1].maxwidth=500,r[1].__textnode=!0,l[1].populate(r[1]),C===!0&&(E-=1),A[2]=c.components&&c.components.Ball||f.Ball,s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},C===!0?b:i),r[2].x={transition:{value:i.x,duration:1250}},r[2].y={transition:{value:i.y,duration:1250}},r[2].rotation={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},r[2].w=100,r[2].h=100,_[2]=[],typeof A[2]<"u")for(let U in A[2][Symbol.for("config")].props)delete r[2][A[2][Symbol.for("config")].props[U]],_[2].push(A[2][Symbol.for("config")].props[U]);if(l[2].populate(r[2]),C===!0&&(E-=1),s=l[2],S[3]={},I={transition:{value:i.x,duration:1250}},Array.isArray(I)===!0&&(I=x(I).slice(0)),S[3].x=I,I={transition:{value:i.y,duration:1250}},Array.isArray(I)===!0&&(I=x(I).slice(0)),S[3].y=I,I={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},Array.isArray(I)===!0&&(I=x(I).slice(0)),S[3].rotation=I,S[3].w=100,S[3].h=100,k=S[3].is||"Ball",f[3],typeof k=="string"){if(f[3]=c.components&&c.components[k]||f[k],!f[3])throw new Error('Component "Ball" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[3]=k);return l[3]=f[3].call(null,{props:S[3]},l[2],i),l[3][Symbol.for("slots")][0]?(s=l[3][Symbol.for("slots")][0],b=l[3],C=!0):s=l[3][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[2]=null,S[3]=null,f[3]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("content",s.status.join(`
`))},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[2]>"u"||skips[2].indexOf("x")===-1)&&i[2].set("x",{transition:{value:s.x,duration:1250}})},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[2]>"u"||skips[2].indexOf("y")===-1)&&i[2].set("y",{transition:{value:s.y,duration:1250}})},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[2]>"u"||skips[2].indexOf("rotation")===-1)&&i[2].set("rotation",{transition:{value:s.rotation,duration:1400,easing:"ease-in-out"}})},function(s,i,c,f,v,x){i[3][Symbol.for("props")].x={transition:{value:s.x,duration:1250}}},function(s,i,c,f,v,x){i[3][Symbol.for("props")].y={transition:{value:s.y,duration:1250}}},function(s,i,c,f,v,x){i[3][Symbol.for("props")].rotation={transition:{value:s.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state(){return{x:-400,y:-400,rotation:0,status:[],count:1}},hooks:{ready(){this.$listen("ballUpdate",h=>{this.status.unshift(`${this.count++} -  ${h}`),this.status.length=Math.min(this.status.length,8)}),this.rotation=ih(-90,90),this.x=1820/2,this.y=980/2,this.$setInterval(()=>{this.x=ih(-300,2220),this.y=ih(-300,1380),this.rotation=ih(-90,90)},2500)}}}),Za={code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=1920,r[0].h=1080,r[0].color="0xffffffff",r[0].effects=[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}],l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].show=i.up!==void 0,l[1].populate(r[1]),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].src="assets/arrow.png",r[2].w=100,r[2].h=44,r[2].x=960,r[2].y=40,r[2].mount="{x: 0.5}",l[2].populate(r[2]),s=l[1],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].content=i.up&&i.up.toUpperCase(),r[3].x=960,r[3].y=100,r[3].size=76,r[3].mount="{x: 0.5}",r[3].__textnode=!0,l[3].populate(r[3]),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].show=i.right!==void 0,l[4].populate(r[4]),s=l[4],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].src="assets/arrow.png",r[5].w=100,r[5].h=44,r[5].x=1900,r[5].y=540,r[5].mount="{x: 1, y: 0.5}",r[5].rotation=90,l[5].populate(r[5]),s=l[4],r[6]={},l[6]=this.element({parent:s||"root"},i),r[6].content=i.right&&i.right.toUpperCase(),r[6].x=1760,r[6].y=540,r[6].size=76,r[6].rotation=90,r[6].mount=.5,r[6].__textnode=!0,l[6].populate(r[6]),s=l[0],r[7]={},l[7]=this.element({parent:s||"root"},i),r[7].show=i.down!==void 0,l[7].populate(r[7]),s=l[7],r[8]={},l[8]=this.element({parent:s||"root"},i),r[8].src="assets/arrow.png",r[8].w=100,r[8].h=44,r[8].x=960,r[8].y=1040,r[8].mount="{x: 0.5, y: 1}",r[8].rotation=180,l[8].populate(r[8]),s=l[7],r[9]={},l[9]=this.element({parent:s||"root"},i),r[9].content=i.down&&i.down.toUpperCase(),r[9].x=960,r[9].y=980,r[9].size=76,r[9].mount="{x: 0.5, y: 1}",r[9].__textnode=!0,l[9].populate(r[9]),s=l[0],r[10]={},l[10]=this.element({parent:s||"root"},i),r[10].show=i.left!==void 0,l[10].populate(r[10]),s=l[10],r[11]={},l[11]=this.element({parent:s||"root"},i),r[11].src="assets/arrow.png",r[11].w=100,r[11].h=44,r[11].x=40,r[11].y=540,r[11].mount="{ y: 0.5}",r[11].rotation="-90",l[11].populate(r[11]),s=l[10],r[12]={},l[12]=this.element({parent:s||"root"},i),r[12].content=i.left&&i.left.toUpperCase(),r[12].x=180,r[12].y=540,r[12].size=76,r[12].mount=.5,r[12].rotation="-90",r[12].__textnode=!0,l[12].populate(r[12]),s=l[0],r[13]={},l[13]=this.element({parent:s||"root"},i),r[13].content=i.pageTitle,r[13].font="raleway",r[13].x=960,r[13].y=540,r[13].size=240,r[13].mount=.5,r[13].__textnode=!0,l[13].populate(r[13]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("effects",[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}])},function(s,i,c,f,v,x){i[1].set("show",s.up!==void 0)},function(s,i,c,f,v,x){i[3].set("content",s.up&&s.up.toUpperCase())},function(s,i,c,f,v,x){i[4].set("show",s.right!==void 0)},function(s,i,c,f,v,x){i[6].set("content",s.right&&s.right.toUpperCase())},function(s,i,c,f,v,x){i[7].set("show",s.down!==void 0)},function(s,i,c,f,v,x){i[9].set("content",s.down&&s.down.toUpperCase())},function(s,i,c,f,v,x){i[10].set("show",s.left!==void 0)},function(s,i,c,f,v,x){i[12].set("content",s.left&&s.left.toUpperCase())},function(s,i,c,f,v,x){i[13].set("content",s.pageTitle)}],context:{}},props:[{key:"page",cast:Object}],computed:{pageTitle(){return this.page&&this.page.title||this.title}},state(){return{title:"Start",up:"up",right:"right",down:"down",left:"left"}}},wD=Oe.Component("RouterHookPage",{...Za,state(){return{title:"Start",down:"episode flow",right:"movie flow"}},input:{right(){this.$router.to("/examples/router-hooks/movie")},down(){this.$router.to("/examples/router-hooks/episode/1")}}}),SD=Oe.Component("RouterHookMovie",{...Za,state(){return{title:"Movie",left:"Back",right:"Rating"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/rating")}}}),TD=Oe.Component("RouterHookRating",{...Za,state(){return{title:"Rating",left:"Back",right:"TO START"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/")}}}),CD=Oe.Component("RouterHookEpisode",{...Za,state(){return{title:"Episode",left:"Back",right:"NEXT EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to(`/examples/router-hooks/episode/${this.page.id+1}`,void 0,{inHistory:!1})}}}),bD=Oe.Component("RouterHookEpisode",{...Za,state(){return{title:`Episodes 
 overview`,right:"FIRST EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/episode/1",void 0,{inHistory:!1})}}}),Hr={slideInOutLeft:{before:{prop:"x",value:"100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"-100%",duration:400}},slideInOutRight:{before:{prop:"x",value:"-100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"100%",duration:400}},slideInOutUp:{before:{prop:"y",value:"100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"-100%",duration:400}},slideInOutDown:{before:{prop:"y",value:"-100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"100%",duration:400}}},kD=[{path:"/examples/router-hooks",component:wD,hooks:{async before(h,s){return s&&s.path==="examples/router-hooks/movie"&&(h.transition=Hr.slideInOutRight),s&&s.path==="examples/router-hooks/rating"&&(h.transition=Hr.slideInOutLeft),s&&s.path.indexOf("episode")>-1&&(h.transition=Hr.slideInOutDown),h}}},{path:"/examples/router-hooks/episode/:id",component:CD,hooks:{before(h,s){s&&s.path.indexOf("episode")>-1&&(h.transition=Hr.slideInOutLeft);const{id:i}=h.params;return i>5?"/examples/router-hooks/":(h.data.page={id:parseInt(i),title:`Episode ${i}`},h)}},transition:Hr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/episode",component:bD,transition:Hr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/movie",component:SD,hooks:{before(h,s){return s&&s.path==="examples/router-hooks"&&(h.transition=Hr.slideInOutLeft),s&&s.path==="examples/router-hooks/rating"&&(h.transition=Hr.slideInOutRight),h}}},{path:"/examples/router-hooks/rating",component:TD,transition:Hr.slideInOutLeft}],AD=Oe.Component("Resize",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].y=30,r[1].content="fit (Resize Mode) sample",r[1].maxwidth=1920,r[1].align="center",r[1].__textnode=!0,l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].x={transition:{value:i.pages.x1,duration:200}},r[2].y=90,l[2].populate(r[2]),s=l[2],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].x=100,r[3].content="Image dimensions: 2560 X 1440",r[3].__textnode=!0,l[3].populate(r[3]),s=l[2],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].x=100,r[4].y=80,r[4].content=i.titles.t1,r[4].__textnode=!0,l[4].populate(r[4]),s=l[2],r[5]={},l[5]=this.element({parent:s||"root"},i),r[5].y=150,r[5].x=100,l[5].populate(r[5]),s=l[5],r[6]={},l[6]=this.element({parent:s||"root"},i),r[6].w=i.w,r[6].h=i.w-300,r[6].src=i.img,r[6].fit="{type: 'cover', position: { y: 0 } }",l[6].populate(r[6]),s=l[5],r[7]={},l[7]=this.element({parent:s||"root"},i),r[7].w=i.w,r[7].h=i.w-300,r[7].src=i.img,r[7].fit="{ type: 'cover', position: { y: 0.5 } }",r[7].x=600,l[7].populate(r[7]),s=l[5],r[8]={},l[8]=this.element({parent:s||"root"},i),r[8].w=i.w,r[8].h=i.w-300,r[8].src=i.img,r[8].fit="{ type: 'cover', position: { y: 1 } }",r[8].x=1200,l[8].populate(r[8]),s=l[2],r[9]={},l[9]=this.element({parent:s||"root"},i),r[9].x=100,r[9].y=500,r[9].content=i.titles.t2,r[9].__textnode=!0,l[9].populate(r[9]),s=l[2],r[10]={},l[10]=this.element({parent:s||"root"},i),r[10].y=600,r[10].x=100,l[10].populate(r[10]),s=l[10],r[11]={},l[11]=this.element({parent:s||"root"},i),r[11].w=i.w,r[11].h=i.w-150,r[11].src=i.img,r[11].fit="{ type: 'cover', position: { x: 0 } }",l[11].populate(r[11]),s=l[10],r[12]={},l[12]=this.element({parent:s||"root"},i),r[12].w=i.w,r[12].h=i.w-150,r[12].src=i.img,r[12].fit="{ type: 'cover', position: { x: 0.5 } }",r[12].x=600,l[12].populate(r[12]),s=l[10],r[13]={},l[13]=this.element({parent:s||"root"},i),r[13].w=i.w,r[13].h=i.w-150,r[13].src=i.img,r[13].fit="{ type: 'cover', position: { x: 1 } }",r[13].x=1200,l[13].populate(r[13]),s=l[0],r[14]={},l[14]=this.element({parent:s||"root"},i),r[14].x={transition:{value:i.pages.x2,duration:200}},r[14].y=90,l[14].populate(r[14]),s=l[14],r[15]={},l[15]=this.element({parent:s||"root"},i),r[15].x=100,r[15].content="Image dimensions: 1440 X 2560",r[15].__textnode=!0,l[15].populate(r[15]),s=l[14],r[16]={},l[16]=this.element({parent:s||"root"},i),r[16].x=100,r[16].y=80,r[16].content=i.titles.t3,r[16].__textnode=!0,l[16].populate(r[16]),s=l[14],r[17]={},l[17]=this.element({parent:s||"root"},i),r[17].y=150,r[17].x=100,l[17].populate(r[17]),s=l[17],r[18]={},l[18]=this.element({parent:s||"root"},i),r[18].w=i.w,r[18].h=i.w-200,r[18].src=i.img1,r[18].fit="{ type: 'cover', position: { y: 0, x: 0 } }",l[18].populate(r[18]),s=l[17],r[19]={},l[19]=this.element({parent:s||"root"},i),r[19].w=i.w,r[19].h=i.w-200,r[19].src=i.img1,r[19].fit="{ type: 'cover', position: { y: 0.5, x: 0.5 } }",r[19].x=600,l[19].populate(r[19]),s=l[17],r[20]={},l[20]=this.element({parent:s||"root"},i),r[20].w=i.w,r[20].h=i.w-200,r[20].src=i.img1,r[20].fit="{ type: 'cover', position: { y: 1, x: 1 } }",r[20].x=1200,l[20].populate(r[20]),s=l[14],r[21]={},l[21]=this.element({parent:s||"root"},i),r[21].x=100,r[21].y=500,r[21].content=i.titles.t4,r[21].__textnode=!0,l[21].populate(r[21]),s=l[14],r[22]={},l[22]=this.element({parent:s||"root"},i),r[22].y=570,r[22].x=100,l[22].populate(r[22]),s=l[22],r[23]={},l[23]=this.element({parent:s||"root"},i),r[23].w=i.w-350,r[23].h=i.w-100,r[23].src=i.img1,r[23].fit="{ type: 'cover', position: { x: 0 } }",l[23].populate(r[23]),s=l[22],r[24]={},l[24]=this.element({parent:s||"root"},i),r[24].w=i.w-350,r[24].h=i.w-100,r[24].src=i.img1,r[24].fit="{ type: 'cover', position: { x: 0.25 } }",r[24].x=250,l[24].populate(r[24]),s=l[22],r[25]={},l[25]=this.element({parent:s||"root"},i),r[25].w=i.w-350,r[25].h=i.w-100,r[25].src=i.img1,r[25].fit="{ type: 'cover', position: { x: 0.5 } }",r[25].x=500,l[25].populate(r[25]),s=l[22],r[26]={},l[26]=this.element({parent:s||"root"},i),r[26].w=i.w-350,r[26].h=i.w-100,r[26].src=i.img1,r[26].fit="{ type: 'cover', position: { x: 0.75 } }",r[26].x=750,l[26].populate(r[26]),s=l[22],r[27]={},l[27]=this.element({parent:s||"root"},i),r[27].w=i.w-350,r[27].h=i.w-100,r[27].src=i.img1,r[27].fit="{ type: 'cover', position: { x: 1 } }",r[27].x=1e3,l[27].populate(r[27]),s=l[0],r[28]={},l[28]=this.element({parent:s||"root"},i),r[28].x={transition:{value:i.pages.x3,duration:200}},r[28].y=90,l[28].populate(r[28]),s=l[28],r[29]={},l[29]=this.element({parent:s||"root"},i),r[29].x=100,r[29].content="Image dimensions: 2560 X 1440",r[29].__textnode=!0,l[29].populate(r[29]),s=l[28],r[30]={},l[30]=this.element({parent:s||"root"},i),r[30].x=100,r[30].y=80,r[30].content=i.titles.t5,r[30].__textnode=!0,l[30].populate(r[30]),s=l[28],r[31]={},l[31]=this.element({parent:s||"root"},i),r[31].y=150,r[31].x=100,r[31].w=i.w+100,r[31].h=i.w-200,r[31].color="0x000000ff",l[31].populate(r[31]),s=l[31],r[32]={},l[32]=this.element({parent:s||"root"},i),r[32].w=i.w+100,r[32].h=i.w-200,r[32].src=i.img,r[32].fit="contain",l[32].populate(r[32]),s=l[28],r[33]={},l[33]=this.element({parent:s||"root"},i),r[33].x=100,r[33].y=500,r[33].content=i.titles.t6,r[33].__textnode=!0,l[33].populate(r[33]),s=l[28],r[34]={},l[34]=this.element({parent:s||"root"},i),r[34].y=550,r[34].x=100,r[34].w=i.w+100,r[34].h=i.w-100,r[34].color="0x000000ff",l[34].populate(r[34]),s=l[34],r[35]={},l[35]=this.element({parent:s||"root"},i),r[35].w=i.w+100,r[35].h=i.w-100,r[35].src=i.img,r[35].fit="contain",l[35].populate(r[35]),s=l[0],r[36]={},l[36]=this.element({parent:s||"root"},i),r[36].x=1700,r[36].y=20,r[36].content="Page "+i.activePage+"/"+i.totalPages,r[36].__textnode=!0,l[36].populate(r[36]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[2].set("x",{transition:{value:s.pages.x1,duration:200}})},function(s,i,c,f,v,x){i[3].set("content","Image dimensions: 2560 X 1440")},function(s,i,c,f,v,x){i[14].set("x",{transition:{value:s.pages.x2,duration:200}})},function(s,i,c,f,v,x){i[15].set("content","Image dimensions: 1440 X 2560")},function(s,i,c,f,v,x){i[28].set("x",{transition:{value:s.pages.x3,duration:200}})},function(s,i,c,f,v,x){i[29].set("content","Image dimensions: 2560 X 1440")},function(s,i,c,f,v,x){i[36].set("content","Page "+s.activePage+"/"+s.totalPages)}],context:{}},state(){return{activePage:1,pages:{x1:0,x2:1920,x3:1920*2},w:500,img:"assets/testscreen.png",img1:"assets/testscreen_rotated.png",titles:{t1:"Texture width > height - fit cover maximum width of node and position Y - 0, 0.5, 1",t2:"Texture width > height - fit:cover maximum width of node and position X - 0, 0.5, 1",t3:"Texture width < height - fit cover maximum width of node and positionY - 0, 0.5, 1",t4:"Texture width < height - fit cover maximum width of node and position X - 0, 0.25, 0.5, 0.75, 1",t5:"Texture width > height - fit contain maximum height of node",t6:"Texture width > height - fit contain maximum width of node"}}},computed:{totalPages(){return this.pages,Object.keys(this.pages).length}},input:{right(){if(this.activePage<this.totalPages){for(let h=1;h<=this.totalPages;h++)this.pages[`x${h}`]=this.pages[`x${h}`]-1920;this.activePage+=1}},left(){if(this.activePage>1){for(let h=this.totalPages;h>=1;h--)this.pages[`x${h}`]=this.pages[`x${h}`]+1920;this.activePage-=1}}}}),ED=Oe.Component("Flags",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];r[0]={},l[0]=this.element({parent:s||"root"},i),l[0].populate(r[0]),s=l[0],_[1]=[];let k,I;S[1]=(A=[],U,K)=>{const R=x(A),le=new Set;let ge=R.length;const pe={};for(k=pe.from||0,I=("to"in pe)?pe.to:R.length;ge--;)R[ge],ge<I&&ge>=k&&le.add(""+ge);let oe=K.length;for(;oe--;)if(le.has(K[oe])===!1){const te=K[oe];U[1][te]&&U[1][te].destroy(),U[1][te]=null,delete U[1][te],U[2][te]&&U[2][te].destroy(),U[2][te]=null,delete U[2][te],U[3][te]&&U[3][te].destroy(),U[3][te]=null,delete U[3][te]}K.length=0;const me=R.length,D=[];for(let te=0;te<me;te++){if(te<k||te>=I)continue;const ce=Object.create(i);s=U[0],ce.language=R[te],ce.index=te,ce.key=""+te,K.push(ce.key),s=U[0],U[1]===void 0&&(U[1]={}),r[1]={},U[1][ce.key]===void 0&&(U[1][ce.key]=this.element({parent:s||"root"},i)),r[1].x=ce.index*250,U[1][ce.key].nodeId===void 0&&U[1][ce.key].populate(r[1]),s=U[1][ce.key],U[2]===void 0&&(U[2]={}),r[2]={},U[2][ce.key]===void 0&&(U[2][ce.key]=this.element({parent:s||"root"},i)),r[2].src=ce.language.flag,r[2].w=150,r[2].h=150,r[2].alpha=ce.index===ce.activeIndex?1:.6,U[2][ce.key].nodeId===void 0&&U[2][ce.key].populate(r[2]),s=U[1][ce.key],U[3]===void 0&&(U[3]={}),r[3]={},U[3][ce.key]===void 0&&(U[3][ce.key]=this.element({parent:s||"root"},i)),r[3].content=ce.language.name,r[3].y=150,r[3].maxwidth=150,r[3].align="center",r[3].color=ce.index===ce.activeIndex?"0xffffffff":"0xaaaaaaff",r[3].__textnode=!0,U[3][ce.key].nodeId===void 0&&U[3][ce.key].populate(r[3])}return D};let b=()=>{S[1](i.languages,l,_[1])};i[Symbol.for("effects")].push(b),v(b,["languages"]);let C=()=>{i.activeIndex;for(let A=0;A<i.languages.length;A++){if(A<k||A>=I)continue;const U={};U.index=A,U.language=i.languages[A],U.key=A,l[2][U.key].set("alpha",U.index===i.activeIndex?1:.6)}};i[Symbol.for("effects")].push(C),v(C);let E=()=>{i.activeIndex;for(let A=0;A<i.languages.length;A++){if(A<k||A>=I)continue;const U={};U.index=A,U.language=i.languages[A],U.key=A,l[3][U.key].set("color",U.index===i.activeIndex?"0xffffffff":"0xaaaaaaff")}};return i[Symbol.for("effects")].push(E),v(E),{elms:l,cleanup:()=>{i=null,s=null,_[1].length=0,S[1]=null,b=null,C=null,E=null,l.length=0,f.length=0,r.length=0,S.length=0}}},effects:[],context:{}},props:["languages"],state(){return{activeIndex:0}},watch:{activeIndex(h){const s=this.languages[h];s&&s.code&&this.$language.set(s.code)}},input:{right(){this.activeIndex=Math.min(this.activeIndex+1,this.languages.length-1)},left(){this.activeIndex=Math.max(this.activeIndex-1,0)}}}),_3=Oe.Component("LanguagePlugin",{components:{Flags:ED},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b=!1,C=0,E=[];if(r[0]={},l[0]=this.element({parent:s||"root"},b===!0?I:i),l[0].populate(r[0]),b===!0&&(C-=1),E[1]=c.components&&c.components.Flags||f.Flags,s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},b===!0?I:i),r[1].languages=i.languages,r[1].ref="flags",r[1].x=500,r[1].y=150,_[1]=[],typeof E[1]<"u")for(let A in E[1][Symbol.for("config")].props)delete r[1][E[1][Symbol.for("config")].props[A]],_[1].push(E[1][Symbol.for("config")].props[A]);if(l[1].populate(r[1]),b===!0&&(C-=1),s=l[1],S[2]={},S[2].languages=i.languages,S[2].ref="flags",S[2].x=500,S[2].y=150,k=S[2].is||"Flags",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "Flags" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);return l[2]=f[2].call(null,{props:S[2]},l[1],i),l[2][Symbol.for("slots")][0]?(s=l[2][Symbol.for("slots")][0],I=l[2],b=!0):s=l[2][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},b===!0?I:i),r[3].x=960,r[3].y=540,r[3].mount=.5,r[3].content=i.$language.translate("hello"),r[3].size=80,r[3].__textnode=!0,l[3].populate(r[3]),b===!0&&(C-=1),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},b===!0?I:i),r[4].x=960,r[4].y=640,r[4].mount=.5,r[4].content=i.$language.translate("bye"),r[4].size=50,r[4].__textnode=!0,l[4].populate(r[4]),b===!0&&(C-=1),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},b===!0?I:i),r[5].x=960,r[5].y=720,r[5].mount=.5,r[5].content=i.$language.translate("replacement",{first:"John",last:"Doe",age:18}),r[5].size=36,r[5].__textnode=!0,l[5].populate(r[5]),b===!0&&(C-=1),s=l[0],r[6]={},l[6]=this.element({parent:s||"root"},b===!0?I:i),r[6].size=32,r[6].x=960,r[6].y=940,r[6].mount=.5,r[6].align="center",r[6].content="Current language: "+i.$language.language+`
 Language file: `+(i.loaded===!0?"Loaded":"loading ..."),r[6].__textnode=!0,l[6].populate(r[6]),b===!0&&(C-=1),{elms:l,cleanup:()=>{I=null,i=null,s=null,E[1]=null,S[2]=null,f[2]=null,E.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[3].set("content",s.$language.translate("hello"))},function(s,i,c,f,v,x){i[4].set("content",s.$language.translate("bye"))},function(s,i,c,f,v,x){i[5].set("content",s.$language.translate("replacement",{first:"John",last:"Doe",age:18}))},function(s,i,c,f,v,x){i[6].set("content","Current language: "+s.$language.language+`
 Language file: `+(s.loaded===!0?"Loaded":"loading ..."))}],context:{}},state(){return{loaded:!1,languages:[{flag:"/assets/flags/united-states.png",code:"en-US",name:"English"},{flag:"/assets/flags/netherlands.png",code:"nl-NL",name:"Dutch"},{flag:"/assets/flags/france.png",code:"fr-FR",name:"French"},{flag:"/assets/flags/germany.png",code:"de-DE",name:"German"}]}},hooks:{init(){this.$language.set("en-US"),setTimeout(()=>{this.$language.load("/assets/translations.json").then(()=>{this.loaded=!0})},2e3)},focus(){this.$select("flags").$focus()}}}),ID=Oe.Component("Box",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=430,r[0].h=180,r[0].effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}],r[0].color="{top: '0x667a97ff', bottom: '0x475569ff'}",l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].x=25,r[1].y=20,r[1].content=i.header,r[1].w=280,r[1].color="0x000000ff",r[1].contain="width",r[1].__textnode=!0,l[1].populate(r[1]),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].x=25,r[2].y=90,r[2].content=i.text,r[2].size=45,r[2].w=350,r[2].contain="width",r[2].align="center",r[2].__textnode=!0,l[2].populate(r[2]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}])},function(s,i,c,f,v,x){i[1].set("content",s.header)},function(s,i,c,f,v,x){i[2].set("content",s.text)}],context:{}},props:["header","text"]}),MD=Oe.Application({components:{Box:ID},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),r[0].w=1920,r[0].h=1080,l[0].populate(r[0]),C===!0&&(E-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].y=250,l[1].populate(r[1]),C===!0&&(E-=1),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},C===!0?b:i),r[2].content="KeyCode Finder",r[2].font="raleway",r[2].mount="{x: 0.5}",r[2].x=960,r[2].size=62,r[2].w=800,r[2].h=200,r[2].contain="width",r[2].__textnode=!0,l[2].populate(r[2]),C===!0&&(E-=1),s=l[1],r[3]={},l[3]=this.element({parent:s||"root"},C===!0?b:i),r[3].content="Press any key to get find the correct key code mapping",r[3].mount="{x: 0.5}",r[3].x=960,r[3].y=100,r[3].size=32,r[3].w=800,r[3].h=200,r[3].contain="width",r[3].__textnode=!0,l[3].populate(r[3]),C===!0&&(E-=1),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},C===!0?b:i),r[4].x=200,l[4].populate(r[4]),C===!0&&(E-=1),A[5]=c.components&&c.components.Box||f.Box,s=l[4],r[5]={},l[5]=this.element({parent:s||"root"},C===!0?b:i),r[5].y=600,r[5].header="Key",r[5].text=i.key,_[5]=[],typeof A[5]<"u")for(let U in A[5][Symbol.for("config")].props)delete r[5][A[5][Symbol.for("config")].props[U]],_[5].push(A[5][Symbol.for("config")].props[U]);if(l[5].populate(r[5]),C===!0&&(E-=1),s=l[5],S[6]={},S[6].y=600,S[6].header="Key",I=i.key,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[6].text=I,k=S[6].is||"Box",f[6],typeof k=="string"){if(f[6]=c.components&&c.components[k]||f[k],!f[6])throw new Error('Component "Box" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[6]=k);if(l[6]=f[6].call(null,{props:S[6]},l[5],i),l[6][Symbol.for("slots")][0]?(s=l[6][Symbol.for("slots")][0],b=l[6],C=!0):s=l[6][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[7]=c.components&&c.components.Box||f.Box,s=l[4],r[7]={},l[7]=this.element({parent:s||"root"},C===!0?b:i),r[7].x=500,r[7].y=600,r[7].header="Code",r[7].text=i.code,_[7]=[],typeof A[7]<"u")for(let U in A[7][Symbol.for("config")].props)delete r[7][A[7][Symbol.for("config")].props[U]],_[7].push(A[7][Symbol.for("config")].props[U]);if(l[7].populate(r[7]),C===!0&&(E-=1),s=l[7],S[8]={},S[8].x=500,S[8].y=600,S[8].header="Code",I=i.code,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[8].text=I,k=S[8].is||"Box",f[8],typeof k=="string"){if(f[8]=c.components&&c.components[k]||f[k],!f[8])throw new Error('Component "Box" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[8]=k);if(l[8]=f[8].call(null,{props:S[8]},l[7],i),l[8][Symbol.for("slots")][0]?(s=l[8][Symbol.for("slots")][0],b=l[8],C=!0):s=l[8][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[9]=c.components&&c.components.Box||f.Box,s=l[4],r[9]={},l[9]=this.element({parent:s||"root"},C===!0?b:i),r[9].x=1e3,r[9].y=600,r[9].header="keyCode",r[9].text=i.keyCode,_[9]=[],typeof A[9]<"u")for(let U in A[9][Symbol.for("config")].props)delete r[9][A[9][Symbol.for("config")].props[U]],_[9].push(A[9][Symbol.for("config")].props[U]);if(l[9].populate(r[9]),C===!0&&(E-=1),s=l[9],S[10]={},S[10].x=1e3,S[10].y=600,S[10].header="keyCode",I=i.keyCode,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[10].text=I,k=S[10].is||"Box",f[10],typeof k=="string"){if(f[10]=c.components&&c.components[k]||f[k],!f[10])throw new Error('Component "Box" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[10]=k);return l[10]=f[10].call(null,{props:S[10]},l[9],i),l[10][Symbol.for("slots")][0]?(s=l[10][Symbol.for("slots")][0],b=l[10],C=!0):s=l[10][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),s=l[0],r[11]={},l[11]=this.element({parent:s||"root"},C===!0?b:i),r[11].mount="{x: 1}",r[11].x=1860,r[11].y=1e3,r[11].size=30,r[11].content=i.backLabel,r[11].color=i.backPressed?"0xffffffff":"0x667a97ff",r[11].__textnode=!0,l[11].populate(r[11]),C===!0&&(E-=1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[5]=null,S[6]=null,f[6]=null,A[7]=null,S[8]=null,f[8]=null,A[9]=null,S[10]=null,f[10]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[5]>"u"||skips[5].indexOf("text")===-1)&&i[5].set("text",s.key)},function(s,i,c,f,v,x){i[6][Symbol.for("props")].text=s.key},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[7]>"u"||skips[7].indexOf("text")===-1)&&i[7].set("text",s.code)},function(s,i,c,f,v,x){i[8][Symbol.for("props")].text=s.code},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[9]>"u"||skips[9].indexOf("text")===-1)&&i[9].set("text",s.keyCode)},function(s,i,c,f,v,x){i[10][Symbol.for("props")].text=s.keyCode},function(s,i,c,f,v,x){i[11].set("content",s.backLabel)},function(s,i,c,f,v,x){i[11].set("color",s.backPressed?"0xffffffff":"0x667a97ff")}],context:{}},state(){return{backPressed:!1,key:"...",code:"...",keyCode:"..."}},computed:{backLabel(){return this.backPressed,this.backPressed?"Press back key again to navigate back":""}},methods:{updateLabels(h){this.key=h.key,this.code=h.code,this.keyCode=h.keyCode+""}},input:{any(h){this.backPressed=!1,this.updateLabels(h)},back(h){return this.backPressed===!0?this.$router.back():this.updateLabels(h),()=>{this.backPressed=!0}}}}),RD=Oe.Component("Accent",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=300,r[0].h=250,r[0].color=i.bColor,r[0].effects=[{type:"radius",props:{radius:8}}],l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].x=150,r[1].y=125,r[1].mount="{x:0.5, y:0.5}",r[1].content=i.lang,r[1].color="0xffffffff",r[1].font="lato-black",r[1].__textnode=!0,l[1].populate(r[1]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("color",s.bColor)},function(s,i,c,f,v,x){i[0].set("effects",[{type:"radius",props:{radius:8}}])},function(s,i,c,f,v,x){i[1].set("content",s.lang)}],context:{}},state(){return{bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["lang"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),_D=Oe.Component("Accents",{components:{Accent:RD},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E,A=!1,U=[];r[0]={},l[0]=this.element({parent:s||"root"},A===!0?E:i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},A===!0?E:i),r[1].x={transition:i.x},l[1].populate(r[1]),s=l[1],k[2]=[];let K,R;S[2]=(ge=[],pe,oe)=>{const me=x(ge),D=new Set;let te=me.length;const ce={};for(K=ce.from||0,R=("to"in ce)?ce.to:me.length;te--;){const W=me[te];te<R&&te>=K&&D.add(""+W.lang)}let ve=oe.length;for(;ve--;)if(D.has(oe[ve])===!1){const W=oe[ve];pe[2][W]&&pe[2][W].destroy(),pe[2][W]=null,delete pe[2][W],pe[3][W]&&pe[3][W].destroy(),pe[3][W]=null,delete pe[3][W]}oe.length=0;const X=me.length,ie=[];for(let W=0;W<X;W++){if(W<K||W>=R)continue;const G=Object.create(i);if(s=pe[1],G.item=me[W],G.index=W,G.key=""+G.item.lang,oe.push(G.key),U[2]=c.components&&c.components.Accent||f.Accent,pe[2]===void 0&&(pe[2]={}),r[2]={},pe[2][G.key]===void 0&&(pe[2][G.key]=this.element({parent:s||"root"},A===!0?E:i)),r[2].lang=G.item.lang,r[2].ref="accent"+G.index,r[2].x=G.index*400,I[2]=[],typeof U[2]<"u")for(let Ce in U[2][Symbol.for("config")].props)delete r[2][U[2][Symbol.for("config")].props[Ce]],I[2].push(U[2][Symbol.for("config")].props[Ce]);if(pe[2][G.key].nodeId===void 0&&pe[2][G.key].populate(r[2]),pe[3]===void 0&&(pe[3]={}),s=pe[2][G.key],_[3]={},pe[3][G.key]===void 0){if(_[3].lang=G.item.lang,C="accent"+G.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[3].ref=C,_[3].x=G.index*400,b=_[3].is||"Accent",f[3],typeof b=="string"){if(f[3]=c.components&&c.components[b]||f[b],!f[3])throw new Error('Component "Accent" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[3]=b);pe[3][G.key]=f[3].call(null,{props:_[3]},pe[2][G.key],i),pe[3][G.key][Symbol.for("slots")][0]?(s=pe[3][G.key][Symbol.for("slots")][0],E=pe[3][G.key],A=!0):s=pe[3][G.key][Symbol.for("children")][0]}let ue=()=>{(typeof I>"u"||typeof I[2]>"u"||I[2].indexOf("ref")===-1)&&pe[2][G.key].set("ref","accent"+G.index)};v(ue,null),ie.push(ue),i[Symbol.for("effects")].push(ue),pe[3][G.key][Symbol.for("props")].ref="accent"+G.index}return ie};let le=()=>{S[2](i.data,l,k[2])};return i[Symbol.for("effects")].push(le),v(le,["data"]),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},A===!0?E:i),r[4].content=i.activeAccent,r[4].font="lato-black",r[4].x=960,r[4].y=400,r[4].mount="{x:0.5}",r[4].letterspacing=10,r[4].size=40,r[4].__textnode=!0,l[4].populate(r[4]),{elms:l,cleanup:()=>{C=null,E=null,i=null,s=null,k[2].length=0,S[2]=null,U[2]=null,_[3]=null,f[3]=null,le=null,U.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("x",{transition:s.x})},function(s,i,c,f,v,x){i[4].set("content",s.activeAccent)}],context:{}},props:["data"],state(){return{x:160,activeIndex:0,activeAccent:""}},watch:{activeIndex(h){const s=this.$select(`accent${h}`);s&&s.$focus&&(s.$focus(),this.activeAccent=this.data[h].chars)}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.activeIndex<this.data.length-1&&this.move(1)},left(){this.activeIndex>0&&this.move(-1)}},methods:{move(h){const s=this.activeIndex+h;this.x=s>3?-(s-3)*400-160:160,this.activeIndex=s}}}),LD=Oe.Component("Characters",{components:{Accents:_D},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b=!1,C=0,E=[];if(r[0]={},l[0]=this.element({parent:s||"root"},b===!0?I:i),r[0].w=1920,l[0].populate(r[0]),b===!0&&(C-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},b===!0?I:i),r[1].x=960,r[1].y=50,r[1].mount="{x:0.5}",r[1].content="Alphabets",r[1].font="lato-black",r[1].size=60,r[1].__textnode=!0,l[1].populate(r[1]),b===!0&&(C-=1),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},b===!0?I:i),r[2].x=960,r[2].y=150,r[2].mount="{x:0.5}",r[2].content=i.alphabets,r[2].font="lato-black",r[2].size=40,r[2].letterspacing=10,r[2].__textnode=!0,l[2].populate(r[2]),b===!0&&(C-=1),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},b===!0?I:i),r[3].x=960,r[3].y=290,r[3].mount="{x:0.5}",r[3].content="Accents",r[3].font="lato-black",r[3].size=60,r[3].__textnode=!0,l[3].populate(r[3]),b===!0&&(C-=1),E[4]=c.components&&c.components.Accents||f.Accents,s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},b===!0?I:i),r[4].data=i.accents,r[4].y=400,r[4].ref="accents",_[4]=[],typeof E[4]<"u")for(let A in E[4][Symbol.for("config")].props)delete r[4][E[4][Symbol.for("config")].props[A]],_[4].push(E[4][Symbol.for("config")].props[A]);if(l[4].populate(r[4]),b===!0&&(C-=1),s=l[4],S[5]={},S[5].data=i.accents,S[5].y=400,S[5].ref="accents",k=S[5].is||"Accents",f[5],typeof k=="string"){if(f[5]=c.components&&c.components[k]||f[k],!f[5])throw new Error('Component "Accents" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[5]=k);return l[5]=f[5].call(null,{props:S[5]},l[4],i),l[5][Symbol.for("slots")][0]?(s=l[5][Symbol.for("slots")][0],I=l[5],b=!0):s=l[5][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),s=l[0],r[6]={},l[6]=this.element({parent:s||"root"},b===!0?I:i),r[6].w=950,r[6].h=40,r[6].color="0x000000ff",r[6].effects=[{type:"radius",props:{radius:10}}],r[6].y=1e3,r[6].placement="center",l[6].populate(r[6]),b===!0&&(C-=1),s=l[6],r[7]={},l[7]=this.element({parent:s||"root"},b===!0?I:i),r[7].content="The character ? represents a character that is not supported by the Lato-Black font",r[7].size=25,r[7].x=475,r[7].y=20,r[7].mount="{x:0.5, y:0.5}",r[7].__textnode=!0,l[7].populate(r[7]),b===!0&&(C-=1),{elms:l,cleanup:()=>{I=null,i=null,s=null,E[4]=null,S[5]=null,f[5]=null,E.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[6].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state(){return{alphabets:"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",accents:[{lang:"Dutch",chars:"éèëïüáóĳĲ"},{lang:"French",chars:"éèêëàâîïôùûç"},{lang:"Spanish",chars:"áéíóúñü"},{lang:"Turkish",chars:"ÇçĞğİiÖöÜüŞş"}]}},hooks:{focus(){const h=this.$select("accents");h&&h.$focus&&h.$focus()}}}),PD=Oe.Component("Layout",{components:{Ball:Ob},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E=!1,A=0,U=[];r[0]={},l[0]=this.element({parent:s||"root"},E===!0?C:i),r[0].w=1920,r[0].h=1080,r[0].color="0xc4b5fdff",l[0].populate(r[0]),E===!0&&(A-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},E===!0?C:i),r[1].x=40,r[1].y=40,l[1].populate(r[1]),E===!0&&(A-=1),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},E===!0?C:i),r[2].color="0x222222ff",r[2].content="Static horizontal Layout",r[2].__textnode=!0,l[2].populate(r[2]),E===!0&&(A-=1),s=l[1],r[3]={},l[3]=this.element({parent:s||"root"},E===!0?C:i),r[3].y=50,r[3].gap=10,r[3].__layout=!0,l[3].populate(r[3]),E===!0&&(A-=1),s=l[3],r[4]={},l[4]=this.element({parent:s||"root"},E===!0?C:i),r[4].w=50,r[4].h=100,r[4].color="0xeff6ffff",l[4].populate(r[4]),E===!0&&(A-=1),s=l[3],r[5]={},l[5]=this.element({parent:s||"root"},E===!0?C:i),r[5].w=60,r[5].h=100,r[5].color="0xbfdbfeff",l[5].populate(r[5]),E===!0&&(A-=1),s=l[3],r[6]={},l[6]=this.element({parent:s||"root"},E===!0?C:i),r[6].w=70,r[6].h=100,r[6].color="0x60a5faff",l[6].populate(r[6]),E===!0&&(A-=1),s=l[3],r[7]={},l[7]=this.element({parent:s||"root"},E===!0?C:i),r[7].w=80,r[7].h=100,r[7].color="0x2563ebff",l[7].populate(r[7]),E===!0&&(A-=1),s=l[3],r[8]={},l[8]=this.element({parent:s||"root"},E===!0?C:i),r[8].w=90,r[8].h=100,r[8].color="0x1e40afff",l[8].populate(r[8]),E===!0&&(A-=1),s=l[0],r[9]={},l[9]=this.element({parent:s||"root"},E===!0?C:i),r[9].x=40,r[9].y=220,l[9].populate(r[9]),E===!0&&(A-=1),s=l[9],r[10]={},l[10]=this.element({parent:s||"root"},E===!0?C:i),r[10].color="0x222222ff",r[10].content="Static vertical Layout",r[10].__textnode=!0,l[10].populate(r[10]),E===!0&&(A-=1),s=l[9],r[11]={},l[11]=this.element({parent:s||"root"},E===!0?C:i),r[11].y=50,r[11].gap=10,r[11].direction="vertical",r[11].__layout=!0,l[11].populate(r[11]),E===!0&&(A-=1),s=l[11],r[12]={},l[12]=this.element({parent:s||"root"},E===!0?C:i),r[12].w=100,r[12].h=50,r[12].color="0xeff6ffff",l[12].populate(r[12]),E===!0&&(A-=1),s=l[11],r[13]={},l[13]=this.element({parent:s||"root"},E===!0?C:i),r[13].w=100,r[13].h=60,r[13].color="0xbfdbfeff",l[13].populate(r[13]),E===!0&&(A-=1),s=l[11],r[14]={},l[14]=this.element({parent:s||"root"},E===!0?C:i),r[14].w=100,r[14].h=70,r[14].color="0x60a5faff",l[14].populate(r[14]),E===!0&&(A-=1),s=l[11],r[15]={},l[15]=this.element({parent:s||"root"},E===!0?C:i),r[15].w=100,r[15].h=80,r[15].color="0x2563ebff",l[15].populate(r[15]),E===!0&&(A-=1),s=l[11],r[16]={},l[16]=this.element({parent:s||"root"},E===!0?C:i),r[16].w=100,r[16].h=90,r[16].color="0x1e40afff",l[16].populate(r[16]),E===!0&&(A-=1),s=l[0],r[17]={},l[17]=this.element({parent:s||"root"},E===!0?C:i),r[17].x=40,r[17].y=700,l[17].populate(r[17]),E===!0&&(A-=1),s=l[17],r[18]={},l[18]=this.element({parent:s||"root"},E===!0?C:i),r[18].color="0x222222ff",r[18].content="Nested Layouts",r[18].__textnode=!0,l[18].populate(r[18]),E===!0&&(A-=1),s=l[17],r[19]={},l[19]=this.element({parent:s||"root"},E===!0?C:i),r[19].y=50,r[19].gap=10,r[19].direction="horizontal",r[19].__layout=!0,l[19].populate(r[19]),E===!0&&(A-=1),s=l[19],r[20]={},l[20]=this.element({parent:s||"root"},E===!0?C:i),r[20].w=100,r[20].h=50,r[20].color="0xeff6ffff",l[20].populate(r[20]),E===!0&&(A-=1),s=l[19],r[21]={},l[21]=this.element({parent:s||"root"},E===!0?C:i),r[21].w=100,r[21].h=60,r[21].color="0xbfdbfeff",l[21].populate(r[21]),E===!0&&(A-=1),s=l[19],r[22]={},l[22]=this.element({parent:s||"root"},E===!0?C:i),r[22].direction="vertical",r[22].gap=10,r[22].__layout=!0,l[22].populate(r[22]),E===!0&&(A-=1),s=l[22],r[23]={},l[23]=this.element({parent:s||"root"},E===!0?C:i),r[23].w=100,r[23].h=70,r[23].color="0x60a5faff",l[23].populate(r[23]),E===!0&&(A-=1),s=l[22],r[24]={},l[24]=this.element({parent:s||"root"},E===!0?C:i),r[24].w=100,r[24].h=70,r[24].color="0x60a5faff",l[24].populate(r[24]),E===!0&&(A-=1),s=l[22],r[25]={},l[25]=this.element({parent:s||"root"},E===!0?C:i),r[25].w=100,r[25].h=70,r[25].color="0x60a5faff",l[25].populate(r[25]),E===!0&&(A-=1),s=l[22],r[26]={},l[26]=this.element({parent:s||"root"},E===!0?C:i),r[26].gap=50,r[26].__layout=!0,l[26].populate(r[26]),E===!0&&(A-=1),s=l[26],r[27]={},l[27]=this.element({parent:s||"root"},E===!0?C:i),r[27].w=50,r[27].h=50,r[27].color="0x2563ebff",l[27].populate(r[27]),E===!0&&(A-=1),s=l[26],r[28]={},l[28]=this.element({parent:s||"root"},E===!0?C:i),r[28].w=50,r[28].h=50,r[28].color="0x2563ebff",l[28].populate(r[28]),E===!0&&(A-=1),s=l[26],r[29]={},l[29]=this.element({parent:s||"root"},E===!0?C:i),r[29].w=50,r[29].h=50,r[29].color="0x2563ebff",l[29].populate(r[29]),E===!0&&(A-=1),s=l[19],r[30]={},l[30]=this.element({parent:s||"root"},E===!0?C:i),r[30].w=100,r[30].h=80,r[30].color="0x2563ebff",l[30].populate(r[30]),E===!0&&(A-=1),s=l[19],r[31]={},l[31]=this.element({parent:s||"root"},E===!0?C:i),r[31].w=100,r[31].h=90,r[31].color="0x1e40afff",l[31].populate(r[31]),E===!0&&(A-=1),s=l[0],r[32]={},l[32]=this.element({parent:s||"root"},E===!0?C:i),r[32].x=800,r[32].y=40,l[32].populate(r[32]),E===!0&&(A-=1),s=l[32],r[33]={},l[33]=this.element({parent:s||"root"},E===!0?C:i),r[33].color="0x222222ff",r[33].content="Layout with Text",r[33].__textnode=!0,l[33].populate(r[33]),E===!0&&(A-=1),s=l[32],r[34]={},l[34]=this.element({parent:s||"root"},E===!0?C:i),r[34].y=50,r[34].gap=20,r[34].__layout=!0,l[34].populate(r[34]),E===!0&&(A-=1),s=l[34],r[35]={},l[35]=this.element({parent:s||"root"},E===!0?C:i),r[35].w=3,r[35].h=32,r[35].color="0x60a5faff",l[35].populate(r[35]),E===!0&&(A-=1),s=l[34],r[36]={},l[36]=this.element({parent:s||"root"},E===!0?C:i),r[36].color="0x1e40afff",r[36].content="Hello",r[36].__textnode=!0,l[36].populate(r[36]),E===!0&&(A-=1),s=l[34],r[37]={},l[37]=this.element({parent:s||"root"},E===!0?C:i),r[37].w=3,r[37].h=32,r[37].color="0x60a5faff",l[37].populate(r[37]),E===!0&&(A-=1),s=l[34],r[38]={},l[38]=this.element({parent:s||"root"},E===!0?C:i),r[38].content="World",r[38].color="0x1e40afff",r[38].__textnode=!0,l[38].populate(r[38]),E===!0&&(A-=1),s=l[34],r[39]={},l[39]=this.element({parent:s||"root"},E===!0?C:i),r[39].w=3,r[39].h=32,r[39].color="0x60a5faff",l[39].populate(r[39]),E===!0&&(A-=1),s=l[0],r[40]={},l[40]=this.element({parent:s||"root"},E===!0?C:i),r[40].x=800,r[40].y=210,l[40].populate(r[40]),E===!0&&(A-=1),s=l[40],r[41]={},l[41]=this.element({parent:s||"root"},E===!0?C:i),r[41].color="0x222222ff",r[41].content="Dynamic dimensions Layout",r[41].__textnode=!0,l[41].populate(r[41]),E===!0&&(A-=1),s=l[40],r[42]={},l[42]=this.element({parent:s||"root"},E===!0?C:i),r[42].y=50,r[42].gap=20,r[42]["@updated"]=i.dynamicLayoutUpdated&&i.dynamicLayoutUpdated.bind(i),r[42].__layout=!0,l[42].populate(r[42]),E===!0&&(A-=1),s=l[42],r[43]={},l[43]=this.element({parent:s||"root"},E===!0?C:i),r[43].w=i.w*.5,r[43].h=60,r[43].color="0xeff6ffff",l[43].populate(r[43]),E===!0&&(A-=1),s=l[42],r[44]={},l[44]=this.element({parent:s||"root"},E===!0?C:i),r[44].w=i.w*.6,r[44].h=60,r[44].color="0xbfdbfeff",l[44].populate(r[44]),E===!0&&(A-=1),s=l[42],r[45]={},l[45]=this.element({parent:s||"root"},E===!0?C:i),r[45].w=i.w*.7,r[45].h=60,r[45].color="0x60a5faff",l[45].populate(r[45]),E===!0&&(A-=1),s=l[42],r[46]={},l[46]=this.element({parent:s||"root"},E===!0?C:i),r[46].w=i.w*.8,r[46].h=60,r[46].color="0x2563ebff",l[46].populate(r[46]),E===!0&&(A-=1),s=l[42],r[47]={},l[47]=this.element({parent:s||"root"},E===!0?C:i),r[47].w=i.w*.9,r[47].h=60,r[47].color="0x1e40afff",l[47].populate(r[47]),E===!0&&(A-=1),s=l[0],r[48]={},l[48]=this.element({parent:s||"root"},E===!0?C:i),r[48].x=800,r[48].y=400,l[48].populate(r[48]),E===!0&&(A-=1),s=l[48],r[49]={},l[49]=this.element({parent:s||"root"},E===!0?C:i),r[49].color="0x222222ff",r[49].content="For loop Layout",r[49].__textnode=!0,l[49].populate(r[49]),E===!0&&(A-=1),s=l[48],r[50]={},l[50]=this.element({parent:s||"root"},E===!0?C:i),r[50].y=50,r[50].gap=20,r[50].__layout=!0,l[50].populate(r[50]),E===!0&&(A-=1),s=l[50],k[51]=[];let K,R;S[51]=(W=[],G,ue)=>{const Ce=x(W),Fe=new Set;let Ze=Ce.length;const je={};for(K=je.from||0,R=("to"in je)?je.to:Ce.length;Ze--;)Ce[Ze],Ze<R&&Ze>=K&&Fe.add(""+Ze);let Ae=ue.length;for(;Ae--;)if(Fe.has(ue[Ae])===!1){const De=ue[Ae];G[51][De]&&G[51][De].destroy(),G[51][De]=null,delete G[51][De]}ue.length=0;const $=Ce.length,ft=[];for(let De=0;De<$;De++){if(De<K||De>=R)continue;const qe=Object.create(i);s=G[50],qe.color=Ce[De],qe.undefined=De,qe.key=""+De,ue.push(qe.key),s=G[50],G[51]===void 0&&(G[51]={}),r[51]={},G[51][qe.key]===void 0&&(G[51][qe.key]=this.element({parent:s||"root"},E===!0?C:i)),r[51].w=60,r[51].h=60,r[51].color=qe.color,G[51][qe.key].nodeId===void 0&&(G[51][qe.key].populate(r[51]),E===!0&&(A-=1))}return ft};let le=()=>{S[51](i.colors,l,k[51])};i[Symbol.for("effects")].push(le),v(le,["colors"]);let ge=()=>{i.color;for(let W=0;W<i.colors.length;W++){if(W<K||W>=R)continue;const G={};G.undefined=W,G.color=i.colors[W],G.key=W,l[51][G.key].set("color",G.color)}};i[Symbol.for("effects")].push(ge),v(ge),s=l[0],r[52]={},l[52]=this.element({parent:s||"root"},E===!0?C:i),r[52].x=800,r[52].y=600,l[52].populate(r[52]),E===!0&&(A-=1),s=l[52],r[53]={},l[53]=this.element({parent:s||"root"},E===!0?C:i),r[53].color="0x222222ff",r[53].content="Layout with transitions",r[53].__textnode=!0,l[53].populate(r[53]),E===!0&&(A-=1),s=l[52],r[54]={},l[54]=this.element({parent:s||"root"},E===!0?C:i),r[54].direction="horizontal",r[54].gap=20,r[54].y=60,r[54].__layout=!0,l[54].populate(r[54]),E===!0&&(A-=1),s=l[54],k[55]=[];let pe,oe;S[55]=(W=[],G,ue)=>{const Ce=x(W),Fe=new Set;let Ze=Ce.length;const je={};for(pe=je.from||0,oe=("to"in je)?je.to:Ce.length;Ze--;)Ce[Ze],Ze<oe&&Ze>=pe&&Fe.add(""+Ze);let Ae=ue.length;for(;Ae--;)if(Fe.has(ue[Ae])===!1){const De=ue[Ae];G[55][De]&&G[55][De].destroy(),G[55][De]=null,delete G[55][De],G[56][De]&&G[56][De].destroy(),G[56][De]=null,delete G[56][De],G[57][De]&&G[57][De].destroy(),G[57][De]=null,delete G[57][De],G[58][De]&&G[58][De].destroy(),G[58][De]=null,delete G[58][De],G[59][De]&&G[59][De].destroy(),G[59][De]=null,delete G[59][De],G[60][De]&&G[60][De].destroy(),G[60][De]=null,delete G[60][De]}ue.length=0;const $=Ce.length,ft=[];for(let De=0;De<$;De++){if(De<pe||De>=oe)continue;const qe=Object.create(i);s=G[54],qe.color=Ce[De],qe.undefined=De,qe.key=""+De,ue.push(qe.key),s=G[54],G[55]===void 0&&(G[55]={}),r[55]={},G[55][qe.key]===void 0&&(G[55][qe.key]=this.element({parent:s||"root"},E===!0?C:i)),r[55].h=100,r[55].w={transition:{value:qe.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},r[55].color=qe.color,G[55][qe.key].nodeId===void 0&&(G[55][qe.key].populate(r[55]),E===!0&&(A-=1)),s=G[55][qe.key],G[56]===void 0&&(G[56]={}),r[56]={},G[56][qe.key]===void 0&&(G[56][qe.key]=this.element({parent:s||"root"},E===!0?C:i)),r[56].gap=10,r[56].x=10,r[56].y=35,r[56].__layout=!0,G[56][qe.key].nodeId===void 0&&(G[56][qe.key].populate(r[56]),E===!0&&(A-=1)),s=G[56][qe.key],G[57]===void 0&&(G[57]={}),r[57]={},G[57][qe.key]===void 0&&(G[57][qe.key]=this.element({parent:s||"root"},E===!0?C:i)),r[57].h=20,r[57].w={transition:{value:qe.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},r[57].color="0xffffffff",G[57][qe.key].nodeId===void 0&&(G[57][qe.key].populate(r[57]),E===!0&&(A-=1)),s=G[56][qe.key],G[58]===void 0&&(G[58]={}),r[58]={},G[58][qe.key]===void 0&&(G[58][qe.key]=this.element({parent:s||"root"},E===!0?C:i)),r[58].h=20,r[58].w={transition:{value:qe.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},r[58].color="0xccccccff",G[58][qe.key].nodeId===void 0&&(G[58][qe.key].populate(r[58]),E===!0&&(A-=1)),s=G[56][qe.key],G[59]===void 0&&(G[59]={}),r[59]={},G[59][qe.key]===void 0&&(G[59][qe.key]=this.element({parent:s||"root"},E===!0?C:i)),r[59].h=20,r[59].w={transition:{value:qe.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},r[59].color="0x333333ff",G[59][qe.key].nodeId===void 0&&(G[59][qe.key].populate(r[59]),E===!0&&(A-=1)),s=G[56][qe.key],G[60]===void 0&&(G[60]={}),r[60]={},G[60][qe.key]===void 0&&(G[60][qe.key]=this.element({parent:s||"root"},E===!0?C:i)),r[60].h=20,r[60].w={transition:{value:qe.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},r[60].color="0x000000ff",G[60][qe.key].nodeId===void 0&&(G[60][qe.key].populate(r[60]),E===!0&&(A-=1))}return ft};let me=()=>{S[55](i.colors,l,k[55])};i[Symbol.for("effects")].push(me),v(me,["colors"]);let D=()=>{i.w3;for(let W=0;W<i.colors.length;W++){if(W<pe||W>=oe)continue;const G={};G.undefined=W,G.color=i.colors[W],G.key=W,l[55][G.key].set("w",{transition:{value:i.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};i[Symbol.for("effects")].push(D),v(D);let te=()=>{i.color;for(let W=0;W<i.colors.length;W++){if(W<pe||W>=oe)continue;const G={};G.undefined=W,G.color=i.colors[W],G.key=W,l[55][G.key].set("color",G.color)}};i[Symbol.for("effects")].push(te),v(te);let ce=()=>{i.w2;for(let W=0;W<i.colors.length;W++){if(W<pe||W>=oe)continue;const G={};G.undefined=W,G.color=i.colors[W],G.key=W,l[57][G.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};i[Symbol.for("effects")].push(ce),v(ce);let ve=()=>{i.w2;for(let W=0;W<i.colors.length;W++){if(W<pe||W>=oe)continue;const G={};G.undefined=W,G.color=i.colors[W],G.key=W,l[58][G.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};i[Symbol.for("effects")].push(ve),v(ve);let X=()=>{i.w2;for(let W=0;W<i.colors.length;W++){if(W<pe||W>=oe)continue;const G={};G.undefined=W,G.color=i.colors[W],G.key=W,l[59][G.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};i[Symbol.for("effects")].push(X),v(X);let ie=()=>{i.w2;for(let W=0;W<i.colors.length;W++){if(W<pe||W>=oe)continue;const G={};G.undefined=W,G.color=i.colors[W],G.key=W,l[60][G.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};if(i[Symbol.for("effects")].push(ie),v(ie),s=l[0],r[61]={},l[61]=this.element({parent:s||"root"},E===!0?C:i),r[61].x=800,r[61].y=840,l[61].populate(r[61]),E===!0&&(A-=1),s=l[61],r[62]={},l[62]=this.element({parent:s||"root"},E===!0?C:i),r[62].color="0x222222ff",r[62].content="Layout with padding",r[62].__textnode=!0,l[62].populate(r[62]),E===!0&&(A-=1),s=l[61],r[63]={},l[63]=this.element({parent:s||"root"},E===!0?C:i),r[63].direction="horizontal",r[63].gap=20,r[63].y=60,r[63].padding=20,r[63].color="0xffffffff",r[63].__layout=!0,l[63].populate(r[63]),E===!0&&(A-=1),s=l[63],r[64]={},l[64]=this.element({parent:s||"root"},E===!0?C:i),r[64].w=40,r[64].h=40,r[64].color="0xbfdbfeff",l[64].populate(r[64]),E===!0&&(A-=1),s=l[63],r[65]={},l[65]=this.element({parent:s||"root"},E===!0?C:i),r[65].w=40,r[65].h=40,r[65].color="0x60a5faff",l[65].populate(r[65]),E===!0&&(A-=1),s=l[63],r[66]={},l[66]=this.element({parent:s||"root"},E===!0?C:i),r[66].w=40,r[66].h=40,r[66].color="0x2563ebff",l[66].populate(r[66]),E===!0&&(A-=1),s=l[61],r[67]={},l[67]=this.element({parent:s||"root"},E===!0?C:i),r[67].direction="horizontal",r[67].gap=20,r[67].y=60,r[67].x=240,r[67].padding={top:40,y:10,left:40,x:10},r[67].color="0xffffffff",r[67].__layout=!0,l[67].populate(r[67]),E===!0&&(A-=1),s=l[67],r[68]={},l[68]=this.element({parent:s||"root"},E===!0?C:i),r[68].w=40,r[68].h=40,r[68].color="0xbfdbfeff",l[68].populate(r[68]),E===!0&&(A-=1),s=l[67],r[69]={},l[69]=this.element({parent:s||"root"},E===!0?C:i),r[69].w=40,r[69].h=40,r[69].color="0x60a5faff",l[69].populate(r[69]),E===!0&&(A-=1),s=l[67],r[70]={},l[70]=this.element({parent:s||"root"},E===!0?C:i),r[70].w=40,r[70].h=40,r[70].color="0x2563ebff",l[70].populate(r[70]),E===!0&&(A-=1),s=l[61],r[71]={},l[71]=this.element({parent:s||"root"},E===!0?C:i),r[71].direction="vertical",r[71].gap=20,r[71].y=60,r[71].x=500,r[71].padding=20,r[71].color="0xffffffff",r[71].__layout=!0,l[71].populate(r[71]),E===!0&&(A-=1),s=l[71],r[72]={},l[72]=this.element({parent:s||"root"},E===!0?C:i),r[72].w=40,r[72].h=20,r[72].color="0xbfdbfeff",l[72].populate(r[72]),E===!0&&(A-=1),s=l[71],r[73]={},l[73]=this.element({parent:s||"root"},E===!0?C:i),r[73].w=40,r[73].h=20,r[73].color="0x60a5faff",l[73].populate(r[73]),E===!0&&(A-=1),s=l[71],r[74]={},l[74]=this.element({parent:s||"root"},E===!0?C:i),r[74].w=40,r[74].h=20,r[74].color="0x2563ebff",l[74].populate(r[74]),E===!0&&(A-=1),s=l[61],r[75]={},l[75]=this.element({parent:s||"root"},E===!0?C:i),r[75].direction="vertical",r[75].gap=20,r[75].y=60,r[75].x=640,r[75].padding={top:40,y:10,left:40,x:10},r[75].color="0xffffffff",r[75].__layout=!0,l[75].populate(r[75]),E===!0&&(A-=1),s=l[75],r[76]={},l[76]=this.element({parent:s||"root"},E===!0?C:i),r[76].w=40,r[76].h=20,r[76].color="0xbfdbfeff",l[76].populate(r[76]),E===!0&&(A-=1),s=l[75],r[77]={},l[77]=this.element({parent:s||"root"},E===!0?C:i),r[77].w=40,r[77].h=20,r[77].color="0x60a5faff",l[77].populate(r[77]),E===!0&&(A-=1),s=l[75],r[78]={},l[78]=this.element({parent:s||"root"},E===!0?C:i),r[78].w=40,r[78].h=20,r[78].color="0x2563ebff",l[78].populate(r[78]),E===!0&&(A-=1),s=l[0],r[79]={},l[79]=this.element({parent:s||"root"},E===!0?C:i),r[79].x=1300,r[79].y=210,l[79].populate(r[79]),E===!0&&(A-=1),s=l[79],r[80]={},l[80]=this.element({parent:s||"root"},E===!0?C:i),r[80].color="0x222222ff",r[80].content="Layout with a Component",r[80].__textnode=!0,l[80].populate(r[80]),E===!0&&(A-=1),s=l[79],r[81]={},l[81]=this.element({parent:s||"root"},E===!0?C:i),r[81].y=50,r[81].gap=40,r[81].__layout=!0,l[81].populate(r[81]),E===!0&&(A-=1),s=l[81],r[82]={},l[82]=this.element({parent:s||"root"},E===!0?C:i),r[82].w=100,r[82].h=100,r[82].color="0xff0000ff",l[82].populate(r[82]),E===!0&&(A-=1),s=l[81],r[83]={},l[83]=this.element({parent:s||"root"},E===!0?C:i),r[83].w=i.w,r[83].h=100,r[83].color="0xff0000ff",l[83].populate(r[83]),E===!0&&(A-=1),U[84]=c.components&&c.components.Ball||f.Ball,s=l[81],r[84]={},l[84]=this.element({parent:s||"root"},E===!0?C:i),r[84].y=500,r[84].w=100,I[84]=[],typeof U[84]<"u")for(let W in U[84][Symbol.for("config")].props)delete r[84][U[84][Symbol.for("config")].props[W]],I[84].push(U[84][Symbol.for("config")].props[W]);if(l[84].populate(r[84]),E===!0&&(A-=1),s=l[84],_[85]={},_[85].y=500,_[85].w=100,b=_[85].is||"Ball",f[85],typeof b=="string"){if(f[85]=c.components&&c.components[b]||f[b],!f[85])throw new Error('Component "Ball" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[85]=b);return l[85]=f[85].call(null,{props:_[85]},l[84],i),l[85][Symbol.for("slots")][0]?(s=l[85][Symbol.for("slots")][0],C=l[85],E=!0):s=l[85][Symbol.for("children")][0],E===!0&&A===0&&(E=!1),s=l[81],r[86]={},l[86]=this.element({parent:s||"root"},E===!0?C:i),r[86].w=100,r[86].h=100,r[86].color="0xff0000ff",l[86].populate(r[86]),E===!0&&(A-=1),{elms:l,cleanup:()=>{C=null,i=null,s=null,k[51].length=0,S[51]=null,le=null,ge=null,k[55].length=0,S[55]=null,me=null,D=null,te=null,ce=null,ve=null,X=null,ie=null,U[84]=null,_[85]=null,f[85]=null,U.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[function(s,i,c,f,v,x){i[43].set("w",s.w*.5)},function(s,i,c,f,v,x){i[44].set("w",s.w*.6)},function(s,i,c,f,v,x){i[45].set("w",s.w*.7)},function(s,i,c,f,v,x){i[46].set("w",s.w*.8)},function(s,i,c,f,v,x){i[47].set("w",s.w*.9)},function(s,i,c,f,v,x){i[67].set("padding",{top:40,y:10,left:40,x:10})},function(s,i,c,f,v,x){i[75].set("padding",{top:40,y:10,left:40,x:10})},function(s,i,c,f,v,x){i[83].set("w",s.w)}],context:{}},state(){return{w:50,colors:["green","red","blue","yellow"],w3:150,w2:20}},hooks:{ready(){this.$setInterval(()=>{this.w=this.w===100?50:100,this.w2=this.w2===20?40:20,this.w3=this.w3===150?250:150},2e3),this.$setTimeout(()=>{this.colors.push("purple")},4e3)}},methods:{dynamicLayoutUpdated(h){this.$log.info("Dynamic layout updated",h.w,h.h)}}}),Jm=typeof window<"u"?window:{};let Nb;const DD=h=>{Nb=h};let Dy;const Cy=[],ja={};let Ih,ms;Jm.__firebolt&&Jm.__firebolt.testHarness&&(ms=Jm.__firebolt.testHarness);function Ub(h){console.debug("Sending message to transport: "+h);let s=JSON.parse(h);if(Array.isArray(s)){s.forEach(f=>Ub(JSON.stringify(f)));return}let[i,c]=s.method.split(".");ms&&ms.onSend&&ms.onSend(i,c,s.params,s.id),c.match(/^on[A-Z]/)&&(s.params.listen?ja[s.id]=i.toLowerCase()+"."+c[2].toLowerCase()+c.substr(3):Object.keys(ja).forEach(f=>{ja[f]===i.toLowerCase()+"."+c[2].toLowerCase()+c.substr(3)&&delete ja[f]})),Dy?Bb(s):Cy.push(s)}function Bb(h){let s;try{s=UD(h.method,h.params)}catch{setTimeout(()=>Ih(JSON.stringify({jsonrpc:"2.0",error:{code:-32602,message:"Invalid params (this is a mock error from the mock transport layer)"},id:h.id})))}setTimeout(()=>Ih(JSON.stringify({jsonrpc:"2.0",result:s,id:h.id})))}function OD(h){Ih=h,ms&&typeof ms.initialize=="function"&&ms.initialize({emit:Fb,listen:function(...s){Nb(...s)}})}function Fb(h,s,i){const c=Object.entries(ja).find(([f,v])=>v.toLowerCase()===h.toLowerCase()+"."+s.toLowerCase());if(c){let f=JSON.stringify({jsonrpc:"2.0",id:parseInt(c[0]),result:i});Ih(f)}}function ND(h={},s){const i=s.split(".");let c=h;for(let f=0;f<i.length;f++)c=(Object.entries(c).find(([v,x])=>v.toLowerCase()===i[f].toLowerCase())||[null,{}])[1];return c}function UD(h,s){let i=ND(Dy,h);return h.match(/^[a-zA-Z]+\.on[A-Za-z]+$/)&&(i={event:h,listening:!0}),typeof i=="function"?s==null?i():i(s):i}function BD(h){Dy=h,Cy.forEach(s=>Bb(s)),Cy.length=0}const Mh={send:Ub,receive:OD,event:Fb};function jb(h,s,i){const c=h?Object.values(h).length:0;return c===i&&s===void 0?"getter":c===i&&typeof s=="function"||c===0&&typeof s=="function"?"subscriber":c===i&&s!==void 0?"setter":null}const Qm={};function FD(h,s,i,c,f,v){const x=jb(i,c,f),m=f?"."+Object.keys(i).filter(r=>r!=="value").map(r=>i[r]).join("."):"",l=`${h}.${s}${m}`;if(x==="getter")return Qm.hasOwnProperty(l)?Qm[l]:v;if(x!=="subscriber"){if(x==="setter")return Qm[l]=c,Mh.event(h,`${s}Changed`,{value:c}),null}}const Jt={mock:FD},$b={closedCaptions:{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]},closedCaptionsSettings:function(h){return Jt.mock("Accessibility","closedCaptionsSettings",h,void 0,0,{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]})},highContrastUI:function(h){return Jt.mock("Accessibility","highContrastUI",h,void 0,0,!0)},voiceGuidance:{enabled:!0,navigationHints:!0,rate:1},voiceGuidanceSettings:function(h){return Jt.mock("Accessibility","voiceGuidanceSettings",h,void 0,0,{enabled:!0,navigationHints:!0,rate:1})},audioDescriptionSettings:function(h){return Jt.mock("Accessibility","audioDescriptionSettings",h,void 0,0,{enabled:!0})}},jD={id:function(h){return Jt.mock("Account","id",h,void 0,0,"123")},uid:function(h){return Jt.mock("Account","uid",h,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")}},$D={config:{adServerUrl:"https://demo.v.fwmrm.net/ad/p/1",adServerUrlTemplate:"https://demo.v.fwmrm.net/ad/p/1?flag=+sltp+exvt+slcb+emcr+amcb+aeti&prof=12345:caf_allinone_profile &nw=12345&mode=live&vdur=123&caid=a110523018&asnw=372464&csid=gmott_ios_tablet_watch_live_ESPNU&ssnw=372464&vip=198.205.92.1&resp=vmap1&metr=1031&pvrn=12345&vprn=12345&vcid=1X0Ce7L3xRWlTeNhc7br8Q%3D%3D",adNetworkId:"519178",adProfileId:"12345:caf_allinone_profile",adSiteSectionId:"caf_allinone_profile_section",adOptOut:!0,privacyData:"ew0KICAicGR0IjogImdkcDp2MSIsDQogICJ1c19wcml2YWN5IjogIjEtTi0iLA0KICAibG10IjogIjEiIA0KfQ0K",ifaValue:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa:"ewogICJ2YWx1ZSI6ICIwMTIzNDU2Ny04OUFCLUNERUYtR0gwMS0yMzQ1Njc4OUFCQ0QiLAogICJpZmFfdHlwZSI6ICJzc3BpZCIsCiAgImxtdCI6ICIwIgp9Cg==",appName:"FutureToday",appBundleId:"FutureToday.comcast",distributorAppId:"1001",deviceAdAttributes:"ewogICJib0F0dHJpYnV0ZXNGb3JSZXZTaGFyZUlkIjogIjEyMzQiCn0=",coppa:0,authenticationEntity:"60f72475281cfba3852413bd53e957f6"},policy:function(h){return Jt.mock("Advertising","policy",h,void 0,0,{skipRestriction:"adsUnwatched",limitAdTracking:!1})},advertisingId:{ifa:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa_type:"sspid",lmt:"0"},deviceAttributes:{},appBundleId:"app.operator"},zD={token:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",expires:"2022-04-23T18:25:43.511Z",type:"platform"},device:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",session:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",root:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},VD={supported:!0,available:!0,permitted:!0,granted:!0,info:[{capability:"xrn:firebolt:capability:device:model",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:input:keyboard",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:protocol:bluetoothle",supported:!1,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unsupported"]},{capability:"xrn:firebolt:capability:token:device",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:token:platform",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unavailable"]},{capability:"xrn:firebolt:capability:protocol:moca",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["disabled","unavailable"]},{capability:"xrn:firebolt:capability:wifi:scan",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unpermitted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:null},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:locality",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["grantDenied","ungranted"]}],request:[{capability:"xrn:firebolt:capability:commerce:purchase",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}}]},zb={id:function(h){return Jt.mock("Device","id",h,void 0,0,"123")},distributor:function(h){return Jt.mock("Device","distributor",h,void 0,0,"Company")},platform:function(h){return Jt.mock("Device","platform",h,void 0,0,"WPE")},uid:function(h){return Jt.mock("Device","uid",h,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")},type:function(h){return Jt.mock("Device","type",h,void 0,0,"STB")},model:function(h){return Jt.mock("Device","model",h,void 0,0,"xi6")},sku:function(h){return Jt.mock("Device","sku",h,void 0,0,"AX061AEI")},make:function(h){return Jt.mock("Device","make",h,void 0,0,"Arris")},version:function(h){return Jt.mock("Device","version",h,void 0,0,{sdk:{major:0,minor:8,patch:0,readable:"Firebolt JS SDK v0.8.0"},api:{major:0,minor:8,patch:0,readable:"Firebolt API v0.8.0"},firmware:{major:1,minor:2,patch:3,readable:"Device Firmware v1.2.3"},os:{major:0,minor:1,patch:0,readable:"Firebolt OS v0.1.0"},debug:"Non-parsable build info for error logging only."})},hdcp:function(h){return Jt.mock("Device","hdcp",h,void 0,0,{"hdcp1.4":!0,"hdcp2.2":!0})},hdr:function(h){return Jt.mock("Device","hdr",h,void 0,0,{hdr10:!0,hdr10Plus:!0,dolbyVision:!0,hlg:!0})},audio:function(h){return Jt.mock("Device","audio",h,void 0,0,{stereo:!0,"dolbyDigital5.1":!0,"dolbyDigital5.1+":!0,dolbyAtmos:!0})},screenResolution:function(h){return Jt.mock("Device","screenResolution",h,void 0,0,[1920,1080])},videoResolution:function(h){return Jt.mock("Device","videoResolution",h,void 0,0,[1920,1080])},name:function(h){return Jt.mock("Device","name",h,void 0,0,"Living Room")},network:function(h){return Jt.mock("Device","network",h,void 0,0,{state:"connected",type:"wifi"})}},HD={policy:function(h){return Jt.mock("Discovery","policy",h,void 0,0,{enableRecommendations:!0,shareWatchHistory:!0,rememberWatchedPrograms:!0})},entityInfo:!0,purchasedContent:!0,watched:!0,watchNext:!0,entitlements:!0,contentAccess:null,clearContentAccess:null,launch:!0,signIn:!0,signOut:!0,userInterest:null,userInterestResponse:null,userInterestError:null},GD={email:"user@domain.com",password:"abc123",standard:"Living Room"};let Iu={state:"inactive",previous:"initializing"},L3={state:"foreground",previous:"inactive"},P3={state:"unloading",previous:"inactive"};const Ra=h=>{Mh.event("Lifecycle",h.state,h)},Rh=typeof window<"u"?window:{},_a=Rh.__firebolt?!!Rh.__firebolt.automation:!1,XD={ready:function(){Iu.previous="initializing",setTimeout(()=>Ra(Iu),_a?1:500),L3.previous="inactive",setTimeout(()=>Ra(L3),_a?2:1e3)},close:function(h){let s=h.reason;if(s==="remoteButton")Iu.previous="foreground",setTimeout(()=>Ra(Iu),_a?1:500);else if(["userExit","error"].includes(s))Iu.previous="foreground",P3.previous="inactive",setTimeout(()=>Ra(Iu),_a?1:500),setTimeout(()=>Ra(P3),_a?2:1e3);else throw"Invalid close reason"},finished:function(){Rh.location&&(Rh.location.href="about:blank")}},Vb={locality:function(h){return Jt.mock("Localization","locality",h,void 0,0,"Philadelphia")},postalCode:function(h){return Jt.mock("Localization","postalCode",h,void 0,0,"19103")},countryCode:function(h){return Jt.mock("Localization","countryCode",h,void 0,0,"US")},language:function(h){return Jt.mock("Localization","language",h,void 0,0,"en")},preferredAudioLanguages:function(h){return Jt.mock("Localization","preferredAudioLanguages",h,void 0,0,["spa","eng"])},locale:function(h){return Jt.mock("Localization","locale",h,void 0,0,"en-US")},latlon:[39.9549,75.1699],additionalInfo:{}},WD={ready:!0,signIn:!0,signOut:!0,startContent:!0,stopContent:!0,page:!0,action:!0,error:!0,mediaLoadStart:!0,mediaPlay:!0,mediaPlaying:!0,mediaPause:!0,mediaWaiting:!0,mediaProgress:!0,mediaSeeking:!0,mediaSeeked:!0,mediaRateChange:!0,mediaRenditionChange:!0,mediaEnded:!0,appInfo:null},KD={initialization:{lmt:0,us_privacy:"1-Y-",discovery:{navigateTo:{action:"entity",data:{entityId:"abc",entityType:"program",programType:"movie"},context:{source:"voice"}}}}},YD={approveContentRating:!1,approvePurchase:!1,flags:{userExperience:"1000"}},qD={protocols:{"dial1.7":!0},device:"device-id",friendlyName:function(h){return Jt.mock("SecondScreen","friendlyName",h,void 0,0,"Living Room")}},JD={get:"VGhpcyBub3QgYSByZWFsIHRva2VuLgo=",set:null,remove:null,clear:null},QD={localization:Vb,device:zb,accessibility:$b};class ZD{constructor(){this._callback=null,this._queue=[]}send(s){this._queue.push(s)}receive(s){this._callback=s}flush(s){s.receive(this._callback),this._queue.forEach(i=>s.send(i))}}const hs={},Zi={},e9=(h,s)=>{hs.app=h,hs.platform={logLevel:"WARN",...s},hs.user={}},t9=(h,s)=>{Zi[h]&&Zi[h].forEach(i=>i(s))},n9=(h={},s)=>{const i=s.split(".");for(let c=0;c<i.length;c++)h=h[i[c]]=h[i[c]]!==void 0?h[i[c]]:{};return typeof h=="object"?Object.keys(h).length?h:void 0:h},Zm={get(h,s,i=void 0){const c=n9(hs[h],s);return c!==void 0?c:i},has(h,s){return!!this.get(h,s)},set(h,s){hs.user[h]=s,t9(h,s)},subscribe(h,s){Zi[h]=Zi[h]||[],Zi[h].push(s)},unsubscribe(h,s){if(s){const i=Zi[h]&&Zi[h].findIndex(c=>c===s);i>-1&&Zi[h].splice(i,1)}else h in Zi&&(Zi[h]=[])},clearSubscribers(){for(const h of Object.getOwnPropertyNames(Zi))delete Zi[h]},setLogLevel(h){hs.platform.logLevel=h},getLogLevel(){return hs.platform.logLevel}},xr=typeof window<"u"?window:{};class _h{constructor(s){this.bridge=s}send(s){this.bridge.JSMessageChanged(s,()=>{})}receive(s){xr.$badger=xr.$badger||{};const i=xr.$badger.callback?xr.$badger.callback.bind(xr.$badger):null,c=xr.$badger.event?xr.$badger.event.bind(xr.$badger):null;xr.$badger.callback=(f,v,x)=>{x.jsonrpc?s(JSON.stringify(x)):i&&i(f,v,x)},xr.$badger.event=(f,v)=>{v.jsonrpc?s(JSON.stringify(v)):c&&c(f,v)}}static isLegacy(s){return _h.isXREProxy(s)||s.send===void 0&&s.JSMessageChanged}static isXREProxy(s){return s.proxyObjectTest!==void 0}}const i9=100;class r9{constructor(s){this._endpoint=s,this._ws=null,this._connected=!1,this._queue=[],this._callbacks=[]}send(s){this._connect(),this._connected?this._ws.send(s):this._queue.length<i9&&this._queue.push(s)}receive(s){s&&(this._connect(),this._callbacks.push(s))}_notifyCallbacks(s){for(let i=0;i<this._callbacks.length;i++)setTimeout(()=>this._callbacks[i](s),1)}_connect(){this._ws||(this._ws=new WebSocket(this._endpoint,["jsonrpc"]),this._ws.addEventListener("message",s=>{this._notifyCallbacks(s.data)}),this._ws.addEventListener("error",s=>{}),this._ws.addEventListener("close",s=>{this._ws=null,this._connected=!1}),this._ws.addEventListener("open",s=>{this._connected=!0;for(let i=0;i<this._queue.length;i++)this._ws.send(this._queue[i]);this._queue=[]}))}}function o9(h,s){if(!s||!s.methods)return h;const{methods:i}=s,c=JSON.parse(JSON.stringify(h));return Object.keys(i).forEach(f=>{const v=i[f],x=v["x-method"],[m,l]=x.split("."),r={};r[v["x-this-param"]]=c,c[f]=(...S)=>{for(var _=0;_<S.length;_++)r[v["x-additional-params"][_]]=S[_];return Zt.send(m.toLowerCase(),l,r)}}),c}const D3={transform:o9},s9="com.comcast.BridgeObject_1";let ey=null;const u9=h=>h&&typeof h.event=="string"&&typeof h.listening=="boolean",vn=typeof window<"u"?window:{};class Zt{constructor(){this._promises=[],this._transport=null,this._id=1,this._eventEmitters=[],this._eventIds=[],this._queue=new ZD,this._deprecated={},this.isMock=!1}static addEventEmitter(s){Zt.get()._eventEmitters.push(s)}static registerDeprecatedMethod(s,i,c){Zt.get()._deprecated[s.toLowerCase()+"."+i.toLowerCase()]={alternative:c||""}}_endpoint(){return vn.__firebolt&&vn.__firebolt.endpoint?vn.__firebolt.endpoint:null}constructTransportLayer(){let s;const i=this._endpoint();return i&&(i.startsWith("ws://")||i.startsWith("wss://"))?(s=new r9(i),s.receive(this.receiveHandler.bind(this))):typeof vn.ServiceManager<"u"&&vn.ServiceManager&&vn.ServiceManager.version?(s=this._queue,vn.ServiceManager.getServiceForJavaScript(s9,c=>{_h.isLegacy(c)?s=new _h(c):s=c,this.setTransportLayer(s)})):(this.isMock=!0,s=Mh,s.receive(this.receiveHandler.bind(this))),s}setTransportLayer(s){this._transport=s,this._queue.flush(s)}static send(s,i,c,f){return Zt.get()._send(s,i,c,f)}static listen(s,i,c,f){return Zt.get()._sendAndGetId(s,i,c,f)}_send(s,i,c,f){return Array.isArray(s)&&!i&&!c?this._batch(s):this._sendAndGetId(s,i,c,f).promise}_sendAndGetId(s,i,c,f){const{promise:v,json:x,id:m}=this._processRequest(s,i,c,f),l=JSON.stringify(x);return Zm.getLogLevel()==="DEBUG"&&console.debug("Sending message to transport: "+l),this._transport.send(l),{id:m,promise:v}}_batch(s){const i=[],c=[];s.forEach(({module:v,method:x,params:m,transforms:l})=>{const r=this._processRequest(v,x,m,l);i.push({promise:r.promise,id:r.id}),c.push(r.json)});const f=JSON.stringify(c);return Zm.getLogLevel()==="DEBUG"&&console.debug("Sending message to transport: "+f),this._transport.send(f),i}_processRequest(s,i,c,f){const v=this._addPromiseToQueue(s,i,c,f),x=this._createRequestJSON(s,i,c),m={promise:v,json:x,id:this._id};return this._id++,m}_createRequestJSON(s,i,c){return{jsonrpc:"2.0",method:s.toLowerCase()+"."+i,params:c,id:this._id}}_addPromiseToQueue(s,i,c,f){return new Promise((v,x)=>{this._promises[this._id]={},this._promises[this._id].promise=this,this._promises[this._id].resolve=v,this._promises[this._id].reject=x,this._promises[this._id].transforms=f;const m=this._deprecated[s.toLowerCase()+"."+i.toLowerCase()];m&&console.warn(`WARNING: ${s}.${i}() is deprecated. `+m.alternative),i.match(/^on[A-Z]/)&&(c.listen?this._eventIds.push(this._id):this._eventIds=this._eventIds.filter(l=>l!==this._id))})}static get(){if(vn.__firebolt=vn.__firebolt||{},vn.__firebolt.transport==null&&ey==null){const s=new Zt;s.init(),s.isMock?ey=s:(vn.__firebolt=vn.__firebolt||{},vn.__firebolt.transport=s),vn.__firebolt.setTransportLayer=s.setTransportLayer.bind(s)}return vn.__firebolt.transport?vn.__firebolt.transport:ey}receiveHandler(s){Zm.getLogLevel()==="DEBUG"&&console.debug("Received message from transport: "+s);const i=JSON.parse(s),c=this._promises[i.id];if(c){if(i.error)c.reject(i.error);else{let f=i.result;c.transforms&&(Array.isArray(i.result)?f=f.map(v=>D3.transform(v,c.transforms)):f=D3.transform(f,c.transforms)),c.resolve(f)}delete this._promises[i.id]}this._eventIds.includes(i.id)&&!u9(i.result)&&this._eventEmitters.forEach(f=>{f(i.id,i.result)})}init(){e9({},{log:!0}),this._queue.receive(this.receiveHandler.bind(this)),vn.__firebolt&&(vn.__firebolt.mockTransportLayer===!0?(this.isMock=!0,this.setTransportLayer(Mh)):vn.__firebolt.getTransportLayer&&this.setTransportLayer(vn.__firebolt.getTransportLayer())),this._transport==null&&(this._transport=this.constructTransportLayer())}}vn.__firebolt=vn.__firebolt||{};vn.__firebolt.setTransportLayer=h=>{Zt.get().setTransportLayer(h)};let Mu=0;const Kt={internal:{},external:{},get:h=>Object.assign(Object.assign({},Kt.internal[h]),Kt.external[h]),set:(h,s,i)=>{Kt.external[h]=Kt.external[h]||{},Kt.external[h][s]=i},setInternal:(h,s,i)=>{Kt.internal[h]=Kt.internal[h]||{},Kt.internal[h][s]=i},find:h=>{let s;return[Kt.internal,Kt.external].find(i=>{if(s=Object.keys(i).find(c=>i[c][h]),s)return!0}),s},remove:h=>{[Kt.internal,Kt.external].forEach(s=>{Object.keys(s).forEach(i=>{s[i]&&s[i][h]&&(delete s[i][h],Object.values(s[i]).length===0&&delete s[i])})})},removeKey:(h,s=!1)=>{s&&Kt.internal[h]&&delete Kt.internal[h],Kt.external[h]&&delete Kt.external[h]},keys:()=>Array.from(new Set(Object.keys(Kt.internal).concat(Object.keys(Kt.external)))),count:h=>Object.values(Kt.get(h)).length},Lh={},mh=[],Hb={},yh={};let O3=!1;const Gb=(h,s)=>{N3(Kt.internal[Lh[h]],[s]),N3(Kt.external[Lh[h]],[s])},Ro=(h,s)=>{Hb[h.toLowerCase()]=s.concat()},Uh=(h,s,i)=>{yh[h.toLowerCase()]=yh[h.toLowerCase()]||{},yh[h.toLowerCase()][s]=i.concat()},N3=(h,s)=>{h&&Object.keys(h).forEach(i=>{let c=h[i];mh.indexOf(parseInt(i))>=0&&(mh.splice(mh.indexOf(parseInt(i)),1),delete h[i]),c.apply(null,s)})},Xb=function(h,s,i,c,f,v=!1){if(f9(),typeof i!="function")return Promise.reject("No valid callback function provided.");{if(h==="*")return Promise.reject("No valid module name provided");const x=s==="*",m=x?Hb[h]:[s],l=[],r=Object.values(c).length>0,S=Object.keys(c).sort().map(C=>C+"="+JSON.stringify(c[C])).join("&");Mu++,f&&mh.push(Mu),m.forEach(C=>{const E=h+"."+C+(r?`.${S}`:"");if(Object.values(Kt.get(E)).length===0){const U=Object.assign({listen:!0},c),{id:K,promise:R}=Zt.listen(h,"on"+C[0].toUpperCase()+C.substring(1),U);Lh[K]=E,l.push(R)}const A=v?Kt.setInternal:Kt.set;x?A(E,""+Mu,U=>i(C,U)):A(E,""+Mu,i)});let _,k,I=new Promise((C,E)=>{_=C,k=E});const b=Mu;return l.length?l.reduce((C,E)=>C.then(()=>E).then(A=>{_(b)}).catch(A=>{s==="*"?_(b):(vh(b,s,c),k(A))}),Promise.resolve()):_(Mu),I}},Wb=function(...h){const s=h.pop(),[i,c,f]=Kb(...h);return[i,c,s,f]},Kb=function(...h){const s=(h.shift()||"*").toLowerCase(),i=h.shift()||"*",c={};for(let f=0;h.length;f++)c[yh[s][i][f]]=h.shift();return[s,i,c]},l9=function(...h){const[s,i,c,f]=Wb(...h);return Xb(s,i,c,f,!0)},Yb=function(...h){const[s,i,c,f]=Wb(...h);return Xb(s,i,c,f,!1)},a9=function(...h){if(h&&h.length&&typeof h[0]=="number")return vh(h[0]);if(h&&h.length&&typeof h[1]=="number")return vh(h[1]);{const[s,i,c]=Kb(...h);return vh(s,i,c)}},rh=(h,s)=>{const[i,c]=h.split(".").slice(0,2),f=Object.assign({listen:!1},s);Zt.send(i,"on"+c[0].toUpperCase()+c.substr(1),f)},vh=function(h=!1,s=!1,i){if(s==="*"&&(s=!1),typeof h=="number"){const c=h.toString(),f=Kt.find(c);return f?(Kt.remove(c),Kt.count(f)===0&&rh(f),!0):!1}else if(!h&&!s)Kt.keys().forEach(c=>{Kt.removeKey(c),rh(c)});else if(!s)Kt.keys().forEach(c=>{c.indexOf(h.toLowerCase())===0&&(Kt.removeKey(c),rh(c))});else{const c=Object.values(i).length>0,f=Object.keys(i).sort().map(x=>x+"="+JSON.stringify(i[x])).join("&"),v=h+"."+s+(c?`.${f}`:"");Kt.removeKey(v),rh(v,i)}},f9=()=>{O3||(Zt.addEventEmitter(Gb),DD(Yb),O3=!0)},vs={listen:Yb,once:l9,clear:a9,broadcast(h,s){Gb(Object.entries(Lh).find(([i,c])=>c==="app."+h)[0],s)}};function c9(h,s,i,c=void 0,f,v,x){const m=Object.values(i).length,l=jb(i,c,x);if(l==="getter")return Zt.send(h,s,i);if(l==="subscriber"){if(f)throw new Error("Cannot subscribe to an immutable property");return vs.listen(h,s+"Changed",...Object.values(i),c)}else if(l==="setter"){if(f)throw new Error("Cannot set a value to an immutable property");if(v)throw new Error("Cannot set a value to a readonly property");return Zt.send(h,"set"+s[0].toUpperCase()+s.substring(1),Object.assign({value:c},i))}else throw m<x?new Error("Cannot get a value without all required context parameters."):new Error("Property accessed with unexpected number of parameters.")}const xn={prop:c9};Ro("Accessibility",["audioDescriptionSettingsChanged","closedCaptionsSettingsChanged","highContrastUIChanged","voiceGuidanceSettingsChanged"]);Zt.registerDeprecatedMethod("Accessibility","closedCaptions","Use Accessibility.closedCaptionsSettings() instead.");Zt.registerDeprecatedMethod("Accessibility","voiceGuidance","Use Accessibility.voiceGuidanceSettings() instead.");function d9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Account","id",s,h,!0,!0,0)}function h9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Account","uid",s,h,!0,!0,0)}const p9={id:d9,uid:h9};Ro("Advertising",["policyChanged"]);Zt.registerDeprecatedMethod("Authentication","token","Use Authentication module has individual methods for each token type. instead.");Ro("Capabilities",["available","granted","revoked","unavailable"]);Uh("Capabilities","available",["capability"]);Uh("Capabilities","granted",["role","capability"]);Uh("Capabilities","revoked",["role","capability"]);Uh("Capabilities","unavailable",["capability"]);Ro("Device",["audioChanged","deviceNameChanged","hdcpChanged","hdrChanged","nameChanged","networkChanged","screenResolutionChanged","videoResolutionChanged"]);Zt.registerDeprecatedMethod("Device","screenResolution","Use Use non-Firebolt APIs specific to your platform, e.g. W3C APIs instead.");Zt.registerDeprecatedMethod("Device","onDeviceNameChanged","Use Device.name() instead.");Zt.registerDeprecatedMethod("Device","onScreenResolutionChanged","Use screenResolution instead.");function g9(){return new Promise((h,s)=>{Zt.send("device","version").then(i=>{i=i||{},i.sdk=i.sdk||{},i.sdk.major=parseInt("1"),i.sdk.minor=parseInt("5"),i.sdk.patch=parseInt("0"),i.sdk.readable="Firebolt Core SDK 1.5.0",h(i)}).catch(i=>{s(i)})})}function m9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","audio",s,h,!1,!0,0)}function y9(...h){return vs.clear("Device",...h)}function v9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","distributor",s,h,!0,!0,0)}function x9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","hdcp",s,h,!1,!0,0)}function w9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","hdr",s,h,!1,!0,0)}function S9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","id",s,h,!0,!0,0)}function T9(...h){return vs.listen("Device",...h)}function C9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","make",s,h,!0,!0,0)}function b9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","model",s,h,!0,!0,0)}function k9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","name",s,h,!1,!0,0)}function A9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","network",s,h,!1,!0,0)}function E9(...h){return vs.once("Device",...h)}function I9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","platform",s,h,!0,!0,0)}function M9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","screenResolution",s,h,!1,!0,0)}function R9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","sku",s,h,!0,!0,0)}function _9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","type",s,h,!0,!0,0)}function L9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","uid",s,h,!0,!0,0)}function P9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Device","videoResolution",s,h,!1,!0,0)}const Fu={Events:{DEVICE_NAME_CHANGED:"deviceNameChanged",NAME_CHANGED:"nameChanged",HDCP_CHANGED:"hdcpChanged",HDR_CHANGED:"hdrChanged",AUDIO_CHANGED:"audioChanged",SCREEN_RESOLUTION_CHANGED:"screenResolutionChanged",VIDEO_RESOLUTION_CHANGED:"videoResolutionChanged",NETWORK_CHANGED:"networkChanged"},NetworkState:{CONNECTED:"connected",DISCONNECTED:"disconnected"},NetworkType:{WIFI:"wifi",ETHERNET:"ethernet",HYBRID:"hybrid"},version:g9,audio:m9,clear:y9,distributor:v9,hdcp:x9,hdr:w9,id:S9,listen:T9,make:C9,model:b9,name:k9,network:A9,once:E9,platform:I9,screenResolution:M9,sku:R9,type:_9,uid:L9,videoResolution:P9},U3={},D9=(h,s,i)=>{if(U3[h])throw`Capability ${h} has multiple provider interfaces registered.`;i.forEach(c=>c.name=`${s}.${c.name}`),U3[h]=i.concat()};Ro("Discovery",["navigateTo","policyChanged"]);D9("xrn:firebolt:capability:discovery:interest","Discovery",[{name:"userInterest",focus:!1,response:!0,parameters:!0}]);Zt.registerDeprecatedMethod("Discovery","entityInfo","Use null instead.");Zt.registerDeprecatedMethod("Discovery","purchasedContent","Use null instead.");Zt.registerDeprecatedMethod("Discovery","entitlements","Use Discovery.contentAccess() instead.");Zt.registerDeprecatedMethod("Discovery","onPullEntityInfo","Use null instead.");Zt.registerDeprecatedMethod("Discovery","onPullPurchasedContent","Use null instead.");Ro("Lifecycle",["background","foreground","inactive","suspended","unloading"]);Ro("Localization",["countryCodeChanged","languageChanged","localeChanged","localityChanged","postalCodeChanged","preferredAudioLanguagesChanged"]);Zt.registerDeprecatedMethod("Localization","language","Use Localization.locale instead.");Zt.registerDeprecatedMethod("Localization","onLanguageChanged","Use language instead.");function O9(){return Zt.send("Localization","additionalInfo",{},null)}function N9(...h){return vs.clear("Localization",...h)}function U9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Localization","countryCode",s,h,!1,!0,0)}function B9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Localization","language",s,h,!1,!0,0)}function F9(){return Zt.send("Localization","latlon",{},null)}function j9(...h){return vs.listen("Localization",...h)}function $9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Localization","locale",s,h,!1,!0,0)}function z9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Localization","locality",s,h,!1,!0,0)}function V9(...h){return vs.once("Localization",...h)}function H9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Localization","postalCode",s,h,!1,!0,0)}function G9(){let h=arguments[0],s={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],s={}),xn.prop("Localization","preferredAudioLanguages",s,h,!1,!0,0)}const La={Events:{LOCALITY_CHANGED:"localityChanged",POSTAL_CODE_CHANGED:"postalCodeChanged",COUNTRY_CODE_CHANGED:"countryCodeChanged",LANGUAGE_CHANGED:"languageChanged",PREFERRED_AUDIO_LANGUAGES_CHANGED:"preferredAudioLanguagesChanged",LOCALE_CHANGED:"localeChanged"},additionalInfo:O9,clear:N9,countryCode:U9,language:B9,latlon:F9,listen:j9,locale:$9,locality:z9,once:V9,postalCode:H9,preferredAudioLanguages:G9};Ro("SecondScreen",["closeRequest","friendlyNameChanged","launchRequest"]);BD({Accessibility:$b,Account:jD,Advertising:$D,Authentication:zD,Capabilities:VD,Device:zb,Discovery:HD,Keyboard:GD,Lifecycle:XD,Localization:Vb,Metrics:WD,Parameters:KD,Profile:YD,SecondScreen:qD,SecureStorage:JD,Platform:QD});const Bh={device:{about:"A module for querying about the device and it's capabilities",methods:[{name:"make",about:"The manufacturer of the device model"},{name:"model",about:"The manufacturer designated model of the device"},{name:"name",about:"The human readable name of the device"},{name:"network",about:"The current network status and type"},{name:"platform",about:"Platform identifier for the device"}]},account:{about:"A module for querying about the device account",methods:[{name:"id",about:"The platform back-office account identifier"},{name:"uid",about:"Unique id for the current app & account"}]},localization:{about:"Methods for accessing location and language preferences",methods:[{name:"countryCode",about:"Get the ISO 3166-1 alpha-2 code for the country device is located in"},{name:"language",about:"Get the ISO 639 1/2 code for the preferred language"},{name:"latlon",about:"Approximate latitude and longitude coordinates of the device location"},{name:"locality",about:"The locality/city the device is located in"},{name:"postalCode",about:"Get the postal code the device is located in"}]}},X9=Oe.Component("Module",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].w=i.w,r[0].h=i.h,r[0].color=i.bColor,r[0].effects=[{type:"radius",props:{radius:8}}],l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].x=i.w/2,r[1].y=i.h/2,r[1].mount="{x:0.5, y:0.5}",r[1].content=i.name,r[1].color=i.fColor,r[1].font="raleway",r[1].__textnode=!0,l[1].populate(r[1]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("color",s.bColor)},function(s,i,c,f,v,x){i[0].set("effects",[{type:"radius",props:{radius:8}}])},function(s,i,c,f,v,x){i[1].set("content",s.name)}],context:{}},state(){return{w:300,h:250,bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }",fColor:"#fff"}},props:["name"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}},input:{enter(){this.$router.to(`/examples/firebolt/${this.name}`)}}}),W9=Oe.Component("Methods",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].w=i.w,r[1].h=i.h,r[1].color=i.nameBgColor,r[1].effects=[{type:"radius",props:{radius:[8,8,0,0]}}],l[1].populate(r[1]),s=l[1],r[2]={},l[2]=this.element({parent:s||"root"},i),r[2].content=i.name,r[2].x=i.w/2,r[2].y=i.h/2,r[2].mount=.5,r[2].color="0xffffffff",r[2].font="lato",r[2].size=50,r[2].__textnode=!0,l[2].populate(r[2]),s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},i),r[3].w=i.w,r[3].h=50,r[3].color="0x4b5563ff",r[3].y=75,r[3].effects=[{type:"radius",props:{radius:[0,0,8,8]}}],l[3].populate(r[3]),s=l[3],r[4]={},l[4]=this.element({parent:s||"root"},i),r[4].content=i.about,r[4].maxwidth=i.w,r[4].align="center",r[4].font="lato",r[4].maxlines=1,r[4].size=28,r[4].y=6,r[4].__textnode=!0,l[4].populate(r[4]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("color",s.nameBgColor)},function(s,i,c,f,v,x){i[1].set("effects",[{type:"radius",props:{radius:[8,8,0,0]}}])},function(s,i,c,f,v,x){i[2].set("content",s.name)},function(s,i,c,f,v,x){i[3].set("effects",[{type:"radius",props:{radius:[0,0,8,8]}}])},function(s,i,c,f,v,x){i[4].set("content",s.about)}],context:{}},state(){return{w:600,h:75,nameBgColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["name","about"],hooks:{focus(){this.nameBgColor="{ top: '#6366F1', bottom: '#4F46E5' }",this.$emit("execute",this.name)},unfocus(){this.nameBgColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),Fh=Oe.Component("List",{components:{Method:W9,Module:X9},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E,A=!1,U=[];r[0]={},l[0]=this.element({parent:s||"root"},A===!0?E:i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},A===!0?E:i),r[1].y={transition:i.y},l[1].populate(r[1]),s=l[1],k[2]=[];let K,R;S[2]=(ve=[],X,ie)=>{const W=x(ve),G=new Set;let ue=W.length;const Ce={};for(K=Ce.from||0,R=("to"in Ce)?Ce.to:W.length;ue--;){const Ae=W[ue];ue<R&&ue>=K&&G.add(""+Ae.name)}let Fe=ie.length;for(;Fe--;)if(G.has(ie[Fe])===!1){const Ae=ie[Fe];X[2][Ae]&&X[2][Ae].destroy(),X[2][Ae]=null,delete X[2][Ae],X[3][Ae]&&X[3][Ae].destroy(),X[3][Ae]=null,delete X[3][Ae]}ie.length=0;const Ze=W.length,je=[];for(let Ae=0;Ae<Ze;Ae++){if(Ae<K||Ae>=R)continue;const $=Object.create(i);if(s=X[1],$.item=W[Ae],$.index=Ae,$.key=""+$.item.name,ie.push($.key),U[2]=c.components&&c.components.Method||f.Method,X[2]===void 0&&(X[2]={}),r[2]={},X[2][$.key]===void 0&&(X[2][$.key]=this.element({parent:s||"root"},A===!0?E:i)),r[2].name=$.item.name,r[2].about=$.item.about,r[2].y=$.index*160,r[2].ref=$.type+$.index,I[2]=[],typeof U[2]<"u")for(let De in U[2][Symbol.for("config")].props)delete r[2][U[2][Symbol.for("config")].props[De]],I[2].push(U[2][Symbol.for("config")].props[De]);if(X[2][$.key].nodeId===void 0&&X[2][$.key].populate(r[2]),X[3]===void 0&&(X[3]={}),s=X[2][$.key],_[3]={},X[3][$.key]===void 0){if(_[3].name=$.item.name,_[3].about=$.item.about,C=$.index*160,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[3].y=C,C=$.type+$.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[3].ref=C,b=_[3].is||"Method",f[3],typeof b=="string"){if(f[3]=c.components&&c.components[b]||f[b],!f[3])throw new Error('Component "Method" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[3]=b);X[3][$.key]=f[3].call(null,{props:_[3]},X[2][$.key],i),X[3][$.key][Symbol.for("slots")][0]?(s=X[3][$.key][Symbol.for("slots")][0],E=X[3][$.key],A=!0):s=X[3][$.key][Symbol.for("children")][0]}let ft=()=>{(typeof I>"u"||typeof I[2]>"u"||I[2].indexOf("y")===-1)&&X[2][$.key].set("y",$.index*160)};v(ft,null),je.push(ft),i[Symbol.for("effects")].push(ft),X[3][$.key][Symbol.for("props")].y=$.index*160}return je};let le=()=>{S[2](i.methods,l,k[2])};i[Symbol.for("effects")].push(le),v(le,["methods"]);let ge=()=>{i.type;for(let ve=0;ve<i.methods.length;ve++){if(ve<K||ve>=R)continue;const X={};X.index=ve,X.item=i.methods[ve],X.key=X.item.name,(typeof I>"u"||typeof I[2]>"u"||I[2].indexOf("ref")===-1)&&l[2][X.key].set("ref",i.type+X.index)}};i[Symbol.for("effects")].push(ge),v(ge);let pe=()=>{i.type;for(let ve=0;ve<i.methods.length;ve++){if(ve<K||ve>=R)continue;const X={};X.index=ve,X.item=i.methods[ve],X.key=X.item.name,l[3][X.key][Symbol.for("props")].ref=i.type+X.index}};i[Symbol.for("effects")].push(pe),v(pe),s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},A===!0?E:i),r[4].x={transition:i.x},r[4].y=325,l[4].populate(r[4]),s=l[4],k[5]=[];let oe,me;S[5]=(ve=[],X,ie)=>{const W=x(ve),G=new Set;let ue=W.length;const Ce={};for(oe=Ce.from||0,me=("to"in Ce)?Ce.to:W.length;ue--;){const Ae=W[ue];ue<me&&ue>=oe&&G.add(""+Ae.id)}let Fe=ie.length;for(;Fe--;)if(G.has(ie[Fe])===!1){const Ae=ie[Fe];X[5][Ae]&&X[5][Ae].destroy(),X[5][Ae]=null,delete X[5][Ae],X[6][Ae]&&X[6][Ae].destroy(),X[6][Ae]=null,delete X[6][Ae]}ie.length=0;const Ze=W.length,je=[];for(let Ae=0;Ae<Ze;Ae++){if(Ae<oe||Ae>=me)continue;const $=Object.create(i);if(s=X[4],$.item=W[Ae],$.index=Ae,$.key=""+$.item.id,ie.push($.key),U[5]=c.components&&c.components.Module||f.Module,X[5]===void 0&&(X[5]={}),r[5]={},X[5][$.key]===void 0&&(X[5][$.key]=this.element({parent:s||"root"},A===!0?E:i)),r[5].name=$.item.name,r[5].ref=$.type+$.index,r[5].x=$.index*400,I[5]=[],typeof U[5]<"u")for(let ft in U[5][Symbol.for("config")].props)delete r[5][U[5][Symbol.for("config")].props[ft]],I[5].push(U[5][Symbol.for("config")].props[ft]);if(X[5][$.key].nodeId===void 0&&X[5][$.key].populate(r[5]),X[6]===void 0&&(X[6]={}),s=X[5][$.key],_[6]={},X[6][$.key]===void 0){if(_[6].name=$.item.name,C=$.type+$.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),_[6].ref=C,_[6].x=$.index*400,b=_[6].is||"Module",f[6],typeof b=="string"){if(f[6]=c.components&&c.components[b]||f[b],!f[6])throw new Error('Component "Module" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[6]=b);X[6][$.key]=f[6].call(null,{props:_[6]},X[5][$.key],i),X[6][$.key][Symbol.for("slots")][0]?(s=X[6][$.key][Symbol.for("slots")][0],E=X[6][$.key],A=!0):s=X[6][$.key][Symbol.for("children")][0]}}return je};let D=()=>{S[5](i.modules,l,k[5])};i[Symbol.for("effects")].push(D),v(D,["modules"]);let te=()=>{i.type;for(let ve=0;ve<i.modules.length;ve++){if(ve<oe||ve>=me)continue;const X={};X.index=ve,X.item=i.modules[ve],X.key=X.item.id,(typeof I>"u"||typeof I[5]>"u"||I[5].indexOf("ref")===-1)&&l[5][X.key].set("ref",i.type+X.index)}};i[Symbol.for("effects")].push(te),v(te);let ce=()=>{i.type;for(let ve=0;ve<i.modules.length;ve++){if(ve<oe||ve>=me)continue;const X={};X.index=ve,X.item=i.modules[ve],X.key=X.item.id,l[6][X.key][Symbol.for("props")].ref=i.type+X.index}};return i[Symbol.for("effects")].push(ce),v(ce),{elms:l,cleanup:()=>{C=null,E=null,i=null,s=null,k[2].length=0,S[2]=null,U[2]=null,_[3]=null,f[3]=null,le=null,ge=null,pe=null,k[5].length=0,S[5]=null,U[5]=null,_[6]=null,f[6]=null,D=null,te=null,ce=null,U.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("y",{transition:s.y})},function(s,i,c,f,v,x){i[4].set("x",{transition:s.x})}],context:{}},state(){return{x:400,y:100,activeIndex:0}},props:["data","type"],computed:{methods(){return this.isModule,this.data,this.isModule?[]:this.data},modules(){return this.isModule,this.data,this.isModule?this.data:[]},isModule(){return this.type,this.type==="module"}},watch:{activeIndex(h){const s=this.$select(`${this.type}${h}`);s&&s.$focus&&s.$focus()}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},left(){this.isModule&&this.activeIndex>0&&this.move(-1)},down(){!this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},up(){!this.isModule&&this.activeIndex>0&&this.move(-1)}},methods:{move(h){const s=this.activeIndex+h;this.type=="method"?this.y=s>5?-(s-5)*160-100:100:this.type=="module"&&(this.x=s>3?-(s-3)*400-400:400),this.activeIndex=s}}}),K9=Oe.Component("FireBolt",{components:{List:Fh},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b=!1,C=0,E=[];if(r[0]={},l[0]=this.element({parent:s||"root"},b===!0?I:i),l[0].populate(r[0]),b===!0&&(C-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},b===!0?I:i),r[1].content="FireBolt Modules",r[1].x=960,r[1].y=80,r[1].mount="{x:0.5}",r[1].size=80,r[1].font="raleway",r[1].__textnode=!0,l[1].populate(r[1]),b===!0&&(C-=1),E[2]=c.components&&c.components.List||f.List,s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},b===!0?I:i),r[2].data=i.moduleNames,r[2].type="module",r[2].ref="modules",_[2]=[],typeof E[2]<"u")for(let A in E[2][Symbol.for("config")].props)delete r[2][E[2][Symbol.for("config")].props[A]],_[2].push(E[2][Symbol.for("config")].props[A]);if(l[2].populate(r[2]),b===!0&&(C-=1),s=l[2],S[3]={},S[3].data=i.moduleNames,S[3].type="module",S[3].ref="modules",k=S[3].is||"List",f[3],typeof k=="string"){if(f[3]=c.components&&c.components[k]||f[k],!f[3])throw new Error('Component "List" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[3]=k);return l[3]=f[3].call(null,{props:S[3]},l[2],i),l[3][Symbol.for("slots")][0]?(s=l[3][Symbol.for("slots")][0],I=l[3],b=!0):s=l[3][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),{elms:l,cleanup:()=>{I=null,i=null,s=null,E[2]=null,S[3]=null,f[3]=null,E.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[],context:{}},computed:{moduleNames(){return Object.keys(Bh).map(h=>({id:h,name:h.charAt(0).toUpperCase()+h.slice(1)}))}},hooks:{focus(){const h=this.$select("modules");h&&h.$focus&&h.$focus()}}}),Y9=Oe.Component("DeviceModule",{components:{List:Fh},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b=!1,C=0,E=[];if(r[0]={},l[0]=this.element({parent:s||"root"},b===!0?I:i),l[0].populate(r[0]),b===!0&&(C-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},b===!0?I:i),r[1].content="Device",r[1].x=960,r[1].mount="{x:0.5}",r[1].y=50,r[1].font="raleway",r[1].size=40,r[1].__textnode=!0,l[1].populate(r[1]),b===!0&&(C-=1),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},b===!0?I:i),r[2].content=i.device.about,r[2].x=960,r[2].mount="{x:0.5}",r[2].y=110,r[2].font="lato",r[2].__textnode=!0,l[2].populate(r[2]),b===!0&&(C-=1),E[3]=c.components&&c.components.List||f.List,s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},b===!0?I:i),r[3].data=i.device.methods,r[3].x=300,r[3].ref="methods",r[3].type="method",r[3].y=100,_[3]=[],typeof E[3]<"u")for(let A in E[3][Symbol.for("config")].props)delete r[3][E[3][Symbol.for("config")].props[A]],_[3].push(E[3][Symbol.for("config")].props[A]);if(l[3].populate(r[3]),b===!0&&(C-=1),s=l[3],S[4]={},S[4].data=i.device.methods,S[4].x=300,S[4].ref="methods",S[4].type="method",S[4].y=100,k=S[4].is||"List",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "List" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);return l[4]=f[4].call(null,{props:S[4]},l[3],i),l[4][Symbol.for("slots")][0]?(s=l[4][Symbol.for("slots")][0],I=l[4],b=!0):s=l[4][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},b===!0?I:i),r[5].x=1400,r[5].y=540,r[5].content=i.response,r[5].size=100,r[5].mount=.5,r[5].font="lato",r[5].show=!i.isNetworkRes,r[5].__textnode=!0,l[5].populate(r[5]),b===!0&&(C-=1),s=l[0],r[6]={},l[6]=this.element({parent:s||"root"},b===!0?I:i),r[6].show=i.isNetworkRes,l[6].populate(r[6]),b===!0&&(C-=1),s=l[6],r[7]={},l[7]=this.element({parent:s||"root"},b===!0?I:i),r[7].content="State: "+i.networkRes.state,r[7].size=70,r[7].font="lato",r[7].x=1400,r[7].y=500,r[7].mount=.5,r[7].__textnode=!0,l[7].populate(r[7]),b===!0&&(C-=1),s=l[6],r[8]={},l[8]=this.element({parent:s||"root"},b===!0?I:i),r[8].content="Type: "+i.networkRes.type,r[8].size=70,r[8].font="lato",r[8].y=580,r[8].x=1400,r[8].mount=.5,r[8].__textnode=!0,l[8].populate(r[8]),b===!0&&(C-=1),{elms:l,cleanup:()=>{I=null,i=null,s=null,E[3]=null,S[4]=null,f[4]=null,E.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[5].set("content",s.response)},function(s,i,c,f,v,x){i[5].set("show",!s.isNetworkRes)},function(s,i,c,f,v,x){i[6].set("show",s.isNetworkRes)},function(s,i,c,f,v,x){i[7].set("content","State: "+s.networkRes.state)},function(s,i,c,f,v,x){i[8].set("content","Type: "+s.networkRes.type)}],context:{}},state(){return{device:Bh.device,response:"",networkRes:{},isNetworkRes:!1}},hooks:{ready(){this.$listen("execute",async h=>{switch(this.$log.info(`Execute Device ${h} API`),this.isNetworkRes=!1,h){case"make":this.response=await Fu.make();break;case"model":this.response=await Fu.model();break;case"name":this.response=await Fu.name();break;case"network":Object.assign(this.networkRes,await Fu.network()),this.isNetworkRes=!0;break;case"platform":this.response=await Fu.platform();break}})},focus(){const h=this.$select("methods");h&&h.$focus&&h.$focus()}}}),q9=Oe.Component("AccountModule",{components:{List:Fh},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b=!1,C=0,E=[];if(r[0]={},l[0]=this.element({parent:s||"root"},b===!0?I:i),l[0].populate(r[0]),b===!0&&(C-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},b===!0?I:i),r[1].content="Account",r[1].x=960,r[1].mount="{x:0.5}",r[1].y=50,r[1].font="raleway",r[1].size=40,r[1].__textnode=!0,l[1].populate(r[1]),b===!0&&(C-=1),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},b===!0?I:i),r[2].content=i.account.about,r[2].x=960,r[2].mount="{x:0.5}",r[2].y=110,r[2].font="lato",r[2].__textnode=!0,l[2].populate(r[2]),b===!0&&(C-=1),E[3]=c.components&&c.components.List||f.List,s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},b===!0?I:i),r[3].data=i.account.methods,r[3].x=300,r[3].ref="methods",r[3].y=300,r[3].type="method",_[3]=[],typeof E[3]<"u")for(let A in E[3][Symbol.for("config")].props)delete r[3][E[3][Symbol.for("config")].props[A]],_[3].push(E[3][Symbol.for("config")].props[A]);if(l[3].populate(r[3]),b===!0&&(C-=1),s=l[3],S[4]={},S[4].data=i.account.methods,S[4].x=300,S[4].ref="methods",S[4].y=300,S[4].type="method",k=S[4].is||"List",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "List" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);return l[4]=f[4].call(null,{props:S[4]},l[3],i),l[4][Symbol.for("slots")][0]?(s=l[4][Symbol.for("slots")][0],I=l[4],b=!0):s=l[4][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},b===!0?I:i),r[5].x=1400,r[5].y=540,r[5].content=i.response,r[5].size=i.size,r[5].mount=.5,r[5].font="lato",r[5].__textnode=!0,l[5].populate(r[5]),b===!0&&(C-=1),{elms:l,cleanup:()=>{I=null,i=null,s=null,E[3]=null,S[4]=null,f[4]=null,E.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[5].set("content",s.response)},function(s,i,c,f,v,x){i[5].set("size",s.size)}],context:{}},state(){return{account:Bh.account,response:"",size:100}},hooks:{ready(){this.$listen("execute",async h=>{switch(this.$log.info(`Execute Account ${h} API`),h){case"id":this.size=100,this.response=await p9.id();break;case"uid":this.size=40,this.response=await Fu.uid();break}})},focus(){const h=this.$select("methods");h&&h.$focus&&h.$focus()}}}),J9=Oe.Component("LocalizationModule",{components:{List:Fh},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b=!1,C=0,E=[];if(r[0]={},l[0]=this.element({parent:s||"root"},b===!0?I:i),l[0].populate(r[0]),b===!0&&(C-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},b===!0?I:i),r[1].content="Localization",r[1].x=960,r[1].mount="{x:0.5}",r[1].y=50,r[1].font="raleway",r[1].size=40,r[1].__textnode=!0,l[1].populate(r[1]),b===!0&&(C-=1),s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},b===!0?I:i),r[2].content=i.localization.about,r[2].x=960,r[2].mount="{x:0.5}",r[2].y=110,r[2].font="lato",r[2].__textnode=!0,l[2].populate(r[2]),b===!0&&(C-=1),E[3]=c.components&&c.components.List||f.List,s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},b===!0?I:i),r[3].data=i.localization.methods,r[3].x=300,r[3].ref="methods",r[3].y=100,r[3].type="method",_[3]=[],typeof E[3]<"u")for(let A in E[3][Symbol.for("config")].props)delete r[3][E[3][Symbol.for("config")].props[A]],_[3].push(E[3][Symbol.for("config")].props[A]);if(l[3].populate(r[3]),b===!0&&(C-=1),s=l[3],S[4]={},S[4].data=i.localization.methods,S[4].x=300,S[4].ref="methods",S[4].y=100,S[4].type="method",k=S[4].is||"List",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "List" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);return l[4]=f[4].call(null,{props:S[4]},l[3],i),l[4][Symbol.for("slots")][0]?(s=l[4][Symbol.for("slots")][0],I=l[4],b=!0):s=l[4][Symbol.for("children")][0],b===!0&&C===0&&(b=!1),s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},b===!0?I:i),r[5].x=1400,r[5].y=540,r[5].content=i.response,r[5].size=i.size,r[5].mount=.5,r[5].font="lato",r[5].__textnode=!0,l[5].populate(r[5]),b===!0&&(C-=1),{elms:l,cleanup:()=>{I=null,i=null,s=null,E[3]=null,S[4]=null,f[4]=null,E.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[5].set("content",s.response)},function(s,i,c,f,v,x){i[5].set("size",s.size)}],context:{}},state(){return{localization:Bh.localization,response:"",size:100}},hooks:{ready(){this.$listen("execute",async h=>{switch(this.$log.info(`Execute Keyboard ${h} API`),this.response="null",h){case"countryCode":this.response=await La.countryCode();break;case"language":this.response=await La.language();break;case"latlon":this.response=(await La.latlon()).toString();break;case"locality":this.response=await La.locality();break;case"postalCode":this.response=await La.postalCode();break}})},focus(){const h=this.$select("methods");h&&h.$focus&&h.$focus()}}}),Q9=[{path:"/examples/firebolt",component:K9},{path:"/examples/firebolt/device",component:Y9},{path:"/examples/firebolt/account",component:q9},{path:"/examples/firebolt/localization",component:J9}],Z9=Oe.Component("Item",{code:{render:function(s,i,c,f,v,x,m){const l=[],r=[];return r[0]={},l[0]=this.element({parent:s||"root"},i),r[0].color=i.hasFocus?"0xe0f2feff":"0xfef9c3ff",r[0].w=200,r[0].h=200,r[0].effects=[{type:"radius",props:{radius:12}}],l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},i),r[1].content=i.name,r[1].size=i.hasFocus?38:32,r[1].color=i.hasFocus?"0x1e3a8aff":"0x2563ebff",r[1].placement="{x: 'center', y: 'middle'}",r[1].__textnode=!0,l[1].populate(r[1]),{elms:l,cleanup:()=>{i=null,s=null,l.length=0,f.length=0,r.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("color",s.hasFocus?"0xe0f2feff":"0xfef9c3ff")},function(s,i,c,f,v,x){i[0].set("effects",[{type:"radius",props:{radius:12}}])},function(s,i,c,f,v,x){i[1].set("content",s.name)},function(s,i,c,f,v,x){i[1].set("size",s.hasFocus?38:32)},function(s,i,c,f,v,x){i[1].set("color",s.hasFocus?"0x1e3a8aff":"0x2563ebff")}],context:{}},props:["name"],state(){return{message:null}},hooks:{focus(){this.message=this.$announcer.speak(this.name)},unfocus(){this.message&&(this.message.stop(),this.message.cancel())}}}),e7=Oe.Component("Row",{components:{Item:Z9},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[],k=[],I=[];let b,C,E=!1,A=[];r[0]={},l[0]=this.element({parent:s||"root"},E===!0?C:i),l[0].populate(r[0]),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},E===!0?C:i),r[1].content=i.title,r[1].size=40,r[1].__textnode=!0,l[1].populate(r[1]),s=l[0],k[2]=[];let U,K;S[2]=(le=[],ge,pe)=>{const oe=x(le),me=new Set;let D=oe.length;const te={};for(U=te.from||0,K=("to"in te)?te.to:oe.length;D--;)oe[D],D<K&&D>=U&&me.add(""+D);let ce=pe.length;for(;ce--;)if(me.has(pe[ce])===!1){const ie=pe[ce];ge[2][ie]&&ge[2][ie].destroy(),ge[2][ie]=null,delete ge[2][ie],ge[3][ie]&&ge[3][ie].destroy(),ge[3][ie]=null,delete ge[3][ie]}pe.length=0;const ve=oe.length,X=[];for(let ie=0;ie<ve;ie++){if(ie<U||ie>=K)continue;const W=Object.create(i);if(s=ge[0],W.item=oe[ie],W.index=ie,W.key=""+ie,W.__ref="item"+ie,pe.push(W.key),A[2]=c.components&&c.components.Item||f.Item,ge[2]===void 0&&(ge[2]={}),r[2]={},ge[2][W.key]===void 0&&(ge[2][W.key]=this.element({parent:s||"root"},E===!0?C:i)),r[2].name=W.item,r[2].y=100,r[2].x=W.index*250+100,r[2].ref=W.__ref,I[2]=[],typeof A[2]<"u")for(let G in A[2][Symbol.for("config")].props)delete r[2][A[2][Symbol.for("config")].props[G]],I[2].push(A[2][Symbol.for("config")].props[G]);if(ge[2][W.key].nodeId===void 0&&ge[2][W.key].populate(r[2]),ge[3]===void 0&&(ge[3]={}),s=ge[2][W.key],_[3]={},ge[3][W.key]===void 0){if(_[3].name=W.item,_[3].y=100,_[3].x=W.index*250+100,_[3].ref=W.__ref,b=_[3].is||"Item",f[3],typeof b=="string"){if(f[3]=c.components&&c.components[b]||f[b],!f[3])throw new Error('Component "Item" not found')}else typeof b=="function"&&b[Symbol.for("isComponent")]===!0&&(f[3]=b);ge[3][W.key]=f[3].call(null,{props:_[3]},ge[2][W.key],i),ge[3][W.key][Symbol.for("slots")][0]?(s=ge[3][W.key][Symbol.for("slots")][0],C=ge[3][W.key],E=!0):s=ge[3][W.key][Symbol.for("children")][0]}}return X};let R=()=>{S[2](i.items,l,k[2])};return i[Symbol.for("effects")].push(R),v(R,["items"]),{elms:l,cleanup:()=>{C=null,i=null,s=null,k[2].length=0,S[2]=null,A[2]=null,_[3]=null,f[3]=null,R=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0,I.length=0}}},effects:[function(s,i,c,f,v,x){i[1].set("content",s.title)}],context:{}},props:["title","items"],state(){return{focusIndex:-1,message:null}},hooks:{focus(){this.message=this.$announcer.speak("Row with different "+this.title),this.focusIndex=0,this.$trigger("focusIndex")},unfocus(){this.message&&(this.message.stop(),this.message.cancel())}},watch:{focusIndex(h){this.$select("item"+h).$focus()}},input:{right(){this.focusIndex=Math.min(this.focusIndex+1,this.items.length-1)},left(){this.focusIndex=Math.max(this.focusIndex-1,0)}}}),t7=Oe.Component("Announcer",{components:{Row:e7},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),r[0].width=s.node.width*(100/100),r[0].y=50,l[0].populate(r[0]),C===!0&&(E-=1),s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].placement="{x: 'center'}",r[1].size=50,r[1].content="Food",r[1].__textnode=!0,l[1].populate(r[1]),C===!0&&(E-=1),A[2]=c.components&&c.components.Row||f.Row,s=l[0],r[2]={},l[2]=this.element({parent:s||"root"},C===!0?b:i),r[2].title="Fruits",r[2].x=200,r[2].y=150,r[2].items=["Banana","Strawberry","Kiwi","Mango","Grape"],r[2].ref="row1",_[2]=[],typeof A[2]<"u")for(let U in A[2][Symbol.for("config")].props)delete r[2][A[2][Symbol.for("config")].props[U]],_[2].push(A[2][Symbol.for("config")].props[U]);if(l[2].populate(r[2]),C===!0&&(E-=1),s=l[2],S[3]={},S[3].title="Fruits",S[3].x=200,S[3].y=150,I=["Banana","Strawberry","Kiwi","Mango","Grape"],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[3].items=I,S[3].ref="row1",k=S[3].is||"Row",f[3],typeof k=="string"){if(f[3]=c.components&&c.components[k]||f[k],!f[3])throw new Error('Component "Row" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[3]=k);if(l[3]=f[3].call(null,{props:S[3]},l[2],i),l[3][Symbol.for("slots")][0]?(s=l[3][Symbol.for("slots")][0],b=l[3],C=!0):s=l[3][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[4]=c.components&&c.components.Row||f.Row,s=l[0],r[4]={},l[4]=this.element({parent:s||"root"},C===!0?b:i),r[4].title="Snacks",r[4].x=200,r[4].y=600,r[4].items=["Pizza","Burger","Fries","Popcorn","Chocolate"],r[4].ref="row2",_[4]=[],typeof A[4]<"u")for(let U in A[4][Symbol.for("config")].props)delete r[4][A[4][Symbol.for("config")].props[U]],_[4].push(A[4][Symbol.for("config")].props[U]);if(l[4].populate(r[4]),C===!0&&(E-=1),s=l[4],S[5]={},S[5].title="Snacks",S[5].x=200,S[5].y=600,I=["Pizza","Burger","Fries","Popcorn","Chocolate"],Array.isArray(I)===!0&&(I=x(I).slice(0)),S[5].items=I,S[5].ref="row2",k=S[5].is||"Row",f[5],typeof k=="string"){if(f[5]=c.components&&c.components[k]||f[k],!f[5])throw new Error('Component "Row" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[5]=k);return l[5]=f[5].call(null,{props:S[5]},l[4],i),l[5][Symbol.for("slots")][0]?(s=l[5][Symbol.for("slots")][0],b=l[5],C=!0):s=l[5][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[2]=null,S[3]=null,f[3]=null,A[4]=null,S[5]=null,f[5]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[2]>"u"||skips[2].indexOf("items")===-1)&&i[2].set("items",["Banana","Strawberry","Kiwi","Mango","Grape"])},function(s,i,c,f,v,x){i[3][Symbol.for("props")].items=["Banana","Strawberry","Kiwi","Mango","Grape"]},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[4]>"u"||skips[4].indexOf("items")===-1)&&i[4].set("items",["Pizza","Burger","Fries","Popcorn","Chocolate"])},function(s,i,c,f,v,x){i[5][Symbol.for("props")].items=["Pizza","Burger","Fries","Popcorn","Chocolate"]}],context:{}},state(){return{focusIndex:1}},watch:{focusIndex(h){this.$select("row"+h).$focus()}},hooks:{focus(){this.$announcer.speak("The topic is Food"),this.$trigger("focusIndex")}},input:{up(){this.focusIndex=Math.max(this.focusIndex-1,1)},down(){this.focusIndex=Math.min(this.focusIndex+1,2)}}}),qb=new URLSearchParams(window.location.search),n7=!!qb.get("source"),i7=!!qb.get("fps"),r7=Oe.Application({components:{SourceInfo:Ib},code:{render:function(s,i,c,f,v,x,m){const l=[],r=[],S=[],_=[];let k,I,b,C=!1,E=0,A=[];if(r[0]={},l[0]=this.element({parent:s||"root"},C===!0?b:i),r[0].w=1920,r[0].h=1080,r[0].color=i.backgroundColor,l[0].populate(r[0]),C===!0&&(E-=1),A[1]=c.components&&c.components.RouterView||f.RouterView,s=l[0],r[1]={},l[1]=this.element({parent:s||"root"},C===!0?b:i),r[1].w=s.node.width*(100/100),r[1].h=s.node.height*(100/100),_[1]=[],typeof A[1]<"u")for(let U in A[1][Symbol.for("config")].props)delete r[1][A[1][Symbol.for("config")].props[U]],_[1].push(A[1][Symbol.for("config")].props[U]);if(l[1].populate(r[1]),C===!0&&(E-=1),s=l[1],S[2]={},S[2].w=s.node.width*(100/100),S[2].h=s.node.height*(100/100),k=S[2].is||"RouterView",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "RouterView" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);if(l[2]=f[2].call(null,{props:S[2]},l[1],i),l[2][Symbol.for("slots")][0]?(s=l[2][Symbol.for("slots")][0],b=l[2],C=!0):s=l[2][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[3]=c.components&&c.components.FPScounter||f.FPScounter,s=l[0],r[3]={},l[3]=this.element({parent:s||"root"},C===!0?b:i),r[3].x=1610,r[3].show=i.showFPS,_[3]=[],typeof A[3]<"u")for(let U in A[3][Symbol.for("config")].props)delete r[3][A[3][Symbol.for("config")].props[U]],_[3].push(A[3][Symbol.for("config")].props[U]);if(l[3].populate(r[3]),C===!0&&(E-=1),s=l[3],S[4]={},S[4].x=1610,I=i.showFPS,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[4].show=I,k=S[4].is||"FPScounter",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "FPScounter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);if(l[4]=f[4].call(null,{props:S[4]},l[3],i),l[4][Symbol.for("slots")][0]?(s=l[4][Symbol.for("slots")][0],b=l[4],C=!0):s=l[4][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),A[5]=c.components&&c.components.SourceInfo||f.SourceInfo,s=l[0],r[5]={},l[5]=this.element({parent:s||"root"},C===!0?b:i),r[5].ref="info",r[5].show=i.showInfo,_[5]=[],typeof A[5]<"u")for(let U in A[5][Symbol.for("config")].props)delete r[5][A[5][Symbol.for("config")].props[U]],_[5].push(A[5][Symbol.for("config")].props[U]);if(l[5].populate(r[5]),C===!0&&(E-=1),s=l[5],S[6]={},S[6].ref="info",I=i.showInfo,Array.isArray(I)===!0&&(I=x(I).slice(0)),S[6].show=I,k=S[6].is||"SourceInfo",f[6],typeof k=="string"){if(f[6]=c.components&&c.components[k]||f[k],!f[6])throw new Error('Component "SourceInfo" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[6]=k);return l[6]=f[6].call(null,{props:S[6]},l[5],i),l[6][Symbol.for("slots")][0]?(s=l[6][Symbol.for("slots")][0],b=l[6],C=!0):s=l[6][Symbol.for("children")][0],C===!0&&E===0&&(C=!1),{elms:l,cleanup:()=>{I=null,b=null,i=null,s=null,A[1]=null,S[2]=null,f[2]=null,A[3]=null,S[4]=null,f[4]=null,A[5]=null,S[6]=null,f[6]=null,A.length=0,l.length=0,f.length=0,r.length=0,S.length=0,_.length=0}}},effects:[function(s,i,c,f,v,x){i[0].set("color",s.backgroundColor)},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[3]>"u"||skips[3].indexOf("show")===-1)&&i[3].set("show",s.showFPS)},function(s,i,c,f,v,x){i[4][Symbol.for("props")].show=s.showFPS},function(s,i,c,f,v,x){(typeof skips>"u"||typeof skips[5]>"u"||skips[5].indexOf("show")===-1)&&i[5].set("show",s.showInfo)},function(s,i,c,f,v,x){i[6][Symbol.for("props")].show=s.showInfo}],context:{}},state(){return{backgroundColor:"#1e293b",showFPS:i7,showInfo:!1}},routes:[{path:"/",component:fP,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>X3(()=>import("./Loading-iOC4LTxG.js"),[])},{path:"/demos/intro",component:()=>new Promise(h=>{h(dP)})},{path:"/demos/theming",component:gP},{path:"/demos/tmdb",component:EP},{path:"/demos/sprites",component:MP},{path:"/demos/focushandling",component:_P},{path:"/demos/memory-game",component:mD,announce:"Let's play Memory"},{path:"/demos/player",component:GP},{path:"/examples/positioning",component:LP},{path:"/examples/colors",component:XP},{path:"/examples/gradients",component:WP},{path:"/examples/transitions",component:KP},{path:"/examples/alpha",component:YP},{path:"/examples/scaling",component:qP},{path:"/examples/rotation",component:JP},{path:"/examples/keyinput",component:QP},{path:"/examples/texts",component:ZP},{path:"/examples/images",component:eD},{path:"/examples/components",component:tD},{path:"/examples/forloop",component:nD},{path:"/examples/forloop-advanced",component:uD},{path:"/examples/effects",component:lD},{path:"/examples/showif",component:aD},{path:"/examples/events",component:fD},{path:"/examples/slots",component:hD},{path:"/examples/viewport",component:xD},...kD,{path:"/examples/resize",component:AD},{path:"/examples/languageplugin",component:_3},{path:"/examples/keycodes",component:MD},{path:"/examples/translations",component:_3},{path:"/examples/special-characters",component:LD},{path:"/examples/layout",component:PD},{path:"/examples/announcer",component:t7,announce:"Welcome to the announcement example page"},{path:"/benchmarks/exponential",component:vD},...Q9],hooks:{ready(){n7===!0&&(this.showInfo=!0),this.$listen("changeBackground",h=>{this.backgroundColor=h?h+80:"#1e293b"}),this.$listen("clearBackground",()=>{this.backgroundColor="transparent"})}},input:{async intercept(h){return h.key==="x"?(this.$log.info(`Intercepting key press (${h.key}) in App Component`),new Promise(s=>{this.$log.info("Executing an async operation"),setTimeout(()=>{this.$log.info("Finished an async operation"),s(h)},2e3)})):h},escape(){this.quit()},back(){this.$router.to("/")},sourceCode(){this.showInfo=!1;const h=o7(this.$router.currentRoute.path);h&&window.open(`https://github.com/lightning-js/blits-example-app/tree/master/${h}`,"_blank")}}}),o7=h=>({"/":"src/pages/Portal","/demos/loading":"src/pages/Loading","/demos/intro":"src/pages/Intro","/demos/theming":"src/pages/Theming","/demos/tmdb":"src/pages/Tmdb","/demos/sprites":"src/pages/Sprites","/demos/focushandling":"src/pages/FocusHandling","/demos/memory-game":"src/pages/MemoryGame","/demos/player":"src/pages/Player","/examples/positioning":"src/pages/Positioning","/examples/colors":"src/pages/Colors","/examples/gradients":"src/pages/Gradients","/examples/transitions":"src/pages/Transitions","/examples/components":"src/pages/Components","/examples/alpha":"src/pages/Alpha","/examples/scaling":"src/pages/Scaling","/examples/rotation":"src/pages/Rotation","/examples/keyinput":"src/pages/KeyInput","/examples/forloop":"src/pages/ForLoop","/examples/forloop-advanced":"src/pages/ForLoopAdvanced","/examples/effects":"src/pages/Effects","/examples/showif":"src/pages/ShowIf","/examples/events":"src/pages/Events","/examples/images":"src/pages/Images","/examples/texts":"src/pages/Texts","/examples/slots":"src/pages/Slots","/examples/viewport":"src/pages/Viewport","/examples/router-hooks":"src/pages/RouterHooks","/examples/resize":"src/pages/Resize","/examples/translations":"src/pages/LanguagePlugin","/examples/firebolt":"src/pages/Firebolt","/examples/keycodes":"src/pages/KeyCodes","/examples/special-characters":"src/pages/SpecialCharacters","/examples/layout":"src/pages/Layout","/benchmarks/exponential":"src/pages/Exponential"})["/"+h]+".js",B3={light:{color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},dark:{color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"}},F3={large:{w:1200,h:900,block1:{h:720},block2:{y:560,h:300,w:890},graph:{x:270,y:140,w:890,h:400,offset:110,size:"large"}},small:{w:500,h:600,block1:{h:180},block2:{y:140,h:180,w:200},graph:{x:32,y:370,w:0,h:0,offset:0,size:"small"}}};Oe.Plugin(Eb,"colors",{themes:{light:B3.light,dark:B3.dark},base:"light",current:"dark"});Oe.Plugin(Eb,"sizes",{themes:{small:F3.small,large:F3.large},base:"small",current:"small"});Oe.Plugin(nP);Oe.Launch(r7,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",defaultFont:"lato",keymap:{...oP(),85:"sourceCode"},fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"},{family:"lato-black",type:"msdf",file:"fonts/Lato-Black.ttf"}],canvasColor:"transparent",viewportMargin:100,announcer:!0});export{Oe as B,Zu as S};
