var bI=Object.defineProperty;var kI=(h,r,i)=>r in h?bI(h,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[r]=i;var O=(h,r,i)=>(kI(h,typeof r!="symbol"?r+"":r,i),i);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))f(d);new MutationObserver(d=>{for(const y of d)if(y.type==="childList")for(const x of y.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&f(x)}).observe(document,{childList:!0,subtree:!0});function i(d){const y={};return d.integrity&&(y.integrity=d.integrity),d.referrerPolicy&&(y.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?y.credentials="include":d.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function f(d){if(d.ep)return;d.ep=!0;const y=i(d);fetch(d.href,y)}})();const ye={currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),intervals:Symbol("intervals"),launched:Symbol("launched"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType"),isComponent:Symbol.for("isComponent"),effects:Symbol.for("effects")},Hi={[ye.settings]:{},get(h,r=null){return h in this[ye.settings]?this[ye.settings][h]:r},set(h,r){typeof h=="object"?Object.keys(h).forEach(i=>{this.set(i,h[i])}):this[ye.settings][h]=r}},Tc=()=>{},D0=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),BS=h=>{const r=Hi.get("debugLevel"),i={};return Object.defineProperty(i,"info",{get(){return(r>=1||Array.isArray(r)&&r.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${h} %c ${D0()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Tc}}),Object.defineProperty(i,"warn",{get(){return(r>=1||Array.isArray(r)&&r.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${h} %c ${D0()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Tc}}),Object.defineProperty(i,"error",{get(){return(r>=1||Array.isArray(r)&&r.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${h} %c ${D0()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Tc}}),Object.defineProperty(i,"debug",{get(){return(r>=2||Array.isArray(r)&&r.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${h} %c (${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Tc}}),i};let rn;const II=()=>{rn=BS("Blits")},Ec={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},MI=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,RI=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,_I=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,N0={},Ac=h=>{if(N0[h]!==void 0)return N0[h];const r=parseInt(h).toString(16).padStart(2,"0");return N0[h]=r,r},ua={normalize:(h="",r="0xffffffff")=>{if(h=h.toString(),h.startsWith("0x")&&h.length===10)return h;if(Ec[h]!==void 0)return Ec[h];if(MI.test(h)){h=h.replace("#","").toLowerCase(),h.length===3&&(h=h.split("").map(d=>d+d).join(""));const f="0x"+h.padEnd(8,"f");return Ec[h]=f,f}const i=RI.exec(h);if(i){const f=Ac(i[3]),d=Ac(i[5]),y=Ac(i[7]);let x="ff";if(i[10]&&i[1]==="rgba"){const g=Math.min(Math.max(Math.round(parseFloat(i[10])*255),0),255);x=Ac(g)}const s="0x"+f+d+y+x;return Ec[h]=s,s}return _I.test(h)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):r}},LI=(h="",r,i,f=null)=>{let d=0,y=0,x=[],s=null,g=0;const C=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,R=/^\s*(\/?>)\s*/,b=/^([A-Za-z0-9:.\-_@$]+)=\s*(["'])/,_=/^<>\s*/,D=/^\s*(<\/>)\s*/,w=()=>{h=$(h);try{return L(V),q(x)}catch(re){throw(re.name=="TemplateParseError"||re.name=="TemplateStructureError")&&(re.message=`${re.message}
${re.context}`),re}},L=re=>{d>=h.length||re()},$=re=>re.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),B=re=>{const oe=h.slice(d).match(re);return oe&&(y=d,d+=oe[0].length),oe},V=()=>{B(_)?(x.push({[Symbol.for("componentType")]:null,[ye.type]:"opening",[ye.level]:g,[ye.cursorTagStart]:y}),g++,L(V)):L(W)},W=()=>{B(D)?(g--,x.push({[Symbol.for("componentType")]:null,[ye.type]:"closing",[ye.level]:g}),L(V)):L(X)},X=()=>{const re=B(C);if(re)s={[Symbol.for("componentType")]:re[1],[ye.level]:g,[ye.cursorTagStart]:y},re[0].startsWith("</")?(g--,s[ye.type]="closing",s[ye.level]=g):(s[ye.type]="opening",g++),L(ie);else throw le("InvalidTag")},ie=()=>{const re=B(R);if(re){if(re[1]==="/>"){if(s[ye.type]==="closing")throw le("InvalidClosingTag");s[ye.type]="self-closing",g--}if(s[ye.type]==="opening"){const oe=h.slice(d,h.indexOf("<",d));oe&&(s.content=oe,d+=oe.length)}x.push(s),L(V)}else L(K)},K=()=>{const re=B(b);if(re){if(s[ye.type]==="closing")throw le("AttributesInClosingTag");const oe=re[2],Re=new RegExp(`^(.*?)${oe}\\s*`),Ae=B(Re);if(Ae){const Ie=pe(re[1],Ae[1]);s[Ie.name]=Ie.value,L(ie)}else throw le("MissingOrInvalidAttributeValue")}else throw le("InvalidAttribute")},pe=(re,oe)=>{if(re.includes(".")){const[Re,Ae]=re.split(".");return{name:Re,value:`{${Ae}: ${oe}}`}}return["color",":color",":effects","effects"].includes(re)?ue(re,oe):{name:re,value:oe}},ue=(re,oe)=>{let Re=oe,Ae=ua.normalize(Re,null);if(Ae===null){const Ie=/'([^']+)'/g;let _e,Te=0,je="";for(;(_e=Ie.exec(oe))!==null;){const F=_e[1],Ue=_e.index,He=_e[0].length;je+=oe.slice(Te,Ue),Ae=ua.normalize(F,null),Ae===null?je+=oe.slice(Ue,Ue+He):je+=`'${Ae}'`,Te=Ue+He}je+=oe.slice(Te),Re=je}else Re=Ae;return{name:re,value:Re}},q=re=>{let oe=[],Re=!1,Ae={children:[]},Ie=Ae;for(let _e=0;_e<re.length;_e++){let Te=re[_e];if(Te[ye.level]===0&&Te[ye.type]!=="closing"){if(Re)throw ge("MultipleTopLevelTags",Te);Re=!0}if(Te[ye.type]==="opening")oe.push({[ye.level]:Te[ye.level],[ye.type]:Te[ye.type],[ye.cursorTagStart]:Te[ye.cursorTagStart],[Symbol.for("componentType")]:Te[Symbol.for("componentType")],parent:Ie});else if(Te[ye.type]==="closing"){const F=oe.length===0;let Ue=!1,He=!1;if(F||(Ue=oe[oe.length-1][ye.level]!==Te[ye.level],He=oe[oe.length-1][Symbol.for("componentType")]!==Te[Symbol.for("componentType")]),F||Ue||He)throw ge("MismatchedClosingTag",Te);Ie=oe.pop().parent}const je={...Te};delete je[ye.type],delete je[ye.level],delete je[ye.cursorTagStart],Te[ye.type]==="opening"?(_e+1<re.length&&re[_e+1][ye.type]!=="closing"&&(je.children=[]),Ie.children.push(je),Ie=je):Te[ye.type]==="self-closing"&&Ie.children.push(je)}if(oe.length>0)throw ge("UnclosedTags",oe);return Ae},A=10,Y=50,le=re=>{const oe=se();re=`${re} in ${oe}`;const Re=new Error(re);Re.name="TemplateParseError";const Ae=Math.max(0,y-A),Ie=Math.min(h.length,d+Y),_e=h.slice(Ae,Ie),Te=d-Ae;return Re.context=de(Te,_e),Re},ge=(re,oe)=>{const Re=se();re=`${re} in ${Re}`;const Ae=new Error(re);Ae.name="TemplateStructureError",Array.isArray(oe)?Ae.context=oe.map(_e=>Ie(_e)).join(`
`):Ae.context=Ie(oe);function Ie(_e){const Te=Math.max(0,_e[ye.cursorTagStart]-A),je=h.slice(Te,Te+Y);return de(A,je)}return Ae},de=(re,oe)=>{const Re=" ".repeat(re)+"^";return`
${oe}
${Re}
`},se=()=>{if(i){let re=r||"",oe=i;for(;oe;)re=`${oe[Symbol.for("componentType")]}/${re}`,oe=oe.parent;return re}return f||"Blits.Application"};return w()};let _t;function PI(h={children:[]}){const r={renderCode:["const elms = []","let componentType","const rootComponent = component","let propData"],effectsCode:[],context:{props:[],components:this.components}};return _t=-1,FS.call(r,h),r.renderCode.push("return elms"),{render:new Function("parent","component","context","components","effect","getRaw",r.renderCode.join(`
`)),effects:r.effectsCode.map(i=>new Function("component","elms","context","components","rootComponent","effect",i)),context:r.context}}const Kc=function(h,r=!1,i={key:!1,component:"component.",forceEffect:!1,forloop:!1}){const f=i.forceEffect?this.effectsCode:this.renderCode;r&&f.push(`parent = ${r}`),"key"in h&&(i.key=Vi(h.key,i.component));const d=i.key?`elms[${_t}][${i.key}]`:`elms[${_t}]`;i.key&&f.push(`
      if(elms[${_t}] === undefined) {
        elms[${_t}] = {}
      }
    `),f.push(`const elementConfig${_t} = {}`),i.forloop&&f.push(`if(${d} === undefined) {`),f.push(`
    ${d} = this.element({parent: parent || 'root'}, component)
  `),i.forloop&&f.push("}");const y=h.children;delete h.children,h[Symbol.for("componentType")]==="Slot"&&f.push(`elementConfig${_t}[Symbol.for('isSlot')] = true`),Object.keys(h).forEach(x=>{if(x==="slot"&&f.push(`
        elementConfig${_t}['parent'] = component[Symbol.for('slots')].filter(slot => slot.ref === '${h.slot}').shift() || parent
      `),x!=="key")if($S(x)){if(i.holder&&x===":color")return;i.holder?this.effectsCode.push(`
        if(typeof skip${_t} === 'undefined' ||
          skip${_t}.indexOf('${x.substring(1)}') === -1)
          ${d}.set('${x.substring(1)}', ${Vi(h[x],i.component)})
        `):this.effectsCode.push(`
            ${d}.set('${x.substring(1)}', ${Vi(h[x],i.component)})
          `),f.push(`elementConfig${_t}['${x.substring(1)}'] = ${Vi(h[x],i.component)}`)}else f.push(`elementConfig${_t}['${x}'] = ${dg(h[x],x,i.component)}`)}),i.holder===!0&&f.push(`
    const skip${_t} = []
    if(typeof cmp${_t} !== 'undefined') {
      for(let key in cmp${_t}.config.props) {
        delete elementConfig${_t}[cmp${_t}.config.props[key]]
        skip${_t}.push(cmp${_t}.config.props[key])
      }
    }
    `),i.forloop&&f.push(`if(${d}.nodeId === undefined) {`),f.push(`${d}.populate(elementConfig${_t})`),i.forloop&&f.push("}"),y&&FS.call(this,{children:y},`${d}`,i)},jS=function(h,r=!1,i={key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1}){const f=i.forceEffect?this.effectsCode:this.renderCode;f.push(`
    const cmp${_t} =
      (context.components && context.components['${h[Symbol.for("componentType")]}']) || components['${h[Symbol.for("componentType")]}']
  `),"key"in h&&(i.key=Vi(h.key,i.component));const d=h.children;delete h.children,Kc.call(this,h,r,{...i,holder:!0}),r=i.key?`elms[${_t}][${i.key}]`:`elms[${_t}]`,_t++;const y=i.key?`elms[${_t}][${i.key}]`:`elms[${_t}]`;i.key&&f.push(`
      if(elms[${_t}] === undefined) {
        elms[${_t}] = {}
      }
    `),r&&f.push(`parent = ${r}`),f.push(`const props${_t} = {}`),i.forloop&&f.push(`if(${y} === undefined) {`),Object.keys(h).forEach(x=>{$S(x)?(this.effectsCode.push(`
        ${y}[Symbol.for('props')]['${x.substring(1)}'] = ${Vi(h[x],i.component)}`),f.push(`
        propData = ${Vi(h[x],i.component)}
        if (Array.isArray(propData) === true) {
          propData = getRaw(propData).slice(0)
        }
        props${_t}['${x.substring(1)}'] = propData`)):f.push(`props${_t}['${x}'] = ${dg(h[x],x,i.component)}`)}),f.push(`
    componentType = props${_t}['is'] || '${h[Symbol.for("componentType")]}'

    let component${_t}
    if(typeof componentType === 'string') {
      component${_t} = context.components && context.components[componentType] || components[componentType]
      if(!component${_t}) {
        throw new Error('Component "${h[Symbol.for("componentType")]}" not found')
      }
    } else if(typeof componentType === 'function' && componentType[Symbol.for('isComponent')] === true) {
      component${_t} = componentType
    }

    ${y} = component${_t}.call(null, {props: props${_t}}, ${r}, component)

    if (${y}[Symbol.for('slots')][0]) {
      parent = ${y}[Symbol.for('slots')][0]
      component = ${y}
    } else {
      parent = ${y}[Symbol.for('children')][0]
    }
  `),i.forloop&&f.push("}"),d&&(_t++,Kc.call(this,{children:d},!1,{...i}))},DI=function(h,r){const i=h[":for"];delete h[":for"];const f=h.key,d=Vi(f,"scope."),y=!(h.$shallow&&h.$shallow.toLowerCase()==="false");delete h.$shallow,delete h.key;const s=/(.+)\s+in\s+(.+)/gi.exec(i),[g,C="index"]=s[1].replace("(","").replace(")","").split(/\s*,\s*/),R=new RegExp(`(scope\\.(?!${g}\\.|${C}|key)(\\w+))`,"gi"),b={renderCode:[],effectsCode:[],context:{props:[],components:this.components}};r&&b.renderCode.push(`parent = ${r}`);const D=new RegExp(`\\$${C}(?!['\\w])`).exec(f);Array.isArray(D)&&b.renderCode.push(`console.warn(" Using '${C}' in the key, like key=${f},  is not recommended")`);const w=_t;b.renderCode.push(`
    const created${w} = []
    const forloop${w} = (collection = [], elms, created) => {
      const rawCollection = getRaw(collection)
      const keys = new Set()
      let l = rawCollection.length
      while(l--) {
        const ${g} = rawCollection[l]
        const ${C} = l
        keys.add('' +  ${Vi(f,"")||"l"})
      }
  `);const L=b.renderCode.length;b.renderCode.push(`
      created.length = 0
      const length = rawCollection.length
      for(let __index = 0; __index < length; __index++) {
        const scope = Object.create(component)
        parent = ${r}
        scope['${C}'] = __index
        scope['${g}'] = rawCollection[__index]
        scope['key'] = '' + ${d||"__index"}
  `),"ref"in h&&h.ref.indexOf("$")===-1&&(b.renderCode.push(`
        scope['__ref'] = '${h.ref}' + __index
    `),h.ref="$__ref"),b.renderCode.push(`
        created.push(scope.key)
  `),h[Symbol.for("componentType")]==="Element"||h[Symbol.for("componentType")]==="Slot"||h[Symbol.for("componentType")]==="Text"?(h[Symbol.for("componentType")]==="Text"&&(h.__textnode="true"),Kc.call(b,h,r,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0})):jS.call(b,h,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});const $=b.effectsCode.filter(X=>[...X.matchAll(R)].length===0),B=b.effectsCode.filter(X=>[...X.matchAll(R)].length!==0);y===!1&&b.renderCode.push(`
      scope['${g}'] = null
      scope['${g}'] = collection[__index]
  `),$.forEach((X,ie)=>{const K=X.indexOf(`scope.${ie}`)>-1?`'${Vi(s[2],"")}'`:null;X.indexOf("Symbol.for('props')")===-1?b.renderCode.push(`
        let eff${ie} = () => {
          ${X}
        }
        effect(eff${ie}, ${K})
        component[Symbol.for('effects')].push(eff${ie})
      `):b.renderCode.push(`
        ${X}
      `)}),b.renderCode.push(`
    }
  }`);const V=[];V.push(`
      let i = created.length

      while (i--) {
        if (keys.has(created[i]) === false) {
          const key = created[i]
  `);const W=_t;for(let X=w;X<=W;X++)V.push(`
          elms[${X}][key] && elms[${X}][key].destroy()
          delete elms[${X}][key]
      `);V.push(`
       }
    }
  `),b.renderCode.splice(L,0,...V),b.renderCode.push(`
    effect(() => {
      forloop${w}(${dg(s[2],":for")}, elms, created${w})
    }, '${Vi(s[2],"")}')
  `),B.forEach(X=>{const ie=[...X.matchAll(R)];let K=ie.length;const pe=[];for(;K--;){const ue=ie[K],q=`component.${ue[2]}`;pe.indexOf(q)===-1&&pe.push(q),ue[2]!==g&&(X=X.substring(0,ue.index)+q+X.substring(ue.index+ue[1].length))}b.renderCode.push(`
      effect(() => {
        void ${pe.join(", ")}
        for(let __index = 0; __index < ${Vi(s[2])}.length; __index++) {
          const scope = {}
          scope['${C}'] = __index
          scope['${g}'] = ${Vi(s[2])}[__index]
          scope['key'] = ${d||"__index"}
    `),b.renderCode.push(`
          ${X}
        }
      })
    `)}),this.renderCode.push(b.renderCode.join(`
`))},FS=function(h,r=!1,i={}){h.children&&h.children.forEach(f=>{_t++,Object.keys(f).indexOf(":for")>-1?DI.call(this,f,r):f[Symbol.for("componentType")]==="Element"||f[Symbol.for("componentType")]==="Slot"||f[Symbol.for("componentType")]==="Text"||f[Symbol.for("componentType")]==="Layout"?(f[Symbol.for("componentType")]==="Text"&&(f.__textnode="true"),f[Symbol.for("componentType")]==="Layout"&&(f.__layout="true"),Kc.call(this,f,r,i)):jS.call(this,f,r,i)})},Vi=(h,r="component.")=>{if(h===void 0)return h;const i=/('.*?')+/gi,f=/\$(\$(?=\$)|\$?)/g,d=h.matchAll(i),y=[];let x=0;for(const s of d)y.push(s[0]),h=h.replace(s[0],`[@@REPLACEMENT${x}@@]`),x++;return h=h.replace(f,(s,g)=>{if(g==="")return r;if(g==="$")return r+"$"}),y.forEach((s,g)=>{h=h.replace(`[@@REPLACEMENT${g}@@]`,s)}),h},dg=(h="",r=!1,i="component.")=>{const f=/\$\w+/gi;let d;if(r==="content")if(h.startsWith("$"))d=`${i}${h.replace("$","")}`;else{const y=h.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");d=`'${NI(y,i)}'`}else if(r!=="color"&&!isNaN(parseFloat(h))){if(d=parseFloat(h),h.endsWith("%")){const x={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[r];x&&(d=`parent.node.${x} * (${d} / 100)`)}}else if(h.toLowerCase()==="true")d=!0;else if(h.toLowerCase()==="false")d=!1;else if(r.startsWith("@")&&h){const y=i.slice(0,-1);d=`${y}['${h.replace("$","")}'] && ${y}['${h.replace("$","")}'].bind(${y})`}else if(h.startsWith("$"))d=`${i}${h.replace("$","")}`;else if(f.exec(h)){const y=/\w+\s*:\s*(?:[^\s,}]+|".*?"|'.*?')/g,x=h.match(y);if(d={},x)for(let s=0;s<x.length;s++){const g=x[s].split(/\s*:\s*/);g&&OI(g[0],g[1],i,d)}return UI(d)}else d=`"${h}"`;return d},$S=h=>h.startsWith(":"),NI=(h,r)=>{const i=/\{\{\s*(\$\S+)\s*\}\}/g,f=[...h.matchAll(i)];if(f.length)for(let[d,y]of f)h=h.replace(d,`${y.replace("$",`'+${r}`)}+'`);return h},OI=(h,r,i,f)=>{r.startsWith("$")?f[h]=`${i}${r.replace("$","")}`:f[h]=r},UI=h=>{const r=[];return Object.keys(h).forEach(i=>{r.push(`${i}: ${h[i]}`)}),` { ${r.join(", ")} }`},tS={};let BI=0;const jI=h=>`BlitsComponent::${h}_${tS[h]=(tS[h]||0)+1}`,FI=()=>++BI,yr={},Y0=(h,r,i,f=[])=>{yr[r]&&yr[r][h]&&yr[r][h].apply(i,f)},$I=(h,r,i)=>{const f=ye[h];yr[r]&&yr[r][f]&&yr[r][f].apply(i)},zI=(h={},r)=>{yr[r]={},[...Object.keys(h),...Object.getOwnPropertySymbols(h)].forEach(f=>{typeof h[f]=="function"&&(yr[r][f]=h[f])})};function VI(h,r=!1,i){const f={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},d=h.getContext(r?"webgl2":"webgl",f)||h.getContext("experimental-webgl",f);if(!d)throw new Error("Unable to create WebGL context");return i?new Proxy(d,{get(y,x){const s=y[x];return typeof s=="function"?(i.increment(String(x)),s.bind(y)):s}}):d}function et(h,r){if(pg()!==!0&&!h)throw new Error(r||"Assertion failed")}function nS(h,r,i){const f=Math.trunc(h>>>24),d=Math.trunc(h>>>16&255),y=Math.trunc(h>>>8&255),x=Math.trunc(h&255),s=Math.trunc(r>>>24),g=Math.trunc(r>>>16&255),C=Math.trunc(r>>>8&255),R=Math.trunc(r&255),b=Math.round(s*i+f*(1-i)),_=Math.round(g*i+d*(1-i)),D=Math.round(C*i+y*(1-i)),w=Math.round(R*i+x*(1-i));return(b<<24|_<<16|D<<8|w)>>>0}function HI(h,r){const i=h>>>24,f=h>>>16&255,d=h>>>8&255,y=Math.trunc((h&255)*r);return(i<<24|f<<16|d<<8|y)>>>0}let zS=!0;function GI(h){zS=h==="webgl"}function bc(h,r,i=!1){const f=(h&255)/255*r,d=zS?f:1,y=Math.trunc((h>>>24)*d),x=Math.trunc((h>>>16&255)*d),s=Math.trunc((h>>>8&255)*d),g=Math.trunc(f*255);return i?(g<<24|s<<16|x<<8|y)>>>0:(y<<24|x<<16|s<<8|g)>>>0}function Zc(h,r){return Object.prototype.hasOwnProperty.call(h,r)}function pg(){return{VITE_TMDB_KEY:"ABC123",VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&!0}let XI=1;function WI(){return XI++}class vr{constructor(){O(this,"eventListeners",{})}on(r,i){let f=this.eventListeners[r];f||(f=[]),f.push(i),this.eventListeners[r]=f}off(r,i){const f=this.eventListeners[r];if(!f)return;if(!i){delete this.eventListeners[r];return}const d=f.indexOf(i);d>=0&&f.splice(d,1)}once(r,i){const f=(d,y)=>{this.off(r,f),i(d,y)};this.on(r,f)}emit(r,i){const f=this.eventListeners[r];f&&[...f].forEach(d=>{d(this,i)})}removeAllListeners(){this.eventListeners={}}}const YI=/^(data|ftps?|https?):/,da=h=>{const r=h>>>24,i=h>>>16&255,f=h>>>8&255,d=h&255;return[r/255,i/255,f/255,d/255]},qI=h=>{const r=h>>>24,i=h>>>16&255,f=h>>>8&255,d=h&255;return[r,i,f,d]};function KI(h){return(h&255)/255}function O0(h){const r=Math.floor(h[0]*255),i=Math.floor(h[1]*255),f=Math.floor(h[2]*255),d=Math.floor(h[3]*255);return`rgba(${r},${i},${f},${d.toFixed(4)})`}function Qs(h,r,i,f,d){return d?(d.x1=h,d.y1=r,d.x2=i,d.y2=f,d):{x1:h,y1:r,x2:i,y2:f}}function U0(h,r){return h.x1<r.x2&&h.x2>r.x1&&h.y1<r.y2&&h.y2>r.y1}function ZI(h,r){return r?(r.x=h.x1,r.y=h.y1,r.width=h.x2-h.x1,r.height=h.y2-h.y1,r):{x:h.x1,y:h.y1,width:h.x2-h.x1,height:h.y2-h.y1}}function VS(h,r,i){const f=Math.max(h.x,r.x),d=Math.max(h.y,r.y),y=Math.min(h.x+h.width,r.x+r.width)-f,x=Math.min(h.y+h.height,r.y+r.height)-d;return y>0&&x>0?i?(i.x=f,i.y=d,i.width=y,i.height=x,i):{x:f,y:d,width:y,height:x}:i?(i.x=0,i.y=0,i.width=0,i.height=0,i):{x:0,y:0,width:0,height:0}}function HS(h,r){return r?(r.x=h.x,r.y=h.y,r.width=h.width,r.height=h.height,r):{x:h.x,y:h.y,width:h.width,height:h.height}}function QI(h,r){return h===r?!0:h===null||r===null?!1:h.x===r.x&&h.y===r.y&&h.width===r.width&&h.height===r.height}function iS(h,r){return h.x1<=r.x2&&h.y1<=r.y2&&h.x2>=r.x1&&h.y2>=r.y1}function JI(h,r){return h.x1<r.x1&&h.x2>r.x2&&h.y1<r.y1&&h.y2>r.y2}function eM(h){return h.x1<h.x2&&h.y1<h.y2}function tM(h){if(self.location.protocol==="file:"&&!YI.test(h)){const i=self.location.pathname.split("/");i.pop();const f=i.join("/"),d=self.location.protocol+"//"+f;return h.charAt(0)==="."&&(h=h.slice(1)),h.charAt(0)==="/"&&(h=h.slice(1)),d+"/"+h}return new URL(h,self.location.href).href}class wi{constructor(){O(this,"ta");O(this,"tb");O(this,"tx");O(this,"tc");O(this,"td");O(this,"ty");O(this,"_floatArr",null);O(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return nM}static multiply(r,i,f){const d=r.ta*i.ta+r.tb*i.tc,y=r.ta*i.tb+r.tb*i.td,x=r.ta*i.tx+r.tb*i.ty+r.tx,s=r.tc*i.ta+r.td*i.tc,g=r.tc*i.tb+r.td*i.td,C=r.tc*i.tx+r.td*i.ty+r.ty;return f||(f=new wi),f.ta=d,f.tb=y,f.tx=x,f.tc=s,f.td=g,f.ty=C,f.mutation=!0,f}static identity(r){return r||(r=new wi),r.ta=1,r.tb=0,r.tx=0,r.tc=0,r.td=1,r.ty=0,r.mutation=!0,r}static translate(r,i,f){return f||(f=new wi),f.ta=1,f.tb=0,f.tx=r,f.tc=0,f.td=1,f.ty=i,f.mutation=!0,f}static scale(r,i,f){return f||(f=new wi),f.ta=r,f.tb=0,f.tx=0,f.tc=0,f.td=i,f.ty=0,f.mutation=!0,f}static rotate(r,i){const f=Math.cos(r),d=Math.sin(r);return i||(i=new wi),i.ta=f,i.tb=-d,i.tx=0,i.tc=d,i.td=f,i.ty=0,i.mutation=!0,i}static copy(r,i){return i||(i=new wi),i.ta=r.ta,i.tc=r.tc,i.tb=r.tb,i.td=r.td,i.tx=r.tx,i.ty=r.ty,i.mutation=!0,i}translate(r,i){return this.tx=this.ta*r+this.tb*i+this.tx,this.ty=this.tc*r+this.td*i+this.ty,this.mutation=!0,this}scale(r,i){return this.ta=this.ta*r,this.tb=this.tb*i,this.tc=this.tc*r,this.td=this.td*i,this.mutation=!0,this}rotate(r){if(r===0||!(r%Math.PI*2))return this;const i=Math.cos(r),f=Math.sin(r),d=this.ta*i+this.tb*f,y=this.tb*i-this.ta*f,x=this.tc*i+this.td*f,s=this.td*i-this.tc*f;return this.ta=d,this.tb=y,this.tc=x,this.td=s,this.mutation=!0,this}multiply(r){return wi.multiply(this,r,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const nM=new wi,kc=0,Ic=2,Mc=4,Rc=6,_c=1,Lc=3,Pc=5,Dc=7;class Qc{constructor(r){O(this,"data");this.data=new Float32Array(8),r&&(this.data[kc]=r[kc],this.data[Ic]=r[Ic],this.data[Mc]=r[Mc],this.data[Rc]=r[Rc],this.data[_c]=r[_c],this.data[Lc]=r[Lc],this.data[Pc]=r[Pc],this.data[Dc]=r[Dc])}static translate(r,i,f,d,y,x,s,g,C){return C||(C=new Qc),C.data[kc]=r,C.data[Ic]=f,C.data[Mc]=y,C.data[Rc]=s,C.data[_c]=i,C.data[Lc]=d,C.data[Pc]=x,C.data[Dc]=g,C}get x1(){return this.data[kc]}get x2(){return this.data[Ic]}get x3(){return this.data[Mc]}get x4(){return this.data[Rc]}get y1(){return this.data[_c]}get y2(){return this.data[Lc]}get y3(){return this.data[Pc]}get y4(){return this.data[Dc]}}const oS=h=>h&&!(h&h-1),GS=(h,r,i,f)=>{const d=3*h,y=3*(i-h)-d,x=1-d-y,s=3*r,g=3*(f-r)-s,C=1-s-g;return function(R){if(R>=1)return 1;if(R<=0)return 0;let b=.5,_,D,w;for(let B=0;B<20;B++){if(_=b*(b*(b*x+y)+d),w=R-_,w>-1e-8&&w<1e-8)return b*(b*(b*C+g)+s);if(D=b*(b*(3*x)+2*y)+d,D>1e-10&&D<1e-10)break;b+=w/D}let L=0,$=1;for(let B=0;B<20;B++){if(b=.5*(L+$),_=b*(b*(b*x+y)+d),w=R-_,w>-1e-8&&w<1e-8)return b*(b*(b*C+g)+s);w<0?$=b:L=b}}},$c={},iM={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},zc=h=>h,oM=h=>{const r=/-?\d*\.?\d+/g,i=h.match(r);if(i){const[f,d,y,x]=i,s=parseFloat(f||"0.42"),g=parseFloat(d||"0"),C=parseFloat(y||"1"),R=parseFloat(x||"1"),b=GS(s,g,C,R);return $c[h]=b,b}return console.warn("Unknown cubic-bezier timing: "+h),zc},rM=h=>{if(h==="linear")return zc;if($c[h]!==void 0)return $c[h]||zc;if(h==="step-start")return()=>1;if(h==="step-end")return i=>i===1?1:0;const r=iM[h];if(r!==void 0){const[i,f,d,y]=r,x=GS(i,f,d,y);return $c[h]=x,x}return h.startsWith("cubic-bezier")?oM(h):(console.warn("Unknown timing function: "+h),zc)};function rS(h){return(h/1024/1024).toFixed(2)}class sM extends vr{constructor(i,f,d){super();O(this,"node");O(this,"props");O(this,"settings");O(this,"progress",0);O(this,"delayFor",0);O(this,"delay",0);O(this,"timingFunction");O(this,"propValuesMap",{});O(this,"dynPropValuesMap");this.node=i,this.props=f;for(const s in f)if(s!=="shaderProps")this.propValuesMap.props===void 0&&(this.propValuesMap.props={}),this.propValuesMap.props[s]={start:i[s]||0,target:f[s]};else if(i.shader.type!=="DynamicShader"){this.propValuesMap.shaderProps={};for(const g in f.shaderProps)this.propValuesMap.shaderProps[g]={start:i.shader.props[g],target:f.shaderProps[g]}}else{const g=Object.keys(f.shaderProps),C=g.length;this.dynPropValuesMap={};for(let R=0;R<C;R++){const b=g[R],_=f.shaderProps[b];this.dynPropValuesMap[b]={};const D=Object.entries(_),w=D.length;for(let L=0;L<w;L++){const[$,B]=D[L];this.dynPropValuesMap[b][$]={start:i.shader.props[b][$],target:B}}}}const y=d.easing||"linear",x=d.delay??0;this.settings={duration:d.duration??0,delay:x,easing:y,loop:d.loop??!1,repeat:d.repeat??0,repeatDelay:d.repeatDelay??0,stopMethod:d.stopMethod??!1},this.timingFunction=rM(y),this.delayFor=x,this.delay=x}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(i,f){const d=Object.entries(f),y=d.length;for(let x=0;x<y;x++){const[s,g]=d[x];i[s]=g.start}}restore(){if(this.reset(),this.propValuesMap.props!==void 0&&this.restoreValues(this.node,this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),f=i.length;if(f>0)for(let d=0;d<f;d++){const y=i[d];this.restoreValues(this.node.shader.props[y],this.dynPropValuesMap[y])}}}reverseValues(i){const f=Object.entries(i),d=f.length;for(let y=0;y<d;y++){const[x,s]=f[y];i[x]={start:s.target,target:s.start}}}reverse(){if(this.progress=0,this.propValuesMap.props!==void 0&&this.reverseValues(this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.reverseValues(this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),f=i.length;if(f>0)for(let d=0;d<f;d++){const y=i[d];this.reverseValues(this.dynPropValuesMap[y])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(i,f,d){return(this.timingFunction(i)||i)*(d-f)+f}updateValue(i,f,d,y){if(this.progress===1)return f;if(this.progress===0)return d;const x=f;if(i.indexOf("color")!==-1){if(d===x)return d;if(y){const s=this.timingFunction(this.progress)||this.progress;return nS(d,x,s)}return nS(d,x,this.progress)}return y?this.applyEasing(this.progress,d,x):d+(x-d)*this.progress}updateValues(i,f,d){const y=Object.entries(f),x=y.length;for(let s=0;s<x;s++){const[g,C]=y[s];i[g]=this.updateValue(g,C.target,C.start,d)}}update(i){const{duration:f,loop:d,easing:y,stopMethod:x}=this.settings,{delayFor:s}=this;if(f===0&&s===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=i,this.delayFor>=0)return;i=-this.delayFor,this.delayFor=0}if(f===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=i/f,this.progress>1&&(this.progress=d?0:1,this.delayFor=this.delay,x)){this.emit("finished",{});return}if(this.propValuesMap.props!==void 0&&this.updateValues(this.node,this.propValuesMap.props,y),this.propValuesMap.shaderProps!==void 0&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,y),this.dynPropValuesMap!==void 0){const g=Object.keys(this.dynPropValuesMap),C=g.length;if(C>0)for(let R=0;R<C;R++){const b=g[R];this.updateValues(this.node.shader.props[b],this.dynPropValuesMap[b],y)}}this.progress<1&&this.emit("tick",{progress:this.progress}),this.progress===1&&this.emit("finished",{})}}class aM extends vr{constructor(i,f){super();O(this,"manager");O(this,"animation");O(this,"stoppedPromise");O(this,"stoppedResolve",null);O(this,"state");this.manager=i,this.animation=f,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this),this.onTick=this.onTick.bind(this)}start(){return this.state!=="running"&&this.state!=="scheduled"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="scheduled"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.animation.on("tick",this.onTick),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating),this.animation.off("tick",this.onTick)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(i=>{this.stoppedResolve=i}))}onFinished(){et(this.stoppedResolve);const{loop:i,stopMethod:f}=this.animation.settings;if(f==="reverse"){this.animation.once("finished",this.onFinished),this.animation.reverse();return}i||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.state="running",this.emit("animating",this)}onTick(i,f){this.emit("tick",f)}}var ii;(function(h){h[h.Init=0]="Init",h[h.OutOfBounds=2]="OutOfBounds",h[h.InBounds=4]="InBounds",h[h.InViewport=8]="InViewport"})(ii||(ii={}));const Jl=new Map;Jl.set(ii.Init,"init");Jl.set(ii.OutOfBounds,"outOfBounds");Jl.set(ii.InBounds,"inBounds");Jl.set(ii.InViewport,"inViewport");var De;(function(h){h[h.Children=1]="Children",h[h.ScaleRotate=2]="ScaleRotate",h[h.Local=4]="Local",h[h.Global=8]="Global",h[h.Clipping=16]="Clipping",h[h.CalculatedZIndex=32]="CalculatedZIndex",h[h.ZIndexSortedChildren=64]="ZIndexSortedChildren",h[h.PremultipliedColors=128]="PremultipliedColors",h[h.WorldAlpha=256]="WorldAlpha",h[h.RenderState=512]="RenderState",h[h.IsRenderable=1024]="IsRenderable",h[h.RenderTexture=2048]="RenderTexture",h[h.ParentRenderTexture=4096]="ParentRenderTexture",h[h.RenderBounds=8192]="RenderBounds",h[h.None=0]="None",h[h.All=14335]="All"})(De||(De={}));class q0 extends vr{constructor(i,f){super();O(this,"stage");O(this,"children",[]);O(this,"_id",WI());O(this,"props");O(this,"updateType",De.All);O(this,"childUpdateType",De.None);O(this,"globalTransform");O(this,"scaleRotateTransform");O(this,"localTransform");O(this,"renderCoords");O(this,"renderBound");O(this,"strictBound");O(this,"preloadBound");O(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});O(this,"isRenderable",!1);O(this,"renderState",ii.Init);O(this,"worldAlpha",1);O(this,"premultipliedColorTl",0);O(this,"premultipliedColorTr",0);O(this,"premultipliedColorBl",0);O(this,"premultipliedColorBr",0);O(this,"calcZIndex",0);O(this,"hasRTTupdates",!1);O(this,"parentHasRenderTexture",!1);O(this,"onTextureLoaded",(i,f)=>{var d,y;this.autosizeNode(f),this.stage.requestRender(),this.parentHasRenderTexture&&this.setRTTUpdates(1),this.emit("loaded",{type:"texture",dimensions:f}),((y=(d=this.props.textureOptions)==null?void 0:d.resizeMode)==null?void 0:y.type)==="contain"&&this.setUpdateType(De.Local)});O(this,"onTextureFailed",(i,f)=>{this.emit("failed",{type:"texture",error:f})});O(this,"onTextureFreed",()=>{this.emit("freed",{type:"texture"})});this.stage=i,this.props={...f,parent:null,texture:null,src:null,rtt:!1},this.parent=f.parent,this.texture=f.texture,this.src=f.src,this.rtt=f.rtt,this.setUpdateType(De.ScaleRotate|De.Local|De.RenderBounds|De.RenderState)}loadTexture(){const{texture:i}=this.props;et(i),queueMicrotask(()=>{i.preventCleanup=this.props.preventCleanup,this.textureOptions.preload&&i.ctxTexture.load(),i.state==="loaded"?(et(i.dimensions),this.onTextureLoaded(i,i.dimensions)):i.state==="failed"?(et(i.error),this.onTextureFailed(i,i.error)):i.state==="freed"&&this.onTextureFreed(i),i.on("loaded",this.onTextureLoaded),i.on("failed",this.onTextureFailed),i.on("freed",this.onTextureFreed)})}unloadTexture(){this.texture!==null&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(i){this.autosize&&(this.width=i.width,this.height=i.height)}setUpdateType(i){this.updateType|=i;const f=this.props.parent;f!==null&&!(f.updateType&De.Children)&&f.setUpdateType(De.Children),this.parentHasRenderTexture&&(this.setRTTUpdates(i),f!==null&&f.setUpdateType(De.RenderTexture))}sortChildren(){this.children.sort((i,f)=>i.calcZIndex-f.calcZIndex)}updateScaleRotateTransform(){const{rotation:i,scaleX:f,scaleY:d}=this.props;if(i===0&&f===1&&d===1){this.scaleRotateTransform=void 0;return}this.scaleRotateTransform=wi.rotate(i,this.scaleRotateTransform).scale(f,d)}updateLocalTransform(){var C,R;const{x:i,y:f,width:d,height:y}=this.props,x=this.props.mountX*d,s=this.props.mountY*y;if(this.scaleRotateTransform){const b=this.props.pivotX*d,_=this.props.pivotY*y;this.localTransform=wi.translate(i-x+b,f-s+_,this.localTransform).multiply(this.scaleRotateTransform).translate(-b,-_)}else this.localTransform=wi.translate(i-x,f-s,this.localTransform);const g=this.props.texture;if(g&&g.dimensions&&((R=(C=this.props.textureOptions)==null?void 0:C.resizeMode)==null?void 0:R.type)==="contain"){let b=1,_=1,D=0,w=0;const{width:L,height:$}=g.dimensions,B=L/$,V=d/y;if(B>V){const W=d/L,X=$*W;w=(y-X)/2,_=X/y}else{const W=y/$,X=L*W;D=(d-X)/2,b=X/d}this.localTransform.translate(D,w).scale(b,_)}this.setUpdateType(De.Global)}update(i,f){var x,s;this.updateType&De.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(De.Local)),this.updateType&De.Local&&(this.updateLocalTransform(),this.setUpdateType(De.Global));const d=this.props.parent;let y=null;if(this.updateType&De.ParentRenderTexture){let g=this.parent;for(;g;)g.rtt&&(this.parentHasRenderTexture=!0),g=g.parent}if(this.updateType^De.All&&this.updateType&De.RenderTexture)for(let g=0,C=this.children.length;g<C;g++)(x=this.children[g])==null||x.setUpdateType(De.All);if(this.updateType&De.Global&&(et(this.localTransform),this.globalTransform=wi.copy((d==null?void 0:d.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&((s=this.props.parent)!=null&&s.rtt)&&(this.globalTransform=wi.identity()),d&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(De.RenderState|De.Children),this.childUpdateType|=De.Global,this.clipping===!0&&(this.setUpdateType(De.Clipping|De.RenderBounds),this.childUpdateType|=De.RenderBounds)),this.updateType&De.RenderBounds&&(this.createRenderBounds(),this.setUpdateType(De.RenderState),this.setUpdateType(De.Children)),this.updateType&De.RenderState&&(y=this.checkRenderBounds(),this.setUpdateType(De.IsRenderable),y!==ii.OutOfBounds&&this.updateRenderState(y)),this.updateType&De.WorldAlpha&&(d?this.worldAlpha=d.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(De.Children|De.PremultipliedColors|De.IsRenderable),this.childUpdateType|=De.WorldAlpha),this.updateType&De.IsRenderable&&this.updateIsRenderable(),this.updateType&De.Clipping&&(this.calculateClippingRect(f),this.setUpdateType(De.Children),this.childUpdateType|=De.Clipping,this.childUpdateType|=De.RenderBounds),this.updateType&De.PremultipliedColors&&(this.premultipliedColorTl=bc(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=bc(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=bc(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=bc(this.props.colorBr,this.worldAlpha,!0))),d!==null&&this.updateType&De.CalculatedZIndex&&(this.calculateZIndex(),d.setUpdateType(De.ZIndexSortedChildren)),!(this.props.strictBounds===!0&&this.renderState===ii.OutOfBounds)){if(this.updateType&De.Children&&this.children.length>0&&this.rtt===!1)for(let g=0,C=this.children.length;g<C;g++){const R=this.children[g];R.setUpdateType(this.childUpdateType),R.updateType!==0&&R.update(i,this.clippingRect)}this.updateType&De.ZIndexSortedChildren&&this.sortChildren(),y===ii.OutOfBounds&&this.updateRenderState(y),this.updateType=0,this.childUpdateType=0}}checkRenderProps(){return this.props.texture?!0:!this.props.width||!this.props.height?!1:!!(this.props.shader!==this.stage.defShaderCtr||this.props.clipping||this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0)}checkRenderBounds(){return et(this.renderBound),et(this.strictBound),et(this.preloadBound),iS(this.renderBound,this.strictBound)?ii.InViewport:iS(this.renderBound,this.preloadBound)?ii.InBounds:JI(this.renderBound,this.strictBound)?ii.InViewport:this.parent!==null&&(this.props.width===0||this.props.height===0)?this.parent.renderState:ii.OutOfBounds}createPreloadBounds(i){const f=this.stage.boundsMargin;return Qs(i.x1-f[3],i.y1-f[0],i.x2+f[1],i.y2+f[2])}updateBoundingRect(){const{renderCoords:i,globalTransform:f}=this;et(f),et(i);const{tb:d,tc:y}=f,{x1:x,y1:s,x3:g,y3:C}=i;if(d===0||y===0)this.renderBound=Qs(x,s,g,C,this.renderBound);else{const{x2:R,x4:b,y2:_,y4:D}=i;this.renderBound=Qs(Math.min(x,R,g,b),Math.min(s,_,C,D),Math.max(x,R,g,b),Math.max(s,_,C,D),this.renderBound)}}createRenderBounds(){if(et(this.stage),this.clipping===!1)if(this.parent!==null&&this.parent.strictBound!==void 0){this.strictBound=Qs(this.parent.strictBound.x1,this.parent.strictBound.y1,this.parent.strictBound.x2,this.parent.strictBound.y2),this.preloadBound=this.createPreloadBounds(this.strictBound);return}else{this.strictBound=Qs(0,0,this.stage.root.width,this.stage.root.height),this.preloadBound=this.createPreloadBounds(this.strictBound);return}const{x:i,y:f,width:d,height:y}=this.props,{tx:x,ty:s}=this.globalTransform||{},g=x??i,C=s??f;this.strictBound=Qs(g,C,g+d,C+y,this.strictBound),this.preloadBound=this.createPreloadBounds(this.strictBound)}updateRenderState(i){if(i===this.renderState)return;const f=this.renderState;this.renderState=i;const d=Jl.get(i);et(d),this.emit(d,{previous:f,current:i})}updateIsRenderable(){let i;this.worldAlpha===0||!this.checkRenderProps()?i=!1:i=this.renderState>ii.OutOfBounds,this.isRenderable!==i&&(this.isRenderable=i,this.onChangeIsRenderable(i))}onChangeIsRenderable(i){var f;(f=this.texture)==null||f.setRenderableOwner(this,i)}calculateRenderCoords(){const{width:i,height:f,globalTransform:d}=this;et(d);const{tx:y,ty:x,ta:s,tb:g,tc:C,td:R}=d;if(g===0&&C===0){const b=y,_=y+i*s,D=x,w=x+f*R;this.renderCoords=Qc.translate(b,D,_,D,_,w,b,w,this.renderCoords)}else this.renderCoords=Qc.translate(y,x,y+i*s,x+i*C,y+i*s+f*g,x+i*C+f*R,y+f*g,x+f*R,this.renderCoords)}calculateClippingRect(i){et(this.globalTransform);const{clippingRect:f,props:d,globalTransform:y}=this,{clipping:x}=d,s=y.tb!==0||y.tc!==0;x===!0&&s===!1?(f.x=y.tx,f.y=y.ty,f.width=this.width*y.ta,f.height=this.height*y.td,f.valid=!0):f.valid=!1,i.valid===!0&&f.valid===!0?VS(i,f,f):i.valid===!0&&(HS(i,f),f.valid=!0)}calculateZIndex(){var x,s;const i=this.props,f=i.zIndex||0,d=((x=i.parent)==null?void 0:x.zIndex)||0;let y=f;(s=i.parent)!=null&&s.zIndexLocked&&(y=f<d?f:d),this.calcZIndex=y}destroy(){var i;for(this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,this.renderCoords=void 0,this.renderBound=void 0,this.strictBound=void 0,this.preloadBound=void 0,this.globalTransform=void 0,this.scaleRotateTransform=void 0,this.localTransform=void 0,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;this.children.length>0;)(i=this.children[0])==null||i.destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}renderQuads(i){this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(et(this.globalTransform),et(this.renderCoords),i.addQuad({width:this.props.width,height:this.props.height,colorTl:this.premultipliedColorTl,colorTr:this.premultipliedColorTr,colorBl:this.premultipliedColorBl,colorBr:this.premultipliedColorBr,texture:this.texture,textureOptions:this.textureOptions,zIndex:this.zIndex,shader:this.shader.shader,shaderProps:this.shader.getResolvedProps(),alpha:this.worldAlpha,clippingRect:this.clippingRect,tx:this.globalTransform.tx,ty:this.globalTransform.ty,ta:this.globalTransform.ta,tb:this.globalTransform.tb,tc:this.globalTransform.tc,td:this.globalTransform.td,renderCoords:this.renderCoords,rtt:this.rtt,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions}))}get id(){return this._id}get data(){return this.props.data}set data(i){this.props.data=i}get x(){return this.props.x}set x(i){this.props.x!==i&&(this.props.x=i,this.setUpdateType(De.Local))}get absX(){var i,f,d;return this.props.x+-this.props.width*this.props.mountX+(((i=this.props.parent)==null?void 0:i.absX)||((d=(f=this.props.parent)==null?void 0:f.globalTransform)==null?void 0:d.tx)||0)}get absY(){var i;return this.props.y+-this.props.height*this.props.mountY+(((i=this.props.parent)==null?void 0:i.absY)??0)}get y(){return this.props.y}set y(i){this.props.y!==i&&(this.props.y=i,this.setUpdateType(De.Local))}get width(){return this.props.width}set width(i){this.props.width!==i&&(this.props.width=i,this.setUpdateType(De.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(De.RenderTexture)))}get height(){return this.props.height}set height(i){this.props.height!==i&&(this.props.height=i,this.setUpdateType(De.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(De.RenderTexture)))}get scale(){return this.scaleX}set scale(i){this.scaleX=i,this.scaleY=i}get scaleX(){return this.props.scaleX}set scaleX(i){this.props.scaleX!==i&&(this.props.scaleX=i,this.setUpdateType(De.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(i){this.props.scaleY!==i&&(this.props.scaleY=i,this.setUpdateType(De.ScaleRotate))}get mount(){return this.props.mount}set mount(i){(this.props.mountX!==i||this.props.mountY!==i)&&(this.props.mountX=i,this.props.mountY=i,this.props.mount=i,this.setUpdateType(De.Local))}get mountX(){return this.props.mountX}set mountX(i){this.props.mountX!==i&&(this.props.mountX=i,this.setUpdateType(De.Local))}get mountY(){return this.props.mountY}set mountY(i){this.props.mountY!==i&&(this.props.mountY=i,this.setUpdateType(De.Local))}get pivot(){return this.props.pivot}set pivot(i){(this.props.pivotX!==i||this.props.pivotY!==i)&&(this.props.pivotX=i,this.props.pivotY=i,this.props.pivot=i,this.setUpdateType(De.Local))}get pivotX(){return this.props.pivotX}set pivotX(i){this.props.pivotX!==i&&(this.props.pivotX=i,this.setUpdateType(De.Local))}get pivotY(){return this.props.pivotY}set pivotY(i){this.props.pivotY!==i&&(this.props.pivotY=i,this.setUpdateType(De.Local))}get rotation(){return this.props.rotation}set rotation(i){this.props.rotation!==i&&(this.props.rotation=i,this.setUpdateType(De.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(i){this.props.alpha=i,this.setUpdateType(De.PremultipliedColors|De.WorldAlpha|De.Children|De.IsRenderable),this.childUpdateType|=De.WorldAlpha}get autosize(){return this.props.autosize}set autosize(i){this.props.autosize=i}get clipping(){return this.props.clipping}set clipping(i){this.props.clipping=i,this.setUpdateType(De.Clipping|De.RenderBounds|De.Children),this.childUpdateType|=De.Global|De.Clipping}get color(){return this.props.color}set color(i){this.colorTop=i,this.colorBottom=i,this.colorLeft=i,this.colorRight=i,this.props.color=i,this.setUpdateType(De.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(i){(this.props.colorTl!==i||this.props.colorTr!==i)&&(this.colorTl=i,this.colorTr=i),this.props.colorTop=i,this.setUpdateType(De.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(i){(this.props.colorBl!==i||this.props.colorBr!==i)&&(this.colorBl=i,this.colorBr=i),this.props.colorBottom=i,this.setUpdateType(De.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(i){(this.props.colorTl!==i||this.props.colorBl!==i)&&(this.colorTl=i,this.colorBl=i),this.props.colorLeft=i,this.setUpdateType(De.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(i){(this.props.colorTr!==i||this.props.colorBr!==i)&&(this.colorTr=i,this.colorBr=i),this.props.colorRight=i,this.setUpdateType(De.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(i){this.props.colorTl=i,this.setUpdateType(De.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(i){this.props.colorTr=i,this.setUpdateType(De.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(i){this.props.colorBl=i,this.setUpdateType(De.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(i){this.props.colorBr=i,this.setUpdateType(De.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(i){this.props.zIndexLocked=i,this.setUpdateType(De.CalculatedZIndex|De.Children);for(let f=0,d=this.children.length;f<d;f++)this.children[f].setUpdateType(De.CalculatedZIndex)}get zIndex(){return this.props.zIndex}set zIndex(i){this.props.zIndex=i,this.setUpdateType(De.CalculatedZIndex|De.Children);for(let f=0,d=this.children.length;f<d;f++)this.children[f].setUpdateType(De.CalculatedZIndex)}get parent(){return this.props.parent}set parent(i){const f=this.props.parent;if(f!==i){if(this.props.parent=i,f){const d=f.children.indexOf(this);et(d!==-1,"CoreNode.parent: Node not found in old parent's children!"),f.children.splice(d,1),f.setUpdateType(De.Children|De.ZIndexSortedChildren)}i&&(i.children.push(this),this.setUpdateType(De.All),i.setUpdateType(De.Children|De.ZIndexSortedChildren),(i.rtt||i.parentHasRenderTexture)&&this.setRTTUpdates(De.All)),this.updateScaleRotateTransform(),this.setUpdateType(De.RenderBounds|De.Children)}}get preventCleanup(){return this.props.preventCleanup}set preventCleanup(i){this.props.preventCleanup=i}get rtt(){return this.props.rtt}set rtt(i){var f,d;if(this.props.rtt===!0&&(this.props.rtt=i,i===!1&&this.texture!==null)){this.unloadTexture(),this.setUpdateType(De.All);for(let y=0,x=this.children.length;y<x;y++)this.children[y].parentHasRenderTexture=!1;(f=this.stage.renderer)==null||f.removeRTTNode(this);return}if(i!==!1){this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.props.rtt=!0,this.hasRTTupdates=!0,this.setUpdateType(De.All);for(let y=0,x=this.children.length;y<x;y++)this.children[y].setUpdateType(De.All);(d=this.stage.renderer)==null||d.renderToTexture(this)}}get shader(){return this.props.shader}set shader(i){this.props.shader!==i&&(this.props.shader=i,this.setUpdateType(De.IsRenderable))}get src(){return this.props.src}set src(i){if(this.props.src!==i){if(this.props.src=i,!i){this.texture=null;return}this.texture=this.stage.txManager.loadTexture("ImageTexture",{src:i,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight})}}set imageType(i){this.props.imageType!==i&&(this.props.imageType=i)}get imageType(){return this.props.imageType||null}get srcHeight(){return this.props.srcHeight}set srcHeight(i){this.props.srcHeight=i}get srcWidth(){return this.props.srcWidth}set srcWidth(i){this.props.srcWidth=i}get srcX(){return this.props.srcX}set srcX(i){this.props.srcX=i}get srcY(){return this.props.srcY}set srcY(i){this.props.srcY=i}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let i=this.parent;for(;i;){if(i.rtt)return i;i=i.parent}return null}get texture(){return this.props.texture}set texture(i){if(this.props.texture===i)return;const f=this.props.texture;f&&(f.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=i,i&&(i.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(De.IsRenderable)}set textureOptions(i){this.props.textureOptions=i}get textureOptions(){return this.props.textureOptions}get strictBounds(){return this.props.strictBounds}set strictBounds(i){i!==this.props.strictBounds&&(this.props.strictBounds=i,this.setUpdateType(De.RenderBounds|De.Children),this.childUpdateType|=De.RenderBounds|De.Children)}setRTTUpdates(i){var f;this.hasRTTupdates=!0,(f=this.parent)==null||f.setRTTUpdates(i)}animate(i,f){const d=new sM(this,i,f);return new aM(this.stage.animationManager,d)}flush(){}}const lM=h=>{let r=!1;const i=()=>{if(h.updateFrameTime(),h.updateAnimations(),!h.hasSceneUpdates()){h.calculateFps(),setTimeout(i,16.666666666666668),r||(h.txMemManager.checkCleanup()&&h.txMemManager.cleanup(),h.eventBus.emit("idle"),r=!0),h.flushFrameEvents();return}r=!1,h.drawFrame(),h.flushFrameEvents(),requestAnimationFrame(i)};requestAnimationFrame(i)},uM=()=>performance?performance.now():Date.now();class fM{constructor(){O(this,"activeAnimations",new Set)}registerAnimation(r){this.activeAnimations.add(r)}unregisterAnimation(r){this.activeAnimations.delete(r)}update(r){this.activeAnimations.forEach(i=>{i.update(r)})}}var fo;(function(h){h[h.generic=0]="generic",h[h.color=1]="color",h[h.image=2]="image",h[h.noise=3]="noise",h[h.renderToTexture=4]="renderToTexture",h[h.subTexture=5]="subTexture"})(fo||(fo={}));class eu extends vr{constructor(i){super();O(this,"txManager");O(this,"dimensions",null);O(this,"error",null);O(this,"state","freed");O(this,"renderableOwners",new Set);O(this,"renderable",!1);O(this,"lastRenderableChangeTime",0);O(this,"type",fo.generic);O(this,"preventCleanup",!1);this.txManager=i}setRenderableOwner(i,f){var y,x;const d=this.renderableOwners.size;if(f){this.renderableOwners.add(i);const s=this.renderableOwners.size;s>d&&s===1&&(this.renderable=!0,this.lastRenderableChangeTime=this.txManager.frameTime,(y=this.onChangeIsRenderable)==null||y.call(this,!0))}else{this.renderableOwners.delete(i);const s=this.renderableOwners.size;s<d&&s===0&&(this.renderable=!1,this.lastRenderableChangeTime=this.txManager.frameTime,(x=this.onChangeIsRenderable)==null||x.call(this,!1))}}get ctxTexture(){const i=this.txManager.renderer.createCtxTexture(this);return Object.defineProperty(this,"ctxTexture",{value:i}),i}setState(i,...f){if(this.state!==i){if(this.state=i,i==="loaded"){const d=f;this.dimensions=d[0]}else if(i==="failed"){const d=f;this.error=d[0]}this.emit(i,...f)}}static makeCacheKey(i){return!1}static resolveDefaults(i){return{}}}function cM(){function h(i){return i.indexOf("image/png")!==-1}function r(i,f,d,y,x,s){return new Promise(function(g,C){var R=new XMLHttpRequest;R.open("GET",i,!0),R.responseType="blob",R.onload=function(){if(R.status!==200)return C(new Error("Failed to load image: "+R.statusText));var b=R.response,_=f!==void 0?f:h(b.type);if(x!==null&&s!==null){createImageBitmap(b,d||0,y||0,x,s,{premultiplyAlpha:_?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(D){g({data:D,premultiplyAlpha:f})}).catch(function(D){C(D)});return}createImageBitmap(b,{premultiplyAlpha:_?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(D){g({data:D,premultiplyAlpha:f})}).catch(function(D){C(D)})},R.onerror=function(){C(new Error("Network error occurred while trying to fetch the image."))},R.send()})}self.onmessage=i=>{var f=i.data.src,d=i.data.id,y=i.data.premultiplyAlpha,x=i.data.sx,s=i.data.sy,g=i.data.sw,C=i.data.sh;r(f,y,x,s,g,C).then(function(R){self.postMessage({id:d,src:f,data:R})}).catch(function(R){self.postMessage({id:d,src:f,error:R.message})})}}class hM{constructor(r){O(this,"imageWorkersEnabled",!0);O(this,"messageManager",{});O(this,"workers",[]);O(this,"workerIndex",0);O(this,"nextId",0);this.workers=this.createWorkers(r),this.workers.forEach(i=>{i.onmessage=this.handleMessage.bind(this)})}handleMessage(r){const{id:i,data:f,error:d}=r.data,y=this.messageManager[i];if(y){const[x,s]=y;delete this.messageManager[i],d?s(new Error(d)):x(f)}}createWorkers(r=1){const i=`(${cM.toString()})()`,f=new Blob([i.replace('"use strict";',"")],{type:"application/javascript"}),d=(self.URL?URL:webkitURL).createObjectURL(f),y=[];for(let x=0;x<r;x++)y.push(new Worker(d));return y}getNextWorker(){const r=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,r}getImage(r,i,f,d,y,x){return new Promise((s,g)=>{try{if(this.workers){const C=this.nextId++;this.messageManager[C]=[s,g];const R=this.getNextWorker();R&&R.postMessage({id:C,src:r,premultiplyAlpha:i,sx:f,sy:d,sw:y,sh:x})}}catch(C){g(C)}})}}const Yl=class Yl extends eu{constructor(i,f){super(i);O(this,"type",fo.color);O(this,"props");this.props=Yl.resolveDefaults(f||{})}get color(){return this.props.color}set color(i){this.props.color=i}async getTextureData(){const i=new Uint32Array([this.color]),f=new Uint8ClampedArray(i.buffer);return{data:new ImageData(f,1,1),premultiplyAlpha:!0}}static makeCacheKey(i){return`ColorTexture,${Yl.resolveDefaults(i).color}`}static resolveDefaults(i){return{color:i.color||4294967295}}};O(Yl,"z$__type__Props");let Jc=Yl;function dM(h){return/\.(ktx|pvr)$/.test(h)}const sS=async h=>{const i=await(await fetch(h)).arrayBuffer();return h.indexOf(".ktx")!==-1?pM(i):gM(i)},pM=async h=>{const r=new DataView(h),i=r.getUint32(12)===16909060,f=[],d={glInternalFormat:r.getUint32(28,i),pixelWidth:r.getUint32(36,i),pixelHeight:r.getUint32(40,i),numberOfMipmapLevels:r.getUint32(56,i),bytesOfKeyValueData:r.getUint32(60,i)};let y=64;y+=d.bytesOfKeyValueData;for(let x=0;x<d.numberOfMipmapLevels;x++){const s=r.getUint32(y);y+=4,f.push(r.buffer.slice(y,s)),y+=s}return{data:{glInternalFormat:d.glInternalFormat,mipmaps:f,width:d.pixelWidth||0,height:d.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},gM=async h=>{const s=h,g=new Int32Array(s,0,13),C=g[12]+52,R=new Uint8Array(s,C),b=[],_={pixelWidth:g[7],pixelHeight:g[6],numberOfMipmapLevels:g[11]||0};let D=0,w=_.pixelWidth||0,L=_.pixelHeight||0;for(let $=0;$<_.numberOfMipmapLevels;$++){const B=(w+3>>2)*(L+3>>2)*8,V=new Uint8Array(s,R.byteOffset+D,B);b.push(V),D+=B,w=w>>1,L=L>>1}return{data:{glInternalFormat:36196,mipmaps:b,width:_.pixelWidth||0,height:_.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}};function mM(h){return/\.(svg)$/.test(h)}const aS=(h,r,i,f,d,y,x)=>new Promise((s,g)=>{const C=document.createElement("canvas"),R=C.getContext("2d");et(R),R.imageSmoothingEnabled=!0;const b=new Image;b.onload=()=>{const _=f??0,D=d??0,w=r||b.width,L=i||b.height;C.width=w,C.height=L,R.drawImage(b,0,0,w,L),s({data:R.getImageData(_,D,y??w,x??L),premultiplyAlpha:!1})},b.onerror=_=>{g(_)},b.src=h}),ql=class ql extends eu{constructor(i,f){super(i);O(this,"props");O(this,"type",fo.image);this.props=ql.resolveDefaults(f)}hasAlphaChannel(i){return i.indexOf("image/png")!==-1}async loadImage(i){const{premultiplyAlpha:f,sx:d,sy:y,sw:x,sh:s,width:g,height:C}=this.props;if(this.txManager.imageWorkerManager!==null)return await this.txManager.imageWorkerManager.getImage(i,f,d,y,x,s);if(this.txManager.hasCreateImageBitmap===!0){const b=await(await fetch(i)).blob(),_=f??this.hasAlphaChannel(b.type);return x!==null&&s!==null?{data:await createImageBitmap(b,d??0,y??0,x,s,{premultiplyAlpha:_?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:_}:{data:await createImageBitmap(b,{premultiplyAlpha:_?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:_}}else{const R=new Image;return i.startsWith("data:")||(R.crossOrigin="Anonymous"),R.src=i,await new Promise((b,_)=>{R.onload=()=>b(),R.onerror=()=>_(new Error("Failed to load image"))}).catch(b=>{console.error(b)}),{data:R,premultiplyAlpha:f??!0}}}async getTextureData(){const{src:i,premultiplyAlpha:f,type:d}=this.props;if(i===null)return{data:null};if(typeof i!="string")return i instanceof ImageData?{data:i,premultiplyAlpha:f}:{data:i(),premultiplyAlpha:f};const y=tM(i);return d==="regular"?this.loadImage(y):d==="svg"?aS(y,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):mM(i)===!0?aS(y,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):d==="compressed"||dM(i)===!0?sS(y):this.loadImage(y)}static makeCacheKey(i){const f=ql.resolveDefaults(i),d=f.key||f.src;if(typeof d!="string")return!1;let y="";return f.sh!==null&&f.sw!==null&&(y+=",",y+=f.sx??"",y+=f.sy??"",y+=f.sw||"",y+=f.sh||""),`ImageTexture,${d},${f.premultiplyAlpha??"true"}${y}`}static resolveDefaults(i){return{src:i.src??"",premultiplyAlpha:i.premultiplyAlpha??!0,key:i.key??null,type:i.type??null,width:i.width??null,height:i.height??null,sx:i.sx??null,sy:i.sy??null,sw:i.sw??null,sh:i.sh??null}}};O(ql,"z$__type__Props");let eh=ql;const Kl=class Kl extends eu{constructor(i,f){super(i);O(this,"props");O(this,"type",fo.noise);this.props=Kl.resolveDefaults(f)}async getTextureData(){const{width:i,height:f}=this.props,d=i*f*4,y=new Uint8ClampedArray(d);for(let x=0;x<d;x+=4){const s=Math.floor(Math.random()*256);y[x]=s,y[x+1]=s,y[x+2]=s,y[x+3]=255}return{data:new ImageData(y,i,f)}}static makeCacheKey(i){if(i.cacheId===void 0)return!1;const f=Kl.resolveDefaults(i);return`NoiseTexture,${f.width},${f.height},${f.cacheId}`}static resolveDefaults(i){return{width:i.width??128,height:i.height??128,cacheId:i.cacheId??0}}};O(Kl,"z$__type__Props");let K0=Kl;const uh=class uh extends eu{constructor(i,f){super(i);O(this,"props");O(this,"parentTexture");O(this,"type",fo.subTexture);O(this,"onParentTxLoaded",()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})});O(this,"onParentTxFailed",(i,f)=>{this.setState("failed",f)});this.props=uh.resolveDefaults(f||{}),this.parentTexture=this.props.texture,queueMicrotask(()=>{const d=this.parentTexture;d.state==="loaded"?this.onParentTxLoaded(d,d.dimensions):d.state==="failed"&&this.onParentTxFailed(d,d.error),d.on("loaded",this.onParentTxLoaded),d.on("failed",this.onParentTxFailed)})}onChangeIsRenderable(i){this.parentTexture.setRenderableOwner(this,i)}async getTextureData(){return{data:this.props}}static makeCacheKey(i){return!1}static resolveDefaults(i){return{texture:i.texture,x:i.x||0,y:i.y||0,width:i.width||0,height:i.height||0}}};O(uh,"z$__type__Props");let Zl=uh;const fh=class fh extends eu{constructor(i,f){super(i);O(this,"props");O(this,"type",fo.renderToTexture);this.props=fh.resolveDefaults(f||{})}get width(){return this.props.width}set width(i){this.props.width=i}get height(){return this.props.height}set height(i){this.props.height=i}async getTextureData(){return{data:null,premultiplyAlpha:null}}static resolveDefaults(i){return{width:i.width||256,height:i.height||256}}};O(fh,"z$__type__Props");let th=fh;class yM{constructor(r){O(this,"keyCache",new Map);O(this,"inverseKeyCache",new WeakMap);O(this,"txConstructors",{});O(this,"imageWorkerManager",null);O(this,"hasCreateImageBitmap",!!self.createImageBitmap);O(this,"hasWorker",!!self.Worker);O(this,"renderer");O(this,"frameTime",0);this.hasCreateImageBitmap&&this.hasWorker&&r>0&&(this.imageWorkerManager=new hM(r)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",eh),this.registerTextureType("ColorTexture",Jc),this.registerTextureType("NoiseTexture",K0),this.registerTextureType("SubTexture",Zl),this.registerTextureType("RenderTexture",th)}registerTextureType(r,i){this.txConstructors[r]=i}loadTexture(r,i){let f;const d=this.txConstructors[r];if(!d)throw new Error(`Texture type "${r}" is not registered`);if(!f){const y=d.makeCacheKey(i);y&&this.keyCache.has(y)?f=this.keyCache.get(y):(f=new d(this,i),y&&this.initTextureToCache(f,y))}return f}initTextureToCache(r,i){const{keyCache:f,inverseKeyCache:d}=this;f.set(i,r),d.set(r,i)}removeTextureFromCache(r){const{inverseKeyCache:i,keyCache:f}=this,d=i.get(r);d&&f.delete(d)}}const vM={normal:400,bold:700,bolder:900,lighter:100},lS=h=>typeof h=="number"?h:vM[h]||400;function xM(h,r,i,f,d){let y=lS(i);for(const x of h){const s=x[r];if(!s)continue;if(s.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${r}' - will be used for all weights and styles`),s.values().next().value;const g=new Map;for(const R of s){const b=lS(R.descriptors.weight);if(b===y&&R.descriptors.style===f&&R.descriptors.stretch===d)return R;g.set(b,R)}const C=`TrFontManager: No exact match: '${r} Weight: ${y} Style: ${f} Stretch: ${d}'`;if(console.error(C),y===400&&g.has(500))return g.get(500);if(y===500&&g.has(400))return g.get(400);if(y<400){for(;y>0;){if(g.has(y))return g.get(y);y-=100}y=600}for(;y<1e3;){if(g.has(y))return g.get(y);y+=100}for(y=500;y>0;){if(g.has(y))return g.get(y);y-=100}}}class wM{constructor(r){O(this,"textRenderers");O(this,"fontCache",new Map);this.textRenderers=r}addFontFace(r){for(const i in this.textRenderers){const f=this.textRenderers[i];f&&f.isFontFaceSupported(r)&&f.addFontFace(r)}}resolveFontFace(r,i,f){const{fontFamily:d,fontWeight:y,fontStyle:x,fontStretch:s}=i,g=`${f}_${d}_${x}_${y}_${s}`;if(this.fontCache.has(g)===!0)return this.fontCache.get(g);const C=xM(r,d,y,x,s);return C!==void 0&&this.fontCache.set(g,C),C}}class XS{static makeCacheKey(r){return!1}static resolveDefaults(r){return{}}}function uS(h,r,i){const f=h.createShader(r);if(!f)throw new Error;if(h.shaderSource(f,i),h.compileShader(f),h.getShaderParameter(f,h.COMPILE_STATUS))return f;console.log(h.getShaderInfoLog(f)),h.deleteShader(f)}function SM(h,r,i){const f=h.createProgram();if(!f)throw new Error;if(h.attachShader(f,r),h.attachShader(f,i),h.linkProgram(f),h.getProgramParameter(f,h.LINK_STATUS))return f;console.log(h.getProgramInfoLog(f)),h.deleteProgram(f)}class Wr extends XS{constructor(i){super();O(this,"boundBufferCollection",null);O(this,"buffersBound",!1);O(this,"program");O(this,"vao");O(this,"renderer");O(this,"glw");O(this,"attributeBuffers");O(this,"attributeLocations");O(this,"attributeNames");O(this,"uniformLocations");O(this,"uniformTypes");O(this,"supportsIndexedTextures");const f=this.renderer=i.renderer,d=this.glw=this.renderer.glw;this.supportsIndexedTextures=i.supportsIndexedTextures||!1;const y=d.isWebGl2(),x=y&&i.webgl2Extensions||!y&&i.webgl1Extensions||[],s=y?"2.0":"1.0";x.forEach(L=>{if(!d.getExtension(L))throw new Error(`Shader "${this.constructor.name}" requires extension "${L}" for WebGL ${s} but wasn't found`)});const g=i.shaderSources||this.constructor.shaderSources;if(g)y&&(g!=null&&g.webGl2)&&(g.fragment=g.webGl2.fragment,g.vertex=g.webGl2.vertex,delete g.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const C=f.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,R=g.vertex instanceof Function?g.vertex(C):g.vertex,b=g.fragment instanceof Function?g.fragment(C):g.fragment,_=uS(d,d.VERTEX_SHADER,R),D=uS(d,d.FRAGMENT_SHADER,b);if(!_||!D)throw new Error;const w=SM(d,_,D);if(!w)throw new Error;this.program=w,this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...i.attributes].forEach(L=>{const $=d.getAttribLocation(this.program,L);if($<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${L}"!`);const B=d.createBuffer();if(!B)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${L}"`);this.attributeLocations[L]=$,this.attributeBuffers[L]=B,this.attributeNames.push(L)}),this.uniformLocations={},this.uniformTypes={},i.uniforms.forEach(L=>{const $=d.getUniformLocation(this.program,L.name);if(this.uniformTypes[L.name]=L.uniform,!$){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${L.name}"`);return}this.uniformLocations[L.name]=$})}bindBufferAttribute(i,f,d){const{glw:y}=this;y.enableVertexAttribArray(i),y.vertexAttribPointer(f,i,d.size,d.type,d.normalized,d.stride,d.offset)}disableAttribute(i){this.glw.disableVertexAttribArray(i)}disableAttributes(){for(const i in this.attributeLocations)this.disableAttribute(this.attributeLocations[i]);this.boundBufferCollection=null}canBatchShaderProps(i,f){return!1}bindRenderOp(i,f){this.bindBufferCollection(i.buffers),i.textures.length>0&&this.bindTextures(i.textures);const{glw:d,parentHasRenderTexture:y,renderToTexture:x}=i;if(!(x&&y)){if(y){const{width:s,height:g}=i.framebufferDimensions||{};d.uniform1f(this.getUniformLocation("u_pixelRatio"),1),d.uniform2f(this.getUniformLocation("u_resolution"),s??0,g??0)}else d.uniform1f(this.getUniformLocation("u_pixelRatio"),i.options.pixelRatio),d.uniform2f(this.getUniformLocation("u_resolution"),d.canvas.width,d.canvas.height);if(f){if(Zc(f,"$dimensions")){let s=f.$dimensions;s||(s=i.dimensions),d.uniform2f(this.getUniformLocation("u_dimensions"),s.width,s.height)}if(Zc(f,"$alpha")){let s=f.$alpha;s||(s=i.alpha),d.uniform1f(this.getUniformLocation("u_alpha"),s)}this.bindProps(f)}}}getUniformLocation(i){return this.uniformLocations[i]||null}bindBufferCollection(i){if(this.boundBufferCollection!==i){for(const f in this.attributeLocations){const d=i.getBuffer(f),y=i.getAttributeInfo(f);et(d,`Buffer for "${f}" not found`),et(y),this.bindBufferAttribute(this.attributeLocations[f],d,y)}this.boundBufferCollection=i}}bindProps(i){}bindTextures(i){}attach(){this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}O(Wr,"shaderSources");class WS extends Wr{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(r){const{glw:i}=this;i.activeTexture(0),i.bindTexture(r[0].ctxTexture)}}O(WS,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class YS extends Wr{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});O(this,"supportsIndexedTextures",!0)}bindTextures(i){const{renderer:f,glw:d}=this;if(i.length>f.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${f.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);i.forEach((x,s)=>{d.activeTexture(s),d.bindTexture(x.ctxTexture)});const y=Array.from(Array(i.length).keys());this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"),y)}}O(YS,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:i=>`
      #define txUnits ${i}
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${i}], int idx, vec2 uv) {
        ${Array.from(Array(i).keys()).map(f=>`
          ${f!==0?"else ":""}if (idx == ${f}) {
            return texture2D(textures[${f}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class $n{constructor(r){O(this,"priority",1);O(this,"name","");O(this,"ref");O(this,"target");O(this,"passParameters","");O(this,"declaredUniforms","");O(this,"uniformInfo",{});const{ref:i,target:f,props:d={}}=r;this.ref=i,this.target=f;const y={},x=[];let s="";const g=this.constructor.uniforms||{};for(const C in g){const R=g[C],b=R.type,_=`${i}_${C}`;let D="";R.size&&(D=`[${R.size(d)}]`),x.push(_),s+=`uniform ${b} ${_}${D};`,y[C]={name:_,uniform:g[C].method}}this.passParameters=x.join(","),this.declaredUniforms=s,this.uniformInfo=y}static getEffectKey(r){return""}static getMethodParameters(r,i){const f=[];for(const d in r){const y=r[d];let x="";y.size&&(x=`[${y.size(i)}]`),f.push(`${y.type} ${d}${x}`)}return f.join(",")}static resolveDefaults(r){return{}}static makeEffectKey(r){return!1}}O($n,"uniforms",{}),O($n,"methods"),O($n,"onShaderMask"),O($n,"onColorize"),O($n,"onEffectMask");const B0=new Map,CM=(h,r)=>{const i=JSON.stringify(h);if(B0.has(i))return B0.get(i);h=h??[];const f=[],d=h.length;let y=0;for(;y<d;y++){const{name:x,type:s,props:g}=h[y],C={name:x,type:s,props:{}},R=r[s],b=R.resolveDefaults(g),_=R.uniforms,D=Object.keys(_),w=D.length;let L=0;for(;L<w;L++){const $=D[L],B=_[$],V={value:b[$],programValue:void 0,method:B.method,updateOnBind:B.updateOnBind||!1,hasValidator:B.validator!==void 0,hasProgramValueUpdater:B.updateProgramValue!==void 0},W=V.hasValidator&&B.validator(b[$],b)||b[$];b[$]!==W&&(V.validatedValue=W),V.hasProgramValueUpdater&&B.updateProgramValue(V),V.programValue===void 0&&(V.programValue=V.value),C.props[$]=V}f.push(C)}return B0.set(i,f),f},Wo=class Wo extends Wr{constructor(i,f,d){const y=Wo.createShader(f,d);super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...y.uniforms],shaderSources:{vertex:y.vertex,fragment:y.fragment}});O(this,"effects",[]);this.effects=y.effects}bindTextures(i){const{glw:f}=this;f.activeTexture(0),f.bindTexture(i[0].ctxTexture)}bindUniformMethods(i){const f=this.glw,d=i.effects,y=d.length;for(let x=0;x<y;x++){const s=this.effects[x].uniformInfo,g=d[x],C=Object.keys(g.props),R=C.length;for(let b=0;b<R;b++){const _=C[b],D=g.props[_].method,w=this.getUniformLocation(s[_].name);if(D==="uniform2fv"||D==="uniform2iv"||D==="uniform3iv"||D==="uniform4fv"||D==="uniform4iv"||D==="uniformMatrix2fv"||D==="uniformMatrix3fv"||D==="uniformMatrix4fv"||D==="uniform1f"||D==="uniform1fv"||D==="uniform1i"||D==="uniform1iv"){g.props[_].setUniformValue=function(){f[D](w,this.programValue)};continue}if(D==="uniform2f"||D==="uniform2i"){g.props[_].setUniformValue=function(){f[D](w,this.programValue[0],this.programValue[1])};continue}if(D==="uniform3f"||D==="uniform3i"){g.props[_].setUniformValue=function(){f[D](w,this.programValue[0],this.programValue[1],this.programValue[2])};continue}if(D==="uniform4f"||D==="uniform4i"){g.props[_].setUniformValue=function(){f[D](w,this.programValue[0],this.programValue[1],this.programValue[2],this.programValue[3])};continue}}}}bindProps(i){var x;const f=i.effects,d=f.length;let y=0;for(;y<d;y++){const s=f[y],g=Object.keys(s.props),C=g.length;let R=0;for(;R<C;R++){const b=g[R],_=s.props[b];if(_.updateOnBind===!0){const D=(x=this.renderer.shManager.getRegisteredEffects()[s.type])==null?void 0:x.uniforms[b];D==null||D.updateProgramValue(s.props[b],i)}_.setUniformValue()}}}canBatchShaderProps(i,f){if(i.$alpha!==f.$alpha||i.$dimensions.width!==f.$dimensions.width||i.$dimensions.height!==f.$dimensions.height||i.effects.length!==f.effects.length)return!1;const d=i.effects.length;let y=0;for(;y<d;y++){const x=i.effects[y],s=f.effects[y];if(x.type!==s.type)return!1;for(const g in x.props)if(s.props&&!s.props[g]||x.props[g].value!==s.props[g].value)return!1}return!0}static createShader(i,f){const d={},y={};let x="";const s=[],g=[],C=i.effects.map(w=>{const L=f[w.type],$=L.getEffectKey(w.props||{});d[$]=d[$]?++d[$]:1;const B=d[$];B===1&&g.push({key:$,type:w.type,props:w.props});const V=new L({ref:`${$}${B===1?"":B}`,target:$,props:w.props});return x+=V.declaredUniforms,s.push(...Object.values(V.uniformInfo)),V});let R="";g==null||g.forEach(w=>{const L=f[w.type],$=L.resolveDefaults(w.props??{}),B=[];for(const pe in L.methods){let ue=pe;const q=L.methods[pe];y[pe]&&y[pe]!==q&&(ue=Wo.resolveMethodDuplicate(pe,q,y)),y[ue]=q.replace("function",ue),B.push({m:pe,cm:ue})}let V=L.onShaderMask instanceof Function?L.onShaderMask($):L.onShaderMask,W=L.onColorize instanceof Function?L.onColorize($):L.onColorize,X=L.onEffectMask instanceof Function?L.onEffectMask($):L.onEffectMask;B.forEach(pe=>{const{m:ue,cm:q}=pe,A=new RegExp(`\\$${ue}`,"g");V&&(V=V.replace(A,q)),W&&(W=W.replace(A,q)),X&&(X=X.replace(A,q))});const ie=L.getMethodParameters(L.uniforms,$),K=ie.length>0?`, ${ie}`:"";V&&(R+=`
        float fx_${w.key}_onShaderMask(float shaderMask ${K}) {
          ${V}
        }
        `),W&&(R+=`
          vec4 fx_${w.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${K}) {
            ${W}
          }
        `),X&&(R+=`
          vec4 fx_${w.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${K}) {
            ${X}
          }
        `)});let b="";for(const w in y)b+=y[w];let _="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",D=`

    `;for(let w=0;w<C.length;w++){const L=C[w],$=L.passParameters.length>0?`, ${L.passParameters}`:"",B=f[L.name];B.onShaderMask&&(D+=`
        shaderMask = fx_${L.target}_onShaderMask(shaderMask ${$});
        `),B.onColorize&&(D+=`
        maskColor = fx_${L.target}_onColorize(shaderMask, maskColor, shaderColor${$});
        `),B.onEffectMask&&(_=`fx_${L.target}_onEffectMask(shaderMask, maskColor, shaderColor${$})`);const V=C[w+1];(V===void 0||f[V.name].onEffectMask)&&(D+=`
          shaderColor = ${_};
        `)}return{effects:C,uniforms:s,fragment:Wo.fragment(x,b,R,D),vertex:Wo.vertex()}}static resolveMethodDuplicate(i,f,d,y=0){const x=i+(y>0?y:"");return d[x]&&d[x]!==f?this.resolveMethodDuplicate(i,f,d,++y):x}static resolveDefaults(i,f){return et(f),{effects:CM(i.effects??[],f),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(i,f){var y;let d="";return(y=i.effects)==null||y.forEach(x=>{const g=f[x.type].getEffectKey(x.props||{});d+=`,${g}`}),`DynamicShader${d}`}};O(Wo,"z$__type__Props"),O(Wo,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),O(Wo,"fragment",(i,f,d,y)=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${i}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${f}

    ${d}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${y}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let la=Wo;class Z0 extends Wr{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(r){return{radius:r.radius||10,$dimensions:{width:0,height:0}}}bindTextures(r){const{glw:i}=this;i.activeTexture(0),i.bindTexture(r[0].ctxTexture)}bindProps(r){const i=Math.min(r.$dimensions.width,r.$dimensions.height)/(2*r.radius);this.glw.uniform1f(this.getUniformLocation("u_radius"),r.radius*Math.min(i,1))}canBatchShaderProps(r,i){return r.radius===i.radius&&r.$dimensions.width===i.$dimensions.width&&r.$dimensions.height===i.$dimensions.height}}O(Z0,"z$__type__Props"),O(Z0,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const TM=new Float32Array([1,0,0,0,1,0,0,0,1]),ch=class ch extends Wr{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(r){const{glw:i}=this;i.activeTexture(0),i.bindTexture(r[0].ctxTexture)}bindProps(r){const i=ch.resolveDefaults(r);for(const f in i)if(f==="transform")this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"),i[f]);else if(f==="scrollY")this.glw.uniform1f(this.getUniformLocation("u_scrollY"),i[f]);else if(f==="color"){const d=da(i.color);this.glw.uniform4fv(this.getUniformLocation("u_color"),d)}else f==="size"?this.glw.uniform1f(this.getUniformLocation("u_size"),i[f]):f==="distanceRange"?this.glw.uniform1f(this.getUniformLocation("u_distanceRange"),i[f]):f==="debug"&&this.glw.uniform1i(this.getUniformLocation("u_debug"),i[f]?1:0)}static resolveDefaults(r={}){return{transform:r.transform??TM,scrollY:r.scrollY??0,color:r.color??4294967295,size:r.size??16,distanceRange:r.distanceRange??1,debug:r.debug??!1}}};O(ch,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let Q0=ch;const pa=h=>{h.programValue===void 0&&(h.programValue=new Float32Array(4));const r=h.value,i=h.programValue;i[0]=(r>>>24)/255,i[1]=(r>>>16&255)/255,i[2]=(r>>>8&255)/255,i[3]=(r&255)/255},EM=h=>{const r=h.validatedValue||h.value;if(h.programValue instanceof Float32Array){const i=h.programValue;i[0]=r[0],i[1]=r[1]}else h.programValue=new Float32Array(r)},AM=h=>{const r=h.validatedValue||h.value;if(h.programValue instanceof Float32Array){const i=h.programValue;i[0]=r[0],i[1]=r[1],i[2]=r[1],i[3]=r[1]}else h.programValue=new Float32Array(r)},qS=h=>{const r=h.validatedValue||h.value;if(h.programValue instanceof Float32Array){const i=r.length,f=h.programValue;for(let d=0;d<i;d++)f[d]=r[d]}else h.programValue=new Float32Array(r)},gg=h=>{const r=Array.isArray(h);if(r){if(r&&h.length===4)return h;if(r&&h.length===2)return[h[0],h[1],h[0],h[1]];if(r&&h.length===3)return[h[0],h[1],h[2],h[0]]}else return[h,h,h,h];return[h[0],h[0],h[0],h[0]]},KS=(h,r)=>{h.programValue===void 0&&(h.programValue=new Float32Array(4));const i=h.programValue,f=h.validatedValue||h.value;if(r===void 0&&h.$dimensions===void 0){i[0]=f[0],i[1]=f[1],i[2]=f[2],i[3]=f[3];return}let d=h.$dimensions;if(r!==void 0){const{$dimensions:_}=r;if(d!==void 0&&(d.width===_.width||d.height===_.height))return;d===void 0&&(d={width:_==null?void 0:_.width,height:_==null?void 0:_.height},h.$dimensions=d)}const{width:y,height:x}=d,[s,g,C,R]=f,b=Math.min(Math.min(Math.min(y/Math.max(y,s+g),y/Math.max(y,C+R)),Math.min(x/Math.max(x,s+C),x/Math.max(x,g+R))),1);i[0]=s*b,i[1]=g*b,i[2]=C*b,i[3]=R*b};class ea extends $n{constructor(){super(...arguments);O(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(i){return{radius:i.radius??10}}}O(ea,"z$__type__Props"),O(ea,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:gg,updateProgramValue:KS}}),O(ea,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),O(ea,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),O(ea,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class Vl extends $n{constructor(){super(...arguments);O(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}O(Vl,"z$__type__Props"),O(Vl,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:pa,method:"uniform4fv",type:"vec4"}}),O(Vl,"onEffectMask",`
  float intR = shaderMask + 1.0;
  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),O(Vl,"onColorize",`
    return color;
  `);const pr=class pr extends $n{constructor(){super(...arguments);O(this,"name","linearGradient")}static getEffectKey(i){return i.colors.value?`linearGradient${i.colors.value.length}`:`linearGradient${i.colors.length}`}static resolveDefaults(i){const f=i.colors??[4278190080,4294967295];let d=i.stops||[];if(d.length===0||d.length!==f.length){const y=f.length;let x=0;const s=d;for(;x<y;x++)d[x]?(s[x]=d[x],d[x-1]===void 0&&s[x-2]!==void 0&&(s[x-1]=s[x-2]+(d[x]-s[x-2])/2)):s[x]=x*(1/(f.length-1));d=s}return{colors:f,stops:d,angle:i.angle??0}}};O(pr,"z$__type__Props"),O(pr,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:i=>i.reduce((f,d)=>f.concat(da(d)),[]),updateProgramValue:qS,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),O(pr,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),O(pr,"ColorLoop",i=>{let f="";for(let d=2;d<i;d++)f+=`colorOut = mix(colorOut, colors[${d}], clamp((dist - stops[${d-1}]) / (stops[${d}] - stops[${d-1}]), 0.0, 1.0));`;return f}),O(pr,"onColorize",i=>{const f=i.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${pr.ColorLoop(f)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let J0=pr;class eg extends $n{constructor(){super(...arguments);O(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(i){return{amount:i.amount??1}}}O(eg,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),O(eg,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class ta extends $n{constructor(){super(...arguments);O(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}O(ta,"z$__type__Props"),O(ta,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:pa,method:"uniform4fv",type:"vec4"}}),O(ta,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),O(ta,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),O(ta,"onColorize",`
    return color;
  `);class na extends $n{constructor(){super(...arguments);O(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}O(na,"z$__type__Props"),O(na,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:pa,method:"uniform4fv",type:"vec4"}}),O(na,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),O(na,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),O(na,"onColorize",`
    return color;
  `);class ia extends $n{constructor(){super(...arguments);O(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}O(ia,"z$__type__Props"),O(ia,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:pa,method:"uniform4fv",type:"vec4"}}),O(ia,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),O(ia,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),O(ia,"onColorize",`
    return color;
  `);class oa extends $n{constructor(){super(...arguments);O(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}O(oa,"z$__type__Props"),O(oa,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:pa,method:"uniform4fv",type:"vec4"}}),O(oa,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),O(oa,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),O(oa,"onColorize",`
    return color;
  `);class Hl extends $n{constructor(){super(...arguments);O(this,"name","glitch")}static getEffectKey(i){return"glitch"}static resolveDefaults(i){return{amplitude:i.amplitude??.2,narrowness:i.narrowness??4,blockiness:i.blockiness??2,minimizer:i.minimizer??8,time:i.time??Date.now()}}}O(Hl,"z$__type__Props"),O(Hl,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:i=>{const f=i.value=(Date.now()-i.value)%1e3;i.programValue=f},type:"float"}}),O(Hl,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),O(Hl,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class Vc extends $n{constructor(){super(...arguments);O(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(i){return{fade:i.fade??10}}}O(Vc,"z$__type__Props"),O(Vc,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:gg,updateProgramValue:AM}}),O(Vc,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const Gr=class Gr extends $n{constructor(){super(...arguments);O(this,"name","radialGradient")}static getEffectKey(i){return i.colors.value?`linearGradient${i.colors.value.length}`:`linearGradient${i.colors.length}`}static resolveDefaults(i){const f=i.colors??[4278190080,4294967295];let d=i.stops||[];if(d.length===0||d.length!==f.length){const y=f.length;let x=0;const s=d;for(;x<y;x++)d[x]?(s[x]=d[x],d[x-1]===void 0&&s[x-2]!==void 0&&(s[x-1]=s[x-2]+(d[x]-s[x-2])/2)):s[x]=x*(1/(f.length-1));d=s}return{colors:f,stops:d,width:i.width??0,height:i.height??i.width??0,pivot:i.pivot??[.5,.5]}}};O(Gr,"z$__type__Props"),O(Gr,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:EM,method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:i=>i.reduce((f,d)=>f.concat(da(d)),[]),updateProgramValue:qS,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),O(Gr,"ColorLoop",i=>{let f="";for(let d=2;d<i;d++)f+=`colorOut = mix(colorOut, colors[${d}], clamp((dist - stops[${d-1}]) / (stops[${d}] - stops[${d-1}]), 0.0, 1.0));`;return f}),O(Gr,"onColorize",i=>{const f=i.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${Gr.ColorLoop(f)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let tg=Gr;class ra extends $n{constructor(){super(...arguments);O(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(i){return{width:i.width??10,progress:i.progress??.5,offset:i.offset??0,range:i.range??Math.PI*2,rounded:i.rounded??!1,radius:i.radius??1,color:i.color??4294967295}}}O(ra,"z$__type__Props"),O(ra,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:i=>i?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:pa,method:"uniform4fv",type:"vec4"}}),O(ra,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),O(ra,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),O(ra,"onColorize",`
    return color;
  `);class sa extends $n{constructor(){super(...arguments);O(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(i){return{x:i.x||0,y:i.y||0,width:i.width||50,height:i.height||50,radius:i.radius??0}}}O(sa,"z$__type__Props"),O(sa,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:gg,updateProgramValue:KS}}),O(sa,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),O(sa,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),O(sa,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const ZS="RoundedRectangle";class mg extends XS{constructor(i){super();O(this,"shType");this.shType=i,i!==ZS&&console.warn("Unsupported shader:",i)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class bM{constructor(r,i,f,d){O(this,"type");O(this,"shader");O(this,"resolvedProps");O(this,"props");this.type=r,this.shader=i,this.resolvedProps=f;const y=Object.keys(f),x=y.length,s={};for(let g=0;g<x;g++){const C=y[g];Object.defineProperty(s,C,{get:()=>this.resolvedProps[C],set:R=>{this.resolvedProps[C]=R,d.requestRender()}})}this.props=s}getResolvedProps(){return this.resolvedProps}}class kM{constructor(r,i,f){O(this,"shader");O(this,"resolvedProps");O(this,"props");O(this,"type");this.shader=r,this.type="DynamicShader",this.resolvedProps=i;const d=f.getRegisteredEffects(),y={},x=i.effects,s=x.length;for(let g=0;g<s;g++){const{name:C,props:R,type:b}=x[g];if(C===void 0)continue;const _={},D=Object.keys(R),w=D.length;for(let L=0;L<w;L++){const $=D[L];Object.defineProperty(_,$,{get:()=>this.resolvedProps.effects[g].props[$].value,set:B=>{var W,X;const V=this.resolvedProps.effects[g].props[$];V.value=B,V.hasValidator&&(B=V.validatedValue=(W=d[b].uniforms[$])==null?void 0:W.validator(B,R)),V.hasProgramValueUpdater?(X=d[b].uniforms[$])==null||X.updateProgramValue(V):V.programValue=B,f.renderer.stage.requestRender()}})}Object.defineProperty(y,C,{get:()=>_})}this.props=y}getResolvedProps(){return this.resolvedProps}}class IM{constructor(){O(this,"shCache",new Map);O(this,"shConstructors",{});O(this,"attachedShader",null);O(this,"effectConstructors",{});O(this,"renderer");this.registerShaderType("DefaultShader",WS),this.registerShaderType("DefaultShaderBatched",YS),this.registerShaderType("RoundedRectangle",Z0),this.registerShaderType("DynamicShader",la),this.registerShaderType("SdfShader",Q0),this.registerEffectType("border",Vl),this.registerEffectType("borderBottom",ia),this.registerEffectType("borderLeft",oa),this.registerEffectType("borderRight",ta),this.registerEffectType("borderTop",na),this.registerEffectType("fadeOut",Vc),this.registerEffectType("linearGradient",J0),this.registerEffectType("radialGradient",tg),this.registerEffectType("grayscale",eg),this.registerEffectType("glitch",Hl),this.registerEffectType("radius",ea),this.registerEffectType("radialProgress",ra),this.registerEffectType("holePunch",sa)}registerShaderType(r,i){this.shConstructors[r]=i}registerEffectType(r,i){this.effectConstructors[r]=i}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(r,i){if(!this.renderer)throw new Error("Renderer is not been defined");const f=this.shConstructors[r];if(!f)throw new Error(`Shader type "${r}" is not registered`);if(this.renderer.mode==="canvas"&&f.prototype instanceof Wr)return this._createShaderCtr(r,new mg(r),i);if(r==="DynamicShader")return this.loadDynamicShader(i);const d=f.resolveDefaults(i),y=f.makeCacheKey(d)||f.name;if(y&&this.shCache.has(y))return this._createShaderCtr(r,this.shCache.get(y),d);const x=new f(this.renderer,i);return y&&this.shCache.set(y,x),this._createShaderCtr(r,x,d)}loadDynamicShader(r){if(!this.renderer)throw new Error("Renderer is not been defined");const i=la.resolveDefaults(r,this.effectConstructors),f=la.makeCacheKey(i,this.effectConstructors);if(f&&this.shCache.has(f))return this._createDynShaderCtr(this.shCache.get(f),i);const d=new la(this.renderer,r,this.effectConstructors);return f&&this.shCache.set(f,d),this._createDynShaderCtr(d,i)}_createShaderCtr(r,i,f){return new bM(r,i,f,this.renderer.stage)}_createDynShaderCtr(r,i){return r.bindUniformMethods(i),new kM(r,i,this)}useShader(r){this.attachedShader!==r&&(this.attachedShader&&this.attachedShader.detach(),r.attach(),this.attachedShader=r)}}const MM={x:(h,r)=>{h.props.x=r},y:(h,r)=>{h.props.y=r},width:(h,r)=>{h.props.width=r},height:(h,r)=>{h.props.height=r},color:(h,r)=>{h.props.color=r},zIndex:(h,r)=>{h.props.zIndex=r},fontFamily:(h,r)=>{h.props.fontFamily=r},fontWeight:(h,r)=>{h.props.fontWeight=r},fontStyle:(h,r)=>{h.props.fontStyle=r},fontStretch:(h,r)=>{h.props.fontStretch=r},fontSize:(h,r)=>{h.props.fontSize=r},text:(h,r)=>{h.props.text=r},textAlign:(h,r)=>{h.props.textAlign=r},contain:(h,r)=>{h.props.contain=r},offsetY:(h,r)=>{h.props.offsetY=r},scrollable:(h,r)=>{h.props.scrollable=r},scrollY:(h,r)=>{h.props.scrollY=r},letterSpacing:(h,r)=>{h.props.letterSpacing=r},lineHeight:(h,r)=>{h.props.lineHeight=r},maxLines:(h,r)=>{h.props.maxLines=r},textBaseline:(h,r)=>{h.props.textBaseline=r},verticalAlign:(h,r)=>{h.props.verticalAlign=r},overflowSuffix:(h,r)=>{h.props.overflowSuffix=r},debug:(h,r)=>{h.props.debug=r}};class yg{constructor(r){O(this,"stage");O(this,"set");this.stage=r;const i={...MM,...this.getPropertySetters()},f={};Object.keys(i).forEach(d=>{Object.defineProperty(f,d,{value:(y,x)=>{y.props[d]!==x&&(i[d](y,x),this.stage.requestRender())},writable:!1,configurable:!1})}),this.set=f}setStatus(r,i,f){r.status!==i&&(r.status=i,r.emitter.emit(i,f))}setIsRenderable(r,i){r.isRenderable=i}destroyState(r){this.setStatus(r,"destroyed"),r.emitter.removeAllListeners()}scheduleUpdateState(r){r.updateScheduled||(r.updateScheduled=!0,queueMicrotask(()=>{r.status!=="destroyed"&&(r.updateScheduled=!1,this.updateState(r))}))}}class RM{constructor(){O(this,"data",{})}reset(){this.data={}}increment(r){this.data[r]||(this.data[r]=0),this.data[r]++}getData(){return{...this.data}}}class _M{constructor(r,i){O(this,"stage");O(this,"memUsed",0);O(this,"loadedTextures",new Map);O(this,"criticalThreshold");O(this,"targetThreshold");O(this,"cleanupInterval");O(this,"debugLogging");O(this,"lastCleanupTime",0);O(this,"criticalCleanupRequested",!1);O(this,"frameTime",0);this.stage=r;const{criticalThreshold:f}=i;this.criticalThreshold=Math.round(f);const d=Math.max(0,Math.min(1,i.targetThresholdLevel));if(this.targetThreshold=Math.round(f*d),this.cleanupInterval=i.cleanupInterval,this.debugLogging=i.debugLogging,i.debugLogging){let y=0;setInterval(()=>{y!==this.memUsed&&(y=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${rS(this.memUsed)} mb / ${rS(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}f===0&&(this.setTextureMemUse=()=>{})}setTextureMemUse(r,i){if(this.loadedTextures.has(r)&&(this.memUsed-=this.loadedTextures.get(r)),i===0){this.loadedTextures.delete(r);return}else this.memUsed+=i,this.loadedTextures.set(r,i);this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}cleanup(){const r=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,this.criticalCleanupRequested=!1,r&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${r}`);const i=[...this.loadedTextures.keys()].sort((y,x)=>{const s=y.renderable,g=x.renderable;return s===g?y.lastRenderableChangeTime-x.lastRenderableChangeTime:s?1:g?-1:0}),f=this.targetThreshold,d=this.stage.txManager;for(const y of i)if(y.renderable||(y.preventCleanup===!1&&(y.ctxTexture.free(),d.removeTextureFromCache(y)),this.memUsed<=f))break;this.memUsed>=this.criticalThreshold&&(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`))}getMemoryInfo(){let r=0;const i=[...this.loadedTextures.keys()].reduce((f,d)=>(r+=d.renderable?1:0,f+(d.renderable?this.loadedTextures.get(d):0)),0);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:i,memUsed:this.memUsed,renderableTexturesLoaded:r,loadedTextures:this.loadedTextures.size}}}class QS{constructor(r,i){O(this,"textureSource");O(this,"memManager");this.memManager=r,this.textureSource=i}setTextureMemUse(r){this.memManager.setTextureMemUse(this.textureSource,r)}get renderable(){return this.textureSource.renderable}}class JS{constructor(r){O(this,"options");O(this,"mode");O(this,"stage");O(this,"txManager");O(this,"txMemManager");O(this,"shManager");O(this,"rttNodes",[]);this.options=r,this.stage=r.stage,this.txManager=r.txManager,this.txMemManager=r.txMemManager,this.shManager=r.shManager}}class LM extends q0{constructor(i,f,d){super(i,f);O(this,"textRenderer");O(this,"trState");O(this,"_textRendererOverride",null);O(this,"onTextLoaded",()=>{const{contain:i}=this,f=this.trState.props.width,d=this.trState.props.height,y=this.trState.textW||0,x=this.trState.textH||0;i==="both"?(this.props.width=f,this.props.height=d):i==="width"?(this.props.width=f,this.props.height=x):i==="none"&&(this.props.width=y,this.props.height=x),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});O(this,"onTextFailed",(i,f)=>{this.emit("failed",{type:"text",error:f})});this._textRendererOverride=f.textRendererOverride,this.textRenderer=d;const y=this.createState({x:this.absX,y:this.absY,width:f.width,height:f.height,textAlign:f.textAlign,color:f.color,zIndex:f.zIndex,contain:f.contain,scrollable:f.scrollable,scrollY:f.scrollY,offsetY:f.offsetY,letterSpacing:f.letterSpacing,debug:f.debug,fontFamily:f.fontFamily,fontSize:f.fontSize,fontStretch:f.fontStretch,fontStyle:f.fontStyle,fontWeight:f.fontWeight,text:f.text,lineHeight:f.lineHeight,maxLines:f.maxLines,textBaseline:f.textBaseline,verticalAlign:f.verticalAlign,overflowSuffix:f.overflowSuffix});this.trState=y}get width(){return this.props.width}set width(i){this.props.width=i,this.textRenderer.set.width(this.trState,i),this.contain==="none"&&this.setUpdateType(De.Local)}get height(){return this.props.height}set height(i){this.props.height=i,this.textRenderer.set.height(this.trState,i),this.contain!=="both"&&this.setUpdateType(De.Local)}get color(){return this.trState.props.color}set color(i){this.textRenderer.set.color(this.trState,i)}get text(){return this.trState.props.text}set text(i){this.textRenderer.set.text(this.trState,i)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(i){this._textRendererOverride=i,this.textRenderer.destroyState(this.trState);const f=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);if(!f){console.warn("Text Renderer not found for font",this.trState.props.fontFamily);return}this.textRenderer=f,this.trState=this.createState(this.trState.props)}get fontSize(){return this.trState.props.fontSize}set fontSize(i){this.textRenderer.set.fontSize(this.trState,i)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(i){this.textRenderer.set.fontFamily(this.trState,i)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(i){this.textRenderer.set.fontStretch(this.trState,i)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(i){this.textRenderer.set.fontStyle(this.trState,i)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(i){this.textRenderer.set.fontWeight(this.trState,i)}get textAlign(){return this.trState.props.textAlign}set textAlign(i){this.textRenderer.set.textAlign(this.trState,i)}get contain(){return this.trState.props.contain}set contain(i){this.textRenderer.set.contain(this.trState,i)}get scrollable(){return this.trState.props.scrollable}set scrollable(i){this.textRenderer.set.scrollable(this.trState,i)}get scrollY(){return this.trState.props.scrollY}set scrollY(i){this.textRenderer.set.scrollY(this.trState,i)}get offsetY(){return this.trState.props.offsetY}set offsetY(i){this.textRenderer.set.offsetY(this.trState,i)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(i){this.textRenderer.set.letterSpacing(this.trState,i)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(i){this.textRenderer.set.lineHeight(this.trState,i)}get maxLines(){return this.trState.props.maxLines}set maxLines(i){this.textRenderer.set.maxLines(this.trState,i)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(i){this.textRenderer.set.textBaseline(this.trState,i)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(i){this.textRenderer.set.verticalAlign(this.trState,i)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(i){this.textRenderer.set.overflowSuffix(this.trState,i)}get debug(){return this.trState.props.debug}set debug(i){this.textRenderer.set.debug(this.trState,i)}update(i,f){super.update(i,f),et(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return this.trState&&this.trState.props.text!==""?!0:super.checkRenderProps()}onChangeIsRenderable(i){super.onChangeIsRenderable(i),this.textRenderer.setIsRenderable(this.trState,i)}renderQuads(i){var f;if(et(this.globalTransform),!this.textRenderer.renderQuads){super.renderQuads(i);return}this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(this.parentHasRenderTexture&&((f=this.props.parent)!=null&&f.rtt)&&(this.globalTransform=wi.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),et(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}createState(i){const f=this.textRenderer.createState(i,this);return f.emitter.on("loaded",this.onTextLoaded),f.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(f),f}}function PM(h){const r={boolean:!0,string:!0,number:!0,undefined:!0},i=Object.keys(h);for(let f=0;f<i.length;f++){const d=i[f];if(!d)continue;const y=h[d],x=typeof y;x==="string"&&y.length>2048&&(console.warn(`Custom Data value for ${d} is too long, it will be truncated to 2048 characters`),h[d]=y.substring(0,2048)),r[x]||(console.warn(`Custom Data value for ${d} is not a boolean, string, or number, it will be ignored`),delete h[d])}return h}const DM=2e6;class NM{constructor(r){O(this,"options");O(this,"animationManager");O(this,"txManager");O(this,"txMemManager");O(this,"fontManager");O(this,"textRenderers");O(this,"shManager");O(this,"renderer");O(this,"root");O(this,"boundsMargin");O(this,"defShaderCtr");O(this,"eventBus");O(this,"deltaTime",0);O(this,"lastFrameTime",0);O(this,"currentFrameTime",0);O(this,"fpsNumFrames",0);O(this,"fpsElapsedTime",0);O(this,"renderRequested",!1);O(this,"frameEventQueue",[]);O(this,"fontResolveMap",{});O(this,"contextSpy",null);this.options=r;const{canvas:i,clearColor:f,appWidth:d,appHeight:y,boundsMargin:x,enableContextSpy:s,forceWebGL2:g,numImageWorkers:C,textureMemory:R,renderEngine:b,fontEngines:_}=r;this.eventBus=r.eventBus,this.txManager=new yM(C),this.txMemManager=new _M(this,R),this.shManager=new IM,this.animationManager=new fM,this.contextSpy=s?new RM:null;let D=[0,0,0,0];x&&(D=Array.isArray(x)?x:[x,x,x,x]),this.boundsMargin=D;const w={stage:this,canvas:i,pixelRatio:r.devicePhysicalPixelRatio*r.deviceLogicalPixelRatio,clearColor:f??4278190080,bufferMemory:DM,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy,forceWebGL2:g};this.renderer=new b(w);const L=this.renderer.mode||"webgl";this.defShaderCtr=this.renderer.getDefShaderCtr(),GI(L),this.txManager.renderer=this.renderer,this.textRenderers={},_.forEach(B=>{const V=new B(this),W=V.type;if(W==="sdf"&&L==="canvas"){console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...");return}V instanceof yg&&(W==="canvas"?this.textRenderers.canvas=V:W==="sdf"&&(this.textRenderers.sdf=V))}),Object.keys(this.textRenderers).length===0&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new wM(this.textRenderers);const $=new q0(this,{x:0,y:0,width:d,height:y,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1,strictBounds:!1});this.root=$,lM(this)}updateFrameTime(){const r=uM();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=r,this.deltaTime=this.lastFrameTime?r-this.lastFrameTime:100/6,this.txManager.frameTime=r,this.txMemManager.frameTime=r,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}updateAnimations(){const{animationManager:r}=this;this.root&&r.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:r,renderRequested:i}=this;et(r),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),r.reset(),this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(),r.rttNodes.length>0&&r.renderRTTNodes(),this.addQuads(this.root),r==null||r.render(),this.calculateFps(),i&&(this.renderRequested=!1)}queueFrameEvent(r,i){this.frameEventQueue.push([r,i])}flushFrameEvents(){for(const[r,i]of this.frameEventQueue)this.eventBus.emit(r,i);this.frameEventQueue=[]}calculateFps(){var i,f;const{fpsUpdateInterval:r}=this.options;if(r&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=r)){const d=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:d,contextSpyData:((i=this.contextSpy)==null?void 0:i.getData())??null}),(f=this.contextSpy)==null||f.reset()}}addQuads(r){et(this.renderer),r.isRenderable===!0&&r.renderQuads(this.renderer);for(let i=0;i<r.children.length;i++){const f=r.children[i];f!==void 0&&(f.worldAlpha===0||f.strictBounds===!0&&f.renderState===ii.OutOfBounds||this.addQuads(f))}}requestRender(){this.renderRequested=!0}resolveTextRenderer(r,i=null){const f=`${r.fontFamily}${r.fontStyle}${r.fontWeight}${r.fontStretch}${i||""}`;if(this.fontResolveMap[f]!==void 0)return this.fontResolveMap[f];let d=i,y=!1;if(d){const s=this.textRenderers[d];s?s.canRenderFont(r)||(console.warn(`Cannot use override text renderer '${d}' for font`,r),d=null,y=!0):(console.warn(`Text renderer override '${d}' not found.`),d=null,y=!0)}if(!d){for(const[s,g]of Object.entries(this.textRenderers))if(g.canRenderFont(r)){d=s;break}!d&&this.textRenderers.canvas!==void 0&&(d="canvas")}if(y&&console.warn(`Falling back to text renderer ${String(d)}`),!d)return null;const x=this.textRenderers[d];return et(x,"resolvedTextRenderer undefined"),this.fontResolveMap[f]=x,x}createShaderCtr(r,i){return this.shManager.loadShader(r,i)}createNode(r){const i=this.resolveNodeDefaults(r);return new q0(this,i)}createTextNode(r){const i=r.fontSize??16,f={...this.resolveNodeDefaults(r),text:r.text??"",textRendererOverride:r.textRendererOverride??null,fontSize:i,fontFamily:r.fontFamily??"sans-serif",fontStyle:r.fontStyle??"normal",fontWeight:r.fontWeight??"normal",fontStretch:r.fontStretch??"normal",textAlign:r.textAlign??"left",contain:r.contain??"none",scrollable:r.scrollable??!1,scrollY:r.scrollY??0,offsetY:r.offsetY??0,letterSpacing:r.letterSpacing??0,lineHeight:r.lineHeight,maxLines:r.maxLines??0,textBaseline:r.textBaseline??"alphabetic",verticalAlign:r.verticalAlign??"middle",overflowSuffix:r.overflowSuffix??"...",debug:r.debug??{},shaderProps:null},d=this.resolveTextRenderer(f,r.textRendererOverride);if(!d)throw new Error(`No compatible text renderer found for ${f.fontFamily}`);return new LM(this,f,d)}resolveNodeDefaults(r){const i=r.color??4294967295,f=r.colorTl??r.colorTop??r.colorLeft??i,d=r.colorTr??r.colorTop??r.colorRight??i,y=r.colorBl??r.colorBottom??r.colorLeft??i,x=r.colorBr??r.colorBottom??r.colorRight??i;let s={};return this.options.inspector===!0&&(s=PM(r.data??{})),{x:r.x??0,y:r.y??0,width:r.width??0,height:r.height??0,alpha:r.alpha??1,autosize:r.autosize??!1,clipping:r.clipping??!1,color:i,colorTop:r.colorTop??i,colorBottom:r.colorBottom??i,colorLeft:r.colorLeft??i,colorRight:r.colorRight??i,colorBl:y,colorBr:x,colorTl:f,colorTr:d,zIndex:r.zIndex??0,zIndexLocked:r.zIndexLocked??0,parent:r.parent??null,texture:r.texture??null,textureOptions:r.textureOptions??{},shader:r.shader??this.defShaderCtr,src:r.src??null,srcHeight:r.srcHeight,srcWidth:r.srcWidth,srcX:r.srcX,srcY:r.srcY,scale:r.scale??null,scaleX:r.scaleX??r.scale??1,scaleY:r.scaleY??r.scale??1,mount:r.mount??0,mountX:r.mountX??r.mount??0,mountY:r.mountY??r.mount??0,pivot:r.pivot??.5,pivotX:r.pivotX??r.pivot??.5,pivotY:r.pivotY??r.pivot??.5,rotation:r.rotation??0,rtt:r.rtt??!1,data:s,preventCleanup:r.preventCleanup??!1,imageType:r.imageType,strictBounds:r.strictBounds??!1}}}class OM extends vr{constructor(i,f){var L,$,B,V;super();O(this,"root");O(this,"canvas");O(this,"settings");O(this,"stage");O(this,"inspector",null);const d={criticalThreshold:((L=i.textureMemory)==null?void 0:L.criticalThreshold)||124e6,targetThresholdLevel:(($=i.textureMemory)==null?void 0:$.targetThresholdLevel)||.5,cleanupInterval:((B=i.textureMemory)==null?void 0:B.cleanupInterval)||3e4,debugLogging:((V=i.textureMemory)==null?void 0:V.debugLogging)||!1},y={appWidth:i.appWidth||1920,appHeight:i.appHeight||1080,textureMemory:d,boundsMargin:i.boundsMargin||0,deviceLogicalPixelRatio:i.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:i.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:i.clearColor??0,fpsUpdateInterval:i.fpsUpdateInterval||0,numImageWorkers:i.numImageWorkers!==void 0?i.numImageWorkers:2,enableContextSpy:i.enableContextSpy??!1,forceWebGL2:i.forceWebGL2??!1,inspector:i.inspector??!1,renderEngine:i.renderEngine,quadBufferSize:i.quadBufferSize??4*1024*1024,fontEngines:i.fontEngines};this.settings=y;const{appWidth:x,appHeight:s,deviceLogicalPixelRatio:g,devicePhysicalPixelRatio:C,inspector:R}=y,b=x*g,_=s*g,D=document.createElement("canvas");this.canvas=D,D.width=b*C,D.height=_*C,D.style.width=`${b}px`,D.style.height=`${_}px`,this.stage=new NM({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,forceWebGL2:this.settings.forceWebGL2,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderEngine:this.settings.renderEngine,textureMemory:d,eventBus:this,quadBufferSize:this.settings.quadBufferSize,fontEngines:this.settings.fontEngines,inspector:this.settings.inspector!==null}),this.root=this.stage.root;let w;if(typeof f=="string"?w=document.getElementById(f):w=f,!w)throw new Error("Could not find target element");w.appendChild(D),R&&!pg()&&(this.inspector=new R(D,y))}createNode(i){et(this.stage,"Stage is not initialized");const f=this.stage.createNode(i);return this.inspector?this.inspector.createNode(f):f}createTextNode(i){const f=this.stage.createTextNode(i);return this.inspector?this.inspector.createTextNode(f):f}destroyNode(i){return this.inspector&&this.inspector.destroyNode(i.id),i.destroy()}createTexture(i,f){return this.stage.txManager.loadTexture(i,f)}createShader(i,f){return this.stage.shManager.loadShader(i,f)}createDynamicShader(i){return this.stage.shManager.loadDynamicShader({effects:i})}createEffect(i,f,d){return{name:d,type:i,props:f}}getNodeById(i){var y;const f=(y=this.stage)==null?void 0:y.root;if(!f)return null;const d=x=>{if(x.id===i)return x;for(const s of x.children){const g=d(s);if(g)return g}return null};return d(f)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){throw new Error("Not implemented")}}class eC extends vr{constructor(i){super();O(this,"fontFamily");O(this,"descriptors");O(this,"loaded",!1);O(this,"metrics",null);const{fontFamily:f,descriptors:d,metrics:y}=i;y&&(this.metrics={ascender:y.ascender/y.unitsPerEm,descender:y.descender/y.unitsPerEm,lineGap:y.lineGap/y.unitsPerEm}),this.fontFamily=f,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...d}}static convertToCssFontFaceDescriptors(i){return{style:i.style,weight:typeof i.weight=="number"?`${i.weight}`:i.weight,stretch:i.stretch,unicodeRange:i.unicodeRange,featureSettings:i.featureSettings,display:i.display}}}class Hc extends eC{constructor(i){super(i);O(this,"fontFace");O(this,"fontUrl");const{fontFamily:f,fontUrl:d}=i,y=d.replace(/\(|\)/g,""),x=this.descriptors,s={style:x.style,weight:typeof x.weight=="number"?`${x.weight}`:x.weight,stretch:x.stretch,unicodeRange:x.unicodeRange,featureSettings:x.featureSettings,display:x.display},g=new FontFace(f,`url(${y})`,s);y.length>0?g.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error):(this.loaded=!0,this.emit("loaded")),this.fontFace=g,this.fontUrl=d}}class UM{}class tC extends UM{constructor(i,f,d,y,x,s,g,C,R,b,_,D,w){super();O(this,"glw");O(this,"options");O(this,"buffers");O(this,"shader");O(this,"shaderProps");O(this,"alpha");O(this,"clippingRect");O(this,"dimensions");O(this,"bufferIdx");O(this,"zIndex");O(this,"renderToTexture");O(this,"parentHasRenderTexture");O(this,"framebufferDimensions");O(this,"length",0);O(this,"numQuads",0);O(this,"textures",[]);O(this,"maxTextures");this.glw=i,this.options=f,this.buffers=d,this.shader=y,this.shaderProps=x,this.alpha=s,this.clippingRect=g,this.dimensions=C,this.bufferIdx=R,this.zIndex=b,this.renderToTexture=_,this.parentHasRenderTexture=D,this.framebufferDimensions=w,this.maxTextures=y.supportsIndexedTextures?i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(i){const{textures:f,maxTextures:d}=this;let y=-1;const x=f.length;for(let s=0;s<x;s++)if(f[s]===i){y=s;break}return y!==-1?y:x>=d?4294967295:(this.textures.push(i),x)}draw(){const{glw:i,shader:f,shaderProps:d,options:y}=this,{shManager:x}=y;x.useShader(f),f.bindRenderOp(this,d);const s=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:g,y:C,width:R,height:b}=this.clippingRect,_=y.pixelRatio,D=y.canvas.height,w=Math.round(g*_),L=Math.round(R*_),$=Math.round(b*_),B=Math.round(D-$-C*_);i.setScissorTest(!0),i.scissor(w,B,L,$)}else i.setScissorTest(!1);i.drawElements(i.TRIANGLES,6*this.numQuads,i.UNSIGNED_SHORT,s)}}function BM(h){const r={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(r).forEach(f=>{r[f]=h.getParameter(h[f])}),r}function jM(h){const r={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(r).forEach(f=>{r[f]=h.getExtension(f)}),r}function FM(h,r){const i=~~(r/80),f=new Uint16Array(i*6);for(let y=0,x=0;y<i;y+=6,x+=4)f[y]=x,f[y+1]=x+1,f[y+2]=x+2,f[y+3]=x+2,f[y+4]=x+1,f[y+5]=x+3;const d=h.createBuffer();h.elementArrayBufferData(d,f,h.STATIC_DRAW)}function $M(h){return h!==null&&typeof h=="object"&&h.constructor&&h.constructor.name==="HTMLImageElement"}const j0=new Uint8Array([0,0,0,0]);class vg extends QS{constructor(i,f,d){super(f,d);O(this,"glw");O(this,"_nativeCtxTexture",null);O(this,"_state","freed");O(this,"_w",0);O(this,"_h",0);this.glw=i}get ctxTexture(){return this._state==="freed"&&this.load(),et(this._nativeCtxTexture),this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){if(!(this._state==="loading"||this._state==="loaded")){if(this._state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this._nativeCtxTexture===null){this._state="failed",this.textureSource.setState("failed",new Error("Could not create WebGL Texture")),console.error("Could not create WebGL Texture");return}this.onLoadRequest().then(({width:i,height:f})=>{this._state!=="freed"&&(this._state="loaded",this._w=i,this._h=f,this.textureSource.setState("loaded",{width:i,height:f}))}).catch(i=>{this._state!=="freed"&&(this._state="failed",this.textureSource.setState("failed",i),console.error(i))})}}async onLoadRequest(){var x;const{glw:i}=this;i.texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(j0.byteLength);const f=await((x=this.textureSource)==null?void 0:x.getTextureData());if(!this._nativeCtxTexture)return et(this._state==="freed"),{width:0,height:0};let d=0,y=0;if(et(this._nativeCtxTexture),i.activeTexture(0),typeof ImageBitmap<"u"&&f.data instanceof ImageBitmap||f.data instanceof ImageData||$M(f.data)){const s=f.data;d=s.width,y=s.height,i.bindTexture(this._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!f.premultiplyAlpha),i.texImage2D(0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,s),this.setTextureMemUse(d*y*4),(i.isWebGl2()||oS(d)&&oS(y))&&i.generateMipmap()}else if(f.data===null)d=0,y=0,i.bindTexture(this._nativeCtxTexture),i.texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,j0),this.setTextureMemUse(j0.byteLength);else if("mipmaps"in f.data&&f.data.mipmaps){const{mipmaps:s,width:g=0,height:C=0,type:R,glInternalFormat:b}=f.data,_=R==="ktx"?new DataView(s[0]??new ArrayBuffer(0)):s[0];i.bindTexture(this._nativeCtxTexture),i.compressedTexImage2D(0,b,g,C,0,_),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),this.setTextureMemUse(_.byteLength)}else console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",f);return{width:d,height:y}}free(){if(this._state==="freed"||(this._state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,!this._nativeCtxTexture))return;const{glw:i}=this;i.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null}createNativeCtxTexture(){const{glw:i}=this,f=i.createTexture();return f?(i.activeTexture(0),i.bindTexture(f),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),f):null}}class zM extends vg{constructor(r,i,f){super(r,i,f)}async onLoadRequest(){var i,f;const r=await this.textureSource.getTextureData();return{width:((i=r.data)==null?void 0:i.width)||0,height:((f=r.data)==null?void 0:f.height)||0}}}class nC{constructor(r){O(this,"config");this.config=r}getBuffer(r){var i;return(i=this.config.find(f=>f.attributes[r]))==null?void 0:i.buffer}getAttributeInfo(r){var i;return(i=this.config.find(f=>f.attributes[r]))==null?void 0:i.attributes[r]}}function VM(h){return self.WebGL2RenderingContext&&h instanceof self.WebGL2RenderingContext}class HM{constructor(r){O(this,"gl");O(this,"activeTextureUnit",0);O(this,"texture2dUnits");O(this,"texture2dParams",new WeakMap);O(this,"scissorEnabled");O(this,"scissorX");O(this,"scissorY");O(this,"scissorWidth");O(this,"scissorHeight");O(this,"blendEnabled");O(this,"blendSrcRgb");O(this,"blendDstRgb");O(this,"blendSrcAlpha");O(this,"blendDstAlpha");O(this,"boundArrayBuffer");O(this,"boundElementArrayBuffer");O(this,"curProgram");O(this,"canvas");O(this,"MAX_RENDERBUFFER_SIZE");O(this,"MAX_TEXTURE_SIZE");O(this,"MAX_VIEWPORT_DIMS");O(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");O(this,"MAX_TEXTURE_IMAGE_UNITS");O(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");O(this,"MAX_VERTEX_ATTRIBS");O(this,"MAX_VARYING_VECTORS");O(this,"MAX_VERTEX_UNIFORM_VECTORS");O(this,"MAX_FRAGMENT_UNIFORM_VECTORS");O(this,"TEXTURE_MAG_FILTER");O(this,"TEXTURE_MIN_FILTER");O(this,"TEXTURE_WRAP_S");O(this,"TEXTURE_WRAP_T");O(this,"LINEAR");O(this,"CLAMP_TO_EDGE");O(this,"RGBA");O(this,"UNSIGNED_BYTE");O(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");O(this,"UNPACK_FLIP_Y_WEBGL");O(this,"FLOAT");O(this,"TRIANGLES");O(this,"UNSIGNED_SHORT");O(this,"ONE");O(this,"ONE_MINUS_SRC_ALPHA");O(this,"VERTEX_SHADER");O(this,"FRAGMENT_SHADER");O(this,"STATIC_DRAW");O(this,"COMPILE_STATUS");O(this,"LINK_STATUS");O(this,"DYNAMIC_DRAW");O(this,"COLOR_ATTACHMENT0");this.gl=r,this.activeTextureUnit=r.getParameter(r.ACTIVE_TEXTURE)-r.TEXTURE0;const i=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(i).fill(void 0).map((d,y)=>(this.activeTexture(y),r.getParameter(r.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=r.isEnabled(r.SCISSOR_TEST);const f=r.getParameter(r.SCISSOR_BOX);this.scissorX=f[0],this.scissorY=f[1],this.scissorWidth=f[2],this.scissorHeight=f[3],this.blendEnabled=r.isEnabled(r.BLEND),this.blendSrcRgb=r.getParameter(r.BLEND_SRC_RGB),this.blendDstRgb=r.getParameter(r.BLEND_DST_RGB),this.blendSrcAlpha=r.getParameter(r.BLEND_SRC_ALPHA),this.blendDstAlpha=r.getParameter(r.BLEND_DST_ALPHA),this.boundArrayBuffer=r.getParameter(r.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=r.getParameter(r.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=r.getParameter(r.CURRENT_PROGRAM),this.canvas=r.canvas,this.MAX_RENDERBUFFER_SIZE=r.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=r.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=r.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=r.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=r.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=r.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=r.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=r.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=r.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=r.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=r.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=r.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=r.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=r.TEXTURE_WRAP_T,this.LINEAR=r.LINEAR,this.CLAMP_TO_EDGE=r.CLAMP_TO_EDGE,this.RGBA=r.RGBA,this.UNSIGNED_BYTE=r.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=r.UNPACK_FLIP_Y_WEBGL,this.FLOAT=r.FLOAT,this.TRIANGLES=r.TRIANGLES,this.UNSIGNED_SHORT=r.UNSIGNED_SHORT,this.ONE=r.ONE,this.ONE_MINUS_SRC_ALPHA=r.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=r.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=r.TRIANGLES,this.UNSIGNED_SHORT=r.UNSIGNED_SHORT,this.VERTEX_SHADER=r.VERTEX_SHADER,this.FRAGMENT_SHADER=r.FRAGMENT_SHADER,this.STATIC_DRAW=r.STATIC_DRAW,this.COMPILE_STATUS=r.COMPILE_STATUS,this.LINK_STATUS=r.LINK_STATUS,this.DYNAMIC_DRAW=r.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=r.COLOR_ATTACHMENT0}isWebGl2(){return VM(this.gl)}activeTexture(r){const{gl:i}=this;this.activeTextureUnit!==r&&(i.activeTexture(r+i.TEXTURE0),this.activeTextureUnit=r)}bindTexture(r){const{gl:i,activeTextureUnit:f,texture2dUnits:d}=this;d[f]!==r&&(d[f]=r,i.bindTexture(this.gl.TEXTURE_2D,r))}_getActiveTexture(){const{activeTextureUnit:r,texture2dUnits:i}=this;return i[r]}texParameteri(r,i){const{gl:f,texture2dParams:d}=this,y=this._getActiveTexture();if(!y)throw new Error("No active texture");let x=d.get(y);x||(x={},d.set(y,x)),x[r]!==i&&(x[r]=i,f.texParameteri(f.TEXTURE_2D,r,i))}texImage2D(r,i,f,d,y,x,s,g){const{gl:C}=this;x?C.texImage2D(C.TEXTURE_2D,r,i,f,d,y,x,s,g):C.texImage2D(C.TEXTURE_2D,r,i,f,d,y)}compressedTexImage2D(r,i,f,d,y,x){const{gl:s}=this;s.compressedTexImage2D(s.TEXTURE_2D,r,i,f,d,y,x)}pixelStorei(r,i){const{gl:f}=this;f.pixelStorei(r,i)}generateMipmap(){const{gl:r}=this;r.generateMipmap(r.TEXTURE_2D)}createTexture(){const{gl:r}=this;return r.createTexture()}deleteTexture(r){const{gl:i}=this;r&&this.texture2dParams.delete(r),i.deleteTexture(r)}viewport(r,i,f,d){const{gl:y}=this;y.viewport(r,i,f,d)}clearColor(r,i,f,d){const{gl:y}=this;y.clearColor(r,i,f,d)}setScissorTest(r){const{gl:i,scissorEnabled:f}=this;r!==f&&(r?i.enable(i.SCISSOR_TEST):i.disable(i.SCISSOR_TEST),this.scissorEnabled=r)}scissor(r,i,f,d){const{gl:y,scissorX:x,scissorY:s,scissorWidth:g,scissorHeight:C}=this;(r!==x||i!==s||f!==g||d!==C)&&(y.scissor(r,i,f,d),this.scissorX=r,this.scissorY=i,this.scissorWidth=f,this.scissorHeight=d)}setBlend(r){const{gl:i,blendEnabled:f}=this;r!==f&&(r?i.enable(i.BLEND):i.disable(i.BLEND),this.blendEnabled=r)}blendFunc(r,i){const{gl:f,blendSrcRgb:d,blendDstRgb:y,blendSrcAlpha:x,blendDstAlpha:s}=this;(r!==d||i!==y||r!==x||i!==s)&&(f.blendFunc(r,i),this.blendSrcRgb=r,this.blendDstRgb=i,this.blendSrcAlpha=r,this.blendDstAlpha=i)}createBuffer(){const{gl:r}=this;return r.createBuffer()}createFramebuffer(){const{gl:r}=this;return r.createFramebuffer()}bindFramebuffer(r){const{gl:i}=this;i.bindFramebuffer(i.FRAMEBUFFER,r)}framebufferTexture2D(r,i,f){const{gl:d}=this;d.framebufferTexture2D(d.FRAMEBUFFER,r,d.TEXTURE_2D,i,f)}clear(){const{gl:r}=this;r.clear(r.COLOR_BUFFER_BIT)}arrayBufferData(r,i,f){const{gl:d,boundArrayBuffer:y}=this;y!==r&&(d.bindBuffer(d.ARRAY_BUFFER,r),this.boundArrayBuffer=r),d.bufferData(d.ARRAY_BUFFER,i,f)}elementArrayBufferData(r,i,f){const{gl:d,boundElementArrayBuffer:y}=this;y!==r&&(d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,r),this.boundElementArrayBuffer=r),d.bufferData(d.ELEMENT_ARRAY_BUFFER,i,f)}vertexAttribPointer(r,i,f,d,y,x,s){const{gl:g,boundArrayBuffer:C}=this;C!==r&&(g.bindBuffer(g.ARRAY_BUFFER,r),this.boundArrayBuffer=r),g.vertexAttribPointer(i,f,d,y,x,s)}useProgram(r){const{gl:i,curProgram:f}=this;f!==r&&(i.useProgram(r),this.curProgram=r)}uniform1f(r,i){const{gl:f}=this;f.uniform1f(r,i)}uniform1fv(r,i){const{gl:f}=this;f.uniform1fv(r,i)}uniform1i(r,i){const{gl:f}=this;f.uniform1i(r,i)}uniform1iv(r,i){const{gl:f}=this;f.uniform1iv(r,i)}uniform2f(r,i,f){const{gl:d}=this;d.uniform2f(r,i,f)}uniform2fv(r,i){const{gl:f}=this;f.uniform2fv(r,i)}uniform2i(r,i,f){const{gl:d}=this;d.uniform2i(r,i,f)}uniform2iv(r,i){const{gl:f}=this;f.uniform2iv(r,i)}uniform3f(r,i,f,d){const{gl:y}=this;y.uniform3f(r,i,f,d)}uniform3fv(r,i){const{gl:f}=this;f.uniform3fv(r,i)}uniform3i(r,i,f,d){const{gl:y}=this;y.uniform3i(r,i,f,d)}uniform3iv(r,i){const{gl:f}=this;f.uniform3iv(r,i)}uniform4f(r,i,f,d,y){const{gl:x}=this;x.uniform4f(r,i,f,d,y)}uniform4fv(r,i){const{gl:f}=this;f.uniform4fv(r,i)}uniform4i(r,i,f,d,y){const{gl:x}=this;x.uniform4i(r,i,f,d,y)}uniform4iv(r,i){const{gl:f}=this;f.uniform4iv(r,i)}uniformMatrix2fv(r,i){const{gl:f}=this;f.uniformMatrix2fv(r,!1,i)}uniformMatrix3fv(r,i){const{gl:f}=this;f.uniformMatrix3fv(r,!1,i)}uniformMatrix4fv(r,i){const{gl:f}=this;f.uniformMatrix4fv(r,!1,i)}getParameter(r){const{gl:i}=this;return i.getParameter(r)}drawElements(r,i,f,d){const{gl:y}=this;y.drawElements(r,i,f,d)}getExtension(r){const{gl:i}=this;return i.getExtension(r)}createVertexArray(){const{gl:r}=this;return et(r instanceof WebGL2RenderingContext),r.createVertexArray()}bindVertexArray(r){const{gl:i}=this;et(i instanceof WebGL2RenderingContext),i.bindVertexArray(r)}getAttribLocation(r,i){const{gl:f}=this;return f.getAttribLocation(r,i)}getUniformLocation(r,i){const{gl:f}=this;return f.getUniformLocation(r,i)}enableVertexAttribArray(r){const{gl:i}=this;i.enableVertexAttribArray(r)}disableVertexAttribArray(r){const{gl:i}=this;i.disableVertexAttribArray(r)}createShader(r){const{gl:i}=this;return i.createShader(r)}compileShader(r){const{gl:i}=this;i.compileShader(r)}attachShader(r,i){const{gl:f}=this;f.attachShader(r,i)}linkProgram(r){const{gl:i}=this;i.linkProgram(r)}deleteProgram(r){const{gl:i}=this;i.deleteProgram(r)}getShaderParameter(r,i){const{gl:f}=this;return f.getShaderParameter(r,i)}getShaderInfoLog(r){const{gl:i}=this;return i.getShaderInfoLog(r)}createProgram(){const{gl:r}=this;return r.createProgram()}getProgramParameter(r,i){const{gl:f}=this;return f.getProgramParameter(r,i)}getProgramInfoLog(r){const{gl:i}=this;return i.getProgramInfoLog(r)}shaderSource(r,i){const{gl:f}=this;f.shaderSource(r,i)}deleteShader(r){const{gl:i}=this;i.deleteShader(r)}}class fS extends vg{constructor(i,f,d){super(i,f,d);O(this,"framebuffer");const y=i.createFramebuffer();et(y,"Unable to create framebuffer"),this.framebuffer=y}async onLoadRequest(){const{glw:i}=this,f=this._nativeCtxTexture=this.createNativeCtxTexture(),{width:d,height:y}=this.textureSource;return i.texImage2D(0,i.RGBA,d,y,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(d*y*4),i.bindFramebuffer(this.framebuffer),i.framebufferTexture2D(i.COLOR_ATTACHMENT0,f,0),i.bindFramebuffer(null),{width:d,height:y}}}const GM=24;class xg extends JS{constructor(i){super(i);O(this,"glw");O(this,"system");O(this,"quadBuffer");O(this,"fQuadBuffer");O(this,"uiQuadBuffer");O(this,"renderOps",[]);O(this,"curBufferIdx",0);O(this,"curRenderOp",null);O(this,"rttNodes",[]);O(this,"activeRttNode",null);O(this,"defShaderCtrl");O(this,"defaultShader");O(this,"quadBufferCollection");O(this,"defaultTexture");O(this,"quadBufferUsage",0);O(this,"renderToTextureActive",!1);this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:f,clearColor:d,bufferMemory:y}=i;this.defaultTexture=new Jc(this.txManager),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.stage.requestRender()});const x=VI(f,i.forceWebGL2,i.contextSpy),s=this.glw=new HM(x),g=da(d);s.viewport(0,0,f.width,f.height),s.clearColor(g[0],g[1],g[2],g[3]),s.setBlend(!0),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),FM(s,y),this.system={parameters:BM(this.glw),extensions:jM(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const C=s.createBuffer();et(C);const R=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new nC([{buffer:C,attributes:{a_position:{name:"a_position",size:2,type:s.FLOAT,normalized:!1,stride:R,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:s.FLOAT,normalized:!1,stride:R,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:s.UNSIGNED_BYTE,normalized:!0,stride:R,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:s.FLOAT,normalized:!1,stride:R,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:i}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,i.setScissorTest(!1),i.clear()}getShaderManager(){return this.shManager}createCtxTexture(i){return i instanceof Zl?new zM(this.glw,this.txMemManager,i):i instanceof th?new fS(this.glw,this.txMemManager,i):new vg(this.glw,this.txMemManager,i)}addQuad(i){const{fQuadBuffer:f,uiQuadBuffer:d}=this;let y=i.texture||this.defaultTexture;if(i.shaderProps!==null){if(Zc(i.shaderProps,"$dimensions")==!0){const B=i.shaderProps.$dimensions;B.width=i.width,B.height=i.height}Zc(i.shaderProps,"$alpha")===!0&&(i.shaderProps.$alpha=i.alpha)}et(y.ctxTexture!==void 0,"Invalid texture type");let{curBufferIdx:x,curRenderOp:s}=this;const g={width:-1,height:-1};g.width=i.width,g.height=i.height;const C=i.shader||this.defaultShader;et(C.getUniformLocation!==void 0,"Invalid WebGL shader"),this.reuseRenderOp(i)===!1&&(this.newRenderOp(C,i.shaderProps,i.alpha,g,i.clippingRect,x,i.rtt,i.parentHasRenderTexture,i.framebufferDimensions),s=this.curRenderOp,et(s));let R=0,b=0,_=1,D=1;if(y.type===fo.subTexture){const{x:B,y:V,width:W,height:X}=y.props,{width:ie=0,height:K=0}=y.parentTexture.dimensions||{width:0,height:0};R=B/ie,_=R+W/ie,b=V/K,D=b+X/K,y=y.parentTexture}if(y.type===fo.image&&i.textureOptions!==null&&i.textureOptions.resizeMode!==void 0&&y.dimensions!==null){const B=i.textureOptions.resizeMode,{width:V,height:W}=y.dimensions;if(B.type==="cover"){const X=i.width/V,ie=i.height/W,K=Math.max(X,ie),pe=1/K;if(K&&X&&X<K){const ue=pe*i.width;R=(1-ue/V)*(B.clipX??.5),_=R+ue/V}if(K&&ie&&ie<K){const ue=pe*i.height;b=(1-ue/W)*(B.clipY??.5),D=b+ue/W}}}let w=0;i.textureOptions!==null&&(i.textureOptions.flipX===!0&&([R,_]=[_,R]),w=+(i.textureOptions.flipY||!1)),w^+(y.type===fo.renderToTexture)&&([b,D]=[D,b]);const L=y.ctxTexture;et(L.ctxTexture!==void 0);const $=this.addTexture(L,x);if(et(this.curRenderOp!==null),i.renderCoords)f[x++]=i.renderCoords.x1,f[x++]=i.renderCoords.y1,f[x++]=R,f[x++]=b,d[x++]=i.colorTl,f[x++]=$,f[x++]=i.renderCoords.x2,f[x++]=i.renderCoords.y2,f[x++]=_,f[x++]=b,d[x++]=i.colorTr,f[x++]=$,f[x++]=i.renderCoords.x4,f[x++]=i.renderCoords.y4,f[x++]=R,f[x++]=D,d[x++]=i.colorBl,f[x++]=$,f[x++]=i.renderCoords.x3,f[x++]=i.renderCoords.y3,f[x++]=_,f[x++]=D,d[x++]=i.colorBr,f[x++]=$;else if(i.tb!==0||i.tc!==0)f[x++]=i.tx,f[x++]=i.ty,f[x++]=R,f[x++]=b,d[x++]=i.colorTl,f[x++]=$,f[x++]=i.tx+i.width*i.ta,f[x++]=i.ty+i.width*i.tc,f[x++]=_,f[x++]=b,d[x++]=i.colorTr,f[x++]=$,f[x++]=i.tx+i.height*i.tb,f[x++]=i.ty+i.height*i.td,f[x++]=R,f[x++]=D,d[x++]=i.colorBl,f[x++]=$,f[x++]=i.tx+i.width*i.ta+i.height*i.tb,f[x++]=i.ty+i.width*i.tc+i.height*i.td,f[x++]=_,f[x++]=D,d[x++]=i.colorBr,f[x++]=$;else{const B=i.tx+i.width*i.ta,V=i.ty+i.height*i.td;f[x++]=i.tx,f[x++]=i.ty,f[x++]=R,f[x++]=b,d[x++]=i.colorTl,f[x++]=$,f[x++]=B,f[x++]=i.ty,f[x++]=_,f[x++]=b,d[x++]=i.colorTr,f[x++]=$,f[x++]=i.tx,f[x++]=V,f[x++]=R,f[x++]=D,d[x++]=i.colorBl,f[x++]=$,f[x++]=B,f[x++]=V,f[x++]=_,f[x++]=D,d[x++]=i.colorBr,f[x++]=$}this.curRenderOp.length+=GM,this.curRenderOp.numQuads++,this.curBufferIdx=x}newRenderOp(i,f,d,y,x,s,g,C,R){const b=new tC(this.glw,this.options,this.quadBufferCollection,i,f,d,x,y,s,0,g,C,R);this.curRenderOp=b,this.renderOps.push(b)}addTexture(i,f,d){const{curRenderOp:y}=this;et(y);const x=y.addTexture(i);if(x===4294967295){if(d)throw new Error("Unable to add texture to render op");return this.newRenderOp(y.shader,y.shaderProps,y.alpha,y.dimensions,y.clippingRect,f),this.addTexture(i,f,!0)}return x}reuseRenderOp(i){var C;const{shader:f,shaderProps:d,parentHasRenderTexture:y,rtt:x,clippingRect:s}=i,g=f||this.defaultShader;return!(((C=this.curRenderOp)==null?void 0:C.shader)!==g||!QI(this.curRenderOp.clippingRect,s)||y||x||this.curRenderOp.shader!==this.defaultShader&&(!d||!this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,d)))}addRenderOp(i){this.renderOps.push(i),this.curRenderOp=null}render(i="screen"){const{glw:f,quadBuffer:d}=this,y=new Float32Array(d,0,this.curBufferIdx),x=this.quadBufferCollection.getBuffer("a_position")??null;f.arrayBufferData(x,y,f.STATIC_DRAW);for(let s=0,g=this.renderOps.length;s<g;s++)this.renderOps[s].draw();this.quadBufferUsage=this.curBufferIdx*y.BYTES_PER_ELEMENT}renderToTexture(i){for(let f=0;f<this.rttNodes.length;f++)if(this.rttNodes[f]===i)return;this.rttNodes.unshift(i)}renderRTTNodes(){const{glw:i}=this;this.stage;for(let d=0;d<this.rttNodes.length;d++){const y=this.rttNodes[d];if(!y||!y.hasRTTupdates)continue;this.activeRttNode=y,et(y.texture,"RTT node missing texture");const x=y.texture.ctxTexture;et(x instanceof fS),this.renderToTextureActive=!0,i.bindFramebuffer(x.framebuffer),i.viewport(0,0,x.w,x.h),i.clearColor(0,0,0,0),i.clear();for(let s=0;s<y.children.length;s++){const g=y.children[s];g&&(g.update(this.stage.deltaTime,{x:0,y:0,width:0,height:0,valid:!1}),this.stage.addQuads(g),g.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,y.hasRTTupdates=!1}const f=da(this.stage.options.clearColor);i.clearColor(f[0],f[1],f[2],f[3]),i.bindFramebuffer(null),i.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(i){const f=this.rttNodes.indexOf(i);f!==-1&&this.rttNodes.splice(f,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}}const XM={LINE_FEED:10,CARRIAGE_RETURN:13,SPACE:32,TAB:9,ZERO_WIDTH_SPACE:8203,ZERO_WIDTH_NON_JOINER:8204,ZERO_WIDTH_JOINER:8205,LEFT_TO_RIGHT_MARK:8206,RIGHT_TO_LEFT_MARK:8207,LEFT_TO_RIGHT_EMBEDDING:8234,RIGHT_TO_LEFT_EMBEDDING:8235,POP_DIRECTIONAL_FORMATTING:8236,LEFT_TO_RIGHT_OVERRIDE:8237,RIGHT_TO_LEFT_OVERRIDE:8238,LINE_SEPARATOR:8232,PARAGRAPH_SEPARATOR:8233,OBJECT_REPLACEMENT_CHARACTER:65532,REPLACEMENT_CHARACTER:65533,ZERO_WIDTH_NO_BREAK_SPACE:65279,LEFT_TO_RIGHT_ISOLATE:8294,RIGHT_TO_LEFT_ISOLATE:8295,FIRST_STRONG_ISOLATE:8296,POP_DIRECTIONAL_ISOLATE:8297,INHIBIT_SYMMETRIC_SWAPPING:8298,ACTIVATE_SYMMETRIC_SWAPPING:8299,INHIBIT_ARABIC_FORM_SHAPING:8300,ACTIVATE_ARABIC_FORM_SHAPING:8301,NATIONAL_DIGIT_SHAPES:8302,NOMINAL_DIGIT_SHAPES:8303,LEFT_TO_RIGHT_BOUNDARY:8206,RIGHT_TO_LEFT_BOUNDARY:8207};class WM{}class YM extends WM{constructor(i,f){super();O(this,"data");O(this,"glyphMap");O(this,"kernings");this.data=i,this.glyphMap=f;const d=this.kernings={};i.kernings.forEach(y=>{const x=y.second,s=d[x]=d[x]||{};s[y.first]=y.amount}),this.kernings=d}*shapeText(i,f){var x;let d,y;for(;(d=f.peek())&&!d.done;){const s=d.value,g=this.glyphMap.get(s);if(f.next(),g!==void 0){const C=y!==void 0?(((x=this.kernings[g.id])==null?void 0:x[y])||0)+i.letterSpacing:0;y=g.id,yield{mapped:!0,glyphId:g.id,codepoint:s,cluster:f.lastIndex,xAdvance:g.xadvance+C,yAdvance:0,xOffset:g.xoffset+C,yOffset:g.yoffset,xBearing:0,yBearing:0,width:g.width,height:g.height}}else s===XM.LINE_FEED&&(y=void 0),yield{mapped:!1,codepoint:s,cluster:f.lastIndex}}}}class ng extends eC{constructor(i,f){super(f);O(this,"type");O(this,"texture");O(this,"maxCharHeight",0);O(this,"data");O(this,"shaper");O(this,"glyphMap",new Map);const{atlasUrl:d,atlasDataUrl:y,stage:x}=f;this.type=i;const s=x.renderer;et(s instanceof xg,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=x.txManager.loadTexture("ImageTexture",{src:d,premultiplyAlpha:!1}),this.texture.on("loaded",()=>{this.checkLoaded(),x.requestRender()}),this.texture.ctxTexture.load(),fetch(y).then(async g=>{var R;this.data=await g.json(),et(this.data);let C=0;if(this.data.chars.forEach(b=>{this.glyphMap.set(b.id,b);const _=b.yoffset+b.height;_>C&&(C=_)}),this.maxCharHeight=C,this.shaper=new YM(this.data,this.glyphMap),!this.metrics)if((R=this.data)!=null&&R.lightningMetrics){const{ascender:b,descender:_,lineGap:D,unitsPerEm:w}=this.data.lightningMetrics;this.metrics={ascender:b/w,descender:_/w,lineGap:D/w}}else throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);this.checkLoaded()}).catch(console.error)}getAtlasEntry(i){const f=this.glyphMap.get(i);if(f===void 0)throw new Error(`Glyph ${i} not found in font ${this.fontFamily}`);return{x:f.x,y:f.y,width:f.width,height:f.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}let fa=null,nh=null,hh=!1;const qM=()=>{hh=!0},KM=()=>{hh=!1},ih=new WeakMap,Gc=new Map,ZM=h=>{if(Gc.size!==0)for(const[r,i]of Gc){if(h.indexOf(r)===-1)continue;const f=ih.get(i);if(f!==void 0)for(const d of f.values())d.delete(r),Gc.delete(r)}},Xc=(h,r,i=!1)=>{if(fa){if(hh||nh!==null&&r!==nh)return;let f=ih.get(h);f||(f=new Map,ih.set(h,f));let d=f.get(r);d||(d=new Set,f.set(r,d)),d.add(fa),i===!0&&Gc.set(fa,h)}},ca=(h,r,i=!1)=>{if(hh===!0)return;const f=ih.get(h);if(!f)return;const d=f.get(r);if(d)for(let y of d)y(i)},Nc=(h,r=null)=>{fa=h,nh=r,fa(),fa=null,nh=null},ig=(h,r)=>{if(h===r)return!0;if(h.length!==r.length)return!1;let i=h.length;for(;i--;){const f=h[i],d=r[i];if(Array.isArray(f)&&Array.isArray(d)){if(ig(f,d)===!1)return!1}else if(typeof f=="object"&&f!==null&&typeof d=="object"&&d!==null){if(ig(Object.entries(f),Object.entries(d))===!1)return!1}else if(f!==d)return!1}return!0},Wc=["push","pop","shift","unshift","splice","sort"],cS=new WeakMap,Hr=h=>{const r=h&&h[ye.raw];return r?Hr(r):h},og=(h,r=null,i,f)=>{if(typeof h=="object"&&(h[ye.id]!==void 0||h.constructor.name===eh.name))return h;const d=cS.get(h);if(d!==void 0)return d;const y={get(s,g,C){return g===ye.raw?h:Array.isArray(s)===!0?typeof s[g]=="object"&&s[g]!==null?(Array.isArray(s[g])===!0&&Xc(s,g,f),og(Hr(s[g]),s,g)):Wc.indexOf(g)!==-1?function(...R){qM();const b=s[g].apply(this,R);return KM(),ca(r,i),b}:g==="length"?h.length:Reflect.get(s,g,C):typeof s[g]=="object"&&s[g]!==null?(Array.isArray(s[g])===!0&&Xc(s,g,f),og(Hr(s[g]),s,g)):(Xc(s,g,f),Reflect.get(s,g,C))},set(s,g,C,R){const b=Hr(s[g]),_=Hr(C);let D=!0;const w=Array.isArray(_)===!0?ig(b,_):b===_;return w===!1&&(Array.isArray(C)===!0&&(C=Hr(C).slice(0)),D=Reflect.set(s,g,C,R)),D===!0&&w===!1&&(Array.isArray(s)===!0&&g in s&&ca(r,i,!0),ca(s,g,!0)),D}},x=new Proxy(h,y);return cS.set(h,x),x},iC=(h,r)=>(Object.keys(h).forEach(i=>{let f=h[i];if(h[i]!==null&&typeof h[i]=="object"){if(Object.getPrototypeOf(h[i])===Object.prototype)return iC(h[i]);if(Array.isArray(h[i])===!0)for(let d=0;d<Wc.length-1;d++)h[i][Wc[d]]=function(y){Array.prototype[Wc[d]].call(this,y),ca(h,i)}}Object.defineProperty(h,i,{enumerable:!0,configurable:!0,get(){return Xc(h,i,r),f},set(d){f!==d&&(f=d,ca(h,i))}})}),h),oh=(h,r="Proxy",i=!1)=>r==="defineProperty"?iC(h,i):og(h,void 0,void 0,i),QM=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],JM={previous:null,current:null,get state(){return this.current},set state(h){QM.indexOf(h)>-1&&(h!==this.current||h==="focus")&&(rn.debug(`Setting lifecycle state from ${this.current} to ${h} for ${this.component.componentId}`),this.previous=this.current,this.current=h,$I(h,this.component[ye.identifier],this.component),Y0(h,this.component[ye.identifier],this.component))}},eR=24;function tR(h,r,i,f,d,y,x,s,g){const C=Math.min(Math.max(x.firstLineIdx,0),s.length),R=0,{metrics:b}=i;et(b,"Font metrics not loaded"),et(i.data,"Font data not loaded");const _=(b.ascender-b.descender)*h;let D=0;f==="middle"?D=(r-_)/2:f==="bottom"&&(D=r-_);const w=d/y,L=i.data.common.base,B=b.ascender*h-L,V=w+B+C*r+D;if(!(g&&V>=g/y))return{sdfX:R,sdfY:V,lineIndex:C}}class Gl{constructor(r,i=0){O(this,"iterator");O(this,"peekBuffer",[]);O(this,"_lastIndex");this.iterator=r,this.iterator=r,this._lastIndex=i-1,this.peekBuffer=[]}next(){const r=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return r.done?this._lastIndex=-1:this._lastIndex++,r}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const r=this.iterator.next();return this.peekBuffer.push(r),r}get lastIndex(){return this._lastIndex}}function*Xl(h,r=0){let i=r;for(;i<h.length;){const f=h.codePointAt(i);if(f===void 0)throw new Error("Invalid Unicode code point");yield f,i+=f<=65535?1:2}}function nR(h,r,i){const f=i.shapeText(r,new Gl(Xl(h,0),0));let d=0;for(const y of f)y.mapped&&y.codepoint!==8203&&(d+=y.xAdvance);return d}function iR(h,r,i,f,d,y,x,s,g,C,R,b,_,D,w,L,$,B,V){et(w,"Font face must be loaded"),et(w.loaded,"Font face must be loaded"),et(w.data,"Font face must be loaded"),et(w.shaper,"Font face must be loaded");const W=s/w.data.info.size,X=g/W,ie=y/W,K=C/W,pe=_[h],ue=(pe==null?void 0:pe.codepointIndex)||0,q=(pe==null?void 0:pe.maxX)||0,A=(pe==null?void 0:pe.maxY)||0;let Y=q,le=A,ge=r,de=i,se=0;const re={codepointIndex:-1,bufferOffset:-1,xStart:-1},oe=w.shaper,Re={letterSpacing:K};let Ae=oe.shapeText(Re,new Gl(Xl(f,ue),ue)),Ie,_e=-1;const Te=[],je=x/W,F=nR(B,Re,oe);let Ue=!0;for(;Ue;){const He=(V===0||h+1<V)&&(b!=="both"||$||de+X+w.maxCharHeight<=je),Ge=He?ie:ie-F;let Ce=0;const H=de+w.maxCharHeight>=D.y1,Ee=de<=D.y2,ke=H&&Ee;for(;(Ie=Ae.next())&&!Ie.done;){const ce=Ie.value;if(h===_.length)_.push({codepointIndex:ce.cluster,maxY:le,maxX:Y});else if(h>_.length)throw new Error("Unexpected lineCache length");if(ce.codepoint===32||ce.codepoint===10||ce.codepoint===8203?re.codepointIndex!==-1&&(re.codepointIndex=-1,Ce=ge):re.codepointIndex===-1&&(re.codepointIndex=ce.cluster,re.bufferOffset=se,re.xStart=Ce),ce.mapped){const Xe=ge+ce.xOffset+ce.width;if(b!=="none"&&Xe>=Ge&&re.codepointIndex!==-1&&re.xStart>0)if(He){Ae=oe.shapeText(Re,new Gl(Xl(f,re.codepointIndex),re.codepointIndex)),se=re.bufferOffset;break}else Ae=oe.shapeText(Re,new Gl(Xl(B,0),0)),ge=re.xStart,se=re.bufferOffset,b="none";else{const be=ge+ce.xOffset,Oe=de+ce.yOffset;if(ke){_e===-1&&(_e=se);const he=w.getAtlasEntry(ce.glyphId),Q=he.x/w.data.common.scaleW,Ne=he.y/w.data.common.scaleH,Pe=he.width/w.data.common.scaleW,Ve=he.height/w.data.common.scaleH;R[se++]=be,R[se++]=Oe,R[se++]=Q,R[se++]=Ne,R[se++]=be+ce.width,R[se++]=Oe,R[se++]=Q+Pe,R[se++]=Ne,R[se++]=be,R[se++]=Oe+ce.height,R[se++]=Q,R[se++]=Ne+Ve,R[se++]=be+ce.width,R[se++]=Oe+ce.height,R[se++]=Q+Pe,R[se++]=Ne+Ve}le=Math.max(le,Oe+ce.height),Y=Math.max(Y,be+ce.width),ge+=ce.xAdvance}}else if(ce.codepoint===10){if(He)break;Ae=oe.shapeText(Re,new Gl(Xl(B,0),0)),b="none"}}_e!==-1&&(Te.push({bufferStart:_e,bufferEnd:se}),_e=-1),ge=0,de+=X,h++,re.codepointIndex=-1,Ce=0,!L&&b==="both"&&de>D.y2||Ie&&Ie.done?Ue=!1:He||(Ue=!1)}if(d==="center"){const He=b==="none"?Y:ie;for(let Ge=0;Ge<Te.length;Ge++){const Ce=Te[Ge],H=R[Ce.bufferEnd-4]-R[Ce.bufferStart],Ee=(He-H)/2;for(let ke=Ce.bufferStart;ke<Ce.bufferEnd;ke+=4)R[ke]+=Ee}}else if(d==="right"){const He=b==="none"?Y:ie;for(let Ge=0;Ge<Te.length;Ge++){const Ce=Te[Ge],H=Ce.bufferEnd===Ce.bufferStart?0:R[Ce.bufferEnd-4]-R[Ce.bufferStart],Ee=He-H;for(let ke=Ce.bufferStart;ke<Ce.bufferEnd;ke+=4)R[ke]+=Ee}}return et(Ie),{bufferNumFloats:se,bufferNumQuads:se/16,layoutNumCharacters:Ie.done?f.length-ue:Ie.value.cluster-ue+1,fullyProcessed:!!Ie.done,maxX:Y,maxY:le,numLines:_.length}}function oR(h,r){return Math.ceil(h/r)*r}function rR(h,r){return Math.floor(h/r)*r}function sR(h,r,i,f,d,y,x,s){const{screen:g,sdf:C}=h;if(!eM(x))g.x1=0,g.y1=0,g.x2=0,g.y2=0,C.x1=0,C.y1=0,C.x2=0,C.y2=0,h.numLines=0,h.firstLineIdx=0;else{const R=x.x1-r,b=R+(x.x2-x.x1),_=x.y1-i+f,D=rR(_-y,d||1),w=oR(_+(x.y2-x.y1)+y,d||1);g.x1=R,g.y1=D,g.x2=b,g.y2=w,C.x1=R/s,C.y1=D/s,C.x2=b/s,C.y2=w/s,h.numLines=Math.ceil((w-D)/d),h.firstLineIdx=d?Math.floor(D/d):0}h.valid=!0}function oC(h,r){return r*(h.ascender-h.descender+h.lineGap)}const aR={x:0,y:0,width:0,height:0};class lR extends yg{constructor(i){super(i);O(this,"ssdfFontFamilies",{});O(this,"msdfFontFamilies",{});O(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);O(this,"sdfShader");O(this,"rendererBounds");O(this,"type","sdf");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(i,f)=>{i.props.fontFamily=f,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontWeight:(i,f)=>{i.props.fontWeight=f,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStyle:(i,f)=>{i.props.fontStyle=f,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStretch:(i,f)=>{i.props.fontStretch=f,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontSize:(i,f)=>{i.props.fontSize=f,this.invalidateLayoutCache(i)},text:(i,f)=>{i.props.text=f,this.invalidateLayoutCache(i)},textAlign:(i,f)=>{i.props.textAlign=f,this.invalidateLayoutCache(i)},color:(i,f)=>{i.props.color=f},x:(i,f)=>{i.props.x=f,i.elementBounds.valid&&(this.setElementBoundsX(i),!i.renderWindow.valid&&U0(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},y:(i,f)=>{i.props.y=f,i.elementBounds.valid&&(this.setElementBoundsY(i),!i.renderWindow.valid&&U0(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},contain:(i,f)=>{i.props.contain=f,this.invalidateLayoutCache(i)},width:(i,f)=>{i.props.width=f,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,f)=>{i.props.height=f,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,f)=>{i.props.offsetY=f,this.invalidateLayoutCache(i)},scrollable:(i,f)=>{i.props.scrollable=f,this.invalidateLayoutCache(i)},scrollY:(i,f)=>{i.props.scrollY=f,this.scheduleUpdateState(i)},letterSpacing:(i,f)=>{i.props.letterSpacing=f,this.invalidateLayoutCache(i)},lineHeight:(i,f)=>{i.props.lineHeight=f,i.resLineHeight=void 0,this.invalidateLayoutCache(i)},maxLines:(i,f)=>{i.props.maxLines=f,this.invalidateLayoutCache(i)},textBaseline:(i,f)=>{i.props.textBaseline=f,this.invalidateLayoutCache(i)},verticalAlign:(i,f)=>{i.props.verticalAlign=f,this.invalidateLayoutCache(i)},overflowSuffix:(i,f)=>{i.props.overflowSuffix=f,this.invalidateLayoutCache(i)},debug:(i,f)=>{i.props.debug=f}}}canRenderFont(i){const{fontFamily:f}=i;return f in this.ssdfFontFamilies||f in this.msdfFontFamilies||f==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(i){return i instanceof ng}addFontFace(i){et(i instanceof ng);const f=i.fontFamily,d=i.type==="ssdf"?this.ssdfFontFamilies:i.type==="msdf"?this.msdfFontFamilies:void 0;if(!d){console.warn(`Invalid font face type: ${i.type}`);return}let y=d[f];y||(y=new Set,d[f]=y),y.add(i)}createState(i){return{props:i,status:"initialState",updateScheduled:!1,emitter:new vr,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(i){let{trFontFace:f}=i;const{textH:d,lineCache:y,debugData:x,forceFullLayoutCalc:s}=i;if(x.updateCount++,i.status==="initialState"&&this.setStatus(i,"loading"),f===void 0){if(f=this.resolveFontFace(i.props),i.trFontFace=f,f===void 0){const oe=`SdfTextRenderer: Could not resolve font face for family: '${i.props.fontFamily}'`;console.error(oe),this.setStatus(i,"failed",new Error(oe));return}f.texture.setRenderableOwner(i,!0)}if(f.loaded===!1){f.once("loaded",()=>{this.scheduleUpdateState(i)});return}et(f.data,"Font face data should be loaded"),et(f.metrics,"Font face metrics should be loaded");const{text:g,fontSize:C,x:R,y:b,contain:_,width:D,height:w,verticalAlign:L,scrollable:$,overflowSuffix:B,maxLines:V}=i.props,W=_==="both"&&$?i.props.scrollY:0,{renderWindow:X}=i,ie=f.data.info.size,K=C/ie;let pe=i.resLineHeight;if(pe===void 0){const oe=i.props.lineHeight;oe===void 0?pe=oC(f.metrics,C):pe=oe,i.resLineHeight=pe}const ue=pe/K;i.distanceRange=K*f.data.distanceField.distanceRange;const q=g.length*eR;let A=i.vertexBuffer;(!A||A.length<q)&&(A=new Float32Array(q*2));const Y=i.elementBounds;if(Y.valid||(this.setElementBoundsX(i),this.setElementBoundsY(i),Y.valid=!0),!s&&X.valid){const oe=X.screen;if(R+oe.x1<=Y.x1&&R+oe.x2>=Y.x2&&b-W+oe.y1<=Y.y1&&b-W+oe.y2>=Y.y2){this.setStatus(i,"loaded");return}X.valid=!1,this.setStatus(i,"loading")}const{offsetY:le,textAlign:ge}=i.props;if(!X.valid){if(!U0(Y,this.rendererBounds))return;sR(X,R,b,W,pe,_==="both"?Y.y2-Y.y1:0,Y,K)}const de=tR(ie,ue,f,L,le,K,X,y,d);if(!de){this.setStatus(i,"loaded");return}const{letterSpacing:se}=i.props,re=iR(de.lineIndex,de.sdfX,de.sdfY,g,ge,D,w,C,pe,se,A,_,y,X.sdf,f,s,$,B,V);i.bufferUploaded=!1,i.bufferNumFloats=re.bufferNumFloats,i.bufferNumQuads=re.bufferNumQuads,i.vertexBuffer=A,i.renderWindow=X,x.lastLayoutNumCharacters=re.layoutNumCharacters,x.bufferSize=A.byteLength,re.fullyProcessed&&(i.textW=re.maxX*K,i.textH=re.numLines*ue*K),this.setStatus(i,"loaded")}renderQuads(i,f,d,y,x,s){var Y,le;if(!i.vertexBuffer)return;const g=this.stage.renderer;et(g instanceof xg);const{fontSize:C,color:R,contain:b,scrollable:_,zIndex:D,debug:w}=i.props,L=b==="both"&&_?i.props.scrollY:0,{textW:$=0,textH:B=0,distanceRange:V,vertexBuffer:W,bufferUploaded:X,trFontFace:ie,elementBounds:K}=i;let{webGlBuffers:pe}=i;if(!pe){const ge=g.glw,de=4*Float32Array.BYTES_PER_ELEMENT,se=ge.createBuffer();et(se),i.webGlBuffers=new nC([{buffer:se,attributes:{a_position:{name:"a_position",size:2,type:ge.FLOAT,normalized:!1,stride:de,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:ge.FLOAT,normalized:!1,stride:de,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),i.bufferUploaded=!1,et(i.webGlBuffers),pe=i.webGlBuffers}if(!X){const ge=g.glw,de=(pe==null?void 0:pe.getBuffer("a_textureCoordinate"))??null;ge.arrayBufferData(de,W,ge.STATIC_DRAW),i.bufferUploaded=!0}if(et(ie),_&&b==="both"){et(K.valid);const ge=ZI(K,aR);d.valid?(i.clippingRect.valid=!0,d=VS(d,ge,i.clippingRect)):(i.clippingRect.valid=!0,d=HS(ge,i.clippingRect))}const ue=new tC(g.glw,g.options,pe,this.sdfShader,{transform:f.getFloatArr(),color:HI(R,y),size:C/(((Y=ie.data)==null?void 0:Y.info.size)||0),scrollY:L,distanceRange:V,debug:w.sdfShaderDebug},y,d,{height:B,width:$},0,D,!1,x,s),q=(le=i.trFontFace)==null?void 0:le.texture;et(q);const A=q.ctxTexture;ue.addTexture(A),ue.length=i.bufferNumFloats,ue.numQuads=i.bufferNumQuads,g.addRenderOp(ue)}setIsRenderable(i,f){var d;super.setIsRenderable(i,f),(d=i.trFontFace)==null||d.texture.setRenderableOwner(i,f)}destroyState(i){var f;super.destroyState(i),(f=i.trFontFace)==null||f.texture.setRenderableOwner(i,!1)}resolveFontFace(i){return this.stage.fontManager.resolveFontFace(this.fontFamilyArray,i,"sdf")}releaseFontFace(i){i.resLineHeight=void 0,i.trFontFace&&(i.trFontFace.texture.setRenderableOwner(i,!1),i.trFontFace=void 0)}invalidateLayoutCache(i){i.renderWindow.valid=!1,i.elementBounds.valid=!1,i.textH=void 0,i.textW=void 0,i.lineCache=[],this.setStatus(i,"loading"),this.scheduleUpdateState(i)}setElementBoundsX(i){const{x:f,contain:d,width:y}=i.props,{elementBounds:x}=i;x.x1=f,x.x2=d!=="none"?f+y:1/0}setElementBoundsY(i){const{y:f,contain:d,height:y}=i.props,{elementBounds:x}=i;x.y1=f,x.y2=d==="both"?f+y:1/0}}function hS(h){return h===""||h==="​"}function uR(h,r,i){if(r.metrics)return r.metrics;const f=h.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${r.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let d;return f.actualBoundingBoxDescent&&f.actualBoundingBoxAscent?d={ascender:f.actualBoundingBoxAscent/i,descender:-f.actualBoundingBoxDescent/i,lineGap:.2}:d={ascender:.8,descender:-.2,lineGap:.2},r.metrics=d,d}const dS=2048;function pS(h,r,i,f,d){const y=h!=="bottom"?.5*r:0;return i*(f-1)+y+Math.max(i,r)+(d||0)}class fR{constructor(r,i){O(this,"_canvas");O(this,"_context");O(this,"_settings");this._canvas=r,this._context=i,this._settings=this.mergeDefaults({})}set settings(r){this._settings=this.mergeDefaults(r)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const r=[this._settings.fontFamily],i=[];for(let f=0,d=r.length;f<d;f++)r[f]==="serif"||r[f]==="sans-serif"?i.push(r[f]):i.push(`"${r[f]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${i.join(",")}`}_load(){if(document.fonts){const r=this._getFontSetting();try{if(!document.fonts.check(r,this._settings.text))return document.fonts.load(r,this._settings.text).catch(i=>{console.warn("[Lightning] Font load error",i,r)}).then(()=>{document.fonts.check(r,this._settings.text)||console.warn("[Lightning] Font not found",r)})}catch{console.warn("[Lightning] Can't check font loading for "+r)}}}calculateRenderInfo(){const r={},i=this.getPrecision(),f=this._settings.paddingLeft*i,d=this._settings.paddingRight*i,y=this._settings.fontSize*i;let x=this._settings.offsetY===null?null:this._settings.offsetY*i;const s=this._settings.w*i,g=this._settings.h*i;let C=this._settings.wordWrapWidth*i;const R=this._settings.cutSx*i,b=this._settings.cutEx*i,_=this._settings.cutSy*i,D=this._settings.cutEy*i,w=(this._settings.letterSpacing||0)*i,L=this._settings.textIndent*i,$=this._settings.trFontFace;this.setFontProperties(),et($);const B=uR(this._context,$,y),V=oC(B,y)*i,W=this._settings.lineHeight!==null?this._settings.lineHeight*i:V,X=this._settings.maxHeight,ie=X!==null&&W>0?Math.floor(X/W):0,K=this._settings.maxLines,pe=ie>0&&K>0?Math.min(ie,K):Math.max(ie,K);let ue=s||2048/this.getPrecision(),q=ue-f;if(q<10&&(ue+=10-q,q=10),C||(C=q),this._settings.textOverflow&&!this._settings.wordWrap){let se;switch(this._settings.textOverflow){case"clip":se="";break;case"ellipsis":se=this._settings.overflowSuffix;break;default:se=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,C-L,se)}let A;if(this._settings.wordWrap)A=this.wrapText(this._settings.text,C,w,L);else{A={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const se=A.l.length;for(let re=0;re<se-1;re++)A.n.push(re)}let Y=A.l;if(pe&&Y.length>pe){const se=Y.slice(0,pe);let re=null;if(this._settings.overflowSuffix){const _e=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,Te=this.wrapText(se[se.length-1],C-_e,w,L);se[se.length-1]=`${Te.l[0]}${this._settings.overflowSuffix}`,re=[Te.l.length>1?Te.l[1]:""]}else re=[""];let oe;const Re=Y.length;let Ae=0;const Ie=A.n.length;for(oe=pe;oe<Re;oe++)re[Ae]+=`${re[Ae]?" ":""}${Y[oe]}`,oe+1<Ie&&A.n[oe+1]&&Ae++;r.remainingText=re.join(`
`),r.moreTextLines=!0,Y=se}else r.moreTextLines=!1,r.remainingText="";let le=0;const ge=[];for(let se=0;se<Y.length;se++){const re=this.measureText(Y[se],w)+(se===0?L:0);ge.push(re),le=Math.max(le,re)}r.lineWidths=ge,s||(ue=le+f+d,q=le);let de;return g?de=g:de=pS(this._settings.textBaseline,y,W,Y.length,x),x===null&&(x=y),r.w=ue,r.h=de,r.lines=Y,r.precision=i,ue||(ue=1),de||(de=1),(R||b)&&(ue=Math.min(ue,b-R)),(_||D)&&(de=Math.min(de,D-_)),r.width=ue,r.innerWidth=q,r.height=de,r.fontSize=y,r.cutSx=R,r.cutSy=_,r.cutEx=b,r.cutEy=D,r.lineHeight=W,r.defLineHeight=V,r.lineWidths=ge,r.offsetY=x,r.paddingLeft=f,r.paddingRight=d,r.letterSpacing=w,r.textIndent=L,r.metrics=B,r}draw(r,i){const f=this.getPrecision(),d=(i==null?void 0:i.lines)||r.lines,y=(i==null?void 0:i.lineWidths)||r.lineWidths,x=i?pS(this._settings.textBaseline,r.fontSize,r.lineHeight,i.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*f):r.height;this._canvas.width=Math.min(Math.ceil(r.width+this._settings.textRenderIssueMargin),dS),this._canvas.height=Math.min(Math.ceil(x),dS),this.setFontProperties(),r.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(r.cutSx||r.cutSy)&&this._context.translate(-r.cutSx,-r.cutSy);let s,g;const C=[],{metrics:R}=r,b=R?R.ascender*r.fontSize:r.fontSize,_=(R.ascender-R.descender)*r.fontSize;for(let w=0,L=d.length;w<L;w++)s=w===0?r.textIndent:0,g=w*r.lineHeight+b,this._settings.verticalAlign=="middle"?g+=(r.lineHeight-_)/2:this._settings.verticalAlign=="bottom"&&(g+=r.lineHeight-_),this._settings.textAlign==="right"?s+=r.innerWidth-y[w]:this._settings.textAlign==="center"&&(s+=(r.innerWidth-y[w])/2),s+=r.paddingLeft,C.push({text:d[w],x:s,y:g,w:y[w]});if(this._settings.highlight){const w=this._settings.highlightColor,L=this._settings.highlightHeight*f||r.fontSize*1.5,$=this._settings.highlightOffset*f,B=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*f:r.paddingLeft,V=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*f:r.paddingRight;this._context.fillStyle=O0(w);for(let W=0;W<C.length;W++){const X=C[W];this._context.fillRect(X.x-B,X.y-r.offsetY+$,X.w+V+B,L)}}let D=null;this._settings.shadow&&(D=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=O0(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*f,this._context.shadowOffsetY=this._settings.shadowOffsetY*f,this._context.shadowBlur=this._settings.shadowBlur*f),this._context.fillStyle=O0(this._settings.textColor);for(let w=0,L=C.length;w<L;w++){const $=C[w];if(r.letterSpacing===0)this._context.fillText($.text,$.x,$.y);else{const B=$.text.split("");let V=$.x;for(let W=0,X=B.length;W<X;W++)this._context.fillText(B[W],V,$.y),V+=this.measureText(B[W],r.letterSpacing)}}D&&(this._context.shadowColor=D[0],this._context.shadowOffsetX=D[1],this._context.shadowOffsetY=D[2],this._context.shadowBlur=D[3]),(r.cutSx||r.cutSy)&&this._context.translate(r.cutSx,r.cutSy)}wrapWord(r,i,f){const d=this._context.measureText(f).width,y=r.length,x=this._context.measureText(r).width;if(x<=i)return r;let s=Math.floor(i*y/x),g=this._context.measureText(r.substring(0,s)).width+d;if(g>i)for(;s>0&&(g=this._context.measureText(r.substring(0,s)).width+d,g>i);)s-=1;else for(;s<y;)if(g=this._context.measureText(r.substring(0,s)).width+d,g<i)s+=1;else{s-=1;break}return r.substring(0,s)+(i>=d?f:"")}wrapText(r,i,f,d=0){const y=/ |\u200B/g,x=r.split(/\r?\n/g);let s=[];const g=[];for(let C=0;C<x.length;C++){const R=[];let b="",_=i-d;const D=x[C].split(y),w=x[C].match(y)||[];for(let L=0;L<D.length;L++){const $=w[L-1]||"",B=D[L],V=this.measureText(B,f),W=hS($)?V:V+this.measureText($,f);L===0||W>_?(L>0&&(R.push(b),b=""),b+=B,_=i-V-(L===0?d:0)):(_-=W,b+=$+B)}R.push(b),b="",s=s.concat(R),C<x.length-1&&g.push(s.length)}return{l:s,n:g}}measureText(r,i=0){return i?r.split("").reduce((f,d)=>hS(d)?f:f+this._context.measureText(d).width+i,0):this._context.measureText(r).width}mergeDefaults(r){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...r}}}const gS=typeof self>"u"?globalThis:self;var US;const mS=((US=gS.document)==null?void 0:US.fonts)||gS.fonts;function cR(h){const{fontFamily:r,fontStyle:i,fontWeight:f,fontStretch:d,fontSize:y}=h;return[i,f,d,`${y}px`,r].join(" ")}class yS extends yg{constructor(i){super(i);O(this,"canvas");O(this,"context");O(this,"fontFamilies",{});O(this,"fontFamilyArray",[this.fontFamilies]);O(this,"type","canvas");O(this,"loadFont",i=>{const f=cR(i.props),d=this.stage.fontManager.resolveFontFace(this.fontFamilyArray,i.props,"canvas");if(et(d,`Could not resolve font face for ${f}`),i.fontInfo={fontFace:d,cssString:f,loaded:!1},!i.fontInfo.loaded){mS.load(f).then(this.onFontLoaded.bind(this,i,f)).catch(this.onFontLoadError.bind(this,i,f));return}});typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let f=this.canvas.getContext("2d",{willReadFrequently:!0});f||(this.canvas=document.createElement("canvas"),f=this.canvas.getContext("2d",{willReadFrequently:!0})),et(f),this.context=f,this.addFontFace(new Hc({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(i,f)=>{i.props.fontFamily=f,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontWeight:(i,f)=>{i.props.fontWeight=f,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStyle:(i,f)=>{i.props.fontStyle=f,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStretch:(i,f)=>{i.props.fontStretch=f,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontSize:(i,f)=>{i.props.fontSize=f,i.fontInfo=void 0,this.invalidateLayoutCache(i)},text:(i,f)=>{i.props.text=f,this.invalidateLayoutCache(i)},textAlign:(i,f)=>{i.props.textAlign=f,this.invalidateLayoutCache(i)},color:(i,f)=>{i.props.color=f,this.invalidateLayoutCache(i)},x:(i,f)=>{i.props.x=f},y:(i,f)=>{i.props.y=f},contain:(i,f)=>{i.props.contain=f,this.invalidateLayoutCache(i)},width:(i,f)=>{i.props.width=f,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,f)=>{i.props.height=f,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,f)=>{i.props.offsetY=f,this.invalidateLayoutCache(i)},scrollY:(i,f)=>{i.props.scrollY=f},letterSpacing:(i,f)=>{i.props.letterSpacing=f,this.invalidateLayoutCache(i)},lineHeight:(i,f)=>{i.props.lineHeight=f,this.invalidateLayoutCache(i)},maxLines:(i,f)=>{i.props.maxLines=f,this.invalidateLayoutCache(i)},textBaseline:(i,f)=>{i.props.textBaseline=f,this.invalidateLayoutCache(i)},verticalAlign:(i,f)=>{i.props.verticalAlign=f,this.invalidateLayoutCache(i)},overflowSuffix:(i,f)=>{i.props.overflowSuffix=f,this.invalidateLayoutCache(i)}}}canRenderFont(i){return!0}isFontFaceSupported(i){return i instanceof Hc}addFontFace(i){et(i instanceof Hc);const f=i.fontFamily;f!=="sans-serif"&&mS.add(i.fontFace);let d=this.fontFamilies[f];d||(d=new Set,this.fontFamilies[f]=d),d.add(i)}createState(i,f){return{node:f,props:i,status:"initialState",updateScheduled:!1,emitter:new vr,textureNode:void 0,lightning2TextRenderer:new fR(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(i){if(i.status==="initialState"&&this.setStatus(i,"loading"),i.status!=="loaded"){if(!i.fontInfo)return this.loadFont(i);i.fontInfo.loaded&&(i.renderInfo||(i.renderInfo=this.calculateRenderInfo(i),i.textH=i.renderInfo.lineHeight*i.renderInfo.lines.length,i.textW=i.renderInfo.width,this.renderSingleCanvasPage(i)))}}renderSingleCanvasPage(i){et(i.renderInfo);const f=i.node,d=this.stage.txManager.loadTexture("ImageTexture",{src:(function(y,x){return et(x),y.draw(x,{lines:x.lines,lineWidths:x.lineWidths}),this.canvas.width===0||this.canvas.height===0?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}).bind(this,i.lightning2TextRenderer,i.renderInfo)});if(i.textureNode)i.textureNode.texture=d;else{const y=this.stage.createNode({parent:f,texture:d,autosize:!0,alpha:KI(i.props.color)});i.textureNode=y}this.setStatus(i,"loaded")}calculateRenderInfo(i){var f;return i.lightning2TextRenderer.settings={text:i.props.text,textAlign:i.props.textAlign,fontFamily:i.props.fontFamily,trFontFace:(f=i.fontInfo)==null?void 0:f.fontFace,fontSize:i.props.fontSize,fontStyle:[i.props.fontStretch,i.props.fontStyle,i.props.fontWeight].join(" "),textColor:da(i.props.color),offsetY:i.props.offsetY,wordWrap:i.props.contain!=="none",wordWrapWidth:i.props.contain==="none"?void 0:i.props.width,letterSpacing:i.props.letterSpacing,lineHeight:i.props.lineHeight??null,maxLines:i.props.maxLines,maxHeight:i.props.contain==="both"?i.props.height-i.props.offsetY:null,textBaseline:i.props.textBaseline,verticalAlign:i.props.verticalAlign,overflowSuffix:i.props.overflowSuffix,w:i.props.contain!=="none"?i.props.width:void 0},i.renderInfo=i.lightning2TextRenderer.calculateRenderInfo(),i.renderInfo}renderQuads(){}destroyState(i){i.status!=="destroyed"&&(super.destroyState(i),i.textureNode&&(i.textureNode.destroy(),delete i.textureNode),delete i.renderInfo)}invalidateLayoutCache(i){i.renderInfo=void 0,this.setStatus(i,"loading"),this.scheduleUpdateState(i)}onFontLoaded(i,f){var d;f!==((d=i.fontInfo)==null?void 0:d.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,this.scheduleUpdateState(i))}onFontLoadError(i,f,d){var y;f!==((y=i.fontInfo)==null?void 0:y.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${i.fontInfo.cssString}'`,d),this.scheduleUpdateState(i))}}const hR={isWhite:!0,a:1,r:255,g:255,b:255};function F0(h){if(h===4294967295)return hR;const r=(h>>>24&255)/255,i=h>>>16&255&255,f=h>>>8&255&255,d=h&255&255;return{isWhite:!1,a:r,r:d,g:f,b:i}}function Yc({a:h,r,g:i,b:f}){return`rgba(${r},${i},${f},${h})`}class dR extends QS{constructor(){super(...arguments);O(this,"image");O(this,"tintCache")}load(){this.textureSource.state==="freed"&&(this.textureSource.setState("loading"),this.onLoadRequest().then(i=>{this.textureSource.setState("loaded",i),this.updateMemSize()}).catch(i=>{this.textureSource.setState("failed",i)}))}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0)}updateMemSize(){const i=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:f,height:d}=this.textureSource.dimensions;this.setTextureMemUse(f*d*i)}}hasImage(){return this.image!==void 0}getImage(i){var x;const f=this.image;if(et(f,"Attempt to get unloaded image texture"),i.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),f;const d=Yc(i);if(((x=this.tintCache)==null?void 0:x.key)===d)return this.tintCache.image;const y=this.tintTexture(f,d);return this.tintCache={key:d,image:y},this.updateMemSize(),y}tintTexture(i,f){const{width:d,height:y}=i,x=document.createElement("canvas");x.width=d,x.height=y;const s=x.getContext("2d");return s&&(s.fillStyle=f,s.globalCompositeOperation="copy",s.fillRect(0,0,d,y),s.globalCompositeOperation="multiply",s.drawImage(i,0,0,d,y,0,0,d,y),s.globalCompositeOperation="destination-in",s.drawImage(i,0,0,d,y,0,0,d,y)),x}async onLoadRequest(){const{data:i}=await this.textureSource.getTextureData();if(i instanceof ImageData){const f=document.createElement("canvas");f.width=i.width,f.height=i.height;const d=f.getContext("2d");return d&&d.putImageData(i,0,0),this.image=f,{width:i.width,height:i.height}}else if(typeof ImageBitmap<"u"&&i instanceof ImageBitmap)return this.image=i,{width:i.width,height:i.height};return{width:0,height:0}}}function pR(h){var r;return h.shader instanceof mg&&h.shader.shType===ZS?((r=h.shaderProps)==null?void 0:r.radius)??0:0}class gR extends JS{constructor(i){super(i);O(this,"context");O(this,"canvas");O(this,"pixelRatio");O(this,"clearColor");O(this,"renderToTextureActive",!1);O(this,"activeRttNode",null);O(this,"defShaderCtr");this.mode="canvas",this.shManager.renderer=this;const{canvas:f,pixelRatio:d,clearColor:y}=i;this.canvas=f,this.context=f.getContext("2d"),this.pixelRatio=d,this.clearColor=y?qI(y):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new mg("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const i=this.context;if(this.clearColor){const[f,d,y,x]=this.clearColor;i.fillStyle=`rgba(${f}, ${d}, ${y}, ${x/255})`,i.fillRect(0,0,this.canvas.width,this.canvas.height)}i.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(i){const f=this.context,{tx:d,ty:y,width:x,height:s,alpha:g,colorTl:C,colorTr:R,colorBr:b,ta:_,tb:D,tc:w,td:L,clippingRect:$}=i;let B=i.texture,V,W;if(B){if(B instanceof Zl&&(W=B.props,B=B.parentTexture),V=B.ctxTexture,B.state==="freed"){V.load();return}if(B.state!=="loaded"||!V.hasImage())return}const X=F0(C),ie=_!==1,K=$.width!==0&&$.height!==0,pe=C!==R||C!==b,ue=i.shader?pR(i):0;if((ie||K||ue)&&f.save(),K){const q=new Path2D,{x:A,y:Y,width:le,height:ge}=$;q.rect(A,Y,le,ge),f.clip(q)}if(ie){const q=this.pixelRatio;f.setTransform(_,w,D,L,d*q,y*q),f.scale(q,q),f.translate(-d,-y)}if(ue){const q=new Path2D;q.roundRect(d,y,x,s,ue),f.clip(q)}if(V){const q=V.getImage(X);f.globalAlpha=g,W?f.drawImage(q,W.x,W.y,W.width,W.height,d,y,x,s):f.drawImage(q,d,y,x,s),f.globalAlpha=1}else if(pe){let q=d,A=y,Y;C===R?(q=d,A=y+s,Y=F0(b)):(q=d+x,A=y,Y=F0(R));const le=f.createLinearGradient(d,y,q,A);le.addColorStop(0,Yc(X)),le.addColorStop(1,Yc(Y)),f.fillStyle=le,f.fillRect(d,y,x,s)}else f.fillStyle=Yc(X),f.fillRect(d,y,x,s);(ie||K||ue)&&f.restore()}createCtxTexture(i){return new dR(this.txMemManager,i)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(i){}renderToTexture(i){}getBufferInfo(){return null}}const Oc={alpha:h=>h===1?null:{prop:"opacity",value:`${h}`},x:h=>({prop:"left",value:`${h}px`}),y:h=>({prop:"top",value:`${h}px`}),width:h=>h===0?null:{prop:"width",value:`${h}px`},height:h=>h===0?null:{prop:"height",value:`${h}px`},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:h=>h===!1?null:{prop:"overflow",value:h?"hidden":"visible"},rotation:h=>h===0?null:{prop:"transform",value:`rotate(${h}rad)`},scale:h=>h===1?null:{prop:"transform",value:`scale(${h})`},scaleX:h=>h===1?null:{prop:"transform",value:`scaleX(${h})`},scaleY:h=>h===1?null:{prop:"transform",value:`scaleY(${h})`},color:h=>h===0?null:{prop:"color",value:rC(h)}},rC=h=>{const r=(h&255)/255,i=h>>8&255,f=h>>16&255;return`rgba(${h>>24&255},${f},${i},${r})`},vS={id:"test-id"};class mR{constructor(r,i){O(this,"root",null);O(this,"canvas",null);O(this,"height",1080);O(this,"width",1920);O(this,"scaleX",1);O(this,"scaleY",1);if(pg())return;if(!i)throw new Error("settings is required");this.height=Math.ceil(i.appHeight??1080/(i.deviceLogicalPixelRatio??1)),this.width=Math.ceil(i.appWidth??1920/(i.deviceLogicalPixelRatio??1)),this.scaleX=i.deviceLogicalPixelRatio??1,this.scaleY=i.deviceLogicalPixelRatio??1,this.canvas=r,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(r,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(r),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const r=this.canvas.getBoundingClientRect(),i=document.documentElement.scrollTop+r.top,f=document.documentElement.scrollLeft+r.left;this.root.id="root",this.root.style.left=`${f}px`,this.root.style.top=`${i}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(r,i){const f=document.createElement("div");f.style.position="absolute",f.id=r.toString();for(const d in i)this.updateNodeProperty(f,d,i[d]);return f}createNode(r){const i=this.createDiv(r.id,r.props);return i.node=r,r.div=i,r.on("inViewport",()=>{i.setAttribute("state","inViewport")}),r.on("inBounds",()=>{i.setAttribute("state","inBounds")}),r.on("outOfBounds",()=>{i.setAttribute("state","outOfBounds")}),this.createProxy(r,i)}createTextNode(r){const i=this.createDiv(r.id,r.props);return i.node=r,r.div=i,this.createProxy(r,i)}createProxy(r,i){return new Proxy(r,{set:(f,d,y)=>(this.updateNodeProperty(i,d,y),Reflect.set(f,d,y)),get:(f,d,y)=>(d==="destroy"&&this.destroyNode(f.id),d==="animate"?(x,s)=>{const g=f.animate(x,s);return new Proxy(g,{get:(C,R,b)=>(R==="start"&&this.animateNode(i,x,s),Reflect.get(C,R,b))})}:Reflect.get(f,d,y))})}destroyNode(r){const i=document.getElementById(r.toString());i==null||i.remove()}updateNodeProperty(r,i,f){var d;if(!(this.root===null||f===void 0||f===null)){if(i==="parent"){const y=f.id;if(y===1){this.root.appendChild(r);return}const x=document.getElementById(y.toString());x==null||x.appendChild(r);return}if(i==="text"){r.innerHTML=String(f),r.style.visibility="hidden";return}if(i==="src"&&f){r.setAttribute("data-src",String(f));return}if(Oc[i]){const y=(d=Oc[i])==null?void 0:d.call(Oc,f);if(y===null)return;if(typeof y=="string"){r.style.setProperty(y,String(f));return}typeof y=="object"&&r.style.setProperty(y.prop,y.value);return}if(vS[i]){const y=vS[i];if(!y)return;r.setAttribute(String(y),String(f));return}if(i==="data"){for(const y in f){const x=f[y];x===void 0?r.removeAttribute(`data-${y}`):r.setAttribute(`data-${y}`,String(x))}return}}}animateNode(r,i,f){const{duration:d=1e3,delay:y=0}=f,{x,y:s,width:g,height:C,alpha:R=1,rotation:b=0,scale:_=1,color:D}=i;function w(){setTimeout(()=>{r.style.top=`${s}px`,r.style.left=`${x}px`,r.style.width=`${g}px`,r.style.height=`${C}px`,r.style.opacity=`${R}`,r.style.rotate=`${b}rad`,r.style.scale=`${_}`,r.style.color=rC(D)},d)}setTimeout(w,y)}}const sC=50,xS={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},yR=()=>{const h=uo.stage;Hi.get("fonts",[]).forEach(r=>{r.type==="sdf"||r.type==="msdf"?(!r.png&&r.file&&(r.png=r.file.replace(/\.[^.]+$/,`.${r.type}.png`)),!r.json&&r.file&&(r.json=r.file.replace(/\.[^.]+$/,`.${r.type}.json`)),h.fontManager.addFontFace(new ng(r.type,{fontFamily:r.family,descriptors:{},atlasUrl:r.png,atlasDataUrl:r.json,stage:h,metrics:r.metrics}))):r.type==="web"&&h.fontManager.addFontFace(new Hc({fontFamily:r.family,fontUrl:r.file,descriptors:{},metrics:r.metrics}))})},vR=()=>{const h=uo.stage;Hi.get("shaders",[]).forEach(r=>{h.shManager.registerShaderType(r.name,r.type)}),Hi.get("effects",[]).forEach(r=>{h.shManager.registerShaderType(r.name,r.type)})};let uo={};const xR=h=>{const r="renderMode"in h?h.renderMode:"webgl";if(r==="webgl")return xg;if(r==="canvas")return gR},wR=h=>{const r="renderMode"in h?h.renderMode:"webgl";if(r==="webgl")return[lR,yS];if(r==="canvas")return[yS]},SR=(h,r,i={})=>{uo=new OM({appWidth:i.w||1920,appHeight:i.h||1080,fpsUpdateInterval:i.fpsInterval||1e3,deviceLogicalPixelRatio:i.pixelRatio||xS[i.screenResolution]||xS[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in i?i.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:i.canvasColor&&ua.normalize(i.canvasColor)||0,inspector:i.inspector===!0?mR:void 0,boundsMargin:i.viewportMargin||0,txMemByteThreshold:"gpuMemoryLimit"in i?i.gpuMemoryLimit*1024*1024:200*1024*1024,renderEngine:xR(i),fontEngines:wR(i)},r);const f=()=>{let d=h();d.quit=()=>{rn.info("Closing App"),d.destroy(),d=null,uo=null}};return vR(),yR(),f(),uo},CR=function(h){let r=0;const i=h.direction==="vertical"?"y":"x",f=h.direction==="vertical"?"height":"width",d=h.direction==="vertical"?"width":"height",y=this.children,x=y.length;let s=0;const g=h.gap||0;for(let C=0;C<x;C++){const R=y[C];R[i]=r,f==="width"?r+=R.width+(R.width!==("text"in R?1:0)?g:0):f==="height"&&(r+="text"in R?R.width>1?R.height+g:0:R.height!==0?R.height+g:0),s=Math.max(s,R[d])}this[f]=r-g,this[d]=s},wS=h=>h!==null&&typeof h=="object"&&"transition"in h,Dl=h=>typeof h=="string"&&h.startsWith("{")&&h.endsWith("}"),Nl=h=>JSON.parse(h.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),Js=function(h,r){return typeof h!="string"?h:h.indexOf("%")===h.length-1?this.element.config.parent&&(this.element.config.parent.node[r]||0)*(parseFloat(h)/100)||0:h},rg=h=>{if(typeof h!="object"||h===null)return h;if(h.constructor===Object){if("value"in h)return h.value;if("transition"in h)return rg(h.transition)}return h},TR={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};let sg=null;const ER={set parent(h){this.props.parent=h==="root"?uo.root:h.node},set rotation(h){this.props.rotation=h*(Math.PI/180)},set w(h){this.props.width=Js.call(this,h,"width")},set width(h){this.props.width=Js.call(this,h,"width")},set h(h){this.props.height=Js.call(this,h,"height")},set height(h){this.props.height=Js.call(this,h,"height")},set x(h){this.props.x=Js.call(this,h,"width")},set y(h){this.props.y=Js.call(this,h,"height")},set z(h){this.props.zIndex=h},set zIndex(h){this.props.zIndex=h},set color(h){typeof h=="string"&&h.startsWith("{")===!1?this.props.color=ua.normalize(h):(typeof h=="object"||Dl(h)===!0&&(h=Nl(h)))&&(this.props.color=0,Object.entries(h).forEach(r=>{this.props[TR[r[0]]]=ua.normalize(r[1])}))},set src(h){this.props.src=h,this.raw.color===void 0&&(this.props.color=4294967295)},set texture(h){this.props.texture=h,this.raw.color===void 0&&h==null?this.props.color=0:this.raw.color===void 0&&(this.props.color=4294967295)},set fit(h){const r={};if(h==="cover"||h==="contain"){this.props.textureOptions={resizeMode:{type:h}};return}(typeof h=="object"||Dl(h)===!0&&(h=Nl(h)))&&(r.type=h.type||"cover",typeof h.position=="number"&&(r.clipY=r.clipX=h.position),typeof h.position=="object"&&(r.clipX="x"in h.position?h.position.x:null,r.clipY="y"in h.position?h.position.y:null),this.props.textureOptions={resizeMode:r})},set rtt(h){this.props.rtt=h,h===!0&&this.raw.color===void 0&&(this.props.color=4294967295)},set mount(h){typeof h=="object"||Dl(h)===!0&&(h=Nl(h))?("x"in h&&(this.props.mountX=h.x),"y"in h&&(this.props.mountY=h.y)):(this.props.mountX=h,this.props.mountY=h)},set pivot(h){typeof h=="object"||Dl(h)===!0&&(h=Nl(h))?("x"in h&&(this.props.pivotX=h.x),"y"in h&&(this.props.pivotY=h.y)):(this.props.pivotX=h,this.props.pivotY=h)},set scale(h){typeof h=="object"||Dl(h)===!0&&(h=Nl(h))?("x"in h&&(this.props.scaleX=h.x),"y"in h&&(this.props.scaleY=h.y)):this.props.scale=h},set show(h){this.props.alpha=h?1:0},set alpha(h){this.props.alpha=h},set shader(h){h!==null?this.props.shader=uo.createShader(h.type,h.props):this.props.shader=uo.createShader("DefaultShader")},set effects(h){for(let r=0;r<h.length;r++)h[r].props&&h[r].props.color&&(h[r].props.color=ua.normalize(h[r].props.color));this.props.shader=uo.createShader("DynamicShader",{effects:h})},set clipping(h){this.props.clipping=h},set overflow(h){this.props.clipping=!h},set font(h){this.props.fontFamily=h},set size(h){this.props.fontSize=h},set wordwrap(h){this.props.width=h,this.props.contain="width"},set maxheight(h){this.props.height=h,this.props.contain="both"},set contain(h){this.props.contain=h},set maxlines(h){this.props.maxLines=h},set textoverflow(h){this.props.overflowSuffix=h===!1?" ":h===!0?void 0:h},set letterspacing(h){this.props.letterSpacing=h||1},set lineheight(h){this.props.lineHeight=h},set align(h){this.props.textAlign=h},set content(h){this.props.text=""+h}},AR={populate(h){const r=h;r.node=this.config.node,r[ye.isSlot]===!0&&(this[ye.isSlot]=!0),this.props.element=this,this.props.parent=r.parent||this.config.parent,delete r.parent,this.props.raw=h;const i=Object.keys(r),f=i.length;for(let d=0;d<f;d++){const y=i[d],x=r[y];x!==void 0&&(this.props[y]=rg(x))}this.props.props.color===void 0&&!("__textnode"in r)&&(this.props.props.color=0),this.node=r.__textnode?uo.createTextNode({...sg,...this.props.props}):uo.createNode(this.props.props),r["@loaded"]!==void 0&&typeof r["@loaded"]=="function"&&this.node.on("loaded",(d,{type:y,dimensions:x})=>{r["@loaded"]({w:x.width,h:x.height,type:y},this)}),r["@error"]!==void 0&&typeof r["@error"]=="function"&&this.node.on("failed",(d,y)=>{r["@error"](y,this)}),r.__layout===!0&&(this.triggerLayout=CR.bind(this.node)),this.config.parent.props!==void 0&&this.config.parent.props.__layout===!0&&(this.config.parent.triggerLayout(this.config.parent.props),this.node.on("loaded",()=>{this.config.parent.triggerLayout(this.config.parent.props)}))},set(h,r){if(r===void 0||this.props.raw[h]===r)return;this.props.raw[h]=r,this.props.props={},this.props[h]=rg(r);const i=Object.keys(this.props.props);if(i.length===1){if(wS(r)===!0)return this.animate(i[0],this.props.props[i[0]],r.transition);this.node[i[0]]=this.props.props[i[0]]}else for(let f=0;f<i.length;f++){if(wS(r)===!0)return this.animate(i[f],this.props.props[i[f]],r.transition);this.node[i[f]]=this.props.props[i[f]]}this.config.parent.props&&this.config.parent.props.__layout===!0&&this.config.parent.triggerLayout(this.config.parent.props)},animate(h,r,i){if(this.scheduledTransitions[h]!==void 0&&this.scheduledTransitions[h].f.state==="scheduled"&&this.scheduledTransitions[h].f.stop(),this.node[h]===r)return;const f={};f[h]=r;const d=this.node.animate(f,{duration:typeof i=="object"&&"duration"in i?i.duration:300,easing:typeof i=="object"&&"easing"in i?i.easing:"ease",delay:typeof i=="object"&&"delay"in i?i.delay:0}),y=this.node[h];if(this.scheduledTransitions[h]={v:f[h],f:d},i.start!==void 0&&typeof i.start=="function"&&d.once("animating",()=>{i.start.call(this.component,this,h,y)}),this.config.parent.props&&this.config.parent.props.__layout===!0&&d.on("tick",()=>{this.config.parent.triggerLayout(this.config.parent.props)}),i.progress!==void 0&&typeof i.progress=="function"){let x=0;d.on("tick",(s,{progress:g})=>{i.progress.call(this.component,this,h,g,x),x=g})}d.once("stopped",()=>{this.scheduledTransitions[h]=void 0,i.end&&typeof i.end=="function"&&i.end.call(this.component,this,h,this.node[h])}),d.start()},destroy(){rn.debug("Deleting  Node",this.nodeId),this.node.destroy()},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){return this.component[ye.getChildren]().filter(h=>h.parent===(this[ye.isSlot]?this.node.children[0]:this.node))}},bR=(h,r)=>(sg===null&&(sg={fontSize:32,fontFamily:Hi.get("defaultFont","sans-serif")}),Object.assign(Object.create(AR),{props:Object.assign(Object.create(ER),{props:{}}),scheduledTransitions:{},config:h,component:r})),SS={Element:bR,Launch:SR};let Ql={};const wg={},kR=(h,r,i)=>{Hi.set(i),II(),wg.element=SS.Element,Ql=SS.Launch(h,r,i)},IR={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},gr=window.speechSynthesis,MR=()=>(window.navigator||{}).userAgent||"",CS=()=>/android/i.test(MR());let aC=!1,rh=null;const Sg=()=>rh&&clearTimeout(rh),ag=h=>{if(!h||rh)return Sg();gr.pause(),gr.resume(),rh=setTimeout(()=>{ag(h)},5e3)},aa={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},RR=()=>{aa.voice=gr.getVoices()[0],aC=!0},_R=(h,r)=>{const i=new SpeechSynthesisUtterance(r.value);i.lang=r.lang||aa.lang,i.pitch=r.pitch||aa.pitch,i.rate=r.rate||aa.rate,i.voice=r.voice||aa.voice,i.volume=r.volume||aa.volume,i.onstart=()=>{CS()||ag(i),h.onstart()},i.onresume=()=>{CS()||ag(i),h.onresume()},i.onpause=()=>{h.onpause()},i.onend=()=>{h.onend()},i.onerror=()=>{Sg(),h.onerror()},gr.speak(i)},qc={speak(h){aC||RR(),this.cancel(),_R(this,h)},resume(){gr.resume()},pause(){gr.pause()},cancel(){gr.cancel(),Sg()},getVoices(){return gr.getVoices()},onend(){},onerror(){},onstart(){},onresume(){},onpause(){}};let TS;const Cg=(h,r="off")=>{clearTimeout(TS),qc.cancel(),r==="assertive"?qc.speak({value:h}):TS=setTimeout(()=>{qc.speak({value:h})},400)},LR=h=>Cg(h,"polite"),PR=h=>Cg(h,"assertive"),DR=()=>{qc.cancel()},lC={speak:Cg,polite:LR,assertive:PR,stop:DR};let sh,ah=!1;const uC=new WeakMap,fC=[];let cC={},hC={},lg=!1,dC;const NR=()=>(document.location.hash||"/").replace(/^#/,""),ES=h=>h.replace(/^\/+|\/+$/g,"").toLowerCase(),OR=h=>typeof h=="object"&&h!==null,UR=h=>typeof h=="string",BR=(h,r=[])=>{const i=h;h=ES(h);let f=!1,d=0;for(;!f&&d<r.length;){const y=r[d];if(y.path=ES(y.path),y.path===h)y.params={},f=y;else if(y.path.indexOf(":")>-1){const x=[...y.path.matchAll(/:([^\s/]+)/gi)];let s=y.path;x.reverse().forEach(C=>{s=s.substring(0,C.index)+"([^\\s/]+)"+s.substring(C.index+C[0].length)});const g=i.match(new RegExp(`${s}`,"i"));g&&(y.params=x.reverse().reduce((C,R,b)=>(C[R[1]]=g[b+1],C),{}),f=y)}else if(y.path.endsWith("*")){const x=new RegExp(y.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),s=h.match(x);s&&(s[1]&&(y.params={path:s[1]}),f=y)}d++}return f&&(f.options={...f.options,...cC},f.data||(f.data={}),sh=f),f},jR=async function(){if(ah=!0,this.parent[ye.routes]){const h=sh,r=NR();let i=BR(r,this.parent[ye.routes]),f;if(i){if(i.hooks&&i.hooks.before&&(f=await i.hooks.before(i,h),UR(f))){sh=h,dh(f);return}i=OR(f)?f:i,lg===!1&&h&&h.options.inHistory===!0&&fC.push(h),"transition"in i||(i.transition=IR),typeof i.transition=="function"&&(i.transition=i.transition(h,i));let d,{view:y,focus:x}=uC.get(i)||{};if(y)d=y[ye.holder];else{d=wg.element({parent:this[ye.children][0]}),d.populate({}),d.set("w","100%"),d.set("h","100%");const g={...this[ye.props],...i.params,...hC,...i.data};y=await i.component({props:g},d,this),y[Symbol.toStringTag]==="Module"&&(y.default&&typeof y.default=="function"?y=y.default({props:g},d,this):rn.error("Dynamic import doesn't have a default export or default is not a function")),typeof y=="function"&&(y=y({props:g},d,this))}if(this[ye.children].push(y),dC=mr.get(),x?mr.set(x):mr.set(y),i.transition.before)if(Array.isArray(i.transition.before))for(let g=0;g<i.transition.before.length;g++)d.set(i.transition.before[g].prop,i.transition.before[g].value);else d.set(i.transition.before.prop,i.transition.before.value);let s=!1;if(h){s=!0;const g=this[ye.children].splice(1,1).pop();g&&FR(h,g,i.transition.out)}if(i.transition.in)if(Array.isArray(i.transition.in))for(let g=0;g<i.transition.in.length;g++)g===i.transition.length-1?await ha(d,i.transition.in[g],s):ha(d,i.transition.in[g],s);else await ha(d,i.transition.in,s);i.announce&&(typeof i.announce=="string"&&(i.announce={message:i.announce}),lC.speak(i.announce.message,i.announce.politeness)),this.activeView=this[ye.children][this[ye.children].length-1]}else rn.error(`Route ${r} not found`)}lg=!1,ah=!1},FR=async(h,r,i)=>{if(i)if(Array.isArray(i))for(let f=0;f<i.length;f++)f===i.length-1?await ha(r[ye.holder],i[f]):ha(r[ye.holder],i[f]);else await ha(r[ye.holder],i);h.options&&h.options.keepAlive===!0?uC.set(h,{view:r,focus:dC}):(r.destroy(),r=null)},ha=(h,r,i=!0)=>new Promise(f=>{if(i){const d=r.end;r.end=d?(...y)=>{d(...y),f()}:f,h.set(r.prop,{transition:r})}else h.set(r.prop,r.value),f()}),dh=(h,r={},i={})=>{hC=r,cC=i,window.location.hash=`#${h}`},pC=()=>{const h=fC.pop();if(h){lg=!0;let r=h.path;return r.indexOf(":")>-1&&Object.keys(h.params).forEach(i=>{r=r.replace(`:${i}`,h.params[i])}),dh(r),!0}else return!1},$0={navigate:jR,to:dh,back:pC};let cr=null,Uc=[],AS;const ug=new Map,mr={_hold:!1,set hold(h){this._hold=h},get hold(){return this._hold},get(){return cr},set(h,r){clearTimeout(AS),cr&&cr!==h.parent&&cr.unfocus(),Uc.reverse().forEach(i=>i.unfocus()),h!==cr&&(AS=setTimeout(()=>{cr=h,cr.lifecycle.state="focus",r instanceof KeyboardEvent?document.dispatchEvent(new KeyboardEvent("keydown",r)):Uc=[]},this.hold?Hi.get("holdTimeout",sC):0))},input(h,r){if(ah===!0)return;Uc=gC([cr],h);const i=Uc.shift();if(i){let f;i[ye.inputEvents][h]?f=i[ye.inputEvents][h].call(i,r):i[ye.inputEvents].any&&(f=i[ye.inputEvents].any.call(i,r)),f!==void 0&&ug.set(r.code,f)}}},gC=(h,r)=>h[0][ye.inputEvents]&&(typeof h[0][ye.inputEvents][r]=="function"||typeof h[0][ye.inputEvents].any=="function")?h:h[0].parent?(h.unshift(h[0].parent),gC(h,r)):[],Ol=new Map,Ul=new Map,fg={registerListener(h,r,i,f=0){let d=Ol.get(r);d===void 0&&(d=new Map,Ol.set(r,d));let y=d.get(h);y===void 0&&(y=new Set,d.set(h,y)),y.add({cb:i,priority:f}),Ul.delete(r)},executeListeners(h,r){const i=Ol.get(h);if(i===void 0||i.size===0)return!0;if(Ul.has(h)===!1){const d=[];for(const[y,x]of i)for(const s of x)d.push({...s,component:y});d.sort((y,x)=>x.priority-y.priority),Ul.set(h,d)}const f=Ul.get(h);for(let d=0;d<f.length;d++){const{cb:y,component:x}=f[d];if(y.call(x,r)===!1)return!1}return!0},removeListeners(h){for(const[r,i]of Ol)i.has(h)&&(i.delete(h),Ul.delete(r),i.size===0&&Ol.delete(r))}},$R={focus:{value:function(h){return rn.warn("this.focus is deprecated, use this.$focus instead"),this.$focus(h)},writable:!1,enumerable:!0,configurable:!1},$focus:{value:function(h){this[ye.state].hasFocus=!0,mr.set(this,h)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[ye.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.lifecycle.state="destroy",this.$clearTimeouts(),this.$clearIntervals(),fg.removeListeners(this),mC(this[ye.children]),ZM(this[ye.effects]),rn.debug(`Destroyed component ${this.componentId}`)},writable:!1,enumerable:!0,configurable:!1},select:{value:function(h){return rn.warn("this.select is deprecated, use this.$select instead"),this.$select(h)},writable:!1,enumerable:!0,configurable:!1},$select:{value:function(h){let r=null;return this[ye.children].forEach(i=>{Array.isArray(i)?i.forEach(f=>{f.ref===h&&(r=f)}):Object.getPrototypeOf(i)===Object.prototype?Object.keys(i).forEach(f=>{i[f].ref===h&&(r=i[f])}):i.ref===h&&(r=i)}),r},writable:!1,enumerable:!0,configurable:!1},trigger:{value:function(h){return rn.warn("this.trigger is deprecated, use this.$trigger instead"),this.$trigger(h)},writable:!1,enumerable:!0,configurable:!1},$trigger:{value:function(h){let r=this[ye.originalState];if(h.indexOf(".")>-1){const i=h.split(".");h=i.pop(i);for(let f=0;f<i.length;f++)r=r[i[f]]}ca(r,h,!0)},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(h,r){return{type:h,props:r}},writable:!1,enumerable:!0,configurable:!1}},mC=function(h){for(let r=0;r<h.length;r++){if(!h[r])return;h[r].destroy&&typeof h[r].destroy=="function"?h[r].destroy():Object.getPrototypeOf(h[r])===Object.prototype&&mC(Object.values(h[r])),h[r]=null}h.length=0},zR={$setTimeout:{value:function(h,r,...i){const f=setTimeout(()=>{this[ye.timeouts]=this[ye.timeouts].filter(d=>d!==f),h.apply(null,i)},r,i);return this[ye.timeouts].push(f),f},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(h){this[ye.timeouts].indexOf(h)>-1&&(this[ye.timeouts]=this[ye.timeouts].filter(r=>r!==h),clearTimeout(h))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(let h=0;h<this[ye.timeouts].length;h++)clearTimeout(this[ye.timeouts][h]);this[ye.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(h,r,...i){const f=setInterval(()=>h.apply(null,i),r,i);return this[ye.intervals].push(f),f},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(h){this[ye.intervals].indexOf(h)>-1&&(this[ye.intervals]=this[ye.intervals].filter(r=>r!==h),clearInterval(h))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(let h=0;h<this[ye.intervals].length;h++)clearInterval(this[ye.intervals][h]);this[ye.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},VR={$emit:{value:function(h,r){return fg.executeListeners(h,r)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(h,r,i=0){fg.registerListener(this,h,r,i)},writable:!1,enumerable:!0,configurable:!1}},HR={$router:{value:{to:dh,back:pC,get currentRoute(){return sh},get routes(){return this[ye.routes]},get navigating(){return ah}},writable:!1,enumerable:!0,configurable:!1}},GR={$announcer:{value:lC,writable:!1,enumerable:!0,configurable:!1}},XR={[ye.renderer]:{value:()=>Ql,writable:!1,enumerable:!0,configurable:!1},[ye.getChildren]:{value(){const h=this.rootParent||this.parent;return(this[ye.children]||[]).concat(h&&h[ye.getChildren]().map(r=>Object.getPrototypeOf(r)===Object.prototype?Object.values(r).map(i=>(i.forComponent=i.config&&i.config.parent.component,i)):r).flat().filter(r=>{if(r&&r.component)return r.component&&r.component.componentId===this.componentId||r.forComponent&&r.forComponent.componentId===this.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}},Bl=Object.defineProperties({[ye.launched]:!1},{...$R,...zR,...VR,...HR,...GR,...XR}),WR={cast:h=>h,required:!1},YR=(h,r=[])=>{r.indexOf("ref")===-1&&r.push("ref"),h[ye.propKeys]=[];const i=r.length;for(let f=0;f<i;f++){const d={...WR,...typeof r[f]=="object"?r[f]:{key:r[f]}};h[ye.propKeys].push(d.key),Object.defineProperty(h,d.key,{get(){const y=d.cast(this[ye.props]!==void 0&&d.key in this[ye.props]?this[ye.props][d.key]:"default"in d?d.default:void 0);return d.required===!0&&y===void 0&&rn.warn(`${d.key} is required`),y},set(y){rn.warn(`Warning! Avoid mutating props directly (${d.key})`),this[ye.props][d.key]=y}})}},qR=(h,r)=>{h[ye.methodKeys]=[];for(let i in r)h[ye.propKeys]&&h[ye.propKeys].indexOf(i)>-1?rn.error(`${i} already exists as a prop`):(typeof r[i]!="function"&&rn.warn(`${i} is not a function`),h[ye.methodKeys].push(i),h[i]=r[i])},KR=(h,r=()=>{})=>{Object.defineProperty(h,ye.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1});const i=Object.keys(r.apply(h)||{});i.push(["hasFocus"]);const f=i.length;for(let d=0;d<f;d++){const y=i[d];h[ye.propKeys]!==void 0&&h[ye.propKeys].indexOf(y)>-1&&rn.error(`State ${y} already exists as a prop`),h[ye.methodKeys]!==void 0&&h[ye.methodKeys].indexOf(y)>-1&&rn.error(`State ${y} already exists as a method`),h[ye.stateKeys].push(y),Object.defineProperty(h,y,{get(){return this[ye.state][y]},set(x){this[ye.state][y]=x}})}},ZR=(h,r)=>{h[ye.computedKeys]=[];for(let i in r)h[ye.stateKeys]&&h[ye.stateKeys].indexOf(i)>-1?rn.error(`${i} already exists as a state variable`):h[ye.propKeys]&&h[ye.propKeys].indexOf(i)>-1?rn.error(`${i} already exists as a prop`):h[ye.methodKeys]&&h[ye.methodKeys].indexOf(i)>-1?rn.error(`${i} already exists as a method`):(typeof r[i]!="function"&&rn.warn(`${i} is not a function`),h[ye.computedKeys].push(i),Object.defineProperty(h,i,{get(){return r[i].apply(this)}}))},QR=(h,r)=>{h[ye.inputEvents]=[],Object.keys(r).forEach(i=>{typeof r[i]!="function"&&rn.warn(`${r[i]} is not a function`),h[ye.inputEvents][i]=r[i]})},JR=(h,r)=>{h[ye.routes]=[],Object.keys(r).forEach(i=>{h[ye.routes][i]={...r[i],options:{inHistory:!0,...r[i].options}}})},e_=(h,r)=>{h[ye.watchKeys]=[],h[ye.watchers]={};for(let i in r)typeof r[i]!="function"&&console.warn(`${i} is not a function`),h[ye.watchKeys].push(i),h[ye.watchers][i]=function(f,d){r[i].call(this,f,d)}};let t_=0;function n_(h,r){return h[ye.identifier]=++t_,h[ye.effects]=[],zI(r.hooks,h[ye.identifier]),YR(h,r.props),r.methods&&qR(h,r.methods),KR(h,r.state),r.computed&&ZR(h,r.computed),r.watch&&e_(h,r.watch),r.routes&&JR(h,r.routes),r.input&&QR(h,r.input),h}const i_=()=>ga("Circle",{code:{render:function(r,i,f,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.color=i.color,g.w=i.size,g.h=i.size,g.effects=[i.shader("radius",{radius:i.radius})],s[0].populate(g),s},effects:[function(r,i,f,d,y,x){i[0].set("color",r.color)},function(r,i,f,d,y,x){i[0].set("w",r.size)},function(r,i,f,d,y,x){i[0].set("h",r.size)},function(r,i,f,d,y,x){i[0].set("effects",[r.shader("radius",{radius:r.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let z0;const o_=()=>ga("RouterView",{code:{render:function(r,i,f,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.w=r.node.width*(100/100),g.height=r.node.height*(100/100),s[0].populate(g),s},effects:[],context:{}},state(){return{activeView:null}},hooks:{ready(){z0=()=>$0.navigate.apply(this),$0.navigate.apply(this),window.addEventListener("hashchange",z0)},destroy(){window.removeEventListener("hashchange",z0,!1)},focus(){this.activeView&&this.activeView.$focus()}},input:{back(){$0.back()}}}),r_=()=>ga("Sprite",{code:{render:function(r,i,f,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.w=r.node.width*(100/100),g.h=r.node.height*(100/100),g.texture=i.texture,g.color=i.color,s[0].populate(g),s},effects:[function(r,i,f,d,y,x){i[0].set("texture",r.texture)},function(r,i,f,d,y,x){i[0].set("color",r.color)}],context:{}},props:["image","map","frame","color"],state(){return{spriteTexture:!1}},computed:{texture(){const h="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(this.spriteTexture&&h)return this[ye.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:h.x,y:h.y,width:h.w,height:h.h})}},hooks:{ready(){this.spriteTexture=this[ye.renderer]().createTexture("ImageTexture",{src:this.image})}}}),s_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",a_=()=>ga("FPScounter",{code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R),r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.y=15,b.x=20,s[1].populate(b),r=s[1];const _={};s[2]=this.element({parent:r||"root"},i),s[2].populate(_);const D=f.components&&f.components.Sprite||d.Sprite;r=s[2];const w={};s[3]=this.element({parent:r||"root"},i),w.image=i.image,w.w=43,w.h=25,w.map=i.sprite,w.frame="fps";const L=[];if(typeof D<"u")for(let gt in D.config.props)delete w[D.config.props[gt]],L.push(D.config.props[gt]);s[3].populate(w),r=s[3];const $={};$.image=i.image,$.w=43,$.h=25,$.map=i.sprite,$.frame="fps",g=$.is||"Sprite";let B;if(typeof g=="string"){if(B=f.components&&f.components[g]||d[g],!B)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(B=g);s[4]=B.call(null,{props:$},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0],r=s[2];const V={};s[5]=this.element({parent:r||"root"},i),V.x=58,V.y=2,s[5].populate(V);const W=f.components&&f.components.Sprite||d.Sprite;r=s[5];const X={};s[6]=this.element({parent:r||"root"},i),X.image=i.image,X.x=0,X.h=20,X.w=20,X.map=i.sprite,X.frame=i.fps[0];const ie=[];if(typeof W<"u")for(let gt in W.config.props)delete X[W.config.props[gt]],ie.push(W.config.props[gt]);s[6].populate(X),r=s[6];const K={};K.image=i.image,K.x=0,K.h=20,K.w=20,K.map=i.sprite,C=i.fps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),K.frame=C,g=K.is||"Sprite";let pe;if(typeof g=="string"){if(pe=f.components&&f.components[g]||d[g],!pe)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(pe=g);s[7]=pe.call(null,{props:K},s[6],i),s[7][Symbol.for("slots")][0]?(r=s[7][Symbol.for("slots")][0],i=s[7]):r=s[7][Symbol.for("children")][0];const ue=f.components&&f.components.Sprite||d.Sprite;r=s[5];const q={};s[8]=this.element({parent:r||"root"},i),q.image=i.image,q.x=18,q.h=20,q.w=20,q.map=i.sprite,q.frame=i.fps[1];const A=[];if(typeof ue<"u")for(let gt in ue.config.props)delete q[ue.config.props[gt]],A.push(ue.config.props[gt]);s[8].populate(q),r=s[8];const Y={};Y.image=i.image,Y.x=18,Y.h=20,Y.w=20,Y.map=i.sprite,C=i.fps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),Y.frame=C,g=Y.is||"Sprite";let le;if(typeof g=="string"){if(le=f.components&&f.components[g]||d[g],!le)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(le=g);s[9]=le.call(null,{props:Y},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],i=s[9]):r=s[9][Symbol.for("children")][0];const ge=f.components&&f.components.Sprite||d.Sprite;r=s[5];const de={};s[10]=this.element({parent:r||"root"},i),de.image=i.image,de.x=36,de.h=20,de.w=20,de.map=i.sprite,de.frame=i.fps[2];const se=[];if(typeof ge<"u")for(let gt in ge.config.props)delete de[ge.config.props[gt]],se.push(ge.config.props[gt]);s[10].populate(de),r=s[10];const re={};re.image=i.image,re.x=36,re.h=20,re.w=20,re.map=i.sprite,C=i.fps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),re.frame=C,g=re.is||"Sprite";let oe;if(typeof g=="string"){if(oe=f.components&&f.components[g]||d[g],!oe)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(oe=g);s[11]=oe.call(null,{props:re},s[10],i),s[11][Symbol.for("slots")][0]?(r=s[11][Symbol.for("slots")][0],i=s[11]):r=s[11][Symbol.for("children")][0],r=s[1];const Re={};s[12]=this.element({parent:r||"root"},i),Re.x=150,s[12].populate(Re);const Ae=f.components&&f.components.Sprite||d.Sprite;r=s[12];const Ie={};s[13]=this.element({parent:r||"root"},i),Ie.image=i.image,Ie.y=2,Ie.w=48,Ie.h=25,Ie.map=i.sprite,Ie.frame="avg";const _e=[];if(typeof Ae<"u")for(let gt in Ae.config.props)delete Ie[Ae.config.props[gt]],_e.push(Ae.config.props[gt]);s[13].populate(Ie),r=s[13];const Te={};Te.image=i.image,Te.y=2,Te.w=48,Te.h=25,Te.map=i.sprite,Te.frame="avg",g=Te.is||"Sprite";let je;if(typeof g=="string"){if(je=f.components&&f.components[g]||d[g],!je)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(je=g);s[14]=je.call(null,{props:Te},s[13],i),s[14][Symbol.for("slots")][0]?(r=s[14][Symbol.for("slots")][0],i=s[14]):r=s[14][Symbol.for("children")][0],r=s[12];const F={};s[15]=this.element({parent:r||"root"},i),F.x=63,F.y=2,s[15].populate(F);const Ue=f.components&&f.components.Sprite||d.Sprite;r=s[15];const He={};s[16]=this.element({parent:r||"root"},i),He.image=i.image,He.x=0,He.h=20,He.w=20,He.map=i.sprite,He.frame=i.avgFps[0];const Ge=[];if(typeof Ue<"u")for(let gt in Ue.config.props)delete He[Ue.config.props[gt]],Ge.push(Ue.config.props[gt]);s[16].populate(He),r=s[16];const Ce={};Ce.image=i.image,Ce.x=0,Ce.h=20,Ce.w=20,Ce.map=i.sprite,C=i.avgFps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),Ce.frame=C,g=Ce.is||"Sprite";let H;if(typeof g=="string"){if(H=f.components&&f.components[g]||d[g],!H)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(H=g);s[17]=H.call(null,{props:Ce},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],i=s[17]):r=s[17][Symbol.for("children")][0];const Ee=f.components&&f.components.Sprite||d.Sprite;r=s[15];const ke={};s[18]=this.element({parent:r||"root"},i),ke.image=i.image,ke.x=18,ke.h=20,ke.w=20,ke.map=i.sprite,ke.frame=i.avgFps[1];const ce=[];if(typeof Ee<"u")for(let gt in Ee.config.props)delete ke[Ee.config.props[gt]],ce.push(Ee.config.props[gt]);s[18].populate(ke),r=s[18];const Xe={};Xe.image=i.image,Xe.x=18,Xe.h=20,Xe.w=20,Xe.map=i.sprite,C=i.avgFps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),Xe.frame=C,g=Xe.is||"Sprite";let be;if(typeof g=="string"){if(be=f.components&&f.components[g]||d[g],!be)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(be=g);s[19]=be.call(null,{props:Xe},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],i=s[19]):r=s[19][Symbol.for("children")][0];const Oe=f.components&&f.components.Sprite||d.Sprite;r=s[15];const he={};s[20]=this.element({parent:r||"root"},i),he.image=i.image,he.x=36,he.h=20,he.w=20,he.map=i.sprite,he.frame=i.avgFps[2];const Q=[];if(typeof Oe<"u")for(let gt in Oe.config.props)delete he[Oe.config.props[gt]],Q.push(Oe.config.props[gt]);s[20].populate(he),r=s[20];const Ne={};Ne.image=i.image,Ne.x=36,Ne.h=20,Ne.w=20,Ne.map=i.sprite,C=i.avgFps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),Ne.frame=C,g=Ne.is||"Sprite";let Pe;if(typeof g=="string"){if(Pe=f.components&&f.components[g]||d[g],!Pe)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Pe=g);s[21]=Pe.call(null,{props:Ne},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],i=s[21]):r=s[21][Symbol.for("children")][0],r=s[1];const Ve={};s[22]=this.element({parent:r||"root"},i),Ve.x=0,Ve.y=40,s[22].populate(Ve);const dt=f.components&&f.components.Sprite||d.Sprite;r=s[22];const pt={};s[23]=this.element({parent:r||"root"},i),pt.image=i.image,pt.x=-2,pt.w=47,pt.h=25,pt.map=i.sprite,pt.frame="min";const tt=[];if(typeof dt<"u")for(let gt in dt.config.props)delete pt[dt.config.props[gt]],tt.push(dt.config.props[gt]);s[23].populate(pt),r=s[23];const bt={};bt.image=i.image,bt.x=-2,bt.w=47,bt.h=25,bt.map=i.sprite,bt.frame="min",g=bt.is||"Sprite";let ut;if(typeof g=="string"){if(ut=f.components&&f.components[g]||d[g],!ut)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(ut=g);s[24]=ut.call(null,{props:bt},s[23],i),s[24][Symbol.for("slots")][0]?(r=s[24][Symbol.for("slots")][0],i=s[24]):r=s[24][Symbol.for("children")][0],r=s[22];const vt={};s[25]=this.element({parent:r||"root"},i),vt.x=58,vt.y=2,s[25].populate(vt);const ct=f.components&&f.components.Sprite||d.Sprite;r=s[25];const Bn={};s[26]=this.element({parent:r||"root"},i),Bn.image=i.image,Bn.x=0,Bn.h=20,Bn.w=20,Bn.map=i.sprite,Bn.frame=i.minFps[0];const oi=[];if(typeof ct<"u")for(let gt in ct.config.props)delete Bn[ct.config.props[gt]],oi.push(ct.config.props[gt]);s[26].populate(Bn),r=s[26];const ft={};ft.image=i.image,ft.x=0,ft.h=20,ft.w=20,ft.map=i.sprite,C=i.minFps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),ft.frame=C,g=ft.is||"Sprite";let Me;if(typeof g=="string"){if(Me=f.components&&f.components[g]||d[g],!Me)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Me=g);s[27]=Me.call(null,{props:ft},s[26],i),s[27][Symbol.for("slots")][0]?(r=s[27][Symbol.for("slots")][0],i=s[27]):r=s[27][Symbol.for("children")][0];const kt=f.components&&f.components.Sprite||d.Sprite;r=s[25];const tn={};s[28]=this.element({parent:r||"root"},i),tn.image=i.image,tn.x=18,tn.h=20,tn.w=20,tn.map=i.sprite,tn.frame=i.minFps[1];const qn=[];if(typeof kt<"u")for(let gt in kt.config.props)delete tn[kt.config.props[gt]],qn.push(kt.config.props[gt]);s[28].populate(tn),r=s[28];const vn={};vn.image=i.image,vn.x=18,vn.h=20,vn.w=20,vn.map=i.sprite,C=i.minFps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),vn.frame=C,g=vn.is||"Sprite";let Ct;if(typeof g=="string"){if(Ct=f.components&&f.components[g]||d[g],!Ct)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ct=g);s[29]=Ct.call(null,{props:vn},s[28],i),s[29][Symbol.for("slots")][0]?(r=s[29][Symbol.for("slots")][0],i=s[29]):r=s[29][Symbol.for("children")][0];const ri=f.components&&f.components.Sprite||d.Sprite;r=s[25];const At={};s[30]=this.element({parent:r||"root"},i),At.image=i.image,At.x=36,At.h=20,At.w=20,At.map=i.sprite,At.frame=i.minFps[2];const ht=[];if(typeof ri<"u")for(let gt in ri.config.props)delete At[ri.config.props[gt]],ht.push(ri.config.props[gt]);s[30].populate(At),r=s[30];const en={};en.image=i.image,en.x=36,en.h=20,en.w=20,en.map=i.sprite,C=i.minFps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),en.frame=C,g=en.is||"Sprite";let lt;if(typeof g=="string"){if(lt=f.components&&f.components[g]||d[g],!lt)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(lt=g);s[31]=lt.call(null,{props:en},s[30],i),s[31][Symbol.for("slots")][0]?(r=s[31][Symbol.for("slots")][0],i=s[31]):r=s[31][Symbol.for("children")][0],r=s[1];const $e={};s[32]=this.element({parent:r||"root"},i),$e.x=150,$e.y=40,s[32].populate($e);const Zt=f.components&&f.components.Sprite||d.Sprite;r=s[32];const cn={};s[33]=this.element({parent:r||"root"},i),cn.image=i.image,cn.w=53,cn.h=25,cn.map=i.sprite,cn.frame="max";const hn=[];if(typeof Zt<"u")for(let gt in Zt.config.props)delete cn[Zt.config.props[gt]],hn.push(Zt.config.props[gt]);s[33].populate(cn),r=s[33];const Ze={};Ze.image=i.image,Ze.w=53,Ze.h=25,Ze.map=i.sprite,Ze.frame="max",g=Ze.is||"Sprite";let si;if(typeof g=="string"){if(si=f.components&&f.components[g]||d[g],!si)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(si=g);s[34]=si.call(null,{props:Ze},s[33],i),s[34][Symbol.for("slots")][0]?(r=s[34][Symbol.for("slots")][0],i=s[34]):r=s[34][Symbol.for("children")][0],r=s[32];const Tn={};s[35]=this.element({parent:r||"root"},i),Tn.x=63,Tn.y=2,s[35].populate(Tn);const Dt=f.components&&f.components.Sprite||d.Sprite;r=s[35];const qe={};s[36]=this.element({parent:r||"root"},i),qe.image=i.image,qe.x=0,qe.h=20,qe.w=20,qe.map=i.sprite,qe.frame=i.maxFps[0];const sn=[];if(typeof Dt<"u")for(let gt in Dt.config.props)delete qe[Dt.config.props[gt]],sn.push(Dt.config.props[gt]);s[36].populate(qe),r=s[36];const an={};an.image=i.image,an.x=0,an.h=20,an.w=20,an.map=i.sprite,C=i.maxFps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),an.frame=C,g=an.is||"Sprite";let dn;if(typeof g=="string"){if(dn=f.components&&f.components[g]||d[g],!dn)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(dn=g);s[37]=dn.call(null,{props:an},s[36],i),s[37][Symbol.for("slots")][0]?(r=s[37][Symbol.for("slots")][0],i=s[37]):r=s[37][Symbol.for("children")][0];const bn=f.components&&f.components.Sprite||d.Sprite;r=s[35];const nn={};s[38]=this.element({parent:r||"root"},i),nn.image=i.image,nn.x=18,nn.h=20,nn.w=20,nn.map=i.sprite,nn.frame=i.maxFps[1];const xr=[];if(typeof bn<"u")for(let gt in bn.config.props)delete nn[bn.config.props[gt]],xr.push(bn.config.props[gt]);s[38].populate(nn),r=s[38];const Pn={};Pn.image=i.image,Pn.x=18,Pn.h=20,Pn.w=20,Pn.map=i.sprite,C=i.maxFps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),Pn.frame=C,g=Pn.is||"Sprite";let Kn;if(typeof g=="string"){if(Kn=f.components&&f.components[g]||d[g],!Kn)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Kn=g);s[39]=Kn.call(null,{props:Pn},s[38],i),s[39][Symbol.for("slots")][0]?(r=s[39][Symbol.for("slots")][0],i=s[39]):r=s[39][Symbol.for("children")][0];const wr=f.components&&f.components.Sprite||d.Sprite;r=s[35];const Si={};s[40]=this.element({parent:r||"root"},i),Si.image=i.image,Si.x=36,Si.h=20,Si.w=20,Si.map=i.sprite,Si.frame=i.maxFps[2];const jt=[];if(typeof wr<"u")for(let gt in wr.config.props)delete Si[wr.config.props[gt]],jt.push(wr.config.props[gt]);s[40].populate(Si),r=s[40];const Ji={};Ji.image=i.image,Ji.x=36,Ji.h=20,Ji.w=20,Ji.map=i.sprite,C=i.maxFps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),Ji.frame=C,g=Ji.is||"Sprite";let So;if(typeof g=="string"){if(So=f.components&&f.components[g]||d[g],!So)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(So=g);return s[41]=So.call(null,{props:Ji},s[40],i),s[41][Symbol.for("slots")][0]?(r=s[41][Symbol.for("slots")][0],i=s[41]):r=s[41][Symbol.for("children")][0],s},effects:[function(r,i,f,d,y,x){(typeof skip6>"u"||skip6.indexOf("frame")===-1)&&i[6].set("frame",r.fps[0])},function(r,i,f,d,y,x){i[7][Symbol.for("props")].frame=r.fps[0]},function(r,i,f,d,y,x){(typeof skip8>"u"||skip8.indexOf("frame")===-1)&&i[8].set("frame",r.fps[1])},function(r,i,f,d,y,x){i[9][Symbol.for("props")].frame=r.fps[1]},function(r,i,f,d,y,x){(typeof skip10>"u"||skip10.indexOf("frame")===-1)&&i[10].set("frame",r.fps[2])},function(r,i,f,d,y,x){i[11][Symbol.for("props")].frame=r.fps[2]},function(r,i,f,d,y,x){(typeof skip16>"u"||skip16.indexOf("frame")===-1)&&i[16].set("frame",r.avgFps[0])},function(r,i,f,d,y,x){i[17][Symbol.for("props")].frame=r.avgFps[0]},function(r,i,f,d,y,x){(typeof skip18>"u"||skip18.indexOf("frame")===-1)&&i[18].set("frame",r.avgFps[1])},function(r,i,f,d,y,x){i[19][Symbol.for("props")].frame=r.avgFps[1]},function(r,i,f,d,y,x){(typeof skip20>"u"||skip20.indexOf("frame")===-1)&&i[20].set("frame",r.avgFps[2])},function(r,i,f,d,y,x){i[21][Symbol.for("props")].frame=r.avgFps[2]},function(r,i,f,d,y,x){(typeof skip26>"u"||skip26.indexOf("frame")===-1)&&i[26].set("frame",r.minFps[0])},function(r,i,f,d,y,x){i[27][Symbol.for("props")].frame=r.minFps[0]},function(r,i,f,d,y,x){(typeof skip28>"u"||skip28.indexOf("frame")===-1)&&i[28].set("frame",r.minFps[1])},function(r,i,f,d,y,x){i[29][Symbol.for("props")].frame=r.minFps[1]},function(r,i,f,d,y,x){(typeof skip30>"u"||skip30.indexOf("frame")===-1)&&i[30].set("frame",r.minFps[2])},function(r,i,f,d,y,x){i[31][Symbol.for("props")].frame=r.minFps[2]},function(r,i,f,d,y,x){(typeof skip36>"u"||skip36.indexOf("frame")===-1)&&i[36].set("frame",r.maxFps[0])},function(r,i,f,d,y,x){i[37][Symbol.for("props")].frame=r.maxFps[0]},function(r,i,f,d,y,x){(typeof skip38>"u"||skip38.indexOf("frame")===-1)&&i[38].set("frame",r.maxFps[1])},function(r,i,f,d,y,x){i[39][Symbol.for("props")].frame=r.maxFps[1]},function(r,i,f,d,y,x){(typeof skip40>"u"||skip40.indexOf("frame")===-1)&&i[40].set("frame",r.maxFps[2])},function(r,i,f,d,y,x){i[41][Symbol.for("props")].frame=r.maxFps[2]}],context:{}},state(){return{image:s_,sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready(){let h=1e4,r=0,i=0,f=0,d=0;Ql.on("fpsUpdate",(y,{fps:x})=>{h=Math.min(x,h),r=Math.max(x,r),f+=x,d++,i=Math.round(f/d),this.fps=x.toString().padStart(3,"0"),this.avgFps=i.toString().padStart(3,"0"),this.minFps=h.toString().padStart(3,"0"),this.maxFps=r.toString().padStart(3,"0")})}}}),l_=()=>({Circle:i_(),RouterView:o_(),Sprite:r_(),FPScounter:a_()}),u_={name:"log",plugin(){return BS("App")}},cg={log:u_},yC=(h,r="",i={})=>{let f;if(typeof r=="object"?i=r:f=r,typeof h=="function"){if(f===void 0)throw Error("Error registering plugin: name is required for plugin");cg[f]={plugin:h,options:i}}else h.plugin&&yC(h.plugin,f||h.name,i)};let V0;const bS=h=>{throw new Error(`Parameter ${h} is required`)},ga=(h=bS("name"),r=bS("config"))=>{let i;const f=function(y,x,s,g){this.componentId=jI(h),this.lifecycle=Object.assign(Object.create(JM),{component:this,previous:null,current:null}),this.parent=s,this.rootParent=g,this[ye.holder]=x,this[ye.id]=FI(),this[ye.props]=oh(y.props||{},Hi.get("reactivityMode")),this[ye.timeouts]=[],this[ye.intervals]=[],this[ye.originalState]=r.state&&typeof r.state=="function"&&r.state.apply(this)||{},this[ye.originalState].hasFocus=!1,this[ye.state]=oh(this[ye.originalState],Hi.get("reactivityMode")),this.lifecycle.state="init",this[ye.children]=r.code.render.apply(wg,[x,this,r,V0,Nc,Hr])||[],this[ye.wrapper]=this[ye.children][0],this[ye.slots]=this[ye.children].filter(R=>R[ye.isSlot]),r.hooks&&(r.hooks.frameTick&&Ql.on("frameTick",(R,b)=>Y0("frameTick",this[ye.identifier],this,[b])),r.hooks.idle&&Ql.on("idle",()=>{Y0("idle",this[ye.identifier],this)}),r.hooks.attach&&this[ye.wrapper].node.on("inBounds",()=>{this.lifecycle.state="attach"}),r.hooks.detach&&this[ye.wrapper].node.on("outOfBounds",(R,{previous:b})=>{b>0&&(this.lifecycle.state="detach")}),r.hooks.enter&&this[ye.wrapper].node.on("inViewport",()=>{this.lifecycle.state="enter"}),r.hooks.exit&&this[ye.wrapper].node.on("outOfViewport",()=>{this.lifecycle.state="exit"}));const C=r.code.effects;for(let R=0;R<C.length;R++){const b=()=>{C[R](this,this[ye.children],r,V0,g,Nc)};this[ye.effects].push(b),Nc(b)}if(this[ye.watchers]){const R=Object.keys(this[ye.watchers]),b=R.length;for(let _=0;_<b;_++){let D=this,w=R[_];if(w.indexOf(".")>-1){const $=w.split(".");w=$.pop();for(let B=0;B<$.length;B++)D=D[$[B]]}let L=this[w];Nc(($=!1)=>{const B=D[w];(L!==B||$===!0)&&(this[ye.watchers][w].apply(this,[B,L]),L=B)})}}return setTimeout(()=>this.lifecycle.state="ready"),this},d=(y={},x,s,g)=>{if(Bl[ye.launched]===!1){const C=Object.keys(cg),R=C.length;for(let b=0;b<R;b++){const _=C[b],D=`$${_}`;D in Bl&&rn.warn(`"${_}" (this.${D}) already exists as a property or plugin on the Base Component. You may be overwriting built-in functionality. Proceed with care!`);const w=cg[_];Object.defineProperty(Bl,D,{value:w.plugin(w.options),writable:!1,enumerable:!0,configurable:!1})}V0=l_(),Bl[ye.launched]=!0}return i===void 0&&(rn.debug(`Setting up ${h} component`),i=n_(Object.create(Bl),r)),r.code===void 0&&(rn.debug(`Generating code for ${h} component`),r.code=PI.call(r,LI(r.template,h))),f.call(Object.create(i),y,x,s,g)};return d.config=r,d[ye.isComponent]=!0,d},f_=h=>{const r={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};h.hooks=h.hooks||{};let i,f,d;return h.hooks[ye.destroy]=function(){document.removeEventListener("keydown",i),document.removeEventListener("keyup",f)},h.hooks[ye.init]=function(){const y={...r,...Hi.get("keymap",{})};i=x=>{const s=y[x.key]||y[x.keyCode]||x.key||x.keyCode;mr.input(s,x),clearTimeout(d),d=setTimeout(()=>{mr.hold=!0},Hi.get("holdTimeout",sC))},f=x=>{const s=ug.get(x.code);s!==void 0&&typeof s=="function"&&(ug.delete(x.code),s()),clearTimeout(d),mr.hold=!1},document.addEventListener("keydown",i),document.addEventListener("keyup",f),setTimeout(()=>mr.set(this))},ga("App",h)},at={Component:ga,Application:f_,Launch:kR,Plugin:yC},c_=h=>new Promise((r,i)=>{const f=new XMLHttpRequest;f.onreadystatechange=function(){f.readyState==XMLHttpRequest.DONE&&(f.status===0||f.status===200?r(JSON.parse(f.responseText)):i(f.statusText))},f.open("GET",h),f.send(null)}),h_={name:"language",plugin(h={}){let r={},i={};const f=oh({language:"",loaded:0},Hi.get("reactivityMode"),!0),d=s=>{i=r[s]||{},f.language=s,Object.keys(r).length===0&&rn.warn("No translations loaded. Please load a file with translations or specify a translations object manually"),s in r||rn.warn(`Language ${s} not available in the loaded translations`)},y=s=>c_(s).then(g=>{x(g)}).catch(g=>{rn.error(g)}),x=s=>{r=s,i=r[f.language]||{},f.loaded++};return"file"in h?y(h.file).then(()=>{"language"in h&&d(h.language)}):"language"in h&&d(h.language),{translate(s){f.language,f.loaded;let g=[...arguments].slice(1);return g.length===0?i&&i[s]||s:(g.length===1&&typeof g[0]=="object"&&(g=g.pop()),Object.keys(Array.isArray(g)?Object.assign({},g):g).reduce((C,R)=>C.replace(new RegExp("{\\s?"+R+"\\s?}","g"),g[R]),i&&i[s]||s))},get language(){return f.language},set(s){d(s)},translations(s){x(s)},load(s){return y(s)}}}},d_=(h,r,i)=>{const f=i.split(".");for(let d=0;d<f.length;d++){const y=f[d];if(h!==null&&y in h)h=h[y],r=r!==null&&y in r?r[y]:null;else if(r!==null&&y in r)r=r[y],h=r;else{h=void 0;break}}return h},vC={name:"theme",plugin(h={}){let r={};const i=oh({current:"default"},Hi.get("reactivityMode"),!0);let f={},d=null;return"themes"in h?(f=h.themes,i.current=h.current||"default",d=h.base||"default"):f={default:h},{get(y,x){if(i.current,r[y]!==void 0)return r[y];const s=d_(f[i.current],f[d],y);return s!==void 0?(r[y]=s,s):x},set(y){y in f?(r={},i.current=y):rn.warn(`Theme ${y} not found`)}}}},H0=h=>new URLSearchParams(window.location.search).get(h),jl={sky:{test(){return navigator.userAgent.indexOf("WPE Sky")>-1||H0("keymapping")==="sky"},mapping:{Escape:"back",27:"back"}},webos:{test(){return navigator.userAgent.indexOf("WebOS")>-1||H0("keymapping")==="webos"},mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test(){return navigator.userAgent.indexOf("Tizen")>-1||H0("keymapping")==="tizen"},mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},p_=()=>{let h={};return Object.keys(jl).forEach(r=>{if(jl[r].test&&typeof jl[r].test=="function"&&jl[r].test()===!0){h=jl[r].mapping;return}}),h},g_="modulepreload",m_=function(h){return"/"+h},kS={},y_=function(r,i,f){if(!i||i.length===0)return r();const d=document.getElementsByTagName("link");return Promise.all(i.map(y=>{if(y=m_(y),y in kS)return;kS[y]=!0;const x=y.endsWith(".css"),s=x?'[rel="stylesheet"]':"";if(!!f)for(let R=d.length-1;R>=0;R--){const b=d[R];if(b.href===y&&(!x||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${s}`))return;const C=document.createElement("link");if(C.rel=x?"stylesheet":g_,x||(C.as="script",C.crossOrigin=""),C.href=y,document.head.appendChild(C),x)return new Promise((R,b)=>{C.addEventListener("load",R),C.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${y}`)))})})).then(()=>r()).catch(y=>{const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=y,window.dispatchEvent(x),!x.defaultPrevented)throw y})},v_=at.Component("PortalItem",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=370,g.h=320,g.scale={transition:i.hasFocus?1.1:1},g.color=i.backgroundColor,g.effects=[i.shader("radius",{radius:6})],s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.x=30,C.y=30,C.content=i.number,C.size=84,C.color=i.fontColor,C.__textnode=!0,s[1].populate(C),r=s[0];const R={};s[2]=this.element({parent:r||"root"},i),R.x=30,R.y=140,R.content=i.title,R.size=42,R.font="raleway",R.color=i.fontColor,R.letterspacing=2,R.__textnode=!0,s[2].populate(R),r=s[0];const b={};return s[3]=this.element({parent:r||"root"},i),b.x=30,b.y=200,b.content=i.description,b.wordwrap=300,b.size=28,b.color=i.fontColor,b.lineheight=32,b.__textnode=!0,s[3].populate(b),s},effects:[function(r,i,f,d,y,x){i[0].set("scale",{transition:r.hasFocus?1.1:1})},function(r,i,f,d,y,x){i[0].set("color",r.backgroundColor)},function(r,i,f,d,y,x){i[0].set("effects",[r.shader("radius",{radius:6})])},function(r,i,f,d,y,x){i[1].set("content",r.number)},function(r,i,f,d,y,x){i[1].set("color",r.fontColor)},function(r,i,f,d,y,x){i[2].set("content",r.title)},function(r,i,f,d,y,x){i[2].set("color",r.fontColor)},function(r,i,f,d,y,x){i[3].set("content",r.description)},function(r,i,f,d,y,x){i[3].set("color",r.fontColor)}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),x_=at.Component("PortalRow",{components:{PortalItem:v_},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R),r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.alpha={transition:{value:i.itemOffset<240?1:0,duration:200}},s[1].populate(b),r=s[1];const _={};s[2]=this.element({parent:r||"root"},i),_.content=i.title,_.x=60,_.__textnode=!0,s[2].populate(_),r=s[1];const D={};s[3]=this.element({parent:r||"root"},i),D.y=50,D.x=60,D.h=1,D.w=1800,D.color="0xe8d7f9ff",s[3].populate(D),r=s[0];const w={};s[4]=this.element({parent:r||"root"},i),w.y=100,w.x={transition:i.rowOffset},s[4].populate(w),r=s[4];const L=[],$=(B=[],V,W)=>{const X=x(B),ie=new Set;let K=X.length;for(;K--;){const q=X[K];ie.add(""+q.id)}let pe=W.length;for(;pe--;)if(ie.has(W[pe])===!1){const q=W[pe];V[5][q]&&V[5][q].destroy(),delete V[5][q],V[6][q]&&V[6][q].destroy(),delete V[6][q]}W.length=0;const ue=X.length;for(let q=0;q<ue;q++){const A=Object.create(i);r=V[4],A.index=q,A.item=X[q],A.key=""+A.item.id,W.push(A.key);const Y=f.components&&f.components.PortalItem||d.PortalItem;V[5]===void 0&&(V[5]={});const le={};V[5][A.key]===void 0&&(V[5][A.key]=this.element({parent:r||"root"},i)),le.x={transition:{value:A.itemOffset+A.index*430,delay:50*(A.index%4),duration:500}},le.title=A.item.title,le.description=A.item.description,le.id=A.item.id,le.index=A.index,le.ref="item"+A.index;const ge=[];if(typeof Y<"u")for(let re in Y.config.props)delete le[Y.config.props[re]],ge.push(Y.config.props[re]);V[5][A.key].nodeId===void 0&&V[5][A.key].populate(le),V[6]===void 0&&(V[6]={}),r=V[5][A.key];const de={};if(V[6][A.key]===void 0){C={transition:{value:A.itemOffset+A.index*430,delay:50*(A.index%4),duration:500}},Array.isArray(C)===!0&&(C=x(C).slice(0)),de.x=C,de.title=A.item.title,de.description=A.item.description,de.id=A.item.id,de.index=A.index,C="item"+A.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),de.ref=C,g=de.is||"PortalItem";let re;if(typeof g=="string"){if(re=f.components&&f.components[g]||d[g],!re)throw new Error('Component "PortalItem" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(re=g);V[6][A.key]=re.call(null,{props:de},V[5][A.key],i),V[6][A.key][Symbol.for("slots")][0]?(r=V[6][A.key][Symbol.for("slots")][0],i=V[6][A.key]):r=V[6][A.key][Symbol.for("children")][0]}let se=()=>{(typeof ge>"u"||ge.indexOf("ref")===-1)&&V[5][A.key].set("ref","item"+A.index)};y(se,null),i[Symbol.for("effects")].push(se),V[6][A.key][Symbol.for("props")].ref="item"+A.index}};return y(()=>{$(i.items,s,L)},"items"),y(()=>{i.itemOffset;for(let B=0;B<i.items.length;B++){const V={};V.index=B,V.item=i.items[B],V.key=V.item.id,(typeof skip5>"u"||skip5.indexOf("x")===-1)&&s[5][V.key].set("x",{transition:{value:i.itemOffset+V.index*430,delay:50*(V.index%4),duration:500}})}}),y(()=>{i.itemOffset;for(let B=0;B<i.items.length;B++){const V={};V.index=B,V.item=i.items[B],V.key=V.item.id,s[6][V.key][Symbol.for("props")].x={transition:{value:i.itemOffset+V.index*430,delay:50*(V.index%4),duration:500}}}}),s},effects:[function(r,i,f,d,y,x){i[1].set("alpha",{transition:{value:r.itemOffset<240?1:0,duration:200}})},function(r,i,f,d,y,x){i[4].set("x",{transition:r.rowOffset})}],context:{}},props:["title","items"],state(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(h){const r=this.$select(`item${h}`);r&&r.$focus&&(r.$focus(),h<1?this.rowOffset=60:h>this.items.length-2?this.rowOffset=60-(this.items.length-2)*430+430:this.rowOffset=60-h*430+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),xC=at.Component("SourceInfo",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.x=1860,g.y={transition:{value:1060+i.offsetY,delay:1e3,duration:300,easing:"ease-out"}},g.alpha={transition:{value:i.alpha,delay:1e3,duration:300,easing:"ease-out"}},g.w=480,g.h=100,g.mount=1,g.color="{top: '0x000000dd', bottom: '0x000000ff'}",g.effects=[i.shader("radius",{radius:10})],s[0].populate(g),r=s[0];const C={};return s[1]=this.element({parent:r||"root"},i),C.y=18,C.x=20,C.size=26,C.wordwrap=440,C.align="center",C.lineheight=32,C.content='Press "U" to check out the source code of this example on GitHub',C.__textnode=!0,s[1].populate(C),s},effects:[function(r,i,f,d,y,x){i[0].set("y",{transition:{value:1060+r.offsetY,delay:1e3,duration:300,easing:"ease-out"}})},function(r,i,f,d,y,x){i[0].set("alpha",{transition:{value:r.alpha,delay:1e3,duration:300,easing:"ease-out"}})},function(r,i,f,d,y,x){i[0].set("effects",[r.shader("radius",{radius:10})])}],context:{}},state(){return{offsetY:15,alpha:0}},hooks:{ready(){this.offsetY=0,this.alpha=1}}}),w_="@lightningjs/blits-example-app",S_="1.6.0",C_="Lightning 3 Blits Example App",T_="index.js",E_="module",A_={start:"npm run dev","start:test":"NODE_ENV=testing npm run dev",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",build:"vite build",dev:"vite dev --host",test:"NODE_ENV=testing backstop --config=backstop.cjs test","test:reference":"NODE_ENV=testing backstop --config=backstop.cjs reference"},b_={hooks:{"pre-commit":"lint-staged"}},k_="Michiel van der Geest <hello@michielvandergeest.com>",I_="Apache-2",M_={backstopjs:"^6.3.22",eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0",husky:"^7.0.4","lint-staged":"^12.3.3",playwright:"^1.41.0",prettier:"^2.5.1","shaka-player":"^4.7.1",vite:"^4.0.4"},R_={"@lightningjs/blits":"^1.9.1"},__={name:w_,version:S_,description:C_,main:T_,type:E_,scripts:A_,"lint-staged":{"*.js":["eslint --fix"]},husky:b_,author:k_,license:I_,devDependencies:M_,dependencies:R_},L_=at.Component("Portal",{components:{PortalRow:x_,SourceInfo:xC},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),R.w=1920,R.h=1080,R.color="{top: '0x44037aff', bottom: '0x240244ff'}",s[0].populate(R);const b=f.components&&f.components.PortalRow||d.PortalRow;r=s[0];const _={};s[1]=this.element({parent:r||"root"},i),_.mount="{y: 0.5}",_.h=500,_.y={transition:-i.rowFocused*420+550},_.title="Demos",_.items=i.demo,_.ref="row0";const D=[];if(typeof b<"u")for(let Re in b.config.props)delete _[b.config.props[Re]],D.push(b.config.props[Re]);s[1].populate(_),r=s[1];const w={};w.mount="{y: 0.5}",w.h=500,C={transition:-i.rowFocused*420+550},Array.isArray(C)===!0&&(C=x(C).slice(0)),w.y=C,w.title="Demos",w.items=i.demo,w.ref="row0",g=w.is||"PortalRow";let L;if(typeof g=="string"){if(L=f.components&&f.components[g]||d[g],!L)throw new Error('Component "PortalRow" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(L=g);s[2]=L.call(null,{props:w},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0];const $=f.components&&f.components.PortalRow||d.PortalRow;r=s[0];const B={};s[3]=this.element({parent:r||"root"},i),B.mount="{y: 0.5}",B.h=500,B.y={transition:-i.rowFocused*420+1100},B.title="Examples and tests",B.items=i.example,B.ref="row1";const V=[];if(typeof $<"u")for(let Re in $.config.props)delete B[$.config.props[Re]],V.push($.config.props[Re]);s[3].populate(B),r=s[3];const W={};W.mount="{y: 0.5}",W.h=500,C={transition:-i.rowFocused*420+1100},Array.isArray(C)===!0&&(C=x(C).slice(0)),W.y=C,W.title="Examples and tests",W.items=i.example,W.ref="row1",g=W.is||"PortalRow";let X;if(typeof g=="string"){if(X=f.components&&f.components[g]||d[g],!X)throw new Error('Component "PortalRow" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(X=g);s[4]=X.call(null,{props:W},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0];const ie=f.components&&f.components.PortalRow||d.PortalRow;r=s[0];const K={};s[5]=this.element({parent:r||"root"},i),K.mount="{y: 0.5}",K.h=500,K.y={transition:-i.rowFocused*420+1650},K.title="Benchmarks and stress tests",K.items=i.benchmark,K.ref="row2";const pe=[];if(typeof ie<"u")for(let Re in ie.config.props)delete K[ie.config.props[Re]],pe.push(ie.config.props[Re]);s[5].populate(K),r=s[5];const ue={};ue.mount="{y: 0.5}",ue.h=500,C={transition:-i.rowFocused*420+1650},Array.isArray(C)===!0&&(C=x(C).slice(0)),ue.y=C,ue.title="Benchmarks and stress tests",ue.items=i.benchmark,ue.ref="row2",g=ue.is||"PortalRow";let q;if(typeof g=="string"){if(q=f.components&&f.components[g]||d[g],!q)throw new Error('Component "PortalRow" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(q=g);s[6]=q.call(null,{props:ue},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],i=s[6]):r=s[6][Symbol.for("children")][0],r=s[0];const A={};s[7]=this.element({parent:r||"root"},i),A.w=1920,A.h=200,A.color="0x44037aff",s[7].populate(A),r=s[7];const Y={};s[8]=this.element({parent:r||"root"},i),Y.w=1920,Y.h=70,Y.y=200,Y.color="{top: '0x44037aff'}",s[8].populate(Y),r=s[7];const le={};s[9]=this.element({parent:r||"root"},i),le.y={transition:{value:80-i.logoOffset,duration:400}},s[9].populate(le),r=s[9];const ge={};s[10]=this.element({parent:r||"root"},i),ge.src="assets/blits-logo-full.png",ge.w=200,ge.h=112,ge.x=60,s[10].populate(ge),r=s[9];const de={};s[11]=this.element({parent:r||"root"},i),de.w=2,de.h=120,de.y=-10,de.color="0xffffff80",de.x=300,s[11].populate(de),r=s[9];const se={};s[12]=this.element({parent:r||"root"},i),se.x=320,se.y=16,s[12].populate(se),r=s[12];const re={};s[13]=this.element({parent:r||"root"},i),re.y=0,re.size=36,re.content="Example App",re.__textnode=!0,s[13].populate(re),r=s[12];const oe={};return s[14]=this.element({parent:r||"root"},i),oe.y=50,oe.size=24,oe.content="v"+i.version,oe.__textnode=!0,s[14].populate(oe),s},effects:[function(r,i,f,d,y,x){(typeof skip1>"u"||skip1.indexOf("y")===-1)&&i[1].set("y",{transition:-r.rowFocused*420+550})},function(r,i,f,d,y,x){i[2][Symbol.for("props")].y={transition:-r.rowFocused*420+550}},function(r,i,f,d,y,x){(typeof skip3>"u"||skip3.indexOf("y")===-1)&&i[3].set("y",{transition:-r.rowFocused*420+1100})},function(r,i,f,d,y,x){i[4][Symbol.for("props")].y={transition:-r.rowFocused*420+1100}},function(r,i,f,d,y,x){(typeof skip5>"u"||skip5.indexOf("y")===-1)&&i[5].set("y",{transition:-r.rowFocused*420+1650})},function(r,i,f,d,y,x){i[6][Symbol.for("props")].y={transition:-r.rowFocused*420+1650}},function(r,i,f,d,y,x){i[9].set("y",{transition:{value:80-r.logoOffset,duration:400}})}],context:{}},state(){return{version:__.version,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"},{title:"Router Hooks",id:"examples/router-hooks",description:"Example of router before hook"},{title:"Image resizing",id:"examples/resize",description:'Using the "fit" syntax for resizing images on the fly'},{title:"Translations",id:"examples/languageplugin",description:"Language Plugin for internationalization"},{title:"Layout",id:"examples/layout",description:"Position Elements with ease using the Layout component"}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready(){this.logoOffset=0,this.$trigger("rowFocused")}},watch:{rowFocused(h){const r=this.$select(`row${h}`);r&&r.$focus&&r.$focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),P_=at.Component("Letter",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=i.w,C.h={transition:{value:410+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},C.color="0xe6e6e6ff",s[1].populate(C),r=s[0];const R={};s[2]=this.element({parent:r||"root"},i),R.w=i.w,R.h=280,R.src=i.image,R.y={transition:{value:400+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},s[2].populate(R),r=s[0];const b={};return s[3]=this.element({parent:r||"root"},i),b.w=i.w,b.color="0xe6e6e6ff",b.h={transition:{value:500-i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},b.y={transition:{value:660+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},s[3].populate(b),s},effects:[function(r,i,f,d,y,x){i[1].set("h",{transition:{value:410+r.offset,duration:r.duration,delay:r.wait,easing:r.timingFunction}})},function(r,i,f,d,y,x){i[2].set("src",r.image)},function(r,i,f,d,y,x){i[2].set("y",{transition:{value:400+r.offset,duration:r.duration,delay:r.wait,easing:r.timingFunction}})},function(r,i,f,d,y,x){i[3].set("h",{transition:{value:500-r.offset,duration:r.duration,delay:r.wait,easing:r.timingFunction}})},function(r,i,f,d,y,x){i[3].set("y",{transition:{value:660+r.offset,duration:r.duration,delay:r.wait,easing:r.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return`assets/${this.letter}.png`}},state(){return{offset:this.direction==="up"?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),D_=at.Component("Intro",{components:{Letter:P_},code:{render:function(r,i,f,d,y,x){const s=[];let g;const C={};s[0]=this.element({parent:r||"root"},i),C.w=1920,C.h=1080,C.src="assets/background.jpg",s[0].populate(C);const R=f.components&&f.components.Letter||d.Letter;r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.letter="l",b.w=294;const _=[];if(typeof R<"u")for(let Pe in R.config.props)delete b[R.config.props[Pe]],_.push(R.config.props[Pe]);s[1].populate(b),r=s[1];const D={};D.letter="l",D.w=294,g=D.is||"Letter";let w;if(typeof g=="string"){if(w=f.components&&f.components[g]||d[g],!w)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(w=g);s[2]=w.call(null,{props:D},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0];const L=f.components&&f.components.Letter||d.Letter;r=s[0];const $={};s[3]=this.element({parent:r||"root"},i),$.letter="i-1",$.w=128,$.x=294,$.direction="up",$.delay=50;const B=[];if(typeof L<"u")for(let Pe in L.config.props)delete $[L.config.props[Pe]],B.push(L.config.props[Pe]);s[3].populate($),r=s[3];const V={};V.letter="i-1",V.w=128,V.x=294,V.direction="up",V.delay=50,g=V.is||"Letter";let W;if(typeof g=="string"){if(W=f.components&&f.components[g]||d[g],!W)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(W=g);s[4]=W.call(null,{props:V},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0];const X=f.components&&f.components.Letter||d.Letter;r=s[0];const ie={};s[5]=this.element({parent:r||"root"},i),ie.letter="g-1",ie.w=205,ie.x=422,ie.delay=100;const K=[];if(typeof X<"u")for(let Pe in X.config.props)delete ie[X.config.props[Pe]],K.push(X.config.props[Pe]);s[5].populate(ie),r=s[5];const pe={};pe.letter="g-1",pe.w=205,pe.x=422,pe.delay=100,g=pe.is||"Letter";let ue;if(typeof g=="string"){if(ue=f.components&&f.components[g]||d[g],!ue)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(ue=g);s[6]=ue.call(null,{props:pe},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],i=s[6]):r=s[6][Symbol.for("children")][0];const q=f.components&&f.components.Letter||d.Letter;r=s[0];const A={};s[7]=this.element({parent:r||"root"},i),A.letter="h",A.w=224,A.x=627,A.direction="up",A.delay=150;const Y=[];if(typeof q<"u")for(let Pe in q.config.props)delete A[q.config.props[Pe]],Y.push(q.config.props[Pe]);s[7].populate(A),r=s[7];const le={};le.letter="h",le.w=224,le.x=627,le.direction="up",le.delay=150,g=le.is||"Letter";let ge;if(typeof g=="string"){if(ge=f.components&&f.components[g]||d[g],!ge)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(ge=g);s[8]=ge.call(null,{props:le},s[7],i),s[8][Symbol.for("slots")][0]?(r=s[8][Symbol.for("slots")][0],i=s[8]):r=s[8][Symbol.for("children")][0];const de=f.components&&f.components.Letter||d.Letter;r=s[0];const se={};s[9]=this.element({parent:r||"root"},i),se.letter="t",se.w=190,se.x=851,se.delay=200;const re=[];if(typeof de<"u")for(let Pe in de.config.props)delete se[de.config.props[Pe]],re.push(de.config.props[Pe]);s[9].populate(se),r=s[9];const oe={};oe.letter="t",oe.w=190,oe.x=851,oe.delay=200,g=oe.is||"Letter";let Re;if(typeof g=="string"){if(Re=f.components&&f.components[g]||d[g],!Re)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Re=g);s[10]=Re.call(null,{props:oe},s[9],i),s[10][Symbol.for("slots")][0]?(r=s[10][Symbol.for("slots")][0],i=s[10]):r=s[10][Symbol.for("children")][0];const Ae=f.components&&f.components.Letter||d.Letter;r=s[0];const Ie={};s[11]=this.element({parent:r||"root"},i),Ie.letter="n-1",Ie.w=221,Ie.x=1041,Ie.direction="up",Ie.delay=250;const _e=[];if(typeof Ae<"u")for(let Pe in Ae.config.props)delete Ie[Ae.config.props[Pe]],_e.push(Ae.config.props[Pe]);s[11].populate(Ie),r=s[11];const Te={};Te.letter="n-1",Te.w=221,Te.x=1041,Te.direction="up",Te.delay=250,g=Te.is||"Letter";let je;if(typeof g=="string"){if(je=f.components&&f.components[g]||d[g],!je)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(je=g);s[12]=je.call(null,{props:Te},s[11],i),s[12][Symbol.for("slots")][0]?(r=s[12][Symbol.for("slots")][0],i=s[12]):r=s[12][Symbol.for("children")][0];const F=f.components&&f.components.Letter||d.Letter;r=s[0];const Ue={};s[13]=this.element({parent:r||"root"},i),Ue.letter="i-2",Ue.w=115,Ue.x=1262,Ue.delay=300;const He=[];if(typeof F<"u")for(let Pe in F.config.props)delete Ue[F.config.props[Pe]],He.push(F.config.props[Pe]);s[13].populate(Ue),r=s[13];const Ge={};Ge.letter="i-2",Ge.w=115,Ge.x=1262,Ge.delay=300,g=Ge.is||"Letter";let Ce;if(typeof g=="string"){if(Ce=f.components&&f.components[g]||d[g],!Ce)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ce=g);s[14]=Ce.call(null,{props:Ge},s[13],i),s[14][Symbol.for("slots")][0]?(r=s[14][Symbol.for("slots")][0],i=s[14]):r=s[14][Symbol.for("children")][0];const H=f.components&&f.components.Letter||d.Letter;r=s[0];const Ee={};s[15]=this.element({parent:r||"root"},i),Ee.letter="n-2",Ee.w=219,Ee.x=1377,Ee.direction="up",Ee.delay=350;const ke=[];if(typeof H<"u")for(let Pe in H.config.props)delete Ee[H.config.props[Pe]],ke.push(H.config.props[Pe]);s[15].populate(Ee),r=s[15];const ce={};ce.letter="n-2",ce.w=219,ce.x=1377,ce.direction="up",ce.delay=350,g=ce.is||"Letter";let Xe;if(typeof g=="string"){if(Xe=f.components&&f.components[g]||d[g],!Xe)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Xe=g);s[16]=Xe.call(null,{props:ce},s[15],i),s[16][Symbol.for("slots")][0]?(r=s[16][Symbol.for("slots")][0],i=s[16]):r=s[16][Symbol.for("children")][0];const be=f.components&&f.components.Letter||d.Letter;r=s[0];const Oe={};s[17]=this.element({parent:r||"root"},i),Oe.letter="g-2",Oe.w=324,Oe.x=1596,Oe.direction="up",Oe.delay=400;const he=[];if(typeof be<"u")for(let Pe in be.config.props)delete Oe[be.config.props[Pe]],he.push(be.config.props[Pe]);s[17].populate(Oe),r=s[17];const Q={};Q.letter="g-2",Q.w=324,Q.x=1596,Q.direction="up",Q.delay=400,g=Q.is||"Letter";let Ne;if(typeof g=="string"){if(Ne=f.components&&f.components[g]||d[g],!Ne)throw new Error('Component "Letter" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ne=g);return s[18]=Ne.call(null,{props:Q},s[17],i),s[18][Symbol.for("slots")][0]?(r=s[18][Symbol.for("slots")][0],i=s[18]):r=s[18][Symbol.for("children")][0],s},effects:[],context:{}}}),N_=at.Component("Toggle",{code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),R.w=100,R.h=50,R.y=5,R.color=i.bgColor,R.effects=[i.shader("radius",{radius:25})],s[0].populate(R);const b=f.components&&f.components.Circle||d.Circle;r=s[0];const _={};s[1]=this.element({parent:r||"root"},i),_.x={transition:i.on?0:50},_.size=50;const D=[];if(typeof b<"u")for(let $ in b.config.props)delete _[b.config.props[$]],D.push(b.config.props[$]);s[1].populate(_),r=s[1];const w={};C={transition:i.on?0:50},Array.isArray(C)===!0&&(C=x(C).slice(0)),w.x=C,w.size=50,C=i.primaryColor,Array.isArray(C)===!0&&(C=x(C).slice(0)),w.color=C,g=w.is||"Circle";let L;if(typeof g=="string"){if(L=f.components&&f.components[g]||d[g],!L)throw new Error('Component "Circle" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(L=g);return s[2]=L.call(null,{props:w},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0],s},effects:[function(r,i,f,d,y,x){i[0].set("color",r.bgColor)},function(r,i,f,d,y,x){i[0].set("effects",[r.shader("radius",{radius:25})])},function(r,i,f,d,y,x){(typeof skip1>"u"||skip1.indexOf("x")===-1)&&i[1].set("x",{transition:r.on?0:50})},function(r,i,f,d,y,x){i[2][Symbol.for("props")].x={transition:r.on?0:50}},function(r,i,f,d,y,x){i[2][Symbol.for("props")].color=r.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),O_=at.Component("Bar",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w={value:i.w,duration:i.duration},g.h={value:i.h,duration:i.duration},g.color=i.bgColor,g.x=i.index*(i.w+i.w/4),g.effects=[i.shader("radius",{radius:10})],s[0].populate(g),r=s[0];const C={};return s[1]=this.element({parent:r||"root"},i),C.w=i.w,C.y={transition:{value:i.h-i.innerH,duration:i.duration}},C.h={transition:{value:i.innerH,duration:i.duration}},C.color=i.primaryColor,C.effects=[i.shader("radius",{radius:10})],s[1].populate(C),s},effects:[function(r,i,f,d,y,x){i[0].set("w",{value:r.w,duration:r.duration})},function(r,i,f,d,y,x){i[0].set("h",{value:r.h,duration:r.duration})},function(r,i,f,d,y,x){i[0].set("color",r.bgColor)},function(r,i,f,d,y,x){i[0].set("x",r.index*(r.w+r.w/4))},function(r,i,f,d,y,x){i[0].set("effects",[r.shader("radius",{radius:10})])},function(r,i,f,d,y,x){i[1].set("w",r.w)},function(r,i,f,d,y,x){i[1].set("y",{transition:{value:r.h-r.innerH,duration:r.duration}})},function(r,i,f,d,y,x){i[1].set("h",{transition:{value:r.innerH,duration:r.duration}})},function(r,i,f,d,y,x){i[1].set("color",r.primaryColor)},function(r,i,f,d,y,x){i[1].set("effects",[r.shader("radius",{radius:10})])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state(){return{h:200,innerH:0,duration:400}},hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size==="large"?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),U_=at.Component("Theming",{components:{Bar:O_,Toggle:N_},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),R.w=1920,R.h=1080,R.color={transition:i.$colors.get("bg")},s[0].populate(R),r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.y=1020,b.x=1160,b.size=28,b.color=i.$colors.get("color4"),b.content='Use "up", "down", "left" and "right" to change the appearance',b.__textnode=!0,s[1].populate(b),r=s[0];const _={};s[2]=this.element({parent:r||"root"},i),_.x={transition:(1920-i.$sizes.get("w"))/2},_.y={transition:(1080-i.$sizes.get("h"))/2},s[2].populate(_),r=s[2];const D={};s[3]=this.element({parent:r||"root"},i),D.x=-250,D.y=-100,D.src="assets/shadow.png",D.w=1e3,D.h=900,D.alpha=.5,s[3].populate(D),r=s[2];const w={};s[4]=this.element({parent:r||"root"},i),w.w={transition:i.$sizes.get("w")},w.h={transition:i.$sizes.get("h")},w.color=i.$colors.get("color1"),w.effects=[i.shader("radius",{radius:i.radius})],s[4].populate(w),r=s[4];const L={};s[5]=this.element({parent:r||"root"},i),L.w={transition:i.$sizes.get("w")},L.h=100,L.color=i.$colors.get("color2"),L.effects=[i.shader("radius",{radius:i.radius})],s[5].populate(L),r=s[4];const $={};s[6]=this.element({parent:r||"root"},i),$.w={transition:i.$sizes.get("w")},$.h=80,$.y=20,$.color=i.$colors.get("color2"),s[6].populate($),r=s[4];const B={};s[7]=this.element({parent:r||"root"},i),B.content=i.text,B.color=i.$colors.get("color3"),B.size=28,B.x=20,B.y=14,B.__textnode=!0,s[7].populate(B);const V=f.components&&f.components.Toggle||d.Toggle;r=s[4];const W={};s[8]=this.element({parent:r||"root"},i),W.x={transition:i.$sizes.get("w")-120},W.on=i.mode==="dark",W.bgColor=i.$colors.get("color1"),W.primaryColor="#22c55e";const X=[];if(typeof V<"u")for(let he in V.config.props)delete W[V.config.props[he]],X.push(V.config.props[he]);s[8].populate(W),r=s[8];const ie={};C={transition:i.$sizes.get("w")-120},Array.isArray(C)===!0&&(C=x(C).slice(0)),ie.x=C,C=i.mode==="dark",Array.isArray(C)===!0&&(C=x(C).slice(0)),ie.on=C,C=i.$colors.get("color1"),Array.isArray(C)===!0&&(C=x(C).slice(0)),ie.bgColor=C,ie.primaryColor="#22c55e",g=ie.is||"Toggle";let K;if(typeof g=="string"){if(K=f.components&&f.components[g]||d[g],!K)throw new Error('Component "Toggle" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(K=g);s[9]=K.call(null,{props:ie},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],i=s[9]):r=s[9][Symbol.for("children")][0],r=s[2];const pe={};s[10]=this.element({parent:r||"root"},i),pe.w=200,pe.h={transition:i.$sizes.get("block1.h")},pe.x=25,pe.y=140,pe.color=i.$colors.get("color2"),pe.effects=[i.shader("radius",{radius:i.radius/2})],s[10].populate(pe),r=s[2];const ue={};s[11]=this.element({parent:r||"root"},i),ue.w={transition:i.$sizes.get("block2.w")},ue.h=i.$sizes.get("block2.h"),ue.x=270,ue.y={transition:i.$sizes.get("block2.y")},ue.color=i.$colors.get("color2"),ue.effects=[i.shader("radius",{radius:i.radius/2})],s[11].populate(ue),r=s[2];const q={};s[12]=this.element({parent:r||"root"},i),q.x={transition:i.$sizes.get("graph.x")},q.y={transition:i.$sizes.get("graph.y")},q.w=i.$sizes.get("graph.w"),q.h=i.$sizes.get("graph.h"),q.color="0x00000000",s[12].populate(q),r=s[12];const A={};s[13]=this.element({parent:r||"root"},i),A.x={transition:i.$sizes.get("graph.offset")},A.y={transition:i.$sizes.get("graph.offset")},s[13].populate(A);const Y=f.components&&f.components.Bar||d.Bar;r=s[13];const le={};s[14]=this.element({parent:r||"root"},i),le.bgColor=i.$colors.get("color2"),le.primaryColor=i.$colors.get("color4"),le.size=i.$sizes.get("graph.size"),le.height=100,le.index=0;const ge=[];if(typeof Y<"u")for(let he in Y.config.props)delete le[Y.config.props[he]],ge.push(Y.config.props[he]);s[14].populate(le),r=s[14];const de={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),de.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),de.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),de.size=C,de.height=100,de.index=0,g=de.is||"Bar";let se;if(typeof g=="string"){if(se=f.components&&f.components[g]||d[g],!se)throw new Error('Component "Bar" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(se=g);s[15]=se.call(null,{props:de},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],i=s[15]):r=s[15][Symbol.for("children")][0];const re=f.components&&f.components.Bar||d.Bar;r=s[13];const oe={};s[16]=this.element({parent:r||"root"},i),oe.bgColor=i.$colors.get("color2"),oe.primaryColor=i.$colors.get("color4"),oe.size=i.$sizes.get("graph.size"),oe.height=140,oe.index=1;const Re=[];if(typeof re<"u")for(let he in re.config.props)delete oe[re.config.props[he]],Re.push(re.config.props[he]);s[16].populate(oe),r=s[16];const Ae={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Ae.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Ae.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Ae.size=C,Ae.height=140,Ae.index=1,g=Ae.is||"Bar";let Ie;if(typeof g=="string"){if(Ie=f.components&&f.components[g]||d[g],!Ie)throw new Error('Component "Bar" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ie=g);s[17]=Ie.call(null,{props:Ae},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],i=s[17]):r=s[17][Symbol.for("children")][0];const _e=f.components&&f.components.Bar||d.Bar;r=s[13];const Te={};s[18]=this.element({parent:r||"root"},i),Te.bgColor=i.$colors.get("color2"),Te.primaryColor=i.$colors.get("color4"),Te.size=i.$sizes.get("graph.size"),Te.height=170,Te.index=2;const je=[];if(typeof _e<"u")for(let he in _e.config.props)delete Te[_e.config.props[he]],je.push(_e.config.props[he]);s[18].populate(Te),r=s[18];const F={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),F.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),F.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),F.size=C,F.height=170,F.index=2,g=F.is||"Bar";let Ue;if(typeof g=="string"){if(Ue=f.components&&f.components[g]||d[g],!Ue)throw new Error('Component "Bar" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ue=g);s[19]=Ue.call(null,{props:F},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],i=s[19]):r=s[19][Symbol.for("children")][0];const He=f.components&&f.components.Bar||d.Bar;r=s[13];const Ge={};s[20]=this.element({parent:r||"root"},i),Ge.bgColor=i.$colors.get("color2"),Ge.primaryColor=i.$colors.get("color4"),Ge.size=i.$sizes.get("graph.size"),Ge.height=150,Ge.index=3;const Ce=[];if(typeof He<"u")for(let he in He.config.props)delete Ge[He.config.props[he]],Ce.push(He.config.props[he]);s[20].populate(Ge),r=s[20];const H={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),H.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),H.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),H.size=C,H.height=150,H.index=3,g=H.is||"Bar";let Ee;if(typeof g=="string"){if(Ee=f.components&&f.components[g]||d[g],!Ee)throw new Error('Component "Bar" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ee=g);s[21]=Ee.call(null,{props:H},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],i=s[21]):r=s[21][Symbol.for("children")][0];const ke=f.components&&f.components.Bar||d.Bar;r=s[13];const ce={};s[22]=this.element({parent:r||"root"},i),ce.bgColor=i.$colors.get("color2"),ce.primaryColor=i.$colors.get("color4"),ce.size=i.$sizes.get("graph.size"),ce.height=90,ce.index=4;const Xe=[];if(typeof ke<"u")for(let he in ke.config.props)delete ce[ke.config.props[he]],Xe.push(ke.config.props[he]);s[22].populate(ce),r=s[22];const be={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),be.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),be.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),be.size=C,be.height=90,be.index=4,g=be.is||"Bar";let Oe;if(typeof g=="string"){if(Oe=f.components&&f.components[g]||d[g],!Oe)throw new Error('Component "Bar" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Oe=g);return s[23]=Oe.call(null,{props:be},s[22],i),s[23][Symbol.for("slots")][0]?(r=s[23][Symbol.for("slots")][0],i=s[23]):r=s[23][Symbol.for("children")][0],s},effects:[function(r,i,f,d,y,x){i[0].set("color",{transition:r.$colors.get("bg")})},function(r,i,f,d,y,x){i[1].set("color",r.$colors.get("color4"))},function(r,i,f,d,y,x){i[2].set("x",{transition:(1920-r.$sizes.get("w"))/2})},function(r,i,f,d,y,x){i[2].set("y",{transition:(1080-r.$sizes.get("h"))/2})},function(r,i,f,d,y,x){i[4].set("w",{transition:r.$sizes.get("w")})},function(r,i,f,d,y,x){i[4].set("h",{transition:r.$sizes.get("h")})},function(r,i,f,d,y,x){i[4].set("color",r.$colors.get("color1"))},function(r,i,f,d,y,x){i[4].set("effects",[r.shader("radius",{radius:r.radius})])},function(r,i,f,d,y,x){i[5].set("w",{transition:r.$sizes.get("w")})},function(r,i,f,d,y,x){i[5].set("color",r.$colors.get("color2"))},function(r,i,f,d,y,x){i[5].set("effects",[r.shader("radius",{radius:r.radius})])},function(r,i,f,d,y,x){i[6].set("w",{transition:r.$sizes.get("w")})},function(r,i,f,d,y,x){i[6].set("color",r.$colors.get("color2"))},function(r,i,f,d,y,x){i[7].set("content",r.text)},function(r,i,f,d,y,x){i[7].set("color",r.$colors.get("color3"))},function(r,i,f,d,y,x){(typeof skip8>"u"||skip8.indexOf("x")===-1)&&i[8].set("x",{transition:r.$sizes.get("w")-120})},function(r,i,f,d,y,x){(typeof skip8>"u"||skip8.indexOf("on")===-1)&&i[8].set("on",r.mode==="dark")},function(r,i,f,d,y,x){(typeof skip8>"u"||skip8.indexOf("bgColor")===-1)&&i[8].set("bgColor",r.$colors.get("color1"))},function(r,i,f,d,y,x){i[9][Symbol.for("props")].x={transition:r.$sizes.get("w")-120}},function(r,i,f,d,y,x){i[9][Symbol.for("props")].on=r.mode==="dark"},function(r,i,f,d,y,x){i[9][Symbol.for("props")].bgColor=r.$colors.get("color1")},function(r,i,f,d,y,x){i[10].set("h",{transition:r.$sizes.get("block1.h")})},function(r,i,f,d,y,x){i[10].set("color",r.$colors.get("color2"))},function(r,i,f,d,y,x){i[10].set("effects",[r.shader("radius",{radius:r.radius/2})])},function(r,i,f,d,y,x){i[11].set("w",{transition:r.$sizes.get("block2.w")})},function(r,i,f,d,y,x){i[11].set("h",r.$sizes.get("block2.h"))},function(r,i,f,d,y,x){i[11].set("y",{transition:r.$sizes.get("block2.y")})},function(r,i,f,d,y,x){i[11].set("color",r.$colors.get("color2"))},function(r,i,f,d,y,x){i[11].set("effects",[r.shader("radius",{radius:r.radius/2})])},function(r,i,f,d,y,x){i[12].set("x",{transition:r.$sizes.get("graph.x")})},function(r,i,f,d,y,x){i[12].set("y",{transition:r.$sizes.get("graph.y")})},function(r,i,f,d,y,x){i[12].set("w",r.$sizes.get("graph.w"))},function(r,i,f,d,y,x){i[12].set("h",r.$sizes.get("graph.h"))},function(r,i,f,d,y,x){i[13].set("x",{transition:r.$sizes.get("graph.offset")})},function(r,i,f,d,y,x){i[13].set("y",{transition:r.$sizes.get("graph.offset")})},function(r,i,f,d,y,x){(typeof skip14>"u"||skip14.indexOf("bgColor")===-1)&&i[14].set("bgColor",r.$colors.get("color2"))},function(r,i,f,d,y,x){(typeof skip14>"u"||skip14.indexOf("primaryColor")===-1)&&i[14].set("primaryColor",r.$colors.get("color4"))},function(r,i,f,d,y,x){(typeof skip14>"u"||skip14.indexOf("size")===-1)&&i[14].set("size",r.$sizes.get("graph.size"))},function(r,i,f,d,y,x){i[15][Symbol.for("props")].bgColor=r.$colors.get("color2")},function(r,i,f,d,y,x){i[15][Symbol.for("props")].primaryColor=r.$colors.get("color4")},function(r,i,f,d,y,x){i[15][Symbol.for("props")].size=r.$sizes.get("graph.size")},function(r,i,f,d,y,x){(typeof skip16>"u"||skip16.indexOf("bgColor")===-1)&&i[16].set("bgColor",r.$colors.get("color2"))},function(r,i,f,d,y,x){(typeof skip16>"u"||skip16.indexOf("primaryColor")===-1)&&i[16].set("primaryColor",r.$colors.get("color4"))},function(r,i,f,d,y,x){(typeof skip16>"u"||skip16.indexOf("size")===-1)&&i[16].set("size",r.$sizes.get("graph.size"))},function(r,i,f,d,y,x){i[17][Symbol.for("props")].bgColor=r.$colors.get("color2")},function(r,i,f,d,y,x){i[17][Symbol.for("props")].primaryColor=r.$colors.get("color4")},function(r,i,f,d,y,x){i[17][Symbol.for("props")].size=r.$sizes.get("graph.size")},function(r,i,f,d,y,x){(typeof skip18>"u"||skip18.indexOf("bgColor")===-1)&&i[18].set("bgColor",r.$colors.get("color2"))},function(r,i,f,d,y,x){(typeof skip18>"u"||skip18.indexOf("primaryColor")===-1)&&i[18].set("primaryColor",r.$colors.get("color4"))},function(r,i,f,d,y,x){(typeof skip18>"u"||skip18.indexOf("size")===-1)&&i[18].set("size",r.$sizes.get("graph.size"))},function(r,i,f,d,y,x){i[19][Symbol.for("props")].bgColor=r.$colors.get("color2")},function(r,i,f,d,y,x){i[19][Symbol.for("props")].primaryColor=r.$colors.get("color4")},function(r,i,f,d,y,x){i[19][Symbol.for("props")].size=r.$sizes.get("graph.size")},function(r,i,f,d,y,x){(typeof skip20>"u"||skip20.indexOf("bgColor")===-1)&&i[20].set("bgColor",r.$colors.get("color2"))},function(r,i,f,d,y,x){(typeof skip20>"u"||skip20.indexOf("primaryColor")===-1)&&i[20].set("primaryColor",r.$colors.get("color4"))},function(r,i,f,d,y,x){(typeof skip20>"u"||skip20.indexOf("size")===-1)&&i[20].set("size",r.$sizes.get("graph.size"))},function(r,i,f,d,y,x){i[21][Symbol.for("props")].bgColor=r.$colors.get("color2")},function(r,i,f,d,y,x){i[21][Symbol.for("props")].primaryColor=r.$colors.get("color4")},function(r,i,f,d,y,x){i[21][Symbol.for("props")].size=r.$sizes.get("graph.size")},function(r,i,f,d,y,x){(typeof skip22>"u"||skip22.indexOf("bgColor")===-1)&&i[22].set("bgColor",r.$colors.get("color2"))},function(r,i,f,d,y,x){(typeof skip22>"u"||skip22.indexOf("primaryColor")===-1)&&i[22].set("primaryColor",r.$colors.get("color4"))},function(r,i,f,d,y,x){(typeof skip22>"u"||skip22.indexOf("size")===-1)&&i[22].set("size",r.$sizes.get("graph.size"))},function(r,i,f,d,y,x){i[23][Symbol.for("props")].bgColor=r.$colors.get("color2")},function(r,i,f,d,y,x){i[23][Symbol.for("props")].primaryColor=r.$colors.get("color4")},function(r,i,f,d,y,x){i[23][Symbol.for("props")].size=r.$sizes.get("graph.size")}],context:{}},state(){return{mode:"dark",sizes:"small",radius:20}},watch:{mode(h){this.$colors.set(h)},sizes(h){this.$sizes.set(h)}},computed:{text(){return this.mode==="dark"?"Dark mode":"Light mode"}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.sizes="large"},down(){this.sizes="small"}}}),B_="ABC123",j_="https://8b4fa39d.lightningjs.workers.dev";let wC,SC;const F_="w185",$_={headers:{"Content-Type":"application/json",Authorization:"Bearer "+B_}};function IS(h,r=F_){return SC+r+h}function z_(...h){return wC?hg(...h):CC().then(()=>hg(...h))}function hg(h,r={}){return fetch(j_+h,{...$_,...r}).then(i=>i.json())}function CC(){return hg("/configuration").then(h=>(wC=h,SC=h.images.secure_base_url,h))}const Tg={get:z_,loadConfig:CC},MS=h=>Tg.get(`/${h}/popular`).then(TC),TC=h=>h.results.filter(i=>!i.adult).map(i=>({poster:IS(i.poster_path||i.profile_path),background:IS(i.backdrop_path,"w1280"),identifier:i.id,title:i.title||i.name,overview:i.overview})),Fl=h=>{const r=Array.isArray(h)?h:[h];return V_("movie").then(({genres:i})=>{let f=[];return i.forEach(d=>{r.includes(d.name)&&f.push(d.id)}),Tg.get(`/discover/movie?with_genres=${f.join()}`).then(TC)})},V_=h=>Tg.get(`/genre/${h}/list`),H_=at.Component("Poster",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=1280,g.h=720,g.x=i.x,g.src=i.item.background,g.color="{top: '0xffffffff', bottom: '0x000000ff'}",g.scale={transition:{value:i.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},g._effects=[i.shader("radius",{radius:8})],s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(C),r=s[1];const R={};s[2]=this.element({parent:r||"root"},i),R.w=185,R.h=278,R.x=54,R.y=220,R.src=i.item.poster,s[2].populate(R),r=s[1];const b={};s[3]=this.element({parent:r||"root"},i),b.content=i.item.title,b.font="raleway",b.y=520,b.x=54,b.size=64,b.wordwrap=1e3,b.maxlines=1,b.__textnode=!0,s[3].populate(b),r=s[1];const _={};return s[4]=this.element({parent:r||"root"},i),_.content=i.item.overview,_.size=21,_.y=620,_.x=60,_.color="0xccccccff",_.wordwrap=1e3,_.maxlines=2,_.lineheight=36,_.__textnode=!0,s[4].populate(_),s},effects:[function(r,i,f,d,y,x){i[0].set("src",r.item.background)},function(r,i,f,d,y,x){i[0].set("scale",{transition:{value:r.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,f,d,y,x){i[0].set("_effects",[r.shader("radius",{radius:8})])},function(r,i,f,d,y,x){i[1].set("alpha",{transition:{value:r.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,f,d,y,x){i[2].set("src",r.item.poster)},function(r,i,f,d,y,x){i[3].set("content",r.item.title)},function(r,i,f,d,y,x){i[4].set("content",r.item.overview)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,zIndex:1,alpha:0}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1},unfocus(){this.scale=1,this.alpha=0}}}),G_=at.Component("Poster",{code:{render:function(r,i,f,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.w=185,g.h=278,g.x=i.x,g.src=i.item.poster,g.scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},g._effects=[i.shader("radius",{radius:8})],s[0].populate(g),s},effects:[function(r,i,f,d,y,x){i[0].set("src",r.item.poster)},function(r,i,f,d,y,x){i[0].set("scale",{transition:{value:r.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,f,d,y,x){i[0].set("_effects",[r.shader("radius",{radius:8})])}],context:{}},props:["src","index","item","width"],state(){return{scale:1,color:"#333"}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.color="#fff",this.scale=1.1},unfocus(){this.color="#333",this.scale=1}}}),X_=at.Component("PosterTitle",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=185,g.h=278,g.x=i.x,g.src=i.item.poster,g.scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},g._effects=[i.shader("radius",{radius:8})],s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.x=10,C.y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},C.alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(C),r=s[1];const R={};return s[2]=this.element({parent:r||"root"},i),R.content=i.item.title,R.font="raleway",R.size=22,R.wordwrap=185,R.maxlines=2,R.lineheight=28,R.__textnode=!0,s[2].populate(R),s},effects:[function(r,i,f,d,y,x){i[0].set("src",r.item.poster)},function(r,i,f,d,y,x){i[0].set("scale",{transition:{value:r.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,f,d,y,x){i[0].set("_effects",[r.shader("radius",{radius:8})])},function(r,i,f,d,y,x){i[1].set("y",{transition:{value:r.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,f,d,y,x){i[1].set("alpha",{transition:{value:r.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(r,i,f,d,y,x){i[2].set("content",r.item.title)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,alpha:0,y:278}},computed:{x(){return this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1,this.y=288},unfocus(){this.scale=1,this.alpha=0,this.y=278}}}),W_=at.Component("TmdbRow",{components:{Hero:H_,Poster:G_,PosterTitle:X_},code:{render:function(r,i,f,d,y,x){const s=[];let g;const C={};s[0]=this.element({parent:r||"root"},i),s[0].populate(C),r=s[0];const R={};s[1]=this.element({parent:r||"root"},i),R.x={transition:{value:i.x,duration:300,easing:"ease-in-out"}},R.y=80,s[1].populate(R),r=s[1];const b=[],_=(D=[],w,L)=>{const $=x(D),B=new Set;let V=$.length;for(;V--;){const ie=$[V];B.add(""+ie.identifier)}let W=L.length;for(;W--;)if(B.has(L[W])===!1){const ie=L[W];w[2][ie]&&w[2][ie].destroy(),delete w[2][ie],w[3][ie]&&w[3][ie].destroy(),delete w[3][ie]}L.length=0;const X=$.length;for(let ie=0;ie<X;ie++){const K=Object.create(i);r=w[1],K.index=ie,K.item=$[ie],K.key=""+K.item.identifier,K.__ref="poster"+ie,L.push(K.key);const pe=f.components&&f.components.Component||d.Component;w[2]===void 0&&(w[2]={});const ue={};w[2][K.key]===void 0&&(w[2][K.key]=this.element({parent:r||"root"},i)),ue.is=K.type,ue.index=K.index,ue.item=K.item,ue.ref=K.__ref,ue.width=K.width;const q=[];if(typeof pe<"u")for(let Y in pe.config.props)delete ue[pe.config.props[Y]],q.push(pe.config.props[Y]);w[2][K.key].nodeId===void 0&&w[2][K.key].populate(ue),w[3]===void 0&&(w[3]={}),r=w[2][K.key];const A={};if(w[3][K.key]===void 0){A.is=K.type,A.index=K.index,A.item=K.item,A.ref=K.__ref,A.width=K.width,g=A.is||"Component";let Y;if(typeof g=="string"){if(Y=f.components&&f.components[g]||d[g],!Y)throw new Error('Component "Component" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Y=g);w[3][K.key]=Y.call(null,{props:A},w[2][K.key],i),w[3][K.key][Symbol.for("slots")][0]?(r=w[3][K.key][Symbol.for("slots")][0],i=w[3][K.key]):r=w[3][K.key][Symbol.for("children")][0]}}};return y(()=>{_(i.items,s,b)},"items"),s},effects:[function(r,i,f,d,y,x){i[1].set("x",{transition:{value:r.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state(){return{focused:0,offset:0}},hooks:{focus(){this.$trigger("focused")}},computed:{x(){return 150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused(h){const r=this.$select("poster"+h);r&&r.$focus&&(r.$focus(),this.$emit("posterSelect",this.items[h]))}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),Y_=at.Component("Background",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.src=i.bg1,C.w=1920,C.h=1080,C.color="{top: '0xffffffff', bottom: '0x000000ff'}",C.alpha={transition:{value:i.alpha1,duration:400,easing:"ease-in"}},s[1].populate(C),r=s[0];const R={};s[2]=this.element({parent:r||"root"},i),R.src=i.bg2,R.w=1920,R.h=1080,R.color="{top: '0xffffffff', bottom: '0x000000ff'}",R.alpha={transition:{value:i.alpha2,duration:400,easing:"ease-in"}},s[2].populate(R),r=s[0];const b={};return s[3]=this.element({parent:r||"root"},i),b.w=1920,b.h=1080,b.src="assets/gradient.png",b.color="0x8866ddff",b.alpha=.8,s[3].populate(b),s},effects:[function(r,i,f,d,y,x){i[1].set("src",r.bg1)},function(r,i,f,d,y,x){i[1].set("alpha",{transition:{value:r.alpha1,duration:400,easing:"ease-in"}})},function(r,i,f,d,y,x){i[2].set("src",r.bg2)},function(r,i,f,d,y,x){i[2].set("alpha",{transition:{value:r.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["src"],state(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{src(h){this.counter=(this.counter+1)%2,this.counter===0?(this.bg1=h,this.alpha1=.8,this.alpha2=0):(this.bg2=h,this.alpha1=0,this.alpha2=.8)}}}),q_=at.Component("TMdb",{components:{Background:Y_,TmdbRow:W_},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),R.w=1920,R.h=1080,R.color="0x000000ff",s[0].populate(R);const b=f.components&&f.components.Background||d.Background;r=s[0];const _={};s[1]=this.element({parent:r||"root"},i),_.src=i.src;const D=[];if(typeof b<"u")for(let ue in b.config.props)delete _[b.config.props[ue]],D.push(b.config.props[ue]);s[1].populate(_),r=s[1];const w={};C=i.src,Array.isArray(C)===!0&&(C=x(C).slice(0)),w.src=C,g=w.is||"Background";let L;if(typeof g=="string"){if(L=f.components&&f.components[g]||d[g],!L)throw new Error('Component "Background" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(L=g);s[2]=L.call(null,{props:w},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0],r=s[0];const $={};s[3]=this.element({parent:r||"root"},i),s[3].populate($),r=s[3];const B={};s[4]=this.element({parent:r||"root"},i),B.y={transition:{value:i.contentY,duration:i.duration}},B.alpha={transition:{value:i.alpha,duration:i.duration}},s[4].populate(B),r=s[4];const V={};s[5]=this.element({parent:r||"root"},i),V.src="assets/logo.png",V.x=140,V.y=90,V.w=243,V.h=52,s[5].populate(V),r=s[4];const W={};s[6]=this.element({parent:r||"root"},i),W.content=i.title,W.font="raleway",W.size=80,W.x=140,W.y=300,W.wordwrap=1e3,W["@loaded"]=i.positionText&&i.positionText.bind(i),W.maxlines=1,W.__textnode=!0,s[6].populate(W),r=s[4];const X={};s[7]=this.element({parent:r||"root"},i),X.content=i.overview,X.wordwrap=880,X.x=140,X.y=430,X.lineheight=40,X.maxlines=3,X.__textnode=!0,s[7].populate(X),r=s[3];const ie={};s[8]=this.element({parent:r||"root"},i),ie.y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[8].populate(ie),r=s[8];const K=[],pe=(ue=[],q,A)=>{const Y=x(ue),le=new Set;let ge=Y.length;for(;ge--;){const re=Y[ge];le.add(""+re.title)}let de=A.length;for(;de--;)if(le.has(A[de])===!1){const re=A[de];q[9][re]&&q[9][re].destroy(),delete q[9][re],q[10][re]&&q[10][re].destroy(),delete q[10][re]}A.length=0;const se=Y.length;for(let re=0;re<se;re++){const oe=Object.create(i);r=q[8],oe.index=re,oe.row=Y[re],oe.key=""+oe.row.title,oe.__ref="row"+re,A.push(oe.key);const Re=f.components&&f.components.TmdbRow||d.TmdbRow;q[9]===void 0&&(q[9]={});const Ae={};q[9][oe.key]===void 0&&(q[9][oe.key]=this.element({parent:r||"root"},i)),Ae.title=oe.row.title,Ae.items=oe.row.items,Ae.type=oe.row.type,Ae.width=oe.row.width,Ae.y=oe.row.y,Ae.ref=oe.__ref;const Ie=[];if(typeof Re<"u")for(let Ue in Re.config.props)delete Ae[Re.config.props[Ue]],Ie.push(Re.config.props[Ue]);q[9][oe.key].nodeId===void 0&&q[9][oe.key].populate(Ae),q[10]===void 0&&(q[10]={}),r=q[9][oe.key];const _e={};if(q[10][oe.key]===void 0){_e.title=oe.row.title,C=oe.row.items,Array.isArray(C)===!0&&(C=x(C).slice(0)),_e.items=C,C=oe.row.type,Array.isArray(C)===!0&&(C=x(C).slice(0)),_e.type=C,C=oe.row.width,Array.isArray(C)===!0&&(C=x(C).slice(0)),_e.width=C,_e.y=oe.row.y,_e.ref=oe.__ref,g=_e.is||"TmdbRow";let Ue;if(typeof g=="string"){if(Ue=f.components&&f.components[g]||d[g],!Ue)throw new Error('Component "TmdbRow" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ue=g);q[10][oe.key]=Ue.call(null,{props:_e},q[9][oe.key],i),q[10][oe.key][Symbol.for("slots")][0]?(r=q[10][oe.key][Symbol.for("slots")][0],i=q[10][oe.key]):r=q[10][oe.key][Symbol.for("children")][0]}let Te=()=>{(typeof Ie>"u"||Ie.indexOf("items")===-1)&&q[9][oe.key].set("items",oe.row.items)};y(Te,null),i[Symbol.for("effects")].push(Te);let je=()=>{(typeof Ie>"u"||Ie.indexOf("type")===-1)&&q[9][oe.key].set("type",oe.row.type)};y(je,null),i[Symbol.for("effects")].push(je);let F=()=>{(typeof Ie>"u"||Ie.indexOf("width")===-1)&&q[9][oe.key].set("width",oe.row.width)};y(F,null),i[Symbol.for("effects")].push(F),q[10][oe.key][Symbol.for("props")].items=oe.row.items,q[10][oe.key][Symbol.for("props")].type=oe.row.type,q[10][oe.key][Symbol.for("props")].width=oe.row.width}};return y(()=>{pe(i.rows,s,K)},"rows"),s},effects:[function(r,i,f,d,y,x){(typeof skip1>"u"||skip1.indexOf("src")===-1)&&i[1].set("src",r.src)},function(r,i,f,d,y,x){i[2][Symbol.for("props")].src=r.src},function(r,i,f,d,y,x){i[4].set("y",{transition:{value:r.contentY,duration:r.duration}})},function(r,i,f,d,y,x){i[4].set("alpha",{transition:{value:r.alpha,duration:r.duration}})},function(r,i,f,d,y,x){i[6].set("content",r.title)},function(r,i,f,d,y,x){i[7].set("content",r.overview)},function(r,i,f,d,y,x){i[8].set("y",{transition:{value:r.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state(){return{rows:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}},watch:{focused(h){const r=this.$select("row"+h);r&&r.$focus&&r.$focus()}},hooks:{async init(){this.rows=[{title:"Popular Movies",items:await MS("movie"),type:"Poster",width:215,y:0},{title:"Best Western movies",items:await Fl(["Western"]),type:"Hero",width:1370,y:358},{title:"Best Comedy movies",items:await Fl(["Comedy"]),type:"PosterTitle",width:215,y:1158},{title:"Popular TV shows",items:await MS("tv"),type:"PosterTitle",width:215,y:1536},{title:"Best Adventure and Action movies",items:await Fl(["adventure","action"]),type:"Hero",width:1370,y:1914},{title:"Best Documentaries",items:await Fl("Documentary"),type:"PosterTitle",width:215,y:2714},{title:"Best Western movies 2",items:await Fl("Western"),type:"PosterTitle",width:215,y:3092}],this.focused=0},ready(){this.$listen("posterSelect",h=>{this.focused===0&&(this.src=h.background,this.title=h.title,this.overview=h.overview)})},focus(){this.$trigger("focused")}},input:{up(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0},down(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0}}}),K_=at.Component("MenuSprite",{code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R),r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.src="assets/menusprite.png",b.x=748,b.y=120,b.w=425,b.h=340,s[1].populate(b),r=s[0];const _={};s[2]=this.element({parent:r||"root"},i),_.y=680,_.x=560,s[2].populate(_);const D=f.components&&f.components.Sprite||d.Sprite;r=s[2];const w={};s[3]=this.element({parent:r||"root"},i),w.image="assets/menusprite.png",w.x=0,w.w=140,w.h=140,w.map=i.map,w.frame=i.icon1;const L=[];if(typeof D<"u")for(let oe in D.config.props)delete w[D.config.props[oe]],L.push(D.config.props[oe]);s[3].populate(w),r=s[3];const $={};$.image="assets/menusprite.png",$.x=0,$.w=140,$.h=140,$.map=i.map,C=i.icon1,Array.isArray(C)===!0&&(C=x(C).slice(0)),$.frame=C,g=$.is||"Sprite";let B;if(typeof g=="string"){if(B=f.components&&f.components[g]||d[g],!B)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(B=g);s[4]=B.call(null,{props:$},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0];const V=f.components&&f.components.Sprite||d.Sprite;r=s[2];const W={};s[5]=this.element({parent:r||"root"},i),W.image="assets/menusprite.png",W.x=220,W.w=140,W.h=140,W.map=i.map,W.frame="icon2";const X=[];if(typeof V<"u")for(let oe in V.config.props)delete W[V.config.props[oe]],X.push(V.config.props[oe]);s[5].populate(W),r=s[5];const ie={};ie.image="assets/menusprite.png",ie.x=220,ie.w=140,ie.h=140,ie.map=i.map,ie.frame="icon2",g=ie.is||"Sprite";let K;if(typeof g=="string"){if(K=f.components&&f.components[g]||d[g],!K)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(K=g);s[6]=K.call(null,{props:ie},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],i=s[6]):r=s[6][Symbol.for("children")][0];const pe=f.components&&f.components.Sprite||d.Sprite;r=s[2];const ue={};s[7]=this.element({parent:r||"root"},i),ue.image="assets/menusprite.png",ue.x=440,ue.w=140,ue.h=140,ue.map=i.map,ue.frame="icon3";const q=[];if(typeof pe<"u")for(let oe in pe.config.props)delete ue[pe.config.props[oe]],q.push(pe.config.props[oe]);s[7].populate(ue),r=s[7];const A={};A.image="assets/menusprite.png",A.x=440,A.w=140,A.h=140,A.map=i.map,A.frame="icon3",g=A.is||"Sprite";let Y;if(typeof g=="string"){if(Y=f.components&&f.components[g]||d[g],!Y)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Y=g);s[8]=Y.call(null,{props:A},s[7],i),s[8][Symbol.for("slots")][0]?(r=s[8][Symbol.for("slots")][0],i=s[8]):r=s[8][Symbol.for("children")][0];const le=f.components&&f.components.Sprite||d.Sprite;r=s[2];const ge={};s[9]=this.element({parent:r||"root"},i),ge.image="assets/menusprite.png",ge.x=660,ge.w=140,ge.h=140,ge.map=i.map,ge.frame="icon4_unfocus";const de=[];if(typeof le<"u")for(let oe in le.config.props)delete ge[le.config.props[oe]],de.push(le.config.props[oe]);s[9].populate(ge),r=s[9];const se={};se.image="assets/menusprite.png",se.x=660,se.w=140,se.h=140,se.map=i.map,se.frame="icon4_unfocus",g=se.is||"Sprite";let re;if(typeof g=="string"){if(re=f.components&&f.components[g]||d[g],!re)throw new Error('Component "Sprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(re=g);return s[10]=re.call(null,{props:se},s[9],i),s[10][Symbol.for("slots")][0]?(r=s[10][Symbol.for("slots")][0],i=s[10]):r=s[10][Symbol.for("children")][0],s},effects:[function(r,i,f,d,y,x){(typeof skip3>"u"||skip3.indexOf("frame")===-1)&&i[3].set("frame",r.icon1)},function(r,i,f,d,y,x){i[4][Symbol.for("props")].frame=r.icon1}],context:{}},state(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready(){this.$setInterval(()=>{this.icon1=this.icon1==="icon1_unfocus"?"icon1_focus":"icon1_unfocus"},2e3)}}}),Bc=["menu"],Z_=at.Component("Sprites",{components:{MenuSprite:K_},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R);const b=f.components&&f.components.MenuSprite||d.MenuSprite;r=s[0];const _={};s[1]=this.element({parent:r||"root"},i),_.show=i.currentSprite==="menu";const D=[];if(typeof b<"u")for(let $ in b.config.props)delete _[b.config.props[$]],D.push(b.config.props[$]);s[1].populate(_),r=s[1];const w={};C=i.currentSprite==="menu",Array.isArray(C)===!0&&(C=x(C).slice(0)),w.show=C,g=w.is||"MenuSprite";let L;if(typeof g=="string"){if(L=f.components&&f.components[g]||d[g],!L)throw new Error('Component "MenuSprite" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(L=g);return s[2]=L.call(null,{props:w},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0],s},effects:[function(r,i,f,d,y,x){(typeof skip1>"u"||skip1.indexOf("show")===-1)&&i[1].set("show",r.currentSprite==="menu")},function(r,i,f,d,y,x){i[2][Symbol.for("props")].show=r.currentSprite==="menu"}],context:{}},state(){return{currentSprite:"menu"}},input:{down(){const h=Bc.indexOf(this.currentSprite);h<Bc.length-1?this.currentSprite=Bc[h+1]:this.currentSprite=Bc[0]}}}),lh=at.Component("Button",{code:{render:function(r,i,f,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.w=300,g.h=80,g.color=i.color||"0xff0000ff",g.effects=[i.shader("radius",{radius:20})],g.alpha={transition:i.alpha},g.scale={transition:i.scale},g.rotation=i.rotate,s[0].populate(g),s},effects:[function(r,i,f,d,y,x){i[0].set("effects",[r.shader("radius",{radius:20})])},function(r,i,f,d,y,x){i[0].set("alpha",{transition:r.alpha})},function(r,i,f,d,y,x){i[0].set("scale",{transition:r.scale})},function(r,i,f,d,y,x){i[0].set("rotation",r.rotate)}],context:{}},props:["color"],state(){return{alpha:.4,scale:1,rotate:0}},hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=this.scale===1?1.2:1},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.rotate=0}},input:{enter(){this.rotate=this.rotate===0?-4:0,this.scale=this.scale===1.2?1.3:1.2}}}),Q_=at.Component("Menu",{components:{Button:lh},code:{render:function(r,i,f,d,y,x){const s=[];let g;const C={};s[0]=this.element({parent:r||"root"},i),C.x={transition:i.x},C.w=400,C.h=1080,C.color="{right: '0x64748baa', left: '0x475569aa'}",s[0].populate(C),r=s[0];const R={};s[1]=this.element({parent:r||"root"},i),R.x=50,R.y=40,s[1].populate(R);const b=f.components&&f.components.Button||d.Button;r=s[1];const _={};s[2]=this.element({parent:r||"root"},i),_.color="0xe4e4e7ff",_.ref="menu1";const D=[];if(typeof b<"u")for(let se in b.config.props)delete _[b.config.props[se]],D.push(b.config.props[se]);s[2].populate(_),r=s[2];const w={};w.color="0xe4e4e7ff",w.ref="menu1",g=w.is||"Button";let L;if(typeof g=="string"){if(L=f.components&&f.components[g]||d[g],!L)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(L=g);s[3]=L.call(null,{props:w},s[2],i),s[3][Symbol.for("slots")][0]?(r=s[3][Symbol.for("slots")][0],i=s[3]):r=s[3][Symbol.for("children")][0];const $=f.components&&f.components.Button||d.Button;r=s[1];const B={};s[4]=this.element({parent:r||"root"},i),B.color="0xe4e4e7ff",B.y=100,B.ref="menu2";const V=[];if(typeof $<"u")for(let se in $.config.props)delete B[$.config.props[se]],V.push($.config.props[se]);s[4].populate(B),r=s[4];const W={};W.color="0xe4e4e7ff",W.y=100,W.ref="menu2",g=W.is||"Button";let X;if(typeof g=="string"){if(X=f.components&&f.components[g]||d[g],!X)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(X=g);s[5]=X.call(null,{props:W},s[4],i),s[5][Symbol.for("slots")][0]?(r=s[5][Symbol.for("slots")][0],i=s[5]):r=s[5][Symbol.for("children")][0];const ie=f.components&&f.components.Button||d.Button;r=s[1];const K={};s[6]=this.element({parent:r||"root"},i),K.color="0xe4e4e7ff",K.y=200,K.ref="menu3";const pe=[];if(typeof ie<"u")for(let se in ie.config.props)delete K[ie.config.props[se]],pe.push(ie.config.props[se]);s[6].populate(K),r=s[6];const ue={};ue.color="0xe4e4e7ff",ue.y=200,ue.ref="menu3",g=ue.is||"Button";let q;if(typeof g=="string"){if(q=f.components&&f.components[g]||d[g],!q)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(q=g);s[7]=q.call(null,{props:ue},s[6],i),s[7][Symbol.for("slots")][0]?(r=s[7][Symbol.for("slots")][0],i=s[7]):r=s[7][Symbol.for("children")][0];const A=f.components&&f.components.Button||d.Button;r=s[1];const Y={};s[8]=this.element({parent:r||"root"},i),Y.color="0xe4e4e7ff",Y.y=300,Y.ref="menu4";const le=[];if(typeof A<"u")for(let se in A.config.props)delete Y[A.config.props[se]],le.push(A.config.props[se]);s[8].populate(Y),r=s[8];const ge={};ge.color="0xe4e4e7ff",ge.y=300,ge.ref="menu4",g=ge.is||"Button";let de;if(typeof g=="string"){if(de=f.components&&f.components[g]||d[g],!de)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(de=g);return s[9]=de.call(null,{props:ge},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],i=s[9]):r=s[9][Symbol.for("children")][0],s},effects:[function(r,i,f,d,y,x){i[0].set("x",{transition:r.x})}],context:{}},state(){return{x:-360,focused:1}},hooks:{focus(){this.$trigger("focused"),this.x=0}},watch:{focused(){const h=this.$select(`menu${this.focused}`);h&&h.$focus&&h.$focus()}},input:{right(){this.parent.$focus(),this.x=-360},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)},left(){}}}),J_=at.Component("FocusHandling",{components:{Menu:Q_,Button:lh},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R),r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.x=300,b.y=150,s[1].populate(b);const _=f.components&&f.components.Button||d.Button;r=s[1];const D={};s[2]=this.element({parent:r||"root"},i),D.color="0xef4444ff",D.x=0,D.ref="button1",D.z=i.focused===1?1:0;const w=[];if(typeof _<"u")for(let vt in _.config.props)delete D[_.config.props[vt]],w.push(_.config.props[vt]);s[2].populate(D),r=s[2];const L={};L.color="0xef4444ff",L.x=0,L.ref="button1",C=i.focused===1?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),L.z=C,g=L.is||"Button";let $;if(typeof g=="string"){if($=f.components&&f.components[g]||d[g],!$)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&($=g);s[3]=$.call(null,{props:L},s[2],i),s[3][Symbol.for("slots")][0]?(r=s[3][Symbol.for("slots")][0],i=s[3]):r=s[3][Symbol.for("children")][0];const B=f.components&&f.components.Button||d.Button;r=s[1];const V={};s[4]=this.element({parent:r||"root"},i),V.color="0xf97316ff",V.x=320,V.ref="button2",V.z=i.focused===2?1:0;const W=[];if(typeof B<"u")for(let vt in B.config.props)delete V[B.config.props[vt]],W.push(B.config.props[vt]);s[4].populate(V),r=s[4];const X={};X.color="0xf97316ff",X.x=320,X.ref="button2",C=i.focused===2?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),X.z=C,g=X.is||"Button";let ie;if(typeof g=="string"){if(ie=f.components&&f.components[g]||d[g],!ie)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(ie=g);s[5]=ie.call(null,{props:X},s[4],i),s[5][Symbol.for("slots")][0]?(r=s[5][Symbol.for("slots")][0],i=s[5]):r=s[5][Symbol.for("children")][0];const K=f.components&&f.components.Button||d.Button;r=s[1];const pe={};s[6]=this.element({parent:r||"root"},i),pe.color="0x84cc16ff",pe.x=640,pe.ref="button3",pe.z=i.focused===3?1:0;const ue=[];if(typeof K<"u")for(let vt in K.config.props)delete pe[K.config.props[vt]],ue.push(K.config.props[vt]);s[6].populate(pe),r=s[6];const q={};q.color="0x84cc16ff",q.x=640,q.ref="button3",C=i.focused===3?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),q.z=C,g=q.is||"Button";let A;if(typeof g=="string"){if(A=f.components&&f.components[g]||d[g],!A)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(A=g);s[7]=A.call(null,{props:q},s[6],i),s[7][Symbol.for("slots")][0]?(r=s[7][Symbol.for("slots")][0],i=s[7]):r=s[7][Symbol.for("children")][0];const Y=f.components&&f.components.Button||d.Button;r=s[1];const le={};s[8]=this.element({parent:r||"root"},i),le.color="0x10b981ff",le.x=0,le.y=100,le.ref="button4",le.z=i.focused===4?1:0;const ge=[];if(typeof Y<"u")for(let vt in Y.config.props)delete le[Y.config.props[vt]],ge.push(Y.config.props[vt]);s[8].populate(le),r=s[8];const de={};de.color="0x10b981ff",de.x=0,de.y=100,de.ref="button4",C=i.focused===4?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),de.z=C,g=de.is||"Button";let se;if(typeof g=="string"){if(se=f.components&&f.components[g]||d[g],!se)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(se=g);s[9]=se.call(null,{props:de},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],i=s[9]):r=s[9][Symbol.for("children")][0];const re=f.components&&f.components.Button||d.Button;r=s[1];const oe={};s[10]=this.element({parent:r||"root"},i),oe.color="0x06b6d4ff",oe.y=100,oe.x=320,oe.ref="button5",oe.z=i.focused===5?1:0;const Re=[];if(typeof re<"u")for(let vt in re.config.props)delete oe[re.config.props[vt]],Re.push(re.config.props[vt]);s[10].populate(oe),r=s[10];const Ae={};Ae.color="0x06b6d4ff",Ae.y=100,Ae.x=320,Ae.ref="button5",C=i.focused===5?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ae.z=C,g=Ae.is||"Button";let Ie;if(typeof g=="string"){if(Ie=f.components&&f.components[g]||d[g],!Ie)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ie=g);s[11]=Ie.call(null,{props:Ae},s[10],i),s[11][Symbol.for("slots")][0]?(r=s[11][Symbol.for("slots")][0],i=s[11]):r=s[11][Symbol.for("children")][0];const _e=f.components&&f.components.Button||d.Button;r=s[1];const Te={};s[12]=this.element({parent:r||"root"},i),Te.color="0x3b82f6ff",Te.y=100,Te.x=640,Te.ref="button6",Te.z=i.focused===6?1:0;const je=[];if(typeof _e<"u")for(let vt in _e.config.props)delete Te[_e.config.props[vt]],je.push(_e.config.props[vt]);s[12].populate(Te),r=s[12];const F={};F.color="0x3b82f6ff",F.y=100,F.x=640,F.ref="button6",C=i.focused===6?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),F.z=C,g=F.is||"Button";let Ue;if(typeof g=="string"){if(Ue=f.components&&f.components[g]||d[g],!Ue)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ue=g);s[13]=Ue.call(null,{props:F},s[12],i),s[13][Symbol.for("slots")][0]?(r=s[13][Symbol.for("slots")][0],i=s[13]):r=s[13][Symbol.for("children")][0];const He=f.components&&f.components.Button||d.Button;r=s[1];const Ge={};s[14]=this.element({parent:r||"root"},i),Ge.color="0x8b5cf6ff",Ge.y=200,Ge.x=0,Ge.ref="button7",Ge.z=i.focused===7?1:0;const Ce=[];if(typeof He<"u")for(let vt in He.config.props)delete Ge[He.config.props[vt]],Ce.push(He.config.props[vt]);s[14].populate(Ge),r=s[14];const H={};H.color="0x8b5cf6ff",H.y=200,H.x=0,H.ref="button7",C=i.focused===7?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),H.z=C,g=H.is||"Button";let Ee;if(typeof g=="string"){if(Ee=f.components&&f.components[g]||d[g],!Ee)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ee=g);s[15]=Ee.call(null,{props:H},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],i=s[15]):r=s[15][Symbol.for("children")][0];const ke=f.components&&f.components.Button||d.Button;r=s[1];const ce={};s[16]=this.element({parent:r||"root"},i),ce.color="0xd946efff",ce.y=200,ce.x=320,ce.ref="button8",ce.z=i.focused===8?1:0;const Xe=[];if(typeof ke<"u")for(let vt in ke.config.props)delete ce[ke.config.props[vt]],Xe.push(ke.config.props[vt]);s[16].populate(ce),r=s[16];const be={};be.color="0xd946efff",be.y=200,be.x=320,be.ref="button8",C=i.focused===8?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),be.z=C,g=be.is||"Button";let Oe;if(typeof g=="string"){if(Oe=f.components&&f.components[g]||d[g],!Oe)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Oe=g);s[17]=Oe.call(null,{props:be},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],i=s[17]):r=s[17][Symbol.for("children")][0];const he=f.components&&f.components.Button||d.Button;r=s[1];const Q={};s[18]=this.element({parent:r||"root"},i),Q.color="0xf43f5eff",Q.y=200,Q.x=640,Q.ref="button9",Q.z=i.focused===9?1:0;const Ne=[];if(typeof he<"u")for(let vt in he.config.props)delete Q[he.config.props[vt]],Ne.push(he.config.props[vt]);s[18].populate(Q),r=s[18];const Pe={};Pe.color="0xf43f5eff",Pe.y=200,Pe.x=640,Pe.ref="button9",C=i.focused===9?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),Pe.z=C,g=Pe.is||"Button";let Ve;if(typeof g=="string"){if(Ve=f.components&&f.components[g]||d[g],!Ve)throw new Error('Component "Button" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ve=g);s[19]=Ve.call(null,{props:Pe},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],i=s[19]):r=s[19][Symbol.for("children")][0];const dt=f.components&&f.components.Menu||d.Menu;r=s[0];const pt={};s[20]=this.element({parent:r||"root"},i),pt.ref="menu";const tt=[];if(typeof dt<"u")for(let vt in dt.config.props)delete pt[dt.config.props[vt]],tt.push(dt.config.props[vt]);s[20].populate(pt),r=s[20];const bt={};bt.ref="menu",g=bt.is||"Menu";let ut;if(typeof g=="string"){if(ut=f.components&&f.components[g]||d[g],!ut)throw new Error('Component "Menu" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(ut=g);return s[21]=ut.call(null,{props:bt},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],i=s[21]):r=s[21][Symbol.for("children")][0],s},effects:[function(r,i,f,d,y,x){(typeof skip2>"u"||skip2.indexOf("z")===-1)&&i[2].set("z",r.focused===1?1:0)},function(r,i,f,d,y,x){i[3][Symbol.for("props")].z=r.focused===1?1:0},function(r,i,f,d,y,x){(typeof skip4>"u"||skip4.indexOf("z")===-1)&&i[4].set("z",r.focused===2?1:0)},function(r,i,f,d,y,x){i[5][Symbol.for("props")].z=r.focused===2?1:0},function(r,i,f,d,y,x){(typeof skip6>"u"||skip6.indexOf("z")===-1)&&i[6].set("z",r.focused===3?1:0)},function(r,i,f,d,y,x){i[7][Symbol.for("props")].z=r.focused===3?1:0},function(r,i,f,d,y,x){(typeof skip8>"u"||skip8.indexOf("z")===-1)&&i[8].set("z",r.focused===4?1:0)},function(r,i,f,d,y,x){i[9][Symbol.for("props")].z=r.focused===4?1:0},function(r,i,f,d,y,x){(typeof skip10>"u"||skip10.indexOf("z")===-1)&&i[10].set("z",r.focused===5?1:0)},function(r,i,f,d,y,x){i[11][Symbol.for("props")].z=r.focused===5?1:0},function(r,i,f,d,y,x){(typeof skip12>"u"||skip12.indexOf("z")===-1)&&i[12].set("z",r.focused===6?1:0)},function(r,i,f,d,y,x){i[13][Symbol.for("props")].z=r.focused===6?1:0},function(r,i,f,d,y,x){(typeof skip14>"u"||skip14.indexOf("z")===-1)&&i[14].set("z",r.focused===7?1:0)},function(r,i,f,d,y,x){i[15][Symbol.for("props")].z=r.focused===7?1:0},function(r,i,f,d,y,x){(typeof skip16>"u"||skip16.indexOf("z")===-1)&&i[16].set("z",r.focused===8?1:0)},function(r,i,f,d,y,x){i[17][Symbol.for("props")].z=r.focused===8?1:0},function(r,i,f,d,y,x){(typeof skip18>"u"||skip18.indexOf("z")===-1)&&i[18].set("z",r.focused===9?1:0)},function(r,i,f,d,y,x){i[19][Symbol.for("props")].z=r.focused===9?1:0}],context:{}},state(){return{focused:1}},hooks:{focus(){this.$trigger("focused")}},watch:{focused(h){const r=this.$select(`button${h}`);r&&r.$focus&&r.$focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const h=this.focused-1;if(h===0){const r=this.$select("menu");r&&r.$focus&&r.$focus()}else this.focused=Math.max(h,1)},a(){const h=this.$select("menu");h&&h.$focus&&h.$focus()}}}),e5=at.Component("Positioning",{code:{render:function(r,i,f,d,y,x){const s=[];let g;const C={};s[0]=this.element({parent:r||"root"},i),s[0].populate(C),r=s[0];const R={};s[1]=this.element({parent:r||"root"},i),R.w=100,R.h=100,R.x=20,R.y=20,R.color="0xecfeffff",s[1].populate(R),r=s[0];const b={};s[2]=this.element({parent:r||"root"},i),b.w=100,b.h=100,b.x=140,b.y=20,b.color="0xa5f3fcff",s[2].populate(b),r=s[0];const _={};s[3]=this.element({parent:r||"root"},i),_.w=100,_.h=100,_.x=260,_.y=20,_.color="0x22d3eeff",s[3].populate(_),r=s[0];const D={};s[4]=this.element({parent:r||"root"},i),D.w=100,D.h=100,D.x=380,D.y=20,D.color="0x0891b2ff",s[4].populate(D),r=s[0];const w={};s[5]=this.element({parent:r||"root"},i),w.w=100,w.h=100,w.x=i.x1,w.y=i.y,w.color="0xfdf4ffff",s[5].populate(w),r=s[0];const L={};s[6]=this.element({parent:r||"root"},i),L.w=100,L.h=100,L.x=i.x2,L.y=i.y,L.color="0xf5d0feff",s[6].populate(L),r=s[0];const $={};s[7]=this.element({parent:r||"root"},i),$.w=100,$.h=100,$.x=i.x3,$.y=i.y,$.color="0xe879f9ff",s[7].populate($),r=s[0];const B={};s[8]=this.element({parent:r||"root"},i),B.w=100,B.h=100,B.x=i.x4,B.y=i.y,B.color="0xc026d3ff",s[8].populate(B),r=s[0];const V={};s[9]=this.element({parent:r||"root"},i),V.w=100,V.h=100,V.x=i.xA,V.y=260,V.color="0xfff7edff",s[9].populate(V),r=s[0];const W={};s[10]=this.element({parent:r||"root"},i),W.w=100,W.h=100,W.x=i.xB,W.y=260,W.color="0xfed7aaff",s[10].populate(W),r=s[0];const X={};s[11]=this.element({parent:r||"root"},i),X.w=100,X.h=100,X.x=i.xC,X.y=260,X.color="0xfb923cff",s[11].populate(X),r=s[0];const ie={};s[12]=this.element({parent:r||"root"},i),ie.w=100,ie.h=100,ie.x=i.xD,ie.y=260,ie.color="0xea580cff",s[12].populate(ie),r=s[0];const K={};s[13]=this.element({parent:r||"root"},i),K.w=800,K.h=800,K.y=20,K.x=800,K.color="0xecfdf5ff",s[13].populate(K),r=s[13];const pe={};s[14]=this.element({parent:r||"root"},i),pe.w=600,pe.h=600,pe.y=20,pe.x=20,pe.color="0xa7f3d0ff",s[14].populate(pe),r=s[14];const ue={};s[15]=this.element({parent:r||"root"},i),ue.w=400,ue.h=400,ue.y=100,ue.x=20,ue.color="0x34d399ff",s[15].populate(ue),r=s[15];const q={};s[16]=this.element({parent:r||"root"},i),q.w=200,q.h=100,q.y=(400-100)/2,q.x=(400-200)/2,q.color="0x059669ff",s[16].populate(q),r=s[16];const A={};s[17]=this.element({parent:r||"root"},i),A.w=50,A.h=50,A.y={transition:i.yNested},A.x={transition:i.xNested},A.color="0x065f46ff",s[17].populate(A),r=s[0];const Y={};s[18]=this.element({parent:r||"root"},i),Y.w=100,Y.h=100,Y.y=500,Y.x=20,Y.color="0xe11d48ff",s[18].populate(Y),r=s[0];const le={};s[19]=this.element({parent:r||"root"},i),le.w=200,le.h=200,le.x=300,le.y=600,le.color="0x94a3b8ff",le.z=100,s[19].populate(le),r=s[19];const ge={};s[20]=this.element({parent:r||"root"},i),ge.content="Lightning!",ge.x=100,ge.y=140,ge.__textnode=!0,s[20].populate(ge),r=s[19];const de={};s[21]=this.element({parent:r||"root"},i),de.w=300,de.h=100,de.color="0x475569ff",s[21].populate(de);const se=f.components&&f.components.Circle||d.Circle;r=s[19];const re={};s[22]=this.element({parent:r||"root"},i),re.x=150,re.y=150,re.size=100,re.color="0xffffffff";const oe=[];if(typeof se<"u")for(let Ue in se.config.props)delete re[se.config.props[Ue]],oe.push(se.config.props[Ue]);s[22].populate(re),r=s[22];const Re={};Re.x=150,Re.y=150,Re.size=100,Re.color="0xffffffff",g=Re.is||"Circle";let Ae;if(typeof g=="string"){if(Ae=f.components&&f.components[g]||d[g],!Ae)throw new Error('Component "Circle" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ae=g);s[23]=Ae.call(null,{props:Re},s[22],i),s[23][Symbol.for("slots")][0]?(r=s[23][Symbol.for("slots")][0],i=s[23]):r=s[23][Symbol.for("children")][0],r=s[0];const Ie={};s[24]=this.element({parent:r||"root"},i),Ie.w=300,Ie.h=300,Ie.x=300,Ie.y=600,Ie.color="0xef444480",s[24].populate(Ie),r=s[0];const _e={};s[25]=this.element({parent:r||"root"},i),_e.w=400,_e.h=100,_e.x=800,_e.y=900,_e.color="0x0284c7ff",s[25].populate(_e),r=s[25];const Te={};s[26]=this.element({parent:r||"root"},i),Te.w=r.node.width*(42/100),Te.h=r.node.height*(30/100),Te.y=r.node.height*(5/100),Te.x=r.node.width*(1/100),Te.color="0x075985ff",s[26].populate(Te),r=s[25];const je={};s[27]=this.element({parent:r||"root"},i),je.w=i.bar2.v,je.h=r.node.height*(30/100),je.y=r.node.height*(35/100),je.x=r.node.width*(1/100),je.color="0x6b21a8ff",s[27].populate(je),r=s[25];const F={};return s[28]=this.element({parent:r||"root"},i),F.w={transition:i.bar3},F.h=r.node.height*(30/100),F.y=r.node.height*(65/100),F.x=r.node.width*(1/100),F.color="0x9f1239ff",s[28].populate(F),s},effects:[function(r,i,f,d,y,x){i[9].set("x",r.xA)},function(r,i,f,d,y,x){i[10].set("x",r.xB)},function(r,i,f,d,y,x){i[11].set("x",r.xC)},function(r,i,f,d,y,x){i[12].set("x",r.xD)},function(r,i,f,d,y,x){i[16].set("y",(400-100)/2)},function(r,i,f,d,y,x){i[16].set("x",(400-200)/2)},function(r,i,f,d,y,x){i[17].set("y",{transition:r.yNested})},function(r,i,f,d,y,x){i[17].set("x",{transition:r.xNested})},function(r,i,f,d,y,x){i[27].set("w",r.bar2.v)},function(r,i,f,d,y,x){i[28].set("w",{transition:r.bar3})}],context:{}},state(){return{x1:20,x2:140,x3:20+140+100,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=this.yNested===0?50:0},2e3),this.$setInterval(()=>{this.xNested=this.xNested===0?150:0},1e3),this.$setInterval(()=>{const h=parseFloat(this.bar2.v),r=this.bar2.direction==="up"?h+10:h-10;this.bar2.v=r+"%",r>=90&&(this.bar2.direction="down"),r<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(Math.random()*96)+"%"},2e3)}}});var t5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function n5(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var EC={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(h){(function(){var r=typeof window<"u"?window:t5,i={};(function(d,y,x){var s;function g(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var C=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function R(e){e=[typeof globalThis=="object"&&globalThis,e,typeof d=="object"&&d,typeof self=="object"&&self,typeof y=="object"&&y];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var b=R(this);function _(e,t){if(t)e:{var n=b;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in n))break e;n=n[a]}e=e[e.length-1],o=n[e],t=t(o),t!=o&&t!=null&&C(n,e,{configurable:!0,writable:!0,value:t})}}_("Symbol",function(e){function t(l){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(o+(l||"")+"_"+a++,l)}function n(l,u){this.g=l,C(this,"description",{configurable:!0,writable:!0,value:u})}if(e)return e;n.prototype.toString=function(){return this.g};var o="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return t}),_("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var o=b[t[n]];typeof o=="function"&&typeof o.prototype[e]!="function"&&C(o.prototype,e,{configurable:!0,writable:!0,value:function(){return D(g(this))}})}return e});function D(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function w(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:g(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function L(e){if(!(e instanceof Array)){e=w(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var $=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},B;if(typeof Object.setPrototypeOf=="function")B=Object.setPrototypeOf;else{var V;e:{var W={a:!0},X={};try{X.__proto__=W,V=X.a;break e}catch{}V=!1}B=V?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var ie=B;function K(e,t){if(e.prototype=$(t.prototype),e.prototype.constructor=e,ie)ie(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var o=Object.getOwnPropertyDescriptor(t,n);o&&Object.defineProperty(e,n,o)}else e[n]=t[n];e.hk=t.prototype}function pe(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function ue(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}pe.prototype.s=function(e){this.h=e};function q(e,t){e.i={sg:t,Fg:!0},e.g=e.m||e.j}pe.prototype.return=function(e){this.i={return:e},this.g=this.j};function A(e,t,n){return e.g=n,{value:t}}pe.prototype.u=function(e){this.g=e};function Y(e){e.g=0}function le(e,t,n){e.m=t,n!=null&&(e.j=n)}function ge(e,t){e.m=0,e.j=t||0}function de(e,t,n){e.g=t,e.m=n||0}function se(e,t){return e.m=t||0,t=e.i.sg,e.i=null,t}function re(e){e.A=[e.i],e.m=0,e.j=0}function oe(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Fg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function Re(e){this.g=new pe,this.h=e}function Ae(e,t){ue(e.g);var n=e.g.l;return n?Ie(e,"return"in n?n.return:function(o){return{value:o,done:!0}},t,e.g.return):(e.g.return(t),_e(e))}function Ie(e,t,n,o){try{var a=t.call(e.g.l,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.o=!1,a;var l=a.value}catch(u){return e.g.l=null,q(e.g,u),_e(e)}return e.g.l=null,o.call(e.g,l),_e(e)}function _e(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,q(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Fg)throw t.sg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function Te(e){this.next=function(t){return ue(e.g),e.g.l?t=Ie(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=_e(e)),t},this.throw=function(t){return ue(e.g),e.g.l?t=Ie(e,e.g.l.throw,t,e.g.s):(q(e.g,t),t=_e(e)),t},this.return=function(t){return Ae(e,t)},this[Symbol.iterator]=function(){return this}}function je(e){function t(o){return e.next(o)}function n(o){return e.throw(o)}return new Promise(function(o,a){function l(u){u.done?o(u.value):Promise.resolve(u.value).then(t,n).then(l,a)}l(e.next())})}function F(e){return je(new Te(new Re(e)))}function Ue(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}_("Promise",function(e){function t(u){this.h=0,this.i=void 0,this.g=[],this.o=!1;var c=this.j();try{u(c.resolve,c.reject)}catch(p){c.reject(p)}}function n(){this.g=null}function o(u){return u instanceof t?u:new t(function(c){c(u)})}if(e)return e;n.prototype.h=function(u){if(this.g==null){this.g=[];var c=this;this.i(function(){c.l()})}this.g.push(u)};var a=b.setTimeout;n.prototype.i=function(u){a(u,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var u=this.g;this.g=[];for(var c=0;c<u.length;++c){var p=u[c];u[c]=null;try{p()}catch(m){this.j(m)}}}this.g=null},n.prototype.j=function(u){this.i(function(){throw u})},t.prototype.j=function(){function u(m){return function(v){p||(p=!0,m.call(c,v))}}var c=this,p=!1;return{resolve:u(this.F),reject:u(this.l)}},t.prototype.F=function(u){if(u===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(u instanceof t)this.H(u);else{e:switch(typeof u){case"object":var c=u!=null;break e;case"function":c=!0;break e;default:c=!1}c?this.C(u):this.m(u)}},t.prototype.C=function(u){var c=void 0;try{c=u.then}catch(p){this.l(p);return}typeof c=="function"?this.I(c,u):this.m(u)},t.prototype.l=function(u){this.s(2,u)},t.prototype.m=function(u){this.s(1,u)},t.prototype.s=function(u,c){if(this.h!=0)throw Error("Cannot settle("+u+", "+c+"): Promise already settled in state"+this.h);this.h=u,this.i=c,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var u=this;a(function(){if(u.B()){var c=b.console;typeof c<"u"&&c.error(u.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var u=b.CustomEvent,c=b.Event,p=b.dispatchEvent;return typeof p>"u"?!0:(typeof u=="function"?u=new u("unhandledrejection",{cancelable:!0}):typeof c=="function"?u=new c("unhandledrejection",{cancelable:!0}):(u=b.document.createEvent("CustomEvent"),u.initCustomEvent("unhandledrejection",!1,!0,u)),u.promise=this,u.reason=this.i,p(u))},t.prototype.A=function(){if(this.g!=null){for(var u=0;u<this.g.length;++u)l.h(this.g[u]);this.g=null}};var l=new n;return t.prototype.H=function(u){var c=this.j();u.Ed(c.resolve,c.reject)},t.prototype.I=function(u,c){var p=this.j();try{u.call(c,p.resolve,p.reject)}catch(m){p.reject(m)}},t.prototype.then=function(u,c){function p(E,T){return typeof E=="function"?function(k){try{m(E(k))}catch(M){v(M)}}:T}var m,v,S=new t(function(E,T){m=E,v=T});return this.Ed(p(u,m),p(c,v)),S},t.prototype.catch=function(u){return this.then(void 0,u)},t.prototype.Ed=function(u,c){function p(){switch(m.h){case 1:u(m.i);break;case 2:c(m.i);break;default:throw Error("Unexpected state: "+m.h)}}var m=this;this.g==null?l.h(p):this.g.push(p),this.o=!0},t.resolve=o,t.reject=function(u){return new t(function(c,p){p(u)})},t.race=function(u){return new t(function(c,p){for(var m=w(u),v=m.next();!v.done;v=m.next())o(v.value).Ed(c,p)})},t.all=function(u){var c=w(u),p=c.next();return p.done?o([]):new t(function(m,v){function S(k){return function(M){E[k]=M,T--,T==0&&m(E)}}var E=[],T=0;do E.push(void 0),T++,o(p.value).Ed(S(E.length-1),v),p=c.next();while(!p.done)})},t});function He(e,t){return Object.prototype.hasOwnProperty.call(e,t)}_("WeakMap",function(e){function t(p){if(this.g=(c+=Math.random()+1).toString(),p){p=w(p);for(var m;!(m=p.next()).done;)m=m.value,this.set(m[0],m[1])}}function n(){}function o(p){var m=typeof p;return m==="object"&&p!==null||m==="function"}function a(p){if(!He(p,u)){var m=new n;C(p,u,{value:m})}}function l(p){var m=Object[p];m&&(Object[p]=function(v){return v instanceof n?v:(Object.isExtensible(v)&&a(v),m(v))})}if(function(){if(!e||!Object.seal)return!1;try{var p=Object.seal({}),m=Object.seal({}),v=new e([[p,2],[m,3]]);return v.get(p)!=2||v.get(m)!=3?!1:(v.delete(p),v.set(m,4),!v.has(p)&&v.get(m)==4)}catch{return!1}}())return e;var u="$jscomp_hidden_"+Math.random();l("freeze"),l("preventExtensions"),l("seal");var c=0;return t.prototype.set=function(p,m){if(!o(p))throw Error("Invalid WeakMap key");if(a(p),!He(p,u))throw Error("WeakMap key fail: "+p);return p[u][this.g]=m,this},t.prototype.get=function(p){return o(p)&&He(p,u)?p[u][this.g]:void 0},t.prototype.has=function(p){return o(p)&&He(p,u)&&He(p[u],this.g)},t.prototype.delete=function(p){return o(p)&&He(p,u)&&He(p[u],this.g)?delete p[u][this.g]:!1},t}),_("Map",function(e){function t(){var c={};return c.Mb=c.next=c.head=c}function n(c,p){var m=c[1];return D(function(){if(m){for(;m.head!=c[1];)m=m.Mb;for(;m.next!=m.head;)return m=m.next,{done:!1,value:p(m)};m=null}return{done:!0,value:void 0}})}function o(c,p){var m=p&&typeof p;m=="object"||m=="function"?l.has(p)?m=l.get(p):(m=""+ ++u,l.set(p,m)):m="p_"+p;var v=c[0][m];if(v&&He(c[0],m))for(c=0;c<v.length;c++){var S=v[c];if(p!==p&&S.key!==S.key||p===S.key)return{id:m,list:v,index:c,entry:S}}return{id:m,list:v,index:-1,entry:void 0}}function a(c){if(this[0]={},this[1]=t(),this.size=0,c){c=w(c);for(var p;!(p=c.next()).done;)p=p.value,this.set(p[0],p[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var c=Object.seal({x:4}),p=new e(w([[c,"s"]]));if(p.get(c)!="s"||p.size!=1||p.get({x:4})||p.set({x:4},"t")!=p||p.size!=2)return!1;var m=p.entries(),v=m.next();return v.done||v.value[0]!=c||v.value[1]!="s"?!1:(v=m.next(),!(v.done||v.value[0].x!=4||v.value[1]!="t"||!m.next().done))}catch{return!1}}())return e;var l=new WeakMap;a.prototype.set=function(c,p){c=c===0?0:c;var m=o(this,c);return m.list||(m.list=this[0][m.id]=[]),m.entry?m.entry.value=p:(m.entry={next:this[1],Mb:this[1].Mb,head:this[1],key:c,value:p},m.list.push(m.entry),this[1].Mb.next=m.entry,this[1].Mb=m.entry,this.size++),this},a.prototype.delete=function(c){return c=o(this,c),c.entry&&c.list?(c.list.splice(c.index,1),c.list.length||delete this[0][c.id],c.entry.Mb.next=c.entry.next,c.entry.next.Mb=c.entry.Mb,c.entry.head=null,this.size--,!0):!1},a.prototype.clear=function(){this[0]={},this[1]=this[1].Mb=t(),this.size=0},a.prototype.has=function(c){return!!o(this,c).entry},a.prototype.get=function(c){return(c=o(this,c).entry)&&c.value},a.prototype.entries=function(){return n(this,function(c){return[c.key,c.value]})},a.prototype.keys=function(){return n(this,function(c){return c.key})},a.prototype.values=function(){return n(this,function(c){return c.value})},a.prototype.forEach=function(c,p){for(var m=this.entries(),v;!(v=m.next()).done;)v=v.value,c.call(p,v[1],v[0],this)},a.prototype[Symbol.iterator]=a.prototype.entries;var u=0;return a}),_("Set",function(e){function t(n){if(this.g=new Map,n){n=w(n);for(var o;!(o=n.next()).done;)this.add(o.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),o=new e(w([n]));if(!o.has(n)||o.size!=1||o.add(n)!=o||o.size!=1||o.add({x:4})!=o||o.size!=2)return!1;var a=o.entries(),l=a.next();return l.done||l.value[0]!=n||l.value[1]!=n?!1:(l=a.next(),l.done||l.value[0]==n||l.value[0].x!=4||l.value[1]!=l.value[0]?!1:a.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,o){var a=this;this.g.forEach(function(l){return n.call(o,l,l,a)})},t)});function Ge(e,t){e instanceof String&&(e+="");var n=0,o=!1,a={next:function(){if(!o&&n<e.length){var l=n++;return{value:t(l,e[l]),done:!1}}return o=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}_("Array.prototype.keys",function(e){return e||function(){return Ge(this,function(t){return t})}});function Ce(e,t,n){e instanceof String&&(e=String(e));for(var o=e.length,a=0;a<o;a++){var l=e[a];if(t.call(n,l,a,e))return{Dg:a,v:l}}return{Dg:-1,v:void 0}}_("Array.prototype.findIndex",function(e){return e||function(t,n){return Ce(this,t,n).Dg}}),_("Array.from",function(e){return e||function(t,n,o){n=n??function(c){return c};var a=[],l=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof l=="function"){t=l.call(t);for(var u=0;!(l=t.next()).done;)a.push(n.call(o,l.value,u++))}else for(l=t.length,u=0;u<l;u++)a.push(n.call(o,t[u],u));return a}}),_("Array.prototype.values",function(e){return e||function(){return Ge(this,function(t,n){return n})}}),_("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),_("Array.prototype.includes",function(e){return e||function(t,n){var o=this;o instanceof String&&(o=String(o));var a=o.length;for(n=n||0,0>n&&(n=Math.max(n+a,0));n<a;n++){var l=o[n];if(l===t||Object.is(l,t))return!0}return!1}});function H(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}_("String.prototype.includes",function(e){return e||function(t,n){return H(this,t,"includes").indexOf(t,n||0)!==-1}}),_("String.fromCodePoint",function(e){return e||function(t){for(var n="",o=0;o<arguments.length;o++){var a=Number(arguments[o]);if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),n+=String.fromCharCode(a&1023|56320))}return n}}),_("Array.prototype.find",function(e){return e||function(t,n){return Ce(this,t,n).v}}),_("String.prototype.startsWith",function(e){return e||function(t,n){var o=H(this,t,"startsWith"),a=o.length,l=t.length;n=Math.max(0,Math.min(n|0,o.length));for(var u=0;u<l&&n<a;)if(o[n++]!=t[u++])return!1;return u>=l}}),_("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=w(n);for(var o;!(o=n.next()).done;)this.add(o.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),o=Object.seal({}),a=new e([n]);return!a.has(n)||a.has(o)?!1:(a.delete(n),a.add(o),!a.has(n)&&a.has(o))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)});var Ee=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(o)for(var a in o)He(o,a)&&(e[a]=o[a])}return e};_("Object.assign",function(e){return e||Ee}),_("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),_("Array.prototype.entries",function(e){return e||function(){return Ge(this,function(t,n){return[t,n]})}}),_("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),_("String.prototype.repeat",function(e){return e||function(t){var n=H(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var o="";t;)t&1&&(o+=n),(t>>>=1)&&(n+=n);return o}}),_("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),_("Object.values",function(e){return e||function(t){var n=[],o;for(o in t)He(t,o)&&n.push(t[o]);return n}}),_("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),_("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),_("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),_("Object.entries",function(e){return e||function(t){var n=[],o;for(o in t)He(t,o)&&n.push([o,t[o]]);return n}});var ke=this||self;function ce(e,t){e=e.split(".");var n=ke;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var o;e.length&&(o=e.shift());)e.length||t===void 0?n[o]&&n[o]!==Object.prototype[o]?n=n[o]:n=n[o]={}:n[o]=t}function Xe(){}function be(){}function Oe(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}Oe.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function he(e){return e.h/(1-Math.pow(e.g,e.i))}function Q(){this.h=new Oe(2),this.j=new Oe(5),this.g=0,this.i=128e3,this.l=16e3}Q.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},Q.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},Q.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(he(this.h),he(this.j))};function Ne(){}function Pe(){}function Ve(){}function dt(e){var t=Ue.apply(1,arguments);ut.has(e)||(ut.add(e),Ve.apply(Ne,L(t)))}function pt(){}function tt(){}function bt(){}var ut=new Set;d.console&&(Ve=function(){return console.warn.apply(console,L(Ue.apply(0,arguments)))},Pe=function(){console.error.apply(console,L(Ue.apply(0,arguments)))});function vt(){this.g={}}s=vt.prototype,s.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},s.get=function(e){return(e=this.g[e])?e.slice():null},s.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},s.forEach=function(e){for(var t in this.g)e(t,this.g[t])},s.size=function(){return Object.keys(this.g).length},s.keys=function(){return Object.keys(this.g)};function ct(){this.g=new vt}s=ct.prototype,s.release=function(){this.Ra(),this.g=null},s.D=function(e,t,n,o){this.g&&(e=new Bn(e,t,n,o),this.g.push(t,e))},s.ha=function(e,t,n,o){function a(u){l.jb(e,t,a),n(u)}var l=this;this.D(e,t,a,o)},s.jb=function(e,t,n){if(this.g){var o=this.g.get(t)||[];o=w(o);for(var a=o.next();!a.done;a=o.next())a=a.value,a.target!=e||n!=a.listener&&n||(a.jb(),this.g.remove(t,a))}},s.Ra=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,L(e.g[n]));for(e=w(t),t=e.next();!t.done;t=e.next())t.value.jb();this.g.g={}}},ce("shaka.util.EventManager",ct),ct.prototype.removeAll=ct.prototype.Ra,ct.prototype.unlisten=ct.prototype.jb,ct.prototype.listenOnce=ct.prototype.ha,ct.prototype.listen=ct.prototype.D,ct.prototype.release=ct.prototype.release;function Bn(e,t,n,o){this.target=e,this.type=t,this.listener=n,this.g=oi(e,o),this.target.addEventListener(t,n,this.g)}Bn.prototype.jb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function oi(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(o){return!n.has(o)}),ft(e)?t:t.capture||!1}function ft(e){var t=Me;if(t==null){t=!1;try{var n={},o={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",o),Object.defineProperty(n,"capture",o),o=function(){},e.addEventListener("test",o,n),e.removeEventListener("test",o,n)}catch{t=!1}Me=t}return t||!1}var Me=void 0;function kt(e){if(qn.has(e))return qn.get(e);if(d.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return qn.set(e,t),t}return d.MediaSource?(t=MediaSource.isTypeSupported(e),qn.set(e,t),t):!1}function tn(){return!!d.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var qn=new Map;function vn(e,t){this.g=e,this.h=t}vn.prototype.toString=function(){return"v"+this.g+"."+this.h};function Ct(e,t){var n=new vn(5,0),o=ht,a=o.g,l=n.h-a.h;(0<(n.g-a.g||l)?o.i:o.h)(o.g,n,e,t)}function ri(e,t,n,o){Ve([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",o].join(" "))}function At(e,t,n,o){Pe([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",o].join(" "))}var ht=null;function en(){}en.prototype.extract=function(){},en.prototype.decode=function(){return[]},en.prototype.clear=function(){},en.prototype.getStreams=function(){return[]};function lt(){}lt.prototype.init=function(){},lt.prototype.parse=function(){return[]};function $e(){}function Zt(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(cn(e)==cn(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Ze(e);t=Ze(t);for(var o=0;o<e.byteLength;o++)if(n[o]!=t[o])return!1;return!0}function cn(e){return e instanceof ArrayBuffer?e:e.buffer}function hn(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Ze(e,t,n){return n=n===void 0?1/0:n,Dt(e,t===void 0?0:t,n,Uint8Array)}function si(e,t,n){return n=n===void 0?1/0:n,Dt(e,t===void 0?0:t,n,Uint16Array)}function Tn(e,t,n){return n=n===void 0?1/0:n,Dt(e,t===void 0?0:t,n,DataView)}function Dt(e,t,n,o){var a=cn(e),l=1;"BYTES_PER_ELEMENT"in o&&(l=o.BYTES_PER_ELEMENT);var u=((e.byteOffset||0)+e.byteLength)/l;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/l,u))),new o(a,e,Math.floor(Math.min(e+Math.max(n,0),u))-e)}ce("shaka.util.BufferUtils",$e),$e.toDataView=Tn,$e.toUint16=si,$e.toUint8=Ze,$e.toArrayBuffer=hn,$e.equal=Zt;function qe(){}qe.prototype.init=function(){},qe.prototype.i=function(){},qe.prototype.g=function(){},qe.prototype.j=function(){},ce("shaka.media.IClosedCaptionParser",qe);function sn(e){this.l=new lt,(e=an[e.toLowerCase()])&&(this.l=e()),this.h=new en,(e=dn)&&(this.h=e())}sn.prototype.init=function(e,t){t!==void 0&&t||this.g(),this.l.init(e)},sn.prototype.i=function(e){e=this.l.parse(e),e=w(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Ze(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},sn.prototype.g=function(){this.h.clear()},sn.prototype.j=function(){return this.h.getStreams()},ce("shaka.media.ClosedCaptionParser",sn),sn.findDecoder=function(){return dn},sn.unregisterDecoder=function(){dn=null},sn.registerDecoder=function(e){dn=e},sn.findParser=function(e){return an[e]},sn.unregisterParser=function(e){delete an[e]},sn.registerParser=function(e,t){an[e]=t};var an={},dn=null;function bn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=nn,this.scroll=xr}ce("shaka.text.CueRegion",bn);var nn=1;bn.units={PX:0,PERCENTAGE:nn,LINES:2};var xr="";bn.scrollMode={NONE:xr,UP:"up"};function Pn(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Kn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function wr(e,t,n){if(n||(n=Pn),e.length!=t.length)return!1;t=t.slice(),e=w(e);for(var o=e.next(),a={};!o.done;a={Gg:void 0},o=e.next()){if(a.Gg=o.value,o=t.findIndex(function(l){return function(u){return n(l.Gg,u)}}(a)),o==-1)return!1;t[o]=t[t.length-1],t.pop()}return t.length==0}function Si(e,t,n){if(n||(n=Pn),e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(!n(e[o],t[o]))return!1;return!0}function jt(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new bn,this.position=null,this.positionAlign=gt,this.size=0,this.textAlign=Co,this.direction=va,this.writingMode=Sr,this.lineInterpretation=tu,this.line=null,this.lineHeight="",this.lineAlign=Cr,this.displayAlign=ya,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Ig,this.fontStyle=yh,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={dc:32,rows:15}}function Ji(e,t){return e=new jt(e,t,""),e.lineBreak=!0,e}jt.prototype.clone=function(){var e=new jt(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function So(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Si(e.nestedCues,t.nestedCues,So))return!1}else if(n=="region"||n=="cellResolution"){for(var o in e[n])if(e[n][o]!=t[n][o])return!1}else if(Array.isArray(e[n])){if(!Si(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}ce("shaka.text.Cue",jt),jt.equal=So,jt.prototype.clone=jt.prototype.clone;var gt="auto";jt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:gt};var Co="center",gh={LEFT:"left",RIGHT:"right",CENTER:Co,START:"start",END:"end"};jt.textAlign=gh;var ya="after",Ag={BEFORE:"before",CENTER:"center",AFTER:ya};jt.displayAlign=Ag;var va="ltr";jt.direction={HORIZONTAL_LEFT_TO_RIGHT:va,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Sr="horizontal-tb";jt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Sr,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var tu=0;jt.lineInterpretation={LINE_NUMBER:tu,PERCENTAGE:1};var Cr="start",mh={CENTER:"center",START:Cr,END:"end"};jt.lineAlign=mh;var bg={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};jt.defaultTextColor=bg;var kg={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};jt.defaultTextBackgroundColor=kg;var Ig=400;jt.fontWeight={NORMAL:Ig,BOLD:700};var yh="normal",Mg={NORMAL:yh,ITALIC:"italic",OBLIQUE:"oblique"};jt.fontStyle=Mg,jt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Yo(){}Yo.prototype.destroy=function(){};function To(e,t,n){vh[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ie:t}}function qo(e,t){for(var n=e.toLowerCase().split(";")[0],o=w([Rg,wh,xh,Ko]),a=o.next();!a.done;a=o.next())if(a=vh[n+"-"+a.value]){var l=a.ie(),u=l.isSupported(e,t);if(l.destroy(),u)return a.ie}return null}ce("shaka.transmuxer.TransmuxerEngine",Yo),Yo.findTransmuxer=qo,Yo.unregisterTransmuxer=function(e,t){delete vh[e.toLowerCase().split(";")[0]+"-"+t]},Yo.registerTransmuxer=To,Yo.prototype.destroy=Yo.prototype.destroy;var vh={},Ko=1,xh=2,wh=3,Rg=4;Yo.PluginPriority={FALLBACK:Ko,PREFERRED_SECONDARY:xh,PREFERRED:wh,APPLICATION:Rg};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var IC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function pn(e){var t;e instanceof pn?(nu(this,e.Bb),this.uc=e.uc,iu(this,e.Eb),Sh(this,e.Mc),this.Pa=e.Pa,xa(this,e.g.clone()),this.ec=e.ec):e&&(t=String(e).match(IC))?(nu(this,t[1]||"",!0),this.uc=wa(t[2]||""),iu(this,t[3]||"",!0),Sh(this,t[4]),this.Pa=wa(t[5]||"",!0),xa(this,t[6]||"",!0),this.ec=wa(t[7]||"")):this.g=new Ca(null)}s=pn.prototype,s.Bb="",s.uc="",s.Eb="",s.Mc=null,s.Pa="",s.ec="",s.toString=function(){var e=[],t=this.Bb;if(t&&e.push(Sa(t,_g,!0),":"),t=this.Eb){e.push("//");var n=this.uc;n&&e.push(Sa(n,_g,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Mc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.Eb&&t.charAt(0)!="/"&&e.push("/"),e.push(Sa(t,t.charAt(0)=="/"?_C:RC,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.ec)&&e.push("#",Sa(t,PC)),e.join("")},s.resolve=function(e){var t=this.clone();t.Bb==="data"&&(t=new pn);var n=!!e.Bb;n?nu(t,e.Bb):n=!!e.uc,n?t.uc=e.uc:n=!!e.Eb,n?iu(t,e.Eb):n=e.Mc!=null;var o=e.Pa;if(n)Sh(t,e.Mc);else if(n=!!e.Pa){if(o.charAt(0)!="/")if(this.Eb&&!this.Pa)o="/"+o;else{var a=t.Pa.lastIndexOf("/");a!=-1&&(o=t.Pa.substr(0,a+1)+o)}if(o==".."||o==".")o="";else if(o.indexOf("./")!=-1||o.indexOf("/.")!=-1){a=o.lastIndexOf("/",0)==0,o=o.split("/");for(var l=[],u=0;u<o.length;){var c=o[u++];c=="."?a&&u==o.length&&l.push(""):c==".."?((1<l.length||l.length==1&&l[0]!="")&&l.pop(),a&&u==o.length&&l.push("")):(l.push(c),a=!0)}o=l.join("/")}}return n?t.Pa=o:n=e.g.toString()!=="",n?xa(t,e.g.clone()):n=!!e.ec,n&&(t.ec=e.ec),t},s.clone=function(){return new pn(this)};function nu(e,t,n){e.Bb=n?wa(t,!0):t,e.Bb&&(e.Bb=e.Bb.replace(/:$/,""))}function iu(e,t,n){e.Eb=n?wa(t,!0):t}function Sh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Mc=t}else e.Mc=null}function xa(e,t,n){t instanceof Ca?e.g=t:(n||(t=Sa(t,LC)),e.g=new Ca(t))}function wa(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Sa(e,t,n){return e!=null?(e=encodeURI(e).replace(t,MC),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function MC(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var _g=/[#\/\?@]/g,RC=/[#\?:]/g,_C=/[#\?]/g,LC=/[#\?@]/g,PC=/#/g;function Ca(e){this.g=e||null}function ou(e){if(!e.Ka&&(e.Ka={},e.Xc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var o=t[n].indexOf("="),a=null;if(0<=o){var l=t[n].substring(0,o);a=t[n].substring(o+1)}else l=t[n];l=decodeURIComponent(l.replace(/\+/g," ")),a=a||"",e.add(l,decodeURIComponent(a.replace(/\+/g," ")))}}s=Ca.prototype,s.Ka=null,s.Xc=null;function Lg(e){return ou(e),e.Xc}s.add=function(e,t){ou(this),this.g=null;var n=this.Ka.hasOwnProperty(e)?this.Ka[e]:null;return n||(this.Ka[e]=n=[]),n.push(t),this.Xc++,this},s.set=function(e,t){return ou(this),this.g=null,this.Ka.hasOwnProperty(e)?this.Ka[e]=[t]:this.add(e,t),this},s.get=function(e){return ou(this),this.Ka[e]||[]},s.toString=function(){if(this.g)return this.g;if(!this.Ka)return"";var e=[],t;for(t in this.Ka)for(var n=encodeURIComponent(t),o=this.Ka[t],a=0;a<o.length;a++){var l=n;o[a]!==""&&(l+="="+encodeURIComponent(o[a])),e.push(l)}return this.g=e.join("&")},s.clone=function(){var e=new Ca;if(e.g=this.g,this.Ka){var t={},n;for(n in this.Ka)t[n]=this.Ka[n].concat();e.Ka=t,e.Xc=this.Xc}return e};function J(e,t,n){var o=Ue.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=o,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(a){this.stack=a.stack}}J.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},ce("shaka.util.Error",J),J.Severity={RECOVERABLE:1,CRITICAL:2},J.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},J.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function Yr(e){this.h=e,this.g=void 0}Yr.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Pg(e,t){return e.length&&t.length&&e!==t?0<Ch(e,t).length:!0}function Ch(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=w(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;for(var a=w(t),l=a.next();!l.done;l=a.next())if(l=l.value,o.keySystem==l.keySystem){a=new Map;for(var u=w((o.initData||[]).concat(l.initData||[])),c=u.next();!c.done;c=u.next())c=c.value,a.set(c.keyId,c);a=Array.from(a.values()),u=o.keyIds&&l.keyIds?new Set([].concat(L(o.keyIds),L(l.keyIds))):o.keyIds||l.keyIds,n.push({keySystem:o.keySystem,licenseServerUri:o.licenseServerUri||l.licenseServerUri,distinctiveIdentifierRequired:o.distinctiveIdentifierRequired||l.distinctiveIdentifierRequired,persistentStateRequired:o.persistentStateRequired||l.persistentStateRequired,videoRobustness:o.videoRobustness||l.videoRobustness,audioRobustness:o.audioRobustness||l.audioRobustness,serverCertificate:o.serverCertificate||l.serverCertificate,serverCertificateUri:o.serverCertificateUri||l.serverCertificateUri,initData:a,keyIds:u});break}}return n}function Th(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}var ru=new Yr(function(){return hn(new Uint8Array([0]))}),su=new Map;function Ta(e){this.h=e,this.g=null}Ta.prototype.Y=function(e){var t=this;this.stop();var n=!0,o=null;return this.g=function(){d.clearTimeout(o),n=!1},o=d.setTimeout(function(){n&&t.h()},1e3*e),this},Ta.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function mt(e){this.h=e,this.g=null}mt.prototype.tc=function(){return this.stop(),this.h(),this},mt.prototype.Y=function(e){var t=this;return this.stop(),this.g=new Ta(function(){t.h()}).Y(e),this},mt.prototype.Sa=function(e){var t=this;return this.stop(),this.g=new Ta(function(){t.g.Y(e),t.h()}).Y(e),this},mt.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},ce("shaka.util.Timer",mt),mt.prototype.stop=mt.prototype.stop,mt.prototype.tickEvery=mt.prototype.Sa,mt.prototype.tickAfter=mt.prototype.Y,mt.prototype.tickNow=mt.prototype.tc;function eo(){var e=d.ManagedMediaSource||d.MediaSource;return!!(e&&e.isTypeSupported)}function Ea(e){return Ng().canPlayType(e)!=""}function Aa(){return!!navigator.userAgent.match(/Edge?\//)}function co(){return Ut("Xbox One")}function ho(){return Ut("Tizen")}function ba(){return Ut("Tizen 3")}function au(){return Ut("Tizen 2")}function po(){return Ut("Web0S")}function lu(){return po()&&Eh()===38}function Ci(){return Ut("CrKey")}function Eh(){if(!Ut("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function qr(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!ho()&&!Ut("PC=EOS")&&!Ut("PC=APL")&&!Ut("VirginMedia")&&!Ah()&&!go()&&!Ut("AFT")&&!Ut("WPE")&&!Ut("DT_STB_BCM")}function uu(){return Ut("PlayStation 5")}function go(){return Ut("PlayStation 4")}function fu(){return Ut("Hisense")||Ut("VIDAA")}function Ah(){return Ut("SOPOpenBrowser")}function Kr(){if(!qr())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function bh(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("windows"):!1}function cu(){return Ut("Android")}function Dg(){return!!(ho()||po()||co()||go()||uu()||Ut("AFT")||Ut("PC=EOS")||Ut("PC=APL")||Ut("VirginMedia")||Ah()||Ut("WPE")||Ci()||fu()||Ut("DT_STB_BCM"))}function Ut(e){return(navigator.userAgent||"").includes(e)}function Ng(){return Zr||(kh||(kh=new mt(function(){Zr=null})),(Zr=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Zr=document.createElement("video")),kh.Y(1),Zr)}function hu(e){return e?e===d.shakaMediaKeysPolyfill:!!d.shakaMediaKeysPolyfill}function Og(){var e,t,n,o,a,l,u,c,p,m,v,S,E,T,k;return F(function(M){switch(M.g){case 1:if(e={width:1/0,height:1/0},Ci()){if(S=d.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,le(M,15),!(E=S)){M.u(17);break}return A(M,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(ho()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{Ve("Tizen: Error detecting screen size, default screen size 1920x1080.")}M.u(3);break}if(co()){e.width=1920,e.height=1080;try{n=void 0,n=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows,o=new n.Media.Protection.ProtectionCapabilities,a=n.Media.Protection.ProtectionCapabilityResult,l=null;do l=o.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(l===a.maybe);l===a.probably&&(e.width=3840,e.height=2160)}catch{Ve("Xbox: Error detecting screen size, default screen size 1920x1080.")}M.u(3);break}if(po()){try{u=JSON.parse(d.PalmSystem.deviceInfo),e.width=Math.max(1920,u.screenWidth),e.height=Math.max(1080,u.screenHeight)}catch{Ve("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}M.u(3);break}if(fu()){d.Hisense_Get4KSupportState&&d.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),M.u(3);break}if(!go()&&!uu()){M.u(3);break}return c=!1,le(M,9),A(M,d.msdk.device.getDisplayInfo(),11);case 11:p=M.h,c=p.resolution==="4K",de(M,10);break;case 9:return se(M),le(M,12),A(M,d.msdk.device.getDisplayInfoImmediate(),14);case 14:m=M.h,c=m.resolution==="4K",de(M,10);break;case 12:v=se(M),Ve("PlayStation: Failed to get the display info:",v);case 10:c?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),M.u(3);break;case 18:E=M.h;case 17:if(E){e.width=3840,e.height=2160,M.u(19);break}if(!(T=S)){M.u(20);break}return A(M,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:T=M.h;case 20:T&&(e.width=1920,e.height=1080);case 19:de(M,3);break;case 15:k=se(M),Pe("Failed to check canDisplayType:",k);case 3:return M.return(e)}})}var kh=null,Zr=null;function Tr(){}function Wt(e){if(!e)return"";if(e=Ze(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),d.TextDecoder&&!go())return e=new TextDecoder().decode(e),e.includes("�")&&Pe('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var o=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(o=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(o=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(o=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):o=e[n],65535>=o)t+=String.fromCharCode(o);else{o-=65536;var a=o&1023;t+=String.fromCharCode(55296+(o>>10)),t+=String.fromCharCode(56320+a)}}return t}function Eo(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new J(2,2,2004);n=Math.floor(e.byteLength/2);var o=new Uint16Array(n);e=Tn(e);for(var a=0;a<n;a++)o[a]=e.getUint16(2*a,t);return Mh(o)}function Ao(e){function t(o){return n.byteLength<=o||32<=n[o]&&126>=n[o]}if(!e)return"";var n=Ze(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Wt(n);if(n[0]==254&&n[1]==255)return Eo(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Eo(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Eo(e,!1);if(n[1]==0&&n[3]==0)return Eo(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Wt(e);throw new J(2,2,2003)}function to(e){if(d.TextEncoder&&!go()){var t=new TextEncoder;return hn(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return hn(t)}function Ih(e,t){for(var n=new ArrayBuffer(2*e.length),o=new DataView(n),a=0;a<e.length;++a)o.setUint16(2*a,e.charCodeAt(a),t);return n}function Mh(e){return Ug.value()(e)}function Zn(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,o=RegExp(n.source);return e&&o.test(e)?e.replace(n,function(a){return a[1]=="#"?(a=a[2]=="x"||a[2]=="X"?parseInt(a.substring(3),16):parseInt(a.substring(2),10),0<=a&&1114111>=a?String.fromCodePoint(a):""):t[a]||"'"}):e||""}ce("shaka.util.StringUtils",Tr),Tr.resetFromCharCode=function(){Ug.g=void 0},Tr.toUTF16=Ih,Tr.toUTF8=to,Tr.fromBytesAutoDetect=Ao,Tr.fromUTF16=Eo,Tr.fromUTF8=Wt;var Ug=new Yr(function(){function e(n){try{var o=new Uint8Array(n);return 0<String.fromCharCode.apply(null,o).length}catch{return!1}}for(var t={ac:65536};0<t.ac;t={ac:t.ac},t.ac/=2)if(e(t.ac))return function(n){return function(o){for(var a="",l=0;l<o.length;l+=n.ac)a+=String.fromCharCode.apply(null,o.subarray(l,l+n.ac));return a}}(t);return null});function zn(){}function Bg(e){return e=Mh(Ze(e)),btoa(e)}function Er(e,t){return t=t??!0,e=Bg(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Li(e){e=d.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function Ar(e){for(var t=e.length/2,n=new Uint8Array(t),o=0;o<t;o++)n[o]=d.parseInt(e.substr(2*o,2),16);return n}function bo(e){var t=Ze(e);e="",t=w(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function ln(){for(var e=Ue.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var o=n=0;o<e.length;++o){var a=e[o];a instanceof Uint8Array?t.set(a,n):t.set(Ze(a),n),n+=a.byteLength}return t}ce("shaka.util.Uint8ArrayUtils",zn),zn.concat=ln,zn.toHex=bo,zn.fromHex=Ar,zn.fromBase64=Li,zn.toBase64=Er,zn.toStandardBase64=Bg;function Dn(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new pn(e[0]);return t=new pn(t[0]),[n.resolve(t).toString()]}t=t.map(function(u){return new pn(u)}),n=[],e=w(e);for(var o=e.next();!o.done;o=e.next()){o=new pn(o.value);for(var a=w(t),l=a.next();!l.done;l=a.next())n.push(o.resolve(l.value).toString())}return n}function br(e,t,n,o){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},o&&(e.keySystemUris=new Set([o])),e}function jg(e,t){t=t===void 0?"cenc":t;var n=[],o=[],a=[];e.forEach(function(u,c){var p=c;p.length!=22&&(p=Er(Ar(c),!1));var m=u;m.length!=22&&(m=Er(Ar(u),!1)),u={kty:"oct",kid:p,k:m},n.push(u),o.push(u.kid),a.push(c)}),e=JSON.stringify({keys:n});var l=JSON.stringify({kids:o});return l=[{initData:Ze(to(l)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+d.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:l,keyIds:new Set(a)}}function Qr(e,t){if(t.length==1)return t[0];if(e=ai(e,t),e!=null)return e;throw new J(2,4,4025,t)}function ai(e,t){for(var n=w(Fg[e]),o=n.next();!o.done;o=n.next()){o=o.value;for(var a=w(t),l=a.next();!l.done;l=a.next())if(l=l.value,o.test(l.trim()))return l.trim()}return e==Tt?"":null}function Rh(e,t){var n=[];e=w(Fg[e]);for(var o=e.next();!o.done;o=e.next()){o=o.value;for(var a=w(t),l=a.next();!l.done;l=a.next())l=l.value,o.test(l.trim())&&n.push(l.trim())}return n}var Tt="text",xn={ga:"video",X:"audio",ua:Tt,De:"image",gj:"application"},DC=1/15,Fg={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function _h(){}function wn(e,t){var n=e;return t&&!Zo.includes(e)&&(n+='; codecs="'+t+'"'),n}function kr(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Jr(e,t,n){var o=wn(e,t);return t=kr(e,t),qo(t)?(e=qo(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?o.replace("video","audio"):o,n}function NC(e,t,n){var o=[t];return OC.forEach(function(a,l){var u=e[l];l=="codecs"?Zo.includes(e.mimeType)||o.push('codecs="'+n+'"'):u&&o.push(a+'="'+u+'"')}),e.hdr=="PQ"&&o.push('eotf="smpte2084"'),o.join(";")}function du(e){return e.split(";")[0].split("/")[1]}function Qn(e){var t=zg(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function es(e){var t=[];e=w(e.split(","));for(var n=e.next();!n.done;n=e.next())n=zg(n.value),t.push(n[0]);return t.sort().join(",")}function Gi(e){return e.split(";")[0]}function Ti(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function $g(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function zg(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}ce("shaka.util.MimeUtils",_h),_h.getFullTypeWithAllCodecs=kr,_h.getFullType=wn;var OC=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Zo=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function ko(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function ka(e){return Sn[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!dn:!1}ko.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function UC(e,t,n,o,a){var l,u,c,p,m,v,S;return F(function(E){if(E.g==1)return A(E,Promise.resolve(),2);if(!e.i||!e.j)return E.return();if(n==null||o==null)return e.i.parseInit(Ze(t)),E.return();for(l=e.B?n:e.s,u={periodStart:e.s,segmentStart:n,segmentEnd:o,vttOffset:l},c=e.i.parseMedia(Ze(t),u,a),p=w(c),m=p.next();!m.done;m=p.next())v=m.value,e.A(v,a||null,u);S=c.filter(function(T){return T.startTime>=e.l&&T.startTime<e.m}),e.j.append(S),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(o,e.m),Y(E)})}ko.prototype.remove=function(e,t){var n=this;return F(function(o){if(o.g==1)return A(o,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),Y(o)})};function BC(e,t,n){e.l=t,e.m=n}function Vg(e,t,n){if(e.C=t,t=e.o.get(t))for(var o=w(t.keys()),a=o.next();!a.done;a=o.next())(a=t.get(a.value).filter(function(l){return l.endTime<=n}))&&e.j.append(a)}function Hg(e,t,n){t.startTime+=n,t.endTime+=n,t=w(t.nestedCues);for(var o=t.next();!o.done;o=t.next())Hg(e,o.value,n)}function jC(e,t,n,o,a){var l=n+" "+o,u=new Map;t=w(t);for(var c=t.next();!c.done;c=t.next()){var p=c.value;c=p.stream,p=p.cue,u.has(c)||u.set(c,new Map),u.get(c).has(l)||u.get(c).set(l,[]),Hg(e,p,a),p.startTime>=e.l&&p.startTime<e.m&&(u.get(c).get(l).push(p),c==e.C&&e.j.append([p]))}for(a=w(u.keys()),l=a.next();!l.done;l=a.next())for(l=l.value,e.o.has(l)||e.o.set(l,new Map),t=w(u.get(l).keys()),c=t.next();!c.done;c=t.next())c=c.value,p=u.get(l).get(c),e.o.get(l).set(c,p);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(o,e.m))}ce("shaka.text.TextEngine",ko),ko.prototype.destroy=ko.prototype.destroy,ko.findParser=function(e){return Sn[e]},ko.unregisterParser=function(e){delete Sn[e]},ko.registerParser=function(e,t){Sn[e]=t};var Sn={};function FC(e,t){return e.concat(t)}function Gg(){}function Ir(e){return e!=null}function Xi(){}function ts(e,t){return e=Nt(e),t=Nt(t),e.split("-")[0]==t.split("-")[0]}function Ia(e,t){return e=Nt(e),t=Nt(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Lh(e,t){return e=Nt(e),t=Nt(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Nt(e){e=w(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=w(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Xg.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Mr(e,t){return e=Nt(e),t=Nt(t),t==e?4:Ia(t,e)?3:Lh(t,e)?2:Ia(e,t)?1:0}function Ph(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=Xg.get(e)||e}function Dh(e){return e.language?Nt(e.language):e.audio&&e.audio.language?Nt(e.audio.language):e.video&&e.video.language?Nt(e.video.language):"und"}function pu(e,t){e=Nt(e);var n=new Set;t=w(t);for(var o=t.next();!o.done;o=t.next())n.add(Nt(o.value));for(t=w(n),o=t.next();!o.done;o=t.next())if(o=o.value,o==e)return o;for(t=w(n),o=t.next();!o.done;o=t.next())if(o=o.value,Ia(o,e))return o;for(t=w(n),o=t.next();!o.done;o=t.next())if(o=o.value,Lh(o,e))return o;for(n=w(n),t=n.next();!t.done;t=n.next())if(t=t.value,Ia(e,t))return t;return null}ce("shaka.util.LanguageUtils",Xi),Xi.findClosestLocale=pu,Xi.getLocaleForVariant=Dh,Xi.getLocaleForText=function(e){return Nt(e.language||"und")},Xi.getBase=Ph,Xi.relatedness=Mr,Xi.areSiblings=function(e,t){var n=Ph(e),o=Ph(t);return e!=n&&t!=o&&n==o},Xi.normalize=Nt,Xi.isSiblingOf=Lh,Xi.isParentOf=Ia,Xi.areLanguageCompatible=ts,Xi.areLocaleCompatible=function(e,t){return e=Nt(e),t=Nt(t),e==t};var Xg=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function mo(e){function t(o){switch(typeof o){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return o;default:if(!o||o.buffer instanceof ArrayBuffer)return o;if(n.has(o))return null;var a=o.constructor==Array;if(o.constructor!=Object&&!a)return null;n.add(o);var l=a?[]:{},u;for(u in o)l[u]=t(o[u]);return a&&(l.length=o.length),l}}var n=new WeakSet;return t(e)}function Nh(e){var t={},n;for(n in e)t[n]=e[n];return t}function Wg(){}function Yg(e,t,n,o){var a=e.variants;if((t.length||n.length)&&(a=$C(a,t,n)),o.length){for(t=new vt,a=w(a),n=a.next();!n.done;n=a.next())n=n.value,t.push(String(n.video.width||0),n);var l=[];t.forEach(function(k,M){k=0;var I=[];M=w(M);for(var U=M.next(),N={};!U.done;N={Ae:void 0},U=M.next())N.Ae=U.value,U=o.filter(function(z){return function(P){return z.Ae.decodingInfos[0][P]}}(N)).length,U>k?(k=U,I=[N.Ae]):U==k&&I.push(N.Ae);l.push.apply(l,L(I))}),a=l}n=new Set,t=new Set,a=w(a);for(var u=a.next();!u.done;u=a.next())u=u.value,u.audio&&n.add(u.audio),u.video&&t.add(u.video);n=Array.from(n).sort(function(k,M){return k.bandwidth-M.bandwidth});var c=[];for(a=new Map,n=w(n),u=n.next();!u.done;u=n.next()){u=u.value;var p=u.language+(u.channelsCount||0)+(u.audioSamplingRate||0)+u.roles.join(",")+u.label+u.groupId+u.fastSwitching,m=a.get(p)||[];if(m.length){var v=m[m.length-1],S=Qn(v.codecs),E=Qn(u.codecs);S!=E||u.bandwidth&&v.bandwidth&&!(u.bandwidth>v.bandwidth)||(m.push(u),c.push(u.id))}else m.push(u),c.push(u.id);a.set(p,m)}n=Array.from(t).sort(function(k,M){return k.bandwidth&&M.bandwidth?k.bandwidth-M.bandwidth:k.width-M.width}),t=tn();var T=[];for(a=new Map,n=w(n),u=n.next();!u.done;u=n.next()){if(u=u.value,p=Math.round(u.frameRate||0)+(u.hdr||"")+u.fastSwitching,m=a.get(p)||[],m.length){if(v=m[m.length-1],!t&&(S=Qn(v.codecs),E=Qn(u.codecs),S!==E))continue;u.width>v.width||u.height>v.height?(m.push(u),T.push(u.id)):u.width==v.width&&u.height==v.height&&(S=Qn(v.codecs),E=Qn(u.codecs),S!=E||u.bandwidth&&v.bandwidth&&!(u.bandwidth>v.bandwidth)||(m.push(u),T.push(u.id)))}else m.push(u),T.push(u.id);a.set(p,m)}e.variants=e.variants.filter(function(k){var M=k.audio;return k=k.video,!(M&&!c.includes(M.id)||k&&!T.includes(k.id))})}function $C(e,t,n){t=w(t);for(var o=t.next(),a={};!o.done;a={oh:void 0},o=t.next())if(a.oh=o.value,o=e.filter(function(l){return function(u){return u.video&&u.video.codecs.startsWith(l.oh)}}(a)),o.length){e=o;break}for(n=w(n),t=n.next(),o={};!t.done;o={ig:void 0},t=n.next())if(o.ig=t.value,t=e.filter(function(l){return function(u){return u.audio&&u.audio.codecs.startsWith(l.ig)}}(o)),t.length){e=t;break}return e}function zC(e,t,n){e.variants=e.variants.filter(function(o){return gu(o,t,n)})}function gu(e,t,n){function o(c,p,m){return c>=p&&c<=m}var a=e.video;if(a&&a.width&&a.height){var l=a.width,u=a.height;if(u>l&&(u=w([u,l]),l=u.next().value,u=u.next().value),!o(l,t.minWidth,Math.min(t.maxWidth,n.width))||!o(u,t.minHeight,Math.min(t.maxHeight,n.height))||!o(a.width*a.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!o(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!o(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!o(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function qg(e,t,n){var o=!1;e=w(e);for(var a=e.next();!a.done;a=e.next()){a=a.value;var l=a.allowedByApplication;a.allowedByApplication=gu(a,t,n),l!=a.allowedByApplication&&(o=!0)}return o}function VC(e,t,n){return n=n===void 0?[]:n,F(function(o){return o.g==1?A(o,Kg(e,t,0<t.offlineSessionIds.length,n),2):(WC(t),A(o,YC(t),0))})}function Kg(e,t,n,o){var a,l;return F(function(u){if(u.g==1)return co()&&HC(t.variants),A(u,Jg(t.variants,n,!1,o),2);a=null,e&&(l=e.g)&&(a=l.keySystem),t.variants=t.variants.filter(function(c){var p=GC(c,a);if(!p){var m=[];c.audio&&m.push(om(c.audio)),c.video&&m.push(om(c.video))}return p}),Y(u)})}function HC(e){var t={dvav:"avc3",dva1:"avc1",dvhe:"hev1",dvh1:"hvc1",dvc1:"vvc1",dvi1:"vvi1"},n=new Set;e=w(e);for(var o=e.next();!o.done;o=e.next())o=o.value,o.video&&n.add(o.video);for(n=w(n),e=n.next();!e.done;e=n.next()){e=e.value,o=w(Object.keys(t));for(var a=o.next();!a.done;a=o.next())if(a=a.value,e.codecs.includes(a)){e.codecs=e.codecs.replace(a,t[a]);break}}}function GC(e,t){var n=co(),o=Ut("Firefox")&&cu(),a=e.video,l=a&&a.width||0,u=a&&a.height||0;if(n&&a&&(1920<l||1080<u)&&(a.codecs.includes("avc1.")||a.codecs.includes("avc3.")))return!1;if(a){if(n=Ma(a.codecs),a.codecs.includes(",")){if(l=a.codecs.split(","),n=Qr("video",l),n=Ma(n),l=Qr("audio",l),l=ns(l,a.mimeType),u=Jr(a.mimeType,l,"audio"),!kt(u))return!1;n=[n,l].join()}if(l=Jr(a.mimeType,n,"video"),!kt(l))return!1;a.codecs=n}if(a=e.audio,o&&a&&a.encrypted&&a.codecs.toLowerCase().includes("opus"))return!1;if(a){if(o=ns(a.codecs,a.mimeType),n=Jr(a.mimeType,o,"audio"),!kt(n))return!1;a.codecs=o}return e.decodingInfos.some(function(c){return!(!c.supported||t&&(c=c.keySystemAccess)&&c.keySystem!=t)})}function Zg(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=w(t);for(var o=t.next();!o.done;o=t.next()){var a=o.value;o=JSON.stringify(a),a=e[a],a instanceof Object?(a=Zg(a),n.push(o+":"+a)):(a=JSON.stringify(a),n.push(o+":"+a))}return"{"+n.join(",")+"}"}function Qg(e,t){var n,o,a,l,u,c,p;return F(function(m){if(m.g==1){for(n=function(v,S){if(v){var E=Nh(v);return E.supported=v.supported&&S.supported,E.powerEfficient=v.powerEfficient&&S.powerEfficient,E.smooth=v.smooth&&S.smooth,S.keySystemAccess&&!E.keySystemAccess&&(E.keySystemAccess=S.keySystemAccess),E}return S},o=null,a=[],l=w(t),u=l.next(),c={};!u.done;c={cache:void 0,Dd:void 0},u=l.next())p=u.value,c.Dd=Zg(p),c.cache=rm,c.cache[c.Dd]?o=n(o,c.cache[c.Dd]):a.push(XC(p).then(function(v){return function(S){var E=null;S=w(S||[]);for(var T=S.next();!T.done;T=S.next())E=n(E,T.value);E&&(v.cache[v.Dd]=E,o=n(o,E))}}(c)));return A(m,Promise.all(a),2)}o&&e.decodingInfos.push(o),Y(m)})}function XC(e){var t=[""];e.video&&(t=Ti(e.video.contentType).split(","));var n=[""];e.audio&&(n=Ti(e.audio.contentType).split(","));var o=[];t=w(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;for(var l=w(n),u=l.next(),c={};!u.done;c={xc:void 0},u=l.next())u=u.value,c.xc=mo(e),e.video&&(c.xc.video.contentType=wn(Gi(c.xc.video.contentType),a)),e.audio&&(c.xc.audio.contentType=wn(Gi(c.xc.audio.contentType),u)),o.push(new Promise(function(p){return function(m,v){navigator.mediaCapabilities.decodingInfo(p.xc).then(function(S){m(S)}).catch(v)}}(c)))}return Promise.all(o).catch(function(){return JSON.stringify(e),null})}function Jg(e,t,n,o){var a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j;return F(function(G){switch(G.g){case 1:if(e.some(function(Z){return Z.decodingInfos.length}))return G.return();a=w(o),l=a.next(),u={};case 2:if(l.done){G.u(4);break}u.Qg=l.value,c=!1,p=w(e),m=p.next();case 5:if(m.done){G.u(7);break}v=m.value,S=em(v,t,n).filter(function(Z){return function(ee){return ee=ee[0],(ee.keySystemConfiguration&&ee.keySystemConfiguration.keySystem)===Z.Qg}}(u)),E=w(S),T=E.next();case 8:if(T.done){G.u(10);break}return k=T.value,A(G,Qg(v,k),9);case 9:T=E.next(),G.u(8);break;case 10:v.decodingInfos.length&&(c=!0),m=p.next(),G.u(5);break;case 7:if(c)return G.return();u={Qg:void 0},l=a.next(),G.u(2);break;case 4:M=w(e),I=M.next();case 12:if(I.done){G.u(0);break}U=I.value,N=em(U,t,n).filter(function(Z){return Z=Z[0],Z=Z.keySystemConfiguration&&Z.keySystemConfiguration.keySystem,!Z||!o.includes(Z)}),z=w(N),P=z.next();case 15:if(P.done){I=M.next(),G.u(12);break}return j=P.value,A(G,Qg(U,j),16);case 16:P=z.next(),G.u(15)}})}function em(e,t,n){var o=e.audio,a=e.video,l=[],u=[];if(a)for(var c=w(a.fullMimeTypes),p=c.next();!p.done;p=c.next()){p=p.value;var m=Ti(p);if(m.includes(",")&&!o){var v=m.split(","),S=Gi(p);m=Qr("video",v),v=Qr("audio",v),v=ns(v,S),S=Jr(S,v,"audio"),u.push({contentType:S,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(m=Ma(m),p={contentType:Jr(Gi(p),m,"video"),width:a.width||64,height:a.height||64,bitrate:a.bandwidth||e.bandwidth||1,framerate:a.frameRate||1},a.hdr)switch(a.hdr){case"SDR":p.transferFunction="srgb";break;case"PQ":p.transferFunction="pq";break;case"HLG":p.transferFunction="hlg"}a.colorGamut&&(p.colorGamut=a.colorGamut),l.push(p)}if(o)for(c=w(o.fullMimeTypes),p=c.next();!p.done;p=c.next())m=p.value,p=Gi(m),m=ns(Ti(m),p),p=Jr(p,m,"audio"),u.push({contentType:p,channels:o.channelsCount||2,bitrate:o.bandwidth||e.bandwidth||1,samplerate:o.audioSamplingRate||1,spatialRendering:o.spatialAudio});for(c=[],l.length==0&&l.push(null),u.length==0&&u.push(null),l=w(l),p=l.next();!p.done;p=l.next())for(p=p.value,m=w(u),S=m.next();!S.done;S=m.next())S=S.value,v={type:n?"file":"media-source"},p&&(v.video=p),S&&(v.audio=S),c.push(v);if(u=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!u.length)return[c];for(e=[],n=new Map,u=w(u),l=u.next();!l.done;l=u.next())l=l.value,n.get(l.keySystem)||n.set(l.keySystem,[]),n.get(l.keySystem).push(l);for(u=t?"required":"optional",t=t?["persistent-license"]:["temporary"],l=w(n.keys()),p=l.next();!p.done;p=l.next()){for(p=p.value,m=[],S=w(c),v=S.next();!v.done;v=S.next()){v=Object.assign({},v.value);var E=n.get(p),T={keySystem:p,initDataType:"cenc",persistentState:u,distinctiveIdentifier:"optional",sessionTypes:t};E=w(E);for(var k=E.next();!k.done;k=E.next()){if(k=k.value,k.initData&&k.initData.length){for(var M=new Set,I=w(k.initData),U=I.next();!U.done;U=I.next())M.add(U.value.initDataType);T.initDataType=k.initData[0].initDataType}k.distinctiveIdentifierRequired&&(T.distinctiveIdentifier="required"),k.persistentStateRequired&&(T.persistentState="required"),k.sessionType&&(T.sessionTypes=[k.sessionType]),o&&(T.audio?(k.encryptionScheme&&(T.audio.encryptionScheme=T.audio.encryptionScheme||k.encryptionScheme),T.audio.robustness=T.audio.robustness||k.audioRobustness):(T.audio={robustness:k.audioRobustness},k.encryptionScheme&&(T.audio.encryptionScheme=k.encryptionScheme)),T.audio.robustness==""&&delete T.audio.robustness),a&&(T.video?(k.encryptionScheme&&(T.video.encryptionScheme=T.video.encryptionScheme||k.encryptionScheme),T.video.robustness=T.video.robustness||k.videoRobustness):(T.video={robustness:k.videoRobustness},k.encryptionScheme&&(T.video.encryptionScheme=k.encryptionScheme)),T.video.robustness==""&&delete T.video.robustness)}v.keySystemConfiguration=T,m.push(v)}e.push(m)}return e}function ns(e,t){return e.toLowerCase()=="flac"?Kr()?"fLaC":"flac":e.toLowerCase()==="opus"?Kr()&&du(t)=="mp4"?"Opus":"opus":e}function Ma(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function WC(e){e.textStreams=e.textStreams.filter(function(t){return t=wn(t.mimeType,t.codecs),ka(t)})}function YC(e){var t,n,o,a,l,u,c;return F(function(p){switch(p.g){case 1:t=[],n=w(e.imageStreams),o=n.next();case 2:if(o.done){p.u(4);break}if(a=o.value,l=a.mimeType,l=="application/mp4"&&a.codecs=="mjpg"&&(l="image/jpg"),vu.has(l)){p.u(5);break}if(u=ZC.get(l),!u){vu.set(l,!1),p.u(5);break}return A(p,qC(u),7);case 7:c=p.h,vu.set(l,c);case 5:vu.get(l)&&t.push(a),o=n.next(),p.u(2);break;case 4:e.imageStreams=t,Y(p)}})}function qC(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function is(e){var t=e.audio,n=e.video,o=t?t.mimeType:null,a=n?n.mimeType:null,l=t?t.codecs:null,u=n?n.codecs:null,c=[];u&&c.push(u),l&&c.push(l);var p=[];n&&p.push(n.mimeType),t&&p.push(t.mimeType),p=p[0]||null;var m=[];t&&m.push(t.kind),n&&m.push(n.kind),m=m[0]||null;var v=new Set;if(t)for(var S=w(t.roles),E=S.next();!E.done;E=S.next())v.add(E.value);if(n)for(S=w(n.roles),E=S.next();!E.done;E=S.next())v.add(E.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:m,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:p,audioMimeType:o,videoMimeType:a,codecs:c.join(", "),audioCodec:l,videoCodec:u,primary:e.primary,roles:Array.from(v),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,u.includes(",")&&(e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage)),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function mu(e){return{id:e.id,active:!1,type:Tt,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Oh(e){var t=e.width||null,n=e.height||null,o=null;e.segmentIndex&&(o=e.segmentIndex.get(0));var a=e.tilesLayout;return o&&(a=o.tilesLayout||a),a&&t!=null&&(t/=Number(a.split("x")[0])),a&&n!=null&&(n/=Number(a.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:a||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Uh(e){return e.__shaka_id||(e.__shaka_id=KC++),e.__shaka_id}function tm(e){var t=nm(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Bh(e){var t=nm(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function nm(e){var t=e.language;return{id:Uh(e),active:!1,type:"",bandwidth:0,language:Nt(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Ra(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function yu(e){return e.filter(function(t){return Ra(t)})}function _a(e,t,n,o){var a=e,l=e.filter(function(p){return p.primary});l.length&&(a=l);var u=a.length?a[0].language:"";if(a=a.filter(function(p){return p.language==u}),t){var c=pu(Nt(t),e.map(function(p){return p.language}));c&&(a=e.filter(function(p){return Nt(p.language)==c}))}if(a=a.filter(function(p){return p.forced==o}),n){if(e=im(a,n),e.length)return e}else if(e=a.filter(function(p){return p.roles.length==0}),e.length)return e;return e=a.map(function(p){return p.roles}).reduce(FC,[]),e.length?im(a,e[0]):a}function im(e,t){return e.filter(function(n){return n.roles.includes(t)})}function om(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}ce("shaka.util.StreamUtils",Wg),Wg.meetsRestrictions=gu;var rm={},KC=0,vu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),ZC=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function qt(){var e=this;this.A=null,this.j=!1,this.i=new Q,this.F=new ct,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new Q,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.s=[],this.B=1,this.G=!1,this.h=this.o=this.g=this.l=null,this.C=new mt(function(){if(e.j&&e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=null}s=qt.prototype,s.stop=function(){this.A=null,this.j=!1,this.s=[],this.B=1,this.o=this.l=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.m=null},s.release=function(){this.F.release(),this.C=null},s.init=function(e){this.A=e},s.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:d.devicePixelRatio;e=d.screen.height*n,t=d.screen.width*n}this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:d.devicePixelRatio,e=Math.min(e,this.o.clientHeight*n),t=Math.min(t,this.o.clientWidth*n)),n=this.s.filter(function(m){return m&&!(m.audio&&m.audio.fastSwitching||m.video&&m.video.fastSwitching)}),n.length||(n=this.s);var o=n;if(n.length!=this.s.length&&(o=this.s.filter(function(m){return m&&!!(m.audio&&m.audio.fastSwitching||m.video&&m.video.fastSwitching)})),n=jh(this,this.g.restrictions,o,1/0,1/0),e!=1/0||t!=1/0){n=QC(n),n=w(n);for(var a=n.next();!a.done;a=n.next())if(a=a.value,a.height>=e&&a.width>=t){e=a.height,t=a.width;break}n=jh(this,this.g.restrictions,o,e,t)}for(e=this.getBandwidthEstimate(),o.length&&!n.length&&(n=jh(this,null,o,1/0,1/0),n=[n[0]]),t=n[0]||null,o=0;o<n.length;o++){a=n[o];for(var l=isNaN(this.B)?1:Math.abs(this.B),u=l*a.bandwidth/this.g.bandwidthDowngradeTarget,c={bandwidth:1/0},p=o+1;p<n.length;p++)if(a.bandwidth!=n[p].bandwidth){c=n[p];break}l=l*c.bandwidth/this.g.bandwidthUpgradeTarget,e>=u&&e<=l&&(t.bandwidth!=a.bandwidth||t.bandwidth==a.bandwidth&&t.video&&a.video&&(t.video.width<a.video.width||t.video.height<a.video.height))&&(t=a)}return this.l=Date.now(),t},s.enable=function(){this.j=!0},s.disable=function(){this.j=!1},s.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.i.sample(e,t),n&&this.l!=null&&this.j&&sm(this))},s.trySuggestStreams=function(){this.l!=null&&this.j&&sm(this)},s.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.m?this.m.getBandwidthEstimate(e):e},s.setVariants=function(e){this.s=e},s.playbackRateChanged=function(e){this.B=e},s.setMediaElement=function(e){var t=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in d&&(this.h=new ResizeObserver(function(){t.C.Y(JC)}),this.h.observe(this.o))},s.setCmsdManager=function(e){this.m=e},s.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function sm(e){if(!e.G){var t=e.i;if(!(t.g>=t.i))return;e.G=!0,e.l-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.l<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function jh(e,t,n,o,a){if(e.m){var l=e.m.zg();l&&(n=n.filter(function(u){return u.bandwidth&&l?u.bandwidth<=l:!0}))}return t&&(n=n.filter(function(u){return gu(u,t,{width:a,height:o})})),n.sort(function(u,c){return u.bandwidth-c.bandwidth})}function QC(e){var t=[];e=w(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(o,a){return o.width-a.width})}ce("shaka.abr.SimpleAbrManager",qt),qt.prototype.configure=qt.prototype.configure,qt.prototype.setCmsdManager=qt.prototype.setCmsdManager,qt.prototype.setMediaElement=qt.prototype.setMediaElement,qt.prototype.playbackRateChanged=qt.prototype.playbackRateChanged,qt.prototype.setVariants=qt.prototype.setVariants,qt.prototype.getBandwidthEstimate=qt.prototype.getBandwidthEstimate,qt.prototype.trySuggestStreams=qt.prototype.trySuggestStreams,qt.prototype.segmentDownloaded=qt.prototype.segmentDownloaded,qt.prototype.disable=qt.prototype.disable,qt.prototype.enable=qt.prototype.enable,qt.prototype.chooseVariant=qt.prototype.chooseVariant,qt.prototype.init=qt.prototype.init,qt.prototype.release=qt.prototype.release,qt.prototype.stop=qt.prototype.stop;var JC=1;ce("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),ce("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function xu(e,t,n,o){for(n=n===void 0?!0:n,o=o===void 0?!1:o,this.h=e,this.g=new Set([e]),t=t||[],e=w(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,o)}xu.prototype.add=function(e,t,n){return am(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function am(e,t,n,o){var a;if(!(a=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(a=e.audio&&t.audio)){a=e.audio;var l=t.audio;a=!!((!a.channelsCount||!l.channelsCount||2<a.channelsCount||2<l.channelsCount)&&a.channelsCount!=l.channelsCount||a.spatialAudio!==l.spatialAudio||n&&!lm(a,l)||!um(a.roles,l.roles)||o&&a.groupId!==l.groupId)}return!(o=a)&&(o=e.video&&t.video)&&(e=e.video,t=t.video,o=!((!n||lm(e,t))&&um(e.roles,t.roles))),!o}xu.prototype.values=function(){return this.g.values()};function lm(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(o){return es(o)}),t=t.codecs.split(",").map(function(o){return es(o)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function um(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=w(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function fm(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new os(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}fm.prototype.create=function(e){var t=this,n=this.h=="smooth"&&tn(),o=e.filter(function(a){return am(t.i,a,!n,t.g)});return o.length?new xu(o[0],o,!n,this.g):this.j.create(e)};function os(e,t,n,o,a,l,u,c,p,m,v){this.A=e,this.B=t,this.i=n,this.j=o,this.C=a,this.m=l,this.h=u===void 0?"":u,this.l=c===void 0?"":c,this.o=p===void 0?"reload":p,this.s=m===void 0?!1:m,this.g=v===void 0?"":v}os.prototype.create=function(e){var t=[];t=eT(e,this.A);var n=e.filter(function(o){return o.primary});return t=t.length?t:n.length?n:e,e=tT(t,this.B),e.length&&(t=e),this.m&&(e=sT(t,this.m),e.length&&(t=e)),this.j&&(e=rT(t,this.j),e.length&&(t=e)),this.i&&(e=oT(t,this.i),e.length&&(t=e)),this.h&&(e=nT(t,this.h),e.length&&(t=e)),this.l&&(e=iT(t,this.l),e.length&&(t=e)),e=aT(t,this.C),e.length&&(t=e),this.g&&(e=lT(t,this.g),e.length&&(t=e)),new xu(t[0],t,!(this.o=="smooth"&&tn()),this.s)};function eT(e,t){t=Nt(t);var n=pu(t,e.map(function(o){return Dh(o)}));return n?e.filter(function(o){return n==Dh(o)}):[]}function tT(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function nT(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function iT(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function oT(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function rT(e,t){return t=="AUTO"&&(t=d.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function sT(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function aT(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function lT(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function uT(){this.g=La,this.i=new Map().set(La,2).set(rs,1),this.h=0}function cm(e,t,n){e.i.set(La,n).set(rs,t)}var rs=0,La=1;function hm(e,t){var n=no();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function dm(e){var t,n;return F(function(o){if(o.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new J(2,7,1010);return t=e.g,e.g++,t==0?o.return():(n=e.h*(1+(2*Math.random()-1)*e.o),A(o,new Promise(function(a){new mt(a).Y(n/1e3)}),2))}e.h*=e.m,Y(o)})}function no(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Bt(){var e,t,n=new Promise(function(o,a){e=o,t=a});return n.resolve=e,n.reject=t,n}Bt.prototype.resolve=function(){},Bt.prototype.reject=function(){};function gn(e,t){this.promise=e,this.i=t,this.g=!1}function Rr(e){return new gn(Promise.reject(e),function(){return Promise.resolve()})}function Fh(){var e=Promise.reject(new J(2,7,7001));return e.catch(function(){}),new gn(e,function(){return Promise.resolve()})}function ss(e){return new gn(Promise.resolve(e),function(){return Promise.resolve()})}function pm(e){return new gn(e,function(){return e.catch(function(){})})}gn.prototype.abort=function(){return this.g=!0,this.i()};function gm(e){return new gn(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}gn.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},gn.prototype.Aa=function(e,t){function n(c){return function(p){if(a.g&&c)l.reject(u);else{var m=c?e:t;m?o=fT(m,p,l):(c?l.resolve:l.reject)(p)}}}function o(){return l.reject(u),a.abort()}var a=this,l=new Bt,u=new J(2,7,7001);return this.promise.then(n(!0),n(!1)),new gn(l,function(){return o()})};function fT(e,t,n){try{var o=e(t);return o&&o.promise&&o.abort?(n.resolve(o.promise),function(){return o.abort()}):(n.resolve(o),function(){return Promise.resolve(o).then(function(){},function(){})})}catch(a){return n.reject(a),function(){return Promise.resolve()}}}ce("shaka.util.AbortableOperation",gn),gn.prototype.chain=gn.prototype.Aa,gn.prototype.finally=gn.prototype.finally,gn.all=gm,gn.prototype.abort=gn.prototype.abort,gn.notAbortable=pm,gn.completed=ss,gn.aborted=Fh,gn.failed=Rr;function Fe(e,t){if(t)if(t instanceof Map)for(var n=w(t.keys()),o=n.next();!o.done;o=n.next())o=o.value,Object.defineProperty(this,o,{value:t.get(o),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=d.performance&&d.performance.now?d.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function mm(e){var t=new Fe(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Fe.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Fe.prototype.stopImmediatePropagation=function(){this.g=!0},Fe.prototype.stopPropagation=function(){},ce("shaka.util.FakeEvent",Fe);var wu={ij:"abrstatuschanged",jj:"adaptation",kj:"audiotrackchanged",lj:"buffering",mj:"complete",nj:"downloadfailed",oj:"downloadheadersreceived",pj:"drmsessionupdate",rj:"emsg",Ij:"prft",Error:"error",sj:"expirationupdated",tj:"firstquartile",uj:"gapjumped",xj:"keystatuschanged",zj:"loaded",Aj:"loading",Cj:"manifestparsed",Dj:"manifestupdated",Ej:"mediaqualitychanged",Metadata:"metadata",Fj:"midpoint",Gj:"nospatialvideoinfo",Hj:"onstatechange",Jj:"ratechange",Lj:"segmentappended",Mj:"sessiondata",Nj:"spatialvideoinfo",Oj:"stalldetected",Pj:"started",Qj:"statechanged",Rj:"streaming",Sj:"textchanged",Tj:"texttrackvisibility",Uj:"thirdquartile",Vj:"timelineregionadded",Wj:"timelineregionenter",Xj:"timelineregionexit",Yj:"trackschanged",$j:"unloading",bk:"variantchanged"};function Lt(){this.ya=new vt,this.me=this}Lt.prototype.addEventListener=function(e,t){this.ya&&this.ya.push(e,t)},Lt.prototype.removeEventListener=function(e,t){this.ya&&this.ya.remove(e,t)},Lt.prototype.dispatchEvent=function(e){if(!this.ya)return!0;var t=this.ya.get(e.type)||[],n=this.ya.get("All");for(n&&(t=t.concat(n)),t=w(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.me,e.currentTarget=this.me;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Lt.prototype.release=function(){this.ya=null};function as(){this.g=[]}function _r(e,t){e.g.push(t.finally(function(){Kn(e.g,t)}))}as.prototype.destroy=function(){for(var e=[],t=w(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Vt(e,t,n,o,a,l){Lt.call(this),this.i=!1,this.m=new as,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.A=n||null,this.B=o||null,this.F=a||null,this.C=l||null,this.o=this.s=!1}K(Vt,Lt),s=Vt.prototype,s.Pf=function(e){this.s=e},s.Qf=function(e){this.o=e};function Io(e,t,n,o){n=n||Sm;var a=Cu[e];(!a||n>=a.priority)&&(Cu[e]={priority:n,ie:t,Di:o===void 0?!1:o})}function ym(e,t){for(var n=w(e.g),o=n.next();!o.done;o=n.next())t.g.add(o.value);for(e=w(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}s.Gi=function(e){this.g.add(e)},s.bj=function(e){this.g.delete(e)},s.mg=function(){this.g.clear()},s.Hi=function(e){this.h.add(e)},s.cj=function(e){this.h.delete(e)},s.ng=function(){this.h.clear()};function kn(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}s.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Lt.prototype.release.call(this),this.m.destroy()},s.request=function(e,t,n){var o=this,a=new wm;if(this.i){var l=Promise.reject(new J(2,7,7001));return l.catch(function(){}),new Su(l,function(){return Promise.resolve()},a)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?mo(t.retryParameters):no(),t.uris=mo(t.uris),l=cT(this,e,t,n);var u=l.Aa(function(){return vm(o,e,t,n,new hm(t.retryParameters,!1),0,null,a)}),c=u.Aa(function(E){return hT(o,e,E,n)}),p=Date.now(),m=0;l.promise.then(function(){m=Date.now()-p},function(){});var v=0;u.promise.then(function(){v=Date.now()},function(){});var S=c.Aa(function(E){var T=Date.now()-v,k=E.response;return k.timeMs+=m,k.timeMs+=T,E.ii||!o.l||k.fromCache||t.method=="HEAD"||e!=io||o.l(k.timeMs,k.data.byteLength,xm(n)),o.C&&o.C(e,k,n),k},function(E){throw E&&(E.severity=2),E});return l=new Su(S.promise,function(){return S.abort()},a),_r(this.m,l),l};function cT(e,t,n,o){function a(c){l=l.Aa(function(){return n.body&&(n.body=hn(n.body)),c(t,n,o)})}var l=ss(void 0);e.B&&a(e.B),e=w(e.g);for(var u=e.next();!u.done;u=e.next())a(u.value);return l.Aa(void 0,function(c){throw c instanceof J&&c.code==7001?c:new J(2,1,1006,c)})}function vm(e,t,n,o,a,l,u,c){e.s&&(n.uris[l]=n.uris[l].replace("https://","http://")),e.o&&(n.uris[l]=n.uris[l].replace("http://","https://")),0<l&&e.F&&e.F(t,o,n.uris[l],n.uris[l-1]);var p=new pn(n.uris[l]),m=p.Bb,v=!1;m||(m=location.protocol,m=m.slice(0,-1),nu(p,m),n.uris[l]=p.toString()),m=m.toLowerCase();var S=(m=Cu[m])?m.ie:null;if(!S)return Rr(new J(2,1,1e3,p));var E=m.Di,T=null,k=null,M=!1,I=!1,U;return pm(dm(a)).Aa(function(){if(e.i)return Fh();U=Date.now();var N=0;n.requestStartTime=Date.now();var z=S(n.uris[l],n,t,function(G,Z,ee){T&&T.stop(),k&&k.Y(j/1e3),e.l&&t==io&&(N++,n.packetNumber=N,e.l(G,Z,xm(o),n),v=!0,c.g=ee)},function(G){e.j&&e.j(G,n,t),I=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!E)return z;var P=n.retryParameters.connectionTimeout;P&&(T=new mt(function(){M=!0,z.abort()}),T.Y(P/1e3));var j=n.retryParameters.stallTimeout;return j&&(k=new mt(function(){M=!0,z.abort()})),z}).Aa(function(N){T&&T.stop(),k&&k.stop(),N.timeMs==null&&(N.timeMs=Date.now()-U);var z={response:N,ii:v};return!I&&e.j&&e.j(N.headers,n,t),z},function(N){if(T&&T.stop(),k&&k.stop(),e.A){var z=null,P=0;N instanceof J&&(z=N,N.code==1001&&(P=N.data[1])),e.A(n,z,P,M)}if(e.i)return Fh();if(M&&(N=new J(1,1,1003,n.uris[l],t)),N instanceof J){if(N.code==7001)throw N;if(N.code==1010)throw u;if(N.severity==1)return z=new Map().set("error",N),z=new Fe("retry",z),e.dispatchEvent(z),l=(l+1)%n.uris.length,vm(e,t,n,o,a,l,N,c)}throw N})}function hT(e,t,n,o){var a=ss(void 0);e=w(e.h);for(var l=e.next(),u={};!l.done;u={Vg:void 0},l=e.next())u.Vg=l.value,a=a.Aa(function(c){return function(){var p=n.response;return p.data&&(p.data=hn(p.data)),(0,c.Vg)(t,p,o)}}(u));return a.Aa(function(){return n},function(c){var p=2;if(c instanceof J){if(c.code==7001)throw c;p=c.severity}throw new J(p,1,1007,c)})}function xm(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}ce("shaka.net.NetworkingEngine",Vt),Vt.prototype.request=Vt.prototype.request,Vt.prototype.destroy=Vt.prototype.destroy,Vt.makeRequest=kn,Vt.defaultRetryParameters=function(){return no()},Vt.prototype.clearAllResponseFilters=Vt.prototype.ng,Vt.prototype.unregisterResponseFilter=Vt.prototype.cj,Vt.prototype.registerResponseFilter=Vt.prototype.Hi,Vt.prototype.clearAllRequestFilters=Vt.prototype.mg,Vt.prototype.unregisterRequestFilter=Vt.prototype.bj,Vt.prototype.registerRequestFilter=Vt.prototype.Gi,Vt.unregisterScheme=function(e){delete Cu[e]},Vt.registerScheme=Io,Vt.prototype.setForceHTTPS=Vt.prototype.Qf,Vt.prototype.setForceHTTP=Vt.prototype.Pf;function wm(){this.g=0}Vt.NumBytesRemainingClass=wm;function Su(e,t,n){gn.call(this,e,t),this.h=n}K(Su,gn),Vt.PendingRequest=Su;var io=1;Vt.RequestType={MANIFEST:0,SEGMENT:io,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Vt.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6};var Sm=3;Vt.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Sm};var Cu={};function ls(e){this.g=!1,this.h=new Bt,this.i=e}ls.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Ft(e,t){if(e.g)throw t instanceof J&&t.code==7003?t:new J(2,7,7003,t)}function $h(e,t){var n=[];e=w(e);for(var o=e.next();!o.done;o=e.next())n.push(t(o.value));return n}function dT(e,t){e=w(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Pa(e){for(var t=new Map,n=w(Object.keys(e)),o=n.next();!o.done;o=n.next())o=o.value,t.set(o,e[o]);return t}function zh(e){var t={};return e.forEach(function(n,o){t[o]=n}),t}function $t(e,t){this.h=Tn(e),this.i=t==Cm,this.g=0}s=$t.prototype,s.na=function(){return this.g<this.h.byteLength},s.va=function(){return this.g},s.getLength=function(){return this.h.byteLength},s.T=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw Mo()}},s.la=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw Mo()}},s.P=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw Mo()}},s.Sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw Mo()}},s.Nc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw Mo()}if(2097151<t)throw new J(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},s.qb=function(e){if(this.g+e>this.h.byteLength)throw Mo();var t=Ze(this.h,this.g,e);return this.g+=e,t},s.skip=function(e){if(this.g+e>this.h.byteLength)throw Mo();this.g+=e},s.Oi=function(e){if(this.g<e)throw Mo();this.g-=e},s.seek=function(e){if(0>e||e>this.h.byteLength)throw Mo();this.g=e},s.oc=function(){for(var e=this.g;this.na()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Ze(this.h,e,this.g-e),this.g+=1,Wt(e)};function Mo(){return new J(2,3,3e3)}ce("shaka.util.DataViewReader",$t),$t.prototype.readTerminatedString=$t.prototype.oc,$t.prototype.seek=$t.prototype.seek,$t.prototype.rewind=$t.prototype.Oi,$t.prototype.skip=$t.prototype.skip,$t.prototype.readBytes=$t.prototype.qb,$t.prototype.readUint64=$t.prototype.Nc,$t.prototype.readInt32=$t.prototype.Sg,$t.prototype.readUint32=$t.prototype.P,$t.prototype.readUint16=$t.prototype.la,$t.prototype.readUint8=$t.prototype.T,$t.prototype.getLength=$t.prototype.getLength,$t.prototype.getPosition=$t.prototype.va,$t.prototype.hasMoreData=$t.prototype.na;var Cm=1;$t.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Cm};function zt(){this.i=[],this.h=[],this.g=!1}s=zt.prototype,s.box=function(e,t){return e=Tm(e),this.i[e]=pT,this.h[e]=t,this},s.S=function(e,t){return e=Tm(e),this.i[e]=Em,this.h[e]=t,this},s.stop=function(){this.g=!0},s.parse=function(e,t,n){for(e=new $t(e,0),this.g=!1;e.na()&&!this.g;)this.Kc(0,e,t,n)},s.Kc=function(e,t,n,o){var a=t.va();if(o&&a+8>t.getLength())this.g=!0;else{var l=t.P(),u=t.P(),c=Tu(u),p=!1;switch(l){case 0:l=t.getLength()-a;break;case 1:if(o&&t.va()+8>t.getLength()){this.g=!0;return}l=t.Nc(),p=!0}var m=this.h[u];if(m){var v=null,S=null;if(this.i[u]==Em){if(o&&t.va()+4>t.getLength()){this.g=!0;return}S=t.P(),v=S>>>24,S&=16777215}u=a+l,n&&u>t.getLength()&&(u=t.getLength()),o&&u>t.getLength()?this.g=!0:(o=u-t.va(),t=0<o?t.qb(o):new Uint8Array(0),t=new $t(t,0),m({name:c,parser:this,partialOkay:n||!1,version:v,flags:S,reader:t,size:l,start:a+e,has64BitSize:p}))}else t.skip(Math.min(a+l-t.va(),t.getLength()-t.va()))}};function xt(e){for(var t=fs(e);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Qo(e){for(var t=fs(e),n=e.reader.P(),o=0;o<n&&(e.parser.Kc(e.start+t,e.reader,e.partialOkay),!e.parser.g);o++);}function li(e){var t=fs(e);for(e.reader.skip(78);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Vh(e){var t=fs(e);e.reader.skip(8);var n=e.reader.la();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function us(e){return function(t){e(t.reader.qb(t.reader.getLength()-t.reader.va()))}}function Tm(e){var t=0;e=w(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Tu(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function fs(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}ce("shaka.util.Mp4Parser",zt),zt.headerSize=fs,zt.typeToString=Tu,zt.allData=us,zt.audioSampleEntry=Vh,zt.visualSampleEntry=li,zt.sampleDescription=Qo,zt.children=xt,zt.prototype.parseNext=zt.prototype.Kc,zt.prototype.parse=zt.prototype.parse,zt.prototype.stop=zt.prototype.stop,zt.prototype.fullBox=zt.prototype.S,zt.prototype.box=zt.prototype.box;var pT=0,Em=1;function Am(e){var t=this;this.g=[],this.h=[],this.data=[],new zt().box("moov",xt).box("moof",xt).S("pssh",function(n){if(!(1<n.version)){var o=Ze(n.reader.h,-12,n.size);if(t.data.push(o),t.g.push(bo(n.reader.qb(16))),0<n.version){o=n.reader.P();for(var a=0;a<o;a++){var l=bo(n.reader.qb(16));t.h.push(l)}}}}).parse(e)}function Eu(e,t,n,o){var a=e.length,l=t.length+16+a;0<o&&(l+=4+16*n.size);var u=new Uint8Array(l),c=Tn(u),p=0;if(c.setUint32(p,l),p+=4,c.setUint32(p,1886614376),p+=4,1>o?c.setUint32(p,0):c.setUint32(p,16777216),p+=4,u.set(t,p),p+=t.length,0<o)for(c.setUint32(p,n.size),p+=4,t=w(n),n=t.next();!n.done;n=t.next())n=Ar(n.value),u.set(n,p),p+=n.length;return c.setUint32(p,a),u.set(e,p+4),u}function Hh(e,t){return e=Ao(e),cs(e,t)}function cs(e,t){return e=gT(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function Gh(e){return Wh.has(e)?Wh.get(e):""}function gT(e){function t(a,l){l=l===void 0?!1:l;for(var u=[];e[o];)if(e.charCodeAt(o)==60){if(e.charCodeAt(o+1)===47){l=o+2,o=e.indexOf(">",o),l=e.substring(l,o);var c=l.indexOf(a);if(c==-1){var p=a.indexOf(".");0<p&&(c=l.indexOf(a.substring(0,p)))}if(c==-1)throw a=e.substring(0,o).split(`
`),Error(`Unexpected close tag
Line: `+(a.length-1)+`
Column: `+(a[a.length-1].length+1)+`
Char: `+e[o]);o+1&&(o+=1);break}else if(e.charCodeAt(o+1)===33){if(e.charCodeAt(o+2)==45){for(;o!==-1&&(e.charCodeAt(o)!==62||e.charCodeAt(o-1)!=45||e.charCodeAt(o-2)!=45||o==-1);)o=e.indexOf(">",o+1);o===-1&&(o=e.length)}else if(e.charCodeAt(o+2)===91&&e.charCodeAt(o+8)===91&&e.substr(o+3,5).toLowerCase()==="cdata"){c=e.indexOf("]]>",o),c==-1?(u.push(e.substr(o+9)),o=e.length):(u.push(e.substring(o+9,c)),o=c+3);continue}o++;continue}e:{p=l,o++;var m=n(),v={};for(c=[];e.charCodeAt(o)!==62&&e[o];){var S=e.charCodeAt(o);if(64<S&&91>S||96<S&&123>S){S=n();for(var E=e.charCodeAt(o);E&&E!==39&&E!==34&&!(64<E&&91>E||96<E&&123>E)&&E!==62;)o++,E=e.charCodeAt(o);var T=o+1;if(o=e.indexOf(e[o],T),T=e.slice(T,o),E===39||E===34){if(o===-1){for(p={tagName:m,attributes:v,children:c,parent:null},m=0;m<c.length;m++)typeof c[m]!="string"&&(c[m].parent=p);c=p;break e}}else T=null,o--;S.startsWith("xmlns:")&&Wh.set(T,S.split(":")[1]),m==="tt"&&S==="xml:space"&&T==="preserve"&&(p=!0),v[S]=T}o++}for(e.charCodeAt(o-1)!==47?(o++,c=t(m,p)):o++,p={tagName:m,attributes:v,children:c,parent:null},m=c.length,v=0;v<m;v++)S=c[v],typeof S!="string"?S.parent=p:v==m-1&&S==`
`&&c.pop();c=p}if(u.push(c),typeof c=="string")break;c.tagName[0]==="?"&&c.children&&(u.push.apply(u,L(c.children)),c.children=[])}else c=o,o=e.indexOf("<",o)-1,o===-2&&(o=e.length),c=e.slice(c,o+1),l?0<c.length&&u.push(c):(u.length&&c.length==1&&c[0]==`
`||0<c.trim().length)&&u.push(c),o++;return u}function n(){for(var a=o;`\r
	>/= `.indexOf(e[o])===-1&&e[o];)o++;return e.slice(a,o)}var o=0;return t("")}function Au(e){return typeof e=="string"}function bm(e){var t=[];if(!e.children)return[];e=w(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function Ht(e,t){var n=[];if(!e.children)return[];e=w(e.children);for(var o=e.next();!o.done;o=e.next())o=o.value,o.tagName===t&&n.push(o);return n}function Cn(e){return typeof e=="string"?Zn(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:Zn(e))}function Wi(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Cn(e))&&(e=e.trim()),e):null}function Yi(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=w(e.children);for(var o=e.next();!o.done;o=e.next())Yi(o.value,t,n)}return n}function qi(e,t){return e=Ht(e,t),e.length!=1?null:e[0]}function Ro(e,t,n){return e=km(e,t,n),e.length!=1?null:e[0]}function Et(e,t,n,o){o=o===void 0?null:o;var a=null;return e=e.attributes[t],e!=null&&(a=n(e)),a??o}function _o(e,t,n){return t=Gh(t),e.attributes[t+":"+n]||null}function km(e,t,n){t=Gh(t);var o=[];if(e.children){e=w(e.children);for(var a=e.next();!a.done;a=e.next())(a=a.value)&&a.tagName===t+":"+n&&o.push(a)}return o}function yo(e,t,n){t=w(t);for(var o=t.next();!o.done;o=t.next())if(o=_o(e,o.value,n))return o;return null}function Jo(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function vo(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function bu(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function ku(e){return e=Number(e),e%1===0?e:null}function Lo(e){return e=Number(e),e%1===0&&0<e?e:null}function Vn(e){return e=Number(e),e%1===0&&0<=e?e:null}function Iu(e){return e=Number(e),isNaN(e)?null:e}function Xh(e){return e?e.toLowerCase()==="true":!1}function mT(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Mu(e){var t=[];e=Zn(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=w(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var o=n.match(/^([\w]+)/);if(o){var a=n.match(/(@id='(.*?)')/),l=n.match(/(@t='(\d+)')/),u=n.match(/(@n='(\d+)')/),c=n.match(/\[(\d+)\]/);t.push({name:o[0],id:a?a[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:l?Number(l[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:u?Number(u[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:c?Number(c[1])-1:null,Sb:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Sb=n.slice(1))}return t}function Im(e,t){var n=Mu(t.attributes.sel||"");if(n.length){var o=n[n.length-1],a=t.attributes.pos||null;n=o.position,n==null&&(o.t!==null&&(n=Mm(e,"t",o.t)),o.n!==null&&(n=Mm(e,"n",o.n))),n===null?n=a==="prepend"?0:e.length:a==="prepend"?--n:a==="after"&&++n,a=t.tagName,(o=o.Sb)&&e[n]?Rm(e[n],a,o,Wi(t)||""):(a!=="remove"&&a!=="replace"||e.splice(n,1),a!=="add"&&a!=="replace"||e.splice.apply(e,[n,0].concat(L(t.children))))}}function Mm(e,t,n){var o=0;e=w(e);for(var a=e.next();!a.done;a=e.next()){if(Number(a.value.attributes[t])===n)return o;o++}return null}function Rm(e,t,n,o){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=o)}function _m(e){var t=document.createElementNS("",e.tagName),n;for(n in e.attributes)t.setAttribute(n,e.attributes[n]);for(e=w(e.children),n=e.next();!n.done;n=e.next()){n=n.value;var o=void 0;typeof n=="string"?o=new Text(n):o=_m(n),t.appendChild(o)}return t}var Wh=new Map([]);function Ru(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.fa=this.da=!1,this.I=0,this.g=null,this.B=new ct,this.i=new Map,this.A=new Map,this.l=new Bt,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.Z=new Map,this.ea=new Map,this.L=new mt(function(){return kT(t)}),this.R=!1,this.N=[],this.U=!1,this.K=new mt(function(){RT(t)}),this.l.catch(function(){}),this.j=new ls(function(){return yT(t)}),this.ba=!1,this.F=this.G=null}s=Ru.prototype,s.destroy=function(){return this.j.destroy()};function yT(e){return F(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,A(t,$m(e),2);case 2:if(!e.m){t.u(3);break}return le(t,4),A(t,e.m.setMediaKeys(null),6);case 6:de(t,5);break;case 4:se(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,Y(t)}})}s.configure=function(e){this.h=e,this.K&&this.K.Sa(this.h.updateExpirationTime)};function vT(e,t,n){return e.fa=!0,e.A=new Map,e.R=n,Pm(e,t)}function Lm(e,t,n){e.A=new Map,n=w(n);for(var o=n.next();!o.done;o=n.next())e.A.set(o.value,{initData:null,initDataType:null});for(n=w(e.h.persistentSessionsMetadata),o=n.next();!o.done;o=n.next())o=o.value,e.A.set(o.sessionId,{initData:o.initData,initDataType:o.initDataType});return e.R=0<e.A.size,Pm(e,t)}function xT(e,t,n,o,a,l){var u=new Map;return a={audioCapabilities:a,videoCapabilities:l,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},a.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:o,serverCertificateUri:"",initData:null,keyIds:null}],u.set(t,a),Um(e,u,[])}function Pm(e,t){var n,o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P;return F(function(j){if(j.g==1){if(n=AT(e))for(o=w(t),a=o.next();!a.done;a=o.next())l=a.value,l.video&&(l.video.drmInfos=[n]),l.audio&&(l.audio.drmInfos=[n]);for(u=t.some(function(G){return!!(G.video&&G.video.drmInfos.length||G.audio&&G.audio.drmInfos.length)}),u||(c=Pa(e.h.servers),LT(t,c)),p=new Set,m=w(t),v=m.next();!v.done;v=m.next())for(S=v.value,E=zm(S),T=w(E),k=T.next();!k.done;k=T.next())M=k.value,p.add(M);for(I=w(p),U=I.next();!U.done;U=I.next())N=U.value,PT(N,Pa(e.h.servers),Pa(e.h.advanced||{}),e.h.keySystemsMapping);return A(j,Jg(t,e.R,e.ba,e.h.preferredKeySystems),2)}return Ft(e.j),z=u||Object.keys(e.h.servers).length,z?(P=Um(e,void 0,t),j.return(u?P:P.catch(function(){}))):(e.da=!0,j.return(Promise.resolve()))})}function Dm(e){var t;return F(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return A(n,e.G,3);case 3:return Ft(e.j),n.return();case 2:return le(n,4),e.G=e.m.setMediaKeys(e.s),A(n,e.G,6);case 6:de(n,5);break;case 4:t=se(n),e.o(new J(2,6,6003,t.message));case 5:Ft(e.j),Y(n)}})}function wT(e,t){return F(function(n){if(n.g==1)return A(n,Dm(e),2);Da(e,t.initDataType,Ze(t.initData)),Y(n)})}s.Rb=function(e){var t=this;return F(function(n){if(n.g==1)return t.s?(t.m=e,t.B.ha(t.m,"play",function(){for(var o=w(t.N),a=o.next();!a.done;a=o.next())qh(t,a.value);t.U=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return $m(t)}),t.F=t.g&&t.g.initData.find(function(o){return 0<o.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?A(n,Dm(t),2):n.u(2)):(t.B.ha(e,"encrypted",function(){t.o(new J(2,6,6010))}),n.return());Nm(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(o){return wT(t,o)}),Y(n)})};function ST(e){var t,n,o,a,l;return F(function(u){switch(u.g){case 1:if(!e.s||!e.g)return u.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){u.u(2);break}return t=kn([e.g.serverCertificateUri],e.h.retryParameters),le(u,3),n=e.C.Lb.request(5,t),A(u,n.promise,5);case 5:o=u.h,e.g.serverCertificate=Ze(o.data),de(u,4);break;case 3:throw a=se(u),new J(2,6,6017,a);case 4:if(e.j.g)return u.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?u.return():(le(u,6),A(u,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:de(u,0);break;case 6:throw l=se(u),new J(2,6,6004,l.message)}})}function CT(e,t){var n,o,a;return F(function(l){if(l.g==1)return A(l,jm(e,t,{initData:null,initDataType:null}),2);if(l.g!=3)return n=l.h,n?(o=[],(a=e.i.get(n))&&(a.kb=new Bt,o.push(a.kb)),o.push(n.remove()),A(l,Promise.all(o),3)):l.return();e.i.delete(n),Y(l)})}function Nm(e){var t,n,o,a,l;return F(function(u){if(u.g==1)return e.A.size?(e.A.forEach(function(c,p){jm(e,p,c)}),A(u,e.l,3)):u.u(2);if(u.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&_T(e))return u.return(e.l);e.l=new Bt,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],o=w(n),a=o.next();!a.done;a=o.next())l=a.value,Da(e,l.initDataType,l.initData);return Na(e)&&e.l.resolve(),u.return(e.l)})}function Da(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var o=e.i.values();o=w(o);for(var a=o.next();!a.done;a=o.next())if(Zt(n,a.value.initData))return}0<e.i.size&&Na(e)&&(e.l.resolve(),e.l=new Bt,e.l.catch(function(){})),bT(e,t,n,e.g.sessionType)}}function Om(e){return e=e.i.keys(),e=$h(e,function(t){return t.sessionId}),Array.from(e)}s.ff=function(){var e=this,t=this.i.keys();return t=$h(t,function(n){var o=e.i.get(n);return{sessionId:n.sessionId,sessionType:o.type,initData:o.initData,initDataType:o.initDataType}}),Array.from(t)},s.ad=function(){var e=1/0,t=this.i.keys();t=w(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},s.Ld=function(){return zh(this.ea)};function Um(e,t,n){var o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N;return F(function(z){switch(z.g){case 1:if(o=new Map,n.length){a=TT(e,n,o),z.u(2);break}return A(z,ET(e,t),3);case 3:a=z.h;case 2:if(l=a,!l)throw new J(2,6,6001);for(Ft(e.j),le(z,4),e.H.clear(),u=l.getConfiguration(),c=u.audioCapabilities||[],p=u.videoCapabilities||[],m=w(c),v=m.next();!v.done;v=m.next())S=v.value,e.H.add(S.contentType.toLowerCase());for(E=w(p),T=E.next();!T.done;T=E.next())k=T.value,e.H.add(k.contentType.toLowerCase());if(n.length){var P=l.keySystem,j=o.get(l.keySystem),G=[],Z=[],ee=[],fe=[],te=[],ne=new Set,ae=new Set;Vm(j,G,Z,fe,ee,te,ne,ae);var xe=e.R?"persistent-license":"temporary";for(P={keySystem:P,encryptionScheme:G[0],licenseServerUri:Z[0],distinctiveIdentifierRequired:j[0].distinctiveIdentifierRequired,persistentStateRequired:j[0].persistentStateRequired,sessionType:j[0].sessionType||xe,audioRobustness:j[0].audioRobustness||"",videoRobustness:j[0].videoRobustness||"",serverCertificate:fe[0],serverCertificateUri:ee[0],initData:te,keyIds:ne},0<ae.size&&(P.keySystemUris=ae),j=w(j),ae=j.next();!ae.done;ae=j.next())ae=ae.value,ae.distinctiveIdentifierRequired&&(P.distinctiveIdentifierRequired=ae.distinctiveIdentifierRequired),ae.persistentStateRequired&&(P.persistentStateRequired=ae.persistentStateRequired);j=P}else j=l.keySystem,ae=t.get(l.keySystem),P=[],G=[],Z=[],ee=[],fe=[],te=new Set,Vm(ae.drmInfos,P,G,ee,Z,fe,te),j={keySystem:j,encryptionScheme:P[0],licenseServerUri:G[0],distinctiveIdentifierRequired:ae.distinctiveIdentifier=="required",persistentStateRequired:ae.persistentState=="required",sessionType:ae.sessionTypes[0]||"temporary",audioRobustness:(ae.audioCapabilities?ae.audioCapabilities[0].robustness:"")||"",videoRobustness:(ae.videoCapabilities?ae.videoCapabilities[0].robustness:"")||"",serverCertificate:ee[0],serverCertificateUri:Z[0],initData:fe,keyIds:te};if(e.g=j,!e.g.licenseServerUri)throw new J(2,6,6012,e.g.keySystem);return A(z,l.createMediaKeys(),6);case 6:if(M=z.h,Ft(e.j),e.s=M,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){z.u(7);break}return le(z,8),A(z,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(I=z.h,I!="usable")throw new J(2,6,6018);Ft(e.j),de(z,7,4);break;case 8:throw U=se(z,4),U instanceof J?U:new J(2,6,6019,U.message);case 7:return e.da=!0,A(z,ST(e),11);case 11:Ft(e.j),de(z,0);break;case 4:throw N=se(z),Ft(e.j,N),e.g=null,e.H.clear(),N instanceof J?N:new J(2,6,6002,N.message)}})}function TT(e,t,n){for(var o=w(t),a=o.next();!a.done;a=o.next()){a=w(zm(a.value));for(var l=a.next();!l.done;l=a.next())l=l.value,n.has(l.keySystem)||n.set(l.keySystem,[]),n.get(l.keySystem).push(l)}if(n.size==1&&n.has(""))throw new J(2,6,6e3);for(e=w(e.h.preferredKeySystems),a=e.next(),o={};!a.done;o={Rg:void 0},a=e.next())for(o.Rg=a.value,a=w(t),l=a.next();!l.done;l=a.next())if(l=l.value.decodingInfos.find(function(m){return function(v){return v.supported&&v.keySystemAccess!=null&&v.keySystemAccess.keySystem==m.Rg}}(o)))return l.keySystemAccess;for(e=w([!0,!1]),o=e.next();!o.done;o=e.next())for(o=o.value,a=w(t),l=a.next();!l.done;l=a.next()){l=w(l.value.decodingInfos);for(var u=l.next();!u.done;u=l.next())if(u=u.value,u.supported&&u.keySystemAccess){var c=n.get(u.keySystemAccess.keySystem);c=w(c);for(var p=c.next();!p.done;p=c.next())if(!!p.value.licenseServerUri==o)return u.keySystemAccess}}return null}function ET(e,t){var n,o,a,l,u,c,p,m,v,S,E,T,k,M,I,U;return F(function(N){switch(N.g){case 1:if(t.size==1&&t.has(""))throw new J(2,6,6e3);for(o=w(t.values()),a=o.next();!a.done;a=o.next())l=a.value,l.audioCapabilities.length==0&&delete l.audioCapabilities,l.videoCapabilities.length==0&&delete l.videoCapabilities;u=w(e.h.preferredKeySystems),c=u.next();case 2:if(c.done){N.u(4);break}if(p=c.value,!t.has(p)){N.u(3);break}return m=t.get(p),le(N,6),A(N,navigator.requestMediaKeySystemAccess(p,[m]),8);case 8:return n=N.h,N.return(n);case 6:se(N);case 7:Ft(e.j);case 3:c=u.next(),N.u(2);break;case 4:v=w([!0,!1]),S=v.next();case 9:if(S.done){N.u(11);break}E=S.value,T=w(t.keys()),k=T.next();case 12:if(k.done){S=v.next(),N.u(9);break}if(M=k.value,I=t.get(M),U=I.drmInfos.some(function(z){return!!z.licenseServerUri}),U!=E){N.u(13);break}return le(N,15),A(N,navigator.requestMediaKeySystemAccess(M,[I]),17);case 17:return n=N.h,N.return(n);case 15:se(N);case 16:Ft(e.j);case 13:k=T.next(),N.u(12);break;case 11:return N.return(n)}})}function AT(e){return e=Pa(e.h.clearKeys),e.size==0?null:jg(e)}function Yh(e){Na(e)&&e.l.resolve()}function Bm(e,t){new mt(function(){t.loaded=!0,Yh(e)}).Y(NT)}function jm(e,t,n){var o,a,l,u,c,p,m;return F(function(v){switch(v.g){case 1:try{o=e.s.createSession("persistent-license")}catch(S){return a=new J(2,6,6005,S.message),e.o(a),v.return(Promise.reject(a))}return e.B.D(o,"message",function(S){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(S):qh(e,S)}),e.B.D(o,"keystatuseschange",function(S){return Fm(e,S)}),l={initData:n.initData,initDataType:n.initDataType,loaded:!1,zf:1/0,kb:null,type:"persistent-license"},e.i.set(o,l),le(v,2),A(v,o.load(t),4);case 4:return u=v.h,Ft(e.j),u||(e.i.delete(o),c=e.h.persistentSessionOnlinePlayback?1:2,e.o(new J(c,6,6013)),l.loaded=!0),Bm(e,l),Yh(e),v.return(o);case 2:p=se(v),Ft(e.j,p),e.i.delete(o),m=e.h.persistentSessionOnlinePlayback?1:2,e.o(new J(m,6,6005,p.message)),l.loaded=!0,Yh(e);case 3:return v.return(Promise.resolve())}})}function bT(e,t,n,o){try{var a=e.s.createSession(o)}catch(l){e.o(new J(2,6,6005,l.message));return}e.B.D(a,"message",function(l){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(l):qh(e,l)}),e.B.D(a,"keystatuseschange",function(l){return Fm(e,l)}),e.i.set(a,{initData:n,initDataType:t,loaded:!1,zf:1/0,kb:null,type:o});try{n=e.h.initDataTransform(n,t,e.g)}catch(l){t=l,l instanceof J||(t=new J(2,6,6016,l)),e.o(t);return}e.h.logLicenseExchange&&Er(n),a.generateRequest(t,n).catch(function(l){if(!e.j.g){e.i.delete(a);var u=l.errorCode;if(u&&u.systemCode){var c=u.systemCode;0>c&&(c+=Math.pow(2,32)),c="0x"+c.toString(16)}e.o(new J(2,6,6006,l.message,l,c))}})}function qh(e,t){var n,o,a,l,u,c,p,m,v,S,E,T,k,M;F(function(I){switch(I.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Er(t.message),o=e.i.get(n),a=e.g.licenseServerUri,l=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&l&&l.individualizationServer&&(a=l.individualizationServer),u=kn([a],e.h.retryParameters),u.body=t.message,u.method="POST",u.licenseRequestType=t.messageType,u.sessionId=n.sessionId,u.drmInfo=e.g,o&&(u.initData=o.initData,u.initDataType=o.initDataType),l&&l.headers)for(c in l.headers)u.headers[c]=l.headers[c];if(Th(e.g.keySystem)){var U=Eo(u.body,!0,!0);if(U.includes("PlayReadyKeyMessage")){U=cs(U,"PlayReadyKeyMessage");var N=Yi(U,"HttpHeader");N=w(N);for(var z=N.next();!z.done;z=N.next()){var P=z.value;z=Yi(P,"name")[0],P=Yi(P,"value")[0],u.headers[Cn(z)]=Cn(P)}U=Yi(U,"Challenge")[0],u.body=Li(Cn(U))}else u.headers["Content-Type"]="text/xml; charset=utf-8"}return p=Date.now(),le(I,2),v=e.C.Lb.request(2,u),A(I,v.promise,4);case 4:m=I.h,de(I,3);break;case 2:return S=se(I),e.j.g||(E=new J(2,6,6007,S),e.i.size==1?(e.o(E),o&&o.kb&&o.kb.reject(E)):(o&&o.kb&&o.kb.reject(E),e.i.delete(n),Na(e)&&(e.l.resolve(),e.L.Y(.1)))),I.return();case 3:return e.j.g?I.return():(e.I+=(Date.now()-p)/1e3,e.h.logLicenseExchange&&Er(m.data),le(I,5),A(I,n.update(m.data),7));case 7:de(I,6);break;case 5:return T=se(I),k=new J(2,6,6008,T.message),e.o(k),o&&o.kb&&o.kb.reject(k),I.return();case 6:if(e.j.g)return I.return();M=new Fe("drmsessionupdate"),e.C.onEvent(M),o&&(o.kb&&o.kb.resolve(),Bm(e,o)),Y(I)}})}function Fm(e,t){t=t.target;var n=e.i.get(t),o=!1;t.keyStatuses.forEach(function(l,u){if(typeof u=="string"){var c=u;u=l,l=c}if(Th(e.g.keySystem)&&u.byteLength==16&&(Aa()||go())){c=Tn(u);var p=c.getUint32(0,!0),m=c.getUint16(4,!0),v=c.getUint16(6,!0);c.setUint32(0,p,!1),c.setUint16(4,m,!1),c.setUint16(6,v,!1)}l!="status-pending"&&(n.loaded=!0),l=="expired"&&(o=!0),u=bo(u).slice(0,32),e.Z.set(u,l)});var a=t.expiration-Date.now();(0>a||o&&1e3>a)&&n&&!n.kb&&(e.i.delete(t),t.close().catch(function(){})),Na(e)&&(e.l.resolve(),e.L.Y(OT))}function kT(e){var t=e.Z,n=e.ea;n.clear(),t.forEach(function(o,a){return n.set(a,o)}),t=Array.from(n.values()),t.length&&t.every(function(o){return o=="expired"})&&e.o(new J(2,6,6014)),e.C.ee(zh(n))}function IT(){var e,t,n,o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe,te,ne;return F(function(ae){if(ae.g==1){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],n=["150","2000","3000"],o={"com.widevine.alpha":t,"com.microsoft.playready.recommendation":n},a=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],l=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],u={videoCapabilities:a,audioCapabilities:l,initDataTypes:["cenc","sinf","skd","keyids"]},c=[null,"cenc","cbcs","cbcs-1-9"],p=new Map,m=function(xe,me){var we,Le,Se,Be,st,St,Qt,Mt;return F(function(on){switch(on.g){case 1:return le(on,2),A(on,me.createMediaKeys(),4);case 4:de(on,3);break;case 2:return se(on),on.return();case 3:Le=(we=me.getConfiguration().sessionTypes)?we.includes("persistent-license"):!1,ba()&&(Le=!1),Se=me.getConfiguration().videoCapabilities,Be=me.getConfiguration().audioCapabilities,st={persistentState:Le,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},p.has(xe)&&p.get(xe)?st=p.get(xe):p.set(xe,st),(St=Se[0].encryptionScheme)&&!st.encryptionSchemes.includes(St)&&st.encryptionSchemes.push(St),(Qt=Se[0].robustness)&&!st.videoRobustnessLevels.includes(Qt)&&st.videoRobustnessLevels.push(Qt),(Mt=Be[0].robustness)&&!st.audioRobustnessLevels.includes(Mt)&&st.audioRobustnessLevels.push(Mt),Y(on)}})},v=function(xe,me,we,Le){var Se,Be,st,St,Qt,Mt,on,yn,Jt,Pt;return F(function(fn){switch(fn.g){case 1:for(le(fn,2),Se=mo(u),Be=w(Se.videoCapabilities),st=Be.next();!st.done;st=Be.next())St=st.value,St.encryptionScheme=me,St.robustness=we;for(Qt=w(Se.audioCapabilities),Mt=Qt.next();!Mt.done;Mt=Qt.next())on=Mt.value,on.encryptionScheme=me,on.robustness=Le;return yn=mo(Se),yn.persistentState="required",yn.sessionTypes=["persistent-license"],Jt=[yn,Se],A(fn,navigator.requestMediaKeySystemAccess(xe,Jt),4);case 4:return Pt=fn.h,A(fn,m(xe,Pt),5);case 5:de(fn,0);break;case 2:se(fn),Y(fn)}})},S=function(xe,me,we,Le){var Se,Be,st;return F(function(St){switch(St.g){case 1:return le(St,2),Se={type:"media-source",video:{contentType:a[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:l[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:xe,video:{encryptionScheme:me,robustness:we},audio:{encryptionScheme:me,robustness:Le}}},A(St,navigator.mediaCapabilities.decodingInfo(Se),4);case 4:return Be=St.h,st=Be.keySystemAccess,A(St,m(xe,st),5);case 5:de(St,0);break;case 2:se(St),Y(St)}})},E=w(e),T=E.next();!T.done;T=E.next())k=T.value,p.set(k,null);for(M=[],I=w(c),U=I.next();!U.done;U=I.next())for(N=U.value,z=w(e),P=z.next();!P.done;P=z.next())j=P.value,j==="org.w3.clearkey"&&Kr()||(M.push(v(j,N,"","")),M.push(S(j,N,"","")));for(G=w(e),Z=G.next();!Z.done;Z=G.next())for(ee=Z.value,fe=w(o[ee]||[]),te=fe.next();!te.done;te=fe.next())ne=te.value,M.push(v(ee,null,ne,"")),M.push(v(ee,null,"",ne)),M.push(S(ee,null,ne,"")),M.push(S(ee,null,"",ne));return A(ae,Promise.all(M),2)}return ae.return(zh(p))})}function MT(e){var t;return F(function(n){if(n.g==1)return t=new Promise(function(o,a){new mt(a).Y(DT)}),le(n,2),A(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return de(n,0);se(n),Y(n)})}function $m(e){var t;return F(function(n){return t=Array.from(e.i.entries()),e.i.clear(),A(n,Promise.all(t.map(function(o){o=w(o);var a=o.next().value,l=o.next().value;return F(function(u){if(u.g==1)return le(u,2),e.fa||e.A.has(a.sessionId)||l.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?A(u,MT(a),5):A(u,a.remove(),5);if(u.g!=2)return de(u,0);se(u),Y(u)})})),0)})}function zm(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function RT(e){e.i.forEach(function(t,n){var o=t.zf,a=n.expiration;isNaN(a)&&(a=1/0),a!=o&&(e.C.onExpirationUpdated(n.sessionId,a),t.zf=a)})}function Na(e){return e=e.i.values(),dT(e,function(t){return t.loaded})}function _T(e){for(var t=w(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.Z.get(n.value)!=="usable")return!1;return!0}function LT(e,t){var n=[];for(t.forEach(function(o,a){n.push({keySystem:a,licenseServerUri:o,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=w(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function Vm(e,t,n,o,a,l,u,c){var p=[];e=w(e);for(var m=e.next(),v={};!m.done;v={ra:void 0},m=e.next()){if(v.ra=m.value,t.includes(v.ra.encryptionScheme)||t.push(v.ra.encryptionScheme),v.ra.keySystem=="org.w3.clearkey"&&v.ra.licenseServerUri.startsWith("data:application/json;base64,")?p.includes(v.ra.licenseServerUri)||p.push(v.ra.licenseServerUri):n.includes(v.ra.licenseServerUri)||n.push(v.ra.licenseServerUri),a.includes(v.ra.serverCertificateUri)||a.push(v.ra.serverCertificateUri),v.ra.serverCertificate&&(o.some(function(T){return function(k){return Zt(k,T.ra.serverCertificate)}}(v))||o.push(v.ra.serverCertificate)),v.ra.initData){m=w(v.ra.initData);for(var S=m.next(),E={};!S.done;E={mf:void 0},S=m.next())E.mf=S.value,l.some(function(T){return function(k){var M=T.mf;return k.keyId&&k.keyId==M.keyId?!0:k.initDataType==M.initDataType&&Zt(k.initData,M.initData)}}(E))||l.push(E.mf)}if(v.ra.keyIds)for(m=w(v.ra.keyIds),S=m.next();!S.done;S=m.next())u.add(S.value);if(v.ra.keySystemUris&&c)for(v=w(v.ra.keySystemUris),m=v.next();!m.done;m=v.next())c.add(m.value)}if(p.length==1)n.push(p[0]);else if(0<p.length){for(t=[],p=w(p),o=p.next();!o.done;o=p.next())o=d.atob(o.value.split("data:application/json;base64,").pop()),o=JSON.parse(o),t.push.apply(t,L(o.keys));p=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+d.btoa(p))}}function PT(e,t,n,o){var a=e.keySystem;a&&(a!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(a)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(a))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),o[a]&&(e.keySystem=o[a]),d.cast&&d.cast.__platform__&&a=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var DT=1,NT=5,OT=.5;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Kh(e,t,n){this.h=e,this.i=t,this.g=n}function Hm(e,t){return F(function(n){if(n.g==1)return A(n,VC(e.g,t,e.h.drm.preferredKeySystems),2);if(e.h.streaming.dontChooseCodecs||Yg(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(Ra))throw new J(2,4,4032);return n.return(Gm(e,t))})}function Gm(e,t){var n=qg(t.variants,e.h.restrictions,e.i);if(t){var o=e.g?e.g.g:null;if(o&&e.g.s)for(var a=w(t.variants),l=a.next();!l.done;l=a.next())l=l.value,Zh(e,o.keySystem,l.video),Zh(e,o.keySystem,l.audio);Xm(e,t)}return n}function Zh(e,t,n){if(n){n=w(n.drmInfos);for(var o=n.next();!o.done;o=n.next())if(o=o.value,o.keySystem==t){o=w(o.initData||[]);for(var a=o.next();!a.done;a=o.next())a=a.value,Da(e.g,a.initDataType,a.initData)}}}function Xm(e,t){e=e.g?e.g.Ld():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var o=!1,a=!1,l=new Set,u=new Set;t=w(t.variants);for(var c=t.next();!c.done;c=t.next()){c=c.value;var p=[];c.audio&&p.push(c.audio),c.video&&p.push(c.video),p=w(p);for(var m=p.next();!m.done;m=p.next())if(m=m.value,m.keyIds.size){m=w(m.keyIds);for(var v=m.next();!v.done;v=m.next()){v=v.value;var S=e[n?"00":v];S?Wm.includes(S)&&u.add(S):l.add(v)}}c.allowedByApplication?c.allowedByKeySystem&&(o=!0):a=!0}if(!o)throw e={hasAppRestrictions:a,missingKeys:Array.from(l),restrictedKeyStatuses:Array.from(u)},new J(2,4,4012,e)}var Wm=["output-restricted","internal-error"];function Oa(){}function Ym(e,t){if(t){var n=Ki[t.toLowerCase()];if(n)return n}throw new J(2,4,4e3,e,t)}ce("shaka.media.ManifestParser",Oa),Oa.unregisterParserByMime=function(e){delete Ki[e]},Oa.registerParserByMime=function(e,t){Ki[e]=t},Oa.registerParserByExtension=function(){Ct("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Oa.AccessibilityPurpose={ak:"visually impaired",vj:"hard of hearing"};var Ki={};function UT(e,t){function n(){l=!0}function o(v){c.push(v),xt(v)}var a=e=Ze(e),l=!1,u,c=[],p=[];if(new zt().box("moov",o).box("trak",o).box("mdia",o).box("minf",o).box("stbl",o).S("stsd",function(v){u=v,c.push(v),Qo(v)}).S("encv",n).S("enca",n).S("dvav",function(v){p.push({box:v,Oa:1701733238})}).S("dva1",function(v){p.push({box:v,Oa:1701733238})}).S("dvh1",function(v){p.push({box:v,Oa:1701733238})}).S("dvhe",function(v){p.push({box:v,Oa:1701733238})}).S("dvc1",function(v){p.push({box:v,Oa:1701733238})}).S("dvi1",function(v){p.push({box:v,Oa:1701733238})}).S("hev1",function(v){p.push({box:v,Oa:1701733238})}).S("hvc1",function(v){p.push({box:v,Oa:1701733238})}).S("avc1",function(v){p.push({box:v,Oa:1701733238})}).S("avc3",function(v){p.push({box:v,Oa:1701733238})}).S("ac-3",function(v){p.push({box:v,Oa:1701733217})}).S("ec-3",function(v){p.push({box:v,Oa:1701733217})}).S("ac-4",function(v){p.push({box:v,Oa:1701733217})}).S("mp4a",function(v){p.push({box:v,Oa:1701733217})}).parse(e),l)return e;if(p.length==0||!u)throw bo(e),new J(2,3,3019,t);p.reverse(),t=w(p);for(var m=t.next();!m.done;m=t.next())m=m.value,a=BT(a,u,m.box,c,m.Oa);return Aa()&&bh()?(t=new Uint8Array(e.byteLength+a.byteLength),t.set(a),t.set(e,a.byteLength),t):a}function BT(e,t,n,o,a){var l=jT.value(),u=e.subarray(n.start,n.start+n.size),c=Tn(u),p=new Uint8Array(n.size+l.byteLength);for(p.set(u,0),u=Tn(p),u.setUint32(4,a),p.set(l,n.size),a=c.getUint32(4),u.setUint32(n.size+16,a),qm(p,0,p.byteLength),a=new Uint8Array(e.byteLength+p.byteLength),n=co()||Aa()?n.start:n.start+n.size,l=e.subarray(n),a.set(e.subarray(0,n)),a.set(p,n),a.set(l,n+p.byteLength),e=w(o),o=e.next();!o.done;o=e.next())o=o.value,qm(a,o.start,o.size+p.byteLength);return p=Tn(a,t.start),t=fs(t),e=p.getUint32(t),p.setUint32(t,e+1),a}function qm(e,t,n){e=Tn(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var jT=new Yr(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function ui(e,t,n,o,a,l,u){this.M=e,this.Ha=t,this.sa=n,this.Hc=o===void 0?null:o,this.timescale=a===void 0?null:a,this.g=l===void 0?null:l,this.aesKey=u===void 0?null:u,this.mimeType=this.codecs=null}ui.prototype.Xb=function(){return this.Ha},ui.prototype.Ub=function(){return this.sa},ui.prototype.cd=function(){return this.g};function Qh(e,t){return e===t?!0:e&&t?e.Xb()==t.Xb()&&e.Ub()==t.Ub()&&Si(e.M().sort(),t.M().sort())&&Zt(e.cd(),t.cd()):e==t}ce("shaka.media.InitSegmentReference",ui),ui.prototype.getEndByte=ui.prototype.Ub,ui.prototype.getStartByte=ui.prototype.Xb;function Je(e,t,n,o,a,l,u,c,p,m,v,S,E,T,k,M){for(m=m===void 0?[]:m,T=T===void 0?er:T,this.startTime=e,this.j=this.endTime=t,this.F=n,this.Ha=o,this.sa=a,this.$=l,this.timestampOffset=u,this.appendWindowStart=c,this.appendWindowEnd=p,this.g=m,this.tilesLayout=v===void 0?"":v,this.B=S===void 0?null:S,this.h=E===void 0?null:E,this.status=T,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=k===void 0?null:k,this.A=null,this.i=0,this.o=M===void 0?!1:M,this.G=this.s=!1,e=w(this.g),t=e.next();!t.done;t=e.next())t.value.Kg();this.o&&this.g.length&&this.g[this.g.length-1].Jg(),this.C=this.mimeType=this.codecs=null}s=Je.prototype,s.M=function(){return this.F()},s.getStartTime=function(){return this.startTime},s.Mh=function(){return this.endTime},s.Xb=function(){return this.Ha},s.Ub=function(){return this.sa},s.di=function(){return this.tilesLayout},s.ci=function(){return this.B},s.Yb=function(){return this.status},s.xi=function(){this.status=Zm},s.wf=function(){this.preload=!0},s.ri=function(){return this.preload},s.Xd=function(){this.l=!1},s.ni=function(){return this.l},s.Kg=function(){this.s=!0},s.pi=function(){return this.s},s.Jg=function(){this.G=!0},s.oi=function(){return this.G},s.Ig=function(){this.m=!0},s.ji=function(){return this.m},s.fh=function(e){this.A=e},s.bi=function(){return this.A},s.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=w(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},s.Vf=function(e){this.h==null?Pe("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},s.Zi=function(e){this.C=e},s.cd=function(){return this.C};function Km(e,t){e.$=t,e=w(e.g);for(var n=e.next();!n.done;n=e.next())Km(n.value,t)}ce("shaka.media.SegmentReference",Je),Je.prototype.getSegmentData=Je.prototype.cd,Je.prototype.setSegmentData=Je.prototype.Zi,Je.prototype.syncAgainst=Je.prototype.Vf,Je.prototype.offset=Je.prototype.offset,Je.prototype.getThumbnailSprite=Je.prototype.bi,Je.prototype.setThumbnailSprite=Je.prototype.fh,Je.prototype.hasByterangeOptimization=Je.prototype.ji,Je.prototype.markAsByterangeOptimization=Je.prototype.Ig,Je.prototype.isLastPartial=Je.prototype.oi,Je.prototype.markAsLastPartial=Je.prototype.Jg,Je.prototype.isPartial=Je.prototype.pi,Je.prototype.markAsPartial=Je.prototype.Kg,Je.prototype.isIndependent=Je.prototype.ni,Je.prototype.markAsNonIndependent=Je.prototype.Xd,Je.prototype.isPreload=Je.prototype.ri,Je.prototype.markAsPreload=Je.prototype.wf,Je.prototype.markAsUnavailable=Je.prototype.xi,Je.prototype.getStatus=Je.prototype.Yb,Je.prototype.getTileDuration=Je.prototype.ci,Je.prototype.getTilesLayout=Je.prototype.di,Je.prototype.getEndByte=Je.prototype.Ub,Je.prototype.getStartByte=Je.prototype.Xb,Je.prototype.getEndTime=Je.prototype.Mh,Je.prototype.getStartTime=Je.prototype.getStartTime,Je.prototype.getUris=Je.prototype.M;var er=0,Zm=1;Je.Status={hj:er,Zj:Zm,Bj:2};function Ua(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function Jh(e){return!e||Ua(e)?null:e.length?e.end(e.length-1):null}function ed(e,t){return!e||!e.length||Ua(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function Qm(e,t){if(!e||!e.length||Ua(e))return 0;var n=0;e=w(tr(e));for(var o=e.next();!o.done;o=e.next()){var a=o.value;o=a.start,a=a.end,a>t&&(n+=a-Math.max(o,t))}return n}function FT(e,t,n){return!e||!e.length||Ua(e)?null:(e=tr(e).findIndex(function(o,a,l){return o.start>t&&(a==0||l[a-1].end-t<=n)}),0<=e?e:null)}function tr(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function td(){}function Jm(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function ey(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function nd(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function $T(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var o=Wt(Ze(e.data,1,n)),a=e.data[2+n],l=e.data.subarray(3+n).indexOf(0);if(l===-1)return null;var u=Wt(Ze(e.data,3+n,l)),c;return o==="-->"?c=Wt(Ze(e.data,4+n+l)):c=hn(e.data.subarray(4+n+l)),t.mimeType=o,t.pictureType=a,t.description=u,t.data=c,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(o=e.data.subarray(1).indexOf(0),o===-1)?null:(n=Wt(Ze(e.data,1,o)),e=Wt(Ze(e.data,2+o)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(o=e.data.subarray(1).indexOf(0),o===-1)?null:(n=Wt(Ze(e.data,1,o)),e=Wt(Ze(e.data,2+o)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Wt(Ze(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=hn(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Wt(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Wt(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=hn(e.data),t):null}function Lr(e){for(var t=0,n=[];Jm(e,t);){var o=nd(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,o=t+o;t+10<o;){var a=e.subarray(t),l=nd(a,4);a={type:String.fromCharCode(a[0],a[1],a[2],a[3]),size:l,data:a.subarray(10,10+l)},(l=$T(a))&&n.push(l),t+=a.size+10}ey(e,t)&&(t+=10)}return n}function hs(e,t){for(var n=t=t===void 0?0:t,o=0;Jm(e,t);)e[t+5]>>6&1&&(o+=10),o+=10,o+=nd(e,t+6),ey(e,t+10)&&(o+=10),t+=o;return 0<o?e.subarray(n,n+o):new Uint8Array([])}ce("shaka.util.Id3Utils",td),td.getID3Data=hs,td.getID3Frames=Lr;function ty(e,t){var n=null,o=null,a=null,l=e.P();return t&1&&(a=e.Nc()),t&2&&e.skip(4),t&8&&(n=e.P()),t&16&&(o=e.P()),{trackId:l,Yc:n,Id:o,ck:a}}function _u(e,t){return t==1?(t=e.P(),e=e.P(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.P()}}function Lu(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.P(),e.skip(4),e=e.la(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function ny(e,t,n){var o=e.P(),a=[],l=null;n&1&&(l=e.P()),n&4&&e.skip(4);for(var u=0;u<o;u++){var c={Jf:null,sampleSize:null,ne:null};n&256&&(c.Jf=e.P()),n&512&&(c.sampleSize=e.P()),n&1024&&e.skip(4),n&2048&&(c.ne=t==0?e.P():e.Sg()),a.push(c)}return{gk:o,Wg:a,Fh:l}}function iy(e){e.skip(6),e.skip(2),e.skip(8);var t=e.la();return e.skip(2),e.skip(2),e.skip(2),e=e.la()+e.la()/65536,{channelCount:t,sampleRate:e}}function oy(e){return e=e.P(),{codec:Tu(e)}}function zT(e){var t=null,n=null,o=e.qb(4),a=String.fromCharCode(o[0]);if(a+=String.fromCharCode(o[1]),a+=String.fromCharCode(o[2]),a+=String.fromCharCode(o[3]),a==="nclx"){switch(e.la()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(o=e.la(),e.la(),o){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,xd:n}}function Ba(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function fi(e){return(10>e?"0":"")+e}function Po(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,o=0;o<e.byteLength;o++)2<=o&&e[o]==3&&e[o-1]==0&&e[o-2]==0||(t[n]=e[o],n++);this.j=Ze(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function id(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),o=Math.min(4,e.i);o!==0&&(n.set(e.j.subarray(t,t+o)),e.h=new $t(n,0).P(),e.g=8*o,e.i-=o)}function ci(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,id(e)}e.h<<=t,e.g-=t}function yt(e,t){var n=Math.min(e.g,t),o=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&id(e),n=t-n,0<n?o<<n|yt(e,n):o}function od(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return id(e),t+od(e)}function Jn(e){ci(e,1+od(e))}function ze(e){var t=od(e);return yt(e,t+1)-1}function ds(e){return e=ze(e),1&e?1+e>>>1:-1*(e>>>1)}function Ke(e){return yt(e,1)===1}function Rt(e){return yt(e,8)}function Pu(e,t){for(var n=8,o=8,a=0;a<t;a++)o!==0&&(o=ds(e),o=(n+o+256)%256),n=o===0?n:o}function VT(e){return Rt(e),ze(e),ze(e)}ce("shaka.util.ExpGolomb",Po);function Gt(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}s=Gt.prototype,s.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},s.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,sd(e)),n=e.length-(e.length+t)%188,o=!1,a=t;a<n;a+=188)if(e[a]==71){var l=!!(e[a+1]&64),u=((e[a+1]&31)<<8)+e[a+2];if(1<(e[a+3]&48)>>4){var c=a+5+e[a+4];if(c==a+188)continue}else c=a+4;switch(u){case 0:l&&(c+=e[c]+1),this.G=(e[c+10]&31)<<8|e[c+11];break;case 17:case 8191:break;case this.G:l&&(c+=e[c]+1),l=e,u={audio:-1,video:-1,Rd:-1,audioCodec:"",videoCodec:""};var p=c+3+((l[c+1]&15)<<8|l[c+2])-4;for(c+=12+((l[c+10]&15)<<8|l[c+11]);c<p;){var m=(l[c+1]&31)<<8|l[c+2],v=(l[c+3]&15)<<8|l[c+4];switch(l[c]){case 6:if(0<v)for(var S=c+5,E=v;2<E;){var T=l[S+1]+2;switch(l[S]){case 5:var k=Mh(l.subarray(S+2,S+T));u.audio==-1&&k==="Opus"?(u.audio=m,u.audioCodec="opus"):u.video==-1&&k==="AV01"&&(u.video=m,u.videoCodec="av1");break;case 106:u.audio==-1&&(u.audio=m,u.audioCodec="ac3");break;case 122:u.audio==-1&&(u.audio=m,u.audioCodec="ec3");break;case 124:u.audio==-1&&(u.audio=m,u.audioCodec="aac");break;case 127:u.audioCodec=="opus"&&(k=null,l[S+2]===128&&(k=l[S+3]),k!=null&&(this.F={channelCount:k&15?k&15:2,Ch:k,sampleRate:48e3}))}S+=T,E-=T}break;case 15:u.audio==-1&&(u.audio=m,u.audioCodec="aac");break;case 17:u.audio==-1&&(u.audio=m,u.audioCodec="aac-loas");break;case 21:u.Rd==-1&&(u.Rd=m);break;case 27:u.video==-1&&(u.video=m,u.videoCodec="avc");break;case 3:case 4:u.audio==-1&&(u.audio=m,u.audioCodec="mp3");break;case 36:u.video==-1&&(u.video=m,u.videoCodec="hvc");break;case 129:u.audio==-1&&(u.audio=m,u.audioCodec="ac3");break;case 132:case 135:u.audio==-1&&(u.audio=m,u.audioCodec="ec3")}c+=v+5}l=u,l.video!=-1&&(this.I=l.video,this.m=l.videoCodec),l.audio!=-1&&(this.B=l.audio,this.A=l.audioCodec),l.Rd!=-1&&(this.C=l.Rd),o&&!this.H&&(o=!1,a=t-188),this.H=!0;break;case this.I:c=e.subarray(c,a+188),l?this.j.push([c]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(c);break;case this.B:c=e.subarray(c,a+188),l?this.i.push([c]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(c);break;case this.C:c=e.subarray(c,a+188),l?this.l.push([c]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(c);break;default:o=!0}}return this};function rd(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var o=t[7];if(o&192){var a=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=a),n.pts=ry(a,e.s),e.s=n.pts,n.dts=n.pts,o&64&&(o=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=o),n.dts=ry(o,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}s.Ci=function(e){return Ct("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Cf(e)},s.Cf=function(e,t,n){var o=e.pts?e.pts/9e4:null;e=e.data;var a=e.byteLength,l=1;this.m=="hvc"&&(l=2);for(var u=n||0,c=[],p=-1,m=0,v,S=0;S<a;++S){var E=e[S];if(E){if(2<=u&&E==1){if(t&&!c.length&&p==-1&&(E=S-(3<u?3:u),n&&E!=0&&(E=e.subarray(0,E),t.data=ln(t.data,E),t.fullData=ln(t.fullData,E))),0<=p?(u=S-((3<u?3:u)+1),c.push({data:e.subarray(p+l,u+1),fullData:e.subarray(p,u+1),type:m,time:o})):t&&!c.length&&(p=S-u,0<p&&(p=e.subarray(0,p),t.data=ln(t.data,p),t.fullData=ln(t.fullData,p))),S>=a-l)return c;S++,p=S,m=this.m=="hvc"?e[S]>>1&63:e[S]&31}u=0}else u++;S>=a-1&&0<=p&&0<=u&&(v={data:e.subarray(p+l,a),fullData:e.subarray(p,a),type:m,time:o})}return v&&c.push(v),!c.length&&t&&(t.data=ln(t.data,e),t.fullData=ln(t.fullData,e)),c},s.getMetadata=function(){for(var e=[],t=w(this.l),n=t.next();!n.done;n=t.next())n=ln.apply(zn,L(n.value)),(n=rd(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Lr(n.data),dts:n.dts,pts:n.pts});return e},s.Tb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=w(this.i),n=t.next();!n.done;n=t.next()){var o=ln.apply(zn,L(n.value)),a=rd(this,o);n=this.h.length?this.h[this.h.length-1]:null,a&&a.pts!=null&&a.dts!=null&&(!n||n.pts!=a.pts&&n.dts!=a.dts)?(this.h.length&&a.dts<(n.dts||0)&&(e=!0),this.h.push(a)):this.h.length&&(o=a?a.data:o)&&(n=this.h.pop(),n.data=ln(n.data,o),this.h.push(n))}e&&(this.h=this.h.sort(function(l,u){var c=(l.pts||0)-(u.pts||0);return(l.dts||0)-(u.dts||0)||c}))}return this.h},s.Fc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=w(this.j),o=n.next();!o.done;o=n.next()){var a=ln.apply(zn,L(o.value)),l=rd(this,a);o=this.g.length?this.g[this.g.length-1]:null,l&&l.pts!=null&&l.dts!=null&&(!o||o.pts!=l.pts&&o.dts!=l.dts)?(this.g.length&&l.dts<(o.dts||0)&&(t=!0),this.g.push(l)):this.g.length&&(a=l?l.data:a)&&(o=this.g.pop(),o.data=ln(o.data,a),this.g.push(o))}if(e){for(n=[],o=w(this.g),a=o.next();!a.done;a=o.next())if(a=a.value,a.nalus=this.Cf(a,u,void 0),a.nalus.length){n.push(a);var u=a.nalus[a.nalus.length-1]}this.g=n}t&&(this.g=this.g.sort(function(c,p){var m=(c.pts||0)-(p.pts||0);return(c.dts||0)-(p.dts||0)||m}))}return e?this.g:(e=this.g,this.g=[],e)},s.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Tb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.Fc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},s.$c=function(){return{audio:this.A,video:this.m}},s.Pd=function(){for(var e=[],t=w(this.Fc()),n=t.next();!n.done;n=t.next())e.push.apply(e,L(n.value.nalus));return e},s.gi=function(){Ct("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.kf();return{height:e.height,width:e.width}},s.kf=function(){return this.m=="hvc"?GT(this):HT(this)};function HT(e){var t={height:null,width:null,codec:null};if(e=e.Pd(),!e.length||(e=e.find(function(E){return E.type==7}),!e))return t;e=new Po(e.data);var n=Rt(e),o=Rt(e),a=Rt(e);if(Jn(e),XT.includes(n)){var l=ze(e);if(l===3&&ci(e,1),Jn(e),Jn(e),ci(e,1),Ke(e)){l=l!==3?8:12;for(var u=0;u<l;u++)Ke(e)&&(6>u?Pu(e,16):Pu(e,64))}}if(Jn(e),l=ze(e),l===0)ze(e);else if(l===1)for(ci(e,1),Jn(e),Jn(e),l=ze(e),u=0;u<l;u++)Jn(e);Jn(e),ci(e,1),l=ze(e),u=ze(e);var c=yt(e,1);c===0&&ci(e,1),ci(e,1);var p=0,m=0,v=0,S=0;return Ke(e)&&(p=ze(e),m=ze(e),v=ze(e),S=ze(e)),t.height=String((2-c)*(u+1)*16-2*v-2*S),t.width=String(16*(l+1)-2*p-2*m),t.codec="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2)+("0"+a.toString(16).toUpperCase()).slice(-2),t}function GT(e){var t={height:null,width:null,codec:null};if(e=e.Pd(),!e.length||(e=e.find(function(P){return P.type==33}),!e))return t;var n=new Po(e.fullData,!0);Rt(n),Rt(n),yt(n,4);var o=yt(n,3);Ke(n);var a=yt(n,2),l=yt(n,1),u=yt(n,5),c=yt(n,32);e=Rt(n);for(var p=Rt(n),m=Rt(n),v=Rt(n),S=Rt(n),E=Rt(n),T=Rt(n),k=[],M=[],I=0;I<o;I++)k.push(Ke(n)),M.push(Ke(n));if(0<o)for(I=o;8>I;I++)yt(n,2);for(I=0;I<o;I++)k[I]&&yt(n,88),M[I]&&Rt(n);ze(n),o=ze(n),o==3&&yt(n,1),k=ze(n),M=ze(n);var U=I=0,N=0,z=0;return Ke(n)&&(I+=ze(n),U+=ze(n),N+=ze(n),z+=ze(n)),t.width=String(k-(I+U)*(o===1||o===2?2:1)),t.height=String(M-(N+z)*(o===1?2:1)),n=function(P){for(var j=0,G=0;32>G;G++)j|=(P>>G&1)<<31-G;return j>>>0}(c),l=l==1?"H":"L",a="hvc1"+("."+["","A","B","C"][a]+u),a+="."+n.toString(16).toUpperCase(),a+="."+l+T,E&&(a+="."+E.toString(16).toUpperCase()),S&&(a+="."+S.toString(16).toUpperCase()),v&&(a+="."+v.toString(16).toUpperCase()),m&&(a+="."+m.toString(16).toUpperCase()),p&&(a+="."+p.toString(16).toUpperCase()),e&&(a+="."+e.toString(16).toUpperCase()),t.codec=a,t}function ry(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function ja(e){return!(0>sd(e))}function sd(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}ce("shaka.util.TsParser",Gt),Gt.syncOffset=sd,Gt.probe=ja,Gt.prototype.getVideoInfo=Gt.prototype.kf,Gt.prototype.getVideoResolution=Gt.prototype.gi,Gt.prototype.getVideoNalus=Gt.prototype.Pd,Gt.prototype.getCodecs=Gt.prototype.$c,Gt.prototype.getStartTime=Gt.prototype.getStartTime,Gt.prototype.getVideoData=Gt.prototype.Fc,Gt.prototype.getAudioData=Gt.prototype.Tb,Gt.prototype.getMetadata=Gt.prototype.getMetadata,Gt.prototype.parseNalus=Gt.prototype.Cf,Gt.prototype.parseAvcNalus=Gt.prototype.Ci,Gt.prototype.parse=Gt.prototype.parse,Gt.prototype.clearData=Gt.prototype.clearData,Gt.Timescale=9e4;var XT=[100,110,122,244,44,83,86,118,128,138,139,134];function Fa(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&Ve("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Ct("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Ve("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(Ve("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Ve(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function sy(e){e.g&&e.i.classList.add("shaka-hidden")}Fa.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function ay(e,t,n){var o=0,a=-1;switch(t.mimeType){case"video/webm":o=1;break;case"video/mp4":o=2}switch(n){case"DASH":a=1;break;case"HLS":a=0}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(o),e.j||e.g.setStreamingFormat(a))}ce("shaka.lcevc.Dec",Fa),Fa.prototype.release=Fa.prototype.release;function ly(e,t,n,o){var a=this;this.i=e,this.da=n,this.A=null,this.F=t,this.h={},this.G={},this.Da={},this.g=null,this.fa=!1,this.Z=o||null,this.l={},this.s=new ct,this.j={},this.H=null,this.L=new Bt,this.N="",this.qa=!1,this.m=uy(this,this.L),this.C=!1,this.I=new ls(function(){return YT(a)}),this.B=!1,this.ba="UNKNOWN",this.Ea=this.Fa=!1,this.za=new Bt,this.o=!1,this.xa=!0,this.pa=this.R=this.ya=this.U=this.K=this.ea=null,this.oa=new Bt}function uy(e,t){if(d.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.s.D(n,"startstreaming",function(){e.xa=!0}),e.s.D(n,"endstreaming",function(){e.xa=!1}),e.s.ha(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.s.ha(e.i,"playing",function(){e.qa=!0}),e.N=Bu(n),e.i.src=e.N,n}return n=new MediaSource,e.s.ha(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.s.ha(e.i,"playing",function(){e.qa=!0}),e.N=Bu(n),e.i.src=e.N,n}function WT(e,t){var n,o,a,l,u,c,p,m,v,S,E;return F(function(T){if(T.g==1)return e.createSegmentIndex?A(T,e.createSegmentIndex(),2):T.u(2);if(!e.segmentIndex)return T.return(!1);if(e.segmentIndex.getNumReferences()==0)return T.return(!0);for(n=xn,o=new Set,a=w(e.segmentIndex),l=a.next();!l.done;l=a.next())if(u=l.value,c=u.mimeType||e.mimeType||"",p=u.codecs||e.codecs||"",m=c+":"+p,!o.has(m)){if(o.add(m),t==n.ua){if(v=wn(c,p),!ka(v))return T.return(!1)}else if(t==n.ga?p=Ma(p):t==n.X&&(p=ns(p,c)),S=NC(e,c,p),E=kr(c,p),!kt(S)&&!qo(E))return T.return(!1)}return T.return(!0)})}s=ly.prototype,s.destroy=function(){return this.I.destroy()};function YT(e){var t,n,o,a,l,u,c,p;return F(function(m){if(m.g==1){t=[];for(n in e.l)for(o=e.l[n],a=o[0],e.l[n]=o.slice(0,1),a&&t.push(a.p.catch(Gg)),l=w(o.slice(1)),u=l.next();!u.done;u=l.next())c=u.value,c.p.reject(new J(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(p in e.j)t.push(e.j[p].destroy());return A(m,Promise.all(t),2)}e.s&&(e.s.release(),e.s=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.m=null,e.g=null,e.F=null,e.h={},e.j={},e.H=null,e.l={},e.Z=null,e.K=null,e.da=null,Y(m)})}s.init=function(e,t,n,o){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,o=o===void 0?!1:o;var a=this,l,u,c,p,m;return F(function(v){switch(v.g){case 1:return l=xn,A(v,a.L,2);case 2:a.B=t,a.ba=n,a.Fa=o,a.Ea=!a.B&&a.ba=="HLS"&&!a.Fa,a.K=null,u=w(e.keys()),c=u.next();case 3:if(c.done){v.u(0);break}return p=c.value,m=e.get(p),A(v,Du(a,p,m,m.codecs),6);case 6:a.o?(a.l[l.X]=[],a.l[l.ga]=[]):a.l[p]=[],c=u.next(),v.u(3)}})};function Du(e,t,n,o){var a,l,u,c,p,m,v,S,E,T,k,M;return F(function(I){switch(I.g){case 1:return a=xn,l=Xe,u=be,A(I,WT(n,t),2);case 2:if(u.call(l,I.h,"Type negotiation should happen before MediaSourceEngine.init!"),c=wn(n.mimeType,o),t==a.ua){Nu(e,c,e.B,n.external),I.u(0);break}if(p=e.A.forceTransmux,(!kt(c)||!e.B&&Zo.includes(c))&&(p=!0),m=kr(n.mimeType,o),!p){I.u(4);break}if(v=ai(a.X,(o||"").split(",")),S=ai(a.ga,(o||"").split(",")),!v||!S){I.u(5);break}return e.o=!0,A(I,Du(e,a.X,n,v),6);case 6:return A(I,Du(e,a.ga,n,S),7);case 7:return I.return();case 5:(E=qo(m))&&(T=E(),e.j[t]=T,c=T.convertCodecs(t,m));case 4:k=c+e.A.addExtraFeaturesToSourceBuffer(c),Ft(e.I);try{M=e.m.addSourceBuffer(k)}catch(U){throw new J(2,3,3015,U,"The mediaSource_ status was "+e.m.readyState+" expected 'open'",null)}e.B&&(M.mode=sE),e.s.D(M,"error",function(){var U=e.l[t][0];U.p.reject(new J(2,3,3014,e.i.error?e.i.error.code:0,U.uri))}),e.s.D(M,"updateend",function(){return Do(e,t)}),e.h[t]=M,e.G[t]=c,e.Da[t]=!!n.drmInfos.length,Y(I)}})}s.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function Nu(e,t,n,o){e.g||(e.g=new ko(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var a=e.g;o=o||e.fa,e=e.ba,t=="application/cea-608"||t=="application/cea-708"?a.i=null:(a.i=(0,Sn[t])(),a.i.setSequenceMode?a.i.setSequenceMode(n):Ct("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),a.i.setManifestType?a.i.setManifestType(e):Ct("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),a.B=o)}function fy(e){return e.C?!1:e.m?e.m.readyState=="ended":!0}function ad(e,t){return e.C||!Object.keys(e.h).length?e=null:t==Tt?e=e.g.g:(e=ps(e,t),e=!e||Ua(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function $a(e,t){return e.C?null:t==Tt?e.g.h:Jh(ps(e,t))}function qT(e,t,n){return e.C?0:t==Tt?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=ps(e,t),Qm(e,n))}s.wb=function(){var e={total:this.C?[]:tr(this.i.buffered),audio:this.C?[]:tr(ps(this,"audio")),video:this.C?[]:tr(ps(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function ps(e,t){try{return e.h[t].buffered}catch{return null}}function KT(e,t,n,o,a,l){var u=null,c=Ze(n);if(Zo.includes(a))l=Lr(c),l.length&&o&&((t=l.find(function(S){return S.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(u=Math.round(t.data)/1e3),e.da.onMetadata([{cueTime:o.startTime,data:c,frames:l,dts:o.startTime,pts:o.startTime}],0,o.endTime));else if(a.includes("/mp4")&&o&&o.timestampOffset==0&&o.$&&o.$.timescale){var p=o.$.timescale;if(!isNaN(p)){var m=0,v=!1;new zt().box("moof",xt).box("traf",xt).S("tfdt",function(S){m=_u(S.reader,S.version).baseMediaDecodeTime/p,v=!0,S.parser.stop()}).parse(n,!0),v&&(u=m)}}else!a.includes("/mp4")&&!a.includes("/webm")&&ja(c)&&(e.K?e.K.clearData():e.K=new Gt,c=e.K.parse(c),t=c.getStartTime(t),t!=null&&(u=t),c=c.getMetadata(),c.length)&&e.da.onMetadata(c,l,o?o.endTime:null);return u}function Ou(e,t,n,o,a,l,u,c,p,m){u=u===void 0?!1:u,c=c===void 0?!1:c,p=p===void 0?!1:p,m=m===void 0?!1:m;var v,S,E,T,k,M,I,U,N,z,P,j,G,Z;return F(function(ee){switch(ee.g){case 1:if(v=xn,t!=v.ua){ee.u(2);break}if(!e.B){ee.u(3);break}return A(ee,e.za,4);case 4:S=ee.h,e.g.s=S;case 3:return A(ee,UC(e.g,n,o?o.startTime:null,o?o.endTime:null,o?o.M()[0]:null),5);case 5:return ee.return();case 2:if(m||!e.o){ee.u(6);break}return A(ee,Ou(e,v.X,n,o,a,l,u,c,p,!0),7);case 7:return A(ee,Ou(e,v.ga,n,o,a,l,u,c,p,!0),8);case 8:return ee.return();case 6:if(!e.h[t])return ee.return();if(E=e.h[t].timestampOffset,T=e.G[t],e.j[t]&&(T=e.j[t].getOriginalMimeType()),o&&(k=KT(e,t,n,o,T,E),k!=null&&(e.U==null&&t==v.ga&&(e.U=k,e.ya=o.startTime,e.R!=null&&(M=0,e.ya==e.pa&&(M=e.U-e.R),e.oa.resolve(M))),e.R==null&&t==v.X&&(e.R=k,e.pa=o.startTime,e.U!=null&&(I=0,e.ya==e.pa&&(I=e.U-e.R),e.oa.resolve(I))),U=o.startTime-k,N=Math.abs(E-U),(.001<=N||u||c)&&(!p||0<U||!E)&&(E=U,e.Ea&&(In(e,t,function(){return gs(e,t)},null),In(e,t,function(){return ms(e,t,E)},null))),z=t==v.ga||!(v.ga in e.h),e.B&&z&&e.za.resolve(E))),l&&t==v.ga&&(e.g||Nu(e,"application/cea-608",e.B,!1),e.H||(P=T.split(";",1)[0],e.H=new sn(P)),o?(j=e.H.i(n),j.length&&jC(e.g,j,o.startTime,o.endTime,E)):e.H.init(n,c)),!e.j[t]){ee.u(9);break}return A(ee,e.j[t].transmux(n,a,o,e.m.duration,t),10);case 10:n=ee.h;case 9:if(n=tE(e,n,o?o.startTime:null,t,o?o.M()[0]:null),!o||!e.B||t==v.ua){ee.u(11);break}if(!u&&!c){ee.u(11);break}if(G=o.startTime,e.ba!="HLS"||e.o||t!=v.X||!e.h[v.ga]){ee.u(13);break}return A(ee,e.oa,14);case 14:Z=ee.h,.1<Math.abs(Z)&&(G-=Z);case 13:In(e,t,function(){return gs(e,t)},null),In(e,t,function(){return ms(e,t,G)},null);case 11:return A(ee,In(e,t,function(){var fe=n;if(t=="video"&&e.Z){var te=e.Z;te.g&&te.g.appendBuffer(fe,"video",te.o,-E)}e.h[t].appendBuffer(fe)},o?o.M()[0]:null),15);case 15:Y(ee)}})}function ZT(e,t){var n=$a(e,"video")||0;Vg(e.g,t,n)}function QT(e){e.g&&Vg(e.g,"",0)}s.remove=function(e,t,n){var o=this,a;return F(function(l){return l.g==1?(a=xn,e==a.ua?A(l,o.g.remove(t,n),0):A(l,In(o,e,function(){return Uu(o,e,t,n)},null),4)):o.o?A(l,In(o,a.X,function(){return Uu(o,a.X,t,n)},null),0):l.u(0)})};function cy(e,t){var n;return F(function(o){return o.g==1?(n=xn,t==n.ua?e.g?A(o,e.g.remove(0,1/0),0):o.return():A(o,In(e,t,function(){return Uu(e,t,0,e.m.duration)},null),4)):e.o?A(o,In(e,n.X,function(){return Uu(e,n.X,0,e.m.duration)},null),0):o.u(0)})}s.flush=function(e){var t=this,n;return F(function(o){return o.g==1?(n=xn,e==n.ua?o.return():A(o,In(t,e,function(){t.i.currentTime-=.001,Do(t,e)},null),2)):t.o?A(o,In(t,n.X,function(){var a=n.X;t.i.currentTime-=.001,Do(t,a)},null),0):o.u(0)})};function JT(e,t,n,o,a,l,u,c,p){var m,v,S;return F(function(E){return E.g==1?(m=xn,t==m.ua?(l||(e.g.s=n),BC(e.g,o,a),E.return()):(v=[],A(E,oE(e,t,u,c,p),2))):(S=E.h,S||(v.push(In(e,t,function(){return gs(e,t)},null)),e.o&&v.push(In(e,m.X,function(){return gs(e,m.X)},null))),l||(v.push(In(e,t,function(){return ms(e,t,n)},null)),e.o&&v.push(In(e,m.X,function(){return ms(e,m.X,n)},null))),v.push(In(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=a,e.h[t].appendWindowStart=o,Do(e,t)},null)),e.o&&v.push(In(e,m.X,function(){var T=m.X;e.h[T].appendWindowStart=0,e.h[T].appendWindowEnd=a,e.h[T].appendWindowStart=o,Do(e,T)},null)),A(E,Promise.all(v),0))})}function eE(e,t,n){var o;return F(function(a){return a.g==1?(o=xn,t==o.ua?a.return():(t==o.ga&&(e.za=new Bt),In(e,t,function(){return gs(e,t)},null),e.o&&In(e,o.X,function(){return gs(e,o.X)},null),A(a,In(e,t,function(){return ms(e,t,n)},null),2))):e.o?A(a,In(e,o.X,function(){return ms(e,o.X,n)},null),0):a.u(0)})}s.endOfStream=function(e){var t=this;return F(function(n){return A(n,ld(t,function(){fy(t)||t.m.readyState==="closed"||(e?t.m.endOfStream(e):t.m.endOfStream())}),0)})},s.Za=function(e){var t=this;return F(function(n){return A(n,ld(t,function(){if(e<t.m.duration)for(var o in t.h){var a={start:function(){},p:new Bt,uri:null};t.l[o].unshift(a)}t.m.duration=e,t.ea=e}),0)})},s.getDuration=function(){return this.m.duration};function Uu(e,t,n,o){o<=n?Do(e,t):e.h[t].remove(n,o)}function gs(e,t){var n=e.h[t].appendWindowStart,o=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=o,Do(e,t)}function ms(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,Do(e,t)}function Do(e,t){if(!e.C){var n=e.l[t][0];n&&(n.p.resolve(),ud(e,t))}}function In(e,t,n,o){return Ft(e.I),n={start:n,p:new Bt,uri:o},e.l[t].push(n),e.l[t].length==1&&hy(e,t),n.p}function ld(e,t){var n,o,a,l,u,c,p;return F(function(m){switch(m.g){case 1:Ft(e.I),n=[],o={};for(a in e.h)o={ready:void 0},o.ready=new Bt,l={start:function(v){return function(){return v.ready.resolve()}}(o),p:o.ready,uri:null},e.l[a].push(l),n.push(o.ready),e.l[a].length==1&&l.start();return le(m,2),A(m,Promise.all(n),4);case 4:de(m,3);break;case 2:throw u=se(m),u;case 3:return le(m,5,6),A(m,t(),6);case 6:re(m);for(c in e.h)ud(e,c);oe(m,0);break;case 5:throw p=se(m),new J(2,3,3015,p,e.i.error||"No error in the media element",null)}})}function ud(e,t){e.l[t].shift(),hy(e,t)}function hy(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(o){o.name=="QuotaExceededError"?n.p.reject(new J(2,3,3017,t)):n.p.reject(new J(2,3,3015,o,e.i.error||"No error in the media element",n.uri)),ud(e,t)}}function tE(e,t,n,o,a){var l=n==null,u=e.Da[o];return n=e.da.Qh(),(l=e.A.insertFakeEncryptionInInit&&l&&u)&&(n=Th(n),l=ho()||co()||Ah()||Aa()&&bh()&&n),l&&du(e.G[o])=="mp4"&&(t=UT(t,a)),t}function nE(e,t,n,o){return In(e,t,function(){t!==Tt&&(tn()&&(e.j[t]&&(e.j[t].destroy(),delete e.j[t]),o&&(e.j[t]=o),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),Do(e,t))},null)}function iE(e,t){var n,o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe;return F(function(te){switch(te.g){case 1:n=xn,e.C=!0,e.o=!1,o=e.i.currentTime,a=e.i.autoplay,l=e.i.paused,e.qa&&(e.i.autoplay=!1),ge(te,2),e.s.Ra(),u=[];for(c in e.j)u.push(e.j[c].destroy());for(p in e.l)for(m=e.l[p],v=m[0],e.l[p]=m.slice(0,1),v&&u.push(v.p.catch(Gg)),S=w(m.slice(1)),E=S.next();!E.done;E=S.next())T=E.value,T.p.reject(new J(2,7,7003,void 0));for(k in e.h){M=e.h[k];try{e.m.removeSourceBuffer(M)}catch{}}return A(te,Promise.all(u),4);case 4:return e.j={},e.h={},I=e.m.duration,e.L=new Bt,e.m=uy(e,e.L),A(te,e.L,5);case 5:!isNaN(I)&&I?e.m.duration=I:!isNaN(e.ea)&&e.ea&&(e.m.duration=e.ea),U=new Bt,N=e.m.sourceBuffers,z=t.size,P=0,j=function(){P++,P===z&&(U.resolve(),e.s.jb(N,"addsourcebuffer",j))},e.s.D(N,"addsourcebuffer",j),G=w(t.keys()),Z=G.next();case 6:return Z.done?(e.i.currentTime=o,A(te,U,2)):(ee=Z.value,fe=t.get(ee),A(te,Du(e,ee,fe,fe.codecs),9));case 9:e.o?(e.l[n.X]=[],e.l[n.ga]=[]):e.l[ee]=[],Z=G.next(),te.u(6);break;case 2:re(te),e.C=!1,Ft(e.I),e.s.ha(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=a,l||e.i.play())}),oe(te,0)}})}function dy(e,t){return ld(e,function(){return iE(e,t)})}function oE(e,t,n,o,a){var l,u,c,p,m,v,S,E,T,k,M,I,U,N,z;return F(function(P){return P.g==1?(l=xn,t==l.ua?P.return(!1):(u=Qn(Ti(e.G[t])),c=Gi(e.G[t]),m=!1,v=wn(n,o),S=e.A.forceTransmux,(!kt(v)||!e.B&&Zo.includes(v))&&(S=!0),S&&(E=kr(n,o),T=qo(E))&&(p=T(),k=ai(l.X,(o||"").split(",")),M=ai(l.ga,(o||"").split(",")),k&&M?(m=!0,I=M,t==l.X&&(I=k),v=p.convertCodecs(t,kr(n,I))):v=p.convertCodecs(t,E)),U=Qn(Ti(v)),N=Gi(v),u===U&&c===N?(e.j[t]&&!p?(e.j[t].destroy(),delete e.j[t]):!e.j[t]&&p?e.j[t]=p:p&&(e.j[t]&&e.j[t].transmux!=p.transmux?(e.j[t].destroy(),delete e.j[t],e.j[t]=p):p.destroy()),P.return(!1)):(z=!0,(e.o||m&&p&&!e.j[t])&&(z=!1),z&&e.A.codecSwitchingStrategy==="smooth"&&tn()?A(P,nE(e,t,v,p),3):(p&&p.destroy(),A(P,dy(e,a),3))))):P.return(!0)})}function rE(e,t,n,o){if(t==Tt)var a=!1;else{a=Qn(Ti(e.G[t]));var l=Gi(e.G[t]),u=wn(n,o),c=e.A.forceTransmux;(!kt(u)||!e.B&&Zo.includes(u))&&(c=!0),n=kr(n,o),c&&(c=qo(n))&&(c=c(),u=c.convertCodecs(t,n),c.destroy()),t=Qn(Ti(u)),u=Gi(u),a=a!==t||l!==u}return a?e.A.codecSwitchingStrategy!=="smooth"||!tn()||e.o:!1}var Bu=d.URL.createObjectURL,sE="sequence";function Qe(e,t,n){this.i=e,this.A=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.B=0,this.G=!0,this.H=0,this.C=n===void 0?!0:n,this.F=0,this.s=!1,this.m=e}s=Qe.prototype,s.getDuration=function(){return this.j},s.Sh=function(){return this.g},s.dh=function(e){this.i=e},s.Za=function(e){this.j=e},s.Xh=function(){return this.i},s.ah=function(e){this.B=e},s.sc=function(e){this.G=e},s.pe=function(e){this.o=e},s.Od=function(){return this.o},s.Of=function(e){this.A=e},s.Lh=function(){return this.A},s.Ng=function(e,t){if(e.length!=0){var n=(Date.now()+this.B)/1e3;if(e=e.filter(function(a){return a.start+t<n}),e.length!=0){var o=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(a,l){return Math.max(a,l.end-l.start)},this.g),this.h=Math.max(this.h,o),this.i!=null&&this.C&&!this.s&&(this.i=n-this.h-this.g)}}},s.sd=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,o=(Date.now()+this.B)/1e3;e=w(e);for(var a=e.next();!a.done;a=e.next())a=a.value,o<a.startTime||(t=Math.min(t,a.startTime),n=Math.max(n,a.endTime),this.g=Math.max(this.g,a.endTime-a.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.s&&(this.i=o-this.h-this.g)}},s.Th=function(){return this.h},s.Wd=function(){this.s=!0},s.si=function(){return this.s},s.bh=function(e){this.m=e},s.Ph=function(){return this.m},s.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},s.xf=function(e){this.g=Math.max(this.g,e)},s.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},s.V=function(){return this.j==1/0&&!this.G},s.kc=function(){return this.j!=1/0&&!this.G},s.mb=function(){return Math.max(this.H,this.Wb()-this.o)},s.hh=function(e){this.H=e},s.Wb=function(){return this.V()||this.kc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},s.bd=function(e){var t=Math.max(this.l,this.H);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Wb()-this.o+e,this.yb()))},s.Vb=function(){return this.bd(0)},s.yb=function(){return Math.max(0,this.Wb()-(this.V()||this.kc()?this.A:0))},s.nh=function(){return!(this.i==null||this.h!=null&&this.C)},s.$g=function(e){this.F=e},s.Jh=function(){return this.F},ce("shaka.media.PresentationTimeline",Qe),Qe.prototype.getAvailabilityTimeOffset=Qe.prototype.Jh,Qe.prototype.setAvailabilityTimeOffset=Qe.prototype.$g,Qe.prototype.usingPresentationStartTime=Qe.prototype.nh,Qe.prototype.getSeekRangeEnd=Qe.prototype.yb,Qe.prototype.getSeekRangeStart=Qe.prototype.Vb,Qe.prototype.getSafeSeekRangeStart=Qe.prototype.bd,Qe.prototype.getSegmentAvailabilityEnd=Qe.prototype.Wb,Qe.prototype.setUserSeekStart=Qe.prototype.hh,Qe.prototype.getSegmentAvailabilityStart=Qe.prototype.mb,Qe.prototype.isInProgress=Qe.prototype.kc,Qe.prototype.isLive=Qe.prototype.V,Qe.prototype.offset=Qe.prototype.offset,Qe.prototype.notifyMaxSegmentDuration=Qe.prototype.xf,Qe.prototype.notifyMinSegmentStartTime=Qe.prototype.ce,Qe.prototype.getInitialProgramDateTime=Qe.prototype.Ph,Qe.prototype.setInitialProgramDateTime=Qe.prototype.bh,Qe.prototype.isStartTimeLocked=Qe.prototype.si,Qe.prototype.lockStartTime=Qe.prototype.Wd,Qe.prototype.getMaxSegmentEndTime=Qe.prototype.Th,Qe.prototype.notifySegments=Qe.prototype.sd,Qe.prototype.notifyTimeRange=Qe.prototype.Ng,Qe.prototype.getDelay=Qe.prototype.Lh,Qe.prototype.setDelay=Qe.prototype.Of,Qe.prototype.getSegmentAvailabilityDuration=Qe.prototype.Od,Qe.prototype.setSegmentAvailabilityDuration=Qe.prototype.pe,Qe.prototype.setStatic=Qe.prototype.sc,Qe.prototype.setClockOffset=Qe.prototype.ah,Qe.prototype.getPresentationStartTime=Qe.prototype.Xh,Qe.prototype.setDuration=Qe.prototype.Za,Qe.prototype.setPresentationStartTime=Qe.prototype.dh,Qe.prototype.getMaxSegmentDuration=Qe.prototype.Sh,Qe.prototype.getDuration=Qe.prototype.getDuration;function py(e,t,n){this.j=n,this.l=e,this.s=gy(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}py.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function aE(e,t){e.i=t}function lE(e){this.g=e}function gy(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=w(tr(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function fd(e,t,n,o,a){var l=this;this.A=a,this.g=e,this.B=t,this.s=n,this.l=new ct,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=o,this.o=!1,this.l.D(e,"waiting",function(){return cd(l)}),this.m=new mt(function(){cd(l)}).Sa(this.s.gapJumpTimerTime)}fd.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},fd.prototype.Af=function(){this.o=!0,cd(this)};function cd(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,o=gy(n),a=n.g.currentTime,l=Date.now()/1e3;(t.g!=a||t.s!=o)&&(t.m=l,t.g=a,t.s=o,t.h=!1),a=l-t.m,(o=a>=t.A&&o&&!t.h)&&(t.i(t.g,a),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new Fe("stalldetected"))),t=!o}t&&(t=e.g.currentTime,n=e.g.buffered,o=FT(n,t,e.s.gapDetectionThreshold),o!=null&&(o!=0||e.o))&&(a=n.start(o),(navigator.userAgent.match(/Edge\//)||co())&&(a=Math.ceil(100*(a+.01))/100),a>=e.B.yb()||.001>a-t||(o!=0&&n.end(o-1),e.g.currentTime=a,t==e.i&&(e.i=a),e.C++,e.A(new Fe("gapjumped"))))}}}function ys(e,t,n,o){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?o():(t=uE.value().get(t),n.ha(e,t,o))}var uE=new Yr(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function my(e,t,n,o){var a=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return a.l==null&&(a.l=o()),a.l},this.o=!1,this.h=new ct,this.i=new wy(e),ys(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){vy(a,a.j())})}my.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function hd(e){return e.o?e.g.currentTime:e.j()}function yy(e,t){0<e.g.readyState?Sy(e.i,t):ys(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){vy(e,e.j())})}function vy(e,t){.001>Math.abs(e.g.currentTime-t)?xy(e):(e.h.ha(e.g,"seeking",function(){xy(e)}),Sy(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function xy(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function wy(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new mt(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}wy.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function Sy(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Sa(.1)}function Cy(e){this.h=e,this.j=!1,this.g=null,this.i=new ct}s=Cy.prototype,s.ready=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,o=t.g;0>t.g&&(o=Math.max(0,n+t.g)),n!=o?(t.i.ha(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=o):t.j=!0}}var t=this;ys(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},s.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},s.Ee=function(e){this.g=this.j?this.g:e},s.yd=function(){return(this.j?this.h.currentTime:this.g)||0},s.gg=function(){return 0},s.fg=function(){return 0},s.Mg=function(){};function Ty(e,t,n,o,a,l){var u=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=a,this.s=null,this.o=fE(e,n,l),this.j=new fd(e,t.presentationTimeline,n,this.o,l),this.h=new my(e,function(){e:{var c=u.j;c.j=!0,c.o=!1;var p=hd(u.h);if(c=Ay(u,p),.001<Math.abs(c-p)){if(p=!1,!Ci()||Ci()&&cu())p=!0;else{var m=Date.now()/1e3;(!u.s||u.s<m-1)&&(u.s=m,p=!0)}if(p){yy(u.h,c),c=void 0;break e}}u.A(),c=void 0}return c},function(c){var p=u.j;p.g.seeking&&!p.j&&(p.j=!0,p.i=c)},function(){var c=o;return c==null?c=1/0>u.g.getDuration()?u.g.Vb():u.g.yb():0>c&&(c=u.g.yb()+c),Ey(u,by(u,c))}),this.m=new mt(function(){if(u.i.readyState!=0&&!u.i.paused){var c=hd(u.h),p=u.g.Vb(),m=u.g.yb();3>m-p&&(p=m-3),c<p&&(c=Ay(u,c),u.i.currentTime=c)}})}s=Ty.prototype,s.ready=function(){this.m.Sa(.25)},s.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},s.Ee=function(e){yy(this.h,e)},s.yd=function(){var e=hd(this.h);return 0<this.i.readyState&&!this.i.paused?by(this,e):e},s.gg=function(){return this.o?this.o.o:0},s.fg=function(){return this.j.C},s.Mg=function(){this.j.Af()};function Ey(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Ay(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),o=e.l.safeSeekOffset,a=e.g.Vb(),l=e.g.yb(),u=e.g.getDuration();3>l-a&&(a=l-3);var c=e.g.bd(n),p=e.g.bd(o);return n=e.g.bd(n+o),t>=u?Ey(e,t):t>l?l:t<a?ed(e.i.buffered,p)?p:n:t>=c||ed(e.i.buffered,t)?t:n}function by(e,t){var n=e.g.Vb();return t<n?n:(e=e.g.yb(),t>e?e:t)}function fE(e,t,n){if(!t.stallEnabled)return null;var o=t.stallSkip;return t=new py(new lE(e),t.stallThreshold,n),aE(t,function(){o?e.currentTime+=o:(e.pause(),e.play())}),t}function It(e){this.O=e,this.l=null,this.i=0,this.m=!1}s=It.prototype,s.getNumReferences=function(){return this.O.length},s.getNumEvicted=function(){return this.i},s.release=function(){this.m||(this.O=[],this.l&&this.l.stop(),this.l=null)},s.yi=function(){this.m=!0},s.Hb=function(e){for(var t=w(this.O),n=t.next();!n.done;n=t.next())e(n.value)},s.find=function(e){for(var t=this.O.length-1,n=t;0<=n;--n){var o=this.O[n],a=n<t?this.O[n+1].startTime:o.endTime;if(e>=o.startTime&&e<a)return n+this.i}return this.O.length&&e<this.O[0].startTime?this.i:null},s.get=function(e){return this.O.length==0?null:(e-=this.i,0>e||e>=this.O.length?null:this.O[e])},s.offset=function(e){if(!this.m)for(var t=w(this.O),n=t.next();!n.done;n=t.next())n.value.offset(e)},s.Zd=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.O=this.O.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.O.push.apply(this.O,L(e))}},s.rd=function(e,t){var n=this;e=e.filter(function(o){return o.endTime>t&&(n.O.length==0||o.endTime>n.O[0].startTime)}),this.Zd(e),this.Ma(t)},s.Ma=function(e){if(!this.m){var t=this.O.length;this.O=this.O.filter(function(n){return n.endTime>e}),this.i+=t-this.O.length}},s.Bc=function(e,t,n){if(n=n===void 0?!1:n,!this.m){for(;this.O.length&&this.O[this.O.length-1].startTime>=t;)this.O.pop();for(;this.O.length&&this.O[0].endTime<=e;)this.O.shift(),n||this.i++;this.O.length!=0&&(e=this.O[this.O.length-1],t=new Je(e.startTime,t,e.F,e.Ha,e.sa,e.$,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.O[this.O.length-1]=t)}},s.ue=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new mt(function(){var o=t();o?n.O.push.apply(n.O,L(o)):(n.l.stop(),n.l=null)}),this.l.Sa(e))},It.prototype[Symbol.iterator]=function(){return this.Ib(0)},It.prototype.Ib=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var o=this.find(e);if(o==null)return null;var a=this.get(o);n?o++:o--;var l=-1;if(a&&0<a.g.length)for(var u=a.g.length-1;0<=u;--u){var c=a.g[u];if(e>=c.startTime&&e<c.endTime){if(!t){for(;u&&!c.l;)u--,c=a.g[u];if(!c.l)return Pe("No independent partial segment found!"),null}n?o--:o++,l=u-1;break}}return new Ei(this,o,l,n)};function dd(e,t,n){return e=new Je(e,e+t,function(){return n},0,null,null,e,e,e+t),new It([e])}ce("shaka.media.SegmentIndex",It),It.forSingleSegment=dd,It.prototype.getIteratorForTime=It.prototype.Ib,It.prototype.updateEvery=It.prototype.ue,It.prototype.fit=It.prototype.Bc,It.prototype.evict=It.prototype.Ma,It.prototype.mergeAndEvict=It.prototype.rd,It.prototype.offset=It.prototype.offset,It.prototype.get=It.prototype.get,It.prototype.find=It.prototype.find,It.prototype.markImmutable=It.prototype.yi,It.prototype.release=It.prototype.release,It.prototype.getNumEvicted=It.prototype.getNumEvicted,It.prototype.getNumReferences=It.prototype.getNumReferences;function Ei(e,t,n,o){this.i=e,this.h=t,this.g=n,this.reverse=o}Ei.prototype.Sc=function(e){this.reverse=e},Ei.prototype.Eh=function(){return this.h},Ei.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Ei.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},ce("shaka.media.SegmentIterator",Ei),Ei.prototype.next=Ei.prototype.next,Ei.prototype.current=Ei.prototype.current,Ei.prototype.currentPosition=Ei.prototype.Eh,Ei.prototype.setReverse=Ei.prototype.Sc;function un(){It.call(this,[]),this.g=[]}K(un,It),s=un.prototype,s.clone=function(){var e=new un;return e.g=this.g.slice(),e},s.release=function(){for(var e=w(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g=[]},s.Hb=function(e){for(var t=w(this.g),n=t.next();!n.done;n=t.next())n.value.Hb(e)},s.find=function(e){for(var t=0,n=w(this.g),o=n.next();!o.done;o=n.next()){o=o.value;var a=o.find(e);if(a!=null)return a+t;t+=o.getNumEvicted()+o.getNumReferences()}return null},s.get=function(e){for(var t=0,n=w(this.g),o=n.next();!o.done;o=n.next()){o=o.value;var a=o.get(e-t);if(a)return a;a=o.getNumReferences(),t+=o.getNumEvicted()+a}return null},s.offset=function(){},s.Zd=function(){},s.Ma=function(){},s.rd=function(){},s.Bc=function(){},s.ue=function(){},ce("shaka.media.MetaSegmentIndex",un),un.prototype.updateEvery=un.prototype.ue,un.prototype.fit=un.prototype.Bc,un.prototype.mergeAndEvict=un.prototype.rd,un.prototype.evict=un.prototype.Ma,un.prototype.merge=un.prototype.Zd,un.prototype.offset=un.prototype.offset,un.prototype.get=un.prototype.get,un.prototype.find=un.prototype.find,un.prototype.forEachTopLevelReference=un.prototype.Hb,un.prototype.release=un.prototype.release;function za(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Nd(),this.h=new mt(function(){t.g.Lg(.25*t.i)})}za.prototype.release=function(){this.set(this.hc()),this.h&&(this.h.stop(),this.h=null),this.g=null},za.prototype.set=function(e){this.i=e,ky(this)},za.prototype.hc=function(){return this.g.hc()};function ky(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Nd()!=t&&e.g.Rf(t);return}catch{}e.h.Sa(.25),e.g.Nd()!=0&&e.g.Rf(0)}function Iy(e){var t=this;this.h=e,this.g=new Set,this.i=new mt(function(){My(t,!1)}).Sa(.25)}Iy.prototype.release=function(){this.i.stop();for(var e=w(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function My(e,t){for(var n=w(e.g),o=n.next();!o.done;o=n.next())o.value.j(e.h.currentTime,t)}function cE(){this.g=null,this.h=[]}function pd(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=w(e.h);for(var o=e.next();!o.done;o=e.next())o=o.value,n+=o.state==t?o.duration:0;return n}function hE(e){function t(l){return{timestamp:l.timestamp,state:l.state,duration:l.duration}}for(var n=[],o=w(e.h),a=o.next();!a.done;a=o.next())n.push(t(a.value));return e.g&&n.push(t(e.g)),n}function dE(){this.i=this.h=null,this.g=[]}function gd(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function ju(){this.Cd=this.Hg=this.A=this.B=this.I=this.C=this.s=this.j=this.H=this.m=this.i=this.U=this.Z=this.L=this.N=this.R=this.l=this.o=NaN,this.K=0,this.F=this.G=NaN,this.g=new cE,this.h=new dE}function Fu(e,t,n,o){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=o}function pE(e,t){e.l=t,e=w(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function Va(e,t,n){if(n=n===void 0?!1:n,e.i.segmentIndex&&(e.g||(e.g=e.i.segmentIndex.Ib(t,!0,e.o)),e.g)){for(n&&e.g.next();e.h.size<e.m&&(t=e.g.next().value,!!t);)n=!0,t.preload&&t.sa!=null&&(n=!1),t.Yb()==2&&(n=!1),n&&t.$&&Ry(e,t.$),n&&!e.h.has(t)&&(n=new yd(e.l),Py(n,t,e.i),e.h.set(t,n));md(e)}}function Ry(e,t){if(e.i.segmentIndex&&!Array.from(e.j.keys()).some(function(o){return Qh(o,t)})){var n=new yd(e.l);Py(n,t,e.i),e.j.set(t,n)}}function _y(e,t){t=w(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Ha(e,n)}function oo(e){_y(e,e.h),_y(e,e.j),e.g=null}Fu.prototype.Ma=function(e,t){t=t===void 0?!1:t;for(var n=w(this.h.keys()),o=n.next();!o.done;o=n.next())o=o.value,e>o.endTime&&Ha(this,o);t&&md(this)},Fu.prototype.Sc=function(e){this.o=e,this.g&&this.g.Sc(e)};function md(e){for(var t=Array.from(e.h.keys()),n=w(e.j.keys()),o=n.next(),a={};!o.done;a={nf:void 0},o=n.next())a.nf=o.value,t.some(function(l){return function(u){return Qh(u.$,l.nf)}}(a))||Ha(e,a.nf)}function Ly(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var o=n.pop();o&&Ha(e,o)}md(e)}function gE(e,t){t&&t!==e.i&&(oo(e),e.i=t)}function Ha(e,t){var n=e.h;t instanceof ui&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function yd(e){this.g=e,this.fe=this.Uf=null}function Py(e,t,n){var o=new Uint8Array(0);e.fe=e.g(t,n,function(a){return F(function(l){if(l.g==1)return 0<o.byteLength?o=ln(o,a):o=a,e.Uf?A(l,e.Uf(o),3):l.u(0);o=new Uint8Array(0),Y(l)})})}yd.prototype.abort=function(){this.fe&&this.fe.abort()};function vd(e){Lt.call(this);var t=this;this.g=new Set,this.i=e,this.h=new mt(function(){for(var n=t.i(),o=w(t.g),a=o.next();!a.done;a=o.next())a=a.value,a.endTime<n.start&&(t.g.delete(a),a=new Fe("regionremove",new Map([["region",a]])),t.dispatchEvent(a))}).Sa(2)}K(vd,Lt),vd.prototype.release=function(){this.g.clear(),this.h.stop(),Lt.prototype.release.call(this)};function $u(e){Lt.call(this),this.g=new Map,this.h=e}K($u,Lt),$u.prototype.release=function(){this.g.clear(),Lt.prototype.release.call(this)};function mE(e,t){var n=e.g.get(t);return n||(n={ud:[],Pe:null,contentType:t},e.g.set(t,n)),n}function yE(e,t,n){var o=mE(e,t.contentType);vE(e,o),e={Hc:t,position:n},o=o.ud,t=o.findIndex(function(a){return a.position>=n}),0<=t?o.splice(t,o[t].position==n?1:0,e):o.push(e)}$u.prototype.j=function(e){for(var t=w(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var o=n.Pe;e:{for(var a=n.ud,l=a.length-1;0<=l;l--){var u=a[l];if(u.position<=e){a=u.Hc;break e}}a=null}l=a&&!(o===a||o&&a&&o.bandwidth==a.bandwidth&&o.audioSamplingRate==a.audioSamplingRate&&o.codecs==a.codecs&&o.contentType==a.contentType&&o.frameRate==a.frameRate&&o.height==a.height&&o.mimeType==a.mimeType&&o.channelsCount==a.channelsCount&&o.pixelAspectRatio==a.pixelAspectRatio&&o.width==a.width),u=a&&o&&a.label&&o.label&&o.label!==a.label;var c=a&&o&&a.language&&o.language&&o.language!==a.language;o=a&&o&&a.roles&&o.roles&&!Si(o.roles,a.roles),(u||c||o)&&Dy(this,e,a.contentType)&&(n.Pe=a,o=new Fe("audiotrackchange",new Map([["quality",a],["position",e]])),this.dispatchEvent(o)),l&&Dy(this,e,a.contentType)&&(n.Pe=a,JSON.stringify(a),n=new Fe("qualitychange",new Map([["quality",a],["position",e]])),this.dispatchEvent(n))}};function Dy(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function vE(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,o=e[e.length-1].end,a=t.ud;t.ud=a.filter(function(l,u){return!(l.position<=n&&u+1<a.length&&a[u+1].position<=n||l.position>=o)})}else t.ud=[]}function zu(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function Vu(e){var t=Gi(e),n=t.split("/")[0];return e=Ti(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,xd:null,colorGamut:null}}function xE(e,t){function n(P){I=P.name;var j=P.reader;j.skip(24);var G=j.la(),Z=j.la();j.skip(50),S=String(G),v=String(Z),P.reader.na()&&xt(P)}function o(P){var j=iy(P.reader);E=j.channelCount,T=j.sampleRate,a(P.name)}function a(P){switch(P=P.toLowerCase(),P){case"avc1":case"avc3":u.push(P+".42E01E"),p=!0;break;case"hev1":case"hvc1":u.push(P+".1.6.L93.90"),p=!0;break;case"dvh1":case"dvhe":u.push(P+".05.04"),p=!0;break;case"vp09":u.push(P+".00.10.08"),p=!0;break;case"av01":u.push(P+".0.01M.08"),p=!0;break;case"mp4a":l.push("mp4a.40.2"),c=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":l.push(P),c=!0}}var l=[],u=[],c=!1,p=!1,m=null,v=null,S=null,E=null,T=null,k=null,M=null,I;if(new zt().box("moov",xt).box("trak",xt).box("mdia",xt).S("mdhd",function(P){m=Lu(P.reader,P.version).language}).box("minf",xt).box("stbl",xt).S("stsd",Qo).box("mp4a",function(P){var j=iy(P.reader);E=j.channelCount,T=j.sampleRate,P.reader.na()?xt(P):a(P.name)}).box("esds",function(P){P=P.reader;for(var j="mp4a",G,Z;P.na();){G=P.T();for(var ee=P.T();ee&128;)ee=P.T();if(G==3)P.la(),ee=P.T(),ee&128&&P.la(),ee&64&&P.skip(P.T()),ee&32&&P.la();else if(G==4)Z=P.T(),P.skip(12);else if(G==5)break}Z&&(j+="."+Ba(Z),G==5&&P.na()&&(G=P.T(),Z=(G&248)>>3,Z===31&&P.na()&&(Z=32+((G&7)<<3)+((P.T()&224)>>5)),j+="."+Z)),l.push(j),c=!0}).box("ac-3",o).box("ec-3",o).box("ac-4",o).box("Opus",o).box("fLaC",o).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(P){var j=I||"";switch(I){case"dvav":j="avc3";break;case"dva1":j="avc1"}P=P.reader,P.skip(1),P=j+"."+Ba(P.T())+Ba(P.T())+Ba(P.T()),u.push(P),p=!0}).box("hvcC",function(P){var j=I||"";switch(I){case"dvh1":j="hvc1";break;case"dvhe":j="hev1"}var G=P.reader;G.skip(1),P=G.T();var Z=["","A","B","C"][P>>6],ee=P&31,fe=G.P(),te=(P&32)>>5?"H":"L";P=[G.T(),G.T(),G.T(),G.T(),G.T(),G.T()],G=G.T();for(var ne=0,ae=0;32>ae&&(ne|=fe&1,ae!=31);ae++)ne<<=1,fe>>=1;for(j=j+("."+Z+ee)+("."+Ba(ne,!0)),j+="."+te+G,Z="",ee=P.length;ee--;)((te=P[ee])||Z)&&(Z="."+te.toString(16).toUpperCase()+Z);j+=Z,u.push(j),p=!0}).box("dvcC",function(P){var j=I||"";switch(I){case"hvc1":j="dvh1";break;case"hev1":j="dvhe";break;case"avc1":j="dva1";break;case"avc3":j="dvav";break;case"av01":j="dav1"}var G=P.reader;G.skip(2),P=G.T(),G=G.T(),u.push(j+"."+fi(P>>1&127)+"."+fi(P<<5&32|G>>3&31)),p=!0}).box("dvvC",function(P){var j=I||"";switch(I){case"hvc1":j="dvh1";break;case"hev1":j="dvhe";break;case"avc1":j="dva1";break;case"avc3":j="dvav";break;case"av01":j="dav1"}var G=P.reader;G.skip(2),P=G.T(),G=G.T(),u.push(j+"."+fi(P>>1&127)+"."+fi(P<<5&32|G>>3&31)),p=!0}).S("vpcC",function(P){var j=I||"",G=P.reader;P=G.T();var Z=G.T();G=G.T()>>4&15,u.push(j+"."+fi(P)+"."+fi(Z)+"."+fi(G)),p=!0}).box("av1C",function(P){var j=I||"";switch(I){case"dav1":j="av01"}var G=P.reader;G.skip(1),P=G.T(),G=G.T();var Z=P>>>5,ee=(G&64)>>6;u.push(j+"."+Z+"."+fi(P&31)+(G>>>7?"H":"M")+"."+fi(Z===2&&ee?(G&32)>>5?12:10:ee?10:8)+"."+((G&16)>>4)+"."+((G&8)>>3)+((G&4)>>2)+(G&3)+"."+fi(1)+"."+fi(1)+"."+fi(1)+".0"),p=!0}).box("enca",Vh).box("encv",li).box("sinf",xt).box("frma",function(P){P=oy(P.reader).codec,a(P)}).box("colr",function(P){u=u.map(function(Z){if(Z.startsWith("av01.")){var ee=P.reader,fe=ee.va(),te=ee.qb(4),ne=String.fromCharCode(te[0]);if(ne+=String.fromCharCode(te[1]),ne+=String.fromCharCode(te[2]),ne+=String.fromCharCode(te[3]),ne==="nclx"){te=ee.la(),ne=ee.la();var ae=ee.la(),xe=ee.T()>>7,me=Z.split(".");me.length==10&&(me[6]=fi(te),me[7]=fi(ne),me[8]=fi(ae),me[9]=String(xe),Z=me.join("."))}ee.seek(fe)}return Z});var j=zT(P.reader),G=j.colorGamut;k=j.xd,M=G}).parse(e||t,!0),!l.length&&!u.length)return null;var U=c&&!p,N=new Map;if(p){var z=new sn("video/mp4");for(e&&z.init(e),z.i(t),e=w(z.j()),t=e.next();!t.done;t=e.next())t=t.value,N.set(t,t);z.g()}return{type:U?"audio":"video",mimeType:U?"audio/mp4":"video/mp4",codecs:xd(l.concat(u)).join(", "),language:m,height:v,width:S,channelCount:E,sampleRate:T,closedCaptions:N,xd:k,colorGamut:M}}function xd(e){var t=new Set,n=[];e=w(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var a=es(o);t.has(a)||(n.push(o),t.add(a))}return t=Rh("audio",n),o=Rh("video",n),e=Rh(Tt,n),o=wE(o),t=t.concat(o).concat(e),n.length&&!t.length?n:t}function wE(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?kt('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function SE(e){var t=null;return new zt().box("moov",xt).box("trak",xt).box("mdia",xt).box("minf",xt).box("stbl",xt).S("stsd",Qo).box("encv",li).box("enca",Vh).box("sinf",xt).box("schi",xt).S("tenc",function(n){n=n.reader,n.T(),n.T(),n.T(),n.T(),t=bo(n.qb(16))}).parse(e,!0),t}function wd(e,t,n){var o,a,l,u,c;return F(function(p){if(p.g==1)return o=t,o.cryptoKey?p.u(2):A(p,o.fetchKey(),3);if(a=o.iv,!a)for(a=Ze(new ArrayBuffer(16)),l=o.firstMediaSequenceNumber+n,u=a.byteLength-1;0<=u;u--)a[u]=l&255,l>>=8;return t.blockCipherMode=="CBC"?c={name:"AES-CBC",iv:a}:c={name:"AES-CTR",counter:a,length:64},p.return(d.crypto.subtle.decrypt(c,o.cryptoKey,e))})}function vs(e,t,n,o,a){return e=kn(e,o,a),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Ny(e,t){var n=this;this.g=t,this.l=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.m=new ls(function(){return CE(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null},this.N=0,this.L=1/0}s=Ny.prototype,s.destroy=function(){return this.m.destroy()};function CE(e){var t,n,o,a,l,u,c;return F(function(p){if(p.g==1){for(t=[],n=w(e.i.values()),o=n.next();!o.done;o=n.next())a=o.value,Ga(a),t.push(Xa(a)),a.W&&(oo(a.W),a.W=null);for(l=w(e.o.values()),u=l.next();!u.done;u=l.next())c=u.value,oo(c);return A(p,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.l=null,e.h=null,Y(p)})}s.configure=function(e){if(this.h=e,this.I=new hm({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(oo(t.W),t.W=null),t=w(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,oo(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(Tt))&&t.W&&(oo(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(oo(t.W),t.W=null),t=w(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(Ly(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(oo(n.W),n.W=null)):0<e.segmentPrefetchLimit&&(n.W=Sd(this,n.stream));e.disableAudioPrefetch||IE(this)};function TE(e,t,n){e.l.presentationTimeline.V()||(e.N=t,e.L=n)}s.start=function(e){var t=this;return F(function(n){if(n.g==1)return A(n,kE(t,e||new Map),2);Ft(t.m),t.C=!0,Y(n)})};function EE(e,t){var n,o,a,l,u,c;F(function(p){switch(p.g){case 1:return n=xn,e.H++,o=e.H,le(p,2),A(p,cy(e.g.aa,n.ua),4);case 4:de(p,3);break;case 2:a=se(p),e.g&&e.g.onError(a);case 3:l=wn(t.mimeType,t.codecs),Nu(e.g.aa,l,e.l.sequenceMode,t.external),u=e.g.aa.F,(u.isTextVisible()||e.h.alwaysStreamText)&&e.H==o&&(c=By(e,t),e.i.set(n.ua,c),Pi(e,c,0)),Y(p)}})}function AE(e){var t=e.i.get(Tt);t&&(Ga(t),Xa(t).catch(function(){}),e.i.delete(Tt)),e.s=null}function Oy(e,t){for(var n=0>e.g.eb(),o=w(e.i.values()),a=o.next();!a.done;a=o.next())a=a.value,a.ia&&a.ia.Sc(n),a.W&&a.W.Sc(n);for(o=w(e.o.values()),a=o.next();!a.done;a=o.next())a.value.Sc(n);(n=e.i.get("video"))&&(o=n.stream)&&(t?(t=o.trickModeVideo)&&!n.rc&&(xs(e,t,!1,0,!1),n.rc=o):(t=n.rc)&&(n.rc=null,xs(e,t,!0,0,!1)))}function Uy(e,t,n,o,a,l){n=n===void 0?!1:n,o=o===void 0?0:o,a=a===void 0?!1:a,l=l===void 0?!1:l,e.j=t,e.C&&(t.video&&xs(e,t.video,n,o,a,l),t.audio&&xs(e,t.audio,n,o,a,l))}function Hu(e,t){F(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):A(n,t.createSegmentIndex(),2):n.return();xs(e,t,!0,0,!1),Y(n)})}function xs(e,t,n,o,a,l){var u=e.i.get(t.type);u||t.type!=Tt?u&&(u.rc&&(t.trickModeVideo?(u.rc=t,t=t.trickModeVideo):u.rc=null),u.stream!=t||a)&&(e.o.has(t)?u.W=e.o.get(t):u.W&&gE(u.W,t),t.type==Tt&&(a=wn(t.mimeType,t.codecs),Nu(e.g.aa,a,e.l.sequenceMode,t.external)),e.o.has(u.stream)||u.stream.closeSegmentIndex&&u.stream.closeSegmentIndex(),u.stream=t,u.ia=null,u.hg=!!l,n?u.Vc?u.Be=!0:u.Qa?(u.cc=!0,u.Hd=o,u.Be=!0):(Ga(u),Ad(e,u,!0,o).catch(function(c){e.g&&e.g.onError(c)})):u.Qa||u.sb||Pi(e,u,0),bE(e,u).catch(function(c){e.g&&e.g.onError(c)})):EE(e,t)}function bE(e,t){var n,o;return F(function(a){if(a.g==1)return t.ib?(n=t.stream,o=t.ib,n.segmentIndex?a.u(2):A(a,n.createSegmentIndex(),2)):a.return();if(t.ib!=o||t.stream!=n)return a.return();var l=e.g.Md(),u=$a(e.g.aa,t.type),c=t.stream.segmentIndex.find(t.Na?t.Na.endTime:l),p=c==null?null:t.stream.segmentIndex.get(c);c=p&&p.sa?p.sa-p.Ha:null,p&&!c&&(c=(p.endTime-p.getStartTime())*(t.stream.bandwidth||0)/8),c?((p=p.$)&&(c+=(p.sa?p.sa-p.Ha:null)||0),p=e.g.getBandwidthEstimate(),l=8*c/p<(u||0)-l-Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal)||t.ib.h.g>c):l=!1,l&&t.ib.abort(),Y(a)})}s.Qc=function(){if(this.g)for(var e=this.g.Md(),t=w(this.i.keys()),n=t.next();!n.done;n=t.next()){var o=n.value;n=this.i.get(o);var a=this.g.aa;if(a.C?a=!1:o==Tt?(a=a.g,a=a.g==null||a.h==null?!1:e>=a.g&&e<a.h):(a=ps(a,o),a=ed(a,e)),!a){if(n.W&&(n.W.g=null),n.type==="audio"){a=w(this.o.values());for(var l=a.next();!l.done;l=a.next())l.value.g=null}n.ia=null,($a(this.g.aa,o)!=null||n.Qa)&&Gu(this,n),n.ib&&(n.ib.abort(),n.ib=null),o===Tt&&(o=this.g.aa,o.H&&o.H.g()),n.Qc=!0}}};function Gu(e,t){t.Vc||t.cc||(t.Qa?(t.cc=!0,t.Hd=0):ad(e.g.aa,t.type)==null?t.sb==null&&Pi(e,t,0):(Ga(t),Ad(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function kE(e,t){var n,o,a,l,u,c,p,m,v,S;return F(function(E){if(E.g==1){if(n=xn,!e.j)throw new J(2,5,5006);return o=new Map,a=new Set,e.j.audio&&(o.set(n.X,e.j.audio),a.add(e.j.audio)),e.j.video&&(o.set(n.ga,e.j.video),a.add(e.j.video)),e.s&&(o.set(n.ua,e.s),a.add(e.s)),l=e.g.aa,A(E,l.init(o,e.l.sequenceMode,e.l.type,e.l.ignoreManifestTimestampsInSegmentsMode),2)}for(Ft(e.m),e.updateDuration(),u=w(o.keys()),c=u.next();!c.done;c=u.next())p=c.value,m=o.get(p),e.i.has(p)||(v=By(e,m),t.has(m.id)&&(S=t.get(m.id),pE(S,function(T,k,M){return Xu(T,k,M||null,e.h.retryParameters,e.g.Lb)}),v.W=S),e.i.set(p,v),Pi(e,v,0));Y(E)})}function By(e,t){return{stream:t,type:t.type,ia:null,W:Sd(e,t),Na:null,lc:null,Vd:null,Ud:null,Td:null,rc:null,endOfStream:!1,Qa:!1,sb:null,cc:!1,Hd:0,Be:!1,Vc:!1,Qc:!0,Gf:!1,fd:!1,ib:null}}function Sd(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===Tt&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===Tt&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new Fu(e.h.segmentPrefetchLimit,t,function(o,a,l){return Xu(o,a,l||null,e.h.retryParameters,e.g.Lb)},0>e.g.eb()):null}function IE(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,o=w(e.l.variants),a=o.next(),l={};!a.done;l={lb:void 0},a=o.next())if(l.lb=a.value,l.lb.audio)if(e.o.has(l.lb.audio)){if(a=e.o.get(l.lb.audio),Ly(a,t),!(0<t&&n.some(function(c){return function(p){return ts(c.lb.audio.language,p)}}(l)))){var u=e.i.get(l.lb.audio.type);a!==(u&&u.W)&&oo(a),e.o.delete(l.lb.audio)}}else 0>=t||!n.some(function(c){return function(p){return ts(c.lb.audio.language,p)}}(l))||!(a=Sd(e,l.lb.audio))||(l.lb.audio.segmentIndex||l.lb.audio.createSegmentIndex(),e.o.set(l.lb.audio,a))}s.updateDuration=function(){var e=this.l.presentationTimeline.getDuration();1/0>e?this.g.aa.Za(e):this.g.aa.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function ME(e,t){var n,o,a,l,u,c;return F(function(p){switch(p.g){case 1:if(Ft(e.m),t.Qa||t.sb==null||t.Vc)return p.return();if(t.sb=null,!t.cc){p.u(2);break}return A(p,Ad(e,t,t.Be,t.Hd),3);case 3:return p.return();case 2:if(t.stream.segmentIndex){p.u(4);break}return n=t.stream,le(p,5),A(p,t.stream.createSegmentIndex(),7);case 7:de(p,6);break;case 5:return o=se(p),A(p,bd(e,t,o),8);case 8:return p.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.sb||Pi(e,t,0),p.return();case 4:le(p,9),a=RE(e,t),a!=null&&(Pi(e,t,a),t.fd=!1),de(p,10);break;case 9:return l=se(p),A(p,bd(e,t,l),11);case 11:return p.return();case 10:if(u=Array.from(e.i.values()),!e.C||!u.every(function(m){return m.endOfStream})){p.u(0);break}return A(p,e.g.aa.endOfStream(),13);case 13:Ft(e.m),c=e.g.aa.getDuration(),c!=0&&c<e.l.presentationTimeline.getDuration()&&e.l.presentationTimeline.Za(c),Y(p)}})}function RE(e,t){if(Td(t))return ZT(e.g.aa,t.stream.originalId||""),null;if(t.type==Tt&&QT(e.g.aa),!e.g.aa.xa&&t.type!=Tt)return e.h.updateIntervalSeconds/2;var n=e.g.Md();if(t.type==="audio")for(var o=w(e.o.keys()),a=o.next();!a.done;a=o.next())a=e.o.get(a.value),a.Ma(n,!0),Va(a,n);o=t.Na?t.Na.endTime:n;var l=qT(e.g.aa,t.type,n),u=Math.max(1,Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),c=e.l.presentationTimeline.getDuration()-o;if(a=$a(e.g.aa,t.type),1e-6>c&&a)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(Tt))&&Td(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,l>=u)return e.h.updateIntervalSeconds/2;if(u=!t.ia,a=_E(e,t,n,a),!a)return e.h.updateIntervalSeconds;l=!1,u&&t.hg&&(l=!0,t.hg=!1),u=1/0,c=Array.from(e.i.values()),c=w(c);for(var p=c.next();!p.done;p=c.next())p=p.value,Td(p)||p.ia&&!p.ia.current()||(u=Math.min(u,p.Na?p.Na.endTime:n));return o>=u+e.l.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.ia&&!e.o.has(t.stream)&&(t.W.Ma(a.startTime),Va(t.W,a.startTime)),LE(e,t,n,a,l).catch(function(){}),null)}function _E(e,t,n,o){var a=t.ia?t.ia.current():null;if(a)return a;if(t.Na||o)return t.ia=t.stream.segmentIndex.Ib(t.Na?t.Na.endTime:o,!1,0>e.g.eb()),t.ia&&t.ia.next().value;o=e.l.sequenceMode?0:e.h.inaccurateManifestTolerance,a=Math.max(n-o,0),e=0>e.g.eb();var l=null;return o&&(t.ia=t.stream.segmentIndex.Ib(a,!1,e),l=t.ia&&t.ia.next().value),l||(t.ia=t.stream.segmentIndex.Ib(n,!1,e),l=t.ia&&t.ia.next().value),l}function LE(e,t,n,o,a){var l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P;return F(function(j){switch(j.g){case 1:if(l=xn,u=t.stream,c=t.ia,t.Qa=!0,le(j,2),o.Yb()==2)throw new J(1,1,1011);return A(j,NE(e,t,o,a),4);case 4:return Ft(e.m),e.A?j.return():(p=u.mimeType=="video/mp4"||u.mimeType=="audio/mp4",m=d.ReadableStream,e.h.lowLatencyMode&&e.l.isLowLatency&&m&&p&&(e.l.type!="HLS"||o.m)?(E=new Uint8Array(0),k=T=!1,I=function(G){var Z,ee,fe;return F(function(te){switch(te.g){case 1:if(T||(k=!0,Ft(e.m),e.A))return te.return();if(le(te,2),E=PE(E,G),Z=!1,ee=0,new zt().box("mdat",function(ne){ee=ne.size+ne.start,Z=!0}).parse(E,!1,!0),!Z){te.u(4);break}return fe=E.subarray(0,ee),E=E.subarray(ee),A(te,Cd(e,t,n,u,o,fe,!0,a),5);case 5:t.W&&t.ia&&Va(t.W,o.startTime,!0);case 4:de(te,0);break;case 2:M=se(te),Y(te)}})},A(j,Ed(e,t,o,I),9)):(v=Ed(e,t,o),A(j,v,7)));case 7:return S=j.h,Ft(e.m),e.A?j.return():(Ft(e.m),t.cc?(t.Qa=!1,Pi(e,t,0),j.return()):A(j,Cd(e,t,n,u,o,S,!1,a),6));case 9:if(U=j.h,M)throw M;if(k){j.u(10);break}return T=!0,Ft(e.m),e.A?j.return():t.cc?(t.Qa=!1,Pi(e,t,0),j.return()):A(j,Cd(e,t,n,u,o,U,!1,a),10);case 10:t.W&&t.ia&&Va(t.W,o.startTime,!0);case 6:if(Ft(e.m),e.A)return j.return();t.Na=o,c.next(),t.Qa=!1,t.Gf=!1,N=e.g.aa.wb(),z=N[t.type],JSON.stringify(z),t.cc||e.g.Af(o,t.stream),Pi(e,t,0),de(j,0);break;case 2:if(P=se(j),Ft(e.m,P),e.A)return j.return();if(t.Qa=!1,P.code==7001)t.Qa=!1,Ga(t),Pi(e,t,0),j.u(0);else if(t.type==l.ua&&e.h.ignoreTextStreamFailures)e.i.delete(l.ua),j.u(0);else if(P.code==3017)DE(e,t,P),j.u(0);else return t.fd=!0,P.category==1&&t.W&&Ha(t.W,o),P.severity=2,A(j,bd(e,t,P),0)}})}function PE(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function DE(e,t,n){if(!Array.from(e.i.values()).some(function(a){return a!=t&&a.Gf})){if(e.g.disableStream(t.stream,e.h.maxDisabledTime))return;var o=Math.round(100*e.B);if(20<o)e.B-=.2;else if(4<o)e.B-=.04;else{t.fd=!0,e.A=!0,e.g.onError(n);return}t.Gf=!0}Pi(e,t,4)}function NE(e,t,n,o){var a,l,u,c,p,m,v,S,E,T,k,M,I,U,N;return F(function(z){switch(z.g){case 1:if(a=xn,l=t.Na==null&&t.lc==null,u=[],c=Math.max(0,Math.max(n.appendWindowStart,e.N)-.1),p=Math.min(n.appendWindowEnd,e.L)+.01,m=es(n.codecs||t.stream.codecs),v=Gi(n.mimeType||t.stream.mimeType),S=n.timestampOffset,S==t.Vd&&c==t.Ud&&p==t.Td&&m==t.tf&&v==t.uf){z.u(2);break}if(E=t.tf&&t.uf&&rE(e.g.aa,t.type,v,m),!E){z.u(3);break}if(T=null,t.type===a.ga?T=e.i.get(a.X):t.type===a.X&&(T=e.i.get(a.ga)),!T){z.u(3);break}return A(z,Xa(T).catch(function(){}),5);case 5:T.lc=null,Gu(e,T);case 3:return A(z,jy(e,t,S,c,p,n,m,v),2);case 2:return Qh(n.$,t.lc)||(t.lc=n.$,n.l&&n.$&&(k=Ed(e,t,n.$),M=function(){var P,j,G,Z,ee,fe,te;return F(function(ne){switch(ne.g){case 1:return le(ne,2),A(ne,k,4);case 4:return P=ne.h,Ft(e.m),j=null,G=new Map,Z={projection:null,hfov:null},ee=new zt,ee.box("moov",xt).box("trak",xt).box("mdia",xt).S("mdhd",function(ae){j=Lu(ae.reader,ae.version).timescale}).box("hdlr",function(ae){switch(ae=ae.reader,ae.skip(8),ae.oc()){case"soun":G.set(a.X,j);break;case"vide":G.set(a.ga,j)}j=null}).box("minf",xt).box("stbl",xt).S("stsd",Qo).box("encv",li).box("avc1",li).box("avc3",li).box("hev1",li).box("hvc1",li).box("dvav",li).box("dva1",li).box("dvh1",li).box("dvhe",li).box("dvc1",li).box("dvi1",li).box("vexu",xt).box("proj",xt).S("prji",function(ae){ae=ae.reader.oc(),Z.projection=ae}).box("hfov",function(ae){ae=ae.reader.P()/1e3,Z.hfov=ae}).parse(P),BE(e,Z),G.has(t.type)?n.$.timescale=G.get(t.type):j!=null&&(n.$.timescale=j),fe=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,A(ne,e.g.kg(t.type,P),5);case 5:return A(ne,Ou(e.g.aa,t.type,P,null,t.stream,fe,t.Qc,o),6);case 6:de(ne,0);break;case 2:throw te=se(ne),t.lc=null,te}})},I=n.startTime,l&&(U=$a(e.g.aa,t.type),U!=null&&(I=U)),e.g.Ai(I,n.$),u.push(M()))),e.l.sequenceMode&&(N=t.Na?t.Na.i:null,n.i!=N&&u.push(eE(e.g.aa,t.type,n.startTime))),A(z,Promise.all(u),0)}})}function jy(e,t,n,o,a,l,u,c){var p,m,v,S;return F(function(E){if(E.g==1)return p=xn,m=new Map,e.j.audio&&m.set(p.X,e.j.audio),e.j.video&&m.set(p.ga,e.j.video),le(E,2),t.Ud=o,t.Td=a,u&&(t.tf=u),c&&(t.uf=c),t.Vd=n,v=e.l.sequenceMode||e.l.type=="HLS",A(E,JT(e.g.aa,t.type,n,o,a,v,l.mimeType||t.stream.mimeType,l.codecs||t.stream.codecs,m),4);if(E.g!=2)return de(E,0);throw S=se(E),t.Ud=null,t.Td=null,t.tf=null,t.uf=null,t.Vd=null,S})}function Cd(e,t,n,o,a,l,u,c){u=u===void 0?!1:u,c=c===void 0?!1:c;var p,m,v,S,E,T,k,M;return F(function(I){switch(I.g){case 1:return p=o.closedCaptions&&0<o.closedCaptions.size,v=o.emsgSchemeIdUris!=null&&0<o.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,S=e.h.parsePrftBox&&!e.F,E=o.mimeType=="video/mp4"||o.mimeType=="audio/mp4",T=null,a.$&&(T=a.$.timescale),k=E&&T&&o.type==="video"&&e.l.type=="DASH"&&e.h.shouldFixTimestampOffset,(v||S||k)&&(m=new zt),v&&m.S("emsg",function(U){var N=o.emsgSchemeIdUris;if(U.version===0)var z=U.reader.oc(),P=U.reader.oc(),j=U.reader.P(),G=U.reader.P(),Z=U.reader.P(),ee=U.reader.P(),fe=a.startTime+G/j;else j=U.reader.P(),fe=U.reader.Nc()/j+a.timestampOffset,G=fe-a.startTime,Z=U.reader.P(),ee=U.reader.P(),z=U.reader.oc(),P=U.reader.oc();U=U.reader.qb(U.reader.getLength()-U.reader.va()),(N&&N.includes(z)||e.h.dispatchAllEmsgBoxes)&&(z=="urn:mpeg:dash:event:2012"?e.g.Bi():(N=fe+Z/j,j=new Map().set("detail",{startTime:fe,endTime:N,schemeIdUri:z,value:P,timescale:j,presentationTimeDelta:G,eventDuration:Z,id:ee,messageData:U}),j=new Fe("emsg",j),j.cancelable=!0,e.g.onEvent(j),!j.defaultPrevented&&(z=="https://aomedia.org/emsg/ID3"||z=="https://developer.apple.com/streaming/emsg-id3")&&(z=Lr(U),z.length)&&e.g.onMetadata([{cueTime:fe,data:U,frames:z,dts:fe,pts:fe}],0,N)))}),S&&m.S("prft",function(U){if(!e.F&&a.$.timescale){var N=U.reader,z=U.version;N.P(),U=N.P();var P=N.P();U=1e3*U+P/Math.pow(2,32)*1e3,z===0?N=N.P():(z=N.P(),N=N.P(),N=z*Math.pow(2,32)+N),U=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+U).getTime(),N=new Map().set("detail",{wallClockTime:U,programStartDate:new Date(U-N/a.$.timescale*1e3)}),N=new Fe("prft",N),e.g.onEvent(N),e.F=!0}}),k&&m.box("moof",xt).box("traf",xt).S("tfdt",function(U){var N,z,P,j,G,Z;return F(function(ee){return N=_u(U.reader,U.version),z=N.baseMediaDecodeTime,z?(P=-z/T,j=Number(t.Vd)||0,j<P?(G=t.Ud,Z=t.Td,A(ee,jy(e,t,P,G,Z,a),0)):ee.u(0)):ee.return()})}),(v||S||k)&&m.parse(l,!1,u),A(I,OE(e,t,n),2);case 2:return Ft(e.m),M=t.Qc,t.Qc=!1,A(I,e.g.kg(t.type,l),3);case 3:return A(I,Ou(e.g.aa,t.type,l,a,o,p,M,c,u),4);case 4:Ft(e.m),Y(I)}})}function OE(e,t,n){var o,a,l,u;return F(function(c){if(c.g==1)return o=Math.max(e.h.bufferBehind,e.l.presentationTimeline.g),a=ad(e.g.aa,t.type),a==null?c.return():(l=n-a,u=l-o,u<=e.h.evictionGoal?c.return():A(c,e.g.aa.remove(t.type,a,a+u),2));Ft(e.m),Y(c)})}function Td(e){return e&&e.type==Tt&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Ed(e,t,n,o){var a,l,u,c,p;return F(function(m){switch(m.g){case 1:if(a=n.cd())return m.return(a);if(l=null,t.W){var v=t.W,S=v.h;n instanceof ui&&(S=v.j),S.has(n)?(v=S.get(n),o&&(v.Uf=o),l=v.fe):l=null}return l||(l=Xu(n,t.stream,o||null,e.h.retryParameters,e.g.Lb)),u=0,t.ia&&(u=t.ia.h),t.ib=l,A(m,l.promise,2);case 2:if(c=m.h,t.ib=null,p=c.data,!n.aesKey){m.u(3);break}return A(m,wd(p,n.aesKey,u),4);case 4:p=m.h;case 3:return m.return(p)}})}function Xu(e,t,n,o,a){var l=e instanceof Je?e:void 0,u=l?1:0;return e=vs(e.M(),e.Ha,e.sa,o,n),e.contentType=t.type,a.request(io,e,{type:u,stream:t,segment:l})}function Ad(e,t,n,o){var a,l;return F(function(u){if(u.g==1)return t.cc=!1,t.Be=!1,t.Hd=0,t.Vc=!0,t.Na=null,t.ia=null,t.W&&!e.o.has(t.stream)&&oo(t.W),o?(a=e.g.Md(),l=e.g.aa.getDuration(),A(u,e.g.aa.remove(t.type,a+o,l),3)):A(u,cy(e.g.aa,t.type),4);if(u.g!=3)return Ft(e.m),n?A(u,e.g.aa.flush(t.type),3):u.u(3);Ft(e.m),t.Vc=!1,t.endOfStream=!1,t.Qa||t.sb||Pi(e,t,0),Y(u)})}function Pi(e,t,n){var o=t.type;(o!=Tt||e.i.has(o))&&(t.sb=new Ta(function(){var a;return F(function(l){if(l.g==1)return le(l,2),A(l,ME(e,t),4);if(l.g!=2)return de(l,0);a=se(l),e.g&&e.g.onError(a),Y(l)})}).Y(n))}function Ga(e){e.sb!=null&&(e.sb.stop(),e.sb=null)}function Xa(e){return F(function(t){return e.ib?A(t,e.ib.abort(),0):t.u(0)})}function bd(e,t,n){var o;return F(function(a){if(a.g==1)return A(a,dm(e.I),2);Ft(e.m),n.category===1&&(o=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,o),n.handled&&(n.severity=1)),(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),Y(a)})}function UE(e){var t,n,o,a,l,u;return F(function(c){return c.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?c.return(!1):(e.K=t,o=xn,(a=e.i.get(o.X))&&(a.lc=null,Gu(e,a),Xa(a).catch(function(){})),(l=e.i.get(o.ga))&&(l.lc=null,Gu(e,l),Xa(l).catch(function(){})),u=new Map,e.j.audio&&u.set(o.X,e.j.audio),e.j.video&&u.set(o.ga,e.j.video),A(c,dy(e.g.aa,u),2))):c.return(!0)})}function BE(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Fe("spatialvideoinfo",n)}else n=new Fe("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function Wu(){}function kd(e,t,n,o,a){var l=a in o,u=l?n.constructor==Object&&Object.keys(o).length==0:n.constructor==Object&&Object.keys(n).length==0,c=l||u,p=!0,m;for(m in t){var v=a+"."+m,S=l?o[a]:n[m];c||m in n?t[m]===void 0?S===void 0||c?delete e[m]:e[m]=mo(S):u?e[m]=t[m]:S.constructor==Object&&t[m]&&t[m].constructor==Object?(e[m]||(e[m]=mo(S)),v=kd(e[m],t[m],S,o,v),p=p&&v):typeof t[m]!=typeof S||t[m]==null||typeof t[m]!="function"&&t[m].constructor!=S.constructor?(Pe("Invalid config, wrong type for "+v),p=!1):(typeof n[m]=="function"&&n[m].length!=t[m].length&&Ve("Unexpected number of arguments for "+v),e[m]=t[m]):(Pe("Invalid config, unrecognized key "+v),p=!1)}return p}function Yu(e,t){for(var n={},o=n,a=0,l=0;a=e.indexOf(".",a),!(0>a);)(a==0||e[a-1]!="\\")&&(l=e.substring(l,a).replace(/\\\./g,"."),o[l]={},o=o[l],l=a+1),a+=1;return o[e.substring(l).replace(/\\\./g,".")]=t,n}function ws(e,t){return e&&t}function Fy(e,t){function n(u){for(var c=w(Object.keys(u)),p=c.next();!p.done;p=c.next())p=p.value,l(u[p])&&Object.keys(u[p]).length===0||a(u[p])||typeof u[p]=="function"?delete u[p]:l(u[p])&&(n(u[p]),Object.keys(u[p]).length===0&&delete u[p])}function o(u,c){return Object.keys(u).reduce(function(p,m){var v=u[m];return c.hasOwnProperty(m)?l(v)&&l(c[m])?(v=o(v,c[m]),(0<Object.keys(v).length||!l(v))&&(p[m]=v)):a(v)&&a(c[m])||Number.isNaN(v)&&Number.isNaN(c[m])||v!==c[m]&&(p[m]=v):p[m]=v,p},{})}function a(u){return Array.isArray(u)&&u.length===0}function l(u){return u&&typeof u=="object"&&!Array.isArray(u)}return e=o(e,t),n(e),e}ce("shaka.util.ConfigUtils",Wu),Wu.getDifferenceFromConfigObjects=Fy,Wu.convertToConfigObject=Yu,Wu.mergeConfigObjects=kd;function Di(){}function $y(e){return e=Ao(e),new pn(e).Eb}function Wa(e,t,n){function o(c){Tn(l).setUint32(u,c.byteLength,!0),u+=4,l.set(Ze(c),u),u+=c.byteLength}if(!n||!n.byteLength)throw new J(2,6,6015);var a;typeof t=="string"?a=Ih(t,!0):a=t,e=Ao(e),e=Ih(e,!0);var l=new Uint8Array(12+e.byteLength+a.byteLength+n.byteLength),u=0;return o(e),o(a),o(n),l}function zy(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ao(e).split("skd://").pop(),Wa(e,n,t))}function Id(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}ce("shaka.util.FairPlayUtils",Di),Di.commonFairPlayResponse=function(e,t){if(e===2){try{var n=Wt(t.data)}catch{return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var o=JSON.parse(n);o.ckc&&(n=o.ckc,e=!0),o.CkcMessage&&(n=o.CkcMessage,e=!0),o.License&&(n=o.License,e=!0)}catch{}e&&(t.data=hn(Li(n)))}},Di.expressplayFairPlayRequest=function(e,t){Id(e,t)},Di.conaxFairPlayRequest=function(e,t){Id(e,t)},Di.ezdrmFairPlayRequest=function(e,t){Id(e,t)},Di.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Ze(t.body),e=Er(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=to("spc="+e))},Di.expressplayInitDataTransform=function(e,t,n){return zy(e,t,n)},Di.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Ao(e).split("skd://").pop().split("?").shift(),n=d.atob(n);var o=new ArrayBuffer(2*n.length);o=si(o);for(var a=0,l=n.length;a<l;a++)o[a]=n.charCodeAt(a);return Wa(e,o,t)},Di.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ao(e).split(";").pop(),Wa(e,n,t))},Di.verimatrixInitDataTransform=function(e,t,n){return zy(e,t,n)},Di.initDataTransform=Wa,Di.defaultGetContentId=$y,Di.isFairPlaySupported=function(){var e;return F(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},le(t,2),A(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(se(t),t.return(!1))})};function Md(){}function Ss(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:no(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(v,S,E){return hu()&&S=="skd"&&(S=E.serverCertificate,E=$y(v),v=Wa(v,E,S)),v},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:co(),minHdcpVersion:"",ignoreDuplicateInitData:!au()};(co()||go())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",o=!1;au()||ba()||Ut("Tizen 4")||Ut("Tizen 5")||Ut("Tizen 6")||lu()||po()&&Eh()===53||po()&&Eh()===68||!(!Ci()||Ci()&&cu()||Ci()&&Ut("Fuchsia"))||bh()&&Aa()||(n="smooth",o=!0),o={retryParameters:no(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:qu,manifestPreprocessorTXml:Ku,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:o,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(ba()||au()||lu()||go()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:qu,manifestPreprocessorTXml:Ku,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var a={retryParameters:no(),failureCallback:function(v){return ws([v])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:go()||uu(),dontChooseCodecs:!1,shouldFixTimestampOffset:po()||ho()};(po()||ho()||Ci()||fu())&&(a.stallSkip=0);var l={trackSelectionCallback:function(v){return F(function(S){return S.return(v)})},downloadSizeCallback:function(v){var S;return F(function(E){return E.g==1?navigator.storage&&navigator.storage.estimate?A(E,navigator.storage.estimate(),3):E.return(!0):(S=E.h,E.return(S.usage+v<.95*S.quota))})},progressCallback:function(v,S){return ws([v,S])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:qr()?.5:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(v){return ws([v],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(v,S){return ws([v,S])}};var u=!1,c=!1,p=!0;Dg()&&(c=u=!0,p=!1);var m={drm:t,manifest:o,streaming:a,mediaSource:n,offline:l,abrFactory:function(){return new qt},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:u,skipPlayDetection:c,supportsMultipleMediaElements:p}};return l.trackSelectionCallback=function(v){return F(function(S){return S.return(jE(v,m.preferredAudioLanguage,m.preferredVideoHdrLevel))})},m}function nr(e,t,n){var o={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return kd(e,t,n||Ss(),o,"")}function jE(e,t,n){var o=n;o=="AUTO"&&(o=d.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var a=e.filter(function(c){return!(c.type!="variant"||c.hdr&&c.hdr!=o)});n=[];var l=pu(t,a.map(function(c){return c.language}));l&&(n=a.filter(function(c){return Nt(c.language)==l})),n.length==0&&(n=a.filter(function(c){return c.primary})),n.length==0&&(a.map(function(c){return c.language}),n=a);var u=n.filter(function(c){return c.height&&480>=c.height});for(u.length&&(u.sort(function(c,p){return p.height-c.height}),n=u.filter(function(c){return c.height==u[0].height})),t=[],n.length&&(a=Math.floor(n.length/2),n.sort(function(c,p){return c.bandwidth-p.bandwidth}),t.push(n[a])),e=w(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=Tt&&n.type!="image"||t.push(n);return t}function qu(e){return ws([e],e)}function Ku(e){return ws([e],e)}ce("shaka.util.PlayerConfiguration",Md),Md.mergeConfigObjects=nr,Md.createDefault=Ss;function No(e,t,n,o){Lt.call(this),this.L=e,this.U=t,this.xa=o.networkingEngine,this.A=n,this.o=null,this.qa=0,this.Fa=o.yc,this.C=o.vi,this.ab=o.wi,this.g=o.config,this.j=this.F=this.h=null,this.ea=!1,this.G=o.Fi,this.oa=!1,this.l=null,this.da=!1,this.i=this.B=null,this.ba=!1,this.K=new Map,this.pa=!1,this.za=o.Ei,this.Z=new ju,this.m=new Bt,this.N=null,this.s=!1,this.Da=o.yh,this.fa=null,this.Ea=o.xh,this.R=!1,this.I=[],this.H=[]}K(No,Lt);function Ya(e,t,n){(e=t?e.H:e.I)?e.push(n):n()}function FE(e){if(e.H)for(var t=w(e.H),n=t.next();!n.done;n=t.next())n=n.value,n();e.H=null}function Vy(e,t){if(e.N=t,e.R=!0,e.I){t=w(e.I);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.I=null}s=No.prototype,s.getStartTime=function(){return this.A},s.Dc=function(){return this.L},s.gf=function(){return this.h};function $E(e){return e.ba=!0,e.i}function zE(e){return e.ea=!0,e.j}function VE(e){return e.oa=!0,e.G}s.getStats=function(){return this.Z};function HE(e){return e.da=!0,e.l}function GE(e){return e.pa=!0,e.K}s.start=function(){var e=this;(function(){var t;return F(function(n){switch(n.g){case 1:return A(n,Promise.resolve(),2);case 2:return le(n,3),A(n,XE(e),5);case 5:return qa(e),A(n,WE(e),6);case 6:if(qa(e),e.o||(e.o=new os(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups)),e.Ea){var o=e.g.abrFactory;e.B=o,e.i=o(),e.i.configure(e.g.abr)}if(e.Da){o=e.h.presentationTimeline.V();var a=yu(e.h.variants);a=e.o.create(a),e.i.configure(e.g.abr),e.i.setVariants(Array.from(a.values())),(a=e.i.chooseVariant())&&(e.fa=a,a.video&&Hy(e,a.video,o),a.audio&&Hy(e,a.audio,o))}return A(n,void 0,7);case 7:qa(e),e.m.resolve(),de(n,0);break;case 3:t=se(n),e.m.reject(t),Y(n)}})})()},s.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Lt.prototype.dispatchEvent.call(this,e)},s.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Fe("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function qa(e){if(e.s)throw new J(2,7,7003)}function Rd(e,t){e.dispatchEvent(new Fe("onstatechange",new Map().set("state",t)))}function XE(e){var t,n,o,a;return F(function(l){if(l.g==1)return Rd(e,"manifest-parser"),e.j||(e.F=Ym(e.L,e.U),e.j=e.F(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,Rd(e,"manifest"),e.h?l.u(2):A(l,e.j.start(e.L,e.ab),3);if(l.g!=2&&(e.h=l.h),n=new Fe("manifestparsed",void 0),e.dispatchEvent(n),e.h.variants.length==0)throw new J(2,4,4036);YE(e.h),o=Date.now()/1e3,a=o-t,e.Z.H=a,Y(l)})}function WE(e){var t,n,o,a,l;return F(function(u){switch(u.g){case 1:Rd(e,"drm-engine"),e.qa=Date.now()/1e3,e.l=e.Fa(),e.C.g=e.l,e.l.configure(e.g.drm);var c=e.C;if(t=qg(e.h.variants,c.h.restrictions,c.i),!t){u.u(2);break}return n=new Fe("trackschanged",void 0),A(u,Promise.resolve(),3);case 3:qa(e),e.dispatchEvent(n);case 2:return o=yu(e.h.variants),A(u,Lm(e.l,o,e.h.offlineSessionIds),4);case 4:return qa(e),A(u,Hm(e.C,e.h),5);case 5:if(a=u.h,!a){u.u(0);break}return l=new Fe("trackschanged",void 0),A(u,Promise.resolve(),7);case 7:e.dispatchEvent(l),Y(u)}})}s.configure=function(e,t){e=Yu(e,t),nr(this.g,e)},s.getConfiguration=function(){return mo(this.g)};function Hy(e,t,n){var o,a,l,u,c;F(function(p){if(p.g==1)return o=e.g.streaming.segmentPrefetchLimit||2,a=new Fu(o,t,function(m,v,S){return Xu(m,v,S||null,e.g.streaming.retryParameters,e.xa)},!1),e.K.set(t.id,a),A(p,t.createSegmentIndex(),2);l=e.A||0,(c=(u=t.segmentIndex.Ib(l))?u.current():null)||(c=t.segmentIndex.get(0)),c&&(n?c.$&&Ry(a,c.$):Va(a,c.startTime)),Y(p)})}s.fj=function(){return this.m},s.destroy=function(){var e=this,t,n,o;return F(function(a){switch(a.g){case 1:if(e.s=!0,!e.j||e.ea){a.u(2);break}return A(a,e.j.stop(),2);case 2:if(!e.i||e.ba){a.u(4);break}return A(a,e.i.stop(),4);case 4:if(e.G&&!e.oa&&e.G.release(),!e.l||e.da){a.u(6);break}return A(a,e.l.destroy(),6);case 6:if(0<e.K.size&&!e.pa)for(t=w(e.K.values()),n=t.next();!n.done;n=t.next())o=n.value,oo(o);Y(a)}})};function YE(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}ce("shaka.media.PreloadManager",No),No.prototype.destroy=No.prototype.destroy,No.prototype.waitForFinish=No.prototype.fj;function Zu(e,t){Lt.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{wc:null,vc:Cs,jc:function(o,a){return Pr(n,"enter",o,a)}},{wc:Ka,vc:Cs,jc:function(o,a){return Pr(n,"enter",o,a)}},{wc:Za,vc:Cs,jc:function(o,a){return Pr(n,"enter",o,a)}},{wc:Cs,vc:Ka,jc:function(o,a){return Pr(n,"exit",o,a)}},{wc:Cs,vc:Za,jc:function(o,a){return Pr(n,"exit",o,a)}},{wc:Ka,vc:Za,jc:function(o,a){return Pr(n,"skip",o,a)}},{wc:Za,vc:Ka,jc:function(o,a){return Pr(n,"skip",o,a)}}],this.h=new ct,this.h.D(this.i,"regionremove",function(o){n.g.delete(o.region)})}K(Zu,Lt),Zu.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Lt.prototype.release.call(this)},Zu.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=w(this.i.g),o=n.next();!o.done;o=n.next()){o=o.value;var a=this.g.get(o),l=e<o.startTime?Ka:e>o.endTime?Za:Cs;this.g.set(o,l);for(var u=w(this.m),c=u.next();!c.done;c=u.next())c=c.value,c.wc==a&&c.vc==l&&c.jc(o,t)}}};function Pr(e,t,n,o){t=new Fe(t,new Map([["region",n],["seeking",o]])),e.dispatchEvent(t)}var Ka=1,Cs=2,Za=3;function _d(e,t,n){var o,a,l,u,c,p,m;return F(function(v){switch(v.g){case 1:var S=new pn(e).Pa.split("/").pop().split(".");return o=S.length==1?"":S.pop().toLowerCase(),(a=qE[o])?v.return(a):(l=0,u=kn([e],n),le(v,2),u.method="HEAD",A(v,t.request(l,u).promise,4));case 4:c=v.h,a=c.headers["content-type"],de(v,3);break;case 2:if(p=se(v),!p||p.code!=1002&&p.code!=1001){v.u(3);break}return u.method="GET",A(v,t.request(l,u).promise,6);case 6:m=v.h,a=m.headers["content-type"];case 3:return v.return(a?a.toLowerCase().split(";").shift():"")}})}var qE={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Gy(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(u){return Gy(u,e)}).join("");var n=[],o=700<=e.fontWeight,a=e.fontStyle=="italic",l=e.textDecoration.includes("underline");return o&&n.push(["b"]),a&&n.push(["i"]),l&&n.push(["u"]),a=e.color,a==""&&t&&(a=t.color),o="",(a=Xy(a))&&(o+="."+a),a=e.backgroundColor,a==""&&t&&(a=t.backgroundColor),(t=Xy(a))&&(o+=".bg_"+t),o&&n.push(["c",o]),n.reduceRight(function(u,c){var p=w(c);return c=p.next().value,p=p.next().value,"<"+c+(p===void 0?"":p)+">"+u+"</"+c+">"},e.payload)}function Xy(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Ld(e,t){var n=[];e=w(Wy(e));for(var o=e.next();!o.done;o=e.next())if(o=o.value,o.isContainer)n.push.apply(n,L(Ld(o.nestedCues,o)));else{var a=o.clone();a.nestedCues=[],a.payload=Gy(o,t),n.push(a)}return n}function Wy(e){var t=[];e=w(e);for(var n=e.next(),o={};!n.done;o={Me:void 0},n=e.next())o.Me=n.value,t.some(function(a){return function(l){return So(a.Me,l)}}(o))||t.push(o.Me);return t}function KE(e){function t(o){for(var a=5381,l=o.length;l;)a=33*a^o.charCodeAt(--l);return(a>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function hi(e,t){this.g=null;for(var n=w(Array.from(e.textTracks)),o=n.next();!o.done;o=n.next())o=o.value,o.kind!=="metadata"&&o.kind!=="chapters"&&(o.mode="disabled",o.label==t&&(this.g=o));this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}s=hi.prototype,s.configure=function(){},s.remove=function(e,t){return this.g?(Yy(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},s.append=function(e){var t=Ld(e),n=[];e=this.g.cues?Array.from(this.g.cues):[],t=w(t);for(var o=t.next(),a={};!o.done;a={hd:void 0},o=t.next())a.hd=o.value,e.some(function(l){return function(u){return u.startTime==l.hd.startTime&&u.endTime==l.hd.endTime&&u.text==l.hd.payload}}(a))||(o=KE(a.hd))&&n.push(o);for(e=n.slice().sort(function(l,u){return l.startTime!=u.startTime?l.startTime-u.startTime:l.endTime!=u.endTime?l.endTime-u.startTime:"line"in VTTCue.prototype?n.indexOf(u)-n.indexOf(l):n.indexOf(l)-n.indexOf(u)}),e=w(e),t=e.next();!t.done;t=e.next())this.g.addCue(t.value)},s.destroy=function(){return this.g&&(Yy(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},s.isTextVisible=function(){return this.g.mode=="showing"},s.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function Yy(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var o=w(Array.from(e.cues)),a=o.next();!a.done;a=o.next())(a=a.value)&&t(a)&&e.removeCue(a);e.mode=n}ce("shaka.text.SimpleTextDisplayer",hi),hi.prototype.setTextVisibility=hi.prototype.setTextVisibility,hi.prototype.isTextVisible=hi.prototype.isTextVisible,hi.prototype.destroy=hi.prototype.destroy,hi.prototype.append=hi.prototype.append,hi.prototype.remove=hi.prototype.remove,hi.prototype.configure=hi.prototype.configure;function di(){}s=di.prototype,s.configure=function(){},s.remove=function(){},s.append=function(){},s.destroy=function(){},s.isTextVisible=function(){return!1},s.setTextVisibility=function(){},ce("shaka.text.StubTextDisplayer",di),di.prototype.setTextVisibility=di.prototype.setTextVisibility,di.prototype.isTextVisible=di.prototype.isTextVisible,di.prototype.destroy=di.prototype.destroy,di.prototype.append=di.prototype.append,di.prototype.remove=di.prototype.remove,di.prototype.configure=di.prototype.configure;function qy(){}function Ts(e){for(;e.firstChild;)e.removeChild(e.firstChild)}ce("shaka.util.Dom",qy),qy.removeAllChildren=Ts;function pi(e,t,n){var o=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||Ct("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new mt(function(){o.A.paused||Es(o)}).Sa(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new ct,this.j.D(document,"fullscreenchange",function(){Es(o,!0)}),this.j.D(this.A,"seeking",function(){Es(o,!0)}),this.j.D(this.A,"resize",function(){var a=o.A,l=a.videoWidth;a=a.videoHeight,l&&a?o.l=l/a:o.l=null}),this.o=null,"ResizeObserver"in d&&(this.o=new ResizeObserver(function(){Es(o,!0)}),this.o.observe(this.g)),this.B=new Map}s=pi.prototype,s.configure=function(e){this.C&&this.C.Sa(e.captionsUpdatePeriod)},s.append=function(e){var t=[].concat(L(this.h));e=w(Wy(e));for(var n=e.next(),o={};!n.done;o={Ne:void 0},n=e.next())o.Ne=n.value,t.some(function(a){return function(l){return So(l,a.Ne)}}(o))||this.h.push(o.Ne);Es(this)},s.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},s.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(o){return o.startTime<e||o.endTime>=t}),Es(this,n>this.h.length),!0},s.isTextVisible=function(){return this.m},s.setTextVisibility=function(e){this.m=e};function ZE(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function Ky(e,t,n,o,a){var l=!1,u=[],c=[];t=w(t);for(var p=t.next();!p.done;p=t.next()){p=p.value,a.push(p);var m=e.i.get(p),v=p.startTime<=o&&p.endTime>o,S=m?m.qh:null;m&&(u.push(m.Oe),m.qc&&u.push(m.qc),v||(l=!0,e.i.delete(p),m=null)),v&&(c.push(p),m?ZE(e,S)||(l=!0):(QE(e,p,a),m=e.i.get(p),S=m.qh,l=!0)),0<p.nestedCues.length&&S&&Ky(e,p.nestedCues,S,o,a),a.pop()}if(l){for(o=w(u),a=o.next();!a.done;a=o.next())a=a.value,a.parentElement&&a.parentElement.removeChild(a);for(c.sort(function(E,T){return E.startTime!=T.startTime?E.startTime-T.startTime:E.endTime-T.endTime}),c=w(c),o=c.next();!o.done;o=c.next())o=e.i.get(o.value),o.qc?(o.qc.contains(n)&&o.qc.removeChild(n),n.appendChild(o.qc),o.qc.appendChild(o.Oe)):n.appendChild(o.Oe)}}function Es(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=w(e.B.values());for(var o=t.next();!o.done;o=t.next())Ts(o.value);Ts(e.g),e.i.clear(),e.B.clear()}e.m&&Ky(e,e.h,e.g,n,[])}}function QE(e,t,n){var o=1<n.length,a=o?"span":"div";t.lineBreak&&(a="br"),t.rubyTag&&(a=t.rubyTag),o=!o&&0<t.nestedCues.length;var l=document.createElement(a);if(a!="br"&&eA(e,l,t,n,o),n=null,t.region&&t.region.id){var u=t.region,c=e.l===4/3?2.5:1.9;if(n=u.id+"_"+u.width+"x"+u.height+(u.heightUnits==nn?"%":"px")+"-"+u.viewportAnchorX+"x"+u.viewportAnchorY+(u.viewportAnchorUnits==nn?"%":"px"),e.B.has(n))n=e.B.get(n);else{a=document.createElement("span");var p=u.heightUnits==nn?"%":"px",m=u.widthUnits==nn?"%":"px",v=u.viewportAnchorUnits==nn?"%":"px";a.id="shaka-text-region---"+n,a.classList.add("shaka-text-region"),a.style.position="absolute";var S=u.height,E=u.width;u.heightUnits===2&&(S=5.33*u.height,p="%"),u.widthUnits===2&&(E=u.width*c,m="%"),a.style.height=S+p,a.style.width=E+m,u.viewportAnchorUnits===2?(c=u.viewportAnchorY/75*100,p=u.viewportAnchorX/(e.l===4/3?160:210)*100,c-=u.regionAnchorY*S/100,p-=u.regionAnchorX*E/100,a.style.top=c+"%",a.style.left=p+"%"):(a.style.top=u.viewportAnchorY-u.regionAnchorY*S/100+v,a.style.left=u.viewportAnchorX-u.regionAnchorX*E/100+v),u.heightUnits!==0&&u.widthUnits!==0&&u.viewportAnchorUnits!==0&&(u=Math.max(0,Math.min(100-(parseInt(a.style.width.slice(0,-1),10)||0),parseInt(a.style.left.slice(0,-1),10)||0)),a.style.top=Math.max(0,Math.min(100-(parseInt(a.style.height.slice(0,-1),10)||0),parseInt(a.style.top.slice(0,-1),10)||0))+"%",a.style.left=u+"%"),a.style.display="flex",a.style.flexDirection="column",a.style.alignItems="center",a.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(n,a),n=a}}a=l,o&&(a=document.createElement("span"),a.classList.add("shaka-text-wrapper"),a.style.backgroundColor=t.backgroundColor,a.style.lineHeight="normal",l.appendChild(a)),e.i.set(t,{Oe:l,qh:a,qc:n})}function JE(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==gt?n:e==="left"||e==="start"&&t===va||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===va?"line-right":"center"}function eA(e,t,n,o,a){var l=t.style,u=n.nestedCues.length==0,c=1<o.length;l.whiteSpace="pre-wrap";var p=n.payload.replace(/\s+$/g,function(v){return" ".repeat(v.length)});if(l.webkitTextStrokeColor=n.textStrokeColor,l.webkitTextStrokeWidth=n.textStrokeWidth,l.color=n.color,l.direction=n.direction,l.opacity=n.opacity,l.paddingLeft=Pd(n.linePadding,n,e.s),l.paddingRight=Pd(n.linePadding,n,e.s),l.textCombineUpright=n.textCombineUpright,l.textShadow=n.textShadow,n.backgroundImage)l.backgroundImage="url('"+n.backgroundImage+"')",l.backgroundRepeat="no-repeat",l.backgroundSize="contain",l.backgroundPosition="center",n.backgroundColor&&(l.backgroundColor=n.backgroundColor),l.width="100%",l.height="100%";else{if(n.nestedCues.length)var m=t;else m=document.createElement("span"),t.appendChild(m);n.border&&(m.style.border=n.border),!a&&((t=Zy(o,function(v){return v.backgroundColor}))?m.style.backgroundColor=t:p&&(m.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=Zy(o,function(v){return v.fontFamily}))&&(m.style.fontFamily=t),p&&(m.textContent=p)}c&&!o[o.length-1].isContainer?l.display="inline":(l.display="flex",l.flexDirection="column",l.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(l.width="100%",l.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(l.width="100%",l.alignItems="end"),l.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),u||(l.margin="0"),l.fontFamily=n.fontFamily,l.fontWeight=n.fontWeight.toString(),l.fontStyle=n.fontStyle,l.letterSpacing=n.letterSpacing,l.fontSize=Pd(n.fontSize,n,e.s),o=n.line,o!=null&&(u=n.lineInterpretation,u==tu&&(u=1,c=16,e.l&&1>e.l&&(c=32),o=0>o?100+o/c*100:o/c*100),u==1&&(l.position="absolute",n.writingMode==Sr?(l.width="100%",n.lineAlign==Cr?l.top=o+"%":n.lineAlign=="end"&&(l.bottom=100-o+"%")):n.writingMode=="vertical-lr"?(l.height="100%",n.lineAlign==Cr?l.left=o+"%":n.lineAlign=="end"&&(l.right=100-o+"%")):(l.height="100%",n.lineAlign==Cr?l.right=o+"%":n.lineAlign=="end"&&(l.left=100-o+"%")))),l.lineHeight=n.lineHeight,e=JE(n),e=="line-left"?(l.cssFloat="left",n.position!==null&&(l.position="absolute",n.writingMode==Sr?(l.left=n.position+"%",l.width="auto"):l.top=n.position+"%")):e=="line-right"?(l.cssFloat="right",n.position!==null&&(l.position="absolute",n.writingMode==Sr?(l.right=100-n.position+"%",l.width="auto"):l.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(l.position="absolute",n.writingMode==Sr?(l.left=n.position+"%",l.width="auto"):l.top=n.position+"%"),l.textAlign=n.textAlign,l.textDecoration=n.textDecoration.join(" "),l.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&l.writingMode==n.writingMode||(l.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Sr?l.width=n.size+"%":l.height=n.size+"%")}function Pd(e,t,n){var o=(o=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(o[1]),unit:o[2]}:null;if(!o)return e;var a=o.value;switch(o.unit){case"%":return a/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*a/t.cellResolution.rows+"px";default:return e}}function Zy(e,t){for(var n=e.length-1;0<=n;n--){var o=t(e[n]);if(o||o===0)return o}return null}ce("shaka.text.UITextDisplayer",pi),pi.prototype.setTextVisibility=pi.prototype.setTextVisibility,pi.prototype.isTextVisible=pi.prototype.isTextVisible,pi.prototype.remove=pi.prototype.remove,pi.prototype.destroy=pi.prototype.destroy,pi.prototype.append=pi.prototype.append,pi.prototype.configure=pi.prototype.configure;function tA(e,t){function n(l){for(var u=l,c=w(t),p=c.next();!p.done;p=c.next())p=p.value,p.end&&p.start<l&&(u+=p.end-p.start);return l=Math.floor(u/3600),c=Math.floor(u/60%60),p=Math.floor(u%60),u=Math.floor(1e3*u%1e3),(10>l?"0":"")+l+":"+(10>c?"0":"")+c+":"+(10>p?"0":"")+p+"."+(100>u?10>u?"00":"0":"")+u}var o=Ld(e);e=`WEBVTT

`,o=w(o);for(var a=o.next();!a.done;a=o.next())a=a.value,e+=n(a.startTime)+" --> "+n(a.endTime)+function(l){var u=[];switch(l.textAlign){case"left":u.push("align:left");break;case"right":u.push("align:right");break;case Co:u.push("align:middle");break;case"start":u.push("align:start");break;case"end":u.push("align:end")}switch(l.writingMode){case"vertical-lr":u.push("vertical:lr");break;case"vertical-rl":u.push("vertical:rl")}return u.length?" "+u.join(" "):""}(a)+`
`,e+=a.payload+`

`;return e}ce("shaka.text.WebVttGenerator",function(){});function Qy(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}Qy.prototype.configure=function(e){this.g=e};function nA(e){e.i=!1,e.l=!0,e.j=!1}function iA(e,t,n){try{if(!e.g.enabled)return t;var o=Dd(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var a=Ju;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":a=tf;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":a=e1;break e}a=void 0}o.ot=a,o.su=!0;var l=Qu(o);return Nd(t,l)}catch(u){return dt("CMCD_SRC_ERROR","Could not generate src CMCD data.",u),t}}function Dd(e){return e.g.sessionId||(e.g.sessionId=d.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function As(e,t,n){n=n===void 0?{}:n;var o=o===void 0?e.g.useHeaders:o;if(e.g.enabled){Object.assign(n,Dd(e)),n.pr=e.h.eb();var a=n.ot===ef||n.ot===tf;if(e.j&&a&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=oA(e,n),o)o=lA(e),Object.keys(o).length&&Object.assign(t.headers,o);else{var l=Qu(e);l&&(t.uris=t.uris.map(function(u){return Nd(u,l)}))}}}function oA(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(o,a){return n.includes(a)&&(o[a]=t[a]),o},{}):t}function rA(e){if(e.type===0)return uA;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?tf:ef;if(t=="audio")return Ju;if(t=="text")return e.mimeType==="application/mp4"?nf:Od}}function sA(e,t){if(t=e.h.wb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(o){return o.start<=n&&o.end>=n}))?1e3*(e.end-n):NaN}function Jy(e,t){if(t=e.h.wb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(o){return o.start<=n&&o.end>=n}))?1e3*(e.end-n):0}function aA(e,t){var n=e.h.ic();if(!n.length)return NaN;e=n[0],n=w(n);for(var o=n.next();!o.done;o=n.next())o=o.value,o.type==="variant"&&o.bandwidth>e.bandwidth&&(e=o);switch(t){case ef:return e.videoBandwidth||NaN;case Ju:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Qu(e){function t(S){return 100*n(S/100)}function n(S){return Math.round(S)}function o(S){return!Number.isNaN(S)&&S!=null&&S!==""&&S!==!1}var a=[],l={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(S){return encodeURIComponent(S)},rtp:t,tb:n},u=Object.keys(e||{}).sort();u=w(u);for(var c=u.next();!c.done;c=u.next()){c=c.value;var p=e[c];if(o(p)&&(c!=="v"||p!==1)&&(c!="pr"||p!==1)){var m=l[c];m&&(p=m(p)),m=typeof p;var v=void 0;v=m==="string"&&c!=="ot"&&c!=="sf"&&c!=="st"?c+"="+JSON.stringify(p):m==="boolean"?c:m==="symbol"?c+"="+p.description:c+"="+p,a.push(v)}}return a.join(",")}function lA(e){var t=Object.keys(e),n={},o=["Object","Request","Session","Status"],a=[{},{},{},{}],l={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=w(t);for(var u=t.next();!u.done;u=t.next())u=u.value,a[l[u]!=null?l[u]:1][u]=e[u];for(e=0;e<a.length;e++)(l=Qu(a[e]))&&(n["CMCD-"+o[e]]=l);return n}function Nd(e,t){return!t||e.includes("offline:")?e:(e=new pn(e),e.g.set("CMCD",t),e.toString())}var e1="m",Ju="a",ef="v",tf="av",uA="i",Od="c",nf="tt";ce("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Kj:"s",OTHER:"o"});function Ni(e){this.h=e,this.g=null}s=Ni.prototype,s.configure=function(e){this.h=e},s.zg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(i1)?1e3*this.g.get(i1):null},s.xg=function(){return this.h.enabled&&this.g&&this.g.has(n1)?1e3*this.g.get(n1):null},s.Yh=function(){return this.h.enabled&&this.g&&this.g.has(o1)?this.g.get(o1):null},s.Zh=function(){return this.h.enabled&&this.g&&this.g.has(r1)?this.g.get(r1):null},s.getBandwidthEstimate=function(e){var t=this.xg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function t1(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}ce("shaka.util.CmsdManager",Ni),Ni.prototype.getBandwidthEstimate=Ni.prototype.getBandwidthEstimate,Ni.prototype.getRoundTripTime=Ni.prototype.Zh,Ni.prototype.getResponseDelay=Ni.prototype.Yh,Ni.prototype.getEstimatedThroughput=Ni.prototype.xg,Ni.prototype.getMaxBitrate=Ni.prototype.zg;var n1="etp",i1="mb",o1="rd",r1="rtt";function s1(){this.g=null,this.h=[]}function Ud(e,t){return F(function(n){if(n.g==1)return e.g?A(n,new Promise(function(o){return e.h.push(o)}),2):n.u(2);e.g=t,Y(n)})}s1.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function ve(e,t){Lt.call(this);var n=this;this.l=Wd,this.de=this.h=null,this.oa=!1,this.qe=new ct,this.gd=new ct,this.m=new ct,this.Fa=new ct,this.ub=new ct,this.C=this.G=this.B=this.H=null,this.te=0,this.Z=new s1,this.pa=this.ag=this.da=this.i=this.ab=this.F=this.j=this.Zc=this.K=this.eg=this.ea=this.N=this.dd=this.L=this.he=this.I=this.Fb=null,this.Ea=!1,this.xa=this.o=null,this.cg=1e9,this.qd=[],this.U=NaN,this.g=Oo(this),this.R=null,this.ze=-1,this.Da=null,this.fa={width:1/0,height:1/0},this.be=new Kh(this.g,this.fa,null),this.ke=[],this.s=null,this.za=new os(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Db=this.g.preferredTextLanguage,this.pd=this.g.preferredTextRole,this.od=this.g.preferForcedSubs,this.md=[],t&&t(this),this.N=CA(this),this.ea=new Ni(this.g.cmsd),this.H=d1(this),this.H.Pf(this.g.streaming.forceHTTP),this.H.Qf(this.g.streaming.forceHTTPS),this.Gb=this.ba=this.A=null,this.Ce=!1,this.dg=new mt(function(){return F(function(o){if(o.g==1)return n.ba?A(o,n.Rb(n.Gb,!0),3):o.u(0);if(o.g!=4)return A(o,n.load(n.ba),4);n.Ce?n.Gb.pause():n.Gb.play(),n.ba=null,n.Ce=!1,Y(o)})}),uf&&(this.A=uf(),this.A.configure(this.g.ads),this.ub.D(this.A,"ad-content-pause-requested",function(o){var a;return F(function(l){if(l.g==1)return n.dg.stop(),n.ba?l.u(0):(n.Gb=n.h,n.Ce=n.h.ended,a=o.saveLivePosition||!1,A(l,n.qg(!0,a),3));n.ba=l.h,Y(l)})}),this.ub.D(this.A,"ad-content-resume-requested",function(o){if(o=o.offset||0,n.ba){var a=n.ba;a.A&&o&&(a.A+=o)}n.dg.Y(.1)}),this.ub.D(this.A,"ad-content-attach-requested",function(){return F(function(o){return n.h||!n.Gb?o.u(0):A(o,n.Rb(n.Gb,!0),0)})})),this.qe.D(d,"online",function(){Hd(n),n.If()}),this.je=new mt(function(){for(var o=Date.now()/1e3,a=!1,l=!0,u=w(n.i.variants),c=u.next();!c.done;c=u.next())c=c.value,0<c.disabledUntilTime&&c.disabledUntilTime<=o&&(c.disabledUntilTime=0,a=!0),0<c.disabledUntilTime&&(l=!1);l&&n.je.stop(),a&&ks(n,!1,void 0,!1,!1)}),this.qa=null,e&&(Ct("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Rb(e,!0))}K(ve,Lt);function of(e){e.K!=null&&(sy(e.K),e.K.release(),e.K=null)}function fA(e,t){t.lcevc.enabled?(of(e),e.K==null&&(e.K=new Fa(e.h,e.eg,t.lcevc),e.G&&(e.G.Z=e.K))):of(e)}function Yt(e,t){return new Fe(e,t)}s=ve.prototype,s.destroy=function(){var e=this,t;return F(function(n){switch(n.g){case 1:return e.l==ro?n.return():(of(e),t=e.detach(),e.l=ro,A(n,t,2));case 2:return A(n,e.Qe(),3);case 3:if(e.qe&&(e.qe.release(),e.qe=null),e.gd&&(e.gd.release(),e.gd=null),e.m&&(e.m.release(),e.m=null),e.Fa&&(e.Fa.release(),e.Fa=null),e.ub&&(e.ub.release(),e.ub=null),e.xa=null,e.g=null,e.s=null,e.de=null,e.N=null,e.ea=null,!e.H){n.u(4);break}return A(n,e.H.destroy(),5);case 5:e.H=null;case 4:e.o&&(e.o.release(),e.o=null),Lt.prototype.release.call(e),Y(n)}})};function bs(e,t){e.dispatchEvent(Yt("onstatechange",new Map().set("state",t)))}s.Rb=function(e,t){t=t===void 0?!0:t;var n=this,o,a,l;return F(function(u){switch(u.g){case 1:if(n.l==ro)throw new J(2,7,7e3);if(o=n.h&&n.h==e,!n.h||n.h==e){u.u(2);break}return A(u,n.detach(),2);case 2:return A(u,Bd(n,"attach"),4);case 4:if(u.h)return u.return();if(le(u,5,6),o||(bs(n,"attach"),a=function(){var c=Gd(n,!1);c&&Is(n,c)},n.gd.D(e,"error",a),n.h=e),!t||!eo()||n.G){u.u(6);break}return A(u,jd(n),6);case 6:re(u),n.Z.release(),oe(u,0);break;case 5:return l=se(u),A(u,n.detach(),10);case 10:throw l}})},s.zh=function(e){this.eg=e},s.detach=function(e){e=e===void 0?!1:e;var t=this;return F(function(n){if(n.g==1){if(t.l==ro)throw new J(2,7,7e3);return A(n,t.bc(!1,e),2)}if(n.g!=3)return A(n,Bd(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.gd.Ra(),t.h=null),bs(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Z.release()}Y(n)})};function Bd(e,t){var n;return F(function(o){return o.g==1?(n=++e.te,A(o,Ud(e.Z,t),2)):n!=e.te?(e.Z.release(),o.return(!0)):o.return(!1)})}s.bc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,o,a,l,u,c,p,m,v,S,E;return F(function(T){switch(T.g){case 1:return n.l!=ro&&(n.l=Wd),A(T,Bd(n,"unload"),2);case 2:return T.h?T.return():(ge(T,3),n.Ea=!1,bs(n,"unload"),e&&!eo()&&(e=!1),of(n),o=n.md.map(function(k){return k()}),n.md=[],A(T,Promise.all(o),5));case 5:if(n.dispatchEvent(Yt("unloading")),n.dd&&(n.dd.release(),n.dd=null),n.h&&(n.m.Ra(),n.Fa.Ra()),n.je.stop(),n.Fb&&(n.Fb.release(),n.Fb=null),n.he&&(n.he.stop(),n.he=null),!n.F){T.u(6);break}return A(T,n.F.stop(),7);case 7:n.F=null,n.ab=null;case 6:if(!n.o){T.u(8);break}return A(T,n.o.stop(),8);case 8:if(!n.j){T.u(10);break}return A(T,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.I&&(n.I.release(),n.I=null),n.C&&(n.C.release(),n.C=null),!hu("webkit")||!n.B){T.u(12);break}return A(T,n.B.destroy(),13);case 13:n.B=null;case 12:if(!n.G){T.u(14);break}return A(T,n.G.destroy(),15);case 15:n.G=null;case 14:if(n.A&&!t&&n.A.onAssetUnload(),n.ba&&!t&&(n.ba.destroy(),n.ba=null),t||n.dg.stop(),n.N&&nA(n.N),n.ea&&(n.ea.g=null),n.h&&Ts(n.h),!n.h||!n.h.src){T.u(16);break}return A(T,new Promise(function(k){return new mt(k).Y(.1)}),17);case 17:n.h.removeAttribute("src"),n.h.load();case 16:if(!n.B){T.u(18);break}return A(T,n.B.destroy(),19);case 19:n.B=null;case 18:if(n.qa&&n.da!=n.qa.Dc()&&(n.qa.s||n.qa.destroy(),n.qa=null),n.da=null,n.ag=null,n.L=null,n.i){for(a=w(n.i.variants),l=a.next();!l.done;l=a.next())for(u=l.value,c=w([u.audio,u.video]),p=c.next();!p.done;p=c.next())(m=p.value)&&m.segmentIndex&&m.segmentIndex.release();for(v=w(n.i.textStreams),S=v.next();!S.done;S=v.next())E=S.value,E.segmentIndex&&E.segmentIndex.release()}n.g.streaming.clearDecodingCache&&(rm={},su.clear()),n.i=null,n.s=new ju,n.bg=null,n.Da=null,n.R=null,n.ze=-1,n.qd=[],n.U=NaN,Vd(n);case 3:re(T),n.Z.release(),oe(T,4);break;case 4:if(e&&eo()&&!n.G&&n.h)return A(T,jd(n),0);T.u(0)}})},s.ej=function(e){this.pa=e},s.load=function(e,t,n){t=t===void 0?null:t;var o=this,a,l,u,c,p,m,v,S,E,T,k,M,I;return F(function(U){switch(U.g){case 1:if(o.l==ro)throw new J(2,7,7e3);return a=null,l="",e instanceof No?(a=e,l=a.Dc()||""):l=e||"",A(U,Ud(o.Z,"load"),2);case 2:if(o.Z.release(),!o.h)throw new J(2,7,7002);if(!o.da){U.u(3);break}return o.da=l,A(U,o.bc(!1),3);case 3:if(u=++o.te,c=function(){return F(function(N){if(N.g==1)return o.te==u?N.u(0):a?A(N,a.destroy(),3):N.u(3);throw new J(2,7,7e3)})},p=function(N,z){return F(function(P){switch(P.g){case 1:return ge(P,2),A(P,Ud(o.Z,z),4);case 4:return A(P,c(),5);case 5:return A(P,N(),6);case 6:return A(P,c(),7);case 7:a&&o.g&&(a.g=o.g);case 2:re(P),o.Z.release(),oe(P,0)}})},le(U,5,6),t==null&&a&&(t=a.getStartTime()),o.pa=t,o.Ea=!1,o.dispatchEvent(Yt("loading")),a){n=a.U,U.u(8);break}if(n){U.u(8);break}return A(U,p(function(){return F(function(N){if(N.g==1)return A(N,f1(o,l),2);n=N.h,Y(N)})},"guessMimeType_"),8);case 8:if(m=!!a,a){Vy(a,o),o.s=a.getStats(),U.u(11);break}return A(U,l1(o,l,t,n,!0),12);case 12:(a=U.h)?(Vy(a,o),o.s=a.getStats(),a.start(),a.m.catch(function(){})):o.s=new ju;case 11:if(v=!a,S=Date.now()/1e3,o.s=a?a.getStats():new ju,o.da=l,o.ag=n||null,v)return A(U,p(function(){return F(function(N){return A(N,pA(o,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(o.G){U.u(15);break}return A(U,p(function(){return F(function(N){return A(N,jd(o),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return A(U,p(function(){return F(function(N){return A(N,a.m,0)})},"waitForFinish"),17);case 17:return o.g=a.getConfiguration(),o.be=a.C,o.ab=a.F,o.F=zE(a),o.F&&o.F.setMediaElement&&o.h&&o.F.setMediaElement(o.h),o.dd=VE(a),o.Zc=a.za,o.i=a.gf(),(E=a.o)&&(o.za=E),m&&o.h&&o.h.nodeName==="AUDIO"&&(cA(o),o.configure("manifest.disableVideo",!0)),o.B=HE(a),A(U,p(function(){return F(function(N){return A(N,o.B.Rb(o.h),0)})},"drmEngine_.attach"),18);case 18:return!(T=a.B)||o.xa&&o.xa==T||(o.o=$E(a),o.xa=a.B,typeof o.o.setMediaElement!="function"&&(Ct("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),o.o.setMediaElement=function(){}),typeof o.o.setCmsdManager!="function"&&(Ct("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),o.o.setCmsdManager=function(){}),typeof o.o.trySuggestStreams!="function"&&(Ct("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),o.o.trySuggestStreams=function(){})),k=GE(a),M=a.fa,A(U,p(function(){return F(function(N){return A(N,dA(o,S,M,k),0)})},"loadInner_"),19);case 19:FE(a),U.u(14);break;case 20:return A(U,p(function(){return F(function(N){return A(N,gA(o,S,n),0)})},"srcEqualsInner_"),14);case 14:o.dispatchEvent(Yt("loaded"));case 6:if(re(U),!a){U.u(22);break}return A(U,a.destroy(),22);case 22:o.qa=null,oe(U,0);break;case 5:if(I=se(U),!I||I.code==7e3){U.u(24);break}return A(U,o.bc(!1),24);case 24:throw I}})};function cA(e){for(var t=w(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(o){return o.audio})}s.aj=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,o;return F(function(a){return a.g==1?A(a,a1(n),2):a.g!=3?(o=a.h,A(a,n.bc(e,t),3)):a.return(o)})},s.qg=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,o;return F(function(a){return a.g==1?A(a,a1(n,t),2):a.g!=3?(o=a.h,A(a,n.detach(e),3)):a.return(o)})};function a1(e,t){t=t===void 0?!1:t;var n,o;return F(function(a){if(a.g==1)return n=null,e.i&&e.F&&e.ab&&e.da?(o=e.h.currentTime,e.V()&&!t&&(o=null),A(a,u1(e,e.da,o,e.ag,!0,!1,!1),3)):a.u(2);if(a.g!=2){n=a.h,e.ke.push(n),e.F&&e.F.setMediaElement&&e.F.setMediaElement(null);var l=n,u=e.F,c=e.ab;l.h=e.i,l.j=u,l.F=c,l=n,u=e.xa,l.i=e.o,l.B=u,n.o=e.za,n.start(),e.i=null,e.F=null,e.ab=null,e.o=null,e.xa=null}return a.return(n)})}s.preload=function(e,t,n){t=t===void 0?null:t;var o=this,a;return F(function(l){return l.g==1?A(l,l1(o,e,t,n),2):((a=l.h)?a.start():Is(o,new J(2,7,7005)),l.return(a))})},s.Qe=function(){var e=this,t,n,o,a;return F(function(l){for(t=[],n=w(e.ke),o=n.next();!o.done;o=n.next())a=o.value,a.s||t.push(a.destroy());return e.ke=[],A(l,Promise.all(t),0)})};function l1(e,t,n,o,a){a=a===void 0?!1:a;var l,u,c;return F(function(p){return p.g==1?o?p.u(2):A(p,f1(e,t),3):(p.g!=2&&(o=p.h),hA(e,o)?p.return(null):(l=!1,u=!0,a&&(e.o&&e.xa==e.g.abrFactory&&(u=!1),e.h&&e.h.nodeName==="AUDIO"&&(l=!0)),c=u1(e,t,n,o||null,!a,l,u),a||(c=c.then(function(m){return e.ke.push(m),m})),p.return(c)))})}function u1(e,t,n,o,a,l,u){a=a===void 0?!0:a,l=l===void 0?!1:l,u=u===void 0?!0:u;var c,p,m,v,S,E,T,k,M,I,U,N,z,P,j;return F(function(G){return G.g==1?(c=null,p=mo(e.g),l&&(p.manifest.disableVideo=!0),m=function(){return c.R&&c.s?null:c},v=function(){return m()?m().getConfiguration():e.g},S=function(Z,ee){m()?c.configure(Z,ee):e.configure(Z,ee)},e.fa.width!=1/0||e.fa.height!=1/0?G.u(2):A(G,Og(),3)):(G.g!=2&&(E=G.h,e.fa.width=E.width,e.fa.height=E.height),T=new Kh(p,e.fa,null),k={networkingEngine:e.H,filter:function(Z){var ee,fe;return F(function(te){if(te.g==1)return A(te,Hm(T,Z),2);if(te.g!=4)return ee=te.h,ee?(fe=Yt("trackschanged"),A(te,Promise.resolve(),4)):te.u(0);c.dispatchEvent(fe),Y(te)})},makeTextStreamsForClosedCaptions:function(Z){return AA(e,Z)},onTimelineRegionAdded:function(Z){var ee=c.G;e:{for(var fe=w(ee.g),te=fe.next();!te.done;te=fe.next())if(te=te.value,te.schemeIdUri==Z.schemeIdUri&&te.id==Z.id&&te.startTime==Z.startTime&&te.endTime==Z.endTime){fe=te;break e}fe=null}fe==null&&(ee.g.add(Z),Z=new Fe("regionadd",new Map([["region",Z]])),ee.dispatchEvent(Z))},onEvent:function(Z){return c.dispatchEvent(Z)},onError:function(Z){return c.onError(Z)},isLowLatencyMode:function(){return v().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return v().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){S("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&c.R&&e.j.updateDuration()},newDrmInfo:function(Z){var ee=c.l,fe=ee?ee.g:null;fe&&ee.s&&Zh(T,fe.keySystem,Z)},onManifestUpdated:function(){var Z=new Map().set("isLive",e.V());c.dispatchEvent(Yt("manifestupdated",Z)),Ya(c,!1,function(){e.A&&e.A.onManifestUpdated(e.V())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(Z,ee,fe,te){var ne=Z;Z=="com.apple.hls.interstitial"&&(ne="com.apple.quicktime.HLS",Z={startTime:ee,endTime:fe,values:te},e.A)&&e.A.onInterstitialMetadata(e,e.h,Z),te=w(te),Z=te.next();for(var ae={};!Z.done;ae={Pg:void 0},Z=te.next())ae.Pg=Z.value,Ya(c,!1,function(xe){return function(){Fd(e,ee,fe,ne,xe.Pg)}}(ae))},disableStream:function(Z){return e.disableStream(Z,e.g.streaming.maxDisabledTime)}},M=new vd(function(){return e.Ob()}),M.addEventListener("regionadd",function(Z){var ee=Z.region;Ja(e,"timelineregionadded",ee,c),Ya(c,!1,function(){e.A&&e.A.onDashTimedMetadata(ee)})}),I=null,p.streaming.observeQualityChanges&&(I=new $u(function(){return e.wb()}),I.addEventListener("qualitychange",function(Z){b1(e,Z.quality,Z.position)}),I.addEventListener("audiotrackchange",function(Z){b1(e,Z.quality,Z.position,!0)})),U=!0,N={Lb:e.H,onError:function(Z){return c.onError(Z)},ee:function(Z){Ya(c,!0,function(){e:{var ee=Z,fe=Yt("keystatuschanged");e.dispatchEvent(fe);var te=Object.keys(ee);te.length==1&&te[0]==""&&(te=["00"],ee={"00":ee[""]}),fe=te.length==1&&te[0]=="00";var ne=!1;if(te.length){te=w(e.i.variants);for(var ae=te.next();!ae.done;ae=te.next()){ae=ae.value;var xe=[];ae.audio&&xe.push(ae.audio),ae.video&&xe.push(ae.video),xe=w(xe);for(var me=xe.next();!me.done;me=xe.next()){var we=me.value;if(me=ae.allowedByKeySystem,we.keyIds.size){ae.allowedByKeySystem=!0,we=w(we.keyIds);for(var Le=we.next();!Le.done;Le=we.next())Le=Le.value,((Le=ee[fe?"00":Le])||e.B.F)&&(ae.allowedByKeySystem=ae.allowedByKeySystem&&!!Le&&!Wm.includes(Le))}me!=ae.allowedByKeySystem&&(ne=!0)}}}if(ne&&(Oi(e),!Nr(e)))break e;(ee=e.j.j)&&!ee.allowedByKeySystem&&ks(e)}})},onExpirationUpdated:function(Z,ee){var fe=Yt("expirationupdated");c.dispatchEvent(fe),(fe=c.j)&&fe.onExpirationUpdated&&fe.onExpirationUpdated(Z,ee)},onEvent:function(Z){c.dispatchEvent(Z),Z.type=="drmsessionupdate"&&U&&(U=!1,Z=Date.now()/1e3-c.qa,(e.s||c.getStats()).j=Z,e.K&&sy(e.K))}},z=d1(e,m),ym(e.H,z),P=function(){return e.yc(N)},j={config:p,wi:k,Fi:M,Ei:I,yc:P,vi:T,networkingEngine:z,yh:a,xh:u},c=new No(t,o,n,j),G.return(c))})}function f1(e,t){var n,o;return F(function(a){return a.g==1?(n=e.g.manifest.retryParameters,A(a,_d(t,e.H,n),2)):(o=a.h,o=="application/x-mpegurl"&&qr()&&(o="application/vnd.apple.mpegurl"),a.return(o))})}function hA(e,t){if(!eo())return!0;if(t){if((e.h||Ng()).canPlayType(t)=="")return!1;if(!(eo()&&t in Ki))return!0;if($g(t))return qr()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls}return!1}function jd(e){var t,n,o,a,l;return F(function(u){if(u.g==1)return bs(e,"media-source"),t=e.g.textDisplayFactory,n=t(),n.configure?n.configure(e.g.textDisplayer):Ct("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.bg=t,o=SA(e.h,n,{Qh:function(){return e.keySystem()},onMetadata:function(c,p,m){c1(e,c,p,m)}},e.K),o.configure(e.g.mediaSource),a=e.g.manifest,l=a.segmentRelativeVttTiming,o.fa=l,A(u,o.L,2);e.G=o,Y(u)})}function dA(e,t,n,o){var a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe;return F(function(te){switch(te.g){case 1:bs(e,"load"),a=e.h,e.I=new za({Nd:function(){return a.playbackRate},hc:function(){return a.defaultPlaybackRate},Rf:function(ne){a.playbackRate=ne},Lg:function(ne){a.currentTime+=ne}}),l=function(){return rf(e)},u=function(){return w1(e)},e.m.D(a,"playing",l),e.m.D(a,"pause",l),e.m.D(a,"ended",l),e.m.D(a,"ratechange",u),fA(e,e.g),e.Db=e.g.preferredTextLanguage,e.pd=e.g.preferredTextRole,e.od=e.g.preferForcedSubs,Xd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(ne,ae,xe){e.i&&e.j&&ne!=e.j.j&&af(e,ne,!0,ae===void 0?!1:ae,xe===void 0?0:xe)}),e.o.setMediaElement(a),e.o.setCmsdManager(e.ea),e.j=TA(e),e.j.configure(e.g.streaming),e.l=Hn,a.textTracks&&e.m.D(a.textTracks,"addtrack",function(ne){if(ne.track)switch(ne=ne.track,ne.kind){case"chapters":h1(e,ne)}}),e.dispatchEvent(Yt("streaming")),c=n;case 2:for((m=e.j.j)||c||(c=Nr(e)?e.o.chooseVariant():null),v=[],p=m||c,S=w([p.video,p.audio]),E=S.next();!E.done;E=S.next())(T=E.value)&&!T.segmentIndex&&v.push(T.createSegmentIndex());if(!(0<v.length)){te.u(4);break}return A(te,Promise.all(v),4);case 4:if(!p||p.disabledUntilTime!=0){te.u(2);break}if(e.F&&e.F.onInitialVariantChosen&&e.F.onInitialVariantChosen(p),e.i.isLowLatency&&!e.g.streaming.lowLatencyMode&&Ve("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),Xd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),TE(e.j,e.g.playRangeStart,e.g.playRangeEnd),k=function(ne){e.C=xA(e,ne),e.Fb=wA(e,ne),p1(e,a,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||k(e.pa),m){te.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){te.u(8);break}return M=e.i.presentationTimeline,I=e.pa||e.h.currentTime,U=M.Vb(),N=M.yb(),I<U?I=U:I>N&&(I=N),A(te,bA(c,I),9);case 9:z=te.h,k(z);case 8:af(e,c,!0,!1,0);case 7:return e.C.ready(),P=e.Ec().find(function(ne){return ne.active}),P||((j=_a(e.i.textStreams,e.Db,e.pd,e.od)[0]||null)&&gd(e.s.h,j,!0),c&&(j?(kA(e,c.audio,j)&&(e.oa=!0),e.oa&&e.G.F.setTextVisibility(!0),E1(e)):e.oa=!1),j&&(e.g.streaming.alwaysStreamText||e.qf())&&Hu(e.j,j)),A(te,e.j.start(o),10);case 10:e.g.abr.enabled&&(e.o.enable(),A1(e)),Oi(e),Nr(e),e.i.variants.some(function(ne){return ne.primary}),((G=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(Z=function(){return S1(e)},e.m.D(a,"timeupdate",Z)),G||(ee=function(){return sf(e)},e.m.D(a,"timeupdate",ee),sf(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(fe=function(){var ne;return F(function(ae){if(ae.g==1)return ne=e.h.duration-e.h.currentTime,isNaN(ne)||!(ne<=e.g.streaming.preloadNextUrlWindow)?ae.u(0):(e.m.jb(a,"timeupdate",fe),A(ae,e.preload(e.i.nextUrl),4));e.qa=ae.h,Y(ae)})},e.m.D(a,"timeupdate",fe)),e.m.D(a,"ended",function(){e.load(e.qa||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(G),e.Ea=!0,e.m.ha(a,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),Y(te)}})}function pA(e,t){var n,o,a,l,u;return F(function(c){return c.g==1?(n=xn,o=Date.now()/1e3,a=!0,e.B=e.yc({Lb:e.H,onError:function(p){Is(e,p)},ee:function(){},onExpirationUpdated:function(){var p=Yt("expirationupdated");e.dispatchEvent(p)},onEvent:function(p){e.dispatchEvent(p),p.type=="drmsessionupdate"&&a&&(a=!1,e.s.j=Date.now()/1e3-o)}}),e.B.configure(e.g.drm),l={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?Gi(t):"",codecs:t?Ti(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ga,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},u.fullMimeTypes.add(wn(u.mimeType,u.codecs)),t.startsWith("audio/")?(u.type=n.X,l.audio=u):l.video=u,e.B.ba=!0,A(c,Lm(e.B,[l],[]),2)):A(c,e.B.Rb(e.h),0)})}function gA(e,t,n){var o,a,l,u,c,p,m,v,S,E,T,k;return F(function(M){if(M.g==1)return bs(e,"src-equals"),o=e.h,e.C=new Cy(o),a=!1,e.md.push(function(){a=!0}),e.pa!=null&&e.C.Ee(e.pa),e.I=new za({Nd:function(){return o.playbackRate},hc:function(){return o.defaultPlaybackRate},Rf:function(I){o.playbackRate=I},Lg:function(I){o.currentTime+=I}}),l=e.g.streaming.rebufferingGoal,p1(e,o,l),u=function(){return rf(e)},c=function(){return w1(e)},e.m.D(o,"playing",u),e.m.D(o,"pause",u),e.m.D(o,"ended",u),e.m.D(o,"ratechange",c),o.preload!="none"&&e.m.ha(o,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),o.audioTracks&&(e.m.D(o.audioTracks,"addtrack",function(){return Oi(e)}),e.m.D(o.audioTracks,"removetrack",function(){return Oi(e)}),e.m.D(o.audioTracks,"change",function(){return Oi(e)})),o.textTracks&&(e.m.D(o.textTracks,"addtrack",function(I){if(I.track)switch(I=I.track,I.kind){case"metadata":vA(e,I);break;case"chapters":h1(e,I);break;default:Oi(e)}}),e.m.D(o.textTracks,"removetrack",function(){return Oi(e)}),e.m.D(o.textTracks,"change",function(){return Oi(e)})),p=iA(e.N,e.da,n),!p.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(p+="#t=",0<e.g.playRangeStart&&(p+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(p+=","+e.g.playRangeEnd)),o.src=p,(ho()||po())&&o.load(),o.preload!="none"&&!o.autoplay&&$g(n)&&Kr()&&o.load(),e.l=ei,e.dispatchEvent(Yt("streaming")),m=new Bt,ys(o,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ready(),m.resolve()}),ys(o,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var I;return F(function(U){if(U.g==1)return mA(e),I=Qa(e),I.find(function(N){return N.mode!="disabled"})?(0<I.length&&(e.oa=!0),U.u(2)):A(U,new Promise(function(N){e.m.ha(o.textTracks,"change",N),new mt(N).Y(1)}),2);if(a)return U.return();yA(e),Y(U)})}),o.error?m.reject(Gd(e)):o.preload=="none"&&(Ve('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),m.resolve()),e.m.ha(o,"error",function(){m.reject(Gd(e))}),v=new Promise(function(I,U){new mt(U).Y(e.g.streaming.loadTimeout)}),A(M,Promise.race([m,v]),2);((S=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(E=function(){return S1(e)},e.m.D(o,"timeupdate",E)),S||(T=function(){return sf(e)},e.m.D(o,"timeupdate",T),sf(e)),e.A&&(e.A.onManifestUpdated(S),S&&(k=e.Ob().end,e.m.D(o,"progress",function(){var I=e.Ob().end;k!=I&&(e.A.onManifestUpdated(e.V()),k=I)}))),e.Ea=!0,Y(M)})}function mA(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Xg(t,e.g.preferredVariantRole)}function yA(e){var t=e.g.preferredTextLanguage;t!=""&&e.Lf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function vA(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues){for(var o=[],a=w(t.activeCues),l=a.next(),u={};!l.done;u={Ta:void 0},l=a.next())u.Ta=l.value,Fd(e,u.Ta.startTime,u.Ta.endTime,u.Ta.type,u.Ta.value),e.A&&e.A.onCueMetadataChange(u.Ta.value),u.Ta.type=="com.apple.quicktime.HLS"&&u.Ta.startTime!=null&&(l=o.find(function(c){return function(p){return p.startTime==c.Ta.startTime&&p.endTime==c.Ta.endTime}}(u)),l||(l={startTime:u.Ta.startTime,endTime:u.Ta.endTime,values:[]},o.push(l)),l.values.push(u.Ta.value));for(o=w(o),a=o.next();!a.done;a=o.next())a=a.value,a.values.some(function(c){return c.key=="X-ASSET-URI"||c.key=="X-ASSET-LIST"})&&e.A&&(a.values.push({key:"CUE",description:"",data:"ONCE",mimeType:null,pictureType:null}),e.A.onInterstitialMetadata(e,e.h,a))}});var n=new mt(function(){var o=EA(e);o=w(o);for(var a=o.next();!a.done;a=o.next())a.value.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}function c1(e,t,n,o){t=w(t);for(var a=t.next();!a.done;a=t.next())if(a=a.value,a.data&&typeof a.cueTime=="number"&&a.frames){var l=a.cueTime+n,u=o;u&&l>u&&(u=l);for(var c=w(a.frames),p=c.next();!p.done;p=c.next())Fd(e,l,u,"org.id3",p.value);e.A&&e.A.onHlsTimedMetadata(a,l)}}function Fd(e,t,n,o,a){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",o).set("payload",a),e.dispatchEvent(Yt("metadata",t))}function h1(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new mt(function(){t.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}s.Ji=function(){for(var e=this.Z;e.g;)e.release()},s.yc=function(e){return new Ru(e)};function d1(e,t){function n(a){t()?t().dispatchEvent(a):e.dispatchEvent(a)}function o(a){t()?Ya(t(),!0,a):a()}return t||(t=function(){return null}),new Vt(function(a,l,u,c){var p=t()?t().i:e.o;p&&p.segmentDownloaded(a,l,u,c)},function(a,l,u){l=new Map().set("headers",a).set("request",l).set("requestType",u),n(Yt("downloadheadersreceived",l)),o(function(){if(e.ea){var c=e.ea;if(c.h.enabled){var p=a["cmsd-static"];if(p)try{var m=new Map,v=p.split(",");for(p=0;p<v.length;p++){var S=v[p].split("=");m.set(S[0],t1(S[1]))}}catch{}if(m=a["cmsd-dynamic"]){try{var E=new Map,T=m.split(";");for(m=1;m<T.length;m++){var k=T[m].split("=");E.set(k[0],t1(k[1]))}var M=E}catch{M=null}M&&(c.g=M)}}}})},function(a,l,u,c){a=new Map().set("request",a).set("error",l).set("httpResponseCode",u).set("aborted",c),n(Yt("downloadfailed",a))},function(a,l,u){o(function(){var c=e.N,p=u;if(p=p===void 0?{}:p,c.g.enabled)if(l.method==="HEAD")As(c,l);else switch(a){case 0:try{if(c.g.enabled){if(p.type){e:{switch(p.type){case 4:var m="d";break e;case 3:case 2:m="h";break e;case 5:m="s";break e}m=void 0}c.m=m}As(c,l,{ot:e1,su:!c.i})}}catch(me){dt("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",me)}break;case io:try{if(c.g.enabled){var v=p.segment;m=0,v&&(m=v.endTime-v.startTime);var S={d:1e3*m,st:c.h.V()?"l":"v"};S.ot=rA(p);var E=S.ot===ef||S.ot===Ju||S.ot===tf||S.ot===nf,T=p.stream;if(T){var k=c.h.eb();if(E&&(S.bl=sA(c,T.type),S.ot!==nf)){var M=Jy(c,T.type);S.dl=k?M/Math.abs(k):M}if(T.bandwidth&&(S.br=T.bandwidth/1e3),T.segmentIndex&&v){var I=T.segmentIndex.Ib(v.endTime,!0,0>k);if(I){var U=I.next().value;if(U&&U!=v){if(!Si(v.M(),U.M())){var N=U.M()[0],z=l.uris[0],P=new URL(N),j=new URL(z);if(P.origin!==j.origin)var G=N;else{for(var Z=P.pathname.split("/").slice(1),ee=j.pathname.split("/").slice(1,-1);Z[0]===ee[0];)Z.shift(),ee.shift();for(;ee.length;)ee.shift(),Z.unshift("..");G=Z.join("/")}S.nor=G}if((U.Ha||U.sa)&&(v.Ha!=U.Ha||v.sa!=U.sa)){var fe=U.Ha+"-";U.sa&&(fe+=U.sa),S.nrr=fe}}}var te=c.h.eb()||1,ne=Jy(c,T.type)||500,ae=T.bandwidth,xe=ae?ae*(v.endTime-v.startTime)/1e3/(ne/te/1e3)*c.g.rtpSafetyFactor:NaN;isNaN(xe)||(S.rtp=xe)}}E&&S.ot!==nf&&(S.tb=aA(c,S.ot)/1e3),As(c,l,S)}}catch(me){dt("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",me)}break;case 2:case 5:case 6:As(c,l,{ot:"k"});break;case 4:As(c,l,{ot:"o"})}})},function(a,l,u,c){(a=t()?t().j:e.F)&&a.banLocation&&a.banLocation(c)},function(a,l){if(l.data){l=l.data.byteLength;var u=t()?t().getStats():e.s;u&&(u.Cd=isNaN(u.Cd)?l:u.Cd+l,a===0&&(u.Hg=l))}})}function xA(e,t){return new Ty(e.h,e.i,e.g.streaming,t,function(){e.Fb&&My(e.Fb,!0),e.j&&e.j.Qc(),e.L&&Dr(e)},function(n){return e.dispatchEvent(n)})}function wA(e,t){t=new Zu(e.dd,e.V()||0<t),t.addEventListener("enter",function(o){Ja(e,"timelineregionenter",o.region)}),t.addEventListener("exit",function(o){Ja(e,"timelineregionexit",o.region)}),t.addEventListener("skip",function(o){var a=o.region;o.seeking||(Ja(e,"timelineregionenter",a),Ja(e,"timelineregionexit",a))});var n=new Iy(e.h);return n.g.add(t),e.Zc&&n.g.add(e.Zc),n}function p1(e,t,n){e.L=new uT,e.L.g=rs,cm(e.L,n,Math.min(.5,n/2)),Vd(e),e.he=new mt(function(){Dr(e)}).Sa(.25),e.m.D(t,"waiting",function(){return Dr(e)}),e.m.D(t,"stalled",function(){return Dr(e)}),e.m.D(t,"canplaythrough",function(){return Dr(e)}),e.m.D(t,"progress",function(){return Dr(e)})}function Dr(e){switch(e.l){case ei:if(e.h.ended)var t=!0;else{var n=Jh(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case Hn:e:if(e.h.ended||fy(e.G))t=!0;else{if(e.i.presentationTimeline.V()){n=e.i.presentationTimeline.Wb();var o=Jh(e.h.buffered);if(o!=null&&o>=n){t=!0;break e}}t=!1}break;default:t=!1}o=Qm(e.h.buffered,e.h.currentTime),n=e.L;var a=t,l=n.i.get(n.g);t=n.g,o=a||o>=l?La:rs,n.g=o,(t=t!=o)&&o===La&&(n.h=Date.now()),t&&Vd(e)}function SA(e,t,n,o){return new ly(e,t,n,o)}function CA(e){return new Qy({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},wb:function(){return e.wb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},eb:function(){return e.eb()},xb:function(){return e.xb()},ic:function(){return e.ic()},V:function(){return e.V()}},e.g.cmcd)}function TA(e){return new Ny(e.i,{Md:function(){return e.C?e.C.yd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},aa:e.G,Lb:e.H,onError:function(t){return Is(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Bi:function(){e.F&&e.F.update&&e.F.update()},Af:function(t,n){var o=t.startTime;t=t.endTime;var a=n.type;if(n=n.codecs.includes(","),e.C){e.C.Mg();var l=ad(e.G,a);!e.V()&&e.h.paused&&l!=null&&0<l&&e.C.yd()<l&&e.C.Ee(l)}Dr(e),o=new Map().set("start",o).set("end",t).set("contentType",a).set("isMuxed",n),e.dispatchEvent(Yt("segmentappended",o))},Ai:function(t,n){(n=n.Hc)&&e.Zc&&yE(e.Zc,n,t)},kg:function(t,n){var o=e.B;if(o.h.parseInbandPsshEnabled&&!o.F&&["audio","video"].includes(t)){t=new Am(Ze(n)),n=0;for(var a=w(t.data),l=a.next();!l.done;l=a.next())n+=l.value.length;if(n==0)o=Promise.resolve();else{for(n=new Uint8Array(n),a=0,t=w(t.data),l=t.next();!l.done;l=t.next())l=l.value,n.set(l,a),a+=l.length;Da(o,"cenc",n),o=o.l}}else o=Promise.resolve();return o},onMetadata:function(t,n,o){c1(e,t,n,o)},disableStream:function(t,n){return e.disableStream(t,n)}})}s.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Yu(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(Ct("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Ct("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(Ct("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&qr(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){Ct("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var o=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+o,e.streaming.liveSync.targetLatencyTolerance=o}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Ct("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Ct("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Ct("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Ct("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Ct("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Ct("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Ct("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Ct("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Ct("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var a=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return a},delete e.mediaSource.sourceBufferExtraFeatures}return e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.maxDisabledTime==null&&(e.streaming.maxDisabledTime=1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.dash==null&&(e.manifest.dash={}),e.manifest.dash.autoCorrectDrift==null&&(e.manifest.dash.autoCorrectDrift=!1),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100)),n=nr(this.g,e,Oo(this)),g1(this),n};function g1(e){if(e.be=new Kh(e.g,e.fa,e.B),e.F){var t=mo(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.F.configure(t)}if(e.B&&e.B.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.l!=ro&&Gm(e.be,e.i)&&Oi(e)}catch(l){Is(e,l)}e.o&&Nr(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||ks(e)}if(e.H&&(e.H.Pf(e.g.streaming.forceHTTP),e.H.Qf(e.g.streaming.forceHTTPS)),e.G)if(e.G.configure(e.g.mediaSource),e.G.fa=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.bg!=t){var n=t();n.configure?n.configure(e.g.textDisplayer):Ct("Text displayer w/ configure",'Text displayer should have a "configure" method!');var o=e.G,a=o.F;o.F=n,a&&(n.setTextVisibility(a.isTextVisible()),a.destroy()),o.g&&(o.g.j=n),e.bg=t,e.j&&(t=e.j,(n=t.i.get(Tt))&&xs(t,n.stream,!0,0,!0))}else t=e.G.F,t.configure&&t.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),A1(e)),e.L&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),cm(e.L,t,Math.min(.5,t/2))),e.i&&Xd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.N&&e.N.configure(e.g.cmcd),e.ea&&e.ea.configure(e.g.cmsd)}s.getConfiguration=function(){var e=Oo(this);return nr(e,this.g,Oo(this)),e},s.Ag=function(){var e=Oo(this);return nr(e,this.g,Oo(this)),Fy(this.g,Oo(this))},s.vg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ob().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},s.Ni=function(){for(var e in this.g)delete this.g[e];nr(this.g,Oo(this),Oo(this)),g1(this)},s.yg=function(){return this.l},s.hf=function(){return this.i?this.i.type:null},s.Uh=function(){return this.h},s.xb=function(){return this.H},s.Dc=function(){return this.da},s.ug=function(){return this.A?this.A:null},s.V=function(){return this.i?this.i.presentationTimeline.V():this.h&&this.h.src?this.h.duration==1/0:!1},s.kc=function(){return this.i?this.i.presentationTimeline.kc():!1},s.ki=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},s.Ob=function(){if(this.i){if(!this.Ea&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Vb(),end:e.yb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},s.hi=function(){this.V()&&(this.h.currentTime=this.Ob().end)},s.li=function(){return this.Ea},s.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},s.drmInfo=function(){return this.B?this.B.g:null},s.ad=function(){return this.B?this.B.ad():1/0},s.ff=function(){return this.B?this.B.ff():[]},s.Ld=function(){return this.B?this.B.Ld():{}},s.pf=function(){return this.L?this.L.g==rs:!1},s.eb=function(){return this.h?this.I?this.I.i:1:0},s.wd=function(e){var t=this;e==0?Ve("A trick play rate of 0 is unsupported!"):(this.Fa.Ra(),this.h.paused&&this.h.play(),this.I.set(e),this.l==Hn&&(this.o.playbackRateChanged(e),Oy(this.j,1<Math.abs(e))),this.V()&&this.Fa.D(this.h,"timeupdate",function(){var n=t.h.currentTime,o=t.Ob(),a=t.g.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(o.end)&&t.Tc():Math.floor(n)<=Math.floor(o.start+a)&&t.Tc()}))},s.Tc=function(){var e=this.I.hc();this.l==ei&&this.I.set(e),this.l==Hn&&(this.I.set(e),this.o.playbackRateChanged(e),Oy(this.j,!1)),this.Fa.Ra()},s.ic=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,o=w(this.i.variants),a=o.next();!a.done;a=o.next())if(a=a.value,Ra(a)){var l=is(a);l.active=a==e,l.active||n==1||e==null||a.video!=e.video||a.audio!=e.audio||(l.active=!0),l.active&&n++,t.push(l)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(u){return Bh(u)}):[]},s.Ec=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=w(this.i.textStreams),o=n.next();!o.done;o=n.next()){o=o.value;var a=mu(o);a.active=o==e,t.push(a)}return t}return this.h&&this.h.src&&this.h.textTracks?Qa(this).map(function(l){return tm(l)}):[]},s.Oh=function(){var e=this.qd;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Oh(t)})},s.Gh=function(e){var t=this,n,o,a,l;return F(function(u){return u.g==1?t.l!=Hn&&t.l!=ei?u.return(null):(n=t.qd,t.i&&(n=t.i.imageStreams),(o=n.find(function(c){return c.id==e}))?o.segmentIndex?u.u(2):A(u,o.createSegmentIndex(),2):u.return(null)):u.g!=4?(a=[],o.segmentIndex.Hb(function(c){var p=m1(c.tilesLayout||o.tilesLayout);if(p){p=p.rows*p.dc;for(var m=c.j-c.startTime,v=0;v<p;v++)a.push(t.Cg(e,c.startTime+m*v/p))}}),A(u,Promise.all(a),4)):(l=u.h,u.return(l.filter(function(c){return c})))})};function m1(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{dc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}s.Cg=function(e,t){var n=this,o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P;return F(function(j){return j.g==1?n.l!=Hn&&n.l!=ei?j.return(null):(o=n.qd,n.i&&(o=n.i.imageStreams),(a=o.find(function(G){return G.id==e}))?a.segmentIndex?j.u(2):A(j,a.createSegmentIndex(),2):j.return(null)):(l=a.segmentIndex.find(t),l==null||(u=a.segmentIndex.get(l),c=m1(u.tilesLayout||a.tilesLayout),!c)?j.return(null):(p=a.width||0,m=a.height||0,v=p/c.dc,S=m/c.rows,E=c.dc*c.rows,T=u.j-u.startTime,k=u.B||T/E,M=u.startTime,U=I=0,1<E&&(N=Math.floor((t-u.startTime)/k),M=u.startTime+N*k,I=N%c.dc*v,U=Math.floor(N/c.dc)*S),z=!1,(P=u.A)&&(z=!0,S=P.height,I=P.positionX,U=P.positionY,v=P.width),j.return({segment:u,imageHeight:m,imageWidth:p,height:S,positionX:I,positionY:U,startTime:M,duration:k,uris:u.M(),width:v,sprite:z})))})},s.Yg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(o){return o.id==e.id});t&&t!=this.j.s&&(gd(this.s.h,t,!1),Hu(this.j,t),lf(this),this.Db=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=Qa(this),t=w(t);for(var n=t.next();!n.done;n=t.next())n=n.value,Uh(n)==e.id?n.mode=this.oa?"showing":"hidden":n.mode="disabled";lf(this)}},s.Mf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){var o=this.i.variants.find(function(l){return l.id==e.id});if(o&&Ra(o)){var a=this.j.j;this.g.abr.enabled&&(a.video!=o.video||a.audio&&o.audio&&a.audio.language==o.audio.language&&a.audio.channelsCount==o.audio.channelsCount)&&Ve("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),af(this,o,!1,t,n),this.za=new fm(o,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Nr(this)}}else if(this.h&&this.h.audioTracks){for(t=Array.from(this.h.audioTracks),t=w(t),n=t.next();!n.done;n=t.next())if(n=n.value,Uh(n)==e.id){C1(this,n);break}}},s.Ih=function(){return I1(this.ic())},s.ai=function(){return I1(this.Ec())},s.Hh=function(){return Array.from(k1(this.ic()))},s.$h=function(){return Array.from(k1(this.Ec()))},s.Xg=function(e,t,n,o,a){if(n=n===void 0?0:n,o=o===void 0?0:o,a=a===void 0?"":a,this.i&&this.C){this.za=new os(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,a),e=function(u,c){return u.video||c.video?u.video&&c.video?Math.abs((u.video.height||0)-(c.video.height||0))+Math.abs((u.video.width||0)-(c.video.width||0)):1/0:0},t=this.j.j,a=this.za.create(this.i.variants),n=null,a=w(a.values());for(var l=a.next();!l.done;l=a.next())l=l.value,Ra(l)&&(!n||e(n,t)>e(l,t))&&(n=l);n!=t&&(n?(e=is(n),this.Mf(e,!0,o)):ks(this))}else this.h&&this.h.audioTracks&&(o=_a(this.ic(),e,t||"",!1)[0])&&this.Mf(o)},s.Lf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Db=e,this.pd=t||"",this.od=n,(e=_a(this.i.textStreams,this.Db,this.pd,this.od)[0]||null)&&e!=this.j.s&&(gd(this.s.h,e,!1),this.g.streaming.alwaysStreamText||this.qf())&&(Hu(this.j,e),lf(this))):(e=_a(this.Ec(),e,t||"",n)[0])&&this.Yg(e)},s.Ti=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var o=null,a=w(this.i.variants),l=a.next();!l.done;l=a.next())if(l=l.value,l.audio.label==e){o=l;break}o!=null&&(this.za=new os(o.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),ks(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=w(n),o=n.next();!o.done;o=n.next())o=o.value,o.label==e&&(t=o);t&&C1(this,t)}},s.qf=function(){var e=this.oa;return this.G&&this.l==Hn?this.G.F.isTextVisible():this.h&&this.h.src&&this.h.textTracks?Qa(this).some(function(t){return t.mode=="showing"}):e},s.wg=function(){return this.h&&this.h.src&&this.h.textTracks?y1(this).map(function(e){return tm(e)}):[]},s.Kh=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=Nt(e),n=y1(this).filter(function(c){return Nt(c.language)==t});if(!n||!n.length)return[];e=[];var o=new Set;n=w(n);for(var a=n.next();!a.done;a=n.next())if((a=a.value)&&a.cues){a=w(a.cues);for(var l=a.next();!l.done;l=a.next()){var u=l.value;(l=u.id)&&l!=""||(l=u.startTime+"-"+u.endTime+"-"+u.text),u={id:l,title:u.text,startTime:u.startTime,endTime:u.endTime},o.has(l)||(e.push(u),o.add(l))}}return e};function Qa(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function EA(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function y1(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}s.eh=function(e){if(e=!!e,this.oa!=e){if(this.oa=e,this.l==Hn)this.G.F.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=_a(this.i.textStreams,this.Db,this.pd,this.od),0<e.length&&(Hu(this.j,e[0]),lf(this))):AE(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=Qa(this);t=w(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}E1(this)}},s.Wh=function(){if(this.C)var e=this.C.yd();else{if(this.pa==null)return new Date;e=this.pa}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},s.Bg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},s.Od=function(){return this.V()&&this.i?this.i.presentationTimeline.Od():null},s.wb=function(){if(this.l==Hn)return this.G.wb();var e={total:[],audio:[],video:[],text:[]};return this.l==ei&&(e.total=tr(this.h.buffered)),e},s.getStats=function(){if(this.l!=Hn&&this.l!=ei)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};rf(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.V()){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.U=this.C.fg(),this.s.Z=this.C.gg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var o=Number(n.totalVideoFrames);t.R=Number(n.droppedVideoFrames),t.N=o,this.s.L=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==Hn){if(n=this.j.j,t=this.j.s,n){o=this.I?this.I.i:1;var a=o*n.bandwidth;t&&t.bandwidth&&(a+=o*t.bandwidth),this.s.B=a}n&&n.video&&(t=this.s,o=n.video.height||NaN,t.o=n.video.width||NaN,t.l=o),this.V()&&(n=this.Bg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&(this.s.G=this.i.periodCount,this.s.F=this.i.gapCount,this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.g)),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==ei&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var l=this.s;e=l.o,n=l.l,t=l.B,o=l.N,a=l.R;var u=l.L,c=l.Z,p=l.U,m=l.A,v=l.i,S=l.m,E=l.H,T=l.j,k=pd(l.g,"playing"),M=pd(l.g,"paused"),I=pd(l.g,"buffering"),U=l.s,N=l.C,z=l.I,P=l.Hg,j=l.Cd,G=l.K,Z=l.G,ee=l.F,fe=hE(l.g),te=[];l=w(l.h.g);for(var ne=l.next();!ne.done;ne=l.next())ne=ne.value,te.push({timestamp:ne.timestamp,id:ne.id,type:ne.type,fromAdaptation:ne.fromAdaptation,bandwidth:ne.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:o,droppedFrames:a,corruptedFrames:u,stallsDetected:c,gapsJumped:p,estimatedBandwidth:m,completionPercent:v,loadLatency:S,manifestTimeSeconds:E,drmTimeSeconds:T,playTime:k,pauseTime:M,bufferingTime:I,licenseTime:U,liveLatency:N,maxSegmentDuration:z,manifestSizeBytes:P,bytesDownloaded:j,nonFatalErrorCount:G,manifestPeriodCount:Z,manifestGapCount:ee,stateHistory:fe,switchHistory:te}},s.uh=function(e,t,n,o,a,l,u){u=u===void 0?!1:u;var c=this,p,m,v,S,E,T,k,M,I,U,N,z;return F(function(P){switch(P.g){case 1:if(c.l!=Hn&&c.l!=ei)throw new J(1,7,7004);if(n!="subtitles"&&n!="captions"&&Ve("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),o){P.u(2);break}return A(P,$d(c,e),3);case 3:o=P.h;case 2:if(p=[],c.A&&(p=c.A.getCuePoints()),c.l!=ei){P.u(4);break}return u&&(n="forced"),A(P,v1(c,e,t,n,o,l||"",p),5);case 5:if(m=Nt(t),v=c.Ec(),S=v.find(function(j){return Nt(j.language)==m&&j.label==(l||"")&&j.kind==n}))return Oi(c),P.return(S);throw new J(1,2,2012);case 4:if(E=xn,T=c.h.duration,c.i&&(T=c.i.presentationTimeline.getDuration()),T==1/0)throw new J(1,4,4033);if(!p.length){P.u(6);break}return A(P,zd(c,e,c.H,c.g.streaming.retryParameters),7);case 7:k=P.h,M=x1(c,k,o,p),I=new Blob([M],{type:"text/vtt"}),e=Bu(I),o="text/vtt";case 6:if(U={id:c.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:dd(0,T,[e]),mimeType:o||"",codecs:a||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:l||null,type:E.ua,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!u,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([wn(o||"",a||"")])},N=wn(U.mimeType,U.codecs),z=ka(N),!z)throw new J(2,2,2014,o);return c.i.textStreams.push(U),Oi(c),P.return(mu(U))}})},s.vh=function(e,t){var n=this,o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N;return F(function(z){switch(z.g){case 1:if(n.l!=Hn&&n.l!=ei)throw new J(1,7,7004);if(t){z.u(2);break}return A(z,$d(n,e),3);case 3:t=z.h;case 2:if(t!="text/vtt")throw new J(1,2,2017,e);if(o=xn,a=n.h.duration,n.i&&(a=n.i.presentationTimeline.getDuration()),a==1/0)throw new J(1,4,4045);return A(z,zd(n,e,n.H,n.g.streaming.retryParameters),4);case 4:if(l=z.h,u=Sn[t],!u)throw new J(2,2,2014,t);for(c=u(),p={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},m=Ze(l),v=c.parseMedia(m,p,e),S=[],E=w(v),T=E.next(),k={};!T.done;k={ye:void 0,zc:void 0},T=E.next())k.zc=T.value,k.ye=null,M=function(P){return function(){return P.ye==null&&(P.ye=Dn([e],[P.zc.payload])),P.ye||[]}}(k),I=new Je(k.zc.startTime,k.zc.endTime,M,0,null,null,0,0,1/0),k.zc.payload.includes("#xywh")&&(U=k.zc.payload.split("#xywh=")[1].split(","),U.length===4&&I.fh({height:parseInt(U[3],10),positionX:parseInt(U[0],10),positionY:parseInt(U[1],10),width:parseInt(U[2],10)})),S.push(I);return N={id:n.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new It(S),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:o.De,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([wn(t||"","")])},n.l==ei?n.qd.push(N):n.i.imageStreams.push(N),Oi(n),z.return(Oh(N))}})},s.th=function(e,t,n){var o=this,a,l,u,c;return F(function(p){switch(p.g){case 1:if(o.l!=Hn&&o.l!=ei)throw new J(1,7,7004);if(n){p.u(2);break}return A(p,$d(o,e),3);case 3:n=p.h;case 2:return a=[],o.A&&(a=o.A.getCuePoints()),A(p,v1(o,e,t,"chapters",n,"",a),4);case 4:if(l=p.h,u=o.wg(),c=u.find(function(m){return m.language==t}),!c){p.u(5);break}return A(p,new Promise(function(m,v){o.m.ha(l,"load",m),o.m.ha(l,"error",function(){v(new J(1,2,2015))})}),6);case 6:return Oi(o),p.return(c);case 5:throw new J(1,2,2012)}})};function $d(e,t){var n;return F(function(o){switch(o.g){case 1:return le(o,2),A(o,_d(t,e.H,e.g.streaming.retryParameters),4);case 4:n=o.h,de(o,3);break;case 2:se(o);case 3:if(n)return o.return(n);throw new J(1,2,2011,t)}})}function v1(e,t,n,o,a,l,u){var c,p,m,v;return F(function(S){if(S.g==1)return a!="text/vtt"||u.length?A(S,zd(e,t,e.H,e.g.streaming.retryParameters),3):S.u(2);S.g!=2&&(c=S.h,p=x1(e,c,a,u),m=new Blob([p],{type:"text/vtt"}),t=Bu(m),a="text/vtt"),v=document.createElement("track");var E=e.N,T=t;try{if(E.g.enabled){var k=Dd(E);k.ot=Od,k.su=!0;var M=Qu(k),I=Nd(T,M)}else I=T}catch(U){dt("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",U),I=T}return v.src=I,v.label=l,v.kind=o,v.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(v),S.return(v)})}function zd(e,t,n,o){var a,l,u;return F(function(c){if(c.g==1){a=io,l=kn([t],o),l.method="GET";var p=e.N;try{p.g.enabled&&As(p,l,{ot:Od,su:!0})}catch(m){dt("CMCD_TEXT_ERROR","Could not generate text CMCD data.",m)}return A(c,n.request(a,l).promise,2)}return u=c.h,c.return(u.data)})}function x1(e,t,n,o){var a=Sn[n];if(a)return n=a(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Ze(t),t=n.parseMedia(t,e,null),tA(t,o);throw new J(2,2,2014,n)}s.Yi=function(e,t){this.fa.width=e,this.fa.height=t},s.If=function(e){if(this.l==Hn){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.A)t=!1;else{for(var n=w(t.i.values()),o=n.next();!o.done;o=n.next())o=o.value,!o.fd||o.Qa||o.sb||(o.fd=!1,Pi(t,o,e));t=!0}}else t=!1;return t},s.gf=function(){return Ve("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},s.Rh=function(){return this.ab};function Oo(e){var t=Ss();return t.streaming.failureCallback=function(n){if(e.V()){var o=null;n.code==1001||n.code==1002?(o=1,e.g.streaming.lowLatencyMode&&(o=.1)):n.code==1003&&(o=.1),o!=null&&(n.severity=1,e.If(o))}},t.textDisplayFactory=function(){if(e.de){var n=e.getConfiguration();return new pi(e.h,e.de,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new hi(e.h,"Shaka Player TextTrack"):new di},t}s.ih=function(e){this.de=e};function AA(e,t){for(var n=new Set,o=w(t.textStreams),a=o.next();!a.done;a=o.next())a=a.value,a.mimeType!="application/cea-608"&&a.mimeType!="application/cea-708"||n.add(a.originalId);for(o=w(t.variants),a=o.next();!a.done;a=o.next())if((a=a.value.video)&&a.closedCaptions){for(var l=w(a.closedCaptions.keys()),u=l.next();!u.done;u=l.next())if(u=u.value,!n.has(u)){var c=u.startsWith("CC")?"application/cea-608":"application/cea-708",p=new un,m=a.closedCaptions.get(u);c={id:e.cg++,originalId:u,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:p,mimeType:c,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:m,originalLanguage:m,label:null,type:Tt,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([wn(c,"")])},t.textStreams.push(c),n.add(u)}}}function bA(e,t){var n,o,a,l,u;return F(function(c){return c.g==1?(n=e.audio,o=e.video,a=function(p,m){var v,S,E;return F(function(T){return T.g==1?p?A(T,p.createSegmentIndex(),2):T.return(null):(S=(v=p.segmentIndex.Ib(m))?v.next().value:null,S?(E=S.startTime,T.return(E)):T.return(null))})},A(c,a(n,t),2)):c.g!=3?(l=c.h,A(c,a(o,t),3)):(u=c.h,u!=null&&l!=null?c.return(Math.max(u,l)):u!=null?c.return(u):l!=null?c.return(l):c.return(t))})}function Vd(e){var t=e.pf();if(e.s&&e.L&&e.C){var n=e.I;if(n.j=t,ky(n),e.N&&(n=e.N,t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t),rf(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.ze<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var o=e.g.streaming.liveSync.targetLatencyTolerance,a=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.R&&(e.R=Math.min(e.R+ ++e.ze*a,n-o))}}t=new Map().set("buffering",t),e.dispatchEvent(Yt("buffering",t))}function w1(e){var t=e.h.playbackRate;t!=0&&(e.I&&e.I.set(t),t=Yt("ratechange"),e.dispatchEvent(t))}function rf(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==rs?n="buffering":e.h.ended?n="ended":e.h.paused&&(n="paused");var o=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:o,duration:0},t=!0;else{var a=Date.now()/1e3;t.g.duration=a-t.g.timestamp,t.g.state==o?t=!1:(t.h.push(t.g),t.g={timestamp:a,state:o,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Yt("statechanged",n)))}}function S1(e){var t=e.h.playbackRate,n=e.V();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var o=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,a=e.vg();a<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=o&&e.wd(o):a==1&&t!==e.I.hc()&&e.Tc()}if(n&&(n=e.Ob(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start))){o=e.g.streaming.liveSync.targetLatencyTolerance,a=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var l=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var u=e.g.streaming.liveSync.targetLatency,c=u+o,p=Math.max(0,u-o),m=e.g.streaming.liveSync.maxPlaybackRate,v=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(u=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?c=e.i.serviceDescription.targetLatency+o:e.i.serviceDescription.maxLatency!=null&&(c=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?p=Math.max(0,e.i.serviceDescription.targetLatency-o):e.i.serviceDescription.minLatency!=null&&(p=e.i.serviceDescription.minLatency),m=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,v=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.R||typeof u!="number"||(e.R=u);var S=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;a&&e.Da&&e.R!==null&&typeof u=="number"&&e.ze<S&&Date.now()-e.Da>1e3*l&&(l=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.R=Math.max(e.R-(u-l)/2,l+o),e.Da=Date.now()),a&&e.R!==null&&(c=e.R+o,p=e.R-o),u=n.end-e.h.currentTime,o=0,e.l==ei&&(a=e.h.buffered,0<a.length&&(o=a.end(a.length-1),o=Math.max(m,o-n.end))),n=e.g.streaming.liveSync.panicMode,a=1e3*e.g.streaming.liveSync.panicThreshold,l=Date.now()-e.L.h,n&&!v&&(v=e.g.streaming.liveSync.minPlaybackRate),n&&v&&l<=a?t!=v&&e.wd(v):c&&m&&u-o>c?(t!=m&&e.wd(m),e.Da=null):p&&v&&u-o<p?(t!=v&&e.wd(v),e.Da=null):t!==e.I.hc()&&(e.Tc(),e.Da=Date.now())}}function sf(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.U)?(e.U=n,t=!0):(n=Math.max(e.U,n),e.U!=n&&(e.U=n,t=!0))),t){var o;e.U==0?o=Yt("started"):e.U==25?o=Yt("firstquartile"):e.U==50?o=Yt("midpoint"):e.U==75?o=Yt("thirdquartile"):e.U==100&&(o=Yt("complete")),o&&e.dispatchEvent(o)}}}function Nr(e){try{Xm(e.be,e.i)}catch(n){return Is(e,n),!1}var t=yu(e.i.variants);return t=e.za.create(t),e.o.setVariants(Array.from(t.values())),!0}function ks(e,t,n,o,a){t=t===void 0?!0:t,n=n===void 0?0:n,o=o===void 0?!1:o,a=a===void 0?!0:a;var l;(l=Nr(e)?e.o.chooseVariant():null)&&af(e,l,a,t,n,o)}function af(e,t,n,o,a,l){l=l===void 0?!1:l;var u=e.j.j;if(t==u)o&&Uy(e.j,t,o,a,!0);else{var c=e.s.h;c.h!=t&&(c.h=t,c.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Uy(e.j,t,o,a,l,n),o=null,u&&(o=is(u)),t=is(t),n?(n=new Map().set("oldTrack",o).set("newTrack",t),e.K&&ay(e.K,t,e.hf()),n=Yt("adaptation",n),Ms(e,n)):T1(e,o,t)}}function C1(e,t){var n=Array.from(e.h.audioTracks).find(function(o){return o.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=Bh(n),t=Bh(t),T1(e,n,t))}function kA(e,t,n){if(e.g.autoShowText==0)return!1;if(e.g.autoShowText==1)return!0;var o=Nt(e.g.preferredTextLanguage);return n=Nt(n.language),e.g.autoShowText==2?ts(n,o):e.g.autoShowText==3?t?(e=Nt(t.language),ts(n,o)&&!ts(e,n)):!1:(Ve("Invalid autoShowText setting!"),!1)}function Oi(e){var t=Yt("trackschanged");Ms(e,t)}function T1(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&ay(e.K,n,e.hf()),n=Yt("variantchanged",t),Ms(e,n)}function lf(e){var t=Yt("textchanged");Ms(e,t)}function E1(e){var t=Yt("texttrackvisibility");Ms(e,t)}function A1(e){e.g.abr.enabled||Hd(e);var t=new Map().set("newStatus",e.g.abr.enabled);Ms(e,Yt("abrstatuschanged",t))}function Hd(e,t){if(t=t===void 0?!0:t,e.l==Hn){e.je.stop();for(var n=w(e.i.variants),o=n.next();!o.done;o=n.next())o.value.disabledUntilTime=0;t&&Nr(e)}}s.disableStream=function(e,t){if(!this.g.abr.enabled||this.l===ro||!navigator.onLine||t==0)return!1;if(this.i.variants.some(function(l){var u=l[e.type];return u&&u.id!==e.id&&!l.disabledUntilTime?e.type=="audio"?e.language===u.language:!0:!1})){for(var n=w(this.i.variants),o=n.next();!o.done;o=n.next()){o=o.value;var a=o[e.type];a&&a.id===e.id&&(o.disabledUntilTime=Date.now()/1e3+t)}return this.je.Sa(1),t=this.wb().video.reduce(function(l,u){return l+u.end-u.start},0),ks(this,!1,t,!0,!1),!0}return!1};function Is(e,t){var n,o,a;return F(function(l){switch(l.g){case 1:if(e.l==ro)return l.return();if(t.severity===1&&e.s.K++,n=!0,!(e.Ea&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){l.u(2);break}return le(l,3),A(l,UE(e.j),5);case 5:o=l.h,n=!o,de(l,2);break;case 3:se(l),n=!0;case 2:if(!n)return l.return();t.severity===2&&Hd(e,!1),a=Yt("error",new Map().set("detail",t)),e.dispatchEvent(a),a.defaultPrevented&&(t.handled=!0),Y(l)}})}function Ja(e,t,n,o){o=o===void 0?e:o,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),o.dispatchEvent(Yt(t,e))}function b1(e,t,n,o){o=o===void 0?!1:o,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Yt(o?"audiotrackchanged":"mediaqualitychanged",t))}function Gd(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new J(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new J(2,3,3016,n,t,e.h.error.message))}function Xd(e,t,n){0<t&&(e.V()||e.hh(t)),t=e.getDuration(),n<t&&(e.V()||e.Za(n))}function Ms(e,t){F(function(n){if(n.g==1)return A(n,Promise.resolve(),2);e.l!=ro&&e.dispatchEvent(t),Y(n)})}function k1(e){var t=new Set;e=w(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Nt(n.language)):t.add("und");return t}function I1(e){var t=new Map,n=new Map;e=w(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var a="und",l=[];o.language&&(a=Nt(o.language)),o.type=="variant"?l=o.audioRoles:l=o.roles,l&&l.length||(l=[""]),t.has(a)||t.set(a,new Set),l=w(l);for(var u=l.next();!u.done;u=l.next())u=u.value,t.get(a).add(u),o.label&&(n.has(a)||n.set(a,new Map),n.get(a).set(u,o.label))}var c=[];return t.forEach(function(p,m){p=w(p);for(var v=p.next();!v.done;v=p.next()){v=v.value;var S=null;n.has(m)&&n.get(m).has(v)&&(S=n.get(m).get(v)),c.push({language:m,role:v,label:S})}}),c}ce("shaka.Player",ve),ve.prototype.setVideoContainer=ve.prototype.ih,ve.prototype.getManifestParserFactory=ve.prototype.Rh,ve.prototype.getManifest=ve.prototype.gf,ve.prototype.retryStreaming=ve.prototype.If,ve.prototype.setMaxHardwareResolution=ve.prototype.Yi,ve.prototype.addChaptersTrack=ve.prototype.th,ve.prototype.addThumbnailsTrack=ve.prototype.vh,ve.prototype.addTextTrackAsync=ve.prototype.uh,ve.prototype.getStats=ve.prototype.getStats,ve.prototype.getBufferedInfo=ve.prototype.wb,ve.prototype.getSegmentAvailabilityDuration=ve.prototype.Od,ve.prototype.getPresentationStartTimeAsDate=ve.prototype.Bg,ve.prototype.getPlayheadTimeAsDate=ve.prototype.Wh,ve.prototype.setTextTrackVisibility=ve.prototype.eh,ve.prototype.getChapters=ve.prototype.Kh,ve.prototype.getChaptersTracks=ve.prototype.wg,ve.prototype.isTextTrackVisible=ve.prototype.qf,ve.prototype.selectVariantsByLabel=ve.prototype.Ti,ve.prototype.selectTextLanguage=ve.prototype.Lf,ve.prototype.selectAudioLanguage=ve.prototype.Xg,ve.prototype.getTextLanguages=ve.prototype.$h,ve.prototype.getAudioLanguages=ve.prototype.Hh,ve.prototype.getTextLanguagesAndRoles=ve.prototype.ai,ve.prototype.getAudioLanguagesAndRoles=ve.prototype.Ih,ve.prototype.selectVariantTrack=ve.prototype.Mf,ve.prototype.selectTextTrack=ve.prototype.Yg,ve.prototype.getThumbnails=ve.prototype.Cg,ve.prototype.getAllThumbnails=ve.prototype.Gh,ve.prototype.getImageTracks=ve.prototype.Oh,ve.prototype.getTextTracks=ve.prototype.Ec,ve.prototype.getVariantTracks=ve.prototype.ic,ve.prototype.cancelTrickPlay=ve.prototype.Tc,ve.prototype.trickPlay=ve.prototype.wd,ve.prototype.getPlaybackRate=ve.prototype.eb,ve.prototype.isBuffering=ve.prototype.pf,ve.prototype.getKeyStatuses=ve.prototype.Ld,ve.prototype.getActiveSessionsMetadata=ve.prototype.ff,ve.prototype.getExpiration=ve.prototype.ad,ve.prototype.drmInfo=ve.prototype.drmInfo,ve.prototype.keySystem=ve.prototype.keySystem,ve.prototype.isFullyLoaded=ve.prototype.li,ve.prototype.goToLive=ve.prototype.hi,ve.prototype.seekRange=ve.prototype.Ob,ve.prototype.isAudioOnly=ve.prototype.ki,ve.prototype.isInProgress=ve.prototype.kc,ve.prototype.isLive=ve.prototype.V,ve.prototype.getAdManager=ve.prototype.ug,ve.prototype.getAssetUri=ve.prototype.Dc,ve.prototype.getNetworkingEngine=ve.prototype.xb,ve.prototype.getMediaElement=ve.prototype.Uh,ve.prototype.getManifestType=ve.prototype.hf,ve.prototype.getLoadMode=ve.prototype.yg,ve.prototype.resetConfiguration=ve.prototype.Ni,ve.prototype.getBufferFullness=ve.prototype.vg,ve.prototype.getNonDefaultConfiguration=ve.prototype.Ag,ve.prototype.getConfiguration=ve.prototype.getConfiguration,ve.prototype.configure=ve.prototype.configure,ve.prototype.releaseAllMutexes=ve.prototype.Ji,ve.prototype.destroyAllPreloads=ve.prototype.Qe,ve.prototype.preload=ve.prototype.preload,ve.prototype.detachAndSavePreload=ve.prototype.qg,ve.prototype.unloadAndSavePreload=ve.prototype.aj,ve.prototype.load=ve.prototype.load,ve.prototype.updateStartTime=ve.prototype.ej,ve.prototype.unload=ve.prototype.bc,ve.prototype.detach=ve.prototype.detach,ve.prototype.attachCanvas=ve.prototype.zh,ve.prototype.attach=ve.prototype.Rb,ve.probeSupport=function(e){e=e===void 0?!0:e;var t,n,o,a,l,u,c;return F(function(p){switch(p.g){case 1:if(t={},!e){p.u(2);break}return A(p,IT(),3);case 3:t=p.h;case 2:var m={};if(eo())for(var v in Ki)m[v]=!0;v=w(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var S=v.next();!S.done;S=v.next())S=S.value,m[S]=eo()?!!Ki[S]:Ea(S);for(n=m,v='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(L(Zo)),m={},v=w(v),S=v.next();!S.done;S=v.next()){S=S.value,m[S]=ka(S)?!0:eo()?kt(S)||!!qo(S):Ea(S);var E=S.split(";")[0];m[E]=m[E]||m[S]}return o=m,A(p,Og(),4);case 4:a=p.h,l={manifest:n,media:o,drm:t,hardwareResolution:a},u=Yd;for(c in u)l[c]=u[c]();return p.return(l)}})},ve.isBrowserSupported=function(){if(d.Promise||Ve("A Promise implementation or polyfill is required"),!(d.Promise&&d.Uint8Array&&Array.prototype.forEach)||Ut("Trident/"))return!1;var e=Kr();return e&&9>e||!(d.MediaKeys&&d.navigator&&d.navigator.requestMediaKeySystemAccess&&d.MediaKeySystemAccess&&d.MediaKeySystemAccess.prototype.getConfiguration)?!1:eo()?!0:Ea("application/x-mpegurl")},ve.setAdManagerFactory=function(e){uf=e},ve.registerSupportPlugin=function(e,t){Yd[e]=t},ve.prototype.destroy=ve.prototype.destroy;var ro=0,Wd=1,Hn=2,ei=3;ve.LoadMode={DESTROYED:ro,NOT_LOADED:Wd,MEDIA_SOURCE:Hn,SRC_EQUALS:ei},ve.version="v4.10.12";var M1=["4","10"];ht=new function(e){this.g=e,this.i=ri,this.h=At}(new vn(Number(M1[0]),Number(M1[1])));var Yd={},uf=null;function R1(){this.g=[],this.i=this.l=this.j=this.h=0}function IA(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function it(e,t,n){var o=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new ct,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){o.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){o.i=!1})}s=it.prototype,s.needsSkipUI=function(){return!1},s.getDuration=function(){return this.g.getDuration()},s.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},s.getRemainingTime=function(){return this.h.getRemainingTime()},s.isPaused=function(){return this.i},s.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},s.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},s.canSkipNow=function(){return this.h.getAdSkippableState()},s.skip=function(){return this.h.skip()},s.pause=function(){return this.h.pause()},s.play=function(){return this.h.resume()},s.getVolume=function(){return this.h.getVolume()},s.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},s.isMuted=function(){return this.h.getVolume()==0},s.isLinear=function(){return this.g.isLinear()},s.resize=function(e,t){var n=!1,o=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:o.webkitSupportsFullscreen&&(n=o.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},s.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},s.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},s.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},s.getTitle=function(){return this.g.getTitle()},s.getDescription=function(){return this.g.getDescription()},s.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},s.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},s.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},s.getAdId=function(){return this.g.getAdId()},s.getCreativeAdId=function(){return this.g.getCreativeAdId()},s.getAdvertiserName=function(){return this.g.getAdvertiserName()},s.getMediaUrl=function(){return this.g.getMediaUrl()},s.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},s.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},s.release=function(){this.h=this.g=null},ce("shaka.ads.ClientSideAd",it),it.prototype.release=it.prototype.release,it.prototype.getPodIndex=it.prototype.getPodIndex,it.prototype.getTimeOffset=it.prototype.getTimeOffset,it.prototype.getMediaUrl=it.prototype.getMediaUrl,it.prototype.getAdvertiserName=it.prototype.getAdvertiserName,it.prototype.getCreativeAdId=it.prototype.getCreativeAdId,it.prototype.getAdId=it.prototype.getAdId,it.prototype.getVastMediaWidth=it.prototype.getVastMediaWidth,it.prototype.getVastMediaHeight=it.prototype.getVastMediaHeight,it.prototype.getVastMediaBitrate=it.prototype.getVastMediaBitrate,it.prototype.getDescription=it.prototype.getDescription,it.prototype.getTitle=it.prototype.getTitle,it.prototype.getPositionInSequence=it.prototype.getPositionInSequence,it.prototype.getSequenceLength=it.prototype.getSequenceLength,it.prototype.setMuted=it.prototype.setMuted,it.prototype.resize=it.prototype.resize,it.prototype.isLinear=it.prototype.isLinear,it.prototype.isMuted=it.prototype.isMuted,it.prototype.setVolume=it.prototype.setVolume,it.prototype.getVolume=it.prototype.getVolume,it.prototype.play=it.prototype.play,it.prototype.pause=it.prototype.pause,it.prototype.skip=it.prototype.skip,it.prototype.canSkipNow=it.prototype.canSkipNow,it.prototype.getTimeUntilSkippable=it.prototype.getTimeUntilSkippable,it.prototype.isSkippable=it.prototype.isSkippable,it.prototype.isPaused=it.prototype.isPaused,it.prototype.getRemainingTime=it.prototype.getRemainingTime,it.prototype.getMinSuggestedDuration=it.prototype.getMinSuggestedDuration,it.prototype.getDuration=it.prototype.getDuration,it.prototype.needsSkipUI=it.prototype.needsSkipUI;function Xt(){}ce("shaka.ads.Utils",Xt),Xt.ADS_LOADED="ads-loaded",Xt.AD_STARTED="ad-started",Xt.AD_FIRST_QUARTILE="ad-first-quartile",Xt.AD_MIDPOINT="ad-midpoint",Xt.AD_THIRD_QUARTILE="ad-third-quartile",Xt.AD_COMPLETE="ad-complete",Xt.AD_STOPPED="ad-stopped",Xt.AD_SKIPPED="ad-skipped",Xt.AD_VOLUME_CHANGED="ad-volume-changed",Xt.AD_MUTED="ad-muted",Xt.AD_PAUSED="ad-paused",Xt.AD_RESUMED="ad-resumed",Xt.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Xt.CUEPOINTS_CHANGED="ad-cue-points-changed",Xt.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Xt.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Xt.AD_CLICKED="ad-clicked",Xt.AD_PROGRESS="ad-progress",Xt.AD_BUFFERING="ad-buffering",Xt.AD_IMPRESSION="ad-impression",Xt.AD_DURATION_CHANGED="ad-duration-changed",Xt.AD_CLOSED="ad-closed",Xt.AD_LOADED="ad-loaded",Xt.ALL_ADS_COMPLETED="all-ads-completed",Xt.AD_LINEAR_CHANGED="ad-linear-changed",Xt.AD_METADATA="ad-metadata",Xt.AD_RECOVERABLE_ERROR="ad-recoverable-error",Xt.AD_ERROR="ad-error",Xt.AD_BREAK_READY="ad-break-ready",Xt.AD_INTERACTION="ad-interaction",Xt.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Xt.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Xt.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function ff(e,t,n,o,a){var l=this;this.s=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=a,this.j=null,this.h=new ct,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.10.12"),this.g=null,this.B=o||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(u){MA(l,u)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(u){_1(l,u)}),this.h.D(this.i,"ended",function(){l.m.contentComplete()}),this.h.ha(this.i,"play",function(){l.F=!0})}ff.prototype.configure=function(e){this.o=e},ff.prototype.stop=function(){this.g&&this.g.stop(),this.s&&Ts(this.s)},ff.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function _1(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new Fe("ad-error",t)),hf(e,null),e.l(new Fe("ad-cue-points-changed",new Map().set("cuepoints",[])))}function MA(e,t){if(e.l(new Fe("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new Fe("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var o=e.g.getCuePoints();if(o.length){t=[],o=w(o);for(var a=o.next();!a.done;a=o.next())t.push({start:a.value,end:null});e.l(new Fe("ad-cue-points-changed",new Map().set("cuepoints",t)))}RA(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,cf(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,cf(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in d?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,cf(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,cf(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.ha(e.i,"play",function(){e.F=!0,e.g.start()})}catch{hf(e,null)}}function cf(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function RA(e){function t(n,o){n=new Map().set("originalEvent",n),e.l(new Fe(o,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){_1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){L1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){L1(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){hf(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){hf(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function L1(e,t){var n=t.getAd();n?(e.j=new it(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new Fe("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new Fe("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Ve("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function hf(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new Fe("ad-content-resume-requested")),e.l(new Fe("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function ot(e,t,n,o,a){this.g=e,this.h=t,this.j=n,this.l=o,this.i=a}s=ot.prototype,s.needsSkipUI=function(){return!0},s.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},s.getMinSuggestedDuration=function(){return this.getDuration()},s.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},s.isPaused=function(){return this.g.paused},s.isSkippable=function(){return this.h},s.getTimeUntilSkippable=function(){return this.h?0:Math.max(this.getRemainingTime(),0)},s.canSkipNow=function(){return this.getTimeUntilSkippable()==0},s.skip=function(){this.j()},s.pause=function(){return this.g.pause()},s.play=function(){return this.g.play()},s.getVolume=function(){return this.g.volume},s.setVolume=function(e){this.g.volume=e},s.isMuted=function(){return this.g.muted},s.isLinear=function(){return!0},s.resize=function(){},s.setMuted=function(e){this.g.muted=e},s.getSequenceLength=function(){return this.l},s.getPositionInSequence=function(){return this.i},s.getTitle=function(){return""},s.getDescription=function(){return""},s.getVastMediaBitrate=function(){return 0},s.getVastMediaHeight=function(){return 0},s.getVastMediaWidth=function(){return 0},s.getAdId=function(){return""},s.getCreativeAdId=function(){return""},s.getAdvertiserName=function(){return""},s.getMediaUrl=function(){return null},s.getTimeOffset=function(){return 0},s.getPodIndex=function(){return 0},s.release=function(){this.g=null},ce("shaka.ads.InterstitialAd",ot),ot.prototype.release=ot.prototype.release,ot.prototype.getPodIndex=ot.prototype.getPodIndex,ot.prototype.getTimeOffset=ot.prototype.getTimeOffset,ot.prototype.getMediaUrl=ot.prototype.getMediaUrl,ot.prototype.getAdvertiserName=ot.prototype.getAdvertiserName,ot.prototype.getCreativeAdId=ot.prototype.getCreativeAdId,ot.prototype.getAdId=ot.prototype.getAdId,ot.prototype.getVastMediaWidth=ot.prototype.getVastMediaWidth,ot.prototype.getVastMediaHeight=ot.prototype.getVastMediaHeight,ot.prototype.getVastMediaBitrate=ot.prototype.getVastMediaBitrate,ot.prototype.getDescription=ot.prototype.getDescription,ot.prototype.getTitle=ot.prototype.getTitle,ot.prototype.getPositionInSequence=ot.prototype.getPositionInSequence,ot.prototype.getSequenceLength=ot.prototype.getSequenceLength,ot.prototype.setMuted=ot.prototype.setMuted,ot.prototype.resize=ot.prototype.resize,ot.prototype.isLinear=ot.prototype.isLinear,ot.prototype.isMuted=ot.prototype.isMuted,ot.prototype.setVolume=ot.prototype.setVolume,ot.prototype.getVolume=ot.prototype.getVolume,ot.prototype.play=ot.prototype.play,ot.prototype.pause=ot.prototype.pause,ot.prototype.skip=ot.prototype.skip,ot.prototype.canSkipNow=ot.prototype.canSkipNow,ot.prototype.getTimeUntilSkippable=ot.prototype.getTimeUntilSkippable,ot.prototype.isSkippable=ot.prototype.isSkippable,ot.prototype.isPaused=ot.prototype.isPaused,ot.prototype.getRemainingTime=ot.prototype.getRemainingTime,ot.prototype.getMinSuggestedDuration=ot.prototype.getMinSuggestedDuration,ot.prototype.getDuration=ot.prototype.getDuration,ot.prototype.needsSkipUI=ot.prototype.needsSkipUI;function df(e,t,n,o){var a=this;this.F=e,this.B=t,this.i=n,this.C=null,this.m=!0,this.s=this.i,this.g=o,this.G=new Set,this.A=new Set,this.o=new Map,this.h=new ve,Kd(this),this.I=new ct,this.j=new ct,this.H=!1,this.l=null,this.I.D(this.i,"timeupdate",function(){if(!a.H){var l=a.l==null||a.l==0;a.l=a.i.currentTime,(l=P1(a,l))&&D1(a,l,1,1,Date.now())}}),new mt(function(){var l,u,c,p,m,v,S,E,T,k;return F(function(M){switch(M.g){case 1:if(!a.A.size||a.H||a.l==null){M.u(0);break}l=!1,u=Array.from(a.A),c=a.B.Ob(),p=w(u),m=p.next();case 3:if(m.done){M.u(5);break}if(v=m.value,S=v.endTime||v.startTime,!(1<=c.start-S)){E=v.startTime-a.l,0<E&&10>=E&&(a.o.has(v)||a.o.set(v,a.h.preload(v.uri))),M.u(4);break}if(!a.o.has(v)){M.u(7);break}return A(M,a.o.get(v),8);case 8:(T=M.h)&&T.destroy(),a.o.delete(v);case 7:k=JSON.stringify(v),a.G.has(k)&&a.G.delete(k),a.A.delete(v),l=!0;case 4:m=p.next(),M.u(3);break;case 5:l&&qd(a),Y(M)}})}).Sa(1)}df.prototype.configure=function(e){this.F&&this.m==e.supportsMultipleMediaElements&&((this.m=!e.supportsMultipleMediaElements)?(this.s=this.i,this.C&&(this.C.parentElement&&this.F.removeChild(this.C),this.C=null)):(this.C||(e=document.createElement(this.i.tagName),e.autoplay=!0,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgb(0, 0, 0)",e.setAttribute("playsinline",""),this.C=e),this.s=this.C))},df.prototype.stop=function(){this.j&&this.j.Ra(),this.G.clear(),this.A.clear(),this.h.Qe(),this.o.clear(),this.h.detach(),this.H=!1,this.l=null},df.prototype.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.F&&Ts(this.F),this.h.destroy()};function _A(e,t){var n,o,a,l,u,c,p,m;F(function(v){if(v.g==1)return e.B.yg()==ei&&e.m?(Ve("Unsupported interstitial when using single media element",t),v.return()):(Kd(e),n=!1,A(v,LA(e,t),2));if(o=v.h,o.length)for(a=w(o),l=a.next();!l.done;l=a.next())u=l.value,c=JSON.stringify(u),e.G.has(c)||(n=!0,e.G.add(c),e.A.add(u),p=!1,t.Ab&&e.l==null?p=!0:u.startTime!=0||u.Ie?e.l!=null&&(m=t.startTime-e.l,0<m&&10>=m&&(p=!0)):p=!0,p&&(e.o.has(u)||e.o.set(u,e.h.preload(u.uri))));else Ve("Unsupported interstitial",t);n&&qd(e),Y(v)})}function P1(e,t,n){n=n===void 0?0:n;var o=0,a=null;if(e.A.size&&e.l!=null){var l=e.i.ended,u=Array.from(e.A).sort(function(m,v){return v.startTime-m.startTime});u=w(u);for(var c=u.next();!c.done;c=u.next()){c=c.value;var p=!1;if(t?p=c.Ab:l?p=c.nc:c.Ab||c.nc||(p=e.l-Math.round(1e3*c.startTime)/1e3,p=0<p&&(1>=p||!c.Ie)),p){if(o==n){a=c;break}o++}}}return a}function D1(e,t,n,o,a,l){l=l===void 0?0:l;var u,c,p,m,v,S,E,T,k,M,I,U,N,z;F(function(P){switch(P.g){case 1:if(u=Date.now(),!e.s.parentElement&&e.F&&e.F.appendChild(e.s),o==1&&n==1&&(n=Array.from(e.A).filter(function(j){return t.Ab?j.Ab==t.Ab:t.nc?j.nc==t.nc:.001>Math.abs(j.startTime-t.startTime)}).length),(t.once||t.Ab)&&(l++,e.A.delete(t),qd(e)),e.H=!0,!e.m||o!=1){P.u(2);break}return e.g(new Fe("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),c=new Bt,p=function(j){return F(function(G){if(G.g==1)return j.state!="detach"?G.u(0):Dg()?A(G,new Promise(function(Z){return new mt(Z).Y(.1)}),3):G.u(3);c.resolve(),e.j.jb(e.B,"onstatechange",p),Y(G)})},e.j.D(e.B,"onstatechange",p),A(P,c,2);case 2:return e.m||(e.i.pause(),t.Oc!=null&&t.Oc!=0&&(e.i.currentTime+=t.Oc)),m=!1,v=null,S=function(){if(!e.m&&t.Oc==null)if(t.se&&t.endTime&&t.endTime!=1/0)e.i.currentTime!=t.endTime&&(e.i.currentTime=t.endTime);else{var j=Date.now();e.i.currentTime+=(j-a)/1e3,a=j}},E=function(){var j,G;return F(function(Z){if(Z.g==1)return S(),v&&v.stop(),(j=P1(e,t.Ab,o-l))?(e.g(new Fe("ad-stopped")),e.j.Ra(),D1(e,j,n,++o,a,l),Z.u(0)):e.m?A(Z,e.h.detach(),4):A(Z,e.h.bc(),4);e.m&&(G=t.Oc,G==null&&(G=t.se&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-a)/1e3),e.g(new Fe("ad-content-resume-requested",new Map().set("offset",G)))),e.g(new Fe("ad-stopped")),e.j.Ra(),e.H=!1,e.m||(S(),e.i.ended||e.i.play()),Y(Z)})},T=function(j){return F(function(G){return m?G.return():(m=!0,e.g(new Fe("ad-error",new Map().set("originalEvent",j))),A(G,E(),0))})},k=function(){return F(function(j){if(j.g==1)return m?j.return():(m=!0,A(j,E(),2));e.g(new Fe("ad-complete")),Y(j)})},M=function(){return F(function(j){return m?j.return():(m=!0,e.g(new Fe("ad-skipped")),A(j,E(),0))})},I=new ot(e.s,t.isSkippable,M,n,o),e.m||(I.setMuted(e.i.muted),I.setVolume(e.i.volume)),e.g(new Fe("ad-started",new Map().set("ad",I))),I.canSkipNow()&&e.g(new Fe("ad-skip-state-changed")),e.j.ha(e.h,"error",T),e.j.ha(e.h,"firstquartile",function(){S(),e.g(new Fe("ad-first-quartile"))}),e.j.ha(e.h,"midpoint",function(){S(),e.g(new Fe("ad-midpoint"))}),e.j.ha(e.h,"thirdquartile",function(){S(),e.g(new Fe("ad-third-quartile"))}),e.j.ha(e.h,"complete",k),e.j.D(e.s,"play",function(){e.g(new Fe("ad-resumed"))}),e.j.D(e.s,"pause",function(){e.g(new Fe("ad-paused"))}),e.j.D(e.s,"volumechange",function(){e.s.muted?e.g(new Fe("ad-muted")):e.g(new Fe("ad-volume-changed"))}),le(P,4),t.Ef&&(v=new mt(function(){I.skip()}).Y(t.Ef)),Kd(e),A(P,e.h.Rb(e.s),6);case 6:return e.o.has(t)?A(P,e.o.get(t),10):A(P,e.h.load(t.uri),8);case 10:return U=P.h,e.o.delete(t),U?A(P,e.h.load(U),8):A(P,e.h.load(t.uri),8);case 8:N=(Date.now()-u)/1e3,e.g(new Fe("ads-loaded",new Map().set("loadTime",N))),e.m&&e.i.play(),de(P,0);break;case 4:z=se(P),T(z),Y(P)}})}function LA(e,t){var n,o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe,te,ne,ae,xe,me,we,Le;return F(function(Se){switch(Se.g){case 1:if(n=[],!t||(o=t.values.find(function(Be){return Be.key=="X-ASSET-URI"}),a=t.values.find(function(Be){return Be.key=="X-ASSET-LIST"}),!o&&!a))return Se.return(n);if(l=t.values.find(function(Be){return Be.key=="X-RESTRICT"}),c=u=!0,l&&l.data&&(p=l.data,u=!p.includes("SKIP"),c=!p.includes("JUMP")),m=null,(v=t.values.find(function(Be){return Be.key=="X-RESUME-OFFSET"}))&&(S=v.data,m=parseFloat(S),isNaN(m)&&(m=null)),E=null,(T=t.values.find(function(Be){return Be.key=="X-PLAYOUT-LIMIT"}))&&(k=T.data,E=parseFloat(k),isNaN(E)&&(E=null)),U=I=M=!1,(N=t.values.find(function(Be){return Be.key=="CUE"}))&&(z=N.data,M=z.includes("ONCE"),I=z.includes("PRE"),U=z.includes("POST")),P=!1,(j=t.values.find(function(Be){return Be.key=="X-TIMELINE-OCCUPIES"}))?(G=j.data,P=G.includes("RANGE")):!v&&e.B.V()&&(P=!I&&!U),o){if(Z=o.data,!Z)return Se.return(n);n.push({startTime:t.startTime,endTime:t.endTime,uri:Z,isSkippable:u,Ie:c,Oc:m,Ef:E,once:M,Ab:I,nc:U,se:P}),Se.u(2);break}if(!a){Se.u(2);break}return ee=a.data,ee?(fe=kn([ee],no()),te=e.B.xb().request(7,fe),le(Se,4),A(Se,te.promise,6)):Se.return(n);case 6:for(ne=Se.h,ae=Wt(ne.data),xe=JSON.parse(ae),me=w(xe.ASSETS),we=me.next();!we.done;we=me.next())Le=we.value,Le.URI&&n.push({startTime:t.startTime,endTime:t.endTime,uri:Le.URI,isSkippable:u,Ie:c,Oc:m,Ef:E,once:M,Ab:I,nc:U,se:P});de(Se,2);break;case 4:se(Se);case 2:return Se.return(n)}})}function qd(e){for(var t=[],n=w(e.A),o=n.next(),a={};!o.done;a={Qb:void 0},o=n.next())o=o.value,a.Qb={start:o.startTime,end:null},o.Ab?(a.Qb.start=0,a.Qb.end=null):o.nc?(a.Qb.start=-1,a.Qb.end=null):o.se&&(a.Qb.end=o.endTime),t.find(function(l){return function(u){return l.Qb.start==u.start&&l.Qb.end==u.end}}(a))||t.push(a.Qb);e.g(new Fe("ad-cue-points-changed",new Map().set("cuepoints",t)))}function Kd(e){e.h.configure(e.B.Ag());var t=e.h.xb();t.mg(),t.ng(),ym(e.B.xb(),t)}function ir(e){this.h=e||"",this.g=0}function Rs(e){Uo(e,/[ \t]+/gm)}function Uo(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Or(e){return e.g==e.h.length?null:(e=Uo(e,/[^ \t\n]*/gm))?e[0]:null}function nt(e,t,n,o,a){if(this.h=e,e=this.h.skipOffset)if(e=Uo(new ir(e),PA),e==null)e=null;else{var l=Number(e[2]),u=Number(e[3]);e=59<l||59<u?null:(Number(e[4])||0)/1e3+u+60*l+3600*(Number(e[1])||0)}else e=null;this.j=e,this.g=a,this.i=t,this.l=n,this.o=o,this.m=!1}s=nt.prototype,s.needsSkipUI=function(){return!0},s.getDuration=function(){return this.h.durationInSeconds},s.getMinSuggestedDuration=function(){return this.getDuration()},s.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},s.isPaused=function(){return this.g.paused},s.isSkippable=function(){return typeof this.j=="number"},s.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},s.canSkipNow=function(){return this.getTimeUntilSkippable()==0},s.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},s.pause=function(){return this.g.pause()},s.play=function(){return this.g.play()},s.getVolume=function(){return this.g.volume},s.setVolume=function(e){this.g.volume=e},s.isMuted=function(){return this.g.muted},s.isLinear=function(){return this.o},s.resize=function(){},s.setMuted=function(e){this.g.muted=e},s.getSequenceLength=function(){return this.l?this.l:1},s.getPositionInSequence=function(){return this.i?this.i:1},s.getTitle=function(){return this.h.adTitle},s.getDescription=function(){return""},s.getVastMediaBitrate=function(){return 0},s.getVastMediaHeight=function(){return 0},s.getVastMediaWidth=function(){return 0},s.getAdId=function(){return this.h.adId},s.getCreativeAdId=function(){return this.h.creativeId},s.getAdvertiserName=function(){return""},s.getMediaUrl=function(){return null},s.getTimeOffset=function(){return 0},s.getPodIndex=function(){return 0},s.release=function(){this.l=this.i=this.g=this.h=null},ce("shaka.ads.MediaTailorAd",nt),nt.prototype.release=nt.prototype.release,nt.prototype.getPodIndex=nt.prototype.getPodIndex,nt.prototype.getTimeOffset=nt.prototype.getTimeOffset,nt.prototype.getMediaUrl=nt.prototype.getMediaUrl,nt.prototype.getAdvertiserName=nt.prototype.getAdvertiserName,nt.prototype.getCreativeAdId=nt.prototype.getCreativeAdId,nt.prototype.getAdId=nt.prototype.getAdId,nt.prototype.getVastMediaWidth=nt.prototype.getVastMediaWidth,nt.prototype.getVastMediaHeight=nt.prototype.getVastMediaHeight,nt.prototype.getVastMediaBitrate=nt.prototype.getVastMediaBitrate,nt.prototype.getDescription=nt.prototype.getDescription,nt.prototype.getTitle=nt.prototype.getTitle,nt.prototype.getPositionInSequence=nt.prototype.getPositionInSequence,nt.prototype.getSequenceLength=nt.prototype.getSequenceLength,nt.prototype.setMuted=nt.prototype.setMuted,nt.prototype.resize=nt.prototype.resize,nt.prototype.isLinear=nt.prototype.isLinear,nt.prototype.isMuted=nt.prototype.isMuted,nt.prototype.setVolume=nt.prototype.setVolume,nt.prototype.getVolume=nt.prototype.getVolume,nt.prototype.play=nt.prototype.play,nt.prototype.pause=nt.prototype.pause,nt.prototype.skip=nt.prototype.skip,nt.prototype.canSkipNow=nt.prototype.canSkipNow,nt.prototype.getTimeUntilSkippable=nt.prototype.getTimeUntilSkippable,nt.prototype.isSkippable=nt.prototype.isSkippable,nt.prototype.isPaused=nt.prototype.isPaused,nt.prototype.getRemainingTime=nt.prototype.getRemainingTime,nt.prototype.getMinSuggestedDuration=nt.prototype.getMinSuggestedDuration,nt.prototype.getDuration=nt.prototype.getDuration,nt.prototype.needsSkipUI=nt.prototype.needsSkipUI;var PA=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function el(e,t,n,o){this.B=e,this.K=t,this.h=n,this.l=null,this.U=NaN,this.i=o,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.o=new ct}el.prototype.stop=function(){for(var e=w(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.jb(t.target,t.type,t.listener);_s(this),this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},el.prototype.release=function(){this.stop(),this.o&&this.o.release()},el.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(NA(this,this.G,this.R),this.R=!1)},el.prototype.getCuePoints=function(){for(var e=[],t=w(this.j),n=t.next();!n.done;n=t.next()){n=w(n.value.ads);for(var o=n.next();!o.done;o=n.next())o=o.value,e.push({start:o.startTimeInSeconds,end:o.startTimeInSeconds+o.durationInSeconds})}return e};function DA(e,t,n){var o,a,l,u,c,p,m,v,S,E,T;F(function(k){if(k.g==1)return o=kn([t],no()),o.method="POST",n&&(a=JSON.stringify(n),o.body=to(a)),l=e.K.request(7,o),le(k,2),A(k,l.promise,4);if(k.g!=2){if(u=k.h,c=Wt(u.data),p=JSON.parse(c),p.manifestUrl&&p.trackingUrl)m=new pn(t),v=new pn(p.trackingUrl),e.G=m.resolve(v).toString(),S=Date.now()/1e3,E=S-e.U,e.i(new Fe("ads-loaded",new Map().set("loadTime",E))),T=new pn(p.manifestUrl),e.l.resolve(m.resolve(T).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return de(k,0)}if(se(k),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,k.return();e.l.resolve(e.H),e.l=null,Y(k)})}function NA(e,t,n){var o,a,l,u,c,p,m,v,S,E,T,k,M,I,U;F(function(N){if(N.g==1)return o=kn([t],no()),a=e.K.request(7,o),le(N,2),A(N,a.promise,4);if(N.g!=2){if(l=N.h,u=[],c=Wt(l.data),p=JSON.parse(c),0<p.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(p.avails)){for(e.j=p.avails,m=w(e.j),v=m.next();!v.done;v=m.next())for(S=v.value,E=w(S.nonLinearAdsList),T=E.next();!T.done;T=E.next())for(k=T.value,M=w(k.nonLinearAdList),I=M.next();!I.done;I=M.next())U=I.value,OA(e,U);u=e.getCuePoints(),e.i(new Fe("ad-cue-points-changed",new Map().set("cuepoints",u)))}}else e.j.length&&e.i(new Fe("ad-cue-points-changed",new Map().set("cuepoints",u))),_s(e),e.j=[];return n&&(e.I||0<u.length)&&UA(e),de(N,0)}se(N),Y(N)})}function OA(e,t){var n,o,a,l,u,c,p;F(function(m){if(m.g==1)return!t.staticResource||(n=N1(t),e.F.get(n))?m.return():(o=kn([t.staticResource],no()),a=e.K.request(7,o),le(m,2),e.F.set(n,[]),A(m,a.promise,4));if(m.g!=2)return l=m.h,u=Wt(l.data),c=JSON.parse(u),p=c.apps,e.F.set(n,p),de(m,0);se(m),e.F.delete(n),Y(m)})}function N1(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function UA(e){U1(e),e.I||(O1(e),e.o.D(e.h,"seeked",function(){O1(e)}),e.o.D(e.h,"ended",function(){_s(e)})),e.o.D(e.h,"timeupdate",function(){U1(e)})}function O1(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,o,a=w(e.j),l=a.next();!l.done;l=a.next()){l=l.value;for(var u=w(l.ads),c=u.next();!c.done;c=u.next())if(c=c.value,!o)c.startTimeInSeconds<t&&(o=c,n=l);else if(c.startTimeInSeconds<t&&c.startTimeInSeconds>o.startTimeInSeconds+o.durationInSeconds){o=c,n=l;break}}n&&o&&!e.N.includes(o.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function U1(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var o=e.C,a=o.startTimeInSeconds+.5*o.durationInSeconds,l=o.startTimeInSeconds+.75*o.durationInSeconds;t>=o.startTimeInSeconds+.25*o.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),Gn(e,"firstQuartile")):t>=a&&!e.s.includes("midpoint")?(e.s.push("midpoint"),Gn(e,"midpoint")):t>=l&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),Gn(e,"thirdQuartile")),o=e.g.getRemainingTime(),a=e.g.getDuration(),e.g.canSkipNow()&&0<o&&0<a&&Gn(e,"skipStateChanged"),0<a&&(0>=o||o>a)&&_s(e)}if(!e.g||!e.g.isLinear()){e:for(o=w(e.j),a=o.next();!a.done&&(a=a.value,!(e.g&&e.g.isLinear()));a=o.next())for(l=0;l<a.ads.length;l++){var u=a.ads[l],c=u.startTimeInSeconds+u.durationInSeconds;if(u.startTimeInSeconds<=t&&c>t){if(e.N.includes(u.adId)){if(e.h.ended)continue;e.h.currentTime=c;break e}_s(e),e.L=a,e.g=new nt(u,l+1,a.ads.length,!0,e.h),e.C=u,l===0&&Gn(e,"breakStart"),B1(e);break}}if(!e.g){for(o=w(e.j),a=o.next();!a.done&&(a=a.value,!e.g);a=o.next())for(l=0;l<a.nonLinearAdsList.length;l++)if(u=a.nonLinearAdsList[l],u.nonLinearAdList.length){c=a.startTimeInSeconds;var p=e.F.get(N1(u.nonLinearAdList[0]));if(c<=t&&p&&p.length){_s(e),c=e,p=w(p);for(var m=p.next();!m.done;m=p.next())if(m=m.value,m.data.source.length){var v=document.createElement("img");v.src=m.data.source[0].url,v.style.top=(m.placeholder.top||0)+"%",v.style.height=100-(m.placeholder.top||0)+"%",v.style.left=(m.placeholder.left||0)+"%",v.style.maxWidth=100-(m.placeholder.left||0)+"%",v.style.objectFit="contain",v.style.position="absolute",c.B.appendChild(v)}e.L=a,e.g=new nt(u,l+1,a.ads.length,!1,e.h),e.C=u,l===0&&Gn(e,"breakStart"),B1(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function _s(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId);var t=e.g.m;t!==void 0&&t?Gn(e,"skip"):Gn(e,"complete"),t=w(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.jb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&Gn(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function B1(e){var t=!1;e.h.paused?t=!0:(Gn(e,"impression"),Gn(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&Gn(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||Gn(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(Gn(e,"impression"),Gn(e,"start"),t=!1):Gn(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){Gn(e,"pause")}});for(var n=w(e.m),o=n.next();!o.done;o=n.next())o=o.value,e.o.D(o.target,o.type,o.listener)}function Gn(e,t){var n=e.C.trackingEvents.find(function(a){return a.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(a){return a.eventType==t})),n){n=w(n.beaconUrls);for(var o=n.next();!o.done;o=n.next())(o=o.value)&&o!=""&&(o=kn([o],no()),o.method="POST",e.K.request(7,o))}switch(t){case"impression":e.i(new Fe("ad-impression"));break;case"start":e.i(new Fe("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new Fe("ad-muted"));break;case"unmute":e.i(new Fe("ad-volume-changed"));break;case"resume":e.i(new Fe("ad-resumed"));break;case"pause":e.i(new Fe("ad-paused"));break;case"firstQuartile":e.i(new Fe("ad-first-quartile"));break;case"midpoint":e.i(new Fe("ad-midpoint"));break;case"thirdQuartile":e.i(new Fe("ad-third-quartile"));break;case"complete":e.i(new Fe("ad-complete")),e.i(new Fe("ad-stopped"));break;case"skip":e.i(new Fe("ad-skipped")),e.i(new Fe("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new Fe("ad-skip-state-changed"))}}function rt(e,t){this.g=e,this.i=null,this.h=t}s=rt.prototype,s.needsSkipUI=function(){return!0},s.getDuration=function(){return this.i?this.i.duration:-1},s.getMinSuggestedDuration=function(){return this.getDuration()},s.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},s.isPaused=function(){return this.h.paused},s.isSkippable=function(){return this.g.isSkippable()},s.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},s.canSkipNow=function(){return this.getTimeUntilSkippable()==0},s.skip=function(){this.h.currentTime+=this.getRemainingTime()},s.pause=function(){return this.h.pause()},s.play=function(){return this.h.play()},s.getVolume=function(){return this.h.volume},s.setVolume=function(e){this.h.volume=e},s.isMuted=function(){return this.h.muted},s.isLinear=function(){return!0},s.resize=function(){},s.setMuted=function(e){this.h.muted=e},s.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},s.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},s.getTitle=function(){return this.g.getTitle()},s.getDescription=function(){return this.g.getDescription()},s.getVastMediaBitrate=function(){return 0},s.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},s.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},s.getAdId=function(){return this.g.getAdId()},s.getCreativeAdId=function(){return this.g.getCreativeAdId()},s.getAdvertiserName=function(){return this.g.getAdvertiserName()},s.getMediaUrl=function(){return null},s.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},s.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},s.release=function(){this.h=this.i=this.g=null},ce("shaka.ads.ServerSideAd",rt),rt.prototype.release=rt.prototype.release,rt.prototype.getPodIndex=rt.prototype.getPodIndex,rt.prototype.getTimeOffset=rt.prototype.getTimeOffset,rt.prototype.getMediaUrl=rt.prototype.getMediaUrl,rt.prototype.getAdvertiserName=rt.prototype.getAdvertiserName,rt.prototype.getCreativeAdId=rt.prototype.getCreativeAdId,rt.prototype.getAdId=rt.prototype.getAdId,rt.prototype.getVastMediaWidth=rt.prototype.getVastMediaWidth,rt.prototype.getVastMediaHeight=rt.prototype.getVastMediaHeight,rt.prototype.getVastMediaBitrate=rt.prototype.getVastMediaBitrate,rt.prototype.getDescription=rt.prototype.getDescription,rt.prototype.getTitle=rt.prototype.getTitle,rt.prototype.getPositionInSequence=rt.prototype.getPositionInSequence,rt.prototype.getSequenceLength=rt.prototype.getSequenceLength,rt.prototype.setMuted=rt.prototype.setMuted,rt.prototype.resize=rt.prototype.resize,rt.prototype.isLinear=rt.prototype.isLinear,rt.prototype.isMuted=rt.prototype.isMuted,rt.prototype.setVolume=rt.prototype.setVolume,rt.prototype.getVolume=rt.prototype.getVolume,rt.prototype.play=rt.prototype.play,rt.prototype.pause=rt.prototype.pause,rt.prototype.skip=rt.prototype.skip,rt.prototype.canSkipNow=rt.prototype.canSkipNow,rt.prototype.getTimeUntilSkippable=rt.prototype.getTimeUntilSkippable,rt.prototype.isSkippable=rt.prototype.isSkippable,rt.prototype.isPaused=rt.prototype.isPaused,rt.prototype.getRemainingTime=rt.prototype.getRemainingTime,rt.prototype.getMinSuggestedDuration=rt.prototype.getMinSuggestedDuration,rt.prototype.getDuration=rt.prototype.getDuration,rt.prototype.needsSkipUI=rt.prototype.needsSkipUI;function j1(e,t,n,o){var a=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=o,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new ct,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Fe("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(l){BA(a,l)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){a.B.length?a.j.resolve(a.B):a.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),a.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(l){l=l.getAd(),a.m=new rt(l,a.l),a.A&&(a.m.i=a.A),a.i(new Fe("ad-started",new Map().set("ad",a.m))),a.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){a.s.removeAttribute("ad-active");var l=a.l.currentTime;a.o&&a.o>l&&(a.l.currentTime=a.o,a.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(l){a.A=l.getStreamData().adProgressData,a.m&&(a.m.i=a.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){a.i(new Fe("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){a.i(new Fe("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){a.i(new Fe("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){a.i(new Fe("ad-complete")),a.i(new Fe("ad-stopped")),a.s.removeAttribute("ad-active"),a.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){a.i(new Fe("ad-skipped")),a.i(new Fe("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(l){var u=l.getStreamData();l=[],u=w(u.cuepoints);for(var c=u.next();!c.done;c=u.next())c=c.value,l.push({start:c.start,end:c.end});a.C=l,a.i(new Fe("ad-cue-points-changed",new Map().set("cuepoints",l)))})}s=j1.prototype,s.configure=function(){},s.stop=function(){this.B="",this.o=null,this.C=[]},s.release=function(){this.stop(),this.h&&this.h.release()},s.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},s.getCuePoints=function(){return this.C};function BA(e,t){e.i(new Fe("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var o=e.g.previousCuePointForStreamTime(n);o&&!o.played&&(e.o=n,e.l.currentTime=o.start)}})}function Ye(){Lt.call(this),this.g=this.h=this.i=this.j=null,this.m=new R1,this.o=navigator.language,this.l=null}K(Ye,Lt),s=Ye.prototype,s.setLocale=function(e){this.o=e},s.configure=function(e){this.l=e,this.j&&this.j.configure(this.l),this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},s.initInterstitial=function(e,t,n){var o=this;this.j&&this.j.release(),this.j=new df(e,t,n,function(a){return pf(o,a)}),this.j.configure(this.l)},s.initClientSide=function(e,t,n){var o=this;if(!d.google||!google.ima||!google.ima.AdsLoader)throw new J(2,10,1e4);this.i&&this.i.release(),this.i=new ff(e,t,this.o,n,function(a){return pf(o,a)}),this.i.configure(this.l)},s.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Lt.prototype.release.call(this)},s.onAssetUnload=function(){this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Fe("ad-stopped")),this.dispatchEvent(new Fe("ad-content-attach-requested")),this.m=new R1},s.requestClientSideAds=function(e){if(!this.i)throw new J(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},s.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new J(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},s.initMediaTailor=function(e,t,n){var o=this;this.h&&this.h.release(),this.h=new el(e,t,n,function(a){return pf(o,a)})},s.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new J(1,10,10005);var o=this.h;return n=n===void 0?"":n,o.l?e=Promise.reject(new J(1,10,10004)):(o.l=new Bt,DA(o,e,t),o.H=n||"",o.U=Date.now()/1e3,e=o.l),e},s.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new J(1,10,10005);var t=this.h;t.G=e,t.i(new Fe("ads-loaded",new Map().set("loadTime",0)))},s.initServerSide=function(e,t){var n=this;if(!d.google||!google.ima||!google.ima.dai)throw new J(2,10,10002);this.g&&this.g.release(),this.g=new j1(e,t,this.o,function(o){return pf(n,o)}),this.g.configure(this.l)},s.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new J(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Ve('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.10.12",n=this.g,n.j?e=Promise.reject(new J(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Bt,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},s.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new J(1,10,10003);(e.mpt||e.mpv)&&Ve('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.10.12",this.g.g.replaceAdTagParameters(e)},s.getServerSideCuePoints=function(){return Ct("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},s.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},s.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:IA(e),started:e.h,playedCompletely:e.j,skipped:e.l,errors:e.i}},s.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},s.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},s.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},s.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},s.onInterstitialMetadata=function(e,t,n){this.j||this.initInterstitial(null,e,t),this.j&&_A(this.j,n)};function pf(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;break;case"ad-complete":e.m.j++;break;case"ad-skipped":e.m.l++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}ce("shaka.ads.AdManager",Ye),Ye.prototype.onInterstitialMetadata=Ye.prototype.onInterstitialMetadata,Ye.prototype.onCueMetadataChange=Ye.prototype.onCueMetadataChange,Ye.prototype.onHlsTimedMetadata=Ye.prototype.onHlsTimedMetadata,Ye.prototype.onDashTimedMetadata=Ye.prototype.onDashTimedMetadata,Ye.prototype.onManifestUpdated=Ye.prototype.onManifestUpdated,Ye.prototype.getStats=Ye.prototype.getStats,Ye.prototype.getCuePoints=Ye.prototype.getCuePoints,Ye.prototype.getServerSideCuePoints=Ye.prototype.getServerSideCuePoints,Ye.prototype.replaceServerSideAdTagParameters=Ye.prototype.replaceServerSideAdTagParameters,Ye.prototype.requestServerSideStream=Ye.prototype.requestServerSideStream,Ye.prototype.initServerSide=Ye.prototype.initServerSide,Ye.prototype.addMediaTailorTrackingUrl=Ye.prototype.addMediaTailorTrackingUrl,Ye.prototype.requestMediaTailorStream=Ye.prototype.requestMediaTailorStream,Ye.prototype.initMediaTailor=Ye.prototype.initMediaTailor,Ye.prototype.updateClientSideAdsRenderingSettings=Ye.prototype.updateClientSideAdsRenderingSettings,Ye.prototype.requestClientSideAds=Ye.prototype.requestClientSideAds,Ye.prototype.onAssetUnload=Ye.prototype.onAssetUnload,Ye.prototype.release=Ye.prototype.release,Ye.prototype.initClientSide=Ye.prototype.initClientSide,Ye.prototype.initInterstitial=Ye.prototype.initInterstitial,Ye.prototype.configure=Ye.prototype.configure,Ye.prototype.setLocale=Ye.prototype.setLocale,Ye.ADS_LOADED="ads-loaded",Ye.AD_STARTED="ad-started",Ye.AD_FIRST_QUARTILE="ad-first-quartile",Ye.AD_MIDPOINT="ad-midpoint",Ye.AD_THIRD_QUARTILE="ad-third-quartile",Ye.AD_COMPLETE="ad-complete",Ye.AD_STOPPED="ad-stopped",Ye.AD_SKIPPED="ad-skipped",Ye.AD_VOLUME_CHANGED="ad-volume-changed",Ye.AD_MUTED="ad-muted",Ye.AD_PAUSED="ad-paused",Ye.AD_RESUMED="ad-resumed",Ye.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Ye.CUEPOINTS_CHANGED="ad-cue-points-changed",Ye.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Ye.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Ye.AD_CLICKED="ad-clicked",Ye.AD_PROGRESS="ad-progress",Ye.AD_BUFFERING="ad-buffering",Ye.AD_IMPRESSION="ad-impression",Ye.AD_DURATION_CHANGED="ad-duration-changed",Ye.AD_CLOSED="ad-closed",Ye.AD_LOADED="ad-loaded",Ye.ALL_ADS_COMPLETED="all-ads-completed",Ye.AD_LINEAR_CHANGED="ad-linear-changed",Ye.AD_METADATA="ad-metadata",Ye.AD_RECOVERABLE_ERROR="ad-recoverable-error",Ye.AD_ERROR="ad-error",Ye.AD_BREAK_READY="ad-break-ready",Ye.AD_INTERACTION="ad-interaction",Ye.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Ye.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Ye.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",uf=function(){return new Ye};function F1(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Fe){var o={};for(a in n)(t=n[a])&&typeof t=="object"?a=="detail"&&(o[a]=t):a in Event||(o[a]=t);return o}if(n instanceof Error){var a=new Set(["name","message","stack"]);for(o in n)a.add(o);for(o=w(Object.getOwnPropertyNames(n)),t=o.next();!t.done;t=o.next())a.add(t.value);for(o={},a=w(a),t=a.next();!t.done;t=a.next())t=t.value,o[t]=n[t];n={__type__:"Error",contents:o}}else if(n instanceof TimeRanges){for(a={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=w(tr(n)),o=n.next();!o.done;o=n.next())o=o.value,t=o.end,a.start.push(o.start),a.end.push(t);n=a}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function Zd(e){return JSON.parse(e,function(t,n){if(n=="NaN")var o=NaN;else if(n=="-Infinity")o=-1/0;else if(n=="Infinity")o=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")o=jA(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")o=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(o in t)n[o]=t[o];o=n}else o=n;return o})}function jA(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var $1="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),FA="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Qd=["loop","playbackRate"],$A=["pause","play"],gf={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10,isFullyLoaded:1},mf={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Jd={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},z1=[["getConfiguration","configure"]],V1=[["isTextTrackVisible","setTextTrackVisibility"]],zA="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),VA=["attach","attachCanvas","detach","load","unload"];function ep(e,t,n,o,a,l,u){var c=this;this.G=e,this.K=u,this.l=new mt(t),this.L=n,this.s=!1,this.A=o,this.F=a,this.N=l,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return tp(c)},this.C=function(p,m){switch(p=Zd(m),p.type){case"event":var v=p.targetName,S=mm(p.event);c.A(v,S);break;case"update":v=p.update;for(S in v){p=c.g[S]||{};for(var E in v[S])p[E]=v[S][E]}c.s&&(c.L(),c.s=!1);break;case"asyncComplete":if(S=p.id,E=p.error,p=c.i[S],delete c.i[S],p)if(E){S=new J(E.severity,E.category,E.code);for(v in E)S[v]=E[v];p.reject(S)}else p.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,nl.add(this)}s=ep.prototype,s.destroy=function(){return nl.delete(this),np(this),Zi&&G1(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},s.fb=function(){return this.h},s.Ff=function(){return this.I},s.init=function(){if(this.G.length)if(d.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.tc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=w(nl),o=n.next();!o.done;o=n.next()){o=o.value;var a=t;o.j=new Bt,o.s=!0,yf(o,a)}},function(t){for(var n=w(nl),o=n.next();!o.done;o=n.next())o=o.value,vf=t=="available",o.l.tc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),vf&&this.l.Y(GA),(e=Zi)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Bt,this.s=!0,yf(this,e)):Zi=null}else d.__onGCastApiAvailable!==X1&&(xf=d.__onGCastApiAvailable||null,d.__onGCastApiAvailable=X1)},s.Nf=function(e){this.o=e,this.h&&tl(this,{type:"appData",appData:this.o})},s.cast=function(){var e=this;return F(function(t){if(!e.m)throw new J(1,8,8e3);if(!vf)throw new J(1,8,8001);if(e.h)throw new J(1,8,8002);return e.j=new Bt,chrome.cast.requestSession(function(n){return yf(e,n)},function(n){return H1(e,n)}),A(t,e.j,0)})};function HA(e){e.h&&chrome.cast.requestSession(function(t){return yf(e,t)},function(t){return H1(e,t)})}s.Cc=function(){if(this.h){if(np(this),Zi){G1(this);try{Zi.stop(function(){},function(){})}catch{}Zi=null}tp(this)}},s.get=function(e,t){var n=this;if(e=="video"){if($A.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(L(Ue.apply(0,arguments))))}}else if(e=="player"){if(Jd[t]&&!this.get("player","isLive")())return function(){};if(zA.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(L(Ue.apply(0,arguments))))};if(VA.includes(t))return function(){return n.Ki.apply(n,[e,t].concat(L(Ue.apply(0,arguments))))};if(gf[t]||mf[t])return function(){return n.g[e][t]}}return this.g[e][t]},s.set=function(e,t,n){this.g[e][t]=n,tl(this,{type:"set",targetName:e,property:t,value:n})};function yf(e,t){var n=e.N();Zi=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),tp(e),tl(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function H1(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new J(2,8,n,t))}s.Ug=function(e,t){tl(this,{type:"call",targetName:e,methodName:t,args:Ue.apply(2,arguments)})},s.Ki=function(e,t){var n=Ue.apply(2,arguments),o=new Bt,a=this.H.toString();this.H++,this.i[a]=o;try{tl(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:a})}catch(l){o.reject(l)}return o};function G1(e){var t=Zi;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function tp(e){var t=Zi?Zi.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};np(e)}e.h=t,e.I=t?Zi.receiver.friendlyName:"",e.l.tc()}function np(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new J(1,7,7e3))}}function tl(e,t){t=F1(t);var n=Zi;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},pt)}catch(o){throw t=new J(2,8,8005,o),n=new Fe("error",new Map().set("detail",t)),e.A("player",n),e.Cc(),t}}var GA=.02,vf=!1,Zi=null,xf=null,nl=new Set;function X1(e){if(xf?d.__onGCastApiAvailable=xf:delete d.__onGCastApiAvailable,xf=null,e)for(var t=w(nl),n=t.next();!n.done;n=t.next())n.value.init();typeof d.__onGCastApiAvailable=="function"&&d.__onGCastApiAvailable(e)}function mn(e,t,n,o){o=o===void 0?!1:o,Lt.call(this);var a=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=o,this.A=new Map,this.g=new ep(n,function(){return q1(a)},function(){return K1(a)},function(l,u){return Q1(a,l,u)},function(){return Z1(a)},function(){return Y1(a)},o),XA(this)}K(mn,Lt),s=mn.prototype,s.destroy=function(e){return e&&this.g.Cc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Lt.prototype.release.call(this),Promise.all(e)},s.fi=function(){return this.l},s.Vh=function(){return this.s},s.Ah=function(){return this.g.m&&vf},s.fb=function(){return this.g.fb()},s.Ff=function(){return this.g.Ff()},s.cast=function(){var e=this;return F(function(t){return t.g==1?A(t,e.g.cast(),2):e.h?A(t,e.h.bc(),0):t.return()})},s.Nf=function(e){this.g.Nf(e)},s.$i=function(){HA(this.g)},s.Cc=function(){this.g.Cc()},s.Bh=function(e,t){t=t===void 0?!1:t;var n=this;return F(function(o){if(o.g==1)return e==n.C&&t==n.B?o.return():(n.C=e,n.B=t,n.g.Cc(),A(o,n.g.destroy(),2));n.g=null,n.g=new ep(e,function(){return q1(n)},function(){return K1(n)},function(a,l){return Q1(n,a,l)},function(){return Z1(n)},function(){return Y1(n)},t),n.g.init(),Y(o)})};function XA(e){e.g.init(),e.m=new ct;for(var t=w($1),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(l){e.g.fb()||(l=mm(l),e.j.dispatchEvent(l))});for(var o in wu)e.m.D(e.h,wu[o],function(l){e.g.fb()||e.o.dispatchEvent(l)});e.l={},t={};for(var a in e.i)t={nd:t.nd},t.nd=a,Object.defineProperty(e.l,t.nd,{configurable:!1,enumerable:!0,get:function(l){return function(){return YA(e,l.nd)}}(t),set:function(l){return function(u){var c=l.nd;e.g.fb()?e.g.set("video",c,u):e.i[c]=u}}(t)});e.s={},W1(e,function(l){Object.defineProperty(e.s,l,{configurable:!1,enumerable:!0,get:function(){return qA(e,l)}})}),WA(e),e.j=new Lt,e.j.me=e.l,e.o=new Lt,e.o.me=e.s}function WA(e){var t=new Map;W1(e,function(n,o){t.has(o)?(o=t.get(o),n.length<o.length?e.A.set(n,o):e.A.set(o,n)):t.set(o,n)})}function W1(e,t){function n(p){return p=="constructor"||typeof o[p]!="function"?!1:!a.has(p)}var o=e.h,a=new Set,l;for(l in o)n(l)&&(a.add(l),t(l,o[l]));for(e=Object.getPrototypeOf(o),l=Object.getPrototypeOf({});e&&e!=l;){for(var u=w(Object.getOwnPropertyNames(e)),c=u.next();!c.done;c=u.next())c=c.value,n(c)&&(a.add(c),t(c,o[c]));e=Object.getPrototypeOf(e)}}function Y1(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dc(),startTime:null};e.i.pause();for(var n=w(Qd),o=n.next();!o.done;o=n.next())o=o.value,t.video[o]=e.i[o];for(e.i.ended||(t.startTime=e.i.currentTime),n=w(z1),o=n.next();!o.done;o=n.next()){var a=o.value;o=a[1],a=e.h[a[0]](),t.player[o]=a}for(n=w(V1),o=n.next();!o.done;o=n.next())a=o.value,o=a[1],a=e.h[a[0]](),t.playerAfterLoad[o]=a;return t}function q1(e){var t=new Fe("caststatuschanged");e.dispatchEvent(t)}function K1(e){var t=new Fe(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Z1(e){for(var t=w(z1),n=t.next();!n.done;n=t.next()){var o=n.value;n=o[1],o=e.g.get("player",o[0])(),e.h[n](o)}var a=e.g.get("player","getAssetUri")();o=e.g.get("video","ended"),t=Promise.resolve();var l=e.i.autoplay;n=null,o||(n=e.g.get("video","currentTime"));var u;(o=e.g.get("player","getTextTracks")())&&o.length&&(u=o.find(function(m){return m.active}));var c=e.g.get("player","isTextTrackVisible")();a&&(e.i.autoplay=!1,t=e.h.load(a,n));var p={};for(n=w(Qd),o=n.next();!o.done;o=n.next())o=o.value,p[o]=e.g.get("video",o);t.then(function(){if(e.i){for(var m=w(Qd),v=m.next();!v.done;v=m.next())v=v.value,e.i[v]=p[v];for(m=w(V1),v=m.next();!v.done;v=m.next()){var S=v.value;v=S[1],S=e.g.get("player",S[0])(),e.h[v](S)}e.h.eh(c),u&&e.h.Lf(u.language,u.roles,u.forced),e.i.autoplay=l,a&&e.i.play()}},function(m){m=new Map().set("detail",m),m=new Fe("error",m),e.h.dispatchEvent(m)})}function YA(e,t){if(t=="addEventListener")return function(o,a,l){return e.j.addEventListener(o,a,l)};if(t=="removeEventListener")return function(o,a,l){return e.j.removeEventListener(o,a,l)};if(e.g.fb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.fb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function qA(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,o,a){return e.o.addEventListener(n,o,a)};if(t=="removeEventListener")return function(n,o,a){return e.o.removeEventListener(n,o,a)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.xb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.ug()};if(t=="setVideoContainer")return function(n){return e.h.ih(n)};if(e.g.fb()){if(t=="getManifest"||t=="drmInfo")return function(){return Ve(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return Ve(t+"() does not work while casting!"),Promise.resolve()}}return e.g.fb()&&Object.keys(e.g.g.video).length==0&&(gf[t]||mf[t])||!e.g.fb()?e.h[t].bind(e.h):e.g.get("player",t)}function Q1(e,t,n){e.g.fb()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}ce("shaka.cast.CastProxy",mn),mn.prototype.changeReceiverId=mn.prototype.Bh,mn.prototype.forceDisconnect=mn.prototype.Cc,mn.prototype.suggestDisconnect=mn.prototype.$i,mn.prototype.setAppData=mn.prototype.Nf,mn.prototype.cast=mn.prototype.cast,mn.prototype.receiverName=mn.prototype.Ff,mn.prototype.isCasting=mn.prototype.fb,mn.prototype.canCast=mn.prototype.Ah,mn.prototype.getPlayer=mn.prototype.Vh,mn.prototype.getVideo=mn.prototype.fi,mn.prototype.destroy=mn.prototype.destroy;function Nn(e,t,n,o){Lt.call(this);var a=this;this.g=e,this.h=t,this.j=new ct,this.H={video:e,player:t},this.F=n||function(){},this.I=o||function(l){return l},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new mt(function(){ip(a)}),KA(this)}K(Nn,Lt),s=Nn.prototype,s.isConnected=function(){return this.G},s.mi=function(){return this.o},s.Wi=function(e){this.i=e},s.Dh=function(){this.i=null},s.Xi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},s.Vi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},s.Ui=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},s.destroy=function(){var e=this,t,n;return F(function(o){if(o.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.s=null,Lt.prototype.release.call(e),A(o,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),Y(o)})};function KA(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return J1(e)},t.onSenderDisconnected=function(){return J1(e)},t.onSystemVolumeChanged=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();a&&Bo(e,{type:"update",update:{video:{volume:a.level,muted:a.muted}}},e.l),Bo(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(a){return JA(e,a)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(a){return QA(e,a)},t.start(),t=w($1);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(a){return ev(e,"video",a)});for(var o in wu)e.j.D(e.h,wu[o],function(a){return ev(e,"player",a)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,Ls(e)}),e.j.D(e.g,"playing",function(){e.o=!1,Ls(e)}),e.j.D(e.g,"pause",function(){Ls(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,Ls(e)}),e.j.D(e.g,"ended",function(){new mt(function(){e.g&&e.g.ended&&(e.o=!0,Ls(e))}).Y(tb)})}function J1(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,Ls(e)}function Ls(e){var t;F(function(n){if(n.g==1)return A(n,Promise.resolve(),2);if(!e.h)return n.return();t=new Fe("caststatuschanged"),e.dispatchEvent(t),tv(e)||jo(e),Y(n)})}function ZA(e,t,n){var o,a,l,u,c,p,m,v,S,E;F(function(T){switch(T.g){case 1:for(o in t.player)a=t.player[o],e.h[o](a);return e.F(n),l=e.g.autoplay,t.manifest?(e.g.autoplay=!1,le(T,5),A(T,e.h.load(t.manifest,t.startTime),7)):A(T,Promise.resolve(),3);case 7:de(T,3);break;case 5:return u=se(T),c=new Map().set("detail",u),p=new Fe("error",c),e.h&&e.h.dispatchEvent(p),T.return();case 3:if(!e.h)return T.return();for(m in t.video)v=t.video[m],e.g[m]=v;for(S in t.playerAfterLoad)E=t.playerAfterLoad[S],e.h[S](E);e.g.autoplay=l,t.manifest&&(e.g.play(),jo(e)),Y(T)}})}function ev(e,t,n){e.h&&(ip(e),Bo(e,{type:"event",targetName:t,event:n},e.l))}function ip(e){e.C.Y(eb);for(var t={video:{},player:{}},n=w(FA),o=n.next();!o.done;o=n.next())o=o.value,t.video[o]=e.g[o];if(e.h.V())for(var a in Jd)e.m%Jd[a]==0&&(t.player[a]=e.h[a]());for(var l in gf)e.m%gf[l]==0&&(t.player[l]=e.h[l]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Bo(e,{type:"update",update:t},e.l);for(var u in mf)e.m%mf[u]==0&&(t={player:{}},t.player[u]=e.h[u](),Bo(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),tv(e)}function tv(e){return e.A&&(e.g.duration||e.h.V())?(op(e),e.A=!1,!0):!1}function op(e,t){var n={contentId:e.h.Dc(),streamType:e.h.V()?"LIVE":"BUFFERED",contentType:""};e.h.V()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),jo(e,t===void 0?0:t,n)}function QA(e,t){var n=Zd(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,ZA(e,n.initState,n.appData),ip(e);break;case"appData":e.F(n.appData);break;case"set":var o=n.targetName,a=n.property;if(n=n.value,o=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),a=="volume"){t.setSystemVolumeLevel(n);break}else if(a=="muted"){t.setSystemVolumeMuted(n);break}}e.H[o][a]=n;break;case"call":o=e.H[n.targetName],o[n.methodName].apply(o,n.args);break;case"asyncCall":o=n.targetName,a=n.methodName,o=="player"&&a=="load"&&(e.m=0,e.B=!1);var l=n.id,u=t.senderId;t=e.H[o],n=t[a].apply(t,n.args),o=="player"&&a=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return nv(e,u,l,null)},function(c){return nv(e,u,l,c)})}}function JA(e,t){var n=Zd(t.data);switch(n.type){case"PLAY":e.g.play(),jo(e);break;case"PAUSE":e.g.pause(),jo(e);break;case"SEEK":t=n.currentTime;var o=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),o&&o=="PLAYBACK_START"?(e.g.play(),jo(e)):o&&o=="PLAYBACK_PAUSE"&&(e.g.pause(),jo(e));break;case"STOP":e.h.bc().then(function(){e.h&&jo(e)});break;case"GET_STATUS":op(e,Number(n.requestId));break;case"VOLUME":o=n.volume,t=o.level,o=o.muted;var a=e.g.volume,l=e.g.muted;t!=null&&(e.g.volume=Number(t)),o!=null&&(e.g.muted=o),a==e.g.volume&&l==e.g.muted||jo(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,o=n.currentTime,a=e.I(t.contentId),l=n.autoplay||!0,e.F(t.customData),l&&(e.g.autoplay=!0),e.h.load(a,o).then(function(){e.h&&op(e)}).catch(function(u){var c="LOAD_FAILED";u.category==7&&u.code==7e3&&(c="LOAD_CANCELLED"),Bo(e,{requestId:Number(n.requestId),type:c},e.s)});break;default:Bo(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function nv(e,t,n,o){e.h&&Bo(e,{type:"asyncComplete",id:n,error:o},e.l,t)}function Bo(e,t,n,o){e.G&&(e=F1(t),o?n.getCastChannel(o).send(e):n.broadcast(e))}function jo(e,t,n){n=n===void 0?null:n;var o={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?nb:e.h.pf()?ob:e.g.paused?rb:ib,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(o.media=n),Bo(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[o]},e.s)}ce("shaka.cast.CastReceiver",Nn),Nn.prototype.destroy=Nn.prototype.destroy,Nn.prototype.setContentArtist=Nn.prototype.Ui,Nn.prototype.setContentImage=Nn.prototype.Vi,Nn.prototype.setContentTitle=Nn.prototype.Xi,Nn.prototype.clearContentMetadata=Nn.prototype.Dh,Nn.prototype.setContentMetadata=Nn.prototype.Wi,Nn.prototype.isIdle=Nn.prototype.mi,Nn.prototype.isConnected=Nn.prototype.isConnected;var eb=.5,tb=5,nb="IDLE",ib="PLAYING",ob="BUFFERING",rb="PAUSED";function iv(e,t,n,o,a){if(o>=a)return null;for(var l=-1,u=-1,c=0;c<n.length;c++)if(n[c].some(function(P){return P!=null&&P.g.trim()!=""})){l=c;break}for(c=n.length-1;0<=c;c--)if(n[c].some(function(P){return P!=null&&P.g.trim()!=""})){u=c;break}if(l===-1||u===-1)return null;for(var p=c=!1,m="white",v="black",S=rp(o,a,c,p,m,v);l<=u;l++){for(var E=n[l],T=-1,k=-1,M=0;M<E.length;M++)if(E[M]!=null&&E[M].g.trim()!==""){T=M;break}for(M=E.length-1;0<=M;M--)if(E[M]!=null&&E[M].g.trim()!==""){k=M;break}if(T===-1||k===-1)E=ov(o,a),e.nestedCues.push(E);else{for(;T<=k;T++)if(M=E[T]){var I=M.l,U=M.i,N=M.j,z=M.h;(I!=c||U!=p||N!=m||z!=v)&&(S.payload&&e.nestedCues.push(S),S=rp(o,a,I,U,N,z),c=I,p=U,m=N,v=z),S.payload+=M.g}else S.payload+=" ";S.payload&&e.nestedCues.push(S),l!==u&&(S=ov(o,a),e.nestedCues.push(S)),S=rp(o,a,c,p,m,v)}}return e.nestedCues.length?{cue:e,stream:t}:null}function rp(e,t,n,o,a,l){return e=new jt(e,t,""),n&&e.textDecoration.push("underline"),o&&(e.fontStyle="italic"),e.color=a,e.backgroundColor=l,e}function ov(e,t){return e=new jt(e,t,""),e.lineBreak=!0,e}function rv(e,t,n,o,a){this.g=e,this.l=t,this.i=n,this.h=o,this.j=a}function sp(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",il(this)}function wf(e,t,n){var o="CC"+((e.A<<1|e.s)+1),a=new jt(t,n,"");a.lineInterpretation=1;var l=lv.get(e.g);return l&&(a.line=l),(t=iv(a,o,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(l=lv.get(e.g+3-t.cue.nestedCues.length))&&(a.line=l),t}function il(e){Fo(e,0,15),e.g=1}function Ps(e,t,n){if(!(32>n||127<n)){var o="";switch(t){case 0:o=av.has(n)?av.get(n):String.fromCharCode(n);break;case 1:o=sb.get(n);break;case 2:e.i[e.g].pop(),o=ab.get(n);break;case 3:e.i[e.g].pop(),o=lb.get(n)}o&&e.i[e.g].push(new rv(o,e.m,e.j,e.o,e.l))}}function sv(e,t,n,o){if(!(0>n||0>t))if(t>=n)for(--o;0<=o;o--)e.i[t+o]=e.i[n+o].map(function(l){return l});else for(var a=0;a<o;a++)e.i[t+a]=e.i[n+a].map(function(l){return l})}function Fo(e,t,n){for(var o=0;o<=n;o++)e.i[t+o]=[]}var av=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),sb=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),ab=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),lb=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),lv=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Sf(e,t){this.h=0,this.o=new sp(e,t),this.i=new sp(e,t),this.g=this.j=new sp(e,t),this.l=0,this.m=null}function ap(e,t,n){e.g=e.i;var o=e.g,a=null;return e.h!==3&&e.h!==4&&(a=wf(o,e.l,n),n=e.i,n.g=0<n.h?n.h:0,Fo(n,0,15),n=e.j,n.g=0<n.h?n.h:0,Fo(n,0,15),o.g=15),e.h=3,o.h=t,a}function uv(e){e.h=1,e.g=e.j,e.g.h=0}function fv(e){dt("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var ub="black green blue cyan red yellow magenta black".split(" "),cv="white green blue cyan red yellow magenta white_italics".split(" ");function hv(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",lp(this)}function lp(e){e.i=[];for(var t=0;16>t;t++)e.i.push(up())}function up(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Ur(e,t){dv(e)&&(e.i[e.h][e.g]=new rv(t,e.C,e.A,e.s,e.B),e.g++)}function dv(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}hv.prototype.isVisible=function(){return this.l};function Br(e,t,n){var o=new jt(e.j,t,"");o.textAlign=e.F===0?"left":e.F===1?"right":Co;var a=o.region;switch(e.I&&(a.id+="svc"+e.I),a.id+="win"+e.N,a.height=e.o,a.width=e.m,a.heightUnits=2,a.widthUnits=2,a.viewportAnchorX=e.H,a.viewportAnchorY=e.L,a.viewportAnchorUnits=e.K?nn:2,e.G){case 0:a.regionAnchorX=0,a.regionAnchorY=0;break;case 1:a.regionAnchorX=50,a.regionAnchorY=0;break;case 2:a.regionAnchorX=100,a.regionAnchorY=0;break;case 3:a.regionAnchorX=0,a.regionAnchorY=50;break;case 4:a.regionAnchorX=50,a.regionAnchorY=50;break;case 5:a.regionAnchorX=100,a.regionAnchorY=50;break;case 6:a.regionAnchorX=0,a.regionAnchorY=100;break;case 7:a.regionAnchorX=50,a.regionAnchorY=100;break;case 8:a.regionAnchorX=100,a.regionAnchorY=100}return(n=iv(o,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function fb(){this.i=[],this.h=null,this.g=0}function cb(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new Cf(e.h)),e.h=null,e.g=0))}function Cf(e){this.g=0,this.h=e}Cf.prototype.na=function(){return this.g<this.h.length},Cf.prototype.va=function(){return this.g};function Mn(e){if(!e.na())throw new J(2,2,3e3);return e.h[e.g++]}Cf.prototype.skip=function(e){if(this.g+e>this.h.length)throw new J(2,2,3e3);this.g+=e};function hb(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function db(e,t,n,o){if(128<=n&&135>=n)o=n&7,e.h[o]&&(e.g=e.h[o]);else{if(n===136){n=Mn(t).value,t=null,n=w(ol(e,n));for(var a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()&&(t=Br(a,o,e.i)),lp(a);return t}if(n===137)for(t=Mn(t).value,t=w(ol(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=o),n.l=!0;else{if(n===138){for(n=Mn(t).value,t=null,n=w(ol(e,n)),a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()&&(t=Br(a,o,e.i)),a.l=!1;return t}if(n===139){for(n=Mn(t).value,t=null,n=w(ol(e,n)),a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()?t=Br(a,o,e.i):a.j=o,a.l=!a.l;return t}if(n===140)return t=Mn(t).value,pv(e,t,o);if(n===143)return o=pv(e,255,o),gv(e),o;if(n===144)t.skip(1),o=Mn(t).value,e.g&&(e.g.A=0<(o&128),e.g.C=0<(o&64));else if(n===145)o=Mn(t).value,n=Mn(t).value,t.skip(1),e.g&&(t=mv((n&48)>>4,(n&12)>>2,n&3),e.g.B=mv((o&48)>>4,(o&12)>>2,o&3),e.g.s=t);else if(n===146)o=Mn(t).value,t=Mn(t).value,e.g&&(e=e.g,e.h=o&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),o=Mn(t).value,t.skip(1),e.g&&(e.g.F=o&3);else if(152<=n&&159>=n){if(n=(n&15)-8,a=e.h[n]!==null,!a){var l=new hv(n,e.i);l.j=o,e.h[n]=l}o=Mn(t).value,l=Mn(t).value;var u=Mn(t).value,c=Mn(t).value,p=Mn(t).value;t=Mn(t).value,a&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(o&32),t.L=l&127,t.H=u,t.G=(c&240)>>4,t.K=0<(l&128),t.o=(c&15)+1,t.m=(p&63)+1,e.g=e.h[n]}}}return null}function ol(e,t){for(var n=[],o=0;8>o;o++)(t&1)===1&&e.h[o]&&n.push(o),t>>=1;return n}function pv(e,t,n){var o=null;t=w(ol(e,t));for(var a=t.next();!a.done;a=t.next()){a=a.value;var l=e.h[a];l.isVisible()&&(o=Br(l,n,e.i)),e.h[a]=null}return o}function gv(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function mv(e,t,n){var o={0:0,1:0,2:1,3:1};return e=o[e],t=o[t],n=o[n],pb[e<<2|t<<1|n]}var yv=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),pb="black blue green cyan red magenta yellow white".split(" ");function Ds(){this.h=[],this.g=[],this.i=new fb,this.l=0,this.m=new Map([["CC1",new Sf(0,0)],["CC2",new Sf(0,1)],["CC3",new Sf(1,0)],["CC4",new Sf(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,fp(this)}Ds.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,fp(this),e=w(this.j.values());for(var t=e.next();!t.done;t=e.next())gv(t.value)};function fp(e){e.o=0,e.s=0;for(var t=w(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,il(n.i),il(n.j),il(n.o);e.B=!0}Ds.prototype.extract=function(e,t){if(this.B){for(var n=w(this.m.values()),o=n.next();!o.done;o=n.next())o.value.l=t;this.B=!1}if(e=new $t(e,0),!(8>e.getLength())&&e.T()===181&&e.la()===49&&e.P()===1195456820&&e.T()===3&&(n=e.T(),(n&64)!==0))for(n&=31,e.skip(1),o=0;o<n;o++){var a=e.T(),l=(a&4)>>2,u=e.T(),c=e.T();l&&(a&=3,a===0||a===1?this.h.push({pts:t,type:a,bb:u,Cb:c,order:this.h.length}):(this.g.push({pts:t,type:a,value:u,order:this.g.length}),this.g.push({pts:t,type:2,value:c,order:this.g.length})))}},Ds.prototype.decode=function(){function e(a,l){return a.pts-l.pts||a.order-l.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=w(this.h),o=n.next();!o.done;o=n.next())(o=gb(this,o.value))&&t.push(o);for(n=w(this.g),o=n.next();!o.done;o=n.next())cb(this.i,o.value);for(n=w(this.i.i),o=n.next();!o.done;o=n.next())o=mb(this,o.value),t.push.apply(t,L(o));return this.i.i=[],this.h=[],this.g=[],t};function gb(e,t){var n=t.type;if((t.bb&112)===16){var o=t.bb>>3&1;n===0?e.o=o:e.s=o}if(o="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(o),t.bb===255&&t.Cb===255||!t.bb&&!t.Cb||!vv(t.bb)||!vv(t.Cb))return 45<=++e.l&&fp(e),null;e.l=0,t.bb&=127,t.Cb&=127;var a=t.bb;if(1<=a&&15>=a||!t.bb&&!t.Cb)return null;if(a=null,(t.bb&112)===16)e:{if(e.A.add(o),o=t.bb,e=t.Cb,n.m===(o<<8|e))n.m=null;else if(n.m=o<<8|e,(o&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(o&7)<<1|e>>5&1];var l=(e&30)>>1;o="white",a=!1,7>l?o=cv[l]:l===7&&(a=!0),e=(e&1)===1,n.h!==4&&(l=n.g,n.h===3&&t!==l.g&&(n=1+t-l.h,sv(l,n,1+l.g-l.h,l.h),Fo(l,0,n-1),Fo(l,t+1,15-t)),l.g=t,l.m=e,l.j=a,l.l=o,l.o="black")}else if((o&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",Ps(n.g,0,32),o=!1,t=cv[(e&14)>>1],t==="white_italics"&&(t="white",o=!0),n.g.m=(e&1)===1,n.g.j=o,n.g.l=t;else if((o&247)===16&&(e&240)===32||(o&247)===23&&(e&255)===45)t="black",!(o&7)&&(t=ub[(e&14)>>1]),n.g.o=t;else if((o&247)===17&&(e&240)===48)Ps(n.g,1,e);else if((o&246)===18&&(e&224)===32)Ps(n.g,o&1?3:2,e);else if((o&246)===20&&(e&240)===32){switch(e=t.pts,o=null,t.Cb){case 32:uv(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:o=ap(n,2,e);break;case 38:o=ap(n,3,e);break;case 39:o=ap(n,4,e);break;case 40:Ps(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:il(n.o),fv(n);break;case 43:fv(n);break;case 44:t=n.i,o=null,n.h!==4&&(o=wf(t,n.l,e)),Fo(t,0,15);break;case 45:t=n.g,n.h!==3?o=null:(o=wf(t,n.l,e),a=t.g-t.h+1,sv(t,a-1,a,t.h),Fo(t,0,a-1),Fo(t,t.g,15-t.g),n.l=e);break;case 46:Fo(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=wf(n.i,n.l,e)),o=n.j,n.j=n.i,n.i=o,uv(n),n.l=e,o=t}a=o;break e}a=null}else e=t.Cb,Ps(n.g,0,t.bb),Ps(n.g,0,e);return a}function mb(e,t){var n=[];try{for(;t.na();){var o=Mn(t).value,a=(o&224)>>5,l=o&31;if(a===7&&l!=0&&(a=Mn(t).value&63),a!=0){e.A.add("svc"+a),e.j.has(a)||e.j.set(a,new hb(a));for(var u=e.j.get(a),c=t.va();t.va()-c<l;){a=u;var p=t,m=Mn(p),v=m.value,S=m.pts;if(v===16){var E=Mn(p);v=v<<16|E.value}if(0<=v&&31>=v){p=a;var T=v,k=S;if(p.g){var M=p.g;switch(a=null,T){case 8:!dv(M)||0>=M.g&&0>=M.h||(0>=M.g?(M.g=M.m-1,M.h--):M.g--,M.i[M.h][M.g]=null);break;case 13:if(M.isVisible()&&(a=Br(M,k,p.i)),M.h+1>=M.o){for(p=M,T=0,k=1;16>k;k++,T++)p.i[T]=p.i[k];for(k=0;1>k;k++,T++)p.i[T]=up()}else M.h++;M.g=0;break;case 14:M.isVisible()&&(a=Br(M,k,p.i)),M.i[M.h]=up(),M.g=0;break;case 12:M.isVisible()&&(a=Br(M,k,p.i)),lp(M),p=M,p.h=0,p.g=0}var I=a}else I=null}else if(128<=v&&159>=v)I=db(a,p,v,S);else{if(4096<=v&&4127>=v)a=p,p=v&255,8<=p&&15>=p?a.skip(1):16<=p&&23>=p?a.skip(2):24<=p&&31>=p&&a.skip(3);else if(4224<=v&&4255>=v)a=p,p=v&255,128<=p&&135>=p?a.skip(4):136<=p&&143>=p&&a.skip(5);else if(32<=v&&127>=v)p=v,a.g&&(p===127?Ur(a.g,"♪"):Ur(a.g,String.fromCharCode(p)));else if(160<=v&&255>=v)a.g&&Ur(a.g,String.fromCharCode(v));else if(4128<=v&&4223>=v){if(p=v&255,a.g)if(yv.has(p)){var U=yv.get(p);Ur(a.g,U)}else Ur(a.g,"_")}else 4256<=v&&4351>=v&&a.g&&((v&255)!=160?Ur(a.g,"_"):Ur(a.g,"[CC]"));I=null}(a=I)&&n.push(a)}}}}catch(N){if(N instanceof J&&N.code===3e3)dt("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw N}return n}function vv(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}Ds.prototype.getStreams=function(){return Array.from(this.A)},ce("shaka.cea.CeaDecoder",Ds),dn=function(){return new Ds};function xv(e){for(var t=[],n=e,o=e=0;o<n.length;)e==2&&n[o]==3?(e=0,n=[].concat(L(n)),n.splice(o,1),n=new Uint8Array(n)):n[o]==0?e++:e=0,o++;for(e=n,o=0;o<e.length;){for(n=0;e[o]==255;)n+=255,o++;n+=e[o++];for(var a=0;e[o]==255;)a+=255,o++;a+=e[o++],n==4&&t.push(e.subarray(o,o+a)),o+=a}return t}function Tf(){this.j=new Map,this.i=this.h=0,this.g=cp}Tf.prototype.init=function(e){function t(l){l=l.name,l in Ef&&(n.g=Ef[l])}var n=this,o=[],a=[];if(new zt().box("moov",xt).box("mvex",xt).S("trex",function(l){var u=l.reader;u.skip(4),u.skip(4),l=u.P(),u=u.P(),n.h=l,n.i=u}).box("trak",xt).S("tkhd",function(l){var u=l.reader;l=l.version,l==1?(u.skip(8),u.skip(8)):(u.skip(4),u.skip(4));var c=u.P();l==1?u.skip(8):u.skip(4),u.skip(4),u.skip(8),u.skip(2),u.skip(2),u.skip(2),u.skip(2),u.skip(36),u.la(),u.la(),u.la(),u.la(),o.push(c)}).box("mdia",xt).S("mdhd",function(l){l=Lu(l.reader,l.version),a.push(l.timescale)}).box("minf",xt).box("stbl",xt).S("stsd",Qo).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",li).box("sinf",xt).box("frma",function(l){l=oy(l.reader).codec,l in Ef&&(n.g=Ef[l])}).parse(e,!0),!o.length||!a.length||o.length!=a.length)throw new J(2,2,2010);this.g==cp&&Ve("Unable to determine bitstream format for CEA parsing!"),o.forEach(function(l,u){n.j.set(l,a[u])})},Tf.prototype.parse=function(e){var t=this;if(this.g==cp)return[];var n=[],o=0,a=[];return new zt().box("moof",function(l){o=l.start,a=[],xt(l)}).box("traf",function(l){a.push({baseMediaDecodeTime:null,Yc:t.h,Id:t.i,Og:[],timescale:9e4}),xt(l)}).S("trun",function(l){var u=a[a.length-1];l=ny(l.reader,l.version,l.flags),u.Og.push(l)}).S("tfhd",function(l){var u=a[a.length-1];l=ty(l.reader,l.flags),u.Yc=l.Yc||t.h,u.Id=l.Id||t.i,l=l.trackId,t.j.has(l)&&(u.timescale=t.j.get(l))}).S("tfdt",function(l){var u=a[a.length-1];l=_u(l.reader,l.version),u.baseMediaDecodeTime=l.baseMediaDecodeTime}).box("mdat",function(l){for(var u=o-l.start-8,c=l.reader.va(),p=w(a),m=p.next();!m.done;m=p.next()){if(m=m.value,m.baseMediaDecodeTime===null)throw Ve("Unable to find base media decode time for CEA captions!"),new J(2,2,2010);l.reader.seek(c),yb(t,l.reader,m.baseMediaDecodeTime,m.timescale,m.Yc,m.Id,u,m.Og,n)}}).parse(e,!1),n};function yb(e,t,n,o,a,l,u,c,p){var m=0,v=l,S=c.map(function(k){return k.Wg});for(S=[].concat.apply([],L(S)),S.length&&(v=S[0].sampleSize||l),t.skip(u+c[0].Fh);t.na();){u=t.P();var E=t.T(),T=null;switch(T=!1,c=1,e.g){case rl:T=E&31,T=T==6;break;case sl:c=2,t.skip(1),T=E>>1&63,T=T==39||T==40;break;case al:c=2,t.skip(1),T=E>>1&63,T=T==23||T==24;break;default:return}if(T)for(E=0,m<S.length&&(E=S[m].ne||0),E=(n+E)/o,c=w(xv(t.qb(u-c))),T=c.next();!T.done;T=c.next())p.push({packet:T.value,pts:E});else try{t.skip(u-c)}catch{break}v-=u+4,v==0&&(n=m<S.length?n+(S[m].Jf||a):n+a,m++,m<S.length?v=S[m].sampleSize||l:v=l)}}ce("shaka.cea.Mp4CeaParser",Tf);var cp=0,rl=1,sl=2,al=3,Ef={avc1:rl,avc3:rl,dvav:rl,dva1:rl,hev1:sl,hvc1:sl,dvh1:sl,dvhe:sl,vvc1:al,vvi1:al,dvc1:al,dvi1:al};an["video/mp4"]=function(){return new Tf};function Af(){this.g=null}Af.prototype.init=function(){},Af.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Gt;var t=[];if(e=Ze(e),!ja(e))return t;e=this.g.parse(e);var n=e.$c(),o=e.Pd();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=w(o),o=n.next();!o.done;o=n.next())if(o=o.value,e.includes(o.type)&&o.time!=null)for(var a=w(xv(o.data)),l=a.next();!l.done;l=a.next())t.push({packet:l.value,pts:o.time});return t},ce("shaka.cea.TsCeaParser",Af),an["video/mp2t"]=function(){return new Af};function wv(e,t,n){var o=Cb(e),a=null;e=[];var l=[],u=null,c=new Set(o.map(function(m){return m.keyId}));c.delete(null);var p="cenc";if(1<c.size)throw new J(2,4,4010);if(!t){if(l=o.filter(function(m){return m.Pc=="urn:mpeg:dash:sea:2012"}),1<l.length)throw new J(2,4,4050);l.length&&(u=Eb(l[0])),(l=o.find(function(m){return m.Pc=="urn:mpeg:dash:mp4protection:2011"}))&&l.encryptionScheme&&(p=l.encryptionScheme),l=o.filter(function(m){return m.Pc=="urn:mpeg:dash:mp4protection:2011"?(a=m.init||a,!1):m.Pc!="urn:mpeg:dash:sea:2012"}),l.length&&(e=Sb(a,p,l,n,c),e.length==0&&(e=[br("",p,a)]))}if(o.length&&!u&&(t||!l.length))for(e=[],t=w(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(br(n,p,a));if(c=Array.from(c)[0]||null)for(p=w(e),t=p.next();!t.done;t=p.next())for(t=w(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=c;return{pg:c,dk:a,drmInfos:e,Fe:u,tg:!0}}function vb(e,t,n,o){var a=wv(e,n,o);if(t.tg)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=a.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=a.drmInfos),t.tg=!1;else if(0<a.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(l){return a.drmInfos.some(function(u){return u.keySystem==l.keySystem})}),t.drmInfos.length==0))throw new J(2,4,4008);return a.pg||t.pg}function xb(e){var t=0,n=Tn(e),o=n.getUint32(t,!0);if(o!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){o=n.getUint16(e,!0),e+=2;var a=n.getUint16(e,!0);if(e+=2,a&1||a+e>n.byteLength){n=[];break e}var l=Ze(n,e,a);t.push({type:o,value:l}),e+=a}n=t}return n}function wb(e){e=w(Yi(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=w(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return Cn(n)}return""}function bf(e){var t=Ro(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Cn(t))?t:(e=Ro(e.node,"urn:microsoft:playready","pro"),!e||!Cn(e)||(e=Cn(e),e=Li(e),e=xb(e).filter(function(n){return n.type===Ab})[0],!e)?"":(e=Eo(e.value,!0),(e=cs(e,"WRMHEADER"))?wb(e):""))}function Sb(e,t,n,o,a){var l=[];n=w(n);for(var u=n.next();!u.done;u=n.next()){u=u.value;var c=o[u.Pc];if(c){var p;if((p=Ro(u.node,"urn:microsoft:playready","pro"))&&Cn(p)){p=Cn(p),p=Li(p);var m=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);p=[{initData:Eu(p,m,new Set,0),initDataType:"cenc",keyId:u.keyId}]}else p=null;if(m=null,u.Pc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){m=u;var v=a;if(v.size==0)m=null;else{var S=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),E=new Uint8Array([]);m=[{initData:Eu(E,S,v,1),initDataType:"cenc",keyId:m.keyId}]}}p=br(c,t,u.init||e||p||m),(c=bb.get(c))&&(p.licenseServerUri=c(u)),l.push(p)}}return l}function Cb(e){var t=[];e=w(e);for(var n=e.next();!n.done;n=e.next())(n=Tb(n.value))&&t.push(n);return t}function Tb(e){var t=e.attributes.schemeIdUri,n=_o(e,"urn:mpeg:cenc:2013","default_KID"),o=km(e,"urn:mpeg:cenc:2013","pssh").map(Wi),a=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new J(2,4,4009);var l=[];try{l=o.map(function(u){return{initDataType:"cenc",initData:Li(u),keyId:null}})}catch{throw new J(2,4,4007)}return{node:e,Pc:t,keyId:n,init:0<l.length?l:null,encryptionScheme:a}}function Eb(e){if(!d.crypto||!d.crypto.subtle)throw Ve("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new J(2,4,4042);var t=Ro(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new J(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new J(2,4,4051);if(t=Ro(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new J(2,4,4051);if(e=t.attributes.IV,t=Zn(t.attributes.keyUriTemplate),!e||!t)throw new J(2,4,4051);if(e=Ar(e.substr(2)),e.byteLength!=16)throw new J(2,4,4048);return{ti:t,iv:e}}var Ab=1,bb=new Map().set("com.widevine.alpha",function(e){var t=Ro(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Cn(t))?t:(e=Ro(e.node,"urn:microsoft","laurl"))&&Zn(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",bf).set("com.microsoft.playready.recommendation",bf).set("com.microsoft.playready.software",bf).set("com.microsoft.playready.hardware",bf).set("org.w3.clearkey",function(e){var t=Ro(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Cn(t))?t:(e=Ro(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Cn(e))?e:""});function kf(e,t,n,o,a,l){var u={RepresentationID:t,Number:n,SubNumber:o,Bandwidth:a,Time:l};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(c,p,m,v){if(c=="$$")return"$";var S=u[p];if(S==null)return c;switch(p=="RepresentationID"&&m&&(m=void 0),p=="Time"&&typeof S!="bigint"&&(.2<=Math.abs(S-Math.round(S))&&Ve("Calculated $Time$ values must be close to integers"),S=Math.round(S)),v){case void 0:case"d":case"i":case"u":c=S.toString();break;case"o":c=S.toString(8);break;case"x":c=S.toString(16);break;case"X":c=S.toString(16).toUpperCase();break;default:c=S.toString()}return m=d.parseInt(m,10)||1,Array(Math.max(0,m-c.length)+1).join("0")+c})}function Sv(e,t){var n=so(e,t,"timescale"),o=1;n&&(o=Lo(n)||1),n=so(e,t,"duration"),(n=Lo(n||""))&&(n/=o);var a=so(e,t,"startNumber"),l=Number(so(e,t,"presentationTimeOffset"))||0,u=Vn(a||"");if((a==null||u==null)&&(u=1),a=null,t=Ns(e,t,"SegmentTimeline")){t=Ht(t,"S"),a=o,e=e.ka.duration||1/0;for(var c=u,p=[],m=-l,v=0;v<t.length;++v){var S=t[v],E=t[v+1],T=Et(S,"t",Vn),k=Et(S,"d",Vn),M=Et(S,"r",ku);if(S=Et(S,"k",ku)||0,T!=null&&(T-=l),k){if(T=T??m,M=M||0,0>M)if(E){if(E=Et(E,"t",Vn),E==null)break;if(T>=E)break;M=Math.ceil((E-T)/k)-1}else{if(e==1/0)break;if(T/a>=e)break;M=Math.ceil((e*a-T)/k)-1}for(0<p.length&&T!=m&&(p[p.length-1].end=T/a),E=0;E<=M;++E)m=T+k,p.push({start:T/a,end:m/a,$f:T,zb:S,Si:p.length+c}),T=m}}a=p}return{timescale:o,La:n,vd:u,Nb:l/o||0,Zf:l,timeline:a}}function Cv(e,t){return[t(e.J),t(e.ja),t(e.ta)].filter(Ir)}function so(e,t,n){t=Cv(e,t),e=null,t=w(t);for(var o=t.next();!o.done&&!(e=o.value.attributes[n]);o=t.next());return e}function Ns(e,t,n){t=Cv(e,t),e=null,t=w(t);for(var o=t.next();!o.done&&!(e=qi(o.value,n));o=t.next());return e}function kb(e,t,n,o,a,l){for(var u=_o(e,"http://www.w3.org/1999/xlink","href"),c=_o(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",p=w(Object.keys(e.attributes)),m=p.next();!m.done;m=p.next()){m=m.value;var v=m.split(":"),S=Gh("http://www.w3.org/1999/xlink");v[0]==S&&delete e.attributes[m]}if(5<=l)return Rr(new J(2,4,4028));if(c!="onLoad")return Rr(new J(2,4,4027));var E=Dn([o],[u]);return a.request(0,kn(E,t)).Aa(function(T){if(T=Hh(T.data,e.tagName),!T)return Rr(new J(2,4,4001,u));for(e.children=[];T.children.length;){var k=T.children.shift();k.tagName&&(k.parent=e),e.children.push(k)}k=w(Object.keys(T.attributes));for(var M=k.next();!M.done;M=k.next())M=M.value,e.attributes[M]=T.attributes[M];return If(e,t,n,E[0],a,l+1)})}function If(e,t,n,o,a,l){if(l=l===void 0?0:l,_o(e,"http://www.w3.org/1999/xlink","href")){var u=kb(e,t,n,o,a,l);return n&&(u=u.Aa(void 0,function(){return If(e,t,n,o,a,l)})),u}u=[];for(var c=w(bm(e)),p=c.next(),m={};!p.done;m={Uc:void 0},p=c.next())m.Uc=p.value,_o(m.Uc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(v){return function(S){return S!==v.Uc}}(m)):m.Uc.tagName!="SegmentTimeline"&&u.push(If(m.Uc,t,n,o,a,l));return gm(u).Aa(function(){return e})}function Ib(e,t,n,o,a,l,u){var c,p=new zt().S("sidx",function(m){c=Mb(t,o,a,l,u,n,m)});if(e&&p.parse(e),c)return c;throw new J(2,3,3004)}function Mb(e,t,n,o,a,l,u){var c=[];u.reader.skip(4);var p=u.reader.P();if(p==0)throw new J(2,3,3005);if(u.version==0)var m=u.reader.P(),v=u.reader.P();else m=u.reader.Nc(),v=u.reader.Nc();u.reader.skip(2);var S=u.reader.la();for(e=e+u.size+v,v=0;v<S;v++){var E=u.reader.P(),T=(E&2147483648)>>>31;E&=2147483647;var k=u.reader.P();if(u.reader.skip(4),T==1)throw new J(2,3,3006);c.push(new Je(m/p+n,(m+k)/p+n,function(){return l},e,e+E-1,t,n,o,a)),m+=k,e+=E}return u.parser.stop(),c}function or(e){this.h=Tn(e),this.g=new $t(this.h,0)}or.prototype.na=function(){return this.g.na()};function $o(e){var t=Tv(e);if(7<t.length)throw new J(2,3,3002);var n=0;t=w(t);for(var o=t.next();!o.done;o=t.next())n=256*n+o.value;t=Tv(e);e:{o=w(Rb);for(var a=o.next();!a.done;a=o.next())if(Zt(t,new Uint8Array(a.value))){o=!0;break e}o=!1}if(o)t=e.h.byteLength-e.g.va();else{if(t.length==8&&t[1]&224)throw new J(2,3,3001);for(a=o=0;a<t.length;a++){var l=t[a];o=a==0?l&(1<<8-t.length)-1:256*o+l}t=o}return t=e.g.va()+t<=e.h.byteLength?t:e.h.byteLength-e.g.va(),o=Tn(e.h,e.g.va(),t),e.g.skip(t),new _b(n,o)}function Tv(e){var t=e.g.va(),n=e.g.T();if(n==0)throw new J(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ze(e.h,t,n)}var Rb=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function _b(e,t){this.id=e,this.g=t}function hp(e){if(8<e.g.byteLength)throw new J(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new J(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var o=e.g.getUint8(n);t=256*t+o}return t}function Lb(e,t,n,o,a,l,u,c,p){function m(){return a}var v=[];e=new or(e.g);for(var S=null,E=null;e.na();){var T=$o(e);if(T.id==187){var k=Pb(T);k&&(T=n*k.dj,k=t+k.Ii,S!=null&&v.push(new Je(S+u,T+u,m,E,k-1,l,u,c,p)),S=T,E=k)}}return S!=null&&v.push(new Je(S+u,o+u,m,E,null,l,u,c,p)),v}function Pb(e){var t=new or(e.g);if(e=$o(t),e.id!=179)throw new J(2,3,3013);if(e=hp(e),t=$o(t),t.id!=183)throw new J(2,3,3012);t=new or(t.g);for(var n=0;t.na();){var o=$o(t);if(o.id==241){n=hp(o);break}}return{dj:e,Ii:n}}function Ev(e,t,n){if(t=Ns(e,t,"Initialization"),!t)return null;var o=e.J.Ga(),a=t.attributes.sourceURL;a&&(o=Dn(o,[Zn(a)])),a=0;var l=null;return(t=Et(t,"range",bu))&&(a=t.start,l=t.end),n=new ui(function(){return o},a,l,Iv(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function Db(e,t,n){var o=Number(so(e,Os,"presentationTimeOffset"))||0,a=so(e,Os,"timescale"),l=1;a&&(l=Lo(a)||1);var u=o/l||0,c=Ev(e,Os,n);Nb(e,c);var p=Nh(e);return{fc:function(){var m=Ns(p,Os,"RepresentationIndex"),v=p.J.Ga();return m&&(m=Zn(m.attributes.sourceURL))&&(v=Dn(v,[m])),m=bv(p),Av(p,t,c,v,m.start,m.end,u)}}}function Av(e,t,n,o,a,l,u){var c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee;return F(function(fe){if(fe.g==1)return c=e.presentationTimeline,p=!e.vb||!e.ka.ld,m=e.ka.start,v=e.ka.duration,S=e.J.mimeType.split("/")[1],E=t,T=null,k=[E(o,a,l,!1),S=="webm"?E(n.M(),n.Ha,n.sa,!0):null],E=null,A(fe,Promise.all(k),2);if(M=fe.h,I=M[0],U=M[1]||null,N=null,z=m-u,P=m,j=v?m+v:1/0,S=="mp4")var te=Ib(I,a,o,n,z,P,j);else{te=I;var ne=new or(U);if($o(ne).id!=440786851)throw new J(2,3,3008);var ae=$o(ne);if(ae.id!=408125543)throw new J(2,3,3009);ne=ae.g.byteOffset,ae=new or(ae.g);for(var xe=null;ae.na();){var me=$o(ae);if(me.id==357149030){xe=me;break}}if(!xe)throw new J(2,3,3010);for(xe=new or(xe.g),me=1e6,ae=null;xe.na();){var we=$o(xe);if(we.id==2807729)me=hp(we);else if(we.id==17545)if(we.g.byteLength==4)ae=we.g.getFloat32(0);else if(we.g.byteLength==8)ae=we.g.getFloat64(0);else throw new J(2,3,3003)}if(ae==null)throw new J(2,3,3011);if(xe=me/1e9,ae*=xe,te=$o(new or(te)),te.id!=475249515)throw new J(2,3,3007);te=Lb(te,ne,xe,ae,o,n,z,P,j)}for(N=te,G=w(N),Z=G.next();!Z.done;Z=G.next())ee=Z.value,ee.codecs=e.J.codecs,ee.mimeType=e.J.mimeType;return c.sd(N),T=new It(N),p&&T.Bc(P,j,!0),fe.return(T)})}function Os(e){return e.Rc}function bv(e){var t=Ns(e,Os,"RepresentationIndex");return e=so(e,Os,"indexRange"),e=bu(e||""),t&&(e=Et(t,"range",bu,e)),e}function Nb(e,t){if(kv(e,t),!bv(e))throw new J(2,4,4002)}function kv(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=Tt&&n!="mp4"&&n!="webm")throw new J(2,4,4006);if(n=="webm"&&!t)throw new J(2,4,4005)}function Iv(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Jc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ja.label||null,roles:e.roles||null,language:e.ja.language||null}}function Ob(e,t,n){var o=Ev(e,Mv,n),a=Ub(e);if(!a.La&&!a.timeline&&1<a.Ic.length)throw new J(2,4,4002);if(!a.La&&!e.ka.duration&&!a.timeline&&a.Ic.length==1)throw new J(2,4,4002);if(a.timeline&&a.timeline.length==0)throw new J(2,4,4002);var l=null,u=null;e.ta.id&&e.J.id&&(u=t[e.ta.id+","+e.J.id])&&(l=u.segmentIndex);var c=Bb(e.ka.start,e.ka.duration,e.J.Ga,a,o,n,e.J.mimeType,e.J.codecs);return t=!l,l?l.rd(c,e.presentationTimeline.mb()):l=new It(c),e.presentationTimeline.sd(c),e.vb&&e.ka.ld||l.Bc(e.ka.start,e.ka.duration?e.ka.start+e.ka.duration:1/0,t),u&&(u.segmentIndex=l),{fc:function(){return l&&l.getNumReferences()!=0||l.Zd(c),Promise.resolve(l)}}}function Mv(e){return e.Pb}function Ub(e){var t=jb(e);e=Sv(e,Mv);var n=e.vd;n==0&&(n=1);var o=0;return e.La?o=e.La*(n-1):e.timeline&&0<e.timeline.length&&(o=e.timeline[0].start),{La:e.La,startTime:o,vd:n,Nb:e.Nb,timeline:e.timeline,Ic:t}}function Bb(e,t,n,o,a,l,u,c){var p=o.Ic.length;o.timeline&&o.timeline.length!=o.Ic.length&&(p=Math.min(o.timeline.length,o.Ic.length));for(var m=e-o.Nb,v=t?e+t:1/0,S=[],E=o.startTime,T={},k=0;k<p;T={ve:void 0,oe:void 0},k++){T.oe=o.Ic[k];var M=E;E=void 0,E=o.La!=null?M+o.La:o.timeline?o.timeline[k].end:M+t,T.ve=null,T=new Je(e+M,e+E,function(I){return function(){return I.ve==null&&(I.ve=Dn(n(),[I.oe.zi])),I.ve}}(T),T.oe.start,T.oe.end,a,m,e,v,[],"",null,null,er,l),T.codecs=c,T.mimeType=u,S.push(T)}return S}function jb(e){return[e.J.Pb,e.ja.Pb,e.ta.Pb].filter(Ir).map(function(t){return Ht(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.lf&&(e.lf=!0);var n=Zn(t.attributes.media);return t=Et(t,"mediaRange",bu,{start:0,end:null}),{zi:n,start:t.start,end:t.end}})}function Rv(e,t,n,o,a,l,u,c,p){p||e.J.Gc||(e.J.Gc=so(e,jr,"initialization"));var m=e.J.Gc?Vb(e,u):null,v=Fb(e);$b(v);var S=Nh(e);if(v.jd)return kv(e,m),{fc:function(){var I=kf(v.jd,S.J.id,null,null,S.bandwidth||null,null);return I=Dn(S.J.Ga(),[I]),Av(S,t,m,I,0,null,v.Nb)}};if(v.La)return o||e.ja.contentType==="image"||(e.presentationTimeline.xf(v.La),e.presentationTimeline.ce(e.ka.start)),{fc:function(){return zb(S,v,a,m,l,u,c)}};var E=null;o=o=null,e.ta.id&&e.J.id&&(o=e.ta.id+","+e.J.id,o=n[o])&&(E=o.segmentIndex);var T=e.ka.start,k=e.ka.duration?T+e.ka.duration:1/0,M=!(e.vb&&e.ka.ld);return E?(n=E,_v(n,v,T,k,M,m),n.Ma(e.presentationTimeline.mb())):E=new Mf(v,e.J.id,e.bandwidth,e.J.Ga,T,k,m,M,u,e.J.Kf),v.timeline&&e.ja.contentType!=="image"&&e.presentationTimeline.Ng(v.timeline,T),o&&e.vb&&(o.segmentIndex=E),{fc:function(){return E instanceof Mf&&E.getNumReferences()==0&&_v(E,v,T,k,M,m),Promise.resolve(E)}}}function jr(e){return e.$b}function Fb(e){var t=Sv(e,jr),n=so(e,jr,"media"),o=so(e,jr,"index");return{La:t.La,timescale:t.timescale,vd:t.vd,Nb:t.Nb,Zf:t.Zf,timeline:t.timeline,Zb:n&&Zn(n),jd:o,mimeType:e.J.mimeType,codecs:e.J.codecs}}function $b(e){var t=e.jd?1:0;if(t+=e.timeline?1:0,t+=e.La?1:0,t==0)throw new J(2,4,4002);if(t!=1&&(e.jd&&(e.timeline=null),e.La=null),!e.jd&&!e.Zb)throw new J(2,4,4002)}function zb(e,t,n,o,a,l,u){function c(ne){var ae=(ne-M)*k,xe=ae+t.Nb,me=ae+S;ae=me+k;var we=Math.min(ae,m());return me=new Je(me,we,function(){var Le=xe*I;return"BigInt"in d&&Le>Number.MAX_SAFE_INTEGER&&(Le=BigInt(xe)*BigInt(I)),Le=kf(U,z,ne,null,N,Le),Dn(P(),[Le])},0,null,o,j,S,m(),[],"",null,null,er,l),me.codecs=e.J.codecs,me.mimeType=e.J.mimeType,me.j=ae,me}function p(){var ne=[Math.max(v.mb(),S),Math.min(v.Wb(),m())].map(function(ae){return ae-S});return ne=[Math.ceil(ne[0]/k),Math.ceil(ne[1]/k)-1],e.J.Ia&&ne[1]++,ne.map(function(ae){return ae+M})}function m(){var ne=E!=null&&a[E]||T;return ne?S+ne:1/0}var v=e.presentationTimeline,S=e.ka.start,E=e.ta.id,T=e.ka.duration,k=t.La,M=t.vd,I=t.timescale,U=t.Zb,N=e.bandwidth||null,z=e.J.id,P=e.J.Ga,j=S-t.Nb,G=p();n=e.vb?Math.max(G[0],G[1]-n+1):G[0],u=u||G[1],G=[];for(var Z=n;Z<=u;++Z){var ee=c(Z);G.push(ee)}var fe=new It(G);if(G=v.Wb()<m(),Z=v.V(),G||Z){var te=Math.max(n,u+1);n=k,e.J.Ia&&(n=.1),fe.ue(n,function(){var ne=v.mb();fe.Ma(ne);var ae=w(p());ae.next(),ae=ae.next().value;for(var xe=[];te<=ae;){var me=c(te);xe.push(me),te++}return ne>m()&&!xe.length?null:xe})}return Promise.resolve(fe)}function Vb(e,t){var n=e.J.Gc;if(n||(n=so(e,jr,"initialization")),!n)return null;n=Zn(n);var o=e.J.id,a=e.bandwidth||null,l=e.J.Ga;return t=new ui(function(){var u=kf(n,o,null,null,a,null);return Dn(l(),[u])},0,null,Iv(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function Mf(e,t,n,o,a,l,u,c,p,m){It.call(this,[]),this.g=e,this.C=t,this.A=n,this.B=o,this.h=a,this.j=l,this.o=u,this.s=p,this.F=m,c&&Lv(this)}K(Mf,It),s=Mf.prototype,s.getNumReferences=function(){return this.g?this.g.timeline.length:0},s.release=function(){It.prototype.release.call(this),this.g=null},s.Ma=function(e){if(this.g){for(var t=0,n=this.g.timeline,o=0;o<n.length&&n[o].end+this.h<=e;o+=1)t+=1;0<t&&(this.g.timeline=n.slice(t),this.O.length>=t&&(this.O=this.O.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function _v(e,t,n,o,a,l){if(Hb(e,l),e.g){if(n=e.g.timeline,e.g.Zb!==t.Zb&&(e.g.Zb=t.Zb),n.length){var u=n[n.length-1];t=t.timeline.filter(function(c){return c.start>=u.end})}else t=t.timeline.slice();0<t.length&&e.g.timeline.push.apply(e.g.timeline,L(t)),e.j!==o&&(e.j=o)}else e.g=t,e.h=n,e.j=o;a&&Lv(e)}function Hb(e,t){if(e.o!==t){e.o=t,e=w(e.O);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&Km(n,t)}}function Lv(e){if(!e.m){for(var t=e.g.timeline;t.length&&t[t.length-1].start>=e.j;)t.pop();e.Ma(e.h)}}s.find=function(e){if(this.g&&this.g.timeline&&this.g.timeline.length&&e<this.g.timeline[0].start+this.h)return this.i;if(!this.g)return null;var t=this.g.timeline;if(e<this.h||e>=this.j)return null;for(var n=t.length-1,o=0;o<t.length;o++){var a=t[o],l=a.start+this.h;if(a=o<n?t[o+1].start+this.h:this.j===1/0?a.end+this.h:this.j,e>=l&&e<a)return o+this.i}return null},s.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.g)return null;var n=this.O[e];if(!n){var o=this.g.timeline[e],a=o.Si,l=this.g.Zf+o.$f;n=this.h-this.g.Nb;var u=this.h+o.end,c=u;e===this.getNumReferences()-1&&this.j!==1/0&&(c=this.j);for(var p=this.g.codecs,m=this.g.mimeType,v=[],S=(o.end-o.start)/o.zb,E={},T=0;T<o.zb;E={we:void 0,kh:void 0},T++){var k=o.start+S*T,M=k+S;E.kh=T+1,E.we=null,E=new Je(this.h+k,this.h+M,function(I){return function(){return t.g?(I.we==null&&(I.we=Pv(t.g.Zb,t.C,a,t.A,l,I.kh,t.B)),I.we):[]}}(E),0,null,this.o,n,this.h,this.j,[],"",null,null,er,this.s),E.codecs=p,E.mimeType=m,this.F==0?0<T&&E.Xd():T%this.F!=0&&E.Xd(),v.push(E)}n=new Je(this.h+o.start,c,function(){return 0<o.zb||!t.g?[]:Pv(t.g.Zb,t.C,a,t.A,l,null,t.B)},0,null,this.o,n,this.h,this.j,v,"",null,null,er,this.s,0<o.zb),n.codecs=p,n.mimeType=m,n.j=u,this.O[e]=n}return n};function Pv(e,t,n,o,a,l,u){return e=kf(e,t,n,l,o||null,a),Dn(u(),[e]).map(function(c){return c.toString()})}function Us(e){this.o=null,this.A=e,this.G=new as,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}Us.prototype.configure=function(e){this.o=e},Us.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},Us.prototype.setManifestType=function(e){this.s=e};function ll(e,t){var n,o,a,l,u,c,p;return F(function(m){if(m.g==1)return n=Dn(e.i,[Gb(e,t)]),o=kn(n,e.o.retryParameters),a=e.A.networkingEngine.request(8,o),_r(e.G,a),le(m,2),A(m,a.promise,4);if(m.g!=2)return l=m.h,u=Wt(l.data),c=JSON.parse(u),c.VERSION==1&&Xb(e,c,l.uri),de(m,0);if((p=se(m))&&p.code==7001)return m.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new mt(function(){ll(e,t)}),e.g.Y(e.C),Y(m)})}function Gb(e,t){if(!e.m.length)return t;t=new pn(t);var n=e.B||e.m[0],o=Math.round(e.A.getBandwidthEstimate()),a=t.g;return e.s=="DASH"?(a.add("_DASH_pathway",n),a.add("_DASH_throughput",String(o))):e.s=="HLS"&&(a.add("_HLS_pathway",n),a.add("_HLS_throughput",String(o))),Lg(a)&&xa(t,a),t.toString()}function Xb(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var o=t["RELOAD-URI"]||n;e.g=new mt(function(){ll(e,o)}),(n=t.TTL)&&(e.C=n),e.g.Y(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Bs(e,t,n,o){var a=e.l.get(t);a||(a=new Map),a.set(n,o),e.l.set(t,a)}Us.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function ul(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var o=[],a=w(e.m),l=a.next(),u={};!l.done;u={Lc:void 0},l=a.next())if(u.Lc=l.value,l=t.get(u.Lc))o.push({Df:u.Lc,location:l});else if(l=e.F.find(function(p){return function(m){return m.wj==p.Lc}}(u))){var c=t.get(l["BASE-ID"]);c&&(l["URI-REPLACEMENT"].rh?(c=new pn(c),iu(c,l["URI-REPLACEMENT"].rh),o.push({Df:u.Lc,location:c.toString()})):o.push({Df:u.Lc,location:c}))}for(a=Date.now(),u=w(e.j.keys()),l=u.next();!l.done;l=u.next())l=l.value,c=e.j.get(l),a>c&&e.j.delete(l);if(o=o.filter(function(p){for(var m=w(e.j.keys()),v=m.next();!v.done;v=m.next())if(v.value.includes(new pn(p.location).Eb))return!1;return!0}),o.length&&(e.B=o[0].Df),o=o.map(function(p){return p.location}),!o.length&&e.h)for(a=w(e.h.split(",")),u=a.next();!u.done;u=a.next())(u=t.get(u.value))&&(e.B=e.h,o.push(u));if(!o.length)for(t=w(t.values()),a=t.next();!a.done;a=t.next())o.push(a.value);return n?o:Dn(e.i,o)}function ti(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.s=this.o=!1,this.m=new Set}s=ti.prototype,s.release=function(){for(var e=w(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},s.ei=function(){return this.j},s.jf=function(){return this.l.slice()},s.Nh=function(){return this.i};function Dv(e,t){var n=[],o=[],a=[],l=[];e=w(e);for(var u=e.next();!u.done;u=e.next()){var c=u.value;u=new Map(c.audioStreams.map(function(S){return[mp(S),S]}));var p=new Map(c.videoStreams.map(function(S){return[gp(S),S]})),m=new Map(c.textStreams.map(function(S){return[dl(S),S]}));if(c=new Map(c.imageStreams.map(function(S){return[pl(S),S]})),t){var v=Fv(Tt);m.set(dl(v),v),v=Fv("image"),c.set(pl(v),v)}n.push(u),o.push(p),a.push(m),l.push(c)}return{jg:n,ph:o,lh:a,Eg:l}}s.Ke=function(e,t,n){n=n===void 0?!1:n;var o=this,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe,te,ne,ae,xe,me,we,Le,Se;return F(function(Be){if(Be.g==1){if(a=xn,!t&&e.length==1)return l=Dv(e,!1),u=l.jg,c=l.ph,p=l.lh,m=l.Eg,o.h=Array.from(u[0].values()),o.g=Array.from(c[0].values()),o.l=Array.from(p[0].values()),o.i=Array.from(m[0].values()),Be.u(2);for(v=n?o.m.size:0,S=-1,E=0;E<e.length;E++)T=e[E],o.m.has(T.id)||(o.m.add(T.id),S==-1&&(S=E));return S==-1?Be.return():(k=Dv(e,!0),M=k.jg,I=k.ph,U=k.lh,N=k.Eg,A(Be,Promise.all([rr(o,o.h,M,S,fl,js,v),rr(o,o.g,I,S,fl,js,v),rr(o,o.l,U,S,fl,js,v),rr(o,o.i,N,S,fl,js,v)]),2))}if(z=0,P=[],o.g.length&&o.h.length)for(te=w(o.h),ne=te.next();!ne.done;ne=te.next())for(ae=ne.value,xe=w(o.g),me=xe.next();!me.done;me=xe.next())we=me.value,Le=Ch(ae.drmInfos,we.drmInfos),ae.drmInfos.length&&we.drmInfos.length&&!Le.length||(Se=z++,P.push({id:Se,language:ae.language,disabledUntilTime:0,primary:ae.primary,audio:ae,video:we,bandwidth:(ae.bandwidth||0)+(we.bandwidth||0),drmInfos:Le,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(j=o.g.length?o.g:o.h,G=w(j),Z=G.next();!Z.done;Z=G.next())ee=Z.value,fe=z++,P.push({id:fe,language:ee.language,disabledUntilTime:0,primary:ee.primary,audio:ee.type==a.X?ee:null,video:ee.type==a.ga?ee:null,bandwidth:ee.bandwidth||0,drmInfos:ee.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});o.j=P,Y(Be)})};function Nv(e){var t,n,o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe,te,ne,ae,xe,me;return F(function(we){switch(we.g){case 1:if(t=xn,e.length==1)return we.return(e[0]);for(n=e.map(function(Le){return new Map(Le.filter(function(Se){return Se.type===t.X}).map(function(Se){return[mp(Se),Se]}))}),o=e.map(function(Le){return new Map(Le.filter(function(Se){return Se.type===t.ga}).map(function(Se){return[gp(Se),Se]}))}),a=e.map(function(Le){return new Map(Le.filter(function(Se){return Se.type===t.ua}).map(function(Se){return[dl(Se),Se]}))}),l=e.map(function(Le){return new Map(Le.filter(function(Se){return Se.type===t.De}).map(function(Se){return[pl(Se),Se]}))}),u=w(a),c=u.next();!c.done;c=u.next())p=c.value,m=jv(t.ua),p.set(dl(m),m);for(v=w(l),S=v.next();!S.done;S=v.next())E=S.value,T=jv(t.De),E.set(pl(T),T);return k=new ti,A(we,rr(k,[],n,0,Rf,_f,0),2);case 2:return M=we.h,A(we,rr(k,[],o,0,Rf,_f,0),3);case 3:return I=we.h,A(we,rr(k,[],a,0,Rf,_f,0),4);case 4:return U=we.h,A(we,rr(k,[],l,0,Rf,_f,0),5);case 5:if(N=we.h,z=0,I.length&&M.length)for(ee=w(M),fe=ee.next();!fe.done;fe=ee.next())for(te=fe.value,ne=w(I),ae=ne.next();!ae.done;ae=ne.next())xe=ae.value,me=z++,xe.variantIds.push(me),te.variantIds.push(me);else for(P=I.concat(M),j=w(P),G=j.next();!G.done;G=j.next())Z=G.value,Z.variantIds=[z++];return we.return(I.concat(M).concat(U).concat(N))}})}function rr(e,t,n,o,a,l,u){var c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe;return F(function(te){switch(te.g){case 1:for(c=[],p=0;p<n.length;p++)p>=o?c.push(new Set(n[p].values())):c.push(new Set);m=w(t),v=m.next();case 2:if(v.done){te.u(4);break}return S=v.value,A(te,Wb(e,S,n,o,l,c,u),5);case 5:if(E=te.h,!E)throw new J(2,4,4037);v=m.next(),te.u(2);break;case 4:for(T=w(c),k=T.next();!k.done;k=T.next())for(M=k.value,I=w(M),U=I.next();!U.done;U=I.next())N=U.value,(z=Yb(e,N,n,a,l,c))&&t.push(z);for(P=w(c),j=P.next();!j.done;j=P.next())for(G=j.value,Z=w(G),ee=Z.next(),fe={};!ee.done;fe={Tf:void 0},ee=Z.next())if(fe.Tf=ee.value,!pp(fe.Tf)&&t.some(function(ne){return function(ae){return dp(e,ne.Tf,ae)}}(fe)))throw new J(2,4,4037);return te.return(t)}})}function Wb(e,t,n,o,a,l,u){return F(function(c){return c.g==1?(Bv(e,n,t,0<u),t.matchedStreams?t.segmentIndex?A(c,Ov(t,o+u),2):c.u(2):c.return(!1)):(Uv(t,o,a,l,u),c.return(!0))})}function Ov(e,t){var n,o,a,l,u,c,p;return F(function(m){if(m.g==1){for(n=[],o=e.matchedStreams,a=w(o),l=a.next();!l.done;l=a.next())u=l.value,n.push(u.createSegmentIndex()),u.trickModeVideo&&!u.trickModeVideo.segmentIndex&&n.push(u.trickModeVideo.createSegmentIndex());return A(m,Promise.all(n),2)}if(e.segmentIndex instanceof un)for(c=t;c<o.length;c++)p=o[c],p.segmentIndex&&e.segmentIndex.g.push(p.segmentIndex);Y(m)})}function Yb(e,t,n,o,a,l){if(pp(t))return null;var u=o(t);return Bv(e,n,u),u.createSegmentIndex&&(u.createSegmentIndex=function(){return F(function(c){return u.segmentIndex?c.u(0):(u.segmentIndex=new un,A(c,Ov(u,0),0))})}),!u.matchedStreams||!u.matchedStreams.length?null:(Uv(u,0,a,l,0),u)}function Uv(e,t,n,o,a){var l=e.matchedStreams;for(t+=a;t<l.length;t++){var u=l[t];n(e,u);var c=!0;if(e.type=="audio"&&Mr(e.language,u.language)==0&&(c=!1),c&&(o[t-a].delete(u),u.fullMimeTypes))for(u=w(u.fullMimeTypes.values()),c=u.next();!c.done;c=u.next())e.fullMimeTypes.add(c.value)}}function fl(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=w(t.matchedStreams),o=n.next();!o.done;o=n.next())o=o.value,o.segmentIndex&&(o.segmentIndex.release(),o.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Rf(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function js(e,t){function n(u,c){u||(u=[]),c=w(c);for(var p=c.next();!p.done;p=c.next())p=p.value,u.includes(p)||u.push(p);return u}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var o=w(t.keyIds),a=o.next();!a.done;a=o.next())e.keyIds.add(a.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),o=Ch(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!o.length)throw new J(2,4,4038);if(e.drmInfos=o,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),o=w(t.closedCaptions),a=o.next();!a.done;a=o.next()){var l=w(a.value);a=l.next().value,l=l.next().value,e.closedCaptions.set(a,l)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=fl(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),js(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&js(e.trickModeVideo,t)}function _f(e,t){var n=e.roles;n||(n=[]);for(var o=w(t.roles),a=o.next();!a.done;a=o.next())a=a.value,n.includes(a)||n.push(a);for(e.roles=n,n=w(t.keyIds),o=n.next();!o.done;o=n.next())e.keyIds.add(o.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,L(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=w(t.closedCaptions),n=t.next();!n.done;n=t.next())o=w(n.value),n=o.next().value,o=o.next().value,e.closedCaptions.set(n,o)}function Bv(e,t,n,o){o=o!==void 0&&o?n.matchedStreams:[],t=w(t);for(var a=t.next();!a.done;a=t.next()){if(a=qb(e,a.value,n),!a)return;o.push(a)}n.matchedStreams=o}function qb(e,t,n){var o={audio:mp,video:gp,text:dl,image:pl}[n.type],a=null,l=o(n);if(t.has(l))a=t.get(l);else{l={audio:function(m,v){return dp(e,m,v)},video:function(m,v){return dp(e,m,v)},text:Kb,image:Zb}[n.type];for(var u={audio:Qb,video:Jb,text:ek,image:tk}[n.type],c=w(t.values()),p=c.next();!p.done;p=c.next())p=p.value,!l(n,p)||n.fastSwitching!=p.fastSwitching||a&&!u(n,a,p)||(a=p)}return e.s&&!pp(a)&&t.delete(o(a)),a}function cl(e,t){return e.mimeType!=t.mimeType?!1:Lf(e.codecs)===Lf(t.codecs)}s.Zg=function(e){this.o=e},s.gh=function(e){this.s=e};function dp(e,t,n){return!(!cl(t,n)&&!e.o||t.drmInfos&&!Pg(t.drmInfos,n.drmInfos))}function Kb(e,t){return t.language?!(e.forced!==t.forced||Mr(e.language,t.language)==0||t.kind!=e.kind):!0}function Zb(){return!0}function Qb(e,t,n){var o=cl(e,t),a=cl(e,n);if(o&&!a)return!1;if(!o&&a||(o=Mr(e.language,t.language),a=Mr(e.language,n.language),a>o))return!0;if(a<o)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(o=t.roles.filter(function(l){return e.roles.includes(l)}),a=n.roles.filter(function(l){return e.roles.includes(l)}),a.length>o.length)return!0;if(a.length<o.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(o=hl(e.channelsCount,t.channelsCount,n.channelsCount),o==ao?!0:o==zo?!1:(o=hl(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),o==ao?!0:o==zo?!1:!!(e.bandwidth&&$v(e.bandwidth,t.bandwidth,n.bandwidth)==ao)))}function Jb(e,t,n){var o=cl(e,t),a=cl(e,n);if(o&&!a)return!1;if(!o&&a||(o=hl(e.width*e.height,t.width*t.height,n.width*n.height),o==ao))return!0;if(o==zo)return!1;if(e.frameRate){if(o=hl(e.frameRate,t.frameRate,n.frameRate),o==ao)return!0;if(o==zo)return!1}return!!(e.bandwidth&&$v(e.bandwidth,t.bandwidth,n.bandwidth)==ao)}function ek(e,t,n){var o=Mr(e.language,t.language),a=Mr(e.language,n.language);if(a>o)return!0;if(a<o)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(o=t.roles.filter(function(l){return e.roles.includes(l)}),a=n.roles.filter(function(l){return e.roles.includes(l)}),a.length>o.length)return!0;if(a.length<o.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function tk(e,t,n){return hl(e.width*e.height,t.width*t.height,n.width*n.height)==ao}function jv(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Fv(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new It([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function hl(e,t,n){if(t==e&&e!=n)return zo;if(n==e&&e!=t)return ao;if(t>e){if(n<=e||n-e<t-e)return ao;if(n-e>t-e)return zo}else{if(n>e)return zo;if(e-n<e-t)return ao;if(e-n>e-t)return zo}return zv}function $v(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?ao:t<e?zo:zv}function pp(e){switch(e.type){case Tt:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function gp(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,Lf(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function mp(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,Lf(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function dl(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function pl(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function Lf(e){if(!yp.has(e)){var t=Qn(e);yp.set(e,t)}return yp.get(e)}ce("shaka.util.PeriodCombiner",ti),ti.prototype.setUseStreamOnce=ti.prototype.gh,ti.prototype.setAllowMultiTypeVariants=ti.prototype.Zg,ti.prototype.combinePeriods=ti.prototype.Ke,ti.prototype.getImageStreams=ti.prototype.Nh,ti.prototype.getTextStreams=ti.prototype.jf,ti.prototype.getVariants=ti.prototype.ei;var ao=1,zv=0,zo=-1,yp=new Map;function nk(e,t){var n=new DOMParser,o=ik.value()(e);e=null;try{e=n.parseFromString(o,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function Vv(e,t){try{var n=Ao(e);return nk(n,t)}catch{return null}}var ik=new Yr(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Pf(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.ea=1,this.B=[],this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.o=new Map,this.s={},this.ba={},this.m=new ti,this.H=0,this.da=new Oe(5),this.I=new mt(function(){if(e.G&&!e.g.continueLoadingWhenPaused&&(e.C.jb(e.G,"timeupdate"),e.G.paused)){e.C.ha(e.G,"timeupdate",function(){return qv(e)});return}qv(e)}),this.N=new as,this.L=null,this.fa=[],this.R=1/0,this.F=!1,this.h=null,this.K=0,this.U=!1,this.C=new ct,this.G=null,this.Z=!1}s=Pf.prototype,s.configure=function(e){var t=this.j&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.i&&this.i.presentationTimeline.V()&&this.I.tc(),this.h&&this.h.configure(this.g),this.m&&(this.m.Zg(this.g.dash.multiTypeVariantsAllowed&&tn()),this.m.gh(this.g.dash.useStreamOnceInPeriodFlattening))},s.start=function(e,t){var n=this,o;return F(function(a){if(a.g==1)return n.F=t.isLowLatencyMode(),n.A=[e],n.j=t,A(a,vp(n),2);if(o=a.h,n.j&&xp(n,o),!n.j)throw new J(2,7,7001);return a.return(n.i)})},s.stop=function(){for(var e=w(Object.values(this.s)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.s={},this.o.clear(),this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.m=null,this.I!=null&&(this.I.stop(),this.I=null),this.h&&this.h.destroy(),this.C&&(this.C.release(),this.C=null),this.N.destroy()},s.update=function(){var e=this,t;return F(function(n){if(n.g==1)return le(n,2),A(n,vp(e),4);if(n.g!=2)return de(n,0);if(t=se(n),!e.j||!t)return n.return();e.j.onError(t),Y(n)})},s.onExpirationUpdated=function(){},s.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.V()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.Wb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.H=t.endTime-e,xp(this,0))}}},s.banLocation=function(e){this.h&&this.h.banLocation(e)},s.setMediaElement=function(e){this.G=e};function vp(e){var t,n,o,a,l,u,c,p,m,v;return F(function(S){return S.g==1?(t=4,n="MPD",o=yk(e),a=e.A,o.length?(a=o,n="Patch",t=6):1<e.A.length&&e.h&&(l=ul(e.h,"Location",!0),l.length&&(a=l)),u=kn(a,e.g.retryParameters),c=Date.now(),A(S,Sp(e,u,0,{type:t}),2)):S.g!=3?(p=S.h,e.j?(p.uri&&p.uri!=p.originalUri&&!e.A.includes(p.uri)&&e.A.unshift(p.uri),A(S,ok(e,p.data,p.uri,n),3)):S.return(0)):(m=Date.now(),v=(m-c)/1e3,e.da.sample(1,v),S.return(v))})}function ok(e,t,n,o){var a,l,u,c,p,m,v,S,E,T;return F(function(k){if(k.g==1){if(a=t,l=e.g.dash.manifestPreprocessor,u=qu,l!=u){if(Ct("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),c=Vv(a,o),!c)throw new J(2,4,4001,n);l(c),a=to(c.outerHTML)}if(p=Hh(a,o),!p)throw new J(2,4,4001,n);return m=e.g.dash.manifestPreprocessorTXml,v=Ku,m!=v&&m(p),o==="Patch"?k.return(rk(e,p)):e.g.dash.disableXlinkProcessing?k.return(Hv(e,p,n)):(S=e.g.dash.xlinkFailGracefully,E=If(p,e.g.retryParameters,S,n,e.j.networkingEngine),_r(e.N,E),A(k,E.promise,2))}return T=k.h,k.return(Hv(e,T,n))})}function Hv(e,t,n){var o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe,te,ne,ae,xe,me,we,Le,Se,Be,st,St,Qt,Mt,on,yn,Jt,Pt,fn,En,An,vi,xi,Qi,Ho,lr,Ws,Go,pc,Rl,_l;return F(function(lo){switch(lo.g){case 1:for(e.h&&e.h.l.clear(),o=[n],a=[],l=new Map,u=Ht(t,"Location"),c=w(u),p=c.next();!p.done;p=c.next())m=p.value,v=m.attributes.serviceLocation,(S=Wi(m))&&(E=Dn(o,[S])[0],v&&(e.h?Bs(e.h,"Location",v,E):l.set(v,E)),a.push(E));if(e.h?(T=ul(e.h,"Location",!0),0<T.length&&(o=e.A=T)):a.length&&(o=e.A=a),e.l.ae=t.attributes.id||"",e.l.td=Et(t,"publishTime",Jo)||0,e.B=Ht(t,"PatchLocation"),k=Promise.resolve(),(M=qi(t,"ContentSteering"))&&e.j)for(I=M.attributes.defaultServiceLocation,e.h?(e.h.i=o,e.h.h=I):(e.h=new Us(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=o,e.h.h=I,(U=Wi(M))&&(Et(M,"queryBeforeStart",Xh,!1)?k=ll(e.h,U):ll(e.h,U))),N=w(l.keys()),z=N.next();!z.done;z=N.next())P=z.value,j=l.get(P),Bs(e.h,"Location",P,j);if(G=Ht(t,"BaseURL"),ee=!1,e.h)for(fe=w(G),te=fe.next();!te.done;te=fe.next())ne=te.value,ae=ne.attributes.serviceLocation,xe=Wi(ne),ae&&xe&&(Bs(e.h,"BaseURL",ae,xe),ee=!0);if(ee&&e.h||(me=G.map(Wi),Z=Dn(o,me)),we=function(){return e.h&&ee?ul(e.h,"BaseURL"):Z||[]},e.l.Ga=we,Le=0,G&&G.length&&(Le=Et(G[0],"availabilityTimeOffset",Iu)||0),e.l.Ia=Le,Se=e.g.dash.ignoreMinBufferTime,Be=0,Se||(Be=Et(t,"minBufferTime",vo)||0),e.H=Et(t,"minimumUpdatePeriod",vo,-1),st=Et(t,"availabilityStartTime",Jo),St=Et(t,"timeShiftBufferDepth",vo),Qt=e.g.dash.ignoreSuggestedPresentationDelay,Mt=null,Qt||(Mt=Et(t,"suggestedPresentationDelay",vo)),on=e.g.dash.ignoreMaxSegmentDuration,yn=null,on||(yn=Et(t,"maxSegmentDuration",vo)),Jt=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.Z=e.i.presentationTimeline.V()&&Jt=="static"),e.l.type=Jt,e.i)for(Pt=e.i.presentationTimeline,fn=w(Object.values(e.s)),En=fn.next();!En.done;En=fn.next())An=En.value,An.segmentIndex&&An.segmentIndex.Ma(Pt.mb());else vi=e.g.defaultPresentationDelay||1.5*Be,xi=Mt??vi,Pt=new Qe(st,xi,e.g.dash.autoCorrectDrift);return Pt.sc(Jt=="static"),Pt.V()&&!isNaN(e.g.availabilityWindowOverride)&&(St=e.g.availabilityWindowOverride),St==null&&(St=1/0),Pt.pe(St),Qi=t.attributes.profiles||"",e.l.profiles=Qi.split(","),Ho={vb:Jt!="static",presentationTimeline:Pt,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:Le,Kb:null,profiles:Qi.split(","),roles:null},e.K=0,lr=Yv(e,Ho,we,t),Ws=lr.duration,Go=lr.periods,(Jt!="static"||e.Z)&&lr.rg||Pt.Za(Ws||1/0),e.U&&!e.F&&e.j.isAutoLowLatencyMode()&&(e.j.enableLowLatencyMode(),e.F=e.j.isLowLatencyMode()),e.F&&Pt.$g(e.R),Pt.xf(yn||1),A(lo,k,2);case 2:return e.F&&(Be=0,pc=Mt??e.g.defaultPresentationDelay,Pt.Of(pc)),e.i?(e.i.periodCount=Go.length,e.i.gapCount=e.K,A(lo,Gv(e,Go,!1),4)):A(lo,e.m.Ke(Go,Ho.vb),6);case 6:if(e.i={presentationTimeline:Pt,variants:e.m.j,textStreams:e.m.jf(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:Be||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:sk(t),nextUrl:ak(t),periodCount:Go.length,gapCount:e.K,isLowLatency:e.U},!Pt.nh()){lo.u(7);break}return Rl=Ht(t,"UTCTiming"),A(lo,gk(e,we,Rl),8);case 8:if(_l=lo.h,!e.j)return lo.return();Pt.ah(_l);case 7:Pt.Wd();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),Y(lo)}})}function Gv(e,t,n){var o;return F(function(a){if(a.g==1)return A(a,e.m.Ke(t,!0,n),2);e.i.variants=e.m.j,o=e.m.jf(),0<o.length&&(e.i.textStreams=o),e.i.imageStreams=e.m.i,e.j.filter(e.i),Y(a)})}function rk(e,t){var n,o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe,te,ne,ae;return F(function(xe){if(xe.g==1){if(n=t.attributes.mpdId,o=Et(t,"originalPublishTime",Jo),!n||n!==e.l.ae||o!==e.l.td)throw e.B=[],new J(1,4,4052);for(a=[],l=[],u=new Set,c=w(bm(t)),p=c.next();!p.done;p=c.next())if(m=p.value,v=Mu(m.attributes.sel||""),S=v[v.length-1],E=Wi(m)||"",S.name==="MPD")if(S.Sb==="mediaPresentationDuration"){T=Wi(m)||"";var me=vo(T);if(me!=null){e.l.Kb=me;for(var we=w(e.o.values()),Le=we.next();!Le.done;Le=we.next())Le.value.Kb=me}}else if(S.Sb==="type"){for(e.i.presentationTimeline.sc(E=="static"),e.l.type=E,me=w(e.o.values()),we=me.next();!we.done;we=me.next())we.value.vb=E=="dynamic";E=="static"&&(e.H=-1)}else S.Sb==="publishTime"?e.l.td=Jo(E)||0:S.Sb===null&&m.tagName==="add"&&l.push(m);else if(S.name==="PatchLocation")Im(e.B,m);else if(S.name==="Period"){if(m.tagName==="add")l.push(m);else if(m.tagName==="remove"&&S.id){me=e,we=S.id,me.i.periodCount--,Le=w(me.o.keys());for(var Se=Le.next();!Se.done;Se=Le.next())if(Se=Se.value,Se.startsWith(we)){var Be=me.o.get(Se);Ns(Be,jr,"SegmentTimeline").children=[],Wv(me,Se),me.o.delete(Se)}}}else if(S.name==="SegmentTemplate"){if(we=Mu(m.attributes.sel||""),me=we[we.length-1],me.Sb){for(we=Xv(e,we),Le=Wi(m)||"",Se=w(we),Be=Se.next();!Be.done;Be=Se.next())Be=e.o.get(Be.value),Rm(Be.J.$b,m.tagName,me.Sb,Le);me=we}else me=[];for(k=me,M=w(k),I=M.next();!I.done;I=M.next())U=I.value,u.add(U)}else if(S.name==="SegmentTimeline"||S.name==="S"){for(me=Mu(m.attributes.sel||""),me=Xv(e,me),we=w(me),Le=we.next();!Le.done;Le=we.next())Le=e.o.get(Le.value),Le=Ns(Le,jr,"SegmentTimeline"),Se=Ht(Le,"S"),Im(Se,m),Le.children=Se;for(N=me,z=w(N),P=z.next();!P.done;P=z.next())j=P.value,u.add(j)}for(G=w(u),Z=G.next();!Z.done;Z=G.next())ee=Z.value,Wv(e,ee);for(fe=w(l),te=fe.next();!te.done;te=fe.next())ne=te.value,a.push.apply(a,L(Yv(e,{vb:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:e.l.Ia,profiles:e.l.profiles,Kb:e.l.Kb,roles:null},e.l.Ga,ne).periods));return a.length?(e.i.periodCount+=a.length,e.i.gapCount=e.K,A(xe,Gv(e,a,!0),2)):xe.u(2)}e.l.type=="static"&&(ae=e.l.Kb,e.i.presentationTimeline.Za(ae||1/0)),Y(xe)})}function Xv(e,t){var n="",o="",a=-1,l="";t=w(t);for(var u=t.next();!u.done;u=t.next())u=u.value,u.name==="Period"?n=u.id:u.name==="AdaptationSet"?(o=u.id,u.position!==null&&(a=u.position)):u.name==="Representation"&&(l=u.id);if(t=[],l)t.push(n+","+l);else if(o)for(a=w(e.o.values()),e=a.next();!e.done;e=a.next())e=e.value,e.ta.id===n&&e.ja.id===o&&e.J.id&&t.push(n+","+e.J.id);else if(-1<a)for(o=w(e.o.values()),e=o.next();!e.done;e=o.next())e=e.value,e.ta.id===n&&e.ja.position===a&&e.J.id&&t.push(n+","+e.J.id);return t}function Wv(e,t){var n=e.o.get(t),o=e.s[t];o.segmentIndex&&o.segmentIndex.Ma(e.i.presentationTimeline.mb());try{var a=Rv(n,function(l,u,c,p){return Zv(e,l,u,c,p)},e.s,!0,e.g.dash.initialSegmentLimit,e.ba,n.J.aesKey,null,!0);o.createSegmentIndex=function(){return F(function(l){if(l.g==1)return o.segmentIndex?l.u(0):A(l,a.fc(),3);o.segmentIndex=l.h,Y(l)})}}catch(l){if(t=n.J.contentType,t!=Tt&&t!="application"&&t!="image"||l.code!=4002)throw l}}function sk(e){var t=qi(e,"ServiceDescription");if(!t||(e=qi(t,"Latency"),t=qi(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function ak(e){if(e=Ht(e,"SupplementalProperty"),!e.length)return null;e=w(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function Yv(e,t,n,o){var a=t.Kb;a||(a=Et(o,"mediaPresentationDuration",vo),e.l.Kb=a);var l=0;e.i&&e.i.presentationTimeline&&e.Z&&(l=e.i.presentationTimeline.Vb());var u=[],c=l;o=Ht(o,"Period");for(var p=0;p<o.length;p++){var m=o[p],v=o[p+1],S=Et(m,"start",vo,c),E=m.attributes.id,T=Et(m,"duration",vo),k=null;if(v){var M=Et(v,"start",vo);M!=null&&(k=M-S)}else a!=null&&(k=a-S+l);if(M=DC,k&&T&&Math.abs(k-T)>M&&k>T&&e.K++,k==null&&(k=T),!(e.L!==null&&E!==null&&S!==null&&S<e.L)||e.fa.includes(E)||p+1==o.length){if(S!==null&&(e.L===null||S>e.L)&&(e.L=S),c=lk(e,t,n,{start:S,duration:k,node:m,ld:k==null||!v}),u.push(c),t.ta.id&&k&&(e.ba[t.ta.id]=k),k==null){c=null;break}c=S+k}}return e.fa=u.map(function(I){return I.id}),a!=null?{periods:u,duration:a+l,rg:!1}:{periods:u,duration:c,rg:!0}}function lk(e,t,n,o){t.ta=wp(e,o.node,null,n),t.ka=o,t.ta.Ia=t.Ia,t.ta.id||(t.ta.id="__shaka_period_"+o.start);var a=Ht(o.node,"EventStream");n=t.presentationTimeline.mb(),a=w(a);for(var l=a.next();!l.done;l=a.next())mk(e,o.start,o.duration,l.value,n);if(n=Ht(o.node,"AdaptationSet").map(function(v,S){return uk(e,t,S,v)}).filter(Ir),t.vb){for(o=[],a=w(n),l=a.next();!l.done;l=a.next()){l=w(l.value.Mi);for(var u=l.next();!u.done;u=l.next())o.push(u.value)}if(o.length!=new Set(o).size)throw new J(2,4,4018)}for(o=n.filter(function(v){return!v.Yf}),n=n.filter(function(v){return v.Yf}),n=w(n),a=n.next();!a.done;a=n.next()){a=a.value,l=a.Yf.split(" "),u=w(o);for(var c=u.next();!c.done;c=u.next())if(c=c.value,l.includes(c.id)){c=w(c.streams);for(var p=c.next(),m={};!p.done;m={Sf:void 0},p=c.next())m.Sf=p.value,m.Sf.trickModeVideo=a.streams.find(function(v){return function(S){return Qn(v.Sf.codecs)==Qn(S.codecs)}}(m))}}if(n=Df(e.g.disableAudio,o,"audio"),a=Df(e.g.disableVideo,o,"video"),l=Df(e.g.disableText,o,Tt),o=Df(e.g.disableThumbnails,o,"image"),a.length===0&&n.length===0)throw new J(2,4,4004);return{id:t.ta.id,audioStreams:n,videoStreams:a,textStreams:l,imageStreams:o}}function Df(e,t,n){return e||!t.length?[]:t.reduce(function(o,a){return a.contentType!=n||o.push.apply(o,L(a.streams)),o},[])}function uk(e,t,n,o){function a(ne){switch(ne){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function l(ne){switch(ne){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ja=wp(e,o,t.ta,null),t.ja.position=n;var u=!1;n=Ht(o,"Role");var c=n.map(function(ne){return ne.attributes.value}).filter(Ir),p=void 0,m=t.ja.contentType==Tt;m&&(p="subtitle"),n=w(n);for(var v=n.next();!v.done;v=n.next()){v=v.value;var S=v.attributes.schemeIdUri;if(S==null||S=="urn:mpeg:dash:role:2011")switch(v=v.attributes.value,v){case"main":u=!0;break;case"caption":case"subtitle":p=v}}var E,T;S=Ht(o,"EssentialProperty"),n=null;var k=!1;v=!1,S=w(S);for(var M=S.next();!M.done;M=S.next()){M=M.value;var I=M.attributes.schemeIdUri;I=="http://dashif.org/guidelines/trickmode"?n=M.attributes.value:I=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?E=l(parseInt(M.attributes.value,10)):I=="urn:mpeg:mpegB:cicp:ColourPrimaries"?T=a(parseInt(M.attributes.value,10)):I!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(I=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?k=!0:v=!0)}var U=null;for(S=Ht(o,"SupplementalProperty"),S=w(S),M=S.next();!M.done;M=S.next())M=M.value,I=M.attributes.schemeIdUri,I=="http://dashif.org/guidelines/last-segment-number"?U=parseInt(M.attributes.value,10)-1:I=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?E=l(parseInt(M.attributes.value,10)):I=="urn:mpeg:mpegB:cicp:ColourPrimaries"&&(T=a(parseInt(M.attributes.value,10)));S=Ht(o,"Accessibility");var N=new Map,z;for(S=w(S),M=S.next();!M.done;M=S.next())if(I=M.value,M=I.attributes.schemeIdUri,I=I.attributes.value,M!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(M!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)M=="urn:mpeg:dash:role:2011"?I!=null&&(c.push(I),I=="captions"&&(p="caption")):M=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(I=="1"?z="visually impaired":I=="2"&&(z="hard of hearing"));else if(M=1,I!=null){I=w(I.split(";"));for(var P=I.next();!P.done;P=I.next()){var j=P.value,G=P=void 0;j.includes("=")?(j=j.split("="),P="svc"+j[0],G=j[1].split(",")[0].split(":").pop()):(P="svc"+M,M++,G=j),N.set(P,Nt(G))}}else N.set("svc1","und");else if(M=1,I!=null)for(I=I.split(";"),P=w(I),j=P.next();!j.done;j=P.next()){G=j.value;var Z=j=void 0;G.includes("=")?(G=G.split("="),j=G[0].startsWith("CC")?G[0]:"CC"+G[0],Z=G[1]||"und"):(j="CC"+M,I.length==2?M+=2:M++,Z=G),N.set(j,Nt(Z))}else N.set("CC1","und");if(v)return null;v=Ht(o,"ContentProtection");var ee=wv(v,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),fe=Nt(t.ja.language||"und"),te=t.ja.label;if(v=Ht(o,"Representation"),o=v.map(function(ne){return(ne=fk(e,t,ee,p,fe,te,u,c,N,ne,z,U))&&(ne.hdr=ne.hdr||E,ne.colorGamut=ne.colorGamut||T,ne.fastSwitching=k),ne}).filter(function(ne){return!!ne}),o.length==0){if(n=t.ja.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||m||n)return null;throw new J(2,4,4003)}if(!t.ja.contentType||t.ja.contentType=="application")for(t.ja.contentType=Qv(o[0].mimeType,o[0].codecs),m=w(o),S=m.next();!S.done;S=m.next())S.value.type=t.ja.contentType;for(m=t.ja.id||"__fake__"+e.ea++,S=w(o),M=S.next();!M.done;M=S.next()){for(M=M.value,I=w(ee.drmInfos),P=I.next();!P.done;P=I.next())P=P.value,P.keyIds=P.keyIds&&M.keyIds?new Set([].concat(L(P.keyIds),L(M.keyIds))):P.keyIds||M.keyIds;e.g.dash.enableAudioGroups&&(M.groupId=m)}return v=v.map(function(ne){return ne.attributes.id}).filter(Ir),{id:m,contentType:t.ja.contentType,language:fe,ek:u,streams:o,drmInfos:ee.drmInfos,Yf:n,Mi:v}}function fk(e,t,n,o,a,l,u,c,p,m,v,S){t.J=wp(e,m,t.ja,null);var E=t.J.id;if(e.R=Math.min(e.R,t.J.Ia),e.U=0<e.R,!pk(t.J))return null;var T=t.ka.start;t.bandwidth=Et(m,"bandwidth",Lo)||0,t.roles=c;var k=t.J.contentType,M=k==Tt||k=="application";k=k=="image";try{var I=void 0;if(n.Fe){var U=t.J.Ga,N=Dn(U(),[n.Fe.ti]),z=kn(N,e.g.retryParameters);I={bitsKey:128,blockCipherMode:"CBC",iv:n.Fe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var ae,xe,me;return F(function(we){if(we.g==1)return A(we,Sp(e,z,6),2);if(we.g!=3){if(ae=we.h,!ae.data||ae.data.byteLength!=16)throw new J(2,4,4049);return xe={name:"AES-CBC"},me=I,A(we,d.crypto.subtle.importKey("raw",ae.data,xe,!0,["decrypt"]),3)}me.cryptoKey=we.h,I.fetchKey=void 0,Y(we)})}}}if(t.J.aesKey=I,U=function(ae,xe,me,we){return Zv(e,ae,xe,me,we)},t.J.Rc)var P=Db(t,U,I);else if(t.J.Pb)P=Ob(t,e.s,I);else if(t.J.$b)P=Rv(t,U,e.s,!!e.i,e.g.dash.initialSegmentLimit,e.ba,I,S,!1);else{var j=t.ka.duration||0,G=t.J.Ga,Z=t.J.mimeType,ee=t.J.codecs;P={fc:function(){var ae=dd(T,j,G());return ae.Hb(function(xe){xe.mimeType=Z,xe.codecs=ee}),Promise.resolve(ae)}}}}catch(ae){if((M||k)&&ae.code==4002)return null;throw ae}S=Ht(m,"ContentProtection"),S=vb(S,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),S=new Set(S?[S]:[]),U=!1,Ht(m,"SupplementalProperty").some(function(ae){return ae.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&ae.attributes.value=="JOC"})&&(U=!0),N=!1,M&&(N=c.includes("forced_subtitle")||c.includes("forced-subtitle"));var fe;if(k&&((m=Ht(m,"EssentialProperty").find(function(ae){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(ae.attributes.schemeIdUri)}))&&(fe=m.attributes.value),!fe))return null;var te;m=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(m.includes("hvc1.2.4.L153.B0")||m.includes("hev1.2.4.L153.B0"))&&(te="PQ"),M=t.J.id?t.ta.id+","+t.J.id:"",e.B.length&&E&&e.o.set(t.ta.id+","+E,ck(t));var ne=M&&e.s[M]?e.s[M]:{id:e.ea++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){ne.segmentIndex&&(ne.segmentIndex.release(),ne.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:m,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:o,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:S,language:a,originalLanguage:t.ja.language,label:l,type:t.ja.contentType,primary:u,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:c,forced:N,channelsCount:t.J.Jc,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:U,closedCaptions:p,hdr:te,colorGamut:void 0,videoLayout:void 0,tilesLayout:fe,accessibilityPurpose:v,external:!1,fastSwitching:!1,fullMimeTypes:new Set([wn(t.J.mimeType,t.J.codecs)])};return ne.createSegmentIndex=function(){var ae;return F(function(xe){if(xe.g==1)return ne.segmentIndex?xe.u(0):(ae=ne,A(xe,P.fc(),3));ae.segmentIndex=xe.h,Y(xe)})},M&&t.vb&&!e.s[M]&&(e.s[M]=ne),ne}function ck(e){for(var t={},n=w(Object.keys(e)),o=n.next();!o.done;o=n.next())if(o=o.value,["period","adaptationSet","representation"].includes(o)){var a=e[o];t[o]={Rc:null,Pb:null,$b:a.$b,Ga:a.Ga,width:a.width,height:a.height,contentType:a.contentType,mimeType:a.mimeType,language:a.language,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,emsgSchemeIdUris:a.emsgSchemeIdUris,id:a.id,position:a.position,Jc:a.Jc,audioSamplingRate:a.audioSamplingRate,Ia:a.Ia,Gc:a.Gc}}else o=="periodInfo"?(a=e[o],t[o]={start:a.start,duration:a.duration,node:null,ld:a.ld}):t[o]=e[o];return t}function qv(e){var t,n;return F(function(o){switch(o.g){case 1:return t=0,le(o,2),A(o,vp(e),4);case 4:t=o.h,de(o,3);break;case 2:if(n=se(o),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),o.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return o.return();e.j.onManifestUpdated(),xp(e,t),Y(o)}})}function xp(e,t){if(!(0>e.H)){var n=e.H;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.I.Y(Math.max(n-t,he(e.da)))}}function wp(e,t,n,o){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Jc:null,audioSamplingRate:null,Ia:0,Kf:0},o=o||n.Ga;var a=t.attributes.id,l=Ht(t,"BaseURL"),u,c=!1;if(e.h)for(var p=w(l),m=p.next();!m.done;m=p.next()){var v=m.value;m=v.attributes.serviceLocation,v=Wi(v),m&&v&&(Bs(e.h,a,m,v),c=!0)}c&&e.h||(u=l.map(Wi)),p=t.attributes.contentType||n.contentType,m=t.attributes.mimeType||n.mimeType,v=[t.attributes.codecs||n.codecs];var S=_o(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");S&&v.push(S),v=xd(v).join(","),S=Et(t,"frameRate",mT)||n.frameRate;var E=t.attributes.sar||n.pixelAspectRatio,T=hk(Ht(t,"InbandEventStream"),n.emsgSchemeIdUris),k=Ht(t,"AudioChannelConfiguration");k=dk(k)||n.Jc;var M=Et(t,"audioSamplingRate",Vn)||n.audioSamplingRate;p||(p=Qv(m,v));var I=qi(t,"SegmentBase"),U=qi(t,"SegmentTemplate"),N=I&&Et(I,"availabilityTimeOffset",Iu)||0,z=U&&Et(U,"availabilityTimeOffset",Iu)||0,P=l&&l.length&&Et(l[0],"availabilityTimeOffset",Iu)||0;N=n.Ia+P+N+z,z=null,(P=qi(t,"SegmentSequenceProperties"))&&(P=qi(P,"SAP"))&&(z=Et(P,"cadence",ku)),P=t.attributes.label;var j=Ht(t,"Label");return j&&j.length&&(j=j[0],Cn(j)&&(P=Cn(j))),{Ga:function(){return Dn(o(),l.length?e.h&&c?ul(e.h,a):u||[]:[])},Rc:I||n.Rc,Pb:qi(t,"SegmentList")||n.Pb,$b:U||n.$b,width:Et(t,"width",Vn)||n.width,height:Et(t,"height",Vn)||n.height,contentType:p,mimeType:m,codecs:v,frameRate:S,pixelAspectRatio:E,emsgSchemeIdUris:T,id:a,language:t.attributes.lang,Jc:k,audioSamplingRate:M,Ia:N,Gc:null,Kf:z||n.Kf,label:P||null}}function hk(e,t){t=t.slice(),e=w(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function dk(e){e=w(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function pk(e){var t=e.Rc?1:0;return t+=e.Pb?1:0,t+=e.$b?1:0,t==0?e.contentType==Tt||e.contentType=="application":(t!=1&&(e.Rc&&(e.Pb=null),e.$b=null),!0)}function Kv(e,t,n,o){var a,l,u,c,p,m,v;return F(function(S){if(S.g==1)return a=[Zn(n)],l=Dn(t(),a),u=kn(l,e.g.retryParameters),u.method=o,c=e.j.networkingEngine.request(4,u),_r(e.N,c),A(S,c.promise,2);if(p=S.h,o=="HEAD"){if(!p.headers||!p.headers.date)return S.return(0);m=p.headers.date}else m=Wt(p.data);return v=Date.parse(m),isNaN(v)?S.return(0):S.return(v-Date.now())})}function gk(e,t,n){var o,a,l,u,c,p,m,v;return F(function(S){switch(S.g){case 1:o=n.map(function(E){return{scheme:E.attributes.schemeIdUri,value:E.attributes.value}}),a=e.g.dash.clockSyncUri,!o.length&&a&&o.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:a}),l=w(o),u=l.next();case 2:if(u.done){S.u(4);break}switch(c=u.value,le(S,5),p=c.scheme,m=c.value,p){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return S.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return S.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return v=Date.parse(m),S.return(isNaN(v)?0:v-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ve("NTP UTCTiming scheme is not supported");break;default:Ve("Unrecognized scheme in UTCTiming element",p)}S.u(9);break;case 7:return A(S,Kv(e,t,m,"HEAD"),10);case 10:return S.return(S.h);case 8:return A(S,Kv(e,t,m,"GET"),11);case 11:return S.return(S.h);case 9:de(S,3);break;case 5:se(S);case 3:u=l.next(),S.u(2);break;case 4:return Ve("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),S.return(0)}})}function mk(e,t,n,o,a){var l=o.attributes.schemeIdUri||"",u=o.attributes.value||"",c=Et(o,"timescale",Vn)||1;o=w(Ht(o,"Event"));for(var p=o.next();!p.done;p=o.next()){p=p.value;var m=Et(p,"presentationTime",Vn)||0,v=Et(p,"duration",Vn)||0;m=m/c+t,v=m+v/c,n!=null&&(m=Math.min(m,t+n),v=Math.min(v,t+n)),v<a||(p={schemeIdUri:l,value:u,startTime:m,endTime:v,id:p.attributes.id||"",eventElement:_m(p),eventNode:p},e.j.onTimelineRegionAdded(p))}}function Zv(e,t,n,o,a){var l,u,c,p;return F(function(m){return m.g==1?(l=io,u=a?0:1,c=vs(t,n,o,e.g.retryParameters),A(m,Sp(e,c,l,{type:u}),2)):(p=m.h,m.return(p.data))})}function Qv(e,t){return t=wn(e,t),ka(t)?Tt:e.split("/")[0]}function Sp(e,t,n,o){return t=e.j.networkingEngine.request(n,t,o),_r(e.N,t),t.promise}function yk(e){var t=e.l.td;if(!e.l.ae||!t||!e.B.length)return[];var n=Date.now()/1e3,o=e.B.filter(function(a){return a=Vn(a.attributes.ttl),!a||t+a>n}).map(Wi).filter(Ir);return o.length?Dn(e.A,o):[]}ce("shaka.dash.DashParser",Pf),Ki["application/dash+xml"]=function(){return new Pf},Ki["video/vnd.mpeg.dash.mpd"]=function(){return new Pf};function Nf(){}ce("shaka.dependencies",Nf),Nf.has=function(e){return Cp.has(e)},Nf.add=function(e,t){if(!ex[e])throw Error(e+" is not supported");e==Jv?Ct("mux.js","mux.js is no longer used in Shaka Player."):Cp.set(e,function(){return t})};var Jv="muxjs",ex={fk:Jv,ISOBoxer:"ISOBoxer"};Nf.Allowed=ex;var Cp=new Map([["ISOBoxer",function(){return d.ISOBoxer}]]);function tx(e,t,n){this.type=e,this.g=t,this.segments=n||null}function nx(e,t,n,o){this.id=e,this.name=t,this.attributes=n,this.value=o===void 0?null:o}nx.prototype.toString=function(e){function t(a){return a.name+"="+(isNaN(Number(a.value))?'"'+a.value+'"':a.value)}var n="#"+this.name,o=this.attributes?this.attributes.filter(function(a){return e?!e.has(a.name):!0}).map(t):[];return this.value&&o.unshift(this.value),0<o.length&&(n+=":"+o.join(",")),n};function ix(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function gl(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function We(e,t,n){return(e=gl(e,t))?e.value:n||null}function Ot(e,t){if(e=gl(e,t),!e)throw new J(2,4,4023,t);return e.value}function ox(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.zb=n}function rx(e,t){this.name=e,this.value=t}function Ui(e,t){return e.filter(function(n){return n.name==t})}function sx(e,t){return e.filter(function(n){return Ot(n,"TYPE")==t})}function jn(e,t){e=w(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Fs(e,t,n){return n=n===void 0?0:n,(e=jn(e,t))?Number(e.value):n}function sr(e,t,n){return t?ax(e,[t],n):[]}function ax(e,t,n){if(!t.length)return[];t=Dn(e,t),e=[],t=w(t);for(var o=t.next();!o.done;o=t.next())e.push(lx(o.value,n));return e}function lx(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=w(n);for(var o=n.next();!o.done;o=n.next()){o=o.value;var a=o.slice(2,o.length-1),l=t.get(a);if(l)e=e.replace(o,l);else throw new J(2,4,4039,a)}}return e}function vk(){this.g=0}function Tp(e,t){t=Wt(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new J(2,4,4015);t=0;for(var o=!0,a=w(n),l=a.next();!l.done;l=a.next())if(l=l.value,/^#(?!EXT)/m.test(l)||o)o=!1;else if(l=Ep(e,l),--e.g,ux.includes(l.name)){t=1;break}else l.name=="EXT-X-STREAM-INF"&&(o=!0);for(a=[],o=!0,l=0;l<n.length;l++){var u=n[l],c=n[l+1];if(/^#(?!EXT)/m.test(u)||o)o=!1;else{if(u=Ep(e,u),xk.includes(u.name)){if(t!=1)throw new J(2,4,4017);u=n.splice(l,n.length-l),n=[],o=[],l=[],c=null,u=w(u);for(var p=u.next();!p.done;p=u.next())p=p.value,/^(#EXT)/.test(p)?(p=Ep(e,p),ux.includes(p.name)?a.push(p):p.name=="EXT-X-MAP"?c=p:p.name=="EXT-X-PART"?l.push(p):p.name=="EXT-X-PRELOAD-HINT"?We(p,"TYPE")=="PART"?l.push(p):We(p,"TYPE")=="MAP"&&(p.name="EXT-X-MAP",c=p):o.push(p)):/^#(?!EXT)/m.test(p)||(p=p.trim(),c&&o.push(c),n.push(new ox(p,o,l)),o=[],l=[]);return l.length&&(c&&o.push(c),n.push(new ox("",o,l))),new tx(t,a,n)}a.push(u),u.name=="EXT-X-STREAM-INF"&&(u.attributes.push(new rx("URI",c)),o=!0)}}return new tx(t,a)}function Ep(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new J(2,4,4016,t);t=n[1];var o=n[2];n=[];var a;if(o){o=new ir(o);var l;(l=Uo(o,/^([^,=]+)(?:,|$)/g))&&(a=l[1]);for(var u=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;l=Uo(o,u);)n.push(new rx(l[1],l[2]||l[3])),Rs(o)}return new nx(e,t,n,a)}var ux="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),xk="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");function fx(){}function cx(e){try{var t=Ap(e);return ss({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return Rr(n)}}function Ap(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new J(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new J(2,1,1004,e);var n=t[0];e=d.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var o=!1;1<t.length&&t[t.length-1]=="base64"&&(o=!0,t.pop());var a;return o?a=Li(e):a=to(e),{data:a,contentType:n}}ce("shaka.net.DataUriPlugin",fx),fx.parse=cx,Io("data",cx);function Of(){var e=this;this.g=this.h=null,this.B=1,this.s=new Map,this.G=new Map,this.N=new Map,this.N.set("video",new Map),this.N.set("audio",new Map),this.N.set(Tt,new Map),this.N.set("image",new Map),this.ub=new Set,this.i=new Map,this.l=null,this.L="",this.Fa=new vk,this.H=-1,this.fa=1/0,this.ea=this.Gb=!1,this.A=new mt(function(){if(e.ba&&!e.g.continueLoadingWhenPaused&&(e.Z.jb(e.ba,"timeupdate"),e.ba.paused)){e.Z.ha(e.ba,"timeupdate",function(){return Lx(e)});return}Lx(e)}),this.xa=$f,this.m=null,this.ab=0,this.o=1/0,this.Da=this.za=this.U=0,this.da=new as,this.C=new Map,this.F=new Map,this.qa=new Map,this.oa=new Map,this.K=new Map,this.pa=new Map,this.ya=new Map,this.Fb=this.I=!1,this.Db=new Oe(5),this.j=null,this.R=!0,this.Ea=new Set,this.Z=new ct,this.ba=null}s=Of.prototype,s.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},s.start=function(e,t){var n=this,o;return F(function(a){return a.g==1?(n.h=t,n.I=t.isLowLatencyMode(),A(a,Pp(n,[e]),2)):a.g!=3?(o=a.h,n.L=o.uri,A(a,Ck(n,o.data,e),3)):a.return(n.m)})},s.stop=function(){this.A&&(this.A.stop(),this.A=null);var e=[];return this.da&&(e.push(this.da.destroy()),this.da=null),this.g=this.h=null,this.ub.clear(),this.m=null,this.i.clear(),this.G.clear(),this.F.clear(),this.s.clear(),this.qa.clear(),this.oa.clear(),this.K.clear(),this.pa.clear(),this.ya.clear(),this.Ea.clear(),this.j&&this.j.destroy(),this.Z&&(this.Z.release(),this.Z=null),Promise.all(e)},s.update=function(){var e=this,t,n,o,a,l,u,c,p,m,v,S,E;return F(function(T){if(T.g==1){if(!gi(e))return T.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,o=n.filter(function(k){return k.stream.segmentIndex}),a=w(o),l=a.next();!l.done;l=a.next())u=l.value,t.push(wk(e,u));return A(T,Promise.all(t),2)}for(wx(e,o.map(function(k){return k.stream})),c=o.some(function(k){return k.ed==0}),o.length&&!c&&(p=$k,jf(e,p.sh),m=o.map(function(k){return k.Jb}),e.l.Za(Math.min.apply(Math,L(m))),e.h.updateDuration()),c&&kp(e),v=w(o),S=v.next();!S.done;S=v.next())E=S.value,E.stream.segmentIndex&&!E.stream.segmentIndex.O[0]&&e.h.disableStream(E.stream);Y(T)})};function bp(e,t){return gi(e)?e.N.get(t.type):t.Yd}function wk(e,t){var n,o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe,te,ne,ae,xe,me,we,Le,Se,Be,st;return F(function(St){switch(St.g){case 1:for(n=[],o=w(t.M()),a=o.next();!a.done;a=o.next())l=a.value,u=new pn(l),c=u.g,t.Fd&&(0<=t.ob&&c.add("_HLS_msn",String(t.ob)),0<=t.pb&&c.add("_HLS_part",String(t.pb))),t.Gd&&c.add("_HLS_skip","YES"),Lg(c)&&xa(u,c),n.push(u.toString());return le(St,2),A(St,Pp(e,n,!0),4);case 4:p=St.h,de(St,3);break;case 2:throw m=se(St),e.h&&e.h.disableStream(t.stream),m;case 3:if(!t.stream.segmentIndex)return St.return();if(v=Tp(e.Fa,p.data),v.type!=1)throw new J(2,4,4017);return S=p.uri,S==p.originalUri||t.M().includes(S)||t.Tg.push(S),E=Ui(v.g,"EXT-X-DEFINE"),T=Ip(e,E,S),k=t.stream,M=bp(e,t),A(St,Ex(e,v,k.mimeType,t.M,T),5);case 5:for(I=St.h,U=I.keyIds,N=I.drmInfos,z=function(Qt,Mt){return Qt.size===Mt.size&&[].concat(L(Qt)).every(function(on){return Mt.has(on)})},z(k.keyIds,U)||(k.keyIds=U,k.drmInfos=N,e.h.newDrmInfo(k)),P=Mx(e,v,M,T,t.M,t.type),j=P.segments,(G=P.bandwidth)&&(k.bandwidth=G),Z=zu(k),ee=w(j),fe=ee.next();!fe.done;fe=ee.next())te=fe.value,te.$&&(te.$.Hc=Z);k.segmentIndex.rd(j,e.l.mb()),j.length&&(ne=Fs(v.g,"EXT-X-MEDIA-SEQUENCE",0),xe=(ae=jn(v.g,"EXT-X-SKIP"))?Number(We(ae,"SKIPPED-SEGMENTS")):0,me=Cx(ne,j),we=me.ob,Le=me.pb,t.ob=we+xe,t.pb=Le,Se=M.get(ne),k.segmentIndex.Ma(Se)),(Be=k.segmentIndex.O[0]||null)&&(t.mc=Be.startTime,st=j[j.length-1],t.Jb=st.endTime),jn(v.g,"EXT-X-ENDLIST")&&(t.ed=!0),Rp(e,v),_p(e,v.g,k.type,T,t.M),Y(St)}})}s.onExpirationUpdated=function(){},s.onInitialVariantChosen=function(){},s.banLocation=function(e){this.j&&this.j.banLocation(e)},s.setMediaElement=function(e){this.ba=e};function hx(e,t){for(var n=e.H==-1,o=w(t),a=o.next();!a.done;a=o.next()){a=a.value;var l=a.stream.segmentIndex,u=bp(e,a);if(l=l.O[0]||null){u=w(u);for(var c=u.next();!c.done;c=u.next()){c=w(c.value);var p=c.next().value;if(c.next().value==l.startTime){n&&(e.H=Math.max(e.H,p)),a.Re=p;break}}}}if(!(0>e.H))for(t=w(t),n=t.next();!n.done;n=t.next())n=n.value,ml(e,n.type)&&(o=n.stream.segmentIndex)&&(a=e.H-n.Re,0<a&&(o.O.splice(0,a),o=o.O[0]||null)&&(o=-o.startTime,n.stream.segmentIndex.offset(o),dx(e,n,o)))}function Sk(e,t){if(e.fa==1/0){t=w(t);for(var n=t.next();!n.done;n=t.next())n=n.value.stream.segmentIndex.O[0]||null,n!=null&&n.h!=null&&(e.fa=Math.min(e.fa,n.h))}if(t=e.fa,t!=1/0){n=w(e.i.values());for(var o=n.next();!o.done;o=n.next())if(o=o.value,!ml(e,o.type)){var a=o.stream.segmentIndex;if(a!=null){var l=a.O[0]||null;if(l)if(l.h==null)Pe("Missing EXT-X-PROGRAM-DATE-TIME for stream",o.M(),"Expect AV sync issues!");else for(dx(e,o,l.h-t-l.startTime),o=w(a),a=o.next();!a.done;a=o.next())a.value.Vf(t)}}}}function dx(e,t,n){t.mc+=n,t.Jb+=n,e=bp(e,t);for(var o=w(e),a=o.next();!a.done;a=o.next()){var l=w(a.value);a=l.next().value,l=l.next().value,e.set(a,l+n)}t.M()}function Ck(e,t,n){var o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe,te,ne,ae,xe,me,we,Le,Se,Be;return F(function(st){switch(st.g){case 1:return o=xn,a=Tp(e.Fa,t),l=Ui(a.g,"EXT-X-DEFINE"),u=[],c=[],p=[],e.l=new Qe(null,0),e.l.sc(!0),m=function(){return[n]},v=null,S=new Map,a.type==1?(e.R=!1,z=Ui(a.g,"EXT-X-DEFINE"),S=Ip(e,z,e.L),v=o.ga,P="",j=new Map,A(st,Sx(e,e.B++,S,a,m,"",v,P,!0,"Media Playlist",null,j,null,!1,null,!1),7)):(Ek(e,l),E=Ui(a.g,"EXT-X-MEDIA"),T=Ui(a.g,"EXT-X-STREAM-INF"),k=Ui(a.g,"EXT-X-IMAGE-STREAM-INF"),M=Ui(a.g,"EXT-X-I-FRAME-STREAM-INF"),I=Ui(a.g,"EXT-X-SESSION-KEY"),U=Ui(a.g,"EXT-X-SESSION-DATA"),N=Ui(a.g,"EXT-X-CONTENT-STEERING"),bk(e,U),A(st,kk(e,N),4));case 4:return Ak(e,T),Dk(e,E),A(st,_k(e,T,I,E,m,e.s),5);case 5:return u=st.h,c=Ik(e,E),A(st,Mk(e,k,M),6);case 6:p=st.h,st.u(3);break;case 7:G=st.h,e.i.set(n,G),G.stream&&(Z=zu(G.stream),G.stream.segmentIndex.Hb(function(St){St.$&&(St.$.Hc=Z)})),v=G.stream.type,u.push({id:0,language:Nt(P||"und"),disabledUntilTime:0,primary:!0,audio:v=="audio"?G.stream:null,video:v=="video"?G.stream:null,bandwidth:G.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new J(2,7,7001);if(a.type==1&&(gi(e)&&(bx(e,a),ee=e.o,e.A.Y(ee)),fe=Array.from(e.i.values()),Mp(e,fe),kp(e),_p(e,a.g,v,S,m)),e.m={presentationTimeline:e.l,variants:u,textStreams:c,imageStreams:p,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.ea||!e.g.hls.disableCodecGuessing){st.u(8);break}for(te=[],ne=w(e.m.variants),ae=ne.next();!ae.done;ae=ne.next())xe=ae.value,xe.audio&&xe.audio.codecs===""&&te.push(xe.audio.createSegmentIndex()),xe.video&&xe.video.codecs===""&&te.push(xe.video.createSegmentIndex());return A(st,Promise.all(te),8);case 8:if(e.h.makeTextStreamsForClosedCaptions(e.m),u.length==1){for(me=[],we=u[0],Le=w([we.video,we.audio]),Se=Le.next();!Se.done;Se=Le.next())(Be=Se.value)&&!Be.segmentIndex&&me.push(Be.createSegmentIndex());if(0<me.length)return A(st,Promise.all(me),0)}st.u(0)}})}function Tk(e,t){var n,o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee;return F(function(fe){switch(fe.g){case 1:if(n=Vu(e.g.hls.mediaPlaylistFullMimeType),!t.length)return fe.return(n);if(o=Rx(e,t),a=o.segment,l=o.segmentIndex,u=a.M(),c=u[0],p=new pn(c),m=p.Pa.split(".").pop(),v=Dp[m])return fe.return(Vu(v));if(S=io,T=E=null,k=a.$,!k){fe.u(2);break}return M=vs(k.M(),k.Xb(),k.Ub(),e.g.retryParameters),A(fe,Vo(e,M,S,{type:0}),3);case 3:if(I=fe.h,E=I.data,!k.aesKey){fe.u(4);break}return A(fe,wd(E,k.aesKey,0),5);case 5:E=fe.h;case 4:(T=I.headers["content-type"])&&(T=T.split(";")[0].toLowerCase());case 2:return U=vs(a.M(),a.Xb(),a.Ub(),e.g.retryParameters),A(fe,Vo(e,U,S,{type:1}),6);case 6:if(N=fe.h,z=N.data,!a.aesKey){fe.u(7);break}return A(fe,wd(z,a.aesKey,l),8);case 8:z=fe.h;case 7:if((P=N.headers["content-type"])&&(P=P.split(";")[0].toLowerCase()),j="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),G=["audio/mp4","video/mp4","video/iso.segment"],ja(Ze(z))){var te=z,ne=Ze(te);ne=new Gt().parse(ne);var ae=ne.$c();ne=ne.kf();var xe=[],me=!1,we=!1;switch(ae.audio){case"aac":case"aac-loas":xe.push("mp4a.40.2"),me=!0;break;case"mp3":xe.push("mp4a.40.34"),me=!0;break;case"ac3":xe.push("ac-3"),me=!0;break;case"ec3":xe.push("ec-3"),me=!0;break;case"opus":xe.push("opus"),me=!0}switch(ae.video){case"avc":ne.codec?xe.push(ne.codec):xe.push("avc1.42E01E"),we=!0;break;case"hvc":ne.codec?xe.push(ne.codec):xe.push("hvc1.1.6.L93.90"),we=!0;break;case"av1":xe.push("av01.0.01M.08"),we=!0}if(xe.length){if(ae=me&&!we,me=new Map,we){we=new sn("video/mp2t"),we.i(te),te=w(we.j());for(var Le=te.next();!Le.done;Le=te.next())Le=Le.value,me.set(Le,Le);we.g()}ne={type:ae?"audio":"video",mimeType:"video/mp2t",codecs:xe.join(", "),language:null,height:ne.height,width:ne.width,channelCount:null,sampleRate:null,closedCaptions:me,xd:null,colorGamut:null}}else ne=null;if(Z=ne)return fe.return(Z)}else if((j.includes(m)||G.includes(P)||T&&G.includes(T))&&(ee=xE(E,z)))return fe.return(ee);return P?fe.return(Vu(P)):T?fe.return(Vu(T)):fe.return(n)}})}function kp(e){if(gi(e)){if(e.xa==zf){for(var t,n=t=1/0,o=w(e.i.values()),a=o.next();!a.done;a=o.next())a=a.value,a.stream.segmentIndex&&a.stream.type!="text"&&(t=Math.min(t,a.Jb),n=Math.min(n,a.mc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.A),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.pe(t)}}else e.l.Za(xx(e));if(!e.l.s)for(t=w(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.bh(n.h);e.l.Wd()}function Ek(e,t){var n=new pn(e.L).g;t=w(t);for(var o=t.next();!o.done;o=t.next()){var a=o.value;o=We(a,"NAME");var l=We(a,"VALUE");a=We(a,"QUERYPARAM"),o&&l&&(e.s.has(o)||e.s.set(o,l)),a&&(o=n.get(a)[0])&&!e.s.has(o)&&e.s.set(a,o)}}function Ip(e,t,n){n=new pn(n).g;var o=new Map;t=w(t);for(var a=t.next();!a.done;a=t.next()){var l=a.value,u=We(l,"NAME"),c=We(l,"VALUE");a=We(l,"QUERYPARAM"),l=We(l,"IMPORT"),u&&c&&(o.has(u)||o.set(u,c)),a&&(u=n.get(a)[0])&&!o.has(u)&&o.set(a,u),l&&(a=e.s.get(l))&&o.set(l,a)}return o}function Ak(e,t){t=w(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value,a=We(o,"AUDIO");n=We(o,"VIDEO");var l=We(o,"SUBTITLES");if(o=px(e,o),l){var u=ai(Tt,o);e.F.set(l,u),Kn(o,u)}a&&(l=ai("audio",o),l||(l=e.g.hls.defaultAudioCodec),e.F.set(a,l)),n&&(a=ai("video",o),a||(a=e.g.hls.defaultVideoCodec),e.F.set(n,a))}}function bk(e,t){t=w(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value,a=We(o,"DATA-ID");n=We(o,"URI");var l=We(o,"LANGUAGE");o=We(o,"VALUE"),a=new Map().set("id",a),n&&a.set("uri",sr([e.L],n,e.s)[0]),l&&a.set("language",l),o&&a.set("value",o),n=new Fe("sessiondata",a),e.h&&e.h.onEvent(n)}}function kk(e,t){var n,o,a,l,u,c;return F(function(p){if(!e.h||!e.g)return p.return();for(o=w(t),a=o.next();!a.done;a=o.next())if(l=a.value,u=We(l,"PATHWAY-ID"),c=We(l,"SERVER-URI"),u&&c){e.j=new Us(e.h),e.j.configure(e.g),e.j.i=[e.L],e.j.setManifestType("HLS"),e.j.h=u,n=ll(e.j,c);break}return A(p,n,0)})}function Ik(e,t){var n=sx(t,"SUBTITLES");t=n.map(function(u){if(e.g.disableText)return null;try{return vx(e,[u],new Map).stream}catch(c){if(e.g.hls.ignoreTextStreamFailures)return null;throw c}}),n=w(n);for(var o=n.next();!o.done;o=n.next()){var a=Ot(o.value,"GROUP-ID");if((o=e.F.get(a))&&(a=e.G.get(a))){a=w(a);for(var l=a.next();!l.done;l=a.next())l=l.value,l.stream.codecs=o,l.stream.mimeType=Lp(Tt,o)||Bf(Tt),$s(l.stream)}}return t.filter(function(u){return u})}function $s(e){var t=new Set([wn(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Hb(function(n){n.mimeType&&t.add(wn(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function Mk(e,t,n){var o,a;return F(function(l){return l.g==1?(o=t.map(function(u){var c,p;return F(function(m){if(m.g==1)return e.g.disableThumbnails?m.return(null):(le(m,2),A(m,Nk(e,u),4));if(m.g!=2)return c=m.h,m.return(c.stream);if(p=se(m),e.g.hls.ignoreImageStreamFailures)return m.return(null);throw p})}).concat(n.map(function(u){if(e.g.disableThumbnails)return null;try{var c=Ot(u,"URI"),p=We(u,"CODECS")||"";if(e.i.has(c))var m=e.i.get(c);else{var v=We(u,"LANGUAGE"),S=We(u,"NAME"),E=We(u,"CHARACTERISTICS"),T=Uf(e,e.B++,[c],p,"image",v,!1,S,null,null,E,!1,null,!1),k=We(u,"RESOLUTION"),M=w(k?k.split("x"):[null,null]),I=M.next().value,U=M.next().value;T.stream.width=Number(I)||void 0,T.stream.height=Number(U)||void 0;var N=We(u,"BANDWIDTH");N&&(T.stream.bandwidth=Number(N)),e.i.set(c,T),m=T}return u=m,u.stream.codecs!=="mjpg"?null:u.stream}catch(z){if(e.g.hls.ignoreImageStreamFailures)return null;throw z}})),A(l,Promise.all(o),2)):(a=l.h,l.return(a.filter(function(u){return u})))})}function Rk(e,t,n){t=t.filter(function(c){var p=We(c,"URI")||"";return We(c,"TYPE")!="SUBTITLES"&&p!=""});var o={};t=w(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var l=ix(a,!e.j);o[l]?o[l].push(a):o[l]=[a]}for(var u in o)vx(e,o[u],n)}function _k(e,t,n,o,a,l){var u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe,te,ne,ae,xe,me,we,Le,Se,Be,st,St,Qt,Mt,on,yn;return F(function(Jt){switch(Jt.g){case 1:if(u=[],c=new Set,!(0<n.length)){Jt.u(2);break}p=w(n),m=p.next();case 3:if(m.done){Jt.u(2);break}if(v=m.value,S=Ot(v,"METHOD"),E=We(v,"KEYFORMAT")||"identity",T=null,S=="NONE"){Jt.u(4);break}if(Ff(S)){k=sr(a(),Ot(v,"URI"),l),M=k.sort().join(""),e.K.has(M)||(I=kn(k,e.g.retryParameters),U=Vo(e,I,6),e.K.set(M,U)),Jt.u(4);break}if(E!="identity"){T=(N=Nx[E])?N(v,""):null,Jt.u(6);break}return A(Jt,Px(e,v,"",a,null,l),9);case 9:T=Jt.h;case 6:if(T){if(T.keyIds)for(z=w(T.keyIds),P=z.next();!P.done;P=z.next())j=P.value,c.add(j);u.push(T)}case 4:m=p.next(),Jt.u(3);break;case 2:for(G={},Z=w(t),ee=Z.next();!ee.done;ee=Z.next())fe=ee.value,te=ix(fe,!e.j),G[te]?G[te].push(fe):G[te]=[fe];ne=[];for(ae in G)xe=G[ae],me=xe[0],we=We(me,"FRAME-RATE"),Le=Number(We(me,"AVERAGE-BANDWIDTH"))||Number(Ot(me,"BANDWIDTH")),Se=We(me,"RESOLUTION"),Be=w(Se?Se.split("x"):[null,null]),st=Be.next().value,St=Be.next().value,Qt=We(me,"VIDEO-RANGE"),(Mt=We(me,"REQ-VIDEO-LAYOUT"))&&Mt.includes(",")&&(on=Mt.split(",").filter(function(Pt){return Pt=="CH-STEREO"||Pt=="CH-MONO"}),Mt=on[0]),Mt=Mt||"CH-MONO",yn=Lk(e,xe,o),ne.push.apply(ne,L(Pk(e,yn.audio,yn.video,Le,st,St,we,Qt,Mt,u,c)));return Jt.return(ne.filter(function(Pt){return Pt!=null}))}})}function Lk(e,t,n){for(var o={audio:[],video:[]},a=new Map,l=[],u=!1,c=!1,p=w(t),m=p.next();!m.done;m=p.next()){var v=m.value;m=We(v,"AUDIO");var S=We(v,"VIDEO"),E=m||S;E&&(l.includes(E)||l.push(E),(v=We(v,"PATHWAY-ID"))&&a.set(E,v),m?u=!0:S&&(c=!0))}l.length&&n.length&&(p=n.filter(function(M){return l.includes(Ot(M,"GROUP-ID"))}),Rk(e,p,a)),p=(a=l.sort().join(","))&&e.G.has(a)?e.G.get(a):[],u?o.audio.push.apply(o.audio,L(p)):c&&o.video.push.apply(o.video,L(p)),m=!1;var T=t.map(function(M){return Ot(M,"URI")});if(c=o.audio.find(function(M){return M&&M.M().find(function(I){return T.includes(I)})}),u=px(e,t[0]),S=ai("video",u),(E=ai("audio",u))&&!S?(c="audio",m=0<o.audio.length):!o.audio.length&&!o.video.length&&E&&S?(c="video",u=[[S,E].join()]):o.audio.length&&c?(c="audio",m=!0):c=o.video.length&&!o.audio.length?"audio":"video",!m){var k=v=E=S=m=null;!p.length&&(n=n.find(function(M){var I=We(M,"URI")||"",U=We(M,"TYPE");return M=Ot(M,"GROUP-ID"),U!="SUBTITLES"&&I==""&&l.includes(M)}))&&(m=We(n,"LANGUAGE"),S=We(n,"NAME"),E=gx(n),yx(n),v=We(n,"CHARACTERISTICS"),k=mx(n)),e=Ok(e,t,u,c,m,S,E,v,k),a&&(e.stream.groupId=a),o[e.stream.type]=[e]}return o}function px(e,t){var n=We(t,"CODECS")||"";return t=We(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(o){return o.split("/")[0]}),e.push.apply(e,L(t))),xd(e)}function gx(e){return(e=We(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function mx(e){return(e=We(e,"SAMPLE-RATE"))?parseInt(e,10):null}function yx(e){return(e=We(e,"CHANNELS"))?e.includes("/JOC"):!1}function Pk(e,t,n,o,a,l,u,c,p,m,v){for(var S=w(n),E=S.next();!E.done;E=S.next())_x(E.value.stream,a,l,u,c,p,null);for(a=e.g.disableAudio,(!t.length||a)&&(t=[null]),a=e.g.disableVideo,(!n.length||a)&&(n=[null]),a=[],t=w(t),l=t.next();!l.done;l=t.next())for(l=l.value,u=w(n),c=u.next();!c.done;c=u.next()){var T=c.value;(c=l?l.stream:null)&&(c.drmInfos=m,c.keyIds=v),(p=T?T.stream:null)&&(p.drmInfos=m,p.keyIds=v),p&&!c&&(p.bandwidth=o),!p&&c&&(c.bandwidth=o),S=l?l.stream.drmInfos:null,E=T?T.stream.drmInfos:null,T=T?T.M().sort().join(","):"";var k=l?l.M().sort().join(","):"";T=T+" - "+k,c&&p&&!Pg(S,E)||e.ub.has(T)||(c={id:e.B++,language:c?c.language:"und",disabledUntilTime:0,primary:!!c&&c.primary||!!p&&p.primary,audio:c,video:p,bandwidth:o,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},a.push(c),e.ub.add(T))}return a}function Dk(e,t){t=sx(t,"CLOSED-CAPTIONS"),e.R=t.length==0,t=w(t);for(var n=t.next();!n.done;n=t.next()){var o=n.value,a=We(o,"LANGUAGE");n=Nt(a||"und"),a||(a=We(o,"NAME"))&&(n=a),a=Ot(o,"GROUP-ID"),o=Ot(o,"INSTREAM-ID").replace("SERVICE","svc"),e.C.get(a)||e.C.set(a,new Map),e.C.get(a).set(o,n)}}function vx(e,t,n){for(var o=[],a=[],l=new Map,u=w(t),c=u.next();!c.done;c=u.next()){var p=c.value;c=Ot(p,"URI"),p=Ot(p,"GROUP-ID"),o.push(c),a.push(p),l.set(p,c)}if(u=a.sort().join(","),c=t[0],t="",p=Ot(c,"TYPE").toLowerCase(),p=="subtitles"&&(p=Tt),p==Tt)t=We(c,"CODECS")||"";else{a=w(a);for(var m=a.next();!m.done;m=a.next())if(m=m.value,e.F.has(m)){t=e.F.get(m);break}}if(a=o.sort().join(","),e.i.has(a))return e.i.get(a);if(m=e.B++,e.j){l=w(l);for(var v=l.next();!v.done;v=l.next()){var S=w(v.value);v=S.next().value,S=S.next().value,(v=n.get(v))&&Bs(e.j,m,v,S)}}n=We(c,"LANGUAGE"),l=We(c,"NAME"),v=We(c,"DEFAULT")=="YES",S=p=="audio"?gx(c):null;var E=p=="audio"?yx(c):!1,T=We(c,"CHARACTERISTICS"),k=We(c,"FORCED")=="YES";return c=p=="audio"?mx(c):null,o=Uf(e,m,o,t,p,n,v,l,S,null,T,k,c,E),o.stream&&(o.stream.groupId=u),e.G.has(u)?e.G.get(u).push(o):e.G.set(u,[o]),e.i.set(a,o),o}function Nk(e,t){var n,o,a,l,u,c,p,m,v,S;return F(function(E){return E.g==1?(n=Ot(t,"URI"),o=We(t,"CODECS","jpeg")||"",e.i.has(n)?E.return(e.i.get(n)):(a=We(t,"LANGUAGE"),l=We(t,"NAME"),u=We(t,"CHARACTERISTICS"),c=Uf(e,e.B++,[n],o,"image",a,!1,l,null,null,u,!1,null,!1),(p=We(t,"RESOLUTION"))?A(E,c.stream.createSegmentIndex(),3):E.u(2))):(E.g!=2&&(m=c.stream.segmentIndex.get(0),v=m.tilesLayout)&&(c.stream.width=Number(p.split("x")[0])*Number(v.split("x")[0]),c.stream.height=Number(p.split("x")[1])*Number(v.split("x")[1])),(S=We(t,"BANDWIDTH"))&&(c.stream.bandwidth=Number(S)),e.i.set(n,c),E.return(c))})}function Ok(e,t,n,o,a,l,u,c,p){for(var m=e.B++,v=[],S=w(t),E=S.next();!E.done;E=S.next()){var T=E.value;E=Ot(T,"URI"),T=We(T,"PATHWAY-ID"),e.j&&T&&Bs(e.j,m,T,E),v.push(E)}if(S=v.sort().join(","),e.i.has(S))return e.i.get(S);e:{if(t=We(t[0],"CLOSED-CAPTIONS"),o=="video"){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if(t!="NONE"){t=e.C.get(t);break e}e.R=!1}else if(!t&&e.C.size)for(t=w(e.C.keys()).next();!t.done;){t=e.C.get(t.value);break e}}t=null}return n=Qr(o,n),o=Uf(e,m,v,n,o,a,!1,l,u,t,c,!1,p,!1),e.i.set(S,o),o}function Uf(e,t,n,o,a,l,u,c,p,m,v,S,E,T){function k(j){var G,Z,ee,fe,te,ne,ae,xe,me,we,Le,Se,Be,st,St,Qt,Mt,on,yn,Jt,Pt,fn;return F(function(En){switch(En.g){case 1:return G=xn,Z=N.M(),le(En,2),A(En,Pp(e,N.M(),!0),4);case 4:ee=En.h,de(En,3);break;case 2:if(fe=se(En),I.closeSegmentIndex(),e.h.disableStream(I))return En.return();throw fe;case 3:if(j.aborted)return En.return();if(te=ee.uri,te==ee.originalUri||Z.includes(te)||U.push(te),ne=Tp(e.Fa,ee.data),ne.type!=1)throw new J(2,4,4017);return ae=Ui(ne.g,"EXT-X-DEFINE"),xe=Ip(e,ae,te),me=!1,(!e.ea&&e.g.hls.disableCodecGuessing||e.R&&a==G.ga&&!e.g.hls.disableClosedCaptionsDetection)&&0<ne.segments.length&&(e.R=!1,me=!0),we=!e.ea&&e.g.hls.disableCodecGuessing,Le=gi(e),A(En,Sx(e,0,xe,ne,M,o,a,l,u,c,p,m,v,S,E,T,void 0,me,we),5);case 5:if(Se=En.h,j.aborted)return En.return();if(Be=Se.stream,gi(e)&&!Le&&bx(e,ne),N.mc=Se.mc,N.Jb=Se.Jb,N.Gd=Se.Gd,N.Fd=Se.Fd,N.ed=Se.ed,N.Yd=Se.Yd,N.ob=Se.ob,N.pb=Se.pb,N.vf=!0,I.segmentIndex=Be.segmentIndex,I.encrypted=Be.encrypted,I.drmInfos=Be.drmInfos,I.keyIds=Be.keyIds,I.mimeType=Be.mimeType,I.bandwidth=I.bandwidth||Be.bandwidth,I.codecs=I.codecs||Be.codecs,I.closedCaptions=I.closedCaptions||Be.closedCaptions,I.width=I.width||Be.width,I.height=I.height||Be.height,I.hdr=I.hdr||Be.hdr,I.colorGamut=I.colorGamut||Be.colorGamut,I.language=="und"&&Be.language!="und"&&(I.language=Be.language),I.language=I.language||Be.language,I.channelsCount=I.channelsCount||Be.channelsCount,I.audioSamplingRate=I.audioSamplingRate||Be.audioSamplingRate,$s(I),I.drmInfos.length&&e.h.newDrmInfo(I),st=!1,(!m&&I.closedCaptions||m&&I.closedCaptions&&m.size!=I.closedCaptions.size)&&(st=!0),e.m&&st&&e.h.makeTextStreamsForClosedCaptions(e.m),a==G.ga||a==G.X)for(St=w(e.i.values()),Qt=St.next();!Qt.done;Qt=St.next())Mt=Qt.value,Mt.vf||Mt.type!=a||(Mt.stream.mimeType=Be.mimeType,$s(Mt.stream));a==G.ua&&(on=Be.segmentIndex.get(0))&&on.$&&(I.mimeType="application/mp4",$s(I)),yn=zu(I),I.segmentIndex.Hb(function(An){An.$&&(An.$.Hc=yn)}),Uk(e)&&(e.Gb?Mp(e,[N]):(e.Gb=!0,Jt=Array.from(e.i.values()),Pt=Jt.filter(function(An){return An.stream.segmentIndex}),Mp(e,Pt),kp(e),fn=e.o,0<fn&&e.A.Y(fn))),_p(e,ne.g,I.type,xe,M),Y(En)}})}function M(){return e.j&&1<n.length?ul(e.j,t):U.concat(ax([e.L],n,e.s))}var I=Tx(e,o,a,l,u,c,p,m,v,S,E,T),U=[],N={stream:I,type:a,Tg:U,M,mc:0,Jb:0,Yd:new Map,Gd:!1,Fd:!1,ed:!1,Re:-1,ob:-1,pb:-1,vf:!1},z=null,P=new AbortController;return I.createSegmentIndex=function(){return z||(P=new AbortController,z=new Promise(function(j){j(k(P.signal))}))},I.closeSegmentIndex=function(){z&&!I.segmentIndex&&P.abort(),I.segmentIndex&&(I.segmentIndex.release(),I.segmentIndex=null),z=null},N}function xx(e){var t=1/0;e=w(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.Jb));return t}function wx(e,t){var n=[];t=w(t);for(var o=t.next();!o.done;o=t.next())o=o.value,o.segmentIndex&&o.segmentIndex.Hb(function(a){n.push(a)});e.l.sd(n)}function Mp(e,t){if(!gi(e))for(var n=xx(e),o=w(t),a=o.next();!a.done;a=o.next())a.value.stream.segmentIndex.Bc(0,n);wx(e,t.map(function(l){return l.stream})),e.g.hls.ignoreManifestProgramDateTime?hx(e,t):(Sk(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&hx(e,t))}function ml(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function Uk(e){if(!e.m)return!1;var t=[],n=[];e=w(e.m.variants);for(var o=e.next();!o.done;o=e.next())o=o.value,o.video&&t.push(o.video),o.audio&&n.push(o.audio);return!(0<t.length&&!t.some(function(a){return a.segmentIndex})||0<n.length&&!n.some(function(a){return a.segmentIndex}))}function Sx(e,t,n,o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N){U=U===void 0?!0:U,N=N===void 0?!0:N;var z,P,j,G,Z,ee,fe,te,ne,ae,xe,me,we,Le,Se,Be,st,St,Qt,Mt,on,yn,Jt,Pt,fn,En;return F(function(An){switch(An.g){case 1:var vi=jn(o.g,"EXT-X-PLAYLIST-TYPE"),xi=jn(o.g,"EXT-X-ENDLIST");if(xi=vi&&vi.value=="VOD"||xi,vi=vi&&vi.value=="EVENT"&&!xi,vi=!xi&&!vi,xi?jf(e,$f):vi?jf(e,zf):jf(e,Ox),gi(e)&&Rp(e,o),z=gi(e)?e.N.get(u):new Map,P=Mx(e,o,z,n,a,u),j=P.segments,G=P.bandwidth,te=fe=ee=Z=null,!(0<j.length&&U)){An.u(2);break}return A(An,Tk(e,j),3);case 3:ne=An.h,u=ne.type,c=ne.language,v=ne.channelCount,k=ne.sampleRate,e.g.disableText||(S=ne.closedCaptions),ee=ne.height,Z=ne.width,fe=ne.xd,te=ne.colorGamut,N&&(I=ne.mimeType,l=ne.codecs);case 2:if(I){An.u(4);break}return A(An,Fk(e,u,l,j),5);case 5:I=An.h;case 4:return A(An,Ex(e,o,I,a,n),6);case 6:if(ae=An.h,xe=ae.drmInfos,me=ae.keyIds,we=ae.encrypted,Le=ae.wh,we&&!xe.length&&!Le)throw new J(2,4,4026);return Se=Tx(e,l,u,c,p,m,v,S,E,T,k,M),Se.encrypted=we,Se.drmInfos=xe,Se.keyIds=me,Se.mimeType=I,G&&(Se.bandwidth=G),$s(Se),u=="video"&&(Z||ee||fe||te)&&_x(Se,Z,ee,null,fe,null,te),gi(e)&&Rp(e,o),Be=j[0].startTime,st=j[j.length-1],St=st.endTime,Qt=new It(j),Se.segmentIndex=Qt,on=(Mt=jn(o.g,"EXT-X-SERVER-CONTROL"))?gl(Mt,"CAN-SKIP-UNTIL")!=null:!1,yn=Mt?gl(Mt,"CAN-BLOCK-RELOAD")!=null:!1,Jt=Fs(o.g,"EXT-X-MEDIA-SEQUENCE",0),Pt=Cx(Jt,j),fn=Pt.ob,En=Pt.pb,An.return({stream:Se,type:u,Tg:[],M:a,mc:Be,Jb:St,Gd:on,Fd:yn,ed:!1,Re:-1,ob:fn,pb:En,Yd:z,vf:!1})}})}function Cx(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{ob:e,pb:n};t=t[t.length-1];var o=t.g;return t.g.length?(n=o.length-1,o[o.length-1].preload||(e++,n=0),{ob:e,pb:n}):(e++,t.m&&(n=0),{ob:e,pb:n})}function Tx(e,t,n,o,a,l,u,c,p,m,v,S){var E=Lp(n,t)||Bf(n),T=[];if(p){p=w(p.split(","));for(var k=p.next();!k.done;k=p.next())T.push(k.value)}return p=void 0,k=null,n==Tt?p=T.includes("public.accessibility.transcribes-spoken-dialog")&&T.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":T.includes("public.accessibility.describes-video")&&(k="visually impaired"),T.length||p!=="subtitle"||T.push("subtitle"),e={id:e.B++,originalId:l,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:E,codecs:t,kind:n==Tt?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Nt(o||"und"),originalLanguage:o,label:l,type:n,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:T,forced:m,channelsCount:u,audioSamplingRate:v,spatialAudio:S,closedCaptions:c,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:k,external:!1,fastSwitching:!1,fullMimeTypes:new Set},$s(e),e}function Ex(e,t,n,o,a){var l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe,te,ne,ae,xe,me,we,Le;return F(function(Se){switch(Se.g){case 1:if(l=new Map,t.segments){for(u=w(t.segments),c=u.next();!c.done;c=u.next())if(p=c.value,m=Ui(p.g,"EXT-X-KEY"),v=null,m.length)for(v=kx(e,t,p.g,o,a),S=w(m),E=S.next();!E.done;E=S.next())T=E.value,l.set(T,v)}M=k=!1,I=[],U=new Set,N=w(l),z=N.next();case 2:if(z.done){Se.u(4);break}if(P=z.value,j=w(P),G=j.next().value,Z=j.next().value,ee=G,fe=Z,te=Ot(ee,"METHOD"),te=="NONE"){Se.u(3);break}if(k=!0,ne=We(ee,"KEYFORMAT")||"identity",ae=null,Ff(te)){M=!0,Se.u(3);break}if(ne!="identity"){ae=(xe=Nx[ne])?xe(ee,n):null,Se.u(6);break}return A(Se,Px(e,ee,n,o,fe,a),8);case 8:ae=Se.h;case 6:if(ae){if(ae.keyIds)for(me=w(ae.keyIds),we=me.next();!we.done;we=me.next())Le=we.value,U.add(Le);I.push(ae)}case 3:z=N.next(),Se.u(2);break;case 4:return Se.return({drmInfos:I,keyIds:U,encrypted:k,wh:M})}})}function Ax(e,t,n,o,a){if(!d.crypto||!d.crypto.subtle)throw Ve("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new J(2,4,4042);var l=0,u=We(t,"IV","");if(u){var c=Ar(u.substr(2));if(c.byteLength!=16)throw new J(2,4,4048)}else l=Fs(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+l,!e.oa.has(n)){var p={bitsKey:128,blockCipherMode:"CBC",iv:c,firstMediaSequenceNumber:l};switch(Ot(t,"METHOD")){case"AES-256":p.bitsKey=256;break;case"AES-256-CTR":p.bitsKey=256,p.blockCipherMode="CTR"}p.fetchKey=function(){var m,v,S,E,T,k;return F(function(M){if(M.g==1)return m=sr(o(),Ot(t,"URI"),a),v=m.sort().join(""),e.K.has(v)||(S=kn(m,e.g.retryParameters),E=Vo(e,S,6),e.K.set(v,E)),A(M,e.K.get(v),2);if(M.g!=3){if(T=M.h,!T.data||T.data.byteLength!=p.bitsKey/8)throw new J(2,4,4049);return k={name:p.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:p.bitsKey},A(M,d.crypto.subtle.importKey("raw",T.data,k,!0,["decrypt"]),3)}p.cryptoKey=M.h,p.fetchKey=void 0,Y(M)})},e.oa.set(n,p)}return e.oa.get(n)}function Rp(e,t){var n=1/0,o=t.segments;if(o.length)for(var a=o.length-1;0<=a;){var l=jn(o[a].g,"EXTINF");if(l){n=Number(l.value.split(",")[0]);break}a--}if(o=jn(t.g,"EXT-X-TARGETDURATION"),!o)throw new J(2,4,4024,"EXT-X-TARGETDURATION");o=Number(o.value),(a=jn(t.g,"EXT-X-PART-INF"))&&(e.U=Number(Ot(a,"PART-TARGET"))),t=jn(t.g,"EXT-X-SERVER-CONTROL"),e.I&&e.U?(e.o=e.Fb?5*e.U<=n?Math.min(e.U,e.o):Math.min(n,e.o):Math.min(e.U,e.o),e.Da=t?Number(Ot(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?gl(t,"HOLD-BACK"):null,e.za=n?Number(n.value):0),e.ab=Math.max(o,e.ab)}function bx(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.Da)t=e.Da;else if(e.za)t=e.za;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.ab*n}e.l.dh(0),e.l.Of(t),e.l.sc(!1)}function kx(e,t,n,o,a){var l=jn(n,"EXT-X-MAP");if(!l)return null;var u=Ot(l,"URI"),c=sr(o(),u,a);if(u=[c.toString(),We(l,"BYTERANGE","")].join("-"),!e.qa.has(u)){var p=void 0,m=null;n=w(n);for(var v=n.next();!v.done;v=n.next())v=v.value,v.name=="EXT-X-KEY"?Ff(Ot(v,"METHOD"))&&v.id<l.id&&(p=Ax(e,v,t,o,a)):v.name=="EXT-X-BYTERANGE"&&v.id<l.id&&(m=v);t=Bk(c,l,m,p),e.qa.set(u,t)}return e.qa.get(u)}function Bk(e,t,n,o){var a=0,l=null;return t=We(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(a=t.split("@"),l=Number(a[0]),a=Number(a[1]),l=a+l-1,o&&(n=l+1-a,n%16&&(l+=16-n%16))),new ui(function(){return e},a,l,null,null,null,o)}function jk(e,t,n,o,a,l,u,c,p){function m(Be){Be=new pn(Be).Pa.split(".").pop();var st=Np[u][Be];return st||(st=Dp[Be]),st}var v=o.g,S=jn(v,"EXTINF"),E=0,T=0,k=null;o.zb.length&&(e.m.isLowLatency=!0);var M=null;if(!e.g.hls.ignoreManifestProgramDateTime){var I=jn(v,"EXT-X-PROGRAM-DATE-TIME");I&&I.value&&(M=Jo(I.value))}var U=er;if(jn(v,"EXT-X-GAP")&&(e.m.gapCount++,U=2),!S){if(o.zb.length==0)throw new J(2,4,4024,"EXTINF");if(!e.I)return null}var N=[];I=!1;var z=null,P=!1,j=!1;if(e.I&&o.zb.length){E=t&&d.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var G=M,Z={},ee=0;ee<o.zb.length;Z={xe:void 0,ge:void 0},ee++){var fe=o.zb[ee],te=ee==0?n:N[N.length-1],ne=ee==0?a:te.endTime,ae=Number(We(fe,"DURATION"))||e.U;if(ae){var xe=ne+ae,me=0,we=null;if(fe.name=="EXT-X-PRELOAD-HINT"?(me=(me=We(fe,"BYTERANGE-START"))?Number(me):0,(te=We(fe,"BYTERANGE-LENGTH"))?we=me+Number(te)-1:me&&(we=Number.MAX_SAFE_INTEGER)):(me=We(fe,"BYTERANGE"),we=w(Ix(te,me)),me=we.next().value,we=we.next().value),Z.ge=We(fe,"URI"),Z.ge){te=er,We(fe,"GAP")=="YES"&&(e.m.gapCount++,te=2,P=!0),Z.xe=null;var Le=function(Be){return function(){return Be.xe==null&&(Be.xe=sr(c(),Be.ge,l)),Be.xe}}(Z);E&&0<=me&&we!=null&&(z=Le,I=!0),ne=new Je(ne,xe,Le,me,we,t,0,0,1/0,[],"",null,G,te,p),fe.name=="EXT-X-PRELOAD-HINT"&&(ne.wf(),j=!0),We(fe,"INDEPENDENT")!="YES"&&0<ee&&ne.Xd(),(Z=m(Z.ge))&&(ne.mimeType=Z,Dx.has(Z)&&(ne.$=null)),N.push(ne),G&&(G+=ae)}}}}if(S){if(S=Number(S.value.split(",")[0]),S==0)return null;E=a+S}else if(N.length)E=N[N.length-1].endTime;else return null;I&&(P||N[0].Ha!=0?(I=!1,z=null):N=[]),(S=jn(v,"EXT-X-BYTERANGE"))?(k=w(Ix(n,S.value)),T=k.next().value,k=k.next().value):N.length&&(T=N[0].Ha,k=N[N.length-1].sa),n="",S=null,u=="image"&&(n="1x1",v=jn(v,"EXT-X-TILES"))&&(n=Ot(v,"LAYOUT"),(v=We(v,"DURATION"))&&(S=Number(v)));var Se=null;return t=new Je(a,E,function(){return z?z():(Se==null&&(Se=sr(c(),o.h,l)),Se||[])},T,k,t,0,0,1/0,N,n,S,M,U,p,0<N.length&&!!o.h),(a=m(o.h))&&(t.mimeType=a,Dx.has(a)&&(t.$=null)),I&&(e.Fb=!0,t.Ig(),j&&t.wf()),t}function Ix(e,t){var n=0,o=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.sa+1,o=n+t-1),[n,o]}function _p(e,t,n,o,a){if(n=="video"||n=="audio"){var l=e.l.m;if(l&&!ml(e,n))for(t=Ui(t,"EXT-X-DATERANGE"),t=t.sort(function(M,I){return M=Ot(M,"START-DATE"),I=Ot(I,"START-DATE"),M<I?-1:M>I?1:0}),n=0;n<t.length;n++){var u=t[n],c=Ot(u,"ID");if(!e.Ea.has(c)){var p=Ot(u,"START-DATE"),m=Jo(p);if(!isNaN(m)){p=Math.max(0,m-l);var v=null,S=We(u,"END-DATE");if(S&&(S=Jo(S),!isNaN(S)&&(v=S-l,0>v))||v==null&&(S=We(u,"DURATION")||We(u,"PLANNED-DURATION"))&&(S=parseFloat(S),isNaN(S)||(v=p+S),0>m-l+S))continue;S=We(u,"CLASS")||"com.apple.quicktime.HLS";var E=We(u,"END-ON-NEXT")=="YES";if(v==null&&E){for(E=n+1;E<t.length;E++){var T=We(t[E],"CLASS")||"com.apple.quicktime.HLS";if(S==T&&(T=Ot(t[E],"START-DATE"),T=Jo(T),!isNaN(T)&&T&&T>m)){v=Math.max(0,T-l);break}}if(v==null)continue}for(m="ID CLASS START-DATE END-DATE DURATION END-ON-NEXT".split(" "),E=[],u=w(u.attributes),T=u.next();!T.done;T=u.next())if(T=T.value,!m.includes(T.name)){var k=lx(T.value,o);(T.name=="X-ASSET-URI"||T.name=="X-ASSET-LIST")&&(k=sr(a(),T.value,o)[0]),E.push({key:T.name,description:"",data:k,mimeType:null,pictureType:null})}E.length&&e.h.onMetadata(S,p,v,E),e.Ea.add(c)}}}}}function Mx(e,t,n,o,a,l){var u=t.segments,c=void 0,p=Fs(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),m=Fs(t.g,"EXT-X-MEDIA-SEQUENCE",0),v=jn(t.g,"EXT-X-SKIP"),S=v?Number(We(v,"SKIPPED-SEGMENTS")):0,E=m+S,T=0;gi(e)&&n.has(E)&&(T=n.get(E)),T===0&&e.xa==zf&&0<n.size&&!n.has(E)&&(T=e.l.mb());var k=[],M=null;v=[];for(var I=0;I<u.length;I++){var U=u[I],N=I==0?T:M.endTime;E=m+S+I,jn(U.g,"EXT-X-DISCONTINUITY")&&p++;for(var z=w(U.g),P=z.next();!P.done;P=z.next())P=P.value,P.name=="EXT-X-KEY"&&(Ff(Ot(P,"METHOD"))?c=Ax(e,P,t,a,o):c=void 0);n.set(E,N),z=kx(e,t,U.g,a,o),!e.I&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.I=e.h.isLowLatencyMode()),(N=jk(e,z,M,U,N,o,l,a,c))&&((M=Fs(U.g,"EXT-X-BITRATE"))?v.push({bitrate:M,duration:N.endTime-N.startTime}):v.length&&(M=v.pop(),M.duration+=N.endTime-N.startTime,v.push(M)),M=N,N.i=p,ml(e,l)&&e.H!=null&&E<e.H||k.push(N))}if(t=void 0,v.length&&(t=v.reduce(function(j,G){return j+G.duration},0),t=Math.round(v.reduce(function(j,G){return j+G.bitrate*G.duration},0)/t*1e3)),v=k.some(function(j){return j.h!=null})){for(n={},o=0;o<k.length;n={Kd:void 0,Jd:void 0,Bd:void 0,pc:void 0,zd:void 0},o++)if(n.pc=k[o],n.pc.h==null)for(n.Jd=0,n.Kd=o,a=function(j){return function(){var G=k[j.Kd];if(G){if(G.h!=null)return G.h+j.Jd;j.Jd-=G.endTime-G.startTime,j.Kd+=1}return null}}(n),n.zd=0,n.Bd=o,u=function(j){return function(){var G=k[j.Bd];if(G){if(G!=j.pc&&(j.zd+=G.endTime-G.startTime),G.h!=null)return G.h+j.zd;--j.Bd}return null}}(n);n.pc.h==null;)n.pc.h=u(),n.pc.h==null&&(n.pc.h=a())}if(v)for(n=w(k),o=n.next();!o.done;o=n.next())for(a=o.value,o=a.h,a=w(a.g),u=a.next();!u.done;u=a.next())u=u.value,u.h=o,o+=u.endTime-u.startTime;if(n=e.fa,v&&n!=1/0&&!ml(e,l))for(e=w(k),l=e.next();!l.done;l=e.next())l.value.Vf(n);return{segments:k,bandwidth:t}}function Lp(e,t){if(e==Tt){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function Bf(e){return e==Tt?"text/vtt":Np[e].mp4}function Rx(e,t){e=gi(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.Yb()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function Fk(e,t,n,o){var a,l,u,c,p,m,v,S,E,T,k,M,I,U;return F(function(N){switch(N.g){case 1:return a=io,l=Rx(e,o),u=l.segment,u.status==2?N.return(Bf(t)):(c=u.M(),p=new pn(c[0]),m=p.Pa.split(".").pop(),v=Np[t],(S=v[m])||(S=Dp[m])||(S=Lp(t,n))?N.return(S):(T=1,k=kn(c,e.g.retryParameters),le(N,2),k.method="HEAD",A(N,Vo(e,k,a,{type:T}),4)));case 4:M=N.h,E=M.headers["content-type"],de(N,3);break;case 2:if(I=se(N),!I||I.code!=1002&&I.code!=1001){N.u(3);break}return k.method="GET",A(N,Vo(e,k,a,{type:T}),6);case 6:U=N.h,E=U.headers["content-type"];case 3:return E?N.return(E.toLowerCase().split(";")[0]):N.return(Bf(t))}})}function _x(e,t,n,o,a,l,u){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(o)||void 0,e.hdr=a||void 0,e.videoLayout=l||void 0,e.colorGamut=u||void 0)}function Pp(e,t,n){return Vo(e,kn(t,e.g.retryParameters),0,{type:n?2:3})}function Lx(e){var t,n,o,a,l,u;return F(function(c){switch(c.g){case 1:return e.h?(le(c,2),t=Date.now(),A(c,e.update(),4)):c.return();case 4:n=Date.now(),gi(e)&&(o=(n-t)/1e3,e.Db.sample(1,o),a=e.o,l=Math.max(0,a-he(e.Db)),e.A.Y(l)),de(c,3);break;case 2:if(u=se(c),!e.h)return c.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(u),c.return();u.severity=1,e.h.onError(u),e.A.Y(.1);case 3:if(!e.h)return c.return();e.h.onManifestUpdated(),Y(c)}})}function gi(e){return e.xa!=$f}function jf(e,t){e.xa=t,e.l&&e.l.sc(!gi(e)),gi(e)||e.A.stop()}function Vo(e,t,n,o){if(!e.da)throw new J(2,7,7001);return t=e.h.networkingEngine.request(n,t,o),_r(e.da,t),t.promise}function Ff(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function Px(e,t,n,o,a,l){var u,c,p,m,v,S,E,T,k,M,I,U,N,z,P;return F(function(j){switch(j.g){case 1:if(n=="video/mp2t")throw new J(2,4,4040);if(hu())throw new J(2,4,4041);if(u=Ot(t,"METHOD"),c=["SAMPLE-AES","SAMPLE-AES-CTR"],!c.includes(u))return j.return(null);if(p=sr(o(),Ot(t,"URI"),l),p[0].startsWith("data:text/plain;base64,")){m=bo(Li(p[0].split("data:text/plain;base64,").pop())),j.u(2);break}return v=p.sort().join(""),e.pa.has(v)||(S=kn(p,e.g.retryParameters),E=Vo(e,S,6),e.pa.set(v,E)),A(j,e.pa.get(v),3);case 3:T=j.h,m=bo(T.data);case 2:if(k="00000000000000000000000000000000",!a){j.u(4);break}if(e.ya.has(a)){M=e.ya.get(a),j.u(5);break}return I=vs(a.M(),a.Xb(),a.Ub(),e.g.retryParameters),U=io,A(j,Vo(e,I,U,{type:0}),6);case 6:N=j.h,M=SE(N.data),e.ya.set(a,M);case 5:M&&(k=M);case 4:return z=new Map,z.set(k,m),P="cenc",u=="SAMPLE-AES"&&(P="cbcs"),j.return(jg(z,P))}})}ce("shaka.hls.HlsParser",Of);var Dp={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},Np={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Dx=new Set(["video/mp2t"].concat(L(Zo))),Nx={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new J(2,4,4040);if(hu())throw new J(2,4,4041);if(t=Ot(e,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),br("com.apple.fps",n,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],Ot(e,"URI"))},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Ot(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=Ot(e,"URI"),t=Ap(t.split("?")[0]),t=Ze(t.data),n=br("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=We(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=Ot(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=Ot(e,"URI"),e=Ap(e.split("?")[0]),e=Ze(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Eu(e,t,new Set,0),br("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},$f="VOD",Ox="EVENT",zf="LIVE",$k={sh:$f,qj:Ox,yj:zf};Ki["application/x-mpegurl"]=function(){return new Of},Ki["application/vnd.apple.mpegurl"]=function(){return new Of};function zk(e){var t=0,n=Tn(e),o=n.getUint32(t,!0);if(o!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){o=n.getUint16(e,!0),e+=2;var a=n.getUint16(e,!0);if(e+=2,a&1||a+e>n.byteLength){n=[];break e}var l=Ze(n,e,a);t.push({type:o,value:l}),e+=a}n=t}return n}function Vf(e){if(e=Ux(e))e:{e=w(Yi(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=qi(t.value,"LA_URL")){e=Cn(t);break e}e=""}else e="";return e}function Ux(e){return e=Li(Cn(e)),e=zk(e).filter(function(t){return t.type===Vk})[0],e?(e=Eo(e.value,!0),(e=cs(e,"WRMHEADER"))?e:null):null}var Vk=1,Hk=new Map().set("com.microsoft.playready",Vf).set("com.microsoft.playready.recommendation",Vf).set("com.microsoft.playready.software",Vf).set("com.microsoft.playready.hardware",Vf);function zs(e){if(!$x){$x=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);Hf=wt("ftyp",t,o,t,n),t=wt("dref",t4),Op=wt("dinf",t)}this.g=e}function Vs(e){for(var t=[],n=w(e.g),o=n.next();!o.done;o=n.next()){var a=t,l=a.push,u=o.value;o=wt;var c=u.id+1,p=u.stream.width||0,m=u.stream.height||0;u.type=="audio"&&(m=p=0);var v=u.duration*u.timescale,S=Math.floor(v/(ar+1));switch(v=Math.floor(v%(ar+1)),c=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(L(Kt(c,4)),[0,0,0,0],L(Kt(S,4)),L(Kt(v,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],L(Kt(p,2)),[0,0],L(Kt(m,2)),[0,0])),c=wt("tkhd",c),p=wt,S=u.duration*u.timescale,m=Math.floor(S/(ar+1)),S=Math.floor(S%(ar+1)),v=u.stream.language,v=v.charCodeAt(0)-96<<10|v.charCodeAt(1)-96<<5|v.charCodeAt(2)-96,m=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(L(Kt(u.timescale,4)),L(Kt(m,4)),L(Kt(S,4)),L(Kt(v,2)),[0,0])),m=wt("mdhd",m),S=u,v=new Uint8Array([]),S.type){case"video":v=Xk;break;case"audio":v=Wk}S=wt("hdlr",v);e:{switch(u.type){case"video":u=wt("minf",wt("vmhd",Qk),Op,Bx(u));break e;case"audio":u=wt("minf",wt("smhd",Jk),Op,Bx(u));break e}u=new Uint8Array([])}u=p("mdia",m,S,u),o=o("trak",c,u),l.call(a,o)}for(t=ln.apply(zn,L(t)),l=e.g[0],n=wt,o=l.duration*l.timescale,a=Math.floor(o/(ar+1)),o=Math.floor(o%(ar+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(L(Kt(l.timescale,4)),L(Kt(a,4)),L(Kt(o,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),a=wt("mvhd",a),o=[],e=w(e.g),p=e.next();!p.done;p=e.next())u=o,c=u.push,p=new Uint8Array([0,0,0,0].concat(L(Kt(p.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),p=wt("trex",p),c.call(u,p);if(e=ln.apply(zn,L(o)),e=wt("mvex",e),o=[],l.encrypted){for(l=w(l.stream.drmInfos),u=l.next();!u.done;u=l.next())if(u=u.value,u.initData)for(u=w(u.initData),c=u.next();!c.done;c=u.next())o.push(c.value.initData);l=ln.apply(zn,L(o))}else l=new Uint8Array([]);return e=n("moov",a,t,e,l),t=new Uint8Array(Hf.byteLength+e.byteLength),t.set(Hf),t.set(e,Hf.byteLength),t}function Bx(e){var t=wt,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var o=e.stream.height||0;if(0<e.wa.byteLength)var a=wt("avcC",e.wa);else{a=wt;for(var l=7,u=[],c=[],p=0,m=0,v=0,S=0;S<e.$a.length;S++){var E=Fx(e.$a[S]);switch(E[0]&31){case 7:u.push(E),l+=E.length+2;break;case 8:c.push(E),l+=E.length+2}}for(0<u.length&&(p=u[0][1],v=u[0][2],m=u[0][3]),l=new Uint8Array(l),S=0,l[S++]=1,l[S++]=p,l[S++]=v,l[S++]=m,l[S++]=255,l[S++]=224|u.length,p=0;p<u.length;p++)l[S++]=(u[p].length&65280)>>8,l[S++]=u[p].length&255,l.set(u[p],S),S+=u[p].length;for(l[S++]=c.length,u=0;u<c.length;u++)l[S++]=(c[u].length&65280)>>8,l[S++]=c[u].length&255,l.set(c[u],S),S+=c[u].length;a=a("avcC",l)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(L(Kt(n,2)),L(Kt(o,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),o="avc1",c=jx(e),u=new Uint8Array([]),e.encrypted&&(u=Hs(e),o="encv"),n=wt(o,n,a,c,u)}else e.codecs.includes("hvc1")&&(o=e.stream.width||0,a=e.stream.height||0,n=new Uint8Array([]),0<e.wa.byteLength&&(n=wt("hvcC",e.wa)),o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(L(Kt(o,2)),L(Kt(a,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),a="hvc1",c=jx(e),u=new Uint8Array([]),e.encrypted&&(u=Hs(e),a="encv"),n=wt(a,o,n,c,u));break;case"audio":e.codecs.includes("mp3")?e=wt(".mp3",yl(e)):e.codecs.includes("ac-3")?(n=wt("dac3",e.ma),o="ac-3",a=new Uint8Array([]),e.encrypted&&(a=Hs(e),o="enca"),e=wt(o,yl(e),n,a)):e.codecs.includes("ec-3")?(n=wt("dec3",e.ma),o="ec-3",a=new Uint8Array([]),e.encrypted&&(a=Hs(e),o="enca"),e=wt(o,yl(e),n,a)):e.codecs.includes("opus")?(n=wt("dOps",e.ma),o="Opus",a=new Uint8Array([]),e.encrypted&&(a=Hs(e),o="enca"),e=wt(o,yl(e),n,a)):(0<e.ma.byteLength?n=wt("esds",e.ma):(n=wt,o=e.id+1,a=e.stream.channelsCount||2,u=e.stream.audioSamplingRate||44100,p=Qr("audio",e.codecs.split(",")),m={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},c=m[u],(p==="mp4a.40.5"||p==="mp4a.40.29")&&(c=m[2*u]),u=parseInt(p.split(".").pop(),10),o=new Uint8Array([0,0,0,0,3,25].concat(L(Kt(o,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,u<<3|c>>>1,c<<7|a<<3,6,1,2])),n=n("esds",o)),o="mp4a",a=new Uint8Array([]),e.encrypted&&(a=Hs(e),o="enca"),e=wt(o,yl(e),n,a)),n=e}return e=wt("stsd",e4,n),t("stbl",e,wt("stts",Yk),wt("stsc",qk),wt("stsz",Zk),wt("stco",Kk))}function jx(e){if(!e.Ba&&!e.Ca)return new Uint8Array([]);var t=e.Ca;return e=new Uint8Array([].concat(L(Kt(e.Ba,4)),L(Kt(t,4)))),wt("pasp",e)}function yl(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(L(Kt(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Hs(e){for(var t=wt,n=e.codecs.substring(0,e.codecs.indexOf(".")),o=0,a=0;a<n.length;a+=1)o|=n.charCodeAt(a)<<8*(n.length-a-1);n=new Uint8Array([].concat(L(Kt(o,4)))),n=wt("frma",n),o=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),o=wt("schm",o),a=wt;var l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=w(e.stream.drmInfos);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&u.keyIds&&u.keyIds.size){u=w(u.keyIds);for(var c=u.next();!c.done;c=u.next())l=Fx(c.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),l=wt("tenc",e,l),t("sinf",n,o,a("schi",l))}function vl(e){var t=[];e=w(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var o=t.push,a=o.apply,l=wt,u=new Uint8Array([0,0,0,0].concat(L(Kt(n.data?n.data.rb:0,4))));u=wt("mfhd",u);var c,p=n.data?n.data.Ya:[],m=new Uint8Array(4+p.length);for(c=0;c<p.length;c++){var v=p[c].flags;m[c+4]=v.Va<<4|v.Xa<<2|v.Wa}p=wt("sdtp",m);var S=p.length+92;m=wt,c=new Uint8Array([0,0,0,58].concat(L(Kt(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),c=wt("tfhd",c),v=n.data?n.data.baseMediaDecodeTime:0;var E=Math.floor(v%(ar+1));v=new Uint8Array([1,0,0,0].concat(L(Kt(Math.floor(v/(ar+1)),4)),L(Kt(E,4)))),v=wt("tfdt",v);var T=S;S=n.data?n.data.Ya:[],E=S.length;var k=12+16*E,M=new Uint8Array(k);for(T+=8+k,M.set([n.type==="video"?1:0,0,15,1].concat(L(Kt(E,4)),L(Kt(T,4))),0),T=0;T<E;T++){var I=S[T];k=Kt(I.duration,4);var U=Kt(I.size,4),N=I.flags;I=Kt(I.cb,4),M.set([].concat(L(k),L(U),[N.gb<<2|N.Va,N.Xa<<6|N.Wa<<4|N.hb,N.Ua&61440,N.Ua&15],L(I)),12+16*T)}S=wt("trun",M),p=m("traf",c,v,S,p),l=l("moof",u,p),a.call(o,t,[l,Gk(n)])}return ln.apply(zn,L(t))}function Gk(e){return e=(e.data?e.data.Ya:[]).map(function(t){return t.data}),e=ln.apply(zn,L(e)),wt("mdat",e)}function Kt(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function Fx(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function wt(e){var t=Ue.apply(1,arguments),n=zx[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],zx[e]=n);for(var o=8,a=t.length-1;0<=a;a--)o+=t[a].byteLength;for(a=new Uint8Array(o),a[0]=o>>24&255,a[1]=o>>16&255,a[2]=o>>8&255,a[3]=o&255,a.set(n,4),n=0,o=8;n<t.length;n++)a.set(t[n],o),o+=t[n].byteLength;return a}var $x=!1,ar=Math.pow(2,32)-1,zx={},Xk=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Wk=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Yk=new Uint8Array([0,0,0,0,0,0,0,0]),qk=new Uint8Array([0,0,0,0,0,0,0,0]),Kk=new Uint8Array([0,0,0,0,0,0,0,0]),Zk=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Qk=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Jk=new Uint8Array([0,0,0,0,0,0,0,0]),e4=new Uint8Array([0,0,0,0,0,0,0,1]),Hf=new Uint8Array([]),t4=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Op=new Uint8Array([]);function Up(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new Oe(5),this.o=new mt(function(){n4(e)}),this.A=new as,this.m=new Map}s=Up.prototype,s.configure=function(e){this.g=e},s.start=function(e,t){var n=this;return F(function(o){if(o.g==1)return n.l=[e],n.h=t,A(o,Bp(n),2);if(!n.h)throw new J(2,7,7001);return o.return(n.j)})};function n4(e){var t;F(function(n){switch(n.g){case 1:return le(n,2),A(n,Bp(e),4);case 4:de(n,3);break;case 2:t=se(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();Y(n)}})}s.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},s.update=function(){var e=this,t;return F(function(n){if(n.g==1)return le(n,2),A(n,Bp(e),4);if(n.g!=2)return de(n,0);if(t=se(n),!e.h||!t)return n.return();e.h.onError(t),Y(n)})},s.onExpirationUpdated=function(){},s.onInitialVariantChosen=function(){},s.banLocation=function(){},s.setMediaElement=function(){};function Bp(e){var t,n,o,a,l,u,c;return F(function(p){if(p.g==1)return t=kn(e.l,e.g.retryParameters),n=e.h.networkingEngine,o=Date.now(),a=n.request(0,t,{type:5}),_r(e.A,a),A(p,a.promise,2);if(l=p.h,!e.h)return p.return();l.uri&&!e.l.includes(l.uri)&&e.l.unshift(l.uri);var m=l.uri,v=l.data,S=e.g.mss.manifestPreprocessor;if(S!=qu){if(Ct("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),v=Vv(v,"SmoothStreamingMedia"),!v)throw new J(2,4,4046,m);S(v),v=to(v.outerHTML)}var E=Hh(v,"SmoothStreamingMedia");if(!E)throw new J(2,4,4046,m);if(m=e.g.mss.manifestPreprocessorTXml,m!=Ku&&m(E),e.i||(e.i=new Qe(null,0)),m=Et(E,"IsLive",Xh,!1))throw new J(2,4,4047);e.i.sc(!m),S=Et(E,"TimeScale",Vn,1e7),v=Et(E,"DVRWindowLength",Vn),m&&(v===0||isNaN(v))&&(v=1/0);var T=Et(E,"CanSeek",Xh,!1);v===0&&T&&(v=1/0),T=null,v&&0<v&&(T=v/S),m&&!isNaN(e.g.availabilityWindowOverride)&&(T=e.g.availabilityWindowOverride),T==null&&(T=1/0),e.i.pe(T),v=Et(E,"Duration",Vn,1/0),m||e.i.Za(v/S),m={variants:[],textStreams:[],timescale:S,duration:v/S};var k;for(T=Ht(E,"Protection"),S=e.g.mss.keySystemsBySystemId,v=[],T=w(T),k=T.next();!k.done;k=T.next())v=v.concat(Ht(k.value,"ProtectionHeader"));if(v.length){for(T=[],k=0;k<v.length;k++){var M=v[k],I=M.attributes.SystemID.toLowerCase(),U=S[I];if(U){var N=Ux(M);if(N)e:{N=w(Yi(N,"DATA"));for(var z=N.next();!z.done;z=N.next())if(z=qi(z.value,"KID")){N=Li(Cn(z)),N=new Uint8Array([N[3],N[2],N[1],N[0],N[5],N[4],N[7],N[6]].concat(L(N.slice(8)))),N=bo(N);break e}N=null}else N=null;z=Li(Cn(M)),I=Ar(I.replace(/-/g,"")),I=[{initData:Eu(z,I,new Set,0),initDataType:"cenc",keyId:N}],I=br(U,"cenc",I),N&&I.keyIds.add(N),(U=Hk.get(U))&&(I.licenseServerUri=U(M)),T.push(I)}}S=T}else S=[];for(k=S,T=[],S=[],v=[],E=Ht(E,"StreamIndex"),E=w(E),M=E.next();!M.done;M=E.next()){M=M.value,U=Ht(M,"QualityLevel"),I=m.timescale,N=m.duration,z=Ht(M,"c");for(var P=[],j=0,G=0;G<z.length;++G){var Z=z[G],ee=z[G+1],fe=Et(Z,"t",Vn),te=Et(Z,"d",Vn);if(Z=Et(Z,"r",ku),!te)break;if(fe=fe??j,Z=Z||0,0>Z)if(ee){if(ee=Et(ee,"t",Vn),ee==null)break;if(fe>=ee)break;Z=Math.ceil((ee-fe)/te)-1}else{if(N==1/0)break;if(fe/I>=N)break;Z=Math.ceil((N*I-fe)/te)-1}for(ee=0;ee<=Z;++ee)j=fe+te,P.push({start:fe/I,end:j/I,$f:fe}),fe=j}for(I=P,U=w(U),N=U.next();!N.done;N=U.next())(N=i4(e,M,N.value,I,k,m))&&(N.type!="audio"||e.g.disableAudio?N.type!="video"||e.g.disableVideo?N.type!=Tt||e.g.disableText||v.push(N):S.push(N):T.push(N))}for(E=[],T=w(0<T.length?T:[null]),k=T.next();!k.done;k=T.next())for(k=k.value,M=w(0<S.length?S:[null]),P=M.next();!P.done;P=M.next())U=E,I=U.push,N=e,z=k,P=P.value,G=0,z&&z.bandwidth&&0<z.bandwidth&&(G+=z.bandwidth),P&&P.bandwidth&&0<P.bandwidth&&(G+=P.bandwidth),N={id:N.s++,language:z?z.language:"und",disabledUntilTime:0,primary:!!z&&z.primary||!!P&&P.primary,audio:z,video:P,bandwidth:G,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},I.call(U,N);m.variants=E,m.textStreams=v,e.j?(e.j.variants=m.variants,e.j.textStreams=m.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:m.variants,textStreams:m.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.i.Wd()),Promise.resolve(),u=Date.now(),c=(u-o)/1e3,e.B.sample(1,c),Y(p)})}function i4(e,t,n,o,a,l){var u=t.attributes.Type;if(u!=="audio"&&u!=="video"&&u!=="text")return Ve("Ignoring unrecognized type:",u),null;var c=t.attributes.Language,p=e.s++,m=Et(n,"Bitrate",Lo),v=Et(n,"MaxWidth",Lo),S=Et(n,"MaxHeight",Lo),E=Et(n,"Channels",Lo),T=Et(n,"SamplingRate",Lo),k=l.duration;o.length&&(k=o[o.length-1].end-o[0].start);var M=e.i.getDuration();e.i.Za(Math.min(k,M));var I={id:p,originalId:t.attributes.Name||String(p),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:m||0,width:v||void 0,height:S||void 0,kind:"",encrypted:0<a.length,drmInfos:a,keyIds:new Set,language:Nt(c||"und"),originalLanguage:c,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:E,audioSamplingRate:T,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:k,timescale:l.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((a=t.attributes.Subtype)&&((a=u4[a])&&I.roles.push(a),a==="main"&&(I.primary=!0)),a=n.attributes.FourCC,(a===null||a==="")&&(a=t.attributes.FourCC),!a){if(u==="audio")a="AAC";else if(u==="video")return Ve('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!l4.includes(a.toUpperCase()))return Ve("Codec not supported:",a),null;switch(n=o4(n,u,a,I),I.mssPrivateData.codecPrivateData=n,u){case"audio":if(!n)return Ve("Quality unsupported without CodecPrivateData",u),null;I.type="audio",I.mimeType="mss/audio/mp4",I.codecs=r4(a,n);break;case"video":if(!n)return Ve("Quality unsupported without CodecPrivateData",u),null;I.type="video",I.mimeType="mss/video/mp4",I.codecs=s4(n);break;case"text":I.type=Tt,I.mimeType="application/mp4",(a==="TTML"||a==="DFXP")&&(I.codecs="stpp")}return I.fullMimeTypes.add(wn(I.mimeType,I.codecs)),I.createSegmentIndex=function(){if(I.segmentIndex)return Promise.resolve();if(e.m.has(I.id))var U=e.m.get(I.id);else U=[],I.type=="video"&&(U=I.mssPrivateData.codecPrivateData.split("00000001").slice(1)),U={id:I.id,type:I.type,codecs:I.codecs,encrypted:I.encrypted,timescale:I.mssPrivateData.timescale,duration:I.mssPrivateData.duration,$a:U,ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:null,stream:I},U=Vs(new zs([U])),e.m.set(I.id,U);return U=a4(e,new ui(function(){return[]},0,null,zu(I),I.mssPrivateData.timescale,U),I,t,o),I.segmentIndex=new It(U),Promise.resolve()},I.closeSegmentIndex=function(){I.segmentIndex&&(I.segmentIndex.release(),I.segmentIndex=null)},I}function o4(e,t,n,o){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=o.channelsCount||2,e=o.audioSamplingRate||44100;var a={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return o=a[e],n==="AACH"?(n=new Uint8Array(4),e=a[2*e],n[0]=40|o>>1,n[1]=o<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|o>>1,n[1]=o<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function r4(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function s4(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function a4(e,t,n,o,a){var l=o.attributes.Url.replace("{bitrate}",String(n.bandwidth));o=[],a=w(a);for(var u=a.next(),c={};!u.done;c={re:void 0},u=a.next())c.re=u.value,o.push(new Je(c.re.start,c.re.end,function(p){return function(){return Dn(e.l,[l.replace("{start time}",String(p.re.$f))])}}(c),0,null,t,0,0,n.mssPrivateData.duration));return o}ce("shaka.mss.MssParser",Up);var l4="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),u4={CAPT:"main",SUBT:"alternate",DESC:"main"};Ki["application/vnd.ms-sstr+xml"]=function(){return new Up};function Vx(e,t,n,o,a,l){if(200<=n&&299>=n&&n!=202)return{uri:a||o,originalUri:o,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var u=null;try{u=Ao(t)}catch{}throw new J(n==401||n==403?2:1,1,1001,o,n,u,e,l,a||o)}function jp(){}function Gf(e,t,n,o,a){var l=new p4;Pa(t.headers).forEach(function(m,v){l.append(v,m)});var u=new h4,c={lg:!1,mh:!1};if(e=f4(e,n,{body:t.body||void 0,headers:l,method:t.method,signal:u.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},c,o,a,t.streamDataCallback),e=new gn(e,function(){return c.lg=!0,u.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var p=new mt(function(){c.mh=!0,u.abort()});p.Y(t/1e3),e.finally(function(){p.stop()})}return e}function f4(e,t,n,o,a,l,u){var c,p,m,v,S,E,T,k,M,I,U,N,z;return F(function(P){switch(P.g){case 1:return c=c4,p=d4,E=S=0,T=Date.now(),le(P,2),A(P,c(e,n),4);case 4:if(m=P.h,l(Hx(m.headers)),n.method=="HEAD"){P.u(5);break}return k=m.clone().body.getReader(),I=(M=m.headers.get("Content-Length"))?parseInt(M,10):0,U=function(j){function G(){var Z,ee,fe;return F(function(te){switch(te.g){case 1:return le(te,2),A(te,k.read(),4);case 4:Z=te.h,de(te,3);break;case 2:return se(te),te.return();case 3:if(Z.done){te.u(5);break}if(S+=Z.value.byteLength,!u){te.u(5);break}return A(te,u(Z.value),5);case 5:ee=Date.now(),(100<ee-T||Z.done)&&(fe=Z.done?0:I-S,a(ee-T,S-E,fe),E=S,T=ee),Z.done?j.close():(j.enqueue(Z.value),G()),Y(te)}})}G()},new p({start:U}),A(P,m.arrayBuffer(),6);case 6:v=P.h;case 5:de(P,3);break;case 2:throw N=se(P),o.lg?new J(1,1,7001,e,t):o.mh?new J(1,1,1003,e,t):new J(1,1,1002,e,N,t);case 3:return z=Hx(m.headers),P.return(Vx(z,v,m.status,e,m.url,t))}})}function Hx(e){var t={};return e.forEach(function(n,o){t[o.trim()]=n}),t}function Gx(){if(d.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(d.Response){if(!new Response("").body)return!1}else return!1;return!(!d.fetch||"polyfill"in d.fetch||!d.AbortController)}ce("shaka.net.HttpFetchPlugin",jp),jp.isSupported=Gx,jp.parse=Gf;var c4=d.fetch,h4=d.AbortController,d4=d.ReadableStream,p4=d.Headers;Gx()&&(Io("http",Gf,2,!0),Io("https",Gf,2,!0),Io("blob",Gf,2,!0));function Xx(){}function Xf(e,t,n,o,a){var l=new g4,u=Date.now(),c=0,p=new Promise(function(m,v){l.open(t.method,e,!0),l.responseType="arraybuffer",l.timeout=t.retryParameters.timeout,l.withCredentials=t.allowCrossSiteCredentials,l.onabort=function(){v(new J(1,1,7001,e,n))};var S=!1;l.onreadystatechange=function(){if(l.readyState==2&&!S){var T=Wx(l);a(T),S=!0}},l.onload=function(T){var k=Wx(l),M=l.response;try{o(Date.now()-u,T.loaded-c,0);var I=Vx(k,M,l.status,e,l.responseURL,n);m(I)}catch(U){v(U)}},l.onerror=function(T){v(new J(1,1,1002,e,T,n))},l.ontimeout=function(){v(new J(1,1,1003,e,n))},l.onprogress=function(T){var k=Date.now();(100<k-u||T.lengthComputable&&T.loaded==T.total)&&(o(k-u,T.loaded-c,l.readyState==4?0:T.total-T.loaded),c=T.loaded,u=k)};for(var E in t.headers)l.setRequestHeader(E.toLowerCase(),t.headers[E]);l.send(t.body)});return new gn(p,function(){return l.abort(),Promise.resolve()})}function Wx(e){var t=e.getAllResponseHeaders().trim().split(`\r
`);e={},t=w(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}ce("shaka.net.HttpXHRPlugin",Xx),Xx.parse=Xf;var g4=d.XMLHttpRequest;Io("http",Xf,1,!0),Io("https",Xf,1,!0),Io("blob",Xf,1,!0);function Yx(e,t,n,o){this.g=e,this.i=t,this.groupId=n,this.h=o}function Fp(e){return e.M().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Ha+":"+e.sa}function m4(e,t){return vs(e.g.M(),e.g.Ha,e.g.sa,t.streaming.retryParameters)}function qx(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Kx(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}qx.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function Zx(e){var t=this;this.o=e,this.j=new Map,this.i=new ls(function(){return $p(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new qx}Zx.prototype.destroy=function(){return this.i.destroy()};function y4(e,t,n){e.m=t,e.l=n}function $p(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function v4(e,t,n,o,a,l){Ft(e.i);var u=(e.j.get(t)||Promise.resolve()).then(function(){var c,p,m,v,S,E,T;return F(function(k){if(k.g==1)return A(k,w4(e,n),2);if(c=k.h,e.i.g)throw new J(2,9,7001);if(a)for(v in p=Ze(c),m=new Am(p),m.data)S=Number(v),E=m.data[S],T=m.g[S],e.l(E,T);e.g.close(o,c.byteLength);var M=e.g;return e.m(M.i==0?0:M.j/M.i,e.g.h),k.return(l(c))})});e.j.set(t,u)}function x4(e){return F(function(t){return t.g==1?A(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function w4(e,t){var n,o,a,l;return F(function(u){return u.g==1?(n=io,o=e.o.request(n,t),a=function(){return o.abort()},e.h.push(a),A(u,o.promise,2)):(l=u.h,Kn(e.h,a),u.return(l.data))})}function Wf(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Bt,e.onabort=function(o){o.preventDefault(),n.g.reject()},e.onerror=function(o){o.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Wf.prototype.abort=function(){var e=this;return F(function(t){if(t.g==1){try{e.i.abort()}catch{}return le(t,2),A(t,e.g,4)}if(t.g!=2)return de(t,0);se(t),Y(t)})};function zp(e,t){return new Promise(function(n,o){var a=e.h.openCursor();a.onerror=o,a.onsuccess=function(){var l;return F(function(u){if(u.g==1)return a.result==null?(n(),u.return()):(l=a.result,A(u,t(l.key,l.value,l),2));l.continue(),Y(u)})}})}Wf.prototype.store=function(){return this.h},Wf.prototype.promise=function(){return this.g};function Vp(e){this.h=e,this.g=[]}Vp.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Fr(e,t){return Yf(e,t,"readwrite")}function Yf(e,t,n){n=e.h.transaction([t],n);var o=new Wf(n,t);return e.g.push(o),o.promise().then(function(){Kn(e.g,o)},function(){Kn(e.g,o)}),o}function $r(e,t,n){this.h=new Vp(e),this.i=t,this.g=n}s=$r.prototype,s.destroy=function(){return this.h.destroy()},s.hasFixedKeySpace=function(){return!0},s.addSegments=function(){return Qx(this.i)},s.removeSegments=function(e,t){return Jx(this,this.i,e,t)},s.getSegments=function(e){var t=this,n;return F(function(o){return o.g==1?A(o,e2(t,t.i,e),2):(n=o.h,o.return(n.map(function(a){return t.og(a)})))})},s.addManifests=function(){return Qx(this.g)},s.updateManifest=function(){return Promise.reject(new J(2,9,9016,"Cannot modify values in "+this.g))};function S4(e,t,n){e=Fr(e.h,e.g);var o=e.store();return o.get(t).onsuccess=function(){o.put(n,t)},e.promise()}s.updateManifestExpiration=function(e,t){var n=Fr(this.h,this.g),o=n.store();return o.get(e).onsuccess=function(a){(a=a.target.result)&&(a.expiration=t,o.put(a,e))},n.promise()},s.removeManifests=function(e,t){return Jx(this,this.g,e,t)},s.getManifests=function(e){var t=this,n;return F(function(o){return o.g==1?A(o,e2(t,t.g,e),2):(n=o.h,o.return(Promise.all(n.map(function(a){return t.Wc(a)}))))})},s.getAllManifests=function(){var e=this,t,n;return F(function(o){return o.g==1?(t=Yf(e.h,e.g,"readonly"),n=new Map,A(o,zp(t,function(a,l){var u;return F(function(c){if(c.g==1)return A(c,e.Wc(l),2);u=c.h,n.set(a,u),Y(c)})}),2)):o.g!=3?A(o,t.promise(),3):o.return(n)})},s.og=function(e){return e},s.Wc=function(e){return Promise.resolve(e)};function Qx(e){return Promise.reject(new J(2,9,9011,"Cannot add new value to "+e))}s.add=function(e,t){var n=this,o,a,l,u,c,p,m;return F(function(v){if(v.g==1){for(o=Fr(n.h,e),a=o.store(),l=[],u=w(t),c=u.next(),p={};!c.done;p={Hf:void 0},c=u.next())m=c.value,p.Hf=a.add(m),p.Hf.onsuccess=function(S){return function(){l.push(S.Hf.result)}}(p);return A(v,o.promise(),2)}return v.return(l)})};function Jx(e,t,n,o){e=Fr(e.h,t),t=e.store(),n=w(n);for(var a=n.next(),l={};!a.done;l={rf:void 0},a=n.next())l.rf=a.value,t.delete(l.rf).onsuccess=function(u){return function(){return o(u.rf)}}(l);return e.promise()}function e2(e,t,n){var o,a,l,u,c,p,m;return F(function(v){if(v.g==1){for(o=Yf(e.h,t,"readonly"),a=o.store(),l={},u=[],c=w(n),p=c.next(),m={};!p.done;m={le:void 0,Sd:void 0},p=c.next())m.Sd=p.value,m.le=a.get(m.Sd),m.le.onsuccess=function(S){return function(){S.le.result==null&&u.push(S.Sd),l[S.Sd]=S.le.result}}(m);return A(v,o.promise(),2)}if(u.length)throw new J(2,9,9012,"Could not find values for "+u);return v.return(n.map(function(S){return l[S]}))})}function xl(e){this.g=new Vp(e)}xl.prototype.destroy=function(){return this.g.destroy()},xl.prototype.getAll=function(){var e=this,t,n;return F(function(o){return o.g==1?(t=Yf(e.g,"session-ids","readonly"),n=[],A(o,zp(t,function(a,l){n.push(l)}),2)):o.g!=3?A(o,t.promise(),3):o.return(n)})},xl.prototype.add=function(e){var t=Fr(this.g,"session-ids"),n=t.store();e=w(e);for(var o=e.next();!o.done;o=e.next())n.add(o.value);return t.promise()},xl.prototype.remove=function(e){var t=this,n;return F(function(o){return o.g==1?(n=Fr(t.g,"session-ids"),A(o,zp(n,function(a,l,u){e.includes(l.sessionId)&&u.delete()}),2)):A(o,n.promise(),0)})};function ni(){this.g=new Map}ni.prototype.destroy=function(){for(var e=[],t=w(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},ni.prototype.init=function(){var e=this;wl.forEach(function(a,l){(a=a())&&e.g.set(l,a)});for(var t=[],n=w(this.g.values()),o=n.next();!o.done;o=n.next())t.push(o.value.init());return Promise.all(t)};function t2(e){var t=null;if(e.g.forEach(function(n,o){n.getCells().forEach(function(a,l){a.hasFixedKeySpace()||t||(t={path:{nb:o,Ja:l},Ja:a})})}),t)return t;throw new J(2,9,9013,"Could not find a cell that supports add-operations")}function C4(e,t){e.g.forEach(function(n,o){n.getCells().forEach(function(a,l){t({nb:o,Ja:l},a)})})}function qf(e,t,n){if(e=e.g.get(t),!e)throw new J(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new J(2,9,9013,"Could not find cell with name "+n);return t}function T4(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function E4(e){var t=Array.from(e.g.keys());if(!t.length)throw new J(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function A4(e){var t,n,o;return F(function(a){return a.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(o=wl,o.forEach(function(l){(l=l())&&t.push(l)})),A(a,Promise.all(t.map(function(l){return l.erase()})),2)):n?a.u(0):A(a,Promise.all(t.map(function(l){return l.destroy()})),0)})}function n2(e,t){wl.set(e,t)}ce("shaka.offline.StorageMuxer",ni),ni.unregister=function(e){wl.delete(e)},ni.register=n2,ni.prototype.destroy=ni.prototype.destroy;var wl=new Map;function Sl(){$r.apply(this,arguments)}K(Sl,$r),Sl.prototype.updateManifestExpiration=function(e,t){var n=this,o,a,l;return F(function(u){return o=Fr(n.h,n.g),a=o.store(),l=new Bt,a.get(e).onsuccess=function(c){(c=c.target.result)?(c.expiration=t,a.put(c),l.resolve()):l.reject(new J(2,9,9012,"Could not find values for "+e))},A(u,Promise.all([o.promise(),l]),0)})},Sl.prototype.Wc=function(e){var t,n,o,a,l,u;return F(function(c){if(c.g==1){for(t=[],n=0;n<e.periods.length;++n)o=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,a=o-e.periods[n].startTime,l=b4(e.periods[n],a),t.push(l);return A(c,Nv(t),2)}return u=c.h,c.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:u,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function b4(e,t){I4(e);for(var n=w(e.streams),o=n.next();!o.done;o=n.next());return e.streams.map(function(a){return k4(a,e.startTime,t)})}function k4(e,t,n){var o=e.initSegmentUri?i2(e.initSegmentUri):null,a=t+e.presentationTimeOffset,l=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:o,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(u){var c=i2(u.uri);return{startTime:t+u.startTime,endTime:t+u.endTime,dataKey:c,initSegmentKey:o,appendWindowStart:t,appendWindowEnd:l,timestampOffset:a,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Sl.prototype.og=function(e){return{data:e.data}};function i2(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new J(2,9,9004,"Could not parse uri "+e)}function I4(e){var t=e.streams.filter(function(c){return c.contentType=="audio"});if(e=e.streams.filter(function(c){return c.contentType=="video"}),!t.every(function(c){return c.variantIds})||!e.every(function(c){return c.variantIds})){for(var n=w(t),o=n.next();!o.done;o=n.next())o.value.variantIds=[];for(n=w(e),o=n.next();!o.done;o=n.next())o.value.variantIds=[];if(n=0,e.length&&!t.length){o=n++;for(var a=w(e),l=a.next();!l.done;l=a.next())l.value.variantIds.push(o)}if(!e.length&&t.length)for(o=n++,a=w(t),l=a.next();!l.done;l=a.next())l.value.variantIds.push(o);if(e.length&&t.length)for(t=w(t),o=t.next();!o.done;o=t.next())for(o=o.value,a=w(e),l=a.next();!l.done;l=a.next()){l=l.value;var u=n++;o.variantIds.push(u),l.variantIds.push(u)}}}function Kf(){$r.apply(this,arguments)}K(Kf,$r),Kf.prototype.Wc=function(e){var t,n,o,a,l,u;return F(function(c){if(c.g==1){for(t=[],n=0;n<e.periods.length;++n){o=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,a=o-e.periods[n].startTime;for(var p=e.periods[n],m=[],v=w(p.streams),S=v.next();!S.done;S=v.next())S=S.value,S.variantIds.length!=0&&m.push(M4(S,p.startTime,p.startTime+a));l=m,t.push(l)}return A(c,Nv(t),2)}return u=c.h,c.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:u,sequenceMode:!1})})};function M4(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(o){return{startTime:t+o.startTime,endTime:t+o.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:o.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function Hp(){$r.apply(this,arguments)}K(Hp,$r),s=Hp.prototype,s.hasFixedKeySpace=function(){return!1},s.addSegments=function(e){return this.add(this.i,e)},s.addManifests=function(e){return this.add(this.g,e)},s.updateManifest=function(e,t){return S4(this,e,t)},s.Wc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function o2(){this.m=this.j=this.i=this.h=this.g=this.l=null}s=o2.prototype,s.init=function(){var e=this,t=new Bt,n=!1,o=new mt(function(){n=!0,t.reject(new J(2,9,9017))});o.Y(5);var a=d.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!n){var l=a.result;e.l=l;var u=l.objectStoreNames;u=u.contains("manifest")&&u.contains("segment")?new Sl(l,"segment","manifest"):null,e.g=u,u=l.objectStoreNames,u=u.contains("manifest-v2")&&u.contains("segment-v2")?new Kf(l,"segment-v2","manifest-v2"):null,e.h=u,u=l.objectStoreNames,u=u.contains("manifest-v3")&&u.contains("segment-v3")?new Kf(l,"segment-v3","manifest-v3"):null,e.i=u,u=l.objectStoreNames,u=u.contains("manifest-v5")&&u.contains("segment-v5")?new Hp(l,"segment-v5","manifest-v5"):null,e.j=u,l=l.objectStoreNames.contains("session-ids")?new xl(l):null,e.m=l,o.stop(),t.resolve()}},a.onupgradeneeded=function(){for(var l=a.result,u=w(["segment-v5","manifest-v5","session-ids"]),c=u.next();!c.done;c=u.next())c=c.value,l.objectStoreNames.contains(c)||l.createObjectStore(c,{autoIncrement:!0})},a.onerror=function(l){n||(t.reject(new J(2,9,9001,a.error)),o.stop(),l.preventDefault())},t},s.destroy=function(){var e=this;return F(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return A(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return A(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return A(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return A(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return A(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),Y(t)}})},s.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},s.getEmeSessionCell=function(){return this.m},s.erase=function(){var e=this;return F(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return A(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return A(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return A(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return A(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),A(t,R4(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,A(t,e.init(),0)}})};function R4(){var e=new Bt,t=d.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new J(2,9,9001,t.error)),n.preventDefault()},e}n2("idb",function(){return Ci()||co()||!d.indexedDB?null:new o2});function xo(e,t,n,o){this.g=e,this.i=t,this.h=n,this.l=o,this.j=["offline:",e,"/",t,"/",n,"/",o].join("")}xo.prototype.nb=function(){return this.i},xo.prototype.Ja=function(){return this.h},xo.prototype.key=function(){return this.l},xo.prototype.toString=function(){return this.j};function Gp(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var o=e[3];return o&&t!=null?new xo(t,n,o,Number(e[4])):null}function r2(e,t){this.h=e,this.g=t}function s2(e,t){var n=new Qe(null,0);n.Za(t.duration);var o=t.streams.filter(function(m){return m.type=="audio"}),a=t.streams.filter(function(m){return m.type=="video"});o=_4(e,o,a,n),a=t.streams.filter(function(m){return m.type==Tt}).map(function(m){return Zf(e,m,n)});var l=t.streams.filter(function(m){return m.type=="image"}).map(function(m){return Zf(e,m,n)}),u=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var c=w(o.values()),p=c.next();!p.done;p=c.next())p=p.value,p.audio&&p.audio.encrypted&&(p.audio.drmInfos=u),p.video&&p.video.encrypted&&(p.video.drmInfos=u);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(o.values()),textStreams:a,imageStreams:l,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1}}function _4(e,t,n,o){for(var a=new Set,l=w(t),u=l.next();!u.done;u=l.next()){u=w(u.value.variantIds);for(var c=u.next();!c.done;c=u.next())a.add(c.value)}for(l=w(n),u=l.next();!u.done;u=l.next())for(u=w(u.value.variantIds),c=u.next();!c.done;c=u.next())a.add(c.value);for(l=new Map,a=w(a),u=a.next();!u.done;u=a.next())u=u.value,l.set(u,{id:u,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=w(t),a=t.next();!a.done;a=t.next())for(u=a.value,a=Zf(e,u,o),u=w(u.variantIds),c=u.next();!c.done;c=u.next())c=l.get(c.value),c.language=a.language,c.primary=c.primary||a.primary,c.audio=a;for(n=w(n),t=n.next();!t.done;t=n.next())for(a=t.value,t=Zf(e,a,o),a=w(a.variantIds),u=a.next();!u.done;u=a.next())u=l.get(u.value),u.primary=u.primary||t.primary,u.video=t;return l}function Zf(e,t,n){var o=t.segments.map(function(a){return L4(e,a,t)});return n.sd(o),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new It(o),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([wn(t.mimeType,t.codecs)])}}function L4(e,t,n){var o=new xo("segment",e.h,e.g,t.dataKey);return e=new Je(t.startTime,t.endTime,function(){return[o.toString()]},0,null,t.initSegmentKey!=null?P4(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function P4(e,t){var n=new xo("segment",e.h,e.g,t);return new ui(function(){return[n.toString()]},0,null)}function a2(){this.g=null}s=a2.prototype,s.configure=function(){},s.start=function(e,t){var n=this,o,a,l,u,c,p,m;return F(function(v){switch(v.g){case 1:if(o=Gp(e),n.g=o,o==null||o.g!="manifest")throw new J(2,1,9004,e);return a=new ni,ge(v,2),A(v,a.init(),4);case 4:return A(v,qf(a,o.nb(),o.Ja()),5);case 5:return l=v.h,A(v,l.getManifests([o.key()]),6);case 6:return u=v.h,c=u[0],p=new r2(o.nb(),o.Ja()),m=s2(p,c),t.makeTextStreamsForClosedCaptions(m),v.return(m);case 2:return re(v),A(v,a.destroy(),7);case 7:oe(v,0)}})},s.stop=function(){return Promise.resolve()},s.update=function(){},s.onExpirationUpdated=function(e,t){var n=this,o,a,l,u,c,p,m;return F(function(v){switch(v.g){case 1:return o=n.g,a=new ni,le(v,2,3),A(v,a.init(),5);case 5:return A(v,qf(a,o.nb(),o.Ja()),6);case 6:return l=v.h,A(v,l.getManifests([o.key()]),7);case 7:if(u=v.h,c=u[0],p=c.sessionIds.includes(e),m=c.expiration==null||c.expiration>t,!p||!m){v.u(3);break}return A(v,l.updateManifestExpiration(o.key(),t),3);case 3:return re(v),A(v,a.destroy(),10);case 10:oe(v,0);break;case 2:se(v),v.u(3)}})},s.onInitialVariantChosen=function(){},s.banLocation=function(){},s.setMediaElement=function(){},Ki["application/x-offline-manifest"]=function(){return new a2};function l2(){}function u2(e){var t=Gp(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=ss(e)):e=t&&t.g=="segment"?D4(t.key(),t):Rr(new J(2,1,9004,e)),e}function D4(e,t){var n=new ni;return ss(void 0).Aa(function(){return n.init()}).Aa(function(){return qf(n,t.nb(),t.Ja())}).Aa(function(o){return o.getSegments([t.key()])}).Aa(function(o){return{uri:t,data:o[0].data,headers:{}}}).finally(function(){return n.destroy()})}ce("shaka.offline.OfflineScheme",l2),l2.plugin=u2,Io("offline",u2);function f2(e,t,n){var o,a,l,u,c,p;return F(function(m){switch(m.g){case 1:o=[];for(var v=[],S=w(n),E=S.next();!E.done;E=S.next()){E=E.value;for(var T=!1,k=w(v),M=k.next();!M.done;M=k.next())if(M=M.value,O4(M.info,E)){M.sessionIds.push(E.sessionId),T=!0;break}T||v.push({info:E,sessionIds:[E.sessionId]})}a=w(v),l=a.next();case 2:if(l.done){m.u(4);break}return u=l.value,c=N4(e,t,u),A(m,c,5);case 5:p=m.h,o=o.concat(p),l=a.next(),m.u(2);break;case 4:return m.return(o)}})}function N4(e,t,n){var o,a;return F(function(l){switch(l.g){case 1:return o=new Ru({Lb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),le(l,2),o.configure(e),A(l,xT(o,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:de(l,3);break;case 2:return se(l),A(l,o.destroy(),5);case 5:return l.return([]);case 3:return a=[],A(l,Promise.all(n.sessionIds.map(function(u){return F(function(c){if(c.g==1)return le(c,2),A(c,CT(o,u),4);if(c.g!=2)return a.push(u),de(c,0);se(c),Y(c)})})),6);case 6:return A(l,o.destroy(),7);case 7:return l.return(a)}})}function O4(e,t){function n(o,a){return o.robustness==a.robustness&&o.contentType==a.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&wr(e.audioCapabilities,t.audioCapabilities,n)&&wr(e.videoCapabilities,t.videoCapabilities,n)}function U4(e,t,n){var o=t.presentationTimeline.getDuration();return t=c2(t),{offlineUri:null,originalManifestUri:e,duration:o,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function Xp(e,t){var n=s2(new r2(e.nb(),e.Ja()),t),o=t.appMetadata||{};return n=c2(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:o,isIncomplete:t.isIncomplete||!1}}function c2(e){var t=[],n=yu(e.variants);n=w(n);for(var o=n.next();!o.done;o=n.next())t.push(is(o.value));for(e=w(e.textStreams),n=e.next();!n.done;n=e.next())t.push(mu(n.value));return t}function B4(){this.g={}}function j4(e,t){var n=t.audio,o=t.video;if(n&&!o&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&o&&(e.g[o.id]=o.bandwidth||t.bandwidth),n&&o){var a=n.bandwidth||393216,l=o.bandwidth||t.bandwidth-a;0>=l&&(l=t.bandwidth),e.g[n.id]=a,e.g[o.id]=l}}function F4(e,t){e.g[t.id]=t.bandwidth||2048}function h2(e,t){return e=e.g[t],e==null&&(e=0),e}function Rn(e){var t=this;if(e&&e.constructor!=ve)throw new J(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.xb()):(this.h=Ss(),this.g=new Vt),this.i=[],this.j=[];var n=!e;this.l=new ls(function(){var o,a,l,u,c;return F(function(p){switch(p.g){case 1:return A(p,Promise.all(t.j.map(function(m){return $p(m)})),2);case 2:for(o=function(){},a=[],l=w(t.i),u=l.next();!u.done;u=l.next())c=u.value,a.push(c.then(o,o));return A(p,Promise.all(a),3);case 3:if(!n){p.u(4);break}return A(p,t.g.destroy(),4);case 4:t.h=null,t.g=null,Y(p)}})})}function Wp(){if(eo())e:{for(var e=w(wl.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}s=Rn.prototype,s.destroy=function(){return this.l.destroy()},s.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Yu(e,t)),nr(this.h,e)},s.getConfiguration=function(){var e=Ss();return nr(e,this.h,Ss()),e},s.xb=function(){return this.g},s.store=function(e,t,n){var o=this,a=this.getConfiguration(),l=new Zx(this.g);return this.j.push(l),t=$4(this,e,t||{},function(){var u;return F(function(c){return c.g==1?n?c.u(2):A(c,_d(e,o.g,a.manifest.retryParameters),3):(c.g!=2&&(n=c.h),u=Ym(e,n||null),c.return(u()))})},a,l),t=new gn(t,function(){return $p(l)}),t.finally(function(){Kn(o.j,l)}),e3(this,t)};function $4(e,t,n,o,a,l){var u,c,p,m,v,S,E,T,k,M,I,U,N,z;return F(function(P){switch(P.g){case 1:return Qf(),c=u=null,p=new ni,S=v=m=null,le(P,2,3),A(P,o(),5);case 5:return u=P.h,A(P,K4(e,t,u,a),6);case 6:if(E=P.h,On(e),T=!E.presentationTimeline.V()&&!E.presentationTimeline.kc(),!T)throw new J(2,9,9005,t);return A(P,e.yc(E,function(j){S=S||j},a),7);case 7:if(c=P.h,On(e),S)throw S;return A(P,V4(E,c,a),8);case 8:return A(P,p.init(),9);case 9:return On(e),A(P,t2(p),10);case 10:return m=P.h,On(e),k=H4(c,E,t,n,a,l),M=k.ui,I=k.Xf,A(P,m.Ja.addManifests([M]),11);case 11:if(U=P.h,On(e),v=U[0],On(e),S)throw S;return A(P,z4(e,I,v,M,l,a,m.Ja,E,c),12);case 12:return On(e),m2(E,M,c,a),A(P,m.Ja.updateManifest(v,M),13);case 13:return On(e),N=new xo("manifest",m.path.nb,m.path.Ja,v),P.return(Xp(N,M));case 3:return re(P),A(P,p.destroy(),14);case 14:if(!u){P.u(15);break}return A(P,u.stop(),15);case 15:if(!c){P.u(17);break}return A(P,c.destroy(),17);case 17:oe(P,0);break;case 2:if(z=se(P),v==null){P.u(19);break}return A(P,d2(v),19);case 19:throw S||z}})}function z4(e,t,n,o,a,l,u,c,p){var m,v,S,E,T,k,M,I,U,N;return F(function(z){switch(z.g){case 1:if(m={},v=0,S=function(P,j){var G,Z,ee,fe,te,ne,ae;return F(function(xe){if(xe.g==1){for(G=w(P),Z=G.next(),ee={};!Z.done;ee={Ac:void 0},Z=G.next())ee.Ac=Z.value,fe=m4(ee.Ac,l),te=ee.Ac.i,ne=ee.Ac.h,ae=function(me){return function(we){var Le,Se,Be;return F(function(st){if(st.g==1)return A(st,u.addSegments([{data:we}]),2);Le=st.h,On(e),Se=me.Ac.g,Be=Fp(Se),m[Be]=Le[0],v+=we.byteLength,Y(st)})}}(ee),v4(a,ee.Ac.groupId,fe,te,ne,ae);return A(xe,x4(a),2)}return j?(On(e),m2(c,o,p,l),A(xe,u.updateManifest(n,o),0)):xe.u(0)})},E=!1,le(z,2),!Yp(c)||!E||g2(c)){z.u(4);break}return A(z,S(t.filter(function(P){return P.h}),!0),5);case 5:return On(e),t=t.filter(function(P){return!P.h}),T=m,k=v,m={},v=0,A(z,p2(u,n,o,T,k,function(){return On(e)}),6);case 6:On(e);case 4:if(E){z.u(7);break}return A(z,S(t,!1),8);case 8:return On(e),M=m,I=v,m={},v=0,A(z,p2(u,n,o,M,I,function(){return On(e)}),9);case 9:On(e);case 7:de(z,0);break;case 2:return U=se(z),N=Object.values(m),A(z,u.removeSegments(N,function(){}),10);case 10:throw U}})}function d2(e){var t,n,o,a;return F(function(l){switch(l.g){case 1:return t=new ni,A(l,t.init(),2);case 2:return A(l,t2(t),3);case 3:return n=l.h,o=new xo("manifest",n.path.nb,n.path.Ja,e),A(l,t.destroy(),4);case 4:return a=new Rn,A(l,a.remove(o.toString()),0)}})}function p2(e,t,n,o,a,l){var u,c,p,m,v,S,E,T,k,M,I;return F(function(U){switch(U.g){case 1:for(u=!1,le(U,2),c=!0,p=w(n.streams),m=p.next();!m.done;m=p.next())for(v=m.value,S=w(v.segments),E=S.next();!E.done;E=S.next())T=E.value,k=T.pendingSegmentRefId?o[T.pendingSegmentRefId]:null,k!=null&&(T.dataKey=k,T.pendingSegmentRefId=void 0),k=T.pendingInitSegmentRefId?o[T.pendingInitSegmentRefId]:null,k!=null&&(T.initSegmentKey=k,T.pendingInitSegmentRefId=void 0),T.pendingSegmentRefId&&(c=!1),T.pendingInitSegmentRefId&&(c=!1);return n.size+=a,c&&(n.isIncomplete=!1),A(U,e.updateManifest(t,n),4);case 4:u=!0,l(),de(U,0);break;case 2:return M=se(U),A(U,d2(t),5);case 5:if(u){U.u(6);break}return I=Object.values(o),A(U,e.removeSegments(I,function(){}),6);case 6:throw M}})}function V4(e,t,n){var o,a,l,u,c,p,m,v,S,E,T,k,M,I,U,N,z,P,j,G,Z,ee,fe,te,ne,ae,xe,me,we;return F(function(Le){switch(Le.g){case 1:return o={width:1/0,height:1/0},zC(e,n.restrictions,o),A(Le,Kg(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(a=[],l=n.preferredDecodingAttributes,u=n.preferredVideoCodecs,c=n.preferredAudioCodecs,Yg(e,u,c,l),p=w(e.variants),m=p.next();!m.done;m=p.next())v=m.value,a.push(is(v));for(S=w(e.textStreams),E=S.next();!E.done;E=S.next())T=E.value,a.push(mu(T));for(k=w(e.imageStreams),M=k.next();!M.done;M=k.next())I=M.value,a.push(Oh(I));return A(Le,n.offline.trackSelectionCallback(a),3);case 3:for(U=Le.h,N=e.presentationTimeline.getDuration(),z=0,P=w(U),j=P.next();!j.done;j=P.next())G=j.value,Z=G.bandwidth*N/8,z+=Z;return le(Le,4),A(Le,n.offline.downloadSizeCallback(z),6);case 6:if(ee=Le.h,!ee)throw new J(2,9,9014);de(Le,5);break;case 4:throw fe=se(Le),fe instanceof J?fe:new J(2,9,9015);case 5:for(te=new Set,ne=new Set,ae=new Set,xe=w(U),me=xe.next();!me.done;me=xe.next())we=me.value,we.type=="variant"&&te.add(we.id),we.type=="text"&&ne.add(we.id),we.type=="image"&&ae.add(we.id);e.variants=e.variants.filter(function(Se){return te.has(Se.id)}),e.textStreams=e.textStreams.filter(function(Se){return ne.has(Se.id)}),e.imageStreams=e.imageStreams.filter(function(Se){return ae.has(Se.id)}),i3(e),Y(Le)}})}function H4(e,t,n,o,a,l){var u=U4(n,t,o),c=a.offline.progressCallback;y4(l,function(T,k){u.size=k,c(u,T)},function(T,k){p&&a.offline.usePersistentLicense&&m==k&&Da(e,"cenc",T)});var p=Yp(t)&&!g2(t),m=null;p&&(m=o3.get(e.g.keySystem));for(var v=new B4,S=w(t.textStreams),E=S.next();!E.done;E=S.next())v.g[E.value.id]=52;for(S=w(t.imageStreams),E=S.next();!E.done;E=S.next())F4(v,E.value);for(S=w(t.variants),E=S.next();!E.done;E=S.next())j4(v,E.value);return v=Z4(l,v,t,a),l=v.streams,v=v.Xf,S=e.g,E=a.offline.usePersistentLicense,S&&E&&(S.initData=[]),{ui:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ad(),streams:l,sessionIds:E?Om(e):[],drmInfo:S,appMetadata:o,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Xf:v}}function Yp(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function g2(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function m2(e,t,n,o){if(t.expiration=n.ad(),n=Om(n),t.sessionIds=o.offline.usePersistentLicense?n:[],Yp(e)&&o.offline.usePersistentLicense&&!n.length)throw new J(2,9,9007)}s.remove=function(e){return qp(this,G4(this,e))};function G4(e,t){var n,o,a,l,u,c;return F(function(p){switch(p.g){case 1:if(Qf(),n=Gp(t),n==null||n.g!="manifest")throw new J(2,9,9004,t);return o=n,a=new ni,ge(p,2),A(p,a.init(),4);case 4:return A(p,qf(a,o.nb(),o.Ja()),5);case 5:return l=p.h,A(p,l.getManifests([o.key()]),6);case 6:return u=p.h,c=u[0],A(p,Promise.all([X4(e,c,a),W4(l,o,c)]),2);case 2:return re(p),A(p,a.destroy(),8);case 8:oe(p,0)}})}function y2(e,t){for(var n=[],o=w(e.streams),a=o.next();!a.done;a=o.next())a=a.value,t&&a.type=="video"?n.push({contentType:wn(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||a.type!="audio"||n.push({contentType:wn(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function X4(e,t,n){return F(function(o){return A(o,n3(e.g,e.h.drm,n,t),0)})}function W4(e,t,n){function o(){}var a=t3(n);return Xp(t,n),Promise.all([e.removeSegments(a,o),e.removeManifests([t.key()],o)])}s.Li=function(){return qp(this,Y4(this))};function Y4(e){var t,n,o,a,l,u,c,p,m,v;return F(function(S){switch(S.g){case 1:return Qf(),t=e.g,n=e.h.drm,o=new ni,a=!1,ge(S,2),A(S,o.init(),4);case 4:l=[],T4(o,function(E){return l.push(E)}),u=w(l),c=u.next();case 5:if(c.done){S.u(2);break}return p=c.value,A(S,p.getAll(),8);case 8:return m=S.h,A(S,f2(n,t,m),9);case 9:return v=S.h,A(S,p.remove(v),10);case 10:v.length!=m.length&&(a=!0),c=u.next(),S.u(5);break;case 2:return re(S),A(S,o.destroy(),11);case 11:oe(S,3);break;case 3:return S.return(!a)}})}s.list=function(){return qp(this,q4())};function q4(){var e,t,n;return F(function(o){switch(o.g){case 1:return Qf(),e=[],t=new ni,ge(o,2),A(o,t.init(),4);case 4:return n=Promise.resolve(),C4(t,function(a,l){n=n.then(function(){var u;return F(function(c){if(c.g==1)return A(c,l.getAllManifests(),2);u=c.h,u.forEach(function(p,m){p=Xp(new xo("manifest",a.nb,a.Ja,m),p),e.push(p)}),Y(c)})})}),A(o,n,2);case 2:return re(o),A(o,t.destroy(),6);case 6:oe(o,3);break;case 3:return o.return(e)}})}function K4(e,t,n,o){var a,l,u,c,p;return F(function(m){if(m.g==1)return a=null,l=e.g,u={networkingEngine:l,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(v){a=v},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return o.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){}},n.configure(o.manifest),On(e),A(m,n.start(t,u),2);if(m.g!=3)return c=m.h,On(e),p=v2(c),A(m,Promise.all($h(p,function(v){return v.createSegmentIndex()})),3);if(On(e),a)throw a;return m.return(c)})}s.yc=function(e,t,n){var o=this,a;return F(function(l){return l.g==1?(a=new Ru({Lb:o.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a.configure(n.drm),A(l,vT(a,e.variants,n.offline.usePersistentLicense),2)):l.g!=3?A(l,Nm(a),3):l.return(a)})};function Z4(e,t,n,o){var a=new Map,l=v2(n),u=new Map;l=w(l);for(var c=l.next();!c.done;c=l.next()){c=c.value;var p=Q4(e,t,n,c,o,a);u.set(c.id,p)}for(e=w(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&u.get(t.audio.id).variantIds.push(t.id),t.video&&u.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(u.values()),Xf:Array.from(a.values())}}function Q4(e,t,n,o,a,l){var u={id:o.id,originalId:o.originalId,groupId:o.groupId,primary:o.primary,type:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,hdr:o.hdr,colorGamut:o.colorGamut,videoLayout:o.videoLayout,kind:o.kind,language:o.language,originalLanguage:o.originalLanguage,label:o.label,width:o.width||null,height:o.height||null,encrypted:o.encrypted,keyIds:o.keyIds,segments:[],variantIds:[],roles:o.roles,forced:o.forced,channelsCount:o.channelsCount,audioSamplingRate:o.audioSamplingRate,spatialAudio:o.spatialAudio,closedCaptions:o.closedCaptions,tilesLayout:o.tilesLayout,external:o.external,fastSwitching:o.fastSwitching},c=a.offline.numberOfParallelDownloads,p=0;return J4(o,n.presentationTimeline.mb(),function(m){var v=Fp(m),S=void 0;if(!l.has(v)){var E=m.endTime-m.startTime;E=h2(t,o.id)*E,E=Kx(e.g,E),l.set(v,new Yx(m,E,p,!1))}m.$&&(S=Fp(m.$),l.has(S)||(E=.5*h2(t,o.id),E=Kx(e.g,E),l.set(S,new Yx(m.$,E,p,!0)))),u.segments.push({pendingInitSegmentRefId:S,initSegmentKey:S?0:null,startTime:m.startTime,endTime:m.endTime,appendWindowStart:m.appendWindowStart,appendWindowEnd:m.appendWindowEnd,timestampOffset:m.timestampOffset,tilesLayout:m.tilesLayout,pendingSegmentRefId:v,dataKey:0,mimeType:m.mimeType,codecs:m.codecs}),p=(p+1)%c}),u}function J4(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var o=e.segmentIndex.get(t);o;)n(o),o=e.segmentIndex.get(++t)}function On(e){if(e.l.g)throw new J(2,9,7001)}function Qf(){if(!Wp())throw new J(2,9,9e3)}function qp(e,t){return F(function(n){return n.g==1?(e.i.push(t),ge(n,2),A(n,t,4)):n.g!=2?n.return(n.h):(re(n),Kn(e.i,t),oe(n,0))})}function e3(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Kn(e.i,n)})}function t3(e){var t=new Set;e=w(e.streams);for(var n=e.next();!n.done;n=e.next()){n=w(n.value.segments);for(var o=n.next();!o.done;o=n.next())o=o.value,o.initSegmentKey!=null&&t.add(o.initSegmentKey),t.add(o.dataKey)}return Array.from(t)}function n3(e,t,n,o){var a,l,u;return F(function(c){return c.g==1?o.drmInfo?(a=E4(n),l=o.sessionIds.map(function(p){return{sessionId:p,keySystem:o.drmInfo.keySystem,licenseUri:o.drmInfo.licenseServerUri,serverCertificate:o.drmInfo.serverCertificate,audioCapabilities:y2(o,!1),videoCapabilities:y2(o,!0)}}),A(c,f2(t,e,l),2)):c.return():c.g!=3?(u=c.h,A(c,a.remove(u),3)):A(c,a.add(l.filter(function(p){return!u.includes(p.sessionId)})),0)})}function v2(e){for(var t=new Set,n=w(e.textStreams),o=n.next();!o.done;o=n.next())t.add(o.value);for(n=w(e.imageStreams),o=n.next();!o.done;o=n.next())t.add(o.value);for(e=w(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function i3(e){e.variants.map(function(l){return l.video});var t=new Set(e.variants.map(function(l){return l.audio}));e=e.textStreams;for(var n=w(t),o=n.next();!o.done;o=n.next()){o=w(t);for(var a=o.next();!a.done;a=o.next());}for(t=w(e),n=t.next();!n.done;n=t.next())for(n=w(e),o=n.next();!o.done;o=n.next());}ce("shaka.offline.Storage",Rn),Rn.deleteAll=function(){var e;return F(function(t){return t.g==1?(e=new ni,ge(t,2),A(t,A4(e),2)):t.g!=5?(re(t),A(t,e.destroy(),5)):oe(t,0)})},Rn.prototype.list=Rn.prototype.list,Rn.prototype.removeEmeSessions=Rn.prototype.Li,Rn.prototype.remove=Rn.prototype.remove,Rn.prototype.store=Rn.prototype.store,Rn.prototype.getNetworkingEngine=Rn.prototype.xb,Rn.prototype.getConfiguration=Rn.prototype.getConfiguration,Rn.prototype.configure=Rn.prototype.configure,Rn.prototype.destroy=Rn.prototype.destroy,Rn.support=Wp;var o3=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");Yd.offline=Wp;function Ln(){}function Xn(e,t){for(e={priority:t||0,callback:e},t=0;t<Cl.length;t++)if(Cl[t].priority<e.priority){Cl.splice(t,0,e);return}Cl.push(e)}ce("shaka.polyfill",Ln),Ln.register=Xn,Ln.installAll=function(){for(var e=w(Cl),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Ve("Error installing polyfill!",n)}}};var Cl=[];function Tl(){this.g=new zr}function x2(){d.AbortController||(d.AbortController=Tl,d.AbortSignal=zr)}Tl.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new Fe("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},b.Object.defineProperties(Tl.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Ln.AbortController=Tl,Tl.install=x2;function zr(){this.h=!1,this.g=void 0,this.onabort=null,this.i=new Lt}zr.prototype.addEventListener=function(e,t,n){return this.i.addEventListener(e,t,n)},zr.prototype.removeEventListener=function(e,t,n){return this.i.removeEventListener(e,t,n)},zr.prototype.dispatchEvent=function(e){return this.i.dispatchEvent(e)},zr.prototype.throwIfAborted=function(){if(this.h)throw this.g},b.Object.defineProperties(zr.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Xn(x2);function w2(){}function S2(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=w(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())r3(t.value)}function r3(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}Ln.Aria=w2,w2.install=S2,Xn(S2);function C2(){}function T2(){$w()}Ln.EncryptionScheme=C2,C2.install=T2,Xn(T2,-2);function E2(){}function A2(){if(d.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Gs),document.addEventListener("webkitfullscreenerror",Gs),document.addEventListener("mozfullscreenchange",Gs),document.addEventListener("mozfullscreenerror",Gs),document.addEventListener("MSFullscreenChange",Gs),document.addEventListener("MSFullscreenError",Gs)}}function Gs(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}Ln.Fullscreen=E2,E2.install=A2,Xn(A2);function Jf(){}function b2(){var e=!0;!Ci()||Ci()&&cu()||Ci()&&Ut("Fuchsia")||(e=!1),(qr()||uu()||go()||po()||ho()||Ut("PC=EOS")||fu())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),k2=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=s3)}function s3(e){var t,n,o,a,l,u,c,p,m,v,S;return F(function(E){switch(E.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,o=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(a=n.contentType,l=Ea(a),!l)||o&&(u=o.contentType,c=Ea(u),!c))return E.return(t)}else return E.return(t);E.u(2);break}if(!eo())return E.return(t);if(!n){E.u(3);break}return A(E,a3(n),4);case 4:if(p=E.h,!p)return E.return(t);case 3:if(o){var T=o.contentType;if(Ci()&&o.spatialRendering&&(T+="; spatialRendering=true"),m=kt(T),!m)return E.return(t)}case 2:return e.keySystemConfiguration?(v=e.keySystemConfiguration,A(E,l3(n,o,v),6)):(t.supported=!0,E.return(t));case 6:(S=E.h)&&(t.supported=!0,t.keySystemAccess=S);case 5:return E.return(t)}})}function a3(e){var t,n;return F(function(o){return o.g==1?Ci()?A(o,u3(e),3):ho()?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width,t+="; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.bitrate&&(t+="; bitrate="+e.bitrate),o.return(kt(t))):o.u(2):o.g!=2?(n=o.h,o.return(n)):o.return(kt(e.contentType))})}function l3(e,t,n){var o,a,l,u,c,p,m,v,S;return F(function(E){switch(E.g){case 1:if(o=[],a=[],n.audio&&(l={robustness:n.audio.robustness||"",contentType:t.contentType},ho()&&t.contentType.includes('codecs="ac-3"')&&(l.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(l.encryptionScheme=n.audio.encryptionScheme),o.push(l)),n.video&&(u={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(u.encryptionScheme=n.video.encryptionScheme),a.push(u)),c={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},o.length&&(c.audioCapabilities=o),a.length&&(c.videoCapabilities=a),p=e?e.contentType:"",m=t?t.contentType:"",v=n.keySystem,S=null,le(E,2),su.has(p+"#"+m+"#"+v)){S=su.get(p+"#"+m+"#"+v)||null,E.u(4);break}return A(E,navigator.requestMediaKeySystemAccess(n.keySystem,[c]),5);case 5:S=E.h,su.set(p+"#"+m+"#"+v,S);case 4:de(E,3);break;case 2:se(E);case 3:return E.return(S)}})}function u3(e){var t,n;return F(function(o){return o.g==1?d.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.transferFunction==="pq"&&(t+="; eotf=smpte2084"),n=!1,t in ec?(n=ec[t],o.u(2)):A(o,cast.__platform__.canDisplayType(t),3)):o.return(kt(e.contentType)):(o.g!=2&&(n=o.h,ec[t]=n),o.return(n))})}Ln.MediaCapabilities=Jf,Jf.install=b2;var k2=null;Jf.originalMcap=k2;var ec={};Jf.memoizedCanDisplayTypeRequests_=ec,Xn(b2,-1);function I2(){}function M2(){var e=Kr();(d.MediaSource||d.ManagedMediaSource)&&(e&&d.MediaSource?10>=e?d.MediaSource=null:12>=e?(Kp(),R2()):15>=e&&Kp():Ut("DT_STB_BCM")?(Kp(),R2()):(au()||ba()||Ut("Tizen 4"))&&c3()),(d.MediaSource||d.ManagedMediaSource)&&f3(),d.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&h3()}function Kp(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Ue.apply(0,arguments));return t.abort=function(){},t}}function R2(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function f3(){if(d.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return du(n)!="mp2t"&&e(n)}}if(d.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);d.ManagedMediaSource.isTypeSupported=function(n){return du(n)!="mp2t"&&t(n)}}}function c3(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return es(n)!="opus"&&e(n)},d.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);d.ManagedMediaSource.isTypeSupported=function(n){return es(n)!="opus"&&t(n)}}}function h3(){var e=MediaSource.isTypeSupported;po()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),o=n.findIndex(function(u){return u.startsWith("codecs=")});if(0>o)return e(t);var a=n[o].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),l=a.findIndex(function(u){return u.startsWith("vp09")});return 0<=l&&(a[l]="vp9",n[o]='codecs="'+a.join(",")+'"',t=n.join("; ")),e(t)})}Ln.MediaSource=I2,I2.install=M2,Xn(M2);function _2(){}function L2(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?d3():d.orientation!=null&&p3())}function d3(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function p3(){function e(){switch(d.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new tc;screen.orientation=t,e(),d.addEventListener("orientationchange",function(){e();var n=new Fe("change");t.dispatchEvent(n)})}Ln.Orientation=_2,_2.install=L2;function tc(){Lt.call(this),this.type="",this.angle=0}K(tc,Lt),tc.prototype.lock=function(e){function t(o){return screen.lockOrientation?screen.lockOrientation(o):screen.mozLockOrientation?screen.mozLockOrientation(o):screen.msLockOrientation?screen.msLockOrientation(o):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},tc.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Xn(L2);function Zp(){}var Qp,Jp,e0,t0,n0,i0;function g3(e,t){try{var n=new nc(e,t);return Promise.resolve(n)}catch(o){return Promise.reject(o)}}function m3(e){var t=this.mediaKeys;return t&&t!=e&&P2(t,null),delete this.mediaKeys,(this.mediaKeys=e)?P2(e,this):Promise.resolve()}function y3(e){if(e=Ze(e.initData),Tn(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Eo(e.subarray(4),!0),e=to(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=hn(e),this.dispatchEvent(t)}Ln.PatchedMediaKeysApple=Zp,Zp.uninstall=function(){Qp&&(Qp=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Jp),HTMLMediaElement.prototype.setMediaKeys=e0,d.MediaKeys=t0,d.MediaKeySystemAccess=n0,navigator.requestMediaKeySystemAccess=i0,Jp=i0=e0=n0=t0=null,d.shakaMediaKeysPolyfill="")},Zp.install=function(e){d.HTMLVideoElement&&d.WebKitMediaKeys&&(e!==void 0&&e&&(Qp=!0,Jp=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),e0=HTMLMediaElement.prototype.setMediaKeys,t0=d.MediaKeys,n0=d.MediaKeySystemAccess,i0=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=m3,d.MediaKeys=El,d.MediaKeySystemAccess=nc,navigator.requestMediaKeySystemAccess=g3,d.shakaMediaKeysPolyfill=v3)};function nc(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=w(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var o=!1,a=!1;if(n.audioCapabilities)for(var l=w(n.audioCapabilities),u=l.next();!u.done;u=l.next())u=u.value,u.contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0])&&(t.audioCapabilities.push(u),a=!0));if(n.videoCapabilities)for(n=w(n.videoCapabilities),l=n.next();!l.done;l=n.next())l=l.value,l.contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(t.videoCapabilities.push(l),a=!0));o||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=a?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}nc.prototype.createMediaKeys=function(){var e=new El(this.keySystem);return Promise.resolve(e)},nc.prototype.getConfiguration=function(){return this.g};function El(e){this.h=new WebKitMediaKeys(e),this.g=new ct}El.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new o0(this.h)},El.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function P2(e,t){if(e.g.Ra(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",y3);try{return ys(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}El.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function o0(e){Lt.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new ct,this.sessionId="",this.expiration=NaN,this.closed=new Bt,this.keyStatuses=new D2}K(o0,Lt),s=o0.prototype,s.generateRequest=function(e,t){var n=this;this.h=new Bt;try{var o=this.l.createSession("video/mp4",Ze(t));this.i=o,this.sessionId=o.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(a){n.h&&(n.h.resolve(),n.h=null),a=new Map().set("messageType",n.keyStatuses.Yb()==null?"license-request":"license-renewal").set("message",hn(a.message)),a=new Fe("message",a),n.dispatchEvent(a)}),this.j.D(o,"webkitkeyadded",function(){n.g&&(ic(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(o,"webkitkeyerror",function(){var a=Error("EME PatchedMediaKeysApple key error");if(a.errorCode=n.i.error,n.h!=null)n.h.reject(a),n.h=null;else if(n.g!=null)n.g.reject(a),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ic(n,"output-not-allowed");break;default:ic(n,"internal-error")}}),ic(this,"status-pending")}catch(a){this.h.reject(a)}return this.h},s.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},s.update=function(e){this.g=new Bt;try{this.i.update(Ze(e))}catch(t){this.g.reject(t)}return this.g},s.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ra()}catch(e){this.closed.reject(e)}return this.closed},s.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function ic(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Fe("keystatuseschange"),e.dispatchEvent(t)}function D2(){this.size=0,this.g=void 0}s=D2.prototype,s.Yb=function(){return this.g},s.forEach=function(e){this.g&&e(this.g,ru.value())},s.get=function(e){if(this.has(e))return this.g},s.has=function(e){var t=ru.value();return!!(this.g&&Zt(e,t))},s.entries=function(){},s.keys=function(){},s.values=function(){};var v3="apple";function N2(){}function O2(){d.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||ba()||Ut("Tizen 4")||Ut("Tizen 5.0")||lu())&&(MediaKeys.prototype.setServerCertificate=x3)}function x3(){return Promise.resolve(!1)}Ln.PatchedMediaKeysCert=N2,N2.install=O2,Xn(O2);function U2(){}function B2(){!d.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=w3,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=S3,d.MediaKeys=oc,d.MediaKeySystemAccess=r0,d.shakaMediaKeysPolyfill=C3)}function w3(){return Promise.reject(Error("The key system specified is not supported."))}function S3(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Ln.PatchedMediaKeysNop=U2,U2.install=B2;function oc(){throw new TypeError("Illegal constructor.")}oc.prototype.createSession=function(){},oc.prototype.setServerCertificate=function(){},oc.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function r0(){throw this.keySystem="",new TypeError("Illegal constructor.")}r0.prototype.getConfiguration=function(){},r0.prototype.createMediaKeys=function(){};var C3="nop";Xn(B2,-10);function j2(){}function F2(){if(!(!d.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)f0="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=T3,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=E3,d.MediaKeys=Al,d.MediaKeySystemAccess=rc,d.shakaMediaKeysPolyfill=A3}}function s0(e){var t=f0;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function T3(e,t){try{var n=new rc(e,t);return Promise.resolve(n)}catch(o){return Promise.reject(o)}}function E3(e){var t=this.mediaKeys;return t&&t!=e&&$2(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&$2(e,this),Promise.resolve()}Ln.PatchedMediaKeysWebkit=j2,j2.install=F2;function rc(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var o=!1,a=document.getElementsByTagName("video");a=a.length?a[0]:document.createElement("video"),t=w(t);for(var l=t.next();!l.done;l=t.next()){l=l.value;var u={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:l.initDataTypes,sessionTypes:["temporary"],label:l.label},c=!1;if(l.audioCapabilities)for(var p=w(l.audioCapabilities),m=p.next();!m.done;m=p.next())m=m.value,m.contentType&&(c=!0,a.canPlayType(m.contentType.split(";")[0],this.g)&&(u.audioCapabilities.push(m),o=!0));if(l.videoCapabilities)for(p=w(l.videoCapabilities),m=p.next();!m.done;m=p.next())m=m.value,m.contentType&&(c=!0,a.canPlayType(m.contentType,this.g)&&(u.videoCapabilities.push(m),o=!0));if(c||(o=a.canPlayType("video/mp4",this.g)||a.canPlayType("video/webm",this.g)),l.persistentState=="required"&&(n?(u.persistentState="required",u.sessionTypes=["persistent-license"]):o=!1),o){this.h=u;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}rc.prototype.createMediaKeys=function(){var e=new Al(this.g);return Promise.resolve(e)},rc.prototype.getConfiguration=function(){return this.h};function Al(e){this.l=e,this.h=null,this.g=new ct,this.i=[],this.j=new Map}function $2(e,t){e.h=t,e.g.Ra();var n=f0;t&&(e.g.D(t,n+"needkey",function(o){var a=new CustomEvent("encrypted");a.initDataType="cenc",a.initData=hn(o.initData),e.h.dispatchEvent(a)}),e.g.D(t,n+"keymessage",function(o){var a=a0(e,o.sessionId);a&&(o=new Map().set("messageType",a.keyStatuses.Yb()==null?"licenserequest":"licenserenewal").set("message",o.message),o=new Fe("message",o),a.h&&(a.h.resolve(),a.h=null),a.dispatchEvent(o))}),e.g.D(t,n+"keyadded",function(o){(o=a0(e,o.sessionId))&&o.ready()}),e.g.D(t,n+"keyerror",function(o){var a=a0(e,o.sessionId);if(a){var l=Error("EME v0.1b key error"),u=o.errorCode;u.systemCode=o.systemCode,l.errorCode=u,!o.sessionId&&a.h?(o.systemCode==45&&(l.message="Unsupported session type."),a.h.reject(l),a.h=null):o.sessionId&&a.g?(a.g.reject(l),a.g=null):(l=o.systemCode,o.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?sc(a,"output-restricted"):l==1?sc(a,"expired"):sc(a,"internal-error"))}}))}Al.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new l0(t,this.l,e),this.i.push(e),e},Al.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Al.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function a0(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function l0(e,t,n){Lt.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Bt,this.keyStatuses=new V2}K(l0,Lt),s=l0.prototype,s.ready=function(){sc(this,"usable"),this.g&&this.g.resolve(),this.g=null};function z2(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var o=Ze(to("LOAD_SESSION|"+n));else{var a=to("PERSISTENT|");o=ln(a,t)}else o=Ze(t)}catch(u){return Promise.reject(u)}e.h=new Bt;var l=s0("generateKeyRequest");try{e.j[l](e.i,o)}catch(u){if(u.name!="InvalidStateError")return e.h=null,Promise.reject(u);new mt(function(){try{e.j[l](e.i,o)}catch(c){e.h.reject(c),e.h=null}}).Y(.01)}return e.h}function u0(e,t,n){if(e.g)e.g.then(function(){return u0(e,t,n)}).catch(function(){return u0(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var o=Wt(n),a=JSON.parse(o);a.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),o=Li(a.keys[0].k),a=Li(a.keys[0].kid)}else o=Ze(n),a=null;var l=s0("addKey");try{e.j[l](e.i,o,a,e.sessionId)}catch(u){e.g.reject(u),e.g=null}}}function sc(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Fe("keystatuseschange"),e.dispatchEvent(t)}s.generateRequest=function(e,t){return z2(this,t,null)},s.load=function(e){return this.l=="persistent-license"?z2(this,null,e):Promise.reject(Error("Not a persistent session."))},s.update=function(e){var t=new Bt;return u0(this,t,e),t},s.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=s0("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},s.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function V2(){this.size=0,this.g=void 0}s=V2.prototype,s.Yb=function(){return this.g},s.forEach=function(e){this.g&&e(this.g,ru.value())},s.get=function(e){if(this.has(e))return this.g},s.has=function(e){var t=ru.value();return!!(this.g&&Zt(e,t))},s.entries=function(){},s.keys=function(){},s.values=function(){};var f0="",A3="webkit";Xn(F2);function H2(){}function G2(){if(d.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=k3,Object.defineProperty(e,"disablePictureInPicture",{get:M3,set:R3,enumerable:!0,configurable:!0}),document.exitPictureInPicture=I3,document.addEventListener("webkitpresentationmodechanged",b3,!0))}}function b3(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function k3(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function I3(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function M3(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function R3(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Ln.PiPWebkit=H2,H2.install=G2,Xn(G2);function X2(){}function W2(){d.crypto&&("randomUUID"in d.crypto||(d.crypto.randomUUID=_3))}function _3(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Ln.RandomUUID=X2,X2.install=W2,Xn(W2);function Y2(){}function q2(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:L3})}function L3(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Ln.Symbol=Y2,Y2.install=q2,Xn(q2);function K2(){}function Z2(){if(d.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Ln.VideoPlayPromise=K2,K2.install=Z2,Xn(Z2);function Q2(){}function J2(){if(d.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||lu())&&(e.getVideoPlaybackQuality=P3)}}function P3(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Ln.VideoPlaybackQuality=Q2,Q2.install=J2,Xn(J2);function ew(){}function tw(){if(!d.VTTCue&&d.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=c0;else if(t==6)e=D3;else{try{var n=!!c0(1,2,"")}catch{n=!1}n&&(e=c0)}e&&(d.VTTCue=function(o,a,l){return e(o,a,l)})}}function c0(e,t,n){return new d.TextTrackCue(e,t,n)}function D3(e,t,n){return new d.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Ln.VTTCue=ew,ew.install=tw,Xn(tw);function Ai(){}Ai.prototype.parseInit=function(){},Ai.prototype.setSequenceMode=function(){},Ai.prototype.setManifestType=function(){},Ai.prototype.parseMedia=function(e,t){var n=null,o=[];e=Wt(e).split(/\r?\n/),e=w(e);for(var a=e.next();!a.done;a=e.next())if((a=a.value)&&!/^\s+$/.test(a)&&(a=N3.exec(a))){var l=O3.exec(a[1]);l=60*parseInt(l[1],10)+parseFloat(l[2].replace(",",".")),a=new jt(l,t.segmentEnd?t.segmentEnd:l+2,a[2]),n&&(n.endTime=l,o.push(n)),n=a}return n&&o.push(n),o},ce("shaka.text.LrcTextParser",Ai),Ai.prototype.parseMedia=Ai.prototype.parseMedia,Ai.prototype.setManifestType=Ai.prototype.setManifestType,Ai.prototype.setSequenceMode=Ai.prototype.setSequenceMode,Ai.prototype.parseInit=Ai.prototype.parseInit;var N3=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,O3=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Sn["application/x-subtitle-lrc"]=function(){return new Ai};function mi(){}mi.prototype.parseInit=function(){},mi.prototype.setSequenceMode=function(){},mi.prototype.setManifestType=function(){},mi.prototype.parseMedia=function(e,t,n){var o=Wt(e);if(e=[],o=="")return e;var a=cs(o,"tt");if(!a)throw new J(2,2,2005,"Failed to parse TTML.");if(o=Yi(a,"body")[0],!o)return[];var l=yo(a,bl,"frameRate"),u=yo(a,bl,"subFrameRate"),c=yo(a,bl,"frameRateMultiplier"),p=yo(a,bl,"tickRate"),m=yo(a,bl,"cellResolution"),v=a.attributes["xml:space"]||"default",S=yo(a,uc,"extent");if(v!="default"&&v!="preserve")throw new J(2,2,2005,"Invalid xml:space value: "+v);v=v=="default",l=new j3(l,u,c,p),m=m&&(m=/^(\d+) (\d+)$/.exec(m))?{dc:parseInt(m[1],10),rows:parseInt(m[2],10)}:null,u=(u=Yi(a,"metadata")[0])?u.children:[],c=Yi(a,"style"),a=Yi(a,"region"),p=[];for(var E=w(a),T=E.next();!T.done;T=E.next()){var k=T.value;T=new bn;var M=k.attributes["xml:id"];if(M){T.id=M;var I=null;S&&(I=g0.exec(S)||m0.exec(S)),M=I?Number(I[1]):null,I=I?Number(I[2]):null;var U,N=ac(k,c,"extent");if(N){var z=(U=g0.exec(N))||m0.exec(N);z!=null&&(T.width=Number(z[1]),T.height=Number(z[2]),U||(M!=null&&(T.width=100*T.width/M),I!=null&&(T.height=100*T.height/I)),T.widthUnits=U||M!=null?nn:0,T.heightUnits=U||I!=null?nn:0)}(k=ac(k,c,"origin"))&&(z=(U=g0.exec(k))||m0.exec(k),z!=null&&(T.viewportAnchorX=Number(z[1]),T.viewportAnchorY=Number(z[2]),U?N||(T.width=100-T.viewportAnchorX,T.widthUnits=nn,T.height=100-T.viewportAnchorY,T.heightUnits=nn):(I!=null&&(T.viewportAnchorY=100*T.viewportAnchorY/I),M!=null&&(T.viewportAnchorX=100*T.viewportAnchorX/M)),T.viewportAnchorUnits=U||M!=null?nn:0))}else T=null;T&&p.push(T)}if(Ht(o,"p").length)throw new J(2,2,2001,"<p> can only be inside <div> in TTML");for(S=w(Ht(o,"div")),E=S.next();!E.done;E=S.next())if(Ht(E.value,"span").length)throw new J(2,2,2001,"<span> can only be inside <p> in TTML");return(t=nw(o,t,l,u,c,a,p,v,m,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function nw(e,t,n,o,a,l,u,c,p,m,v,S){var E=m;if(Au(e)){if(!v)return null;var T={tagName:"span",children:[Cn(e)],attributes:{},parent:null}}else T=e;for(var k=null,M=w(hw),I=M.next();!I.done&&!(k=lc(T,"backgroundImage",o,"#",I.value)[0]);I=M.next());M=null;var U=yo(T,hw,"backgroundImage");if(S&&U&&!U.startsWith("#")&&(I=new pn(S),U=new pn(U),(I=I.resolve(U).toString())&&(M=I)),(e.tagName=="p"||k||M)&&(v=!0),e=v,I=(T.attributes["xml:space"]||(c?"default":"preserve"))=="default",U=T.children.every(Au),c=[],!U)for(var N=w(T.children),z=N.next();!z.done;z=N.next())(z=nw(z.value,t,n,o,a,l,u,I,p,T,v,S))&&c.push(z);if(o=m!=null,S=Cn(T),S=T.children.length&&S&&/\S/.test(S),z=T.attributes.begin||T.attributes.end||T.attributes.dur,!(z||S||T.tagName=="br"||c.length!=0||o&&!I))return null;for(N=rw(T,n),S=N.start,N=N.end;E&&E.tagName&&E.tagName!="tt";)N=B3(E,n,S,N),S=N.start,N=N.end,E=E.parent;if(S==null&&(S=0),S+=t.periodStart,N=N==null?1/0:N+t.periodStart,S=Math.max(S,t.segmentStart),N=Math.min(N,t.segmentEnd),!z&&0<c.length)for(S=1/0,N=0,t=w(c),n=t.next();!n.done;n=t.next())n=n.value,S=Math.min(S,n.startTime),N=Math.max(N,n.endTime);if(T.tagName=="br")return a=new jt(S,N,""),a.lineBreak=!0,a;if(t="",U&&(t=Zn(Cn(T)||""),I&&(t=t.replace(/\s+/g," "))),t=new jt(S,N,t),t.nestedCues=c,v||(t.isContainer=!0),p&&(t.cellResolution=p),p=lc(T,"region",l,"")[0],T.attributes.region&&p&&p.attributes["xml:id"]){var P=p.attributes["xml:id"];t.region=u.filter(function(j){return j.id==P})[0]}return u=p,m&&o&&!T.attributes.region&&!T.attributes.style&&(u=lc(m,"region",l,"")[0]),U3(t,T,u,k,M,a,e,c.length==0),t}function U3(e,t,n,o,a,l,u,c){if(u=u||c,Un(t,n,l,"direction",u)=="rtl"&&(e.direction="rtl"),c=Un(t,n,l,"writingMode",u),c=="tb"||c=="tblr"?e.writingMode="vertical-lr":c=="tbrl"?e.writingMode="vertical-rl":c=="rltb"||c=="rl"?e.direction="rtl":c&&(e.direction=va),(c=Un(t,n,l,"textAlign",!0))?(e.positionAlign=z3[c],e.lineAlign=$3[c],e.textAlign=gh[c.toUpperCase()]):e.textAlign=Co,(c=Un(t,n,l,"displayAlign",!0))&&(e.displayAlign=Ag[c.toUpperCase()]),(c=Un(t,n,l,"color",u))&&(e.color=c),(c=Un(t,n,l,"backgroundColor",u))&&(e.backgroundColor=c),(c=Un(t,n,l,"border",u))&&(e.border=c),c=Un(t,n,l,"fontFamily",u))switch(c){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=c.split(",").filter(function(p){return p!="default"}).join(",")}switch((c=Un(t,n,l,"fontWeight",u))&&c=="bold"&&(e.fontWeight=700),c=Un(t,n,l,"wrapOption",u),e.wrapLine=!(c&&c=="noWrap"),(c=Un(t,n,l,"lineHeight",u))&&c.match(Xs)&&(e.lineHeight=c),(c=Un(t,n,l,"fontSize",u))&&(c.match(Xs)||c.match(F3))&&(e.fontSize=c),(c=Un(t,n,l,"fontStyle",u))&&(e.fontStyle=Mg[c.toUpperCase()]),o?(a=o.attributes.imageType||o.attributes.imagetype,c=o.attributes.encoding,o=Cn(o).trim(),a=="PNG"&&c=="Base64"&&o&&(e.backgroundImage="data:image/png;base64,"+o)):a&&(e.backgroundImage=a),(o=Un(t,n,l,"textOutline",u))&&(o=o.split(" "),o[0].match(Xs)?e.textStrokeColor=e.color:(e.textStrokeColor=o[0],o.shift()),o[0]&&o[0].match(Xs)?e.textStrokeWidth=o[0]:e.textStrokeColor=""),(o=Un(t,n,l,"letterSpacing",u))&&o.match(Xs)&&(e.letterSpacing=o),(o=Un(t,n,l,"linePadding",u))&&o.match(Xs)&&(e.linePadding=o),(o=Un(t,n,l,"opacity",u))&&(e.opacity=parseFloat(o)),(o=ac(n,l,"textDecoration"))&&iw(e,o),(o=h0(t,l,"textDecoration"))&&iw(e,o),(o=Un(t,n,l,"textCombine",u))&&(e.textCombineUpright=o),Un(t,n,l,"ruby",u)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function iw(e,t){t=w(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Kn(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Kn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Kn(e.textDecoration,"overline")}}function Un(e,t,n,o,a){return a=a===void 0?!0:a,(e=h0(e,n,o))?e:a?ac(t,n,o):null}function ac(e,t,n){if(!e)return null;var o=yo(e,uc,n);return o||ow(e,t,n)}function h0(e,t,n){var o=yo(e,uc,n);return o||ow(e,t,n)}function ow(e,t,n){e=lc(e,"style",t,"");for(var o=null,a=0;a<e.length;a++){var l=_o(e[a],"urn:ebu:tt:style",n);l||(l=yo(e[a],uc,n)),l||(l=h0(e[a],t,n)),l&&(o=l)}return o}function lc(e,t,n,o,a){var l=[];if(!e||1>n.length)return l;var u=e;for(e=null;!e&&!(e=a?_o(u,a,t):u.attributes[t])&&(u=u.parent,u););if(t=e){for(t=w(t.split(" ")),a=t.next();!a.done;a=t.next())for(a=a.value,e=w(n),u=e.next();!u.done;u=e.next())if(u=u.value,o+u.attributes["xml:id"]==a){l.push(u);break}}return l}function B3(e,t,n,o){return e=rw(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),o==null?o=e.end:e.start!=null&&(o+=e.start),{start:n,end:o}}function rw(e,t){var n=d0(e.attributes.begin,t),o=d0(e.attributes.end,t);return e=d0(e.attributes.dur,t),o==null&&e!=null&&(o=n+e),{start:n,end:o}}function d0(e,t){var n=null;if(sw.test(e)){e=sw.exec(e),n=Number(e[1]);var o=Number(e[2]),a=Number(e[3]),l=Number(e[4]);l+=(Number(e[5])||0)/t.h,a+=l/t.frameRate,n=a+60*o+3600*n}else if(aw.test(e))n=p0(aw,e);else if(lw.test(e))n=p0(lw,e);else if(uw.test(e))e=uw.exec(e),n=Number(e[1])/t.frameRate;else if(fw.test(e))e=fw.exec(e),n=Number(e[1])/t.g;else if(cw.test(e))n=p0(cw,e);else if(e)throw new J(2,2,2001,"Could not parse cue time range in TTML");return n}function p0(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}ce("shaka.text.TtmlTextParser",mi),mi.prototype.parseMedia=mi.prototype.parseMedia,mi.prototype.setManifestType=mi.prototype.setManifestType,mi.prototype.setSequenceMode=mi.prototype.setSequenceMode,mi.prototype.parseInit=mi.prototype.parseInit;function j3(e,t,n,o){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(o),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var g0=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,F3=/^(\d{1,4}(?:\.\d+)?|100)%$/,Xs=/^(\d+px|\d+em|\d*\.?\d+c)$/,m0=/^(\d+)px (\d+)px$/,sw=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,aw=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,lw=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,uw=/^(\d*(?:\.\d*)?)f$/,fw=/^(\d*(?:\.\d*)?)t$/,cw=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),$3={left:Cr,center:"center",right:"end",start:Cr,end:"end"},z3={left:"line-left",center:"center",right:"line-right"},bl=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],uc=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],hw=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Sn["application/ttml+xml"]=function(){return new mi};function _n(){this.g=new mi}_n.prototype.parseInit=function(e){var t=!1;if(new zt().box("moov",xt).box("trak",xt).box("mdia",xt).box("minf",xt).box("stbl",xt).S("stsd",Qo).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new J(2,2,2007)},_n.prototype.setSequenceMode=function(){},_n.prototype.setManifestType=function(){},_n.prototype.parseMedia=function(e,t,n){var o=this,a=!1,l=[];if(new zt().box("mdat",us(function(u){a=!0,l=l.concat(o.g.parseMedia(u,t,n))})).parse(e,!1),!a)throw new J(2,2,2007);return l},ce("shaka.text.Mp4TtmlParser",_n),_n.prototype.parseMedia=_n.prototype.parseMedia,_n.prototype.setManifestType=_n.prototype.setManifestType,_n.prototype.setSequenceMode=_n.prototype.setSequenceMode,_n.prototype.parseInit=_n.prototype.parseInit,Sn['application/mp4; codecs="stpp"']=function(){return new _n},Sn['application/mp4; codecs="stpp.ttml"']=function(){return new _n},Sn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new _n},Sn['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new _n},Sn['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new _n},Sn['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new _n},Sn['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new _n},Sn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new _n};function Wn(){this.h=!1,this.g="UNKNOWN"}Wn.prototype.parseInit=function(){},Wn.prototype.setSequenceMode=function(e){this.h=e},Wn.prototype.setManifestType=function(e){this.g=e},Wn.prototype.parseMedia=function(e,t){e=Wt(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new J(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var o=n[0];if(e=o.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=o.match(/MPEGTS:(\d+)/m),!e||!o)throw new J(2,2,2e3);if(e=fc(new ir(e[1])),e==null)throw new J(2,2,2e3);o=Number(o[1]);for(var a=t.segmentStart-t.periodStart;95443.7176888889<=a;)a-=95443.7176888889,o+=8589934592;e=t.periodStart+o/9e4-e}else e=t.segmentStart;for(t=[],o=w(n[0].split(`
`)),a=o.next();!a.done;a=o.next())if(a=a.value,/^Region:/.test(a)){a=new ir(a);var l=new bn;Or(a),Rs(a);for(var u=Or(a);u;){var c=l,p=u;(u=/^id=(.*)$/.exec(p))?c.id=u[1]:(u=/^width=(\d{1,2}|100)%$/.exec(p))?c.width=Number(u[1]):(u=/^lines=(\d+)$/.exec(p))?(c.height=Number(u[1]),c.heightUnits=2):(u=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(c.regionAnchorX=Number(u[1]),c.regionAnchorY=Number(u[2])):(u=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(c.viewportAnchorX=Number(u[1]),c.viewportAnchorY=Number(u[2])):/^scroll=up$/.exec(p)&&(c.scroll="up"),Rs(a),u=Or(a)}t.push(l)}for(o=new Map,dw(o),a=[],n=w(n.slice(1)),l=n.next();!l.done;l=n.next()){if(l=l.value.split(`
`),(l.length!=1||l[0])&&!/^NOTE($|[ \t])/.test(l[0])&&l[0]=="STYLE"){for(c=[],u=-1,p=1;p<l.length;p++)l[p].includes("::cue")&&(c.push([]),u=c.length-1),u!=-1&&(c[u].push(l[p]),l[p].includes("}")&&(u=-1));for(c=w(c),u=c.next();!u.done;u=c.next()){var m=u.value;u="global",(p=m[0].match(/\((.*)\)/))&&(u=p.pop()),p=m.slice(1,-1),m[0].includes("}")&&(m=/\{(.*?)\}/.exec(m[0]))&&(p=m[1].split(";")),(m=o.get(u))||(m=new jt(0,0,""));for(var v=!1,S=0;S<p.length;S++){var E=/^\s*([^:]+):\s*(.*)/.exec(p[S]);if(E){var T=E[2].trim().replace(";","");switch(E[1].trim()){case"background-color":case"background":v=!0,m.backgroundColor=T;break;case"color":v=!0,m.color=T;break;case"font-family":v=!0,m.fontFamily=T;break;case"font-size":v=!0,m.fontSize=T;break;case"font-weight":(700<=parseInt(T,10)||T=="bold")&&(v=!0,m.fontWeight=700);break;case"font-style":switch(T){case"normal":v=!0,m.fontStyle=yh;break;case"italic":v=!0,m.fontStyle="italic";break;case"oblique":v=!0,m.fontStyle="oblique"}break;case"opacity":v=!0,m.opacity=parseFloat(T);break;case"text-combine-upright":v=!0,m.textCombineUpright=T;break;case"text-shadow":v=!0,m.textShadow=T;break;case"white-space":v=!0,m.wrapLine=T!="noWrap"}}}v&&o.set(u,m)}}if(m=l,v=e,m.length==1&&!m[0]||/^NOTE($|[ \t])/.test(m[0])||m[0]=="STYLE"||m[0]=="REGION")l=null;else if(l=null,m[0].includes("-->")||(l=m[0],m.splice(0,1)),c=new ir(m[0]),u=fc(c),S=Uo(c,/[ \t]+--\x3e[ \t]+/g),p=fc(c),u==null||S==null||p==null)Ve("Failed to parse VTT time code. Cue skipped:",l,m),l=null;else{for(u+=v,p+=v,m=m.slice(1).join(`
`).trim(),o.has("global")?(v=o.get("global").clone(),v.startTime=u,v.endTime=p,v.payload=""):v=new jt(u,p,""),Rs(c),u=Or(c);u;)mw(v,u,t),Rs(c),u=Or(c);pw(m,v,o),l!=null&&(v.id=l),l=v}l&&a.push(l)}return a};function dw(e){for(var t=w(Object.entries(bg)),n=t.next();!n.done;n=t.next()){var o=w(n.value);n=o.next().value,o=o.next().value;var a=new jt(0,0,"");a.color=o,e.set("."+n,a)}for(t=w(Object.entries(kg)),n=t.next();!n.done;n=t.next())o=w(n.value),n=o.next().value,o=o.next().value,a=new jt(0,0,""),a.backgroundColor=o,e.set("."+n,a)}function pw(e,t,n){if(e.includes("<")){n.size===0&&dw(n);var o=e;e=[];for(var a=-1,l=0;l<o.length;l++)o[l]==="<"?a=l+1:o[l]===">"&&0<a&&(a=o.substr(a,l-a),a.match(yw)&&e.push(a),a=-1);for(e=w(e),l=e.next();!l.done;l=e.next())l=l.value,o=o.replace("<"+l+">",'<div time="'+l+'">'),o+="</div>";e=o;e:{l=e,a=[];var u=-1;e="",o=!1;for(var c=0;c<l.length;c++)if(l[c]==="/"){var p=l.indexOf(">",c);if(p===-1){e=l;break e}if((p=l.substring(c+1,p))&&p=="v"){o=!0;var m=null;if(a.length&&(m=a[a.length-1]),m){if(m===p)e+="/"+p+">";else{if(!m.startsWith("v")){e+=l[c];continue}e+="/"+m+">"}c+=p.length+1}else e+=l[c]}else e+=l[c]}else l[c]==="<"?(u=c+1,l[u]!="v"&&(u=-1)):l[c]===">"&&0<u&&(a.push(l.substr(u,c-u)),u=-1),e+=l[c];for(l=w(a),a=l.next();!a.done;a=l.next())a=a.value,u=a.replace(" ",".voice-"),e=e.replace("<"+a+">","<"+u+">"),e=e.replace("</"+a+">","</"+u+">"),o||(e+="</"+u+">")}e=V3(e);try{var v=cs("<span>"+e+"</span>","span")}catch{}if(v)if(v=v.children,v.length!=1||v[0].tagName)for(v=w(v),e=v.next();!e.done;e=v.next())gw(e.value,t,n);else t.payload=Zn(e);else t.payload=Zn(e)}else t.payload=Zn(e)}function V3(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,o=RegExp(n.source);return e&&o.test(e)?e.replace(n,function(a){return t[a]||""}):e||""}function kl(e,t){return e&&0<e.length?e:t}function gw(e,t,n){var o=t.clone();if(o.nestedCues=[],o.payload="",o.rubyTag="",o.line=null,o.region=new bn,o.position=null,o.size=0,e.tagName)for(var a=w(e.tagName.split(/(?=[ .])+/g)),l=a.next();!l.done;l=a.next()){var u=l=l.value;if(u.startsWith(".voice-")){var c=u.split("-").pop();u='v[voice="'+c+'"]',n.has(u)||(u="v[voice="+c+"]")}switch(n.has(u)&&(c=o,u=n.get(u))&&(c.backgroundColor=kl(u.backgroundColor,c.backgroundColor),c.color=kl(u.color,c.color),c.fontFamily=kl(u.fontFamily,c.fontFamily),c.fontSize=kl(u.fontSize,c.fontSize),c.textShadow=kl(u.textShadow,c.textShadow),c.fontWeight=u.fontWeight,c.fontStyle=u.fontStyle,c.opacity=u.opacity,c.rubyTag=u.rubyTag,c.textCombineUpright=u.textCombineUpright,c.wrapLine=u.wrapLine),l){case"br":o=Ji(o.startTime,o.endTime),t.nestedCues.push(o);return;case"b":o.fontWeight=700;break;case"i":o.fontStyle="italic";break;case"u":o.textDecoration.push("underline");break;case"font":(l=e.attributes.color)&&(o.color=l);break;case"div":if(l=e.attributes.time,!l)break;(l=fc(new ir(l)))&&(o.startTime=l);break;case"ruby":case"rp":case"rt":o.rubyTag=l}}if(a=e.children,Au(e)||a.length==1&&Au(a[0]))for(n=Cn(e).split(`
`),e=!0,n=w(n),a=n.next();!a.done;a=n.next())a=a.value,e||(e=Ji(o.startTime,o.endTime),t.nestedCues.push(e)),0<a.length&&(e=o.clone(),e.payload=Zn(a),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(o),t=w(a),e=t.next();!e.done;e=t.next())gw(e.value,o,n)}function mw(e,t,n){var o;(o=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=o[1],t=="middle"?e.textAlign=Co:e.textAlign=gh[t.toUpperCase()]):(o=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=o[1]=="lr"?"vertical-lr":"vertical-rl":(o=/^size:([\d.]+)%$/.exec(t))?e.size=Number(o[1]):(o=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(o[1]),o[2]&&(t=o[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":gt)):(o=/^region:(.*)$/.exec(t))?(t=H3(n,o[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=mh[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=tu,e.line=Number(n[1]),n[2]&&(e.lineAlign=mh[n[2].toUpperCase()]))}function H3(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function fc(e){if(e=Uo(e,yw),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}ce("shaka.text.VttTextParser",Wn),Wn.prototype.parseMedia=Wn.prototype.parseMedia,Wn.prototype.setManifestType=Wn.prototype.setManifestType,Wn.prototype.setSequenceMode=Wn.prototype.setSequenceMode,Wn.prototype.parseInit=Wn.prototype.parseInit;var yw=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;Sn["text/vtt"]=function(){return new Wn},Sn['text/vtt; codecs="vtt"']=function(){return new Wn},Sn['text/vtt; codecs="wvtt"']=function(){return new Wn};function bi(){this.g=null}bi.prototype.parseInit=function(e){var t=this,n=!1;if(new zt().box("moov",xt).box("trak",xt).box("mdia",xt).S("mdhd",function(o){o=Lu(o.reader,o.version),t.g=o.timescale}).box("minf",xt).box("stbl",xt).S("stsd",Qo).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new J(2,2,2008);if(!n)throw new J(2,2,2008)},bi.prototype.setSequenceMode=function(){},bi.prototype.setManifestType=function(){},bi.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new J(2,2,2008);var n=0,o=[],a,l=[],u=!1,c=!1,p=!1,m=null;if(new zt().box("moof",xt).box("traf",xt).S("tfdt",function(z){u=!0,n=_u(z.reader,z.version).baseMediaDecodeTime}).S("tfhd",function(z){m=ty(z.reader,z.flags).Yc}).S("trun",function(z){c=!0,o=ny(z.reader,z.version,z.flags).Wg}).box("mdat",us(function(z){p=!0,a=z})).parse(e,!1),!p&&!u&&!c)throw new J(2,2,2008);e=n;for(var v=new $t(a,0),S=w(o),E=S.next();!E.done;E=S.next()){E=E.value;var T=E.Jf||m,k=E.ne?n+E.ne:e;e=k+(T||0);var M=0;do{var I=v.P();M+=I;var U=v.P(),N=null;Tu(U)=="vttc"?8<I&&(N=v.qb(I-8)):v.skip(I-8),T&&N&&(I=G3(N,t.periodStart+k/this.g,t.periodStart+e/this.g),l.push(I))}while(E.sampleSize&&M<E.sampleSize)}return l.filter(Ir)};function G3(e,t,n){var o,a,l;return new zt().box("payl",us(function(u){o=Wt(u)})).box("iden",us(function(u){a=Wt(u)})).box("sttg",us(function(u){l=Wt(u)})).parse(e),o?X3(o,a,l,t,n):null}function X3(e,t,n,o,a){if(o=new jt(o,a,""),pw(e,o,new Map),t&&(o.id=t),n)for(e=new ir(n),t=Or(e);t;)mw(o,t,[]),Rs(e),t=Or(e);return o}ce("shaka.text.Mp4VttParser",bi),bi.prototype.parseMedia=bi.prototype.parseMedia,bi.prototype.setManifestType=bi.prototype.setManifestType,bi.prototype.setSequenceMode=bi.prototype.setSequenceMode,bi.prototype.parseInit=bi.prototype.parseInit,Sn['application/mp4; codecs="wvtt"']=function(){return new bi};function ki(){}ki.prototype.parseInit=function(){},ki.prototype.setSequenceMode=function(){},ki.prototype.setManifestType=function(){},ki.prototype.parseMedia=function(e){var t=Wt(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=w(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var o=new ir(n[0]),a=vw(o),l=Uo(o,/,/g);if(o=vw(o),a==null||l==null||o==null)throw new J(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new jt(a,o,n.slice(1).join(`
`).trim()))}return e};function vw(e){if(e=Uo(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}ce("shaka.text.SbvTextParser",ki),ki.prototype.parseMedia=ki.prototype.parseMedia,ki.prototype.setManifestType=ki.prototype.setManifestType,ki.prototype.setSequenceMode=ki.prototype.setSequenceMode,ki.prototype.parseInit=ki.prototype.parseInit,Sn["text/x-subviewer"]=function(){return new ki};function yi(){this.g=new Wn}yi.prototype.parseInit=function(){},yi.prototype.setSequenceMode=function(){},yi.prototype.setManifestType=function(){},yi.prototype.parseMedia=function(e,t,n){return e=Wt(e),e=xw(e),e=Ze(to(e)),this.g.parseMedia(e,t,n)};function xw(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=w(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}ce("shaka.text.SrtTextParser",yi),yi.srt2webvtt=xw,yi.prototype.parseMedia=yi.prototype.parseMedia,yi.prototype.setManifestType=yi.prototype.setManifestType,yi.prototype.setSequenceMode=yi.prototype.setSequenceMode,yi.prototype.parseInit=yi.prototype.parseInit,Sn["text/srt"]=function(){return new yi};function Ii(){}Ii.prototype.parseInit=function(){},Ii.prototype.setSequenceMode=function(){},Ii.prototype.setManifestType=function(){},Ii.prototype.parseMedia=function(e){var t="",n="",o=null,a=null;for(a=Wt(e).split(/\r?\n\s*\r?\n/),e=w(a),a=e.next();!a.done;a=e.next()){var l=a.value;a=l,(l=Y3.exec(l))&&(o=l[1],a=l[2]),o=="V4 Styles"||o=="V4+ Styles"?(t=a,t=n?t+(`
`+a):a):o=="Events"&&(n=n?n+(`
`+a):a)}for(o=[],a=null,t=w(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(l=Cw.exec(e))){if(e=l[1].trim(),l=l[2].trim(),e=="Format")a=l.split(cc);else if(e=="Style"){e=l.split(cc),l={};for(var u=0;u<a.length&&u<e.length;u++)l[a[u]]=e[u];o.push(l)}}for(a=[],t=null,n=w(n.split(/\r?\n/)),l=n.next(),e={};!l.done;e={jh:void 0},l=n.next())if(l=l.value,!/^\s*;/.test(l)&&(u=Cw.exec(l))){if(l=u[1].trim(),u=u[2].trim(),l=="Format")t=u.split(cc);else if(l=="Dialogue"){u=u.split(cc),l={};for(var c=0;c<t.length&&c<u.length;c++)l[t[c]]=u[c];c=Sw(l.Start);var p=Sw(l.End);u=new jt(c,p,u.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.jh=l.Style,(e=o.find(function(m){return function(v){return v.Name==m.jh}}(e)))&&W3(u,e),a.push(u)}}return a};function W3(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=ww(n))&&(e.color=n),(n=t.BackColour)&&(n=ww(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=ya,e.textAlign="start";break;case 2:e.displayAlign=ya,e.textAlign=Co;break;case 3:e.displayAlign=ya,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Co;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Co;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function ww(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function Sw(e){return e=q3.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}ce("shaka.text.SsaTextParser",Ii),Ii.prototype.parseMedia=Ii.prototype.parseMedia,Ii.prototype.setManifestType=Ii.prototype.setManifestType,Ii.prototype.setSequenceMode=Ii.prototype.setSequenceMode,Ii.prototype.parseInit=Ii.prototype.parseInit;var Y3=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Cw=/^\s*([^:]+):\s*(.*)/,cc=/\s*,\s*/,q3=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Sn["text/x-ssa"]=function(){return new Ii};function Tw(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,ca:e}:null}function Ew(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=(e[t+2]&60)>>>2;if(o>n.length-1)return null;var a=((e[t+2]&192)>>>6)+1,l=(e[t+2]&1)<<2;return l|=(e[t+3]&192)>>>6,{sampleRate:n[o],channelCount:l,codec:"mp4a.40."+a}}function Aw(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var o=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return o<=n?!1:(t+=o,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function K3(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Mi(e){this.i=e,this.h=0,this.g=new Map}s=Mi.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?kt(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Ti(t)||"mp4a.40.2")+'"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,o){for(var a=Ze(e),l=hs(a),u=l.length;u<a.length&&!Aw(a,u);u++);if(e=1e3*n.endTime,l=Lr(l),l.length&&n&&(l=l.find(function(v){return v.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=l.data),l=Ew(a,u),!l)return Promise.reject(new J(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount;for(var c=[];u<a.length;){var p=Tw(a,u);if(!p)return Promise.reject(new J(2,3,3018,n?n.M()[0]:null));var m=p.Qd+p.ca;u+m<=a.length&&c.push({data:a.subarray(u+p.Qd,u+m),size:p.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),u+=m}return a=l.sampleRate,e=Math.floor(e*a/1e3),o={id:t.id,type:"audio",codecs:l.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:o,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:c},stream:t},o=new zs([o]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Vs(o),this.g.set(n,t)),n=vl(o),this.h++,t=ln(t,n),Promise.resolve(t)},ce("shaka.transmuxer.AacTransmuxer",Mi),Mi.prototype.transmux=Mi.prototype.transmux,Mi.prototype.getOriginalMimeType=Mi.prototype.getOriginalMimeType,Mi.prototype.convertCodecs=Mi.prototype.convertCodecs,Mi.prototype.isSupported=Mi.prototype.isSupported,Mi.prototype.destroy=Mi.prototype.destroy,To("audio/aac",function(){return new Mi("audio/aac")},Ko);function bw(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var o=e[t+4]&63,a=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+n];if(t+a>e.length)return null;var l=e[t+6]>>5,u=0;l===2?u+=2:(l&1&&l!==1&&(u+=2),l&4&&(u+=2)),u=(e[t+6]<<8|e[t+7])>>12-u&1;var c=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|c>>2,(c&3)<<6|l<<3|u<<2|o>>4,o<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][l]+u,ma:e,ca:a}}function Z3(e,t){if(e[t]===11&&e[t+1]===119){var n=0,o=5;t+=o;for(var a,l;0<o;){l=e[t];var u=Math.min(o,8),c=8-u;a=4278190080>>>24+c<<c,a=(l&a)>>c,n=n?n<<u|a:a,t+=1,o-=u}if(16>n)return!0}return!1}function Bi(e){this.i=e,this.h=0,this.g=new Map}s=Bi.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?kt(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,o){e=Ze(e);for(var a=hs(e),l=a.length;l<e.length&&!Z3(e,l);l++);var u=1e3*n.endTime;a=Lr(a),a.length&&n&&(a=a.find(function(v){return v.description==="com.apple.streaming.transportStreamTimestamp"}))&&(u=a.data),a=0;for(var c=new Uint8Array([]),p=[];l<e.length;){var m=bw(e,l);if(!m)return Promise.reject(new J(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=m.sampleRate,t.channelsCount=m.channelCount,a=m.sampleRate,c=m.ma,p.push({data:e.subarray(l,l+m.ca),size:m.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),l+=m.ca}return e=Math.floor(u*a/1e3),o={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:o,$a:[],ma:c,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:p},stream:t},o=new zs([o]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Vs(o),this.g.set(n,t)),n=vl(o),this.h++,t=ln(t,n),Promise.resolve(t)},ce("shaka.transmuxer.Ac3Transmuxer",Bi),Bi.prototype.transmux=Bi.prototype.transmux,Bi.prototype.getOriginalMimeType=Bi.prototype.getOriginalMimeType,Bi.prototype.convertCodecs=Bi.prototype.convertCodecs,Bi.prototype.isSupported=Bi.prototype.isSupported,Bi.prototype.destroy=Bi.prototype.destroy,To("audio/ac3",function(){return new Bi("audio/ac3")},Ko);function kw(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Po(e.subarray(t+2));ci(n,2),ci(n,3);var o=yt(n,11)+1<<1,a=yt(n,2);if(a==3){a=yt(n,2),a=[24e3,22060,16e3][a];var l=3}else a=[48e3,44100,32e3][a],l=yt(n,2);var u=yt(n,3),c=yt(n,1);return n=yt(n,5),t+o>e.byteLength?null:(e=Math.floor(o*a/(16*[1,2,3,6][l])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,a<<6|n<<1|0,0|u<<1|c<<0,0]),{sampleRate:a,channelCount:[2,1,2,3,3,4,4,5][u]+c,ma:e,ca:o})}function ji(e){this.i=e,this.h=0,this.g=new Map}s=ji.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?kt(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,o){e=Ze(e);for(var a=hs(e),l=a.length;l<e.length&&(e[l]<<8|e[l+1]<<0)!==2935;l++);var u=1e3*n.endTime;a=Lr(a),a.length&&n&&(a=a.find(function(v){return v.description==="com.apple.streaming.transportStreamTimestamp"}))&&(u=a.data),a=0;for(var c=new Uint8Array([]),p=[];l<e.length;){var m=kw(e,l);if(!m)return Promise.reject(new J(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=m.sampleRate,t.channelsCount=m.channelCount,a=m.sampleRate,c=m.ma,p.push({data:e.subarray(l,l+m.ca),size:m.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),l+=m.ca}return e=Math.floor(u*a/1e3),o={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:o,$a:[],ma:c,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:p},stream:t},o=new zs([o]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Vs(o),this.g.set(n,t)),n=vl(o),this.h++,t=ln(t,n),Promise.resolve(t)},ce("shaka.transmuxer.Ec3Transmuxer",ji),ji.prototype.transmux=ji.prototype.transmux,ji.prototype.getOriginalMimeType=ji.prototype.getOriginalMimeType,ji.prototype.convertCodecs=ji.prototype.convertCodecs,ji.prototype.isSupported=ji.prototype.isSupported,ji.prototype.destroy=ji.prototype.destroy,To("audio/ec3",function(){return new ji("audio/ec3")},Ko);function Q3(e){if(!e.length)return null;var t=e.find(function(M){return M.type==7});if(e=e.find(function(M){return M.type==8}),!t||!e)return null;var n=new Po(t.data),o=Rt(n);if(Rt(n),Rt(n),Jn(n),eI.includes(o)&&(o=ze(n),o===3&&ci(n,1),Jn(n),Jn(n),ci(n,1),Ke(n))){o=o!==3?8:12;for(var a=0;a<o;a++)Ke(n)&&(6>a?Pu(n,16):Pu(n,64))}if(Jn(n),o=ze(n),o===0)ze(n);else if(o===1)for(ci(n,1),Jn(n),Jn(n),o=ze(n),a=0;a<o;a++)Jn(n);Jn(n),ci(n,1);var l=ze(n),u=ze(n),c=yt(n,1);c===0&&ci(n,1),ci(n,1);var p=0,m=0,v=0,S=0;if(Ke(n)&&(p=ze(n),m=ze(n),v=ze(n),S=ze(n)),a=o=1,Ke(n)&&Ke(n)){var E=Rt(n),T=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],k=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<E&&16>=E?(o=T[E-1],a=k[E-1]):E===255&&(o=yt(n,16),a=yt(n,16))}return n=(2-c)*(u+1)*16-2*v-2*S,l=16*(l+1)-2*p-2*m,p=[],t=t.fullData,p.push(t.byteLength>>>8&255),p.push(t.byteLength&255),p=p.concat.apply(p,L(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,L(e)),e=new Uint8Array([1,p[3],p[4],p[5],255,225].concat(p,[1],t)),{height:n,width:l,wa:e,Ba:o,Ca:a}}function J3(e){var t=!1,n=[],o=e.find(function(p){return p.type==7}),a=!1;e=w(e);for(var l=e.next();!l.done;l=e.next()){l=l.value;var u=!1;switch(l.type){case 1:u=a=!0;var c=l.data;o&&4<c.length&&(c=VT(new Po(c)),c===2||c===4||c===7||c===9)&&(t=!0);break;case 5:t=u=a=!0;break;case 6:u=!0;break;case 7:u=!0;break;case 8:u=!0;break;case 9:a=u=!0;break;case 12:u=!0;break;default:u=!1}a&&u&&(u=l.fullData.byteLength,c=new Uint8Array(4),c[0]=u>>24&255,c[1]=u>>16&255,c[2]=u>>8&255,c[3]=u&255,n.push(c),n.push(l.fullData))}return n.length?{data:ln.apply(zn,L(n)),kd:t}:null}var eI=[100,110,122,244,44,83,86,118,128,138,139,134];function tI(e){if(!e.length)return null;var t=e.find(function(u){return u.type==32}),n=e.find(function(u){return u.type==33}),o=e.find(function(u){return u.type==34});if(!t||!n||!o)return null;var a=nI(t.fullData);e=iI(n.fullData);var l=oI(o.fullData);return t=rI(t.fullData,n.fullData,o.fullData,{yf:a.yf,Wf:a.Wf,df:e.df,ef:e.ef,Ye:e.Ye,cf:e.cf,Ze:e.Ze,$e:e.$e,af:e.af,bf:e.bf,Se:e.Se,Te:e.Te,Ue:e.Ue,Ve:e.Ve,We:e.We,Xe:e.Xe,Le:e.Le,$d:e.$d,Je:e.Je,He:e.He,Ge:e.Ge,Bf:l.Bf}),{height:e.height,width:e.width,wa:t,Ba:e.Ri,Ca:e.Qi}}function nI(e){var t=new Po(e,!0);return Rt(t),Rt(t),yt(t,4),yt(t,2),yt(t,6),e=yt(t,3),t=Ke(t),{yf:e+1,Wf:t}}function iI(e){e=new Po(e,!0),Rt(e),Rt(e);var t=0,n=0,o=0,a=0;yt(e,4);var l=yt(e,3);Ke(e);for(var u=yt(e,2),c=yt(e,1),p=yt(e,5),m=Rt(e),v=Rt(e),S=Rt(e),E=Rt(e),T=Rt(e),k=Rt(e),M=Rt(e),I=Rt(e),U=Rt(e),N=Rt(e),z=Rt(e),P=[],j=[],G=0;G<l;G++)P.push(Ke(e)),j.push(Ke(e));if(0<l)for(G=l;8>G;G++)yt(e,2);for(G=0;G<l;G++)P[G]&&yt(e,88),j[G]&&Rt(e);ze(e),P=ze(e),P==3&&yt(e,1),j=ze(e),G=ze(e),Ke(e)&&(t+=ze(e),n+=ze(e),o+=ze(e),a+=ze(e));var Z=ze(e),ee=ze(e),fe=ze(e);if(Ke(e))for(var te=0;te<=l;te++)ze(e),ze(e),ze(e);else ze(e),ze(e),ze(e);if(ze(e),ze(e),ze(e),ze(e),ze(e),ze(e),Ke(e)&&Ke(e))for(te=0;4>te;te++)for(var ne=0;ne<(te===3?2:6);ne++)if(Ke(e)){var ae=Math.min(64,1<<4+(te<<1));1<te&&ds(e);for(var xe=0;xe<ae;xe++)ds(e)}else ze(e);for(Ke(e),Ke(e),Ke(e)&&(Rt(e),ze(e),ze(e),Ke(e)),te=ze(e),ae=ne=0;ae<te;ae++)if(xe=!1,ae!==0&&(xe=Ke(e)),xe){ae===te&&ze(e),Ke(e),ze(e);for(var me=xe=0;me<=ne;me++){var we=Ke(e),Le=!1;we||(Le=Ke(e)),(we||Le)&&xe++}ne=xe}else{for(me=ze(e),xe=ze(e),ne=me+xe,we=0;we<me;we++)ze(e),Ke(e);for(me=0;me<xe;me++)ze(e),Ke(e)}if(Ke(e))for(te=ze(e),ne=0;ne<te;ne++){for(ae=0;ae<fe+4;ae++)yt(e,1);yt(e,1)}if(te=fe=1,ne=0,Ke(e),Ke(e),Ke(e)){if(Ke(e)&&(ae=Rt(e),xe=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],me=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<ae&&16>=ae?(fe=xe[ae-1],te=me[ae-1]):ae===255&&(fe=yt(e,16),te=yt(e,16))),Ke(e)&&Ke(e),Ke(e)&&(yt(e,3),Ke(e),Ke(e)&&(Rt(e),Rt(e),Rt(e))),Ke(e)&&(ze(e),ze(e)),Ke(e),Ke(e),Ke(e),(ae=Ke(e))&&(ze(e),ze(e),ze(e),ze(e)),Ke(e)&&(yt(e,32),yt(e,32),Ke(e)&&ze(e),Ke(e)))for(me=!1,ae=Ke(e),xe=Ke(e),(ae||xe)&&((me=Ke(e))&&(Rt(e),yt(e,5),Ke(e),yt(e,5)),yt(e,4),yt(e,4),me&&yt(e,4),yt(e,5),yt(e,5),yt(e,5)),we=0;we<=l;we++){var Se=!0;Le=1,Ke(e)||(Se=Ke(e));var Be=!1;if(Se?ze(e):Be=Ke(e),Be||(Le=ze(e)+1),ae){for(Se=0;Se<Le;Se++)ze(e),ze(e),me&&(ze(e),ze(e));Ke(e)}if(xe){for(Se=0;Se<Le;Se++)ze(e),ze(e),me&&(ze(e),ze(e));Ke(e)}}Ke(e)&&(Ke(e),Ke(e),Ke(e),ne=ze(e),ze(e),ze(e),ze(e),ze(e))}return{Ye:z,df:u,ef:c,cf:p,Ze:m,$e:v,af:S,bf:E,Se:T,Te:k,Ue:M,Ve:I,We:U,Xe:N,$d:ne,Le:0,Je:P,He:Z,Ge:ee,width:j-(t+n)*(P===1||P===2?2:1),height:G-(o+a)*(P===1?2:1),Ri:fe,Qi:te}}function oI(e){var t=new Po(e,!0);Rt(t),Rt(t),ze(t),ze(t),Ke(t),Ke(t),yt(t,3),Ke(t),Ke(t),ze(t),ze(t),ds(t),Ke(t),Ke(t),Ke(t)&&ze(t),ds(t),ds(t),Ke(t),Ke(t),Ke(t),Ke(t),e=Ke(t),t=Ke(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Bf:n}}function rI(e,t,n,o){var a=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return a[0]=1,a[1]=(o.df&3)<<6|(o.ef?1:0)<<5|o.cf&31,a[2]=o.Ze,a[3]=o.$e,a[4]=o.af,a[5]=o.bf,a[6]=o.Se,a[7]=o.Te,a[8]=o.Ue,a[9]=o.Ve,a[10]=o.We,a[11]=o.Xe,a[12]=o.Ye,a[13]=240|(o.$d&3840)>>8,a[14]=o.$d&255,a[15]=252|o.Bf&3,a[16]=252|o.Je&3,a[17]=248|o.He&7,a[18]=248|o.Ge&7,a[19]=0,a[20]=0,a[21]=(o.Le&3)<<6|(o.yf&7)<<3|(o.Wf?1:0)<<2|3,a[22]=3,a[23]=160,a[24]=0,a[25]=1,a[26]=(e.byteLength&65280)>>8,a[27]=(e.byteLength&255)>>0,a.set(e,28),a[23+(5+e.byteLength)]=161,a[e.byteLength+29]=0,a[e.byteLength+30]=1,a[e.byteLength+31]=(t.byteLength&65280)>>8,a[e.byteLength+32]=(t.byteLength&255)>>0,a.set(t,e.byteLength+33),a[23+(e.byteLength+10+t.byteLength)]=162,a[e.byteLength+10+t.byteLength+24]=0,a[e.byteLength+10+t.byteLength+25]=1,a[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,a[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,a.set(n,e.byteLength+10+t.byteLength+28),a}function hc(e,t){var n=e[t+1]>>3&3,o=e[t+1]>>1&3,a=e[t+2]>>4&15,l=e[t+2]>>2&3;if(n!==1&&a!==0&&a!==15&&l!==3){var u=e[t+3]>>6;a=1e3*sI[14*(n===3?3-o:o===3?3:4)+a-1],l=aI[3*(n===3?0:n===2?1:2)+l],n=lI[n][o];var c=uI[o],p=Math.floor(n*a/l+(e[t+2]>>1&1))*c,m=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(m=m?parseInt(m[1],10):0)&&87>=m&&o===2&&224e3<=a&&u===0&&(e[t+3]|=128),{sampleRate:l,channelCount:u===3?1:2,ca:p,Pi:8*n*c}}return null}function Iw(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function Mw(e,t){if(t+1<e.length&&Iw(e,t)){var n=hc(e,t),o=4;return n&&n.ca&&(o=n.ca),t+=o,t===e.length||t+1<e.length&&Iw(e,t)}return!1}var sI=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],aI=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],lI=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],uI=[0,1,1,4];function Fi(e){this.i=e,this.h=0,this.g=new Map}s=Fi.prototype,s.destroy=function(){this.g.clear()},s.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?kt(this.convertCodecs("audio",e)):!1},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},s.getOriginalMimeType=function(){return this.i},s.transmux=function(e,t,n,o){for(var a=Ze(e),l=hs(a).length;l<a.length&&!Mw(a,l);l++);var u;for(e=[];l<a.length;){var c=hc(a,l);if(!c)return Promise.reject(new J(2,3,3018,n?n.M()[0]:null));u||(u=c),l+c.ca<=a.length&&e.push({data:a.subarray(l,l+c.ca),size:c.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),l+=c.ca}return u?(a=9e4*u.Pi/u.sampleRate*this.h,o={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u.sampleRate,duration:o,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:a,Ya:e},stream:t},o=new zs([o]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Vs(o),this.g.set(n,t)),n=vl(o),this.h++,t=ln(t,n),Promise.resolve(t)):Promise.reject(new J(2,3,3018,n?n.M()[0]:null))},ce("shaka.transmuxer.Mp3Transmuxer",Fi),Fi.prototype.transmux=Fi.prototype.transmux,Fi.prototype.getOriginalMimeType=Fi.prototype.getOriginalMimeType,Fi.prototype.convertCodecs=Fi.prototype.convertCodecs,Fi.prototype.isSupported=Fi.prototype.isSupported,Fi.prototype.destroy=Fi.prototype.destroy,To("audio/mpeg",function(){return new Fi("audio/mpeg")},Ko);function $i(e){this.h=e,this.g=null}s=$i.prototype,s.destroy=function(){},s.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Ti(e).split(","),n=ai("audio",t);return t=ai("video",t),!n||t||Qn(n)!="mp3"?!1:kt(this.convertCodecs("audio",e))},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},s.getOriginalMimeType=function(){return this.h},s.transmux=function(e,t,n,o,a){if(this.g?this.g.clearData():this.g=new Gt,e=Ze(e),e=this.g.parse(e),e.$c().audio!="mp3"||a!="audio")return Promise.reject(new J(2,3,3018,n?n.M()[0]:null));for(n=new Uint8Array([]),a=w(e.Tb()),e=a.next();!e.done;e=a.next())if(e=e.value.data)for(t=0;t<e.length;)(o=hc(e,t))?(t+o.ca<=e.length&&(n=ln(n,e.subarray(t,t+o.ca))),t+=o.ca):t++;return Promise.resolve(n)},ce("shaka.transmuxer.MpegTsTransmuxer",$i),$i.prototype.transmux=$i.prototype.transmux,$i.prototype.getOriginalMimeType=$i.prototype.getOriginalMimeType,$i.prototype.convertCodecs=$i.prototype.convertCodecs,$i.prototype.isSupported=$i.prototype.isSupported,$i.prototype.destroy=$i.prototype.destroy,To("video/mp2t",function(){return new $i("video/mp2t")},xh);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function Ri(e){this.h=e,(this.g=Cp.get("ISOBoxer")())&&fI(this)}function fI(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(o){this._procEntryField(o,"BytesOfClearData","uint",16),this._procEntryField(o,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,o=0;16>o;o++)this.usertype[o]!==cI[o]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}s=Ri.prototype,s.destroy=function(){},s.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?kt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),kt(t)||kt(e))},s.convertCodecs=function(e,t){return t.replace("mss/","")},s.getOriginalMimeType=function(){return this.h},s.transmux=function(e,t,n){if(!n)return Promise.resolve(Ze(e));if(!t.mssPrivateData)return Promise.reject(new J(2,3,3020,n?n.M()[0]:null));try{var o,a=this.g.parseBuffer(e),l=a.fetch("tfhd");l.track_ID=t.id+1;var u=a.fetch("tfdt"),c=a.fetch("traf");u===null&&(u=this.g.createFullBox("tfdt",c,l),u.version=1,u.flags=0,u.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var p=a.fetch("trun"),m=a.fetch("tfxd");m&&m._parent.boxes.splice(m._parent.boxes.indexOf(m),1);var v=a.fetch("tfrf");v&&v._parent.boxes.splice(v._parent.boxes.indexOf(v),1);var S=a.fetch("sepiff");if(S!==null){S.type="senc",S.usertype=void 0;var E=a.fetch("saio");if(E===null){E=this.g.createFullBox("saio",c),E.version=0,E.flags=0,E.entry_count=1,E.offset=[0];var T=this.g.createFullBox("saiz",c);if(T.version=0,T.flags=0,T.sample_count=S.sample_count,T.default_sample_info_size=0,T.sample_info_size=[],S.flags&2)for(o=0;o<S.sample_count;o+=1)T.sample_info_size[o]=10+6*S.entry[o].NumberOfEntries;else T.default_sample_info_size=8}}l.flags&=16777214,l.flags|=131072,p.flags|=1;var k=a.fetch("moof");p.data_offset=k.getLength()+8;var M=a.fetch("saio");M!==null&&(M.offset[0]=Rw(k,"traf")+Rw(c,"senc")+16);var I=Ze(a.write());return Promise.resolve(I)}catch(U){return U instanceof J?Promise.reject(U):Promise.reject(new J(2,3,3022,n?n.M()[0]:null))}};function Rw(e,t){for(var n=8,o=0;o<e.boxes.length&&e.boxes[o].type!==t;o++)n+=e.boxes[o].size;return n}ce("shaka.transmuxer.MssTransmuxer",Ri),Ri.prototype.transmux=Ri.prototype.transmux,Ri.prototype.getOriginalMimeType=Ri.prototype.getOriginalMimeType,Ri.prototype.convertCodecs=Ri.prototype.convertCodecs,Ri.prototype.isSupported=Ri.prototype.isSupported,Ri.prototype.destroy=Ri.prototype.destroy;var cI=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);To("mss/audio/mp4",function(){return new Ri("mss/audio/mp4")},Ko),To("mss/video/mp4",function(){return new Ri("mss/video/mp4")},Ko);function zi(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}s=zi.prototype,s.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},s.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var o=Ti(n).split(",");return n=ai("audio",o),o=ai("video",o),n&&(n=Qn(n),!hI.includes(n))||o&&(n=Qn(o),!dI.includes(n))?!1:t?kt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),kt(t)||kt(e))},s.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Ti(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return ns(n,"audio/mp4")}).map(Ma).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},s.getOriginalMimeType=function(){return this.l},s.transmux=function(e,t,n,o,a){var l=Ze(e);if(a=="audio"&&!ja(l)){for(var u=hs(l),c=u.length;c<l.length;c++)if(Mw(l,c))return Promise.reject(new J(2,3,3018,n?n.M()[0]:null));for(c=u.length;c<l.length;c++)if(Aw(l,c))return this.h||(this.h=new Mi("audio/aac")),this.h.transmux(e,t,n,o,a);return Promise.reject(new J(2,3,3018,n?n.M()[0]:null))}this.j?this.j.clearData():this.j=new Gt;var p=this.j.parse(l),m=[],v=p.$c();try{var S=null;if(a=="video"){switch(v.video){case"avc":var E=[],T=null,k=[],M=p.Fc();if(!M.length)throw new J(2,3,3023,n?n.M()[0]:null);for(var I=0;I<M.length;I++){var U=M[I],N=U.nalus;k.push.apply(k,L(N));var z=J3(N);if(z){T==null&&(T=U.dts);var P=void 0;P=I+1<M.length?(M[I+1].dts||0)-(U.dts||0):1<M.length?(U.dts||0)-(M[I-1].dts||0):9e4*(n.endTime-n.startTime),E.push({data:z.data,size:z.data.byteLength,duration:P,cb:Math.round((U.pts||0)-(U.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:z.kd?2:1,hb:z.kd?0:1}})}}var j=Q3(k);if(!j||T==null)throw new J(2,3,3018,n?n.M()[0]:null);t.height=j.height,t.width=j.width,S={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:o,$a:[],ma:new Uint8Array([]),wa:j.wa,Ba:j.Ba,Ca:j.Ca,data:{rb:this.g,baseMediaDecodeTime:T,Ya:E},stream:t};break;case"hvc":var G=[],Z=null,ee=[],fe=p.Fc();if(!fe.length)throw new J(2,3,3023,n?n.M()[0]:null);for(var te=0;te<fe.length;te++){var ne=fe[te],ae=ne.nalus;ee.push.apply(ee,L(ae));for(var xe=!1,me=[],we=!1,Le=w(ae),Se=Le.next();!Se.done;Se=Le.next()){var Be=Se.value;switch(Be.type){case 1:case 0:var st=we=!0;break;case 19:case 20:case 21:xe=st=we=!0;break;case 32:st=!0;break;case 33:st=!0;break;case 34:st=!0;break;case 35:we=st=!0;break;case 39:case 40:st=!0;break;default:st=!1}if(we&&st){var St=Be.fullData.byteLength,Qt=new Uint8Array(4);Qt[0]=St>>24&255,Qt[1]=St>>16&255,Qt[2]=St>>8&255,Qt[3]=St&255,me.push(Qt),me.push(Be.fullData)}}var Mt=me.length?{data:ln.apply(zn,L(me)),kd:xe}:null;if(Mt){Z==null&&ne.dts!=null&&(Z=ne.dts);var on=void 0;on=te+1<fe.length?(fe[te+1].dts||0)-(ne.dts||0):1<fe.length?(ne.dts||0)-(fe[te-1].dts||0):9e4*(n.endTime-n.startTime),G.push({data:Mt.data,size:Mt.data.byteLength,duration:on,cb:Math.round((ne.pts||0)-(ne.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:Mt.kd?2:1,hb:Mt.kd?0:1}})}}var yn=tI(ee);if(!yn||Z==null)throw new J(2,3,3018,n?n.M()[0]:null);t.height=yn.height,t.width=yn.width,S={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:o,$a:[],ma:new Uint8Array([]),wa:yn.wa,Ba:yn.Ba,Ca:yn.Ca,data:{rb:this.g,baseMediaDecodeTime:Z,Ya:G},stream:t}}S&&(m.push(S),S=null)}if(a=="audio"){switch(v.audio){case"aac":for(var Jt=[],Pt,fn=null,En=w(p.Tb()),An=En.next();!An.done;An=En.next()){var vi=An.value,xi=vi.data;if(xi){var Qi=0;if(Pt=Ew(xi,Qi),!Pt)throw new J(2,3,3018,n?n.M()[0]:null);for(t.audioSamplingRate=Pt.sampleRate,t.channelsCount=Pt.channelCount,fn==null&&vi.pts!==null&&(fn=vi.pts);Qi<xi.length;){var Ho=Tw(xi,Qi);if(Ho){var lr=Ho.Qd+Ho.ca;Qi+lr<=xi.length&&Jt.push({data:xi.subarray(Qi+Ho.Qd,Qi+lr),size:Ho.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Qi+=lr}else Qi++}}}if(!Pt||fn==null){if(!p.Fc().length)throw new J(2,3,3018,n?n.M()[0]:null);fn=9e4*n.startTime;var Ws=ai("audio",t.codecs.split(","));if(!Ws||!t.channelsCount||!t.audioSamplingRate)throw new J(2,3,3018,n?n.M()[0]:null);Pt={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:Ws};var Go=K3(Ws,t.channelsCount);if(!Go)throw new J(2,3,3018,n?n.M()[0]:null);for(var pc=fn+9e4*(n.endTime-n.startTime),Rl=fn;Rl<pc;)Jt.push({data:Go,size:Go.byteLength,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Rl+=1024/Pt.sampleRate*9e4}var _l=Pt.sampleRate,lo=fn/9e4*_l;S={id:t.id,type:"audio",codecs:Pt.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:_l,duration:o,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:lo,Ya:Jt},stream:t};break;case"ac3":for(var zw=[],gc=0,x0=new Uint8Array([]),mc=null,Vw=w(p.Tb()),w0=Vw.next();!w0.done;w0=Vw.next()){var S0=w0.value,C0=S0.data;mc==null&&S0.pts!==null&&(mc=S0.pts);for(var Ys=0;Ys<C0.length;){var ur=bw(C0,Ys);ur?(t.audioSamplingRate=ur.sampleRate,t.channelsCount=ur.channelCount,gc=ur.sampleRate,x0=ur.ma,zw.push({data:C0.subarray(Ys,Ys+ur.ca),size:ur.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Ys+=ur.ca):Ys++}}if(gc==0||x0.byteLength==0||mc==null)throw new J(2,3,3018,n?n.M()[0]:null);var vI=mc/9e4*gc;S={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:gc,duration:o,$a:[],ma:x0,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:vI,Ya:zw},stream:t};break;case"ec3":for(var Hw=[],yc=0,T0=new Uint8Array([]),vc=null,Gw=w(p.Tb()),E0=Gw.next();!E0.done;E0=Gw.next()){var A0=E0.value,b0=A0.data;vc==null&&A0.pts!==null&&(vc=A0.pts);for(var qs=0;qs<b0.length;){var fr=kw(b0,qs);fr?(t.audioSamplingRate=fr.sampleRate,t.channelsCount=fr.channelCount,yc=fr.sampleRate,T0=fr.ma,Hw.push({data:b0.subarray(qs,qs+fr.ca),size:fr.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),qs+=fr.ca):qs++}}if(yc==0||T0.byteLength==0||vc==null)throw new J(2,3,3018,n?n.M()[0]:null);var xI=vc/9e4*yc;S={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:yc,duration:o,$a:[],ma:T0,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:xI,Ya:Hw},stream:t};break;case"mp3":for(var Xw=[],xc,wc=null,Ww=w(p.Tb()),k0=Ww.next();!k0.done;k0=Ww.next()){var I0=k0.value,Ll=I0.data;if(Ll){wc==null&&I0.pts!==null&&(wc=I0.pts);for(var Vr=0;Vr<Ll.length;){var Ks=hc(Ll,Vr);Ks?(xc||(xc=Ks),Vr+Ks.ca<=Ll.length&&Xw.push({data:Ll.subarray(Vr,Vr+Ks.ca),size:Ks.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Vr+=Ks.ca):Vr++}}}if(!xc||wc==null)throw new J(2,3,3018,n?n.M()[0]:null);var Yw=xc.sampleRate,wI=wc/9e4*Yw;S={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Yw,duration:o,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:wI,Ya:Xw},stream:t};break;case"opus":var qw=[],Sc=null,wo=p.F;if(!wo)throw new J(2,3,3018,n?n.M()[0]:null);var Yn=[];switch(wo.Ch){case 1:case 2:Yn=[0];break;case 0:Yn=[255,1,1,0,1];break;case 128:Yn=[255,2,0,0,1];break;case 3:Yn=[1,2,1,0,2,1];break;case 4:Yn=[1,2,2,0,1,2,3];break;case 5:Yn=[1,3,2,0,4,1,2,3];break;case 6:Yn=[1,4,2,0,4,1,2,3,5];break;case 7:Yn=[1,4,2,0,4,1,2,3,5,6];break;case 8:Yn=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Yn=[1,1,2,0,1];break;case 131:Yn=[1,1,3,0,1,2];break;case 132:Yn=[1,1,4,0,1,2,3];break;case 133:Yn=[1,1,5,0,1,2,3,4];break;case 134:Yn=[1,1,6,0,1,2,3,4,5];break;case 135:Yn=[1,1,7,0,1,2,3,4,5,6];break;case 136:Yn=[1,1,8,0,1,2,3,4,5,6,7]}for(var Kw=new Uint8Array([0,wo.channelCount,0,0,wo.sampleRate>>>24&255,wo.sampleRate>>>17&255,wo.sampleRate>>>8&255,wo.sampleRate>>>0&255,0,0].concat(L(Yn))),Zw=wo.sampleRate,Qw=w(p.Tb()),M0=Qw.next();!M0.done;M0=Qw.next()){var R0=M0.value,Zs=R0.data;Sc==null&&R0.pts!==null&&(Sc=R0.pts);for(var Pl=0;Pl<Zs.length;){for(var SI=(Zs[Pl+1]&16)!==0,CI=(Zs[Pl+1]&8)!==0,Xo=Pl+2,Cc=0;Zs[Xo]===255;)Cc+=255,Xo+=1;Cc+=Zs[Xo],Xo+=1,Xo+=SI?2:0,Xo+=CI?2:0;var Jw=Zs.slice(Xo,Xo+Cc);qw.push({data:Jw,size:Jw.byteLength,duration:960,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Pl=Xo+Cc}}if(Kw.byteLength==0||Sc==null)throw new J(2,3,3018,n?n.M()[0]:null);t.audioSamplingRate=wo.sampleRate,t.channelsCount=wo.channelCount;var TI=Sc/9e4*Zw;S={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Zw,duration:o,$a:[],ma:Kw,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:TI,Ya:qw},stream:t}}S&&(m.push(S),S=null)}}catch(P0){return P0&&P0.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(P0)}if(!m.length)return Promise.reject(new J(2,3,3018,n?n.M()[0]:null));var eS=new zs(m),_0=t.id+"_"+n.i;if(this.i.has(_0))var L0=this.i.get(_0);else L0=Vs(eS),this.i.set(_0,L0);var EI=vl(eS);this.g++;var AI=ln(L0,EI);return Promise.resolve(AI)},ce("shaka.transmuxer.TsTransmuxer",zi),zi.prototype.transmux=zi.prototype.transmux,zi.prototype.getOriginalMimeType=zi.prototype.getOriginalMimeType,zi.prototype.convertCodecs=zi.prototype.convertCodecs,zi.prototype.isSupported=zi.prototype.isSupported,zi.prototype.destroy=zi.prototype.destroy;var hI=["aac","ac-3","ec-3","mp3","opus"],dI=["avc","hevc"];To("video/mp2t",function(){return new zi("video/mp2t")},wh);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function _w(){}var Il;function Lw(){Il||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Il=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=pI,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function pI(e,t){var n=this,o;return F(function(a){return a.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),A(a,Il.call(n,e,t),2)):(o=a.h,Fw(o)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Il,a.return(o)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Pw,a.return(Pw.call(n,e,t))))})}function Pw(e,t){var n=this,o,a,l,u,c,p,m,v,S,E,T,k;return F(function(M){if(M.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),o=jw(e),a=[],l=w(t),u=l.next();!u.done;u=l.next())c=u.value,p=Dw(c.videoCapabilities,o),m=Dw(c.audioCapabilities,o),c.videoCapabilities&&c.videoCapabilities.length&&!p.length||c.audioCapabilities&&c.audioCapabilities.length&&!m.length||(v=Object.assign({},c),v.videoCapabilities=p,v.audioCapabilities=m,a.push(v));if(!a.length)throw S=Error("Unsupported keySystem or supportedConfigurations."),S.name="NotSupportedError",S.code=DOMException.NOT_SUPPORTED_ERR,S;return A(M,Il.call(n,e,a),2)}return E=M.h,k=T=null,a[0]&&(a[0].videoCapabilities&&(T=a[0].videoCapabilities[0].encryptionScheme),a[0].audioCapabilities&&(k=a[0].audioCapabilities[0].encryptionScheme)),M.return(new dc(E,T,k))})}function Dw(e,t){return e&&e.filter(function(n){return y0(n.encryptionScheme,t)})}ce("EmeEncryptionSchemePolyfill",_w),_w.install=Lw;function Nw(){}var Ml;function Ow(){Ml||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Ml=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=gI,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function gI(e){var t=this,n,o;return F(function(a){switch(a.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),A(a,Ml.call(t,e),2);case 2:if(n=a.h,!e.keySystemConfiguration)return a.return(n);if((o=n.keySystemAccess)&&Fw(o))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Ml,a.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Uw,o){a.u(3);break}return A(a,Bw(e),4);case 4:return n.keySystemAccess=a.h,a.return(n);case 3:return a.return(Uw.call(t,e))}})}function Uw(e){var t=this,n,o,a,l,u,c,p;return F(function(m){switch(m.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),o=n=null,!e.keySystemConfiguration||(a=e.keySystemConfiguration,l=a.keySystem,o=a.audio&&a.audio.encryptionScheme,n=a.video&&a.video.encryptionScheme,u=jw(l),c={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},y0(o,u)&&y0(n,u))?A(m,Ml.call(t,e),2):m.return(c);case 2:if(p=m.h,p.keySystemAccess){p.keySystemAccess=new dc(p.keySystemAccess,n,o),m.u(3);break}if(!e.keySystemConfiguration){m.u(3);break}return A(m,Bw(e),5);case 5:p.keySystemAccess=m.h;case 3:return m.return(p)}})}function Bw(e){var t,n;return F(function(o){if(o.g==1){var a=e.keySystemConfiguration,l=[],u=[];return a.audio&&l.push({robustness:a.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:a.audio.encryptionScheme}),a.video&&u.push({robustness:a.video.robustness||"",contentType:e.video.contentType,encryptionScheme:a.video.encryptionScheme}),a={initDataTypes:a.initDataType?[a.initDataType]:[],distinctiveIdentifier:a.distinctiveIdentifier,persistentState:a.persistentState,sessionTypes:a.sessionTypes},l.length&&(a.audioCapabilities=l),u.length&&(a.videoCapabilities=u),t=a,A(o,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=o.h,o.return(n)})}ce("McEncryptionSchemePolyfill",Nw),Nw.install=Ow;function dc(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}dc.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=w(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=w(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},dc.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function jw(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Fw(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function y0(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(yI||mI))}function v0(){}function $w(){Lw(),Ow()}ce("EncryptionSchemePolyfills",v0),v0.install=$w;var mI=navigator.userAgent.includes("CrKey"),yI=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);typeof x<"u"&&x.exports&&(x.exports=v0)}).call(i,r,r,void 0);for(var f in i.shaka)h[f]=i.shaka[f]})()})(EC);const RS=n5(EC);let Xr,Fn;const Eg={playingState:!1},i5=async h=>{RS.polyfill.installAll(),Fn=h,Fn||(Fn=document.createElement("video"),Fn.style.cssText="position: absolute; top: 0; left: 0; z-index: -1",Fn.width=window.innerWidth,Fn.height=window.innerHeight,Xr=new RS.Player,await Xr.attach(Fn),Fn.autoplay=!1,Xr.addEventListener("error",r=>{console.error(r)}),document.body.insertBefore(Fn,document.body.firstChild))},o5=async h=>{if(!Xr||!Fn)throw"Player not initialized yet";await Xr.load(h.streamUrl)},r5=()=>{Fn.play().then(()=>{Eg.playingState=!0})},s5=()=>{Fn.pause(),Eg.playingState=!1},a5=async()=>{await Xr.destroy(),Xr=null,Fn.remove(),Fn=null},l5=()=>Fn.currentTime,u5=()=>Fn.duration,f5=()=>{let h=r=>new Date(r*1e3).toISOString().substr(14,5);return`${h(Fn.currentTime)} : ${h(Math.floor(Fn.duration))}`},hr={init:i5,load:o5,play:r5,pause:s5,getCurrentTime:l5,getVideoDuration:u5,getTimeFormat:f5,state:Eg,destroy:a5},c5=at.Component("Player",{code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R),r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.y=1080,b.mount="{y:1}",b.w=1920,b.h=150,b.color={top:"0x00000000",bottom:"0x444444ff"},b.alpha={transition:i.controlsVisibility},s[1].populate(b),r=s[1];const _={};s[2]=this.element({parent:r||"root"},i),_.x=60,_.y=50,s[2].populate(_),r=s[2];const D={};s[3]=this.element({parent:r||"root"},i),D.w=60,D.h=60,D.color="0x0087ceeb",D.effects=[i.shader("radius",{radius:16})],s[3].populate(D),r=s[3];const w={};s[4]=this.element({parent:r||"root"},i),w.y=14,w.x=14,w.w=32,w.h=32,w.src=i.playing?"assets/player/pause.png":"assets/player/play.png",s[4].populate(w),r=s[2];const L={};s[5]=this.element({parent:r||"root"},i),L.y=22,L.x=100,L.w=i.progressLength,L.h=16,L.color="0xffffff80",L.effects=[i.shader("radius",{radius:8})],s[5].populate(L),r=s[5];const $={};s[6]=this.element({parent:r||"root"},i),$.h=16,$.w={transition:{value:i.progress,d:100,f:"ease-in-out"}},$.effects=[i.shader("radius",{radius:8})],$.color="0x0087ceeb",s[6].populate($);const B=f.components&&f.components.Circle||d.Circle;r=s[5];const V={};s[7]=this.element({parent:r||"root"},i),V.size=28,V.color="0xffffffff",V.y=-6,V.x={transition:{value:i.progress-8,d:100,f:"ease-in-out"}};const W=[];if(typeof B<"u")for(let A in B.config.props)delete V[B.config.props[A]],W.push(B.config.props[A]);s[7].populate(V),r=s[7];const X={};X.size=28,X.color="0xffffffff",X.y=-6,C={transition:{value:i.progress-8,d:100,f:"ease-in-out"}},Array.isArray(C)===!0&&(C=x(C).slice(0)),X.x=C,g=X.is||"Circle";let ie;if(typeof g=="string"){if(ie=f.components&&f.components[g]||d[g],!ie)throw new Error('Component "Circle" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(ie=g);s[8]=ie.call(null,{props:X},s[7],i),s[8][Symbol.for("slots")][0]?(r=s[8][Symbol.for("slots")][0],i=s[8]):r=s[8][Symbol.for("children")][0],r=s[2];const K={};s[9]=this.element({parent:r||"root"},i),K.x=1660,K.y=16,s[9].populate(K),r=s[9];const pe={};s[10]=this.element({parent:r||"root"},i),pe.content=i.currentTime,pe.size=25,pe.__textnode=!0,s[10].populate(pe),r=s[9];const ue={};s[11]=this.element({parent:r||"root"},i),ue.x=70,ue.size=25,ue.content="/",ue.__textnode=!0,s[11].populate(ue),r=s[9];const q={};return s[12]=this.element({parent:r||"root"},i),q.x=85,q.size=25,q.content=i.duration,q.__textnode=!0,s[12].populate(q),s},effects:[function(r,i,f,d,y,x){i[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(r,i,f,d,y,x){i[1].set("alpha",{transition:r.controlsVisibility})},function(r,i,f,d,y,x){i[3].set("effects",[r.shader("radius",{radius:16})])},function(r,i,f,d,y,x){i[4].set("src",r.playing?"assets/player/pause.png":"assets/player/play.png")},function(r,i,f,d,y,x){i[5].set("effects",[r.shader("radius",{radius:8})])},function(r,i,f,d,y,x){i[6].set("w",{transition:{value:r.progress,d:100,f:"ease-in-out"}})},function(r,i,f,d,y,x){i[6].set("effects",[r.shader("radius",{radius:8})])},function(r,i,f,d,y,x){(typeof skip7>"u"||skip7.indexOf("x")===-1)&&i[7].set("x",{transition:{value:r.progress-8,d:100,f:"ease-in-out"}})},function(r,i,f,d,y,x){i[8][Symbol.for("props")].x={transition:{value:r.progress-8,d:100,f:"ease-in-out"}}},function(r,i,f,d,y,x){i[10].set("content",r.currentTime)},function(r,i,f,d,y,x){i[12].set("content",r.duration)}],context:{}},state(){return{controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}},hooks:{focus(){this.$emit("clearBackground")},unfocus(){this.$emit("changeBackground")},async init(){await hr.init()},async ready(){await hr.load({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});const h=i=>new Date(i*1e3).toISOString().substr(14,5),r=hr.getVideoDuration();r&&(this.duration=h(r),this.progressChunkSize=Math.round(this.progressLength/r*100)/100),this.$setInterval(()=>{const i=hr.getCurrentTime();this.currentTime=h(i),this.progress=Math.round(i*this.progressChunkSize)},1e3),this.play()},async destroy(){await hr.destroy()}},input:{space(){this.play()},up(){this.showControls(1)},down(){this.showControls(0)}},methods:{play(){this.showControls(1),this.hideTimeout=this.$setTimeout(()=>this.showControls(0),3e3),hr.state.playingState==!0?(hr.pause(),this.playing=!1):(console.log("play!"),hr.play(),this.playing=!0)},showControls(h){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=h}}}),h5=at.Component("Colors",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=1920,g.h=1080,g.color={transition:i.bg},s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.x=20,C.y=20,s[1].populate(C),r=s[1];const R={};s[2]=this.element({parent:r||"root"},i),R.w=100,R.h=100,R.x=0,R.color="0xecfeffff",s[2].populate(R),r=s[1];const b={};s[3]=this.element({parent:r||"root"},i),b.w=100,b.h=100,b.x=120,b.color="0xa5f3fcff",s[3].populate(b),r=s[1];const _={};s[4]=this.element({parent:r||"root"},i),_.w=100,_.h=100,_.x=240,_.color="0x22d3eeff",s[4].populate(_),r=s[1];const D={};s[5]=this.element({parent:r||"root"},i),D.w=100,D.h=100,D.x=360,D.color="0x0891b2ff",s[5].populate(D),r=s[0];const w={};s[6]=this.element({parent:r||"root"},i),w.x=20,w.y=140,s[6].populate(w),r=s[6];const L={};s[7]=this.element({parent:r||"root"},i),L.w=100,L.h=100,L.x=0,L.color="0xecfeffff",s[7].populate(L),r=s[6];const $={};s[8]=this.element({parent:r||"root"},i),$.w=100,$.h=100,$.x=120,$.color="0xa5f3fcff",s[8].populate($),r=s[6];const B={};s[9]=this.element({parent:r||"root"},i),B.w=100,B.h=100,B.x=240,B.color="0x22d3eeff",s[9].populate(B),r=s[6];const V={};s[10]=this.element({parent:r||"root"},i),V.w=100,V.h=100,V.x=360,V.color="0x0891b2ff",s[10].populate(V),r=s[0];const W={};s[11]=this.element({parent:r||"root"},i),W.x=20,W.y=260,s[11].populate(W),r=s[11];const X={};s[12]=this.element({parent:r||"root"},i),X.w=100,X.h=100,X.x=0,X.color="0xecfeffaa",s[12].populate(X),r=s[11];const ie={};s[13]=this.element({parent:r||"root"},i),ie.w=100,ie.h=100,ie.x=120,ie.color="0xa5f3fc33",s[13].populate(ie),r=s[11];const K={};s[14]=this.element({parent:r||"root"},i),K.w=100,K.h=100,K.x=240,K.color="0x22d3ee20",s[14].populate(K),r=s[11];const pe={};s[15]=this.element({parent:r||"root"},i),pe.w=100,pe.h=100,pe.x=360,pe.color="0x0891b2ff",s[15].populate(pe),r=s[0];const ue={};s[16]=this.element({parent:r||"root"},i),ue.x=20,ue.y=380,s[16].populate(ue),r=s[16];const q={};s[17]=this.element({parent:r||"root"},i),q.w=100,q.h=100,q.x=0,q.color="0xecfeffff",s[17].populate(q),r=s[16];const A={};s[18]=this.element({parent:r||"root"},i),A.w=100,A.h=100,A.x=120,A.color="0xa5f3fcff",s[18].populate(A),r=s[16];const Y={};s[19]=this.element({parent:r||"root"},i),Y.w=100,Y.h=100,Y.x=240,Y.color="0x22d3eeff",s[19].populate(Y),r=s[16];const le={};s[20]=this.element({parent:r||"root"},i),le.w=100,le.h=100,le.x=360,le.color="0x0891b2ff",s[20].populate(le),r=s[0];const ge={};s[21]=this.element({parent:r||"root"},i),ge.x=20,ge.y=500,s[21].populate(ge),r=s[21];const de={};s[22]=this.element({parent:r||"root"},i),de.w=100,de.h=100,de.x=0,de.color="0xecfeffab",s[22].populate(de),r=s[21];const se={};s[23]=this.element({parent:r||"root"},i),se.w=100,se.h=100,se.x=120,se.color="0xa5f3fc33",s[23].populate(se),r=s[21];const re={};s[24]=this.element({parent:r||"root"},i),re.w=100,re.h=100,re.x=240,re.color="0x22d3ee21",s[24].populate(re),r=s[21];const oe={};s[25]=this.element({parent:r||"root"},i),oe.w=100,oe.h=100,oe.x=360,oe.color="0x0891b2ff",s[25].populate(oe),r=s[0];const Re={};s[26]=this.element({parent:r||"root"},i),Re.x=20,Re.y=620,s[26].populate(Re),r=s[26];const Ae={};s[27]=this.element({parent:r||"root"},i),Ae.w=100,Ae.h=100,Ae.x=0,Ae.color="0x000000ff",s[27].populate(Ae),r=s[26];const Ie={};s[28]=this.element({parent:r||"root"},i),Ie.w=100,Ie.h=100,Ie.x=120,Ie.color="0xccccccff",s[28].populate(Ie),r=s[26];const _e={};s[29]=this.element({parent:r||"root"},i),_e.w=100,_e.h=100,_e.x=240,_e.color="0x889900ff",s[29].populate(_e),r=s[26];const Te={};s[30]=this.element({parent:r||"root"},i),Te.w=100,Te.h=100,Te.x=360,Te.color="0x00ff00ff",s[30].populate(Te),r=s[0];const je={};s[31]=this.element({parent:r||"root"},i),je.x=20,je.y=740,s[31].populate(je),r=s[31];const F={};s[32]=this.element({parent:r||"root"},i),F.w=100,F.h=100,F.x=0,F.color="0x000000ff",s[32].populate(F),r=s[31];const Ue={};s[33]=this.element({parent:r||"root"},i),Ue.w=100,Ue.h=100,Ue.x=120,Ue.color="0xccccccff",s[33].populate(Ue),r=s[31];const He={};s[34]=this.element({parent:r||"root"},i),He.w=100,He.h=100,He.x=240,He.color="0x889900ff",s[34].populate(He),r=s[31];const Ge={};s[35]=this.element({parent:r||"root"},i),Ge.w=100,Ge.h=100,Ge.x=360,Ge.color="0x00ff00ff",s[35].populate(Ge),r=s[0];const Ce={};s[36]=this.element({parent:r||"root"},i),Ce.x=620,Ce.y=20,s[36].populate(Ce),r=s[36];const H={};s[37]=this.element({parent:r||"root"},i),H.w=300,H.h=200,H.x=0,H.color={transition:i.color1},s[37].populate(H),r=s[36];const Ee={};s[38]=this.element({parent:r||"root"},i),Ee.w=300,Ee.h=200,Ee.x=0,Ee.y=250,Ee.color={transition:i.color2},s[38].populate(Ee),r=s[36];const ke={};s[39]=this.element({parent:r||"root"},i),ke.w=300,ke.h=200,ke.x=100,ke.y=400,ke.color={transition:i.color3},s[39].populate(ke),r=s[36];const ce={};return s[40]=this.element({parent:r||"root"},i),ce.w=300,ce.h=200,ce.x=0,ce.y=650,ce.color={transition:{value:i.color4,d:1e3,f:"ease-in-out"}},s[40].populate(ce),s},effects:[function(r,i,f,d,y,x){i[0].set("color",{transition:r.bg})},function(r,i,f,d,y,x){i[37].set("color",{transition:r.color1})},function(r,i,f,d,y,x){i[38].set("color",{transition:r.color2})},function(r,i,f,d,y,x){i[39].set("color",{transition:r.color3})},function(r,i,f,d,y,x){i[40].set("color",{transition:{value:r.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter(){this.color1=this.color1==="#0891b2"?"#22d3ee":"#0891b2",this.color2=this.color2==="#dc2626"?"#0f0":"#dc2626",this.color3=this.color3==="rgba(251, 191, 36)"?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4=this.color4==="#1e3a8a"?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let h=0;const r=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{h=h+1,h===r.length-1&&(h=0),this.bg=r[h]},2e3)}}}),d5=at.Component("Gradients",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=1920/4,C.h=1080,C.color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",s[1].populate(C),r=s[0];const R={};s[2]=this.element({parent:r||"root"},i),R.w=1920/4,R.h=1080,R.x=1920/4,R.color="{left: '0xdc2626ff',  right: '0xf87171ff'}",s[2].populate(R),r=s[0];const b={};s[3]=this.element({parent:r||"root"},i),b.w=1920/4,b.h=1080,b.x=1920/4*2,b.color="{top: '0x0891b2ff', right: '0xf87171ff'}",s[3].populate(b),r=s[0];const _={};return s[4]=this.element({parent:r||"root"},i),_.w=1920/4,_.h=1080,_.x=1920/4*3,_.color="{right: '0x008000ff', bottom: '0xffd700ff'}",s[4].populate(_),s},effects:[function(r,i,f,d,y,x){i[1].set("w",1920/4)},function(r,i,f,d,y,x){i[2].set("w",1920/4)},function(r,i,f,d,y,x){i[2].set("x",1920/4)},function(r,i,f,d,y,x){i[3].set("w",1920/4)},function(r,i,f,d,y,x){i[3].set("x",1920/4*2)},function(r,i,f,d,y,x){i[4].set("w",1920/4)},function(r,i,f,d,y,x){i[4].set("x",1920/4*3)}],context:{}}}),p5=at.Component("Transitions",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.x=60,s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=200,C.h=200,C.x=50,C.y={transition:i.y},C.color="0xc4b5fdff",s[1].populate(C),r=s[0];const R={};s[2]=this.element({parent:r||"root"},i),R.w=200,R.h=200,R.x=300,R.y={transition:{value:i.y}},R.color="0xa78bfaff",s[2].populate(R),r=s[0];const b={};s[3]=this.element({parent:r||"root"},i),b.w=200,b.h=200,b.x=550,b.y={transition:{value:i.y,duration:1e3,start:i.start,end:i.doneTransition3}},b.color="0x8b5cf6ff",b.ref="bla",s[3].populate(b),r=s[0];const _={};s[4]=this.element({parent:r||"root"},i),_.w=200,_.h=200,_.x=800,_.y={transition:{value:i.y,duration:500,delay:500,start:i.start,end:i.finished}},_.color="0x7c3aedff",s[4].populate(_),r=s[0];const D={};s[5]=this.element({parent:r||"root"},i),D.w=200,D.h=200,D.x=1050,D.y={transition:{value:i.y,easing:"ease-in-out",end:i.finished}},D.color="0x6d28d9ff",s[5].populate(D),r=s[0];const w={};s[6]=this.element({parent:r||"root"},i),w.w=200,w.h=200,w.x=1300,w.y={transition:{value:i.y,duration:3e3,easing:"ease-in-out-back",end:i.finished}},w.color="0x5b21b6ff",s[6].populate(w),r=s[0];const L={};return s[7]=this.element({parent:r||"root"},i),L.w=200,L.h=200,L.x=1550,L.y={transition:{value:i.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},L.color="0x4c1d95ff",s[7].populate(L),s},effects:[function(r,i,f,d,y,x){i[1].set("y",{transition:r.y})},function(r,i,f,d,y,x){i[2].set("y",{transition:{value:r.y}})},function(r,i,f,d,y,x){i[3].set("y",{transition:{value:r.y,duration:1e3,start:r.start,end:r.doneTransition3}})},function(r,i,f,d,y,x){i[4].set("y",{transition:{value:r.y,duration:500,delay:500,start:r.start,end:r.finished}})},function(r,i,f,d,y,x){i[5].set("y",{transition:{value:r.y,easing:"ease-in-out",end:r.finished}})},function(r,i,f,d,y,x){i[6].set("y",{transition:{value:r.y,duration:3e3,easing:"ease-in-out-back",end:r.finished}})},function(r,i,f,d,y,x){i[7].set("y",{transition:{value:r.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state(){return{y:50}},hooks:{init(){this.$setInterval(()=>{this.go()},12e3),this.go()}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(h,r,i){this.$log.info("Start transition",h.nodeId,r,i)},finished(h,r,i){this.$log.info("Finished transition",h.nodeId,r,i)},go(){this.y=50,this.$setTimeout(()=>{this.y=1080-50-200},1e3),this.$setTimeout(()=>{this.y=50,this.$setTimeout(()=>{this.y=200},1e3)},6e3)}}}),g5=at.Component("Alpha",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.y=100,s[1].populate(C),r=s[1];const R={};s[2]=this.element({parent:r||"root"},i),R.w=200,R.h=200,R.x=100,R.color="0xffffffff",R.alpha=.2,s[2].populate(R),r=s[1];const b={};s[3]=this.element({parent:r||"root"},i),b.w=200,b.h=200,b.x=320,b.color="0xffffffff",b.alpha=.4,s[3].populate(b),r=s[1];const _={};s[4]=this.element({parent:r||"root"},i),_.w=200,_.h=200,_.x=540,_.color="0xffffffff",_.alpha=.6,s[4].populate(_),r=s[1];const D={};s[5]=this.element({parent:r||"root"},i),D.w=200,D.h=200,D.x=760,D.color="0xffffffff",D.alpha=.8,s[5].populate(D),r=s[1];const w={};s[6]=this.element({parent:r||"root"},i),w.w=200,w.h=200,w.x=980,w.color="0xffffffff",w.alpha=1,s[6].populate(w),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.w=200,L.h=200,L.x=100,L.y=320,L.color="0xffffffff",L.alpha=i.alpha,s[7].populate(L),r=s[0];const $={};s[8]=this.element({parent:r||"root"},i),$.w=200,$.h=200,$.x=100,$.y=540,$.color="0xffffffff",$.alpha=i.alpha,s[8].populate($),r=s[0];const B={};s[9]=this.element({parent:r||"root"},i),B.w=200,B.h=200,B.x=100,B.y=760,B.color="0xffffffff",B.alpha={transition:{value:i.alpha,duration:1e3,easing:"ease-in-out-circ"}},s[9].populate(B),r=s[0];const V={};s[10]=this.element({parent:r||"root"},i),V.w=428,V.h=234,V.x=1200,V.y=100,V.src=i.image,V.alpha=1,s[10].populate(V),r=s[0];const W={};s[11]=this.element({parent:r||"root"},i),W.w=428,W.h=234,W.x=1300,W.y=100+234-40,W.src=i.image,W.alpha=.4,s[11].populate(W),r=s[0];const X={};s[12]=this.element({parent:r||"root"},i),X.w=428,X.h=234,X.x=1200,X.y=100+234*2-40*2,X.src=i.image,X.alpha=.1,s[12].populate(X),r=s[0];const ie={};s[13]=this.element({parent:r||"root"},i),ie.x=400,ie.y=400,ie.alpha=.2,ie.content="Text with alpha applied directly",ie.__textnode=!0,s[13].populate(ie),r=s[0];const K={};s[14]=this.element({parent:r||"root"},i),K.alpha=.5,K.x=400,K.y=500,s[14].populate(K),r=s[14];const pe={};return s[15]=this.element({parent:r||"root"},i),pe.content="Text with alpha applied on parent element",pe.__textnode=!0,s[15].populate(pe),s},effects:[function(r,i,f,d,y,x){i[8].set("alpha",r.alpha)},function(r,i,f,d,y,x){i[9].set("alpha",{transition:{value:r.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(r,i,f,d,y,x){i[10].set("src",r.image)},function(r,i,f,d,y,x){i[11].set("y",100+234-40)},function(r,i,f,d,y,x){i[11].set("src",r.image)},function(r,i,f,d,y,x){i[12].set("y",100+234*2-40*2)},function(r,i,f,d,y,x){i[12].set("src",r.image)}],context:{}},state(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready(){this.$setInterval(()=>{const h=this.direction==="up"?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(h,1),.1),this.alpha===1&&(this.direction="down"),this.alpha===.1&&(this.direction="up")},1400)}}}),m5=at.Component("Scaling",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.x=100,C.y=100,C.w=150,C.h=150,C.color="0x64748bff",s[1].populate(C),r=s[0];const R={};s[2]=this.element({parent:r||"root"},i),R.x=300,R.y=100,R.w=100,R.h=100,R.color="0x64748bff",R.scale=1.5,s[2].populate(R),r=s[0];const b={};s[3]=this.element({parent:r||"root"},i),b.x=100,b.y=400,b.w=100,b.h=100,b.color="0xb45309ff",b.scale=i.scale,s[3].populate(b),r=s[0];const _={};s[4]=this.element({parent:r||"root"},i),_.x=900,_.y=400,_.w=100,_.h=100,_.src=i.balloon,_.scale={transition:{value:i.scale,easing:"ease-in-out"}},s[4].populate(_),r=s[0];const D={};s[5]=this.element({parent:r||"root"},i),D.x=300,D.y=600,D.w=100,D.h=100,D.color="0x059669ff",D.scale=i.scale2,s[5].populate(D),r=s[5];const w={};s[6]=this.element({parent:r||"root"},i),w.x=10,w.y=10,w.h=60,w.w=80,w.color="0x0369a1ff",s[6].populate(w),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.x=1500,L.y=600,L.w=100,L.h=100,L.color="0x059669ff",L.scale=i.scale2,s[7].populate(L),r=s[7];const $={};return s[8]=this.element({parent:r||"root"},i),$.x=10,$.y=10,$.h=60,$.w=80,$.color="0x0369a1ff",$.scale=i.scale2/2,s[8].populate($),s},effects:[function(r,i,f,d,y,x){i[4].set("src",r.balloon)},function(r,i,f,d,y,x){i[4].set("scale",{transition:{value:r.scale,easing:"ease-in-out"}})},function(r,i,f,d,y,x){i[5].set("scale",r.scale2)},function(r,i,f,d,y,x){i[7].set("scale",r.scale2)},function(r,i,f,d,y,x){i[8].set("scale",r.scale2/2)}],context:{}},state(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.scale+.5:0;this.scale=Math.max(Math.min(i,8),0),this.scale===8&&(this.direction="down"),this.scale===0&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=this.scale2===1?3:1},2e3)}}}),y5=at.Component("Rotation",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.y=70,s[1].populate(C),r=s[1];const R={};s[2]=this.element({parent:r||"root"},i),R.x=100,R.y=0,R.w=200,R.h=100,R.color="0xfee2e2ff",R.rotation=0,s[2].populate(R),r=s[1];const b={};s[3]=this.element({parent:r||"root"},i),b.x=100,b.y=150,b.w=200,b.h=100,b.color="0xfecacaff",b.rotation=10,s[3].populate(b),r=s[1];const _={};s[4]=this.element({parent:r||"root"},i),_.x=100,_.y=300,_.w=200,_.h=100,_.color="0xfca5a5ff",_.rotation=20,s[4].populate(_),r=s[1];const D={};s[5]=this.element({parent:r||"root"},i),D.x=100,D.y=450,D.w=200,D.h=100,D.color="0xf87171ff",D.rotation=30,s[5].populate(D),r=s[1];const w={};s[6]=this.element({parent:r||"root"},i),w.x=100,w.y=610,w.w=200,w.h=100,w.color="0xef4444ff",w.rotation=40,s[6].populate(w),r=s[1];const L={};s[7]=this.element({parent:r||"root"},i),L.x=100,L.y=800,L.w=200,L.h=100,L.color="0xdc2626ff",L.rotation=50,s[7].populate(L),r=s[0];const $={};s[8]=this.element({parent:r||"root"},i),$.y=70,$.x=300,s[8].populate($),r=s[8];const B={};s[9]=this.element({parent:r||"root"},i),B.x=100,B.y=0,B.w=200,B.h=100,B.color="0xfee2e2ff",B.rotation=60,s[9].populate(B),r=s[8];const V={};s[10]=this.element({parent:r||"root"},i),V.x=100,V.y=150,V.w=200,V.h=100,V.color="0xfecacaff",V.rotation=70,s[10].populate(V),r=s[8];const W={};s[11]=this.element({parent:r||"root"},i),W.x=100,W.y=300,W.w=200,W.h=100,W.color="0xfca5a5ff",W.rotation=80,s[11].populate(W),r=s[8];const X={};s[12]=this.element({parent:r||"root"},i),X.x=100,X.y=450,X.w=200,X.h=100,X.color="0xf87171ff",X.rotation=90,s[12].populate(X),r=s[8];const ie={};s[13]=this.element({parent:r||"root"},i),ie.x=100,ie.y=610,ie.w=200,ie.h=100,ie.color="0xef4444ff",ie.rotation=100,s[13].populate(ie),r=s[8];const K={};s[14]=this.element({parent:r||"root"},i),K.x=100,K.y=800,K.w=200,K.h=100,K.color="0xdc2626ff",K.rotation=100,s[14].populate(K),r=s[0];const pe={};s[15]=this.element({parent:r||"root"},i),pe.y=70,pe.x=600,s[15].populate(pe),r=s[15];const ue={};s[16]=this.element({parent:r||"root"},i),ue.x=100,ue.y=0,ue.w=200,ue.h=100,ue.color="0xfee2e2ff",ue.rotation=110,s[16].populate(ue),r=s[15];const q={};s[17]=this.element({parent:r||"root"},i),q.x=100,q.y=150,q.w=200,q.h=100,q.color="0xfecacaff",q.rotation=120,s[17].populate(q),r=s[15];const A={};s[18]=this.element({parent:r||"root"},i),A.x=100,A.y=300,A.w=200,A.h=100,A.color="0xfca5a5ff",A.rotation=130,s[18].populate(A),r=s[15];const Y={};s[19]=this.element({parent:r||"root"},i),Y.x=100,Y.y=450,Y.w=200,Y.h=100,Y.color="0xf87171ff",Y.rotation=140,s[19].populate(Y),r=s[15];const le={};s[20]=this.element({parent:r||"root"},i),le.x=100,le.y=610,le.w=200,le.h=100,le.color="0xef4444ff",le.rotation=150,s[20].populate(le),r=s[15];const ge={};s[21]=this.element({parent:r||"root"},i),ge.x=100,ge.y=800,ge.w=200,ge.h=100,ge.color="0xdc2626ff",ge.rotation=160,s[21].populate(ge),r=s[0];const de={};s[22]=this.element({parent:r||"root"},i),de.y=70,de.x=900,s[22].populate(de),r=s[22];const se={};s[23]=this.element({parent:r||"root"},i),se.x=100,se.y=0,se.w=200,se.h=100,se.color="0xfee2e2ff",se.rotation=170,s[23].populate(se),r=s[22];const re={};s[24]=this.element({parent:r||"root"},i),re.x=100,re.y=150,re.w=200,re.h=100,re.color="0xfecacaff",re.rotation=180,s[24].populate(re),r=s[22];const oe={};s[25]=this.element({parent:r||"root"},i),oe.x=100,oe.y=300,oe.w=200,oe.h=100,oe.color="0xfca5a5ff",oe.rotation=190,s[25].populate(oe),r=s[22];const Re={};s[26]=this.element({parent:r||"root"},i),Re.x=100,Re.y=450,Re.w=200,Re.h=100,Re.color="0xf87171ff",Re.rotation=200,s[26].populate(Re),r=s[22];const Ae={};s[27]=this.element({parent:r||"root"},i),Ae.x=100,Ae.y=610,Ae.w=200,Ae.h=100,Ae.color="0xef4444ff",Ae.rotation=210,s[27].populate(Ae),r=s[22];const Ie={};s[28]=this.element({parent:r||"root"},i),Ie.x=100,Ie.y=800,Ie.w=200,Ie.h=100,Ie.color="0xdc2626ff",Ie.rotation=220,s[28].populate(Ie),r=s[0];const _e={};s[29]=this.element({parent:r||"root"},i),_e.y=70,_e.x=1200,s[29].populate(_e),r=s[29];const Te={};s[30]=this.element({parent:r||"root"},i),Te.x=100,Te.y=0,Te.w=200,Te.h=100,Te.color="0xfee2e2ff",Te.rotation=230,s[30].populate(Te),r=s[29];const je={};s[31]=this.element({parent:r||"root"},i),je.x=100,je.y=150,je.w=200,je.h=100,je.color="0xfecacaff",je.rotation=240,s[31].populate(je),r=s[29];const F={};s[32]=this.element({parent:r||"root"},i),F.x=100,F.y=300,F.w=200,F.h=100,F.color="0xfca5a5ff",F.rotation=250,s[32].populate(F),r=s[29];const Ue={};s[33]=this.element({parent:r||"root"},i),Ue.x=100,Ue.y=450,Ue.w=200,Ue.h=100,Ue.color="0xf87171ff",Ue.rotation=260,s[33].populate(Ue),r=s[29];const He={};s[34]=this.element({parent:r||"root"},i),He.x=100,He.y=610,He.w=200,He.h=100,He.color="0xef4444ff",He.rotation=270,s[34].populate(He),r=s[29];const Ge={};s[35]=this.element({parent:r||"root"},i),Ge.x=100,Ge.y=800,Ge.w=200,Ge.h=100,Ge.color="0xdc2626ff",Ge.rotation=280,s[35].populate(Ge),r=s[0];const Ce={};s[36]=this.element({parent:r||"root"},i),Ce.y=70,Ce.x=1500,s[36].populate(Ce),r=s[36];const H={};s[37]=this.element({parent:r||"root"},i),H.x=100,H.y=0,H.w=200,H.h=100,H.color="0xfee2e2ff",H.rotation=290,s[37].populate(H),r=s[36];const Ee={};s[38]=this.element({parent:r||"root"},i),Ee.x=100,Ee.y=150,Ee.w=200,Ee.h=100,Ee.color="0xfecacaff",Ee.rotation=300,s[38].populate(Ee),r=s[36];const ke={};s[39]=this.element({parent:r||"root"},i),ke.x=100,ke.y=300,ke.w=200,ke.h=100,ke.color="0xfca5a5ff",ke.rotation=310,s[39].populate(ke),r=s[36];const ce={};s[40]=this.element({parent:r||"root"},i),ce.x=100,ce.y=450,ce.w=200,ce.h=100,ce.color="0xf87171ff",ce.rotation=320,s[40].populate(ce),r=s[36];const Xe={};s[41]=this.element({parent:r||"root"},i),Xe.x=100,Xe.y=610,Xe.w=200,Xe.h=100,Xe.color="0xef4444ff",Xe.rotation=330,s[41].populate(Xe),r=s[36];const be={};s[42]=this.element({parent:r||"root"},i),be.x=100,be.y=800,be.w=200,be.h=100,be.color="0xdc2626ff",be.rotation=340,s[42].populate(be),r=s[0];const Oe={};s[43]=this.element({parent:r||"root"},i),Oe.x=200,Oe.y=200,Oe.w=400,Oe.h=400,Oe.color="0x0891b2ff",Oe.rotation=i.rotation1,s[43].populate(Oe),r=s[0];const he={};s[44]=this.element({parent:r||"root"},i),he.x=800,he.y=200,he.w=400,he.h=400,he.color="0x0891b2ff",he.rotation=i.rotation2,s[44].populate(he),r=s[0];const Q={};return s[45]=this.element({parent:r||"root"},i),Q.x=1400,Q.y=200,Q.w=400,Q.h=400,Q.color="0x0891b2ff",Q.rotation={transition:i.rotation3},s[45].populate(Q),s},effects:[function(r,i,f,d,y,x){i[44].set("rotation",r.rotation2)},function(r,i,f,d,y,x){i[45].set("rotation",{transition:r.rotation3})}],context:{}},state(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready(){let h=800,r=2e3;this.$setInterval(()=>{const i=this.rotation2+10;this.rotation2=i<=360?i:0},h),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,this.rotation3*2)),this.rotation3===720&&(this.rotation3=0)},r)}}}),v5=at.Component("KeyInput",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.x=525,g.y=130,s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=200,C.h=200,C.color=i.focusColor,C.x=i.focusedX*220,C.y=i.focusedY*210,s[1].populate(C),r=s[0];const R={};s[2]=this.element({parent:r||"root"},i),R.w=180,R.h=180,R.x=10,R.y=10,R.color=i.blockColor,s[2].populate(R),r=s[0];const b={};s[3]=this.element({parent:r||"root"},i),b.w=180,b.h=180,b.x=230,b.y=10,b.color=i.blockColor,s[3].populate(b),r=s[0];const _={};s[4]=this.element({parent:r||"root"},i),_.w=180,_.h=180,_.x=450,_.y=10,_.color=i.blockColor,s[4].populate(_),r=s[0];const D={};s[5]=this.element({parent:r||"root"},i),D.w=180,D.h=180,D.x=670,D.y=10,D.color=i.blockColor,s[5].populate(D),r=s[0];const w={};s[6]=this.element({parent:r||"root"},i),w.w=180,w.h=180,w.x=10,w.y=220,w.color=i.blockColor,s[6].populate(w),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.w=180,L.h=180,L.x=230,L.y=220,L.color=i.blockColor,s[7].populate(L),r=s[0];const $={};s[8]=this.element({parent:r||"root"},i),$.w=180,$.h=180,$.x=450,$.y=220,$.color=i.blockColor,s[8].populate($),r=s[0];const B={};s[9]=this.element({parent:r||"root"},i),B.w=180,B.h=180,B.x=670,B.y=220,B.color=i.blockColor,s[9].populate(B),r=s[0];const V={};s[10]=this.element({parent:r||"root"},i),V.w=180,V.h=180,V.x=10,V.y=430,V.color=i.blockColor,s[10].populate(V),r=s[0];const W={};s[11]=this.element({parent:r||"root"},i),W.w=180,W.h=180,W.x=230,W.y=430,W.color=i.blockColor,s[11].populate(W),r=s[0];const X={};s[12]=this.element({parent:r||"root"},i),X.w=180,X.h=180,X.x=450,X.y=430,X.color=i.blockColor,s[12].populate(X),r=s[0];const ie={};s[13]=this.element({parent:r||"root"},i),ie.w=180,ie.h=180,ie.x=670,ie.y=430,ie.color=i.blockColor,s[13].populate(ie),r=s[0];const K={};s[14]=this.element({parent:r||"root"},i),K.w=180,K.h=180,K.x=10,K.y=640,K.color=i.blockColor,s[14].populate(K),r=s[0];const pe={};s[15]=this.element({parent:r||"root"},i),pe.w=180,pe.h=180,pe.x=230,pe.y=640,pe.color=i.blockColor,s[15].populate(pe),r=s[0];const ue={};s[16]=this.element({parent:r||"root"},i),ue.w=180,ue.h=180,ue.x=450,ue.y=640,ue.color=i.blockColor,s[16].populate(ue),r=s[0];const q={};return s[17]=this.element({parent:r||"root"},i),q.w=180,q.h=180,q.x=670,q.y=640,q.color=i.blockColor,s[17].populate(q),s},effects:[function(r,i,f,d,y,x){i[1].set("color",r.focusColor)},function(r,i,f,d,y,x){i[1].set("x",r.focusedX*220)},function(r,i,f,d,y,x){i[1].set("y",r.focusedY*210)},function(r,i,f,d,y,x){i[2].set("color",r.blockColor)},function(r,i,f,d,y,x){i[3].set("color",r.blockColor)},function(r,i,f,d,y,x){i[4].set("color",r.blockColor)},function(r,i,f,d,y,x){i[5].set("color",r.blockColor)},function(r,i,f,d,y,x){i[6].set("color",r.blockColor)},function(r,i,f,d,y,x){i[7].set("color",r.blockColor)},function(r,i,f,d,y,x){i[8].set("color",r.blockColor)},function(r,i,f,d,y,x){i[9].set("color",r.blockColor)},function(r,i,f,d,y,x){i[10].set("color",r.blockColor)},function(r,i,f,d,y,x){i[11].set("color",r.blockColor)},function(r,i,f,d,y,x){i[12].set("color",r.blockColor)},function(r,i,f,d,y,x){i[13].set("color",r.blockColor)},function(r,i,f,d,y,x){i[14].set("color",r.blockColor)},function(r,i,f,d,y,x){i[15].set("color",r.blockColor)},function(r,i,f,d,y,x){i[16].set("color",r.blockColor)},function(r,i,f,d,y,x){i[17].set("color",r.blockColor)}],context:{}},state(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor(){return this.colorscheme==="yellow"?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme==="yellow"?"#facc15":"#38bdf8"}},input:{left(){const h=this.focusedX-1;this.focusedX=Math.max(h,0)},right(){const h=this.focusedX+1;this.focusedX=Math.min(h,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme=this.colorscheme==="yellow"?"blue":"yellow"},any(h){const r=parseInt(h.key);isNaN(r)?this.parent.$focus(h):(this.focusedX=Math.max(0,(r-1)%4),this.focusedY=Math.max(0,Math.ceil(r/4)-1))}}}),G0=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],X0=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],x5=at.Component("Texts",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.x=100,g.y=100,s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.content="Default text",C["@loaded"]=i.textLoaded&&i.textLoaded.bind(i),C.__textnode=!0,s[1].populate(C),r=s[0];const R={};s[2]=this.element({parent:r||"root"},i),R.content="123456",R.x=400,R.__textnode=!0,s[2].populate(R),r=s[0];const b={};s[3]=this.element({parent:r||"root"},i),b.content="Text with a different fontsize",b.size=i.size,b.y=120,b.font="raleway",b.__textnode=!0,s[3].populate(b),r=s[0];const _={};s[4]=this.element({parent:r||"root"},i),_.content="Text with a different color",_.size=50,_.color=i.color,_.y=250,_.__textnode=!0,s[4].populate(_),r=s[0];const D={};s[5]=this.element({parent:r||"root"},i),D.content="Letterspacing",D.size=50,D.color="0x38bdf8ff",D.y=450,D.letterspacing=40,D.__textnode=!0,s[5].populate(D),r=s[0];const w={};s[6]=this.element({parent:r||"root"},i),w.w=800,w.h=100,w.y=550,w.color="0x94a3b8ff",s[6].populate(w),r=s[6];const L={};s[7]=this.element({parent:r||"root"},i),L.content="Text align center",L.size=50,L.y=15,L.color="0xbae6fdff",L.align="center",L.wordwrap=800,L.__textnode=!0,s[7].populate(L),r=s[0];const $={};s[8]=this.element({parent:r||"root"},i),$.w=800,$.h=200,$.x=900,$.y=550,$.color="0x94a3b8ff",s[8].populate($),r=s[8];const B={};s[9]=this.element({parent:r||"root"},i),B.content=i.longText,B.size=40,B.color="0xbae6fdff",B.wordwrap=800,B.maxlines=5,B.textoverflow="!!!",B.__textnode=!0,s[9].populate(B),r=s[0];const V={};s[10]=this.element({parent:r||"root"},i),V.w=800,V.h=120,V.x=900,V.y=800,V.color="0x94a3b8ff",s[10].populate(V),r=s[10];const W={};s[11]=this.element({parent:r||"root"},i),W.content=i.longText,W.size=40,W.color="0xbae6fdff",W.wordwrap=800,W.maxlines=2,W.lineheight=60,W.textoverflow=!1,W.__textnode=!0,s[11].populate(W),r=s[0];const X={};s[12]=this.element({parent:r||"root"},i),X.content=i.character,X.size=50,X.color=i.color,X.y=750,X.font="opensans",X.__textnode=!0,s[12].populate(X),r=s[0];const ie={};s[13]=this.element({parent:r||"root"},i),ie.x=1200,ie.y=300,s[13].populate(ie),r=s[13];const K={};s[14]=this.element({parent:r||"root"},i),K.rotation={transition:i.rotation},K.pivot=0,K.content="Hello",K.__textnode=!0,s[14].populate(K),r=s[13];const pe={};s[15]=this.element({parent:r||"root"},i),pe.x=150,pe.rotation={transition:i.rotation},pe.pivot=.5,pe.content="World",pe.__textnode=!0,s[15].populate(pe),r=s[13];const ue={};s[16]=this.element({parent:r||"root"},i),ue.x=300,ue.rotation={transition:i.rotation},ue.pivot=1,ue.content="!!",ue.__textnode=!0,s[16].populate(ue),r=s[0];const q={};s[17]=this.element({parent:r||"root"},i),q.x=500,q.y=700,s[17].populate(q),r=s[17];const A=[],Y=(le=[],ge,de)=>{const se=x(le),re=new Set;let oe=se.length;for(;oe--;)se[oe],re.add(""+oe);let Re=de.length;for(;Re--;)if(re.has(de[Re])===!1){const Ie=de[Re];ge[18][Ie]&&ge[18][Ie].destroy(),delete ge[18][Ie]}de.length=0;const Ae=se.length;for(let Ie=0;Ie<Ae;Ie++){const _e=Object.create(i);r=ge[17],_e.index=Ie,_e.text=se[Ie],_e.key=""+Ie,de.push(_e.key),r=ge[17],ge[18]===void 0&&(ge[18]={});const Te={};ge[18][_e.key]===void 0&&(ge[18][_e.key]=this.element({parent:r||"root"},i)),Te.content=_e.text,Te.y=_e.index*50,Te.__textnode=!0,ge[18][_e.key].nodeId===void 0&&ge[18][_e.key].populate(Te);let je=()=>{ge[18][_e.key].set("y",_e.index*50)};y(je,null),i[Symbol.for("effects")].push(je)}};return y(()=>{Y(i.texts,s,A)},"texts"),y(()=>{i.text;for(let le=0;le<i.texts.length;le++){const ge={};ge.index=le,ge.text=i.texts[le],ge.key=le,s[18][ge.key].set("content",ge.text)}}),s},effects:[function(r,i,f,d,y,x){i[3].set("size",r.size)},function(r,i,f,d,y,x){i[4].set("color",r.color)},function(r,i,f,d,y,x){i[12].set("content",r.character)},function(r,i,f,d,y,x){i[12].set("color",r.color)},function(r,i,f,d,y,x){i[14].set("rotation",{transition:r.rotation})},function(r,i,f,d,y,x){i[15].set("rotation",{transition:r.rotation})},function(r,i,f,d,y,x){i[16].set("rotation",{transition:r.rotation})}],context:{}},state(){return{color:G0[0],size:10,character:X0[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0,texts:["Hello","World","Lightning 3","Blits"]}},hooks:{ready(){let h=0;this.$setInterval(()=>{h++,h>G0.length-1&&(h=0),this.color=G0[h],this.size=10*(h*2+1),this.rotation+=30},1e3);let r=0;this.$setInterval(()=>{r++,r>X0.length-1&&(r=0),this.character=X0[r]},1400)}},methods:{textLoaded(h){this.$log.info(`Text loaded with w: ${h.w} and h: ${h.h}`)}}}),jc=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],w5=at.Component("Images",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.src="assets/lightningbolt.png",C.w=428,C.h=234,C.x=100,C.y=100,s[1].populate(C),r=s[0];const R={};s[2]=this.element({parent:r||"root"},i),R.src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",R.w=428,R.h=234,R.x=100,R.y=400,s[2].populate(R),r=s[0];const b={};s[3]=this.element({parent:r||"root"},i),b.src=i.image,b.w=428,b.h=234,b.x=100,b.y=700,b["@loaded"]=i.imageLoaded&&i.imageLoaded.bind(i),s[3].populate(b),r=s[0];const _={};s[4]=this.element({parent:r||"root"},i),_.color="{top: '0xff0000ff', bottom: '0xffd700ff'}",_.src="assets/lightningbolt.png",_.w=428,_.h=234,_.x=600,_.y=100,s[4].populate(_),r=s[0];const D={};s[5]=this.element({parent:r||"root"},i),D.x=600,D.y=400,D.w=428,D.h=234,D.clipping=i.clipping,s[5].populate(D),r=s[5];const w={};s[6]=this.element({parent:r||"root"},i),w.src="assets/lightningbolt.png",w.w=856,w.h=468,s[6].populate(w),r=s[0];const L={};return s[7]=this.element({parent:r||"root"},i),L.color=i.color,L.src="assets/lightningbolt.png",L.w=428,L.h=234,L.x=1100,L.y=100,s[7].populate(L),s},effects:[function(r,i,f,d,y,x){i[3].set("src",r.image)},function(r,i,f,d,y,x){i[5].set("clipping",r.clipping)},function(r,i,f,d,y,x){i[7].set("color",r.color)}],context:{}},state(){return{image:jc[0],clipping:!0,color:"red"}},hooks:{ready(){this.$setInterval(()=>{this.image=this.image===jc[0]?jc[1]:jc[0],this.clipping=!this.clipping,this.color=this.color==="red"?"blue":"red"},2e3)}},methods:{imageLoaded(h){console.log("backstopjs:ready"),this.$log.info(`Image loaded with w: ${h.w} and h: ${h.h}`)}}}),ma=at.Component("Square",{code:{render:function(r,i,f,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.w={transition:i.size},g.h={transition:i.size},g.color={transition:i.color},s[0].populate(g),s},effects:[function(r,i,f,d,y,x){i[0].set("w",{transition:r.size})},function(r,i,f,d,y,x){i[0].set("h",{transition:r.size})},function(r,i,f,d,y,x){i[0].set("color",{transition:r.color})}],context:{}},props:[{key:"size",default:80}],state(){return{color:"#86198f"}},watch:{size(h,r){this.$log.info(`Size changed from ${r} to ${h}`),this.color=this.color==="#86198f"?"#9d174d":"#86198f"}}}),AC=at.Component("Card",{components:{Square:ma},code:{render:function(r,i,f,d,y,x){const s=[];let g;const C={};s[0]=this.element({parent:r||"root"},i),C.w=i.w,C.h=i.h,C.color="0x0891b2ff",s[0].populate(C);const R=f.components&&f.components.Square||d.Square;r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.x=80,b.y=80;const _=[];if(typeof R<"u")for(let X in R.config.props)delete b[R.config.props[X]],_.push(R.config.props[X]);s[1].populate(b),r=s[1];const D={};D.x=80,D.y=80,g=D.is||"Square";let w;if(typeof g=="string"){if(w=f.components&&f.components[g]||d[g],!w)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(w=g);s[2]=w.call(null,{props:D},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0];const L=f.components&&f.components.Square||d.Square;r=s[0];const $={};s[3]=this.element({parent:r||"root"},i),$.x=20,$.y=20,$.size=40;const B=[];if(typeof L<"u")for(let X in L.config.props)delete $[L.config.props[X]],B.push(L.config.props[X]);s[3].populate($),r=s[3];const V={};V.x=20,V.y=20,V.size=40,g=V.is||"Square";let W;if(typeof g=="string"){if(W=f.components&&f.components[g]||d[g],!W)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(W=g);return s[4]=W.call(null,{props:V},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0],s},effects:[],context:{}},props:["size"],computed:{w(){return this.size==="large"?400:200},h(){return this.size==="large"?500:300}}}),S5=at.Component("Components",{components:{Square:ma,Card:AC},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R);const b=f.components&&f.components.Square||d.Square;r=s[0];const _={};s[1]=this.element({parent:r||"root"},i),_.x=100,_.y=100,_.size=50;const D=[];if(typeof b<"u")for(let be in b.config.props)delete _[b.config.props[be]],D.push(b.config.props[be]);s[1].populate(_),r=s[1];const w={};w.x=100,w.y=100,w.size=50,g=w.is||"Square";let L;if(typeof g=="string"){if(L=f.components&&f.components[g]||d[g],!L)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(L=g);s[2]=L.call(null,{props:w},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0];const $=f.components&&f.components.Square||d.Square;r=s[0];const B={};s[3]=this.element({parent:r||"root"},i),B.x=100,B.y=200,B.size=100;const V=[];if(typeof $<"u")for(let be in $.config.props)delete B[$.config.props[be]],V.push($.config.props[be]);s[3].populate(B),r=s[3];const W={};W.x=100,W.y=200,W.size=100,g=W.is||"Square";let X;if(typeof g=="string"){if(X=f.components&&f.components[g]||d[g],!X)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(X=g);s[4]=X.call(null,{props:W},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0];const ie=f.components&&f.components.Square||d.Square;r=s[0];const K={};s[5]=this.element({parent:r||"root"},i),K.x=100,K.y=350,K.size=200;const pe=[];if(typeof ie<"u")for(let be in ie.config.props)delete K[ie.config.props[be]],pe.push(ie.config.props[be]);s[5].populate(K),r=s[5];const ue={};ue.x=100,ue.y=350,ue.size=200,g=ue.is||"Square";let q;if(typeof g=="string"){if(q=f.components&&f.components[g]||d[g],!q)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(q=g);s[6]=q.call(null,{props:ue},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],i=s[6]):r=s[6][Symbol.for("children")][0];const A=f.components&&f.components.Square||d.Square;r=s[0];const Y={};s[7]=this.element({parent:r||"root"},i),Y.x={transition:i.x},Y.y=600,Y.size=50;const le=[];if(typeof A<"u")for(let be in A.config.props)delete Y[A.config.props[be]],le.push(A.config.props[be]);s[7].populate(Y),r=s[7];const ge={};C={transition:i.x},Array.isArray(C)===!0&&(C=x(C).slice(0)),ge.x=C,ge.y=600,ge.size=50,g=ge.is||"Square";let de;if(typeof g=="string"){if(de=f.components&&f.components[g]||d[g],!de)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(de=g);s[8]=de.call(null,{props:ge},s[7],i),s[8][Symbol.for("slots")][0]?(r=s[8][Symbol.for("slots")][0],i=s[8]):r=s[8][Symbol.for("children")][0];const se=f.components&&f.components.Card||d.Card;r=s[0];const re={};s[9]=this.element({parent:r||"root"},i),re.x=500,re.y=100;const oe=[];if(typeof se<"u")for(let be in se.config.props)delete re[se.config.props[be]],oe.push(se.config.props[be]);s[9].populate(re),r=s[9];const Re={};Re.x=500,Re.y=100,g=Re.is||"Card";let Ae;if(typeof g=="string"){if(Ae=f.components&&f.components[g]||d[g],!Ae)throw new Error('Component "Card" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ae=g);s[10]=Ae.call(null,{props:Re},s[9],i),s[10][Symbol.for("slots")][0]?(r=s[10][Symbol.for("slots")][0],i=s[10]):r=s[10][Symbol.for("children")][0];const Ie=f.components&&f.components.Card||d.Card;r=s[0];const _e={};s[11]=this.element({parent:r||"root"},i),_e.x=500,_e.y=500,_e.size="large";const Te=[];if(typeof Ie<"u")for(let be in Ie.config.props)delete _e[Ie.config.props[be]],Te.push(Ie.config.props[be]);s[11].populate(_e),r=s[11];const je={};je.x=500,je.y=500,je.size="large",g=je.is||"Card";let F;if(typeof g=="string"){if(F=f.components&&f.components[g]||d[g],!F)throw new Error('Component "Card" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(F=g);s[12]=F.call(null,{props:je},s[11],i),s[12][Symbol.for("slots")][0]?(r=s[12][Symbol.for("slots")][0],i=s[12]):r=s[12][Symbol.for("children")][0],r=s[0];const Ue={};s[13]=this.element({parent:r||"root"},i),Ue.x=1e3,Ue.y=100,s[13].populate(Ue),r=s[13];const He={};s[14]=this.element({parent:r||"root"},i),He.content="Dynamic components",He.__textnode=!0,s[14].populate(He);const Ge=f.components&&f.components.Component||d.Component;r=s[13];const Ce={};s[15]=this.element({parent:r||"root"},i),Ce.is=i.dynamicComponent,Ce.y=100,Ce.color="0x0000ffff";const H=[];if(typeof Ge<"u")for(let be in Ge.config.props)delete Ce[Ge.config.props[be]],H.push(Ge.config.props[be]);s[15].populate(Ce),r=s[15];const Ee={};Ee.is=i.dynamicComponent,Ee.y=100,Ee.color="0x0000ffff",g=Ee.is||"Component";let ke;if(typeof g=="string"){if(ke=f.components&&f.components[g]||d[g],!ke)throw new Error('Component "Component" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(ke=g);s[16]=ke.call(null,{props:Ee},s[15],i),s[16][Symbol.for("slots")][0]?(r=s[16][Symbol.for("slots")][0],i=s[16]):r=s[16][Symbol.for("children")][0],r=s[13];const ce=[],Xe=(be=[],Oe,he)=>{const Q=x(be),Ne=new Set;let Pe=Q.length;for(;Pe--;)Q[Pe],Ne.add(""+Pe);let Ve=he.length;for(;Ve--;)if(Ne.has(he[Ve])===!1){const pt=he[Ve];Oe[17][pt]&&Oe[17][pt].destroy(),delete Oe[17][pt],Oe[18][pt]&&Oe[18][pt].destroy(),delete Oe[18][pt]}he.length=0;const dt=Q.length;for(let pt=0;pt<dt;pt++){const tt=Object.create(i);r=Oe[13],tt.index=pt,tt.bla=Q[pt],tt.key=""+pt,he.push(tt.key);const bt=f.components&&f.components.Component||d.Component;Oe[17]===void 0&&(Oe[17]={});const ut={};Oe[17][tt.key]===void 0&&(Oe[17][tt.key]=this.element({parent:r||"root"},i)),ut.is=tt.bla,ut.x=205*tt.index,ut.y=300;const vt=[];if(typeof bt<"u")for(let oi in bt.config.props)delete ut[bt.config.props[oi]],vt.push(bt.config.props[oi]);Oe[17][tt.key].nodeId===void 0&&Oe[17][tt.key].populate(ut),Oe[18]===void 0&&(Oe[18]={}),r=Oe[17][tt.key];const ct={};if(Oe[18][tt.key]===void 0){ct.is=tt.bla,C=205*tt.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),ct.x=C,ct.y=300,g=ct.is||"Component";let oi;if(typeof g=="string"){if(oi=f.components&&f.components[g]||d[g],!oi)throw new Error('Component "Component" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(oi=g);Oe[18][tt.key]=oi.call(null,{props:ct},Oe[17][tt.key],i),Oe[18][tt.key][Symbol.for("slots")][0]?(r=Oe[18][tt.key][Symbol.for("slots")][0],i=Oe[18][tt.key]):r=Oe[18][tt.key][Symbol.for("children")][0]}let Bn=()=>{(typeof vt>"u"||vt.indexOf("x")===-1)&&Oe[17][tt.key].set("x",205*tt.index)};y(Bn,null),i[Symbol.for("effects")].push(Bn),Oe[18][tt.key][Symbol.for("props")].x=205*tt.index}};return y(()=>{Xe(i.dynamicComponents,s,ce)},"dynamicComponents"),s},effects:[function(r,i,f,d,y,x){(typeof skip7>"u"||skip7.indexOf("x")===-1)&&i[7].set("x",{transition:r.x})},function(r,i,f,d,y,x){i[8][Symbol.for("props")].x={transition:r.x}}],context:{}},state(){return{x:100,dynamicComponent:lh,dynamicComponents:["Square","Card","Square",lh],toggle:!1,size:50}},hooks:{ready(){this.$setInterval(()=>{this.x=this.x===100?250:100,this.size=this.size===50?200:50},2e3)}}}),_i=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],C5=at.Component("ForLoop",{components:{Square:ma},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R),r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.y=20,s[1].populate(b),r=s[1];const _=[],D=(Ce=[],H,Ee)=>{const ke=x(Ce),ce=new Set;let Xe=ke.length;for(;Xe--;)ke[Xe],ce.add(""+Xe);let be=Ee.length;for(;be--;)if(ce.has(Ee[be])===!1){const he=Ee[be];H[2][he]&&H[2][he].destroy(),delete H[2][he]}Ee.length=0;const Oe=ke.length;for(let he=0;he<Oe;he++){const Q=Object.create(i);r=H[1],Q.index=he,Q.item=ke[he],Q.key=""+he,Ee.push(Q.key),r=H[1],H[2]===void 0&&(H[2]={});const Ne={};H[2][Q.key]===void 0&&(H[2][Q.key]=this.element({parent:r||"root"},i)),Ne.w=80,Ne.h=80,Ne.x=Q.item,Ne.color="0x4d7c0fff",H[2][Q.key].nodeId===void 0&&H[2][Q.key].populate(Ne)}};y(()=>{D(i.collection1,s,_)},"collection1"),r=s[0];const w={};s[3]=this.element({parent:r||"root"},i),w.y=120,s[3].populate(w),r=s[3];const L=[],$=(Ce=[],H,Ee)=>{const ke=x(Ce),ce=new Set;let Xe=ke.length;for(;Xe--;){const he=ke[Xe];ce.add(""+he.id)}let be=Ee.length;for(;be--;)if(ce.has(Ee[be])===!1){const he=Ee[be];H[4][he]&&H[4][he].destroy(),delete H[4][he]}Ee.length=0;const Oe=ke.length;for(let he=0;he<Oe;he++){const Q=Object.create(i);r=H[3],Q.index=he,Q.item=ke[he],Q.key=""+Q.item.id,Ee.push(Q.key),r=H[3],H[4]===void 0&&(H[4]={});const Ne={};H[4][Q.key]===void 0&&(H[4][Q.key]=this.element({parent:r||"root"},i)),Ne.w=80,Ne.h=80,Ne.x=Q.item.x*Q.index,Ne.color=Q.item.color,H[4][Q.key].nodeId===void 0&&H[4][Q.key].populate(Ne);let Pe=()=>{H[4][Q.key].set("x",Q.item.x*Q.index)};y(Pe,null),i[Symbol.for("effects")].push(Pe)}};y(()=>{$(i.collection2,s,L)},"collection2"),r=s[0];const B={};s[5]=this.element({parent:r||"root"},i),B.y=220,s[5].populate(B),r=s[5];const V=[],W=(Ce=[],H,Ee)=>{const ke=x(Ce),ce=new Set;let Xe=ke.length;for(;Xe--;)ke[Xe],ce.add(""+Xe);let be=Ee.length;for(;be--;)if(ce.has(Ee[be])===!1){const he=Ee[be];H[6][he]&&H[6][he].destroy(),delete H[6][he]}Ee.length=0;const Oe=ke.length;for(let he=0;he<Oe;he++){const Q=Object.create(i);r=H[5],Q.index=he,Q.item=ke[he],Q.key=""+he,Ee.push(Q.key),r=H[5],H[6]===void 0&&(H[6]={});const Ne={};H[6][Q.key]===void 0&&(H[6][Q.key]=this.element({parent:r||"root"},i)),Ne.w=80,Ne.h=80,Ne.x=Q.item.x,Ne.color=Q.item.color,H[6][Q.key].nodeId===void 0&&H[6][Q.key].populate(Ne);let Pe=()=>{H[6][Q.key].set("x",Q.item.x)};y(Pe,null),i[Symbol.for("effects")].push(Pe)}};y(()=>{W(i.collection3,s,V)},"collection3"),r=s[0];const X={};s[7]=this.element({parent:r||"root"},i),X.y=320,s[7].populate(X),r=s[7];const ie=[],K=(Ce=[],H,Ee)=>{const ke=x(Ce),ce=new Set;let Xe=ke.length;for(;Xe--;)ke[Xe],ce.add(""+Xe);let be=Ee.length;for(;be--;)if(ce.has(Ee[be])===!1){const he=Ee[be];H[8][he]&&H[8][he].destroy(),delete H[8][he],H[9][he]&&H[9][he].destroy(),delete H[9][he]}Ee.length=0;const Oe=ke.length;for(let he=0;he<Oe;he++){const Q=Object.create(i);r=H[7],Q.index=he,Q.item=ke[he],Q.key=""+he,Ee.push(Q.key);const Ne=f.components&&f.components.Square||d.Square;H[8]===void 0&&(H[8]={});const Pe={};H[8][Q.key]===void 0&&(H[8][Q.key]=this.element({parent:r||"root"},i)),Pe.x=Q.item.x*Q.index,Pe.ref="square"+Q.index,Pe.alpha=Q.alpha;const Ve=[];if(typeof Ne<"u")for(let bt in Ne.config.props)delete Pe[Ne.config.props[bt]],Ve.push(Ne.config.props[bt]);H[8][Q.key].nodeId===void 0&&H[8][Q.key].populate(Pe),H[9]===void 0&&(H[9]={}),r=H[8][Q.key];const dt={};if(H[9][Q.key]===void 0){C=Q.item.x*Q.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),dt.x=C,C="square"+Q.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),dt.ref=C,C=Q.alpha,Array.isArray(C)===!0&&(C=x(C).slice(0)),dt.alpha=C,g=dt.is||"Square";let bt;if(typeof g=="string"){if(bt=f.components&&f.components[g]||d[g],!bt)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(bt=g);H[9][Q.key]=bt.call(null,{props:dt},H[8][Q.key],i),H[9][Q.key][Symbol.for("slots")][0]?(r=H[9][Q.key][Symbol.for("slots")][0],i=H[9][Q.key]):r=H[9][Q.key][Symbol.for("children")][0]}let pt=()=>{(typeof Ve>"u"||Ve.indexOf("x")===-1)&&H[8][Q.key].set("x",Q.item.x*Q.index)};y(pt,null),i[Symbol.for("effects")].push(pt);let tt=()=>{(typeof Ve>"u"||Ve.indexOf("ref")===-1)&&H[8][Q.key].set("ref","square"+Q.index)};y(tt,null),i[Symbol.for("effects")].push(tt),H[9][Q.key][Symbol.for("props")].x=Q.item.x*Q.index,H[9][Q.key][Symbol.for("props")].ref="square"+Q.index}};y(()=>{K(i.collection2,s,ie)},"collection2"),y(()=>{i.alpha;for(let Ce=0;Ce<i.collection2.length;Ce++){const H={};H.index=Ce,H.item=i.collection2[Ce],H.key=Ce,(typeof skip8>"u"||skip8.indexOf("alpha")===-1)&&s[8][H.key].set("alpha",i.alpha)}}),y(()=>{i.alpha;for(let Ce=0;Ce<i.collection2.length;Ce++){const H={};H.index=Ce,H.item=i.collection2[Ce],H.key=Ce,s[9][H.key][Symbol.for("props")].alpha=i.alpha}}),r=s[0];const pe={};s[10]=this.element({parent:r||"root"},i),pe.y=420,s[10].populate(pe),r=s[10];const ue=[],q=(Ce=[],H,Ee)=>{const ke=x(Ce),ce=new Set;let Xe=ke.length;for(;Xe--;){const he=ke[Xe];ce.add(""+he.color)}let be=Ee.length;for(;be--;)if(ce.has(Ee[be])===!1){const he=Ee[be];H[11][he]&&H[11][he].destroy(),delete H[11][he],H[12][he]&&H[12][he].destroy(),delete H[12][he]}Ee.length=0;const Oe=ke.length;for(let he=0;he<Oe;he++){const Q=Object.create(i);r=H[10],Q.index=he,Q.item=ke[he],Q.key=""+Q.item.color,Ee.push(Q.key);const Ne=f.components&&f.components.Square||d.Square;H[11]===void 0&&(H[11]={});const Pe={};H[11][Q.key]===void 0&&(H[11][Q.key]=this.element({parent:r||"root"},i)),Pe.x=Q.item.x,Pe.alpha=Q.alpha;const Ve=[];if(typeof Ne<"u")for(let tt in Ne.config.props)delete Pe[Ne.config.props[tt]],Ve.push(Ne.config.props[tt]);H[11][Q.key].nodeId===void 0&&H[11][Q.key].populate(Pe),H[12]===void 0&&(H[12]={}),r=H[11][Q.key];const dt={};if(H[12][Q.key]===void 0){C=Q.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),dt.x=C,C=Q.alpha,Array.isArray(C)===!0&&(C=x(C).slice(0)),dt.alpha=C,g=dt.is||"Square";let tt;if(typeof g=="string"){if(tt=f.components&&f.components[g]||d[g],!tt)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(tt=g);H[12][Q.key]=tt.call(null,{props:dt},H[11][Q.key],i),H[12][Q.key][Symbol.for("slots")][0]?(r=H[12][Q.key][Symbol.for("slots")][0],i=H[12][Q.key]):r=H[12][Q.key][Symbol.for("children")][0]}let pt=()=>{(typeof Ve>"u"||Ve.indexOf("x")===-1)&&H[11][Q.key].set("x",Q.item.x)};y(pt,null),i[Symbol.for("effects")].push(pt),H[12][Q.key][Symbol.for("props")].x=Q.item.x}};y(()=>{q(i.collection3,s,ue)},"collection3"),y(()=>{i.alpha;for(let Ce=0;Ce<i.collection3.length;Ce++){const H={};H.index=Ce,H.item=i.collection3[Ce],H.key=H.item.color,(typeof skip11>"u"||skip11.indexOf("alpha")===-1)&&s[11][H.key].set("alpha",i.alpha)}}),y(()=>{i.alpha;for(let Ce=0;Ce<i.collection3.length;Ce++){const H={};H.index=Ce,H.item=i.collection3[Ce],H.key=H.item.color,s[12][H.key][Symbol.for("props")].alpha=i.alpha}}),r=s[0];const A={};s[13]=this.element({parent:r||"root"},i),A.y=520,s[13].populate(A),r=s[13];const Y=[],le=(Ce=[],H,Ee)=>{const ke=x(Ce),ce=new Set;let Xe=ke.length;for(;Xe--;)ke[Xe],ce.add(""+Xe);let be=Ee.length;for(;be--;)if(ce.has(Ee[be])===!1){const he=Ee[be];H[14][he]&&H[14][he].destroy(),delete H[14][he]}Ee.length=0;const Oe=ke.length;for(let he=0;he<Oe;he++){const Q=Object.create(i);r=H[13],Q.index=he,Q.item=ke[he],Q.key=""+he,Ee.push(Q.key),r=H[13],H[14]===void 0&&(H[14]={});const Ne={};H[14][Q.key]===void 0&&(H[14][Q.key]=this.element({parent:r||"root"},i)),Ne.w=80,Ne.h=80,Ne.x=Q.item,Ne.color="0xeab308ff",Ne.alpha=Q.alpha,H[14][Q.key].nodeId===void 0&&H[14][Q.key].populate(Ne)}};y(()=>{le(i.collection1,s,Y)},"collection1"),y(()=>{i.item;for(let Ce=0;Ce<i.collection1.length;Ce++){const H={};H.index=Ce,H.item=i.collection1[Ce],H.key=Ce,s[14][H.key].set("x",H.item)}}),y(()=>{i.alpha;for(let Ce=0;Ce<i.collection1.length;Ce++){const H={};H.index=Ce,H.item=i.collection1[Ce],H.key=Ce,s[14][H.key].set("alpha",i.alpha)}}),r=s[0];const ge={};s[15]=this.element({parent:r||"root"},i),ge.y=620,s[15].populate(ge),r=s[15];const de=[],se=(Ce=[],H,Ee)=>{const ke=x(Ce),ce=new Set;let Xe=ke.length;for(;Xe--;){const he=ke[Xe];ce.add(""+he.id)}let be=Ee.length;for(;be--;)if(ce.has(Ee[be])===!1){const he=Ee[be];H[16][he]&&H[16][he].destroy(),delete H[16][he]}Ee.length=0;const Oe=ke.length;for(let he=0;he<Oe;he++){const Q=Object.create(i);r=H[15],Q.index=he,Q.item=ke[he],Q.key=""+Q.item.id,Ee.push(Q.key),r=H[15],H[16]===void 0&&(H[16]={});const Ne={};H[16][Q.key]===void 0&&(H[16][Q.key]=this.element({parent:r||"root"},i)),Ne.w=80,Ne.h=80,Ne.x=Q.item.x,Ne.color=Q.item.color,Ne.alpha=Q.alpha,H[16][Q.key].nodeId===void 0&&H[16][Q.key].populate(Ne);let Pe=()=>{H[16][Q.key].set("x",Q.item.x)};y(Pe,null),i[Symbol.for("effects")].push(Pe)}};y(()=>{se(i.collection2,s,de)},"collection2"),y(()=>{i.alpha;for(let Ce=0;Ce<i.collection2.length;Ce++){const H={};H.index=Ce,H.item=i.collection2[Ce],H.key=H.item.id,s[16][H.key].set("alpha",i.alpha)}}),r=s[0];const re={};s[17]=this.element({parent:r||"root"},i),re.y=720,s[17].populate(re),r=s[17];const oe=[],Re=(Ce=[],H,Ee)=>{const ke=x(Ce),ce=new Set;let Xe=ke.length;for(;Xe--;){const he=ke[Xe];ce.add(""+he.id)}let be=Ee.length;for(;be--;)if(ce.has(Ee[be])===!1){const he=Ee[be];H[18][he]&&H[18][he].destroy(),delete H[18][he]}Ee.length=0;const Oe=ke.length;for(let he=0;he<Oe;he++){const Q=Object.create(i);r=H[17],Q.index=he,Q.item=ke[he],Q.key=""+Q.item.id,Ee.push(Q.key),r=H[17],H[18]===void 0&&(H[18]={});const Ne={};H[18][Q.key]===void 0&&(H[18][Q.key]=this.element({parent:r||"root"},i)),Ne.w=80,Ne.h=80,Ne.x=Q.item.x,Ne.color="0x06b6d4ff",H[18][Q.key].nodeId===void 0&&H[18][Q.key].populate(Ne);let Pe=()=>{H[18][Q.key].set("x",Q.item.x)};y(Pe,null),i[Symbol.for("effects")].push(Pe)}};y(()=>{Re(i.collection4,s,oe)},"collection4"),r=s[0];const Ae={};s[19]=this.element({parent:r||"root"},i),Ae.y=720,Ae.x=700,s[19].populate(Ae),r=s[19];const Ie=[],_e=(Ce=[],H,Ee)=>{const ke=x(Ce),ce=new Set;let Xe=ke.length;for(;Xe--;)ke[Xe],ce.add(""+Xe);let be=Ee.length;for(;be--;)if(ce.has(Ee[be])===!1){const he=Ee[be];H[20][he]&&H[20][he].destroy(),delete H[20][he]}Ee.length=0;const Oe=ke.length;for(let he=0;he<Oe;he++){const Q=Object.create(i);r=H[19],Q.index=he,Q.item=ke[he],Q.key=""+he,Ee.push(Q.key),r=H[19],H[20]===void 0&&(H[20]={});const Ne={};H[20][Q.key]===void 0&&(H[20][Q.key]=this.element({parent:r||"root"},i)),Ne.w=80,Ne.h=80,Ne.x=Q.item.x,Ne.color="0x8b5cf6ff",H[20][Q.key].nodeId===void 0&&H[20][Q.key].populate(Ne);let Pe=()=>{H[20][Q.key].set("x",Q.item.x)};y(Pe,null),i[Symbol.for("effects")].push(Pe)}};y(()=>{_e(i.collection4,s,Ie)},"collection4"),r=s[0];const Te={};s[21]=this.element({parent:r||"root"},i),Te.y=920,s[21].populate(Te),r=s[21];const je=[],F=(Ce=[],H,Ee)=>{const ke=x(Ce),ce=new Set;let Xe=ke.length;for(;Xe--;){const he=ke[Xe];ce.add(""+he.id)}let be=Ee.length;for(;be--;)if(ce.has(Ee[be])===!1){const he=Ee[be];H[22][he]&&H[22][he].destroy(),delete H[22][he],H[23][he]&&H[23][he].destroy(),delete H[23][he]}Ee.length=0;const Oe=ke.length;for(let he=0;he<Oe;he++){const Q=Object.create(i);r=H[21],Q.index=he,Q.item=ke[he],Q.key=""+Q.item.id,Ee.push(Q.key);const Ne=f.components&&f.components.Square||d.Square;H[22]===void 0&&(H[22]={});const Pe={};H[22][Q.key]===void 0&&(H[22][Q.key]=this.element({parent:r||"root"},i)),Pe.w=80,Pe.h=80,Pe.x=Q.item.x;const Ve=[];if(typeof Ne<"u")for(let tt in Ne.config.props)delete Pe[Ne.config.props[tt]],Ve.push(Ne.config.props[tt]);H[22][Q.key].nodeId===void 0&&H[22][Q.key].populate(Pe),H[23]===void 0&&(H[23]={}),r=H[22][Q.key];const dt={};if(H[23][Q.key]===void 0){dt.w=80,dt.h=80,C=Q.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),dt.x=C,g=dt.is||"Square";let tt;if(typeof g=="string"){if(tt=f.components&&f.components[g]||d[g],!tt)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(tt=g);H[23][Q.key]=tt.call(null,{props:dt},H[22][Q.key],i),H[23][Q.key][Symbol.for("slots")][0]?(r=H[23][Q.key][Symbol.for("slots")][0],i=H[23][Q.key]):r=H[23][Q.key][Symbol.for("children")][0]}let pt=()=>{(typeof Ve>"u"||Ve.indexOf("x")===-1)&&H[22][Q.key].set("x",Q.item.x)};y(pt,null),i[Symbol.for("effects")].push(pt),H[23][Q.key][Symbol.for("props")].x=Q.item.x}};y(()=>{F(i.collection4,s,je)},"collection4"),r=s[0];const Ue={};s[24]=this.element({parent:r||"root"},i),Ue.y=920,Ue.x=700,s[24].populate(Ue),r=s[24];const He=[],Ge=(Ce=[],H,Ee)=>{const ke=x(Ce),ce=new Set;let Xe=ke.length;for(;Xe--;)ke[Xe],ce.add(""+Xe);let be=Ee.length;for(;be--;)if(ce.has(Ee[be])===!1){const he=Ee[be];H[25][he]&&H[25][he].destroy(),delete H[25][he],H[26][he]&&H[26][he].destroy(),delete H[26][he]}Ee.length=0;const Oe=ke.length;for(let he=0;he<Oe;he++){const Q=Object.create(i);r=H[24],Q.index=he,Q.item=ke[he],Q.key=""+he,Ee.push(Q.key);const Ne=f.components&&f.components.Square||d.Square;H[25]===void 0&&(H[25]={});const Pe={};H[25][Q.key]===void 0&&(H[25][Q.key]=this.element({parent:r||"root"},i)),Pe.w=80,Pe.h=80,Pe.x=Q.item.x;const Ve=[];if(typeof Ne<"u")for(let tt in Ne.config.props)delete Pe[Ne.config.props[tt]],Ve.push(Ne.config.props[tt]);H[25][Q.key].nodeId===void 0&&H[25][Q.key].populate(Pe),H[26]===void 0&&(H[26]={}),r=H[25][Q.key];const dt={};if(H[26][Q.key]===void 0){dt.w=80,dt.h=80,C=Q.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),dt.x=C,g=dt.is||"Square";let tt;if(typeof g=="string"){if(tt=f.components&&f.components[g]||d[g],!tt)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(tt=g);H[26][Q.key]=tt.call(null,{props:dt},H[25][Q.key],i),H[26][Q.key][Symbol.for("slots")][0]?(r=H[26][Q.key][Symbol.for("slots")][0],i=H[26][Q.key]):r=H[26][Q.key][Symbol.for("children")][0]}let pt=()=>{(typeof Ve>"u"||Ve.indexOf("x")===-1)&&H[25][Q.key].set("x",Q.item.x)};y(pt,null),i[Symbol.for("effects")].push(pt),H[26][Q.key][Symbol.for("props")].x=Q.item.x}};return y(()=>{Ge(i.collection4,s,He)},"collection4"),s},effects:[],context:{}},state(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:_i[0]},{id:"block2",x:100,color:_i[1]},{id:"block3",x:200,color:_i[2]},{id:"block4",x:300,color:_i[3]},{id:"block5",x:400,color:_i[4]},{id:"block6",x:500,color:_i[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=_i[5],this.collection2[1].color=_i[4],this.collection2[2].color=_i[3],this.collection2[3].color=_i[2],this.collection2[4].color=_i[1],this.collection2[5].color=_i[0]},4e3);let h=0;const r=this.$setInterval(()=>{this.collection3.push({x:h*100,color:_i[h]}),h++,h===_i.length&&clearInterval(r)},1e3);this.$setInterval(()=>{this.alpha=this.alpha===.5?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),_S=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],LS=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],PS=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],W0=h=>Math.round(Math.random()*1e3)%h;let T5=0;const Wl=()=>({id:T5++,text:`${_S[W0(_S.length)]} ${LS[W0(LS.length)]} ${PS[W0(PS.length)]}`}),E5=(h=1)=>{const r=[];for(let i=0;i<h;i++)r.push(Wl());return r},A5=at.Component("LegendItem",{code:{render:function(r,i,f,d,y,x){const s=[];let g;const C={};s[0]=this.element({parent:r||"root"},i),s[0].populate(C);const R=f.components&&f.components.Circle||d.Circle;r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.color="0xfb923cff",b.size=60;const _=[];if(typeof R<"u")for(let B in R.config.props)delete b[R.config.props[B]],_.push(R.config.props[B]);s[1].populate(b),r=s[1];const D={};D.color="0xfb923cff",D.size=60,g=D.is||"Circle";let w;if(typeof g=="string"){if(w=f.components&&f.components[g]||d[g],!w)throw new Error('Component "Circle" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(w=g);s[2]=w.call(null,{props:D},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0],r=s[0];const L={};s[3]=this.element({parent:r||"root"},i),L.color="0xe5e5e5ff",L.size=32,L.y=10,L.wordwrap=57,L.align="center",L.content=""+i.id,L.__textnode=!0,s[3].populate(L),r=s[0];const $={};return s[4]=this.element({parent:r||"root"},i),$.color="0xe5e5e5ff",$.x=80,$.y=14,$.size=28,$.content=""+i.text,$.__textnode=!0,s[4].populate($),s},effects:[],context:{}},props:["id","text"]}),bC=at.Component("Row",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=380,g.h=60,g.y=i.index*80,g.color="0xfff7edff",s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=10,C.h=60,C.color="0x06b6d4ff",s[1].populate(C),r=s[0];const R={};return s[2]=this.element({parent:r||"root"},i),R.content=i.text,R.x=30,R.y=15,R.font="lato",R.size=28,R.color=i.activeRow==i.index?"0x06b6d4ff":"0x1e293bff",R.__textnode=!0,s[2].populate(R),s},effects:[function(r,i,f,d,y,x){i[0].set("y",r.index*80)},function(r,i,f,d,y,x){i[2].set("content",r.text)},function(r,i,f,d,y,x){i[2].set("color",r.activeRow==r.index?"0x06b6d4ff":"0x1e293bff")}],context:{}},props:["index","text","activeRow"]}),b5=at.Component("Rows",{components:{Row:bC},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R),r=s[0];const b=[],_=(D=[],w,L)=>{const $=x(D),B=new Set;let V=$.length;for(;V--;){const ie=$[V];B.add(""+ie.id+"key2")}let W=L.length;for(;W--;)if(B.has(L[W])===!1){const ie=L[W];w[1][ie]&&w[1][ie].destroy(),delete w[1][ie],w[2][ie]&&w[2][ie].destroy(),delete w[2][ie]}L.length=0;const X=$.length;for(let ie=0;ie<X;ie++){const K=Object.create(i);r=w[0],K.index=ie,K.item=$[ie],K.key=""+K.item.id+"key2",L.push(K.key);const pe=f.components&&f.components.Row||d.Row;w[1]===void 0&&(w[1]={});const ue={};w[1][K.key]===void 0&&(w[1][K.key]=this.element({parent:r||"root"},i)),ue.activeRow=K.activeRowIndex,ue.index=K.index,ue.text=K.item.text,ue.y=50;const q=[];if(typeof pe<"u")for(let ge in pe.config.props)delete ue[pe.config.props[ge]],q.push(pe.config.props[ge]);w[1][K.key].nodeId===void 0&&w[1][K.key].populate(ue),w[2]===void 0&&(w[2]={}),r=w[1][K.key];const A={};if(w[2][K.key]===void 0){C=K.activeRowIndex,Array.isArray(C)===!0&&(C=x(C).slice(0)),A.activeRow=C,C=K.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),A.index=C,C=K.item.text,Array.isArray(C)===!0&&(C=x(C).slice(0)),A.text=C,A.y=50,g=A.is||"Row";let ge;if(typeof g=="string"){if(ge=f.components&&f.components[g]||d[g],!ge)throw new Error('Component "Row" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(ge=g);w[2][K.key]=ge.call(null,{props:A},w[1][K.key],i),w[2][K.key][Symbol.for("slots")][0]?(r=w[2][K.key][Symbol.for("slots")][0],i=w[2][K.key]):r=w[2][K.key][Symbol.for("children")][0]}let Y=()=>{(typeof q>"u"||q.indexOf("index")===-1)&&w[1][K.key].set("index",K.index)};y(Y,null),i[Symbol.for("effects")].push(Y);let le=()=>{(typeof q>"u"||q.indexOf("text")===-1)&&w[1][K.key].set("text",K.item.text)};y(le,null),i[Symbol.for("effects")].push(le),w[2][K.key][Symbol.for("props")].index=K.index,w[2][K.key][Symbol.for("props")].text=K.item.text}};return y(()=>{_(i.data,s,b)},"data"),y(()=>{i.activeRowIndex;for(let D=0;D<i.data.length;D++){const w={};w.index=D,w.item=i.data[D],w.key=w.item.id+"key2",(typeof skip1>"u"||skip1.indexOf("activeRow")===-1)&&s[1][w.key].set("activeRow",i.activeRowIndex)}}),y(()=>{i.activeRowIndex;for(let D=0;D<i.data.length;D++){const w={};w.index=D,w.item=i.data[D],w.key=w.item.id+"key2",s[2][w.key][Symbol.for("props")].activeRow=i.activeRowIndex}}),s},effects:[],context:{}},props:["data","activeRowIndex"]}),k5=at.Component("ForLoop",{components:{Square:ma,LegendItem:A5,Row:bC,Rows:b5},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R),r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.x=100,b.y=60,b.size=48,b.content="Array operations test",b.__textnode=!0,s[1].populate(b),r=s[0];const _={};s[2]=this.element({parent:r||"root"},i),_.y=170,_.x=140,s[2].populate(_),r=s[2];const D={};s[3]=this.element({parent:r||"root"},i),D.x=-10,D.w=500,D.h=80,D.color="0x64748bff",D.y={transition:i.y},D.alpha={transition:!i.hide},s[3].populate(D);const w=f.components&&f.components.LegendItem||d.LegendItem;r=s[2];const L={};s[4]=this.element({parent:r||"root"},i),L.y=0,L.id="a",L.text="Fill array by assignment";const $=[];if(typeof w<"u")for(let lt in w.config.props)delete L[w.config.props[lt]],$.push(w.config.props[lt]);s[4].populate(L),r=s[4];const B={};B.y=0,B.id="a",B.text="Fill array by assignment",g=B.is||"LegendItem";let V;if(typeof g=="string"){if(V=f.components&&f.components[g]||d[g],!V)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(V=g);s[5]=V.call(null,{props:B},s[4],i),s[5][Symbol.for("slots")][0]?(r=s[5][Symbol.for("slots")][0],i=s[5]):r=s[5][Symbol.for("children")][0];const W=f.components&&f.components.LegendItem||d.LegendItem;r=s[2];const X={};s[6]=this.element({parent:r||"root"},i),X.y=90,X.id="b",X.text="Push new item to array";const ie=[];if(typeof W<"u")for(let lt in W.config.props)delete X[W.config.props[lt]],ie.push(W.config.props[lt]);s[6].populate(X),r=s[6];const K={};K.y=90,K.id="b",K.text="Push new item to array",g=K.is||"LegendItem";let pe;if(typeof g=="string"){if(pe=f.components&&f.components[g]||d[g],!pe)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(pe=g);s[7]=pe.call(null,{props:K},s[6],i),s[7][Symbol.for("slots")][0]?(r=s[7][Symbol.for("slots")][0],i=s[7]):r=s[7][Symbol.for("children")][0];const ue=f.components&&f.components.LegendItem||d.LegendItem;r=s[2];const q={};s[8]=this.element({parent:r||"root"},i),q.y=180,q.id="c",q.text="Pop item from array";const A=[];if(typeof ue<"u")for(let lt in ue.config.props)delete q[ue.config.props[lt]],A.push(ue.config.props[lt]);s[8].populate(q),r=s[8];const Y={};Y.y=180,Y.id="c",Y.text="Pop item from array",g=Y.is||"LegendItem";let le;if(typeof g=="string"){if(le=f.components&&f.components[g]||d[g],!le)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(le=g);s[9]=le.call(null,{props:Y},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],i=s[9]):r=s[9][Symbol.for("children")][0];const ge=f.components&&f.components.LegendItem||d.LegendItem;r=s[2];const de={};s[10]=this.element({parent:r||"root"},i),de.y=270,de.id="d",de.text="Shift item from array";const se=[];if(typeof ge<"u")for(let lt in ge.config.props)delete de[ge.config.props[lt]],se.push(ge.config.props[lt]);s[10].populate(de),r=s[10];const re={};re.y=270,re.id="d",re.text="Shift item from array",g=re.is||"LegendItem";let oe;if(typeof g=="string"){if(oe=f.components&&f.components[g]||d[g],!oe)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(oe=g);s[11]=oe.call(null,{props:re},s[10],i),s[11][Symbol.for("slots")][0]?(r=s[11][Symbol.for("slots")][0],i=s[11]):r=s[11][Symbol.for("children")][0];const Re=f.components&&f.components.LegendItem||d.LegendItem;r=s[2];const Ae={};s[12]=this.element({parent:r||"root"},i),Ae.y=360,Ae.id="e",Ae.text="Splice 2 items from array";const Ie=[];if(typeof Re<"u")for(let lt in Re.config.props)delete Ae[Re.config.props[lt]],Ie.push(Re.config.props[lt]);s[12].populate(Ae),r=s[12];const _e={};_e.y=360,_e.id="e",_e.text="Splice 2 items from array",g=_e.is||"LegendItem";let Te;if(typeof g=="string"){if(Te=f.components&&f.components[g]||d[g],!Te)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Te=g);s[13]=Te.call(null,{props:_e},s[12],i),s[13][Symbol.for("slots")][0]?(r=s[13][Symbol.for("slots")][0],i=s[13]):r=s[13][Symbol.for("children")][0];const je=f.components&&f.components.LegendItem||d.LegendItem;r=s[2];const F={};s[14]=this.element({parent:r||"root"},i),F.y=450,F.id="f",F.text="Unshift 2 items into array";const Ue=[];if(typeof je<"u")for(let lt in je.config.props)delete F[je.config.props[lt]],Ue.push(je.config.props[lt]);s[14].populate(F),r=s[14];const He={};He.y=450,He.id="f",He.text="Unshift 2 items into array",g=He.is||"LegendItem";let Ge;if(typeof g=="string"){if(Ge=f.components&&f.components[g]||d[g],!Ge)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ge=g);s[15]=Ge.call(null,{props:He},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],i=s[15]):r=s[15][Symbol.for("children")][0];const Ce=f.components&&f.components.LegendItem||d.LegendItem;r=s[2];const H={};s[16]=this.element({parent:r||"root"},i),H.y=540,H.id="g",H.text="Empty array by assignment";const Ee=[];if(typeof Ce<"u")for(let lt in Ce.config.props)delete H[Ce.config.props[lt]],Ee.push(Ce.config.props[lt]);s[16].populate(H),r=s[16];const ke={};ke.y=540,ke.id="g",ke.text="Empty array by assignment",g=ke.is||"LegendItem";let ce;if(typeof g=="string"){if(ce=f.components&&f.components[g]||d[g],!ce)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(ce=g);s[17]=ce.call(null,{props:ke},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],i=s[17]):r=s[17][Symbol.for("children")][0];const Xe=f.components&&f.components.LegendItem||d.LegendItem;r=s[2];const be={};s[18]=this.element({parent:r||"root"},i),be.y=630,be.id="h",be.text="Concat an array with items";const Oe=[];if(typeof Xe<"u")for(let lt in Xe.config.props)delete be[Xe.config.props[lt]],Oe.push(Xe.config.props[lt]);s[18].populate(be),r=s[18];const he={};he.y=630,he.id="h",he.text="Concat an array with items",g=he.is||"LegendItem";let Q;if(typeof g=="string"){if(Q=f.components&&f.components[g]||d[g],!Q)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Q=g);s[19]=Q.call(null,{props:he},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],i=s[19]):r=s[19][Symbol.for("children")][0];const Ne=f.components&&f.components.LegendItem||d.LegendItem;r=s[2];const Pe={};s[20]=this.element({parent:r||"root"},i),Pe.y=720,Pe.id="i",Pe.text="Sort array alphabetically";const Ve=[];if(typeof Ne<"u")for(let lt in Ne.config.props)delete Pe[Ne.config.props[lt]],Ve.push(Ne.config.props[lt]);s[20].populate(Pe),r=s[20];const dt={};dt.y=720,dt.id="i",dt.text="Sort array alphabetically",g=dt.is||"LegendItem";let pt;if(typeof g=="string"){if(pt=f.components&&f.components[g]||d[g],!pt)throw new Error('Component "LegendItem" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(pt=g);s[21]=pt.call(null,{props:dt},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],i=s[21]):r=s[21][Symbol.for("children")][0],r=s[2];const tt={};s[22]=this.element({parent:r||"root"},i),tt.y=840,s[22].populate(tt),r=s[22];const bt={};s[23]=this.element({parent:r||"root"},i),bt.size=26,bt.y=10,bt.content="Array length:",bt.__textnode=!0,s[23].populate(bt),r=s[22];const ut={};s[24]=this.element({parent:r||"root"},i),ut.content=i.data.length,ut.size=40,ut.x=180,ut.color="0xfb923cff",ut.__textnode=!0,s[24].populate(ut),r=s[0];const vt={};s[25]=this.element({parent:r||"root"},i),vt.x=660,vt.y=100,s[25].populate(vt),r=s[25];const ct={};s[26]=this.element({parent:r||"root"},i),ct.content="For loop on Element",ct.__textnode=!0,s[26].populate(ct),r=s[25];const Bn=[],oi=(lt=[],$e,Zt)=>{const cn=x(lt),hn=new Set;let Ze=cn.length;for(;Ze--;){const Dt=cn[Ze];hn.add(""+Dt.id+"key")}let si=Zt.length;for(;si--;)if(hn.has(Zt[si])===!1){const Dt=Zt[si];$e[27][Dt]&&$e[27][Dt].destroy(),delete $e[27][Dt],$e[28][Dt]&&$e[28][Dt].destroy(),delete $e[28][Dt],$e[29][Dt]&&$e[29][Dt].destroy(),delete $e[29][Dt]}Zt.length=0;const Tn=cn.length;for(let Dt=0;Dt<Tn;Dt++){const qe=Object.create(i);r=$e[25],qe.index=Dt,qe.item=cn[Dt],qe.key=""+qe.item.id+"key",Zt.push(qe.key),r=$e[25],$e[27]===void 0&&($e[27]={});const sn={};$e[27][qe.key]===void 0&&($e[27][qe.key]=this.element({parent:r||"root"},i)),sn.w=380,sn.h=60,sn.y=qe.index*80+50,sn.color="0xfff7edff",$e[27][qe.key].nodeId===void 0&&$e[27][qe.key].populate(sn),r=$e[27][qe.key],$e[28]===void 0&&($e[28]={});const an={};$e[28][qe.key]===void 0&&($e[28][qe.key]=this.element({parent:r||"root"},i)),an.w=10,an.h=60,an.color="0xfb923cff",$e[28][qe.key].nodeId===void 0&&$e[28][qe.key].populate(an),r=$e[27][qe.key],$e[29]===void 0&&($e[29]={});const dn={};$e[29][qe.key]===void 0&&($e[29][qe.key]=this.element({parent:r||"root"},i)),dn.content=qe.item.text,dn.x=30,dn.y=15,dn.font="lato",dn.size=28,dn.color=qe.activeRowIndex===qe.index?"0x06b6d4ff":"0x1e293bff",dn.__textnode=!0,$e[29][qe.key].nodeId===void 0&&$e[29][qe.key].populate(dn);let bn=()=>{$e[27][qe.key].set("y",qe.index*80+50)};y(bn,null),i[Symbol.for("effects")].push(bn);let nn=()=>{$e[29][qe.key].set("content",qe.item.text)};y(nn,null),i[Symbol.for("effects")].push(nn)}};y(()=>{oi(i.data,s,Bn)},"data"),y(()=>{i.activeRowIndex;for(let lt=0;lt<i.data.length;lt++){const $e={};$e.index=lt,$e.item=i.data[lt],$e.key=$e.item.id+"key",s[29][$e.key].set("color",i.activeRowIndex===$e.index?"0x06b6d4ff":"0x1e293bff")}}),r=s[0];const ft={};s[30]=this.element({parent:r||"root"},i),ft.x=1080,ft.y=100,s[30].populate(ft),r=s[30];const Me={};s[31]=this.element({parent:r||"root"},i),Me.content="For loop on Component",Me.__textnode=!0,s[31].populate(Me),r=s[30];const kt=[],tn=(lt=[],$e,Zt)=>{const cn=x(lt),hn=new Set;let Ze=cn.length;for(;Ze--;){const Dt=cn[Ze];hn.add(""+Dt.id+"key2")}let si=Zt.length;for(;si--;)if(hn.has(Zt[si])===!1){const Dt=Zt[si];$e[32][Dt]&&$e[32][Dt].destroy(),delete $e[32][Dt],$e[33][Dt]&&$e[33][Dt].destroy(),delete $e[33][Dt]}Zt.length=0;const Tn=cn.length;for(let Dt=0;Dt<Tn;Dt++){const qe=Object.create(i);r=$e[30],qe.index=Dt,qe.item=cn[Dt],qe.key=""+qe.item.id+"key2",Zt.push(qe.key);const sn=f.components&&f.components.Row||d.Row;$e[32]===void 0&&($e[32]={});const an={};$e[32][qe.key]===void 0&&($e[32][qe.key]=this.element({parent:r||"root"},i)),an.activeRow=(qe.count>0,qe.activeRowIndex),an.index=qe.index,an.text=qe.item.text,an.y=50;const dn=[];if(typeof sn<"u")for(let Pn in sn.config.props)delete an[sn.config.props[Pn]],dn.push(sn.config.props[Pn]);$e[32][qe.key].nodeId===void 0&&$e[32][qe.key].populate(an),$e[33]===void 0&&($e[33]={}),r=$e[32][qe.key];const bn={};if($e[33][qe.key]===void 0){C=(qe.count>0,qe.activeRowIndex),Array.isArray(C)===!0&&(C=x(C).slice(0)),bn.activeRow=C,C=qe.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),bn.index=C,C=qe.item.text,Array.isArray(C)===!0&&(C=x(C).slice(0)),bn.text=C,bn.y=50,g=bn.is||"Row";let Pn;if(typeof g=="string"){if(Pn=f.components&&f.components[g]||d[g],!Pn)throw new Error('Component "Row" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Pn=g);$e[33][qe.key]=Pn.call(null,{props:bn},$e[32][qe.key],i),$e[33][qe.key][Symbol.for("slots")][0]?(r=$e[33][qe.key][Symbol.for("slots")][0],i=$e[33][qe.key]):r=$e[33][qe.key][Symbol.for("children")][0]}let nn=()=>{(typeof dn>"u"||dn.indexOf("index")===-1)&&$e[32][qe.key].set("index",qe.index)};y(nn,null),i[Symbol.for("effects")].push(nn);let xr=()=>{(typeof dn>"u"||dn.indexOf("text")===-1)&&$e[32][qe.key].set("text",qe.item.text)};y(xr,null),i[Symbol.for("effects")].push(xr),$e[33][qe.key][Symbol.for("props")].index=qe.index,$e[33][qe.key][Symbol.for("props")].text=qe.item.text}};y(()=>{tn(i.data,s,kt)},"data"),y(()=>{i.activeRowIndex,i.count;for(let lt=0;lt<i.data.length;lt++){const $e={};$e.index=lt,$e.item=i.data[lt],$e.key=$e.item.id+"key2",(typeof skip32>"u"||skip32.indexOf("activeRow")===-1)&&s[32][$e.key].set("activeRow",(i.count>0,i.activeRowIndex))}}),y(()=>{i.activeRowIndex,i.count;for(let lt=0;lt<i.data.length;lt++){const $e={};$e.index=lt,$e.item=i.data[lt],$e.key=$e.item.id+"key2",s[33][$e.key][Symbol.for("props")].activeRow=(i.count>0,i.activeRowIndex)}}),r=s[0];const qn={};s[34]=this.element({parent:r||"root"},i),qn.x=1500,qn.y=100,s[34].populate(qn),r=s[34];const vn={};s[35]=this.element({parent:r||"root"},i),vn.content="RowsComponent",vn.__textnode=!0,s[35].populate(vn);const Ct=f.components&&f.components.Rows||d.Rows;r=s[34];const ri={};s[36]=this.element({parent:r||"root"},i),ri.data=i.data,ri.activeRowIndex=i.activeRowIndex;const At=[];if(typeof Ct<"u")for(let lt in Ct.config.props)delete ri[Ct.config.props[lt]],At.push(Ct.config.props[lt]);s[36].populate(ri),r=s[36];const ht={};C=i.data,Array.isArray(C)===!0&&(C=x(C).slice(0)),ht.data=C,C=i.activeRowIndex,Array.isArray(C)===!0&&(C=x(C).slice(0)),ht.activeRowIndex=C,g=ht.is||"Rows";let en;if(typeof g=="string"){if(en=f.components&&f.components[g]||d[g],!en)throw new Error('Component "Rows" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(en=g);return s[37]=en.call(null,{props:ht},s[36],i),s[37][Symbol.for("slots")][0]?(r=s[37][Symbol.for("slots")][0],i=s[37]):r=s[37][Symbol.for("children")][0],s},effects:[function(r,i,f,d,y,x){i[3].set("y",{transition:r.y})},function(r,i,f,d,y,x){i[3].set("alpha",{transition:!r.hide})},function(r,i,f,d,y,x){i[24].set("content",r.data.length)},function(r,i,f,d,y,x){(typeof skip36>"u"||skip36.indexOf("data")===-1)&&i[36].set("data",r.data)},function(r,i,f,d,y,x){(typeof skip36>"u"||skip36.indexOf("activeRowIndex")===-1)&&i[36].set("activeRowIndex",r.activeRowIndex)},function(r,i,f,d,y,x){i[37][Symbol.for("props")].data=r.data},function(r,i,f,d,y,x){i[37][Symbol.for("props")].activeRowIndex=r.activeRowIndex}],context:{}},state(){return{count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1,activeRowIndex:0}},computed:{show(){return this.hide===!0},data2(){return this.data}},watch:{y(){this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(()=>{this.hide=!0},600)}},input:{a(){this.y=-10,this.$trigger("y");const h=[];for(let r=0;r<6;r++)h.push(Wl());this.data=h},b(){this.y=80,this.$trigger("y"),this.data.push(Wl())},c(){this.y=170,this.$trigger("y"),this.data.pop()},d(){this.y=260,this.$trigger("y"),this.data.shift()},e(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f(){this.y=440,this.data.unshift(Wl(),Wl())},g(){this.y=530,this.$trigger("y"),this.data=[]},h(){this.y=620,this.$trigger("y"),this.data=this.data.concat(E5(3))},i(){this.y=710,this.$trigger("y"),this.sortDirection=this.sortDirection===1?0:1,this.data=this.data.sort((h,r)=>{const i=h.text.toLowerCase(),f=r.text.toLowerCase();return this.sortDirection===1?i<f?-1:i>f?1:0:i>f?-1:i<f?1:0})},up(){this.activeRowIndex>0&&(this.activeRowIndex-=1)},down(){this.activeRowIndex<this.data.length-1&&(this.activeRowIndex+=1)}}}),I5=at.Component("Effects",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=160,C.h=160,C.x=40,C.y=40,C.color="0xfb923cff",C.effects=[i.shader("radius",{radius:44})],s[1].populate(C),r=s[0];const R={};s[2]=this.element({parent:r||"root"},i),R.w=160,R.h=160,R.x=240,R.y=40,R.color="0xd97706ff",R.effects=[i.shader("radius",{radius:25})],s[2].populate(R),r=s[0];const b={};s[3]=this.element({parent:r||"root"},i),b.w=160,b.h=160,b.x=440,b.y=40,b.color="0xb45309ff",b.effects=[i.shader("radius",{radius:80})],s[3].populate(b),r=s[0];const _={};s[4]=this.element({parent:r||"root"},i),_.w=160,_.h=160,_.x=640,_.y=40,_.color="0x78350fff",_.effects=[i.shader("radius",{radius:10})],s[4].populate(_),r=s[0];const D={};s[5]=this.element({parent:r||"root"},i),D.w=160,D.h=160,D.x=40,D.y=240,D.color="0x65a30dff",D.effects=[i.shader("radius",{radius:i.radius})],s[5].populate(D),r=s[0];const w={};s[6]=this.element({parent:r||"root"},i),w.w=300,w.h=300,w.x=40,w.y=440,w.color="0x0c4a6eff",w.effects=[i.shader("radius",{radius:30})],s[6].populate(w),r=s[6];const L={};s[7]=this.element({parent:r||"root"},i),L.w=200,L.h=200,L.x=50,L.y=50,L.color="0x0284c7ff",L.effects=[i.shader("radius",{radius:40})],s[7].populate(L),r=s[7];const $={};s[8]=this.element({parent:r||"root"},i),$.w=100,$.h=100,$.x=50,$.y=50,$.color="0x38bdf8ff",$.effects=[i.shader("radius",{radius:50})],s[8].populate($),r=s[8];const B={};s[9]=this.element({parent:r||"root"},i),B.w=40,B.h=40,B.x=30,B.y=30,B.color="0xbae6fdff",B.effects=[i.shader("radius",{radius:20})],s[9].populate(B),r=s[0];const V={};s[10]=this.element({parent:r||"root"},i),V.w=160,V.h=160,V.x=840,V.y=40,V.color="0x3b82f6ff",V.effects=[i.shader("radius",{radius:10}),i.shader("border",{width:20,color:"0x60a5faff"})],s[10].populate(V),r=s[0];const W={};return s[11]=this.element({parent:r||"root"},i),W.w=160,W.h=160,W.x=1040,W.y=40,W.color="0x500724ff",W.effects=i.effects,s[11].populate(W),s},effects:[function(r,i,f,d,y,x){i[1].set("effects",[r.shader("radius",{radius:44})])},function(r,i,f,d,y,x){i[2].set("effects",[r.shader("radius",{radius:25})])},function(r,i,f,d,y,x){i[3].set("effects",[r.shader("radius",{radius:80})])},function(r,i,f,d,y,x){i[4].set("effects",[r.shader("radius",{radius:10})])},function(r,i,f,d,y,x){i[5].set("effects",[r.shader("radius",{radius:r.radius})])},function(r,i,f,d,y,x){i[6].set("effects",[r.shader("radius",{radius:30})])},function(r,i,f,d,y,x){i[7].set("effects",[r.shader("radius",{radius:40})])},function(r,i,f,d,y,x){i[8].set("effects",[r.shader("radius",{radius:50})])},function(r,i,f,d,y,x){i[9].set("effects",[r.shader("radius",{radius:20})])},function(r,i,f,d,y,x){i[10].set("effects",[r.shader("radius",{radius:10}),r.shader("border",{width:20,color:"0x60a5faff"})])},function(r,i,f,d,y,x){i[11].set("effects",r.effects)}],context:{}},state(){return{direction:"up",radius:0,effects:[this.shader("borderTop",{width:20,color:"#be123c"}),this.shader("borderBottom",{width:20,color:"#f43f5e"})]}},hooks:{ready(){this.$setInterval(()=>{const r=this.direction==="up"?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(r,80),0),this.radius===80&&(this.direction="down"),this.radius===0&&(this.direction="up")},500);let h=0;this.$setInterval(()=>{h++,h%2?this.effects=[this.shader("borderLeft",{width:20,color:"#be123c"}),this.shader("borderRight",{width:20,color:"#f43f5e"})]:this.effects=[this.shader("borderTop",{width:20,color:"#be123c"}),this.shader("borderBottom",{width:20,color:"#f43f5e"})]},2e3)}}}),M5=at.Component("ShowIf",{components:{Square:ma},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R),r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.y=40,s[1].populate(b),r=s[1];const _={};s[2]=this.element({parent:r||"root"},i),_.x=50,_.w=200,_.h=300,_.color="0xbef264ff",_.show=!0,s[2].populate(_),r=s[1];const D={};s[3]=this.element({parent:r||"root"},i),D.x=350,D.w=200,D.h=300,D.color="0xff0000ff",D.show=!1,s[3].populate(D),r=s[1];const w={};s[4]=this.element({parent:r||"root"},i),w.x=650,w.w=200,w.h=300,w.color="0x84cc16ff",w.show=1,s[4].populate(w),r=s[1];const L={};s[5]=this.element({parent:r||"root"},i),L.x=950,L.w=200,L.h=300,L.color="0xff0000ff",L.show=0,s[5].populate(L),r=s[0];const $={};s[6]=this.element({parent:r||"root"},i),$.y=380,s[6].populate($),r=s[6];const B={};s[7]=this.element({parent:r||"root"},i),B.x=50,B.w=200,B.h=300,B.color="0xfde047ff",B.show=i.showNr,s[7].populate(B),r=s[6];const V={};s[8]=this.element({parent:r||"root"},i),V.x=350,V.w=200,V.h=300,V.color="0x0000ffff",V.show=i.hideNr,s[8].populate(V),r=s[6];const W={};s[9]=this.element({parent:r||"root"},i),W.x=650,W.w=200,W.h=300,W.color="0x84cc16ff",W.show=i.showBool,s[9].populate(W),r=s[6];const X={};s[10]=this.element({parent:r||"root"},i),X.x=950,X.w=200,X.h=300,X.color="0xff0000ff",X.show=i.hideBool,s[10].populate(X),r=s[0];const ie={};s[11]=this.element({parent:r||"root"},i),ie.y=720,s[11].populate(ie),r=s[11];const K={};s[12]=this.element({parent:r||"root"},i),K.x=50,K.w=200,K.h=300,K.color="0x5eead4ff",K.show=i.showHideToggle,s[12].populate(K),r=s[0];const pe={};s[13]=this.element({parent:r||"root"},i),pe.y=40,pe.x=1e3,s[13].populate(pe);const ue=f.components&&f.components.Square||d.Square;r=s[13];const q={};s[14]=this.element({parent:r||"root"},i),q.show=!0;const A=[];if(typeof ue<"u")for(let je in ue.config.props)delete q[ue.config.props[je]],A.push(ue.config.props[je]);s[14].populate(q),r=s[14];const Y={};Y.show=!0,g=Y.is||"Square";let le;if(typeof g=="string"){if(le=f.components&&f.components[g]||d[g],!le)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(le=g);s[15]=le.call(null,{props:Y},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],i=s[15]):r=s[15][Symbol.for("children")][0];const ge=f.components&&f.components.Square||d.Square;r=s[13];const de={};s[16]=this.element({parent:r||"root"},i),de.y=100,de.show=!1;const se=[];if(typeof ge<"u")for(let je in ge.config.props)delete de[ge.config.props[je]],se.push(ge.config.props[je]);s[16].populate(de),r=s[16];const re={};re.y=100,re.show=!1,g=re.is||"Square";let oe;if(typeof g=="string"){if(oe=f.components&&f.components[g]||d[g],!oe)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(oe=g);s[17]=oe.call(null,{props:re},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],i=s[17]):r=s[17][Symbol.for("children")][0];const Re=f.components&&f.components.Square||d.Square;r=s[13];const Ae={};s[18]=this.element({parent:r||"root"},i),Ae.y=200,Ae.show=i.showHideToggle;const Ie=[];if(typeof Re<"u")for(let je in Re.config.props)delete Ae[Re.config.props[je]],Ie.push(Re.config.props[je]);s[18].populate(Ae),r=s[18];const _e={};_e.y=200,C=i.showHideToggle,Array.isArray(C)===!0&&(C=x(C).slice(0)),_e.show=C,g=_e.is||"Square";let Te;if(typeof g=="string"){if(Te=f.components&&f.components[g]||d[g],!Te)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Te=g);return s[19]=Te.call(null,{props:_e},s[18],i),s[19][Symbol.for("slots")][0]?(r=s[19][Symbol.for("slots")][0],i=s[19]):r=s[19][Symbol.for("children")][0],s},effects:[function(r,i,f,d,y,x){i[12].set("show",r.showHideToggle)},function(r,i,f,d,y,x){(typeof skip18>"u"||skip18.indexOf("show")===-1)&&i[18].set("show",r.showHideToggle)},function(r,i,f,d,y,x){i[19][Symbol.for("props")].show=r.showHideToggle}],context:{}},state(){return{showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready(){this.$setInterval(()=>{console.log("backstopjs:ready"),this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),R5=at.Component("Events",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.x=400,g.y=360,s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.w=280,C.h=280,C.color="0xe5e7ebff",C.x=i.x,C.y=-5,s[1].populate(C),r=s[0];const R={};s[2]=this.element({parent:r||"root"},i),R.w=250,R.h=250,R.x=10,R.y=10,R.color=i.colors[0],s[2].populate(R),r=s[0];const b={};s[3]=this.element({parent:r||"root"},i),b.w=250,b.h=250,b.x=290,b.y=10,b.color=i.colors[1],s[3].populate(b),r=s[0];const _={};s[4]=this.element({parent:r||"root"},i),_.w=250,_.h=250,_.x=570,_.y=10,_.color=i.colors[2],s[4].populate(_),r=s[0];const D={};return s[5]=this.element({parent:r||"root"},i),D.w=250,D.h=250,D.x=850,D.y=10,D.color=i.colors[3],s[5].populate(D),s},effects:[function(r,i,f,d,y,x){i[1].set("x",r.x)}],context:{}},state(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x(){return this.count*280-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(h){const r=this.count-1;r===-1?this.parent.$focus(h):this.count=Math.max(r,0)},right(h){const r=this.count+1;r===4?this.parent.$focus(h):this.count=Math.min(r,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),_5=at.Component("SlotCard",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=300,g.h=500,g.effects=[i.shader("radius",{radius:20}),i.shader("border",{width:6,color:"0xe2e8f0ff"})],g.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C[Symbol.for("isSlot")]=!0,C.x=20,C.y=20,s[1].populate(C),r=s[0];const R={};return s[2]=this.element({parent:r||"root"},i),R.content=i.label,R.wordwrap=260,R.x=20,R.y=400,R.align="center",R.__textnode=!0,s[2].populate(R),s},effects:[function(r,i,f,d,y,x){i[0].set("effects",[r.shader("radius",{radius:20}),r.shader("border",{width:6,color:"0xe2e8f0ff"})])}],context:{}},props:[{key:"label"}]}),L5=at.Component("NamedSlotCard",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=700,g.h=300,g.effects=[i.shader("radius",{radius:20}),i.shader("border",{width:6,color:"0xe2e8f0ff"})],g.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.x=20,C.y=20,s[1].populate(C),r=s[1];const R={};s[2]=this.element({parent:r||"root"},i),R.content="First slot",R.__textnode=!0,s[2].populate(R),r=s[1];const b={};s[3]=this.element({parent:r||"root"},i),b[Symbol.for("isSlot")]=!0,b.y=40,b.ref="first",s[3].populate(b),r=s[0];const _={};s[4]=this.element({parent:r||"root"},i),_.x=200,_.y=20,s[4].populate(_),r=s[4];const D={};s[5]=this.element({parent:r||"root"},i),D.content="Second slot",D.__textnode=!0,s[5].populate(D),r=s[4];const w={};s[6]=this.element({parent:r||"root"},i),w[Symbol.for("isSlot")]=!0,w.y=40,w.ref="second",s[6].populate(w),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.x=480,L.y=20,s[7].populate(L),r=s[7];const $={};s[8]=this.element({parent:r||"root"},i),$.content="Third slot",$.__textnode=!0,s[8].populate($),r=s[7];const B={};return s[9]=this.element({parent:r||"root"},i),B[Symbol.for("isSlot")]=!0,B.y=40,B.ref="third",s[9].populate(B),s},effects:[function(r,i,f,d,y,x){i[0].set("effects",[r.shader("radius",{radius:20}),r.shader("border",{width:6,color:"0xe2e8f0ff"})])}],context:{}}}),$l=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],P5=at.Component("Components",{components:{SlotCard:_5,NamedSlotCard:L5,Card:AC,Square:ma},code:{render:function(r,i,f,d,y,x){const s=[];let g;const C={};s[0]=this.element({parent:r||"root"},i),s[0].populate(C);const R=f.components&&f.components.SlotCard||d.SlotCard;r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.x=400,b.y=100,b.label="Element";const _=[];if(typeof R<"u")for(let ut in R.config.props)delete b[R.config.props[ut]],_.push(R.config.props[ut]);s[1].populate(b),r=s[1];const D={};D.x=400,D.y=100,D.label="Element",g=D.is||"SlotCard";let w;if(typeof g=="string"){if(w=f.components&&f.components[g]||d[g],!w)throw new Error('Component "SlotCard" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(w=g);s[2]=w.call(null,{props:D},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0];const L={};s[3]=this.element({parent:r||"root"},i),s[3].populate(L),r=s[3];const $={};s[4]=this.element({parent:r||"root"},i),$.color=i.color,$.w=100,$.h=100,s[4].populate($);const B=f.components&&f.components.SlotCard||d.SlotCard;r=s[0];const V={};s[5]=this.element({parent:r||"root"},i),V.x=800,V.y=100,V.label="Component";const W=[];if(typeof B<"u")for(let ut in B.config.props)delete V[B.config.props[ut]],W.push(B.config.props[ut]);s[5].populate(V),r=s[5];const X={};X.x=800,X.y=100,X.label="Component",g=X.is||"SlotCard";let ie;if(typeof g=="string"){if(ie=f.components&&f.components[g]||d[g],!ie)throw new Error('Component "SlotCard" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(ie=g);s[6]=ie.call(null,{props:X},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],i=s[6]):r=s[6][Symbol.for("children")][0];const K={};s[7]=this.element({parent:r||"root"},i),s[7].populate(K);const pe=f.components&&f.components.Square||d.Square;r=s[7];const ue={};s[8]=this.element({parent:r||"root"},i),ue.size=200,ue.y=50;const q=[];if(typeof pe<"u")for(let ut in pe.config.props)delete ue[pe.config.props[ut]],q.push(pe.config.props[ut]);s[8].populate(ue),r=s[8];const A={};A.size=200,A.y=50,g=A.is||"Square";let Y;if(typeof g=="string"){if(Y=f.components&&f.components[g]||d[g],!Y)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Y=g);s[9]=Y.call(null,{props:A},s[8],i),s[9][Symbol.for("slots")][0]?(r=s[9][Symbol.for("slots")][0],i=s[9]):r=s[9][Symbol.for("children")][0];const le=f.components&&f.components.SlotCard||d.SlotCard;r=s[0];const ge={};s[10]=this.element({parent:r||"root"},i),ge.x=1200,ge.y=100,ge.label="Element & Component";const de=[];if(typeof le<"u")for(let ut in le.config.props)delete ge[le.config.props[ut]],de.push(le.config.props[ut]);s[10].populate(ge),r=s[10];const se={};se.x=1200,se.y=100,se.label="Element & Component",g=se.is||"SlotCard";let re;if(typeof g=="string"){if(re=f.components&&f.components[g]||d[g],!re)throw new Error('Component "SlotCard" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(re=g);s[11]=re.call(null,{props:se},s[10],i),s[11][Symbol.for("slots")][0]?(r=s[11][Symbol.for("slots")][0],i=s[11]):r=s[11][Symbol.for("children")][0];const oe={};s[12]=this.element({parent:r||"root"},i),s[12].populate(oe),r=s[12];const Re={};s[13]=this.element({parent:r||"root"},i),Re.color=i.color,Re.w=100,Re.h=100,s[13].populate(Re);const Ae=f.components&&f.components.Square||d.Square;r=s[12];const Ie={};s[14]=this.element({parent:r||"root"},i),Ie.size=200,Ie.y=150;const _e=[];if(typeof Ae<"u")for(let ut in Ae.config.props)delete Ie[Ae.config.props[ut]],_e.push(Ae.config.props[ut]);s[14].populate(Ie),r=s[14];const Te={};Te.size=200,Te.y=150,g=Te.is||"Square";let je;if(typeof g=="string"){if(je=f.components&&f.components[g]||d[g],!je)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(je=g);s[15]=je.call(null,{props:Te},s[14],i),s[15][Symbol.for("slots")][0]?(r=s[15][Symbol.for("slots")][0],i=s[15]):r=s[15][Symbol.for("children")][0];const F=f.components&&f.components.Card||d.Card;r=s[0];const Ue={};s[16]=this.element({parent:r||"root"},i),Ue.x=400,Ue.y=700,Ue.size="small";const He=[];if(typeof F<"u")for(let ut in F.config.props)delete Ue[F.config.props[ut]],He.push(F.config.props[ut]);s[16].populate(Ue),r=s[16];const Ge={};Ge.x=400,Ge.y=700,Ge.size="small",g=Ge.is||"Card";let Ce;if(typeof g=="string"){if(Ce=f.components&&f.components[g]||d[g],!Ce)throw new Error('Component "Card" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Ce=g);s[17]=Ce.call(null,{props:Ge},s[16],i),s[17][Symbol.for("slots")][0]?(r=s[17][Symbol.for("slots")][0],i=s[17]):r=s[17][Symbol.for("children")][0];const H={};s[18]=this.element({parent:r||"root"},i),s[18].populate(H),r=s[18];const Ee={};s[19]=this.element({parent:r||"root"},i),Ee.color=i.color,Ee.w=100,Ee.h=100,s[19].populate(Ee);const ke=f.components&&f.components.NamedSlotCard||d.NamedSlotCard;r=s[0];const ce={};s[20]=this.element({parent:r||"root"},i),ce.x=800,ce.y=700;const Xe=[];if(typeof ke<"u")for(let ut in ke.config.props)delete ce[ke.config.props[ut]],Xe.push(ke.config.props[ut]);s[20].populate(ce),r=s[20];const be={};be.x=800,be.y=700,g=be.is||"NamedSlotCard";let Oe;if(typeof g=="string"){if(Oe=f.components&&f.components[g]||d[g],!Oe)throw new Error('Component "NamedSlotCard" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Oe=g);s[21]=Oe.call(null,{props:be},s[20],i),s[21][Symbol.for("slots")][0]?(r=s[21][Symbol.for("slots")][0],i=s[21]):r=s[21][Symbol.for("children")][0];const he={};s[22]=this.element({parent:r||"root"},i),s[22].populate(he),r=s[22];const Q={};s[23]=this.element({parent:r||"root"},i),Q.color="0x0891b2ff",Q.x=10,Q.y=140,Q.w=80,Q.h=60,Q.parent=i[Symbol.for("slots")].filter(ut=>ut.ref==="second").shift()||r,Q.slot="second",s[23].populate(Q),r=s[22];const Ne={};s[24]=this.element({parent:r||"root"},i),Ne.color=i.color,Ne.w=100,Ne.h=100,Ne.parent=i[Symbol.for("slots")].filter(ut=>ut.ref==="third").shift()||r,Ne.slot="third",s[24].populate(Ne);const Pe=f.components&&f.components.Square||d.Square;r=s[22];const Ve={};s[25]=this.element({parent:r||"root"},i),Ve.size=100,Ve.parent=i[Symbol.for("slots")].filter(ut=>ut.ref==="first").shift()||r,Ve.slot="first";const dt=[];if(typeof Pe<"u")for(let ut in Pe.config.props)delete Ve[Pe.config.props[ut]],dt.push(Pe.config.props[ut]);s[25].populate(Ve),r=s[25];const pt={};pt.size=100,pt.slot="first",g=pt.is||"Square";let tt;if(typeof g=="string"){if(tt=f.components&&f.components[g]||d[g],!tt)throw new Error('Component "Square" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(tt=g);s[26]=tt.call(null,{props:pt},s[25],i),s[26][Symbol.for("slots")][0]?(r=s[26][Symbol.for("slots")][0],i=s[26]):r=s[26][Symbol.for("children")][0],r=s[22];const bt={};return s[27]=this.element({parent:r||"root"},i),bt.color="0x4d7c0fff",bt.x=40,bt.y=40,bt.w=40,bt.h=60,bt.parent=i[Symbol.for("slots")].filter(ut=>ut.ref==="second").shift()||r,bt.slot="second",s[27].populate(bt),s},effects:[function(r,i,f,d,y,x){i[4].set("color",r.color)},function(r,i,f,d,y,x){i[13].set("color",r.color)},function(r,i,f,d,y,x){i[19].set("color",r.color)},function(r,i,f,d,y,x){i[24].set("color",r.color)}],context:{}},state(){return{color:$l[0]}},hooks:{ready(){this.$setInterval(()=>{const h=$l.indexOf(this.color)+1;this.color=h<=$l.length?$l[h]:$l[0]},600)}}}),D5=at.Component("MemoryCard",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=320,g.h=200,g.x=i.col*360,g.y=i.row*250,g.scale={transition:i.scale},g.rotation={transition:i.disabled?-2:0},s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.h={transition:i.h},C.w=320,C.y=125,C.mount="{y: 0.5}",C.color={transition:i.disabled?"#ccc":"#fff"},C.src=i.image+"&w=320&h=200",C.effects=[i.shader("radius",{radius:6})],C.show=i.open,s[1].populate(C),r=s[0];const R={};return s[2]=this.element({parent:r||"root"},i),R.h={transition:i.h},R.w=320,R.y=125,R.mount="{y: 0.5}",R.color=i.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},R.effects=[i.shader("radius",{radius:6})],s[2].populate(R),s},effects:[function(r,i,f,d,y,x){i[0].set("scale",{transition:r.scale})},function(r,i,f,d,y,x){i[0].set("rotation",{transition:r.disabled?-2:0})},function(r,i,f,d,y,x){i[1].set("h",{transition:r.h})},function(r,i,f,d,y,x){i[1].set("color",{transition:r.disabled?"#ccc":"#fff"})},function(r,i,f,d,y,x){i[1].set("src",r.image+"&w=320&h=200")},function(r,i,f,d,y,x){i[1].set("effects",[r.shader("radius",{radius:6})])},function(r,i,f,d,y,x){i[1].set("show",r.open)},function(r,i,f,d,y,x){i[2].set("h",{transition:r.h})},function(r,i,f,d,y,x){i[2].set("color",r.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(r,i,f,d,y,x){i[2].set("effects",[r.shader("radius",{radius:6})])}],context:{}},props:["row","col","image","description","index"],state(){return{disabled:!1,open:!1,h:200,scale:1}},hooks:{init(){this.$listen("closeMemoryCard",h=>{h===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",h=>{h===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(h){this.scale=1.08;const r="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.$announcer.speak(r)},unfocus(){this.scale=1}},input:{enter(){if(!this.disabled){if(this.open){this.$announcer.speak("Card already open. Choose another");return}this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)}}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),DS=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],N5=at.Component("Announcer",{components:{MemoryCard:D5},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R),r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.font="raleway",b.size=80,b.color="0xffffffff",b.content="Let's play memory!",b.x=580,b.y=60,b.__textnode=!0,s[1].populate(b),r=s[0];const _={};s[2]=this.element({parent:r||"root"},i),_.font="kalam",_.size=40,_.color="0xb91c1cff",_.content="the Accessible edition :)",_.x=1200,_.y=170,_.rotation=-6,_.__textnode=!0,s[2].populate(_),r=s[0];const D={};s[3]=this.element({parent:r||"root"},i),D.x=260,D.y=260,s[3].populate(D),r=s[3];const w=[],L=($=[],B,V)=>{const W=x($),X=new Set;let ie=W.length;for(;ie--;){const ue=W[ie];X.add(""+ue.id)}let K=V.length;for(;K--;)if(X.has(V[K])===!1){const ue=V[K];B[4][ue]&&B[4][ue].destroy(),delete B[4][ue],B[5][ue]&&B[5][ue].destroy(),delete B[5][ue]}V.length=0;const pe=W.length;for(let ue=0;ue<pe;ue++){const q=Object.create(i);r=B[3],q.index=ue,q.card=W[ue],q.key=""+q.card.id,V.push(q.key);const A=f.components&&f.components.MemoryCard||d.MemoryCard;B[4]===void 0&&(B[4]={});const Y={};B[4][q.key]===void 0&&(B[4][q.key]=this.element({parent:r||"root"},i)),Y.col=q.index%4,Y.row=Math.floor(q.index/4)%3,Y.image=q.card.image,Y.description=q.card.description,Y.ref="card"+q.index,Y.index=q.index;const le=[];if(typeof A<"u")for(let Re in A.config.props)delete Y[A.config.props[Re]],le.push(A.config.props[Re]);B[4][q.key].nodeId===void 0&&B[4][q.key].populate(Y),B[5]===void 0&&(B[5]={}),r=B[4][q.key];const ge={};if(B[5][q.key]===void 0){C=q.index%4,Array.isArray(C)===!0&&(C=x(C).slice(0)),ge.col=C,C=Math.floor(q.index/4)%3,Array.isArray(C)===!0&&(C=x(C).slice(0)),ge.row=C,ge.image=q.card.image,ge.description=q.card.description,C="card"+q.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),ge.ref=C,C=q.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),ge.index=C,g=ge.is||"MemoryCard";let Re;if(typeof g=="string"){if(Re=f.components&&f.components[g]||d[g],!Re)throw new Error('Component "MemoryCard" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(Re=g);B[5][q.key]=Re.call(null,{props:ge},B[4][q.key],i),B[5][q.key][Symbol.for("slots")][0]?(r=B[5][q.key][Symbol.for("slots")][0],i=B[5][q.key]):r=B[5][q.key][Symbol.for("children")][0]}let de=()=>{(typeof le>"u"||le.indexOf("col")===-1)&&B[4][q.key].set("col",q.index%4)};y(de,null),i[Symbol.for("effects")].push(de);let se=()=>{(typeof le>"u"||le.indexOf("row")===-1)&&B[4][q.key].set("row",Math.floor(q.index/4)%3)};y(se,null),i[Symbol.for("effects")].push(se);let re=()=>{(typeof le>"u"||le.indexOf("ref")===-1)&&B[4][q.key].set("ref","card"+q.index)};y(re,null),i[Symbol.for("effects")].push(re);let oe=()=>{(typeof le>"u"||le.indexOf("index")===-1)&&B[4][q.key].set("index",q.index)};y(oe,null),i[Symbol.for("effects")].push(oe),B[5][q.key][Symbol.for("props")].col=q.index%4,B[5][q.key][Symbol.for("props")].row=Math.floor(q.index/4)%3,B[5][q.key][Symbol.for("props")].ref="card"+q.index,B[5][q.key][Symbol.for("props")].index=q.index}};return y(()=>{L(i.cards,s,w)},"cards"),s},effects:[],context:{}},state(){return{cards:DS.concat(DS).map((h,r)=>({...h,id:`card${r}`})),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0}},hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",h=>{this.openCards.length<2&&this.openCards.push(h),this.openCards.length===2&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(h){if(this.focusedRow===-1){this.focusedRow=0;return}h=h+this.focusedRow*4,this.$select("card"+h).$focus()},focusedRow(h){if(this.focusedCol===-1){this.focusedCol=0;return}h=this.focusedCol+h*4,this.$select("card"+h).$focus()}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){this.focusedCol===0?this.focusedRow===0?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1)},right(){this.focusedCol===3?this.focusedRow===2?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1)},up(){this.focusedCol===0&&this.$announcer.speak("You are already at the first card"),this.focusedRow=Math.max(0,this.focusedRow-1)},down(){this.focusedRow===2&&this.$announcer.speak("You are already at the last card"),this.focusedRow=Math.min(2,this.focusedRow+1)}}}),zl=(h,r)=>Math.floor(Math.random()*(r-h+1)+h),O5=at.Component("Item",{code:{render:function(r,i,f,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.src="assets/blits-b-small.png",g.w=96,g.h=168,g.x={transition:{value:i.x,duration:2900}},g.y={transition:{value:i.y,duration:2900}},g.rotation={transition:{value:i.rotation,duration:2900}},g.scale={transition:{value:i.scale,duration:1e3}},s[0].populate(g),s},effects:[function(r,i,f,d,y,x){i[0].set("x",{transition:{value:r.x,duration:2900}})},function(r,i,f,d,y,x){i[0].set("y",{transition:{value:r.y,duration:2900}})},function(r,i,f,d,y,x){i[0].set("rotation",{transition:{value:r.rotation,duration:2900}})},function(r,i,f,d,y,x){i[0].set("scale",{transition:{value:r.scale,duration:1e3}})}],context:{}},state(){return{x:zl(20,1560),y:zl(20,720),rotation:0,scale:.1}},hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=zl(20,1740),this.y=zl(20,900),this.rotation=zl(10,360)},3e3)}}}),U5=at.Component("Exponential",{components:{Item:O5},code:{render:function(r,i,f,d,y,x){const s=[];let g;const C={};s[0]=this.element({parent:r||"root"},i),s[0].populate(C),r=s[0];const R=[],b=(_=[],D,w)=>{const L=x(_),$=new Set;let B=L.length;for(;B--;){const X=L[B];$.add(""+X)}let V=w.length;for(;V--;)if($.has(w[V])===!1){const X=w[V];D[1][X]&&D[1][X].destroy(),delete D[1][X],D[2][X]&&D[2][X].destroy(),delete D[2][X]}w.length=0;const W=L.length;for(let X=0;X<W;X++){const ie=Object.create(i);r=D[0],ie.index=X,ie.item=L[X],ie.key=""+ie.item,w.push(ie.key);const K=f.components&&f.components.Item||d.Item;D[1]===void 0&&(D[1]={});const pe={};D[1][ie.key]===void 0&&(D[1][ie.key]=this.element({parent:r||"root"},i));const ue=[];if(typeof K<"u")for(let A in K.config.props)delete pe[K.config.props[A]],ue.push(K.config.props[A]);D[1][ie.key].nodeId===void 0&&D[1][ie.key].populate(pe),D[2]===void 0&&(D[2]={}),r=D[1][ie.key];const q={};if(D[2][ie.key]===void 0){g=q.is||"Item";let A;if(typeof g=="string"){if(A=f.components&&f.components[g]||d[g],!A)throw new Error('Component "Item" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(A=g);D[2][ie.key]=A.call(null,{props:q},D[1][ie.key],i),D[2][ie.key][Symbol.for("slots")][0]?(r=D[2][ie.key][Symbol.for("slots")][0],i=D[2][ie.key]):r=D[2][ie.key][Symbol.for("children")][0]}}};return y(()=>{b(i.items,s,R)},"items"),s},effects:[],context:{}},state(){return{items:[]}},hooks:{ready(){const h=this.$setInterval(()=>{for(let r=0;r<=Math.floor(this.items.length/10);r++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(h)},2e3)}}}),B5=at.Component("Ball",{code:{render:function(r,i,f,d,y,x){const s=[],g={};return s[0]=this.element({parent:r||"root"},i),g.w=100,g.h=100,g.src="/assets/basketball.png",s[0].populate(g),s},effects:[],context:{}},hooks:{attach(){this.$emit("ballUpdate","Attached to render tree")},detach(){this.$emit("ballUpdate","Detached from render tree")},enter(){this.$emit("ballUpdate","Entered viewport")},exit(){this.$emit("ballUpdate","Exited viewport")}}}),Fc=(h,r)=>Math.floor(Math.random()*(r-h+1)+h),j5=at.Component("Viewport",{components:{Ball:B5},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),s[0].populate(R),r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.size=32,b.x=960,b.y=540,b.mount=.5,b.content=i.status.join(`
`),b.lineheight=52,b.wordwrap=500,b.__textnode=!0,s[1].populate(b);const _=f.components&&f.components.Ball||d.Ball;r=s[0];const D={};s[2]=this.element({parent:r||"root"},i),D.x={transition:{value:i.x,duration:1250}},D.y={transition:{value:i.y,duration:1250}},D.rotation={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},D.w=100,D.h=100;const w=[];if(typeof _<"u")for(let B in _.config.props)delete D[_.config.props[B]],w.push(_.config.props[B]);s[2].populate(D),r=s[2];const L={};C={transition:{value:i.x,duration:1250}},Array.isArray(C)===!0&&(C=x(C).slice(0)),L.x=C,C={transition:{value:i.y,duration:1250}},Array.isArray(C)===!0&&(C=x(C).slice(0)),L.y=C,C={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},Array.isArray(C)===!0&&(C=x(C).slice(0)),L.rotation=C,L.w=100,L.h=100,g=L.is||"Ball";let $;if(typeof g=="string"){if($=f.components&&f.components[g]||d[g],!$)throw new Error('Component "Ball" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&($=g);return s[3]=$.call(null,{props:L},s[2],i),s[3][Symbol.for("slots")][0]?(r=s[3][Symbol.for("slots")][0],i=s[3]):r=s[3][Symbol.for("children")][0],s},effects:[function(r,i,f,d,y,x){i[1].set("content",r.status.join(`
`))},function(r,i,f,d,y,x){(typeof skip2>"u"||skip2.indexOf("x")===-1)&&i[2].set("x",{transition:{value:r.x,duration:1250}})},function(r,i,f,d,y,x){(typeof skip2>"u"||skip2.indexOf("y")===-1)&&i[2].set("y",{transition:{value:r.y,duration:1250}})},function(r,i,f,d,y,x){(typeof skip2>"u"||skip2.indexOf("rotation")===-1)&&i[2].set("rotation",{transition:{value:r.rotation,duration:1400,easing:"ease-in-out"}})},function(r,i,f,d,y,x){i[3][Symbol.for("props")].x={transition:{value:r.x,duration:1250}}},function(r,i,f,d,y,x){i[3][Symbol.for("props")].y={transition:{value:r.y,duration:1250}}},function(r,i,f,d,y,x){i[3][Symbol.for("props")].rotation={transition:{value:r.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state(){return{x:-400,y:-400,rotation:0,status:[],count:1}},hooks:{ready(){this.$listen("ballUpdate",h=>{this.status.unshift(`${this.count++} -  ${h}`),this.status.length=Math.min(this.status.length,8)}),this.rotation=Fc(-90,90),this.x=(1920-100)/2,this.y=(1080-100)/2,this.$setInterval(()=>{this.x=Fc(-300,2220),this.y=Fc(-300,1380),this.rotation=Fc(-90,90)},2500)}}}),ph={code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=1920,g.h=1080,g.color="0xffffffff",g.effects=[i.shader("radialGradient",{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800})],s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.show=i.up!==void 0,s[1].populate(C),r=s[1];const R={};s[2]=this.element({parent:r||"root"},i),R.src="assets/arrow.png",R.w=100,R.h=44,R.x=960,R.y=40,R.mount="{x: 0.5}",s[2].populate(R),r=s[1];const b={};s[3]=this.element({parent:r||"root"},i),b.content=i.up&&i.up.toUpperCase(),b.x=960,b.y=100,b.size=76,b.mount="{x: 0.5}",b.__textnode=!0,s[3].populate(b),r=s[0];const _={};s[4]=this.element({parent:r||"root"},i),_.show=i.right!==void 0,s[4].populate(_),r=s[4];const D={};s[5]=this.element({parent:r||"root"},i),D.src="assets/arrow.png",D.w=100,D.h=44,D.x=1900,D.y=540,D.mount="{x: 1, y: 0.5}",D.rotation=90,s[5].populate(D),r=s[4];const w={};s[6]=this.element({parent:r||"root"},i),w.content=i.right&&i.right.toUpperCase(),w.x=1760,w.y=540,w.size=76,w.rotation=90,w.mount=.5,w.__textnode=!0,s[6].populate(w),r=s[0];const L={};s[7]=this.element({parent:r||"root"},i),L.show=i.down!==void 0,s[7].populate(L),r=s[7];const $={};s[8]=this.element({parent:r||"root"},i),$.src="assets/arrow.png",$.w=100,$.h=44,$.x=960,$.y=1040,$.mount="{x: 0.5, y: 1}",$.rotation=180,s[8].populate($),r=s[7];const B={};s[9]=this.element({parent:r||"root"},i),B.content=i.down&&i.down.toUpperCase(),B.x=960,B.y=980,B.size=76,B.mount="{x: 0.5, y: 1}",B.__textnode=!0,s[9].populate(B),r=s[0];const V={};s[10]=this.element({parent:r||"root"},i),V.show=i.left!==void 0,s[10].populate(V),r=s[10];const W={};s[11]=this.element({parent:r||"root"},i),W.src="assets/arrow.png",W.w=100,W.h=44,W.x=40,W.y=540,W.mount="{ y: 0.5}",W.rotation=-90,s[11].populate(W),r=s[10];const X={};s[12]=this.element({parent:r||"root"},i),X.content=i.left&&i.left.toUpperCase(),X.x=180,X.y=540,X.size=76,X.mount=.5,X.rotation=-90,X.__textnode=!0,s[12].populate(X),r=s[0];const ie={};return s[13]=this.element({parent:r||"root"},i),ie.content=i.pageTitle,ie.font="raleway",ie.x=960,ie.y=540,ie.size=240,ie.mount=.5,ie.__textnode=!0,s[13].populate(ie),s},effects:[function(r,i,f,d,y,x){i[0].set("effects",[r.shader("radialGradient",{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800})])},function(r,i,f,d,y,x){i[1].set("show",r.up!==void 0)},function(r,i,f,d,y,x){i[3].set("content",r.up&&r.up.toUpperCase())},function(r,i,f,d,y,x){i[4].set("show",r.right!==void 0)},function(r,i,f,d,y,x){i[6].set("content",r.right&&r.right.toUpperCase())},function(r,i,f,d,y,x){i[7].set("show",r.down!==void 0)},function(r,i,f,d,y,x){i[9].set("content",r.down&&r.down.toUpperCase())},function(r,i,f,d,y,x){i[10].set("show",r.left!==void 0)},function(r,i,f,d,y,x){i[12].set("content",r.left&&r.left.toUpperCase())},function(r,i,f,d,y,x){i[13].set("content",r.pageTitle)}],context:{}},props:[{key:"page",cast:Object}],computed:{pageTitle(){return this.page&&this.page.title||this.title}},state(){return{title:"Start",up:"up",right:"right",down:"down",left:"left"}}},F5=at.Component("RouterHookPage",{...ph,state(){return{title:"Start",down:"episode flow",right:"movie flow"}},input:{right(){this.$router.to("/examples/router-hooks/movie")},down(){this.$router.to("/examples/router-hooks/episode/1")}}}),$5=at.Component("RouterHookMovie",{...ph,state(){return{title:"Movie",left:"Back",right:"Rating"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/rating")}}}),z5=at.Component("RouterHookRating",{...ph,state(){return{title:"Rating",left:"Back",right:"TO START"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/")}}}),V5=at.Component("RouterHookEpisode",{...ph,state(){return{title:"Episode",left:"Back",right:"NEXT EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to(`/examples/router-hooks/episode/${this.page.id+1}`,void 0,{inHistory:!1})}}}),dr={slideInOutLeft:{before:{prop:"x",value:"100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"-100%",duration:400}},slideInOutRight:{before:{prop:"x",value:"-100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"100%",duration:400}},slideInOutUp:{before:{prop:"y",value:"100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"-100%",duration:400}},slideInOutDown:{before:{prop:"y",value:"-100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"100%",duration:400}}},H5=[{path:"/examples/router-hooks",component:F5,hooks:{async before(h,r){return r&&r.path==="examples/router-hooks/movie"&&(h.transition=dr.slideInOutRight),r&&r.path==="examples/router-hooks/rating"&&(h.transition=dr.slideInOutLeft),r&&r.path.indexOf("episode")>-1&&(h.transition=dr.slideInOutDown),h}}},{path:"/examples/router-hooks/episode/:id",component:V5,hooks:{before(h,r){r&&r.path.indexOf("episode")>-1&&(h.transition=dr.slideInOutLeft);const{id:i}=h.params;return i>5?"/examples/router-hooks/":(h.data.page={id:parseInt(i),title:`Episode ${i}`},h)}},transition:dr.slideInOutUp},{path:"/examples/router-hooks/movie",component:$5,hooks:{before(h,r){return r&&r.path==="examples/router-hooks"&&(h.transition=dr.slideInOutLeft),r&&r.path==="examples/router-hooks/rating"&&(h.transition=dr.slideInOutRight),h}}},{path:"/examples/router-hooks/rating",component:z5,transition:dr.slideInOutLeft}],G5=at.Component("Resize",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.y=30,C.content="fit (Resize Mode) sample",C.wordwrap=1920,C.align="center",C.__textnode=!0,s[1].populate(C),r=s[0];const R={};s[2]=this.element({parent:r||"root"},i),R.x={transition:{value:i.pages.x1,duration:200}},R.y=90,s[2].populate(R),r=s[2];const b={};s[3]=this.element({parent:r||"root"},i),b.x=100,b.content="Image dimensions: 2560 X 1440",b.__textnode=!0,s[3].populate(b),r=s[2];const _={};s[4]=this.element({parent:r||"root"},i),_.x=100,_.y=80,_.content=i.titles.t1,_.__textnode=!0,s[4].populate(_),r=s[2];const D={};s[5]=this.element({parent:r||"root"},i),D.y=150,D.x=100,s[5].populate(D),r=s[5];const w={};s[6]=this.element({parent:r||"root"},i),w.w=i.w,w.h=i.w-300,w.src=i.img,w.fit="{type: 'cover', position: { y: 0 } }",s[6].populate(w),r=s[5];const L={};s[7]=this.element({parent:r||"root"},i),L.w=i.w,L.h=i.w-300,L.src=i.img,L.fit="{ type: 'cover', position: { y: 0.5 } }",L.x=600,s[7].populate(L),r=s[5];const $={};s[8]=this.element({parent:r||"root"},i),$.w=i.w,$.h=i.w-300,$.src=i.img,$.fit="{ type: 'cover', position: { y: 1 } }",$.x=1200,s[8].populate($),r=s[2];const B={};s[9]=this.element({parent:r||"root"},i),B.x=100,B.y=500,B.content=i.titles.t2,B.__textnode=!0,s[9].populate(B),r=s[2];const V={};s[10]=this.element({parent:r||"root"},i),V.y=600,V.x=100,s[10].populate(V),r=s[10];const W={};s[11]=this.element({parent:r||"root"},i),W.w=i.w,W.h=i.w-150,W.src=i.img,W.fit="{ type: 'cover', position: { x: 0 } }",s[11].populate(W),r=s[10];const X={};s[12]=this.element({parent:r||"root"},i),X.w=i.w,X.h=i.w-150,X.src=i.img,X.fit="{ type: 'cover', position: { x: 0.5 } }",X.x=600,s[12].populate(X),r=s[10];const ie={};s[13]=this.element({parent:r||"root"},i),ie.w=i.w,ie.h=i.w-150,ie.src=i.img,ie.fit="{ type: 'cover', position: { x: 1 } }",ie.x=1200,s[13].populate(ie),r=s[0];const K={};s[14]=this.element({parent:r||"root"},i),K.x={transition:{value:i.pages.x2,duration:200}},K.y=90,s[14].populate(K),r=s[14];const pe={};s[15]=this.element({parent:r||"root"},i),pe.x=100,pe.content="Image dimensions: 1440 X 2560",pe.__textnode=!0,s[15].populate(pe),r=s[14];const ue={};s[16]=this.element({parent:r||"root"},i),ue.x=100,ue.y=80,ue.content=i.titles.t3,ue.__textnode=!0,s[16].populate(ue),r=s[14];const q={};s[17]=this.element({parent:r||"root"},i),q.y=150,q.x=100,s[17].populate(q),r=s[17];const A={};s[18]=this.element({parent:r||"root"},i),A.w=i.w,A.h=i.w-200,A.src=i.img1,A.fit="{ type: 'cover', position: { y: 0, x: 0 } }",s[18].populate(A),r=s[17];const Y={};s[19]=this.element({parent:r||"root"},i),Y.w=i.w,Y.h=i.w-200,Y.src=i.img1,Y.fit="{ type: 'cover', position: { y: 0.5, x: 0.5 } }",Y.x=600,s[19].populate(Y),r=s[17];const le={};s[20]=this.element({parent:r||"root"},i),le.w=i.w,le.h=i.w-200,le.src=i.img1,le.fit="{ type: 'cover', position: { y: 1, x: 1 } }",le.x=1200,s[20].populate(le),r=s[14];const ge={};s[21]=this.element({parent:r||"root"},i),ge.x=100,ge.y=500,ge.content=i.titles.t4,ge.__textnode=!0,s[21].populate(ge),r=s[14];const de={};s[22]=this.element({parent:r||"root"},i),de.y=570,de.x=100,s[22].populate(de),r=s[22];const se={};s[23]=this.element({parent:r||"root"},i),se.w=i.w-350,se.h=i.w-100,se.src=i.img1,se.fit="{ type: 'cover', position: { x: 0 } }",s[23].populate(se),r=s[22];const re={};s[24]=this.element({parent:r||"root"},i),re.w=i.w-350,re.h=i.w-100,re.src=i.img1,re.fit="{ type: 'cover', position: { x: 0.25 } }",re.x=250,s[24].populate(re),r=s[22];const oe={};s[25]=this.element({parent:r||"root"},i),oe.w=i.w-350,oe.h=i.w-100,oe.src=i.img1,oe.fit="{ type: 'cover', position: { x: 0.5 } }",oe.x=500,s[25].populate(oe),r=s[22];const Re={};s[26]=this.element({parent:r||"root"},i),Re.w=i.w-350,Re.h=i.w-100,Re.src=i.img1,Re.fit="{ type: 'cover', position: { x: 0.75 } }",Re.x=750,s[26].populate(Re),r=s[22];const Ae={};s[27]=this.element({parent:r||"root"},i),Ae.w=i.w-350,Ae.h=i.w-100,Ae.src=i.img1,Ae.fit="{ type: 'cover', position: { x: 1 } }",Ae.x=1e3,s[27].populate(Ae),r=s[0];const Ie={};s[28]=this.element({parent:r||"root"},i),Ie.x={transition:{value:i.pages.x3,duration:200}},Ie.y=90,s[28].populate(Ie),r=s[28];const _e={};s[29]=this.element({parent:r||"root"},i),_e.x=100,_e.content="Image dimensions: 2560 X 1440",_e.__textnode=!0,s[29].populate(_e),r=s[28];const Te={};s[30]=this.element({parent:r||"root"},i),Te.x=100,Te.y=80,Te.content=i.titles.t5,Te.__textnode=!0,s[30].populate(Te),r=s[28];const je={};s[31]=this.element({parent:r||"root"},i),je.y=150,je.x=100,je.w=i.w+100,je.h=i.w-200,je.color="0x000000ff",s[31].populate(je),r=s[31];const F={};s[32]=this.element({parent:r||"root"},i),F.w=i.w+100,F.h=i.w-200,F.src=i.img,F.fit="contain",s[32].populate(F),r=s[28];const Ue={};s[33]=this.element({parent:r||"root"},i),Ue.x=100,Ue.y=500,Ue.content=i.titles.t6,Ue.__textnode=!0,s[33].populate(Ue),r=s[28];const He={};s[34]=this.element({parent:r||"root"},i),He.y=550,He.x=100,He.w=i.w+100,He.h=i.w-100,He.color="0x000000ff",s[34].populate(He),r=s[34];const Ge={};s[35]=this.element({parent:r||"root"},i),Ge.w=i.w+100,Ge.h=i.w-100,Ge.src=i.img,Ge.fit="contain",s[35].populate(Ge),r=s[0];const Ce={};return s[36]=this.element({parent:r||"root"},i),Ce.x=1700,Ce.y=20,Ce.content="Page "+i.activePage+"/"+i.totalPages,Ce.__textnode=!0,s[36].populate(Ce),s},effects:[function(r,i,f,d,y,x){i[2].set("x",{transition:{value:r.pages.x1,duration:200}})},function(r,i,f,d,y,x){i[3].set("content","Image dimensions: 2560 X 1440")},function(r,i,f,d,y,x){i[14].set("x",{transition:{value:r.pages.x2,duration:200}})},function(r,i,f,d,y,x){i[15].set("content","Image dimensions: 1440 X 2560")},function(r,i,f,d,y,x){i[28].set("x",{transition:{value:r.pages.x3,duration:200}})},function(r,i,f,d,y,x){i[29].set("content","Image dimensions: 2560 X 1440")},function(r,i,f,d,y,x){i[36].set("content","Page "+r.activePage+"/"+r.totalPages)}],context:{}},state(){return{activePage:1,pages:{x1:0,x2:1920,x3:1920*2},w:500,img:"assets/testscreen.png",img1:"assets/testscreen_rotated.png",titles:{t1:"Texture width > height - fit cover maximum width of node and position Y - 0, 0.5, 1",t2:"Texture width > height - fit:cover maximum width of node and position X - 0, 0.5, 1",t3:"Texture width < height - fit cover maximum width of node and positionY - 0, 0.5, 1",t4:"Texture width < height - fit cover maximum width of node and position X - 0, 0.25, 0.5, 0.75, 1",t5:"Texture width > height - fit contain maximum height of node",t6:"Texture width > height - fit contain maximum width of node"}}},computed:{totalPages(){return Object.keys(this.pages).length}},input:{right(){if(this.activePage<this.totalPages){for(let h=1;h<=this.totalPages;h++)this.pages[`x${h}`]=this.pages[`x${h}`]-1920;this.activePage+=1}},left(){if(this.activePage>1){for(let h=this.totalPages;h>=1;h--)this.pages[`x${h}`]=this.pages[`x${h}`]+1920;this.activePage-=1}}}}),X5=at.Component("Flags",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),s[0].populate(g),r=s[0];const C=[],R=(b=[],_,D)=>{const w=x(b),L=new Set;let $=w.length;for(;$--;)w[$],L.add(""+$);let B=D.length;for(;B--;)if(L.has(D[B])===!1){const W=D[B];_[1][W]&&_[1][W].destroy(),delete _[1][W],_[2][W]&&_[2][W].destroy(),delete _[2][W],_[3][W]&&_[3][W].destroy(),delete _[3][W]}D.length=0;const V=w.length;for(let W=0;W<V;W++){const X=Object.create(i);r=_[0],X.index=W,X.language=w[W],X.key=""+W,D.push(X.key),r=_[0],_[1]===void 0&&(_[1]={});const ie={};_[1][X.key]===void 0&&(_[1][X.key]=this.element({parent:r||"root"},i)),ie.x=X.index*250,_[1][X.key].nodeId===void 0&&_[1][X.key].populate(ie),r=_[1][X.key],_[2]===void 0&&(_[2]={});const K={};_[2][X.key]===void 0&&(_[2][X.key]=this.element({parent:r||"root"},i)),K.src=X.language.flag,K.w=150,K.h=150,K.alpha=X.index===X.activeIndex?1:.6,_[2][X.key].nodeId===void 0&&_[2][X.key].populate(K),r=_[1][X.key],_[3]===void 0&&(_[3]={});const pe={};_[3][X.key]===void 0&&(_[3][X.key]=this.element({parent:r||"root"},i)),pe.content=X.language.name,pe.y=150,pe.wordwrap=150,pe.align="center",pe.color=X.index===X.activeIndex?"0xffffffff":"0xaaaaaaff",pe.__textnode=!0,_[3][X.key].nodeId===void 0&&_[3][X.key].populate(pe)}};return y(()=>{R(i.languages,s,C)},"languages"),y(()=>{i.activeIndex;for(let b=0;b<i.languages.length;b++){const _={};_.index=b,_.language=i.languages[b],_.key=b,s[2][_.key].set("alpha",_.index===i.activeIndex?1:.6)}}),y(()=>{i.activeIndex;for(let b=0;b<i.languages.length;b++){const _={};_.index=b,_.language=i.languages[b],_.key=b,s[3][_.key].set("color",_.index===i.activeIndex?"0xffffffff":"0xaaaaaaff")}}),s},effects:[],context:{}},props:["languages"],state(){return{activeIndex:0}},watch:{activeIndex(h){const r=this.languages[h];r&&r.code&&this.$language.set(r.code)}},input:{right(){this.activeIndex=Math.min(this.activeIndex+1,this.languages.length-1)},left(){this.activeIndex=Math.max(this.activeIndex-1,0)}}}),W5=at.Component("LanguagePlugin",{components:{Flags:X5},code:{render:function(r,i,f,d,y,x){const s=[];let g;const C={};s[0]=this.element({parent:r||"root"},i),s[0].populate(C);const R=f.components&&f.components.Flags||d.Flags;r=s[0];const b={};s[1]=this.element({parent:r||"root"},i),b.languages=i.languages,b.ref="flags",b.x=500,b.y=150;const _=[];if(typeof R<"u")for(let W in R.config.props)delete b[R.config.props[W]],_.push(R.config.props[W]);s[1].populate(b),r=s[1];const D={};D.languages=i.languages,D.ref="flags",D.x=500,D.y=150,g=D.is||"Flags";let w;if(typeof g=="string"){if(w=f.components&&f.components[g]||d[g],!w)throw new Error('Component "Flags" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(w=g);s[2]=w.call(null,{props:D},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0],r=s[0];const L={};s[3]=this.element({parent:r||"root"},i),L.x=960,L.y=540,L.mount=.5,L.content=i.$language.translate("hello"),L.size=80,L.__textnode=!0,s[3].populate(L),r=s[0];const $={};s[4]=this.element({parent:r||"root"},i),$.x=960,$.y=640,$.mount=.5,$.content=i.$language.translate("bye"),$.size=50,$.__textnode=!0,s[4].populate($),r=s[0];const B={};s[5]=this.element({parent:r||"root"},i),B.x=960,B.y=720,B.mount=.5,B.content=i.$language.translate("replacement",{first:"John",last:"Doe",age:18}),B.size=36,B.__textnode=!0,s[5].populate(B),r=s[0];const V={};return s[6]=this.element({parent:r||"root"},i),V.size=32,V.x=960,V.y=940,V.mount=.5,V.align="center",V.content="Current language: "+i.$language.language+`
 Language file: `+(i.loaded===!0?"Loaded":"loading ..."),V.__textnode=!0,s[6].populate(V),s},effects:[function(r,i,f,d,y,x){i[3].set("content",r.$language.translate("hello"))},function(r,i,f,d,y,x){i[4].set("content",r.$language.translate("bye"))},function(r,i,f,d,y,x){i[5].set("content",r.$language.translate("replacement",{first:"John",last:"Doe",age:18}))},function(r,i,f,d,y,x){i[6].set("content","Current language: "+r.$language.language+`
 Language file: `+(r.loaded===!0?"Loaded":"loading ..."))}],context:{}},state(){return{loaded:!1,languages:[{flag:"/assets/flags/united-states.png",code:"en-US",name:"English"},{flag:"/assets/flags/netherlands.png",code:"nl-NL",name:"Dutch"},{flag:"/assets/flags/france.png",code:"fr-FR",name:"French"},{flag:"/assets/flags/germany.png",code:"de-DE",name:"German"}]}},hooks:{init(){this.$language.set("en-US"),setTimeout(()=>{this.$language.load("/assets/translations.json").then(()=>{this.loaded=!0})},2e3)},focus(){this.select("flags").focus()}}}),Y5=at.Component("Layout",{code:{render:function(r,i,f,d,y,x){const s=[],g={};s[0]=this.element({parent:r||"root"},i),g.w=1920,g.h=1080,g.color="0xc4b5fdff",s[0].populate(g),r=s[0];const C={};s[1]=this.element({parent:r||"root"},i),C.x=40,C.y=40,s[1].populate(C),r=s[1];const R={};s[2]=this.element({parent:r||"root"},i),R.color="0x222222ff",R.content="Static horizontal Layout",R.__textnode=!0,s[2].populate(R),r=s[1];const b={};s[3]=this.element({parent:r||"root"},i),b.y=50,b.gap=10,b.__layout=!0,s[3].populate(b),r=s[3];const _={};s[4]=this.element({parent:r||"root"},i),_.w=50,_.h=100,_.color="0xeff6ffff",s[4].populate(_),r=s[3];const D={};s[5]=this.element({parent:r||"root"},i),D.w=60,D.h=100,D.color="0xbfdbfeff",s[5].populate(D),r=s[3];const w={};s[6]=this.element({parent:r||"root"},i),w.w=70,w.h=100,w.color="0x60a5faff",s[6].populate(w),r=s[3];const L={};s[7]=this.element({parent:r||"root"},i),L.w=80,L.h=100,L.color="0x2563ebff",s[7].populate(L),r=s[3];const $={};s[8]=this.element({parent:r||"root"},i),$.w=90,$.h=100,$.color="0x1e40afff",s[8].populate($),r=s[0];const B={};s[9]=this.element({parent:r||"root"},i),B.x=40,B.y=220,s[9].populate(B),r=s[9];const V={};s[10]=this.element({parent:r||"root"},i),V.color="0x222222ff",V.content="Static vertical Layout",V.__textnode=!0,s[10].populate(V),r=s[9];const W={};s[11]=this.element({parent:r||"root"},i),W.y=50,W.gap=10,W.direction="vertical",W.__layout=!0,s[11].populate(W),r=s[11];const X={};s[12]=this.element({parent:r||"root"},i),X.w=100,X.h=50,X.color="0xeff6ffff",s[12].populate(X),r=s[11];const ie={};s[13]=this.element({parent:r||"root"},i),ie.w=100,ie.h=60,ie.color="0xbfdbfeff",s[13].populate(ie),r=s[11];const K={};s[14]=this.element({parent:r||"root"},i),K.w=100,K.h=70,K.color="0x60a5faff",s[14].populate(K),r=s[11];const pe={};s[15]=this.element({parent:r||"root"},i),pe.w=100,pe.h=80,pe.color="0x2563ebff",s[15].populate(pe),r=s[11];const ue={};s[16]=this.element({parent:r||"root"},i),ue.w=100,ue.h=90,ue.color="0x1e40afff",s[16].populate(ue),r=s[0];const q={};s[17]=this.element({parent:r||"root"},i),q.x=40,q.y=700,s[17].populate(q),r=s[17];const A={};s[18]=this.element({parent:r||"root"},i),A.color="0x222222ff",A.content="Nested Layouts",A.__textnode=!0,s[18].populate(A),r=s[17];const Y={};s[19]=this.element({parent:r||"root"},i),Y.y=50,Y.gap=10,Y.direction="horizontal",Y.__layout=!0,s[19].populate(Y),r=s[19];const le={};s[20]=this.element({parent:r||"root"},i),le.w=100,le.h=50,le.color="0xeff6ffff",s[20].populate(le),r=s[19];const ge={};s[21]=this.element({parent:r||"root"},i),ge.w=100,ge.h=60,ge.color="0xbfdbfeff",s[21].populate(ge),r=s[19];const de={};s[22]=this.element({parent:r||"root"},i),de.direction="vertical",de.gap=10,de.__layout=!0,s[22].populate(de),r=s[22];const se={};s[23]=this.element({parent:r||"root"},i),se.w=100,se.h=70,se.color="0x60a5faff",s[23].populate(se),r=s[22];const re={};s[24]=this.element({parent:r||"root"},i),re.w=100,re.h=70,re.color="0x60a5faff",s[24].populate(re),r=s[22];const oe={};s[25]=this.element({parent:r||"root"},i),oe.w=100,oe.h=70,oe.color="0x60a5faff",s[25].populate(oe),r=s[22];const Re={};s[26]=this.element({parent:r||"root"},i),Re.gap=50,Re.__layout=!0,s[26].populate(Re),r=s[26];const Ae={};s[27]=this.element({parent:r||"root"},i),Ae.w=50,Ae.h=50,Ae.color="0x2563ebff",s[27].populate(Ae),r=s[26];const Ie={};s[28]=this.element({parent:r||"root"},i),Ie.w=50,Ie.h=50,Ie.color="0x2563ebff",s[28].populate(Ie),r=s[26];const _e={};s[29]=this.element({parent:r||"root"},i),_e.w=50,_e.h=50,_e.color="0x2563ebff",s[29].populate(_e),r=s[19];const Te={};s[30]=this.element({parent:r||"root"},i),Te.w=100,Te.h=80,Te.color="0x2563ebff",s[30].populate(Te),r=s[19];const je={};s[31]=this.element({parent:r||"root"},i),je.w=100,je.h=90,je.color="0x1e40afff",s[31].populate(je),r=s[0];const F={};s[32]=this.element({parent:r||"root"},i),F.x=800,F.y=40,s[32].populate(F),r=s[32];const Ue={};s[33]=this.element({parent:r||"root"},i),Ue.color="0x222222ff",Ue.content="Layout with Text",Ue.__textnode=!0,s[33].populate(Ue),r=s[32];const He={};s[34]=this.element({parent:r||"root"},i),He.y=50,He.gap=20,He.__layout=!0,s[34].populate(He),r=s[34];const Ge={};s[35]=this.element({parent:r||"root"},i),Ge.w=3,Ge.h=32,Ge.color="0x60a5faff",s[35].populate(Ge),r=s[34];const Ce={};s[36]=this.element({parent:r||"root"},i),Ce.color="0x1e40afff",Ce.content="Hello",Ce.__textnode=!0,s[36].populate(Ce),r=s[34];const H={};s[37]=this.element({parent:r||"root"},i),H.w=3,H.h=32,H.color="0x60a5faff",s[37].populate(H),r=s[34];const Ee={};s[38]=this.element({parent:r||"root"},i),Ee.content="World",Ee.color="0x1e40afff",Ee.__textnode=!0,s[38].populate(Ee),r=s[34];const ke={};s[39]=this.element({parent:r||"root"},i),ke.w=3,ke.h=32,ke.color="0x60a5faff",s[39].populate(ke),r=s[0];const ce={};s[40]=this.element({parent:r||"root"},i),ce.x=800,ce.y=210,s[40].populate(ce),r=s[40];const Xe={};s[41]=this.element({parent:r||"root"},i),Xe.color="0x222222ff",Xe.content="Dynamic dimensions Layout",Xe.__textnode=!0,s[41].populate(Xe),r=s[40];const be={};s[42]=this.element({parent:r||"root"},i),be.y=50,be.gap=20,be.__layout=!0,s[42].populate(be),r=s[42];const Oe={};s[43]=this.element({parent:r||"root"},i),Oe.w=i.w*.5,Oe.h=60,Oe.color="0xeff6ffff",s[43].populate(Oe),r=s[42];const he={};s[44]=this.element({parent:r||"root"},i),he.w=i.w*.6,he.h=60,he.color="0xbfdbfeff",s[44].populate(he),r=s[42];const Q={};s[45]=this.element({parent:r||"root"},i),Q.w=i.w*.7,Q.h=60,Q.color="0x60a5faff",s[45].populate(Q),r=s[42];const Ne={};s[46]=this.element({parent:r||"root"},i),Ne.w=i.w*.8,Ne.h=60,Ne.color="0x2563ebff",s[46].populate(Ne),r=s[42];const Pe={};s[47]=this.element({parent:r||"root"},i),Pe.w=i.w*.9,Pe.h=60,Pe.color="0x1e40afff",s[47].populate(Pe),r=s[0];const Ve={};s[48]=this.element({parent:r||"root"},i),Ve.x=800,Ve.y=400,s[48].populate(Ve),r=s[48];const dt={};s[49]=this.element({parent:r||"root"},i),dt.color="0x222222ff",dt.content="For loop Layout",dt.__textnode=!0,s[49].populate(dt),r=s[48];const pt={};s[50]=this.element({parent:r||"root"},i),pt.y=50,pt.gap=20,pt.__layout=!0,s[50].populate(pt),r=s[50];const tt=[],bt=(ft=[],Me,kt)=>{const tn=x(ft),qn=new Set;let vn=tn.length;for(;vn--;)tn[vn],qn.add(""+vn);let Ct=kt.length;for(;Ct--;)if(qn.has(kt[Ct])===!1){const At=kt[Ct];Me[51][At]&&Me[51][At].destroy(),delete Me[51][At]}kt.length=0;const ri=tn.length;for(let At=0;At<ri;At++){const ht=Object.create(i);r=Me[50],ht.index=At,ht.color=tn[At],ht.key=""+At,kt.push(ht.key),r=Me[50],Me[51]===void 0&&(Me[51]={});const en={};Me[51][ht.key]===void 0&&(Me[51][ht.key]=this.element({parent:r||"root"},i)),en.w=60,en.h=60,en.color=ht.color,Me[51][ht.key].nodeId===void 0&&Me[51][ht.key].populate(en)}};y(()=>{bt(i.colors,s,tt)},"colors"),y(()=>{i.color;for(let ft=0;ft<i.colors.length;ft++){const Me={};Me.index=ft,Me.color=i.colors[ft],Me.key=ft,s[51][Me.key].set("color",Me.color)}}),r=s[0];const ut={};s[52]=this.element({parent:r||"root"},i),ut.x=800,ut.y=600,s[52].populate(ut),r=s[52];const vt={};s[53]=this.element({parent:r||"root"},i),vt.color="0x222222ff",vt.content="Layout with transitions",vt.__textnode=!0,s[53].populate(vt),r=s[52];const ct={};s[54]=this.element({parent:r||"root"},i),ct.direction="horizontal",ct.gap=20,ct.y=60,ct.__layout=!0,s[54].populate(ct),r=s[54];const Bn=[],oi=(ft=[],Me,kt)=>{const tn=x(ft),qn=new Set;let vn=tn.length;for(;vn--;)tn[vn],qn.add(""+vn);let Ct=kt.length;for(;Ct--;)if(qn.has(kt[Ct])===!1){const At=kt[Ct];Me[55][At]&&Me[55][At].destroy(),delete Me[55][At],Me[56][At]&&Me[56][At].destroy(),delete Me[56][At],Me[57][At]&&Me[57][At].destroy(),delete Me[57][At],Me[58][At]&&Me[58][At].destroy(),delete Me[58][At],Me[59][At]&&Me[59][At].destroy(),delete Me[59][At],Me[60][At]&&Me[60][At].destroy(),delete Me[60][At]}kt.length=0;const ri=tn.length;for(let At=0;At<ri;At++){const ht=Object.create(i);r=Me[54],ht.index=At,ht.color=tn[At],ht.key=""+At,kt.push(ht.key),r=Me[54],Me[55]===void 0&&(Me[55]={});const en={};Me[55][ht.key]===void 0&&(Me[55][ht.key]=this.element({parent:r||"root"},i)),en.h=100,en.w={transition:{value:ht.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},en.color=ht.color,Me[55][ht.key].nodeId===void 0&&Me[55][ht.key].populate(en),r=Me[55][ht.key],Me[56]===void 0&&(Me[56]={});const lt={};Me[56][ht.key]===void 0&&(Me[56][ht.key]=this.element({parent:r||"root"},i)),lt.gap=10,lt.x=10,lt.y=35,lt.__layout=!0,Me[56][ht.key].nodeId===void 0&&Me[56][ht.key].populate(lt),r=Me[56][ht.key],Me[57]===void 0&&(Me[57]={});const $e={};Me[57][ht.key]===void 0&&(Me[57][ht.key]=this.element({parent:r||"root"},i)),$e.h=20,$e.w={transition:{value:ht.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},$e.color="0xffffffff",Me[57][ht.key].nodeId===void 0&&Me[57][ht.key].populate($e),r=Me[56][ht.key],Me[58]===void 0&&(Me[58]={});const Zt={};Me[58][ht.key]===void 0&&(Me[58][ht.key]=this.element({parent:r||"root"},i)),Zt.h=20,Zt.w={transition:{value:ht.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Zt.color="0xccccccff",Me[58][ht.key].nodeId===void 0&&Me[58][ht.key].populate(Zt),r=Me[56][ht.key],Me[59]===void 0&&(Me[59]={});const cn={};Me[59][ht.key]===void 0&&(Me[59][ht.key]=this.element({parent:r||"root"},i)),cn.h=20,cn.w={transition:{value:ht.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},cn.color="0x333333ff",Me[59][ht.key].nodeId===void 0&&Me[59][ht.key].populate(cn),r=Me[56][ht.key],Me[60]===void 0&&(Me[60]={});const hn={};Me[60][ht.key]===void 0&&(Me[60][ht.key]=this.element({parent:r||"root"},i)),hn.h=20,hn.w={transition:{value:ht.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},hn.color="0x000000ff",Me[60][ht.key].nodeId===void 0&&Me[60][ht.key].populate(hn)}};return y(()=>{oi(i.colors,s,Bn)},"colors"),y(()=>{i.w3;for(let ft=0;ft<i.colors.length;ft++){const Me={};Me.index=ft,Me.color=i.colors[ft],Me.key=ft,s[55][Me.key].set("w",{transition:{value:i.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),y(()=>{i.color;for(let ft=0;ft<i.colors.length;ft++){const Me={};Me.index=ft,Me.color=i.colors[ft],Me.key=ft,s[55][Me.key].set("color",Me.color)}}),y(()=>{i.w2;for(let ft=0;ft<i.colors.length;ft++){const Me={};Me.index=ft,Me.color=i.colors[ft],Me.key=ft,s[57][Me.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),y(()=>{i.w2;for(let ft=0;ft<i.colors.length;ft++){const Me={};Me.index=ft,Me.color=i.colors[ft],Me.key=ft,s[58][Me.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),y(()=>{i.w2;for(let ft=0;ft<i.colors.length;ft++){const Me={};Me.index=ft,Me.color=i.colors[ft],Me.key=ft,s[59][Me.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),y(()=>{i.w2;for(let ft=0;ft<i.colors.length;ft++){const Me={};Me.index=ft,Me.color=i.colors[ft],Me.key=ft,s[60][Me.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),s},effects:[function(r,i,f,d,y,x){i[43].set("w",r.w*.5)},function(r,i,f,d,y,x){i[44].set("w",r.w*.6)},function(r,i,f,d,y,x){i[45].set("w",r.w*.7)},function(r,i,f,d,y,x){i[46].set("w",r.w*.8)},function(r,i,f,d,y,x){i[47].set("w",r.w*.9)}],context:{}},state(){return{w:50,colors:["green","red","blue","yellow"],w3:150,w2:20}},hooks:{ready(){this.$setInterval(()=>{this.w=this.w===100?50:100,this.w2=this.w2===20?40:20,this.w3=this.w3===150?250:150},2e3)}}}),kC=new URLSearchParams(window.location.search),q5=!!kC.get("source"),K5=!!kC.get("fps"),Z5=at.Application({components:{SourceInfo:xC},code:{render:function(r,i,f,d,y,x){const s=[];let g,C;const R={};s[0]=this.element({parent:r||"root"},i),R.w=1920,R.h=1080,R.color=i.backgroundColor,s[0].populate(R);const b=f.components&&f.components.RouterView||d.RouterView;r=s[0];const _={};s[1]=this.element({parent:r||"root"},i),_.w=r.node.width*(100/100),_.h=r.node.height*(100/100);const D=[];if(typeof b<"u")for(let A in b.config.props)delete _[b.config.props[A]],D.push(b.config.props[A]);s[1].populate(_),r=s[1];const w={};w.w=r.node.width*(100/100),w.h=r.node.height*(100/100),g=w.is||"RouterView";let L;if(typeof g=="string"){if(L=f.components&&f.components[g]||d[g],!L)throw new Error('Component "RouterView" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(L=g);s[2]=L.call(null,{props:w},s[1],i),s[2][Symbol.for("slots")][0]?(r=s[2][Symbol.for("slots")][0],i=s[2]):r=s[2][Symbol.for("children")][0];const $=f.components&&f.components.FPScounter||d.FPScounter;r=s[0];const B={};s[3]=this.element({parent:r||"root"},i),B.x=1610,B.show=i.showFPS;const V=[];if(typeof $<"u")for(let A in $.config.props)delete B[$.config.props[A]],V.push($.config.props[A]);s[3].populate(B),r=s[3];const W={};W.x=1610,C=i.showFPS,Array.isArray(C)===!0&&(C=x(C).slice(0)),W.show=C,g=W.is||"FPScounter";let X;if(typeof g=="string"){if(X=f.components&&f.components[g]||d[g],!X)throw new Error('Component "FPScounter" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(X=g);s[4]=X.call(null,{props:W},s[3],i),s[4][Symbol.for("slots")][0]?(r=s[4][Symbol.for("slots")][0],i=s[4]):r=s[4][Symbol.for("children")][0];const ie=f.components&&f.components.SourceInfo||d.SourceInfo;r=s[0];const K={};s[5]=this.element({parent:r||"root"},i),K.ref="info",K.show=i.showInfo;const pe=[];if(typeof ie<"u")for(let A in ie.config.props)delete K[ie.config.props[A]],pe.push(ie.config.props[A]);s[5].populate(K),r=s[5];const ue={};ue.ref="info",C=i.showInfo,Array.isArray(C)===!0&&(C=x(C).slice(0)),ue.show=C,g=ue.is||"SourceInfo";let q;if(typeof g=="string"){if(q=f.components&&f.components[g]||d[g],!q)throw new Error('Component "SourceInfo" not found')}else typeof g=="function"&&g[Symbol.for("isComponent")]===!0&&(q=g);return s[6]=q.call(null,{props:ue},s[5],i),s[6][Symbol.for("slots")][0]?(r=s[6][Symbol.for("slots")][0],i=s[6]):r=s[6][Symbol.for("children")][0],s},effects:[function(r,i,f,d,y,x){i[0].set("color",r.backgroundColor)},function(r,i,f,d,y,x){(typeof skip3>"u"||skip3.indexOf("show")===-1)&&i[3].set("show",r.showFPS)},function(r,i,f,d,y,x){i[4][Symbol.for("props")].show=r.showFPS},function(r,i,f,d,y,x){(typeof skip5>"u"||skip5.indexOf("show")===-1)&&i[5].set("show",r.showInfo)},function(r,i,f,d,y,x){i[6][Symbol.for("props")].show=r.showInfo}],context:{}},state(){return{backgroundColor:"#1e293b",showFPS:K5,showInfo:!1}},routes:[{path:"/",component:L_,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>y_(()=>import("./Loading-f75e2371.js"),[])},{path:"/demos/intro",component:()=>new Promise(h=>{h(D_)})},{path:"/demos/theming",component:U_},{path:"/demos/tmdb",component:q_},{path:"/demos/sprites",component:Z_},{path:"/demos/focushandling",component:J_},{path:"/demos/memory-game",component:N5,announce:"Let's play Memory"},{path:"/demos/player",component:c5},{path:"/examples/positioning",component:e5},{path:"/examples/colors",component:h5},{path:"/examples/gradients",component:d5},{path:"/examples/transitions",component:p5},{path:"/examples/alpha",component:g5},{path:"/examples/scaling",component:m5},{path:"/examples/rotation",component:y5},{path:"/examples/keyinput",component:v5},{path:"/examples/texts",component:x5},{path:"/examples/images",component:w5},{path:"/examples/components",component:S5},{path:"/examples/forloop",component:C5},{path:"/examples/forloop-advanced",component:k5},{path:"/examples/effects",component:I5},{path:"/examples/showif",component:M5},{path:"/examples/events",component:R5},{path:"/examples/slots",component:P5},{path:"/examples/viewport",component:j5},...H5,{path:"/examples/resize",component:G5},{path:"/examples/languageplugin",component:W5},{path:"/examples/layout",component:Y5},{path:"/benchmarks/exponential",component:U5}],hooks:{ready(){q5===!0&&(this.showInfo=!0),this.$listen("changeBackground",h=>{this.backgroundColor=h?h+80:"#1e293b"}),this.$listen("clearBackground",()=>{this.backgroundColor="transparent"})}},input:{escape(){this.quit()},back(){this.$router.to("/")},sourceCode(){this.showInfo=!1;const h=Q5(this.$router.currentRoute.path);h&&window.open(`https://github.com/lightning-js/blits-example-app/tree/master/${h}`,"_blank")}}}),Q5=h=>({"/":"src/pages/Portal","/demos/loading":"src/pages/Loading","/demos/intro":"src/pages/Intro","/demos/theming":"src/pages/Theming","/demos/tmdb":"src/pages/Tmdb","/demos/sprites":"src/pages/Sprites","/demos/focushandling":"src/pages/FocusHandling","/demos/memory-game":"src/pages/MemoryGame","/demos/player":"src/pages/Player","/examples/positioning":"src/pages/Positioning","/examples/colors":"src/pages/Colors","/examples/gradients":"src/pages/Gradients","/examples/transitions":"src/pages/Transitions","/examples/alpha":"src/pages/Alpha","/examples/scaling":"src/pages/Scaling","/examples/rotation":"src/pages/Rotation","/examples/keyinput":"src/pages/KeyInput","/examples/texts":"src/pages/Texts","/examples/images":"src/pages/Images","/examples/components":"src/pages/Components","/examples/forloop":"src/pages/ForLoop","/examples/forloop-advanced":"src/pages/ForLoopAdvanced","/examples/effects":"src/pages/Effects","/examples/showif":"src/pages/ShowIf","/examples/events":"src/pages/Events","/examples/slots":"src/pages/Slots","/examples/viewport":"src/pages/Viewport","/examples/resize":"src/pages/Resize","/examples/languageplugin":"src/pages/LanguagePlugin","/examples/layout":"src/pages/Layout","/benchmarks/exponential":"src/pages/Exponential"})["/"+h]+".js",NS={light:{color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},dark:{color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"}},OS={large:{w:1200,h:900,block1:{h:720},block2:{y:560,h:300,w:890},graph:{x:270,y:140,w:890,h:400,offset:110,size:"large"}},small:{w:500,h:600,block1:{h:180},block2:{y:140,h:180,w:200},graph:{x:32,y:370,w:0,h:0,offset:0,size:"small"}}};at.Plugin(vC,"colors",{themes:{light:NS.light,dark:NS.dark},base:"light",current:"dark"});at.Plugin(vC,"sizes",{themes:{small:OS.small,large:OS.large},base:"small",current:"small"});at.Plugin(h_);at.Launch(Z5,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",keymap:{...p_(),85:"sourceCode"},fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"}],canvasColor:"transparent",viewportMargin:100});export{at as B,ma as S};
