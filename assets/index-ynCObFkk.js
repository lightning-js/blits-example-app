var n_=Object.defineProperty;var o_=(f,i,o)=>i in f?n_(f,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[i]=o;var P=(f,i,o)=>o_(f,typeof i!="symbol"?i+"":i,o);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const x of g.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&l(x)}).observe(document,{childList:!0,subtree:!0});function o(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function l(h){if(h.ep)return;h.ep=!0;const g=o(h);fetch(h.href,g)}})();const xe={currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),intervals:Symbol("intervals"),launched:Symbol("launched"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),routerHooks:Symbol("routerHooks"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),config:Symbol.for("config"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType"),isComponent:Symbol.for("isComponent"),effects:Symbol.for("effects"),removeGlobalEffects:Symbol.for("removeGlobalEffects")},Zo={[xe.settings]:{},get(f,i=null){return f in this[xe.settings]?this[xe.settings][f]:i},set(f,i){typeof f=="object"?Object.keys(f).forEach(o=>{this.set(o,f[o])}):this[xe.settings][f]=i}},Sh=()=>{},D0=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),KC=f=>{const i=Zo.get("debugLevel"),o={};return Object.defineProperty(o,"info",{get(){return(i>=1||Array.isArray(i)&&i.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${f} %c ${D0()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Sh}}),Object.defineProperty(o,"warn",{get(){return(i>=1||Array.isArray(i)&&i.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${f} %c ${D0()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Sh}}),Object.defineProperty(o,"error",{get(){return(i>=1||Array.isArray(i)&&i.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${f} %c ${D0()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Sh}}),Object.defineProperty(o,"debug",{get(){return(i>=2||Array.isArray(i)&&i.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${f} %c (${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Sh}}),o};let cn;const i_=()=>{cn=KC("Blits")},Ch={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},r_=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,s_=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,a_=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,P0={},Th=f=>{if(P0[f]!==void 0)return P0[f];const i=parseInt(f).toString(16).padStart(2,"0");return P0[f]=i,i},rl={normalize:(f="",i="0xffffffff")=>{if(f=f.toString(),f.startsWith("0x")&&f.length===10)return f;if(Ch[f]!==void 0)return Ch[f];if(r_.test(f)){f=f.replace("#","").toLowerCase(),f.length===3&&(f=f.split("").map(h=>h+h).join(""));const l="0x"+f.padEnd(8,"f");return Ch[f]=l,l}const o=s_.exec(f);if(o){const l=Th(o[3]),h=Th(o[5]),g=Th(o[7]);let x="ff";if(o[10]&&o[1]==="rgba"){const s=Math.min(Math.max(Math.round(parseFloat(o[10])*255),0),255);x=Th(s)}const w="0x"+l+h+g+x;return Ch[f]=w,w}return a_.test(f)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):i}},l_=(f="",i,o,l=null)=>{let h=0,g=0,x=[],w=null,s=0;const m=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,C=/^\s*(\/?>)\s*/,y=/^([A-Za-z0-9:.\-_@$]+)=\s*(["'])/,v=/^<>\s*/,M=/^\s*(<\/>)\s*/,b=()=>{f=U(f);try{return _(z),de(x)}catch(Z){throw(Z.name=="TemplateParseError"||Z.name=="TemplateStructureError")&&(Z.message=`${Z.message}
${Z.context}`),Z}},_=Z=>{h>=f.length||Z()},U=Z=>Z.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),F=Z=>{const j=f.slice(h).match(Z);return j&&(g=h,h+=j[0].length),j},z=()=>{F(v)?(x.push({[Symbol.for("componentType")]:null,[xe.type]:"opening",[xe.level]:s,[xe.cursorTagStart]:g}),s++,_(z)):_(B)},B=()=>{F(M)?(s--,x.push({[Symbol.for("componentType")]:null,[xe.type]:"closing",[xe.level]:s}),_(z)):_(G)},G=()=>{const Z=F(m);if(Z)w={[Symbol.for("componentType")]:Z[1],[xe.level]:s,[xe.cursorTagStart]:g},Z[0].startsWith("</")?(s--,w[xe.type]="closing",w[xe.level]=s):(w[xe.type]="opening",s++),_(X);else throw ee("InvalidTag")},X=()=>{const Z=F(C);if(Z){if(Z[1]==="/>"){if(w[xe.type]==="closing")throw ee("InvalidClosingTag");w[xe.type]="self-closing",s--}if(w[xe.type]==="opening"){const j=f.slice(h,f.indexOf("<",h));j&&(w.content=j,h+=j.length)}x.push(w),_(z)}else _(Q)},Q=()=>{const Z=F(y);if(Z){if(w[xe.type]==="closing")throw ee("AttributesInClosingTag");const j=Z[2],fe=new RegExp(`^(.*?)${j}\\s*`),he=F(fe);if(he){const we=W(Z[1],he[1]);w[we.name]=we.value,_(X)}else throw ee("MissingOrInvalidAttributeValue")}else throw ee("InvalidAttribute")},W=(Z,j)=>{if(Z.includes(".")){const[fe,he]=Z.split(".");return{name:fe,value:`{${he}: ${j}}`}}return["color",":color",":effects","effects"].includes(Z)?te(Z,j):{name:Z,value:j}},te=(Z,j)=>{let fe=j,he=rl.normalize(fe,null);if(he===null){const we=/'([^']+)'/g;let ge,be=0,Ie="";for(;(ge=we.exec(j))!==null;){const V=ge[1],De=ge.index,Se=ge[0].length;Ie+=j.slice(be,De),he=rl.normalize(V,null),he===null?Ie+=j.slice(De,De+Se):Ie+=`'${he}'`,be=De+Se}Ie+=j.slice(be),fe=Ie}else fe=he;return{name:Z,value:fe}},de=Z=>{let j=[],fe=!1,he={children:[]},we=he;for(let ge=0;ge<Z.length;ge++){let be=Z[ge];if(be[xe.level]===0&&be[xe.type]!=="closing"){if(fe)throw ae("MultipleTopLevelTags",be);if(be[":for"]!==void 0)throw ae("ForAttributeOnRootElement",be);fe=!0}if(be[xe.type]==="opening")j.push({[xe.level]:be[xe.level],[xe.type]:be[xe.type],[xe.cursorTagStart]:be[xe.cursorTagStart],[Symbol.for("componentType")]:be[Symbol.for("componentType")],parent:we});else if(be[xe.type]==="closing"){const V=j.length===0;let De=!1,Se=!1;if(V||(De=j[j.length-1][xe.level]!==be[xe.level],Se=j[j.length-1][Symbol.for("componentType")]!==be[Symbol.for("componentType")]),V||De||Se)throw ae("MismatchedClosingTag",be);we=j.pop().parent}const Ie={...be};delete Ie[xe.type],delete Ie[xe.level],delete Ie[xe.cursorTagStart],be[xe.type]==="opening"?(ge+1<Z.length&&Z[ge+1][xe.type]!=="closing"&&(Ie.children=[]),we.children.push(Ie),we=Ie):be[xe.type]==="self-closing"&&we.children.push(Ie)}if(j.length>0)throw ae("UnclosedTags",j);return he},I=10,q=50,ee=Z=>{const j=Y();Z=`${Z} in ${j}`;const fe=new Error(Z);fe.name="TemplateParseError";const he=Math.max(0,g-I),we=Math.min(f.length,h+q),ge=f.slice(he,we),be=h-he;return fe.context=ne(be,ge),fe},ae=(Z,j)=>{const fe=Y();Z=`${Z} in ${fe}`;const he=new Error(Z);he.name="TemplateStructureError",Array.isArray(j)?he.context=j.map(ge=>we(ge)).join(`
`):he.context=we(j);function we(ge){const be=Math.max(0,ge[xe.cursorTagStart]-I),Ie=f.slice(be,be+q);return ne(I,Ie)}return he},ne=(Z,j)=>{const fe=" ".repeat(Z)+"^";return`
${j}
${fe}
`},Y=()=>l||"Blits.Application";return b()};let Ht,Jh;function u_(f={children:[]},i=!1){const o={renderCode:["const elms = []","let componentType","const rootComponent = component","let propData","let slotComponent","let inSlot = false","let slotChildCounter = 0"],effectsCode:[],context:{props:[],components:this.components}};return Ht=-1,Jh=i,Jh===!0&&o.renderCode.push(`
      function propInComponent(prop, kind="dynamic") {
        const property = prop.includes('.') ? prop.split('.')[0] : prop
        if (kind === 'reactive' || prop.includes('.') === false) {
          if (property in component === false) {
            Log.warn('Property ' +  property + ' was accessed during render but is not defined on instance')
          }
        } else {
          const nestedKeys = prop.split('.')
          let base = component
          for(let i =0; i<nestedKeys.length;i++){
            if (base[nestedKeys[i]] === undefined) {
              Log.warn('Property ' +  nestedKeys.slice(0,i+1).join('.') + ' was accessed during render but is not defined on instance')
            }
            base = base[nestedKeys[i]]
          }
        }
      }
    `),QC.call(o,f),o.renderCode.push("return elms"),{render:new Function("parent","component","context","components","effect","getRaw","Log",o.renderCode.join(`
`)),effects:o.effectsCode.map(l=>new Function("component","elms","context","components","rootComponent","effect",l)),context:o.context}}const f_=function(f){const i=/\$\$?\w+(\.\w+)?/g,o=f.match(i);if(o!==null){const l=/\$shader/;return o.filter(h=>!l.test(h))}else return!1},tC=function(f,i,o="dynamic"){const l=f_(f);if(l!==!1)for(let h=0;h<l.length;h++){let g=l[h];o==="reactive"&&g.includes(".")&&(g=g.split(".")[0]),i.push(`propInComponent('${g.replace("$","")}', '${o}')`)}},ed=function(f,i=!1,o={key:!1,component:"component.",forceEffect:!1,forloop:!1}){const l=o.forceEffect?this.effectsCode:this.renderCode;i&&l.push(`parent = ${i}`),"key"in f&&(o.key=hi(f.key,o.component));const h=o.key?`elms[${Ht}][${o.key}]`:`elms[${Ht}]`;o.key&&l.push(`
      if(elms[${Ht}] === undefined) {
        elms[${Ht}] = {}
      }
    `),l.push(`const elementConfig${Ht} = {}`),o.forloop&&l.push(`if(${h} === undefined) {`),l.push(`
    ${h} = this.element({parent: parent || 'root'}, inSlot === true ? slotComponent : component)
  `),o.forloop&&l.push("}");const g=f.children;delete f.children,f[Symbol.for("componentType")]==="Slot"&&l.push(`elementConfig${Ht}[Symbol.for('isSlot')] = true`),Object.keys(f).forEach(x=>{if(x==="slot"&&l.push(`
        elementConfig${Ht}['parent'] = slotComponent[Symbol.for('slots')] !== undefined && Array.isArray(slotComponent[Symbol.for('slots')]) === true && slotComponent[Symbol.for('slots')].filter(slot => slot.ref === '${f.slot}').shift() || parent
      `),x==="key")return;const w=f[x];if(ZC(x)){if(o.holder&&x===":color")return;o.holder?this.effectsCode.push(`
        if(typeof skip${Ht} === 'undefined' ||
          skip${Ht}.indexOf('${x.substring(1)}') === -1)
          ${h}.set('${x.substring(1)}', ${hi(f[x],o.component)})
        `):this.effectsCode.push(`
            ${h}.set('${x.substring(1)}', ${hi(f[x],o.component)})
          `),Jh===!0&&o.component!=="scope."&&w.includes("$")&&tC(w,l,"reactive"),l.push(`elementConfig${Ht}['${x.substring(1)}'] = ${hi(w,o.component)}`)}else Jh===!0&&o.component!=="scope."&&w.includes("$")&&tC(w,l),l.push(`elementConfig${Ht}['${x}'] = ${Cg(w,x,o.component)}`)}),o.holder===!0&&l.push(`
    const skip${Ht} = []
    if(typeof cmp${Ht} !== 'undefined') {
      for(let key in cmp${Ht}[Symbol.for('config')].props) {
        delete elementConfig${Ht}[cmp${Ht}[Symbol.for('config')].props[key]]
        skip${Ht}.push(cmp${Ht}[Symbol.for('config')].props[key])
      }
    }
    `),o.forloop&&l.push(`if(${h}.nodeId === undefined) {`),l.push(`${h}.populate(elementConfig${Ht})`),l.push(`
    if(inSlot === true) {
      slotChildCounter -= 1
    }
  `),o.forloop&&l.push("}"),g&&QC.call(this,{children:g},`${h}`,o)},YC=function(f,i=!1,o={key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1}){const l=o.forceEffect?this.effectsCode:this.renderCode;l.push(`
    const cmp${Ht} =
      (context.components && context.components['${f[Symbol.for("componentType")]}']) || components['${f[Symbol.for("componentType")]}']
  `),"key"in f&&(o.key=hi(f.key,o.component));const h=f.children;delete f.children,ed.call(this,f,i,{...o,holder:!0}),i=o.key?`elms[${Ht}][${o.key}]`:`elms[${Ht}]`,Ht++;const g=o.key?`elms[${Ht}][${o.key}]`:`elms[${Ht}]`;o.key&&l.push(`
      if(elms[${Ht}] === undefined) {
        elms[${Ht}] = {}
      }
    `),i&&l.push(`parent = ${i}`),l.push(`const props${Ht} = {}`),o.forloop&&l.push(`if(${g} === undefined) {`),Object.keys(f).forEach(x=>{ZC(x)?(this.effectsCode.push(`
        ${g}[Symbol.for('props')]['${x.substring(1)}'] = ${hi(f[x],o.component)}`),l.push(`
        propData = ${hi(f[x],o.component)}
        if (Array.isArray(propData) === true) {
          propData = getRaw(propData).slice(0)
        }
        props${Ht}['${x.substring(1)}'] = propData`)):l.push(`props${Ht}['${x}'] = ${Cg(f[x],x,o.component)}`)}),l.push(`
    componentType = props${Ht}['is'] || '${f[Symbol.for("componentType")]}'

    let component${Ht}
    if(typeof componentType === 'string') {
      component${Ht} = context.components && context.components[componentType] || components[componentType]
      if(!component${Ht}) {
        throw new Error('Component "${f[Symbol.for("componentType")]}" not found')
      }
    } else if(typeof componentType === 'function' && componentType[Symbol.for('isComponent')] === true) {
      component${Ht} = componentType
    }

    ${g} = component${Ht}.call(null, {props: props${Ht}}, ${i}, component)

    if (${g}[Symbol.for('slots')][0]) {
      parent = ${g}[Symbol.for('slots')][0]
      slotComponent = ${g}
      inSlot = true
    } else {
      parent = ${g}[Symbol.for('children')][0]
    }
  `),o.forloop&&l.push("}"),h&&(o.forloop||l.push(`
        if(inSlot === true) {
          slotChildCounter = ${h.length}  + 1
        }
      `),Ht++,ed.call(this,{children:h},!1,{...o})),o.forloop||l.push(`
      if (inSlot === true && slotChildCounter === 0) {
        inSlot = false
      }
    `)},c_=function(f,i){const o=f[":for"];delete f[":for"];const l=f.range||f[":range"]||"{}";delete f.range,delete f[":range"];const h=f.key,g=hi(h,"scope."),x=!(f.$shallow&&f.$shallow.toLowerCase()==="false");delete f.$shallow,delete f.key;const s=/(.+)\s+in\s+(.+)/gi.exec(o),[m,C]=s[1].replace("(","").replace(")","").split(/\s*,\s*/),y=new RegExp(`(scope\\.(?!${m}\\.|${C}|key)(\\w+))`,"gi"),v={renderCode:[],effectsCode:[],context:{props:[],components:this.components}};if(i&&v.renderCode.push(`parent = ${i}`),C!==void 0){const W=new RegExp(`\\$${C}(?!['\\w])`).exec(h);Array.isArray(W)&&v.renderCode.push(`console.warn(" Using '${C}' in the key, like key=${h},  is not recommended")`)}const M=Ht;v.renderCode.push(`
    const created${M} = []

    let from${M}
    let to${M}

    const forloop${M} = (collection = [], elms, created) => {
      const rawCollection = getRaw(collection)
      const keys = new Set()
      let l = rawCollection.length

      const range = ${hi(l)} || {}
      from${M} = range['from'] || 0
      to${M} = 'to' in range ? range['to'] : rawCollection.length

      while(l--) {
        const ${m} = rawCollection[l]
  `),C!==void 0&&v.renderCode.push(`
        const ${C} = l
    `),v.renderCode.push(`
        if(l < to${M} && l >= from${M}) {
          keys.add('' +  ${hi(h,"")||"l"})
        }
      }
  `);const b=v.renderCode.length;v.renderCode.push(`
      created.length = 0
      const length = rawCollection.length
      const effects = []
      for(let __index = 0; __index < length; __index++) {
        if(__index < from${M} || __index >= to${M}) continue
        const scope = Object.create(component)
        parent = ${i}
        scope['${m}'] = rawCollection[__index]
  `),C!==""&&v.renderCode.push(`
        scope['${C}'] = __index
    `),v.renderCode.push(`
        scope['key'] = '' + ${g||"__index"}
  `),"ref"in f&&f.ref.indexOf("$")===-1&&(v.renderCode.push(`
        scope['__ref'] = '${f.ref}' + __index
    `),f.ref="$__ref"),v.renderCode.push(`
        created.push(scope.key)
  `),f[Symbol.for("componentType")]==="Element"||f[Symbol.for("componentType")]==="Slot"||f[Symbol.for("componentType")]==="Text"?(f[Symbol.for("componentType")]==="Text"&&(f.__textnode="true"),ed.call(v,f,i,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0})):YC.call(v,f,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});const _=v.effectsCode.filter(Q=>[...Q.matchAll(y)].length===0),U=v.effectsCode.filter(Q=>[...Q.matchAll(y)].length!==0);x===!1&&v.renderCode.push(`
      scope['${m}'] = null
      scope['${m}'] = collection[__index]
  `),_.forEach((Q,W)=>{const te=Q.indexOf(`scope.${W}`)>-1?`'${hi(s[2],"")}'`:null;Q.indexOf("Symbol.for('props')")===-1?v.renderCode.push(`
        let eff${W} = () => {
          ${Q}
        }
        effect(eff${W}, ${te})
        effects.push(eff${W})
        component[Symbol.for('effects')].push(eff${W})
      `):v.renderCode.push(`
        ${Q}
      `)}),v.renderCode.push(`
    }
    return effects
  }`);const F=[];F.push(`
      let i = created.length

      while (i--) {
        if (keys.has(created[i]) === false) {
          const key = created[i]
  `);const z=Ht;for(let Q=M;Q<=z;Q++)F.push(`
          elms[${Q}][key] && elms[${Q}][key].destroy()
          delete elms[${Q}][key]
      `);F.push(`
      }
    }
  `),v.renderCode.splice(b,0,...F);let B=`${hi(s[2],"")}`;B&&B.includes(".")&&(B=B.match(/[^.]+$/)[0]);const G=/\$([^,} ]+)/g,X=[...l.matchAll(G)].map(Q=>`'${Q[1]}'`);v.renderCode.push(`
    let forEffects${M}
    const eff${M} = () => {
      component[Symbol.for('removeGlobalEffects')](forEffects${M})
      forEffects${M} = null
      forEffects${M} = forloop${M}(${Cg(s[2],":for")}, elms, created${M})
    }

    component[Symbol.for('effects')].push(eff${M})

    effect(eff${M}, ['${B}', ${X.join(",")}] )
  `),U.forEach((Q,W)=>{const te=[...Q.matchAll(y)];let de=te.length;const I=[];for(;de--;){const q=te[de],ee=`component.${q[2]}`;I.indexOf(ee)===-1&&I.push(ee),q[2]!==m&&(Q=Q.substring(0,q.index)+ee+Q.substring(q.index+q[1].length))}v.renderCode.push(`
      const eff${M}_${W} = () => {
        void ${I.join(", ")}
        for(let __index = 0; __index < ${hi(s[2])}.length; __index++) {
          if(__index < from${M} || __index >= to${M}) continue
          const scope = {}
          scope['${C}'] = __index
          scope['${m}'] = ${hi(s[2])}[__index]
          scope['key'] = ${g||"__index"}
    `),v.renderCode.push(`
          ${Q}
        }
      }
      component[Symbol.for('effects')].push(eff${M}_${W})
      effect(eff${M}_${W})
    `)}),this.renderCode.push(v.renderCode.join(`
`))},QC=function(f,i=!1,o={}){f.children&&f.children.forEach(l=>{Ht++,Object.keys(l).indexOf(":for")>-1?c_.call(this,l,i):l[Symbol.for("componentType")]==="Element"||l[Symbol.for("componentType")]==="Slot"||l[Symbol.for("componentType")]==="Text"||l[Symbol.for("componentType")]==="Layout"?(l[Symbol.for("componentType")]==="Text"&&(l.__textnode="true"),l[Symbol.for("componentType")]==="Layout"&&(l.__layout="true"),ed.call(this,l,i,o)):YC.call(this,l,i,o)})},hi=(f,i="component.")=>{if(f===void 0)return f;const o=/('.*?')+/gi,l=/\$(\$(?=\$)|\$?)/g,h=f.matchAll(o),g=[];let x=0;for(const w of h)g.push(w[0]),f=f.replace(w[0],`[@@REPLACEMENT${x}@@]`),x++;return f=f.replace(l,(w,s)=>{if(s==="")return i;if(s==="$")return i+"$"}),g.forEach((w,s)=>{f=f.replace(`[@@REPLACEMENT${s}@@]`,w)}),f},Cg=(f="",i=!1,o="component.")=>{const l=/\$\w+/gi;let h;if(i==="content")if(f.startsWith("$"))h=`${o}${f.replace("$","")}`;else{const g=f.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");h=`'${h_(g,o)}'`}else if(i!=="color"&&/[^0-9%\s.eE]/.test(f)===!1&&!isNaN(parseFloat(f))){if(h=parseFloat(f),f.endsWith("%")){const x={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[i];x&&(h=`parent.node.${x} * (${h} / 100)`)}}else if(f.toLowerCase()==="true")h=!0;else if(f.toLowerCase()==="false")h=!1;else if(i.startsWith("@")&&f){const g=o.slice(0,-1);h=`${g}['${f.replace("$","")}'] && ${g}['${f.replace("$","")}'].bind(${g})`}else if(f.startsWith("$"))h=`${o}${f.replace("$","")}`;else if(l.exec(f)){const g=/\w+\s*:\s*(?:[^\s,}]+|".*?"|'.*?')/g,x=f.match(g);if(h={},x)for(let w=0;w<x.length;w++){const s=x[w].split(/\s*:\s*/);s&&d_(s[0],s[1],o,h)}return p_(h)}else h=`"${f}"`;return h},ZC=f=>f.startsWith(":"),h_=(f,i)=>{const o=/\{\{\s*(\$\S+)\s*\}\}/g,l=[...f.matchAll(o)];if(l.length)for(let[h,g]of l)f=f.replace(h,`${g.replace("$",`'+${i}`)}+'`);return f},d_=(f,i,o,l)=>{i.startsWith("$")?l[f]=`${o}${i.replace("$","")}`:l[f]=i},p_=f=>{const i=[];return Object.keys(f).forEach(o=>{i.push(`${o}: ${f[o]}`)}),` { ${i.join(", ")} }`},nC={};let m_=0;const g_=f=>`BlitsComponent::${f}_${nC[f]=(nC[f]||0)+1}`,y_=()=>++m_,Jr={},tg=(f,i,o,l=[])=>{Jr[i]&&Jr[i][f]&&Jr[i][f].apply(o,l)},v_=(f,i,o)=>{const l=xe[f];Jr[i]&&Jr[i][l]&&Jr[i][l].apply(o)},x_=(f={},i)=>{Jr[i]={},[...Object.keys(f),...Object.getOwnPropertySymbols(f)].forEach(l=>{typeof f[l]=="function"&&(Jr[i][l]=f[l])})};let sl=null,Ja=null,gd=!1;const w_=()=>{gd=!0},S_=()=>{gd=!1},td=new WeakMap,$h=new Map,oC=f=>{if($h.size!==0)for(const[i,o]of $h){if(f.indexOf(i)===-1)continue;const l=td.get(o);if(l!==void 0)for(const h of l.values())h.delete(i),$h.delete(i)}},zh=(f,i,o=!1)=>{if(sl!==null){if(gd)return;if(Array.isArray(Ja)===!0){if(Ja.includes(i)===!1)return}else if(Ja!==null&&i!==Ja)return;let l=td.get(f);l===void 0&&(l=new Map,td.set(f,l));let h=l.get(i);h===void 0&&(h=new Set,l.set(i,h)),h.add(sl),o===!0&&$h.set(sl,f)}},al=(f,i,o=!1)=>{if(gd===!0)return;const l=td.get(f);if(l===void 0)return;const h=l.get(i);if(h!==void 0)for(let g of h)g(o)},bh=(f,i=null)=>{sl=f,Ja=i,sl(),sl=null,Ja=null},ng=(f,i)=>{if(f===i)return!0;if(f.length!==i.length)return!1;let o=f.length;for(;o--;){const l=f[o],h=i[o];if(Array.isArray(l)&&Array.isArray(h)){if(ng(l,h)===!1)return!1}else if(typeof l=="object"&&l!==null&&typeof h=="object"&&h!==null){if(ng(Object.entries(l),Object.entries(h))===!1)return!1}else if(l!==h)return!1}return!0},Vh=["push","pop","shift","unshift","splice","sort"],iC=new WeakMap,Es=f=>{const i=f&&f[xe.raw];return i?Es(i):f},og=(f,i=null,o,l)=>{if(typeof f=="object"&&Array.isArray(f)===!1&&Object.getPrototypeOf(f)!==Object.prototype)return f;const h=iC.get(f);if(h!==void 0)return h;const g={get(w,s,m){return s===xe.raw?f:Array.isArray(w)===!0?typeof w[s]=="object"&&w[s]!==null?(Array.isArray(w[s])===!0&&zh(w,s,l),og(Es(w[s]),w,s)):Vh.indexOf(s)!==-1?function(...C){w_();const y=w[s].apply(this,C);return S_(),al(i,o),y}:s==="length"?f.length:Reflect.get(w,s,m):typeof w[s]=="object"&&w[s]!==null?(Array.isArray(w[s])===!0&&zh(w,s,l),og(Es(w[s]),w,s)):(zh(w,s,l),Reflect.get(w,s,m))},set(w,s,m,C){const y=Es(w[s]),v=Es(m);let M=!0,b=!1;return Array.isArray(v)===!0&&Array.isArray(y)===!0?b=ng(y,v):y===v&&(b=!0),b===!1&&(typeof m=="object"&&(Array.isArray(m)===!0?m=Es(m).slice(0):m!==null&&w[s]!==null&&w[s]!==void 0&&Array.isArray(w)===!1&&Object.getPrototypeOf(m)===Object.prototype&&(m=Object.assign(C[s],m))),M=Reflect.set(w,s,m,C)),M===!0&&b===!1&&(Array.isArray(w)===!0&&s in w&&al(i,o,!0),al(w,s,!0)),M}},x=new Proxy(f,g);return iC.set(f,x),x},JC=(f,i)=>(Object.keys(f).forEach(o=>{let l=f[o];if(f[o]!==null&&typeof f[o]=="object"){if(Object.getPrototypeOf(f[o])===Object.prototype)return JC(f[o]);if(Array.isArray(f[o])===!0)for(let h=0;h<Vh.length-1;h++)f[o][Vh[h]]=function(g){Array.prototype[Vh[h]].call(this,g),al(f,o)}}Object.defineProperty(f,o,{enumerable:!0,configurable:!0,get(){return zh(f,o,i),l},set(h){l!==h&&(l=h,al(f,o))}})}),f),C_=typeof Proxy<"u",Xu=(f,i="Proxy",o=!1)=>(C_===!1&&(i="defineProperty"),i==="defineProperty"?JC(f,o):og(f,void 0,void 0,o)),T_=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],b_={previous:null,current:null,get state(){return this.current},set state(f){T_.indexOf(f)>-1&&(f!==this.current||f==="focus")&&(cn.debug(`Setting lifecycle state from ${this.current} to ${f} for ${this.component.componentId}`),this.previous=this.current,this.current=f,v_(f,this.component[xe.identifier],this.component),tg(f,this.component[xe.identifier],this.component))}},k_="modulepreload",E_=function(f){return"/"+f},rC={},eT=function(i,o,l){let h=Promise.resolve();if(o&&o.length>0){let x=function(m){return Promise.all(m.map(C=>Promise.resolve(C).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),s=(w==null?void 0:w.nonce)||(w==null?void 0:w.getAttribute("nonce"));h=x(o.map(m=>{if(m=E_(m),m in rC)return;rC[m]=!0;const C=m.endsWith(".css"),y=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const v=document.createElement("link");if(v.rel=C?"stylesheet":k_,C||(v.as="script"),v.crossOrigin="",v.href=m,s&&v.setAttribute("nonce",s),document.head.appendChild(v),C)return new Promise((M,b)=>{v.addEventListener("load",M),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${m}`)))})}))}function g(x){const w=new Event("vite:preloadError",{cancelable:!0});if(w.payload=x,window.dispatchEvent(w),!w.defaultPrevented)throw x}return h.then(x=>{for(const w of x||[])w.status==="rejected"&&g(w.reason);return i().catch(g)})},A_={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",VITE_TMDB_KEY:"ABC123"};function I_(f,i=!1,o){const l={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},h=f.getContext(i?"webgl2":"webgl",l)||f.getContext("experimental-webgl",l);if(!h)throw new Error("Unable to create WebGL context");return o?new Proxy(h,{get(g,x){const w=g[x];return typeof w=="function"?(o.increment(String(x)),w.bind(g)):w}}):h}function ut(f,i){if(fl()!==!0&&!f)throw new Error(i||"Assertion failed")}function sC(f,i,o){const l=Math.trunc(f>>>24),h=Math.trunc(f>>>16&255),g=Math.trunc(f>>>8&255),x=Math.trunc(f&255),w=Math.trunc(i>>>24),s=Math.trunc(i>>>16&255),m=Math.trunc(i>>>8&255),C=Math.trunc(i&255),y=Math.round(w*o+l*(1-o)),v=Math.round(s*o+h*(1-o)),M=Math.round(m*o+g*(1-o)),b=Math.round(C*o+x*(1-o));return(y<<24|v<<16|M<<8|b)>>>0}function M_(f,i){const o=f>>>24,l=f>>>16&255,h=f>>>8&255,g=Math.trunc((f&255)*i);return(o<<24|l<<16|h<<8|g)>>>0}let tT=!0;function __(f){tT=f==="webgl"}function kh(f,i,o=!1){const l=(f&255)/255*i,h=tT?l:1,g=Math.trunc((f>>>24)*h),x=Math.trunc((f>>>16&255)*h),w=Math.trunc((f>>>8&255)*h),s=Math.trunc(l*255);return o?(s<<24|w<<16|x<<8|g)>>>0:(g<<24|x<<16|w<<8|s)>>>0}function nd(f,i){return Object.prototype.hasOwnProperty.call(f,i)}function fl(){return A_&&!0}let R_=1;function L_(){return R_++}class Lr{constructor(){P(this,"eventListeners",{})}on(i,o){let l=this.eventListeners[i];l||(l=[]),l.push(o),this.eventListeners[i]=l}off(i,o){const l=this.eventListeners[i];if(!l)return;if(!o){delete this.eventListeners[i];return}const h=l.indexOf(o);h>=0&&l.splice(h,1)}once(i,o){const l=(h,g)=>{this.off(i,l),o(h,g)};this.on(i,l)}emit(i,o){const l=this.eventListeners[i];l&&[...l].forEach(h=>{h(this,o)})}removeAllListeners(){this.eventListeners={}}}var Un;(function(f){f[f.generic=0]="generic",f[f.color=1]="color",f[f.image=2]="image",f[f.noise=3]="noise",f[f.renderToTexture=4]="renderToTexture",f[f.subTexture=5]="subTexture"})(Un||(Un={}));class Qu extends Lr{constructor(o){super();P(this,"txManager");P(this,"_dimensions",null);P(this,"_error",null);P(this,"state","initial");P(this,"renderableOwners",new Set);P(this,"renderable",!1);P(this,"type",Un.generic);P(this,"preventCleanup",!1);P(this,"ctxTexture");P(this,"textureData",null);this.txManager=o}get dimensions(){return this._dimensions}get error(){return this._error}setRenderableOwner(o,l){var g,x;const h=this.renderableOwners.size;if(l===!0){this.renderableOwners.has(o)===!1&&this.renderableOwners.add(o);const w=this.renderableOwners.size;w>h&&w===1&&(this.renderable=!0,(g=this.onChangeIsRenderable)==null||g.call(this,!0),this.load())}else{this.renderableOwners.delete(o);const w=this.renderableOwners.size;w<h&&w===0&&(this.renderable=!1,(x=this.onChangeIsRenderable)==null||x.call(this,!1),this.txManager.orphanTexture(this))}}load(){this.txManager.loadTexture(this)}loadCtxTexture(){return this.ctxTexture===void 0&&(this.ctxTexture=this.txManager.renderer.createCtxTexture(this)),this.ctxTexture}free(){var o;(o=this.ctxTexture)==null||o.free()}destroy(){this.removeAllListeners(),this.free(),this.freeTextureData(),this.renderableOwners.clear()}freeTextureData(){this.textureData=null}setState(o,l){if(this.state===o)return;let h=null;o==="loaded"?(l!==void 0&&"width"in l&&"height"in l&&l.width!==void 0&&l.height!==void 0&&(this._dimensions=l),h=this._dimensions):o==="failed"&&(this._error=l,h=this._error),this.state=o,this.emit(o,h)}async getTextureData(){return this.textureData===null&&(this.textureData=await this.getTextureSource()),this.textureData}static makeCacheKey(o){return!1}static resolveDefaults(o){return{}}}const D_=/^(data|ftps?|https?):/,Zu=f=>{const i=f>>>24,o=f>>>16&255,l=f>>>8&255,h=f&255;return[i/255,o/255,l/255,h/255]},aC=f=>{const i=f>>>24,o=f>>>16&255,l=f>>>8&255,h=f&255;return[i,o,l,h]};function lC(f){return(f&255)/255}function O0(f){const i=Math.floor(f[0]*255),o=Math.floor(f[1]*255),l=Math.floor(f[2]*255),h=Math.floor(f[3]*255);return`rgba(${i},${o},${l},${h.toFixed(4)})`}function el(f,i,o,l,h){return h?(h.x1=f,h.y1=i,h.x2=o,h.y2=l,h):{x1:f,y1:i,x2:o,y2:l}}function N0(f,i){return f.x1<i.x2&&f.x2>i.x1&&f.y1<i.y2&&f.y2>i.y1}function P_(f,i){return i?(i.x=f.x1,i.y=f.y1,i.width=f.x2-f.x1,i.height=f.y2-f.y1,i):{x:f.x1,y:f.y1,width:f.x2-f.x1,height:f.y2-f.y1}}function nT(f,i,o){const l=Math.max(f.x,i.x),h=Math.max(f.y,i.y),g=Math.min(f.x+f.width,i.x+i.width)-l,x=Math.min(f.y+f.height,i.y+i.height)-h;return g>0&&x>0?o?(o.x=l,o.y=h,o.width=g,o.height=x,o):{x:l,y:h,width:g,height:x}:o?(o.x=0,o.y=0,o.width=0,o.height=0,o):{x:0,y:0,width:0,height:0}}function oT(f,i){return i?(i.x=f.x,i.y=f.y,i.width=f.width,i.height=f.height,i):{x:f.x,y:f.y,width:f.width,height:f.height}}function O_(f,i){return f===i?!0:f===null||i===null?!1:f.x===i.x&&f.y===i.y&&f.width===i.width&&f.height===i.height}function U0(f,i){return f.x1<=i.x2&&f.y1<=i.y2&&f.x2>=i.x1&&f.y2>=i.y1}function N_(f,i){return f.x1<i.x1&&f.x2>i.x2&&f.y1<i.y1&&f.y2>i.y2}function U_(f){return f.x1<f.x2&&f.y1<f.y2}function ig(f,i){return el(f.x1-i[3],f.y1-i[0],f.x2+i[1],f.y2+i[2])}function B_(f){if(self.location.protocol==="file:"&&!D_.test(f)){const o=self.location.pathname.split("/");o.pop();const l=o.join("/"),h=self.location.protocol+"//"+l;return f.charAt(0)==="."&&(f=f.slice(1)),f.charAt(0)==="/"&&(f=f.slice(1)),h+"/"+f}return new URL(f,self.location.href).href}function B0(f){return f.startsWith("data:")===!0}function j_(f){var s,m;f=f.replace(/^data:/,"");const i=((s=f.match(/image\/[^;]+/))==null?void 0:s[0])||"",o=f.replace(/^[^,]+,/,""),l=1024,h=atob(o),g=h.length,x=Math.ceil(g/l),w=new Array(x);for(let C=0;C<x;++C){const y=C*l,v=Math.min(y+l,g),M=new Array(v-y);for(let b=y,_=0;b<v;++_,++b)M[_]=(m=h[b])==null?void 0:m.charCodeAt(0);w[C]=new Uint8Array(M)}return new Blob(w,{type:i})}class yo{constructor(){P(this,"ta");P(this,"tb");P(this,"tx");P(this,"tc");P(this,"td");P(this,"ty");P(this,"_floatArr",null);P(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return F_}static multiply(i,o,l){const h=i.ta*o.ta+i.tb*o.tc,g=i.ta*o.tb+i.tb*o.td,x=i.ta*o.tx+i.tb*o.ty+i.tx,w=i.tc*o.ta+i.td*o.tc,s=i.tc*o.tb+i.td*o.td,m=i.tc*o.tx+i.td*o.ty+i.ty;return l||(l=new yo),l.ta=h,l.tb=g,l.tx=x,l.tc=w,l.td=s,l.ty=m,l.mutation=!0,l}static identity(i){return i||(i=new yo),i.ta=1,i.tb=0,i.tx=0,i.tc=0,i.td=1,i.ty=0,i.mutation=!0,i}static translate(i,o,l){return l||(l=new yo),l.ta=1,l.tb=0,l.tx=i,l.tc=0,l.td=1,l.ty=o,l.mutation=!0,l}static scale(i,o,l){return l||(l=new yo),l.ta=i,l.tb=0,l.tx=0,l.tc=0,l.td=o,l.ty=0,l.mutation=!0,l}static rotate(i,o){const l=Math.cos(i),h=Math.sin(i);return o||(o=new yo),o.ta=l,o.tb=-h,o.tx=0,o.tc=h,o.td=l,o.ty=0,o.mutation=!0,o}static copy(i,o){return o||(o=new yo),o.ta=i.ta,o.tc=i.tc,o.tb=i.tb,o.td=i.td,o.tx=i.tx,o.ty=i.ty,o.mutation=!0,o}translate(i,o){return this.tx=this.ta*i+this.tb*o+this.tx,this.ty=this.tc*i+this.td*o+this.ty,this.mutation=!0,this}scale(i,o){return this.ta=this.ta*i,this.tb=this.tb*o,this.tc=this.tc*i,this.td=this.td*o,this.mutation=!0,this}rotate(i){if(i===0||!(i%Math.PI*2))return this;const o=Math.cos(i),l=Math.sin(i),h=this.ta*o+this.tb*l,g=this.tb*o-this.ta*l,x=this.tc*o+this.td*l,w=this.td*o-this.tc*l;return this.ta=h,this.tb=g,this.tc=x,this.td=w,this.mutation=!0,this}multiply(i){return yo.multiply(this,i,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const F_=new yo,Eh=0,Ah=2,Ih=4,Mh=6,_h=1,Rh=3,Lh=5,Dh=7;class tl{constructor(i){P(this,"data");this.data=new Float32Array(8),i&&(this.data[Eh]=i[Eh],this.data[Ah]=i[Ah],this.data[Ih]=i[Ih],this.data[Mh]=i[Mh],this.data[_h]=i[_h],this.data[Rh]=i[Rh],this.data[Lh]=i[Lh],this.data[Dh]=i[Dh])}static translate(i,o,l,h,g,x,w,s,m){return m||(m=new tl),m.data[Eh]=i,m.data[Ah]=l,m.data[Ih]=g,m.data[Mh]=w,m.data[_h]=o,m.data[Rh]=h,m.data[Lh]=x,m.data[Dh]=s,m}get x1(){return this.data[Eh]}get x2(){return this.data[Ah]}get x3(){return this.data[Ih]}get x4(){return this.data[Mh]}get y1(){return this.data[_h]}get y2(){return this.data[Rh]}get y3(){return this.data[Lh]}get y4(){return this.data[Dh]}}const iT=(f,i,o,l)=>{const h=3*f,g=3*(o-f)-h,x=1-h-g,w=3*i,s=3*(l-i)-w,m=1-w-s;return function(C){if(C>=1)return 1;if(C<=0)return 0;let y=.5,v,M,b;for(let F=0;F<20;F++){if(v=y*(y*(y*x+g)+h),b=C-v,b>-1e-8&&b<1e-8)return y*(y*(y*m+s)+w);if(M=y*(y*(3*x)+2*g)+h,M>1e-10&&M<1e-10)break;y+=b/M}let _=0,U=1;for(let F=0;F<20;F++){if(y=.5*(_+U),v=y*(y*(y*x+g)+h),b=C-v,b>-1e-8&&b<1e-8)return y*(y*(y*m+s)+w);b<0?U=y:_=y}}},Hh={},$_={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},Gh=f=>f,z_=f=>{const i=/-?\d*\.?\d+/g,o=f.match(i);if(o){const[l,h,g,x]=o,w=parseFloat(l||"0.42"),s=parseFloat(h||"0"),m=parseFloat(g||"1"),C=parseFloat(x||"1"),y=iT(w,s,m,C);return Hh[f]=y,y}return console.warn("Unknown cubic-bezier timing: "+f),Gh},V_=f=>{if(f==="linear")return Gh;if(Hh[f]!==void 0)return Hh[f]||Gh;if(f==="step-start")return()=>1;if(f==="step-end")return o=>o===1?1:0;const i=$_[f];if(i!==void 0){const[o,l,h,g]=i,x=iT(o,l,h,g);return Hh[f]=x,x}return f.startsWith("cubic-bezier")?z_(f):(console.warn("Unknown timing function: "+f),Gh)};function uC(f){return(f/1024/1024).toFixed(2)}class H_ extends Lr{constructor(o,l,h){super();P(this,"node");P(this,"props");P(this,"settings");P(this,"progress",0);P(this,"delayFor",0);P(this,"delay",0);P(this,"timingFunction");P(this,"propValuesMap",{});P(this,"dynPropValuesMap");this.node=o,this.props=l;for(const w in l)if(w!=="shaderProps")this.propValuesMap.props===void 0&&(this.propValuesMap.props={}),this.propValuesMap.props[w]={start:o[w]||0,target:l[w]};else if(o.shader.type!=="DynamicShader"){this.propValuesMap.shaderProps={};for(const s in l.shaderProps)this.propValuesMap.shaderProps[s]={start:o.shader.props[s],target:l.shaderProps[s]}}else{const s=Object.keys(l.shaderProps),m=s.length;this.dynPropValuesMap={};for(let C=0;C<m;C++){const y=s[C],v=l.shaderProps[y];this.dynPropValuesMap[y]={};const M=Object.entries(v),b=M.length;for(let _=0;_<b;_++){const[U,F]=M[_];this.dynPropValuesMap[y][U]={start:o.shader.props[y][U],target:F}}}}const g=h.easing||"linear",x=h.delay??0;this.settings={duration:h.duration??0,delay:x,easing:g,loop:h.loop??!1,repeat:h.repeat??0,repeatDelay:h.repeatDelay??0,stopMethod:h.stopMethod??!1},this.timingFunction=V_(g),this.delayFor=x,this.delay=x}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(o,l){const h=Object.entries(l),g=h.length;for(let x=0;x<g;x++){const[w,s]=h[x];o[w]=s.start}}restore(){if(this.reset(),this.propValuesMap.props!==void 0&&this.restoreValues(this.node,this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const o=Object.keys(this.dynPropValuesMap),l=o.length;if(l>0)for(let h=0;h<l;h++){const g=o[h];this.restoreValues(this.node.shader.props[g],this.dynPropValuesMap[g])}}}reverseValues(o){const l=Object.entries(o),h=l.length;for(let g=0;g<h;g++){const[x,w]=l[g];o[x]={start:w.target,target:w.start}}}reverse(){if(this.progress=0,this.propValuesMap.props!==void 0&&this.reverseValues(this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.reverseValues(this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const o=Object.keys(this.dynPropValuesMap),l=o.length;if(l>0)for(let h=0;h<l;h++){const g=o[h];this.reverseValues(this.dynPropValuesMap[g])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(o,l,h){return(this.timingFunction(o)||o)*(h-l)+l}updateValue(o,l,h,g){if(this.progress===1)return l;if(this.progress===0)return h;const x=l;if(o.indexOf("color")!==-1){if(h===x)return h;if(g){const w=this.timingFunction(this.progress)||this.progress;return sC(h,x,w)}return sC(h,x,this.progress)}return g?this.applyEasing(this.progress,h,x):h+(x-h)*this.progress}updateValues(o,l,h){const g=Object.entries(l),x=g.length;for(let w=0;w<x;w++){const[s,m]=g[w];o[s]=this.updateValue(s,m.target,m.start,h)}}update(o){const{duration:l,loop:h,easing:g,stopMethod:x}=this.settings,{delayFor:w}=this;if(this.node.destroyed){this.emit("destroyed",{});return}if(l===0&&w===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=o,this.delayFor>=0)return;o=-this.delayFor,this.delayFor=0}if(l===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=o/l,this.progress>1&&(this.progress=h?0:1,this.delayFor=this.delay,x)){this.emit("finished",{});return}if(this.propValuesMap.props!==void 0&&this.updateValues(this.node,this.propValuesMap.props,g),this.propValuesMap.shaderProps!==void 0&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,g),this.dynPropValuesMap!==void 0){const s=Object.keys(this.dynPropValuesMap),m=s.length;if(m>0)for(let C=0;C<m;C++){const y=s[C];this.updateValues(this.node.shader.props[y],this.dynPropValuesMap[y],g)}}this.progress<1&&this.emit("tick",{progress:this.progress}),this.progress===1&&this.emit("finished",{})}}class G_ extends Lr{constructor(o,l){super();P(this,"manager");P(this,"animation");P(this,"stoppedPromise");P(this,"stoppedResolve",null);P(this,"state");this.manager=o,this.animation=l,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this),this.onTick=this.onTick.bind(this),this.onDestroy=this.onDestroy.bind(this)}start(){return this.state!=="running"&&this.state!=="scheduled"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="scheduled"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.animation.on("tick",this.onTick),this.animation.on("destroyed",this.onDestroy),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating),this.animation.off("tick",this.onTick),this.animation.off("destroy",this.onDestroy)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(o=>{this.stoppedResolve=o}))}onDestroy(){this.unregisterAnimation(),this.state="stopped"}onFinished(){ut(this.stoppedResolve);const{loop:o,stopMethod:l}=this.animation.settings;if(l==="reverse"){this.animation.once("finished",this.onFinished),this.animation.reverse();return}o||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.state="running",this.emit("animating",this)}onTick(o,l){this.emit("tick",l)}}var xo;(function(f){f[f.Init=0]="Init",f[f.OutOfBounds=2]="OutOfBounds",f[f.InBounds=4]="InBounds",f[f.InViewport=8]="InViewport"})(xo||(xo={}));const Ju=new Map;Ju.set(xo.Init,"init");Ju.set(xo.OutOfBounds,"outOfBounds");Ju.set(xo.InBounds,"inBounds");Ju.set(xo.InViewport,"inViewport");var Ue;(function(f){f[f.Children=1]="Children",f[f.ScaleRotate=2]="ScaleRotate",f[f.Local=4]="Local",f[f.Global=8]="Global",f[f.Clipping=16]="Clipping",f[f.CalculatedZIndex=32]="CalculatedZIndex",f[f.ZIndexSortedChildren=64]="ZIndexSortedChildren",f[f.PremultipliedColors=128]="PremultipliedColors",f[f.WorldAlpha=256]="WorldAlpha",f[f.RenderState=512]="RenderState",f[f.IsRenderable=1024]="IsRenderable",f[f.RenderTexture=2048]="RenderTexture",f[f.ParentRenderTexture=4096]="ParentRenderTexture",f[f.RenderBounds=8192]="RenderBounds",f[f.None=0]="None",f[f.All=14335]="All"})(Ue||(Ue={}));class rg extends Lr{constructor(o,l){super();P(this,"stage");P(this,"children",[]);P(this,"_id",L_());P(this,"props");P(this,"updateType",Ue.All);P(this,"childUpdateType",Ue.None);P(this,"globalTransform");P(this,"scaleRotateTransform");P(this,"localTransform");P(this,"sceneGlobalTransform");P(this,"renderCoords");P(this,"sceneRenderCoords");P(this,"renderBound");P(this,"strictBound");P(this,"preloadBound");P(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});P(this,"isRenderable",!1);P(this,"renderState",xo.Init);P(this,"worldAlpha",1);P(this,"premultipliedColorTl",0);P(this,"premultipliedColorTr",0);P(this,"premultipliedColorBl",0);P(this,"premultipliedColorBr",0);P(this,"calcZIndex",0);P(this,"hasRTTupdates",!1);P(this,"parentHasRenderTexture",!1);P(this,"rttParent",null);P(this,"destroyed",!1);P(this,"onTextureLoaded",(o,l)=>{var h,g;this.autosizeNode(l),this.setUpdateType(Ue.IsRenderable),this.stage.requestRender(),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),l.width>1&&l.height>1&&this.emit("loaded",{type:"texture",dimensions:l}),((g=(h=this.props.textureOptions)==null?void 0:h.resizeMode)==null?void 0:g.type)==="contain"&&this.setUpdateType(Ue.Local)});P(this,"onTextureFailed",(o,l)=>{this.setUpdateType(Ue.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("failed",{type:"texture",error:l})});P(this,"onTextureFreed",()=>{this.setUpdateType(Ue.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("freed",{type:"texture"})});this.stage=o,this.props={...l,parent:null,texture:null,src:null,rtt:!1},this.parent=l.parent,this.texture=l.texture,this.src=l.src,this.rtt=l.rtt,l.boundsMargin&&(this.boundsMargin=Array.isArray(l.boundsMargin)?l.boundsMargin:[l.boundsMargin,l.boundsMargin,l.boundsMargin,l.boundsMargin]),this.setUpdateType(Ue.ScaleRotate|Ue.Local|Ue.RenderBounds|Ue.RenderState),fl()===!1&&l.preventCleanup===!0&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.stage.defaultTexture&&this.stage.defaultTexture.state!=="loaded"&&this.stage.defaultTexture.once("loaded",()=>{this.setUpdateType(Ue.IsRenderable)})}loadTexture(){const{texture:o}=this.props;ut(o),queueMicrotask(()=>{var l;if(this.textureOptions.preload===!0&&this.stage.txManager.loadTexture(o),o.preventCleanup=((l=this.props.textureOptions)==null?void 0:l.preventCleanup)??!1,o.on("loaded",this.onTextureLoaded),o.on("failed",this.onTextureFailed),o.on("freed",this.onTextureFreed),this.parentHasRenderTexture){this.notifyParentRTTOfUpdate();return}o.state==="loaded"?(ut(o.dimensions),this.onTextureLoaded(o,o.dimensions)):o.state==="failed"?(ut(o.error),this.onTextureFailed(o,o.error)):o.state==="freed"&&this.onTextureFreed(o)})}unloadTexture(){this.texture!==null&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(o){this.autosize&&(this.width=o.width,this.height=o.height)}setUpdateType(o){this.updateType|=o;const l=this.props.parent;l&&(l.updateType&Ue.Children)===0&&l.setUpdateType(Ue.Children)}sortChildren(){this.children.sort((o,l)=>o.calcZIndex-l.calcZIndex)}updateScaleRotateTransform(){const{rotation:o,scaleX:l,scaleY:h}=this.props;if(o===0&&l===1&&h===1){this.scaleRotateTransform=void 0;return}this.scaleRotateTransform=yo.rotate(o,this.scaleRotateTransform).scale(l,h)}updateLocalTransform(){var m,C;const{x:o,y:l,width:h,height:g}=this.props,x=this.props.mountX*h,w=this.props.mountY*g;if(this.scaleRotateTransform){const y=this.props.pivotX*h,v=this.props.pivotY*g;this.localTransform=yo.translate(o-x+y,l-w+v,this.localTransform).multiply(this.scaleRotateTransform).translate(-y,-v)}else this.localTransform=yo.translate(o-x,l-w,this.localTransform);const s=this.props.texture;if(s&&s.dimensions&&((C=(m=this.props.textureOptions)==null?void 0:m.resizeMode)==null?void 0:C.type)==="contain"){let y=1,v=1,M=0,b=0;const{width:_,height:U}=s.dimensions,F=_/U,z=h/g;if(F>z){const B=h/_,G=U*B;b=(g-G)/2,v=G/g}else{const B=g/U,G=_*B;M=(h-G)/2,y=G/h}this.localTransform.translate(M,b).scale(y,v)}this.setUpdateType(Ue.Global)}update(o,l){this.updateType&Ue.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(Ue.Local)),this.updateType&Ue.Local&&(this.updateLocalTransform(),this.setUpdateType(Ue.Global));const h=this.props.parent;let g=null;if(this.updateType&Ue.RenderTexture&&this.rtt&&(this.hasRTTupdates=!0),this.updateType&Ue.Global&&(ut(this.localTransform),this.parentHasRenderTexture===!0&&(h==null?void 0:h.rtt)===!0?(this.globalTransform=yo.identity(),this.sceneGlobalTransform=yo.copy((h==null?void 0:h.globalTransform)||yo.identity()).multiply(this.localTransform)):this.parentHasRenderTexture===!0&&(h==null?void 0:h.rtt)===!1?(this.sceneGlobalTransform=yo.copy((h==null?void 0:h.sceneGlobalTransform)||this.localTransform).multiply(this.localTransform),this.globalTransform=yo.copy((h==null?void 0:h.globalTransform)||this.localTransform,this.globalTransform)):this.globalTransform=yo.copy((h==null?void 0:h.globalTransform)||this.localTransform,this.globalTransform),h!==null&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(Ue.RenderState|Ue.Children),this.childUpdateType|=Ue.Global,this.clipping===!0&&(this.setUpdateType(Ue.Clipping|Ue.RenderBounds),this.childUpdateType|=Ue.RenderBounds)),this.updateType&Ue.RenderBounds&&(this.createRenderBounds(),this.setUpdateType(Ue.RenderState),this.setUpdateType(Ue.Children),this.childUpdateType|=Ue.RenderBounds),this.updateType&Ue.RenderState&&(g=this.checkRenderBounds(),this.setUpdateType(Ue.IsRenderable),g!==xo.OutOfBounds&&this.updateRenderState(g)),this.updateType&Ue.WorldAlpha&&(h?this.worldAlpha=h.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(Ue.Children|Ue.PremultipliedColors|Ue.IsRenderable),this.childUpdateType|=Ue.WorldAlpha),this.updateType&Ue.IsRenderable&&this.updateIsRenderable(),this.updateType&Ue.Clipping&&(this.calculateClippingRect(l),this.setUpdateType(Ue.Children),this.childUpdateType|=Ue.Clipping,this.childUpdateType|=Ue.RenderBounds),this.updateType&Ue.PremultipliedColors&&(this.premultipliedColorTl=kh(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=kh(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=kh(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=kh(this.props.colorBr,this.worldAlpha,!0))),h!==null&&this.updateType&Ue.CalculatedZIndex&&(this.calculateZIndex(),h.setUpdateType(Ue.ZIndexSortedChildren)),this.props.strictBounds===!0&&this.renderState===xo.OutOfBounds){this.updateType&=~Ue.RenderBounds;return}if(this.updateType&Ue.Children&&this.children.length>0)for(let x=0,w=this.children.length;x<w;x++){const s=this.children[x];if(s.setUpdateType(this.childUpdateType),s.updateType===0)continue;let m=this.clippingRect;this.rtt===!0&&(m={x:0,y:0,width:0,height:0,valid:!1}),s.update(o,m)}this.parentHasRenderTexture&&this.updateType>0&&this.notifyParentRTTOfUpdate(),this.updateType&Ue.ZIndexSortedChildren&&this.sortChildren(),g===xo.OutOfBounds&&(this.updateRenderState(g),this.updateIsRenderable(),this.rtt===!0&&g===xo.OutOfBounds&&this.notifyChildrenRTTOfUpdate(g)),this.updateType=0,this.childUpdateType=0}findParentRTTNode(){let o=this.parent;for(;o&&!o.rtt;)o=o.parent;return o}getRTTParentRenderState(){const o=this.rttParent||this.findParentRTTNode();return o?o.renderState:null}notifyChildrenRTTOfUpdate(o){for(const l of this.children)l.updateRenderState(o),l.updateIsRenderable(),l.notifyChildrenRTTOfUpdate(o)}notifyParentRTTOfUpdate(){if(this.parent===null)return;const o=this.rttParent||this.findParentRTTNode();o&&(o.hasRTTupdates=!0,o.setUpdateType(Ue.RenderTexture),o.parentHasRenderTexture===!0&&o.notifyParentRTTOfUpdate())}checkRenderBounds(){return ut(this.renderBound),ut(this.strictBound),ut(this.preloadBound),U0(this.renderBound,this.strictBound)?xo.InViewport:U0(this.renderBound,this.preloadBound)?xo.InBounds:N_(this.renderBound,this.strictBound)?xo.InViewport:this.parent!==null&&(this.props.width===0||this.props.height===0)?this.parent.renderState:xo.OutOfBounds}updateBoundingRect(){const o=this.sceneGlobalTransform||this.globalTransform,l=this.sceneRenderCoords||this.renderCoords;ut(o),ut(l);const{tb:h,tc:g}=o,{x1:x,y1:w,x3:s,y3:m}=l;if(h===0||g===0)this.renderBound=el(x,w,s,m,this.renderBound);else{const{x2:C,x4:y,y2:v,y4:M}=l;this.renderBound=el(Math.min(x,C,s,y),Math.min(w,v,m,M),Math.max(x,C,s,y),Math.max(w,v,m,M),this.renderBound)}}createRenderBounds(){if(ut(this.stage),this.parent!==null&&this.parent.strictBound!==void 0){const C=this.parent.strictBound;this.strictBound=el(C.x1,C.y1,C.x2,C.y2),this.preloadBound=ig(this.strictBound,this.boundsMargin)}else this.strictBound=this.stage.strictBound,this.preloadBound=this.stage.preloadBound;if(this.props.clipping===!1||this.renderBound===void 0||U0(this.renderBound,this.strictBound)===!1)return;const{x:o,y:l,width:h,height:g}=this.props,{tx:x,ty:w}=this.sceneGlobalTransform||this.globalTransform||{},s=x??o,m=w??l;this.strictBound=el(s,m,s+h,m+g,this.strictBound),this.preloadBound=ig(this.strictBound,this.boundsMargin)}updateRenderState(o){if(o===this.renderState)return;const l=this.renderState;this.renderState=o;const h=Ju.get(o);ut(h),this.emit(h,{previous:l,current:o})}updateIsRenderable(){let o=!1,l=!1;if(this.checkBasicRenderability()===!1){this.updateTextureOwnership(!1),this.setRenderable(!1);return}this.texture!==null?(l=!0,o=this.texture.state==="loaded"):(this.hasShader()||this.hasColorProperties()===!0)&&this.hasDimensions()===!0&&this.stage.defaultTexture&&this.stage.defaultTexture.state==="loaded"&&(o=!0),this.updateTextureOwnership(l),this.setRenderable(o)}checkBasicRenderability(){return!(this.worldAlpha===0||this.isOutOfBounds()===!0)}setRenderable(o){this.isRenderable=o}updateTextureOwnership(o){var l;(l=this.texture)==null||l.setRenderableOwner(this,o)}isOutOfBounds(){return this.renderState<=xo.OutOfBounds}hasDimensions(){return this.props.width!==0&&this.props.height!==0}hasColorProperties(){return this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0}hasShader(){return this.props.shader!==null}calculateRenderCoords(){const{width:o,height:l}=this,{tx:h,ty:g,ta:x,tb:w,tc:s,td:m}=this.globalTransform;if(w===0&&s===0){const U=h,F=h+o*x,z=g,B=g+l*m;this.renderCoords=tl.translate(U,z,F,z,F,B,U,B,this.renderCoords)}else this.renderCoords=tl.translate(h,g,h+o*x,g+o*s,h+o*x+l*w,g+o*s+l*m,h+l*w,g+l*m,this.renderCoords);if(this.sceneGlobalTransform===void 0)return;const{tx:C,ty:y,ta:v,tb:M,tc:b,td:_}=this.sceneGlobalTransform;if(M===0&&b===0){const U=C,F=C+o*v,z=y,B=y+l*_;this.sceneRenderCoords=tl.translate(U,z,F,z,F,B,U,B,this.sceneRenderCoords)}else this.sceneRenderCoords=tl.translate(C,y,C+o*v,y+o*b,C+o*v+l*M,y+o*b+l*_,C+l*M,y+l*_,this.sceneRenderCoords)}calculateClippingRect(o){ut(this.globalTransform);const{clippingRect:l,props:h,globalTransform:g}=this,{clipping:x}=h,w=g.tb!==0||g.tc!==0;x===!0&&w===!1?(l.x=g.tx,l.y=g.ty,l.width=this.width*g.ta,l.height=this.height*g.td,l.valid=!0):l.valid=!1,o.valid===!0&&l.valid===!0?nT(o,l,l):o.valid===!0&&(oT(o,l),l.valid=!0)}calculateZIndex(){var x,w;const o=this.props,l=o.zIndex||0,h=((x=o.parent)==null?void 0:x.zIndex)||0;let g=l;(w=o.parent)!=null&&w.zIndexLocked&&(g=l<h?l:h),this.calcZIndex=g}destroy(){var o;if(this.destroyed!==!0){for(this.destroyed=!0,this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,this.renderCoords=void 0,this.renderBound=void 0,this.strictBound=void 0,this.preloadBound=void 0,this.globalTransform=void 0,this.scaleRotateTransform=void 0,this.localTransform=void 0,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;this.children.length>0;)(o=this.children[0])==null||o.destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}}renderQuads(o){this.parentHasRenderTexture&&(!o.renderToTextureActive||this.parentRenderTexture!==o.activeRttNode)||(ut(this.globalTransform),ut(this.renderCoords),o.addQuad({width:this.props.width,height:this.props.height,colorTl:this.premultipliedColorTl,colorTr:this.premultipliedColorTr,colorBl:this.premultipliedColorBl,colorBr:this.premultipliedColorBr,texture:this.texture||this.stage.defaultTexture,textureOptions:this.textureOptions,zIndex:this.zIndex,shader:this.shader.shader,shaderProps:this.shader.getResolvedProps(),alpha:this.worldAlpha,clippingRect:this.clippingRect,tx:this.globalTransform.tx,ty:this.globalTransform.ty,ta:this.globalTransform.ta,tb:this.globalTransform.tb,tc:this.globalTransform.tc,td:this.globalTransform.td,renderCoords:this.renderCoords,rtt:this.rtt,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions}))}get id(){return this._id}get data(){return this.props.data}set data(o){this.props.data=o}get x(){return this.props.x}set x(o){this.props.x!==o&&(this.props.x=o,this.setUpdateType(Ue.Local))}get absX(){var o,l,h;return this.props.x+-this.props.width*this.props.mountX+(((o=this.props.parent)==null?void 0:o.absX)||((h=(l=this.props.parent)==null?void 0:l.globalTransform)==null?void 0:h.tx)||0)}get absY(){var o;return this.props.y+-this.props.height*this.props.mountY+(((o=this.props.parent)==null?void 0:o.absY)??0)}get y(){return this.props.y}set y(o){this.props.y!==o&&(this.props.y=o,this.setUpdateType(Ue.Local))}get width(){return this.props.width}set width(o){this.props.width!==o&&(this.props.width=o,this.setUpdateType(Ue.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Ue.RenderTexture)))}get height(){return this.props.height}set height(o){this.props.height!==o&&(this.props.height=o,this.setUpdateType(Ue.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Ue.RenderTexture)))}get scale(){return this.scaleX}set scale(o){this.scaleX=o,this.scaleY=o}get scaleX(){return this.props.scaleX}set scaleX(o){this.props.scaleX!==o&&(this.props.scaleX=o,this.setUpdateType(Ue.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(o){this.props.scaleY!==o&&(this.props.scaleY=o,this.setUpdateType(Ue.ScaleRotate))}get mount(){return this.props.mount}set mount(o){(this.props.mountX!==o||this.props.mountY!==o)&&(this.props.mountX=o,this.props.mountY=o,this.props.mount=o,this.setUpdateType(Ue.Local))}get mountX(){return this.props.mountX}set mountX(o){this.props.mountX!==o&&(this.props.mountX=o,this.setUpdateType(Ue.Local))}get mountY(){return this.props.mountY}set mountY(o){this.props.mountY!==o&&(this.props.mountY=o,this.setUpdateType(Ue.Local))}get pivot(){return this.props.pivot}set pivot(o){(this.props.pivotX!==o||this.props.pivotY!==o)&&(this.props.pivotX=o,this.props.pivotY=o,this.props.pivot=o,this.setUpdateType(Ue.Local))}get pivotX(){return this.props.pivotX}set pivotX(o){this.props.pivotX!==o&&(this.props.pivotX=o,this.setUpdateType(Ue.Local))}get pivotY(){return this.props.pivotY}set pivotY(o){this.props.pivotY!==o&&(this.props.pivotY=o,this.setUpdateType(Ue.Local))}get rotation(){return this.props.rotation}set rotation(o){this.props.rotation!==o&&(this.props.rotation=o,this.setUpdateType(Ue.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(o){this.props.alpha=o,this.setUpdateType(Ue.PremultipliedColors|Ue.WorldAlpha|Ue.Children|Ue.IsRenderable),this.childUpdateType|=Ue.WorldAlpha}get autosize(){return this.props.autosize}set autosize(o){this.props.autosize=o}get boundsMargin(){var o;return this.props.boundsMargin??((o=this.parent)==null?void 0:o.boundsMargin)??this.stage.boundsMargin}set boundsMargin(o){if(o!==this.props.boundsMargin){if(o===null)this.props.boundsMargin=o;else{const l=Array.isArray(o)?o:[o,o,o,o];this.props.boundsMargin=l}this.setUpdateType(Ue.RenderBounds)}}get clipping(){return this.props.clipping}set clipping(o){this.props.clipping=o,this.setUpdateType(Ue.Clipping|Ue.RenderBounds|Ue.Children),this.childUpdateType|=Ue.Global|Ue.Clipping}get color(){return this.props.color}set color(o){this.colorTop=o,this.colorBottom=o,this.colorLeft=o,this.colorRight=o,this.props.color=o,this.setUpdateType(Ue.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(o){(this.props.colorTl!==o||this.props.colorTr!==o)&&(this.colorTl=o,this.colorTr=o),this.props.colorTop=o,this.setUpdateType(Ue.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(o){(this.props.colorBl!==o||this.props.colorBr!==o)&&(this.colorBl=o,this.colorBr=o),this.props.colorBottom=o,this.setUpdateType(Ue.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(o){(this.props.colorTl!==o||this.props.colorBl!==o)&&(this.colorTl=o,this.colorBl=o),this.props.colorLeft=o,this.setUpdateType(Ue.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(o){(this.props.colorTr!==o||this.props.colorBr!==o)&&(this.colorTr=o,this.colorBr=o),this.props.colorRight=o,this.setUpdateType(Ue.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(o){this.props.colorTl=o,this.setUpdateType(Ue.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(o){this.props.colorTr=o,this.setUpdateType(Ue.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(o){this.props.colorBl=o,this.setUpdateType(Ue.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(o){this.props.colorBr=o,this.setUpdateType(Ue.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(o){this.props.zIndexLocked=o,this.setUpdateType(Ue.CalculatedZIndex|Ue.Children);for(let l=0,h=this.children.length;l<h;l++)this.children[l].setUpdateType(Ue.CalculatedZIndex)}get zIndex(){return this.props.zIndex}set zIndex(o){this.props.zIndex=o,this.setUpdateType(Ue.CalculatedZIndex|Ue.Children);for(let l=0,h=this.children.length;l<h;l++)this.children[l].setUpdateType(Ue.CalculatedZIndex)}get parent(){return this.props.parent}set parent(o){const l=this.props.parent;if(l!==o){if(this.props.parent=o,l){const h=l.children.indexOf(this);ut(h!==-1,"CoreNode.parent: Node not found in old parent's children!"),l.children.splice(h,1),l.setUpdateType(Ue.Children|Ue.ZIndexSortedChildren)}o&&(o.children.push(this),this.setUpdateType(Ue.All),o.setUpdateType(Ue.Children|Ue.ZIndexSortedChildren),(o.rtt||o.parentHasRenderTexture)&&this.applyRTTInheritance(o)),this.updateScaleRotateTransform(),this.setUpdateType(Ue.RenderBounds|Ue.Children)}}get preventCleanup(){return this.props.textureOptions.preventCleanup||!1}set preventCleanup(o){fl()===!1&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.props.textureOptions.preventCleanup=o}get rtt(){return this.props.rtt}set rtt(o){this.props.rtt!==o&&(this.props.rtt=o,o===!0?(this.initRenderTexture(),this.markChildrenWithRTT()):this.cleanupRenderTexture(),this.setUpdateType(Ue.RenderTexture),this.parentHasRenderTexture===!0&&this.notifyParentRTTOfUpdate())}initRenderTexture(){this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.stage.renderer.renderToTexture(this)}cleanupRenderTexture(){this.unloadTexture(),this.clearRTTInheritance(),this.hasRTTupdates=!1,this.texture=null}markChildrenWithRTT(o=null){const l=o||this;for(const h of l.children)h.setUpdateType(Ue.All),h.parentHasRenderTexture=!0,h.markChildrenWithRTT()}applyRTTInheritance(o){o.rtt&&o.setUpdateType(Ue.RenderTexture),this.markChildrenWithRTT(o)}clearRTTInheritance(){if(!this.rtt)for(const o of this.children)o.parentHasRenderTexture=!1,o.rttParent=null,o.setUpdateType(Ue.All),o.clearRTTInheritance()}get shader(){return this.props.shader}set shader(o){this.props.shader!==o&&(this.props.shader=o,this.setUpdateType(Ue.IsRenderable))}get src(){return this.props.src}set src(o){if(this.props.src!==o){if(this.props.src=o,!o){this.texture=null;return}this.texture=this.stage.txManager.createTexture("ImageTexture",{src:o,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight})}}set imageType(o){this.props.imageType!==o&&(this.props.imageType=o)}get imageType(){return this.props.imageType||null}get srcHeight(){return this.props.srcHeight}set srcHeight(o){this.props.srcHeight=o}get srcWidth(){return this.props.srcWidth}set srcWidth(o){this.props.srcWidth=o}get srcX(){return this.props.srcX}set srcX(o){this.props.srcX=o}get srcY(){return this.props.srcY}set srcY(o){this.props.srcY=o}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let o=this.parent;for(;o;){if(o.rtt)return o;o=o.parent}return null}get texture(){return this.props.texture}set texture(o){if(this.props.texture===o)return;const l=this.props.texture;l&&(l.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=o,o!==null&&(o.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(Ue.IsRenderable)}set textureOptions(o){this.props.textureOptions=o}get textureOptions(){return this.props.textureOptions}get strictBounds(){return this.props.strictBounds}set strictBounds(o){o!==this.props.strictBounds&&(this.props.strictBounds=o,this.setUpdateType(Ue.RenderBounds|Ue.Children),this.childUpdateType|=Ue.RenderBounds|Ue.Children)}animate(o,l){const h=new H_(this,o,l);return new G_(this.stage.animationManager,h)}flush(){}}const W_=f=>{let i=!1;const o=()=>{if(f.updateFrameTime(),f.updateAnimations(),!f.hasSceneUpdates()){f.calculateFps(),setTimeout(o,16.666666666666668),i||(f.eventBus.emit("idle"),i=!0),f.txMemManager.checkCleanup()===!0&&f.txMemManager.cleanup(!1),f.flushFrameEvents();return}i=!1,f.drawFrame(),f.flushFrameEvents(),requestAnimationFrame(o)};requestAnimationFrame(o)},Is=()=>performance?performance.now():Date.now();class X_{constructor(){P(this,"activeAnimations",new Set)}registerAnimation(i){this.activeAnimations.add(i)}unregisterAnimation(i){this.activeAnimations.delete(i)}update(i){this.activeAnimations.forEach(o=>{o.update(i)})}}function q_(){function f(o){return o.indexOf("image/png")!==-1}function i(o,l,h,g,x,w,s){return new Promise(function(m,C){var y=new XMLHttpRequest;y.open("GET",o,!0),y.responseType="blob",y.onload=function(){if(y.status!==200&&y.status!==0)return C(new Error("Failed to load image: "+y.statusText));var v=y.response;l!==void 0||f(v.type),createImageBitmap(v).then(function(M){m({data:M,premultiplyAlpha:l})}).catch(function(M){C(M)})},y.onerror=function(){C(new Error("Network error occurred while trying to fetch the image."))},y.send()})}self.onmessage=o=>{var l=o.data.src,h=o.data.id,g=o.data.premultiplyAlpha;o.data.sx,o.data.sy,o.data.sw,o.data.sh,i(l,g).then(function(x){self.postMessage({id:h,src:l,data:x},[x.data])}).catch(function(x){self.postMessage({id:h,src:l,error:x.message})})}}class K_{constructor(i,o){P(this,"imageWorkersEnabled",!0);P(this,"messageManager",{});P(this,"workers",[]);P(this,"workerIndex",0);P(this,"nextId",0);this.workers=this.createWorkers(i,o),this.workers.forEach(l=>{l.onmessage=this.handleMessage.bind(this)})}handleMessage(i){const{id:o,data:l,error:h}=i.data,g=this.messageManager[o];if(g){const[x,w]=g;delete this.messageManager[o],h?w(new Error(h)):x(l)}}createWorkers(i=1,o){let l=`(${q_.toString()})()`;o.options===!0&&(l=l.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")),o.full===!0&&(l=l.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;"),l=l.replace("var supportsFullCreateImageBitmap = false;","var supportsFullCreateImageBitmap = true;")),l=l.replace('"use strict";',"");const h=new Blob([l],{type:"application/javascript"}),g=(self.URL?URL:webkitURL).createObjectURL(h),x=[];for(let w=0;w<i;w++)x.push(new Worker(g));return x}getNextWorker(){const i=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,i}getImage(i,o,l,h,g,x){return new Promise((w,s)=>{try{if(this.workers){const m=this.nextId++;this.messageManager[m]=[w,s];const C=this.getNextWorker();C&&C.postMessage({id:m,src:i,premultiplyAlpha:o,sx:l,sy:h,sw:g,sh:x})}}catch(m){s(m)}})}}const Vu=class Vu extends Qu{constructor(o,l){super(o);P(this,"type",Un.color);P(this,"props");this.props=Vu.resolveDefaults(l||{})}get color(){return this.props.color}set color(o){this.props.color=o}async getTextureSource(){const o=new Uint8Array(4);return this.color===4294967295?(o[0]=255,o[1]=255,o[2]=255,o[3]=255):(o[0]=this.color>>16&255,o[1]=this.color>>8&255,o[2]=this.color&255,o[3]=this.color>>>24&255),this.setState("fetched",{width:1,height:1}),{data:o,premultiplyAlpha:!0}}static makeCacheKey(o){return`ColorTexture,${Vu.resolveDefaults(o).color}`}static resolveDefaults(o){return{color:o.color||4294967295}}};P(Vu,"z$__type__Props");let od=Vu;function Y_(f){return/\.(ktx|pvr)$/.test(f)}const fC=async f=>{const o=await(await fetch(f)).arrayBuffer();return f.indexOf(".ktx")!==-1?Q_(o):Z_(o)},Q_=async f=>{const i=new DataView(f),o=i.getUint32(12)===16909060,l=[],h={glInternalFormat:i.getUint32(28,o),pixelWidth:i.getUint32(36,o),pixelHeight:i.getUint32(40,o),numberOfMipmapLevels:i.getUint32(56,o),bytesOfKeyValueData:i.getUint32(60,o)};let g=64;g+=h.bytesOfKeyValueData;for(let x=0;x<h.numberOfMipmapLevels;x++){const w=i.getUint32(g);g+=4,l.push(i.buffer.slice(g,w)),g+=w}return{data:{glInternalFormat:h.glInternalFormat,mipmaps:l,width:h.pixelWidth||0,height:h.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},Z_=async f=>{const w=f,s=new Int32Array(w,0,13),m=s[12]+52,C=new Uint8Array(w,m),y=[],v={pixelWidth:s[7],pixelHeight:s[6],numberOfMipmapLevels:s[11]||0};let M=0,b=v.pixelWidth||0,_=v.pixelHeight||0;for(let U=0;U<v.numberOfMipmapLevels;U++){const F=(b+3>>2)*(_+3>>2)*8,z=new Uint8Array(w,C.byteOffset+M,F);y.push(z),M+=F,b=b>>1,_=_>>1}return{data:{glInternalFormat:36196,mipmaps:y,width:v.pixelWidth||0,height:v.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}};function J_(f){return/\.(svg)(\?.*)?$/.test(f)}const cC=(f,i,o,l,h,g,x)=>new Promise((w,s)=>{const m=document.createElement("canvas"),C=m.getContext("2d");ut(C),C.imageSmoothingEnabled=!0;const y=new Image;y.onload=()=>{const v=l??0,M=h??0,b=i||y.width,_=o||y.height;m.width=b,m.height=_,C.drawImage(y,0,0,b,_),w({data:C.getImageData(v,M,g??b,x??_),premultiplyAlpha:!1})},y.onerror=v=>{s(v)},y.src=f});function rT(f,i=""){return new Promise((o,l)=>{const h=new XMLHttpRequest;h.responseType=i,h.onreadystatechange=function(){h.readyState==XMLHttpRequest.DONE&&(h.status===0||h.status===200?o(h.response):l(h.statusText))},h.open("GET",f,!0),h.send(null)})}const Hu=class Hu extends Qu{constructor(o,l){super(o);P(this,"props");P(this,"type",Un.image);this.props=Hu.resolveDefaults(l)}hasAlphaChannel(o){return o.indexOf("image/png")!==-1}async loadImageFallback(o,l){const h=new Image;return typeof o=="string"&&B0(o)===!1&&(h.crossOrigin="anonymous"),new Promise(g=>{h.onload=()=>{g({data:h,premultiplyAlpha:l})},h.onerror=()=>{console.warn("Image loading failed, returning fallback object."),g({data:h,premultiplyAlpha:l})},o instanceof Blob?h.src=URL.createObjectURL(o):h.src=o})}async createImageBitmap(o,l,h,g,x,w){const s=l??o.type.includes("image/png"),m=this.txManager.imageBitmapSupported;return m.full===!0&&x!==null&&w!==null?{data:await createImageBitmap(o,h||0,g||0,x,w,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:s}:m.basic===!0?{data:await createImageBitmap(o),premultiplyAlpha:s}:{data:await createImageBitmap(o,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:s}}async loadImage(o){const{premultiplyAlpha:l,sx:h,sy:g,sw:x,sh:w}=this.props;if(this.txManager.hasCreateImageBitmap===!0){if(B0(o)===!1&&this.txManager.hasWorker===!0&&this.txManager.imageWorkerManager!==null)return this.txManager.imageWorkerManager.getImage(o,l,h,g,x,w);let s;return B0(o)===!0?s=j_(o):s=await rT(o,"blob").then(m=>m),this.createImageBitmap(s,l,h,g,x,w)}return this.loadImageFallback(o,l??!0)}async getTextureSource(){var g,x;let o;try{o=await this.determineImageTypeAndLoadImage()}catch(w){return this.setState("failed",w),{data:null}}if(o.data===null)return this.setState("failed",Error("ImageTexture: No image data")),{data:null};let l,h;return o.data instanceof Uint8Array?(l=this.props.width??0,h=this.props.height??0):(l=((g=o.data)==null?void 0:g.width)??(this.props.width||0),h=((x=o.data)==null?void 0:x.height)??(this.props.height||0)),this.setState("fetched",{width:l,height:h}),{data:o.data,premultiplyAlpha:this.props.premultiplyAlpha??!0}}determineImageTypeAndLoadImage(){const{src:o,premultiplyAlpha:l,type:h}=this.props;if(o===null)return{data:null};if(typeof o!="string"){if(o instanceof Blob)if(this.txManager.hasCreateImageBitmap===!0){const{sx:x,sy:w,sw:s,sh:m}=this.props;return this.createImageBitmap(o,l,x,w,s,m)}else return this.loadImageFallback(o,l??!0);return o instanceof ImageData?{data:o,premultiplyAlpha:l}:{data:o(),premultiplyAlpha:l}}const g=B_(o);return h==="regular"?this.loadImage(g):h==="svg"?cC(g,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):J_(o)===!0?cC(g,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):h==="compressed"||Y_(o)===!0?fC(g):this.loadImage(g)}static makeCacheKey(o){const l=Hu.resolveDefaults(o),h=l.key||l.src;if(typeof h!="string")return!1;let g="";return l.sh!==null&&l.sw!==null&&(g+=",",g+=l.sx??"",g+=l.sy??"",g+=l.sw||"",g+=l.sh||""),`ImageTexture,${h},${l.premultiplyAlpha??"true"}${g}`}static resolveDefaults(o){return{src:o.src??"",premultiplyAlpha:o.premultiplyAlpha??!0,key:o.key??null,type:o.type??null,width:o.width??null,height:o.height??null,sx:o.sx??null,sy:o.sy??null,sw:o.sw??null,sh:o.sh??null}}};P(Hu,"z$__type__Props");let qu=Hu;const Gu=class Gu extends Qu{constructor(o,l){super(o);P(this,"props");P(this,"type",Un.noise);this.props=Gu.resolveDefaults(l)}async getTextureSource(){const{width:o,height:l}=this.props,h=o*l*4,g=new Uint8ClampedArray(h);for(let x=0;x<h;x+=4){const w=Math.floor(Math.random()*256);g[x]=w,g[x+1]=w,g[x+2]=w,g[x+3]=255}return this.setState("fetched"),{data:new ImageData(g,o,l)}}static makeCacheKey(o){if(o.cacheId===void 0)return!1;const l=Gu.resolveDefaults(o);return`NoiseTexture,${l.width},${l.height},${l.cacheId}`}static resolveDefaults(o){return{width:o.width??128,height:o.height??128,cacheId:o.cacheId??0}}};P(Gu,"z$__type__Props");let sg=Gu;const pd=class pd extends Qu{constructor(o,l){super(o);P(this,"props");P(this,"parentTexture");P(this,"type",Un.subTexture);P(this,"onParentTxLoaded",()=>{this.forwardParentTxState("loaded",{width:this.props.width,height:this.props.height})});P(this,"onParentTxFailed",(o,l)=>{this.forwardParentTxState("failed",l)});P(this,"onParentTxFetched",()=>{this.forwardParentTxState("fetched",{width:this.props.width,height:this.props.height})});P(this,"onParentTxFetching",()=>{this.forwardParentTxState("fetching")});P(this,"onParentTxLoading",()=>{this.forwardParentTxState("loading")});P(this,"onParentTxFreed",()=>{this.forwardParentTxState("freed")});this.props=pd.resolveDefaults(l||{}),ut(this.props.texture,"SubTexture requires a parent texture"),ut(this.props.texture instanceof qu,"SubTexture requires an ImageTexture parent"),this.parentTexture=o.resolveParentTexture(this.props.texture),this.renderableOwners.size>0&&this.parentTexture.setRenderableOwner(this,!0),queueMicrotask(()=>{const h=this.parentTexture;h.state==="loaded"?this.onParentTxLoaded(h,h.dimensions):h.state==="fetching"?this.onParentTxFetching():h.state==="fetched"?this.onParentTxFetched():h.state==="loading"?this.onParentTxLoading():h.state==="failed"?this.onParentTxFailed(h,h.error):h.state==="freed"&&this.onParentTxFreed(),h.on("fetched",this.onParentTxFetched),h.on("loading",this.onParentTxLoading),h.on("fetching",this.onParentTxFetching),h.on("loaded",this.onParentTxLoaded),h.on("failed",this.onParentTxFailed),h.on("freed",this.onParentTxFreed)})}forwardParentTxState(o,l){this.setState(o,l)}onChangeIsRenderable(o){this.parentTexture.setRenderableOwner(this,o)}async getTextureSource(){return new Promise((o,l)=>{this.setState("fetched"),o({data:this.props})})}static makeCacheKey(o){return!1}static resolveDefaults(o){return{texture:o.texture,x:o.x||0,y:o.y||0,width:o.width||0,height:o.height||0}}};P(pd,"z$__type__Props");let Ku=pd;const md=class md extends Qu{constructor(o,l){super(o);P(this,"props");P(this,"type",Un.renderToTexture);this.props=md.resolveDefaults(l||{})}get width(){return this.props.width}set width(o){this.props.width=o}get height(){return this.props.height}set height(o){this.props.height=o}async getTextureSource(){return this.setState("fetched"),{data:null,premultiplyAlpha:null}}static resolveDefaults(o){return{width:o.width||256,height:o.height||256}}};P(md,"z$__type__Props");let id=md;async function e5(){var h,g,x;const f=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,1,3,0,0,0,37,219,86,202,0,0,0,3,80,76,84,69,0,0,0,167,122,61,218,0,0,0,1,116,82,78,83,0,64,230,216,102,0,0,0,10,73,68,65,84,8,215,99,96,0,0,0,2,0,1,226,33,188,51,0,0,0,0,73,69,78,68,174,66,96,130]),i={basic:!1,options:!1,full:!1},o=new Blob([f],{type:"image/png"}),l=await createImageBitmap(o);(h=l.close)==null||h.call(l),i.basic=!0;try{const w={premultiplyAlpha:"none"},s=await createImageBitmap(o,w);(g=s.close)==null||g.call(s),i.options=!0}catch{}try{const w=await createImageBitmap(o,0,0,1,1,{premultiplyAlpha:"none"});(x=w.close)==null||x.call(w),i.full=!0}catch{}return i}class t5 extends Lr{constructor(o,l){super();P(this,"keyCache",new Map);P(this,"inverseKeyCache",new WeakMap);P(this,"txConstructors",{});P(this,"downloadTextureSourceQueue",[]);P(this,"priorityQueue",[]);P(this,"uploadTextureQueue",[]);P(this,"initialized",!1);P(this,"stage");P(this,"numImageWorkers");P(this,"imageWorkerManager",null);P(this,"hasCreateImageBitmap",!!self.createImageBitmap);P(this,"imageBitmapSupported",{basic:!1,options:!1,full:!1});P(this,"hasWorker",!!self.Worker);P(this,"renderer");P(this,"frameTime",0);const{numImageWorkers:h,createImageBitmapSupport:g}=l;this.stage=o,this.numImageWorkers=h,g==="auto"?e5().then(x=>{this.initialize(x)}).catch(x=>{console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.initialized=!0,this.emit("initialized")}):this.initialize({basic:g==="basic",options:g==="options",full:g==="full"}),this.registerTextureType("ImageTexture",qu),this.registerTextureType("ColorTexture",od),this.registerTextureType("NoiseTexture",sg),this.registerTextureType("SubTexture",Ku),this.registerTextureType("RenderTexture",id)}registerTextureType(o,l){this.txConstructors[o]=l}initialize(o){this.hasCreateImageBitmap=o.basic||o.options||o.full,this.imageBitmapSupported=o,this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.hasCreateImageBitmap&&this.hasWorker&&this.numImageWorkers>0?this.imageWorkerManager=new K_(this.numImageWorkers,o):console.warn("[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower."),this.initialized=!0,this.emit("initialized")}enqueueDownloadTextureSource(o){this.downloadTextureSourceQueue.includes(o)||this.downloadTextureSourceQueue.push(o)}enqueueUploadTexture(o){this.uploadTextureQueue.includes(o)===!1&&this.uploadTextureQueue.push(o)}createTexture(o,l){let h;const g=this.txConstructors[o];if(!g)throw new Error(`Texture type "${o}" is not registered`);const x=g.makeCacheKey(l);return x&&this.keyCache.has(x)?h=this.keyCache.get(x):(h=new g(this,l),x&&this.initTextureToCache(h,x)),h}orphanTexture(o){this.removeTextureFromQueue(o),o.type!==Un.subTexture&&this.stage.txMemManager.addToOrphanedTextures(o)}loadTexture(o,l){if(this.stage.txMemManager.removeFromOrphanedTextures(o),o.type!==Un.subTexture){if(o.ctxTexture!==void 0&&o.ctxTexture.state==="loaded"){o.setState("loaded");return}if(!(this.downloadTextureSourceQueue.includes(o)===!0||this.uploadTextureQueue.includes(o)===!0)){if(o.ctxTexture!==void 0&&o.ctxTexture.state==="loading"){if(o.textureData!==null){this.enqueueUploadTexture(o);return}o.free()}if(this.initialized===!1){this.priorityQueue.push(o);return}if(o.state==="failed"&&(o.free(),o.freeTextureData()),(o.type===Un.color||o.type===Un.renderToTexture)&&o.state!=="initial"){o.setState("fetched"),this.enqueueUploadTexture(o);return}o.setState("loading"),l===!0&&o.getTextureData().then(()=>{this.uploadTexture(o)}).catch(h=>{console.error(h)}),this.enqueueDownloadTextureSource(o)}}}uploadTexture(o){if(this.stage.txMemManager.doNotExceedCriticalThreshold===!0&&this.stage.txMemManager.criticalCleanupRequested===!0){this.enqueueUploadTexture(o);return}const l=o.loadCtxTexture();if(l!==null&&l.state==="loaded"){o.setState("loaded");return}l.load()}isProcessingTexture(o){return this.downloadTextureSourceQueue.includes(o)===!0||this.uploadTextureQueue.includes(o)===!0}processSome(o){if(this.initialized===!1)return;const l=Is();for(;this.priorityQueue.length>0&&Is()-l<o;){const h=this.priorityQueue.pop();h.getTextureData().then(()=>{this.uploadTexture(h)})}for(;this.uploadTextureQueue.length>0&&Is()-l<o;)this.uploadTexture(this.uploadTextureQueue.pop());for(;this.downloadTextureSourceQueue.length>0&&Is()-l<o;){const h=this.downloadTextureSourceQueue.shift();h.getTextureData().then(()=>{h.state==="fetched"&&this.enqueueUploadTexture(h)})}}hasUpdates(){return this.downloadTextureSourceQueue.length>0||this.uploadTextureQueue.length>0}initTextureToCache(o,l){const{keyCache:h,inverseKeyCache:g}=this;h.set(l,o),g.set(o,l)}getTextureFromCache(o){return this.keyCache.get(o)}removeTextureFromCache(o){const{inverseKeyCache:l,keyCache:h}=this,g=l.get(o);g&&h.delete(g)}removeTextureFromQueue(o){const l=this.downloadTextureSourceQueue.indexOf(o);l!==-1&&this.downloadTextureSourceQueue.splice(l,1);const h=this.uploadTextureQueue.indexOf(o);h!==-1&&this.uploadTextureQueue.splice(h,1)}resolveParentTexture(o){if(!(o!=null&&o.props))return o;const l=qu.makeCacheKey(o.props);return(l?this.getTextureFromCache(l):void 0)??o}}const n5={normal:400,bold:700,bolder:900,lighter:100},hC=f=>typeof f=="number"?f:n5[f]||400;function o5(f,i,o,l,h){let g=hC(o);for(const x of f){const w=x[i];if(!w)continue;if(w.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${i}' - will be used for all weights and styles`),w.values().next().value;const s=new Map;for(const C of w){const y=hC(C.descriptors.weight);if(y===g&&C.descriptors.style===l&&C.descriptors.stretch===h)return C;s.set(y,C)}const m=`TrFontManager: No exact match: '${i} Weight: ${g} Style: ${l} Stretch: ${h}'`;if(console.error(m),g===400&&s.has(500))return s.get(500);if(g===500&&s.has(400))return s.get(400);if(g<400){for(;g>0;){if(s.has(g))return s.get(g);g-=100}g=600}for(;g<1e3;){if(s.has(g))return s.get(g);g+=100}for(g=500;g>0;){if(s.has(g))return s.get(g);g-=100}}}class i5{constructor(i){P(this,"textRenderers");P(this,"fontCache",new Map);this.textRenderers=i}addFontFace(i){for(const o in this.textRenderers){const l=this.textRenderers[o];l&&l.isFontFaceSupported(i)&&l.addFontFace(i)}}resolveFontFace(i,o,l){const{fontFamily:h,fontWeight:g,fontStyle:x,fontStretch:w}=o,s=`${l}_${h}_${x}_${g}_${w}`;if(this.fontCache.has(s)===!0)return this.fontCache.get(s);const m=o5(i,h,g,x,w);return m!==void 0&&this.fontCache.set(s,m),m}}class sT{static makeCacheKey(i){return!1}static resolveDefaults(i){return{}}}function dC(f,i,o){const l=f.createShader(i);if(!l){const g=f.getError();throw new Error(`Unable to create the shader: ${i===f.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER"}.${g?` WebGlContext Error: ${g}`:""}`)}if(f.shaderSource(l,o),f.compileShader(l),!!f.getShaderParameter(l,f.COMPILE_STATUS))return l;console.error(f.getShaderInfoLog(l)),f.deleteShader(l)}function r5(f,i,o){const l=f.createProgram();if(!l)throw new Error("Unable to create program");if(f.attachShader(l,i),f.attachShader(l,o),f.linkProgram(l),!!f.getProgramParameter(l,f.LINK_STATUS))return l;console.warn(f.getProgramInfoLog(l)),f.deleteProgram(l)}class Ds extends sT{constructor(o){super();P(this,"boundBufferCollection",null);P(this,"buffersBound",!1);P(this,"program");P(this,"vao");P(this,"renderer");P(this,"glw");P(this,"attributeBuffers");P(this,"attributeLocations");P(this,"attributeNames");P(this,"uniformLocations");P(this,"uniformTypes");P(this,"supportsIndexedTextures");const l=this.renderer=o.renderer,h=this.glw=this.renderer.glw;this.supportsIndexedTextures=o.supportsIndexedTextures||!1;const g=h.isWebGl2(),x=g&&o.webgl2Extensions||!g&&o.webgl1Extensions||[],w=g?"2.0":"1.0";x.forEach(_=>{if(!h.getExtension(_))throw new Error(`Shader "${this.constructor.name}" requires extension "${_}" for WebGL ${w} but wasn't found`)});const s=o.shaderSources||this.constructor.shaderSources;if(s)g&&(s!=null&&s.webGl2)&&(s.fragment=s.webGl2.fragment,s.vertex=s.webGl2.vertex,delete s.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const m=l.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,C=s.vertex instanceof Function?s.vertex(m):s.vertex,y=s.fragment instanceof Function?s.fragment(m):s.fragment,v=dC(h,h.VERTEX_SHADER,C),M=dC(h,h.FRAGMENT_SHADER,y);if(!v||!M)throw new Error(`Unable to create the following shader(s): ${[!v&&"VERTEX_SHADER",!M&&"FRAGMENT_SHADER"].filter(Boolean).join(" and ")}`);const b=r5(h,v,M);if(!b)throw new Error("Unable to create program");this.program=b,this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...o.attributes].forEach(_=>{const U=h.getAttribLocation(this.program,_);if(U<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${_}"!`);const F=h.createBuffer();if(!F)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${_}"`);this.attributeLocations[_]=U,this.attributeBuffers[_]=F,this.attributeNames.push(_)}),this.uniformLocations={},this.uniformTypes={},o.uniforms.forEach(_=>{const U=h.getUniformLocation(this.program,_.name);if(this.uniformTypes[_.name]=_.uniform,!U){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${_.name}"`);return}this.uniformLocations[_.name]=U})}bindBufferAttribute(o,l,h){const{glw:g}=this;g.enableVertexAttribArray(o),g.vertexAttribPointer(l,o,h.size,h.type,h.normalized,h.stride,h.offset)}disableAttribute(o){this.glw.disableVertexAttribArray(o)}disableAttributes(){for(const o in this.attributeLocations)this.disableAttribute(this.attributeLocations[o]);this.boundBufferCollection=null}canBatchShaderProps(o,l){return!1}bindRenderOp(o,l){this.bindBufferCollection(o.buffers),o.textures.length>0&&this.bindTextures(o.textures);const{glw:h,parentHasRenderTexture:g,renderToTexture:x}=o;if(!(x&&g)){if(g){const{width:w,height:s}=o.framebufferDimensions||{};h.uniform1f(this.getUniformLocation("u_pixelRatio"),1),h.uniform2f(this.getUniformLocation("u_resolution"),w??0,s??0)}else h.uniform1f(this.getUniformLocation("u_pixelRatio"),o.options.pixelRatio),h.uniform2f(this.getUniformLocation("u_resolution"),h.canvas.width,h.canvas.height);if(l){if(nd(l,"$dimensions")){let w=l.$dimensions;w||(w=o.dimensions),h.uniform2f(this.getUniformLocation("u_dimensions"),w.width,w.height)}if(nd(l,"$alpha")){let w=l.$alpha;w||(w=o.alpha),h.uniform1f(this.getUniformLocation("u_alpha"),w)}this.bindProps(l)}}}getUniformLocation(o){return this.uniformLocations[o]||null}bindBufferCollection(o){if(this.boundBufferCollection!==o){for(const l in this.attributeLocations){const h=o.getBuffer(l),g=o.getAttributeInfo(l);ut(h,`Buffer for "${l}" not found`),ut(g),this.bindBufferAttribute(this.attributeLocations[l],h,g)}this.boundBufferCollection=o}}bindProps(o){}bindTextures(o){}attach(){this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}P(Ds,"shaderSources");class aT extends Ds{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(i){const{glw:o}=this;o.activeTexture(0),o.bindTexture(i[0].ctxTexture)}}P(aT,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class lT extends Ds{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});P(this,"supportsIndexedTextures",!0)}bindTextures(o){const{renderer:l,glw:h}=this;if(o.length>l.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${l.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);o.forEach((x,w)=>{h.activeTexture(w),h.bindTexture(x.ctxTexture)});const g=Array.from(Array(o.length).keys());this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"),g)}}P(lT,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:o=>`
      #define txUnits ${o}
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${o}], int idx, vec2 uv) {
        ${Array.from(Array(o).keys()).map(l=>`
          ${l!==0?"else ":""}if (idx == ${l}) {
            return texture2D(textures[${l}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class So{constructor(i){P(this,"priority",1);P(this,"name","");P(this,"ref");P(this,"target");P(this,"passParameters","");P(this,"declaredUniforms","");P(this,"uniformInfo",{});const{ref:o,target:l,props:h={}}=i;this.ref=o,this.target=l;const g={},x=[];let w="";const s=this.constructor.uniforms||{};for(const m in s){const C=s[m],y=C.type,v=`${o}_${m}`;let M="";C.size&&(M=`[${C.size(h)}]`),x.push(v),w+=`uniform ${y} ${v}${M};`,g[m]={name:v,uniform:s[m].method}}this.passParameters=x.join(","),this.declaredUniforms=w,this.uniformInfo=g}static getEffectKey(i){return""}static getMethodParameters(i,o){const l=[];for(const h in i){const g=i[h];let x="";g.size&&(x=`[${g.size(o)}]`),l.push(`${g.type} ${h}${x}`)}return l.join(",")}static resolveDefaults(i){return{}}static makeEffectKey(i){return!1}}P(So,"uniforms",{}),P(So,"methods"),P(So,"onShaderMask"),P(So,"onColorize"),P(So,"onEffectMask");const j0=new Map,s5=(f,i)=>{const o=JSON.stringify(f);if(j0.has(o))return j0.get(o);f=f??[];const l=[],h=f.length;let g=0;for(;g<h;g++){const{name:x,type:w,props:s}=f[g],m={name:x,type:w,props:{}},C=i[w],y=C.resolveDefaults(s),v=C.uniforms,M=Object.keys(v),b=M.length;let _=0;for(;_<b;_++){const U=M[_],F=v[U],z={value:y[U],programValue:void 0,method:F.method,updateOnBind:F.updateOnBind||!1,hasValidator:F.validator!==void 0,hasProgramValueUpdater:F.updateProgramValue!==void 0},B=z.hasValidator&&F.validator(y[U],y)||y[U];y[U]!==B&&(z.validatedValue=B),z.hasProgramValueUpdater&&F.updateProgramValue(z),z.programValue===void 0&&(z.programValue=z.value),m.props[U]=z}l.push(m)}return j0.set(o,l),l},_r=class _r extends Ds{constructor(o,l,h){const g=_r.createShader(l,h);super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...g.uniforms],shaderSources:{vertex:g.vertex,fragment:g.fragment}});P(this,"effects",[]);this.effects=g.effects}bindTextures(o){const{glw:l}=this;l.activeTexture(0),l.bindTexture(o[0].ctxTexture)}bindUniformMethods(o){const l=this.glw,h=o.effects,g=h.length;for(let x=0;x<g;x++){const w=this.effects[x].uniformInfo,s=h[x],m=Object.keys(s.props),C=m.length;for(let y=0;y<C;y++){const v=m[y],M=s.props[v].method,b=this.getUniformLocation(w[v].name);if(M==="uniform2fv"||M==="uniform2iv"||M==="uniform3iv"||M==="uniform4fv"||M==="uniform4iv"||M==="uniformMatrix2fv"||M==="uniformMatrix3fv"||M==="uniformMatrix4fv"||M==="uniform1f"||M==="uniform1fv"||M==="uniform1i"||M==="uniform1iv"){s.props[v].setUniformValue=function(){l[M](b,this.programValue)};continue}if(M==="uniform2f"||M==="uniform2i"){s.props[v].setUniformValue=function(){l[M](b,this.programValue[0],this.programValue[1])};continue}if(M==="uniform3f"||M==="uniform3i"){s.props[v].setUniformValue=function(){l[M](b,this.programValue[0],this.programValue[1],this.programValue[2])};continue}if(M==="uniform4f"||M==="uniform4i"){s.props[v].setUniformValue=function(){l[M](b,this.programValue[0],this.programValue[1],this.programValue[2],this.programValue[3])};continue}}}}bindProps(o){var x;const l=o.effects,h=l.length;let g=0;for(;g<h;g++){const w=l[g],s=Object.keys(w.props),m=s.length;let C=0;for(;C<m;C++){const y=s[C],v=w.props[y];if(v.updateOnBind===!0){const M=(x=this.renderer.shManager.getRegisteredEffects()[w.type])==null?void 0:x.uniforms[y];M==null||M.updateProgramValue(w.props[y],o)}v.setUniformValue()}}}canBatchShaderProps(o,l){if(o.$alpha!==l.$alpha||o.$dimensions.width!==l.$dimensions.width||o.$dimensions.height!==l.$dimensions.height||o.effects.length!==l.effects.length)return!1;const h=o.effects.length;let g=0;for(;g<h;g++){const x=o.effects[g],w=l.effects[g];if(x.type!==w.type)return!1;for(const s in x.props)if(w.props&&!w.props[s]||x.props[s].value!==w.props[s].value)return!1}return!0}static createShader(o,l){const h={},g={};let x="";const w=[],s=[],m=o.effects.map(b=>{const _=l[b.type],U=_.getEffectKey(b.props||{});h[U]=h[U]?++h[U]:1;const F=h[U];F===1&&s.push({key:U,type:b.type,props:b.props});const z=new _({ref:`${U}${F===1?"":F}`,target:U,props:b.props});return x+=z.declaredUniforms,w.push(...Object.values(z.uniformInfo)),z});let C="";s==null||s.forEach(b=>{const _=l[b.type],U=_.resolveDefaults(b.props??{}),F=[];for(const W in _.methods){let te=W;const de=_.methods[W];g[W]&&g[W]!==de&&(te=_r.resolveMethodDuplicate(W,de,g)),g[te]=de.replace("function",te),F.push({m:W,cm:te})}let z=_.onShaderMask instanceof Function?_.onShaderMask(U):_.onShaderMask,B=_.onColorize instanceof Function?_.onColorize(U):_.onColorize,G=_.onEffectMask instanceof Function?_.onEffectMask(U):_.onEffectMask;F.forEach(W=>{const{m:te,cm:de}=W,I=new RegExp(`\\$${te}`,"g");z&&(z=z.replace(I,de)),B&&(B=B.replace(I,de)),G&&(G=G.replace(I,de))});const X=_.getMethodParameters(_.uniforms,U),Q=X.length>0?`, ${X}`:"";z&&(C+=`
        float fx_${b.key}_onShaderMask(float shaderMask ${Q}) {
          ${z}
        }
        `),B&&(C+=`
          vec4 fx_${b.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${Q}) {
            ${B}
          }
        `),G&&(C+=`
          vec4 fx_${b.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${Q}) {
            ${G}
          }
        `)});let y="";for(const b in g)y+=g[b];let v="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",M=`

    `;for(let b=0;b<m.length;b++){const _=m[b],U=_.passParameters.length>0?`, ${_.passParameters}`:"",F=l[_.name];F.onShaderMask&&(M+=`
        shaderMask = fx_${_.target}_onShaderMask(shaderMask ${U});
        `),F.onColorize&&(M+=`
        maskColor = fx_${_.target}_onColorize(shaderMask, maskColor, shaderColor${U});
        `),F.onEffectMask&&(v=`fx_${_.target}_onEffectMask(shaderMask, maskColor, shaderColor${U})`);const z=m[b+1];(z===void 0||l[z.name].onEffectMask)&&(M+=`
          shaderColor = ${v};
        `)}return{effects:m,uniforms:w,fragment:_r.fragment(x,y,C,M),vertex:_r.vertex()}}static resolveMethodDuplicate(o,l,h,g=0){const x=o+(g>0?g:"");return h[x]&&h[x]!==l?this.resolveMethodDuplicate(o,l,h,++g):x}static resolveDefaults(o,l){return ut(l),{effects:s5(o.effects??[],l),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(o,l){var g;let h="";return(g=o.effects)==null||g.forEach(x=>{const s=l[x.type].getEffectKey(x.props||{});h+=`,${s}`}),`DynamicShader${h}`}};P(_r,"z$__type__Props"),P(_r,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),P(_r,"fragment",(o,l,h,g)=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${o}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${l}

    ${h}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${g}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let nl=_r;class ag extends Ds{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(i){return{radius:i.radius||10,$dimensions:{width:0,height:0}}}bindTextures(i){const{glw:o}=this;o.activeTexture(0),o.bindTexture(i[0].ctxTexture)}bindProps(i){const o=Math.min(i.$dimensions.width,i.$dimensions.height)/(2*i.radius);this.glw.uniform1f(this.getUniformLocation("u_radius"),i.radius*Math.min(o,1))}canBatchShaderProps(i,o){return i.radius===o.radius&&i.$dimensions.width===o.$dimensions.width&&i.$dimensions.height===o.$dimensions.height}}P(ag,"z$__type__Props"),P(ag,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const a5=new Float32Array([1,0,0,0,1,0,0,0,1]),Wu=class Wu extends Ds{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(i){const{glw:o}=this;o.activeTexture(0),o.bindTexture(i[0].ctxTexture)}bindProps(i){const o=Wu.resolveDefaults(i);for(const l in o)if(l==="transform")this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"),o[l]);else if(l==="scrollY")this.glw.uniform1f(this.getUniformLocation("u_scrollY"),o[l]);else if(l==="color"){const h=Zu(o.color);this.glw.uniform4fv(this.getUniformLocation("u_color"),h)}else l==="size"?this.glw.uniform1f(this.getUniformLocation("u_size"),o[l]):l==="distanceRange"?this.glw.uniform1f(this.getUniformLocation("u_distanceRange"),o[l]):l==="debug"&&this.glw.uniform1i(this.getUniformLocation("u_debug"),o[l]?1:0)}static resolveDefaults(i={}){return{transform:i.transform??a5,scrollY:i.scrollY??0,color:i.color??4294967295,size:i.size??16,distanceRange:i.distanceRange??1,debug:i.debug??!1}}};P(Wu,"z$__type__Props"),P(Wu,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let lg=Wu;const cl=f=>{f.programValue===void 0&&(f.programValue=new Float32Array(4));const i=f.value,o=f.programValue;o[0]=(i>>>24)/255,o[1]=(i>>>16&255)/255,o[2]=(i>>>8&255)/255,o[3]=(i&255)/255},l5=f=>{const i=f.validatedValue||f.value;if(f.programValue instanceof Float32Array){const o=f.programValue;o[0]=i[0],o[1]=i[1]}else f.programValue=new Float32Array(i)},u5=f=>{const i=f.validatedValue||f.value;if(f.programValue instanceof Float32Array){const o=f.programValue;o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3]}else f.programValue=new Float32Array(i)},uT=f=>{const i=f.validatedValue||f.value;if(f.programValue instanceof Float32Array){const o=i.length,l=f.programValue;for(let h=0;h<o;h++)l[h]=i[h]}else f.programValue=new Float32Array(i)},Tg=f=>{const i=Array.isArray(f);if(i){if(i&&f.length===4)return f;if(i&&f.length===2)return[f[0],f[1],f[0],f[1]];if(i&&f.length===3)return[f[0],f[1],f[2],f[0]]}else return[f,f,f,f];return[f[0],f[0],f[0],f[0]]},fT=(f,i)=>{f.programValue===void 0&&(f.programValue=new Float32Array(4));const o=f.programValue,l=f.validatedValue||f.value;if(i===void 0&&f.$dimensions===void 0){o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3];return}let h=f.$dimensions;if(i!==void 0){const{$dimensions:v}=i;if(h!==void 0&&(h.width===v.width||h.height===v.height))return;h===void 0&&(h={width:v==null?void 0:v.width,height:v==null?void 0:v.height},f.$dimensions=h)}const{width:g,height:x}=h,[w,s,m,C]=l,y=Math.min(Math.min(Math.min(g/Math.max(g,w+s),g/Math.max(g,m+C)),Math.min(x/Math.max(x,w+m),x/Math.max(x,s+C))),1);o[0]=w*y,o[1]=s*y,o[2]=m*y,o[3]=C*y};class Va extends So{constructor(){super(...arguments);P(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(o){return{radius:o.radius??10}}}P(Va,"z$__type__Props"),P(Va,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Tg,updateProgramValue:fT}}),P(Va,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),P(Va,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),P(Va,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class Ou extends So{constructor(){super(...arguments);P(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(o){return{width:o.width??10,color:o.color??4294967295}}}P(Ou,"z$__type__Props"),P(Ou,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:cl,method:"uniform4fv",type:"vec4"}}),P(Ou,"onEffectMask",`
  float intR = shaderMask + 1.0;
  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),P(Ou,"onColorize",`
    return color;
  `);const Yr=class Yr extends So{constructor(){super(...arguments);P(this,"name","linearGradient")}static getEffectKey(o){return o.colors.value?`linearGradient${o.colors.value.length}`:`linearGradient${o.colors.length}`}static resolveDefaults(o){const l=o.colors??[4278190080,4294967295];let h=o.stops||[];if(h.length===0||h.length!==l.length){const g=l.length;let x=0;const w=h;for(;x<g;x++)h[x]?(w[x]=h[x],h[x-1]===void 0&&w[x-2]!==void 0&&(w[x-1]=w[x-2]+(h[x]-w[x-2])/2)):w[x]=x*(1/(l.length-1));h=w}return{colors:l,stops:h,angle:o.angle??0}}};P(Yr,"z$__type__Props"),P(Yr,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:o=>o.reduce((l,h)=>l.concat(Zu(h)),[]),updateProgramValue:uT,size:o=>o.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:o=>o.colors.length,method:"uniform1fv",type:"float"}}),P(Yr,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),P(Yr,"ColorLoop",o=>{let l="";for(let h=2;h<o;h++)l+=`colorOut = mix(colorOut, colors[${h}], clamp((dist - stops[${h-1}]) / (stops[${h}] - stops[${h-1}]), 0.0, 1.0));`;return l}),P(Yr,"onColorize",o=>{const l=o.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${Yr.ColorLoop(l)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let ug=Yr;class fg extends So{constructor(){super(...arguments);P(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(o){return{amount:o.amount??1}}}P(fg,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),P(fg,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class Ha extends So{constructor(){super(...arguments);P(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(o){return{width:o.width??10,color:o.color??4294967295}}}P(Ha,"z$__type__Props"),P(Ha,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:cl,method:"uniform4fv",type:"vec4"}}),P(Ha,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(Ha,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(Ha,"onColorize",`
    return color;
  `);class Ga extends So{constructor(){super(...arguments);P(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(o){return{width:o.width??10,color:o.color??4294967295}}}P(Ga,"z$__type__Props"),P(Ga,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:cl,method:"uniform4fv",type:"vec4"}}),P(Ga,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(Ga,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(Ga,"onColorize",`
    return color;
  `);class Wa extends So{constructor(){super(...arguments);P(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(o){return{width:o.width??10,color:o.color??4294967295}}}P(Wa,"z$__type__Props"),P(Wa,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:cl,method:"uniform4fv",type:"vec4"}}),P(Wa,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(Wa,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(Wa,"onColorize",`
    return color;
  `);class Xa extends So{constructor(){super(...arguments);P(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(o){return{width:o.width??10,color:o.color??4294967295}}}P(Xa,"z$__type__Props"),P(Xa,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:cl,method:"uniform4fv",type:"vec4"}}),P(Xa,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(Xa,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(Xa,"onColorize",`
    return color;
  `);class Nu extends So{constructor(){super(...arguments);P(this,"name","glitch")}static getEffectKey(o){return"glitch"}static resolveDefaults(o){return{amplitude:o.amplitude??.2,narrowness:o.narrowness??4,blockiness:o.blockiness??2,minimizer:o.minimizer??8,time:o.time??Date.now()}}}P(Nu,"z$__type__Props"),P(Nu,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:o=>{const l=o.value=(Date.now()-o.value)%1e3;o.programValue=l},type:"float"}}),P(Nu,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),P(Nu,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class Wh extends So{constructor(){super(...arguments);P(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(o){return{fade:o.fade??10}}}P(Wh,"z$__type__Props"),P(Wh,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:Tg,updateProgramValue:u5}}),P(Wh,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const As=class As extends So{constructor(){super(...arguments);P(this,"name","radialGradient")}static getEffectKey(o){return o.colors.value?`radialGradient${o.colors.value.length}`:`radialGradient${o.colors.length}`}static resolveDefaults(o){const l=o.colors??[4278190080,4294967295];let h=o.stops||[];if(h.length===0||h.length!==l.length){const g=l.length;let x=0;const w=h;for(;x<g;x++)h[x]?(w[x]=h[x],h[x-1]===void 0&&w[x-2]!==void 0&&(w[x-1]=w[x-2]+(h[x]-w[x-2])/2)):w[x]=x*(1/(l.length-1));h=w}return{colors:l,stops:h,width:o.width??0,height:o.height??o.width??0,pivot:o.pivot??[.5,.5]}}};P(As,"z$__type__Props"),P(As,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:l5,method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:o=>o.reduce((l,h)=>l.concat(Zu(h)),[]),updateProgramValue:uT,size:o=>o.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:o=>o.colors.length,method:"uniform1fv",type:"float"}}),P(As,"ColorLoop",o=>{let l="";for(let h=2;h<o;h++)l+=`colorOut = mix(colorOut, colors[${h}], clamp((dist - stops[${h-1}]) / (stops[${h}] - stops[${h-1}]), 0.0, 1.0));`;return l}),P(As,"onColorize",o=>{const l=o.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${As.ColorLoop(l)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let cg=As;class qa extends So{constructor(){super(...arguments);P(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(o){return{width:o.width??10,progress:o.progress??.5,offset:o.offset??0,range:o.range??Math.PI*2,rounded:o.rounded??!1,radius:o.radius??1,color:o.color??4294967295}}}P(qa,"z$__type__Props"),P(qa,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:o=>o?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:cl,method:"uniform4fv",type:"vec4"}}),P(qa,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),P(qa,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),P(qa,"onColorize",`
    return color;
  `);class Ka extends So{constructor(){super(...arguments);P(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(o){return{x:o.x||0,y:o.y||0,width:o.width||50,height:o.height||50,radius:o.radius??0}}}P(Ka,"z$__type__Props"),P(Ka,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Tg,updateProgramValue:fT}}),P(Ka,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),P(Ka,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),P(Ka,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const f5="RoundedRectangle";class yd extends sT{constructor(o){super();P(this,"shType");this.shType=o}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class c5{constructor(i,o,l,h){P(this,"type");P(this,"shader");P(this,"resolvedProps");P(this,"props");this.type=i,this.shader=o,this.resolvedProps=l;const g=Object.keys(l),x=g.length,w={};for(let s=0;s<x;s++){const m=g[s];Object.defineProperty(w,m,{get:()=>this.resolvedProps[m],set:C=>{this.resolvedProps[m]=C,h.requestRender()}})}this.props=w}getResolvedProps(){return this.resolvedProps}}class h5{constructor(i,o,l){P(this,"shader");P(this,"resolvedProps");P(this,"props");P(this,"type");this.shader=i,this.type="DynamicShader",this.resolvedProps=o;const h=l.getRegisteredEffects(),g={},x=o.effects,w=x.length;for(let s=0;s<w;s++){const{name:m,props:C,type:y}=x[s];if(m===void 0)continue;const v={},M=Object.keys(C),b=M.length;for(let _=0;_<b;_++){const U=M[_];Object.defineProperty(v,U,{get:()=>this.resolvedProps.effects[s].props[U].value,set:F=>{var B,G;const z=this.resolvedProps.effects[s].props[U];z.value=F,z.hasValidator&&(F=z.validatedValue=(B=h[y].uniforms[U])==null?void 0:B.validator(F,C)),z.hasProgramValueUpdater?(G=h[y].uniforms[U])==null||G.updateProgramValue(z):z.programValue=F,l.renderer.stage.requestRender()}})}Object.defineProperty(g,m,{get:()=>v})}this.props=g}getResolvedProps(){return this.resolvedProps}}class d5{constructor(){P(this,"shCache",new Map);P(this,"shConstructors",{});P(this,"attachedShader",null);P(this,"effectConstructors",{});P(this,"renderer");this.registerShaderType("DefaultShader",aT),this.registerShaderType("DefaultShaderBatched",lT),this.registerShaderType("RoundedRectangle",ag),this.registerShaderType("DynamicShader",nl),this.registerShaderType("SdfShader",lg),this.registerEffectType("border",Ou),this.registerEffectType("borderBottom",Wa),this.registerEffectType("borderLeft",Xa),this.registerEffectType("borderRight",Ha),this.registerEffectType("borderTop",Ga),this.registerEffectType("fadeOut",Wh),this.registerEffectType("linearGradient",ug),this.registerEffectType("radialGradient",cg),this.registerEffectType("grayscale",fg),this.registerEffectType("glitch",Nu),this.registerEffectType("radius",Va),this.registerEffectType("radialProgress",qa),this.registerEffectType("holePunch",Ka)}registerShaderType(i,o){this.shConstructors[i]=o}registerEffectType(i,o){this.effectConstructors[i]=o}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(i,o){if(!this.renderer)throw new Error("Renderer is not been defined");const l=this.shConstructors[i];if(!l)throw new Error(`Shader type "${i}" is not registered`);if(this.renderer.mode==="canvas"&&l.prototype instanceof Ds)return this._createShaderCtr(i,new yd(i),o);if(i==="DynamicShader")return this.loadDynamicShader(o);const h=l.resolveDefaults(o),g=l.makeCacheKey(h)||l.name;if(g&&this.shCache.has(g))return this._createShaderCtr(i,this.shCache.get(g),h);const x=new l(this.renderer,o);return g&&this.shCache.set(g,x),this._createShaderCtr(i,x,h)}loadDynamicShader(i){if(!this.renderer)throw new Error("Renderer is not been defined");const o=nl.resolveDefaults(i,this.effectConstructors),l=nl.makeCacheKey(o,this.effectConstructors);if(l&&this.shCache.has(l))return this._createDynShaderCtr(this.shCache.get(l),o);const h=new nl(this.renderer,i,this.effectConstructors);return l&&this.shCache.set(l,h),this._createDynShaderCtr(h,o)}_createShaderCtr(i,o,l){return new c5(i,o,l,this.renderer.stage)}_createDynShaderCtr(i,o){return i.bindUniformMethods(o),new h5(i,o,this)}useShader(i){this.attachedShader!==i&&(this.attachedShader&&this.attachedShader.detach(),i.attach(),this.attachedShader=i)}}const p5={x:(f,i)=>{f.props.x=i},y:(f,i)=>{f.props.y=i},width:(f,i)=>{f.props.width=i},height:(f,i)=>{f.props.height=i},color:(f,i)=>{f.props.color=i},zIndex:(f,i)=>{f.props.zIndex=i},fontFamily:(f,i)=>{f.props.fontFamily=i},fontWeight:(f,i)=>{f.props.fontWeight=i},fontStyle:(f,i)=>{f.props.fontStyle=i},fontStretch:(f,i)=>{f.props.fontStretch=i},fontSize:(f,i)=>{f.props.fontSize=i},text:(f,i)=>{f.props.text=i},textAlign:(f,i)=>{f.props.textAlign=i},contain:(f,i)=>{f.props.contain=i},offsetY:(f,i)=>{f.props.offsetY=i},scrollable:(f,i)=>{f.props.scrollable=i},scrollY:(f,i)=>{f.props.scrollY=i},letterSpacing:(f,i)=>{f.props.letterSpacing=i},lineHeight:(f,i)=>{f.props.lineHeight=i},maxLines:(f,i)=>{f.props.maxLines=i},textBaseline:(f,i)=>{f.props.textBaseline=i},verticalAlign:(f,i)=>{f.props.verticalAlign=i},overflowSuffix:(f,i)=>{f.props.overflowSuffix=i},debug:(f,i)=>{f.props.debug=i}};class bg{constructor(i){P(this,"stage");P(this,"set");this.stage=i;const o={...p5,...this.getPropertySetters()},l={};Object.keys(o).forEach(h=>{Object.defineProperty(l,h,{value:(g,x)=>{g.props[h]!==x&&(o[h](g,x),this.stage.requestRender())},writable:!1,configurable:!1})}),this.set=l}setStatus(i,o,l){i.status!==o&&(i.status=o,i.emitter.emit(o,l))}setIsRenderable(i,o){i.isRenderable=o}destroyState(i){this.setStatus(i,"destroyed"),i.emitter.removeAllListeners()}scheduleUpdateState(i){i.updateScheduled||(i.updateScheduled=!0,queueMicrotask(()=>{i.status!=="destroyed"&&(i.updateScheduled=!1,this.updateState(i))}))}}class m5{constructor(){P(this,"data",{})}reset(){this.data={}}increment(i){this.data[i]||(this.data[i]=0),this.data[i]++}getData(){return{...this.data}}}class g5{constructor(i,o){P(this,"stage");P(this,"memUsed",0);P(this,"loadedTextures",new Map);P(this,"orphanedTextures",[]);P(this,"criticalThreshold");P(this,"targetThreshold");P(this,"cleanupInterval");P(this,"debugLogging");P(this,"lastCleanupTime",0);P(this,"baselineMemoryAllocation");P(this,"criticalCleanupRequested",!1);P(this,"doNotExceedCriticalThreshold");P(this,"frameTime",0);this.stage=i;const{criticalThreshold:l,doNotExceedCriticalThreshold:h}=o;this.doNotExceedCriticalThreshold=h||!1,this.criticalThreshold=Math.round(l);const g=Math.max(0,Math.min(1,o.targetThresholdLevel));if(this.cleanupInterval=o.cleanupInterval,this.debugLogging=o.debugLogging,this.baselineMemoryAllocation=Math.round(o.baselineMemoryAllocation),this.targetThreshold=Math.max(Math.round(l*g),this.baselineMemoryAllocation),this.memUsed=Math.round(o.baselineMemoryAllocation),o.debugLogging){let x=0;setInterval(()=>{x!==this.memUsed&&(x=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${uC(this.memUsed)} mb / ${uC(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}l===0&&(this.setTextureMemUse=()=>{})}addToOrphanedTextures(i){this.orphanedTextures.includes(i)&&this.removeFromOrphanedTextures(i),i.preventCleanup===!1&&this.orphanedTextures.push(i)}removeFromOrphanedTextures(i){const o=this.orphanedTextures.indexOf(i);o!==-1&&this.orphanedTextures.splice(o,1)}setTextureMemUse(i,o){if(this.loadedTextures.has(i)&&(this.memUsed-=this.loadedTextures.get(i)),o===0){this.loadedTextures.delete(i);return}else this.memUsed+=o,this.loadedTextures.set(i,o);this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}checkCriticalCleanup(){return this.memUsed>this.criticalThreshold}cleanupQuick(i){const o=this.targetThreshold,l=Is();for(;this.memUsed>=o&&this.orphanedTextures.length>0&&(i||Is()-l<10);){const h=this.orphanedTextures.shift();h!==void 0&&h.renderable!==!0&&this.destroyTexture(h)}}destroyTexture(i){const o=this.stage.txManager;o.removeTextureFromQueue(i),o.removeTextureFromCache(i),i.destroy(),this.removeFromOrphanedTextures(i),this.loadedTextures.delete(i)}cleanupDeep(i){const o=i?this.criticalThreshold:this.targetThreshold,l=[],h=[...this.loadedTextures.keys()];for(let g=0;g<h.length;g++){const x=h[g];x!==void 0&&(x.type===Un.image||x.type===Un.noise||x.type===Un.renderToTexture)&&(x.renderable===!0?l.push(x):l.unshift(x))}for(;this.memUsed>=o&&l.length>0;){const g=l.shift();if(g!==void 0&&g.preventCleanup!==!0){if(g.renderable===!0)break;this.destroyTexture(g)}}}cleanup(i=!1){const o=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,o===!0&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging===!0&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${o}. Aggressive: ${i}`),this.cleanupQuick(o),i===!0&&this.memUsed>=this.criticalThreshold&&this.cleanupDeep(o),this.memUsed>=this.criticalThreshold?(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),(this.debugLogging===!0||fl()===!1)&&console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`)):this.criticalCleanupRequested=!1}getMemoryInfo(){let i=0;const o=[...this.loadedTextures.keys()].reduce((l,h)=>(i+=h.renderable?1:0,l+(h.renderable?this.loadedTextures.get(h):0)),this.baselineMemoryAllocation);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:o,memUsed:this.memUsed,renderableTexturesLoaded:i,loadedTextures:this.loadedTextures.size,baselineMemoryAllocation:this.baselineMemoryAllocation}}}class cT{constructor(i,o){P(this,"textureSource");P(this,"memManager");P(this,"state","freed");this.memManager=i,this.textureSource=o}setTextureMemUse(i){this.memManager.setTextureMemUse(this.textureSource,i)}get renderable(){return this.textureSource.renderable}}class hT{constructor(i){P(this,"options");P(this,"mode");P(this,"stage");P(this,"txManager");P(this,"txMemManager");P(this,"shManager");P(this,"rttNodes",[]);this.options=i,this.stage=i.stage,this.txManager=i.txManager,this.txMemManager=i.txMemManager,this.shManager=i.shManager}}class y5 extends rg{constructor(o,l,h){super(o,l);P(this,"textRenderer");P(this,"trState");P(this,"_textRendererOverride",null);P(this,"onTextLoaded",()=>{const{contain:o}=this,l=this.trState.props.width,h=this.trState.props.height,g=this.trState.textW||0,x=this.trState.textH||0;o==="both"?(this.props.width=l,this.props.height=h):o==="width"?(this.props.width=l,this.props.height=x):o==="none"&&(this.props.width=g,this.props.height=x),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});P(this,"onTextFailed",(o,l)=>{this.emit("failed",{type:"text",error:l})});this._textRendererOverride=l.textRendererOverride,this.textRenderer=h;const g=this.createState({x:this.absX,y:this.absY,width:l.width,height:l.height,textAlign:l.textAlign,color:l.color,zIndex:l.zIndex,contain:l.contain,scrollable:l.scrollable,scrollY:l.scrollY,offsetY:l.offsetY,letterSpacing:l.letterSpacing,debug:l.debug,fontFamily:l.fontFamily,fontSize:l.fontSize,fontStretch:l.fontStretch,fontStyle:l.fontStyle,fontWeight:l.fontWeight,text:l.text,lineHeight:l.lineHeight,maxLines:l.maxLines,textBaseline:l.textBaseline,verticalAlign:l.verticalAlign,overflowSuffix:l.overflowSuffix});this.trState=g}get width(){return this.props.width}set width(o){this.props.width=o,this.textRenderer.set.width(this.trState,o),this.contain==="none"&&this.setUpdateType(Ue.Local)}get height(){return this.props.height}set height(o){this.props.height=o,this.textRenderer.set.height(this.trState,o),this.contain!=="both"&&this.setUpdateType(Ue.Local)}get color(){return this.trState.props.color}set color(o){this.textRenderer.set.color(this.trState,o)}get text(){return this.trState.props.text}set text(o){this.textRenderer.set.text(this.trState,o)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(o){this._textRendererOverride=o,this.textRenderer.destroyState(this.trState);const l=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);if(!l){console.warn("Text Renderer not found for font",this.trState.props.fontFamily);return}this.textRenderer=l,this.trState=this.createState(this.trState.props)}get fontSize(){return this.trState.props.fontSize}set fontSize(o){this.textRenderer.set.fontSize(this.trState,o)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(o){this.textRenderer.set.fontFamily(this.trState,o)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(o){this.textRenderer.set.fontStretch(this.trState,o)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(o){this.textRenderer.set.fontStyle(this.trState,o)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(o){this.textRenderer.set.fontWeight(this.trState,o)}get textAlign(){return this.trState.props.textAlign}set textAlign(o){this.textRenderer.set.textAlign(this.trState,o)}get contain(){return this.trState.props.contain}set contain(o){this.textRenderer.set.contain(this.trState,o)}get scrollable(){return this.trState.props.scrollable}set scrollable(o){this.textRenderer.set.scrollable(this.trState,o)}get scrollY(){return this.trState.props.scrollY}set scrollY(o){this.textRenderer.set.scrollY(this.trState,o)}get offsetY(){return this.trState.props.offsetY}set offsetY(o){this.textRenderer.set.offsetY(this.trState,o)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(o){this.textRenderer.set.letterSpacing(this.trState,o)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(o){this.textRenderer.set.lineHeight(this.trState,o)}get maxLines(){return this.trState.props.maxLines}set maxLines(o){this.textRenderer.set.maxLines(this.trState,o)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(o){this.textRenderer.set.textBaseline(this.trState,o)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(o){this.textRenderer.set.verticalAlign(this.trState,o)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(o){this.textRenderer.set.overflowSuffix(this.trState,o)}get debug(){return this.trState.props.debug}set debug(o){this.textRenderer.set.debug(this.trState,o)}update(o,l){super.update(o,l),ut(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkBasicRenderability(){return this.worldAlpha===0||this.isOutOfBounds()===!0?!1:!!(this.trState&&this.trState.props.text!=="")}setRenderable(o){super.setRenderable(o),this.textRenderer.setIsRenderable(this.trState,o)}renderQuads(o){var l;if(ut(this.globalTransform),!this.textRenderer.renderQuads){super.renderQuads(o);return}this.parentHasRenderTexture&&(!o.renderToTextureActive||this.parentRenderTexture!==o.activeRttNode)||(this.parentHasRenderTexture&&((l=this.props.parent)!=null&&l.rtt)&&(this.globalTransform=yo.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),ut(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}createState(o){const l=this.textRenderer.createState(o,this);return l.emitter.on("loaded",this.onTextLoaded),l.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(l),l}}function v5(f){const i={boolean:!0,string:!0,number:!0,undefined:!0},o=Object.keys(f);for(let l=0;l<o.length;l++){const h=o[l];if(!h)continue;const g=f[h],x=typeof g;x==="string"&&g.length>2048&&(console.warn(`Custom Data value for ${h} is too long, it will be truncated to 2048 characters`),f[h]=g.substring(0,2048)),i[x]||(console.warn(`Custom Data value for ${h} is not a boolean, string, or number, it will be ignored`),delete f[h])}return f}const x5=2e6;class w5{constructor(i){P(this,"options");P(this,"animationManager");P(this,"txManager");P(this,"txMemManager");P(this,"fontManager");P(this,"textRenderers");P(this,"shManager");P(this,"renderer");P(this,"root");P(this,"boundsMargin");P(this,"defShaderCtr");P(this,"strictBound");P(this,"preloadBound");P(this,"strictBounds");P(this,"defaultTexture",null);P(this,"eventBus");P(this,"deltaTime",0);P(this,"lastFrameTime",0);P(this,"currentFrameTime",0);P(this,"fpsNumFrames",0);P(this,"fpsElapsedTime",0);P(this,"numQuadsRendered",0);P(this,"renderRequested",!1);P(this,"frameEventQueue",[]);P(this,"fontResolveMap",{});P(this,"contextSpy",null);this.options=i;const{canvas:o,clearColor:l,appWidth:h,appHeight:g,boundsMargin:x,enableContextSpy:w,forceWebGL2:s,numImageWorkers:m,textureMemory:C,renderEngine:y,fontEngines:v,createImageBitmapSupport:M}=i;this.eventBus=i.eventBus,this.txManager=new t5(this,{numImageWorkers:m,createImageBitmapSupport:M}),this.txManager.on("initialized",()=>{this.requestRender()}),this.txMemManager=new g5(this,C),this.shManager=new d5,this.animationManager=new X_,this.contextSpy=w?new m5:null,this.strictBounds=i.strictBounds;let b=[0,0,0,0];x&&(b=Array.isArray(x)?x:[x,x,x,x]),this.boundsMargin=b,this.strictBound=el(0,0,h,g),this.preloadBound=ig(this.strictBound,b);const _={stage:this,canvas:o,pixelRatio:i.devicePhysicalPixelRatio*i.deviceLogicalPixelRatio,clearColor:l??4278190080,bufferMemory:x5,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy,forceWebGL2:s};this.renderer=new y(_);const U=this.renderer.mode||"webgl";this.createDefaultTexture(),this.defShaderCtr=this.renderer.getDefShaderCtr(),__(U),this.txManager.renderer=this.renderer,this.textRenderers={},v.forEach(z=>{const B=new z(this),G=B.type;if(G==="sdf"&&U==="canvas"){console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...");return}B instanceof bg&&(G==="canvas"?this.textRenderers.canvas=B:G==="sdf"&&(this.textRenderers.sdf=B))}),Object.keys(this.textRenderers).length===0&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new i5(this.textRenderers);const F=new rg(this,{x:0,y:0,width:h,height:g,alpha:1,autosize:!1,boundsMargin:null,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1,strictBounds:this.strictBounds});this.root=F,W_(this)}setClearColor(i){this.renderer.updateClearColor(i),this.renderRequested=!0}updateFrameTime(){const i=Is();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=i,this.deltaTime=this.lastFrameTime?i-this.lastFrameTime:100/6,this.txManager.frameTime=i,this.txMemManager.frameTime=i,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}createDefaultTexture(){console.log("Creating default texture"),this.defaultTexture=this.txManager.createTexture("ColorTexture",{color:4294967295}),ut(this.defaultTexture instanceof od),this.txManager.loadTexture(this.defaultTexture,!0),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.requestRender()})}updateAnimations(){const{animationManager:i}=this;this.root&&i.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested||this.txManager.hasUpdates()}drawFrame(){const{renderer:i,renderRequested:o}=this;ut(i),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),this.txManager.processSome(this.options.textureProcessingTimeLimit),i.reset(),this.txMemManager.criticalCleanupRequested===!0&&(this.txMemManager.cleanup(!1),this.txMemManager.criticalCleanupRequested===!0&&this.txMemManager.cleanup(!0)),i.rttNodes.length>0&&i.renderRTTNodes(),this.addQuads(this.root),i==null||i.render(),this.calculateFps(),this.calculateQuads(),o&&(this.renderRequested=!1)}queueFrameEvent(i,o){this.frameEventQueue.push([i,o])}flushFrameEvents(){for(const[i,o]of this.frameEventQueue)this.eventBus.emit(i,o);this.frameEventQueue=[]}calculateFps(){var o,l;const{fpsUpdateInterval:i}=this.options;if(i&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=i)){const h=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:h,contextSpyData:((o=this.contextSpy)==null?void 0:o.getData())??null}),(l=this.contextSpy)==null||l.reset()}}calculateQuads(){const i=this.renderer.getQuadCount();i&&i!==this.numQuadsRendered&&(this.numQuadsRendered=i,this.queueFrameEvent("quadsUpdate",{quads:i}))}addQuads(i){ut(this.renderer),i.isRenderable===!0&&i.renderQuads(this.renderer);for(let o=0;o<i.children.length;o++){const l=i.children[o];l!==void 0&&(l.worldAlpha===0||l.strictBounds===!0&&l.renderState===xo.OutOfBounds||this.addQuads(l))}}requestRender(){this.renderRequested=!0}resolveTextRenderer(i,o=null){const l=`${i.fontFamily}${i.fontStyle}${i.fontWeight}${i.fontStretch}${o||""}`;if(this.fontResolveMap[l]!==void 0)return this.fontResolveMap[l];let h=o,g=!1;if(h){const w=this.textRenderers[h];w?w.canRenderFont(i)||(console.warn(`Cannot use override text renderer '${h}' for font`,i),h=null,g=!0):(console.warn(`Text renderer override '${h}' not found.`),h=null,g=!0)}if(!h){for(const[w,s]of Object.entries(this.textRenderers))if(s.canRenderFont(i)){h=w;break}!h&&this.textRenderers.canvas!==void 0&&(h="canvas")}if(g&&console.warn(`Falling back to text renderer ${String(h)}`),!h)return null;const x=this.textRenderers[h];return ut(x,"resolvedTextRenderer undefined"),this.fontResolveMap[l]=x,x}createShaderCtr(i,o){return this.shManager.loadShader(i,o)}createNode(i){const o=this.resolveNodeDefaults(i);return new rg(this,o)}createTextNode(i){const o=i.fontSize??16,l={...this.resolveNodeDefaults(i),text:i.text??"",textRendererOverride:i.textRendererOverride??null,fontSize:o,fontFamily:i.fontFamily??"sans-serif",fontStyle:i.fontStyle??"normal",fontWeight:i.fontWeight??"normal",fontStretch:i.fontStretch??"normal",textAlign:i.textAlign??"left",contain:i.contain??"none",scrollable:i.scrollable??!1,scrollY:i.scrollY??0,offsetY:i.offsetY??0,letterSpacing:i.letterSpacing??0,lineHeight:i.lineHeight,maxLines:i.maxLines??0,textBaseline:i.textBaseline??"alphabetic",verticalAlign:i.verticalAlign??"middle",overflowSuffix:i.overflowSuffix??"...",debug:i.debug??{},shaderProps:null},h=this.resolveTextRenderer(l,i.textRendererOverride);if(!h)throw new Error(`No compatible text renderer found for ${l.fontFamily}`);return new y5(this,l,h)}setBoundsMargin(i){this.boundsMargin=Array.isArray(i)?i:[i,i,i,i],this.root.setUpdateType(Ue.RenderBounds)}resolveNodeDefaults(i){const o=i.color??4294967295,l=i.colorTl??i.colorTop??i.colorLeft??o,h=i.colorTr??i.colorTop??i.colorRight??o,g=i.colorBl??i.colorBottom??i.colorLeft??o,x=i.colorBr??i.colorBottom??i.colorRight??o;let w={};return this.options.inspector===!0&&(w=v5(i.data??{})),{x:i.x??0,y:i.y??0,width:i.width??0,height:i.height??0,alpha:i.alpha??1,autosize:i.autosize??!1,boundsMargin:i.boundsMargin??null,clipping:i.clipping??!1,color:o,colorTop:i.colorTop??o,colorBottom:i.colorBottom??o,colorLeft:i.colorLeft??o,colorRight:i.colorRight??o,colorBl:g,colorBr:x,colorTl:l,colorTr:h,zIndex:i.zIndex??0,zIndexLocked:i.zIndexLocked??0,parent:i.parent??null,texture:i.texture??null,textureOptions:i.textureOptions??{},shader:i.shader??this.defShaderCtr,src:i.src??null,srcHeight:i.srcHeight,srcWidth:i.srcWidth,srcX:i.srcX,srcY:i.srcY,scale:i.scale??null,scaleX:i.scaleX??i.scale??1,scaleY:i.scaleY??i.scale??1,mount:i.mount??0,mountX:i.mountX??i.mount??0,mountY:i.mountY??i.mount??0,pivot:i.pivot??.5,pivotX:i.pivotX??i.pivot??.5,pivotY:i.pivotY??i.pivot??.5,rotation:i.rotation??0,rtt:i.rtt??!1,data:w,preventCleanup:i.preventCleanup??!1,imageType:i.imageType,strictBounds:i.strictBounds??this.strictBounds}}cleanup(i){this.txMemManager.cleanup(i)}}class S5 extends Lr{constructor(o,l){var _,U,F,z,B,G;super();P(this,"root");P(this,"canvas");P(this,"settings");P(this,"stage");P(this,"inspector",null);const h={criticalThreshold:((_=o.textureMemory)==null?void 0:_.criticalThreshold)||124e6,targetThresholdLevel:((U=o.textureMemory)==null?void 0:U.targetThresholdLevel)||.5,cleanupInterval:((F=o.textureMemory)==null?void 0:F.cleanupInterval)||5e3,debugLogging:((z=o.textureMemory)==null?void 0:z.debugLogging)||!1,baselineMemoryAllocation:((B=o.textureMemory)==null?void 0:B.baselineMemoryAllocation)||26e6,doNotExceedCriticalThreshold:((G=o.textureMemory)==null?void 0:G.doNotExceedCriticalThreshold)||!1},g={appWidth:o.appWidth||1920,appHeight:o.appHeight||1080,textureMemory:h,boundsMargin:o.boundsMargin||0,deviceLogicalPixelRatio:o.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:o.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:o.clearColor??0,fpsUpdateInterval:o.fpsUpdateInterval||0,numImageWorkers:o.numImageWorkers!==void 0?o.numImageWorkers:2,enableContextSpy:o.enableContextSpy??!1,forceWebGL2:o.forceWebGL2??!1,inspector:o.inspector??!1,renderEngine:o.renderEngine,quadBufferSize:o.quadBufferSize??4*1024*1024,fontEngines:o.fontEngines,strictBounds:o.strictBounds??!0,textureProcessingTimeLimit:o.textureProcessingTimeLimit||10,canvas:o.canvas||document.createElement("canvas"),createImageBitmapSupport:o.createImageBitmapSupport||"full"};this.settings=g;const{appWidth:x,appHeight:w,deviceLogicalPixelRatio:s,devicePhysicalPixelRatio:m,inspector:C,canvas:y}=g,v=x*s,M=w*s;this.canvas=y,y.width=v*m,y.height=M*m,y.style.width=`${v}px`,y.style.height=`${M}px`,this.stage=new w5({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,forceWebGL2:this.settings.forceWebGL2,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderEngine:this.settings.renderEngine,textureMemory:h,eventBus:this,quadBufferSize:this.settings.quadBufferSize,fontEngines:this.settings.fontEngines,inspector:this.settings.inspector!==null,strictBounds:this.settings.strictBounds,textureProcessingTimeLimit:this.settings.textureProcessingTimeLimit,createImageBitmapSupport:this.settings.createImageBitmapSupport}),this.root=this.stage.root;let b;if(typeof l=="string"?b=document.getElementById(l):b=l,!b)throw new Error("Could not find target element");b.appendChild(y),C&&!fl()&&(this.inspector=new C(y,g))}createNode(o){const l=this.stage.createNode(o);return this.inspector?this.inspector.createNode(l):l}createTextNode(o){const l=this.stage.createTextNode(o);return this.inspector?this.inspector.createTextNode(l):l}destroyNode(o){return this.inspector&&this.inspector.destroyNode(o.id),o.destroy()}createTexture(o,l){return this.stage.txManager.createTexture(o,l)}createShader(o,l){return this.stage.shManager.loadShader(o,l)}createDynamicShader(o){return this.stage.shManager.loadDynamicShader({effects:o})}createEffect(o,l,h){return{name:h,type:o,props:l}}getNodeById(o){var g;const l=(g=this.stage)==null?void 0:g.root;if(!l)return null;const h=x=>{if(x.id===o)return x;for(const w of x.children){const s=h(w);if(s)return s}return null};return h(l)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){this.stage.requestRender()}cleanup(o=!1){this.stage.cleanup(o)}setClearColor(o){this.stage.setClearColor(o)}}class dT extends Lr{constructor(o){super();P(this,"fontFamily");P(this,"descriptors");P(this,"loaded",!1);P(this,"metrics",null);const{fontFamily:l,descriptors:h,metrics:g}=o;g&&(this.metrics={ascender:g.ascender/g.unitsPerEm,descender:g.descender/g.unitsPerEm,lineGap:g.lineGap/g.unitsPerEm}),this.fontFamily=l,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...h}}static convertToCssFontFaceDescriptors(o){return{style:o.style,weight:typeof o.weight=="number"?`${o.weight}`:o.weight,stretch:o.stretch,unicodeRange:o.unicodeRange,featureSettings:o.featureSettings,display:o.display}}}class Xh extends dT{constructor(o){super(o);P(this,"fontFace");P(this,"fontUrl");const{fontFamily:l,fontUrl:h}=o,g=h.replace(/\(|\)/g,""),x=this.descriptors;let w={style:x.style,weight:typeof x.weight=="number"?`${x.weight}`:x.weight,stretch:x.stretch,unicodeRange:x.unicodeRange,featureSettings:x.featureSettings,display:x.display};for(const m in w){const C=m;w[C]===void 0&&delete w[C]}const s=new FontFace(l,`url(${g})`,w);g.length>0?s.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error):(this.loaded=!0,this.emit("loaded")),this.fontFace=s,this.fontUrl=h}}class C5{}class pT extends C5{constructor(o,l,h,g,x,w,s,m,C,y,v,M,b){super();P(this,"glw");P(this,"options");P(this,"buffers");P(this,"shader");P(this,"shaderProps");P(this,"alpha");P(this,"clippingRect");P(this,"dimensions");P(this,"bufferIdx");P(this,"zIndex");P(this,"renderToTexture");P(this,"parentHasRenderTexture");P(this,"framebufferDimensions");P(this,"length",0);P(this,"numQuads",0);P(this,"textures",[]);P(this,"maxTextures");this.glw=o,this.options=l,this.buffers=h,this.shader=g,this.shaderProps=x,this.alpha=w,this.clippingRect=s,this.dimensions=m,this.bufferIdx=C,this.zIndex=y,this.renderToTexture=v,this.parentHasRenderTexture=M,this.framebufferDimensions=b,this.maxTextures=g.supportsIndexedTextures?o.getParameter(o.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(o){const{textures:l,maxTextures:h}=this;let g=-1;const x=l.length;for(let w=0;w<x;w++)if(l[w]===o){g=w;break}return g!==-1?g:x>=h?4294967295:(this.textures.push(o),x)}draw(){const{glw:o,shader:l,shaderProps:h,options:g}=this,{shManager:x}=g;x.useShader(l),l.bindRenderOp(this,h);const w=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:s,y:m,width:C,height:y}=this.clippingRect,v=this.parentHasRenderTexture?1:g.pixelRatio,M=g.canvas.height,b=Math.round(s*v),_=Math.round(C*v),U=Math.round(y*v);let F=Math.round(M-U-m*v);this.parentHasRenderTexture&&(F=this.framebufferDimensions?this.framebufferDimensions.height-this.dimensions.height:0),o.setScissorTest(!0),o.scissor(b,F,_,U)}else o.setScissorTest(!1);o.drawElements(o.TRIANGLES,6*this.numQuads,o.UNSIGNED_SHORT,w)}}function T5(f){const i={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(i).forEach(l=>{i[l]=f.getParameter(f[l])}),i}function b5(f){const i={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(i).forEach(l=>{i[l]=f.getExtension(l)}),i}function k5(f,i){const o=~~(i/80),l=new Uint16Array(o*6);for(let g=0,x=0;g<o;g+=6,x+=4)l[g]=x,l[g+1]=x+1,l[g+2]=x+2,l[g+3]=x+2,l[g+4]=x+1,l[g+5]=x+3;const h=f.createBuffer();f.elementArrayBufferData(h,l,f.STATIC_DRAW)}function E5(f){return f!==null&&(typeof f=="object"&&f.constructor&&f.constructor.name==="HTMLImageElement"||typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement)}const F0=new Uint8Array([0,0,0,0]);class rd extends cT{constructor(o,l,h){super(l,h);P(this,"glw");P(this,"_nativeCtxTexture",null);P(this,"_w",0);P(this,"_h",0);this.glw=o}get ctxTexture(){return this.state==="freed"?(this.load(),null):(ut(this._nativeCtxTexture),this._nativeCtxTexture)}get w(){return this._w}get h(){return this._h}load(){if(!(this.state==="loading"||this.state==="loaded")){if(this.state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this._nativeCtxTexture===null){this.state="failed",this.textureSource.setState("failed",new Error("Could not create WebGL Texture")),console.error("Could not create WebGL Texture");return}this.onLoadRequest().then(({width:o,height:l})=>{this.state!=="freed"&&(this.state="loaded",this._w=o,this._h=l,this.textureSource.setState("loaded",{width:o,height:l}),this.textureSource.freeTextureData())}).catch(o=>{this.state!=="freed"&&(this.state="failed",this.textureSource.setState("failed",o),this.textureSource.freeTextureData(),console.error(o))})}}async onLoadRequest(){const{glw:o}=this,l=this.textureSource.textureData;if(l===null||this._nativeCtxTexture===null)throw new Error("Texture data or native texture is null "+this.textureSource.type);o.texImage2D(0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,null),this.setTextureMemUse(F0.byteLength);let h=0,g=0;o.activeTexture(0);const x=l.data,w=o.RGBA,s=4,m=1.1;if(typeof ImageBitmap<"u"&&x instanceof ImageBitmap||x instanceof ImageData||E5(x))h=x.width,g=x.height,o.bindTexture(this._nativeCtxTexture),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!l.premultiplyAlpha),o.texImage2D(0,w,w,o.UNSIGNED_BYTE,x),this.setTextureMemUse(g*h*s*m);else if(x===null)h=0,g=0,o.bindTexture(this._nativeCtxTexture),o.texImage2D(0,w,1,1,0,w,o.UNSIGNED_BYTE,F0),this.setTextureMemUse(F0.byteLength);else if("mipmaps"in x&&x.mipmaps){const{mipmaps:C,width:y=0,height:v=0,type:M,glInternalFormat:b}=x,_=M==="ktx"?new DataView(C[0]??new ArrayBuffer(0)):C[0];o.bindTexture(this._nativeCtxTexture),o.compressedTexImage2D(0,b,y,v,0,_),o.texParameteri(o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_MIN_FILTER,o.LINEAR),this.setTextureMemUse(_.byteLength)}else x&&x instanceof Uint8Array?(h=1,g=1,o.bindTexture(this._nativeCtxTexture),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!l.premultiplyAlpha),o.texImage2D(0,w,h,g,0,w,o.UNSIGNED_BYTE,x),this.setTextureMemUse(h*g*s)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",l);return{width:h,height:g}}free(){this.state!=="freed"&&(this.state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,this._nativeCtxTexture!==null&&(this.glw.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null),this.textureSource.freeTextureData())}createNativeCtxTexture(){const{glw:o}=this,l=o.createTexture();return l?(o.activeTexture(0),o.bindTexture(l),o.texParameteri(o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),l):null}}class A5 extends rd{constructor(i,o,l){super(i,o,l)}async onLoadRequest(){var o,l;const i=this.textureSource.textureData;return ut(i,"SubTexture must have texture data"),i.data instanceof Uint8Array?{width:1,height:1}:{width:((o=i.data)==null?void 0:o.width)||0,height:((l=i.data)==null?void 0:l.height)||0}}}class mT{constructor(i){P(this,"config");this.config=i}getBuffer(i){var o;return(o=this.config.find(l=>l.attributes[i]))==null?void 0:o.buffer}getAttributeInfo(i){var o;return(o=this.config.find(l=>l.attributes[i]))==null?void 0:o.attributes[i]}}function I5(f){return self.WebGL2RenderingContext&&f instanceof self.WebGL2RenderingContext}class M5{constructor(i){P(this,"gl");P(this,"activeTextureUnit",0);P(this,"texture2dUnits");P(this,"texture2dParams",new WeakMap);P(this,"scissorEnabled");P(this,"scissorX");P(this,"scissorY");P(this,"scissorWidth");P(this,"scissorHeight");P(this,"blendEnabled");P(this,"blendSrcRgb");P(this,"blendDstRgb");P(this,"blendSrcAlpha");P(this,"blendDstAlpha");P(this,"boundArrayBuffer");P(this,"boundElementArrayBuffer");P(this,"curProgram");P(this,"canvas");P(this,"MAX_RENDERBUFFER_SIZE");P(this,"MAX_TEXTURE_SIZE");P(this,"MAX_VIEWPORT_DIMS");P(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");P(this,"MAX_TEXTURE_IMAGE_UNITS");P(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");P(this,"MAX_VERTEX_ATTRIBS");P(this,"MAX_VARYING_VECTORS");P(this,"MAX_VERTEX_UNIFORM_VECTORS");P(this,"MAX_FRAGMENT_UNIFORM_VECTORS");P(this,"TEXTURE_MAG_FILTER");P(this,"TEXTURE_MIN_FILTER");P(this,"TEXTURE_WRAP_S");P(this,"TEXTURE_WRAP_T");P(this,"LINEAR");P(this,"CLAMP_TO_EDGE");P(this,"RGB");P(this,"RGBA");P(this,"UNSIGNED_BYTE");P(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");P(this,"UNPACK_FLIP_Y_WEBGL");P(this,"FLOAT");P(this,"TRIANGLES");P(this,"UNSIGNED_SHORT");P(this,"ONE");P(this,"ONE_MINUS_SRC_ALPHA");P(this,"VERTEX_SHADER");P(this,"FRAGMENT_SHADER");P(this,"STATIC_DRAW");P(this,"COMPILE_STATUS");P(this,"LINK_STATUS");P(this,"DYNAMIC_DRAW");P(this,"COLOR_ATTACHMENT0");P(this,"INVALID_ENUM");P(this,"INVALID_OPERATION");this.gl=i,this.activeTextureUnit=i.getParameter(i.ACTIVE_TEXTURE)-i.TEXTURE0;const o=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(o).fill(void 0).map((h,g)=>(this.activeTexture(g),i.getParameter(i.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=i.isEnabled(i.SCISSOR_TEST);const l=i.getParameter(i.SCISSOR_BOX);this.scissorX=l[0],this.scissorY=l[1],this.scissorWidth=l[2],this.scissorHeight=l[3],this.blendEnabled=i.isEnabled(i.BLEND),this.blendSrcRgb=i.getParameter(i.BLEND_SRC_RGB),this.blendDstRgb=i.getParameter(i.BLEND_DST_RGB),this.blendSrcAlpha=i.getParameter(i.BLEND_SRC_ALPHA),this.blendDstAlpha=i.getParameter(i.BLEND_DST_ALPHA),this.boundArrayBuffer=i.getParameter(i.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=i.getParameter(i.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=i.getParameter(i.CURRENT_PROGRAM),this.canvas=i.canvas,this.MAX_RENDERBUFFER_SIZE=i.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=i.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=i.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=i.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=i.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=i.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=i.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=i.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=i.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=i.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=i.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=i.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=i.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=i.TEXTURE_WRAP_T,this.LINEAR=i.LINEAR,this.CLAMP_TO_EDGE=i.CLAMP_TO_EDGE,this.RGB=i.RGB,this.RGBA=i.RGBA,this.UNSIGNED_BYTE=i.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=i.UNPACK_FLIP_Y_WEBGL,this.FLOAT=i.FLOAT,this.TRIANGLES=i.TRIANGLES,this.UNSIGNED_SHORT=i.UNSIGNED_SHORT,this.ONE=i.ONE,this.ONE_MINUS_SRC_ALPHA=i.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=i.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=i.TRIANGLES,this.UNSIGNED_SHORT=i.UNSIGNED_SHORT,this.VERTEX_SHADER=i.VERTEX_SHADER,this.FRAGMENT_SHADER=i.FRAGMENT_SHADER,this.STATIC_DRAW=i.STATIC_DRAW,this.COMPILE_STATUS=i.COMPILE_STATUS,this.LINK_STATUS=i.LINK_STATUS,this.DYNAMIC_DRAW=i.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=i.COLOR_ATTACHMENT0,this.INVALID_ENUM=i.INVALID_ENUM,this.INVALID_OPERATION=i.INVALID_OPERATION}isWebGl2(){return I5(this.gl)}activeTexture(i){const{gl:o}=this;this.activeTextureUnit!==i&&(o.activeTexture(i+o.TEXTURE0),this.activeTextureUnit=i)}bindTexture(i){const{gl:o,activeTextureUnit:l,texture2dUnits:h}=this;h[l]!==i&&(h[l]=i,o.bindTexture(this.gl.TEXTURE_2D,i))}_getActiveTexture(){const{activeTextureUnit:i,texture2dUnits:o}=this;return o[i]}texParameteri(i,o){const{gl:l,texture2dParams:h}=this,g=this._getActiveTexture();if(!g)throw new Error("No active texture");let x=h.get(g);x||(x={},h.set(g,x)),x[i]!==o&&(x[i]=o,l.texParameteri(l.TEXTURE_2D,i,o))}texImage2D(i,o,l,h,g,x,w,s){const{gl:m}=this;x?m.texImage2D(m.TEXTURE_2D,i,o,l,h,g,x,w,s):m.texImage2D(m.TEXTURE_2D,i,o,l,h,g)}compressedTexImage2D(i,o,l,h,g,x){const{gl:w}=this;w.compressedTexImage2D(w.TEXTURE_2D,i,o,l,h,g,x)}pixelStorei(i,o){const{gl:l}=this;l.pixelStorei(i,o)}generateMipmap(){const{gl:i}=this;i.generateMipmap(i.TEXTURE_2D)}createTexture(){const{gl:i}=this;return i.createTexture()}deleteTexture(i){const{gl:o}=this;i&&this.texture2dParams.delete(i),o.deleteTexture(i)}deleteFramebuffer(i){this.gl.deleteFramebuffer(i)}viewport(i,o,l,h){const{gl:g}=this;g.viewport(i,o,l,h)}clearColor(i,o,l,h){const{gl:g}=this;g.clearColor(i,o,l,h)}setScissorTest(i){const{gl:o,scissorEnabled:l}=this;i!==l&&(i?o.enable(o.SCISSOR_TEST):o.disable(o.SCISSOR_TEST),this.scissorEnabled=i)}scissor(i,o,l,h){const{gl:g,scissorX:x,scissorY:w,scissorWidth:s,scissorHeight:m}=this;(i!==x||o!==w||l!==s||h!==m)&&(g.scissor(i,o,l,h),this.scissorX=i,this.scissorY=o,this.scissorWidth=l,this.scissorHeight=h)}setBlend(i){const{gl:o,blendEnabled:l}=this;i!==l&&(i?o.enable(o.BLEND):o.disable(o.BLEND),this.blendEnabled=i)}blendFunc(i,o){const{gl:l,blendSrcRgb:h,blendDstRgb:g,blendSrcAlpha:x,blendDstAlpha:w}=this;(i!==h||o!==g||i!==x||o!==w)&&(l.blendFunc(i,o),this.blendSrcRgb=i,this.blendDstRgb=o,this.blendSrcAlpha=i,this.blendDstAlpha=o)}createBuffer(){const{gl:i}=this;return i.createBuffer()}createFramebuffer(){const{gl:i}=this;return i.createFramebuffer()}bindFramebuffer(i){const{gl:o}=this;o.bindFramebuffer(o.FRAMEBUFFER,i)}framebufferTexture2D(i,o,l){const{gl:h}=this;h.framebufferTexture2D(h.FRAMEBUFFER,i,h.TEXTURE_2D,o,l)}clear(){const{gl:i}=this;i.clear(i.COLOR_BUFFER_BIT)}arrayBufferData(i,o,l){const{gl:h,boundArrayBuffer:g}=this;g!==i&&(h.bindBuffer(h.ARRAY_BUFFER,i),this.boundArrayBuffer=i),h.bufferData(h.ARRAY_BUFFER,o,l)}elementArrayBufferData(i,o,l){const{gl:h,boundElementArrayBuffer:g}=this;g!==i&&(h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,i),this.boundElementArrayBuffer=i),h.bufferData(h.ELEMENT_ARRAY_BUFFER,o,l)}vertexAttribPointer(i,o,l,h,g,x,w){const{gl:s,boundArrayBuffer:m}=this;m!==i&&(s.bindBuffer(s.ARRAY_BUFFER,i),this.boundArrayBuffer=i),s.vertexAttribPointer(o,l,h,g,x,w)}useProgram(i){const{gl:o,curProgram:l}=this;l!==i&&(o.useProgram(i),this.curProgram=i)}uniform1f(i,o){const{gl:l}=this;l.uniform1f(i,o)}uniform1fv(i,o){const{gl:l}=this;l.uniform1fv(i,o)}uniform1i(i,o){const{gl:l}=this;l.uniform1i(i,o)}uniform1iv(i,o){const{gl:l}=this;l.uniform1iv(i,o)}uniform2f(i,o,l){const{gl:h}=this;h.uniform2f(i,o,l)}uniform2fv(i,o){const{gl:l}=this;l.uniform2fv(i,o)}uniform2i(i,o,l){const{gl:h}=this;h.uniform2i(i,o,l)}uniform2iv(i,o){const{gl:l}=this;l.uniform2iv(i,o)}uniform3f(i,o,l,h){const{gl:g}=this;g.uniform3f(i,o,l,h)}uniform3fv(i,o){const{gl:l}=this;l.uniform3fv(i,o)}uniform3i(i,o,l,h){const{gl:g}=this;g.uniform3i(i,o,l,h)}uniform3iv(i,o){const{gl:l}=this;l.uniform3iv(i,o)}uniform4f(i,o,l,h,g){const{gl:x}=this;x.uniform4f(i,o,l,h,g)}uniform4fv(i,o){const{gl:l}=this;l.uniform4fv(i,o)}uniform4i(i,o,l,h,g){const{gl:x}=this;x.uniform4i(i,o,l,h,g)}uniform4iv(i,o){const{gl:l}=this;l.uniform4iv(i,o)}uniformMatrix2fv(i,o){const{gl:l}=this;l.uniformMatrix2fv(i,!1,o)}uniformMatrix3fv(i,o){const{gl:l}=this;l.uniformMatrix3fv(i,!1,o)}uniformMatrix4fv(i,o){const{gl:l}=this;l.uniformMatrix4fv(i,!1,o)}getParameter(i){const{gl:o}=this;return o.getParameter(i)}drawElements(i,o,l,h){const{gl:g}=this;g.drawElements(i,o,l,h)}getExtension(i){const{gl:o}=this;return o.getExtension(i)}getError(){const{gl:i}=this;return i.getError()}createVertexArray(){const{gl:i}=this;return ut(i instanceof WebGL2RenderingContext),i.createVertexArray()}bindVertexArray(i){const{gl:o}=this;ut(o instanceof WebGL2RenderingContext),o.bindVertexArray(i)}getAttribLocation(i,o){const{gl:l}=this;return l.getAttribLocation(i,o)}getUniformLocation(i,o){const{gl:l}=this;return l.getUniformLocation(i,o)}enableVertexAttribArray(i){const{gl:o}=this;o.enableVertexAttribArray(i)}disableVertexAttribArray(i){const{gl:o}=this;o.disableVertexAttribArray(i)}createShader(i){const{gl:o}=this;return o.createShader(i)}compileShader(i){const{gl:o}=this;o.compileShader(i)}attachShader(i,o){const{gl:l}=this;l.attachShader(i,o)}linkProgram(i){const{gl:o}=this;o.linkProgram(i)}deleteProgram(i){const{gl:o}=this;o.deleteProgram(i)}getShaderParameter(i,o){const{gl:l}=this;return l.getShaderParameter(i,o)}getShaderInfoLog(i){const{gl:o}=this;return o.getShaderInfoLog(i)}createProgram(){const{gl:i}=this;return i.createProgram()}getProgramParameter(i,o){const{gl:l}=this;return l.getProgramParameter(i,o)}getProgramInfoLog(i){const{gl:o}=this;return o.getProgramInfoLog(i)}shaderSource(i,o){const{gl:l}=this;l.shaderSource(i,o)}deleteShader(i){const{gl:o}=this;o.deleteShader(i)}}class pC extends rd{constructor(o,l,h){super(o,l,h);P(this,"framebuffer",null)}async onLoadRequest(){const{glw:o}=this,l=this._nativeCtxTexture=this.createNativeCtxTexture(),{width:h,height:g}=this.textureSource;return this.framebuffer=o.createFramebuffer(),o.texImage2D(0,o.RGBA,h,g,0,o.RGBA,o.UNSIGNED_BYTE,null),this.setTextureMemUse(h*g*4),o.bindFramebuffer(this.framebuffer),o.framebufferTexture2D(o.COLOR_ATTACHMENT0,l,0),o.bindFramebuffer(null),{width:h,height:g}}free(){super.free(),this.glw.deleteFramebuffer(this.framebuffer),this.framebuffer=null}}const _5=24;class kg extends hT{constructor(o){super(o);P(this,"glw");P(this,"system");P(this,"quadBuffer");P(this,"fQuadBuffer");P(this,"uiQuadBuffer");P(this,"renderOps",[]);P(this,"curBufferIdx",0);P(this,"curRenderOp",null);P(this,"rttNodes",[]);P(this,"activeRttNode",null);P(this,"defShaderCtrl");P(this,"defaultShader");P(this,"quadBufferCollection");P(this,"clearColor",{raw:0,normalized:[0,0,0,0]});P(this,"quadBufferUsage",0);P(this,"numQuadsRendered",0);P(this,"renderToTextureActive",!1);this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:l,clearColor:h,bufferMemory:g}=o,x=I_(l,o.forceWebGL2,o.contextSpy),w=this.glw=new M5(x);w.viewport(0,0,l.width,l.height),this.updateClearColor(h),w.setBlend(!0),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),k5(w,g),this.system={parameters:T5(this.glw),extensions:b5(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const s=w.createBuffer();ut(s);const m=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new mT([{buffer:s,attributes:{a_position:{name:"a_position",size:2,type:w.FLOAT,normalized:!1,stride:m,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:w.FLOAT,normalized:!1,stride:m,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:w.UNSIGNED_BYTE,normalized:!0,stride:m,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:w.FLOAT,normalized:!1,stride:m,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:o}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,o.setScissorTest(!1),o.clear()}getShaderManager(){return this.shManager}createCtxTexture(o){return o instanceof Ku?new A5(this.glw,this.txMemManager,o):o instanceof id?new pC(this.glw,this.txMemManager,o):new rd(this.glw,this.txMemManager,o)}addQuad(o){const{fQuadBuffer:l,uiQuadBuffer:h}=this;let g=o.texture;if(ut(g!==null,"Texture is required"),o.shaderProps!==null){if(nd(o.shaderProps,"$dimensions")==!0){const F=o.shaderProps.$dimensions;F.width=o.width,F.height=o.height}nd(o.shaderProps,"$alpha")===!0&&(o.shaderProps.$alpha=o.alpha)}let{curBufferIdx:x,curRenderOp:w}=this;const s={width:-1,height:-1};s.width=o.width,s.height=o.height;const m=o.shader||this.defaultShader;ut(m.getUniformLocation!==void 0,"Invalid WebGL shader"),this.reuseRenderOp(o)===!1&&(this.newRenderOp(m,o.shaderProps,o.alpha,s,o.clippingRect,x,o.rtt,o.parentHasRenderTexture,o.framebufferDimensions),w=this.curRenderOp,ut(w));let C=0,y=0,v=1,M=1;if(g.type===Un.subTexture){const{x:F,y:z,width:B,height:G}=g.props,{width:X=0,height:Q=0}=g.parentTexture.dimensions||{width:0,height:0};C=F/X,v=C+B/X,y=z/Q,M=y+G/Q,g=g.parentTexture}if(g.type===Un.image&&o.textureOptions!==null&&o.textureOptions.resizeMode!==void 0&&g.dimensions!==null){const F=o.textureOptions.resizeMode,{width:z,height:B}=g.dimensions;if(F.type==="cover"){const G=o.width/z,X=o.height/B,Q=Math.max(G,X),W=1/Q;if(Q&&G&&G<Q){const te=W*o.width;C=(1-te/z)*(F.clipX??.5),v=C+te/z}if(Q&&X&&X<Q){const te=W*o.height;y=(1-te/B)*(F.clipY??.5),M=y+te/B}}}let b=0;o.textureOptions!==null&&(o.textureOptions.flipX===!0&&([C,v]=[v,C]),b=+(o.textureOptions.flipY||!1)),b^+(g.type===Un.renderToTexture)&&([y,M]=[M,y]);const _=g.ctxTexture;ut(_ instanceof rd);const U=this.addTexture(_,x);if(ut(this.curRenderOp!==null),o.renderCoords)l[x++]=o.renderCoords.x1,l[x++]=o.renderCoords.y1,l[x++]=C,l[x++]=y,h[x++]=o.colorTl,l[x++]=U,l[x++]=o.renderCoords.x2,l[x++]=o.renderCoords.y2,l[x++]=v,l[x++]=y,h[x++]=o.colorTr,l[x++]=U,l[x++]=o.renderCoords.x4,l[x++]=o.renderCoords.y4,l[x++]=C,l[x++]=M,h[x++]=o.colorBl,l[x++]=U,l[x++]=o.renderCoords.x3,l[x++]=o.renderCoords.y3,l[x++]=v,l[x++]=M,h[x++]=o.colorBr,l[x++]=U;else if(o.tb!==0||o.tc!==0)l[x++]=o.tx,l[x++]=o.ty,l[x++]=C,l[x++]=y,h[x++]=o.colorTl,l[x++]=U,l[x++]=o.tx+o.width*o.ta,l[x++]=o.ty+o.width*o.tc,l[x++]=v,l[x++]=y,h[x++]=o.colorTr,l[x++]=U,l[x++]=o.tx+o.height*o.tb,l[x++]=o.ty+o.height*o.td,l[x++]=C,l[x++]=M,h[x++]=o.colorBl,l[x++]=U,l[x++]=o.tx+o.width*o.ta+o.height*o.tb,l[x++]=o.ty+o.width*o.tc+o.height*o.td,l[x++]=v,l[x++]=M,h[x++]=o.colorBr,l[x++]=U;else{const F=o.tx+o.width*o.ta,z=o.ty+o.height*o.td;l[x++]=o.tx,l[x++]=o.ty,l[x++]=C,l[x++]=y,h[x++]=o.colorTl,l[x++]=U,l[x++]=F,l[x++]=o.ty,l[x++]=v,l[x++]=y,h[x++]=o.colorTr,l[x++]=U,l[x++]=o.tx,l[x++]=z,l[x++]=C,l[x++]=M,h[x++]=o.colorBl,l[x++]=U,l[x++]=F,l[x++]=z,l[x++]=v,l[x++]=M,h[x++]=o.colorBr,l[x++]=U}this.curRenderOp.length+=_5,this.curRenderOp.numQuads++,this.curBufferIdx=x}newRenderOp(o,l,h,g,x,w,s,m,C){const y=new pT(this.glw,this.options,this.quadBufferCollection,o,l,h,x,g,w,0,s,m,C);this.curRenderOp=y,this.renderOps.push(y)}addTexture(o,l,h){const{curRenderOp:g}=this;ut(g);const x=g.addTexture(o);if(x===4294967295){if(h)throw new Error("Unable to add texture to render op");return this.newRenderOp(g.shader,g.shaderProps,g.alpha,g.dimensions,g.clippingRect,l),this.addTexture(o,l,!0)}return x}reuseRenderOp(o){var m;const{shader:l,shaderProps:h,parentHasRenderTexture:g,rtt:x,clippingRect:w}=o,s=l||this.defaultShader;return!(((m=this.curRenderOp)==null?void 0:m.shader)!==s||O_(this.curRenderOp.clippingRect,w)===!1||g!==void 0||x!==void 0||this.curRenderOp.shader!==this.defaultShader&&(h===null||this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,h)===!1))}addRenderOp(o){this.renderOps.push(o),this.curRenderOp=null}render(o="screen"){const{glw:l,quadBuffer:h}=this,g=new Float32Array(h,0,this.curBufferIdx),x=this.quadBufferCollection.getBuffer("a_position")||null;l.arrayBufferData(x,g,l.STATIC_DRAW);for(let s=0,m=this.renderOps.length;s<m;s++)this.renderOps[s].draw();this.quadBufferUsage=this.curBufferIdx*g.BYTES_PER_ELEMENT;const w=4*(6*g.BYTES_PER_ELEMENT);this.numQuadsRendered=this.quadBufferUsage/w}getQuadCount(){return this.numQuadsRendered}renderToTexture(o){for(let l=0;l<this.rttNodes.length;l++)if(this.rttNodes[l]===o)return;this.insertRTTNodeInOrder(o)}insertRTTNodeInOrder(o){let l=this.rttNodes.length,h=o;for(;h&&h.parent;){const x=this.rttNodes.indexOf(h.parent);if(x!==-1){l=x;break}h=h.parent}const g=this.findMaxChildRTTIndex(o);g!==-1&&(l=Math.max(l,g+1)),this.rttNodes.splice(l,0,o)}findMaxChildRTTIndex(o){let l=-1;const h=g=>{const x=this.rttNodes.indexOf(g);x!==-1&&(l=Math.max(l,x));for(const w of g.children)h(w)};return h(o),l}renderRTTNodes(){const{glw:o}=this,{txManager:l}=this.stage;for(let g=0;g<this.rttNodes.length;g++){const x=this.rttNodes[g];if(x===void 0||x.hasRTTupdates===!1||x.worldAlpha===0||x.strictBounds===!0&&x.renderState===xo.OutOfBounds||x.texture===null||x.texture.state!=="loaded")continue;this.activeRttNode=x,ut(x.texture,"RTT node missing texture");const w=x.texture.ctxTexture;ut(w instanceof pC),this.renderToTextureActive=!0,o.bindFramebuffer(w.framebuffer),o.viewport(0,0,w.w,w.h),o.clearColor(0,0,0,0),o.clear();for(let s=0;s<x.children.length;s++){const m=x.children[s];m!==void 0&&(this.stage.addQuads(m),m.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,x.hasRTTupdates=!1}const h=this.clearColor.normalized;o.clearColor(h[0],h[1],h[2],h[3]),o.bindFramebuffer(null),o.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(o){const l=this.rttNodes.indexOf(o);l!==-1&&this.rttNodes.splice(l,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}updateClearColor(o){if(this.clearColor.raw===o)return;const l=this.glw,h=Zu(o);l.clearColor(h[0],h[1],h[2],h[3]),this.clearColor={raw:o,normalized:h},l.clear()}}const R5={LINE_FEED:10};class L5{}class D5 extends L5{constructor(o,l){super();P(this,"data");P(this,"glyphMap");P(this,"kernings");this.data=o,this.glyphMap=l;const h=this.kernings={};o.kernings.forEach(g=>{const x=g.second,w=h[x]=h[x]||{};w[g.first]=g.amount}),this.kernings=h}*shapeText(o,l){var x;let h,g;for(;(h=l.peek())&&!h.done;){const w=h.value,s=this.glyphMap.get(w);if(l.next(),s!==void 0){const m=g!==void 0?(((x=this.kernings[s.id])==null?void 0:x[g])||0)+o.letterSpacing:0;g=s.id,yield{mapped:!0,glyphId:s.id,codepoint:w,cluster:l.lastIndex,xAdvance:s.xadvance+m,yAdvance:0,xOffset:s.xoffset+m,yOffset:s.yoffset,xBearing:0,yBearing:0,width:s.width,height:s.height}}else w===R5.LINE_FEED&&(g=void 0),yield{mapped:!1,codepoint:w,cluster:l.lastIndex}}}}class hg extends dT{constructor(o,l){super(l);P(this,"type");P(this,"texture");P(this,"maxCharHeight",0);P(this,"shaper");P(this,"glyphMap",new Map);P(this,"data");const{atlasUrl:h,atlasDataUrl:g,stage:x}=l;this.type=o;const w=x.renderer;ut(w instanceof kg,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=x.txManager.createTexture("ImageTexture",{src:h,premultiplyAlpha:!1}),x.txManager.loadTexture(this.texture,!0),this.texture.preventCleanup=!0,this.texture.on("loaded",()=>{this.checkLoaded(),x.requestRender()}),rT(g).then(s=>{var C;this.data=JSON.parse(s),ut(this.data);let m=0;if(this.data.chars.forEach(y=>{this.glyphMap.set(y.id,y);const v=y.yoffset+y.height;v>m&&(m=v)}),this.maxCharHeight=m,this.shaper=new D5(this.data,this.glyphMap),!this.metrics)if((C=this.data)!=null&&C.lightningMetrics){const{ascender:y,descender:v,lineGap:M,unitsPerEm:b}=this.data.lightningMetrics;this.metrics={ascender:y/b,descender:v/b,lineGap:M/b}}else throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);this.checkLoaded()}).catch(console.error)}getAtlasEntry(o){const l=this.glyphMap.get(o);if(l===void 0)throw new Error(`Glyph ${o} not found in font ${this.fontFamily}`);return{x:l.x,y:l.y,width:l.width,height:l.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}const P5=24;function O5(f,i,o,l,h,g,x,w,s){const m=Math.min(Math.max(x.firstLineIdx,0),w.length),C=0,{metrics:y}=o;ut(y,"Font metrics not loaded"),ut(o.data,"Font data not loaded");const v=(y.ascender-y.descender)*f;let M=0;l==="middle"?M=(i-v)/2:l==="bottom"&&(M=i-v);const b=h/g,_=o.data.common.base,F=y.ascender*f-_,z=b+F+m*i+M;if(!(s&&z>=s/g))return{sdfX:C,sdfY:z,lineIndex:m}}class Uu{constructor(i,o=0){P(this,"iterator");P(this,"peekBuffer",[]);P(this,"_lastIndex");this.iterator=i,this.iterator=i,this._lastIndex=o-1,this.peekBuffer=[]}next(){const i=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return i.done?this._lastIndex=-1:this._lastIndex++,i}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const i=this.iterator.next();return this.peekBuffer.push(i),i}get lastIndex(){return this._lastIndex}}function*Bu(f,i=0){let o=i;for(;o<f.length;){const l=f.codePointAt(o);if(l===void 0)throw new Error("Invalid Unicode code point");yield l,o+=l<=65535?1:2}}function N5(f,i,o){const l=o.shapeText(i,new Uu(Bu(f,0),0));let h=0;for(const g of l)g.mapped&&g.codepoint!==8203&&(h+=g.xAdvance);return h}function U5(f,i,o,l,h,g,x,w,s,m,C,y,v,M,b,_,U,F,z){ut(b,"Font face must be loaded"),ut(b.loaded,"Font face must be loaded"),ut(b.data,"Font face must be loaded"),ut(b.shaper,"Font face must be loaded");const B=w/b.data.info.size,G=s/B,X=g/B,Q=m/B,W=v[f],te=(W==null?void 0:W.codepointIndex)||0,de=(W==null?void 0:W.maxX)||0,I=(W==null?void 0:W.maxY)||0;let q=de,ee=I,ae=i,ne=o,Y=0;const Z={codepointIndex:-1,bufferOffset:-1,xStart:-1},j=b.shaper,fe={letterSpacing:Q};l.endsWith(" ")&&(l+=" ");let he=j.shapeText(fe,new Uu(Bu(l,te),te)),we,ge=-1;const be=[],Ie=x/B,V=N5(F,fe,j);let De=!0;for(;De;){const Se=(z===0||f+1<z)&&(y!=="both"||U||ne+G+b.maxCharHeight<=Ie),me=Se?X:X-V;let Re=0;const Ne=ne+b.maxCharHeight>=M.y1,$e=ne<=M.y2,Pe=Ne&&$e;for(;(we=he.next())&&!we.done;){const ve=we.value;if(f===v.length)v.push({codepointIndex:ve.cluster,maxY:ee,maxX:q});else if(f>v.length)throw new Error("Unexpected lineCache length");if(ve.codepoint===32||ve.codepoint===10||ve.codepoint===8203?Z.codepointIndex!==-1&&(Z.codepointIndex=-1,Re=ae):Z.codepointIndex===-1&&(Z.codepointIndex=ve.cluster,Z.bufferOffset=Y,Z.xStart=Re),ve.mapped){const Ye=ae+ve.xOffset+ve.width;if(y!=="none"&&Ye>=me&&Z.codepointIndex!==-1&&Z.xStart>0)if(Se){he=j.shapeText(fe,new Uu(Bu(l,Z.codepointIndex),Z.codepointIndex)),Y=Z.bufferOffset;break}else he=j.shapeText(fe,new Uu(Bu(F,0),0)),ae=Z.xStart,Y=Z.bufferOffset,y="none";else{const it=ae+ve.xOffset,Ke=ne+ve.yOffset;if(Pe){ge===-1&&(ge=Y);const lt=b.getAtlasEntry(ve.glyphId),St=lt.x/b.data.common.scaleW,ft=lt.y/b.data.common.scaleH,Tt=lt.width/b.data.common.scaleW,je=lt.height/b.data.common.scaleH;C[Y++]=it,C[Y++]=Ke,C[Y++]=St,C[Y++]=ft,C[Y++]=it+ve.width,C[Y++]=Ke,C[Y++]=St+Tt,C[Y++]=ft,C[Y++]=it,C[Y++]=Ke+ve.height,C[Y++]=St,C[Y++]=ft+je,C[Y++]=it+ve.width,C[Y++]=Ke+ve.height,C[Y++]=St+Tt,C[Y++]=ft+je}ee=Math.max(ee,Ke+ve.height),q=Math.max(q,it+ve.width),ae+=ve.xAdvance}}else if(ve.codepoint===10){if(Se)break;he=j.shapeText(fe,new Uu(Bu(F,0),0)),y="none"}}ge!==-1&&(be.push({bufferStart:ge,bufferEnd:Y}),ge=-1),ae=0,ne+=G,f++,Z.codepointIndex=-1,Re=0,!_&&y==="both"&&ne>M.y2||we&&we.done?De=!1:Se||(De=!1)}if(h==="center"){const Se=y==="none"?q:X;for(let me=0;me<be.length;me++){const Re=be[me],Ne=C[Re.bufferEnd-4]-C[Re.bufferStart],$e=(Se-Ne)/2;for(let Pe=Re.bufferStart;Pe<Re.bufferEnd;Pe+=4)C[Pe]+=$e}}else if(h==="right"){const Se=y==="none"?q:X;for(let me=0;me<be.length;me++){const Re=be[me],Ne=Re.bufferEnd===Re.bufferStart?0:C[Re.bufferEnd-4]-C[Re.bufferStart],$e=Se-Ne;for(let Pe=Re.bufferStart;Pe<Re.bufferEnd;Pe+=4)C[Pe]+=$e}}return ut(we),{bufferNumFloats:Y,bufferNumQuads:Y/16,layoutNumCharacters:we.done?l.length-te:we.value.cluster-te+1,fullyProcessed:!!we.done,maxX:q,maxY:ee,numLines:v.length}}function B5(f,i){return Math.ceil(f/i)*i}function j5(f,i){return Math.floor(f/i)*i}function F5(f,i,o,l,h,g,x,w){const{screen:s,sdf:m}=f;if(!U_(x))s.x1=0,s.y1=0,s.x2=0,s.y2=0,m.x1=0,m.y1=0,m.x2=0,m.y2=0,f.numLines=0,f.firstLineIdx=0;else{const C=x.x1-i,y=C+(x.x2-x.x1),v=x.y1-o+l,M=j5(v-g,h||1),b=B5(v+(x.y2-x.y1)+g,h||1);s.x1=C,s.y1=M,s.x2=y,s.y2=b,m.x1=C/w,m.y1=M/w,m.x2=y/w,m.y2=b/w,f.numLines=Math.ceil((b-M)/h),f.firstLineIdx=h?Math.floor(M/h):0}f.valid=!0}function gT(f,i){return i*(f.ascender-f.descender+f.lineGap)}const $5={x:0,y:0,width:0,height:0};class z5 extends bg{constructor(o){super(o);P(this,"ssdfFontFamilies",{});P(this,"msdfFontFamilies",{});P(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);P(this,"sdfShader");P(this,"rendererBounds");P(this,"type","sdf");this.sdfShader=this.stage.shManager.loadShader("SdfShader",{transform:new Float32Array,color:0,size:0,scrollY:0,distanceRange:0,debug:!1}).shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(o,l)=>{o.props.fontFamily=l,this.releaseFontFace(o),this.invalidateLayoutCache(o)},fontWeight:(o,l)=>{o.props.fontWeight=l,this.releaseFontFace(o),this.invalidateLayoutCache(o)},fontStyle:(o,l)=>{o.props.fontStyle=l,this.releaseFontFace(o),this.invalidateLayoutCache(o)},fontStretch:(o,l)=>{o.props.fontStretch=l,this.releaseFontFace(o),this.invalidateLayoutCache(o)},fontSize:(o,l)=>{o.props.fontSize=l,this.invalidateLayoutCache(o)},text:(o,l)=>{o.props.text=l,this.invalidateLayoutCache(o)},textAlign:(o,l)=>{o.props.textAlign=l,this.invalidateLayoutCache(o)},color:(o,l)=>{o.props.color=l},x:(o,l)=>{o.props.x=l,o.elementBounds.valid&&(this.setElementBoundsX(o),!o.renderWindow.valid&&N0(o.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(o))},y:(o,l)=>{o.props.y=l,o.elementBounds.valid&&(this.setElementBoundsY(o),!o.renderWindow.valid&&N0(o.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(o))},contain:(o,l)=>{o.props.contain=l,this.invalidateLayoutCache(o)},width:(o,l)=>{o.props.width=l,o.props.contain!=="none"&&this.invalidateLayoutCache(o)},height:(o,l)=>{o.props.height=l,o.props.contain==="both"&&this.invalidateLayoutCache(o)},offsetY:(o,l)=>{o.props.offsetY=l,this.invalidateLayoutCache(o)},scrollable:(o,l)=>{o.props.scrollable=l,this.invalidateLayoutCache(o)},scrollY:(o,l)=>{o.props.scrollY=l,this.scheduleUpdateState(o)},letterSpacing:(o,l)=>{o.props.letterSpacing=l,this.invalidateLayoutCache(o)},lineHeight:(o,l)=>{o.props.lineHeight=l,o.resLineHeight=void 0,this.invalidateLayoutCache(o)},maxLines:(o,l)=>{o.props.maxLines=l,this.invalidateLayoutCache(o)},textBaseline:(o,l)=>{o.props.textBaseline=l,this.invalidateLayoutCache(o)},verticalAlign:(o,l)=>{o.props.verticalAlign=l,this.invalidateLayoutCache(o)},overflowSuffix:(o,l)=>{o.props.overflowSuffix=l,this.invalidateLayoutCache(o)},debug:(o,l)=>{o.props.debug=l}}}canRenderFont(o){const{fontFamily:l}=o;return l in this.ssdfFontFamilies||l in this.msdfFontFamilies||l==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(o){return o instanceof hg}addFontFace(o){ut(o instanceof hg);const l=o.fontFamily,h=o.type==="ssdf"?this.ssdfFontFamilies:o.type==="msdf"?this.msdfFontFamilies:void 0;if(!h){console.warn(`Invalid font face type: ${o.type}`);return}let g=h[l];g||(g=new Set,h[l]=g),g.add(o)}createState(o){return{props:o,status:"initialState",updateScheduled:!1,emitter:new Lr,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(o){let{trFontFace:l}=o;const{textH:h,lineCache:g,debugData:x,forceFullLayoutCalc:w}=o;if(x.updateCount++,o.status==="initialState"&&this.setStatus(o,"loading"),l===void 0){if(l=this.resolveFontFace(o.props),o.trFontFace=l,l===void 0){const j=`SdfTextRenderer: Could not resolve font face for family: '${o.props.fontFamily}'`;console.error(j),this.setStatus(o,"failed",new Error(j));return}l.texture.setRenderableOwner(o,!0)}if(l.loaded===!1){l.once("loaded",()=>{this.scheduleUpdateState(o)});return}ut(l.data,"Font face data should be loaded"),ut(l.metrics,"Font face metrics should be loaded");const{text:s,fontSize:m,x:C,y,contain:v,width:M,height:b,verticalAlign:_,scrollable:U,overflowSuffix:F,maxLines:z}=o.props,B=v==="both"&&U?o.props.scrollY:0,{renderWindow:G}=o,X=l.data.info.size,Q=m/X;let W=o.resLineHeight;if(W===void 0){const j=o.props.lineHeight;j===void 0?W=gT(l.metrics,m):W=j,o.resLineHeight=W}const te=W/Q;o.distanceRange=Q*l.data.distanceField.distanceRange;const de=s.length*P5;let I=o.vertexBuffer;(!I||I.length<de)&&(I=new Float32Array(de*2));const q=o.elementBounds;if(q.valid||(this.setElementBoundsX(o),this.setElementBoundsY(o),q.valid=!0),!w&&G.valid){const j=G.screen;if(C+j.x1<=q.x1&&C+j.x2>=q.x2&&y-B+j.y1<=q.y1&&y-B+j.y2>=q.y2){this.setStatus(o,"loaded");return}G.valid=!1,this.setStatus(o,"loading")}const{offsetY:ee,textAlign:ae}=o.props;if(!G.valid){if(!N0(q,this.rendererBounds))return;F5(G,C,y,B,W,v==="both"?q.y2-q.y1:0,q,Q)}const ne=O5(X,te,l,_,ee,Q,G,g,h);if(!ne){this.setStatus(o,"loaded");return}const{letterSpacing:Y}=o.props,Z=U5(ne.lineIndex,ne.sdfX,ne.sdfY,s,ae,M,b,m,W,Y,I,v,g,G.sdf,l,w,U,F,z);o.bufferUploaded=!1,o.bufferNumFloats=Z.bufferNumFloats,o.bufferNumQuads=Z.bufferNumQuads,o.vertexBuffer=I,o.renderWindow=G,x.lastLayoutNumCharacters=Z.layoutNumCharacters,x.bufferSize=I.byteLength,Z.fullyProcessed&&(o.textW=Z.maxX*Q,o.textH=Z.numLines*te*Q),this.setStatus(o,"loaded")}renderQuads(o,l,h,g,x,w){var q,ee;if(!o.vertexBuffer)return;const s=this.stage.renderer;ut(s instanceof kg);const{fontSize:m,color:C,contain:y,scrollable:v,zIndex:M,debug:b}=o.props,_=y==="both"&&v?o.props.scrollY:0,{textW:U=0,textH:F=0,distanceRange:z,vertexBuffer:B,bufferUploaded:G,trFontFace:X,elementBounds:Q}=o;let{webGlBuffers:W}=o;if(!W){const ae=s.glw,ne=4*Float32Array.BYTES_PER_ELEMENT,Y=ae.createBuffer();ut(Y),o.webGlBuffers=new mT([{buffer:Y,attributes:{a_position:{name:"a_position",size:2,type:ae.FLOAT,normalized:!1,stride:ne,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:ae.FLOAT,normalized:!1,stride:ne,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),o.bufferUploaded=!1,ut(o.webGlBuffers),W=o.webGlBuffers}if(!G){const ae=s.glw,ne=(W==null?void 0:W.getBuffer("a_textureCoordinate"))??null;ae.arrayBufferData(ne,B,ae.STATIC_DRAW),o.bufferUploaded=!0}if(ut(X),v&&y==="both"){ut(Q.valid);const ae=P_(Q,$5);h.valid?(o.clippingRect.valid=!0,h=nT(h,ae,o.clippingRect)):(o.clippingRect.valid=!0,h=oT(ae,o.clippingRect))}const te=new pT(s.glw,s.options,W,this.sdfShader,{transform:l.getFloatArr(),color:M_(C,g),size:m/(((q=X.data)==null?void 0:q.info.size)||0),scrollY:_,distanceRange:z,debug:b.sdfShaderDebug},g,h,{height:F,width:U},0,M,!1,x,w),de=(ee=o.trFontFace)==null?void 0:ee.texture;ut(de);const I=de.ctxTexture;te.addTexture(I),te.length=o.bufferNumFloats,te.numQuads=o.bufferNumQuads,s.addRenderOp(te)}setIsRenderable(o,l){var h;super.setIsRenderable(o,l),(h=o.trFontFace)==null||h.texture.setRenderableOwner(o,l)}destroyState(o){var l;super.destroyState(o),(l=o.trFontFace)==null||l.texture.setRenderableOwner(o,!1)}resolveFontFace(o){return this.stage.fontManager.resolveFontFace(this.fontFamilyArray,o,"sdf")}releaseFontFace(o){o.resLineHeight=void 0,o.trFontFace&&(o.trFontFace.texture.setRenderableOwner(o,!1),o.trFontFace=void 0)}invalidateLayoutCache(o){o.renderWindow.valid=!1,o.elementBounds.valid=!1,o.textH=void 0,o.textW=void 0,o.lineCache=[],this.setStatus(o,"loading"),this.scheduleUpdateState(o)}setElementBoundsX(o){const{x:l,contain:h,width:g}=o.props,{elementBounds:x}=o;x.x1=l,x.x2=h!=="none"?l+g:1/0}setElementBoundsY(o){const{y:l,contain:h,height:g}=o.props,{elementBounds:x}=o;x.y1=l,x.y2=h==="both"?l+g:1/0}}function mC(f){return f===""||f==="​"}function V5(f,i,o){if(i.metrics)return i.metrics;const l=f.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${i.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let h;return l.actualBoundingBoxDescent&&l.actualBoundingBoxAscent?h={ascender:l.actualBoundingBoxAscent/o,descender:-l.actualBoundingBoxDescent/o,lineGap:.2}:h={ascender:.8,descender:-.2,lineGap:.2},i.metrics=h,h}const gC=2048;function yC(f,i,o,l,h){const g=f!=="bottom"?.5*i:0;return o*(l-1)+g+Math.max(o,i)+(h||0)}class H5{constructor(i,o){P(this,"_canvas");P(this,"_context");P(this,"_settings");this._canvas=i,this._context=o,this._settings=this.mergeDefaults({})}set settings(i){this._settings=this.mergeDefaults(i)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const i=[this._settings.fontFamily],o=[];for(let l=0,h=i.length;l<h;l++)i[l]==="serif"||i[l]==="sans-serif"?o.push(i[l]):o.push(`"${i[l]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${o.join(",")}`}_load(){if(document.fonts){const i=this._getFontSetting();try{if(!document.fonts.check(i,this._settings.text))return document.fonts.load(i,this._settings.text).catch(o=>{console.warn("[Lightning] Font load error",o,i)}).then(()=>{document.fonts.check(i,this._settings.text)||console.warn("[Lightning] Font not found",i)})}catch{console.warn("[Lightning] Can't check font loading for "+i)}}}calculateRenderInfo(){const i={},o=this.getPrecision(),l=this._settings.paddingLeft*o,h=this._settings.paddingRight*o,g=this._settings.fontSize*o;let x=this._settings.offsetY===null?null:this._settings.offsetY*o;const w=this._settings.w*o,s=this._settings.h*o;let m=this._settings.wordWrapWidth*o;const C=this._settings.cutSx*o,y=this._settings.cutEx*o,v=this._settings.cutSy*o,M=this._settings.cutEy*o,b=(this._settings.letterSpacing||0)*o,_=this._settings.textIndent*o,U=this._settings.trFontFace;this.setFontProperties(),ut(U);const F=V5(this._context,U,g),z=gT(F,g)*o,B=this._settings.lineHeight!==null?this._settings.lineHeight*o:z,G=this._settings.maxHeight,X=G!==null&&B>0?Math.floor(G/B):0,Q=this._settings.maxLines,W=X>0&&Q>0?Math.min(X,Q):Math.max(X,Q);let te=w||2048/this.getPrecision(),de=te-l;if(de<10&&(te+=10-de,de=10),m||(m=de),this._settings.textOverflow&&!this._settings.wordWrap){let Y;switch(this._settings.textOverflow){case"clip":Y="";break;case"ellipsis":Y=this._settings.overflowSuffix;break;default:Y=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,m-_,Y)}let I;if(this._settings.wordWrap)I=this.wrapText(this._settings.text,m,b,_);else{I={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const Y=I.l.length;for(let Z=0;Z<Y-1;Z++)I.n.push(Z)}let q=I.l;if(W&&q.length>W){const Y=q.slice(0,W);let Z=null;if(this._settings.overflowSuffix){const ge=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,be=this.wrapText(Y[Y.length-1],m-ge,b,_);Y[Y.length-1]=`${be.l[0]}${this._settings.overflowSuffix}`,Z=[be.l.length>1?be.l[1]:""]}else Z=[""];let j;const fe=q.length;let he=0;const we=I.n.length;for(j=W;j<fe;j++)Z[he]+=`${Z[he]?" ":""}${q[j]}`,j+1<we&&I.n[j+1]&&he++;i.remainingText=Z.join(`
`),i.moreTextLines=!0,q=Y}else i.moreTextLines=!1,i.remainingText="";let ee=0;const ae=[];for(let Y=0;Y<q.length;Y++){const Z=this.measureText(q[Y],b)+(Y===0?_:0);ae.push(Z),ee=Math.max(ee,Z)}i.lineWidths=ae,w||(te=ee+l+h,de=ee),this._settings.wordWrap&&w>ee&&this._settings.textAlign==="left"&&q.length===1&&(te=ee+l+h);let ne;return s?ne=s:ne=yC(this._settings.textBaseline,g,B,q.length,x),x===null&&(x=g),i.w=te,i.h=ne,i.lines=q,i.precision=o,te||(te=1),ne||(ne=1),(C||y)&&(te=Math.min(te,y-C)),(v||M)&&(ne=Math.min(ne,M-v)),i.width=te,i.innerWidth=de,i.height=ne,i.fontSize=g,i.cutSx=C,i.cutSy=v,i.cutEx=y,i.cutEy=M,i.lineHeight=B,i.defLineHeight=z,i.lineWidths=ae,i.offsetY=x,i.paddingLeft=l,i.paddingRight=h,i.letterSpacing=b,i.textIndent=_,i.metrics=F,i}draw(i,o){const l=this.getPrecision(),h=(o==null?void 0:o.lines)||i.lines,g=(o==null?void 0:o.lineWidths)||i.lineWidths,x=o?yC(this._settings.textBaseline,i.fontSize,i.lineHeight,o.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*l):i.height;this._canvas.width=Math.min(Math.ceil(i.width+this._settings.textRenderIssueMargin),gC),this._canvas.height=Math.min(Math.ceil(x),gC),this.setFontProperties(),i.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(i.cutSx||i.cutSy)&&this._context.translate(-i.cutSx,-i.cutSy);let w,s;const m=[],{metrics:C}=i,y=C?C.ascender*i.fontSize:i.fontSize,v=(C.ascender-C.descender)*i.fontSize;for(let b=0,_=h.length;b<_;b++)w=b===0?i.textIndent:0,s=b*i.lineHeight+y,this._settings.verticalAlign=="middle"?s+=(i.lineHeight-v)/2:this._settings.verticalAlign=="bottom"&&(s+=i.lineHeight-v),this._settings.textAlign==="right"?w+=i.innerWidth-g[b]:this._settings.textAlign==="center"&&(w+=(i.innerWidth-g[b])/2),w+=i.paddingLeft,m.push({text:h[b],x:w,y:s,w:g[b]});if(this._settings.highlight){const b=this._settings.highlightColor,_=this._settings.highlightHeight*l||i.fontSize*1.5,U=this._settings.highlightOffset*l,F=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*l:i.paddingLeft,z=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*l:i.paddingRight;this._context.fillStyle=O0(b);for(let B=0;B<m.length;B++){const G=m[B];this._context.fillRect(G.x-F,G.y-i.offsetY+U,G.w+z+F,_)}}let M=null;this._settings.shadow&&(M=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=O0(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*l,this._context.shadowOffsetY=this._settings.shadowOffsetY*l,this._context.shadowBlur=this._settings.shadowBlur*l),this._context.fillStyle=O0(this._settings.textColor);for(let b=0,_=m.length;b<_;b++){const U=m[b];if(i.letterSpacing===0)this._context.fillText(U.text,U.x,U.y);else{const F=U.text.split("");let z=U.x;for(let B=0,G=F.length;B<G;B++)this._context.fillText(F[B],z,U.y),z+=this.measureText(F[B],i.letterSpacing)}}M&&(this._context.shadowColor=M[0],this._context.shadowOffsetX=M[1],this._context.shadowOffsetY=M[2],this._context.shadowBlur=M[3]),(i.cutSx||i.cutSy)&&this._context.translate(i.cutSx,i.cutSy)}wrapWord(i,o,l){const h=this._context.measureText(l).width,g=i.length,x=this._context.measureText(i).width;if(x<=o)return i;let w=Math.floor(o*g/x),s=this._context.measureText(i.substring(0,w)).width+h;if(s>o)for(;w>0&&(s=this._context.measureText(i.substring(0,w)).width+h,s>o);)w-=1;else for(;w<g;)if(s=this._context.measureText(i.substring(0,w)).width+h,s<o)w+=1;else{w-=1;break}return i.substring(0,w)+(o>=h?l:"")}wrapText(i,o,l,h=0){const g=/ |\u200B/g,x=i.split(/\r?\n/g);let w=[];const s=[];for(let m=0;m<x.length;m++){const C=[];let y="",v=o-h;const M=x[m].split(g),b=x[m].match(g)||[];for(let _=0;_<M.length;_++){const U=b[_-1]||"",F=M[_],z=this.measureText(F,l),B=mC(U)?z:z+this.measureText(U,l);_===0||B>v?(_>0&&(C.push(y),y=""),y+=F,v=o-z-(_===0?h:0)):(v-=B,y+=U+F)}C.push(y),y="",w=w.concat(C),m<x.length-1&&s.push(w.length)}return{l:w,n:s}}measureText(i,o=0){return o?i.split("").reduce((l,h)=>mC(h)?l:l+this._context.measureText(h).width+o,0):this._context.measureText(i).width}mergeDefaults(i){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...i}}}const vC=typeof self>"u"?globalThis:self;var qC;const xC=((qC=vC.document)==null?void 0:qC.fonts)||vC.fonts;function G5(f){const{fontFamily:i,fontStyle:o,fontWeight:l,fontStretch:h,fontSize:g}=f;return[o,l,h,`${g}px`,i].join(" ")}class wC extends bg{constructor(o){super(o);P(this,"canvas");P(this,"context");P(this,"fontFamilies",{});P(this,"fontFamilyArray",[this.fontFamilies]);P(this,"type","canvas");P(this,"loadFont",o=>{const l=G5(o.props),h=this.stage.fontManager.resolveFontFace(this.fontFamilyArray,o.props,"canvas");if(ut(h,`Could not resolve font face for ${l}`),o.fontInfo={fontFace:h,cssString:l,loaded:!1},!o.fontInfo.loaded){xC.load(l).then(this.onFontLoaded.bind(this,o,l)).catch(this.onFontLoadError.bind(this,o,l));return}});typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let l=this.canvas.getContext("2d",{willReadFrequently:!0});l||(this.canvas=document.createElement("canvas"),l=this.canvas.getContext("2d",{willReadFrequently:!0})),ut(l),this.context=l,this.addFontFace(new Xh({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(o,l)=>{o.props.fontFamily=l,o.fontInfo=void 0,this.invalidateLayoutCache(o)},fontWeight:(o,l)=>{o.props.fontWeight=l,o.fontInfo=void 0,this.invalidateLayoutCache(o)},fontStyle:(o,l)=>{o.props.fontStyle=l,o.fontInfo=void 0,this.invalidateLayoutCache(o)},fontStretch:(o,l)=>{o.props.fontStretch=l,o.fontInfo=void 0,this.invalidateLayoutCache(o)},fontSize:(o,l)=>{o.props.fontSize=l,o.fontInfo=void 0,this.invalidateLayoutCache(o)},text:(o,l)=>{o.props.text=l,this.invalidateLayoutCache(o)},textAlign:(o,l)=>{o.props.textAlign=l,this.invalidateLayoutCache(o)},color:(o,l)=>{o.props.color=l,this.invalidateLayoutCache(o)},x:(o,l)=>{o.props.x=l},y:(o,l)=>{o.props.y=l},contain:(o,l)=>{o.props.contain=l,this.invalidateLayoutCache(o)},width:(o,l)=>{o.props.width=l,o.props.contain!=="none"&&this.invalidateLayoutCache(o)},height:(o,l)=>{o.props.height=l,o.props.contain==="both"&&this.invalidateLayoutCache(o)},offsetY:(o,l)=>{o.props.offsetY=l,this.invalidateLayoutCache(o)},scrollY:(o,l)=>{o.props.scrollY=l},letterSpacing:(o,l)=>{o.props.letterSpacing=l,this.invalidateLayoutCache(o)},lineHeight:(o,l)=>{o.props.lineHeight=l,this.invalidateLayoutCache(o)},maxLines:(o,l)=>{o.props.maxLines=l,this.invalidateLayoutCache(o)},textBaseline:(o,l)=>{o.props.textBaseline=l,this.invalidateLayoutCache(o)},verticalAlign:(o,l)=>{o.props.verticalAlign=l,this.invalidateLayoutCache(o)},overflowSuffix:(o,l)=>{o.props.overflowSuffix=l,this.invalidateLayoutCache(o)}}}canRenderFont(o){return!0}isFontFaceSupported(o){return o instanceof Xh}addFontFace(o){ut(o instanceof Xh);const l=o.fontFamily;l!=="sans-serif"&&xC.add(o.fontFace);let h=this.fontFamilies[l];h||(h=new Set,this.fontFamilies[l]=h),h.add(o)}createState(o,l){return{node:l,props:o,status:"initialState",updateScheduled:!1,emitter:new Lr,textureNode:void 0,lightning2TextRenderer:new H5(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(o){if(o.status==="initialState"&&this.setStatus(o,"loading"),o.status!=="loaded"){if(!o.fontInfo)return this.loadFont(o);o.fontInfo.loaded&&(o.renderInfo||(o.renderInfo=this.calculateRenderInfo(o),o.textH=o.renderInfo.lineHeight*o.renderInfo.lines.length,o.textW=o.renderInfo.width,this.renderSingleCanvasPage(o)))}}renderSingleCanvasPage(o){ut(o.renderInfo);const l=o.node,h=this.stage.txManager.createTexture("ImageTexture",{premultiplyAlpha:!0,src:(function(g,x){return ut(x),g.draw(x,{lines:x.lines,lineWidths:x.lineWidths}),this.canvas.width===0||this.canvas.height===0?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}).bind(this,o.lightning2TextRenderer,o.renderInfo)});if(o.textureNode)o.textureNode.texture=h,o.textureNode.alpha=lC(o.props.color);else{const g=this.stage.createNode({parent:l,texture:h,autosize:!0,alpha:lC(o.props.color)});o.textureNode=g}this.setStatus(o,"loaded")}calculateRenderInfo(o){var l;return o.lightning2TextRenderer.settings={text:o.props.text,textAlign:o.props.textAlign,fontFamily:o.props.fontFamily,trFontFace:(l=o.fontInfo)==null?void 0:l.fontFace,fontSize:o.props.fontSize,fontStyle:[o.props.fontStretch,o.props.fontStyle,o.props.fontWeight].join(" "),textColor:Zu(o.props.color),offsetY:o.props.offsetY,wordWrap:o.props.contain!=="none",wordWrapWidth:o.props.contain==="none"?void 0:o.props.width,letterSpacing:o.props.letterSpacing,lineHeight:o.props.lineHeight??null,maxLines:o.props.maxLines,maxHeight:o.props.contain==="both"?o.props.height-o.props.offsetY:null,textBaseline:o.props.textBaseline,verticalAlign:o.props.verticalAlign,overflowSuffix:o.props.overflowSuffix,w:o.props.contain!=="none"?o.props.width:void 0},o.renderInfo=o.lightning2TextRenderer.calculateRenderInfo(),o.renderInfo}renderQuads(){}destroyState(o){o.status!=="destroyed"&&(super.destroyState(o),o.textureNode&&(o.textureNode.destroy(),delete o.textureNode),delete o.renderInfo)}invalidateLayoutCache(o){o.renderInfo=void 0,this.setStatus(o,"loading"),this.scheduleUpdateState(o)}onFontLoaded(o,l){var h;l!==((h=o.fontInfo)==null?void 0:h.cssString)||!o.fontInfo||(o.fontInfo.loaded=!0,this.scheduleUpdateState(o))}onFontLoadError(o,l,h){var g;l!==((g=o.fontInfo)==null?void 0:g.cssString)||!o.fontInfo||(o.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${o.fontInfo.cssString}'`,h),this.scheduleUpdateState(o))}}const yT={isWhite:!0,a:1,r:255,g:255,b:255};function $0(f){if(f===4294967295)return yT;const i=(f>>>24&255)/255,o=f>>>16&255&255,l=f>>>8&255&255,h=f&255&255;return{isWhite:!1,a:i,r:h,g:l,b:o}}function vT(f){if(f===4294967295)return yT;const i=f>>>24&255,o=f>>>16&255&255,l=f>>>8&255&255,h=(f&255&255)/255;return{isWhite:!1,r:i,g:o,b:l,a:h}}function ol({a:f,r:i,g:o,b:l}){return`rgba(${i},${o},${l},${f})`}class W5 extends cT{constructor(){super(...arguments);P(this,"image");P(this,"tintCache")}load(){this.textureSource.setState("loading"),this.onLoadRequest().then(o=>{this.textureSource.setState("loaded",o),this.textureSource.freeTextureData(),this.updateMemSize()}).catch(o=>{this.textureSource.setState("failed",o),this.textureSource.freeTextureData()})}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0),this.textureSource.freeTextureData()}updateMemSize(){const o=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:l,height:h}=this.textureSource.dimensions;this.setTextureMemUse(l*h*o)}}hasImage(){return this.image!==void 0}getImage(o){var x;const l=this.image;if(ut(l,"Attempt to get unloaded image texture"),o.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),l;const h=ol(o);if(((x=this.tintCache)==null?void 0:x.key)===h)return this.tintCache.image;const g=this.tintTexture(l,h);return this.tintCache={key:h,image:g},this.updateMemSize(),g}tintTexture(o,l){const{width:h,height:g}=o,x=document.createElement("canvas");x.width=h,x.height=g;const w=x.getContext("2d");return w&&(w.fillStyle=l,w.globalCompositeOperation="copy",w.fillRect(0,0,h,g),w.globalCompositeOperation="multiply",w.drawImage(o,0,0,h,g,0,0,h,g),w.globalCompositeOperation="destination-in",w.drawImage(o,0,0,h,g,0,0,h,g)),x}async onLoadRequest(){var l,h;ut((h=(l=this.textureSource)==null?void 0:l.textureData)==null?void 0:h.data,"Texture data is null");const{data:o}=this.textureSource.textureData;if(o instanceof ImageData){const g=document.createElement("canvas");g.width=o.width,g.height=o.height;const x=g.getContext("2d");return x&&x.putImageData(o,0,0),this.image=g,{width:o.width,height:o.height}}else if(typeof ImageBitmap<"u"&&o instanceof ImageBitmap||o instanceof HTMLImageElement)return this.image=o,{width:o.width,height:o.height};return{width:0,height:0}}}function X5(f){var i,o;if(f.shader instanceof yd){const l=f.shader.shType;if(l===f5)return((i=f.shaderProps)==null?void 0:i.radius)??0;if(l==="DynamicShader"){const h=(o=f.shaderProps)==null?void 0:o.effects;if(h){const g=h.find(x=>{var w;return x.type==="radius"&&((w=x==null?void 0:x.props)==null?void 0:w.radius)});return g&&g.type==="radius"&&g.props.radius||0}}}return 0}function Au(f,i=""){var o;if(f.shader instanceof yd&&f.shader.shType==="DynamicShader"){const h=(o=f.shaderProps)==null?void 0:o.effects;if(h&&h.length){const g=h.find(x=>x.type===`border${i}`&&x.props&&x.props.width);return g&&g.props}}}function SC(f,i,o,l,h){if(Object.getPrototypeOf(this).roundRect)this.roundRect(f,i,o,l,h);else{const x=s=>{const m=Math.min(o/2,l/2),C=s.topLeft+s.topRight+s.bottomRight+s.bottomLeft;if(C>o||C>l){const y=m/Math.max(s.topLeft,s.topRight,s.bottomRight,s.bottomLeft);s.topLeft*=y,s.topRight*=y,s.bottomRight*=y,s.bottomLeft*=y}},w=typeof h=="number"?{topLeft:h,topRight:h,bottomRight:h,bottomLeft:h}:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,...h};x(w),this.moveTo(f+w.topLeft,i),this.lineTo(f+o-w.topRight,i),this.ellipse(f+o-w.topRight,i+w.topRight,w.topRight,w.topRight,0,1.5*Math.PI,2*Math.PI),this.lineTo(f+o,i+l-w.bottomRight),this.ellipse(f+o-w.bottomRight,i+l-w.bottomRight,w.bottomRight,w.bottomRight,0,0,.5*Math.PI),this.lineTo(f+w.bottomLeft,i+l),this.ellipse(f+w.bottomLeft,i+l-w.bottomLeft,w.bottomLeft,w.bottomLeft,0,.5*Math.PI,Math.PI),this.lineTo(f,i+w.topLeft),this.ellipse(f+w.topLeft,i+w.topLeft,w.topLeft,w.topLeft,0,Math.PI,1.5*Math.PI)}}function Ph(f,i,o,l,h,g=0,x,w){if(!g)return;let s,m=0,C,y=0;switch(w){case"Top":s=i,m=o,C=l+i,y=o;break;case"Right":s=i+l,m=o,C=i+l,y=o+h;break;case"Bottom":s=i,m=o+h,C=i+l,y=o+h;break;case"Left":s=i,m=o,C=i,y=o+h;break}f.beginPath(),f.lineWidth=g,f.strokeStyle=ol(vT(x??0)),f.moveTo(s,m),f.lineTo(C,y),f.stroke()}class q5 extends hT{constructor(o){super(o);P(this,"context");P(this,"canvas");P(this,"pixelRatio");P(this,"clearColor");P(this,"renderToTextureActive",!1);P(this,"activeRttNode",null);P(this,"defShaderCtr");this.mode="canvas",this.shManager.renderer=this;const{canvas:l,pixelRatio:h,clearColor:g}=o;this.canvas=l,this.context=l.getContext("2d"),this.pixelRatio=h,this.clearColor=g?aC(g):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new yd("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const o=this.context;if(this.clearColor){const[l,h,g,x]=this.clearColor;o.fillStyle=`rgba(${l}, ${h}, ${g}, ${x/255})`,o.fillRect(0,0,this.canvas.width,this.canvas.height)}o.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(o){const l=this.context,{tx:h,ty:g,width:x,height:w,alpha:s,colorTl:m,colorTr:C,colorBr:y,ta:v,tb:M,tc:b,td:_,clippingRect:U}=o;let F=o.texture,z,B;const G=F==null?void 0:F.type;if(ut(G,"Texture type is not defined"),G!==Un.image&&G!==Un.color&&G!==Un.subTexture&&G!==Un.noise||F&&(F instanceof Ku&&(B=F.props,F=F.parentTexture),z=F.ctxTexture,F.state==="freed"||F.state!=="loaded"))return;const X=$0(m),Q=v!==1,W=U.width!==0&&U.height!==0,te=m!==C||m!==y,de=!!o.shader,I=de?X5(o):0,q=de?Au(o):void 0;if((Q||W||I)&&l.save(),W){const ee=new Path2D,{x:ae,y:ne,width:Y,height:Z}=U;ee.rect(ae,ne,Y,Z),l.clip(ee)}if(Q){const ee=this.pixelRatio;l.setTransform(v,b,M,_,h*ee,g*ee),l.scale(ee,ee),l.translate(-h,-g)}if(I){const ee=new Path2D;SC.call(ee,h,g,x,w,I),l.clip(ee)}if((G===Un.image||G===Un.subTexture||G===Un.noise)&&z){const ee=z.getImage(X);if(l.globalAlpha=X.a??s,B)l.drawImage(ee,B.x,B.y,B.width,B.height,h,g,x,w);else try{l.drawImage(ee,h,g,x,w)}catch{}l.globalAlpha=1}else if(G===Un.color&&te){let ee=h,ae=g,ne;m===C?(ee=h,ae=g+w,ne=$0(y)):(ee=h+x,ae=g,ne=$0(C));const Y=l.createLinearGradient(h,g,ee,ae);Y.addColorStop(0,ol(X)),Y.addColorStop(1,ol(ne)),l.fillStyle=Y,l.fillRect(h,g,x,w)}else G===Un.color&&(l.fillStyle=ol(X),l.fillRect(h,g,x,w));if(q&&q.width){const ee=q.width,ae=q.width/2,ne=ol(vT(q.color??0));l.beginPath(),l.lineWidth=ee,l.strokeStyle=ne,l.globalAlpha=s,I?(SC.call(l,h+ae,g+ae,x-ee,w-ee,I),l.stroke()):l.strokeRect(h+ae,g+ae,x-ee,w-ee),l.globalAlpha=1}else if(de){const ee=Au(o,"Top"),ae=Au(o,"Right"),ne=Au(o,"Bottom"),Y=Au(o,"Left");ee&&Ph(l,h,g,x,w,ee.width,ee.color,"Top"),ae&&Ph(l,h,g,x,w,ae.width,ae.color,"Right"),ne&&Ph(l,h,g,x,w,ne.width,ne.color,"Bottom"),Y&&Ph(l,h,g,x,w,Y.width,Y.color,"Left")}(Q||W||I)&&l.restore()}createCtxTexture(o){return new W5(this.txMemManager,o)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(o){}renderToTexture(o){}getBufferInfo(){return null}getQuadCount(){return null}updateClearColor(o){this.clearColor=o?aC(o):void 0}}const ju={alpha:f=>f===1?null:{prop:"opacity",value:`${f}`},x:f=>({prop:"left",value:`${f}px`}),y:f=>({prop:"top",value:`${f}px`}),width:f=>f===0?null:{prop:"width",value:`${f}px`},height:f=>f===0?null:{prop:"height",value:`${f}px`},fontSize:f=>f===0?null:{prop:"font-size",value:`${f}px`},lineHeight:f=>f===0?null:{prop:"line-height",value:`${f}px`},zIndex:()=>"z-index",fontFamily:()=>"font-family",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:f=>f===!1?null:{prop:"overflow",value:f?"hidden":"visible"},rotation:f=>f===0?null:{prop:"transform",value:`rotate(${f}rad)`},scale:f=>f===1?null:{prop:"transform",value:`scale(${f})`},scaleX:f=>f===1?null:{prop:"transform",value:`scaleX(${f})`},scaleY:f=>f===1?null:{prop:"transform",value:`scaleY(${f})`},color:f=>f===0?null:{prop:"color",value:xT(f)}},xT=f=>{const i=(f&255)/255,o=f>>8&255,l=f>>16&255;return`rgba(${f>>24&255},${l},${o},${i})`},dg={id:"test-id"},K5=new Set([...Object.keys(ju),...Object.keys(dg),"src","parent","data"]);class Y5{constructor(i,o){P(this,"root",null);P(this,"canvas",null);P(this,"height",1080);P(this,"width",1920);P(this,"scaleX",1);P(this,"scaleY",1);if(fl())return;if(!o)throw new Error("settings is required");this.height=Math.ceil(o.appHeight??1080/(o.deviceLogicalPixelRatio??1)),this.width=Math.ceil(o.appWidth??1920/(o.deviceLogicalPixelRatio??1)),this.scaleX=o.deviceLogicalPixelRatio??1,this.scaleY=o.deviceLogicalPixelRatio??1,this.canvas=i,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(i,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(i),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const i=this.canvas.getBoundingClientRect(),o=document.documentElement.scrollTop+i.top,l=document.documentElement.scrollLeft+i.left;this.root.id="root",this.root.style.left=`${l}px`,this.root.style.top=`${o}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(i,o){const l=document.createElement("div");l.style.position="absolute",l.id=i.toString();for(const h in o)this.updateNodeProperty(l,h,o[h],o);return l}createNode(i){const o=this.createDiv(i.id,i.props);return o.node=i,i.div=o,i.on("inViewport",()=>o.setAttribute("state","inViewport")),i.on("inBounds",()=>o.setAttribute("state","inBounds")),i.on("outOfBounds",()=>o.setAttribute("state","outOfBounds")),this.createProxy(i,o)}createTextNode(i){const o=this.createDiv(i.id,i.props);return o.node=i,i.div=o,this.createProxy(i,o)}createProxy(i,o){K5.forEach(g=>{let x=Object.getOwnPropertyDescriptor(i,g);if(x===void 0){const w=Object.getPrototypeOf(i);x=Object.getOwnPropertyDescriptor(w,g)}x!==void 0&&Object.defineProperty(i,g,{get(){var w;return(w=x==null?void 0:x.get)==null?void 0:w.call(i)},set:w=>{var s;(s=x==null?void 0:x.set)==null||s.call(i,w),this.updateNodeProperty(o,g,w,i.props)},configurable:!0,enumerable:!0})});const l=i.destroy;Object.defineProperty(i,"destroy",{value:()=>{this.destroyNode(i.id),l.call(i)}});const h=i.animate;return Object.defineProperty(i,"animate",{value:(g,x)=>{const w=h.call(i,g,x),s=w.start.bind(w);return w.start=()=>(this.animateNode(o,g,x),s()),w}}),i}destroyNode(i){const o=document.getElementById(i.toString());o==null||o.remove()}updateNodeProperty(i,o,l,h){var g;if(!(this.root===null||l===void 0||l===null)){if(o==="parent"){const x=l.id;if(x===1){this.root.appendChild(i);return}const w=document.getElementById(x.toString());w==null||w.appendChild(i);return}if(o==="text"){i.innerHTML=String(l),i.style.visibility="hidden";return}if(o==="src"&&l){i.setAttribute("data-src",String(l));return}if(o==="rtt"&&l){i.setAttribute("data-rtt",String(l));return}if(ju[o]){const x=(g=ju[o])==null?void 0:g.call(ju,l);if(x===null)return;if(typeof x=="string"){i.style.setProperty(x,String(l));return}if(typeof x=="object"){let w=x.value;if(o==="x"){const s=h.mountX,m=h.width;s&&(w=`${parseInt(w)-m*s}px`)}else if(o==="y"){const s=h.mountY,m=h.height;s&&(w=`${parseInt(w)-m*s}px`)}i.style.setProperty(x.prop,w)}return}if(dg[o]){const x=dg[o];if(!x)return;i.setAttribute(String(x),String(l));return}if(o==="data"){for(const x in l){const w=l[x];w===void 0?i.removeAttribute(`data-${x}`):i.setAttribute(`data-${x}`,String(w))}return}}}animateNode(i,o,l){const{duration:h=1e3,delay:g=0}=l,{x,y:w,width:s,height:m,alpha:C=1,rotation:y=0,scale:v=1,color:M,mountX:b,mountY:_}=o;function U(){setTimeout(()=>{i.style.top=`${w-m*_}px`,i.style.left=`${x-s*b}px`,i.style.width=`${s}px`,i.style.height=`${m}px`,i.style.opacity=`${C}`,i.style.rotate=`${y}rad`,i.style.scale=`${v}`,i.style.color=xT(M)},h)}setTimeout(U,g)}}const wT=50,CC={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},Q5={low:.66666667,medium:.85,high:1,retina:2},Z5=()=>{const f=Pi.stage;Zo.get("fonts",[]).forEach(i=>{i.type==="sdf"||i.type==="msdf"?(!i.png&&i.file&&(i.png=i.file.replace(/\.[^.]+$/,`.${i.type}.png`)),!i.json&&i.file&&(i.json=i.file.replace(/\.[^.]+$/,`.${i.type}.json`)),f.fontManager.addFontFace(new hg(i.type,{fontFamily:i.family,descriptors:{},atlasUrl:i.png,atlasDataUrl:i.json,stage:f,metrics:i.metrics}))):i.type==="web"&&f.fontManager.addFontFace(new Xh({fontFamily:i.family,fontUrl:i.file,descriptors:{},metrics:i.metrics}))})},J5=()=>{const f=Pi.stage;Zo.get("shaders",[]).forEach(i=>{f.shManager.registerShaderType(i.name,i.type)}),Zo.get("effects",[]).forEach(i=>{f.shManager.registerShaderType(i.name,i.type)})};let Pi=null;const eR=f=>{const i="renderMode"in f?f.renderMode:"webgl";if(i==="webgl")return kg;if(i==="canvas")return q5},tR=f=>{const i="renderMode"in f?f.renderMode:"webgl";if(i==="webgl")return[z5,wC];if(i==="canvas")return[wC]},nR=f=>{const i={max:200,target:.8,cleanupInterval:5e3,baseline:25,strict:!1,..."gpuMemory"in f?f.gpuMemory:{}};return{criticalThreshold:i.max*1024*1024,targetThresholdLevel:i.target,cleanupInterval:i.cleanupInterval,baselineMemoryAllocation:i.baseline*1024*1024,doNotExceedCriticalThreshold:i.strict}},oR=(f,i,o={})=>{Pi=new S5({appWidth:o.w||1920,appHeight:o.h||1080,fpsUpdateInterval:o.fpsInterval||1e3,devicePhysicalPixelRatio:Q5[o.renderQuality]||o.renderQuality||1,deviceLogicalPixelRatio:o.pixelRatio||CC[o.screenResolution]||CC[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in o?o.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:o.canvasColor&&rl.normalize(o.canvasColor)||0,inspector:o.inspector===!0?Y5:void 0,boundsMargin:o.viewportMargin||0,renderEngine:eR(o),fontEngines:tR(o),canvas:o.canvas,textureProcessingTimeLimit:o.textureProcessingTimeLimit,textureMemory:nR(o),createImageBitmapSupport:"auto",...o.advanced||{}},i);const l=()=>{let h=f();h.quit=()=>{cn.info("Closing App"),h.destroy(),h=null,Pi=null}};return J5(),Z5(),l(),Pi};let iR=0;const rR=(f,i)=>{if(f===void 0)return{start:0,end:0,oppositeStart:0,oppositeEnd:0};if(typeof f=="number")return{start:f,end:f,oppositeStart:f,oppositeEnd:f};if(qr(f)===!0&&(f=Kr(f)),typeof f=="object"){const{top:o=void 0,right:l=void 0,bottom:h=void 0,left:g=void 0,x=0,y:w=0}=f;return i==="vertical"?{start:o!==void 0?o:w,end:h!==void 0?h:w,oppositeStart:g!==void 0?g:x,oppositeEnd:l!==void 0?l:x}:{start:g!==void 0?g:x,end:l!==void 0?l:x,oppositeStart:o!==void 0?o:w,oppositeEnd:h!==void 0?h:w}}return{start:0,end:0,oppositeStart:0,oppositeEnd:0}},sR=function(f){const i=f.direction==="vertical"?"y":"x",o=f.direction==="vertical"?"x":"y",l=f.direction==="vertical"?"mountX":"mountY",h=f.direction==="vertical"?"height":"width",g=f.direction==="vertical"?"width":"height",x=rR(f.padding,f.direction);let w=x.start;const s=this.node.children,m=s.length;let C=0;const y=f.gap||0;for(let M=0;M<m;M++){if(this.children[M]!==void 0&&this.children[M].props.raw.show===!1)continue;const b=s[M];b[i]=w,b[o]=x.oppositeStart,h==="width"?w+=b.width+(b.width!==("text"in b?1:0)?y:0):w+="text"in b?b.width>1?b.height+y:0:b.height!==0?b.height+y:0,C=Math.max(C,b[g]+x.oppositeStart+x.oppositeEnd)}this.node[h]=w-y+x.end,this.node[g]=C;const v={start:0,end:1,center:.5}[f["align-items"]||"start"];if(v!==0)for(let M=0;M<m;M++){const b=s[M];b[o]=C*v,b[l]=v}f["@updated"]!==void 0&&f["@updated"]({w:this.node.width,h:this.node.height},this),this.config.parent&&this.config.parent.props.__layout===!0&&this.config.parent.triggerLayout(this.config.parent.props)},TC=f=>f!==null&&typeof f=="object"&&"transition"in f,qr=f=>typeof f=="string"&&f.startsWith("{")&&f.endsWith("}"),Kr=f=>JSON.parse(f.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),Fa=function(f,i){return typeof f!="string"?f:f.indexOf("%")===f.length-1?this.element.config.parent&&(this.element.config.parent.node[i]||0)*(parseFloat(f)/100)||0:f},pg=f=>{if(typeof f!="object"||f===null)return f;if(f.constructor===Object){if("value"in f)return f.value;if("transition"in f)return pg(f.transition)}return f},aR={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};let mg=null;const lR={set parent(f){this.props.parent=f==="root"?Pi.root:f.node},set rotation(f){this.props.rotation=f*(Math.PI/180)},set w(f){this.props.width=Fa.call(this,f,"width")},set width(f){this.props.width=Fa.call(this,f,"width")},set h(f){this.props.height=Fa.call(this,f,"height")},set height(f){this.props.height=Fa.call(this,f,"height")},set x(f){this.props.x=Fa.call(this,f,"width")},set y(f){this.props.y=Fa.call(this,f,"height")},set z(f){this.props.zIndex=f},set zIndex(f){this.props.zIndex=f},set color(f){typeof f=="string"&&f.startsWith("{")===!1?this.props.color=rl.normalize(f):(typeof f=="object"||qr(f)===!0&&(f=Kr(f)))&&(this.props.color=0,Object.entries(f).forEach(i=>{this.props[aR[i[0]]]=rl.normalize(i[1])}))},set src(f){this.props.src=f,this.raw.color===void 0&&(this.props.color=this.props.src?4294967295:0),!("w"in this.raw)&&!("w"in this.raw)&&!("h"in this.raw)&&!("height"in this.raw)&&(this.props.autosize=!0)},set texture(f){this.props.texture=f,this.raw.color===void 0&&f==null?this.props.color=0:this.raw.color===void 0&&(this.props.color=4294967295)},set fit(f){const i={};if(f==="cover"||f==="contain"){this.props.textureOptions={resizeMode:{type:f}};return}(typeof f=="object"||qr(f)===!0&&(f=Kr(f)))&&(i.type=f.type||"cover",typeof f.position=="number"&&(i.clipY=i.clipX=f.position),typeof f.position=="object"&&(i.clipX="x"in f.position?f.position.x:null,i.clipY="y"in f.position?f.position.y:null),this.props.textureOptions={resizeMode:i})},set rtt(f){this.props.rtt=f,this.raw.color===void 0&&(this.props.color=f===!0?4294967295:0)},set mount(f){typeof f=="object"||qr(f)===!0&&(f=Kr(f))?("x"in f&&(this.props.mountX=f.x),"y"in f&&(this.props.mountY=f.y)):(this.props.mountX=f,this.props.mountY=f)},set pivot(f){typeof f=="object"||qr(f)===!0&&(f=Kr(f))?("x"in f&&(this.props.pivotX=f.x),"y"in f&&(this.props.pivotY=f.y)):(this.props.pivotX=f,this.props.pivotY=f)},set scale(f){typeof f=="object"||qr(f)===!0&&(f=Kr(f))?("x"in f&&(this.props.scaleX=f.x),"y"in f&&(this.props.scaleY=f.y)):this.props.scale=f},set show(f){f?this.props.alpha=this.raw.alpha!==void 0?this.raw.alpha:1:this.props.alpha=0},set alpha(f){(this.raw.show===void 0||this.raw.show==!0)&&(this.props.alpha=f)},set shader(f){f!==null?this.props.shader=Pi.createShader(f.type,f.props):this.props.shader=Pi.createShader("DefaultShader")},set effects(f){for(let i=0;i<f.length;i++)f[i].props&&f[i].props.color&&(f[i].props.color=rl.normalize(f[i].props.color));this.element.node===void 0&&(this.props.shader=Pi.createShader("DynamicShader",{effects:f.map(i=>Pi.createEffect(i.type,i.props))}))},set clipping(f){this.props.clipping=f},set overflow(f){this.props.clipping=!f},set font(f){this.props.fontFamily=f},set size(f){this.props.fontSize=f},set wordwrap(f){cn.warn("The wordwrap attribute is deprecated, use maxwidth instead"),this.props.width=f,this.props.contain="width"},set maxwidth(f){this.props.width=f,this.props.contain="width"},set maxheight(f){this.props.height=f,this.props.contain="both"},set contain(f){this.props.contain=f},set maxlines(f){this.props.maxLines=f},set textoverflow(f){this.props.overflowSuffix=f===!1?" ":f===!0?void 0:f},set letterspacing(f){this.props.letterSpacing=f||1},set lineheight(f){this.props.lineHeight=f},set align(f){this.props.textAlign=f},set content(f){this.props.text=""+f},set placement(f){let i,o;typeof f=="object"||qr(f)===!0&&(f=Kr(f))?("x"in f&&(i=f.x),"y"in f&&(o=f.y)):f==="center"||f==="right"?i=f:o=f,i==="center"?(this.x="50%",this.props.mountX=.5):i==="right"&&(this.x="100%",this.props.mountX=1),o==="middle"?(this.y="50%",this.props.mountY=.5):o==="bottom"&&(this.y="100%",this.props.mountY=1)},set"inspector-data"(f){(typeof f=="object"||qr(f)===!0&&(f=Kr(f)))&&(this.props.data=f)}},uR={populate(f){const i=f;i.node=this.config.node,i[xe.isSlot]===!0&&(this[xe.isSlot]=!0),this.props.element=this,this.props.parent=i.parent||this.config.parent,delete i.parent,this.props.raw=f;const o=Object.keys(i),l=o.length;for(let h=0;h<l;h++){const g=o[h],x=i[g];x!==void 0&&(this.props[g]=pg(x))}this.props.props.color===void 0&&!("__textnode"in i)&&(this.props.props.color=0),this.node=i.__textnode?Pi.createTextNode({...mg,...this.props.props}):Pi.createNode(this.props.props),i["@loaded"]!==void 0&&typeof i["@loaded"]=="function"&&this.node.on("loaded",(h,{type:g,dimensions:x})=>{i["@loaded"]({w:x.width,h:x.height,type:g},this)}),i["@error"]!==void 0&&typeof i["@error"]=="function"&&this.node.on("failed",(h,g)=>{i["@error"](g,this)}),i.__layout===!0&&(this.triggerLayout=sR.bind(this)),this.config.parent.props!==void 0&&this.config.parent.props.__layout===!0&&(this.config.parent.triggerLayout(this.config.parent.props),this.node.on("loaded",()=>{this.config.parent.triggerLayout(this.config.parent.props)}))},set(f,i){if(i===void 0||this.props.raw[f]===i)return;this.props.raw[f]=i,this.props.props={},this.props[f]=pg(i);const o=Object.keys(this.props.props);if(o.length===1){if(TC(i)===!0)return this.animate(o[0],this.props.props[o[0]],i.transition);this.node[o[0]]=this.props.props[o[0]]}else for(let l=0;l<o.length;l++){if(TC(i)===!0)return this.animate(o[l],this.props.props[o[l]],i.transition);this.node[o[l]]=this.props.props[o[l]]}this.config.parent.props&&this.config.parent.props.__layout===!0&&this.config.parent.triggerLayout(this.config.parent.props)},animate(f,i,o){if(this.scheduledTransitions[f]!==void 0&&this.scheduledTransitions[f].f.state==="scheduled"&&this.scheduledTransitions[f].f.stop(),this.node[f]===i)return;const l={};l[f]=i;const h=this.node.animate(l,{duration:typeof o=="object"&&"duration"in o?o.duration:300,easing:typeof o=="object"&&"easing"in o?o.easing:"ease",delay:typeof o=="object"&&"delay"in o?o.delay:0}),g=this.node[f];if(this.scheduledTransitions[f]={v:l[f],f:h},o.start!==void 0&&typeof o.start=="function"&&h.once("animating",()=>{o.start.call(this.component,this,f,g)}),this.config.parent.props&&this.config.parent.props.__layout===!0&&h.on("tick",()=>{this.config.parent.triggerLayout(this.config.parent.props)}),o.progress!==void 0&&typeof o.progress=="function"){let x=0;h.on("tick",(w,{progress:s})=>{o.progress.call(this.component,this,f,s,x),x=s})}h.once("stopped",()=>{this.scheduledTransitions[f]!==void 0&&this.scheduledTransitions[f].canceled===!0||(this.node!==void 0&&o.end&&typeof o.end=="function"&&o.end.call(this.component,this,f,this.node[f]),delete this.scheduledTransitions[f])}),h.start()},destroy(){if(this.node===null)return;cn.debug("Deleting Node",this.nodeId);const f=Object.keys(this.scheduledTransitions);for(let i=0;i<f.length;i++){const o=this.scheduledTransitions[f[i]];o!==void 0&&(o.canceled=!0,o.f!==void 0&&o.f.stop())}this.scheduledTransitions={},this.component=null,delete this.component,this.config=null,delete this.config,this.counter=null,delete this.counter,this.props.raw={},this.props.element=null,this.props.props=null,this.props={},delete this.props,this.triggerLayout=null,delete this.triggerLayout,this.forComponent=null,delete this.forComponent,this.node.destroy(),this.node=null},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){return this.component[xe.getChildren]().filter(f=>f.parent===(this[xe.isSlot]?this.node.children[0]:this.node))}},fR=(f,i)=>(mg===null&&(mg={fontSize:32,fontFamily:Zo.get("defaultFont","sans-serif")}),Object.assign(Object.create(uR),{props:Object.assign(Object.create(lR),{props:{}}),scheduledTransitions:{},config:f,component:i,counter:iR++})),bC={Element:fR,Launch:oR},cR="1.29.5",hR={"@lightningjs/renderer":"^2.13.4"},ST={version:cR,dependencies:hR};let sd={};const Eg={};async function dR(){let f;try{if(f=await eT(()=>import("./package-CoV7Ag1Q.js"),[]),f!==void 0)return f.version}catch{return ST.dependencies["@lightningjs/renderer"]}}const pR=(f,i,o)=>{Zo.set(o),i_(),dR().then(l=>{cn.info("Blits Version ",ST.version),cn.info("Renderer Version ",l)}),Eg.element=bC.Element,sd=bC.Launch(f,i,o)},mR={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},_s=window.speechSynthesis,gR=/android/i.test((window.navigator||{}).userAgent||"");let CT=!1,ad=null;const TT=()=>ad&&clearTimeout(ad),gg=f=>{if(!f||ad)return TT();_s.pause(),_s.resume(),ad=setTimeout(()=>{gg(f)},5e3)},Ya={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},yR=()=>{Ya.voice=_s.getVoices()[0],CT=!0},vR=f=>{const i=new SpeechSynthesisUtterance(f.message);return i.lang=f.lang||Ya.lang,i.pitch=f.pitch||Ya.pitch,i.rate=f.rate||Ya.rate,i.voice=f.voice||Ya.voice,i.volume=f.volume||Ya.volume,gR===!1&&(i.onstart=()=>{gg(i)},i.onresume=()=>{gg(i)}),new Promise((o,l)=>{i.onend=()=>{o()},i.onerror=h=>{l(h)},_s.speak(i)})},Ag={speak(f){return _s!==void 0?(CT===!1&&yR(),vR(f)):(cn.error("speechSynthesis web API not available"),Promise.reject({error:"unavailable"}))},cancel(){_s!==void 0&&(_s.cancel(),TT())}};let ef=!1,xR=0;const Qr=[];let Qa=!1,Fu=null,Oh=null;const bT={then(){},done(){},cancel(){},stop(){}},wR=()=>{ef=!0},SR=()=>{ef=!1},CR=f=>{ef=!!f},Ig=(f,i="off")=>ef===!1?bT:kT(f,i),TR=f=>ef===!1?bT:kT(void 0,void 0,f),kT=(f,i,o=!1)=>{const l=xR++;let h;const g=new Promise(x=>{h=x});return g.cancel=()=>{const x=Qr.findIndex(w=>w.id===l);x!==-1&&Qr.splice(x,1),h("canceled")},g.stop=()=>{l===Fu&&(Ag.cancel(),Qa=!1,h("interupted"))},o===!1?i==="assertive"?Qr.unshift({message:f,resolveFn:h,id:l}):Qr.push({message:f,resolveFn:h,id:l}):Qr.push({delay:o,resolveFn:h,id:l}),setTimeout(()=>{qh()},100),g},qh=async()=>{if(Qa===!0||Qr.length===0)return;Qa=!0;const{message:f,resolveFn:i,delay:o,id:l}=Qr.shift();Fu=l,o?setTimeout(()=>{Qa=!1,Fu=null,i("finished"),qh()},o):(Oh!==null&&clearTimeout(Oh),Oh=setTimeout(()=>{Ag.speak({message:f}).then(()=>{Qa=!1,Fu=null,i("finished"),qh()}).catch(h=>{Qa=!1,Fu=null,i(h.error),qh()}),Oh=null},200))},bR=f=>Ig(f,"polite"),kR=f=>Ig(f,"assertive"),ER=()=>{Ag.cancel()},AR=()=>{Qr.length=0},Kh={speak:Ig,polite:bR,assertive:kR,stop:ER,enable:wR,disable:SR,toggle:CR,clear:AR,pause:TR};let Zr;const Rr=Xu({path:"",navigating:!1,data:null,params:null,hash:""},Zo.get("reactivityMode"),!0),yg=new Map,ET=[];let AT={},IT={},ll=!1,MT;const IR=()=>{const f=(document.location.hash||"/").replace(/^#/,"").split("?");return{path:f[0],queryParams:new URLSearchParams(f[1]),hash:document.location.hash}},kC=f=>f.replace(/^\/+|\/+$/g,"").toLowerCase(),EC=f=>typeof f=="object"&&f!==null,AC=f=>typeof f=="string",_T=(f,i=[])=>{const o=f.replace(/^\/+|\/+$/g,"");f=kC(f);let l=!1,h=0;for(;!l&&h<i.length;){const g=i[h];if(g.path=kC(g.path),g.path===f)g.params={},l=g;else if(g.path.indexOf(":")>-1){const x=[...g.path.matchAll(/:([^\s/]+)/gi)];let w=g.path;x.reverse().forEach(m=>{w=w.substring(0,m.index)+"([^\\s/]+)"+w.substring(m.index+m[0].length)}),w="^"+w;const s=o.match(new RegExp(`${w}`,"i"));s&&(g.params=x.reverse().reduce((m,C,y)=>(m[C[1]]=s[y+1],m),{}),l=g)}else if(g.path.endsWith("*")){const x=new RegExp(g.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),w=f.match(x);w&&(w[1]&&(g.params={path:w[1]}),l=g)}h++}return l&&(l.options={...l.options,...AT},l.data||(l.data={})),l},MR=async function(){if(Kh.stop(),Kh.clear(),Rr.navigating=!0,this.parent[xe.routes]){let f=Zr;const{hash:i,path:o,queryParams:l}=IR();let h=_T(o,this.parent[xe.routes]);if(i!==null&&(h.hash=i),Zr=h,h){let g;if(this.parent[xe.routerHooks]){const v=this.parent[xe.routerHooks];if(v.beforeEach&&(g=await v.beforeEach(h,f),AC(g))){Yu(g);return}}h=EC(g)?g:h;let x;if(h.hooks&&h.hooks.before&&(x=await h.hooks.before.call(this.parent,h,f),AC(x))){Zr=f,Yu(x);return}h=EC(x)?x:h,ll===!1&&f&&f.options.inHistory===!0&&ET.push(f),"transition"in h||(h.transition=mR),typeof h.transition=="function"&&(h.transition=h.transition(f,h));let w,s,{view:m,focus:C}=yg.get(h.hash)||{};if(h.announce&&(typeof h.announce=="string"&&(h.announce={message:h.announce}),Kh.speak(h.announce.message,h.announce.politeness)),m){w=m[xe.holder];let v=!1;if(h.transition.before)if(Array.isArray(h.transition.before)){for(let M=0;M<h.transition.before.length;M++)if(h.transition.before[M].prop==="alpha"){v=!0;break}}else h.transition.before.prop==="alpha"&&(v=!0);v===!1&&w.set("alpha",1)}else{w=Eg.element({parent:this[xe.children][0]}),w.populate({}),w.set("w","100%"),w.set("h","100%");const v={},M=[...l.entries()];for(let _=0;_<M.length;_++)v[M[_][0]]=M[_][1];s={...IT,...h.data,...v};const b={...this[xe.props],...h.params,...s};m=await h.component({props:b},w,this),m[Symbol.toStringTag]==="Module"&&(m.default&&typeof m.default=="function"?m=m.default({props:b},w,this):cn.error("Dynamic import doesn't have a default export or default is not a function")),typeof m=="function"&&(m=m({props:b},w,this))}if(this[xe.children].push(m),MT=il.get(),C?C.$focus():m.$focus(),h.transition.before)if(Array.isArray(h.transition.before))for(let v=0;v<h.transition.before.length;v++)w.set(h.transition.before[v].prop,h.transition.before[v].value);else w.set(h.transition.before.prop,h.transition.before.value);let y=!1;if(f){y=!0;const v=this[xe.children].splice(1,1).pop();v&&_R(f,v,h.transition.out)}if(Rr.path=h.path,Rr.params=h.params,Rr.hash=i,Rr.data=s,h.transition.in)if(Array.isArray(h.transition.in))for(let v=0;v<h.transition.in.length;v++)v===h.transition.length-1?await ul(w,h.transition.in[v],y):ul(w,h.transition.in[v],y);else await ul(w,h.transition.in,y);this.activeView=this[xe.children][this[xe.children].length-1]}else cn.error(`Route ${i} not found`)}ll=!1,Rr.navigating=!1},_R=async(f,i,o)=>{if(o)if(Array.isArray(o))for(let l=0;l<o.length;l++)l===o.length-1?await ul(i[xe.holder],o[l]):ul(i[xe.holder],o[l]);else await ul(i[xe.holder],o);ll===!1&&f.options&&f.options.keepAlive===!0?yg.set(f.hash,{view:i,focus:MT}):ll===!0&&yg.delete(f.hash),f.options&&(f.options.keepAlive!==!0||ll===!0)&&(i.destroy(),i=null)},ul=(f,i,o=!0)=>new Promise(l=>{if(o===!0){let h=i.end;i.end=(...g)=>{h&&h(g),h=null,l()},f.set(i.prop,{transition:i})}else f.set(i.prop,i.value),l()}),Yu=(f,i={},o={})=>{IT=i,AT=o,window.location.hash=f},RT=function(){const f=ET.pop();if(f&&Zr!==f)return ll=!0,Yu(f.hash,f.data,f.options),!0;const i=Zr&&Zr.options.backtrack||!1;if(i===!1)return!1;const o=/(\/:?[\w%\s-]+)$/;let l=Zr.path,h=l.split("/").length;if(h<=1)return!1;for(;h--;){if(!o.test(l))return!1;l=l.replace(o,"");const g=_T(l,this.parent[xe.routes]);if(g&&i)return Yu(g.path),!0}return!1},z0={navigate:MR,back:RT};let Ir=null,Nh=[],IC;const vg=new Map,il={_hold:!1,set hold(f){this._hold=f},get hold(){return this._hold},get(){return Ir},set(f,i){f!==Ir&&(clearTimeout(IC),Ir&&Ir!==f.parent&&Ir.unfocus(),Nh.reverse().forEach(o=>o.unfocus()),f!==Ir&&(IC=setTimeout(()=>{Ir=f,Ir.lifecycle.state="focus",i instanceof KeyboardEvent?document.dispatchEvent(new KeyboardEvent("keydown",i)):Nh=[]},this.hold?Zo.get("holdTimeout",wT):0)))},input(f,i){if(Rr.navigating===!0)return;Nh=LT([Ir],f);const o=Nh.shift();if(o){let l;o[xe.inputEvents][f]?l=o[xe.inputEvents][f].call(o,i):o[xe.inputEvents].any&&(l=o[xe.inputEvents].any.call(o,i)),l!==void 0&&vg.set(i.code,l)}}},LT=(f,i)=>f[0][xe.inputEvents]&&(typeof f[0][xe.inputEvents][i]=="function"||typeof f[0][xe.inputEvents].any=="function")?f:f[0].parent?(f.unshift(f[0].parent),LT(f,i)):[],Ts=new Map,$a=new Map,Yh={registerListener(f,i,o,l=0){let h=Ts.get(i);h===void 0&&(h=new Map,Ts.set(i,h));let g=h.get(f);g===void 0&&(g=new Set,h.set(f,g)),g.add({cb:o,priority:l}),$a.delete(i)},deregisterListener(f,i){let o=Ts.get(i);o!==void 0&&o.has(f)&&(o.delete(f),Ts.set(i,o),$a.delete(i))},executeListeners(f,i){const o=Ts.get(f);if(o===void 0||o.size===0)return!0;if($a.has(f)===!1){const h=[];for(const[g,x]of o)for(const w of x)h.push({...w,component:g});h.sort((g,x)=>x.priority-g.priority),$a.set(f,h)}const l=$a.get(f);for(let h=0;h<l.length;h++){const{cb:g,component:x}=l[h];if(g.call(x,i)===!1)return!1}return!0},removeListeners(f){for(const[i,o]of Ts)o.has(f)&&(o.delete(f),$a.delete(i),o.size===0&&Ts.delete(i))}},RR={focus:{value:function(f){return cn.warn("this.focus is deprecated, use this.$focus instead"),this.$focus(f)},writable:!1,enumerable:!0,configurable:!1},$focus:{value:function(f){this[xe.state].hasFocus=!0,il.set(this,f)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[xe.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.eol=!0,this.lifecycle.state="destroy";for(let f in this[xe.state])Array.isArray(this[xe.state][f])&&(this[xe.state][f]=[]);this.$clearTimeouts(),this.$clearIntervals(),Yh.removeListeners(this),DT(this[xe.children]),this[xe.children].length=0,oC(this[xe.effects]),this[xe.state]={},this[xe.props]={},this[xe.computed]=null,this.lifecycle={},this[xe.effects].length=0,this.parent=null,this.rootParent=null,this[xe.wrapper]=null,this[xe.originalState]=null,this[xe.slots].length=0,delete this[xe.computed],delete this[xe.effects],delete this.parent,delete this.rootParent,delete this[xe.wrapper],delete this[xe.originalState],delete this[xe.children],delete this[xe.slots],delete this.componentId,delete this[xe.id],delete this.ref,this[xe.holder].destroy(),this[xe.holder]=null,delete this[xe.holder],cn.debug(`Destroyed component ${this.componentId}`)},writable:!1,enumerable:!0,configurable:!1},[xe.removeGlobalEffects]:{value:function(f=[]){oC(f)},writable:!1,enumerable:!1,configurable:!1},select:{value:function(f){return cn.warn("this.select is deprecated, use this.$select instead"),this.$select(f)},writable:!1,enumerable:!0,configurable:!1},$select:{value:function(f){let i=null;return this[xe.children].forEach(o=>{Array.isArray(o)?o.forEach(l=>{l.ref===f&&(i=l)}):Object.getPrototypeOf(o)===Object.prototype?Object.keys(o).forEach(l=>{o[l].ref===f&&(i=o[l])}):o.ref===f&&(i=o)}),i},writable:!1,enumerable:!0,configurable:!1},trigger:{value:function(f){return cn.warn("this.trigger is deprecated, use this.$trigger instead"),this.$trigger(f)},writable:!1,enumerable:!0,configurable:!1},$trigger:{value:function(f){let i=this[xe.originalState];if(f.indexOf(".")>-1){const o=f.split(".");f=o.pop(o);for(let l=0;l<o.length;l++)i=i[o[l]]}al(i,f,!0)},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(f,i){return{type:f,props:i}},writable:!1,enumerable:!0,configurable:!1}},DT=function(f){for(let i=0;i<f.length;i++){if(!f[i])return;f[i].destroy&&typeof f[i].destroy=="function"?f[i].destroy():Object.getPrototypeOf(f[i])===Object.prototype&&DT(Object.values(f[i])),f[i]=null}f.length=0},LR={$setTimeout:{value:function(f,i,...o){if(this.eol===!0)return;const l=setTimeout(()=>{this.$clearTimeout(l),f.apply(null,o)},i,o);return this[xe.timeouts].push(l),l},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(f){const i=this[xe.timeouts].indexOf(f);i>-1&&(this[xe.timeouts].splice(i,1),clearTimeout(f))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(let f=0;f<this[xe.timeouts].length;f++)clearTimeout(this[xe.timeouts][f]);this[xe.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(f,i,...o){if(this.eol===!0)return;const l=setInterval(()=>f.apply(null,o),i,o);return this[xe.intervals].push(l),l},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(f){const i=this[xe.intervals].indexOf(f);i>-1&&(this[xe.intervals].splice(i,1),clearTimeout(f))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(let f=0;f<this[xe.intervals].length;f++)clearInterval(this[xe.intervals][f]);this[xe.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},DR={$emit:{value:function(f,i){return Yh.executeListeners(f,i)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(f,i,o=0){this.eol!==!0&&Yh.registerListener(this,f,i,o)},writable:!1,enumerable:!0,configurable:!1},$unlisten:{value:function(f){Yh.deregisterListener(this,f)},writable:!1,enumerable:!0,configurable:!1}},PR={$router:{value:{to:Yu,back:RT,get currentRoute(){return Zr},get routes(){return this[xe.routes]},get navigating(){return Rr.navigating},state:Rr},writable:!1,enumerable:!0,configurable:!1}},OR={$announcer:{value:Kh,writable:!1,enumerable:!0,configurable:!1}},NR={$size:{value:function(f={w:0,h:0}){this[xe.holder].set("w",f.w||0),this[xe.holder].set("h",f.h||0)},writable:!1,enumerable:!0,configurable:!1},[xe.renderer]:{value:()=>sd,writable:!1,enumerable:!0,configurable:!1},[xe.getChildren]:{value(){const f=this.rootParent||this.parent;return(this[xe.children]||[]).concat(f&&f[xe.getChildren]().map(i=>Object.getPrototypeOf(i)===Object.prototype?Object.values(i).map(o=>(o.forComponent=o[Symbol.for("config")]&&o[Symbol.for("config")].parent.component,o)):i).flat().filter(i=>{if(i&&i.component)return i.component&&i.component.componentId===this.componentId||i.forComponent&&i.forComponent.componentId===this.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}},PT={...DR,...PR,...OR},bs=Object.defineProperties({[xe.launched]:!1},{...RR,...LR,...PT,...NR}),UR={cast:f=>f,required:!1},BR=(f,i=[])=>{i.indexOf("ref")===-1&&i.push("ref"),f[xe.propKeys]=[];const o=i.length;for(let l=0;l<o;l++){const h={...UR,...typeof i[l]=="object"?i[l]:{key:i[l]}};f[xe.propKeys].push(h.key),Object.defineProperty(f,h.key,{get(){const g=h.cast(this[xe.props]!==void 0&&h.key in this[xe.props]?this[xe.props][h.key]:"default"in h?h.default:void 0);return h.required===!0&&g===void 0&&cn.warn(`${h.key} is required`),g},set(g){cn.warn(`Warning! Avoid mutating props directly (prop "${h.key}" in component "${this.componentId}")`),this[xe.props][h.key]=g}})}},jR=(f,i)=>{f[xe.methodKeys]=[];for(let o in i)f[xe.propKeys]&&f[xe.propKeys].indexOf(o)>-1?cn.error(`${o} already exists as a prop`):(typeof i[o]!="function"&&cn.warn(`${o} is not a function`),f[xe.methodKeys].push(o),f[o]=i[o])},FR=(f,i=()=>{})=>{Object.defineProperty(f,xe.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1});const o=Object.keys(i.apply(f)||{});o.push(["hasFocus"]);const l=o.length;for(let h=0;h<l;h++){const g=o[h];f[xe.propKeys]!==void 0&&f[xe.propKeys].indexOf(g)>-1&&cn.error(`State ${g} already exists as a prop`),f[xe.methodKeys]!==void 0&&f[xe.methodKeys].indexOf(g)>-1&&cn.error(`State ${g} already exists as a method`),f[xe.stateKeys].push(g),Object.defineProperty(f,g,{get(){return this[xe.state][g]},set(x){this[xe.state][g]=x}})}},$R=(f,i)=>{f[xe.computedKeys]=[];for(let o in i)f[xe.stateKeys]&&f[xe.stateKeys].indexOf(o)>-1?cn.error(`${o} already exists as a state variable`):f[xe.propKeys]&&f[xe.propKeys].indexOf(o)>-1?cn.error(`${o} already exists as a prop`):f[xe.methodKeys]&&f[xe.methodKeys].indexOf(o)>-1?cn.error(`${o} already exists as a method`):(typeof i[o]!="function"&&cn.warn(`${o} is not a function`),f[xe.computedKeys].push(o),Object.defineProperty(f,o,{get(){return i[o].apply(this)}}))},zR=(f,i)=>{f[xe.inputEvents]=[],Object.keys(i).forEach(o=>{typeof i[o]!="function"&&cn.warn(`${i[o]} is not a function`),f[xe.inputEvents][o]=i[o]})},VR=(f,i)=>{let o=i;Array.isArray(i)===!1&&(f[xe.routerHooks]=i.hooks,o=i.routes),f[xe.routes]=[],Object.keys(o).forEach(l=>{f[xe.routes][l]={...o[l],options:{inHistory:!0,...o[l].options}}})},HR=(f,i)=>{f[xe.watchKeys]=[],f[xe.watchers]={};for(let o in i)typeof i[o]!="function"&&console.warn(`${o} is not a function`),f[xe.watchKeys].push(o),f[xe.watchers][o]=function(l,h){i[o].call(this,l,h)}};let GR=0;function WR(f,i){f[xe.identifier]=++GR,x_(i.hooks,f[xe.identifier]),BR(f,i.props),i.methods&&jR(f,i.methods),FR(f,i.state),i.computed&&$R(f,i.computed),i.watch&&HR(f,i.watch);const o=i.router!==void 0?i.router:i.routes;return o!==void 0&&VR(f,o),i.input&&zR(f,i.input),f}const XR=()=>hl("Circle",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.color=o.color,m.w=o.size,m.h=o.size,m.effects=[o.shader("radius",{radius:o.radius})],s[0].populate(m),s},effects:[function(i,o,l,h,g,x){o[0].set("color",i.color)},function(i,o,l,h,g,x){o[0].set("w",i.size)},function(i,o,l,h,g,x){o[0].set("h",i.size)},function(i,o,l,h,g,x){o[0].set("effects",[i.shader("radius",{radius:i.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let V0=null;const qR=()=>hl("RouterView",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.w=i.node.width*(100/100),m.height=i.node.height*(100/100),s[0].populate(m),s},effects:[],context:{}},state(){return{activeView:null}},hooks:{ready(){V0=()=>z0.navigate.apply(this),z0.navigate.apply(this),window.addEventListener("hashchange",V0)},destroy(){window.removeEventListener("hashchange",V0,!1)},focus(){this.activeView&&this.activeView.$focus()}},input:{back(f){z0.back.call(this)===!1&&this.parent.$focus(f)}}}),KR=()=>hl("Sprite",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.w=i.node.width*(100/100),m.h=i.node.height*(100/100),m.texture=o.texture,m.color=o.color,s[0].populate(m),s},effects:[function(i,o,l,h,g,x){o[0].set("texture",i.texture)},function(i,o,l,h,g,x){o[0].set("color",i.color)}],context:{}},props:["image","map","frame","color"],state(){return{spriteTexture:null}},computed:{texture(){const f="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(this.spriteTexture!==null&&f)return this[xe.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:f.x,y:f.y,width:f.w,height:f.h})}},hooks:{ready(){this.spriteTexture=this[xe.renderer]().createTexture("ImageTexture",{src:this.image})}}}),YR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",QR=()=>hl("FPScounter",{code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(b),v===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},v===!0?y:o),_.y=15,_.x=20,s[1].populate(_),v===!0&&(M-=1),i=s[1];const U={};s[2]=this.element({parent:i||"root"},v===!0?y:o),s[2].populate(U),v===!0&&(M-=1);const F=l.components&&l.components.Sprite||h.Sprite;i=s[2];const z={};s[3]=this.element({parent:i||"root"},v===!0?y:o),z.image=o.image,z.w=43,z.h=25,z.map=o.sprite,z.frame="fps";const B=[];if(typeof F<"u")for(let Be in F[Symbol.for("config")].props)delete z[F[Symbol.for("config")].props[Be]],B.push(F[Symbol.for("config")].props[Be]);s[3].populate(z),v===!0&&(M-=1),i=s[3];const G={};G.image=o.image,G.w=43,G.h=25,G.map=o.sprite,G.frame="fps",m=G.is||"Sprite";let X;if(typeof m=="string"){if(X=l.components&&l.components[m]||h[m],!X)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(X=m);s[4]=X.call(null,{props:G},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],y=s[4],v=!0):i=s[4][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[2];const Q={};s[5]=this.element({parent:i||"root"},v===!0?y:o),Q.x=58,Q.y=2,s[5].populate(Q),v===!0&&(M-=1);const W=l.components&&l.components.Sprite||h.Sprite;i=s[5];const te={};s[6]=this.element({parent:i||"root"},v===!0?y:o),te.image=o.image,te.x=0,te.h=20,te.w=20,te.map=o.sprite,te.frame=o.fps[0];const de=[];if(typeof W<"u")for(let Be in W[Symbol.for("config")].props)delete te[W[Symbol.for("config")].props[Be]],de.push(W[Symbol.for("config")].props[Be]);s[6].populate(te),v===!0&&(M-=1),i=s[6];const I={};I.image=o.image,I.x=0,I.h=20,I.w=20,I.map=o.sprite,C=o.fps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),I.frame=C,m=I.is||"Sprite";let q;if(typeof m=="string"){if(q=l.components&&l.components[m]||h[m],!q)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(q=m);s[7]=q.call(null,{props:I},s[6],o),s[7][Symbol.for("slots")][0]?(i=s[7][Symbol.for("slots")][0],y=s[7],v=!0):i=s[7][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const ee=l.components&&l.components.Sprite||h.Sprite;i=s[5];const ae={};s[8]=this.element({parent:i||"root"},v===!0?y:o),ae.image=o.image,ae.x=18,ae.h=20,ae.w=20,ae.map=o.sprite,ae.frame=o.fps[1];const ne=[];if(typeof ee<"u")for(let Be in ee[Symbol.for("config")].props)delete ae[ee[Symbol.for("config")].props[Be]],ne.push(ee[Symbol.for("config")].props[Be]);s[8].populate(ae),v===!0&&(M-=1),i=s[8];const Y={};Y.image=o.image,Y.x=18,Y.h=20,Y.w=20,Y.map=o.sprite,C=o.fps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),Y.frame=C,m=Y.is||"Sprite";let Z;if(typeof m=="string"){if(Z=l.components&&l.components[m]||h[m],!Z)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Z=m);s[9]=Z.call(null,{props:Y},s[8],o),s[9][Symbol.for("slots")][0]?(i=s[9][Symbol.for("slots")][0],y=s[9],v=!0):i=s[9][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const j=l.components&&l.components.Sprite||h.Sprite;i=s[5];const fe={};s[10]=this.element({parent:i||"root"},v===!0?y:o),fe.image=o.image,fe.x=36,fe.h=20,fe.w=20,fe.map=o.sprite,fe.frame=o.fps[2];const he=[];if(typeof j<"u")for(let Be in j[Symbol.for("config")].props)delete fe[j[Symbol.for("config")].props[Be]],he.push(j[Symbol.for("config")].props[Be]);s[10].populate(fe),v===!0&&(M-=1),i=s[10];const we={};we.image=o.image,we.x=36,we.h=20,we.w=20,we.map=o.sprite,C=o.fps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),we.frame=C,m=we.is||"Sprite";let ge;if(typeof m=="string"){if(ge=l.components&&l.components[m]||h[m],!ge)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ge=m);s[11]=ge.call(null,{props:we},s[10],o),s[11][Symbol.for("slots")][0]?(i=s[11][Symbol.for("slots")][0],y=s[11],v=!0):i=s[11][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[1];const be={};s[12]=this.element({parent:i||"root"},v===!0?y:o),be.x=150,s[12].populate(be),v===!0&&(M-=1);const Ie=l.components&&l.components.Sprite||h.Sprite;i=s[12];const V={};s[13]=this.element({parent:i||"root"},v===!0?y:o),V.image=o.image,V.y=2,V.w=48,V.h=25,V.map=o.sprite,V.frame="avg";const De=[];if(typeof Ie<"u")for(let Be in Ie[Symbol.for("config")].props)delete V[Ie[Symbol.for("config")].props[Be]],De.push(Ie[Symbol.for("config")].props[Be]);s[13].populate(V),v===!0&&(M-=1),i=s[13];const Se={};Se.image=o.image,Se.y=2,Se.w=48,Se.h=25,Se.map=o.sprite,Se.frame="avg",m=Se.is||"Sprite";let me;if(typeof m=="string"){if(me=l.components&&l.components[m]||h[m],!me)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(me=m);s[14]=me.call(null,{props:Se},s[13],o),s[14][Symbol.for("slots")][0]?(i=s[14][Symbol.for("slots")][0],y=s[14],v=!0):i=s[14][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[12];const Re={};s[15]=this.element({parent:i||"root"},v===!0?y:o),Re.x=63,Re.y=2,s[15].populate(Re),v===!0&&(M-=1);const Ne=l.components&&l.components.Sprite||h.Sprite;i=s[15];const $e={};s[16]=this.element({parent:i||"root"},v===!0?y:o),$e.image=o.image,$e.x=0,$e.h=20,$e.w=20,$e.map=o.sprite,$e.frame=o.avgFps[0];const Pe=[];if(typeof Ne<"u")for(let Be in Ne[Symbol.for("config")].props)delete $e[Ne[Symbol.for("config")].props[Be]],Pe.push(Ne[Symbol.for("config")].props[Be]);s[16].populate($e),v===!0&&(M-=1),i=s[16];const ve={};ve.image=o.image,ve.x=0,ve.h=20,ve.w=20,ve.map=o.sprite,C=o.avgFps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),ve.frame=C,m=ve.is||"Sprite";let Ye;if(typeof m=="string"){if(Ye=l.components&&l.components[m]||h[m],!Ye)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ye=m);s[17]=Ye.call(null,{props:ve},s[16],o),s[17][Symbol.for("slots")][0]?(i=s[17][Symbol.for("slots")][0],y=s[17],v=!0):i=s[17][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const it=l.components&&l.components.Sprite||h.Sprite;i=s[15];const Ke={};s[18]=this.element({parent:i||"root"},v===!0?y:o),Ke.image=o.image,Ke.x=18,Ke.h=20,Ke.w=20,Ke.map=o.sprite,Ke.frame=o.avgFps[1];const lt=[];if(typeof it<"u")for(let Be in it[Symbol.for("config")].props)delete Ke[it[Symbol.for("config")].props[Be]],lt.push(it[Symbol.for("config")].props[Be]);s[18].populate(Ke),v===!0&&(M-=1),i=s[18];const St={};St.image=o.image,St.x=18,St.h=20,St.w=20,St.map=o.sprite,C=o.avgFps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),St.frame=C,m=St.is||"Sprite";let ft;if(typeof m=="string"){if(ft=l.components&&l.components[m]||h[m],!ft)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ft=m);s[19]=ft.call(null,{props:St},s[18],o),s[19][Symbol.for("slots")][0]?(i=s[19][Symbol.for("slots")][0],y=s[19],v=!0):i=s[19][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Tt=l.components&&l.components.Sprite||h.Sprite;i=s[15];const je={};s[20]=this.element({parent:i||"root"},v===!0?y:o),je.image=o.image,je.x=36,je.h=20,je.w=20,je.map=o.sprite,je.frame=o.avgFps[2];const Dt=[];if(typeof Tt<"u")for(let Be in Tt[Symbol.for("config")].props)delete je[Tt[Symbol.for("config")].props[Be]],Dt.push(Tt[Symbol.for("config")].props[Be]);s[20].populate(je),v===!0&&(M-=1),i=s[20];const wt={};wt.image=o.image,wt.x=36,wt.h=20,wt.w=20,wt.map=o.sprite,C=o.avgFps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),wt.frame=C,m=wt.is||"Sprite";let Qe;if(typeof m=="string"){if(Qe=l.components&&l.components[m]||h[m],!Qe)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Qe=m);s[21]=Qe.call(null,{props:wt},s[20],o),s[21][Symbol.for("slots")][0]?(i=s[21][Symbol.for("slots")][0],y=s[21],v=!0):i=s[21][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[1];const gn={};s[22]=this.element({parent:i||"root"},v===!0?y:o),gn.x=0,gn.y=40,s[22].populate(gn),v===!0&&(M-=1);const un=l.components&&l.components.Sprite||h.Sprite;i=s[22];const qt={};s[23]=this.element({parent:i||"root"},v===!0?y:o),qt.image=o.image,qt.x="-2",qt.w=47,qt.h=25,qt.map=o.sprite,qt.frame="min";const xt=[];if(typeof un<"u")for(let Be in un[Symbol.for("config")].props)delete qt[un[Symbol.for("config")].props[Be]],xt.push(un[Symbol.for("config")].props[Be]);s[23].populate(qt),v===!0&&(M-=1),i=s[23];const Gt={};Gt.image=o.image,Gt.x="-2",Gt.w=47,Gt.h=25,Gt.map=o.sprite,Gt.frame="min",m=Gt.is||"Sprite";let vt;if(typeof m=="string"){if(vt=l.components&&l.components[m]||h[m],!vt)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(vt=m);s[24]=vt.call(null,{props:Gt},s[23],o),s[24][Symbol.for("slots")][0]?(i=s[24][Symbol.for("slots")][0],y=s[24],v=!0):i=s[24][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[22];const Ot={};s[25]=this.element({parent:i||"root"},v===!0?y:o),Ot.x=58,Ot.y=2,s[25].populate(Ot),v===!0&&(M-=1);const uo=l.components&&l.components.Sprite||h.Sprite;i=s[25];const bt={};s[26]=this.element({parent:i||"root"},v===!0?y:o),bt.image=o.image,bt.x=0,bt.h=20,bt.w=20,bt.map=o.sprite,bt.frame=o.minFps[0];const jt=[];if(typeof uo<"u")for(let Be in uo[Symbol.for("config")].props)delete bt[uo[Symbol.for("config")].props[Be]],jt.push(uo[Symbol.for("config")].props[Be]);s[26].populate(bt),v===!0&&(M-=1),i=s[26];const kn={};kn.image=o.image,kn.x=0,kn.h=20,kn.w=20,kn.map=o.sprite,C=o.minFps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),kn.frame=C,m=kn.is||"Sprite";let to;if(typeof m=="string"){if(to=l.components&&l.components[m]||h[m],!to)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(to=m);s[27]=to.call(null,{props:kn},s[26],o),s[27][Symbol.for("slots")][0]?(i=s[27][Symbol.for("slots")][0],y=s[27],v=!0):i=s[27][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Et=l.components&&l.components.Sprite||h.Sprite;i=s[25];const En={};s[28]=this.element({parent:i||"root"},v===!0?y:o),En.image=o.image,En.x=18,En.h=20,En.w=20,En.map=o.sprite,En.frame=o.minFps[1];const Jo=[];if(typeof Et<"u")for(let Be in Et[Symbol.for("config")].props)delete En[Et[Symbol.for("config")].props[Be]],Jo.push(Et[Symbol.for("config")].props[Be]);s[28].populate(En),v===!0&&(M-=1),i=s[28];const Qt={};Qt.image=o.image,Qt.x=18,Qt.h=20,Qt.w=20,Qt.map=o.sprite,C=o.minFps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),Qt.frame=C,m=Qt.is||"Sprite";let Rn;if(typeof m=="string"){if(Rn=l.components&&l.components[m]||h[m],!Rn)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Rn=m);s[29]=Rn.call(null,{props:Qt},s[28],o),s[29][Symbol.for("slots")][0]?(i=s[29][Symbol.for("slots")][0],y=s[29],v=!0):i=s[29][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Mo=l.components&&l.components.Sprite||h.Sprite;i=s[25];const Ln={};s[30]=this.element({parent:i||"root"},v===!0?y:o),Ln.image=o.image,Ln.x=36,Ln.h=20,Ln.w=20,Ln.map=o.sprite,Ln.frame=o.minFps[2];const Kn=[];if(typeof Mo<"u")for(let Be in Mo[Symbol.for("config")].props)delete Ln[Mo[Symbol.for("config")].props[Be]],Kn.push(Mo[Symbol.for("config")].props[Be]);s[30].populate(Ln),v===!0&&(M-=1),i=s[30];const ro={};ro.image=o.image,ro.x=36,ro.h=20,ro.w=20,ro.map=o.sprite,C=o.minFps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),ro.frame=C,m=ro.is||"Sprite";let Dn;if(typeof m=="string"){if(Dn=l.components&&l.components[m]||h[m],!Dn)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Dn=m);s[31]=Dn.call(null,{props:ro},s[30],o),s[31][Symbol.for("slots")][0]?(i=s[31][Symbol.for("slots")][0],y=s[31],v=!0):i=s[31][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[1];const st={};s[32]=this.element({parent:i||"root"},v===!0?y:o),st.x=150,st.y=40,s[32].populate(st),v===!0&&(M-=1);const _o=l.components&&l.components.Sprite||h.Sprite;i=s[32];const hn={};s[33]=this.element({parent:i||"root"},v===!0?y:o),hn.image=o.image,hn.w=53,hn.h=25,hn.map=o.sprite,hn.frame="max";const ei=[];if(typeof _o<"u")for(let Be in _o[Symbol.for("config")].props)delete hn[_o[Symbol.for("config")].props[Be]],ei.push(_o[Symbol.for("config")].props[Be]);s[33].populate(hn),v===!0&&(M-=1),i=s[33];const Fn={};Fn.image=o.image,Fn.w=53,Fn.h=25,Fn.map=o.sprite,Fn.frame="max",m=Fn.is||"Sprite";let fn;if(typeof m=="string"){if(fn=l.components&&l.components[m]||h[m],!fn)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fn=m);s[34]=fn.call(null,{props:Fn},s[33],o),s[34][Symbol.for("slots")][0]?(i=s[34][Symbol.for("slots")][0],y=s[34],v=!0):i=s[34][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[32];const $n={};s[35]=this.element({parent:i||"root"},v===!0?y:o),$n.x=63,$n.y=2,s[35].populate($n),v===!0&&(M-=1);const no=l.components&&l.components.Sprite||h.Sprite;i=s[35];const An={};s[36]=this.element({parent:i||"root"},v===!0?y:o),An.image=o.image,An.x=0,An.h=20,An.w=20,An.map=o.sprite,An.frame=o.maxFps[0];const In=[];if(typeof no<"u")for(let Be in no[Symbol.for("config")].props)delete An[no[Symbol.for("config")].props[Be]],In.push(no[Symbol.for("config")].props[Be]);s[36].populate(An),v===!0&&(M-=1),i=s[36];const ot={};ot.image=o.image,ot.x=0,ot.h=20,ot.w=20,ot.map=o.sprite,C=o.maxFps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),ot.frame=C,m=ot.is||"Sprite";let Ve;if(typeof m=="string"){if(Ve=l.components&&l.components[m]||h[m],!Ve)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ve=m);s[37]=Ve.call(null,{props:ot},s[36],o),s[37][Symbol.for("slots")][0]?(i=s[37][Symbol.for("slots")][0],y=s[37],v=!0):i=s[37][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Zt=l.components&&l.components.Sprite||h.Sprite;i=s[35];const wn={};s[38]=this.element({parent:i||"root"},v===!0?y:o),wn.image=o.image,wn.x=18,wn.h=20,wn.w=20,wn.map=o.sprite,wn.frame=o.maxFps[1];const Bn=[];if(typeof Zt<"u")for(let Be in Zt[Symbol.for("config")].props)delete wn[Zt[Symbol.for("config")].props[Be]],Bn.push(Zt[Symbol.for("config")].props[Be]);s[38].populate(wn),v===!0&&(M-=1),i=s[38];const Ct={};Ct.image=o.image,Ct.x=18,Ct.h=20,Ct.w=20,Ct.map=o.sprite,C=o.maxFps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),Ct.frame=C,m=Ct.is||"Sprite";let Ge;if(typeof m=="string"){if(Ge=l.components&&l.components[m]||h[m],!Ge)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ge=m);s[39]=Ge.call(null,{props:Ct},s[38],o),s[39][Symbol.for("slots")][0]?(i=s[39][Symbol.for("slots")][0],y=s[39],v=!0):i=s[39][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const ie=l.components&&l.components.Sprite||h.Sprite;i=s[35];const We={};s[40]=this.element({parent:i||"root"},v===!0?y:o),We.image=o.image,We.x=36,We.h=20,We.w=20,We.map=o.sprite,We.frame=o.maxFps[2];const qe=[];if(typeof ie<"u")for(let Be in ie[Symbol.for("config")].props)delete We[ie[Symbol.for("config")].props[Be]],qe.push(ie[Symbol.for("config")].props[Be]);s[40].populate(We),v===!0&&(M-=1),i=s[40];const Ze={};Ze.image=o.image,Ze.x=36,Ze.h=20,Ze.w=20,Ze.map=o.sprite,C=o.maxFps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),Ze.frame=C,m=Ze.is||"Sprite";let Me;if(typeof m=="string"){if(Me=l.components&&l.components[m]||h[m],!Me)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Me=m);return s[41]=Me.call(null,{props:Ze},s[40],o),s[41][Symbol.for("slots")][0]?(i=s[41][Symbol.for("slots")][0],y=s[41],v=!0):i=s[41][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),s},effects:[function(i,o,l,h,g,x){(typeof skip6>"u"||skip6.indexOf("frame")===-1)&&o[6].set("frame",i.fps[0])},function(i,o,l,h,g,x){o[7][Symbol.for("props")].frame=i.fps[0]},function(i,o,l,h,g,x){(typeof skip8>"u"||skip8.indexOf("frame")===-1)&&o[8].set("frame",i.fps[1])},function(i,o,l,h,g,x){o[9][Symbol.for("props")].frame=i.fps[1]},function(i,o,l,h,g,x){(typeof skip10>"u"||skip10.indexOf("frame")===-1)&&o[10].set("frame",i.fps[2])},function(i,o,l,h,g,x){o[11][Symbol.for("props")].frame=i.fps[2]},function(i,o,l,h,g,x){(typeof skip16>"u"||skip16.indexOf("frame")===-1)&&o[16].set("frame",i.avgFps[0])},function(i,o,l,h,g,x){o[17][Symbol.for("props")].frame=i.avgFps[0]},function(i,o,l,h,g,x){(typeof skip18>"u"||skip18.indexOf("frame")===-1)&&o[18].set("frame",i.avgFps[1])},function(i,o,l,h,g,x){o[19][Symbol.for("props")].frame=i.avgFps[1]},function(i,o,l,h,g,x){(typeof skip20>"u"||skip20.indexOf("frame")===-1)&&o[20].set("frame",i.avgFps[2])},function(i,o,l,h,g,x){o[21][Symbol.for("props")].frame=i.avgFps[2]},function(i,o,l,h,g,x){(typeof skip26>"u"||skip26.indexOf("frame")===-1)&&o[26].set("frame",i.minFps[0])},function(i,o,l,h,g,x){o[27][Symbol.for("props")].frame=i.minFps[0]},function(i,o,l,h,g,x){(typeof skip28>"u"||skip28.indexOf("frame")===-1)&&o[28].set("frame",i.minFps[1])},function(i,o,l,h,g,x){o[29][Symbol.for("props")].frame=i.minFps[1]},function(i,o,l,h,g,x){(typeof skip30>"u"||skip30.indexOf("frame")===-1)&&o[30].set("frame",i.minFps[2])},function(i,o,l,h,g,x){o[31][Symbol.for("props")].frame=i.minFps[2]},function(i,o,l,h,g,x){(typeof skip36>"u"||skip36.indexOf("frame")===-1)&&o[36].set("frame",i.maxFps[0])},function(i,o,l,h,g,x){o[37][Symbol.for("props")].frame=i.maxFps[0]},function(i,o,l,h,g,x){(typeof skip38>"u"||skip38.indexOf("frame")===-1)&&o[38].set("frame",i.maxFps[1])},function(i,o,l,h,g,x){o[39][Symbol.for("props")].frame=i.maxFps[1]},function(i,o,l,h,g,x){(typeof skip40>"u"||skip40.indexOf("frame")===-1)&&o[40].set("frame",i.maxFps[2])},function(i,o,l,h,g,x){o[41][Symbol.for("props")].frame=i.maxFps[2]}],context:{}},state(){return{image:YR,sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready(){}}}),ZR=()=>({Circle:XR(),RouterView:qR(),Sprite:KR(),FPScounter:QR()}),JR={name:"log",plugin(){return KC("App")}},xg={log:JR},OT=(f,i="",o={})=>{let l;if(typeof i=="object"?o=i:l=i,typeof f=="function"){if(l===void 0)throw Error("Error registering plugin: name is required for plugin");xg[l]={plugin:f,options:o}}else f.plugin&&OT(f.plugin,l||f.name,o)};let H0;const MC=f=>{throw new Error(`Parameter ${f} is required`)},hl=(f=MC("name"),i=MC("config"))=>{let o;const l=function(g,x,w,s){this.componentId=g_(f),this[xe.effects]=[],this.lifecycle=Object.assign(Object.create(b_),{component:this,previous:null,current:null}),this.parent=w,this.rootParent=s,this[xe.holder]=x,this[xe.id]=y_(),this[xe.props]=Xu(g.props||{},Zo.get("reactivityMode")),this[xe.timeouts]=[],this[xe.intervals]=[],this[xe.originalState]=i.state&&typeof i.state=="function"&&i.state.apply(this)||{},this[xe.originalState].hasFocus=!1,this[xe.state]=Xu(this[xe.originalState],Zo.get("reactivityMode")),this.lifecycle.state="init",this[xe.children]=i.code.render.apply(Eg,[x,this,i,H0,bh,Es,cn])||[],this[xe.wrapper]=this[xe.children][0],this[xe.slots]=this[xe.children].filter(C=>C[xe.isSlot]),i.hooks&&(i.hooks.frameTick&&sd.on("frameTick",(C,y)=>tg("frameTick",this[xe.identifier],this,[y])),i.hooks.idle&&sd.on("idle",()=>{tg("idle",this[xe.identifier],this)}),i.hooks.attach&&this[xe.wrapper].node.on("inBounds",()=>{this.lifecycle.state="attach"}),i.hooks.detach&&this[xe.wrapper].node.on("outOfBounds",(C,{previous:y})=>{y>0&&(this.lifecycle.state="detach")}),i.hooks.enter&&this[xe.wrapper].node.on("inViewport",()=>{this.lifecycle.state="enter"}),i.hooks.exit&&this[xe.wrapper].node.on("outOfBounds",()=>{this.lifecycle.state="exit"}));const m=i.code.effects;for(let C=0;C<m.length;C++){const y=()=>{m[C](this,this[xe.children],i,H0,s,bh)};this[xe.effects].push(y),bh(y)}if(this[xe.watchers]){const C=Object.keys(this[xe.watchers]),y=C.length;for(let v=0;v<y;v++){let M=this,b=C[v];const _=b;if(b.indexOf(".")>-1){const z=b.split(".");b=z.pop();for(let B=0;B<z.length;B++)M=M[z[B]]}let U=this[b];const F=(z=!1)=>{const B=M[b];(U!==B||z===!0)&&(this[xe.watchers][_].apply(this,[B,U]),U=B)};this[xe.effects].push(F),bh(F)}}return setTimeout(()=>this.lifecycle.state="ready"),this},h=(g={},x,w,s)=>{if(bs[xe.launched]===!1){const m=Object.keys(xg),C=m.length,y={};for(let v=0;v<C;v++){const M=m[v],b=`$${M}`;b in bs&&cn.warn(`"${M}" (this.${b}) already exists as a property or plugin on the Base Component. You may be overwriting built-in functionality. Proceed with care!`);const _=xg[M];y[b]={value:Object.defineProperties(_.plugin(_.options),PT),writable:!1,enumerable:!0,configurable:!0}}Object.defineProperties(bs,y);for(const v in y)Object.defineProperties(bs[v],y),delete bs[v][v];H0=ZR(),bs[xe.launched]=!0}return o===void 0&&(cn.debug(`Setting up ${f} component`),o=WR(Object.create(bs),i)),i.code===void 0&&(cn.debug(`Generating code for ${f} component`),i.code=u_.call(i,l_(i.template))),l.call(Object.create(o),g,x,w,s)};return h[Symbol.for("config")]=i,h[xe.isComponent]=!0,h},eL=f=>{const i={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};f.hooks=f.hooks||{};let o,l,h;return f.hooks[xe.destroy]=function(){document.removeEventListener("keydown",o),document.removeEventListener("keyup",l)},f.hooks[xe.init]=function(){this.$announcer.toggle(Zo.get("announcer",!1));const g={...i,...Zo.get("keymap",{})};o=async x=>{const w=g[x.key]||g[x.keyCode]||x.key||x.keyCode;this[xe.inputEvents]!==void 0&&this[xe.inputEvents].intercept!==void 0&&(x=await this[xe.inputEvents].intercept.call(this,x),!(x instanceof KeyboardEvent))||(il.input(w,x),clearTimeout(h),h=setTimeout(()=>{il.hold=!0},Zo.get("holdTimeout",wT)))},l=x=>{const w=vg.get(x.code);w!==void 0&&typeof w=="function"&&(vg.delete(x.code),w()),clearTimeout(h),il.hold=!1},document.addEventListener("keydown",o),document.addEventListener("keyup",l),setTimeout(()=>il.set(this))},hl("App",f)},tt={Component:hl,Application:eL,Launch:pR,Plugin:OT},_C=f=>new Promise((i,o)=>{const l=new XMLHttpRequest;l.onreadystatechange=function(){l.readyState==XMLHttpRequest.DONE&&(l.status===0||l.status===200?i(JSON.parse(l.responseText)):o(l.statusText))},l.open("GET",f),l.send(null)}),tL={name:"language",plugin(f={}){let i={},o={};const l=Xu({language:"",loaded:0},Zo.get("reactivityMode"),!0),h=s=>{const m=Object.keys(i).length===0?"No translations loaded. Please load a file with translations or specify a translations object manually":s in i?!1:`Language ${s} not available in the loaded translations`;m?(cn.warn(m),l.language=s):g(s).then(()=>{l.language=s})},g=s=>new Promise(m=>{const C=i[s];typeof C=="object"?(o=C,m()):typeof C=="string"&&_C(C).then(y=>{i[s]=y,o=y,m()}).catch(y=>{cn.error(y)})}),x=s=>_C(s).then(m=>{w(m)}).catch(m=>{cn.error(m)}),w=s=>{i=s,g(l.language).then(()=>{l.loaded++})};return"file"in f?x(f.file).then(()=>{"language"in f&&h(f.language)}):"language"in f&&h(f.language),{translate(s){l.language,l.loaded;let m=[...arguments].slice(1);return m.length===0?o&&o[s]||s:(m.length===1&&typeof m[0]=="object"&&(m=m.pop()),Object.keys(Array.isArray(m)?Object.assign({},m):m).reduce((C,y)=>C.replace(new RegExp("{\\s?"+y+"\\s?}","g"),m[y]),o&&o[s]||s))},get language(){return l.language},set(s){h(s)},translations(s){w(s)},load(s){return x(s)}}}},nL=(f,i,o)=>{const l=o.split(".");for(let h=0;h<l.length;h++){const g=l[h];if(f!==null&&g in f)f=f[g],i=i!==null&&g in i?i[g]:null;else if(i!==null&&g in i)i=i[g],f=i;else{f=void 0;break}}return f},NT={name:"theme",plugin(f={}){let i={};const o=Xu({current:"default"},Zo.get("reactivityMode"),!0);let l={},h=null;return"themes"in f?(l=f.themes,o.current=f.current||"default",h=f.base||"default"):l={default:f},{get(g,x){if(o.current,i[g]!==void 0)return i[g];const w=nL(l[o.current],l[h]||null,g);return w!==void 0?(i[g]=w,w):x},set(g){g in l?(i={},o.current=g):cn.warn(`Theme ${g} not found`)}}}},G0=f=>new URLSearchParams(window.location.search).get(f),Iu={sky:{test(){return navigator.userAgent.indexOf("WPE Sky")>-1||G0("keymapping")==="sky"},mapping:{Escape:"back",27:"back"}},webos:{test(){return navigator.userAgent.indexOf("WebOS")>-1||G0("keymapping")==="webos"},mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test(){return navigator.userAgent.indexOf("Tizen")>-1||G0("keymapping")==="tizen"},mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},oL=()=>{let f={};return Object.keys(Iu).forEach(i=>{if(Iu[i].test&&typeof Iu[i].test=="function"&&Iu[i].test()===!0){f=Iu[i].mapping;return}}),f},iL=tt.Component("PortalItem",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=370,m.h=320,m.scale={transition:o.hasFocus?1.1:1},m.color=o.backgroundColor,m.effects=[{type:"radius",props:{radius:6}}],s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.x=30,C.y=30,C.content=o.number,C.size=84,C.color=o.fontColor,C.__textnode=!0,s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.x=30,y.y=140,y.content=o.title,y.size=42,y.font="raleway",y.color=o.fontColor,y.letterspacing=2,y.__textnode=!0,s[2].populate(y),i=s[0];const v={};return s[3]=this.element({parent:i||"root"},o),v.x=30,v.y=200,v.content=o.description,v.maxwidth=300,v.size=28,v.color=o.fontColor,v.lineheight=32,v.__textnode=!0,s[3].populate(v),s},effects:[function(i,o,l,h,g,x){o[0].set("scale",{transition:i.hasFocus?1.1:1})},function(i,o,l,h,g,x){o[0].set("color",i.backgroundColor)},function(i,o,l,h,g,x){o[0].set("effects",[{type:"radius",props:{radius:6}}])},function(i,o,l,h,g,x){o[1].set("content",i.number)},function(i,o,l,h,g,x){o[1].set("color",i.fontColor)},function(i,o,l,h,g,x){o[2].set("content",i.title)},function(i,o,l,h,g,x){o[2].set("color",i.fontColor)},function(i,o,l,h,g,x){o[3].set("content",i.description)},function(i,o,l,h,g,x){o[3].set("color",i.fontColor)}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),rL=tt.Component("PortalRow",{components:{PortalItem:iL},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1;const M={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(M),i=s[0];const b={};s[1]=this.element({parent:i||"root"},v===!0?y:o),b.alpha={transition:{value:o.itemOffset<240?1:0,duration:200}},s[1].populate(b),i=s[1];const _={};s[2]=this.element({parent:i||"root"},v===!0?y:o),_.content=o.title,_.x=60,_.__textnode=!0,s[2].populate(_),i=s[1];const U={};s[3]=this.element({parent:i||"root"},v===!0?y:o),U.y=50,U.x=60,U.h=1,U.w=1800,U.color="0xe8d7f9ff",s[3].populate(U),i=s[0];const F={};s[4]=this.element({parent:i||"root"},v===!0?y:o),F.y=100,F.x={transition:o.rowOffset},s[4].populate(F),i=s[4];const z=[];let B,G;const X=(I=[],q,ee)=>{const ae=x(I),ne=new Set;let Y=ae.length;const Z={};for(B=Z.from||0,G=("to"in Z)?Z.to:ae.length;Y--;){const we=ae[Y];Y<G&&Y>=B&&ne.add(""+we.id)}let j=ee.length;for(;j--;)if(ne.has(ee[j])===!1){const we=ee[j];q[5][we]&&q[5][we].destroy(),delete q[5][we],q[6][we]&&q[6][we].destroy(),delete q[6][we]}ee.length=0;const fe=ae.length,he=[];for(let we=0;we<fe;we++){if(we<B||we>=G)continue;const ge=Object.create(o);i=q[4],ge.item=ae[we],ge.index=we,ge.key=""+ge.item.id,ee.push(ge.key);const be=l.components&&l.components.PortalItem||h.PortalItem;q[5]===void 0&&(q[5]={});const Ie={};q[5][ge.key]===void 0&&(q[5][ge.key]=this.element({parent:i||"root"},v===!0?y:o)),Ie.x={transition:{value:ge.itemOffset+ge.index*430,delay:50*(ge.index%4),duration:500}},Ie.title=ge.item.title,Ie.description=ge.item.description,Ie.id=ge.item.id,Ie.index=ge.index,Ie.ref="item"+ge.index;const V=[];if(typeof be<"u")for(let me in be[Symbol.for("config")].props)delete Ie[be[Symbol.for("config")].props[me]],V.push(be[Symbol.for("config")].props[me]);q[5][ge.key].nodeId===void 0&&q[5][ge.key].populate(Ie),q[6]===void 0&&(q[6]={}),i=q[5][ge.key];const De={};if(q[6][ge.key]===void 0){C={transition:{value:ge.itemOffset+ge.index*430,delay:50*(ge.index%4),duration:500}},Array.isArray(C)===!0&&(C=x(C).slice(0)),De.x=C,De.title=ge.item.title,De.description=ge.item.description,De.id=ge.item.id,De.index=ge.index,C="item"+ge.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),De.ref=C,m=De.is||"PortalItem";let me;if(typeof m=="string"){if(me=l.components&&l.components[m]||h[m],!me)throw new Error('Component "PortalItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(me=m);q[6][ge.key]=me.call(null,{props:De},q[5][ge.key],o),q[6][ge.key][Symbol.for("slots")][0]?(i=q[6][ge.key][Symbol.for("slots")][0],y=q[6][ge.key],v=!0):i=q[6][ge.key][Symbol.for("children")][0]}let Se=()=>{(typeof V>"u"||V.indexOf("ref")===-1)&&q[5][ge.key].set("ref","item"+ge.index)};g(Se,null),he.push(Se),o[Symbol.for("effects")].push(Se),q[6][ge.key][Symbol.for("props")].ref="item"+ge.index}return he};let Q;const W=()=>{o[Symbol.for("removeGlobalEffects")](Q),Q=null,Q=X(o.items,s,z)};o[Symbol.for("effects")].push(W),g(W,["items"]);const te=()=>{o.itemOffset;for(let I=0;I<o.items.length;I++){if(I<B||I>=G)continue;const q={};q.index=I,q.item=o.items[I],q.key=q.item.id,(typeof skip5>"u"||skip5.indexOf("x")===-1)&&s[5][q.key].set("x",{transition:{value:o.itemOffset+q.index*430,delay:50*(q.index%4),duration:500}})}};o[Symbol.for("effects")].push(te),g(te);const de=()=>{o.itemOffset;for(let I=0;I<o.items.length;I++){if(I<B||I>=G)continue;const q={};q.index=I,q.item=o.items[I],q.key=q.item.id,s[6][q.key][Symbol.for("props")].x={transition:{value:o.itemOffset+q.index*430,delay:50*(q.index%4),duration:500}}}};return o[Symbol.for("effects")].push(de),g(de),s},effects:[function(i,o,l,h,g,x){o[1].set("alpha",{transition:{value:i.itemOffset<240?1:0,duration:200}})},function(i,o,l,h,g,x){o[4].set("x",{transition:i.rowOffset})}],context:{}},props:["title","items"],state(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(f){const i=this.$select(`item${f}`);i&&i.$focus&&(i.$focus(),f<1?this.rowOffset=60:f>this.items.length-2?this.rowOffset=60-(this.items.length-2)*430+430:this.rowOffset=60-f*430+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),UT=tt.Component("SourceInfo",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.x=1860,m.y={transition:{value:1060+o.offsetY,delay:1e3,duration:300,easing:"ease-out"}},m.alpha={transition:{value:o.alpha,delay:1e3,duration:300,easing:"ease-out"}},m.w=480,m.h=100,m.mount=1,m.color="{top: '0x000000dd', bottom: '0x000000ff'}",m.effects=[{type:"radius",props:{radius:10}}],s[0].populate(m),i=s[0];const C={};return s[1]=this.element({parent:i||"root"},o),C.y=18,C.x=20,C.size=26,C.maxwidth=440,C.align="center",C.lineheight=32,C.content='Press "U" to check out the source code of this example on GitHub',C.__textnode=!0,s[1].populate(C),s},effects:[function(i,o,l,h,g,x){o[0].set("y",{transition:{value:1060+i.offsetY,delay:1e3,duration:300,easing:"ease-out"}})},function(i,o,l,h,g,x){o[0].set("alpha",{transition:{value:i.alpha,delay:1e3,duration:300,easing:"ease-out"}})},function(i,o,l,h,g,x){o[0].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state(){return{offsetY:15,alpha:0}},hooks:{ready(){this.offsetY=0,this.alpha=1}}}),sL="1.14.0",aL={version:sL},lL=tt.Component("Portal",{components:{PortalRow:rL,SourceInfo:UT},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),b.w=1920,b.h=1080,b.color="{top: '0x44037aff', bottom: '0x240244ff'}",s[0].populate(b),v===!0&&(M-=1);const _=l.components&&l.components.PortalRow||h.PortalRow;i=s[0];const U={};s[1]=this.element({parent:i||"root"},v===!0?y:o),U.mount="{y: 0.5}",U.h=500,U.y={transition:-o.rowFocused*420+550},U.title="Demos",U.items=o.demo,U.ref="row0";const F=[];if(typeof _<"u")for(let be in _[Symbol.for("config")].props)delete U[_[Symbol.for("config")].props[be]],F.push(_[Symbol.for("config")].props[be]);s[1].populate(U),v===!0&&(M-=1),i=s[1];const z={};z.mount="{y: 0.5}",z.h=500,C={transition:-o.rowFocused*420+550},Array.isArray(C)===!0&&(C=x(C).slice(0)),z.y=C,z.title="Demos",z.items=o.demo,z.ref="row0",m=z.is||"PortalRow";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);s[2]=B.call(null,{props:z},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],y=s[2],v=!0):i=s[2][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const G=l.components&&l.components.PortalRow||h.PortalRow;i=s[0];const X={};s[3]=this.element({parent:i||"root"},v===!0?y:o),X.mount="{y: 0.5}",X.h=500,X.y={transition:-o.rowFocused*420+1100},X.title="Examples and tests",X.items=o.example,X.ref="row1";const Q=[];if(typeof G<"u")for(let be in G[Symbol.for("config")].props)delete X[G[Symbol.for("config")].props[be]],Q.push(G[Symbol.for("config")].props[be]);s[3].populate(X),v===!0&&(M-=1),i=s[3];const W={};W.mount="{y: 0.5}",W.h=500,C={transition:-o.rowFocused*420+1100},Array.isArray(C)===!0&&(C=x(C).slice(0)),W.y=C,W.title="Examples and tests",W.items=o.example,W.ref="row1",m=W.is||"PortalRow";let te;if(typeof m=="string"){if(te=l.components&&l.components[m]||h[m],!te)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(te=m);s[4]=te.call(null,{props:W},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],y=s[4],v=!0):i=s[4][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const de=l.components&&l.components.PortalRow||h.PortalRow;i=s[0];const I={};s[5]=this.element({parent:i||"root"},v===!0?y:o),I.mount="{y: 0.5}",I.h=500,I.y={transition:-o.rowFocused*420+1650},I.title="Benchmarks and stress tests",I.items=o.benchmark,I.ref="row2";const q=[];if(typeof de<"u")for(let be in de[Symbol.for("config")].props)delete I[de[Symbol.for("config")].props[be]],q.push(de[Symbol.for("config")].props[be]);s[5].populate(I),v===!0&&(M-=1),i=s[5];const ee={};ee.mount="{y: 0.5}",ee.h=500,C={transition:-o.rowFocused*420+1650},Array.isArray(C)===!0&&(C=x(C).slice(0)),ee.y=C,ee.title="Benchmarks and stress tests",ee.items=o.benchmark,ee.ref="row2",m=ee.is||"PortalRow";let ae;if(typeof m=="string"){if(ae=l.components&&l.components[m]||h[m],!ae)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ae=m);s[6]=ae.call(null,{props:ee},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],y=s[6],v=!0):i=s[6][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[0];const ne={};s[7]=this.element({parent:i||"root"},v===!0?y:o),ne.w=1920,ne.h=200,ne.color="0x44037aff",s[7].populate(ne),v===!0&&(M-=1),i=s[7];const Y={};s[8]=this.element({parent:i||"root"},v===!0?y:o),Y.w=1920,Y.h=70,Y.y=200,Y.color="{top: '0x44037aff'}",s[8].populate(Y),v===!0&&(M-=1),i=s[7];const Z={};s[9]=this.element({parent:i||"root"},v===!0?y:o),Z.y={transition:{value:80-o.logoOffset,duration:400}},s[9].populate(Z),v===!0&&(M-=1),i=s[9];const j={};s[10]=this.element({parent:i||"root"},v===!0?y:o),j.src="assets/blits-logo-full.png",j.w=200,j.h=112,j.x=60,s[10].populate(j),v===!0&&(M-=1),i=s[9];const fe={};s[11]=this.element({parent:i||"root"},v===!0?y:o),fe.w=2,fe.h=120,fe.y="-10",fe.color="0xffffff80",fe.x=300,s[11].populate(fe),v===!0&&(M-=1),i=s[9];const he={};s[12]=this.element({parent:i||"root"},v===!0?y:o),he.x=320,he.y=16,s[12].populate(he),v===!0&&(M-=1),i=s[12];const we={};s[13]=this.element({parent:i||"root"},v===!0?y:o),we.y=0,we.size=36,we.content="Example App",we.__textnode=!0,s[13].populate(we),v===!0&&(M-=1),i=s[12];const ge={};return s[14]=this.element({parent:i||"root"},v===!0?y:o),ge.y=50,ge.size=24,ge.content="v"+o.version,ge.__textnode=!0,s[14].populate(ge),v===!0&&(M-=1),s},effects:[function(i,o,l,h,g,x){(typeof skip1>"u"||skip1.indexOf("y")===-1)&&o[1].set("y",{transition:-i.rowFocused*420+550})},function(i,o,l,h,g,x){o[2][Symbol.for("props")].y={transition:-i.rowFocused*420+550}},function(i,o,l,h,g,x){(typeof skip3>"u"||skip3.indexOf("y")===-1)&&o[3].set("y",{transition:-i.rowFocused*420+1100})},function(i,o,l,h,g,x){o[4][Symbol.for("props")].y={transition:-i.rowFocused*420+1100}},function(i,o,l,h,g,x){(typeof skip5>"u"||skip5.indexOf("y")===-1)&&o[5].set("y",{transition:-i.rowFocused*420+1650})},function(i,o,l,h,g,x){o[6][Symbol.for("props")].y={transition:-i.rowFocused*420+1650}},function(i,o,l,h,g,x){o[9].set("y",{transition:{value:80-i.logoOffset,duration:400}})}],context:{}},state(){return{version:aL.version,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"},{title:"Router Hooks",id:"examples/router-hooks",description:"Example of router before hook"},{title:"Image resizing",id:"examples/resize",description:'Using the "fit" syntax for resizing images on the fly'},{title:"Translations",id:"examples/translations",description:"Language Plugin for internationalization"},{title:"Firebolt",id:"examples/firebolt",description:"Example Firebolt Integration"},{title:"Keycodes",id:"examples/keycodes",description:"Find the correct keycode mappings for your device"},{title:"Special Chars",id:"examples/special-characters",description:"Accents and special characters with MSDF fonts"},{title:"Layout",id:"examples/layout",description:'Using the built-in "Layout" Component'},{title:"Announcer",id:"examples/announcer",description:'Using the built-in "Announcer" plugin'}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready(){this.logoOffset=0,this.$trigger("rowFocused")}},watch:{rowFocused(f){const i=this.$select(`row${f}`);i&&i.$focus&&i.$focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),uL=tt.Component("Letter",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=o.w,C.h={transition:{value:410+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}},C.color="0xe6e6e6ff",s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.w=o.w,y.h=280,y.src=o.image,y.y={transition:{value:400+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}},s[2].populate(y),i=s[0];const v={};return s[3]=this.element({parent:i||"root"},o),v.w=o.w,v.color="0xe6e6e6ff",v.h={transition:{value:500-o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}},v.y={transition:{value:660+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}},s[3].populate(v),s},effects:[function(i,o,l,h,g,x){o[1].set("h",{transition:{value:410+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}})},function(i,o,l,h,g,x){o[2].set("src",i.image)},function(i,o,l,h,g,x){o[2].set("y",{transition:{value:400+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}})},function(i,o,l,h,g,x){o[3].set("h",{transition:{value:500-i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}})},function(i,o,l,h,g,x){o[3].set("y",{transition:{value:660+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return this.letter,`assets/${this.letter}.png`}},state(){return{offset:this.direction==="up"?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),fL=tt.Component("Intro",{components:{Letter:uL},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),M.w=1920,M.h=1080,M.src="assets/background.jpg",s[0].populate(M),y===!0&&(v-=1);const b=l.components&&l.components.Letter||h.Letter;i=s[0];const _={};s[1]=this.element({parent:i||"root"},y===!0?C:o),_.letter="l",_.w=294;const U=[];if(typeof b<"u")for(let Qe in b[Symbol.for("config")].props)delete _[b[Symbol.for("config")].props[Qe]],U.push(b[Symbol.for("config")].props[Qe]);s[1].populate(_),y===!0&&(v-=1),i=s[1];const F={};F.letter="l",F.w=294,m=F.is||"Letter";let z;if(typeof m=="string"){if(z=l.components&&l.components[m]||h[m],!z)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[2]=z.call(null,{props:F},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],C=s[2],y=!0):i=s[2][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const B=l.components&&l.components.Letter||h.Letter;i=s[0];const G={};s[3]=this.element({parent:i||"root"},y===!0?C:o),G.letter="i-1",G.w=128,G.x=294,G.direction="up",G.delay=50;const X=[];if(typeof B<"u")for(let Qe in B[Symbol.for("config")].props)delete G[B[Symbol.for("config")].props[Qe]],X.push(B[Symbol.for("config")].props[Qe]);s[3].populate(G),y===!0&&(v-=1),i=s[3];const Q={};Q.letter="i-1",Q.w=128,Q.x=294,Q.direction="up",Q.delay=50,m=Q.is||"Letter";let W;if(typeof m=="string"){if(W=l.components&&l.components[m]||h[m],!W)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);s[4]=W.call(null,{props:Q},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],C=s[4],y=!0):i=s[4][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const te=l.components&&l.components.Letter||h.Letter;i=s[0];const de={};s[5]=this.element({parent:i||"root"},y===!0?C:o),de.letter="g-1",de.w=205,de.x=422,de.delay=100;const I=[];if(typeof te<"u")for(let Qe in te[Symbol.for("config")].props)delete de[te[Symbol.for("config")].props[Qe]],I.push(te[Symbol.for("config")].props[Qe]);s[5].populate(de),y===!0&&(v-=1),i=s[5];const q={};q.letter="g-1",q.w=205,q.x=422,q.delay=100,m=q.is||"Letter";let ee;if(typeof m=="string"){if(ee=l.components&&l.components[m]||h[m],!ee)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);s[6]=ee.call(null,{props:q},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],C=s[6],y=!0):i=s[6][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const ae=l.components&&l.components.Letter||h.Letter;i=s[0];const ne={};s[7]=this.element({parent:i||"root"},y===!0?C:o),ne.letter="h",ne.w=224,ne.x=627,ne.direction="up",ne.delay=150;const Y=[];if(typeof ae<"u")for(let Qe in ae[Symbol.for("config")].props)delete ne[ae[Symbol.for("config")].props[Qe]],Y.push(ae[Symbol.for("config")].props[Qe]);s[7].populate(ne),y===!0&&(v-=1),i=s[7];const Z={};Z.letter="h",Z.w=224,Z.x=627,Z.direction="up",Z.delay=150,m=Z.is||"Letter";let j;if(typeof m=="string"){if(j=l.components&&l.components[m]||h[m],!j)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(j=m);s[8]=j.call(null,{props:Z},s[7],o),s[8][Symbol.for("slots")][0]?(i=s[8][Symbol.for("slots")][0],C=s[8],y=!0):i=s[8][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const fe=l.components&&l.components.Letter||h.Letter;i=s[0];const he={};s[9]=this.element({parent:i||"root"},y===!0?C:o),he.letter="t",he.w=190,he.x=851,he.delay=200;const we=[];if(typeof fe<"u")for(let Qe in fe[Symbol.for("config")].props)delete he[fe[Symbol.for("config")].props[Qe]],we.push(fe[Symbol.for("config")].props[Qe]);s[9].populate(he),y===!0&&(v-=1),i=s[9];const ge={};ge.letter="t",ge.w=190,ge.x=851,ge.delay=200,m=ge.is||"Letter";let be;if(typeof m=="string"){if(be=l.components&&l.components[m]||h[m],!be)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(be=m);s[10]=be.call(null,{props:ge},s[9],o),s[10][Symbol.for("slots")][0]?(i=s[10][Symbol.for("slots")][0],C=s[10],y=!0):i=s[10][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const Ie=l.components&&l.components.Letter||h.Letter;i=s[0];const V={};s[11]=this.element({parent:i||"root"},y===!0?C:o),V.letter="n-1",V.w=221,V.x=1041,V.direction="up",V.delay=250;const De=[];if(typeof Ie<"u")for(let Qe in Ie[Symbol.for("config")].props)delete V[Ie[Symbol.for("config")].props[Qe]],De.push(Ie[Symbol.for("config")].props[Qe]);s[11].populate(V),y===!0&&(v-=1),i=s[11];const Se={};Se.letter="n-1",Se.w=221,Se.x=1041,Se.direction="up",Se.delay=250,m=Se.is||"Letter";let me;if(typeof m=="string"){if(me=l.components&&l.components[m]||h[m],!me)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(me=m);s[12]=me.call(null,{props:Se},s[11],o),s[12][Symbol.for("slots")][0]?(i=s[12][Symbol.for("slots")][0],C=s[12],y=!0):i=s[12][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const Re=l.components&&l.components.Letter||h.Letter;i=s[0];const Ne={};s[13]=this.element({parent:i||"root"},y===!0?C:o),Ne.letter="i-2",Ne.w=115,Ne.x=1262,Ne.delay=300;const $e=[];if(typeof Re<"u")for(let Qe in Re[Symbol.for("config")].props)delete Ne[Re[Symbol.for("config")].props[Qe]],$e.push(Re[Symbol.for("config")].props[Qe]);s[13].populate(Ne),y===!0&&(v-=1),i=s[13];const Pe={};Pe.letter="i-2",Pe.w=115,Pe.x=1262,Pe.delay=300,m=Pe.is||"Letter";let ve;if(typeof m=="string"){if(ve=l.components&&l.components[m]||h[m],!ve)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ve=m);s[14]=ve.call(null,{props:Pe},s[13],o),s[14][Symbol.for("slots")][0]?(i=s[14][Symbol.for("slots")][0],C=s[14],y=!0):i=s[14][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const Ye=l.components&&l.components.Letter||h.Letter;i=s[0];const it={};s[15]=this.element({parent:i||"root"},y===!0?C:o),it.letter="n-2",it.w=219,it.x=1377,it.direction="up",it.delay=350;const Ke=[];if(typeof Ye<"u")for(let Qe in Ye[Symbol.for("config")].props)delete it[Ye[Symbol.for("config")].props[Qe]],Ke.push(Ye[Symbol.for("config")].props[Qe]);s[15].populate(it),y===!0&&(v-=1),i=s[15];const lt={};lt.letter="n-2",lt.w=219,lt.x=1377,lt.direction="up",lt.delay=350,m=lt.is||"Letter";let St;if(typeof m=="string"){if(St=l.components&&l.components[m]||h[m],!St)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(St=m);s[16]=St.call(null,{props:lt},s[15],o),s[16][Symbol.for("slots")][0]?(i=s[16][Symbol.for("slots")][0],C=s[16],y=!0):i=s[16][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const ft=l.components&&l.components.Letter||h.Letter;i=s[0];const Tt={};s[17]=this.element({parent:i||"root"},y===!0?C:o),Tt.letter="g-2",Tt.w=324,Tt.x=1596,Tt.direction="up",Tt.delay=400;const je=[];if(typeof ft<"u")for(let Qe in ft[Symbol.for("config")].props)delete Tt[ft[Symbol.for("config")].props[Qe]],je.push(ft[Symbol.for("config")].props[Qe]);s[17].populate(Tt),y===!0&&(v-=1),i=s[17];const Dt={};Dt.letter="g-2",Dt.w=324,Dt.x=1596,Dt.direction="up",Dt.delay=400,m=Dt.is||"Letter";let wt;if(typeof m=="string"){if(wt=l.components&&l.components[m]||h[m],!wt)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(wt=m);return s[18]=wt.call(null,{props:Dt},s[17],o),s[18][Symbol.for("slots")][0]?(i=s[18][Symbol.for("slots")][0],C=s[18],y=!0):i=s[18][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),s},effects:[],context:{}}}),cL=tt.Component("Toggle",{code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),b.w=100,b.h=50,b.y=5,b.color=o.bgColor,b.effects=[{type:"radius",props:{radius:25}}],s[0].populate(b),v===!0&&(M-=1);const _=l.components&&l.components.Circle||h.Circle;i=s[0];const U={};s[1]=this.element({parent:i||"root"},v===!0?y:o),U.x={transition:o.on?0:50},U.size=50;const F=[];if(typeof _<"u")for(let G in _[Symbol.for("config")].props)delete U[_[Symbol.for("config")].props[G]],F.push(_[Symbol.for("config")].props[G]);s[1].populate(U),v===!0&&(M-=1),i=s[1];const z={};C={transition:o.on?0:50},Array.isArray(C)===!0&&(C=x(C).slice(0)),z.x=C,z.size=50,C=o.primaryColor,Array.isArray(C)===!0&&(C=x(C).slice(0)),z.color=C,m=z.is||"Circle";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);return s[2]=B.call(null,{props:z},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],y=s[2],v=!0):i=s[2][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),s},effects:[function(i,o,l,h,g,x){o[0].set("color",i.bgColor)},function(i,o,l,h,g,x){o[0].set("effects",[{type:"radius",props:{radius:25}}])},function(i,o,l,h,g,x){(typeof skip1>"u"||skip1.indexOf("x")===-1)&&o[1].set("x",{transition:i.on?0:50})},function(i,o,l,h,g,x){o[2][Symbol.for("props")].x={transition:i.on?0:50}},function(i,o,l,h,g,x){o[2][Symbol.for("props")].color=i.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),hL=tt.Component("Bar",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w={value:o.w,duration:o.duration},m.h={value:o.h,duration:o.duration},m.color=o.bgColor,m.x=o.index*(o.w+o.w/4),m.effects=[{type:"radius",props:{radius:10}}],s[0].populate(m),i=s[0];const C={};return s[1]=this.element({parent:i||"root"},o),C.w=o.w,C.y={transition:{value:o.h-o.innerH,duration:o.duration}},C.h={transition:{value:o.innerH,duration:o.duration}},C.color=o.primaryColor,C.effects=[{type:"radius",props:{radius:10}}],s[1].populate(C),s},effects:[function(i,o,l,h,g,x){o[0].set("w",{value:i.w,duration:i.duration})},function(i,o,l,h,g,x){o[0].set("h",{value:i.h,duration:i.duration})},function(i,o,l,h,g,x){o[0].set("color",i.bgColor)},function(i,o,l,h,g,x){o[0].set("x",i.index*(i.w+i.w/4))},function(i,o,l,h,g,x){o[0].set("effects",[{type:"radius",props:{radius:10}}])},function(i,o,l,h,g,x){o[1].set("w",i.w)},function(i,o,l,h,g,x){o[1].set("y",{transition:{value:i.h-i.innerH,duration:i.duration}})},function(i,o,l,h,g,x){o[1].set("h",{transition:{value:i.innerH,duration:i.duration}})},function(i,o,l,h,g,x){o[1].set("color",i.primaryColor)},function(i,o,l,h,g,x){o[1].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state(){return{h:200,innerH:0,duration:400}},hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size,this.size==="large"?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),dL=tt.Component("Theming",{components:{Bar:hL,Toggle:cL},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),b.w=1920,b.h=1080,b.color={transition:o.$colors.get("bg")},s[0].populate(b),v===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},v===!0?y:o),_.y=1020,_.x=1160,_.size=28,_.color=o.$colors.get("color4"),_.content='Use "up", "down", "left" and "right" to change the appearance',_.__textnode=!0,s[1].populate(_),v===!0&&(M-=1),i=s[0];const U={};s[2]=this.element({parent:i||"root"},v===!0?y:o),U.x={transition:(1920-o.$sizes.get("w"))/2},U.y={transition:(1080-o.$sizes.get("h"))/2},s[2].populate(U),v===!0&&(M-=1),i=s[2];const F={};s[3]=this.element({parent:i||"root"},v===!0?y:o),F.x="-250",F.y="-100",F.src="assets/shadow.png",F.w=1e3,F.h=900,F.alpha=.5,s[3].populate(F),v===!0&&(M-=1),i=s[2];const z={};s[4]=this.element({parent:i||"root"},v===!0?y:o),z.w={transition:o.$sizes.get("w")},z.h={transition:o.$sizes.get("h")},z.color=o.$colors.get("color1"),z.effects=[{type:"radius",props:{radius:o.radius}}],s[4].populate(z),v===!0&&(M-=1),i=s[4];const B={};s[5]=this.element({parent:i||"root"},v===!0?y:o),B.w={transition:o.$sizes.get("w")},B.h=100,B.color=o.$colors.get("color2"),B.effects=[{type:"radius",props:{radius:o.radius}}],s[5].populate(B),v===!0&&(M-=1),i=s[4];const G={};s[6]=this.element({parent:i||"root"},v===!0?y:o),G.w={transition:o.$sizes.get("w")},G.h=80,G.y=20,G.color=o.$colors.get("color2"),s[6].populate(G),v===!0&&(M-=1),i=s[4];const X={};s[7]=this.element({parent:i||"root"},v===!0?y:o),X.content=o.text,X.color=o.$colors.get("color3"),X.size=28,X.x=20,X.y=14,X.__textnode=!0,s[7].populate(X),v===!0&&(M-=1);const Q=l.components&&l.components.Toggle||h.Toggle;i=s[4];const W={};s[8]=this.element({parent:i||"root"},v===!0?y:o),W.x={transition:o.$sizes.get("w")-120},W.on=o.mode==="dark",W.bgColor=o.$colors.get("color1"),W.primaryColor="#22c55e";const te=[];if(typeof Q<"u")for(let je in Q[Symbol.for("config")].props)delete W[Q[Symbol.for("config")].props[je]],te.push(Q[Symbol.for("config")].props[je]);s[8].populate(W),v===!0&&(M-=1),i=s[8];const de={};C={transition:o.$sizes.get("w")-120},Array.isArray(C)===!0&&(C=x(C).slice(0)),de.x=C,C=o.mode==="dark",Array.isArray(C)===!0&&(C=x(C).slice(0)),de.on=C,C=o.$colors.get("color1"),Array.isArray(C)===!0&&(C=x(C).slice(0)),de.bgColor=C,de.primaryColor="#22c55e",m=de.is||"Toggle";let I;if(typeof m=="string"){if(I=l.components&&l.components[m]||h[m],!I)throw new Error('Component "Toggle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(I=m);s[9]=I.call(null,{props:de},s[8],o),s[9][Symbol.for("slots")][0]?(i=s[9][Symbol.for("slots")][0],y=s[9],v=!0):i=s[9][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[2];const q={};s[10]=this.element({parent:i||"root"},v===!0?y:o),q.w=200,q.h={transition:o.$sizes.get("block1.h")},q.x=25,q.y=140,q.color=o.$colors.get("color2"),q.effects=[{type:"radius",props:{radius:o.radius/2}}],s[10].populate(q),v===!0&&(M-=1),i=s[2];const ee={};s[11]=this.element({parent:i||"root"},v===!0?y:o),ee.w={transition:o.$sizes.get("block2.w")},ee.h=o.$sizes.get("block2.h"),ee.x=270,ee.y={transition:o.$sizes.get("block2.y")},ee.color=o.$colors.get("color2"),ee.effects=[{type:"radius",props:{radius:o.radius/2}}],s[11].populate(ee),v===!0&&(M-=1),i=s[2];const ae={};s[12]=this.element({parent:i||"root"},v===!0?y:o),ae.x={transition:o.$sizes.get("graph.x")},ae.y={transition:o.$sizes.get("graph.y")},ae.w=o.$sizes.get("graph.w"),ae.h=o.$sizes.get("graph.h"),ae.color="0x00000000",s[12].populate(ae),v===!0&&(M-=1),i=s[12];const ne={};s[13]=this.element({parent:i||"root"},v===!0?y:o),ne.x={transition:o.$sizes.get("graph.offset")},ne.y={transition:o.$sizes.get("graph.offset")},s[13].populate(ne),v===!0&&(M-=1);const Y=l.components&&l.components.Bar||h.Bar;i=s[13];const Z={};s[14]=this.element({parent:i||"root"},v===!0?y:o),Z.bgColor=o.$colors.get("color2"),Z.primaryColor=o.$colors.get("color4"),Z.size=o.$sizes.get("graph.size"),Z.height=100,Z.index=0;const j=[];if(typeof Y<"u")for(let je in Y[Symbol.for("config")].props)delete Z[Y[Symbol.for("config")].props[je]],j.push(Y[Symbol.for("config")].props[je]);s[14].populate(Z),v===!0&&(M-=1),i=s[14];const fe={};C=o.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),fe.bgColor=C,C=o.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),fe.primaryColor=C,C=o.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),fe.size=C,fe.height=100,fe.index=0,m=fe.is||"Bar";let he;if(typeof m=="string"){if(he=l.components&&l.components[m]||h[m],!he)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(he=m);s[15]=he.call(null,{props:fe},s[14],o),s[15][Symbol.for("slots")][0]?(i=s[15][Symbol.for("slots")][0],y=s[15],v=!0):i=s[15][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const we=l.components&&l.components.Bar||h.Bar;i=s[13];const ge={};s[16]=this.element({parent:i||"root"},v===!0?y:o),ge.bgColor=o.$colors.get("color2"),ge.primaryColor=o.$colors.get("color4"),ge.size=o.$sizes.get("graph.size"),ge.height=140,ge.index=1;const be=[];if(typeof we<"u")for(let je in we[Symbol.for("config")].props)delete ge[we[Symbol.for("config")].props[je]],be.push(we[Symbol.for("config")].props[je]);s[16].populate(ge),v===!0&&(M-=1),i=s[16];const Ie={};C=o.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Ie.bgColor=C,C=o.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Ie.primaryColor=C,C=o.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Ie.size=C,Ie.height=140,Ie.index=1,m=Ie.is||"Bar";let V;if(typeof m=="string"){if(V=l.components&&l.components[m]||h[m],!V)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);s[17]=V.call(null,{props:Ie},s[16],o),s[17][Symbol.for("slots")][0]?(i=s[17][Symbol.for("slots")][0],y=s[17],v=!0):i=s[17][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const De=l.components&&l.components.Bar||h.Bar;i=s[13];const Se={};s[18]=this.element({parent:i||"root"},v===!0?y:o),Se.bgColor=o.$colors.get("color2"),Se.primaryColor=o.$colors.get("color4"),Se.size=o.$sizes.get("graph.size"),Se.height=170,Se.index=2;const me=[];if(typeof De<"u")for(let je in De[Symbol.for("config")].props)delete Se[De[Symbol.for("config")].props[je]],me.push(De[Symbol.for("config")].props[je]);s[18].populate(Se),v===!0&&(M-=1),i=s[18];const Re={};C=o.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Re.bgColor=C,C=o.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Re.primaryColor=C,C=o.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Re.size=C,Re.height=170,Re.index=2,m=Re.is||"Bar";let Ne;if(typeof m=="string"){if(Ne=l.components&&l.components[m]||h[m],!Ne)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ne=m);s[19]=Ne.call(null,{props:Re},s[18],o),s[19][Symbol.for("slots")][0]?(i=s[19][Symbol.for("slots")][0],y=s[19],v=!0):i=s[19][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const $e=l.components&&l.components.Bar||h.Bar;i=s[13];const Pe={};s[20]=this.element({parent:i||"root"},v===!0?y:o),Pe.bgColor=o.$colors.get("color2"),Pe.primaryColor=o.$colors.get("color4"),Pe.size=o.$sizes.get("graph.size"),Pe.height=150,Pe.index=3;const ve=[];if(typeof $e<"u")for(let je in $e[Symbol.for("config")].props)delete Pe[$e[Symbol.for("config")].props[je]],ve.push($e[Symbol.for("config")].props[je]);s[20].populate(Pe),v===!0&&(M-=1),i=s[20];const Ye={};C=o.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Ye.bgColor=C,C=o.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Ye.primaryColor=C,C=o.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Ye.size=C,Ye.height=150,Ye.index=3,m=Ye.is||"Bar";let it;if(typeof m=="string"){if(it=l.components&&l.components[m]||h[m],!it)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(it=m);s[21]=it.call(null,{props:Ye},s[20],o),s[21][Symbol.for("slots")][0]?(i=s[21][Symbol.for("slots")][0],y=s[21],v=!0):i=s[21][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Ke=l.components&&l.components.Bar||h.Bar;i=s[13];const lt={};s[22]=this.element({parent:i||"root"},v===!0?y:o),lt.bgColor=o.$colors.get("color2"),lt.primaryColor=o.$colors.get("color4"),lt.size=o.$sizes.get("graph.size"),lt.height=90,lt.index=4;const St=[];if(typeof Ke<"u")for(let je in Ke[Symbol.for("config")].props)delete lt[Ke[Symbol.for("config")].props[je]],St.push(Ke[Symbol.for("config")].props[je]);s[22].populate(lt),v===!0&&(M-=1),i=s[22];const ft={};C=o.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),ft.bgColor=C,C=o.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),ft.primaryColor=C,C=o.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),ft.size=C,ft.height=90,ft.index=4,m=ft.is||"Bar";let Tt;if(typeof m=="string"){if(Tt=l.components&&l.components[m]||h[m],!Tt)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Tt=m);return s[23]=Tt.call(null,{props:ft},s[22],o),s[23][Symbol.for("slots")][0]?(i=s[23][Symbol.for("slots")][0],y=s[23],v=!0):i=s[23][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),s},effects:[function(i,o,l,h,g,x){o[0].set("color",{transition:i.$colors.get("bg")})},function(i,o,l,h,g,x){o[1].set("color",i.$colors.get("color4"))},function(i,o,l,h,g,x){o[2].set("x",{transition:(1920-i.$sizes.get("w"))/2})},function(i,o,l,h,g,x){o[2].set("y",{transition:(1080-i.$sizes.get("h"))/2})},function(i,o,l,h,g,x){o[4].set("w",{transition:i.$sizes.get("w")})},function(i,o,l,h,g,x){o[4].set("h",{transition:i.$sizes.get("h")})},function(i,o,l,h,g,x){o[4].set("color",i.$colors.get("color1"))},function(i,o,l,h,g,x){o[4].set("effects",[{type:"radius",props:{radius:i.radius}}])},function(i,o,l,h,g,x){o[5].set("w",{transition:i.$sizes.get("w")})},function(i,o,l,h,g,x){o[5].set("color",i.$colors.get("color2"))},function(i,o,l,h,g,x){o[5].set("effects",[{type:"radius",props:{radius:i.radius}}])},function(i,o,l,h,g,x){o[6].set("w",{transition:i.$sizes.get("w")})},function(i,o,l,h,g,x){o[6].set("color",i.$colors.get("color2"))},function(i,o,l,h,g,x){o[7].set("content",i.text)},function(i,o,l,h,g,x){o[7].set("color",i.$colors.get("color3"))},function(i,o,l,h,g,x){(typeof skip8>"u"||skip8.indexOf("x")===-1)&&o[8].set("x",{transition:i.$sizes.get("w")-120})},function(i,o,l,h,g,x){(typeof skip8>"u"||skip8.indexOf("on")===-1)&&o[8].set("on",i.mode==="dark")},function(i,o,l,h,g,x){(typeof skip8>"u"||skip8.indexOf("bgColor")===-1)&&o[8].set("bgColor",i.$colors.get("color1"))},function(i,o,l,h,g,x){o[9][Symbol.for("props")].x={transition:i.$sizes.get("w")-120}},function(i,o,l,h,g,x){o[9][Symbol.for("props")].on=i.mode==="dark"},function(i,o,l,h,g,x){o[9][Symbol.for("props")].bgColor=i.$colors.get("color1")},function(i,o,l,h,g,x){o[10].set("h",{transition:i.$sizes.get("block1.h")})},function(i,o,l,h,g,x){o[10].set("color",i.$colors.get("color2"))},function(i,o,l,h,g,x){o[10].set("effects",[{type:"radius",props:{radius:i.radius/2}}])},function(i,o,l,h,g,x){o[11].set("w",{transition:i.$sizes.get("block2.w")})},function(i,o,l,h,g,x){o[11].set("h",i.$sizes.get("block2.h"))},function(i,o,l,h,g,x){o[11].set("y",{transition:i.$sizes.get("block2.y")})},function(i,o,l,h,g,x){o[11].set("color",i.$colors.get("color2"))},function(i,o,l,h,g,x){o[11].set("effects",[{type:"radius",props:{radius:i.radius/2}}])},function(i,o,l,h,g,x){o[12].set("x",{transition:i.$sizes.get("graph.x")})},function(i,o,l,h,g,x){o[12].set("y",{transition:i.$sizes.get("graph.y")})},function(i,o,l,h,g,x){o[12].set("w",i.$sizes.get("graph.w"))},function(i,o,l,h,g,x){o[12].set("h",i.$sizes.get("graph.h"))},function(i,o,l,h,g,x){o[13].set("x",{transition:i.$sizes.get("graph.offset")})},function(i,o,l,h,g,x){o[13].set("y",{transition:i.$sizes.get("graph.offset")})},function(i,o,l,h,g,x){(typeof skip14>"u"||skip14.indexOf("bgColor")===-1)&&o[14].set("bgColor",i.$colors.get("color2"))},function(i,o,l,h,g,x){(typeof skip14>"u"||skip14.indexOf("primaryColor")===-1)&&o[14].set("primaryColor",i.$colors.get("color4"))},function(i,o,l,h,g,x){(typeof skip14>"u"||skip14.indexOf("size")===-1)&&o[14].set("size",i.$sizes.get("graph.size"))},function(i,o,l,h,g,x){o[15][Symbol.for("props")].bgColor=i.$colors.get("color2")},function(i,o,l,h,g,x){o[15][Symbol.for("props")].primaryColor=i.$colors.get("color4")},function(i,o,l,h,g,x){o[15][Symbol.for("props")].size=i.$sizes.get("graph.size")},function(i,o,l,h,g,x){(typeof skip16>"u"||skip16.indexOf("bgColor")===-1)&&o[16].set("bgColor",i.$colors.get("color2"))},function(i,o,l,h,g,x){(typeof skip16>"u"||skip16.indexOf("primaryColor")===-1)&&o[16].set("primaryColor",i.$colors.get("color4"))},function(i,o,l,h,g,x){(typeof skip16>"u"||skip16.indexOf("size")===-1)&&o[16].set("size",i.$sizes.get("graph.size"))},function(i,o,l,h,g,x){o[17][Symbol.for("props")].bgColor=i.$colors.get("color2")},function(i,o,l,h,g,x){o[17][Symbol.for("props")].primaryColor=i.$colors.get("color4")},function(i,o,l,h,g,x){o[17][Symbol.for("props")].size=i.$sizes.get("graph.size")},function(i,o,l,h,g,x){(typeof skip18>"u"||skip18.indexOf("bgColor")===-1)&&o[18].set("bgColor",i.$colors.get("color2"))},function(i,o,l,h,g,x){(typeof skip18>"u"||skip18.indexOf("primaryColor")===-1)&&o[18].set("primaryColor",i.$colors.get("color4"))},function(i,o,l,h,g,x){(typeof skip18>"u"||skip18.indexOf("size")===-1)&&o[18].set("size",i.$sizes.get("graph.size"))},function(i,o,l,h,g,x){o[19][Symbol.for("props")].bgColor=i.$colors.get("color2")},function(i,o,l,h,g,x){o[19][Symbol.for("props")].primaryColor=i.$colors.get("color4")},function(i,o,l,h,g,x){o[19][Symbol.for("props")].size=i.$sizes.get("graph.size")},function(i,o,l,h,g,x){(typeof skip20>"u"||skip20.indexOf("bgColor")===-1)&&o[20].set("bgColor",i.$colors.get("color2"))},function(i,o,l,h,g,x){(typeof skip20>"u"||skip20.indexOf("primaryColor")===-1)&&o[20].set("primaryColor",i.$colors.get("color4"))},function(i,o,l,h,g,x){(typeof skip20>"u"||skip20.indexOf("size")===-1)&&o[20].set("size",i.$sizes.get("graph.size"))},function(i,o,l,h,g,x){o[21][Symbol.for("props")].bgColor=i.$colors.get("color2")},function(i,o,l,h,g,x){o[21][Symbol.for("props")].primaryColor=i.$colors.get("color4")},function(i,o,l,h,g,x){o[21][Symbol.for("props")].size=i.$sizes.get("graph.size")},function(i,o,l,h,g,x){(typeof skip22>"u"||skip22.indexOf("bgColor")===-1)&&o[22].set("bgColor",i.$colors.get("color2"))},function(i,o,l,h,g,x){(typeof skip22>"u"||skip22.indexOf("primaryColor")===-1)&&o[22].set("primaryColor",i.$colors.get("color4"))},function(i,o,l,h,g,x){(typeof skip22>"u"||skip22.indexOf("size")===-1)&&o[22].set("size",i.$sizes.get("graph.size"))},function(i,o,l,h,g,x){o[23][Symbol.for("props")].bgColor=i.$colors.get("color2")},function(i,o,l,h,g,x){o[23][Symbol.for("props")].primaryColor=i.$colors.get("color4")},function(i,o,l,h,g,x){o[23][Symbol.for("props")].size=i.$sizes.get("graph.size")}],context:{}},state(){return{mode:"dark",sizes:"small",radius:20}},watch:{mode(f){this.$colors.set(f)},sizes(f){this.$sizes.set(f)}},computed:{text(){return this.mode,this.mode==="dark"?"Dark mode":"Light mode"}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.sizes="large"},down(){this.sizes="small"}}}),pL="ABC123",mL="https://8b4fa39d.lightningjs.workers.dev";let BT,jT;const gL="w185",yL={headers:{"Content-Type":"application/json",Authorization:"Bearer "+pL}};function RC(f,i=gL){return jT+i+f}function vL(...f){return BT?wg(...f):FT().then(()=>wg(...f))}function wg(f,i={}){return fetch(mL+f,{...yL,...i}).then(o=>o.json())}function FT(){return wg("/configuration").then(f=>(BT=f,jT=f.images.secure_base_url,f))}const Mg={get:vL,loadConfig:FT},LC=f=>Mg.get(`/${f}/popular`).then($T),$T=f=>f.results.filter(o=>!o.adult).map(o=>({poster:RC(o.poster_path||o.profile_path),background:RC(o.backdrop_path,"w1280"),identifier:o.id,title:o.title||o.name,overview:o.overview})),Mu=f=>{const i=Array.isArray(f)?f:[f];return xL("movie").then(({genres:o})=>{let l=[];return o.forEach(h=>{i.includes(h.name)&&l.push(h.id)}),Mg.get(`/discover/movie?with_genres=${l.join()}`).then($T)})},xL=f=>Mg.get(`/genre/${f}/list`),wL=tt.Component("Poster",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=1280,m.h=720,m.x=o.x,m.src=o.item.background,m.color="{top: '0xffffffff', bottom: '0x000000ff'}",m.scale={transition:{value:o.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.alpha={transition:{value:o.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.w=185,y.h=278,y.x=54,y.y=220,y.src=o.item.poster,s[2].populate(y),i=s[1];const v={};s[3]=this.element({parent:i||"root"},o),v.content=o.item.title,v.font="raleway",v.y=520,v.x=54,v.size=64,v.maxwidth=1e3,v.maxlines=1,v.__textnode=!0,s[3].populate(v),i=s[1];const M={};return s[4]=this.element({parent:i||"root"},o),M.content=o.item.overview,M.size=21,M.y=620,M.x=60,M.color="0xccccccff",M.maxwidth=1e3,M.maxlines=2,M.lineheight=36,M.__textnode=!0,s[4].populate(M),s},effects:[function(i,o,l,h,g,x){o[0].set("src",i.item.background)},function(i,o,l,h,g,x){o[0].set("scale",{transition:{value:i.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(i,o,l,h,g,x){o[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(i,o,l,h,g,x){o[1].set("alpha",{transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(i,o,l,h,g,x){o[2].set("src",i.item.poster)},function(i,o,l,h,g,x){o[3].set("content",i.item.title)},function(i,o,l,h,g,x){o[4].set("content",i.item.overview)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,zIndex:1,alpha:0}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1},unfocus(){this.scale=1,this.alpha=0}}}),SL=tt.Component("Poster",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.w=185,m.h=278,m.x=o.x,m.src=o.item.poster,m.scale={transition:{value:o.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),s},effects:[function(i,o,l,h,g,x){o[0].set("src",i.item.poster)},function(i,o,l,h,g,x){o[0].set("scale",{transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(i,o,l,h,g,x){o[0].set("_effects",[{type:"radius",props:{radius:8}}])}],context:{}},props:["src","index","item","width"],state(){return{scale:1,color:"#333"}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.color="#fff",this.scale=1.1},unfocus(){this.color="#333",this.scale=1}}}),CL=tt.Component("PosterTitle",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=185,m.h=278,m.x=o.x,m.src=o.item.poster,m.scale={transition:{value:o.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.x=10,C.y={transition:{value:o.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},C.alpha={transition:{value:o.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(C),i=s[1];const y={};return s[2]=this.element({parent:i||"root"},o),y.content=o.item.title,y.font="raleway",y.size=22,y.maxwidth=185,y.maxlines=2,y.lineheight=28,y.__textnode=!0,s[2].populate(y),s},effects:[function(i,o,l,h,g,x){o[0].set("src",i.item.poster)},function(i,o,l,h,g,x){o[0].set("scale",{transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(i,o,l,h,g,x){o[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(i,o,l,h,g,x){o[1].set("y",{transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(i,o,l,h,g,x){o[1].set("alpha",{transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(i,o,l,h,g,x){o[2].set("content",i.item.title)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,alpha:0,y:278}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1,this.y=288},unfocus(){this.scale=1,this.alpha=0,this.y=278}}}),TL=tt.Component("TmdbRow",{components:{Hero:wL,Poster:SL,PosterTitle:CL},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1;const v={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(v),i=s[0];const M={};s[1]=this.element({parent:i||"root"},y===!0?C:o),M.x={transition:{value:o.x,duration:300,easing:"ease-in-out"}},M.y=80,s[1].populate(M),i=s[1];const b=[];let _,U;const F=(G=[],X,Q)=>{const W=x(G),te=new Set;let de=W.length;const I={};for(_=I.from||0,U=("to"in I)?I.to:W.length;de--;){const ne=W[de];de<U&&de>=_&&te.add(""+ne.identifier)}let q=Q.length;for(;q--;)if(te.has(Q[q])===!1){const ne=Q[q];X[2][ne]&&X[2][ne].destroy(),delete X[2][ne],X[3][ne]&&X[3][ne].destroy(),delete X[3][ne]}Q.length=0;const ee=W.length,ae=[];for(let ne=0;ne<ee;ne++){if(ne<_||ne>=U)continue;const Y=Object.create(o);i=X[1],Y.item=W[ne],Y.index=ne,Y.key=""+Y.item.identifier,Y.__ref="poster"+ne,Q.push(Y.key);const Z=l.components&&l.components.Component||h.Component;X[2]===void 0&&(X[2]={});const j={};X[2][Y.key]===void 0&&(X[2][Y.key]=this.element({parent:i||"root"},y===!0?C:o)),j.is=Y.type,j.index=Y.index,j.item=Y.item,j.ref=Y.__ref,j.width=Y.width;const fe=[];if(typeof Z<"u")for(let we in Z[Symbol.for("config")].props)delete j[Z[Symbol.for("config")].props[we]],fe.push(Z[Symbol.for("config")].props[we]);X[2][Y.key].nodeId===void 0&&X[2][Y.key].populate(j),X[3]===void 0&&(X[3]={}),i=X[2][Y.key];const he={};if(X[3][Y.key]===void 0){he.is=Y.type,he.index=Y.index,he.item=Y.item,he.ref=Y.__ref,he.width=Y.width,m=he.is||"Component";let we;if(typeof m=="string"){if(we=l.components&&l.components[m]||h[m],!we)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(we=m);X[3][Y.key]=we.call(null,{props:he},X[2][Y.key],o),X[3][Y.key][Symbol.for("slots")][0]?(i=X[3][Y.key][Symbol.for("slots")][0],C=X[3][Y.key],y=!0):i=X[3][Y.key][Symbol.for("children")][0]}}return ae};let z;const B=()=>{o[Symbol.for("removeGlobalEffects")](z),z=null,z=F(o.items,s,b)};return o[Symbol.for("effects")].push(B),g(B,["items"]),s},effects:[function(i,o,l,h,g,x){o[1].set("x",{transition:{value:i.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state(){return{focused:0,offset:0}},hooks:{focus(){this.$trigger("focused")}},computed:{x(){return this.focused,this.items,this.width,150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused(f){const i=this.$select("poster"+f);i&&i.$focus&&(i.$focus(),this.$emit("posterSelect",this.items[f]))}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),bL=tt.Component("Background",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.src=o.bg1,C.w=1920,C.h=1080,C.color="{top: '0xffffffff', bottom: '0x000000ff'}",C.alpha={transition:{value:o.alpha1,duration:400,easing:"ease-in"}},s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.src=o.bg2,y.w=1920,y.h=1080,y.color="{top: '0xffffffff', bottom: '0x000000ff'}",y.alpha={transition:{value:o.alpha2,duration:400,easing:"ease-in"}},s[2].populate(y),i=s[0];const v={};return s[3]=this.element({parent:i||"root"},o),v.w=1920,v.h=1080,v.src="assets/gradient.png",v.color="0x8866ddff",v.alpha=.8,s[3].populate(v),s},effects:[function(i,o,l,h,g,x){o[1].set("src",i.bg1)},function(i,o,l,h,g,x){o[1].set("alpha",{transition:{value:i.alpha1,duration:400,easing:"ease-in"}})},function(i,o,l,h,g,x){o[2].set("src",i.bg2)},function(i,o,l,h,g,x){o[2].set("alpha",{transition:{value:i.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["bgImg"],state(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{bgImg(f){this.counter=(this.counter+1)%2,this.counter===0?(this.bg1=f,this.alpha1=.8,this.alpha2=0):(this.bg2=f,this.alpha1=0,this.alpha2=.8)}}}),kL=tt.Component("TMdb",{components:{Background:bL,TmdbRow:TL},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),b.w=1920,b.h=1080,b.color="0x000000ff",s[0].populate(b),v===!0&&(M-=1);const _=l.components&&l.components.Background||h.Background;i=s[0];const U={};s[1]=this.element({parent:i||"root"},v===!0?y:o),U.bgImg=o.src;const F=[];if(typeof _<"u")for(let Z in _[Symbol.for("config")].props)delete U[_[Symbol.for("config")].props[Z]],F.push(_[Symbol.for("config")].props[Z]);s[1].populate(U),v===!0&&(M-=1),i=s[1];const z={};C=o.src,Array.isArray(C)===!0&&(C=x(C).slice(0)),z.bgImg=C,m=z.is||"Background";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "Background" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);s[2]=B.call(null,{props:z},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],y=s[2],v=!0):i=s[2][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[0];const G={};s[3]=this.element({parent:i||"root"},v===!0?y:o),s[3].populate(G),v===!0&&(M-=1),i=s[3];const X={};s[4]=this.element({parent:i||"root"},v===!0?y:o),X.y={transition:{value:o.contentY,duration:o.duration}},X.alpha={transition:{value:o.alpha,duration:o.duration}},s[4].populate(X),v===!0&&(M-=1),i=s[4];const Q={};s[5]=this.element({parent:i||"root"},v===!0?y:o),Q.src="assets/logo.png",Q.x=140,Q.y=90,Q.w=243,Q.h=52,s[5].populate(Q),v===!0&&(M-=1),i=s[4];const W={};s[6]=this.element({parent:i||"root"},v===!0?y:o),W.content=o.title,W.font="raleway",W.size=80,W.x=140,W.y=300,W.maxwidth=1e3,W["@loaded"]=o.positionText&&o.positionText.bind(o),W.maxlines=1,W.__textnode=!0,s[6].populate(W),v===!0&&(M-=1),i=s[4];const te={};s[7]=this.element({parent:i||"root"},v===!0?y:o),te.content=o.overview,te.maxwidth=880,te.x=140,te.y=430,te.lineheight=40,te.maxlines=3,te.__textnode=!0,s[7].populate(te),v===!0&&(M-=1),i=s[3];const de={};s[8]=this.element({parent:i||"root"},v===!0?y:o),de.y={transition:{value:o.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[8].populate(de),v===!0&&(M-=1),i=s[8];const I=[];let q,ee;const ae=(Z=[],j,fe)=>{const he=x(Z),we=new Set;let ge=he.length;const be={};for(q=be.from||0,ee=("to"in be)?be.to:he.length;ge--;){const Se=he[ge];ge<ee&&ge>=q&&we.add(""+Se.title)}let Ie=fe.length;for(;Ie--;)if(we.has(fe[Ie])===!1){const Se=fe[Ie];j[9][Se]&&j[9][Se].destroy(),delete j[9][Se],j[10][Se]&&j[10][Se].destroy(),delete j[10][Se]}fe.length=0;const V=he.length,De=[];for(let Se=0;Se<V;Se++){if(Se<q||Se>=ee)continue;const me=Object.create(o);i=j[8],me.row=he[Se],me.index=Se,me.key=""+me.row.title,me.__ref="row"+Se,fe.push(me.key);const Re=l.components&&l.components.TmdbRow||h.TmdbRow;j[9]===void 0&&(j[9]={});const Ne={};j[9][me.key]===void 0&&(j[9][me.key]=this.element({parent:i||"root"},v===!0?y:o)),Ne.title=me.row.title,Ne.items=me.row.items,Ne.type=me.row.type,Ne.width=me.row.width,Ne.y=me.row.y,Ne.ref=me.__ref;const $e=[];if(typeof Re<"u")for(let Ke in Re[Symbol.for("config")].props)delete Ne[Re[Symbol.for("config")].props[Ke]],$e.push(Re[Symbol.for("config")].props[Ke]);j[9][me.key].nodeId===void 0&&(j[9][me.key].populate(Ne),v===!0&&(M-=1)),j[10]===void 0&&(j[10]={}),i=j[9][me.key];const Pe={};if(j[10][me.key]===void 0){Pe.title=me.row.title,C=me.row.items,Array.isArray(C)===!0&&(C=x(C).slice(0)),Pe.items=C,C=me.row.type,Array.isArray(C)===!0&&(C=x(C).slice(0)),Pe.type=C,C=me.row.width,Array.isArray(C)===!0&&(C=x(C).slice(0)),Pe.width=C,Pe.y=me.row.y,Pe.ref=me.__ref,m=Pe.is||"TmdbRow";let Ke;if(typeof m=="string"){if(Ke=l.components&&l.components[m]||h[m],!Ke)throw new Error('Component "TmdbRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ke=m);j[10][me.key]=Ke.call(null,{props:Pe},j[9][me.key],o),j[10][me.key][Symbol.for("slots")][0]?(i=j[10][me.key][Symbol.for("slots")][0],y=j[10][me.key],v=!0):i=j[10][me.key][Symbol.for("children")][0]}let ve=()=>{(typeof $e>"u"||$e.indexOf("items")===-1)&&j[9][me.key].set("items",me.row.items)};g(ve,null),De.push(ve),o[Symbol.for("effects")].push(ve);let Ye=()=>{(typeof $e>"u"||$e.indexOf("type")===-1)&&j[9][me.key].set("type",me.row.type)};g(Ye,null),De.push(Ye),o[Symbol.for("effects")].push(Ye);let it=()=>{(typeof $e>"u"||$e.indexOf("width")===-1)&&j[9][me.key].set("width",me.row.width)};g(it,null),De.push(it),o[Symbol.for("effects")].push(it),j[10][me.key][Symbol.for("props")].items=me.row.items,j[10][me.key][Symbol.for("props")].type=me.row.type,j[10][me.key][Symbol.for("props")].width=me.row.width}return De};let ne;const Y=()=>{o[Symbol.for("removeGlobalEffects")](ne),ne=null,ne=ae(o.rows,s,I)};return o[Symbol.for("effects")].push(Y),g(Y,["rows"]),s},effects:[function(i,o,l,h,g,x){(typeof skip1>"u"||skip1.indexOf("bgImg")===-1)&&o[1].set("bgImg",i.src)},function(i,o,l,h,g,x){o[2][Symbol.for("props")].bgImg=i.src},function(i,o,l,h,g,x){o[4].set("y",{transition:{value:i.contentY,duration:i.duration}})},function(i,o,l,h,g,x){o[4].set("alpha",{transition:{value:i.alpha,duration:i.duration}})},function(i,o,l,h,g,x){o[6].set("content",i.title)},function(i,o,l,h,g,x){o[7].set("content",i.overview)},function(i,o,l,h,g,x){o[8].set("y",{transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state(){return{rows:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}},watch:{focused(f){const i=this.$select("row"+f);i&&i.$focus&&i.$focus()}},hooks:{async init(){this.rows=[{title:"Popular Movies",items:await LC("movie"),type:"Poster",width:215,y:0},{title:"Best Western movies",items:await Mu(["Western"]),type:"Hero",width:1370,y:358},{title:"Best Comedy movies",items:await Mu(["Comedy"]),type:"PosterTitle",width:215,y:1158},{title:"Popular TV shows",items:await LC("tv"),type:"PosterTitle",width:215,y:1536},{title:"Best Adventure and Action movies",items:await Mu(["adventure","action"]),type:"Hero",width:1370,y:1914},{title:"Best Documentaries",items:await Mu("Documentary"),type:"PosterTitle",width:215,y:2714},{title:"Best Western movies 2",items:await Mu("Western"),type:"PosterTitle",width:215,y:3092}],this.focused=0},ready(){this.$listen("posterSelect",f=>{this.focused===0&&(this.src=f.background,this.title=f.title,this.overview=f.overview)})},focus(){this.$trigger("focused")}},input:{up(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0},down(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0}}}),EL=tt.Component("MenuSprite",{code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(b),v===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},v===!0?y:o),_.src="assets/menusprite.png",_.x=748,_.y=120,_.w=425,_.h=340,s[1].populate(_),v===!0&&(M-=1),i=s[0];const U={};s[2]=this.element({parent:i||"root"},v===!0?y:o),U.y=680,U.x=560,s[2].populate(U),v===!0&&(M-=1);const F=l.components&&l.components.Sprite||h.Sprite;i=s[2];const z={};s[3]=this.element({parent:i||"root"},v===!0?y:o),z.image="assets/menusprite.png",z.x=0,z.w=140,z.h=140,z.map=o.map,z.frame=o.icon1;const B=[];if(typeof F<"u")for(let ge in F[Symbol.for("config")].props)delete z[F[Symbol.for("config")].props[ge]],B.push(F[Symbol.for("config")].props[ge]);s[3].populate(z),v===!0&&(M-=1),i=s[3];const G={};G.image="assets/menusprite.png",G.x=0,G.w=140,G.h=140,G.map=o.map,C=o.icon1,Array.isArray(C)===!0&&(C=x(C).slice(0)),G.frame=C,m=G.is||"Sprite";let X;if(typeof m=="string"){if(X=l.components&&l.components[m]||h[m],!X)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(X=m);s[4]=X.call(null,{props:G},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],y=s[4],v=!0):i=s[4][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Q=l.components&&l.components.Sprite||h.Sprite;i=s[2];const W={};s[5]=this.element({parent:i||"root"},v===!0?y:o),W.image="assets/menusprite.png",W.x=220,W.w=140,W.h=140,W.map=o.map,W.frame="icon2";const te=[];if(typeof Q<"u")for(let ge in Q[Symbol.for("config")].props)delete W[Q[Symbol.for("config")].props[ge]],te.push(Q[Symbol.for("config")].props[ge]);s[5].populate(W),v===!0&&(M-=1),i=s[5];const de={};de.image="assets/menusprite.png",de.x=220,de.w=140,de.h=140,de.map=o.map,de.frame="icon2",m=de.is||"Sprite";let I;if(typeof m=="string"){if(I=l.components&&l.components[m]||h[m],!I)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(I=m);s[6]=I.call(null,{props:de},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],y=s[6],v=!0):i=s[6][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const q=l.components&&l.components.Sprite||h.Sprite;i=s[2];const ee={};s[7]=this.element({parent:i||"root"},v===!0?y:o),ee.image="assets/menusprite.png",ee.x=440,ee.w=140,ee.h=140,ee.map=o.map,ee.frame="icon3";const ae=[];if(typeof q<"u")for(let ge in q[Symbol.for("config")].props)delete ee[q[Symbol.for("config")].props[ge]],ae.push(q[Symbol.for("config")].props[ge]);s[7].populate(ee),v===!0&&(M-=1),i=s[7];const ne={};ne.image="assets/menusprite.png",ne.x=440,ne.w=140,ne.h=140,ne.map=o.map,ne.frame="icon3",m=ne.is||"Sprite";let Y;if(typeof m=="string"){if(Y=l.components&&l.components[m]||h[m],!Y)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Y=m);s[8]=Y.call(null,{props:ne},s[7],o),s[8][Symbol.for("slots")][0]?(i=s[8][Symbol.for("slots")][0],y=s[8],v=!0):i=s[8][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Z=l.components&&l.components.Sprite||h.Sprite;i=s[2];const j={};s[9]=this.element({parent:i||"root"},v===!0?y:o),j.image="assets/menusprite.png",j.x=660,j.w=140,j.h=140,j.map=o.map,j.frame="icon4_unfocus";const fe=[];if(typeof Z<"u")for(let ge in Z[Symbol.for("config")].props)delete j[Z[Symbol.for("config")].props[ge]],fe.push(Z[Symbol.for("config")].props[ge]);s[9].populate(j),v===!0&&(M-=1),i=s[9];const he={};he.image="assets/menusprite.png",he.x=660,he.w=140,he.h=140,he.map=o.map,he.frame="icon4_unfocus",m=he.is||"Sprite";let we;if(typeof m=="string"){if(we=l.components&&l.components[m]||h[m],!we)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(we=m);return s[10]=we.call(null,{props:he},s[9],o),s[10][Symbol.for("slots")][0]?(i=s[10][Symbol.for("slots")][0],y=s[10],v=!0):i=s[10][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),s},effects:[function(i,o,l,h,g,x){(typeof skip3>"u"||skip3.indexOf("frame")===-1)&&o[3].set("frame",i.icon1)},function(i,o,l,h,g,x){o[4][Symbol.for("props")].frame=i.icon1}],context:{}},state(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready(){this.$setInterval(()=>{this.icon1=this.icon1==="icon1_unfocus"?"icon1_focus":"icon1_unfocus"},2e3)}}}),Uh=["menu"],AL=tt.Component("Sprites",{components:{MenuSprite:EL},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(b),v===!0&&(M-=1);const _=l.components&&l.components.MenuSprite||h.MenuSprite;i=s[0];const U={};s[1]=this.element({parent:i||"root"},v===!0?y:o),U.show=o.currentSprite==="menu";const F=[];if(typeof _<"u")for(let G in _[Symbol.for("config")].props)delete U[_[Symbol.for("config")].props[G]],F.push(_[Symbol.for("config")].props[G]);s[1].populate(U),v===!0&&(M-=1),i=s[1];const z={};C=o.currentSprite==="menu",Array.isArray(C)===!0&&(C=x(C).slice(0)),z.show=C,m=z.is||"MenuSprite";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "MenuSprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);return s[2]=B.call(null,{props:z},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],y=s[2],v=!0):i=s[2][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),s},effects:[function(i,o,l,h,g,x){(typeof skip1>"u"||skip1.indexOf("show")===-1)&&o[1].set("show",i.currentSprite==="menu")},function(i,o,l,h,g,x){o[2][Symbol.for("props")].show=i.currentSprite==="menu"}],context:{}},state(){return{currentSprite:"menu"}},input:{down(){const f=Uh.indexOf(this.currentSprite);f<Uh.length-1?this.currentSprite=Uh[f+1]:this.currentSprite=Uh[0]}}}),ld=tt.Component("Button",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.w=300,m.h=80,m.color=o.color||"0xff0000ff",m.effects=[{type:"radius",props:{radius:20}}],m.alpha={transition:o.alpha},m.scale={transition:o.scale},m.rotation=o.rotate,s[0].populate(m),s},effects:[function(i,o,l,h,g,x){o[0].set("effects",[{type:"radius",props:{radius:20}}])},function(i,o,l,h,g,x){o[0].set("alpha",{transition:i.alpha})},function(i,o,l,h,g,x){o[0].set("scale",{transition:i.scale})},function(i,o,l,h,g,x){o[0].set("rotation",i.rotate)}],context:{}},props:["color"],state(){return{alpha:.4,scale:1,rotate:0}},hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=this.scale===1?1.2:1},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.rotate=0}},input:{enter(){this.rotate=this.rotate===0?-4:0,this.scale=this.scale===1.2?1.3:1.2}}}),IL=tt.Component("Menu",{components:{Button:ld},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),M.x={transition:o.x},M.w=400,M.h=1080,M.color="{right: '0x64748baa', left: '0x475569aa'}",s[0].populate(M),y===!0&&(v-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.x=50,b.y=40,s[1].populate(b),y===!0&&(v-=1);const _=l.components&&l.components.Button||h.Button;i=s[1];const U={};s[2]=this.element({parent:i||"root"},y===!0?C:o),U.color="0xe4e4e7ff",U.ref="menu1";const F=[];if(typeof _<"u")for(let he in _[Symbol.for("config")].props)delete U[_[Symbol.for("config")].props[he]],F.push(_[Symbol.for("config")].props[he]);s[2].populate(U),y===!0&&(v-=1),i=s[2];const z={};z.color="0xe4e4e7ff",z.ref="menu1",m=z.is||"Button";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);s[3]=B.call(null,{props:z},s[2],o),s[3][Symbol.for("slots")][0]?(i=s[3][Symbol.for("slots")][0],C=s[3],y=!0):i=s[3][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const G=l.components&&l.components.Button||h.Button;i=s[1];const X={};s[4]=this.element({parent:i||"root"},y===!0?C:o),X.color="0xe4e4e7ff",X.y=100,X.ref="menu2";const Q=[];if(typeof G<"u")for(let he in G[Symbol.for("config")].props)delete X[G[Symbol.for("config")].props[he]],Q.push(G[Symbol.for("config")].props[he]);s[4].populate(X),y===!0&&(v-=1),i=s[4];const W={};W.color="0xe4e4e7ff",W.y=100,W.ref="menu2",m=W.is||"Button";let te;if(typeof m=="string"){if(te=l.components&&l.components[m]||h[m],!te)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(te=m);s[5]=te.call(null,{props:W},s[4],o),s[5][Symbol.for("slots")][0]?(i=s[5][Symbol.for("slots")][0],C=s[5],y=!0):i=s[5][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const de=l.components&&l.components.Button||h.Button;i=s[1];const I={};s[6]=this.element({parent:i||"root"},y===!0?C:o),I.color="0xe4e4e7ff",I.y=200,I.ref="menu3";const q=[];if(typeof de<"u")for(let he in de[Symbol.for("config")].props)delete I[de[Symbol.for("config")].props[he]],q.push(de[Symbol.for("config")].props[he]);s[6].populate(I),y===!0&&(v-=1),i=s[6];const ee={};ee.color="0xe4e4e7ff",ee.y=200,ee.ref="menu3",m=ee.is||"Button";let ae;if(typeof m=="string"){if(ae=l.components&&l.components[m]||h[m],!ae)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ae=m);s[7]=ae.call(null,{props:ee},s[6],o),s[7][Symbol.for("slots")][0]?(i=s[7][Symbol.for("slots")][0],C=s[7],y=!0):i=s[7][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const ne=l.components&&l.components.Button||h.Button;i=s[1];const Y={};s[8]=this.element({parent:i||"root"},y===!0?C:o),Y.color="0xe4e4e7ff",Y.y=300,Y.ref="menu4";const Z=[];if(typeof ne<"u")for(let he in ne[Symbol.for("config")].props)delete Y[ne[Symbol.for("config")].props[he]],Z.push(ne[Symbol.for("config")].props[he]);s[8].populate(Y),y===!0&&(v-=1),i=s[8];const j={};j.color="0xe4e4e7ff",j.y=300,j.ref="menu4",m=j.is||"Button";let fe;if(typeof m=="string"){if(fe=l.components&&l.components[m]||h[m],!fe)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fe=m);return s[9]=fe.call(null,{props:j},s[8],o),s[9][Symbol.for("slots")][0]?(i=s[9][Symbol.for("slots")][0],C=s[9],y=!0):i=s[9][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),s},effects:[function(i,o,l,h,g,x){o[0].set("x",{transition:i.x})}],context:{}},state(){return{x:-360,focused:1}},hooks:{focus(){this.$trigger("focused"),this.x=0}},watch:{focused(){const f=this.$select(`menu${this.focused}`);f&&f.$focus&&f.$focus()}},input:{right(){this.parent.$focus(),this.x=-360},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)},left(){}}}),ML=tt.Component("FocusHandling",{components:{Menu:IL,Button:ld},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(b),v===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},v===!0?y:o),_.x=300,_.y=150,s[1].populate(_),v===!0&&(M-=1);const U=l.components&&l.components.Button||h.Button;i=s[1];const F={};s[2]=this.element({parent:i||"root"},v===!0?y:o),F.color="0xef4444ff",F.x=0,F.ref="button1",F.z=o.focused===1?1:0;const z=[];if(typeof U<"u")for(let Ot in U[Symbol.for("config")].props)delete F[U[Symbol.for("config")].props[Ot]],z.push(U[Symbol.for("config")].props[Ot]);s[2].populate(F),v===!0&&(M-=1),i=s[2];const B={};B.color="0xef4444ff",B.x=0,B.ref="button1",C=o.focused===1?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),B.z=C,m=B.is||"Button";let G;if(typeof m=="string"){if(G=l.components&&l.components[m]||h[m],!G)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);s[3]=G.call(null,{props:B},s[2],o),s[3][Symbol.for("slots")][0]?(i=s[3][Symbol.for("slots")][0],y=s[3],v=!0):i=s[3][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const X=l.components&&l.components.Button||h.Button;i=s[1];const Q={};s[4]=this.element({parent:i||"root"},v===!0?y:o),Q.color="0xf97316ff",Q.x=320,Q.ref="button2",Q.z=o.focused===2?1:0;const W=[];if(typeof X<"u")for(let Ot in X[Symbol.for("config")].props)delete Q[X[Symbol.for("config")].props[Ot]],W.push(X[Symbol.for("config")].props[Ot]);s[4].populate(Q),v===!0&&(M-=1),i=s[4];const te={};te.color="0xf97316ff",te.x=320,te.ref="button2",C=o.focused===2?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),te.z=C,m=te.is||"Button";let de;if(typeof m=="string"){if(de=l.components&&l.components[m]||h[m],!de)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(de=m);s[5]=de.call(null,{props:te},s[4],o),s[5][Symbol.for("slots")][0]?(i=s[5][Symbol.for("slots")][0],y=s[5],v=!0):i=s[5][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const I=l.components&&l.components.Button||h.Button;i=s[1];const q={};s[6]=this.element({parent:i||"root"},v===!0?y:o),q.color="0x84cc16ff",q.x=640,q.ref="button3",q.z=o.focused===3?1:0;const ee=[];if(typeof I<"u")for(let Ot in I[Symbol.for("config")].props)delete q[I[Symbol.for("config")].props[Ot]],ee.push(I[Symbol.for("config")].props[Ot]);s[6].populate(q),v===!0&&(M-=1),i=s[6];const ae={};ae.color="0x84cc16ff",ae.x=640,ae.ref="button3",C=o.focused===3?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),ae.z=C,m=ae.is||"Button";let ne;if(typeof m=="string"){if(ne=l.components&&l.components[m]||h[m],!ne)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ne=m);s[7]=ne.call(null,{props:ae},s[6],o),s[7][Symbol.for("slots")][0]?(i=s[7][Symbol.for("slots")][0],y=s[7],v=!0):i=s[7][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Y=l.components&&l.components.Button||h.Button;i=s[1];const Z={};s[8]=this.element({parent:i||"root"},v===!0?y:o),Z.color="0x10b981ff",Z.x=0,Z.y=100,Z.ref="button4",Z.z=o.focused===4?1:0;const j=[];if(typeof Y<"u")for(let Ot in Y[Symbol.for("config")].props)delete Z[Y[Symbol.for("config")].props[Ot]],j.push(Y[Symbol.for("config")].props[Ot]);s[8].populate(Z),v===!0&&(M-=1),i=s[8];const fe={};fe.color="0x10b981ff",fe.x=0,fe.y=100,fe.ref="button4",C=o.focused===4?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),fe.z=C,m=fe.is||"Button";let he;if(typeof m=="string"){if(he=l.components&&l.components[m]||h[m],!he)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(he=m);s[9]=he.call(null,{props:fe},s[8],o),s[9][Symbol.for("slots")][0]?(i=s[9][Symbol.for("slots")][0],y=s[9],v=!0):i=s[9][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const we=l.components&&l.components.Button||h.Button;i=s[1];const ge={};s[10]=this.element({parent:i||"root"},v===!0?y:o),ge.color="0x06b6d4ff",ge.y=100,ge.x=320,ge.ref="button5",ge.z=o.focused===5?1:0;const be=[];if(typeof we<"u")for(let Ot in we[Symbol.for("config")].props)delete ge[we[Symbol.for("config")].props[Ot]],be.push(we[Symbol.for("config")].props[Ot]);s[10].populate(ge),v===!0&&(M-=1),i=s[10];const Ie={};Ie.color="0x06b6d4ff",Ie.y=100,Ie.x=320,Ie.ref="button5",C=o.focused===5?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ie.z=C,m=Ie.is||"Button";let V;if(typeof m=="string"){if(V=l.components&&l.components[m]||h[m],!V)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);s[11]=V.call(null,{props:Ie},s[10],o),s[11][Symbol.for("slots")][0]?(i=s[11][Symbol.for("slots")][0],y=s[11],v=!0):i=s[11][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const De=l.components&&l.components.Button||h.Button;i=s[1];const Se={};s[12]=this.element({parent:i||"root"},v===!0?y:o),Se.color="0x3b82f6ff",Se.y=100,Se.x=640,Se.ref="button6",Se.z=o.focused===6?1:0;const me=[];if(typeof De<"u")for(let Ot in De[Symbol.for("config")].props)delete Se[De[Symbol.for("config")].props[Ot]],me.push(De[Symbol.for("config")].props[Ot]);s[12].populate(Se),v===!0&&(M-=1),i=s[12];const Re={};Re.color="0x3b82f6ff",Re.y=100,Re.x=640,Re.ref="button6",C=o.focused===6?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),Re.z=C,m=Re.is||"Button";let Ne;if(typeof m=="string"){if(Ne=l.components&&l.components[m]||h[m],!Ne)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ne=m);s[13]=Ne.call(null,{props:Re},s[12],o),s[13][Symbol.for("slots")][0]?(i=s[13][Symbol.for("slots")][0],y=s[13],v=!0):i=s[13][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const $e=l.components&&l.components.Button||h.Button;i=s[1];const Pe={};s[14]=this.element({parent:i||"root"},v===!0?y:o),Pe.color="0x8b5cf6ff",Pe.y=200,Pe.x=0,Pe.ref="button7",Pe.z=o.focused===7?1:0;const ve=[];if(typeof $e<"u")for(let Ot in $e[Symbol.for("config")].props)delete Pe[$e[Symbol.for("config")].props[Ot]],ve.push($e[Symbol.for("config")].props[Ot]);s[14].populate(Pe),v===!0&&(M-=1),i=s[14];const Ye={};Ye.color="0x8b5cf6ff",Ye.y=200,Ye.x=0,Ye.ref="button7",C=o.focused===7?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ye.z=C,m=Ye.is||"Button";let it;if(typeof m=="string"){if(it=l.components&&l.components[m]||h[m],!it)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(it=m);s[15]=it.call(null,{props:Ye},s[14],o),s[15][Symbol.for("slots")][0]?(i=s[15][Symbol.for("slots")][0],y=s[15],v=!0):i=s[15][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Ke=l.components&&l.components.Button||h.Button;i=s[1];const lt={};s[16]=this.element({parent:i||"root"},v===!0?y:o),lt.color="0xd946efff",lt.y=200,lt.x=320,lt.ref="button8",lt.z=o.focused===8?1:0;const St=[];if(typeof Ke<"u")for(let Ot in Ke[Symbol.for("config")].props)delete lt[Ke[Symbol.for("config")].props[Ot]],St.push(Ke[Symbol.for("config")].props[Ot]);s[16].populate(lt),v===!0&&(M-=1),i=s[16];const ft={};ft.color="0xd946efff",ft.y=200,ft.x=320,ft.ref="button8",C=o.focused===8?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),ft.z=C,m=ft.is||"Button";let Tt;if(typeof m=="string"){if(Tt=l.components&&l.components[m]||h[m],!Tt)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Tt=m);s[17]=Tt.call(null,{props:ft},s[16],o),s[17][Symbol.for("slots")][0]?(i=s[17][Symbol.for("slots")][0],y=s[17],v=!0):i=s[17][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const je=l.components&&l.components.Button||h.Button;i=s[1];const Dt={};s[18]=this.element({parent:i||"root"},v===!0?y:o),Dt.color="0xf43f5eff",Dt.y=200,Dt.x=640,Dt.ref="button9",Dt.z=o.focused===9?1:0;const wt=[];if(typeof je<"u")for(let Ot in je[Symbol.for("config")].props)delete Dt[je[Symbol.for("config")].props[Ot]],wt.push(je[Symbol.for("config")].props[Ot]);s[18].populate(Dt),v===!0&&(M-=1),i=s[18];const Qe={};Qe.color="0xf43f5eff",Qe.y=200,Qe.x=640,Qe.ref="button9",C=o.focused===9?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),Qe.z=C,m=Qe.is||"Button";let gn;if(typeof m=="string"){if(gn=l.components&&l.components[m]||h[m],!gn)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(gn=m);s[19]=gn.call(null,{props:Qe},s[18],o),s[19][Symbol.for("slots")][0]?(i=s[19][Symbol.for("slots")][0],y=s[19],v=!0):i=s[19][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const un=l.components&&l.components.Menu||h.Menu;i=s[0];const qt={};s[20]=this.element({parent:i||"root"},v===!0?y:o),qt.ref="menu";const xt=[];if(typeof un<"u")for(let Ot in un[Symbol.for("config")].props)delete qt[un[Symbol.for("config")].props[Ot]],xt.push(un[Symbol.for("config")].props[Ot]);s[20].populate(qt),v===!0&&(M-=1),i=s[20];const Gt={};Gt.ref="menu",m=Gt.is||"Menu";let vt;if(typeof m=="string"){if(vt=l.components&&l.components[m]||h[m],!vt)throw new Error('Component "Menu" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(vt=m);return s[21]=vt.call(null,{props:Gt},s[20],o),s[21][Symbol.for("slots")][0]?(i=s[21][Symbol.for("slots")][0],y=s[21],v=!0):i=s[21][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),s},effects:[function(i,o,l,h,g,x){(typeof skip2>"u"||skip2.indexOf("z")===-1)&&o[2].set("z",i.focused===1?1:0)},function(i,o,l,h,g,x){o[3][Symbol.for("props")].z=i.focused===1?1:0},function(i,o,l,h,g,x){(typeof skip4>"u"||skip4.indexOf("z")===-1)&&o[4].set("z",i.focused===2?1:0)},function(i,o,l,h,g,x){o[5][Symbol.for("props")].z=i.focused===2?1:0},function(i,o,l,h,g,x){(typeof skip6>"u"||skip6.indexOf("z")===-1)&&o[6].set("z",i.focused===3?1:0)},function(i,o,l,h,g,x){o[7][Symbol.for("props")].z=i.focused===3?1:0},function(i,o,l,h,g,x){(typeof skip8>"u"||skip8.indexOf("z")===-1)&&o[8].set("z",i.focused===4?1:0)},function(i,o,l,h,g,x){o[9][Symbol.for("props")].z=i.focused===4?1:0},function(i,o,l,h,g,x){(typeof skip10>"u"||skip10.indexOf("z")===-1)&&o[10].set("z",i.focused===5?1:0)},function(i,o,l,h,g,x){o[11][Symbol.for("props")].z=i.focused===5?1:0},function(i,o,l,h,g,x){(typeof skip12>"u"||skip12.indexOf("z")===-1)&&o[12].set("z",i.focused===6?1:0)},function(i,o,l,h,g,x){o[13][Symbol.for("props")].z=i.focused===6?1:0},function(i,o,l,h,g,x){(typeof skip14>"u"||skip14.indexOf("z")===-1)&&o[14].set("z",i.focused===7?1:0)},function(i,o,l,h,g,x){o[15][Symbol.for("props")].z=i.focused===7?1:0},function(i,o,l,h,g,x){(typeof skip16>"u"||skip16.indexOf("z")===-1)&&o[16].set("z",i.focused===8?1:0)},function(i,o,l,h,g,x){o[17][Symbol.for("props")].z=i.focused===8?1:0},function(i,o,l,h,g,x){(typeof skip18>"u"||skip18.indexOf("z")===-1)&&o[18].set("z",i.focused===9?1:0)},function(i,o,l,h,g,x){o[19][Symbol.for("props")].z=i.focused===9?1:0}],context:{}},state(){return{focused:1}},hooks:{focus(){this.$trigger("focused")}},watch:{focused(f){const i=this.$select(`button${f}`);i&&i.$focus&&i.$focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const f=this.focused-1;if(f===0){const i=this.$select("menu");i&&i.$focus&&i.$focus()}else this.focused=Math.max(f,1)},a(){const f=this.$select("menu");f&&f.$focus&&f.$focus()}}}),_L=tt.Component("Positioning",{code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(v-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.w=100,b.h=100,b.x=20,b.y=20,b.color="0xecfeffff",s[1].populate(b),y===!0&&(v-=1),i=s[0];const _={};s[2]=this.element({parent:i||"root"},y===!0?C:o),_.w=100,_.h=100,_.x=140,_.y=20,_.color="0xa5f3fcff",s[2].populate(_),y===!0&&(v-=1),i=s[0];const U={};s[3]=this.element({parent:i||"root"},y===!0?C:o),U.w=100,U.h=100,U.x=260,U.y=20,U.color="0x22d3eeff",s[3].populate(U),y===!0&&(v-=1),i=s[0];const F={};s[4]=this.element({parent:i||"root"},y===!0?C:o),F.w=100,F.h=100,F.x=380,F.y=20,F.color="0x0891b2ff",s[4].populate(F),y===!0&&(v-=1),i=s[0];const z={};s[5]=this.element({parent:i||"root"},y===!0?C:o),z.w=100,z.h=100,z.x=o.x1,z.y=o.y,z.color="0xfdf4ffff",s[5].populate(z),y===!0&&(v-=1),i=s[0];const B={};s[6]=this.element({parent:i||"root"},y===!0?C:o),B.w=100,B.h=100,B.x=o.x2,B.y=o.y,B.color="0xf5d0feff",s[6].populate(B),y===!0&&(v-=1),i=s[0];const G={};s[7]=this.element({parent:i||"root"},y===!0?C:o),G.w=100,G.h=100,G.x=o.x3,G.y=o.y,G.color="0xe879f9ff",s[7].populate(G),y===!0&&(v-=1),i=s[0];const X={};s[8]=this.element({parent:i||"root"},y===!0?C:o),X.w=100,X.h=100,X.x=o.x4,X.y=o.y,X.color="0xc026d3ff",s[8].populate(X),y===!0&&(v-=1),i=s[0];const Q={};s[9]=this.element({parent:i||"root"},y===!0?C:o),Q.w=100,Q.h=100,Q.x=o.xA,Q.y=260,Q.color="0xfff7edff",s[9].populate(Q),y===!0&&(v-=1),i=s[0];const W={};s[10]=this.element({parent:i||"root"},y===!0?C:o),W.w=100,W.h=100,W.x=o.xB,W.y=260,W.color="0xfed7aaff",s[10].populate(W),y===!0&&(v-=1),i=s[0];const te={};s[11]=this.element({parent:i||"root"},y===!0?C:o),te.w=100,te.h=100,te.x=o.xC,te.y=260,te.color="0xfb923cff",s[11].populate(te),y===!0&&(v-=1),i=s[0];const de={};s[12]=this.element({parent:i||"root"},y===!0?C:o),de.w=100,de.h=100,de.x=o.xD,de.y=260,de.color="0xea580cff",s[12].populate(de),y===!0&&(v-=1),i=s[0];const I={};s[13]=this.element({parent:i||"root"},y===!0?C:o),I.w=800,I.h=800,I.y=20,I.x=800,I.color="0xecfdf5ff",s[13].populate(I),y===!0&&(v-=1),i=s[13];const q={};s[14]=this.element({parent:i||"root"},y===!0?C:o),q.w=600,q.h=600,q.y=20,q.x=20,q.color="0xa7f3d0ff",s[14].populate(q),y===!0&&(v-=1),i=s[14];const ee={};s[15]=this.element({parent:i||"root"},y===!0?C:o),ee.w=400,ee.h=400,ee.y=100,ee.x=20,ee.color="0x34d399ff",s[15].populate(ee),y===!0&&(v-=1),i=s[15];const ae={};s[16]=this.element({parent:i||"root"},y===!0?C:o),ae.w=200,ae.h=100,ae.y=300/2,ae.x=200/2,ae.color="0x059669ff",s[16].populate(ae),y===!0&&(v-=1),i=s[16];const ne={};s[17]=this.element({parent:i||"root"},y===!0?C:o),ne.w=50,ne.h=50,ne.y={transition:o.yNested},ne.x={transition:o.xNested},ne.color="0x065f46ff",s[17].populate(ne),y===!0&&(v-=1),i=s[0];const Y={};s[18]=this.element({parent:i||"root"},y===!0?C:o),Y.w=100,Y.h=100,Y.y=500,Y.x=20,Y.color="0xe11d48ff",s[18].populate(Y),y===!0&&(v-=1),i=s[0];const Z={};s[19]=this.element({parent:i||"root"},y===!0?C:o),Z.w=200,Z.h=200,Z.x=50,Z.y=700,Z.color="0x94a3b8ff",Z.z=100,s[19].populate(Z),y===!0&&(v-=1),i=s[19];const j={};s[20]=this.element({parent:i||"root"},y===!0?C:o),j.content="Lightning!",j.x=100,j.y=140,j.__textnode=!0,s[20].populate(j),y===!0&&(v-=1),i=s[19];const fe={};s[21]=this.element({parent:i||"root"},y===!0?C:o),fe.w=300,fe.h=100,fe.color="0x475569ff",s[21].populate(fe),y===!0&&(v-=1);const he=l.components&&l.components.Circle||h.Circle;i=s[19];const we={};s[22]=this.element({parent:i||"root"},y===!0?C:o),we.x=150,we.y=150,we.size=100,we.color="0xffffffff";const ge=[];if(typeof he<"u")for(let Tt in he[Symbol.for("config")].props)delete we[he[Symbol.for("config")].props[Tt]],ge.push(he[Symbol.for("config")].props[Tt]);s[22].populate(we),y===!0&&(v-=1),i=s[22];const be={};be.x=150,be.y=150,be.size=100,be.color="0xffffffff",m=be.is||"Circle";let Ie;if(typeof m=="string"){if(Ie=l.components&&l.components[m]||h[m],!Ie)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ie=m);s[23]=Ie.call(null,{props:be},s[22],o),s[23][Symbol.for("slots")][0]?(i=s[23][Symbol.for("slots")][0],C=s[23],y=!0):i=s[23][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),i=s[0];const V={};s[24]=this.element({parent:i||"root"},y===!0?C:o),V.w=300,V.h=300,V.x=50,V.y=700,V.color="0xef444480",s[24].populate(V),y===!0&&(v-=1),i=s[0];const De={};s[25]=this.element({parent:i||"root"},y===!0?C:o),De.w=400,De.h=100,De.x=800,De.y=900,De.color="0x0284c7ff",s[25].populate(De),y===!0&&(v-=1),i=s[25];const Se={};s[26]=this.element({parent:i||"root"},y===!0?C:o),Se.w=i.node.width*(42/100),Se.h=i.node.height*(30/100),Se.y=i.node.height*(5/100),Se.x=i.node.width*(1/100),Se.color="0x075985ff",s[26].populate(Se),y===!0&&(v-=1),i=s[25];const me={};s[27]=this.element({parent:i||"root"},y===!0?C:o),me.w=o.bar2.v,me.h=i.node.height*(30/100),me.y=i.node.height*(35/100),me.x=i.node.width*(1/100),me.color="0x6b21a8ff",s[27].populate(me),y===!0&&(v-=1),i=s[25];const Re={};s[28]=this.element({parent:i||"root"},y===!0?C:o),Re.w={transition:o.bar3},Re.h=i.node.height*(30/100),Re.y=i.node.height*(65/100),Re.x=i.node.width*(1/100),Re.color="0x9f1239ff",s[28].populate(Re),y===!0&&(v-=1),i=s[0];const Ne={};s[29]=this.element({parent:i||"root"},y===!0?C:o),Ne.w=250,Ne.h=250,Ne.color="0xfef08aff",Ne.x=450,Ne.y=700,s[29].populate(Ne),y===!0&&(v-=1),i=s[29];const $e={};s[30]=this.element({parent:i||"root"},y===!0?C:o),$e.w=40,$e.h=40,$e.placement="left",$e.color="0x818cf8ff",s[30].populate($e),y===!0&&(v-=1),i=s[29];const Pe={};s[31]=this.element({parent:i||"root"},y===!0?C:o),Pe.w=40,Pe.h=40,Pe.placement="center",Pe.color="0x2563ebff",s[31].populate(Pe),y===!0&&(v-=1),i=s[29];const ve={};s[32]=this.element({parent:i||"root"},y===!0?C:o),ve.w=40,ve.h=40,ve.placement="right",ve.color="0x1e40afff",s[32].populate(ve),y===!0&&(v-=1),i=s[29];const Ye={};s[33]=this.element({parent:i||"root"},y===!0?C:o),Ye.w=40,Ye.h=40,Ye.x=54,Ye.placement="top",Ye.color="0xf472b6ff",s[33].populate(Ye),y===!0&&(v-=1),i=s[29];const it={};s[34]=this.element({parent:i||"root"},y===!0?C:o),it.w=40,it.h=40,it.x=54,it.placement="middle",it.color="0xdb2777ff",s[34].populate(it),y===!0&&(v-=1),i=s[29];const Ke={};s[35]=this.element({parent:i||"root"},y===!0?C:o),Ke.w=40,Ke.h=40,Ke.x=54,Ke.placement="bottom",Ke.color="0xbe185dff",s[35].populate(Ke),y===!0&&(v-=1),i=s[29];const lt={};s[36]=this.element({parent:i||"root"},y===!0?C:o),lt.w=40,lt.h=40,lt.placement="{x: 'center', y: 'bottom'}",lt.color="0xa3e635ff",s[36].populate(lt),y===!0&&(v-=1),i=s[29];const St={};s[37]=this.element({parent:i||"root"},y===!0?C:o),St.w=40,St.h=40,St.placement="{x: 'right', y: 'middle'}",St.color="0x65a30dff",s[37].populate(St),y===!0&&(v-=1),i=s[29];const ft={};return s[38]=this.element({parent:i||"root"},y===!0?C:o),ft.w=40,ft.h=40,ft.placement="{x: 'center', y: 'middle'}",ft.color="0x4d7c0fff",s[38].populate(ft),y===!0&&(v-=1),s},effects:[function(i,o,l,h,g,x){o[9].set("x",i.xA)},function(i,o,l,h,g,x){o[10].set("x",i.xB)},function(i,o,l,h,g,x){o[11].set("x",i.xC)},function(i,o,l,h,g,x){o[12].set("x",i.xD)},function(i,o,l,h,g,x){o[16].set("y",300/2)},function(i,o,l,h,g,x){o[16].set("x",200/2)},function(i,o,l,h,g,x){o[17].set("y",{transition:i.yNested})},function(i,o,l,h,g,x){o[17].set("x",{transition:i.xNested})},function(i,o,l,h,g,x){o[27].set("w",i.bar2.v)},function(i,o,l,h,g,x){o[28].set("w",{transition:i.bar3})}],context:{}},state(){return{x1:20,x2:140,x3:260,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=this.yNested===0?50:0},2e3),this.$setInterval(()=>{this.xNested=this.xNested===0?150:0},1e3),this.$setInterval(()=>{const f=parseFloat(this.bar2.v),i=this.bar2.direction==="up"?f+10:f-10;this.bar2.v=i+"%",i>=90&&(this.bar2.direction="down"),i<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(Math.random()*96)+"%"},2e3)}}});var RL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function LL(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var W0={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var DC;function DL(){return DC||(DC=1,function(f){(function(){var i=typeof window<"u"?window:RL,o={};(function(h,g,x){var w;function s(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var m=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function C(e){e=[typeof globalThis=="object"&&globalThis,e,typeof h=="object"&&h,typeof self=="object"&&self,typeof g=="object"&&g];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var y=C(this);function v(e,t){if(t)e:{var n=y;e=e.split(".");for(var r=0;r<e.length-1;r++){var a=e[r];if(!(a in n))break e;n=n[a]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&m(n,e,{configurable:!0,writable:!0,value:t})}}v("Symbol",function(e){function t(u){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(u||"")+"_"+a++,u)}function n(u,c){this.g=u,m(this,"description",{configurable:!0,writable:!0,value:c})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return t}),v("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=y[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&m(r.prototype,e,{configurable:!0,writable:!0,value:function(){return M(s(this))}})}return e});function M(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function b(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:s(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function _(e){if(!(e instanceof Array)){e=b(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var U=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},F;if(typeof Object.setPrototypeOf=="function")F=Object.setPrototypeOf;else{var z;e:{var B={a:!0},G={};try{G.__proto__=B,z=G.a;break e}catch{}z=!1}F=z?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var X=F;function Q(e,t){if(e.prototype=U(t.prototype),e.prototype.constructor=e,X)X(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.hk=t.prototype}function W(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function te(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}W.prototype.s=function(e){this.h=e};function de(e,t){e.i={sg:t,Fg:!0},e.g=e.m||e.j}W.prototype.return=function(e){this.i={return:e},this.g=this.j};function I(e,t,n){return e.g=n,{value:t}}W.prototype.u=function(e){this.g=e};function q(e){e.g=0}function ee(e,t,n){e.m=t,n!=null&&(e.j=n)}function ae(e,t){e.m=0,e.j=t||0}function ne(e,t,n){e.g=t,e.m=n||0}function Y(e,t){return e.m=t||0,t=e.i.sg,e.i=null,t}function Z(e){e.A=[e.i],e.m=0,e.j=0}function j(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Fg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function fe(e){this.g=new W,this.h=e}function he(e,t){te(e.g);var n=e.g.l;return n?we(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),ge(e))}function we(e,t,n,r){try{var a=t.call(e.g.l,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.o=!1,a;var u=a.value}catch(c){return e.g.l=null,de(e.g,c),ge(e)}return e.g.l=null,r.call(e.g,u),ge(e)}function ge(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,de(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Fg)throw t.sg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function be(e){this.next=function(t){return te(e.g),e.g.l?t=we(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=ge(e)),t},this.throw=function(t){return te(e.g),e.g.l?t=we(e,e.g.l.throw,t,e.g.s):(de(e.g,t),t=ge(e)),t},this.return=function(t){return he(e,t)},this[Symbol.iterator]=function(){return this}}function Ie(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,a){function u(c){c.done?r(c.value):Promise.resolve(c.value).then(t,n).then(u,a)}u(e.next())})}function V(e){return Ie(new be(new fe(e)))}function De(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}v("Promise",function(e){function t(c){this.h=0,this.i=void 0,this.g=[],this.o=!1;var d=this.j();try{c(d.resolve,d.reject)}catch(p){d.reject(p)}}function n(){this.g=null}function r(c){return c instanceof t?c:new t(function(d){d(c)})}if(e)return e;n.prototype.h=function(c){if(this.g==null){this.g=[];var d=this;this.i(function(){d.l()})}this.g.push(c)};var a=y.setTimeout;n.prototype.i=function(c){a(c,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var c=this.g;this.g=[];for(var d=0;d<c.length;++d){var p=c[d];c[d]=null;try{p()}catch(S){this.j(S)}}}this.g=null},n.prototype.j=function(c){this.i(function(){throw c})},t.prototype.j=function(){function c(S){return function(T){p||(p=!0,S.call(d,T))}}var d=this,p=!1;return{resolve:c(this.F),reject:c(this.l)}},t.prototype.F=function(c){if(c===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof t)this.H(c);else{e:switch(typeof c){case"object":var d=c!=null;break e;case"function":d=!0;break e;default:d=!1}d?this.C(c):this.m(c)}},t.prototype.C=function(c){var d=void 0;try{d=c.then}catch(p){this.l(p);return}typeof d=="function"?this.I(d,c):this.m(c)},t.prototype.l=function(c){this.s(2,c)},t.prototype.m=function(c){this.s(1,c)},t.prototype.s=function(c,d){if(this.h!=0)throw Error("Cannot settle("+c+", "+d+"): Promise already settled in state"+this.h);this.h=c,this.i=d,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var c=this;a(function(){if(c.B()){var d=y.console;typeof d<"u"&&d.error(c.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var c=y.CustomEvent,d=y.Event,p=y.dispatchEvent;return typeof p>"u"?!0:(typeof c=="function"?c=new c("unhandledrejection",{cancelable:!0}):typeof d=="function"?c=new d("unhandledrejection",{cancelable:!0}):(c=y.document.createEvent("CustomEvent"),c.initCustomEvent("unhandledrejection",!1,!0,c)),c.promise=this,c.reason=this.i,p(c))},t.prototype.A=function(){if(this.g!=null){for(var c=0;c<this.g.length;++c)u.h(this.g[c]);this.g=null}};var u=new n;return t.prototype.H=function(c){var d=this.j();c.Ed(d.resolve,d.reject)},t.prototype.I=function(c,d){var p=this.j();try{c.call(d,p.resolve,p.reject)}catch(S){p.reject(S)}},t.prototype.then=function(c,d){function p(A,E){return typeof A=="function"?function(R){try{S(A(R))}catch(D){T(D)}}:E}var S,T,k=new t(function(A,E){S=A,T=E});return this.Ed(p(c,S),p(d,T)),k},t.prototype.catch=function(c){return this.then(void 0,c)},t.prototype.Ed=function(c,d){function p(){switch(S.h){case 1:c(S.i);break;case 2:d(S.i);break;default:throw Error("Unexpected state: "+S.h)}}var S=this;this.g==null?u.h(p):this.g.push(p),this.o=!0},t.resolve=r,t.reject=function(c){return new t(function(d,p){p(c)})},t.race=function(c){return new t(function(d,p){for(var S=b(c),T=S.next();!T.done;T=S.next())r(T.value).Ed(d,p)})},t.all=function(c){var d=b(c),p=d.next();return p.done?r([]):new t(function(S,T){function k(R){return function(D){A[R]=D,E--,E==0&&S(A)}}var A=[],E=0;do A.push(void 0),E++,r(p.value).Ed(k(A.length-1),T),p=d.next();while(!p.done)})},t});function Se(e,t){return Object.prototype.hasOwnProperty.call(e,t)}v("WeakMap",function(e){function t(p){if(this.g=(d+=Math.random()+1).toString(),p){p=b(p);for(var S;!(S=p.next()).done;)S=S.value,this.set(S[0],S[1])}}function n(){}function r(p){var S=typeof p;return S==="object"&&p!==null||S==="function"}function a(p){if(!Se(p,c)){var S=new n;m(p,c,{value:S})}}function u(p){var S=Object[p];S&&(Object[p]=function(T){return T instanceof n?T:(Object.isExtensible(T)&&a(T),S(T))})}if(function(){if(!e||!Object.seal)return!1;try{var p=Object.seal({}),S=Object.seal({}),T=new e([[p,2],[S,3]]);return T.get(p)!=2||T.get(S)!=3?!1:(T.delete(p),T.set(S,4),!T.has(p)&&T.get(S)==4)}catch{return!1}}())return e;var c="$jscomp_hidden_"+Math.random();u("freeze"),u("preventExtensions"),u("seal");var d=0;return t.prototype.set=function(p,S){if(!r(p))throw Error("Invalid WeakMap key");if(a(p),!Se(p,c))throw Error("WeakMap key fail: "+p);return p[c][this.g]=S,this},t.prototype.get=function(p){return r(p)&&Se(p,c)?p[c][this.g]:void 0},t.prototype.has=function(p){return r(p)&&Se(p,c)&&Se(p[c],this.g)},t.prototype.delete=function(p){return r(p)&&Se(p,c)&&Se(p[c],this.g)?delete p[c][this.g]:!1},t}),v("Map",function(e){function t(){var d={};return d.Mb=d.next=d.head=d}function n(d,p){var S=d[1];return M(function(){if(S){for(;S.head!=d[1];)S=S.Mb;for(;S.next!=S.head;)return S=S.next,{done:!1,value:p(S)};S=null}return{done:!0,value:void 0}})}function r(d,p){var S=p&&typeof p;S=="object"||S=="function"?u.has(p)?S=u.get(p):(S=""+ ++c,u.set(p,S)):S="p_"+p;var T=d[0][S];if(T&&Se(d[0],S))for(d=0;d<T.length;d++){var k=T[d];if(p!==p&&k.key!==k.key||p===k.key)return{id:S,list:T,index:d,entry:k}}return{id:S,list:T,index:-1,entry:void 0}}function a(d){if(this[0]={},this[1]=t(),this.size=0,d){d=b(d);for(var p;!(p=d.next()).done;)p=p.value,this.set(p[0],p[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var d=Object.seal({x:4}),p=new e(b([[d,"s"]]));if(p.get(d)!="s"||p.size!=1||p.get({x:4})||p.set({x:4},"t")!=p||p.size!=2)return!1;var S=p.entries(),T=S.next();return T.done||T.value[0]!=d||T.value[1]!="s"?!1:(T=S.next(),!(T.done||T.value[0].x!=4||T.value[1]!="t"||!S.next().done))}catch{return!1}}())return e;var u=new WeakMap;a.prototype.set=function(d,p){d=d===0?0:d;var S=r(this,d);return S.list||(S.list=this[0][S.id]=[]),S.entry?S.entry.value=p:(S.entry={next:this[1],Mb:this[1].Mb,head:this[1],key:d,value:p},S.list.push(S.entry),this[1].Mb.next=S.entry,this[1].Mb=S.entry,this.size++),this},a.prototype.delete=function(d){return d=r(this,d),d.entry&&d.list?(d.list.splice(d.index,1),d.list.length||delete this[0][d.id],d.entry.Mb.next=d.entry.next,d.entry.next.Mb=d.entry.Mb,d.entry.head=null,this.size--,!0):!1},a.prototype.clear=function(){this[0]={},this[1]=this[1].Mb=t(),this.size=0},a.prototype.has=function(d){return!!r(this,d).entry},a.prototype.get=function(d){return(d=r(this,d).entry)&&d.value},a.prototype.entries=function(){return n(this,function(d){return[d.key,d.value]})},a.prototype.keys=function(){return n(this,function(d){return d.key})},a.prototype.values=function(){return n(this,function(d){return d.value})},a.prototype.forEach=function(d,p){for(var S=this.entries(),T;!(T=S.next()).done;)T=T.value,d.call(p,T[1],T[0],this)},a.prototype[Symbol.iterator]=a.prototype.entries;var c=0;return a}),v("Set",function(e){function t(n){if(this.g=new Map,n){n=b(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(b([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var a=r.entries(),u=a.next();return u.done||u.value[0]!=n||u.value[1]!=n?!1:(u=a.next(),u.done||u.value[0]==n||u.value[0].x!=4||u.value[1]!=u.value[0]?!1:a.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var a=this;this.g.forEach(function(u){return n.call(r,u,u,a)})},t)});function me(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var u=n++;return{value:t(u,e[u]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}v("Array.prototype.keys",function(e){return e||function(){return me(this,function(t){return t})}});function Re(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,a=0;a<r;a++){var u=e[a];if(t.call(n,u,a,e))return{Dg:a,v:u}}return{Dg:-1,v:void 0}}v("Array.prototype.findIndex",function(e){return e||function(t,n){return Re(this,t,n).Dg}}),v("Array.from",function(e){return e||function(t,n,r){n=n??function(d){return d};var a=[],u=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof u=="function"){t=u.call(t);for(var c=0;!(u=t.next()).done;)a.push(n.call(r,u.value,c++))}else for(u=t.length,c=0;c<u;c++)a.push(n.call(r,t[c],c));return a}}),v("Array.prototype.values",function(e){return e||function(){return me(this,function(t,n){return n})}}),v("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),v("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var a=r.length;for(n=n||0,0>n&&(n=Math.max(n+a,0));n<a;n++){var u=r[n];if(u===t||Object.is(u,t))return!0}return!1}});function Ne(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}v("String.prototype.includes",function(e){return e||function(t,n){return Ne(this,t,"includes").indexOf(t,n||0)!==-1}}),v("String.fromCodePoint",function(e){return e||function(t){for(var n="",r=0;r<arguments.length;r++){var a=Number(arguments[r]);if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),n+=String.fromCharCode(a&1023|56320))}return n}}),v("Array.prototype.find",function(e){return e||function(t,n){return Re(this,t,n).v}}),v("String.prototype.startsWith",function(e){return e||function(t,n){var r=Ne(this,t,"startsWith"),a=r.length,u=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var c=0;c<u&&n<a;)if(r[n++]!=t[c++])return!1;return c>=u}}),v("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=b(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),a=new e([n]);return!a.has(n)||a.has(r)?!1:(a.delete(n),a.add(r),!a.has(n)&&a.has(r))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)});var $e=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var a in r)Se(r,a)&&(e[a]=r[a])}return e};v("Object.assign",function(e){return e||$e}),v("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),v("Array.prototype.entries",function(e){return e||function(){return me(this,function(t,n){return[t,n]})}}),v("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),v("String.prototype.repeat",function(e){return e||function(t){var n=Ne(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),v("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),v("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)Se(t,r)&&n.push(t[r]);return n}}),v("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),v("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),v("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),v("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)Se(t,r)&&n.push([r,t[r]]);return n}});var Pe=this||self;function ve(e,t){e=e.split(".");var n=Pe;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function Ye(){}function it(){}function Ke(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}Ke.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function lt(e){return e.h/(1-Math.pow(e.g,e.i))}function St(){this.h=new Ke(2),this.j=new Ke(5),this.g=0,this.i=128e3,this.l=16e3}St.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},St.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},St.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(lt(this.h),lt(this.j))};function ft(){}function Tt(){}function je(){}function Dt(e){var t=De.apply(1,arguments);un.has(e)||(un.add(e),je.apply(ft,_(t)))}function wt(){}function Qe(){}function gn(){}var un=new Set;h.console&&(je=function(){return console.warn.apply(console,_(De.apply(0,arguments)))},Tt=function(){console.error.apply(console,_(De.apply(0,arguments)))});function qt(){this.g={}}w=qt.prototype,w.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},w.get=function(e){return(e=this.g[e])?e.slice():null},w.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},w.forEach=function(e){for(var t in this.g)e(t,this.g[t])},w.size=function(){return Object.keys(this.g).length},w.keys=function(){return Object.keys(this.g)};function xt(){this.g=new qt}w=xt.prototype,w.release=function(){this.Ra(),this.g=null},w.D=function(e,t,n,r){this.g&&(e=new Gt(e,t,n,r),this.g.push(t,e))},w.ha=function(e,t,n,r){function a(c){u.jb(e,t,a),n(c)}var u=this;this.D(e,t,a,r)},w.jb=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=b(r);for(var a=r.next();!a.done;a=r.next())a=a.value,a.target!=e||n!=a.listener&&n||(a.jb(),this.g.remove(t,a))}},w.Ra=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,_(e.g[n]));for(e=b(t),t=e.next();!t.done;t=e.next())t.value.jb();this.g.g={}}},ve("shaka.util.EventManager",xt),xt.prototype.removeAll=xt.prototype.Ra,xt.prototype.unlisten=xt.prototype.jb,xt.prototype.listenOnce=xt.prototype.ha,xt.prototype.listen=xt.prototype.D,xt.prototype.release=xt.prototype.release;function Gt(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=vt(e,r),this.target.addEventListener(t,n,this.g)}Gt.prototype.jb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function vt(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),Ot(e)?t:t.capture||!1}function Ot(e){var t=uo;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch{t=!1}uo=t}return t||!1}var uo=void 0;function bt(e){if(kn.has(e))return kn.get(e);if(h.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return kn.set(e,t),t}return h.MediaSource?(t=MediaSource.isTypeSupported(e),kn.set(e,t),t):!1}function jt(){return!!h.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var kn=new Map;function to(e,t){this.g=e,this.h=t}to.prototype.toString=function(){return"v"+this.g+"."+this.h};function Et(e,t){var n=new to(5,0),r=Qt,a=r.g,u=n.h-a.h;(0<(n.g-a.g||u)?r.i:r.h)(r.g,n,e,t)}function En(e,t,n,r){je([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Jo(e,t,n,r){Tt([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var Qt=null;function Rn(){}Rn.prototype.extract=function(){},Rn.prototype.decode=function(){return[]},Rn.prototype.clear=function(){},Rn.prototype.getStreams=function(){return[]};function Mo(){}Mo.prototype.init=function(){},Mo.prototype.parse=function(){return[]};function Ln(){}function Kn(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(ro(e)==ro(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=st(e);t=st(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function ro(e){return e instanceof ArrayBuffer?e:e.buffer}function Dn(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function st(e,t,n){return n=n===void 0?1/0:n,ei(e,t===void 0?0:t,n,Uint8Array)}function _o(e,t,n){return n=n===void 0?1/0:n,ei(e,t===void 0?0:t,n,Uint16Array)}function hn(e,t,n){return n=n===void 0?1/0:n,ei(e,t===void 0?0:t,n,DataView)}function ei(e,t,n,r){var a=ro(e),u=1;"BYTES_PER_ELEMENT"in r&&(u=r.BYTES_PER_ELEMENT);var c=((e.byteOffset||0)+e.byteLength)/u;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/u,c))),new r(a,e,Math.floor(Math.min(e+Math.max(n,0),c))-e)}ve("shaka.util.BufferUtils",Ln),Ln.toDataView=hn,Ln.toUint16=_o,Ln.toUint8=st,Ln.toArrayBuffer=Dn,Ln.equal=Kn;function Fn(){}Fn.prototype.init=function(){},Fn.prototype.i=function(){},Fn.prototype.g=function(){},Fn.prototype.j=function(){},ve("shaka.media.IClosedCaptionParser",Fn);function fn(e){this.l=new Mo,(e=$n[e.toLowerCase()])&&(this.l=e()),this.h=new Rn,(e=no)&&(this.h=e())}fn.prototype.init=function(e,t){t!==void 0&&t||this.g(),this.l.init(e)},fn.prototype.i=function(e){e=this.l.parse(e),e=b(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=st(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},fn.prototype.g=function(){this.h.clear()},fn.prototype.j=function(){return this.h.getStreams()},ve("shaka.media.ClosedCaptionParser",fn),fn.findDecoder=function(){return no},fn.unregisterDecoder=function(){no=null},fn.registerDecoder=function(e){no=e},fn.findParser=function(e){return $n[e]},fn.unregisterParser=function(e){delete $n[e]},fn.registerParser=function(e,t){$n[e]=t};var $n={},no=null;function An(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=In,this.scroll=ot}ve("shaka.text.CueRegion",An);var In=1;An.units={PX:0,PERCENTAGE:In,LINES:2};var ot="";An.scrollMode={NONE:ot,UP:"up"};function Ve(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Zt(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function wn(e,t,n){if(n||(n=Ve),e.length!=t.length)return!1;t=t.slice(),e=b(e);for(var r=e.next(),a={};!r.done;a={Gg:void 0},r=e.next()){if(a.Gg=r.value,r=t.findIndex(function(u){return function(c){return n(u.Gg,c)}}(a)),r==-1)return!1;t[r]=t[t.length-1],t.pop()}return t.length==0}function Bn(e,t,n){if(n||(n=Ve),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Ct(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new An,this.position=null,this.positionAlign=We,this.size=0,this.textAlign=qe,this.direction=ht,this.writingMode=Pt,this.lineInterpretation=At,this.line=null,this.lineHeight="",this.lineAlign=Ce,this.displayAlign=Me,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=zn,this.fontStyle=yn,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={dc:32,rows:15}}function Ge(e,t){return e=new Ct(e,t,""),e.lineBreak=!0,e}Ct.prototype.clone=function(){var e=new Ct(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function ie(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Bn(e.nestedCues,t.nestedCues,ie))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!Bn(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}ve("shaka.text.Cue",Ct),Ct.equal=ie,Ct.prototype.clone=Ct.prototype.clone;var We="auto";Ct.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:We};var qe="center",Ze={LEFT:"left",RIGHT:"right",CENTER:qe,START:"start",END:"end"};Ct.textAlign=Ze;var Me="after",Be={BEFORE:"before",CENTER:"center",AFTER:Me};Ct.displayAlign=Be;var ht="ltr";Ct.direction={HORIZONTAL_LEFT_TO_RIGHT:ht,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Pt="horizontal-tb";Ct.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Pt,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var At=0;Ct.lineInterpretation={LINE_NUMBER:At,PERCENTAGE:1};var Ce="start",pe={CENTER:"center",START:Ce,END:"end"};Ct.lineAlign=pe;var nt={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Ct.defaultTextColor=nt;var Bt={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Ct.defaultTextBackgroundColor=Bt;var zn=400;Ct.fontWeight={NORMAL:zn,BOLD:700};var yn="normal",Yn={NORMAL:yn,ITALIC:"italic",OBLIQUE:"oblique"};Ct.fontStyle=Yn,Ct.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Fe(){}Fe.prototype.destroy=function(){};function Le(e,t,n){Uo[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ie:t}}function fo(e,t){for(var n=e.toLowerCase().split(";")[0],r=b([Wi,Oi,Bo,ti]),a=r.next();!a.done;a=r.next())if(a=Uo[n+"-"+a.value]){var u=a.ie(),c=u.isSupported(e,t);if(u.destroy(),c)return a.ie}return null}ve("shaka.transmuxer.TransmuxerEngine",Fe),Fe.findTransmuxer=fo,Fe.unregisterTransmuxer=function(e,t){delete Uo[e.toLowerCase().split(";")[0]+"-"+t]},Fe.registerTransmuxer=Le,Fe.prototype.destroy=Fe.prototype.destroy;var Uo={},ti=1,Bo=2,Oi=3,Wi=4;Fe.PluginPriority={FALLBACK:ti,PREFERRED_SECONDARY:Bo,PREFERRED:Oi,APPLICATION:Wi};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var pl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Sn(e){var t;e instanceof Sn?(Ft(this,e.Bb),this.uc=e.uc,kt(this,e.Eb),di(this,e.Mc),this.Pa=e.Pa,Ni(this,e.g.clone()),this.ec=e.ec):e&&(t=String(e).match(pl))?(Ft(this,t[1]||"",!0),this.uc=Xi(t[2]||""),kt(this,t[3]||"",!0),di(this,t[4]),this.Pa=Xi(t[5]||"",!0),Ni(this,t[6]||"",!0),this.ec=Xi(t[7]||"")):this.g=new ml(null)}w=Sn.prototype,w.Bb="",w.uc="",w.Eb="",w.Mc=null,w.Pa="",w.ec="",w.toString=function(){var e=[],t=this.Bb;if(t&&e.push(qi(t,ts,!0),":"),t=this.Eb){e.push("//");var n=this.uc;n&&e.push(qi(n,ts,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Mc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.Eb&&t.charAt(0)!="/"&&e.push("/"),e.push(qi(t,t.charAt(0)=="/"?ab:sb,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.ec)&&e.push("#",qi(t,ub)),e.join("")},w.resolve=function(e){var t=this.clone();t.Bb==="data"&&(t=new Sn);var n=!!e.Bb;n?Ft(t,e.Bb):n=!!e.uc,n?t.uc=e.uc:n=!!e.Eb,n?kt(t,e.Eb):n=e.Mc!=null;var r=e.Pa;if(n)di(t,e.Mc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.Eb&&!this.Pa)r="/"+r;else{var a=t.Pa.lastIndexOf("/");a!=-1&&(r=t.Pa.substr(0,a+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){a=r.lastIndexOf("/",0)==0,r=r.split("/");for(var u=[],c=0;c<r.length;){var d=r[c++];d=="."?a&&c==r.length&&u.push(""):d==".."?((1<u.length||u.length==1&&u[0]!="")&&u.pop(),a&&c==r.length&&u.push("")):(u.push(d),a=!0)}r=u.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?Ni(t,e.g.clone()):n=!!e.ec,n&&(t.ec=e.ec),t},w.clone=function(){return new Sn(this)};function Ft(e,t,n){e.Bb=n?Xi(t,!0):t,e.Bb&&(e.Bb=e.Bb.replace(/:$/,""))}function kt(e,t,n){e.Eb=n?Xi(t,!0):t}function di(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Mc=t}else e.Mc=null}function Ni(e,t,n){t instanceof ml?e.g=t:(n||(t=qi(t,lb)),e.g=new ml(t))}function Xi(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function qi(e,t,n){return e!=null?(e=encodeURI(e).replace(t,Os),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Os(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var ts=/[#\/\?@]/g,sb=/[#\?:]/g,ab=/[#\?]/g,lb=/[#\?@]/g,ub=/#/g;function ml(e){this.g=e||null}function nf(e){if(!e.Ka&&(e.Ka={},e.Xc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),a=null;if(0<=r){var u=t[n].substring(0,r);a=t[n].substring(r+1)}else u=t[n];u=decodeURIComponent(u.replace(/\+/g," ")),a=a||"",e.add(u,decodeURIComponent(a.replace(/\+/g," ")))}}w=ml.prototype,w.Ka=null,w.Xc=null;function Lg(e){return nf(e),e.Xc}w.add=function(e,t){nf(this),this.g=null;var n=this.Ka.hasOwnProperty(e)?this.Ka[e]:null;return n||(this.Ka[e]=n=[]),n.push(t),this.Xc++,this},w.set=function(e,t){return nf(this),this.g=null,this.Ka.hasOwnProperty(e)?this.Ka[e]=[t]:this.add(e,t),this},w.get=function(e){return nf(this),this.Ka[e]||[]},w.toString=function(){if(this.g)return this.g;if(!this.Ka)return"";var e=[],t;for(t in this.Ka)for(var n=encodeURIComponent(t),r=this.Ka[t],a=0;a<r.length;a++){var u=n;r[a]!==""&&(u+="="+encodeURIComponent(r[a])),e.push(u)}return this.g=e.join("&")},w.clone=function(){var e=new ml;if(e.g=this.g,this.Ka){var t={},n;for(n in this.Ka)t[n]=this.Ka[n].concat();e.Ka=t,e.Xc=this.Xc}return e};function re(e,t,n){var r=De.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(a){this.stack=a.stack}}re.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},ve("shaka.util.Error",re),re.Severity={RECOVERABLE:1,CRITICAL:2},re.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},re.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function Ns(e){this.h=e,this.g=void 0}Ns.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Dg(e,t){return e.length&&t.length&&e!==t?0<Sd(e,t).length:!0}function Sd(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=b(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var a=b(t),u=a.next();!u.done;u=a.next())if(u=u.value,r.keySystem==u.keySystem){a=new Map;for(var c=b((r.initData||[]).concat(u.initData||[])),d=c.next();!d.done;d=c.next())d=d.value,a.set(d.keyId,d);a=Array.from(a.values()),c=r.keyIds&&u.keyIds?new Set([].concat(_(r.keyIds),_(u.keyIds))):r.keyIds||u.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||u.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||u.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||u.persistentStateRequired,videoRobustness:r.videoRobustness||u.videoRobustness,audioRobustness:r.audioRobustness||u.audioRobustness,serverCertificate:r.serverCertificate||u.serverCertificate,serverCertificateUri:r.serverCertificateUri||u.serverCertificateUri,initData:a,keyIds:c});break}}return n}function Cd(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}var of=new Ns(function(){return Dn(new Uint8Array([0]))}),rf=new Map;function gl(e){this.h=e,this.g=null}gl.prototype.Y=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){h.clearTimeout(r),n=!1},r=h.setTimeout(function(){n&&t.h()},1e3*e),this},gl.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function It(e){this.h=e,this.g=null}It.prototype.tc=function(){return this.stop(),this.h(),this},It.prototype.Y=function(e){var t=this;return this.stop(),this.g=new gl(function(){t.h()}).Y(e),this},It.prototype.Sa=function(e){var t=this;return this.stop(),this.g=new gl(function(){t.g.Y(e),t.h()}).Y(e),this},It.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},ve("shaka.util.Timer",It),It.prototype.stop=It.prototype.stop,It.prototype.tickEvery=It.prototype.Sa,It.prototype.tickAfter=It.prototype.Y,It.prototype.tickNow=It.prototype.tc;function Ui(){var e=h.ManagedMediaSource||h.MediaSource;return!!(e&&e.isTypeSupported)}function yl(e){return Og().canPlayType(e)!=""}function vl(){return!!navigator.userAgent.match(/Edge?\//)}function Ki(){return Jt("Xbox One")}function Yi(){return Jt("Tizen")}function xl(){return Jt("Tizen 3")}function sf(){return Jt("Tizen 2")}function Qi(){return Jt("Web0S")}function af(){return Qi()&&Td()===38}function ni(){return Jt("CrKey")}function Td(){if(!Jt("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function Us(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Yi()&&!Jt("PC=EOS")&&!Jt("PC=APL")&&!Jt("VirginMedia")&&!bd()&&!Zi()&&!Jt("AFT")&&!Jt("WPE")&&!Jt("DT_STB_BCM")}function lf(){return Jt("PlayStation 5")}function Zi(){return Jt("PlayStation 4")}function uf(){return Jt("Hisense")||Jt("VIDAA")}function bd(){return Jt("SOPOpenBrowser")}function Bs(){if(!Us())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function kd(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("windows"):!1}function ff(){return Jt("Android")}function Pg(){return!!(Yi()||Qi()||Ki()||Zi()||lf()||Jt("AFT")||Jt("PC=EOS")||Jt("PC=APL")||Jt("VirginMedia")||bd()||Jt("WPE")||ni()||uf()||Jt("DT_STB_BCM"))}function Jt(e){return(navigator.userAgent||"").includes(e)}function Og(){return js||(Ed||(Ed=new It(function(){js=null})),(js=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(js=document.createElement("video")),Ed.Y(1),js)}function cf(e){return e?e===h.shakaMediaKeysPolyfill:!!h.shakaMediaKeysPolyfill}function Ng(){var e,t,n,r,a,u,c,d,p,S,T,k,A,E,R;return V(function(D){switch(D.g){case 1:if(e={width:1/0,height:1/0},ni()){if(k=h.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,ee(D,15),!(A=k)){D.u(17);break}return I(D,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(Yi()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{je("Tizen: Error detecting screen size, default screen size 1920x1080.")}D.u(3);break}if(Ki()){e.width=1920,e.height=1080;try{n=void 0,n=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows,r=new n.Media.Protection.ProtectionCapabilities,a=n.Media.Protection.ProtectionCapabilityResult,u=null;do u=r.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(u===a.maybe);u===a.probably&&(e.width=3840,e.height=2160)}catch{je("Xbox: Error detecting screen size, default screen size 1920x1080.")}D.u(3);break}if(Qi()){try{c=JSON.parse(h.PalmSystem.deviceInfo),e.width=Math.max(1920,c.screenWidth),e.height=Math.max(1080,c.screenHeight)}catch{je("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}D.u(3);break}if(uf()){h.Hisense_Get4KSupportState&&h.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),D.u(3);break}if(!Zi()&&!lf()){D.u(3);break}return d=!1,ee(D,9),I(D,h.msdk.device.getDisplayInfo(),11);case 11:p=D.h,d=p.resolution==="4K",ne(D,10);break;case 9:return Y(D),ee(D,12),I(D,h.msdk.device.getDisplayInfoImmediate(),14);case 14:S=D.h,d=S.resolution==="4K",ne(D,10);break;case 12:T=Y(D),je("PlayStation: Failed to get the display info:",T);case 10:d?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),D.u(3);break;case 18:A=D.h;case 17:if(A){e.width=3840,e.height=2160,D.u(19);break}if(!(E=k)){D.u(20);break}return I(D,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:E=D.h;case 20:E&&(e.width=1920,e.height=1080);case 19:ne(D,3);break;case 15:R=Y(D),Tt("Failed to check canDisplayType:",R);case 3:return D.return(e)}})}var Ed=null,js=null;function ns(){}function dn(e){if(!e)return"";if(e=st(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),h.TextDecoder&&!Zi())return e=new TextDecoder().decode(e),e.includes("�")&&Tt('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if((e[n]&128)==0?r=e[n]:e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3),65535>=r)t+=String.fromCharCode(r);else{r-=65536;var a=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+a)}}return t}function rr(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new re(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=hn(e);for(var a=0;a<n;a++)r[a]=e.getUint16(2*a,t);return Id(r)}function sr(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=st(e);if(n[0]==239&&n[1]==187&&n[2]==191)return dn(n);if(n[0]==254&&n[1]==255)return rr(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return rr(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return rr(e,!1);if(n[1]==0&&n[3]==0)return rr(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return dn(e);throw new re(2,2,2003)}function Bi(e){if(h.TextEncoder&&!Zi()){var t=new TextEncoder;return Dn(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Dn(t)}function Ad(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),a=0;a<e.length;++a)r.setUint16(2*a,e.charCodeAt(a),t);return n}function Id(e){return Ug.value()(e)}function Ro(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(a){return a[1]=="#"?(a=a[2]=="x"||a[2]=="X"?parseInt(a.substring(3),16):parseInt(a.substring(2),10),0<=a&&1114111>=a?String.fromCodePoint(a):""):t[a]||"'"}):e||""}ve("shaka.util.StringUtils",ns),ns.resetFromCharCode=function(){Ug.g=void 0},ns.toUTF16=Ad,ns.toUTF8=Bi,ns.fromBytesAutoDetect=sr,ns.fromUTF16=rr,ns.fromUTF8=dn;var Ug=new Ns(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch{return!1}}for(var t={ac:65536};0<t.ac;t={ac:t.ac},t.ac/=2)if(e(t.ac))return function(n){return function(r){for(var a="",u=0;u<r.length;u+=n.ac)a+=String.fromCharCode.apply(null,r.subarray(u,u+n.ac));return a}}(t);return null});function Co(){}function Bg(e){return e=Id(st(e)),btoa(e)}function os(e,t){return t=t??!0,e=Bg(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function pi(e){e=h.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function is(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=h.parseInt(e.substr(2*r,2),16);return n}function ar(e){var t=st(e);e="",t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function Pn(){for(var e=De.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var a=e[r];a instanceof Uint8Array?t.set(a,n):t.set(st(a),n),n+=a.byteLength}return t}ve("shaka.util.Uint8ArrayUtils",Co),Co.concat=Pn,Co.toHex=ar,Co.fromHex=is,Co.fromBase64=pi,Co.toBase64=os,Co.toStandardBase64=Bg;function ho(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new Sn(e[0]);return t=new Sn(t[0]),[n.resolve(t).toString()]}t=t.map(function(c){return new Sn(c)}),n=[],e=b(e);for(var r=e.next();!r.done;r=e.next()){r=new Sn(r.value);for(var a=b(t),u=a.next();!u.done;u=a.next())n.push(r.resolve(u.value).toString())}return n}function rs(e,t,n,r){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},r&&(e.keySystemUris=new Set([r])),e}function jg(e,t){t=t===void 0?"cenc":t;var n=[],r=[],a=[];e.forEach(function(c,d){var p=d;p.length!=22&&(p=os(is(d),!1));var S=c;S.length!=22&&(S=os(is(c),!1)),c={kty:"oct",kid:p,k:S},n.push(c),r.push(c.kid),a.push(d)}),e=JSON.stringify({keys:n});var u=JSON.stringify({kids:r});return u=[{initData:st(Bi(u)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+h.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:u,keyIds:new Set(a)}}function Fs(e,t){if(t.length==1)return t[0];if(e=jo(e,t),e!=null)return e;throw new re(2,4,4025,t)}function jo(e,t){for(var n=b(Fg[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var a=b(t),u=a.next();!u.done;u=a.next())if(u=u.value,r.test(u.trim()))return u.trim()}return e==Nt?"":null}function Md(e,t){var n=[];e=b(Fg[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var a=b(t),u=a.next();!u.done;u=a.next())u=u.value,r.test(u.trim())&&n.push(u.trim())}return n}var Nt="text",Gn={ga:"video",X:"audio",ua:Nt,De:"image",gj:"application"},fb=1/15,Fg={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function _d(){}function Wn(e,t){var n=e;return t&&!Dr.includes(e)&&(n+='; codecs="'+t+'"'),n}function ss(e,t){return t&&(e+='; codecs="'+t+'"'),e}function $s(e,t,n){var r=Wn(e,t);return t=ss(e,t),fo(t)?(e=fo(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function cb(e,t,n){var r=[t];return hb.forEach(function(a,u){var c=e[u];u=="codecs"?Dr.includes(e.mimeType)||r.push('codecs="'+n+'"'):c&&r.push(a+'="'+c+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function hf(e){return e.split(";")[0].split("/")[1]}function Lo(e){var t=zg(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function zs(e){var t=[];e=b(e.split(","));for(var n=e.next();!n.done;n=e.next())n=zg(n.value),t.push(n[0]);return t.sort().join(",")}function ki(e){return e.split(";")[0]}function oi(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function $g(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function zg(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}ve("shaka.util.MimeUtils",_d),_d.getFullTypeWithAllCodecs=ss,_d.getFullType=Wn;var hb=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Dr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function lr(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function wl(e){return Xn[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!no:!1}lr.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function db(e,t,n,r,a){var u,c,d,p,S,T,k;return V(function(A){if(A.g==1)return I(A,Promise.resolve(),2);if(!e.i||!e.j)return A.return();if(n==null||r==null)return e.i.parseInit(st(t)),A.return();for(u=e.B?n:e.s,c={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:u},d=e.i.parseMedia(st(t),c,a),p=b(d),S=p.next();!S.done;S=p.next())T=S.value,e.A(T,a||null,c);k=d.filter(function(E){return E.startTime>=e.l&&E.startTime<e.m}),e.j.append(k),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),q(A)})}lr.prototype.remove=function(e,t){var n=this;return V(function(r){if(r.g==1)return I(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),q(r)})};function pb(e,t,n){e.l=t,e.m=n}function Vg(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=b(t.keys()),a=r.next();!a.done;a=r.next())(a=t.get(a.value).filter(function(u){return u.endTime<=n}))&&e.j.append(a)}function Hg(e,t,n){t.startTime+=n,t.endTime+=n,t=b(t.nestedCues);for(var r=t.next();!r.done;r=t.next())Hg(e,r.value,n)}function mb(e,t,n,r,a){var u=n+" "+r,c=new Map;t=b(t);for(var d=t.next();!d.done;d=t.next()){var p=d.value;d=p.stream,p=p.cue,c.has(d)||c.set(d,new Map),c.get(d).has(u)||c.get(d).set(u,[]),Hg(e,p,a),p.startTime>=e.l&&p.startTime<e.m&&(c.get(d).get(u).push(p),d==e.C&&e.j.append([p]))}for(a=b(c.keys()),u=a.next();!u.done;u=a.next())for(u=u.value,e.o.has(u)||e.o.set(u,new Map),t=b(c.get(u).keys()),d=t.next();!d.done;d=t.next())d=d.value,p=c.get(u).get(d),e.o.get(u).set(d,p);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}ve("shaka.text.TextEngine",lr),lr.prototype.destroy=lr.prototype.destroy,lr.findParser=function(e){return Xn[e]},lr.unregisterParser=function(e){delete Xn[e]},lr.registerParser=function(e,t){Xn[e]=t};var Xn={};function gb(e,t){return e.concat(t)}function Gg(){}function as(e){return e!=null}function Ei(){}function Vs(e,t){return e=Kt(e),t=Kt(t),e.split("-")[0]==t.split("-")[0]}function Sl(e,t){return e=Kt(e),t=Kt(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Rd(e,t){return e=Kt(e),t=Kt(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Kt(e){e=b(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=b(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Wg.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function ls(e,t){return e=Kt(e),t=Kt(t),t==e?4:Sl(t,e)?3:Rd(t,e)?2:Sl(e,t)?1:0}function Ld(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=Wg.get(e)||e}function Dd(e){return e.language?Kt(e.language):e.audio&&e.audio.language?Kt(e.audio.language):e.video&&e.video.language?Kt(e.video.language):"und"}function df(e,t){e=Kt(e);var n=new Set;t=b(t);for(var r=t.next();!r.done;r=t.next())n.add(Kt(r.value));for(t=b(n),r=t.next();!r.done;r=t.next())if(r=r.value,r==e)return r;for(t=b(n),r=t.next();!r.done;r=t.next())if(r=r.value,Sl(r,e))return r;for(t=b(n),r=t.next();!r.done;r=t.next())if(r=r.value,Rd(r,e))return r;for(n=b(n),t=n.next();!t.done;t=n.next())if(t=t.value,Sl(e,t))return t;return null}ve("shaka.util.LanguageUtils",Ei),Ei.findClosestLocale=df,Ei.getLocaleForVariant=Dd,Ei.getLocaleForText=function(e){return Kt(e.language||"und")},Ei.getBase=Ld,Ei.relatedness=ls,Ei.areSiblings=function(e,t){var n=Ld(e),r=Ld(t);return e!=n&&t!=r&&n==r},Ei.normalize=Kt,Ei.isSiblingOf=Rd,Ei.isParentOf=Sl,Ei.areLanguageCompatible=Vs,Ei.areLocaleCompatible=function(e,t){return e=Kt(e),t=Kt(t),e==t};var Wg=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Ji(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer instanceof ArrayBuffer)return r;if(n.has(r))return null;var a=r.constructor==Array;if(r.constructor!=Object&&!a)return null;n.add(r);var u=a?[]:{},c;for(c in r)u[c]=t(r[c]);return a&&(u.length=r.length),u}}var n=new WeakSet;return t(e)}function Pd(e){var t={},n;for(n in e)t[n]=e[n];return t}function Xg(){}function qg(e,t,n,r){var a=e.variants;if((t.length||n.length)&&(a=yb(a,t,n)),r.length){for(t=new qt,a=b(a),n=a.next();!n.done;n=a.next())n=n.value,t.push(String(n.video.width||0),n);var u=[];t.forEach(function(R,D){R=0;var L=[];D=b(D);for(var $=D.next(),N={};!$.done;N={Ae:void 0},$=D.next())N.Ae=$.value,$=r.filter(function(K){return function(O){return K.Ae.decodingInfos[0][O]}}(N)).length,$>R?(R=$,L=[N.Ae]):$==R&&L.push(N.Ae);u.push.apply(u,_(L))}),a=u}n=new Set,t=new Set,a=b(a);for(var c=a.next();!c.done;c=a.next())c=c.value,c.audio&&n.add(c.audio),c.video&&t.add(c.video);n=Array.from(n).sort(function(R,D){return R.bandwidth-D.bandwidth});var d=[];for(a=new Map,n=b(n),c=n.next();!c.done;c=n.next()){c=c.value;var p=c.language+(c.channelsCount||0)+(c.audioSamplingRate||0)+c.roles.join(",")+c.label+c.groupId+c.fastSwitching,S=a.get(p)||[];if(S.length){var T=S[S.length-1],k=Lo(T.codecs),A=Lo(c.codecs);k!=A||c.bandwidth&&T.bandwidth&&!(c.bandwidth>T.bandwidth)||(S.push(c),d.push(c.id))}else S.push(c),d.push(c.id);a.set(p,S)}n=Array.from(t).sort(function(R,D){return R.bandwidth&&D.bandwidth?R.bandwidth-D.bandwidth:R.width-D.width}),t=jt();var E=[];for(a=new Map,n=b(n),c=n.next();!c.done;c=n.next()){if(c=c.value,p=Math.round(c.frameRate||0)+(c.hdr||"")+c.fastSwitching,S=a.get(p)||[],S.length){if(T=S[S.length-1],!t&&(k=Lo(T.codecs),A=Lo(c.codecs),k!==A))continue;c.width>T.width||c.height>T.height?(S.push(c),E.push(c.id)):c.width==T.width&&c.height==T.height&&(k=Lo(T.codecs),A=Lo(c.codecs),k!=A||c.bandwidth&&T.bandwidth&&!(c.bandwidth>T.bandwidth)||(S.push(c),E.push(c.id)))}else S.push(c),E.push(c.id);a.set(p,S)}e.variants=e.variants.filter(function(R){var D=R.audio;return R=R.video,!(D&&!d.includes(D.id)||R&&!E.includes(R.id))})}function yb(e,t,n){t=b(t);for(var r=t.next(),a={};!r.done;a={oh:void 0},r=t.next())if(a.oh=r.value,r=e.filter(function(u){return function(c){return c.video&&c.video.codecs.startsWith(u.oh)}}(a)),r.length){e=r;break}for(n=b(n),t=n.next(),r={};!t.done;r={ig:void 0},t=n.next())if(r.ig=t.value,t=e.filter(function(u){return function(c){return c.audio&&c.audio.codecs.startsWith(u.ig)}}(r)),t.length){e=t;break}return e}function vb(e,t,n){e.variants=e.variants.filter(function(r){return pf(r,t,n)})}function pf(e,t,n){function r(d,p,S){return d>=p&&d<=S}var a=e.video;if(a&&a.width&&a.height){var u=a.width,c=a.height;if(c>u&&(c=b([c,u]),u=c.next().value,c=c.next().value),!r(u,t.minWidth,Math.min(t.maxWidth,n.width))||!r(c,t.minHeight,Math.min(t.maxHeight,n.height))||!r(a.width*a.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Kg(e,t,n){var r=!1;e=b(e);for(var a=e.next();!a.done;a=e.next()){a=a.value;var u=a.allowedByApplication;a.allowedByApplication=pf(a,t,n),u!=a.allowedByApplication&&(r=!0)}return r}function xb(e,t,n){return n=n===void 0?[]:n,V(function(r){return r.g==1?I(r,Yg(e,t,0<t.offlineSessionIds.length,n),2):(Tb(t),I(r,bb(t),0))})}function Yg(e,t,n,r){var a,u;return V(function(c){if(c.g==1)return Ki()&&wb(t.variants),I(c,Jg(t.variants,n,!1,r),2);a=null,e&&(u=e.g)&&(a=u.keySystem),t.variants=t.variants.filter(function(d){var p=Sb(d,a);if(!p){var S=[];d.audio&&S.push(iy(d.audio)),d.video&&S.push(iy(d.video))}return p}),q(c)})}function wb(e){var t={dvav:"avc3",dva1:"avc1",dvhe:"hev1",dvh1:"hvc1",dvc1:"vvc1",dvi1:"vvi1"},n=new Set;e=b(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&n.add(r.video);for(n=b(n),e=n.next();!e.done;e=n.next()){e=e.value,r=b(Object.keys(t));for(var a=r.next();!a.done;a=r.next())if(a=a.value,e.codecs.includes(a)){e.codecs=e.codecs.replace(a,t[a]);break}}}function Sb(e,t){var n=Ki(),r=Jt("Firefox")&&ff(),a=e.video,u=a&&a.width||0,c=a&&a.height||0;if(n&&a&&(1920<u||1080<c)&&(a.codecs.includes("avc1.")||a.codecs.includes("avc3.")))return!1;if(a){if(n=Cl(a.codecs),a.codecs.includes(",")){if(u=a.codecs.split(","),n=Fs("video",u),n=Cl(n),u=Fs("audio",u),u=Hs(u,a.mimeType),c=$s(a.mimeType,u,"audio"),!bt(c))return!1;n=[n,u].join()}if(u=$s(a.mimeType,n,"video"),!bt(u))return!1;a.codecs=n}if(a=e.audio,r&&a&&a.encrypted&&a.codecs.toLowerCase().includes("opus"))return!1;if(a){if(r=Hs(a.codecs,a.mimeType),n=$s(a.mimeType,r,"audio"),!bt(n))return!1;a.codecs=r}return e.decodingInfos.some(function(d){return!(!d.supported||t&&(d=d.keySystemAccess)&&d.keySystem!=t)})}function Qg(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=b(t);for(var r=t.next();!r.done;r=t.next()){var a=r.value;r=JSON.stringify(a),a=e[a],a instanceof Object?(a=Qg(a),n.push(r+":"+a)):(a=JSON.stringify(a),n.push(r+":"+a))}return"{"+n.join(",")+"}"}function Zg(e,t){var n,r,a,u,c,d,p;return V(function(S){if(S.g==1){for(n=function(T,k){if(T){var A=Pd(T);return A.supported=T.supported&&k.supported,A.powerEfficient=T.powerEfficient&&k.powerEfficient,A.smooth=T.smooth&&k.smooth,k.keySystemAccess&&!A.keySystemAccess&&(A.keySystemAccess=k.keySystemAccess),A}return k},r=null,a=[],u=b(t),c=u.next(),d={};!c.done;d={cache:void 0,Dd:void 0},c=u.next())p=c.value,d.Dd=Qg(p),d.cache=ry,d.cache[d.Dd]?r=n(r,d.cache[d.Dd]):a.push(Cb(p).then(function(T){return function(k){var A=null;k=b(k||[]);for(var E=k.next();!E.done;E=k.next())A=n(A,E.value);A&&(T.cache[T.Dd]=A,r=n(r,A))}}(d)));return I(S,Promise.all(a),2)}r&&e.decodingInfos.push(r),q(S)})}function Cb(e){var t=[""];e.video&&(t=oi(e.video.contentType).split(","));var n=[""];e.audio&&(n=oi(e.audio.contentType).split(","));var r=[];t=b(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;for(var u=b(n),c=u.next(),d={};!c.done;d={xc:void 0},c=u.next())c=c.value,d.xc=Ji(e),e.video&&(d.xc.video.contentType=Wn(ki(d.xc.video.contentType),a)),e.audio&&(d.xc.audio.contentType=Wn(ki(d.xc.audio.contentType),c)),r.push(new Promise(function(p){return function(S,T){navigator.mediaCapabilities.decodingInfo(p.xc).then(function(k){S(k)}).catch(T)}}(d)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function Jg(e,t,n,r){var a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H;return V(function(J){switch(J.g){case 1:if(e.some(function(oe){return oe.decodingInfos.length}))return J.return();a=b(r),u=a.next(),c={};case 2:if(u.done){J.u(4);break}c.Qg=u.value,d=!1,p=b(e),S=p.next();case 5:if(S.done){J.u(7);break}T=S.value,k=ey(T,t,n).filter(function(oe){return function(se){return se=se[0],(se.keySystemConfiguration&&se.keySystemConfiguration.keySystem)===oe.Qg}}(c)),A=b(k),E=A.next();case 8:if(E.done){J.u(10);break}return R=E.value,I(J,Zg(T,R),9);case 9:E=A.next(),J.u(8);break;case 10:T.decodingInfos.length&&(d=!0),S=p.next(),J.u(5);break;case 7:if(d)return J.return();c={Qg:void 0},u=a.next(),J.u(2);break;case 4:D=b(e),L=D.next();case 12:if(L.done){J.u(0);break}$=L.value,N=ey($,t,n).filter(function(oe){return oe=oe[0],oe=oe.keySystemConfiguration&&oe.keySystemConfiguration.keySystem,!oe||!r.includes(oe)}),K=b(N),O=K.next();case 15:if(O.done){L=D.next(),J.u(12);break}return H=O.value,I(J,Zg($,H),16);case 16:O=K.next(),J.u(15)}})}function ey(e,t,n){var r=e.audio,a=e.video,u=[],c=[];if(a)for(var d=b(a.fullMimeTypes),p=d.next();!p.done;p=d.next()){p=p.value;var S=oi(p);if(S.includes(",")&&!r){var T=S.split(","),k=ki(p);S=Fs("video",T),T=Fs("audio",T),T=Hs(T,k),k=$s(k,T,"audio"),c.push({contentType:k,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(S=Cl(S),p={contentType:$s(ki(p),S,"video"),width:a.width||64,height:a.height||64,bitrate:a.bandwidth||e.bandwidth||1,framerate:a.frameRate||1},a.hdr)switch(a.hdr){case"SDR":p.transferFunction="srgb";break;case"PQ":p.transferFunction="pq";break;case"HLG":p.transferFunction="hlg"}a.colorGamut&&(p.colorGamut=a.colorGamut),u.push(p)}if(r)for(d=b(r.fullMimeTypes),p=d.next();!p.done;p=d.next())S=p.value,p=ki(S),S=Hs(oi(S),p),p=$s(p,S,"audio"),c.push({contentType:p,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(d=[],u.length==0&&u.push(null),c.length==0&&c.push(null),u=b(u),p=u.next();!p.done;p=u.next())for(p=p.value,S=b(c),k=S.next();!k.done;k=S.next())k=k.value,T={type:n?"file":"media-source"},p&&(T.video=p),k&&(T.audio=k),d.push(T);if(c=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!c.length)return[d];for(e=[],n=new Map,c=b(c),u=c.next();!u.done;u=c.next())u=u.value,n.get(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u);for(c=t?"required":"optional",t=t?["persistent-license"]:["temporary"],u=b(n.keys()),p=u.next();!p.done;p=u.next()){for(p=p.value,S=[],k=b(d),T=k.next();!T.done;T=k.next()){T=Object.assign({},T.value);var A=n.get(p),E={keySystem:p,initDataType:"cenc",persistentState:c,distinctiveIdentifier:"optional",sessionTypes:t};A=b(A);for(var R=A.next();!R.done;R=A.next()){if(R=R.value,R.initData&&R.initData.length){for(var D=new Set,L=b(R.initData),$=L.next();!$.done;$=L.next())D.add($.value.initDataType);E.initDataType=R.initData[0].initDataType}R.distinctiveIdentifierRequired&&(E.distinctiveIdentifier="required"),R.persistentStateRequired&&(E.persistentState="required"),R.sessionType&&(E.sessionTypes=[R.sessionType]),r&&(E.audio?(R.encryptionScheme&&(E.audio.encryptionScheme=E.audio.encryptionScheme||R.encryptionScheme),E.audio.robustness=E.audio.robustness||R.audioRobustness):(E.audio={robustness:R.audioRobustness},R.encryptionScheme&&(E.audio.encryptionScheme=R.encryptionScheme)),E.audio.robustness==""&&delete E.audio.robustness),a&&(E.video?(R.encryptionScheme&&(E.video.encryptionScheme=E.video.encryptionScheme||R.encryptionScheme),E.video.robustness=E.video.robustness||R.videoRobustness):(E.video={robustness:R.videoRobustness},R.encryptionScheme&&(E.video.encryptionScheme=R.encryptionScheme)),E.video.robustness==""&&delete E.video.robustness)}T.keySystemConfiguration=E,S.push(T)}e.push(S)}return e}function Hs(e,t){return e.toLowerCase()=="flac"?Bs()?"fLaC":"flac":e.toLowerCase()==="opus"?Bs()&&hf(t)=="mp4"?"Opus":"opus":e}function Cl(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function Tb(e){e.textStreams=e.textStreams.filter(function(t){return t=Wn(t.mimeType,t.codecs),wl(t)})}function bb(e){var t,n,r,a,u,c,d;return V(function(p){switch(p.g){case 1:t=[],n=b(e.imageStreams),r=n.next();case 2:if(r.done){p.u(4);break}if(a=r.value,u=a.mimeType,u=="application/mp4"&&a.codecs=="mjpg"&&(u="image/jpg"),yf.has(u)){p.u(5);break}if(c=Ab.get(u),!c){yf.set(u,!1),p.u(5);break}return I(p,kb(c),7);case 7:d=p.h,yf.set(u,d);case 5:yf.get(u)&&t.push(a),r=n.next(),p.u(2);break;case 4:e.imageStreams=t,q(p)}})}function kb(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Gs(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,a=n?n.mimeType:null,u=t?t.codecs:null,c=n?n.codecs:null,d=[];c&&d.push(c),u&&d.push(u);var p=[];n&&p.push(n.mimeType),t&&p.push(t.mimeType),p=p[0]||null;var S=[];t&&S.push(t.kind),n&&S.push(n.kind),S=S[0]||null;var T=new Set;if(t)for(var k=b(t.roles),A=k.next();!A.done;A=k.next())T.add(A.value);if(n)for(k=b(n.roles),A=k.next();!A.done;A=k.next())T.add(A.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:S,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:p,audioMimeType:r,videoMimeType:a,codecs:d.join(", "),audioCodec:u,videoCodec:c,primary:e.primary,roles:Array.from(T),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,c.includes(",")&&(e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage)),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function mf(e){return{id:e.id,active:!1,type:Nt,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Od(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var a=e.tilesLayout;return r&&(a=r.tilesLayout||a),a&&t!=null&&(t/=Number(a.split("x")[0])),a&&n!=null&&(n/=Number(a.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:a||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Nd(e){return e.__shaka_id||(e.__shaka_id=Eb++),e.__shaka_id}function ty(e){var t=ny(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Ud(e){var t=ny(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function ny(e){var t=e.language;return{id:Nd(e),active:!1,type:"",bandwidth:0,language:Kt(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function Tl(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function gf(e){return e.filter(function(t){return Tl(t)})}function bl(e,t,n,r){var a=e,u=e.filter(function(p){return p.primary});u.length&&(a=u);var c=a.length?a[0].language:"";if(a=a.filter(function(p){return p.language==c}),t){var d=df(Kt(t),e.map(function(p){return p.language}));d&&(a=e.filter(function(p){return Kt(p.language)==d}))}if(a=a.filter(function(p){return p.forced==r}),n){if(e=oy(a,n),e.length)return e}else if(e=a.filter(function(p){return p.roles.length==0}),e.length)return e;return e=a.map(function(p){return p.roles}).reduce(gb,[]),e.length?oy(a,e[0]):a}function oy(e,t){return e.filter(function(n){return n.roles.includes(t)})}function iy(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}ve("shaka.util.StreamUtils",Xg),Xg.meetsRestrictions=pf;var ry={},Eb=0,yf=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),Ab=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function vn(){var e=this;this.A=null,this.j=!1,this.i=new St,this.F=new xt,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new St,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.s=[],this.B=1,this.G=!1,this.h=this.o=this.g=this.l=null,this.C=new It(function(){if(e.j&&e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=null}w=vn.prototype,w.stop=function(){this.A=null,this.j=!1,this.s=[],this.B=1,this.o=this.l=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.m=null},w.release=function(){this.F.release(),this.C=null},w.init=function(e){this.A=e},w.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:h.devicePixelRatio;e=h.screen.height*n,t=h.screen.width*n}this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:h.devicePixelRatio,e=Math.min(e,this.o.clientHeight*n),t=Math.min(t,this.o.clientWidth*n)),n=this.s.filter(function(S){return S&&!(S.audio&&S.audio.fastSwitching||S.video&&S.video.fastSwitching)}),n.length||(n=this.s);var r=n;if(n.length!=this.s.length&&(r=this.s.filter(function(S){return S&&!!(S.audio&&S.audio.fastSwitching||S.video&&S.video.fastSwitching)})),n=Bd(this,this.g.restrictions,r,1/0,1/0),e!=1/0||t!=1/0){n=Ib(n),n=b(n);for(var a=n.next();!a.done;a=n.next())if(a=a.value,a.height>=e&&a.width>=t){e=a.height,t=a.width;break}n=Bd(this,this.g.restrictions,r,e,t)}for(e=this.getBandwidthEstimate(),r.length&&!n.length&&(n=Bd(this,null,r,1/0,1/0),n=[n[0]]),t=n[0]||null,r=0;r<n.length;r++){a=n[r];for(var u=isNaN(this.B)?1:Math.abs(this.B),c=u*a.bandwidth/this.g.bandwidthDowngradeTarget,d={bandwidth:1/0},p=r+1;p<n.length;p++)if(a.bandwidth!=n[p].bandwidth){d=n[p];break}u=u*d.bandwidth/this.g.bandwidthUpgradeTarget,e>=c&&e<=u&&(t.bandwidth!=a.bandwidth||t.bandwidth==a.bandwidth&&t.video&&a.video&&(t.video.width<a.video.width||t.video.height<a.video.height))&&(t=a)}return this.l=Date.now(),t},w.enable=function(){this.j=!0},w.disable=function(){this.j=!1},w.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.i.sample(e,t),n&&this.l!=null&&this.j&&sy(this))},w.trySuggestStreams=function(){this.l!=null&&this.j&&sy(this)},w.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.m?this.m.getBandwidthEstimate(e):e},w.setVariants=function(e){this.s=e},w.playbackRateChanged=function(e){this.B=e},w.setMediaElement=function(e){var t=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in h&&(this.h=new ResizeObserver(function(){t.C.Y(Mb)}),this.h.observe(this.o))},w.setCmsdManager=function(e){this.m=e},w.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function sy(e){if(!e.G){var t=e.i;if(!(t.g>=t.i))return;e.G=!0,e.l-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.l<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Bd(e,t,n,r,a){if(e.m){var u=e.m.zg();u&&(n=n.filter(function(c){return c.bandwidth&&u?c.bandwidth<=u:!0}))}return t&&(n=n.filter(function(c){return pf(c,t,{width:a,height:r})})),n.sort(function(c,d){return c.bandwidth-d.bandwidth})}function Ib(e){var t=[];e=b(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,a){return r.width-a.width})}ve("shaka.abr.SimpleAbrManager",vn),vn.prototype.configure=vn.prototype.configure,vn.prototype.setCmsdManager=vn.prototype.setCmsdManager,vn.prototype.setMediaElement=vn.prototype.setMediaElement,vn.prototype.playbackRateChanged=vn.prototype.playbackRateChanged,vn.prototype.setVariants=vn.prototype.setVariants,vn.prototype.getBandwidthEstimate=vn.prototype.getBandwidthEstimate,vn.prototype.trySuggestStreams=vn.prototype.trySuggestStreams,vn.prototype.segmentDownloaded=vn.prototype.segmentDownloaded,vn.prototype.disable=vn.prototype.disable,vn.prototype.enable=vn.prototype.enable,vn.prototype.chooseVariant=vn.prototype.chooseVariant,vn.prototype.init=vn.prototype.init,vn.prototype.release=vn.prototype.release,vn.prototype.stop=vn.prototype.stop;var Mb=1;ve("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),ve("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function vf(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=b(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}vf.prototype.add=function(e,t,n){return ay(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function ay(e,t,n,r){var a;if(!(a=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(a=e.audio&&t.audio)){a=e.audio;var u=t.audio;a=!!((!a.channelsCount||!u.channelsCount||2<a.channelsCount||2<u.channelsCount)&&a.channelsCount!=u.channelsCount||a.spatialAudio!==u.spatialAudio||n&&!ly(a,u)||!uy(a.roles,u.roles)||r&&a.groupId!==u.groupId)}return!(r=a)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||ly(e,t))&&uy(e.roles,t.roles))),!r}vf.prototype.values=function(){return this.g.values()};function ly(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return zs(r)}),t=t.codecs.split(",").map(function(r){return zs(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function uy(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=b(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function fy(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Ws(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}fy.prototype.create=function(e){var t=this,n=this.h=="smooth"&&jt(),r=e.filter(function(a){return ay(t.i,a,!n,t.g)});return r.length?new vf(r[0],r,!n,this.g):this.j.create(e)};function Ws(e,t,n,r,a,u,c,d,p,S,T){this.A=e,this.B=t,this.i=n,this.j=r,this.C=a,this.m=u,this.h=c===void 0?"":c,this.l=d===void 0?"":d,this.o=p===void 0?"reload":p,this.s=S===void 0?!1:S,this.g=T===void 0?"":T}Ws.prototype.create=function(e){var t=[];t=_b(e,this.A);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=Rb(t,this.B),e.length&&(t=e),this.m&&(e=Nb(t,this.m),e.length&&(t=e)),this.j&&(e=Ob(t,this.j),e.length&&(t=e)),this.i&&(e=Pb(t,this.i),e.length&&(t=e)),this.h&&(e=Lb(t,this.h),e.length&&(t=e)),this.l&&(e=Db(t,this.l),e.length&&(t=e)),e=Ub(t,this.C),e.length&&(t=e),this.g&&(e=Bb(t,this.g),e.length&&(t=e)),new vf(t[0],t,!(this.o=="smooth"&&jt()),this.s)};function _b(e,t){t=Kt(t);var n=df(t,e.map(function(r){return Dd(r)}));return n?e.filter(function(r){return n==Dd(r)}):[]}function Rb(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function Lb(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function Db(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function Pb(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function Ob(e,t){return t=="AUTO"&&(t=h.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function Nb(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function Ub(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Bb(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function jb(){this.g=kl,this.i=new Map().set(kl,2).set(Xs,1),this.h=0}function cy(e,t,n){e.i.set(kl,n).set(Xs,t)}var Xs=0,kl=1;function hy(e,t){var n=ji();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function dy(e){var t,n;return V(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new re(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),I(r,new Promise(function(a){new It(a).Y(n/1e3)}),2))}e.h*=e.m,q(r)})}function ji(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function en(){var e,t,n=new Promise(function(r,a){e=r,t=a});return n.resolve=e,n.reject=t,n}en.prototype.resolve=function(){},en.prototype.reject=function(){};function jn(e,t){this.promise=e,this.i=t,this.g=!1}function us(e){return new jn(Promise.reject(e),function(){return Promise.resolve()})}function jd(){var e=Promise.reject(new re(2,7,7001));return e.catch(function(){}),new jn(e,function(){return Promise.resolve()})}function qs(e){return new jn(Promise.resolve(e),function(){return Promise.resolve()})}function py(e){return new jn(e,function(){return e.catch(function(){})})}jn.prototype.abort=function(){return this.g=!0,this.i()};function my(e){return new jn(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}jn.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},jn.prototype.Aa=function(e,t){function n(d){return function(p){if(a.g&&d)u.reject(c);else{var S=d?e:t;S?r=Fb(S,p,u):(d?u.resolve:u.reject)(p)}}}function r(){return u.reject(c),a.abort()}var a=this,u=new en,c=new re(2,7,7001);return this.promise.then(n(!0),n(!1)),new jn(u,function(){return r()})};function Fb(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(a){return n.reject(a),function(){return Promise.resolve()}}}ve("shaka.util.AbortableOperation",jn),jn.prototype.chain=jn.prototype.Aa,jn.prototype.finally=jn.prototype.finally,jn.all=my,jn.prototype.abort=jn.prototype.abort,jn.notAbortable=py,jn.completed=qs,jn.aborted=jd,jn.failed=us;function He(e,t){if(t)if(t instanceof Map)for(var n=b(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=h.performance&&h.performance.now?h.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function gy(e){var t=new He(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}He.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},He.prototype.stopImmediatePropagation=function(){this.g=!0},He.prototype.stopPropagation=function(){},ve("shaka.util.FakeEvent",He);var xf={ij:"abrstatuschanged",jj:"adaptation",kj:"audiotrackchanged",lj:"buffering",mj:"complete",nj:"downloadfailed",oj:"downloadheadersreceived",pj:"drmsessionupdate",rj:"emsg",Ij:"prft",Error:"error",sj:"expirationupdated",tj:"firstquartile",uj:"gapjumped",xj:"keystatuschanged",zj:"loaded",Aj:"loading",Cj:"manifestparsed",Dj:"manifestupdated",Ej:"mediaqualitychanged",Metadata:"metadata",Fj:"midpoint",Gj:"nospatialvideoinfo",Hj:"onstatechange",Jj:"ratechange",Lj:"segmentappended",Mj:"sessiondata",Nj:"spatialvideoinfo",Oj:"stalldetected",Pj:"started",Qj:"statechanged",Rj:"streaming",Sj:"textchanged",Tj:"texttrackvisibility",Uj:"thirdquartile",Vj:"timelineregionadded",Wj:"timelineregionenter",Xj:"timelineregionexit",Yj:"trackschanged",$j:"unloading",bk:"variantchanged"};function Wt(){this.ya=new qt,this.me=this}Wt.prototype.addEventListener=function(e,t){this.ya&&this.ya.push(e,t)},Wt.prototype.removeEventListener=function(e,t){this.ya&&this.ya.remove(e,t)},Wt.prototype.dispatchEvent=function(e){if(!this.ya)return!0;var t=this.ya.get(e.type)||[],n=this.ya.get("All");for(n&&(t=t.concat(n)),t=b(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.me,e.currentTarget=this.me;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Wt.prototype.release=function(){this.ya=null};function Ks(){this.g=[]}function fs(e,t){e.g.push(t.finally(function(){Zt(e.g,t)}))}Ks.prototype.destroy=function(){for(var e=[],t=b(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function rn(e,t,n,r,a,u){Wt.call(this),this.i=!1,this.m=new Ks,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.A=n||null,this.B=r||null,this.F=a||null,this.C=u||null,this.o=this.s=!1}Q(rn,Wt),w=rn.prototype,w.Pf=function(e){this.s=e},w.Qf=function(e){this.o=e};function ur(e,t,n,r){n=n||Sy;var a=Sf[e];(!a||n>=a.priority)&&(Sf[e]={priority:n,ie:t,Di:r===void 0?!1:r})}function yy(e,t){for(var n=b(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(e=b(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}w.Gi=function(e){this.g.add(e)},w.bj=function(e){this.g.delete(e)},w.mg=function(){this.g.clear()},w.Hi=function(e){this.h.add(e)},w.cj=function(e){this.h.delete(e)},w.ng=function(){this.h.clear()};function oo(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}w.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Wt.prototype.release.call(this),this.m.destroy()},w.request=function(e,t,n){var r=this,a=new wy;if(this.i){var u=Promise.reject(new re(2,7,7001));return u.catch(function(){}),new wf(u,function(){return Promise.resolve()},a)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ji(t.retryParameters):ji(),t.uris=Ji(t.uris),u=$b(this,e,t,n);var c=u.Aa(function(){return vy(r,e,t,n,new hy(t.retryParameters,!1),0,null,a)}),d=c.Aa(function(A){return zb(r,e,A,n)}),p=Date.now(),S=0;u.promise.then(function(){S=Date.now()-p},function(){});var T=0;c.promise.then(function(){T=Date.now()},function(){});var k=d.Aa(function(A){var E=Date.now()-T,R=A.response;return R.timeMs+=S,R.timeMs+=E,A.ii||!r.l||R.fromCache||t.method=="HEAD"||e!=Fi||r.l(R.timeMs,R.data.byteLength,xy(n)),r.C&&r.C(e,R,n),R},function(A){throw A&&(A.severity=2),A});return u=new wf(k.promise,function(){return k.abort()},a),fs(this.m,u),u};function $b(e,t,n,r){function a(d){u=u.Aa(function(){return n.body&&(n.body=Dn(n.body)),d(t,n,r)})}var u=qs(void 0);e.B&&a(e.B),e=b(e.g);for(var c=e.next();!c.done;c=e.next())a(c.value);return u.Aa(void 0,function(d){throw d instanceof re&&d.code==7001?d:new re(2,1,1006,d)})}function vy(e,t,n,r,a,u,c,d){e.s&&(n.uris[u]=n.uris[u].replace("https://","http://")),e.o&&(n.uris[u]=n.uris[u].replace("http://","https://")),0<u&&e.F&&e.F(t,r,n.uris[u],n.uris[u-1]);var p=new Sn(n.uris[u]),S=p.Bb,T=!1;S||(S=location.protocol,S=S.slice(0,-1),Ft(p,S),n.uris[u]=p.toString()),S=S.toLowerCase();var k=(S=Sf[S])?S.ie:null;if(!k)return us(new re(2,1,1e3,p));var A=S.Di,E=null,R=null,D=!1,L=!1,$;return py(dy(a)).Aa(function(){if(e.i)return jd();$=Date.now();var N=0;n.requestStartTime=Date.now();var K=k(n.uris[u],n,t,function(J,oe,se){E&&E.stop(),R&&R.Y(H/1e3),e.l&&t==Fi&&(N++,n.packetNumber=N,e.l(J,oe,xy(r),n),T=!0,d.g=se)},function(J){e.j&&e.j(J,n,t),L=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!A)return K;var O=n.retryParameters.connectionTimeout;O&&(E=new It(function(){D=!0,K.abort()}),E.Y(O/1e3));var H=n.retryParameters.stallTimeout;return H&&(R=new It(function(){D=!0,K.abort()})),K}).Aa(function(N){E&&E.stop(),R&&R.stop(),N.timeMs==null&&(N.timeMs=Date.now()-$);var K={response:N,ii:T};return!L&&e.j&&e.j(N.headers,n,t),K},function(N){if(E&&E.stop(),R&&R.stop(),e.A){var K=null,O=0;N instanceof re&&(K=N,N.code==1001&&(O=N.data[1])),e.A(n,K,O,D)}if(e.i)return jd();if(D&&(N=new re(1,1,1003,n.uris[u],t)),N instanceof re){if(N.code==7001)throw N;if(N.code==1010)throw c;if(N.severity==1)return K=new Map().set("error",N),K=new He("retry",K),e.dispatchEvent(K),u=(u+1)%n.uris.length,vy(e,t,n,r,a,u,N,d)}throw N})}function zb(e,t,n,r){var a=qs(void 0);e=b(e.h);for(var u=e.next(),c={};!u.done;c={Vg:void 0},u=e.next())c.Vg=u.value,a=a.Aa(function(d){return function(){var p=n.response;return p.data&&(p.data=Dn(p.data)),(0,d.Vg)(t,p,r)}}(c));return a.Aa(function(){return n},function(d){var p=2;if(d instanceof re){if(d.code==7001)throw d;p=d.severity}throw new re(p,1,1007,d)})}function xy(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}ve("shaka.net.NetworkingEngine",rn),rn.prototype.request=rn.prototype.request,rn.prototype.destroy=rn.prototype.destroy,rn.makeRequest=oo,rn.defaultRetryParameters=function(){return ji()},rn.prototype.clearAllResponseFilters=rn.prototype.ng,rn.prototype.unregisterResponseFilter=rn.prototype.cj,rn.prototype.registerResponseFilter=rn.prototype.Hi,rn.prototype.clearAllRequestFilters=rn.prototype.mg,rn.prototype.unregisterRequestFilter=rn.prototype.bj,rn.prototype.registerRequestFilter=rn.prototype.Gi,rn.unregisterScheme=function(e){delete Sf[e]},rn.registerScheme=ur,rn.prototype.setForceHTTPS=rn.prototype.Qf,rn.prototype.setForceHTTP=rn.prototype.Pf;function wy(){this.g=0}rn.NumBytesRemainingClass=wy;function wf(e,t,n){jn.call(this,e,t),this.h=n}Q(wf,jn),rn.PendingRequest=wf;var Fi=1;rn.RequestType={MANIFEST:0,SEGMENT:Fi,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},rn.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6};var Sy=3;rn.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Sy};var Sf={};function Ys(e){this.g=!1,this.h=new en,this.i=e}Ys.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function tn(e,t){if(e.g)throw t instanceof re&&t.code==7003?t:new re(2,7,7003,t)}function Fd(e,t){var n=[];e=b(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function Vb(e,t){e=b(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function El(e){for(var t=new Map,n=b(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function $d(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function nn(e,t){this.h=hn(e),this.i=t==Cy,this.g=0}w=nn.prototype,w.na=function(){return this.g<this.h.byteLength},w.va=function(){return this.g},w.getLength=function(){return this.h.byteLength},w.T=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw fr()}},w.la=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw fr()}},w.P=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw fr()}},w.Sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw fr()}},w.Nc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw fr()}if(2097151<t)throw new re(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},w.qb=function(e){if(this.g+e>this.h.byteLength)throw fr();var t=st(this.h,this.g,e);return this.g+=e,t},w.skip=function(e){if(this.g+e>this.h.byteLength)throw fr();this.g+=e},w.Oi=function(e){if(this.g<e)throw fr();this.g-=e},w.seek=function(e){if(0>e||e>this.h.byteLength)throw fr();this.g=e},w.oc=function(){for(var e=this.g;this.na()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=st(this.h,e,this.g-e),this.g+=1,dn(e)};function fr(){return new re(2,3,3e3)}ve("shaka.util.DataViewReader",nn),nn.prototype.readTerminatedString=nn.prototype.oc,nn.prototype.seek=nn.prototype.seek,nn.prototype.rewind=nn.prototype.Oi,nn.prototype.skip=nn.prototype.skip,nn.prototype.readBytes=nn.prototype.qb,nn.prototype.readUint64=nn.prototype.Nc,nn.prototype.readInt32=nn.prototype.Sg,nn.prototype.readUint32=nn.prototype.P,nn.prototype.readUint16=nn.prototype.la,nn.prototype.readUint8=nn.prototype.T,nn.prototype.getLength=nn.prototype.getLength,nn.prototype.getPosition=nn.prototype.va,nn.prototype.hasMoreData=nn.prototype.na;var Cy=1;nn.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Cy};function on(){this.i=[],this.h=[],this.g=!1}w=on.prototype,w.box=function(e,t){return e=Ty(e),this.i[e]=Hb,this.h[e]=t,this},w.S=function(e,t){return e=Ty(e),this.i[e]=by,this.h[e]=t,this},w.stop=function(){this.g=!0},w.parse=function(e,t,n){for(e=new nn(e,0),this.g=!1;e.na()&&!this.g;)this.Kc(0,e,t,n)},w.Kc=function(e,t,n,r){var a=t.va();if(r&&a+8>t.getLength())this.g=!0;else{var u=t.P(),c=t.P(),d=Cf(c),p=!1;switch(u){case 0:u=t.getLength()-a;break;case 1:if(r&&t.va()+8>t.getLength()){this.g=!0;return}u=t.Nc(),p=!0}var S=this.h[c];if(S){var T=null,k=null;if(this.i[c]==by){if(r&&t.va()+4>t.getLength()){this.g=!0;return}k=t.P(),T=k>>>24,k&=16777215}c=a+u,n&&c>t.getLength()&&(c=t.getLength()),r&&c>t.getLength()?this.g=!0:(r=c-t.va(),t=0<r?t.qb(r):new Uint8Array(0),t=new nn(t,0),S({name:d,parser:this,partialOkay:n||!1,version:T,flags:k,reader:t,size:u,start:a+e,has64BitSize:p}))}else t.skip(Math.min(a+u-t.va(),t.getLength()-t.va()))}};function _t(e){for(var t=Zs(e);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Pr(e){for(var t=Zs(e),n=e.reader.P(),r=0;r<n&&(e.parser.Kc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function Fo(e){var t=Zs(e);for(e.reader.skip(78);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function zd(e){var t=Zs(e);e.reader.skip(8);var n=e.reader.la();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Qs(e){return function(t){e(t.reader.qb(t.reader.getLength()-t.reader.va()))}}function Ty(e){var t=0;e=b(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Cf(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Zs(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}ve("shaka.util.Mp4Parser",on),on.headerSize=Zs,on.typeToString=Cf,on.allData=Qs,on.audioSampleEntry=zd,on.visualSampleEntry=Fo,on.sampleDescription=Pr,on.children=_t,on.prototype.parseNext=on.prototype.Kc,on.prototype.parse=on.prototype.parse,on.prototype.stop=on.prototype.stop,on.prototype.fullBox=on.prototype.S,on.prototype.box=on.prototype.box;var Hb=0,by=1;function ky(e){var t=this;this.g=[],this.h=[],this.data=[],new on().box("moov",_t).box("moof",_t).S("pssh",function(n){if(!(1<n.version)){var r=st(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(ar(n.reader.qb(16))),0<n.version){r=n.reader.P();for(var a=0;a<r;a++){var u=ar(n.reader.qb(16));t.h.push(u)}}}}).parse(e)}function Tf(e,t,n,r){var a=e.length,u=t.length+16+a;0<r&&(u+=4+16*n.size);var c=new Uint8Array(u),d=hn(c),p=0;if(d.setUint32(p,u),p+=4,d.setUint32(p,1886614376),p+=4,1>r?d.setUint32(p,0):d.setUint32(p,16777216),p+=4,c.set(t,p),p+=t.length,0<r)for(d.setUint32(p,n.size),p+=4,t=b(n),n=t.next();!n.done;n=t.next())n=is(n.value),c.set(n,p),p+=n.length;return d.setUint32(p,a),c.set(e,p+4),c}function Vd(e,t){return e=sr(e),Js(e,t)}function Js(e,t){return e=Gb(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function Hd(e){return Wd.has(e)?Wd.get(e):""}function Gb(e){function t(a,u){u=u===void 0?!1:u;for(var c=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){u=r+2,r=e.indexOf(">",r),u=e.substring(u,r);var d=u.indexOf(a);if(d==-1){var p=a.indexOf(".");0<p&&(d=u.indexOf(a.substring(0,p)))}if(d==-1)throw a=e.substring(0,r).split(`
`),Error(`Unexpected close tag
Line: `+(a.length-1)+`
Column: `+(a[a.length-1].length+1)+`
Char: `+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){d=e.indexOf("]]>",r),d==-1?(c.push(e.substr(r+9)),r=e.length):(c.push(e.substring(r+9,d)),r=d+3);continue}r++;continue}e:{p=u,r++;var S=n(),T={};for(d=[];e.charCodeAt(r)!==62&&e[r];){var k=e.charCodeAt(r);if(64<k&&91>k||96<k&&123>k){k=n();for(var A=e.charCodeAt(r);A&&A!==39&&A!==34&&!(64<A&&91>A||96<A&&123>A)&&A!==62;)r++,A=e.charCodeAt(r);var E=r+1;if(r=e.indexOf(e[r],E),E=e.slice(E,r),A===39||A===34){if(r===-1){for(p={tagName:S,attributes:T,children:d,parent:null},S=0;S<d.length;S++)typeof d[S]!="string"&&(d[S].parent=p);d=p;break e}}else E=null,r--;k.startsWith("xmlns:")&&Wd.set(E,k.split(":")[1]),S==="tt"&&k==="xml:space"&&E==="preserve"&&(p=!0),T[k]=E}r++}for(e.charCodeAt(r-1)!==47?(r++,d=t(S,p)):r++,p={tagName:S,attributes:T,children:d,parent:null},S=d.length,T=0;T<S;T++)k=d[T],typeof k!="string"?k.parent=p:T==S-1&&k==`
`&&d.pop();d=p}if(c.push(d),typeof d=="string")break;d.tagName[0]==="?"&&d.children&&(c.push.apply(c,_(d.children)),d.children=[])}else d=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),d=e.slice(d,r+1),u?0<d.length&&c.push(d):(c.length&&d.length==1&&d[0]==`
`||0<d.trim().length)&&c.push(d),r++;return c}function n(){for(var a=r;`\r
	>/= `.indexOf(e[r])===-1&&e[r];)r++;return e.slice(a,r)}var r=0;return t("")}function bf(e){return typeof e=="string"}function Ey(e){var t=[];if(!e.children)return[];e=b(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function sn(e,t){var n=[];if(!e.children)return[];e=b(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function qn(e){return typeof e=="string"?Ro(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:Ro(e))}function Ai(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=qn(e))&&(e=e.trim()),e):null}function Ii(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=b(e.children);for(var r=e.next();!r.done;r=e.next())Ii(r.value,t,n)}return n}function Mi(e,t){return e=sn(e,t),e.length!=1?null:e[0]}function cr(e,t,n){return e=Ay(e,t,n),e.length!=1?null:e[0]}function Ut(e,t,n,r){r=r===void 0?null:r;var a=null;return e=e.attributes[t],e!=null&&(a=n(e)),a??r}function hr(e,t,n){return t=Hd(t),e.attributes[t+":"+n]||null}function Ay(e,t,n){t=Hd(t);var r=[];if(e.children){e=b(e.children);for(var a=e.next();!a.done;a=e.next())(a=a.value)&&a.tagName===t+":"+n&&r.push(a)}return r}function er(e,t,n){t=b(t);for(var r=t.next();!r.done;r=t.next())if(r=hr(e,r.value,n))return r;return null}function Or(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function tr(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function kf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Ef(e){return e=Number(e),e%1===0?e:null}function dr(e){return e=Number(e),e%1===0&&0<e?e:null}function To(e){return e=Number(e),e%1===0&&0<=e?e:null}function Af(e){return e=Number(e),isNaN(e)?null:e}function Gd(e){return e?e.toLowerCase()==="true":!1}function Wb(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function If(e){var t=[];e=Ro(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=b(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=n.match(/^([\w]+)/);if(r){var a=n.match(/(@id='(.*?)')/),u=n.match(/(@t='(\d+)')/),c=n.match(/(@n='(\d+)')/),d=n.match(/\[(\d+)\]/);t.push({name:r[0],id:a?a[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:u?Number(u[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:c?Number(c[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:d?Number(d[1])-1:null,Sb:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Sb=n.slice(1))}return t}function Iy(e,t){var n=If(t.attributes.sel||"");if(n.length){var r=n[n.length-1],a=t.attributes.pos||null;n=r.position,n==null&&(r.t!==null&&(n=My(e,"t",r.t)),r.n!==null&&(n=My(e,"n",r.n))),n===null?n=a==="prepend"?0:e.length:a==="prepend"?--n:a==="after"&&++n,a=t.tagName,(r=r.Sb)&&e[n]?_y(e[n],a,r,Ai(t)||""):(a!=="remove"&&a!=="replace"||e.splice(n,1),a!=="add"&&a!=="replace"||e.splice.apply(e,[n,0].concat(_(t.children))))}}function My(e,t,n){var r=0;e=b(e);for(var a=e.next();!a.done;a=e.next()){if(Number(a.value.attributes[t])===n)return r;r++}return null}function _y(e,t,n,r){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=r)}function Ry(e){var t=document.createElementNS("",e.tagName),n;for(n in e.attributes)t.setAttribute(n,e.attributes[n]);for(e=b(e.children),n=e.next();!n.done;n=e.next()){n=n.value;var r=void 0;typeof n=="string"?r=new Text(n):r=Ry(n),t.appendChild(r)}return t}var Wd=new Map([]);function Mf(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.fa=this.da=!1,this.I=0,this.g=null,this.B=new xt,this.i=new Map,this.A=new Map,this.l=new en,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.Z=new Map,this.ea=new Map,this.L=new It(function(){return ok(t)}),this.R=!1,this.N=[],this.U=!1,this.K=new It(function(){sk(t)}),this.l.catch(function(){}),this.j=new Ys(function(){return Xb(t)}),this.ba=!1,this.F=this.G=null}w=Mf.prototype,w.destroy=function(){return this.j.destroy()};function Xb(e){return V(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,I(t,$y(e),2);case 2:if(!e.m){t.u(3);break}return ee(t,4),I(t,e.m.setMediaKeys(null),6);case 6:ne(t,5);break;case 4:Y(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,q(t)}})}w.configure=function(e){this.h=e,this.K&&this.K.Sa(this.h.updateExpirationTime)};function qb(e,t,n){return e.fa=!0,e.A=new Map,e.R=n,Dy(e,t)}function Ly(e,t,n){e.A=new Map,n=b(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=b(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.R=0<e.A.size,Dy(e,t)}function Kb(e,t,n,r,a,u){var c=new Map;return a={audioCapabilities:a,videoCapabilities:u,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},a.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],c.set(t,a),Uy(e,c,[])}function Dy(e,t){var n,r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O;return V(function(H){if(H.g==1){if(n=tk(e))for(r=b(t),a=r.next();!a.done;a=r.next())u=a.value,u.video&&(u.video.drmInfos=[n]),u.audio&&(u.audio.drmInfos=[n]);for(c=t.some(function(J){return!!(J.video&&J.video.drmInfos.length||J.audio&&J.audio.drmInfos.length)}),c||(d=El(e.h.servers),lk(t,d)),p=new Set,S=b(t),T=S.next();!T.done;T=S.next())for(k=T.value,A=zy(k),E=b(A),R=E.next();!R.done;R=E.next())D=R.value,p.add(D);for(L=b(p),$=L.next();!$.done;$=L.next())N=$.value,uk(N,El(e.h.servers),El(e.h.advanced||{}),e.h.keySystemsMapping);return I(H,Jg(t,e.R,e.ba,e.h.preferredKeySystems),2)}return tn(e.j),K=c||Object.keys(e.h.servers).length,K?(O=Uy(e,void 0,t),H.return(c?O:O.catch(function(){}))):(e.da=!0,H.return(Promise.resolve()))})}function Py(e){var t;return V(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return I(n,e.G,3);case 3:return tn(e.j),n.return();case 2:return ee(n,4),e.G=e.m.setMediaKeys(e.s),I(n,e.G,6);case 6:ne(n,5);break;case 4:t=Y(n),e.o(new re(2,6,6003,t.message));case 5:tn(e.j),q(n)}})}function Yb(e,t){return V(function(n){if(n.g==1)return I(n,Py(e),2);Al(e,t.initDataType,st(t.initData)),q(n)})}w.Rb=function(e){var t=this;return V(function(n){if(n.g==1)return t.s?(t.m=e,t.B.ha(t.m,"play",function(){for(var r=b(t.N),a=r.next();!a.done;a=r.next())qd(t,a.value);t.U=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return $y(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?I(n,Py(t),2):n.u(2)):(t.B.ha(e,"encrypted",function(){t.o(new re(2,6,6010))}),n.return());Oy(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return Yb(t,r)}),q(n)})};function Qb(e){var t,n,r,a,u;return V(function(c){switch(c.g){case 1:if(!e.s||!e.g)return c.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){c.u(2);break}return t=oo([e.g.serverCertificateUri],e.h.retryParameters),ee(c,3),n=e.C.Lb.request(5,t),I(c,n.promise,5);case 5:r=c.h,e.g.serverCertificate=st(r.data),ne(c,4);break;case 3:throw a=Y(c),new re(2,6,6017,a);case 4:if(e.j.g)return c.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?c.return():(ee(c,6),I(c,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:ne(c,0);break;case 6:throw u=Y(c),new re(2,6,6004,u.message)}})}function Zb(e,t){var n,r,a;return V(function(u){if(u.g==1)return I(u,jy(e,t,{initData:null,initDataType:null}),2);if(u.g!=3)return n=u.h,n?(r=[],(a=e.i.get(n))&&(a.kb=new en,r.push(a.kb)),r.push(n.remove()),I(u,Promise.all(r),3)):u.return();e.i.delete(n),q(u)})}function Oy(e){var t,n,r,a,u;return V(function(c){if(c.g==1)return e.A.size?(e.A.forEach(function(d,p){jy(e,p,d)}),I(c,e.l,3)):c.u(2);if(c.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&ak(e))return c.return(e.l);e.l=new en,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=b(n),a=r.next();!a.done;a=r.next())u=a.value,Al(e,u.initDataType,u.initData);return Il(e)&&e.l.resolve(),c.return(e.l)})}function Al(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var r=e.i.values();r=b(r);for(var a=r.next();!a.done;a=r.next())if(Kn(n,a.value.initData))return}0<e.i.size&&Il(e)&&(e.l.resolve(),e.l=new en,e.l.catch(function(){})),nk(e,t,n,e.g.sessionType)}}function Ny(e){return e=e.i.keys(),e=Fd(e,function(t){return t.sessionId}),Array.from(e)}w.ff=function(){var e=this,t=this.i.keys();return t=Fd(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},w.ad=function(){var e=1/0,t=this.i.keys();t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},w.Ld=function(){return $d(this.ea)};function Uy(e,t,n){var r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N;return V(function(K){switch(K.g){case 1:if(r=new Map,n.length){a=Jb(e,n,r),K.u(2);break}return I(K,ek(e,t),3);case 3:a=K.h;case 2:if(u=a,!u)throw new re(2,6,6001);for(tn(e.j),ee(K,4),e.H.clear(),c=u.getConfiguration(),d=c.audioCapabilities||[],p=c.videoCapabilities||[],S=b(d),T=S.next();!T.done;T=S.next())k=T.value,e.H.add(k.contentType.toLowerCase());for(A=b(p),E=A.next();!E.done;E=A.next())R=E.value,e.H.add(R.contentType.toLowerCase());if(n.length){var O=u.keySystem,H=r.get(u.keySystem),J=[],oe=[],se=[],ye=[],le=[],ue=new Set,ce=new Set;Vy(H,J,oe,ye,se,le,ue,ce);var Ee=e.R?"persistent-license":"temporary";for(O={keySystem:O,encryptionScheme:J[0],licenseServerUri:oe[0],distinctiveIdentifierRequired:H[0].distinctiveIdentifierRequired,persistentStateRequired:H[0].persistentStateRequired,sessionType:H[0].sessionType||Ee,audioRobustness:H[0].audioRobustness||"",videoRobustness:H[0].videoRobustness||"",serverCertificate:ye[0],serverCertificateUri:se[0],initData:le,keyIds:ue},0<ce.size&&(O.keySystemUris=ce),H=b(H),ce=H.next();!ce.done;ce=H.next())ce=ce.value,ce.distinctiveIdentifierRequired&&(O.distinctiveIdentifierRequired=ce.distinctiveIdentifierRequired),ce.persistentStateRequired&&(O.persistentStateRequired=ce.persistentStateRequired);H=O}else H=u.keySystem,ce=t.get(u.keySystem),O=[],J=[],oe=[],se=[],ye=[],le=new Set,Vy(ce.drmInfos,O,J,se,oe,ye,le),H={keySystem:H,encryptionScheme:O[0],licenseServerUri:J[0],distinctiveIdentifierRequired:ce.distinctiveIdentifier=="required",persistentStateRequired:ce.persistentState=="required",sessionType:ce.sessionTypes[0]||"temporary",audioRobustness:(ce.audioCapabilities?ce.audioCapabilities[0].robustness:"")||"",videoRobustness:(ce.videoCapabilities?ce.videoCapabilities[0].robustness:"")||"",serverCertificate:se[0],serverCertificateUri:oe[0],initData:ye,keyIds:le};if(e.g=H,!e.g.licenseServerUri)throw new re(2,6,6012,e.g.keySystem);return I(K,u.createMediaKeys(),6);case 6:if(D=K.h,tn(e.j),e.s=D,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){K.u(7);break}return ee(K,8),I(K,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(L=K.h,L!="usable")throw new re(2,6,6018);tn(e.j),ne(K,7,4);break;case 8:throw $=Y(K,4),$ instanceof re?$:new re(2,6,6019,$.message);case 7:return e.da=!0,I(K,Qb(e),11);case 11:tn(e.j),ne(K,0);break;case 4:throw N=Y(K),tn(e.j,N),e.g=null,e.H.clear(),N instanceof re?N:new re(2,6,6002,N.message)}})}function Jb(e,t,n){for(var r=b(t),a=r.next();!a.done;a=r.next()){a=b(zy(a.value));for(var u=a.next();!u.done;u=a.next())u=u.value,n.has(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u)}if(n.size==1&&n.has(""))throw new re(2,6,6e3);for(e=b(e.h.preferredKeySystems),a=e.next(),r={};!a.done;r={Rg:void 0},a=e.next())for(r.Rg=a.value,a=b(t),u=a.next();!u.done;u=a.next())if(u=u.value.decodingInfos.find(function(S){return function(T){return T.supported&&T.keySystemAccess!=null&&T.keySystemAccess.keySystem==S.Rg}}(r)))return u.keySystemAccess;for(e=b([!0,!1]),r=e.next();!r.done;r=e.next())for(r=r.value,a=b(t),u=a.next();!u.done;u=a.next()){u=b(u.value.decodingInfos);for(var c=u.next();!c.done;c=u.next())if(c=c.value,c.supported&&c.keySystemAccess){var d=n.get(c.keySystemAccess.keySystem);d=b(d);for(var p=d.next();!p.done;p=d.next())if(!!p.value.licenseServerUri==r)return c.keySystemAccess}}return null}function ek(e,t){var n,r,a,u,c,d,p,S,T,k,A,E,R,D,L,$;return V(function(N){switch(N.g){case 1:if(t.size==1&&t.has(""))throw new re(2,6,6e3);for(r=b(t.values()),a=r.next();!a.done;a=r.next())u=a.value,u.audioCapabilities.length==0&&delete u.audioCapabilities,u.videoCapabilities.length==0&&delete u.videoCapabilities;c=b(e.h.preferredKeySystems),d=c.next();case 2:if(d.done){N.u(4);break}if(p=d.value,!t.has(p)){N.u(3);break}return S=t.get(p),ee(N,6),I(N,navigator.requestMediaKeySystemAccess(p,[S]),8);case 8:return n=N.h,N.return(n);case 6:Y(N);case 7:tn(e.j);case 3:d=c.next(),N.u(2);break;case 4:T=b([!0,!1]),k=T.next();case 9:if(k.done){N.u(11);break}A=k.value,E=b(t.keys()),R=E.next();case 12:if(R.done){k=T.next(),N.u(9);break}if(D=R.value,L=t.get(D),$=L.drmInfos.some(function(K){return!!K.licenseServerUri}),$!=A){N.u(13);break}return ee(N,15),I(N,navigator.requestMediaKeySystemAccess(D,[L]),17);case 17:return n=N.h,N.return(n);case 15:Y(N);case 16:tn(e.j);case 13:R=E.next(),N.u(12);break;case 11:return N.return(n)}})}function tk(e){return e=El(e.h.clearKeys),e.size==0?null:jg(e)}function Xd(e){Il(e)&&e.l.resolve()}function By(e,t){new It(function(){t.loaded=!0,Xd(e)}).Y(ck)}function jy(e,t,n){var r,a,u,c,d,p,S;return V(function(T){switch(T.g){case 1:try{r=e.s.createSession("persistent-license")}catch(k){return a=new re(2,6,6005,k.message),e.o(a),T.return(Promise.reject(a))}return e.B.D(r,"message",function(k){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(k):qd(e,k)}),e.B.D(r,"keystatuseschange",function(k){return Fy(e,k)}),u={initData:n.initData,initDataType:n.initDataType,loaded:!1,zf:1/0,kb:null,type:"persistent-license"},e.i.set(r,u),ee(T,2),I(T,r.load(t),4);case 4:return c=T.h,tn(e.j),c||(e.i.delete(r),d=e.h.persistentSessionOnlinePlayback?1:2,e.o(new re(d,6,6013)),u.loaded=!0),By(e,u),Xd(e),T.return(r);case 2:p=Y(T),tn(e.j,p),e.i.delete(r),S=e.h.persistentSessionOnlinePlayback?1:2,e.o(new re(S,6,6005,p.message)),u.loaded=!0,Xd(e);case 3:return T.return(Promise.resolve())}})}function nk(e,t,n,r){try{var a=e.s.createSession(r)}catch(u){e.o(new re(2,6,6005,u.message));return}e.B.D(a,"message",function(u){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(u):qd(e,u)}),e.B.D(a,"keystatuseschange",function(u){return Fy(e,u)}),e.i.set(a,{initData:n,initDataType:t,loaded:!1,zf:1/0,kb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(u){t=u,u instanceof re||(t=new re(2,6,6016,u)),e.o(t);return}e.h.logLicenseExchange&&os(n),a.generateRequest(t,n).catch(function(u){if(!e.j.g){e.i.delete(a);var c=u.errorCode;if(c&&c.systemCode){var d=c.systemCode;0>d&&(d+=Math.pow(2,32)),d="0x"+d.toString(16)}e.o(new re(2,6,6006,u.message,u,d))}})}function qd(e,t){var n,r,a,u,c,d,p,S,T,k,A,E,R,D;V(function(L){switch(L.g){case 1:if(n=t.target,e.h.logLicenseExchange&&os(t.message),r=e.i.get(n),a=e.g.licenseServerUri,u=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&u&&u.individualizationServer&&(a=u.individualizationServer),c=oo([a],e.h.retryParameters),c.body=t.message,c.method="POST",c.licenseRequestType=t.messageType,c.sessionId=n.sessionId,c.drmInfo=e.g,r&&(c.initData=r.initData,c.initDataType=r.initDataType),u&&u.headers)for(d in u.headers)c.headers[d]=u.headers[d];if(Cd(e.g.keySystem)){var $=rr(c.body,!0,!0);if($.includes("PlayReadyKeyMessage")){$=Js($,"PlayReadyKeyMessage");var N=Ii($,"HttpHeader");N=b(N);for(var K=N.next();!K.done;K=N.next()){var O=K.value;K=Ii(O,"name")[0],O=Ii(O,"value")[0],c.headers[qn(K)]=qn(O)}$=Ii($,"Challenge")[0],c.body=pi(qn($))}else c.headers["Content-Type"]="text/xml; charset=utf-8"}return p=Date.now(),ee(L,2),T=e.C.Lb.request(2,c),I(L,T.promise,4);case 4:S=L.h,ne(L,3);break;case 2:return k=Y(L),e.j.g||(A=new re(2,6,6007,k),e.i.size==1?(e.o(A),r&&r.kb&&r.kb.reject(A)):(r&&r.kb&&r.kb.reject(A),e.i.delete(n),Il(e)&&(e.l.resolve(),e.L.Y(.1)))),L.return();case 3:return e.j.g?L.return():(e.I+=(Date.now()-p)/1e3,e.h.logLicenseExchange&&os(S.data),ee(L,5),I(L,n.update(S.data),7));case 7:ne(L,6);break;case 5:return E=Y(L),R=new re(2,6,6008,E.message),e.o(R),r&&r.kb&&r.kb.reject(R),L.return();case 6:if(e.j.g)return L.return();D=new He("drmsessionupdate"),e.C.onEvent(D),r&&(r.kb&&r.kb.resolve(),By(e,r)),q(L)}})}function Fy(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(u,c){if(typeof c=="string"){var d=c;c=u,u=d}if(Cd(e.g.keySystem)&&c.byteLength==16&&(vl()||Zi())){d=hn(c);var p=d.getUint32(0,!0),S=d.getUint16(4,!0),T=d.getUint16(6,!0);d.setUint32(0,p,!1),d.setUint16(4,S,!1),d.setUint16(6,T,!1)}u!="status-pending"&&(n.loaded=!0),u=="expired"&&(r=!0),c=ar(c).slice(0,32),e.Z.set(c,u)});var a=t.expiration-Date.now();(0>a||r&&1e3>a)&&n&&!n.kb&&(e.i.delete(t),t.close().catch(function(){})),Il(e)&&(e.l.resolve(),e.L.Y(hk))}function ok(e){var t=e.Z,n=e.ea;n.clear(),t.forEach(function(r,a){return n.set(a,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new re(2,6,6014)),e.C.ee($d(n))}function ik(){var e,t,n,r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye,le,ue;return V(function(ce){if(ce.g==1){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],n=["150","2000","3000"],r={"com.widevine.alpha":t,"com.microsoft.playready.recommendation":n},a=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],u=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],c={videoCapabilities:a,audioCapabilities:u,initDataTypes:["cenc","sinf","skd","keyids"]},d=[null,"cenc","cbcs","cbcs-1-9"],p=new Map,S=function(Ee,Te){var Ae,Oe,_e,ze,yt,Lt,Cn,zt;return V(function(_n){switch(_n.g){case 1:return ee(_n,2),I(_n,Te.createMediaKeys(),4);case 4:ne(_n,3);break;case 2:return Y(_n),_n.return();case 3:Oe=(Ae=Te.getConfiguration().sessionTypes)?Ae.includes("persistent-license"):!1,xl()&&(Oe=!1),_e=Te.getConfiguration().videoCapabilities,ze=Te.getConfiguration().audioCapabilities,yt={persistentState:Oe,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},p.has(Ee)&&p.get(Ee)?yt=p.get(Ee):p.set(Ee,yt),(Lt=_e[0].encryptionScheme)&&!yt.encryptionSchemes.includes(Lt)&&yt.encryptionSchemes.push(Lt),(Cn=_e[0].robustness)&&!yt.videoRobustnessLevels.includes(Cn)&&yt.videoRobustnessLevels.push(Cn),(zt=ze[0].robustness)&&!yt.audioRobustnessLevels.includes(zt)&&yt.audioRobustnessLevels.push(zt),q(_n)}})},T=function(Ee,Te,Ae,Oe){var _e,ze,yt,Lt,Cn,zt,_n,Hn,Tn,Xt;return V(function(Nn){switch(Nn.g){case 1:for(ee(Nn,2),_e=Ji(c),ze=b(_e.videoCapabilities),yt=ze.next();!yt.done;yt=ze.next())Lt=yt.value,Lt.encryptionScheme=Te,Lt.robustness=Ae;for(Cn=b(_e.audioCapabilities),zt=Cn.next();!zt.done;zt=Cn.next())_n=zt.value,_n.encryptionScheme=Te,_n.robustness=Oe;return Hn=Ji(_e),Hn.persistentState="required",Hn.sessionTypes=["persistent-license"],Tn=[Hn,_e],I(Nn,navigator.requestMediaKeySystemAccess(Ee,Tn),4);case 4:return Xt=Nn.h,I(Nn,S(Ee,Xt),5);case 5:ne(Nn,0);break;case 2:Y(Nn),q(Nn)}})},k=function(Ee,Te,Ae,Oe){var _e,ze,yt;return V(function(Lt){switch(Lt.g){case 1:return ee(Lt,2),_e={type:"media-source",video:{contentType:a[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:u[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:Ee,video:{encryptionScheme:Te,robustness:Ae},audio:{encryptionScheme:Te,robustness:Oe}}},I(Lt,navigator.mediaCapabilities.decodingInfo(_e),4);case 4:return ze=Lt.h,yt=ze.keySystemAccess,I(Lt,S(Ee,yt),5);case 5:ne(Lt,0);break;case 2:Y(Lt),q(Lt)}})},A=b(e),E=A.next();!E.done;E=A.next())R=E.value,p.set(R,null);for(D=[],L=b(d),$=L.next();!$.done;$=L.next())for(N=$.value,K=b(e),O=K.next();!O.done;O=K.next())H=O.value,H==="org.w3.clearkey"&&Bs()||(D.push(T(H,N,"","")),D.push(k(H,N,"","")));for(J=b(e),oe=J.next();!oe.done;oe=J.next())for(se=oe.value,ye=b(r[se]||[]),le=ye.next();!le.done;le=ye.next())ue=le.value,D.push(T(se,null,ue,"")),D.push(T(se,null,"",ue)),D.push(k(se,null,ue,"")),D.push(k(se,null,"",ue));return I(ce,Promise.all(D),2)}return ce.return($d(p))})}function rk(e){var t;return V(function(n){if(n.g==1)return t=new Promise(function(r,a){new It(a).Y(fk)}),ee(n,2),I(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return ne(n,0);Y(n),q(n)})}function $y(e){var t;return V(function(n){return t=Array.from(e.i.entries()),e.i.clear(),I(n,Promise.all(t.map(function(r){r=b(r);var a=r.next().value,u=r.next().value;return V(function(c){if(c.g==1)return ee(c,2),e.fa||e.A.has(a.sessionId)||u.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?I(c,rk(a),5):I(c,a.remove(),5);if(c.g!=2)return ne(c,0);Y(c),q(c)})})),0)})}function zy(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function sk(e){e.i.forEach(function(t,n){var r=t.zf,a=n.expiration;isNaN(a)&&(a=1/0),a!=r&&(e.C.onExpirationUpdated(n.sessionId,a),t.zf=a)})}function Il(e){return e=e.i.values(),Vb(e,function(t){return t.loaded})}function ak(e){for(var t=b(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.Z.get(n.value)!=="usable")return!1;return!0}function lk(e,t){var n=[];for(t.forEach(function(r,a){n.push({keySystem:a,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=b(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function Vy(e,t,n,r,a,u,c,d){var p=[];e=b(e);for(var S=e.next(),T={};!S.done;T={ra:void 0},S=e.next()){if(T.ra=S.value,t.includes(T.ra.encryptionScheme)||t.push(T.ra.encryptionScheme),T.ra.keySystem=="org.w3.clearkey"&&T.ra.licenseServerUri.startsWith("data:application/json;base64,")?p.includes(T.ra.licenseServerUri)||p.push(T.ra.licenseServerUri):n.includes(T.ra.licenseServerUri)||n.push(T.ra.licenseServerUri),a.includes(T.ra.serverCertificateUri)||a.push(T.ra.serverCertificateUri),T.ra.serverCertificate&&(r.some(function(E){return function(R){return Kn(R,E.ra.serverCertificate)}}(T))||r.push(T.ra.serverCertificate)),T.ra.initData){S=b(T.ra.initData);for(var k=S.next(),A={};!k.done;A={mf:void 0},k=S.next())A.mf=k.value,u.some(function(E){return function(R){var D=E.mf;return R.keyId&&R.keyId==D.keyId?!0:R.initDataType==D.initDataType&&Kn(R.initData,D.initData)}}(A))||u.push(A.mf)}if(T.ra.keyIds)for(S=b(T.ra.keyIds),k=S.next();!k.done;k=S.next())c.add(k.value);if(T.ra.keySystemUris&&d)for(T=b(T.ra.keySystemUris),S=T.next();!S.done;S=T.next())d.add(S.value)}if(p.length==1)n.push(p[0]);else if(0<p.length){for(t=[],p=b(p),r=p.next();!r.done;r=p.next())r=h.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,_(r.keys));p=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+h.btoa(p))}}function uk(e,t,n,r){var a=e.keySystem;a&&(a!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(a)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(a))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[a]&&(e.keySystem=r[a]),h.cast&&h.cast.__platform__&&a=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var fk=1,ck=5,hk=.5;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Kd(e,t,n){this.h=e,this.i=t,this.g=n}function Hy(e,t){return V(function(n){if(n.g==1)return I(n,xb(e.g,t,e.h.drm.preferredKeySystems),2);if(e.h.streaming.dontChooseCodecs||qg(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(Tl))throw new re(2,4,4032);return n.return(Gy(e,t))})}function Gy(e,t){var n=Kg(t.variants,e.h.restrictions,e.i);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var a=b(t.variants),u=a.next();!u.done;u=a.next())u=u.value,Yd(e,r.keySystem,u.video),Yd(e,r.keySystem,u.audio);Wy(e,t)}return n}function Yd(e,t,n){if(n){n=b(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=b(r.initData||[]);for(var a=r.next();!a.done;a=r.next())a=a.value,Al(e.g,a.initDataType,a.initData)}}}function Wy(e,t){e=e.g?e.g.Ld():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,a=!1,u=new Set,c=new Set;t=b(t.variants);for(var d=t.next();!d.done;d=t.next()){d=d.value;var p=[];d.audio&&p.push(d.audio),d.video&&p.push(d.video),p=b(p);for(var S=p.next();!S.done;S=p.next())if(S=S.value,S.keyIds.size){S=b(S.keyIds);for(var T=S.next();!T.done;T=S.next()){T=T.value;var k=e[n?"00":T];k?Xy.includes(k)&&c.add(k):u.add(T)}}d.allowedByApplication?d.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw e={hasAppRestrictions:a,missingKeys:Array.from(u),restrictedKeyStatuses:Array.from(c)},new re(2,4,4012,e)}var Xy=["output-restricted","internal-error"];function Ml(){}function qy(e,t){if(t){var n=_i[t.toLowerCase()];if(n)return n}throw new re(2,4,4e3,e,t)}ve("shaka.media.ManifestParser",Ml),Ml.unregisterParserByMime=function(e){delete _i[e]},Ml.registerParserByMime=function(e,t){_i[e]=t},Ml.registerParserByExtension=function(){Et("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Ml.AccessibilityPurpose={ak:"visually impaired",vj:"hard of hearing"};var _i={};function dk(e,t){function n(){u=!0}function r(T){d.push(T),_t(T)}var a=e=st(e),u=!1,c,d=[],p=[];if(new on().box("moov",r).box("trak",r).box("mdia",r).box("minf",r).box("stbl",r).S("stsd",function(T){c=T,d.push(T),Pr(T)}).S("encv",n).S("enca",n).S("dvav",function(T){p.push({box:T,Oa:1701733238})}).S("dva1",function(T){p.push({box:T,Oa:1701733238})}).S("dvh1",function(T){p.push({box:T,Oa:1701733238})}).S("dvhe",function(T){p.push({box:T,Oa:1701733238})}).S("dvc1",function(T){p.push({box:T,Oa:1701733238})}).S("dvi1",function(T){p.push({box:T,Oa:1701733238})}).S("hev1",function(T){p.push({box:T,Oa:1701733238})}).S("hvc1",function(T){p.push({box:T,Oa:1701733238})}).S("avc1",function(T){p.push({box:T,Oa:1701733238})}).S("avc3",function(T){p.push({box:T,Oa:1701733238})}).S("ac-3",function(T){p.push({box:T,Oa:1701733217})}).S("ec-3",function(T){p.push({box:T,Oa:1701733217})}).S("ac-4",function(T){p.push({box:T,Oa:1701733217})}).S("mp4a",function(T){p.push({box:T,Oa:1701733217})}).parse(e),u)return e;if(p.length==0||!c)throw ar(e),new re(2,3,3019,t);p.reverse(),t=b(p);for(var S=t.next();!S.done;S=t.next())S=S.value,a=pk(a,c,S.box,d,S.Oa);return vl()&&kd()?(t=new Uint8Array(e.byteLength+a.byteLength),t.set(a),t.set(e,a.byteLength),t):a}function pk(e,t,n,r,a){var u=mk.value(),c=e.subarray(n.start,n.start+n.size),d=hn(c),p=new Uint8Array(n.size+u.byteLength);for(p.set(c,0),c=hn(p),c.setUint32(4,a),p.set(u,n.size),a=d.getUint32(4),c.setUint32(n.size+16,a),Ky(p,0,p.byteLength),a=new Uint8Array(e.byteLength+p.byteLength),n=Ki()||vl()?n.start:n.start+n.size,u=e.subarray(n),a.set(e.subarray(0,n)),a.set(p,n),a.set(u,n+p.byteLength),e=b(r),r=e.next();!r.done;r=e.next())r=r.value,Ky(a,r.start,r.size+p.byteLength);return p=hn(a,t.start),t=Zs(t),e=p.getUint32(t),p.setUint32(t,e+1),a}function Ky(e,t,n){e=hn(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var mk=new Ns(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function $o(e,t,n,r,a,u,c){this.M=e,this.Ha=t,this.sa=n,this.Hc=r===void 0?null:r,this.timescale=a===void 0?null:a,this.g=u===void 0?null:u,this.aesKey=c===void 0?null:c,this.mimeType=this.codecs=null}$o.prototype.Xb=function(){return this.Ha},$o.prototype.Ub=function(){return this.sa},$o.prototype.cd=function(){return this.g};function Qd(e,t){return e===t?!0:e&&t?e.Xb()==t.Xb()&&e.Ub()==t.Ub()&&Bn(e.M().sort(),t.M().sort())&&Kn(e.cd(),t.cd()):e==t}ve("shaka.media.InitSegmentReference",$o),$o.prototype.getEndByte=$o.prototype.Ub,$o.prototype.getStartByte=$o.prototype.Xb;function ct(e,t,n,r,a,u,c,d,p,S,T,k,A,E,R,D){for(S=S===void 0?[]:S,E=E===void 0?Nr:E,this.startTime=e,this.j=this.endTime=t,this.F=n,this.Ha=r,this.sa=a,this.$=u,this.timestampOffset=c,this.appendWindowStart=d,this.appendWindowEnd=p,this.g=S,this.tilesLayout=T===void 0?"":T,this.B=k===void 0?null:k,this.h=A===void 0?null:A,this.status=E,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=R===void 0?null:R,this.A=null,this.i=0,this.o=D===void 0?!1:D,this.G=this.s=!1,e=b(this.g),t=e.next();!t.done;t=e.next())t.value.Kg();this.o&&this.g.length&&this.g[this.g.length-1].Jg(),this.C=this.mimeType=this.codecs=null}w=ct.prototype,w.M=function(){return this.F()},w.getStartTime=function(){return this.startTime},w.Mh=function(){return this.endTime},w.Xb=function(){return this.Ha},w.Ub=function(){return this.sa},w.di=function(){return this.tilesLayout},w.ci=function(){return this.B},w.Yb=function(){return this.status},w.xi=function(){this.status=Qy},w.wf=function(){this.preload=!0},w.ri=function(){return this.preload},w.Xd=function(){this.l=!1},w.ni=function(){return this.l},w.Kg=function(){this.s=!0},w.pi=function(){return this.s},w.Jg=function(){this.G=!0},w.oi=function(){return this.G},w.Ig=function(){this.m=!0},w.ji=function(){return this.m},w.fh=function(e){this.A=e},w.bi=function(){return this.A},w.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=b(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},w.Vf=function(e){this.h==null?Tt("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},w.Zi=function(e){this.C=e},w.cd=function(){return this.C};function Yy(e,t){e.$=t,e=b(e.g);for(var n=e.next();!n.done;n=e.next())Yy(n.value,t)}ve("shaka.media.SegmentReference",ct),ct.prototype.getSegmentData=ct.prototype.cd,ct.prototype.setSegmentData=ct.prototype.Zi,ct.prototype.syncAgainst=ct.prototype.Vf,ct.prototype.offset=ct.prototype.offset,ct.prototype.getThumbnailSprite=ct.prototype.bi,ct.prototype.setThumbnailSprite=ct.prototype.fh,ct.prototype.hasByterangeOptimization=ct.prototype.ji,ct.prototype.markAsByterangeOptimization=ct.prototype.Ig,ct.prototype.isLastPartial=ct.prototype.oi,ct.prototype.markAsLastPartial=ct.prototype.Jg,ct.prototype.isPartial=ct.prototype.pi,ct.prototype.markAsPartial=ct.prototype.Kg,ct.prototype.isIndependent=ct.prototype.ni,ct.prototype.markAsNonIndependent=ct.prototype.Xd,ct.prototype.isPreload=ct.prototype.ri,ct.prototype.markAsPreload=ct.prototype.wf,ct.prototype.markAsUnavailable=ct.prototype.xi,ct.prototype.getStatus=ct.prototype.Yb,ct.prototype.getTileDuration=ct.prototype.ci,ct.prototype.getTilesLayout=ct.prototype.di,ct.prototype.getEndByte=ct.prototype.Ub,ct.prototype.getStartByte=ct.prototype.Xb,ct.prototype.getEndTime=ct.prototype.Mh,ct.prototype.getStartTime=ct.prototype.getStartTime,ct.prototype.getUris=ct.prototype.M;var Nr=0,Qy=1;ct.Status={hj:Nr,Zj:Qy,Bj:2};function _l(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function Zd(e){return!e||_l(e)?null:e.length?e.end(e.length-1):null}function Jd(e,t){return!e||!e.length||_l(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function Zy(e,t){if(!e||!e.length||_l(e))return 0;var n=0;e=b(Ur(e));for(var r=e.next();!r.done;r=e.next()){var a=r.value;r=a.start,a=a.end,a>t&&(n+=a-Math.max(r,t))}return n}function gk(e,t,n){return!e||!e.length||_l(e)?null:(e=Ur(e).findIndex(function(r,a,u){return r.start>t&&(a==0||u[a-1].end-t<=n)}),0<=e?e:null)}function Ur(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function ep(){}function Jy(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function e1(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function tp(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function yk(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=dn(st(e.data,1,n)),a=e.data[2+n],u=e.data.subarray(3+n).indexOf(0);if(u===-1)return null;var c=dn(st(e.data,3+n,u)),d;return r==="-->"?d=dn(st(e.data,4+n+u)):d=Dn(e.data.subarray(4+n+u)),t.mimeType=r,t.pictureType=a,t.description=c,t.data=d,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=dn(st(e.data,1,r)),e=dn(st(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=dn(st(e.data,1,r)),e=dn(st(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=dn(st(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Dn(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=dn(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=dn(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Dn(e.data),t):null}function cs(e){for(var t=0,n=[];Jy(e,t);){var r=tp(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var a=e.subarray(t),u=tp(a,4);a={type:String.fromCharCode(a[0],a[1],a[2],a[3]),size:u,data:a.subarray(10,10+u)},(u=yk(a))&&n.push(u),t+=a.size+10}e1(e,t)&&(t+=10)}return n}function ea(e,t){for(var n=t=t===void 0?0:t,r=0;Jy(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=tp(e,t+6),e1(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}ve("shaka.util.Id3Utils",ep),ep.getID3Data=ea,ep.getID3Frames=cs;function t1(e,t){var n=null,r=null,a=null,u=e.P();return t&1&&(a=e.Nc()),t&2&&e.skip(4),t&8&&(n=e.P()),t&16&&(r=e.P()),{trackId:u,Yc:n,Id:r,ck:a}}function _f(e,t){return t==1?(t=e.P(),e=e.P(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.P()}}function Rf(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.P(),e.skip(4),e=e.la(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function n1(e,t,n){var r=e.P(),a=[],u=null;n&1&&(u=e.P()),n&4&&e.skip(4);for(var c=0;c<r;c++){var d={Jf:null,sampleSize:null,ne:null};n&256&&(d.Jf=e.P()),n&512&&(d.sampleSize=e.P()),n&1024&&e.skip(4),n&2048&&(d.ne=t==0?e.P():e.Sg()),a.push(d)}return{gk:r,Wg:a,Fh:u}}function o1(e){e.skip(6),e.skip(2),e.skip(8);var t=e.la();return e.skip(2),e.skip(2),e.skip(2),e=e.la()+e.la()/65536,{channelCount:t,sampleRate:e}}function i1(e){return e=e.P(),{codec:Cf(e)}}function vk(e){var t=null,n=null,r=e.qb(4),a=String.fromCharCode(r[0]);if(a+=String.fromCharCode(r[1]),a+=String.fromCharCode(r[2]),a+=String.fromCharCode(r[3]),a==="nclx"){switch(e.la()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.la(),e.la(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,xd:n}}function Rl(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function zo(e){return(10>e?"0":"")+e}function pr(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=st(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function np(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new nn(n,0).P(),e.g=8*r,e.i-=r)}function Vo(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,np(e)}e.h<<=t,e.g-=t}function Mt(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&np(e),n=t-n,0<n?r<<n|Mt(e,n):r}function op(e){var t;for(t=0;t<e.g;++t)if((e.h&2147483648>>>t)!==0)return e.h<<=t,e.g-=t,t;return np(e),t+op(e)}function Do(e){Vo(e,1+op(e))}function Xe(e){var t=op(e);return Mt(e,t+1)-1}function ta(e){return e=Xe(e),1&e?1+e>>>1:-1*(e>>>1)}function rt(e){return Mt(e,1)===1}function Vt(e){return Mt(e,8)}function Lf(e,t){for(var n=8,r=8,a=0;a<t;a++)r!==0&&(r=ta(e),r=(n+r+256)%256),n=r===0?n:r}function xk(e){return Vt(e),Xe(e),Xe(e)}ve("shaka.util.ExpGolomb",pr);function an(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}w=an.prototype,w.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},w.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,rp(e)),n=e.length-(e.length+t)%188,r=!1,a=t;a<n;a+=188)if(e[a]==71){var u=!!(e[a+1]&64),c=((e[a+1]&31)<<8)+e[a+2];if(1<(e[a+3]&48)>>4){var d=a+5+e[a+4];if(d==a+188)continue}else d=a+4;switch(c){case 0:u&&(d+=e[d]+1),this.G=(e[d+10]&31)<<8|e[d+11];break;case 17:case 8191:break;case this.G:u&&(d+=e[d]+1),u=e,c={audio:-1,video:-1,Rd:-1,audioCodec:"",videoCodec:""};var p=d+3+((u[d+1]&15)<<8|u[d+2])-4;for(d+=12+((u[d+10]&15)<<8|u[d+11]);d<p;){var S=(u[d+1]&31)<<8|u[d+2],T=(u[d+3]&15)<<8|u[d+4];switch(u[d]){case 6:if(0<T)for(var k=d+5,A=T;2<A;){var E=u[k+1]+2;switch(u[k]){case 5:var R=Id(u.subarray(k+2,k+E));c.audio==-1&&R==="Opus"?(c.audio=S,c.audioCodec="opus"):c.video==-1&&R==="AV01"&&(c.video=S,c.videoCodec="av1");break;case 106:c.audio==-1&&(c.audio=S,c.audioCodec="ac3");break;case 122:c.audio==-1&&(c.audio=S,c.audioCodec="ec3");break;case 124:c.audio==-1&&(c.audio=S,c.audioCodec="aac");break;case 127:c.audioCodec=="opus"&&(R=null,u[k+2]===128&&(R=u[k+3]),R!=null&&(this.F={channelCount:(R&15)===0?2:R&15,Ch:R,sampleRate:48e3}))}k+=E,A-=E}break;case 15:c.audio==-1&&(c.audio=S,c.audioCodec="aac");break;case 17:c.audio==-1&&(c.audio=S,c.audioCodec="aac-loas");break;case 21:c.Rd==-1&&(c.Rd=S);break;case 27:c.video==-1&&(c.video=S,c.videoCodec="avc");break;case 3:case 4:c.audio==-1&&(c.audio=S,c.audioCodec="mp3");break;case 36:c.video==-1&&(c.video=S,c.videoCodec="hvc");break;case 129:c.audio==-1&&(c.audio=S,c.audioCodec="ac3");break;case 132:case 135:c.audio==-1&&(c.audio=S,c.audioCodec="ec3")}d+=T+5}u=c,u.video!=-1&&(this.I=u.video,this.m=u.videoCodec),u.audio!=-1&&(this.B=u.audio,this.A=u.audioCodec),u.Rd!=-1&&(this.C=u.Rd),r&&!this.H&&(r=!1,a=t-188),this.H=!0;break;case this.I:d=e.subarray(d,a+188),u?this.j.push([d]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(d);break;case this.B:d=e.subarray(d,a+188),u?this.i.push([d]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(d);break;case this.C:d=e.subarray(d,a+188),u?this.l.push([d]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(d);break;default:r=!0}}return this};function ip(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var a=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=a),n.pts=r1(a,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=r1(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}w.Ci=function(e){return Et("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Cf(e)},w.Cf=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var a=e.byteLength,u=1;this.m=="hvc"&&(u=2);for(var c=n||0,d=[],p=-1,S=0,T,k=0;k<a;++k){var A=e[k];if(A){if(2<=c&&A==1){if(t&&!d.length&&p==-1&&(A=k-(3<c?3:c),n&&A!=0&&(A=e.subarray(0,A),t.data=Pn(t.data,A),t.fullData=Pn(t.fullData,A))),0<=p?(c=k-((3<c?3:c)+1),d.push({data:e.subarray(p+u,c+1),fullData:e.subarray(p,c+1),type:S,time:r})):t&&!d.length&&(p=k-c,0<p&&(p=e.subarray(0,p),t.data=Pn(t.data,p),t.fullData=Pn(t.fullData,p))),k>=a-u)return d;k++,p=k,S=this.m=="hvc"?e[k]>>1&63:e[k]&31}c=0}else c++;k>=a-1&&0<=p&&0<=c&&(T={data:e.subarray(p+u,a),fullData:e.subarray(p,a),type:S,time:r})}return T&&d.push(T),!d.length&&t&&(t.data=Pn(t.data,e),t.fullData=Pn(t.fullData,e)),d},w.getMetadata=function(){for(var e=[],t=b(this.l),n=t.next();!n.done;n=t.next())n=Pn.apply(Co,_(n.value)),(n=ip(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:cs(n.data),dts:n.dts,pts:n.pts});return e},w.Tb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=b(this.i),n=t.next();!n.done;n=t.next()){var r=Pn.apply(Co,_(n.value)),a=ip(this,r);n=this.h.length?this.h[this.h.length-1]:null,a&&a.pts!=null&&a.dts!=null&&(!n||n.pts!=a.pts&&n.dts!=a.dts)?(this.h.length&&a.dts<(n.dts||0)&&(e=!0),this.h.push(a)):this.h.length&&(r=a?a.data:r)&&(n=this.h.pop(),n.data=Pn(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(u,c){var d=(u.pts||0)-(c.pts||0);return(u.dts||0)-(c.dts||0)||d}))}return this.h},w.Fc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=b(this.j),r=n.next();!r.done;r=n.next()){var a=Pn.apply(Co,_(r.value)),u=ip(this,a);r=this.g.length?this.g[this.g.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!r||r.pts!=u.pts&&r.dts!=u.dts)?(this.g.length&&u.dts<(r.dts||0)&&(t=!0),this.g.push(u)):this.g.length&&(a=u?u.data:a)&&(r=this.g.pop(),r.data=Pn(r.data,a),this.g.push(r))}if(e){for(n=[],r=b(this.g),a=r.next();!a.done;a=r.next())if(a=a.value,a.nalus=this.Cf(a,c,void 0),a.nalus.length){n.push(a);var c=a.nalus[a.nalus.length-1]}this.g=n}t&&(this.g=this.g.sort(function(d,p){var S=(d.pts||0)-(p.pts||0);return(d.dts||0)-(p.dts||0)||S}))}return e?this.g:(e=this.g,this.g=[],e)},w.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Tb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.Fc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},w.$c=function(){return{audio:this.A,video:this.m}},w.Pd=function(){for(var e=[],t=b(this.Fc()),n=t.next();!n.done;n=t.next())e.push.apply(e,_(n.value.nalus));return e},w.gi=function(){Et("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.kf();return{height:e.height,width:e.width}},w.kf=function(){return this.m=="hvc"?Sk(this):wk(this)};function wk(e){var t={height:null,width:null,codec:null};if(e=e.Pd(),!e.length||(e=e.find(function(A){return A.type==7}),!e))return t;e=new pr(e.data);var n=Vt(e),r=Vt(e),a=Vt(e);if(Do(e),Ck.includes(n)){var u=Xe(e);if(u===3&&Vo(e,1),Do(e),Do(e),Vo(e,1),rt(e)){u=u!==3?8:12;for(var c=0;c<u;c++)rt(e)&&(6>c?Lf(e,16):Lf(e,64))}}if(Do(e),u=Xe(e),u===0)Xe(e);else if(u===1)for(Vo(e,1),Do(e),Do(e),u=Xe(e),c=0;c<u;c++)Do(e);Do(e),Vo(e,1),u=Xe(e),c=Xe(e);var d=Mt(e,1);d===0&&Vo(e,1),Vo(e,1);var p=0,S=0,T=0,k=0;return rt(e)&&(p=Xe(e),S=Xe(e),T=Xe(e),k=Xe(e)),t.height=String((2-d)*(c+1)*16-2*T-2*k),t.width=String(16*(u+1)-2*p-2*S),t.codec="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+a.toString(16).toUpperCase()).slice(-2),t}function Sk(e){var t={height:null,width:null,codec:null};if(e=e.Pd(),!e.length||(e=e.find(function(O){return O.type==33}),!e))return t;var n=new pr(e.fullData,!0);Vt(n),Vt(n),Mt(n,4);var r=Mt(n,3);rt(n);var a=Mt(n,2),u=Mt(n,1),c=Mt(n,5),d=Mt(n,32);e=Vt(n);for(var p=Vt(n),S=Vt(n),T=Vt(n),k=Vt(n),A=Vt(n),E=Vt(n),R=[],D=[],L=0;L<r;L++)R.push(rt(n)),D.push(rt(n));if(0<r)for(L=r;8>L;L++)Mt(n,2);for(L=0;L<r;L++)R[L]&&Mt(n,88),D[L]&&Vt(n);Xe(n),r=Xe(n),r==3&&Mt(n,1),R=Xe(n),D=Xe(n);var $=L=0,N=0,K=0;return rt(n)&&(L+=Xe(n),$+=Xe(n),N+=Xe(n),K+=Xe(n)),t.width=String(R-(L+$)*(r===1||r===2?2:1)),t.height=String(D-(N+K)*(r===1?2:1)),n=function(O){for(var H=0,J=0;32>J;J++)H|=(O>>J&1)<<31-J;return H>>>0}(d),u=u==1?"H":"L",a="hvc1"+("."+["","A","B","C"][a]+c),a+="."+n.toString(16).toUpperCase(),a+="."+u+E,A&&(a+="."+A.toString(16).toUpperCase()),k&&(a+="."+k.toString(16).toUpperCase()),T&&(a+="."+T.toString(16).toUpperCase()),S&&(a+="."+S.toString(16).toUpperCase()),p&&(a+="."+p.toString(16).toUpperCase()),e&&(a+="."+e.toString(16).toUpperCase()),t.codec=a,t}function r1(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Ll(e){return!(0>rp(e))}function rp(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}ve("shaka.util.TsParser",an),an.syncOffset=rp,an.probe=Ll,an.prototype.getVideoInfo=an.prototype.kf,an.prototype.getVideoResolution=an.prototype.gi,an.prototype.getVideoNalus=an.prototype.Pd,an.prototype.getCodecs=an.prototype.$c,an.prototype.getStartTime=an.prototype.getStartTime,an.prototype.getVideoData=an.prototype.Fc,an.prototype.getAudioData=an.prototype.Tb,an.prototype.getMetadata=an.prototype.getMetadata,an.prototype.parseNalus=an.prototype.Cf,an.prototype.parseAvcNalus=an.prototype.Ci,an.prototype.parse=an.prototype.parse,an.prototype.clearData=an.prototype.clearData,an.Timescale=9e4;var Ck=[100,110,122,244,44,83,86,118,128,138,139,134];function Dl(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&je("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Et("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{je("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(je("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||je(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function s1(e){e.g&&e.i.classList.add("shaka-hidden")}Dl.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function a1(e,t,n){var r=0,a=-1;switch(t.mimeType){case"video/webm":r=1;break;case"video/mp4":r=2}switch(n){case"DASH":a=1;break;case"HLS":a=0}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(a))}ve("shaka.lcevc.Dec",Dl),Dl.prototype.release=Dl.prototype.release;function l1(e,t,n,r){var a=this;this.i=e,this.da=n,this.A=null,this.F=t,this.h={},this.G={},this.Da={},this.g=null,this.fa=!1,this.Z=r||null,this.l={},this.s=new xt,this.j={},this.H=null,this.L=new en,this.N="",this.qa=!1,this.m=u1(this,this.L),this.C=!1,this.I=new Ys(function(){return bk(a)}),this.B=!1,this.ba="UNKNOWN",this.Ea=this.Fa=!1,this.za=new en,this.o=!1,this.xa=!0,this.pa=this.R=this.ya=this.U=this.K=this.ea=null,this.oa=new en}function u1(e,t){if(h.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.s.D(n,"startstreaming",function(){e.xa=!0}),e.s.D(n,"endstreaming",function(){e.xa=!1}),e.s.ha(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.s.ha(e.i,"playing",function(){e.qa=!0}),e.N=Uf(n),e.i.src=e.N,n}return n=new MediaSource,e.s.ha(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.s.ha(e.i,"playing",function(){e.qa=!0}),e.N=Uf(n),e.i.src=e.N,n}function Tk(e,t){var n,r,a,u,c,d,p,S,T,k,A;return V(function(E){if(E.g==1)return e.createSegmentIndex?I(E,e.createSegmentIndex(),2):E.u(2);if(!e.segmentIndex)return E.return(!1);if(e.segmentIndex.getNumReferences()==0)return E.return(!0);for(n=Gn,r=new Set,a=b(e.segmentIndex),u=a.next();!u.done;u=a.next())if(c=u.value,d=c.mimeType||e.mimeType||"",p=c.codecs||e.codecs||"",S=d+":"+p,!r.has(S)){if(r.add(S),t==n.ua){if(T=Wn(d,p),!wl(T))return E.return(!1)}else if(t==n.ga?p=Cl(p):t==n.X&&(p=Hs(p,d)),k=cb(e,d,p),A=ss(d,p),!bt(k)&&!fo(A))return E.return(!1)}return E.return(!0)})}w=l1.prototype,w.destroy=function(){return this.I.destroy()};function bk(e){var t,n,r,a,u,c,d,p;return V(function(S){if(S.g==1){t=[];for(n in e.l)for(r=e.l[n],a=r[0],e.l[n]=r.slice(0,1),a&&t.push(a.p.catch(Gg)),u=b(r.slice(1)),c=u.next();!c.done;c=u.next())d=c.value,d.p.reject(new re(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(p in e.j)t.push(e.j[p].destroy());return I(S,Promise.all(t),2)}e.s&&(e.s.release(),e.s=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.m=null,e.g=null,e.F=null,e.h={},e.j={},e.H=null,e.l={},e.Z=null,e.K=null,e.da=null,q(S)})}w.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var a=this,u,c,d,p,S;return V(function(T){switch(T.g){case 1:return u=Gn,I(T,a.L,2);case 2:a.B=t,a.ba=n,a.Fa=r,a.Ea=!a.B&&a.ba=="HLS"&&!a.Fa,a.K=null,c=b(e.keys()),d=c.next();case 3:if(d.done){T.u(0);break}return p=d.value,S=e.get(p),I(T,Df(a,p,S,S.codecs),6);case 6:a.o?(a.l[u.X]=[],a.l[u.ga]=[]):a.l[p]=[],d=c.next(),T.u(3)}})};function Df(e,t,n,r){var a,u,c,d,p,S,T,k,A,E,R,D;return V(function(L){switch(L.g){case 1:return a=Gn,u=Ye,c=it,I(L,Tk(n,t),2);case 2:if(c.call(u,L.h,"Type negotiation should happen before MediaSourceEngine.init!"),d=Wn(n.mimeType,r),t==a.ua){Pf(e,d,e.B,n.external),L.u(0);break}if(p=e.A.forceTransmux,(!bt(d)||!e.B&&Dr.includes(d))&&(p=!0),S=ss(n.mimeType,r),!p){L.u(4);break}if(T=jo(a.X,(r||"").split(",")),k=jo(a.ga,(r||"").split(",")),!T||!k){L.u(5);break}return e.o=!0,I(L,Df(e,a.X,n,T),6);case 6:return I(L,Df(e,a.ga,n,k),7);case 7:return L.return();case 5:(A=fo(S))&&(E=A(),e.j[t]=E,d=E.convertCodecs(t,S));case 4:R=d+e.A.addExtraFeaturesToSourceBuffer(d),tn(e.I);try{D=e.m.addSourceBuffer(R)}catch($){throw new re(2,3,3015,$,"The mediaSource_ status was "+e.m.readyState+" expected 'open'",null)}e.B&&(D.mode=Nk),e.s.D(D,"error",function(){var $=e.l[t][0];$.p.reject(new re(2,3,3014,e.i.error?e.i.error.code:0,$.uri))}),e.s.D(D,"updateend",function(){return mr(e,t)}),e.h[t]=D,e.G[t]=d,e.Da[t]=!!n.drmInfos.length,q(L)}})}w.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function Pf(e,t,n,r){e.g||(e.g=new lr(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var a=e.g;r=r||e.fa,e=e.ba,t=="application/cea-608"||t=="application/cea-708"?a.i=null:(a.i=(0,Xn[t])(),a.i.setSequenceMode?a.i.setSequenceMode(n):Et("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),a.i.setManifestType?a.i.setManifestType(e):Et("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),a.B=r)}function f1(e){return e.C?!1:e.m?e.m.readyState=="ended":!0}function sp(e,t){return e.C||!Object.keys(e.h).length?e=null:t==Nt?e=e.g.g:(e=na(e,t),e=!e||_l(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Pl(e,t){return e.C?null:t==Nt?e.g.h:Zd(na(e,t))}function kk(e,t,n){return e.C?0:t==Nt?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=na(e,t),Zy(e,n))}w.wb=function(){var e={total:this.C?[]:Ur(this.i.buffered),audio:this.C?[]:Ur(na(this,"audio")),video:this.C?[]:Ur(na(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function na(e,t){try{return e.h[t].buffered}catch{return null}}function Ek(e,t,n,r,a,u){var c=null,d=st(n);if(Dr.includes(a))u=cs(d),u.length&&r&&((t=u.find(function(k){return k.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(c=Math.round(t.data)/1e3),e.da.onMetadata([{cueTime:r.startTime,data:d,frames:u,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(a.includes("/mp4")&&r&&r.timestampOffset==0&&r.$&&r.$.timescale){var p=r.$.timescale;if(!isNaN(p)){var S=0,T=!1;new on().box("moof",_t).box("traf",_t).S("tfdt",function(k){S=_f(k.reader,k.version).baseMediaDecodeTime/p,T=!0,k.parser.stop()}).parse(n,!0),T&&(c=S)}}else!a.includes("/mp4")&&!a.includes("/webm")&&Ll(d)&&(e.K?e.K.clearData():e.K=new an,d=e.K.parse(d),t=d.getStartTime(t),t!=null&&(c=t),d=d.getMetadata(),d.length)&&e.da.onMetadata(d,u,r?r.endTime:null);return c}function Of(e,t,n,r,a,u,c,d,p,S){c=c===void 0?!1:c,d=d===void 0?!1:d,p=p===void 0?!1:p,S=S===void 0?!1:S;var T,k,A,E,R,D,L,$,N,K,O,H,J,oe;return V(function(se){switch(se.g){case 1:if(T=Gn,t!=T.ua){se.u(2);break}if(!e.B){se.u(3);break}return I(se,e.za,4);case 4:k=se.h,e.g.s=k;case 3:return I(se,db(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.M()[0]:null),5);case 5:return se.return();case 2:if(S||!e.o){se.u(6);break}return I(se,Of(e,T.X,n,r,a,u,c,d,p,!0),7);case 7:return I(se,Of(e,T.ga,n,r,a,u,c,d,p,!0),8);case 8:return se.return();case 6:if(!e.h[t])return se.return();if(A=e.h[t].timestampOffset,E=e.G[t],e.j[t]&&(E=e.j[t].getOriginalMimeType()),r&&(R=Ek(e,t,n,r,E,A),R!=null&&(e.U==null&&t==T.ga&&(e.U=R,e.ya=r.startTime,e.R!=null&&(D=0,e.ya==e.pa&&(D=e.U-e.R),e.oa.resolve(D))),e.R==null&&t==T.X&&(e.R=R,e.pa=r.startTime,e.U!=null&&(L=0,e.ya==e.pa&&(L=e.U-e.R),e.oa.resolve(L))),$=r.startTime-R,N=Math.abs(A-$),(.001<=N||c||d)&&(!p||0<$||!A)&&(A=$,e.Ea&&(io(e,t,function(){return oa(e,t)},null),io(e,t,function(){return ia(e,t,A)},null))),K=t==T.ga||!(T.ga in e.h),e.B&&K&&e.za.resolve(A))),u&&t==T.ga&&(e.g||Pf(e,"application/cea-608",e.B,!1),e.H||(O=E.split(";",1)[0],e.H=new fn(O)),r?(H=e.H.i(n),H.length&&mb(e.g,H,r.startTime,r.endTime,A)):e.H.init(n,d)),!e.j[t]){se.u(9);break}return I(se,e.j[t].transmux(n,a,r,e.m.duration,t),10);case 10:n=se.h;case 9:if(n=Rk(e,n,r?r.startTime:null,t,r?r.M()[0]:null),!r||!e.B||t==T.ua){se.u(11);break}if(!c&&!d){se.u(11);break}if(J=r.startTime,e.ba!="HLS"||e.o||t!=T.X||!e.h[T.ga]){se.u(13);break}return I(se,e.oa,14);case 14:oe=se.h,.1<Math.abs(oe)&&(J-=oe);case 13:io(e,t,function(){return oa(e,t)},null),io(e,t,function(){return ia(e,t,J)},null);case 11:return I(se,io(e,t,function(){var ye=n;if(t=="video"&&e.Z){var le=e.Z;le.g&&le.g.appendBuffer(ye,"video",le.o,-A)}e.h[t].appendBuffer(ye)},r?r.M()[0]:null),15);case 15:q(se)}})}function Ak(e,t){var n=Pl(e,"video")||0;Vg(e.g,t,n)}function Ik(e){e.g&&Vg(e.g,"",0)}w.remove=function(e,t,n){var r=this,a;return V(function(u){return u.g==1?(a=Gn,e==a.ua?I(u,r.g.remove(t,n),0):I(u,io(r,e,function(){return Nf(r,e,t,n)},null),4)):r.o?I(u,io(r,a.X,function(){return Nf(r,a.X,t,n)},null),0):u.u(0)})};function c1(e,t){var n;return V(function(r){return r.g==1?(n=Gn,t==n.ua?e.g?I(r,e.g.remove(0,1/0),0):r.return():I(r,io(e,t,function(){return Nf(e,t,0,e.m.duration)},null),4)):e.o?I(r,io(e,n.X,function(){return Nf(e,n.X,0,e.m.duration)},null),0):r.u(0)})}w.flush=function(e){var t=this,n;return V(function(r){return r.g==1?(n=Gn,e==n.ua?r.return():I(r,io(t,e,function(){t.i.currentTime-=.001,mr(t,e)},null),2)):t.o?I(r,io(t,n.X,function(){var a=n.X;t.i.currentTime-=.001,mr(t,a)},null),0):r.u(0)})};function Mk(e,t,n,r,a,u,c,d,p){var S,T,k;return V(function(A){return A.g==1?(S=Gn,t==S.ua?(u||(e.g.s=n),pb(e.g,r,a),A.return()):(T=[],I(A,Pk(e,t,c,d,p),2))):(k=A.h,k||(T.push(io(e,t,function(){return oa(e,t)},null)),e.o&&T.push(io(e,S.X,function(){return oa(e,S.X)},null))),u||(T.push(io(e,t,function(){return ia(e,t,n)},null)),e.o&&T.push(io(e,S.X,function(){return ia(e,S.X,n)},null))),T.push(io(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=a,e.h[t].appendWindowStart=r,mr(e,t)},null)),e.o&&T.push(io(e,S.X,function(){var E=S.X;e.h[E].appendWindowStart=0,e.h[E].appendWindowEnd=a,e.h[E].appendWindowStart=r,mr(e,E)},null)),I(A,Promise.all(T),0))})}function _k(e,t,n){var r;return V(function(a){return a.g==1?(r=Gn,t==r.ua?a.return():(t==r.ga&&(e.za=new en),io(e,t,function(){return oa(e,t)},null),e.o&&io(e,r.X,function(){return oa(e,r.X)},null),I(a,io(e,t,function(){return ia(e,t,n)},null),2))):e.o?I(a,io(e,r.X,function(){return ia(e,r.X,n)},null),0):a.u(0)})}w.endOfStream=function(e){var t=this;return V(function(n){return I(n,ap(t,function(){f1(t)||t.m.readyState==="closed"||(e?t.m.endOfStream(e):t.m.endOfStream())}),0)})},w.Za=function(e){var t=this;return V(function(n){return I(n,ap(t,function(){if(e<t.m.duration)for(var r in t.h){var a={start:function(){},p:new en,uri:null};t.l[r].unshift(a)}t.m.duration=e,t.ea=e}),0)})},w.getDuration=function(){return this.m.duration};function Nf(e,t,n,r){r<=n?mr(e,t):e.h[t].remove(n,r)}function oa(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,mr(e,t)}function ia(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,mr(e,t)}function mr(e,t){if(!e.C){var n=e.l[t][0];n&&(n.p.resolve(),lp(e,t))}}function io(e,t,n,r){return tn(e.I),n={start:n,p:new en,uri:r},e.l[t].push(n),e.l[t].length==1&&h1(e,t),n.p}function ap(e,t){var n,r,a,u,c,d,p;return V(function(S){switch(S.g){case 1:tn(e.I),n=[],r={};for(a in e.h)r={ready:void 0},r.ready=new en,u={start:function(T){return function(){return T.ready.resolve()}}(r),p:r.ready,uri:null},e.l[a].push(u),n.push(r.ready),e.l[a].length==1&&u.start();return ee(S,2),I(S,Promise.all(n),4);case 4:ne(S,3);break;case 2:throw c=Y(S),c;case 3:return ee(S,5,6),I(S,t(),6);case 6:Z(S);for(d in e.h)lp(e,d);j(S,0);break;case 5:throw p=Y(S),new re(2,3,3015,p,e.i.error||"No error in the media element",null)}})}function lp(e,t){e.l[t].shift(),h1(e,t)}function h1(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new re(2,3,3017,t)):n.p.reject(new re(2,3,3015,r,e.i.error||"No error in the media element",n.uri)),lp(e,t)}}function Rk(e,t,n,r,a){var u=n==null,c=e.Da[r];return n=e.da.Qh(),(u=e.A.insertFakeEncryptionInInit&&u&&c)&&(n=Cd(n),u=Yi()||Ki()||bd()||vl()&&kd()&&n),u&&hf(e.G[r])=="mp4"&&(t=dk(t,a)),t}function Lk(e,t,n,r){return io(e,t,function(){t!==Nt&&(jt()&&(e.j[t]&&(e.j[t].destroy(),delete e.j[t]),r&&(e.j[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),mr(e,t))},null)}function Dk(e,t){var n,r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye;return V(function(le){switch(le.g){case 1:n=Gn,e.C=!0,e.o=!1,r=e.i.currentTime,a=e.i.autoplay,u=e.i.paused,e.qa&&(e.i.autoplay=!1),ae(le,2),e.s.Ra(),c=[];for(d in e.j)c.push(e.j[d].destroy());for(p in e.l)for(S=e.l[p],T=S[0],e.l[p]=S.slice(0,1),T&&c.push(T.p.catch(Gg)),k=b(S.slice(1)),A=k.next();!A.done;A=k.next())E=A.value,E.p.reject(new re(2,7,7003,void 0));for(R in e.h){D=e.h[R];try{e.m.removeSourceBuffer(D)}catch{}}return I(le,Promise.all(c),4);case 4:return e.j={},e.h={},L=e.m.duration,e.L=new en,e.m=u1(e,e.L),I(le,e.L,5);case 5:!isNaN(L)&&L?e.m.duration=L:!isNaN(e.ea)&&e.ea&&(e.m.duration=e.ea),$=new en,N=e.m.sourceBuffers,K=t.size,O=0,H=function(){O++,O===K&&($.resolve(),e.s.jb(N,"addsourcebuffer",H))},e.s.D(N,"addsourcebuffer",H),J=b(t.keys()),oe=J.next();case 6:return oe.done?(e.i.currentTime=r,I(le,$,2)):(se=oe.value,ye=t.get(se),I(le,Df(e,se,ye,ye.codecs),9));case 9:e.o?(e.l[n.X]=[],e.l[n.ga]=[]):e.l[se]=[],oe=J.next(),le.u(6);break;case 2:Z(le),e.C=!1,tn(e.I),e.s.ha(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=a,u||e.i.play())}),j(le,0)}})}function d1(e,t){return ap(e,function(){return Dk(e,t)})}function Pk(e,t,n,r,a){var u,c,d,p,S,T,k,A,E,R,D,L,$,N,K;return V(function(O){return O.g==1?(u=Gn,t==u.ua?O.return(!1):(c=Lo(oi(e.G[t])),d=ki(e.G[t]),S=!1,T=Wn(n,r),k=e.A.forceTransmux,(!bt(T)||!e.B&&Dr.includes(T))&&(k=!0),k&&(A=ss(n,r),E=fo(A))&&(p=E(),R=jo(u.X,(r||"").split(",")),D=jo(u.ga,(r||"").split(",")),R&&D?(S=!0,L=D,t==u.X&&(L=R),T=p.convertCodecs(t,ss(n,L))):T=p.convertCodecs(t,A)),$=Lo(oi(T)),N=ki(T),c===$&&d===N?(e.j[t]&&!p?(e.j[t].destroy(),delete e.j[t]):!e.j[t]&&p?e.j[t]=p:p&&(e.j[t]&&e.j[t].transmux!=p.transmux?(e.j[t].destroy(),delete e.j[t],e.j[t]=p):p.destroy()),O.return(!1)):(K=!0,(e.o||S&&p&&!e.j[t])&&(K=!1),K&&e.A.codecSwitchingStrategy==="smooth"&&jt()?I(O,Lk(e,t,T,p),3):(p&&p.destroy(),I(O,d1(e,a),3))))):O.return(!0)})}function Ok(e,t,n,r){if(t==Nt)var a=!1;else{a=Lo(oi(e.G[t]));var u=ki(e.G[t]),c=Wn(n,r),d=e.A.forceTransmux;(!bt(c)||!e.B&&Dr.includes(c))&&(d=!0),n=ss(n,r),d&&(d=fo(n))&&(d=d(),c=d.convertCodecs(t,n),d.destroy()),t=Lo(oi(c)),c=ki(c),a=a!==t||u!==c}return a?e.A.codecSwitchingStrategy!=="smooth"||!jt()||e.o:!1}var Uf=h.URL.createObjectURL,Nk="sequence";function at(e,t,n){this.i=e,this.A=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.B=0,this.G=!0,this.H=0,this.C=n===void 0?!0:n,this.F=0,this.s=!1,this.m=e}w=at.prototype,w.getDuration=function(){return this.j},w.Sh=function(){return this.g},w.dh=function(e){this.i=e},w.Za=function(e){this.j=e},w.Xh=function(){return this.i},w.ah=function(e){this.B=e},w.sc=function(e){this.G=e},w.pe=function(e){this.o=e},w.Od=function(){return this.o},w.Of=function(e){this.A=e},w.Lh=function(){return this.A},w.Ng=function(e,t){if(e.length!=0){var n=(Date.now()+this.B)/1e3;if(e=e.filter(function(a){return a.start+t<n}),e.length!=0){var r=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(a,u){return Math.max(a,u.end-u.start)},this.g),this.h=Math.max(this.h,r),this.i!=null&&this.C&&!this.s&&(this.i=n-this.h-this.g)}}},w.sd=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.B)/1e3;e=b(e);for(var a=e.next();!a.done;a=e.next())a=a.value,r<a.startTime||(t=Math.min(t,a.startTime),n=Math.max(n,a.endTime),this.g=Math.max(this.g,a.endTime-a.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.s&&(this.i=r-this.h-this.g)}},w.Th=function(){return this.h},w.Wd=function(){this.s=!0},w.si=function(){return this.s},w.bh=function(e){this.m=e},w.Ph=function(){return this.m},w.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},w.xf=function(e){this.g=Math.max(this.g,e)},w.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},w.V=function(){return this.j==1/0&&!this.G},w.kc=function(){return this.j!=1/0&&!this.G},w.mb=function(){return Math.max(this.H,this.Wb()-this.o)},w.hh=function(e){this.H=e},w.Wb=function(){return this.V()||this.kc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},w.bd=function(e){var t=Math.max(this.l,this.H);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Wb()-this.o+e,this.yb()))},w.Vb=function(){return this.bd(0)},w.yb=function(){return Math.max(0,this.Wb()-(this.V()||this.kc()?this.A:0))},w.nh=function(){return!(this.i==null||this.h!=null&&this.C)},w.$g=function(e){this.F=e},w.Jh=function(){return this.F},ve("shaka.media.PresentationTimeline",at),at.prototype.getAvailabilityTimeOffset=at.prototype.Jh,at.prototype.setAvailabilityTimeOffset=at.prototype.$g,at.prototype.usingPresentationStartTime=at.prototype.nh,at.prototype.getSeekRangeEnd=at.prototype.yb,at.prototype.getSeekRangeStart=at.prototype.Vb,at.prototype.getSafeSeekRangeStart=at.prototype.bd,at.prototype.getSegmentAvailabilityEnd=at.prototype.Wb,at.prototype.setUserSeekStart=at.prototype.hh,at.prototype.getSegmentAvailabilityStart=at.prototype.mb,at.prototype.isInProgress=at.prototype.kc,at.prototype.isLive=at.prototype.V,at.prototype.offset=at.prototype.offset,at.prototype.notifyMaxSegmentDuration=at.prototype.xf,at.prototype.notifyMinSegmentStartTime=at.prototype.ce,at.prototype.getInitialProgramDateTime=at.prototype.Ph,at.prototype.setInitialProgramDateTime=at.prototype.bh,at.prototype.isStartTimeLocked=at.prototype.si,at.prototype.lockStartTime=at.prototype.Wd,at.prototype.getMaxSegmentEndTime=at.prototype.Th,at.prototype.notifySegments=at.prototype.sd,at.prototype.notifyTimeRange=at.prototype.Ng,at.prototype.getDelay=at.prototype.Lh,at.prototype.setDelay=at.prototype.Of,at.prototype.getSegmentAvailabilityDuration=at.prototype.Od,at.prototype.setSegmentAvailabilityDuration=at.prototype.pe,at.prototype.setStatic=at.prototype.sc,at.prototype.setClockOffset=at.prototype.ah,at.prototype.getPresentationStartTime=at.prototype.Xh,at.prototype.setDuration=at.prototype.Za,at.prototype.setPresentationStartTime=at.prototype.dh,at.prototype.getMaxSegmentDuration=at.prototype.Sh,at.prototype.getDuration=at.prototype.getDuration;function p1(e,t,n){this.j=n,this.l=e,this.s=m1(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}p1.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function Uk(e,t){e.i=t}function Bk(e){this.g=e}function m1(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=b(Ur(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function up(e,t,n,r,a){var u=this;this.A=a,this.g=e,this.B=t,this.s=n,this.l=new xt,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.o=!1,this.l.D(e,"waiting",function(){return fp(u)}),this.m=new It(function(){fp(u)}).Sa(this.s.gapJumpTimerTime)}up.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},up.prototype.Af=function(){this.o=!0,fp(this)};function fp(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=m1(n),a=n.g.currentTime,u=Date.now()/1e3;(t.g!=a||t.s!=r)&&(t.m=u,t.g=a,t.s=r,t.h=!1),a=u-t.m,(r=a>=t.A&&r&&!t.h)&&(t.i(t.g,a),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new He("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=gk(n,t,e.s.gapDetectionThreshold),r!=null&&(r!=0||e.o))&&(a=n.start(r),(navigator.userAgent.match(/Edge\//)||Ki())&&(a=Math.ceil(100*(a+.01))/100),a>=e.B.yb()||.001>a-t||(r!=0&&n.end(r-1),e.g.currentTime=a,t==e.i&&(e.i=a),e.C++,e.A(new He("gapjumped"))))}}}function ra(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=jk.value().get(t),n.ha(e,t,r))}var jk=new Ns(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function g1(e,t,n,r){var a=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return a.l==null&&(a.l=r()),a.l},this.o=!1,this.h=new xt,this.i=new w1(e),ra(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){v1(a,a.j())})}g1.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function cp(e){return e.o?e.g.currentTime:e.j()}function y1(e,t){0<e.g.readyState?S1(e.i,t):ra(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){v1(e,e.j())})}function v1(e,t){.001>Math.abs(e.g.currentTime-t)?x1(e):(e.h.ha(e.g,"seeking",function(){x1(e)}),S1(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function x1(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function w1(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new It(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}w1.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function S1(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Sa(.1)}function C1(e){this.h=e,this.j=!1,this.g=null,this.i=new xt}w=C1.prototype,w.ready=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,r=t.g;0>t.g&&(r=Math.max(0,n+t.g)),n!=r?(t.i.ha(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=r):t.j=!0}}var t=this;ra(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},w.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},w.Ee=function(e){this.g=this.j?this.g:e},w.yd=function(){return(this.j?this.h.currentTime:this.g)||0},w.gg=function(){return 0},w.fg=function(){return 0},w.Mg=function(){};function T1(e,t,n,r,a,u){var c=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=a,this.s=null,this.o=Fk(e,n,u),this.j=new up(e,t.presentationTimeline,n,this.o,u),this.h=new g1(e,function(){e:{var d=c.j;d.j=!0,d.o=!1;var p=cp(c.h);if(d=k1(c,p),.001<Math.abs(d-p)){if(p=!1,!ni()||ni()&&ff())p=!0;else{var S=Date.now()/1e3;(!c.s||c.s<S-1)&&(c.s=S,p=!0)}if(p){y1(c.h,d),d=void 0;break e}}c.A(),d=void 0}return d},function(d){var p=c.j;p.g.seeking&&!p.j&&(p.j=!0,p.i=d)},function(){var d=r;return d==null?d=1/0>c.g.getDuration()?c.g.Vb():c.g.yb():0>d&&(d=c.g.yb()+d),b1(c,E1(c,d))}),this.m=new It(function(){if(c.i.readyState!=0&&!c.i.paused){var d=cp(c.h),p=c.g.Vb(),S=c.g.yb();3>S-p&&(p=S-3),d<p&&(d=k1(c,d),c.i.currentTime=d)}})}w=T1.prototype,w.ready=function(){this.m.Sa(.25)},w.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},w.Ee=function(e){y1(this.h,e)},w.yd=function(){var e=cp(this.h);return 0<this.i.readyState&&!this.i.paused?E1(this,e):e},w.gg=function(){return this.o?this.o.o:0},w.fg=function(){return this.j.C},w.Mg=function(){this.j.Af()};function b1(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function k1(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,a=e.g.Vb(),u=e.g.yb(),c=e.g.getDuration();3>u-a&&(a=u-3);var d=e.g.bd(n),p=e.g.bd(r);return n=e.g.bd(n+r),t>=c?b1(e,t):t>u?u:t<a?Jd(e.i.buffered,p)?p:n:t>=d||Jd(e.i.buffered,t)?t:n}function E1(e,t){var n=e.g.Vb();return t<n?n:(e=e.g.yb(),t>e?e:t)}function Fk(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new p1(new Bk(e),t.stallThreshold,n),Uk(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function $t(e){this.O=e,this.l=null,this.i=0,this.m=!1}w=$t.prototype,w.getNumReferences=function(){return this.O.length},w.getNumEvicted=function(){return this.i},w.release=function(){this.m||(this.O=[],this.l&&this.l.stop(),this.l=null)},w.yi=function(){this.m=!0},w.Hb=function(e){for(var t=b(this.O),n=t.next();!n.done;n=t.next())e(n.value)},w.find=function(e){for(var t=this.O.length-1,n=t;0<=n;--n){var r=this.O[n],a=n<t?this.O[n+1].startTime:r.endTime;if(e>=r.startTime&&e<a)return n+this.i}return this.O.length&&e<this.O[0].startTime?this.i:null},w.get=function(e){return this.O.length==0?null:(e-=this.i,0>e||e>=this.O.length?null:this.O[e])},w.offset=function(e){if(!this.m)for(var t=b(this.O),n=t.next();!n.done;n=t.next())n.value.offset(e)},w.Zd=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.O=this.O.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.O.push.apply(this.O,_(e))}},w.rd=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.O.length==0||r.endTime>n.O[0].startTime)}),this.Zd(e),this.Ma(t)},w.Ma=function(e){if(!this.m){var t=this.O.length;this.O=this.O.filter(function(n){return n.endTime>e}),this.i+=t-this.O.length}},w.Bc=function(e,t,n){if(n=n===void 0?!1:n,!this.m){for(;this.O.length&&this.O[this.O.length-1].startTime>=t;)this.O.pop();for(;this.O.length&&this.O[0].endTime<=e;)this.O.shift(),n||this.i++;this.O.length!=0&&(e=this.O[this.O.length-1],t=new ct(e.startTime,t,e.F,e.Ha,e.sa,e.$,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.O[this.O.length-1]=t)}},w.ue=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new It(function(){var r=t();r?n.O.push.apply(n.O,_(r)):(n.l.stop(),n.l=null)}),this.l.Sa(e))},$t.prototype[Symbol.iterator]=function(){return this.Ib(0)},$t.prototype.Ib=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;var a=this.get(r);n?r++:r--;var u=-1;if(a&&0<a.g.length)for(var c=a.g.length-1;0<=c;--c){var d=a.g[c];if(e>=d.startTime&&e<d.endTime){if(!t){for(;c&&!d.l;)c--,d=a.g[c];if(!d.l)return Tt("No independent partial segment found!"),null}n?r--:r++,u=c-1;break}}return new ii(this,r,u,n)};function hp(e,t,n){return e=new ct(e,e+t,function(){return n},0,null,null,e,e,e+t),new $t([e])}ve("shaka.media.SegmentIndex",$t),$t.forSingleSegment=hp,$t.prototype.getIteratorForTime=$t.prototype.Ib,$t.prototype.updateEvery=$t.prototype.ue,$t.prototype.fit=$t.prototype.Bc,$t.prototype.evict=$t.prototype.Ma,$t.prototype.mergeAndEvict=$t.prototype.rd,$t.prototype.offset=$t.prototype.offset,$t.prototype.get=$t.prototype.get,$t.prototype.find=$t.prototype.find,$t.prototype.markImmutable=$t.prototype.yi,$t.prototype.release=$t.prototype.release,$t.prototype.getNumEvicted=$t.prototype.getNumEvicted,$t.prototype.getNumReferences=$t.prototype.getNumReferences;function ii(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}ii.prototype.Sc=function(e){this.reverse=e},ii.prototype.Eh=function(){return this.h},ii.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},ii.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},ve("shaka.media.SegmentIterator",ii),ii.prototype.next=ii.prototype.next,ii.prototype.current=ii.prototype.current,ii.prototype.currentPosition=ii.prototype.Eh,ii.prototype.setReverse=ii.prototype.Sc;function On(){$t.call(this,[]),this.g=[]}Q(On,$t),w=On.prototype,w.clone=function(){var e=new On;return e.g=this.g.slice(),e},w.release=function(){for(var e=b(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g=[]},w.Hb=function(e){for(var t=b(this.g),n=t.next();!n.done;n=t.next())n.value.Hb(e)},w.find=function(e){for(var t=0,n=b(this.g),r=n.next();!r.done;r=n.next()){r=r.value;var a=r.find(e);if(a!=null)return a+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},w.get=function(e){for(var t=0,n=b(this.g),r=n.next();!r.done;r=n.next()){r=r.value;var a=r.get(e-t);if(a)return a;a=r.getNumReferences(),t+=r.getNumEvicted()+a}return null},w.offset=function(){},w.Zd=function(){},w.Ma=function(){},w.rd=function(){},w.Bc=function(){},w.ue=function(){},ve("shaka.media.MetaSegmentIndex",On),On.prototype.updateEvery=On.prototype.ue,On.prototype.fit=On.prototype.Bc,On.prototype.mergeAndEvict=On.prototype.rd,On.prototype.evict=On.prototype.Ma,On.prototype.merge=On.prototype.Zd,On.prototype.offset=On.prototype.offset,On.prototype.get=On.prototype.get,On.prototype.find=On.prototype.find,On.prototype.forEachTopLevelReference=On.prototype.Hb,On.prototype.release=On.prototype.release;function Ol(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Nd(),this.h=new It(function(){t.g.Lg(.25*t.i)})}Ol.prototype.release=function(){this.set(this.hc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Ol.prototype.set=function(e){this.i=e,A1(this)},Ol.prototype.hc=function(){return this.g.hc()};function A1(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Nd()!=t&&e.g.Rf(t);return}catch{}e.h.Sa(.25),e.g.Nd()!=0&&e.g.Rf(0)}function I1(e){var t=this;this.h=e,this.g=new Set,this.i=new It(function(){M1(t,!1)}).Sa(.25)}I1.prototype.release=function(){this.i.stop();for(var e=b(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function M1(e,t){for(var n=b(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function $k(){this.g=null,this.h=[]}function dp(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=b(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function zk(e){function t(u){return{timestamp:u.timestamp,state:u.state,duration:u.duration}}for(var n=[],r=b(e.h),a=r.next();!a.done;a=r.next())n.push(t(a.value));return e.g&&n.push(t(e.g)),n}function Vk(){this.i=this.h=null,this.g=[]}function pp(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Bf(){this.Cd=this.Hg=this.A=this.B=this.I=this.C=this.s=this.j=this.H=this.m=this.i=this.U=this.Z=this.L=this.N=this.R=this.l=this.o=NaN,this.K=0,this.F=this.G=NaN,this.g=new $k,this.h=new Vk}function jf(e,t,n,r){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=r}function Hk(e,t){e.l=t,e=b(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function Nl(e,t,n){if(n=n===void 0?!1:n,e.i.segmentIndex&&(e.g||(e.g=e.i.segmentIndex.Ib(t,!0,e.o)),e.g)){for(n&&e.g.next();e.h.size<e.m&&(t=e.g.next().value,!!t);)n=!0,t.preload&&t.sa!=null&&(n=!1),t.Yb()==2&&(n=!1),n&&t.$&&_1(e,t.$),n&&!e.h.has(t)&&(n=new gp(e.l),D1(n,t,e.i),e.h.set(t,n));mp(e)}}function _1(e,t){if(e.i.segmentIndex&&!Array.from(e.j.keys()).some(function(r){return Qd(r,t)})){var n=new gp(e.l);D1(n,t,e.i),e.j.set(t,n)}}function R1(e,t){t=b(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Ul(e,n)}function $i(e){R1(e,e.h),R1(e,e.j),e.g=null}jf.prototype.Ma=function(e,t){t=t===void 0?!1:t;for(var n=b(this.h.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&Ul(this,r);t&&mp(this)},jf.prototype.Sc=function(e){this.o=e,this.g&&this.g.Sc(e)};function mp(e){for(var t=Array.from(e.h.keys()),n=b(e.j.keys()),r=n.next(),a={};!r.done;a={nf:void 0},r=n.next())a.nf=r.value,t.some(function(u){return function(c){return Qd(c.$,u.nf)}}(a))||Ul(e,a.nf)}function L1(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var r=n.pop();r&&Ul(e,r)}mp(e)}function Gk(e,t){t&&t!==e.i&&($i(e),e.i=t)}function Ul(e,t){var n=e.h;t instanceof $o&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function gp(e){this.g=e,this.fe=this.Uf=null}function D1(e,t,n){var r=new Uint8Array(0);e.fe=e.g(t,n,function(a){return V(function(u){if(u.g==1)return 0<r.byteLength?r=Pn(r,a):r=a,e.Uf?I(u,e.Uf(r),3):u.u(0);r=new Uint8Array(0),q(u)})})}gp.prototype.abort=function(){this.fe&&this.fe.abort()};function yp(e){Wt.call(this);var t=this;this.g=new Set,this.i=e,this.h=new It(function(){for(var n=t.i(),r=b(t.g),a=r.next();!a.done;a=r.next())a=a.value,a.endTime<n.start&&(t.g.delete(a),a=new He("regionremove",new Map([["region",a]])),t.dispatchEvent(a))}).Sa(2)}Q(yp,Wt),yp.prototype.release=function(){this.g.clear(),this.h.stop(),Wt.prototype.release.call(this)};function Ff(e){Wt.call(this),this.g=new Map,this.h=e}Q(Ff,Wt),Ff.prototype.release=function(){this.g.clear(),Wt.prototype.release.call(this)};function Wk(e,t){var n=e.g.get(t);return n||(n={ud:[],Pe:null,contentType:t},e.g.set(t,n)),n}function Xk(e,t,n){var r=Wk(e,t.contentType);qk(e,r),e={Hc:t,position:n},r=r.ud,t=r.findIndex(function(a){return a.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}Ff.prototype.j=function(e){for(var t=b(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var r=n.Pe;e:{for(var a=n.ud,u=a.length-1;0<=u;u--){var c=a[u];if(c.position<=e){a=c.Hc;break e}}a=null}u=a&&!(r===a||r&&a&&r.bandwidth==a.bandwidth&&r.audioSamplingRate==a.audioSamplingRate&&r.codecs==a.codecs&&r.contentType==a.contentType&&r.frameRate==a.frameRate&&r.height==a.height&&r.mimeType==a.mimeType&&r.channelsCount==a.channelsCount&&r.pixelAspectRatio==a.pixelAspectRatio&&r.width==a.width),c=a&&r&&a.label&&r.label&&r.label!==a.label;var d=a&&r&&a.language&&r.language&&r.language!==a.language;r=a&&r&&a.roles&&r.roles&&!Bn(r.roles,a.roles),(c||d||r)&&P1(this,e,a.contentType)&&(n.Pe=a,r=new He("audiotrackchange",new Map([["quality",a],["position",e]])),this.dispatchEvent(r)),u&&P1(this,e,a.contentType)&&(n.Pe=a,JSON.stringify(a),n=new He("qualitychange",new Map([["quality",a],["position",e]])),this.dispatchEvent(n))}};function P1(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function qk(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,a=t.ud;t.ud=a.filter(function(u,c){return!(u.position<=n&&c+1<a.length&&a[c+1].position<=n||u.position>=r)})}else t.ud=[]}function $f(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function zf(e){var t=ki(e),n=t.split("/")[0];return e=oi(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,xd:null,colorGamut:null}}function Kk(e,t){function n(O){L=O.name;var H=O.reader;H.skip(24);var J=H.la(),oe=H.la();H.skip(50),k=String(J),T=String(oe),O.reader.na()&&_t(O)}function r(O){var H=o1(O.reader);A=H.channelCount,E=H.sampleRate,a(O.name)}function a(O){switch(O=O.toLowerCase(),O){case"avc1":case"avc3":c.push(O+".42E01E"),p=!0;break;case"hev1":case"hvc1":c.push(O+".1.6.L93.90"),p=!0;break;case"dvh1":case"dvhe":c.push(O+".05.04"),p=!0;break;case"vp09":c.push(O+".00.10.08"),p=!0;break;case"av01":c.push(O+".0.01M.08"),p=!0;break;case"mp4a":u.push("mp4a.40.2"),d=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":u.push(O),d=!0}}var u=[],c=[],d=!1,p=!1,S=null,T=null,k=null,A=null,E=null,R=null,D=null,L;if(new on().box("moov",_t).box("trak",_t).box("mdia",_t).S("mdhd",function(O){S=Rf(O.reader,O.version).language}).box("minf",_t).box("stbl",_t).S("stsd",Pr).box("mp4a",function(O){var H=o1(O.reader);A=H.channelCount,E=H.sampleRate,O.reader.na()?_t(O):a(O.name)}).box("esds",function(O){O=O.reader;for(var H="mp4a",J,oe;O.na();){J=O.T();for(var se=O.T();se&128;)se=O.T();if(J==3)O.la(),se=O.T(),se&128&&O.la(),se&64&&O.skip(O.T()),se&32&&O.la();else if(J==4)oe=O.T(),O.skip(12);else if(J==5)break}oe&&(H+="."+Rl(oe),J==5&&O.na()&&(J=O.T(),oe=(J&248)>>3,oe===31&&O.na()&&(oe=32+((J&7)<<3)+((O.T()&224)>>5)),H+="."+oe)),u.push(H),d=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(O){var H=L||"";switch(L){case"dvav":H="avc3";break;case"dva1":H="avc1"}O=O.reader,O.skip(1),O=H+"."+Rl(O.T())+Rl(O.T())+Rl(O.T()),c.push(O),p=!0}).box("hvcC",function(O){var H=L||"";switch(L){case"dvh1":H="hvc1";break;case"dvhe":H="hev1"}var J=O.reader;J.skip(1),O=J.T();var oe=["","A","B","C"][O>>6],se=O&31,ye=J.P(),le=(O&32)>>5?"H":"L";O=[J.T(),J.T(),J.T(),J.T(),J.T(),J.T()],J=J.T();for(var ue=0,ce=0;32>ce&&(ue|=ye&1,ce!=31);ce++)ue<<=1,ye>>=1;for(H=H+("."+oe+se)+("."+Rl(ue,!0)),H+="."+le+J,oe="",se=O.length;se--;)((le=O[se])||oe)&&(oe="."+le.toString(16).toUpperCase()+oe);H+=oe,c.push(H),p=!0}).box("dvcC",function(O){var H=L||"";switch(L){case"hvc1":H="dvh1";break;case"hev1":H="dvhe";break;case"avc1":H="dva1";break;case"avc3":H="dvav";break;case"av01":H="dav1"}var J=O.reader;J.skip(2),O=J.T(),J=J.T(),c.push(H+"."+zo(O>>1&127)+"."+zo(O<<5&32|J>>3&31)),p=!0}).box("dvvC",function(O){var H=L||"";switch(L){case"hvc1":H="dvh1";break;case"hev1":H="dvhe";break;case"avc1":H="dva1";break;case"avc3":H="dvav";break;case"av01":H="dav1"}var J=O.reader;J.skip(2),O=J.T(),J=J.T(),c.push(H+"."+zo(O>>1&127)+"."+zo(O<<5&32|J>>3&31)),p=!0}).S("vpcC",function(O){var H=L||"",J=O.reader;O=J.T();var oe=J.T();J=J.T()>>4&15,c.push(H+"."+zo(O)+"."+zo(oe)+"."+zo(J)),p=!0}).box("av1C",function(O){var H=L||"";switch(L){case"dav1":H="av01"}var J=O.reader;J.skip(1),O=J.T(),J=J.T();var oe=O>>>5,se=(J&64)>>6;c.push(H+"."+oe+"."+zo(O&31)+(J>>>7?"H":"M")+"."+zo(oe===2&&se?(J&32)>>5?12:10:se?10:8)+"."+((J&16)>>4)+"."+((J&8)>>3)+((J&4)>>2)+(J&3)+"."+zo(1)+"."+zo(1)+"."+zo(1)+".0"),p=!0}).box("enca",zd).box("encv",Fo).box("sinf",_t).box("frma",function(O){O=i1(O.reader).codec,a(O)}).box("colr",function(O){c=c.map(function(oe){if(oe.startsWith("av01.")){var se=O.reader,ye=se.va(),le=se.qb(4),ue=String.fromCharCode(le[0]);if(ue+=String.fromCharCode(le[1]),ue+=String.fromCharCode(le[2]),ue+=String.fromCharCode(le[3]),ue==="nclx"){le=se.la(),ue=se.la();var ce=se.la(),Ee=se.T()>>7,Te=oe.split(".");Te.length==10&&(Te[6]=zo(le),Te[7]=zo(ue),Te[8]=zo(ce),Te[9]=String(Ee),oe=Te.join("."))}se.seek(ye)}return oe});var H=vk(O.reader),J=H.colorGamut;R=H.xd,D=J}).parse(e||t,!0),!u.length&&!c.length)return null;var $=d&&!p,N=new Map;if(p){var K=new fn("video/mp4");for(e&&K.init(e),K.i(t),e=b(K.j()),t=e.next();!t.done;t=e.next())t=t.value,N.set(t,t);K.g()}return{type:$?"audio":"video",mimeType:$?"audio/mp4":"video/mp4",codecs:vp(u.concat(c)).join(", "),language:S,height:T,width:k,channelCount:A,sampleRate:E,closedCaptions:N,xd:R,colorGamut:D}}function vp(e){var t=new Set,n=[];e=b(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var a=zs(r);t.has(a)||(n.push(r),t.add(a))}return t=Md("audio",n),r=Md("video",n),e=Md(Nt,n),r=Yk(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function Yk(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?bt('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function Qk(e){var t=null;return new on().box("moov",_t).box("trak",_t).box("mdia",_t).box("minf",_t).box("stbl",_t).S("stsd",Pr).box("encv",Fo).box("enca",zd).box("sinf",_t).box("schi",_t).S("tenc",function(n){n=n.reader,n.T(),n.T(),n.T(),n.T(),t=ar(n.qb(16))}).parse(e,!0),t}function xp(e,t,n){var r,a,u,c,d;return V(function(p){if(p.g==1)return r=t,r.cryptoKey?p.u(2):I(p,r.fetchKey(),3);if(a=r.iv,!a)for(a=st(new ArrayBuffer(16)),u=r.firstMediaSequenceNumber+n,c=a.byteLength-1;0<=c;c--)a[c]=u&255,u>>=8;return t.blockCipherMode=="CBC"?d={name:"AES-CBC",iv:a}:d={name:"AES-CTR",counter:a,length:64},p.return(h.crypto.subtle.decrypt(d,r.cryptoKey,e))})}function sa(e,t,n,r,a){return e=oo(e,r,a),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function O1(e,t){var n=this;this.g=t,this.l=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.m=new Ys(function(){return Zk(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null},this.N=0,this.L=1/0}w=O1.prototype,w.destroy=function(){return this.m.destroy()};function Zk(e){var t,n,r,a,u,c,d;return V(function(p){if(p.g==1){for(t=[],n=b(e.i.values()),r=n.next();!r.done;r=n.next())a=r.value,Bl(a),t.push(jl(a)),a.W&&($i(a.W),a.W=null);for(u=b(e.o.values()),c=u.next();!c.done;c=u.next())d=c.value,$i(d);return I(p,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.l=null,e.h=null,q(p)})}w.configure=function(e){if(this.h=e,this.I=new hy({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&($i(t.W),t.W=null),t=b(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,$i(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(Nt))&&t.W&&($i(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&($i(t.W),t.W=null),t=b(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(L1(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||($i(n.W),n.W=null)):0<e.segmentPrefetchLimit&&(n.W=wp(this,n.stream));e.disableAudioPrefetch||iE(this)};function Jk(e,t,n){e.l.presentationTimeline.V()||(e.N=t,e.L=n)}w.start=function(e){var t=this;return V(function(n){if(n.g==1)return I(n,oE(t,e||new Map),2);tn(t.m),t.C=!0,q(n)})};function eE(e,t){var n,r,a,u,c,d;V(function(p){switch(p.g){case 1:return n=Gn,e.H++,r=e.H,ee(p,2),I(p,c1(e.g.aa,n.ua),4);case 4:ne(p,3);break;case 2:a=Y(p),e.g&&e.g.onError(a);case 3:u=Wn(t.mimeType,t.codecs),Pf(e.g.aa,u,e.l.sequenceMode,t.external),c=e.g.aa.F,(c.isTextVisible()||e.h.alwaysStreamText)&&e.H==r&&(d=B1(e,t),e.i.set(n.ua,d),mi(e,d,0)),q(p)}})}function tE(e){var t=e.i.get(Nt);t&&(Bl(t),jl(t).catch(function(){}),e.i.delete(Nt)),e.s=null}function N1(e,t){for(var n=0>e.g.eb(),r=b(e.i.values()),a=r.next();!a.done;a=r.next())a=a.value,a.ia&&a.ia.Sc(n),a.W&&a.W.Sc(n);for(r=b(e.o.values()),a=r.next();!a.done;a=r.next())a.value.Sc(n);(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.rc&&(aa(e,t,!1,0,!1),n.rc=r):(t=n.rc)&&(n.rc=null,aa(e,t,!0,0,!1)))}function U1(e,t,n,r,a,u){n=n===void 0?!1:n,r=r===void 0?0:r,a=a===void 0?!1:a,u=u===void 0?!1:u,e.j=t,e.C&&(t.video&&aa(e,t.video,n,r,a,u),t.audio&&aa(e,t.audio,n,r,a,u))}function Vf(e,t){V(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):I(n,t.createSegmentIndex(),2):n.return();aa(e,t,!0,0,!1),q(n)})}function aa(e,t,n,r,a,u){var c=e.i.get(t.type);c||t.type!=Nt?c&&(c.rc&&(t.trickModeVideo?(c.rc=t,t=t.trickModeVideo):c.rc=null),c.stream!=t||a)&&(e.o.has(t)?c.W=e.o.get(t):c.W&&Gk(c.W,t),t.type==Nt&&(a=Wn(t.mimeType,t.codecs),Pf(e.g.aa,a,e.l.sequenceMode,t.external)),e.o.has(c.stream)||c.stream.closeSegmentIndex&&c.stream.closeSegmentIndex(),c.stream=t,c.ia=null,c.hg=!!u,n?c.Vc?c.Be=!0:c.Qa?(c.cc=!0,c.Hd=r,c.Be=!0):(Bl(c),bp(e,c,!0,r).catch(function(d){e.g&&e.g.onError(d)})):c.Qa||c.sb||mi(e,c,0),nE(e,c).catch(function(d){e.g&&e.g.onError(d)})):eE(e,t)}function nE(e,t){var n,r;return V(function(a){if(a.g==1)return t.ib?(n=t.stream,r=t.ib,n.segmentIndex?a.u(2):I(a,n.createSegmentIndex(),2)):a.return();if(t.ib!=r||t.stream!=n)return a.return();var u=e.g.Md(),c=Pl(e.g.aa,t.type),d=t.stream.segmentIndex.find(t.Na?t.Na.endTime:u),p=d==null?null:t.stream.segmentIndex.get(d);d=p&&p.sa?p.sa-p.Ha:null,p&&!d&&(d=(p.endTime-p.getStartTime())*(t.stream.bandwidth||0)/8),d?((p=p.$)&&(d+=(p.sa?p.sa-p.Ha:null)||0),p=e.g.getBandwidthEstimate(),u=8*d/p<(c||0)-u-Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal)||t.ib.h.g>d):u=!1,u&&t.ib.abort(),q(a)})}w.Qc=function(){if(this.g)for(var e=this.g.Md(),t=b(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var a=this.g.aa;if(a.C?a=!1:r==Nt?(a=a.g,a=a.g==null||a.h==null?!1:e>=a.g&&e<a.h):(a=na(a,r),a=Jd(a,e)),!a){if(n.W&&(n.W.g=null),n.type==="audio"){a=b(this.o.values());for(var u=a.next();!u.done;u=a.next())u.value.g=null}n.ia=null,(Pl(this.g.aa,r)!=null||n.Qa)&&Hf(this,n),n.ib&&(n.ib.abort(),n.ib=null),r===Nt&&(r=this.g.aa,r.H&&r.H.g()),n.Qc=!0}}};function Hf(e,t){t.Vc||t.cc||(t.Qa?(t.cc=!0,t.Hd=0):sp(e.g.aa,t.type)==null?t.sb==null&&mi(e,t,0):(Bl(t),bp(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function oE(e,t){var n,r,a,u,c,d,p,S,T,k;return V(function(A){if(A.g==1){if(n=Gn,!e.j)throw new re(2,5,5006);return r=new Map,a=new Set,e.j.audio&&(r.set(n.X,e.j.audio),a.add(e.j.audio)),e.j.video&&(r.set(n.ga,e.j.video),a.add(e.j.video)),e.s&&(r.set(n.ua,e.s),a.add(e.s)),u=e.g.aa,I(A,u.init(r,e.l.sequenceMode,e.l.type,e.l.ignoreManifestTimestampsInSegmentsMode),2)}for(tn(e.m),e.updateDuration(),c=b(r.keys()),d=c.next();!d.done;d=c.next())p=d.value,S=r.get(p),e.i.has(p)||(T=B1(e,S),t.has(S.id)&&(k=t.get(S.id),Hk(k,function(E,R,D){return Gf(E,R,D||null,e.h.retryParameters,e.g.Lb)}),T.W=k),e.i.set(p,T),mi(e,T,0));q(A)})}function B1(e,t){return{stream:t,type:t.type,ia:null,W:wp(e,t),Na:null,lc:null,Vd:null,Ud:null,Td:null,rc:null,endOfStream:!1,Qa:!1,sb:null,cc:!1,Hd:0,Be:!1,Vc:!1,Qc:!0,Gf:!1,fd:!1,ib:null}}function wp(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===Nt&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===Nt&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new jf(e.h.segmentPrefetchLimit,t,function(r,a,u){return Gf(r,a,u||null,e.h.retryParameters,e.g.Lb)},0>e.g.eb()):null}function iE(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r=b(e.l.variants),a=r.next(),u={};!a.done;u={lb:void 0},a=r.next())if(u.lb=a.value,u.lb.audio)if(e.o.has(u.lb.audio)){if(a=e.o.get(u.lb.audio),L1(a,t),!(0<t&&n.some(function(d){return function(p){return Vs(d.lb.audio.language,p)}}(u)))){var c=e.i.get(u.lb.audio.type);a!==(c&&c.W)&&$i(a),e.o.delete(u.lb.audio)}}else 0>=t||!n.some(function(d){return function(p){return Vs(d.lb.audio.language,p)}}(u))||!(a=wp(e,u.lb.audio))||(u.lb.audio.segmentIndex||u.lb.audio.createSegmentIndex(),e.o.set(u.lb.audio,a))}w.updateDuration=function(){var e=this.l.presentationTimeline.getDuration();1/0>e?this.g.aa.Za(e):this.g.aa.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function rE(e,t){var n,r,a,u,c,d;return V(function(p){switch(p.g){case 1:if(tn(e.m),t.Qa||t.sb==null||t.Vc)return p.return();if(t.sb=null,!t.cc){p.u(2);break}return I(p,bp(e,t,t.Be,t.Hd),3);case 3:return p.return();case 2:if(t.stream.segmentIndex){p.u(4);break}return n=t.stream,ee(p,5),I(p,t.stream.createSegmentIndex(),7);case 7:ne(p,6);break;case 5:return r=Y(p),I(p,kp(e,t,r),8);case 8:return p.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.sb||mi(e,t,0),p.return();case 4:ee(p,9),a=sE(e,t),a!=null&&(mi(e,t,a),t.fd=!1),ne(p,10);break;case 9:return u=Y(p),I(p,kp(e,t,u),11);case 11:return p.return();case 10:if(c=Array.from(e.i.values()),!e.C||!c.every(function(S){return S.endOfStream})){p.u(0);break}return I(p,e.g.aa.endOfStream(),13);case 13:tn(e.m),d=e.g.aa.getDuration(),d!=0&&d<e.l.presentationTimeline.getDuration()&&e.l.presentationTimeline.Za(d),q(p)}})}function sE(e,t){if(Cp(t))return Ak(e.g.aa,t.stream.originalId||""),null;if(t.type==Nt&&Ik(e.g.aa),!e.g.aa.xa&&t.type!=Nt)return e.h.updateIntervalSeconds/2;var n=e.g.Md();if(t.type==="audio")for(var r=b(e.o.keys()),a=r.next();!a.done;a=r.next())a=e.o.get(a.value),a.Ma(n,!0),Nl(a,n);r=t.Na?t.Na.endTime:n;var u=kk(e.g.aa,t.type,n),c=Math.max(1,Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),d=e.l.presentationTimeline.getDuration()-r;if(a=Pl(e.g.aa,t.type),1e-6>d&&a)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(Nt))&&Cp(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,u>=c)return e.h.updateIntervalSeconds/2;if(c=!t.ia,a=aE(e,t,n,a),!a)return e.h.updateIntervalSeconds;u=!1,c&&t.hg&&(u=!0,t.hg=!1),c=1/0,d=Array.from(e.i.values()),d=b(d);for(var p=d.next();!p.done;p=d.next())p=p.value,Cp(p)||p.ia&&!p.ia.current()||(c=Math.min(c,p.Na?p.Na.endTime:n));return r>=c+e.l.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.ia&&!e.o.has(t.stream)&&(t.W.Ma(a.startTime),Nl(t.W,a.startTime)),lE(e,t,n,a,u).catch(function(){}),null)}function aE(e,t,n,r){var a=t.ia?t.ia.current():null;if(a)return a;if(t.Na||r)return t.ia=t.stream.segmentIndex.Ib(t.Na?t.Na.endTime:r,!1,0>e.g.eb()),t.ia&&t.ia.next().value;r=e.l.sequenceMode?0:e.h.inaccurateManifestTolerance,a=Math.max(n-r,0),e=0>e.g.eb();var u=null;return r&&(t.ia=t.stream.segmentIndex.Ib(a,!1,e),u=t.ia&&t.ia.next().value),u||(t.ia=t.stream.segmentIndex.Ib(n,!1,e),u=t.ia&&t.ia.next().value),u}function lE(e,t,n,r,a){var u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O;return V(function(H){switch(H.g){case 1:if(u=Gn,c=t.stream,d=t.ia,t.Qa=!0,ee(H,2),r.Yb()==2)throw new re(1,1,1011);return I(H,cE(e,t,r,a),4);case 4:return tn(e.m),e.A?H.return():(p=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",S=h.ReadableStream,e.h.lowLatencyMode&&e.l.isLowLatency&&S&&p&&(e.l.type!="HLS"||r.m)?(A=new Uint8Array(0),R=E=!1,L=function(J){var oe,se,ye;return V(function(le){switch(le.g){case 1:if(E||(R=!0,tn(e.m),e.A))return le.return();if(ee(le,2),A=uE(A,J),oe=!1,se=0,new on().box("mdat",function(ue){se=ue.size+ue.start,oe=!0}).parse(A,!1,!0),!oe){le.u(4);break}return ye=A.subarray(0,se),A=A.subarray(se),I(le,Sp(e,t,n,c,r,ye,!0,a),5);case 5:t.W&&t.ia&&Nl(t.W,r.startTime,!0);case 4:ne(le,0);break;case 2:D=Y(le),q(le)}})},I(H,Tp(e,t,r,L),9)):(T=Tp(e,t,r),I(H,T,7)));case 7:return k=H.h,tn(e.m),e.A?H.return():(tn(e.m),t.cc?(t.Qa=!1,mi(e,t,0),H.return()):I(H,Sp(e,t,n,c,r,k,!1,a),6));case 9:if($=H.h,D)throw D;if(R){H.u(10);break}return E=!0,tn(e.m),e.A?H.return():t.cc?(t.Qa=!1,mi(e,t,0),H.return()):I(H,Sp(e,t,n,c,r,$,!1,a),10);case 10:t.W&&t.ia&&Nl(t.W,r.startTime,!0);case 6:if(tn(e.m),e.A)return H.return();t.Na=r,d.next(),t.Qa=!1,t.Gf=!1,N=e.g.aa.wb(),K=N[t.type],JSON.stringify(K),t.cc||e.g.Af(r,t.stream),mi(e,t,0),ne(H,0);break;case 2:if(O=Y(H),tn(e.m,O),e.A)return H.return();if(t.Qa=!1,O.code==7001)t.Qa=!1,Bl(t),mi(e,t,0),H.u(0);else if(t.type==u.ua&&e.h.ignoreTextStreamFailures)e.i.delete(u.ua),H.u(0);else if(O.code==3017)fE(e,t,O),H.u(0);else return t.fd=!0,O.category==1&&t.W&&Ul(t.W,r),O.severity=2,I(H,kp(e,t,O),0)}})}function uE(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function fE(e,t,n){if(!Array.from(e.i.values()).some(function(a){return a!=t&&a.Gf})){if(e.g.disableStream(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.fd=!0,e.A=!0,e.g.onError(n);return}t.Gf=!0}mi(e,t,4)}function cE(e,t,n,r){var a,u,c,d,p,S,T,k,A,E,R,D,L,$,N;return V(function(K){switch(K.g){case 1:if(a=Gn,u=t.Na==null&&t.lc==null,c=[],d=Math.max(0,Math.max(n.appendWindowStart,e.N)-.1),p=Math.min(n.appendWindowEnd,e.L)+.01,S=zs(n.codecs||t.stream.codecs),T=ki(n.mimeType||t.stream.mimeType),k=n.timestampOffset,k==t.Vd&&d==t.Ud&&p==t.Td&&S==t.tf&&T==t.uf){K.u(2);break}if(A=t.tf&&t.uf&&Ok(e.g.aa,t.type,T,S),!A){K.u(3);break}if(E=null,t.type===a.ga?E=e.i.get(a.X):t.type===a.X&&(E=e.i.get(a.ga)),!E){K.u(3);break}return I(K,jl(E).catch(function(){}),5);case 5:E.lc=null,Hf(e,E);case 3:return I(K,j1(e,t,k,d,p,n,S,T),2);case 2:return Qd(n.$,t.lc)||(t.lc=n.$,n.l&&n.$&&(R=Tp(e,t,n.$),D=function(){var O,H,J,oe,se,ye,le;return V(function(ue){switch(ue.g){case 1:return ee(ue,2),I(ue,R,4);case 4:return O=ue.h,tn(e.m),H=null,J=new Map,oe={projection:null,hfov:null},se=new on,se.box("moov",_t).box("trak",_t).box("mdia",_t).S("mdhd",function(ce){H=Rf(ce.reader,ce.version).timescale}).box("hdlr",function(ce){switch(ce=ce.reader,ce.skip(8),ce.oc()){case"soun":J.set(a.X,H);break;case"vide":J.set(a.ga,H)}H=null}).box("minf",_t).box("stbl",_t).S("stsd",Pr).box("encv",Fo).box("avc1",Fo).box("avc3",Fo).box("hev1",Fo).box("hvc1",Fo).box("dvav",Fo).box("dva1",Fo).box("dvh1",Fo).box("dvhe",Fo).box("dvc1",Fo).box("dvi1",Fo).box("vexu",_t).box("proj",_t).S("prji",function(ce){ce=ce.reader.oc(),oe.projection=ce}).box("hfov",function(ce){ce=ce.reader.P()/1e3,oe.hfov=ce}).parse(O),pE(e,oe),J.has(t.type)?n.$.timescale=J.get(t.type):H!=null&&(n.$.timescale=H),ye=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,I(ue,e.g.kg(t.type,O),5);case 5:return I(ue,Of(e.g.aa,t.type,O,null,t.stream,ye,t.Qc,r),6);case 6:ne(ue,0);break;case 2:throw le=Y(ue),t.lc=null,le}})},L=n.startTime,u&&($=Pl(e.g.aa,t.type),$!=null&&(L=$)),e.g.Ai(L,n.$),c.push(D()))),e.l.sequenceMode&&(N=t.Na?t.Na.i:null,n.i!=N&&c.push(_k(e.g.aa,t.type,n.startTime))),I(K,Promise.all(c),0)}})}function j1(e,t,n,r,a,u,c,d){var p,S,T,k;return V(function(A){if(A.g==1)return p=Gn,S=new Map,e.j.audio&&S.set(p.X,e.j.audio),e.j.video&&S.set(p.ga,e.j.video),ee(A,2),t.Ud=r,t.Td=a,c&&(t.tf=c),d&&(t.uf=d),t.Vd=n,T=e.l.sequenceMode||e.l.type=="HLS",I(A,Mk(e.g.aa,t.type,n,r,a,T,u.mimeType||t.stream.mimeType,u.codecs||t.stream.codecs,S),4);if(A.g!=2)return ne(A,0);throw k=Y(A),t.Ud=null,t.Td=null,t.tf=null,t.uf=null,t.Vd=null,k})}function Sp(e,t,n,r,a,u,c,d){c=c===void 0?!1:c,d=d===void 0?!1:d;var p,S,T,k,A,E,R,D;return V(function(L){switch(L.g){case 1:return p=r.closedCaptions&&0<r.closedCaptions.size,T=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,k=e.h.parsePrftBox&&!e.F,A=r.mimeType=="video/mp4"||r.mimeType=="audio/mp4",E=null,a.$&&(E=a.$.timescale),R=A&&E&&r.type==="video"&&e.l.type=="DASH"&&e.h.shouldFixTimestampOffset,(T||k||R)&&(S=new on),T&&S.S("emsg",function($){var N=r.emsgSchemeIdUris;if($.version===0)var K=$.reader.oc(),O=$.reader.oc(),H=$.reader.P(),J=$.reader.P(),oe=$.reader.P(),se=$.reader.P(),ye=a.startTime+J/H;else H=$.reader.P(),ye=$.reader.Nc()/H+a.timestampOffset,J=ye-a.startTime,oe=$.reader.P(),se=$.reader.P(),K=$.reader.oc(),O=$.reader.oc();$=$.reader.qb($.reader.getLength()-$.reader.va()),(N&&N.includes(K)||e.h.dispatchAllEmsgBoxes)&&(K=="urn:mpeg:dash:event:2012"?e.g.Bi():(N=ye+oe/H,H=new Map().set("detail",{startTime:ye,endTime:N,schemeIdUri:K,value:O,timescale:H,presentationTimeDelta:J,eventDuration:oe,id:se,messageData:$}),H=new He("emsg",H),H.cancelable=!0,e.g.onEvent(H),!H.defaultPrevented&&(K=="https://aomedia.org/emsg/ID3"||K=="https://developer.apple.com/streaming/emsg-id3")&&(K=cs($),K.length)&&e.g.onMetadata([{cueTime:ye,data:$,frames:K,dts:ye,pts:ye}],0,N)))}),k&&S.S("prft",function($){if(!e.F&&a.$.timescale){var N=$.reader,K=$.version;N.P(),$=N.P();var O=N.P();$=1e3*$+O/Math.pow(2,32)*1e3,K===0?N=N.P():(K=N.P(),N=N.P(),N=K*Math.pow(2,32)+N),$=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+$).getTime(),N=new Map().set("detail",{wallClockTime:$,programStartDate:new Date($-N/a.$.timescale*1e3)}),N=new He("prft",N),e.g.onEvent(N),e.F=!0}}),R&&S.box("moof",_t).box("traf",_t).S("tfdt",function($){var N,K,O,H,J,oe;return V(function(se){return N=_f($.reader,$.version),K=N.baseMediaDecodeTime,K?(O=-K/E,H=Number(t.Vd)||0,H<O?(J=t.Ud,oe=t.Td,I(se,j1(e,t,O,J,oe,a),0)):se.u(0)):se.return()})}),(T||k||R)&&S.parse(u,!1,c),I(L,hE(e,t,n),2);case 2:return tn(e.m),D=t.Qc,t.Qc=!1,I(L,e.g.kg(t.type,u),3);case 3:return I(L,Of(e.g.aa,t.type,u,a,r,p,D,d,c),4);case 4:tn(e.m),q(L)}})}function hE(e,t,n){var r,a,u,c;return V(function(d){if(d.g==1)return r=Math.max(e.h.bufferBehind,e.l.presentationTimeline.g),a=sp(e.g.aa,t.type),a==null?d.return():(u=n-a,c=u-r,c<=e.h.evictionGoal?d.return():I(d,e.g.aa.remove(t.type,a,a+c),2));tn(e.m),q(d)})}function Cp(e){return e&&e.type==Nt&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Tp(e,t,n,r){var a,u,c,d,p;return V(function(S){switch(S.g){case 1:if(a=n.cd())return S.return(a);if(u=null,t.W){var T=t.W,k=T.h;n instanceof $o&&(k=T.j),k.has(n)?(T=k.get(n),r&&(T.Uf=r),u=T.fe):u=null}return u||(u=Gf(n,t.stream,r||null,e.h.retryParameters,e.g.Lb)),c=0,t.ia&&(c=t.ia.h),t.ib=u,I(S,u.promise,2);case 2:if(d=S.h,t.ib=null,p=d.data,!n.aesKey){S.u(3);break}return I(S,xp(p,n.aesKey,c),4);case 4:p=S.h;case 3:return S.return(p)}})}function Gf(e,t,n,r,a){var u=e instanceof ct?e:void 0,c=u?1:0;return e=sa(e.M(),e.Ha,e.sa,r,n),e.contentType=t.type,a.request(Fi,e,{type:c,stream:t,segment:u})}function bp(e,t,n,r){var a,u;return V(function(c){if(c.g==1)return t.cc=!1,t.Be=!1,t.Hd=0,t.Vc=!0,t.Na=null,t.ia=null,t.W&&!e.o.has(t.stream)&&$i(t.W),r?(a=e.g.Md(),u=e.g.aa.getDuration(),I(c,e.g.aa.remove(t.type,a+r,u),3)):I(c,c1(e.g.aa,t.type),4);if(c.g!=3)return tn(e.m),n?I(c,e.g.aa.flush(t.type),3):c.u(3);tn(e.m),t.Vc=!1,t.endOfStream=!1,t.Qa||t.sb||mi(e,t,0),q(c)})}function mi(e,t,n){var r=t.type;(r!=Nt||e.i.has(r))&&(t.sb=new gl(function(){var a;return V(function(u){if(u.g==1)return ee(u,2),I(u,rE(e,t),4);if(u.g!=2)return ne(u,0);a=Y(u),e.g&&e.g.onError(a),q(u)})}).Y(n))}function Bl(e){e.sb!=null&&(e.sb.stop(),e.sb=null)}function jl(e){return V(function(t){return e.ib?I(t,e.ib.abort(),0):t.u(0)})}function kp(e,t,n){var r;return V(function(a){if(a.g==1)return I(a,dy(e.I),2);tn(e.m),n.category===1&&(r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)),(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),q(a)})}function dE(e){var t,n,r,a,u,c;return V(function(d){return d.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?d.return(!1):(e.K=t,r=Gn,(a=e.i.get(r.X))&&(a.lc=null,Hf(e,a),jl(a).catch(function(){})),(u=e.i.get(r.ga))&&(u.lc=null,Hf(e,u),jl(u).catch(function(){})),c=new Map,e.j.audio&&c.set(r.X,e.j.audio),e.j.video&&c.set(r.ga,e.j.video),I(d,d1(e.g.aa,c),2))):d.return(!0)})}function pE(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new He("spatialvideoinfo",n)}else n=new He("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function Wf(){}function Ep(e,t,n,r,a){var u=a in r,c=u?n.constructor==Object&&Object.keys(r).length==0:n.constructor==Object&&Object.keys(n).length==0,d=u||c,p=!0,S;for(S in t){var T=a+"."+S,k=u?r[a]:n[S];d||S in n?t[S]===void 0?k===void 0||d?delete e[S]:e[S]=Ji(k):c?e[S]=t[S]:k.constructor==Object&&t[S]&&t[S].constructor==Object?(e[S]||(e[S]=Ji(k)),T=Ep(e[S],t[S],k,r,T),p=p&&T):typeof t[S]!=typeof k||t[S]==null||typeof t[S]!="function"&&t[S].constructor!=k.constructor?(Tt("Invalid config, wrong type for "+T),p=!1):(typeof n[S]=="function"&&n[S].length!=t[S].length&&je("Unexpected number of arguments for "+T),e[S]=t[S]):(Tt("Invalid config, unrecognized key "+T),p=!1)}return p}function Xf(e,t){for(var n={},r=n,a=0,u=0;a=e.indexOf(".",a),!(0>a);)(a==0||e[a-1]!="\\")&&(u=e.substring(u,a).replace(/\\\./g,"."),r[u]={},r=r[u],u=a+1),a+=1;return r[e.substring(u).replace(/\\\./g,".")]=t,n}function la(e,t){return e&&t}function F1(e,t){function n(c){for(var d=b(Object.keys(c)),p=d.next();!p.done;p=d.next())p=p.value,u(c[p])&&Object.keys(c[p]).length===0||a(c[p])||typeof c[p]=="function"?delete c[p]:u(c[p])&&(n(c[p]),Object.keys(c[p]).length===0&&delete c[p])}function r(c,d){return Object.keys(c).reduce(function(p,S){var T=c[S];return d.hasOwnProperty(S)?u(T)&&u(d[S])?(T=r(T,d[S]),(0<Object.keys(T).length||!u(T))&&(p[S]=T)):a(T)&&a(d[S])||Number.isNaN(T)&&Number.isNaN(d[S])||T!==d[S]&&(p[S]=T):p[S]=T,p},{})}function a(c){return Array.isArray(c)&&c.length===0}function u(c){return c&&typeof c=="object"&&!Array.isArray(c)}return e=r(e,t),n(e),e}ve("shaka.util.ConfigUtils",Wf),Wf.getDifferenceFromConfigObjects=F1,Wf.convertToConfigObject=Xf,Wf.mergeConfigObjects=Ep;function gi(){}function $1(e){return e=sr(e),new Sn(e).Eb}function Fl(e,t,n){function r(d){hn(u).setUint32(c,d.byteLength,!0),c+=4,u.set(st(d),c),c+=d.byteLength}if(!n||!n.byteLength)throw new re(2,6,6015);var a;typeof t=="string"?a=Ad(t,!0):a=t,e=sr(e),e=Ad(e,!0);var u=new Uint8Array(12+e.byteLength+a.byteLength+n.byteLength),c=0;return r(e),r(a),r(n),u}function z1(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=sr(e).split("skd://").pop(),Fl(e,n,t))}function Ap(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}ve("shaka.util.FairPlayUtils",gi),gi.commonFairPlayResponse=function(e,t){if(e===2){try{var n=dn(t.data)}catch{return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch{}e&&(t.data=Dn(pi(n)))}},gi.expressplayFairPlayRequest=function(e,t){Ap(e,t)},gi.conaxFairPlayRequest=function(e,t){Ap(e,t)},gi.ezdrmFairPlayRequest=function(e,t){Ap(e,t)},gi.verimatrixFairPlayRequest=function(e,t){e===2&&(e=st(t.body),e=os(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Bi("spc="+e))},gi.expressplayInitDataTransform=function(e,t,n){return z1(e,t,n)},gi.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=sr(e).split("skd://").pop().split("?").shift(),n=h.atob(n);var r=new ArrayBuffer(2*n.length);r=_o(r);for(var a=0,u=n.length;a<u;a++)r[a]=n.charCodeAt(a);return Fl(e,r,t)},gi.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=sr(e).split(";").pop(),Fl(e,n,t))},gi.verimatrixInitDataTransform=function(e,t,n){return z1(e,t,n)},gi.initDataTransform=Fl,gi.defaultGetContentId=$1,gi.isFairPlaySupported=function(){var e;return V(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ee(t,2),I(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(Y(t),t.return(!1))})};function Ip(){}function ua(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:ji(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(T,k,A){return cf()&&k=="skd"&&(k=A.serverCertificate,A=$1(T),T=Fl(T,A,k)),T},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Ki(),minHdcpVersion:"",ignoreDuplicateInitData:!sf()};(Ki()||Zi())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;sf()||xl()||Jt("Tizen 4")||Jt("Tizen 5")||Jt("Tizen 6")||af()||Qi()&&Td()===53||Qi()&&Td()===68||!(!ni()||ni()&&ff()||ni()&&Jt("Fuchsia"))||kd()&&vl()||(n="smooth",r=!0),r={retryParameters:ji(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:qf,manifestPreprocessorTXml:Kf,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(xl()||sf()||af()||Zi()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:qf,manifestPreprocessorTXml:Kf,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var a={retryParameters:ji(),failureCallback:function(T){return la([T])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:Zi()||lf(),dontChooseCodecs:!1,shouldFixTimestampOffset:Qi()||Yi()};(Qi()||Yi()||ni()||uf())&&(a.stallSkip=0);var u={trackSelectionCallback:function(T){return V(function(k){return k.return(T)})},downloadSizeCallback:function(T){var k;return V(function(A){return A.g==1?navigator.storage&&navigator.storage.estimate?I(A,navigator.storage.estimate(),3):A.return(!0):(k=A.h,A.return(k.usage+T<.95*k.quota))})},progressCallback:function(T,k){return la([T,k])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:Us()?.5:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(T){return la([T],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(T,k){return la([T,k])}};var c=!1,d=!1,p=!0;Pg()&&(d=c=!0,p=!1);var S={drm:t,manifest:r,streaming:a,mediaSource:n,offline:u,abrFactory:function(){return new vn},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:c,skipPlayDetection:d,supportsMultipleMediaElements:p}};return u.trackSelectionCallback=function(T){return V(function(k){return k.return(mE(T,S.preferredAudioLanguage,S.preferredVideoHdrLevel))})},S}function Br(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return Ep(e,t,n||ua(),r,"")}function mE(e,t,n){var r=n;r=="AUTO"&&(r=h.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var a=e.filter(function(d){return!(d.type!="variant"||d.hdr&&d.hdr!=r)});n=[];var u=df(t,a.map(function(d){return d.language}));u&&(n=a.filter(function(d){return Kt(d.language)==u})),n.length==0&&(n=a.filter(function(d){return d.primary})),n.length==0&&(a.map(function(d){return d.language}),n=a);var c=n.filter(function(d){return d.height&&480>=d.height});for(c.length&&(c.sort(function(d,p){return p.height-d.height}),n=c.filter(function(d){return d.height==c[0].height})),t=[],n.length&&(a=Math.floor(n.length/2),n.sort(function(d,p){return d.bandwidth-p.bandwidth}),t.push(n[a])),e=b(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=Nt&&n.type!="image"||t.push(n);return t}function qf(e){return la([e],e)}function Kf(e){return la([e],e)}ve("shaka.util.PlayerConfiguration",Ip),Ip.mergeConfigObjects=Br,Ip.createDefault=ua;function gr(e,t,n,r){Wt.call(this),this.L=e,this.U=t,this.xa=r.networkingEngine,this.A=n,this.o=null,this.qa=0,this.Fa=r.yc,this.C=r.vi,this.ab=r.wi,this.g=r.config,this.j=this.F=this.h=null,this.ea=!1,this.G=r.Fi,this.oa=!1,this.l=null,this.da=!1,this.i=this.B=null,this.ba=!1,this.K=new Map,this.pa=!1,this.za=r.Ei,this.Z=new Bf,this.m=new en,this.N=null,this.s=!1,this.Da=r.yh,this.fa=null,this.Ea=r.xh,this.R=!1,this.I=[],this.H=[]}Q(gr,Wt);function $l(e,t,n){(e=t?e.H:e.I)?e.push(n):n()}function gE(e){if(e.H)for(var t=b(e.H),n=t.next();!n.done;n=t.next())n=n.value,n();e.H=null}function V1(e,t){if(e.N=t,e.R=!0,e.I){t=b(e.I);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.I=null}w=gr.prototype,w.getStartTime=function(){return this.A},w.Dc=function(){return this.L},w.gf=function(){return this.h};function yE(e){return e.ba=!0,e.i}function vE(e){return e.ea=!0,e.j}function xE(e){return e.oa=!0,e.G}w.getStats=function(){return this.Z};function wE(e){return e.da=!0,e.l}function SE(e){return e.pa=!0,e.K}w.start=function(){var e=this;(function(){var t;return V(function(n){switch(n.g){case 1:return I(n,Promise.resolve(),2);case 2:return ee(n,3),I(n,CE(e),5);case 5:return zl(e),I(n,TE(e),6);case 6:if(zl(e),e.o||(e.o=new Ws(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups)),e.Ea){var r=e.g.abrFactory;e.B=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Da){r=e.h.presentationTimeline.V();var a=gf(e.h.variants);a=e.o.create(a),e.i.configure(e.g.abr),e.i.setVariants(Array.from(a.values())),(a=e.i.chooseVariant())&&(e.fa=a,a.video&&H1(e,a.video,r),a.audio&&H1(e,a.audio,r))}return I(n,void 0,7);case 7:zl(e),e.m.resolve(),ne(n,0);break;case 3:t=Y(n),e.m.reject(t),q(n)}})})()},w.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Wt.prototype.dispatchEvent.call(this,e)},w.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new He("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function zl(e){if(e.s)throw new re(2,7,7003)}function Mp(e,t){e.dispatchEvent(new He("onstatechange",new Map().set("state",t)))}function CE(e){var t,n,r,a;return V(function(u){if(u.g==1)return Mp(e,"manifest-parser"),e.j||(e.F=qy(e.L,e.U),e.j=e.F(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,Mp(e,"manifest"),e.h?u.u(2):I(u,e.j.start(e.L,e.ab),3);if(u.g!=2&&(e.h=u.h),n=new He("manifestparsed",void 0),e.dispatchEvent(n),e.h.variants.length==0)throw new re(2,4,4036);bE(e.h),r=Date.now()/1e3,a=r-t,e.Z.H=a,q(u)})}function TE(e){var t,n,r,a,u;return V(function(c){switch(c.g){case 1:Mp(e,"drm-engine"),e.qa=Date.now()/1e3,e.l=e.Fa(),e.C.g=e.l,e.l.configure(e.g.drm);var d=e.C;if(t=Kg(e.h.variants,d.h.restrictions,d.i),!t){c.u(2);break}return n=new He("trackschanged",void 0),I(c,Promise.resolve(),3);case 3:zl(e),e.dispatchEvent(n);case 2:return r=gf(e.h.variants),I(c,Ly(e.l,r,e.h.offlineSessionIds),4);case 4:return zl(e),I(c,Hy(e.C,e.h),5);case 5:if(a=c.h,!a){c.u(0);break}return u=new He("trackschanged",void 0),I(c,Promise.resolve(),7);case 7:e.dispatchEvent(u),q(c)}})}w.configure=function(e,t){e=Xf(e,t),Br(this.g,e)},w.getConfiguration=function(){return Ji(this.g)};function H1(e,t,n){var r,a,u,c,d;V(function(p){if(p.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,a=new jf(r,t,function(S,T,k){return Gf(S,T,k||null,e.g.streaming.retryParameters,e.xa)},!1),e.K.set(t.id,a),I(p,t.createSegmentIndex(),2);u=e.A||0,(d=(c=t.segmentIndex.Ib(u))?c.current():null)||(d=t.segmentIndex.get(0)),d&&(n?d.$&&_1(a,d.$):Nl(a,d.startTime)),q(p)})}w.fj=function(){return this.m},w.destroy=function(){var e=this,t,n,r;return V(function(a){switch(a.g){case 1:if(e.s=!0,!e.j||e.ea){a.u(2);break}return I(a,e.j.stop(),2);case 2:if(!e.i||e.ba){a.u(4);break}return I(a,e.i.stop(),4);case 4:if(e.G&&!e.oa&&e.G.release(),!e.l||e.da){a.u(6);break}return I(a,e.l.destroy(),6);case 6:if(0<e.K.size&&!e.pa)for(t=b(e.K.values()),n=t.next();!n.done;n=t.next())r=n.value,$i(r);q(a)}})};function bE(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}ve("shaka.media.PreloadManager",gr),gr.prototype.destroy=gr.prototype.destroy,gr.prototype.waitForFinish=gr.prototype.fj;function Yf(e,t){Wt.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{wc:null,vc:fa,jc:function(r,a){return hs(n,"enter",r,a)}},{wc:Vl,vc:fa,jc:function(r,a){return hs(n,"enter",r,a)}},{wc:Hl,vc:fa,jc:function(r,a){return hs(n,"enter",r,a)}},{wc:fa,vc:Vl,jc:function(r,a){return hs(n,"exit",r,a)}},{wc:fa,vc:Hl,jc:function(r,a){return hs(n,"exit",r,a)}},{wc:Vl,vc:Hl,jc:function(r,a){return hs(n,"skip",r,a)}},{wc:Hl,vc:Vl,jc:function(r,a){return hs(n,"skip",r,a)}}],this.h=new xt,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}Q(Yf,Wt),Yf.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Wt.prototype.release.call(this)},Yf.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=b(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var a=this.g.get(r),u=e<r.startTime?Vl:e>r.endTime?Hl:fa;this.g.set(r,u);for(var c=b(this.m),d=c.next();!d.done;d=c.next())d=d.value,d.wc==a&&d.vc==u&&d.jc(r,t)}}};function hs(e,t,n,r){t=new He(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var Vl=1,fa=2,Hl=3;function _p(e,t,n){var r,a,u,c,d,p,S;return V(function(T){switch(T.g){case 1:var k=new Sn(e).Pa.split("/").pop().split(".");return r=k.length==1?"":k.pop().toLowerCase(),(a=kE[r])?T.return(a):(u=0,c=oo([e],n),ee(T,2),c.method="HEAD",I(T,t.request(u,c).promise,4));case 4:d=T.h,a=d.headers["content-type"],ne(T,3);break;case 2:if(p=Y(T),!p||p.code!=1002&&p.code!=1001){T.u(3);break}return c.method="GET",I(T,t.request(u,c).promise,6);case 6:S=T.h,a=S.headers["content-type"];case 3:return T.return(a?a.toLowerCase().split(";").shift():"")}})}var kE={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function G1(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(c){return G1(c,e)}).join("");var n=[],r=700<=e.fontWeight,a=e.fontStyle=="italic",u=e.textDecoration.includes("underline");return r&&n.push(["b"]),a&&n.push(["i"]),u&&n.push(["u"]),a=e.color,a==""&&t&&(a=t.color),r="",(a=W1(a))&&(r+="."+a),a=e.backgroundColor,a==""&&t&&(a=t.backgroundColor),(t=W1(a))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(c,d){var p=b(d);return d=p.next().value,p=p.next().value,"<"+d+(p===void 0?"":p)+">"+c+"</"+d+">"},e.payload)}function W1(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Rp(e,t){var n=[];e=b(X1(e));for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,_(Rp(r.nestedCues,r)));else{var a=r.clone();a.nestedCues=[],a.payload=G1(r,t),n.push(a)}return n}function X1(e){var t=[];e=b(e);for(var n=e.next(),r={};!n.done;r={Me:void 0},n=e.next())r.Me=n.value,t.some(function(a){return function(u){return ie(a.Me,u)}}(r))||t.push(r.Me);return t}function EE(e){function t(r){for(var a=5381,u=r.length;u;)a=33*a^r.charCodeAt(--u);return(a>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function Ho(e,t){this.g=null;for(var n=b(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.kind!=="metadata"&&r.kind!=="chapters"&&(r.mode="disabled",r.label==t&&(this.g=r));this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}w=Ho.prototype,w.configure=function(){},w.remove=function(e,t){return this.g?(q1(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},w.append=function(e){var t=Rp(e),n=[];e=this.g.cues?Array.from(this.g.cues):[],t=b(t);for(var r=t.next(),a={};!r.done;a={hd:void 0},r=t.next())a.hd=r.value,e.some(function(u){return function(c){return c.startTime==u.hd.startTime&&c.endTime==u.hd.endTime&&c.text==u.hd.payload}}(a))||(r=EE(a.hd))&&n.push(r);for(e=n.slice().sort(function(u,c){return u.startTime!=c.startTime?u.startTime-c.startTime:u.endTime!=c.endTime?u.endTime-c.startTime:"line"in VTTCue.prototype?n.indexOf(c)-n.indexOf(u):n.indexOf(u)-n.indexOf(c)}),e=b(e),t=e.next();!t.done;t=e.next())this.g.addCue(t.value)},w.destroy=function(){return this.g&&(q1(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},w.isTextVisible=function(){return this.g.mode=="showing"},w.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function q1(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=b(Array.from(e.cues)),a=r.next();!a.done;a=r.next())(a=a.value)&&t(a)&&e.removeCue(a);e.mode=n}ve("shaka.text.SimpleTextDisplayer",Ho),Ho.prototype.setTextVisibility=Ho.prototype.setTextVisibility,Ho.prototype.isTextVisible=Ho.prototype.isTextVisible,Ho.prototype.destroy=Ho.prototype.destroy,Ho.prototype.append=Ho.prototype.append,Ho.prototype.remove=Ho.prototype.remove,Ho.prototype.configure=Ho.prototype.configure;function Go(){}w=Go.prototype,w.configure=function(){},w.remove=function(){},w.append=function(){},w.destroy=function(){},w.isTextVisible=function(){return!1},w.setTextVisibility=function(){},ve("shaka.text.StubTextDisplayer",Go),Go.prototype.setTextVisibility=Go.prototype.setTextVisibility,Go.prototype.isTextVisible=Go.prototype.isTextVisible,Go.prototype.destroy=Go.prototype.destroy,Go.prototype.append=Go.prototype.append,Go.prototype.remove=Go.prototype.remove,Go.prototype.configure=Go.prototype.configure;function K1(){}function ca(e){for(;e.firstChild;)e.removeChild(e.firstChild)}ve("shaka.util.Dom",K1),K1.removeAllChildren=ca;function Wo(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||Et("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new It(function(){r.A.paused||ha(r)}).Sa(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new xt,this.j.D(document,"fullscreenchange",function(){ha(r,!0)}),this.j.D(this.A,"seeking",function(){ha(r,!0)}),this.j.D(this.A,"resize",function(){var a=r.A,u=a.videoWidth;a=a.videoHeight,u&&a?r.l=u/a:r.l=null}),this.o=null,"ResizeObserver"in h&&(this.o=new ResizeObserver(function(){ha(r,!0)}),this.o.observe(this.g)),this.B=new Map}w=Wo.prototype,w.configure=function(e){this.C&&this.C.Sa(e.captionsUpdatePeriod)},w.append=function(e){var t=[].concat(_(this.h));e=b(X1(e));for(var n=e.next(),r={};!n.done;r={Ne:void 0},n=e.next())r.Ne=n.value,t.some(function(a){return function(u){return ie(u,a.Ne)}}(r))||this.h.push(r.Ne);ha(this)},w.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},w.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),ha(this,n>this.h.length),!0},w.isTextVisible=function(){return this.m},w.setTextVisibility=function(e){this.m=e};function AE(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function Y1(e,t,n,r,a){var u=!1,c=[],d=[];t=b(t);for(var p=t.next();!p.done;p=t.next()){p=p.value,a.push(p);var S=e.i.get(p),T=p.startTime<=r&&p.endTime>r,k=S?S.qh:null;S&&(c.push(S.Oe),S.qc&&c.push(S.qc),T||(u=!0,e.i.delete(p),S=null)),T&&(d.push(p),S?AE(e,k)||(u=!0):(IE(e,p,a),S=e.i.get(p),k=S.qh,u=!0)),0<p.nestedCues.length&&k&&Y1(e,p.nestedCues,k,r,a),a.pop()}if(u){for(r=b(c),a=r.next();!a.done;a=r.next())a=a.value,a.parentElement&&a.parentElement.removeChild(a);for(d.sort(function(A,E){return A.startTime!=E.startTime?A.startTime-E.startTime:A.endTime-E.endTime}),d=b(d),r=d.next();!r.done;r=d.next())r=e.i.get(r.value),r.qc?(r.qc.contains(n)&&r.qc.removeChild(n),n.appendChild(r.qc),r.qc.appendChild(r.Oe)):n.appendChild(r.Oe)}}function ha(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=b(e.B.values());for(var r=t.next();!r.done;r=t.next())ca(r.value);ca(e.g),e.i.clear(),e.B.clear()}e.m&&Y1(e,e.h,e.g,n,[])}}function IE(e,t,n){var r=1<n.length,a=r?"span":"div";t.lineBreak&&(a="br"),t.rubyTag&&(a=t.rubyTag),r=!r&&0<t.nestedCues.length;var u=document.createElement(a);if(a!="br"&&_E(e,u,t,n,r),n=null,t.region&&t.region.id){var c=t.region,d=e.l===4/3?2.5:1.9;if(n=c.id+"_"+c.width+"x"+c.height+(c.heightUnits==In?"%":"px")+"-"+c.viewportAnchorX+"x"+c.viewportAnchorY+(c.viewportAnchorUnits==In?"%":"px"),e.B.has(n))n=e.B.get(n);else{a=document.createElement("span");var p=c.heightUnits==In?"%":"px",S=c.widthUnits==In?"%":"px",T=c.viewportAnchorUnits==In?"%":"px";a.id="shaka-text-region---"+n,a.classList.add("shaka-text-region"),a.style.position="absolute";var k=c.height,A=c.width;c.heightUnits===2&&(k=5.33*c.height,p="%"),c.widthUnits===2&&(A=c.width*d,S="%"),a.style.height=k+p,a.style.width=A+S,c.viewportAnchorUnits===2?(d=c.viewportAnchorY/75*100,p=c.viewportAnchorX/(e.l===4/3?160:210)*100,d-=c.regionAnchorY*k/100,p-=c.regionAnchorX*A/100,a.style.top=d+"%",a.style.left=p+"%"):(a.style.top=c.viewportAnchorY-c.regionAnchorY*k/100+T,a.style.left=c.viewportAnchorX-c.regionAnchorX*A/100+T),c.heightUnits!==0&&c.widthUnits!==0&&c.viewportAnchorUnits!==0&&(c=Math.max(0,Math.min(100-(parseInt(a.style.width.slice(0,-1),10)||0),parseInt(a.style.left.slice(0,-1),10)||0)),a.style.top=Math.max(0,Math.min(100-(parseInt(a.style.height.slice(0,-1),10)||0),parseInt(a.style.top.slice(0,-1),10)||0))+"%",a.style.left=c+"%"),a.style.display="flex",a.style.flexDirection="column",a.style.alignItems="center",a.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(n,a),n=a}}a=u,r&&(a=document.createElement("span"),a.classList.add("shaka-text-wrapper"),a.style.backgroundColor=t.backgroundColor,a.style.lineHeight="normal",u.appendChild(a)),e.i.set(t,{Oe:u,qh:a,qc:n})}function ME(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==We?n:e==="left"||e==="start"&&t===ht||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===ht?"line-right":"center"}function _E(e,t,n,r,a){var u=t.style,c=n.nestedCues.length==0,d=1<r.length;u.whiteSpace="pre-wrap";var p=n.payload.replace(/\s+$/g,function(T){return" ".repeat(T.length)});if(u.webkitTextStrokeColor=n.textStrokeColor,u.webkitTextStrokeWidth=n.textStrokeWidth,u.color=n.color,u.direction=n.direction,u.opacity=n.opacity,u.paddingLeft=Lp(n.linePadding,n,e.s),u.paddingRight=Lp(n.linePadding,n,e.s),u.textCombineUpright=n.textCombineUpright,u.textShadow=n.textShadow,n.backgroundImage)u.backgroundImage="url('"+n.backgroundImage+"')",u.backgroundRepeat="no-repeat",u.backgroundSize="contain",u.backgroundPosition="center",n.backgroundColor&&(u.backgroundColor=n.backgroundColor),u.width="100%",u.height="100%";else{if(n.nestedCues.length)var S=t;else S=document.createElement("span"),t.appendChild(S);n.border&&(S.style.border=n.border),!a&&((t=Q1(r,function(T){return T.backgroundColor}))?S.style.backgroundColor=t:p&&(S.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=Q1(r,function(T){return T.fontFamily}))&&(S.style.fontFamily=t),p&&(S.textContent=p)}d&&!r[r.length-1].isContainer?u.display="inline":(u.display="flex",u.flexDirection="column",u.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(u.width="100%",u.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(u.width="100%",u.alignItems="end"),u.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),c||(u.margin="0"),u.fontFamily=n.fontFamily,u.fontWeight=n.fontWeight.toString(),u.fontStyle=n.fontStyle,u.letterSpacing=n.letterSpacing,u.fontSize=Lp(n.fontSize,n,e.s),r=n.line,r!=null&&(c=n.lineInterpretation,c==At&&(c=1,d=16,e.l&&1>e.l&&(d=32),r=0>r?100+r/d*100:r/d*100),c==1&&(u.position="absolute",n.writingMode==Pt?(u.width="100%",n.lineAlign==Ce?u.top=r+"%":n.lineAlign=="end"&&(u.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(u.height="100%",n.lineAlign==Ce?u.left=r+"%":n.lineAlign=="end"&&(u.right=100-r+"%")):(u.height="100%",n.lineAlign==Ce?u.right=r+"%":n.lineAlign=="end"&&(u.left=100-r+"%")))),u.lineHeight=n.lineHeight,e=ME(n),e=="line-left"?(u.cssFloat="left",n.position!==null&&(u.position="absolute",n.writingMode==Pt?(u.left=n.position+"%",u.width="auto"):u.top=n.position+"%")):e=="line-right"?(u.cssFloat="right",n.position!==null&&(u.position="absolute",n.writingMode==Pt?(u.right=100-n.position+"%",u.width="auto"):u.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(u.position="absolute",n.writingMode==Pt?(u.left=n.position+"%",u.width="auto"):u.top=n.position+"%"),u.textAlign=n.textAlign,u.textDecoration=n.textDecoration.join(" "),u.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&u.writingMode==n.writingMode||(u.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Pt?u.width=n.size+"%":u.height=n.size+"%")}function Lp(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var a=r.value;switch(r.unit){case"%":return a/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*a/t.cellResolution.rows+"px";default:return e}}function Q1(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}ve("shaka.text.UITextDisplayer",Wo),Wo.prototype.setTextVisibility=Wo.prototype.setTextVisibility,Wo.prototype.isTextVisible=Wo.prototype.isTextVisible,Wo.prototype.remove=Wo.prototype.remove,Wo.prototype.destroy=Wo.prototype.destroy,Wo.prototype.append=Wo.prototype.append,Wo.prototype.configure=Wo.prototype.configure;function RE(e,t){function n(u){for(var c=u,d=b(t),p=d.next();!p.done;p=d.next())p=p.value,p.end&&p.start<u&&(c+=p.end-p.start);return u=Math.floor(c/3600),d=Math.floor(c/60%60),p=Math.floor(c%60),c=Math.floor(1e3*c%1e3),(10>u?"0":"")+u+":"+(10>d?"0":"")+d+":"+(10>p?"0":"")+p+"."+(100>c?10>c?"00":"0":"")+c}var r=Rp(e);e=`WEBVTT

`,r=b(r);for(var a=r.next();!a.done;a=r.next())a=a.value,e+=n(a.startTime)+" --> "+n(a.endTime)+function(u){var c=[];switch(u.textAlign){case"left":c.push("align:left");break;case"right":c.push("align:right");break;case qe:c.push("align:middle");break;case"start":c.push("align:start");break;case"end":c.push("align:end")}switch(u.writingMode){case"vertical-lr":c.push("vertical:lr");break;case"vertical-rl":c.push("vertical:rl")}return c.length?" "+c.join(" "):""}(a)+`
`,e+=a.payload+`

`;return e}ve("shaka.text.WebVttGenerator",function(){});function Z1(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}Z1.prototype.configure=function(e){this.g=e};function LE(e){e.i=!1,e.l=!0,e.j=!1}function DE(e,t,n){try{if(!e.g.enabled)return t;var r=Dp(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var a=Zf;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":a=ec;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":a=ev;break e}a=void 0}r.ot=a,r.su=!0;var u=Qf(r);return Pp(t,u)}catch(c){return Dt("CMCD_SRC_ERROR","Could not generate src CMCD data.",c),t}}function Dp(e){return e.g.sessionId||(e.g.sessionId=h.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function da(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,Dp(e)),n.pr=e.h.eb();var a=n.ot===Jf||n.ot===ec;if(e.j&&a&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=PE(e,n),r)r=BE(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var u=Qf(e);u&&(t.uris=t.uris.map(function(c){return Pp(c,u)}))}}}function PE(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,a){return n.includes(a)&&(r[a]=t[a]),r},{}):t}function OE(e){if(e.type===0)return jE;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?ec:Jf;if(t=="audio")return Zf;if(t=="text")return e.mimeType==="application/mp4"?tc:Op}}function NE(e,t){if(t=e.h.wb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function J1(e,t){if(t=e.h.wb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function UE(e,t){var n=e.h.ic();if(!n.length)return NaN;e=n[0],n=b(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case Jf:return e.videoBandwidth||NaN;case Zf:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Qf(e){function t(k){return 100*n(k/100)}function n(k){return Math.round(k)}function r(k){return!Number.isNaN(k)&&k!=null&&k!==""&&k!==!1}var a=[],u={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(k){return encodeURIComponent(k)},rtp:t,tb:n},c=Object.keys(e||{}).sort();c=b(c);for(var d=c.next();!d.done;d=c.next()){d=d.value;var p=e[d];if(r(p)&&(d!=="v"||p!==1)&&(d!="pr"||p!==1)){var S=u[d];S&&(p=S(p)),S=typeof p;var T=void 0;T=S==="string"&&d!=="ot"&&d!=="sf"&&d!=="st"?d+"="+JSON.stringify(p):S==="boolean"?d:S==="symbol"?d+"="+p.description:d+"="+p,a.push(T)}}return a.join(",")}function BE(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],a=[{},{},{},{}],u={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=b(t);for(var c=t.next();!c.done;c=t.next())c=c.value,a[u[c]!=null?u[c]:1][c]=e[c];for(e=0;e<a.length;e++)(u=Qf(a[e]))&&(n["CMCD-"+r[e]]=u);return n}function Pp(e,t){return!t||e.includes("offline:")?e:(e=new Sn(e),e.g.set("CMCD",t),e.toString())}var ev="m",Zf="a",Jf="v",ec="av",jE="i",Op="c",tc="tt";ve("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Kj:"s",OTHER:"o"});function yi(e){this.h=e,this.g=null}w=yi.prototype,w.configure=function(e){this.h=e},w.zg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(ov)?1e3*this.g.get(ov):null},w.xg=function(){return this.h.enabled&&this.g&&this.g.has(nv)?1e3*this.g.get(nv):null},w.Yh=function(){return this.h.enabled&&this.g&&this.g.has(iv)?this.g.get(iv):null},w.Zh=function(){return this.h.enabled&&this.g&&this.g.has(rv)?this.g.get(rv):null},w.getBandwidthEstimate=function(e){var t=this.xg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function tv(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}ve("shaka.util.CmsdManager",yi),yi.prototype.getBandwidthEstimate=yi.prototype.getBandwidthEstimate,yi.prototype.getRoundTripTime=yi.prototype.Zh,yi.prototype.getResponseDelay=yi.prototype.Yh,yi.prototype.getEstimatedThroughput=yi.prototype.xg,yi.prototype.getMaxBitrate=yi.prototype.zg;var nv="etp",ov="mb",iv="rd",rv="rtt";function sv(){this.g=null,this.h=[]}function Np(e,t){return V(function(n){if(n.g==1)return e.g?I(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,q(n)})}sv.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function ke(e,t){Wt.call(this);var n=this;this.l=Wp,this.de=this.h=null,this.oa=!1,this.qe=new xt,this.gd=new xt,this.m=new xt,this.Fa=new xt,this.ub=new xt,this.C=this.G=this.B=this.H=null,this.te=0,this.Z=new sv,this.pa=this.ag=this.da=this.i=this.ab=this.F=this.j=this.Zc=this.K=this.eg=this.ea=this.N=this.dd=this.L=this.he=this.I=this.Fb=null,this.Ea=!1,this.xa=this.o=null,this.cg=1e9,this.qd=[],this.U=NaN,this.g=yr(this),this.R=null,this.ze=-1,this.Da=null,this.fa={width:1/0,height:1/0},this.be=new Kd(this.g,this.fa,null),this.ke=[],this.s=null,this.za=new Ws(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Db=this.g.preferredTextLanguage,this.pd=this.g.preferredTextRole,this.od=this.g.preferForcedSubs,this.md=[],t&&t(this),this.N=ZE(this),this.ea=new yi(this.g.cmsd),this.H=dv(this),this.H.Pf(this.g.streaming.forceHTTP),this.H.Qf(this.g.streaming.forceHTTPS),this.Gb=this.ba=this.A=null,this.Ce=!1,this.dg=new It(function(){return V(function(r){if(r.g==1)return n.ba?I(r,n.Rb(n.Gb,!0),3):r.u(0);if(r.g!=4)return I(r,n.load(n.ba),4);n.Ce?n.Gb.pause():n.Gb.play(),n.ba=null,n.Ce=!1,q(r)})}),ac&&(this.A=ac(),this.A.configure(this.g.ads),this.ub.D(this.A,"ad-content-pause-requested",function(r){var a;return V(function(u){if(u.g==1)return n.dg.stop(),n.ba?u.u(0):(n.Gb=n.h,n.Ce=n.h.ended,a=r.saveLivePosition||!1,I(u,n.qg(!0,a),3));n.ba=u.h,q(u)})}),this.ub.D(this.A,"ad-content-resume-requested",function(r){if(r=r.offset||0,n.ba){var a=n.ba;a.A&&r&&(a.A+=r)}n.dg.Y(.1)}),this.ub.D(this.A,"ad-content-attach-requested",function(){return V(function(r){return n.h||!n.Gb?r.u(0):I(r,n.Rb(n.Gb,!0),0)})})),this.qe.D(h,"online",function(){Vp(n),n.If()}),this.je=new It(function(){for(var r=Date.now()/1e3,a=!1,u=!0,c=b(n.i.variants),d=c.next();!d.done;d=c.next())d=d.value,0<d.disabledUntilTime&&d.disabledUntilTime<=r&&(d.disabledUntilTime=0,a=!0),0<d.disabledUntilTime&&(u=!1);u&&n.je.stop(),a&&ma(n,!1,void 0,!1,!1)}),this.qa=null,e&&(Et("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Rb(e,!0))}Q(ke,Wt);function nc(e){e.K!=null&&(s1(e.K),e.K.release(),e.K=null)}function FE(e,t){t.lcevc.enabled?(nc(e),e.K==null&&(e.K=new Dl(e.h,e.eg,t.lcevc),e.G&&(e.G.Z=e.K))):nc(e)}function pn(e,t){return new He(e,t)}w=ke.prototype,w.destroy=function(){var e=this,t;return V(function(n){switch(n.g){case 1:return e.l==zi?n.return():(nc(e),t=e.detach(),e.l=zi,I(n,t,2));case 2:return I(n,e.Qe(),3);case 3:if(e.qe&&(e.qe.release(),e.qe=null),e.gd&&(e.gd.release(),e.gd=null),e.m&&(e.m.release(),e.m=null),e.Fa&&(e.Fa.release(),e.Fa=null),e.ub&&(e.ub.release(),e.ub=null),e.xa=null,e.g=null,e.s=null,e.de=null,e.N=null,e.ea=null,!e.H){n.u(4);break}return I(n,e.H.destroy(),5);case 5:e.H=null;case 4:e.o&&(e.o.release(),e.o=null),Wt.prototype.release.call(e),q(n)}})};function pa(e,t){e.dispatchEvent(pn("onstatechange",new Map().set("state",t)))}w.Rb=function(e,t){t=t===void 0?!0:t;var n=this,r,a,u;return V(function(c){switch(c.g){case 1:if(n.l==zi)throw new re(2,7,7e3);if(r=n.h&&n.h==e,!n.h||n.h==e){c.u(2);break}return I(c,n.detach(),2);case 2:return I(c,Up(n,"attach"),4);case 4:if(c.h)return c.return();if(ee(c,5,6),r||(pa(n,"attach"),a=function(){var d=Hp(n,!1);d&&ga(n,d)},n.gd.D(e,"error",a),n.h=e),!t||!Ui()||n.G){c.u(6);break}return I(c,Bp(n),6);case 6:Z(c),n.Z.release(),j(c,0);break;case 5:return u=Y(c),I(c,n.detach(),10);case 10:throw u}})},w.zh=function(e){this.eg=e},w.detach=function(e){e=e===void 0?!1:e;var t=this;return V(function(n){if(n.g==1){if(t.l==zi)throw new re(2,7,7e3);return I(n,t.bc(!1,e),2)}if(n.g!=3)return I(n,Up(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.gd.Ra(),t.h=null),pa(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Z.release()}q(n)})};function Up(e,t){var n;return V(function(r){return r.g==1?(n=++e.te,I(r,Np(e.Z,t),2)):n!=e.te?(e.Z.release(),r.return(!0)):r.return(!1)})}w.bc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,a,u,c,d,p,S,T,k,A;return V(function(E){switch(E.g){case 1:return n.l!=zi&&(n.l=Wp),I(E,Up(n,"unload"),2);case 2:return E.h?E.return():(ae(E,3),n.Ea=!1,pa(n,"unload"),e&&!Ui()&&(e=!1),nc(n),r=n.md.map(function(R){return R()}),n.md=[],I(E,Promise.all(r),5));case 5:if(n.dispatchEvent(pn("unloading")),n.dd&&(n.dd.release(),n.dd=null),n.h&&(n.m.Ra(),n.Fa.Ra()),n.je.stop(),n.Fb&&(n.Fb.release(),n.Fb=null),n.he&&(n.he.stop(),n.he=null),!n.F){E.u(6);break}return I(E,n.F.stop(),7);case 7:n.F=null,n.ab=null;case 6:if(!n.o){E.u(8);break}return I(E,n.o.stop(),8);case 8:if(!n.j){E.u(10);break}return I(E,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.I&&(n.I.release(),n.I=null),n.C&&(n.C.release(),n.C=null),!cf("webkit")||!n.B){E.u(12);break}return I(E,n.B.destroy(),13);case 13:n.B=null;case 12:if(!n.G){E.u(14);break}return I(E,n.G.destroy(),15);case 15:n.G=null;case 14:if(n.A&&!t&&n.A.onAssetUnload(),n.ba&&!t&&(n.ba.destroy(),n.ba=null),t||n.dg.stop(),n.N&&LE(n.N),n.ea&&(n.ea.g=null),n.h&&ca(n.h),!n.h||!n.h.src){E.u(16);break}return I(E,new Promise(function(R){return new It(R).Y(.1)}),17);case 17:n.h.removeAttribute("src"),n.h.load();case 16:if(!n.B){E.u(18);break}return I(E,n.B.destroy(),19);case 19:n.B=null;case 18:if(n.qa&&n.da!=n.qa.Dc()&&(n.qa.s||n.qa.destroy(),n.qa=null),n.da=null,n.ag=null,n.L=null,n.i){for(a=b(n.i.variants),u=a.next();!u.done;u=a.next())for(c=u.value,d=b([c.audio,c.video]),p=d.next();!p.done;p=d.next())(S=p.value)&&S.segmentIndex&&S.segmentIndex.release();for(T=b(n.i.textStreams),k=T.next();!k.done;k=T.next())A=k.value,A.segmentIndex&&A.segmentIndex.release()}n.g.streaming.clearDecodingCache&&(ry={},rf.clear()),n.i=null,n.s=new Bf,n.bg=null,n.Da=null,n.R=null,n.ze=-1,n.qd=[],n.U=NaN,zp(n);case 3:Z(E),n.Z.release(),j(E,4);break;case 4:if(e&&Ui()&&!n.G&&n.h)return I(E,Bp(n),0);E.u(0)}})},w.ej=function(e){this.pa=e},w.load=function(e,t,n){t=t===void 0?null:t;var r=this,a,u,c,d,p,S,T,k,A,E,R,D,L;return V(function($){switch($.g){case 1:if(r.l==zi)throw new re(2,7,7e3);return a=null,u="",e instanceof gr?(a=e,u=a.Dc()||""):u=e||"",I($,Np(r.Z,"load"),2);case 2:if(r.Z.release(),!r.h)throw new re(2,7,7002);if(!r.da){$.u(3);break}return r.da=u,I($,r.bc(!1),3);case 3:if(c=++r.te,d=function(){return V(function(N){if(N.g==1)return r.te==c?N.u(0):a?I(N,a.destroy(),3):N.u(3);throw new re(2,7,7e3)})},p=function(N,K){return V(function(O){switch(O.g){case 1:return ae(O,2),I(O,Np(r.Z,K),4);case 4:return I(O,d(),5);case 5:return I(O,N(),6);case 6:return I(O,d(),7);case 7:a&&r.g&&(a.g=r.g);case 2:Z(O),r.Z.release(),j(O,0)}})},ee($,5,6),t==null&&a&&(t=a.getStartTime()),r.pa=t,r.Ea=!1,r.dispatchEvent(pn("loading")),a){n=a.U,$.u(8);break}if(n){$.u(8);break}return I($,p(function(){return V(function(N){if(N.g==1)return I(N,fv(r,u),2);n=N.h,q(N)})},"guessMimeType_"),8);case 8:if(S=!!a,a){V1(a,r),r.s=a.getStats(),$.u(11);break}return I($,lv(r,u,t,n,!0),12);case 12:(a=$.h)?(V1(a,r),r.s=a.getStats(),a.start(),a.m.catch(function(){})):r.s=new Bf;case 11:if(T=!a,k=Date.now()/1e3,r.s=a?a.getStats():new Bf,r.da=u,r.ag=n||null,T)return I($,p(function(){return V(function(N){return I(N,HE(r,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(r.G){$.u(15);break}return I($,p(function(){return V(function(N){return I(N,Bp(r),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return I($,p(function(){return V(function(N){return I(N,a.m,0)})},"waitForFinish"),17);case 17:return r.g=a.getConfiguration(),r.be=a.C,r.ab=a.F,r.F=vE(a),r.F&&r.F.setMediaElement&&r.h&&r.F.setMediaElement(r.h),r.dd=xE(a),r.Zc=a.za,r.i=a.gf(),(A=a.o)&&(r.za=A),S&&r.h&&r.h.nodeName==="AUDIO"&&($E(r),r.configure("manifest.disableVideo",!0)),r.B=wE(a),I($,p(function(){return V(function(N){return I(N,r.B.Rb(r.h),0)})},"drmEngine_.attach"),18);case 18:return!(E=a.B)||r.xa&&r.xa==E||(r.o=yE(a),r.xa=a.B,typeof r.o.setMediaElement!="function"&&(Et("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(Et("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(Et("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),R=SE(a),D=a.fa,I($,p(function(){return V(function(N){return I(N,VE(r,k,D,R),0)})},"loadInner_"),19);case 19:gE(a),$.u(14);break;case 20:return I($,p(function(){return V(function(N){return I(N,GE(r,k,n),0)})},"srcEqualsInner_"),14);case 14:r.dispatchEvent(pn("loaded"));case 6:if(Z($),!a){$.u(22);break}return I($,a.destroy(),22);case 22:r.qa=null,j($,0);break;case 5:if(L=Y($),!L||L.code==7e3){$.u(24);break}return I($,r.bc(!1),24);case 24:throw L}})};function $E(e){for(var t=b(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}w.aj=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r;return V(function(a){return a.g==1?I(a,av(n),2):a.g!=3?(r=a.h,I(a,n.bc(e,t),3)):a.return(r)})},w.qg=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,r;return V(function(a){return a.g==1?I(a,av(n,t),2):a.g!=3?(r=a.h,I(a,n.detach(e),3)):a.return(r)})};function av(e,t){t=t===void 0?!1:t;var n,r;return V(function(a){if(a.g==1)return n=null,e.i&&e.F&&e.ab&&e.da?(r=e.h.currentTime,e.V()&&!t&&(r=null),I(a,uv(e,e.da,r,e.ag,!0,!1,!1),3)):a.u(2);if(a.g!=2){n=a.h,e.ke.push(n),e.F&&e.F.setMediaElement&&e.F.setMediaElement(null);var u=n,c=e.F,d=e.ab;u.h=e.i,u.j=c,u.F=d,u=n,c=e.xa,u.i=e.o,u.B=c,n.o=e.za,n.start(),e.i=null,e.F=null,e.ab=null,e.o=null,e.xa=null}return a.return(n)})}w.preload=function(e,t,n){t=t===void 0?null:t;var r=this,a;return V(function(u){return u.g==1?I(u,lv(r,e,t,n),2):((a=u.h)?a.start():ga(r,new re(2,7,7005)),u.return(a))})},w.Qe=function(){var e=this,t,n,r,a;return V(function(u){for(t=[],n=b(e.ke),r=n.next();!r.done;r=n.next())a=r.value,a.s||t.push(a.destroy());return e.ke=[],I(u,Promise.all(t),0)})};function lv(e,t,n,r,a){a=a===void 0?!1:a;var u,c,d;return V(function(p){return p.g==1?r?p.u(2):I(p,fv(e,t),3):(p.g!=2&&(r=p.h),zE(e,r)?p.return(null):(u=!1,c=!0,a&&(e.o&&e.xa==e.g.abrFactory&&(c=!1),e.h&&e.h.nodeName==="AUDIO"&&(u=!0)),d=uv(e,t,n,r||null,!a,u,c),a||(d=d.then(function(S){return e.ke.push(S),S})),p.return(d)))})}function uv(e,t,n,r,a,u,c){a=a===void 0?!0:a,u=u===void 0?!1:u,c=c===void 0?!0:c;var d,p,S,T,k,A,E,R,D,L,$,N,K,O,H;return V(function(J){return J.g==1?(d=null,p=Ji(e.g),u&&(p.manifest.disableVideo=!0),S=function(){return d.R&&d.s?null:d},T=function(){return S()?S().getConfiguration():e.g},k=function(oe,se){S()?d.configure(oe,se):e.configure(oe,se)},e.fa.width!=1/0||e.fa.height!=1/0?J.u(2):I(J,Ng(),3)):(J.g!=2&&(A=J.h,e.fa.width=A.width,e.fa.height=A.height),E=new Kd(p,e.fa,null),R={networkingEngine:e.H,filter:function(oe){var se,ye;return V(function(le){if(le.g==1)return I(le,Hy(E,oe),2);if(le.g!=4)return se=le.h,se?(ye=pn("trackschanged"),I(le,Promise.resolve(),4)):le.u(0);d.dispatchEvent(ye),q(le)})},makeTextStreamsForClosedCaptions:function(oe){return tA(e,oe)},onTimelineRegionAdded:function(oe){var se=d.G;e:{for(var ye=b(se.g),le=ye.next();!le.done;le=ye.next())if(le=le.value,le.schemeIdUri==oe.schemeIdUri&&le.id==oe.id&&le.startTime==oe.startTime&&le.endTime==oe.endTime){ye=le;break e}ye=null}ye==null&&(se.g.add(oe),oe=new He("regionadd",new Map([["region",oe]])),se.dispatchEvent(oe))},onEvent:function(oe){return d.dispatchEvent(oe)},onError:function(oe){return d.onError(oe)},isLowLatencyMode:function(){return T().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return T().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){k("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&d.R&&e.j.updateDuration()},newDrmInfo:function(oe){var se=d.l,ye=se?se.g:null;ye&&se.s&&Yd(E,ye.keySystem,oe)},onManifestUpdated:function(){var oe=new Map().set("isLive",e.V());d.dispatchEvent(pn("manifestupdated",oe)),$l(d,!1,function(){e.A&&e.A.onManifestUpdated(e.V())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(oe,se,ye,le){var ue=oe;oe=="com.apple.hls.interstitial"&&(ue="com.apple.quicktime.HLS",oe={startTime:se,endTime:ye,values:le},e.A)&&e.A.onInterstitialMetadata(e,e.h,oe),le=b(le),oe=le.next();for(var ce={};!oe.done;ce={Pg:void 0},oe=le.next())ce.Pg=oe.value,$l(d,!1,function(Ee){return function(){jp(e,se,ye,ue,Ee.Pg)}}(ce))},disableStream:function(oe){return e.disableStream(oe,e.g.streaming.maxDisabledTime)}},D=new yp(function(){return e.Ob()}),D.addEventListener("regionadd",function(oe){var se=oe.region;Wl(e,"timelineregionadded",se,d),$l(d,!1,function(){e.A&&e.A.onDashTimedMetadata(se)})}),L=null,p.streaming.observeQualityChanges&&(L=new Ff(function(){return e.wb()}),L.addEventListener("qualitychange",function(oe){Ev(e,oe.quality,oe.position)}),L.addEventListener("audiotrackchange",function(oe){Ev(e,oe.quality,oe.position,!0)})),$=!0,N={Lb:e.H,onError:function(oe){return d.onError(oe)},ee:function(oe){$l(d,!0,function(){e:{var se=oe,ye=pn("keystatuschanged");e.dispatchEvent(ye);var le=Object.keys(se);le.length==1&&le[0]==""&&(le=["00"],se={"00":se[""]}),ye=le.length==1&&le[0]=="00";var ue=!1;if(le.length){le=b(e.i.variants);for(var ce=le.next();!ce.done;ce=le.next()){ce=ce.value;var Ee=[];ce.audio&&Ee.push(ce.audio),ce.video&&Ee.push(ce.video),Ee=b(Ee);for(var Te=Ee.next();!Te.done;Te=Ee.next()){var Ae=Te.value;if(Te=ce.allowedByKeySystem,Ae.keyIds.size){ce.allowedByKeySystem=!0,Ae=b(Ae.keyIds);for(var Oe=Ae.next();!Oe.done;Oe=Ae.next())Oe=Oe.value,((Oe=se[ye?"00":Oe])||e.B.F)&&(ce.allowedByKeySystem=ce.allowedByKeySystem&&!!Oe&&!Xy.includes(Oe))}Te!=ce.allowedByKeySystem&&(ue=!0)}}}if(ue&&(vi(e),!ps(e)))break e;(se=e.j.j)&&!se.allowedByKeySystem&&ma(e)}})},onExpirationUpdated:function(oe,se){var ye=pn("expirationupdated");d.dispatchEvent(ye),(ye=d.j)&&ye.onExpirationUpdated&&ye.onExpirationUpdated(oe,se)},onEvent:function(oe){d.dispatchEvent(oe),oe.type=="drmsessionupdate"&&$&&($=!1,oe=Date.now()/1e3-d.qa,(e.s||d.getStats()).j=oe,e.K&&s1(e.K))}},K=dv(e,S),yy(e.H,K),O=function(){return e.yc(N)},H={config:p,wi:R,Fi:D,Ei:L,yc:O,vi:E,networkingEngine:K,yh:a,xh:c},d=new gr(t,r,n,H),J.return(d))})}function fv(e,t){var n,r;return V(function(a){return a.g==1?(n=e.g.manifest.retryParameters,I(a,_p(t,e.H,n),2)):(r=a.h,r=="application/x-mpegurl"&&Us()&&(r="application/vnd.apple.mpegurl"),a.return(r))})}function zE(e,t){if(!Ui())return!0;if(t){if((e.h||Og()).canPlayType(t)=="")return!1;if(!(Ui()&&t in _i))return!0;if($g(t))return Us()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls}return!1}function Bp(e){var t,n,r,a,u;return V(function(c){if(c.g==1)return pa(e,"media-source"),t=e.g.textDisplayFactory,n=t(),n.configure?n.configure(e.g.textDisplayer):Et("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.bg=t,r=QE(e.h,n,{Qh:function(){return e.keySystem()},onMetadata:function(d,p,S){cv(e,d,p,S)}},e.K),r.configure(e.g.mediaSource),a=e.g.manifest,u=a.segmentRelativeVttTiming,r.fa=u,I(c,r.L,2);e.G=r,q(c)})}function VE(e,t,n,r){var a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye;return V(function(le){switch(le.g){case 1:pa(e,"load"),a=e.h,e.I=new Ol({Nd:function(){return a.playbackRate},hc:function(){return a.defaultPlaybackRate},Rf:function(ue){a.playbackRate=ue},Lg:function(ue){a.currentTime+=ue}}),u=function(){return oc(e)},c=function(){return wv(e)},e.m.D(a,"playing",u),e.m.D(a,"pause",u),e.m.D(a,"ended",u),e.m.D(a,"ratechange",c),FE(e,e.g),e.Db=e.g.preferredTextLanguage,e.pd=e.g.preferredTextRole,e.od=e.g.preferForcedSubs,Gp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(ue,ce,Ee){e.i&&e.j&&ue!=e.j.j&&rc(e,ue,!0,ce===void 0?!1:ce,Ee===void 0?0:Ee)}),e.o.setMediaElement(a),e.o.setCmsdManager(e.ea),e.j=JE(e),e.j.configure(e.g.streaming),e.l=bo,a.textTracks&&e.m.D(a.textTracks,"addtrack",function(ue){if(ue.track)switch(ue=ue.track,ue.kind){case"chapters":hv(e,ue)}}),e.dispatchEvent(pn("streaming")),d=n;case 2:for((S=e.j.j)||d||(d=ps(e)?e.o.chooseVariant():null),T=[],p=S||d,k=b([p.video,p.audio]),A=k.next();!A.done;A=k.next())(E=A.value)&&!E.segmentIndex&&T.push(E.createSegmentIndex());if(!(0<T.length)){le.u(4);break}return I(le,Promise.all(T),4);case 4:if(!p||p.disabledUntilTime!=0){le.u(2);break}if(e.F&&e.F.onInitialVariantChosen&&e.F.onInitialVariantChosen(p),e.i.isLowLatency&&!e.g.streaming.lowLatencyMode&&je("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),Gp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),Jk(e.j,e.g.playRangeStart,e.g.playRangeEnd),R=function(ue){e.C=KE(e,ue),e.Fb=YE(e,ue),pv(e,a,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||R(e.pa),S){le.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){le.u(8);break}return D=e.i.presentationTimeline,L=e.pa||e.h.currentTime,$=D.Vb(),N=D.yb(),L<$?L=$:L>N&&(L=N),I(le,nA(d,L),9);case 9:K=le.h,R(K);case 8:rc(e,d,!0,!1,0);case 7:return e.C.ready(),O=e.Ec().find(function(ue){return ue.active}),O||((H=bl(e.i.textStreams,e.Db,e.pd,e.od)[0]||null)&&pp(e.s.h,H,!0),d&&(H?(oA(e,d.audio,H)&&(e.oa=!0),e.oa&&e.G.F.setTextVisibility(!0),bv(e)):e.oa=!1),H&&(e.g.streaming.alwaysStreamText||e.qf())&&Vf(e.j,H)),I(le,e.j.start(r),10);case 10:e.g.abr.enabled&&(e.o.enable(),kv(e)),vi(e),ps(e),e.i.variants.some(function(ue){return ue.primary}),((J=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(oe=function(){return Sv(e)},e.m.D(a,"timeupdate",oe)),J||(se=function(){return ic(e)},e.m.D(a,"timeupdate",se),ic(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(ye=function(){var ue;return V(function(ce){if(ce.g==1)return ue=e.h.duration-e.h.currentTime,isNaN(ue)||!(ue<=e.g.streaming.preloadNextUrlWindow)?ce.u(0):(e.m.jb(a,"timeupdate",ye),I(ce,e.preload(e.i.nextUrl),4));e.qa=ce.h,q(ce)})},e.m.D(a,"timeupdate",ye)),e.m.D(a,"ended",function(){e.load(e.qa||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(J),e.Ea=!0,e.m.ha(a,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),q(le)}})}function HE(e,t){var n,r,a,u,c;return V(function(d){return d.g==1?(n=Gn,r=Date.now()/1e3,a=!0,e.B=e.yc({Lb:e.H,onError:function(p){ga(e,p)},ee:function(){},onExpirationUpdated:function(){var p=pn("expirationupdated");e.dispatchEvent(p)},onEvent:function(p){e.dispatchEvent(p),p.type=="drmsessionupdate"&&a&&(a=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.g.drm),u={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},c={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?ki(t):"",codecs:t?oi(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ga,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},c.fullMimeTypes.add(Wn(c.mimeType,c.codecs)),t.startsWith("audio/")?(c.type=n.X,u.audio=c):u.video=c,e.B.ba=!0,I(d,Ly(e.B,[u],[]),2)):I(d,e.B.Rb(e.h),0)})}function GE(e,t,n){var r,a,u,c,d,p,S,T,k,A,E,R;return V(function(D){if(D.g==1)return pa(e,"src-equals"),r=e.h,e.C=new C1(r),a=!1,e.md.push(function(){a=!0}),e.pa!=null&&e.C.Ee(e.pa),e.I=new Ol({Nd:function(){return r.playbackRate},hc:function(){return r.defaultPlaybackRate},Rf:function(L){r.playbackRate=L},Lg:function(L){r.currentTime+=L}}),u=e.g.streaming.rebufferingGoal,pv(e,r,u),c=function(){return oc(e)},d=function(){return wv(e)},e.m.D(r,"playing",c),e.m.D(r,"pause",c),e.m.D(r,"ended",c),e.m.D(r,"ratechange",d),r.preload!="none"&&e.m.ha(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.m.D(r.audioTracks,"addtrack",function(){return vi(e)}),e.m.D(r.audioTracks,"removetrack",function(){return vi(e)}),e.m.D(r.audioTracks,"change",function(){return vi(e)})),r.textTracks&&(e.m.D(r.textTracks,"addtrack",function(L){if(L.track)switch(L=L.track,L.kind){case"metadata":qE(e,L);break;case"chapters":hv(e,L);break;default:vi(e)}}),e.m.D(r.textTracks,"removetrack",function(){return vi(e)}),e.m.D(r.textTracks,"change",function(){return vi(e)})),p=DE(e.N,e.da,n),!p.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(p+="#t=",0<e.g.playRangeStart&&(p+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(p+=","+e.g.playRangeEnd)),r.src=p,(Yi()||Qi())&&r.load(),r.preload!="none"&&!r.autoplay&&$g(n)&&Bs()&&r.load(),e.l=Po,e.dispatchEvent(pn("streaming")),S=new en,ra(r,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ready(),S.resolve()}),ra(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var L;return V(function($){if($.g==1)return WE(e),L=Gl(e),L.find(function(N){return N.mode!="disabled"})?(0<L.length&&(e.oa=!0),$.u(2)):I($,new Promise(function(N){e.m.ha(r.textTracks,"change",N),new It(N).Y(1)}),2);if(a)return $.return();XE(e),q($)})}),r.error?S.reject(Hp(e)):r.preload=="none"&&(je('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),S.resolve()),e.m.ha(r,"error",function(){S.reject(Hp(e))}),T=new Promise(function(L,$){new It($).Y(e.g.streaming.loadTimeout)}),I(D,Promise.race([S,T]),2);((k=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(A=function(){return Sv(e)},e.m.D(r,"timeupdate",A)),k||(E=function(){return ic(e)},e.m.D(r,"timeupdate",E),ic(e)),e.A&&(e.A.onManifestUpdated(k),k&&(R=e.Ob().end,e.m.D(r,"progress",function(){var L=e.Ob().end;R!=L&&(e.A.onManifestUpdated(e.V()),R=L)}))),e.Ea=!0,q(D)})}function WE(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Xg(t,e.g.preferredVariantRole)}function XE(e){var t=e.g.preferredTextLanguage;t!=""&&e.Lf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function qE(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues){for(var r=[],a=b(t.activeCues),u=a.next(),c={};!u.done;c={Ta:void 0},u=a.next())c.Ta=u.value,jp(e,c.Ta.startTime,c.Ta.endTime,c.Ta.type,c.Ta.value),e.A&&e.A.onCueMetadataChange(c.Ta.value),c.Ta.type=="com.apple.quicktime.HLS"&&c.Ta.startTime!=null&&(u=r.find(function(d){return function(p){return p.startTime==d.Ta.startTime&&p.endTime==d.Ta.endTime}}(c)),u||(u={startTime:c.Ta.startTime,endTime:c.Ta.endTime,values:[]},r.push(u)),u.values.push(c.Ta.value));for(r=b(r),a=r.next();!a.done;a=r.next())a=a.value,a.values.some(function(d){return d.key=="X-ASSET-URI"||d.key=="X-ASSET-LIST"})&&e.A&&(a.values.push({key:"CUE",description:"",data:"ONCE",mimeType:null,pictureType:null}),e.A.onInterstitialMetadata(e,e.h,a))}});var n=new It(function(){var r=eA(e);r=b(r);for(var a=r.next();!a.done;a=r.next())a.value.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}function cv(e,t,n,r){t=b(t);for(var a=t.next();!a.done;a=t.next())if(a=a.value,a.data&&typeof a.cueTime=="number"&&a.frames){var u=a.cueTime+n,c=r;c&&u>c&&(c=u);for(var d=b(a.frames),p=d.next();!p.done;p=d.next())jp(e,u,c,"org.id3",p.value);e.A&&e.A.onHlsTimedMetadata(a,u)}}function jp(e,t,n,r,a){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",a),e.dispatchEvent(pn("metadata",t))}function hv(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new It(function(){t.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}w.Ji=function(){for(var e=this.Z;e.g;)e.release()},w.yc=function(e){return new Mf(e)};function dv(e,t){function n(a){t()?t().dispatchEvent(a):e.dispatchEvent(a)}function r(a){t()?$l(t(),!0,a):a()}return t||(t=function(){return null}),new rn(function(a,u,c,d){var p=t()?t().i:e.o;p&&p.segmentDownloaded(a,u,c,d)},function(a,u,c){u=new Map().set("headers",a).set("request",u).set("requestType",c),n(pn("downloadheadersreceived",u)),r(function(){if(e.ea){var d=e.ea;if(d.h.enabled){var p=a["cmsd-static"];if(p)try{var S=new Map,T=p.split(",");for(p=0;p<T.length;p++){var k=T[p].split("=");S.set(k[0],tv(k[1]))}}catch{}if(S=a["cmsd-dynamic"]){try{var A=new Map,E=S.split(";");for(S=1;S<E.length;S++){var R=E[S].split("=");A.set(R[0],tv(R[1]))}var D=A}catch{D=null}D&&(d.g=D)}}}})},function(a,u,c,d){a=new Map().set("request",a).set("error",u).set("httpResponseCode",c).set("aborted",d),n(pn("downloadfailed",a))},function(a,u,c){r(function(){var d=e.N,p=c;if(p=p===void 0?{}:p,d.g.enabled)if(u.method==="HEAD")da(d,u);else switch(a){case 0:try{if(d.g.enabled){if(p.type){e:{switch(p.type){case 4:var S="d";break e;case 3:case 2:S="h";break e;case 5:S="s";break e}S=void 0}d.m=S}da(d,u,{ot:ev,su:!d.i})}}catch(Te){Dt("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Te)}break;case Fi:try{if(d.g.enabled){var T=p.segment;S=0,T&&(S=T.endTime-T.startTime);var k={d:1e3*S,st:d.h.V()?"l":"v"};k.ot=OE(p);var A=k.ot===Jf||k.ot===Zf||k.ot===ec||k.ot===tc,E=p.stream;if(E){var R=d.h.eb();if(A&&(k.bl=NE(d,E.type),k.ot!==tc)){var D=J1(d,E.type);k.dl=R?D/Math.abs(R):D}if(E.bandwidth&&(k.br=E.bandwidth/1e3),E.segmentIndex&&T){var L=E.segmentIndex.Ib(T.endTime,!0,0>R);if(L){var $=L.next().value;if($&&$!=T){if(!Bn(T.M(),$.M())){var N=$.M()[0],K=u.uris[0],O=new URL(N),H=new URL(K);if(O.origin!==H.origin)var J=N;else{for(var oe=O.pathname.split("/").slice(1),se=H.pathname.split("/").slice(1,-1);oe[0]===se[0];)oe.shift(),se.shift();for(;se.length;)se.shift(),oe.unshift("..");J=oe.join("/")}k.nor=J}if(($.Ha||$.sa)&&(T.Ha!=$.Ha||T.sa!=$.sa)){var ye=$.Ha+"-";$.sa&&(ye+=$.sa),k.nrr=ye}}}var le=d.h.eb()||1,ue=J1(d,E.type)||500,ce=E.bandwidth,Ee=ce?ce*(T.endTime-T.startTime)/1e3/(ue/le/1e3)*d.g.rtpSafetyFactor:NaN;isNaN(Ee)||(k.rtp=Ee)}}A&&k.ot!==tc&&(k.tb=UE(d,k.ot)/1e3),da(d,u,k)}}catch(Te){Dt("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Te)}break;case 2:case 5:case 6:da(d,u,{ot:"k"});break;case 4:da(d,u,{ot:"o"})}})},function(a,u,c,d){(a=t()?t().j:e.F)&&a.banLocation&&a.banLocation(d)},function(a,u){if(u.data){u=u.data.byteLength;var c=t()?t().getStats():e.s;c&&(c.Cd=isNaN(c.Cd)?u:c.Cd+u,a===0&&(c.Hg=u))}})}function KE(e,t){return new T1(e.h,e.i,e.g.streaming,t,function(){e.Fb&&M1(e.Fb,!0),e.j&&e.j.Qc(),e.L&&ds(e)},function(n){return e.dispatchEvent(n)})}function YE(e,t){t=new Yf(e.dd,e.V()||0<t),t.addEventListener("enter",function(r){Wl(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){Wl(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var a=r.region;r.seeking||(Wl(e,"timelineregionenter",a),Wl(e,"timelineregionexit",a))});var n=new I1(e.h);return n.g.add(t),e.Zc&&n.g.add(e.Zc),n}function pv(e,t,n){e.L=new jb,e.L.g=Xs,cy(e.L,n,Math.min(.5,n/2)),zp(e),e.he=new It(function(){ds(e)}).Sa(.25),e.m.D(t,"waiting",function(){return ds(e)}),e.m.D(t,"stalled",function(){return ds(e)}),e.m.D(t,"canplaythrough",function(){return ds(e)}),e.m.D(t,"progress",function(){return ds(e)})}function ds(e){switch(e.l){case Po:if(e.h.ended)var t=!0;else{var n=Zd(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case bo:e:if(e.h.ended||f1(e.G))t=!0;else{if(e.i.presentationTimeline.V()){n=e.i.presentationTimeline.Wb();var r=Zd(e.h.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=Zy(e.h.buffered,e.h.currentTime),n=e.L;var a=t,u=n.i.get(n.g);t=n.g,r=a||r>=u?kl:Xs,n.g=r,(t=t!=r)&&r===kl&&(n.h=Date.now()),t&&zp(e)}function QE(e,t,n,r){return new l1(e,t,n,r)}function ZE(e){return new Z1({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},wb:function(){return e.wb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},eb:function(){return e.eb()},xb:function(){return e.xb()},ic:function(){return e.ic()},V:function(){return e.V()}},e.g.cmcd)}function JE(e){return new O1(e.i,{Md:function(){return e.C?e.C.yd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},aa:e.G,Lb:e.H,onError:function(t){return ga(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Bi:function(){e.F&&e.F.update&&e.F.update()},Af:function(t,n){var r=t.startTime;t=t.endTime;var a=n.type;if(n=n.codecs.includes(","),e.C){e.C.Mg();var u=sp(e.G,a);!e.V()&&e.h.paused&&u!=null&&0<u&&e.C.yd()<u&&e.C.Ee(u)}ds(e),r=new Map().set("start",r).set("end",t).set("contentType",a).set("isMuxed",n),e.dispatchEvent(pn("segmentappended",r))},Ai:function(t,n){(n=n.Hc)&&e.Zc&&Xk(e.Zc,n,t)},kg:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){t=new ky(st(n)),n=0;for(var a=b(t.data),u=a.next();!u.done;u=a.next())n+=u.value.length;if(n==0)r=Promise.resolve();else{for(n=new Uint8Array(n),a=0,t=b(t.data),u=t.next();!u.done;u=t.next())u=u.value,n.set(u,a),a+=u.length;Al(r,"cenc",n),r=r.l}}else r=Promise.resolve();return r},onMetadata:function(t,n,r){cv(e,t,n,r)},disableStream:function(t,n){return e.disableStream(t,n)}})}w.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Xf(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(Et("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Et("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(Et("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&Us(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){Et("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var r=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+r,e.streaming.liveSync.targetLatencyTolerance=r}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Et("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Et("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Et("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Et("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Et("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Et("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Et("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Et("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Et("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var a=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return a},delete e.mediaSource.sourceBufferExtraFeatures}return e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.maxDisabledTime==null&&(e.streaming.maxDisabledTime=1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.dash==null&&(e.manifest.dash={}),e.manifest.dash.autoCorrectDrift==null&&(e.manifest.dash.autoCorrectDrift=!1),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100)),n=Br(this.g,e,yr(this)),mv(this),n};function mv(e){if(e.be=new Kd(e.g,e.fa,e.B),e.F){var t=Ji(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.F.configure(t)}if(e.B&&e.B.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.l!=zi&&Gy(e.be,e.i)&&vi(e)}catch(u){ga(e,u)}e.o&&ps(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||ma(e)}if(e.H&&(e.H.Pf(e.g.streaming.forceHTTP),e.H.Qf(e.g.streaming.forceHTTPS)),e.G)if(e.G.configure(e.g.mediaSource),e.G.fa=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.bg!=t){var n=t();n.configure?n.configure(e.g.textDisplayer):Et("Text displayer w/ configure",'Text displayer should have a "configure" method!');var r=e.G,a=r.F;r.F=n,a&&(n.setTextVisibility(a.isTextVisible()),a.destroy()),r.g&&(r.g.j=n),e.bg=t,e.j&&(t=e.j,(n=t.i.get(Nt))&&aa(t,n.stream,!0,0,!0))}else t=e.G.F,t.configure&&t.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),kv(e)),e.L&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),cy(e.L,t,Math.min(.5,t/2))),e.i&&Gp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.N&&e.N.configure(e.g.cmcd),e.ea&&e.ea.configure(e.g.cmsd)}w.getConfiguration=function(){var e=yr(this);return Br(e,this.g,yr(this)),e},w.Ag=function(){var e=yr(this);return Br(e,this.g,yr(this)),F1(this.g,yr(this))},w.vg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ob().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},w.Ni=function(){for(var e in this.g)delete this.g[e];Br(this.g,yr(this),yr(this)),mv(this)},w.yg=function(){return this.l},w.hf=function(){return this.i?this.i.type:null},w.Uh=function(){return this.h},w.xb=function(){return this.H},w.Dc=function(){return this.da},w.ug=function(){return this.A?this.A:null},w.V=function(){return this.i?this.i.presentationTimeline.V():this.h&&this.h.src?this.h.duration==1/0:!1},w.kc=function(){return this.i?this.i.presentationTimeline.kc():!1},w.ki=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},w.Ob=function(){if(this.i){if(!this.Ea&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Vb(),end:e.yb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},w.hi=function(){this.V()&&(this.h.currentTime=this.Ob().end)},w.li=function(){return this.Ea},w.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},w.drmInfo=function(){return this.B?this.B.g:null},w.ad=function(){return this.B?this.B.ad():1/0},w.ff=function(){return this.B?this.B.ff():[]},w.Ld=function(){return this.B?this.B.Ld():{}},w.pf=function(){return this.L?this.L.g==Xs:!1},w.eb=function(){return this.h?this.I?this.I.i:1:0},w.wd=function(e){var t=this;e==0?je("A trick play rate of 0 is unsupported!"):(this.Fa.Ra(),this.h.paused&&this.h.play(),this.I.set(e),this.l==bo&&(this.o.playbackRateChanged(e),N1(this.j,1<Math.abs(e))),this.V()&&this.Fa.D(this.h,"timeupdate",function(){var n=t.h.currentTime,r=t.Ob(),a=t.g.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.Tc():Math.floor(n)<=Math.floor(r.start+a)&&t.Tc()}))},w.Tc=function(){var e=this.I.hc();this.l==Po&&this.I.set(e),this.l==bo&&(this.I.set(e),this.o.playbackRateChanged(e),N1(this.j,!1)),this.Fa.Ra()},w.ic=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=b(this.i.variants),a=r.next();!a.done;a=r.next())if(a=a.value,Tl(a)){var u=Gs(a);u.active=a==e,u.active||n==1||e==null||a.video!=e.video||a.audio!=e.audio||(u.active=!0),u.active&&n++,t.push(u)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(c){return Ud(c)}):[]},w.Ec=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=b(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var a=mf(r);a.active=r==e,t.push(a)}return t}return this.h&&this.h.src&&this.h.textTracks?Gl(this).map(function(u){return ty(u)}):[]},w.Oh=function(){var e=this.qd;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Od(t)})},w.Gh=function(e){var t=this,n,r,a,u;return V(function(c){return c.g==1?t.l!=bo&&t.l!=Po?c.return(null):(n=t.qd,t.i&&(n=t.i.imageStreams),(r=n.find(function(d){return d.id==e}))?r.segmentIndex?c.u(2):I(c,r.createSegmentIndex(),2):c.return(null)):c.g!=4?(a=[],r.segmentIndex.Hb(function(d){var p=gv(d.tilesLayout||r.tilesLayout);if(p){p=p.rows*p.dc;for(var S=d.j-d.startTime,T=0;T<p;T++)a.push(t.Cg(e,d.startTime+S*T/p))}}),I(c,Promise.all(a),4)):(u=c.h,c.return(u.filter(function(d){return d})))})};function gv(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{dc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}w.Cg=function(e,t){var n=this,r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O;return V(function(H){return H.g==1?n.l!=bo&&n.l!=Po?H.return(null):(r=n.qd,n.i&&(r=n.i.imageStreams),(a=r.find(function(J){return J.id==e}))?a.segmentIndex?H.u(2):I(H,a.createSegmentIndex(),2):H.return(null)):(u=a.segmentIndex.find(t),u==null||(c=a.segmentIndex.get(u),d=gv(c.tilesLayout||a.tilesLayout),!d)?H.return(null):(p=a.width||0,S=a.height||0,T=p/d.dc,k=S/d.rows,A=d.dc*d.rows,E=c.j-c.startTime,R=c.B||E/A,D=c.startTime,$=L=0,1<A&&(N=Math.floor((t-c.startTime)/R),D=c.startTime+N*R,L=N%d.dc*T,$=Math.floor(N/d.dc)*k),K=!1,(O=c.A)&&(K=!0,k=O.height,L=O.positionX,$=O.positionY,T=O.width),H.return({segment:c,imageHeight:S,imageWidth:p,height:k,positionX:L,positionY:$,startTime:D,duration:R,uris:c.M(),width:T,sprite:K})))})},w.Yg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&(pp(this.s.h,t,!1),Vf(this.j,t),sc(this),this.Db=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=Gl(this),t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value,Nd(n)==e.id?n.mode=this.oa?"showing":"hidden":n.mode="disabled";sc(this)}},w.Mf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){var r=this.i.variants.find(function(u){return u.id==e.id});if(r&&Tl(r)){var a=this.j.j;this.g.abr.enabled&&(a.video!=r.video||a.audio&&r.audio&&a.audio.language==r.audio.language&&a.audio.channelsCount==r.audio.channelsCount)&&je("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),rc(this,r,!1,t,n),this.za=new fy(r,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),ps(this)}}else if(this.h&&this.h.audioTracks){for(t=Array.from(this.h.audioTracks),t=b(t),n=t.next();!n.done;n=t.next())if(n=n.value,Nd(n)==e.id){Cv(this,n);break}}},w.Ih=function(){return Iv(this.ic())},w.ai=function(){return Iv(this.Ec())},w.Hh=function(){return Array.from(Av(this.ic()))},w.$h=function(){return Array.from(Av(this.Ec()))},w.Xg=function(e,t,n,r,a){if(n=n===void 0?0:n,r=r===void 0?0:r,a=a===void 0?"":a,this.i&&this.C){this.za=new Ws(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,a),e=function(c,d){return c.video||d.video?c.video&&d.video?Math.abs((c.video.height||0)-(d.video.height||0))+Math.abs((c.video.width||0)-(d.video.width||0)):1/0:0},t=this.j.j,a=this.za.create(this.i.variants),n=null,a=b(a.values());for(var u=a.next();!u.done;u=a.next())u=u.value,Tl(u)&&(!n||e(n,t)>e(u,t))&&(n=u);n!=t&&(n?(e=Gs(n),this.Mf(e,!0,r)):ma(this))}else this.h&&this.h.audioTracks&&(r=bl(this.ic(),e,t||"",!1)[0])&&this.Mf(r)},w.Lf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Db=e,this.pd=t||"",this.od=n,(e=bl(this.i.textStreams,this.Db,this.pd,this.od)[0]||null)&&e!=this.j.s&&(pp(this.s.h,e,!1),this.g.streaming.alwaysStreamText||this.qf())&&(Vf(this.j,e),sc(this))):(e=bl(this.Ec(),e,t||"",n)[0])&&this.Yg(e)},w.Ti=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var r=null,a=b(this.i.variants),u=a.next();!u.done;u=a.next())if(u=u.value,u.audio.label==e){r=u;break}r!=null&&(this.za=new Ws(r.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),ma(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=b(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&Cv(this,t)}},w.qf=function(){var e=this.oa;return this.G&&this.l==bo?this.G.F.isTextVisible():this.h&&this.h.src&&this.h.textTracks?Gl(this).some(function(t){return t.mode=="showing"}):e},w.wg=function(){return this.h&&this.h.src&&this.h.textTracks?yv(this).map(function(e){return ty(e)}):[]},w.Kh=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=Kt(e),n=yv(this).filter(function(d){return Kt(d.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=b(n);for(var a=n.next();!a.done;a=n.next())if((a=a.value)&&a.cues){a=b(a.cues);for(var u=a.next();!u.done;u=a.next()){var c=u.value;(u=c.id)&&u!=""||(u=c.startTime+"-"+c.endTime+"-"+c.text),c={id:u,title:c.text,startTime:c.startTime,endTime:c.endTime},r.has(u)||(e.push(c),r.add(u))}}return e};function Gl(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function eA(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function yv(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}w.eh=function(e){if(e=!!e,this.oa!=e){if(this.oa=e,this.l==bo)this.G.F.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=bl(this.i.textStreams,this.Db,this.pd,this.od),0<e.length&&(Vf(this.j,e[0]),sc(this))):tE(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=Gl(this);t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}bv(this)}},w.Wh=function(){if(this.C)var e=this.C.yd();else{if(this.pa==null)return new Date;e=this.pa}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},w.Bg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},w.Od=function(){return this.V()&&this.i?this.i.presentationTimeline.Od():null},w.wb=function(){if(this.l==bo)return this.G.wb();var e={total:[],audio:[],video:[],text:[]};return this.l==Po&&(e.total=Ur(this.h.buffered)),e},w.getStats=function(){if(this.l!=bo&&this.l!=Po)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};oc(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.V()){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.U=this.C.fg(),this.s.Z=this.C.gg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.R=Number(n.droppedVideoFrames),t.N=r,this.s.L=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==bo){if(n=this.j.j,t=this.j.s,n){r=this.I?this.I.i:1;var a=r*n.bandwidth;t&&t.bandwidth&&(a+=r*t.bandwidth),this.s.B=a}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.V()&&(n=this.Bg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&(this.s.G=this.i.periodCount,this.s.F=this.i.gapCount,this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.g)),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==Po&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var u=this.s;e=u.o,n=u.l,t=u.B,r=u.N,a=u.R;var c=u.L,d=u.Z,p=u.U,S=u.A,T=u.i,k=u.m,A=u.H,E=u.j,R=dp(u.g,"playing"),D=dp(u.g,"paused"),L=dp(u.g,"buffering"),$=u.s,N=u.C,K=u.I,O=u.Hg,H=u.Cd,J=u.K,oe=u.G,se=u.F,ye=zk(u.g),le=[];u=b(u.h.g);for(var ue=u.next();!ue.done;ue=u.next())ue=ue.value,le.push({timestamp:ue.timestamp,id:ue.id,type:ue.type,fromAdaptation:ue.fromAdaptation,bandwidth:ue.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:a,corruptedFrames:c,stallsDetected:d,gapsJumped:p,estimatedBandwidth:S,completionPercent:T,loadLatency:k,manifestTimeSeconds:A,drmTimeSeconds:E,playTime:R,pauseTime:D,bufferingTime:L,licenseTime:$,liveLatency:N,maxSegmentDuration:K,manifestSizeBytes:O,bytesDownloaded:H,nonFatalErrorCount:J,manifestPeriodCount:oe,manifestGapCount:se,stateHistory:ye,switchHistory:le}},w.uh=function(e,t,n,r,a,u,c){c=c===void 0?!1:c;var d=this,p,S,T,k,A,E,R,D,L,$,N,K;return V(function(O){switch(O.g){case 1:if(d.l!=bo&&d.l!=Po)throw new re(1,7,7004);if(n!="subtitles"&&n!="captions"&&je("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){O.u(2);break}return I(O,Fp(d,e),3);case 3:r=O.h;case 2:if(p=[],d.A&&(p=d.A.getCuePoints()),d.l!=Po){O.u(4);break}return c&&(n="forced"),I(O,vv(d,e,t,n,r,u||"",p),5);case 5:if(S=Kt(t),T=d.Ec(),k=T.find(function(H){return Kt(H.language)==S&&H.label==(u||"")&&H.kind==n}))return vi(d),O.return(k);throw new re(1,2,2012);case 4:if(A=Gn,E=d.h.duration,d.i&&(E=d.i.presentationTimeline.getDuration()),E==1/0)throw new re(1,4,4033);if(!p.length){O.u(6);break}return I(O,$p(d,e,d.H,d.g.streaming.retryParameters),7);case 7:R=O.h,D=xv(d,R,r,p),L=new Blob([D],{type:"text/vtt"}),e=Uf(L),r="text/vtt";case 6:if($={id:d.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:hp(0,E,[e]),mimeType:r||"",codecs:a||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:u||null,type:A.ua,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!c,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Wn(r||"",a||"")])},N=Wn($.mimeType,$.codecs),K=wl(N),!K)throw new re(2,2,2014,r);return d.i.textStreams.push($),vi(d),O.return(mf($))}})},w.vh=function(e,t){var n=this,r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N;return V(function(K){switch(K.g){case 1:if(n.l!=bo&&n.l!=Po)throw new re(1,7,7004);if(t){K.u(2);break}return I(K,Fp(n,e),3);case 3:t=K.h;case 2:if(t!="text/vtt")throw new re(1,2,2017,e);if(r=Gn,a=n.h.duration,n.i&&(a=n.i.presentationTimeline.getDuration()),a==1/0)throw new re(1,4,4045);return I(K,$p(n,e,n.H,n.g.streaming.retryParameters),4);case 4:if(u=K.h,c=Xn[t],!c)throw new re(2,2,2014,t);for(d=c(),p={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},S=st(u),T=d.parseMedia(S,p,e),k=[],A=b(T),E=A.next(),R={};!E.done;R={ye:void 0,zc:void 0},E=A.next())R.zc=E.value,R.ye=null,D=function(O){return function(){return O.ye==null&&(O.ye=ho([e],[O.zc.payload])),O.ye||[]}}(R),L=new ct(R.zc.startTime,R.zc.endTime,D,0,null,null,0,0,1/0),R.zc.payload.includes("#xywh")&&($=R.zc.payload.split("#xywh=")[1].split(","),$.length===4&&L.fh({height:parseInt($[3],10),positionX:parseInt($[0],10),positionY:parseInt($[1],10),width:parseInt($[2],10)})),k.push(L);return N={id:n.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new $t(k),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.De,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Wn(t||"","")])},n.l==Po?n.qd.push(N):n.i.imageStreams.push(N),vi(n),K.return(Od(N))}})},w.th=function(e,t,n){var r=this,a,u,c,d;return V(function(p){switch(p.g){case 1:if(r.l!=bo&&r.l!=Po)throw new re(1,7,7004);if(n){p.u(2);break}return I(p,Fp(r,e),3);case 3:n=p.h;case 2:return a=[],r.A&&(a=r.A.getCuePoints()),I(p,vv(r,e,t,"chapters",n,"",a),4);case 4:if(u=p.h,c=r.wg(),d=c.find(function(S){return S.language==t}),!d){p.u(5);break}return I(p,new Promise(function(S,T){r.m.ha(u,"load",S),r.m.ha(u,"error",function(){T(new re(1,2,2015))})}),6);case 6:return vi(r),p.return(d);case 5:throw new re(1,2,2012)}})};function Fp(e,t){var n;return V(function(r){switch(r.g){case 1:return ee(r,2),I(r,_p(t,e.H,e.g.streaming.retryParameters),4);case 4:n=r.h,ne(r,3);break;case 2:Y(r);case 3:if(n)return r.return(n);throw new re(1,2,2011,t)}})}function vv(e,t,n,r,a,u,c){var d,p,S,T;return V(function(k){if(k.g==1)return a!="text/vtt"||c.length?I(k,$p(e,t,e.H,e.g.streaming.retryParameters),3):k.u(2);k.g!=2&&(d=k.h,p=xv(e,d,a,c),S=new Blob([p],{type:"text/vtt"}),t=Uf(S),a="text/vtt"),T=document.createElement("track");var A=e.N,E=t;try{if(A.g.enabled){var R=Dp(A);R.ot=Op,R.su=!0;var D=Qf(R),L=Pp(E,D)}else L=E}catch($){Dt("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",$),L=E}return T.src=L,T.label=u,T.kind=r,T.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(T),k.return(T)})}function $p(e,t,n,r){var a,u,c;return V(function(d){if(d.g==1){a=Fi,u=oo([t],r),u.method="GET";var p=e.N;try{p.g.enabled&&da(p,u,{ot:Op,su:!0})}catch(S){Dt("CMCD_TEXT_ERROR","Could not generate text CMCD data.",S)}return I(d,n.request(a,u).promise,2)}return c=d.h,d.return(c.data)})}function xv(e,t,n,r){var a=Xn[n];if(a)return n=a(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=st(t),t=n.parseMedia(t,e,null),RE(t,r);throw new re(2,2,2014,n)}w.Yi=function(e,t){this.fa.width=e,this.fa.height=t},w.If=function(e){if(this.l==bo){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.A)t=!1;else{for(var n=b(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.fd||r.Qa||r.sb||(r.fd=!1,mi(t,r,e));t=!0}}else t=!1;return t},w.gf=function(){return je("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},w.Rh=function(){return this.ab};function yr(e){var t=ua();return t.streaming.failureCallback=function(n){if(e.V()){var r=null;n.code==1001||n.code==1002?(r=1,e.g.streaming.lowLatencyMode&&(r=.1)):n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.If(r))}},t.textDisplayFactory=function(){if(e.de){var n=e.getConfiguration();return new Wo(e.h,e.de,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new Ho(e.h,"Shaka Player TextTrack"):new Go},t}w.ih=function(e){this.de=e};function tA(e,t){for(var n=new Set,r=b(t.textStreams),a=r.next();!a.done;a=r.next())a=a.value,a.mimeType!="application/cea-608"&&a.mimeType!="application/cea-708"||n.add(a.originalId);for(r=b(t.variants),a=r.next();!a.done;a=r.next())if((a=a.value.video)&&a.closedCaptions){for(var u=b(a.closedCaptions.keys()),c=u.next();!c.done;c=u.next())if(c=c.value,!n.has(c)){var d=c.startsWith("CC")?"application/cea-608":"application/cea-708",p=new On,S=a.closedCaptions.get(c);d={id:e.cg++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:p,mimeType:d,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:S,originalLanguage:S,label:null,type:Nt,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Wn(d,"")])},t.textStreams.push(d),n.add(c)}}}function nA(e,t){var n,r,a,u,c;return V(function(d){return d.g==1?(n=e.audio,r=e.video,a=function(p,S){var T,k,A;return V(function(E){return E.g==1?p?I(E,p.createSegmentIndex(),2):E.return(null):(k=(T=p.segmentIndex.Ib(S))?T.next().value:null,k?(A=k.startTime,E.return(A)):E.return(null))})},I(d,a(n,t),2)):d.g!=3?(u=d.h,I(d,a(r,t),3)):(c=d.h,c!=null&&u!=null?d.return(Math.max(c,u)):c!=null?d.return(c):u!=null?d.return(u):d.return(t))})}function zp(e){var t=e.pf();if(e.s&&e.L&&e.C){var n=e.I;if(n.j=t,A1(n),e.N&&(n=e.N,t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t),oc(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.ze<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,a=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.R&&(e.R=Math.min(e.R+ ++e.ze*a,n-r))}}t=new Map().set("buffering",t),e.dispatchEvent(pn("buffering",t))}function wv(e){var t=e.h.playbackRate;t!=0&&(e.I&&e.I.set(t),t=pn("ratechange"),e.dispatchEvent(t))}function oc(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==Xs?n="buffering":e.h.ended?n="ended":e.h.paused&&(n="paused");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var a=Date.now()/1e3;t.g.duration=a-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:a,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(pn("statechanged",n)))}}function Sv(e){var t=e.h.playbackRate,n=e.V();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,a=e.vg();a<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.wd(r):a==1&&t!==e.I.hc()&&e.Tc()}if(n&&(n=e.Ob(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start))){r=e.g.streaming.liveSync.targetLatencyTolerance,a=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var u=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var c=e.g.streaming.liveSync.targetLatency,d=c+r,p=Math.max(0,c-r),S=e.g.streaming.liveSync.maxPlaybackRate,T=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(c=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?d=e.i.serviceDescription.targetLatency+r:e.i.serviceDescription.maxLatency!=null&&(d=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?p=Math.max(0,e.i.serviceDescription.targetLatency-r):e.i.serviceDescription.minLatency!=null&&(p=e.i.serviceDescription.minLatency),S=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,T=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.R||typeof c!="number"||(e.R=c);var k=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;a&&e.Da&&e.R!==null&&typeof c=="number"&&e.ze<k&&Date.now()-e.Da>1e3*u&&(u=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.R=Math.max(e.R-(c-u)/2,u+r),e.Da=Date.now()),a&&e.R!==null&&(d=e.R+r,p=e.R-r),c=n.end-e.h.currentTime,r=0,e.l==Po&&(a=e.h.buffered,0<a.length&&(r=a.end(a.length-1),r=Math.max(S,r-n.end))),n=e.g.streaming.liveSync.panicMode,a=1e3*e.g.streaming.liveSync.panicThreshold,u=Date.now()-e.L.h,n&&!T&&(T=e.g.streaming.liveSync.minPlaybackRate),n&&T&&u<=a?t!=T&&e.wd(T):d&&S&&c-r>d?(t!=S&&e.wd(S),e.Da=null):p&&T&&c-r<p?(t!=T&&e.wd(T),e.Da=null):t!==e.I.hc()&&(e.Tc(),e.Da=Date.now())}}function ic(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.U)?(e.U=n,t=!0):(n=Math.max(e.U,n),e.U!=n&&(e.U=n,t=!0))),t){var r;e.U==0?r=pn("started"):e.U==25?r=pn("firstquartile"):e.U==50?r=pn("midpoint"):e.U==75?r=pn("thirdquartile"):e.U==100&&(r=pn("complete")),r&&e.dispatchEvent(r)}}}function ps(e){try{Wy(e.be,e.i)}catch(n){return ga(e,n),!1}var t=gf(e.i.variants);return t=e.za.create(t),e.o.setVariants(Array.from(t.values())),!0}function ma(e,t,n,r,a){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,a=a===void 0?!0:a;var u;(u=ps(e)?e.o.chooseVariant():null)&&rc(e,u,a,t,n,r)}function rc(e,t,n,r,a,u){u=u===void 0?!1:u;var c=e.j.j;if(t==c)r&&U1(e.j,t,r,a,!0);else{var d=e.s.h;d.h!=t&&(d.h=t,d.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),U1(e.j,t,r,a,u,n),r=null,c&&(r=Gs(c)),t=Gs(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.K&&a1(e.K,t,e.hf()),n=pn("adaptation",n),ya(e,n)):Tv(e,r,t)}}function Cv(e,t){var n=Array.from(e.h.audioTracks).find(function(r){return r.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=Ud(n),t=Ud(t),Tv(e,n,t))}function oA(e,t,n){if(e.g.autoShowText==0)return!1;if(e.g.autoShowText==1)return!0;var r=Kt(e.g.preferredTextLanguage);return n=Kt(n.language),e.g.autoShowText==2?Vs(n,r):e.g.autoShowText==3?t?(e=Kt(t.language),Vs(n,r)&&!Vs(e,n)):!1:(je("Invalid autoShowText setting!"),!1)}function vi(e){var t=pn("trackschanged");ya(e,t)}function Tv(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&a1(e.K,n,e.hf()),n=pn("variantchanged",t),ya(e,n)}function sc(e){var t=pn("textchanged");ya(e,t)}function bv(e){var t=pn("texttrackvisibility");ya(e,t)}function kv(e){e.g.abr.enabled||Vp(e);var t=new Map().set("newStatus",e.g.abr.enabled);ya(e,pn("abrstatuschanged",t))}function Vp(e,t){if(t=t===void 0?!0:t,e.l==bo){e.je.stop();for(var n=b(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&ps(e)}}w.disableStream=function(e,t){if(!this.g.abr.enabled||this.l===zi||!navigator.onLine||t==0)return!1;if(this.i.variants.some(function(u){var c=u[e.type];return c&&c.id!==e.id&&!u.disabledUntilTime?e.type=="audio"?e.language===c.language:!0:!1})){for(var n=b(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var a=r[e.type];a&&a.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t)}return this.je.Sa(1),t=this.wb().video.reduce(function(u,c){return u+c.end-c.start},0),ma(this,!1,t,!0,!1),!0}return!1};function ga(e,t){var n,r,a;return V(function(u){switch(u.g){case 1:if(e.l==zi)return u.return();if(t.severity===1&&e.s.K++,n=!0,!(e.Ea&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){u.u(2);break}return ee(u,3),I(u,dE(e.j),5);case 5:r=u.h,n=!r,ne(u,2);break;case 3:Y(u),n=!0;case 2:if(!n)return u.return();t.severity===2&&Vp(e,!1),a=pn("error",new Map().set("detail",t)),e.dispatchEvent(a),a.defaultPrevented&&(t.handled=!0),q(u)}})}function Wl(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(pn(t,e))}function Ev(e,t,n,r){r=r===void 0?!1:r,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(pn(r?"audiotrackchanged":"mediaqualitychanged",t))}function Hp(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new re(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new re(2,3,3016,n,t,e.h.error.message))}function Gp(e,t,n){0<t&&(e.V()||e.hh(t)),t=e.getDuration(),n<t&&(e.V()||e.Za(n))}function ya(e,t){V(function(n){if(n.g==1)return I(n,Promise.resolve(),2);e.l!=zi&&e.dispatchEvent(t),q(n)})}function Av(e){var t=new Set;e=b(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Kt(n.language)):t.add("und");return t}function Iv(e){var t=new Map,n=new Map;e=b(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var a="und",u=[];r.language&&(a=Kt(r.language)),r.type=="variant"?u=r.audioRoles:u=r.roles,u&&u.length||(u=[""]),t.has(a)||t.set(a,new Set),u=b(u);for(var c=u.next();!c.done;c=u.next())c=c.value,t.get(a).add(c),r.label&&(n.has(a)||n.set(a,new Map),n.get(a).set(c,r.label))}var d=[];return t.forEach(function(p,S){p=b(p);for(var T=p.next();!T.done;T=p.next()){T=T.value;var k=null;n.has(S)&&n.get(S).has(T)&&(k=n.get(S).get(T)),d.push({language:S,role:T,label:k})}}),d}ve("shaka.Player",ke),ke.prototype.setVideoContainer=ke.prototype.ih,ke.prototype.getManifestParserFactory=ke.prototype.Rh,ke.prototype.getManifest=ke.prototype.gf,ke.prototype.retryStreaming=ke.prototype.If,ke.prototype.setMaxHardwareResolution=ke.prototype.Yi,ke.prototype.addChaptersTrack=ke.prototype.th,ke.prototype.addThumbnailsTrack=ke.prototype.vh,ke.prototype.addTextTrackAsync=ke.prototype.uh,ke.prototype.getStats=ke.prototype.getStats,ke.prototype.getBufferedInfo=ke.prototype.wb,ke.prototype.getSegmentAvailabilityDuration=ke.prototype.Od,ke.prototype.getPresentationStartTimeAsDate=ke.prototype.Bg,ke.prototype.getPlayheadTimeAsDate=ke.prototype.Wh,ke.prototype.setTextTrackVisibility=ke.prototype.eh,ke.prototype.getChapters=ke.prototype.Kh,ke.prototype.getChaptersTracks=ke.prototype.wg,ke.prototype.isTextTrackVisible=ke.prototype.qf,ke.prototype.selectVariantsByLabel=ke.prototype.Ti,ke.prototype.selectTextLanguage=ke.prototype.Lf,ke.prototype.selectAudioLanguage=ke.prototype.Xg,ke.prototype.getTextLanguages=ke.prototype.$h,ke.prototype.getAudioLanguages=ke.prototype.Hh,ke.prototype.getTextLanguagesAndRoles=ke.prototype.ai,ke.prototype.getAudioLanguagesAndRoles=ke.prototype.Ih,ke.prototype.selectVariantTrack=ke.prototype.Mf,ke.prototype.selectTextTrack=ke.prototype.Yg,ke.prototype.getThumbnails=ke.prototype.Cg,ke.prototype.getAllThumbnails=ke.prototype.Gh,ke.prototype.getImageTracks=ke.prototype.Oh,ke.prototype.getTextTracks=ke.prototype.Ec,ke.prototype.getVariantTracks=ke.prototype.ic,ke.prototype.cancelTrickPlay=ke.prototype.Tc,ke.prototype.trickPlay=ke.prototype.wd,ke.prototype.getPlaybackRate=ke.prototype.eb,ke.prototype.isBuffering=ke.prototype.pf,ke.prototype.getKeyStatuses=ke.prototype.Ld,ke.prototype.getActiveSessionsMetadata=ke.prototype.ff,ke.prototype.getExpiration=ke.prototype.ad,ke.prototype.drmInfo=ke.prototype.drmInfo,ke.prototype.keySystem=ke.prototype.keySystem,ke.prototype.isFullyLoaded=ke.prototype.li,ke.prototype.goToLive=ke.prototype.hi,ke.prototype.seekRange=ke.prototype.Ob,ke.prototype.isAudioOnly=ke.prototype.ki,ke.prototype.isInProgress=ke.prototype.kc,ke.prototype.isLive=ke.prototype.V,ke.prototype.getAdManager=ke.prototype.ug,ke.prototype.getAssetUri=ke.prototype.Dc,ke.prototype.getNetworkingEngine=ke.prototype.xb,ke.prototype.getMediaElement=ke.prototype.Uh,ke.prototype.getManifestType=ke.prototype.hf,ke.prototype.getLoadMode=ke.prototype.yg,ke.prototype.resetConfiguration=ke.prototype.Ni,ke.prototype.getBufferFullness=ke.prototype.vg,ke.prototype.getNonDefaultConfiguration=ke.prototype.Ag,ke.prototype.getConfiguration=ke.prototype.getConfiguration,ke.prototype.configure=ke.prototype.configure,ke.prototype.releaseAllMutexes=ke.prototype.Ji,ke.prototype.destroyAllPreloads=ke.prototype.Qe,ke.prototype.preload=ke.prototype.preload,ke.prototype.detachAndSavePreload=ke.prototype.qg,ke.prototype.unloadAndSavePreload=ke.prototype.aj,ke.prototype.load=ke.prototype.load,ke.prototype.updateStartTime=ke.prototype.ej,ke.prototype.unload=ke.prototype.bc,ke.prototype.detach=ke.prototype.detach,ke.prototype.attachCanvas=ke.prototype.zh,ke.prototype.attach=ke.prototype.Rb,ke.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,a,u,c,d;return V(function(p){switch(p.g){case 1:if(t={},!e){p.u(2);break}return I(p,ik(),3);case 3:t=p.h;case 2:var S={};if(Ui())for(var T in _i)S[T]=!0;T=b(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var k=T.next();!k.done;k=T.next())k=k.value,S[k]=Ui()?!!_i[k]:yl(k);for(n=S,T='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(_(Dr)),S={},T=b(T),k=T.next();!k.done;k=T.next()){k=k.value,S[k]=wl(k)?!0:Ui()?bt(k)||!!fo(k):yl(k);var A=k.split(";")[0];S[A]=S[A]||S[k]}return r=S,I(p,Ng(),4);case 4:a=p.h,u={manifest:n,media:r,drm:t,hardwareResolution:a},c=Xp;for(d in c)u[d]=c[d]();return p.return(u)}})},ke.isBrowserSupported=function(){if(h.Promise||je("A Promise implementation or polyfill is required"),!(h.Promise&&h.Uint8Array&&Array.prototype.forEach)||Jt("Trident/"))return!1;var e=Bs();return e&&9>e||!(h.MediaKeys&&h.navigator&&h.navigator.requestMediaKeySystemAccess&&h.MediaKeySystemAccess&&h.MediaKeySystemAccess.prototype.getConfiguration)?!1:Ui()?!0:yl("application/x-mpegurl")},ke.setAdManagerFactory=function(e){ac=e},ke.registerSupportPlugin=function(e,t){Xp[e]=t},ke.prototype.destroy=ke.prototype.destroy;var zi=0,Wp=1,bo=2,Po=3;ke.LoadMode={DESTROYED:zi,NOT_LOADED:Wp,MEDIA_SOURCE:bo,SRC_EQUALS:Po},ke.version="v4.10.12";var Mv=["4","10"];Qt=new function(e){this.g=e,this.i=En,this.h=Jo}(new to(Number(Mv[0]),Number(Mv[1])));var Xp={},ac=null;function _v(){this.g=[],this.i=this.l=this.j=this.h=0}function iA(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function pt(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new xt,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}w=pt.prototype,w.needsSkipUI=function(){return!1},w.getDuration=function(){return this.g.getDuration()},w.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},w.getRemainingTime=function(){return this.h.getRemainingTime()},w.isPaused=function(){return this.i},w.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},w.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},w.canSkipNow=function(){return this.h.getAdSkippableState()},w.skip=function(){return this.h.skip()},w.pause=function(){return this.h.pause()},w.play=function(){return this.h.resume()},w.getVolume=function(){return this.h.getVolume()},w.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},w.isMuted=function(){return this.h.getVolume()==0},w.isLinear=function(){return this.g.isLinear()},w.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},w.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},w.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},w.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},w.getTitle=function(){return this.g.getTitle()},w.getDescription=function(){return this.g.getDescription()},w.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},w.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},w.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},w.getAdId=function(){return this.g.getAdId()},w.getCreativeAdId=function(){return this.g.getCreativeAdId()},w.getAdvertiserName=function(){return this.g.getAdvertiserName()},w.getMediaUrl=function(){return this.g.getMediaUrl()},w.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},w.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},w.release=function(){this.h=this.g=null},ve("shaka.ads.ClientSideAd",pt),pt.prototype.release=pt.prototype.release,pt.prototype.getPodIndex=pt.prototype.getPodIndex,pt.prototype.getTimeOffset=pt.prototype.getTimeOffset,pt.prototype.getMediaUrl=pt.prototype.getMediaUrl,pt.prototype.getAdvertiserName=pt.prototype.getAdvertiserName,pt.prototype.getCreativeAdId=pt.prototype.getCreativeAdId,pt.prototype.getAdId=pt.prototype.getAdId,pt.prototype.getVastMediaWidth=pt.prototype.getVastMediaWidth,pt.prototype.getVastMediaHeight=pt.prototype.getVastMediaHeight,pt.prototype.getVastMediaBitrate=pt.prototype.getVastMediaBitrate,pt.prototype.getDescription=pt.prototype.getDescription,pt.prototype.getTitle=pt.prototype.getTitle,pt.prototype.getPositionInSequence=pt.prototype.getPositionInSequence,pt.prototype.getSequenceLength=pt.prototype.getSequenceLength,pt.prototype.setMuted=pt.prototype.setMuted,pt.prototype.resize=pt.prototype.resize,pt.prototype.isLinear=pt.prototype.isLinear,pt.prototype.isMuted=pt.prototype.isMuted,pt.prototype.setVolume=pt.prototype.setVolume,pt.prototype.getVolume=pt.prototype.getVolume,pt.prototype.play=pt.prototype.play,pt.prototype.pause=pt.prototype.pause,pt.prototype.skip=pt.prototype.skip,pt.prototype.canSkipNow=pt.prototype.canSkipNow,pt.prototype.getTimeUntilSkippable=pt.prototype.getTimeUntilSkippable,pt.prototype.isSkippable=pt.prototype.isSkippable,pt.prototype.isPaused=pt.prototype.isPaused,pt.prototype.getRemainingTime=pt.prototype.getRemainingTime,pt.prototype.getMinSuggestedDuration=pt.prototype.getMinSuggestedDuration,pt.prototype.getDuration=pt.prototype.getDuration,pt.prototype.needsSkipUI=pt.prototype.needsSkipUI;function ln(){}ve("shaka.ads.Utils",ln),ln.ADS_LOADED="ads-loaded",ln.AD_STARTED="ad-started",ln.AD_FIRST_QUARTILE="ad-first-quartile",ln.AD_MIDPOINT="ad-midpoint",ln.AD_THIRD_QUARTILE="ad-third-quartile",ln.AD_COMPLETE="ad-complete",ln.AD_STOPPED="ad-stopped",ln.AD_SKIPPED="ad-skipped",ln.AD_VOLUME_CHANGED="ad-volume-changed",ln.AD_MUTED="ad-muted",ln.AD_PAUSED="ad-paused",ln.AD_RESUMED="ad-resumed",ln.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",ln.CUEPOINTS_CHANGED="ad-cue-points-changed",ln.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",ln.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",ln.AD_CLICKED="ad-clicked",ln.AD_PROGRESS="ad-progress",ln.AD_BUFFERING="ad-buffering",ln.AD_IMPRESSION="ad-impression",ln.AD_DURATION_CHANGED="ad-duration-changed",ln.AD_CLOSED="ad-closed",ln.AD_LOADED="ad-loaded",ln.ALL_ADS_COMPLETED="all-ads-completed",ln.AD_LINEAR_CHANGED="ad-linear-changed",ln.AD_METADATA="ad-metadata",ln.AD_RECOVERABLE_ERROR="ad-recoverable-error",ln.AD_ERROR="ad-error",ln.AD_BREAK_READY="ad-break-ready",ln.AD_INTERACTION="ad-interaction",ln.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",ln.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",ln.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function lc(e,t,n,r,a){var u=this;this.s=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=a,this.j=null,this.h=new xt,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.10.12"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(c){rA(u,c)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(c){Rv(u,c)}),this.h.D(this.i,"ended",function(){u.m.contentComplete()}),this.h.ha(this.i,"play",function(){u.F=!0})}lc.prototype.configure=function(e){this.o=e},lc.prototype.stop=function(){this.g&&this.g.stop(),this.s&&ca(this.s)},lc.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function Rv(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new He("ad-error",t)),fc(e,null),e.l(new He("ad-cue-points-changed",new Map().set("cuepoints",[])))}function rA(e,t){if(e.l(new He("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new He("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=b(r);for(var a=r.next();!a.done;a=r.next())t.push({start:a.value,end:null});e.l(new He("ad-cue-points-changed",new Map().set("cuepoints",t)))}sA(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,uc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,uc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in h?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,uc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,uc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.ha(e.i,"play",function(){e.F=!0,e.g.start()})}catch{fc(e,null)}}function uc(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function sA(e){function t(n,r){n=new Map().set("originalEvent",n),e.l(new He(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Rv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){Lv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){Lv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){fc(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){fc(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function Lv(e,t){var n=t.getAd();n?(e.j=new pt(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new He("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new He("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):je("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function fc(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new He("ad-content-resume-requested")),e.l(new He("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function mt(e,t,n,r,a){this.g=e,this.h=t,this.j=n,this.l=r,this.i=a}w=mt.prototype,w.needsSkipUI=function(){return!0},w.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},w.getMinSuggestedDuration=function(){return this.getDuration()},w.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},w.isPaused=function(){return this.g.paused},w.isSkippable=function(){return this.h},w.getTimeUntilSkippable=function(){return this.h?0:Math.max(this.getRemainingTime(),0)},w.canSkipNow=function(){return this.getTimeUntilSkippable()==0},w.skip=function(){this.j()},w.pause=function(){return this.g.pause()},w.play=function(){return this.g.play()},w.getVolume=function(){return this.g.volume},w.setVolume=function(e){this.g.volume=e},w.isMuted=function(){return this.g.muted},w.isLinear=function(){return!0},w.resize=function(){},w.setMuted=function(e){this.g.muted=e},w.getSequenceLength=function(){return this.l},w.getPositionInSequence=function(){return this.i},w.getTitle=function(){return""},w.getDescription=function(){return""},w.getVastMediaBitrate=function(){return 0},w.getVastMediaHeight=function(){return 0},w.getVastMediaWidth=function(){return 0},w.getAdId=function(){return""},w.getCreativeAdId=function(){return""},w.getAdvertiserName=function(){return""},w.getMediaUrl=function(){return null},w.getTimeOffset=function(){return 0},w.getPodIndex=function(){return 0},w.release=function(){this.g=null},ve("shaka.ads.InterstitialAd",mt),mt.prototype.release=mt.prototype.release,mt.prototype.getPodIndex=mt.prototype.getPodIndex,mt.prototype.getTimeOffset=mt.prototype.getTimeOffset,mt.prototype.getMediaUrl=mt.prototype.getMediaUrl,mt.prototype.getAdvertiserName=mt.prototype.getAdvertiserName,mt.prototype.getCreativeAdId=mt.prototype.getCreativeAdId,mt.prototype.getAdId=mt.prototype.getAdId,mt.prototype.getVastMediaWidth=mt.prototype.getVastMediaWidth,mt.prototype.getVastMediaHeight=mt.prototype.getVastMediaHeight,mt.prototype.getVastMediaBitrate=mt.prototype.getVastMediaBitrate,mt.prototype.getDescription=mt.prototype.getDescription,mt.prototype.getTitle=mt.prototype.getTitle,mt.prototype.getPositionInSequence=mt.prototype.getPositionInSequence,mt.prototype.getSequenceLength=mt.prototype.getSequenceLength,mt.prototype.setMuted=mt.prototype.setMuted,mt.prototype.resize=mt.prototype.resize,mt.prototype.isLinear=mt.prototype.isLinear,mt.prototype.isMuted=mt.prototype.isMuted,mt.prototype.setVolume=mt.prototype.setVolume,mt.prototype.getVolume=mt.prototype.getVolume,mt.prototype.play=mt.prototype.play,mt.prototype.pause=mt.prototype.pause,mt.prototype.skip=mt.prototype.skip,mt.prototype.canSkipNow=mt.prototype.canSkipNow,mt.prototype.getTimeUntilSkippable=mt.prototype.getTimeUntilSkippable,mt.prototype.isSkippable=mt.prototype.isSkippable,mt.prototype.isPaused=mt.prototype.isPaused,mt.prototype.getRemainingTime=mt.prototype.getRemainingTime,mt.prototype.getMinSuggestedDuration=mt.prototype.getMinSuggestedDuration,mt.prototype.getDuration=mt.prototype.getDuration,mt.prototype.needsSkipUI=mt.prototype.needsSkipUI;function cc(e,t,n,r){var a=this;this.F=e,this.B=t,this.i=n,this.C=null,this.m=!0,this.s=this.i,this.g=r,this.G=new Set,this.A=new Set,this.o=new Map,this.h=new ke,Kp(this),this.I=new xt,this.j=new xt,this.H=!1,this.l=null,this.I.D(this.i,"timeupdate",function(){if(!a.H){var u=a.l==null||a.l==0;a.l=a.i.currentTime,(u=Dv(a,u))&&Pv(a,u,1,1,Date.now())}}),new It(function(){var u,c,d,p,S,T,k,A,E,R;return V(function(D){switch(D.g){case 1:if(!a.A.size||a.H||a.l==null){D.u(0);break}u=!1,c=Array.from(a.A),d=a.B.Ob(),p=b(c),S=p.next();case 3:if(S.done){D.u(5);break}if(T=S.value,k=T.endTime||T.startTime,!(1<=d.start-k)){A=T.startTime-a.l,0<A&&10>=A&&(a.o.has(T)||a.o.set(T,a.h.preload(T.uri))),D.u(4);break}if(!a.o.has(T)){D.u(7);break}return I(D,a.o.get(T),8);case 8:(E=D.h)&&E.destroy(),a.o.delete(T);case 7:R=JSON.stringify(T),a.G.has(R)&&a.G.delete(R),a.A.delete(T),u=!0;case 4:S=p.next(),D.u(3);break;case 5:u&&qp(a),q(D)}})}).Sa(1)}cc.prototype.configure=function(e){this.F&&this.m==e.supportsMultipleMediaElements&&((this.m=!e.supportsMultipleMediaElements)?(this.s=this.i,this.C&&(this.C.parentElement&&this.F.removeChild(this.C),this.C=null)):(this.C||(e=document.createElement(this.i.tagName),e.autoplay=!0,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgb(0, 0, 0)",e.setAttribute("playsinline",""),this.C=e),this.s=this.C))},cc.prototype.stop=function(){this.j&&this.j.Ra(),this.G.clear(),this.A.clear(),this.h.Qe(),this.o.clear(),this.h.detach(),this.H=!1,this.l=null},cc.prototype.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.F&&ca(this.F),this.h.destroy()};function aA(e,t){var n,r,a,u,c,d,p,S;V(function(T){if(T.g==1)return e.B.yg()==Po&&e.m?(je("Unsupported interstitial when using single media element",t),T.return()):(Kp(e),n=!1,I(T,lA(e,t),2));if(r=T.h,r.length)for(a=b(r),u=a.next();!u.done;u=a.next())c=u.value,d=JSON.stringify(c),e.G.has(d)||(n=!0,e.G.add(d),e.A.add(c),p=!1,t.Ab&&e.l==null?p=!0:c.startTime!=0||c.Ie?e.l!=null&&(S=t.startTime-e.l,0<S&&10>=S&&(p=!0)):p=!0,p&&(e.o.has(c)||e.o.set(c,e.h.preload(c.uri))));else je("Unsupported interstitial",t);n&&qp(e),q(T)})}function Dv(e,t,n){n=n===void 0?0:n;var r=0,a=null;if(e.A.size&&e.l!=null){var u=e.i.ended,c=Array.from(e.A).sort(function(S,T){return T.startTime-S.startTime});c=b(c);for(var d=c.next();!d.done;d=c.next()){d=d.value;var p=!1;if(t?p=d.Ab:u?p=d.nc:d.Ab||d.nc||(p=e.l-Math.round(1e3*d.startTime)/1e3,p=0<p&&(1>=p||!d.Ie)),p){if(r==n){a=d;break}r++}}}return a}function Pv(e,t,n,r,a,u){u=u===void 0?0:u;var c,d,p,S,T,k,A,E,R,D,L,$,N,K;V(function(O){switch(O.g){case 1:if(c=Date.now(),!e.s.parentElement&&e.F&&e.F.appendChild(e.s),r==1&&n==1&&(n=Array.from(e.A).filter(function(H){return t.Ab?H.Ab==t.Ab:t.nc?H.nc==t.nc:.001>Math.abs(H.startTime-t.startTime)}).length),(t.once||t.Ab)&&(u++,e.A.delete(t),qp(e)),e.H=!0,!e.m||r!=1){O.u(2);break}return e.g(new He("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),d=new en,p=function(H){return V(function(J){if(J.g==1)return H.state!="detach"?J.u(0):Pg()?I(J,new Promise(function(oe){return new It(oe).Y(.1)}),3):J.u(3);d.resolve(),e.j.jb(e.B,"onstatechange",p),q(J)})},e.j.D(e.B,"onstatechange",p),I(O,d,2);case 2:return e.m||(e.i.pause(),t.Oc!=null&&t.Oc!=0&&(e.i.currentTime+=t.Oc)),S=!1,T=null,k=function(){if(!e.m&&t.Oc==null)if(t.se&&t.endTime&&t.endTime!=1/0)e.i.currentTime!=t.endTime&&(e.i.currentTime=t.endTime);else{var H=Date.now();e.i.currentTime+=(H-a)/1e3,a=H}},A=function(){var H,J;return V(function(oe){if(oe.g==1)return k(),T&&T.stop(),(H=Dv(e,t.Ab,r-u))?(e.g(new He("ad-stopped")),e.j.Ra(),Pv(e,H,n,++r,a,u),oe.u(0)):e.m?I(oe,e.h.detach(),4):I(oe,e.h.bc(),4);e.m&&(J=t.Oc,J==null&&(J=t.se&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-a)/1e3),e.g(new He("ad-content-resume-requested",new Map().set("offset",J)))),e.g(new He("ad-stopped")),e.j.Ra(),e.H=!1,e.m||(k(),e.i.ended||e.i.play()),q(oe)})},E=function(H){return V(function(J){return S?J.return():(S=!0,e.g(new He("ad-error",new Map().set("originalEvent",H))),I(J,A(),0))})},R=function(){return V(function(H){if(H.g==1)return S?H.return():(S=!0,I(H,A(),2));e.g(new He("ad-complete")),q(H)})},D=function(){return V(function(H){return S?H.return():(S=!0,e.g(new He("ad-skipped")),I(H,A(),0))})},L=new mt(e.s,t.isSkippable,D,n,r),e.m||(L.setMuted(e.i.muted),L.setVolume(e.i.volume)),e.g(new He("ad-started",new Map().set("ad",L))),L.canSkipNow()&&e.g(new He("ad-skip-state-changed")),e.j.ha(e.h,"error",E),e.j.ha(e.h,"firstquartile",function(){k(),e.g(new He("ad-first-quartile"))}),e.j.ha(e.h,"midpoint",function(){k(),e.g(new He("ad-midpoint"))}),e.j.ha(e.h,"thirdquartile",function(){k(),e.g(new He("ad-third-quartile"))}),e.j.ha(e.h,"complete",R),e.j.D(e.s,"play",function(){e.g(new He("ad-resumed"))}),e.j.D(e.s,"pause",function(){e.g(new He("ad-paused"))}),e.j.D(e.s,"volumechange",function(){e.s.muted?e.g(new He("ad-muted")):e.g(new He("ad-volume-changed"))}),ee(O,4),t.Ef&&(T=new It(function(){L.skip()}).Y(t.Ef)),Kp(e),I(O,e.h.Rb(e.s),6);case 6:return e.o.has(t)?I(O,e.o.get(t),10):I(O,e.h.load(t.uri),8);case 10:return $=O.h,e.o.delete(t),$?I(O,e.h.load($),8):I(O,e.h.load(t.uri),8);case 8:N=(Date.now()-c)/1e3,e.g(new He("ads-loaded",new Map().set("loadTime",N))),e.m&&e.i.play(),ne(O,0);break;case 4:K=Y(O),E(K),q(O)}})}function lA(e,t){var n,r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye,le,ue,ce,Ee,Te,Ae,Oe;return V(function(_e){switch(_e.g){case 1:if(n=[],!t||(r=t.values.find(function(ze){return ze.key=="X-ASSET-URI"}),a=t.values.find(function(ze){return ze.key=="X-ASSET-LIST"}),!r&&!a))return _e.return(n);if(u=t.values.find(function(ze){return ze.key=="X-RESTRICT"}),d=c=!0,u&&u.data&&(p=u.data,c=!p.includes("SKIP"),d=!p.includes("JUMP")),S=null,(T=t.values.find(function(ze){return ze.key=="X-RESUME-OFFSET"}))&&(k=T.data,S=parseFloat(k),isNaN(S)&&(S=null)),A=null,(E=t.values.find(function(ze){return ze.key=="X-PLAYOUT-LIMIT"}))&&(R=E.data,A=parseFloat(R),isNaN(A)&&(A=null)),$=L=D=!1,(N=t.values.find(function(ze){return ze.key=="CUE"}))&&(K=N.data,D=K.includes("ONCE"),L=K.includes("PRE"),$=K.includes("POST")),O=!1,(H=t.values.find(function(ze){return ze.key=="X-TIMELINE-OCCUPIES"}))?(J=H.data,O=J.includes("RANGE")):!T&&e.B.V()&&(O=!L&&!$),r){if(oe=r.data,!oe)return _e.return(n);n.push({startTime:t.startTime,endTime:t.endTime,uri:oe,isSkippable:c,Ie:d,Oc:S,Ef:A,once:D,Ab:L,nc:$,se:O}),_e.u(2);break}if(!a){_e.u(2);break}return se=a.data,se?(ye=oo([se],ji()),le=e.B.xb().request(7,ye),ee(_e,4),I(_e,le.promise,6)):_e.return(n);case 6:for(ue=_e.h,ce=dn(ue.data),Ee=JSON.parse(ce),Te=b(Ee.ASSETS),Ae=Te.next();!Ae.done;Ae=Te.next())Oe=Ae.value,Oe.URI&&n.push({startTime:t.startTime,endTime:t.endTime,uri:Oe.URI,isSkippable:c,Ie:d,Oc:S,Ef:A,once:D,Ab:L,nc:$,se:O});ne(_e,2);break;case 4:Y(_e);case 2:return _e.return(n)}})}function qp(e){for(var t=[],n=b(e.A),r=n.next(),a={};!r.done;a={Qb:void 0},r=n.next())r=r.value,a.Qb={start:r.startTime,end:null},r.Ab?(a.Qb.start=0,a.Qb.end=null):r.nc?(a.Qb.start=-1,a.Qb.end=null):r.se&&(a.Qb.end=r.endTime),t.find(function(u){return function(c){return u.Qb.start==c.start&&u.Qb.end==c.end}}(a))||t.push(a.Qb);e.g(new He("ad-cue-points-changed",new Map().set("cuepoints",t)))}function Kp(e){e.h.configure(e.B.Ag());var t=e.h.xb();t.mg(),t.ng(),yy(e.B.xb(),t)}function jr(e){this.h=e||"",this.g=0}function va(e){vr(e,/[ \t]+/gm)}function vr(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function ms(e){return e.g==e.h.length?null:(e=vr(e,/[^ \t\n]*/gm))?e[0]:null}function dt(e,t,n,r,a){if(this.h=e,e=this.h.skipOffset)if(e=vr(new jr(e),uA),e==null)e=null;else{var u=Number(e[2]),c=Number(e[3]);e=59<u||59<c?null:(Number(e[4])||0)/1e3+c+60*u+3600*(Number(e[1])||0)}else e=null;this.j=e,this.g=a,this.i=t,this.l=n,this.o=r,this.m=!1}w=dt.prototype,w.needsSkipUI=function(){return!0},w.getDuration=function(){return this.h.durationInSeconds},w.getMinSuggestedDuration=function(){return this.getDuration()},w.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},w.isPaused=function(){return this.g.paused},w.isSkippable=function(){return typeof this.j=="number"},w.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},w.canSkipNow=function(){return this.getTimeUntilSkippable()==0},w.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},w.pause=function(){return this.g.pause()},w.play=function(){return this.g.play()},w.getVolume=function(){return this.g.volume},w.setVolume=function(e){this.g.volume=e},w.isMuted=function(){return this.g.muted},w.isLinear=function(){return this.o},w.resize=function(){},w.setMuted=function(e){this.g.muted=e},w.getSequenceLength=function(){return this.l?this.l:1},w.getPositionInSequence=function(){return this.i?this.i:1},w.getTitle=function(){return this.h.adTitle},w.getDescription=function(){return""},w.getVastMediaBitrate=function(){return 0},w.getVastMediaHeight=function(){return 0},w.getVastMediaWidth=function(){return 0},w.getAdId=function(){return this.h.adId},w.getCreativeAdId=function(){return this.h.creativeId},w.getAdvertiserName=function(){return""},w.getMediaUrl=function(){return null},w.getTimeOffset=function(){return 0},w.getPodIndex=function(){return 0},w.release=function(){this.l=this.i=this.g=this.h=null},ve("shaka.ads.MediaTailorAd",dt),dt.prototype.release=dt.prototype.release,dt.prototype.getPodIndex=dt.prototype.getPodIndex,dt.prototype.getTimeOffset=dt.prototype.getTimeOffset,dt.prototype.getMediaUrl=dt.prototype.getMediaUrl,dt.prototype.getAdvertiserName=dt.prototype.getAdvertiserName,dt.prototype.getCreativeAdId=dt.prototype.getCreativeAdId,dt.prototype.getAdId=dt.prototype.getAdId,dt.prototype.getVastMediaWidth=dt.prototype.getVastMediaWidth,dt.prototype.getVastMediaHeight=dt.prototype.getVastMediaHeight,dt.prototype.getVastMediaBitrate=dt.prototype.getVastMediaBitrate,dt.prototype.getDescription=dt.prototype.getDescription,dt.prototype.getTitle=dt.prototype.getTitle,dt.prototype.getPositionInSequence=dt.prototype.getPositionInSequence,dt.prototype.getSequenceLength=dt.prototype.getSequenceLength,dt.prototype.setMuted=dt.prototype.setMuted,dt.prototype.resize=dt.prototype.resize,dt.prototype.isLinear=dt.prototype.isLinear,dt.prototype.isMuted=dt.prototype.isMuted,dt.prototype.setVolume=dt.prototype.setVolume,dt.prototype.getVolume=dt.prototype.getVolume,dt.prototype.play=dt.prototype.play,dt.prototype.pause=dt.prototype.pause,dt.prototype.skip=dt.prototype.skip,dt.prototype.canSkipNow=dt.prototype.canSkipNow,dt.prototype.getTimeUntilSkippable=dt.prototype.getTimeUntilSkippable,dt.prototype.isSkippable=dt.prototype.isSkippable,dt.prototype.isPaused=dt.prototype.isPaused,dt.prototype.getRemainingTime=dt.prototype.getRemainingTime,dt.prototype.getMinSuggestedDuration=dt.prototype.getMinSuggestedDuration,dt.prototype.getDuration=dt.prototype.getDuration,dt.prototype.needsSkipUI=dt.prototype.needsSkipUI;var uA=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Xl(e,t,n,r){this.B=e,this.K=t,this.h=n,this.l=null,this.U=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.o=new xt}Xl.prototype.stop=function(){for(var e=b(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.jb(t.target,t.type,t.listener);xa(this),this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},Xl.prototype.release=function(){this.stop(),this.o&&this.o.release()},Xl.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(cA(this,this.G,this.R),this.R=!1)},Xl.prototype.getCuePoints=function(){for(var e=[],t=b(this.j),n=t.next();!n.done;n=t.next()){n=b(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function fA(e,t,n){var r,a,u,c,d,p,S,T,k,A,E;V(function(R){if(R.g==1)return r=oo([t],ji()),r.method="POST",n&&(a=JSON.stringify(n),r.body=Bi(a)),u=e.K.request(7,r),ee(R,2),I(R,u.promise,4);if(R.g!=2){if(c=R.h,d=dn(c.data),p=JSON.parse(d),p.manifestUrl&&p.trackingUrl)S=new Sn(t),T=new Sn(p.trackingUrl),e.G=S.resolve(T).toString(),k=Date.now()/1e3,A=k-e.U,e.i(new He("ads-loaded",new Map().set("loadTime",A))),E=new Sn(p.manifestUrl),e.l.resolve(S.resolve(E).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return ne(R,0)}if(Y(R),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,R.return();e.l.resolve(e.H),e.l=null,q(R)})}function cA(e,t,n){var r,a,u,c,d,p,S,T,k,A,E,R,D,L,$;V(function(N){if(N.g==1)return r=oo([t],ji()),a=e.K.request(7,r),ee(N,2),I(N,a.promise,4);if(N.g!=2){if(u=N.h,c=[],d=dn(u.data),p=JSON.parse(d),0<p.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(p.avails)){for(e.j=p.avails,S=b(e.j),T=S.next();!T.done;T=S.next())for(k=T.value,A=b(k.nonLinearAdsList),E=A.next();!E.done;E=A.next())for(R=E.value,D=b(R.nonLinearAdList),L=D.next();!L.done;L=D.next())$=L.value,hA(e,$);c=e.getCuePoints(),e.i(new He("ad-cue-points-changed",new Map().set("cuepoints",c)))}}else e.j.length&&e.i(new He("ad-cue-points-changed",new Map().set("cuepoints",c))),xa(e),e.j=[];return n&&(e.I||0<c.length)&&dA(e),ne(N,0)}Y(N),q(N)})}function hA(e,t){var n,r,a,u,c,d,p;V(function(S){if(S.g==1)return!t.staticResource||(n=Ov(t),e.F.get(n))?S.return():(r=oo([t.staticResource],ji()),a=e.K.request(7,r),ee(S,2),e.F.set(n,[]),I(S,a.promise,4));if(S.g!=2)return u=S.h,c=dn(u.data),d=JSON.parse(c),p=d.apps,e.F.set(n,p),ne(S,0);Y(S),e.F.delete(n),q(S)})}function Ov(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function dA(e){Uv(e),e.I||(Nv(e),e.o.D(e.h,"seeked",function(){Nv(e)}),e.o.D(e.h,"ended",function(){xa(e)})),e.o.D(e.h,"timeupdate",function(){Uv(e)})}function Nv(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,r,a=b(e.j),u=a.next();!u.done;u=a.next()){u=u.value;for(var c=b(u.ads),d=c.next();!d.done;d=c.next())if(d=d.value,!r)d.startTimeInSeconds<t&&(r=d,n=u);else if(d.startTimeInSeconds<t&&d.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=d,n=u;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function Uv(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.C,a=r.startTimeInSeconds+.5*r.durationInSeconds,u=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),ko(e,"firstQuartile")):t>=a&&!e.s.includes("midpoint")?(e.s.push("midpoint"),ko(e,"midpoint")):t>=u&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),ko(e,"thirdQuartile")),r=e.g.getRemainingTime(),a=e.g.getDuration(),e.g.canSkipNow()&&0<r&&0<a&&ko(e,"skipStateChanged"),0<a&&(0>=r||r>a)&&xa(e)}if(!e.g||!e.g.isLinear()){e:for(r=b(e.j),a=r.next();!a.done&&(a=a.value,!(e.g&&e.g.isLinear()));a=r.next())for(u=0;u<a.ads.length;u++){var c=a.ads[u],d=c.startTimeInSeconds+c.durationInSeconds;if(c.startTimeInSeconds<=t&&d>t){if(e.N.includes(c.adId)){if(e.h.ended)continue;e.h.currentTime=d;break e}xa(e),e.L=a,e.g=new dt(c,u+1,a.ads.length,!0,e.h),e.C=c,u===0&&ko(e,"breakStart"),Bv(e);break}}if(!e.g){for(r=b(e.j),a=r.next();!a.done&&(a=a.value,!e.g);a=r.next())for(u=0;u<a.nonLinearAdsList.length;u++)if(c=a.nonLinearAdsList[u],c.nonLinearAdList.length){d=a.startTimeInSeconds;var p=e.F.get(Ov(c.nonLinearAdList[0]));if(d<=t&&p&&p.length){xa(e),d=e,p=b(p);for(var S=p.next();!S.done;S=p.next())if(S=S.value,S.data.source.length){var T=document.createElement("img");T.src=S.data.source[0].url,T.style.top=(S.placeholder.top||0)+"%",T.style.height=100-(S.placeholder.top||0)+"%",T.style.left=(S.placeholder.left||0)+"%",T.style.maxWidth=100-(S.placeholder.left||0)+"%",T.style.objectFit="contain",T.style.position="absolute",d.B.appendChild(T)}e.L=a,e.g=new dt(c,u+1,a.ads.length,!1,e.h),e.C=c,u===0&&ko(e,"breakStart"),Bv(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function xa(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId);var t=e.g.m;t!==void 0&&t?ko(e,"skip"):ko(e,"complete"),t=b(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.jb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&ko(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function Bv(e){var t=!1;e.h.paused?t=!0:(ko(e,"impression"),ko(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&ko(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||ko(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(ko(e,"impression"),ko(e,"start"),t=!1):ko(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){ko(e,"pause")}});for(var n=b(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function ko(e,t){var n=e.C.trackingEvents.find(function(a){return a.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(a){return a.eventType==t})),n){n=b(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=oo([r],ji()),r.method="POST",e.K.request(7,r))}switch(t){case"impression":e.i(new He("ad-impression"));break;case"start":e.i(new He("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new He("ad-muted"));break;case"unmute":e.i(new He("ad-volume-changed"));break;case"resume":e.i(new He("ad-resumed"));break;case"pause":e.i(new He("ad-paused"));break;case"firstQuartile":e.i(new He("ad-first-quartile"));break;case"midpoint":e.i(new He("ad-midpoint"));break;case"thirdQuartile":e.i(new He("ad-third-quartile"));break;case"complete":e.i(new He("ad-complete")),e.i(new He("ad-stopped"));break;case"skip":e.i(new He("ad-skipped")),e.i(new He("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new He("ad-skip-state-changed"))}}function gt(e,t){this.g=e,this.i=null,this.h=t}w=gt.prototype,w.needsSkipUI=function(){return!0},w.getDuration=function(){return this.i?this.i.duration:-1},w.getMinSuggestedDuration=function(){return this.getDuration()},w.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},w.isPaused=function(){return this.h.paused},w.isSkippable=function(){return this.g.isSkippable()},w.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},w.canSkipNow=function(){return this.getTimeUntilSkippable()==0},w.skip=function(){this.h.currentTime+=this.getRemainingTime()},w.pause=function(){return this.h.pause()},w.play=function(){return this.h.play()},w.getVolume=function(){return this.h.volume},w.setVolume=function(e){this.h.volume=e},w.isMuted=function(){return this.h.muted},w.isLinear=function(){return!0},w.resize=function(){},w.setMuted=function(e){this.h.muted=e},w.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},w.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},w.getTitle=function(){return this.g.getTitle()},w.getDescription=function(){return this.g.getDescription()},w.getVastMediaBitrate=function(){return 0},w.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},w.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},w.getAdId=function(){return this.g.getAdId()},w.getCreativeAdId=function(){return this.g.getCreativeAdId()},w.getAdvertiserName=function(){return this.g.getAdvertiserName()},w.getMediaUrl=function(){return null},w.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},w.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},w.release=function(){this.h=this.i=this.g=null},ve("shaka.ads.ServerSideAd",gt),gt.prototype.release=gt.prototype.release,gt.prototype.getPodIndex=gt.prototype.getPodIndex,gt.prototype.getTimeOffset=gt.prototype.getTimeOffset,gt.prototype.getMediaUrl=gt.prototype.getMediaUrl,gt.prototype.getAdvertiserName=gt.prototype.getAdvertiserName,gt.prototype.getCreativeAdId=gt.prototype.getCreativeAdId,gt.prototype.getAdId=gt.prototype.getAdId,gt.prototype.getVastMediaWidth=gt.prototype.getVastMediaWidth,gt.prototype.getVastMediaHeight=gt.prototype.getVastMediaHeight,gt.prototype.getVastMediaBitrate=gt.prototype.getVastMediaBitrate,gt.prototype.getDescription=gt.prototype.getDescription,gt.prototype.getTitle=gt.prototype.getTitle,gt.prototype.getPositionInSequence=gt.prototype.getPositionInSequence,gt.prototype.getSequenceLength=gt.prototype.getSequenceLength,gt.prototype.setMuted=gt.prototype.setMuted,gt.prototype.resize=gt.prototype.resize,gt.prototype.isLinear=gt.prototype.isLinear,gt.prototype.isMuted=gt.prototype.isMuted,gt.prototype.setVolume=gt.prototype.setVolume,gt.prototype.getVolume=gt.prototype.getVolume,gt.prototype.play=gt.prototype.play,gt.prototype.pause=gt.prototype.pause,gt.prototype.skip=gt.prototype.skip,gt.prototype.canSkipNow=gt.prototype.canSkipNow,gt.prototype.getTimeUntilSkippable=gt.prototype.getTimeUntilSkippable,gt.prototype.isSkippable=gt.prototype.isSkippable,gt.prototype.isPaused=gt.prototype.isPaused,gt.prototype.getRemainingTime=gt.prototype.getRemainingTime,gt.prototype.getMinSuggestedDuration=gt.prototype.getMinSuggestedDuration,gt.prototype.getDuration=gt.prototype.getDuration,gt.prototype.needsSkipUI=gt.prototype.needsSkipUI;function jv(e,t,n,r){var a=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new xt,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new He("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(u){pA(a,u)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){a.B.length?a.j.resolve(a.B):a.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),a.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(u){u=u.getAd(),a.m=new gt(u,a.l),a.A&&(a.m.i=a.A),a.i(new He("ad-started",new Map().set("ad",a.m))),a.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){a.s.removeAttribute("ad-active");var u=a.l.currentTime;a.o&&a.o>u&&(a.l.currentTime=a.o,a.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(u){a.A=u.getStreamData().adProgressData,a.m&&(a.m.i=a.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){a.i(new He("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){a.i(new He("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){a.i(new He("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){a.i(new He("ad-complete")),a.i(new He("ad-stopped")),a.s.removeAttribute("ad-active"),a.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){a.i(new He("ad-skipped")),a.i(new He("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(u){var c=u.getStreamData();u=[],c=b(c.cuepoints);for(var d=c.next();!d.done;d=c.next())d=d.value,u.push({start:d.start,end:d.end});a.C=u,a.i(new He("ad-cue-points-changed",new Map().set("cuepoints",u)))})}w=jv.prototype,w.configure=function(){},w.stop=function(){this.B="",this.o=null,this.C=[]},w.release=function(){this.stop(),this.h&&this.h.release()},w.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},w.getCuePoints=function(){return this.C};function pA(e,t){e.i(new He("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function et(){Wt.call(this),this.g=this.h=this.i=this.j=null,this.m=new _v,this.o=navigator.language,this.l=null}Q(et,Wt),w=et.prototype,w.setLocale=function(e){this.o=e},w.configure=function(e){this.l=e,this.j&&this.j.configure(this.l),this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},w.initInterstitial=function(e,t,n){var r=this;this.j&&this.j.release(),this.j=new cc(e,t,n,function(a){return hc(r,a)}),this.j.configure(this.l)},w.initClientSide=function(e,t,n){var r=this;if(!h.google||!google.ima||!google.ima.AdsLoader)throw new re(2,10,1e4);this.i&&this.i.release(),this.i=new lc(e,t,this.o,n,function(a){return hc(r,a)}),this.i.configure(this.l)},w.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Wt.prototype.release.call(this)},w.onAssetUnload=function(){this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new He("ad-stopped")),this.dispatchEvent(new He("ad-content-attach-requested")),this.m=new _v},w.requestClientSideAds=function(e){if(!this.i)throw new re(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},w.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new re(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},w.initMediaTailor=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new Xl(e,t,n,function(a){return hc(r,a)})},w.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new re(1,10,10005);var r=this.h;return n=n===void 0?"":n,r.l?e=Promise.reject(new re(1,10,10004)):(r.l=new en,fA(r,e,t),r.H=n||"",r.U=Date.now()/1e3,e=r.l),e},w.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new re(1,10,10005);var t=this.h;t.G=e,t.i(new He("ads-loaded",new Map().set("loadTime",0)))},w.initServerSide=function(e,t){var n=this;if(!h.google||!google.ima||!google.ima.dai)throw new re(2,10,10002);this.g&&this.g.release(),this.g=new jv(e,t,this.o,function(r){return hc(n,r)}),this.g.configure(this.l)},w.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new re(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&je('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.10.12",n=this.g,n.j?e=Promise.reject(new re(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new en,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},w.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new re(1,10,10003);(e.mpt||e.mpv)&&je('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.10.12",this.g.g.replaceAdTagParameters(e)},w.getServerSideCuePoints=function(){return Et("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},w.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},w.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:iA(e),started:e.h,playedCompletely:e.j,skipped:e.l,errors:e.i}},w.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},w.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},w.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},w.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},w.onInterstitialMetadata=function(e,t,n){this.j||this.initInterstitial(null,e,t),this.j&&aA(this.j,n)};function hc(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;break;case"ad-complete":e.m.j++;break;case"ad-skipped":e.m.l++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}ve("shaka.ads.AdManager",et),et.prototype.onInterstitialMetadata=et.prototype.onInterstitialMetadata,et.prototype.onCueMetadataChange=et.prototype.onCueMetadataChange,et.prototype.onHlsTimedMetadata=et.prototype.onHlsTimedMetadata,et.prototype.onDashTimedMetadata=et.prototype.onDashTimedMetadata,et.prototype.onManifestUpdated=et.prototype.onManifestUpdated,et.prototype.getStats=et.prototype.getStats,et.prototype.getCuePoints=et.prototype.getCuePoints,et.prototype.getServerSideCuePoints=et.prototype.getServerSideCuePoints,et.prototype.replaceServerSideAdTagParameters=et.prototype.replaceServerSideAdTagParameters,et.prototype.requestServerSideStream=et.prototype.requestServerSideStream,et.prototype.initServerSide=et.prototype.initServerSide,et.prototype.addMediaTailorTrackingUrl=et.prototype.addMediaTailorTrackingUrl,et.prototype.requestMediaTailorStream=et.prototype.requestMediaTailorStream,et.prototype.initMediaTailor=et.prototype.initMediaTailor,et.prototype.updateClientSideAdsRenderingSettings=et.prototype.updateClientSideAdsRenderingSettings,et.prototype.requestClientSideAds=et.prototype.requestClientSideAds,et.prototype.onAssetUnload=et.prototype.onAssetUnload,et.prototype.release=et.prototype.release,et.prototype.initClientSide=et.prototype.initClientSide,et.prototype.initInterstitial=et.prototype.initInterstitial,et.prototype.configure=et.prototype.configure,et.prototype.setLocale=et.prototype.setLocale,et.ADS_LOADED="ads-loaded",et.AD_STARTED="ad-started",et.AD_FIRST_QUARTILE="ad-first-quartile",et.AD_MIDPOINT="ad-midpoint",et.AD_THIRD_QUARTILE="ad-third-quartile",et.AD_COMPLETE="ad-complete",et.AD_STOPPED="ad-stopped",et.AD_SKIPPED="ad-skipped",et.AD_VOLUME_CHANGED="ad-volume-changed",et.AD_MUTED="ad-muted",et.AD_PAUSED="ad-paused",et.AD_RESUMED="ad-resumed",et.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",et.CUEPOINTS_CHANGED="ad-cue-points-changed",et.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",et.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",et.AD_CLICKED="ad-clicked",et.AD_PROGRESS="ad-progress",et.AD_BUFFERING="ad-buffering",et.AD_IMPRESSION="ad-impression",et.AD_DURATION_CHANGED="ad-duration-changed",et.AD_CLOSED="ad-closed",et.AD_LOADED="ad-loaded",et.ALL_ADS_COMPLETED="all-ads-completed",et.AD_LINEAR_CHANGED="ad-linear-changed",et.AD_METADATA="ad-metadata",et.AD_RECOVERABLE_ERROR="ad-recoverable-error",et.AD_ERROR="ad-error",et.AD_BREAK_READY="ad-break-ready",et.AD_INTERACTION="ad-interaction",et.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",et.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",et.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",ac=function(){return new et};function Fv(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof He){var r={};for(a in n)(t=n[a])&&typeof t=="object"?a=="detail"&&(r[a]=t):a in Event||(r[a]=t);return r}if(n instanceof Error){var a=new Set(["name","message","stack"]);for(r in n)a.add(r);for(r=b(Object.getOwnPropertyNames(n)),t=r.next();!t.done;t=r.next())a.add(t.value);for(r={},a=b(a),t=a.next();!t.done;t=a.next())t=t.value,r[t]=n[t];n={__type__:"Error",contents:r}}else if(n instanceof TimeRanges){for(a={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=b(Ur(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,a.start.push(r.start),a.end.push(t);n=a}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function Yp(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=mA(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function mA(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var $v="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),gA="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Qp=["loop","playbackRate"],yA=["pause","play"],dc={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10,isFullyLoaded:1},pc={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Zp={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},zv=[["getConfiguration","configure"]],Vv=[["isTextTrackVisible","setTextTrackVisibility"]],vA="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),xA=["attach","attachCanvas","detach","load","unload"];function Jp(e,t,n,r,a,u,c){var d=this;this.G=e,this.K=c,this.l=new It(t),this.L=n,this.s=!1,this.A=r,this.F=a,this.N=u,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return em(d)},this.C=function(p,S){switch(p=Yp(S),p.type){case"event":var T=p.targetName,k=gy(p.event);d.A(T,k);break;case"update":T=p.update;for(k in T){p=d.g[k]||{};for(var A in T[k])p[A]=T[k][A]}d.s&&(d.L(),d.s=!1);break;case"asyncComplete":if(k=p.id,A=p.error,p=d.i[k],delete d.i[k],p)if(A){k=new re(A.severity,A.category,A.code);for(T in A)k[T]=A[T];p.reject(k)}else p.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,Kl.add(this)}w=Jp.prototype,w.destroy=function(){return Kl.delete(this),tm(this),Ri&&Gv(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},w.fb=function(){return this.h},w.Ff=function(){return this.I},w.init=function(){if(this.G.length)if(h.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.tc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=b(Kl),r=n.next();!r.done;r=n.next()){r=r.value;var a=t;r.j=new en,r.s=!0,mc(r,a)}},function(t){for(var n=b(Kl),r=n.next();!r.done;r=n.next())r=r.value,gc=t=="available",r.l.tc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),gc&&this.l.Y(SA),(e=Ri)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new en,this.s=!0,mc(this,e)):Ri=null}else h.__onGCastApiAvailable!==Wv&&(yc=h.__onGCastApiAvailable||null,h.__onGCastApiAvailable=Wv)},w.Nf=function(e){this.o=e,this.h&&ql(this,{type:"appData",appData:this.o})},w.cast=function(){var e=this;return V(function(t){if(!e.m)throw new re(1,8,8e3);if(!gc)throw new re(1,8,8001);if(e.h)throw new re(1,8,8002);return e.j=new en,chrome.cast.requestSession(function(n){return mc(e,n)},function(n){return Hv(e,n)}),I(t,e.j,0)})};function wA(e){e.h&&chrome.cast.requestSession(function(t){return mc(e,t)},function(t){return Hv(e,t)})}w.Cc=function(){if(this.h){if(tm(this),Ri){Gv(this);try{Ri.stop(function(){},function(){})}catch{}Ri=null}em(this)}},w.get=function(e,t){var n=this;if(e=="video"){if(yA.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(_(De.apply(0,arguments))))}}else if(e=="player"){if(Zp[t]&&!this.get("player","isLive")())return function(){};if(vA.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(_(De.apply(0,arguments))))};if(xA.includes(t))return function(){return n.Ki.apply(n,[e,t].concat(_(De.apply(0,arguments))))};if(dc[t]||pc[t])return function(){return n.g[e][t]}}return this.g[e][t]},w.set=function(e,t,n){this.g[e][t]=n,ql(this,{type:"set",targetName:e,property:t,value:n})};function mc(e,t){var n=e.N();Ri=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),em(e),ql(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function Hv(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new re(2,8,n,t))}w.Ug=function(e,t){ql(this,{type:"call",targetName:e,methodName:t,args:De.apply(2,arguments)})},w.Ki=function(e,t){var n=De.apply(2,arguments),r=new en,a=this.H.toString();this.H++,this.i[a]=r;try{ql(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:a})}catch(u){r.reject(u)}return r};function Gv(e){var t=Ri;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function em(e){var t=Ri?Ri.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};tm(e)}e.h=t,e.I=t?Ri.receiver.friendlyName:"",e.l.tc()}function tm(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new re(1,7,7e3))}}function ql(e,t){t=Fv(t);var n=Ri;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},wt)}catch(r){throw t=new re(2,8,8005,r),n=new He("error",new Map().set("detail",t)),e.A("player",n),e.Cc(),t}}var SA=.02,gc=!1,Ri=null,yc=null,Kl=new Set;function Wv(e){if(yc?h.__onGCastApiAvailable=yc:delete h.__onGCastApiAvailable,yc=null,e)for(var t=b(Kl),n=t.next();!n.done;n=t.next())n.value.init();typeof h.__onGCastApiAvailable=="function"&&h.__onGCastApiAvailable(e)}function Vn(e,t,n,r){r=r===void 0?!1:r,Wt.call(this);var a=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new Jp(n,function(){return Kv(a)},function(){return Yv(a)},function(u,c){return Zv(a,u,c)},function(){return Qv(a)},function(){return qv(a)},r),CA(this)}Q(Vn,Wt),w=Vn.prototype,w.destroy=function(e){return e&&this.g.Cc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Wt.prototype.release.call(this),Promise.all(e)},w.fi=function(){return this.l},w.Vh=function(){return this.s},w.Ah=function(){return this.g.m&&gc},w.fb=function(){return this.g.fb()},w.Ff=function(){return this.g.Ff()},w.cast=function(){var e=this;return V(function(t){return t.g==1?I(t,e.g.cast(),2):e.h?I(t,e.h.bc(),0):t.return()})},w.Nf=function(e){this.g.Nf(e)},w.$i=function(){wA(this.g)},w.Cc=function(){this.g.Cc()},w.Bh=function(e,t){t=t===void 0?!1:t;var n=this;return V(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.Cc(),I(r,n.g.destroy(),2));n.g=null,n.g=new Jp(e,function(){return Kv(n)},function(){return Yv(n)},function(a,u){return Zv(n,a,u)},function(){return Qv(n)},function(){return qv(n)},t),n.g.init(),q(r)})};function CA(e){e.g.init(),e.m=new xt;for(var t=b($v),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(u){e.g.fb()||(u=gy(u),e.j.dispatchEvent(u))});for(var r in xf)e.m.D(e.h,xf[r],function(u){e.g.fb()||e.o.dispatchEvent(u)});e.l={},t={};for(var a in e.i)t={nd:t.nd},t.nd=a,Object.defineProperty(e.l,t.nd,{configurable:!1,enumerable:!0,get:function(u){return function(){return bA(e,u.nd)}}(t),set:function(u){return function(c){var d=u.nd;e.g.fb()?e.g.set("video",d,c):e.i[d]=c}}(t)});e.s={},Xv(e,function(u){Object.defineProperty(e.s,u,{configurable:!1,enumerable:!0,get:function(){return kA(e,u)}})}),TA(e),e.j=new Wt,e.j.me=e.l,e.o=new Wt,e.o.me=e.s}function TA(e){var t=new Map;Xv(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function Xv(e,t){function n(p){return p=="constructor"||typeof r[p]!="function"?!1:!a.has(p)}var r=e.h,a=new Set,u;for(u in r)n(u)&&(a.add(u),t(u,r[u]));for(e=Object.getPrototypeOf(r),u=Object.getPrototypeOf({});e&&e!=u;){for(var c=b(Object.getOwnPropertyNames(e)),d=c.next();!d.done;d=c.next())d=d.value,n(d)&&(a.add(d),t(d,r[d]));e=Object.getPrototypeOf(e)}}function qv(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dc(),startTime:null};e.i.pause();for(var n=b(Qp),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=b(zv),r=n.next();!r.done;r=n.next()){var a=r.value;r=a[1],a=e.h[a[0]](),t.player[r]=a}for(n=b(Vv),r=n.next();!r.done;r=n.next())a=r.value,r=a[1],a=e.h[a[0]](),t.playerAfterLoad[r]=a;return t}function Kv(e){var t=new He("caststatuschanged");e.dispatchEvent(t)}function Yv(e){var t=new He(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Qv(e){for(var t=b(zv),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var a=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var u=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var c;(r=e.g.get("player","getTextTracks")())&&r.length&&(c=r.find(function(S){return S.active}));var d=e.g.get("player","isTextTrackVisible")();a&&(e.i.autoplay=!1,t=e.h.load(a,n));var p={};for(n=b(Qp),r=n.next();!r.done;r=n.next())r=r.value,p[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var S=b(Qp),T=S.next();!T.done;T=S.next())T=T.value,e.i[T]=p[T];for(S=b(Vv),T=S.next();!T.done;T=S.next()){var k=T.value;T=k[1],k=e.g.get("player",k[0])(),e.h[T](k)}e.h.eh(d),c&&e.h.Lf(c.language,c.roles,c.forced),e.i.autoplay=u,a&&e.i.play()}},function(S){S=new Map().set("detail",S),S=new He("error",S),e.h.dispatchEvent(S)})}function bA(e,t){if(t=="addEventListener")return function(r,a,u){return e.j.addEventListener(r,a,u)};if(t=="removeEventListener")return function(r,a,u){return e.j.removeEventListener(r,a,u)};if(e.g.fb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.fb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function kA(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,a){return e.o.addEventListener(n,r,a)};if(t=="removeEventListener")return function(n,r,a){return e.o.removeEventListener(n,r,a)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.xb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.ug()};if(t=="setVideoContainer")return function(n){return e.h.ih(n)};if(e.g.fb()){if(t=="getManifest"||t=="drmInfo")return function(){return je(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return je(t+"() does not work while casting!"),Promise.resolve()}}return e.g.fb()&&Object.keys(e.g.g.video).length==0&&(dc[t]||pc[t])||!e.g.fb()?e.h[t].bind(e.h):e.g.get("player",t)}function Zv(e,t,n){e.g.fb()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}ve("shaka.cast.CastProxy",Vn),Vn.prototype.changeReceiverId=Vn.prototype.Bh,Vn.prototype.forceDisconnect=Vn.prototype.Cc,Vn.prototype.suggestDisconnect=Vn.prototype.$i,Vn.prototype.setAppData=Vn.prototype.Nf,Vn.prototype.cast=Vn.prototype.cast,Vn.prototype.receiverName=Vn.prototype.Ff,Vn.prototype.isCasting=Vn.prototype.fb,Vn.prototype.canCast=Vn.prototype.Ah,Vn.prototype.getPlayer=Vn.prototype.Vh,Vn.prototype.getVideo=Vn.prototype.fi,Vn.prototype.destroy=Vn.prototype.destroy;function po(e,t,n,r){Wt.call(this);var a=this;this.g=e,this.h=t,this.j=new xt,this.H={video:e,player:t},this.F=n||function(){},this.I=r||function(u){return u},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new It(function(){nm(a)}),EA(this)}Q(po,Wt),w=po.prototype,w.isConnected=function(){return this.G},w.mi=function(){return this.o},w.Wi=function(e){this.i=e},w.Dh=function(){this.i=null},w.Xi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},w.Vi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},w.Ui=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},w.destroy=function(){var e=this,t,n;return V(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.s=null,Wt.prototype.release.call(e),I(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),q(r)})};function EA(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Jv(e)},t.onSenderDisconnected=function(){return Jv(e)},t.onSystemVolumeChanged=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();a&&xr(e,{type:"update",update:{video:{volume:a.level,muted:a.muted}}},e.l),xr(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(a){return MA(e,a)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(a){return IA(e,a)},t.start(),t=b($v);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(a){return ex(e,"video",a)});for(var r in xf)e.j.D(e.h,xf[r],function(a){return ex(e,"player",a)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,wa(e)}),e.j.D(e.g,"playing",function(){e.o=!1,wa(e)}),e.j.D(e.g,"pause",function(){wa(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,wa(e)}),e.j.D(e.g,"ended",function(){new It(function(){e.g&&e.g.ended&&(e.o=!0,wa(e))}).Y(RA)})}function Jv(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,wa(e)}function wa(e){var t;V(function(n){if(n.g==1)return I(n,Promise.resolve(),2);if(!e.h)return n.return();t=new He("caststatuschanged"),e.dispatchEvent(t),tx(e)||wr(e),q(n)})}function AA(e,t,n){var r,a,u,c,d,p,S,T,k,A;V(function(E){switch(E.g){case 1:for(r in t.player)a=t.player[r],e.h[r](a);return e.F(n),u=e.g.autoplay,t.manifest?(e.g.autoplay=!1,ee(E,5),I(E,e.h.load(t.manifest,t.startTime),7)):I(E,Promise.resolve(),3);case 7:ne(E,3);break;case 5:return c=Y(E),d=new Map().set("detail",c),p=new He("error",d),e.h&&e.h.dispatchEvent(p),E.return();case 3:if(!e.h)return E.return();for(S in t.video)T=t.video[S],e.g[S]=T;for(k in t.playerAfterLoad)A=t.playerAfterLoad[k],e.h[k](A);e.g.autoplay=u,t.manifest&&(e.g.play(),wr(e)),q(E)}})}function ex(e,t,n){e.h&&(nm(e),xr(e,{type:"event",targetName:t,event:n},e.l))}function nm(e){e.C.Y(_A);for(var t={video:{},player:{}},n=b(gA),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.V())for(var a in Zp)e.m%Zp[a]==0&&(t.player[a]=e.h[a]());for(var u in dc)e.m%dc[u]==0&&(t.player[u]=e.h[u]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),xr(e,{type:"update",update:t},e.l);for(var c in pc)e.m%pc[c]==0&&(t={player:{}},t.player[c]=e.h[c](),xr(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),tx(e)}function tx(e){return e.A&&(e.g.duration||e.h.V())?(om(e),e.A=!1,!0):!1}function om(e,t){var n={contentId:e.h.Dc(),streamType:e.h.V()?"LIVE":"BUFFERED",contentType:""};e.h.V()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),wr(e,t===void 0?0:t,n)}function IA(e,t){var n=Yp(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,AA(e,n.initState,n.appData),nm(e);break;case"appData":e.F(n.appData);break;case"set":var r=n.targetName,a=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),a=="volume"){t.setSystemVolumeLevel(n);break}else if(a=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][a]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,a=n.methodName,r=="player"&&a=="load"&&(e.m=0,e.B=!1);var u=n.id,c=t.senderId;t=e.H[r],n=t[a].apply(t,n.args),r=="player"&&a=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return nx(e,c,u,null)},function(d){return nx(e,c,u,d)})}}function MA(e,t){var n=Yp(t.data);switch(n.type){case"PLAY":e.g.play(),wr(e);break;case"PAUSE":e.g.pause(),wr(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),wr(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),wr(e));break;case"STOP":e.h.bc().then(function(){e.h&&wr(e)});break;case"GET_STATUS":om(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var a=e.g.volume,u=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),a==e.g.volume&&u==e.g.muted||wr(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,a=e.I(t.contentId),u=n.autoplay||!0,e.F(t.customData),u&&(e.g.autoplay=!0),e.h.load(a,r).then(function(){e.h&&om(e)}).catch(function(c){var d="LOAD_FAILED";c.category==7&&c.code==7e3&&(d="LOAD_CANCELLED"),xr(e,{requestId:Number(n.requestId),type:d},e.s)});break;default:xr(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function nx(e,t,n,r){e.h&&xr(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function xr(e,t,n,r){e.G&&(e=Fv(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function wr(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?LA:e.h.pf()?PA:e.g.paused?OA:DA,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),xr(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}ve("shaka.cast.CastReceiver",po),po.prototype.destroy=po.prototype.destroy,po.prototype.setContentArtist=po.prototype.Ui,po.prototype.setContentImage=po.prototype.Vi,po.prototype.setContentTitle=po.prototype.Xi,po.prototype.clearContentMetadata=po.prototype.Dh,po.prototype.setContentMetadata=po.prototype.Wi,po.prototype.isIdle=po.prototype.mi,po.prototype.isConnected=po.prototype.isConnected;var _A=.5,RA=5,LA="IDLE",DA="PLAYING",PA="BUFFERING",OA="PAUSED";function ox(e,t,n,r,a){if(r>=a)return null;for(var u=-1,c=-1,d=0;d<n.length;d++)if(n[d].some(function(O){return O!=null&&O.g.trim()!=""})){u=d;break}for(d=n.length-1;0<=d;d--)if(n[d].some(function(O){return O!=null&&O.g.trim()!=""})){c=d;break}if(u===-1||c===-1)return null;for(var p=d=!1,S="white",T="black",k=im(r,a,d,p,S,T);u<=c;u++){for(var A=n[u],E=-1,R=-1,D=0;D<A.length;D++)if(A[D]!=null&&A[D].g.trim()!==""){E=D;break}for(D=A.length-1;0<=D;D--)if(A[D]!=null&&A[D].g.trim()!==""){R=D;break}if(E===-1||R===-1)A=ix(r,a),e.nestedCues.push(A);else{for(;E<=R;E++)if(D=A[E]){var L=D.l,$=D.i,N=D.j,K=D.h;(L!=d||$!=p||N!=S||K!=T)&&(k.payload&&e.nestedCues.push(k),k=im(r,a,L,$,N,K),d=L,p=$,S=N,T=K),k.payload+=D.g}else k.payload+=" ";k.payload&&e.nestedCues.push(k),u!==c&&(k=ix(r,a),e.nestedCues.push(k)),k=im(r,a,d,p,S,T)}}return e.nestedCues.length?{cue:e,stream:t}:null}function im(e,t,n,r,a,u){return e=new Ct(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=a,e.backgroundColor=u,e}function ix(e,t){return e=new Ct(e,t,""),e.lineBreak=!0,e}function rx(e,t,n,r,a){this.g=e,this.l=t,this.i=n,this.h=r,this.j=a}function rm(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Yl(this)}function vc(e,t,n){var r="CC"+((e.A<<1|e.s)+1),a=new Ct(t,n,"");a.lineInterpretation=1;var u=lx.get(e.g);return u&&(a.line=u),(t=ox(a,r,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(u=lx.get(e.g+3-t.cue.nestedCues.length))&&(a.line=u),t}function Yl(e){Sr(e,0,15),e.g=1}function Sa(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case 0:r=ax.has(n)?ax.get(n):String.fromCharCode(n);break;case 1:r=NA.get(n);break;case 2:e.i[e.g].pop(),r=UA.get(n);break;case 3:e.i[e.g].pop(),r=BA.get(n)}r&&e.i[e.g].push(new rx(r,e.m,e.j,e.o,e.l))}}function sx(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(u){return u});else for(var a=0;a<r;a++)e.i[t+a]=e.i[n+a].map(function(u){return u})}function Sr(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var ax=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),NA=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),UA=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),BA=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),lx=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function xc(e,t){this.h=0,this.o=new rm(e,t),this.i=new rm(e,t),this.g=this.j=new rm(e,t),this.l=0,this.m=null}function sm(e,t,n){e.g=e.i;var r=e.g,a=null;return e.h!==3&&e.h!==4&&(a=vc(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,Sr(n,0,15),n=e.j,n.g=0<n.h?n.h:0,Sr(n,0,15),r.g=15),e.h=3,r.h=t,a}function ux(e){e.h=1,e.g=e.j,e.g.h=0}function fx(e){Dt("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var jA="black green blue cyan red yellow magenta black".split(" "),cx="white green blue cyan red yellow magenta white_italics".split(" ");function hx(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",am(this)}function am(e){e.i=[];for(var t=0;16>t;t++)e.i.push(lm())}function lm(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function gs(e,t){dx(e)&&(e.i[e.h][e.g]=new rx(t,e.C,e.A,e.s,e.B),e.g++)}function dx(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}hx.prototype.isVisible=function(){return this.l};function ys(e,t,n){var r=new Ct(e.j,t,"");r.textAlign=e.F===0?"left":e.F===1?"right":qe;var a=r.region;switch(e.I&&(a.id+="svc"+e.I),a.id+="win"+e.N,a.height=e.o,a.width=e.m,a.heightUnits=2,a.widthUnits=2,a.viewportAnchorX=e.H,a.viewportAnchorY=e.L,a.viewportAnchorUnits=e.K?In:2,e.G){case 0:a.regionAnchorX=0,a.regionAnchorY=0;break;case 1:a.regionAnchorX=50,a.regionAnchorY=0;break;case 2:a.regionAnchorX=100,a.regionAnchorY=0;break;case 3:a.regionAnchorX=0,a.regionAnchorY=50;break;case 4:a.regionAnchorX=50,a.regionAnchorY=50;break;case 5:a.regionAnchorX=100,a.regionAnchorY=50;break;case 6:a.regionAnchorX=0,a.regionAnchorY=100;break;case 7:a.regionAnchorX=50,a.regionAnchorY=100;break;case 8:a.regionAnchorX=100,a.regionAnchorY=100}return(n=ox(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function FA(){this.i=[],this.h=null,this.g=0}function $A(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new wc(e.h)),e.h=null,e.g=0))}function wc(e){this.g=0,this.h=e}wc.prototype.na=function(){return this.g<this.h.length},wc.prototype.va=function(){return this.g};function so(e){if(!e.na())throw new re(2,2,3e3);return e.h[e.g++]}wc.prototype.skip=function(e){if(this.g+e>this.h.length)throw new re(2,2,3e3);this.g+=e};function zA(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function VA(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=so(t).value,t=null,n=b(Ql(e,n));for(var a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()&&(t=ys(a,r,e.i)),am(a);return t}if(n===137)for(t=so(t).value,t=b(Ql(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(n===138){for(n=so(t).value,t=null,n=b(Ql(e,n)),a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()&&(t=ys(a,r,e.i)),a.l=!1;return t}if(n===139){for(n=so(t).value,t=null,n=b(Ql(e,n)),a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()?t=ys(a,r,e.i):a.j=r,a.l=!a.l;return t}if(n===140)return t=so(t).value,px(e,t,r);if(n===143)return r=px(e,255,r),mx(e),r;if(n===144)t.skip(1),r=so(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=so(t).value,n=so(t).value,t.skip(1),e.g&&(t=gx((n&48)>>4,(n&12)>>2,n&3),e.g.B=gx((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=so(t).value,t=so(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=so(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,a=e.h[n]!==null,!a){var u=new hx(n,e.i);u.j=r,e.h[n]=u}r=so(t).value,u=so(t).value;var c=so(t).value,d=so(t).value,p=so(t).value;t=so(t).value,a&&(t&7)===0||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=u&127,t.H=c,t.G=(d&240)>>4,t.K=0<(u&128),t.o=(d&15)+1,t.m=(p&63)+1,e.g=e.h[n]}}}return null}function Ql(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function px(e,t,n){var r=null;t=b(Ql(e,t));for(var a=t.next();!a.done;a=t.next()){a=a.value;var u=e.h[a];u.isVisible()&&(r=ys(u,n,e.i)),e.h[a]=null}return r}function mx(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function gx(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],HA[e<<2|t<<1|n]}var yx=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),HA="black blue green cyan red magenta yellow white".split(" ");function Ca(){this.h=[],this.g=[],this.i=new FA,this.l=0,this.m=new Map([["CC1",new xc(0,0)],["CC2",new xc(0,1)],["CC3",new xc(1,0)],["CC4",new xc(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,um(this)}Ca.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,um(this),e=b(this.j.values());for(var t=e.next();!t.done;t=e.next())mx(t.value)};function um(e){e.o=0,e.s=0;for(var t=b(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Yl(n.i),Yl(n.j),Yl(n.o);e.B=!0}Ca.prototype.extract=function(e,t){if(this.B){for(var n=b(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new nn(e,0),!(8>e.getLength())&&e.T()===181&&e.la()===49&&e.P()===1195456820&&e.T()===3&&(n=e.T(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var a=e.T(),u=(a&4)>>2,c=e.T(),d=e.T();u&&(a&=3,a===0||a===1?this.h.push({pts:t,type:a,bb:c,Cb:d,order:this.h.length}):(this.g.push({pts:t,type:a,value:c,order:this.g.length}),this.g.push({pts:t,type:2,value:d,order:this.g.length})))}},Ca.prototype.decode=function(){function e(a,u){return a.pts-u.pts||a.order-u.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=b(this.h),r=n.next();!r.done;r=n.next())(r=GA(this,r.value))&&t.push(r);for(n=b(this.g),r=n.next();!r.done;r=n.next())$A(this.i,r.value);for(n=b(this.i.i),r=n.next();!r.done;r=n.next())r=WA(this,r.value),t.push.apply(t,_(r));return this.i.i=[],this.h=[],this.g=[],t};function GA(e,t){var n=t.type;if((t.bb&112)===16){var r=t.bb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.bb===255&&t.Cb===255||!t.bb&&!t.Cb||!vx(t.bb)||!vx(t.Cb))return 45<=++e.l&&um(e),null;e.l=0,t.bb&=127,t.Cb&=127;var a=t.bb;if(1<=a&&15>=a||!t.bb&&!t.Cb)return null;if(a=null,(t.bb&112)===16)e:{if(e.A.add(r),r=t.bb,e=t.Cb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1];var u=(e&30)>>1;r="white",a=!1,7>u?r=cx[u]:u===7&&(a=!0),e=(e&1)===1,n.h!==4&&(u=n.g,n.h===3&&t!==u.g&&(n=1+t-u.h,sx(u,n,1+u.g-u.h,u.h),Sr(u,0,n-1),Sr(u,t+1,15-t)),u.g=t,u.m=e,u.j=a,u.l=r,u.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",Sa(n.g,0,32),r=!1,t=cx[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",(r&7)===0&&(t=jA[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)Sa(n.g,1,e);else if((r&246)===18&&(e&224)===32)Sa(n.g,r&1?3:2,e);else if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.Cb){case 32:ux(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=sm(n,2,e);break;case 38:r=sm(n,3,e);break;case 39:r=sm(n,4,e);break;case 40:Sa(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Yl(n.o),fx(n);break;case 43:fx(n);break;case 44:t=n.i,r=null,n.h!==4&&(r=vc(t,n.l,e)),Sr(t,0,15);break;case 45:t=n.g,n.h!==3?r=null:(r=vc(t,n.l,e),a=t.g-t.h+1,sx(t,a-1,a,t.h),Sr(t,0,a-1),Sr(t,t.g,15-t.g),n.l=e);break;case 46:Sr(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=vc(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,ux(n),n.l=e,r=t}a=r;break e}a=null}else e=t.Cb,Sa(n.g,0,t.bb),Sa(n.g,0,e);return a}function WA(e,t){var n=[];try{for(;t.na();){var r=so(t).value,a=(r&224)>>5,u=r&31;if(a===7&&u!=0&&(a=so(t).value&63),a!=0){e.A.add("svc"+a),e.j.has(a)||e.j.set(a,new zA(a));for(var c=e.j.get(a),d=t.va();t.va()-d<u;){a=c;var p=t,S=so(p),T=S.value,k=S.pts;if(T===16){var A=so(p);T=T<<16|A.value}if(0<=T&&31>=T){p=a;var E=T,R=k;if(p.g){var D=p.g;switch(a=null,E){case 8:!dx(D)||0>=D.g&&0>=D.h||(0>=D.g?(D.g=D.m-1,D.h--):D.g--,D.i[D.h][D.g]=null);break;case 13:if(D.isVisible()&&(a=ys(D,R,p.i)),D.h+1>=D.o){for(p=D,E=0,R=1;16>R;R++,E++)p.i[E]=p.i[R];for(R=0;1>R;R++,E++)p.i[E]=lm()}else D.h++;D.g=0;break;case 14:D.isVisible()&&(a=ys(D,R,p.i)),D.i[D.h]=lm(),D.g=0;break;case 12:D.isVisible()&&(a=ys(D,R,p.i)),am(D),p=D,p.h=0,p.g=0}var L=a}else L=null}else if(128<=T&&159>=T)L=VA(a,p,T,k);else{if(4096<=T&&4127>=T)a=p,p=T&255,8<=p&&15>=p?a.skip(1):16<=p&&23>=p?a.skip(2):24<=p&&31>=p&&a.skip(3);else if(4224<=T&&4255>=T)a=p,p=T&255,128<=p&&135>=p?a.skip(4):136<=p&&143>=p&&a.skip(5);else if(32<=T&&127>=T)p=T,a.g&&(p===127?gs(a.g,"♪"):gs(a.g,String.fromCharCode(p)));else if(160<=T&&255>=T)a.g&&gs(a.g,String.fromCharCode(T));else if(4128<=T&&4223>=T){if(p=T&255,a.g)if(yx.has(p)){var $=yx.get(p);gs(a.g,$)}else gs(a.g,"_")}else 4256<=T&&4351>=T&&a.g&&((T&255)!=160?gs(a.g,"_"):gs(a.g,"[CC]"));L=null}(a=L)&&n.push(a)}}}}catch(N){if(N instanceof re&&N.code===3e3)Dt("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw N}return n}function vx(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}Ca.prototype.getStreams=function(){return Array.from(this.A)},ve("shaka.cea.CeaDecoder",Ca),no=function(){return new Ca};function xx(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(_(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var a=0;e[r]==255;)a+=255,r++;a+=e[r++],n==4&&t.push(e.subarray(r,r+a)),r+=a}return t}function Sc(){this.j=new Map,this.i=this.h=0,this.g=fm}Sc.prototype.init=function(e){function t(u){u=u.name,u in Cc&&(n.g=Cc[u])}var n=this,r=[],a=[];if(new on().box("moov",_t).box("mvex",_t).S("trex",function(u){var c=u.reader;c.skip(4),c.skip(4),u=c.P(),c=c.P(),n.h=u,n.i=c}).box("trak",_t).S("tkhd",function(u){var c=u.reader;u=u.version,u==1?(c.skip(8),c.skip(8)):(c.skip(4),c.skip(4));var d=c.P();u==1?c.skip(8):c.skip(4),c.skip(4),c.skip(8),c.skip(2),c.skip(2),c.skip(2),c.skip(2),c.skip(36),c.la(),c.la(),c.la(),c.la(),r.push(d)}).box("mdia",_t).S("mdhd",function(u){u=Rf(u.reader,u.version),a.push(u.timescale)}).box("minf",_t).box("stbl",_t).S("stsd",Pr).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",Fo).box("sinf",_t).box("frma",function(u){u=i1(u.reader).codec,u in Cc&&(n.g=Cc[u])}).parse(e,!0),!r.length||!a.length||r.length!=a.length)throw new re(2,2,2010);this.g==fm&&je("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(u,c){n.j.set(u,a[c])})},Sc.prototype.parse=function(e){var t=this;if(this.g==fm)return[];var n=[],r=0,a=[];return new on().box("moof",function(u){r=u.start,a=[],_t(u)}).box("traf",function(u){a.push({baseMediaDecodeTime:null,Yc:t.h,Id:t.i,Og:[],timescale:9e4}),_t(u)}).S("trun",function(u){var c=a[a.length-1];u=n1(u.reader,u.version,u.flags),c.Og.push(u)}).S("tfhd",function(u){var c=a[a.length-1];u=t1(u.reader,u.flags),c.Yc=u.Yc||t.h,c.Id=u.Id||t.i,u=u.trackId,t.j.has(u)&&(c.timescale=t.j.get(u))}).S("tfdt",function(u){var c=a[a.length-1];u=_f(u.reader,u.version),c.baseMediaDecodeTime=u.baseMediaDecodeTime}).box("mdat",function(u){for(var c=r-u.start-8,d=u.reader.va(),p=b(a),S=p.next();!S.done;S=p.next()){if(S=S.value,S.baseMediaDecodeTime===null)throw je("Unable to find base media decode time for CEA captions!"),new re(2,2,2010);u.reader.seek(d),XA(t,u.reader,S.baseMediaDecodeTime,S.timescale,S.Yc,S.Id,c,S.Og,n)}}).parse(e,!1),n};function XA(e,t,n,r,a,u,c,d,p){var S=0,T=u,k=d.map(function(R){return R.Wg});for(k=[].concat.apply([],_(k)),k.length&&(T=k[0].sampleSize||u),t.skip(c+d[0].Fh);t.na();){c=t.P();var A=t.T(),E=null;switch(E=!1,d=1,e.g){case Zl:E=A&31,E=E==6;break;case Jl:d=2,t.skip(1),E=A>>1&63,E=E==39||E==40;break;case eu:d=2,t.skip(1),E=A>>1&63,E=E==23||E==24;break;default:return}if(E)for(A=0,S<k.length&&(A=k[S].ne||0),A=(n+A)/r,d=b(xx(t.qb(c-d))),E=d.next();!E.done;E=d.next())p.push({packet:E.value,pts:A});else try{t.skip(c-d)}catch{break}T-=c+4,T==0&&(n=S<k.length?n+(k[S].Jf||a):n+a,S++,S<k.length?T=k[S].sampleSize||u:T=u)}}ve("shaka.cea.Mp4CeaParser",Sc);var fm=0,Zl=1,Jl=2,eu=3,Cc={avc1:Zl,avc3:Zl,dvav:Zl,dva1:Zl,hev1:Jl,hvc1:Jl,dvh1:Jl,dvhe:Jl,vvc1:eu,vvi1:eu,dvc1:eu,dvi1:eu};$n["video/mp4"]=function(){return new Sc};function Tc(){this.g=null}Tc.prototype.init=function(){},Tc.prototype.parse=function(e){this.g?this.g.clearData():this.g=new an;var t=[];if(e=st(e),!Ll(e))return t;e=this.g.parse(e);var n=e.$c(),r=e.Pd();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=b(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var a=b(xx(r.data)),u=a.next();!u.done;u=a.next())t.push({packet:u.value,pts:r.time});return t},ve("shaka.cea.TsCeaParser",Tc),$n["video/mp2t"]=function(){return new Tc};function wx(e,t,n){var r=ZA(e),a=null;e=[];var u=[],c=null,d=new Set(r.map(function(S){return S.keyId}));d.delete(null);var p="cenc";if(1<d.size)throw new re(2,4,4010);if(!t){if(u=r.filter(function(S){return S.Pc=="urn:mpeg:dash:sea:2012"}),1<u.length)throw new re(2,4,4050);u.length&&(c=e4(u[0])),(u=r.find(function(S){return S.Pc=="urn:mpeg:dash:mp4protection:2011"}))&&u.encryptionScheme&&(p=u.encryptionScheme),u=r.filter(function(S){return S.Pc=="urn:mpeg:dash:mp4protection:2011"?(a=S.init||a,!1):S.Pc!="urn:mpeg:dash:sea:2012"}),u.length&&(e=QA(a,p,u,n,d),e.length==0&&(e=[rs("",p,a)]))}if(r.length&&!c&&(t||!u.length))for(e=[],t=b(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(rs(n,p,a));if(d=Array.from(d)[0]||null)for(p=b(e),t=p.next();!t.done;t=p.next())for(t=b(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=d;return{pg:d,dk:a,drmInfos:e,Fe:c,tg:!0}}function qA(e,t,n,r){var a=wx(e,n,r);if(t.tg)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=a.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=a.drmInfos),t.tg=!1;else if(0<a.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(u){return a.drmInfos.some(function(c){return c.keySystem==u.keySystem})}),t.drmInfos.length==0))throw new re(2,4,4008);return a.pg||t.pg}function KA(e){var t=0,n=hn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var a=n.getUint16(e,!0);if(e+=2,(a&1)!=0||a+e>n.byteLength){n=[];break e}var u=st(n,e,a);t.push({type:r,value:u}),e+=a}n=t}return n}function YA(e){e=b(Ii(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=b(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return qn(n)}return""}function bc(e){var t=cr(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=qn(t))?t:(e=cr(e.node,"urn:microsoft:playready","pro"),!e||!qn(e)||(e=qn(e),e=pi(e),e=KA(e).filter(function(n){return n.type===t4})[0],!e)?"":(e=rr(e.value,!0),(e=Js(e,"WRMHEADER"))?YA(e):""))}function QA(e,t,n,r,a){var u=[];n=b(n);for(var c=n.next();!c.done;c=n.next()){c=c.value;var d=r[c.Pc];if(d){var p;if((p=cr(c.node,"urn:microsoft:playready","pro"))&&qn(p)){p=qn(p),p=pi(p);var S=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);p=[{initData:Tf(p,S,new Set,0),initDataType:"cenc",keyId:c.keyId}]}else p=null;if(S=null,c.Pc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){S=c;var T=a;if(T.size==0)S=null;else{var k=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),A=new Uint8Array([]);S=[{initData:Tf(A,k,T,1),initDataType:"cenc",keyId:S.keyId}]}}p=rs(d,t,c.init||e||p||S),(d=n4.get(d))&&(p.licenseServerUri=d(c)),u.push(p)}}return u}function ZA(e){var t=[];e=b(e);for(var n=e.next();!n.done;n=e.next())(n=JA(n.value))&&t.push(n);return t}function JA(e){var t=e.attributes.schemeIdUri,n=hr(e,"urn:mpeg:cenc:2013","default_KID"),r=Ay(e,"urn:mpeg:cenc:2013","pssh").map(Ai),a=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new re(2,4,4009);var u=[];try{u=r.map(function(c){return{initDataType:"cenc",initData:pi(c),keyId:null}})}catch{throw new re(2,4,4007)}return{node:e,Pc:t,keyId:n,init:0<u.length?u:null,encryptionScheme:a}}function e4(e){if(!h.crypto||!h.crypto.subtle)throw je("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new re(2,4,4042);var t=cr(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new re(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new re(2,4,4051);if(t=cr(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new re(2,4,4051);if(e=t.attributes.IV,t=Ro(t.attributes.keyUriTemplate),!e||!t)throw new re(2,4,4051);if(e=is(e.substr(2)),e.byteLength!=16)throw new re(2,4,4048);return{ti:t,iv:e}}var t4=1,n4=new Map().set("com.widevine.alpha",function(e){var t=cr(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=qn(t))?t:(e=cr(e.node,"urn:microsoft","laurl"))&&Ro(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",bc).set("com.microsoft.playready.recommendation",bc).set("com.microsoft.playready.software",bc).set("com.microsoft.playready.hardware",bc).set("org.w3.clearkey",function(e){var t=cr(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=qn(t))?t:(e=cr(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=qn(e))?e:""});function kc(e,t,n,r,a,u){var c={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:a,Time:u};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(d,p,S,T){if(d=="$$")return"$";var k=c[p];if(k==null)return d;switch(p=="RepresentationID"&&S&&(S=void 0),p=="Time"&&typeof k!="bigint"&&(.2<=Math.abs(k-Math.round(k))&&je("Calculated $Time$ values must be close to integers"),k=Math.round(k)),T){case void 0:case"d":case"i":case"u":d=k.toString();break;case"o":d=k.toString(8);break;case"x":d=k.toString(16);break;case"X":d=k.toString(16).toUpperCase();break;default:d=k.toString()}return S=h.parseInt(S,10)||1,Array(Math.max(0,S-d.length)+1).join("0")+d})}function Sx(e,t){var n=Vi(e,t,"timescale"),r=1;n&&(r=dr(n)||1),n=Vi(e,t,"duration"),(n=dr(n||""))&&(n/=r);var a=Vi(e,t,"startNumber"),u=Number(Vi(e,t,"presentationTimeOffset"))||0,c=To(a||"");if((a==null||c==null)&&(c=1),a=null,t=Ta(e,t,"SegmentTimeline")){t=sn(t,"S"),a=r,e=e.ka.duration||1/0;for(var d=c,p=[],S=-u,T=0;T<t.length;++T){var k=t[T],A=t[T+1],E=Ut(k,"t",To),R=Ut(k,"d",To),D=Ut(k,"r",Ef);if(k=Ut(k,"k",Ef)||0,E!=null&&(E-=u),R){if(E=E??S,D=D||0,0>D)if(A){if(A=Ut(A,"t",To),A==null)break;if(E>=A)break;D=Math.ceil((A-E)/R)-1}else{if(e==1/0)break;if(E/a>=e)break;D=Math.ceil((e*a-E)/R)-1}for(0<p.length&&E!=S&&(p[p.length-1].end=E/a),A=0;A<=D;++A)S=E+R,p.push({start:E/a,end:S/a,$f:E,zb:k,Si:p.length+d}),E=S}}a=p}return{timescale:r,La:n,vd:c,Nb:u/r||0,Zf:u,timeline:a}}function Cx(e,t){return[t(e.J),t(e.ja),t(e.ta)].filter(as)}function Vi(e,t,n){t=Cx(e,t),e=null,t=b(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function Ta(e,t,n){t=Cx(e,t),e=null,t=b(t);for(var r=t.next();!r.done&&!(e=Mi(r.value,n));r=t.next());return e}function o4(e,t,n,r,a,u){for(var c=hr(e,"http://www.w3.org/1999/xlink","href"),d=hr(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",p=b(Object.keys(e.attributes)),S=p.next();!S.done;S=p.next()){S=S.value;var T=S.split(":"),k=Hd("http://www.w3.org/1999/xlink");T[0]==k&&delete e.attributes[S]}if(5<=u)return us(new re(2,4,4028));if(d!="onLoad")return us(new re(2,4,4027));var A=ho([r],[c]);return a.request(0,oo(A,t)).Aa(function(E){if(E=Vd(E.data,e.tagName),!E)return us(new re(2,4,4001,c));for(e.children=[];E.children.length;){var R=E.children.shift();R.tagName&&(R.parent=e),e.children.push(R)}R=b(Object.keys(E.attributes));for(var D=R.next();!D.done;D=R.next())D=D.value,e.attributes[D]=E.attributes[D];return Ec(e,t,n,A[0],a,u+1)})}function Ec(e,t,n,r,a,u){if(u=u===void 0?0:u,hr(e,"http://www.w3.org/1999/xlink","href")){var c=o4(e,t,n,r,a,u);return n&&(c=c.Aa(void 0,function(){return Ec(e,t,n,r,a,u)})),c}c=[];for(var d=b(Ey(e)),p=d.next(),S={};!p.done;S={Uc:void 0},p=d.next())S.Uc=p.value,hr(S.Uc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(T){return function(k){return k!==T.Uc}}(S)):S.Uc.tagName!="SegmentTimeline"&&c.push(Ec(S.Uc,t,n,r,a,u));return my(c).Aa(function(){return e})}function i4(e,t,n,r,a,u,c){var d,p=new on().S("sidx",function(S){d=r4(t,r,a,u,c,n,S)});if(e&&p.parse(e),d)return d;throw new re(2,3,3004)}function r4(e,t,n,r,a,u,c){var d=[];c.reader.skip(4);var p=c.reader.P();if(p==0)throw new re(2,3,3005);if(c.version==0)var S=c.reader.P(),T=c.reader.P();else S=c.reader.Nc(),T=c.reader.Nc();c.reader.skip(2);var k=c.reader.la();for(e=e+c.size+T,T=0;T<k;T++){var A=c.reader.P(),E=(A&2147483648)>>>31;A&=2147483647;var R=c.reader.P();if(c.reader.skip(4),E==1)throw new re(2,3,3006);d.push(new ct(S/p+n,(S+R)/p+n,function(){return u},e,e+A-1,t,n,r,a)),S+=R,e+=A}return c.parser.stop(),d}function Fr(e){this.h=hn(e),this.g=new nn(this.h,0)}Fr.prototype.na=function(){return this.g.na()};function Cr(e){var t=Tx(e);if(7<t.length)throw new re(2,3,3002);var n=0;t=b(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=Tx(e);e:{r=b(s4);for(var a=r.next();!a.done;a=r.next())if(Kn(t,new Uint8Array(a.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.va();else{if(t.length==8&&t[1]&224)throw new re(2,3,3001);for(a=r=0;a<t.length;a++){var u=t[a];r=a==0?u&(1<<8-t.length)-1:256*r+u}t=r}return t=e.g.va()+t<=e.h.byteLength?t:e.h.byteLength-e.g.va(),r=hn(e.h,e.g.va(),t),e.g.skip(t),new a4(n,r)}function Tx(e){var t=e.g.va(),n=e.g.T();if(n==0)throw new re(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),st(e.h,t,n)}var s4=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function a4(e,t){this.id=e,this.g=t}function cm(e){if(8<e.g.byteLength)throw new re(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new re(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function l4(e,t,n,r,a,u,c,d,p){function S(){return a}var T=[];e=new Fr(e.g);for(var k=null,A=null;e.na();){var E=Cr(e);if(E.id==187){var R=u4(E);R&&(E=n*R.dj,R=t+R.Ii,k!=null&&T.push(new ct(k+c,E+c,S,A,R-1,u,c,d,p)),k=E,A=R)}}return k!=null&&T.push(new ct(k+c,r+c,S,A,null,u,c,d,p)),T}function u4(e){var t=new Fr(e.g);if(e=Cr(t),e.id!=179)throw new re(2,3,3013);if(e=cm(e),t=Cr(t),t.id!=183)throw new re(2,3,3012);t=new Fr(t.g);for(var n=0;t.na();){var r=Cr(t);if(r.id==241){n=cm(r);break}}return{dj:e,Ii:n}}function bx(e,t,n){if(t=Ta(e,t,"Initialization"),!t)return null;var r=e.J.Ga(),a=t.attributes.sourceURL;a&&(r=ho(r,[Ro(a)])),a=0;var u=null;return(t=Ut(t,"range",kf))&&(a=t.start,u=t.end),n=new $o(function(){return r},a,u,Ix(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function f4(e,t,n){var r=Number(Vi(e,ba,"presentationTimeOffset"))||0,a=Vi(e,ba,"timescale"),u=1;a&&(u=dr(a)||1);var c=r/u||0,d=bx(e,ba,n);c4(e,d);var p=Pd(e);return{fc:function(){var S=Ta(p,ba,"RepresentationIndex"),T=p.J.Ga();return S&&(S=Ro(S.attributes.sourceURL))&&(T=ho(T,[S])),S=Ex(p),kx(p,t,d,T,S.start,S.end,c)}}}function kx(e,t,n,r,a,u,c){var d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se;return V(function(ye){if(ye.g==1)return d=e.presentationTimeline,p=!e.vb||!e.ka.ld,S=e.ka.start,T=e.ka.duration,k=e.J.mimeType.split("/")[1],A=t,E=null,R=[A(r,a,u,!1),k=="webm"?A(n.M(),n.Ha,n.sa,!0):null],A=null,I(ye,Promise.all(R),2);if(D=ye.h,L=D[0],$=D[1]||null,N=null,K=S-c,O=S,H=T?S+T:1/0,k=="mp4")var le=i4(L,a,r,n,K,O,H);else{le=L;var ue=new Fr($);if(Cr(ue).id!=440786851)throw new re(2,3,3008);var ce=Cr(ue);if(ce.id!=408125543)throw new re(2,3,3009);ue=ce.g.byteOffset,ce=new Fr(ce.g);for(var Ee=null;ce.na();){var Te=Cr(ce);if(Te.id==357149030){Ee=Te;break}}if(!Ee)throw new re(2,3,3010);for(Ee=new Fr(Ee.g),Te=1e6,ce=null;Ee.na();){var Ae=Cr(Ee);if(Ae.id==2807729)Te=cm(Ae);else if(Ae.id==17545)if(Ae.g.byteLength==4)ce=Ae.g.getFloat32(0);else if(Ae.g.byteLength==8)ce=Ae.g.getFloat64(0);else throw new re(2,3,3003)}if(ce==null)throw new re(2,3,3011);if(Ee=Te/1e9,ce*=Ee,le=Cr(new Fr(le)),le.id!=475249515)throw new re(2,3,3007);le=l4(le,ue,Ee,ce,r,n,K,O,H)}for(N=le,J=b(N),oe=J.next();!oe.done;oe=J.next())se=oe.value,se.codecs=e.J.codecs,se.mimeType=e.J.mimeType;return d.sd(N),E=new $t(N),p&&E.Bc(O,H,!0),ye.return(E)})}function ba(e){return e.Rc}function Ex(e){var t=Ta(e,ba,"RepresentationIndex");return e=Vi(e,ba,"indexRange"),e=kf(e||""),t&&(e=Ut(t,"range",kf,e)),e}function c4(e,t){if(Ax(e,t),!Ex(e))throw new re(2,4,4002)}function Ax(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=Nt&&n!="mp4"&&n!="webm")throw new re(2,4,4006);if(n=="webm"&&!t)throw new re(2,4,4005)}function Ix(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Jc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ja.label||null,roles:e.roles||null,language:e.ja.language||null}}function h4(e,t,n){var r=bx(e,Mx,n),a=d4(e);if(!a.La&&!a.timeline&&1<a.Ic.length)throw new re(2,4,4002);if(!a.La&&!e.ka.duration&&!a.timeline&&a.Ic.length==1)throw new re(2,4,4002);if(a.timeline&&a.timeline.length==0)throw new re(2,4,4002);var u=null,c=null;e.ta.id&&e.J.id&&(c=t[e.ta.id+","+e.J.id])&&(u=c.segmentIndex);var d=p4(e.ka.start,e.ka.duration,e.J.Ga,a,r,n,e.J.mimeType,e.J.codecs);return t=!u,u?u.rd(d,e.presentationTimeline.mb()):u=new $t(d),e.presentationTimeline.sd(d),e.vb&&e.ka.ld||u.Bc(e.ka.start,e.ka.duration?e.ka.start+e.ka.duration:1/0,t),c&&(c.segmentIndex=u),{fc:function(){return u&&u.getNumReferences()!=0||u.Zd(d),Promise.resolve(u)}}}function Mx(e){return e.Pb}function d4(e){var t=m4(e);e=Sx(e,Mx);var n=e.vd;n==0&&(n=1);var r=0;return e.La?r=e.La*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{La:e.La,startTime:r,vd:n,Nb:e.Nb,timeline:e.timeline,Ic:t}}function p4(e,t,n,r,a,u,c,d){var p=r.Ic.length;r.timeline&&r.timeline.length!=r.Ic.length&&(p=Math.min(r.timeline.length,r.Ic.length));for(var S=e-r.Nb,T=t?e+t:1/0,k=[],A=r.startTime,E={},R=0;R<p;E={ve:void 0,oe:void 0},R++){E.oe=r.Ic[R];var D=A;A=void 0,A=r.La!=null?D+r.La:r.timeline?r.timeline[R].end:D+t,E.ve=null,E=new ct(e+D,e+A,function(L){return function(){return L.ve==null&&(L.ve=ho(n(),[L.oe.zi])),L.ve}}(E),E.oe.start,E.oe.end,a,S,e,T,[],"",null,null,Nr,u),E.codecs=d,E.mimeType=c,k.push(E)}return k}function m4(e){return[e.J.Pb,e.ja.Pb,e.ta.Pb].filter(as).map(function(t){return sn(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.lf&&(e.lf=!0);var n=Ro(t.attributes.media);return t=Ut(t,"mediaRange",kf,{start:0,end:null}),{zi:n,start:t.start,end:t.end}})}function _x(e,t,n,r,a,u,c,d,p){p||e.J.Gc||(e.J.Gc=Vi(e,vs,"initialization"));var S=e.J.Gc?x4(e,c):null,T=g4(e);y4(T);var k=Pd(e);if(T.jd)return Ax(e,S),{fc:function(){var L=kc(T.jd,k.J.id,null,null,k.bandwidth||null,null);return L=ho(k.J.Ga(),[L]),kx(k,t,S,L,0,null,T.Nb)}};if(T.La)return r||e.ja.contentType==="image"||(e.presentationTimeline.xf(T.La),e.presentationTimeline.ce(e.ka.start)),{fc:function(){return v4(k,T,a,S,u,c,d)}};var A=null;r=r=null,e.ta.id&&e.J.id&&(r=e.ta.id+","+e.J.id,r=n[r])&&(A=r.segmentIndex);var E=e.ka.start,R=e.ka.duration?E+e.ka.duration:1/0,D=!(e.vb&&e.ka.ld);return A?(n=A,Rx(n,T,E,R,D,S),n.Ma(e.presentationTimeline.mb())):A=new Ac(T,e.J.id,e.bandwidth,e.J.Ga,E,R,S,D,c,e.J.Kf),T.timeline&&e.ja.contentType!=="image"&&e.presentationTimeline.Ng(T.timeline,E),r&&e.vb&&(r.segmentIndex=A),{fc:function(){return A instanceof Ac&&A.getNumReferences()==0&&Rx(A,T,E,R,D,S),Promise.resolve(A)}}}function vs(e){return e.$b}function g4(e){var t=Sx(e,vs),n=Vi(e,vs,"media"),r=Vi(e,vs,"index");return{La:t.La,timescale:t.timescale,vd:t.vd,Nb:t.Nb,Zf:t.Zf,timeline:t.timeline,Zb:n&&Ro(n),jd:r,mimeType:e.J.mimeType,codecs:e.J.codecs}}function y4(e){var t=e.jd?1:0;if(t+=e.timeline?1:0,t+=e.La?1:0,t==0)throw new re(2,4,4002);if(t!=1&&(e.jd&&(e.timeline=null),e.La=null),!e.jd&&!e.Zb)throw new re(2,4,4002)}function v4(e,t,n,r,a,u,c){function d(ue){var ce=(ue-D)*R,Ee=ce+t.Nb,Te=ce+k;ce=Te+R;var Ae=Math.min(ce,S());return Te=new ct(Te,Ae,function(){var Oe=Ee*L;return"BigInt"in h&&Oe>Number.MAX_SAFE_INTEGER&&(Oe=BigInt(Ee)*BigInt(L)),Oe=kc($,K,ue,null,N,Oe),ho(O(),[Oe])},0,null,r,H,k,S(),[],"",null,null,Nr,u),Te.codecs=e.J.codecs,Te.mimeType=e.J.mimeType,Te.j=ce,Te}function p(){var ue=[Math.max(T.mb(),k),Math.min(T.Wb(),S())].map(function(ce){return ce-k});return ue=[Math.ceil(ue[0]/R),Math.ceil(ue[1]/R)-1],e.J.Ia&&ue[1]++,ue.map(function(ce){return ce+D})}function S(){var ue=A!=null&&a[A]||E;return ue?k+ue:1/0}var T=e.presentationTimeline,k=e.ka.start,A=e.ta.id,E=e.ka.duration,R=t.La,D=t.vd,L=t.timescale,$=t.Zb,N=e.bandwidth||null,K=e.J.id,O=e.J.Ga,H=k-t.Nb,J=p();n=e.vb?Math.max(J[0],J[1]-n+1):J[0],c=c||J[1],J=[];for(var oe=n;oe<=c;++oe){var se=d(oe);J.push(se)}var ye=new $t(J);if(J=T.Wb()<S(),oe=T.V(),J||oe){var le=Math.max(n,c+1);n=R,e.J.Ia&&(n=.1),ye.ue(n,function(){var ue=T.mb();ye.Ma(ue);var ce=b(p());ce.next(),ce=ce.next().value;for(var Ee=[];le<=ce;){var Te=d(le);Ee.push(Te),le++}return ue>S()&&!Ee.length?null:Ee})}return Promise.resolve(ye)}function x4(e,t){var n=e.J.Gc;if(n||(n=Vi(e,vs,"initialization")),!n)return null;n=Ro(n);var r=e.J.id,a=e.bandwidth||null,u=e.J.Ga;return t=new $o(function(){var c=kc(n,r,null,null,a,null);return ho(u(),[c])},0,null,Ix(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function Ac(e,t,n,r,a,u,c,d,p,S){$t.call(this,[]),this.g=e,this.C=t,this.A=n,this.B=r,this.h=a,this.j=u,this.o=c,this.s=p,this.F=S,d&&Lx(this)}Q(Ac,$t),w=Ac.prototype,w.getNumReferences=function(){return this.g?this.g.timeline.length:0},w.release=function(){$t.prototype.release.call(this),this.g=null},w.Ma=function(e){if(this.g){for(var t=0,n=this.g.timeline,r=0;r<n.length&&n[r].end+this.h<=e;r+=1)t+=1;0<t&&(this.g.timeline=n.slice(t),this.O.length>=t&&(this.O=this.O.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function Rx(e,t,n,r,a,u){if(w4(e,u),e.g){if(n=e.g.timeline,e.g.Zb!==t.Zb&&(e.g.Zb=t.Zb),n.length){var c=n[n.length-1];t=t.timeline.filter(function(d){return d.start>=c.end})}else t=t.timeline.slice();0<t.length&&e.g.timeline.push.apply(e.g.timeline,_(t)),e.j!==r&&(e.j=r)}else e.g=t,e.h=n,e.j=r;a&&Lx(e)}function w4(e,t){if(e.o!==t){e.o=t,e=b(e.O);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&Yy(n,t)}}function Lx(e){if(!e.m){for(var t=e.g.timeline;t.length&&t[t.length-1].start>=e.j;)t.pop();e.Ma(e.h)}}w.find=function(e){if(this.g&&this.g.timeline&&this.g.timeline.length&&e<this.g.timeline[0].start+this.h)return this.i;if(!this.g)return null;var t=this.g.timeline;if(e<this.h||e>=this.j)return null;for(var n=t.length-1,r=0;r<t.length;r++){var a=t[r],u=a.start+this.h;if(a=r<n?t[r+1].start+this.h:this.j===1/0?a.end+this.h:this.j,e>=u&&e<a)return r+this.i}return null},w.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.g)return null;var n=this.O[e];if(!n){var r=this.g.timeline[e],a=r.Si,u=this.g.Zf+r.$f;n=this.h-this.g.Nb;var c=this.h+r.end,d=c;e===this.getNumReferences()-1&&this.j!==1/0&&(d=this.j);for(var p=this.g.codecs,S=this.g.mimeType,T=[],k=(r.end-r.start)/r.zb,A={},E=0;E<r.zb;A={we:void 0,kh:void 0},E++){var R=r.start+k*E,D=R+k;A.kh=E+1,A.we=null,A=new ct(this.h+R,this.h+D,function(L){return function(){return t.g?(L.we==null&&(L.we=Dx(t.g.Zb,t.C,a,t.A,u,L.kh,t.B)),L.we):[]}}(A),0,null,this.o,n,this.h,this.j,[],"",null,null,Nr,this.s),A.codecs=p,A.mimeType=S,this.F==0?0<E&&A.Xd():E%this.F!=0&&A.Xd(),T.push(A)}n=new ct(this.h+r.start,d,function(){return 0<r.zb||!t.g?[]:Dx(t.g.Zb,t.C,a,t.A,u,null,t.B)},0,null,this.o,n,this.h,this.j,T,"",null,null,Nr,this.s,0<r.zb),n.codecs=p,n.mimeType=S,n.j=c,this.O[e]=n}return n};function Dx(e,t,n,r,a,u,c){return e=kc(e,t,n,u,r||null,a),ho(c(),[e]).map(function(d){return d.toString()})}function ka(e){this.o=null,this.A=e,this.G=new Ks,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}ka.prototype.configure=function(e){this.o=e},ka.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},ka.prototype.setManifestType=function(e){this.s=e};function tu(e,t){var n,r,a,u,c,d,p;return V(function(S){if(S.g==1)return n=ho(e.i,[S4(e,t)]),r=oo(n,e.o.retryParameters),a=e.A.networkingEngine.request(8,r),fs(e.G,a),ee(S,2),I(S,a.promise,4);if(S.g!=2)return u=S.h,c=dn(u.data),d=JSON.parse(c),d.VERSION==1&&C4(e,d,u.uri),ne(S,0);if((p=Y(S))&&p.code==7001)return S.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new It(function(){tu(e,t)}),e.g.Y(e.C),q(S)})}function S4(e,t){if(!e.m.length)return t;t=new Sn(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),a=t.g;return e.s=="DASH"?(a.add("_DASH_pathway",n),a.add("_DASH_throughput",String(r))):e.s=="HLS"&&(a.add("_HLS_pathway",n),a.add("_HLS_throughput",String(r))),Lg(a)&&Ni(t,a),t.toString()}function C4(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new It(function(){tu(e,r)}),(n=t.TTL)&&(e.C=n),e.g.Y(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function Ea(e,t,n,r){var a=e.l.get(t);a||(a=new Map),a.set(n,r),e.l.set(t,a)}ka.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function nu(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],a=b(e.m),u=a.next(),c={};!u.done;c={Lc:void 0},u=a.next())if(c.Lc=u.value,u=t.get(c.Lc))r.push({Df:c.Lc,location:u});else if(u=e.F.find(function(p){return function(S){return S.wj==p.Lc}}(c))){var d=t.get(u["BASE-ID"]);d&&(u["URI-REPLACEMENT"].rh?(d=new Sn(d),kt(d,u["URI-REPLACEMENT"].rh),r.push({Df:c.Lc,location:d.toString()})):r.push({Df:c.Lc,location:d}))}for(a=Date.now(),c=b(e.j.keys()),u=c.next();!u.done;u=c.next())u=u.value,d=e.j.get(u),a>d&&e.j.delete(u);if(r=r.filter(function(p){for(var S=b(e.j.keys()),T=S.next();!T.done;T=S.next())if(T.value.includes(new Sn(p.location).Eb))return!1;return!0}),r.length&&(e.B=r[0].Df),r=r.map(function(p){return p.location}),!r.length&&e.h)for(a=b(e.h.split(",")),c=a.next();!c.done;c=a.next())(c=t.get(c.value))&&(e.B=e.h,r.push(c));if(!r.length)for(t=b(t.values()),a=t.next();!a.done;a=t.next())r.push(a.value);return n?r:ho(e.i,r)}function Oo(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.s=this.o=!1,this.m=new Set}w=Oo.prototype,w.release=function(){for(var e=b(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},w.ei=function(){return this.j},w.jf=function(){return this.l.slice()},w.Nh=function(){return this.i};function Px(e,t){var n=[],r=[],a=[],u=[];e=b(e);for(var c=e.next();!c.done;c=e.next()){var d=c.value;c=new Map(d.audioStreams.map(function(k){return[mm(k),k]}));var p=new Map(d.videoStreams.map(function(k){return[pm(k),k]})),S=new Map(d.textStreams.map(function(k){return[su(k),k]}));if(d=new Map(d.imageStreams.map(function(k){return[au(k),k]})),t){var T=Fx(Nt);S.set(su(T),T),T=Fx("image"),d.set(au(T),T)}n.push(c),r.push(p),a.push(S),u.push(d)}return{jg:n,ph:r,lh:a,Eg:u}}w.Ke=function(e,t,n){n=n===void 0?!1:n;var r=this,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye,le,ue,ce,Ee,Te,Ae,Oe,_e;return V(function(ze){if(ze.g==1){if(a=Gn,!t&&e.length==1)return u=Px(e,!1),c=u.jg,d=u.ph,p=u.lh,S=u.Eg,r.h=Array.from(c[0].values()),r.g=Array.from(d[0].values()),r.l=Array.from(p[0].values()),r.i=Array.from(S[0].values()),ze.u(2);for(T=n?r.m.size:0,k=-1,A=0;A<e.length;A++)E=e[A],r.m.has(E.id)||(r.m.add(E.id),k==-1&&(k=A));return k==-1?ze.return():(R=Px(e,!0),D=R.jg,L=R.ph,$=R.lh,N=R.Eg,I(ze,Promise.all([$r(r,r.h,D,k,ou,Aa,T),$r(r,r.g,L,k,ou,Aa,T),$r(r,r.l,$,k,ou,Aa,T),$r(r,r.i,N,k,ou,Aa,T)]),2))}if(K=0,O=[],r.g.length&&r.h.length)for(le=b(r.h),ue=le.next();!ue.done;ue=le.next())for(ce=ue.value,Ee=b(r.g),Te=Ee.next();!Te.done;Te=Ee.next())Ae=Te.value,Oe=Sd(ce.drmInfos,Ae.drmInfos),ce.drmInfos.length&&Ae.drmInfos.length&&!Oe.length||(_e=K++,O.push({id:_e,language:ce.language,disabledUntilTime:0,primary:ce.primary,audio:ce,video:Ae,bandwidth:(ce.bandwidth||0)+(Ae.bandwidth||0),drmInfos:Oe,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(H=r.g.length?r.g:r.h,J=b(H),oe=J.next();!oe.done;oe=J.next())se=oe.value,ye=K++,O.push({id:ye,language:se.language,disabledUntilTime:0,primary:se.primary,audio:se.type==a.X?se:null,video:se.type==a.ga?se:null,bandwidth:se.bandwidth||0,drmInfos:se.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});r.j=O,q(ze)})};function Ox(e){var t,n,r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye,le,ue,ce,Ee,Te;return V(function(Ae){switch(Ae.g){case 1:if(t=Gn,e.length==1)return Ae.return(e[0]);for(n=e.map(function(Oe){return new Map(Oe.filter(function(_e){return _e.type===t.X}).map(function(_e){return[mm(_e),_e]}))}),r=e.map(function(Oe){return new Map(Oe.filter(function(_e){return _e.type===t.ga}).map(function(_e){return[pm(_e),_e]}))}),a=e.map(function(Oe){return new Map(Oe.filter(function(_e){return _e.type===t.ua}).map(function(_e){return[su(_e),_e]}))}),u=e.map(function(Oe){return new Map(Oe.filter(function(_e){return _e.type===t.De}).map(function(_e){return[au(_e),_e]}))}),c=b(a),d=c.next();!d.done;d=c.next())p=d.value,S=jx(t.ua),p.set(su(S),S);for(T=b(u),k=T.next();!k.done;k=T.next())A=k.value,E=jx(t.De),A.set(au(E),E);return R=new Oo,I(Ae,$r(R,[],n,0,Ic,Mc,0),2);case 2:return D=Ae.h,I(Ae,$r(R,[],r,0,Ic,Mc,0),3);case 3:return L=Ae.h,I(Ae,$r(R,[],a,0,Ic,Mc,0),4);case 4:return $=Ae.h,I(Ae,$r(R,[],u,0,Ic,Mc,0),5);case 5:if(N=Ae.h,K=0,L.length&&D.length)for(se=b(D),ye=se.next();!ye.done;ye=se.next())for(le=ye.value,ue=b(L),ce=ue.next();!ce.done;ce=ue.next())Ee=ce.value,Te=K++,Ee.variantIds.push(Te),le.variantIds.push(Te);else for(O=L.concat(D),H=b(O),J=H.next();!J.done;J=H.next())oe=J.value,oe.variantIds=[K++];return Ae.return(L.concat(D).concat($).concat(N))}})}function $r(e,t,n,r,a,u,c){var d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye;return V(function(le){switch(le.g){case 1:for(d=[],p=0;p<n.length;p++)p>=r?d.push(new Set(n[p].values())):d.push(new Set);S=b(t),T=S.next();case 2:if(T.done){le.u(4);break}return k=T.value,I(le,T4(e,k,n,r,u,d,c),5);case 5:if(A=le.h,!A)throw new re(2,4,4037);T=S.next(),le.u(2);break;case 4:for(E=b(d),R=E.next();!R.done;R=E.next())for(D=R.value,L=b(D),$=L.next();!$.done;$=L.next())N=$.value,(K=b4(e,N,n,a,u,d))&&t.push(K);for(O=b(d),H=O.next();!H.done;H=O.next())for(J=H.value,oe=b(J),se=oe.next(),ye={};!se.done;ye={Tf:void 0},se=oe.next())if(ye.Tf=se.value,!dm(ye.Tf)&&t.some(function(ue){return function(ce){return hm(e,ue.Tf,ce)}}(ye)))throw new re(2,4,4037);return le.return(t)}})}function T4(e,t,n,r,a,u,c){return V(function(d){return d.g==1?(Bx(e,n,t,0<c),t.matchedStreams?t.segmentIndex?I(d,Nx(t,r+c),2):d.u(2):d.return(!1)):(Ux(t,r,a,u,c),d.return(!0))})}function Nx(e,t){var n,r,a,u,c,d,p;return V(function(S){if(S.g==1){for(n=[],r=e.matchedStreams,a=b(r),u=a.next();!u.done;u=a.next())c=u.value,n.push(c.createSegmentIndex()),c.trickModeVideo&&!c.trickModeVideo.segmentIndex&&n.push(c.trickModeVideo.createSegmentIndex());return I(S,Promise.all(n),2)}if(e.segmentIndex instanceof On)for(d=t;d<r.length;d++)p=r[d],p.segmentIndex&&e.segmentIndex.g.push(p.segmentIndex);q(S)})}function b4(e,t,n,r,a,u){if(dm(t))return null;var c=r(t);return Bx(e,n,c),c.createSegmentIndex&&(c.createSegmentIndex=function(){return V(function(d){return c.segmentIndex?d.u(0):(c.segmentIndex=new On,I(d,Nx(c,0),0))})}),!c.matchedStreams||!c.matchedStreams.length?null:(Ux(c,0,a,u,0),c)}function Ux(e,t,n,r,a){var u=e.matchedStreams;for(t+=a;t<u.length;t++){var c=u[t];n(e,c);var d=!0;if(e.type=="audio"&&ls(e.language,c.language)==0&&(d=!1),d&&(r[t-a].delete(c),c.fullMimeTypes))for(c=b(c.fullMimeTypes.values()),d=c.next();!d.done;d=c.next())e.fullMimeTypes.add(d.value)}}function ou(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=b(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Ic(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Aa(e,t){function n(c,d){c||(c=[]),d=b(d);for(var p=d.next();!p.done;p=d.next())p=p.value,c.includes(p)||c.push(p);return c}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=b(t.keyIds),a=r.next();!a.done;a=r.next())e.keyIds.add(a.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=Sd(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new re(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=b(t.closedCaptions),a=r.next();!a.done;a=r.next()){var u=b(a.value);a=u.next().value,u=u.next().value,e.closedCaptions.set(a,u)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=ou(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Aa(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Aa(e.trickModeVideo,t)}function Mc(e,t){var n=e.roles;n||(n=[]);for(var r=b(t.roles),a=r.next();!a.done;a=r.next())a=a.value,n.includes(a)||n.push(a);for(e.roles=n,n=b(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,_(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=b(t.closedCaptions),n=t.next();!n.done;n=t.next())r=b(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function Bx(e,t,n,r){r=r!==void 0&&r?n.matchedStreams:[],t=b(t);for(var a=t.next();!a.done;a=t.next()){if(a=k4(e,a.value,n),!a)return;r.push(a)}n.matchedStreams=r}function k4(e,t,n){var r={audio:mm,video:pm,text:su,image:au}[n.type],a=null,u=r(n);if(t.has(u))a=t.get(u);else{u={audio:function(S,T){return hm(e,S,T)},video:function(S,T){return hm(e,S,T)},text:E4,image:A4}[n.type];for(var c={audio:I4,video:M4,text:_4,image:R4}[n.type],d=b(t.values()),p=d.next();!p.done;p=d.next())p=p.value,!u(n,p)||n.fastSwitching!=p.fastSwitching||a&&!c(n,a,p)||(a=p)}return e.s&&!dm(a)&&t.delete(r(a)),a}function iu(e,t){return e.mimeType!=t.mimeType?!1:_c(e.codecs)===_c(t.codecs)}w.Zg=function(e){this.o=e},w.gh=function(e){this.s=e};function hm(e,t,n){return!(!iu(t,n)&&!e.o||t.drmInfos&&!Dg(t.drmInfos,n.drmInfos))}function E4(e,t){return t.language?!(e.forced!==t.forced||ls(e.language,t.language)==0||t.kind!=e.kind):!0}function A4(){return!0}function I4(e,t,n){var r=iu(e,t),a=iu(e,n);if(r&&!a)return!1;if(!r&&a||(r=ls(e.language,t.language),a=ls(e.language,n.language),a>r))return!0;if(a<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(u){return e.roles.includes(u)}),a=n.roles.filter(function(u){return e.roles.includes(u)}),a.length>r.length)return!0;if(a.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=ru(e.channelsCount,t.channelsCount,n.channelsCount),r==Hi?!0:r==Tr?!1:(r=ru(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==Hi?!0:r==Tr?!1:!!(e.bandwidth&&$x(e.bandwidth,t.bandwidth,n.bandwidth)==Hi)))}function M4(e,t,n){var r=iu(e,t),a=iu(e,n);if(r&&!a)return!1;if(!r&&a||(r=ru(e.width*e.height,t.width*t.height,n.width*n.height),r==Hi))return!0;if(r==Tr)return!1;if(e.frameRate){if(r=ru(e.frameRate,t.frameRate,n.frameRate),r==Hi)return!0;if(r==Tr)return!1}return!!(e.bandwidth&&$x(e.bandwidth,t.bandwidth,n.bandwidth)==Hi)}function _4(e,t,n){var r=ls(e.language,t.language),a=ls(e.language,n.language);if(a>r)return!0;if(a<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(u){return e.roles.includes(u)}),a=n.roles.filter(function(u){return e.roles.includes(u)}),a.length>r.length)return!0;if(a.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function R4(e,t,n){return ru(e.width*e.height,t.width*t.height,n.width*n.height)==Hi}function jx(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Fx(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new $t([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function ru(e,t,n){if(t==e&&e!=n)return Tr;if(n==e&&e!=t)return Hi;if(t>e){if(n<=e||n-e<t-e)return Hi;if(n-e>t-e)return Tr}else{if(n>e)return Tr;if(e-n<e-t)return Hi;if(e-n>e-t)return Tr}return zx}function $x(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Hi:t<e?Tr:zx}function dm(e){switch(e.type){case Nt:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function pm(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,_c(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function mm(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,_c(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function su(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function au(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function _c(e){if(!gm.has(e)){var t=Lo(e);gm.set(e,t)}return gm.get(e)}ve("shaka.util.PeriodCombiner",Oo),Oo.prototype.setUseStreamOnce=Oo.prototype.gh,Oo.prototype.setAllowMultiTypeVariants=Oo.prototype.Zg,Oo.prototype.combinePeriods=Oo.prototype.Ke,Oo.prototype.getImageStreams=Oo.prototype.Nh,Oo.prototype.getTextStreams=Oo.prototype.jf,Oo.prototype.getVariants=Oo.prototype.ei;var Hi=1,zx=0,Tr=-1,gm=new Map;function L4(e,t){var n=new DOMParser,r=D4.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function Vx(e,t){try{var n=sr(e);return L4(n,t)}catch{return null}}var D4=new Ns(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Rc(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.ea=1,this.B=[],this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.o=new Map,this.s={},this.ba={},this.m=new Oo,this.H=0,this.da=new Ke(5),this.I=new It(function(){if(e.G&&!e.g.continueLoadingWhenPaused&&(e.C.jb(e.G,"timeupdate"),e.G.paused)){e.C.ha(e.G,"timeupdate",function(){return Kx(e)});return}Kx(e)}),this.N=new Ks,this.L=null,this.fa=[],this.R=1/0,this.F=!1,this.h=null,this.K=0,this.U=!1,this.C=new xt,this.G=null,this.Z=!1}w=Rc.prototype,w.configure=function(e){var t=this.j&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.i&&this.i.presentationTimeline.V()&&this.I.tc(),this.h&&this.h.configure(this.g),this.m&&(this.m.Zg(this.g.dash.multiTypeVariantsAllowed&&jt()),this.m.gh(this.g.dash.useStreamOnceInPeriodFlattening))},w.start=function(e,t){var n=this,r;return V(function(a){if(a.g==1)return n.F=t.isLowLatencyMode(),n.A=[e],n.j=t,I(a,ym(n),2);if(r=a.h,n.j&&vm(n,r),!n.j)throw new re(2,7,7001);return a.return(n.i)})},w.stop=function(){for(var e=b(Object.values(this.s)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.s={},this.o.clear(),this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.m=null,this.I!=null&&(this.I.stop(),this.I=null),this.h&&this.h.destroy(),this.C&&(this.C.release(),this.C=null),this.N.destroy()},w.update=function(){var e=this,t;return V(function(n){if(n.g==1)return ee(n,2),I(n,ym(e),4);if(n.g!=2)return ne(n,0);if(t=Y(n),!e.j||!t)return n.return();e.j.onError(t),q(n)})},w.onExpirationUpdated=function(){},w.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.V()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.Wb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.H=t.endTime-e,vm(this,0))}}},w.banLocation=function(e){this.h&&this.h.banLocation(e)},w.setMediaElement=function(e){this.G=e};function ym(e){var t,n,r,a,u,c,d,p,S,T;return V(function(k){return k.g==1?(t=4,n="MPD",r=X4(e),a=e.A,r.length?(a=r,n="Patch",t=6):1<e.A.length&&e.h&&(u=nu(e.h,"Location",!0),u.length&&(a=u)),c=oo(a,e.g.retryParameters),d=Date.now(),I(k,wm(e,c,0,{type:t}),2)):k.g!=3?(p=k.h,e.j?(p.uri&&p.uri!=p.originalUri&&!e.A.includes(p.uri)&&e.A.unshift(p.uri),I(k,P4(e,p.data,p.uri,n),3)):k.return(0)):(S=Date.now(),T=(S-d)/1e3,e.da.sample(1,T),k.return(T))})}function P4(e,t,n,r){var a,u,c,d,p,S,T,k,A,E;return V(function(R){if(R.g==1){if(a=t,u=e.g.dash.manifestPreprocessor,c=qf,u!=c){if(Et("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),d=Vx(a,r),!d)throw new re(2,4,4001,n);u(d),a=Bi(d.outerHTML)}if(p=Vd(a,r),!p)throw new re(2,4,4001,n);return S=e.g.dash.manifestPreprocessorTXml,T=Kf,S!=T&&S(p),r==="Patch"?R.return(O4(e,p)):e.g.dash.disableXlinkProcessing?R.return(Hx(e,p,n)):(k=e.g.dash.xlinkFailGracefully,A=Ec(p,e.g.retryParameters,k,n,e.j.networkingEngine),fs(e.N,A),I(R,A.promise,2))}return E=R.h,R.return(Hx(e,E,n))})}function Hx(e,t,n){var r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye,le,ue,ce,Ee,Te,Ae,Oe,_e,ze,yt,Lt,Cn,zt,_n,Hn,Tn,Xt,Nn,Qn,Zn,Yo,Qo,Li,kr,Hr,Oa,Er,hh,Tu,bu;return V(function(Gi){switch(Gi.g){case 1:for(e.h&&e.h.l.clear(),r=[n],a=[],u=new Map,c=sn(t,"Location"),d=b(c),p=d.next();!p.done;p=d.next())S=p.value,T=S.attributes.serviceLocation,(k=Ai(S))&&(A=ho(r,[k])[0],T&&(e.h?Ea(e.h,"Location",T,A):u.set(T,A)),a.push(A));if(e.h?(E=nu(e.h,"Location",!0),0<E.length&&(r=e.A=E)):a.length&&(r=e.A=a),e.l.ae=t.attributes.id||"",e.l.td=Ut(t,"publishTime",Or)||0,e.B=sn(t,"PatchLocation"),R=Promise.resolve(),(D=Mi(t,"ContentSteering"))&&e.j)for(L=D.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=L):(e.h=new ka(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=L,($=Ai(D))&&(Ut(D,"queryBeforeStart",Gd,!1)?R=tu(e.h,$):tu(e.h,$))),N=b(u.keys()),K=N.next();!K.done;K=N.next())O=K.value,H=u.get(O),Ea(e.h,"Location",O,H);if(J=sn(t,"BaseURL"),se=!1,e.h)for(ye=b(J),le=ye.next();!le.done;le=ye.next())ue=le.value,ce=ue.attributes.serviceLocation,Ee=Ai(ue),ce&&Ee&&(Ea(e.h,"BaseURL",ce,Ee),se=!0);if(se&&e.h||(Te=J.map(Ai),oe=ho(r,Te)),Ae=function(){return e.h&&se?nu(e.h,"BaseURL"):oe||[]},e.l.Ga=Ae,Oe=0,J&&J.length&&(Oe=Ut(J[0],"availabilityTimeOffset",Af)||0),e.l.Ia=Oe,_e=e.g.dash.ignoreMinBufferTime,ze=0,_e||(ze=Ut(t,"minBufferTime",tr)||0),e.H=Ut(t,"minimumUpdatePeriod",tr,-1),yt=Ut(t,"availabilityStartTime",Or),Lt=Ut(t,"timeShiftBufferDepth",tr),Cn=e.g.dash.ignoreSuggestedPresentationDelay,zt=null,Cn||(zt=Ut(t,"suggestedPresentationDelay",tr)),_n=e.g.dash.ignoreMaxSegmentDuration,Hn=null,_n||(Hn=Ut(t,"maxSegmentDuration",tr)),Tn=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.Z=e.i.presentationTimeline.V()&&Tn=="static"),e.l.type=Tn,e.i)for(Xt=e.i.presentationTimeline,Nn=b(Object.values(e.s)),Qn=Nn.next();!Qn.done;Qn=Nn.next())Zn=Qn.value,Zn.segmentIndex&&Zn.segmentIndex.Ma(Xt.mb());else Yo=e.g.defaultPresentationDelay||1.5*ze,Qo=zt??Yo,Xt=new at(yt,Qo,e.g.dash.autoCorrectDrift);return Xt.sc(Tn=="static"),Xt.V()&&!isNaN(e.g.availabilityWindowOverride)&&(Lt=e.g.availabilityWindowOverride),Lt==null&&(Lt=1/0),Xt.pe(Lt),Li=t.attributes.profiles||"",e.l.profiles=Li.split(","),kr={vb:Tn!="static",presentationTimeline:Xt,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:Oe,Kb:null,profiles:Li.split(","),roles:null},e.K=0,Hr=qx(e,kr,Ae,t),Oa=Hr.duration,Er=Hr.periods,(Tn!="static"||e.Z)&&Hr.rg||Xt.Za(Oa||1/0),e.U&&!e.F&&e.j.isAutoLowLatencyMode()&&(e.j.enableLowLatencyMode(),e.F=e.j.isLowLatencyMode()),e.F&&Xt.$g(e.R),Xt.xf(Hn||1),I(Gi,R,2);case 2:return e.F&&(ze=0,hh=zt??e.g.defaultPresentationDelay,Xt.Of(hh)),e.i?(e.i.periodCount=Er.length,e.i.gapCount=e.K,I(Gi,Gx(e,Er,!1),4)):I(Gi,e.m.Ke(Er,kr.vb),6);case 6:if(e.i={presentationTimeline:Xt,variants:e.m.j,textStreams:e.m.jf(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:ze||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:N4(t),nextUrl:U4(t),periodCount:Er.length,gapCount:e.K,isLowLatency:e.U},!Xt.nh()){Gi.u(7);break}return Tu=sn(t,"UTCTiming"),I(Gi,G4(e,Ae,Tu),8);case 8:if(bu=Gi.h,!e.j)return Gi.return();Xt.ah(bu);case 7:Xt.Wd();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),q(Gi)}})}function Gx(e,t,n){var r;return V(function(a){if(a.g==1)return I(a,e.m.Ke(t,!0,n),2);e.i.variants=e.m.j,r=e.m.jf(),0<r.length&&(e.i.textStreams=r),e.i.imageStreams=e.m.i,e.j.filter(e.i),q(a)})}function O4(e,t){var n,r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye,le,ue,ce;return V(function(Ee){if(Ee.g==1){if(n=t.attributes.mpdId,r=Ut(t,"originalPublishTime",Or),!n||n!==e.l.ae||r!==e.l.td)throw e.B=[],new re(1,4,4052);for(a=[],u=[],c=new Set,d=b(Ey(t)),p=d.next();!p.done;p=d.next())if(S=p.value,T=If(S.attributes.sel||""),k=T[T.length-1],A=Ai(S)||"",k.name==="MPD")if(k.Sb==="mediaPresentationDuration"){E=Ai(S)||"";var Te=tr(E);if(Te!=null){e.l.Kb=Te;for(var Ae=b(e.o.values()),Oe=Ae.next();!Oe.done;Oe=Ae.next())Oe.value.Kb=Te}}else if(k.Sb==="type"){for(e.i.presentationTimeline.sc(A=="static"),e.l.type=A,Te=b(e.o.values()),Ae=Te.next();!Ae.done;Ae=Te.next())Ae.value.vb=A=="dynamic";A=="static"&&(e.H=-1)}else k.Sb==="publishTime"?e.l.td=Or(A)||0:k.Sb===null&&S.tagName==="add"&&u.push(S);else if(k.name==="PatchLocation")Iy(e.B,S);else if(k.name==="Period"){if(S.tagName==="add")u.push(S);else if(S.tagName==="remove"&&k.id){Te=e,Ae=k.id,Te.i.periodCount--,Oe=b(Te.o.keys());for(var _e=Oe.next();!_e.done;_e=Oe.next())if(_e=_e.value,_e.startsWith(Ae)){var ze=Te.o.get(_e);Ta(ze,vs,"SegmentTimeline").children=[],Xx(Te,_e),Te.o.delete(_e)}}}else if(k.name==="SegmentTemplate"){if(Ae=If(S.attributes.sel||""),Te=Ae[Ae.length-1],Te.Sb){for(Ae=Wx(e,Ae),Oe=Ai(S)||"",_e=b(Ae),ze=_e.next();!ze.done;ze=_e.next())ze=e.o.get(ze.value),_y(ze.J.$b,S.tagName,Te.Sb,Oe);Te=Ae}else Te=[];for(R=Te,D=b(R),L=D.next();!L.done;L=D.next())$=L.value,c.add($)}else if(k.name==="SegmentTimeline"||k.name==="S"){for(Te=If(S.attributes.sel||""),Te=Wx(e,Te),Ae=b(Te),Oe=Ae.next();!Oe.done;Oe=Ae.next())Oe=e.o.get(Oe.value),Oe=Ta(Oe,vs,"SegmentTimeline"),_e=sn(Oe,"S"),Iy(_e,S),Oe.children=_e;for(N=Te,K=b(N),O=K.next();!O.done;O=K.next())H=O.value,c.add(H)}for(J=b(c),oe=J.next();!oe.done;oe=J.next())se=oe.value,Xx(e,se);for(ye=b(u),le=ye.next();!le.done;le=ye.next())ue=le.value,a.push.apply(a,_(qx(e,{vb:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:e.l.Ia,profiles:e.l.profiles,Kb:e.l.Kb,roles:null},e.l.Ga,ue).periods));return a.length?(e.i.periodCount+=a.length,e.i.gapCount=e.K,I(Ee,Gx(e,a,!0),2)):Ee.u(2)}e.l.type=="static"&&(ce=e.l.Kb,e.i.presentationTimeline.Za(ce||1/0)),q(Ee)})}function Wx(e,t){var n="",r="",a=-1,u="";t=b(t);for(var c=t.next();!c.done;c=t.next())c=c.value,c.name==="Period"?n=c.id:c.name==="AdaptationSet"?(r=c.id,c.position!==null&&(a=c.position)):c.name==="Representation"&&(u=c.id);if(t=[],u)t.push(n+","+u);else if(r)for(a=b(e.o.values()),e=a.next();!e.done;e=a.next())e=e.value,e.ta.id===n&&e.ja.id===r&&e.J.id&&t.push(n+","+e.J.id);else if(-1<a)for(r=b(e.o.values()),e=r.next();!e.done;e=r.next())e=e.value,e.ta.id===n&&e.ja.position===a&&e.J.id&&t.push(n+","+e.J.id);return t}function Xx(e,t){var n=e.o.get(t),r=e.s[t];r.segmentIndex&&r.segmentIndex.Ma(e.i.presentationTimeline.mb());try{var a=_x(n,function(u,c,d,p){return Qx(e,u,c,d,p)},e.s,!0,e.g.dash.initialSegmentLimit,e.ba,n.J.aesKey,null,!0);r.createSegmentIndex=function(){return V(function(u){if(u.g==1)return r.segmentIndex?u.u(0):I(u,a.fc(),3);r.segmentIndex=u.h,q(u)})}}catch(u){if(t=n.J.contentType,t!=Nt&&t!="application"&&t!="image"||u.code!=4002)throw u}}function N4(e){var t=Mi(e,"ServiceDescription");if(!t||(e=Mi(t,"Latency"),t=Mi(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function U4(e){if(e=sn(e,"SupplementalProperty"),!e.length)return null;e=b(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function qx(e,t,n,r){var a=t.Kb;a||(a=Ut(r,"mediaPresentationDuration",tr),e.l.Kb=a);var u=0;e.i&&e.i.presentationTimeline&&e.Z&&(u=e.i.presentationTimeline.Vb());var c=[],d=u;r=sn(r,"Period");for(var p=0;p<r.length;p++){var S=r[p],T=r[p+1],k=Ut(S,"start",tr,d),A=S.attributes.id,E=Ut(S,"duration",tr),R=null;if(T){var D=Ut(T,"start",tr);D!=null&&(R=D-k)}else a!=null&&(R=a-k+u);if(D=fb,R&&E&&Math.abs(R-E)>D&&R>E&&e.K++,R==null&&(R=E),!(e.L!==null&&A!==null&&k!==null&&k<e.L)||e.fa.includes(A)||p+1==r.length){if(k!==null&&(e.L===null||k>e.L)&&(e.L=k),d=B4(e,t,n,{start:k,duration:R,node:S,ld:R==null||!T}),c.push(d),t.ta.id&&R&&(e.ba[t.ta.id]=R),R==null){d=null;break}d=k+R}}return e.fa=c.map(function(L){return L.id}),a!=null?{periods:c,duration:a+u,rg:!1}:{periods:c,duration:d,rg:!0}}function B4(e,t,n,r){t.ta=xm(e,r.node,null,n),t.ka=r,t.ta.Ia=t.Ia,t.ta.id||(t.ta.id="__shaka_period_"+r.start);var a=sn(r.node,"EventStream");n=t.presentationTimeline.mb(),a=b(a);for(var u=a.next();!u.done;u=a.next())W4(e,r.start,r.duration,u.value,n);if(n=sn(r.node,"AdaptationSet").map(function(T,k){return j4(e,t,k,T)}).filter(as),t.vb){for(r=[],a=b(n),u=a.next();!u.done;u=a.next()){u=b(u.value.Mi);for(var c=u.next();!c.done;c=u.next())r.push(c.value)}if(r.length!=new Set(r).size)throw new re(2,4,4018)}for(r=n.filter(function(T){return!T.Yf}),n=n.filter(function(T){return T.Yf}),n=b(n),a=n.next();!a.done;a=n.next()){a=a.value,u=a.Yf.split(" "),c=b(r);for(var d=c.next();!d.done;d=c.next())if(d=d.value,u.includes(d.id)){d=b(d.streams);for(var p=d.next(),S={};!p.done;S={Sf:void 0},p=d.next())S.Sf=p.value,S.Sf.trickModeVideo=a.streams.find(function(T){return function(k){return Lo(T.Sf.codecs)==Lo(k.codecs)}}(S))}}if(n=Lc(e.g.disableAudio,r,"audio"),a=Lc(e.g.disableVideo,r,"video"),u=Lc(e.g.disableText,r,Nt),r=Lc(e.g.disableThumbnails,r,"image"),a.length===0&&n.length===0)throw new re(2,4,4004);return{id:t.ta.id,audioStreams:n,videoStreams:a,textStreams:u,imageStreams:r}}function Lc(e,t,n){return e||!t.length?[]:t.reduce(function(r,a){return a.contentType!=n||r.push.apply(r,_(a.streams)),r},[])}function j4(e,t,n,r){function a(ue){switch(ue){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function u(ue){switch(ue){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ja=xm(e,r,t.ta,null),t.ja.position=n;var c=!1;n=sn(r,"Role");var d=n.map(function(ue){return ue.attributes.value}).filter(as),p=void 0,S=t.ja.contentType==Nt;S&&(p="subtitle"),n=b(n);for(var T=n.next();!T.done;T=n.next()){T=T.value;var k=T.attributes.schemeIdUri;if(k==null||k=="urn:mpeg:dash:role:2011")switch(T=T.attributes.value,T){case"main":c=!0;break;case"caption":case"subtitle":p=T}}var A,E;k=sn(r,"EssentialProperty"),n=null;var R=!1;T=!1,k=b(k);for(var D=k.next();!D.done;D=k.next()){D=D.value;var L=D.attributes.schemeIdUri;L=="http://dashif.org/guidelines/trickmode"?n=D.attributes.value:L=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?A=u(parseInt(D.attributes.value,10)):L=="urn:mpeg:mpegB:cicp:ColourPrimaries"?E=a(parseInt(D.attributes.value,10)):L!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(L=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?R=!0:T=!0)}var $=null;for(k=sn(r,"SupplementalProperty"),k=b(k),D=k.next();!D.done;D=k.next())D=D.value,L=D.attributes.schemeIdUri,L=="http://dashif.org/guidelines/last-segment-number"?$=parseInt(D.attributes.value,10)-1:L=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?A=u(parseInt(D.attributes.value,10)):L=="urn:mpeg:mpegB:cicp:ColourPrimaries"&&(E=a(parseInt(D.attributes.value,10)));k=sn(r,"Accessibility");var N=new Map,K;for(k=b(k),D=k.next();!D.done;D=k.next())if(L=D.value,D=L.attributes.schemeIdUri,L=L.attributes.value,D!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(D!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)D=="urn:mpeg:dash:role:2011"?L!=null&&(d.push(L),L=="captions"&&(p="caption")):D=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(L=="1"?K="visually impaired":L=="2"&&(K="hard of hearing"));else if(D=1,L!=null){L=b(L.split(";"));for(var O=L.next();!O.done;O=L.next()){var H=O.value,J=O=void 0;H.includes("=")?(H=H.split("="),O="svc"+H[0],J=H[1].split(",")[0].split(":").pop()):(O="svc"+D,D++,J=H),N.set(O,Kt(J))}}else N.set("svc1","und");else if(D=1,L!=null)for(L=L.split(";"),O=b(L),H=O.next();!H.done;H=O.next()){J=H.value;var oe=H=void 0;J.includes("=")?(J=J.split("="),H=J[0].startsWith("CC")?J[0]:"CC"+J[0],oe=J[1]||"und"):(H="CC"+D,L.length==2?D+=2:D++,oe=J),N.set(H,Kt(oe))}else N.set("CC1","und");if(T)return null;T=sn(r,"ContentProtection");var se=wx(T,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),ye=Kt(t.ja.language||"und"),le=t.ja.label;if(T=sn(r,"Representation"),r=T.map(function(ue){return(ue=F4(e,t,se,p,ye,le,c,d,N,ue,K,$))&&(ue.hdr=ue.hdr||A,ue.colorGamut=ue.colorGamut||E,ue.fastSwitching=R),ue}).filter(function(ue){return!!ue}),r.length==0){if(n=t.ja.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||S||n)return null;throw new re(2,4,4003)}if(!t.ja.contentType||t.ja.contentType=="application")for(t.ja.contentType=Zx(r[0].mimeType,r[0].codecs),S=b(r),k=S.next();!k.done;k=S.next())k.value.type=t.ja.contentType;for(S=t.ja.id||"__fake__"+e.ea++,k=b(r),D=k.next();!D.done;D=k.next()){for(D=D.value,L=b(se.drmInfos),O=L.next();!O.done;O=L.next())O=O.value,O.keyIds=O.keyIds&&D.keyIds?new Set([].concat(_(O.keyIds),_(D.keyIds))):O.keyIds||D.keyIds;e.g.dash.enableAudioGroups&&(D.groupId=S)}return T=T.map(function(ue){return ue.attributes.id}).filter(as),{id:S,contentType:t.ja.contentType,language:ye,ek:c,streams:r,drmInfos:se.drmInfos,Yf:n,Mi:T}}function F4(e,t,n,r,a,u,c,d,p,S,T,k){t.J=xm(e,S,t.ja,null);var A=t.J.id;if(e.R=Math.min(e.R,t.J.Ia),e.U=0<e.R,!H4(t.J))return null;var E=t.ka.start;t.bandwidth=Ut(S,"bandwidth",dr)||0,t.roles=d;var R=t.J.contentType,D=R==Nt||R=="application";R=R=="image";try{var L=void 0;if(n.Fe){var $=t.J.Ga,N=ho($(),[n.Fe.ti]),K=oo(N,e.g.retryParameters);L={bitsKey:128,blockCipherMode:"CBC",iv:n.Fe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var ce,Ee,Te;return V(function(Ae){if(Ae.g==1)return I(Ae,wm(e,K,6),2);if(Ae.g!=3){if(ce=Ae.h,!ce.data||ce.data.byteLength!=16)throw new re(2,4,4049);return Ee={name:"AES-CBC"},Te=L,I(Ae,h.crypto.subtle.importKey("raw",ce.data,Ee,!0,["decrypt"]),3)}Te.cryptoKey=Ae.h,L.fetchKey=void 0,q(Ae)})}}}if(t.J.aesKey=L,$=function(ce,Ee,Te,Ae){return Qx(e,ce,Ee,Te,Ae)},t.J.Rc)var O=f4(t,$,L);else if(t.J.Pb)O=h4(t,e.s,L);else if(t.J.$b)O=_x(t,$,e.s,!!e.i,e.g.dash.initialSegmentLimit,e.ba,L,k,!1);else{var H=t.ka.duration||0,J=t.J.Ga,oe=t.J.mimeType,se=t.J.codecs;O={fc:function(){var ce=hp(E,H,J());return ce.Hb(function(Ee){Ee.mimeType=oe,Ee.codecs=se}),Promise.resolve(ce)}}}}catch(ce){if((D||R)&&ce.code==4002)return null;throw ce}k=sn(S,"ContentProtection"),k=qA(k,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),k=new Set(k?[k]:[]),$=!1,sn(S,"SupplementalProperty").some(function(ce){return ce.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&ce.attributes.value=="JOC"})&&($=!0),N=!1,D&&(N=d.includes("forced_subtitle")||d.includes("forced-subtitle"));var ye;if(R&&((S=sn(S,"EssentialProperty").find(function(ce){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(ce.attributes.schemeIdUri)}))&&(ye=S.attributes.value),!ye))return null;var le;S=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(S.includes("hvc1.2.4.L153.B0")||S.includes("hev1.2.4.L153.B0"))&&(le="PQ"),D=t.J.id?t.ta.id+","+t.J.id:"",e.B.length&&A&&e.o.set(t.ta.id+","+A,$4(t));var ue=D&&e.s[D]?e.s[D]:{id:e.ea++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){ue.segmentIndex&&(ue.segmentIndex.release(),ue.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:S,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:k,language:a,originalLanguage:t.ja.language,label:u,type:t.ja.contentType,primary:c,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:d,forced:N,channelsCount:t.J.Jc,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:$,closedCaptions:p,hdr:le,colorGamut:void 0,videoLayout:void 0,tilesLayout:ye,accessibilityPurpose:T,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Wn(t.J.mimeType,t.J.codecs)])};return ue.createSegmentIndex=function(){var ce;return V(function(Ee){if(Ee.g==1)return ue.segmentIndex?Ee.u(0):(ce=ue,I(Ee,O.fc(),3));ce.segmentIndex=Ee.h,q(Ee)})},D&&t.vb&&!e.s[D]&&(e.s[D]=ue),ue}function $4(e){for(var t={},n=b(Object.keys(e)),r=n.next();!r.done;r=n.next())if(r=r.value,["period","adaptationSet","representation"].includes(r)){var a=e[r];t[r]={Rc:null,Pb:null,$b:a.$b,Ga:a.Ga,width:a.width,height:a.height,contentType:a.contentType,mimeType:a.mimeType,language:a.language,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,emsgSchemeIdUris:a.emsgSchemeIdUris,id:a.id,position:a.position,Jc:a.Jc,audioSamplingRate:a.audioSamplingRate,Ia:a.Ia,Gc:a.Gc}}else r=="periodInfo"?(a=e[r],t[r]={start:a.start,duration:a.duration,node:null,ld:a.ld}):t[r]=e[r];return t}function Kx(e){var t,n;return V(function(r){switch(r.g){case 1:return t=0,ee(r,2),I(r,ym(e),4);case 4:t=r.h,ne(r,3);break;case 2:if(n=Y(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),vm(e,t),q(r)}})}function vm(e,t){if(!(0>e.H)){var n=e.H;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.I.Y(Math.max(n-t,lt(e.da)))}}function xm(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Jc:null,audioSamplingRate:null,Ia:0,Kf:0},r=r||n.Ga;var a=t.attributes.id,u=sn(t,"BaseURL"),c,d=!1;if(e.h)for(var p=b(u),S=p.next();!S.done;S=p.next()){var T=S.value;S=T.attributes.serviceLocation,T=Ai(T),S&&T&&(Ea(e.h,a,S,T),d=!0)}d&&e.h||(c=u.map(Ai)),p=t.attributes.contentType||n.contentType,S=t.attributes.mimeType||n.mimeType,T=[t.attributes.codecs||n.codecs];var k=hr(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");k&&T.push(k),T=vp(T).join(","),k=Ut(t,"frameRate",Wb)||n.frameRate;var A=t.attributes.sar||n.pixelAspectRatio,E=z4(sn(t,"InbandEventStream"),n.emsgSchemeIdUris),R=sn(t,"AudioChannelConfiguration");R=V4(R)||n.Jc;var D=Ut(t,"audioSamplingRate",To)||n.audioSamplingRate;p||(p=Zx(S,T));var L=Mi(t,"SegmentBase"),$=Mi(t,"SegmentTemplate"),N=L&&Ut(L,"availabilityTimeOffset",Af)||0,K=$&&Ut($,"availabilityTimeOffset",Af)||0,O=u&&u.length&&Ut(u[0],"availabilityTimeOffset",Af)||0;N=n.Ia+O+N+K,K=null,(O=Mi(t,"SegmentSequenceProperties"))&&(O=Mi(O,"SAP"))&&(K=Ut(O,"cadence",Ef)),O=t.attributes.label;var H=sn(t,"Label");return H&&H.length&&(H=H[0],qn(H)&&(O=qn(H))),{Ga:function(){return ho(r(),u.length?e.h&&d?nu(e.h,a):c||[]:[])},Rc:L||n.Rc,Pb:Mi(t,"SegmentList")||n.Pb,$b:$||n.$b,width:Ut(t,"width",To)||n.width,height:Ut(t,"height",To)||n.height,contentType:p,mimeType:S,codecs:T,frameRate:k,pixelAspectRatio:A,emsgSchemeIdUris:E,id:a,language:t.attributes.lang,Jc:R,audioSamplingRate:D,Ia:N,Gc:null,Kf:K||n.Kf,label:O||null}}function z4(e,t){t=t.slice(),e=b(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function V4(e){e=b(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function H4(e){var t=e.Rc?1:0;return t+=e.Pb?1:0,t+=e.$b?1:0,t==0?e.contentType==Nt||e.contentType=="application":(t!=1&&(e.Rc&&(e.Pb=null),e.$b=null),!0)}function Yx(e,t,n,r){var a,u,c,d,p,S,T;return V(function(k){if(k.g==1)return a=[Ro(n)],u=ho(t(),a),c=oo(u,e.g.retryParameters),c.method=r,d=e.j.networkingEngine.request(4,c),fs(e.N,d),I(k,d.promise,2);if(p=k.h,r=="HEAD"){if(!p.headers||!p.headers.date)return k.return(0);S=p.headers.date}else S=dn(p.data);return T=Date.parse(S),isNaN(T)?k.return(0):k.return(T-Date.now())})}function G4(e,t,n){var r,a,u,c,d,p,S,T;return V(function(k){switch(k.g){case 1:r=n.map(function(A){return{scheme:A.attributes.schemeIdUri,value:A.attributes.value}}),a=e.g.dash.clockSyncUri,!r.length&&a&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:a}),u=b(r),c=u.next();case 2:if(c.done){k.u(4);break}switch(d=c.value,ee(k,5),p=d.scheme,S=d.value,p){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return k.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return k.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return T=Date.parse(S),k.return(isNaN(T)?0:T-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":je("NTP UTCTiming scheme is not supported");break;default:je("Unrecognized scheme in UTCTiming element",p)}k.u(9);break;case 7:return I(k,Yx(e,t,S,"HEAD"),10);case 10:return k.return(k.h);case 8:return I(k,Yx(e,t,S,"GET"),11);case 11:return k.return(k.h);case 9:ne(k,3);break;case 5:Y(k);case 3:c=u.next(),k.u(2);break;case 4:return je("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),k.return(0)}})}function W4(e,t,n,r,a){var u=r.attributes.schemeIdUri||"",c=r.attributes.value||"",d=Ut(r,"timescale",To)||1;r=b(sn(r,"Event"));for(var p=r.next();!p.done;p=r.next()){p=p.value;var S=Ut(p,"presentationTime",To)||0,T=Ut(p,"duration",To)||0;S=S/d+t,T=S+T/d,n!=null&&(S=Math.min(S,t+n),T=Math.min(T,t+n)),T<a||(p={schemeIdUri:u,value:c,startTime:S,endTime:T,id:p.attributes.id||"",eventElement:Ry(p),eventNode:p},e.j.onTimelineRegionAdded(p))}}function Qx(e,t,n,r,a){var u,c,d,p;return V(function(S){return S.g==1?(u=Fi,c=a?0:1,d=sa(t,n,r,e.g.retryParameters),I(S,wm(e,d,u,{type:c}),2)):(p=S.h,S.return(p.data))})}function Zx(e,t){return t=Wn(e,t),wl(t)?Nt:e.split("/")[0]}function wm(e,t,n,r){return t=e.j.networkingEngine.request(n,t,r),fs(e.N,t),t.promise}function X4(e){var t=e.l.td;if(!e.l.ae||!t||!e.B.length)return[];var n=Date.now()/1e3,r=e.B.filter(function(a){return a=To(a.attributes.ttl),!a||t+a>n}).map(Ai).filter(as);return r.length?ho(e.A,r):[]}ve("shaka.dash.DashParser",Rc),_i["application/dash+xml"]=function(){return new Rc},_i["video/vnd.mpeg.dash.mpd"]=function(){return new Rc};function Dc(){}ve("shaka.dependencies",Dc),Dc.has=function(e){return Sm.has(e)},Dc.add=function(e,t){if(!e2[e])throw Error(e+" is not supported");e==Jx?Et("mux.js","mux.js is no longer used in Shaka Player."):Sm.set(e,function(){return t})};var Jx="muxjs",e2={fk:Jx,ISOBoxer:"ISOBoxer"};Dc.Allowed=e2;var Sm=new Map([["ISOBoxer",function(){return h.ISOBoxer}]]);function t2(e,t,n){this.type=e,this.g=t,this.segments=n||null}function n2(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}n2.prototype.toString=function(e){function t(a){return a.name+"="+(isNaN(Number(a.value))?'"'+a.value+'"':a.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(a){return e?!e.has(a.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function o2(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function lu(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function Je(e,t,n){return(e=lu(e,t))?e.value:n||null}function Yt(e,t){if(e=lu(e,t),!e)throw new re(2,4,4023,t);return e.value}function i2(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.zb=n}function r2(e,t){this.name=e,this.value=t}function xi(e,t){return e.filter(function(n){return n.name==t})}function s2(e,t){return e.filter(function(n){return Yt(n,"TYPE")==t})}function vo(e,t){e=b(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Ia(e,t,n){return n=n===void 0?0:n,(e=vo(e,t))?Number(e.value):n}function zr(e,t,n){return t?a2(e,[t],n):[]}function a2(e,t,n){if(!t.length)return[];t=ho(e,t),e=[],t=b(t);for(var r=t.next();!r.done;r=t.next())e.push(l2(r.value,n));return e}function l2(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=b(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var a=r.slice(2,r.length-1),u=t.get(a);if(u)e=e.replace(r,u);else throw new re(2,4,4039,a)}}return e}function q4(){this.g=0}function Cm(e,t){t=dn(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new re(2,4,4015);t=0;for(var r=!0,a=b(n),u=a.next();!u.done;u=a.next())if(u=u.value,/^#(?!EXT)/m.test(u)||r)r=!1;else if(u=Tm(e,u),--e.g,u2.includes(u.name)){t=1;break}else u.name=="EXT-X-STREAM-INF"&&(r=!0);for(a=[],r=!0,u=0;u<n.length;u++){var c=n[u],d=n[u+1];if(/^#(?!EXT)/m.test(c)||r)r=!1;else{if(c=Tm(e,c),K4.includes(c.name)){if(t!=1)throw new re(2,4,4017);c=n.splice(u,n.length-u),n=[],r=[],u=[],d=null,c=b(c);for(var p=c.next();!p.done;p=c.next())p=p.value,/^(#EXT)/.test(p)?(p=Tm(e,p),u2.includes(p.name)?a.push(p):p.name=="EXT-X-MAP"?d=p:p.name=="EXT-X-PART"?u.push(p):p.name=="EXT-X-PRELOAD-HINT"?Je(p,"TYPE")=="PART"?u.push(p):Je(p,"TYPE")=="MAP"&&(p.name="EXT-X-MAP",d=p):r.push(p)):/^#(?!EXT)/m.test(p)||(p=p.trim(),d&&r.push(d),n.push(new i2(p,r,u)),r=[],u=[]);return u.length&&(d&&r.push(d),n.push(new i2("",r,u))),new t2(t,a,n)}a.push(c),c.name=="EXT-X-STREAM-INF"&&(c.attributes.push(new r2("URI",d)),r=!0)}}return new t2(t,a)}function Tm(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new re(2,4,4016,t);t=n[1];var r=n[2];n=[];var a;if(r){r=new jr(r);var u;(u=vr(r,/^([^,=]+)(?:,|$)/g))&&(a=u[1]);for(var c=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;u=vr(r,c);)n.push(new r2(u[1],u[2]||u[3])),va(r)}return new n2(e,t,n,a)}var u2="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),K4="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");function f2(){}function c2(e){try{var t=bm(e);return qs({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return us(n)}}function bm(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new re(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new re(2,1,1004,e);var n=t[0];e=h.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var a;return r?a=pi(e):a=Bi(e),{data:a,contentType:n}}ve("shaka.net.DataUriPlugin",f2),f2.parse=c2,ur("data",c2);function Pc(){var e=this;this.g=this.h=null,this.B=1,this.s=new Map,this.G=new Map,this.N=new Map,this.N.set("video",new Map),this.N.set("audio",new Map),this.N.set(Nt,new Map),this.N.set("image",new Map),this.ub=new Set,this.i=new Map,this.l=null,this.L="",this.Fa=new q4,this.H=-1,this.fa=1/0,this.ea=this.Gb=!1,this.A=new It(function(){if(e.ba&&!e.g.continueLoadingWhenPaused&&(e.Z.jb(e.ba,"timeupdate"),e.ba.paused)){e.Z.ha(e.ba,"timeupdate",function(){return L2(e)});return}L2(e)}),this.xa=jc,this.m=null,this.ab=0,this.o=1/0,this.Da=this.za=this.U=0,this.da=new Ks,this.C=new Map,this.F=new Map,this.qa=new Map,this.oa=new Map,this.K=new Map,this.pa=new Map,this.ya=new Map,this.Fb=this.I=!1,this.Db=new Ke(5),this.j=null,this.R=!0,this.Ea=new Set,this.Z=new xt,this.ba=null}w=Pc.prototype,w.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},w.start=function(e,t){var n=this,r;return V(function(a){return a.g==1?(n.h=t,n.I=t.isLowLatencyMode(),I(a,Lm(n,[e]),2)):a.g!=3?(r=a.h,n.L=r.uri,I(a,Z4(n,r.data,e),3)):a.return(n.m)})},w.stop=function(){this.A&&(this.A.stop(),this.A=null);var e=[];return this.da&&(e.push(this.da.destroy()),this.da=null),this.g=this.h=null,this.ub.clear(),this.m=null,this.i.clear(),this.G.clear(),this.F.clear(),this.s.clear(),this.qa.clear(),this.oa.clear(),this.K.clear(),this.pa.clear(),this.ya.clear(),this.Ea.clear(),this.j&&this.j.destroy(),this.Z&&(this.Z.release(),this.Z=null),Promise.all(e)},w.update=function(){var e=this,t,n,r,a,u,c,d,p,S,T,k,A;return V(function(E){if(E.g==1){if(!Xo(e))return E.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,r=n.filter(function(R){return R.stream.segmentIndex}),a=b(r),u=a.next();!u.done;u=a.next())c=u.value,t.push(Y4(e,c));return I(E,Promise.all(t),2)}for(w2(e,r.map(function(R){return R.stream})),d=r.some(function(R){return R.ed==0}),r.length&&!d&&(p=y3,Uc(e,p.sh),S=r.map(function(R){return R.Jb}),e.l.Za(Math.min.apply(Math,_(S))),e.h.updateDuration()),d&&Em(e),T=b(r),k=T.next();!k.done;k=T.next())A=k.value,A.stream.segmentIndex&&!A.stream.segmentIndex.O[0]&&e.h.disableStream(A.stream);q(E)})};function km(e,t){return Xo(e)?e.N.get(t.type):t.Yd}function Y4(e,t){var n,r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye,le,ue,ce,Ee,Te,Ae,Oe,_e,ze,yt;return V(function(Lt){switch(Lt.g){case 1:for(n=[],r=b(t.M()),a=r.next();!a.done;a=r.next())u=a.value,c=new Sn(u),d=c.g,t.Fd&&(0<=t.ob&&d.add("_HLS_msn",String(t.ob)),0<=t.pb&&d.add("_HLS_part",String(t.pb))),t.Gd&&d.add("_HLS_skip","YES"),Lg(d)&&Ni(c,d),n.push(c.toString());return ee(Lt,2),I(Lt,Lm(e,n,!0),4);case 4:p=Lt.h,ne(Lt,3);break;case 2:throw S=Y(Lt),e.h&&e.h.disableStream(t.stream),S;case 3:if(!t.stream.segmentIndex)return Lt.return();if(T=Cm(e.Fa,p.data),T.type!=1)throw new re(2,4,4017);return k=p.uri,k==p.originalUri||t.M().includes(k)||t.Tg.push(k),A=xi(T.g,"EXT-X-DEFINE"),E=Am(e,A,k),R=t.stream,D=km(e,t),I(Lt,b2(e,T,R.mimeType,t.M,E),5);case 5:for(L=Lt.h,$=L.keyIds,N=L.drmInfos,K=function(Cn,zt){return Cn.size===zt.size&&[].concat(_(Cn)).every(function(_n){return zt.has(_n)})},K(R.keyIds,$)||(R.keyIds=$,R.drmInfos=N,e.h.newDrmInfo(R)),O=M2(e,T,D,E,t.M,t.type),H=O.segments,(J=O.bandwidth)&&(R.bandwidth=J),oe=$f(R),se=b(H),ye=se.next();!ye.done;ye=se.next())le=ye.value,le.$&&(le.$.Hc=oe);R.segmentIndex.rd(H,e.l.mb()),H.length&&(ue=Ia(T.g,"EXT-X-MEDIA-SEQUENCE",0),Ee=(ce=vo(T.g,"EXT-X-SKIP"))?Number(Je(ce,"SKIPPED-SEGMENTS")):0,Te=C2(ue,H),Ae=Te.ob,Oe=Te.pb,t.ob=Ae+Ee,t.pb=Oe,_e=D.get(ue),R.segmentIndex.Ma(_e)),(ze=R.segmentIndex.O[0]||null)&&(t.mc=ze.startTime,yt=H[H.length-1],t.Jb=yt.endTime),vo(T.g,"EXT-X-ENDLIST")&&(t.ed=!0),Mm(e,T),_m(e,T.g,R.type,E,t.M),q(Lt)}})}w.onExpirationUpdated=function(){},w.onInitialVariantChosen=function(){},w.banLocation=function(e){this.j&&this.j.banLocation(e)},w.setMediaElement=function(e){this.ba=e};function h2(e,t){for(var n=e.H==-1,r=b(t),a=r.next();!a.done;a=r.next()){a=a.value;var u=a.stream.segmentIndex,c=km(e,a);if(u=u.O[0]||null){c=b(c);for(var d=c.next();!d.done;d=c.next()){d=b(d.value);var p=d.next().value;if(d.next().value==u.startTime){n&&(e.H=Math.max(e.H,p)),a.Re=p;break}}}}if(!(0>e.H))for(t=b(t),n=t.next();!n.done;n=t.next())n=n.value,uu(e,n.type)&&(r=n.stream.segmentIndex)&&(a=e.H-n.Re,0<a&&(r.O.splice(0,a),r=r.O[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),d2(e,n,r)))}function Q4(e,t){if(e.fa==1/0){t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value.stream.segmentIndex.O[0]||null,n!=null&&n.h!=null&&(e.fa=Math.min(e.fa,n.h))}if(t=e.fa,t!=1/0){n=b(e.i.values());for(var r=n.next();!r.done;r=n.next())if(r=r.value,!uu(e,r.type)){var a=r.stream.segmentIndex;if(a!=null){var u=a.O[0]||null;if(u)if(u.h==null)Tt("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.M(),"Expect AV sync issues!");else for(d2(e,r,u.h-t-u.startTime),r=b(a),a=r.next();!a.done;a=r.next())a.value.Vf(t)}}}}function d2(e,t,n){t.mc+=n,t.Jb+=n,e=km(e,t);for(var r=b(e),a=r.next();!a.done;a=r.next()){var u=b(a.value);a=u.next().value,u=u.next().value,e.set(a,u+n)}t.M()}function Z4(e,t,n){var r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye,le,ue,ce,Ee,Te,Ae,Oe,_e,ze;return V(function(yt){switch(yt.g){case 1:return r=Gn,a=Cm(e.Fa,t),u=xi(a.g,"EXT-X-DEFINE"),c=[],d=[],p=[],e.l=new at(null,0),e.l.sc(!0),S=function(){return[n]},T=null,k=new Map,a.type==1?(e.R=!1,K=xi(a.g,"EXT-X-DEFINE"),k=Am(e,K,e.L),T=r.ga,O="",H=new Map,I(yt,S2(e,e.B++,k,a,S,"",T,O,!0,"Media Playlist",null,H,null,!1,null,!1),7)):(e3(e,u),A=xi(a.g,"EXT-X-MEDIA"),E=xi(a.g,"EXT-X-STREAM-INF"),R=xi(a.g,"EXT-X-IMAGE-STREAM-INF"),D=xi(a.g,"EXT-X-I-FRAME-STREAM-INF"),L=xi(a.g,"EXT-X-SESSION-KEY"),$=xi(a.g,"EXT-X-SESSION-DATA"),N=xi(a.g,"EXT-X-CONTENT-STEERING"),n3(e,$),I(yt,o3(e,N),4));case 4:return t3(e,E),f3(e,A),I(yt,a3(e,E,L,A,S,e.s),5);case 5:return c=yt.h,d=i3(e,A),I(yt,r3(e,R,D),6);case 6:p=yt.h,yt.u(3);break;case 7:J=yt.h,e.i.set(n,J),J.stream&&(oe=$f(J.stream),J.stream.segmentIndex.Hb(function(Lt){Lt.$&&(Lt.$.Hc=oe)})),T=J.stream.type,c.push({id:0,language:Kt(O||"und"),disabledUntilTime:0,primary:!0,audio:T=="audio"?J.stream:null,video:T=="video"?J.stream:null,bandwidth:J.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new re(2,7,7001);if(a.type==1&&(Xo(e)&&(E2(e,a),se=e.o,e.A.Y(se)),ye=Array.from(e.i.values()),Im(e,ye),Em(e),_m(e,a.g,T,k,S)),e.m={presentationTimeline:e.l,variants:c,textStreams:d,imageStreams:p,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.ea||!e.g.hls.disableCodecGuessing){yt.u(8);break}for(le=[],ue=b(e.m.variants),ce=ue.next();!ce.done;ce=ue.next())Ee=ce.value,Ee.audio&&Ee.audio.codecs===""&&le.push(Ee.audio.createSegmentIndex()),Ee.video&&Ee.video.codecs===""&&le.push(Ee.video.createSegmentIndex());return I(yt,Promise.all(le),8);case 8:if(e.h.makeTextStreamsForClosedCaptions(e.m),c.length==1){for(Te=[],Ae=c[0],Oe=b([Ae.video,Ae.audio]),_e=Oe.next();!_e.done;_e=Oe.next())(ze=_e.value)&&!ze.segmentIndex&&Te.push(ze.createSegmentIndex());if(0<Te.length)return I(yt,Promise.all(Te),0)}yt.u(0)}})}function J4(e,t){var n,r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se;return V(function(ye){switch(ye.g){case 1:if(n=zf(e.g.hls.mediaPlaylistFullMimeType),!t.length)return ye.return(n);if(r=_2(e,t),a=r.segment,u=r.segmentIndex,c=a.M(),d=c[0],p=new Sn(d),S=p.Pa.split(".").pop(),T=Dm[S])return ye.return(zf(T));if(k=Fi,E=A=null,R=a.$,!R){ye.u(2);break}return D=sa(R.M(),R.Xb(),R.Ub(),e.g.retryParameters),I(ye,br(e,D,k,{type:0}),3);case 3:if(L=ye.h,A=L.data,!R.aesKey){ye.u(4);break}return I(ye,xp(A,R.aesKey,0),5);case 5:A=ye.h;case 4:(E=L.headers["content-type"])&&(E=E.split(";")[0].toLowerCase());case 2:return $=sa(a.M(),a.Xb(),a.Ub(),e.g.retryParameters),I(ye,br(e,$,k,{type:1}),6);case 6:if(N=ye.h,K=N.data,!a.aesKey){ye.u(7);break}return I(ye,xp(K,a.aesKey,u),8);case 8:K=ye.h;case 7:if((O=N.headers["content-type"])&&(O=O.split(";")[0].toLowerCase()),H="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),J=["audio/mp4","video/mp4","video/iso.segment"],Ll(st(K))){var le=K,ue=st(le);ue=new an().parse(ue);var ce=ue.$c();ue=ue.kf();var Ee=[],Te=!1,Ae=!1;switch(ce.audio){case"aac":case"aac-loas":Ee.push("mp4a.40.2"),Te=!0;break;case"mp3":Ee.push("mp4a.40.34"),Te=!0;break;case"ac3":Ee.push("ac-3"),Te=!0;break;case"ec3":Ee.push("ec-3"),Te=!0;break;case"opus":Ee.push("opus"),Te=!0}switch(ce.video){case"avc":ue.codec?Ee.push(ue.codec):Ee.push("avc1.42E01E"),Ae=!0;break;case"hvc":ue.codec?Ee.push(ue.codec):Ee.push("hvc1.1.6.L93.90"),Ae=!0;break;case"av1":Ee.push("av01.0.01M.08"),Ae=!0}if(Ee.length){if(ce=Te&&!Ae,Te=new Map,Ae){Ae=new fn("video/mp2t"),Ae.i(le),le=b(Ae.j());for(var Oe=le.next();!Oe.done;Oe=le.next())Oe=Oe.value,Te.set(Oe,Oe);Ae.g()}ue={type:ce?"audio":"video",mimeType:"video/mp2t",codecs:Ee.join(", "),language:null,height:ue.height,width:ue.width,channelCount:null,sampleRate:null,closedCaptions:Te,xd:null,colorGamut:null}}else ue=null;if(oe=ue)return ye.return(oe)}else if((H.includes(S)||J.includes(O)||E&&J.includes(E))&&(se=Kk(A,K)))return ye.return(se);return O?ye.return(zf(O)):E?ye.return(zf(E)):ye.return(n)}})}function Em(e){if(Xo(e)){if(e.xa==Fc){for(var t,n=t=1/0,r=b(e.i.values()),a=r.next();!a.done;a=r.next())a=a.value,a.stream.segmentIndex&&a.stream.type!="text"&&(t=Math.min(t,a.Jb),n=Math.min(n,a.mc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.A),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.pe(t)}}else e.l.Za(x2(e));if(!e.l.s)for(t=b(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.bh(n.h);e.l.Wd()}function e3(e,t){var n=new Sn(e.L).g;t=b(t);for(var r=t.next();!r.done;r=t.next()){var a=r.value;r=Je(a,"NAME");var u=Je(a,"VALUE");a=Je(a,"QUERYPARAM"),r&&u&&(e.s.has(r)||e.s.set(r,u)),a&&(r=n.get(a)[0])&&!e.s.has(r)&&e.s.set(a,r)}}function Am(e,t,n){n=new Sn(n).g;var r=new Map;t=b(t);for(var a=t.next();!a.done;a=t.next()){var u=a.value,c=Je(u,"NAME"),d=Je(u,"VALUE");a=Je(u,"QUERYPARAM"),u=Je(u,"IMPORT"),c&&d&&(r.has(c)||r.set(c,d)),a&&(c=n.get(a)[0])&&!r.has(c)&&r.set(a,c),u&&(a=e.s.get(u))&&r.set(u,a)}return r}function t3(e,t){t=b(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,a=Je(r,"AUDIO");n=Je(r,"VIDEO");var u=Je(r,"SUBTITLES");if(r=p2(e,r),u){var c=jo(Nt,r);e.F.set(u,c),Zt(r,c)}a&&(u=jo("audio",r),u||(u=e.g.hls.defaultAudioCodec),e.F.set(a,u)),n&&(a=jo("video",r),a||(a=e.g.hls.defaultVideoCodec),e.F.set(n,a))}}function n3(e,t){t=b(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,a=Je(r,"DATA-ID");n=Je(r,"URI");var u=Je(r,"LANGUAGE");r=Je(r,"VALUE"),a=new Map().set("id",a),n&&a.set("uri",zr([e.L],n,e.s)[0]),u&&a.set("language",u),r&&a.set("value",r),n=new He("sessiondata",a),e.h&&e.h.onEvent(n)}}function o3(e,t){var n,r,a,u,c,d;return V(function(p){if(!e.h||!e.g)return p.return();for(r=b(t),a=r.next();!a.done;a=r.next())if(u=a.value,c=Je(u,"PATHWAY-ID"),d=Je(u,"SERVER-URI"),c&&d){e.j=new ka(e.h),e.j.configure(e.g),e.j.i=[e.L],e.j.setManifestType("HLS"),e.j.h=c,n=tu(e.j,d);break}return I(p,n,0)})}function i3(e,t){var n=s2(t,"SUBTITLES");t=n.map(function(c){if(e.g.disableText)return null;try{return v2(e,[c],new Map).stream}catch(d){if(e.g.hls.ignoreTextStreamFailures)return null;throw d}}),n=b(n);for(var r=n.next();!r.done;r=n.next()){var a=Yt(r.value,"GROUP-ID");if((r=e.F.get(a))&&(a=e.G.get(a))){a=b(a);for(var u=a.next();!u.done;u=a.next())u=u.value,u.stream.codecs=r,u.stream.mimeType=Rm(Nt,r)||Nc(Nt),Ma(u.stream)}}return t.filter(function(c){return c})}function Ma(e){var t=new Set([Wn(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Hb(function(n){n.mimeType&&t.add(Wn(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function r3(e,t,n){var r,a;return V(function(u){return u.g==1?(r=t.map(function(c){var d,p;return V(function(S){if(S.g==1)return e.g.disableThumbnails?S.return(null):(ee(S,2),I(S,c3(e,c),4));if(S.g!=2)return d=S.h,S.return(d.stream);if(p=Y(S),e.g.hls.ignoreImageStreamFailures)return S.return(null);throw p})}).concat(n.map(function(c){if(e.g.disableThumbnails)return null;try{var d=Yt(c,"URI"),p=Je(c,"CODECS")||"";if(e.i.has(d))var S=e.i.get(d);else{var T=Je(c,"LANGUAGE"),k=Je(c,"NAME"),A=Je(c,"CHARACTERISTICS"),E=Oc(e,e.B++,[d],p,"image",T,!1,k,null,null,A,!1,null,!1),R=Je(c,"RESOLUTION"),D=b(R?R.split("x"):[null,null]),L=D.next().value,$=D.next().value;E.stream.width=Number(L)||void 0,E.stream.height=Number($)||void 0;var N=Je(c,"BANDWIDTH");N&&(E.stream.bandwidth=Number(N)),e.i.set(d,E),S=E}return c=S,c.stream.codecs!=="mjpg"?null:c.stream}catch(K){if(e.g.hls.ignoreImageStreamFailures)return null;throw K}})),I(u,Promise.all(r),2)):(a=u.h,u.return(a.filter(function(c){return c})))})}function s3(e,t,n){t=t.filter(function(d){var p=Je(d,"URI")||"";return Je(d,"TYPE")!="SUBTITLES"&&p!=""});var r={};t=b(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var u=o2(a,!e.j);r[u]?r[u].push(a):r[u]=[a]}for(var c in r)v2(e,r[c],n)}function a3(e,t,n,r,a,u){var c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye,le,ue,ce,Ee,Te,Ae,Oe,_e,ze,yt,Lt,Cn,zt,_n,Hn;return V(function(Tn){switch(Tn.g){case 1:if(c=[],d=new Set,!(0<n.length)){Tn.u(2);break}p=b(n),S=p.next();case 3:if(S.done){Tn.u(2);break}if(T=S.value,k=Yt(T,"METHOD"),A=Je(T,"KEYFORMAT")||"identity",E=null,k=="NONE"){Tn.u(4);break}if(Bc(k)){R=zr(a(),Yt(T,"URI"),u),D=R.sort().join(""),e.K.has(D)||(L=oo(R,e.g.retryParameters),$=br(e,L,6),e.K.set(D,$)),Tn.u(4);break}if(A!="identity"){E=(N=O2[A])?N(T,""):null,Tn.u(6);break}return I(Tn,D2(e,T,"",a,null,u),9);case 9:E=Tn.h;case 6:if(E){if(E.keyIds)for(K=b(E.keyIds),O=K.next();!O.done;O=K.next())H=O.value,d.add(H);c.push(E)}case 4:S=p.next(),Tn.u(3);break;case 2:for(J={},oe=b(t),se=oe.next();!se.done;se=oe.next())ye=se.value,le=o2(ye,!e.j),J[le]?J[le].push(ye):J[le]=[ye];ue=[];for(ce in J)Ee=J[ce],Te=Ee[0],Ae=Je(Te,"FRAME-RATE"),Oe=Number(Je(Te,"AVERAGE-BANDWIDTH"))||Number(Yt(Te,"BANDWIDTH")),_e=Je(Te,"RESOLUTION"),ze=b(_e?_e.split("x"):[null,null]),yt=ze.next().value,Lt=ze.next().value,Cn=Je(Te,"VIDEO-RANGE"),(zt=Je(Te,"REQ-VIDEO-LAYOUT"))&&zt.includes(",")&&(_n=zt.split(",").filter(function(Xt){return Xt=="CH-STEREO"||Xt=="CH-MONO"}),zt=_n[0]),zt=zt||"CH-MONO",Hn=l3(e,Ee,r),ue.push.apply(ue,_(u3(e,Hn.audio,Hn.video,Oe,yt,Lt,Ae,Cn,zt,c,d)));return Tn.return(ue.filter(function(Xt){return Xt!=null}))}})}function l3(e,t,n){for(var r={audio:[],video:[]},a=new Map,u=[],c=!1,d=!1,p=b(t),S=p.next();!S.done;S=p.next()){var T=S.value;S=Je(T,"AUDIO");var k=Je(T,"VIDEO"),A=S||k;A&&(u.includes(A)||u.push(A),(T=Je(T,"PATHWAY-ID"))&&a.set(A,T),S?c=!0:k&&(d=!0))}u.length&&n.length&&(p=n.filter(function(D){return u.includes(Yt(D,"GROUP-ID"))}),s3(e,p,a)),p=(a=u.sort().join(","))&&e.G.has(a)?e.G.get(a):[],c?r.audio.push.apply(r.audio,_(p)):d&&r.video.push.apply(r.video,_(p)),S=!1;var E=t.map(function(D){return Yt(D,"URI")});if(d=r.audio.find(function(D){return D&&D.M().find(function(L){return E.includes(L)})}),c=p2(e,t[0]),k=jo("video",c),(A=jo("audio",c))&&!k?(d="audio",S=0<r.audio.length):!r.audio.length&&!r.video.length&&A&&k?(d="video",c=[[k,A].join()]):r.audio.length&&d?(d="audio",S=!0):d=r.video.length&&!r.audio.length?"audio":"video",!S){var R=T=A=k=S=null;!p.length&&(n=n.find(function(D){var L=Je(D,"URI")||"",$=Je(D,"TYPE");return D=Yt(D,"GROUP-ID"),$!="SUBTITLES"&&L==""&&u.includes(D)}))&&(S=Je(n,"LANGUAGE"),k=Je(n,"NAME"),A=m2(n),y2(n),T=Je(n,"CHARACTERISTICS"),R=g2(n)),e=h3(e,t,c,d,S,k,A,T,R),a&&(e.stream.groupId=a),r[e.stream.type]=[e]}return r}function p2(e,t){var n=Je(t,"CODECS")||"";return t=Je(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,_(t))),vp(e)}function m2(e){return(e=Je(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function g2(e){return(e=Je(e,"SAMPLE-RATE"))?parseInt(e,10):null}function y2(e){return(e=Je(e,"CHANNELS"))?e.includes("/JOC"):!1}function u3(e,t,n,r,a,u,c,d,p,S,T){for(var k=b(n),A=k.next();!A.done;A=k.next())R2(A.value.stream,a,u,c,d,p,null);for(a=e.g.disableAudio,(!t.length||a)&&(t=[null]),a=e.g.disableVideo,(!n.length||a)&&(n=[null]),a=[],t=b(t),u=t.next();!u.done;u=t.next())for(u=u.value,c=b(n),d=c.next();!d.done;d=c.next()){var E=d.value;(d=u?u.stream:null)&&(d.drmInfos=S,d.keyIds=T),(p=E?E.stream:null)&&(p.drmInfos=S,p.keyIds=T),p&&!d&&(p.bandwidth=r),!p&&d&&(d.bandwidth=r),k=u?u.stream.drmInfos:null,A=E?E.stream.drmInfos:null,E=E?E.M().sort().join(","):"";var R=u?u.M().sort().join(","):"";E=E+" - "+R,d&&p&&!Dg(k,A)||e.ub.has(E)||(d={id:e.B++,language:d?d.language:"und",disabledUntilTime:0,primary:!!d&&d.primary||!!p&&p.primary,audio:d,video:p,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},a.push(d),e.ub.add(E))}return a}function f3(e,t){t=s2(t,"CLOSED-CAPTIONS"),e.R=t.length==0,t=b(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,a=Je(r,"LANGUAGE");n=Kt(a||"und"),a||(a=Je(r,"NAME"))&&(n=a),a=Yt(r,"GROUP-ID"),r=Yt(r,"INSTREAM-ID").replace("SERVICE","svc"),e.C.get(a)||e.C.set(a,new Map),e.C.get(a).set(r,n)}}function v2(e,t,n){for(var r=[],a=[],u=new Map,c=b(t),d=c.next();!d.done;d=c.next()){var p=d.value;d=Yt(p,"URI"),p=Yt(p,"GROUP-ID"),r.push(d),a.push(p),u.set(p,d)}if(c=a.sort().join(","),d=t[0],t="",p=Yt(d,"TYPE").toLowerCase(),p=="subtitles"&&(p=Nt),p==Nt)t=Je(d,"CODECS")||"";else{a=b(a);for(var S=a.next();!S.done;S=a.next())if(S=S.value,e.F.has(S)){t=e.F.get(S);break}}if(a=r.sort().join(","),e.i.has(a))return e.i.get(a);if(S=e.B++,e.j){u=b(u);for(var T=u.next();!T.done;T=u.next()){var k=b(T.value);T=k.next().value,k=k.next().value,(T=n.get(T))&&Ea(e.j,S,T,k)}}n=Je(d,"LANGUAGE"),u=Je(d,"NAME"),T=Je(d,"DEFAULT")=="YES",k=p=="audio"?m2(d):null;var A=p=="audio"?y2(d):!1,E=Je(d,"CHARACTERISTICS"),R=Je(d,"FORCED")=="YES";return d=p=="audio"?g2(d):null,r=Oc(e,S,r,t,p,n,T,u,k,null,E,R,d,A),r.stream&&(r.stream.groupId=c),e.G.has(c)?e.G.get(c).push(r):e.G.set(c,[r]),e.i.set(a,r),r}function c3(e,t){var n,r,a,u,c,d,p,S,T,k;return V(function(A){return A.g==1?(n=Yt(t,"URI"),r=Je(t,"CODECS","jpeg")||"",e.i.has(n)?A.return(e.i.get(n)):(a=Je(t,"LANGUAGE"),u=Je(t,"NAME"),c=Je(t,"CHARACTERISTICS"),d=Oc(e,e.B++,[n],r,"image",a,!1,u,null,null,c,!1,null,!1),(p=Je(t,"RESOLUTION"))?I(A,d.stream.createSegmentIndex(),3):A.u(2))):(A.g!=2&&(S=d.stream.segmentIndex.get(0),T=S.tilesLayout)&&(d.stream.width=Number(p.split("x")[0])*Number(T.split("x")[0]),d.stream.height=Number(p.split("x")[1])*Number(T.split("x")[1])),(k=Je(t,"BANDWIDTH"))&&(d.stream.bandwidth=Number(k)),e.i.set(n,d),A.return(d))})}function h3(e,t,n,r,a,u,c,d,p){for(var S=e.B++,T=[],k=b(t),A=k.next();!A.done;A=k.next()){var E=A.value;A=Yt(E,"URI"),E=Je(E,"PATHWAY-ID"),e.j&&E&&Ea(e.j,S,E,A),T.push(A)}if(k=T.sort().join(","),e.i.has(k))return e.i.get(k);e:{if(t=Je(t[0],"CLOSED-CAPTIONS"),r=="video"){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if(t!="NONE"){t=e.C.get(t);break e}e.R=!1}else if(!t&&e.C.size)for(t=b(e.C.keys()).next();!t.done;){t=e.C.get(t.value);break e}}t=null}return n=Fs(r,n),r=Oc(e,S,T,n,r,a,!1,u,c,t,d,!1,p,!1),e.i.set(k,r),r}function Oc(e,t,n,r,a,u,c,d,p,S,T,k,A,E){function R(H){var J,oe,se,ye,le,ue,ce,Ee,Te,Ae,Oe,_e,ze,yt,Lt,Cn,zt,_n,Hn,Tn,Xt,Nn;return V(function(Qn){switch(Qn.g){case 1:return J=Gn,oe=N.M(),ee(Qn,2),I(Qn,Lm(e,N.M(),!0),4);case 4:se=Qn.h,ne(Qn,3);break;case 2:if(ye=Y(Qn),L.closeSegmentIndex(),e.h.disableStream(L))return Qn.return();throw ye;case 3:if(H.aborted)return Qn.return();if(le=se.uri,le==se.originalUri||oe.includes(le)||$.push(le),ue=Cm(e.Fa,se.data),ue.type!=1)throw new re(2,4,4017);return ce=xi(ue.g,"EXT-X-DEFINE"),Ee=Am(e,ce,le),Te=!1,(!e.ea&&e.g.hls.disableCodecGuessing||e.R&&a==J.ga&&!e.g.hls.disableClosedCaptionsDetection)&&0<ue.segments.length&&(e.R=!1,Te=!0),Ae=!e.ea&&e.g.hls.disableCodecGuessing,Oe=Xo(e),I(Qn,S2(e,0,Ee,ue,D,r,a,u,c,d,p,S,T,k,A,E,void 0,Te,Ae),5);case 5:if(_e=Qn.h,H.aborted)return Qn.return();if(ze=_e.stream,Xo(e)&&!Oe&&E2(e,ue),N.mc=_e.mc,N.Jb=_e.Jb,N.Gd=_e.Gd,N.Fd=_e.Fd,N.ed=_e.ed,N.Yd=_e.Yd,N.ob=_e.ob,N.pb=_e.pb,N.vf=!0,L.segmentIndex=ze.segmentIndex,L.encrypted=ze.encrypted,L.drmInfos=ze.drmInfos,L.keyIds=ze.keyIds,L.mimeType=ze.mimeType,L.bandwidth=L.bandwidth||ze.bandwidth,L.codecs=L.codecs||ze.codecs,L.closedCaptions=L.closedCaptions||ze.closedCaptions,L.width=L.width||ze.width,L.height=L.height||ze.height,L.hdr=L.hdr||ze.hdr,L.colorGamut=L.colorGamut||ze.colorGamut,L.language=="und"&&ze.language!="und"&&(L.language=ze.language),L.language=L.language||ze.language,L.channelsCount=L.channelsCount||ze.channelsCount,L.audioSamplingRate=L.audioSamplingRate||ze.audioSamplingRate,Ma(L),L.drmInfos.length&&e.h.newDrmInfo(L),yt=!1,(!S&&L.closedCaptions||S&&L.closedCaptions&&S.size!=L.closedCaptions.size)&&(yt=!0),e.m&&yt&&e.h.makeTextStreamsForClosedCaptions(e.m),a==J.ga||a==J.X)for(Lt=b(e.i.values()),Cn=Lt.next();!Cn.done;Cn=Lt.next())zt=Cn.value,zt.vf||zt.type!=a||(zt.stream.mimeType=ze.mimeType,Ma(zt.stream));a==J.ua&&(_n=ze.segmentIndex.get(0))&&_n.$&&(L.mimeType="application/mp4",Ma(L)),Hn=$f(L),L.segmentIndex.Hb(function(Zn){Zn.$&&(Zn.$.Hc=Hn)}),d3(e)&&(e.Gb?Im(e,[N]):(e.Gb=!0,Tn=Array.from(e.i.values()),Xt=Tn.filter(function(Zn){return Zn.stream.segmentIndex}),Im(e,Xt),Em(e),Nn=e.o,0<Nn&&e.A.Y(Nn))),_m(e,ue.g,L.type,Ee,D),q(Qn)}})}function D(){return e.j&&1<n.length?nu(e.j,t):$.concat(a2([e.L],n,e.s))}var L=T2(e,r,a,u,c,d,p,S,T,k,A,E),$=[],N={stream:L,type:a,Tg:$,M:D,mc:0,Jb:0,Yd:new Map,Gd:!1,Fd:!1,ed:!1,Re:-1,ob:-1,pb:-1,vf:!1},K=null,O=new AbortController;return L.createSegmentIndex=function(){return K||(O=new AbortController,K=new Promise(function(H){H(R(O.signal))}))},L.closeSegmentIndex=function(){K&&!L.segmentIndex&&O.abort(),L.segmentIndex&&(L.segmentIndex.release(),L.segmentIndex=null),K=null},N}function x2(e){var t=1/0;e=b(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.Jb));return t}function w2(e,t){var n=[];t=b(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.Hb(function(a){n.push(a)});e.l.sd(n)}function Im(e,t){if(!Xo(e))for(var n=x2(e),r=b(t),a=r.next();!a.done;a=r.next())a.value.stream.segmentIndex.Bc(0,n);w2(e,t.map(function(u){return u.stream})),e.g.hls.ignoreManifestProgramDateTime?h2(e,t):(Q4(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&h2(e,t))}function uu(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function d3(e){if(!e.m)return!1;var t=[],n=[];e=b(e.m.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(a){return a.segmentIndex})||0<n.length&&!n.some(function(a){return a.segmentIndex}))}function S2(e,t,n,r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N){$=$===void 0?!0:$,N=N===void 0?!0:N;var K,O,H,J,oe,se,ye,le,ue,ce,Ee,Te,Ae,Oe,_e,ze,yt,Lt,Cn,zt,_n,Hn,Tn,Xt,Nn,Qn;return V(function(Zn){switch(Zn.g){case 1:var Yo=vo(r.g,"EXT-X-PLAYLIST-TYPE"),Qo=vo(r.g,"EXT-X-ENDLIST");if(Qo=Yo&&Yo.value=="VOD"||Qo,Yo=Yo&&Yo.value=="EVENT"&&!Qo,Yo=!Qo&&!Yo,Qo?Uc(e,jc):Yo?Uc(e,Fc):Uc(e,N2),Xo(e)&&Mm(e,r),K=Xo(e)?e.N.get(c):new Map,O=M2(e,r,K,n,a,c),H=O.segments,J=O.bandwidth,le=ye=se=oe=null,!(0<H.length&&$)){Zn.u(2);break}return I(Zn,J4(e,H),3);case 3:ue=Zn.h,c=ue.type,d=ue.language,T=ue.channelCount,R=ue.sampleRate,e.g.disableText||(k=ue.closedCaptions),se=ue.height,oe=ue.width,ye=ue.xd,le=ue.colorGamut,N&&(L=ue.mimeType,u=ue.codecs);case 2:if(L){Zn.u(4);break}return I(Zn,g3(e,c,u,H),5);case 5:L=Zn.h;case 4:return I(Zn,b2(e,r,L,a,n),6);case 6:if(ce=Zn.h,Ee=ce.drmInfos,Te=ce.keyIds,Ae=ce.encrypted,Oe=ce.wh,Ae&&!Ee.length&&!Oe)throw new re(2,4,4026);return _e=T2(e,u,c,d,p,S,T,k,A,E,R,D),_e.encrypted=Ae,_e.drmInfos=Ee,_e.keyIds=Te,_e.mimeType=L,J&&(_e.bandwidth=J),Ma(_e),c=="video"&&(oe||se||ye||le)&&R2(_e,oe,se,null,ye,null,le),Xo(e)&&Mm(e,r),ze=H[0].startTime,yt=H[H.length-1],Lt=yt.endTime,Cn=new $t(H),_e.segmentIndex=Cn,_n=(zt=vo(r.g,"EXT-X-SERVER-CONTROL"))?lu(zt,"CAN-SKIP-UNTIL")!=null:!1,Hn=zt?lu(zt,"CAN-BLOCK-RELOAD")!=null:!1,Tn=Ia(r.g,"EXT-X-MEDIA-SEQUENCE",0),Xt=C2(Tn,H),Nn=Xt.ob,Qn=Xt.pb,Zn.return({stream:_e,type:c,Tg:[],M:a,mc:ze,Jb:Lt,Gd:_n,Fd:Hn,ed:!1,Re:-1,ob:Nn,pb:Qn,Yd:K,vf:!1})}})}function C2(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{ob:e,pb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].preload||(e++,n=0),{ob:e,pb:n}):(e++,t.m&&(n=0),{ob:e,pb:n})}function T2(e,t,n,r,a,u,c,d,p,S,T,k){var A=Rm(n,t)||Nc(n),E=[];if(p){p=b(p.split(","));for(var R=p.next();!R.done;R=p.next())E.push(R.value)}return p=void 0,R=null,n==Nt?p=E.includes("public.accessibility.transcribes-spoken-dialog")&&E.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":E.includes("public.accessibility.describes-video")&&(R="visually impaired"),E.length||p!=="subtitle"||E.push("subtitle"),e={id:e.B++,originalId:u,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:A,codecs:t,kind:n==Nt?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Kt(r||"und"),originalLanguage:r,label:u,type:n,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:E,forced:S,channelsCount:c,audioSamplingRate:T,spatialAudio:k,closedCaptions:d,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:R,external:!1,fastSwitching:!1,fullMimeTypes:new Set},Ma(e),e}function b2(e,t,n,r,a){var u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye,le,ue,ce,Ee,Te,Ae,Oe;return V(function(_e){switch(_e.g){case 1:if(u=new Map,t.segments){for(c=b(t.segments),d=c.next();!d.done;d=c.next())if(p=d.value,S=xi(p.g,"EXT-X-KEY"),T=null,S.length)for(T=A2(e,t,p.g,r,a),k=b(S),A=k.next();!A.done;A=k.next())E=A.value,u.set(E,T)}D=R=!1,L=[],$=new Set,N=b(u),K=N.next();case 2:if(K.done){_e.u(4);break}if(O=K.value,H=b(O),J=H.next().value,oe=H.next().value,se=J,ye=oe,le=Yt(se,"METHOD"),le=="NONE"){_e.u(3);break}if(R=!0,ue=Je(se,"KEYFORMAT")||"identity",ce=null,Bc(le)){D=!0,_e.u(3);break}if(ue!="identity"){ce=(Ee=O2[ue])?Ee(se,n):null,_e.u(6);break}return I(_e,D2(e,se,n,r,ye,a),8);case 8:ce=_e.h;case 6:if(ce){if(ce.keyIds)for(Te=b(ce.keyIds),Ae=Te.next();!Ae.done;Ae=Te.next())Oe=Ae.value,$.add(Oe);L.push(ce)}case 3:K=N.next(),_e.u(2);break;case 4:return _e.return({drmInfos:L,keyIds:$,encrypted:R,wh:D})}})}function k2(e,t,n,r,a){if(!h.crypto||!h.crypto.subtle)throw je("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new re(2,4,4042);var u=0,c=Je(t,"IV","");if(c){var d=is(c.substr(2));if(d.byteLength!=16)throw new re(2,4,4048)}else u=Ia(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+u,!e.oa.has(n)){var p={bitsKey:128,blockCipherMode:"CBC",iv:d,firstMediaSequenceNumber:u};switch(Yt(t,"METHOD")){case"AES-256":p.bitsKey=256;break;case"AES-256-CTR":p.bitsKey=256,p.blockCipherMode="CTR"}p.fetchKey=function(){var S,T,k,A,E,R;return V(function(D){if(D.g==1)return S=zr(r(),Yt(t,"URI"),a),T=S.sort().join(""),e.K.has(T)||(k=oo(S,e.g.retryParameters),A=br(e,k,6),e.K.set(T,A)),I(D,e.K.get(T),2);if(D.g!=3){if(E=D.h,!E.data||E.data.byteLength!=p.bitsKey/8)throw new re(2,4,4049);return R={name:p.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:p.bitsKey},I(D,h.crypto.subtle.importKey("raw",E.data,R,!0,["decrypt"]),3)}p.cryptoKey=D.h,p.fetchKey=void 0,q(D)})},e.oa.set(n,p)}return e.oa.get(n)}function Mm(e,t){var n=1/0,r=t.segments;if(r.length)for(var a=r.length-1;0<=a;){var u=vo(r[a].g,"EXTINF");if(u){n=Number(u.value.split(",")[0]);break}a--}if(r=vo(t.g,"EXT-X-TARGETDURATION"),!r)throw new re(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(a=vo(t.g,"EXT-X-PART-INF"))&&(e.U=Number(Yt(a,"PART-TARGET"))),t=vo(t.g,"EXT-X-SERVER-CONTROL"),e.I&&e.U?(e.o=e.Fb?5*e.U<=n?Math.min(e.U,e.o):Math.min(n,e.o):Math.min(e.U,e.o),e.Da=t?Number(Yt(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?lu(t,"HOLD-BACK"):null,e.za=n?Number(n.value):0),e.ab=Math.max(r,e.ab)}function E2(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.Da)t=e.Da;else if(e.za)t=e.za;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.ab*n}e.l.dh(0),e.l.Of(t),e.l.sc(!1)}function A2(e,t,n,r,a){var u=vo(n,"EXT-X-MAP");if(!u)return null;var c=Yt(u,"URI"),d=zr(r(),c,a);if(c=[d.toString(),Je(u,"BYTERANGE","")].join("-"),!e.qa.has(c)){var p=void 0,S=null;n=b(n);for(var T=n.next();!T.done;T=n.next())T=T.value,T.name=="EXT-X-KEY"?Bc(Yt(T,"METHOD"))&&T.id<u.id&&(p=k2(e,T,t,r,a)):T.name=="EXT-X-BYTERANGE"&&T.id<u.id&&(S=T);t=p3(d,u,S,p),e.qa.set(c,t)}return e.qa.get(c)}function p3(e,t,n,r){var a=0,u=null;return t=Je(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(a=t.split("@"),u=Number(a[0]),a=Number(a[1]),u=a+u-1,r&&(n=u+1-a,n%16&&(u+=16-n%16))),new $o(function(){return e},a,u,null,null,null,r)}function m3(e,t,n,r,a,u,c,d,p){function S(ze){ze=new Sn(ze).Pa.split(".").pop();var yt=Pm[c][ze];return yt||(yt=Dm[ze]),yt}var T=r.g,k=vo(T,"EXTINF"),A=0,E=0,R=null;r.zb.length&&(e.m.isLowLatency=!0);var D=null;if(!e.g.hls.ignoreManifestProgramDateTime){var L=vo(T,"EXT-X-PROGRAM-DATE-TIME");L&&L.value&&(D=Or(L.value))}var $=Nr;if(vo(T,"EXT-X-GAP")&&(e.m.gapCount++,$=2),!k){if(r.zb.length==0)throw new re(2,4,4024,"EXTINF");if(!e.I)return null}var N=[];L=!1;var K=null,O=!1,H=!1;if(e.I&&r.zb.length){A=t&&h.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var J=D,oe={},se=0;se<r.zb.length;oe={xe:void 0,ge:void 0},se++){var ye=r.zb[se],le=se==0?n:N[N.length-1],ue=se==0?a:le.endTime,ce=Number(Je(ye,"DURATION"))||e.U;if(ce){var Ee=ue+ce,Te=0,Ae=null;if(ye.name=="EXT-X-PRELOAD-HINT"?(Te=(Te=Je(ye,"BYTERANGE-START"))?Number(Te):0,(le=Je(ye,"BYTERANGE-LENGTH"))?Ae=Te+Number(le)-1:Te&&(Ae=Number.MAX_SAFE_INTEGER)):(Te=Je(ye,"BYTERANGE"),Ae=b(I2(le,Te)),Te=Ae.next().value,Ae=Ae.next().value),oe.ge=Je(ye,"URI"),oe.ge){le=Nr,Je(ye,"GAP")=="YES"&&(e.m.gapCount++,le=2,O=!0),oe.xe=null;var Oe=function(ze){return function(){return ze.xe==null&&(ze.xe=zr(d(),ze.ge,u)),ze.xe}}(oe);A&&0<=Te&&Ae!=null&&(K=Oe,L=!0),ue=new ct(ue,Ee,Oe,Te,Ae,t,0,0,1/0,[],"",null,J,le,p),ye.name=="EXT-X-PRELOAD-HINT"&&(ue.wf(),H=!0),Je(ye,"INDEPENDENT")!="YES"&&0<se&&ue.Xd(),(oe=S(oe.ge))&&(ue.mimeType=oe,P2.has(oe)&&(ue.$=null)),N.push(ue),J&&(J+=ce)}}}}if(k){if(k=Number(k.value.split(",")[0]),k==0)return null;A=a+k}else if(N.length)A=N[N.length-1].endTime;else return null;L&&(O||N[0].Ha!=0?(L=!1,K=null):N=[]),(k=vo(T,"EXT-X-BYTERANGE"))?(R=b(I2(n,k.value)),E=R.next().value,R=R.next().value):N.length&&(E=N[0].Ha,R=N[N.length-1].sa),n="",k=null,c=="image"&&(n="1x1",T=vo(T,"EXT-X-TILES"))&&(n=Yt(T,"LAYOUT"),(T=Je(T,"DURATION"))&&(k=Number(T)));var _e=null;return t=new ct(a,A,function(){return K?K():(_e==null&&(_e=zr(d(),r.h,u)),_e||[])},E,R,t,0,0,1/0,N,n,k,D,$,p,0<N.length&&!!r.h),(a=S(r.h))&&(t.mimeType=a,P2.has(a)&&(t.$=null)),L&&(e.Fb=!0,t.Ig(),H&&t.wf()),t}function I2(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.sa+1,r=n+t-1),[n,r]}function _m(e,t,n,r,a){if(n=="video"||n=="audio"){var u=e.l.m;if(u&&!uu(e,n))for(t=xi(t,"EXT-X-DATERANGE"),t=t.sort(function(D,L){return D=Yt(D,"START-DATE"),L=Yt(L,"START-DATE"),D<L?-1:D>L?1:0}),n=0;n<t.length;n++){var c=t[n],d=Yt(c,"ID");if(!e.Ea.has(d)){var p=Yt(c,"START-DATE"),S=Or(p);if(!isNaN(S)){p=Math.max(0,S-u);var T=null,k=Je(c,"END-DATE");if(k&&(k=Or(k),!isNaN(k)&&(T=k-u,0>T))||T==null&&(k=Je(c,"DURATION")||Je(c,"PLANNED-DURATION"))&&(k=parseFloat(k),isNaN(k)||(T=p+k),0>S-u+k))continue;k=Je(c,"CLASS")||"com.apple.quicktime.HLS";var A=Je(c,"END-ON-NEXT")=="YES";if(T==null&&A){for(A=n+1;A<t.length;A++){var E=Je(t[A],"CLASS")||"com.apple.quicktime.HLS";if(k==E&&(E=Yt(t[A],"START-DATE"),E=Or(E),!isNaN(E)&&E&&E>S)){T=Math.max(0,E-u);break}}if(T==null)continue}for(S="ID CLASS START-DATE END-DATE DURATION END-ON-NEXT".split(" "),A=[],c=b(c.attributes),E=c.next();!E.done;E=c.next())if(E=E.value,!S.includes(E.name)){var R=l2(E.value,r);(E.name=="X-ASSET-URI"||E.name=="X-ASSET-LIST")&&(R=zr(a(),E.value,r)[0]),A.push({key:E.name,description:"",data:R,mimeType:null,pictureType:null})}A.length&&e.h.onMetadata(k,p,T,A),e.Ea.add(d)}}}}}function M2(e,t,n,r,a,u){var c=t.segments,d=void 0,p=Ia(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),S=Ia(t.g,"EXT-X-MEDIA-SEQUENCE",0),T=vo(t.g,"EXT-X-SKIP"),k=T?Number(Je(T,"SKIPPED-SEGMENTS")):0,A=S+k,E=0;Xo(e)&&n.has(A)&&(E=n.get(A)),E===0&&e.xa==Fc&&0<n.size&&!n.has(A)&&(E=e.l.mb());var R=[],D=null;T=[];for(var L=0;L<c.length;L++){var $=c[L],N=L==0?E:D.endTime;A=S+k+L,vo($.g,"EXT-X-DISCONTINUITY")&&p++;for(var K=b($.g),O=K.next();!O.done;O=K.next())O=O.value,O.name=="EXT-X-KEY"&&(Bc(Yt(O,"METHOD"))?d=k2(e,O,t,a,r):d=void 0);n.set(A,N),K=A2(e,t,$.g,a,r),!e.I&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.I=e.h.isLowLatencyMode()),(N=m3(e,K,D,$,N,r,u,a,d))&&((D=Ia($.g,"EXT-X-BITRATE"))?T.push({bitrate:D,duration:N.endTime-N.startTime}):T.length&&(D=T.pop(),D.duration+=N.endTime-N.startTime,T.push(D)),D=N,N.i=p,uu(e,u)&&e.H!=null&&A<e.H||R.push(N))}if(t=void 0,T.length&&(t=T.reduce(function(H,J){return H+J.duration},0),t=Math.round(T.reduce(function(H,J){return H+J.bitrate*J.duration},0)/t*1e3)),T=R.some(function(H){return H.h!=null})){for(n={},r=0;r<R.length;n={Kd:void 0,Jd:void 0,Bd:void 0,pc:void 0,zd:void 0},r++)if(n.pc=R[r],n.pc.h==null)for(n.Jd=0,n.Kd=r,a=function(H){return function(){var J=R[H.Kd];if(J){if(J.h!=null)return J.h+H.Jd;H.Jd-=J.endTime-J.startTime,H.Kd+=1}return null}}(n),n.zd=0,n.Bd=r,c=function(H){return function(){var J=R[H.Bd];if(J){if(J!=H.pc&&(H.zd+=J.endTime-J.startTime),J.h!=null)return J.h+H.zd;--H.Bd}return null}}(n);n.pc.h==null;)n.pc.h=c(),n.pc.h==null&&(n.pc.h=a())}if(T)for(n=b(R),r=n.next();!r.done;r=n.next())for(a=r.value,r=a.h,a=b(a.g),c=a.next();!c.done;c=a.next())c=c.value,c.h=r,r+=c.endTime-c.startTime;if(n=e.fa,T&&n!=1/0&&!uu(e,u))for(e=b(R),u=e.next();!u.done;u=e.next())u.value.Vf(n);return{segments:R,bandwidth:t}}function Rm(e,t){if(e==Nt){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function Nc(e){return e==Nt?"text/vtt":Pm[e].mp4}function _2(e,t){e=Xo(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.Yb()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function g3(e,t,n,r){var a,u,c,d,p,S,T,k,A,E,R,D,L,$;return V(function(N){switch(N.g){case 1:return a=Fi,u=_2(e,r),c=u.segment,c.status==2?N.return(Nc(t)):(d=c.M(),p=new Sn(d[0]),S=p.Pa.split(".").pop(),T=Pm[t],(k=T[S])||(k=Dm[S])||(k=Rm(t,n))?N.return(k):(E=1,R=oo(d,e.g.retryParameters),ee(N,2),R.method="HEAD",I(N,br(e,R,a,{type:E}),4)));case 4:D=N.h,A=D.headers["content-type"],ne(N,3);break;case 2:if(L=Y(N),!L||L.code!=1002&&L.code!=1001){N.u(3);break}return R.method="GET",I(N,br(e,R,a,{type:E}),6);case 6:$=N.h,A=$.headers["content-type"];case 3:return A?N.return(A.toLowerCase().split(";")[0]):N.return(Nc(t))}})}function R2(e,t,n,r,a,u,c){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=a||void 0,e.videoLayout=u||void 0,e.colorGamut=c||void 0)}function Lm(e,t,n){return br(e,oo(t,e.g.retryParameters),0,{type:n?2:3})}function L2(e){var t,n,r,a,u,c;return V(function(d){switch(d.g){case 1:return e.h?(ee(d,2),t=Date.now(),I(d,e.update(),4)):d.return();case 4:n=Date.now(),Xo(e)&&(r=(n-t)/1e3,e.Db.sample(1,r),a=e.o,u=Math.max(0,a-lt(e.Db)),e.A.Y(u)),ne(d,3);break;case 2:if(c=Y(d),!e.h)return d.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(c),d.return();c.severity=1,e.h.onError(c),e.A.Y(.1);case 3:if(!e.h)return d.return();e.h.onManifestUpdated(),q(d)}})}function Xo(e){return e.xa!=jc}function Uc(e,t){e.xa=t,e.l&&e.l.sc(!Xo(e)),Xo(e)||e.A.stop()}function br(e,t,n,r){if(!e.da)throw new re(2,7,7001);return t=e.h.networkingEngine.request(n,t,r),fs(e.da,t),t.promise}function Bc(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function D2(e,t,n,r,a,u){var c,d,p,S,T,k,A,E,R,D,L,$,N,K,O;return V(function(H){switch(H.g){case 1:if(n=="video/mp2t")throw new re(2,4,4040);if(cf())throw new re(2,4,4041);if(c=Yt(t,"METHOD"),d=["SAMPLE-AES","SAMPLE-AES-CTR"],!d.includes(c))return H.return(null);if(p=zr(r(),Yt(t,"URI"),u),p[0].startsWith("data:text/plain;base64,")){S=ar(pi(p[0].split("data:text/plain;base64,").pop())),H.u(2);break}return T=p.sort().join(""),e.pa.has(T)||(k=oo(p,e.g.retryParameters),A=br(e,k,6),e.pa.set(T,A)),I(H,e.pa.get(T),3);case 3:E=H.h,S=ar(E.data);case 2:if(R="00000000000000000000000000000000",!a){H.u(4);break}if(e.ya.has(a)){D=e.ya.get(a),H.u(5);break}return L=sa(a.M(),a.Xb(),a.Ub(),e.g.retryParameters),$=Fi,I(H,br(e,L,$,{type:0}),6);case 6:N=H.h,D=Qk(N.data),e.ya.set(a,D);case 5:D&&(R=D);case 4:return K=new Map,K.set(R,S),O="cenc",c=="SAMPLE-AES"&&(O="cbcs"),H.return(jg(K,O))}})}ve("shaka.hls.HlsParser",Pc);var Dm={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},Pm={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},P2=new Set(["video/mp2t"].concat(_(Dr))),O2={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new re(2,4,4040);if(cf())throw new re(2,4,4041);if(t=Yt(e,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),rs("com.apple.fps",n,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],Yt(e,"URI"))},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Yt(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=Yt(e,"URI"),t=bm(t.split("?")[0]),t=st(t.data),n=rs("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=Je(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=Yt(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=Yt(e,"URI"),e=bm(e.split("?")[0]),e=st(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=Tf(e,t,new Set,0),rs("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},jc="VOD",N2="EVENT",Fc="LIVE",y3={sh:jc,qj:N2,yj:Fc};_i["application/x-mpegurl"]=function(){return new Pc},_i["application/vnd.apple.mpegurl"]=function(){return new Pc};function v3(e){var t=0,n=hn(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var a=n.getUint16(e,!0);if(e+=2,(a&1)!=0||a+e>n.byteLength){n=[];break e}var u=st(n,e,a);t.push({type:r,value:u}),e+=a}n=t}return n}function $c(e){if(e=U2(e))e:{e=b(Ii(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=Mi(t.value,"LA_URL")){e=qn(t);break e}e=""}else e="";return e}function U2(e){return e=pi(qn(e)),e=v3(e).filter(function(t){return t.type===x3})[0],e?(e=rr(e.value,!0),(e=Js(e,"WRMHEADER"))?e:null):null}var x3=1,w3=new Map().set("com.microsoft.playready",$c).set("com.microsoft.playready.recommendation",$c).set("com.microsoft.playready.software",$c).set("com.microsoft.playready.hardware",$c);function _a(e){if(!$2){$2=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);zc=Rt("ftyp",t,r,t,n),t=Rt("dref",R3),Om=Rt("dinf",t)}this.g=e}function Ra(e){for(var t=[],n=b(e.g),r=n.next();!r.done;r=n.next()){var a=t,u=a.push,c=r.value;r=Rt;var d=c.id+1,p=c.stream.width||0,S=c.stream.height||0;c.type=="audio"&&(S=p=0);var T=c.duration*c.timescale,k=Math.floor(T/(Vr+1));switch(T=Math.floor(T%(Vr+1)),d=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(_(xn(d,4)),[0,0,0,0],_(xn(k,4)),_(xn(T,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],_(xn(p,2)),[0,0],_(xn(S,2)),[0,0])),d=Rt("tkhd",d),p=Rt,k=c.duration*c.timescale,S=Math.floor(k/(Vr+1)),k=Math.floor(k%(Vr+1)),T=c.stream.language,T=T.charCodeAt(0)-96<<10|T.charCodeAt(1)-96<<5|T.charCodeAt(2)-96,S=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(_(xn(c.timescale,4)),_(xn(S,4)),_(xn(k,4)),_(xn(T,2)),[0,0])),S=Rt("mdhd",S),k=c,T=new Uint8Array([]),k.type){case"video":T=C3;break;case"audio":T=T3}k=Rt("hdlr",T);e:{switch(c.type){case"video":c=Rt("minf",Rt("vmhd",I3),Om,B2(c));break e;case"audio":c=Rt("minf",Rt("smhd",M3),Om,B2(c));break e}c=new Uint8Array([])}c=p("mdia",S,k,c),r=r("trak",d,c),u.call(a,r)}for(t=Pn.apply(Co,_(t)),u=e.g[0],n=Rt,r=u.duration*u.timescale,a=Math.floor(r/(Vr+1)),r=Math.floor(r%(Vr+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(_(xn(u.timescale,4)),_(xn(a,4)),_(xn(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),a=Rt("mvhd",a),r=[],e=b(e.g),p=e.next();!p.done;p=e.next())c=r,d=c.push,p=new Uint8Array([0,0,0,0].concat(_(xn(p.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),p=Rt("trex",p),d.call(c,p);if(e=Pn.apply(Co,_(r)),e=Rt("mvex",e),r=[],u.encrypted){for(u=b(u.stream.drmInfos),c=u.next();!c.done;c=u.next())if(c=c.value,c.initData)for(c=b(c.initData),d=c.next();!d.done;d=c.next())r.push(d.value.initData);u=Pn.apply(Co,_(r))}else u=new Uint8Array([]);return e=n("moov",a,t,e,u),t=new Uint8Array(zc.byteLength+e.byteLength),t.set(zc),t.set(e,zc.byteLength),t}function B2(e){var t=Rt,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.wa.byteLength)var a=Rt("avcC",e.wa);else{a=Rt;for(var u=7,c=[],d=[],p=0,S=0,T=0,k=0;k<e.$a.length;k++){var A=F2(e.$a[k]);switch(A[0]&31){case 7:c.push(A),u+=A.length+2;break;case 8:d.push(A),u+=A.length+2}}for(0<c.length&&(p=c[0][1],T=c[0][2],S=c[0][3]),u=new Uint8Array(u),k=0,u[k++]=1,u[k++]=p,u[k++]=T,u[k++]=S,u[k++]=255,u[k++]=224|c.length,p=0;p<c.length;p++)u[k++]=(c[p].length&65280)>>8,u[k++]=c[p].length&255,u.set(c[p],k),k+=c[p].length;for(u[k++]=d.length,c=0;c<d.length;c++)u[k++]=(d[c].length&65280)>>8,u[k++]=d[c].length&255,u.set(d[c],k),k+=d[c].length;a=a("avcC",u)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(_(xn(n,2)),_(xn(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",d=j2(e),c=new Uint8Array([]),e.encrypted&&(c=La(e),r="encv"),n=Rt(r,n,a,d,c)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,a=e.stream.height||0,n=new Uint8Array([]),0<e.wa.byteLength&&(n=Rt("hvcC",e.wa)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(_(xn(r,2)),_(xn(a,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),a="hvc1",d=j2(e),c=new Uint8Array([]),e.encrypted&&(c=La(e),a="encv"),n=Rt(a,r,n,d,c));break;case"audio":e.codecs.includes("mp3")?e=Rt(".mp3",fu(e)):e.codecs.includes("ac-3")?(n=Rt("dac3",e.ma),r="ac-3",a=new Uint8Array([]),e.encrypted&&(a=La(e),r="enca"),e=Rt(r,fu(e),n,a)):e.codecs.includes("ec-3")?(n=Rt("dec3",e.ma),r="ec-3",a=new Uint8Array([]),e.encrypted&&(a=La(e),r="enca"),e=Rt(r,fu(e),n,a)):e.codecs.includes("opus")?(n=Rt("dOps",e.ma),r="Opus",a=new Uint8Array([]),e.encrypted&&(a=La(e),r="enca"),e=Rt(r,fu(e),n,a)):(0<e.ma.byteLength?n=Rt("esds",e.ma):(n=Rt,r=e.id+1,a=e.stream.channelsCount||2,c=e.stream.audioSamplingRate||44100,p=Fs("audio",e.codecs.split(",")),S={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},d=S[c],(p==="mp4a.40.5"||p==="mp4a.40.29")&&(d=S[2*c]),c=parseInt(p.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(_(xn(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,c<<3|d>>>1,d<<7|a<<3,6,1,2])),n=n("esds",r)),r="mp4a",a=new Uint8Array([]),e.encrypted&&(a=La(e),r="enca"),e=Rt(r,fu(e),n,a)),n=e}return e=Rt("stsd",_3,n),t("stbl",e,Rt("stts",b3),Rt("stsc",k3),Rt("stsz",A3),Rt("stco",E3))}function j2(e){if(!e.Ba&&!e.Ca)return new Uint8Array([]);var t=e.Ca;return e=new Uint8Array([].concat(_(xn(e.Ba,4)),_(xn(t,4)))),Rt("pasp",e)}function fu(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(_(xn(e.stream.audioSamplingRate||44100,2)),[0,0]))}function La(e){for(var t=Rt,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,a=0;a<n.length;a+=1)r|=n.charCodeAt(a)<<8*(n.length-a-1);n=new Uint8Array([].concat(_(xn(r,4)))),n=Rt("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=Rt("schm",r),a=Rt;var u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=b(e.stream.drmInfos);for(var c=e.next();!c.done;c=e.next())if((c=c.value)&&c.keyIds&&c.keyIds.size){c=b(c.keyIds);for(var d=c.next();!d.done;d=c.next())u=F2(d.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),u=Rt("tenc",e,u),t("sinf",n,r,a("schi",u))}function cu(e){var t=[];e=b(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,a=r.apply,u=Rt,c=new Uint8Array([0,0,0,0].concat(_(xn(n.data?n.data.rb:0,4))));c=Rt("mfhd",c);var d,p=n.data?n.data.Ya:[],S=new Uint8Array(4+p.length);for(d=0;d<p.length;d++){var T=p[d].flags;S[d+4]=T.Va<<4|T.Xa<<2|T.Wa}p=Rt("sdtp",S);var k=p.length+92;S=Rt,d=new Uint8Array([0,0,0,58].concat(_(xn(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),d=Rt("tfhd",d),T=n.data?n.data.baseMediaDecodeTime:0;var A=Math.floor(T%(Vr+1));T=new Uint8Array([1,0,0,0].concat(_(xn(Math.floor(T/(Vr+1)),4)),_(xn(A,4)))),T=Rt("tfdt",T);var E=k;k=n.data?n.data.Ya:[],A=k.length;var R=12+16*A,D=new Uint8Array(R);for(E+=8+R,D.set([n.type==="video"?1:0,0,15,1].concat(_(xn(A,4)),_(xn(E,4))),0),E=0;E<A;E++){var L=k[E];R=xn(L.duration,4);var $=xn(L.size,4),N=L.flags;L=xn(L.cb,4),D.set([].concat(_(R),_($),[N.gb<<2|N.Va,N.Xa<<6|N.Wa<<4|N.hb,N.Ua&61440,N.Ua&15],_(L)),12+16*E)}k=Rt("trun",D),p=S("traf",d,T,k,p),u=u("moof",c,p),a.call(r,t,[u,S3(n)])}return Pn.apply(Co,_(t))}function S3(e){return e=(e.data?e.data.Ya:[]).map(function(t){return t.data}),e=Pn.apply(Co,_(e)),Rt("mdat",e)}function xn(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function F2(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function Rt(e){var t=De.apply(1,arguments),n=z2[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],z2[e]=n);for(var r=8,a=t.length-1;0<=a;a--)r+=t[a].byteLength;for(a=new Uint8Array(r),a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=r&255,a.set(n,4),n=0,r=8;n<t.length;n++)a.set(t[n],r),r+=t[n].byteLength;return a}var $2=!1,Vr=Math.pow(2,32)-1,z2={},C3=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),T3=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),b3=new Uint8Array([0,0,0,0,0,0,0,0]),k3=new Uint8Array([0,0,0,0,0,0,0,0]),E3=new Uint8Array([0,0,0,0,0,0,0,0]),A3=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),I3=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),M3=new Uint8Array([0,0,0,0,0,0,0,0]),_3=new Uint8Array([0,0,0,0,0,0,0,1]),zc=new Uint8Array([]),R3=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Om=new Uint8Array([]);function Nm(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new Ke(5),this.o=new It(function(){L3(e)}),this.A=new Ks,this.m=new Map}w=Nm.prototype,w.configure=function(e){this.g=e},w.start=function(e,t){var n=this;return V(function(r){if(r.g==1)return n.l=[e],n.h=t,I(r,Um(n),2);if(!n.h)throw new re(2,7,7001);return r.return(n.j)})};function L3(e){var t;V(function(n){switch(n.g){case 1:return ee(n,2),I(n,Um(e),4);case 4:ne(n,3);break;case 2:t=Y(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();q(n)}})}w.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},w.update=function(){var e=this,t;return V(function(n){if(n.g==1)return ee(n,2),I(n,Um(e),4);if(n.g!=2)return ne(n,0);if(t=Y(n),!e.h||!t)return n.return();e.h.onError(t),q(n)})},w.onExpirationUpdated=function(){},w.onInitialVariantChosen=function(){},w.banLocation=function(){},w.setMediaElement=function(){};function Um(e){var t,n,r,a,u,c,d;return V(function(p){if(p.g==1)return t=oo(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),a=n.request(0,t,{type:5}),fs(e.A,a),I(p,a.promise,2);if(u=p.h,!e.h)return p.return();u.uri&&!e.l.includes(u.uri)&&e.l.unshift(u.uri);var S=u.uri,T=u.data,k=e.g.mss.manifestPreprocessor;if(k!=qf){if(Et("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),T=Vx(T,"SmoothStreamingMedia"),!T)throw new re(2,4,4046,S);k(T),T=Bi(T.outerHTML)}var A=Vd(T,"SmoothStreamingMedia");if(!A)throw new re(2,4,4046,S);if(S=e.g.mss.manifestPreprocessorTXml,S!=Kf&&S(A),e.i||(e.i=new at(null,0)),S=Ut(A,"IsLive",Gd,!1))throw new re(2,4,4047);e.i.sc(!S),k=Ut(A,"TimeScale",To,1e7),T=Ut(A,"DVRWindowLength",To),S&&(T===0||isNaN(T))&&(T=1/0);var E=Ut(A,"CanSeek",Gd,!1);T===0&&E&&(T=1/0),E=null,T&&0<T&&(E=T/k),S&&!isNaN(e.g.availabilityWindowOverride)&&(E=e.g.availabilityWindowOverride),E==null&&(E=1/0),e.i.pe(E),T=Ut(A,"Duration",To,1/0),S||e.i.Za(T/k),S={variants:[],textStreams:[],timescale:k,duration:T/k};var R;for(E=sn(A,"Protection"),k=e.g.mss.keySystemsBySystemId,T=[],E=b(E),R=E.next();!R.done;R=E.next())T=T.concat(sn(R.value,"ProtectionHeader"));if(T.length){for(E=[],R=0;R<T.length;R++){var D=T[R],L=D.attributes.SystemID.toLowerCase(),$=k[L];if($){var N=U2(D);if(N)e:{N=b(Ii(N,"DATA"));for(var K=N.next();!K.done;K=N.next())if(K=Mi(K.value,"KID")){N=pi(qn(K)),N=new Uint8Array([N[3],N[2],N[1],N[0],N[5],N[4],N[7],N[6]].concat(_(N.slice(8)))),N=ar(N);break e}N=null}else N=null;K=pi(qn(D)),L=is(L.replace(/-/g,"")),L=[{initData:Tf(K,L,new Set,0),initDataType:"cenc",keyId:N}],L=rs($,"cenc",L),N&&L.keyIds.add(N),($=w3.get($))&&(L.licenseServerUri=$(D)),E.push(L)}}k=E}else k=[];for(R=k,E=[],k=[],T=[],A=sn(A,"StreamIndex"),A=b(A),D=A.next();!D.done;D=A.next()){D=D.value,$=sn(D,"QualityLevel"),L=S.timescale,N=S.duration,K=sn(D,"c");for(var O=[],H=0,J=0;J<K.length;++J){var oe=K[J],se=K[J+1],ye=Ut(oe,"t",To),le=Ut(oe,"d",To);if(oe=Ut(oe,"r",Ef),!le)break;if(ye=ye??H,oe=oe||0,0>oe)if(se){if(se=Ut(se,"t",To),se==null)break;if(ye>=se)break;oe=Math.ceil((se-ye)/le)-1}else{if(N==1/0)break;if(ye/L>=N)break;oe=Math.ceil((N*L-ye)/le)-1}for(se=0;se<=oe;++se)H=ye+le,O.push({start:ye/L,end:H/L,$f:ye}),ye=H}for(L=O,$=b($),N=$.next();!N.done;N=$.next())(N=D3(e,D,N.value,L,R,S))&&(N.type!="audio"||e.g.disableAudio?N.type!="video"||e.g.disableVideo?N.type!=Nt||e.g.disableText||T.push(N):k.push(N):E.push(N))}for(A=[],E=b(0<E.length?E:[null]),R=E.next();!R.done;R=E.next())for(R=R.value,D=b(0<k.length?k:[null]),O=D.next();!O.done;O=D.next())$=A,L=$.push,N=e,K=R,O=O.value,J=0,K&&K.bandwidth&&0<K.bandwidth&&(J+=K.bandwidth),O&&O.bandwidth&&0<O.bandwidth&&(J+=O.bandwidth),N={id:N.s++,language:K?K.language:"und",disabledUntilTime:0,primary:!!K&&K.primary||!!O&&O.primary,audio:K,video:O,bandwidth:J,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},L.call($,N);S.variants=A,S.textStreams=T,e.j?(e.j.variants=S.variants,e.j.textStreams=S.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:S.variants,textStreams:S.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.i.Wd()),Promise.resolve(),c=Date.now(),d=(c-r)/1e3,e.B.sample(1,d),q(p)})}function D3(e,t,n,r,a,u){var c=t.attributes.Type;if(c!=="audio"&&c!=="video"&&c!=="text")return je("Ignoring unrecognized type:",c),null;var d=t.attributes.Language,p=e.s++,S=Ut(n,"Bitrate",dr),T=Ut(n,"MaxWidth",dr),k=Ut(n,"MaxHeight",dr),A=Ut(n,"Channels",dr),E=Ut(n,"SamplingRate",dr),R=u.duration;r.length&&(R=r[r.length-1].end-r[0].start);var D=e.i.getDuration();e.i.Za(Math.min(R,D));var L={id:p,originalId:t.attributes.Name||String(p),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:S||0,width:T||void 0,height:k||void 0,kind:"",encrypted:0<a.length,drmInfos:a,keyIds:new Set,language:Kt(d||"und"),originalLanguage:d,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:A,audioSamplingRate:E,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:R,timescale:u.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((a=t.attributes.Subtype)&&((a=j3[a])&&L.roles.push(a),a==="main"&&(L.primary=!0)),a=n.attributes.FourCC,(a===null||a==="")&&(a=t.attributes.FourCC),!a){if(c==="audio")a="AAC";else if(c==="video")return je('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!B3.includes(a.toUpperCase()))return je("Codec not supported:",a),null;switch(n=P3(n,c,a,L),L.mssPrivateData.codecPrivateData=n,c){case"audio":if(!n)return je("Quality unsupported without CodecPrivateData",c),null;L.type="audio",L.mimeType="mss/audio/mp4",L.codecs=O3(a,n);break;case"video":if(!n)return je("Quality unsupported without CodecPrivateData",c),null;L.type="video",L.mimeType="mss/video/mp4",L.codecs=N3(n);break;case"text":L.type=Nt,L.mimeType="application/mp4",(a==="TTML"||a==="DFXP")&&(L.codecs="stpp")}return L.fullMimeTypes.add(Wn(L.mimeType,L.codecs)),L.createSegmentIndex=function(){if(L.segmentIndex)return Promise.resolve();if(e.m.has(L.id))var $=e.m.get(L.id);else $=[],L.type=="video"&&($=L.mssPrivateData.codecPrivateData.split("00000001").slice(1)),$={id:L.id,type:L.type,codecs:L.codecs,encrypted:L.encrypted,timescale:L.mssPrivateData.timescale,duration:L.mssPrivateData.duration,$a:$,ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:null,stream:L},$=Ra(new _a([$])),e.m.set(L.id,$);return $=U3(e,new $o(function(){return[]},0,null,$f(L),L.mssPrivateData.timescale,$),L,t,r),L.segmentIndex=new $t($),Promise.resolve()},L.closeSegmentIndex=function(){L.segmentIndex&&(L.segmentIndex.release(),L.segmentIndex=null)},L}function P3(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var a={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=a[e],n==="AACH"?(n=new Uint8Array(4),e=a[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function O3(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function N3(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function U3(e,t,n,r,a){var u=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[],a=b(a);for(var c=a.next(),d={};!c.done;d={re:void 0},c=a.next())d.re=c.value,r.push(new ct(d.re.start,d.re.end,function(p){return function(){return ho(e.l,[u.replace("{start time}",String(p.re.$f))])}}(d),0,null,t,0,0,n.mssPrivateData.duration));return r}ve("shaka.mss.MssParser",Nm);var B3="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),j3={CAPT:"main",SUBT:"alternate",DESC:"main"};_i["application/vnd.ms-sstr+xml"]=function(){return new Nm};function V2(e,t,n,r,a,u){if(200<=n&&299>=n&&n!=202)return{uri:a||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var c=null;try{c=sr(t)}catch{}throw new re(n==401||n==403?2:1,1,1001,r,n,c,e,u,a||r)}function Bm(){}function Vc(e,t,n,r,a){var u=new H3;El(t.headers).forEach(function(S,T){u.append(T,S)});var c=new z3,d={lg:!1,mh:!1};if(e=F3(e,n,{body:t.body||void 0,headers:u,method:t.method,signal:c.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},d,r,a,t.streamDataCallback),e=new jn(e,function(){return d.lg=!0,c.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var p=new It(function(){d.mh=!0,c.abort()});p.Y(t/1e3),e.finally(function(){p.stop()})}return e}function F3(e,t,n,r,a,u,c){var d,p,S,T,k,A,E,R,D,L,$,N,K;return V(function(O){switch(O.g){case 1:return d=$3,p=V3,A=k=0,E=Date.now(),ee(O,2),I(O,d(e,n),4);case 4:if(S=O.h,u(H2(S.headers)),n.method=="HEAD"){O.u(5);break}return R=S.clone().body.getReader(),L=(D=S.headers.get("Content-Length"))?parseInt(D,10):0,$=function(H){function J(){var oe,se,ye;return V(function(le){switch(le.g){case 1:return ee(le,2),I(le,R.read(),4);case 4:oe=le.h,ne(le,3);break;case 2:return Y(le),le.return();case 3:if(oe.done){le.u(5);break}if(k+=oe.value.byteLength,!c){le.u(5);break}return I(le,c(oe.value),5);case 5:se=Date.now(),(100<se-E||oe.done)&&(ye=oe.done?0:L-k,a(se-E,k-A,ye),A=k,E=se),oe.done?H.close():(H.enqueue(oe.value),J()),q(le)}})}J()},new p({start:$}),I(O,S.arrayBuffer(),6);case 6:T=O.h;case 5:ne(O,3);break;case 2:throw N=Y(O),r.lg?new re(1,1,7001,e,t):r.mh?new re(1,1,1003,e,t):new re(1,1,1002,e,N,t);case 3:return K=H2(S.headers),O.return(V2(K,T,S.status,e,S.url,t))}})}function H2(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function G2(){if(h.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(h.Response){if(!new Response("").body)return!1}else return!1;return!(!h.fetch||"polyfill"in h.fetch||!h.AbortController)}ve("shaka.net.HttpFetchPlugin",Bm),Bm.isSupported=G2,Bm.parse=Vc;var $3=h.fetch,z3=h.AbortController,V3=h.ReadableStream,H3=h.Headers;G2()&&(ur("http",Vc,2,!0),ur("https",Vc,2,!0),ur("blob",Vc,2,!0));function W2(){}function Hc(e,t,n,r,a){var u=new G3,c=Date.now(),d=0,p=new Promise(function(S,T){u.open(t.method,e,!0),u.responseType="arraybuffer",u.timeout=t.retryParameters.timeout,u.withCredentials=t.allowCrossSiteCredentials,u.onabort=function(){T(new re(1,1,7001,e,n))};var k=!1;u.onreadystatechange=function(){if(u.readyState==2&&!k){var E=X2(u);a(E),k=!0}},u.onload=function(E){var R=X2(u),D=u.response;try{r(Date.now()-c,E.loaded-d,0);var L=V2(R,D,u.status,e,u.responseURL,n);S(L)}catch($){T($)}},u.onerror=function(E){T(new re(1,1,1002,e,E,n))},u.ontimeout=function(){T(new re(1,1,1003,e,n))},u.onprogress=function(E){var R=Date.now();(100<R-c||E.lengthComputable&&E.loaded==E.total)&&(r(R-c,E.loaded-d,u.readyState==4?0:E.total-E.loaded),d=E.loaded,c=R)};for(var A in t.headers)u.setRequestHeader(A.toLowerCase(),t.headers[A]);u.send(t.body)});return new jn(p,function(){return u.abort(),Promise.resolve()})}function X2(e){var t=e.getAllResponseHeaders().trim().split(`\r
`);e={},t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}ve("shaka.net.HttpXHRPlugin",W2),W2.parse=Hc;var G3=h.XMLHttpRequest;ur("http",Hc,1,!0),ur("https",Hc,1,!0),ur("blob",Hc,1,!0);function q2(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function jm(e){return e.M().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Ha+":"+e.sa}function W3(e,t){return sa(e.g.M(),e.g.Ha,e.g.sa,t.streaming.retryParameters)}function K2(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function Y2(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}K2.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function Q2(e){var t=this;this.o=e,this.j=new Map,this.i=new Ys(function(){return Fm(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new K2}Q2.prototype.destroy=function(){return this.i.destroy()};function X3(e,t,n){e.m=t,e.l=n}function Fm(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function q3(e,t,n,r,a,u){tn(e.i);var c=(e.j.get(t)||Promise.resolve()).then(function(){var d,p,S,T,k,A,E;return V(function(R){if(R.g==1)return I(R,Y3(e,n),2);if(d=R.h,e.i.g)throw new re(2,9,7001);if(a)for(T in p=st(d),S=new ky(p),S.data)k=Number(T),A=S.data[k],E=S.g[k],e.l(A,E);e.g.close(r,d.byteLength);var D=e.g;return e.m(D.i==0?0:D.j/D.i,e.g.h),R.return(u(d))})});e.j.set(t,c)}function K3(e){return V(function(t){return t.g==1?I(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function Y3(e,t){var n,r,a,u;return V(function(c){return c.g==1?(n=Fi,r=e.o.request(n,t),a=function(){return r.abort()},e.h.push(a),I(c,r.promise,2)):(u=c.h,Zt(e.h,a),c.return(u.data))})}function Gc(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new en,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Gc.prototype.abort=function(){var e=this;return V(function(t){if(t.g==1){try{e.i.abort()}catch{}return ee(t,2),I(t,e.g,4)}if(t.g!=2)return ne(t,0);Y(t),q(t)})};function $m(e,t){return new Promise(function(n,r){var a=e.h.openCursor();a.onerror=r,a.onsuccess=function(){var u;return V(function(c){if(c.g==1)return a.result==null?(n(),c.return()):(u=a.result,I(c,t(u.key,u.value,u),2));u.continue(),q(c)})}})}Gc.prototype.store=function(){return this.h},Gc.prototype.promise=function(){return this.g};function zm(e){this.h=e,this.g=[]}zm.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function xs(e,t){return Wc(e,t,"readwrite")}function Wc(e,t,n){n=e.h.transaction([t],n);var r=new Gc(n,t);return e.g.push(r),r.promise().then(function(){Zt(e.g,r)},function(){Zt(e.g,r)}),r}function ws(e,t,n){this.h=new zm(e),this.i=t,this.g=n}w=ws.prototype,w.destroy=function(){return this.h.destroy()},w.hasFixedKeySpace=function(){return!0},w.addSegments=function(){return Z2(this.i)},w.removeSegments=function(e,t){return J2(this,this.i,e,t)},w.getSegments=function(e){var t=this,n;return V(function(r){return r.g==1?I(r,ew(t,t.i,e),2):(n=r.h,r.return(n.map(function(a){return t.og(a)})))})},w.addManifests=function(){return Z2(this.g)},w.updateManifest=function(){return Promise.reject(new re(2,9,9016,"Cannot modify values in "+this.g))};function Q3(e,t,n){e=xs(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}w.updateManifestExpiration=function(e,t){var n=xs(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(a){(a=a.target.result)&&(a.expiration=t,r.put(a,e))},n.promise()},w.removeManifests=function(e,t){return J2(this,this.g,e,t)},w.getManifests=function(e){var t=this,n;return V(function(r){return r.g==1?I(r,ew(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(a){return t.Wc(a)}))))})},w.getAllManifests=function(){var e=this,t,n;return V(function(r){return r.g==1?(t=Wc(e.h,e.g,"readonly"),n=new Map,I(r,$m(t,function(a,u){var c;return V(function(d){if(d.g==1)return I(d,e.Wc(u),2);c=d.h,n.set(a,c),q(d)})}),2)):r.g!=3?I(r,t.promise(),3):r.return(n)})},w.og=function(e){return e},w.Wc=function(e){return Promise.resolve(e)};function Z2(e){return Promise.reject(new re(2,9,9011,"Cannot add new value to "+e))}w.add=function(e,t){var n=this,r,a,u,c,d,p,S;return V(function(T){if(T.g==1){for(r=xs(n.h,e),a=r.store(),u=[],c=b(t),d=c.next(),p={};!d.done;p={Hf:void 0},d=c.next())S=d.value,p.Hf=a.add(S),p.Hf.onsuccess=function(k){return function(){u.push(k.Hf.result)}}(p);return I(T,r.promise(),2)}return T.return(u)})};function J2(e,t,n,r){e=xs(e.h,t),t=e.store(),n=b(n);for(var a=n.next(),u={};!a.done;u={rf:void 0},a=n.next())u.rf=a.value,t.delete(u.rf).onsuccess=function(c){return function(){return r(c.rf)}}(u);return e.promise()}function ew(e,t,n){var r,a,u,c,d,p,S;return V(function(T){if(T.g==1){for(r=Wc(e.h,t,"readonly"),a=r.store(),u={},c=[],d=b(n),p=d.next(),S={};!p.done;S={le:void 0,Sd:void 0},p=d.next())S.Sd=p.value,S.le=a.get(S.Sd),S.le.onsuccess=function(k){return function(){k.le.result==null&&c.push(k.Sd),u[k.Sd]=k.le.result}}(S);return I(T,r.promise(),2)}if(c.length)throw new re(2,9,9012,"Could not find values for "+c);return T.return(n.map(function(k){return u[k]}))})}function hu(e){this.g=new zm(e)}hu.prototype.destroy=function(){return this.g.destroy()},hu.prototype.getAll=function(){var e=this,t,n;return V(function(r){return r.g==1?(t=Wc(e.g,"session-ids","readonly"),n=[],I(r,$m(t,function(a,u){n.push(u)}),2)):r.g!=3?I(r,t.promise(),3):r.return(n)})},hu.prototype.add=function(e){var t=xs(this.g,"session-ids"),n=t.store();e=b(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},hu.prototype.remove=function(e){var t=this,n;return V(function(r){return r.g==1?(n=xs(t.g,"session-ids"),I(r,$m(n,function(a,u,c){e.includes(u.sessionId)&&c.delete()}),2)):I(r,n.promise(),0)})};function No(){this.g=new Map}No.prototype.destroy=function(){for(var e=[],t=b(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},No.prototype.init=function(){var e=this;du.forEach(function(a,u){(a=a())&&e.g.set(u,a)});for(var t=[],n=b(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function tw(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(a,u){a.hasFixedKeySpace()||t||(t={path:{nb:r,Ja:u},Ja:a})})}),t)return t;throw new re(2,9,9013,"Could not find a cell that supports add-operations")}function Z3(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(a,u){t({nb:r,Ja:u},a)})})}function Xc(e,t,n){if(e=e.g.get(t),!e)throw new re(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new re(2,9,9013,"Could not find cell with name "+n);return t}function J3(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function eI(e){var t=Array.from(e.g.keys());if(!t.length)throw new re(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function tI(e){var t,n,r;return V(function(a){return a.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=du,r.forEach(function(u){(u=u())&&t.push(u)})),I(a,Promise.all(t.map(function(u){return u.erase()})),2)):n?a.u(0):I(a,Promise.all(t.map(function(u){return u.destroy()})),0)})}function nw(e,t){du.set(e,t)}ve("shaka.offline.StorageMuxer",No),No.unregister=function(e){du.delete(e)},No.register=nw,No.prototype.destroy=No.prototype.destroy;var du=new Map;function pu(){ws.apply(this,arguments)}Q(pu,ws),pu.prototype.updateManifestExpiration=function(e,t){var n=this,r,a,u;return V(function(c){return r=xs(n.h,n.g),a=r.store(),u=new en,a.get(e).onsuccess=function(d){(d=d.target.result)?(d.expiration=t,a.put(d),u.resolve()):u.reject(new re(2,9,9012,"Could not find values for "+e))},I(c,Promise.all([r.promise(),u]),0)})},pu.prototype.Wc=function(e){var t,n,r,a,u,c;return V(function(d){if(d.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,a=r-e.periods[n].startTime,u=nI(e.periods[n],a),t.push(u);return I(d,Ox(t),2)}return c=d.h,d.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:c,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function nI(e,t){iI(e);for(var n=b(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(a){return oI(a,e.startTime,t)})}function oI(e,t,n){var r=e.initSegmentUri?ow(e.initSegmentUri):null,a=t+e.presentationTimeOffset,u=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(c){var d=ow(c.uri);return{startTime:t+c.startTime,endTime:t+c.endTime,dataKey:d,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:u,timestampOffset:a,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}pu.prototype.og=function(e){return{data:e.data}};function ow(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new re(2,9,9004,"Could not parse uri "+e)}function iI(e){var t=e.streams.filter(function(d){return d.contentType=="audio"});if(e=e.streams.filter(function(d){return d.contentType=="video"}),!t.every(function(d){return d.variantIds})||!e.every(function(d){return d.variantIds})){for(var n=b(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=b(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var a=b(e),u=a.next();!u.done;u=a.next())u.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,a=b(t),u=a.next();!u.done;u=a.next())u.value.variantIds.push(r);if(e.length&&t.length)for(t=b(t),r=t.next();!r.done;r=t.next())for(r=r.value,a=b(e),u=a.next();!u.done;u=a.next()){u=u.value;var c=n++;r.variantIds.push(c),u.variantIds.push(c)}}}function qc(){ws.apply(this,arguments)}Q(qc,ws),qc.prototype.Wc=function(e){var t,n,r,a,u,c;return V(function(d){if(d.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,a=r-e.periods[n].startTime;for(var p=e.periods[n],S=[],T=b(p.streams),k=T.next();!k.done;k=T.next())k=k.value,k.variantIds.length!=0&&S.push(rI(k,p.startTime,p.startTime+a));u=S,t.push(u)}return I(d,Ox(t),2)}return c=d.h,d.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:c,sequenceMode:!1})})};function rI(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function Vm(){ws.apply(this,arguments)}Q(Vm,ws),w=Vm.prototype,w.hasFixedKeySpace=function(){return!1},w.addSegments=function(e){return this.add(this.i,e)},w.addManifests=function(e){return this.add(this.g,e)},w.updateManifest=function(e,t){return Q3(this,e,t)},w.Wc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function iw(){this.m=this.j=this.i=this.h=this.g=this.l=null}w=iw.prototype,w.init=function(){var e=this,t=new en,n=!1,r=new It(function(){n=!0,t.reject(new re(2,9,9017))});r.Y(5);var a=h.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!n){var u=a.result;e.l=u;var c=u.objectStoreNames;c=c.contains("manifest")&&c.contains("segment")?new pu(u,"segment","manifest"):null,e.g=c,c=u.objectStoreNames,c=c.contains("manifest-v2")&&c.contains("segment-v2")?new qc(u,"segment-v2","manifest-v2"):null,e.h=c,c=u.objectStoreNames,c=c.contains("manifest-v3")&&c.contains("segment-v3")?new qc(u,"segment-v3","manifest-v3"):null,e.i=c,c=u.objectStoreNames,c=c.contains("manifest-v5")&&c.contains("segment-v5")?new Vm(u,"segment-v5","manifest-v5"):null,e.j=c,u=u.objectStoreNames.contains("session-ids")?new hu(u):null,e.m=u,r.stop(),t.resolve()}},a.onupgradeneeded=function(){for(var u=a.result,c=b(["segment-v5","manifest-v5","session-ids"]),d=c.next();!d.done;d=c.next())d=d.value,u.objectStoreNames.contains(d)||u.createObjectStore(d,{autoIncrement:!0})},a.onerror=function(u){n||(t.reject(new re(2,9,9001,a.error)),r.stop(),u.preventDefault())},t},w.destroy=function(){var e=this;return V(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return I(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return I(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return I(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return I(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return I(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),q(t)}})},w.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},w.getEmeSessionCell=function(){return this.m},w.erase=function(){var e=this;return V(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return I(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return I(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return I(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return I(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),I(t,sI(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,I(t,e.init(),0)}})};function sI(){var e=new en,t=h.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new re(2,9,9001,t.error)),n.preventDefault()},e}nw("idb",function(){return ni()||Ki()||!h.indexedDB?null:new iw});function nr(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}nr.prototype.nb=function(){return this.i},nr.prototype.Ja=function(){return this.h},nr.prototype.key=function(){return this.l},nr.prototype.toString=function(){return this.j};function Hm(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new nr(t,n,r,Number(e[4])):null}function rw(e,t){this.h=e,this.g=t}function sw(e,t){var n=new at(null,0);n.Za(t.duration);var r=t.streams.filter(function(S){return S.type=="audio"}),a=t.streams.filter(function(S){return S.type=="video"});r=aI(e,r,a,n),a=t.streams.filter(function(S){return S.type==Nt}).map(function(S){return Kc(e,S,n)});var u=t.streams.filter(function(S){return S.type=="image"}).map(function(S){return Kc(e,S,n)}),c=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var d=b(r.values()),p=d.next();!p.done;p=d.next())p=p.value,p.audio&&p.audio.encrypted&&(p.audio.drmInfos=c),p.video&&p.video.encrypted&&(p.video.drmInfos=c);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:a,imageStreams:u,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1}}function aI(e,t,n,r){for(var a=new Set,u=b(t),c=u.next();!c.done;c=u.next()){c=b(c.value.variantIds);for(var d=c.next();!d.done;d=c.next())a.add(d.value)}for(u=b(n),c=u.next();!c.done;c=u.next())for(c=b(c.value.variantIds),d=c.next();!d.done;d=c.next())a.add(d.value);for(u=new Map,a=b(a),c=a.next();!c.done;c=a.next())c=c.value,u.set(c,{id:c,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=b(t),a=t.next();!a.done;a=t.next())for(c=a.value,a=Kc(e,c,r),c=b(c.variantIds),d=c.next();!d.done;d=c.next())d=u.get(d.value),d.language=a.language,d.primary=d.primary||a.primary,d.audio=a;for(n=b(n),t=n.next();!t.done;t=n.next())for(a=t.value,t=Kc(e,a,r),a=b(a.variantIds),c=a.next();!c.done;c=a.next())c=u.get(c.value),c.primary=c.primary||t.primary,c.video=t;return u}function Kc(e,t,n){var r=t.segments.map(function(a){return lI(e,a,t)});return n.sd(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new $t(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Wn(t.mimeType,t.codecs)])}}function lI(e,t,n){var r=new nr("segment",e.h,e.g,t.dataKey);return e=new ct(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?uI(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function uI(e,t){var n=new nr("segment",e.h,e.g,t);return new $o(function(){return[n.toString()]},0,null)}function aw(){this.g=null}w=aw.prototype,w.configure=function(){},w.start=function(e,t){var n=this,r,a,u,c,d,p,S;return V(function(T){switch(T.g){case 1:if(r=Hm(e),n.g=r,r==null||r.g!="manifest")throw new re(2,1,9004,e);return a=new No,ae(T,2),I(T,a.init(),4);case 4:return I(T,Xc(a,r.nb(),r.Ja()),5);case 5:return u=T.h,I(T,u.getManifests([r.key()]),6);case 6:return c=T.h,d=c[0],p=new rw(r.nb(),r.Ja()),S=sw(p,d),t.makeTextStreamsForClosedCaptions(S),T.return(S);case 2:return Z(T),I(T,a.destroy(),7);case 7:j(T,0)}})},w.stop=function(){return Promise.resolve()},w.update=function(){},w.onExpirationUpdated=function(e,t){var n=this,r,a,u,c,d,p,S;return V(function(T){switch(T.g){case 1:return r=n.g,a=new No,ee(T,2,3),I(T,a.init(),5);case 5:return I(T,Xc(a,r.nb(),r.Ja()),6);case 6:return u=T.h,I(T,u.getManifests([r.key()]),7);case 7:if(c=T.h,d=c[0],p=d.sessionIds.includes(e),S=d.expiration==null||d.expiration>t,!p||!S){T.u(3);break}return I(T,u.updateManifestExpiration(r.key(),t),3);case 3:return Z(T),I(T,a.destroy(),10);case 10:j(T,0);break;case 2:Y(T),T.u(3)}})},w.onInitialVariantChosen=function(){},w.banLocation=function(){},w.setMediaElement=function(){},_i["application/x-offline-manifest"]=function(){return new aw};function lw(){}function uw(e){var t=Hm(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=qs(e)):e=t&&t.g=="segment"?fI(t.key(),t):us(new re(2,1,9004,e)),e}function fI(e,t){var n=new No;return qs(void 0).Aa(function(){return n.init()}).Aa(function(){return Xc(n,t.nb(),t.Ja())}).Aa(function(r){return r.getSegments([t.key()])}).Aa(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}ve("shaka.offline.OfflineScheme",lw),lw.plugin=uw,ur("offline",uw);function fw(e,t,n){var r,a,u,c,d,p;return V(function(S){switch(S.g){case 1:r=[];for(var T=[],k=b(n),A=k.next();!A.done;A=k.next()){A=A.value;for(var E=!1,R=b(T),D=R.next();!D.done;D=R.next())if(D=D.value,hI(D.info,A)){D.sessionIds.push(A.sessionId),E=!0;break}E||T.push({info:A,sessionIds:[A.sessionId]})}a=b(T),u=a.next();case 2:if(u.done){S.u(4);break}return c=u.value,d=cI(e,t,c),I(S,d,5);case 5:p=S.h,r=r.concat(p),u=a.next(),S.u(2);break;case 4:return S.return(r)}})}function cI(e,t,n){var r,a;return V(function(u){switch(u.g){case 1:return r=new Mf({Lb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),ee(u,2),r.configure(e),I(u,Kb(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:ne(u,3);break;case 2:return Y(u),I(u,r.destroy(),5);case 5:return u.return([]);case 3:return a=[],I(u,Promise.all(n.sessionIds.map(function(c){return V(function(d){if(d.g==1)return ee(d,2),I(d,Zb(r,c),4);if(d.g!=2)return a.push(c),ne(d,0);Y(d),q(d)})})),6);case 6:return I(u,r.destroy(),7);case 7:return u.return(a)}})}function hI(e,t){function n(r,a){return r.robustness==a.robustness&&r.contentType==a.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&wn(e.audioCapabilities,t.audioCapabilities,n)&&wn(e.videoCapabilities,t.videoCapabilities,n)}function dI(e,t,n){var r=t.presentationTimeline.getDuration();return t=cw(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function Gm(e,t){var n=sw(new rw(e.nb(),e.Ja()),t),r=t.appMetadata||{};return n=cw(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function cw(e){var t=[],n=gf(e.variants);n=b(n);for(var r=n.next();!r.done;r=n.next())t.push(Gs(r.value));for(e=b(e.textStreams),n=e.next();!n.done;n=e.next())t.push(mf(n.value));return t}function pI(){this.g={}}function mI(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var a=n.bandwidth||393216,u=r.bandwidth||t.bandwidth-a;0>=u&&(u=t.bandwidth),e.g[n.id]=a,e.g[r.id]=u}}function gI(e,t){e.g[t.id]=t.bandwidth||2048}function hw(e,t){return e=e.g[t],e==null&&(e=0),e}function ao(e){var t=this;if(e&&e.constructor!=ke)throw new re(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.xb()):(this.h=ua(),this.g=new rn),this.i=[],this.j=[];var n=!e;this.l=new Ys(function(){var r,a,u,c,d;return V(function(p){switch(p.g){case 1:return I(p,Promise.all(t.j.map(function(S){return Fm(S)})),2);case 2:for(r=function(){},a=[],u=b(t.i),c=u.next();!c.done;c=u.next())d=c.value,a.push(d.then(r,r));return I(p,Promise.all(a),3);case 3:if(!n){p.u(4);break}return I(p,t.g.destroy(),4);case 4:t.h=null,t.g=null,q(p)}})})}function Wm(){if(Ui())e:{for(var e=b(du.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}w=ao.prototype,w.destroy=function(){return this.l.destroy()},w.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Xf(e,t)),Br(this.h,e)},w.getConfiguration=function(){var e=ua();return Br(e,this.h,ua()),e},w.xb=function(){return this.g},w.store=function(e,t,n){var r=this,a=this.getConfiguration(),u=new Q2(this.g);return this.j.push(u),t=yI(this,e,t||{},function(){var c;return V(function(d){return d.g==1?n?d.u(2):I(d,_p(e,r.g,a.manifest.retryParameters),3):(d.g!=2&&(n=d.h),c=qy(e,n||null),d.return(c()))})},a,u),t=new jn(t,function(){return Fm(u)}),t.finally(function(){Zt(r.j,u)}),_I(this,t)};function yI(e,t,n,r,a,u){var c,d,p,S,T,k,A,E,R,D,L,$,N,K;return V(function(O){switch(O.g){case 1:return Yc(),d=c=null,p=new No,k=T=S=null,ee(O,2,3),I(O,r(),5);case 5:return c=O.h,I(O,EI(e,t,c,a),6);case 6:if(A=O.h,mo(e),E=!A.presentationTimeline.V()&&!A.presentationTimeline.kc(),!E)throw new re(2,9,9005,t);return I(O,e.yc(A,function(H){k=k||H},a),7);case 7:if(d=O.h,mo(e),k)throw k;return I(O,xI(A,d,a),8);case 8:return I(O,p.init(),9);case 9:return mo(e),I(O,tw(p),10);case 10:return S=O.h,mo(e),R=wI(d,A,t,n,a,u),D=R.ui,L=R.Xf,I(O,S.Ja.addManifests([D]),11);case 11:if($=O.h,mo(e),T=$[0],mo(e),k)throw k;return I(O,vI(e,L,T,D,u,a,S.Ja,A,d),12);case 12:return mo(e),gw(A,D,d,a),I(O,S.Ja.updateManifest(T,D),13);case 13:return mo(e),N=new nr("manifest",S.path.nb,S.path.Ja,T),O.return(Gm(N,D));case 3:return Z(O),I(O,p.destroy(),14);case 14:if(!c){O.u(15);break}return I(O,c.stop(),15);case 15:if(!d){O.u(17);break}return I(O,d.destroy(),17);case 17:j(O,0);break;case 2:if(K=Y(O),T==null){O.u(19);break}return I(O,dw(T),19);case 19:throw k||K}})}function vI(e,t,n,r,a,u,c,d,p){var S,T,k,A,E,R,D,L,$,N;return V(function(K){switch(K.g){case 1:if(S={},T=0,k=function(O,H){var J,oe,se,ye,le,ue,ce;return V(function(Ee){if(Ee.g==1){for(J=b(O),oe=J.next(),se={};!oe.done;se={Ac:void 0},oe=J.next())se.Ac=oe.value,ye=W3(se.Ac,u),le=se.Ac.i,ue=se.Ac.h,ce=function(Te){return function(Ae){var Oe,_e,ze;return V(function(yt){if(yt.g==1)return I(yt,c.addSegments([{data:Ae}]),2);Oe=yt.h,mo(e),_e=Te.Ac.g,ze=jm(_e),S[ze]=Oe[0],T+=Ae.byteLength,q(yt)})}}(se),q3(a,se.Ac.groupId,ye,le,ue,ce);return I(Ee,K3(a),2)}return H?(mo(e),gw(d,r,p,u),I(Ee,c.updateManifest(n,r),0)):Ee.u(0)})},A=!1,ee(K,2),!Xm(d)||!A||mw(d)){K.u(4);break}return I(K,k(t.filter(function(O){return O.h}),!0),5);case 5:return mo(e),t=t.filter(function(O){return!O.h}),E=S,R=T,S={},T=0,I(K,pw(c,n,r,E,R,function(){return mo(e)}),6);case 6:mo(e);case 4:if(A){K.u(7);break}return I(K,k(t,!1),8);case 8:return mo(e),D=S,L=T,S={},T=0,I(K,pw(c,n,r,D,L,function(){return mo(e)}),9);case 9:mo(e);case 7:ne(K,0);break;case 2:return $=Y(K),N=Object.values(S),I(K,c.removeSegments(N,function(){}),10);case 10:throw $}})}function dw(e){var t,n,r,a;return V(function(u){switch(u.g){case 1:return t=new No,I(u,t.init(),2);case 2:return I(u,tw(t),3);case 3:return n=u.h,r=new nr("manifest",n.path.nb,n.path.Ja,e),I(u,t.destroy(),4);case 4:return a=new ao,I(u,a.remove(r.toString()),0)}})}function pw(e,t,n,r,a,u){var c,d,p,S,T,k,A,E,R,D,L;return V(function($){switch($.g){case 1:for(c=!1,ee($,2),d=!0,p=b(n.streams),S=p.next();!S.done;S=p.next())for(T=S.value,k=b(T.segments),A=k.next();!A.done;A=k.next())E=A.value,R=E.pendingSegmentRefId?r[E.pendingSegmentRefId]:null,R!=null&&(E.dataKey=R,E.pendingSegmentRefId=void 0),R=E.pendingInitSegmentRefId?r[E.pendingInitSegmentRefId]:null,R!=null&&(E.initSegmentKey=R,E.pendingInitSegmentRefId=void 0),E.pendingSegmentRefId&&(d=!1),E.pendingInitSegmentRefId&&(d=!1);return n.size+=a,d&&(n.isIncomplete=!1),I($,e.updateManifest(t,n),4);case 4:c=!0,u(),ne($,0);break;case 2:return D=Y($),I($,dw(t),5);case 5:if(c){$.u(6);break}return L=Object.values(r),I($,e.removeSegments(L,function(){}),6);case 6:throw D}})}function xI(e,t,n){var r,a,u,c,d,p,S,T,k,A,E,R,D,L,$,N,K,O,H,J,oe,se,ye,le,ue,ce,Ee,Te,Ae;return V(function(Oe){switch(Oe.g){case 1:return r={width:1/0,height:1/0},vb(e,n.restrictions,r),I(Oe,Yg(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(a=[],u=n.preferredDecodingAttributes,c=n.preferredVideoCodecs,d=n.preferredAudioCodecs,qg(e,c,d,u),p=b(e.variants),S=p.next();!S.done;S=p.next())T=S.value,a.push(Gs(T));for(k=b(e.textStreams),A=k.next();!A.done;A=k.next())E=A.value,a.push(mf(E));for(R=b(e.imageStreams),D=R.next();!D.done;D=R.next())L=D.value,a.push(Od(L));return I(Oe,n.offline.trackSelectionCallback(a),3);case 3:for($=Oe.h,N=e.presentationTimeline.getDuration(),K=0,O=b($),H=O.next();!H.done;H=O.next())J=H.value,oe=J.bandwidth*N/8,K+=oe;return ee(Oe,4),I(Oe,n.offline.downloadSizeCallback(K),6);case 6:if(se=Oe.h,!se)throw new re(2,9,9014);ne(Oe,5);break;case 4:throw ye=Y(Oe),ye instanceof re?ye:new re(2,9,9015);case 5:for(le=new Set,ue=new Set,ce=new Set,Ee=b($),Te=Ee.next();!Te.done;Te=Ee.next())Ae=Te.value,Ae.type=="variant"&&le.add(Ae.id),Ae.type=="text"&&ue.add(Ae.id),Ae.type=="image"&&ce.add(Ae.id);e.variants=e.variants.filter(function(_e){return le.has(_e.id)}),e.textStreams=e.textStreams.filter(function(_e){return ue.has(_e.id)}),e.imageStreams=e.imageStreams.filter(function(_e){return ce.has(_e.id)}),DI(e),q(Oe)}})}function wI(e,t,n,r,a,u){var c=dI(n,t,r),d=a.offline.progressCallback;X3(u,function(E,R){c.size=R,d(c,E)},function(E,R){p&&a.offline.usePersistentLicense&&S==R&&Al(e,"cenc",E)});var p=Xm(t)&&!mw(t),S=null;p&&(S=PI.get(e.g.keySystem));for(var T=new pI,k=b(t.textStreams),A=k.next();!A.done;A=k.next())T.g[A.value.id]=52;for(k=b(t.imageStreams),A=k.next();!A.done;A=k.next())gI(T,A.value);for(k=b(t.variants),A=k.next();!A.done;A=k.next())mI(T,A.value);return T=AI(u,T,t,a),u=T.streams,T=T.Xf,k=e.g,A=a.offline.usePersistentLicense,k&&A&&(k.initData=[]),{ui:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ad(),streams:u,sessionIds:A?Ny(e):[],drmInfo:k,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Xf:T}}function Xm(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function mw(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function gw(e,t,n,r){if(t.expiration=n.ad(),n=Ny(n),t.sessionIds=r.offline.usePersistentLicense?n:[],Xm(e)&&r.offline.usePersistentLicense&&!n.length)throw new re(2,9,9007)}w.remove=function(e){return qm(this,SI(this,e))};function SI(e,t){var n,r,a,u,c,d;return V(function(p){switch(p.g){case 1:if(Yc(),n=Hm(t),n==null||n.g!="manifest")throw new re(2,9,9004,t);return r=n,a=new No,ae(p,2),I(p,a.init(),4);case 4:return I(p,Xc(a,r.nb(),r.Ja()),5);case 5:return u=p.h,I(p,u.getManifests([r.key()]),6);case 6:return c=p.h,d=c[0],I(p,Promise.all([CI(e,d,a),TI(u,r,d)]),2);case 2:return Z(p),I(p,a.destroy(),8);case 8:j(p,0)}})}function yw(e,t){for(var n=[],r=b(e.streams),a=r.next();!a.done;a=r.next())a=a.value,t&&a.type=="video"?n.push({contentType:Wn(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||a.type!="audio"||n.push({contentType:Wn(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function CI(e,t,n){return V(function(r){return I(r,LI(e.g,e.h.drm,n,t),0)})}function TI(e,t,n){function r(){}var a=RI(n);return Gm(t,n),Promise.all([e.removeSegments(a,r),e.removeManifests([t.key()],r)])}w.Li=function(){return qm(this,bI(this))};function bI(e){var t,n,r,a,u,c,d,p,S,T;return V(function(k){switch(k.g){case 1:return Yc(),t=e.g,n=e.h.drm,r=new No,a=!1,ae(k,2),I(k,r.init(),4);case 4:u=[],J3(r,function(A){return u.push(A)}),c=b(u),d=c.next();case 5:if(d.done){k.u(2);break}return p=d.value,I(k,p.getAll(),8);case 8:return S=k.h,I(k,fw(n,t,S),9);case 9:return T=k.h,I(k,p.remove(T),10);case 10:T.length!=S.length&&(a=!0),d=c.next(),k.u(5);break;case 2:return Z(k),I(k,r.destroy(),11);case 11:j(k,3);break;case 3:return k.return(!a)}})}w.list=function(){return qm(this,kI())};function kI(){var e,t,n;return V(function(r){switch(r.g){case 1:return Yc(),e=[],t=new No,ae(r,2),I(r,t.init(),4);case 4:return n=Promise.resolve(),Z3(t,function(a,u){n=n.then(function(){var c;return V(function(d){if(d.g==1)return I(d,u.getAllManifests(),2);c=d.h,c.forEach(function(p,S){p=Gm(new nr("manifest",a.nb,a.Ja,S),p),e.push(p)}),q(d)})})}),I(r,n,2);case 2:return Z(r),I(r,t.destroy(),6);case 6:j(r,3);break;case 3:return r.return(e)}})}function EI(e,t,n,r){var a,u,c,d,p;return V(function(S){if(S.g==1)return a=null,u=e.g,c={networkingEngine:u,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(T){a=T},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){}},n.configure(r.manifest),mo(e),I(S,n.start(t,c),2);if(S.g!=3)return d=S.h,mo(e),p=vw(d),I(S,Promise.all(Fd(p,function(T){return T.createSegmentIndex()})),3);if(mo(e),a)throw a;return S.return(d)})}w.yc=function(e,t,n){var r=this,a;return V(function(u){return u.g==1?(a=new Mf({Lb:r.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a.configure(n.drm),I(u,qb(a,e.variants,n.offline.usePersistentLicense),2)):u.g!=3?I(u,Oy(a),3):u.return(a)})};function AI(e,t,n,r){var a=new Map,u=vw(n),c=new Map;u=b(u);for(var d=u.next();!d.done;d=u.next()){d=d.value;var p=II(e,t,n,d,r,a);c.set(d.id,p)}for(e=b(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&c.get(t.audio.id).variantIds.push(t.id),t.video&&c.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(c.values()),Xf:Array.from(a.values())}}function II(e,t,n,r,a,u){var c={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},d=a.offline.numberOfParallelDownloads,p=0;return MI(r,n.presentationTimeline.mb(),function(S){var T=jm(S),k=void 0;if(!u.has(T)){var A=S.endTime-S.startTime;A=hw(t,r.id)*A,A=Y2(e.g,A),u.set(T,new q2(S,A,p,!1))}S.$&&(k=jm(S.$),u.has(k)||(A=.5*hw(t,r.id),A=Y2(e.g,A),u.set(k,new q2(S.$,A,p,!0)))),c.segments.push({pendingInitSegmentRefId:k,initSegmentKey:k?0:null,startTime:S.startTime,endTime:S.endTime,appendWindowStart:S.appendWindowStart,appendWindowEnd:S.appendWindowEnd,timestampOffset:S.timestampOffset,tilesLayout:S.tilesLayout,pendingSegmentRefId:T,dataKey:0,mimeType:S.mimeType,codecs:S.codecs}),p=(p+1)%d}),c}function MI(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function mo(e){if(e.l.g)throw new re(2,9,7001)}function Yc(){if(!Wm())throw new re(2,9,9e3)}function qm(e,t){return V(function(n){return n.g==1?(e.i.push(t),ae(n,2),I(n,t,4)):n.g!=2?n.return(n.h):(Z(n),Zt(e.i,t),j(n,0))})}function _I(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Zt(e.i,n)})}function RI(e){var t=new Set;e=b(e.streams);for(var n=e.next();!n.done;n=e.next()){n=b(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function LI(e,t,n,r){var a,u,c;return V(function(d){return d.g==1?r.drmInfo?(a=eI(n),u=r.sessionIds.map(function(p){return{sessionId:p,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:yw(r,!1),videoCapabilities:yw(r,!0)}}),I(d,fw(t,e,u),2)):d.return():d.g!=3?(c=d.h,I(d,a.remove(c),3)):I(d,a.add(u.filter(function(p){return!c.includes(p.sessionId)})),0)})}function vw(e){for(var t=new Set,n=b(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=b(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=b(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function DI(e){e.variants.map(function(u){return u.video});var t=new Set(e.variants.map(function(u){return u.audio}));e=e.textStreams;for(var n=b(t),r=n.next();!r.done;r=n.next()){r=b(t);for(var a=r.next();!a.done;a=r.next());}for(t=b(e),n=t.next();!n.done;n=t.next())for(n=b(e),r=n.next();!r.done;r=n.next());}ve("shaka.offline.Storage",ao),ao.deleteAll=function(){var e;return V(function(t){return t.g==1?(e=new No,ae(t,2),I(t,tI(e),2)):t.g!=5?(Z(t),I(t,e.destroy(),5)):j(t,0)})},ao.prototype.list=ao.prototype.list,ao.prototype.removeEmeSessions=ao.prototype.Li,ao.prototype.remove=ao.prototype.remove,ao.prototype.store=ao.prototype.store,ao.prototype.getNetworkingEngine=ao.prototype.xb,ao.prototype.getConfiguration=ao.prototype.getConfiguration,ao.prototype.configure=ao.prototype.configure,ao.prototype.destroy=ao.prototype.destroy,ao.support=Wm;var PI=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");Xp.offline=Wm;function co(){}function Eo(e,t){for(e={priority:t||0,callback:e},t=0;t<mu.length;t++)if(mu[t].priority<e.priority){mu.splice(t,0,e);return}mu.push(e)}ve("shaka.polyfill",co),co.register=Eo,co.installAll=function(){for(var e=b(mu),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){je("Error installing polyfill!",n)}}};var mu=[];function gu(){this.g=new Ss}function xw(){h.AbortController||(h.AbortController=gu,h.AbortSignal=Ss)}gu.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new He("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},y.Object.defineProperties(gu.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),co.AbortController=gu,gu.install=xw;function Ss(){this.h=!1,this.g=void 0,this.onabort=null,this.i=new Wt}Ss.prototype.addEventListener=function(e,t,n){return this.i.addEventListener(e,t,n)},Ss.prototype.removeEventListener=function(e,t,n){return this.i.removeEventListener(e,t,n)},Ss.prototype.dispatchEvent=function(e){return this.i.dispatchEvent(e)},Ss.prototype.throwIfAborted=function(){if(this.h)throw this.g},y.Object.defineProperties(Ss.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Eo(xw);function ww(){}function Sw(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=b(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())OI(t.value)}function OI(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}co.Aria=ww,ww.install=Sw,Eo(Sw);function Cw(){}function Tw(){$S()}co.EncryptionScheme=Cw,Cw.install=Tw,Eo(Tw,-2);function bw(){}function kw(){if(h.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Da),document.addEventListener("webkitfullscreenerror",Da),document.addEventListener("mozfullscreenchange",Da),document.addEventListener("mozfullscreenerror",Da),document.addEventListener("MSFullscreenChange",Da),document.addEventListener("MSFullscreenError",Da)}}function Da(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}co.Fullscreen=bw,bw.install=kw,Eo(kw);function Qc(){}function Ew(){var e=!0;!ni()||ni()&&ff()||ni()&&Jt("Fuchsia")||(e=!1),(Us()||lf()||Zi()||Qi()||Yi()||Jt("PC=EOS")||uf())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Aw=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=NI)}function NI(e){var t,n,r,a,u,c,d,p,S,T,k;return V(function(A){switch(A.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,r=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(a=n.contentType,u=yl(a),!u)||r&&(c=r.contentType,d=yl(c),!d))return A.return(t)}else return A.return(t);A.u(2);break}if(!Ui())return A.return(t);if(!n){A.u(3);break}return I(A,UI(n),4);case 4:if(p=A.h,!p)return A.return(t);case 3:if(r){var E=r.contentType;if(ni()&&r.spatialRendering&&(E+="; spatialRendering=true"),S=bt(E),!S)return A.return(t)}case 2:return e.keySystemConfiguration?(T=e.keySystemConfiguration,I(A,BI(n,r,T),6)):(t.supported=!0,A.return(t));case 6:(k=A.h)&&(t.supported=!0,t.keySystemAccess=k);case 5:return A.return(t)}})}function UI(e){var t,n;return V(function(r){return r.g==1?ni()?I(r,jI(e),3):Yi()?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width,t+="; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.bitrate&&(t+="; bitrate="+e.bitrate),r.return(bt(t))):r.u(2):r.g!=2?(n=r.h,r.return(n)):r.return(bt(e.contentType))})}function BI(e,t,n){var r,a,u,c,d,p,S,T,k;return V(function(A){switch(A.g){case 1:if(r=[],a=[],n.audio&&(u={robustness:n.audio.robustness||"",contentType:t.contentType},Yi()&&t.contentType.includes('codecs="ac-3"')&&(u.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(u.encryptionScheme=n.audio.encryptionScheme),r.push(u)),n.video&&(c={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(c.encryptionScheme=n.video.encryptionScheme),a.push(c)),d={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(d.audioCapabilities=r),a.length&&(d.videoCapabilities=a),p=e?e.contentType:"",S=t?t.contentType:"",T=n.keySystem,k=null,ee(A,2),rf.has(p+"#"+S+"#"+T)){k=rf.get(p+"#"+S+"#"+T)||null,A.u(4);break}return I(A,navigator.requestMediaKeySystemAccess(n.keySystem,[d]),5);case 5:k=A.h,rf.set(p+"#"+S+"#"+T,k);case 4:ne(A,3);break;case 2:Y(A);case 3:return A.return(k)}})}function jI(e){var t,n;return V(function(r){return r.g==1?h.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.transferFunction==="pq"&&(t+="; eotf=smpte2084"),n=!1,t in Zc?(n=Zc[t],r.u(2)):I(r,cast.__platform__.canDisplayType(t),3)):r.return(bt(e.contentType)):(r.g!=2&&(n=r.h,Zc[t]=n),r.return(n))})}co.MediaCapabilities=Qc,Qc.install=Ew;var Aw=null;Qc.originalMcap=Aw;var Zc={};Qc.memoizedCanDisplayTypeRequests_=Zc,Eo(Ew,-1);function Iw(){}function Mw(){var e=Bs();(h.MediaSource||h.ManagedMediaSource)&&(e&&h.MediaSource?10>=e?h.MediaSource=null:12>=e?(Km(),_w()):15>=e&&Km():Jt("DT_STB_BCM")?(Km(),_w()):(sf()||xl()||Jt("Tizen 4"))&&$I()),(h.MediaSource||h.ManagedMediaSource)&&FI(),h.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&zI()}function Km(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,De.apply(0,arguments));return t.abort=function(){},t}}function _w(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function FI(){if(h.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return hf(n)!="mp2t"&&e(n)}}if(h.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);h.ManagedMediaSource.isTypeSupported=function(n){return hf(n)!="mp2t"&&t(n)}}}function $I(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return zs(n)!="opus"&&e(n)},h.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);h.ManagedMediaSource.isTypeSupported=function(n){return zs(n)!="opus"&&t(n)}}}function zI(){var e=MediaSource.isTypeSupported;Qi()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(c){return c.startsWith("codecs=")});if(0>r)return e(t);var a=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),u=a.findIndex(function(c){return c.startsWith("vp09")});return 0<=u&&(a[u]="vp9",n[r]='codecs="'+a.join(",")+'"',t=n.join("; ")),e(t)})}co.MediaSource=Iw,Iw.install=Mw,Eo(Mw);function Rw(){}function Lw(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?VI():h.orientation!=null&&HI())}function VI(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function HI(){function e(){switch(h.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new Jc;screen.orientation=t,e(),h.addEventListener("orientationchange",function(){e();var n=new He("change");t.dispatchEvent(n)})}co.Orientation=Rw,Rw.install=Lw;function Jc(){Wt.call(this),this.type="",this.angle=0}Q(Jc,Wt),Jc.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Jc.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Eo(Lw);function Ym(){}var Qm,Zm,Jm,e0,t0,n0;function GI(e,t){try{var n=new eh(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function WI(e){var t=this.mediaKeys;return t&&t!=e&&Dw(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Dw(e,this):Promise.resolve()}function XI(e){if(e=st(e.initData),hn(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=rr(e.subarray(4),!0),e=Bi(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Dn(e),this.dispatchEvent(t)}co.PatchedMediaKeysApple=Ym,Ym.uninstall=function(){Qm&&(Qm=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Zm),HTMLMediaElement.prototype.setMediaKeys=Jm,h.MediaKeys=e0,h.MediaKeySystemAccess=t0,navigator.requestMediaKeySystemAccess=n0,Zm=n0=Jm=t0=e0=null,h.shakaMediaKeysPolyfill="")},Ym.install=function(e){h.HTMLVideoElement&&h.WebKitMediaKeys&&(e!==void 0&&e&&(Qm=!0,Zm=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),Jm=HTMLMediaElement.prototype.setMediaKeys,e0=h.MediaKeys,t0=h.MediaKeySystemAccess,n0=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=WI,h.MediaKeys=yu,h.MediaKeySystemAccess=eh,navigator.requestMediaKeySystemAccess=GI,h.shakaMediaKeysPolyfill=qI)};function eh(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=b(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,a=!1;if(n.audioCapabilities)for(var u=b(n.audioCapabilities),c=u.next();!c.done;c=u.next())c=c.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.audioCapabilities.push(c),a=!0));if(n.videoCapabilities)for(n=b(n.videoCapabilities),u=n.next();!u.done;u=n.next())u=u.value,u.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0])&&(t.videoCapabilities.push(u),a=!0));r||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=a?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}eh.prototype.createMediaKeys=function(){var e=new yu(this.keySystem);return Promise.resolve(e)},eh.prototype.getConfiguration=function(){return this.g};function yu(e){this.h=new WebKitMediaKeys(e),this.g=new xt}yu.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new o0(this.h)},yu.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function Dw(e,t){if(e.g.Ra(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",XI);try{return ra(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}yu.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function o0(e){Wt.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new xt,this.sessionId="",this.expiration=NaN,this.closed=new en,this.keyStatuses=new Pw}Q(o0,Wt),w=o0.prototype,w.generateRequest=function(e,t){var n=this;this.h=new en;try{var r=this.l.createSession("video/mp4",st(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(a){n.h&&(n.h.resolve(),n.h=null),a=new Map().set("messageType",n.keyStatuses.Yb()==null?"license-request":"license-renewal").set("message",Dn(a.message)),a=new He("message",a),n.dispatchEvent(a)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(th(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var a=Error("EME PatchedMediaKeysApple key error");if(a.errorCode=n.i.error,n.h!=null)n.h.reject(a),n.h=null;else if(n.g!=null)n.g.reject(a),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:th(n,"output-not-allowed");break;default:th(n,"internal-error")}}),th(this,"status-pending")}catch(a){this.h.reject(a)}return this.h},w.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},w.update=function(e){this.g=new en;try{this.i.update(st(e))}catch(t){this.g.reject(t)}return this.g},w.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ra()}catch(e){this.closed.reject(e)}return this.closed},w.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function th(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new He("keystatuseschange"),e.dispatchEvent(t)}function Pw(){this.size=0,this.g=void 0}w=Pw.prototype,w.Yb=function(){return this.g},w.forEach=function(e){this.g&&e(this.g,of.value())},w.get=function(e){if(this.has(e))return this.g},w.has=function(e){var t=of.value();return!!(this.g&&Kn(e,t))},w.entries=function(){},w.keys=function(){},w.values=function(){};var qI="apple";function Ow(){}function Nw(){h.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||xl()||Jt("Tizen 4")||Jt("Tizen 5.0")||af())&&(MediaKeys.prototype.setServerCertificate=KI)}function KI(){return Promise.resolve(!1)}co.PatchedMediaKeysCert=Ow,Ow.install=Nw,Eo(Nw);function Uw(){}function Bw(){!h.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=YI,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=QI,h.MediaKeys=nh,h.MediaKeySystemAccess=i0,h.shakaMediaKeysPolyfill=ZI)}function YI(){return Promise.reject(Error("The key system specified is not supported."))}function QI(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}co.PatchedMediaKeysNop=Uw,Uw.install=Bw;function nh(){throw new TypeError("Illegal constructor.")}nh.prototype.createSession=function(){},nh.prototype.setServerCertificate=function(){},nh.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function i0(){throw this.keySystem="",new TypeError("Illegal constructor.")}i0.prototype.getConfiguration=function(){},i0.prototype.createMediaKeys=function(){};var ZI="nop";Eo(Bw,-10);function jw(){}function Fw(){if(!(!h.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)u0="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=JI,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=eM,h.MediaKeys=vu,h.MediaKeySystemAccess=oh,h.shakaMediaKeysPolyfill=tM}}function r0(e){var t=u0;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function JI(e,t){try{var n=new oh(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function eM(e){var t=this.mediaKeys;return t&&t!=e&&$w(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&$w(e,this),Promise.resolve()}co.PatchedMediaKeysWebkit=jw,jw.install=Fw;function oh(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,a=document.getElementsByTagName("video");a=a.length?a[0]:document.createElement("video"),t=b(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:u.initDataTypes,sessionTypes:["temporary"],label:u.label},d=!1;if(u.audioCapabilities)for(var p=b(u.audioCapabilities),S=p.next();!S.done;S=p.next())S=S.value,S.contentType&&(d=!0,a.canPlayType(S.contentType.split(";")[0],this.g)&&(c.audioCapabilities.push(S),r=!0));if(u.videoCapabilities)for(p=b(u.videoCapabilities),S=p.next();!S.done;S=p.next())S=S.value,S.contentType&&(d=!0,a.canPlayType(S.contentType,this.g)&&(c.videoCapabilities.push(S),r=!0));if(d||(r=a.canPlayType("video/mp4",this.g)||a.canPlayType("video/webm",this.g)),u.persistentState=="required"&&(n?(c.persistentState="required",c.sessionTypes=["persistent-license"]):r=!1),r){this.h=c;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}oh.prototype.createMediaKeys=function(){var e=new vu(this.g);return Promise.resolve(e)},oh.prototype.getConfiguration=function(){return this.h};function vu(e){this.l=e,this.h=null,this.g=new xt,this.i=[],this.j=new Map}function $w(e,t){e.h=t,e.g.Ra();var n=u0;t&&(e.g.D(t,n+"needkey",function(r){var a=new CustomEvent("encrypted");a.initDataType="cenc",a.initData=Dn(r.initData),e.h.dispatchEvent(a)}),e.g.D(t,n+"keymessage",function(r){var a=s0(e,r.sessionId);a&&(r=new Map().set("messageType",a.keyStatuses.Yb()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new He("message",r),a.h&&(a.h.resolve(),a.h=null),a.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=s0(e,r.sessionId))&&r.ready()}),e.g.D(t,n+"keyerror",function(r){var a=s0(e,r.sessionId);if(a){var u=Error("EME v0.1b key error"),c=r.errorCode;c.systemCode=r.systemCode,u.errorCode=c,!r.sessionId&&a.h?(r.systemCode==45&&(u.message="Unsupported session type."),a.h.reject(u),a.h=null):r.sessionId&&a.g?(a.g.reject(u),a.g=null):(u=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?ih(a,"output-restricted"):u==1?ih(a,"expired"):ih(a,"internal-error"))}}))}vu.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new a0(t,this.l,e),this.i.push(e),e},vu.prototype.setServerCertificate=function(){return Promise.resolve(!1)},vu.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function s0(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function a0(e,t,n){Wt.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new en,this.keyStatuses=new Vw}Q(a0,Wt),w=a0.prototype,w.ready=function(){ih(this,"usable"),this.g&&this.g.resolve(),this.g=null};function zw(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=st(Bi("LOAD_SESSION|"+n));else{var a=Bi("PERSISTENT|");r=Pn(a,t)}else r=st(t)}catch(c){return Promise.reject(c)}e.h=new en;var u=r0("generateKeyRequest");try{e.j[u](e.i,r)}catch(c){if(c.name!="InvalidStateError")return e.h=null,Promise.reject(c);new It(function(){try{e.j[u](e.i,r)}catch(d){e.h.reject(d),e.h=null}}).Y(.01)}return e.h}function l0(e,t,n){if(e.g)e.g.then(function(){return l0(e,t,n)}).catch(function(){return l0(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=dn(n),a=JSON.parse(r);a.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=pi(a.keys[0].k),a=pi(a.keys[0].kid)}else r=st(n),a=null;var u=r0("addKey");try{e.j[u](e.i,r,a,e.sessionId)}catch(c){e.g.reject(c),e.g=null}}}function ih(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new He("keystatuseschange"),e.dispatchEvent(t)}w.generateRequest=function(e,t){return zw(this,t,null)},w.load=function(e){return this.l=="persistent-license"?zw(this,null,e):Promise.reject(Error("Not a persistent session."))},w.update=function(e){var t=new en;return l0(this,t,e),t},w.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=r0("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},w.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function Vw(){this.size=0,this.g=void 0}w=Vw.prototype,w.Yb=function(){return this.g},w.forEach=function(e){this.g&&e(this.g,of.value())},w.get=function(e){if(this.has(e))return this.g},w.has=function(e){var t=of.value();return!!(this.g&&Kn(e,t))},w.entries=function(){},w.keys=function(){},w.values=function(){};var u0="",tM="webkit";Eo(Fw);function Hw(){}function Gw(){if(h.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=oM,Object.defineProperty(e,"disablePictureInPicture",{get:rM,set:sM,enumerable:!0,configurable:!0}),document.exitPictureInPicture=iM,document.addEventListener("webkitpresentationmodechanged",nM,!0))}}function nM(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function oM(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function iM(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function rM(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function sM(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}co.PiPWebkit=Hw,Hw.install=Gw,Eo(Gw);function Ww(){}function Xw(){h.crypto&&("randomUUID"in h.crypto||(h.crypto.randomUUID=aM))}function aM(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}co.RandomUUID=Ww,Ww.install=Xw,Eo(Xw);function qw(){}function Kw(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:lM})}function lM(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}co.Symbol=qw,qw.install=Kw,Eo(Kw);function Yw(){}function Qw(){if(h.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}co.VideoPlayPromise=Yw,Yw.install=Qw,Eo(Qw);function Zw(){}function Jw(){if(h.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||af())&&(e.getVideoPlaybackQuality=uM)}}function uM(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}co.VideoPlaybackQuality=Zw,Zw.install=Jw,Eo(Jw);function eS(){}function tS(){if(!h.VTTCue&&h.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=f0;else if(t==6)e=fM;else{try{var n=!!f0(1,2,"")}catch{n=!1}n&&(e=f0)}e&&(h.VTTCue=function(r,a,u){return e(r,a,u)})}}function f0(e,t,n){return new h.TextTrackCue(e,t,n)}function fM(e,t,n){return new h.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}co.VTTCue=eS,eS.install=tS,Eo(tS);function ri(){}ri.prototype.parseInit=function(){},ri.prototype.setSequenceMode=function(){},ri.prototype.setManifestType=function(){},ri.prototype.parseMedia=function(e,t){var n=null,r=[];e=dn(e).split(/\r?\n/),e=b(e);for(var a=e.next();!a.done;a=e.next())if((a=a.value)&&!/^\s+$/.test(a)&&(a=cM.exec(a))){var u=hM.exec(a[1]);u=60*parseInt(u[1],10)+parseFloat(u[2].replace(",",".")),a=new Ct(u,t.segmentEnd?t.segmentEnd:u+2,a[2]),n&&(n.endTime=u,r.push(n)),n=a}return n&&r.push(n),r},ve("shaka.text.LrcTextParser",ri),ri.prototype.parseMedia=ri.prototype.parseMedia,ri.prototype.setManifestType=ri.prototype.setManifestType,ri.prototype.setSequenceMode=ri.prototype.setSequenceMode,ri.prototype.parseInit=ri.prototype.parseInit;var cM=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,hM=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Xn["application/x-subtitle-lrc"]=function(){return new ri};function qo(){}qo.prototype.parseInit=function(){},qo.prototype.setSequenceMode=function(){},qo.prototype.setManifestType=function(){},qo.prototype.parseMedia=function(e,t,n){var r=dn(e);if(e=[],r=="")return e;var a=Js(r,"tt");if(!a)throw new re(2,2,2005,"Failed to parse TTML.");if(r=Ii(a,"body")[0],!r)return[];var u=er(a,xu,"frameRate"),c=er(a,xu,"subFrameRate"),d=er(a,xu,"frameRateMultiplier"),p=er(a,xu,"tickRate"),S=er(a,xu,"cellResolution"),T=a.attributes["xml:space"]||"default",k=er(a,ah,"extent");if(T!="default"&&T!="preserve")throw new re(2,2,2005,"Invalid xml:space value: "+T);T=T=="default",u=new mM(u,c,d,p),S=S&&(S=/^(\d+) (\d+)$/.exec(S))?{dc:parseInt(S[1],10),rows:parseInt(S[2],10)}:null,c=(c=Ii(a,"metadata")[0])?c.children:[],d=Ii(a,"style"),a=Ii(a,"region"),p=[];for(var A=b(a),E=A.next();!E.done;E=A.next()){var R=E.value;E=new An;var D=R.attributes["xml:id"];if(D){E.id=D;var L=null;k&&(L=p0.exec(k)||m0.exec(k)),D=L?Number(L[1]):null,L=L?Number(L[2]):null;var $,N=rh(R,d,"extent");if(N){var K=($=p0.exec(N))||m0.exec(N);K!=null&&(E.width=Number(K[1]),E.height=Number(K[2]),$||(D!=null&&(E.width=100*E.width/D),L!=null&&(E.height=100*E.height/L)),E.widthUnits=$||D!=null?In:0,E.heightUnits=$||L!=null?In:0)}(R=rh(R,d,"origin"))&&(K=($=p0.exec(R))||m0.exec(R),K!=null&&(E.viewportAnchorX=Number(K[1]),E.viewportAnchorY=Number(K[2]),$?N||(E.width=100-E.viewportAnchorX,E.widthUnits=In,E.height=100-E.viewportAnchorY,E.heightUnits=In):(L!=null&&(E.viewportAnchorY=100*E.viewportAnchorY/L),D!=null&&(E.viewportAnchorX=100*E.viewportAnchorX/D)),E.viewportAnchorUnits=$||D!=null?In:0))}else E=null;E&&p.push(E)}if(sn(r,"p").length)throw new re(2,2,2001,"<p> can only be inside <div> in TTML");for(k=b(sn(r,"div")),A=k.next();!A.done;A=k.next())if(sn(A.value,"span").length)throw new re(2,2,2001,"<span> can only be inside <p> in TTML");return(t=nS(r,t,u,c,d,a,p,T,S,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function nS(e,t,n,r,a,u,c,d,p,S,T,k){var A=S;if(bf(e)){if(!T)return null;var E={tagName:"span",children:[qn(e)],attributes:{},parent:null}}else E=e;for(var R=null,D=b(hS),L=D.next();!L.done&&!(R=sh(E,"backgroundImage",r,"#",L.value)[0]);L=D.next());D=null;var $=er(E,hS,"backgroundImage");if(k&&$&&!$.startsWith("#")&&(L=new Sn(k),$=new Sn($),(L=L.resolve($).toString())&&(D=L)),(e.tagName=="p"||R||D)&&(T=!0),e=T,L=(E.attributes["xml:space"]||(d?"default":"preserve"))=="default",$=E.children.every(bf),d=[],!$)for(var N=b(E.children),K=N.next();!K.done;K=N.next())(K=nS(K.value,t,n,r,a,u,c,L,p,E,T,k))&&d.push(K);if(r=S!=null,k=qn(E),k=E.children.length&&k&&/\S/.test(k),K=E.attributes.begin||E.attributes.end||E.attributes.dur,!(K||k||E.tagName=="br"||d.length!=0||r&&!L))return null;for(N=rS(E,n),k=N.start,N=N.end;A&&A.tagName&&A.tagName!="tt";)N=pM(A,n,k,N),k=N.start,N=N.end,A=A.parent;if(k==null&&(k=0),k+=t.periodStart,N=N==null?1/0:N+t.periodStart,k=Math.max(k,t.segmentStart),N=Math.min(N,t.segmentEnd),!K&&0<d.length)for(k=1/0,N=0,t=b(d),n=t.next();!n.done;n=t.next())n=n.value,k=Math.min(k,n.startTime),N=Math.max(N,n.endTime);if(E.tagName=="br")return a=new Ct(k,N,""),a.lineBreak=!0,a;if(t="",$&&(t=Ro(qn(E)||""),L&&(t=t.replace(/\s+/g," "))),t=new Ct(k,N,t),t.nestedCues=d,T||(t.isContainer=!0),p&&(t.cellResolution=p),p=sh(E,"region",u,"")[0],E.attributes.region&&p&&p.attributes["xml:id"]){var O=p.attributes["xml:id"];t.region=c.filter(function(H){return H.id==O})[0]}return c=p,S&&r&&!E.attributes.region&&!E.attributes.style&&(c=sh(S,"region",u,"")[0]),dM(t,E,c,R,D,a,e,d.length==0),t}function dM(e,t,n,r,a,u,c,d){if(c=c||d,go(t,n,u,"direction",c)=="rtl"&&(e.direction="rtl"),d=go(t,n,u,"writingMode",c),d=="tb"||d=="tblr"?e.writingMode="vertical-lr":d=="tbrl"?e.writingMode="vertical-rl":d=="rltb"||d=="rl"?e.direction="rtl":d&&(e.direction=ht),(d=go(t,n,u,"textAlign",!0))?(e.positionAlign=vM[d],e.lineAlign=yM[d],e.textAlign=Ze[d.toUpperCase()]):e.textAlign=qe,(d=go(t,n,u,"displayAlign",!0))&&(e.displayAlign=Be[d.toUpperCase()]),(d=go(t,n,u,"color",c))&&(e.color=d),(d=go(t,n,u,"backgroundColor",c))&&(e.backgroundColor=d),(d=go(t,n,u,"border",c))&&(e.border=d),d=go(t,n,u,"fontFamily",c))switch(d){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=d.split(",").filter(function(p){return p!="default"}).join(",")}switch((d=go(t,n,u,"fontWeight",c))&&d=="bold"&&(e.fontWeight=700),d=go(t,n,u,"wrapOption",c),e.wrapLine=!(d&&d=="noWrap"),(d=go(t,n,u,"lineHeight",c))&&d.match(Pa)&&(e.lineHeight=d),(d=go(t,n,u,"fontSize",c))&&(d.match(Pa)||d.match(gM))&&(e.fontSize=d),(d=go(t,n,u,"fontStyle",c))&&(e.fontStyle=Yn[d.toUpperCase()]),r?(a=r.attributes.imageType||r.attributes.imagetype,d=r.attributes.encoding,r=qn(r).trim(),a=="PNG"&&d=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):a&&(e.backgroundImage=a),(r=go(t,n,u,"textOutline",c))&&(r=r.split(" "),r[0].match(Pa)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(Pa)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=go(t,n,u,"letterSpacing",c))&&r.match(Pa)&&(e.letterSpacing=r),(r=go(t,n,u,"linePadding",c))&&r.match(Pa)&&(e.linePadding=r),(r=go(t,n,u,"opacity",c))&&(e.opacity=parseFloat(r)),(r=rh(n,u,"textDecoration"))&&oS(e,r),(r=c0(t,u,"textDecoration"))&&oS(e,r),(r=go(t,n,u,"textCombine",c))&&(e.textCombineUpright=r),go(t,n,u,"ruby",c)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function oS(e,t){t=b(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Zt(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Zt(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Zt(e.textDecoration,"overline")}}function go(e,t,n,r,a){return a=a===void 0?!0:a,(e=c0(e,n,r))?e:a?rh(t,n,r):null}function rh(e,t,n){if(!e)return null;var r=er(e,ah,n);return r||iS(e,t,n)}function c0(e,t,n){var r=er(e,ah,n);return r||iS(e,t,n)}function iS(e,t,n){e=sh(e,"style",t,"");for(var r=null,a=0;a<e.length;a++){var u=hr(e[a],"urn:ebu:tt:style",n);u||(u=er(e[a],ah,n)),u||(u=c0(e[a],t,n)),u&&(r=u)}return r}function sh(e,t,n,r,a){var u=[];if(!e||1>n.length)return u;var c=e;for(e=null;!e&&!(e=a?hr(c,a,t):c.attributes[t])&&(c=c.parent,c););if(t=e){for(t=b(t.split(" ")),a=t.next();!a.done;a=t.next())for(a=a.value,e=b(n),c=e.next();!c.done;c=e.next())if(c=c.value,r+c.attributes["xml:id"]==a){u.push(c);break}}return u}function pM(e,t,n,r){return e=rS(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function rS(e,t){var n=h0(e.attributes.begin,t),r=h0(e.attributes.end,t);return e=h0(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function h0(e,t){var n=null;if(sS.test(e)){e=sS.exec(e),n=Number(e[1]);var r=Number(e[2]),a=Number(e[3]),u=Number(e[4]);u+=(Number(e[5])||0)/t.h,a+=u/t.frameRate,n=a+60*r+3600*n}else if(aS.test(e))n=d0(aS,e);else if(lS.test(e))n=d0(lS,e);else if(uS.test(e))e=uS.exec(e),n=Number(e[1])/t.frameRate;else if(fS.test(e))e=fS.exec(e),n=Number(e[1])/t.g;else if(cS.test(e))n=d0(cS,e);else if(e)throw new re(2,2,2001,"Could not parse cue time range in TTML");return n}function d0(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}ve("shaka.text.TtmlTextParser",qo),qo.prototype.parseMedia=qo.prototype.parseMedia,qo.prototype.setManifestType=qo.prototype.setManifestType,qo.prototype.setSequenceMode=qo.prototype.setSequenceMode,qo.prototype.parseInit=qo.prototype.parseInit;function mM(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var p0=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,gM=/^(\d{1,4}(?:\.\d+)?|100)%$/,Pa=/^(\d+px|\d+em|\d*\.?\d+c)$/,m0=/^(\d+)px (\d+)px$/,sS=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,aS=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,lS=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,uS=/^(\d*(?:\.\d*)?)f$/,fS=/^(\d*(?:\.\d*)?)t$/,cS=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),yM={left:Ce,center:"center",right:"end",start:Ce,end:"end"},vM={left:"line-left",center:"center",right:"line-right"},xu=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],ah=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],hS=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Xn["application/ttml+xml"]=function(){return new qo};function lo(){this.g=new qo}lo.prototype.parseInit=function(e){var t=!1;if(new on().box("moov",_t).box("trak",_t).box("mdia",_t).box("minf",_t).box("stbl",_t).S("stsd",Pr).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new re(2,2,2007)},lo.prototype.setSequenceMode=function(){},lo.prototype.setManifestType=function(){},lo.prototype.parseMedia=function(e,t,n){var r=this,a=!1,u=[];if(new on().box("mdat",Qs(function(c){a=!0,u=u.concat(r.g.parseMedia(c,t,n))})).parse(e,!1),!a)throw new re(2,2,2007);return u},ve("shaka.text.Mp4TtmlParser",lo),lo.prototype.parseMedia=lo.prototype.parseMedia,lo.prototype.setManifestType=lo.prototype.setManifestType,lo.prototype.setSequenceMode=lo.prototype.setSequenceMode,lo.prototype.parseInit=lo.prototype.parseInit,Xn['application/mp4; codecs="stpp"']=function(){return new lo},Xn['application/mp4; codecs="stpp.ttml"']=function(){return new lo},Xn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new lo},Xn['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new lo},Xn['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new lo},Xn['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new lo},Xn['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new lo},Xn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new lo};function Ao(){this.h=!1,this.g="UNKNOWN"}Ao.prototype.parseInit=function(){},Ao.prototype.setSequenceMode=function(e){this.h=e},Ao.prototype.setManifestType=function(e){this.g=e},Ao.prototype.parseMedia=function(e,t){e=dn(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new re(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new re(2,2,2e3);if(e=lh(new jr(e[1])),e==null)throw new re(2,2,2e3);r=Number(r[1]);for(var a=t.segmentStart-t.periodStart;95443.7176888889<=a;)a-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}else e=t.segmentStart;for(t=[],r=b(n[0].split(`
`)),a=r.next();!a.done;a=r.next())if(a=a.value,/^Region:/.test(a)){a=new jr(a);var u=new An;ms(a),va(a);for(var c=ms(a);c;){var d=u,p=c;(c=/^id=(.*)$/.exec(p))?d.id=c[1]:(c=/^width=(\d{1,2}|100)%$/.exec(p))?d.width=Number(c[1]):(c=/^lines=(\d+)$/.exec(p))?(d.height=Number(c[1]),d.heightUnits=2):(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(d.regionAnchorX=Number(c[1]),d.regionAnchorY=Number(c[2])):(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(d.viewportAnchorX=Number(c[1]),d.viewportAnchorY=Number(c[2])):/^scroll=up$/.exec(p)&&(d.scroll="up"),va(a),c=ms(a)}t.push(u)}for(r=new Map,dS(r),a=[],n=b(n.slice(1)),u=n.next();!u.done;u=n.next()){if(u=u.value.split(`
`),(u.length!=1||u[0])&&!/^NOTE($|[ \t])/.test(u[0])&&u[0]=="STYLE"){for(d=[],c=-1,p=1;p<u.length;p++)u[p].includes("::cue")&&(d.push([]),c=d.length-1),c!=-1&&(d[c].push(u[p]),u[p].includes("}")&&(c=-1));for(d=b(d),c=d.next();!c.done;c=d.next()){var S=c.value;c="global",(p=S[0].match(/\((.*)\)/))&&(c=p.pop()),p=S.slice(1,-1),S[0].includes("}")&&(S=/\{(.*?)\}/.exec(S[0]))&&(p=S[1].split(";")),(S=r.get(c))||(S=new Ct(0,0,""));for(var T=!1,k=0;k<p.length;k++){var A=/^\s*([^:]+):\s*(.*)/.exec(p[k]);if(A){var E=A[2].trim().replace(";","");switch(A[1].trim()){case"background-color":case"background":T=!0,S.backgroundColor=E;break;case"color":T=!0,S.color=E;break;case"font-family":T=!0,S.fontFamily=E;break;case"font-size":T=!0,S.fontSize=E;break;case"font-weight":(700<=parseInt(E,10)||E=="bold")&&(T=!0,S.fontWeight=700);break;case"font-style":switch(E){case"normal":T=!0,S.fontStyle=yn;break;case"italic":T=!0,S.fontStyle="italic";break;case"oblique":T=!0,S.fontStyle="oblique"}break;case"opacity":T=!0,S.opacity=parseFloat(E);break;case"text-combine-upright":T=!0,S.textCombineUpright=E;break;case"text-shadow":T=!0,S.textShadow=E;break;case"white-space":T=!0,S.wrapLine=E!="noWrap"}}}T&&r.set(c,S)}}if(S=u,T=e,S.length==1&&!S[0]||/^NOTE($|[ \t])/.test(S[0])||S[0]=="STYLE"||S[0]=="REGION")u=null;else if(u=null,S[0].includes("-->")||(u=S[0],S.splice(0,1)),d=new jr(S[0]),c=lh(d),k=vr(d,/[ \t]+--\x3e[ \t]+/g),p=lh(d),c==null||k==null||p==null)je("Failed to parse VTT time code. Cue skipped:",u,S),u=null;else{for(c+=T,p+=T,S=S.slice(1).join(`
`).trim(),r.has("global")?(T=r.get("global").clone(),T.startTime=c,T.endTime=p,T.payload=""):T=new Ct(c,p,""),va(d),c=ms(d);c;)gS(T,c,t),va(d),c=ms(d);pS(S,T,r),u!=null&&(T.id=u),u=T}u&&a.push(u)}return a};function dS(e){for(var t=b(Object.entries(nt)),n=t.next();!n.done;n=t.next()){var r=b(n.value);n=r.next().value,r=r.next().value;var a=new Ct(0,0,"");a.color=r,e.set("."+n,a)}for(t=b(Object.entries(Bt)),n=t.next();!n.done;n=t.next())r=b(n.value),n=r.next().value,r=r.next().value,a=new Ct(0,0,""),a.backgroundColor=r,e.set("."+n,a)}function pS(e,t,n){if(e.includes("<")){n.size===0&&dS(n);var r=e;e=[];for(var a=-1,u=0;u<r.length;u++)r[u]==="<"?a=u+1:r[u]===">"&&0<a&&(a=r.substr(a,u-a),a.match(yS)&&e.push(a),a=-1);for(e=b(e),u=e.next();!u.done;u=e.next())u=u.value,r=r.replace("<"+u+">",'<div time="'+u+'">'),r+="</div>";e=r;e:{u=e,a=[];var c=-1;e="",r=!1;for(var d=0;d<u.length;d++)if(u[d]==="/"){var p=u.indexOf(">",d);if(p===-1){e=u;break e}if((p=u.substring(d+1,p))&&p=="v"){r=!0;var S=null;if(a.length&&(S=a[a.length-1]),S){if(S===p)e+="/"+p+">";else{if(!S.startsWith("v")){e+=u[d];continue}e+="/"+S+">"}d+=p.length+1}else e+=u[d]}else e+=u[d]}else u[d]==="<"?(c=d+1,u[c]!="v"&&(c=-1)):u[d]===">"&&0<c&&(a.push(u.substr(c,d-c)),c=-1),e+=u[d];for(u=b(a),a=u.next();!a.done;a=u.next())a=a.value,c=a.replace(" ",".voice-"),e=e.replace("<"+a+">","<"+c+">"),e=e.replace("</"+a+">","</"+c+">"),r||(e+="</"+c+">")}e=xM(e);try{var T=Js("<span>"+e+"</span>","span")}catch{}if(T)if(T=T.children,T.length!=1||T[0].tagName)for(T=b(T),e=T.next();!e.done;e=T.next())mS(e.value,t,n);else t.payload=Ro(e);else t.payload=Ro(e)}else t.payload=Ro(e)}function xM(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(a){return t[a]||""}):e||""}function wu(e,t){return e&&0<e.length?e:t}function mS(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new An,r.position=null,r.size=0,e.tagName)for(var a=b(e.tagName.split(/(?=[ .])+/g)),u=a.next();!u.done;u=a.next()){var c=u=u.value;if(c.startsWith(".voice-")){var d=c.split("-").pop();c='v[voice="'+d+'"]',n.has(c)||(c="v[voice="+d+"]")}switch(n.has(c)&&(d=r,c=n.get(c))&&(d.backgroundColor=wu(c.backgroundColor,d.backgroundColor),d.color=wu(c.color,d.color),d.fontFamily=wu(c.fontFamily,d.fontFamily),d.fontSize=wu(c.fontSize,d.fontSize),d.textShadow=wu(c.textShadow,d.textShadow),d.fontWeight=c.fontWeight,d.fontStyle=c.fontStyle,d.opacity=c.opacity,d.rubyTag=c.rubyTag,d.textCombineUpright=c.textCombineUpright,d.wrapLine=c.wrapLine),u){case"br":r=Ge(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(u=e.attributes.color)&&(r.color=u);break;case"div":if(u=e.attributes.time,!u)break;(u=lh(new jr(u)))&&(r.startTime=u);break;case"ruby":case"rp":case"rt":r.rubyTag=u}}if(a=e.children,bf(e)||a.length==1&&bf(a[0]))for(n=qn(e).split(`
`),e=!0,n=b(n),a=n.next();!a.done;a=n.next())a=a.value,e||(e=Ge(r.startTime,r.endTime),t.nestedCues.push(e)),0<a.length&&(e=r.clone(),e.payload=Ro(a),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=b(a),e=t.next();!e.done;e=t.next())mS(e.value,r,n)}function gS(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=qe:e.textAlign=Ze[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":We)):(r=/^region:(.*)$/.exec(t))?(t=wM(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=pe[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=At,e.line=Number(n[1]),n[2]&&(e.lineAlign=pe[n[2].toUpperCase()]))}function wM(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function lh(e){if(e=vr(e,yS),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}ve("shaka.text.VttTextParser",Ao),Ao.prototype.parseMedia=Ao.prototype.parseMedia,Ao.prototype.setManifestType=Ao.prototype.setManifestType,Ao.prototype.setSequenceMode=Ao.prototype.setSequenceMode,Ao.prototype.parseInit=Ao.prototype.parseInit;var yS=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;Xn["text/vtt"]=function(){return new Ao},Xn['text/vtt; codecs="vtt"']=function(){return new Ao},Xn['text/vtt; codecs="wvtt"']=function(){return new Ao};function si(){this.g=null}si.prototype.parseInit=function(e){var t=this,n=!1;if(new on().box("moov",_t).box("trak",_t).box("mdia",_t).S("mdhd",function(r){r=Rf(r.reader,r.version),t.g=r.timescale}).box("minf",_t).box("stbl",_t).S("stsd",Pr).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new re(2,2,2008);if(!n)throw new re(2,2,2008)},si.prototype.setSequenceMode=function(){},si.prototype.setManifestType=function(){},si.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new re(2,2,2008);var n=0,r=[],a,u=[],c=!1,d=!1,p=!1,S=null;if(new on().box("moof",_t).box("traf",_t).S("tfdt",function(K){c=!0,n=_f(K.reader,K.version).baseMediaDecodeTime}).S("tfhd",function(K){S=t1(K.reader,K.flags).Yc}).S("trun",function(K){d=!0,r=n1(K.reader,K.version,K.flags).Wg}).box("mdat",Qs(function(K){p=!0,a=K})).parse(e,!1),!p&&!c&&!d)throw new re(2,2,2008);e=n;for(var T=new nn(a,0),k=b(r),A=k.next();!A.done;A=k.next()){A=A.value;var E=A.Jf||S,R=A.ne?n+A.ne:e;e=R+(E||0);var D=0;do{var L=T.P();D+=L;var $=T.P(),N=null;Cf($)=="vttc"?8<L&&(N=T.qb(L-8)):T.skip(L-8),E&&N&&(L=SM(N,t.periodStart+R/this.g,t.periodStart+e/this.g),u.push(L))}while(A.sampleSize&&D<A.sampleSize)}return u.filter(as)};function SM(e,t,n){var r,a,u;return new on().box("payl",Qs(function(c){r=dn(c)})).box("iden",Qs(function(c){a=dn(c)})).box("sttg",Qs(function(c){u=dn(c)})).parse(e),r?CM(r,a,u,t,n):null}function CM(e,t,n,r,a){if(r=new Ct(r,a,""),pS(e,r,new Map),t&&(r.id=t),n)for(e=new jr(n),t=ms(e);t;)gS(r,t,[]),va(e),t=ms(e);return r}ve("shaka.text.Mp4VttParser",si),si.prototype.parseMedia=si.prototype.parseMedia,si.prototype.setManifestType=si.prototype.setManifestType,si.prototype.setSequenceMode=si.prototype.setSequenceMode,si.prototype.parseInit=si.prototype.parseInit,Xn['application/mp4; codecs="wvtt"']=function(){return new si};function ai(){}ai.prototype.parseInit=function(){},ai.prototype.setSequenceMode=function(){},ai.prototype.setManifestType=function(){},ai.prototype.parseMedia=function(e){var t=dn(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=b(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var r=new jr(n[0]),a=vS(r),u=vr(r,/,/g);if(r=vS(r),a==null||u==null||r==null)throw new re(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Ct(a,r,n.slice(1).join(`
`).trim()))}return e};function vS(e){if(e=vr(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}ve("shaka.text.SbvTextParser",ai),ai.prototype.parseMedia=ai.prototype.parseMedia,ai.prototype.setManifestType=ai.prototype.setManifestType,ai.prototype.setSequenceMode=ai.prototype.setSequenceMode,ai.prototype.parseInit=ai.prototype.parseInit,Xn["text/x-subviewer"]=function(){return new ai};function Ko(){this.g=new Ao}Ko.prototype.parseInit=function(){},Ko.prototype.setSequenceMode=function(){},Ko.prototype.setManifestType=function(){},Ko.prototype.parseMedia=function(e,t,n){return e=dn(e),e=xS(e),e=st(Bi(e)),this.g.parseMedia(e,t,n)};function xS(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=b(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}ve("shaka.text.SrtTextParser",Ko),Ko.srt2webvtt=xS,Ko.prototype.parseMedia=Ko.prototype.parseMedia,Ko.prototype.setManifestType=Ko.prototype.setManifestType,Ko.prototype.setSequenceMode=Ko.prototype.setSequenceMode,Ko.prototype.parseInit=Ko.prototype.parseInit,Xn["text/srt"]=function(){return new Ko};function li(){}li.prototype.parseInit=function(){},li.prototype.setSequenceMode=function(){},li.prototype.setManifestType=function(){},li.prototype.parseMedia=function(e){var t="",n="",r=null,a=null;for(a=dn(e).split(/\r?\n\s*\r?\n/),e=b(a),a=e.next();!a.done;a=e.next()){var u=a.value;a=u,(u=bM.exec(u))&&(r=u[1],a=u[2]),r=="V4 Styles"||r=="V4+ Styles"?(t=a,t=n?t+(`
`+a):a):r=="Events"&&(n=n?n+(`
`+a):a)}for(r=[],a=null,t=b(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(u=CS.exec(e))){if(e=u[1].trim(),u=u[2].trim(),e=="Format")a=u.split(uh);else if(e=="Style"){e=u.split(uh),u={};for(var c=0;c<a.length&&c<e.length;c++)u[a[c]]=e[c];r.push(u)}}for(a=[],t=null,n=b(n.split(/\r?\n/)),u=n.next(),e={};!u.done;e={jh:void 0},u=n.next())if(u=u.value,!/^\s*;/.test(u)&&(c=CS.exec(u))){if(u=c[1].trim(),c=c[2].trim(),u=="Format")t=c.split(uh);else if(u=="Dialogue"){c=c.split(uh),u={};for(var d=0;d<t.length&&d<c.length;d++)u[t[d]]=c[d];d=SS(u.Start);var p=SS(u.End);c=new Ct(d,p,c.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.jh=u.Style,(e=r.find(function(S){return function(T){return T.Name==S.jh}}(e)))&&TM(c,e),a.push(c)}}return a};function TM(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=wS(n))&&(e.color=n),(n=t.BackColour)&&(n=wS(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Me,e.textAlign="start";break;case 2:e.displayAlign=Me,e.textAlign=qe;break;case 3:e.displayAlign=Me,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=qe;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=qe;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function wS(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function SS(e){return e=kM.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}ve("shaka.text.SsaTextParser",li),li.prototype.parseMedia=li.prototype.parseMedia,li.prototype.setManifestType=li.prototype.setManifestType,li.prototype.setSequenceMode=li.prototype.setSequenceMode,li.prototype.parseInit=li.prototype.parseInit;var bM=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,CS=/^\s*([^:]+):\s*(.*)/,uh=/\s*,\s*/,kM=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Xn["text/x-ssa"]=function(){return new li};function TS(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,ca:e}:null}function bS(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var a=((e[t+2]&192)>>>6)+1,u=(e[t+2]&1)<<2;return u|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:u,codec:"mp4a.40."+a}}function kS(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function EM(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function ui(e){this.i=e,this.h=0,this.g=new Map}w=ui.prototype,w.destroy=function(){this.g.clear()},w.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?bt(this.convertCodecs("audio",e)):!1},w.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(oi(t)||"mp4a.40.2")+'"':t},w.getOriginalMimeType=function(){return this.i},w.transmux=function(e,t,n,r){for(var a=st(e),u=ea(a),c=u.length;c<a.length&&!kS(a,c);c++);if(e=1e3*n.endTime,u=cs(u),u.length&&n&&(u=u.find(function(T){return T.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=u.data),u=bS(a,c),!u)return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount;for(var d=[];c<a.length;){var p=TS(a,c);if(!p)return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));var S=p.Qd+p.ca;c+S<=a.length&&d.push({data:a.subarray(c+p.Qd,c+S),size:p.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),c+=S}return a=u.sampleRate,e=Math.floor(e*a/1e3),r={id:t.id,type:"audio",codecs:u.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:d},stream:t},r=new _a([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Ra(r),this.g.set(n,t)),n=cu(r),this.h++,t=Pn(t,n),Promise.resolve(t)},ve("shaka.transmuxer.AacTransmuxer",ui),ui.prototype.transmux=ui.prototype.transmux,ui.prototype.getOriginalMimeType=ui.prototype.getOriginalMimeType,ui.prototype.convertCodecs=ui.prototype.convertCodecs,ui.prototype.isSupported=ui.prototype.isSupported,ui.prototype.destroy=ui.prototype.destroy,Le("audio/aac",function(){return new ui("audio/aac")},ti);function ES(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,a=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+a>e.length)return null;var u=e[t+6]>>5,c=0;u===2?c+=2:(u&1&&u!==1&&(c+=2),u&4&&(c+=2)),c=(e[t+6]<<8|e[t+7])>>12-c&1;var d=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|d>>2,(d&3)<<6|u<<3|c<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][u]+c,ma:e,ca:a}}function AM(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var a,u;0<r;){u=e[t];var c=Math.min(r,8),d=8-c;a=4278190080>>>24+d<<d,a=(u&a)>>d,n=n?n<<c|a:a,t+=1,r-=c}if(16>n)return!0}return!1}function wi(e){this.i=e,this.h=0,this.g=new Map}w=wi.prototype,w.destroy=function(){this.g.clear()},w.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?bt(this.convertCodecs("audio",e)):!1},w.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},w.getOriginalMimeType=function(){return this.i},w.transmux=function(e,t,n,r){e=st(e);for(var a=ea(e),u=a.length;u<e.length&&!AM(e,u);u++);var c=1e3*n.endTime;a=cs(a),a.length&&n&&(a=a.find(function(T){return T.description==="com.apple.streaming.transportStreamTimestamp"}))&&(c=a.data),a=0;for(var d=new Uint8Array([]),p=[];u<e.length;){var S=ES(e,u);if(!S)return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=S.sampleRate,t.channelsCount=S.channelCount,a=S.sampleRate,d=S.ma,p.push({data:e.subarray(u,u+S.ca),size:S.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),u+=S.ca}return e=Math.floor(c*a/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:r,$a:[],ma:d,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:p},stream:t},r=new _a([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Ra(r),this.g.set(n,t)),n=cu(r),this.h++,t=Pn(t,n),Promise.resolve(t)},ve("shaka.transmuxer.Ac3Transmuxer",wi),wi.prototype.transmux=wi.prototype.transmux,wi.prototype.getOriginalMimeType=wi.prototype.getOriginalMimeType,wi.prototype.convertCodecs=wi.prototype.convertCodecs,wi.prototype.isSupported=wi.prototype.isSupported,wi.prototype.destroy=wi.prototype.destroy,Le("audio/ac3",function(){return new wi("audio/ac3")},ti);function AS(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new pr(e.subarray(t+2));Vo(n,2),Vo(n,3);var r=Mt(n,11)+1<<1,a=Mt(n,2);if(a==3){a=Mt(n,2),a=[24e3,22060,16e3][a];var u=3}else a=[48e3,44100,32e3][a],u=Mt(n,2);var c=Mt(n,3),d=Mt(n,1);return n=Mt(n,5),t+r>e.byteLength?null:(e=Math.floor(r*a/(16*[1,2,3,6][u])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,a<<6|n<<1|0,0|c<<1|d<<0,0]),{sampleRate:a,channelCount:[2,1,2,3,3,4,4,5][c]+d,ma:e,ca:r})}function Si(e){this.i=e,this.h=0,this.g=new Map}w=Si.prototype,w.destroy=function(){this.g.clear()},w.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?bt(this.convertCodecs("audio",e)):!1},w.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},w.getOriginalMimeType=function(){return this.i},w.transmux=function(e,t,n,r){e=st(e);for(var a=ea(e),u=a.length;u<e.length&&(e[u]<<8|e[u+1]<<0)!==2935;u++);var c=1e3*n.endTime;a=cs(a),a.length&&n&&(a=a.find(function(T){return T.description==="com.apple.streaming.transportStreamTimestamp"}))&&(c=a.data),a=0;for(var d=new Uint8Array([]),p=[];u<e.length;){var S=AS(e,u);if(!S)return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=S.sampleRate,t.channelsCount=S.channelCount,a=S.sampleRate,d=S.ma,p.push({data:e.subarray(u,u+S.ca),size:S.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),u+=S.ca}return e=Math.floor(c*a/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:r,$a:[],ma:d,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:p},stream:t},r=new _a([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Ra(r),this.g.set(n,t)),n=cu(r),this.h++,t=Pn(t,n),Promise.resolve(t)},ve("shaka.transmuxer.Ec3Transmuxer",Si),Si.prototype.transmux=Si.prototype.transmux,Si.prototype.getOriginalMimeType=Si.prototype.getOriginalMimeType,Si.prototype.convertCodecs=Si.prototype.convertCodecs,Si.prototype.isSupported=Si.prototype.isSupported,Si.prototype.destroy=Si.prototype.destroy,Le("audio/ec3",function(){return new Si("audio/ec3")},ti);function IM(e){if(!e.length)return null;var t=e.find(function(D){return D.type==7});if(e=e.find(function(D){return D.type==8}),!t||!e)return null;var n=new pr(t.data),r=Vt(n);if(Vt(n),Vt(n),Do(n),_M.includes(r)&&(r=Xe(n),r===3&&Vo(n,1),Do(n),Do(n),Vo(n,1),rt(n))){r=r!==3?8:12;for(var a=0;a<r;a++)rt(n)&&(6>a?Lf(n,16):Lf(n,64))}if(Do(n),r=Xe(n),r===0)Xe(n);else if(r===1)for(Vo(n,1),Do(n),Do(n),r=Xe(n),a=0;a<r;a++)Do(n);Do(n),Vo(n,1);var u=Xe(n),c=Xe(n),d=Mt(n,1);d===0&&Vo(n,1),Vo(n,1);var p=0,S=0,T=0,k=0;if(rt(n)&&(p=Xe(n),S=Xe(n),T=Xe(n),k=Xe(n)),a=r=1,rt(n)&&rt(n)){var A=Vt(n),E=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],R=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<A&&16>=A?(r=E[A-1],a=R[A-1]):A===255&&(r=Mt(n,16),a=Mt(n,16))}return n=(2-d)*(c+1)*16-2*T-2*k,u=16*(u+1)-2*p-2*S,p=[],t=t.fullData,p.push(t.byteLength>>>8&255),p.push(t.byteLength&255),p=p.concat.apply(p,_(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,_(e)),e=new Uint8Array([1,p[3],p[4],p[5],255,225].concat(p,[1],t)),{height:n,width:u,wa:e,Ba:r,Ca:a}}function MM(e){var t=!1,n=[],r=e.find(function(p){return p.type==7}),a=!1;e=b(e);for(var u=e.next();!u.done;u=e.next()){u=u.value;var c=!1;switch(u.type){case 1:c=a=!0;var d=u.data;r&&4<d.length&&(d=xk(new pr(d)),d===2||d===4||d===7||d===9)&&(t=!0);break;case 5:t=c=a=!0;break;case 6:c=!0;break;case 7:c=!0;break;case 8:c=!0;break;case 9:a=c=!0;break;case 12:c=!0;break;default:c=!1}a&&c&&(c=u.fullData.byteLength,d=new Uint8Array(4),d[0]=c>>24&255,d[1]=c>>16&255,d[2]=c>>8&255,d[3]=c&255,n.push(d),n.push(u.fullData))}return n.length?{data:Pn.apply(Co,_(n)),kd:t}:null}var _M=[100,110,122,244,44,83,86,118,128,138,139,134];function RM(e){if(!e.length)return null;var t=e.find(function(c){return c.type==32}),n=e.find(function(c){return c.type==33}),r=e.find(function(c){return c.type==34});if(!t||!n||!r)return null;var a=LM(t.fullData);e=DM(n.fullData);var u=PM(r.fullData);return t=OM(t.fullData,n.fullData,r.fullData,{yf:a.yf,Wf:a.Wf,df:e.df,ef:e.ef,Ye:e.Ye,cf:e.cf,Ze:e.Ze,$e:e.$e,af:e.af,bf:e.bf,Se:e.Se,Te:e.Te,Ue:e.Ue,Ve:e.Ve,We:e.We,Xe:e.Xe,Le:e.Le,$d:e.$d,Je:e.Je,He:e.He,Ge:e.Ge,Bf:u.Bf}),{height:e.height,width:e.width,wa:t,Ba:e.Ri,Ca:e.Qi}}function LM(e){var t=new pr(e,!0);return Vt(t),Vt(t),Mt(t,4),Mt(t,2),Mt(t,6),e=Mt(t,3),t=rt(t),{yf:e+1,Wf:t}}function DM(e){e=new pr(e,!0),Vt(e),Vt(e);var t=0,n=0,r=0,a=0;Mt(e,4);var u=Mt(e,3);rt(e);for(var c=Mt(e,2),d=Mt(e,1),p=Mt(e,5),S=Vt(e),T=Vt(e),k=Vt(e),A=Vt(e),E=Vt(e),R=Vt(e),D=Vt(e),L=Vt(e),$=Vt(e),N=Vt(e),K=Vt(e),O=[],H=[],J=0;J<u;J++)O.push(rt(e)),H.push(rt(e));if(0<u)for(J=u;8>J;J++)Mt(e,2);for(J=0;J<u;J++)O[J]&&Mt(e,88),H[J]&&Vt(e);Xe(e),O=Xe(e),O==3&&Mt(e,1),H=Xe(e),J=Xe(e),rt(e)&&(t+=Xe(e),n+=Xe(e),r+=Xe(e),a+=Xe(e));var oe=Xe(e),se=Xe(e),ye=Xe(e);if(rt(e))for(var le=0;le<=u;le++)Xe(e),Xe(e),Xe(e);else Xe(e),Xe(e),Xe(e);if(Xe(e),Xe(e),Xe(e),Xe(e),Xe(e),Xe(e),rt(e)&&rt(e))for(le=0;4>le;le++)for(var ue=0;ue<(le===3?2:6);ue++)if(rt(e)){var ce=Math.min(64,1<<4+(le<<1));1<le&&ta(e);for(var Ee=0;Ee<ce;Ee++)ta(e)}else Xe(e);for(rt(e),rt(e),rt(e)&&(Vt(e),Xe(e),Xe(e),rt(e)),le=Xe(e),ce=ue=0;ce<le;ce++)if(Ee=!1,ce!==0&&(Ee=rt(e)),Ee){ce===le&&Xe(e),rt(e),Xe(e);for(var Te=Ee=0;Te<=ue;Te++){var Ae=rt(e),Oe=!1;Ae||(Oe=rt(e)),(Ae||Oe)&&Ee++}ue=Ee}else{for(Te=Xe(e),Ee=Xe(e),ue=Te+Ee,Ae=0;Ae<Te;Ae++)Xe(e),rt(e);for(Te=0;Te<Ee;Te++)Xe(e),rt(e)}if(rt(e))for(le=Xe(e),ue=0;ue<le;ue++){for(ce=0;ce<ye+4;ce++)Mt(e,1);Mt(e,1)}if(le=ye=1,ue=0,rt(e),rt(e),rt(e)){if(rt(e)&&(ce=Vt(e),Ee=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Te=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<ce&&16>=ce?(ye=Ee[ce-1],le=Te[ce-1]):ce===255&&(ye=Mt(e,16),le=Mt(e,16))),rt(e)&&rt(e),rt(e)&&(Mt(e,3),rt(e),rt(e)&&(Vt(e),Vt(e),Vt(e))),rt(e)&&(Xe(e),Xe(e)),rt(e),rt(e),rt(e),(ce=rt(e))&&(Xe(e),Xe(e),Xe(e),Xe(e)),rt(e)&&(Mt(e,32),Mt(e,32),rt(e)&&Xe(e),rt(e)))for(Te=!1,ce=rt(e),Ee=rt(e),(ce||Ee)&&((Te=rt(e))&&(Vt(e),Mt(e,5),rt(e),Mt(e,5)),Mt(e,4),Mt(e,4),Te&&Mt(e,4),Mt(e,5),Mt(e,5),Mt(e,5)),Ae=0;Ae<=u;Ae++){var _e=!0;Oe=1,rt(e)||(_e=rt(e));var ze=!1;if(_e?Xe(e):ze=rt(e),ze||(Oe=Xe(e)+1),ce){for(_e=0;_e<Oe;_e++)Xe(e),Xe(e),Te&&(Xe(e),Xe(e));rt(e)}if(Ee){for(_e=0;_e<Oe;_e++)Xe(e),Xe(e),Te&&(Xe(e),Xe(e));rt(e)}}rt(e)&&(rt(e),rt(e),rt(e),ue=Xe(e),Xe(e),Xe(e),Xe(e),Xe(e))}return{Ye:K,df:c,ef:d,cf:p,Ze:S,$e:T,af:k,bf:A,Se:E,Te:R,Ue:D,Ve:L,We:$,Xe:N,$d:ue,Le:0,Je:O,He:oe,Ge:se,width:H-(t+n)*(O===1||O===2?2:1),height:J-(r+a)*(O===1?2:1),Ri:ye,Qi:le}}function PM(e){var t=new pr(e,!0);Vt(t),Vt(t),Xe(t),Xe(t),rt(t),rt(t),Mt(t,3),rt(t),rt(t),Xe(t),Xe(t),ta(t),rt(t),rt(t),rt(t)&&Xe(t),ta(t),ta(t),rt(t),rt(t),rt(t),rt(t),e=rt(t),t=rt(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Bf:n}}function OM(e,t,n,r){var a=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return a[0]=1,a[1]=(r.df&3)<<6|(r.ef?1:0)<<5|r.cf&31,a[2]=r.Ze,a[3]=r.$e,a[4]=r.af,a[5]=r.bf,a[6]=r.Se,a[7]=r.Te,a[8]=r.Ue,a[9]=r.Ve,a[10]=r.We,a[11]=r.Xe,a[12]=r.Ye,a[13]=240|(r.$d&3840)>>8,a[14]=r.$d&255,a[15]=252|r.Bf&3,a[16]=252|r.Je&3,a[17]=248|r.He&7,a[18]=248|r.Ge&7,a[19]=0,a[20]=0,a[21]=(r.Le&3)<<6|(r.yf&7)<<3|(r.Wf?1:0)<<2|3,a[22]=3,a[23]=160,a[24]=0,a[25]=1,a[26]=(e.byteLength&65280)>>8,a[27]=(e.byteLength&255)>>0,a.set(e,28),a[23+(5+e.byteLength)]=161,a[e.byteLength+29]=0,a[e.byteLength+30]=1,a[e.byteLength+31]=(t.byteLength&65280)>>8,a[e.byteLength+32]=(t.byteLength&255)>>0,a.set(t,e.byteLength+33),a[23+(e.byteLength+10+t.byteLength)]=162,a[e.byteLength+10+t.byteLength+24]=0,a[e.byteLength+10+t.byteLength+25]=1,a[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,a[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,a.set(n,e.byteLength+10+t.byteLength+28),a}function fh(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,a=e[t+2]>>4&15,u=e[t+2]>>2&3;if(n!==1&&a!==0&&a!==15&&u!==3){var c=e[t+3]>>6;a=1e3*NM[14*(n===3?3-r:r===3?3:4)+a-1],u=UM[3*(n===3?0:n===2?1:2)+u],n=BM[n][r];var d=jM[r],p=Math.floor(n*a/u+(e[t+2]>>1&1))*d,S=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(S=S?parseInt(S[1],10):0)&&87>=S&&r===2&&224e3<=a&&c===0&&(e[t+3]|=128),{sampleRate:u,channelCount:c===3?1:2,ca:p,Pi:8*n*d}}return null}function IS(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function MS(e,t){if(t+1<e.length&&IS(e,t)){var n=fh(e,t),r=4;return n&&n.ca&&(r=n.ca),t+=r,t===e.length||t+1<e.length&&IS(e,t)}return!1}var NM=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],UM=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],BM=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],jM=[0,1,1,4];function Ci(e){this.i=e,this.h=0,this.g=new Map}w=Ci.prototype,w.destroy=function(){this.g.clear()},w.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?bt(this.convertCodecs("audio",e)):!1},w.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},w.getOriginalMimeType=function(){return this.i},w.transmux=function(e,t,n,r){for(var a=st(e),u=ea(a).length;u<a.length&&!MS(a,u);u++);var c;for(e=[];u<a.length;){var d=fh(a,u);if(!d)return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));c||(c=d),u+d.ca<=a.length&&e.push({data:a.subarray(u,u+d.ca),size:d.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),u+=d.ca}return c?(a=9e4*c.Pi/c.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:a,Ya:e},stream:t},r=new _a([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Ra(r),this.g.set(n,t)),n=cu(r),this.h++,t=Pn(t,n),Promise.resolve(t)):Promise.reject(new re(2,3,3018,n?n.M()[0]:null))},ve("shaka.transmuxer.Mp3Transmuxer",Ci),Ci.prototype.transmux=Ci.prototype.transmux,Ci.prototype.getOriginalMimeType=Ci.prototype.getOriginalMimeType,Ci.prototype.convertCodecs=Ci.prototype.convertCodecs,Ci.prototype.isSupported=Ci.prototype.isSupported,Ci.prototype.destroy=Ci.prototype.destroy,Le("audio/mpeg",function(){return new Ci("audio/mpeg")},ti);function Ti(e){this.h=e,this.g=null}w=Ti.prototype,w.destroy=function(){},w.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=oi(e).split(","),n=jo("audio",t);return t=jo("video",t),!n||t||Lo(n)!="mp3"?!1:bt(this.convertCodecs("audio",e))},w.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},w.getOriginalMimeType=function(){return this.h},w.transmux=function(e,t,n,r,a){if(this.g?this.g.clearData():this.g=new an,e=st(e),e=this.g.parse(e),e.$c().audio!="mp3"||a!="audio")return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));for(n=new Uint8Array([]),a=b(e.Tb()),e=a.next();!e.done;e=a.next())if(e=e.value.data)for(t=0;t<e.length;)(r=fh(e,t))?(t+r.ca<=e.length&&(n=Pn(n,e.subarray(t,t+r.ca))),t+=r.ca):t++;return Promise.resolve(n)},ve("shaka.transmuxer.MpegTsTransmuxer",Ti),Ti.prototype.transmux=Ti.prototype.transmux,Ti.prototype.getOriginalMimeType=Ti.prototype.getOriginalMimeType,Ti.prototype.convertCodecs=Ti.prototype.convertCodecs,Ti.prototype.isSupported=Ti.prototype.isSupported,Ti.prototype.destroy=Ti.prototype.destroy,Le("video/mp2t",function(){return new Ti("video/mp2t")},Bo);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function fi(e){this.h=e,(this.g=Sm.get("ISOBoxer")())&&FM(this)}function FM(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==$M[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}w=fi.prototype,w.destroy=function(){},w.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?bt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),bt(t)||bt(e))},w.convertCodecs=function(e,t){return t.replace("mss/","")},w.getOriginalMimeType=function(){return this.h},w.transmux=function(e,t,n){if(!n)return Promise.resolve(st(e));if(!t.mssPrivateData)return Promise.reject(new re(2,3,3020,n?n.M()[0]:null));try{var r,a=this.g.parseBuffer(e),u=a.fetch("tfhd");u.track_ID=t.id+1;var c=a.fetch("tfdt"),d=a.fetch("traf");c===null&&(c=this.g.createFullBox("tfdt",d,u),c.version=1,c.flags=0,c.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var p=a.fetch("trun"),S=a.fetch("tfxd");S&&S._parent.boxes.splice(S._parent.boxes.indexOf(S),1);var T=a.fetch("tfrf");T&&T._parent.boxes.splice(T._parent.boxes.indexOf(T),1);var k=a.fetch("sepiff");if(k!==null){k.type="senc",k.usertype=void 0;var A=a.fetch("saio");if(A===null){A=this.g.createFullBox("saio",d),A.version=0,A.flags=0,A.entry_count=1,A.offset=[0];var E=this.g.createFullBox("saiz",d);if(E.version=0,E.flags=0,E.sample_count=k.sample_count,E.default_sample_info_size=0,E.sample_info_size=[],k.flags&2)for(r=0;r<k.sample_count;r+=1)E.sample_info_size[r]=10+6*k.entry[r].NumberOfEntries;else E.default_sample_info_size=8}}u.flags&=16777214,u.flags|=131072,p.flags|=1;var R=a.fetch("moof");p.data_offset=R.getLength()+8;var D=a.fetch("saio");D!==null&&(D.offset[0]=_S(R,"traf")+_S(d,"senc")+16);var L=st(a.write());return Promise.resolve(L)}catch($){return $ instanceof re?Promise.reject($):Promise.reject(new re(2,3,3022,n?n.M()[0]:null))}};function _S(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}ve("shaka.transmuxer.MssTransmuxer",fi),fi.prototype.transmux=fi.prototype.transmux,fi.prototype.getOriginalMimeType=fi.prototype.getOriginalMimeType,fi.prototype.convertCodecs=fi.prototype.convertCodecs,fi.prototype.isSupported=fi.prototype.isSupported,fi.prototype.destroy=fi.prototype.destroy;var $M=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Le("mss/audio/mp4",function(){return new fi("mss/audio/mp4")},ti),Le("mss/video/mp4",function(){return new fi("mss/video/mp4")},ti);function bi(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}w=bi.prototype,w.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},w.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=oi(n).split(",");return n=jo("audio",r),r=jo("video",r),n&&(n=Lo(n),!zM.includes(n))||r&&(n=Lo(r),!VM.includes(n))?!1:t?bt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),bt(t)||bt(e))},w.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=oi(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return Hs(n,"audio/mp4")}).map(Cl).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},w.getOriginalMimeType=function(){return this.l},w.transmux=function(e,t,n,r,a){var u=st(e);if(a=="audio"&&!Ll(u)){for(var c=ea(u),d=c.length;d<u.length;d++)if(MS(u,d))return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));for(d=c.length;d<u.length;d++)if(kS(u,d))return this.h||(this.h=new ui("audio/aac")),this.h.transmux(e,t,n,r,a);return Promise.reject(new re(2,3,3018,n?n.M()[0]:null))}this.j?this.j.clearData():this.j=new an;var p=this.j.parse(u),S=[],T=p.$c();try{var k=null;if(a=="video"){switch(T.video){case"avc":var A=[],E=null,R=[],D=p.Fc();if(!D.length)throw new re(2,3,3023,n?n.M()[0]:null);for(var L=0;L<D.length;L++){var $=D[L],N=$.nalus;R.push.apply(R,_(N));var K=MM(N);if(K){E==null&&(E=$.dts);var O=void 0;O=L+1<D.length?(D[L+1].dts||0)-($.dts||0):1<D.length?($.dts||0)-(D[L-1].dts||0):9e4*(n.endTime-n.startTime),A.push({data:K.data,size:K.data.byteLength,duration:O,cb:Math.round(($.pts||0)-($.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:K.kd?2:1,hb:K.kd?0:1}})}}var H=IM(R);if(!H||E==null)throw new re(2,3,3018,n?n.M()[0]:null);t.height=H.height,t.width=H.width,k={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,$a:[],ma:new Uint8Array([]),wa:H.wa,Ba:H.Ba,Ca:H.Ca,data:{rb:this.g,baseMediaDecodeTime:E,Ya:A},stream:t};break;case"hvc":var J=[],oe=null,se=[],ye=p.Fc();if(!ye.length)throw new re(2,3,3023,n?n.M()[0]:null);for(var le=0;le<ye.length;le++){var ue=ye[le],ce=ue.nalus;se.push.apply(se,_(ce));for(var Ee=!1,Te=[],Ae=!1,Oe=b(ce),_e=Oe.next();!_e.done;_e=Oe.next()){var ze=_e.value;switch(ze.type){case 1:case 0:var yt=Ae=!0;break;case 19:case 20:case 21:Ee=yt=Ae=!0;break;case 32:yt=!0;break;case 33:yt=!0;break;case 34:yt=!0;break;case 35:Ae=yt=!0;break;case 39:case 40:yt=!0;break;default:yt=!1}if(Ae&&yt){var Lt=ze.fullData.byteLength,Cn=new Uint8Array(4);Cn[0]=Lt>>24&255,Cn[1]=Lt>>16&255,Cn[2]=Lt>>8&255,Cn[3]=Lt&255,Te.push(Cn),Te.push(ze.fullData)}}var zt=Te.length?{data:Pn.apply(Co,_(Te)),kd:Ee}:null;if(zt){oe==null&&ue.dts!=null&&(oe=ue.dts);var _n=void 0;_n=le+1<ye.length?(ye[le+1].dts||0)-(ue.dts||0):1<ye.length?(ue.dts||0)-(ye[le-1].dts||0):9e4*(n.endTime-n.startTime),J.push({data:zt.data,size:zt.data.byteLength,duration:_n,cb:Math.round((ue.pts||0)-(ue.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:zt.kd?2:1,hb:zt.kd?0:1}})}}var Hn=RM(se);if(!Hn||oe==null)throw new re(2,3,3018,n?n.M()[0]:null);t.height=Hn.height,t.width=Hn.width,k={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,$a:[],ma:new Uint8Array([]),wa:Hn.wa,Ba:Hn.Ba,Ca:Hn.Ca,data:{rb:this.g,baseMediaDecodeTime:oe,Ya:J},stream:t}}k&&(S.push(k),k=null)}if(a=="audio"){switch(T.audio){case"aac":for(var Tn=[],Xt,Nn=null,Qn=b(p.Tb()),Zn=Qn.next();!Zn.done;Zn=Qn.next()){var Yo=Zn.value,Qo=Yo.data;if(Qo){var Li=0;if(Xt=bS(Qo,Li),!Xt)throw new re(2,3,3018,n?n.M()[0]:null);for(t.audioSamplingRate=Xt.sampleRate,t.channelsCount=Xt.channelCount,Nn==null&&Yo.pts!==null&&(Nn=Yo.pts);Li<Qo.length;){var kr=TS(Qo,Li);if(kr){var Hr=kr.Qd+kr.ca;Li+Hr<=Qo.length&&Tn.push({data:Qo.subarray(Li+kr.Qd,Li+Hr),size:kr.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Li+=Hr}else Li++}}}if(!Xt||Nn==null){if(!p.Fc().length)throw new re(2,3,3018,n?n.M()[0]:null);Nn=9e4*n.startTime;var Oa=jo("audio",t.codecs.split(","));if(!Oa||!t.channelsCount||!t.audioSamplingRate)throw new re(2,3,3018,n?n.M()[0]:null);Xt={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:Oa};var Er=EM(Oa,t.channelsCount);if(!Er)throw new re(2,3,3018,n?n.M()[0]:null);for(var hh=Nn+9e4*(n.endTime-n.startTime),Tu=Nn;Tu<hh;)Tn.push({data:Er,size:Er.byteLength,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Tu+=1024/Xt.sampleRate*9e4}var bu=Xt.sampleRate,Gi=Nn/9e4*bu;k={id:t.id,type:"audio",codecs:Xt.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:bu,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:Gi,Ya:Tn},stream:t};break;case"ac3":for(var zS=[],dh=0,v0=new Uint8Array([]),ph=null,VS=b(p.Tb()),x0=VS.next();!x0.done;x0=VS.next()){var w0=x0.value,S0=w0.data;ph==null&&w0.pts!==null&&(ph=w0.pts);for(var Na=0;Na<S0.length;){var Gr=ES(S0,Na);Gr?(t.audioSamplingRate=Gr.sampleRate,t.channelsCount=Gr.channelCount,dh=Gr.sampleRate,v0=Gr.ma,zS.push({data:S0.subarray(Na,Na+Gr.ca),size:Gr.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Na+=Gr.ca):Na++}}if(dh==0||v0.byteLength==0||ph==null)throw new re(2,3,3018,n?n.M()[0]:null);var qM=ph/9e4*dh;k={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:dh,duration:r,$a:[],ma:v0,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:qM,Ya:zS},stream:t};break;case"ec3":for(var HS=[],mh=0,C0=new Uint8Array([]),gh=null,GS=b(p.Tb()),T0=GS.next();!T0.done;T0=GS.next()){var b0=T0.value,k0=b0.data;gh==null&&b0.pts!==null&&(gh=b0.pts);for(var Ua=0;Ua<k0.length;){var Wr=AS(k0,Ua);Wr?(t.audioSamplingRate=Wr.sampleRate,t.channelsCount=Wr.channelCount,mh=Wr.sampleRate,C0=Wr.ma,HS.push({data:k0.subarray(Ua,Ua+Wr.ca),size:Wr.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Ua+=Wr.ca):Ua++}}if(mh==0||C0.byteLength==0||gh==null)throw new re(2,3,3018,n?n.M()[0]:null);var KM=gh/9e4*mh;k={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:mh,duration:r,$a:[],ma:C0,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:KM,Ya:HS},stream:t};break;case"mp3":for(var WS=[],yh,vh=null,XS=b(p.Tb()),E0=XS.next();!E0.done;E0=XS.next()){var A0=E0.value,ku=A0.data;if(ku){vh==null&&A0.pts!==null&&(vh=A0.pts);for(var Cs=0;Cs<ku.length;){var Ba=fh(ku,Cs);Ba?(yh||(yh=Ba),Cs+Ba.ca<=ku.length&&WS.push({data:ku.subarray(Cs,Cs+Ba.ca),size:Ba.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Cs+=Ba.ca):Cs++}}}if(!yh||vh==null)throw new re(2,3,3018,n?n.M()[0]:null);var qS=yh.sampleRate,YM=vh/9e4*qS;k={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:qS,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:YM,Ya:WS},stream:t};break;case"opus":var KS=[],xh=null,or=p.F;if(!or)throw new re(2,3,3018,n?n.M()[0]:null);var Io=[];switch(or.Ch){case 1:case 2:Io=[0];break;case 0:Io=[255,1,1,0,1];break;case 128:Io=[255,2,0,0,1];break;case 3:Io=[1,2,1,0,2,1];break;case 4:Io=[1,2,2,0,1,2,3];break;case 5:Io=[1,3,2,0,4,1,2,3];break;case 6:Io=[1,4,2,0,4,1,2,3,5];break;case 7:Io=[1,4,2,0,4,1,2,3,5,6];break;case 8:Io=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Io=[1,1,2,0,1];break;case 131:Io=[1,1,3,0,1,2];break;case 132:Io=[1,1,4,0,1,2,3];break;case 133:Io=[1,1,5,0,1,2,3,4];break;case 134:Io=[1,1,6,0,1,2,3,4,5];break;case 135:Io=[1,1,7,0,1,2,3,4,5,6];break;case 136:Io=[1,1,8,0,1,2,3,4,5,6,7]}for(var YS=new Uint8Array([0,or.channelCount,0,0,or.sampleRate>>>24&255,or.sampleRate>>>17&255,or.sampleRate>>>8&255,or.sampleRate>>>0&255,0,0].concat(_(Io))),QS=or.sampleRate,ZS=b(p.Tb()),I0=ZS.next();!I0.done;I0=ZS.next()){var M0=I0.value,ja=M0.data;xh==null&&M0.pts!==null&&(xh=M0.pts);for(var Eu=0;Eu<ja.length;){for(var QM=(ja[Eu+1]&16)!==0,ZM=(ja[Eu+1]&8)!==0,Ar=Eu+2,wh=0;ja[Ar]===255;)wh+=255,Ar+=1;wh+=ja[Ar],Ar+=1,Ar+=QM?2:0,Ar+=ZM?2:0;var JS=ja.slice(Ar,Ar+wh);KS.push({data:JS,size:JS.byteLength,duration:960,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Eu=Ar+wh}}if(YS.byteLength==0||xh==null)throw new re(2,3,3018,n?n.M()[0]:null);t.audioSamplingRate=or.sampleRate,t.channelsCount=or.channelCount;var JM=xh/9e4*QS;k={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:QS,duration:r,$a:[],ma:YS,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:JM,Ya:KS},stream:t}}k&&(S.push(k),k=null)}}catch(L0){return L0&&L0.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(L0)}if(!S.length)return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));var eC=new _a(S),_0=t.id+"_"+n.i;if(this.i.has(_0))var R0=this.i.get(_0);else R0=Ra(eC),this.i.set(_0,R0);var e_=cu(eC);this.g++;var t_=Pn(R0,e_);return Promise.resolve(t_)},ve("shaka.transmuxer.TsTransmuxer",bi),bi.prototype.transmux=bi.prototype.transmux,bi.prototype.getOriginalMimeType=bi.prototype.getOriginalMimeType,bi.prototype.convertCodecs=bi.prototype.convertCodecs,bi.prototype.isSupported=bi.prototype.isSupported,bi.prototype.destroy=bi.prototype.destroy;var zM=["aac","ac-3","ec-3","mp3","opus"],VM=["avc","hevc"];Le("video/mp2t",function(){return new bi("video/mp2t")},Oi);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function RS(){}var Su;function LS(){Su||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Su=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=HM,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function HM(e,t){var n=this,r;return V(function(a){return a.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),I(a,Su.call(n,e,t),2)):(r=a.h,FS(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Su,a.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=DS,a.return(DS.call(n,e,t))))})}function DS(e,t){var n=this,r,a,u,c,d,p,S,T,k,A,E,R;return V(function(D){if(D.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=jS(e),a=[],u=b(t),c=u.next();!c.done;c=u.next())d=c.value,p=PS(d.videoCapabilities,r),S=PS(d.audioCapabilities,r),d.videoCapabilities&&d.videoCapabilities.length&&!p.length||d.audioCapabilities&&d.audioCapabilities.length&&!S.length||(T=Object.assign({},d),T.videoCapabilities=p,T.audioCapabilities=S,a.push(T));if(!a.length)throw k=Error("Unsupported keySystem or supportedConfigurations."),k.name="NotSupportedError",k.code=DOMException.NOT_SUPPORTED_ERR,k;return I(D,Su.call(n,e,a),2)}return A=D.h,R=E=null,a[0]&&(a[0].videoCapabilities&&(E=a[0].videoCapabilities[0].encryptionScheme),a[0].audioCapabilities&&(R=a[0].audioCapabilities[0].encryptionScheme)),D.return(new ch(A,E,R))})}function PS(e,t){return e&&e.filter(function(n){return g0(n.encryptionScheme,t)})}ve("EmeEncryptionSchemePolyfill",RS),RS.install=LS;function OS(){}var Cu;function NS(){Cu||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Cu=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=GM,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function GM(e){var t=this,n,r;return V(function(a){switch(a.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),I(a,Cu.call(t,e),2);case 2:if(n=a.h,!e.keySystemConfiguration)return a.return(n);if((r=n.keySystemAccess)&&FS(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Cu,a.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=US,r){a.u(3);break}return I(a,BS(e),4);case 4:return n.keySystemAccess=a.h,a.return(n);case 3:return a.return(US.call(t,e))}})}function US(e){var t=this,n,r,a,u,c,d,p;return V(function(S){switch(S.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=n=null,!e.keySystemConfiguration||(a=e.keySystemConfiguration,u=a.keySystem,r=a.audio&&a.audio.encryptionScheme,n=a.video&&a.video.encryptionScheme,c=jS(u),d={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},g0(r,c)&&g0(n,c))?I(S,Cu.call(t,e),2):S.return(d);case 2:if(p=S.h,p.keySystemAccess){p.keySystemAccess=new ch(p.keySystemAccess,n,r),S.u(3);break}if(!e.keySystemConfiguration){S.u(3);break}return I(S,BS(e),5);case 5:p.keySystemAccess=S.h;case 3:return S.return(p)}})}function BS(e){var t,n;return V(function(r){if(r.g==1){var a=e.keySystemConfiguration,u=[],c=[];return a.audio&&u.push({robustness:a.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:a.audio.encryptionScheme}),a.video&&c.push({robustness:a.video.robustness||"",contentType:e.video.contentType,encryptionScheme:a.video.encryptionScheme}),a={initDataTypes:a.initDataType?[a.initDataType]:[],distinctiveIdentifier:a.distinctiveIdentifier,persistentState:a.persistentState,sessionTypes:a.sessionTypes},u.length&&(a.audioCapabilities=u),c.length&&(a.videoCapabilities=c),t=a,I(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}ve("McEncryptionSchemePolyfill",OS),OS.install=NS;function ch(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}ch.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=b(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=b(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},ch.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function jS(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function FS(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function g0(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(XM||WM))}function y0(){}function $S(){LS(),NS()}ve("EncryptionSchemePolyfills",y0),y0.install=$S;var WM=navigator.userAgent.includes("CrKey"),XM=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);typeof x<"u"&&x.exports&&(x.exports=y0)}).call(o,i,i,void 0);for(var l in o.shaka)f[l]=o.shaka[l]})()}(W0)),W0}var PL=DL();const PC=LL(PL);let Rs,wo;const _g={playingState:!1},OL=async f=>{PC.polyfill.installAll(),wo=f,wo||(wo=document.createElement("video"),wo.style.cssText="position: absolute; top: 0; left: 0; z-index: -1",wo.width=window.innerWidth,wo.height=window.innerHeight,Rs=new PC.Player,await Rs.attach(wo),wo.autoplay=!1,Rs.addEventListener("error",i=>{console.error(i)}),document.body.insertBefore(wo,document.body.firstChild))},NL=async f=>{if(!Rs||!wo)throw"Player not initialized yet";await Rs.load(f.streamUrl)},UL=()=>{wo.play().then(()=>{_g.playingState=!0})},BL=()=>{wo.pause(),_g.playingState=!1},jL=async()=>{await Rs.destroy(),Rs=null,wo.remove(),wo=null},FL=()=>wo.currentTime,$L=()=>wo.duration,zL=()=>{let f=i=>new Date(i*1e3).toISOString().substr(14,5);return`${f(wo.currentTime)} : ${f(Math.floor(wo.duration))}`},Xr={init:OL,load:NL,play:UL,pause:BL,getCurrentTime:FL,getVideoDuration:$L,getTimeFormat:zL,state:_g,destroy:jL},VL=tt.Component("Player",{code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(b),v===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},v===!0?y:o),_.y=1080,_.mount="{y:1}",_.w=1920,_.h=150,_.color={top:"0x00000000",bottom:"0x444444ff"},_.alpha={transition:o.controlsVisibility},s[1].populate(_),v===!0&&(M-=1),i=s[1];const U={};s[2]=this.element({parent:i||"root"},v===!0?y:o),U.x=60,U.y=50,s[2].populate(U),v===!0&&(M-=1),i=s[2];const F={};s[3]=this.element({parent:i||"root"},v===!0?y:o),F.w=60,F.h=60,F.color="0x0087ceeb",F.effects=[{type:"radius",props:{radius:16}}],s[3].populate(F),v===!0&&(M-=1),i=s[3];const z={};s[4]=this.element({parent:i||"root"},v===!0?y:o),z.y=14,z.x=14,z.w=32,z.h=32,z.src=o.playing?"assets/player/pause.png":"assets/player/play.png",s[4].populate(z),v===!0&&(M-=1),i=s[2];const B={};s[5]=this.element({parent:i||"root"},v===!0?y:o),B.y=22,B.x=100,B.w=o.progressLength,B.h=16,B.color="0xffffff80",B.effects=[{type:"radius",props:{radius:8}}],s[5].populate(B),v===!0&&(M-=1),i=s[5];const G={};s[6]=this.element({parent:i||"root"},v===!0?y:o),G.h=16,G.w={transition:{value:o.progress,d:100,f:"ease-in-out"}},G.effects=[{type:"radius",props:{radius:8}}],G.color="0x0087ceeb",s[6].populate(G),v===!0&&(M-=1);const X=l.components&&l.components.Circle||h.Circle;i=s[5];const Q={};s[7]=this.element({parent:i||"root"},v===!0?y:o),Q.size=28,Q.color="0xffffffff",Q.y="-6",Q.x={transition:{value:o.progress-8,d:100,f:"ease-in-out"}};const W=[];if(typeof X<"u")for(let ne in X[Symbol.for("config")].props)delete Q[X[Symbol.for("config")].props[ne]],W.push(X[Symbol.for("config")].props[ne]);s[7].populate(Q),v===!0&&(M-=1),i=s[7];const te={};te.size=28,te.color="0xffffffff",te.y="-6",C={transition:{value:o.progress-8,d:100,f:"ease-in-out"}},Array.isArray(C)===!0&&(C=x(C).slice(0)),te.x=C,m=te.is||"Circle";let de;if(typeof m=="string"){if(de=l.components&&l.components[m]||h[m],!de)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(de=m);s[8]=de.call(null,{props:te},s[7],o),s[8][Symbol.for("slots")][0]?(i=s[8][Symbol.for("slots")][0],y=s[8],v=!0):i=s[8][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[2];const I={};s[9]=this.element({parent:i||"root"},v===!0?y:o),I.x=1660,I.y=16,s[9].populate(I),v===!0&&(M-=1),i=s[9];const q={};s[10]=this.element({parent:i||"root"},v===!0?y:o),q.content=o.currentTime,q.size=25,q.__textnode=!0,s[10].populate(q),v===!0&&(M-=1),i=s[9];const ee={};s[11]=this.element({parent:i||"root"},v===!0?y:o),ee.x=70,ee.size=25,ee.content="/",ee.__textnode=!0,s[11].populate(ee),v===!0&&(M-=1),i=s[9];const ae={};return s[12]=this.element({parent:i||"root"},v===!0?y:o),ae.x=85,ae.size=25,ae.content=o.duration,ae.__textnode=!0,s[12].populate(ae),v===!0&&(M-=1),s},effects:[function(i,o,l,h,g,x){o[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(i,o,l,h,g,x){o[1].set("alpha",{transition:i.controlsVisibility})},function(i,o,l,h,g,x){o[3].set("effects",[{type:"radius",props:{radius:16}}])},function(i,o,l,h,g,x){o[4].set("src",i.playing?"assets/player/pause.png":"assets/player/play.png")},function(i,o,l,h,g,x){o[5].set("effects",[{type:"radius",props:{radius:8}}])},function(i,o,l,h,g,x){o[6].set("w",{transition:{value:i.progress,d:100,f:"ease-in-out"}})},function(i,o,l,h,g,x){o[6].set("effects",[{type:"radius",props:{radius:8}}])},function(i,o,l,h,g,x){(typeof skip7>"u"||skip7.indexOf("x")===-1)&&o[7].set("x",{transition:{value:i.progress-8,d:100,f:"ease-in-out"}})},function(i,o,l,h,g,x){o[8][Symbol.for("props")].x={transition:{value:i.progress-8,d:100,f:"ease-in-out"}}},function(i,o,l,h,g,x){o[10].set("content",i.currentTime)},function(i,o,l,h,g,x){o[12].set("content",i.duration)}],context:{}},state(){return{controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}},hooks:{focus(){this.$emit("clearBackground")},unfocus(){this.$emit("changeBackground")},async init(){await Xr.init()},async ready(){await Xr.load({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});const f=o=>new Date(o*1e3).toISOString().substr(14,5),i=Xr.getVideoDuration();i&&(this.duration=f(i),this.progressChunkSize=Math.round(this.progressLength/i*100)/100),this.$setInterval(()=>{const o=Xr.getCurrentTime();this.currentTime=f(o),this.progress=Math.round(o*this.progressChunkSize)},1e3),this.play()},async destroy(){await Xr.destroy()}},input:{space(){this.play()},up(){this.showControls(1)},down(){this.showControls(0)}},methods:{play(){this.showControls(1),this.hideTimeout=this.$setTimeout(()=>this.showControls(0),3e3),Xr.state.playingState==!0?(Xr.pause(),this.playing=!1):(console.log("play!"),Xr.play(),this.playing=!0)},showControls(f){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=f}}}),HL=tt.Component("Colors",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=1920,m.h=1080,m.color={transition:o.bg},s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.x=20,C.y=20,s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.w=100,y.h=100,y.x=0,y.color="0xecfeffff",s[2].populate(y),i=s[1];const v={};s[3]=this.element({parent:i||"root"},o),v.w=100,v.h=100,v.x=120,v.color="0xa5f3fcff",s[3].populate(v),i=s[1];const M={};s[4]=this.element({parent:i||"root"},o),M.w=100,M.h=100,M.x=240,M.color="0x22d3eeff",s[4].populate(M),i=s[1];const b={};s[5]=this.element({parent:i||"root"},o),b.w=100,b.h=100,b.x=360,b.color="0x0891b2ff",s[5].populate(b),i=s[0];const _={};s[6]=this.element({parent:i||"root"},o),_.x=20,_.y=140,s[6].populate(_),i=s[6];const U={};s[7]=this.element({parent:i||"root"},o),U.w=100,U.h=100,U.x=0,U.color="0xecfeffff",s[7].populate(U),i=s[6];const F={};s[8]=this.element({parent:i||"root"},o),F.w=100,F.h=100,F.x=120,F.color="0xa5f3fcff",s[8].populate(F),i=s[6];const z={};s[9]=this.element({parent:i||"root"},o),z.w=100,z.h=100,z.x=240,z.color="0x22d3eeff",s[9].populate(z),i=s[6];const B={};s[10]=this.element({parent:i||"root"},o),B.w=100,B.h=100,B.x=360,B.color="0x0891b2ff",s[10].populate(B),i=s[0];const G={};s[11]=this.element({parent:i||"root"},o),G.x=20,G.y=260,s[11].populate(G),i=s[11];const X={};s[12]=this.element({parent:i||"root"},o),X.w=100,X.h=100,X.x=0,X.color="0xecfeffaa",s[12].populate(X),i=s[11];const Q={};s[13]=this.element({parent:i||"root"},o),Q.w=100,Q.h=100,Q.x=120,Q.color="0xa5f3fc33",s[13].populate(Q),i=s[11];const W={};s[14]=this.element({parent:i||"root"},o),W.w=100,W.h=100,W.x=240,W.color="0x22d3ee20",s[14].populate(W),i=s[11];const te={};s[15]=this.element({parent:i||"root"},o),te.w=100,te.h=100,te.x=360,te.color="0x0891b2ff",s[15].populate(te),i=s[0];const de={};s[16]=this.element({parent:i||"root"},o),de.x=20,de.y=380,s[16].populate(de),i=s[16];const I={};s[17]=this.element({parent:i||"root"},o),I.w=100,I.h=100,I.x=0,I.color="0xecfeffff",s[17].populate(I),i=s[16];const q={};s[18]=this.element({parent:i||"root"},o),q.w=100,q.h=100,q.x=120,q.color="0xa5f3fcff",s[18].populate(q),i=s[16];const ee={};s[19]=this.element({parent:i||"root"},o),ee.w=100,ee.h=100,ee.x=240,ee.color="0x22d3eeff",s[19].populate(ee),i=s[16];const ae={};s[20]=this.element({parent:i||"root"},o),ae.w=100,ae.h=100,ae.x=360,ae.color="0x0891b2ff",s[20].populate(ae),i=s[0];const ne={};s[21]=this.element({parent:i||"root"},o),ne.x=20,ne.y=500,s[21].populate(ne),i=s[21];const Y={};s[22]=this.element({parent:i||"root"},o),Y.w=100,Y.h=100,Y.x=0,Y.color="0xecfeffab",s[22].populate(Y),i=s[21];const Z={};s[23]=this.element({parent:i||"root"},o),Z.w=100,Z.h=100,Z.x=120,Z.color="0xa5f3fc33",s[23].populate(Z),i=s[21];const j={};s[24]=this.element({parent:i||"root"},o),j.w=100,j.h=100,j.x=240,j.color="0x22d3ee21",s[24].populate(j),i=s[21];const fe={};s[25]=this.element({parent:i||"root"},o),fe.w=100,fe.h=100,fe.x=360,fe.color="0x0891b2ff",s[25].populate(fe),i=s[0];const he={};s[26]=this.element({parent:i||"root"},o),he.x=20,he.y=620,s[26].populate(he),i=s[26];const we={};s[27]=this.element({parent:i||"root"},o),we.w=100,we.h=100,we.x=0,we.color="0x000000ff",s[27].populate(we),i=s[26];const ge={};s[28]=this.element({parent:i||"root"},o),ge.w=100,ge.h=100,ge.x=120,ge.color="0xccccccff",s[28].populate(ge),i=s[26];const be={};s[29]=this.element({parent:i||"root"},o),be.w=100,be.h=100,be.x=240,be.color="0x889900ff",s[29].populate(be),i=s[26];const Ie={};s[30]=this.element({parent:i||"root"},o),Ie.w=100,Ie.h=100,Ie.x=360,Ie.color="0x00ff00ff",s[30].populate(Ie),i=s[0];const V={};s[31]=this.element({parent:i||"root"},o),V.x=20,V.y=740,s[31].populate(V),i=s[31];const De={};s[32]=this.element({parent:i||"root"},o),De.w=100,De.h=100,De.x=0,De.color="0x000000ff",s[32].populate(De),i=s[31];const Se={};s[33]=this.element({parent:i||"root"},o),Se.w=100,Se.h=100,Se.x=120,Se.color="0xccccccff",s[33].populate(Se),i=s[31];const me={};s[34]=this.element({parent:i||"root"},o),me.w=100,me.h=100,me.x=240,me.color="0x889900ff",s[34].populate(me),i=s[31];const Re={};s[35]=this.element({parent:i||"root"},o),Re.w=100,Re.h=100,Re.x=360,Re.color="0x00ff00ff",s[35].populate(Re),i=s[0];const Ne={};s[36]=this.element({parent:i||"root"},o),Ne.x=620,Ne.y=20,s[36].populate(Ne),i=s[36];const $e={};s[37]=this.element({parent:i||"root"},o),$e.w=300,$e.h=200,$e.x=0,$e.color={transition:o.color1},s[37].populate($e),i=s[36];const Pe={};s[38]=this.element({parent:i||"root"},o),Pe.w=300,Pe.h=200,Pe.x=0,Pe.y=250,Pe.color={transition:o.color2},s[38].populate(Pe),i=s[36];const ve={};s[39]=this.element({parent:i||"root"},o),ve.w=300,ve.h=200,ve.x=100,ve.y=400,ve.color={transition:o.color3},s[39].populate(ve),i=s[36];const Ye={};return s[40]=this.element({parent:i||"root"},o),Ye.w=300,Ye.h=200,Ye.x=0,Ye.y=650,Ye.color={transition:{value:o.color4,d:1e3,f:"ease-in-out"}},s[40].populate(Ye),s},effects:[function(i,o,l,h,g,x){o[0].set("color",{transition:i.bg})},function(i,o,l,h,g,x){o[37].set("color",{transition:i.color1})},function(i,o,l,h,g,x){o[38].set("color",{transition:i.color2})},function(i,o,l,h,g,x){o[39].set("color",{transition:i.color3})},function(i,o,l,h,g,x){o[40].set("color",{transition:{value:i.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter(){this.color1=this.color1==="#0891b2"?"#22d3ee":"#0891b2",this.color2=this.color2==="#dc2626"?"#0f0":"#dc2626",this.color3=this.color3==="rgba(251, 191, 36)"?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4=this.color4==="#1e3a8a"?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let f=0;const i=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{f=f+1,f===i.length-1&&(f=0),this.bg=i[f]},2e3)}}}),GL=tt.Component("Gradients",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=1920/4,C.h=1080,C.color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.w=1920/4,y.h=1080,y.x=1920/4,y.color="{left: '0xdc2626ff',  right: '0xf87171ff'}",s[2].populate(y),i=s[0];const v={};s[3]=this.element({parent:i||"root"},o),v.w=1920/4,v.h=1080,v.x=1920/4*2,v.color="{top: '0x0891b2ff', right: '0xf87171ff'}",s[3].populate(v),i=s[0];const M={};return s[4]=this.element({parent:i||"root"},o),M.w=1920/4,M.h=1080,M.x=1920/4*3,M.color="{right: '0x008000ff', bottom: '0xffd700ff'}",s[4].populate(M),s},effects:[function(i,o,l,h,g,x){o[1].set("w",1920/4)},function(i,o,l,h,g,x){o[2].set("w",1920/4)},function(i,o,l,h,g,x){o[2].set("x",1920/4)},function(i,o,l,h,g,x){o[3].set("w",1920/4)},function(i,o,l,h,g,x){o[3].set("x",1920/4*2)},function(i,o,l,h,g,x){o[4].set("w",1920/4)},function(i,o,l,h,g,x){o[4].set("x",1920/4*3)}],context:{}}}),WL=tt.Component("Transitions",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.x=60,s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=200,C.h=200,C.x=50,C.y={transition:o.y},C.color="0xc4b5fdff",s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.w=200,y.h=200,y.x=300,y.y={transition:{value:o.y}},y.color="0xa78bfaff",s[2].populate(y),i=s[0];const v={};s[3]=this.element({parent:i||"root"},o),v.w=200,v.h=200,v.x=550,v.y={transition:{value:o.y,duration:1e3,start:o.start,end:o.doneTransition3}},v.color="0x8b5cf6ff",v.ref="bla",s[3].populate(v),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.w=200,M.h=200,M.x=800,M.y={transition:{value:o.y,duration:500,delay:500,start:o.start,end:o.finished}},M.color="0x7c3aedff",s[4].populate(M),i=s[0];const b={};s[5]=this.element({parent:i||"root"},o),b.w=200,b.h=200,b.x=1050,b.y={transition:{value:o.y,easing:"ease-in-out",end:o.finished}},b.color="0x6d28d9ff",s[5].populate(b),i=s[0];const _={};s[6]=this.element({parent:i||"root"},o),_.w=200,_.h=200,_.x=1300,_.y={transition:{value:o.y,duration:3e3,easing:"ease-in-out-back",end:o.finished}},_.color="0x5b21b6ff",s[6].populate(_),i=s[0];const U={};return s[7]=this.element({parent:i||"root"},o),U.w=200,U.h=200,U.x=1550,U.y={transition:{value:o.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},U.color="0x4c1d95ff",s[7].populate(U),s},effects:[function(i,o,l,h,g,x){o[1].set("y",{transition:i.y})},function(i,o,l,h,g,x){o[2].set("y",{transition:{value:i.y}})},function(i,o,l,h,g,x){o[3].set("y",{transition:{value:i.y,duration:1e3,start:i.start,end:i.doneTransition3}})},function(i,o,l,h,g,x){o[4].set("y",{transition:{value:i.y,duration:500,delay:500,start:i.start,end:i.finished}})},function(i,o,l,h,g,x){o[5].set("y",{transition:{value:i.y,easing:"ease-in-out",end:i.finished}})},function(i,o,l,h,g,x){o[6].set("y",{transition:{value:i.y,duration:3e3,easing:"ease-in-out-back",end:i.finished}})},function(i,o,l,h,g,x){o[7].set("y",{transition:{value:i.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state(){return{y:50}},hooks:{init(){this.$setInterval(()=>{this.go()},12e3),this.go()}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(f,i,o){this.$log.info("Start transition",f.nodeId,i,o)},finished(f,i,o){this.$log.info("Finished transition",f.nodeId,i,o)},go(){this.y=50,this.$setTimeout(()=>{this.y=830},1e3),this.$setTimeout(()=>{this.y=50,this.$setTimeout(()=>{this.y=200},1e3)},6e3)}}}),XL=tt.Component("Alpha",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.y=100,s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.w=200,y.h=200,y.x=100,y.color="0xffffffff",y.alpha=.2,s[2].populate(y),i=s[1];const v={};s[3]=this.element({parent:i||"root"},o),v.w=200,v.h=200,v.x=320,v.color="0xffffffff",v.alpha=.4,s[3].populate(v),i=s[1];const M={};s[4]=this.element({parent:i||"root"},o),M.w=200,M.h=200,M.x=540,M.color="0xffffffff",M.alpha=.6,s[4].populate(M),i=s[1];const b={};s[5]=this.element({parent:i||"root"},o),b.w=200,b.h=200,b.x=760,b.color="0xffffffff",b.alpha=.8,s[5].populate(b),i=s[1];const _={};s[6]=this.element({parent:i||"root"},o),_.w=200,_.h=200,_.x=980,_.color="0xffffffff",_.alpha=1,s[6].populate(_),i=s[0];const U={};s[7]=this.element({parent:i||"root"},o),U.w=200,U.h=200,U.x=100,U.y=320,U.color="0xffffffff",U.alpha=o.alpha,s[7].populate(U),i=s[0];const F={};s[8]=this.element({parent:i||"root"},o),F.w=200,F.h=200,F.x=100,F.y=540,F.color="0xffffffff",F.alpha=o.alpha,s[8].populate(F),i=s[0];const z={};s[9]=this.element({parent:i||"root"},o),z.w=200,z.h=200,z.x=100,z.y=760,z.color="0xffffffff",z.alpha={transition:{value:o.alpha,duration:1e3,easing:"ease-in-out-circ"}},s[9].populate(z),i=s[0];const B={};s[10]=this.element({parent:i||"root"},o),B.w=428,B.h=234,B.x=1200,B.y=100,B.src=o.image,B.alpha=1,s[10].populate(B),i=s[0];const G={};s[11]=this.element({parent:i||"root"},o),G.w=428,G.h=234,G.x=1300,G.y=294,G.src=o.image,G.alpha=.4,s[11].populate(G),i=s[0];const X={};s[12]=this.element({parent:i||"root"},o),X.w=428,X.h=234,X.x=1200,X.y=100+234*2-40*2,X.src=o.image,X.alpha=.1,s[12].populate(X),i=s[0];const Q={};s[13]=this.element({parent:i||"root"},o),Q.x=400,Q.y=400,Q.alpha=.2,Q.content="Text with alpha applied directly",Q.__textnode=!0,s[13].populate(Q),i=s[0];const W={};s[14]=this.element({parent:i||"root"},o),W.alpha=.5,W.x=400,W.y=500,s[14].populate(W),i=s[14];const te={};return s[15]=this.element({parent:i||"root"},o),te.content="Text with alpha applied on parent element",te.__textnode=!0,s[15].populate(te),s},effects:[function(i,o,l,h,g,x){o[8].set("alpha",i.alpha)},function(i,o,l,h,g,x){o[9].set("alpha",{transition:{value:i.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(i,o,l,h,g,x){o[10].set("src",i.image)},function(i,o,l,h,g,x){o[11].set("y",294)},function(i,o,l,h,g,x){o[11].set("src",i.image)},function(i,o,l,h,g,x){o[12].set("y",100+234*2-40*2)},function(i,o,l,h,g,x){o[12].set("src",i.image)}],context:{}},state(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready(){this.$setInterval(()=>{const f=this.direction==="up"?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(f,1),.1),this.alpha===1&&(this.direction="down"),this.alpha===.1&&(this.direction="up")},1400)}}}),qL=tt.Component("Scaling",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.x=100,C.y=100,C.w=150,C.h=150,C.color="0x64748bff",s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.x=300,y.y=100,y.w=100,y.h=100,y.color="0x64748bff",y.scale=1.5,s[2].populate(y),i=s[0];const v={};s[3]=this.element({parent:i||"root"},o),v.x=100,v.y=400,v.w=100,v.h=100,v.color="0xb45309ff",v.scale=o.scale,s[3].populate(v),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.x=900,M.y=400,M.w=100,M.h=100,M.src=o.balloon,M.scale={transition:{value:o.scale,easing:"ease-in-out"}},s[4].populate(M),i=s[0];const b={};s[5]=this.element({parent:i||"root"},o),b.x=300,b.y=600,b.w=100,b.h=100,b.color="0x059669ff",b.scale=o.scale2,s[5].populate(b),i=s[5];const _={};s[6]=this.element({parent:i||"root"},o),_.x=10,_.y=10,_.h=60,_.w=80,_.color="0x0369a1ff",s[6].populate(_),i=s[0];const U={};s[7]=this.element({parent:i||"root"},o),U.x=1500,U.y=600,U.w=100,U.h=100,U.color="0x059669ff",U.scale=o.scale2,s[7].populate(U),i=s[7];const F={};return s[8]=this.element({parent:i||"root"},o),F.x=10,F.y=10,F.h=60,F.w=80,F.color="0x0369a1ff",F.scale=o.scale2/2,s[8].populate(F),s},effects:[function(i,o,l,h,g,x){o[4].set("src",i.balloon)},function(i,o,l,h,g,x){o[4].set("scale",{transition:{value:i.scale,easing:"ease-in-out"}})},function(i,o,l,h,g,x){o[5].set("scale",i.scale2)},function(i,o,l,h,g,x){o[7].set("scale",i.scale2)},function(i,o,l,h,g,x){o[8].set("scale",i.scale2/2)}],context:{}},state(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready(){this.$setInterval(()=>{const o=this.direction==="up"?this.scale+.5:0;this.scale=Math.max(Math.min(o,8),0),this.scale===8&&(this.direction="down"),this.scale===0&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=this.scale2===1?3:1},2e3)}}}),KL=tt.Component("Rotation",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.y=70,s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.x=100,y.y=0,y.w=200,y.h=100,y.color="0xfee2e2ff",y.rotation=0,s[2].populate(y),i=s[1];const v={};s[3]=this.element({parent:i||"root"},o),v.x=100,v.y=150,v.w=200,v.h=100,v.color="0xfecacaff",v.rotation=10,s[3].populate(v),i=s[1];const M={};s[4]=this.element({parent:i||"root"},o),M.x=100,M.y=300,M.w=200,M.h=100,M.color="0xfca5a5ff",M.rotation=20,s[4].populate(M),i=s[1];const b={};s[5]=this.element({parent:i||"root"},o),b.x=100,b.y=450,b.w=200,b.h=100,b.color="0xf87171ff",b.rotation=30,s[5].populate(b),i=s[1];const _={};s[6]=this.element({parent:i||"root"},o),_.x=100,_.y=610,_.w=200,_.h=100,_.color="0xef4444ff",_.rotation=40,s[6].populate(_),i=s[1];const U={};s[7]=this.element({parent:i||"root"},o),U.x=100,U.y=800,U.w=200,U.h=100,U.color="0xdc2626ff",U.rotation=50,s[7].populate(U),i=s[0];const F={};s[8]=this.element({parent:i||"root"},o),F.y=70,F.x=300,s[8].populate(F),i=s[8];const z={};s[9]=this.element({parent:i||"root"},o),z.x=100,z.y=0,z.w=200,z.h=100,z.color="0xfee2e2ff",z.rotation=60,s[9].populate(z),i=s[8];const B={};s[10]=this.element({parent:i||"root"},o),B.x=100,B.y=150,B.w=200,B.h=100,B.color="0xfecacaff",B.rotation=70,s[10].populate(B),i=s[8];const G={};s[11]=this.element({parent:i||"root"},o),G.x=100,G.y=300,G.w=200,G.h=100,G.color="0xfca5a5ff",G.rotation=80,s[11].populate(G),i=s[8];const X={};s[12]=this.element({parent:i||"root"},o),X.x=100,X.y=450,X.w=200,X.h=100,X.color="0xf87171ff",X.rotation=90,s[12].populate(X),i=s[8];const Q={};s[13]=this.element({parent:i||"root"},o),Q.x=100,Q.y=610,Q.w=200,Q.h=100,Q.color="0xef4444ff",Q.rotation=100,s[13].populate(Q),i=s[8];const W={};s[14]=this.element({parent:i||"root"},o),W.x=100,W.y=800,W.w=200,W.h=100,W.color="0xdc2626ff",W.rotation=100,s[14].populate(W),i=s[0];const te={};s[15]=this.element({parent:i||"root"},o),te.y=70,te.x=600,s[15].populate(te),i=s[15];const de={};s[16]=this.element({parent:i||"root"},o),de.x=100,de.y=0,de.w=200,de.h=100,de.color="0xfee2e2ff",de.rotation=110,s[16].populate(de),i=s[15];const I={};s[17]=this.element({parent:i||"root"},o),I.x=100,I.y=150,I.w=200,I.h=100,I.color="0xfecacaff",I.rotation=120,s[17].populate(I),i=s[15];const q={};s[18]=this.element({parent:i||"root"},o),q.x=100,q.y=300,q.w=200,q.h=100,q.color="0xfca5a5ff",q.rotation=130,s[18].populate(q),i=s[15];const ee={};s[19]=this.element({parent:i||"root"},o),ee.x=100,ee.y=450,ee.w=200,ee.h=100,ee.color="0xf87171ff",ee.rotation=140,s[19].populate(ee),i=s[15];const ae={};s[20]=this.element({parent:i||"root"},o),ae.x=100,ae.y=610,ae.w=200,ae.h=100,ae.color="0xef4444ff",ae.rotation=150,s[20].populate(ae),i=s[15];const ne={};s[21]=this.element({parent:i||"root"},o),ne.x=100,ne.y=800,ne.w=200,ne.h=100,ne.color="0xdc2626ff",ne.rotation=160,s[21].populate(ne),i=s[0];const Y={};s[22]=this.element({parent:i||"root"},o),Y.y=70,Y.x=900,s[22].populate(Y),i=s[22];const Z={};s[23]=this.element({parent:i||"root"},o),Z.x=100,Z.y=0,Z.w=200,Z.h=100,Z.color="0xfee2e2ff",Z.rotation=170,s[23].populate(Z),i=s[22];const j={};s[24]=this.element({parent:i||"root"},o),j.x=100,j.y=150,j.w=200,j.h=100,j.color="0xfecacaff",j.rotation=180,s[24].populate(j),i=s[22];const fe={};s[25]=this.element({parent:i||"root"},o),fe.x=100,fe.y=300,fe.w=200,fe.h=100,fe.color="0xfca5a5ff",fe.rotation=190,s[25].populate(fe),i=s[22];const he={};s[26]=this.element({parent:i||"root"},o),he.x=100,he.y=450,he.w=200,he.h=100,he.color="0xf87171ff",he.rotation=200,s[26].populate(he),i=s[22];const we={};s[27]=this.element({parent:i||"root"},o),we.x=100,we.y=610,we.w=200,we.h=100,we.color="0xef4444ff",we.rotation=210,s[27].populate(we),i=s[22];const ge={};s[28]=this.element({parent:i||"root"},o),ge.x=100,ge.y=800,ge.w=200,ge.h=100,ge.color="0xdc2626ff",ge.rotation=220,s[28].populate(ge),i=s[0];const be={};s[29]=this.element({parent:i||"root"},o),be.y=70,be.x=1200,s[29].populate(be),i=s[29];const Ie={};s[30]=this.element({parent:i||"root"},o),Ie.x=100,Ie.y=0,Ie.w=200,Ie.h=100,Ie.color="0xfee2e2ff",Ie.rotation=230,s[30].populate(Ie),i=s[29];const V={};s[31]=this.element({parent:i||"root"},o),V.x=100,V.y=150,V.w=200,V.h=100,V.color="0xfecacaff",V.rotation=240,s[31].populate(V),i=s[29];const De={};s[32]=this.element({parent:i||"root"},o),De.x=100,De.y=300,De.w=200,De.h=100,De.color="0xfca5a5ff",De.rotation=250,s[32].populate(De),i=s[29];const Se={};s[33]=this.element({parent:i||"root"},o),Se.x=100,Se.y=450,Se.w=200,Se.h=100,Se.color="0xf87171ff",Se.rotation=260,s[33].populate(Se),i=s[29];const me={};s[34]=this.element({parent:i||"root"},o),me.x=100,me.y=610,me.w=200,me.h=100,me.color="0xef4444ff",me.rotation=270,s[34].populate(me),i=s[29];const Re={};s[35]=this.element({parent:i||"root"},o),Re.x=100,Re.y=800,Re.w=200,Re.h=100,Re.color="0xdc2626ff",Re.rotation=280,s[35].populate(Re),i=s[0];const Ne={};s[36]=this.element({parent:i||"root"},o),Ne.y=70,Ne.x=1500,s[36].populate(Ne),i=s[36];const $e={};s[37]=this.element({parent:i||"root"},o),$e.x=100,$e.y=0,$e.w=200,$e.h=100,$e.color="0xfee2e2ff",$e.rotation=290,s[37].populate($e),i=s[36];const Pe={};s[38]=this.element({parent:i||"root"},o),Pe.x=100,Pe.y=150,Pe.w=200,Pe.h=100,Pe.color="0xfecacaff",Pe.rotation=300,s[38].populate(Pe),i=s[36];const ve={};s[39]=this.element({parent:i||"root"},o),ve.x=100,ve.y=300,ve.w=200,ve.h=100,ve.color="0xfca5a5ff",ve.rotation=310,s[39].populate(ve),i=s[36];const Ye={};s[40]=this.element({parent:i||"root"},o),Ye.x=100,Ye.y=450,Ye.w=200,Ye.h=100,Ye.color="0xf87171ff",Ye.rotation=320,s[40].populate(Ye),i=s[36];const it={};s[41]=this.element({parent:i||"root"},o),it.x=100,it.y=610,it.w=200,it.h=100,it.color="0xef4444ff",it.rotation=330,s[41].populate(it),i=s[36];const Ke={};s[42]=this.element({parent:i||"root"},o),Ke.x=100,Ke.y=800,Ke.w=200,Ke.h=100,Ke.color="0xdc2626ff",Ke.rotation=340,s[42].populate(Ke),i=s[0];const lt={};s[43]=this.element({parent:i||"root"},o),lt.x=200,lt.y=200,lt.w=400,lt.h=400,lt.color="0x0891b2ff",lt.rotation=o.rotation1,s[43].populate(lt),i=s[0];const St={};s[44]=this.element({parent:i||"root"},o),St.x=800,St.y=200,St.w=400,St.h=400,St.color="0x0891b2ff",St.rotation=o.rotation2,s[44].populate(St),i=s[0];const ft={};return s[45]=this.element({parent:i||"root"},o),ft.x=1400,ft.y=200,ft.w=400,ft.h=400,ft.color="0x0891b2ff",ft.rotation={transition:o.rotation3},s[45].populate(ft),s},effects:[function(i,o,l,h,g,x){o[44].set("rotation",i.rotation2)},function(i,o,l,h,g,x){o[45].set("rotation",{transition:i.rotation3})}],context:{}},state(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready(){let f=800,i=2e3;this.$setInterval(()=>{const o=this.rotation2+10;this.rotation2=o<=360?o:0},f),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,this.rotation3*2)),this.rotation3===720&&(this.rotation3=0)},i)}}}),YL=tt.Component("KeyInput",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.x=525,m.y=130,s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=200,C.h=200,C.color=o.focusColor,C.x=o.focusedX*220,C.y=o.focusedY*210,s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.w=180,y.h=180,y.x=10,y.y=10,y.color=o.blockColor,s[2].populate(y),i=s[0];const v={};s[3]=this.element({parent:i||"root"},o),v.w=180,v.h=180,v.x=230,v.y=10,v.color=o.blockColor,s[3].populate(v),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.w=180,M.h=180,M.x=450,M.y=10,M.color=o.blockColor,s[4].populate(M),i=s[0];const b={};s[5]=this.element({parent:i||"root"},o),b.w=180,b.h=180,b.x=670,b.y=10,b.color=o.blockColor,s[5].populate(b),i=s[0];const _={};s[6]=this.element({parent:i||"root"},o),_.w=180,_.h=180,_.x=10,_.y=220,_.color=o.blockColor,s[6].populate(_),i=s[0];const U={};s[7]=this.element({parent:i||"root"},o),U.w=180,U.h=180,U.x=230,U.y=220,U.color=o.blockColor,s[7].populate(U),i=s[0];const F={};s[8]=this.element({parent:i||"root"},o),F.w=180,F.h=180,F.x=450,F.y=220,F.color=o.blockColor,s[8].populate(F),i=s[0];const z={};s[9]=this.element({parent:i||"root"},o),z.w=180,z.h=180,z.x=670,z.y=220,z.color=o.blockColor,s[9].populate(z),i=s[0];const B={};s[10]=this.element({parent:i||"root"},o),B.w=180,B.h=180,B.x=10,B.y=430,B.color=o.blockColor,s[10].populate(B),i=s[0];const G={};s[11]=this.element({parent:i||"root"},o),G.w=180,G.h=180,G.x=230,G.y=430,G.color=o.blockColor,s[11].populate(G),i=s[0];const X={};s[12]=this.element({parent:i||"root"},o),X.w=180,X.h=180,X.x=450,X.y=430,X.color=o.blockColor,s[12].populate(X),i=s[0];const Q={};s[13]=this.element({parent:i||"root"},o),Q.w=180,Q.h=180,Q.x=670,Q.y=430,Q.color=o.blockColor,s[13].populate(Q),i=s[0];const W={};s[14]=this.element({parent:i||"root"},o),W.w=180,W.h=180,W.x=10,W.y=640,W.color=o.blockColor,s[14].populate(W),i=s[0];const te={};s[15]=this.element({parent:i||"root"},o),te.w=180,te.h=180,te.x=230,te.y=640,te.color=o.blockColor,s[15].populate(te),i=s[0];const de={};s[16]=this.element({parent:i||"root"},o),de.w=180,de.h=180,de.x=450,de.y=640,de.color=o.blockColor,s[16].populate(de),i=s[0];const I={};return s[17]=this.element({parent:i||"root"},o),I.w=180,I.h=180,I.x=670,I.y=640,I.color=o.blockColor,s[17].populate(I),s},effects:[function(i,o,l,h,g,x){o[1].set("color",i.focusColor)},function(i,o,l,h,g,x){o[1].set("x",i.focusedX*220)},function(i,o,l,h,g,x){o[1].set("y",i.focusedY*210)},function(i,o,l,h,g,x){o[2].set("color",i.blockColor)},function(i,o,l,h,g,x){o[3].set("color",i.blockColor)},function(i,o,l,h,g,x){o[4].set("color",i.blockColor)},function(i,o,l,h,g,x){o[5].set("color",i.blockColor)},function(i,o,l,h,g,x){o[6].set("color",i.blockColor)},function(i,o,l,h,g,x){o[7].set("color",i.blockColor)},function(i,o,l,h,g,x){o[8].set("color",i.blockColor)},function(i,o,l,h,g,x){o[9].set("color",i.blockColor)},function(i,o,l,h,g,x){o[10].set("color",i.blockColor)},function(i,o,l,h,g,x){o[11].set("color",i.blockColor)},function(i,o,l,h,g,x){o[12].set("color",i.blockColor)},function(i,o,l,h,g,x){o[13].set("color",i.blockColor)},function(i,o,l,h,g,x){o[14].set("color",i.blockColor)},function(i,o,l,h,g,x){o[15].set("color",i.blockColor)},function(i,o,l,h,g,x){o[16].set("color",i.blockColor)},function(i,o,l,h,g,x){o[17].set("color",i.blockColor)}],context:{}},state(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor(){return this.colorscheme,this.colorscheme==="yellow"?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme,this.colorscheme==="yellow"?"#facc15":"#38bdf8"}},input:{left(){const f=this.focusedX-1;this.focusedX=Math.max(f,0)},right(){const f=this.focusedX+1;this.focusedX=Math.min(f,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme=this.colorscheme==="yellow"?"blue":"yellow"},any(f){const i=parseInt(f.key);isNaN(i)?this.parent.$focus(f):(this.focusedX=Math.max(0,(i-1)%4),this.focusedY=Math.max(0,Math.ceil(i/4)-1))}}}),X0=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],q0=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],QL=tt.Component("Texts",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.x=100,m.y=100,s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.content="Default text",C["@loaded"]=o.textLoaded&&o.textLoaded.bind(o),C.__textnode=!0,s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.content="123456",y.x=400,y.__textnode=!0,s[2].populate(y),i=s[0];const v={};s[3]=this.element({parent:i||"root"},o),v.content="Text with a different fontsize",v.size=o.size,v.y=120,v.font="raleway",v.__textnode=!0,s[3].populate(v),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.content="Text with a different color",M.size=50,M.color=o.color,M.y=250,M.__textnode=!0,s[4].populate(M),i=s[0];const b={};s[5]=this.element({parent:i||"root"},o),b.content="Letterspacing",b.size=50,b.color="0x38bdf8ff",b.y=450,b.letterspacing=40,b.__textnode=!0,s[5].populate(b),i=s[0];const _={};s[6]=this.element({parent:i||"root"},o),_.w=800,_.h=100,_.y=550,_.color="0x94a3b8ff",s[6].populate(_),i=s[6];const U={};s[7]=this.element({parent:i||"root"},o),U.content="Text align center",U.size=50,U.y=15,U.color="0xbae6fdff",U.align="center",U.maxwidth=800,U.__textnode=!0,s[7].populate(U),i=s[0];const F={};s[8]=this.element({parent:i||"root"},o),F.w=800,F.h=200,F.x=900,F.y=550,F.color="0x94a3b8ff",s[8].populate(F),i=s[8];const z={};s[9]=this.element({parent:i||"root"},o),z.content=o.longText,z.size=40,z.color="0xbae6fdff",z.maxwidth=800,z.maxlines=5,z.textoverflow="!!!",z.__textnode=!0,s[9].populate(z),i=s[0];const B={};s[10]=this.element({parent:i||"root"},o),B.w=800,B.h=120,B.x=900,B.y=800,B.color="0x94a3b8ff",s[10].populate(B),i=s[10];const G={};s[11]=this.element({parent:i||"root"},o),G.content=o.longText,G.size=40,G.color="0xbae6fdff",G.maxwidth=800,G.maxlines=2,G.lineheight=60,G.textoverflow=!1,G.__textnode=!0,s[11].populate(G),i=s[0];const X={};s[12]=this.element({parent:i||"root"},o),X.content=o.character,X.size=50,X.color=o.color,X.y=750,X.font="opensans",X.__textnode=!0,s[12].populate(X),i=s[0];const Q={};s[13]=this.element({parent:i||"root"},o),Q.x=1200,Q.y=300,s[13].populate(Q),i=s[13];const W={};s[14]=this.element({parent:i||"root"},o),W.rotation={transition:o.rotation},W.pivot=0,W.content="Hello",W.__textnode=!0,s[14].populate(W),i=s[13];const te={};s[15]=this.element({parent:i||"root"},o),te.x=150,te.rotation={transition:o.rotation},te.pivot=.5,te.content="World",te.__textnode=!0,s[15].populate(te),i=s[13];const de={};s[16]=this.element({parent:i||"root"},o),de.x=300,de.rotation={transition:o.rotation},de.pivot=1,de.content="!!",de.__textnode=!0,s[16].populate(de),i=s[0];const I={};s[17]=this.element({parent:i||"root"},o),I.x=500,I.y=700,s[17].populate(I),i=s[17];const q=[];let ee,ae;const ne=(fe=[],he,we)=>{const ge=x(fe),be=new Set;let Ie=ge.length;const V={};for(ee=V.from||0,ae=("to"in V)?V.to:ge.length;Ie--;)ge[Ie],Ie<ae&&Ie>=ee&&be.add(""+Ie);let De=we.length;for(;De--;)if(be.has(we[De])===!1){const Re=we[De];he[18][Re]&&he[18][Re].destroy(),delete he[18][Re]}we.length=0;const Se=ge.length,me=[];for(let Re=0;Re<Se;Re++){if(Re<ee||Re>=ae)continue;const Ne=Object.create(o);i=he[17],Ne.text=ge[Re],Ne.index=Re,Ne.key=""+Re,we.push(Ne.key),i=he[17],he[18]===void 0&&(he[18]={});const $e={};he[18][Ne.key]===void 0&&(he[18][Ne.key]=this.element({parent:i||"root"},o)),$e.content=Ne.text,$e.y=Ne.index*50,$e.__textnode=!0,he[18][Ne.key].nodeId===void 0&&he[18][Ne.key].populate($e);let Pe=()=>{he[18][Ne.key].set("y",Ne.index*50)};g(Pe,null),me.push(Pe),o[Symbol.for("effects")].push(Pe)}return me};let Y;const Z=()=>{o[Symbol.for("removeGlobalEffects")](Y),Y=null,Y=ne(o.texts,s,q)};o[Symbol.for("effects")].push(Z),g(Z,["texts"]);const j=()=>{o.text;for(let fe=0;fe<o.texts.length;fe++){if(fe<ee||fe>=ae)continue;const he={};he.index=fe,he.text=o.texts[fe],he.key=fe,s[18][he.key].set("content",he.text)}};return o[Symbol.for("effects")].push(j),g(j),s},effects:[function(i,o,l,h,g,x){o[3].set("size",i.size)},function(i,o,l,h,g,x){o[4].set("color",i.color)},function(i,o,l,h,g,x){o[12].set("content",i.character)},function(i,o,l,h,g,x){o[12].set("color",i.color)},function(i,o,l,h,g,x){o[14].set("rotation",{transition:i.rotation})},function(i,o,l,h,g,x){o[15].set("rotation",{transition:i.rotation})},function(i,o,l,h,g,x){o[16].set("rotation",{transition:i.rotation})}],context:{}},state(){return{color:X0[0],size:10,character:q0[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0,texts:["Hello","World","Lightning 3","Blits"]}},hooks:{ready(){let f=0;this.$setInterval(()=>{f++,f>X0.length-1&&(f=0),this.color=X0[f],this.size=10*(f*2+1),this.rotation+=30},1e3);let i=0;this.$setInterval(()=>{i++,i>q0.length-1&&(i=0),this.character=q0[i]},1400)}},methods:{textLoaded(f){this.$log.info(`Text loaded with w: ${f.w} and h: ${f.h}`)}}}),Bh=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],ZL=tt.Component("Images",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.src="assets/lightningbolt.png",C.w=428,C.h=234,C.x=100,C.y=100,s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",y.w=428,y.h=234,y.x=100,y.y=400,s[2].populate(y),i=s[0];const v={};s[3]=this.element({parent:i||"root"},o),v.src=o.image,v.x=100,v.y=700,v["@loaded"]=o.imageLoaded&&o.imageLoaded.bind(o),s[3].populate(v),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.color="{top: '0xff0000ff', bottom: '0xffd700ff'}",M.src="assets/lightningbolt.png",M.w=428,M.h=234,M.x=600,M.y=100,s[4].populate(M),i=s[0];const b={};s[5]=this.element({parent:i||"root"},o),b.x=600,b.y=400,b.w=428,b.h=234,b.clipping=o.clipping,s[5].populate(b),i=s[5];const _={};s[6]=this.element({parent:i||"root"},o),_.src="assets/lightningbolt.png",_.w=856,_.h=468,s[6].populate(_),i=s[0];const U={};return s[7]=this.element({parent:i||"root"},o),U.color=o.color,U.src="assets/lightningbolt.png",U.w=428,U.h=234,U.x=1100,U.y=100,s[7].populate(U),s},effects:[function(i,o,l,h,g,x){o[3].set("src",i.image)},function(i,o,l,h,g,x){o[5].set("clipping",i.clipping)},function(i,o,l,h,g,x){o[7].set("color",i.color)}],context:{}},state(){return{image:Bh[0],clipping:!0,color:"red"}},hooks:{ready(){this.$setInterval(()=>{this.image=this.image===Bh[0]?Bh[1]:Bh[0],this.clipping=!this.clipping,this.color=this.color==="red"?"blue":"red"},2e3)}},methods:{imageLoaded(f){console.log("backstopjs:ready"),this.$log.info(`Image loaded with w: ${f.w} and h: ${f.h}`)}}}),dl=tt.Component("Square",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.w={transition:o.size},m.h={transition:o.size},m.color={transition:o.color},s[0].populate(m),s},effects:[function(i,o,l,h,g,x){o[0].set("w",{transition:i.size})},function(i,o,l,h,g,x){o[0].set("h",{transition:i.size})},function(i,o,l,h,g,x){o[0].set("color",{transition:i.color})}],context:{}},props:[{key:"size",default:80}],state(){return{color:"#86198f"}},watch:{size(f,i){this.$log.info(`Size changed from ${i} to ${f}`),this.color=this.color==="#86198f"?"#9d174d":"#86198f"}}}),zT=tt.Component("Card",{components:{Square:dl},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),M.w=o.w,M.h=o.h,M.color="0x0891b2ff",s[0].populate(M),y===!0&&(v-=1);const b=l.components&&l.components.Square||h.Square;i=s[0];const _={};s[1]=this.element({parent:i||"root"},y===!0?C:o),_.x=80,_.y=80;const U=[];if(typeof b<"u")for(let te in b[Symbol.for("config")].props)delete _[b[Symbol.for("config")].props[te]],U.push(b[Symbol.for("config")].props[te]);s[1].populate(_),y===!0&&(v-=1),i=s[1];const F={};F.x=80,F.y=80,m=F.is||"Square";let z;if(typeof m=="string"){if(z=l.components&&l.components[m]||h[m],!z)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[2]=z.call(null,{props:F},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],C=s[2],y=!0):i=s[2][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const B=l.components&&l.components.Square||h.Square;i=s[0];const G={};s[3]=this.element({parent:i||"root"},y===!0?C:o),G.x=20,G.y=20,G.size=40;const X=[];if(typeof B<"u")for(let te in B[Symbol.for("config")].props)delete G[B[Symbol.for("config")].props[te]],X.push(B[Symbol.for("config")].props[te]);s[3].populate(G),y===!0&&(v-=1),i=s[3];const Q={};Q.x=20,Q.y=20,Q.size=40,m=Q.is||"Square";let W;if(typeof m=="string"){if(W=l.components&&l.components[m]||h[m],!W)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);return s[4]=W.call(null,{props:Q},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],C=s[4],y=!0):i=s[4][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),s},effects:[],context:{}},props:["size"],computed:{w(){return this.size,this.size==="large"?400:200},h(){return this.size,this.size==="large"?500:300}}}),JL=tt.Component("Components",{components:{Square:dl,Card:zT},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(b),v===!0&&(M-=1);const _=l.components&&l.components.Square||h.Square;i=s[0];const U={};s[1]=this.element({parent:i||"root"},v===!0?y:o),U.x=100,U.y=100,U.size=50;const F=[];if(typeof _<"u")for(let wt in _[Symbol.for("config")].props)delete U[_[Symbol.for("config")].props[wt]],F.push(_[Symbol.for("config")].props[wt]);s[1].populate(U),v===!0&&(M-=1),i=s[1];const z={};z.x=100,z.y=100,z.size=50,m=z.is||"Square";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);s[2]=B.call(null,{props:z},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],y=s[2],v=!0):i=s[2][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const G=l.components&&l.components.Square||h.Square;i=s[0];const X={};s[3]=this.element({parent:i||"root"},v===!0?y:o),X.x=100,X.y=200,X.size=100;const Q=[];if(typeof G<"u")for(let wt in G[Symbol.for("config")].props)delete X[G[Symbol.for("config")].props[wt]],Q.push(G[Symbol.for("config")].props[wt]);s[3].populate(X),v===!0&&(M-=1),i=s[3];const W={};W.x=100,W.y=200,W.size=100,m=W.is||"Square";let te;if(typeof m=="string"){if(te=l.components&&l.components[m]||h[m],!te)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(te=m);s[4]=te.call(null,{props:W},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],y=s[4],v=!0):i=s[4][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const de=l.components&&l.components.Square||h.Square;i=s[0];const I={};s[5]=this.element({parent:i||"root"},v===!0?y:o),I.x=100,I.y=350,I.size=200;const q=[];if(typeof de<"u")for(let wt in de[Symbol.for("config")].props)delete I[de[Symbol.for("config")].props[wt]],q.push(de[Symbol.for("config")].props[wt]);s[5].populate(I),v===!0&&(M-=1),i=s[5];const ee={};ee.x=100,ee.y=350,ee.size=200,m=ee.is||"Square";let ae;if(typeof m=="string"){if(ae=l.components&&l.components[m]||h[m],!ae)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ae=m);s[6]=ae.call(null,{props:ee},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],y=s[6],v=!0):i=s[6][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const ne=l.components&&l.components.Square||h.Square;i=s[0];const Y={};s[7]=this.element({parent:i||"root"},v===!0?y:o),Y.x={transition:o.x},Y.y=600,Y.size=50;const Z=[];if(typeof ne<"u")for(let wt in ne[Symbol.for("config")].props)delete Y[ne[Symbol.for("config")].props[wt]],Z.push(ne[Symbol.for("config")].props[wt]);s[7].populate(Y),v===!0&&(M-=1),i=s[7];const j={};C={transition:o.x},Array.isArray(C)===!0&&(C=x(C).slice(0)),j.x=C,j.y=600,j.size=50,m=j.is||"Square";let fe;if(typeof m=="string"){if(fe=l.components&&l.components[m]||h[m],!fe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fe=m);s[8]=fe.call(null,{props:j},s[7],o),s[8][Symbol.for("slots")][0]?(i=s[8][Symbol.for("slots")][0],y=s[8],v=!0):i=s[8][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const he=l.components&&l.components.Card||h.Card;i=s[0];const we={};s[9]=this.element({parent:i||"root"},v===!0?y:o),we.x=500,we.y=100;const ge=[];if(typeof he<"u")for(let wt in he[Symbol.for("config")].props)delete we[he[Symbol.for("config")].props[wt]],ge.push(he[Symbol.for("config")].props[wt]);s[9].populate(we),v===!0&&(M-=1),i=s[9];const be={};be.x=500,be.y=100,m=be.is||"Card";let Ie;if(typeof m=="string"){if(Ie=l.components&&l.components[m]||h[m],!Ie)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ie=m);s[10]=Ie.call(null,{props:be},s[9],o),s[10][Symbol.for("slots")][0]?(i=s[10][Symbol.for("slots")][0],y=s[10],v=!0):i=s[10][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const V=l.components&&l.components.Card||h.Card;i=s[0];const De={};s[11]=this.element({parent:i||"root"},v===!0?y:o),De.x=500,De.y=500,De.size="large";const Se=[];if(typeof V<"u")for(let wt in V[Symbol.for("config")].props)delete De[V[Symbol.for("config")].props[wt]],Se.push(V[Symbol.for("config")].props[wt]);s[11].populate(De),v===!0&&(M-=1),i=s[11];const me={};me.x=500,me.y=500,me.size="large",m=me.is||"Card";let Re;if(typeof m=="string"){if(Re=l.components&&l.components[m]||h[m],!Re)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Re=m);s[12]=Re.call(null,{props:me},s[11],o),s[12][Symbol.for("slots")][0]?(i=s[12][Symbol.for("slots")][0],y=s[12],v=!0):i=s[12][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[0];const Ne={};s[13]=this.element({parent:i||"root"},v===!0?y:o),Ne.x=1e3,Ne.y=100,s[13].populate(Ne),v===!0&&(M-=1),i=s[13];const $e={};s[14]=this.element({parent:i||"root"},v===!0?y:o),$e.content="Dynamic components",$e.__textnode=!0,s[14].populate($e),v===!0&&(M-=1);const Pe=l.components&&l.components.Component||h.Component;i=s[13];const ve={};s[15]=this.element({parent:i||"root"},v===!0?y:o),ve.is=o.dynamicComponent,ve.y=100,ve.color="0x0000ffff";const Ye=[];if(typeof Pe<"u")for(let wt in Pe[Symbol.for("config")].props)delete ve[Pe[Symbol.for("config")].props[wt]],Ye.push(Pe[Symbol.for("config")].props[wt]);s[15].populate(ve),v===!0&&(M-=1),i=s[15];const it={};it.is=o.dynamicComponent,it.y=100,it.color="0x0000ffff",m=it.is||"Component";let Ke;if(typeof m=="string"){if(Ke=l.components&&l.components[m]||h[m],!Ke)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ke=m);s[16]=Ke.call(null,{props:it},s[15],o),s[16][Symbol.for("slots")][0]?(i=s[16][Symbol.for("slots")][0],y=s[16],v=!0):i=s[16][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[13];const lt=[];let St,ft;const Tt=(wt=[],Qe,gn)=>{const un=x(wt),qt=new Set;let xt=un.length;const Gt={};for(St=Gt.from||0,ft=("to"in Gt)?Gt.to:un.length;xt--;)un[xt],xt<ft&&xt>=St&&qt.add(""+xt);let vt=gn.length;for(;vt--;)if(qt.has(gn[vt])===!1){const bt=gn[vt];Qe[17][bt]&&Qe[17][bt].destroy(),delete Qe[17][bt],Qe[18][bt]&&Qe[18][bt].destroy(),delete Qe[18][bt]}gn.length=0;const Ot=un.length,uo=[];for(let bt=0;bt<Ot;bt++){if(bt<St||bt>=ft)continue;const jt=Object.create(o);i=Qe[13],jt.bla=un[bt],jt.index=bt,jt.key=""+bt,gn.push(jt.key);const kn=l.components&&l.components.Component||h.Component;Qe[17]===void 0&&(Qe[17]={});const to={};Qe[17][jt.key]===void 0&&(Qe[17][jt.key]=this.element({parent:i||"root"},v===!0?y:o)),to.is=jt.bla,to.x=205*jt.index,to.y=300;const Et=[];if(typeof kn<"u")for(let Qt in kn[Symbol.for("config")].props)delete to[kn[Symbol.for("config")].props[Qt]],Et.push(kn[Symbol.for("config")].props[Qt]);Qe[17][jt.key].nodeId===void 0&&(Qe[17][jt.key].populate(to),v===!0&&(M-=1)),Qe[18]===void 0&&(Qe[18]={}),i=Qe[17][jt.key];const En={};if(Qe[18][jt.key]===void 0){En.is=jt.bla,C=205*jt.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),En.x=C,En.y=300,m=En.is||"Component";let Qt;if(typeof m=="string"){if(Qt=l.components&&l.components[m]||h[m],!Qt)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Qt=m);Qe[18][jt.key]=Qt.call(null,{props:En},Qe[17][jt.key],o),Qe[18][jt.key][Symbol.for("slots")][0]?(i=Qe[18][jt.key][Symbol.for("slots")][0],y=Qe[18][jt.key],v=!0):i=Qe[18][jt.key][Symbol.for("children")][0]}let Jo=()=>{(typeof Et>"u"||Et.indexOf("x")===-1)&&Qe[17][jt.key].set("x",205*jt.index)};g(Jo,null),uo.push(Jo),o[Symbol.for("effects")].push(Jo),Qe[18][jt.key][Symbol.for("props")].x=205*jt.index}return uo};let je;const Dt=()=>{o[Symbol.for("removeGlobalEffects")](je),je=null,je=Tt(o.dynamicComponents,s,lt)};return o[Symbol.for("effects")].push(Dt),g(Dt,["dynamicComponents"]),s},effects:[function(i,o,l,h,g,x){(typeof skip7>"u"||skip7.indexOf("x")===-1)&&o[7].set("x",{transition:i.x})},function(i,o,l,h,g,x){o[8][Symbol.for("props")].x={transition:i.x}}],context:{}},state(){return{x:100,dynamicComponent:ld,dynamicComponents:["Square","Card","Square",ld],toggle:!1,size:50}},hooks:{ready(){this.$setInterval(()=>{this.x=this.x===100?250:100,this.size=this.size===50?200:50},2e3)}}}),ci=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],e6=tt.Component("ForLoop",{components:{Square:dl},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1;const M={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(M),i=s[0];const b={};s[1]=this.element({parent:i||"root"},v===!0?y:o),b.y=20,s[1].populate(b),i=s[1];const _=[];let U,F;const z=(Ge=[],ie,We)=>{const qe=x(Ge),Ze=new Set;let Me=qe.length;const Be={};for(U=Be.from||0,F=("to"in Be)?Be.to:qe.length;Me--;)qe[Me],Me<F&&Me>=U&&Ze.add(""+Me);let ht=We.length;for(;ht--;)if(Ze.has(We[ht])===!1){const Ce=We[ht];ie[2][Ce]&&ie[2][Ce].destroy(),delete ie[2][Ce]}We.length=0;const Pt=qe.length,At=[];for(let Ce=0;Ce<Pt;Ce++){if(Ce<U||Ce>=F)continue;const pe=Object.create(o);i=ie[1],pe.item=qe[Ce],pe.undefined=Ce,pe.key=""+Ce,We.push(pe.key),i=ie[1],ie[2]===void 0&&(ie[2]={});const nt={};ie[2][pe.key]===void 0&&(ie[2][pe.key]=this.element({parent:i||"root"},v===!0?y:o)),nt.w=80,nt.h=80,nt.x=pe.item,nt.color="0x4d7c0fff",ie[2][pe.key].nodeId===void 0&&ie[2][pe.key].populate(nt)}return At};let B;const G=()=>{o[Symbol.for("removeGlobalEffects")](B),B=null,B=z(o.collection1,s,_)};o[Symbol.for("effects")].push(G),g(G,["collection1"]),i=s[0];const X={};s[3]=this.element({parent:i||"root"},v===!0?y:o),X.y=120,s[3].populate(X),i=s[3];const Q=[];let W,te;const de=(Ge=[],ie,We)=>{const qe=x(Ge),Ze=new Set;let Me=qe.length;const Be={};for(W=Be.from||0,te=("to"in Be)?Be.to:qe.length;Me--;){const Ce=qe[Me];Me<te&&Me>=W&&Ze.add(""+Ce.id)}let ht=We.length;for(;ht--;)if(Ze.has(We[ht])===!1){const Ce=We[ht];ie[4][Ce]&&ie[4][Ce].destroy(),delete ie[4][Ce]}We.length=0;const Pt=qe.length,At=[];for(let Ce=0;Ce<Pt;Ce++){if(Ce<W||Ce>=te)continue;const pe=Object.create(o);i=ie[3],pe.item=qe[Ce],pe.index=Ce,pe.key=""+pe.item.id,We.push(pe.key),i=ie[3],ie[4]===void 0&&(ie[4]={});const nt={};ie[4][pe.key]===void 0&&(ie[4][pe.key]=this.element({parent:i||"root"},v===!0?y:o)),nt.w=80,nt.h=80,nt.x=pe.item.x*pe.index,nt.color=pe.item.color,ie[4][pe.key].nodeId===void 0&&ie[4][pe.key].populate(nt);let Bt=()=>{ie[4][pe.key].set("x",pe.item.x*pe.index)};g(Bt,null),At.push(Bt),o[Symbol.for("effects")].push(Bt)}return At};let I;const q=()=>{o[Symbol.for("removeGlobalEffects")](I),I=null,I=de(o.collection2,s,Q)};o[Symbol.for("effects")].push(q),g(q,["collection2"]),i=s[0];const ee={};s[5]=this.element({parent:i||"root"},v===!0?y:o),ee.y=220,s[5].populate(ee),i=s[5];const ae=[];let ne,Y;const Z=(Ge=[],ie,We)=>{const qe=x(Ge),Ze=new Set;let Me=qe.length;const Be={};for(ne=Be.from||0,Y=("to"in Be)?Be.to:qe.length;Me--;)qe[Me],Me<Y&&Me>=ne&&Ze.add(""+Me);let ht=We.length;for(;ht--;)if(Ze.has(We[ht])===!1){const Ce=We[ht];ie[6][Ce]&&ie[6][Ce].destroy(),delete ie[6][Ce]}We.length=0;const Pt=qe.length,At=[];for(let Ce=0;Ce<Pt;Ce++){if(Ce<ne||Ce>=Y)continue;const pe=Object.create(o);i=ie[5],pe.item=qe[Ce],pe.undefined=Ce,pe.key=""+Ce,We.push(pe.key),i=ie[5],ie[6]===void 0&&(ie[6]={});const nt={};ie[6][pe.key]===void 0&&(ie[6][pe.key]=this.element({parent:i||"root"},v===!0?y:o)),nt.w=80,nt.h=80,nt.x=pe.item.x,nt.color=pe.item.color,ie[6][pe.key].nodeId===void 0&&ie[6][pe.key].populate(nt);let Bt=()=>{ie[6][pe.key].set("x",pe.item.x)};g(Bt,null),At.push(Bt),o[Symbol.for("effects")].push(Bt)}return At};let j;const fe=()=>{o[Symbol.for("removeGlobalEffects")](j),j=null,j=Z(o.collection3,s,ae)};o[Symbol.for("effects")].push(fe),g(fe,["collection3"]),i=s[0];const he={};s[7]=this.element({parent:i||"root"},v===!0?y:o),he.y=320,s[7].populate(he),i=s[7];const we=[];let ge,be;const Ie=(Ge=[],ie,We)=>{const qe=x(Ge),Ze=new Set;let Me=qe.length;const Be={};for(ge=Be.from||0,be=("to"in Be)?Be.to:qe.length;Me--;)qe[Me],Me<be&&Me>=ge&&Ze.add(""+Me);let ht=We.length;for(;ht--;)if(Ze.has(We[ht])===!1){const Ce=We[ht];ie[8][Ce]&&ie[8][Ce].destroy(),delete ie[8][Ce],ie[9][Ce]&&ie[9][Ce].destroy(),delete ie[9][Ce]}We.length=0;const Pt=qe.length,At=[];for(let Ce=0;Ce<Pt;Ce++){if(Ce<ge||Ce>=be)continue;const pe=Object.create(o);i=ie[7],pe.item=qe[Ce],pe.index=Ce,pe.key=""+Ce,We.push(pe.key);const nt=l.components&&l.components.Square||h.Square;ie[8]===void 0&&(ie[8]={});const Bt={};ie[8][pe.key]===void 0&&(ie[8][pe.key]=this.element({parent:i||"root"},v===!0?y:o)),Bt.x=pe.item.x*pe.index,Bt.ref="square"+pe.index,Bt.alpha=pe.alpha;const zn=[];if(typeof nt<"u")for(let Le in nt[Symbol.for("config")].props)delete Bt[nt[Symbol.for("config")].props[Le]],zn.push(nt[Symbol.for("config")].props[Le]);ie[8][pe.key].nodeId===void 0&&ie[8][pe.key].populate(Bt),ie[9]===void 0&&(ie[9]={}),i=ie[8][pe.key];const yn={};if(ie[9][pe.key]===void 0){C=pe.item.x*pe.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),yn.x=C,C="square"+pe.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),yn.ref=C,C=pe.alpha,Array.isArray(C)===!0&&(C=x(C).slice(0)),yn.alpha=C,m=yn.is||"Square";let Le;if(typeof m=="string"){if(Le=l.components&&l.components[m]||h[m],!Le)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Le=m);ie[9][pe.key]=Le.call(null,{props:yn},ie[8][pe.key],o),ie[9][pe.key][Symbol.for("slots")][0]?(i=ie[9][pe.key][Symbol.for("slots")][0],y=ie[9][pe.key],v=!0):i=ie[9][pe.key][Symbol.for("children")][0]}let Yn=()=>{(typeof zn>"u"||zn.indexOf("x")===-1)&&ie[8][pe.key].set("x",pe.item.x*pe.index)};g(Yn,null),At.push(Yn),o[Symbol.for("effects")].push(Yn);let Fe=()=>{(typeof zn>"u"||zn.indexOf("ref")===-1)&&ie[8][pe.key].set("ref","square"+pe.index)};g(Fe,null),At.push(Fe),o[Symbol.for("effects")].push(Fe),ie[9][pe.key][Symbol.for("props")].x=pe.item.x*pe.index,ie[9][pe.key][Symbol.for("props")].ref="square"+pe.index}return At};let V;const De=()=>{o[Symbol.for("removeGlobalEffects")](V),V=null,V=Ie(o.collection2,s,we)};o[Symbol.for("effects")].push(De),g(De,["collection2"]);const Se=()=>{o.alpha;for(let Ge=0;Ge<o.collection2.length;Ge++){if(Ge<ge||Ge>=be)continue;const ie={};ie.index=Ge,ie.item=o.collection2[Ge],ie.key=Ge,(typeof skip8>"u"||skip8.indexOf("alpha")===-1)&&s[8][ie.key].set("alpha",o.alpha)}};o[Symbol.for("effects")].push(Se),g(Se);const me=()=>{o.alpha;for(let Ge=0;Ge<o.collection2.length;Ge++){if(Ge<ge||Ge>=be)continue;const ie={};ie.index=Ge,ie.item=o.collection2[Ge],ie.key=Ge,s[9][ie.key][Symbol.for("props")].alpha=o.alpha}};o[Symbol.for("effects")].push(me),g(me),i=s[0];const Re={};s[10]=this.element({parent:i||"root"},v===!0?y:o),Re.y=420,s[10].populate(Re),i=s[10];const Ne=[];let $e,Pe;const ve=(Ge=[],ie,We)=>{const qe=x(Ge),Ze=new Set;let Me=qe.length;const Be={};for($e=Be.from||0,Pe=("to"in Be)?Be.to:qe.length;Me--;){const Ce=qe[Me];Me<Pe&&Me>=$e&&Ze.add(""+Ce.color)}let ht=We.length;for(;ht--;)if(Ze.has(We[ht])===!1){const Ce=We[ht];ie[11][Ce]&&ie[11][Ce].destroy(),delete ie[11][Ce],ie[12][Ce]&&ie[12][Ce].destroy(),delete ie[12][Ce]}We.length=0;const Pt=qe.length,At=[];for(let Ce=0;Ce<Pt;Ce++){if(Ce<$e||Ce>=Pe)continue;const pe=Object.create(o);i=ie[10],pe.item=qe[Ce],pe.undefined=Ce,pe.key=""+pe.item.color,We.push(pe.key);const nt=l.components&&l.components.Square||h.Square;ie[11]===void 0&&(ie[11]={});const Bt={};ie[11][pe.key]===void 0&&(ie[11][pe.key]=this.element({parent:i||"root"},v===!0?y:o)),Bt.x=pe.item.x,Bt.alpha=pe.alpha;const zn=[];if(typeof nt<"u")for(let Fe in nt[Symbol.for("config")].props)delete Bt[nt[Symbol.for("config")].props[Fe]],zn.push(nt[Symbol.for("config")].props[Fe]);ie[11][pe.key].nodeId===void 0&&ie[11][pe.key].populate(Bt),ie[12]===void 0&&(ie[12]={}),i=ie[11][pe.key];const yn={};if(ie[12][pe.key]===void 0){C=pe.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),yn.x=C,C=pe.alpha,Array.isArray(C)===!0&&(C=x(C).slice(0)),yn.alpha=C,m=yn.is||"Square";let Fe;if(typeof m=="string"){if(Fe=l.components&&l.components[m]||h[m],!Fe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Fe=m);ie[12][pe.key]=Fe.call(null,{props:yn},ie[11][pe.key],o),ie[12][pe.key][Symbol.for("slots")][0]?(i=ie[12][pe.key][Symbol.for("slots")][0],y=ie[12][pe.key],v=!0):i=ie[12][pe.key][Symbol.for("children")][0]}let Yn=()=>{(typeof zn>"u"||zn.indexOf("x")===-1)&&ie[11][pe.key].set("x",pe.item.x)};g(Yn,null),At.push(Yn),o[Symbol.for("effects")].push(Yn),ie[12][pe.key][Symbol.for("props")].x=pe.item.x}return At};let Ye;const it=()=>{o[Symbol.for("removeGlobalEffects")](Ye),Ye=null,Ye=ve(o.collection3,s,Ne)};o[Symbol.for("effects")].push(it),g(it,["collection3"]);const Ke=()=>{o.alpha;for(let Ge=0;Ge<o.collection3.length;Ge++){if(Ge<$e||Ge>=Pe)continue;const ie={};ie.undefined=Ge,ie.item=o.collection3[Ge],ie.key=ie.item.color,(typeof skip11>"u"||skip11.indexOf("alpha")===-1)&&s[11][ie.key].set("alpha",o.alpha)}};o[Symbol.for("effects")].push(Ke),g(Ke);const lt=()=>{o.alpha;for(let Ge=0;Ge<o.collection3.length;Ge++){if(Ge<$e||Ge>=Pe)continue;const ie={};ie.undefined=Ge,ie.item=o.collection3[Ge],ie.key=ie.item.color,s[12][ie.key][Symbol.for("props")].alpha=o.alpha}};o[Symbol.for("effects")].push(lt),g(lt),i=s[0];const St={};s[13]=this.element({parent:i||"root"},v===!0?y:o),St.y=520,s[13].populate(St),i=s[13];const ft=[];let Tt,je;const Dt=(Ge=[],ie,We)=>{const qe=x(Ge),Ze=new Set;let Me=qe.length;const Be={};for(Tt=Be.from||0,je=("to"in Be)?Be.to:qe.length;Me--;)qe[Me],Me<je&&Me>=Tt&&Ze.add(""+Me);let ht=We.length;for(;ht--;)if(Ze.has(We[ht])===!1){const Ce=We[ht];ie[14][Ce]&&ie[14][Ce].destroy(),delete ie[14][Ce]}We.length=0;const Pt=qe.length,At=[];for(let Ce=0;Ce<Pt;Ce++){if(Ce<Tt||Ce>=je)continue;const pe=Object.create(o);i=ie[13],pe.item=qe[Ce],pe.undefined=Ce,pe.key=""+Ce,We.push(pe.key),i=ie[13],ie[14]===void 0&&(ie[14]={});const nt={};ie[14][pe.key]===void 0&&(ie[14][pe.key]=this.element({parent:i||"root"},v===!0?y:o)),nt.w=80,nt.h=80,nt.x=pe.item,nt.color="0xeab308ff",nt.alpha=pe.alpha,ie[14][pe.key].nodeId===void 0&&ie[14][pe.key].populate(nt)}return At};let wt;const Qe=()=>{o[Symbol.for("removeGlobalEffects")](wt),wt=null,wt=Dt(o.collection1,s,ft)};o[Symbol.for("effects")].push(Qe),g(Qe,["collection1"]);const gn=()=>{o.item;for(let Ge=0;Ge<o.collection1.length;Ge++){if(Ge<Tt||Ge>=je)continue;const ie={};ie.undefined=Ge,ie.item=o.collection1[Ge],ie.key=Ge,s[14][ie.key].set("x",ie.item)}};o[Symbol.for("effects")].push(gn),g(gn);const un=()=>{o.alpha;for(let Ge=0;Ge<o.collection1.length;Ge++){if(Ge<Tt||Ge>=je)continue;const ie={};ie.undefined=Ge,ie.item=o.collection1[Ge],ie.key=Ge,s[14][ie.key].set("alpha",o.alpha)}};o[Symbol.for("effects")].push(un),g(un),i=s[0];const qt={};s[15]=this.element({parent:i||"root"},v===!0?y:o),qt.y=620,s[15].populate(qt),i=s[15];const xt=[];let Gt,vt;const Ot=(Ge=[],ie,We)=>{const qe=x(Ge),Ze=new Set;let Me=qe.length;const Be={};for(Gt=Be.from||0,vt=("to"in Be)?Be.to:qe.length;Me--;){const Ce=qe[Me];Me<vt&&Me>=Gt&&Ze.add(""+Ce.id)}let ht=We.length;for(;ht--;)if(Ze.has(We[ht])===!1){const Ce=We[ht];ie[16][Ce]&&ie[16][Ce].destroy(),delete ie[16][Ce]}We.length=0;const Pt=qe.length,At=[];for(let Ce=0;Ce<Pt;Ce++){if(Ce<Gt||Ce>=vt)continue;const pe=Object.create(o);i=ie[15],pe.item=qe[Ce],pe.undefined=Ce,pe.key=""+pe.item.id,We.push(pe.key),i=ie[15],ie[16]===void 0&&(ie[16]={});const nt={};ie[16][pe.key]===void 0&&(ie[16][pe.key]=this.element({parent:i||"root"},v===!0?y:o)),nt.w=80,nt.h=80,nt.x=pe.item.x,nt.color=pe.item.color,nt.alpha=pe.alpha,ie[16][pe.key].nodeId===void 0&&ie[16][pe.key].populate(nt);let Bt=()=>{ie[16][pe.key].set("x",pe.item.x)};g(Bt,null),At.push(Bt),o[Symbol.for("effects")].push(Bt)}return At};let uo;const bt=()=>{o[Symbol.for("removeGlobalEffects")](uo),uo=null,uo=Ot(o.collection2,s,xt)};o[Symbol.for("effects")].push(bt),g(bt,["collection2"]);const jt=()=>{o.alpha;for(let Ge=0;Ge<o.collection2.length;Ge++){if(Ge<Gt||Ge>=vt)continue;const ie={};ie.undefined=Ge,ie.item=o.collection2[Ge],ie.key=ie.item.id,s[16][ie.key].set("alpha",o.alpha)}};o[Symbol.for("effects")].push(jt),g(jt),i=s[0];const kn={};s[17]=this.element({parent:i||"root"},v===!0?y:o),kn.y=720,s[17].populate(kn),i=s[17];const to=[];let Et,En;const Jo=(Ge=[],ie,We)=>{const qe=x(Ge),Ze=new Set;let Me=qe.length;const Be={};for(Et=Be.from||0,En=("to"in Be)?Be.to:qe.length;Me--;){const Ce=qe[Me];Me<En&&Me>=Et&&Ze.add(""+Ce.id)}let ht=We.length;for(;ht--;)if(Ze.has(We[ht])===!1){const Ce=We[ht];ie[18][Ce]&&ie[18][Ce].destroy(),delete ie[18][Ce]}We.length=0;const Pt=qe.length,At=[];for(let Ce=0;Ce<Pt;Ce++){if(Ce<Et||Ce>=En)continue;const pe=Object.create(o);i=ie[17],pe.item=qe[Ce],pe.undefined=Ce,pe.key=""+pe.item.id,We.push(pe.key),i=ie[17],ie[18]===void 0&&(ie[18]={});const nt={};ie[18][pe.key]===void 0&&(ie[18][pe.key]=this.element({parent:i||"root"},v===!0?y:o)),nt.w=80,nt.h=80,nt.x=pe.item.x,nt.color="0x06b6d4ff",ie[18][pe.key].nodeId===void 0&&ie[18][pe.key].populate(nt);let Bt=()=>{ie[18][pe.key].set("x",pe.item.x)};g(Bt,null),At.push(Bt),o[Symbol.for("effects")].push(Bt)}return At};let Qt;const Rn=()=>{o[Symbol.for("removeGlobalEffects")](Qt),Qt=null,Qt=Jo(o.collection4,s,to)};o[Symbol.for("effects")].push(Rn),g(Rn,["collection4"]),i=s[0];const Mo={};s[19]=this.element({parent:i||"root"},v===!0?y:o),Mo.y=720,Mo.x=700,s[19].populate(Mo),i=s[19];const Ln=[];let Kn,ro;const Dn=(Ge=[],ie,We)=>{const qe=x(Ge),Ze=new Set;let Me=qe.length;const Be={};for(Kn=Be.from||0,ro=("to"in Be)?Be.to:qe.length;Me--;)qe[Me],Me<ro&&Me>=Kn&&Ze.add(""+Me);let ht=We.length;for(;ht--;)if(Ze.has(We[ht])===!1){const Ce=We[ht];ie[20][Ce]&&ie[20][Ce].destroy(),delete ie[20][Ce]}We.length=0;const Pt=qe.length,At=[];for(let Ce=0;Ce<Pt;Ce++){if(Ce<Kn||Ce>=ro)continue;const pe=Object.create(o);i=ie[19],pe.item=qe[Ce],pe.undefined=Ce,pe.key=""+Ce,We.push(pe.key),i=ie[19],ie[20]===void 0&&(ie[20]={});const nt={};ie[20][pe.key]===void 0&&(ie[20][pe.key]=this.element({parent:i||"root"},v===!0?y:o)),nt.w=80,nt.h=80,nt.x=pe.item.x,nt.color="0x8b5cf6ff",ie[20][pe.key].nodeId===void 0&&ie[20][pe.key].populate(nt);let Bt=()=>{ie[20][pe.key].set("x",pe.item.x)};g(Bt,null),At.push(Bt),o[Symbol.for("effects")].push(Bt)}return At};let st;const _o=()=>{o[Symbol.for("removeGlobalEffects")](st),st=null,st=Dn(o.collection4,s,Ln)};o[Symbol.for("effects")].push(_o),g(_o,["collection4"]),i=s[0];const hn={};s[21]=this.element({parent:i||"root"},v===!0?y:o),hn.y=920,s[21].populate(hn),i=s[21];const ei=[];let Fn,fn;const $n=(Ge=[],ie,We)=>{const qe=x(Ge),Ze=new Set;let Me=qe.length;const Be={};for(Fn=Be.from||0,fn=("to"in Be)?Be.to:qe.length;Me--;){const Ce=qe[Me];Me<fn&&Me>=Fn&&Ze.add(""+Ce.id)}let ht=We.length;for(;ht--;)if(Ze.has(We[ht])===!1){const Ce=We[ht];ie[22][Ce]&&ie[22][Ce].destroy(),delete ie[22][Ce],ie[23][Ce]&&ie[23][Ce].destroy(),delete ie[23][Ce]}We.length=0;const Pt=qe.length,At=[];for(let Ce=0;Ce<Pt;Ce++){if(Ce<Fn||Ce>=fn)continue;const pe=Object.create(o);i=ie[21],pe.item=qe[Ce],pe.undefined=Ce,pe.key=""+pe.item.id,We.push(pe.key);const nt=l.components&&l.components.Square||h.Square;ie[22]===void 0&&(ie[22]={});const Bt={};ie[22][pe.key]===void 0&&(ie[22][pe.key]=this.element({parent:i||"root"},v===!0?y:o)),Bt.w=80,Bt.h=80,Bt.x=pe.item.x;const zn=[];if(typeof nt<"u")for(let Fe in nt[Symbol.for("config")].props)delete Bt[nt[Symbol.for("config")].props[Fe]],zn.push(nt[Symbol.for("config")].props[Fe]);ie[22][pe.key].nodeId===void 0&&ie[22][pe.key].populate(Bt),ie[23]===void 0&&(ie[23]={}),i=ie[22][pe.key];const yn={};if(ie[23][pe.key]===void 0){yn.w=80,yn.h=80,C=pe.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),yn.x=C,m=yn.is||"Square";let Fe;if(typeof m=="string"){if(Fe=l.components&&l.components[m]||h[m],!Fe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Fe=m);ie[23][pe.key]=Fe.call(null,{props:yn},ie[22][pe.key],o),ie[23][pe.key][Symbol.for("slots")][0]?(i=ie[23][pe.key][Symbol.for("slots")][0],y=ie[23][pe.key],v=!0):i=ie[23][pe.key][Symbol.for("children")][0]}let Yn=()=>{(typeof zn>"u"||zn.indexOf("x")===-1)&&ie[22][pe.key].set("x",pe.item.x)};g(Yn,null),At.push(Yn),o[Symbol.for("effects")].push(Yn),ie[23][pe.key][Symbol.for("props")].x=pe.item.x}return At};let no;const An=()=>{o[Symbol.for("removeGlobalEffects")](no),no=null,no=$n(o.collection4,s,ei)};o[Symbol.for("effects")].push(An),g(An,["collection4"]),i=s[0];const In={};s[24]=this.element({parent:i||"root"},v===!0?y:o),In.y=920,In.x=700,s[24].populate(In),i=s[24];const ot=[];let Ve,Zt;const wn=(Ge=[],ie,We)=>{const qe=x(Ge),Ze=new Set;let Me=qe.length;const Be={};for(Ve=Be.from||0,Zt=("to"in Be)?Be.to:qe.length;Me--;)qe[Me],Me<Zt&&Me>=Ve&&Ze.add(""+Me);let ht=We.length;for(;ht--;)if(Ze.has(We[ht])===!1){const Ce=We[ht];ie[25][Ce]&&ie[25][Ce].destroy(),delete ie[25][Ce],ie[26][Ce]&&ie[26][Ce].destroy(),delete ie[26][Ce]}We.length=0;const Pt=qe.length,At=[];for(let Ce=0;Ce<Pt;Ce++){if(Ce<Ve||Ce>=Zt)continue;const pe=Object.create(o);i=ie[24],pe.item=qe[Ce],pe.undefined=Ce,pe.key=""+Ce,We.push(pe.key);const nt=l.components&&l.components.Square||h.Square;ie[25]===void 0&&(ie[25]={});const Bt={};ie[25][pe.key]===void 0&&(ie[25][pe.key]=this.element({parent:i||"root"},v===!0?y:o)),Bt.w=80,Bt.h=80,Bt.x=pe.item.x;const zn=[];if(typeof nt<"u")for(let Fe in nt[Symbol.for("config")].props)delete Bt[nt[Symbol.for("config")].props[Fe]],zn.push(nt[Symbol.for("config")].props[Fe]);ie[25][pe.key].nodeId===void 0&&ie[25][pe.key].populate(Bt),ie[26]===void 0&&(ie[26]={}),i=ie[25][pe.key];const yn={};if(ie[26][pe.key]===void 0){yn.w=80,yn.h=80,C=pe.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),yn.x=C,m=yn.is||"Square";let Fe;if(typeof m=="string"){if(Fe=l.components&&l.components[m]||h[m],!Fe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Fe=m);ie[26][pe.key]=Fe.call(null,{props:yn},ie[25][pe.key],o),ie[26][pe.key][Symbol.for("slots")][0]?(i=ie[26][pe.key][Symbol.for("slots")][0],y=ie[26][pe.key],v=!0):i=ie[26][pe.key][Symbol.for("children")][0]}let Yn=()=>{(typeof zn>"u"||zn.indexOf("x")===-1)&&ie[25][pe.key].set("x",pe.item.x)};g(Yn,null),At.push(Yn),o[Symbol.for("effects")].push(Yn),ie[26][pe.key][Symbol.for("props")].x=pe.item.x}return At};let Bn;const Ct=()=>{o[Symbol.for("removeGlobalEffects")](Bn),Bn=null,Bn=wn(o.collection4,s,ot)};return o[Symbol.for("effects")].push(Ct),g(Ct,["collection4"]),s},effects:[],context:{}},state(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:ci[0]},{id:"block2",x:100,color:ci[1]},{id:"block3",x:200,color:ci[2]},{id:"block4",x:300,color:ci[3]},{id:"block5",x:400,color:ci[4]},{id:"block6",x:500,color:ci[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=ci[5],this.collection2[1].color=ci[4],this.collection2[2].color=ci[3],this.collection2[3].color=ci[2],this.collection2[4].color=ci[1],this.collection2[5].color=ci[0]},4e3);let f=0;const i=this.$setInterval(()=>{this.collection3.push({x:f*100,color:ci[f]}),f++,f===ci.length&&clearInterval(i)},1e3);this.$setInterval(()=>{this.alpha=this.alpha===.5?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),OC=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],NC=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],UC=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],K0=f=>Math.round(Math.random()*1e3)%f;let t6=0;const $u=()=>({id:t6++,text:`${OC[K0(OC.length)]} ${NC[K0(NC.length)]} ${UC[K0(UC.length)]}`}),n6=(f=1)=>{const i=[];for(let o=0;o<f;o++)i.push($u());return i},o6=tt.Component("LegendItem",{code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(v-=1);const b=l.components&&l.components.Circle||h.Circle;i=s[0];const _={};s[1]=this.element({parent:i||"root"},y===!0?C:o),_.color="0xfb923cff",_.size=60;const U=[];if(typeof b<"u")for(let X in b[Symbol.for("config")].props)delete _[b[Symbol.for("config")].props[X]],U.push(b[Symbol.for("config")].props[X]);s[1].populate(_),y===!0&&(v-=1),i=s[1];const F={};F.color="0xfb923cff",F.size=60,m=F.is||"Circle";let z;if(typeof m=="string"){if(z=l.components&&l.components[m]||h[m],!z)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[2]=z.call(null,{props:F},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],C=s[2],y=!0):i=s[2][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),i=s[0];const B={};s[3]=this.element({parent:i||"root"},y===!0?C:o),B.color="0xe5e5e5ff",B.size=32,B.y=10,B.maxwidth=57,B.align="center",B.content=""+o.id,B.__textnode=!0,s[3].populate(B),y===!0&&(v-=1),i=s[0];const G={};return s[4]=this.element({parent:i||"root"},y===!0?C:o),G.color="0xe5e5e5ff",G.x=80,G.y=14,G.size=28,G.content=""+o.text,G.__textnode=!0,s[4].populate(G),y===!0&&(v-=1),s},effects:[],context:{}},props:["id","text"]}),VT=tt.Component("Row",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=380,m.h=60,m.y=o.index*80,m.color="0xfff7edff",s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=10,C.h=60,C.color="0x06b6d4ff",s[1].populate(C),i=s[0];const y={};return s[2]=this.element({parent:i||"root"},o),y.content=o.text,y.x=30,y.y=15,y.font="lato",y.size=28,y.color=o.activeRow==o.index?"0x06b6d4ff":"0x1e293bff",y.__textnode=!0,s[2].populate(y),s},effects:[function(i,o,l,h,g,x){o[0].set("y",i.index*80)},function(i,o,l,h,g,x){o[2].set("content",i.text)},function(i,o,l,h,g,x){o[2].set("color",i.activeRow==i.index?"0x06b6d4ff":"0x1e293bff")}],context:{}},props:["index","text","activeRow"]}),i6=tt.Component("Rows",{components:{Row:VT},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1;const M={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(M),i=s[0];const b=[];let _,U;const F=(Q=[],W,te)=>{const de=x(Q),I=new Set;let q=de.length;const ee={};for(_=ee.from||0,U=("to"in ee)?ee.to:de.length;q--;){const Z=de[q];q<U&&q>=_&&I.add(""+Z.id+"key2")}let ae=te.length;for(;ae--;)if(I.has(te[ae])===!1){const Z=te[ae];W[1][Z]&&W[1][Z].destroy(),delete W[1][Z],W[2][Z]&&W[2][Z].destroy(),delete W[2][Z]}te.length=0;const ne=de.length,Y=[];for(let Z=0;Z<ne;Z++){if(Z<_||Z>=U)continue;const j=Object.create(o);i=W[0],j.item=de[Z],j.index=Z,j.key=""+j.item.id+"key2",te.push(j.key);const fe=l.components&&l.components.Row||h.Row;W[1]===void 0&&(W[1]={});const he={};W[1][j.key]===void 0&&(W[1][j.key]=this.element({parent:i||"root"},v===!0?y:o)),he.activeRow=j.activeRowIndex,he.index=j.index,he.text=j.item.text,he.y=50;const we=[];if(typeof fe<"u")for(let V in fe[Symbol.for("config")].props)delete he[fe[Symbol.for("config")].props[V]],we.push(fe[Symbol.for("config")].props[V]);W[1][j.key].nodeId===void 0&&W[1][j.key].populate(he),W[2]===void 0&&(W[2]={}),i=W[1][j.key];const ge={};if(W[2][j.key]===void 0){C=j.activeRowIndex,Array.isArray(C)===!0&&(C=x(C).slice(0)),ge.activeRow=C,C=j.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),ge.index=C,C=j.item.text,Array.isArray(C)===!0&&(C=x(C).slice(0)),ge.text=C,ge.y=50,m=ge.is||"Row";let V;if(typeof m=="string"){if(V=l.components&&l.components[m]||h[m],!V)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);W[2][j.key]=V.call(null,{props:ge},W[1][j.key],o),W[2][j.key][Symbol.for("slots")][0]?(i=W[2][j.key][Symbol.for("slots")][0],y=W[2][j.key],v=!0):i=W[2][j.key][Symbol.for("children")][0]}let be=()=>{(typeof we>"u"||we.indexOf("index")===-1)&&W[1][j.key].set("index",j.index)};g(be,null),Y.push(be),o[Symbol.for("effects")].push(be);let Ie=()=>{(typeof we>"u"||we.indexOf("text")===-1)&&W[1][j.key].set("text",j.item.text)};g(Ie,null),Y.push(Ie),o[Symbol.for("effects")].push(Ie),W[2][j.key][Symbol.for("props")].index=j.index,W[2][j.key][Symbol.for("props")].text=j.item.text}return Y};let z;const B=()=>{o[Symbol.for("removeGlobalEffects")](z),z=null,z=F(o.data,s,b)};o[Symbol.for("effects")].push(B),g(B,["data"]);const G=()=>{o.activeRowIndex;for(let Q=0;Q<o.data.length;Q++){if(Q<_||Q>=U)continue;const W={};W.index=Q,W.item=o.data[Q],W.key=W.item.id+"key2",(typeof skip1>"u"||skip1.indexOf("activeRow")===-1)&&s[1][W.key].set("activeRow",o.activeRowIndex)}};o[Symbol.for("effects")].push(G),g(G);const X=()=>{o.activeRowIndex;for(let Q=0;Q<o.data.length;Q++){if(Q<_||Q>=U)continue;const W={};W.index=Q,W.item=o.data[Q],W.key=W.item.id+"key2",s[2][W.key][Symbol.for("props")].activeRow=o.activeRowIndex}};return o[Symbol.for("effects")].push(X),g(X),s},effects:[],context:{}},props:["data","activeRowIndex"]}),r6=tt.Component("ForLoop",{components:{Square:dl,LegendItem:o6,Row:VT,Rows:i6},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(b),v===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},v===!0?y:o),_.x=100,_.y=60,_.size=48,_.content="Array operations test",_.__textnode=!0,s[1].populate(_),v===!0&&(M-=1),i=s[0];const U={};s[2]=this.element({parent:i||"root"},v===!0?y:o),U.y=170,U.x=140,s[2].populate(U),v===!0&&(M-=1),i=s[2];const F={};s[3]=this.element({parent:i||"root"},v===!0?y:o),F.x="-10",F.w=500,F.h=80,F.color="0x64748bff",F.y={transition:o.y},F.alpha={transition:!o.hide},s[3].populate(F),v===!0&&(M-=1);const z=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const B={};s[4]=this.element({parent:i||"root"},v===!0?y:o),B.y=0,B.id="a",B.text="Fill array by assignment";const G=[];if(typeof z<"u")for(let ot in z[Symbol.for("config")].props)delete B[z[Symbol.for("config")].props[ot]],G.push(z[Symbol.for("config")].props[ot]);s[4].populate(B),v===!0&&(M-=1),i=s[4];const X={};X.y=0,X.id="a",X.text="Fill array by assignment",m=X.is||"LegendItem";let Q;if(typeof m=="string"){if(Q=l.components&&l.components[m]||h[m],!Q)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Q=m);s[5]=Q.call(null,{props:X},s[4],o),s[5][Symbol.for("slots")][0]?(i=s[5][Symbol.for("slots")][0],y=s[5],v=!0):i=s[5][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const W=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const te={};s[6]=this.element({parent:i||"root"},v===!0?y:o),te.y=90,te.id="b",te.text="Push new item to array";const de=[];if(typeof W<"u")for(let ot in W[Symbol.for("config")].props)delete te[W[Symbol.for("config")].props[ot]],de.push(W[Symbol.for("config")].props[ot]);s[6].populate(te),v===!0&&(M-=1),i=s[6];const I={};I.y=90,I.id="b",I.text="Push new item to array",m=I.is||"LegendItem";let q;if(typeof m=="string"){if(q=l.components&&l.components[m]||h[m],!q)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(q=m);s[7]=q.call(null,{props:I},s[6],o),s[7][Symbol.for("slots")][0]?(i=s[7][Symbol.for("slots")][0],y=s[7],v=!0):i=s[7][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const ee=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const ae={};s[8]=this.element({parent:i||"root"},v===!0?y:o),ae.y=180,ae.id="c",ae.text="Pop item from array";const ne=[];if(typeof ee<"u")for(let ot in ee[Symbol.for("config")].props)delete ae[ee[Symbol.for("config")].props[ot]],ne.push(ee[Symbol.for("config")].props[ot]);s[8].populate(ae),v===!0&&(M-=1),i=s[8];const Y={};Y.y=180,Y.id="c",Y.text="Pop item from array",m=Y.is||"LegendItem";let Z;if(typeof m=="string"){if(Z=l.components&&l.components[m]||h[m],!Z)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Z=m);s[9]=Z.call(null,{props:Y},s[8],o),s[9][Symbol.for("slots")][0]?(i=s[9][Symbol.for("slots")][0],y=s[9],v=!0):i=s[9][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const j=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const fe={};s[10]=this.element({parent:i||"root"},v===!0?y:o),fe.y=270,fe.id="d",fe.text="Shift item from array";const he=[];if(typeof j<"u")for(let ot in j[Symbol.for("config")].props)delete fe[j[Symbol.for("config")].props[ot]],he.push(j[Symbol.for("config")].props[ot]);s[10].populate(fe),v===!0&&(M-=1),i=s[10];const we={};we.y=270,we.id="d",we.text="Shift item from array",m=we.is||"LegendItem";let ge;if(typeof m=="string"){if(ge=l.components&&l.components[m]||h[m],!ge)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ge=m);s[11]=ge.call(null,{props:we},s[10],o),s[11][Symbol.for("slots")][0]?(i=s[11][Symbol.for("slots")][0],y=s[11],v=!0):i=s[11][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const be=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const Ie={};s[12]=this.element({parent:i||"root"},v===!0?y:o),Ie.y=360,Ie.id="e",Ie.text="Splice 2 items from array";const V=[];if(typeof be<"u")for(let ot in be[Symbol.for("config")].props)delete Ie[be[Symbol.for("config")].props[ot]],V.push(be[Symbol.for("config")].props[ot]);s[12].populate(Ie),v===!0&&(M-=1),i=s[12];const De={};De.y=360,De.id="e",De.text="Splice 2 items from array",m=De.is||"LegendItem";let Se;if(typeof m=="string"){if(Se=l.components&&l.components[m]||h[m],!Se)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Se=m);s[13]=Se.call(null,{props:De},s[12],o),s[13][Symbol.for("slots")][0]?(i=s[13][Symbol.for("slots")][0],y=s[13],v=!0):i=s[13][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const me=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const Re={};s[14]=this.element({parent:i||"root"},v===!0?y:o),Re.y=450,Re.id="f",Re.text="Unshift 2 items into array";const Ne=[];if(typeof me<"u")for(let ot in me[Symbol.for("config")].props)delete Re[me[Symbol.for("config")].props[ot]],Ne.push(me[Symbol.for("config")].props[ot]);s[14].populate(Re),v===!0&&(M-=1),i=s[14];const $e={};$e.y=450,$e.id="f",$e.text="Unshift 2 items into array",m=$e.is||"LegendItem";let Pe;if(typeof m=="string"){if(Pe=l.components&&l.components[m]||h[m],!Pe)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Pe=m);s[15]=Pe.call(null,{props:$e},s[14],o),s[15][Symbol.for("slots")][0]?(i=s[15][Symbol.for("slots")][0],y=s[15],v=!0):i=s[15][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const ve=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const Ye={};s[16]=this.element({parent:i||"root"},v===!0?y:o),Ye.y=540,Ye.id="g",Ye.text="Empty array by assignment";const it=[];if(typeof ve<"u")for(let ot in ve[Symbol.for("config")].props)delete Ye[ve[Symbol.for("config")].props[ot]],it.push(ve[Symbol.for("config")].props[ot]);s[16].populate(Ye),v===!0&&(M-=1),i=s[16];const Ke={};Ke.y=540,Ke.id="g",Ke.text="Empty array by assignment",m=Ke.is||"LegendItem";let lt;if(typeof m=="string"){if(lt=l.components&&l.components[m]||h[m],!lt)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(lt=m);s[17]=lt.call(null,{props:Ke},s[16],o),s[17][Symbol.for("slots")][0]?(i=s[17][Symbol.for("slots")][0],y=s[17],v=!0):i=s[17][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const St=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const ft={};s[18]=this.element({parent:i||"root"},v===!0?y:o),ft.y=630,ft.id="h",ft.text="Concat an array with items";const Tt=[];if(typeof St<"u")for(let ot in St[Symbol.for("config")].props)delete ft[St[Symbol.for("config")].props[ot]],Tt.push(St[Symbol.for("config")].props[ot]);s[18].populate(ft),v===!0&&(M-=1),i=s[18];const je={};je.y=630,je.id="h",je.text="Concat an array with items",m=je.is||"LegendItem";let Dt;if(typeof m=="string"){if(Dt=l.components&&l.components[m]||h[m],!Dt)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Dt=m);s[19]=Dt.call(null,{props:je},s[18],o),s[19][Symbol.for("slots")][0]?(i=s[19][Symbol.for("slots")][0],y=s[19],v=!0):i=s[19][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const wt=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const Qe={};s[20]=this.element({parent:i||"root"},v===!0?y:o),Qe.y=720,Qe.id="i",Qe.text="Sort array alphabetically";const gn=[];if(typeof wt<"u")for(let ot in wt[Symbol.for("config")].props)delete Qe[wt[Symbol.for("config")].props[ot]],gn.push(wt[Symbol.for("config")].props[ot]);s[20].populate(Qe),v===!0&&(M-=1),i=s[20];const un={};un.y=720,un.id="i",un.text="Sort array alphabetically",m=un.is||"LegendItem";let qt;if(typeof m=="string"){if(qt=l.components&&l.components[m]||h[m],!qt)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(qt=m);s[21]=qt.call(null,{props:un},s[20],o),s[21][Symbol.for("slots")][0]?(i=s[21][Symbol.for("slots")][0],y=s[21],v=!0):i=s[21][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[2];const xt={};s[22]=this.element({parent:i||"root"},v===!0?y:o),xt.y=840,s[22].populate(xt),v===!0&&(M-=1),i=s[22];const Gt={};s[23]=this.element({parent:i||"root"},v===!0?y:o),Gt.size=26,Gt.y=10,Gt.content="Array length:",Gt.__textnode=!0,s[23].populate(Gt),v===!0&&(M-=1),i=s[22];const vt={};s[24]=this.element({parent:i||"root"},v===!0?y:o),vt.content=o.data.length,vt.size=40,vt.x=180,vt.color="0xfb923cff",vt.__textnode=!0,s[24].populate(vt),v===!0&&(M-=1),i=s[0];const Ot={};s[25]=this.element({parent:i||"root"},v===!0?y:o),Ot.x=660,Ot.y=100,s[25].populate(Ot),v===!0&&(M-=1),i=s[25];const uo={};s[26]=this.element({parent:i||"root"},v===!0?y:o),uo.content="For loop on Element",uo.__textnode=!0,s[26].populate(uo),v===!0&&(M-=1),i=s[25];const bt=[];let jt,kn;const to=(ot=[],Ve,Zt)=>{const wn=x(ot),Bn=new Set;let Ct=wn.length;const Ge={};for(jt=Ge.from||0,kn=("to"in Ge)?Ge.to:wn.length;Ct--;){const Ze=wn[Ct];Ct<kn&&Ct>=jt&&Bn.add(""+Ze.id+"key")}let ie=Zt.length;for(;ie--;)if(Bn.has(Zt[ie])===!1){const Ze=Zt[ie];Ve[27][Ze]&&Ve[27][Ze].destroy(),delete Ve[27][Ze],Ve[28][Ze]&&Ve[28][Ze].destroy(),delete Ve[28][Ze],Ve[29][Ze]&&Ve[29][Ze].destroy(),delete Ve[29][Ze]}Zt.length=0;const We=wn.length,qe=[];for(let Ze=0;Ze<We;Ze++){if(Ze<jt||Ze>=kn)continue;const Me=Object.create(o);i=Ve[25],Me.item=wn[Ze],Me.index=Ze,Me.key=""+Me.item.id+"key",Zt.push(Me.key),i=Ve[25],Ve[27]===void 0&&(Ve[27]={});const Be={};Ve[27][Me.key]===void 0&&(Ve[27][Me.key]=this.element({parent:i||"root"},v===!0?y:o)),Be.w=380,Be.h=60,Be.y=Me.index*80+50,Be.color="0xfff7edff",Ve[27][Me.key].nodeId===void 0&&(Ve[27][Me.key].populate(Be),v===!0&&(M-=1)),i=Ve[27][Me.key],Ve[28]===void 0&&(Ve[28]={});const ht={};Ve[28][Me.key]===void 0&&(Ve[28][Me.key]=this.element({parent:i||"root"},v===!0?y:o)),ht.w=10,ht.h=60,ht.color="0xfb923cff",Ve[28][Me.key].nodeId===void 0&&(Ve[28][Me.key].populate(ht),v===!0&&(M-=1)),i=Ve[27][Me.key],Ve[29]===void 0&&(Ve[29]={});const Pt={};Ve[29][Me.key]===void 0&&(Ve[29][Me.key]=this.element({parent:i||"root"},v===!0?y:o)),Pt.content=Me.item.text,Pt.x=30,Pt.y=15,Pt.font="lato",Pt.size=28,Pt.color=Me.activeRowIndex===Me.index?"0x06b6d4ff":"0x1e293bff",Pt.__textnode=!0,Ve[29][Me.key].nodeId===void 0&&(Ve[29][Me.key].populate(Pt),v===!0&&(M-=1));let At=()=>{Ve[27][Me.key].set("y",Me.index*80+50)};g(At,null),qe.push(At),o[Symbol.for("effects")].push(At);let Ce=()=>{Ve[29][Me.key].set("content",Me.item.text)};g(Ce,null),qe.push(Ce),o[Symbol.for("effects")].push(Ce)}return qe};let Et;const En=()=>{o[Symbol.for("removeGlobalEffects")](Et),Et=null,Et=to(o.data,s,bt)};o[Symbol.for("effects")].push(En),g(En,["data"]);const Jo=()=>{o.activeRowIndex;for(let ot=0;ot<o.data.length;ot++){if(ot<jt||ot>=kn)continue;const Ve={};Ve.index=ot,Ve.item=o.data[ot],Ve.key=Ve.item.id+"key",s[29][Ve.key].set("color",o.activeRowIndex===Ve.index?"0x06b6d4ff":"0x1e293bff")}};o[Symbol.for("effects")].push(Jo),g(Jo),i=s[0];const Qt={};s[30]=this.element({parent:i||"root"},v===!0?y:o),Qt.x=1080,Qt.y=100,s[30].populate(Qt),v===!0&&(M-=1),i=s[30];const Rn={};s[31]=this.element({parent:i||"root"},v===!0?y:o),Rn.content="For loop on Component",Rn.__textnode=!0,s[31].populate(Rn),v===!0&&(M-=1),i=s[30];const Mo=[];let Ln,Kn;const ro=(ot=[],Ve,Zt)=>{const wn=x(ot),Bn=new Set;let Ct=wn.length;const Ge={};for(Ln=Ge.from||0,Kn=("to"in Ge)?Ge.to:wn.length;Ct--;){const Ze=wn[Ct];Ct<Kn&&Ct>=Ln&&Bn.add(""+Ze.id+"key2")}let ie=Zt.length;for(;ie--;)if(Bn.has(Zt[ie])===!1){const Ze=Zt[ie];Ve[32][Ze]&&Ve[32][Ze].destroy(),delete Ve[32][Ze],Ve[33][Ze]&&Ve[33][Ze].destroy(),delete Ve[33][Ze]}Zt.length=0;const We=wn.length,qe=[];for(let Ze=0;Ze<We;Ze++){if(Ze<Ln||Ze>=Kn)continue;const Me=Object.create(o);i=Ve[30],Me.item=wn[Ze],Me.index=Ze,Me.key=""+Me.item.id+"key2",Zt.push(Me.key);const Be=l.components&&l.components.Row||h.Row;Ve[32]===void 0&&(Ve[32]={});const ht={};Ve[32][Me.key]===void 0&&(Ve[32][Me.key]=this.element({parent:i||"root"},v===!0?y:o)),ht.activeRow=(Me.count>0,Me.activeRowIndex),ht.index=Me.index,ht.text=Me.item.text,ht.y=50;const Pt=[];if(typeof Be<"u")for(let nt in Be[Symbol.for("config")].props)delete ht[Be[Symbol.for("config")].props[nt]],Pt.push(Be[Symbol.for("config")].props[nt]);Ve[32][Me.key].nodeId===void 0&&(Ve[32][Me.key].populate(ht),v===!0&&(M-=1)),Ve[33]===void 0&&(Ve[33]={}),i=Ve[32][Me.key];const At={};if(Ve[33][Me.key]===void 0){C=(Me.count>0,Me.activeRowIndex),Array.isArray(C)===!0&&(C=x(C).slice(0)),At.activeRow=C,C=Me.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),At.index=C,C=Me.item.text,Array.isArray(C)===!0&&(C=x(C).slice(0)),At.text=C,At.y=50,m=At.is||"Row";let nt;if(typeof m=="string"){if(nt=l.components&&l.components[m]||h[m],!nt)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(nt=m);Ve[33][Me.key]=nt.call(null,{props:At},Ve[32][Me.key],o),Ve[33][Me.key][Symbol.for("slots")][0]?(i=Ve[33][Me.key][Symbol.for("slots")][0],y=Ve[33][Me.key],v=!0):i=Ve[33][Me.key][Symbol.for("children")][0]}let Ce=()=>{(typeof Pt>"u"||Pt.indexOf("index")===-1)&&Ve[32][Me.key].set("index",Me.index)};g(Ce,null),qe.push(Ce),o[Symbol.for("effects")].push(Ce);let pe=()=>{(typeof Pt>"u"||Pt.indexOf("text")===-1)&&Ve[32][Me.key].set("text",Me.item.text)};g(pe,null),qe.push(pe),o[Symbol.for("effects")].push(pe),Ve[33][Me.key][Symbol.for("props")].index=Me.index,Ve[33][Me.key][Symbol.for("props")].text=Me.item.text}return qe};let Dn;const st=()=>{o[Symbol.for("removeGlobalEffects")](Dn),Dn=null,Dn=ro(o.data,s,Mo)};o[Symbol.for("effects")].push(st),g(st,["data"]);const _o=()=>{o.activeRowIndex,o.count;for(let ot=0;ot<o.data.length;ot++){if(ot<Ln||ot>=Kn)continue;const Ve={};Ve.index=ot,Ve.item=o.data[ot],Ve.key=Ve.item.id+"key2",(typeof skip32>"u"||skip32.indexOf("activeRow")===-1)&&s[32][Ve.key].set("activeRow",(o.count>0,o.activeRowIndex))}};o[Symbol.for("effects")].push(_o),g(_o);const hn=()=>{o.activeRowIndex,o.count;for(let ot=0;ot<o.data.length;ot++){if(ot<Ln||ot>=Kn)continue;const Ve={};Ve.index=ot,Ve.item=o.data[ot],Ve.key=Ve.item.id+"key2",s[33][Ve.key][Symbol.for("props")].activeRow=(o.count>0,o.activeRowIndex)}};o[Symbol.for("effects")].push(hn),g(hn),i=s[0];const ei={};s[34]=this.element({parent:i||"root"},v===!0?y:o),ei.x=1500,ei.y=100,s[34].populate(ei),v===!0&&(M-=1),i=s[34];const Fn={};s[35]=this.element({parent:i||"root"},v===!0?y:o),Fn.content="RowsComponent",Fn.__textnode=!0,s[35].populate(Fn),v===!0&&(M-=1);const fn=l.components&&l.components.Rows||h.Rows;i=s[34];const $n={};s[36]=this.element({parent:i||"root"},v===!0?y:o),$n.data=o.data,$n.activeRowIndex=o.activeRowIndex;const no=[];if(typeof fn<"u")for(let ot in fn[Symbol.for("config")].props)delete $n[fn[Symbol.for("config")].props[ot]],no.push(fn[Symbol.for("config")].props[ot]);s[36].populate($n),v===!0&&(M-=1),i=s[36];const An={};C=o.data,Array.isArray(C)===!0&&(C=x(C).slice(0)),An.data=C,C=o.activeRowIndex,Array.isArray(C)===!0&&(C=x(C).slice(0)),An.activeRowIndex=C,m=An.is||"Rows";let In;if(typeof m=="string"){if(In=l.components&&l.components[m]||h[m],!In)throw new Error('Component "Rows" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(In=m);return s[37]=In.call(null,{props:An},s[36],o),s[37][Symbol.for("slots")][0]?(i=s[37][Symbol.for("slots")][0],y=s[37],v=!0):i=s[37][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),s},effects:[function(i,o,l,h,g,x){o[3].set("y",{transition:i.y})},function(i,o,l,h,g,x){o[3].set("alpha",{transition:!i.hide})},function(i,o,l,h,g,x){o[24].set("content",i.data.length)},function(i,o,l,h,g,x){(typeof skip36>"u"||skip36.indexOf("data")===-1)&&o[36].set("data",i.data)},function(i,o,l,h,g,x){(typeof skip36>"u"||skip36.indexOf("activeRowIndex")===-1)&&o[36].set("activeRowIndex",i.activeRowIndex)},function(i,o,l,h,g,x){o[37][Symbol.for("props")].data=i.data},function(i,o,l,h,g,x){o[37][Symbol.for("props")].activeRowIndex=i.activeRowIndex}],context:{}},state(){return{count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1,activeRowIndex:0}},computed:{show(){return this.hide,this.hide===!0},data2(){return this.data,this.data}},watch:{y(){this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(()=>{this.hide=!0},600)}},input:{a(){this.y=-10,this.$trigger("y");const f=[];for(let i=0;i<6;i++)f.push($u());this.data=f},b(){this.y=80,this.$trigger("y"),this.data.push($u())},c(){this.y=170,this.$trigger("y"),this.data.pop()},d(){this.y=260,this.$trigger("y"),this.data.shift()},e(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f(){this.y=440,this.data.unshift($u(),$u())},g(){this.y=530,this.$trigger("y"),this.data=[]},h(){this.y=620,this.$trigger("y"),this.data=this.data.concat(n6(3))},i(){this.y=710,this.$trigger("y"),this.sortDirection=this.sortDirection===1?0:1,this.data=this.data.sort((f,i)=>{const o=f.text.toLowerCase(),l=i.text.toLowerCase();return this.sortDirection===1?o<l?-1:o>l?1:0:o>l?-1:o<l?1:0})},up(){this.activeRowIndex>0&&(this.activeRowIndex-=1)},down(){this.activeRowIndex<this.data.length-1&&(this.activeRowIndex+=1)}}}),s6=tt.Component("Effects",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=160,C.h=160,C.x=40,C.y=40,C.color="0xfb923cff",C.effects=[{type:"radius",props:{radius:44}}],s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.w=160,y.h=160,y.x=240,y.y=40,y.color="0xd97706ff",y.effects=[{type:"radius",props:{radius:25}}],s[2].populate(y),i=s[0];const v={};s[3]=this.element({parent:i||"root"},o),v.w=160,v.h=160,v.x=440,v.y=40,v.color="0xb45309ff",v.effects=[{type:"radius",props:{radius:80}}],s[3].populate(v),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.w=160,M.h=160,M.x=640,M.y=40,M.color="0x78350fff",M.effects=[{type:"radius",props:{radius:10}}],s[4].populate(M),i=s[0];const b={};s[5]=this.element({parent:i||"root"},o),b.w=160,b.h=160,b.x=40,b.y=240,b.color="0x65a30dff",b.effects=[{type:"radius",props:{radius:o.radius}}],s[5].populate(b),i=s[0];const _={};s[6]=this.element({parent:i||"root"},o),_.w=300,_.h=300,_.x=40,_.y=440,_.color="0x0c4a6eff",_.effects=[{type:"radius",props:{radius:30}}],s[6].populate(_),i=s[6];const U={};s[7]=this.element({parent:i||"root"},o),U.w=200,U.h=200,U.x=50,U.y=50,U.color="0x0284c7ff",U.effects=[{type:"radius",props:{radius:40}}],s[7].populate(U),i=s[7];const F={};s[8]=this.element({parent:i||"root"},o),F.w=100,F.h=100,F.x=50,F.y=50,F.color="0x38bdf8ff",F.effects=[{type:"radius",props:{radius:50}}],s[8].populate(F),i=s[8];const z={};s[9]=this.element({parent:i||"root"},o),z.w=40,z.h=40,z.x=30,z.y=30,z.color="0xbae6fdff",z.effects=[{type:"radius",props:{radius:20}}],s[9].populate(z),i=s[0];const B={};s[10]=this.element({parent:i||"root"},o),B.w=160,B.h=160,B.x=840,B.y=40,B.color="0x3b82f6ff",B.effects=[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}],s[10].populate(B),i=s[0];const G={};return s[11]=this.element({parent:i||"root"},o),G.w=160,G.h=160,G.x=1040,G.y=40,G.color="0x500724ff",G.effects=o.effects,s[11].populate(G),s},effects:[function(i,o,l,h,g,x){o[1].set("effects",[{type:"radius",props:{radius:44}}])},function(i,o,l,h,g,x){o[2].set("effects",[{type:"radius",props:{radius:25}}])},function(i,o,l,h,g,x){o[3].set("effects",[{type:"radius",props:{radius:80}}])},function(i,o,l,h,g,x){o[4].set("effects",[{type:"radius",props:{radius:10}}])},function(i,o,l,h,g,x){o[5].set("effects",[{type:"radius",props:{radius:i.radius}}])},function(i,o,l,h,g,x){o[6].set("effects",[{type:"radius",props:{radius:30}}])},function(i,o,l,h,g,x){o[7].set("effects",[{type:"radius",props:{radius:40}}])},function(i,o,l,h,g,x){o[8].set("effects",[{type:"radius",props:{radius:50}}])},function(i,o,l,h,g,x){o[9].set("effects",[{type:"radius",props:{radius:20}}])},function(i,o,l,h,g,x){o[10].set("effects",[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}])},function(i,o,l,h,g,x){o[11].set("effects",i.effects)}],context:{}},state(){return{direction:"up",radius:0,effects:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(i,80),0),this.radius===80&&(this.direction="down"),this.radius===0&&(this.direction="up")},500);let f=0;this.$setInterval(()=>{f++,f%2?this.effects=[{type:"borderTop",props:{width:50,color:"#f43f5e"}},{type:"borderBottom",props:{width:50,color:"#be123c"}}]:this.effects=[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]},2e3)}}}),a6=tt.Component("ShowIf",{components:{Square:dl},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(b),v===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},v===!0?y:o),_.y=40,s[1].populate(_),v===!0&&(M-=1),i=s[1];const U={};s[2]=this.element({parent:i||"root"},v===!0?y:o),U.x=50,U.w=200,U.h=300,U.color="0xbef264ff",U.show=!0,s[2].populate(U),v===!0&&(M-=1),i=s[1];const F={};s[3]=this.element({parent:i||"root"},v===!0?y:o),F.x=350,F.w=200,F.h=300,F.color="0xff0000ff",F.show=!1,s[3].populate(F),v===!0&&(M-=1),i=s[1];const z={};s[4]=this.element({parent:i||"root"},v===!0?y:o),z.x=650,z.w=200,z.h=300,z.color="0x84cc16ff",z.show=1,s[4].populate(z),v===!0&&(M-=1),i=s[1];const B={};s[5]=this.element({parent:i||"root"},v===!0?y:o),B.x=950,B.w=200,B.h=300,B.color="0xff0000ff",B.show=0,s[5].populate(B),v===!0&&(M-=1),i=s[0];const G={};s[6]=this.element({parent:i||"root"},v===!0?y:o),G.y=380,s[6].populate(G),v===!0&&(M-=1),i=s[6];const X={};s[7]=this.element({parent:i||"root"},v===!0?y:o),X.x=50,X.w=200,X.h=300,X.color="0xfde047ff",X.show=o.showNr,s[7].populate(X),v===!0&&(M-=1),i=s[6];const Q={};s[8]=this.element({parent:i||"root"},v===!0?y:o),Q.x=350,Q.w=200,Q.h=300,Q.color="0x0000ffff",Q.show=o.hideNr,s[8].populate(Q),v===!0&&(M-=1),i=s[6];const W={};s[9]=this.element({parent:i||"root"},v===!0?y:o),W.x=650,W.w=200,W.h=300,W.color="0x84cc16ff",W.show=o.showBool,s[9].populate(W),v===!0&&(M-=1),i=s[6];const te={};s[10]=this.element({parent:i||"root"},v===!0?y:o),te.x=950,te.w=200,te.h=300,te.color="0xff0000ff",te.show=o.hideBool,s[10].populate(te),v===!0&&(M-=1),i=s[0];const de={};s[11]=this.element({parent:i||"root"},v===!0?y:o),de.y=720,s[11].populate(de),v===!0&&(M-=1),i=s[11];const I={};s[12]=this.element({parent:i||"root"},v===!0?y:o),I.x=50,I.w=200,I.h=300,I.color="0x5eead4ff",I.show=o.showHideToggle,s[12].populate(I),v===!0&&(M-=1),i=s[0];const q={};s[13]=this.element({parent:i||"root"},v===!0?y:o),q.y=40,q.x=1e3,s[13].populate(q),v===!0&&(M-=1);const ee=l.components&&l.components.Square||h.Square;i=s[13];const ae={};s[14]=this.element({parent:i||"root"},v===!0?y:o),ae.show=!0;const ne=[];if(typeof ee<"u")for(let Ke in ee[Symbol.for("config")].props)delete ae[ee[Symbol.for("config")].props[Ke]],ne.push(ee[Symbol.for("config")].props[Ke]);s[14].populate(ae),v===!0&&(M-=1),i=s[14];const Y={};Y.show=!0,m=Y.is||"Square";let Z;if(typeof m=="string"){if(Z=l.components&&l.components[m]||h[m],!Z)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Z=m);s[15]=Z.call(null,{props:Y},s[14],o),s[15][Symbol.for("slots")][0]?(i=s[15][Symbol.for("slots")][0],y=s[15],v=!0):i=s[15][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const j=l.components&&l.components.Square||h.Square;i=s[13];const fe={};s[16]=this.element({parent:i||"root"},v===!0?y:o),fe.y=100,fe.show=!1;const he=[];if(typeof j<"u")for(let Ke in j[Symbol.for("config")].props)delete fe[j[Symbol.for("config")].props[Ke]],he.push(j[Symbol.for("config")].props[Ke]);s[16].populate(fe),v===!0&&(M-=1),i=s[16];const we={};we.y=100,we.show=!1,m=we.is||"Square";let ge;if(typeof m=="string"){if(ge=l.components&&l.components[m]||h[m],!ge)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ge=m);s[17]=ge.call(null,{props:we},s[16],o),s[17][Symbol.for("slots")][0]?(i=s[17][Symbol.for("slots")][0],y=s[17],v=!0):i=s[17][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const be=l.components&&l.components.Square||h.Square;i=s[13];const Ie={};s[18]=this.element({parent:i||"root"},v===!0?y:o),Ie.y=200,Ie.show=o.showHideToggle;const V=[];if(typeof be<"u")for(let Ke in be[Symbol.for("config")].props)delete Ie[be[Symbol.for("config")].props[Ke]],V.push(be[Symbol.for("config")].props[Ke]);s[18].populate(Ie),v===!0&&(M-=1),i=s[18];const De={};De.y=200,C=o.showHideToggle,Array.isArray(C)===!0&&(C=x(C).slice(0)),De.show=C,m=De.is||"Square";let Se;if(typeof m=="string"){if(Se=l.components&&l.components[m]||h[m],!Se)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Se=m);s[19]=Se.call(null,{props:De},s[18],o),s[19][Symbol.for("slots")][0]?(i=s[19][Symbol.for("slots")][0],y=s[19],v=!0):i=s[19][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[0];const me={};s[20]=this.element({parent:i||"root"},v===!0?y:o),me.y=40,me.x=1400,s[20].populate(me),v===!0&&(M-=1),i=s[20];const Re={};s[21]=this.element({parent:i||"root"},v===!0?y:o),Re.w=80,Re.h=80,Re.show=!0,Re.alpha=.8,Re.color="0xff00e4ff",s[21].populate(Re),v===!0&&(M-=1),i=s[20];const Ne={};s[22]=this.element({parent:i||"root"},v===!0?y:o),Ne.y=100,Ne.w=80,Ne.h=80,Ne.show=!1,Ne.alpha=.8,Ne.color="0xff00e4ff",s[22].populate(Ne),v===!0&&(M-=1),i=s[20];const $e={};s[23]=this.element({parent:i||"root"},v===!0?y:o),$e.y=200,$e.w=80,$e.h=80,$e.show=o.showHideToggle,$e.alpha=.8,$e.color="0xff00e4ff",s[23].populate($e),v===!0&&(M-=1),i=s[0];const Pe={};s[24]=this.element({parent:i||"root"},v===!0?y:o),Pe.x=1e3,Pe.y=380,Pe.direction="horizontal",Pe.gap=20,Pe.padding=20,Pe.color="0xffffffff",Pe.__layout=!0,s[24].populate(Pe),v===!0&&(M-=1),i=s[24];const ve={};s[25]=this.element({parent:i||"root"},v===!0?y:o),ve.w=40,ve.h=40,ve.show=o.showHideToggle,ve.color="0xbfdbfeff",s[25].populate(ve),v===!0&&(M-=1),i=s[24];const Ye={};s[26]=this.element({parent:i||"root"},v===!0?y:o),Ye.w=40,Ye.h=40,Ye.color="0x60a5faff",s[26].populate(Ye),v===!0&&(M-=1),i=s[24];const it={};return s[27]=this.element({parent:i||"root"},v===!0?y:o),it.w=40,it.h=40,it.color="0x2563ebff",s[27].populate(it),v===!0&&(M-=1),s},effects:[function(i,o,l,h,g,x){o[12].set("show",i.showHideToggle)},function(i,o,l,h,g,x){(typeof skip18>"u"||skip18.indexOf("show")===-1)&&o[18].set("show",i.showHideToggle)},function(i,o,l,h,g,x){o[19][Symbol.for("props")].show=i.showHideToggle},function(i,o,l,h,g,x){o[23].set("show",i.showHideToggle)},function(i,o,l,h,g,x){o[25].set("show",i.showHideToggle)}],context:{}},state(){return{showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready(){this.$setInterval(()=>{console.log("backstopjs:ready"),this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),l6=tt.Component("Events",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.x=400,m.y=360,s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=280,C.h=280,C.color="0xe5e7ebff",C.x=o.x,C.y="-5",s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.w=250,y.h=250,y.x=10,y.y=10,y.color=o.colors[0],s[2].populate(y),i=s[0];const v={};s[3]=this.element({parent:i||"root"},o),v.w=250,v.h=250,v.x=290,v.y=10,v.color=o.colors[1],s[3].populate(v),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.w=250,M.h=250,M.x=570,M.y=10,M.color=o.colors[2],s[4].populate(M),i=s[0];const b={};return s[5]=this.element({parent:i||"root"},o),b.w=250,b.h=250,b.x=850,b.y=10,b.color=o.colors[3],s[5].populate(b),s},effects:[function(i,o,l,h,g,x){o[1].set("x",i.x)}],context:{}},state(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x(){return this.count,this.count*280-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(f){const i=this.count-1;i===-1?this.parent.$focus(f):this.count=Math.max(i,0)},right(f){const i=this.count+1;i===4?this.parent.$focus(f):this.count=Math.min(i,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),u6=tt.Component("SlotCard",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=300,m.h=500,m.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],m.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C[Symbol.for("isSlot")]=!0,C.x=20,C.y=20,s[1].populate(C),i=s[0];const y={};return s[2]=this.element({parent:i||"root"},o),y.content=o.label,y.maxwidth=260,y.x=20,y.y=400,y.align="center",y.__textnode=!0,s[2].populate(y),s},effects:[function(i,o,l,h,g,x){o[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}},props:[{key:"label"}]}),f6=tt.Component("NamedSlotCard",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=700,m.h=300,m.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],m.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.x=20,C.y=20,s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.content="First slot",y.__textnode=!0,s[2].populate(y),i=s[1];const v={};s[3]=this.element({parent:i||"root"},o),v[Symbol.for("isSlot")]=!0,v.y=40,v.ref="first",s[3].populate(v),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.x=200,M.y=20,s[4].populate(M),i=s[4];const b={};s[5]=this.element({parent:i||"root"},o),b.content="Second slot",b.__textnode=!0,s[5].populate(b),i=s[4];const _={};s[6]=this.element({parent:i||"root"},o),_[Symbol.for("isSlot")]=!0,_.y=40,_.ref="second",s[6].populate(_),i=s[0];const U={};s[7]=this.element({parent:i||"root"},o),U.x=480,U.y=20,s[7].populate(U),i=s[7];const F={};s[8]=this.element({parent:i||"root"},o),F.content="Third slot",F.__textnode=!0,s[8].populate(F),i=s[7];const z={};return s[9]=this.element({parent:i||"root"},o),z[Symbol.for("isSlot")]=!0,z.y=40,z.ref="third",s[9].populate(z),s},effects:[function(i,o,l,h,g,x){o[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}}}),_u=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],c6=tt.Component("Components",{components:{SlotCard:u6,NamedSlotCard:f6,Card:zT,Square:dl},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(v-=1);const b=l.components&&l.components.SlotCard||h.SlotCard;i=s[0];const _={};s[1]=this.element({parent:i||"root"},y===!0?C:o),_.x=400,_.y=100,_.label="Element";const U=[];if(typeof b<"u")for(let vt in b[Symbol.for("config")].props)delete _[b[Symbol.for("config")].props[vt]],U.push(b[Symbol.for("config")].props[vt]);s[1].populate(_),y===!0&&(v-=1),i=s[1];const F={};F.x=400,F.y=100,F.label="Element",m=F.is||"SlotCard";let z;if(typeof m=="string"){if(z=l.components&&l.components[m]||h[m],!z)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[2]=z.call(null,{props:F},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],C=s[2],y=!0):i=s[2][Symbol.for("children")][0],y===!0&&(v=2);const B={};s[3]=this.element({parent:i||"root"},y===!0?C:o),s[3].populate(B),y===!0&&(v-=1),i=s[3];const G={};s[4]=this.element({parent:i||"root"},y===!0?C:o),G.color=o.color,G.w=100,G.h=100,s[4].populate(G),y===!0&&(v-=1),y===!0&&v===0&&(y=!1);const X=l.components&&l.components.SlotCard||h.SlotCard;i=s[0];const Q={};s[5]=this.element({parent:i||"root"},y===!0?C:o),Q.x=800,Q.y=100,Q.label="Component";const W=[];if(typeof X<"u")for(let vt in X[Symbol.for("config")].props)delete Q[X[Symbol.for("config")].props[vt]],W.push(X[Symbol.for("config")].props[vt]);s[5].populate(Q),y===!0&&(v-=1),i=s[5];const te={};te.x=800,te.y=100,te.label="Component",m=te.is||"SlotCard";let de;if(typeof m=="string"){if(de=l.components&&l.components[m]||h[m],!de)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(de=m);s[6]=de.call(null,{props:te},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],C=s[6],y=!0):i=s[6][Symbol.for("children")][0],y===!0&&(v=2);const I={};s[7]=this.element({parent:i||"root"},y===!0?C:o),s[7].populate(I),y===!0&&(v-=1);const q=l.components&&l.components.Square||h.Square;i=s[7];const ee={};s[8]=this.element({parent:i||"root"},y===!0?C:o),ee.size=200,ee.y=50;const ae=[];if(typeof q<"u")for(let vt in q[Symbol.for("config")].props)delete ee[q[Symbol.for("config")].props[vt]],ae.push(q[Symbol.for("config")].props[vt]);s[8].populate(ee),y===!0&&(v-=1),i=s[8];const ne={};ne.size=200,ne.y=50,m=ne.is||"Square";let Y;if(typeof m=="string"){if(Y=l.components&&l.components[m]||h[m],!Y)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Y=m);s[9]=Y.call(null,{props:ne},s[8],o),s[9][Symbol.for("slots")][0]?(i=s[9][Symbol.for("slots")][0],C=s[9],y=!0):i=s[9][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),y===!0&&v===0&&(y=!1);const Z=l.components&&l.components.SlotCard||h.SlotCard;i=s[0];const j={};s[10]=this.element({parent:i||"root"},y===!0?C:o),j.x=1200,j.y=100,j.label="Element & Component";const fe=[];if(typeof Z<"u")for(let vt in Z[Symbol.for("config")].props)delete j[Z[Symbol.for("config")].props[vt]],fe.push(Z[Symbol.for("config")].props[vt]);s[10].populate(j),y===!0&&(v-=1),i=s[10];const he={};he.x=1200,he.y=100,he.label="Element & Component",m=he.is||"SlotCard";let we;if(typeof m=="string"){if(we=l.components&&l.components[m]||h[m],!we)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(we=m);s[11]=we.call(null,{props:he},s[10],o),s[11][Symbol.for("slots")][0]?(i=s[11][Symbol.for("slots")][0],C=s[11],y=!0):i=s[11][Symbol.for("children")][0],y===!0&&(v=3);const ge={};s[12]=this.element({parent:i||"root"},y===!0?C:o),s[12].populate(ge),y===!0&&(v-=1),i=s[12];const be={};s[13]=this.element({parent:i||"root"},y===!0?C:o),be.color=o.color,be.w=100,be.h=100,s[13].populate(be),y===!0&&(v-=1);const Ie=l.components&&l.components.Square||h.Square;i=s[12];const V={};s[14]=this.element({parent:i||"root"},y===!0?C:o),V.size=200,V.y=150;const De=[];if(typeof Ie<"u")for(let vt in Ie[Symbol.for("config")].props)delete V[Ie[Symbol.for("config")].props[vt]],De.push(Ie[Symbol.for("config")].props[vt]);s[14].populate(V),y===!0&&(v-=1),i=s[14];const Se={};Se.size=200,Se.y=150,m=Se.is||"Square";let me;if(typeof m=="string"){if(me=l.components&&l.components[m]||h[m],!me)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(me=m);s[15]=me.call(null,{props:Se},s[14],o),s[15][Symbol.for("slots")][0]?(i=s[15][Symbol.for("slots")][0],C=s[15],y=!0):i=s[15][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),y===!0&&v===0&&(y=!1);const Re=l.components&&l.components.Card||h.Card;i=s[0];const Ne={};s[16]=this.element({parent:i||"root"},y===!0?C:o),Ne.x=400,Ne.y=700,Ne.size="small";const $e=[];if(typeof Re<"u")for(let vt in Re[Symbol.for("config")].props)delete Ne[Re[Symbol.for("config")].props[vt]],$e.push(Re[Symbol.for("config")].props[vt]);s[16].populate(Ne),y===!0&&(v-=1),i=s[16];const Pe={};Pe.x=400,Pe.y=700,Pe.size="small",m=Pe.is||"Card";let ve;if(typeof m=="string"){if(ve=l.components&&l.components[m]||h[m],!ve)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ve=m);s[17]=ve.call(null,{props:Pe},s[16],o),s[17][Symbol.for("slots")][0]?(i=s[17][Symbol.for("slots")][0],C=s[17],y=!0):i=s[17][Symbol.for("children")][0],y===!0&&(v=2);const Ye={};s[18]=this.element({parent:i||"root"},y===!0?C:o),s[18].populate(Ye),y===!0&&(v-=1),i=s[18];const it={};s[19]=this.element({parent:i||"root"},y===!0?C:o),it.color=o.color,it.w=100,it.h=100,s[19].populate(it),y===!0&&(v-=1),y===!0&&v===0&&(y=!1);const Ke=l.components&&l.components.NamedSlotCard||h.NamedSlotCard;i=s[0];const lt={};s[20]=this.element({parent:i||"root"},y===!0?C:o),lt.x=800,lt.y=700;const St=[];if(typeof Ke<"u")for(let vt in Ke[Symbol.for("config")].props)delete lt[Ke[Symbol.for("config")].props[vt]],St.push(Ke[Symbol.for("config")].props[vt]);s[20].populate(lt),y===!0&&(v-=1),i=s[20];const ft={};ft.x=800,ft.y=700,m=ft.is||"NamedSlotCard";let Tt;if(typeof m=="string"){if(Tt=l.components&&l.components[m]||h[m],!Tt)throw new Error('Component "NamedSlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Tt=m);s[21]=Tt.call(null,{props:ft},s[20],o),s[21][Symbol.for("slots")][0]?(i=s[21][Symbol.for("slots")][0],C=s[21],y=!0):i=s[21][Symbol.for("children")][0],y===!0&&(v=5);const je={};s[22]=this.element({parent:i||"root"},y===!0?C:o),s[22].populate(je),y===!0&&(v-=1),i=s[22];const Dt={};s[23]=this.element({parent:i||"root"},y===!0?C:o),Dt.color="0x0891b2ff",Dt.x=10,Dt.y=140,Dt.w=80,Dt.h=60,Dt.parent=C[Symbol.for("slots")]!==void 0&&Array.isArray(C[Symbol.for("slots")])===!0&&C[Symbol.for("slots")].filter(vt=>vt.ref==="second").shift()||i,Dt.slot="second",s[23].populate(Dt),y===!0&&(v-=1),i=s[22];const wt={};s[24]=this.element({parent:i||"root"},y===!0?C:o),wt.color=o.color,wt.w=100,wt.h=100,wt.parent=C[Symbol.for("slots")]!==void 0&&Array.isArray(C[Symbol.for("slots")])===!0&&C[Symbol.for("slots")].filter(vt=>vt.ref==="third").shift()||i,wt.slot="third",s[24].populate(wt),y===!0&&(v-=1);const Qe=l.components&&l.components.Square||h.Square;i=s[22];const gn={};s[25]=this.element({parent:i||"root"},y===!0?C:o),gn.size=100,gn.parent=C[Symbol.for("slots")]!==void 0&&Array.isArray(C[Symbol.for("slots")])===!0&&C[Symbol.for("slots")].filter(vt=>vt.ref==="first").shift()||i,gn.slot="first";const un=[];if(typeof Qe<"u")for(let vt in Qe[Symbol.for("config")].props)delete gn[Qe[Symbol.for("config")].props[vt]],un.push(Qe[Symbol.for("config")].props[vt]);s[25].populate(gn),y===!0&&(v-=1),i=s[25];const qt={};qt.size=100,qt.slot="first",m=qt.is||"Square";let xt;if(typeof m=="string"){if(xt=l.components&&l.components[m]||h[m],!xt)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xt=m);s[26]=xt.call(null,{props:qt},s[25],o),s[26][Symbol.for("slots")][0]?(i=s[26][Symbol.for("slots")][0],C=s[26],y=!0):i=s[26][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),i=s[22];const Gt={};return s[27]=this.element({parent:i||"root"},y===!0?C:o),Gt.color="0x4d7c0fff",Gt.x=40,Gt.y=40,Gt.w=40,Gt.h=60,Gt.parent=C[Symbol.for("slots")]!==void 0&&Array.isArray(C[Symbol.for("slots")])===!0&&C[Symbol.for("slots")].filter(vt=>vt.ref==="second").shift()||i,Gt.slot="second",s[27].populate(Gt),y===!0&&(v-=1),y===!0&&v===0&&(y=!1),s},effects:[function(i,o,l,h,g,x){o[4].set("color",i.color)},function(i,o,l,h,g,x){o[13].set("color",i.color)},function(i,o,l,h,g,x){o[19].set("color",i.color)},function(i,o,l,h,g,x){o[24].set("color",i.color)}],context:{}},state(){return{color:_u[0]}},hooks:{ready(){this.$setInterval(()=>{const f=_u.indexOf(this.color)+1;this.color=f<=_u.length?_u[f]:_u[0]},600)}}}),h6=tt.Component("MemoryCard",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=320,m.h=200,m.x=o.col*360,m.y=o.row*250,m.scale={transition:o.scale},m.rotation={transition:o.disabled?-2:0},s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.h={transition:o.h},C.w=320,C.y=125,C.mount="{y: 0.5}",C.color={transition:o.disabled?"#ccc":"#fff"},C.src=o.image+"&w=320&h=200",C.effects=[{type:"radius",props:{radius:6}}],C.show=o.open,s[1].populate(C),i=s[0];const y={};return s[2]=this.element({parent:i||"root"},o),y.h={transition:o.h},y.w=320,y.y=125,y.mount="{y: 0.5}",y.color=o.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},y.effects=[{type:"radius",props:{radius:6}}],s[2].populate(y),s},effects:[function(i,o,l,h,g,x){o[0].set("scale",{transition:i.scale})},function(i,o,l,h,g,x){o[0].set("rotation",{transition:i.disabled?-2:0})},function(i,o,l,h,g,x){o[1].set("h",{transition:i.h})},function(i,o,l,h,g,x){o[1].set("color",{transition:i.disabled?"#ccc":"#fff"})},function(i,o,l,h,g,x){o[1].set("src",i.image+"&w=320&h=200")},function(i,o,l,h,g,x){o[1].set("effects",[{type:"radius",props:{radius:6}}])},function(i,o,l,h,g,x){o[1].set("show",i.open)},function(i,o,l,h,g,x){o[2].set("h",{transition:i.h})},function(i,o,l,h,g,x){o[2].set("color",i.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(i,o,l,h,g,x){o[2].set("effects",[{type:"radius",props:{radius:6}}])}],context:{}},props:["row","col","image","description","index"],state(){return{disabled:!1,open:!1,h:200,scale:1,announcement:null}},hooks:{init(){this.$listen("closeMemoryCard",f=>{f===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",f=>{f===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(f){this.scale=1.08;const i="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.announcement=this.$announcer.speak(i)},unfocus(){this.scale=1,this.announcement.cancel()}},input:{enter(){if(!this.disabled){if(this.open){this.$announcer.speak("Card already open. Choose another");return}this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)}}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),BC=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],d6=tt.Component("Announcer",{components:{MemoryCard:h6},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1;const M={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(M),i=s[0];const b={};s[1]=this.element({parent:i||"root"},v===!0?y:o),b.font="raleway",b.size=80,b.color="0xffffffff",b.content="Let's play memory!",b.x=580,b.y=60,b.__textnode=!0,s[1].populate(b),i=s[0];const _={};s[2]=this.element({parent:i||"root"},v===!0?y:o),_.font="kalam",_.size=40,_.color="0xb91c1cff",_.content="the Accessible edition :)",_.x=1200,_.y=170,_.rotation="-6",_.__textnode=!0,s[2].populate(_),i=s[0];const U={};s[3]=this.element({parent:i||"root"},v===!0?y:o),U.x=260,U.y=260,s[3].populate(U),i=s[3];const F=[];let z,B;const G=(W=[],te,de)=>{const I=x(W),q=new Set;let ee=I.length;const ae={};for(z=ae.from||0,B=("to"in ae)?ae.to:I.length;ee--;){const j=I[ee];ee<B&&ee>=z&&q.add(""+j.id)}let ne=de.length;for(;ne--;)if(q.has(de[ne])===!1){const j=de[ne];te[4][j]&&te[4][j].destroy(),delete te[4][j],te[5][j]&&te[5][j].destroy(),delete te[5][j]}de.length=0;const Y=I.length,Z=[];for(let j=0;j<Y;j++){if(j<z||j>=B)continue;const fe=Object.create(o);i=te[3],fe.card=I[j],fe.index=j,fe.key=""+fe.card.id,de.push(fe.key);const he=l.components&&l.components.MemoryCard||h.MemoryCard;te[4]===void 0&&(te[4]={});const we={};te[4][fe.key]===void 0&&(te[4][fe.key]=this.element({parent:i||"root"},v===!0?y:o)),we.col=fe.index%4,we.row=Math.floor(fe.index/4)%3,we.image=fe.card.image,we.description=fe.card.description,we.ref="card"+fe.index,we.index=fe.index;const ge=[];if(typeof he<"u")for(let me in he[Symbol.for("config")].props)delete we[he[Symbol.for("config")].props[me]],ge.push(he[Symbol.for("config")].props[me]);te[4][fe.key].nodeId===void 0&&te[4][fe.key].populate(we),te[5]===void 0&&(te[5]={}),i=te[4][fe.key];const be={};if(te[5][fe.key]===void 0){C=fe.index%4,Array.isArray(C)===!0&&(C=x(C).slice(0)),be.col=C,C=Math.floor(fe.index/4)%3,Array.isArray(C)===!0&&(C=x(C).slice(0)),be.row=C,be.image=fe.card.image,be.description=fe.card.description,C="card"+fe.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),be.ref=C,C=fe.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),be.index=C,m=be.is||"MemoryCard";let me;if(typeof m=="string"){if(me=l.components&&l.components[m]||h[m],!me)throw new Error('Component "MemoryCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(me=m);te[5][fe.key]=me.call(null,{props:be},te[4][fe.key],o),te[5][fe.key][Symbol.for("slots")][0]?(i=te[5][fe.key][Symbol.for("slots")][0],y=te[5][fe.key],v=!0):i=te[5][fe.key][Symbol.for("children")][0]}let Ie=()=>{(typeof ge>"u"||ge.indexOf("col")===-1)&&te[4][fe.key].set("col",fe.index%4)};g(Ie,null),Z.push(Ie),o[Symbol.for("effects")].push(Ie);let V=()=>{(typeof ge>"u"||ge.indexOf("row")===-1)&&te[4][fe.key].set("row",Math.floor(fe.index/4)%3)};g(V,null),Z.push(V),o[Symbol.for("effects")].push(V);let De=()=>{(typeof ge>"u"||ge.indexOf("ref")===-1)&&te[4][fe.key].set("ref","card"+fe.index)};g(De,null),Z.push(De),o[Symbol.for("effects")].push(De);let Se=()=>{(typeof ge>"u"||ge.indexOf("index")===-1)&&te[4][fe.key].set("index",fe.index)};g(Se,null),Z.push(Se),o[Symbol.for("effects")].push(Se),te[5][fe.key][Symbol.for("props")].col=fe.index%4,te[5][fe.key][Symbol.for("props")].row=Math.floor(fe.index/4)%3,te[5][fe.key][Symbol.for("props")].ref="card"+fe.index,te[5][fe.key][Symbol.for("props")].index=fe.index}return Z};let X;const Q=()=>{o[Symbol.for("removeGlobalEffects")](X),X=null,X=G(o.cards,s,F)};return o[Symbol.for("effects")].push(Q),g(Q,["cards"]),s},effects:[],context:{}},state(){return{cards:BC.concat(BC).map((f,i)=>({...f,id:`card${i}`})),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0}},hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",f=>{this.openCards.length<2&&this.openCards.push(f),this.openCards.length===2&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(f){if(this.focusedRow===-1){this.focusedRow=0;return}f=f+this.focusedRow*4,this.$select("card"+f).$focus()},focusedRow(f){if(this.focusedCol===-1){this.focusedCol=0;return}f=this.focusedCol+f*4,this.$select("card"+f).$focus()}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){this.focusedCol===0?this.focusedRow===0?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1)},right(){this.focusedCol===3?this.focusedRow===2?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1)},up(){this.focusedCol===0&&this.$announcer.speak("You are already at the first card"),this.focusedRow=Math.max(0,this.focusedRow-1)},down(){this.focusedRow===2&&this.$announcer.speak("You are already at the last card"),this.focusedRow=Math.min(2,this.focusedRow+1)}}}),Ru=(f,i)=>Math.floor(Math.random()*(i-f+1)+f),p6=tt.Component("Item",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.src="assets/blits-b-small.png",m.w=96,m.h=168,m.x={transition:{value:o.x,duration:2900}},m.y={transition:{value:o.y,duration:2900}},m.rotation={transition:{value:o.rotation,duration:2900}},m.scale={transition:{value:o.scale,duration:1e3}},s[0].populate(m),s},effects:[function(i,o,l,h,g,x){o[0].set("x",{transition:{value:i.x,duration:2900}})},function(i,o,l,h,g,x){o[0].set("y",{transition:{value:i.y,duration:2900}})},function(i,o,l,h,g,x){o[0].set("rotation",{transition:{value:i.rotation,duration:2900}})},function(i,o,l,h,g,x){o[0].set("scale",{transition:{value:i.scale,duration:1e3}})}],context:{}},state(){return{x:Ru(20,1560),y:Ru(20,720),rotation:0,scale:.1}},hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=Ru(20,1740),this.y=Ru(20,900),this.rotation=Ru(10,360)},3e3)}}}),m6=tt.Component("Exponential",{components:{Item:p6},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1;const v={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(v),i=s[0];const M=[];let b,_;const U=(B=[],G,X)=>{const Q=x(B),W=new Set;let te=Q.length;const de={};for(b=de.from||0,_=("to"in de)?de.to:Q.length;te--;){const ae=Q[te];te<_&&te>=b&&W.add(""+ae)}let I=X.length;for(;I--;)if(W.has(X[I])===!1){const ae=X[I];G[1][ae]&&G[1][ae].destroy(),delete G[1][ae],G[2][ae]&&G[2][ae].destroy(),delete G[2][ae]}X.length=0;const q=Q.length,ee=[];for(let ae=0;ae<q;ae++){if(ae<b||ae>=_)continue;const ne=Object.create(o);i=G[0],ne.item=Q[ae],ne.undefined=ae,ne.key=""+ne.item,X.push(ne.key);const Y=l.components&&l.components.Item||h.Item;G[1]===void 0&&(G[1]={});const Z={};G[1][ne.key]===void 0&&(G[1][ne.key]=this.element({parent:i||"root"},y===!0?C:o));const j=[];if(typeof Y<"u")for(let he in Y[Symbol.for("config")].props)delete Z[Y[Symbol.for("config")].props[he]],j.push(Y[Symbol.for("config")].props[he]);G[1][ne.key].nodeId===void 0&&G[1][ne.key].populate(Z),G[2]===void 0&&(G[2]={}),i=G[1][ne.key];const fe={};if(G[2][ne.key]===void 0){m=fe.is||"Item";let he;if(typeof m=="string"){if(he=l.components&&l.components[m]||h[m],!he)throw new Error('Component "Item" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(he=m);G[2][ne.key]=he.call(null,{props:fe},G[1][ne.key],o),G[2][ne.key][Symbol.for("slots")][0]?(i=G[2][ne.key][Symbol.for("slots")][0],C=G[2][ne.key],y=!0):i=G[2][ne.key][Symbol.for("children")][0]}}return ee};let F;const z=()=>{o[Symbol.for("removeGlobalEffects")](F),F=null,F=U(o.items,s,M)};return o[Symbol.for("effects")].push(z),g(z,["items"]),s},effects:[],context:{}},state(){return{items:[]}},hooks:{ready(){const f=this.$setInterval(()=>{for(let i=0;i<=Math.floor(this.items.length/10);i++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(f)},2e3)}}}),HT=tt.Component("Ball",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.w=100,m.h=100,m.src="/assets/basketball.png",s[0].populate(m),s},effects:[],context:{}},hooks:{attach(){this.$emit("ballUpdate","Attached to render tree")},detach(){this.$emit("ballUpdate","Detached from render tree")},enter(){this.$emit("ballUpdate","Entered viewport")},exit(){this.$emit("ballUpdate","Exited viewport")}}}),jh=(f,i)=>Math.floor(Math.random()*(i-f+1)+f),g6=tt.Component("Viewport",{components:{Ball:HT},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(b),v===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},v===!0?y:o),_.size=32,_.x=960,_.y=540,_.mount=.5,_.content=o.status.join(`
`),_.lineheight=52,_.maxwidth=500,_.__textnode=!0,s[1].populate(_),v===!0&&(M-=1);const U=l.components&&l.components.Ball||h.Ball;i=s[0];const F={};s[2]=this.element({parent:i||"root"},v===!0?y:o),F.x={transition:{value:o.x,duration:1250}},F.y={transition:{value:o.y,duration:1250}},F.rotation={transition:{value:o.rotation,duration:1400,easing:"ease-in-out"}},F.w=100,F.h=100;const z=[];if(typeof U<"u")for(let X in U[Symbol.for("config")].props)delete F[U[Symbol.for("config")].props[X]],z.push(U[Symbol.for("config")].props[X]);s[2].populate(F),v===!0&&(M-=1),i=s[2];const B={};C={transition:{value:o.x,duration:1250}},Array.isArray(C)===!0&&(C=x(C).slice(0)),B.x=C,C={transition:{value:o.y,duration:1250}},Array.isArray(C)===!0&&(C=x(C).slice(0)),B.y=C,C={transition:{value:o.rotation,duration:1400,easing:"ease-in-out"}},Array.isArray(C)===!0&&(C=x(C).slice(0)),B.rotation=C,B.w=100,B.h=100,m=B.is||"Ball";let G;if(typeof m=="string"){if(G=l.components&&l.components[m]||h[m],!G)throw new Error('Component "Ball" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);return s[3]=G.call(null,{props:B},s[2],o),s[3][Symbol.for("slots")][0]?(i=s[3][Symbol.for("slots")][0],y=s[3],v=!0):i=s[3][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),s},effects:[function(i,o,l,h,g,x){o[1].set("content",i.status.join(`
`))},function(i,o,l,h,g,x){(typeof skip2>"u"||skip2.indexOf("x")===-1)&&o[2].set("x",{transition:{value:i.x,duration:1250}})},function(i,o,l,h,g,x){(typeof skip2>"u"||skip2.indexOf("y")===-1)&&o[2].set("y",{transition:{value:i.y,duration:1250}})},function(i,o,l,h,g,x){(typeof skip2>"u"||skip2.indexOf("rotation")===-1)&&o[2].set("rotation",{transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}})},function(i,o,l,h,g,x){o[3][Symbol.for("props")].x={transition:{value:i.x,duration:1250}}},function(i,o,l,h,g,x){o[3][Symbol.for("props")].y={transition:{value:i.y,duration:1250}}},function(i,o,l,h,g,x){o[3][Symbol.for("props")].rotation={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state(){return{x:-400,y:-400,rotation:0,status:[],count:1}},hooks:{ready(){this.$listen("ballUpdate",f=>{this.status.unshift(`${this.count++} -  ${f}`),this.status.length=Math.min(this.status.length,8)}),this.rotation=jh(-90,90),this.x=1820/2,this.y=980/2,this.$setInterval(()=>{this.x=jh(-300,2220),this.y=jh(-300,1380),this.rotation=jh(-90,90)},2500)}}}),tf={code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=1920,m.h=1080,m.color="0xffffffff",m.effects=[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}],s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.show=o.up!==void 0,s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.src="assets/arrow.png",y.w=100,y.h=44,y.x=960,y.y=40,y.mount="{x: 0.5}",s[2].populate(y),i=s[1];const v={};s[3]=this.element({parent:i||"root"},o),v.content=o.up&&o.up.toUpperCase(),v.x=960,v.y=100,v.size=76,v.mount="{x: 0.5}",v.__textnode=!0,s[3].populate(v),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.show=o.right!==void 0,s[4].populate(M),i=s[4];const b={};s[5]=this.element({parent:i||"root"},o),b.src="assets/arrow.png",b.w=100,b.h=44,b.x=1900,b.y=540,b.mount="{x: 1, y: 0.5}",b.rotation=90,s[5].populate(b),i=s[4];const _={};s[6]=this.element({parent:i||"root"},o),_.content=o.right&&o.right.toUpperCase(),_.x=1760,_.y=540,_.size=76,_.rotation=90,_.mount=.5,_.__textnode=!0,s[6].populate(_),i=s[0];const U={};s[7]=this.element({parent:i||"root"},o),U.show=o.down!==void 0,s[7].populate(U),i=s[7];const F={};s[8]=this.element({parent:i||"root"},o),F.src="assets/arrow.png",F.w=100,F.h=44,F.x=960,F.y=1040,F.mount="{x: 0.5, y: 1}",F.rotation=180,s[8].populate(F),i=s[7];const z={};s[9]=this.element({parent:i||"root"},o),z.content=o.down&&o.down.toUpperCase(),z.x=960,z.y=980,z.size=76,z.mount="{x: 0.5, y: 1}",z.__textnode=!0,s[9].populate(z),i=s[0];const B={};s[10]=this.element({parent:i||"root"},o),B.show=o.left!==void 0,s[10].populate(B),i=s[10];const G={};s[11]=this.element({parent:i||"root"},o),G.src="assets/arrow.png",G.w=100,G.h=44,G.x=40,G.y=540,G.mount="{ y: 0.5}",G.rotation="-90",s[11].populate(G),i=s[10];const X={};s[12]=this.element({parent:i||"root"},o),X.content=o.left&&o.left.toUpperCase(),X.x=180,X.y=540,X.size=76,X.mount=.5,X.rotation="-90",X.__textnode=!0,s[12].populate(X),i=s[0];const Q={};return s[13]=this.element({parent:i||"root"},o),Q.content=o.pageTitle,Q.font="raleway",Q.x=960,Q.y=540,Q.size=240,Q.mount=.5,Q.__textnode=!0,s[13].populate(Q),s},effects:[function(i,o,l,h,g,x){o[0].set("effects",[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}])},function(i,o,l,h,g,x){o[1].set("show",i.up!==void 0)},function(i,o,l,h,g,x){o[3].set("content",i.up&&i.up.toUpperCase())},function(i,o,l,h,g,x){o[4].set("show",i.right!==void 0)},function(i,o,l,h,g,x){o[6].set("content",i.right&&i.right.toUpperCase())},function(i,o,l,h,g,x){o[7].set("show",i.down!==void 0)},function(i,o,l,h,g,x){o[9].set("content",i.down&&i.down.toUpperCase())},function(i,o,l,h,g,x){o[10].set("show",i.left!==void 0)},function(i,o,l,h,g,x){o[12].set("content",i.left&&i.left.toUpperCase())},function(i,o,l,h,g,x){o[13].set("content",i.pageTitle)}],context:{}},props:[{key:"page",cast:Object}],computed:{pageTitle(){return this.page&&this.page.title||this.title}},state(){return{title:"Start",up:"up",right:"right",down:"down",left:"left"}}},y6=tt.Component("RouterHookPage",{...tf,state(){return{title:"Start",down:"episode flow",right:"movie flow"}},input:{right(){this.$router.to("/examples/router-hooks/movie")},down(){this.$router.to("/examples/router-hooks/episode/1")}}}),v6=tt.Component("RouterHookMovie",{...tf,state(){return{title:"Movie",left:"Back",right:"Rating"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/rating")}}}),x6=tt.Component("RouterHookRating",{...tf,state(){return{title:"Rating",left:"Back",right:"TO START"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/")}}}),w6=tt.Component("RouterHookEpisode",{...tf,state(){return{title:"Episode",left:"Back",right:"NEXT EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to(`/examples/router-hooks/episode/${this.page.id+1}`,void 0,{inHistory:!1})}}}),S6=tt.Component("RouterHookEpisode",{...tf,state(){return{title:`Episodes 
 overview`,right:"FIRST EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/episode/1",void 0,{inHistory:!1})}}}),Mr={slideInOutLeft:{before:{prop:"x",value:"100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"-100%",duration:400}},slideInOutRight:{before:{prop:"x",value:"-100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"100%",duration:400}},slideInOutUp:{before:{prop:"y",value:"100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"-100%",duration:400}},slideInOutDown:{before:{prop:"y",value:"-100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"100%",duration:400}}},C6=[{path:"/examples/router-hooks",component:y6,hooks:{async before(f,i){return i&&i.path==="examples/router-hooks/movie"&&(f.transition=Mr.slideInOutRight),i&&i.path==="examples/router-hooks/rating"&&(f.transition=Mr.slideInOutLeft),i&&i.path.indexOf("episode")>-1&&(f.transition=Mr.slideInOutDown),f}}},{path:"/examples/router-hooks/episode/:id",component:w6,hooks:{before(f,i){i&&i.path.indexOf("episode")>-1&&(f.transition=Mr.slideInOutLeft);const{id:o}=f.params;return o>5?"/examples/router-hooks/":(f.data.page={id:parseInt(o),title:`Episode ${o}`},f)}},transition:Mr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/episode",component:S6,transition:Mr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/movie",component:v6,hooks:{before(f,i){return i&&i.path==="examples/router-hooks"&&(f.transition=Mr.slideInOutLeft),i&&i.path==="examples/router-hooks/rating"&&(f.transition=Mr.slideInOutRight),f}}},{path:"/examples/router-hooks/rating",component:x6,transition:Mr.slideInOutLeft}],T6=tt.Component("Resize",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.y=30,C.content="fit (Resize Mode) sample",C.maxwidth=1920,C.align="center",C.__textnode=!0,s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.x={transition:{value:o.pages.x1,duration:200}},y.y=90,s[2].populate(y),i=s[2];const v={};s[3]=this.element({parent:i||"root"},o),v.x=100,v.content="Image dimensions: 2560 X 1440",v.__textnode=!0,s[3].populate(v),i=s[2];const M={};s[4]=this.element({parent:i||"root"},o),M.x=100,M.y=80,M.content=o.titles.t1,M.__textnode=!0,s[4].populate(M),i=s[2];const b={};s[5]=this.element({parent:i||"root"},o),b.y=150,b.x=100,s[5].populate(b),i=s[5];const _={};s[6]=this.element({parent:i||"root"},o),_.w=o.w,_.h=o.w-300,_.src=o.img,_.fit="{type: 'cover', position: { y: 0 } }",s[6].populate(_),i=s[5];const U={};s[7]=this.element({parent:i||"root"},o),U.w=o.w,U.h=o.w-300,U.src=o.img,U.fit="{ type: 'cover', position: { y: 0.5 } }",U.x=600,s[7].populate(U),i=s[5];const F={};s[8]=this.element({parent:i||"root"},o),F.w=o.w,F.h=o.w-300,F.src=o.img,F.fit="{ type: 'cover', position: { y: 1 } }",F.x=1200,s[8].populate(F),i=s[2];const z={};s[9]=this.element({parent:i||"root"},o),z.x=100,z.y=500,z.content=o.titles.t2,z.__textnode=!0,s[9].populate(z),i=s[2];const B={};s[10]=this.element({parent:i||"root"},o),B.y=600,B.x=100,s[10].populate(B),i=s[10];const G={};s[11]=this.element({parent:i||"root"},o),G.w=o.w,G.h=o.w-150,G.src=o.img,G.fit="{ type: 'cover', position: { x: 0 } }",s[11].populate(G),i=s[10];const X={};s[12]=this.element({parent:i||"root"},o),X.w=o.w,X.h=o.w-150,X.src=o.img,X.fit="{ type: 'cover', position: { x: 0.5 } }",X.x=600,s[12].populate(X),i=s[10];const Q={};s[13]=this.element({parent:i||"root"},o),Q.w=o.w,Q.h=o.w-150,Q.src=o.img,Q.fit="{ type: 'cover', position: { x: 1 } }",Q.x=1200,s[13].populate(Q),i=s[0];const W={};s[14]=this.element({parent:i||"root"},o),W.x={transition:{value:o.pages.x2,duration:200}},W.y=90,s[14].populate(W),i=s[14];const te={};s[15]=this.element({parent:i||"root"},o),te.x=100,te.content="Image dimensions: 1440 X 2560",te.__textnode=!0,s[15].populate(te),i=s[14];const de={};s[16]=this.element({parent:i||"root"},o),de.x=100,de.y=80,de.content=o.titles.t3,de.__textnode=!0,s[16].populate(de),i=s[14];const I={};s[17]=this.element({parent:i||"root"},o),I.y=150,I.x=100,s[17].populate(I),i=s[17];const q={};s[18]=this.element({parent:i||"root"},o),q.w=o.w,q.h=o.w-200,q.src=o.img1,q.fit="{ type: 'cover', position: { y: 0, x: 0 } }",s[18].populate(q),i=s[17];const ee={};s[19]=this.element({parent:i||"root"},o),ee.w=o.w,ee.h=o.w-200,ee.src=o.img1,ee.fit="{ type: 'cover', position: { y: 0.5, x: 0.5 } }",ee.x=600,s[19].populate(ee),i=s[17];const ae={};s[20]=this.element({parent:i||"root"},o),ae.w=o.w,ae.h=o.w-200,ae.src=o.img1,ae.fit="{ type: 'cover', position: { y: 1, x: 1 } }",ae.x=1200,s[20].populate(ae),i=s[14];const ne={};s[21]=this.element({parent:i||"root"},o),ne.x=100,ne.y=500,ne.content=o.titles.t4,ne.__textnode=!0,s[21].populate(ne),i=s[14];const Y={};s[22]=this.element({parent:i||"root"},o),Y.y=570,Y.x=100,s[22].populate(Y),i=s[22];const Z={};s[23]=this.element({parent:i||"root"},o),Z.w=o.w-350,Z.h=o.w-100,Z.src=o.img1,Z.fit="{ type: 'cover', position: { x: 0 } }",s[23].populate(Z),i=s[22];const j={};s[24]=this.element({parent:i||"root"},o),j.w=o.w-350,j.h=o.w-100,j.src=o.img1,j.fit="{ type: 'cover', position: { x: 0.25 } }",j.x=250,s[24].populate(j),i=s[22];const fe={};s[25]=this.element({parent:i||"root"},o),fe.w=o.w-350,fe.h=o.w-100,fe.src=o.img1,fe.fit="{ type: 'cover', position: { x: 0.5 } }",fe.x=500,s[25].populate(fe),i=s[22];const he={};s[26]=this.element({parent:i||"root"},o),he.w=o.w-350,he.h=o.w-100,he.src=o.img1,he.fit="{ type: 'cover', position: { x: 0.75 } }",he.x=750,s[26].populate(he),i=s[22];const we={};s[27]=this.element({parent:i||"root"},o),we.w=o.w-350,we.h=o.w-100,we.src=o.img1,we.fit="{ type: 'cover', position: { x: 1 } }",we.x=1e3,s[27].populate(we),i=s[0];const ge={};s[28]=this.element({parent:i||"root"},o),ge.x={transition:{value:o.pages.x3,duration:200}},ge.y=90,s[28].populate(ge),i=s[28];const be={};s[29]=this.element({parent:i||"root"},o),be.x=100,be.content="Image dimensions: 2560 X 1440",be.__textnode=!0,s[29].populate(be),i=s[28];const Ie={};s[30]=this.element({parent:i||"root"},o),Ie.x=100,Ie.y=80,Ie.content=o.titles.t5,Ie.__textnode=!0,s[30].populate(Ie),i=s[28];const V={};s[31]=this.element({parent:i||"root"},o),V.y=150,V.x=100,V.w=o.w+100,V.h=o.w-200,V.color="0x000000ff",s[31].populate(V),i=s[31];const De={};s[32]=this.element({parent:i||"root"},o),De.w=o.w+100,De.h=o.w-200,De.src=o.img,De.fit="contain",s[32].populate(De),i=s[28];const Se={};s[33]=this.element({parent:i||"root"},o),Se.x=100,Se.y=500,Se.content=o.titles.t6,Se.__textnode=!0,s[33].populate(Se),i=s[28];const me={};s[34]=this.element({parent:i||"root"},o),me.y=550,me.x=100,me.w=o.w+100,me.h=o.w-100,me.color="0x000000ff",s[34].populate(me),i=s[34];const Re={};s[35]=this.element({parent:i||"root"},o),Re.w=o.w+100,Re.h=o.w-100,Re.src=o.img,Re.fit="contain",s[35].populate(Re),i=s[0];const Ne={};return s[36]=this.element({parent:i||"root"},o),Ne.x=1700,Ne.y=20,Ne.content="Page "+o.activePage+"/"+o.totalPages,Ne.__textnode=!0,s[36].populate(Ne),s},effects:[function(i,o,l,h,g,x){o[2].set("x",{transition:{value:i.pages.x1,duration:200}})},function(i,o,l,h,g,x){o[3].set("content","Image dimensions: 2560 X 1440")},function(i,o,l,h,g,x){o[14].set("x",{transition:{value:i.pages.x2,duration:200}})},function(i,o,l,h,g,x){o[15].set("content","Image dimensions: 1440 X 2560")},function(i,o,l,h,g,x){o[28].set("x",{transition:{value:i.pages.x3,duration:200}})},function(i,o,l,h,g,x){o[29].set("content","Image dimensions: 2560 X 1440")},function(i,o,l,h,g,x){o[36].set("content","Page "+i.activePage+"/"+i.totalPages)}],context:{}},state(){return{activePage:1,pages:{x1:0,x2:1920,x3:1920*2},w:500,img:"assets/testscreen.png",img1:"assets/testscreen_rotated.png",titles:{t1:"Texture width > height - fit cover maximum width of node and position Y - 0, 0.5, 1",t2:"Texture width > height - fit:cover maximum width of node and position X - 0, 0.5, 1",t3:"Texture width < height - fit cover maximum width of node and positionY - 0, 0.5, 1",t4:"Texture width < height - fit cover maximum width of node and position X - 0, 0.25, 0.5, 0.75, 1",t5:"Texture width > height - fit contain maximum height of node",t6:"Texture width > height - fit contain maximum width of node"}}},computed:{totalPages(){return this.pages,Object.keys(this.pages).length}},input:{right(){if(this.activePage<this.totalPages){for(let f=1;f<=this.totalPages;f++)this.pages[`x${f}`]=this.pages[`x${f}`]-1920;this.activePage+=1}},left(){if(this.activePage>1){for(let f=this.totalPages;f>=1;f--)this.pages[`x${f}`]=this.pages[`x${f}`]+1920;this.activePage-=1}}}}),b6=tt.Component("Flags",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C=[];let y,v;const M=(z=[],B,G)=>{const X=x(z),Q=new Set;let W=X.length;const te={};for(y=te.from||0,v=("to"in te)?te.to:X.length;W--;)X[W],W<v&&W>=y&&Q.add(""+W);let de=G.length;for(;de--;)if(Q.has(G[de])===!1){const ee=G[de];B[1][ee]&&B[1][ee].destroy(),delete B[1][ee],B[2][ee]&&B[2][ee].destroy(),delete B[2][ee],B[3][ee]&&B[3][ee].destroy(),delete B[3][ee]}G.length=0;const I=X.length,q=[];for(let ee=0;ee<I;ee++){if(ee<y||ee>=v)continue;const ae=Object.create(o);i=B[0],ae.language=X[ee],ae.index=ee,ae.key=""+ee,G.push(ae.key),i=B[0],B[1]===void 0&&(B[1]={});const ne={};B[1][ae.key]===void 0&&(B[1][ae.key]=this.element({parent:i||"root"},o)),ne.x=ae.index*250,B[1][ae.key].nodeId===void 0&&B[1][ae.key].populate(ne),i=B[1][ae.key],B[2]===void 0&&(B[2]={});const Y={};B[2][ae.key]===void 0&&(B[2][ae.key]=this.element({parent:i||"root"},o)),Y.src=ae.language.flag,Y.w=150,Y.h=150,Y.alpha=ae.index===ae.activeIndex?1:.6,B[2][ae.key].nodeId===void 0&&B[2][ae.key].populate(Y),i=B[1][ae.key],B[3]===void 0&&(B[3]={});const Z={};B[3][ae.key]===void 0&&(B[3][ae.key]=this.element({parent:i||"root"},o)),Z.content=ae.language.name,Z.y=150,Z.maxwidth=150,Z.align="center",Z.color=ae.index===ae.activeIndex?"0xffffffff":"0xaaaaaaff",Z.__textnode=!0,B[3][ae.key].nodeId===void 0&&B[3][ae.key].populate(Z)}return q};let b;const _=()=>{o[Symbol.for("removeGlobalEffects")](b),b=null,b=M(o.languages,s,C)};o[Symbol.for("effects")].push(_),g(_,["languages"]);const U=()=>{o.activeIndex;for(let z=0;z<o.languages.length;z++){if(z<y||z>=v)continue;const B={};B.index=z,B.language=o.languages[z],B.key=z,s[2][B.key].set("alpha",B.index===o.activeIndex?1:.6)}};o[Symbol.for("effects")].push(U),g(U);const F=()=>{o.activeIndex;for(let z=0;z<o.languages.length;z++){if(z<y||z>=v)continue;const B={};B.index=z,B.language=o.languages[z],B.key=z,s[3][B.key].set("color",B.index===o.activeIndex?"0xffffffff":"0xaaaaaaff")}};return o[Symbol.for("effects")].push(F),g(F),s},effects:[],context:{}},props:["languages"],state(){return{activeIndex:0}},watch:{activeIndex(f){const i=this.languages[f];i&&i.code&&this.$language.set(i.code)}},input:{right(){this.activeIndex=Math.min(this.activeIndex+1,this.languages.length-1)},left(){this.activeIndex=Math.max(this.activeIndex-1,0)}}}),jC=tt.Component("LanguagePlugin",{components:{Flags:b6},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(v-=1);const b=l.components&&l.components.Flags||h.Flags;i=s[0];const _={};s[1]=this.element({parent:i||"root"},y===!0?C:o),_.languages=o.languages,_.ref="flags",_.x=500,_.y=150;const U=[];if(typeof b<"u")for(let W in b[Symbol.for("config")].props)delete _[b[Symbol.for("config")].props[W]],U.push(b[Symbol.for("config")].props[W]);s[1].populate(_),y===!0&&(v-=1),i=s[1];const F={};F.languages=o.languages,F.ref="flags",F.x=500,F.y=150,m=F.is||"Flags";let z;if(typeof m=="string"){if(z=l.components&&l.components[m]||h[m],!z)throw new Error('Component "Flags" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[2]=z.call(null,{props:F},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],C=s[2],y=!0):i=s[2][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),i=s[0];const B={};s[3]=this.element({parent:i||"root"},y===!0?C:o),B.x=960,B.y=540,B.mount=.5,B.content=o.$language.translate("hello"),B.size=80,B.__textnode=!0,s[3].populate(B),y===!0&&(v-=1),i=s[0];const G={};s[4]=this.element({parent:i||"root"},y===!0?C:o),G.x=960,G.y=640,G.mount=.5,G.content=o.$language.translate("bye"),G.size=50,G.__textnode=!0,s[4].populate(G),y===!0&&(v-=1),i=s[0];const X={};s[5]=this.element({parent:i||"root"},y===!0?C:o),X.x=960,X.y=720,X.mount=.5,X.content=o.$language.translate("replacement",{first:"John",last:"Doe",age:18}),X.size=36,X.__textnode=!0,s[5].populate(X),y===!0&&(v-=1),i=s[0];const Q={};return s[6]=this.element({parent:i||"root"},y===!0?C:o),Q.size=32,Q.x=960,Q.y=940,Q.mount=.5,Q.align="center",Q.content="Current language: "+o.$language.language+`
 Language file: `+(o.loaded===!0?"Loaded":"loading ..."),Q.__textnode=!0,s[6].populate(Q),y===!0&&(v-=1),s},effects:[function(i,o,l,h,g,x){o[3].set("content",i.$language.translate("hello"))},function(i,o,l,h,g,x){o[4].set("content",i.$language.translate("bye"))},function(i,o,l,h,g,x){o[5].set("content",i.$language.translate("replacement",{first:"John",last:"Doe",age:18}))},function(i,o,l,h,g,x){o[6].set("content","Current language: "+i.$language.language+`
 Language file: `+(i.loaded===!0?"Loaded":"loading ..."))}],context:{}},state(){return{loaded:!1,languages:[{flag:"/assets/flags/united-states.png",code:"en-US",name:"English"},{flag:"/assets/flags/netherlands.png",code:"nl-NL",name:"Dutch"},{flag:"/assets/flags/france.png",code:"fr-FR",name:"French"},{flag:"/assets/flags/germany.png",code:"de-DE",name:"German"}]}},hooks:{init(){this.$language.set("en-US"),setTimeout(()=>{this.$language.load("/assets/translations.json").then(()=>{this.loaded=!0})},2e3)},focus(){this.$select("flags").$focus()}}}),k6=tt.Component("Box",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=430,m.h=180,m.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}],m.color="{top: '0x667a97ff', bottom: '0x475569ff'}",s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.x=25,C.y=20,C.content=o.header,C.w=280,C.color="0x000000ff",C.contain="width",C.__textnode=!0,s[1].populate(C),i=s[0];const y={};return s[2]=this.element({parent:i||"root"},o),y.x=25,y.y=90,y.content=o.text,y.size=45,y.w=350,y.contain="width",y.align="center",y.__textnode=!0,s[2].populate(y),s},effects:[function(i,o,l,h,g,x){o[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}])},function(i,o,l,h,g,x){o[1].set("content",i.header)},function(i,o,l,h,g,x){o[2].set("content",i.text)}],context:{}},props:["header","text"]}),E6=tt.Application({components:{Box:k6},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),b.w=1920,b.h=1080,s[0].populate(b),v===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},v===!0?y:o),_.y=250,s[1].populate(_),v===!0&&(M-=1),i=s[1];const U={};s[2]=this.element({parent:i||"root"},v===!0?y:o),U.content="KeyCode Finder",U.font="raleway",U.mount="{x: 0.5}",U.x=960,U.size=62,U.w=800,U.h=200,U.contain="width",U.__textnode=!0,s[2].populate(U),v===!0&&(M-=1),i=s[1];const F={};s[3]=this.element({parent:i||"root"},v===!0?y:o),F.content="Press any key to get find the correct key code mapping",F.mount="{x: 0.5}",F.x=960,F.y=100,F.size=32,F.w=800,F.h=200,F.contain="width",F.__textnode=!0,s[3].populate(F),v===!0&&(M-=1),i=s[0];const z={};s[4]=this.element({parent:i||"root"},v===!0?y:o),z.x=200,s[4].populate(z),v===!0&&(M-=1);const B=l.components&&l.components.Box||h.Box;i=s[4];const G={};s[5]=this.element({parent:i||"root"},v===!0?y:o),G.y=600,G.header="Key",G.text=o.key;const X=[];if(typeof B<"u")for(let he in B[Symbol.for("config")].props)delete G[B[Symbol.for("config")].props[he]],X.push(B[Symbol.for("config")].props[he]);s[5].populate(G),v===!0&&(M-=1),i=s[5];const Q={};Q.y=600,Q.header="Key",C=o.key,Array.isArray(C)===!0&&(C=x(C).slice(0)),Q.text=C,m=Q.is||"Box";let W;if(typeof m=="string"){if(W=l.components&&l.components[m]||h[m],!W)throw new Error('Component "Box" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);s[6]=W.call(null,{props:Q},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],y=s[6],v=!0):i=s[6][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const te=l.components&&l.components.Box||h.Box;i=s[4];const de={};s[7]=this.element({parent:i||"root"},v===!0?y:o),de.x=500,de.y=600,de.header="Code",de.text=o.code;const I=[];if(typeof te<"u")for(let he in te[Symbol.for("config")].props)delete de[te[Symbol.for("config")].props[he]],I.push(te[Symbol.for("config")].props[he]);s[7].populate(de),v===!0&&(M-=1),i=s[7];const q={};q.x=500,q.y=600,q.header="Code",C=o.code,Array.isArray(C)===!0&&(C=x(C).slice(0)),q.text=C,m=q.is||"Box";let ee;if(typeof m=="string"){if(ee=l.components&&l.components[m]||h[m],!ee)throw new Error('Component "Box" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);s[8]=ee.call(null,{props:q},s[7],o),s[8][Symbol.for("slots")][0]?(i=s[8][Symbol.for("slots")][0],y=s[8],v=!0):i=s[8][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const ae=l.components&&l.components.Box||h.Box;i=s[4];const ne={};s[9]=this.element({parent:i||"root"},v===!0?y:o),ne.x=1e3,ne.y=600,ne.header="keyCode",ne.text=o.keyCode;const Y=[];if(typeof ae<"u")for(let he in ae[Symbol.for("config")].props)delete ne[ae[Symbol.for("config")].props[he]],Y.push(ae[Symbol.for("config")].props[he]);s[9].populate(ne),v===!0&&(M-=1),i=s[9];const Z={};Z.x=1e3,Z.y=600,Z.header="keyCode",C=o.keyCode,Array.isArray(C)===!0&&(C=x(C).slice(0)),Z.text=C,m=Z.is||"Box";let j;if(typeof m=="string"){if(j=l.components&&l.components[m]||h[m],!j)throw new Error('Component "Box" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(j=m);s[10]=j.call(null,{props:Z},s[9],o),s[10][Symbol.for("slots")][0]?(i=s[10][Symbol.for("slots")][0],y=s[10],v=!0):i=s[10][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),i=s[0];const fe={};return s[11]=this.element({parent:i||"root"},v===!0?y:o),fe.mount="{x: 1}",fe.x=1860,fe.y=1e3,fe.size=30,fe.content=o.backLabel,fe.color=o.backPressed?"0xffffffff":"0x667a97ff",fe.__textnode=!0,s[11].populate(fe),v===!0&&(M-=1),s},effects:[function(i,o,l,h,g,x){(typeof skip5>"u"||skip5.indexOf("text")===-1)&&o[5].set("text",i.key)},function(i,o,l,h,g,x){o[6][Symbol.for("props")].text=i.key},function(i,o,l,h,g,x){(typeof skip7>"u"||skip7.indexOf("text")===-1)&&o[7].set("text",i.code)},function(i,o,l,h,g,x){o[8][Symbol.for("props")].text=i.code},function(i,o,l,h,g,x){(typeof skip9>"u"||skip9.indexOf("text")===-1)&&o[9].set("text",i.keyCode)},function(i,o,l,h,g,x){o[10][Symbol.for("props")].text=i.keyCode},function(i,o,l,h,g,x){o[11].set("content",i.backLabel)},function(i,o,l,h,g,x){o[11].set("color",i.backPressed?"0xffffffff":"0x667a97ff")}],context:{}},state(){return{backPressed:!1,key:"...",code:"...",keyCode:"..."}},computed:{backLabel(){return this.backPressed,this.backPressed?"Press back key again to navigate back":""}},methods:{updateLabels(f){this.key=f.key,this.code=f.code,this.keyCode=f.keyCode+""}},input:{any(f){this.backPressed=!1,this.updateLabels(f)},back(f){return this.backPressed===!0?this.$router.back():this.updateLabels(f),()=>{this.backPressed=!0}}}}),A6=tt.Component("Accent",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=300,m.h=250,m.color=o.bColor,m.effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),i=s[0];const C={};return s[1]=this.element({parent:i||"root"},o),C.x=150,C.y=125,C.mount="{x:0.5, y:0.5}",C.content=o.lang,C.color="0xffffffff",C.font="lato-black",C.__textnode=!0,s[1].populate(C),s},effects:[function(i,o,l,h,g,x){o[0].set("color",i.bColor)},function(i,o,l,h,g,x){o[0].set("effects",[{type:"radius",props:{radius:8}}])},function(i,o,l,h,g,x){o[1].set("content",i.lang)}],context:{}},state(){return{bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["lang"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),I6=tt.Component("Accents",{components:{Accent:A6},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1;const M={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(M),i=s[0];const b={};s[1]=this.element({parent:i||"root"},v===!0?y:o),b.x={transition:o.x},s[1].populate(b),i=s[1];const _=[];let U,F;const z=(Q=[],W,te)=>{const de=x(Q),I=new Set;let q=de.length;const ee={};for(U=ee.from||0,F=("to"in ee)?ee.to:de.length;q--;){const Z=de[q];q<F&&q>=U&&I.add(""+Z.lang)}let ae=te.length;for(;ae--;)if(I.has(te[ae])===!1){const Z=te[ae];W[2][Z]&&W[2][Z].destroy(),delete W[2][Z],W[3][Z]&&W[3][Z].destroy(),delete W[3][Z]}te.length=0;const ne=de.length,Y=[];for(let Z=0;Z<ne;Z++){if(Z<U||Z>=F)continue;const j=Object.create(o);i=W[1],j.item=de[Z],j.index=Z,j.key=""+j.item.lang,te.push(j.key);const fe=l.components&&l.components.Accent||h.Accent;W[2]===void 0&&(W[2]={});const he={};W[2][j.key]===void 0&&(W[2][j.key]=this.element({parent:i||"root"},v===!0?y:o)),he.lang=j.item.lang,he.ref="accent"+j.index,he.x=j.index*400;const we=[];if(typeof fe<"u")for(let Ie in fe[Symbol.for("config")].props)delete he[fe[Symbol.for("config")].props[Ie]],we.push(fe[Symbol.for("config")].props[Ie]);W[2][j.key].nodeId===void 0&&W[2][j.key].populate(he),W[3]===void 0&&(W[3]={}),i=W[2][j.key];const ge={};if(W[3][j.key]===void 0){ge.lang=j.item.lang,C="accent"+j.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),ge.ref=C,ge.x=j.index*400,m=ge.is||"Accent";let Ie;if(typeof m=="string"){if(Ie=l.components&&l.components[m]||h[m],!Ie)throw new Error('Component "Accent" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ie=m);W[3][j.key]=Ie.call(null,{props:ge},W[2][j.key],o),W[3][j.key][Symbol.for("slots")][0]?(i=W[3][j.key][Symbol.for("slots")][0],y=W[3][j.key],v=!0):i=W[3][j.key][Symbol.for("children")][0]}let be=()=>{(typeof we>"u"||we.indexOf("ref")===-1)&&W[2][j.key].set("ref","accent"+j.index)};g(be,null),Y.push(be),o[Symbol.for("effects")].push(be),W[3][j.key][Symbol.for("props")].ref="accent"+j.index}return Y};let B;const G=()=>{o[Symbol.for("removeGlobalEffects")](B),B=null,B=z(o.data,s,_)};o[Symbol.for("effects")].push(G),g(G,["data"]),i=s[0];const X={};return s[4]=this.element({parent:i||"root"},v===!0?y:o),X.content=o.activeAccent,X.font="lato-black",X.x=960,X.y=400,X.mount="{x:0.5}",X.letterspacing=10,X.size=40,X.__textnode=!0,s[4].populate(X),s},effects:[function(i,o,l,h,g,x){o[1].set("x",{transition:i.x})},function(i,o,l,h,g,x){o[4].set("content",i.activeAccent)}],context:{}},props:["data"],state(){return{x:160,activeIndex:0,activeAccent:""}},watch:{activeIndex(f){const i=this.$select(`accent${f}`);i&&i.$focus&&(i.$focus(),this.activeAccent=this.data[f].chars)}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.activeIndex<this.data.length-1&&this.move(1)},left(){this.activeIndex>0&&this.move(-1)}},methods:{move(f){const i=this.activeIndex+f;this.x=i>3?-(i-3)*400-160:160,this.activeIndex=i}}}),M6=tt.Component("Characters",{components:{Accents:I6},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),M.w=1920,s[0].populate(M),y===!0&&(v-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.x=960,b.y=50,b.mount="{x:0.5}",b.content="Alphabets",b.font="lato-black",b.size=60,b.__textnode=!0,s[1].populate(b),y===!0&&(v-=1),i=s[0];const _={};s[2]=this.element({parent:i||"root"},y===!0?C:o),_.x=960,_.y=150,_.mount="{x:0.5}",_.content=o.alphabets,_.font="lato-black",_.size=40,_.letterspacing=10,_.__textnode=!0,s[2].populate(_),y===!0&&(v-=1),i=s[0];const U={};s[3]=this.element({parent:i||"root"},y===!0?C:o),U.x=960,U.y=290,U.mount="{x:0.5}",U.content="Accents",U.font="lato-black",U.size=60,U.__textnode=!0,s[3].populate(U),y===!0&&(v-=1);const F=l.components&&l.components.Accents||h.Accents;i=s[0];const z={};s[4]=this.element({parent:i||"root"},y===!0?C:o),z.data=o.accents,z.y=400,z.ref="accents";const B=[];if(typeof F<"u")for(let te in F[Symbol.for("config")].props)delete z[F[Symbol.for("config")].props[te]],B.push(F[Symbol.for("config")].props[te]);s[4].populate(z),y===!0&&(v-=1),i=s[4];const G={};G.data=o.accents,G.y=400,G.ref="accents",m=G.is||"Accents";let X;if(typeof m=="string"){if(X=l.components&&l.components[m]||h[m],!X)throw new Error('Component "Accents" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(X=m);s[5]=X.call(null,{props:G},s[4],o),s[5][Symbol.for("slots")][0]?(i=s[5][Symbol.for("slots")][0],C=s[5],y=!0):i=s[5][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),i=s[0];const Q={};s[6]=this.element({parent:i||"root"},y===!0?C:o),Q.w=950,Q.h=40,Q.color="0x000000ff",Q.effects=[{type:"radius",props:{radius:10}}],Q.y=1e3,Q.placement="center",s[6].populate(Q),y===!0&&(v-=1),i=s[6];const W={};return s[7]=this.element({parent:i||"root"},y===!0?C:o),W.content="The character ? represents a character that is not supported by the Lato-Black font",W.size=25,W.x=475,W.y=20,W.mount="{x:0.5, y:0.5}",W.__textnode=!0,s[7].populate(W),y===!0&&(v-=1),s},effects:[function(i,o,l,h,g,x){o[6].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state(){return{alphabets:"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",accents:[{lang:"Dutch",chars:"éèëïüáóĳĲ"},{lang:"French",chars:"éèêëàâîïôùûç"},{lang:"Spanish",chars:"áéíóúñü"},{lang:"Turkish",chars:"ÇçĞğİiÖöÜüŞş"}]}},hooks:{focus(){const f=this.$select("accents");f&&f.$focus&&f.$focus()}}}),_6=tt.Component("Layout",{components:{Ball:HT},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),M.w=1920,M.h=1080,M.color="0xc4b5fdff",s[0].populate(M),y===!0&&(v-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.x=40,b.y=40,s[1].populate(b),y===!0&&(v-=1),i=s[1];const _={};s[2]=this.element({parent:i||"root"},y===!0?C:o),_.color="0x222222ff",_.content="Static horizontal Layout",_.__textnode=!0,s[2].populate(_),y===!0&&(v-=1),i=s[1];const U={};s[3]=this.element({parent:i||"root"},y===!0?C:o),U.y=50,U.gap=10,U.__layout=!0,s[3].populate(U),y===!0&&(v-=1),i=s[3];const F={};s[4]=this.element({parent:i||"root"},y===!0?C:o),F.w=50,F.h=100,F.color="0xeff6ffff",s[4].populate(F),y===!0&&(v-=1),i=s[3];const z={};s[5]=this.element({parent:i||"root"},y===!0?C:o),z.w=60,z.h=100,z.color="0xbfdbfeff",s[5].populate(z),y===!0&&(v-=1),i=s[3];const B={};s[6]=this.element({parent:i||"root"},y===!0?C:o),B.w=70,B.h=100,B.color="0x60a5faff",s[6].populate(B),y===!0&&(v-=1),i=s[3];const G={};s[7]=this.element({parent:i||"root"},y===!0?C:o),G.w=80,G.h=100,G.color="0x2563ebff",s[7].populate(G),y===!0&&(v-=1),i=s[3];const X={};s[8]=this.element({parent:i||"root"},y===!0?C:o),X.w=90,X.h=100,X.color="0x1e40afff",s[8].populate(X),y===!0&&(v-=1),i=s[0];const Q={};s[9]=this.element({parent:i||"root"},y===!0?C:o),Q.x=40,Q.y=220,s[9].populate(Q),y===!0&&(v-=1),i=s[9];const W={};s[10]=this.element({parent:i||"root"},y===!0?C:o),W.color="0x222222ff",W.content="Static vertical Layout",W.__textnode=!0,s[10].populate(W),y===!0&&(v-=1),i=s[9];const te={};s[11]=this.element({parent:i||"root"},y===!0?C:o),te.y=50,te.gap=10,te.direction="vertical",te.__layout=!0,s[11].populate(te),y===!0&&(v-=1),i=s[11];const de={};s[12]=this.element({parent:i||"root"},y===!0?C:o),de.w=100,de.h=50,de.color="0xeff6ffff",s[12].populate(de),y===!0&&(v-=1),i=s[11];const I={};s[13]=this.element({parent:i||"root"},y===!0?C:o),I.w=100,I.h=60,I.color="0xbfdbfeff",s[13].populate(I),y===!0&&(v-=1),i=s[11];const q={};s[14]=this.element({parent:i||"root"},y===!0?C:o),q.w=100,q.h=70,q.color="0x60a5faff",s[14].populate(q),y===!0&&(v-=1),i=s[11];const ee={};s[15]=this.element({parent:i||"root"},y===!0?C:o),ee.w=100,ee.h=80,ee.color="0x2563ebff",s[15].populate(ee),y===!0&&(v-=1),i=s[11];const ae={};s[16]=this.element({parent:i||"root"},y===!0?C:o),ae.w=100,ae.h=90,ae.color="0x1e40afff",s[16].populate(ae),y===!0&&(v-=1),i=s[0];const ne={};s[17]=this.element({parent:i||"root"},y===!0?C:o),ne.x=40,ne.y=700,s[17].populate(ne),y===!0&&(v-=1),i=s[17];const Y={};s[18]=this.element({parent:i||"root"},y===!0?C:o),Y.color="0x222222ff",Y.content="Nested Layouts",Y.__textnode=!0,s[18].populate(Y),y===!0&&(v-=1),i=s[17];const Z={};s[19]=this.element({parent:i||"root"},y===!0?C:o),Z.y=50,Z.gap=10,Z.direction="horizontal",Z.__layout=!0,s[19].populate(Z),y===!0&&(v-=1),i=s[19];const j={};s[20]=this.element({parent:i||"root"},y===!0?C:o),j.w=100,j.h=50,j.color="0xeff6ffff",s[20].populate(j),y===!0&&(v-=1),i=s[19];const fe={};s[21]=this.element({parent:i||"root"},y===!0?C:o),fe.w=100,fe.h=60,fe.color="0xbfdbfeff",s[21].populate(fe),y===!0&&(v-=1),i=s[19];const he={};s[22]=this.element({parent:i||"root"},y===!0?C:o),he.direction="vertical",he.gap=10,he.__layout=!0,s[22].populate(he),y===!0&&(v-=1),i=s[22];const we={};s[23]=this.element({parent:i||"root"},y===!0?C:o),we.w=100,we.h=70,we.color="0x60a5faff",s[23].populate(we),y===!0&&(v-=1),i=s[22];const ge={};s[24]=this.element({parent:i||"root"},y===!0?C:o),ge.w=100,ge.h=70,ge.color="0x60a5faff",s[24].populate(ge),y===!0&&(v-=1),i=s[22];const be={};s[25]=this.element({parent:i||"root"},y===!0?C:o),be.w=100,be.h=70,be.color="0x60a5faff",s[25].populate(be),y===!0&&(v-=1),i=s[22];const Ie={};s[26]=this.element({parent:i||"root"},y===!0?C:o),Ie.gap=50,Ie.__layout=!0,s[26].populate(Ie),y===!0&&(v-=1),i=s[26];const V={};s[27]=this.element({parent:i||"root"},y===!0?C:o),V.w=50,V.h=50,V.color="0x2563ebff",s[27].populate(V),y===!0&&(v-=1),i=s[26];const De={};s[28]=this.element({parent:i||"root"},y===!0?C:o),De.w=50,De.h=50,De.color="0x2563ebff",s[28].populate(De),y===!0&&(v-=1),i=s[26];const Se={};s[29]=this.element({parent:i||"root"},y===!0?C:o),Se.w=50,Se.h=50,Se.color="0x2563ebff",s[29].populate(Se),y===!0&&(v-=1),i=s[19];const me={};s[30]=this.element({parent:i||"root"},y===!0?C:o),me.w=100,me.h=80,me.color="0x2563ebff",s[30].populate(me),y===!0&&(v-=1),i=s[19];const Re={};s[31]=this.element({parent:i||"root"},y===!0?C:o),Re.w=100,Re.h=90,Re.color="0x1e40afff",s[31].populate(Re),y===!0&&(v-=1),i=s[0];const Ne={};s[32]=this.element({parent:i||"root"},y===!0?C:o),Ne.x=800,Ne.y=40,s[32].populate(Ne),y===!0&&(v-=1),i=s[32];const $e={};s[33]=this.element({parent:i||"root"},y===!0?C:o),$e.color="0x222222ff",$e.content="Layout with Text",$e.__textnode=!0,s[33].populate($e),y===!0&&(v-=1),i=s[32];const Pe={};s[34]=this.element({parent:i||"root"},y===!0?C:o),Pe.y=50,Pe.gap=20,Pe.__layout=!0,s[34].populate(Pe),y===!0&&(v-=1),i=s[34];const ve={};s[35]=this.element({parent:i||"root"},y===!0?C:o),ve.w=3,ve.h=32,ve.color="0x60a5faff",s[35].populate(ve),y===!0&&(v-=1),i=s[34];const Ye={};s[36]=this.element({parent:i||"root"},y===!0?C:o),Ye.color="0x1e40afff",Ye.content="Hello",Ye.__textnode=!0,s[36].populate(Ye),y===!0&&(v-=1),i=s[34];const it={};s[37]=this.element({parent:i||"root"},y===!0?C:o),it.w=3,it.h=32,it.color="0x60a5faff",s[37].populate(it),y===!0&&(v-=1),i=s[34];const Ke={};s[38]=this.element({parent:i||"root"},y===!0?C:o),Ke.content="World",Ke.color="0x1e40afff",Ke.__textnode=!0,s[38].populate(Ke),y===!0&&(v-=1),i=s[34];const lt={};s[39]=this.element({parent:i||"root"},y===!0?C:o),lt.w=3,lt.h=32,lt.color="0x60a5faff",s[39].populate(lt),y===!0&&(v-=1),i=s[0];const St={};s[40]=this.element({parent:i||"root"},y===!0?C:o),St.x=800,St.y=210,s[40].populate(St),y===!0&&(v-=1),i=s[40];const ft={};s[41]=this.element({parent:i||"root"},y===!0?C:o),ft.color="0x222222ff",ft.content="Dynamic dimensions Layout",ft.__textnode=!0,s[41].populate(ft),y===!0&&(v-=1),i=s[40];const Tt={};s[42]=this.element({parent:i||"root"},y===!0?C:o),Tt.y=50,Tt.gap=20,Tt["@updated"]=o.dynamicLayoutUpdated&&o.dynamicLayoutUpdated.bind(o),Tt.__layout=!0,s[42].populate(Tt),y===!0&&(v-=1),i=s[42];const je={};s[43]=this.element({parent:i||"root"},y===!0?C:o),je.w=o.w*.5,je.h=60,je.color="0xeff6ffff",s[43].populate(je),y===!0&&(v-=1),i=s[42];const Dt={};s[44]=this.element({parent:i||"root"},y===!0?C:o),Dt.w=o.w*.6,Dt.h=60,Dt.color="0xbfdbfeff",s[44].populate(Dt),y===!0&&(v-=1),i=s[42];const wt={};s[45]=this.element({parent:i||"root"},y===!0?C:o),wt.w=o.w*.7,wt.h=60,wt.color="0x60a5faff",s[45].populate(wt),y===!0&&(v-=1),i=s[42];const Qe={};s[46]=this.element({parent:i||"root"},y===!0?C:o),Qe.w=o.w*.8,Qe.h=60,Qe.color="0x2563ebff",s[46].populate(Qe),y===!0&&(v-=1),i=s[42];const gn={};s[47]=this.element({parent:i||"root"},y===!0?C:o),gn.w=o.w*.9,gn.h=60,gn.color="0x1e40afff",s[47].populate(gn),y===!0&&(v-=1),i=s[0];const un={};s[48]=this.element({parent:i||"root"},y===!0?C:o),un.x=800,un.y=400,s[48].populate(un),y===!0&&(v-=1),i=s[48];const qt={};s[49]=this.element({parent:i||"root"},y===!0?C:o),qt.color="0x222222ff",qt.content="For loop Layout",qt.__textnode=!0,s[49].populate(qt),y===!0&&(v-=1),i=s[48];const xt={};s[50]=this.element({parent:i||"root"},y===!0?C:o),xt.y=50,xt.gap=20,xt.__layout=!0,s[50].populate(xt),y===!0&&(v-=1),i=s[50];const Gt=[];let vt,Ot;const uo=(Fe=[],Le,fo)=>{const Uo=x(Fe),ti=new Set;let Bo=Uo.length;const Oi={};for(vt=Oi.from||0,Ot=("to"in Oi)?Oi.to:Uo.length;Bo--;)Uo[Bo],Bo<Ot&&Bo>=vt&&ti.add(""+Bo);let Wi=fo.length;for(;Wi--;)if(ti.has(fo[Wi])===!1){const Ft=fo[Wi];Le[51][Ft]&&Le[51][Ft].destroy(),delete Le[51][Ft]}fo.length=0;const pl=Uo.length,Sn=[];for(let Ft=0;Ft<pl;Ft++){if(Ft<vt||Ft>=Ot)continue;const kt=Object.create(o);i=Le[50],kt.color=Uo[Ft],kt.undefined=Ft,kt.key=""+Ft,fo.push(kt.key),i=Le[50],Le[51]===void 0&&(Le[51]={});const di={};Le[51][kt.key]===void 0&&(Le[51][kt.key]=this.element({parent:i||"root"},y===!0?C:o)),di.w=60,di.h=60,di.color=kt.color,Le[51][kt.key].nodeId===void 0&&(Le[51][kt.key].populate(di),y===!0&&(v-=1))}return Sn};let bt;const jt=()=>{o[Symbol.for("removeGlobalEffects")](bt),bt=null,bt=uo(o.colors,s,Gt)};o[Symbol.for("effects")].push(jt),g(jt,["colors"]);const kn=()=>{o.color;for(let Fe=0;Fe<o.colors.length;Fe++){if(Fe<vt||Fe>=Ot)continue;const Le={};Le.undefined=Fe,Le.color=o.colors[Fe],Le.key=Fe,s[51][Le.key].set("color",Le.color)}};o[Symbol.for("effects")].push(kn),g(kn),i=s[0];const to={};s[52]=this.element({parent:i||"root"},y===!0?C:o),to.x=800,to.y=600,s[52].populate(to),y===!0&&(v-=1),i=s[52];const Et={};s[53]=this.element({parent:i||"root"},y===!0?C:o),Et.color="0x222222ff",Et.content="Layout with transitions",Et.__textnode=!0,s[53].populate(Et),y===!0&&(v-=1),i=s[52];const En={};s[54]=this.element({parent:i||"root"},y===!0?C:o),En.direction="horizontal",En.gap=20,En.y=60,En.__layout=!0,s[54].populate(En),y===!0&&(v-=1),i=s[54];const Jo=[];let Qt,Rn;const Mo=(Fe=[],Le,fo)=>{const Uo=x(Fe),ti=new Set;let Bo=Uo.length;const Oi={};for(Qt=Oi.from||0,Rn=("to"in Oi)?Oi.to:Uo.length;Bo--;)Uo[Bo],Bo<Rn&&Bo>=Qt&&ti.add(""+Bo);let Wi=fo.length;for(;Wi--;)if(ti.has(fo[Wi])===!1){const Ft=fo[Wi];Le[55][Ft]&&Le[55][Ft].destroy(),delete Le[55][Ft],Le[56][Ft]&&Le[56][Ft].destroy(),delete Le[56][Ft],Le[57][Ft]&&Le[57][Ft].destroy(),delete Le[57][Ft],Le[58][Ft]&&Le[58][Ft].destroy(),delete Le[58][Ft],Le[59][Ft]&&Le[59][Ft].destroy(),delete Le[59][Ft],Le[60][Ft]&&Le[60][Ft].destroy(),delete Le[60][Ft]}fo.length=0;const pl=Uo.length,Sn=[];for(let Ft=0;Ft<pl;Ft++){if(Ft<Qt||Ft>=Rn)continue;const kt=Object.create(o);i=Le[54],kt.color=Uo[Ft],kt.undefined=Ft,kt.key=""+Ft,fo.push(kt.key),i=Le[54],Le[55]===void 0&&(Le[55]={});const di={};Le[55][kt.key]===void 0&&(Le[55][kt.key]=this.element({parent:i||"root"},y===!0?C:o)),di.h=100,di.w={transition:{value:kt.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},di.color=kt.color,Le[55][kt.key].nodeId===void 0&&(Le[55][kt.key].populate(di),y===!0&&(v-=1)),i=Le[55][kt.key],Le[56]===void 0&&(Le[56]={});const Ni={};Le[56][kt.key]===void 0&&(Le[56][kt.key]=this.element({parent:i||"root"},y===!0?C:o)),Ni.gap=10,Ni.x=10,Ni.y=35,Ni.__layout=!0,Le[56][kt.key].nodeId===void 0&&(Le[56][kt.key].populate(Ni),y===!0&&(v-=1)),i=Le[56][kt.key],Le[57]===void 0&&(Le[57]={});const Xi={};Le[57][kt.key]===void 0&&(Le[57][kt.key]=this.element({parent:i||"root"},y===!0?C:o)),Xi.h=20,Xi.w={transition:{value:kt.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Xi.color="0xffffffff",Le[57][kt.key].nodeId===void 0&&(Le[57][kt.key].populate(Xi),y===!0&&(v-=1)),i=Le[56][kt.key],Le[58]===void 0&&(Le[58]={});const qi={};Le[58][kt.key]===void 0&&(Le[58][kt.key]=this.element({parent:i||"root"},y===!0?C:o)),qi.h=20,qi.w={transition:{value:kt.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},qi.color="0xccccccff",Le[58][kt.key].nodeId===void 0&&(Le[58][kt.key].populate(qi),y===!0&&(v-=1)),i=Le[56][kt.key],Le[59]===void 0&&(Le[59]={});const Os={};Le[59][kt.key]===void 0&&(Le[59][kt.key]=this.element({parent:i||"root"},y===!0?C:o)),Os.h=20,Os.w={transition:{value:kt.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Os.color="0x333333ff",Le[59][kt.key].nodeId===void 0&&(Le[59][kt.key].populate(Os),y===!0&&(v-=1)),i=Le[56][kt.key],Le[60]===void 0&&(Le[60]={});const ts={};Le[60][kt.key]===void 0&&(Le[60][kt.key]=this.element({parent:i||"root"},y===!0?C:o)),ts.h=20,ts.w={transition:{value:kt.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},ts.color="0x000000ff",Le[60][kt.key].nodeId===void 0&&(Le[60][kt.key].populate(ts),y===!0&&(v-=1))}return Sn};let Ln;const Kn=()=>{o[Symbol.for("removeGlobalEffects")](Ln),Ln=null,Ln=Mo(o.colors,s,Jo)};o[Symbol.for("effects")].push(Kn),g(Kn,["colors"]);const ro=()=>{o.w3;for(let Fe=0;Fe<o.colors.length;Fe++){if(Fe<Qt||Fe>=Rn)continue;const Le={};Le.undefined=Fe,Le.color=o.colors[Fe],Le.key=Fe,s[55][Le.key].set("w",{transition:{value:o.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};o[Symbol.for("effects")].push(ro),g(ro);const Dn=()=>{o.color;for(let Fe=0;Fe<o.colors.length;Fe++){if(Fe<Qt||Fe>=Rn)continue;const Le={};Le.undefined=Fe,Le.color=o.colors[Fe],Le.key=Fe,s[55][Le.key].set("color",Le.color)}};o[Symbol.for("effects")].push(Dn),g(Dn);const st=()=>{o.w2;for(let Fe=0;Fe<o.colors.length;Fe++){if(Fe<Qt||Fe>=Rn)continue;const Le={};Le.undefined=Fe,Le.color=o.colors[Fe],Le.key=Fe,s[57][Le.key].set("w",{transition:{value:o.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};o[Symbol.for("effects")].push(st),g(st);const _o=()=>{o.w2;for(let Fe=0;Fe<o.colors.length;Fe++){if(Fe<Qt||Fe>=Rn)continue;const Le={};Le.undefined=Fe,Le.color=o.colors[Fe],Le.key=Fe,s[58][Le.key].set("w",{transition:{value:o.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};o[Symbol.for("effects")].push(_o),g(_o);const hn=()=>{o.w2;for(let Fe=0;Fe<o.colors.length;Fe++){if(Fe<Qt||Fe>=Rn)continue;const Le={};Le.undefined=Fe,Le.color=o.colors[Fe],Le.key=Fe,s[59][Le.key].set("w",{transition:{value:o.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};o[Symbol.for("effects")].push(hn),g(hn);const ei=()=>{o.w2;for(let Fe=0;Fe<o.colors.length;Fe++){if(Fe<Qt||Fe>=Rn)continue;const Le={};Le.undefined=Fe,Le.color=o.colors[Fe],Le.key=Fe,s[60][Le.key].set("w",{transition:{value:o.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};o[Symbol.for("effects")].push(ei),g(ei),i=s[0];const Fn={};s[61]=this.element({parent:i||"root"},y===!0?C:o),Fn.x=800,Fn.y=840,s[61].populate(Fn),y===!0&&(v-=1),i=s[61];const fn={};s[62]=this.element({parent:i||"root"},y===!0?C:o),fn.color="0x222222ff",fn.content="Layout with padding",fn.__textnode=!0,s[62].populate(fn),y===!0&&(v-=1),i=s[61];const $n={};s[63]=this.element({parent:i||"root"},y===!0?C:o),$n.direction="horizontal",$n.gap=20,$n.y=60,$n.padding=20,$n.color="0xffffffff",$n.__layout=!0,s[63].populate($n),y===!0&&(v-=1),i=s[63];const no={};s[64]=this.element({parent:i||"root"},y===!0?C:o),no.w=40,no.h=40,no.color="0xbfdbfeff",s[64].populate(no),y===!0&&(v-=1),i=s[63];const An={};s[65]=this.element({parent:i||"root"},y===!0?C:o),An.w=40,An.h=40,An.color="0x60a5faff",s[65].populate(An),y===!0&&(v-=1),i=s[63];const In={};s[66]=this.element({parent:i||"root"},y===!0?C:o),In.w=40,In.h=40,In.color="0x2563ebff",s[66].populate(In),y===!0&&(v-=1),i=s[61];const ot={};s[67]=this.element({parent:i||"root"},y===!0?C:o),ot.direction="horizontal",ot.gap=20,ot.y=60,ot.x=240,ot.padding={top:40,y:10,left:40,x:10},ot.color="0xffffffff",ot.__layout=!0,s[67].populate(ot),y===!0&&(v-=1),i=s[67];const Ve={};s[68]=this.element({parent:i||"root"},y===!0?C:o),Ve.w=40,Ve.h=40,Ve.color="0xbfdbfeff",s[68].populate(Ve),y===!0&&(v-=1),i=s[67];const Zt={};s[69]=this.element({parent:i||"root"},y===!0?C:o),Zt.w=40,Zt.h=40,Zt.color="0x60a5faff",s[69].populate(Zt),y===!0&&(v-=1),i=s[67];const wn={};s[70]=this.element({parent:i||"root"},y===!0?C:o),wn.w=40,wn.h=40,wn.color="0x2563ebff",s[70].populate(wn),y===!0&&(v-=1),i=s[61];const Bn={};s[71]=this.element({parent:i||"root"},y===!0?C:o),Bn.direction="vertical",Bn.gap=20,Bn.y=60,Bn.x=500,Bn.padding=20,Bn.color="0xffffffff",Bn.__layout=!0,s[71].populate(Bn),y===!0&&(v-=1),i=s[71];const Ct={};s[72]=this.element({parent:i||"root"},y===!0?C:o),Ct.w=40,Ct.h=20,Ct.color="0xbfdbfeff",s[72].populate(Ct),y===!0&&(v-=1),i=s[71];const Ge={};s[73]=this.element({parent:i||"root"},y===!0?C:o),Ge.w=40,Ge.h=20,Ge.color="0x60a5faff",s[73].populate(Ge),y===!0&&(v-=1),i=s[71];const ie={};s[74]=this.element({parent:i||"root"},y===!0?C:o),ie.w=40,ie.h=20,ie.color="0x2563ebff",s[74].populate(ie),y===!0&&(v-=1),i=s[61];const We={};s[75]=this.element({parent:i||"root"},y===!0?C:o),We.direction="vertical",We.gap=20,We.y=60,We.x=640,We.padding={top:40,y:10,left:40,x:10},We.color="0xffffffff",We.__layout=!0,s[75].populate(We),y===!0&&(v-=1),i=s[75];const qe={};s[76]=this.element({parent:i||"root"},y===!0?C:o),qe.w=40,qe.h=20,qe.color="0xbfdbfeff",s[76].populate(qe),y===!0&&(v-=1),i=s[75];const Ze={};s[77]=this.element({parent:i||"root"},y===!0?C:o),Ze.w=40,Ze.h=20,Ze.color="0x60a5faff",s[77].populate(Ze),y===!0&&(v-=1),i=s[75];const Me={};s[78]=this.element({parent:i||"root"},y===!0?C:o),Me.w=40,Me.h=20,Me.color="0x2563ebff",s[78].populate(Me),y===!0&&(v-=1),i=s[0];const Be={};s[79]=this.element({parent:i||"root"},y===!0?C:o),Be.x=1300,Be.y=210,s[79].populate(Be),y===!0&&(v-=1),i=s[79];const ht={};s[80]=this.element({parent:i||"root"},y===!0?C:o),ht.color="0x222222ff",ht.content="Layout with a Component",ht.__textnode=!0,s[80].populate(ht),y===!0&&(v-=1),i=s[79];const Pt={};s[81]=this.element({parent:i||"root"},y===!0?C:o),Pt.y=50,Pt.gap=40,Pt.__layout=!0,s[81].populate(Pt),y===!0&&(v-=1),i=s[81];const At={};s[82]=this.element({parent:i||"root"},y===!0?C:o),At.w=100,At.h=100,At.color="0xff0000ff",s[82].populate(At),y===!0&&(v-=1),i=s[81];const Ce={};s[83]=this.element({parent:i||"root"},y===!0?C:o),Ce.w=o.w,Ce.h=100,Ce.color="0xff0000ff",s[83].populate(Ce),y===!0&&(v-=1);const pe=l.components&&l.components.Ball||h.Ball;i=s[81];const nt={};s[84]=this.element({parent:i||"root"},y===!0?C:o),nt.y=500,nt.w=100;const Bt=[];if(typeof pe<"u")for(let Fe in pe[Symbol.for("config")].props)delete nt[pe[Symbol.for("config")].props[Fe]],Bt.push(pe[Symbol.for("config")].props[Fe]);s[84].populate(nt),y===!0&&(v-=1),i=s[84];const zn={};zn.y=500,zn.w=100,m=zn.is||"Ball";let yn;if(typeof m=="string"){if(yn=l.components&&l.components[m]||h[m],!yn)throw new Error('Component "Ball" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(yn=m);s[85]=yn.call(null,{props:zn},s[84],o),s[85][Symbol.for("slots")][0]?(i=s[85][Symbol.for("slots")][0],C=s[85],y=!0):i=s[85][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),i=s[81];const Yn={};return s[86]=this.element({parent:i||"root"},y===!0?C:o),Yn.w=100,Yn.h=100,Yn.color="0xff0000ff",s[86].populate(Yn),y===!0&&(v-=1),s},effects:[function(i,o,l,h,g,x){o[43].set("w",i.w*.5)},function(i,o,l,h,g,x){o[44].set("w",i.w*.6)},function(i,o,l,h,g,x){o[45].set("w",i.w*.7)},function(i,o,l,h,g,x){o[46].set("w",i.w*.8)},function(i,o,l,h,g,x){o[47].set("w",i.w*.9)},function(i,o,l,h,g,x){o[67].set("padding",{top:40,y:10,left:40,x:10})},function(i,o,l,h,g,x){o[75].set("padding",{top:40,y:10,left:40,x:10})},function(i,o,l,h,g,x){o[83].set("w",i.w)}],context:{}},state(){return{w:50,colors:["green","red","blue","yellow"],w3:150,w2:20}},hooks:{ready(){this.$setInterval(()=>{this.w=this.w===100?50:100,this.w2=this.w2===20?40:20,this.w3=this.w3===150?250:150},2e3),this.$setTimeout(()=>{this.colors.push("purple")},4e3)}},methods:{dynamicLayoutUpdated(f){this.$log.info("Dynamic layout updated",f.w,f.h)}}}),Y0=typeof window<"u"?window:{};let GT;const R6=f=>{GT=f};let Rg;const Sg=[],zu={};let ud,Ls;Y0.__firebolt&&Y0.__firebolt.testHarness&&(Ls=Y0.__firebolt.testHarness);function WT(f){console.debug("Sending message to transport: "+f);let i=JSON.parse(f);if(Array.isArray(i)){i.forEach(h=>WT(JSON.stringify(h)));return}let[o,l]=i.method.split(".");Ls&&Ls.onSend&&Ls.onSend(o,l,i.params,i.id),l.match(/^on[A-Z]/)&&(i.params.listen?zu[i.id]=o.toLowerCase()+"."+l[2].toLowerCase()+l.substr(3):Object.keys(zu).forEach(h=>{zu[h]===o.toLowerCase()+"."+l[2].toLowerCase()+l.substr(3)&&delete zu[h]})),Rg?XT(i):Sg.push(i)}function XT(f){let i;try{i=P6(f.method,f.params)}catch{setTimeout(()=>ud(JSON.stringify({jsonrpc:"2.0",error:{code:-32602,message:"Invalid params (this is a mock error from the mock transport layer)"},id:f.id})))}setTimeout(()=>ud(JSON.stringify({jsonrpc:"2.0",result:i,id:f.id})))}function L6(f){ud=f,Ls&&typeof Ls.initialize=="function"&&Ls.initialize({emit:qT,listen:function(...i){GT(...i)}})}function qT(f,i,o){const l=Object.entries(zu).find(([h,g])=>g.toLowerCase()===f.toLowerCase()+"."+i.toLowerCase());if(l){let h=JSON.stringify({jsonrpc:"2.0",id:parseInt(l[0]),result:o});ud(h)}}function D6(f={},i){const o=i.split(".");let l=f;for(let h=0;h<o.length;h++)l=(Object.entries(l).find(([g,x])=>g.toLowerCase()===o[h].toLowerCase())||[null,{}])[1];return l}function P6(f,i){let o=D6(Rg,f);return f.match(/^[a-zA-Z]+\.on[A-Za-z]+$/)&&(o={event:f,listening:!0}),typeof o=="function"?i==null?o():o(i):o}function O6(f){Rg=f,Sg.forEach(i=>XT(i)),Sg.length=0}const fd={send:WT,receive:L6,event:qT};function KT(f,i,o){const l=f?Object.values(f).length:0;return l===o&&i===void 0?"getter":l===o&&typeof i=="function"||l===0&&typeof i=="function"?"subscriber":l===o&&i!==void 0?"setter":null}const Q0={};function N6(f,i,o,l,h,g){const x=KT(o,l,h),w=h?"."+Object.keys(o).filter(m=>m!=="value").map(m=>o[m]).join("."):"",s=`${f}.${i}${w}`;if(x==="getter")return Q0.hasOwnProperty(s)?Q0[s]:g;if(x!=="subscriber"){if(x==="setter")return Q0[s]=l,fd.event(f,`${i}Changed`,{value:l}),null}}const bn={mock:N6},YT={closedCaptions:{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]},closedCaptionsSettings:function(f){return bn.mock("Accessibility","closedCaptionsSettings",f,void 0,0,{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]})},voiceGuidance:{enabled:!0,speed:2},voiceGuidanceSettings:function(f){return bn.mock("Accessibility","voiceGuidanceSettings",f,void 0,0,{enabled:!0,speed:2})},audioDescriptionSettings:function(f){return bn.mock("Accessibility","audioDescriptionSettings",f,void 0,0,{enabled:!0})}},U6={id:function(f){return bn.mock("Account","id",f,void 0,0,"123")},uid:function(f){return bn.mock("Account","uid",f,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")}},B6={config:{adServerUrl:"https://demo.v.fwmrm.net/ad/p/1",adServerUrlTemplate:"https://demo.v.fwmrm.net/ad/p/1?flag=+sltp+exvt+slcb+emcr+amcb+aeti&prof=12345:caf_allinone_profile &nw=12345&mode=live&vdur=123&caid=a110523018&asnw=372464&csid=gmott_ios_tablet_watch_live_ESPNU&ssnw=372464&vip=198.205.92.1&resp=vmap1&metr=1031&pvrn=12345&vprn=12345&vcid=1X0Ce7L3xRWlTeNhc7br8Q%3D%3D",adNetworkId:"519178",adProfileId:"12345:caf_allinone_profile",adSiteSectionId:"caf_allinone_profile_section",adOptOut:!0,privacyData:"ew0KICAicGR0IjogImdkcDp2MSIsDQogICJ1c19wcml2YWN5IjogIjEtTi0iLA0KICAibG10IjogIjEiIA0KfQ0K",ifaValue:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa:"ewogICJ2YWx1ZSI6ICIwMTIzNDU2Ny04OUFCLUNERUYtR0gwMS0yMzQ1Njc4OUFCQ0QiLAogICJpZmFfdHlwZSI6ICJzc3BpZCIsCiAgImxtdCI6ICIwIgp9Cg==",appName:"FutureToday",appBundleId:"FutureToday.comcast",distributorAppId:"1001",deviceAdAttributes:"ewogICJib0F0dHJpYnV0ZXNGb3JSZXZTaGFyZUlkIjogIjEyMzQiCn0=",coppa:0,authenticationEntity:"60f72475281cfba3852413bd53e957f6"},policy:function(f){return bn.mock("Advertising","policy",f,void 0,0,{skipRestriction:"adsUnwatched",limitAdTracking:!1})},advertisingId:{ifa:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa_type:"sspid",lmt:"0"},deviceAttributes:{},appBundleId:"app.operator"},j6={token:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",expires:"2022-04-23T18:25:43.511Z",type:"platform"},device:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",session:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",root:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},F6={supported:!0,available:!0,permitted:!0,granted:!0,info:[{capability:"xrn:firebolt:capability:device:model",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:input:keyboard",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:protocol:bluetoothle",supported:!1,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unsupported"]},{capability:"xrn:firebolt:capability:token:device",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:token:platform",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unavailable"]},{capability:"xrn:firebolt:capability:protocol:moca",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["disabled","unavailable"]},{capability:"xrn:firebolt:capability:wifi:scan",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unpermitted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:null},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:locality",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["grantDenied","ungranted"]}],request:[{capability:"xrn:firebolt:capability:commerce:purchase",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}}]},QT={id:function(f){return bn.mock("Device","id",f,void 0,0,"123")},distributor:function(f){return bn.mock("Device","distributor",f,void 0,0,"Company")},platform:function(f){return bn.mock("Device","platform",f,void 0,0,"WPE")},uid:function(f){return bn.mock("Device","uid",f,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")},type:function(f){return bn.mock("Device","type",f,void 0,0,"STB")},model:function(f){return bn.mock("Device","model",f,void 0,0,"xi6")},sku:function(f){return bn.mock("Device","sku",f,void 0,0,"AX061AEI")},make:function(f){return bn.mock("Device","make",f,void 0,0,"Arris")},version:function(f){return bn.mock("Device","version",f,void 0,0,{sdk:{major:0,minor:8,patch:0,readable:"Firebolt JS SDK v0.8.0"},api:{major:0,minor:8,patch:0,readable:"Firebolt API v0.8.0"},firmware:{major:1,minor:2,patch:3,readable:"Device Firmware v1.2.3"},os:{major:0,minor:1,patch:0,readable:"Firebolt OS v0.1.0"},debug:"Non-parsable build info for error logging only."})},hdcp:function(f){return bn.mock("Device","hdcp",f,void 0,0,{"hdcp1.4":!0,"hdcp2.2":!0})},hdr:function(f){return bn.mock("Device","hdr",f,void 0,0,{hdr10:!0,hdr10Plus:!0,dolbyVision:!0,hlg:!0})},audio:function(f){return bn.mock("Device","audio",f,void 0,0,{stereo:!0,"dolbyDigital5.1":!0,"dolbyDigital5.1+":!0,dolbyAtmos:!0})},screenResolution:function(f){return bn.mock("Device","screenResolution",f,void 0,0,[1920,1080])},videoResolution:function(f){return bn.mock("Device","videoResolution",f,void 0,0,[1920,1080])},name:function(f){return bn.mock("Device","name",f,void 0,0,"Living Room")},network:function(f){return bn.mock("Device","network",f,void 0,0,{state:"connected",type:"wifi"})}},$6={policy:function(f){return bn.mock("Discovery","policy",f,void 0,0,{enableRecommendations:!0,shareWatchHistory:!0,rememberWatchedPrograms:!0})},entityInfo:!0,purchasedContent:!0,watched:!0,watchNext:!0,entitlements:!0,contentAccess:null,clearContentAccess:null,launch:!0,signIn:!0,signOut:!0,userInterest:null,userInterestResponse:null,userInterestError:null},z6={email:"user@domain.com",password:"abc123",standard:"Living Room"};let za={state:"inactive",previous:"initializing"},FC={state:"foreground",previous:"inactive"},$C={state:"unloading",previous:"inactive"};const Lu=f=>{fd.event("Lifecycle",f.state,f)},cd=typeof window<"u"?window:{},Du=cd.__firebolt?!!cd.__firebolt.automation:!1,V6={ready:function(){za.previous="initializing",setTimeout(()=>Lu(za),Du?1:500),FC.previous="inactive",setTimeout(()=>Lu(FC),Du?2:1e3)},close:function(f){let i=f.reason;if(i==="remoteButton")za.previous="foreground",setTimeout(()=>Lu(za),Du?1:500);else if(["userExit","error"].includes(i))za.previous="foreground",$C.previous="inactive",setTimeout(()=>Lu(za),Du?1:500),setTimeout(()=>Lu($C),Du?2:1e3);else throw"Invalid close reason"},finished:function(){cd.location&&(cd.location.href="about:blank")}},ZT={locality:function(f){return bn.mock("Localization","locality",f,void 0,0,"Philadelphia")},postalCode:function(f){return bn.mock("Localization","postalCode",f,void 0,0,"19103")},countryCode:function(f){return bn.mock("Localization","countryCode",f,void 0,0,"US")},language:function(f){return bn.mock("Localization","language",f,void 0,0,"en")},preferredAudioLanguages:function(f){return bn.mock("Localization","preferredAudioLanguages",f,void 0,0,["spa","eng"])},locale:function(f){return bn.mock("Localization","locale",f,void 0,0,"en-US")},latlon:[39.9549,75.1699],additionalInfo:{}},H6={ready:!0,signIn:!0,signOut:!0,startContent:!0,stopContent:!0,page:!0,action:!0,error:!0,mediaLoadStart:!0,mediaPlay:!0,mediaPlaying:!0,mediaPause:!0,mediaWaiting:!0,mediaProgress:!0,mediaSeeking:!0,mediaSeeked:!0,mediaRateChange:!0,mediaRenditionChange:!0,mediaEnded:!0,appInfo:null},G6={initialization:{lmt:0,us_privacy:"1-Y-",discovery:{navigateTo:{action:"entity",data:{entityId:"abc",entityType:"program",programType:"movie"},context:{source:"voice"}}}}},W6={approveContentRating:!1,approvePurchase:!1,flags:{userExperience:"1000"}},X6={protocols:{"dial1.7":!0},device:"device-id",friendlyName:function(f){return bn.mock("SecondScreen","friendlyName",f,void 0,0,"Living Room")}},q6={get:"VGhpcyBub3QgYSByZWFsIHRva2VuLgo=",set:null,remove:null,clear:null},K6={localization:ZT,device:QT,accessibility:YT};class Y6{constructor(){this._callback=null,this._queue=[]}send(i){this._queue.push(i)}receive(i){this._callback=i}flush(i){i.receive(this._callback),this._queue.forEach(o=>i.send(o))}}const Ms={},Di={},Q6=(f,i)=>{Ms.app=f,Ms.platform={logLevel:"WARN",...i},Ms.user={}},Z6=(f,i)=>{Di[f]&&Di[f].forEach(o=>o(i))},J6=(f={},i)=>{const o=i.split(".");for(let l=0;l<o.length;l++)f=f[o[l]]=f[o[l]]!==void 0?f[o[l]]:{};return typeof f=="object"?Object.keys(f).length?f:void 0:f},Z0={get(f,i,o=void 0){const l=J6(Ms[f],i);return l!==void 0?l:o},has(f,i){return!!this.get(f,i)},set(f,i){Ms.user[f]=i,Z6(f,i)},subscribe(f,i){Di[f]=Di[f]||[],Di[f].push(i)},unsubscribe(f,i){if(i){const o=Di[f]&&Di[f].findIndex(l=>l===i);o>-1&&Di[f].splice(o,1)}else f in Di&&(Di[f]=[])},clearSubscribers(){for(const f of Object.getOwnPropertyNames(Di))delete Di[f]},setLogLevel(f){Ms.platform.logLevel=f},getLogLevel(){return Ms.platform.logLevel}},ir=typeof window<"u"?window:{};class hd{constructor(i){this.bridge=i}send(i){this.bridge.JSMessageChanged(i,()=>{})}receive(i){ir.$badger=ir.$badger||{};const o=ir.$badger.callback?ir.$badger.callback.bind(ir.$badger):null,l=ir.$badger.event?ir.$badger.event.bind(ir.$badger):null;ir.$badger.callback=(h,g,x)=>{x.jsonrpc?i(JSON.stringify(x)):o&&o(h,g,x)},ir.$badger.event=(h,g)=>{g.jsonrpc?i(JSON.stringify(g)):l&&l(h,g)}}static isLegacy(i){return hd.isXREProxy(i)||i.send===void 0&&i.JSMessageChanged}static isXREProxy(i){return i.proxyObjectTest!==void 0}}const eD=100;class tD{constructor(i){this._endpoint=i,this._ws=null,this._connected=!1,this._queue=[],this._callbacks=[]}send(i){this._connect(),this._connected?this._ws.send(i):this._queue.length<eD&&this._queue.push(i)}receive(i){i&&(this._connect(),this._callbacks.push(i))}_notifyCallbacks(i){for(let o=0;o<this._callbacks.length;o++)setTimeout(()=>this._callbacks[o](i),1)}_connect(){this._ws||(this._ws=new WebSocket(this._endpoint,["jsonrpc"]),this._ws.addEventListener("message",i=>{this._notifyCallbacks(i.data)}),this._ws.addEventListener("error",i=>{}),this._ws.addEventListener("close",i=>{this._ws=null,this._connected=!1}),this._ws.addEventListener("open",i=>{this._connected=!0;for(let o=0;o<this._queue.length;o++)this._ws.send(this._queue[o]);this._queue=[]}))}}function nD(f,i){if(!i||!i.methods)return f;const{methods:o}=i,l=JSON.parse(JSON.stringify(f));return Object.keys(o).forEach(h=>{const g=o[h],x=g["x-method"],[w,s]=x.split("."),m={};m[g["x-this-param"]]=l,l[h]=(...C)=>{for(var y=0;y<C.length;y++)m[g["x-additional-params"][y]]=C[y];return Mn.send(w.toLowerCase(),s,m)}}),l}const zC={transform:nD},oD="com.comcast.BridgeObject_1";let J0=null;const iD=f=>f&&typeof f.event=="string"&&typeof f.listening=="boolean",Jn=typeof window<"u"?window:{};class Mn{constructor(){this._promises=[],this._transport=null,this._id=1,this._eventEmitters=[],this._eventIds=[],this._queue=new Y6,this._deprecated={},this.isMock=!1}static addEventEmitter(i){Mn.get()._eventEmitters.push(i)}static registerDeprecatedMethod(i,o,l){Mn.get()._deprecated[i.toLowerCase()+"."+o.toLowerCase()]={alternative:l||""}}_endpoint(){return Jn.__firebolt&&Jn.__firebolt.endpoint?Jn.__firebolt.endpoint:null}constructTransportLayer(){let i;const o=this._endpoint();return o&&(o.startsWith("ws://")||o.startsWith("wss://"))?(i=new tD(o),i.receive(this.receiveHandler.bind(this))):typeof Jn.ServiceManager<"u"&&Jn.ServiceManager&&Jn.ServiceManager.version?(i=this._queue,Jn.ServiceManager.getServiceForJavaScript(oD,l=>{hd.isLegacy(l)?i=new hd(l):i=l,this.setTransportLayer(i)})):(this.isMock=!0,i=fd,i.receive(this.receiveHandler.bind(this))),i}setTransportLayer(i){this._transport=i,this._queue.flush(i)}static send(i,o,l,h){return Mn.get()._send(i,o,l,h)}static listen(i,o,l,h){return Mn.get()._sendAndGetId(i,o,l,h)}_send(i,o,l,h){return Array.isArray(i)&&!o&&!l?this._batch(i):this._sendAndGetId(i,o,l,h).promise}_sendAndGetId(i,o,l,h){const{promise:g,json:x,id:w}=this._processRequest(i,o,l,h),s=JSON.stringify(x);return Z0.getLogLevel()==="DEBUG"&&console.debug("Sending message to transport: "+s),this._transport.send(s),{id:w,promise:g}}_batch(i){const o=[],l=[];i.forEach(({module:g,method:x,params:w,transforms:s})=>{const m=this._processRequest(g,x,w,s);o.push({promise:m.promise,id:m.id}),l.push(m.json)});const h=JSON.stringify(l);return Z0.getLogLevel()==="DEBUG"&&console.debug("Sending message to transport: "+h),this._transport.send(h),o}_processRequest(i,o,l,h){const g=this._addPromiseToQueue(i,o,l,h),x=this._createRequestJSON(i,o,l),w={promise:g,json:x,id:this._id};return this._id++,w}_createRequestJSON(i,o,l){return{jsonrpc:"2.0",method:i.toLowerCase()+"."+o,params:l,id:this._id}}_addPromiseToQueue(i,o,l,h){return new Promise((g,x)=>{this._promises[this._id]={},this._promises[this._id].promise=this,this._promises[this._id].resolve=g,this._promises[this._id].reject=x,this._promises[this._id].transforms=h;const w=this._deprecated[i.toLowerCase()+"."+o.toLowerCase()];w&&console.warn(`WARNING: ${i}.${o}() is deprecated. `+w.alternative),o.match(/^on[A-Z]/)&&(l.listen?this._eventIds.push(this._id):this._eventIds=this._eventIds.filter(s=>s!==this._id))})}static get(){if(Jn.__firebolt=Jn.__firebolt||{},Jn.__firebolt.transport==null&&J0==null){const i=new Mn;i.init(),i.isMock?J0=i:(Jn.__firebolt=Jn.__firebolt||{},Jn.__firebolt.transport=i),Jn.__firebolt.setTransportLayer=i.setTransportLayer.bind(i)}return Jn.__firebolt.transport?Jn.__firebolt.transport:J0}receiveHandler(i){Z0.getLogLevel()==="DEBUG"&&console.debug("Received message from transport: "+i);const o=JSON.parse(i),l=this._promises[o.id];if(l){if(o.error)l.reject(o.error);else{let h=o.result;l.transforms&&(Array.isArray(o.result)?h=h.map(g=>zC.transform(g,l.transforms)):h=zC.transform(h,l.transforms)),l.resolve(h)}delete this._promises[o.id]}this._eventIds.includes(o.id)&&!iD(o.result)&&this._eventEmitters.forEach(h=>{h(o.id,o.result)})}init(){Q6({},{log:!0}),this._queue.receive(this.receiveHandler.bind(this)),Jn.__firebolt&&(Jn.__firebolt.mockTransportLayer===!0?(this.isMock=!0,this.setTransportLayer(fd)):Jn.__firebolt.getTransportLayer&&this.setTransportLayer(Jn.__firebolt.getTransportLayer())),this._transport==null&&(this._transport=this.constructTransportLayer())}}Jn.__firebolt=Jn.__firebolt||{};Jn.__firebolt.setTransportLayer=f=>{Mn.get().setTransportLayer(f)};let ks=0;const mn={internal:{},external:{},get:f=>Object.assign(Object.assign({},mn.internal[f]),mn.external[f]),set:(f,i,o)=>{mn.external[f]=mn.external[f]||{},mn.external[f][i]=o},setInternal:(f,i,o)=>{mn.internal[f]=mn.internal[f]||{},mn.internal[f][i]=o},find:f=>{let i;return[mn.internal,mn.external].find(o=>{if(i=Object.keys(o).find(l=>o[l][f]),i)return!0}),i},remove:f=>{[mn.internal,mn.external].forEach(i=>{Object.keys(i).forEach(o=>{i[o]&&i[o][f]&&(delete i[o][f],Object.values(i[o]).length===0&&delete i[o])})})},removeKey:(f,i=!1)=>{i&&mn.internal[f]&&delete mn.internal[f],mn.external[f]&&delete mn.external[f]},keys:()=>Array.from(new Set(Object.keys(mn.internal).concat(Object.keys(mn.external)))),count:f=>Object.values(mn.get(f)).length},dd={},Qh=[],JT={},Zh={};let VC=!1;const eb=(f,i)=>{HC(mn.internal[dd[f]],[i]),HC(mn.external[dd[f]],[i])},es=(f,i)=>{JT[f.toLowerCase()]=i.concat()},vd=(f,i,o)=>{Zh[f.toLowerCase()]=Zh[f.toLowerCase()]||{},Zh[f.toLowerCase()][i]=o.concat()},HC=(f,i)=>{f&&Object.keys(f).forEach(o=>{let l=f[o];Qh.indexOf(parseInt(o))>=0&&(Qh.splice(Qh.indexOf(parseInt(o)),1),delete f[o]),l.apply(null,i)})},tb=function(f,i,o,l,h,g=!1){if(aD(),typeof o!="function")return Promise.reject("No valid callback function provided.");{if(f==="*")return Promise.reject("No valid module name provided");const x=i==="*",w=x?JT[f]:[i],s=[],m=Object.values(l).length>0,C=Object.keys(l).sort().map(b=>b+"="+JSON.stringify(l[b])).join("&");ks++,h&&Qh.push(ks),w.forEach(b=>{const _=f+"."+b+(m?`.${C}`:"");if(Object.values(mn.get(_)).length===0){const F=Object.assign({listen:!0},l),{id:z,promise:B}=Mn.listen(f,"on"+b[0].toUpperCase()+b.substring(1),F);dd[z]=_,s.push(B)}const U=g?mn.setInternal:mn.set;x?U(_,""+ks,F=>o(b,F)):U(_,""+ks,o)});let y,v,M=new Promise((b,_)=>{y=b,v=_});return s.length?Promise.all(s).then(b=>{y(ks)}).catch(b=>{i==="*"?y(ks):v(b)}):y(ks),M}},nb=function(...f){const i=f.pop(),[o,l,h]=ob(...f);return[o,l,i,h]},ob=function(...f){const i=(f.shift()||"*").toLowerCase(),o=f.shift()||"*",l={};for(let h=0;f.length;h++)l[Zh[i][o][h]]=f.shift();return[i,o,l]},rD=function(...f){const[i,o,l,h]=nb(...f);return tb(i,o,l,h,!0)},ib=function(...f){const[i,o,l,h]=nb(...f);return tb(i,o,l,h,!1)},sD=function(...f){if(f&&f.length&&typeof f[0]=="number")return eg(f[0]);if(f&&f.length&&typeof f[1]=="number")return eg(f[1]);{const[i,o,l]=ob(...f);return eg(i,o,l)}},Fh=(f,i)=>{const[o,l]=f.split(".").slice(0,2),h=Object.assign({listen:!1},i);Mn.send(o,"on"+l[0].toUpperCase()+l.substr(1),h)},eg=function(f=!1,i=!1,o){if(i==="*"&&(i=!1),typeof f=="number"){const l=f.toString(),h=mn.find(l);return h?(mn.remove(l),mn.count(h)===0&&Fh(h),!0):!1}else if(!f&&!i)mn.keys().forEach(l=>{mn.removeKey(l),Fh(l)});else if(!i)mn.keys().forEach(l=>{l.indexOf(f.toLowerCase())===0&&(mn.removeKey(l),Fh(l))});else{const l=Object.values(o).length>0,h=Object.keys(o).sort().map(x=>x+"="+JSON.stringify(o[x])).join("&"),g=f+"."+i+(l?`.${h}`:"");mn.removeKey(g),Fh(g,o)}},aD=()=>{VC||(Mn.addEventEmitter(eb),R6(ib),VC=!0)},Ps={listen:ib,once:rD,clear:sD,broadcast(f,i){eb(Object.entries(dd).find(([o,l])=>l==="app."+f)[0],i)}};function lD(f,i,o,l=void 0,h,g,x){const w=Object.values(o).length,s=KT(o,l,x);if(s==="getter")return Mn.send(f,i,o);if(s==="subscriber"){if(h)throw new Error("Cannot subscribe to an immutable property");return Ps.listen(f,i+"Changed",...Object.values(o),l)}else if(s==="setter"){if(h)throw new Error("Cannot set a value to an immutable property");if(g)throw new Error("Cannot set a value to a readonly property");return Mn.send(f,"set"+i[0].toUpperCase()+i.substring(1),Object.assign({value:l},o))}else throw w<x?new Error("Cannot get a value without all required context parameters."):new Error("Property accessed with unexpected number of parameters.")}const eo={prop:lD};es("Accessibility",["audioDescriptionSettingsChanged","closedCaptionsSettingsChanged","voiceGuidanceSettingsChanged"]);Mn.registerDeprecatedMethod("Accessibility","closedCaptions","Use Accessibility.closedCaptionsSettings() instead.");Mn.registerDeprecatedMethod("Accessibility","voiceGuidance","Use Accessibility.voiceGuidanceSettings() instead.");function uD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Account","id",i,f,!0,!0,0)}function fD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Account","uid",i,f,!0,!0,0)}const cD={id:uD,uid:fD};es("Advertising",["policyChanged"]);Mn.registerDeprecatedMethod("Authentication","token","Use Authentication module has individual methods for each token type. instead.");es("Capabilities",["available","granted","revoked","unavailable"]);vd("Capabilities","available",["capability"]);vd("Capabilities","granted",["role","capability"]);vd("Capabilities","revoked",["role","capability"]);vd("Capabilities","unavailable",["capability"]);es("Device",["audioChanged","deviceNameChanged","hdcpChanged","hdrChanged","nameChanged","networkChanged","screenResolutionChanged","videoResolutionChanged"]);Mn.registerDeprecatedMethod("Device","screenResolution","Use Use non-Firebolt APIs specific to your platform, e.g. W3C APIs instead.");Mn.registerDeprecatedMethod("Device","onDeviceNameChanged","Use Device.name() instead.");Mn.registerDeprecatedMethod("Device","onScreenResolutionChanged","Use screenResolution instead.");function hD(){return new Promise((f,i)=>{Mn.send("device","version").then(o=>{o=o||{},o.sdk=o.sdk||{},o.sdk.major=parseInt("1"),o.sdk.minor=parseInt("4"),o.sdk.patch=parseInt("1"),o.sdk.readable="Firebolt Core SDK 1.4.1",f(o)}).catch(o=>{i(o)})})}function dD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","audio",i,f,!1,!0,0)}function pD(...f){return Ps.clear("Device",...f)}function mD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","distributor",i,f,!0,!0,0)}function gD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","hdcp",i,f,!1,!0,0)}function yD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","hdr",i,f,!1,!0,0)}function vD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","id",i,f,!0,!0,0)}function xD(...f){return Ps.listen("Device",...f)}function wD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","make",i,f,!0,!0,0)}function SD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","model",i,f,!0,!0,0)}function CD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","name",i,f,!1,!0,0)}function TD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","network",i,f,!1,!0,0)}function bD(...f){return Ps.once("Device",...f)}function kD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","platform",i,f,!0,!0,0)}function ED(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","screenResolution",i,f,!1,!0,0)}function AD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","sku",i,f,!0,!0,0)}function ID(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","type",i,f,!0,!0,0)}function MD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","uid",i,f,!0,!0,0)}function _D(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Device","videoResolution",i,f,!1,!0,0)}const Za={Events:{DEVICE_NAME_CHANGED:"deviceNameChanged",NAME_CHANGED:"nameChanged",HDCP_CHANGED:"hdcpChanged",HDR_CHANGED:"hdrChanged",AUDIO_CHANGED:"audioChanged",SCREEN_RESOLUTION_CHANGED:"screenResolutionChanged",VIDEO_RESOLUTION_CHANGED:"videoResolutionChanged",NETWORK_CHANGED:"networkChanged"},NetworkState:{CONNECTED:"connected",DISCONNECTED:"disconnected"},NetworkType:{WIFI:"wifi",ETHERNET:"ethernet",HYBRID:"hybrid"},version:hD,audio:dD,clear:pD,distributor:mD,hdcp:gD,hdr:yD,id:vD,listen:xD,make:wD,model:SD,name:CD,network:TD,once:bD,platform:kD,screenResolution:ED,sku:AD,type:ID,uid:MD,videoResolution:_D},GC={},RD=(f,i,o)=>{if(GC[f])throw`Capability ${f} has multiple provider interfaces registered.`;o.forEach(l=>l.name=`${i}.${l.name}`),GC[f]=o.concat()};es("Discovery",["navigateTo","policyChanged"]);RD("xrn:firebolt:capability:discovery:interest","Discovery",[{name:"userInterest",focus:!1,response:!0,parameters:!0}]);Mn.registerDeprecatedMethod("Discovery","entityInfo","Use null instead.");Mn.registerDeprecatedMethod("Discovery","purchasedContent","Use null instead.");Mn.registerDeprecatedMethod("Discovery","entitlements","Use Discovery.contentAccess() instead.");Mn.registerDeprecatedMethod("Discovery","onPullEntityInfo","Use null instead.");Mn.registerDeprecatedMethod("Discovery","onPullPurchasedContent","Use null instead.");es("Lifecycle",["background","foreground","inactive","suspended","unloading"]);es("Localization",["countryCodeChanged","languageChanged","localeChanged","localityChanged","postalCodeChanged","preferredAudioLanguagesChanged"]);Mn.registerDeprecatedMethod("Localization","language","Use Localization.locale instead.");Mn.registerDeprecatedMethod("Localization","onLanguageChanged","Use language instead.");function LD(){return Mn.send("Localization","additionalInfo",{},null)}function DD(...f){return Ps.clear("Localization",...f)}function PD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Localization","countryCode",i,f,!1,!0,0)}function OD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Localization","language",i,f,!1,!0,0)}function ND(){return Mn.send("Localization","latlon",{},null)}function UD(...f){return Ps.listen("Localization",...f)}function BD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Localization","locale",i,f,!1,!0,0)}function jD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Localization","locality",i,f,!1,!0,0)}function FD(...f){return Ps.once("Localization",...f)}function $D(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Localization","postalCode",i,f,!1,!0,0)}function zD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),eo.prop("Localization","preferredAudioLanguages",i,f,!1,!0,0)}const Pu={Events:{LOCALITY_CHANGED:"localityChanged",POSTAL_CODE_CHANGED:"postalCodeChanged",COUNTRY_CODE_CHANGED:"countryCodeChanged",LANGUAGE_CHANGED:"languageChanged",PREFERRED_AUDIO_LANGUAGES_CHANGED:"preferredAudioLanguagesChanged",LOCALE_CHANGED:"localeChanged"},additionalInfo:LD,clear:DD,countryCode:PD,language:OD,latlon:ND,listen:UD,locale:BD,locality:jD,once:FD,postalCode:$D,preferredAudioLanguages:zD};es("SecondScreen",["closeRequest","friendlyNameChanged","launchRequest"]);O6({Accessibility:YT,Account:U6,Advertising:B6,Authentication:j6,Capabilities:F6,Device:QT,Discovery:$6,Keyboard:z6,Lifecycle:V6,Localization:ZT,Metrics:H6,Parameters:G6,Profile:W6,SecondScreen:X6,SecureStorage:q6,Platform:K6});const xd={device:{about:"A module for querying about the device and it's capabilities",methods:[{name:"make",about:"The manufacturer of the device model"},{name:"model",about:"The manufacturer designated model of the device"},{name:"name",about:"The human readable name of the device"},{name:"network",about:"The current network status and type"},{name:"platform",about:"Platform identifier for the device"}]},account:{about:"A module for querying about the device account",methods:[{name:"id",about:"The platform back-office account identifier"},{name:"uid",about:"Unique id for the current app & account"}]},localization:{about:"Methods for accessing location and language preferences",methods:[{name:"countryCode",about:"Get the ISO 3166-1 alpha-2 code for the country device is located in"},{name:"language",about:"Get the ISO 639 1/2 code for the preferred language"},{name:"latlon",about:"Approximate latitude and longitude coordinates of the device location"},{name:"locality",about:"The locality/city the device is located in"},{name:"postalCode",about:"Get the postal code the device is located in"}]}},VD=tt.Component("Module",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=o.w,m.h=o.h,m.color=o.bColor,m.effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),i=s[0];const C={};return s[1]=this.element({parent:i||"root"},o),C.x=o.w/2,C.y=o.h/2,C.mount="{x:0.5, y:0.5}",C.content=o.name,C.color=o.fColor,C.font="raleway",C.__textnode=!0,s[1].populate(C),s},effects:[function(i,o,l,h,g,x){o[0].set("color",i.bColor)},function(i,o,l,h,g,x){o[0].set("effects",[{type:"radius",props:{radius:8}}])},function(i,o,l,h,g,x){o[1].set("content",i.name)}],context:{}},state(){return{w:300,h:250,bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }",fColor:"#fff"}},props:["name"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}},input:{enter(){this.$router.to(`/examples/firebolt/${this.name}`)}}}),HD=tt.Component("Methods",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=o.w,C.h=o.h,C.color=o.nameBgColor,C.effects=[{type:"radius",props:{radius:[8,8,0,0]}}],s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.content=o.name,y.x=o.w/2,y.y=o.h/2,y.mount=.5,y.color="0xffffffff",y.font="lato",y.size=50,y.__textnode=!0,s[2].populate(y),i=s[0];const v={};s[3]=this.element({parent:i||"root"},o),v.w=o.w,v.h=50,v.color="0x4b5563ff",v.y=75,v.effects=[{type:"radius",props:{radius:[0,0,8,8]}}],s[3].populate(v),i=s[3];const M={};return s[4]=this.element({parent:i||"root"},o),M.content=o.about,M.maxwidth=o.w,M.align="center",M.font="lato",M.maxlines=1,M.size=28,M.y=6,M.__textnode=!0,s[4].populate(M),s},effects:[function(i,o,l,h,g,x){o[1].set("color",i.nameBgColor)},function(i,o,l,h,g,x){o[1].set("effects",[{type:"radius",props:{radius:[8,8,0,0]}}])},function(i,o,l,h,g,x){o[2].set("content",i.name)},function(i,o,l,h,g,x){o[3].set("effects",[{type:"radius",props:{radius:[0,0,8,8]}}])},function(i,o,l,h,g,x){o[4].set("content",i.about)}],context:{}},state(){return{w:600,h:75,nameBgColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["name","about"],hooks:{focus(){this.nameBgColor="{ top: '#6366F1', bottom: '#4F46E5' }",this.$emit("execute",this.name)},unfocus(){this.nameBgColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),wd=tt.Component("List",{components:{Method:HD,Module:VD},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1;const M={};s[0]=this.element({parent:i||"root"},v===!0?y:o),s[0].populate(M),i=s[0];const b={};s[1]=this.element({parent:i||"root"},v===!0?y:o),b.y={transition:o.y},s[1].populate(b),i=s[1];const _=[];let U,F;const z=(Z=[],j,fe)=>{const he=x(Z),we=new Set;let ge=he.length;const be={};for(U=be.from||0,F=("to"in be)?be.to:he.length;ge--;){const Se=he[ge];ge<F&&ge>=U&&we.add(""+Se.name)}let Ie=fe.length;for(;Ie--;)if(we.has(fe[Ie])===!1){const Se=fe[Ie];j[2][Se]&&j[2][Se].destroy(),delete j[2][Se],j[3][Se]&&j[3][Se].destroy(),delete j[3][Se]}fe.length=0;const V=he.length,De=[];for(let Se=0;Se<V;Se++){if(Se<U||Se>=F)continue;const me=Object.create(o);i=j[1],me.item=he[Se],me.index=Se,me.key=""+me.item.name,fe.push(me.key);const Re=l.components&&l.components.Method||h.Method;j[2]===void 0&&(j[2]={});const Ne={};j[2][me.key]===void 0&&(j[2][me.key]=this.element({parent:i||"root"},v===!0?y:o)),Ne.name=me.item.name,Ne.about=me.item.about,Ne.y=me.index*160,Ne.ref=me.type+me.index;const $e=[];if(typeof Re<"u")for(let Ye in Re[Symbol.for("config")].props)delete Ne[Re[Symbol.for("config")].props[Ye]],$e.push(Re[Symbol.for("config")].props[Ye]);j[2][me.key].nodeId===void 0&&j[2][me.key].populate(Ne),j[3]===void 0&&(j[3]={}),i=j[2][me.key];const Pe={};if(j[3][me.key]===void 0){Pe.name=me.item.name,Pe.about=me.item.about,C=me.index*160,Array.isArray(C)===!0&&(C=x(C).slice(0)),Pe.y=C,C=me.type+me.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),Pe.ref=C,m=Pe.is||"Method";let Ye;if(typeof m=="string"){if(Ye=l.components&&l.components[m]||h[m],!Ye)throw new Error('Component "Method" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ye=m);j[3][me.key]=Ye.call(null,{props:Pe},j[2][me.key],o),j[3][me.key][Symbol.for("slots")][0]?(i=j[3][me.key][Symbol.for("slots")][0],y=j[3][me.key],v=!0):i=j[3][me.key][Symbol.for("children")][0]}let ve=()=>{(typeof $e>"u"||$e.indexOf("y")===-1)&&j[2][me.key].set("y",me.index*160)};g(ve,null),De.push(ve),o[Symbol.for("effects")].push(ve),j[3][me.key][Symbol.for("props")].y=me.index*160}return De};let B;const G=()=>{o[Symbol.for("removeGlobalEffects")](B),B=null,B=z(o.methods,s,_)};o[Symbol.for("effects")].push(G),g(G,["methods"]);const X=()=>{o.type;for(let Z=0;Z<o.methods.length;Z++){if(Z<U||Z>=F)continue;const j={};j.index=Z,j.item=o.methods[Z],j.key=j.item.name,(typeof skip2>"u"||skip2.indexOf("ref")===-1)&&s[2][j.key].set("ref",o.type+j.index)}};o[Symbol.for("effects")].push(X),g(X);const Q=()=>{o.type;for(let Z=0;Z<o.methods.length;Z++){if(Z<U||Z>=F)continue;const j={};j.index=Z,j.item=o.methods[Z],j.key=j.item.name,s[3][j.key][Symbol.for("props")].ref=o.type+j.index}};o[Symbol.for("effects")].push(Q),g(Q),i=s[0];const W={};s[4]=this.element({parent:i||"root"},v===!0?y:o),W.x={transition:o.x},W.y=325,s[4].populate(W),i=s[4];const te=[];let de,I;const q=(Z=[],j,fe)=>{const he=x(Z),we=new Set;let ge=he.length;const be={};for(de=be.from||0,I=("to"in be)?be.to:he.length;ge--;){const Se=he[ge];ge<I&&ge>=de&&we.add(""+Se.id)}let Ie=fe.length;for(;Ie--;)if(we.has(fe[Ie])===!1){const Se=fe[Ie];j[5][Se]&&j[5][Se].destroy(),delete j[5][Se],j[6][Se]&&j[6][Se].destroy(),delete j[6][Se]}fe.length=0;const V=he.length,De=[];for(let Se=0;Se<V;Se++){if(Se<de||Se>=I)continue;const me=Object.create(o);i=j[4],me.item=he[Se],me.index=Se,me.key=""+me.item.id,fe.push(me.key);const Re=l.components&&l.components.Module||h.Module;j[5]===void 0&&(j[5]={});const Ne={};j[5][me.key]===void 0&&(j[5][me.key]=this.element({parent:i||"root"},v===!0?y:o)),Ne.name=me.item.name,Ne.ref=me.type+me.index,Ne.x=me.index*400;const $e=[];if(typeof Re<"u")for(let ve in Re[Symbol.for("config")].props)delete Ne[Re[Symbol.for("config")].props[ve]],$e.push(Re[Symbol.for("config")].props[ve]);j[5][me.key].nodeId===void 0&&j[5][me.key].populate(Ne),j[6]===void 0&&(j[6]={}),i=j[5][me.key];const Pe={};if(j[6][me.key]===void 0){Pe.name=me.item.name,C=me.type+me.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),Pe.ref=C,Pe.x=me.index*400,m=Pe.is||"Module";let ve;if(typeof m=="string"){if(ve=l.components&&l.components[m]||h[m],!ve)throw new Error('Component "Module" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ve=m);j[6][me.key]=ve.call(null,{props:Pe},j[5][me.key],o),j[6][me.key][Symbol.for("slots")][0]?(i=j[6][me.key][Symbol.for("slots")][0],y=j[6][me.key],v=!0):i=j[6][me.key][Symbol.for("children")][0]}}return De};let ee;const ae=()=>{o[Symbol.for("removeGlobalEffects")](ee),ee=null,ee=q(o.modules,s,te)};o[Symbol.for("effects")].push(ae),g(ae,["modules"]);const ne=()=>{o.type;for(let Z=0;Z<o.modules.length;Z++){if(Z<de||Z>=I)continue;const j={};j.index=Z,j.item=o.modules[Z],j.key=j.item.id,(typeof skip5>"u"||skip5.indexOf("ref")===-1)&&s[5][j.key].set("ref",o.type+j.index)}};o[Symbol.for("effects")].push(ne),g(ne);const Y=()=>{o.type;for(let Z=0;Z<o.modules.length;Z++){if(Z<de||Z>=I)continue;const j={};j.index=Z,j.item=o.modules[Z],j.key=j.item.id,s[6][j.key][Symbol.for("props")].ref=o.type+j.index}};return o[Symbol.for("effects")].push(Y),g(Y),s},effects:[function(i,o,l,h,g,x){o[1].set("y",{transition:i.y})},function(i,o,l,h,g,x){o[4].set("x",{transition:i.x})}],context:{}},state(){return{x:400,y:100,activeIndex:0}},props:["data","type"],computed:{methods(){return this.isModule,this.data,this.isModule?[]:this.data},modules(){return this.isModule,this.data,this.isModule?this.data:[]},isModule(){return this.type,this.type==="module"}},watch:{activeIndex(f){const i=this.$select(`${this.type}${f}`);i&&i.$focus&&i.$focus()}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},left(){this.isModule&&this.activeIndex>0&&this.move(-1)},down(){!this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},up(){!this.isModule&&this.activeIndex>0&&this.move(-1)}},methods:{move(f){const i=this.activeIndex+f;this.type=="method"?this.y=i>5?-(i-5)*160-100:100:this.type=="module"&&(this.x=i>3?-(i-3)*400-400:400),this.activeIndex=i}}}),GD=tt.Component("FireBolt",{components:{List:wd},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(v-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.content="FireBolt Modules",b.x=960,b.y=80,b.mount="{x:0.5}",b.size=80,b.font="raleway",b.__textnode=!0,s[1].populate(b),y===!0&&(v-=1);const _=l.components&&l.components.List||h.List;i=s[0];const U={};s[2]=this.element({parent:i||"root"},y===!0?C:o),U.data=o.moduleNames,U.type="module",U.ref="modules";const F=[];if(typeof _<"u")for(let G in _[Symbol.for("config")].props)delete U[_[Symbol.for("config")].props[G]],F.push(_[Symbol.for("config")].props[G]);s[2].populate(U),y===!0&&(v-=1),i=s[2];const z={};z.data=o.moduleNames,z.type="module",z.ref="modules",m=z.is||"List";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);return s[3]=B.call(null,{props:z},s[2],o),s[3][Symbol.for("slots")][0]?(i=s[3][Symbol.for("slots")][0],C=s[3],y=!0):i=s[3][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),s},effects:[],context:{}},computed:{moduleNames(){return Object.keys(xd).map(f=>({id:f,name:f.charAt(0).toUpperCase()+f.slice(1)}))}},hooks:{focus(){const f=this.$select("modules");f&&f.$focus&&f.$focus()}}}),WD=tt.Component("DeviceModule",{components:{List:wd},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(v-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.content="Device",b.x=960,b.mount="{x:0.5}",b.y=50,b.font="raleway",b.size=40,b.__textnode=!0,s[1].populate(b),y===!0&&(v-=1),i=s[0];const _={};s[2]=this.element({parent:i||"root"},y===!0?C:o),_.content=o.device.about,_.x=960,_.mount="{x:0.5}",_.y=110,_.font="lato",_.__textnode=!0,s[2].populate(_),y===!0&&(v-=1);const U=l.components&&l.components.List||h.List;i=s[0];const F={};s[3]=this.element({parent:i||"root"},y===!0?C:o),F.data=o.device.methods,F.x=300,F.ref="methods",F.type="method",F.y=100;const z=[];if(typeof U<"u")for(let de in U[Symbol.for("config")].props)delete F[U[Symbol.for("config")].props[de]],z.push(U[Symbol.for("config")].props[de]);s[3].populate(F),y===!0&&(v-=1),i=s[3];const B={};B.data=o.device.methods,B.x=300,B.ref="methods",B.type="method",B.y=100,m=B.is||"List";let G;if(typeof m=="string"){if(G=l.components&&l.components[m]||h[m],!G)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);s[4]=G.call(null,{props:B},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],C=s[4],y=!0):i=s[4][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),i=s[0];const X={};s[5]=this.element({parent:i||"root"},y===!0?C:o),X.x=1400,X.y=540,X.content=o.response,X.size=100,X.mount=.5,X.font="lato",X.show=!o.isNetworkRes,X.__textnode=!0,s[5].populate(X),y===!0&&(v-=1),i=s[0];const Q={};s[6]=this.element({parent:i||"root"},y===!0?C:o),Q.show=o.isNetworkRes,s[6].populate(Q),y===!0&&(v-=1),i=s[6];const W={};s[7]=this.element({parent:i||"root"},y===!0?C:o),W.content="State: "+o.networkRes.state,W.size=70,W.font="lato",W.x=1400,W.y=500,W.mount=.5,W.__textnode=!0,s[7].populate(W),y===!0&&(v-=1),i=s[6];const te={};return s[8]=this.element({parent:i||"root"},y===!0?C:o),te.content="Type: "+o.networkRes.type,te.size=70,te.font="lato",te.y=580,te.x=1400,te.mount=.5,te.__textnode=!0,s[8].populate(te),y===!0&&(v-=1),s},effects:[function(i,o,l,h,g,x){o[5].set("content",i.response)},function(i,o,l,h,g,x){o[5].set("show",!i.isNetworkRes)},function(i,o,l,h,g,x){o[6].set("show",i.isNetworkRes)},function(i,o,l,h,g,x){o[7].set("content","State: "+i.networkRes.state)},function(i,o,l,h,g,x){o[8].set("content","Type: "+i.networkRes.type)}],context:{}},state(){return{device:xd.device,response:"",networkRes:{},isNetworkRes:!1}},hooks:{ready(){this.$listen("execute",async f=>{switch(this.$log.info(`Execute Device ${f} API`),this.isNetworkRes=!1,f){case"make":this.response=await Za.make();break;case"model":this.response=await Za.model();break;case"name":this.response=await Za.name();break;case"network":Object.assign(this.networkRes,await Za.network()),this.isNetworkRes=!0;break;case"platform":this.response=await Za.platform();break}})},focus(){const f=this.$select("methods");f&&f.$focus&&f.$focus()}}}),XD=tt.Component("AccountModule",{components:{List:wd},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(v-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.content="Account",b.x=960,b.mount="{x:0.5}",b.y=50,b.font="raleway",b.size=40,b.__textnode=!0,s[1].populate(b),y===!0&&(v-=1),i=s[0];const _={};s[2]=this.element({parent:i||"root"},y===!0?C:o),_.content=o.account.about,_.x=960,_.mount="{x:0.5}",_.y=110,_.font="lato",_.__textnode=!0,s[2].populate(_),y===!0&&(v-=1);const U=l.components&&l.components.List||h.List;i=s[0];const F={};s[3]=this.element({parent:i||"root"},y===!0?C:o),F.data=o.account.methods,F.x=300,F.ref="methods",F.y=300,F.type="method";const z=[];if(typeof U<"u")for(let Q in U[Symbol.for("config")].props)delete F[U[Symbol.for("config")].props[Q]],z.push(U[Symbol.for("config")].props[Q]);s[3].populate(F),y===!0&&(v-=1),i=s[3];const B={};B.data=o.account.methods,B.x=300,B.ref="methods",B.y=300,B.type="method",m=B.is||"List";let G;if(typeof m=="string"){if(G=l.components&&l.components[m]||h[m],!G)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);s[4]=G.call(null,{props:B},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],C=s[4],y=!0):i=s[4][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),i=s[0];const X={};return s[5]=this.element({parent:i||"root"},y===!0?C:o),X.x=1400,X.y=540,X.content=o.response,X.size=o.size,X.mount=.5,X.font="lato",X.__textnode=!0,s[5].populate(X),y===!0&&(v-=1),s},effects:[function(i,o,l,h,g,x){o[5].set("content",i.response)},function(i,o,l,h,g,x){o[5].set("size",i.size)}],context:{}},state(){return{account:xd.account,response:"",size:100}},hooks:{ready(){this.$listen("execute",async f=>{switch(this.$log.info(`Execute Account ${f} API`),f){case"id":this.size=100,this.response=await cD.id();break;case"uid":this.size=40,this.response=await Za.uid();break}})},focus(){const f=this.$select("methods");f&&f.$focus&&f.$focus()}}}),qD=tt.Component("LocalizationModule",{components:{List:wd},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1,v=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(v-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.content="Localization",b.x=960,b.mount="{x:0.5}",b.y=50,b.font="raleway",b.size=40,b.__textnode=!0,s[1].populate(b),y===!0&&(v-=1),i=s[0];const _={};s[2]=this.element({parent:i||"root"},y===!0?C:o),_.content=o.localization.about,_.x=960,_.mount="{x:0.5}",_.y=110,_.font="lato",_.__textnode=!0,s[2].populate(_),y===!0&&(v-=1);const U=l.components&&l.components.List||h.List;i=s[0];const F={};s[3]=this.element({parent:i||"root"},y===!0?C:o),F.data=o.localization.methods,F.x=300,F.ref="methods",F.y=100,F.type="method";const z=[];if(typeof U<"u")for(let Q in U[Symbol.for("config")].props)delete F[U[Symbol.for("config")].props[Q]],z.push(U[Symbol.for("config")].props[Q]);s[3].populate(F),y===!0&&(v-=1),i=s[3];const B={};B.data=o.localization.methods,B.x=300,B.ref="methods",B.y=100,B.type="method",m=B.is||"List";let G;if(typeof m=="string"){if(G=l.components&&l.components[m]||h[m],!G)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);s[4]=G.call(null,{props:B},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],C=s[4],y=!0):i=s[4][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),i=s[0];const X={};return s[5]=this.element({parent:i||"root"},y===!0?C:o),X.x=1400,X.y=540,X.content=o.response,X.size=o.size,X.mount=.5,X.font="lato",X.__textnode=!0,s[5].populate(X),y===!0&&(v-=1),s},effects:[function(i,o,l,h,g,x){o[5].set("content",i.response)},function(i,o,l,h,g,x){o[5].set("size",i.size)}],context:{}},state(){return{localization:xd.localization,response:"",size:100}},hooks:{ready(){this.$listen("execute",async f=>{switch(this.$log.info(`Execute Keyboard ${f} API`),this.response="null",f){case"countryCode":this.response=await Pu.countryCode();break;case"language":this.response=await Pu.language();break;case"latlon":this.response=(await Pu.latlon()).toString();break;case"locality":this.response=await Pu.locality();break;case"postalCode":this.response=await Pu.postalCode();break}})},focus(){const f=this.$select("methods");f&&f.$focus&&f.$focus()}}}),KD=[{path:"/examples/firebolt",component:GD},{path:"/examples/firebolt/device",component:WD},{path:"/examples/firebolt/account",component:XD},{path:"/examples/firebolt/localization",component:qD}],YD=tt.Component("Item",{code:{render:function(i,o,l,h,g,x,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.color=o.hasFocus?"0xe0f2feff":"0xfef9c3ff",m.w=200,m.h=200,m.effects=[{type:"radius",props:{radius:12}}],s[0].populate(m),i=s[0];const C={};return s[1]=this.element({parent:i||"root"},o),C.content=o.name,C.size=o.hasFocus?38:32,C.color=o.hasFocus?"0x1e3a8aff":"0x2563ebff",C.placement="{x: 'center', y: 'middle'}",C.__textnode=!0,s[1].populate(C),s},effects:[function(i,o,l,h,g,x){o[0].set("color",i.hasFocus?"0xe0f2feff":"0xfef9c3ff")},function(i,o,l,h,g,x){o[0].set("effects",[{type:"radius",props:{radius:12}}])},function(i,o,l,h,g,x){o[1].set("content",i.name)},function(i,o,l,h,g,x){o[1].set("size",i.hasFocus?38:32)},function(i,o,l,h,g,x){o[1].set("color",i.hasFocus?"0x1e3a8aff":"0x2563ebff")}],context:{}},props:["name"],state(){return{message:null}},hooks:{focus(){this.message=this.$announcer.speak(this.name)},unfocus(){this.message&&(this.message.stop(),this.message.cancel())}}}),QD=tt.Component("Row",{components:{Item:YD},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y=!1;const v={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(v),i=s[0];const M={};s[1]=this.element({parent:i||"root"},y===!0?C:o),M.content=o.title,M.size=40,M.__textnode=!0,s[1].populate(M),i=s[0];const b=[];let _,U;const F=(G=[],X,Q)=>{const W=x(G),te=new Set;let de=W.length;const I={};for(_=I.from||0,U=("to"in I)?I.to:W.length;de--;)W[de],de<U&&de>=_&&te.add(""+de);let q=Q.length;for(;q--;)if(te.has(Q[q])===!1){const ne=Q[q];X[2][ne]&&X[2][ne].destroy(),delete X[2][ne],X[3][ne]&&X[3][ne].destroy(),delete X[3][ne]}Q.length=0;const ee=W.length,ae=[];for(let ne=0;ne<ee;ne++){if(ne<_||ne>=U)continue;const Y=Object.create(o);i=X[0],Y.item=W[ne],Y.index=ne,Y.key=""+ne,Y.__ref="item"+ne,Q.push(Y.key);const Z=l.components&&l.components.Item||h.Item;X[2]===void 0&&(X[2]={});const j={};X[2][Y.key]===void 0&&(X[2][Y.key]=this.element({parent:i||"root"},y===!0?C:o)),j.name=Y.item,j.y=100,j.x=Y.index*250+100,j.ref=Y.__ref;const fe=[];if(typeof Z<"u")for(let we in Z[Symbol.for("config")].props)delete j[Z[Symbol.for("config")].props[we]],fe.push(Z[Symbol.for("config")].props[we]);X[2][Y.key].nodeId===void 0&&X[2][Y.key].populate(j),X[3]===void 0&&(X[3]={}),i=X[2][Y.key];const he={};if(X[3][Y.key]===void 0){he.name=Y.item,he.y=100,he.x=Y.index*250+100,he.ref=Y.__ref,m=he.is||"Item";let we;if(typeof m=="string"){if(we=l.components&&l.components[m]||h[m],!we)throw new Error('Component "Item" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(we=m);X[3][Y.key]=we.call(null,{props:he},X[2][Y.key],o),X[3][Y.key][Symbol.for("slots")][0]?(i=X[3][Y.key][Symbol.for("slots")][0],C=X[3][Y.key],y=!0):i=X[3][Y.key][Symbol.for("children")][0]}}return ae};let z;const B=()=>{o[Symbol.for("removeGlobalEffects")](z),z=null,z=F(o.items,s,b)};return o[Symbol.for("effects")].push(B),g(B,["items"]),s},effects:[function(i,o,l,h,g,x){o[1].set("content",i.title)}],context:{}},props:["title","items"],state(){return{focusIndex:-1,message:null}},hooks:{focus(){this.message=this.$announcer.speak("Row with different "+this.title),this.focusIndex=0,this.$trigger("focusIndex")},unfocus(){this.message&&(this.message.stop(),this.message.cancel())}},watch:{focusIndex(f){this.$select("item"+f).$focus()}},input:{right(){this.focusIndex=Math.min(this.focusIndex+1,this.items.length-1)},left(){this.focusIndex=Math.max(this.focusIndex-1,0)}}}),ZD=tt.Component("Announcer",{components:{Row:QD},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),b.width=i.node.width*(100/100),b.y=50,s[0].populate(b),v===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},v===!0?y:o),_.placement="{x: 'center'}",_.size=50,_.content="Food",_.__textnode=!0,s[1].populate(_),v===!0&&(M-=1);const U=l.components&&l.components.Row||h.Row;i=s[0];const F={};s[2]=this.element({parent:i||"root"},v===!0?y:o),F.title="Fruits",F.x=200,F.y=150,F.items=["Banana","Strawberry","Kiwi","Mango","Grape"],F.ref="row1";const z=[];if(typeof U<"u")for(let I in U[Symbol.for("config")].props)delete F[U[Symbol.for("config")].props[I]],z.push(U[Symbol.for("config")].props[I]);s[2].populate(F),v===!0&&(M-=1),i=s[2];const B={};B.title="Fruits",B.x=200,B.y=150,C=["Banana","Strawberry","Kiwi","Mango","Grape"],Array.isArray(C)===!0&&(C=x(C).slice(0)),B.items=C,B.ref="row1",m=B.is||"Row";let G;if(typeof m=="string"){if(G=l.components&&l.components[m]||h[m],!G)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);s[3]=G.call(null,{props:B},s[2],o),s[3][Symbol.for("slots")][0]?(i=s[3][Symbol.for("slots")][0],y=s[3],v=!0):i=s[3][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const X=l.components&&l.components.Row||h.Row;i=s[0];const Q={};s[4]=this.element({parent:i||"root"},v===!0?y:o),Q.title="Snacks",Q.x=200,Q.y=600,Q.items=["Pizza","Burger","Fries","Popcorn","Chocolate"],Q.ref="row2";const W=[];if(typeof X<"u")for(let I in X[Symbol.for("config")].props)delete Q[X[Symbol.for("config")].props[I]],W.push(X[Symbol.for("config")].props[I]);s[4].populate(Q),v===!0&&(M-=1),i=s[4];const te={};te.title="Snacks",te.x=200,te.y=600,C=["Pizza","Burger","Fries","Popcorn","Chocolate"],Array.isArray(C)===!0&&(C=x(C).slice(0)),te.items=C,te.ref="row2",m=te.is||"Row";let de;if(typeof m=="string"){if(de=l.components&&l.components[m]||h[m],!de)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(de=m);return s[5]=de.call(null,{props:te},s[4],o),s[5][Symbol.for("slots")][0]?(i=s[5][Symbol.for("slots")][0],y=s[5],v=!0):i=s[5][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),s},effects:[function(i,o,l,h,g,x){(typeof skip2>"u"||skip2.indexOf("items")===-1)&&o[2].set("items",["Banana","Strawberry","Kiwi","Mango","Grape"])},function(i,o,l,h,g,x){o[3][Symbol.for("props")].items=["Banana","Strawberry","Kiwi","Mango","Grape"]},function(i,o,l,h,g,x){(typeof skip4>"u"||skip4.indexOf("items")===-1)&&o[4].set("items",["Pizza","Burger","Fries","Popcorn","Chocolate"])},function(i,o,l,h,g,x){o[5][Symbol.for("props")].items=["Pizza","Burger","Fries","Popcorn","Chocolate"]}],context:{}},state(){return{focusIndex:1}},watch:{focusIndex(f){this.$select("row"+f).$focus()}},hooks:{focus(){this.$announcer.speak("The topic is Food"),this.$select("row1").$focus(),this.$trigger("focusIndex")}},input:{up(){this.focusIndex=Math.max(this.focusIndex-1,1)},down(){this.focusIndex=Math.min(this.focusIndex+1,2)}}}),rb=new URLSearchParams(window.location.search),JD=!!rb.get("source"),eP=!!rb.get("fps"),tP=tt.Application({components:{SourceInfo:UT},code:{render:function(i,o,l,h,g,x,w){const s=[];let m,C,y,v=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},v===!0?y:o),b.w=1920,b.h=1080,b.color=o.backgroundColor,s[0].populate(b),v===!0&&(M-=1);const _=l.components&&l.components.RouterView||h.RouterView;i=s[0];const U={};s[1]=this.element({parent:i||"root"},v===!0?y:o),U.w=i.node.width*(100/100),U.h=i.node.height*(100/100);const F=[];if(typeof _<"u")for(let ne in _[Symbol.for("config")].props)delete U[_[Symbol.for("config")].props[ne]],F.push(_[Symbol.for("config")].props[ne]);s[1].populate(U),v===!0&&(M-=1),i=s[1];const z={};z.w=i.node.width*(100/100),z.h=i.node.height*(100/100),m=z.is||"RouterView";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "RouterView" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);s[2]=B.call(null,{props:z},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],y=s[2],v=!0):i=s[2][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const G=l.components&&l.components.FPScounter||h.FPScounter;i=s[0];const X={};s[3]=this.element({parent:i||"root"},v===!0?y:o),X.x=1610,X.show=o.showFPS;const Q=[];if(typeof G<"u")for(let ne in G[Symbol.for("config")].props)delete X[G[Symbol.for("config")].props[ne]],Q.push(G[Symbol.for("config")].props[ne]);s[3].populate(X),v===!0&&(M-=1),i=s[3];const W={};W.x=1610,C=o.showFPS,Array.isArray(C)===!0&&(C=x(C).slice(0)),W.show=C,m=W.is||"FPScounter";let te;if(typeof m=="string"){if(te=l.components&&l.components[m]||h[m],!te)throw new Error('Component "FPScounter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(te=m);s[4]=te.call(null,{props:W},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],y=s[4],v=!0):i=s[4][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const de=l.components&&l.components.SourceInfo||h.SourceInfo;i=s[0];const I={};s[5]=this.element({parent:i||"root"},v===!0?y:o),I.ref="info",I.show=o.showInfo;const q=[];if(typeof de<"u")for(let ne in de[Symbol.for("config")].props)delete I[de[Symbol.for("config")].props[ne]],q.push(de[Symbol.for("config")].props[ne]);s[5].populate(I),v===!0&&(M-=1),i=s[5];const ee={};ee.ref="info",C=o.showInfo,Array.isArray(C)===!0&&(C=x(C).slice(0)),ee.show=C,m=ee.is||"SourceInfo";let ae;if(typeof m=="string"){if(ae=l.components&&l.components[m]||h[m],!ae)throw new Error('Component "SourceInfo" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ae=m);return s[6]=ae.call(null,{props:ee},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],y=s[6],v=!0):i=s[6][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),s},effects:[function(i,o,l,h,g,x){o[0].set("color",i.backgroundColor)},function(i,o,l,h,g,x){(typeof skip3>"u"||skip3.indexOf("show")===-1)&&o[3].set("show",i.showFPS)},function(i,o,l,h,g,x){o[4][Symbol.for("props")].show=i.showFPS},function(i,o,l,h,g,x){(typeof skip5>"u"||skip5.indexOf("show")===-1)&&o[5].set("show",i.showInfo)},function(i,o,l,h,g,x){o[6][Symbol.for("props")].show=i.showInfo}],context:{}},state(){return{backgroundColor:"#1e293b",showFPS:eP,showInfo:!1}},routes:[{path:"/",component:lL,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>eT(()=>import("./Loading-Cp_vIlD6.js"),[])},{path:"/demos/intro",component:()=>new Promise(f=>{f(fL)})},{path:"/demos/theming",component:dL},{path:"/demos/tmdb",component:kL},{path:"/demos/sprites",component:AL},{path:"/demos/focushandling",component:ML},{path:"/demos/memory-game",component:d6,announce:"Let's play Memory"},{path:"/demos/player",component:VL},{path:"/examples/positioning",component:_L},{path:"/examples/colors",component:HL},{path:"/examples/gradients",component:GL},{path:"/examples/transitions",component:WL},{path:"/examples/alpha",component:XL},{path:"/examples/scaling",component:qL},{path:"/examples/rotation",component:KL},{path:"/examples/keyinput",component:YL},{path:"/examples/texts",component:QL},{path:"/examples/images",component:ZL},{path:"/examples/components",component:JL},{path:"/examples/forloop",component:e6},{path:"/examples/forloop-advanced",component:r6},{path:"/examples/effects",component:s6},{path:"/examples/showif",component:a6},{path:"/examples/events",component:l6},{path:"/examples/slots",component:c6},{path:"/examples/viewport",component:g6},...C6,{path:"/examples/resize",component:T6},{path:"/examples/languageplugin",component:jC},{path:"/examples/keycodes",component:E6},{path:"/examples/translations",component:jC},{path:"/examples/special-characters",component:M6},{path:"/examples/layout",component:_6},{path:"/examples/announcer",component:ZD,announce:"Welcome to the announcement example page"},{path:"/benchmarks/exponential",component:m6},...KD],hooks:{ready(){JD===!0&&(this.showInfo=!0),this.$listen("changeBackground",f=>{this.backgroundColor=f?f+80:"#1e293b"}),this.$listen("clearBackground",()=>{this.backgroundColor="transparent"})}},input:{async intercept(f){return f.key==="x"?(this.$log.info(`Intercepting key press (${f.key}) in App Component`),new Promise(i=>{this.$log.info("Executing an async operation"),setTimeout(()=>{this.$log.info("Finished an async operation"),i(f)},2e3)})):f},escape(){this.quit()},back(){this.$router.to("/")},sourceCode(){this.showInfo=!1;const f=nP(this.$router.currentRoute.path);f&&window.open(`https://github.com/lightning-js/blits-example-app/tree/master/${f}`,"_blank")}}}),nP=f=>({"/":"src/pages/Portal","/demos/loading":"src/pages/Loading","/demos/intro":"src/pages/Intro","/demos/theming":"src/pages/Theming","/demos/tmdb":"src/pages/Tmdb","/demos/sprites":"src/pages/Sprites","/demos/focushandling":"src/pages/FocusHandling","/demos/memory-game":"src/pages/MemoryGame","/demos/player":"src/pages/Player","/examples/positioning":"src/pages/Positioning","/examples/colors":"src/pages/Colors","/examples/gradients":"src/pages/Gradients","/examples/transitions":"src/pages/Transitions","/examples/components":"src/pages/Components","/examples/alpha":"src/pages/Alpha","/examples/scaling":"src/pages/Scaling","/examples/rotation":"src/pages/Rotation","/examples/keyinput":"src/pages/KeyInput","/examples/forloop":"src/pages/ForLoop","/examples/forloop-advanced":"src/pages/ForLoopAdvanced","/examples/effects":"src/pages/Effects","/examples/showif":"src/pages/ShowIf","/examples/events":"src/pages/Events","/examples/images":"src/pages/Images","/examples/texts":"src/pages/Texts","/examples/slots":"src/pages/Slots","/examples/viewport":"src/pages/Viewport","/examples/router-hooks":"src/pages/RouterHooks","/examples/resize":"src/pages/Resize","/examples/translations":"src/pages/LanguagePlugin","/examples/firebolt":"src/pages/Firebolt","/examples/keycodes":"src/pages/KeyCodes","/examples/special-characters":"src/pages/SpecialCharacters","/examples/layout":"src/pages/Layout","/benchmarks/exponential":"src/pages/Exponential"})["/"+f]+".js",WC={light:{color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},dark:{color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"}},XC={large:{w:1200,h:900,block1:{h:720},block2:{y:560,h:300,w:890},graph:{x:270,y:140,w:890,h:400,offset:110,size:"large"}},small:{w:500,h:600,block1:{h:180},block2:{y:140,h:180,w:200},graph:{x:32,y:370,w:0,h:0,offset:0,size:"small"}}};tt.Plugin(NT,"colors",{themes:{light:WC.light,dark:WC.dark},base:"light",current:"dark"});tt.Plugin(NT,"sizes",{themes:{small:XC.small,large:XC.large},base:"small",current:"small"});tt.Plugin(tL);tt.Launch(tP,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",defaultFont:"lato",keymap:{...oL(),85:"sourceCode"},fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"},{family:"lato-black",type:"msdf",file:"fonts/Lato-Black.ttf"}],canvasColor:"transparent",viewportMargin:100,announcer:!0});export{tt as B,dl as S};
