var YM=Object.defineProperty;var QM=(f,i,o)=>i in f?YM(f,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):f[i]=o;var O=(f,i,o)=>(QM(f,typeof i!="symbol"?i+"":i,o),o);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const v of g.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&l(v)}).observe(document,{childList:!0,subtree:!0});function o(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function l(h){if(h.ep)return;h.ep=!0;const g=o(h);fetch(h.href,g)}})();const Se={currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),intervals:Symbol("intervals"),launched:Symbol("launched"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),routerHooks:Symbol("routerHooks"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),config:Symbol.for("config"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType"),isComponent:Symbol.for("isComponent"),effects:Symbol.for("effects"),removeGlobalEffects:Symbol.for("removeGlobalEffects")},oi={[Se.settings]:{},get(f,i=null){return f in this[Se.settings]?this[Se.settings][f]:i},set(f,i){typeof f=="object"?Object.keys(f).forEach(o=>{this.set(o,f[o])}):this[Se.settings][f]=i}},vh=()=>{},Im=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),VC=f=>{const i=oi.get("debugLevel"),o={};return Object.defineProperty(o,"info",{get(){return(i>=1||Array.isArray(i)&&i.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${f} %c ${Im()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||vh}}),Object.defineProperty(o,"warn",{get(){return(i>=1||Array.isArray(i)&&i.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${f} %c ${Im()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||vh}}),Object.defineProperty(o,"error",{get(){return(i>=1||Array.isArray(i)&&i.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${f} %c ${Im()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||vh}}),Object.defineProperty(o,"debug",{get(){return(i>=2||Array.isArray(i)&&i.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${f} %c (${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||vh}}),o};let dn;const ZM=()=>{dn=VC("Blits")},xh={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},JM=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,e_=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,t_=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,Mm={},wh=f=>{if(Mm[f]!==void 0)return Mm[f];const i=parseInt(f).toString(16).padStart(2,"0");return Mm[f]=i,i},Ya={normalize:(f="",i="0xffffffff")=>{if(f=f.toString(),f.startsWith("0x")&&f.length===10)return f;if(xh[f]!==void 0)return xh[f];if(JM.test(f)){f=f.replace("#","").toLowerCase(),f.length===3&&(f=f.split("").map(h=>h+h).join(""));const l="0x"+f.padEnd(8,"f");return xh[f]=l,l}const o=e_.exec(f);if(o){const l=wh(o[3]),h=wh(o[5]),g=wh(o[7]);let v="ff";if(o[10]&&o[1]==="rgba"){const s=Math.min(Math.max(Math.round(parseFloat(o[10])*255),0),255);v=wh(s)}const w="0x"+l+h+g+v;return xh[f]=w,w}return t_.test(f)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):i}},n_=(f="",i,o,l=null)=>{let h=0,g=0,v=[],w=null,s=0;const m=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,C=/^\s*(\/?>)\s*/,y=/^([A-Za-z0-9:.\-_@$]+)=\s*(["'])/,x=/^<>\s*/,M=/^\s*(<\/>)\s*/,b=()=>{f=P(f);try{return _(H),he(v)}catch(W){throw(W.name=="TemplateParseError"||W.name=="TemplateStructureError")&&(W.message=`${W.message}
${W.context}`),W}},_=W=>{h>=f.length||W()},P=W=>W.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),j=W=>{const J=f.slice(h).match(W);return J&&(g=h,h+=J[0].length),J},H=()=>{j(x)?(v.push({[Symbol.for("componentType")]:null,[Se.type]:"opening",[Se.level]:s,[Se.cursorTagStart]:g}),s++,_(H)):_($)},$=()=>{j(M)?(s--,v.push({[Symbol.for("componentType")]:null,[Se.type]:"closing",[Se.level]:s}),_(H)):_(B)},B=()=>{const W=j(m);if(W)w={[Symbol.for("componentType")]:W[1],[Se.level]:s,[Se.cursorTagStart]:g},W[0].startsWith("</")?(s--,w[Se.type]="closing",w[Se.level]=s):(w[Se.type]="opening",s++),_(te);else throw Z("InvalidTag")},te=()=>{const W=j(C);if(W){if(W[1]==="/>"){if(w[Se.type]==="closing")throw Z("InvalidClosingTag");w[Se.type]="self-closing",s--}if(w[Se.type]==="opening"){const J=f.slice(h,f.indexOf("<",h));J&&(w.content=J,h+=J.length)}v.push(w),_(H)}else _(X)},X=()=>{const W=j(y);if(W){if(w[Se.type]==="closing")throw Z("AttributesInClosingTag");const J=W[2],fe=new RegExp(`^(.*?)${J}\\s*`),ye=j(fe);if(ye){const ge=Y(W[1],ye[1]);w[ge.name]=ge.value,_(te)}else throw Z("MissingOrInvalidAttributeValue")}else throw Z("InvalidAttribute")},Y=(W,J)=>{if(W.includes(".")){const[fe,ye]=W.split(".");return{name:fe,value:`{${ye}: ${J}}`}}return["color",":color",":effects","effects"].includes(W)?ee(W,J):{name:W,value:J}},ee=(W,J)=>{let fe=J,ye=Ya.normalize(fe,null);if(ye===null){const ge=/'([^']+)'/g;let pe,Ee=0,Re="";for(;(pe=ge.exec(J))!==null;){const z=pe[1],Me=pe.index,ve=pe[0].length;Re+=J.slice(Ee,Me),ye=Ya.normalize(z,null),ye===null?Re+=J.slice(Me,Me+ve):Re+=`'${ye}'`,Ee=Me+ve}Re+=J.slice(Ee),fe=Re}else fe=ye;return{name:W,value:fe}},he=W=>{let J=[],fe=!1,ye={children:[]},ge=ye;for(let pe=0;pe<W.length;pe++){let Ee=W[pe];if(Ee[Se.level]===0&&Ee[Se.type]!=="closing"){if(fe)throw oe("MultipleTopLevelTags",Ee);if(Ee[":for"]!==void 0)throw oe("ForAttributeOnRootElement",Ee);fe=!0}if(Ee[Se.type]==="opening")J.push({[Se.level]:Ee[Se.level],[Se.type]:Ee[Se.type],[Se.cursorTagStart]:Ee[Se.cursorTagStart],[Symbol.for("componentType")]:Ee[Symbol.for("componentType")],parent:ge});else if(Ee[Se.type]==="closing"){const z=J.length===0;let Me=!1,ve=!1;if(z||(Me=J[J.length-1][Se.level]!==Ee[Se.level],ve=J[J.length-1][Symbol.for("componentType")]!==Ee[Symbol.for("componentType")]),z||Me||ve)throw oe("MismatchedClosingTag",Ee);ge=J.pop().parent}const Re={...Ee};delete Re[Se.type],delete Re[Se.level],delete Re[Se.cursorTagStart],Ee[Se.type]==="opening"?(pe+1<W.length&&W[pe+1][Se.type]!=="closing"&&(Re.children=[]),ge.children.push(Re),ge=Re):Ee[Se.type]==="self-closing"&&ge.children.push(Re)}if(J.length>0)throw oe("UnclosedTags",J);return ye},k=10,V=50,Z=W=>{const J=ne();W=`${W} in ${J}`;const fe=new Error(W);fe.name="TemplateParseError";const ye=Math.max(0,g-k),ge=Math.min(f.length,h+V),pe=f.slice(ye,ge),Ee=h-ye;return fe.context=K(Ee,pe),fe},oe=(W,J)=>{const fe=ne();W=`${W} in ${fe}`;const ye=new Error(W);ye.name="TemplateStructureError",Array.isArray(J)?ye.context=J.map(pe=>ge(pe)).join(`
`):ye.context=ge(J);function ge(pe){const Ee=Math.max(0,pe[Se.cursorTagStart]-k),Re=f.slice(Ee,Ee+V);return K(k,Re)}return ye},K=(W,J)=>{const fe=" ".repeat(W)+"^";return`
${J}
${fe}
`},ne=()=>{if(o){let W=i||"",J=o;for(;J;)W=`${J[Symbol.for("componentType")]}/${W}`,J=J.parent;return W}return l||"Blits.Application"};return b()};let Gt,Kh;function o_(f={children:[]},i=!1){const o={renderCode:["const elms = []","let componentType","const rootComponent = component","let propData","let slotComponent","let inSlot = false","let slotChildCounter = 0"],effectsCode:[],context:{props:[],components:this.components}};return Gt=-1,Kh=i,Kh===!0&&o.renderCode.push(`
      function propInComponent(prop, kind="dynamic") {
        const property = prop.includes('.') ? prop.split('.')[0] : prop
        if (kind === 'reactive' || prop.includes('.') === false) {
          if (property in component === false) {
            Log.warn('Property ' +  property + ' was accessed during render but is not defined on instance')
          }
        } else {
          const nestedKeys = prop.split('.')
          let base = component
          for(let i =0; i<nestedKeys.length;i++){
            if (base[nestedKeys[i]] === undefined) {
              Log.warn('Property ' +  nestedKeys.slice(0,i+1).join('.') + ' was accessed during render but is not defined on instance')
            }
            base = base[nestedKeys[i]]
          }
        }
      }
    `),GC.call(o,f),o.renderCode.push("return elms"),{render:new Function("parent","component","context","components","effect","getRaw","Log",o.renderCode.join(`
`)),effects:o.effectsCode.map(l=>new Function("component","elms","context","components","rootComponent","effect",l)),context:o.context}}const i_=function(f){const i=/\$\$?\w+(\.\w+)?/g,o=f.match(i);if(o!==null){const l=/\$shader/;return o.filter(h=>!l.test(h))}else return!1},YS=function(f,i,o="dynamic"){const l=i_(f);if(l!==!1)for(let h=0;h<l.length;h++){let g=l[h];o==="reactive"&&g.includes(".")&&(g=g.split(".")[0]),i.push(`propInComponent('${g.replace("$","")}', '${o}')`)}},qh=function(f,i=!1,o={key:!1,component:"component.",forceEffect:!1,forloop:!1}){const l=o.forceEffect?this.effectsCode:this.renderCode;i&&l.push(`parent = ${i}`),"key"in f&&(o.key=ni(f.key,o.component));const h=o.key?`elms[${Gt}][${o.key}]`:`elms[${Gt}]`;o.key&&l.push(`
      if(elms[${Gt}] === undefined) {
        elms[${Gt}] = {}
      }
    `),l.push(`const elementConfig${Gt} = {}`),o.forloop&&l.push(`if(${h} === undefined) {`),l.push(`
    ${h} = this.element({parent: parent || 'root'}, inSlot === true ? slotComponent : component)
  `),o.forloop&&l.push("}");const g=f.children;delete f.children,f[Symbol.for("componentType")]==="Slot"&&l.push(`elementConfig${Gt}[Symbol.for('isSlot')] = true`),Object.keys(f).forEach(v=>{if(v==="slot"&&l.push(`
        elementConfig${Gt}['parent'] = slotComponent[Symbol.for('slots')] !== undefined && Array.isArray(slotComponent[Symbol.for('slots')]) === true && slotComponent[Symbol.for('slots')].filter(slot => slot.ref === '${f.slot}').shift() || parent
      `),v==="key")return;const w=f[v];if(WC(v)){if(o.holder&&v===":color")return;o.holder?this.effectsCode.push(`
        if(typeof skip${Gt} === 'undefined' ||
          skip${Gt}.indexOf('${v.substring(1)}') === -1)
          ${h}.set('${v.substring(1)}', ${ni(f[v],o.component)})
        `):this.effectsCode.push(`
            ${h}.set('${v.substring(1)}', ${ni(f[v],o.component)})
          `),Kh===!0&&o.component!=="scope."&&w.includes("$")&&YS(w,l,"reactive"),l.push(`elementConfig${Gt}['${v.substring(1)}'] = ${ni(w,o.component)}`)}else Kh===!0&&o.component!=="scope."&&w.includes("$")&&YS(w,l),l.push(`elementConfig${Gt}['${v}'] = ${yg(w,v,o.component)}`)}),o.holder===!0&&l.push(`
    const skip${Gt} = []
    if(typeof cmp${Gt} !== 'undefined') {
      for(let key in cmp${Gt}[Symbol.for('config')].props) {
        delete elementConfig${Gt}[cmp${Gt}[Symbol.for('config')].props[key]]
        skip${Gt}.push(cmp${Gt}[Symbol.for('config')].props[key])
      }
    }
    `),o.forloop&&l.push(`if(${h}.nodeId === undefined) {`),l.push(`${h}.populate(elementConfig${Gt})`),l.push(`
    if(inSlot === true) {
      slotChildCounter -= 1
    }
  `),o.forloop&&l.push("}"),g&&GC.call(this,{children:g},`${h}`,o)},HC=function(f,i=!1,o={key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1}){const l=o.forceEffect?this.effectsCode:this.renderCode;l.push(`
    const cmp${Gt} =
      (context.components && context.components['${f[Symbol.for("componentType")]}']) || components['${f[Symbol.for("componentType")]}']
  `),"key"in f&&(o.key=ni(f.key,o.component));const h=f.children;delete f.children,qh.call(this,f,i,{...o,holder:!0}),i=o.key?`elms[${Gt}][${o.key}]`:`elms[${Gt}]`,Gt++;const g=o.key?`elms[${Gt}][${o.key}]`:`elms[${Gt}]`;o.key&&l.push(`
      if(elms[${Gt}] === undefined) {
        elms[${Gt}] = {}
      }
    `),i&&l.push(`parent = ${i}`),l.push(`const props${Gt} = {}`),o.forloop&&l.push(`if(${g} === undefined) {`),Object.keys(f).forEach(v=>{WC(v)?(this.effectsCode.push(`
        ${g}[Symbol.for('props')]['${v.substring(1)}'] = ${ni(f[v],o.component)}`),l.push(`
        propData = ${ni(f[v],o.component)}
        if (Array.isArray(propData) === true) {
          propData = getRaw(propData).slice(0)
        }
        props${Gt}['${v.substring(1)}'] = propData`)):l.push(`props${Gt}['${v}'] = ${yg(f[v],v,o.component)}`)}),l.push(`
    componentType = props${Gt}['is'] || '${f[Symbol.for("componentType")]}'

    let component${Gt}
    if(typeof componentType === 'string') {
      component${Gt} = context.components && context.components[componentType] || components[componentType]
      if(!component${Gt}) {
        throw new Error('Component "${f[Symbol.for("componentType")]}" not found')
      }
    } else if(typeof componentType === 'function' && componentType[Symbol.for('isComponent')] === true) {
      component${Gt} = componentType
    }

    ${g} = component${Gt}.call(null, {props: props${Gt}}, ${i}, component)

    if (${g}[Symbol.for('slots')][0]) {
      parent = ${g}[Symbol.for('slots')][0]
      slotComponent = ${g}
      inSlot = true
    } else {
      parent = ${g}[Symbol.for('children')][0]
    }
  `),o.forloop&&l.push("}"),h&&(o.forloop||l.push(`
        if(inSlot === true) {
          slotChildCounter = ${h.length}  + 1
        }
      `),Gt++,qh.call(this,{children:h},!1,{...o})),o.forloop||l.push(`
      if (inSlot === true && slotChildCounter === 0) {
        inSlot = false
      }
    `)},r_=function(f,i){const o=f[":for"];delete f[":for"];const l=f.range||f[":range"]||"{}";delete f.range,delete f[":range"];const h=f.key,g=ni(h,"scope."),v=!(f.$shallow&&f.$shallow.toLowerCase()==="false");delete f.$shallow,delete f.key;const s=/(.+)\s+in\s+(.+)/gi.exec(o),[m,C]=s[1].replace("(","").replace(")","").split(/\s*,\s*/),y=new RegExp(`(scope\\.(?!${m}\\.|${C}|key)(\\w+))`,"gi"),x={renderCode:[],effectsCode:[],context:{props:[],components:this.components}};if(i&&x.renderCode.push(`parent = ${i}`),C!==void 0){const Y=new RegExp(`\\$${C}(?!['\\w])`).exec(h);Array.isArray(Y)&&x.renderCode.push(`console.warn(" Using '${C}' in the key, like key=${h},  is not recommended")`)}const M=Gt;x.renderCode.push(`
    const created${M} = []

    let from${M}
    let to${M}

    const forloop${M} = (collection = [], elms, created) => {
      const rawCollection = getRaw(collection)
      const keys = new Set()
      let l = rawCollection.length

      const range = ${ni(l)} || {}
      from${M} = range['from'] || 0
      to${M} = 'to' in range ? range['to'] : rawCollection.length

      while(l--) {
        const ${m} = rawCollection[l]
  `),C!==void 0&&x.renderCode.push(`
        const ${C} = l
    `),x.renderCode.push(`
        if(l < to${M} && l >= from${M}) {
          keys.add('' +  ${ni(h,"")||"l"})
        }
      }
  `);const b=x.renderCode.length;x.renderCode.push(`
      created.length = 0
      const length = rawCollection.length
      const effects = []
      for(let __index = 0; __index < length; __index++) {
        if(__index < from${M} || __index >= to${M}) continue
        const scope = Object.create(component)
        parent = ${i}
        scope['${m}'] = rawCollection[__index]
  `),C!==""&&x.renderCode.push(`
        scope['${C}'] = __index
    `),x.renderCode.push(`
        scope['key'] = '' + ${g||"__index"}
  `),"ref"in f&&f.ref.indexOf("$")===-1&&(x.renderCode.push(`
        scope['__ref'] = '${f.ref}' + __index
    `),f.ref="$__ref"),x.renderCode.push(`
        created.push(scope.key)
  `),f[Symbol.for("componentType")]==="Element"||f[Symbol.for("componentType")]==="Slot"||f[Symbol.for("componentType")]==="Text"?(f[Symbol.for("componentType")]==="Text"&&(f.__textnode="true"),qh.call(x,f,i,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0})):HC.call(x,f,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});const _=x.effectsCode.filter(X=>[...X.matchAll(y)].length===0),P=x.effectsCode.filter(X=>[...X.matchAll(y)].length!==0);v===!1&&x.renderCode.push(`
      scope['${m}'] = null
      scope['${m}'] = collection[__index]
  `),_.forEach((X,Y)=>{const ee=X.indexOf(`scope.${Y}`)>-1?`'${ni(s[2],"")}'`:null;X.indexOf("Symbol.for('props')")===-1?x.renderCode.push(`
        let eff${Y} = () => {
          ${X}
        }
        effect(eff${Y}, ${ee})
        effects.push(eff${Y})
      `):x.renderCode.push(`
        ${X}
      `)}),x.renderCode.push(`
    }
    return effects
  }`);const j=[];j.push(`
      let i = created.length

      while (i--) {
        if (keys.has(created[i]) === false) {
          const key = created[i]
  `);const H=Gt;for(let X=M;X<=H;X++)j.push(`
          elms[${X}][key] && elms[${X}][key].destroy()
          delete elms[${X}][key]
      `);j.push(`
      }
    }
  `),x.renderCode.splice(b,0,...j);let $=`${ni(s[2],"")}`;$&&$.includes(".")&&($=$.match(/[^.]+$/)[0]);const B=/\$([^,} ]+)/g,te=[...l.matchAll(B)].map(X=>`'${X[1]}'`);x.renderCode.push(`
    let forEffects${M}
    effect(() => {
      component[Symbol.for('removeGlobalEffects')](forEffects${M})
      forEffects${M} = null
      forEffects${M} = forloop${M}(${yg(s[2],":for")}, elms, created${M})
    }, ['${$}', ${te.join(",")}] )
  `),P.forEach(X=>{const Y=[...X.matchAll(y)];let ee=Y.length;const he=[];for(;ee--;){const k=Y[ee],V=`component.${k[2]}`;he.indexOf(V)===-1&&he.push(V),k[2]!==m&&(X=X.substring(0,k.index)+V+X.substring(k.index+k[1].length))}x.renderCode.push(`
      effect(() => {
        void ${he.join(", ")}
        for(let __index = 0; __index < ${ni(s[2])}.length; __index++) {
          if(__index < from${M} || __index >= to${M}) continue
          const scope = {}
          scope['${C}'] = __index
          scope['${m}'] = ${ni(s[2])}[__index]
          scope['key'] = ${g||"__index"}
    `),x.renderCode.push(`
          ${X}
        }
      })
    `)}),this.renderCode.push(x.renderCode.join(`
`))},GC=function(f,i=!1,o={}){f.children&&f.children.forEach(l=>{Gt++,Object.keys(l).indexOf(":for")>-1?r_.call(this,l,i):l[Symbol.for("componentType")]==="Element"||l[Symbol.for("componentType")]==="Slot"||l[Symbol.for("componentType")]==="Text"||l[Symbol.for("componentType")]==="Layout"?(l[Symbol.for("componentType")]==="Text"&&(l.__textnode="true"),l[Symbol.for("componentType")]==="Layout"&&(l.__layout="true"),qh.call(this,l,i,o)):HC.call(this,l,i,o)})},ni=(f,i="component.")=>{if(f===void 0)return f;const o=/('.*?')+/gi,l=/\$(\$(?=\$)|\$?)/g,h=f.matchAll(o),g=[];let v=0;for(const w of h)g.push(w[0]),f=f.replace(w[0],`[@@REPLACEMENT${v}@@]`),v++;return f=f.replace(l,(w,s)=>{if(s==="")return i;if(s==="$")return i+"$"}),g.forEach((w,s)=>{f=f.replace(`[@@REPLACEMENT${s}@@]`,w)}),f},yg=(f="",i=!1,o="component.")=>{const l=/\$\w+/gi;let h;if(i==="content")if(f.startsWith("$"))h=`${o}${f.replace("$","")}`;else{const g=f.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");h=`'${s_(g,o)}'`}else if(i!=="color"&&/[^0-9%\s.eE]/.test(f)===!1&&!isNaN(parseFloat(f))){if(h=parseFloat(f),f.endsWith("%")){const v={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[i];v&&(h=`parent.node.${v} * (${h} / 100)`)}}else if(f.toLowerCase()==="true")h=!0;else if(f.toLowerCase()==="false")h=!1;else if(i.startsWith("@")&&f){const g=o.slice(0,-1);h=`${g}['${f.replace("$","")}'] && ${g}['${f.replace("$","")}'].bind(${g})`}else if(f.startsWith("$"))h=`${o}${f.replace("$","")}`;else if(l.exec(f)){const g=/\w+\s*:\s*(?:[^\s,}]+|".*?"|'.*?')/g,v=f.match(g);if(h={},v)for(let w=0;w<v.length;w++){const s=v[w].split(/\s*:\s*/);s&&a_(s[0],s[1],o,h)}return l_(h)}else h=`"${f}"`;return h},WC=f=>f.startsWith(":"),s_=(f,i)=>{const o=/\{\{\s*(\$\S+)\s*\}\}/g,l=[...f.matchAll(o)];if(l.length)for(let[h,g]of l)f=f.replace(h,`${g.replace("$",`'+${i}`)}+'`);return f},a_=(f,i,o,l)=>{i.startsWith("$")?l[f]=`${o}${i.replace("$","")}`:l[f]=i},l_=f=>{const i=[];return Object.keys(f).forEach(o=>{i.push(`${o}: ${f[o]}`)}),` { ${i.join(", ")} }`},QS={};let u_=0;const f_=f=>`BlitsComponent::${f}_${QS[f]=(QS[f]||0)+1}`,c_=()=>++u_,Gr={},qm=(f,i,o,l=[])=>{Gr[i]&&Gr[i][f]&&Gr[i][f].apply(o,l)},h_=(f,i,o)=>{const l=Se[f];Gr[i]&&Gr[i][l]&&Gr[i][l].apply(o)},d_=(f={},i)=>{Gr[i]={},[...Object.keys(f),...Object.getOwnPropertySymbols(f)].forEach(l=>{typeof f[l]=="function"&&(Gr[i][l]=f[l])})};let Qa=null,Ha=null,fd=!1;const p_=()=>{fd=!0},m_=()=>{fd=!1},Yh=new WeakMap,Uh=new Map,ZS=f=>{if(Uh.size!==0)for(const[i,o]of Uh){if(f.indexOf(i)===-1)continue;const l=Yh.get(o);if(l!==void 0)for(const h of l.values())h.delete(i),Uh.delete(i)}},Bh=(f,i,o=!1)=>{if(Qa!==null){if(fd)return;if(Array.isArray(Ha)===!0){if(Ha.includes(i)===!1)return}else if(Ha!==null&&i!==Ha)return;let l=Yh.get(f);l===void 0&&(l=new Map,Yh.set(f,l));let h=l.get(i);h===void 0&&(h=new Set,l.set(i,h)),h.add(Qa),o===!0&&Uh.set(Qa,f)}},Za=(f,i,o=!1)=>{if(fd===!0)return;const l=Yh.get(f);if(l===void 0)return;const h=l.get(i);if(h!==void 0)for(let g of h)g(o)},Sh=(f,i=null)=>{Qa=f,Ha=i,Qa(),Qa=null,Ha=null},Ym=(f,i)=>{if(f===i)return!0;if(f.length!==i.length)return!1;let o=f.length;for(;o--;){const l=f[o],h=i[o];if(Array.isArray(l)&&Array.isArray(h)){if(Ym(l,h)===!1)return!1}else if(typeof l=="object"&&l!==null&&typeof h=="object"&&h!==null){if(Ym(Object.entries(l),Object.entries(h))===!1)return!1}else if(l!==h)return!1}return!0},jh=["push","pop","shift","unshift","splice","sort"],JS=new WeakMap,vs=f=>{const i=f&&f[Se.raw];return i?vs(i):f},Qm=(f,i=null,o,l)=>{if(typeof f=="object"&&Array.isArray(f)===!1&&Object.getPrototypeOf(f)!==Object.prototype)return f;const h=JS.get(f);if(h!==void 0)return h;const g={get(w,s,m){return s===Se.raw?f:Array.isArray(w)===!0?typeof w[s]=="object"&&w[s]!==null?(Array.isArray(w[s])===!0&&Bh(w,s,l),Qm(vs(w[s]),w,s)):jh.indexOf(s)!==-1?function(...C){p_();const y=w[s].apply(this,C);return m_(),Za(i,o),y}:s==="length"?f.length:Reflect.get(w,s,m):typeof w[s]=="object"&&w[s]!==null?(Array.isArray(w[s])===!0&&Bh(w,s,l),Qm(vs(w[s]),w,s)):(Bh(w,s,l),Reflect.get(w,s,m))},set(w,s,m,C){const y=vs(w[s]),x=vs(m);let M=!0,b=!1;return Array.isArray(x)===!0&&Array.isArray(y)===!0?b=Ym(y,x):y===x&&(b=!0),b===!1&&(typeof m=="object"&&(Array.isArray(m)===!0?m=vs(m).slice(0):m!==null&&w[s]!==null&&w[s]!==void 0&&Array.isArray(w)===!1&&Object.getPrototypeOf(m)===Object.prototype&&(m=Object.assign(C[s],m))),M=Reflect.set(w,s,m,C)),M===!0&&b===!1&&(Array.isArray(w)===!0&&s in w&&Za(i,o,!0),Za(w,s,!0)),M}},v=new Proxy(f,g);return JS.set(f,v),v},XC=(f,i)=>(Object.keys(f).forEach(o=>{let l=f[o];if(f[o]!==null&&typeof f[o]=="object"){if(Object.getPrototypeOf(f[o])===Object.prototype)return XC(f[o]);if(Array.isArray(f[o])===!0)for(let h=0;h<jh.length-1;h++)f[o][jh[h]]=function(g){Array.prototype[jh[h]].call(this,g),Za(f,o)}}Object.defineProperty(f,o,{enumerable:!0,configurable:!0,get(){return Bh(f,o,i),l},set(h){l!==h&&(l=h,Za(f,o))}})}),f),g_=typeof Proxy<"u",$u=(f,i="Proxy",o=!1)=>(g_===!1&&(i="defineProperty"),i==="defineProperty"?XC(f,o):Qm(f,void 0,void 0,o)),y_=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],v_={previous:null,current:null,get state(){return this.current},set state(f){y_.indexOf(f)>-1&&(f!==this.current||f==="focus")&&(dn.debug(`Setting lifecycle state from ${this.current} to ${f} for ${this.component.componentId}`),this.previous=this.current,this.current=f,h_(f,this.component[Se.identifier],this.component),qm(f,this.component[Se.identifier],this.component))}};function x_(f,i=!1,o){const l={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},h=f.getContext(i?"webgl2":"webgl",l)||f.getContext("experimental-webgl",l);if(!h)throw new Error("Unable to create WebGL context");return o?new Proxy(h,{get(g,v){const w=g[v];return typeof w=="function"?(o.increment(String(v)),w.bind(g)):w}}):h}function lt(f,i){if(tl()!==!0&&!f)throw new Error(i||"Assertion failed")}function eC(f,i,o){const l=Math.trunc(f>>>24),h=Math.trunc(f>>>16&255),g=Math.trunc(f>>>8&255),v=Math.trunc(f&255),w=Math.trunc(i>>>24),s=Math.trunc(i>>>16&255),m=Math.trunc(i>>>8&255),C=Math.trunc(i&255),y=Math.round(w*o+l*(1-o)),x=Math.round(s*o+h*(1-o)),M=Math.round(m*o+g*(1-o)),b=Math.round(C*o+v*(1-o));return(y<<24|x<<16|M<<8|b)>>>0}function w_(f,i){const o=f>>>24,l=f>>>16&255,h=f>>>8&255,g=Math.trunc((f&255)*i);return(o<<24|l<<16|h<<8|g)>>>0}let KC=!0;function S_(f){KC=f==="webgl"}function Ch(f,i,o=!1){const l=(f&255)/255*i,h=KC?l:1,g=Math.trunc((f>>>24)*h),v=Math.trunc((f>>>16&255)*h),w=Math.trunc((f>>>8&255)*h),s=Math.trunc(l*255);return o?(s<<24|w<<16|v<<8|g)>>>0:(g<<24|v<<16|w<<8|s)>>>0}function Qh(f,i){return Object.prototype.hasOwnProperty.call(f,i)}function tl(){return{VITE_TMDB_KEY:"ABC123",VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&!0}let C_=1;function T_(){return C_++}class Cr{constructor(){O(this,"eventListeners",{})}on(i,o){let l=this.eventListeners[i];l||(l=[]),l.push(o),this.eventListeners[i]=l}off(i,o){const l=this.eventListeners[i];if(!l)return;if(!o){delete this.eventListeners[i];return}const h=l.indexOf(o);h>=0&&l.splice(h,1)}once(i,o){const l=(h,g)=>{this.off(i,l),o(h,g)};this.on(i,l)}emit(i,o){const l=this.eventListeners[i];l&&[...l].forEach(h=>{h(this,o)})}removeAllListeners(){this.eventListeners={}}}var _n;(function(f){f[f.generic=0]="generic",f[f.color=1]="color",f[f.image=2]="image",f[f.noise=3]="noise",f[f.renderToTexture=4]="renderToTexture",f[f.subTexture=5]="subTexture"})(_n||(_n={}));class Wu extends Cr{constructor(o){super();O(this,"txManager");O(this,"_dimensions",null);O(this,"_error",null);O(this,"state","initial");O(this,"renderableOwners",new Set);O(this,"renderable",!1);O(this,"type",_n.generic);O(this,"preventCleanup",!1);O(this,"ctxTexture");O(this,"textureData",null);this.txManager=o}get dimensions(){return this._dimensions}get error(){return this._error}setRenderableOwner(o,l){var g,v;const h=this.renderableOwners.size;if(l===!0){this.renderableOwners.has(o)===!1&&this.renderableOwners.add(o);const w=this.renderableOwners.size;w>h&&w===1&&(this.renderable=!0,(g=this.onChangeIsRenderable)==null||g.call(this,!0),this.load())}else{this.renderableOwners.delete(o);const w=this.renderableOwners.size;w<h&&w===0&&(this.renderable=!1,(v=this.onChangeIsRenderable)==null||v.call(this,!1),this.txManager.orphanTexture(this))}}load(){this.txManager.loadTexture(this)}loadCtxTexture(){return this.ctxTexture===void 0&&(this.ctxTexture=this.txManager.renderer.createCtxTexture(this)),this.ctxTexture}free(){var o;(o=this.ctxTexture)==null||o.free()}freeTextureData(){this.textureData=null}setState(o,l){if(this.state===o)return;let h=null;o==="loaded"?(l!==void 0&&"width"in l&&"height"in l&&l.width!==void 0&&l.height!==void 0&&(this._dimensions=l),h=this._dimensions):o==="failed"&&(this._error=l,h=this._error),this.state=o,this.emit(o,h)}async getTextureData(){return this.textureData===null&&(this.textureData=await this.getTextureSource()),this.textureData}static makeCacheKey(o){return!1}static resolveDefaults(o){return{}}}const b_=/^(data|ftps?|https?):/,Xu=f=>{const i=f>>>24,o=f>>>16&255,l=f>>>8&255,h=f&255;return[i/255,o/255,l/255,h/255]},tC=f=>{const i=f>>>24,o=f>>>16&255,l=f>>>8&255,h=f&255;return[i,o,l,h]};function nC(f){return(f&255)/255}function _m(f){const i=Math.floor(f[0]*255),o=Math.floor(f[1]*255),l=Math.floor(f[2]*255),h=Math.floor(f[3]*255);return`rgba(${i},${o},${l},${h.toFixed(4)})`}function Ga(f,i,o,l,h){return h?(h.x1=f,h.y1=i,h.x2=o,h.y2=l,h):{x1:f,y1:i,x2:o,y2:l}}function Rm(f,i){return f.x1<i.x2&&f.x2>i.x1&&f.y1<i.y2&&f.y2>i.y1}function E_(f,i){return i?(i.x=f.x1,i.y=f.y1,i.width=f.x2-f.x1,i.height=f.y2-f.y1,i):{x:f.x1,y:f.y1,width:f.x2-f.x1,height:f.y2-f.y1}}function qC(f,i,o){const l=Math.max(f.x,i.x),h=Math.max(f.y,i.y),g=Math.min(f.x+f.width,i.x+i.width)-l,v=Math.min(f.y+f.height,i.y+i.height)-h;return g>0&&v>0?o?(o.x=l,o.y=h,o.width=g,o.height=v,o):{x:l,y:h,width:g,height:v}:o?(o.x=0,o.y=0,o.width=0,o.height=0,o):{x:0,y:0,width:0,height:0}}function YC(f,i){return i?(i.x=f.x,i.y=f.y,i.width=f.width,i.height=f.height,i):{x:f.x,y:f.y,width:f.width,height:f.height}}function k_(f,i){return f===i?!0:f===null||i===null?!1:f.x===i.x&&f.y===i.y&&f.width===i.width&&f.height===i.height}function Lm(f,i){return f.x1<=i.x2&&f.y1<=i.y2&&f.x2>=i.x1&&f.y2>=i.y1}function A_(f,i){return f.x1<i.x1&&f.x2>i.x2&&f.y1<i.y1&&f.y2>i.y2}function I_(f){return f.x1<f.x2&&f.y1<f.y2}function Zm(f,i){return Ga(f.x1-i[3],f.y1-i[0],f.x2+i[1],f.y2+i[2])}function M_(f){if(self.location.protocol==="file:"&&!b_.test(f)){const o=self.location.pathname.split("/");o.pop();const l=o.join("/"),h=self.location.protocol+"//"+l;return f.charAt(0)==="."&&(f=f.slice(1)),f.charAt(0)==="/"&&(f=f.slice(1)),h+"/"+f}return new URL(f,self.location.href).href}function Dm(f){return f.startsWith("data:")===!0}function __(f){var s,m;f=f.replace(/^data:/,"");const i=((s=f.match(/image\/[^;]+/))==null?void 0:s[0])||"",o=f.replace(/^[^,]+,/,""),l=1024,h=atob(o),g=h.length,v=Math.ceil(g/l),w=new Array(v);for(let C=0;C<v;++C){const y=C*l,x=Math.min(y+l,g),M=new Array(x-y);for(let b=y,_=0;b<x;++_,++b)M[_]=(m=h[b])==null?void 0:m.charCodeAt(0);w[C]=new Uint8Array(M)}return new Blob(w,{type:i})}class uo{constructor(){O(this,"ta");O(this,"tb");O(this,"tx");O(this,"tc");O(this,"td");O(this,"ty");O(this,"_floatArr",null);O(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return R_}static multiply(i,o,l){const h=i.ta*o.ta+i.tb*o.tc,g=i.ta*o.tb+i.tb*o.td,v=i.ta*o.tx+i.tb*o.ty+i.tx,w=i.tc*o.ta+i.td*o.tc,s=i.tc*o.tb+i.td*o.td,m=i.tc*o.tx+i.td*o.ty+i.ty;return l||(l=new uo),l.ta=h,l.tb=g,l.tx=v,l.tc=w,l.td=s,l.ty=m,l.mutation=!0,l}static identity(i){return i||(i=new uo),i.ta=1,i.tb=0,i.tx=0,i.tc=0,i.td=1,i.ty=0,i.mutation=!0,i}static translate(i,o,l){return l||(l=new uo),l.ta=1,l.tb=0,l.tx=i,l.tc=0,l.td=1,l.ty=o,l.mutation=!0,l}static scale(i,o,l){return l||(l=new uo),l.ta=i,l.tb=0,l.tx=0,l.tc=0,l.td=o,l.ty=0,l.mutation=!0,l}static rotate(i,o){const l=Math.cos(i),h=Math.sin(i);return o||(o=new uo),o.ta=l,o.tb=-h,o.tx=0,o.tc=h,o.td=l,o.ty=0,o.mutation=!0,o}static copy(i,o){return o||(o=new uo),o.ta=i.ta,o.tc=i.tc,o.tb=i.tb,o.td=i.td,o.tx=i.tx,o.ty=i.ty,o.mutation=!0,o}translate(i,o){return this.tx=this.ta*i+this.tb*o+this.tx,this.ty=this.tc*i+this.td*o+this.ty,this.mutation=!0,this}scale(i,o){return this.ta=this.ta*i,this.tb=this.tb*o,this.tc=this.tc*i,this.td=this.td*o,this.mutation=!0,this}rotate(i){if(i===0||!(i%Math.PI*2))return this;const o=Math.cos(i),l=Math.sin(i),h=this.ta*o+this.tb*l,g=this.tb*o-this.ta*l,v=this.tc*o+this.td*l,w=this.td*o-this.tc*l;return this.ta=h,this.tb=g,this.tc=v,this.td=w,this.mutation=!0,this}multiply(i){return uo.multiply(this,i,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const R_=new uo,Th=0,bh=2,Eh=4,kh=6,Ah=1,Ih=3,Mh=5,_h=7;class Wa{constructor(i){O(this,"data");this.data=new Float32Array(8),i&&(this.data[Th]=i[Th],this.data[bh]=i[bh],this.data[Eh]=i[Eh],this.data[kh]=i[kh],this.data[Ah]=i[Ah],this.data[Ih]=i[Ih],this.data[Mh]=i[Mh],this.data[_h]=i[_h])}static translate(i,o,l,h,g,v,w,s,m){return m||(m=new Wa),m.data[Th]=i,m.data[bh]=l,m.data[Eh]=g,m.data[kh]=w,m.data[Ah]=o,m.data[Ih]=h,m.data[Mh]=v,m.data[_h]=s,m}get x1(){return this.data[Th]}get x2(){return this.data[bh]}get x3(){return this.data[Eh]}get x4(){return this.data[kh]}get y1(){return this.data[Ah]}get y2(){return this.data[Ih]}get y3(){return this.data[Mh]}get y4(){return this.data[_h]}}const QC=(f,i,o,l)=>{const h=3*f,g=3*(o-f)-h,v=1-h-g,w=3*i,s=3*(l-i)-w,m=1-w-s;return function(C){if(C>=1)return 1;if(C<=0)return 0;let y=.5,x,M,b;for(let j=0;j<20;j++){if(x=y*(y*(y*v+g)+h),b=C-x,b>-1e-8&&b<1e-8)return y*(y*(y*m+s)+w);if(M=y*(y*(3*v)+2*g)+h,M>1e-10&&M<1e-10)break;y+=b/M}let _=0,P=1;for(let j=0;j<20;j++){if(y=.5*(_+P),x=y*(y*(y*v+g)+h),b=C-x,b>-1e-8&&b<1e-8)return y*(y*(y*m+s)+w);b<0?P=y:_=y}}},Fh={},L_={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},$h=f=>f,D_=f=>{const i=/-?\d*\.?\d+/g,o=f.match(i);if(o){const[l,h,g,v]=o,w=parseFloat(l||"0.42"),s=parseFloat(h||"0"),m=parseFloat(g||"1"),C=parseFloat(v||"1"),y=QC(w,s,m,C);return Fh[f]=y,y}return console.warn("Unknown cubic-bezier timing: "+f),$h},P_=f=>{if(f==="linear")return $h;if(Fh[f]!==void 0)return Fh[f]||$h;if(f==="step-start")return()=>1;if(f==="step-end")return o=>o===1?1:0;const i=L_[f];if(i!==void 0){const[o,l,h,g]=i,v=QC(o,l,h,g);return Fh[f]=v,v}return f.startsWith("cubic-bezier")?D_(f):(console.warn("Unknown timing function: "+f),$h)};function oC(f){return(f/1024/1024).toFixed(2)}class O_ extends Cr{constructor(o,l,h){super();O(this,"node");O(this,"props");O(this,"settings");O(this,"progress",0);O(this,"delayFor",0);O(this,"delay",0);O(this,"timingFunction");O(this,"propValuesMap",{});O(this,"dynPropValuesMap");this.node=o,this.props=l;for(const w in l)if(w!=="shaderProps")this.propValuesMap.props===void 0&&(this.propValuesMap.props={}),this.propValuesMap.props[w]={start:o[w]||0,target:l[w]};else if(o.shader.type!=="DynamicShader"){this.propValuesMap.shaderProps={};for(const s in l.shaderProps)this.propValuesMap.shaderProps[s]={start:o.shader.props[s],target:l.shaderProps[s]}}else{const s=Object.keys(l.shaderProps),m=s.length;this.dynPropValuesMap={};for(let C=0;C<m;C++){const y=s[C],x=l.shaderProps[y];this.dynPropValuesMap[y]={};const M=Object.entries(x),b=M.length;for(let _=0;_<b;_++){const[P,j]=M[_];this.dynPropValuesMap[y][P]={start:o.shader.props[y][P],target:j}}}}const g=h.easing||"linear",v=h.delay??0;this.settings={duration:h.duration??0,delay:v,easing:g,loop:h.loop??!1,repeat:h.repeat??0,repeatDelay:h.repeatDelay??0,stopMethod:h.stopMethod??!1},this.timingFunction=P_(g),this.delayFor=v,this.delay=v}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(o,l){const h=Object.entries(l),g=h.length;for(let v=0;v<g;v++){const[w,s]=h[v];o[w]=s.start}}restore(){if(this.reset(),this.propValuesMap.props!==void 0&&this.restoreValues(this.node,this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const o=Object.keys(this.dynPropValuesMap),l=o.length;if(l>0)for(let h=0;h<l;h++){const g=o[h];this.restoreValues(this.node.shader.props[g],this.dynPropValuesMap[g])}}}reverseValues(o){const l=Object.entries(o),h=l.length;for(let g=0;g<h;g++){const[v,w]=l[g];o[v]={start:w.target,target:w.start}}}reverse(){if(this.progress=0,this.propValuesMap.props!==void 0&&this.reverseValues(this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.reverseValues(this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const o=Object.keys(this.dynPropValuesMap),l=o.length;if(l>0)for(let h=0;h<l;h++){const g=o[h];this.reverseValues(this.dynPropValuesMap[g])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(o,l,h){return(this.timingFunction(o)||o)*(h-l)+l}updateValue(o,l,h,g){if(this.progress===1)return l;if(this.progress===0)return h;const v=l;if(o.indexOf("color")!==-1){if(h===v)return h;if(g){const w=this.timingFunction(this.progress)||this.progress;return eC(h,v,w)}return eC(h,v,this.progress)}return g?this.applyEasing(this.progress,h,v):h+(v-h)*this.progress}updateValues(o,l,h){const g=Object.entries(l),v=g.length;for(let w=0;w<v;w++){const[s,m]=g[w];o[s]=this.updateValue(s,m.target,m.start,h)}}update(o){const{duration:l,loop:h,easing:g,stopMethod:v}=this.settings,{delayFor:w}=this;if(l===0&&w===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=o,this.delayFor>=0)return;o=-this.delayFor,this.delayFor=0}if(l===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=o/l,this.progress>1&&(this.progress=h?0:1,this.delayFor=this.delay,v)){this.emit("finished",{});return}if(this.propValuesMap.props!==void 0&&this.updateValues(this.node,this.propValuesMap.props,g),this.propValuesMap.shaderProps!==void 0&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,g),this.dynPropValuesMap!==void 0){const s=Object.keys(this.dynPropValuesMap),m=s.length;if(m>0)for(let C=0;C<m;C++){const y=s[C];this.updateValues(this.node.shader.props[y],this.dynPropValuesMap[y],g)}}this.progress<1&&this.emit("tick",{progress:this.progress}),this.progress===1&&this.emit("finished",{})}}class N_ extends Cr{constructor(o,l){super();O(this,"manager");O(this,"animation");O(this,"stoppedPromise");O(this,"stoppedResolve",null);O(this,"state");this.manager=o,this.animation=l,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this),this.onTick=this.onTick.bind(this)}start(){return this.state!=="running"&&this.state!=="scheduled"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="scheduled"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.animation.on("tick",this.onTick),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating),this.animation.off("tick",this.onTick)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(o=>{this.stoppedResolve=o}))}onFinished(){lt(this.stoppedResolve);const{loop:o,stopMethod:l}=this.animation.settings;if(l==="reverse"){this.animation.once("finished",this.onFinished),this.animation.reverse();return}o||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.state="running",this.emit("animating",this)}onTick(o,l){this.emit("tick",l)}}var ho;(function(f){f[f.Init=0]="Init",f[f.OutOfBounds=2]="OutOfBounds",f[f.InBounds=4]="InBounds",f[f.InViewport=8]="InViewport"})(ho||(ho={}));const Ku=new Map;Ku.set(ho.Init,"init");Ku.set(ho.OutOfBounds,"outOfBounds");Ku.set(ho.InBounds,"inBounds");Ku.set(ho.InViewport,"inViewport");var Ne;(function(f){f[f.Children=1]="Children",f[f.ScaleRotate=2]="ScaleRotate",f[f.Local=4]="Local",f[f.Global=8]="Global",f[f.Clipping=16]="Clipping",f[f.CalculatedZIndex=32]="CalculatedZIndex",f[f.ZIndexSortedChildren=64]="ZIndexSortedChildren",f[f.PremultipliedColors=128]="PremultipliedColors",f[f.WorldAlpha=256]="WorldAlpha",f[f.RenderState=512]="RenderState",f[f.IsRenderable=1024]="IsRenderable",f[f.RenderTexture=2048]="RenderTexture",f[f.ParentRenderTexture=4096]="ParentRenderTexture",f[f.RenderBounds=8192]="RenderBounds",f[f.None=0]="None",f[f.All=14335]="All"})(Ne||(Ne={}));class Jm extends Cr{constructor(o,l){super();O(this,"stage");O(this,"children",[]);O(this,"_id",T_());O(this,"props");O(this,"updateType",Ne.All);O(this,"childUpdateType",Ne.None);O(this,"globalTransform");O(this,"scaleRotateTransform");O(this,"localTransform");O(this,"sceneGlobalTransform");O(this,"renderCoords");O(this,"sceneRenderCoords");O(this,"renderBound");O(this,"strictBound");O(this,"preloadBound");O(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});O(this,"isRenderable",!1);O(this,"renderState",ho.Init);O(this,"worldAlpha",1);O(this,"premultipliedColorTl",0);O(this,"premultipliedColorTr",0);O(this,"premultipliedColorBl",0);O(this,"premultipliedColorBr",0);O(this,"calcZIndex",0);O(this,"hasRTTupdates",!1);O(this,"parentHasRenderTexture",!1);O(this,"rttParent",null);O(this,"onTextureLoaded",(o,l)=>{var h,g;this.autosizeNode(l),this.setUpdateType(Ne.IsRenderable),this.stage.requestRender(),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),l.width>1&&l.height>1&&this.emit("loaded",{type:"texture",dimensions:l}),((g=(h=this.props.textureOptions)==null?void 0:h.resizeMode)==null?void 0:g.type)==="contain"&&this.setUpdateType(Ne.Local)});O(this,"onTextureFailed",(o,l)=>{this.setUpdateType(Ne.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("failed",{type:"texture",error:l})});O(this,"onTextureFreed",()=>{this.setUpdateType(Ne.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("freed",{type:"texture"})});this.stage=o,this.props={...l,parent:null,texture:null,src:null,rtt:!1},this.parent=l.parent,this.texture=l.texture,this.src=l.src,this.rtt=l.rtt,l.boundsMargin&&(this.boundsMargin=Array.isArray(l.boundsMargin)?l.boundsMargin:[l.boundsMargin,l.boundsMargin,l.boundsMargin,l.boundsMargin]),this.setUpdateType(Ne.ScaleRotate|Ne.Local|Ne.RenderBounds|Ne.RenderState),tl()===!1&&l.preventCleanup===!0&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.stage.defaultTexture&&this.stage.defaultTexture.state!=="loaded"&&this.stage.defaultTexture.once("loaded",()=>{this.setUpdateType(Ne.IsRenderable)})}loadTexture(){const{texture:o}=this.props;lt(o),queueMicrotask(()=>{var l;if(this.textureOptions.preload===!0&&this.stage.txManager.loadTexture(o),o.preventCleanup=((l=this.props.textureOptions)==null?void 0:l.preventCleanup)??!1,o.on("loaded",this.onTextureLoaded),o.on("failed",this.onTextureFailed),o.on("freed",this.onTextureFreed),this.parentHasRenderTexture){this.notifyParentRTTOfUpdate();return}o.state==="loaded"?(lt(o.dimensions),this.onTextureLoaded(o,o.dimensions)):o.state==="failed"?(lt(o.error),this.onTextureFailed(o,o.error)):o.state==="freed"&&this.onTextureFreed(o)})}unloadTexture(){this.texture!==null&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(o){this.autosize&&(this.width=o.width,this.height=o.height)}setUpdateType(o){this.updateType|=o;const l=this.props.parent;l&&(l.updateType&Ne.Children||l.setUpdateType(Ne.Children))}sortChildren(){this.children.sort((o,l)=>o.calcZIndex-l.calcZIndex)}updateScaleRotateTransform(){const{rotation:o,scaleX:l,scaleY:h}=this.props;if(o===0&&l===1&&h===1){this.scaleRotateTransform=void 0;return}this.scaleRotateTransform=uo.rotate(o,this.scaleRotateTransform).scale(l,h)}updateLocalTransform(){var m,C;const{x:o,y:l,width:h,height:g}=this.props,v=this.props.mountX*h,w=this.props.mountY*g;if(this.scaleRotateTransform){const y=this.props.pivotX*h,x=this.props.pivotY*g;this.localTransform=uo.translate(o-v+y,l-w+x,this.localTransform).multiply(this.scaleRotateTransform).translate(-y,-x)}else this.localTransform=uo.translate(o-v,l-w,this.localTransform);const s=this.props.texture;if(s&&s.dimensions&&((C=(m=this.props.textureOptions)==null?void 0:m.resizeMode)==null?void 0:C.type)==="contain"){let y=1,x=1,M=0,b=0;const{width:_,height:P}=s.dimensions,j=_/P,H=h/g;if(j>H){const $=h/_,B=P*$;b=(g-B)/2,x=B/g}else{const $=g/P,B=_*$;M=(h-B)/2,y=B/h}this.localTransform.translate(M,b).scale(y,x)}this.setUpdateType(Ne.Global)}update(o,l){this.updateType&Ne.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(Ne.Local)),this.updateType&Ne.Local&&(this.updateLocalTransform(),this.setUpdateType(Ne.Global));const h=this.props.parent;let g=null;if(this.updateType&Ne.RenderTexture&&this.rtt&&(this.hasRTTupdates=!0),this.updateType&Ne.Global&&(lt(this.localTransform),this.parentHasRenderTexture===!0&&(h==null?void 0:h.rtt)===!0?(this.globalTransform=uo.identity(),this.sceneGlobalTransform=uo.copy((h==null?void 0:h.globalTransform)||uo.identity()).multiply(this.localTransform)):this.parentHasRenderTexture===!0&&(h==null?void 0:h.rtt)===!1?(this.sceneGlobalTransform=uo.copy((h==null?void 0:h.sceneGlobalTransform)||this.localTransform).multiply(this.localTransform),this.globalTransform=uo.copy((h==null?void 0:h.globalTransform)||this.localTransform,this.globalTransform)):this.globalTransform=uo.copy((h==null?void 0:h.globalTransform)||this.localTransform,this.globalTransform),h!==null&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(Ne.RenderState|Ne.Children),this.childUpdateType|=Ne.Global,this.clipping===!0&&(this.setUpdateType(Ne.Clipping|Ne.RenderBounds),this.childUpdateType|=Ne.RenderBounds)),this.updateType&Ne.RenderBounds&&(this.createRenderBounds(),this.setUpdateType(Ne.RenderState),this.setUpdateType(Ne.Children),this.childUpdateType|=Ne.RenderBounds),this.updateType&Ne.RenderState&&(g=this.checkRenderBounds(),this.setUpdateType(Ne.IsRenderable),g!==ho.OutOfBounds&&this.updateRenderState(g)),this.updateType&Ne.WorldAlpha&&(h?this.worldAlpha=h.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(Ne.Children|Ne.PremultipliedColors|Ne.IsRenderable),this.childUpdateType|=Ne.WorldAlpha),this.updateType&Ne.IsRenderable&&this.updateIsRenderable(),this.updateType&Ne.Clipping&&(this.calculateClippingRect(l),this.setUpdateType(Ne.Children),this.childUpdateType|=Ne.Clipping,this.childUpdateType|=Ne.RenderBounds),this.updateType&Ne.PremultipliedColors&&(this.premultipliedColorTl=Ch(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=Ch(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=Ch(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=Ch(this.props.colorBr,this.worldAlpha,!0))),h!==null&&this.updateType&Ne.CalculatedZIndex&&(this.calculateZIndex(),h.setUpdateType(Ne.ZIndexSortedChildren)),this.props.strictBounds===!0&&this.renderState===ho.OutOfBounds){this.updateType&=~Ne.RenderBounds;return}if(this.updateType&Ne.Children&&this.children.length>0)for(let v=0,w=this.children.length;v<w;v++){const s=this.children[v];if(s.setUpdateType(this.childUpdateType),s.updateType===0)continue;let m=this.clippingRect;this.rtt===!0&&(m={x:0,y:0,width:0,height:0,valid:!1}),s.update(o,m)}this.parentHasRenderTexture&&this.updateType>0&&this.notifyParentRTTOfUpdate(),this.updateType&Ne.ZIndexSortedChildren&&this.sortChildren(),g===ho.OutOfBounds&&(this.updateRenderState(g),this.updateIsRenderable(),this.rtt===!0&&g===ho.OutOfBounds&&this.notifyChildrenRTTOfUpdate(g)),this.updateType=0,this.childUpdateType=0}findParentRTTNode(){let o=this.parent;for(;o&&!o.rtt;)o=o.parent;return o}getRTTParentRenderState(){const o=this.rttParent||this.findParentRTTNode();return o?o.renderState:null}notifyChildrenRTTOfUpdate(o){for(const l of this.children)l.updateRenderState(o),l.updateIsRenderable(),l.notifyChildrenRTTOfUpdate(o)}notifyParentRTTOfUpdate(){if(this.parent===null)return;const o=this.rttParent||this.findParentRTTNode();o&&(o.hasRTTupdates=!0,o.setUpdateType(Ne.RenderTexture),o.parentHasRenderTexture===!0&&o.notifyParentRTTOfUpdate())}checkRenderBounds(){return lt(this.renderBound),lt(this.strictBound),lt(this.preloadBound),Lm(this.renderBound,this.strictBound)?ho.InViewport:Lm(this.renderBound,this.preloadBound)?ho.InBounds:A_(this.renderBound,this.strictBound)?ho.InViewport:this.parent!==null&&(this.props.width===0||this.props.height===0)?this.parent.renderState:ho.OutOfBounds}updateBoundingRect(){const o=this.sceneGlobalTransform||this.globalTransform,l=this.sceneRenderCoords||this.renderCoords;lt(o),lt(l);const{tb:h,tc:g}=o,{x1:v,y1:w,x3:s,y3:m}=l;if(h===0||g===0)this.renderBound=Ga(v,w,s,m,this.renderBound);else{const{x2:C,x4:y,y2:x,y4:M}=l;this.renderBound=Ga(Math.min(v,C,s,y),Math.min(w,x,m,M),Math.max(v,C,s,y),Math.max(w,x,m,M),this.renderBound)}}createRenderBounds(){if(lt(this.stage),this.parent!==null&&this.parent.strictBound!==void 0){const C=this.parent.strictBound;this.strictBound=Ga(C.x1,C.y1,C.x2,C.y2),this.preloadBound=Zm(this.strictBound,this.boundsMargin)}else this.strictBound=this.stage.strictBound,this.preloadBound=this.stage.preloadBound;if(this.props.clipping===!1||this.renderBound===void 0||Lm(this.renderBound,this.strictBound)===!1)return;const{x:o,y:l,width:h,height:g}=this.props,{tx:v,ty:w}=this.sceneGlobalTransform||this.globalTransform||{},s=v??o,m=w??l;this.strictBound=Ga(s,m,s+h,m+g,this.strictBound),this.preloadBound=Zm(this.strictBound,this.boundsMargin)}updateRenderState(o){if(o===this.renderState)return;const l=this.renderState;this.renderState=o;const h=Ku.get(o);lt(h),this.emit(h,{previous:l,current:o})}updateIsRenderable(){let o=!1,l=!1;if(this.checkBasicRenderability()===!1){this.updateTextureOwnership(!1),this.setRenderable(!1);return}this.texture!==null?(l=!0,o=this.texture.state==="loaded"):(this.hasShader()||this.hasColorProperties()===!0)&&this.hasDimensions()===!0&&this.stage.defaultTexture&&this.stage.defaultTexture.state==="loaded"&&(o=!0),this.updateTextureOwnership(l),this.setRenderable(o)}checkBasicRenderability(){return!(this.worldAlpha===0||this.isOutOfBounds()===!0)}setRenderable(o){this.isRenderable=o}updateTextureOwnership(o){var l;(l=this.texture)==null||l.setRenderableOwner(this,o)}isOutOfBounds(){return this.renderState<=ho.OutOfBounds}hasDimensions(){return this.props.width!==0&&this.props.height!==0}hasColorProperties(){return this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0}hasShader(){return this.props.shader!==null}calculateRenderCoords(){const{width:o,height:l}=this,{tx:h,ty:g,ta:v,tb:w,tc:s,td:m}=this.globalTransform;if(w===0&&s===0){const P=h,j=h+o*v,H=g,$=g+l*m;this.renderCoords=Wa.translate(P,H,j,H,j,$,P,$,this.renderCoords)}else this.renderCoords=Wa.translate(h,g,h+o*v,g+o*s,h+o*v+l*w,g+o*s+l*m,h+l*w,g+l*m,this.renderCoords);if(this.sceneGlobalTransform===void 0)return;const{tx:C,ty:y,ta:x,tb:M,tc:b,td:_}=this.sceneGlobalTransform;if(M===0&&b===0){const P=C,j=C+o*x,H=y,$=y+l*_;this.sceneRenderCoords=Wa.translate(P,H,j,H,j,$,P,$,this.sceneRenderCoords)}else this.sceneRenderCoords=Wa.translate(C,y,C+o*x,y+o*b,C+o*x+l*M,y+o*b+l*_,C+l*M,y+l*_,this.sceneRenderCoords)}calculateClippingRect(o){lt(this.globalTransform);const{clippingRect:l,props:h,globalTransform:g}=this,{clipping:v}=h,w=g.tb!==0||g.tc!==0;v===!0&&w===!1?(l.x=g.tx,l.y=g.ty,l.width=this.width*g.ta,l.height=this.height*g.td,l.valid=!0):l.valid=!1,o.valid===!0&&l.valid===!0?qC(o,l,l):o.valid===!0&&(YC(o,l),l.valid=!0)}calculateZIndex(){var v,w;const o=this.props,l=o.zIndex||0,h=((v=o.parent)==null?void 0:v.zIndex)||0;let g=l;(w=o.parent)!=null&&w.zIndexLocked&&(g=l<h?l:h),this.calcZIndex=g}destroy(){var o;for(this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,this.renderCoords=void 0,this.renderBound=void 0,this.strictBound=void 0,this.preloadBound=void 0,this.globalTransform=void 0,this.scaleRotateTransform=void 0,this.localTransform=void 0,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;this.children.length>0;)(o=this.children[0])==null||o.destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}renderQuads(o){this.parentHasRenderTexture&&(!o.renderToTextureActive||this.parentRenderTexture!==o.activeRttNode)||(lt(this.globalTransform),lt(this.renderCoords),o.addQuad({width:this.props.width,height:this.props.height,colorTl:this.premultipliedColorTl,colorTr:this.premultipliedColorTr,colorBl:this.premultipliedColorBl,colorBr:this.premultipliedColorBr,texture:this.texture||this.stage.defaultTexture,textureOptions:this.textureOptions,zIndex:this.zIndex,shader:this.shader.shader,shaderProps:this.shader.getResolvedProps(),alpha:this.worldAlpha,clippingRect:this.clippingRect,tx:this.globalTransform.tx,ty:this.globalTransform.ty,ta:this.globalTransform.ta,tb:this.globalTransform.tb,tc:this.globalTransform.tc,td:this.globalTransform.td,renderCoords:this.renderCoords,rtt:this.rtt,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions}))}get id(){return this._id}get data(){return this.props.data}set data(o){this.props.data=o}get x(){return this.props.x}set x(o){this.props.x!==o&&(this.props.x=o,this.setUpdateType(Ne.Local))}get absX(){var o,l,h;return this.props.x+-this.props.width*this.props.mountX+(((o=this.props.parent)==null?void 0:o.absX)||((h=(l=this.props.parent)==null?void 0:l.globalTransform)==null?void 0:h.tx)||0)}get absY(){var o;return this.props.y+-this.props.height*this.props.mountY+(((o=this.props.parent)==null?void 0:o.absY)??0)}get y(){return this.props.y}set y(o){this.props.y!==o&&(this.props.y=o,this.setUpdateType(Ne.Local))}get width(){return this.props.width}set width(o){this.props.width!==o&&(this.props.width=o,this.setUpdateType(Ne.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Ne.RenderTexture)))}get height(){return this.props.height}set height(o){this.props.height!==o&&(this.props.height=o,this.setUpdateType(Ne.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Ne.RenderTexture)))}get scale(){return this.scaleX}set scale(o){this.scaleX=o,this.scaleY=o}get scaleX(){return this.props.scaleX}set scaleX(o){this.props.scaleX!==o&&(this.props.scaleX=o,this.setUpdateType(Ne.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(o){this.props.scaleY!==o&&(this.props.scaleY=o,this.setUpdateType(Ne.ScaleRotate))}get mount(){return this.props.mount}set mount(o){(this.props.mountX!==o||this.props.mountY!==o)&&(this.props.mountX=o,this.props.mountY=o,this.props.mount=o,this.setUpdateType(Ne.Local))}get mountX(){return this.props.mountX}set mountX(o){this.props.mountX!==o&&(this.props.mountX=o,this.setUpdateType(Ne.Local))}get mountY(){return this.props.mountY}set mountY(o){this.props.mountY!==o&&(this.props.mountY=o,this.setUpdateType(Ne.Local))}get pivot(){return this.props.pivot}set pivot(o){(this.props.pivotX!==o||this.props.pivotY!==o)&&(this.props.pivotX=o,this.props.pivotY=o,this.props.pivot=o,this.setUpdateType(Ne.Local))}get pivotX(){return this.props.pivotX}set pivotX(o){this.props.pivotX!==o&&(this.props.pivotX=o,this.setUpdateType(Ne.Local))}get pivotY(){return this.props.pivotY}set pivotY(o){this.props.pivotY!==o&&(this.props.pivotY=o,this.setUpdateType(Ne.Local))}get rotation(){return this.props.rotation}set rotation(o){this.props.rotation!==o&&(this.props.rotation=o,this.setUpdateType(Ne.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(o){this.props.alpha=o,this.setUpdateType(Ne.PremultipliedColors|Ne.WorldAlpha|Ne.Children|Ne.IsRenderable),this.childUpdateType|=Ne.WorldAlpha}get autosize(){return this.props.autosize}set autosize(o){this.props.autosize=o}get boundsMargin(){var o;return this.props.boundsMargin??((o=this.parent)==null?void 0:o.boundsMargin)??this.stage.boundsMargin}set boundsMargin(o){if(o!==this.props.boundsMargin){if(o===null)this.props.boundsMargin=o;else{const l=Array.isArray(o)?o:[o,o,o,o];this.props.boundsMargin=l}this.setUpdateType(Ne.RenderBounds)}}get clipping(){return this.props.clipping}set clipping(o){this.props.clipping=o,this.setUpdateType(Ne.Clipping|Ne.RenderBounds|Ne.Children),this.childUpdateType|=Ne.Global|Ne.Clipping}get color(){return this.props.color}set color(o){this.colorTop=o,this.colorBottom=o,this.colorLeft=o,this.colorRight=o,this.props.color=o,this.setUpdateType(Ne.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(o){(this.props.colorTl!==o||this.props.colorTr!==o)&&(this.colorTl=o,this.colorTr=o),this.props.colorTop=o,this.setUpdateType(Ne.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(o){(this.props.colorBl!==o||this.props.colorBr!==o)&&(this.colorBl=o,this.colorBr=o),this.props.colorBottom=o,this.setUpdateType(Ne.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(o){(this.props.colorTl!==o||this.props.colorBl!==o)&&(this.colorTl=o,this.colorBl=o),this.props.colorLeft=o,this.setUpdateType(Ne.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(o){(this.props.colorTr!==o||this.props.colorBr!==o)&&(this.colorTr=o,this.colorBr=o),this.props.colorRight=o,this.setUpdateType(Ne.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(o){this.props.colorTl=o,this.setUpdateType(Ne.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(o){this.props.colorTr=o,this.setUpdateType(Ne.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(o){this.props.colorBl=o,this.setUpdateType(Ne.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(o){this.props.colorBr=o,this.setUpdateType(Ne.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(o){this.props.zIndexLocked=o,this.setUpdateType(Ne.CalculatedZIndex|Ne.Children);for(let l=0,h=this.children.length;l<h;l++)this.children[l].setUpdateType(Ne.CalculatedZIndex)}get zIndex(){return this.props.zIndex}set zIndex(o){this.props.zIndex=o,this.setUpdateType(Ne.CalculatedZIndex|Ne.Children);for(let l=0,h=this.children.length;l<h;l++)this.children[l].setUpdateType(Ne.CalculatedZIndex)}get parent(){return this.props.parent}set parent(o){const l=this.props.parent;if(l!==o){if(this.props.parent=o,l){const h=l.children.indexOf(this);lt(h!==-1,"CoreNode.parent: Node not found in old parent's children!"),l.children.splice(h,1),l.setUpdateType(Ne.Children|Ne.ZIndexSortedChildren)}o&&(o.children.push(this),this.setUpdateType(Ne.All),o.setUpdateType(Ne.Children|Ne.ZIndexSortedChildren),(o.rtt||o.parentHasRenderTexture)&&this.applyRTTInheritance(o)),this.updateScaleRotateTransform(),this.setUpdateType(Ne.RenderBounds|Ne.Children)}}get preventCleanup(){return this.props.textureOptions.preventCleanup||!1}set preventCleanup(o){tl()===!1&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.props.textureOptions.preventCleanup=o}get rtt(){return this.props.rtt}set rtt(o){this.props.rtt!==o&&(this.props.rtt=o,o===!0?(this.initRenderTexture(),this.markChildrenWithRTT()):this.cleanupRenderTexture(),this.setUpdateType(Ne.RenderTexture),this.parentHasRenderTexture===!0&&this.notifyParentRTTOfUpdate())}initRenderTexture(){this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.stage.renderer.renderToTexture(this)}cleanupRenderTexture(){this.unloadTexture(),this.clearRTTInheritance(),this.hasRTTupdates=!1,this.texture=null}markChildrenWithRTT(o=null){const l=o||this;for(const h of l.children)h.setUpdateType(Ne.All),h.parentHasRenderTexture=!0,h.markChildrenWithRTT()}applyRTTInheritance(o){o.rtt&&o.setUpdateType(Ne.RenderTexture),this.markChildrenWithRTT(o)}clearRTTInheritance(){if(!this.rtt)for(const o of this.children)o.parentHasRenderTexture=!1,o.rttParent=null,o.setUpdateType(Ne.All),o.clearRTTInheritance()}get shader(){return this.props.shader}set shader(o){this.props.shader!==o&&(this.props.shader=o,this.setUpdateType(Ne.IsRenderable))}get src(){return this.props.src}set src(o){if(this.props.src!==o){if(this.props.src=o,!o){this.texture=null;return}this.texture=this.stage.txManager.createTexture("ImageTexture",{src:o,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight})}}set imageType(o){this.props.imageType!==o&&(this.props.imageType=o)}get imageType(){return this.props.imageType||null}get srcHeight(){return this.props.srcHeight}set srcHeight(o){this.props.srcHeight=o}get srcWidth(){return this.props.srcWidth}set srcWidth(o){this.props.srcWidth=o}get srcX(){return this.props.srcX}set srcX(o){this.props.srcX=o}get srcY(){return this.props.srcY}set srcY(o){this.props.srcY=o}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let o=this.parent;for(;o;){if(o.rtt)return o;o=o.parent}return null}get texture(){return this.props.texture}set texture(o){if(this.props.texture===o)return;const l=this.props.texture;l&&(l.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=o,o!==null&&(o.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(Ne.IsRenderable)}set textureOptions(o){this.props.textureOptions=o}get textureOptions(){return this.props.textureOptions}get strictBounds(){return this.props.strictBounds}set strictBounds(o){o!==this.props.strictBounds&&(this.props.strictBounds=o,this.setUpdateType(Ne.RenderBounds|Ne.Children),this.childUpdateType|=Ne.RenderBounds|Ne.Children)}animate(o,l){const h=new O_(this,o,l);return new N_(this.stage.animationManager,h)}flush(){}}const U_=f=>{let i=!1;const o=()=>{if(f.updateFrameTime(),f.updateAnimations(),!f.hasSceneUpdates()){f.calculateFps(),setTimeout(o,16.666666666666668),i||(f.eventBus.emit("idle"),i=!0),f.txMemManager.checkCleanup()===!0&&f.txMemManager.cleanup(!1),f.flushFrameEvents();return}i=!1,f.drawFrame(),f.flushFrameEvents(),requestAnimationFrame(o)};requestAnimationFrame(o)},ws=()=>performance?performance.now():Date.now();class B_{constructor(){O(this,"activeAnimations",new Set)}registerAnimation(i){this.activeAnimations.add(i)}unregisterAnimation(i){this.activeAnimations.delete(i)}update(i){this.activeAnimations.forEach(o=>{o.update(i)})}}function j_(){function f(o){return o.indexOf("image/png")!==-1}function i(o,l,h,g,v,w,s){return new Promise(function(m,C){var y=s.supportsOptionsCreateImageBitmap,x=s.supportsFullCreateImageBitmap,M=new XMLHttpRequest;M.open("GET",o,!0),M.responseType="blob",M.onload=function(){if(M.status!==200&&M.status!==0)return C(new Error("Failed to load image: "+M.statusText));var b=M.response,_=l!==void 0?l:f(b.type);if(x===!0&&v!==null&&w!==null){createImageBitmap(b,h||0,g||0,v,w,{premultiplyAlpha:_?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(P){m({data:P,premultiplyAlpha:l})}).catch(function(P){C(P)});return}else y===!1&&y===!1?createImageBitmap(b).then(function(P){m({data:P,premultiplyAlpha:l})}).catch(function(P){C(P)}):createImageBitmap(b,{premultiplyAlpha:_?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(P){m({data:P,premultiplyAlpha:l})}).catch(function(P){C(P)})},M.onerror=function(){C(new Error("Network error occurred while trying to fetch the image."))},M.send()})}self.onmessage=o=>{var l=o.data.src,h=o.data.id,g=o.data.premultiplyAlpha,v=o.data.sx,w=o.data.sy,s=o.data.sw,m=o.data.sh,C=!1,y=!1;i(l,g,v,w,s,m,{supportsOptionsCreateImageBitmap:C,supportsFullCreateImageBitmap:y}).then(function(x){self.postMessage({id:h,src:l,data:x},[x.data])}).catch(function(x){self.postMessage({id:h,src:l,error:x.message})})}}class F_{constructor(i,o){O(this,"imageWorkersEnabled",!0);O(this,"messageManager",{});O(this,"workers",[]);O(this,"workerIndex",0);O(this,"nextId",0);this.workers=this.createWorkers(i,o),this.workers.forEach(l=>{l.onmessage=this.handleMessage.bind(this)})}handleMessage(i){const{id:o,data:l,error:h}=i.data,g=this.messageManager[o];if(g){const[v,w]=g;delete this.messageManager[o],h?w(new Error(h)):v(l)}}createWorkers(i=1,o){let l=`(${j_.toString()})()`;o.options===!0&&(l=l.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")),o.full===!0&&(l=l.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;"),l=l.replace("var supportsFullCreateImageBitmap = false;","var supportsFullCreateImageBitmap = true;")),l=l.replace('"use strict";',"");const h=new Blob([l],{type:"application/javascript"}),g=(self.URL?URL:webkitURL).createObjectURL(h),v=[];for(let w=0;w<i;w++)v.push(new Worker(g));return v}getNextWorker(){const i=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,i}getImage(i,o,l,h,g,v){return new Promise((w,s)=>{try{if(this.workers){const m=this.nextId++;this.messageManager[m]=[w,s];const C=this.getNextWorker();C&&C.postMessage({id:m,src:i,premultiplyAlpha:o,sx:l,sy:h,sw:g,sh:v})}}catch(m){s(m)}})}}const Uu=class Uu extends Wu{constructor(o,l){super(o);O(this,"type",_n.color);O(this,"props");this.props=Uu.resolveDefaults(l||{})}get color(){return this.props.color}set color(o){this.props.color=o}async getTextureSource(){const o=new Uint8Array(4);return this.color===4294967295?(o[0]=255,o[1]=255,o[2]=255,o[3]=255):(o[0]=this.color>>16&255,o[1]=this.color>>8&255,o[2]=this.color&255,o[3]=this.color>>>24&255),this.setState("fetched",{width:1,height:1}),{data:o,premultiplyAlpha:!0}}static makeCacheKey(o){return`ColorTexture,${Uu.resolveDefaults(o).color}`}static resolveDefaults(o){return{color:o.color||4294967295}}};O(Uu,"z$__type__Props");let Zh=Uu;function $_(f){return/\.(ktx|pvr)$/.test(f)}const iC=async f=>{const o=await(await fetch(f)).arrayBuffer();return f.indexOf(".ktx")!==-1?z_(o):V_(o)},z_=async f=>{const i=new DataView(f),o=i.getUint32(12)===16909060,l=[],h={glInternalFormat:i.getUint32(28,o),pixelWidth:i.getUint32(36,o),pixelHeight:i.getUint32(40,o),numberOfMipmapLevels:i.getUint32(56,o),bytesOfKeyValueData:i.getUint32(60,o)};let g=64;g+=h.bytesOfKeyValueData;for(let v=0;v<h.numberOfMipmapLevels;v++){const w=i.getUint32(g);g+=4,l.push(i.buffer.slice(g,w)),g+=w}return{data:{glInternalFormat:h.glInternalFormat,mipmaps:l,width:h.pixelWidth||0,height:h.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},V_=async f=>{const w=f,s=new Int32Array(w,0,13),m=s[12]+52,C=new Uint8Array(w,m),y=[],x={pixelWidth:s[7],pixelHeight:s[6],numberOfMipmapLevels:s[11]||0};let M=0,b=x.pixelWidth||0,_=x.pixelHeight||0;for(let P=0;P<x.numberOfMipmapLevels;P++){const j=(b+3>>2)*(_+3>>2)*8,H=new Uint8Array(w,C.byteOffset+M,j);y.push(H),M+=j,b=b>>1,_=_>>1}return{data:{glInternalFormat:36196,mipmaps:y,width:x.pixelWidth||0,height:x.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}};function H_(f){return/\.(svg)(\?.*)?$/.test(f)}const rC=(f,i,o,l,h,g,v)=>new Promise((w,s)=>{const m=document.createElement("canvas"),C=m.getContext("2d");lt(C),C.imageSmoothingEnabled=!0;const y=new Image;y.onload=()=>{const x=l??0,M=h??0,b=i||y.width,_=o||y.height;m.width=b,m.height=_,C.drawImage(y,0,0,b,_),w({data:C.getImageData(x,M,g??b,v??_),premultiplyAlpha:!1})},y.onerror=x=>{s(x)},y.src=f});function ZC(f,i=""){return new Promise((o,l)=>{const h=new XMLHttpRequest;h.responseType=i,h.onreadystatechange=function(){h.readyState==XMLHttpRequest.DONE&&(h.status===0||h.status===200?o(h.response):l(h.statusText))},h.open("GET",f,!0),h.send(null)})}const Bu=class Bu extends Wu{constructor(o,l){super(o);O(this,"props");O(this,"type",_n.image);this.props=Bu.resolveDefaults(l)}hasAlphaChannel(o){return o.indexOf("image/png")!==-1}async loadImageFallback(o,l){const h=new Image;return typeof o=="string"&&Dm(o)===!1&&(h.crossOrigin="anonymous"),new Promise(g=>{h.onload=()=>{g({data:h,premultiplyAlpha:l})},h.onerror=()=>{console.warn("Image loading failed, returning fallback object."),g({data:h,premultiplyAlpha:l})},o instanceof Blob?h.src=URL.createObjectURL(o):h.src=o})}async createImageBitmap(o,l,h,g,v,w){const s=l??o.type.includes("image/png"),m=this.txManager.imageBitmapSupported;return m.full===!0&&v!==null&&w!==null?{data:await createImageBitmap(o,h||0,g||0,v,w,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:s}:m.basic===!0?{data:await createImageBitmap(o),premultiplyAlpha:s}:{data:await createImageBitmap(o,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:s}}async loadImage(o){const{premultiplyAlpha:l,sx:h,sy:g,sw:v,sh:w}=this.props;if(this.txManager.hasCreateImageBitmap===!0){if(Dm(o)===!1&&this.txManager.hasWorker===!0&&this.txManager.imageWorkerManager!==null)return this.txManager.imageWorkerManager.getImage(o,l,h,g,v,w);let s;return Dm(o)===!0?s=__(o):s=await ZC(o,"blob").then(m=>m),this.createImageBitmap(s,l,h,g,v,w)}return this.loadImageFallback(o,l??!0)}async getTextureSource(){var g,v;let o;try{o=await this.determineImageTypeAndLoadImage()}catch(w){return this.setState("failed",w),{data:null}}if(o.data===null)return this.setState("failed",Error("ImageTexture: No image data")),{data:null};let l,h;return o.data instanceof Uint8Array?(l=this.props.width??0,h=this.props.height??0):(l=((g=o.data)==null?void 0:g.width)??(this.props.width||0),h=((v=o.data)==null?void 0:v.height)??(this.props.height||0)),this.setState("fetched",{width:l,height:h}),{data:o.data,premultiplyAlpha:this.props.premultiplyAlpha??!0}}determineImageTypeAndLoadImage(){const{src:o,premultiplyAlpha:l,type:h}=this.props;if(o===null)return{data:null};if(typeof o!="string"){if(o instanceof Blob)if(this.txManager.hasCreateImageBitmap===!0){const{sx:v,sy:w,sw:s,sh:m}=this.props;return this.createImageBitmap(o,l,v,w,s,m)}else return this.loadImageFallback(o,l??!0);return o instanceof ImageData?{data:o,premultiplyAlpha:l}:{data:o(),premultiplyAlpha:l}}const g=M_(o);return h==="regular"?this.loadImage(g):h==="svg"?rC(g,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):H_(o)===!0?rC(g,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):h==="compressed"||$_(o)===!0?iC(g):this.loadImage(g)}static makeCacheKey(o){const l=Bu.resolveDefaults(o),h=l.key||l.src;if(typeof h!="string")return!1;let g="";return l.sh!==null&&l.sw!==null&&(g+=",",g+=l.sx??"",g+=l.sy??"",g+=l.sw||"",g+=l.sh||""),`ImageTexture,${h},${l.premultiplyAlpha??"true"}${g}`}static resolveDefaults(o){return{src:o.src??"",premultiplyAlpha:o.premultiplyAlpha??!0,key:o.key??null,type:o.type??null,width:o.width??null,height:o.height??null,sx:o.sx??null,sy:o.sy??null,sw:o.sw??null,sh:o.sh??null}}};O(Bu,"z$__type__Props");let zu=Bu;const ju=class ju extends Wu{constructor(o,l){super(o);O(this,"props");O(this,"type",_n.noise);this.props=ju.resolveDefaults(l)}async getTextureSource(){const{width:o,height:l}=this.props,h=o*l*4,g=new Uint8ClampedArray(h);for(let v=0;v<h;v+=4){const w=Math.floor(Math.random()*256);g[v]=w,g[v+1]=w,g[v+2]=w,g[v+3]=255}return this.setState("fetched"),{data:new ImageData(g,o,l)}}static makeCacheKey(o){if(o.cacheId===void 0)return!1;const l=ju.resolveDefaults(o);return`NoiseTexture,${l.width},${l.height},${l.cacheId}`}static resolveDefaults(o){return{width:o.width??128,height:o.height??128,cacheId:o.cacheId??0}}};O(ju,"z$__type__Props");let eg=ju;const ld=class ld extends Wu{constructor(o,l){super(o);O(this,"props");O(this,"parentTexture");O(this,"type",_n.subTexture);O(this,"onParentTxLoaded",()=>{this.forwardParentTxState("loaded",{width:this.props.width,height:this.props.height})});O(this,"onParentTxFailed",(o,l)=>{this.forwardParentTxState("failed",l)});O(this,"onParentTxFetched",()=>{this.forwardParentTxState("fetched",{width:this.props.width,height:this.props.height})});O(this,"onParentTxFetching",()=>{this.forwardParentTxState("fetching")});O(this,"onParentTxLoading",()=>{this.forwardParentTxState("loading")});O(this,"onParentTxFreed",()=>{this.forwardParentTxState("freed")});this.props=ld.resolveDefaults(l||{}),lt(this.props.texture,"SubTexture requires a parent texture"),lt(this.props.texture instanceof zu,"SubTexture requires an ImageTexture parent"),this.parentTexture=o.resolveParentTexture(this.props.texture),this.renderableOwners.size>0&&this.parentTexture.setRenderableOwner(this,!0),queueMicrotask(()=>{const h=this.parentTexture;h.state==="loaded"?this.onParentTxLoaded(h,h.dimensions):h.state==="fetching"?this.onParentTxFetching():h.state==="fetched"?this.onParentTxFetched():h.state==="loading"?this.onParentTxLoading():h.state==="failed"?this.onParentTxFailed(h,h.error):h.state==="freed"&&this.onParentTxFreed(),h.on("fetched",this.onParentTxFetched),h.on("loading",this.onParentTxLoading),h.on("fetching",this.onParentTxFetching),h.on("loaded",this.onParentTxLoaded),h.on("failed",this.onParentTxFailed),h.on("freed",this.onParentTxFreed)})}forwardParentTxState(o,l){this.setState(o,l)}onChangeIsRenderable(o){this.parentTexture.setRenderableOwner(this,o)}async getTextureSource(){return new Promise((o,l)=>{this.setState("fetched"),o({data:this.props})})}static makeCacheKey(o){return!1}static resolveDefaults(o){return{texture:o.texture,x:o.x||0,y:o.y||0,width:o.width||0,height:o.height||0}}};O(ld,"z$__type__Props");let Vu=ld;const ud=class ud extends Wu{constructor(o,l){super(o);O(this,"props");O(this,"type",_n.renderToTexture);this.props=ud.resolveDefaults(l||{})}get width(){return this.props.width}set width(o){this.props.width=o}get height(){return this.props.height}set height(o){this.props.height=o}async getTextureSource(){return this.setState("fetched"),{data:null,premultiplyAlpha:null}}static resolveDefaults(o){return{width:o.width||256,height:o.height||256}}};O(ud,"z$__type__Props");let Jh=ud;async function G_(){var h,g,v;const f=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,1,3,0,0,0,37,219,86,202,0,0,0,3,80,76,84,69,0,0,0,167,122,61,218,0,0,0,1,116,82,78,83,0,64,230,216,102,0,0,0,10,73,68,65,84,8,215,99,96,0,0,0,2,0,1,226,33,188,51,0,0,0,0,73,69,78,68,174,66,96,130]),i={basic:!1,options:!1,full:!1},o=new Blob([f],{type:"image/png"}),l=await createImageBitmap(o);(h=l.close)==null||h.call(l),i.basic=!0;try{const w={premultiplyAlpha:"none"},s=await createImageBitmap(o,w);(g=s.close)==null||g.call(s),i.options=!0}catch{}try{const w=await createImageBitmap(o,0,0,1,1,{premultiplyAlpha:"none"});(v=w.close)==null||v.call(w),i.full=!0}catch{}return i}class W_ extends Cr{constructor(o,l){super();O(this,"keyCache",new Map);O(this,"inverseKeyCache",new WeakMap);O(this,"txConstructors",{});O(this,"downloadTextureSourceQueue",[]);O(this,"priorityQueue",[]);O(this,"uploadTextureQueue",[]);O(this,"initialized",!1);O(this,"stage");O(this,"numImageWorkers");O(this,"imageWorkerManager",null);O(this,"hasCreateImageBitmap",!!self.createImageBitmap);O(this,"imageBitmapSupported",{basic:!1,options:!1,full:!1});O(this,"hasWorker",!!self.Worker);O(this,"renderer");O(this,"frameTime",0);const{numImageWorkers:h,createImageBitmapSupport:g}=l;this.stage=o,this.numImageWorkers=h,g==="auto"?G_().then(v=>{this.initialize(v)}).catch(v=>{console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.initialized=!0,this.emit("initialized")}):this.initialize({basic:g==="basic",options:g==="options",full:g==="full"}),this.registerTextureType("ImageTexture",zu),this.registerTextureType("ColorTexture",Zh),this.registerTextureType("NoiseTexture",eg),this.registerTextureType("SubTexture",Vu),this.registerTextureType("RenderTexture",Jh)}registerTextureType(o,l){this.txConstructors[o]=l}initialize(o){this.hasCreateImageBitmap=o.basic||o.options||o.full,this.imageBitmapSupported=o,this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.hasCreateImageBitmap&&this.hasWorker&&this.numImageWorkers>0?this.imageWorkerManager=new F_(this.numImageWorkers,o):console.warn("[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower."),this.initialized=!0,this.emit("initialized")}enqueueDownloadTextureSource(o){this.downloadTextureSourceQueue.includes(o)||this.downloadTextureSourceQueue.push(o)}enqueueUploadTexture(o){this.uploadTextureQueue.includes(o)===!1&&this.uploadTextureQueue.push(o)}createTexture(o,l){let h;const g=this.txConstructors[o];if(!g)throw new Error(`Texture type "${o}" is not registered`);const v=g.makeCacheKey(l);return v&&this.keyCache.has(v)?h=this.keyCache.get(v):(h=new g(this,l),v&&this.initTextureToCache(h,v)),h}orphanTexture(o){this.removeTextureFromQueue(o),o.type!==_n.subTexture&&this.stage.txMemManager.addToOrphanedTextures(o)}loadTexture(o,l){if(this.stage.txMemManager.removeFromOrphanedTextures(o),o.type!==_n.subTexture){if(o.ctxTexture!==void 0&&o.ctxTexture.state==="loaded"){o.setState("loaded");return}if(!(this.downloadTextureSourceQueue.includes(o)===!0||this.uploadTextureQueue.includes(o)===!0)){if(o.ctxTexture!==void 0&&o.ctxTexture.state==="loading"&&(o.textureData!==null&&this.enqueueUploadTexture(o),o.free()),this.initialized===!1){this.priorityQueue.push(o);return}if((o.type===_n.color||o.type===_n.renderToTexture)&&o.state!=="initial"){o.setState("fetched"),this.enqueueUploadTexture(o);return}o.setState("loading"),l===!0&&o.getTextureData().then(()=>{this.uploadTexture(o)}).catch(h=>{console.error(h)}),this.enqueueDownloadTextureSource(o)}}}uploadTexture(o){if(this.stage.txMemManager.doNotExceedCriticalThreshold===!0&&this.stage.txMemManager.criticalCleanupRequested===!0){this.enqueueUploadTexture(o);return}const l=o.loadCtxTexture();if(l!==null&&l.state==="loaded"){o.setState("loaded");return}l.load()}isProcessingTexture(o){return this.downloadTextureSourceQueue.includes(o)===!0||this.uploadTextureQueue.includes(o)===!0}processSome(o){if(this.initialized===!1)return;const l=ws();for(;this.priorityQueue.length>0&&ws()-l<o;){const h=this.priorityQueue.pop();h.getTextureData().then(()=>{this.uploadTexture(h)})}for(;this.uploadTextureQueue.length>0&&ws()-l<o;)this.uploadTexture(this.uploadTextureQueue.pop());for(;this.downloadTextureSourceQueue.length>0&&ws()-l<o;){const h=this.downloadTextureSourceQueue.shift();h.getTextureData().then(()=>{h.state==="fetched"&&this.enqueueUploadTexture(h)})}}hasUpdates(){return this.downloadTextureSourceQueue.length>0||this.uploadTextureQueue.length>0}initTextureToCache(o,l){const{keyCache:h,inverseKeyCache:g}=this;h.set(l,o),g.set(o,l)}getTextureFromCache(o){return this.keyCache.get(o)}removeTextureFromCache(o){const{inverseKeyCache:l,keyCache:h}=this,g=l.get(o);g&&h.delete(g)}removeTextureFromQueue(o){const l=this.downloadTextureSourceQueue.indexOf(o);l!==-1&&this.downloadTextureSourceQueue.splice(l,1);const h=this.uploadTextureQueue.indexOf(o);h!==-1&&this.uploadTextureQueue.splice(h,1)}resolveParentTexture(o){if(!(o!=null&&o.props))return o;const l=zu.makeCacheKey(o.props);return(l?this.getTextureFromCache(l):void 0)??o}}const X_={normal:400,bold:700,bolder:900,lighter:100},sC=f=>typeof f=="number"?f:X_[f]||400;function K_(f,i,o,l,h){let g=sC(o);for(const v of f){const w=v[i];if(!w)continue;if(w.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${i}' - will be used for all weights and styles`),w.values().next().value;const s=new Map;for(const C of w){const y=sC(C.descriptors.weight);if(y===g&&C.descriptors.style===l&&C.descriptors.stretch===h)return C;s.set(y,C)}const m=`TrFontManager: No exact match: '${i} Weight: ${g} Style: ${l} Stretch: ${h}'`;if(console.error(m),g===400&&s.has(500))return s.get(500);if(g===500&&s.has(400))return s.get(400);if(g<400){for(;g>0;){if(s.has(g))return s.get(g);g-=100}g=600}for(;g<1e3;){if(s.has(g))return s.get(g);g+=100}for(g=500;g>0;){if(s.has(g))return s.get(g);g-=100}}}class q_{constructor(i){O(this,"textRenderers");O(this,"fontCache",new Map);this.textRenderers=i}addFontFace(i){for(const o in this.textRenderers){const l=this.textRenderers[o];l&&l.isFontFaceSupported(i)&&l.addFontFace(i)}}resolveFontFace(i,o,l){const{fontFamily:h,fontWeight:g,fontStyle:v,fontStretch:w}=o,s=`${l}_${h}_${v}_${g}_${w}`;if(this.fontCache.has(s)===!0)return this.fontCache.get(s);const m=K_(i,h,g,v,w);return m!==void 0&&this.fontCache.set(s,m),m}}class JC{static makeCacheKey(i){return!1}static resolveDefaults(i){return{}}}function aC(f,i,o){const l=f.createShader(i);if(!l){const g=f.getError();throw new Error(`Unable to create the shader: ${i===f.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER"}.${g?` WebGlContext Error: ${g}`:""}`)}if(f.shaderSource(l,o),f.compileShader(l),!!f.getShaderParameter(l,f.COMPILE_STATUS))return l;console.error(f.getShaderInfoLog(l)),f.deleteShader(l)}function Y_(f,i,o){const l=f.createProgram();if(!l)throw new Error("Unable to create program");if(f.attachShader(l,i),f.attachShader(l,o),f.linkProgram(l),!!f.getProgramParameter(l,f.LINK_STATUS))return l;console.warn(f.getProgramInfoLog(l)),f.deleteProgram(l)}class bs extends JC{constructor(o){super();O(this,"boundBufferCollection",null);O(this,"buffersBound",!1);O(this,"program");O(this,"vao");O(this,"renderer");O(this,"glw");O(this,"attributeBuffers");O(this,"attributeLocations");O(this,"attributeNames");O(this,"uniformLocations");O(this,"uniformTypes");O(this,"supportsIndexedTextures");const l=this.renderer=o.renderer,h=this.glw=this.renderer.glw;this.supportsIndexedTextures=o.supportsIndexedTextures||!1;const g=h.isWebGl2(),v=g&&o.webgl2Extensions||!g&&o.webgl1Extensions||[],w=g?"2.0":"1.0";v.forEach(_=>{if(!h.getExtension(_))throw new Error(`Shader "${this.constructor.name}" requires extension "${_}" for WebGL ${w} but wasn't found`)});const s=o.shaderSources||this.constructor.shaderSources;if(s)g&&(s!=null&&s.webGl2)&&(s.fragment=s.webGl2.fragment,s.vertex=s.webGl2.vertex,delete s.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const m=l.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,C=s.vertex instanceof Function?s.vertex(m):s.vertex,y=s.fragment instanceof Function?s.fragment(m):s.fragment,x=aC(h,h.VERTEX_SHADER,C),M=aC(h,h.FRAGMENT_SHADER,y);if(!x||!M)throw new Error(`Unable to create the following shader(s): ${[!x&&"VERTEX_SHADER",!M&&"FRAGMENT_SHADER"].filter(Boolean).join(" and ")}`);const b=Y_(h,x,M);if(!b)throw new Error("Unable to create program");this.program=b,this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...o.attributes].forEach(_=>{const P=h.getAttribLocation(this.program,_);if(P<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${_}"!`);const j=h.createBuffer();if(!j)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${_}"`);this.attributeLocations[_]=P,this.attributeBuffers[_]=j,this.attributeNames.push(_)}),this.uniformLocations={},this.uniformTypes={},o.uniforms.forEach(_=>{const P=h.getUniformLocation(this.program,_.name);if(this.uniformTypes[_.name]=_.uniform,!P){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${_.name}"`);return}this.uniformLocations[_.name]=P})}bindBufferAttribute(o,l,h){const{glw:g}=this;g.enableVertexAttribArray(o),g.vertexAttribPointer(l,o,h.size,h.type,h.normalized,h.stride,h.offset)}disableAttribute(o){this.glw.disableVertexAttribArray(o)}disableAttributes(){for(const o in this.attributeLocations)this.disableAttribute(this.attributeLocations[o]);this.boundBufferCollection=null}canBatchShaderProps(o,l){return!1}bindRenderOp(o,l){this.bindBufferCollection(o.buffers),o.textures.length>0&&this.bindTextures(o.textures);const{glw:h,parentHasRenderTexture:g,renderToTexture:v}=o;if(!(v&&g)){if(g){const{width:w,height:s}=o.framebufferDimensions||{};h.uniform1f(this.getUniformLocation("u_pixelRatio"),1),h.uniform2f(this.getUniformLocation("u_resolution"),w??0,s??0)}else h.uniform1f(this.getUniformLocation("u_pixelRatio"),o.options.pixelRatio),h.uniform2f(this.getUniformLocation("u_resolution"),h.canvas.width,h.canvas.height);if(l){if(Qh(l,"$dimensions")){let w=l.$dimensions;w||(w=o.dimensions),h.uniform2f(this.getUniformLocation("u_dimensions"),w.width,w.height)}if(Qh(l,"$alpha")){let w=l.$alpha;w||(w=o.alpha),h.uniform1f(this.getUniformLocation("u_alpha"),w)}this.bindProps(l)}}}getUniformLocation(o){return this.uniformLocations[o]||null}bindBufferCollection(o){if(this.boundBufferCollection!==o){for(const l in this.attributeLocations){const h=o.getBuffer(l),g=o.getAttributeInfo(l);lt(h,`Buffer for "${l}" not found`),lt(g),this.bindBufferAttribute(this.attributeLocations[l],h,g)}this.boundBufferCollection=o}}bindProps(o){}bindTextures(o){}attach(){this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}O(bs,"shaderSources");class eT extends bs{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(i){const{glw:o}=this;o.activeTexture(0),o.bindTexture(i[0].ctxTexture)}}O(eT,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class tT extends bs{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});O(this,"supportsIndexedTextures",!0)}bindTextures(o){const{renderer:l,glw:h}=this;if(o.length>l.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${l.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);o.forEach((v,w)=>{h.activeTexture(w),h.bindTexture(v.ctxTexture)});const g=Array.from(Array(o.length).keys());this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"),g)}}O(tT,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:o=>`
      #define txUnits ${o}
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${o}], int idx, vec2 uv) {
        ${Array.from(Array(o).keys()).map(l=>`
          ${l!==0?"else ":""}if (idx == ${l}) {
            return texture2D(textures[${l}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class mo{constructor(i){O(this,"priority",1);O(this,"name","");O(this,"ref");O(this,"target");O(this,"passParameters","");O(this,"declaredUniforms","");O(this,"uniformInfo",{});const{ref:o,target:l,props:h={}}=i;this.ref=o,this.target=l;const g={},v=[];let w="";const s=this.constructor.uniforms||{};for(const m in s){const C=s[m],y=C.type,x=`${o}_${m}`;let M="";C.size&&(M=`[${C.size(h)}]`),v.push(x),w+=`uniform ${y} ${x}${M};`,g[m]={name:x,uniform:s[m].method}}this.passParameters=v.join(","),this.declaredUniforms=w,this.uniformInfo=g}static getEffectKey(i){return""}static getMethodParameters(i,o){const l=[];for(const h in i){const g=i[h];let v="";g.size&&(v=`[${g.size(o)}]`),l.push(`${g.type} ${h}${v}`)}return l.join(",")}static resolveDefaults(i){return{}}static makeEffectKey(i){return!1}}O(mo,"uniforms",{}),O(mo,"methods"),O(mo,"onShaderMask"),O(mo,"onColorize"),O(mo,"onEffectMask");const Pm=new Map,Q_=(f,i)=>{const o=JSON.stringify(f);if(Pm.has(o))return Pm.get(o);f=f??[];const l=[],h=f.length;let g=0;for(;g<h;g++){const{name:v,type:w,props:s}=f[g],m={name:v,type:w,props:{}},C=i[w],y=C.resolveDefaults(s),x=C.uniforms,M=Object.keys(x),b=M.length;let _=0;for(;_<b;_++){const P=M[_],j=x[P],H={value:y[P],programValue:void 0,method:j.method,updateOnBind:j.updateOnBind||!1,hasValidator:j.validator!==void 0,hasProgramValueUpdater:j.updateProgramValue!==void 0},$=H.hasValidator&&j.validator(y[P],y)||y[P];y[P]!==$&&(H.validatedValue=$),H.hasProgramValueUpdater&&j.updateProgramValue(H),H.programValue===void 0&&(H.programValue=H.value),m.props[P]=H}l.push(m)}return Pm.set(o,l),l},xr=class xr extends bs{constructor(o,l,h){const g=xr.createShader(l,h);super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...g.uniforms],shaderSources:{vertex:g.vertex,fragment:g.fragment}});O(this,"effects",[]);this.effects=g.effects}bindTextures(o){const{glw:l}=this;l.activeTexture(0),l.bindTexture(o[0].ctxTexture)}bindUniformMethods(o){const l=this.glw,h=o.effects,g=h.length;for(let v=0;v<g;v++){const w=this.effects[v].uniformInfo,s=h[v],m=Object.keys(s.props),C=m.length;for(let y=0;y<C;y++){const x=m[y],M=s.props[x].method,b=this.getUniformLocation(w[x].name);if(M==="uniform2fv"||M==="uniform2iv"||M==="uniform3iv"||M==="uniform4fv"||M==="uniform4iv"||M==="uniformMatrix2fv"||M==="uniformMatrix3fv"||M==="uniformMatrix4fv"||M==="uniform1f"||M==="uniform1fv"||M==="uniform1i"||M==="uniform1iv"){s.props[x].setUniformValue=function(){l[M](b,this.programValue)};continue}if(M==="uniform2f"||M==="uniform2i"){s.props[x].setUniformValue=function(){l[M](b,this.programValue[0],this.programValue[1])};continue}if(M==="uniform3f"||M==="uniform3i"){s.props[x].setUniformValue=function(){l[M](b,this.programValue[0],this.programValue[1],this.programValue[2])};continue}if(M==="uniform4f"||M==="uniform4i"){s.props[x].setUniformValue=function(){l[M](b,this.programValue[0],this.programValue[1],this.programValue[2],this.programValue[3])};continue}}}}bindProps(o){var v;const l=o.effects,h=l.length;let g=0;for(;g<h;g++){const w=l[g],s=Object.keys(w.props),m=s.length;let C=0;for(;C<m;C++){const y=s[C],x=w.props[y];if(x.updateOnBind===!0){const M=(v=this.renderer.shManager.getRegisteredEffects()[w.type])==null?void 0:v.uniforms[y];M==null||M.updateProgramValue(w.props[y],o)}x.setUniformValue()}}}canBatchShaderProps(o,l){if(o.$alpha!==l.$alpha||o.$dimensions.width!==l.$dimensions.width||o.$dimensions.height!==l.$dimensions.height||o.effects.length!==l.effects.length)return!1;const h=o.effects.length;let g=0;for(;g<h;g++){const v=o.effects[g],w=l.effects[g];if(v.type!==w.type)return!1;for(const s in v.props)if(w.props&&!w.props[s]||v.props[s].value!==w.props[s].value)return!1}return!0}static createShader(o,l){const h={},g={};let v="";const w=[],s=[],m=o.effects.map(b=>{const _=l[b.type],P=_.getEffectKey(b.props||{});h[P]=h[P]?++h[P]:1;const j=h[P];j===1&&s.push({key:P,type:b.type,props:b.props});const H=new _({ref:`${P}${j===1?"":j}`,target:P,props:b.props});return v+=H.declaredUniforms,w.push(...Object.values(H.uniformInfo)),H});let C="";s==null||s.forEach(b=>{const _=l[b.type],P=_.resolveDefaults(b.props??{}),j=[];for(const Y in _.methods){let ee=Y;const he=_.methods[Y];g[Y]&&g[Y]!==he&&(ee=xr.resolveMethodDuplicate(Y,he,g)),g[ee]=he.replace("function",ee),j.push({m:Y,cm:ee})}let H=_.onShaderMask instanceof Function?_.onShaderMask(P):_.onShaderMask,$=_.onColorize instanceof Function?_.onColorize(P):_.onColorize,B=_.onEffectMask instanceof Function?_.onEffectMask(P):_.onEffectMask;j.forEach(Y=>{const{m:ee,cm:he}=Y,k=new RegExp(`\\$${ee}`,"g");H&&(H=H.replace(k,he)),$&&($=$.replace(k,he)),B&&(B=B.replace(k,he))});const te=_.getMethodParameters(_.uniforms,P),X=te.length>0?`, ${te}`:"";H&&(C+=`
        float fx_${b.key}_onShaderMask(float shaderMask ${X}) {
          ${H}
        }
        `),$&&(C+=`
          vec4 fx_${b.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${X}) {
            ${$}
          }
        `),B&&(C+=`
          vec4 fx_${b.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${X}) {
            ${B}
          }
        `)});let y="";for(const b in g)y+=g[b];let x="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",M=`

    `;for(let b=0;b<m.length;b++){const _=m[b],P=_.passParameters.length>0?`, ${_.passParameters}`:"",j=l[_.name];j.onShaderMask&&(M+=`
        shaderMask = fx_${_.target}_onShaderMask(shaderMask ${P});
        `),j.onColorize&&(M+=`
        maskColor = fx_${_.target}_onColorize(shaderMask, maskColor, shaderColor${P});
        `),j.onEffectMask&&(x=`fx_${_.target}_onEffectMask(shaderMask, maskColor, shaderColor${P})`);const H=m[b+1];(H===void 0||l[H.name].onEffectMask)&&(M+=`
          shaderColor = ${x};
        `)}return{effects:m,uniforms:w,fragment:xr.fragment(v,y,C,M),vertex:xr.vertex()}}static resolveMethodDuplicate(o,l,h,g=0){const v=o+(g>0?g:"");return h[v]&&h[v]!==l?this.resolveMethodDuplicate(o,l,h,++g):v}static resolveDefaults(o,l){return lt(l),{effects:Q_(o.effects??[],l),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(o,l){var g;let h="";return(g=o.effects)==null||g.forEach(v=>{const s=l[v.type].getEffectKey(v.props||{});h+=`,${s}`}),`DynamicShader${h}`}};O(xr,"z$__type__Props"),O(xr,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),O(xr,"fragment",(o,l,h,g)=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${o}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${l}

    ${h}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${g}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let Xa=xr;class tg extends bs{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(i){return{radius:i.radius||10,$dimensions:{width:0,height:0}}}bindTextures(i){const{glw:o}=this;o.activeTexture(0),o.bindTexture(i[0].ctxTexture)}bindProps(i){const o=Math.min(i.$dimensions.width,i.$dimensions.height)/(2*i.radius);this.glw.uniform1f(this.getUniformLocation("u_radius"),i.radius*Math.min(o,1))}canBatchShaderProps(i,o){return i.radius===o.radius&&i.$dimensions.width===o.$dimensions.width&&i.$dimensions.height===o.$dimensions.height}}O(tg,"z$__type__Props"),O(tg,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const Z_=new Float32Array([1,0,0,0,1,0,0,0,1]),Fu=class Fu extends bs{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(i){const{glw:o}=this;o.activeTexture(0),o.bindTexture(i[0].ctxTexture)}bindProps(i){const o=Fu.resolveDefaults(i);for(const l in o)if(l==="transform")this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"),o[l]);else if(l==="scrollY")this.glw.uniform1f(this.getUniformLocation("u_scrollY"),o[l]);else if(l==="color"){const h=Xu(o.color);this.glw.uniform4fv(this.getUniformLocation("u_color"),h)}else l==="size"?this.glw.uniform1f(this.getUniformLocation("u_size"),o[l]):l==="distanceRange"?this.glw.uniform1f(this.getUniformLocation("u_distanceRange"),o[l]):l==="debug"&&this.glw.uniform1i(this.getUniformLocation("u_debug"),o[l]?1:0)}static resolveDefaults(i={}){return{transform:i.transform??Z_,scrollY:i.scrollY??0,color:i.color??4294967295,size:i.size??16,distanceRange:i.distanceRange??1,debug:i.debug??!1}}};O(Fu,"z$__type__Props"),O(Fu,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let ng=Fu;const ol=f=>{f.programValue===void 0&&(f.programValue=new Float32Array(4));const i=f.value,o=f.programValue;o[0]=(i>>>24)/255,o[1]=(i>>>16&255)/255,o[2]=(i>>>8&255)/255,o[3]=(i&255)/255},J_=f=>{const i=f.validatedValue||f.value;if(f.programValue instanceof Float32Array){const o=f.programValue;o[0]=i[0],o[1]=i[1]}else f.programValue=new Float32Array(i)},eR=f=>{const i=f.validatedValue||f.value;if(f.programValue instanceof Float32Array){const o=f.programValue;o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3]}else f.programValue=new Float32Array(i)},nT=f=>{const i=f.validatedValue||f.value;if(f.programValue instanceof Float32Array){const o=i.length,l=f.programValue;for(let h=0;h<o;h++)l[h]=i[h]}else f.programValue=new Float32Array(i)},vg=f=>{const i=Array.isArray(f);if(i){if(i&&f.length===4)return f;if(i&&f.length===2)return[f[0],f[1],f[0],f[1]];if(i&&f.length===3)return[f[0],f[1],f[2],f[0]]}else return[f,f,f,f];return[f[0],f[0],f[0],f[0]]},oT=(f,i)=>{f.programValue===void 0&&(f.programValue=new Float32Array(4));const o=f.programValue,l=f.validatedValue||f.value;if(i===void 0&&f.$dimensions===void 0){o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3];return}let h=f.$dimensions;if(i!==void 0){const{$dimensions:x}=i;if(h!==void 0&&(h.width===x.width||h.height===x.height))return;h===void 0&&(h={width:x==null?void 0:x.width,height:x==null?void 0:x.height},f.$dimensions=h)}const{width:g,height:v}=h,[w,s,m,C]=l,y=Math.min(Math.min(Math.min(g/Math.max(g,w+s),g/Math.max(g,m+C)),Math.min(v/Math.max(v,w+m),v/Math.max(v,s+C))),1);o[0]=w*y,o[1]=s*y,o[2]=m*y,o[3]=C*y};class Oa extends mo{constructor(){super(...arguments);O(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(o){return{radius:o.radius??10}}}O(Oa,"z$__type__Props"),O(Oa,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:vg,updateProgramValue:oT}}),O(Oa,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),O(Oa,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),O(Oa,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class _u extends mo{constructor(){super(...arguments);O(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(o){return{width:o.width??10,color:o.color??4294967295}}}O(_u,"z$__type__Props"),O(_u,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ol,method:"uniform4fv",type:"vec4"}}),O(_u,"onEffectMask",`
  float intR = shaderMask + 1.0;
  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),O(_u,"onColorize",`
    return color;
  `);const Vr=class Vr extends mo{constructor(){super(...arguments);O(this,"name","linearGradient")}static getEffectKey(o){return o.colors.value?`linearGradient${o.colors.value.length}`:`linearGradient${o.colors.length}`}static resolveDefaults(o){const l=o.colors??[4278190080,4294967295];let h=o.stops||[];if(h.length===0||h.length!==l.length){const g=l.length;let v=0;const w=h;for(;v<g;v++)h[v]?(w[v]=h[v],h[v-1]===void 0&&w[v-2]!==void 0&&(w[v-1]=w[v-2]+(h[v]-w[v-2])/2)):w[v]=v*(1/(l.length-1));h=w}return{colors:l,stops:h,angle:o.angle??0}}};O(Vr,"z$__type__Props"),O(Vr,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:o=>o.reduce((l,h)=>l.concat(Xu(h)),[]),updateProgramValue:nT,size:o=>o.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:o=>o.colors.length,method:"uniform1fv",type:"float"}}),O(Vr,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),O(Vr,"ColorLoop",o=>{let l="";for(let h=2;h<o;h++)l+=`colorOut = mix(colorOut, colors[${h}], clamp((dist - stops[${h-1}]) / (stops[${h}] - stops[${h-1}]), 0.0, 1.0));`;return l}),O(Vr,"onColorize",o=>{const l=o.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${Vr.ColorLoop(l)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let og=Vr;class ig extends mo{constructor(){super(...arguments);O(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(o){return{amount:o.amount??1}}}O(ig,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),O(ig,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class Na extends mo{constructor(){super(...arguments);O(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(o){return{width:o.width??10,color:o.color??4294967295}}}O(Na,"z$__type__Props"),O(Na,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ol,method:"uniform4fv",type:"vec4"}}),O(Na,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),O(Na,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),O(Na,"onColorize",`
    return color;
  `);class Ua extends mo{constructor(){super(...arguments);O(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(o){return{width:o.width??10,color:o.color??4294967295}}}O(Ua,"z$__type__Props"),O(Ua,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ol,method:"uniform4fv",type:"vec4"}}),O(Ua,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),O(Ua,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),O(Ua,"onColorize",`
    return color;
  `);class Ba extends mo{constructor(){super(...arguments);O(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(o){return{width:o.width??10,color:o.color??4294967295}}}O(Ba,"z$__type__Props"),O(Ba,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ol,method:"uniform4fv",type:"vec4"}}),O(Ba,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),O(Ba,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),O(Ba,"onColorize",`
    return color;
  `);class ja extends mo{constructor(){super(...arguments);O(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(o){return{width:o.width??10,color:o.color??4294967295}}}O(ja,"z$__type__Props"),O(ja,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ol,method:"uniform4fv",type:"vec4"}}),O(ja,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),O(ja,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),O(ja,"onColorize",`
    return color;
  `);class Ru extends mo{constructor(){super(...arguments);O(this,"name","glitch")}static getEffectKey(o){return"glitch"}static resolveDefaults(o){return{amplitude:o.amplitude??.2,narrowness:o.narrowness??4,blockiness:o.blockiness??2,minimizer:o.minimizer??8,time:o.time??Date.now()}}}O(Ru,"z$__type__Props"),O(Ru,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:o=>{const l=o.value=(Date.now()-o.value)%1e3;o.programValue=l},type:"float"}}),O(Ru,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),O(Ru,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class zh extends mo{constructor(){super(...arguments);O(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(o){return{fade:o.fade??10}}}O(zh,"z$__type__Props"),O(zh,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:vg,updateProgramValue:eR}}),O(zh,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const xs=class xs extends mo{constructor(){super(...arguments);O(this,"name","radialGradient")}static getEffectKey(o){return o.colors.value?`radialGradient${o.colors.value.length}`:`radialGradient${o.colors.length}`}static resolveDefaults(o){const l=o.colors??[4278190080,4294967295];let h=o.stops||[];if(h.length===0||h.length!==l.length){const g=l.length;let v=0;const w=h;for(;v<g;v++)h[v]?(w[v]=h[v],h[v-1]===void 0&&w[v-2]!==void 0&&(w[v-1]=w[v-2]+(h[v]-w[v-2])/2)):w[v]=v*(1/(l.length-1));h=w}return{colors:l,stops:h,width:o.width??0,height:o.height??o.width??0,pivot:o.pivot??[.5,.5]}}};O(xs,"z$__type__Props"),O(xs,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:J_,method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:o=>o.reduce((l,h)=>l.concat(Xu(h)),[]),updateProgramValue:nT,size:o=>o.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:o=>o.colors.length,method:"uniform1fv",type:"float"}}),O(xs,"ColorLoop",o=>{let l="";for(let h=2;h<o;h++)l+=`colorOut = mix(colorOut, colors[${h}], clamp((dist - stops[${h-1}]) / (stops[${h}] - stops[${h-1}]), 0.0, 1.0));`;return l}),O(xs,"onColorize",o=>{const l=o.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${xs.ColorLoop(l)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let rg=xs;class Fa extends mo{constructor(){super(...arguments);O(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(o){return{width:o.width??10,progress:o.progress??.5,offset:o.offset??0,range:o.range??Math.PI*2,rounded:o.rounded??!1,radius:o.radius??1,color:o.color??4294967295}}}O(Fa,"z$__type__Props"),O(Fa,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:o=>o?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ol,method:"uniform4fv",type:"vec4"}}),O(Fa,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),O(Fa,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),O(Fa,"onColorize",`
    return color;
  `);class $a extends mo{constructor(){super(...arguments);O(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(o){return{x:o.x||0,y:o.y||0,width:o.width||50,height:o.height||50,radius:o.radius??0}}}O($a,"z$__type__Props"),O($a,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:vg,updateProgramValue:oT}}),O($a,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),O($a,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),O($a,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const tR="RoundedRectangle";class cd extends JC{constructor(o){super();O(this,"shType");this.shType=o}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class nR{constructor(i,o,l,h){O(this,"type");O(this,"shader");O(this,"resolvedProps");O(this,"props");this.type=i,this.shader=o,this.resolvedProps=l;const g=Object.keys(l),v=g.length,w={};for(let s=0;s<v;s++){const m=g[s];Object.defineProperty(w,m,{get:()=>this.resolvedProps[m],set:C=>{this.resolvedProps[m]=C,h.requestRender()}})}this.props=w}getResolvedProps(){return this.resolvedProps}}class oR{constructor(i,o,l){O(this,"shader");O(this,"resolvedProps");O(this,"props");O(this,"type");this.shader=i,this.type="DynamicShader",this.resolvedProps=o;const h=l.getRegisteredEffects(),g={},v=o.effects,w=v.length;for(let s=0;s<w;s++){const{name:m,props:C,type:y}=v[s];if(m===void 0)continue;const x={},M=Object.keys(C),b=M.length;for(let _=0;_<b;_++){const P=M[_];Object.defineProperty(x,P,{get:()=>this.resolvedProps.effects[s].props[P].value,set:j=>{var $,B;const H=this.resolvedProps.effects[s].props[P];H.value=j,H.hasValidator&&(j=H.validatedValue=($=h[y].uniforms[P])==null?void 0:$.validator(j,C)),H.hasProgramValueUpdater?(B=h[y].uniforms[P])==null||B.updateProgramValue(H):H.programValue=j,l.renderer.stage.requestRender()}})}Object.defineProperty(g,m,{get:()=>x})}this.props=g}getResolvedProps(){return this.resolvedProps}}class iR{constructor(){O(this,"shCache",new Map);O(this,"shConstructors",{});O(this,"attachedShader",null);O(this,"effectConstructors",{});O(this,"renderer");this.registerShaderType("DefaultShader",eT),this.registerShaderType("DefaultShaderBatched",tT),this.registerShaderType("RoundedRectangle",tg),this.registerShaderType("DynamicShader",Xa),this.registerShaderType("SdfShader",ng),this.registerEffectType("border",_u),this.registerEffectType("borderBottom",Ba),this.registerEffectType("borderLeft",ja),this.registerEffectType("borderRight",Na),this.registerEffectType("borderTop",Ua),this.registerEffectType("fadeOut",zh),this.registerEffectType("linearGradient",og),this.registerEffectType("radialGradient",rg),this.registerEffectType("grayscale",ig),this.registerEffectType("glitch",Ru),this.registerEffectType("radius",Oa),this.registerEffectType("radialProgress",Fa),this.registerEffectType("holePunch",$a)}registerShaderType(i,o){this.shConstructors[i]=o}registerEffectType(i,o){this.effectConstructors[i]=o}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(i,o){if(!this.renderer)throw new Error("Renderer is not been defined");const l=this.shConstructors[i];if(!l)throw new Error(`Shader type "${i}" is not registered`);if(this.renderer.mode==="canvas"&&l.prototype instanceof bs)return this._createShaderCtr(i,new cd(i),o);if(i==="DynamicShader")return this.loadDynamicShader(o);const h=l.resolveDefaults(o),g=l.makeCacheKey(h)||l.name;if(g&&this.shCache.has(g))return this._createShaderCtr(i,this.shCache.get(g),h);const v=new l(this.renderer,o);return g&&this.shCache.set(g,v),this._createShaderCtr(i,v,h)}loadDynamicShader(i){if(!this.renderer)throw new Error("Renderer is not been defined");const o=Xa.resolveDefaults(i,this.effectConstructors),l=Xa.makeCacheKey(o,this.effectConstructors);if(l&&this.shCache.has(l))return this._createDynShaderCtr(this.shCache.get(l),o);const h=new Xa(this.renderer,i,this.effectConstructors);return l&&this.shCache.set(l,h),this._createDynShaderCtr(h,o)}_createShaderCtr(i,o,l){return new nR(i,o,l,this.renderer.stage)}_createDynShaderCtr(i,o){return i.bindUniformMethods(o),new oR(i,o,this)}useShader(i){this.attachedShader!==i&&(this.attachedShader&&this.attachedShader.detach(),i.attach(),this.attachedShader=i)}}const rR={x:(f,i)=>{f.props.x=i},y:(f,i)=>{f.props.y=i},width:(f,i)=>{f.props.width=i},height:(f,i)=>{f.props.height=i},color:(f,i)=>{f.props.color=i},zIndex:(f,i)=>{f.props.zIndex=i},fontFamily:(f,i)=>{f.props.fontFamily=i},fontWeight:(f,i)=>{f.props.fontWeight=i},fontStyle:(f,i)=>{f.props.fontStyle=i},fontStretch:(f,i)=>{f.props.fontStretch=i},fontSize:(f,i)=>{f.props.fontSize=i},text:(f,i)=>{f.props.text=i},textAlign:(f,i)=>{f.props.textAlign=i},contain:(f,i)=>{f.props.contain=i},offsetY:(f,i)=>{f.props.offsetY=i},scrollable:(f,i)=>{f.props.scrollable=i},scrollY:(f,i)=>{f.props.scrollY=i},letterSpacing:(f,i)=>{f.props.letterSpacing=i},lineHeight:(f,i)=>{f.props.lineHeight=i},maxLines:(f,i)=>{f.props.maxLines=i},textBaseline:(f,i)=>{f.props.textBaseline=i},verticalAlign:(f,i)=>{f.props.verticalAlign=i},overflowSuffix:(f,i)=>{f.props.overflowSuffix=i},debug:(f,i)=>{f.props.debug=i}};class xg{constructor(i){O(this,"stage");O(this,"set");this.stage=i;const o={...rR,...this.getPropertySetters()},l={};Object.keys(o).forEach(h=>{Object.defineProperty(l,h,{value:(g,v)=>{g.props[h]!==v&&(o[h](g,v),this.stage.requestRender())},writable:!1,configurable:!1})}),this.set=l}setStatus(i,o,l){i.status!==o&&(i.status=o,i.emitter.emit(o,l))}setIsRenderable(i,o){i.isRenderable=o}destroyState(i){this.setStatus(i,"destroyed"),i.emitter.removeAllListeners()}scheduleUpdateState(i){i.updateScheduled||(i.updateScheduled=!0,queueMicrotask(()=>{i.status!=="destroyed"&&(i.updateScheduled=!1,this.updateState(i))}))}}class sR{constructor(){O(this,"data",{})}reset(){this.data={}}increment(i){this.data[i]||(this.data[i]=0),this.data[i]++}getData(){return{...this.data}}}class aR{constructor(i,o){O(this,"stage");O(this,"memUsed",0);O(this,"loadedTextures",new Map);O(this,"orphanedTextures",[]);O(this,"criticalThreshold");O(this,"targetThreshold");O(this,"cleanupInterval");O(this,"debugLogging");O(this,"lastCleanupTime",0);O(this,"baselineMemoryAllocation");O(this,"criticalCleanupRequested",!1);O(this,"doNotExceedCriticalThreshold");O(this,"frameTime",0);this.stage=i;const{criticalThreshold:l,doNotExceedCriticalThreshold:h}=o;this.doNotExceedCriticalThreshold=h||!1,this.criticalThreshold=Math.round(l);const g=Math.max(0,Math.min(1,o.targetThresholdLevel));if(this.cleanupInterval=o.cleanupInterval,this.debugLogging=o.debugLogging,this.baselineMemoryAllocation=Math.round(o.baselineMemoryAllocation),this.targetThreshold=Math.max(Math.round(l*g),this.baselineMemoryAllocation),this.memUsed=Math.round(o.baselineMemoryAllocation),o.debugLogging){let v=0;setInterval(()=>{v!==this.memUsed&&(v=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${oC(this.memUsed)} mb / ${oC(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}l===0&&(this.setTextureMemUse=()=>{})}addToOrphanedTextures(i){this.orphanedTextures.includes(i)&&this.removeFromOrphanedTextures(i),i.preventCleanup===!1&&this.orphanedTextures.push(i)}removeFromOrphanedTextures(i){const o=this.orphanedTextures.indexOf(i);o!==-1&&this.orphanedTextures.splice(o,1)}setTextureMemUse(i,o){if(this.loadedTextures.has(i)&&(this.memUsed-=this.loadedTextures.get(i)),o===0){this.loadedTextures.delete(i);return}else this.memUsed+=o,this.loadedTextures.set(i,o);this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}checkCriticalCleanup(){return this.memUsed>this.criticalThreshold}cleanupQuick(i){const o=this.targetThreshold,l=this.stage.txManager,h=ws();for(;this.memUsed>=o&&this.orphanedTextures.length>0&&(i||ws()-h<10);){const g=this.orphanedTextures.shift();g!==void 0&&g.renderable!==!0&&(g.free(),l.removeTextureFromCache(g))}}cleanupDeep(i){const o=i?this.criticalThreshold:this.targetThreshold,l=this.stage.txManager,h=[],g=[...this.loadedTextures.keys()];for(let v=0;v<g.length;v++){const w=g[v];w!==void 0&&(w.type===_n.image||w.type===_n.noise||w.type===_n.renderToTexture)&&(w.renderable===!0?h.push(w):h.unshift(w))}for(;this.memUsed>=o&&h.length>0;){const v=h.shift();if(v!==void 0&&v.preventCleanup!==!0){if(v.renderable===!0)break;v.free(),this.removeFromOrphanedTextures(v),l.removeTextureFromCache(v),l.removeTextureFromQueue(v)}}}cleanup(i=!1){const o=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,o===!0&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging===!0&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${o}. Aggressive: ${i}`),this.cleanupQuick(o),i===!0&&this.memUsed>=this.criticalThreshold&&this.cleanupDeep(o),this.memUsed>=this.criticalThreshold?(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),(this.debugLogging===!0||tl()===!1)&&console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`)):this.criticalCleanupRequested=!1}getMemoryInfo(){let i=0;const o=[...this.loadedTextures.keys()].reduce((l,h)=>(i+=h.renderable?1:0,l+(h.renderable?this.loadedTextures.get(h):0)),this.baselineMemoryAllocation);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:o,memUsed:this.memUsed,renderableTexturesLoaded:i,loadedTextures:this.loadedTextures.size,baselineMemoryAllocation:this.baselineMemoryAllocation}}}class iT{constructor(i,o){O(this,"textureSource");O(this,"memManager");O(this,"state","freed");this.memManager=i,this.textureSource=o}setTextureMemUse(i){this.memManager.setTextureMemUse(this.textureSource,i)}get renderable(){return this.textureSource.renderable}}class rT{constructor(i){O(this,"options");O(this,"mode");O(this,"stage");O(this,"txManager");O(this,"txMemManager");O(this,"shManager");O(this,"rttNodes",[]);this.options=i,this.stage=i.stage,this.txManager=i.txManager,this.txMemManager=i.txMemManager,this.shManager=i.shManager}}class lR extends Jm{constructor(o,l,h){super(o,l);O(this,"textRenderer");O(this,"trState");O(this,"_textRendererOverride",null);O(this,"onTextLoaded",()=>{const{contain:o}=this,l=this.trState.props.width,h=this.trState.props.height,g=this.trState.textW||0,v=this.trState.textH||0;o==="both"?(this.props.width=l,this.props.height=h):o==="width"?(this.props.width=l,this.props.height=v):o==="none"&&(this.props.width=g,this.props.height=v),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});O(this,"onTextFailed",(o,l)=>{this.emit("failed",{type:"text",error:l})});this._textRendererOverride=l.textRendererOverride,this.textRenderer=h;const g=this.createState({x:this.absX,y:this.absY,width:l.width,height:l.height,textAlign:l.textAlign,color:l.color,zIndex:l.zIndex,contain:l.contain,scrollable:l.scrollable,scrollY:l.scrollY,offsetY:l.offsetY,letterSpacing:l.letterSpacing,debug:l.debug,fontFamily:l.fontFamily,fontSize:l.fontSize,fontStretch:l.fontStretch,fontStyle:l.fontStyle,fontWeight:l.fontWeight,text:l.text,lineHeight:l.lineHeight,maxLines:l.maxLines,textBaseline:l.textBaseline,verticalAlign:l.verticalAlign,overflowSuffix:l.overflowSuffix});this.trState=g}get width(){return this.props.width}set width(o){this.props.width=o,this.textRenderer.set.width(this.trState,o),this.contain==="none"&&this.setUpdateType(Ne.Local)}get height(){return this.props.height}set height(o){this.props.height=o,this.textRenderer.set.height(this.trState,o),this.contain!=="both"&&this.setUpdateType(Ne.Local)}get color(){return this.trState.props.color}set color(o){this.textRenderer.set.color(this.trState,o)}get text(){return this.trState.props.text}set text(o){this.textRenderer.set.text(this.trState,o)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(o){this._textRendererOverride=o,this.textRenderer.destroyState(this.trState);const l=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);if(!l){console.warn("Text Renderer not found for font",this.trState.props.fontFamily);return}this.textRenderer=l,this.trState=this.createState(this.trState.props)}get fontSize(){return this.trState.props.fontSize}set fontSize(o){this.textRenderer.set.fontSize(this.trState,o)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(o){this.textRenderer.set.fontFamily(this.trState,o)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(o){this.textRenderer.set.fontStretch(this.trState,o)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(o){this.textRenderer.set.fontStyle(this.trState,o)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(o){this.textRenderer.set.fontWeight(this.trState,o)}get textAlign(){return this.trState.props.textAlign}set textAlign(o){this.textRenderer.set.textAlign(this.trState,o)}get contain(){return this.trState.props.contain}set contain(o){this.textRenderer.set.contain(this.trState,o)}get scrollable(){return this.trState.props.scrollable}set scrollable(o){this.textRenderer.set.scrollable(this.trState,o)}get scrollY(){return this.trState.props.scrollY}set scrollY(o){this.textRenderer.set.scrollY(this.trState,o)}get offsetY(){return this.trState.props.offsetY}set offsetY(o){this.textRenderer.set.offsetY(this.trState,o)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(o){this.textRenderer.set.letterSpacing(this.trState,o)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(o){this.textRenderer.set.lineHeight(this.trState,o)}get maxLines(){return this.trState.props.maxLines}set maxLines(o){this.textRenderer.set.maxLines(this.trState,o)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(o){this.textRenderer.set.textBaseline(this.trState,o)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(o){this.textRenderer.set.verticalAlign(this.trState,o)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(o){this.textRenderer.set.overflowSuffix(this.trState,o)}get debug(){return this.trState.props.debug}set debug(o){this.textRenderer.set.debug(this.trState,o)}update(o,l){super.update(o,l),lt(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkBasicRenderability(){return this.worldAlpha===0||this.isOutOfBounds()===!0?!1:!!(this.trState&&this.trState.props.text!=="")}setRenderable(o){super.setRenderable(o),this.textRenderer.setIsRenderable(this.trState,o)}renderQuads(o){var l;if(lt(this.globalTransform),!this.textRenderer.renderQuads){super.renderQuads(o);return}this.parentHasRenderTexture&&(!o.renderToTextureActive||this.parentRenderTexture!==o.activeRttNode)||(this.parentHasRenderTexture&&((l=this.props.parent)!=null&&l.rtt)&&(this.globalTransform=uo.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),lt(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}createState(o){const l=this.textRenderer.createState(o,this);return l.emitter.on("loaded",this.onTextLoaded),l.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(l),l}}function uR(f){const i={boolean:!0,string:!0,number:!0,undefined:!0},o=Object.keys(f);for(let l=0;l<o.length;l++){const h=o[l];if(!h)continue;const g=f[h],v=typeof g;v==="string"&&g.length>2048&&(console.warn(`Custom Data value for ${h} is too long, it will be truncated to 2048 characters`),f[h]=g.substring(0,2048)),i[v]||(console.warn(`Custom Data value for ${h} is not a boolean, string, or number, it will be ignored`),delete f[h])}return f}const fR=2e6;class cR{constructor(i){O(this,"options");O(this,"animationManager");O(this,"txManager");O(this,"txMemManager");O(this,"fontManager");O(this,"textRenderers");O(this,"shManager");O(this,"renderer");O(this,"root");O(this,"boundsMargin");O(this,"defShaderCtr");O(this,"strictBound");O(this,"preloadBound");O(this,"strictBounds");O(this,"defaultTexture",null);O(this,"eventBus");O(this,"deltaTime",0);O(this,"lastFrameTime",0);O(this,"currentFrameTime",0);O(this,"fpsNumFrames",0);O(this,"fpsElapsedTime",0);O(this,"numQuadsRendered",0);O(this,"renderRequested",!1);O(this,"frameEventQueue",[]);O(this,"fontResolveMap",{});O(this,"contextSpy",null);this.options=i;const{canvas:o,clearColor:l,appWidth:h,appHeight:g,boundsMargin:v,enableContextSpy:w,forceWebGL2:s,numImageWorkers:m,textureMemory:C,renderEngine:y,fontEngines:x,createImageBitmapSupport:M}=i;this.eventBus=i.eventBus,this.txManager=new W_(this,{numImageWorkers:m,createImageBitmapSupport:M}),this.txManager.on("initialized",()=>{this.requestRender()}),this.txMemManager=new aR(this,C),this.shManager=new iR,this.animationManager=new B_,this.contextSpy=w?new sR:null,this.strictBounds=i.strictBounds;let b=[0,0,0,0];v&&(b=Array.isArray(v)?v:[v,v,v,v]),this.boundsMargin=b,this.strictBound=Ga(0,0,h,g),this.preloadBound=Zm(this.strictBound,b);const _={stage:this,canvas:o,pixelRatio:i.devicePhysicalPixelRatio*i.deviceLogicalPixelRatio,clearColor:l??4278190080,bufferMemory:fR,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy,forceWebGL2:s};this.renderer=new y(_);const P=this.renderer.mode||"webgl";this.createDefaultTexture(),this.defShaderCtr=this.renderer.getDefShaderCtr(),S_(P),this.txManager.renderer=this.renderer,this.textRenderers={},x.forEach(H=>{const $=new H(this),B=$.type;if(B==="sdf"&&P==="canvas"){console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...");return}$ instanceof xg&&(B==="canvas"?this.textRenderers.canvas=$:B==="sdf"&&(this.textRenderers.sdf=$))}),Object.keys(this.textRenderers).length===0&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new q_(this.textRenderers);const j=new Jm(this,{x:0,y:0,width:h,height:g,alpha:1,autosize:!1,boundsMargin:null,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1,strictBounds:this.strictBounds});this.root=j,U_(this)}setClearColor(i){this.renderer.updateClearColor(i),this.renderRequested=!0}updateFrameTime(){const i=ws();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=i,this.deltaTime=this.lastFrameTime?i-this.lastFrameTime:100/6,this.txManager.frameTime=i,this.txMemManager.frameTime=i,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}createDefaultTexture(){console.log("Creating default texture"),this.defaultTexture=this.txManager.createTexture("ColorTexture",{color:4294967295}),lt(this.defaultTexture instanceof Zh),this.txManager.loadTexture(this.defaultTexture,!0),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.requestRender()})}updateAnimations(){const{animationManager:i}=this;this.root&&i.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested||this.txManager.hasUpdates()}drawFrame(){const{renderer:i,renderRequested:o}=this;lt(i),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),this.txManager.processSome(this.options.textureProcessingTimeLimit),i.reset(),this.txMemManager.criticalCleanupRequested===!0&&(this.txMemManager.cleanup(!1),this.txMemManager.criticalCleanupRequested===!0&&this.txMemManager.cleanup(!0)),i.rttNodes.length>0&&i.renderRTTNodes(),this.addQuads(this.root),i==null||i.render(),this.calculateFps(),this.calculateQuads(),o&&(this.renderRequested=!1)}queueFrameEvent(i,o){this.frameEventQueue.push([i,o])}flushFrameEvents(){for(const[i,o]of this.frameEventQueue)this.eventBus.emit(i,o);this.frameEventQueue=[]}calculateFps(){var o,l;const{fpsUpdateInterval:i}=this.options;if(i&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=i)){const h=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:h,contextSpyData:((o=this.contextSpy)==null?void 0:o.getData())??null}),(l=this.contextSpy)==null||l.reset()}}calculateQuads(){const i=this.renderer.getQuadCount();i&&i!==this.numQuadsRendered&&(this.numQuadsRendered=i,this.queueFrameEvent("quadsUpdate",{quads:i}))}addQuads(i){lt(this.renderer),i.isRenderable===!0&&i.renderQuads(this.renderer);for(let o=0;o<i.children.length;o++){const l=i.children[o];l!==void 0&&(l.worldAlpha===0||l.strictBounds===!0&&l.renderState===ho.OutOfBounds||this.addQuads(l))}}requestRender(){this.renderRequested=!0}resolveTextRenderer(i,o=null){const l=`${i.fontFamily}${i.fontStyle}${i.fontWeight}${i.fontStretch}${o||""}`;if(this.fontResolveMap[l]!==void 0)return this.fontResolveMap[l];let h=o,g=!1;if(h){const w=this.textRenderers[h];w?w.canRenderFont(i)||(console.warn(`Cannot use override text renderer '${h}' for font`,i),h=null,g=!0):(console.warn(`Text renderer override '${h}' not found.`),h=null,g=!0)}if(!h){for(const[w,s]of Object.entries(this.textRenderers))if(s.canRenderFont(i)){h=w;break}!h&&this.textRenderers.canvas!==void 0&&(h="canvas")}if(g&&console.warn(`Falling back to text renderer ${String(h)}`),!h)return null;const v=this.textRenderers[h];return lt(v,"resolvedTextRenderer undefined"),this.fontResolveMap[l]=v,v}createShaderCtr(i,o){return this.shManager.loadShader(i,o)}createNode(i){const o=this.resolveNodeDefaults(i);return new Jm(this,o)}createTextNode(i){const o=i.fontSize??16,l={...this.resolveNodeDefaults(i),text:i.text??"",textRendererOverride:i.textRendererOverride??null,fontSize:o,fontFamily:i.fontFamily??"sans-serif",fontStyle:i.fontStyle??"normal",fontWeight:i.fontWeight??"normal",fontStretch:i.fontStretch??"normal",textAlign:i.textAlign??"left",contain:i.contain??"none",scrollable:i.scrollable??!1,scrollY:i.scrollY??0,offsetY:i.offsetY??0,letterSpacing:i.letterSpacing??0,lineHeight:i.lineHeight,maxLines:i.maxLines??0,textBaseline:i.textBaseline??"alphabetic",verticalAlign:i.verticalAlign??"middle",overflowSuffix:i.overflowSuffix??"...",debug:i.debug??{},shaderProps:null},h=this.resolveTextRenderer(l,i.textRendererOverride);if(!h)throw new Error(`No compatible text renderer found for ${l.fontFamily}`);return new lR(this,l,h)}setBoundsMargin(i){this.boundsMargin=Array.isArray(i)?i:[i,i,i,i],this.root.setUpdateType(Ne.RenderBounds)}resolveNodeDefaults(i){const o=i.color??4294967295,l=i.colorTl??i.colorTop??i.colorLeft??o,h=i.colorTr??i.colorTop??i.colorRight??o,g=i.colorBl??i.colorBottom??i.colorLeft??o,v=i.colorBr??i.colorBottom??i.colorRight??o;let w={};return this.options.inspector===!0&&(w=uR(i.data??{})),{x:i.x??0,y:i.y??0,width:i.width??0,height:i.height??0,alpha:i.alpha??1,autosize:i.autosize??!1,boundsMargin:i.boundsMargin??null,clipping:i.clipping??!1,color:o,colorTop:i.colorTop??o,colorBottom:i.colorBottom??o,colorLeft:i.colorLeft??o,colorRight:i.colorRight??o,colorBl:g,colorBr:v,colorTl:l,colorTr:h,zIndex:i.zIndex??0,zIndexLocked:i.zIndexLocked??0,parent:i.parent??null,texture:i.texture??null,textureOptions:i.textureOptions??{},shader:i.shader??this.defShaderCtr,src:i.src??null,srcHeight:i.srcHeight,srcWidth:i.srcWidth,srcX:i.srcX,srcY:i.srcY,scale:i.scale??null,scaleX:i.scaleX??i.scale??1,scaleY:i.scaleY??i.scale??1,mount:i.mount??0,mountX:i.mountX??i.mount??0,mountY:i.mountY??i.mount??0,pivot:i.pivot??.5,pivotX:i.pivotX??i.pivot??.5,pivotY:i.pivotY??i.pivot??.5,rotation:i.rotation??0,rtt:i.rtt??!1,data:w,preventCleanup:i.preventCleanup??!1,imageType:i.imageType,strictBounds:i.strictBounds??this.strictBounds}}cleanup(i){this.txMemManager.cleanup(i)}}class hR extends Cr{constructor(o,l){var _,P,j,H,$,B;super();O(this,"root");O(this,"canvas");O(this,"settings");O(this,"stage");O(this,"inspector",null);const h={criticalThreshold:((_=o.textureMemory)==null?void 0:_.criticalThreshold)||124e6,targetThresholdLevel:((P=o.textureMemory)==null?void 0:P.targetThresholdLevel)||.5,cleanupInterval:((j=o.textureMemory)==null?void 0:j.cleanupInterval)||5e3,debugLogging:((H=o.textureMemory)==null?void 0:H.debugLogging)||!1,baselineMemoryAllocation:(($=o.textureMemory)==null?void 0:$.baselineMemoryAllocation)||26e6,doNotExceedCriticalThreshold:((B=o.textureMemory)==null?void 0:B.doNotExceedCriticalThreshold)||!1},g={appWidth:o.appWidth||1920,appHeight:o.appHeight||1080,textureMemory:h,boundsMargin:o.boundsMargin||0,deviceLogicalPixelRatio:o.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:o.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:o.clearColor??0,fpsUpdateInterval:o.fpsUpdateInterval||0,numImageWorkers:o.numImageWorkers!==void 0?o.numImageWorkers:2,enableContextSpy:o.enableContextSpy??!1,forceWebGL2:o.forceWebGL2??!1,inspector:o.inspector??!1,renderEngine:o.renderEngine,quadBufferSize:o.quadBufferSize??4*1024*1024,fontEngines:o.fontEngines,strictBounds:o.strictBounds??!0,textureProcessingTimeLimit:o.textureProcessingTimeLimit||10,canvas:o.canvas||document.createElement("canvas"),createImageBitmapSupport:o.createImageBitmapSupport||"full"};this.settings=g;const{appWidth:v,appHeight:w,deviceLogicalPixelRatio:s,devicePhysicalPixelRatio:m,inspector:C,canvas:y}=g,x=v*s,M=w*s;this.canvas=y,y.width=x*m,y.height=M*m,y.style.width=`${x}px`,y.style.height=`${M}px`,this.stage=new cR({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,forceWebGL2:this.settings.forceWebGL2,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderEngine:this.settings.renderEngine,textureMemory:h,eventBus:this,quadBufferSize:this.settings.quadBufferSize,fontEngines:this.settings.fontEngines,inspector:this.settings.inspector!==null,strictBounds:this.settings.strictBounds,textureProcessingTimeLimit:this.settings.textureProcessingTimeLimit,createImageBitmapSupport:this.settings.createImageBitmapSupport}),this.root=this.stage.root;let b;if(typeof l=="string"?b=document.getElementById(l):b=l,!b)throw new Error("Could not find target element");b.appendChild(y),C&&!tl()&&(this.inspector=new C(y,g))}createNode(o){const l=this.stage.createNode(o);return this.inspector?this.inspector.createNode(l):l}createTextNode(o){const l=this.stage.createTextNode(o);return this.inspector?this.inspector.createTextNode(l):l}destroyNode(o){return this.inspector&&this.inspector.destroyNode(o.id),o.destroy()}createTexture(o,l){return this.stage.txManager.createTexture(o,l)}createShader(o,l){return this.stage.shManager.loadShader(o,l)}createDynamicShader(o){return this.stage.shManager.loadDynamicShader({effects:o})}createEffect(o,l,h){return{name:h,type:o,props:l}}getNodeById(o){var g;const l=(g=this.stage)==null?void 0:g.root;if(!l)return null;const h=v=>{if(v.id===o)return v;for(const w of v.children){const s=h(w);if(s)return s}return null};return h(l)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){this.stage.requestRender()}cleanup(o=!1){this.stage.cleanup(o)}setClearColor(o){this.stage.setClearColor(o)}}class sT extends Cr{constructor(o){super();O(this,"fontFamily");O(this,"descriptors");O(this,"loaded",!1);O(this,"metrics",null);const{fontFamily:l,descriptors:h,metrics:g}=o;g&&(this.metrics={ascender:g.ascender/g.unitsPerEm,descender:g.descender/g.unitsPerEm,lineGap:g.lineGap/g.unitsPerEm}),this.fontFamily=l,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...h}}static convertToCssFontFaceDescriptors(o){return{style:o.style,weight:typeof o.weight=="number"?`${o.weight}`:o.weight,stretch:o.stretch,unicodeRange:o.unicodeRange,featureSettings:o.featureSettings,display:o.display}}}class Vh extends sT{constructor(o){super(o);O(this,"fontFace");O(this,"fontUrl");const{fontFamily:l,fontUrl:h}=o,g=h.replace(/\(|\)/g,""),v=this.descriptors;let w={style:v.style,weight:typeof v.weight=="number"?`${v.weight}`:v.weight,stretch:v.stretch,unicodeRange:v.unicodeRange,featureSettings:v.featureSettings,display:v.display};for(const m in w){const C=m;w[C]===void 0&&delete w[C]}const s=new FontFace(l,`url(${g})`,w);g.length>0?s.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error):(this.loaded=!0,this.emit("loaded")),this.fontFace=s,this.fontUrl=h}}class dR{}class aT extends dR{constructor(o,l,h,g,v,w,s,m,C,y,x,M,b){super();O(this,"glw");O(this,"options");O(this,"buffers");O(this,"shader");O(this,"shaderProps");O(this,"alpha");O(this,"clippingRect");O(this,"dimensions");O(this,"bufferIdx");O(this,"zIndex");O(this,"renderToTexture");O(this,"parentHasRenderTexture");O(this,"framebufferDimensions");O(this,"length",0);O(this,"numQuads",0);O(this,"textures",[]);O(this,"maxTextures");this.glw=o,this.options=l,this.buffers=h,this.shader=g,this.shaderProps=v,this.alpha=w,this.clippingRect=s,this.dimensions=m,this.bufferIdx=C,this.zIndex=y,this.renderToTexture=x,this.parentHasRenderTexture=M,this.framebufferDimensions=b,this.maxTextures=g.supportsIndexedTextures?o.getParameter(o.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(o){const{textures:l,maxTextures:h}=this;let g=-1;const v=l.length;for(let w=0;w<v;w++)if(l[w]===o){g=w;break}return g!==-1?g:v>=h?4294967295:(this.textures.push(o),v)}draw(){const{glw:o,shader:l,shaderProps:h,options:g}=this,{shManager:v}=g;v.useShader(l),l.bindRenderOp(this,h);const w=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:s,y:m,width:C,height:y}=this.clippingRect,x=this.parentHasRenderTexture?1:g.pixelRatio,M=g.canvas.height,b=Math.round(s*x),_=Math.round(C*x),P=Math.round(y*x);let j=Math.round(M-P-m*x);this.parentHasRenderTexture&&(j=this.framebufferDimensions?this.framebufferDimensions.height-this.dimensions.height:0),o.setScissorTest(!0),o.scissor(b,j,_,P)}else o.setScissorTest(!1);o.drawElements(o.TRIANGLES,6*this.numQuads,o.UNSIGNED_SHORT,w)}}function pR(f){const i={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(i).forEach(l=>{i[l]=f.getParameter(f[l])}),i}function mR(f){const i={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(i).forEach(l=>{i[l]=f.getExtension(l)}),i}function gR(f,i){const o=~~(i/80),l=new Uint16Array(o*6);for(let g=0,v=0;g<o;g+=6,v+=4)l[g]=v,l[g+1]=v+1,l[g+2]=v+2,l[g+3]=v+2,l[g+4]=v+1,l[g+5]=v+3;const h=f.createBuffer();f.elementArrayBufferData(h,l,f.STATIC_DRAW)}function yR(f){return f!==null&&(typeof f=="object"&&f.constructor&&f.constructor.name==="HTMLImageElement"||typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement)}const Om=new Uint8Array([0,0,0,0]);class ed extends iT{constructor(o,l,h){super(l,h);O(this,"glw");O(this,"_nativeCtxTexture",null);O(this,"_w",0);O(this,"_h",0);this.glw=o}get ctxTexture(){return this.state==="freed"?(this.load(),null):(lt(this._nativeCtxTexture),this._nativeCtxTexture)}get w(){return this._w}get h(){return this._h}load(){if(!(this.state==="loading"||this.state==="loaded")){if(this.state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this._nativeCtxTexture===null){this.state="failed",this.textureSource.setState("failed",new Error("Could not create WebGL Texture")),console.error("Could not create WebGL Texture");return}this.onLoadRequest().then(({width:o,height:l})=>{this.state!=="freed"&&(this.state="loaded",this._w=o,this._h=l,this.textureSource.setState("loaded",{width:o,height:l}),this.textureSource.freeTextureData())}).catch(o=>{this.state!=="freed"&&(this.state="failed",this.textureSource.setState("failed",o),this.textureSource.freeTextureData(),console.error(o))})}}async onLoadRequest(){const{glw:o}=this,l=this.textureSource.textureData;if(l===null||this._nativeCtxTexture===null)throw new Error("Texture data or native texture is null "+this.textureSource.type);o.texImage2D(0,o.RGBA,1,1,0,o.RGBA,o.UNSIGNED_BYTE,null),this.setTextureMemUse(Om.byteLength);let h=0,g=0;o.activeTexture(0);const v=l.data,w=o.RGBA,s=4,m=1.1;if(typeof ImageBitmap<"u"&&v instanceof ImageBitmap||v instanceof ImageData||yR(v))h=v.width,g=v.height,o.bindTexture(this._nativeCtxTexture),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!l.premultiplyAlpha),o.texImage2D(0,w,w,o.UNSIGNED_BYTE,v),this.setTextureMemUse(g*h*s*m);else if(v===null)h=0,g=0,o.bindTexture(this._nativeCtxTexture),o.texImage2D(0,w,1,1,0,w,o.UNSIGNED_BYTE,Om),this.setTextureMemUse(Om.byteLength);else if("mipmaps"in v&&v.mipmaps){const{mipmaps:C,width:y=0,height:x=0,type:M,glInternalFormat:b}=v,_=M==="ktx"?new DataView(C[0]??new ArrayBuffer(0)):C[0];o.bindTexture(this._nativeCtxTexture),o.compressedTexImage2D(0,b,y,x,0,_),o.texParameteri(o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_MIN_FILTER,o.LINEAR),this.setTextureMemUse(_.byteLength)}else v&&v instanceof Uint8Array?(h=1,g=1,o.bindTexture(this._nativeCtxTexture),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!l.premultiplyAlpha),o.texImage2D(0,w,h,g,0,w,o.UNSIGNED_BYTE,v),this.setTextureMemUse(h*g*s)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",l);return{width:h,height:g}}free(){this.state!=="freed"&&(this.state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,this._nativeCtxTexture!==null&&(this.glw.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null),this.textureSource.freeTextureData())}createNativeCtxTexture(){const{glw:o}=this,l=o.createTexture();return l?(o.activeTexture(0),o.bindTexture(l),o.texParameteri(o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),l):null}}class vR extends ed{constructor(i,o,l){super(i,o,l)}async onLoadRequest(){var o,l;const i=this.textureSource.textureData;return lt(i,"SubTexture must have texture data"),i.data instanceof Uint8Array?{width:1,height:1}:{width:((o=i.data)==null?void 0:o.width)||0,height:((l=i.data)==null?void 0:l.height)||0}}}class lT{constructor(i){O(this,"config");this.config=i}getBuffer(i){var o;return(o=this.config.find(l=>l.attributes[i]))==null?void 0:o.buffer}getAttributeInfo(i){var o;return(o=this.config.find(l=>l.attributes[i]))==null?void 0:o.attributes[i]}}function xR(f){return self.WebGL2RenderingContext&&f instanceof self.WebGL2RenderingContext}class wR{constructor(i){O(this,"gl");O(this,"activeTextureUnit",0);O(this,"texture2dUnits");O(this,"texture2dParams",new WeakMap);O(this,"scissorEnabled");O(this,"scissorX");O(this,"scissorY");O(this,"scissorWidth");O(this,"scissorHeight");O(this,"blendEnabled");O(this,"blendSrcRgb");O(this,"blendDstRgb");O(this,"blendSrcAlpha");O(this,"blendDstAlpha");O(this,"boundArrayBuffer");O(this,"boundElementArrayBuffer");O(this,"curProgram");O(this,"canvas");O(this,"MAX_RENDERBUFFER_SIZE");O(this,"MAX_TEXTURE_SIZE");O(this,"MAX_VIEWPORT_DIMS");O(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");O(this,"MAX_TEXTURE_IMAGE_UNITS");O(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");O(this,"MAX_VERTEX_ATTRIBS");O(this,"MAX_VARYING_VECTORS");O(this,"MAX_VERTEX_UNIFORM_VECTORS");O(this,"MAX_FRAGMENT_UNIFORM_VECTORS");O(this,"TEXTURE_MAG_FILTER");O(this,"TEXTURE_MIN_FILTER");O(this,"TEXTURE_WRAP_S");O(this,"TEXTURE_WRAP_T");O(this,"LINEAR");O(this,"CLAMP_TO_EDGE");O(this,"RGB");O(this,"RGBA");O(this,"UNSIGNED_BYTE");O(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");O(this,"UNPACK_FLIP_Y_WEBGL");O(this,"FLOAT");O(this,"TRIANGLES");O(this,"UNSIGNED_SHORT");O(this,"ONE");O(this,"ONE_MINUS_SRC_ALPHA");O(this,"VERTEX_SHADER");O(this,"FRAGMENT_SHADER");O(this,"STATIC_DRAW");O(this,"COMPILE_STATUS");O(this,"LINK_STATUS");O(this,"DYNAMIC_DRAW");O(this,"COLOR_ATTACHMENT0");O(this,"INVALID_ENUM");O(this,"INVALID_OPERATION");this.gl=i,this.activeTextureUnit=i.getParameter(i.ACTIVE_TEXTURE)-i.TEXTURE0;const o=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(o).fill(void 0).map((h,g)=>(this.activeTexture(g),i.getParameter(i.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=i.isEnabled(i.SCISSOR_TEST);const l=i.getParameter(i.SCISSOR_BOX);this.scissorX=l[0],this.scissorY=l[1],this.scissorWidth=l[2],this.scissorHeight=l[3],this.blendEnabled=i.isEnabled(i.BLEND),this.blendSrcRgb=i.getParameter(i.BLEND_SRC_RGB),this.blendDstRgb=i.getParameter(i.BLEND_DST_RGB),this.blendSrcAlpha=i.getParameter(i.BLEND_SRC_ALPHA),this.blendDstAlpha=i.getParameter(i.BLEND_DST_ALPHA),this.boundArrayBuffer=i.getParameter(i.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=i.getParameter(i.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=i.getParameter(i.CURRENT_PROGRAM),this.canvas=i.canvas,this.MAX_RENDERBUFFER_SIZE=i.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=i.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=i.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=i.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=i.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=i.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=i.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=i.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=i.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=i.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=i.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=i.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=i.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=i.TEXTURE_WRAP_T,this.LINEAR=i.LINEAR,this.CLAMP_TO_EDGE=i.CLAMP_TO_EDGE,this.RGB=i.RGB,this.RGBA=i.RGBA,this.UNSIGNED_BYTE=i.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=i.UNPACK_FLIP_Y_WEBGL,this.FLOAT=i.FLOAT,this.TRIANGLES=i.TRIANGLES,this.UNSIGNED_SHORT=i.UNSIGNED_SHORT,this.ONE=i.ONE,this.ONE_MINUS_SRC_ALPHA=i.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=i.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=i.TRIANGLES,this.UNSIGNED_SHORT=i.UNSIGNED_SHORT,this.VERTEX_SHADER=i.VERTEX_SHADER,this.FRAGMENT_SHADER=i.FRAGMENT_SHADER,this.STATIC_DRAW=i.STATIC_DRAW,this.COMPILE_STATUS=i.COMPILE_STATUS,this.LINK_STATUS=i.LINK_STATUS,this.DYNAMIC_DRAW=i.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=i.COLOR_ATTACHMENT0,this.INVALID_ENUM=i.INVALID_ENUM,this.INVALID_OPERATION=i.INVALID_OPERATION}isWebGl2(){return xR(this.gl)}activeTexture(i){const{gl:o}=this;this.activeTextureUnit!==i&&(o.activeTexture(i+o.TEXTURE0),this.activeTextureUnit=i)}bindTexture(i){const{gl:o,activeTextureUnit:l,texture2dUnits:h}=this;h[l]!==i&&(h[l]=i,o.bindTexture(this.gl.TEXTURE_2D,i))}_getActiveTexture(){const{activeTextureUnit:i,texture2dUnits:o}=this;return o[i]}texParameteri(i,o){const{gl:l,texture2dParams:h}=this,g=this._getActiveTexture();if(!g)throw new Error("No active texture");let v=h.get(g);v||(v={},h.set(g,v)),v[i]!==o&&(v[i]=o,l.texParameteri(l.TEXTURE_2D,i,o))}texImage2D(i,o,l,h,g,v,w,s){const{gl:m}=this;v?m.texImage2D(m.TEXTURE_2D,i,o,l,h,g,v,w,s):m.texImage2D(m.TEXTURE_2D,i,o,l,h,g)}compressedTexImage2D(i,o,l,h,g,v){const{gl:w}=this;w.compressedTexImage2D(w.TEXTURE_2D,i,o,l,h,g,v)}pixelStorei(i,o){const{gl:l}=this;l.pixelStorei(i,o)}generateMipmap(){const{gl:i}=this;i.generateMipmap(i.TEXTURE_2D)}createTexture(){const{gl:i}=this;return i.createTexture()}deleteTexture(i){const{gl:o}=this;i&&this.texture2dParams.delete(i),o.deleteTexture(i)}deleteFramebuffer(i){this.gl.deleteFramebuffer(i)}viewport(i,o,l,h){const{gl:g}=this;g.viewport(i,o,l,h)}clearColor(i,o,l,h){const{gl:g}=this;g.clearColor(i,o,l,h)}setScissorTest(i){const{gl:o,scissorEnabled:l}=this;i!==l&&(i?o.enable(o.SCISSOR_TEST):o.disable(o.SCISSOR_TEST),this.scissorEnabled=i)}scissor(i,o,l,h){const{gl:g,scissorX:v,scissorY:w,scissorWidth:s,scissorHeight:m}=this;(i!==v||o!==w||l!==s||h!==m)&&(g.scissor(i,o,l,h),this.scissorX=i,this.scissorY=o,this.scissorWidth=l,this.scissorHeight=h)}setBlend(i){const{gl:o,blendEnabled:l}=this;i!==l&&(i?o.enable(o.BLEND):o.disable(o.BLEND),this.blendEnabled=i)}blendFunc(i,o){const{gl:l,blendSrcRgb:h,blendDstRgb:g,blendSrcAlpha:v,blendDstAlpha:w}=this;(i!==h||o!==g||i!==v||o!==w)&&(l.blendFunc(i,o),this.blendSrcRgb=i,this.blendDstRgb=o,this.blendSrcAlpha=i,this.blendDstAlpha=o)}createBuffer(){const{gl:i}=this;return i.createBuffer()}createFramebuffer(){const{gl:i}=this;return i.createFramebuffer()}bindFramebuffer(i){const{gl:o}=this;o.bindFramebuffer(o.FRAMEBUFFER,i)}framebufferTexture2D(i,o,l){const{gl:h}=this;h.framebufferTexture2D(h.FRAMEBUFFER,i,h.TEXTURE_2D,o,l)}clear(){const{gl:i}=this;i.clear(i.COLOR_BUFFER_BIT)}arrayBufferData(i,o,l){const{gl:h,boundArrayBuffer:g}=this;g!==i&&(h.bindBuffer(h.ARRAY_BUFFER,i),this.boundArrayBuffer=i),h.bufferData(h.ARRAY_BUFFER,o,l)}elementArrayBufferData(i,o,l){const{gl:h,boundElementArrayBuffer:g}=this;g!==i&&(h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,i),this.boundElementArrayBuffer=i),h.bufferData(h.ELEMENT_ARRAY_BUFFER,o,l)}vertexAttribPointer(i,o,l,h,g,v,w){const{gl:s,boundArrayBuffer:m}=this;m!==i&&(s.bindBuffer(s.ARRAY_BUFFER,i),this.boundArrayBuffer=i),s.vertexAttribPointer(o,l,h,g,v,w)}useProgram(i){const{gl:o,curProgram:l}=this;l!==i&&(o.useProgram(i),this.curProgram=i)}uniform1f(i,o){const{gl:l}=this;l.uniform1f(i,o)}uniform1fv(i,o){const{gl:l}=this;l.uniform1fv(i,o)}uniform1i(i,o){const{gl:l}=this;l.uniform1i(i,o)}uniform1iv(i,o){const{gl:l}=this;l.uniform1iv(i,o)}uniform2f(i,o,l){const{gl:h}=this;h.uniform2f(i,o,l)}uniform2fv(i,o){const{gl:l}=this;l.uniform2fv(i,o)}uniform2i(i,o,l){const{gl:h}=this;h.uniform2i(i,o,l)}uniform2iv(i,o){const{gl:l}=this;l.uniform2iv(i,o)}uniform3f(i,o,l,h){const{gl:g}=this;g.uniform3f(i,o,l,h)}uniform3fv(i,o){const{gl:l}=this;l.uniform3fv(i,o)}uniform3i(i,o,l,h){const{gl:g}=this;g.uniform3i(i,o,l,h)}uniform3iv(i,o){const{gl:l}=this;l.uniform3iv(i,o)}uniform4f(i,o,l,h,g){const{gl:v}=this;v.uniform4f(i,o,l,h,g)}uniform4fv(i,o){const{gl:l}=this;l.uniform4fv(i,o)}uniform4i(i,o,l,h,g){const{gl:v}=this;v.uniform4i(i,o,l,h,g)}uniform4iv(i,o){const{gl:l}=this;l.uniform4iv(i,o)}uniformMatrix2fv(i,o){const{gl:l}=this;l.uniformMatrix2fv(i,!1,o)}uniformMatrix3fv(i,o){const{gl:l}=this;l.uniformMatrix3fv(i,!1,o)}uniformMatrix4fv(i,o){const{gl:l}=this;l.uniformMatrix4fv(i,!1,o)}getParameter(i){const{gl:o}=this;return o.getParameter(i)}drawElements(i,o,l,h){const{gl:g}=this;g.drawElements(i,o,l,h)}getExtension(i){const{gl:o}=this;return o.getExtension(i)}getError(){const{gl:i}=this;return i.getError()}createVertexArray(){const{gl:i}=this;return lt(i instanceof WebGL2RenderingContext),i.createVertexArray()}bindVertexArray(i){const{gl:o}=this;lt(o instanceof WebGL2RenderingContext),o.bindVertexArray(i)}getAttribLocation(i,o){const{gl:l}=this;return l.getAttribLocation(i,o)}getUniformLocation(i,o){const{gl:l}=this;return l.getUniformLocation(i,o)}enableVertexAttribArray(i){const{gl:o}=this;o.enableVertexAttribArray(i)}disableVertexAttribArray(i){const{gl:o}=this;o.disableVertexAttribArray(i)}createShader(i){const{gl:o}=this;return o.createShader(i)}compileShader(i){const{gl:o}=this;o.compileShader(i)}attachShader(i,o){const{gl:l}=this;l.attachShader(i,o)}linkProgram(i){const{gl:o}=this;o.linkProgram(i)}deleteProgram(i){const{gl:o}=this;o.deleteProgram(i)}getShaderParameter(i,o){const{gl:l}=this;return l.getShaderParameter(i,o)}getShaderInfoLog(i){const{gl:o}=this;return o.getShaderInfoLog(i)}createProgram(){const{gl:i}=this;return i.createProgram()}getProgramParameter(i,o){const{gl:l}=this;return l.getProgramParameter(i,o)}getProgramInfoLog(i){const{gl:o}=this;return o.getProgramInfoLog(i)}shaderSource(i,o){const{gl:l}=this;l.shaderSource(i,o)}deleteShader(i){const{gl:o}=this;o.deleteShader(i)}}class lC extends ed{constructor(o,l,h){super(o,l,h);O(this,"framebuffer",null)}async onLoadRequest(){const{glw:o}=this,l=this._nativeCtxTexture=this.createNativeCtxTexture(),{width:h,height:g}=this.textureSource;return this.framebuffer=o.createFramebuffer(),o.texImage2D(0,o.RGBA,h,g,0,o.RGBA,o.UNSIGNED_BYTE,null),this.setTextureMemUse(h*g*4),o.bindFramebuffer(this.framebuffer),o.framebufferTexture2D(o.COLOR_ATTACHMENT0,l,0),o.bindFramebuffer(null),{width:h,height:g}}free(){super.free(),this.glw.deleteFramebuffer(this.framebuffer),this.framebuffer=null}}const SR=24;class wg extends rT{constructor(o){super(o);O(this,"glw");O(this,"system");O(this,"quadBuffer");O(this,"fQuadBuffer");O(this,"uiQuadBuffer");O(this,"renderOps",[]);O(this,"curBufferIdx",0);O(this,"curRenderOp",null);O(this,"rttNodes",[]);O(this,"activeRttNode",null);O(this,"defShaderCtrl");O(this,"defaultShader");O(this,"quadBufferCollection");O(this,"clearColor",{raw:0,normalized:[0,0,0,0]});O(this,"quadBufferUsage",0);O(this,"numQuadsRendered",0);O(this,"renderToTextureActive",!1);this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:l,clearColor:h,bufferMemory:g}=o,v=x_(l,o.forceWebGL2,o.contextSpy),w=this.glw=new wR(v);w.viewport(0,0,l.width,l.height),this.updateClearColor(h),w.setBlend(!0),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),gR(w,g),this.system={parameters:pR(this.glw),extensions:mR(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const s=w.createBuffer();lt(s);const m=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new lT([{buffer:s,attributes:{a_position:{name:"a_position",size:2,type:w.FLOAT,normalized:!1,stride:m,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:w.FLOAT,normalized:!1,stride:m,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:w.UNSIGNED_BYTE,normalized:!0,stride:m,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:w.FLOAT,normalized:!1,stride:m,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:o}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,o.setScissorTest(!1),o.clear()}getShaderManager(){return this.shManager}createCtxTexture(o){return o instanceof Vu?new vR(this.glw,this.txMemManager,o):o instanceof Jh?new lC(this.glw,this.txMemManager,o):new ed(this.glw,this.txMemManager,o)}addQuad(o){const{fQuadBuffer:l,uiQuadBuffer:h}=this;let g=o.texture;if(lt(g!==null,"Texture is required"),o.shaderProps!==null){if(Qh(o.shaderProps,"$dimensions")==!0){const j=o.shaderProps.$dimensions;j.width=o.width,j.height=o.height}Qh(o.shaderProps,"$alpha")===!0&&(o.shaderProps.$alpha=o.alpha)}let{curBufferIdx:v,curRenderOp:w}=this;const s={width:-1,height:-1};s.width=o.width,s.height=o.height;const m=o.shader||this.defaultShader;lt(m.getUniformLocation!==void 0,"Invalid WebGL shader"),this.reuseRenderOp(o)===!1&&(this.newRenderOp(m,o.shaderProps,o.alpha,s,o.clippingRect,v,o.rtt,o.parentHasRenderTexture,o.framebufferDimensions),w=this.curRenderOp,lt(w));let C=0,y=0,x=1,M=1;if(g.type===_n.subTexture){const{x:j,y:H,width:$,height:B}=g.props,{width:te=0,height:X=0}=g.parentTexture.dimensions||{width:0,height:0};C=j/te,x=C+$/te,y=H/X,M=y+B/X,g=g.parentTexture}if(g.type===_n.image&&o.textureOptions!==null&&o.textureOptions.resizeMode!==void 0&&g.dimensions!==null){const j=o.textureOptions.resizeMode,{width:H,height:$}=g.dimensions;if(j.type==="cover"){const B=o.width/H,te=o.height/$,X=Math.max(B,te),Y=1/X;if(X&&B&&B<X){const ee=Y*o.width;C=(1-ee/H)*(j.clipX??.5),x=C+ee/H}if(X&&te&&te<X){const ee=Y*o.height;y=(1-ee/$)*(j.clipY??.5),M=y+ee/$}}}let b=0;o.textureOptions!==null&&(o.textureOptions.flipX===!0&&([C,x]=[x,C]),b=+(o.textureOptions.flipY||!1)),b^+(g.type===_n.renderToTexture)&&([y,M]=[M,y]);const _=g.ctxTexture;lt(_ instanceof ed);const P=this.addTexture(_,v);if(lt(this.curRenderOp!==null),o.renderCoords)l[v++]=o.renderCoords.x1,l[v++]=o.renderCoords.y1,l[v++]=C,l[v++]=y,h[v++]=o.colorTl,l[v++]=P,l[v++]=o.renderCoords.x2,l[v++]=o.renderCoords.y2,l[v++]=x,l[v++]=y,h[v++]=o.colorTr,l[v++]=P,l[v++]=o.renderCoords.x4,l[v++]=o.renderCoords.y4,l[v++]=C,l[v++]=M,h[v++]=o.colorBl,l[v++]=P,l[v++]=o.renderCoords.x3,l[v++]=o.renderCoords.y3,l[v++]=x,l[v++]=M,h[v++]=o.colorBr,l[v++]=P;else if(o.tb!==0||o.tc!==0)l[v++]=o.tx,l[v++]=o.ty,l[v++]=C,l[v++]=y,h[v++]=o.colorTl,l[v++]=P,l[v++]=o.tx+o.width*o.ta,l[v++]=o.ty+o.width*o.tc,l[v++]=x,l[v++]=y,h[v++]=o.colorTr,l[v++]=P,l[v++]=o.tx+o.height*o.tb,l[v++]=o.ty+o.height*o.td,l[v++]=C,l[v++]=M,h[v++]=o.colorBl,l[v++]=P,l[v++]=o.tx+o.width*o.ta+o.height*o.tb,l[v++]=o.ty+o.width*o.tc+o.height*o.td,l[v++]=x,l[v++]=M,h[v++]=o.colorBr,l[v++]=P;else{const j=o.tx+o.width*o.ta,H=o.ty+o.height*o.td;l[v++]=o.tx,l[v++]=o.ty,l[v++]=C,l[v++]=y,h[v++]=o.colorTl,l[v++]=P,l[v++]=j,l[v++]=o.ty,l[v++]=x,l[v++]=y,h[v++]=o.colorTr,l[v++]=P,l[v++]=o.tx,l[v++]=H,l[v++]=C,l[v++]=M,h[v++]=o.colorBl,l[v++]=P,l[v++]=j,l[v++]=H,l[v++]=x,l[v++]=M,h[v++]=o.colorBr,l[v++]=P}this.curRenderOp.length+=SR,this.curRenderOp.numQuads++,this.curBufferIdx=v}newRenderOp(o,l,h,g,v,w,s,m,C){const y=new aT(this.glw,this.options,this.quadBufferCollection,o,l,h,v,g,w,0,s,m,C);this.curRenderOp=y,this.renderOps.push(y)}addTexture(o,l,h){const{curRenderOp:g}=this;lt(g);const v=g.addTexture(o);if(v===4294967295){if(h)throw new Error("Unable to add texture to render op");return this.newRenderOp(g.shader,g.shaderProps,g.alpha,g.dimensions,g.clippingRect,l),this.addTexture(o,l,!0)}return v}reuseRenderOp(o){var m;const{shader:l,shaderProps:h,parentHasRenderTexture:g,rtt:v,clippingRect:w}=o,s=l||this.defaultShader;return!(((m=this.curRenderOp)==null?void 0:m.shader)!==s||k_(this.curRenderOp.clippingRect,w)===!1||g!==void 0||v!==void 0||this.curRenderOp.shader!==this.defaultShader&&(h===null||this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,h)===!1))}addRenderOp(o){this.renderOps.push(o),this.curRenderOp=null}render(o="screen"){const{glw:l,quadBuffer:h}=this,g=new Float32Array(h,0,this.curBufferIdx),v=this.quadBufferCollection.getBuffer("a_position")||null;l.arrayBufferData(v,g,l.STATIC_DRAW);for(let s=0,m=this.renderOps.length;s<m;s++)this.renderOps[s].draw();this.quadBufferUsage=this.curBufferIdx*g.BYTES_PER_ELEMENT;const w=4*(6*g.BYTES_PER_ELEMENT);this.numQuadsRendered=this.quadBufferUsage/w}getQuadCount(){return this.numQuadsRendered}renderToTexture(o){for(let l=0;l<this.rttNodes.length;l++)if(this.rttNodes[l]===o)return;this.insertRTTNodeInOrder(o)}insertRTTNodeInOrder(o){let l=this.rttNodes.length,h=o;for(;h&&h.parent;){const v=this.rttNodes.indexOf(h.parent);if(v!==-1){l=v;break}h=h.parent}const g=this.findMaxChildRTTIndex(o);g!==-1&&(l=Math.max(l,g+1)),this.rttNodes.splice(l,0,o)}findMaxChildRTTIndex(o){let l=-1;const h=g=>{const v=this.rttNodes.indexOf(g);v!==-1&&(l=Math.max(l,v));for(const w of g.children)h(w)};return h(o),l}renderRTTNodes(){const{glw:o}=this;this.stage;for(let h=0;h<this.rttNodes.length;h++){const g=this.rttNodes[h];if(g===void 0||g.hasRTTupdates===!1||g.worldAlpha===0||g.strictBounds===!0&&g.renderState===ho.OutOfBounds||g.texture===null||g.texture.state!=="loaded")continue;this.activeRttNode=g,lt(g.texture,"RTT node missing texture");const v=g.texture.ctxTexture;lt(v instanceof lC),this.renderToTextureActive=!0,o.bindFramebuffer(v.framebuffer),o.viewport(0,0,v.w,v.h),o.clearColor(0,0,0,0),o.clear();for(let w=0;w<g.children.length;w++){const s=g.children[w];s!==void 0&&(this.stage.addQuads(s),s.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,g.hasRTTupdates=!1}const l=this.clearColor.normalized;o.clearColor(l[0],l[1],l[2],l[3]),o.bindFramebuffer(null),o.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(o){const l=this.rttNodes.indexOf(o);l!==-1&&this.rttNodes.splice(l,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}updateClearColor(o){if(this.clearColor.raw===o)return;const l=this.glw,h=Xu(o);l.clearColor(h[0],h[1],h[2],h[3]),this.clearColor={raw:o,normalized:h},l.clear()}}const CR={LINE_FEED:10,CARRIAGE_RETURN:13,SPACE:32,TAB:9,ZERO_WIDTH_SPACE:8203,ZERO_WIDTH_NON_JOINER:8204,ZERO_WIDTH_JOINER:8205,LEFT_TO_RIGHT_MARK:8206,RIGHT_TO_LEFT_MARK:8207,LEFT_TO_RIGHT_EMBEDDING:8234,RIGHT_TO_LEFT_EMBEDDING:8235,POP_DIRECTIONAL_FORMATTING:8236,LEFT_TO_RIGHT_OVERRIDE:8237,RIGHT_TO_LEFT_OVERRIDE:8238,LINE_SEPARATOR:8232,PARAGRAPH_SEPARATOR:8233,OBJECT_REPLACEMENT_CHARACTER:65532,REPLACEMENT_CHARACTER:65533,ZERO_WIDTH_NO_BREAK_SPACE:65279,LEFT_TO_RIGHT_ISOLATE:8294,RIGHT_TO_LEFT_ISOLATE:8295,FIRST_STRONG_ISOLATE:8296,POP_DIRECTIONAL_ISOLATE:8297,INHIBIT_SYMMETRIC_SWAPPING:8298,ACTIVATE_SYMMETRIC_SWAPPING:8299,INHIBIT_ARABIC_FORM_SHAPING:8300,ACTIVATE_ARABIC_FORM_SHAPING:8301,NATIONAL_DIGIT_SHAPES:8302,NOMINAL_DIGIT_SHAPES:8303,LEFT_TO_RIGHT_BOUNDARY:8206,RIGHT_TO_LEFT_BOUNDARY:8207};class TR{}class bR extends TR{constructor(o,l){super();O(this,"data");O(this,"glyphMap");O(this,"kernings");this.data=o,this.glyphMap=l;const h=this.kernings={};o.kernings.forEach(g=>{const v=g.second,w=h[v]=h[v]||{};w[g.first]=g.amount}),this.kernings=h}*shapeText(o,l){var v;let h,g;for(;(h=l.peek())&&!h.done;){const w=h.value,s=this.glyphMap.get(w);if(l.next(),s!==void 0){const m=g!==void 0?(((v=this.kernings[s.id])==null?void 0:v[g])||0)+o.letterSpacing:0;g=s.id,yield{mapped:!0,glyphId:s.id,codepoint:w,cluster:l.lastIndex,xAdvance:s.xadvance+m,yAdvance:0,xOffset:s.xoffset+m,yOffset:s.yoffset,xBearing:0,yBearing:0,width:s.width,height:s.height}}else w===CR.LINE_FEED&&(g=void 0),yield{mapped:!1,codepoint:w,cluster:l.lastIndex}}}}class sg extends sT{constructor(o,l){super(l);O(this,"type");O(this,"texture");O(this,"maxCharHeight",0);O(this,"shaper");O(this,"glyphMap",new Map);O(this,"data");const{atlasUrl:h,atlasDataUrl:g,stage:v}=l;this.type=o;const w=v.renderer;lt(w instanceof wg,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=v.txManager.createTexture("ImageTexture",{src:h,premultiplyAlpha:!1}),v.txManager.loadTexture(this.texture,!0),this.texture.preventCleanup=!0,this.texture.on("loaded",()=>{this.checkLoaded(),v.requestRender()}),ZC(g).then(s=>{var C;this.data=JSON.parse(s),lt(this.data);let m=0;if(this.data.chars.forEach(y=>{this.glyphMap.set(y.id,y);const x=y.yoffset+y.height;x>m&&(m=x)}),this.maxCharHeight=m,this.shaper=new bR(this.data,this.glyphMap),!this.metrics)if((C=this.data)!=null&&C.lightningMetrics){const{ascender:y,descender:x,lineGap:M,unitsPerEm:b}=this.data.lightningMetrics;this.metrics={ascender:y/b,descender:x/b,lineGap:M/b}}else throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);this.checkLoaded()}).catch(console.error)}getAtlasEntry(o){const l=this.glyphMap.get(o);if(l===void 0)throw new Error(`Glyph ${o} not found in font ${this.fontFamily}`);return{x:l.x,y:l.y,width:l.width,height:l.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}const ER=24;function kR(f,i,o,l,h,g,v,w,s){const m=Math.min(Math.max(v.firstLineIdx,0),w.length),C=0,{metrics:y}=o;lt(y,"Font metrics not loaded"),lt(o.data,"Font data not loaded");const x=(y.ascender-y.descender)*f;let M=0;l==="middle"?M=(i-x)/2:l==="bottom"&&(M=i-x);const b=h/g,_=o.data.common.base,j=y.ascender*f-_,H=b+j+m*i+M;if(!(s&&H>=s/g))return{sdfX:C,sdfY:H,lineIndex:m}}class Lu{constructor(i,o=0){O(this,"iterator");O(this,"peekBuffer",[]);O(this,"_lastIndex");this.iterator=i,this.iterator=i,this._lastIndex=o-1,this.peekBuffer=[]}next(){const i=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return i.done?this._lastIndex=-1:this._lastIndex++,i}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const i=this.iterator.next();return this.peekBuffer.push(i),i}get lastIndex(){return this._lastIndex}}function*Du(f,i=0){let o=i;for(;o<f.length;){const l=f.codePointAt(o);if(l===void 0)throw new Error("Invalid Unicode code point");yield l,o+=l<=65535?1:2}}function AR(f,i,o){const l=o.shapeText(i,new Lu(Du(f,0),0));let h=0;for(const g of l)g.mapped&&g.codepoint!==8203&&(h+=g.xAdvance);return h}function IR(f,i,o,l,h,g,v,w,s,m,C,y,x,M,b,_,P,j,H){lt(b,"Font face must be loaded"),lt(b.loaded,"Font face must be loaded"),lt(b.data,"Font face must be loaded"),lt(b.shaper,"Font face must be loaded");const $=w/b.data.info.size,B=s/$,te=g/$,X=m/$,Y=x[f],ee=(Y==null?void 0:Y.codepointIndex)||0,he=(Y==null?void 0:Y.maxX)||0,k=(Y==null?void 0:Y.maxY)||0;let V=he,Z=k,oe=i,K=o,ne=0;const W={codepointIndex:-1,bufferOffset:-1,xStart:-1},J=b.shaper,fe={letterSpacing:X};l.endsWith(" ")&&(l+=" ");let ye=J.shapeText(fe,new Lu(Du(l,ee),ee)),ge,pe=-1;const Ee=[],Re=v/$,z=AR(j,fe,J);let Me=!0;for(;Me;){const ve=(H===0||f+1<H)&&(y!=="both"||P||K+B+b.maxCharHeight<=Re),Ue=ve?te:te-z;let De=0;const We=K+b.maxCharHeight>=M.y1,Xe=K<=M.y2,ze=We&&Xe;for(;(ge=ye.next())&&!ge.done;){const we=ge.value;if(f===x.length)x.push({codepointIndex:we.cluster,maxY:Z,maxX:V});else if(f>x.length)throw new Error("Unexpected lineCache length");if(we.codepoint===32||we.codepoint===10||we.codepoint===8203?W.codepointIndex!==-1&&(W.codepointIndex=-1,De=oe):W.codepointIndex===-1&&(W.codepointIndex=we.cluster,W.bufferOffset=ne,W.xStart=De),we.mapped){const tt=oe+we.xOffset+we.width;if(y!=="none"&&tt>=Ue&&W.codepointIndex!==-1&&W.xStart>0)if(ve){ye=J.shapeText(fe,new Lu(Du(l,W.codepointIndex),W.codepointIndex)),ne=W.bufferOffset;break}else ye=J.shapeText(fe,new Lu(Du(j,0),0)),oe=W.xStart,ne=W.bufferOffset,y="none";else{const et=oe+we.xOffset,Ze=K+we.yOffset;if(ze){pe===-1&&(pe=ne);const it=b.getAtlasEntry(we.glyphId),St=it.x/b.data.common.scaleW,ut=it.y/b.data.common.scaleH,It=it.width/b.data.common.scaleW,je=it.height/b.data.common.scaleH;C[ne++]=et,C[ne++]=Ze,C[ne++]=St,C[ne++]=ut,C[ne++]=et+we.width,C[ne++]=Ze,C[ne++]=St+It,C[ne++]=ut,C[ne++]=et,C[ne++]=Ze+we.height,C[ne++]=St,C[ne++]=ut+je,C[ne++]=et+we.width,C[ne++]=Ze+we.height,C[ne++]=St+It,C[ne++]=ut+je}Z=Math.max(Z,Ze+we.height),V=Math.max(V,et+we.width),oe+=we.xAdvance}}else if(we.codepoint===10){if(ve)break;ye=J.shapeText(fe,new Lu(Du(j,0),0)),y="none"}}pe!==-1&&(Ee.push({bufferStart:pe,bufferEnd:ne}),pe=-1),oe=0,K+=B,f++,W.codepointIndex=-1,De=0,!_&&y==="both"&&K>M.y2||ge&&ge.done?Me=!1:ve||(Me=!1)}if(h==="center"){const ve=y==="none"?V:te;for(let Ue=0;Ue<Ee.length;Ue++){const De=Ee[Ue],We=C[De.bufferEnd-4]-C[De.bufferStart],Xe=(ve-We)/2;for(let ze=De.bufferStart;ze<De.bufferEnd;ze+=4)C[ze]+=Xe}}else if(h==="right"){const ve=y==="none"?V:te;for(let Ue=0;Ue<Ee.length;Ue++){const De=Ee[Ue],We=De.bufferEnd===De.bufferStart?0:C[De.bufferEnd-4]-C[De.bufferStart],Xe=ve-We;for(let ze=De.bufferStart;ze<De.bufferEnd;ze+=4)C[ze]+=Xe}}return lt(ge),{bufferNumFloats:ne,bufferNumQuads:ne/16,layoutNumCharacters:ge.done?l.length-ee:ge.value.cluster-ee+1,fullyProcessed:!!ge.done,maxX:V,maxY:Z,numLines:x.length}}function MR(f,i){return Math.ceil(f/i)*i}function _R(f,i){return Math.floor(f/i)*i}function RR(f,i,o,l,h,g,v,w){const{screen:s,sdf:m}=f;if(!I_(v))s.x1=0,s.y1=0,s.x2=0,s.y2=0,m.x1=0,m.y1=0,m.x2=0,m.y2=0,f.numLines=0,f.firstLineIdx=0;else{const C=v.x1-i,y=C+(v.x2-v.x1),x=v.y1-o+l,M=_R(x-g,h||1),b=MR(x+(v.y2-v.y1)+g,h||1);s.x1=C,s.y1=M,s.x2=y,s.y2=b,m.x1=C/w,m.y1=M/w,m.x2=y/w,m.y2=b/w,f.numLines=Math.ceil((b-M)/h),f.firstLineIdx=h?Math.floor(M/h):0}f.valid=!0}function uT(f,i){return i*(f.ascender-f.descender+f.lineGap)}const LR={x:0,y:0,width:0,height:0};class DR extends xg{constructor(o){super(o);O(this,"ssdfFontFamilies",{});O(this,"msdfFontFamilies",{});O(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);O(this,"sdfShader");O(this,"rendererBounds");O(this,"type","sdf");this.sdfShader=this.stage.shManager.loadShader("SdfShader",{transform:new Float32Array,color:0,size:0,scrollY:0,distanceRange:0,debug:!1}).shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(o,l)=>{o.props.fontFamily=l,this.releaseFontFace(o),this.invalidateLayoutCache(o)},fontWeight:(o,l)=>{o.props.fontWeight=l,this.releaseFontFace(o),this.invalidateLayoutCache(o)},fontStyle:(o,l)=>{o.props.fontStyle=l,this.releaseFontFace(o),this.invalidateLayoutCache(o)},fontStretch:(o,l)=>{o.props.fontStretch=l,this.releaseFontFace(o),this.invalidateLayoutCache(o)},fontSize:(o,l)=>{o.props.fontSize=l,this.invalidateLayoutCache(o)},text:(o,l)=>{o.props.text=l,this.invalidateLayoutCache(o)},textAlign:(o,l)=>{o.props.textAlign=l,this.invalidateLayoutCache(o)},color:(o,l)=>{o.props.color=l},x:(o,l)=>{o.props.x=l,o.elementBounds.valid&&(this.setElementBoundsX(o),!o.renderWindow.valid&&Rm(o.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(o))},y:(o,l)=>{o.props.y=l,o.elementBounds.valid&&(this.setElementBoundsY(o),!o.renderWindow.valid&&Rm(o.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(o))},contain:(o,l)=>{o.props.contain=l,this.invalidateLayoutCache(o)},width:(o,l)=>{o.props.width=l,o.props.contain!=="none"&&this.invalidateLayoutCache(o)},height:(o,l)=>{o.props.height=l,o.props.contain==="both"&&this.invalidateLayoutCache(o)},offsetY:(o,l)=>{o.props.offsetY=l,this.invalidateLayoutCache(o)},scrollable:(o,l)=>{o.props.scrollable=l,this.invalidateLayoutCache(o)},scrollY:(o,l)=>{o.props.scrollY=l,this.scheduleUpdateState(o)},letterSpacing:(o,l)=>{o.props.letterSpacing=l,this.invalidateLayoutCache(o)},lineHeight:(o,l)=>{o.props.lineHeight=l,o.resLineHeight=void 0,this.invalidateLayoutCache(o)},maxLines:(o,l)=>{o.props.maxLines=l,this.invalidateLayoutCache(o)},textBaseline:(o,l)=>{o.props.textBaseline=l,this.invalidateLayoutCache(o)},verticalAlign:(o,l)=>{o.props.verticalAlign=l,this.invalidateLayoutCache(o)},overflowSuffix:(o,l)=>{o.props.overflowSuffix=l,this.invalidateLayoutCache(o)},debug:(o,l)=>{o.props.debug=l}}}canRenderFont(o){const{fontFamily:l}=o;return l in this.ssdfFontFamilies||l in this.msdfFontFamilies||l==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(o){return o instanceof sg}addFontFace(o){lt(o instanceof sg);const l=o.fontFamily,h=o.type==="ssdf"?this.ssdfFontFamilies:o.type==="msdf"?this.msdfFontFamilies:void 0;if(!h){console.warn(`Invalid font face type: ${o.type}`);return}let g=h[l];g||(g=new Set,h[l]=g),g.add(o)}createState(o){return{props:o,status:"initialState",updateScheduled:!1,emitter:new Cr,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(o){let{trFontFace:l}=o;const{textH:h,lineCache:g,debugData:v,forceFullLayoutCalc:w}=o;if(v.updateCount++,o.status==="initialState"&&this.setStatus(o,"loading"),l===void 0){if(l=this.resolveFontFace(o.props),o.trFontFace=l,l===void 0){const J=`SdfTextRenderer: Could not resolve font face for family: '${o.props.fontFamily}'`;console.error(J),this.setStatus(o,"failed",new Error(J));return}l.texture.setRenderableOwner(o,!0)}if(l.loaded===!1){l.once("loaded",()=>{this.scheduleUpdateState(o)});return}lt(l.data,"Font face data should be loaded"),lt(l.metrics,"Font face metrics should be loaded");const{text:s,fontSize:m,x:C,y,contain:x,width:M,height:b,verticalAlign:_,scrollable:P,overflowSuffix:j,maxLines:H}=o.props,$=x==="both"&&P?o.props.scrollY:0,{renderWindow:B}=o,te=l.data.info.size,X=m/te;let Y=o.resLineHeight;if(Y===void 0){const J=o.props.lineHeight;J===void 0?Y=uT(l.metrics,m):Y=J,o.resLineHeight=Y}const ee=Y/X;o.distanceRange=X*l.data.distanceField.distanceRange;const he=s.length*ER;let k=o.vertexBuffer;(!k||k.length<he)&&(k=new Float32Array(he*2));const V=o.elementBounds;if(V.valid||(this.setElementBoundsX(o),this.setElementBoundsY(o),V.valid=!0),!w&&B.valid){const J=B.screen;if(C+J.x1<=V.x1&&C+J.x2>=V.x2&&y-$+J.y1<=V.y1&&y-$+J.y2>=V.y2){this.setStatus(o,"loaded");return}B.valid=!1,this.setStatus(o,"loading")}const{offsetY:Z,textAlign:oe}=o.props;if(!B.valid){if(!Rm(V,this.rendererBounds))return;RR(B,C,y,$,Y,x==="both"?V.y2-V.y1:0,V,X)}const K=kR(te,ee,l,_,Z,X,B,g,h);if(!K){this.setStatus(o,"loaded");return}const{letterSpacing:ne}=o.props,W=IR(K.lineIndex,K.sdfX,K.sdfY,s,oe,M,b,m,Y,ne,k,x,g,B.sdf,l,w,P,j,H);o.bufferUploaded=!1,o.bufferNumFloats=W.bufferNumFloats,o.bufferNumQuads=W.bufferNumQuads,o.vertexBuffer=k,o.renderWindow=B,v.lastLayoutNumCharacters=W.layoutNumCharacters,v.bufferSize=k.byteLength,W.fullyProcessed&&(o.textW=W.maxX*X,o.textH=W.numLines*ee*X),this.setStatus(o,"loaded")}renderQuads(o,l,h,g,v,w){var V,Z;if(!o.vertexBuffer)return;const s=this.stage.renderer;lt(s instanceof wg);const{fontSize:m,color:C,contain:y,scrollable:x,zIndex:M,debug:b}=o.props,_=y==="both"&&x?o.props.scrollY:0,{textW:P=0,textH:j=0,distanceRange:H,vertexBuffer:$,bufferUploaded:B,trFontFace:te,elementBounds:X}=o;let{webGlBuffers:Y}=o;if(!Y){const oe=s.glw,K=4*Float32Array.BYTES_PER_ELEMENT,ne=oe.createBuffer();lt(ne),o.webGlBuffers=new lT([{buffer:ne,attributes:{a_position:{name:"a_position",size:2,type:oe.FLOAT,normalized:!1,stride:K,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:oe.FLOAT,normalized:!1,stride:K,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),o.bufferUploaded=!1,lt(o.webGlBuffers),Y=o.webGlBuffers}if(!B){const oe=s.glw,K=(Y==null?void 0:Y.getBuffer("a_textureCoordinate"))??null;oe.arrayBufferData(K,$,oe.STATIC_DRAW),o.bufferUploaded=!0}if(lt(te),x&&y==="both"){lt(X.valid);const oe=E_(X,LR);h.valid?(o.clippingRect.valid=!0,h=qC(h,oe,o.clippingRect)):(o.clippingRect.valid=!0,h=YC(oe,o.clippingRect))}const ee=new aT(s.glw,s.options,Y,this.sdfShader,{transform:l.getFloatArr(),color:w_(C,g),size:m/(((V=te.data)==null?void 0:V.info.size)||0),scrollY:_,distanceRange:H,debug:b.sdfShaderDebug},g,h,{height:j,width:P},0,M,!1,v,w),he=(Z=o.trFontFace)==null?void 0:Z.texture;lt(he);const k=he.ctxTexture;ee.addTexture(k),ee.length=o.bufferNumFloats,ee.numQuads=o.bufferNumQuads,s.addRenderOp(ee)}setIsRenderable(o,l){var h;super.setIsRenderable(o,l),(h=o.trFontFace)==null||h.texture.setRenderableOwner(o,l)}destroyState(o){var l;super.destroyState(o),(l=o.trFontFace)==null||l.texture.setRenderableOwner(o,!1)}resolveFontFace(o){return this.stage.fontManager.resolveFontFace(this.fontFamilyArray,o,"sdf")}releaseFontFace(o){o.resLineHeight=void 0,o.trFontFace&&(o.trFontFace.texture.setRenderableOwner(o,!1),o.trFontFace=void 0)}invalidateLayoutCache(o){o.renderWindow.valid=!1,o.elementBounds.valid=!1,o.textH=void 0,o.textW=void 0,o.lineCache=[],this.setStatus(o,"loading"),this.scheduleUpdateState(o)}setElementBoundsX(o){const{x:l,contain:h,width:g}=o.props,{elementBounds:v}=o;v.x1=l,v.x2=h!=="none"?l+g:1/0}setElementBoundsY(o){const{y:l,contain:h,height:g}=o.props,{elementBounds:v}=o;v.y1=l,v.y2=h==="both"?l+g:1/0}}function uC(f){return f===""||f==="​"}function PR(f,i,o){if(i.metrics)return i.metrics;const l=f.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${i.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let h;return l.actualBoundingBoxDescent&&l.actualBoundingBoxAscent?h={ascender:l.actualBoundingBoxAscent/o,descender:-l.actualBoundingBoxDescent/o,lineGap:.2}:h={ascender:.8,descender:-.2,lineGap:.2},i.metrics=h,h}const fC=2048;function cC(f,i,o,l,h){const g=f!=="bottom"?.5*i:0;return o*(l-1)+g+Math.max(o,i)+(h||0)}class OR{constructor(i,o){O(this,"_canvas");O(this,"_context");O(this,"_settings");this._canvas=i,this._context=o,this._settings=this.mergeDefaults({})}set settings(i){this._settings=this.mergeDefaults(i)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const i=[this._settings.fontFamily],o=[];for(let l=0,h=i.length;l<h;l++)i[l]==="serif"||i[l]==="sans-serif"?o.push(i[l]):o.push(`"${i[l]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${o.join(",")}`}_load(){if(document.fonts){const i=this._getFontSetting();try{if(!document.fonts.check(i,this._settings.text))return document.fonts.load(i,this._settings.text).catch(o=>{console.warn("[Lightning] Font load error",o,i)}).then(()=>{document.fonts.check(i,this._settings.text)||console.warn("[Lightning] Font not found",i)})}catch{console.warn("[Lightning] Can't check font loading for "+i)}}}calculateRenderInfo(){const i={},o=this.getPrecision(),l=this._settings.paddingLeft*o,h=this._settings.paddingRight*o,g=this._settings.fontSize*o;let v=this._settings.offsetY===null?null:this._settings.offsetY*o;const w=this._settings.w*o,s=this._settings.h*o;let m=this._settings.wordWrapWidth*o;const C=this._settings.cutSx*o,y=this._settings.cutEx*o,x=this._settings.cutSy*o,M=this._settings.cutEy*o,b=(this._settings.letterSpacing||0)*o,_=this._settings.textIndent*o,P=this._settings.trFontFace;this.setFontProperties(),lt(P);const j=PR(this._context,P,g),H=uT(j,g)*o,$=this._settings.lineHeight!==null?this._settings.lineHeight*o:H,B=this._settings.maxHeight,te=B!==null&&$>0?Math.floor(B/$):0,X=this._settings.maxLines,Y=te>0&&X>0?Math.min(te,X):Math.max(te,X);let ee=w||2048/this.getPrecision(),he=ee-l;if(he<10&&(ee+=10-he,he=10),m||(m=he),this._settings.textOverflow&&!this._settings.wordWrap){let ne;switch(this._settings.textOverflow){case"clip":ne="";break;case"ellipsis":ne=this._settings.overflowSuffix;break;default:ne=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,m-_,ne)}let k;if(this._settings.wordWrap)k=this.wrapText(this._settings.text,m,b,_);else{k={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const ne=k.l.length;for(let W=0;W<ne-1;W++)k.n.push(W)}let V=k.l;if(Y&&V.length>Y){const ne=V.slice(0,Y);let W=null;if(this._settings.overflowSuffix){const pe=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,Ee=this.wrapText(ne[ne.length-1],m-pe,b,_);ne[ne.length-1]=`${Ee.l[0]}${this._settings.overflowSuffix}`,W=[Ee.l.length>1?Ee.l[1]:""]}else W=[""];let J;const fe=V.length;let ye=0;const ge=k.n.length;for(J=Y;J<fe;J++)W[ye]+=`${W[ye]?" ":""}${V[J]}`,J+1<ge&&k.n[J+1]&&ye++;i.remainingText=W.join(`
`),i.moreTextLines=!0,V=ne}else i.moreTextLines=!1,i.remainingText="";let Z=0;const oe=[];for(let ne=0;ne<V.length;ne++){const W=this.measureText(V[ne],b)+(ne===0?_:0);oe.push(W),Z=Math.max(Z,W)}i.lineWidths=oe,w||(ee=Z+l+h,he=Z),this._settings.wordWrap&&w>Z&&this._settings.textAlign==="left"&&V.length===1&&(ee=Z+l+h);let K;return s?K=s:K=cC(this._settings.textBaseline,g,$,V.length,v),v===null&&(v=g),i.w=ee,i.h=K,i.lines=V,i.precision=o,ee||(ee=1),K||(K=1),(C||y)&&(ee=Math.min(ee,y-C)),(x||M)&&(K=Math.min(K,M-x)),i.width=ee,i.innerWidth=he,i.height=K,i.fontSize=g,i.cutSx=C,i.cutSy=x,i.cutEx=y,i.cutEy=M,i.lineHeight=$,i.defLineHeight=H,i.lineWidths=oe,i.offsetY=v,i.paddingLeft=l,i.paddingRight=h,i.letterSpacing=b,i.textIndent=_,i.metrics=j,i}draw(i,o){const l=this.getPrecision(),h=(o==null?void 0:o.lines)||i.lines,g=(o==null?void 0:o.lineWidths)||i.lineWidths,v=o?cC(this._settings.textBaseline,i.fontSize,i.lineHeight,o.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*l):i.height;this._canvas.width=Math.min(Math.ceil(i.width+this._settings.textRenderIssueMargin),fC),this._canvas.height=Math.min(Math.ceil(v),fC),this.setFontProperties(),i.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(i.cutSx||i.cutSy)&&this._context.translate(-i.cutSx,-i.cutSy);let w,s;const m=[],{metrics:C}=i,y=C?C.ascender*i.fontSize:i.fontSize,x=(C.ascender-C.descender)*i.fontSize;for(let b=0,_=h.length;b<_;b++)w=b===0?i.textIndent:0,s=b*i.lineHeight+y,this._settings.verticalAlign=="middle"?s+=(i.lineHeight-x)/2:this._settings.verticalAlign=="bottom"&&(s+=i.lineHeight-x),this._settings.textAlign==="right"?w+=i.innerWidth-g[b]:this._settings.textAlign==="center"&&(w+=(i.innerWidth-g[b])/2),w+=i.paddingLeft,m.push({text:h[b],x:w,y:s,w:g[b]});if(this._settings.highlight){const b=this._settings.highlightColor,_=this._settings.highlightHeight*l||i.fontSize*1.5,P=this._settings.highlightOffset*l,j=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*l:i.paddingLeft,H=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*l:i.paddingRight;this._context.fillStyle=_m(b);for(let $=0;$<m.length;$++){const B=m[$];this._context.fillRect(B.x-j,B.y-i.offsetY+P,B.w+H+j,_)}}let M=null;this._settings.shadow&&(M=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=_m(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*l,this._context.shadowOffsetY=this._settings.shadowOffsetY*l,this._context.shadowBlur=this._settings.shadowBlur*l),this._context.fillStyle=_m(this._settings.textColor);for(let b=0,_=m.length;b<_;b++){const P=m[b];if(i.letterSpacing===0)this._context.fillText(P.text,P.x,P.y);else{const j=P.text.split("");let H=P.x;for(let $=0,B=j.length;$<B;$++)this._context.fillText(j[$],H,P.y),H+=this.measureText(j[$],i.letterSpacing)}}M&&(this._context.shadowColor=M[0],this._context.shadowOffsetX=M[1],this._context.shadowOffsetY=M[2],this._context.shadowBlur=M[3]),(i.cutSx||i.cutSy)&&this._context.translate(i.cutSx,i.cutSy)}wrapWord(i,o,l){const h=this._context.measureText(l).width,g=i.length,v=this._context.measureText(i).width;if(v<=o)return i;let w=Math.floor(o*g/v),s=this._context.measureText(i.substring(0,w)).width+h;if(s>o)for(;w>0&&(s=this._context.measureText(i.substring(0,w)).width+h,s>o);)w-=1;else for(;w<g;)if(s=this._context.measureText(i.substring(0,w)).width+h,s<o)w+=1;else{w-=1;break}return i.substring(0,w)+(o>=h?l:"")}wrapText(i,o,l,h=0){const g=/ |\u200B/g,v=i.split(/\r?\n/g);let w=[];const s=[];for(let m=0;m<v.length;m++){const C=[];let y="",x=o-h;const M=v[m].split(g),b=v[m].match(g)||[];for(let _=0;_<M.length;_++){const P=b[_-1]||"",j=M[_],H=this.measureText(j,l),$=uC(P)?H:H+this.measureText(P,l);_===0||$>x?(_>0&&(C.push(y),y=""),y+=j,x=o-H-(_===0?h:0)):(x-=$,y+=P+j)}C.push(y),y="",w=w.concat(C),m<v.length-1&&s.push(w.length)}return{l:w,n:s}}measureText(i,o=0){return o?i.split("").reduce((l,h)=>uC(h)?l:l+this._context.measureText(h).width+o,0):this._context.measureText(i).width}mergeDefaults(i){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...i}}}const hC=typeof self>"u"?globalThis:self;var zC;const dC=((zC=hC.document)==null?void 0:zC.fonts)||hC.fonts;function NR(f){const{fontFamily:i,fontStyle:o,fontWeight:l,fontStretch:h,fontSize:g}=f;return[o,l,h,`${g}px`,i].join(" ")}class pC extends xg{constructor(o){super(o);O(this,"canvas");O(this,"context");O(this,"fontFamilies",{});O(this,"fontFamilyArray",[this.fontFamilies]);O(this,"type","canvas");O(this,"loadFont",o=>{const l=NR(o.props),h=this.stage.fontManager.resolveFontFace(this.fontFamilyArray,o.props,"canvas");if(lt(h,`Could not resolve font face for ${l}`),o.fontInfo={fontFace:h,cssString:l,loaded:!1},!o.fontInfo.loaded){dC.load(l).then(this.onFontLoaded.bind(this,o,l)).catch(this.onFontLoadError.bind(this,o,l));return}});typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let l=this.canvas.getContext("2d",{willReadFrequently:!0});l||(this.canvas=document.createElement("canvas"),l=this.canvas.getContext("2d",{willReadFrequently:!0})),lt(l),this.context=l,this.addFontFace(new Vh({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(o,l)=>{o.props.fontFamily=l,o.fontInfo=void 0,this.invalidateLayoutCache(o)},fontWeight:(o,l)=>{o.props.fontWeight=l,o.fontInfo=void 0,this.invalidateLayoutCache(o)},fontStyle:(o,l)=>{o.props.fontStyle=l,o.fontInfo=void 0,this.invalidateLayoutCache(o)},fontStretch:(o,l)=>{o.props.fontStretch=l,o.fontInfo=void 0,this.invalidateLayoutCache(o)},fontSize:(o,l)=>{o.props.fontSize=l,o.fontInfo=void 0,this.invalidateLayoutCache(o)},text:(o,l)=>{o.props.text=l,this.invalidateLayoutCache(o)},textAlign:(o,l)=>{o.props.textAlign=l,this.invalidateLayoutCache(o)},color:(o,l)=>{o.props.color=l,this.invalidateLayoutCache(o)},x:(o,l)=>{o.props.x=l},y:(o,l)=>{o.props.y=l},contain:(o,l)=>{o.props.contain=l,this.invalidateLayoutCache(o)},width:(o,l)=>{o.props.width=l,o.props.contain!=="none"&&this.invalidateLayoutCache(o)},height:(o,l)=>{o.props.height=l,o.props.contain==="both"&&this.invalidateLayoutCache(o)},offsetY:(o,l)=>{o.props.offsetY=l,this.invalidateLayoutCache(o)},scrollY:(o,l)=>{o.props.scrollY=l},letterSpacing:(o,l)=>{o.props.letterSpacing=l,this.invalidateLayoutCache(o)},lineHeight:(o,l)=>{o.props.lineHeight=l,this.invalidateLayoutCache(o)},maxLines:(o,l)=>{o.props.maxLines=l,this.invalidateLayoutCache(o)},textBaseline:(o,l)=>{o.props.textBaseline=l,this.invalidateLayoutCache(o)},verticalAlign:(o,l)=>{o.props.verticalAlign=l,this.invalidateLayoutCache(o)},overflowSuffix:(o,l)=>{o.props.overflowSuffix=l,this.invalidateLayoutCache(o)}}}canRenderFont(o){return!0}isFontFaceSupported(o){return o instanceof Vh}addFontFace(o){lt(o instanceof Vh);const l=o.fontFamily;l!=="sans-serif"&&dC.add(o.fontFace);let h=this.fontFamilies[l];h||(h=new Set,this.fontFamilies[l]=h),h.add(o)}createState(o,l){return{node:l,props:o,status:"initialState",updateScheduled:!1,emitter:new Cr,textureNode:void 0,lightning2TextRenderer:new OR(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(o){if(o.status==="initialState"&&this.setStatus(o,"loading"),o.status!=="loaded"){if(!o.fontInfo)return this.loadFont(o);o.fontInfo.loaded&&(o.renderInfo||(o.renderInfo=this.calculateRenderInfo(o),o.textH=o.renderInfo.lineHeight*o.renderInfo.lines.length,o.textW=o.renderInfo.width,this.renderSingleCanvasPage(o)))}}renderSingleCanvasPage(o){lt(o.renderInfo);const l=o.node,h=this.stage.txManager.createTexture("ImageTexture",{premultiplyAlpha:!0,src:(function(g,v){return lt(v),g.draw(v,{lines:v.lines,lineWidths:v.lineWidths}),this.canvas.width===0||this.canvas.height===0?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}).bind(this,o.lightning2TextRenderer,o.renderInfo)});if(o.textureNode)o.textureNode.texture=h,o.textureNode.alpha=nC(o.props.color);else{const g=this.stage.createNode({parent:l,texture:h,autosize:!0,alpha:nC(o.props.color)});o.textureNode=g}this.setStatus(o,"loaded")}calculateRenderInfo(o){var l;return o.lightning2TextRenderer.settings={text:o.props.text,textAlign:o.props.textAlign,fontFamily:o.props.fontFamily,trFontFace:(l=o.fontInfo)==null?void 0:l.fontFace,fontSize:o.props.fontSize,fontStyle:[o.props.fontStretch,o.props.fontStyle,o.props.fontWeight].join(" "),textColor:Xu(o.props.color),offsetY:o.props.offsetY,wordWrap:o.props.contain!=="none",wordWrapWidth:o.props.contain==="none"?void 0:o.props.width,letterSpacing:o.props.letterSpacing,lineHeight:o.props.lineHeight??null,maxLines:o.props.maxLines,maxHeight:o.props.contain==="both"?o.props.height-o.props.offsetY:null,textBaseline:o.props.textBaseline,verticalAlign:o.props.verticalAlign,overflowSuffix:o.props.overflowSuffix,w:o.props.contain!=="none"?o.props.width:void 0},o.renderInfo=o.lightning2TextRenderer.calculateRenderInfo(),o.renderInfo}renderQuads(){}destroyState(o){o.status!=="destroyed"&&(super.destroyState(o),o.textureNode&&(o.textureNode.destroy(),delete o.textureNode),delete o.renderInfo)}invalidateLayoutCache(o){o.renderInfo=void 0,this.setStatus(o,"loading"),this.scheduleUpdateState(o)}onFontLoaded(o,l){var h;l!==((h=o.fontInfo)==null?void 0:h.cssString)||!o.fontInfo||(o.fontInfo.loaded=!0,this.scheduleUpdateState(o))}onFontLoadError(o,l,h){var g;l!==((g=o.fontInfo)==null?void 0:g.cssString)||!o.fontInfo||(o.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${o.fontInfo.cssString}'`,h),this.scheduleUpdateState(o))}}const fT={isWhite:!0,a:1,r:255,g:255,b:255};function Nm(f){if(f===4294967295)return fT;const i=(f>>>24&255)/255,o=f>>>16&255&255,l=f>>>8&255&255,h=f&255&255;return{isWhite:!1,a:i,r:h,g:l,b:o}}function cT(f){if(f===4294967295)return fT;const i=f>>>24&255,o=f>>>16&255&255,l=f>>>8&255&255,h=(f&255&255)/255;return{isWhite:!1,r:i,g:o,b:l,a:h}}function Ka({a:f,r:i,g:o,b:l}){return`rgba(${i},${o},${l},${f})`}class UR extends iT{constructor(){super(...arguments);O(this,"image");O(this,"tintCache")}load(){this.textureSource.setState("loading"),this.onLoadRequest().then(o=>{this.textureSource.setState("loaded",o),this.textureSource.freeTextureData(),this.updateMemSize()}).catch(o=>{this.textureSource.setState("failed",o),this.textureSource.freeTextureData()})}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0),this.textureSource.freeTextureData()}updateMemSize(){const o=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:l,height:h}=this.textureSource.dimensions;this.setTextureMemUse(l*h*o)}}hasImage(){return this.image!==void 0}getImage(o){var v;const l=this.image;if(lt(l,"Attempt to get unloaded image texture"),o.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),l;const h=Ka(o);if(((v=this.tintCache)==null?void 0:v.key)===h)return this.tintCache.image;const g=this.tintTexture(l,h);return this.tintCache={key:h,image:g},this.updateMemSize(),g}tintTexture(o,l){const{width:h,height:g}=o,v=document.createElement("canvas");v.width=h,v.height=g;const w=v.getContext("2d");return w&&(w.fillStyle=l,w.globalCompositeOperation="copy",w.fillRect(0,0,h,g),w.globalCompositeOperation="multiply",w.drawImage(o,0,0,h,g,0,0,h,g),w.globalCompositeOperation="destination-in",w.drawImage(o,0,0,h,g,0,0,h,g)),v}async onLoadRequest(){var l,h;lt((h=(l=this.textureSource)==null?void 0:l.textureData)==null?void 0:h.data,"Texture data is null");const{data:o}=this.textureSource.textureData;if(o instanceof ImageData){const g=document.createElement("canvas");g.width=o.width,g.height=o.height;const v=g.getContext("2d");return v&&v.putImageData(o,0,0),this.image=g,{width:o.width,height:o.height}}else if(typeof ImageBitmap<"u"&&o instanceof ImageBitmap||o instanceof HTMLImageElement)return this.image=o,{width:o.width,height:o.height};return{width:0,height:0}}}function BR(f){var i,o;if(f.shader instanceof cd){const l=f.shader.shType;if(l===tR)return((i=f.shaderProps)==null?void 0:i.radius)??0;if(l==="DynamicShader"){const h=(o=f.shaderProps)==null?void 0:o.effects;if(h){const g=h.find(v=>{var w;return v.type==="radius"&&((w=v==null?void 0:v.props)==null?void 0:w.radius)});return g&&g.type==="radius"&&g.props.radius||0}}}return 0}function Su(f,i=""){var o;if(f.shader instanceof cd&&f.shader.shType==="DynamicShader"){const h=(o=f.shaderProps)==null?void 0:o.effects;if(h&&h.length){const g=h.find(v=>v.type===`border${i}`&&v.props&&v.props.width);return g&&g.props}}}function mC(f,i,o,l,h){if(Object.getPrototypeOf(this).roundRect)this.roundRect(f,i,o,l,h);else{const v=s=>{const m=Math.min(o/2,l/2),C=s.topLeft+s.topRight+s.bottomRight+s.bottomLeft;if(C>o||C>l){const y=m/Math.max(s.topLeft,s.topRight,s.bottomRight,s.bottomLeft);s.topLeft*=y,s.topRight*=y,s.bottomRight*=y,s.bottomLeft*=y}},w=typeof h=="number"?{topLeft:h,topRight:h,bottomRight:h,bottomLeft:h}:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,...h};v(w),this.moveTo(f+w.topLeft,i),this.lineTo(f+o-w.topRight,i),this.ellipse(f+o-w.topRight,i+w.topRight,w.topRight,w.topRight,0,1.5*Math.PI,2*Math.PI),this.lineTo(f+o,i+l-w.bottomRight),this.ellipse(f+o-w.bottomRight,i+l-w.bottomRight,w.bottomRight,w.bottomRight,0,0,.5*Math.PI),this.lineTo(f+w.bottomLeft,i+l),this.ellipse(f+w.bottomLeft,i+l-w.bottomLeft,w.bottomLeft,w.bottomLeft,0,.5*Math.PI,Math.PI),this.lineTo(f,i+w.topLeft),this.ellipse(f+w.topLeft,i+w.topLeft,w.topLeft,w.topLeft,0,Math.PI,1.5*Math.PI)}}function Rh(f,i,o,l,h,g=0,v,w){if(!g)return;let s,m=0,C,y=0;switch(w){case"Top":s=i,m=o,C=l+i,y=o;break;case"Right":s=i+l,m=o,C=i+l,y=o+h;break;case"Bottom":s=i,m=o+h,C=i+l,y=o+h;break;case"Left":s=i,m=o,C=i,y=o+h;break}f.beginPath(),f.lineWidth=g,f.strokeStyle=Ka(cT(v??0)),f.moveTo(s,m),f.lineTo(C,y),f.stroke()}class jR extends rT{constructor(o){super(o);O(this,"context");O(this,"canvas");O(this,"pixelRatio");O(this,"clearColor");O(this,"renderToTextureActive",!1);O(this,"activeRttNode",null);O(this,"defShaderCtr");this.mode="canvas",this.shManager.renderer=this;const{canvas:l,pixelRatio:h,clearColor:g}=o;this.canvas=l,this.context=l.getContext("2d"),this.pixelRatio=h,this.clearColor=g?tC(g):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new cd("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const o=this.context;if(this.clearColor){const[l,h,g,v]=this.clearColor;o.fillStyle=`rgba(${l}, ${h}, ${g}, ${v/255})`,o.fillRect(0,0,this.canvas.width,this.canvas.height)}o.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(o){const l=this.context,{tx:h,ty:g,width:v,height:w,alpha:s,colorTl:m,colorTr:C,colorBr:y,ta:x,tb:M,tc:b,td:_,clippingRect:P}=o;let j=o.texture,H,$;const B=j==null?void 0:j.type;if(lt(B,"Texture type is not defined"),B!==_n.image&&B!==_n.color&&B!==_n.subTexture&&B!==_n.noise||j&&(j instanceof Vu&&($=j.props,j=j.parentTexture),H=j.ctxTexture,j.state==="freed"||j.state!=="loaded"))return;const te=Nm(m),X=x!==1,Y=P.width!==0&&P.height!==0,ee=m!==C||m!==y,he=!!o.shader,k=he?BR(o):0,V=he?Su(o):void 0;if((X||Y||k)&&l.save(),Y){const Z=new Path2D,{x:oe,y:K,width:ne,height:W}=P;Z.rect(oe,K,ne,W),l.clip(Z)}if(X){const Z=this.pixelRatio;l.setTransform(x,b,M,_,h*Z,g*Z),l.scale(Z,Z),l.translate(-h,-g)}if(k){const Z=new Path2D;mC.call(Z,h,g,v,w,k),l.clip(Z)}if((B===_n.image||B===_n.subTexture||B===_n.noise)&&H){const Z=H.getImage(te);if(l.globalAlpha=te.a??s,$)l.drawImage(Z,$.x,$.y,$.width,$.height,h,g,v,w);else try{l.drawImage(Z,h,g,v,w)}catch{}l.globalAlpha=1}else if(B===_n.color&&ee){let Z=h,oe=g,K;m===C?(Z=h,oe=g+w,K=Nm(y)):(Z=h+v,oe=g,K=Nm(C));const ne=l.createLinearGradient(h,g,Z,oe);ne.addColorStop(0,Ka(te)),ne.addColorStop(1,Ka(K)),l.fillStyle=ne,l.fillRect(h,g,v,w)}else B===_n.color&&(l.fillStyle=Ka(te),l.fillRect(h,g,v,w));if(V&&V.width){const Z=V.width,oe=V.width/2,K=Ka(cT(V.color??0));l.beginPath(),l.lineWidth=Z,l.strokeStyle=K,l.globalAlpha=s,k?(mC.call(l,h+oe,g+oe,v-Z,w-Z,k),l.stroke()):l.strokeRect(h+oe,g+oe,v-Z,w-Z),l.globalAlpha=1}else if(he){const Z=Su(o,"Top"),oe=Su(o,"Right"),K=Su(o,"Bottom"),ne=Su(o,"Left");Z&&Rh(l,h,g,v,w,Z.width,Z.color,"Top"),oe&&Rh(l,h,g,v,w,oe.width,oe.color,"Right"),K&&Rh(l,h,g,v,w,K.width,K.color,"Bottom"),ne&&Rh(l,h,g,v,w,ne.width,ne.color,"Left")}(X||Y||k)&&l.restore()}createCtxTexture(o){return new UR(this.txMemManager,o)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(o){}renderToTexture(o){}getBufferInfo(){return null}getQuadCount(){return null}updateClearColor(o){this.clearColor=o?tC(o):void 0}}const Pu={alpha:f=>f===1?null:{prop:"opacity",value:`${f}`},x:f=>({prop:"left",value:`${f}px`}),y:f=>({prop:"top",value:`${f}px`}),width:f=>f===0?null:{prop:"width",value:`${f}px`},height:f=>f===0?null:{prop:"height",value:`${f}px`},fontSize:f=>f===0?null:{prop:"font-size",value:`${f}px`},lineHeight:f=>f===0?null:{prop:"line-height",value:`${f}px`},zIndex:()=>"z-index",fontFamily:()=>"font-family",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:f=>f===!1?null:{prop:"overflow",value:f?"hidden":"visible"},rotation:f=>f===0?null:{prop:"transform",value:`rotate(${f}rad)`},scale:f=>f===1?null:{prop:"transform",value:`scale(${f})`},scaleX:f=>f===1?null:{prop:"transform",value:`scaleX(${f})`},scaleY:f=>f===1?null:{prop:"transform",value:`scaleY(${f})`},color:f=>f===0?null:{prop:"color",value:hT(f)}},hT=f=>{const i=(f&255)/255,o=f>>8&255,l=f>>16&255;return`rgba(${f>>24&255},${l},${o},${i})`},ag={id:"test-id"},FR=new Set([...Object.keys(Pu),...Object.keys(ag),"src","parent","data"]);class $R{constructor(i,o){O(this,"root",null);O(this,"canvas",null);O(this,"height",1080);O(this,"width",1920);O(this,"scaleX",1);O(this,"scaleY",1);if(tl())return;if(!o)throw new Error("settings is required");this.height=Math.ceil(o.appHeight??1080/(o.deviceLogicalPixelRatio??1)),this.width=Math.ceil(o.appWidth??1920/(o.deviceLogicalPixelRatio??1)),this.scaleX=o.deviceLogicalPixelRatio??1,this.scaleY=o.deviceLogicalPixelRatio??1,this.canvas=i,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(i,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(i),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const i=this.canvas.getBoundingClientRect(),o=document.documentElement.scrollTop+i.top,l=document.documentElement.scrollLeft+i.left;this.root.id="root",this.root.style.left=`${l}px`,this.root.style.top=`${o}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(i,o){const l=document.createElement("div");l.style.position="absolute",l.id=i.toString();for(const h in o)this.updateNodeProperty(l,h,o[h],o);return l}createNode(i){const o=this.createDiv(i.id,i.props);return o.node=i,i.div=o,i.on("inViewport",()=>o.setAttribute("state","inViewport")),i.on("inBounds",()=>o.setAttribute("state","inBounds")),i.on("outOfBounds",()=>o.setAttribute("state","outOfBounds")),this.createProxy(i,o)}createTextNode(i){const o=this.createDiv(i.id,i.props);return o.node=i,i.div=o,this.createProxy(i,o)}createProxy(i,o){FR.forEach(g=>{let v=Object.getOwnPropertyDescriptor(i,g);if(v===void 0){const w=Object.getPrototypeOf(i);v=Object.getOwnPropertyDescriptor(w,g)}v!==void 0&&Object.defineProperty(i,g,{get(){var w;return(w=v==null?void 0:v.get)==null?void 0:w.call(i)},set:w=>{var s;(s=v==null?void 0:v.set)==null||s.call(i,w),this.updateNodeProperty(o,g,w,i.props)},configurable:!0,enumerable:!0})});const l=i.destroy;Object.defineProperty(i,"destroy",{value:()=>{this.destroyNode(i.id),l.call(i)}});const h=i.animate;return Object.defineProperty(i,"animate",{value:(g,v)=>{const w=h.call(i,g,v),s=w.start.bind(w);return w.start=()=>(this.animateNode(o,g,v),s()),w}}),i}destroyNode(i){const o=document.getElementById(i.toString());o==null||o.remove()}updateNodeProperty(i,o,l,h){var g;if(!(this.root===null||l===void 0||l===null)){if(o==="parent"){const v=l.id;if(v===1){this.root.appendChild(i);return}const w=document.getElementById(v.toString());w==null||w.appendChild(i);return}if(o==="text"){i.innerHTML=String(l),i.style.visibility="hidden";return}if(o==="src"&&l){i.setAttribute("data-src",String(l));return}if(o==="rtt"&&l){i.setAttribute("data-rtt",String(l));return}if(Pu[o]){const v=(g=Pu[o])==null?void 0:g.call(Pu,l);if(v===null)return;if(typeof v=="string"){i.style.setProperty(v,String(l));return}if(typeof v=="object"){let w=v.value;if(o==="x"){const s=h.mountX,m=h.width;s&&(w=`${parseInt(w)-m*s}px`)}else if(o==="y"){const s=h.mountY,m=h.height;s&&(w=`${parseInt(w)-m*s}px`)}i.style.setProperty(v.prop,w)}return}if(ag[o]){const v=ag[o];if(!v)return;i.setAttribute(String(v),String(l));return}if(o==="data"){for(const v in l){const w=l[v];w===void 0?i.removeAttribute(`data-${v}`):i.setAttribute(`data-${v}`,String(w))}return}}}animateNode(i,o,l){const{duration:h=1e3,delay:g=0}=l,{x:v,y:w,width:s,height:m,alpha:C=1,rotation:y=0,scale:x=1,color:M,mountX:b,mountY:_}=o;function P(){setTimeout(()=>{i.style.top=`${w-m*_}px`,i.style.left=`${v-s*b}px`,i.style.width=`${s}px`,i.style.height=`${m}px`,i.style.opacity=`${C}`,i.style.rotate=`${y}rad`,i.style.scale=`${x}`,i.style.color=hT(M)},h)}setTimeout(P,g)}}const dT=50,gC={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},zR={low:.66666667,medium:.85,high:1,retina:2},VR=()=>{const f=ki.stage;oi.get("fonts",[]).forEach(i=>{i.type==="sdf"||i.type==="msdf"?(!i.png&&i.file&&(i.png=i.file.replace(/\.[^.]+$/,`.${i.type}.png`)),!i.json&&i.file&&(i.json=i.file.replace(/\.[^.]+$/,`.${i.type}.json`)),f.fontManager.addFontFace(new sg(i.type,{fontFamily:i.family,descriptors:{},atlasUrl:i.png,atlasDataUrl:i.json,stage:f,metrics:i.metrics}))):i.type==="web"&&f.fontManager.addFontFace(new Vh({fontFamily:i.family,fontUrl:i.file,descriptors:{},metrics:i.metrics}))})},HR=()=>{const f=ki.stage;oi.get("shaders",[]).forEach(i=>{f.shManager.registerShaderType(i.name,i.type)}),oi.get("effects",[]).forEach(i=>{f.shManager.registerShaderType(i.name,i.type)})};let ki={};const GR=f=>{const i="renderMode"in f?f.renderMode:"webgl";if(i==="webgl")return wg;if(i==="canvas")return jR},WR=f=>{const i="renderMode"in f?f.renderMode:"webgl";if(i==="webgl")return[DR,pC];if(i==="canvas")return[pC]},XR=f=>{const i={max:200,target:.8,cleanupInterval:5e3,baseline:25,strict:!1,..."gpuMemory"in f?f.gpuMemory:{}};return{criticalThreshold:i.max*1024*1024,targetThresholdLevel:i.target,cleanupInterval:i.cleanupInterval,baselineMemoryAllocation:i.baseline*1024*1024,doNotExceedCriticalThreshold:i.strict}},KR=(f,i,o={})=>{ki=new hR({appWidth:o.w||1920,appHeight:o.h||1080,fpsUpdateInterval:o.fpsInterval||1e3,devicePhysicalPixelRatio:zR[o.renderQuality]||o.renderQuality||1,deviceLogicalPixelRatio:o.pixelRatio||gC[o.screenResolution]||gC[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in o?o.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:o.canvasColor&&Ya.normalize(o.canvasColor)||0,inspector:o.inspector===!0?$R:void 0,boundsMargin:o.viewportMargin||0,renderEngine:GR(o),fontEngines:WR(o),canvas:o.canvas,textureProcessingTimeLimit:o.textureProcessingTimeLimit,textureMemory:XR(o),createImageBitmapSupport:"auto",...o.advanced||{}},i);const l=()=>{let h=f();h.quit=()=>{dn.info("Closing App"),h.destroy(),h=null,ki=null}};return HR(),VR(),l(),ki};let qR=0;const YR=(f,i)=>{if(f===void 0)return{start:0,end:0,oppositeStart:0,oppositeEnd:0};if(typeof f=="number")return{start:f,end:f,oppositeStart:f,oppositeEnd:f};if($r(f)===!0&&(f=zr(f)),typeof f=="object"){const{top:o=void 0,right:l=void 0,bottom:h=void 0,left:g=void 0,x:v=0,y:w=0}=f;return i==="vertical"?{start:o!==void 0?o:w,end:h!==void 0?h:w,oppositeStart:g!==void 0?g:v,oppositeEnd:l!==void 0?l:v}:{start:g!==void 0?g:v,end:l!==void 0?l:v,oppositeStart:o!==void 0?o:w,oppositeEnd:h!==void 0?h:w}}return{start:0,end:0,oppositeStart:0,oppositeEnd:0}},QR=function(f){const i=f.direction==="vertical"?"y":"x",o=f.direction==="vertical"?"x":"y",l=f.direction==="vertical"?"mountX":"mountY",h=f.direction==="vertical"?"height":"width",g=f.direction==="vertical"?"width":"height",v=YR(f.padding,f.direction);let w=v.start;const s=this.node.children,m=s.length;let C=0;const y=f.gap||0;for(let M=0;M<m;M++){if(this.children[M]!==void 0&&this.children[M].props.raw.show===!1)continue;const b=s[M];b[i]=w,b[o]=v.oppositeStart,h==="width"?w+=b.width+(b.width!==("text"in b?1:0)?y:0):w+="text"in b?b.width>1?b.height+y:0:b.height!==0?b.height+y:0,C=Math.max(C,b[g]+v.oppositeStart+v.oppositeEnd)}this.node[h]=w-y+v.end,this.node[g]=C;const x={start:0,end:1,center:.5}[f["align-items"]||"start"];if(x!==0)for(let M=0;M<m;M++){const b=s[M];b[o]=C*x,b[l]=x}f["@updated"]!==void 0&&f["@updated"]({w:this.node.width,h:this.node.height},this)},yC=f=>f!==null&&typeof f=="object"&&"transition"in f,$r=f=>typeof f=="string"&&f.startsWith("{")&&f.endsWith("}"),zr=f=>JSON.parse(f.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),La=function(f,i){return typeof f!="string"?f:f.indexOf("%")===f.length-1?this.element.config.parent&&(this.element.config.parent.node[i]||0)*(parseFloat(f)/100)||0:f},lg=f=>{if(typeof f!="object"||f===null)return f;if(f.constructor===Object){if("value"in f)return f.value;if("transition"in f)return lg(f.transition)}return f},ZR={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};let ug=null;const JR={set parent(f){this.props.parent=f==="root"?ki.root:f.node},set rotation(f){this.props.rotation=f*(Math.PI/180)},set w(f){this.props.width=La.call(this,f,"width")},set width(f){this.props.width=La.call(this,f,"width")},set h(f){this.props.height=La.call(this,f,"height")},set height(f){this.props.height=La.call(this,f,"height")},set x(f){this.props.x=La.call(this,f,"width")},set y(f){this.props.y=La.call(this,f,"height")},set z(f){this.props.zIndex=f},set zIndex(f){this.props.zIndex=f},set color(f){typeof f=="string"&&f.startsWith("{")===!1?this.props.color=Ya.normalize(f):(typeof f=="object"||$r(f)===!0&&(f=zr(f)))&&(this.props.color=0,Object.entries(f).forEach(i=>{this.props[ZR[i[0]]]=Ya.normalize(i[1])}))},set src(f){this.props.src=f,this.raw.color===void 0&&(this.props.color=this.props.src?4294967295:0),!("w"in this.raw)&&!("w"in this.raw)&&!("h"in this.raw)&&!("height"in this.raw)&&(this.props.autosize=!0)},set texture(f){this.props.texture=f,this.raw.color===void 0&&f==null?this.props.color=0:this.raw.color===void 0&&(this.props.color=4294967295)},set fit(f){const i={};if(f==="cover"||f==="contain"){this.props.textureOptions={resizeMode:{type:f}};return}(typeof f=="object"||$r(f)===!0&&(f=zr(f)))&&(i.type=f.type||"cover",typeof f.position=="number"&&(i.clipY=i.clipX=f.position),typeof f.position=="object"&&(i.clipX="x"in f.position?f.position.x:null,i.clipY="y"in f.position?f.position.y:null),this.props.textureOptions={resizeMode:i})},set rtt(f){this.props.rtt=f,this.raw.color===void 0&&(this.props.color=f===!0?4294967295:0)},set mount(f){typeof f=="object"||$r(f)===!0&&(f=zr(f))?("x"in f&&(this.props.mountX=f.x),"y"in f&&(this.props.mountY=f.y)):(this.props.mountX=f,this.props.mountY=f)},set pivot(f){typeof f=="object"||$r(f)===!0&&(f=zr(f))?("x"in f&&(this.props.pivotX=f.x),"y"in f&&(this.props.pivotY=f.y)):(this.props.pivotX=f,this.props.pivotY=f)},set scale(f){typeof f=="object"||$r(f)===!0&&(f=zr(f))?("x"in f&&(this.props.scaleX=f.x),"y"in f&&(this.props.scaleY=f.y)):this.props.scale=f},set show(f){f?this.props.alpha=this.raw.alpha!==void 0?this.raw.alpha:1:this.props.alpha=0},set alpha(f){(this.raw.show===void 0||this.raw.show==!0)&&(this.props.alpha=f)},set shader(f){f!==null?this.props.shader=ki.createShader(f.type,f.props):this.props.shader=ki.createShader("DefaultShader")},set effects(f){for(let o=0;o<f.length;o++)f[o].props&&f[o].props.color&&(f[o].props.color=Ya.normalize(f[o].props.color));const i={};if(this.element.node===void 0)this.element.effectNames=[],this.props.shader=ki.createShader("DynamicShader",{effects:f.map(o=>{let l=o.type;return i[l]!==void 0?l+=++i[l]:i[l]=1,l+=this.element.counter,this.element.effectNames.push(l),ki.createEffect(o.type,o.props,l)})});else for(let o=0;o<f.length;o++){const l=this.element.effectNames[o],h=this.element.node.shader.props[l],g=Object.keys(f[o].props);if(h!=null)for(let v=0;v<g.length;v++)h[g[v]]=f[o].props[g[v]]}},set clipping(f){this.props.clipping=f},set overflow(f){this.props.clipping=!f},set font(f){this.props.fontFamily=f},set size(f){this.props.fontSize=f},set wordwrap(f){dn.warn("The wordwrap attribute is deprecated, use maxwidth instead"),this.props.width=f,this.props.contain="width"},set maxwidth(f){this.props.width=f,this.props.contain="width"},set maxheight(f){this.props.height=f,this.props.contain="both"},set contain(f){this.props.contain=f},set maxlines(f){this.props.maxLines=f},set textoverflow(f){this.props.overflowSuffix=f===!1?" ":f===!0?void 0:f},set letterspacing(f){this.props.letterSpacing=f||1},set lineheight(f){this.props.lineHeight=f},set align(f){this.props.textAlign=f},set content(f){this.props.text=""+f},set placement(f){let i,o;typeof f=="object"||$r(f)===!0&&(f=zr(f))?("x"in f&&(i=f.x),"y"in f&&(o=f.y)):f==="center"||f==="right"?i=f:o=f,i==="center"?(this.x="50%",this.props.mountX=.5):i==="right"&&(this.x="100%",this.props.mountX=1),o==="middle"?(this.y="50%",this.props.mountY=.5):o==="bottom"&&(this.y="100%",this.props.mountY=1)},set"inspector-data"(f){(typeof f=="object"||$r(f)===!0&&(f=zr(f)))&&(this.props.data=f)}},e5={populate(f){const i=f;i.node=this.config.node,i[Se.isSlot]===!0&&(this[Se.isSlot]=!0),this.props.element=this,this.props.parent=i.parent||this.config.parent,delete i.parent,this.props.raw=f;const o=Object.keys(i),l=o.length;for(let h=0;h<l;h++){const g=o[h],v=i[g];v!==void 0&&(this.props[g]=lg(v))}this.props.props.color===void 0&&!("__textnode"in i)&&(this.props.props.color=0),this.node=i.__textnode?ki.createTextNode({...ug,...this.props.props}):ki.createNode(this.props.props),i["@loaded"]!==void 0&&typeof i["@loaded"]=="function"&&this.node.on("loaded",(h,{type:g,dimensions:v})=>{i["@loaded"]({w:v.width,h:v.height,type:g},this)}),i["@error"]!==void 0&&typeof i["@error"]=="function"&&this.node.on("failed",(h,g)=>{i["@error"](g,this)}),i.__layout===!0&&(this.triggerLayout=QR.bind(this)),this.config.parent.props!==void 0&&this.config.parent.props.__layout===!0&&(this.config.parent.triggerLayout(this.config.parent.props),this.node.on("loaded",()=>{this.config.parent.triggerLayout(this.config.parent.props)}))},set(f,i){if(i===void 0||this.props.raw[f]===i)return;this.props.raw[f]=i,this.props.props={},this.props[f]=lg(i);const o=Object.keys(this.props.props);if(o.length===1){if(yC(i)===!0)return this.animate(o[0],this.props.props[o[0]],i.transition);this.node[o[0]]=this.props.props[o[0]]}else for(let l=0;l<o.length;l++){if(yC(i)===!0)return this.animate(o[l],this.props.props[o[l]],i.transition);this.node[o[l]]=this.props.props[o[l]]}this.config.parent.props&&this.config.parent.props.__layout===!0&&this.config.parent.triggerLayout(this.config.parent.props)},animate(f,i,o){if(this.scheduledTransitions[f]!==void 0&&this.scheduledTransitions[f].f.state==="scheduled"&&this.scheduledTransitions[f].f.stop(),this.node[f]===i)return;const l={};l[f]=i;const h=this.node.animate(l,{duration:typeof o=="object"&&"duration"in o?o.duration:300,easing:typeof o=="object"&&"easing"in o?o.easing:"ease",delay:typeof o=="object"&&"delay"in o?o.delay:0}),g=this.node[f];if(this.scheduledTransitions[f]={v:l[f],f:h},o.start!==void 0&&typeof o.start=="function"&&h.once("animating",()=>{o.start.call(this.component,this,f,g)}),this.config.parent.props&&this.config.parent.props.__layout===!0&&h.on("tick",()=>{this.config.parent.triggerLayout(this.config.parent.props)}),o.progress!==void 0&&typeof o.progress=="function"){let v=0;h.on("tick",(w,{progress:s})=>{o.progress.call(this.component,this,f,s,v),v=s})}h.once("stopped",()=>{this.scheduledTransitions[f]!==void 0&&this.scheduledTransitions[f].canceled===!0||(o.end&&typeof o.end=="function"&&o.end.call(this.component,this,f,this.node[f]),delete this.scheduledTransitions[f])}),h.start()},destroy(){dn.debug("Deleting  Node",this.nodeId),this.node.destroy();const f=Object.keys(this.scheduledTransitions);for(let i=0;i<f.length;i++){const o=this.scheduledTransitions[f[i]];o!==void 0&&(o.canceled=!0,o.f!==void 0&&o.f.stop())}},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){return this.component[Se.getChildren]().filter(f=>f.parent===(this[Se.isSlot]?this.node.children[0]:this.node))}},t5=(f,i)=>(ug===null&&(ug={fontSize:32,fontFamily:oi.get("defaultFont","sans-serif")}),Object.assign(Object.create(e5),{props:Object.assign(Object.create(JR),{props:{}}),scheduledTransitions:{},config:f,component:i,effectNames:[],counter:qR++})),vC={Element:t5,Launch:KR},n5="@lightningjs/blits",o5="1.26.2",i5="Blits: The Lightning 3 App Development Framework",r5="bin/index.js",s5={".":"./index.js","./vite":"./vite/index.js","./transitions":"./src/router/transitions/index.js","./precompiler":"./src/lib/precompiler/precompiler.js","./plugins":"./src/plugins/index.js","./symbols":"./src/lib/symbols.js","./blitsFileConverter":"./src/lib/blitsfileconverter/blitsfileconverter.js"},a5={test:"c8 npm run test:run","test:run":"node -r global-jsdom/register ./node_modules/.bin/tape '{,!(node_modules|packages)/**/}*.test.js' | tap-diff",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",prepublishOnly:"node scripts/prepublishOnly.js",postpublish:"node scripts/postpublish.js"},l5="./index.d.ts",u5={hooks:{"pre-commit":"lint-staged"}},f5="module",c5="Michiel van der Geest <hello@michielvandergeest.com>",h5="Apache-2.0",d5={"@babel/eslint-parser":"^7.26.5","@babel/plugin-syntax-import-assertions":"^7.26.0","babel-eslint":"^10.1.0",c8:"^8.0.1",eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","global-jsdom":"24.0.0",husky:"^7.0.4",jsdom:"24.0.0","lint-staged":"^12.3.3",prettier:"^2.5.1","tap-diff":"^0.1.1",tape:"^5.5.0"},p5={"@lightningjs/msdf-generator":"^1.1.1","@lightningjs/renderer":"^2.13.2"},m5={type:"git",url:"https://github.com/lightning-js/blits.git"},g5={name:n5,version:o5,description:i5,bin:r5,exports:s5,scripts:a5,types:l5,"lint-staged":{"*.js":["eslint --fix"]},husky:u5,type:f5,author:c5,license:h5,devDependencies:d5,dependencies:p5,repository:m5},y5="@lightningjs/renderer",v5="2.13.2",x5="Lightning 3 Renderer",w5="module",S5="./dist/exports/index.js",C5={".":"./dist/exports/index.js","./utils":"./dist/exports/utils.js","./canvas":"./dist/exports/canvas.js","./webgl":"./dist/exports/webgl.js","./inspector":"./dist/exports/inspector.js"},T5={type:"git",url:"git+https://github.com/lightning-js/renderer.git"},b5=!1,E5=["Lightning","LightningJS","WebGL","JS","WPE"],k5="Comcast Cable Communications Management, LLC",A5="Apache-2.0",I5={url:"https://github.com/lightning-js/renderer/issues"},M5="https://github.com/lightning-js/renderer#readme",_5={"@types/node":"^20.0.0","@typescript-eslint/eslint-plugin":"^8.16.0","@typescript-eslint/parser":"^8.16.0","@vitest/coverage-v8":"^2.1.5",concurrently:"^8.0.1",eslint:"^9.15.0","eslint-config-prettier":"^8.7.0",husky:"^8.0.3","lint-staged":"^13.2.0",prettier:"^2.8.4",typedoc:"^0.26.11",typescript:"~5.6.3",vitest:"^2.0.0","vitest-mock-extended":"^2.0.2"},R5=["dist","src","exports","LICENSE","NOTICE","README.md","scripts"],L5={npm:">= 10.0.0",pnpm:">= 8.9.2",node:">= 20.9.0"},D5={preinstall:"node scripts/please-use-pnpm.js",start:"cd examples && pnpm start","start:prod":"cd examples && pnpm start:prod",build:"tsc --build","build:docker":"cd visual-regression && pnpm build:docker",watch:"tsc --build --watch",test:"vitest",coverage:"vitest run --coverage","test:visual":"cd visual-regression && pnpm test:visual",lint:"pnpm run lint:prettier && pnpm run lint:eslint","lint:fix":"pnpm run lint:fix:prettier && pnpm run lint:fix:eslint","lint:prettier":'prettier --check "**/*.{ts,js,cjs,md}"',"lint:fix:prettier":'prettier --write "**/*.{ts,js,cjs,md}"',"lint:eslint":"eslint .","lint:fix:eslint":"eslint --fix .",typedoc:"typedoc","node-version":"node --version"},P5={name:y5,version:v5,description:x5,type:w5,main:S5,exports:C5,repository:T5,sideEffects:b5,keywords:E5,author:k5,license:A5,bugs:I5,homepage:M5,devDependencies:_5,"lint-staged":{"*.ts":["prettier --write","eslint --fix"],"*.{js,cjs,md}":"prettier --write"},files:R5,engines:L5,scripts:D5};let Hu={};const Sg={},O5=(f,i,o)=>{oi.set(o),ZM(),dn.info("Blits Version ",g5.version),dn.info("Renderer Version ",P5.version),Sg.element=vC.Element,Hu=vC.Launch(f,i,o)},N5={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},Gu=window.speechSynthesis,U5=/android/i.test((window.navigator||{}).userAgent||"");let pT=!1,td=null;const mT=()=>td&&clearTimeout(td),fg=f=>{if(!f||td)return mT();Gu.pause(),Gu.resume(),td=setTimeout(()=>{fg(f)},5e3)},za={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},B5=()=>{za.voice=Gu.getVoices()[0],pT=!0},j5=f=>{const i=new SpeechSynthesisUtterance(f.message);return i.lang=f.lang||za.lang,i.pitch=f.pitch||za.pitch,i.rate=f.rate||za.rate,i.voice=f.voice||za.voice,i.volume=f.volume||za.volume,U5===!1&&(i.onstart=()=>{fg(i)},i.onresume=()=>{fg(i)}),new Promise((o,l)=>{i.onend=()=>{o()},i.onerror=h=>{l(h)},Gu.speak(i)})},gT={speak(f){return pT||B5(),j5(f)},cancel(){Gu.cancel(),mT()}};let qu=!1,F5=0;const Hr=[];let Cu=!1;const $5=()=>{qu=!0},z5=()=>{qu=!1},V5=f=>{qu=!!f},Cg=(f,i="off")=>{if(qu!==!1)return yT(f,i)},H5=f=>{if(qu!==!1)return yT(void 0,void 0,f)},yT=(f,i,o=!1)=>{const l=F5++;let h;const g=new Promise(v=>{h=v});return g.cancel=()=>{const v=Hr.findIndex(w=>w.id===l);v!==-1&&Hr.splice(v,1),h("canceled")},o===!1?i==="assertive"?Hr.unshift({message:f,resolveFn:h,id:l}):Hr.push({message:f,resolveFn:h,id:l}):Hr.push({delay:o,resolveFn:h,id:l}),setTimeout(()=>{cg()},100),g},cg=async()=>{if(Cu===!0||Hr.length===0)return;Cu=!0;const{message:f,resolveFn:i,delay:o}=Hr.shift();o?setTimeout(()=>{Cu=!1,i("finished"),cg()},o):gT.speak({message:f}).then(()=>{Cu=!1,i("finished"),cg()}).catch(l=>{Cu=!1,i(l.error)})},G5=f=>Cg(f,"polite"),W5=f=>Cg(f,"assertive"),X5=()=>{gT.cancel()},K5=()=>{Hr.length=0},Hh={speak:Cg,polite:G5,assertive:W5,stop:X5,enable:$5,disable:z5,toggle:V5,clear:K5,pause:H5};let Sr;const wr=$u({path:"",navigating:!1,data:null,params:null,hash:""}),hg=new Map,vT=[];let xT={},wT={},Ja=!1,ST;const q5=()=>{const f=(document.location.hash||"/").replace(/^#/,"").split("?");return{path:f[0],queryParams:new URLSearchParams(f[1]),hash:document.location.hash}},xC=f=>f.replace(/^\/+|\/+$/g,"").toLowerCase(),wC=f=>typeof f=="object"&&f!==null,SC=f=>typeof f=="string",CT=(f,i=[])=>{const o=f.replace(/^\/+|\/+$/g,"");f=xC(f);let l=!1,h=0;for(;!l&&h<i.length;){const g=i[h];if(g.path=xC(g.path),g.path===f)g.params={},l=g;else if(g.path.indexOf(":")>-1){const v=[...g.path.matchAll(/:([^\s/]+)/gi)];let w=g.path;v.reverse().forEach(m=>{w=w.substring(0,m.index)+"([^\\s/]+)"+w.substring(m.index+m[0].length)}),w="^"+w;const s=o.match(new RegExp(`${w}`,"i"));s&&(g.params=v.reverse().reduce((m,C,y)=>(m[C[1]]=s[y+1],m),{}),l=g)}else if(g.path.endsWith("*")){const v=new RegExp(g.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),w=f.match(v);w&&(w[1]&&(g.params={path:w[1]}),l=g)}h++}return l&&(l.options={...l.options,...xT},l.data||(l.data={})),l},Y5=async function(){if(Hh.stop(),Hh.clear(),wr.navigating=!0,this.parent[Se.routes]){let f=Sr?Object.assign({},Sr):void 0;const{hash:i,path:o,queryParams:l}=q5();let h=CT(o,this.parent[Se.routes]);if(i!==null&&(h.hash=i),Sr=h,h){let g;if(this.parent[Se.routerHooks]){const x=this.parent[Se.routerHooks];if(x.beforeAll&&(g=await x.beforeAll(h,f),SC(g))){nl(g);return}}h=wC(g)?g:h;let v;if(h.hooks&&h.hooks.before&&(v=await h.hooks.before.call(this.parent,h,f),SC(v))){Sr=f,nl(v);return}h=wC(v)?v:h,Ja===!1&&f&&f.options.inHistory===!0&&vT.push(f),"transition"in h||(h.transition=N5),typeof h.transition=="function"&&(h.transition=h.transition(f,h));let w,s,{view:m,focus:C}=hg.get(h.hash)||{};if(h.announce&&(typeof h.announce=="string"&&(h.announce={message:h.announce}),Hh.speak(h.announce.message,h.announce.politeness)),m){w=m[Se.holder];let x=!1;if(h.transition.before)if(Array.isArray(h.transition.before)){for(let M=0;M<h.transition.before.length;M++)if(h.transition.before[M].prop==="alpha"){x=!0;break}}else h.transition.before.prop==="alpha"&&(x=!0);x===!1&&w.set("alpha",1)}else{w=Sg.element({parent:this[Se.children][0]}),w.populate({}),w.set("w","100%"),w.set("h","100%");const x={},M=[...l.entries()];for(let _=0;_<M.length;_++)x[M[_][0]]=M[_][1];s={...wT,...h.data,...x};const b={...this[Se.props],...h.params,...s};m=await h.component({props:b},w,this),m[Symbol.toStringTag]==="Module"&&(m.default&&typeof m.default=="function"?m=m.default({props:b},w,this):dn.error("Dynamic import doesn't have a default export or default is not a function")),typeof m=="function"&&(m=m({props:b},w,this))}if(this[Se.children].push(m),ST=qa.get(),C?C.$focus():m.$focus(),h.transition.before)if(Array.isArray(h.transition.before))for(let x=0;x<h.transition.before.length;x++)w.set(h.transition.before[x].prop,h.transition.before[x].value);else w.set(h.transition.before.prop,h.transition.before.value);let y=!1;if(f){y=!0;const x=this[Se.children].splice(1,1).pop();x&&Q5(f,x,h.transition.out),f=void 0}if(wr.path=h.path,wr.params=h.params,wr.hash=i,wr.data=s,h.transition.in)if(Array.isArray(h.transition.in))for(let x=0;x<h.transition.in.length;x++)x===h.transition.length-1?await el(w,h.transition.in[x],y):el(w,h.transition.in[x],y);else await el(w,h.transition.in,y);this.activeView=this[Se.children][this[Se.children].length-1]}else dn.error(`Route ${i} not found`)}Ja=!1,wr.navigating=!1},Q5=async(f,i,o)=>{if(o)if(Array.isArray(o))for(let l=0;l<o.length;l++)l===o.length-1?await el(i[Se.holder],o[l]):el(i[Se.holder],o[l]);else await el(i[Se.holder],o);Ja===!1&&f.options&&f.options.keepAlive===!0?hg.set(f.hash,{view:i,focus:ST}):Ja===!0&&hg.delete(f.hash),f.options&&(f.options.keepAlive!==!0||Ja===!0)&&(i.destroy(),i=null)},el=(f,i,o=!0)=>new Promise(l=>{if(o){const h=i.end;i.end=h?(...g)=>{h(...g),l()}:l,f.set(i.prop,{transition:i})}else f.set(i.prop,i.value),l()}),nl=(f,i={},o={})=>{wT=i,xT=o,window.location.hash=f},TT=function(){const f=vT.pop();if(f&&Sr!==f)return Ja=!0,nl(f.hash,f.data,f.options),!0;const i=Sr&&Sr.options.backtrack||!1;if(i===!1)return!1;const o=/(\/:?[\w%\s-]+)$/;let l=Sr.path,h=l.split("/").length;if(h<=1)return!1;for(;h--;){if(!o.test(l))return!1;l=l.replace(o,"");const g=CT(l,this.parent[Se.routes]);if(g&&i)return nl(g.path),!0}return!1},Um={navigate:Y5,to:nl,back:TT};let yr=null,Lh=[],CC;const dg=new Map,qa={_hold:!1,set hold(f){this._hold=f},get hold(){return this._hold},get(){return yr},set(f,i){f!==yr&&(clearTimeout(CC),yr&&yr!==f.parent&&yr.unfocus(),Lh.reverse().forEach(o=>o.unfocus()),f!==yr&&(CC=setTimeout(()=>{yr=f,yr.lifecycle.state="focus",i instanceof KeyboardEvent?document.dispatchEvent(new KeyboardEvent("keydown",i)):Lh=[]},this.hold?oi.get("holdTimeout",dT):0)))},input(f,i){if(wr.navigating===!0)return;Lh=bT([yr],f);const o=Lh.shift();if(o){let l;o[Se.inputEvents][f]?l=o[Se.inputEvents][f].call(o,i):o[Se.inputEvents].any&&(l=o[Se.inputEvents].any.call(o,i)),l!==void 0&&dg.set(i.code,l)}}},bT=(f,i)=>f[0][Se.inputEvents]&&(typeof f[0][Se.inputEvents][i]=="function"||typeof f[0][Se.inputEvents].any=="function")?f:f[0].parent?(f.unshift(f[0].parent),bT(f,i)):[],ms=new Map,Da=new Map,Gh={registerListener(f,i,o,l=0){let h=ms.get(i);h===void 0&&(h=new Map,ms.set(i,h));let g=h.get(f);g===void 0&&(g=new Set,h.set(f,g)),g.add({cb:o,priority:l}),Da.delete(i)},deregisterListener(f,i){let o=ms.get(i);o!==void 0&&o.has(f)&&(o.delete(f),ms.set(i,o),Da.delete(i))},executeListeners(f,i){const o=ms.get(f);if(o===void 0||o.size===0)return!0;if(Da.has(f)===!1){const h=[];for(const[g,v]of o)for(const w of v)h.push({...w,component:g});h.sort((g,v)=>v.priority-g.priority),Da.set(f,h)}const l=Da.get(f);for(let h=0;h<l.length;h++){const{cb:g,component:v}=l[h];if(g.call(v,i)===!1)return!1}return!0},removeListeners(f){for(const[i,o]of ms)o.has(f)&&(o.delete(f),Da.delete(i),o.size===0&&ms.delete(i))}},Z5={focus:{value:function(f){return dn.warn("this.focus is deprecated, use this.$focus instead"),this.$focus(f)},writable:!1,enumerable:!0,configurable:!1},$focus:{value:function(f){this[Se.state].hasFocus=!0,qa.set(this,f)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[Se.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.lifecycle.state="destroy",this.$clearTimeouts(),this.$clearIntervals(),Gh.removeListeners(this),ET(this[Se.children]),ZS(this[Se.effects]),dn.debug(`Destroyed component ${this.componentId}`),this[Se.state]={},this[Se.props]={}},writable:!1,enumerable:!0,configurable:!1},[Se.removeGlobalEffects]:{value:function(f=[]){ZS(f)},writable:!1,enumerable:!1,configurable:!1},select:{value:function(f){return dn.warn("this.select is deprecated, use this.$select instead"),this.$select(f)},writable:!1,enumerable:!0,configurable:!1},$select:{value:function(f){let i=null;return this[Se.children].forEach(o=>{Array.isArray(o)?o.forEach(l=>{l.ref===f&&(i=l)}):Object.getPrototypeOf(o)===Object.prototype?Object.keys(o).forEach(l=>{o[l].ref===f&&(i=o[l])}):o.ref===f&&(i=o)}),i},writable:!1,enumerable:!0,configurable:!1},trigger:{value:function(f){return dn.warn("this.trigger is deprecated, use this.$trigger instead"),this.$trigger(f)},writable:!1,enumerable:!0,configurable:!1},$trigger:{value:function(f){let i=this[Se.originalState];if(f.indexOf(".")>-1){const o=f.split(".");f=o.pop(o);for(let l=0;l<o.length;l++)i=i[o[l]]}Za(i,f,!0)},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(f,i){return{type:f,props:i}},writable:!1,enumerable:!0,configurable:!1}},ET=function(f){for(let i=0;i<f.length;i++){if(!f[i])return;f[i].destroy&&typeof f[i].destroy=="function"?f[i].destroy():Object.getPrototypeOf(f[i])===Object.prototype&&ET(Object.values(f[i])),f[i]=null}f.length=0},J5={$setTimeout:{value:function(f,i,...o){const l=setTimeout(()=>{this[Se.timeouts]=this[Se.timeouts].filter(h=>h!==l),f.apply(null,o)},i,o);return this[Se.timeouts].push(l),l},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(f){this[Se.timeouts].indexOf(f)>-1&&(this[Se.timeouts]=this[Se.timeouts].filter(i=>i!==f),clearTimeout(f))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(let f=0;f<this[Se.timeouts].length;f++)clearTimeout(this[Se.timeouts][f]);this[Se.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(f,i,...o){const l=setInterval(()=>f.apply(null,o),i,o);return this[Se.intervals].push(l),l},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(f){this[Se.intervals].indexOf(f)>-1&&(this[Se.intervals]=this[Se.intervals].filter(i=>i!==f),clearInterval(f))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(let f=0;f<this[Se.intervals].length;f++)clearInterval(this[Se.intervals][f]);this[Se.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},eL={$emit:{value:function(f,i){return Gh.executeListeners(f,i)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(f,i,o=0){Gh.registerListener(this,f,i,o)},writable:!1,enumerable:!0,configurable:!1},$unlisten:{value:function(f){Gh.deregisterListener(this,f)},writable:!1,enumerable:!0,configurable:!1}},tL={$router:{value:{to:nl,back:TT,get currentRoute(){return Sr},get routes(){return this[Se.routes]},get navigating(){return wr.navigating},state:wr},writable:!1,enumerable:!0,configurable:!1}},nL={$announcer:{value:Hh,writable:!1,enumerable:!0,configurable:!1}},oL={$size:{value:function(f={w:0,h:0}){this[Se.holder].set("w",f.w||0),this[Se.holder].set("h",f.h||0)},writable:!1,enumerable:!0,configurable:!1},[Se.renderer]:{value:()=>Hu,writable:!1,enumerable:!0,configurable:!1},[Se.getChildren]:{value(){const f=this.rootParent||this.parent;return(this[Se.children]||[]).concat(f&&f[Se.getChildren]().map(i=>Object.getPrototypeOf(i)===Object.prototype?Object.values(i).map(o=>(o.forComponent=o[Symbol.for("config")]&&o[Symbol.for("config")].parent.component,o)):i).flat().filter(i=>{if(i&&i.component)return i.component&&i.component.componentId===this.componentId||i.forComponent&&i.forComponent.componentId===this.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}},kT={...eL,...tL,...nL},gs=Object.defineProperties({[Se.launched]:!1},{...Z5,...J5,...kT,...oL}),iL={cast:f=>f,required:!1},rL=(f,i=[])=>{i.indexOf("ref")===-1&&i.push("ref"),f[Se.propKeys]=[];const o=i.length;for(let l=0;l<o;l++){const h={...iL,...typeof i[l]=="object"?i[l]:{key:i[l]}};f[Se.propKeys].push(h.key),Object.defineProperty(f,h.key,{get(){const g=h.cast(this[Se.props]!==void 0&&h.key in this[Se.props]?this[Se.props][h.key]:"default"in h?h.default:void 0);return h.required===!0&&g===void 0&&dn.warn(`${h.key} is required`),g},set(g){dn.warn(`Warning! Avoid mutating props directly (${h.key})`),this[Se.props][h.key]=g}})}},sL=(f,i)=>{f[Se.methodKeys]=[];for(let o in i)f[Se.propKeys]&&f[Se.propKeys].indexOf(o)>-1?dn.error(`${o} already exists as a prop`):(typeof i[o]!="function"&&dn.warn(`${o} is not a function`),f[Se.methodKeys].push(o),f[o]=i[o])},aL=(f,i=()=>{})=>{Object.defineProperty(f,Se.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1});const o=Object.keys(i.apply(f)||{});o.push(["hasFocus"]);const l=o.length;for(let h=0;h<l;h++){const g=o[h];f[Se.propKeys]!==void 0&&f[Se.propKeys].indexOf(g)>-1&&dn.error(`State ${g} already exists as a prop`),f[Se.methodKeys]!==void 0&&f[Se.methodKeys].indexOf(g)>-1&&dn.error(`State ${g} already exists as a method`),f[Se.stateKeys].push(g),Object.defineProperty(f,g,{get(){return this[Se.state][g]},set(v){this[Se.state][g]=v}})}},lL=(f,i)=>{f[Se.computedKeys]=[];for(let o in i)f[Se.stateKeys]&&f[Se.stateKeys].indexOf(o)>-1?dn.error(`${o} already exists as a state variable`):f[Se.propKeys]&&f[Se.propKeys].indexOf(o)>-1?dn.error(`${o} already exists as a prop`):f[Se.methodKeys]&&f[Se.methodKeys].indexOf(o)>-1?dn.error(`${o} already exists as a method`):(typeof i[o]!="function"&&dn.warn(`${o} is not a function`),f[Se.computedKeys].push(o),Object.defineProperty(f,o,{get(){return i[o].apply(this)}}))},uL=(f,i)=>{f[Se.inputEvents]=[],Object.keys(i).forEach(o=>{typeof i[o]!="function"&&dn.warn(`${i[o]} is not a function`),f[Se.inputEvents][o]=i[o]})},fL=(f,i)=>{let o=i;Array.isArray(i)===!1&&(f[Se.routerHooks]=i.hooks,o=i.routes),f[Se.routes]=[],Object.keys(o).forEach(l=>{f[Se.routes][l]={...o[l],options:{inHistory:!0,...o[l].options}}})},cL=(f,i)=>{f[Se.watchKeys]=[],f[Se.watchers]={};for(let o in i)typeof i[o]!="function"&&console.warn(`${o} is not a function`),f[Se.watchKeys].push(o),f[Se.watchers][o]=function(l,h){i[o].call(this,l,h)}};let hL=0;function dL(f,i){f[Se.identifier]=++hL,f[Se.effects]=[],d_(i.hooks,f[Se.identifier]),rL(f,i.props),i.methods&&sL(f,i.methods),aL(f,i.state),i.computed&&lL(f,i.computed),i.watch&&cL(f,i.watch);const o=i.router!==void 0?i.router:i.routes;return o!==void 0&&fL(f,o),i.input&&uL(f,i.input),f}const pL=()=>il("Circle",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.color=o.color,m.w=o.size,m.h=o.size,m.effects=[o.shader("radius",{radius:o.radius})],s[0].populate(m),s},effects:[function(i,o,l,h,g,v){o[0].set("color",i.color)},function(i,o,l,h,g,v){o[0].set("w",i.size)},function(i,o,l,h,g,v){o[0].set("h",i.size)},function(i,o,l,h,g,v){o[0].set("effects",[i.shader("radius",{radius:i.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let Bm=null;const mL=()=>il("RouterView",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.w=i.node.width*(100/100),m.height=i.node.height*(100/100),s[0].populate(m),s},effects:[],context:{}},state(){return{activeView:null}},hooks:{ready(){Bm=()=>Um.navigate.apply(this),Um.navigate.apply(this),window.addEventListener("hashchange",Bm)},destroy(){window.removeEventListener("hashchange",Bm,!1)},focus(){this.activeView&&this.activeView.$focus()}},input:{back(f){Um.back.call(this)===!1&&this.parent.$focus(f)}}}),gL=()=>il("Sprite",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.w=i.node.width*(100/100),m.h=i.node.height*(100/100),m.texture=o.texture,m.color=o.color,s[0].populate(m),s},effects:[function(i,o,l,h,g,v){o[0].set("texture",i.texture)},function(i,o,l,h,g,v){o[0].set("color",i.color)}],context:{}},props:["image","map","frame","color"],state(){return{spriteTexture:null}},computed:{texture(){const f="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(this.spriteTexture!==null&&f)return this[Se.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:f.x,y:f.y,width:f.w,height:f.h})}},hooks:{ready(){this.spriteTexture=this[Se.renderer]().createTexture("ImageTexture",{src:this.image})}}}),yL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",vL=()=>il("FPScounter",{code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(b),x===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},x===!0?y:o),_.y=15,_.x=20,s[1].populate(_),x===!0&&(M-=1),i=s[1];const P={};s[2]=this.element({parent:i||"root"},x===!0?y:o),s[2].populate(P),x===!0&&(M-=1);const j=l.components&&l.components.Sprite||h.Sprite;i=s[2];const H={};s[3]=this.element({parent:i||"root"},x===!0?y:o),H.image=o.image,H.w=43,H.h=25,H.map=o.sprite,H.frame="fps";const $=[];if(typeof j<"u")for(let kt in j[Symbol.for("config")].props)delete H[j[Symbol.for("config")].props[kt]],$.push(j[Symbol.for("config")].props[kt]);s[3].populate(H),x===!0&&(M-=1),i=s[3];const B={};B.image=o.image,B.w=43,B.h=25,B.map=o.sprite,B.frame="fps",m=B.is||"Sprite";let te;if(typeof m=="string"){if(te=l.components&&l.components[m]||h[m],!te)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(te=m);s[4]=te.call(null,{props:B},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],y=s[4],x=!0):i=s[4][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[2];const X={};s[5]=this.element({parent:i||"root"},x===!0?y:o),X.x=58,X.y=2,s[5].populate(X),x===!0&&(M-=1);const Y=l.components&&l.components.Sprite||h.Sprite;i=s[5];const ee={};s[6]=this.element({parent:i||"root"},x===!0?y:o),ee.image=o.image,ee.x=0,ee.h=20,ee.w=20,ee.map=o.sprite,ee.frame=o.fps[0];const he=[];if(typeof Y<"u")for(let kt in Y[Symbol.for("config")].props)delete ee[Y[Symbol.for("config")].props[kt]],he.push(Y[Symbol.for("config")].props[kt]);s[6].populate(ee),x===!0&&(M-=1),i=s[6];const k={};k.image=o.image,k.x=0,k.h=20,k.w=20,k.map=o.sprite,C=o.fps[0],Array.isArray(C)===!0&&(C=v(C).slice(0)),k.frame=C,m=k.is||"Sprite";let V;if(typeof m=="string"){if(V=l.components&&l.components[m]||h[m],!V)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);s[7]=V.call(null,{props:k},s[6],o),s[7][Symbol.for("slots")][0]?(i=s[7][Symbol.for("slots")][0],y=s[7],x=!0):i=s[7][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Z=l.components&&l.components.Sprite||h.Sprite;i=s[5];const oe={};s[8]=this.element({parent:i||"root"},x===!0?y:o),oe.image=o.image,oe.x=18,oe.h=20,oe.w=20,oe.map=o.sprite,oe.frame=o.fps[1];const K=[];if(typeof Z<"u")for(let kt in Z[Symbol.for("config")].props)delete oe[Z[Symbol.for("config")].props[kt]],K.push(Z[Symbol.for("config")].props[kt]);s[8].populate(oe),x===!0&&(M-=1),i=s[8];const ne={};ne.image=o.image,ne.x=18,ne.h=20,ne.w=20,ne.map=o.sprite,C=o.fps[1],Array.isArray(C)===!0&&(C=v(C).slice(0)),ne.frame=C,m=ne.is||"Sprite";let W;if(typeof m=="string"){if(W=l.components&&l.components[m]||h[m],!W)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);s[9]=W.call(null,{props:ne},s[8],o),s[9][Symbol.for("slots")][0]?(i=s[9][Symbol.for("slots")][0],y=s[9],x=!0):i=s[9][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const J=l.components&&l.components.Sprite||h.Sprite;i=s[5];const fe={};s[10]=this.element({parent:i||"root"},x===!0?y:o),fe.image=o.image,fe.x=36,fe.h=20,fe.w=20,fe.map=o.sprite,fe.frame=o.fps[2];const ye=[];if(typeof J<"u")for(let kt in J[Symbol.for("config")].props)delete fe[J[Symbol.for("config")].props[kt]],ye.push(J[Symbol.for("config")].props[kt]);s[10].populate(fe),x===!0&&(M-=1),i=s[10];const ge={};ge.image=o.image,ge.x=36,ge.h=20,ge.w=20,ge.map=o.sprite,C=o.fps[2],Array.isArray(C)===!0&&(C=v(C).slice(0)),ge.frame=C,m=ge.is||"Sprite";let pe;if(typeof m=="string"){if(pe=l.components&&l.components[m]||h[m],!pe)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);s[11]=pe.call(null,{props:ge},s[10],o),s[11][Symbol.for("slots")][0]?(i=s[11][Symbol.for("slots")][0],y=s[11],x=!0):i=s[11][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[1];const Ee={};s[12]=this.element({parent:i||"root"},x===!0?y:o),Ee.x=150,s[12].populate(Ee),x===!0&&(M-=1);const Re=l.components&&l.components.Sprite||h.Sprite;i=s[12];const z={};s[13]=this.element({parent:i||"root"},x===!0?y:o),z.image=o.image,z.y=2,z.w=48,z.h=25,z.map=o.sprite,z.frame="avg";const Me=[];if(typeof Re<"u")for(let kt in Re[Symbol.for("config")].props)delete z[Re[Symbol.for("config")].props[kt]],Me.push(Re[Symbol.for("config")].props[kt]);s[13].populate(z),x===!0&&(M-=1),i=s[13];const ve={};ve.image=o.image,ve.y=2,ve.w=48,ve.h=25,ve.map=o.sprite,ve.frame="avg",m=ve.is||"Sprite";let Ue;if(typeof m=="string"){if(Ue=l.components&&l.components[m]||h[m],!Ue)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ue=m);s[14]=Ue.call(null,{props:ve},s[13],o),s[14][Symbol.for("slots")][0]?(i=s[14][Symbol.for("slots")][0],y=s[14],x=!0):i=s[14][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[12];const De={};s[15]=this.element({parent:i||"root"},x===!0?y:o),De.x=63,De.y=2,s[15].populate(De),x===!0&&(M-=1);const We=l.components&&l.components.Sprite||h.Sprite;i=s[15];const Xe={};s[16]=this.element({parent:i||"root"},x===!0?y:o),Xe.image=o.image,Xe.x=0,Xe.h=20,Xe.w=20,Xe.map=o.sprite,Xe.frame=o.avgFps[0];const ze=[];if(typeof We<"u")for(let kt in We[Symbol.for("config")].props)delete Xe[We[Symbol.for("config")].props[kt]],ze.push(We[Symbol.for("config")].props[kt]);s[16].populate(Xe),x===!0&&(M-=1),i=s[16];const we={};we.image=o.image,we.x=0,we.h=20,we.w=20,we.map=o.sprite,C=o.avgFps[0],Array.isArray(C)===!0&&(C=v(C).slice(0)),we.frame=C,m=we.is||"Sprite";let tt;if(typeof m=="string"){if(tt=l.components&&l.components[m]||h[m],!tt)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(tt=m);s[17]=tt.call(null,{props:we},s[16],o),s[17][Symbol.for("slots")][0]?(i=s[17][Symbol.for("slots")][0],y=s[17],x=!0):i=s[17][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const et=l.components&&l.components.Sprite||h.Sprite;i=s[15];const Ze={};s[18]=this.element({parent:i||"root"},x===!0?y:o),Ze.image=o.image,Ze.x=18,Ze.h=20,Ze.w=20,Ze.map=o.sprite,Ze.frame=o.avgFps[1];const it=[];if(typeof et<"u")for(let kt in et[Symbol.for("config")].props)delete Ze[et[Symbol.for("config")].props[kt]],it.push(et[Symbol.for("config")].props[kt]);s[18].populate(Ze),x===!0&&(M-=1),i=s[18];const St={};St.image=o.image,St.x=18,St.h=20,St.w=20,St.map=o.sprite,C=o.avgFps[1],Array.isArray(C)===!0&&(C=v(C).slice(0)),St.frame=C,m=St.is||"Sprite";let ut;if(typeof m=="string"){if(ut=l.components&&l.components[m]||h[m],!ut)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ut=m);s[19]=ut.call(null,{props:St},s[18],o),s[19][Symbol.for("slots")][0]?(i=s[19][Symbol.for("slots")][0],y=s[19],x=!0):i=s[19][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const It=l.components&&l.components.Sprite||h.Sprite;i=s[15];const je={};s[20]=this.element({parent:i||"root"},x===!0?y:o),je.image=o.image,je.x=36,je.h=20,je.w=20,je.map=o.sprite,je.frame=o.avgFps[2];const at=[];if(typeof It<"u")for(let kt in It[Symbol.for("config")].props)delete je[It[Symbol.for("config")].props[kt]],at.push(It[Symbol.for("config")].props[kt]);s[20].populate(je),x===!0&&(M-=1),i=s[20];const xt={};xt.image=o.image,xt.x=36,xt.h=20,xt.w=20,xt.map=o.sprite,C=o.avgFps[2],Array.isArray(C)===!0&&(C=v(C).slice(0)),xt.frame=C,m=xt.is||"Sprite";let dt;if(typeof m=="string"){if(dt=l.components&&l.components[m]||h[m],!dt)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(dt=m);s[21]=dt.call(null,{props:xt},s[20],o),s[21][Symbol.for("slots")][0]?(i=s[21][Symbol.for("slots")][0],y=s[21],x=!0):i=s[21][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[1];const xn={};s[22]=this.element({parent:i||"root"},x===!0?y:o),xn.x=0,xn.y=40,s[22].populate(xn),x===!0&&(M-=1);const pn=l.components&&l.components.Sprite||h.Sprite;i=s[22];const zt={};s[23]=this.element({parent:i||"root"},x===!0?y:o),zt.image=o.image,zt.x="-2",zt.w=47,zt.h=25,zt.map=o.sprite,zt.frame="min";const Ct=[];if(typeof pn<"u")for(let kt in pn[Symbol.for("config")].props)delete zt[pn[Symbol.for("config")].props[kt]],Ct.push(pn[Symbol.for("config")].props[kt]);s[23].populate(zt),x===!0&&(M-=1),i=s[23];const Wt={};Wt.image=o.image,Wt.x="-2",Wt.w=47,Wt.h=25,Wt.map=o.sprite,Wt.frame="min",m=Wt.is||"Sprite";let Tt;if(typeof m=="string"){if(Tt=l.components&&l.components[m]||h[m],!Tt)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Tt=m);s[24]=Tt.call(null,{props:Wt},s[23],o),s[24][Symbol.for("slots")][0]?(i=s[24][Symbol.for("slots")][0],y=s[24],x=!0):i=s[24][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[22];const Pt={};s[25]=this.element({parent:i||"root"},x===!0?y:o),Pt.x=58,Pt.y=2,s[25].populate(Pt),x===!0&&(M-=1);const ln=l.components&&l.components.Sprite||h.Sprite;i=s[25];const ct={};s[26]=this.element({parent:i||"root"},x===!0?y:o),ct.image=o.image,ct.x=0,ct.h=20,ct.w=20,ct.map=o.sprite,ct.frame=o.minFps[0];const Pn=[];if(typeof ln<"u")for(let kt in ln[Symbol.for("config")].props)delete ct[ln[Symbol.for("config")].props[kt]],Pn.push(ln[Symbol.for("config")].props[kt]);s[26].populate(ct),x===!0&&(M-=1),i=s[26];const an={};an.image=o.image,an.x=0,an.h=20,an.w=20,an.map=o.sprite,C=o.minFps[0],Array.isArray(C)===!0&&(C=v(C).slice(0)),an.frame=C,m=an.is||"Sprite";let Bn;if(typeof m=="string"){if(Bn=l.components&&l.components[m]||h[m],!Bn)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Bn=m);s[27]=Bn.call(null,{props:an},s[26],o),s[27][Symbol.for("slots")][0]?(i=s[27][Symbol.for("slots")][0],y=s[27],x=!0):i=s[27][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Ot=l.components&&l.components.Sprite||h.Sprite;i=s[25];const mn={};s[28]=this.element({parent:i||"root"},x===!0?y:o),mn.image=o.image,mn.x=18,mn.h=20,mn.w=20,mn.map=o.sprite,mn.frame=o.minFps[1];const bn=[];if(typeof Ot<"u")for(let kt in Ot[Symbol.for("config")].props)delete mn[Ot[Symbol.for("config")].props[kt]],bn.push(Ot[Symbol.for("config")].props[kt]);s[28].populate(mn),x===!0&&(M-=1),i=s[28];const go={};go.image=o.image,go.x=18,go.h=20,go.w=20,go.map=o.sprite,C=o.minFps[1],Array.isArray(C)===!0&&(C=v(C).slice(0)),go.frame=C,m=go.is||"Sprite";let jn;if(typeof m=="string"){if(jn=l.components&&l.components[m]||h[m],!jn)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(jn=m);s[29]=jn.call(null,{props:go},s[28],o),s[29][Symbol.for("slots")][0]?(i=s[29][Symbol.for("slots")][0],y=s[29],x=!0):i=s[29][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Yn=l.components&&l.components.Sprite||h.Sprite;i=s[25];const Fn={};s[30]=this.element({parent:i||"root"},x===!0?y:o),Fn.image=o.image,Fn.x=36,Fn.h=20,Fn.w=20,Fn.map=o.sprite,Fn.frame=o.minFps[2];const Rn=[];if(typeof Yn<"u")for(let kt in Yn[Symbol.for("config")].props)delete Fn[Yn[Symbol.for("config")].props[kt]],Rn.push(Yn[Symbol.for("config")].props[kt]);s[30].populate(Fn),x===!0&&(M-=1),i=s[30];const Ve={};Ve.image=o.image,Ve.x=36,Ve.h=20,Ve.w=20,Ve.map=o.sprite,C=o.minFps[2],Array.isArray(C)===!0&&(C=v(C).slice(0)),Ve.frame=C,m=Ve.is||"Sprite";let ie;if(typeof m=="string"){if(ie=l.components&&l.components[m]||h[m],!ie)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ie=m);s[31]=ie.call(null,{props:Ve},s[30],o),s[31][Symbol.for("slots")][0]?(i=s[31][Symbol.for("slots")][0],y=s[31],x=!0):i=s[31][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[1];const Ae={};s[32]=this.element({parent:i||"root"},x===!0?y:o),Ae.x=150,Ae.y=40,s[32].populate(Ae),x===!0&&(M-=1);const Ke=l.components&&l.components.Sprite||h.Sprite;i=s[32];const wt={};s[33]=this.element({parent:i||"root"},x===!0?y:o),wt.image=o.image,wt.w=53,wt.h=25,wt.map=o.sprite,wt.frame="max";const nt=[];if(typeof Ke<"u")for(let kt in Ke[Symbol.for("config")].props)delete wt[Ke[Symbol.for("config")].props[kt]],nt.push(Ke[Symbol.for("config")].props[kt]);s[33].populate(wt),x===!0&&(M-=1),i=s[33];const ht={};ht.image=o.image,ht.w=53,ht.h=25,ht.map=o.sprite,ht.frame="max",m=ht.is||"Sprite";let _e;if(typeof m=="string"){if(_e=l.components&&l.components[m]||h[m],!_e)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(_e=m);s[34]=_e.call(null,{props:ht},s[33],o),s[34][Symbol.for("slots")][0]?(i=s[34][Symbol.for("slots")][0],y=s[34],x=!0):i=s[34][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[32];const Le={};s[35]=this.element({parent:i||"root"},x===!0?y:o),Le.x=63,Le.y=2,s[35].populate(Le),x===!0&&(M-=1);const bt=l.components&&l.components.Sprite||h.Sprite;i=s[35];const xe={};s[36]=this.element({parent:i||"root"},x===!0?y:o),xe.image=o.image,xe.x=0,xe.h=20,xe.w=20,xe.map=o.sprite,xe.frame=o.maxFps[0];const ce=[];if(typeof bt<"u")for(let kt in bt[Symbol.for("config")].props)delete xe[bt[Symbol.for("config")].props[kt]],ce.push(bt[Symbol.for("config")].props[kt]);s[36].populate(xe),x===!0&&(M-=1),i=s[36];const Ge={};Ge.image=o.image,Ge.x=0,Ge.h=20,Ge.w=20,Ge.map=o.sprite,C=o.maxFps[0],Array.isArray(C)===!0&&(C=v(C).slice(0)),Ge.frame=C,m=Ge.is||"Sprite";let Et;if(typeof m=="string"){if(Et=l.components&&l.components[m]||h[m],!Et)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Et=m);s[37]=Et.call(null,{props:Ge},s[36],o),s[37][Symbol.for("slots")][0]?(i=s[37][Symbol.for("slots")][0],y=s[37],x=!0):i=s[37][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const jt=l.components&&l.components.Sprite||h.Sprite;i=s[35];const Vt={};s[38]=this.element({parent:i||"root"},x===!0?y:o),Vt.image=o.image,Vt.x=18,Vt.h=20,Vt.w=20,Vt.map=o.sprite,Vt.frame=o.maxFps[1];const un=[];if(typeof jt<"u")for(let kt in jt[Symbol.for("config")].props)delete Vt[jt[Symbol.for("config")].props[kt]],un.push(jt[Symbol.for("config")].props[kt]);s[38].populate(Vt),x===!0&&(M-=1),i=s[38];const Be={};Be.image=o.image,Be.x=18,Be.h=20,Be.w=20,Be.map=o.sprite,C=o.maxFps[1],Array.isArray(C)===!0&&(C=v(C).slice(0)),Be.frame=C,m=Be.is||"Sprite";let qe;if(typeof m=="string"){if(qe=l.components&&l.components[m]||h[m],!qe)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(qe=m);s[39]=qe.call(null,{props:Be},s[38],o),s[39][Symbol.for("slots")][0]?(i=s[39][Symbol.for("slots")][0],y=s[39],x=!0):i=s[39][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const On=l.components&&l.components.Sprite||h.Sprite;i=s[35];const wn={};s[40]=this.element({parent:i||"root"},x===!0?y:o),wn.image=o.image,wn.x=36,wn.h=20,wn.w=20,wn.map=o.sprite,wn.frame=o.maxFps[2];const gn=[];if(typeof On<"u")for(let kt in On[Symbol.for("config")].props)delete wn[On[Symbol.for("config")].props[kt]],gn.push(On[Symbol.for("config")].props[kt]);s[40].populate(wn),x===!0&&(M-=1),i=s[40];const $n={};$n.image=o.image,$n.x=36,$n.h=20,$n.w=20,$n.map=o.sprite,C=o.maxFps[2],Array.isArray(C)===!0&&(C=v(C).slice(0)),$n.frame=C,m=$n.is||"Sprite";let Jn;if(typeof m=="string"){if(Jn=l.components&&l.components[m]||h[m],!Jn)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Jn=m);return s[41]=Jn.call(null,{props:$n},s[40],o),s[41][Symbol.for("slots")][0]?(i=s[41][Symbol.for("slots")][0],y=s[41],x=!0):i=s[41][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),s},effects:[function(i,o,l,h,g,v){(typeof skip6>"u"||skip6.indexOf("frame")===-1)&&o[6].set("frame",i.fps[0])},function(i,o,l,h,g,v){o[7][Symbol.for("props")].frame=i.fps[0]},function(i,o,l,h,g,v){(typeof skip8>"u"||skip8.indexOf("frame")===-1)&&o[8].set("frame",i.fps[1])},function(i,o,l,h,g,v){o[9][Symbol.for("props")].frame=i.fps[1]},function(i,o,l,h,g,v){(typeof skip10>"u"||skip10.indexOf("frame")===-1)&&o[10].set("frame",i.fps[2])},function(i,o,l,h,g,v){o[11][Symbol.for("props")].frame=i.fps[2]},function(i,o,l,h,g,v){(typeof skip16>"u"||skip16.indexOf("frame")===-1)&&o[16].set("frame",i.avgFps[0])},function(i,o,l,h,g,v){o[17][Symbol.for("props")].frame=i.avgFps[0]},function(i,o,l,h,g,v){(typeof skip18>"u"||skip18.indexOf("frame")===-1)&&o[18].set("frame",i.avgFps[1])},function(i,o,l,h,g,v){o[19][Symbol.for("props")].frame=i.avgFps[1]},function(i,o,l,h,g,v){(typeof skip20>"u"||skip20.indexOf("frame")===-1)&&o[20].set("frame",i.avgFps[2])},function(i,o,l,h,g,v){o[21][Symbol.for("props")].frame=i.avgFps[2]},function(i,o,l,h,g,v){(typeof skip26>"u"||skip26.indexOf("frame")===-1)&&o[26].set("frame",i.minFps[0])},function(i,o,l,h,g,v){o[27][Symbol.for("props")].frame=i.minFps[0]},function(i,o,l,h,g,v){(typeof skip28>"u"||skip28.indexOf("frame")===-1)&&o[28].set("frame",i.minFps[1])},function(i,o,l,h,g,v){o[29][Symbol.for("props")].frame=i.minFps[1]},function(i,o,l,h,g,v){(typeof skip30>"u"||skip30.indexOf("frame")===-1)&&o[30].set("frame",i.minFps[2])},function(i,o,l,h,g,v){o[31][Symbol.for("props")].frame=i.minFps[2]},function(i,o,l,h,g,v){(typeof skip36>"u"||skip36.indexOf("frame")===-1)&&o[36].set("frame",i.maxFps[0])},function(i,o,l,h,g,v){o[37][Symbol.for("props")].frame=i.maxFps[0]},function(i,o,l,h,g,v){(typeof skip38>"u"||skip38.indexOf("frame")===-1)&&o[38].set("frame",i.maxFps[1])},function(i,o,l,h,g,v){o[39][Symbol.for("props")].frame=i.maxFps[1]},function(i,o,l,h,g,v){(typeof skip40>"u"||skip40.indexOf("frame")===-1)&&o[40].set("frame",i.maxFps[2])},function(i,o,l,h,g,v){o[41][Symbol.for("props")].frame=i.maxFps[2]}],context:{}},state(){return{image:yL,sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready(){let f=1e4,i=0,o=0,l=0,h=0;Hu.on("fpsUpdate",(g,{fps:v})=>{f=Math.min(v,f),i=Math.max(v,i),l+=v,h++,o=Math.round(l/h),this.fps=v.toString().padStart(3,"0"),this.avgFps=o.toString().padStart(3,"0"),this.minFps=f.toString().padStart(3,"0"),this.maxFps=i.toString().padStart(3,"0")})}}}),xL=()=>({Circle:pL(),RouterView:mL(),Sprite:gL(),FPScounter:vL()}),wL={name:"log",plugin(){return VC("App")}},pg={log:wL},AT=(f,i="",o={})=>{let l;if(typeof i=="object"?o=i:l=i,typeof f=="function"){if(l===void 0)throw Error("Error registering plugin: name is required for plugin");pg[l]={plugin:f,options:o}}else f.plugin&&AT(f.plugin,l||f.name,o)};let jm;const TC=f=>{throw new Error(`Parameter ${f} is required`)},il=(f=TC("name"),i=TC("config"))=>{let o;const l=function(g,v,w,s){this.componentId=f_(f),this.lifecycle=Object.assign(Object.create(v_),{component:this,previous:null,current:null}),this.parent=w,this.rootParent=s,this[Se.holder]=v,this[Se.id]=c_(),this[Se.props]=$u(g.props||{},oi.get("reactivityMode")),this[Se.timeouts]=[],this[Se.intervals]=[],this[Se.originalState]=i.state&&typeof i.state=="function"&&i.state.apply(this)||{},this[Se.originalState].hasFocus=!1,this[Se.state]=$u(this[Se.originalState],oi.get("reactivityMode")),this.lifecycle.state="init",this[Se.children]=i.code.render.apply(Sg,[v,this,i,jm,Sh,vs,dn])||[],this[Se.wrapper]=this[Se.children][0],this[Se.slots]=this[Se.children].filter(C=>C[Se.isSlot]),i.hooks&&(i.hooks.frameTick&&Hu.on("frameTick",(C,y)=>qm("frameTick",this[Se.identifier],this,[y])),i.hooks.idle&&Hu.on("idle",()=>{qm("idle",this[Se.identifier],this)}),i.hooks.attach&&this[Se.wrapper].node.on("inBounds",()=>{this.lifecycle.state="attach"}),i.hooks.detach&&this[Se.wrapper].node.on("outOfBounds",(C,{previous:y})=>{y>0&&(this.lifecycle.state="detach")}),i.hooks.enter&&this[Se.wrapper].node.on("inViewport",()=>{this.lifecycle.state="enter"}),i.hooks.exit&&this[Se.wrapper].node.on("outOfViewport",()=>{this.lifecycle.state="exit"}));const m=i.code.effects;for(let C=0;C<m.length;C++){const y=()=>{m[C](this,this[Se.children],i,jm,s,Sh)};this[Se.effects].push(y),Sh(y)}if(this[Se.watchers]){const C=Object.keys(this[Se.watchers]),y=C.length;for(let x=0;x<y;x++){let M=this,b=C[x];const _=b;if(b.indexOf(".")>-1){const j=b.split(".");b=j.pop();for(let H=0;H<j.length;H++)M=M[j[H]]}let P=this[b];Sh((j=!1)=>{const H=M[b];(P!==H||j===!0)&&(this[Se.watchers][_].apply(this,[H,P]),P=H)})}}return setTimeout(()=>this.lifecycle.state="ready"),this},h=(g={},v,w,s)=>{if(gs[Se.launched]===!1){const m=Object.keys(pg),C=m.length,y={};for(let x=0;x<C;x++){const M=m[x],b=`$${M}`;b in gs&&dn.warn(`"${M}" (this.${b}) already exists as a property or plugin on the Base Component. You may be overwriting built-in functionality. Proceed with care!`);const _=pg[M];y[b]={value:Object.defineProperties(_.plugin(_.options),kT),writable:!1,enumerable:!0,configurable:!0}}Object.defineProperties(gs,y);for(const x in y)Object.defineProperties(gs[x],y),delete gs[x][x];jm=xL(),gs[Se.launched]=!0}return o===void 0&&(dn.debug(`Setting up ${f} component`),o=dL(Object.create(gs),i)),i.code===void 0&&(dn.debug(`Generating code for ${f} component`),i.code=o_.call(i,n_(i.template,f))),l.call(Object.create(o),g,v,w,s)};return h[Symbol.for("config")]=i,h[Se.isComponent]=!0,h},SL=f=>{const i={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};f.hooks=f.hooks||{};let o,l,h;return f.hooks[Se.destroy]=function(){document.removeEventListener("keydown",o),document.removeEventListener("keyup",l)},f.hooks[Se.init]=function(){this.$announcer.toggle(oi.get("announcer",!1));const g={...i,...oi.get("keymap",{})};o=async v=>{const w=g[v.key]||g[v.keyCode]||v.key||v.keyCode;this[Se.inputEvents]!==void 0&&this[Se.inputEvents].intercept!==void 0&&(v=await this[Se.inputEvents].intercept.call(this,v),!(v instanceof KeyboardEvent))||(qa.input(w,v),clearTimeout(h),h=setTimeout(()=>{qa.hold=!0},oi.get("holdTimeout",dT)))},l=v=>{const w=dg.get(v.code);w!==void 0&&typeof w=="function"&&(dg.delete(v.code),w()),clearTimeout(h),qa.hold=!1},document.addEventListener("keydown",o),document.addEventListener("keyup",l),setTimeout(()=>qa.set(this))},il("App",f)},Je={Component:il,Application:SL,Launch:O5,Plugin:AT},bC=f=>new Promise((i,o)=>{const l=new XMLHttpRequest;l.onreadystatechange=function(){l.readyState==XMLHttpRequest.DONE&&(l.status===0||l.status===200?i(JSON.parse(l.responseText)):o(l.statusText))},l.open("GET",f),l.send(null)}),CL={name:"language",plugin(f={}){let i={},o={};const l=$u({language:"",loaded:0},oi.get("reactivityMode"),!0),h=s=>{const m=Object.keys(i).length===0?"No translations loaded. Please load a file with translations or specify a translations object manually":s in i?!1:`Language ${s} not available in the loaded translations`;m?(dn.warn(m),l.language=s):g(s).then(()=>{l.language=s})},g=s=>new Promise(m=>{const C=i[s];typeof C=="object"?(o=C,m()):typeof C=="string"&&bC(C).then(y=>{i[s]=y,o=y,m()}).catch(y=>{dn.error(y)})}),v=s=>bC(s).then(m=>{w(m)}).catch(m=>{dn.error(m)}),w=s=>{i=s,g(l.language).then(()=>{l.loaded++})};return"file"in f?v(f.file).then(()=>{"language"in f&&h(f.language)}):"language"in f&&h(f.language),{translate(s){l.language,l.loaded;let m=[...arguments].slice(1);return m.length===0?o&&o[s]||s:(m.length===1&&typeof m[0]=="object"&&(m=m.pop()),Object.keys(Array.isArray(m)?Object.assign({},m):m).reduce((C,y)=>C.replace(new RegExp("{\\s?"+y+"\\s?}","g"),m[y]),o&&o[s]||s))},get language(){return l.language},set(s){h(s)},translations(s){w(s)},load(s){return v(s)}}}},TL=(f,i,o)=>{const l=o.split(".");for(let h=0;h<l.length;h++){const g=l[h];if(f!==null&&g in f)f=f[g],i=i!==null&&g in i?i[g]:null;else if(i!==null&&g in i)i=i[g],f=i;else{f=void 0;break}}return f},IT={name:"theme",plugin(f={}){let i={};const o=$u({current:"default"},oi.get("reactivityMode"),!0);let l={},h=null;return"themes"in f?(l=f.themes,o.current=f.current||"default",h=f.base||"default"):l={default:f},{get(g,v){if(o.current,i[g]!==void 0)return i[g];const w=TL(l[o.current],l[h]||null,g);return w!==void 0?(i[g]=w,w):v},set(g){g in l?(i={},o.current=g):dn.warn(`Theme ${g} not found`)}}}},Fm=f=>new URLSearchParams(window.location.search).get(f),Tu={sky:{test(){return navigator.userAgent.indexOf("WPE Sky")>-1||Fm("keymapping")==="sky"},mapping:{Escape:"back",27:"back"}},webos:{test(){return navigator.userAgent.indexOf("WebOS")>-1||Fm("keymapping")==="webos"},mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test(){return navigator.userAgent.indexOf("Tizen")>-1||Fm("keymapping")==="tizen"},mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},bL=()=>{let f={};return Object.keys(Tu).forEach(i=>{if(Tu[i].test&&typeof Tu[i].test=="function"&&Tu[i].test()===!0){f=Tu[i].mapping;return}}),f},EL="modulepreload",kL=function(f){return"/"+f},EC={},AL=function(i,o,l){if(!o||o.length===0)return i();const h=document.getElementsByTagName("link");return Promise.all(o.map(g=>{if(g=kL(g),g in EC)return;EC[g]=!0;const v=g.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(!!l)for(let C=h.length-1;C>=0;C--){const y=h[C];if(y.href===g&&(!v||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${w}`))return;const m=document.createElement("link");if(m.rel=v?"stylesheet":EL,v||(m.as="script",m.crossOrigin=""),m.href=g,document.head.appendChild(m),v)return new Promise((C,y)=>{m.addEventListener("load",C),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${g}`)))})})).then(()=>i()).catch(g=>{const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=g,window.dispatchEvent(v),!v.defaultPrevented)throw g})},IL=Je.Component("PortalItem",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=370,m.h=320,m.scale={transition:o.hasFocus?1.1:1},m.color=o.backgroundColor,m.effects=[{type:"radius",props:{radius:6}}],s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.x=30,C.y=30,C.content=o.number,C.size=84,C.color=o.fontColor,C.__textnode=!0,s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.x=30,y.y=140,y.content=o.title,y.size=42,y.font="raleway",y.color=o.fontColor,y.letterspacing=2,y.__textnode=!0,s[2].populate(y),i=s[0];const x={};return s[3]=this.element({parent:i||"root"},o),x.x=30,x.y=200,x.content=o.description,x.maxwidth=300,x.size=28,x.color=o.fontColor,x.lineheight=32,x.__textnode=!0,s[3].populate(x),s},effects:[function(i,o,l,h,g,v){o[0].set("scale",{transition:i.hasFocus?1.1:1})},function(i,o,l,h,g,v){o[0].set("color",i.backgroundColor)},function(i,o,l,h,g,v){o[0].set("effects",[{type:"radius",props:{radius:6}}])},function(i,o,l,h,g,v){o[1].set("content",i.number)},function(i,o,l,h,g,v){o[1].set("color",i.fontColor)},function(i,o,l,h,g,v){o[2].set("content",i.title)},function(i,o,l,h,g,v){o[2].set("color",i.fontColor)},function(i,o,l,h,g,v){o[3].set("content",i.description)},function(i,o,l,h,g,v){o[3].set("color",i.fontColor)}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),ML=Je.Component("PortalRow",{components:{PortalItem:IL},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1;const M={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(M),i=s[0];const b={};s[1]=this.element({parent:i||"root"},x===!0?y:o),b.alpha={transition:{value:o.itemOffset<240?1:0,duration:200}},s[1].populate(b),i=s[1];const _={};s[2]=this.element({parent:i||"root"},x===!0?y:o),_.content=o.title,_.x=60,_.__textnode=!0,s[2].populate(_),i=s[1];const P={};s[3]=this.element({parent:i||"root"},x===!0?y:o),P.y=50,P.x=60,P.h=1,P.w=1800,P.color="0xe8d7f9ff",s[3].populate(P),i=s[0];const j={};s[4]=this.element({parent:i||"root"},x===!0?y:o),j.y=100,j.x={transition:o.rowOffset},s[4].populate(j),i=s[4];const H=[];let $,B;const te=(Y=[],ee,he)=>{const k=v(Y),V=new Set;let Z=k.length;const oe={};for($=oe.from||0,B=("to"in oe)?oe.to:k.length;Z--;){const J=k[Z];Z<B&&Z>=$&&V.add(""+J.id)}let K=he.length;for(;K--;)if(V.has(he[K])===!1){const J=he[K];ee[5][J]&&ee[5][J].destroy(),delete ee[5][J],ee[6][J]&&ee[6][J].destroy(),delete ee[6][J]}he.length=0;const ne=k.length,W=[];for(let J=0;J<ne;J++){if(J<$||J>=B)continue;const fe=Object.create(o);i=ee[4],fe.item=k[J],fe.index=J,fe.key=""+fe.item.id,he.push(fe.key);const ye=l.components&&l.components.PortalItem||h.PortalItem;ee[5]===void 0&&(ee[5]={});const ge={};ee[5][fe.key]===void 0&&(ee[5][fe.key]=this.element({parent:i||"root"},x===!0?y:o)),ge.x={transition:{value:fe.itemOffset+fe.index*430,delay:50*(fe.index%4),duration:500}},ge.title=fe.item.title,ge.description=fe.item.description,ge.id=fe.item.id,ge.index=fe.index,ge.ref="item"+fe.index;const pe=[];if(typeof ye<"u")for(let z in ye[Symbol.for("config")].props)delete ge[ye[Symbol.for("config")].props[z]],pe.push(ye[Symbol.for("config")].props[z]);ee[5][fe.key].nodeId===void 0&&ee[5][fe.key].populate(ge),ee[6]===void 0&&(ee[6]={}),i=ee[5][fe.key];const Ee={};if(ee[6][fe.key]===void 0){C={transition:{value:fe.itemOffset+fe.index*430,delay:50*(fe.index%4),duration:500}},Array.isArray(C)===!0&&(C=v(C).slice(0)),Ee.x=C,Ee.title=fe.item.title,Ee.description=fe.item.description,Ee.id=fe.item.id,Ee.index=fe.index,C="item"+fe.index,Array.isArray(C)===!0&&(C=v(C).slice(0)),Ee.ref=C,m=Ee.is||"PortalItem";let z;if(typeof m=="string"){if(z=l.components&&l.components[m]||h[m],!z)throw new Error('Component "PortalItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);ee[6][fe.key]=z.call(null,{props:Ee},ee[5][fe.key],o),ee[6][fe.key][Symbol.for("slots")][0]?(i=ee[6][fe.key][Symbol.for("slots")][0],y=ee[6][fe.key],x=!0):i=ee[6][fe.key][Symbol.for("children")][0]}let Re=()=>{(typeof pe>"u"||pe.indexOf("ref")===-1)&&ee[5][fe.key].set("ref","item"+fe.index)};g(Re,null),W.push(Re),ee[6][fe.key][Symbol.for("props")].ref="item"+fe.index}return W};let X;return g(()=>{o[Symbol.for("removeGlobalEffects")](X),X=null,X=te(o.items,s,H)},["items"]),g(()=>{o.itemOffset;for(let Y=0;Y<o.items.length;Y++){if(Y<$||Y>=B)continue;const ee={};ee.index=Y,ee.item=o.items[Y],ee.key=ee.item.id,(typeof skip5>"u"||skip5.indexOf("x")===-1)&&s[5][ee.key].set("x",{transition:{value:o.itemOffset+ee.index*430,delay:50*(ee.index%4),duration:500}})}}),g(()=>{o.itemOffset;for(let Y=0;Y<o.items.length;Y++){if(Y<$||Y>=B)continue;const ee={};ee.index=Y,ee.item=o.items[Y],ee.key=ee.item.id,s[6][ee.key][Symbol.for("props")].x={transition:{value:o.itemOffset+ee.index*430,delay:50*(ee.index%4),duration:500}}}}),s},effects:[function(i,o,l,h,g,v){o[1].set("alpha",{transition:{value:i.itemOffset<240?1:0,duration:200}})},function(i,o,l,h,g,v){o[4].set("x",{transition:i.rowOffset})}],context:{}},props:["title","items"],state(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(f){const i=this.$select(`item${f}`);i&&i.$focus&&(i.$focus(),f<1?this.rowOffset=60:f>this.items.length-2?this.rowOffset=60-(this.items.length-2)*430+430:this.rowOffset=60-f*430+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),MT=Je.Component("SourceInfo",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.x=1860,m.y={transition:{value:1060+o.offsetY,delay:1e3,duration:300,easing:"ease-out"}},m.alpha={transition:{value:o.alpha,delay:1e3,duration:300,easing:"ease-out"}},m.w=480,m.h=100,m.mount=1,m.color="{top: '0x000000dd', bottom: '0x000000ff'}",m.effects=[{type:"radius",props:{radius:10}}],s[0].populate(m),i=s[0];const C={};return s[1]=this.element({parent:i||"root"},o),C.y=18,C.x=20,C.size=26,C.maxwidth=440,C.align="center",C.lineheight=32,C.content='Press "U" to check out the source code of this example on GitHub',C.__textnode=!0,s[1].populate(C),s},effects:[function(i,o,l,h,g,v){o[0].set("y",{transition:{value:1060+i.offsetY,delay:1e3,duration:300,easing:"ease-out"}})},function(i,o,l,h,g,v){o[0].set("alpha",{transition:{value:i.alpha,delay:1e3,duration:300,easing:"ease-out"}})},function(i,o,l,h,g,v){o[0].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state(){return{offsetY:15,alpha:0}},hooks:{ready(){this.offsetY=0,this.alpha=1}}}),_L="@lightningjs/blits-example-app",RL="1.13.0",LL="Lightning 3 Blits Example App",DL="index.js",PL="module",OL={start:"npm run dev","start:test":"NODE_ENV=testing npm run dev",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",build:"vite build",dev:"vite dev --host",test:"NODE_ENV=testing backstop --config=backstop.cjs test","test:reference":"NODE_ENV=testing backstop --config=backstop.cjs reference"},NL={hooks:{"pre-commit":"lint-staged"}},UL="Michiel van der Geest <hello@michielvandergeest.com>",BL="Apache-2",jL={backstopjs:"^6.3.22",eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0",husky:"^7.0.4","lint-staged":"^12.3.3",playwright:"^1.41.0",prettier:"^2.5.1","shaka-player":"^4.7.1",vite:"^4.0.4"},FL={"@firebolt-js/sdk":"^1.4.1","@lightningjs/blits":"^1.26.2"},$L={name:_L,version:RL,description:LL,main:DL,type:PL,scripts:OL,"lint-staged":{"*.js":["eslint --fix"]},husky:NL,author:UL,license:BL,devDependencies:jL,dependencies:FL},zL=Je.Component("Portal",{components:{PortalRow:ML,SourceInfo:MT},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),b.w=1920,b.h=1080,b.color="{top: '0x44037aff', bottom: '0x240244ff'}",s[0].populate(b),x===!0&&(M-=1);const _=l.components&&l.components.PortalRow||h.PortalRow;i=s[0];const P={};s[1]=this.element({parent:i||"root"},x===!0?y:o),P.mount="{y: 0.5}",P.h=500,P.y={transition:-o.rowFocused*420+550},P.title="Demos",P.items=o.demo,P.ref="row0";const j=[];if(typeof _<"u")for(let Ee in _[Symbol.for("config")].props)delete P[_[Symbol.for("config")].props[Ee]],j.push(_[Symbol.for("config")].props[Ee]);s[1].populate(P),x===!0&&(M-=1),i=s[1];const H={};H.mount="{y: 0.5}",H.h=500,C={transition:-o.rowFocused*420+550},Array.isArray(C)===!0&&(C=v(C).slice(0)),H.y=C,H.title="Demos",H.items=o.demo,H.ref="row0",m=H.is||"PortalRow";let $;if(typeof m=="string"){if($=l.components&&l.components[m]||h[m],!$)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);s[2]=$.call(null,{props:H},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],y=s[2],x=!0):i=s[2][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const B=l.components&&l.components.PortalRow||h.PortalRow;i=s[0];const te={};s[3]=this.element({parent:i||"root"},x===!0?y:o),te.mount="{y: 0.5}",te.h=500,te.y={transition:-o.rowFocused*420+1100},te.title="Examples and tests",te.items=o.example,te.ref="row1";const X=[];if(typeof B<"u")for(let Ee in B[Symbol.for("config")].props)delete te[B[Symbol.for("config")].props[Ee]],X.push(B[Symbol.for("config")].props[Ee]);s[3].populate(te),x===!0&&(M-=1),i=s[3];const Y={};Y.mount="{y: 0.5}",Y.h=500,C={transition:-o.rowFocused*420+1100},Array.isArray(C)===!0&&(C=v(C).slice(0)),Y.y=C,Y.title="Examples and tests",Y.items=o.example,Y.ref="row1",m=Y.is||"PortalRow";let ee;if(typeof m=="string"){if(ee=l.components&&l.components[m]||h[m],!ee)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);s[4]=ee.call(null,{props:Y},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],y=s[4],x=!0):i=s[4][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const he=l.components&&l.components.PortalRow||h.PortalRow;i=s[0];const k={};s[5]=this.element({parent:i||"root"},x===!0?y:o),k.mount="{y: 0.5}",k.h=500,k.y={transition:-o.rowFocused*420+1650},k.title="Benchmarks and stress tests",k.items=o.benchmark,k.ref="row2";const V=[];if(typeof he<"u")for(let Ee in he[Symbol.for("config")].props)delete k[he[Symbol.for("config")].props[Ee]],V.push(he[Symbol.for("config")].props[Ee]);s[5].populate(k),x===!0&&(M-=1),i=s[5];const Z={};Z.mount="{y: 0.5}",Z.h=500,C={transition:-o.rowFocused*420+1650},Array.isArray(C)===!0&&(C=v(C).slice(0)),Z.y=C,Z.title="Benchmarks and stress tests",Z.items=o.benchmark,Z.ref="row2",m=Z.is||"PortalRow";let oe;if(typeof m=="string"){if(oe=l.components&&l.components[m]||h[m],!oe)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(oe=m);s[6]=oe.call(null,{props:Z},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],y=s[6],x=!0):i=s[6][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[0];const K={};s[7]=this.element({parent:i||"root"},x===!0?y:o),K.w=1920,K.h=200,K.color="0x44037aff",s[7].populate(K),x===!0&&(M-=1),i=s[7];const ne={};s[8]=this.element({parent:i||"root"},x===!0?y:o),ne.w=1920,ne.h=70,ne.y=200,ne.color="{top: '0x44037aff'}",s[8].populate(ne),x===!0&&(M-=1),i=s[7];const W={};s[9]=this.element({parent:i||"root"},x===!0?y:o),W.y={transition:{value:80-o.logoOffset,duration:400}},s[9].populate(W),x===!0&&(M-=1),i=s[9];const J={};s[10]=this.element({parent:i||"root"},x===!0?y:o),J.src="assets/blits-logo-full.png",J.w=200,J.h=112,J.x=60,s[10].populate(J),x===!0&&(M-=1),i=s[9];const fe={};s[11]=this.element({parent:i||"root"},x===!0?y:o),fe.w=2,fe.h=120,fe.y="-10",fe.color="0xffffff80",fe.x=300,s[11].populate(fe),x===!0&&(M-=1),i=s[9];const ye={};s[12]=this.element({parent:i||"root"},x===!0?y:o),ye.x=320,ye.y=16,s[12].populate(ye),x===!0&&(M-=1),i=s[12];const ge={};s[13]=this.element({parent:i||"root"},x===!0?y:o),ge.y=0,ge.size=36,ge.content="Example App",ge.__textnode=!0,s[13].populate(ge),x===!0&&(M-=1),i=s[12];const pe={};return s[14]=this.element({parent:i||"root"},x===!0?y:o),pe.y=50,pe.size=24,pe.content="v"+o.version,pe.__textnode=!0,s[14].populate(pe),x===!0&&(M-=1),s},effects:[function(i,o,l,h,g,v){(typeof skip1>"u"||skip1.indexOf("y")===-1)&&o[1].set("y",{transition:-i.rowFocused*420+550})},function(i,o,l,h,g,v){o[2][Symbol.for("props")].y={transition:-i.rowFocused*420+550}},function(i,o,l,h,g,v){(typeof skip3>"u"||skip3.indexOf("y")===-1)&&o[3].set("y",{transition:-i.rowFocused*420+1100})},function(i,o,l,h,g,v){o[4][Symbol.for("props")].y={transition:-i.rowFocused*420+1100}},function(i,o,l,h,g,v){(typeof skip5>"u"||skip5.indexOf("y")===-1)&&o[5].set("y",{transition:-i.rowFocused*420+1650})},function(i,o,l,h,g,v){o[6][Symbol.for("props")].y={transition:-i.rowFocused*420+1650}},function(i,o,l,h,g,v){o[9].set("y",{transition:{value:80-i.logoOffset,duration:400}})}],context:{}},state(){return{version:$L.version,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"},{title:"Router Hooks",id:"examples/router-hooks",description:"Example of router before hook"},{title:"Image resizing",id:"examples/resize",description:'Using the "fit" syntax for resizing images on the fly'},{title:"Translations",id:"examples/translations",description:"Language Plugin for internationalization"},{title:"Firebolt",id:"examples/firebolt",description:"Example Firebolt Integration"},{title:"Keycodes",id:"examples/keycodes",description:"Find the correct keycode mappings for your device"},{title:"Special Chars",id:"examples/special-characters",description:"Accents and special characters with MSDF fonts"},{title:"Layout",id:"examples/layout",description:'Using the built-in "Layout" Component'},{title:"Announcer",id:"examples/announcer",description:'Using the built-in "Announcer" plugin'}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready(){this.logoOffset=0,this.$trigger("rowFocused")}},watch:{rowFocused(f){const i=this.$select(`row${f}`);i&&i.$focus&&i.$focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),VL=Je.Component("Letter",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=o.w,C.h={transition:{value:410+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}},C.color="0xe6e6e6ff",s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.w=o.w,y.h=280,y.src=o.image,y.y={transition:{value:400+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}},s[2].populate(y),i=s[0];const x={};return s[3]=this.element({parent:i||"root"},o),x.w=o.w,x.color="0xe6e6e6ff",x.h={transition:{value:500-o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}},x.y={transition:{value:660+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}},s[3].populate(x),s},effects:[function(i,o,l,h,g,v){o[1].set("h",{transition:{value:410+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}})},function(i,o,l,h,g,v){o[2].set("src",i.image)},function(i,o,l,h,g,v){o[2].set("y",{transition:{value:400+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}})},function(i,o,l,h,g,v){o[3].set("h",{transition:{value:500-i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}})},function(i,o,l,h,g,v){o[3].set("y",{transition:{value:660+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return this.letter,`assets/${this.letter}.png`}},state(){return{offset:this.direction==="up"?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),HL=Je.Component("Intro",{components:{Letter:VL},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),M.w=1920,M.h=1080,M.src="assets/background.jpg",s[0].populate(M),y===!0&&(x-=1);const b=l.components&&l.components.Letter||h.Letter;i=s[0];const _={};s[1]=this.element({parent:i||"root"},y===!0?C:o),_.letter="l",_.w=294;const P=[];if(typeof b<"u")for(let dt in b[Symbol.for("config")].props)delete _[b[Symbol.for("config")].props[dt]],P.push(b[Symbol.for("config")].props[dt]);s[1].populate(_),y===!0&&(x-=1),i=s[1];const j={};j.letter="l",j.w=294,m=j.is||"Letter";let H;if(typeof m=="string"){if(H=l.components&&l.components[m]||h[m],!H)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(H=m);s[2]=H.call(null,{props:j},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],C=s[2],y=!0):i=s[2][Symbol.for("children")][0],y===!0&&x===0&&(y=!1);const $=l.components&&l.components.Letter||h.Letter;i=s[0];const B={};s[3]=this.element({parent:i||"root"},y===!0?C:o),B.letter="i-1",B.w=128,B.x=294,B.direction="up",B.delay=50;const te=[];if(typeof $<"u")for(let dt in $[Symbol.for("config")].props)delete B[$[Symbol.for("config")].props[dt]],te.push($[Symbol.for("config")].props[dt]);s[3].populate(B),y===!0&&(x-=1),i=s[3];const X={};X.letter="i-1",X.w=128,X.x=294,X.direction="up",X.delay=50,m=X.is||"Letter";let Y;if(typeof m=="string"){if(Y=l.components&&l.components[m]||h[m],!Y)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Y=m);s[4]=Y.call(null,{props:X},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],C=s[4],y=!0):i=s[4][Symbol.for("children")][0],y===!0&&x===0&&(y=!1);const ee=l.components&&l.components.Letter||h.Letter;i=s[0];const he={};s[5]=this.element({parent:i||"root"},y===!0?C:o),he.letter="g-1",he.w=205,he.x=422,he.delay=100;const k=[];if(typeof ee<"u")for(let dt in ee[Symbol.for("config")].props)delete he[ee[Symbol.for("config")].props[dt]],k.push(ee[Symbol.for("config")].props[dt]);s[5].populate(he),y===!0&&(x-=1),i=s[5];const V={};V.letter="g-1",V.w=205,V.x=422,V.delay=100,m=V.is||"Letter";let Z;if(typeof m=="string"){if(Z=l.components&&l.components[m]||h[m],!Z)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Z=m);s[6]=Z.call(null,{props:V},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],C=s[6],y=!0):i=s[6][Symbol.for("children")][0],y===!0&&x===0&&(y=!1);const oe=l.components&&l.components.Letter||h.Letter;i=s[0];const K={};s[7]=this.element({parent:i||"root"},y===!0?C:o),K.letter="h",K.w=224,K.x=627,K.direction="up",K.delay=150;const ne=[];if(typeof oe<"u")for(let dt in oe[Symbol.for("config")].props)delete K[oe[Symbol.for("config")].props[dt]],ne.push(oe[Symbol.for("config")].props[dt]);s[7].populate(K),y===!0&&(x-=1),i=s[7];const W={};W.letter="h",W.w=224,W.x=627,W.direction="up",W.delay=150,m=W.is||"Letter";let J;if(typeof m=="string"){if(J=l.components&&l.components[m]||h[m],!J)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(J=m);s[8]=J.call(null,{props:W},s[7],o),s[8][Symbol.for("slots")][0]?(i=s[8][Symbol.for("slots")][0],C=s[8],y=!0):i=s[8][Symbol.for("children")][0],y===!0&&x===0&&(y=!1);const fe=l.components&&l.components.Letter||h.Letter;i=s[0];const ye={};s[9]=this.element({parent:i||"root"},y===!0?C:o),ye.letter="t",ye.w=190,ye.x=851,ye.delay=200;const ge=[];if(typeof fe<"u")for(let dt in fe[Symbol.for("config")].props)delete ye[fe[Symbol.for("config")].props[dt]],ge.push(fe[Symbol.for("config")].props[dt]);s[9].populate(ye),y===!0&&(x-=1),i=s[9];const pe={};pe.letter="t",pe.w=190,pe.x=851,pe.delay=200,m=pe.is||"Letter";let Ee;if(typeof m=="string"){if(Ee=l.components&&l.components[m]||h[m],!Ee)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ee=m);s[10]=Ee.call(null,{props:pe},s[9],o),s[10][Symbol.for("slots")][0]?(i=s[10][Symbol.for("slots")][0],C=s[10],y=!0):i=s[10][Symbol.for("children")][0],y===!0&&x===0&&(y=!1);const Re=l.components&&l.components.Letter||h.Letter;i=s[0];const z={};s[11]=this.element({parent:i||"root"},y===!0?C:o),z.letter="n-1",z.w=221,z.x=1041,z.direction="up",z.delay=250;const Me=[];if(typeof Re<"u")for(let dt in Re[Symbol.for("config")].props)delete z[Re[Symbol.for("config")].props[dt]],Me.push(Re[Symbol.for("config")].props[dt]);s[11].populate(z),y===!0&&(x-=1),i=s[11];const ve={};ve.letter="n-1",ve.w=221,ve.x=1041,ve.direction="up",ve.delay=250,m=ve.is||"Letter";let Ue;if(typeof m=="string"){if(Ue=l.components&&l.components[m]||h[m],!Ue)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ue=m);s[12]=Ue.call(null,{props:ve},s[11],o),s[12][Symbol.for("slots")][0]?(i=s[12][Symbol.for("slots")][0],C=s[12],y=!0):i=s[12][Symbol.for("children")][0],y===!0&&x===0&&(y=!1);const De=l.components&&l.components.Letter||h.Letter;i=s[0];const We={};s[13]=this.element({parent:i||"root"},y===!0?C:o),We.letter="i-2",We.w=115,We.x=1262,We.delay=300;const Xe=[];if(typeof De<"u")for(let dt in De[Symbol.for("config")].props)delete We[De[Symbol.for("config")].props[dt]],Xe.push(De[Symbol.for("config")].props[dt]);s[13].populate(We),y===!0&&(x-=1),i=s[13];const ze={};ze.letter="i-2",ze.w=115,ze.x=1262,ze.delay=300,m=ze.is||"Letter";let we;if(typeof m=="string"){if(we=l.components&&l.components[m]||h[m],!we)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(we=m);s[14]=we.call(null,{props:ze},s[13],o),s[14][Symbol.for("slots")][0]?(i=s[14][Symbol.for("slots")][0],C=s[14],y=!0):i=s[14][Symbol.for("children")][0],y===!0&&x===0&&(y=!1);const tt=l.components&&l.components.Letter||h.Letter;i=s[0];const et={};s[15]=this.element({parent:i||"root"},y===!0?C:o),et.letter="n-2",et.w=219,et.x=1377,et.direction="up",et.delay=350;const Ze=[];if(typeof tt<"u")for(let dt in tt[Symbol.for("config")].props)delete et[tt[Symbol.for("config")].props[dt]],Ze.push(tt[Symbol.for("config")].props[dt]);s[15].populate(et),y===!0&&(x-=1),i=s[15];const it={};it.letter="n-2",it.w=219,it.x=1377,it.direction="up",it.delay=350,m=it.is||"Letter";let St;if(typeof m=="string"){if(St=l.components&&l.components[m]||h[m],!St)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(St=m);s[16]=St.call(null,{props:it},s[15],o),s[16][Symbol.for("slots")][0]?(i=s[16][Symbol.for("slots")][0],C=s[16],y=!0):i=s[16][Symbol.for("children")][0],y===!0&&x===0&&(y=!1);const ut=l.components&&l.components.Letter||h.Letter;i=s[0];const It={};s[17]=this.element({parent:i||"root"},y===!0?C:o),It.letter="g-2",It.w=324,It.x=1596,It.direction="up",It.delay=400;const je=[];if(typeof ut<"u")for(let dt in ut[Symbol.for("config")].props)delete It[ut[Symbol.for("config")].props[dt]],je.push(ut[Symbol.for("config")].props[dt]);s[17].populate(It),y===!0&&(x-=1),i=s[17];const at={};at.letter="g-2",at.w=324,at.x=1596,at.direction="up",at.delay=400,m=at.is||"Letter";let xt;if(typeof m=="string"){if(xt=l.components&&l.components[m]||h[m],!xt)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xt=m);return s[18]=xt.call(null,{props:at},s[17],o),s[18][Symbol.for("slots")][0]?(i=s[18][Symbol.for("slots")][0],C=s[18],y=!0):i=s[18][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),s},effects:[],context:{}}}),GL=Je.Component("Toggle",{code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),b.w=100,b.h=50,b.y=5,b.color=o.bgColor,b.effects=[{type:"radius",props:{radius:25}}],s[0].populate(b),x===!0&&(M-=1);const _=l.components&&l.components.Circle||h.Circle;i=s[0];const P={};s[1]=this.element({parent:i||"root"},x===!0?y:o),P.x={transition:o.on?0:50},P.size=50;const j=[];if(typeof _<"u")for(let B in _[Symbol.for("config")].props)delete P[_[Symbol.for("config")].props[B]],j.push(_[Symbol.for("config")].props[B]);s[1].populate(P),x===!0&&(M-=1),i=s[1];const H={};C={transition:o.on?0:50},Array.isArray(C)===!0&&(C=v(C).slice(0)),H.x=C,H.size=50,C=o.primaryColor,Array.isArray(C)===!0&&(C=v(C).slice(0)),H.color=C,m=H.is||"Circle";let $;if(typeof m=="string"){if($=l.components&&l.components[m]||h[m],!$)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);return s[2]=$.call(null,{props:H},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],y=s[2],x=!0):i=s[2][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),s},effects:[function(i,o,l,h,g,v){o[0].set("color",i.bgColor)},function(i,o,l,h,g,v){o[0].set("effects",[{type:"radius",props:{radius:25}}])},function(i,o,l,h,g,v){(typeof skip1>"u"||skip1.indexOf("x")===-1)&&o[1].set("x",{transition:i.on?0:50})},function(i,o,l,h,g,v){o[2][Symbol.for("props")].x={transition:i.on?0:50}},function(i,o,l,h,g,v){o[2][Symbol.for("props")].color=i.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),WL=Je.Component("Bar",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w={value:o.w,duration:o.duration},m.h={value:o.h,duration:o.duration},m.color=o.bgColor,m.x=o.index*(o.w+o.w/4),m.effects=[{type:"radius",props:{radius:10}}],s[0].populate(m),i=s[0];const C={};return s[1]=this.element({parent:i||"root"},o),C.w=o.w,C.y={transition:{value:o.h-o.innerH,duration:o.duration}},C.h={transition:{value:o.innerH,duration:o.duration}},C.color=o.primaryColor,C.effects=[{type:"radius",props:{radius:10}}],s[1].populate(C),s},effects:[function(i,o,l,h,g,v){o[0].set("w",{value:i.w,duration:i.duration})},function(i,o,l,h,g,v){o[0].set("h",{value:i.h,duration:i.duration})},function(i,o,l,h,g,v){o[0].set("color",i.bgColor)},function(i,o,l,h,g,v){o[0].set("x",i.index*(i.w+i.w/4))},function(i,o,l,h,g,v){o[0].set("effects",[{type:"radius",props:{radius:10}}])},function(i,o,l,h,g,v){o[1].set("w",i.w)},function(i,o,l,h,g,v){o[1].set("y",{transition:{value:i.h-i.innerH,duration:i.duration}})},function(i,o,l,h,g,v){o[1].set("h",{transition:{value:i.innerH,duration:i.duration}})},function(i,o,l,h,g,v){o[1].set("color",i.primaryColor)},function(i,o,l,h,g,v){o[1].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state(){return{h:200,innerH:0,duration:400}},hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size,this.size==="large"?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),XL=Je.Component("Theming",{components:{Bar:WL,Toggle:GL},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),b.w=1920,b.h=1080,b.color={transition:o.$colors.get("bg")},s[0].populate(b),x===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},x===!0?y:o),_.y=1020,_.x=1160,_.size=28,_.color=o.$colors.get("color4"),_.content='Use "up", "down", "left" and "right" to change the appearance',_.__textnode=!0,s[1].populate(_),x===!0&&(M-=1),i=s[0];const P={};s[2]=this.element({parent:i||"root"},x===!0?y:o),P.x={transition:(1920-o.$sizes.get("w"))/2},P.y={transition:(1080-o.$sizes.get("h"))/2},s[2].populate(P),x===!0&&(M-=1),i=s[2];const j={};s[3]=this.element({parent:i||"root"},x===!0?y:o),j.x="-250",j.y="-100",j.src="assets/shadow.png",j.w=1e3,j.h=900,j.alpha=.5,s[3].populate(j),x===!0&&(M-=1),i=s[2];const H={};s[4]=this.element({parent:i||"root"},x===!0?y:o),H.w={transition:o.$sizes.get("w")},H.h={transition:o.$sizes.get("h")},H.color=o.$colors.get("color1"),H.effects=[{type:"radius",props:{radius:o.radius}}],s[4].populate(H),x===!0&&(M-=1),i=s[4];const $={};s[5]=this.element({parent:i||"root"},x===!0?y:o),$.w={transition:o.$sizes.get("w")},$.h=100,$.color=o.$colors.get("color2"),$.effects=[{type:"radius",props:{radius:o.radius}}],s[5].populate($),x===!0&&(M-=1),i=s[4];const B={};s[6]=this.element({parent:i||"root"},x===!0?y:o),B.w={transition:o.$sizes.get("w")},B.h=80,B.y=20,B.color=o.$colors.get("color2"),s[6].populate(B),x===!0&&(M-=1),i=s[4];const te={};s[7]=this.element({parent:i||"root"},x===!0?y:o),te.content=o.text,te.color=o.$colors.get("color3"),te.size=28,te.x=20,te.y=14,te.__textnode=!0,s[7].populate(te),x===!0&&(M-=1);const X=l.components&&l.components.Toggle||h.Toggle;i=s[4];const Y={};s[8]=this.element({parent:i||"root"},x===!0?y:o),Y.x={transition:o.$sizes.get("w")-120},Y.on=o.mode==="dark",Y.bgColor=o.$colors.get("color1"),Y.primaryColor="#22c55e";const ee=[];if(typeof X<"u")for(let je in X[Symbol.for("config")].props)delete Y[X[Symbol.for("config")].props[je]],ee.push(X[Symbol.for("config")].props[je]);s[8].populate(Y),x===!0&&(M-=1),i=s[8];const he={};C={transition:o.$sizes.get("w")-120},Array.isArray(C)===!0&&(C=v(C).slice(0)),he.x=C,C=o.mode==="dark",Array.isArray(C)===!0&&(C=v(C).slice(0)),he.on=C,C=o.$colors.get("color1"),Array.isArray(C)===!0&&(C=v(C).slice(0)),he.bgColor=C,he.primaryColor="#22c55e",m=he.is||"Toggle";let k;if(typeof m=="string"){if(k=l.components&&l.components[m]||h[m],!k)throw new Error('Component "Toggle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(k=m);s[9]=k.call(null,{props:he},s[8],o),s[9][Symbol.for("slots")][0]?(i=s[9][Symbol.for("slots")][0],y=s[9],x=!0):i=s[9][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[2];const V={};s[10]=this.element({parent:i||"root"},x===!0?y:o),V.w=200,V.h={transition:o.$sizes.get("block1.h")},V.x=25,V.y=140,V.color=o.$colors.get("color2"),V.effects=[{type:"radius",props:{radius:o.radius/2}}],s[10].populate(V),x===!0&&(M-=1),i=s[2];const Z={};s[11]=this.element({parent:i||"root"},x===!0?y:o),Z.w={transition:o.$sizes.get("block2.w")},Z.h=o.$sizes.get("block2.h"),Z.x=270,Z.y={transition:o.$sizes.get("block2.y")},Z.color=o.$colors.get("color2"),Z.effects=[{type:"radius",props:{radius:o.radius/2}}],s[11].populate(Z),x===!0&&(M-=1),i=s[2];const oe={};s[12]=this.element({parent:i||"root"},x===!0?y:o),oe.x={transition:o.$sizes.get("graph.x")},oe.y={transition:o.$sizes.get("graph.y")},oe.w=o.$sizes.get("graph.w"),oe.h=o.$sizes.get("graph.h"),oe.color="0x00000000",s[12].populate(oe),x===!0&&(M-=1),i=s[12];const K={};s[13]=this.element({parent:i||"root"},x===!0?y:o),K.x={transition:o.$sizes.get("graph.offset")},K.y={transition:o.$sizes.get("graph.offset")},s[13].populate(K),x===!0&&(M-=1);const ne=l.components&&l.components.Bar||h.Bar;i=s[13];const W={};s[14]=this.element({parent:i||"root"},x===!0?y:o),W.bgColor=o.$colors.get("color2"),W.primaryColor=o.$colors.get("color4"),W.size=o.$sizes.get("graph.size"),W.height=100,W.index=0;const J=[];if(typeof ne<"u")for(let je in ne[Symbol.for("config")].props)delete W[ne[Symbol.for("config")].props[je]],J.push(ne[Symbol.for("config")].props[je]);s[14].populate(W),x===!0&&(M-=1),i=s[14];const fe={};C=o.$colors.get("color2"),Array.isArray(C)===!0&&(C=v(C).slice(0)),fe.bgColor=C,C=o.$colors.get("color4"),Array.isArray(C)===!0&&(C=v(C).slice(0)),fe.primaryColor=C,C=o.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=v(C).slice(0)),fe.size=C,fe.height=100,fe.index=0,m=fe.is||"Bar";let ye;if(typeof m=="string"){if(ye=l.components&&l.components[m]||h[m],!ye)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ye=m);s[15]=ye.call(null,{props:fe},s[14],o),s[15][Symbol.for("slots")][0]?(i=s[15][Symbol.for("slots")][0],y=s[15],x=!0):i=s[15][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const ge=l.components&&l.components.Bar||h.Bar;i=s[13];const pe={};s[16]=this.element({parent:i||"root"},x===!0?y:o),pe.bgColor=o.$colors.get("color2"),pe.primaryColor=o.$colors.get("color4"),pe.size=o.$sizes.get("graph.size"),pe.height=140,pe.index=1;const Ee=[];if(typeof ge<"u")for(let je in ge[Symbol.for("config")].props)delete pe[ge[Symbol.for("config")].props[je]],Ee.push(ge[Symbol.for("config")].props[je]);s[16].populate(pe),x===!0&&(M-=1),i=s[16];const Re={};C=o.$colors.get("color2"),Array.isArray(C)===!0&&(C=v(C).slice(0)),Re.bgColor=C,C=o.$colors.get("color4"),Array.isArray(C)===!0&&(C=v(C).slice(0)),Re.primaryColor=C,C=o.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=v(C).slice(0)),Re.size=C,Re.height=140,Re.index=1,m=Re.is||"Bar";let z;if(typeof m=="string"){if(z=l.components&&l.components[m]||h[m],!z)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[17]=z.call(null,{props:Re},s[16],o),s[17][Symbol.for("slots")][0]?(i=s[17][Symbol.for("slots")][0],y=s[17],x=!0):i=s[17][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Me=l.components&&l.components.Bar||h.Bar;i=s[13];const ve={};s[18]=this.element({parent:i||"root"},x===!0?y:o),ve.bgColor=o.$colors.get("color2"),ve.primaryColor=o.$colors.get("color4"),ve.size=o.$sizes.get("graph.size"),ve.height=170,ve.index=2;const Ue=[];if(typeof Me<"u")for(let je in Me[Symbol.for("config")].props)delete ve[Me[Symbol.for("config")].props[je]],Ue.push(Me[Symbol.for("config")].props[je]);s[18].populate(ve),x===!0&&(M-=1),i=s[18];const De={};C=o.$colors.get("color2"),Array.isArray(C)===!0&&(C=v(C).slice(0)),De.bgColor=C,C=o.$colors.get("color4"),Array.isArray(C)===!0&&(C=v(C).slice(0)),De.primaryColor=C,C=o.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=v(C).slice(0)),De.size=C,De.height=170,De.index=2,m=De.is||"Bar";let We;if(typeof m=="string"){if(We=l.components&&l.components[m]||h[m],!We)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(We=m);s[19]=We.call(null,{props:De},s[18],o),s[19][Symbol.for("slots")][0]?(i=s[19][Symbol.for("slots")][0],y=s[19],x=!0):i=s[19][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Xe=l.components&&l.components.Bar||h.Bar;i=s[13];const ze={};s[20]=this.element({parent:i||"root"},x===!0?y:o),ze.bgColor=o.$colors.get("color2"),ze.primaryColor=o.$colors.get("color4"),ze.size=o.$sizes.get("graph.size"),ze.height=150,ze.index=3;const we=[];if(typeof Xe<"u")for(let je in Xe[Symbol.for("config")].props)delete ze[Xe[Symbol.for("config")].props[je]],we.push(Xe[Symbol.for("config")].props[je]);s[20].populate(ze),x===!0&&(M-=1),i=s[20];const tt={};C=o.$colors.get("color2"),Array.isArray(C)===!0&&(C=v(C).slice(0)),tt.bgColor=C,C=o.$colors.get("color4"),Array.isArray(C)===!0&&(C=v(C).slice(0)),tt.primaryColor=C,C=o.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=v(C).slice(0)),tt.size=C,tt.height=150,tt.index=3,m=tt.is||"Bar";let et;if(typeof m=="string"){if(et=l.components&&l.components[m]||h[m],!et)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(et=m);s[21]=et.call(null,{props:tt},s[20],o),s[21][Symbol.for("slots")][0]?(i=s[21][Symbol.for("slots")][0],y=s[21],x=!0):i=s[21][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Ze=l.components&&l.components.Bar||h.Bar;i=s[13];const it={};s[22]=this.element({parent:i||"root"},x===!0?y:o),it.bgColor=o.$colors.get("color2"),it.primaryColor=o.$colors.get("color4"),it.size=o.$sizes.get("graph.size"),it.height=90,it.index=4;const St=[];if(typeof Ze<"u")for(let je in Ze[Symbol.for("config")].props)delete it[Ze[Symbol.for("config")].props[je]],St.push(Ze[Symbol.for("config")].props[je]);s[22].populate(it),x===!0&&(M-=1),i=s[22];const ut={};C=o.$colors.get("color2"),Array.isArray(C)===!0&&(C=v(C).slice(0)),ut.bgColor=C,C=o.$colors.get("color4"),Array.isArray(C)===!0&&(C=v(C).slice(0)),ut.primaryColor=C,C=o.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=v(C).slice(0)),ut.size=C,ut.height=90,ut.index=4,m=ut.is||"Bar";let It;if(typeof m=="string"){if(It=l.components&&l.components[m]||h[m],!It)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(It=m);return s[23]=It.call(null,{props:ut},s[22],o),s[23][Symbol.for("slots")][0]?(i=s[23][Symbol.for("slots")][0],y=s[23],x=!0):i=s[23][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),s},effects:[function(i,o,l,h,g,v){o[0].set("color",{transition:i.$colors.get("bg")})},function(i,o,l,h,g,v){o[1].set("color",i.$colors.get("color4"))},function(i,o,l,h,g,v){o[2].set("x",{transition:(1920-i.$sizes.get("w"))/2})},function(i,o,l,h,g,v){o[2].set("y",{transition:(1080-i.$sizes.get("h"))/2})},function(i,o,l,h,g,v){o[4].set("w",{transition:i.$sizes.get("w")})},function(i,o,l,h,g,v){o[4].set("h",{transition:i.$sizes.get("h")})},function(i,o,l,h,g,v){o[4].set("color",i.$colors.get("color1"))},function(i,o,l,h,g,v){o[4].set("effects",[{type:"radius",props:{radius:i.radius}}])},function(i,o,l,h,g,v){o[5].set("w",{transition:i.$sizes.get("w")})},function(i,o,l,h,g,v){o[5].set("color",i.$colors.get("color2"))},function(i,o,l,h,g,v){o[5].set("effects",[{type:"radius",props:{radius:i.radius}}])},function(i,o,l,h,g,v){o[6].set("w",{transition:i.$sizes.get("w")})},function(i,o,l,h,g,v){o[6].set("color",i.$colors.get("color2"))},function(i,o,l,h,g,v){o[7].set("content",i.text)},function(i,o,l,h,g,v){o[7].set("color",i.$colors.get("color3"))},function(i,o,l,h,g,v){(typeof skip8>"u"||skip8.indexOf("x")===-1)&&o[8].set("x",{transition:i.$sizes.get("w")-120})},function(i,o,l,h,g,v){(typeof skip8>"u"||skip8.indexOf("on")===-1)&&o[8].set("on",i.mode==="dark")},function(i,o,l,h,g,v){(typeof skip8>"u"||skip8.indexOf("bgColor")===-1)&&o[8].set("bgColor",i.$colors.get("color1"))},function(i,o,l,h,g,v){o[9][Symbol.for("props")].x={transition:i.$sizes.get("w")-120}},function(i,o,l,h,g,v){o[9][Symbol.for("props")].on=i.mode==="dark"},function(i,o,l,h,g,v){o[9][Symbol.for("props")].bgColor=i.$colors.get("color1")},function(i,o,l,h,g,v){o[10].set("h",{transition:i.$sizes.get("block1.h")})},function(i,o,l,h,g,v){o[10].set("color",i.$colors.get("color2"))},function(i,o,l,h,g,v){o[10].set("effects",[{type:"radius",props:{radius:i.radius/2}}])},function(i,o,l,h,g,v){o[11].set("w",{transition:i.$sizes.get("block2.w")})},function(i,o,l,h,g,v){o[11].set("h",i.$sizes.get("block2.h"))},function(i,o,l,h,g,v){o[11].set("y",{transition:i.$sizes.get("block2.y")})},function(i,o,l,h,g,v){o[11].set("color",i.$colors.get("color2"))},function(i,o,l,h,g,v){o[11].set("effects",[{type:"radius",props:{radius:i.radius/2}}])},function(i,o,l,h,g,v){o[12].set("x",{transition:i.$sizes.get("graph.x")})},function(i,o,l,h,g,v){o[12].set("y",{transition:i.$sizes.get("graph.y")})},function(i,o,l,h,g,v){o[12].set("w",i.$sizes.get("graph.w"))},function(i,o,l,h,g,v){o[12].set("h",i.$sizes.get("graph.h"))},function(i,o,l,h,g,v){o[13].set("x",{transition:i.$sizes.get("graph.offset")})},function(i,o,l,h,g,v){o[13].set("y",{transition:i.$sizes.get("graph.offset")})},function(i,o,l,h,g,v){(typeof skip14>"u"||skip14.indexOf("bgColor")===-1)&&o[14].set("bgColor",i.$colors.get("color2"))},function(i,o,l,h,g,v){(typeof skip14>"u"||skip14.indexOf("primaryColor")===-1)&&o[14].set("primaryColor",i.$colors.get("color4"))},function(i,o,l,h,g,v){(typeof skip14>"u"||skip14.indexOf("size")===-1)&&o[14].set("size",i.$sizes.get("graph.size"))},function(i,o,l,h,g,v){o[15][Symbol.for("props")].bgColor=i.$colors.get("color2")},function(i,o,l,h,g,v){o[15][Symbol.for("props")].primaryColor=i.$colors.get("color4")},function(i,o,l,h,g,v){o[15][Symbol.for("props")].size=i.$sizes.get("graph.size")},function(i,o,l,h,g,v){(typeof skip16>"u"||skip16.indexOf("bgColor")===-1)&&o[16].set("bgColor",i.$colors.get("color2"))},function(i,o,l,h,g,v){(typeof skip16>"u"||skip16.indexOf("primaryColor")===-1)&&o[16].set("primaryColor",i.$colors.get("color4"))},function(i,o,l,h,g,v){(typeof skip16>"u"||skip16.indexOf("size")===-1)&&o[16].set("size",i.$sizes.get("graph.size"))},function(i,o,l,h,g,v){o[17][Symbol.for("props")].bgColor=i.$colors.get("color2")},function(i,o,l,h,g,v){o[17][Symbol.for("props")].primaryColor=i.$colors.get("color4")},function(i,o,l,h,g,v){o[17][Symbol.for("props")].size=i.$sizes.get("graph.size")},function(i,o,l,h,g,v){(typeof skip18>"u"||skip18.indexOf("bgColor")===-1)&&o[18].set("bgColor",i.$colors.get("color2"))},function(i,o,l,h,g,v){(typeof skip18>"u"||skip18.indexOf("primaryColor")===-1)&&o[18].set("primaryColor",i.$colors.get("color4"))},function(i,o,l,h,g,v){(typeof skip18>"u"||skip18.indexOf("size")===-1)&&o[18].set("size",i.$sizes.get("graph.size"))},function(i,o,l,h,g,v){o[19][Symbol.for("props")].bgColor=i.$colors.get("color2")},function(i,o,l,h,g,v){o[19][Symbol.for("props")].primaryColor=i.$colors.get("color4")},function(i,o,l,h,g,v){o[19][Symbol.for("props")].size=i.$sizes.get("graph.size")},function(i,o,l,h,g,v){(typeof skip20>"u"||skip20.indexOf("bgColor")===-1)&&o[20].set("bgColor",i.$colors.get("color2"))},function(i,o,l,h,g,v){(typeof skip20>"u"||skip20.indexOf("primaryColor")===-1)&&o[20].set("primaryColor",i.$colors.get("color4"))},function(i,o,l,h,g,v){(typeof skip20>"u"||skip20.indexOf("size")===-1)&&o[20].set("size",i.$sizes.get("graph.size"))},function(i,o,l,h,g,v){o[21][Symbol.for("props")].bgColor=i.$colors.get("color2")},function(i,o,l,h,g,v){o[21][Symbol.for("props")].primaryColor=i.$colors.get("color4")},function(i,o,l,h,g,v){o[21][Symbol.for("props")].size=i.$sizes.get("graph.size")},function(i,o,l,h,g,v){(typeof skip22>"u"||skip22.indexOf("bgColor")===-1)&&o[22].set("bgColor",i.$colors.get("color2"))},function(i,o,l,h,g,v){(typeof skip22>"u"||skip22.indexOf("primaryColor")===-1)&&o[22].set("primaryColor",i.$colors.get("color4"))},function(i,o,l,h,g,v){(typeof skip22>"u"||skip22.indexOf("size")===-1)&&o[22].set("size",i.$sizes.get("graph.size"))},function(i,o,l,h,g,v){o[23][Symbol.for("props")].bgColor=i.$colors.get("color2")},function(i,o,l,h,g,v){o[23][Symbol.for("props")].primaryColor=i.$colors.get("color4")},function(i,o,l,h,g,v){o[23][Symbol.for("props")].size=i.$sizes.get("graph.size")}],context:{}},state(){return{mode:"dark",sizes:"small",radius:20}},watch:{mode(f){this.$colors.set(f)},sizes(f){this.$sizes.set(f)}},computed:{text(){return this.mode,this.mode==="dark"?"Dark mode":"Light mode"}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.sizes="large"},down(){this.sizes="small"}}}),KL="ABC123",qL="https://8b4fa39d.lightningjs.workers.dev";let _T,RT;const YL="w185",QL={headers:{"Content-Type":"application/json",Authorization:"Bearer "+KL}};function kC(f,i=YL){return RT+i+f}function ZL(...f){return _T?mg(...f):LT().then(()=>mg(...f))}function mg(f,i={}){return fetch(qL+f,{...QL,...i}).then(o=>o.json())}function LT(){return mg("/configuration").then(f=>(_T=f,RT=f.images.secure_base_url,f))}const Tg={get:ZL,loadConfig:LT},AC=f=>Tg.get(`/${f}/popular`).then(DT),DT=f=>f.results.filter(o=>!o.adult).map(o=>({poster:kC(o.poster_path||o.profile_path),background:kC(o.backdrop_path,"w1280"),identifier:o.id,title:o.title||o.name,overview:o.overview})),bu=f=>{const i=Array.isArray(f)?f:[f];return JL("movie").then(({genres:o})=>{let l=[];return o.forEach(h=>{i.includes(h.name)&&l.push(h.id)}),Tg.get(`/discover/movie?with_genres=${l.join()}`).then(DT)})},JL=f=>Tg.get(`/genre/${f}/list`),e6=Je.Component("Poster",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=1280,m.h=720,m.x=o.x,m.src=o.item.background,m.color="{top: '0xffffffff', bottom: '0x000000ff'}",m.scale={transition:{value:o.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.alpha={transition:{value:o.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.w=185,y.h=278,y.x=54,y.y=220,y.src=o.item.poster,s[2].populate(y),i=s[1];const x={};s[3]=this.element({parent:i||"root"},o),x.content=o.item.title,x.font="raleway",x.y=520,x.x=54,x.size=64,x.maxwidth=1e3,x.maxlines=1,x.__textnode=!0,s[3].populate(x),i=s[1];const M={};return s[4]=this.element({parent:i||"root"},o),M.content=o.item.overview,M.size=21,M.y=620,M.x=60,M.color="0xccccccff",M.maxwidth=1e3,M.maxlines=2,M.lineheight=36,M.__textnode=!0,s[4].populate(M),s},effects:[function(i,o,l,h,g,v){o[0].set("src",i.item.background)},function(i,o,l,h,g,v){o[0].set("scale",{transition:{value:i.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(i,o,l,h,g,v){o[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(i,o,l,h,g,v){o[1].set("alpha",{transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(i,o,l,h,g,v){o[2].set("src",i.item.poster)},function(i,o,l,h,g,v){o[3].set("content",i.item.title)},function(i,o,l,h,g,v){o[4].set("content",i.item.overview)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,zIndex:1,alpha:0}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1},unfocus(){this.scale=1,this.alpha=0}}}),t6=Je.Component("Poster",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.w=185,m.h=278,m.x=o.x,m.src=o.item.poster,m.scale={transition:{value:o.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),s},effects:[function(i,o,l,h,g,v){o[0].set("src",i.item.poster)},function(i,o,l,h,g,v){o[0].set("scale",{transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(i,o,l,h,g,v){o[0].set("_effects",[{type:"radius",props:{radius:8}}])}],context:{}},props:["src","index","item","width"],state(){return{scale:1,color:"#333"}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.color="#fff",this.scale=1.1},unfocus(){this.color="#333",this.scale=1}}}),n6=Je.Component("PosterTitle",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=185,m.h=278,m.x=o.x,m.src=o.item.poster,m.scale={transition:{value:o.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.x=10,C.y={transition:{value:o.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},C.alpha={transition:{value:o.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[1].populate(C),i=s[1];const y={};return s[2]=this.element({parent:i||"root"},o),y.content=o.item.title,y.font="raleway",y.size=22,y.maxwidth=185,y.maxlines=2,y.lineheight=28,y.__textnode=!0,s[2].populate(y),s},effects:[function(i,o,l,h,g,v){o[0].set("src",i.item.poster)},function(i,o,l,h,g,v){o[0].set("scale",{transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(i,o,l,h,g,v){o[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(i,o,l,h,g,v){o[1].set("y",{transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(i,o,l,h,g,v){o[1].set("alpha",{transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(i,o,l,h,g,v){o[2].set("content",i.item.title)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,alpha:0,y:278}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1,this.y=288},unfocus(){this.scale=1,this.alpha=0,this.y=278}}}),o6=Je.Component("TmdbRow",{components:{Hero:e6,Poster:t6,PosterTitle:n6},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1;const x={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(x),i=s[0];const M={};s[1]=this.element({parent:i||"root"},y===!0?C:o),M.x={transition:{value:o.x,duration:300,easing:"ease-in-out"}},M.y=80,s[1].populate(M),i=s[1];const b=[];let _,P;const j=($=[],B,te)=>{const X=v($),Y=new Set;let ee=X.length;const he={};for(_=he.from||0,P=("to"in he)?he.to:X.length;ee--;){const oe=X[ee];ee<P&&ee>=_&&Y.add(""+oe.identifier)}let k=te.length;for(;k--;)if(Y.has(te[k])===!1){const oe=te[k];B[2][oe]&&B[2][oe].destroy(),delete B[2][oe],B[3][oe]&&B[3][oe].destroy(),delete B[3][oe]}te.length=0;const V=X.length,Z=[];for(let oe=0;oe<V;oe++){if(oe<_||oe>=P)continue;const K=Object.create(o);i=B[1],K.item=X[oe],K.index=oe,K.key=""+K.item.identifier,K.__ref="poster"+oe,te.push(K.key);const ne=l.components&&l.components.Component||h.Component;B[2]===void 0&&(B[2]={});const W={};B[2][K.key]===void 0&&(B[2][K.key]=this.element({parent:i||"root"},y===!0?C:o)),W.is=K.type,W.index=K.index,W.item=K.item,W.ref=K.__ref,W.width=K.width;const J=[];if(typeof ne<"u")for(let ye in ne[Symbol.for("config")].props)delete W[ne[Symbol.for("config")].props[ye]],J.push(ne[Symbol.for("config")].props[ye]);B[2][K.key].nodeId===void 0&&B[2][K.key].populate(W),B[3]===void 0&&(B[3]={}),i=B[2][K.key];const fe={};if(B[3][K.key]===void 0){fe.is=K.type,fe.index=K.index,fe.item=K.item,fe.ref=K.__ref,fe.width=K.width,m=fe.is||"Component";let ye;if(typeof m=="string"){if(ye=l.components&&l.components[m]||h[m],!ye)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ye=m);B[3][K.key]=ye.call(null,{props:fe},B[2][K.key],o),B[3][K.key][Symbol.for("slots")][0]?(i=B[3][K.key][Symbol.for("slots")][0],C=B[3][K.key],y=!0):i=B[3][K.key][Symbol.for("children")][0]}}return Z};let H;return g(()=>{o[Symbol.for("removeGlobalEffects")](H),H=null,H=j(o.items,s,b)},["items"]),s},effects:[function(i,o,l,h,g,v){o[1].set("x",{transition:{value:i.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state(){return{focused:0,offset:0}},hooks:{focus(){this.$trigger("focused")}},computed:{x(){return this.focused,this.items,this.width,150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused(f){const i=this.$select("poster"+f);i&&i.$focus&&(i.$focus(),this.$emit("posterSelect",this.items[f]))}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),i6=Je.Component("Background",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.src=o.bg1,C.w=1920,C.h=1080,C.color="{top: '0xffffffff', bottom: '0x000000ff'}",C.alpha={transition:{value:o.alpha1,duration:400,easing:"ease-in"}},s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.src=o.bg2,y.w=1920,y.h=1080,y.color="{top: '0xffffffff', bottom: '0x000000ff'}",y.alpha={transition:{value:o.alpha2,duration:400,easing:"ease-in"}},s[2].populate(y),i=s[0];const x={};return s[3]=this.element({parent:i||"root"},o),x.w=1920,x.h=1080,x.src="assets/gradient.png",x.color="0x8866ddff",x.alpha=.8,s[3].populate(x),s},effects:[function(i,o,l,h,g,v){o[1].set("src",i.bg1)},function(i,o,l,h,g,v){o[1].set("alpha",{transition:{value:i.alpha1,duration:400,easing:"ease-in"}})},function(i,o,l,h,g,v){o[2].set("src",i.bg2)},function(i,o,l,h,g,v){o[2].set("alpha",{transition:{value:i.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["bgImg"],state(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{bgImg(f){this.counter=(this.counter+1)%2,this.counter===0?(this.bg1=f,this.alpha1=.8,this.alpha2=0):(this.bg2=f,this.alpha1=0,this.alpha2=.8)}}}),r6=Je.Component("TMdb",{components:{Background:i6,TmdbRow:o6},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),b.w=1920,b.h=1080,b.color="0x000000ff",s[0].populate(b),x===!0&&(M-=1);const _=l.components&&l.components.Background||h.Background;i=s[0];const P={};s[1]=this.element({parent:i||"root"},x===!0?y:o),P.bgImg=o.src;const j=[];if(typeof _<"u")for(let ne in _[Symbol.for("config")].props)delete P[_[Symbol.for("config")].props[ne]],j.push(_[Symbol.for("config")].props[ne]);s[1].populate(P),x===!0&&(M-=1),i=s[1];const H={};C=o.src,Array.isArray(C)===!0&&(C=v(C).slice(0)),H.bgImg=C,m=H.is||"Background";let $;if(typeof m=="string"){if($=l.components&&l.components[m]||h[m],!$)throw new Error('Component "Background" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);s[2]=$.call(null,{props:H},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],y=s[2],x=!0):i=s[2][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[0];const B={};s[3]=this.element({parent:i||"root"},x===!0?y:o),s[3].populate(B),x===!0&&(M-=1),i=s[3];const te={};s[4]=this.element({parent:i||"root"},x===!0?y:o),te.y={transition:{value:o.contentY,duration:o.duration}},te.alpha={transition:{value:o.alpha,duration:o.duration}},s[4].populate(te),x===!0&&(M-=1),i=s[4];const X={};s[5]=this.element({parent:i||"root"},x===!0?y:o),X.src="assets/logo.png",X.x=140,X.y=90,X.w=243,X.h=52,s[5].populate(X),x===!0&&(M-=1),i=s[4];const Y={};s[6]=this.element({parent:i||"root"},x===!0?y:o),Y.content=o.title,Y.font="raleway",Y.size=80,Y.x=140,Y.y=300,Y.maxwidth=1e3,Y["@loaded"]=o.positionText&&o.positionText.bind(o),Y.maxlines=1,Y.__textnode=!0,s[6].populate(Y),x===!0&&(M-=1),i=s[4];const ee={};s[7]=this.element({parent:i||"root"},x===!0?y:o),ee.content=o.overview,ee.maxwidth=880,ee.x=140,ee.y=430,ee.lineheight=40,ee.maxlines=3,ee.__textnode=!0,s[7].populate(ee),x===!0&&(M-=1),i=s[3];const he={};s[8]=this.element({parent:i||"root"},x===!0?y:o),he.y={transition:{value:o.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},s[8].populate(he),x===!0&&(M-=1),i=s[8];const k=[];let V,Z;const oe=(ne=[],W,J)=>{const fe=v(ne),ye=new Set;let ge=fe.length;const pe={};for(V=pe.from||0,Z=("to"in pe)?pe.to:fe.length;ge--;){const Me=fe[ge];ge<Z&&ge>=V&&ye.add(""+Me.title)}let Ee=J.length;for(;Ee--;)if(ye.has(J[Ee])===!1){const Me=J[Ee];W[9][Me]&&W[9][Me].destroy(),delete W[9][Me],W[10][Me]&&W[10][Me].destroy(),delete W[10][Me]}J.length=0;const Re=fe.length,z=[];for(let Me=0;Me<Re;Me++){if(Me<V||Me>=Z)continue;const ve=Object.create(o);i=W[8],ve.row=fe[Me],ve.index=Me,ve.key=""+ve.row.title,ve.__ref="row"+Me,J.push(ve.key);const Ue=l.components&&l.components.TmdbRow||h.TmdbRow;W[9]===void 0&&(W[9]={});const De={};W[9][ve.key]===void 0&&(W[9][ve.key]=this.element({parent:i||"root"},x===!0?y:o)),De.title=ve.row.title,De.items=ve.row.items,De.type=ve.row.type,De.width=ve.row.width,De.y=ve.row.y,De.ref=ve.__ref;const We=[];if(typeof Ue<"u")for(let et in Ue[Symbol.for("config")].props)delete De[Ue[Symbol.for("config")].props[et]],We.push(Ue[Symbol.for("config")].props[et]);W[9][ve.key].nodeId===void 0&&(W[9][ve.key].populate(De),x===!0&&(M-=1)),W[10]===void 0&&(W[10]={}),i=W[9][ve.key];const Xe={};if(W[10][ve.key]===void 0){Xe.title=ve.row.title,C=ve.row.items,Array.isArray(C)===!0&&(C=v(C).slice(0)),Xe.items=C,C=ve.row.type,Array.isArray(C)===!0&&(C=v(C).slice(0)),Xe.type=C,C=ve.row.width,Array.isArray(C)===!0&&(C=v(C).slice(0)),Xe.width=C,Xe.y=ve.row.y,Xe.ref=ve.__ref,m=Xe.is||"TmdbRow";let et;if(typeof m=="string"){if(et=l.components&&l.components[m]||h[m],!et)throw new Error('Component "TmdbRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(et=m);W[10][ve.key]=et.call(null,{props:Xe},W[9][ve.key],o),W[10][ve.key][Symbol.for("slots")][0]?(i=W[10][ve.key][Symbol.for("slots")][0],y=W[10][ve.key],x=!0):i=W[10][ve.key][Symbol.for("children")][0]}let ze=()=>{(typeof We>"u"||We.indexOf("items")===-1)&&W[9][ve.key].set("items",ve.row.items)};g(ze,null),z.push(ze);let we=()=>{(typeof We>"u"||We.indexOf("type")===-1)&&W[9][ve.key].set("type",ve.row.type)};g(we,null),z.push(we);let tt=()=>{(typeof We>"u"||We.indexOf("width")===-1)&&W[9][ve.key].set("width",ve.row.width)};g(tt,null),z.push(tt),W[10][ve.key][Symbol.for("props")].items=ve.row.items,W[10][ve.key][Symbol.for("props")].type=ve.row.type,W[10][ve.key][Symbol.for("props")].width=ve.row.width}return z};let K;return g(()=>{o[Symbol.for("removeGlobalEffects")](K),K=null,K=oe(o.rows,s,k)},["rows"]),s},effects:[function(i,o,l,h,g,v){(typeof skip1>"u"||skip1.indexOf("bgImg")===-1)&&o[1].set("bgImg",i.src)},function(i,o,l,h,g,v){o[2][Symbol.for("props")].bgImg=i.src},function(i,o,l,h,g,v){o[4].set("y",{transition:{value:i.contentY,duration:i.duration}})},function(i,o,l,h,g,v){o[4].set("alpha",{transition:{value:i.alpha,duration:i.duration}})},function(i,o,l,h,g,v){o[6].set("content",i.title)},function(i,o,l,h,g,v){o[7].set("content",i.overview)},function(i,o,l,h,g,v){o[8].set("y",{transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state(){return{rows:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}},watch:{focused(f){const i=this.$select("row"+f);i&&i.$focus&&i.$focus()}},hooks:{async init(){this.rows=[{title:"Popular Movies",items:await AC("movie"),type:"Poster",width:215,y:0},{title:"Best Western movies",items:await bu(["Western"]),type:"Hero",width:1370,y:358},{title:"Best Comedy movies",items:await bu(["Comedy"]),type:"PosterTitle",width:215,y:1158},{title:"Popular TV shows",items:await AC("tv"),type:"PosterTitle",width:215,y:1536},{title:"Best Adventure and Action movies",items:await bu(["adventure","action"]),type:"Hero",width:1370,y:1914},{title:"Best Documentaries",items:await bu("Documentary"),type:"PosterTitle",width:215,y:2714},{title:"Best Western movies 2",items:await bu("Western"),type:"PosterTitle",width:215,y:3092}],this.focused=0},ready(){this.$listen("posterSelect",f=>{this.focused===0&&(this.src=f.background,this.title=f.title,this.overview=f.overview)})},focus(){this.$trigger("focused")}},input:{up(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0},down(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0}}}),s6=Je.Component("MenuSprite",{code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(b),x===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},x===!0?y:o),_.src="assets/menusprite.png",_.x=748,_.y=120,_.w=425,_.h=340,s[1].populate(_),x===!0&&(M-=1),i=s[0];const P={};s[2]=this.element({parent:i||"root"},x===!0?y:o),P.y=680,P.x=560,s[2].populate(P),x===!0&&(M-=1);const j=l.components&&l.components.Sprite||h.Sprite;i=s[2];const H={};s[3]=this.element({parent:i||"root"},x===!0?y:o),H.image="assets/menusprite.png",H.x=0,H.w=140,H.h=140,H.map=o.map,H.frame=o.icon1;const $=[];if(typeof j<"u")for(let pe in j[Symbol.for("config")].props)delete H[j[Symbol.for("config")].props[pe]],$.push(j[Symbol.for("config")].props[pe]);s[3].populate(H),x===!0&&(M-=1),i=s[3];const B={};B.image="assets/menusprite.png",B.x=0,B.w=140,B.h=140,B.map=o.map,C=o.icon1,Array.isArray(C)===!0&&(C=v(C).slice(0)),B.frame=C,m=B.is||"Sprite";let te;if(typeof m=="string"){if(te=l.components&&l.components[m]||h[m],!te)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(te=m);s[4]=te.call(null,{props:B},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],y=s[4],x=!0):i=s[4][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const X=l.components&&l.components.Sprite||h.Sprite;i=s[2];const Y={};s[5]=this.element({parent:i||"root"},x===!0?y:o),Y.image="assets/menusprite.png",Y.x=220,Y.w=140,Y.h=140,Y.map=o.map,Y.frame="icon2";const ee=[];if(typeof X<"u")for(let pe in X[Symbol.for("config")].props)delete Y[X[Symbol.for("config")].props[pe]],ee.push(X[Symbol.for("config")].props[pe]);s[5].populate(Y),x===!0&&(M-=1),i=s[5];const he={};he.image="assets/menusprite.png",he.x=220,he.w=140,he.h=140,he.map=o.map,he.frame="icon2",m=he.is||"Sprite";let k;if(typeof m=="string"){if(k=l.components&&l.components[m]||h[m],!k)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(k=m);s[6]=k.call(null,{props:he},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],y=s[6],x=!0):i=s[6][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const V=l.components&&l.components.Sprite||h.Sprite;i=s[2];const Z={};s[7]=this.element({parent:i||"root"},x===!0?y:o),Z.image="assets/menusprite.png",Z.x=440,Z.w=140,Z.h=140,Z.map=o.map,Z.frame="icon3";const oe=[];if(typeof V<"u")for(let pe in V[Symbol.for("config")].props)delete Z[V[Symbol.for("config")].props[pe]],oe.push(V[Symbol.for("config")].props[pe]);s[7].populate(Z),x===!0&&(M-=1),i=s[7];const K={};K.image="assets/menusprite.png",K.x=440,K.w=140,K.h=140,K.map=o.map,K.frame="icon3",m=K.is||"Sprite";let ne;if(typeof m=="string"){if(ne=l.components&&l.components[m]||h[m],!ne)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ne=m);s[8]=ne.call(null,{props:K},s[7],o),s[8][Symbol.for("slots")][0]?(i=s[8][Symbol.for("slots")][0],y=s[8],x=!0):i=s[8][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const W=l.components&&l.components.Sprite||h.Sprite;i=s[2];const J={};s[9]=this.element({parent:i||"root"},x===!0?y:o),J.image="assets/menusprite.png",J.x=660,J.w=140,J.h=140,J.map=o.map,J.frame="icon4_unfocus";const fe=[];if(typeof W<"u")for(let pe in W[Symbol.for("config")].props)delete J[W[Symbol.for("config")].props[pe]],fe.push(W[Symbol.for("config")].props[pe]);s[9].populate(J),x===!0&&(M-=1),i=s[9];const ye={};ye.image="assets/menusprite.png",ye.x=660,ye.w=140,ye.h=140,ye.map=o.map,ye.frame="icon4_unfocus",m=ye.is||"Sprite";let ge;if(typeof m=="string"){if(ge=l.components&&l.components[m]||h[m],!ge)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ge=m);return s[10]=ge.call(null,{props:ye},s[9],o),s[10][Symbol.for("slots")][0]?(i=s[10][Symbol.for("slots")][0],y=s[10],x=!0):i=s[10][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),s},effects:[function(i,o,l,h,g,v){(typeof skip3>"u"||skip3.indexOf("frame")===-1)&&o[3].set("frame",i.icon1)},function(i,o,l,h,g,v){o[4][Symbol.for("props")].frame=i.icon1}],context:{}},state(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready(){this.$setInterval(()=>{this.icon1=this.icon1==="icon1_unfocus"?"icon1_focus":"icon1_unfocus"},2e3)}}}),Dh=["menu"],a6=Je.Component("Sprites",{components:{MenuSprite:s6},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(b),x===!0&&(M-=1);const _=l.components&&l.components.MenuSprite||h.MenuSprite;i=s[0];const P={};s[1]=this.element({parent:i||"root"},x===!0?y:o),P.show=o.currentSprite==="menu";const j=[];if(typeof _<"u")for(let B in _[Symbol.for("config")].props)delete P[_[Symbol.for("config")].props[B]],j.push(_[Symbol.for("config")].props[B]);s[1].populate(P),x===!0&&(M-=1),i=s[1];const H={};C=o.currentSprite==="menu",Array.isArray(C)===!0&&(C=v(C).slice(0)),H.show=C,m=H.is||"MenuSprite";let $;if(typeof m=="string"){if($=l.components&&l.components[m]||h[m],!$)throw new Error('Component "MenuSprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);return s[2]=$.call(null,{props:H},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],y=s[2],x=!0):i=s[2][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),s},effects:[function(i,o,l,h,g,v){(typeof skip1>"u"||skip1.indexOf("show")===-1)&&o[1].set("show",i.currentSprite==="menu")},function(i,o,l,h,g,v){o[2][Symbol.for("props")].show=i.currentSprite==="menu"}],context:{}},state(){return{currentSprite:"menu"}},input:{down(){const f=Dh.indexOf(this.currentSprite);f<Dh.length-1?this.currentSprite=Dh[f+1]:this.currentSprite=Dh[0]}}}),nd=Je.Component("Button",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.w=300,m.h=80,m.color=o.color||"0xff0000ff",m.effects=[{type:"radius",props:{radius:20}}],m.alpha={transition:o.alpha},m.scale={transition:o.scale},m.rotation=o.rotate,s[0].populate(m),s},effects:[function(i,o,l,h,g,v){o[0].set("effects",[{type:"radius",props:{radius:20}}])},function(i,o,l,h,g,v){o[0].set("alpha",{transition:i.alpha})},function(i,o,l,h,g,v){o[0].set("scale",{transition:i.scale})},function(i,o,l,h,g,v){o[0].set("rotation",i.rotate)}],context:{}},props:["color"],state(){return{alpha:.4,scale:1,rotate:0}},hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=this.scale===1?1.2:1},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.rotate=0}},input:{enter(){this.rotate=this.rotate===0?-4:0,this.scale=this.scale===1.2?1.3:1.2}}}),l6=Je.Component("Menu",{components:{Button:nd},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),M.x={transition:o.x},M.w=400,M.h=1080,M.color="{right: '0x64748baa', left: '0x475569aa'}",s[0].populate(M),y===!0&&(x-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.x=50,b.y=40,s[1].populate(b),y===!0&&(x-=1);const _=l.components&&l.components.Button||h.Button;i=s[1];const P={};s[2]=this.element({parent:i||"root"},y===!0?C:o),P.color="0xe4e4e7ff",P.ref="menu1";const j=[];if(typeof _<"u")for(let ye in _[Symbol.for("config")].props)delete P[_[Symbol.for("config")].props[ye]],j.push(_[Symbol.for("config")].props[ye]);s[2].populate(P),y===!0&&(x-=1),i=s[2];const H={};H.color="0xe4e4e7ff",H.ref="menu1",m=H.is||"Button";let $;if(typeof m=="string"){if($=l.components&&l.components[m]||h[m],!$)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);s[3]=$.call(null,{props:H},s[2],o),s[3][Symbol.for("slots")][0]?(i=s[3][Symbol.for("slots")][0],C=s[3],y=!0):i=s[3][Symbol.for("children")][0],y===!0&&x===0&&(y=!1);const B=l.components&&l.components.Button||h.Button;i=s[1];const te={};s[4]=this.element({parent:i||"root"},y===!0?C:o),te.color="0xe4e4e7ff",te.y=100,te.ref="menu2";const X=[];if(typeof B<"u")for(let ye in B[Symbol.for("config")].props)delete te[B[Symbol.for("config")].props[ye]],X.push(B[Symbol.for("config")].props[ye]);s[4].populate(te),y===!0&&(x-=1),i=s[4];const Y={};Y.color="0xe4e4e7ff",Y.y=100,Y.ref="menu2",m=Y.is||"Button";let ee;if(typeof m=="string"){if(ee=l.components&&l.components[m]||h[m],!ee)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);s[5]=ee.call(null,{props:Y},s[4],o),s[5][Symbol.for("slots")][0]?(i=s[5][Symbol.for("slots")][0],C=s[5],y=!0):i=s[5][Symbol.for("children")][0],y===!0&&x===0&&(y=!1);const he=l.components&&l.components.Button||h.Button;i=s[1];const k={};s[6]=this.element({parent:i||"root"},y===!0?C:o),k.color="0xe4e4e7ff",k.y=200,k.ref="menu3";const V=[];if(typeof he<"u")for(let ye in he[Symbol.for("config")].props)delete k[he[Symbol.for("config")].props[ye]],V.push(he[Symbol.for("config")].props[ye]);s[6].populate(k),y===!0&&(x-=1),i=s[6];const Z={};Z.color="0xe4e4e7ff",Z.y=200,Z.ref="menu3",m=Z.is||"Button";let oe;if(typeof m=="string"){if(oe=l.components&&l.components[m]||h[m],!oe)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(oe=m);s[7]=oe.call(null,{props:Z},s[6],o),s[7][Symbol.for("slots")][0]?(i=s[7][Symbol.for("slots")][0],C=s[7],y=!0):i=s[7][Symbol.for("children")][0],y===!0&&x===0&&(y=!1);const K=l.components&&l.components.Button||h.Button;i=s[1];const ne={};s[8]=this.element({parent:i||"root"},y===!0?C:o),ne.color="0xe4e4e7ff",ne.y=300,ne.ref="menu4";const W=[];if(typeof K<"u")for(let ye in K[Symbol.for("config")].props)delete ne[K[Symbol.for("config")].props[ye]],W.push(K[Symbol.for("config")].props[ye]);s[8].populate(ne),y===!0&&(x-=1),i=s[8];const J={};J.color="0xe4e4e7ff",J.y=300,J.ref="menu4",m=J.is||"Button";let fe;if(typeof m=="string"){if(fe=l.components&&l.components[m]||h[m],!fe)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fe=m);return s[9]=fe.call(null,{props:J},s[8],o),s[9][Symbol.for("slots")][0]?(i=s[9][Symbol.for("slots")][0],C=s[9],y=!0):i=s[9][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),s},effects:[function(i,o,l,h,g,v){o[0].set("x",{transition:i.x})}],context:{}},state(){return{x:-360,focused:1}},hooks:{focus(){this.$trigger("focused"),this.x=0}},watch:{focused(){const f=this.$select(`menu${this.focused}`);f&&f.$focus&&f.$focus()}},input:{right(){this.parent.$focus(),this.x=-360},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)},left(){}}}),u6=Je.Component("FocusHandling",{components:{Menu:l6,Button:nd},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(b),x===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},x===!0?y:o),_.x=300,_.y=150,s[1].populate(_),x===!0&&(M-=1);const P=l.components&&l.components.Button||h.Button;i=s[1];const j={};s[2]=this.element({parent:i||"root"},x===!0?y:o),j.color="0xef4444ff",j.x=0,j.ref="button1",j.z=o.focused===1?1:0;const H=[];if(typeof P<"u")for(let Pt in P[Symbol.for("config")].props)delete j[P[Symbol.for("config")].props[Pt]],H.push(P[Symbol.for("config")].props[Pt]);s[2].populate(j),x===!0&&(M-=1),i=s[2];const $={};$.color="0xef4444ff",$.x=0,$.ref="button1",C=o.focused===1?1:0,Array.isArray(C)===!0&&(C=v(C).slice(0)),$.z=C,m=$.is||"Button";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);s[3]=B.call(null,{props:$},s[2],o),s[3][Symbol.for("slots")][0]?(i=s[3][Symbol.for("slots")][0],y=s[3],x=!0):i=s[3][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const te=l.components&&l.components.Button||h.Button;i=s[1];const X={};s[4]=this.element({parent:i||"root"},x===!0?y:o),X.color="0xf97316ff",X.x=320,X.ref="button2",X.z=o.focused===2?1:0;const Y=[];if(typeof te<"u")for(let Pt in te[Symbol.for("config")].props)delete X[te[Symbol.for("config")].props[Pt]],Y.push(te[Symbol.for("config")].props[Pt]);s[4].populate(X),x===!0&&(M-=1),i=s[4];const ee={};ee.color="0xf97316ff",ee.x=320,ee.ref="button2",C=o.focused===2?1:0,Array.isArray(C)===!0&&(C=v(C).slice(0)),ee.z=C,m=ee.is||"Button";let he;if(typeof m=="string"){if(he=l.components&&l.components[m]||h[m],!he)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(he=m);s[5]=he.call(null,{props:ee},s[4],o),s[5][Symbol.for("slots")][0]?(i=s[5][Symbol.for("slots")][0],y=s[5],x=!0):i=s[5][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const k=l.components&&l.components.Button||h.Button;i=s[1];const V={};s[6]=this.element({parent:i||"root"},x===!0?y:o),V.color="0x84cc16ff",V.x=640,V.ref="button3",V.z=o.focused===3?1:0;const Z=[];if(typeof k<"u")for(let Pt in k[Symbol.for("config")].props)delete V[k[Symbol.for("config")].props[Pt]],Z.push(k[Symbol.for("config")].props[Pt]);s[6].populate(V),x===!0&&(M-=1),i=s[6];const oe={};oe.color="0x84cc16ff",oe.x=640,oe.ref="button3",C=o.focused===3?1:0,Array.isArray(C)===!0&&(C=v(C).slice(0)),oe.z=C,m=oe.is||"Button";let K;if(typeof m=="string"){if(K=l.components&&l.components[m]||h[m],!K)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(K=m);s[7]=K.call(null,{props:oe},s[6],o),s[7][Symbol.for("slots")][0]?(i=s[7][Symbol.for("slots")][0],y=s[7],x=!0):i=s[7][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const ne=l.components&&l.components.Button||h.Button;i=s[1];const W={};s[8]=this.element({parent:i||"root"},x===!0?y:o),W.color="0x10b981ff",W.x=0,W.y=100,W.ref="button4",W.z=o.focused===4?1:0;const J=[];if(typeof ne<"u")for(let Pt in ne[Symbol.for("config")].props)delete W[ne[Symbol.for("config")].props[Pt]],J.push(ne[Symbol.for("config")].props[Pt]);s[8].populate(W),x===!0&&(M-=1),i=s[8];const fe={};fe.color="0x10b981ff",fe.x=0,fe.y=100,fe.ref="button4",C=o.focused===4?1:0,Array.isArray(C)===!0&&(C=v(C).slice(0)),fe.z=C,m=fe.is||"Button";let ye;if(typeof m=="string"){if(ye=l.components&&l.components[m]||h[m],!ye)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ye=m);s[9]=ye.call(null,{props:fe},s[8],o),s[9][Symbol.for("slots")][0]?(i=s[9][Symbol.for("slots")][0],y=s[9],x=!0):i=s[9][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const ge=l.components&&l.components.Button||h.Button;i=s[1];const pe={};s[10]=this.element({parent:i||"root"},x===!0?y:o),pe.color="0x06b6d4ff",pe.y=100,pe.x=320,pe.ref="button5",pe.z=o.focused===5?1:0;const Ee=[];if(typeof ge<"u")for(let Pt in ge[Symbol.for("config")].props)delete pe[ge[Symbol.for("config")].props[Pt]],Ee.push(ge[Symbol.for("config")].props[Pt]);s[10].populate(pe),x===!0&&(M-=1),i=s[10];const Re={};Re.color="0x06b6d4ff",Re.y=100,Re.x=320,Re.ref="button5",C=o.focused===5?1:0,Array.isArray(C)===!0&&(C=v(C).slice(0)),Re.z=C,m=Re.is||"Button";let z;if(typeof m=="string"){if(z=l.components&&l.components[m]||h[m],!z)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);s[11]=z.call(null,{props:Re},s[10],o),s[11][Symbol.for("slots")][0]?(i=s[11][Symbol.for("slots")][0],y=s[11],x=!0):i=s[11][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Me=l.components&&l.components.Button||h.Button;i=s[1];const ve={};s[12]=this.element({parent:i||"root"},x===!0?y:o),ve.color="0x3b82f6ff",ve.y=100,ve.x=640,ve.ref="button6",ve.z=o.focused===6?1:0;const Ue=[];if(typeof Me<"u")for(let Pt in Me[Symbol.for("config")].props)delete ve[Me[Symbol.for("config")].props[Pt]],Ue.push(Me[Symbol.for("config")].props[Pt]);s[12].populate(ve),x===!0&&(M-=1),i=s[12];const De={};De.color="0x3b82f6ff",De.y=100,De.x=640,De.ref="button6",C=o.focused===6?1:0,Array.isArray(C)===!0&&(C=v(C).slice(0)),De.z=C,m=De.is||"Button";let We;if(typeof m=="string"){if(We=l.components&&l.components[m]||h[m],!We)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(We=m);s[13]=We.call(null,{props:De},s[12],o),s[13][Symbol.for("slots")][0]?(i=s[13][Symbol.for("slots")][0],y=s[13],x=!0):i=s[13][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Xe=l.components&&l.components.Button||h.Button;i=s[1];const ze={};s[14]=this.element({parent:i||"root"},x===!0?y:o),ze.color="0x8b5cf6ff",ze.y=200,ze.x=0,ze.ref="button7",ze.z=o.focused===7?1:0;const we=[];if(typeof Xe<"u")for(let Pt in Xe[Symbol.for("config")].props)delete ze[Xe[Symbol.for("config")].props[Pt]],we.push(Xe[Symbol.for("config")].props[Pt]);s[14].populate(ze),x===!0&&(M-=1),i=s[14];const tt={};tt.color="0x8b5cf6ff",tt.y=200,tt.x=0,tt.ref="button7",C=o.focused===7?1:0,Array.isArray(C)===!0&&(C=v(C).slice(0)),tt.z=C,m=tt.is||"Button";let et;if(typeof m=="string"){if(et=l.components&&l.components[m]||h[m],!et)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(et=m);s[15]=et.call(null,{props:tt},s[14],o),s[15][Symbol.for("slots")][0]?(i=s[15][Symbol.for("slots")][0],y=s[15],x=!0):i=s[15][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Ze=l.components&&l.components.Button||h.Button;i=s[1];const it={};s[16]=this.element({parent:i||"root"},x===!0?y:o),it.color="0xd946efff",it.y=200,it.x=320,it.ref="button8",it.z=o.focused===8?1:0;const St=[];if(typeof Ze<"u")for(let Pt in Ze[Symbol.for("config")].props)delete it[Ze[Symbol.for("config")].props[Pt]],St.push(Ze[Symbol.for("config")].props[Pt]);s[16].populate(it),x===!0&&(M-=1),i=s[16];const ut={};ut.color="0xd946efff",ut.y=200,ut.x=320,ut.ref="button8",C=o.focused===8?1:0,Array.isArray(C)===!0&&(C=v(C).slice(0)),ut.z=C,m=ut.is||"Button";let It;if(typeof m=="string"){if(It=l.components&&l.components[m]||h[m],!It)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(It=m);s[17]=It.call(null,{props:ut},s[16],o),s[17][Symbol.for("slots")][0]?(i=s[17][Symbol.for("slots")][0],y=s[17],x=!0):i=s[17][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const je=l.components&&l.components.Button||h.Button;i=s[1];const at={};s[18]=this.element({parent:i||"root"},x===!0?y:o),at.color="0xf43f5eff",at.y=200,at.x=640,at.ref="button9",at.z=o.focused===9?1:0;const xt=[];if(typeof je<"u")for(let Pt in je[Symbol.for("config")].props)delete at[je[Symbol.for("config")].props[Pt]],xt.push(je[Symbol.for("config")].props[Pt]);s[18].populate(at),x===!0&&(M-=1),i=s[18];const dt={};dt.color="0xf43f5eff",dt.y=200,dt.x=640,dt.ref="button9",C=o.focused===9?1:0,Array.isArray(C)===!0&&(C=v(C).slice(0)),dt.z=C,m=dt.is||"Button";let xn;if(typeof m=="string"){if(xn=l.components&&l.components[m]||h[m],!xn)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xn=m);s[19]=xn.call(null,{props:dt},s[18],o),s[19][Symbol.for("slots")][0]?(i=s[19][Symbol.for("slots")][0],y=s[19],x=!0):i=s[19][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const pn=l.components&&l.components.Menu||h.Menu;i=s[0];const zt={};s[20]=this.element({parent:i||"root"},x===!0?y:o),zt.ref="menu";const Ct=[];if(typeof pn<"u")for(let Pt in pn[Symbol.for("config")].props)delete zt[pn[Symbol.for("config")].props[Pt]],Ct.push(pn[Symbol.for("config")].props[Pt]);s[20].populate(zt),x===!0&&(M-=1),i=s[20];const Wt={};Wt.ref="menu",m=Wt.is||"Menu";let Tt;if(typeof m=="string"){if(Tt=l.components&&l.components[m]||h[m],!Tt)throw new Error('Component "Menu" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Tt=m);return s[21]=Tt.call(null,{props:Wt},s[20],o),s[21][Symbol.for("slots")][0]?(i=s[21][Symbol.for("slots")][0],y=s[21],x=!0):i=s[21][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),s},effects:[function(i,o,l,h,g,v){(typeof skip2>"u"||skip2.indexOf("z")===-1)&&o[2].set("z",i.focused===1?1:0)},function(i,o,l,h,g,v){o[3][Symbol.for("props")].z=i.focused===1?1:0},function(i,o,l,h,g,v){(typeof skip4>"u"||skip4.indexOf("z")===-1)&&o[4].set("z",i.focused===2?1:0)},function(i,o,l,h,g,v){o[5][Symbol.for("props")].z=i.focused===2?1:0},function(i,o,l,h,g,v){(typeof skip6>"u"||skip6.indexOf("z")===-1)&&o[6].set("z",i.focused===3?1:0)},function(i,o,l,h,g,v){o[7][Symbol.for("props")].z=i.focused===3?1:0},function(i,o,l,h,g,v){(typeof skip8>"u"||skip8.indexOf("z")===-1)&&o[8].set("z",i.focused===4?1:0)},function(i,o,l,h,g,v){o[9][Symbol.for("props")].z=i.focused===4?1:0},function(i,o,l,h,g,v){(typeof skip10>"u"||skip10.indexOf("z")===-1)&&o[10].set("z",i.focused===5?1:0)},function(i,o,l,h,g,v){o[11][Symbol.for("props")].z=i.focused===5?1:0},function(i,o,l,h,g,v){(typeof skip12>"u"||skip12.indexOf("z")===-1)&&o[12].set("z",i.focused===6?1:0)},function(i,o,l,h,g,v){o[13][Symbol.for("props")].z=i.focused===6?1:0},function(i,o,l,h,g,v){(typeof skip14>"u"||skip14.indexOf("z")===-1)&&o[14].set("z",i.focused===7?1:0)},function(i,o,l,h,g,v){o[15][Symbol.for("props")].z=i.focused===7?1:0},function(i,o,l,h,g,v){(typeof skip16>"u"||skip16.indexOf("z")===-1)&&o[16].set("z",i.focused===8?1:0)},function(i,o,l,h,g,v){o[17][Symbol.for("props")].z=i.focused===8?1:0},function(i,o,l,h,g,v){(typeof skip18>"u"||skip18.indexOf("z")===-1)&&o[18].set("z",i.focused===9?1:0)},function(i,o,l,h,g,v){o[19][Symbol.for("props")].z=i.focused===9?1:0}],context:{}},state(){return{focused:1}},hooks:{focus(){this.$trigger("focused")}},watch:{focused(f){const i=this.$select(`button${f}`);i&&i.$focus&&i.$focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const f=this.focused-1;if(f===0){const i=this.$select("menu");i&&i.$focus&&i.$focus()}else this.focused=Math.max(f,1)},a(){const f=this.$select("menu");f&&f.$focus&&f.$focus()}}}),f6=Je.Component("Positioning",{code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(x-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.w=100,b.h=100,b.x=20,b.y=20,b.color="0xecfeffff",s[1].populate(b),y===!0&&(x-=1),i=s[0];const _={};s[2]=this.element({parent:i||"root"},y===!0?C:o),_.w=100,_.h=100,_.x=140,_.y=20,_.color="0xa5f3fcff",s[2].populate(_),y===!0&&(x-=1),i=s[0];const P={};s[3]=this.element({parent:i||"root"},y===!0?C:o),P.w=100,P.h=100,P.x=260,P.y=20,P.color="0x22d3eeff",s[3].populate(P),y===!0&&(x-=1),i=s[0];const j={};s[4]=this.element({parent:i||"root"},y===!0?C:o),j.w=100,j.h=100,j.x=380,j.y=20,j.color="0x0891b2ff",s[4].populate(j),y===!0&&(x-=1),i=s[0];const H={};s[5]=this.element({parent:i||"root"},y===!0?C:o),H.w=100,H.h=100,H.x=o.x1,H.y=o.y,H.color="0xfdf4ffff",s[5].populate(H),y===!0&&(x-=1),i=s[0];const $={};s[6]=this.element({parent:i||"root"},y===!0?C:o),$.w=100,$.h=100,$.x=o.x2,$.y=o.y,$.color="0xf5d0feff",s[6].populate($),y===!0&&(x-=1),i=s[0];const B={};s[7]=this.element({parent:i||"root"},y===!0?C:o),B.w=100,B.h=100,B.x=o.x3,B.y=o.y,B.color="0xe879f9ff",s[7].populate(B),y===!0&&(x-=1),i=s[0];const te={};s[8]=this.element({parent:i||"root"},y===!0?C:o),te.w=100,te.h=100,te.x=o.x4,te.y=o.y,te.color="0xc026d3ff",s[8].populate(te),y===!0&&(x-=1),i=s[0];const X={};s[9]=this.element({parent:i||"root"},y===!0?C:o),X.w=100,X.h=100,X.x=o.xA,X.y=260,X.color="0xfff7edff",s[9].populate(X),y===!0&&(x-=1),i=s[0];const Y={};s[10]=this.element({parent:i||"root"},y===!0?C:o),Y.w=100,Y.h=100,Y.x=o.xB,Y.y=260,Y.color="0xfed7aaff",s[10].populate(Y),y===!0&&(x-=1),i=s[0];const ee={};s[11]=this.element({parent:i||"root"},y===!0?C:o),ee.w=100,ee.h=100,ee.x=o.xC,ee.y=260,ee.color="0xfb923cff",s[11].populate(ee),y===!0&&(x-=1),i=s[0];const he={};s[12]=this.element({parent:i||"root"},y===!0?C:o),he.w=100,he.h=100,he.x=o.xD,he.y=260,he.color="0xea580cff",s[12].populate(he),y===!0&&(x-=1),i=s[0];const k={};s[13]=this.element({parent:i||"root"},y===!0?C:o),k.w=800,k.h=800,k.y=20,k.x=800,k.color="0xecfdf5ff",s[13].populate(k),y===!0&&(x-=1),i=s[13];const V={};s[14]=this.element({parent:i||"root"},y===!0?C:o),V.w=600,V.h=600,V.y=20,V.x=20,V.color="0xa7f3d0ff",s[14].populate(V),y===!0&&(x-=1),i=s[14];const Z={};s[15]=this.element({parent:i||"root"},y===!0?C:o),Z.w=400,Z.h=400,Z.y=100,Z.x=20,Z.color="0x34d399ff",s[15].populate(Z),y===!0&&(x-=1),i=s[15];const oe={};s[16]=this.element({parent:i||"root"},y===!0?C:o),oe.w=200,oe.h=100,oe.y=(400-100)/2,oe.x=(400-200)/2,oe.color="0x059669ff",s[16].populate(oe),y===!0&&(x-=1),i=s[16];const K={};s[17]=this.element({parent:i||"root"},y===!0?C:o),K.w=50,K.h=50,K.y={transition:o.yNested},K.x={transition:o.xNested},K.color="0x065f46ff",s[17].populate(K),y===!0&&(x-=1),i=s[0];const ne={};s[18]=this.element({parent:i||"root"},y===!0?C:o),ne.w=100,ne.h=100,ne.y=500,ne.x=20,ne.color="0xe11d48ff",s[18].populate(ne),y===!0&&(x-=1),i=s[0];const W={};s[19]=this.element({parent:i||"root"},y===!0?C:o),W.w=200,W.h=200,W.x=50,W.y=700,W.color="0x94a3b8ff",W.z=100,s[19].populate(W),y===!0&&(x-=1),i=s[19];const J={};s[20]=this.element({parent:i||"root"},y===!0?C:o),J.content="Lightning!",J.x=100,J.y=140,J.__textnode=!0,s[20].populate(J),y===!0&&(x-=1),i=s[19];const fe={};s[21]=this.element({parent:i||"root"},y===!0?C:o),fe.w=300,fe.h=100,fe.color="0x475569ff",s[21].populate(fe),y===!0&&(x-=1);const ye=l.components&&l.components.Circle||h.Circle;i=s[19];const ge={};s[22]=this.element({parent:i||"root"},y===!0?C:o),ge.x=150,ge.y=150,ge.size=100,ge.color="0xffffffff";const pe=[];if(typeof ye<"u")for(let It in ye[Symbol.for("config")].props)delete ge[ye[Symbol.for("config")].props[It]],pe.push(ye[Symbol.for("config")].props[It]);s[22].populate(ge),y===!0&&(x-=1),i=s[22];const Ee={};Ee.x=150,Ee.y=150,Ee.size=100,Ee.color="0xffffffff",m=Ee.is||"Circle";let Re;if(typeof m=="string"){if(Re=l.components&&l.components[m]||h[m],!Re)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Re=m);s[23]=Re.call(null,{props:Ee},s[22],o),s[23][Symbol.for("slots")][0]?(i=s[23][Symbol.for("slots")][0],C=s[23],y=!0):i=s[23][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),i=s[0];const z={};s[24]=this.element({parent:i||"root"},y===!0?C:o),z.w=300,z.h=300,z.x=50,z.y=700,z.color="0xef444480",s[24].populate(z),y===!0&&(x-=1),i=s[0];const Me={};s[25]=this.element({parent:i||"root"},y===!0?C:o),Me.w=400,Me.h=100,Me.x=800,Me.y=900,Me.color="0x0284c7ff",s[25].populate(Me),y===!0&&(x-=1),i=s[25];const ve={};s[26]=this.element({parent:i||"root"},y===!0?C:o),ve.w=i.node.width*(42/100),ve.h=i.node.height*(30/100),ve.y=i.node.height*(5/100),ve.x=i.node.width*(1/100),ve.color="0x075985ff",s[26].populate(ve),y===!0&&(x-=1),i=s[25];const Ue={};s[27]=this.element({parent:i||"root"},y===!0?C:o),Ue.w=o.bar2.v,Ue.h=i.node.height*(30/100),Ue.y=i.node.height*(35/100),Ue.x=i.node.width*(1/100),Ue.color="0x6b21a8ff",s[27].populate(Ue),y===!0&&(x-=1),i=s[25];const De={};s[28]=this.element({parent:i||"root"},y===!0?C:o),De.w={transition:o.bar3},De.h=i.node.height*(30/100),De.y=i.node.height*(65/100),De.x=i.node.width*(1/100),De.color="0x9f1239ff",s[28].populate(De),y===!0&&(x-=1),i=s[0];const We={};s[29]=this.element({parent:i||"root"},y===!0?C:o),We.w=250,We.h=250,We.color="0xfef08aff",We.x=450,We.y=700,s[29].populate(We),y===!0&&(x-=1),i=s[29];const Xe={};s[30]=this.element({parent:i||"root"},y===!0?C:o),Xe.w=40,Xe.h=40,Xe.placement="left",Xe.color="0x818cf8ff",s[30].populate(Xe),y===!0&&(x-=1),i=s[29];const ze={};s[31]=this.element({parent:i||"root"},y===!0?C:o),ze.w=40,ze.h=40,ze.placement="center",ze.color="0x2563ebff",s[31].populate(ze),y===!0&&(x-=1),i=s[29];const we={};s[32]=this.element({parent:i||"root"},y===!0?C:o),we.w=40,we.h=40,we.placement="right",we.color="0x1e40afff",s[32].populate(we),y===!0&&(x-=1),i=s[29];const tt={};s[33]=this.element({parent:i||"root"},y===!0?C:o),tt.w=40,tt.h=40,tt.x=54,tt.placement="top",tt.color="0xf472b6ff",s[33].populate(tt),y===!0&&(x-=1),i=s[29];const et={};s[34]=this.element({parent:i||"root"},y===!0?C:o),et.w=40,et.h=40,et.x=54,et.placement="middle",et.color="0xdb2777ff",s[34].populate(et),y===!0&&(x-=1),i=s[29];const Ze={};s[35]=this.element({parent:i||"root"},y===!0?C:o),Ze.w=40,Ze.h=40,Ze.x=54,Ze.placement="bottom",Ze.color="0xbe185dff",s[35].populate(Ze),y===!0&&(x-=1),i=s[29];const it={};s[36]=this.element({parent:i||"root"},y===!0?C:o),it.w=40,it.h=40,it.placement="{x: 'center', y: 'bottom'}",it.color="0xa3e635ff",s[36].populate(it),y===!0&&(x-=1),i=s[29];const St={};s[37]=this.element({parent:i||"root"},y===!0?C:o),St.w=40,St.h=40,St.placement="{x: 'right', y: 'middle'}",St.color="0x65a30dff",s[37].populate(St),y===!0&&(x-=1),i=s[29];const ut={};return s[38]=this.element({parent:i||"root"},y===!0?C:o),ut.w=40,ut.h=40,ut.placement="{x: 'center', y: 'middle'}",ut.color="0x4d7c0fff",s[38].populate(ut),y===!0&&(x-=1),s},effects:[function(i,o,l,h,g,v){o[9].set("x",i.xA)},function(i,o,l,h,g,v){o[10].set("x",i.xB)},function(i,o,l,h,g,v){o[11].set("x",i.xC)},function(i,o,l,h,g,v){o[12].set("x",i.xD)},function(i,o,l,h,g,v){o[16].set("y",(400-100)/2)},function(i,o,l,h,g,v){o[16].set("x",(400-200)/2)},function(i,o,l,h,g,v){o[17].set("y",{transition:i.yNested})},function(i,o,l,h,g,v){o[17].set("x",{transition:i.xNested})},function(i,o,l,h,g,v){o[27].set("w",i.bar2.v)},function(i,o,l,h,g,v){o[28].set("w",{transition:i.bar3})}],context:{}},state(){return{x1:20,x2:140,x3:20+140+100,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=this.yNested===0?50:0},2e3),this.$setInterval(()=>{this.xNested=this.xNested===0?150:0},1e3),this.$setInterval(()=>{const f=parseFloat(this.bar2.v),i=this.bar2.direction==="up"?f+10:f-10;this.bar2.v=i+"%",i>=90&&(this.bar2.direction="down"),i<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(Math.random()*96)+"%"},2e3)}}});var c6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function h6(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var PT={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(f){(function(){var i=typeof window<"u"?window:c6,o={};(function(h,g,v){var w;function s(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var m=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function C(e){e=[typeof globalThis=="object"&&globalThis,e,typeof h=="object"&&h,typeof self=="object"&&self,typeof g=="object"&&g];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var y=C(this);function x(e,t){if(t)e:{var n=y;e=e.split(".");for(var r=0;r<e.length-1;r++){var a=e[r];if(!(a in n))break e;n=n[a]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&m(n,e,{configurable:!0,writable:!0,value:t})}}x("Symbol",function(e){function t(u){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(u||"")+"_"+a++,u)}function n(u,c){this.g=u,m(this,"description",{configurable:!0,writable:!0,value:c})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return t}),x("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=y[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&m(r.prototype,e,{configurable:!0,writable:!0,value:function(){return M(s(this))}})}return e});function M(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function b(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:s(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function _(e){if(!(e instanceof Array)){e=b(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var P=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},j;if(typeof Object.setPrototypeOf=="function")j=Object.setPrototypeOf;else{var H;e:{var $={a:!0},B={};try{B.__proto__=$,H=B.a;break e}catch{}H=!1}j=H?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var te=j;function X(e,t){if(e.prototype=P(t.prototype),e.prototype.constructor=e,te)te(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.hk=t.prototype}function Y(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function ee(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}Y.prototype.s=function(e){this.h=e};function he(e,t){e.i={sg:t,Fg:!0},e.g=e.m||e.j}Y.prototype.return=function(e){this.i={return:e},this.g=this.j};function k(e,t,n){return e.g=n,{value:t}}Y.prototype.u=function(e){this.g=e};function V(e){e.g=0}function Z(e,t,n){e.m=t,n!=null&&(e.j=n)}function oe(e,t){e.m=0,e.j=t||0}function K(e,t,n){e.g=t,e.m=n||0}function ne(e,t){return e.m=t||0,t=e.i.sg,e.i=null,t}function W(e){e.A=[e.i],e.m=0,e.j=0}function J(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Fg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function fe(e){this.g=new Y,this.h=e}function ye(e,t){ee(e.g);var n=e.g.l;return n?ge(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),pe(e))}function ge(e,t,n,r){try{var a=t.call(e.g.l,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.g.o=!1,a;var u=a.value}catch(c){return e.g.l=null,he(e.g,c),pe(e)}return e.g.l=null,r.call(e.g,u),pe(e)}function pe(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,he(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Fg)throw t.sg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function Ee(e){this.next=function(t){return ee(e.g),e.g.l?t=ge(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=pe(e)),t},this.throw=function(t){return ee(e.g),e.g.l?t=ge(e,e.g.l.throw,t,e.g.s):(he(e.g,t),t=pe(e)),t},this.return=function(t){return ye(e,t)},this[Symbol.iterator]=function(){return this}}function Re(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,a){function u(c){c.done?r(c.value):Promise.resolve(c.value).then(t,n).then(u,a)}u(e.next())})}function z(e){return Re(new Ee(new fe(e)))}function Me(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}x("Promise",function(e){function t(c){this.h=0,this.i=void 0,this.g=[],this.o=!1;var d=this.j();try{c(d.resolve,d.reject)}catch(p){d.reject(p)}}function n(){this.g=null}function r(c){return c instanceof t?c:new t(function(d){d(c)})}if(e)return e;n.prototype.h=function(c){if(this.g==null){this.g=[];var d=this;this.i(function(){d.l()})}this.g.push(c)};var a=y.setTimeout;n.prototype.i=function(c){a(c,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var c=this.g;this.g=[];for(var d=0;d<c.length;++d){var p=c[d];c[d]=null;try{p()}catch(S){this.j(S)}}}this.g=null},n.prototype.j=function(c){this.i(function(){throw c})},t.prototype.j=function(){function c(S){return function(T){p||(p=!0,S.call(d,T))}}var d=this,p=!1;return{resolve:c(this.F),reject:c(this.l)}},t.prototype.F=function(c){if(c===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof t)this.H(c);else{e:switch(typeof c){case"object":var d=c!=null;break e;case"function":d=!0;break e;default:d=!1}d?this.C(c):this.m(c)}},t.prototype.C=function(c){var d=void 0;try{d=c.then}catch(p){this.l(p);return}typeof d=="function"?this.I(d,c):this.m(c)},t.prototype.l=function(c){this.s(2,c)},t.prototype.m=function(c){this.s(1,c)},t.prototype.s=function(c,d){if(this.h!=0)throw Error("Cannot settle("+c+", "+d+"): Promise already settled in state"+this.h);this.h=c,this.i=d,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var c=this;a(function(){if(c.B()){var d=y.console;typeof d<"u"&&d.error(c.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var c=y.CustomEvent,d=y.Event,p=y.dispatchEvent;return typeof p>"u"?!0:(typeof c=="function"?c=new c("unhandledrejection",{cancelable:!0}):typeof d=="function"?c=new d("unhandledrejection",{cancelable:!0}):(c=y.document.createEvent("CustomEvent"),c.initCustomEvent("unhandledrejection",!1,!0,c)),c.promise=this,c.reason=this.i,p(c))},t.prototype.A=function(){if(this.g!=null){for(var c=0;c<this.g.length;++c)u.h(this.g[c]);this.g=null}};var u=new n;return t.prototype.H=function(c){var d=this.j();c.Ed(d.resolve,d.reject)},t.prototype.I=function(c,d){var p=this.j();try{c.call(d,p.resolve,p.reject)}catch(S){p.reject(S)}},t.prototype.then=function(c,d){function p(I,A){return typeof I=="function"?function(R){try{S(I(R))}catch(D){T(D)}}:A}var S,T,E=new t(function(I,A){S=I,T=A});return this.Ed(p(c,S),p(d,T)),E},t.prototype.catch=function(c){return this.then(void 0,c)},t.prototype.Ed=function(c,d){function p(){switch(S.h){case 1:c(S.i);break;case 2:d(S.i);break;default:throw Error("Unexpected state: "+S.h)}}var S=this;this.g==null?u.h(p):this.g.push(p),this.o=!0},t.resolve=r,t.reject=function(c){return new t(function(d,p){p(c)})},t.race=function(c){return new t(function(d,p){for(var S=b(c),T=S.next();!T.done;T=S.next())r(T.value).Ed(d,p)})},t.all=function(c){var d=b(c),p=d.next();return p.done?r([]):new t(function(S,T){function E(R){return function(D){I[R]=D,A--,A==0&&S(I)}}var I=[],A=0;do I.push(void 0),A++,r(p.value).Ed(E(I.length-1),T),p=d.next();while(!p.done)})},t});function ve(e,t){return Object.prototype.hasOwnProperty.call(e,t)}x("WeakMap",function(e){function t(p){if(this.g=(d+=Math.random()+1).toString(),p){p=b(p);for(var S;!(S=p.next()).done;)S=S.value,this.set(S[0],S[1])}}function n(){}function r(p){var S=typeof p;return S==="object"&&p!==null||S==="function"}function a(p){if(!ve(p,c)){var S=new n;m(p,c,{value:S})}}function u(p){var S=Object[p];S&&(Object[p]=function(T){return T instanceof n?T:(Object.isExtensible(T)&&a(T),S(T))})}if(function(){if(!e||!Object.seal)return!1;try{var p=Object.seal({}),S=Object.seal({}),T=new e([[p,2],[S,3]]);return T.get(p)!=2||T.get(S)!=3?!1:(T.delete(p),T.set(S,4),!T.has(p)&&T.get(S)==4)}catch{return!1}}())return e;var c="$jscomp_hidden_"+Math.random();u("freeze"),u("preventExtensions"),u("seal");var d=0;return t.prototype.set=function(p,S){if(!r(p))throw Error("Invalid WeakMap key");if(a(p),!ve(p,c))throw Error("WeakMap key fail: "+p);return p[c][this.g]=S,this},t.prototype.get=function(p){return r(p)&&ve(p,c)?p[c][this.g]:void 0},t.prototype.has=function(p){return r(p)&&ve(p,c)&&ve(p[c],this.g)},t.prototype.delete=function(p){return r(p)&&ve(p,c)&&ve(p[c],this.g)?delete p[c][this.g]:!1},t}),x("Map",function(e){function t(){var d={};return d.Mb=d.next=d.head=d}function n(d,p){var S=d[1];return M(function(){if(S){for(;S.head!=d[1];)S=S.Mb;for(;S.next!=S.head;)return S=S.next,{done:!1,value:p(S)};S=null}return{done:!0,value:void 0}})}function r(d,p){var S=p&&typeof p;S=="object"||S=="function"?u.has(p)?S=u.get(p):(S=""+ ++c,u.set(p,S)):S="p_"+p;var T=d[0][S];if(T&&ve(d[0],S))for(d=0;d<T.length;d++){var E=T[d];if(p!==p&&E.key!==E.key||p===E.key)return{id:S,list:T,index:d,entry:E}}return{id:S,list:T,index:-1,entry:void 0}}function a(d){if(this[0]={},this[1]=t(),this.size=0,d){d=b(d);for(var p;!(p=d.next()).done;)p=p.value,this.set(p[0],p[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var d=Object.seal({x:4}),p=new e(b([[d,"s"]]));if(p.get(d)!="s"||p.size!=1||p.get({x:4})||p.set({x:4},"t")!=p||p.size!=2)return!1;var S=p.entries(),T=S.next();return T.done||T.value[0]!=d||T.value[1]!="s"?!1:(T=S.next(),!(T.done||T.value[0].x!=4||T.value[1]!="t"||!S.next().done))}catch{return!1}}())return e;var u=new WeakMap;a.prototype.set=function(d,p){d=d===0?0:d;var S=r(this,d);return S.list||(S.list=this[0][S.id]=[]),S.entry?S.entry.value=p:(S.entry={next:this[1],Mb:this[1].Mb,head:this[1],key:d,value:p},S.list.push(S.entry),this[1].Mb.next=S.entry,this[1].Mb=S.entry,this.size++),this},a.prototype.delete=function(d){return d=r(this,d),d.entry&&d.list?(d.list.splice(d.index,1),d.list.length||delete this[0][d.id],d.entry.Mb.next=d.entry.next,d.entry.next.Mb=d.entry.Mb,d.entry.head=null,this.size--,!0):!1},a.prototype.clear=function(){this[0]={},this[1]=this[1].Mb=t(),this.size=0},a.prototype.has=function(d){return!!r(this,d).entry},a.prototype.get=function(d){return(d=r(this,d).entry)&&d.value},a.prototype.entries=function(){return n(this,function(d){return[d.key,d.value]})},a.prototype.keys=function(){return n(this,function(d){return d.key})},a.prototype.values=function(){return n(this,function(d){return d.value})},a.prototype.forEach=function(d,p){for(var S=this.entries(),T;!(T=S.next()).done;)T=T.value,d.call(p,T[1],T[0],this)},a.prototype[Symbol.iterator]=a.prototype.entries;var c=0;return a}),x("Set",function(e){function t(n){if(this.g=new Map,n){n=b(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(b([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var a=r.entries(),u=a.next();return u.done||u.value[0]!=n||u.value[1]!=n?!1:(u=a.next(),u.done||u.value[0]==n||u.value[0].x!=4||u.value[1]!=u.value[0]?!1:a.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var a=this;this.g.forEach(function(u){return n.call(r,u,u,a)})},t)});function Ue(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var u=n++;return{value:t(u,e[u]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}x("Array.prototype.keys",function(e){return e||function(){return Ue(this,function(t){return t})}});function De(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,a=0;a<r;a++){var u=e[a];if(t.call(n,u,a,e))return{Dg:a,v:u}}return{Dg:-1,v:void 0}}x("Array.prototype.findIndex",function(e){return e||function(t,n){return De(this,t,n).Dg}}),x("Array.from",function(e){return e||function(t,n,r){n=n??function(d){return d};var a=[],u=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof u=="function"){t=u.call(t);for(var c=0;!(u=t.next()).done;)a.push(n.call(r,u.value,c++))}else for(u=t.length,c=0;c<u;c++)a.push(n.call(r,t[c],c));return a}}),x("Array.prototype.values",function(e){return e||function(){return Ue(this,function(t,n){return n})}}),x("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),x("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var a=r.length;for(n=n||0,0>n&&(n=Math.max(n+a,0));n<a;n++){var u=r[n];if(u===t||Object.is(u,t))return!0}return!1}});function We(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}x("String.prototype.includes",function(e){return e||function(t,n){return We(this,t,"includes").indexOf(t,n||0)!==-1}}),x("String.fromCodePoint",function(e){return e||function(t){for(var n="",r=0;r<arguments.length;r++){var a=Number(arguments[r]);if(0>a||1114111<a||a!==Math.floor(a))throw new RangeError("invalid_code_point "+a);65535>=a?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),n+=String.fromCharCode(a&1023|56320))}return n}}),x("Array.prototype.find",function(e){return e||function(t,n){return De(this,t,n).v}}),x("String.prototype.startsWith",function(e){return e||function(t,n){var r=We(this,t,"startsWith"),a=r.length,u=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var c=0;c<u&&n<a;)if(r[n++]!=t[c++])return!1;return c>=u}}),x("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=b(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),a=new e([n]);return!a.has(n)||a.has(r)?!1:(a.delete(n),a.add(r),!a.has(n)&&a.has(r))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)});var Xe=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var a in r)ve(r,a)&&(e[a]=r[a])}return e};x("Object.assign",function(e){return e||Xe}),x("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),x("Array.prototype.entries",function(e){return e||function(){return Ue(this,function(t,n){return[t,n]})}}),x("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),x("String.prototype.repeat",function(e){return e||function(t){var n=We(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),x("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),x("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)ve(t,r)&&n.push(t[r]);return n}}),x("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),x("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),x("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),x("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)ve(t,r)&&n.push([r,t[r]]);return n}});var ze=this||self;function we(e,t){e=e.split(".");var n=ze;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function tt(){}function et(){}function Ze(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}Ze.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function it(e){return e.h/(1-Math.pow(e.g,e.i))}function St(){this.h=new Ze(2),this.j=new Ze(5),this.g=0,this.i=128e3,this.l=16e3}St.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},St.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},St.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(it(this.h),it(this.j))};function ut(){}function It(){}function je(){}function at(e){var t=Me.apply(1,arguments);pn.has(e)||(pn.add(e),je.apply(ut,_(t)))}function xt(){}function dt(){}function xn(){}var pn=new Set;h.console&&(je=function(){return console.warn.apply(console,_(Me.apply(0,arguments)))},It=function(){console.error.apply(console,_(Me.apply(0,arguments)))});function zt(){this.g={}}w=zt.prototype,w.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},w.get=function(e){return(e=this.g[e])?e.slice():null},w.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},w.forEach=function(e){for(var t in this.g)e(t,this.g[t])},w.size=function(){return Object.keys(this.g).length},w.keys=function(){return Object.keys(this.g)};function Ct(){this.g=new zt}w=Ct.prototype,w.release=function(){this.Ra(),this.g=null},w.D=function(e,t,n,r){this.g&&(e=new Wt(e,t,n,r),this.g.push(t,e))},w.ha=function(e,t,n,r){function a(c){u.jb(e,t,a),n(c)}var u=this;this.D(e,t,a,r)},w.jb=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=b(r);for(var a=r.next();!a.done;a=r.next())a=a.value,a.target!=e||n!=a.listener&&n||(a.jb(),this.g.remove(t,a))}},w.Ra=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,_(e.g[n]));for(e=b(t),t=e.next();!t.done;t=e.next())t.value.jb();this.g.g={}}},we("shaka.util.EventManager",Ct),Ct.prototype.removeAll=Ct.prototype.Ra,Ct.prototype.unlisten=Ct.prototype.jb,Ct.prototype.listenOnce=Ct.prototype.ha,Ct.prototype.listen=Ct.prototype.D,Ct.prototype.release=Ct.prototype.release;function Wt(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=Tt(e,r),this.target.addEventListener(t,n,this.g)}Wt.prototype.jb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function Tt(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),Pt(e)?t:t.capture||!1}function Pt(e){var t=ln;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch{t=!1}ln=t}return t||!1}var ln=void 0;function ct(e){if(an.has(e))return an.get(e);if(h.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return an.set(e,t),t}return h.MediaSource?(t=MediaSource.isTypeSupported(e),an.set(e,t),t):!1}function Pn(){return!!h.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var an=new Map;function Bn(e,t){this.g=e,this.h=t}Bn.prototype.toString=function(){return"v"+this.g+"."+this.h};function Ot(e,t){var n=new Bn(5,0),r=go,a=r.g,u=n.h-a.h;(0<(n.g-a.g||u)?r.i:r.h)(r.g,n,e,t)}function mn(e,t,n,r){je([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function bn(e,t,n,r){It([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var go=null;function jn(){}jn.prototype.extract=function(){},jn.prototype.decode=function(){return[]},jn.prototype.clear=function(){},jn.prototype.getStreams=function(){return[]};function Yn(){}Yn.prototype.init=function(){},Yn.prototype.parse=function(){return[]};function Fn(){}function Rn(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Ve(e)==Ve(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Ae(e);t=Ae(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function Ve(e){return e instanceof ArrayBuffer?e:e.buffer}function ie(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Ae(e,t,n){return n=n===void 0?1/0:n,nt(e,t===void 0?0:t,n,Uint8Array)}function Ke(e,t,n){return n=n===void 0?1/0:n,nt(e,t===void 0?0:t,n,Uint16Array)}function wt(e,t,n){return n=n===void 0?1/0:n,nt(e,t===void 0?0:t,n,DataView)}function nt(e,t,n,r){var a=Ve(e),u=1;"BYTES_PER_ELEMENT"in r&&(u=r.BYTES_PER_ELEMENT);var c=((e.byteOffset||0)+e.byteLength)/u;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/u,c))),new r(a,e,Math.floor(Math.min(e+Math.max(n,0),c))-e)}we("shaka.util.BufferUtils",Fn),Fn.toDataView=wt,Fn.toUint16=Ke,Fn.toUint8=Ae,Fn.toArrayBuffer=ie,Fn.equal=Rn;function ht(){}ht.prototype.init=function(){},ht.prototype.i=function(){},ht.prototype.g=function(){},ht.prototype.j=function(){},we("shaka.media.IClosedCaptionParser",ht);function _e(e){this.l=new Yn,(e=Le[e.toLowerCase()])&&(this.l=e()),this.h=new jn,(e=bt)&&(this.h=e())}_e.prototype.init=function(e,t){t!==void 0&&t||this.g(),this.l.init(e)},_e.prototype.i=function(e){e=this.l.parse(e),e=b(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Ae(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},_e.prototype.g=function(){this.h.clear()},_e.prototype.j=function(){return this.h.getStreams()},we("shaka.media.ClosedCaptionParser",_e),_e.findDecoder=function(){return bt},_e.unregisterDecoder=function(){bt=null},_e.registerDecoder=function(e){bt=e},_e.findParser=function(e){return Le[e]},_e.unregisterParser=function(e){delete Le[e]},_e.registerParser=function(e,t){Le[e]=t};var Le={},bt=null;function xe(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=ce,this.scroll=Ge}we("shaka.text.CueRegion",xe);var ce=1;xe.units={PX:0,PERCENTAGE:ce,LINES:2};var Ge="";xe.scrollMode={NONE:Ge,UP:"up"};function Et(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function jt(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function Vt(e,t,n){if(n||(n=Et),e.length!=t.length)return!1;t=t.slice(),e=b(e);for(var r=e.next(),a={};!r.done;a={Gg:void 0},r=e.next()){if(a.Gg=r.value,r=t.findIndex(function(u){return function(c){return n(u.Gg,c)}}(a)),r==-1)return!1;t[r]=t[t.length-1],t.pop()}return t.length==0}function un(e,t,n){if(n||(n=Et),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Be(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new xe,this.position=null,this.positionAlign=wn,this.size=0,this.textAlign=gn,this.direction=fo,this.writingMode=rt,this.lineInterpretation=Pe,this.line=null,this.lineHeight="",this.lineAlign=io,this.displayAlign=Jn,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Ui,this.fontStyle=Ai,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={dc:32,rows:15}}function qe(e,t){return e=new Be(e,t,""),e.lineBreak=!0,e}Be.prototype.clone=function(){var e=new Be(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function On(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!un(e.nestedCues,t.nestedCues,On))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!un(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}we("shaka.text.Cue",Be),Be.equal=On,Be.prototype.clone=Be.prototype.clone;var wn="auto";Be.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:wn};var gn="center",$n={LEFT:"left",RIGHT:"right",CENTER:gn,START:"start",END:"end"};Be.textAlign=$n;var Jn="after",kt={BEFORE:"before",CENTER:"center",AFTER:Jn};Be.displayAlign=kt;var fo="ltr";Be.direction={HORIZONTAL_LEFT_TO_RIGHT:fo,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var rt="horizontal-tb";Be.writingMode={HORIZONTAL_TOP_TO_BOTTOM:rt,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Pe=0;Be.lineInterpretation={LINE_NUMBER:Pe,PERCENTAGE:1};var io="start",_o={CENTER:"center",START:io,END:"end"};Be.lineAlign=_o;var Tr={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Be.defaultTextColor=Tr;var Ho={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Be.defaultTextBackgroundColor=Ho;var Ui=400;Be.fontWeight={NORMAL:Ui,BOLD:700};var Ai="normal",ks={NORMAL:Ai,ITALIC:"italic",OBLIQUE:"oblique"};Be.fontStyle=ks,Be.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function gi(){}gi.prototype.destroy=function(){};function Nt(e,t,n){ii[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ie:t}}function At(e,t){for(var n=e.toLowerCase().split(";")[0],r=b([Xr,Er,br,Go]),a=r.next();!a.done;a=r.next())if(a=ii[n+"-"+a.value]){var u=a.ie(),c=u.isSupported(e,t);if(u.destroy(),c)return a.ie}return null}we("shaka.transmuxer.TransmuxerEngine",gi),gi.findTransmuxer=At,gi.unregisterTransmuxer=function(e,t){delete ii[e.toLowerCase().split(";")[0]+"-"+t]},gi.registerTransmuxer=Nt,gi.prototype.destroy=gi.prototype.destroy;var ii={},Go=1,br=2,Er=3,Xr=4;gi.PluginPriority={FALLBACK:Go,PREFERRED_SECONDARY:br,PREFERRED:Er,APPLICATION:Xr};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var As=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Ln(e){var t;e instanceof Ln?(Qu(this,e.Bb),this.uc=e.uc,Zu(this,e.Eb),md(this,e.Mc),this.Pa=e.Pa,sl(this,e.g.clone()),this.ec=e.ec):e&&(t=String(e).match(As))?(Qu(this,t[1]||"",!0),this.uc=al(t[2]||""),Zu(this,t[3]||"",!0),md(this,t[4]),this.Pa=al(t[5]||"",!0),sl(this,t[6]||"",!0),this.ec=al(t[7]||"")):this.g=new ul(null)}w=Ln.prototype,w.Bb="",w.uc="",w.Eb="",w.Mc=null,w.Pa="",w.ec="",w.toString=function(){var e=[],t=this.Bb;if(t&&e.push(ll(t,kg,!0),":"),t=this.Eb){e.push("//");var n=this.uc;n&&e.push(ll(n,kg,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Mc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.Eb&&t.charAt(0)!="/"&&e.push("/"),e.push(ll(t,t.charAt(0)=="/"?tb:eb,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.ec)&&e.push("#",ll(t,ob)),e.join("")},w.resolve=function(e){var t=this.clone();t.Bb==="data"&&(t=new Ln);var n=!!e.Bb;n?Qu(t,e.Bb):n=!!e.uc,n?t.uc=e.uc:n=!!e.Eb,n?Zu(t,e.Eb):n=e.Mc!=null;var r=e.Pa;if(n)md(t,e.Mc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.Eb&&!this.Pa)r="/"+r;else{var a=t.Pa.lastIndexOf("/");a!=-1&&(r=t.Pa.substr(0,a+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){a=r.lastIndexOf("/",0)==0,r=r.split("/");for(var u=[],c=0;c<r.length;){var d=r[c++];d=="."?a&&c==r.length&&u.push(""):d==".."?((1<u.length||u.length==1&&u[0]!="")&&u.pop(),a&&c==r.length&&u.push("")):(u.push(d),a=!0)}r=u.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?sl(t,e.g.clone()):n=!!e.ec,n&&(t.ec=e.ec),t},w.clone=function(){return new Ln(this)};function Qu(e,t,n){e.Bb=n?al(t,!0):t,e.Bb&&(e.Bb=e.Bb.replace(/:$/,""))}function Zu(e,t,n){e.Eb=n?al(t,!0):t}function md(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Mc=t}else e.Mc=null}function sl(e,t,n){t instanceof ul?e.g=t:(n||(t=ll(t,nb)),e.g=new ul(t))}function al(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ll(e,t,n){return e!=null?(e=encodeURI(e).replace(t,JT),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function JT(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var kg=/[#\/\?@]/g,eb=/[#\?:]/g,tb=/[#\?]/g,nb=/[#\?@]/g,ob=/#/g;function ul(e){this.g=e||null}function Ju(e){if(!e.Ka&&(e.Ka={},e.Xc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),a=null;if(0<=r){var u=t[n].substring(0,r);a=t[n].substring(r+1)}else u=t[n];u=decodeURIComponent(u.replace(/\+/g," ")),a=a||"",e.add(u,decodeURIComponent(a.replace(/\+/g," ")))}}w=ul.prototype,w.Ka=null,w.Xc=null;function Ag(e){return Ju(e),e.Xc}w.add=function(e,t){Ju(this),this.g=null;var n=this.Ka.hasOwnProperty(e)?this.Ka[e]:null;return n||(this.Ka[e]=n=[]),n.push(t),this.Xc++,this},w.set=function(e,t){return Ju(this),this.g=null,this.Ka.hasOwnProperty(e)?this.Ka[e]=[t]:this.add(e,t),this},w.get=function(e){return Ju(this),this.Ka[e]||[]},w.toString=function(){if(this.g)return this.g;if(!this.Ka)return"";var e=[],t;for(t in this.Ka)for(var n=encodeURIComponent(t),r=this.Ka[t],a=0;a<r.length;a++){var u=n;r[a]!==""&&(u+="="+encodeURIComponent(r[a])),e.push(u)}return this.g=e.join("&")},w.clone=function(){var e=new ul;if(e.g=this.g,this.Ka){var t={},n;for(n in this.Ka)t[n]=this.Ka[n].concat();e.Ka=t,e.Xc=this.Xc}return e};function se(e,t,n){var r=Me.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(a){this.stack=a.stack}}se.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},we("shaka.util.Error",se),se.Severity={RECOVERABLE:1,CRITICAL:2},se.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},se.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function Is(e){this.h=e,this.g=void 0}Is.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Ig(e,t){return e.length&&t.length&&e!==t?0<gd(e,t).length:!0}function gd(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=b(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var a=b(t),u=a.next();!u.done;u=a.next())if(u=u.value,r.keySystem==u.keySystem){a=new Map;for(var c=b((r.initData||[]).concat(u.initData||[])),d=c.next();!d.done;d=c.next())d=d.value,a.set(d.keyId,d);a=Array.from(a.values()),c=r.keyIds&&u.keyIds?new Set([].concat(_(r.keyIds),_(u.keyIds))):r.keyIds||u.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||u.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||u.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||u.persistentStateRequired,videoRobustness:r.videoRobustness||u.videoRobustness,audioRobustness:r.audioRobustness||u.audioRobustness,serverCertificate:r.serverCertificate||u.serverCertificate,serverCertificateUri:r.serverCertificateUri||u.serverCertificateUri,initData:a,keyIds:c});break}}return n}function yd(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}var ef=new Is(function(){return ie(new Uint8Array([0]))}),tf=new Map;function fl(e){this.h=e,this.g=null}fl.prototype.Y=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){h.clearTimeout(r),n=!1},r=h.setTimeout(function(){n&&t.h()},1e3*e),this},fl.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function Mt(e){this.h=e,this.g=null}Mt.prototype.tc=function(){return this.stop(),this.h(),this},Mt.prototype.Y=function(e){var t=this;return this.stop(),this.g=new fl(function(){t.h()}).Y(e),this},Mt.prototype.Sa=function(e){var t=this;return this.stop(),this.g=new fl(function(){t.g.Y(e),t.h()}).Y(e),this},Mt.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},we("shaka.util.Timer",Mt),Mt.prototype.stop=Mt.prototype.stop,Mt.prototype.tickEvery=Mt.prototype.Sa,Mt.prototype.tickAfter=Mt.prototype.Y,Mt.prototype.tickNow=Mt.prototype.tc;function Ii(){var e=h.ManagedMediaSource||h.MediaSource;return!!(e&&e.isTypeSupported)}function cl(e){return _g().canPlayType(e)!=""}function hl(){return!!navigator.userAgent.match(/Edge?\//)}function Bi(){return Qt("Xbox One")}function ji(){return Qt("Tizen")}function dl(){return Qt("Tizen 3")}function nf(){return Qt("Tizen 2")}function Fi(){return Qt("Web0S")}function of(){return Fi()&&vd()===38}function Wo(){return Qt("CrKey")}function vd(){if(!Qt("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function Ms(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!ji()&&!Qt("PC=EOS")&&!Qt("PC=APL")&&!Qt("VirginMedia")&&!xd()&&!$i()&&!Qt("AFT")&&!Qt("WPE")&&!Qt("DT_STB_BCM")}function rf(){return Qt("PlayStation 5")}function $i(){return Qt("PlayStation 4")}function sf(){return Qt("Hisense")||Qt("VIDAA")}function xd(){return Qt("SOPOpenBrowser")}function _s(){if(!Ms())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function wd(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("windows"):!1}function af(){return Qt("Android")}function Mg(){return!!(ji()||Fi()||Bi()||$i()||rf()||Qt("AFT")||Qt("PC=EOS")||Qt("PC=APL")||Qt("VirginMedia")||xd()||Qt("WPE")||Wo()||sf()||Qt("DT_STB_BCM"))}function Qt(e){return(navigator.userAgent||"").includes(e)}function _g(){return Rs||(Sd||(Sd=new Mt(function(){Rs=null})),(Rs=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Rs=document.createElement("video")),Sd.Y(1),Rs)}function lf(e){return e?e===h.shakaMediaKeysPolyfill:!!h.shakaMediaKeysPolyfill}function Rg(){var e,t,n,r,a,u,c,d,p,S,T,E,I,A,R;return z(function(D){switch(D.g){case 1:if(e={width:1/0,height:1/0},Wo()){if(E=h.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,Z(D,15),!(I=E)){D.u(17);break}return k(D,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(ji()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{je("Tizen: Error detecting screen size, default screen size 1920x1080.")}D.u(3);break}if(Bi()){e.width=1920,e.height=1080;try{n=void 0,n=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows,r=new n.Media.Protection.ProtectionCapabilities,a=n.Media.Protection.ProtectionCapabilityResult,u=null;do u=r.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(u===a.maybe);u===a.probably&&(e.width=3840,e.height=2160)}catch{je("Xbox: Error detecting screen size, default screen size 1920x1080.")}D.u(3);break}if(Fi()){try{c=JSON.parse(h.PalmSystem.deviceInfo),e.width=Math.max(1920,c.screenWidth),e.height=Math.max(1080,c.screenHeight)}catch{je("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}D.u(3);break}if(sf()){h.Hisense_Get4KSupportState&&h.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),D.u(3);break}if(!$i()&&!rf()){D.u(3);break}return d=!1,Z(D,9),k(D,h.msdk.device.getDisplayInfo(),11);case 11:p=D.h,d=p.resolution==="4K",K(D,10);break;case 9:return ne(D),Z(D,12),k(D,h.msdk.device.getDisplayInfoImmediate(),14);case 14:S=D.h,d=S.resolution==="4K",K(D,10);break;case 12:T=ne(D),je("PlayStation: Failed to get the display info:",T);case 10:d?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),D.u(3);break;case 18:I=D.h;case 17:if(I){e.width=3840,e.height=2160,D.u(19);break}if(!(A=E)){D.u(20);break}return k(D,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:A=D.h;case 20:A&&(e.width=1920,e.height=1080);case 19:K(D,3);break;case 15:R=ne(D),It("Failed to check canDisplayType:",R);case 3:return D.return(e)}})}var Sd=null,Rs=null;function Kr(){}function fn(e){if(!e)return"";if(e=Ae(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),h.TextDecoder&&!$i())return e=new TextDecoder().decode(e),e.includes("�")&&It('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{r-=65536;var a=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+a)}}return t}function Ki(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new se(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=wt(e);for(var a=0;a<n;a++)r[a]=e.getUint16(2*a,t);return Td(r)}function qi(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=Ae(e);if(n[0]==239&&n[1]==187&&n[2]==191)return fn(n);if(n[0]==254&&n[1]==255)return Ki(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Ki(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Ki(e,!1);if(n[1]==0&&n[3]==0)return Ki(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return fn(e);throw new se(2,2,2003)}function Mi(e){if(h.TextEncoder&&!$i()){var t=new TextEncoder;return ie(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return ie(t)}function Cd(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),a=0;a<e.length;++a)r.setUint16(2*a,e.charCodeAt(a),t);return n}function Td(e){return Lg.value()(e)}function bo(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(a){return a[1]=="#"?(a=a[2]=="x"||a[2]=="X"?parseInt(a.substring(3),16):parseInt(a.substring(2),10),0<=a&&1114111>=a?String.fromCodePoint(a):""):t[a]||"'"}):e||""}we("shaka.util.StringUtils",Kr),Kr.resetFromCharCode=function(){Lg.g=void 0},Kr.toUTF16=Cd,Kr.toUTF8=Mi,Kr.fromBytesAutoDetect=qi,Kr.fromUTF16=Ki,Kr.fromUTF8=fn;var Lg=new Is(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch{return!1}}for(var t={ac:65536};0<t.ac;t={ac:t.ac},t.ac/=2)if(e(t.ac))return function(n){return function(r){for(var a="",u=0;u<r.length;u+=n.ac)a+=String.fromCharCode.apply(null,r.subarray(u,u+n.ac));return a}}(t);return null});function yo(){}function Dg(e){return e=Td(Ae(e)),btoa(e)}function qr(e,t){return t=t??!0,e=Dg(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function ri(e){e=h.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function Yr(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=h.parseInt(e.substr(2*r,2),16);return n}function Yi(e){var t=Ae(e);e="",t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function An(){for(var e=Me.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var a=e[r];a instanceof Uint8Array?t.set(a,n):t.set(Ae(a),n),n+=a.byteLength}return t}we("shaka.util.Uint8ArrayUtils",yo),yo.concat=An,yo.toHex=Yi,yo.fromHex=Yr,yo.fromBase64=ri,yo.toBase64=qr,yo.toStandardBase64=Dg;function ro(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new Ln(e[0]);return t=new Ln(t[0]),[n.resolve(t).toString()]}t=t.map(function(c){return new Ln(c)}),n=[],e=b(e);for(var r=e.next();!r.done;r=e.next()){r=new Ln(r.value);for(var a=b(t),u=a.next();!u.done;u=a.next())n.push(r.resolve(u.value).toString())}return n}function Qr(e,t,n,r){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},r&&(e.keySystemUris=new Set([r])),e}function Pg(e,t){t=t===void 0?"cenc":t;var n=[],r=[],a=[];e.forEach(function(c,d){var p=d;p.length!=22&&(p=qr(Yr(d),!1));var S=c;S.length!=22&&(S=qr(Yr(c),!1)),c={kty:"oct",kid:p,k:S},n.push(c),r.push(c.kid),a.push(d)}),e=JSON.stringify({keys:n});var u=JSON.stringify({kids:r});return u=[{initData:Ae(Mi(u)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+h.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:u,keyIds:new Set(a)}}function Ls(e,t){if(t.length==1)return t[0];if(e=Ro(e,t),e!=null)return e;throw new se(2,4,4025,t)}function Ro(e,t){for(var n=b(Og[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var a=b(t),u=a.next();!u.done;u=a.next())if(u=u.value,r.test(u.trim()))return u.trim()}return e==Ut?"":null}function bd(e,t){var n=[];e=b(Og[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var a=b(t),u=a.next();!u.done;u=a.next())u=u.value,r.test(u.trim())&&n.push(u.trim())}return n}var Ut="text",zn={ga:"video",X:"audio",ua:Ut,De:"image",gj:"application"},ib=1/15,Og={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Ed(){}function Vn(e,t){var n=e;return t&&!kr.includes(e)&&(n+='; codecs="'+t+'"'),n}function Zr(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Ds(e,t,n){var r=Vn(e,t);return t=Zr(e,t),At(t)?(e=At(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function rb(e,t,n){var r=[t];return sb.forEach(function(a,u){var c=e[u];u=="codecs"?kr.includes(e.mimeType)||r.push('codecs="'+n+'"'):c&&r.push(a+'="'+c+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function uf(e){return e.split(";")[0].split("/")[1]}function Eo(e){var t=Ug(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function Ps(e){var t=[];e=b(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Ug(n.value),t.push(n[0]);return t.sort().join(",")}function yi(e){return e.split(";")[0]}function Xo(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Ng(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Ug(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}we("shaka.util.MimeUtils",Ed),Ed.getFullTypeWithAllCodecs=Zr,Ed.getFullType=Vn;var sb=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),kr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Qi(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function pl(e){return Hn[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!bt:!1}Qi.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function ab(e,t,n,r,a){var u,c,d,p,S,T,E;return z(function(I){if(I.g==1)return k(I,Promise.resolve(),2);if(!e.i||!e.j)return I.return();if(n==null||r==null)return e.i.parseInit(Ae(t)),I.return();for(u=e.B?n:e.s,c={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:u},d=e.i.parseMedia(Ae(t),c,a),p=b(d),S=p.next();!S.done;S=p.next())T=S.value,e.A(T,a||null,c);E=d.filter(function(A){return A.startTime>=e.l&&A.startTime<e.m}),e.j.append(E),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),V(I)})}Qi.prototype.remove=function(e,t){var n=this;return z(function(r){if(r.g==1)return k(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),V(r)})};function lb(e,t,n){e.l=t,e.m=n}function Bg(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=b(t.keys()),a=r.next();!a.done;a=r.next())(a=t.get(a.value).filter(function(u){return u.endTime<=n}))&&e.j.append(a)}function jg(e,t,n){t.startTime+=n,t.endTime+=n,t=b(t.nestedCues);for(var r=t.next();!r.done;r=t.next())jg(e,r.value,n)}function ub(e,t,n,r,a){var u=n+" "+r,c=new Map;t=b(t);for(var d=t.next();!d.done;d=t.next()){var p=d.value;d=p.stream,p=p.cue,c.has(d)||c.set(d,new Map),c.get(d).has(u)||c.get(d).set(u,[]),jg(e,p,a),p.startTime>=e.l&&p.startTime<e.m&&(c.get(d).get(u).push(p),d==e.C&&e.j.append([p]))}for(a=b(c.keys()),u=a.next();!u.done;u=a.next())for(u=u.value,e.o.has(u)||e.o.set(u,new Map),t=b(c.get(u).keys()),d=t.next();!d.done;d=t.next())d=d.value,p=c.get(u).get(d),e.o.get(u).set(d,p);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}we("shaka.text.TextEngine",Qi),Qi.prototype.destroy=Qi.prototype.destroy,Qi.findParser=function(e){return Hn[e]},Qi.unregisterParser=function(e){delete Hn[e]},Qi.registerParser=function(e,t){Hn[e]=t};var Hn={};function fb(e,t){return e.concat(t)}function Fg(){}function Jr(e){return e!=null}function vi(){}function Os(e,t){return e=qt(e),t=qt(t),e.split("-")[0]==t.split("-")[0]}function ml(e,t){return e=qt(e),t=qt(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function kd(e,t){return e=qt(e),t=qt(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function qt(e){e=b(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=b(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=$g.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function es(e,t){return e=qt(e),t=qt(t),t==e?4:ml(t,e)?3:kd(t,e)?2:ml(e,t)?1:0}function Ad(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=$g.get(e)||e}function Id(e){return e.language?qt(e.language):e.audio&&e.audio.language?qt(e.audio.language):e.video&&e.video.language?qt(e.video.language):"und"}function ff(e,t){e=qt(e);var n=new Set;t=b(t);for(var r=t.next();!r.done;r=t.next())n.add(qt(r.value));for(t=b(n),r=t.next();!r.done;r=t.next())if(r=r.value,r==e)return r;for(t=b(n),r=t.next();!r.done;r=t.next())if(r=r.value,ml(r,e))return r;for(t=b(n),r=t.next();!r.done;r=t.next())if(r=r.value,kd(r,e))return r;for(n=b(n),t=n.next();!t.done;t=n.next())if(t=t.value,ml(e,t))return t;return null}we("shaka.util.LanguageUtils",vi),vi.findClosestLocale=ff,vi.getLocaleForVariant=Id,vi.getLocaleForText=function(e){return qt(e.language||"und")},vi.getBase=Ad,vi.relatedness=es,vi.areSiblings=function(e,t){var n=Ad(e),r=Ad(t);return e!=n&&t!=r&&n==r},vi.normalize=qt,vi.isSiblingOf=kd,vi.isParentOf=ml,vi.areLanguageCompatible=Os,vi.areLocaleCompatible=function(e,t){return e=qt(e),t=qt(t),e==t};var $g=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function zi(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer instanceof ArrayBuffer)return r;if(n.has(r))return null;var a=r.constructor==Array;if(r.constructor!=Object&&!a)return null;n.add(r);var u=a?[]:{},c;for(c in r)u[c]=t(r[c]);return a&&(u.length=r.length),u}}var n=new WeakSet;return t(e)}function Md(e){var t={},n;for(n in e)t[n]=e[n];return t}function zg(){}function Vg(e,t,n,r){var a=e.variants;if((t.length||n.length)&&(a=cb(a,t,n)),r.length){for(t=new zt,a=b(a),n=a.next();!n.done;n=a.next())n=n.value,t.push(String(n.video.width||0),n);var u=[];t.forEach(function(R,D){R=0;var L=[];D=b(D);for(var F=D.next(),U={};!F.done;U={Ae:void 0},F=D.next())U.Ae=F.value,F=r.filter(function(q){return function(N){return q.Ae.decodingInfos[0][N]}}(U)).length,F>R?(R=F,L=[U.Ae]):F==R&&L.push(U.Ae);u.push.apply(u,_(L))}),a=u}n=new Set,t=new Set,a=b(a);for(var c=a.next();!c.done;c=a.next())c=c.value,c.audio&&n.add(c.audio),c.video&&t.add(c.video);n=Array.from(n).sort(function(R,D){return R.bandwidth-D.bandwidth});var d=[];for(a=new Map,n=b(n),c=n.next();!c.done;c=n.next()){c=c.value;var p=c.language+(c.channelsCount||0)+(c.audioSamplingRate||0)+c.roles.join(",")+c.label+c.groupId+c.fastSwitching,S=a.get(p)||[];if(S.length){var T=S[S.length-1],E=Eo(T.codecs),I=Eo(c.codecs);E!=I||c.bandwidth&&T.bandwidth&&!(c.bandwidth>T.bandwidth)||(S.push(c),d.push(c.id))}else S.push(c),d.push(c.id);a.set(p,S)}n=Array.from(t).sort(function(R,D){return R.bandwidth&&D.bandwidth?R.bandwidth-D.bandwidth:R.width-D.width}),t=Pn();var A=[];for(a=new Map,n=b(n),c=n.next();!c.done;c=n.next()){if(c=c.value,p=Math.round(c.frameRate||0)+(c.hdr||"")+c.fastSwitching,S=a.get(p)||[],S.length){if(T=S[S.length-1],!t&&(E=Eo(T.codecs),I=Eo(c.codecs),E!==I))continue;c.width>T.width||c.height>T.height?(S.push(c),A.push(c.id)):c.width==T.width&&c.height==T.height&&(E=Eo(T.codecs),I=Eo(c.codecs),E!=I||c.bandwidth&&T.bandwidth&&!(c.bandwidth>T.bandwidth)||(S.push(c),A.push(c.id)))}else S.push(c),A.push(c.id);a.set(p,S)}e.variants=e.variants.filter(function(R){var D=R.audio;return R=R.video,!(D&&!d.includes(D.id)||R&&!A.includes(R.id))})}function cb(e,t,n){t=b(t);for(var r=t.next(),a={};!r.done;a={oh:void 0},r=t.next())if(a.oh=r.value,r=e.filter(function(u){return function(c){return c.video&&c.video.codecs.startsWith(u.oh)}}(a)),r.length){e=r;break}for(n=b(n),t=n.next(),r={};!t.done;r={ig:void 0},t=n.next())if(r.ig=t.value,t=e.filter(function(u){return function(c){return c.audio&&c.audio.codecs.startsWith(u.ig)}}(r)),t.length){e=t;break}return e}function hb(e,t,n){e.variants=e.variants.filter(function(r){return cf(r,t,n)})}function cf(e,t,n){function r(d,p,S){return d>=p&&d<=S}var a=e.video;if(a&&a.width&&a.height){var u=a.width,c=a.height;if(c>u&&(c=b([c,u]),u=c.next().value,c=c.next().value),!r(u,t.minWidth,Math.min(t.maxWidth,n.width))||!r(c,t.minHeight,Math.min(t.maxHeight,n.height))||!r(a.width*a.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Hg(e,t,n){var r=!1;e=b(e);for(var a=e.next();!a.done;a=e.next()){a=a.value;var u=a.allowedByApplication;a.allowedByApplication=cf(a,t,n),u!=a.allowedByApplication&&(r=!0)}return r}function db(e,t,n){return n=n===void 0?[]:n,z(function(r){return r.g==1?k(r,Gg(e,t,0<t.offlineSessionIds.length,n),2):(yb(t),k(r,vb(t),0))})}function Gg(e,t,n,r){var a,u;return z(function(c){if(c.g==1)return Bi()&&pb(t.variants),k(c,Kg(t.variants,n,!1,r),2);a=null,e&&(u=e.g)&&(a=u.keySystem),t.variants=t.variants.filter(function(d){var p=mb(d,a);if(!p){var S=[];d.audio&&S.push(Jg(d.audio)),d.video&&S.push(Jg(d.video))}return p}),V(c)})}function pb(e){var t={dvav:"avc3",dva1:"avc1",dvhe:"hev1",dvh1:"hvc1",dvc1:"vvc1",dvi1:"vvi1"},n=new Set;e=b(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&n.add(r.video);for(n=b(n),e=n.next();!e.done;e=n.next()){e=e.value,r=b(Object.keys(t));for(var a=r.next();!a.done;a=r.next())if(a=a.value,e.codecs.includes(a)){e.codecs=e.codecs.replace(a,t[a]);break}}}function mb(e,t){var n=Bi(),r=Qt("Firefox")&&af(),a=e.video,u=a&&a.width||0,c=a&&a.height||0;if(n&&a&&(1920<u||1080<c)&&(a.codecs.includes("avc1.")||a.codecs.includes("avc3.")))return!1;if(a){if(n=gl(a.codecs),a.codecs.includes(",")){if(u=a.codecs.split(","),n=Ls("video",u),n=gl(n),u=Ls("audio",u),u=Ns(u,a.mimeType),c=Ds(a.mimeType,u,"audio"),!ct(c))return!1;n=[n,u].join()}if(u=Ds(a.mimeType,n,"video"),!ct(u))return!1;a.codecs=n}if(a=e.audio,r&&a&&a.encrypted&&a.codecs.toLowerCase().includes("opus"))return!1;if(a){if(r=Ns(a.codecs,a.mimeType),n=Ds(a.mimeType,r,"audio"),!ct(n))return!1;a.codecs=r}return e.decodingInfos.some(function(d){return!(!d.supported||t&&(d=d.keySystemAccess)&&d.keySystem!=t)})}function Wg(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=b(t);for(var r=t.next();!r.done;r=t.next()){var a=r.value;r=JSON.stringify(a),a=e[a],a instanceof Object?(a=Wg(a),n.push(r+":"+a)):(a=JSON.stringify(a),n.push(r+":"+a))}return"{"+n.join(",")+"}"}function Xg(e,t){var n,r,a,u,c,d,p;return z(function(S){if(S.g==1){for(n=function(T,E){if(T){var I=Md(T);return I.supported=T.supported&&E.supported,I.powerEfficient=T.powerEfficient&&E.powerEfficient,I.smooth=T.smooth&&E.smooth,E.keySystemAccess&&!I.keySystemAccess&&(I.keySystemAccess=E.keySystemAccess),I}return E},r=null,a=[],u=b(t),c=u.next(),d={};!c.done;d={cache:void 0,Dd:void 0},c=u.next())p=c.value,d.Dd=Wg(p),d.cache=ey,d.cache[d.Dd]?r=n(r,d.cache[d.Dd]):a.push(gb(p).then(function(T){return function(E){var I=null;E=b(E||[]);for(var A=E.next();!A.done;A=E.next())I=n(I,A.value);I&&(T.cache[T.Dd]=I,r=n(r,I))}}(d)));return k(S,Promise.all(a),2)}r&&e.decodingInfos.push(r),V(S)})}function gb(e){var t=[""];e.video&&(t=Xo(e.video.contentType).split(","));var n=[""];e.audio&&(n=Xo(e.audio.contentType).split(","));var r=[];t=b(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;for(var u=b(n),c=u.next(),d={};!c.done;d={xc:void 0},c=u.next())c=c.value,d.xc=zi(e),e.video&&(d.xc.video.contentType=Vn(yi(d.xc.video.contentType),a)),e.audio&&(d.xc.audio.contentType=Vn(yi(d.xc.audio.contentType),c)),r.push(new Promise(function(p){return function(S,T){navigator.mediaCapabilities.decodingInfo(p.xc).then(function(E){S(E)}).catch(T)}}(d)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function Kg(e,t,n,r){var a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G;return z(function(Q){switch(Q.g){case 1:if(e.some(function(re){return re.decodingInfos.length}))return Q.return();a=b(r),u=a.next(),c={};case 2:if(u.done){Q.u(4);break}c.Qg=u.value,d=!1,p=b(e),S=p.next();case 5:if(S.done){Q.u(7);break}T=S.value,E=qg(T,t,n).filter(function(re){return function(ae){return ae=ae[0],(ae.keySystemConfiguration&&ae.keySystemConfiguration.keySystem)===re.Qg}}(c)),I=b(E),A=I.next();case 8:if(A.done){Q.u(10);break}return R=A.value,k(Q,Xg(T,R),9);case 9:A=I.next(),Q.u(8);break;case 10:T.decodingInfos.length&&(d=!0),S=p.next(),Q.u(5);break;case 7:if(d)return Q.return();c={Qg:void 0},u=a.next(),Q.u(2);break;case 4:D=b(e),L=D.next();case 12:if(L.done){Q.u(0);break}F=L.value,U=qg(F,t,n).filter(function(re){return re=re[0],re=re.keySystemConfiguration&&re.keySystemConfiguration.keySystem,!re||!r.includes(re)}),q=b(U),N=q.next();case 15:if(N.done){L=D.next(),Q.u(12);break}return G=N.value,k(Q,Xg(F,G),16);case 16:N=q.next(),Q.u(15)}})}function qg(e,t,n){var r=e.audio,a=e.video,u=[],c=[];if(a)for(var d=b(a.fullMimeTypes),p=d.next();!p.done;p=d.next()){p=p.value;var S=Xo(p);if(S.includes(",")&&!r){var T=S.split(","),E=yi(p);S=Ls("video",T),T=Ls("audio",T),T=Ns(T,E),E=Ds(E,T,"audio"),c.push({contentType:E,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(S=gl(S),p={contentType:Ds(yi(p),S,"video"),width:a.width||64,height:a.height||64,bitrate:a.bandwidth||e.bandwidth||1,framerate:a.frameRate||1},a.hdr)switch(a.hdr){case"SDR":p.transferFunction="srgb";break;case"PQ":p.transferFunction="pq";break;case"HLG":p.transferFunction="hlg"}a.colorGamut&&(p.colorGamut=a.colorGamut),u.push(p)}if(r)for(d=b(r.fullMimeTypes),p=d.next();!p.done;p=d.next())S=p.value,p=yi(S),S=Ns(Xo(S),p),p=Ds(p,S,"audio"),c.push({contentType:p,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(d=[],u.length==0&&u.push(null),c.length==0&&c.push(null),u=b(u),p=u.next();!p.done;p=u.next())for(p=p.value,S=b(c),E=S.next();!E.done;E=S.next())E=E.value,T={type:n?"file":"media-source"},p&&(T.video=p),E&&(T.audio=E),d.push(T);if(c=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!c.length)return[d];for(e=[],n=new Map,c=b(c),u=c.next();!u.done;u=c.next())u=u.value,n.get(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u);for(c=t?"required":"optional",t=t?["persistent-license"]:["temporary"],u=b(n.keys()),p=u.next();!p.done;p=u.next()){for(p=p.value,S=[],E=b(d),T=E.next();!T.done;T=E.next()){T=Object.assign({},T.value);var I=n.get(p),A={keySystem:p,initDataType:"cenc",persistentState:c,distinctiveIdentifier:"optional",sessionTypes:t};I=b(I);for(var R=I.next();!R.done;R=I.next()){if(R=R.value,R.initData&&R.initData.length){for(var D=new Set,L=b(R.initData),F=L.next();!F.done;F=L.next())D.add(F.value.initDataType);A.initDataType=R.initData[0].initDataType}R.distinctiveIdentifierRequired&&(A.distinctiveIdentifier="required"),R.persistentStateRequired&&(A.persistentState="required"),R.sessionType&&(A.sessionTypes=[R.sessionType]),r&&(A.audio?(R.encryptionScheme&&(A.audio.encryptionScheme=A.audio.encryptionScheme||R.encryptionScheme),A.audio.robustness=A.audio.robustness||R.audioRobustness):(A.audio={robustness:R.audioRobustness},R.encryptionScheme&&(A.audio.encryptionScheme=R.encryptionScheme)),A.audio.robustness==""&&delete A.audio.robustness),a&&(A.video?(R.encryptionScheme&&(A.video.encryptionScheme=A.video.encryptionScheme||R.encryptionScheme),A.video.robustness=A.video.robustness||R.videoRobustness):(A.video={robustness:R.videoRobustness},R.encryptionScheme&&(A.video.encryptionScheme=R.encryptionScheme)),A.video.robustness==""&&delete A.video.robustness)}T.keySystemConfiguration=A,S.push(T)}e.push(S)}return e}function Ns(e,t){return e.toLowerCase()=="flac"?_s()?"fLaC":"flac":e.toLowerCase()==="opus"?_s()&&uf(t)=="mp4"?"Opus":"opus":e}function gl(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function yb(e){e.textStreams=e.textStreams.filter(function(t){return t=Vn(t.mimeType,t.codecs),pl(t)})}function vb(e){var t,n,r,a,u,c,d;return z(function(p){switch(p.g){case 1:t=[],n=b(e.imageStreams),r=n.next();case 2:if(r.done){p.u(4);break}if(a=r.value,u=a.mimeType,u=="application/mp4"&&a.codecs=="mjpg"&&(u="image/jpg"),pf.has(u)){p.u(5);break}if(c=Sb.get(u),!c){pf.set(u,!1),p.u(5);break}return k(p,xb(c),7);case 7:d=p.h,pf.set(u,d);case 5:pf.get(u)&&t.push(a),r=n.next(),p.u(2);break;case 4:e.imageStreams=t,V(p)}})}function xb(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Us(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,a=n?n.mimeType:null,u=t?t.codecs:null,c=n?n.codecs:null,d=[];c&&d.push(c),u&&d.push(u);var p=[];n&&p.push(n.mimeType),t&&p.push(t.mimeType),p=p[0]||null;var S=[];t&&S.push(t.kind),n&&S.push(n.kind),S=S[0]||null;var T=new Set;if(t)for(var E=b(t.roles),I=E.next();!I.done;I=E.next())T.add(I.value);if(n)for(E=b(n.roles),I=E.next();!I.done;I=E.next())T.add(I.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:S,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:p,audioMimeType:r,videoMimeType:a,codecs:d.join(", "),audioCodec:u,videoCodec:c,primary:e.primary,roles:Array.from(T),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,c.includes(",")&&(e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage)),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function hf(e){return{id:e.id,active:!1,type:Ut,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function _d(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var a=e.tilesLayout;return r&&(a=r.tilesLayout||a),a&&t!=null&&(t/=Number(a.split("x")[0])),a&&n!=null&&(n/=Number(a.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:a||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Rd(e){return e.__shaka_id||(e.__shaka_id=wb++),e.__shaka_id}function Yg(e){var t=Qg(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Ld(e){var t=Qg(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Qg(e){var t=e.language;return{id:Rd(e),active:!1,type:"",bandwidth:0,language:qt(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function yl(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function df(e){return e.filter(function(t){return yl(t)})}function vl(e,t,n,r){var a=e,u=e.filter(function(p){return p.primary});u.length&&(a=u);var c=a.length?a[0].language:"";if(a=a.filter(function(p){return p.language==c}),t){var d=ff(qt(t),e.map(function(p){return p.language}));d&&(a=e.filter(function(p){return qt(p.language)==d}))}if(a=a.filter(function(p){return p.forced==r}),n){if(e=Zg(a,n),e.length)return e}else if(e=a.filter(function(p){return p.roles.length==0}),e.length)return e;return e=a.map(function(p){return p.roles}).reduce(fb,[]),e.length?Zg(a,e[0]):a}function Zg(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Jg(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}we("shaka.util.StreamUtils",zg),zg.meetsRestrictions=cf;var ey={},wb=0,pf=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),Sb=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function yn(){var e=this;this.A=null,this.j=!1,this.i=new St,this.F=new Ct,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new St,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.s=[],this.B=1,this.G=!1,this.h=this.o=this.g=this.l=null,this.C=new Mt(function(){if(e.j&&e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=null}w=yn.prototype,w.stop=function(){this.A=null,this.j=!1,this.s=[],this.B=1,this.o=this.l=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.m=null},w.release=function(){this.F.release(),this.C=null},w.init=function(e){this.A=e},w.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:h.devicePixelRatio;e=h.screen.height*n,t=h.screen.width*n}this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:h.devicePixelRatio,e=Math.min(e,this.o.clientHeight*n),t=Math.min(t,this.o.clientWidth*n)),n=this.s.filter(function(S){return S&&!(S.audio&&S.audio.fastSwitching||S.video&&S.video.fastSwitching)}),n.length||(n=this.s);var r=n;if(n.length!=this.s.length&&(r=this.s.filter(function(S){return S&&!!(S.audio&&S.audio.fastSwitching||S.video&&S.video.fastSwitching)})),n=Dd(this,this.g.restrictions,r,1/0,1/0),e!=1/0||t!=1/0){n=Cb(n),n=b(n);for(var a=n.next();!a.done;a=n.next())if(a=a.value,a.height>=e&&a.width>=t){e=a.height,t=a.width;break}n=Dd(this,this.g.restrictions,r,e,t)}for(e=this.getBandwidthEstimate(),r.length&&!n.length&&(n=Dd(this,null,r,1/0,1/0),n=[n[0]]),t=n[0]||null,r=0;r<n.length;r++){a=n[r];for(var u=isNaN(this.B)?1:Math.abs(this.B),c=u*a.bandwidth/this.g.bandwidthDowngradeTarget,d={bandwidth:1/0},p=r+1;p<n.length;p++)if(a.bandwidth!=n[p].bandwidth){d=n[p];break}u=u*d.bandwidth/this.g.bandwidthUpgradeTarget,e>=c&&e<=u&&(t.bandwidth!=a.bandwidth||t.bandwidth==a.bandwidth&&t.video&&a.video&&(t.video.width<a.video.width||t.video.height<a.video.height))&&(t=a)}return this.l=Date.now(),t},w.enable=function(){this.j=!0},w.disable=function(){this.j=!1},w.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.i.sample(e,t),n&&this.l!=null&&this.j&&ty(this))},w.trySuggestStreams=function(){this.l!=null&&this.j&&ty(this)},w.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.m?this.m.getBandwidthEstimate(e):e},w.setVariants=function(e){this.s=e},w.playbackRateChanged=function(e){this.B=e},w.setMediaElement=function(e){var t=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in h&&(this.h=new ResizeObserver(function(){t.C.Y(Tb)}),this.h.observe(this.o))},w.setCmsdManager=function(e){this.m=e},w.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function ty(e){if(!e.G){var t=e.i;if(!(t.g>=t.i))return;e.G=!0,e.l-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.l<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Dd(e,t,n,r,a){if(e.m){var u=e.m.zg();u&&(n=n.filter(function(c){return c.bandwidth&&u?c.bandwidth<=u:!0}))}return t&&(n=n.filter(function(c){return cf(c,t,{width:a,height:r})})),n.sort(function(c,d){return c.bandwidth-d.bandwidth})}function Cb(e){var t=[];e=b(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,a){return r.width-a.width})}we("shaka.abr.SimpleAbrManager",yn),yn.prototype.configure=yn.prototype.configure,yn.prototype.setCmsdManager=yn.prototype.setCmsdManager,yn.prototype.setMediaElement=yn.prototype.setMediaElement,yn.prototype.playbackRateChanged=yn.prototype.playbackRateChanged,yn.prototype.setVariants=yn.prototype.setVariants,yn.prototype.getBandwidthEstimate=yn.prototype.getBandwidthEstimate,yn.prototype.trySuggestStreams=yn.prototype.trySuggestStreams,yn.prototype.segmentDownloaded=yn.prototype.segmentDownloaded,yn.prototype.disable=yn.prototype.disable,yn.prototype.enable=yn.prototype.enable,yn.prototype.chooseVariant=yn.prototype.chooseVariant,yn.prototype.init=yn.prototype.init,yn.prototype.release=yn.prototype.release,yn.prototype.stop=yn.prototype.stop;var Tb=1;we("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),we("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function mf(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=b(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}mf.prototype.add=function(e,t,n){return ny(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function ny(e,t,n,r){var a;if(!(a=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(a=e.audio&&t.audio)){a=e.audio;var u=t.audio;a=!!((!a.channelsCount||!u.channelsCount||2<a.channelsCount||2<u.channelsCount)&&a.channelsCount!=u.channelsCount||a.spatialAudio!==u.spatialAudio||n&&!oy(a,u)||!iy(a.roles,u.roles)||r&&a.groupId!==u.groupId)}return!(r=a)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||oy(e,t))&&iy(e.roles,t.roles))),!r}mf.prototype.values=function(){return this.g.values()};function oy(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return Ps(r)}),t=t.codecs.split(",").map(function(r){return Ps(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function iy(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=b(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function ry(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Bs(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}ry.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Pn(),r=e.filter(function(a){return ny(t.i,a,!n,t.g)});return r.length?new mf(r[0],r,!n,this.g):this.j.create(e)};function Bs(e,t,n,r,a,u,c,d,p,S,T){this.A=e,this.B=t,this.i=n,this.j=r,this.C=a,this.m=u,this.h=c===void 0?"":c,this.l=d===void 0?"":d,this.o=p===void 0?"reload":p,this.s=S===void 0?!1:S,this.g=T===void 0?"":T}Bs.prototype.create=function(e){var t=[];t=bb(e,this.A);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=Eb(t,this.B),e.length&&(t=e),this.m&&(e=_b(t,this.m),e.length&&(t=e)),this.j&&(e=Mb(t,this.j),e.length&&(t=e)),this.i&&(e=Ib(t,this.i),e.length&&(t=e)),this.h&&(e=kb(t,this.h),e.length&&(t=e)),this.l&&(e=Ab(t,this.l),e.length&&(t=e)),e=Rb(t,this.C),e.length&&(t=e),this.g&&(e=Lb(t,this.g),e.length&&(t=e)),new mf(t[0],t,!(this.o=="smooth"&&Pn()),this.s)};function bb(e,t){t=qt(t);var n=ff(t,e.map(function(r){return Id(r)}));return n?e.filter(function(r){return n==Id(r)}):[]}function Eb(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function kb(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function Ab(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function Ib(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function Mb(e,t){return t=="AUTO"&&(t=h.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function _b(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function Rb(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Lb(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function Db(){this.g=xl,this.i=new Map().set(xl,2).set(js,1),this.h=0}function sy(e,t,n){e.i.set(xl,n).set(js,t)}var js=0,xl=1;function ay(e,t){var n=_i();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function ly(e){var t,n;return z(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new se(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),k(r,new Promise(function(a){new Mt(a).Y(n/1e3)}),2))}e.h*=e.m,V(r)})}function _i(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Zt(){var e,t,n=new Promise(function(r,a){e=r,t=a});return n.resolve=e,n.reject=t,n}Zt.prototype.resolve=function(){},Zt.prototype.reject=function(){};function Dn(e,t){this.promise=e,this.i=t,this.g=!1}function ts(e){return new Dn(Promise.reject(e),function(){return Promise.resolve()})}function Pd(){var e=Promise.reject(new se(2,7,7001));return e.catch(function(){}),new Dn(e,function(){return Promise.resolve()})}function Fs(e){return new Dn(Promise.resolve(e),function(){return Promise.resolve()})}function uy(e){return new Dn(e,function(){return e.catch(function(){})})}Dn.prototype.abort=function(){return this.g=!0,this.i()};function fy(e){return new Dn(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}Dn.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Dn.prototype.Aa=function(e,t){function n(d){return function(p){if(a.g&&d)u.reject(c);else{var S=d?e:t;S?r=Pb(S,p,u):(d?u.resolve:u.reject)(p)}}}function r(){return u.reject(c),a.abort()}var a=this,u=new Zt,c=new se(2,7,7001);return this.promise.then(n(!0),n(!1)),new Dn(u,function(){return r()})};function Pb(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(a){return n.reject(a),function(){return Promise.resolve()}}}we("shaka.util.AbortableOperation",Dn),Dn.prototype.chain=Dn.prototype.Aa,Dn.prototype.finally=Dn.prototype.finally,Dn.all=fy,Dn.prototype.abort=Dn.prototype.abort,Dn.notAbortable=uy,Dn.completed=Fs,Dn.aborted=Pd,Dn.failed=ts;function $e(e,t){if(t)if(t instanceof Map)for(var n=b(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=h.performance&&h.performance.now?h.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function cy(e){var t=new $e(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}$e.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},$e.prototype.stopImmediatePropagation=function(){this.g=!0},$e.prototype.stopPropagation=function(){},we("shaka.util.FakeEvent",$e);var gf={ij:"abrstatuschanged",jj:"adaptation",kj:"audiotrackchanged",lj:"buffering",mj:"complete",nj:"downloadfailed",oj:"downloadheadersreceived",pj:"drmsessionupdate",rj:"emsg",Ij:"prft",Error:"error",sj:"expirationupdated",tj:"firstquartile",uj:"gapjumped",xj:"keystatuschanged",zj:"loaded",Aj:"loading",Cj:"manifestparsed",Dj:"manifestupdated",Ej:"mediaqualitychanged",Metadata:"metadata",Fj:"midpoint",Gj:"nospatialvideoinfo",Hj:"onstatechange",Jj:"ratechange",Lj:"segmentappended",Mj:"sessiondata",Nj:"spatialvideoinfo",Oj:"stalldetected",Pj:"started",Qj:"statechanged",Rj:"streaming",Sj:"textchanged",Tj:"texttrackvisibility",Uj:"thirdquartile",Vj:"timelineregionadded",Wj:"timelineregionenter",Xj:"timelineregionexit",Yj:"trackschanged",$j:"unloading",bk:"variantchanged"};function Xt(){this.ya=new zt,this.me=this}Xt.prototype.addEventListener=function(e,t){this.ya&&this.ya.push(e,t)},Xt.prototype.removeEventListener=function(e,t){this.ya&&this.ya.remove(e,t)},Xt.prototype.dispatchEvent=function(e){if(!this.ya)return!0;var t=this.ya.get(e.type)||[],n=this.ya.get("All");for(n&&(t=t.concat(n)),t=b(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.me,e.currentTarget=this.me;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Xt.prototype.release=function(){this.ya=null};function $s(){this.g=[]}function ns(e,t){e.g.push(t.finally(function(){jt(e.g,t)}))}$s.prototype.destroy=function(){for(var e=[],t=b(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function nn(e,t,n,r,a,u){Xt.call(this),this.i=!1,this.m=new $s,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.A=n||null,this.B=r||null,this.F=a||null,this.C=u||null,this.o=this.s=!1}X(nn,Xt),w=nn.prototype,w.Pf=function(e){this.s=e},w.Qf=function(e){this.o=e};function Zi(e,t,n,r){n=n||gy;var a=vf[e];(!a||n>=a.priority)&&(vf[e]={priority:n,ie:t,Di:r===void 0?!1:r})}function hy(e,t){for(var n=b(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(e=b(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}w.Gi=function(e){this.g.add(e)},w.bj=function(e){this.g.delete(e)},w.mg=function(){this.g.clear()},w.Hi=function(e){this.h.add(e)},w.cj=function(e){this.h.delete(e)},w.ng=function(){this.h.clear()};function Qn(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}w.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Xt.prototype.release.call(this),this.m.destroy()},w.request=function(e,t,n){var r=this,a=new my;if(this.i){var u=Promise.reject(new se(2,7,7001));return u.catch(function(){}),new yf(u,function(){return Promise.resolve()},a)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?zi(t.retryParameters):_i(),t.uris=zi(t.uris),u=Ob(this,e,t,n);var c=u.Aa(function(){return dy(r,e,t,n,new ay(t.retryParameters,!1),0,null,a)}),d=c.Aa(function(I){return Nb(r,e,I,n)}),p=Date.now(),S=0;u.promise.then(function(){S=Date.now()-p},function(){});var T=0;c.promise.then(function(){T=Date.now()},function(){});var E=d.Aa(function(I){var A=Date.now()-T,R=I.response;return R.timeMs+=S,R.timeMs+=A,I.ii||!r.l||R.fromCache||t.method=="HEAD"||e!=Ri||r.l(R.timeMs,R.data.byteLength,py(n)),r.C&&r.C(e,R,n),R},function(I){throw I&&(I.severity=2),I});return u=new yf(E.promise,function(){return E.abort()},a),ns(this.m,u),u};function Ob(e,t,n,r){function a(d){u=u.Aa(function(){return n.body&&(n.body=ie(n.body)),d(t,n,r)})}var u=Fs(void 0);e.B&&a(e.B),e=b(e.g);for(var c=e.next();!c.done;c=e.next())a(c.value);return u.Aa(void 0,function(d){throw d instanceof se&&d.code==7001?d:new se(2,1,1006,d)})}function dy(e,t,n,r,a,u,c,d){e.s&&(n.uris[u]=n.uris[u].replace("https://","http://")),e.o&&(n.uris[u]=n.uris[u].replace("http://","https://")),0<u&&e.F&&e.F(t,r,n.uris[u],n.uris[u-1]);var p=new Ln(n.uris[u]),S=p.Bb,T=!1;S||(S=location.protocol,S=S.slice(0,-1),Qu(p,S),n.uris[u]=p.toString()),S=S.toLowerCase();var E=(S=vf[S])?S.ie:null;if(!E)return ts(new se(2,1,1e3,p));var I=S.Di,A=null,R=null,D=!1,L=!1,F;return uy(ly(a)).Aa(function(){if(e.i)return Pd();F=Date.now();var U=0;n.requestStartTime=Date.now();var q=E(n.uris[u],n,t,function(Q,re,ae){A&&A.stop(),R&&R.Y(G/1e3),e.l&&t==Ri&&(U++,n.packetNumber=U,e.l(Q,re,py(r),n),T=!0,d.g=ae)},function(Q){e.j&&e.j(Q,n,t),L=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!I)return q;var N=n.retryParameters.connectionTimeout;N&&(A=new Mt(function(){D=!0,q.abort()}),A.Y(N/1e3));var G=n.retryParameters.stallTimeout;return G&&(R=new Mt(function(){D=!0,q.abort()})),q}).Aa(function(U){A&&A.stop(),R&&R.stop(),U.timeMs==null&&(U.timeMs=Date.now()-F);var q={response:U,ii:T};return!L&&e.j&&e.j(U.headers,n,t),q},function(U){if(A&&A.stop(),R&&R.stop(),e.A){var q=null,N=0;U instanceof se&&(q=U,U.code==1001&&(N=U.data[1])),e.A(n,q,N,D)}if(e.i)return Pd();if(D&&(U=new se(1,1,1003,n.uris[u],t)),U instanceof se){if(U.code==7001)throw U;if(U.code==1010)throw c;if(U.severity==1)return q=new Map().set("error",U),q=new $e("retry",q),e.dispatchEvent(q),u=(u+1)%n.uris.length,dy(e,t,n,r,a,u,U,d)}throw U})}function Nb(e,t,n,r){var a=Fs(void 0);e=b(e.h);for(var u=e.next(),c={};!u.done;c={Vg:void 0},u=e.next())c.Vg=u.value,a=a.Aa(function(d){return function(){var p=n.response;return p.data&&(p.data=ie(p.data)),(0,d.Vg)(t,p,r)}}(c));return a.Aa(function(){return n},function(d){var p=2;if(d instanceof se){if(d.code==7001)throw d;p=d.severity}throw new se(p,1,1007,d)})}function py(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}we("shaka.net.NetworkingEngine",nn),nn.prototype.request=nn.prototype.request,nn.prototype.destroy=nn.prototype.destroy,nn.makeRequest=Qn,nn.defaultRetryParameters=function(){return _i()},nn.prototype.clearAllResponseFilters=nn.prototype.ng,nn.prototype.unregisterResponseFilter=nn.prototype.cj,nn.prototype.registerResponseFilter=nn.prototype.Hi,nn.prototype.clearAllRequestFilters=nn.prototype.mg,nn.prototype.unregisterRequestFilter=nn.prototype.bj,nn.prototype.registerRequestFilter=nn.prototype.Gi,nn.unregisterScheme=function(e){delete vf[e]},nn.registerScheme=Zi,nn.prototype.setForceHTTPS=nn.prototype.Qf,nn.prototype.setForceHTTP=nn.prototype.Pf;function my(){this.g=0}nn.NumBytesRemainingClass=my;function yf(e,t,n){Dn.call(this,e,t),this.h=n}X(yf,Dn),nn.PendingRequest=yf;var Ri=1;nn.RequestType={MANIFEST:0,SEGMENT:Ri,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},nn.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6};var gy=3;nn.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:gy};var vf={};function zs(e){this.g=!1,this.h=new Zt,this.i=e}zs.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Jt(e,t){if(e.g)throw t instanceof se&&t.code==7003?t:new se(2,7,7003,t)}function Od(e,t){var n=[];e=b(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function Ub(e,t){e=b(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function wl(e){for(var t=new Map,n=b(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Nd(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function en(e,t){this.h=wt(e),this.i=t==yy,this.g=0}w=en.prototype,w.na=function(){return this.g<this.h.byteLength},w.va=function(){return this.g},w.getLength=function(){return this.h.byteLength},w.T=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw Ji()}},w.la=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw Ji()}},w.P=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw Ji()}},w.Sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw Ji()}},w.Nc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw Ji()}if(2097151<t)throw new se(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},w.qb=function(e){if(this.g+e>this.h.byteLength)throw Ji();var t=Ae(this.h,this.g,e);return this.g+=e,t},w.skip=function(e){if(this.g+e>this.h.byteLength)throw Ji();this.g+=e},w.Oi=function(e){if(this.g<e)throw Ji();this.g-=e},w.seek=function(e){if(0>e||e>this.h.byteLength)throw Ji();this.g=e},w.oc=function(){for(var e=this.g;this.na()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Ae(this.h,e,this.g-e),this.g+=1,fn(e)};function Ji(){return new se(2,3,3e3)}we("shaka.util.DataViewReader",en),en.prototype.readTerminatedString=en.prototype.oc,en.prototype.seek=en.prototype.seek,en.prototype.rewind=en.prototype.Oi,en.prototype.skip=en.prototype.skip,en.prototype.readBytes=en.prototype.qb,en.prototype.readUint64=en.prototype.Nc,en.prototype.readInt32=en.prototype.Sg,en.prototype.readUint32=en.prototype.P,en.prototype.readUint16=en.prototype.la,en.prototype.readUint8=en.prototype.T,en.prototype.getLength=en.prototype.getLength,en.prototype.getPosition=en.prototype.va,en.prototype.hasMoreData=en.prototype.na;var yy=1;en.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:yy};function tn(){this.i=[],this.h=[],this.g=!1}w=tn.prototype,w.box=function(e,t){return e=vy(e),this.i[e]=Bb,this.h[e]=t,this},w.S=function(e,t){return e=vy(e),this.i[e]=xy,this.h[e]=t,this},w.stop=function(){this.g=!0},w.parse=function(e,t,n){for(e=new en(e,0),this.g=!1;e.na()&&!this.g;)this.Kc(0,e,t,n)},w.Kc=function(e,t,n,r){var a=t.va();if(r&&a+8>t.getLength())this.g=!0;else{var u=t.P(),c=t.P(),d=xf(c),p=!1;switch(u){case 0:u=t.getLength()-a;break;case 1:if(r&&t.va()+8>t.getLength()){this.g=!0;return}u=t.Nc(),p=!0}var S=this.h[c];if(S){var T=null,E=null;if(this.i[c]==xy){if(r&&t.va()+4>t.getLength()){this.g=!0;return}E=t.P(),T=E>>>24,E&=16777215}c=a+u,n&&c>t.getLength()&&(c=t.getLength()),r&&c>t.getLength()?this.g=!0:(r=c-t.va(),t=0<r?t.qb(r):new Uint8Array(0),t=new en(t,0),S({name:d,parser:this,partialOkay:n||!1,version:T,flags:E,reader:t,size:u,start:a+e,has64BitSize:p}))}else t.skip(Math.min(a+u-t.va(),t.getLength()-t.va()))}};function Rt(e){for(var t=Hs(e);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Ar(e){for(var t=Hs(e),n=e.reader.P(),r=0;r<n&&(e.parser.Kc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function Lo(e){var t=Hs(e);for(e.reader.skip(78);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Ud(e){var t=Hs(e);e.reader.skip(8);var n=e.reader.la();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Vs(e){return function(t){e(t.reader.qb(t.reader.getLength()-t.reader.va()))}}function vy(e){var t=0;e=b(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function xf(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Hs(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}we("shaka.util.Mp4Parser",tn),tn.headerSize=Hs,tn.typeToString=xf,tn.allData=Vs,tn.audioSampleEntry=Ud,tn.visualSampleEntry=Lo,tn.sampleDescription=Ar,tn.children=Rt,tn.prototype.parseNext=tn.prototype.Kc,tn.prototype.parse=tn.prototype.parse,tn.prototype.stop=tn.prototype.stop,tn.prototype.fullBox=tn.prototype.S,tn.prototype.box=tn.prototype.box;var Bb=0,xy=1;function wy(e){var t=this;this.g=[],this.h=[],this.data=[],new tn().box("moov",Rt).box("moof",Rt).S("pssh",function(n){if(!(1<n.version)){var r=Ae(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(Yi(n.reader.qb(16))),0<n.version){r=n.reader.P();for(var a=0;a<r;a++){var u=Yi(n.reader.qb(16));t.h.push(u)}}}}).parse(e)}function wf(e,t,n,r){var a=e.length,u=t.length+16+a;0<r&&(u+=4+16*n.size);var c=new Uint8Array(u),d=wt(c),p=0;if(d.setUint32(p,u),p+=4,d.setUint32(p,1886614376),p+=4,1>r?d.setUint32(p,0):d.setUint32(p,16777216),p+=4,c.set(t,p),p+=t.length,0<r)for(d.setUint32(p,n.size),p+=4,t=b(n),n=t.next();!n.done;n=t.next())n=Yr(n.value),c.set(n,p),p+=n.length;return d.setUint32(p,a),c.set(e,p+4),c}function Bd(e,t){return e=qi(e),Gs(e,t)}function Gs(e,t){return e=jb(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function jd(e){return $d.has(e)?$d.get(e):""}function jb(e){function t(a,u){u=u===void 0?!1:u;for(var c=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){u=r+2,r=e.indexOf(">",r),u=e.substring(u,r);var d=u.indexOf(a);if(d==-1){var p=a.indexOf(".");0<p&&(d=u.indexOf(a.substring(0,p)))}if(d==-1)throw a=e.substring(0,r).split(`
`),Error(`Unexpected close tag
Line: `+(a.length-1)+`
Column: `+(a[a.length-1].length+1)+`
Char: `+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){d=e.indexOf("]]>",r),d==-1?(c.push(e.substr(r+9)),r=e.length):(c.push(e.substring(r+9,d)),r=d+3);continue}r++;continue}e:{p=u,r++;var S=n(),T={};for(d=[];e.charCodeAt(r)!==62&&e[r];){var E=e.charCodeAt(r);if(64<E&&91>E||96<E&&123>E){E=n();for(var I=e.charCodeAt(r);I&&I!==39&&I!==34&&!(64<I&&91>I||96<I&&123>I)&&I!==62;)r++,I=e.charCodeAt(r);var A=r+1;if(r=e.indexOf(e[r],A),A=e.slice(A,r),I===39||I===34){if(r===-1){for(p={tagName:S,attributes:T,children:d,parent:null},S=0;S<d.length;S++)typeof d[S]!="string"&&(d[S].parent=p);d=p;break e}}else A=null,r--;E.startsWith("xmlns:")&&$d.set(A,E.split(":")[1]),S==="tt"&&E==="xml:space"&&A==="preserve"&&(p=!0),T[E]=A}r++}for(e.charCodeAt(r-1)!==47?(r++,d=t(S,p)):r++,p={tagName:S,attributes:T,children:d,parent:null},S=d.length,T=0;T<S;T++)E=d[T],typeof E!="string"?E.parent=p:T==S-1&&E==`
`&&d.pop();d=p}if(c.push(d),typeof d=="string")break;d.tagName[0]==="?"&&d.children&&(c.push.apply(c,_(d.children)),d.children=[])}else d=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),d=e.slice(d,r+1),u?0<d.length&&c.push(d):(c.length&&d.length==1&&d[0]==`
`||0<d.trim().length)&&c.push(d),r++;return c}function n(){for(var a=r;`\r
	>/= `.indexOf(e[r])===-1&&e[r];)r++;return e.slice(a,r)}var r=0;return t("")}function Sf(e){return typeof e=="string"}function Sy(e){var t=[];if(!e.children)return[];e=b(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function on(e,t){var n=[];if(!e.children)return[];e=b(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function Gn(e){return typeof e=="string"?bo(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:bo(e))}function xi(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Gn(e))&&(e=e.trim()),e):null}function wi(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=b(e.children);for(var r=e.next();!r.done;r=e.next())wi(r.value,t,n)}return n}function Si(e,t){return e=on(e,t),e.length!=1?null:e[0]}function er(e,t,n){return e=Cy(e,t,n),e.length!=1?null:e[0]}function Bt(e,t,n,r){r=r===void 0?null:r;var a=null;return e=e.attributes[t],e!=null&&(a=n(e)),a??r}function tr(e,t,n){return t=jd(t),e.attributes[t+":"+n]||null}function Cy(e,t,n){t=jd(t);var r=[];if(e.children){e=b(e.children);for(var a=e.next();!a.done;a=e.next())(a=a.value)&&a.tagName===t+":"+n&&r.push(a)}return r}function Vi(e,t,n){t=b(t);for(var r=t.next();!r.done;r=t.next())if(r=tr(e,r.value,n))return r;return null}function Ir(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Hi(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Cf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Tf(e){return e=Number(e),e%1===0?e:null}function nr(e){return e=Number(e),e%1===0&&0<e?e:null}function vo(e){return e=Number(e),e%1===0&&0<=e?e:null}function bf(e){return e=Number(e),isNaN(e)?null:e}function Fd(e){return e?e.toLowerCase()==="true":!1}function Fb(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Ef(e){var t=[];e=bo(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=b(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=n.match(/^([\w]+)/);if(r){var a=n.match(/(@id='(.*?)')/),u=n.match(/(@t='(\d+)')/),c=n.match(/(@n='(\d+)')/),d=n.match(/\[(\d+)\]/);t.push({name:r[0],id:a?a[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:u?Number(u[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:c?Number(c[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:d?Number(d[1])-1:null,Sb:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Sb=n.slice(1))}return t}function Ty(e,t){var n=Ef(t.attributes.sel||"");if(n.length){var r=n[n.length-1],a=t.attributes.pos||null;n=r.position,n==null&&(r.t!==null&&(n=by(e,"t",r.t)),r.n!==null&&(n=by(e,"n",r.n))),n===null?n=a==="prepend"?0:e.length:a==="prepend"?--n:a==="after"&&++n,a=t.tagName,(r=r.Sb)&&e[n]?Ey(e[n],a,r,xi(t)||""):(a!=="remove"&&a!=="replace"||e.splice(n,1),a!=="add"&&a!=="replace"||e.splice.apply(e,[n,0].concat(_(t.children))))}}function by(e,t,n){var r=0;e=b(e);for(var a=e.next();!a.done;a=e.next()){if(Number(a.value.attributes[t])===n)return r;r++}return null}function Ey(e,t,n,r){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=r)}function ky(e){var t=document.createElementNS("",e.tagName),n;for(n in e.attributes)t.setAttribute(n,e.attributes[n]);for(e=b(e.children),n=e.next();!n.done;n=e.next()){n=n.value;var r=void 0;typeof n=="string"?r=new Text(n):r=ky(n),t.appendChild(r)}return t}var $d=new Map([]);function kf(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.fa=this.da=!1,this.I=0,this.g=null,this.B=new Ct,this.i=new Map,this.A=new Map,this.l=new Zt,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.Z=new Map,this.ea=new Map,this.L=new Mt(function(){return Qb(t)}),this.R=!1,this.N=[],this.U=!1,this.K=new Mt(function(){eE(t)}),this.l.catch(function(){}),this.j=new zs(function(){return $b(t)}),this.ba=!1,this.F=this.G=null}w=kf.prototype,w.destroy=function(){return this.j.destroy()};function $b(e){return z(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,k(t,Ny(e),2);case 2:if(!e.m){t.u(3);break}return Z(t,4),k(t,e.m.setMediaKeys(null),6);case 6:K(t,5);break;case 4:ne(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,V(t)}})}w.configure=function(e){this.h=e,this.K&&this.K.Sa(this.h.updateExpirationTime)};function zb(e,t,n){return e.fa=!0,e.A=new Map,e.R=n,Iy(e,t)}function Ay(e,t,n){e.A=new Map,n=b(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=b(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.R=0<e.A.size,Iy(e,t)}function Vb(e,t,n,r,a,u){var c=new Map;return a={audioCapabilities:a,videoCapabilities:u,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},a.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],c.set(t,a),Ly(e,c,[])}function Iy(e,t){var n,r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N;return z(function(G){if(G.g==1){if(n=qb(e))for(r=b(t),a=r.next();!a.done;a=r.next())u=a.value,u.video&&(u.video.drmInfos=[n]),u.audio&&(u.audio.drmInfos=[n]);for(c=t.some(function(Q){return!!(Q.video&&Q.video.drmInfos.length||Q.audio&&Q.audio.drmInfos.length)}),c||(d=wl(e.h.servers),nE(t,d)),p=new Set,S=b(t),T=S.next();!T.done;T=S.next())for(E=T.value,I=Uy(E),A=b(I),R=A.next();!R.done;R=A.next())D=R.value,p.add(D);for(L=b(p),F=L.next();!F.done;F=L.next())U=F.value,oE(U,wl(e.h.servers),wl(e.h.advanced||{}),e.h.keySystemsMapping);return k(G,Kg(t,e.R,e.ba,e.h.preferredKeySystems),2)}return Jt(e.j),q=c||Object.keys(e.h.servers).length,q?(N=Ly(e,void 0,t),G.return(c?N:N.catch(function(){}))):(e.da=!0,G.return(Promise.resolve()))})}function My(e){var t;return z(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return k(n,e.G,3);case 3:return Jt(e.j),n.return();case 2:return Z(n,4),e.G=e.m.setMediaKeys(e.s),k(n,e.G,6);case 6:K(n,5);break;case 4:t=ne(n),e.o(new se(2,6,6003,t.message));case 5:Jt(e.j),V(n)}})}function Hb(e,t){return z(function(n){if(n.g==1)return k(n,My(e),2);Sl(e,t.initDataType,Ae(t.initData)),V(n)})}w.Rb=function(e){var t=this;return z(function(n){if(n.g==1)return t.s?(t.m=e,t.B.ha(t.m,"play",function(){for(var r=b(t.N),a=r.next();!a.done;a=r.next())Vd(t,a.value);t.U=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Ny(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?k(n,My(t),2):n.u(2)):(t.B.ha(e,"encrypted",function(){t.o(new se(2,6,6010))}),n.return());_y(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return Hb(t,r)}),V(n)})};function Gb(e){var t,n,r,a,u;return z(function(c){switch(c.g){case 1:if(!e.s||!e.g)return c.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){c.u(2);break}return t=Qn([e.g.serverCertificateUri],e.h.retryParameters),Z(c,3),n=e.C.Lb.request(5,t),k(c,n.promise,5);case 5:r=c.h,e.g.serverCertificate=Ae(r.data),K(c,4);break;case 3:throw a=ne(c),new se(2,6,6017,a);case 4:if(e.j.g)return c.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?c.return():(Z(c,6),k(c,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:K(c,0);break;case 6:throw u=ne(c),new se(2,6,6004,u.message)}})}function Wb(e,t){var n,r,a;return z(function(u){if(u.g==1)return k(u,Py(e,t,{initData:null,initDataType:null}),2);if(u.g!=3)return n=u.h,n?(r=[],(a=e.i.get(n))&&(a.kb=new Zt,r.push(a.kb)),r.push(n.remove()),k(u,Promise.all(r),3)):u.return();e.i.delete(n),V(u)})}function _y(e){var t,n,r,a,u;return z(function(c){if(c.g==1)return e.A.size?(e.A.forEach(function(d,p){Py(e,p,d)}),k(c,e.l,3)):c.u(2);if(c.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&tE(e))return c.return(e.l);e.l=new Zt,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=b(n),a=r.next();!a.done;a=r.next())u=a.value,Sl(e,u.initDataType,u.initData);return Cl(e)&&e.l.resolve(),c.return(e.l)})}function Sl(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var r=e.i.values();r=b(r);for(var a=r.next();!a.done;a=r.next())if(Rn(n,a.value.initData))return}0<e.i.size&&Cl(e)&&(e.l.resolve(),e.l=new Zt,e.l.catch(function(){})),Yb(e,t,n,e.g.sessionType)}}function Ry(e){return e=e.i.keys(),e=Od(e,function(t){return t.sessionId}),Array.from(e)}w.ff=function(){var e=this,t=this.i.keys();return t=Od(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},w.ad=function(){var e=1/0,t=this.i.keys();t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},w.Ld=function(){return Nd(this.ea)};function Ly(e,t,n){var r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U;return z(function(q){switch(q.g){case 1:if(r=new Map,n.length){a=Xb(e,n,r),q.u(2);break}return k(q,Kb(e,t),3);case 3:a=q.h;case 2:if(u=a,!u)throw new se(2,6,6001);for(Jt(e.j),Z(q,4),e.H.clear(),c=u.getConfiguration(),d=c.audioCapabilities||[],p=c.videoCapabilities||[],S=b(d),T=S.next();!T.done;T=S.next())E=T.value,e.H.add(E.contentType.toLowerCase());for(I=b(p),A=I.next();!A.done;A=I.next())R=A.value,e.H.add(R.contentType.toLowerCase());if(n.length){var N=u.keySystem,G=r.get(u.keySystem),Q=[],re=[],ae=[],me=[],le=[],ue=new Set,de=new Set;By(G,Q,re,me,ae,le,ue,de);var be=e.R?"persistent-license":"temporary";for(N={keySystem:N,encryptionScheme:Q[0],licenseServerUri:re[0],distinctiveIdentifierRequired:G[0].distinctiveIdentifierRequired,persistentStateRequired:G[0].persistentStateRequired,sessionType:G[0].sessionType||be,audioRobustness:G[0].audioRobustness||"",videoRobustness:G[0].videoRobustness||"",serverCertificate:me[0],serverCertificateUri:ae[0],initData:le,keyIds:ue},0<de.size&&(N.keySystemUris=de),G=b(G),de=G.next();!de.done;de=G.next())de=de.value,de.distinctiveIdentifierRequired&&(N.distinctiveIdentifierRequired=de.distinctiveIdentifierRequired),de.persistentStateRequired&&(N.persistentStateRequired=de.persistentStateRequired);G=N}else G=u.keySystem,de=t.get(u.keySystem),N=[],Q=[],re=[],ae=[],me=[],le=new Set,By(de.drmInfos,N,Q,ae,re,me,le),G={keySystem:G,encryptionScheme:N[0],licenseServerUri:Q[0],distinctiveIdentifierRequired:de.distinctiveIdentifier=="required",persistentStateRequired:de.persistentState=="required",sessionType:de.sessionTypes[0]||"temporary",audioRobustness:(de.audioCapabilities?de.audioCapabilities[0].robustness:"")||"",videoRobustness:(de.videoCapabilities?de.videoCapabilities[0].robustness:"")||"",serverCertificate:ae[0],serverCertificateUri:re[0],initData:me,keyIds:le};if(e.g=G,!e.g.licenseServerUri)throw new se(2,6,6012,e.g.keySystem);return k(q,u.createMediaKeys(),6);case 6:if(D=q.h,Jt(e.j),e.s=D,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){q.u(7);break}return Z(q,8),k(q,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(L=q.h,L!="usable")throw new se(2,6,6018);Jt(e.j),K(q,7,4);break;case 8:throw F=ne(q,4),F instanceof se?F:new se(2,6,6019,F.message);case 7:return e.da=!0,k(q,Gb(e),11);case 11:Jt(e.j),K(q,0);break;case 4:throw U=ne(q),Jt(e.j,U),e.g=null,e.H.clear(),U instanceof se?U:new se(2,6,6002,U.message)}})}function Xb(e,t,n){for(var r=b(t),a=r.next();!a.done;a=r.next()){a=b(Uy(a.value));for(var u=a.next();!u.done;u=a.next())u=u.value,n.has(u.keySystem)||n.set(u.keySystem,[]),n.get(u.keySystem).push(u)}if(n.size==1&&n.has(""))throw new se(2,6,6e3);for(e=b(e.h.preferredKeySystems),a=e.next(),r={};!a.done;r={Rg:void 0},a=e.next())for(r.Rg=a.value,a=b(t),u=a.next();!u.done;u=a.next())if(u=u.value.decodingInfos.find(function(S){return function(T){return T.supported&&T.keySystemAccess!=null&&T.keySystemAccess.keySystem==S.Rg}}(r)))return u.keySystemAccess;for(e=b([!0,!1]),r=e.next();!r.done;r=e.next())for(r=r.value,a=b(t),u=a.next();!u.done;u=a.next()){u=b(u.value.decodingInfos);for(var c=u.next();!c.done;c=u.next())if(c=c.value,c.supported&&c.keySystemAccess){var d=n.get(c.keySystemAccess.keySystem);d=b(d);for(var p=d.next();!p.done;p=d.next())if(!!p.value.licenseServerUri==r)return c.keySystemAccess}}return null}function Kb(e,t){var n,r,a,u,c,d,p,S,T,E,I,A,R,D,L,F;return z(function(U){switch(U.g){case 1:if(t.size==1&&t.has(""))throw new se(2,6,6e3);for(r=b(t.values()),a=r.next();!a.done;a=r.next())u=a.value,u.audioCapabilities.length==0&&delete u.audioCapabilities,u.videoCapabilities.length==0&&delete u.videoCapabilities;c=b(e.h.preferredKeySystems),d=c.next();case 2:if(d.done){U.u(4);break}if(p=d.value,!t.has(p)){U.u(3);break}return S=t.get(p),Z(U,6),k(U,navigator.requestMediaKeySystemAccess(p,[S]),8);case 8:return n=U.h,U.return(n);case 6:ne(U);case 7:Jt(e.j);case 3:d=c.next(),U.u(2);break;case 4:T=b([!0,!1]),E=T.next();case 9:if(E.done){U.u(11);break}I=E.value,A=b(t.keys()),R=A.next();case 12:if(R.done){E=T.next(),U.u(9);break}if(D=R.value,L=t.get(D),F=L.drmInfos.some(function(q){return!!q.licenseServerUri}),F!=I){U.u(13);break}return Z(U,15),k(U,navigator.requestMediaKeySystemAccess(D,[L]),17);case 17:return n=U.h,U.return(n);case 15:ne(U);case 16:Jt(e.j);case 13:R=A.next(),U.u(12);break;case 11:return U.return(n)}})}function qb(e){return e=wl(e.h.clearKeys),e.size==0?null:Pg(e)}function zd(e){Cl(e)&&e.l.resolve()}function Dy(e,t){new Mt(function(){t.loaded=!0,zd(e)}).Y(rE)}function Py(e,t,n){var r,a,u,c,d,p,S;return z(function(T){switch(T.g){case 1:try{r=e.s.createSession("persistent-license")}catch(E){return a=new se(2,6,6005,E.message),e.o(a),T.return(Promise.reject(a))}return e.B.D(r,"message",function(E){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(E):Vd(e,E)}),e.B.D(r,"keystatuseschange",function(E){return Oy(e,E)}),u={initData:n.initData,initDataType:n.initDataType,loaded:!1,zf:1/0,kb:null,type:"persistent-license"},e.i.set(r,u),Z(T,2),k(T,r.load(t),4);case 4:return c=T.h,Jt(e.j),c||(e.i.delete(r),d=e.h.persistentSessionOnlinePlayback?1:2,e.o(new se(d,6,6013)),u.loaded=!0),Dy(e,u),zd(e),T.return(r);case 2:p=ne(T),Jt(e.j,p),e.i.delete(r),S=e.h.persistentSessionOnlinePlayback?1:2,e.o(new se(S,6,6005,p.message)),u.loaded=!0,zd(e);case 3:return T.return(Promise.resolve())}})}function Yb(e,t,n,r){try{var a=e.s.createSession(r)}catch(u){e.o(new se(2,6,6005,u.message));return}e.B.D(a,"message",function(u){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(u):Vd(e,u)}),e.B.D(a,"keystatuseschange",function(u){return Oy(e,u)}),e.i.set(a,{initData:n,initDataType:t,loaded:!1,zf:1/0,kb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(u){t=u,u instanceof se||(t=new se(2,6,6016,u)),e.o(t);return}e.h.logLicenseExchange&&qr(n),a.generateRequest(t,n).catch(function(u){if(!e.j.g){e.i.delete(a);var c=u.errorCode;if(c&&c.systemCode){var d=c.systemCode;0>d&&(d+=Math.pow(2,32)),d="0x"+d.toString(16)}e.o(new se(2,6,6006,u.message,u,d))}})}function Vd(e,t){var n,r,a,u,c,d,p,S,T,E,I,A,R,D;z(function(L){switch(L.g){case 1:if(n=t.target,e.h.logLicenseExchange&&qr(t.message),r=e.i.get(n),a=e.g.licenseServerUri,u=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&u&&u.individualizationServer&&(a=u.individualizationServer),c=Qn([a],e.h.retryParameters),c.body=t.message,c.method="POST",c.licenseRequestType=t.messageType,c.sessionId=n.sessionId,c.drmInfo=e.g,r&&(c.initData=r.initData,c.initDataType=r.initDataType),u&&u.headers)for(d in u.headers)c.headers[d]=u.headers[d];if(yd(e.g.keySystem)){var F=Ki(c.body,!0,!0);if(F.includes("PlayReadyKeyMessage")){F=Gs(F,"PlayReadyKeyMessage");var U=wi(F,"HttpHeader");U=b(U);for(var q=U.next();!q.done;q=U.next()){var N=q.value;q=wi(N,"name")[0],N=wi(N,"value")[0],c.headers[Gn(q)]=Gn(N)}F=wi(F,"Challenge")[0],c.body=ri(Gn(F))}else c.headers["Content-Type"]="text/xml; charset=utf-8"}return p=Date.now(),Z(L,2),T=e.C.Lb.request(2,c),k(L,T.promise,4);case 4:S=L.h,K(L,3);break;case 2:return E=ne(L),e.j.g||(I=new se(2,6,6007,E),e.i.size==1?(e.o(I),r&&r.kb&&r.kb.reject(I)):(r&&r.kb&&r.kb.reject(I),e.i.delete(n),Cl(e)&&(e.l.resolve(),e.L.Y(.1)))),L.return();case 3:return e.j.g?L.return():(e.I+=(Date.now()-p)/1e3,e.h.logLicenseExchange&&qr(S.data),Z(L,5),k(L,n.update(S.data),7));case 7:K(L,6);break;case 5:return A=ne(L),R=new se(2,6,6008,A.message),e.o(R),r&&r.kb&&r.kb.reject(R),L.return();case 6:if(e.j.g)return L.return();D=new $e("drmsessionupdate"),e.C.onEvent(D),r&&(r.kb&&r.kb.resolve(),Dy(e,r)),V(L)}})}function Oy(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(u,c){if(typeof c=="string"){var d=c;c=u,u=d}if(yd(e.g.keySystem)&&c.byteLength==16&&(hl()||$i())){d=wt(c);var p=d.getUint32(0,!0),S=d.getUint16(4,!0),T=d.getUint16(6,!0);d.setUint32(0,p,!1),d.setUint16(4,S,!1),d.setUint16(6,T,!1)}u!="status-pending"&&(n.loaded=!0),u=="expired"&&(r=!0),c=Yi(c).slice(0,32),e.Z.set(c,u)});var a=t.expiration-Date.now();(0>a||r&&1e3>a)&&n&&!n.kb&&(e.i.delete(t),t.close().catch(function(){})),Cl(e)&&(e.l.resolve(),e.L.Y(sE))}function Qb(e){var t=e.Z,n=e.ea;n.clear(),t.forEach(function(r,a){return n.set(a,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new se(2,6,6014)),e.C.ee(Nd(n))}function Zb(){var e,t,n,r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me,le,ue;return z(function(de){if(de.g==1){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],n=["150","2000","3000"],r={"com.widevine.alpha":t,"com.microsoft.playready.recommendation":n},a=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],u=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],c={videoCapabilities:a,audioCapabilities:u,initDataTypes:["cenc","sinf","skd","keyids"]},d=[null,"cenc","cbcs","cbcs-1-9"],p=new Map,S=function(be,Ce){var ke,Oe,Ie,Fe,vt,Dt,Sn,$t;return z(function(kn){switch(kn.g){case 1:return Z(kn,2),k(kn,Ce.createMediaKeys(),4);case 4:K(kn,3);break;case 2:return ne(kn),kn.return();case 3:Oe=(ke=Ce.getConfiguration().sessionTypes)?ke.includes("persistent-license"):!1,dl()&&(Oe=!1),Ie=Ce.getConfiguration().videoCapabilities,Fe=Ce.getConfiguration().audioCapabilities,vt={persistentState:Oe,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},p.has(be)&&p.get(be)?vt=p.get(be):p.set(be,vt),(Dt=Ie[0].encryptionScheme)&&!vt.encryptionSchemes.includes(Dt)&&vt.encryptionSchemes.push(Dt),(Sn=Ie[0].robustness)&&!vt.videoRobustnessLevels.includes(Sn)&&vt.videoRobustnessLevels.push(Sn),($t=Fe[0].robustness)&&!vt.audioRobustnessLevels.includes($t)&&vt.audioRobustnessLevels.push($t),V(kn)}})},T=function(be,Ce,ke,Oe){var Ie,Fe,vt,Dt,Sn,$t,kn,Un,Cn,Kt;return z(function(Mn){switch(Mn.g){case 1:for(Z(Mn,2),Ie=zi(c),Fe=b(Ie.videoCapabilities),vt=Fe.next();!vt.done;vt=Fe.next())Dt=vt.value,Dt.encryptionScheme=Ce,Dt.robustness=ke;for(Sn=b(Ie.audioCapabilities),$t=Sn.next();!$t.done;$t=Sn.next())kn=$t.value,kn.encryptionScheme=Ce,kn.robustness=Oe;return Un=zi(Ie),Un.persistentState="required",Un.sessionTypes=["persistent-license"],Cn=[Un,Ie],k(Mn,navigator.requestMediaKeySystemAccess(be,Cn),4);case 4:return Kt=Mn.h,k(Mn,S(be,Kt),5);case 5:K(Mn,0);break;case 2:ne(Mn),V(Mn)}})},E=function(be,Ce,ke,Oe){var Ie,Fe,vt;return z(function(Dt){switch(Dt.g){case 1:return Z(Dt,2),Ie={type:"media-source",video:{contentType:a[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:u[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:be,video:{encryptionScheme:Ce,robustness:ke},audio:{encryptionScheme:Ce,robustness:Oe}}},k(Dt,navigator.mediaCapabilities.decodingInfo(Ie),4);case 4:return Fe=Dt.h,vt=Fe.keySystemAccess,k(Dt,S(be,vt),5);case 5:K(Dt,0);break;case 2:ne(Dt),V(Dt)}})},I=b(e),A=I.next();!A.done;A=I.next())R=A.value,p.set(R,null);for(D=[],L=b(d),F=L.next();!F.done;F=L.next())for(U=F.value,q=b(e),N=q.next();!N.done;N=q.next())G=N.value,G==="org.w3.clearkey"&&_s()||(D.push(T(G,U,"","")),D.push(E(G,U,"","")));for(Q=b(e),re=Q.next();!re.done;re=Q.next())for(ae=re.value,me=b(r[ae]||[]),le=me.next();!le.done;le=me.next())ue=le.value,D.push(T(ae,null,ue,"")),D.push(T(ae,null,"",ue)),D.push(E(ae,null,ue,"")),D.push(E(ae,null,"",ue));return k(de,Promise.all(D),2)}return de.return(Nd(p))})}function Jb(e){var t;return z(function(n){if(n.g==1)return t=new Promise(function(r,a){new Mt(a).Y(iE)}),Z(n,2),k(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return K(n,0);ne(n),V(n)})}function Ny(e){var t;return z(function(n){return t=Array.from(e.i.entries()),e.i.clear(),k(n,Promise.all(t.map(function(r){r=b(r);var a=r.next().value,u=r.next().value;return z(function(c){if(c.g==1)return Z(c,2),e.fa||e.A.has(a.sessionId)||u.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?k(c,Jb(a),5):k(c,a.remove(),5);if(c.g!=2)return K(c,0);ne(c),V(c)})})),0)})}function Uy(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function eE(e){e.i.forEach(function(t,n){var r=t.zf,a=n.expiration;isNaN(a)&&(a=1/0),a!=r&&(e.C.onExpirationUpdated(n.sessionId,a),t.zf=a)})}function Cl(e){return e=e.i.values(),Ub(e,function(t){return t.loaded})}function tE(e){for(var t=b(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.Z.get(n.value)!=="usable")return!1;return!0}function nE(e,t){var n=[];for(t.forEach(function(r,a){n.push({keySystem:a,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=b(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function By(e,t,n,r,a,u,c,d){var p=[];e=b(e);for(var S=e.next(),T={};!S.done;T={ra:void 0},S=e.next()){if(T.ra=S.value,t.includes(T.ra.encryptionScheme)||t.push(T.ra.encryptionScheme),T.ra.keySystem=="org.w3.clearkey"&&T.ra.licenseServerUri.startsWith("data:application/json;base64,")?p.includes(T.ra.licenseServerUri)||p.push(T.ra.licenseServerUri):n.includes(T.ra.licenseServerUri)||n.push(T.ra.licenseServerUri),a.includes(T.ra.serverCertificateUri)||a.push(T.ra.serverCertificateUri),T.ra.serverCertificate&&(r.some(function(A){return function(R){return Rn(R,A.ra.serverCertificate)}}(T))||r.push(T.ra.serverCertificate)),T.ra.initData){S=b(T.ra.initData);for(var E=S.next(),I={};!E.done;I={mf:void 0},E=S.next())I.mf=E.value,u.some(function(A){return function(R){var D=A.mf;return R.keyId&&R.keyId==D.keyId?!0:R.initDataType==D.initDataType&&Rn(R.initData,D.initData)}}(I))||u.push(I.mf)}if(T.ra.keyIds)for(S=b(T.ra.keyIds),E=S.next();!E.done;E=S.next())c.add(E.value);if(T.ra.keySystemUris&&d)for(T=b(T.ra.keySystemUris),S=T.next();!S.done;S=T.next())d.add(S.value)}if(p.length==1)n.push(p[0]);else if(0<p.length){for(t=[],p=b(p),r=p.next();!r.done;r=p.next())r=h.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,_(r.keys));p=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+h.btoa(p))}}function oE(e,t,n,r){var a=e.keySystem;a&&(a!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(a)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(a))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[a]&&(e.keySystem=r[a]),h.cast&&h.cast.__platform__&&a=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var iE=1,rE=5,sE=.5;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Hd(e,t,n){this.h=e,this.i=t,this.g=n}function jy(e,t){return z(function(n){if(n.g==1)return k(n,db(e.g,t,e.h.drm.preferredKeySystems),2);if(e.h.streaming.dontChooseCodecs||Vg(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(yl))throw new se(2,4,4032);return n.return(Fy(e,t))})}function Fy(e,t){var n=Hg(t.variants,e.h.restrictions,e.i);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var a=b(t.variants),u=a.next();!u.done;u=a.next())u=u.value,Gd(e,r.keySystem,u.video),Gd(e,r.keySystem,u.audio);$y(e,t)}return n}function Gd(e,t,n){if(n){n=b(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=b(r.initData||[]);for(var a=r.next();!a.done;a=r.next())a=a.value,Sl(e.g,a.initDataType,a.initData)}}}function $y(e,t){e=e.g?e.g.Ld():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,a=!1,u=new Set,c=new Set;t=b(t.variants);for(var d=t.next();!d.done;d=t.next()){d=d.value;var p=[];d.audio&&p.push(d.audio),d.video&&p.push(d.video),p=b(p);for(var S=p.next();!S.done;S=p.next())if(S=S.value,S.keyIds.size){S=b(S.keyIds);for(var T=S.next();!T.done;T=S.next()){T=T.value;var E=e[n?"00":T];E?zy.includes(E)&&c.add(E):u.add(T)}}d.allowedByApplication?d.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw e={hasAppRestrictions:a,missingKeys:Array.from(u),restrictedKeyStatuses:Array.from(c)},new se(2,4,4012,e)}var zy=["output-restricted","internal-error"];function Tl(){}function Vy(e,t){if(t){var n=Ci[t.toLowerCase()];if(n)return n}throw new se(2,4,4e3,e,t)}we("shaka.media.ManifestParser",Tl),Tl.unregisterParserByMime=function(e){delete Ci[e]},Tl.registerParserByMime=function(e,t){Ci[e]=t},Tl.registerParserByExtension=function(){Ot("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Tl.AccessibilityPurpose={ak:"visually impaired",vj:"hard of hearing"};var Ci={};function aE(e,t){function n(){u=!0}function r(T){d.push(T),Rt(T)}var a=e=Ae(e),u=!1,c,d=[],p=[];if(new tn().box("moov",r).box("trak",r).box("mdia",r).box("minf",r).box("stbl",r).S("stsd",function(T){c=T,d.push(T),Ar(T)}).S("encv",n).S("enca",n).S("dvav",function(T){p.push({box:T,Oa:1701733238})}).S("dva1",function(T){p.push({box:T,Oa:1701733238})}).S("dvh1",function(T){p.push({box:T,Oa:1701733238})}).S("dvhe",function(T){p.push({box:T,Oa:1701733238})}).S("dvc1",function(T){p.push({box:T,Oa:1701733238})}).S("dvi1",function(T){p.push({box:T,Oa:1701733238})}).S("hev1",function(T){p.push({box:T,Oa:1701733238})}).S("hvc1",function(T){p.push({box:T,Oa:1701733238})}).S("avc1",function(T){p.push({box:T,Oa:1701733238})}).S("avc3",function(T){p.push({box:T,Oa:1701733238})}).S("ac-3",function(T){p.push({box:T,Oa:1701733217})}).S("ec-3",function(T){p.push({box:T,Oa:1701733217})}).S("ac-4",function(T){p.push({box:T,Oa:1701733217})}).S("mp4a",function(T){p.push({box:T,Oa:1701733217})}).parse(e),u)return e;if(p.length==0||!c)throw Yi(e),new se(2,3,3019,t);p.reverse(),t=b(p);for(var S=t.next();!S.done;S=t.next())S=S.value,a=lE(a,c,S.box,d,S.Oa);return hl()&&wd()?(t=new Uint8Array(e.byteLength+a.byteLength),t.set(a),t.set(e,a.byteLength),t):a}function lE(e,t,n,r,a){var u=uE.value(),c=e.subarray(n.start,n.start+n.size),d=wt(c),p=new Uint8Array(n.size+u.byteLength);for(p.set(c,0),c=wt(p),c.setUint32(4,a),p.set(u,n.size),a=d.getUint32(4),c.setUint32(n.size+16,a),Hy(p,0,p.byteLength),a=new Uint8Array(e.byteLength+p.byteLength),n=Bi()||hl()?n.start:n.start+n.size,u=e.subarray(n),a.set(e.subarray(0,n)),a.set(p,n),a.set(u,n+p.byteLength),e=b(r),r=e.next();!r.done;r=e.next())r=r.value,Hy(a,r.start,r.size+p.byteLength);return p=wt(a,t.start),t=Hs(t),e=p.getUint32(t),p.setUint32(t,e+1),a}function Hy(e,t,n){e=wt(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var uE=new Is(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Do(e,t,n,r,a,u,c){this.M=e,this.Ha=t,this.sa=n,this.Hc=r===void 0?null:r,this.timescale=a===void 0?null:a,this.g=u===void 0?null:u,this.aesKey=c===void 0?null:c,this.mimeType=this.codecs=null}Do.prototype.Xb=function(){return this.Ha},Do.prototype.Ub=function(){return this.sa},Do.prototype.cd=function(){return this.g};function Wd(e,t){return e===t?!0:e&&t?e.Xb()==t.Xb()&&e.Ub()==t.Ub()&&un(e.M().sort(),t.M().sort())&&Rn(e.cd(),t.cd()):e==t}we("shaka.media.InitSegmentReference",Do),Do.prototype.getEndByte=Do.prototype.Ub,Do.prototype.getStartByte=Do.prototype.Xb;function ft(e,t,n,r,a,u,c,d,p,S,T,E,I,A,R,D){for(S=S===void 0?[]:S,A=A===void 0?Mr:A,this.startTime=e,this.j=this.endTime=t,this.F=n,this.Ha=r,this.sa=a,this.$=u,this.timestampOffset=c,this.appendWindowStart=d,this.appendWindowEnd=p,this.g=S,this.tilesLayout=T===void 0?"":T,this.B=E===void 0?null:E,this.h=I===void 0?null:I,this.status=A,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=R===void 0?null:R,this.A=null,this.i=0,this.o=D===void 0?!1:D,this.G=this.s=!1,e=b(this.g),t=e.next();!t.done;t=e.next())t.value.Kg();this.o&&this.g.length&&this.g[this.g.length-1].Jg(),this.C=this.mimeType=this.codecs=null}w=ft.prototype,w.M=function(){return this.F()},w.getStartTime=function(){return this.startTime},w.Mh=function(){return this.endTime},w.Xb=function(){return this.Ha},w.Ub=function(){return this.sa},w.di=function(){return this.tilesLayout},w.ci=function(){return this.B},w.Yb=function(){return this.status},w.xi=function(){this.status=Wy},w.wf=function(){this.preload=!0},w.ri=function(){return this.preload},w.Xd=function(){this.l=!1},w.ni=function(){return this.l},w.Kg=function(){this.s=!0},w.pi=function(){return this.s},w.Jg=function(){this.G=!0},w.oi=function(){return this.G},w.Ig=function(){this.m=!0},w.ji=function(){return this.m},w.fh=function(e){this.A=e},w.bi=function(){return this.A},w.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=b(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},w.Vf=function(e){this.h==null?It("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},w.Zi=function(e){this.C=e},w.cd=function(){return this.C};function Gy(e,t){e.$=t,e=b(e.g);for(var n=e.next();!n.done;n=e.next())Gy(n.value,t)}we("shaka.media.SegmentReference",ft),ft.prototype.getSegmentData=ft.prototype.cd,ft.prototype.setSegmentData=ft.prototype.Zi,ft.prototype.syncAgainst=ft.prototype.Vf,ft.prototype.offset=ft.prototype.offset,ft.prototype.getThumbnailSprite=ft.prototype.bi,ft.prototype.setThumbnailSprite=ft.prototype.fh,ft.prototype.hasByterangeOptimization=ft.prototype.ji,ft.prototype.markAsByterangeOptimization=ft.prototype.Ig,ft.prototype.isLastPartial=ft.prototype.oi,ft.prototype.markAsLastPartial=ft.prototype.Jg,ft.prototype.isPartial=ft.prototype.pi,ft.prototype.markAsPartial=ft.prototype.Kg,ft.prototype.isIndependent=ft.prototype.ni,ft.prototype.markAsNonIndependent=ft.prototype.Xd,ft.prototype.isPreload=ft.prototype.ri,ft.prototype.markAsPreload=ft.prototype.wf,ft.prototype.markAsUnavailable=ft.prototype.xi,ft.prototype.getStatus=ft.prototype.Yb,ft.prototype.getTileDuration=ft.prototype.ci,ft.prototype.getTilesLayout=ft.prototype.di,ft.prototype.getEndByte=ft.prototype.Ub,ft.prototype.getStartByte=ft.prototype.Xb,ft.prototype.getEndTime=ft.prototype.Mh,ft.prototype.getStartTime=ft.prototype.getStartTime,ft.prototype.getUris=ft.prototype.M;var Mr=0,Wy=1;ft.Status={hj:Mr,Zj:Wy,Bj:2};function bl(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function Xd(e){return!e||bl(e)?null:e.length?e.end(e.length-1):null}function Kd(e,t){return!e||!e.length||bl(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function Xy(e,t){if(!e||!e.length||bl(e))return 0;var n=0;e=b(_r(e));for(var r=e.next();!r.done;r=e.next()){var a=r.value;r=a.start,a=a.end,a>t&&(n+=a-Math.max(r,t))}return n}function fE(e,t,n){return!e||!e.length||bl(e)?null:(e=_r(e).findIndex(function(r,a,u){return r.start>t&&(a==0||u[a-1].end-t<=n)}),0<=e?e:null)}function _r(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function qd(){}function Ky(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function qy(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Yd(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function cE(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=fn(Ae(e.data,1,n)),a=e.data[2+n],u=e.data.subarray(3+n).indexOf(0);if(u===-1)return null;var c=fn(Ae(e.data,3+n,u)),d;return r==="-->"?d=fn(Ae(e.data,4+n+u)):d=ie(e.data.subarray(4+n+u)),t.mimeType=r,t.pictureType=a,t.description=c,t.data=d,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=fn(Ae(e.data,1,r)),e=fn(Ae(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=fn(Ae(e.data,1,r)),e=fn(Ae(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=fn(Ae(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=ie(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=fn(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=fn(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=ie(e.data),t):null}function os(e){for(var t=0,n=[];Ky(e,t);){var r=Yd(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var a=e.subarray(t),u=Yd(a,4);a={type:String.fromCharCode(a[0],a[1],a[2],a[3]),size:u,data:a.subarray(10,10+u)},(u=cE(a))&&n.push(u),t+=a.size+10}qy(e,t)&&(t+=10)}return n}function Ws(e,t){for(var n=t=t===void 0?0:t,r=0;Ky(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=Yd(e,t+6),qy(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}we("shaka.util.Id3Utils",qd),qd.getID3Data=Ws,qd.getID3Frames=os;function Yy(e,t){var n=null,r=null,a=null,u=e.P();return t&1&&(a=e.Nc()),t&2&&e.skip(4),t&8&&(n=e.P()),t&16&&(r=e.P()),{trackId:u,Yc:n,Id:r,ck:a}}function Af(e,t){return t==1?(t=e.P(),e=e.P(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.P()}}function If(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.P(),e.skip(4),e=e.la(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Qy(e,t,n){var r=e.P(),a=[],u=null;n&1&&(u=e.P()),n&4&&e.skip(4);for(var c=0;c<r;c++){var d={Jf:null,sampleSize:null,ne:null};n&256&&(d.Jf=e.P()),n&512&&(d.sampleSize=e.P()),n&1024&&e.skip(4),n&2048&&(d.ne=t==0?e.P():e.Sg()),a.push(d)}return{gk:r,Wg:a,Fh:u}}function Zy(e){e.skip(6),e.skip(2),e.skip(8);var t=e.la();return e.skip(2),e.skip(2),e.skip(2),e=e.la()+e.la()/65536,{channelCount:t,sampleRate:e}}function Jy(e){return e=e.P(),{codec:xf(e)}}function hE(e){var t=null,n=null,r=e.qb(4),a=String.fromCharCode(r[0]);if(a+=String.fromCharCode(r[1]),a+=String.fromCharCode(r[2]),a+=String.fromCharCode(r[3]),a==="nclx"){switch(e.la()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.la(),e.la(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,xd:n}}function El(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Po(e){return(10>e?"0":"")+e}function or(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=Ae(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Qd(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new en(n,0).P(),e.g=8*r,e.i-=r)}function Oo(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Qd(e)}e.h<<=t,e.g-=t}function _t(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Qd(e),n=t-n,0<n?r<<n|_t(e,n):r}function Zd(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Qd(e),t+Zd(e)}function ko(e){Oo(e,1+Zd(e))}function He(e){var t=Zd(e);return _t(e,t+1)-1}function Xs(e){return e=He(e),1&e?1+e>>>1:-1*(e>>>1)}function ot(e){return _t(e,1)===1}function Ht(e){return _t(e,8)}function Mf(e,t){for(var n=8,r=8,a=0;a<t;a++)r!==0&&(r=Xs(e),r=(n+r+256)%256),n=r===0?n:r}function dE(e){return Ht(e),He(e),He(e)}we("shaka.util.ExpGolomb",or);function rn(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}w=rn.prototype,w.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},w.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,ep(e)),n=e.length-(e.length+t)%188,r=!1,a=t;a<n;a+=188)if(e[a]==71){var u=!!(e[a+1]&64),c=((e[a+1]&31)<<8)+e[a+2];if(1<(e[a+3]&48)>>4){var d=a+5+e[a+4];if(d==a+188)continue}else d=a+4;switch(c){case 0:u&&(d+=e[d]+1),this.G=(e[d+10]&31)<<8|e[d+11];break;case 17:case 8191:break;case this.G:u&&(d+=e[d]+1),u=e,c={audio:-1,video:-1,Rd:-1,audioCodec:"",videoCodec:""};var p=d+3+((u[d+1]&15)<<8|u[d+2])-4;for(d+=12+((u[d+10]&15)<<8|u[d+11]);d<p;){var S=(u[d+1]&31)<<8|u[d+2],T=(u[d+3]&15)<<8|u[d+4];switch(u[d]){case 6:if(0<T)for(var E=d+5,I=T;2<I;){var A=u[E+1]+2;switch(u[E]){case 5:var R=Td(u.subarray(E+2,E+A));c.audio==-1&&R==="Opus"?(c.audio=S,c.audioCodec="opus"):c.video==-1&&R==="AV01"&&(c.video=S,c.videoCodec="av1");break;case 106:c.audio==-1&&(c.audio=S,c.audioCodec="ac3");break;case 122:c.audio==-1&&(c.audio=S,c.audioCodec="ec3");break;case 124:c.audio==-1&&(c.audio=S,c.audioCodec="aac");break;case 127:c.audioCodec=="opus"&&(R=null,u[E+2]===128&&(R=u[E+3]),R!=null&&(this.F={channelCount:R&15?R&15:2,Ch:R,sampleRate:48e3}))}E+=A,I-=A}break;case 15:c.audio==-1&&(c.audio=S,c.audioCodec="aac");break;case 17:c.audio==-1&&(c.audio=S,c.audioCodec="aac-loas");break;case 21:c.Rd==-1&&(c.Rd=S);break;case 27:c.video==-1&&(c.video=S,c.videoCodec="avc");break;case 3:case 4:c.audio==-1&&(c.audio=S,c.audioCodec="mp3");break;case 36:c.video==-1&&(c.video=S,c.videoCodec="hvc");break;case 129:c.audio==-1&&(c.audio=S,c.audioCodec="ac3");break;case 132:case 135:c.audio==-1&&(c.audio=S,c.audioCodec="ec3")}d+=T+5}u=c,u.video!=-1&&(this.I=u.video,this.m=u.videoCodec),u.audio!=-1&&(this.B=u.audio,this.A=u.audioCodec),u.Rd!=-1&&(this.C=u.Rd),r&&!this.H&&(r=!1,a=t-188),this.H=!0;break;case this.I:d=e.subarray(d,a+188),u?this.j.push([d]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(d);break;case this.B:d=e.subarray(d,a+188),u?this.i.push([d]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(d);break;case this.C:d=e.subarray(d,a+188),u?this.l.push([d]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(d);break;default:r=!0}}return this};function Jd(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var a=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=a),n.pts=e1(a,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=e1(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}w.Ci=function(e){return Ot("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Cf(e)},w.Cf=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var a=e.byteLength,u=1;this.m=="hvc"&&(u=2);for(var c=n||0,d=[],p=-1,S=0,T,E=0;E<a;++E){var I=e[E];if(I){if(2<=c&&I==1){if(t&&!d.length&&p==-1&&(I=E-(3<c?3:c),n&&I!=0&&(I=e.subarray(0,I),t.data=An(t.data,I),t.fullData=An(t.fullData,I))),0<=p?(c=E-((3<c?3:c)+1),d.push({data:e.subarray(p+u,c+1),fullData:e.subarray(p,c+1),type:S,time:r})):t&&!d.length&&(p=E-c,0<p&&(p=e.subarray(0,p),t.data=An(t.data,p),t.fullData=An(t.fullData,p))),E>=a-u)return d;E++,p=E,S=this.m=="hvc"?e[E]>>1&63:e[E]&31}c=0}else c++;E>=a-1&&0<=p&&0<=c&&(T={data:e.subarray(p+u,a),fullData:e.subarray(p,a),type:S,time:r})}return T&&d.push(T),!d.length&&t&&(t.data=An(t.data,e),t.fullData=An(t.fullData,e)),d},w.getMetadata=function(){for(var e=[],t=b(this.l),n=t.next();!n.done;n=t.next())n=An.apply(yo,_(n.value)),(n=Jd(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:os(n.data),dts:n.dts,pts:n.pts});return e},w.Tb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=b(this.i),n=t.next();!n.done;n=t.next()){var r=An.apply(yo,_(n.value)),a=Jd(this,r);n=this.h.length?this.h[this.h.length-1]:null,a&&a.pts!=null&&a.dts!=null&&(!n||n.pts!=a.pts&&n.dts!=a.dts)?(this.h.length&&a.dts<(n.dts||0)&&(e=!0),this.h.push(a)):this.h.length&&(r=a?a.data:r)&&(n=this.h.pop(),n.data=An(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(u,c){var d=(u.pts||0)-(c.pts||0);return(u.dts||0)-(c.dts||0)||d}))}return this.h},w.Fc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=b(this.j),r=n.next();!r.done;r=n.next()){var a=An.apply(yo,_(r.value)),u=Jd(this,a);r=this.g.length?this.g[this.g.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!r||r.pts!=u.pts&&r.dts!=u.dts)?(this.g.length&&u.dts<(r.dts||0)&&(t=!0),this.g.push(u)):this.g.length&&(a=u?u.data:a)&&(r=this.g.pop(),r.data=An(r.data,a),this.g.push(r))}if(e){for(n=[],r=b(this.g),a=r.next();!a.done;a=r.next())if(a=a.value,a.nalus=this.Cf(a,c,void 0),a.nalus.length){n.push(a);var c=a.nalus[a.nalus.length-1]}this.g=n}t&&(this.g=this.g.sort(function(d,p){var S=(d.pts||0)-(p.pts||0);return(d.dts||0)-(p.dts||0)||S}))}return e?this.g:(e=this.g,this.g=[],e)},w.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Tb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.Fc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},w.$c=function(){return{audio:this.A,video:this.m}},w.Pd=function(){for(var e=[],t=b(this.Fc()),n=t.next();!n.done;n=t.next())e.push.apply(e,_(n.value.nalus));return e},w.gi=function(){Ot("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.kf();return{height:e.height,width:e.width}},w.kf=function(){return this.m=="hvc"?mE(this):pE(this)};function pE(e){var t={height:null,width:null,codec:null};if(e=e.Pd(),!e.length||(e=e.find(function(I){return I.type==7}),!e))return t;e=new or(e.data);var n=Ht(e),r=Ht(e),a=Ht(e);if(ko(e),gE.includes(n)){var u=He(e);if(u===3&&Oo(e,1),ko(e),ko(e),Oo(e,1),ot(e)){u=u!==3?8:12;for(var c=0;c<u;c++)ot(e)&&(6>c?Mf(e,16):Mf(e,64))}}if(ko(e),u=He(e),u===0)He(e);else if(u===1)for(Oo(e,1),ko(e),ko(e),u=He(e),c=0;c<u;c++)ko(e);ko(e),Oo(e,1),u=He(e),c=He(e);var d=_t(e,1);d===0&&Oo(e,1),Oo(e,1);var p=0,S=0,T=0,E=0;return ot(e)&&(p=He(e),S=He(e),T=He(e),E=He(e)),t.height=String((2-d)*(c+1)*16-2*T-2*E),t.width=String(16*(u+1)-2*p-2*S),t.codec="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+a.toString(16).toUpperCase()).slice(-2),t}function mE(e){var t={height:null,width:null,codec:null};if(e=e.Pd(),!e.length||(e=e.find(function(N){return N.type==33}),!e))return t;var n=new or(e.fullData,!0);Ht(n),Ht(n),_t(n,4);var r=_t(n,3);ot(n);var a=_t(n,2),u=_t(n,1),c=_t(n,5),d=_t(n,32);e=Ht(n);for(var p=Ht(n),S=Ht(n),T=Ht(n),E=Ht(n),I=Ht(n),A=Ht(n),R=[],D=[],L=0;L<r;L++)R.push(ot(n)),D.push(ot(n));if(0<r)for(L=r;8>L;L++)_t(n,2);for(L=0;L<r;L++)R[L]&&_t(n,88),D[L]&&Ht(n);He(n),r=He(n),r==3&&_t(n,1),R=He(n),D=He(n);var F=L=0,U=0,q=0;return ot(n)&&(L+=He(n),F+=He(n),U+=He(n),q+=He(n)),t.width=String(R-(L+F)*(r===1||r===2?2:1)),t.height=String(D-(U+q)*(r===1?2:1)),n=function(N){for(var G=0,Q=0;32>Q;Q++)G|=(N>>Q&1)<<31-Q;return G>>>0}(d),u=u==1?"H":"L",a="hvc1"+("."+["","A","B","C"][a]+c),a+="."+n.toString(16).toUpperCase(),a+="."+u+A,I&&(a+="."+I.toString(16).toUpperCase()),E&&(a+="."+E.toString(16).toUpperCase()),T&&(a+="."+T.toString(16).toUpperCase()),S&&(a+="."+S.toString(16).toUpperCase()),p&&(a+="."+p.toString(16).toUpperCase()),e&&(a+="."+e.toString(16).toUpperCase()),t.codec=a,t}function e1(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function kl(e){return!(0>ep(e))}function ep(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}we("shaka.util.TsParser",rn),rn.syncOffset=ep,rn.probe=kl,rn.prototype.getVideoInfo=rn.prototype.kf,rn.prototype.getVideoResolution=rn.prototype.gi,rn.prototype.getVideoNalus=rn.prototype.Pd,rn.prototype.getCodecs=rn.prototype.$c,rn.prototype.getStartTime=rn.prototype.getStartTime,rn.prototype.getVideoData=rn.prototype.Fc,rn.prototype.getAudioData=rn.prototype.Tb,rn.prototype.getMetadata=rn.prototype.getMetadata,rn.prototype.parseNalus=rn.prototype.Cf,rn.prototype.parseAvcNalus=rn.prototype.Ci,rn.prototype.parse=rn.prototype.parse,rn.prototype.clearData=rn.prototype.clearData,rn.Timescale=9e4;var gE=[100,110,122,244,44,83,86,118,128,138,139,134];function Al(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&je("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Ot("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{je("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(je("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||je(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function t1(e){e.g&&e.i.classList.add("shaka-hidden")}Al.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function n1(e,t,n){var r=0,a=-1;switch(t.mimeType){case"video/webm":r=1;break;case"video/mp4":r=2}switch(n){case"DASH":a=1;break;case"HLS":a=0}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(a))}we("shaka.lcevc.Dec",Al),Al.prototype.release=Al.prototype.release;function o1(e,t,n,r){var a=this;this.i=e,this.da=n,this.A=null,this.F=t,this.h={},this.G={},this.Da={},this.g=null,this.fa=!1,this.Z=r||null,this.l={},this.s=new Ct,this.j={},this.H=null,this.L=new Zt,this.N="",this.qa=!1,this.m=i1(this,this.L),this.C=!1,this.I=new zs(function(){return vE(a)}),this.B=!1,this.ba="UNKNOWN",this.Ea=this.Fa=!1,this.za=new Zt,this.o=!1,this.xa=!0,this.pa=this.R=this.ya=this.U=this.K=this.ea=null,this.oa=new Zt}function i1(e,t){if(h.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.s.D(n,"startstreaming",function(){e.xa=!0}),e.s.D(n,"endstreaming",function(){e.xa=!1}),e.s.ha(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.s.ha(e.i,"playing",function(){e.qa=!0}),e.N=Pf(n),e.i.src=e.N,n}return n=new MediaSource,e.s.ha(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.s.ha(e.i,"playing",function(){e.qa=!0}),e.N=Pf(n),e.i.src=e.N,n}function yE(e,t){var n,r,a,u,c,d,p,S,T,E,I;return z(function(A){if(A.g==1)return e.createSegmentIndex?k(A,e.createSegmentIndex(),2):A.u(2);if(!e.segmentIndex)return A.return(!1);if(e.segmentIndex.getNumReferences()==0)return A.return(!0);for(n=zn,r=new Set,a=b(e.segmentIndex),u=a.next();!u.done;u=a.next())if(c=u.value,d=c.mimeType||e.mimeType||"",p=c.codecs||e.codecs||"",S=d+":"+p,!r.has(S)){if(r.add(S),t==n.ua){if(T=Vn(d,p),!pl(T))return A.return(!1)}else if(t==n.ga?p=gl(p):t==n.X&&(p=Ns(p,d)),E=rb(e,d,p),I=Zr(d,p),!ct(E)&&!At(I))return A.return(!1)}return A.return(!0)})}w=o1.prototype,w.destroy=function(){return this.I.destroy()};function vE(e){var t,n,r,a,u,c,d,p;return z(function(S){if(S.g==1){t=[];for(n in e.l)for(r=e.l[n],a=r[0],e.l[n]=r.slice(0,1),a&&t.push(a.p.catch(Fg)),u=b(r.slice(1)),c=u.next();!c.done;c=u.next())d=c.value,d.p.reject(new se(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(p in e.j)t.push(e.j[p].destroy());return k(S,Promise.all(t),2)}e.s&&(e.s.release(),e.s=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.m=null,e.g=null,e.F=null,e.h={},e.j={},e.H=null,e.l={},e.Z=null,e.K=null,e.da=null,V(S)})}w.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var a=this,u,c,d,p,S;return z(function(T){switch(T.g){case 1:return u=zn,k(T,a.L,2);case 2:a.B=t,a.ba=n,a.Fa=r,a.Ea=!a.B&&a.ba=="HLS"&&!a.Fa,a.K=null,c=b(e.keys()),d=c.next();case 3:if(d.done){T.u(0);break}return p=d.value,S=e.get(p),k(T,_f(a,p,S,S.codecs),6);case 6:a.o?(a.l[u.X]=[],a.l[u.ga]=[]):a.l[p]=[],d=c.next(),T.u(3)}})};function _f(e,t,n,r){var a,u,c,d,p,S,T,E,I,A,R,D;return z(function(L){switch(L.g){case 1:return a=zn,u=tt,c=et,k(L,yE(n,t),2);case 2:if(c.call(u,L.h,"Type negotiation should happen before MediaSourceEngine.init!"),d=Vn(n.mimeType,r),t==a.ua){Rf(e,d,e.B,n.external),L.u(0);break}if(p=e.A.forceTransmux,(!ct(d)||!e.B&&kr.includes(d))&&(p=!0),S=Zr(n.mimeType,r),!p){L.u(4);break}if(T=Ro(a.X,(r||"").split(",")),E=Ro(a.ga,(r||"").split(",")),!T||!E){L.u(5);break}return e.o=!0,k(L,_f(e,a.X,n,T),6);case 6:return k(L,_f(e,a.ga,n,E),7);case 7:return L.return();case 5:(I=At(S))&&(A=I(),e.j[t]=A,d=A.convertCodecs(t,S));case 4:R=d+e.A.addExtraFeaturesToSourceBuffer(d),Jt(e.I);try{D=e.m.addSourceBuffer(R)}catch(F){throw new se(2,3,3015,F,"The mediaSource_ status was "+e.m.readyState+" expected 'open'",null)}e.B&&(D.mode=_E),e.s.D(D,"error",function(){var F=e.l[t][0];F.p.reject(new se(2,3,3014,e.i.error?e.i.error.code:0,F.uri))}),e.s.D(D,"updateend",function(){return ir(e,t)}),e.h[t]=D,e.G[t]=d,e.Da[t]=!!n.drmInfos.length,V(L)}})}w.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function Rf(e,t,n,r){e.g||(e.g=new Qi(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var a=e.g;r=r||e.fa,e=e.ba,t=="application/cea-608"||t=="application/cea-708"?a.i=null:(a.i=(0,Hn[t])(),a.i.setSequenceMode?a.i.setSequenceMode(n):Ot("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),a.i.setManifestType?a.i.setManifestType(e):Ot("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),a.B=r)}function r1(e){return e.C?!1:e.m?e.m.readyState=="ended":!0}function tp(e,t){return e.C||!Object.keys(e.h).length?e=null:t==Ut?e=e.g.g:(e=Ks(e,t),e=!e||bl(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Il(e,t){return e.C?null:t==Ut?e.g.h:Xd(Ks(e,t))}function xE(e,t,n){return e.C?0:t==Ut?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Ks(e,t),Xy(e,n))}w.wb=function(){var e={total:this.C?[]:_r(this.i.buffered),audio:this.C?[]:_r(Ks(this,"audio")),video:this.C?[]:_r(Ks(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Ks(e,t){try{return e.h[t].buffered}catch{return null}}function wE(e,t,n,r,a,u){var c=null,d=Ae(n);if(kr.includes(a))u=os(d),u.length&&r&&((t=u.find(function(E){return E.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(c=Math.round(t.data)/1e3),e.da.onMetadata([{cueTime:r.startTime,data:d,frames:u,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(a.includes("/mp4")&&r&&r.timestampOffset==0&&r.$&&r.$.timescale){var p=r.$.timescale;if(!isNaN(p)){var S=0,T=!1;new tn().box("moof",Rt).box("traf",Rt).S("tfdt",function(E){S=Af(E.reader,E.version).baseMediaDecodeTime/p,T=!0,E.parser.stop()}).parse(n,!0),T&&(c=S)}}else!a.includes("/mp4")&&!a.includes("/webm")&&kl(d)&&(e.K?e.K.clearData():e.K=new rn,d=e.K.parse(d),t=d.getStartTime(t),t!=null&&(c=t),d=d.getMetadata(),d.length)&&e.da.onMetadata(d,u,r?r.endTime:null);return c}function Lf(e,t,n,r,a,u,c,d,p,S){c=c===void 0?!1:c,d=d===void 0?!1:d,p=p===void 0?!1:p,S=S===void 0?!1:S;var T,E,I,A,R,D,L,F,U,q,N,G,Q,re;return z(function(ae){switch(ae.g){case 1:if(T=zn,t!=T.ua){ae.u(2);break}if(!e.B){ae.u(3);break}return k(ae,e.za,4);case 4:E=ae.h,e.g.s=E;case 3:return k(ae,ab(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.M()[0]:null),5);case 5:return ae.return();case 2:if(S||!e.o){ae.u(6);break}return k(ae,Lf(e,T.X,n,r,a,u,c,d,p,!0),7);case 7:return k(ae,Lf(e,T.ga,n,r,a,u,c,d,p,!0),8);case 8:return ae.return();case 6:if(!e.h[t])return ae.return();if(I=e.h[t].timestampOffset,A=e.G[t],e.j[t]&&(A=e.j[t].getOriginalMimeType()),r&&(R=wE(e,t,n,r,A,I),R!=null&&(e.U==null&&t==T.ga&&(e.U=R,e.ya=r.startTime,e.R!=null&&(D=0,e.ya==e.pa&&(D=e.U-e.R),e.oa.resolve(D))),e.R==null&&t==T.X&&(e.R=R,e.pa=r.startTime,e.U!=null&&(L=0,e.ya==e.pa&&(L=e.U-e.R),e.oa.resolve(L))),F=r.startTime-R,U=Math.abs(I-F),(.001<=U||c||d)&&(!p||0<F||!I)&&(I=F,e.Ea&&(Zn(e,t,function(){return qs(e,t)},null),Zn(e,t,function(){return Ys(e,t,I)},null))),q=t==T.ga||!(T.ga in e.h),e.B&&q&&e.za.resolve(I))),u&&t==T.ga&&(e.g||Rf(e,"application/cea-608",e.B,!1),e.H||(N=A.split(";",1)[0],e.H=new _e(N)),r?(G=e.H.i(n),G.length&&ub(e.g,G,r.startTime,r.endTime,I)):e.H.init(n,d)),!e.j[t]){ae.u(9);break}return k(ae,e.j[t].transmux(n,a,r,e.m.duration,t),10);case 10:n=ae.h;case 9:if(n=EE(e,n,r?r.startTime:null,t,r?r.M()[0]:null),!r||!e.B||t==T.ua){ae.u(11);break}if(!c&&!d){ae.u(11);break}if(Q=r.startTime,e.ba!="HLS"||e.o||t!=T.X||!e.h[T.ga]){ae.u(13);break}return k(ae,e.oa,14);case 14:re=ae.h,.1<Math.abs(re)&&(Q-=re);case 13:Zn(e,t,function(){return qs(e,t)},null),Zn(e,t,function(){return Ys(e,t,Q)},null);case 11:return k(ae,Zn(e,t,function(){var me=n;if(t=="video"&&e.Z){var le=e.Z;le.g&&le.g.appendBuffer(me,"video",le.o,-I)}e.h[t].appendBuffer(me)},r?r.M()[0]:null),15);case 15:V(ae)}})}function SE(e,t){var n=Il(e,"video")||0;Bg(e.g,t,n)}function CE(e){e.g&&Bg(e.g,"",0)}w.remove=function(e,t,n){var r=this,a;return z(function(u){return u.g==1?(a=zn,e==a.ua?k(u,r.g.remove(t,n),0):k(u,Zn(r,e,function(){return Df(r,e,t,n)},null),4)):r.o?k(u,Zn(r,a.X,function(){return Df(r,a.X,t,n)},null),0):u.u(0)})};function s1(e,t){var n;return z(function(r){return r.g==1?(n=zn,t==n.ua?e.g?k(r,e.g.remove(0,1/0),0):r.return():k(r,Zn(e,t,function(){return Df(e,t,0,e.m.duration)},null),4)):e.o?k(r,Zn(e,n.X,function(){return Df(e,n.X,0,e.m.duration)},null),0):r.u(0)})}w.flush=function(e){var t=this,n;return z(function(r){return r.g==1?(n=zn,e==n.ua?r.return():k(r,Zn(t,e,function(){t.i.currentTime-=.001,ir(t,e)},null),2)):t.o?k(r,Zn(t,n.X,function(){var a=n.X;t.i.currentTime-=.001,ir(t,a)},null),0):r.u(0)})};function TE(e,t,n,r,a,u,c,d,p){var S,T,E;return z(function(I){return I.g==1?(S=zn,t==S.ua?(u||(e.g.s=n),lb(e.g,r,a),I.return()):(T=[],k(I,IE(e,t,c,d,p),2))):(E=I.h,E||(T.push(Zn(e,t,function(){return qs(e,t)},null)),e.o&&T.push(Zn(e,S.X,function(){return qs(e,S.X)},null))),u||(T.push(Zn(e,t,function(){return Ys(e,t,n)},null)),e.o&&T.push(Zn(e,S.X,function(){return Ys(e,S.X,n)},null))),T.push(Zn(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=a,e.h[t].appendWindowStart=r,ir(e,t)},null)),e.o&&T.push(Zn(e,S.X,function(){var A=S.X;e.h[A].appendWindowStart=0,e.h[A].appendWindowEnd=a,e.h[A].appendWindowStart=r,ir(e,A)},null)),k(I,Promise.all(T),0))})}function bE(e,t,n){var r;return z(function(a){return a.g==1?(r=zn,t==r.ua?a.return():(t==r.ga&&(e.za=new Zt),Zn(e,t,function(){return qs(e,t)},null),e.o&&Zn(e,r.X,function(){return qs(e,r.X)},null),k(a,Zn(e,t,function(){return Ys(e,t,n)},null),2))):e.o?k(a,Zn(e,r.X,function(){return Ys(e,r.X,n)},null),0):a.u(0)})}w.endOfStream=function(e){var t=this;return z(function(n){return k(n,np(t,function(){r1(t)||t.m.readyState==="closed"||(e?t.m.endOfStream(e):t.m.endOfStream())}),0)})},w.Za=function(e){var t=this;return z(function(n){return k(n,np(t,function(){if(e<t.m.duration)for(var r in t.h){var a={start:function(){},p:new Zt,uri:null};t.l[r].unshift(a)}t.m.duration=e,t.ea=e}),0)})},w.getDuration=function(){return this.m.duration};function Df(e,t,n,r){r<=n?ir(e,t):e.h[t].remove(n,r)}function qs(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,ir(e,t)}function Ys(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,ir(e,t)}function ir(e,t){if(!e.C){var n=e.l[t][0];n&&(n.p.resolve(),op(e,t))}}function Zn(e,t,n,r){return Jt(e.I),n={start:n,p:new Zt,uri:r},e.l[t].push(n),e.l[t].length==1&&a1(e,t),n.p}function np(e,t){var n,r,a,u,c,d,p;return z(function(S){switch(S.g){case 1:Jt(e.I),n=[],r={};for(a in e.h)r={ready:void 0},r.ready=new Zt,u={start:function(T){return function(){return T.ready.resolve()}}(r),p:r.ready,uri:null},e.l[a].push(u),n.push(r.ready),e.l[a].length==1&&u.start();return Z(S,2),k(S,Promise.all(n),4);case 4:K(S,3);break;case 2:throw c=ne(S),c;case 3:return Z(S,5,6),k(S,t(),6);case 6:W(S);for(d in e.h)op(e,d);J(S,0);break;case 5:throw p=ne(S),new se(2,3,3015,p,e.i.error||"No error in the media element",null)}})}function op(e,t){e.l[t].shift(),a1(e,t)}function a1(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new se(2,3,3017,t)):n.p.reject(new se(2,3,3015,r,e.i.error||"No error in the media element",n.uri)),op(e,t)}}function EE(e,t,n,r,a){var u=n==null,c=e.Da[r];return n=e.da.Qh(),(u=e.A.insertFakeEncryptionInInit&&u&&c)&&(n=yd(n),u=ji()||Bi()||xd()||hl()&&wd()&&n),u&&uf(e.G[r])=="mp4"&&(t=aE(t,a)),t}function kE(e,t,n,r){return Zn(e,t,function(){t!==Ut&&(Pn()&&(e.j[t]&&(e.j[t].destroy(),delete e.j[t]),r&&(e.j[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),ir(e,t))},null)}function AE(e,t){var n,r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me;return z(function(le){switch(le.g){case 1:n=zn,e.C=!0,e.o=!1,r=e.i.currentTime,a=e.i.autoplay,u=e.i.paused,e.qa&&(e.i.autoplay=!1),oe(le,2),e.s.Ra(),c=[];for(d in e.j)c.push(e.j[d].destroy());for(p in e.l)for(S=e.l[p],T=S[0],e.l[p]=S.slice(0,1),T&&c.push(T.p.catch(Fg)),E=b(S.slice(1)),I=E.next();!I.done;I=E.next())A=I.value,A.p.reject(new se(2,7,7003,void 0));for(R in e.h){D=e.h[R];try{e.m.removeSourceBuffer(D)}catch{}}return k(le,Promise.all(c),4);case 4:return e.j={},e.h={},L=e.m.duration,e.L=new Zt,e.m=i1(e,e.L),k(le,e.L,5);case 5:!isNaN(L)&&L?e.m.duration=L:!isNaN(e.ea)&&e.ea&&(e.m.duration=e.ea),F=new Zt,U=e.m.sourceBuffers,q=t.size,N=0,G=function(){N++,N===q&&(F.resolve(),e.s.jb(U,"addsourcebuffer",G))},e.s.D(U,"addsourcebuffer",G),Q=b(t.keys()),re=Q.next();case 6:return re.done?(e.i.currentTime=r,k(le,F,2)):(ae=re.value,me=t.get(ae),k(le,_f(e,ae,me,me.codecs),9));case 9:e.o?(e.l[n.X]=[],e.l[n.ga]=[]):e.l[ae]=[],re=Q.next(),le.u(6);break;case 2:W(le),e.C=!1,Jt(e.I),e.s.ha(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=a,u||e.i.play())}),J(le,0)}})}function l1(e,t){return np(e,function(){return AE(e,t)})}function IE(e,t,n,r,a){var u,c,d,p,S,T,E,I,A,R,D,L,F,U,q;return z(function(N){return N.g==1?(u=zn,t==u.ua?N.return(!1):(c=Eo(Xo(e.G[t])),d=yi(e.G[t]),S=!1,T=Vn(n,r),E=e.A.forceTransmux,(!ct(T)||!e.B&&kr.includes(T))&&(E=!0),E&&(I=Zr(n,r),A=At(I))&&(p=A(),R=Ro(u.X,(r||"").split(",")),D=Ro(u.ga,(r||"").split(",")),R&&D?(S=!0,L=D,t==u.X&&(L=R),T=p.convertCodecs(t,Zr(n,L))):T=p.convertCodecs(t,I)),F=Eo(Xo(T)),U=yi(T),c===F&&d===U?(e.j[t]&&!p?(e.j[t].destroy(),delete e.j[t]):!e.j[t]&&p?e.j[t]=p:p&&(e.j[t]&&e.j[t].transmux!=p.transmux?(e.j[t].destroy(),delete e.j[t],e.j[t]=p):p.destroy()),N.return(!1)):(q=!0,(e.o||S&&p&&!e.j[t])&&(q=!1),q&&e.A.codecSwitchingStrategy==="smooth"&&Pn()?k(N,kE(e,t,T,p),3):(p&&p.destroy(),k(N,l1(e,a),3))))):N.return(!0)})}function ME(e,t,n,r){if(t==Ut)var a=!1;else{a=Eo(Xo(e.G[t]));var u=yi(e.G[t]),c=Vn(n,r),d=e.A.forceTransmux;(!ct(c)||!e.B&&kr.includes(c))&&(d=!0),n=Zr(n,r),d&&(d=At(n))&&(d=d(),c=d.convertCodecs(t,n),d.destroy()),t=Eo(Xo(c)),c=yi(c),a=a!==t||u!==c}return a?e.A.codecSwitchingStrategy!=="smooth"||!Pn()||e.o:!1}var Pf=h.URL.createObjectURL,_E="sequence";function st(e,t,n){this.i=e,this.A=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.B=0,this.G=!0,this.H=0,this.C=n===void 0?!0:n,this.F=0,this.s=!1,this.m=e}w=st.prototype,w.getDuration=function(){return this.j},w.Sh=function(){return this.g},w.dh=function(e){this.i=e},w.Za=function(e){this.j=e},w.Xh=function(){return this.i},w.ah=function(e){this.B=e},w.sc=function(e){this.G=e},w.pe=function(e){this.o=e},w.Od=function(){return this.o},w.Of=function(e){this.A=e},w.Lh=function(){return this.A},w.Ng=function(e,t){if(e.length!=0){var n=(Date.now()+this.B)/1e3;if(e=e.filter(function(a){return a.start+t<n}),e.length!=0){var r=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(a,u){return Math.max(a,u.end-u.start)},this.g),this.h=Math.max(this.h,r),this.i!=null&&this.C&&!this.s&&(this.i=n-this.h-this.g)}}},w.sd=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.B)/1e3;e=b(e);for(var a=e.next();!a.done;a=e.next())a=a.value,r<a.startTime||(t=Math.min(t,a.startTime),n=Math.max(n,a.endTime),this.g=Math.max(this.g,a.endTime-a.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.s&&(this.i=r-this.h-this.g)}},w.Th=function(){return this.h},w.Wd=function(){this.s=!0},w.si=function(){return this.s},w.bh=function(e){this.m=e},w.Ph=function(){return this.m},w.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},w.xf=function(e){this.g=Math.max(this.g,e)},w.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},w.V=function(){return this.j==1/0&&!this.G},w.kc=function(){return this.j!=1/0&&!this.G},w.mb=function(){return Math.max(this.H,this.Wb()-this.o)},w.hh=function(e){this.H=e},w.Wb=function(){return this.V()||this.kc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},w.bd=function(e){var t=Math.max(this.l,this.H);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Wb()-this.o+e,this.yb()))},w.Vb=function(){return this.bd(0)},w.yb=function(){return Math.max(0,this.Wb()-(this.V()||this.kc()?this.A:0))},w.nh=function(){return!(this.i==null||this.h!=null&&this.C)},w.$g=function(e){this.F=e},w.Jh=function(){return this.F},we("shaka.media.PresentationTimeline",st),st.prototype.getAvailabilityTimeOffset=st.prototype.Jh,st.prototype.setAvailabilityTimeOffset=st.prototype.$g,st.prototype.usingPresentationStartTime=st.prototype.nh,st.prototype.getSeekRangeEnd=st.prototype.yb,st.prototype.getSeekRangeStart=st.prototype.Vb,st.prototype.getSafeSeekRangeStart=st.prototype.bd,st.prototype.getSegmentAvailabilityEnd=st.prototype.Wb,st.prototype.setUserSeekStart=st.prototype.hh,st.prototype.getSegmentAvailabilityStart=st.prototype.mb,st.prototype.isInProgress=st.prototype.kc,st.prototype.isLive=st.prototype.V,st.prototype.offset=st.prototype.offset,st.prototype.notifyMaxSegmentDuration=st.prototype.xf,st.prototype.notifyMinSegmentStartTime=st.prototype.ce,st.prototype.getInitialProgramDateTime=st.prototype.Ph,st.prototype.setInitialProgramDateTime=st.prototype.bh,st.prototype.isStartTimeLocked=st.prototype.si,st.prototype.lockStartTime=st.prototype.Wd,st.prototype.getMaxSegmentEndTime=st.prototype.Th,st.prototype.notifySegments=st.prototype.sd,st.prototype.notifyTimeRange=st.prototype.Ng,st.prototype.getDelay=st.prototype.Lh,st.prototype.setDelay=st.prototype.Of,st.prototype.getSegmentAvailabilityDuration=st.prototype.Od,st.prototype.setSegmentAvailabilityDuration=st.prototype.pe,st.prototype.setStatic=st.prototype.sc,st.prototype.setClockOffset=st.prototype.ah,st.prototype.getPresentationStartTime=st.prototype.Xh,st.prototype.setDuration=st.prototype.Za,st.prototype.setPresentationStartTime=st.prototype.dh,st.prototype.getMaxSegmentDuration=st.prototype.Sh,st.prototype.getDuration=st.prototype.getDuration;function u1(e,t,n){this.j=n,this.l=e,this.s=f1(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}u1.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function RE(e,t){e.i=t}function LE(e){this.g=e}function f1(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=b(_r(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function ip(e,t,n,r,a){var u=this;this.A=a,this.g=e,this.B=t,this.s=n,this.l=new Ct,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.o=!1,this.l.D(e,"waiting",function(){return rp(u)}),this.m=new Mt(function(){rp(u)}).Sa(this.s.gapJumpTimerTime)}ip.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},ip.prototype.Af=function(){this.o=!0,rp(this)};function rp(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=f1(n),a=n.g.currentTime,u=Date.now()/1e3;(t.g!=a||t.s!=r)&&(t.m=u,t.g=a,t.s=r,t.h=!1),a=u-t.m,(r=a>=t.A&&r&&!t.h)&&(t.i(t.g,a),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new $e("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=fE(n,t,e.s.gapDetectionThreshold),r!=null&&(r!=0||e.o))&&(a=n.start(r),(navigator.userAgent.match(/Edge\//)||Bi())&&(a=Math.ceil(100*(a+.01))/100),a>=e.B.yb()||.001>a-t||(r!=0&&n.end(r-1),e.g.currentTime=a,t==e.i&&(e.i=a),e.C++,e.A(new $e("gapjumped"))))}}}function Qs(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=DE.value().get(t),n.ha(e,t,r))}var DE=new Is(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function c1(e,t,n,r){var a=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return a.l==null&&(a.l=r()),a.l},this.o=!1,this.h=new Ct,this.i=new m1(e),Qs(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){d1(a,a.j())})}c1.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function sp(e){return e.o?e.g.currentTime:e.j()}function h1(e,t){0<e.g.readyState?g1(e.i,t):Qs(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){d1(e,e.j())})}function d1(e,t){.001>Math.abs(e.g.currentTime-t)?p1(e):(e.h.ha(e.g,"seeking",function(){p1(e)}),g1(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function p1(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function m1(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new Mt(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}m1.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function g1(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Sa(.1)}function y1(e){this.h=e,this.j=!1,this.g=null,this.i=new Ct}w=y1.prototype,w.ready=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,r=t.g;0>t.g&&(r=Math.max(0,n+t.g)),n!=r?(t.i.ha(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=r):t.j=!0}}var t=this;Qs(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},w.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},w.Ee=function(e){this.g=this.j?this.g:e},w.yd=function(){return(this.j?this.h.currentTime:this.g)||0},w.gg=function(){return 0},w.fg=function(){return 0},w.Mg=function(){};function v1(e,t,n,r,a,u){var c=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=a,this.s=null,this.o=PE(e,n,u),this.j=new ip(e,t.presentationTimeline,n,this.o,u),this.h=new c1(e,function(){e:{var d=c.j;d.j=!0,d.o=!1;var p=sp(c.h);if(d=w1(c,p),.001<Math.abs(d-p)){if(p=!1,!Wo()||Wo()&&af())p=!0;else{var S=Date.now()/1e3;(!c.s||c.s<S-1)&&(c.s=S,p=!0)}if(p){h1(c.h,d),d=void 0;break e}}c.A(),d=void 0}return d},function(d){var p=c.j;p.g.seeking&&!p.j&&(p.j=!0,p.i=d)},function(){var d=r;return d==null?d=1/0>c.g.getDuration()?c.g.Vb():c.g.yb():0>d&&(d=c.g.yb()+d),x1(c,S1(c,d))}),this.m=new Mt(function(){if(c.i.readyState!=0&&!c.i.paused){var d=sp(c.h),p=c.g.Vb(),S=c.g.yb();3>S-p&&(p=S-3),d<p&&(d=w1(c,d),c.i.currentTime=d)}})}w=v1.prototype,w.ready=function(){this.m.Sa(.25)},w.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},w.Ee=function(e){h1(this.h,e)},w.yd=function(){var e=sp(this.h);return 0<this.i.readyState&&!this.i.paused?S1(this,e):e},w.gg=function(){return this.o?this.o.o:0},w.fg=function(){return this.j.C},w.Mg=function(){this.j.Af()};function x1(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function w1(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,a=e.g.Vb(),u=e.g.yb(),c=e.g.getDuration();3>u-a&&(a=u-3);var d=e.g.bd(n),p=e.g.bd(r);return n=e.g.bd(n+r),t>=c?x1(e,t):t>u?u:t<a?Kd(e.i.buffered,p)?p:n:t>=d||Kd(e.i.buffered,t)?t:n}function S1(e,t){var n=e.g.Vb();return t<n?n:(e=e.g.yb(),t>e?e:t)}function PE(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new u1(new LE(e),t.stallThreshold,n),RE(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function Ft(e){this.O=e,this.l=null,this.i=0,this.m=!1}w=Ft.prototype,w.getNumReferences=function(){return this.O.length},w.getNumEvicted=function(){return this.i},w.release=function(){this.m||(this.O=[],this.l&&this.l.stop(),this.l=null)},w.yi=function(){this.m=!0},w.Hb=function(e){for(var t=b(this.O),n=t.next();!n.done;n=t.next())e(n.value)},w.find=function(e){for(var t=this.O.length-1,n=t;0<=n;--n){var r=this.O[n],a=n<t?this.O[n+1].startTime:r.endTime;if(e>=r.startTime&&e<a)return n+this.i}return this.O.length&&e<this.O[0].startTime?this.i:null},w.get=function(e){return this.O.length==0?null:(e-=this.i,0>e||e>=this.O.length?null:this.O[e])},w.offset=function(e){if(!this.m)for(var t=b(this.O),n=t.next();!n.done;n=t.next())n.value.offset(e)},w.Zd=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.O=this.O.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.O.push.apply(this.O,_(e))}},w.rd=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.O.length==0||r.endTime>n.O[0].startTime)}),this.Zd(e),this.Ma(t)},w.Ma=function(e){if(!this.m){var t=this.O.length;this.O=this.O.filter(function(n){return n.endTime>e}),this.i+=t-this.O.length}},w.Bc=function(e,t,n){if(n=n===void 0?!1:n,!this.m){for(;this.O.length&&this.O[this.O.length-1].startTime>=t;)this.O.pop();for(;this.O.length&&this.O[0].endTime<=e;)this.O.shift(),n||this.i++;this.O.length!=0&&(e=this.O[this.O.length-1],t=new ft(e.startTime,t,e.F,e.Ha,e.sa,e.$,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.O[this.O.length-1]=t)}},w.ue=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new Mt(function(){var r=t();r?n.O.push.apply(n.O,_(r)):(n.l.stop(),n.l=null)}),this.l.Sa(e))},Ft.prototype[Symbol.iterator]=function(){return this.Ib(0)},Ft.prototype.Ib=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;var a=this.get(r);n?r++:r--;var u=-1;if(a&&0<a.g.length)for(var c=a.g.length-1;0<=c;--c){var d=a.g[c];if(e>=d.startTime&&e<d.endTime){if(!t){for(;c&&!d.l;)c--,d=a.g[c];if(!d.l)return It("No independent partial segment found!"),null}n?r--:r++,u=c-1;break}}return new Ko(this,r,u,n)};function ap(e,t,n){return e=new ft(e,e+t,function(){return n},0,null,null,e,e,e+t),new Ft([e])}we("shaka.media.SegmentIndex",Ft),Ft.forSingleSegment=ap,Ft.prototype.getIteratorForTime=Ft.prototype.Ib,Ft.prototype.updateEvery=Ft.prototype.ue,Ft.prototype.fit=Ft.prototype.Bc,Ft.prototype.evict=Ft.prototype.Ma,Ft.prototype.mergeAndEvict=Ft.prototype.rd,Ft.prototype.offset=Ft.prototype.offset,Ft.prototype.get=Ft.prototype.get,Ft.prototype.find=Ft.prototype.find,Ft.prototype.markImmutable=Ft.prototype.yi,Ft.prototype.release=Ft.prototype.release,Ft.prototype.getNumEvicted=Ft.prototype.getNumEvicted,Ft.prototype.getNumReferences=Ft.prototype.getNumReferences;function Ko(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}Ko.prototype.Sc=function(e){this.reverse=e},Ko.prototype.Eh=function(){return this.h},Ko.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Ko.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},we("shaka.media.SegmentIterator",Ko),Ko.prototype.next=Ko.prototype.next,Ko.prototype.current=Ko.prototype.current,Ko.prototype.currentPosition=Ko.prototype.Eh,Ko.prototype.setReverse=Ko.prototype.Sc;function In(){Ft.call(this,[]),this.g=[]}X(In,Ft),w=In.prototype,w.clone=function(){var e=new In;return e.g=this.g.slice(),e},w.release=function(){for(var e=b(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g=[]},w.Hb=function(e){for(var t=b(this.g),n=t.next();!n.done;n=t.next())n.value.Hb(e)},w.find=function(e){for(var t=0,n=b(this.g),r=n.next();!r.done;r=n.next()){r=r.value;var a=r.find(e);if(a!=null)return a+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},w.get=function(e){for(var t=0,n=b(this.g),r=n.next();!r.done;r=n.next()){r=r.value;var a=r.get(e-t);if(a)return a;a=r.getNumReferences(),t+=r.getNumEvicted()+a}return null},w.offset=function(){},w.Zd=function(){},w.Ma=function(){},w.rd=function(){},w.Bc=function(){},w.ue=function(){},we("shaka.media.MetaSegmentIndex",In),In.prototype.updateEvery=In.prototype.ue,In.prototype.fit=In.prototype.Bc,In.prototype.mergeAndEvict=In.prototype.rd,In.prototype.evict=In.prototype.Ma,In.prototype.merge=In.prototype.Zd,In.prototype.offset=In.prototype.offset,In.prototype.get=In.prototype.get,In.prototype.find=In.prototype.find,In.prototype.forEachTopLevelReference=In.prototype.Hb,In.prototype.release=In.prototype.release;function Ml(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Nd(),this.h=new Mt(function(){t.g.Lg(.25*t.i)})}Ml.prototype.release=function(){this.set(this.hc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Ml.prototype.set=function(e){this.i=e,C1(this)},Ml.prototype.hc=function(){return this.g.hc()};function C1(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Nd()!=t&&e.g.Rf(t);return}catch{}e.h.Sa(.25),e.g.Nd()!=0&&e.g.Rf(0)}function T1(e){var t=this;this.h=e,this.g=new Set,this.i=new Mt(function(){b1(t,!1)}).Sa(.25)}T1.prototype.release=function(){this.i.stop();for(var e=b(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function b1(e,t){for(var n=b(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function OE(){this.g=null,this.h=[]}function lp(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=b(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function NE(e){function t(u){return{timestamp:u.timestamp,state:u.state,duration:u.duration}}for(var n=[],r=b(e.h),a=r.next();!a.done;a=r.next())n.push(t(a.value));return e.g&&n.push(t(e.g)),n}function UE(){this.i=this.h=null,this.g=[]}function up(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Of(){this.Cd=this.Hg=this.A=this.B=this.I=this.C=this.s=this.j=this.H=this.m=this.i=this.U=this.Z=this.L=this.N=this.R=this.l=this.o=NaN,this.K=0,this.F=this.G=NaN,this.g=new OE,this.h=new UE}function Nf(e,t,n,r){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=r}function BE(e,t){e.l=t,e=b(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function _l(e,t,n){if(n=n===void 0?!1:n,e.i.segmentIndex&&(e.g||(e.g=e.i.segmentIndex.Ib(t,!0,e.o)),e.g)){for(n&&e.g.next();e.h.size<e.m&&(t=e.g.next().value,!!t);)n=!0,t.preload&&t.sa!=null&&(n=!1),t.Yb()==2&&(n=!1),n&&t.$&&E1(e,t.$),n&&!e.h.has(t)&&(n=new cp(e.l),I1(n,t,e.i),e.h.set(t,n));fp(e)}}function E1(e,t){if(e.i.segmentIndex&&!Array.from(e.j.keys()).some(function(r){return Wd(r,t)})){var n=new cp(e.l);I1(n,t,e.i),e.j.set(t,n)}}function k1(e,t){t=b(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Rl(e,n)}function Li(e){k1(e,e.h),k1(e,e.j),e.g=null}Nf.prototype.Ma=function(e,t){t=t===void 0?!1:t;for(var n=b(this.h.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&Rl(this,r);t&&fp(this)},Nf.prototype.Sc=function(e){this.o=e,this.g&&this.g.Sc(e)};function fp(e){for(var t=Array.from(e.h.keys()),n=b(e.j.keys()),r=n.next(),a={};!r.done;a={nf:void 0},r=n.next())a.nf=r.value,t.some(function(u){return function(c){return Wd(c.$,u.nf)}}(a))||Rl(e,a.nf)}function A1(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var r=n.pop();r&&Rl(e,r)}fp(e)}function jE(e,t){t&&t!==e.i&&(Li(e),e.i=t)}function Rl(e,t){var n=e.h;t instanceof Do&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function cp(e){this.g=e,this.fe=this.Uf=null}function I1(e,t,n){var r=new Uint8Array(0);e.fe=e.g(t,n,function(a){return z(function(u){if(u.g==1)return 0<r.byteLength?r=An(r,a):r=a,e.Uf?k(u,e.Uf(r),3):u.u(0);r=new Uint8Array(0),V(u)})})}cp.prototype.abort=function(){this.fe&&this.fe.abort()};function hp(e){Xt.call(this);var t=this;this.g=new Set,this.i=e,this.h=new Mt(function(){for(var n=t.i(),r=b(t.g),a=r.next();!a.done;a=r.next())a=a.value,a.endTime<n.start&&(t.g.delete(a),a=new $e("regionremove",new Map([["region",a]])),t.dispatchEvent(a))}).Sa(2)}X(hp,Xt),hp.prototype.release=function(){this.g.clear(),this.h.stop(),Xt.prototype.release.call(this)};function Uf(e){Xt.call(this),this.g=new Map,this.h=e}X(Uf,Xt),Uf.prototype.release=function(){this.g.clear(),Xt.prototype.release.call(this)};function FE(e,t){var n=e.g.get(t);return n||(n={ud:[],Pe:null,contentType:t},e.g.set(t,n)),n}function $E(e,t,n){var r=FE(e,t.contentType);zE(e,r),e={Hc:t,position:n},r=r.ud,t=r.findIndex(function(a){return a.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}Uf.prototype.j=function(e){for(var t=b(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var r=n.Pe;e:{for(var a=n.ud,u=a.length-1;0<=u;u--){var c=a[u];if(c.position<=e){a=c.Hc;break e}}a=null}u=a&&!(r===a||r&&a&&r.bandwidth==a.bandwidth&&r.audioSamplingRate==a.audioSamplingRate&&r.codecs==a.codecs&&r.contentType==a.contentType&&r.frameRate==a.frameRate&&r.height==a.height&&r.mimeType==a.mimeType&&r.channelsCount==a.channelsCount&&r.pixelAspectRatio==a.pixelAspectRatio&&r.width==a.width),c=a&&r&&a.label&&r.label&&r.label!==a.label;var d=a&&r&&a.language&&r.language&&r.language!==a.language;r=a&&r&&a.roles&&r.roles&&!un(r.roles,a.roles),(c||d||r)&&M1(this,e,a.contentType)&&(n.Pe=a,r=new $e("audiotrackchange",new Map([["quality",a],["position",e]])),this.dispatchEvent(r)),u&&M1(this,e,a.contentType)&&(n.Pe=a,JSON.stringify(a),n=new $e("qualitychange",new Map([["quality",a],["position",e]])),this.dispatchEvent(n))}};function M1(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function zE(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,a=t.ud;t.ud=a.filter(function(u,c){return!(u.position<=n&&c+1<a.length&&a[c+1].position<=n||u.position>=r)})}else t.ud=[]}function Bf(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function jf(e){var t=yi(e),n=t.split("/")[0];return e=Xo(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,xd:null,colorGamut:null}}function VE(e,t){function n(N){L=N.name;var G=N.reader;G.skip(24);var Q=G.la(),re=G.la();G.skip(50),E=String(Q),T=String(re),N.reader.na()&&Rt(N)}function r(N){var G=Zy(N.reader);I=G.channelCount,A=G.sampleRate,a(N.name)}function a(N){switch(N=N.toLowerCase(),N){case"avc1":case"avc3":c.push(N+".42E01E"),p=!0;break;case"hev1":case"hvc1":c.push(N+".1.6.L93.90"),p=!0;break;case"dvh1":case"dvhe":c.push(N+".05.04"),p=!0;break;case"vp09":c.push(N+".00.10.08"),p=!0;break;case"av01":c.push(N+".0.01M.08"),p=!0;break;case"mp4a":u.push("mp4a.40.2"),d=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":u.push(N),d=!0}}var u=[],c=[],d=!1,p=!1,S=null,T=null,E=null,I=null,A=null,R=null,D=null,L;if(new tn().box("moov",Rt).box("trak",Rt).box("mdia",Rt).S("mdhd",function(N){S=If(N.reader,N.version).language}).box("minf",Rt).box("stbl",Rt).S("stsd",Ar).box("mp4a",function(N){var G=Zy(N.reader);I=G.channelCount,A=G.sampleRate,N.reader.na()?Rt(N):a(N.name)}).box("esds",function(N){N=N.reader;for(var G="mp4a",Q,re;N.na();){Q=N.T();for(var ae=N.T();ae&128;)ae=N.T();if(Q==3)N.la(),ae=N.T(),ae&128&&N.la(),ae&64&&N.skip(N.T()),ae&32&&N.la();else if(Q==4)re=N.T(),N.skip(12);else if(Q==5)break}re&&(G+="."+El(re),Q==5&&N.na()&&(Q=N.T(),re=(Q&248)>>3,re===31&&N.na()&&(re=32+((Q&7)<<3)+((N.T()&224)>>5)),G+="."+re)),u.push(G),d=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(N){var G=L||"";switch(L){case"dvav":G="avc3";break;case"dva1":G="avc1"}N=N.reader,N.skip(1),N=G+"."+El(N.T())+El(N.T())+El(N.T()),c.push(N),p=!0}).box("hvcC",function(N){var G=L||"";switch(L){case"dvh1":G="hvc1";break;case"dvhe":G="hev1"}var Q=N.reader;Q.skip(1),N=Q.T();var re=["","A","B","C"][N>>6],ae=N&31,me=Q.P(),le=(N&32)>>5?"H":"L";N=[Q.T(),Q.T(),Q.T(),Q.T(),Q.T(),Q.T()],Q=Q.T();for(var ue=0,de=0;32>de&&(ue|=me&1,de!=31);de++)ue<<=1,me>>=1;for(G=G+("."+re+ae)+("."+El(ue,!0)),G+="."+le+Q,re="",ae=N.length;ae--;)((le=N[ae])||re)&&(re="."+le.toString(16).toUpperCase()+re);G+=re,c.push(G),p=!0}).box("dvcC",function(N){var G=L||"";switch(L){case"hvc1":G="dvh1";break;case"hev1":G="dvhe";break;case"avc1":G="dva1";break;case"avc3":G="dvav";break;case"av01":G="dav1"}var Q=N.reader;Q.skip(2),N=Q.T(),Q=Q.T(),c.push(G+"."+Po(N>>1&127)+"."+Po(N<<5&32|Q>>3&31)),p=!0}).box("dvvC",function(N){var G=L||"";switch(L){case"hvc1":G="dvh1";break;case"hev1":G="dvhe";break;case"avc1":G="dva1";break;case"avc3":G="dvav";break;case"av01":G="dav1"}var Q=N.reader;Q.skip(2),N=Q.T(),Q=Q.T(),c.push(G+"."+Po(N>>1&127)+"."+Po(N<<5&32|Q>>3&31)),p=!0}).S("vpcC",function(N){var G=L||"",Q=N.reader;N=Q.T();var re=Q.T();Q=Q.T()>>4&15,c.push(G+"."+Po(N)+"."+Po(re)+"."+Po(Q)),p=!0}).box("av1C",function(N){var G=L||"";switch(L){case"dav1":G="av01"}var Q=N.reader;Q.skip(1),N=Q.T(),Q=Q.T();var re=N>>>5,ae=(Q&64)>>6;c.push(G+"."+re+"."+Po(N&31)+(Q>>>7?"H":"M")+"."+Po(re===2&&ae?(Q&32)>>5?12:10:ae?10:8)+"."+((Q&16)>>4)+"."+((Q&8)>>3)+((Q&4)>>2)+(Q&3)+"."+Po(1)+"."+Po(1)+"."+Po(1)+".0"),p=!0}).box("enca",Ud).box("encv",Lo).box("sinf",Rt).box("frma",function(N){N=Jy(N.reader).codec,a(N)}).box("colr",function(N){c=c.map(function(re){if(re.startsWith("av01.")){var ae=N.reader,me=ae.va(),le=ae.qb(4),ue=String.fromCharCode(le[0]);if(ue+=String.fromCharCode(le[1]),ue+=String.fromCharCode(le[2]),ue+=String.fromCharCode(le[3]),ue==="nclx"){le=ae.la(),ue=ae.la();var de=ae.la(),be=ae.T()>>7,Ce=re.split(".");Ce.length==10&&(Ce[6]=Po(le),Ce[7]=Po(ue),Ce[8]=Po(de),Ce[9]=String(be),re=Ce.join("."))}ae.seek(me)}return re});var G=hE(N.reader),Q=G.colorGamut;R=G.xd,D=Q}).parse(e||t,!0),!u.length&&!c.length)return null;var F=d&&!p,U=new Map;if(p){var q=new _e("video/mp4");for(e&&q.init(e),q.i(t),e=b(q.j()),t=e.next();!t.done;t=e.next())t=t.value,U.set(t,t);q.g()}return{type:F?"audio":"video",mimeType:F?"audio/mp4":"video/mp4",codecs:dp(u.concat(c)).join(", "),language:S,height:T,width:E,channelCount:I,sampleRate:A,closedCaptions:U,xd:R,colorGamut:D}}function dp(e){var t=new Set,n=[];e=b(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var a=Ps(r);t.has(a)||(n.push(r),t.add(a))}return t=bd("audio",n),r=bd("video",n),e=bd(Ut,n),r=HE(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function HE(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?ct('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function GE(e){var t=null;return new tn().box("moov",Rt).box("trak",Rt).box("mdia",Rt).box("minf",Rt).box("stbl",Rt).S("stsd",Ar).box("encv",Lo).box("enca",Ud).box("sinf",Rt).box("schi",Rt).S("tenc",function(n){n=n.reader,n.T(),n.T(),n.T(),n.T(),t=Yi(n.qb(16))}).parse(e,!0),t}function pp(e,t,n){var r,a,u,c,d;return z(function(p){if(p.g==1)return r=t,r.cryptoKey?p.u(2):k(p,r.fetchKey(),3);if(a=r.iv,!a)for(a=Ae(new ArrayBuffer(16)),u=r.firstMediaSequenceNumber+n,c=a.byteLength-1;0<=c;c--)a[c]=u&255,u>>=8;return t.blockCipherMode=="CBC"?d={name:"AES-CBC",iv:a}:d={name:"AES-CTR",counter:a,length:64},p.return(h.crypto.subtle.decrypt(d,r.cryptoKey,e))})}function Zs(e,t,n,r,a){return e=Qn(e,r,a),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function _1(e,t){var n=this;this.g=t,this.l=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.m=new zs(function(){return WE(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null},this.N=0,this.L=1/0}w=_1.prototype,w.destroy=function(){return this.m.destroy()};function WE(e){var t,n,r,a,u,c,d;return z(function(p){if(p.g==1){for(t=[],n=b(e.i.values()),r=n.next();!r.done;r=n.next())a=r.value,Ll(a),t.push(Dl(a)),a.W&&(Li(a.W),a.W=null);for(u=b(e.o.values()),c=u.next();!c.done;c=u.next())d=c.value,Li(d);return k(p,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.l=null,e.h=null,V(p)})}w.configure=function(e){if(this.h=e,this.I=new ay({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(Li(t.W),t.W=null),t=b(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,Li(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(Ut))&&t.W&&(Li(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(Li(t.W),t.W=null),t=b(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(A1(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(Li(n.W),n.W=null)):0<e.segmentPrefetchLimit&&(n.W=mp(this,n.stream));e.disableAudioPrefetch||ZE(this)};function XE(e,t,n){e.l.presentationTimeline.V()||(e.N=t,e.L=n)}w.start=function(e){var t=this;return z(function(n){if(n.g==1)return k(n,QE(t,e||new Map),2);Jt(t.m),t.C=!0,V(n)})};function KE(e,t){var n,r,a,u,c,d;z(function(p){switch(p.g){case 1:return n=zn,e.H++,r=e.H,Z(p,2),k(p,s1(e.g.aa,n.ua),4);case 4:K(p,3);break;case 2:a=ne(p),e.g&&e.g.onError(a);case 3:u=Vn(t.mimeType,t.codecs),Rf(e.g.aa,u,e.l.sequenceMode,t.external),c=e.g.aa.F,(c.isTextVisible()||e.h.alwaysStreamText)&&e.H==r&&(d=D1(e,t),e.i.set(n.ua,d),si(e,d,0)),V(p)}})}function qE(e){var t=e.i.get(Ut);t&&(Ll(t),Dl(t).catch(function(){}),e.i.delete(Ut)),e.s=null}function R1(e,t){for(var n=0>e.g.eb(),r=b(e.i.values()),a=r.next();!a.done;a=r.next())a=a.value,a.ia&&a.ia.Sc(n),a.W&&a.W.Sc(n);for(r=b(e.o.values()),a=r.next();!a.done;a=r.next())a.value.Sc(n);(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.rc&&(Js(e,t,!1,0,!1),n.rc=r):(t=n.rc)&&(n.rc=null,Js(e,t,!0,0,!1)))}function L1(e,t,n,r,a,u){n=n===void 0?!1:n,r=r===void 0?0:r,a=a===void 0?!1:a,u=u===void 0?!1:u,e.j=t,e.C&&(t.video&&Js(e,t.video,n,r,a,u),t.audio&&Js(e,t.audio,n,r,a,u))}function Ff(e,t){z(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):k(n,t.createSegmentIndex(),2):n.return();Js(e,t,!0,0,!1),V(n)})}function Js(e,t,n,r,a,u){var c=e.i.get(t.type);c||t.type!=Ut?c&&(c.rc&&(t.trickModeVideo?(c.rc=t,t=t.trickModeVideo):c.rc=null),c.stream!=t||a)&&(e.o.has(t)?c.W=e.o.get(t):c.W&&jE(c.W,t),t.type==Ut&&(a=Vn(t.mimeType,t.codecs),Rf(e.g.aa,a,e.l.sequenceMode,t.external)),e.o.has(c.stream)||c.stream.closeSegmentIndex&&c.stream.closeSegmentIndex(),c.stream=t,c.ia=null,c.hg=!!u,n?c.Vc?c.Be=!0:c.Qa?(c.cc=!0,c.Hd=r,c.Be=!0):(Ll(c),xp(e,c,!0,r).catch(function(d){e.g&&e.g.onError(d)})):c.Qa||c.sb||si(e,c,0),YE(e,c).catch(function(d){e.g&&e.g.onError(d)})):KE(e,t)}function YE(e,t){var n,r;return z(function(a){if(a.g==1)return t.ib?(n=t.stream,r=t.ib,n.segmentIndex?a.u(2):k(a,n.createSegmentIndex(),2)):a.return();if(t.ib!=r||t.stream!=n)return a.return();var u=e.g.Md(),c=Il(e.g.aa,t.type),d=t.stream.segmentIndex.find(t.Na?t.Na.endTime:u),p=d==null?null:t.stream.segmentIndex.get(d);d=p&&p.sa?p.sa-p.Ha:null,p&&!d&&(d=(p.endTime-p.getStartTime())*(t.stream.bandwidth||0)/8),d?((p=p.$)&&(d+=(p.sa?p.sa-p.Ha:null)||0),p=e.g.getBandwidthEstimate(),u=8*d/p<(c||0)-u-Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal)||t.ib.h.g>d):u=!1,u&&t.ib.abort(),V(a)})}w.Qc=function(){if(this.g)for(var e=this.g.Md(),t=b(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var a=this.g.aa;if(a.C?a=!1:r==Ut?(a=a.g,a=a.g==null||a.h==null?!1:e>=a.g&&e<a.h):(a=Ks(a,r),a=Kd(a,e)),!a){if(n.W&&(n.W.g=null),n.type==="audio"){a=b(this.o.values());for(var u=a.next();!u.done;u=a.next())u.value.g=null}n.ia=null,(Il(this.g.aa,r)!=null||n.Qa)&&$f(this,n),n.ib&&(n.ib.abort(),n.ib=null),r===Ut&&(r=this.g.aa,r.H&&r.H.g()),n.Qc=!0}}};function $f(e,t){t.Vc||t.cc||(t.Qa?(t.cc=!0,t.Hd=0):tp(e.g.aa,t.type)==null?t.sb==null&&si(e,t,0):(Ll(t),xp(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function QE(e,t){var n,r,a,u,c,d,p,S,T,E;return z(function(I){if(I.g==1){if(n=zn,!e.j)throw new se(2,5,5006);return r=new Map,a=new Set,e.j.audio&&(r.set(n.X,e.j.audio),a.add(e.j.audio)),e.j.video&&(r.set(n.ga,e.j.video),a.add(e.j.video)),e.s&&(r.set(n.ua,e.s),a.add(e.s)),u=e.g.aa,k(I,u.init(r,e.l.sequenceMode,e.l.type,e.l.ignoreManifestTimestampsInSegmentsMode),2)}for(Jt(e.m),e.updateDuration(),c=b(r.keys()),d=c.next();!d.done;d=c.next())p=d.value,S=r.get(p),e.i.has(p)||(T=D1(e,S),t.has(S.id)&&(E=t.get(S.id),BE(E,function(A,R,D){return zf(A,R,D||null,e.h.retryParameters,e.g.Lb)}),T.W=E),e.i.set(p,T),si(e,T,0));V(I)})}function D1(e,t){return{stream:t,type:t.type,ia:null,W:mp(e,t),Na:null,lc:null,Vd:null,Ud:null,Td:null,rc:null,endOfStream:!1,Qa:!1,sb:null,cc:!1,Hd:0,Be:!1,Vc:!1,Qc:!0,Gf:!1,fd:!1,ib:null}}function mp(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===Ut&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===Ut&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new Nf(e.h.segmentPrefetchLimit,t,function(r,a,u){return zf(r,a,u||null,e.h.retryParameters,e.g.Lb)},0>e.g.eb()):null}function ZE(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r=b(e.l.variants),a=r.next(),u={};!a.done;u={lb:void 0},a=r.next())if(u.lb=a.value,u.lb.audio)if(e.o.has(u.lb.audio)){if(a=e.o.get(u.lb.audio),A1(a,t),!(0<t&&n.some(function(d){return function(p){return Os(d.lb.audio.language,p)}}(u)))){var c=e.i.get(u.lb.audio.type);a!==(c&&c.W)&&Li(a),e.o.delete(u.lb.audio)}}else 0>=t||!n.some(function(d){return function(p){return Os(d.lb.audio.language,p)}}(u))||!(a=mp(e,u.lb.audio))||(u.lb.audio.segmentIndex||u.lb.audio.createSegmentIndex(),e.o.set(u.lb.audio,a))}w.updateDuration=function(){var e=this.l.presentationTimeline.getDuration();1/0>e?this.g.aa.Za(e):this.g.aa.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function JE(e,t){var n,r,a,u,c,d;return z(function(p){switch(p.g){case 1:if(Jt(e.m),t.Qa||t.sb==null||t.Vc)return p.return();if(t.sb=null,!t.cc){p.u(2);break}return k(p,xp(e,t,t.Be,t.Hd),3);case 3:return p.return();case 2:if(t.stream.segmentIndex){p.u(4);break}return n=t.stream,Z(p,5),k(p,t.stream.createSegmentIndex(),7);case 7:K(p,6);break;case 5:return r=ne(p),k(p,wp(e,t,r),8);case 8:return p.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.sb||si(e,t,0),p.return();case 4:Z(p,9),a=ek(e,t),a!=null&&(si(e,t,a),t.fd=!1),K(p,10);break;case 9:return u=ne(p),k(p,wp(e,t,u),11);case 11:return p.return();case 10:if(c=Array.from(e.i.values()),!e.C||!c.every(function(S){return S.endOfStream})){p.u(0);break}return k(p,e.g.aa.endOfStream(),13);case 13:Jt(e.m),d=e.g.aa.getDuration(),d!=0&&d<e.l.presentationTimeline.getDuration()&&e.l.presentationTimeline.Za(d),V(p)}})}function ek(e,t){if(yp(t))return SE(e.g.aa,t.stream.originalId||""),null;if(t.type==Ut&&CE(e.g.aa),!e.g.aa.xa&&t.type!=Ut)return e.h.updateIntervalSeconds/2;var n=e.g.Md();if(t.type==="audio")for(var r=b(e.o.keys()),a=r.next();!a.done;a=r.next())a=e.o.get(a.value),a.Ma(n,!0),_l(a,n);r=t.Na?t.Na.endTime:n;var u=xE(e.g.aa,t.type,n),c=Math.max(1,Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),d=e.l.presentationTimeline.getDuration()-r;if(a=Il(e.g.aa,t.type),1e-6>d&&a)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(Ut))&&yp(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,u>=c)return e.h.updateIntervalSeconds/2;if(c=!t.ia,a=tk(e,t,n,a),!a)return e.h.updateIntervalSeconds;u=!1,c&&t.hg&&(u=!0,t.hg=!1),c=1/0,d=Array.from(e.i.values()),d=b(d);for(var p=d.next();!p.done;p=d.next())p=p.value,yp(p)||p.ia&&!p.ia.current()||(c=Math.min(c,p.Na?p.Na.endTime:n));return r>=c+e.l.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.ia&&!e.o.has(t.stream)&&(t.W.Ma(a.startTime),_l(t.W,a.startTime)),nk(e,t,n,a,u).catch(function(){}),null)}function tk(e,t,n,r){var a=t.ia?t.ia.current():null;if(a)return a;if(t.Na||r)return t.ia=t.stream.segmentIndex.Ib(t.Na?t.Na.endTime:r,!1,0>e.g.eb()),t.ia&&t.ia.next().value;r=e.l.sequenceMode?0:e.h.inaccurateManifestTolerance,a=Math.max(n-r,0),e=0>e.g.eb();var u=null;return r&&(t.ia=t.stream.segmentIndex.Ib(a,!1,e),u=t.ia&&t.ia.next().value),u||(t.ia=t.stream.segmentIndex.Ib(n,!1,e),u=t.ia&&t.ia.next().value),u}function nk(e,t,n,r,a){var u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N;return z(function(G){switch(G.g){case 1:if(u=zn,c=t.stream,d=t.ia,t.Qa=!0,Z(G,2),r.Yb()==2)throw new se(1,1,1011);return k(G,rk(e,t,r,a),4);case 4:return Jt(e.m),e.A?G.return():(p=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",S=h.ReadableStream,e.h.lowLatencyMode&&e.l.isLowLatency&&S&&p&&(e.l.type!="HLS"||r.m)?(I=new Uint8Array(0),R=A=!1,L=function(Q){var re,ae,me;return z(function(le){switch(le.g){case 1:if(A||(R=!0,Jt(e.m),e.A))return le.return();if(Z(le,2),I=ok(I,Q),re=!1,ae=0,new tn().box("mdat",function(ue){ae=ue.size+ue.start,re=!0}).parse(I,!1,!0),!re){le.u(4);break}return me=I.subarray(0,ae),I=I.subarray(ae),k(le,gp(e,t,n,c,r,me,!0,a),5);case 5:t.W&&t.ia&&_l(t.W,r.startTime,!0);case 4:K(le,0);break;case 2:D=ne(le),V(le)}})},k(G,vp(e,t,r,L),9)):(T=vp(e,t,r),k(G,T,7)));case 7:return E=G.h,Jt(e.m),e.A?G.return():(Jt(e.m),t.cc?(t.Qa=!1,si(e,t,0),G.return()):k(G,gp(e,t,n,c,r,E,!1,a),6));case 9:if(F=G.h,D)throw D;if(R){G.u(10);break}return A=!0,Jt(e.m),e.A?G.return():t.cc?(t.Qa=!1,si(e,t,0),G.return()):k(G,gp(e,t,n,c,r,F,!1,a),10);case 10:t.W&&t.ia&&_l(t.W,r.startTime,!0);case 6:if(Jt(e.m),e.A)return G.return();t.Na=r,d.next(),t.Qa=!1,t.Gf=!1,U=e.g.aa.wb(),q=U[t.type],JSON.stringify(q),t.cc||e.g.Af(r,t.stream),si(e,t,0),K(G,0);break;case 2:if(N=ne(G),Jt(e.m,N),e.A)return G.return();if(t.Qa=!1,N.code==7001)t.Qa=!1,Ll(t),si(e,t,0),G.u(0);else if(t.type==u.ua&&e.h.ignoreTextStreamFailures)e.i.delete(u.ua),G.u(0);else if(N.code==3017)ik(e,t,N),G.u(0);else return t.fd=!0,N.category==1&&t.W&&Rl(t.W,r),N.severity=2,k(G,wp(e,t,N),0)}})}function ok(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function ik(e,t,n){if(!Array.from(e.i.values()).some(function(a){return a!=t&&a.Gf})){if(e.g.disableStream(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.fd=!0,e.A=!0,e.g.onError(n);return}t.Gf=!0}si(e,t,4)}function rk(e,t,n,r){var a,u,c,d,p,S,T,E,I,A,R,D,L,F,U;return z(function(q){switch(q.g){case 1:if(a=zn,u=t.Na==null&&t.lc==null,c=[],d=Math.max(0,Math.max(n.appendWindowStart,e.N)-.1),p=Math.min(n.appendWindowEnd,e.L)+.01,S=Ps(n.codecs||t.stream.codecs),T=yi(n.mimeType||t.stream.mimeType),E=n.timestampOffset,E==t.Vd&&d==t.Ud&&p==t.Td&&S==t.tf&&T==t.uf){q.u(2);break}if(I=t.tf&&t.uf&&ME(e.g.aa,t.type,T,S),!I){q.u(3);break}if(A=null,t.type===a.ga?A=e.i.get(a.X):t.type===a.X&&(A=e.i.get(a.ga)),!A){q.u(3);break}return k(q,Dl(A).catch(function(){}),5);case 5:A.lc=null,$f(e,A);case 3:return k(q,P1(e,t,E,d,p,n,S,T),2);case 2:return Wd(n.$,t.lc)||(t.lc=n.$,n.l&&n.$&&(R=vp(e,t,n.$),D=function(){var N,G,Q,re,ae,me,le;return z(function(ue){switch(ue.g){case 1:return Z(ue,2),k(ue,R,4);case 4:return N=ue.h,Jt(e.m),G=null,Q=new Map,re={projection:null,hfov:null},ae=new tn,ae.box("moov",Rt).box("trak",Rt).box("mdia",Rt).S("mdhd",function(de){G=If(de.reader,de.version).timescale}).box("hdlr",function(de){switch(de=de.reader,de.skip(8),de.oc()){case"soun":Q.set(a.X,G);break;case"vide":Q.set(a.ga,G)}G=null}).box("minf",Rt).box("stbl",Rt).S("stsd",Ar).box("encv",Lo).box("avc1",Lo).box("avc3",Lo).box("hev1",Lo).box("hvc1",Lo).box("dvav",Lo).box("dva1",Lo).box("dvh1",Lo).box("dvhe",Lo).box("dvc1",Lo).box("dvi1",Lo).box("vexu",Rt).box("proj",Rt).S("prji",function(de){de=de.reader.oc(),re.projection=de}).box("hfov",function(de){de=de.reader.P()/1e3,re.hfov=de}).parse(N),lk(e,re),Q.has(t.type)?n.$.timescale=Q.get(t.type):G!=null&&(n.$.timescale=G),me=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,k(ue,e.g.kg(t.type,N),5);case 5:return k(ue,Lf(e.g.aa,t.type,N,null,t.stream,me,t.Qc,r),6);case 6:K(ue,0);break;case 2:throw le=ne(ue),t.lc=null,le}})},L=n.startTime,u&&(F=Il(e.g.aa,t.type),F!=null&&(L=F)),e.g.Ai(L,n.$),c.push(D()))),e.l.sequenceMode&&(U=t.Na?t.Na.i:null,n.i!=U&&c.push(bE(e.g.aa,t.type,n.startTime))),k(q,Promise.all(c),0)}})}function P1(e,t,n,r,a,u,c,d){var p,S,T,E;return z(function(I){if(I.g==1)return p=zn,S=new Map,e.j.audio&&S.set(p.X,e.j.audio),e.j.video&&S.set(p.ga,e.j.video),Z(I,2),t.Ud=r,t.Td=a,c&&(t.tf=c),d&&(t.uf=d),t.Vd=n,T=e.l.sequenceMode||e.l.type=="HLS",k(I,TE(e.g.aa,t.type,n,r,a,T,u.mimeType||t.stream.mimeType,u.codecs||t.stream.codecs,S),4);if(I.g!=2)return K(I,0);throw E=ne(I),t.Ud=null,t.Td=null,t.tf=null,t.uf=null,t.Vd=null,E})}function gp(e,t,n,r,a,u,c,d){c=c===void 0?!1:c,d=d===void 0?!1:d;var p,S,T,E,I,A,R,D;return z(function(L){switch(L.g){case 1:return p=r.closedCaptions&&0<r.closedCaptions.size,T=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,E=e.h.parsePrftBox&&!e.F,I=r.mimeType=="video/mp4"||r.mimeType=="audio/mp4",A=null,a.$&&(A=a.$.timescale),R=I&&A&&r.type==="video"&&e.l.type=="DASH"&&e.h.shouldFixTimestampOffset,(T||E||R)&&(S=new tn),T&&S.S("emsg",function(F){var U=r.emsgSchemeIdUris;if(F.version===0)var q=F.reader.oc(),N=F.reader.oc(),G=F.reader.P(),Q=F.reader.P(),re=F.reader.P(),ae=F.reader.P(),me=a.startTime+Q/G;else G=F.reader.P(),me=F.reader.Nc()/G+a.timestampOffset,Q=me-a.startTime,re=F.reader.P(),ae=F.reader.P(),q=F.reader.oc(),N=F.reader.oc();F=F.reader.qb(F.reader.getLength()-F.reader.va()),(U&&U.includes(q)||e.h.dispatchAllEmsgBoxes)&&(q=="urn:mpeg:dash:event:2012"?e.g.Bi():(U=me+re/G,G=new Map().set("detail",{startTime:me,endTime:U,schemeIdUri:q,value:N,timescale:G,presentationTimeDelta:Q,eventDuration:re,id:ae,messageData:F}),G=new $e("emsg",G),G.cancelable=!0,e.g.onEvent(G),!G.defaultPrevented&&(q=="https://aomedia.org/emsg/ID3"||q=="https://developer.apple.com/streaming/emsg-id3")&&(q=os(F),q.length)&&e.g.onMetadata([{cueTime:me,data:F,frames:q,dts:me,pts:me}],0,U)))}),E&&S.S("prft",function(F){if(!e.F&&a.$.timescale){var U=F.reader,q=F.version;U.P(),F=U.P();var N=U.P();F=1e3*F+N/Math.pow(2,32)*1e3,q===0?U=U.P():(q=U.P(),U=U.P(),U=q*Math.pow(2,32)+U),F=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+F).getTime(),U=new Map().set("detail",{wallClockTime:F,programStartDate:new Date(F-U/a.$.timescale*1e3)}),U=new $e("prft",U),e.g.onEvent(U),e.F=!0}}),R&&S.box("moof",Rt).box("traf",Rt).S("tfdt",function(F){var U,q,N,G,Q,re;return z(function(ae){return U=Af(F.reader,F.version),q=U.baseMediaDecodeTime,q?(N=-q/A,G=Number(t.Vd)||0,G<N?(Q=t.Ud,re=t.Td,k(ae,P1(e,t,N,Q,re,a),0)):ae.u(0)):ae.return()})}),(T||E||R)&&S.parse(u,!1,c),k(L,sk(e,t,n),2);case 2:return Jt(e.m),D=t.Qc,t.Qc=!1,k(L,e.g.kg(t.type,u),3);case 3:return k(L,Lf(e.g.aa,t.type,u,a,r,p,D,d,c),4);case 4:Jt(e.m),V(L)}})}function sk(e,t,n){var r,a,u,c;return z(function(d){if(d.g==1)return r=Math.max(e.h.bufferBehind,e.l.presentationTimeline.g),a=tp(e.g.aa,t.type),a==null?d.return():(u=n-a,c=u-r,c<=e.h.evictionGoal?d.return():k(d,e.g.aa.remove(t.type,a,a+c),2));Jt(e.m),V(d)})}function yp(e){return e&&e.type==Ut&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function vp(e,t,n,r){var a,u,c,d,p;return z(function(S){switch(S.g){case 1:if(a=n.cd())return S.return(a);if(u=null,t.W){var T=t.W,E=T.h;n instanceof Do&&(E=T.j),E.has(n)?(T=E.get(n),r&&(T.Uf=r),u=T.fe):u=null}return u||(u=zf(n,t.stream,r||null,e.h.retryParameters,e.g.Lb)),c=0,t.ia&&(c=t.ia.h),t.ib=u,k(S,u.promise,2);case 2:if(d=S.h,t.ib=null,p=d.data,!n.aesKey){S.u(3);break}return k(S,pp(p,n.aesKey,c),4);case 4:p=S.h;case 3:return S.return(p)}})}function zf(e,t,n,r,a){var u=e instanceof ft?e:void 0,c=u?1:0;return e=Zs(e.M(),e.Ha,e.sa,r,n),e.contentType=t.type,a.request(Ri,e,{type:c,stream:t,segment:u})}function xp(e,t,n,r){var a,u;return z(function(c){if(c.g==1)return t.cc=!1,t.Be=!1,t.Hd=0,t.Vc=!0,t.Na=null,t.ia=null,t.W&&!e.o.has(t.stream)&&Li(t.W),r?(a=e.g.Md(),u=e.g.aa.getDuration(),k(c,e.g.aa.remove(t.type,a+r,u),3)):k(c,s1(e.g.aa,t.type),4);if(c.g!=3)return Jt(e.m),n?k(c,e.g.aa.flush(t.type),3):c.u(3);Jt(e.m),t.Vc=!1,t.endOfStream=!1,t.Qa||t.sb||si(e,t,0),V(c)})}function si(e,t,n){var r=t.type;(r!=Ut||e.i.has(r))&&(t.sb=new fl(function(){var a;return z(function(u){if(u.g==1)return Z(u,2),k(u,JE(e,t),4);if(u.g!=2)return K(u,0);a=ne(u),e.g&&e.g.onError(a),V(u)})}).Y(n))}function Ll(e){e.sb!=null&&(e.sb.stop(),e.sb=null)}function Dl(e){return z(function(t){return e.ib?k(t,e.ib.abort(),0):t.u(0)})}function wp(e,t,n){var r;return z(function(a){if(a.g==1)return k(a,ly(e.I),2);Jt(e.m),n.category===1&&(r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)),(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),V(a)})}function ak(e){var t,n,r,a,u,c;return z(function(d){return d.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?d.return(!1):(e.K=t,r=zn,(a=e.i.get(r.X))&&(a.lc=null,$f(e,a),Dl(a).catch(function(){})),(u=e.i.get(r.ga))&&(u.lc=null,$f(e,u),Dl(u).catch(function(){})),c=new Map,e.j.audio&&c.set(r.X,e.j.audio),e.j.video&&c.set(r.ga,e.j.video),k(d,l1(e.g.aa,c),2))):d.return(!0)})}function lk(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new $e("spatialvideoinfo",n)}else n=new $e("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function Vf(){}function Sp(e,t,n,r,a){var u=a in r,c=u?n.constructor==Object&&Object.keys(r).length==0:n.constructor==Object&&Object.keys(n).length==0,d=u||c,p=!0,S;for(S in t){var T=a+"."+S,E=u?r[a]:n[S];d||S in n?t[S]===void 0?E===void 0||d?delete e[S]:e[S]=zi(E):c?e[S]=t[S]:E.constructor==Object&&t[S]&&t[S].constructor==Object?(e[S]||(e[S]=zi(E)),T=Sp(e[S],t[S],E,r,T),p=p&&T):typeof t[S]!=typeof E||t[S]==null||typeof t[S]!="function"&&t[S].constructor!=E.constructor?(It("Invalid config, wrong type for "+T),p=!1):(typeof n[S]=="function"&&n[S].length!=t[S].length&&je("Unexpected number of arguments for "+T),e[S]=t[S]):(It("Invalid config, unrecognized key "+T),p=!1)}return p}function Hf(e,t){for(var n={},r=n,a=0,u=0;a=e.indexOf(".",a),!(0>a);)(a==0||e[a-1]!="\\")&&(u=e.substring(u,a).replace(/\\\./g,"."),r[u]={},r=r[u],u=a+1),a+=1;return r[e.substring(u).replace(/\\\./g,".")]=t,n}function ea(e,t){return e&&t}function O1(e,t){function n(c){for(var d=b(Object.keys(c)),p=d.next();!p.done;p=d.next())p=p.value,u(c[p])&&Object.keys(c[p]).length===0||a(c[p])||typeof c[p]=="function"?delete c[p]:u(c[p])&&(n(c[p]),Object.keys(c[p]).length===0&&delete c[p])}function r(c,d){return Object.keys(c).reduce(function(p,S){var T=c[S];return d.hasOwnProperty(S)?u(T)&&u(d[S])?(T=r(T,d[S]),(0<Object.keys(T).length||!u(T))&&(p[S]=T)):a(T)&&a(d[S])||Number.isNaN(T)&&Number.isNaN(d[S])||T!==d[S]&&(p[S]=T):p[S]=T,p},{})}function a(c){return Array.isArray(c)&&c.length===0}function u(c){return c&&typeof c=="object"&&!Array.isArray(c)}return e=r(e,t),n(e),e}we("shaka.util.ConfigUtils",Vf),Vf.getDifferenceFromConfigObjects=O1,Vf.convertToConfigObject=Hf,Vf.mergeConfigObjects=Sp;function ai(){}function N1(e){return e=qi(e),new Ln(e).Eb}function Pl(e,t,n){function r(d){wt(u).setUint32(c,d.byteLength,!0),c+=4,u.set(Ae(d),c),c+=d.byteLength}if(!n||!n.byteLength)throw new se(2,6,6015);var a;typeof t=="string"?a=Cd(t,!0):a=t,e=qi(e),e=Cd(e,!0);var u=new Uint8Array(12+e.byteLength+a.byteLength+n.byteLength),c=0;return r(e),r(a),r(n),u}function U1(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=qi(e).split("skd://").pop(),Pl(e,n,t))}function Cp(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}we("shaka.util.FairPlayUtils",ai),ai.commonFairPlayResponse=function(e,t){if(e===2){try{var n=fn(t.data)}catch{return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch{}e&&(t.data=ie(ri(n)))}},ai.expressplayFairPlayRequest=function(e,t){Cp(e,t)},ai.conaxFairPlayRequest=function(e,t){Cp(e,t)},ai.ezdrmFairPlayRequest=function(e,t){Cp(e,t)},ai.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Ae(t.body),e=qr(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Mi("spc="+e))},ai.expressplayInitDataTransform=function(e,t,n){return U1(e,t,n)},ai.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=qi(e).split("skd://").pop().split("?").shift(),n=h.atob(n);var r=new ArrayBuffer(2*n.length);r=Ke(r);for(var a=0,u=n.length;a<u;a++)r[a]=n.charCodeAt(a);return Pl(e,r,t)},ai.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=qi(e).split(";").pop(),Pl(e,n,t))},ai.verimatrixInitDataTransform=function(e,t,n){return U1(e,t,n)},ai.initDataTransform=Pl,ai.defaultGetContentId=N1,ai.isFairPlaySupported=function(){var e;return z(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},Z(t,2),k(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(ne(t),t.return(!1))})};function Tp(){}function ta(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:_i(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(T,E,I){return lf()&&E=="skd"&&(E=I.serverCertificate,I=N1(T),T=Pl(T,I,E)),T},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Bi(),minHdcpVersion:"",ignoreDuplicateInitData:!nf()};(Bi()||$i())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;nf()||dl()||Qt("Tizen 4")||Qt("Tizen 5")||Qt("Tizen 6")||of()||Fi()&&vd()===53||Fi()&&vd()===68||!(!Wo()||Wo()&&af()||Wo()&&Qt("Fuchsia"))||wd()&&hl()||(n="smooth",r=!0),r={retryParameters:_i(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:Gf,manifestPreprocessorTXml:Wf,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(dl()||nf()||of()||$i()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:Gf,manifestPreprocessorTXml:Wf,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var a={retryParameters:_i(),failureCallback:function(T){return ea([T])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:$i()||rf(),dontChooseCodecs:!1,shouldFixTimestampOffset:Fi()||ji()};(Fi()||ji()||Wo()||sf())&&(a.stallSkip=0);var u={trackSelectionCallback:function(T){return z(function(E){return E.return(T)})},downloadSizeCallback:function(T){var E;return z(function(I){return I.g==1?navigator.storage&&navigator.storage.estimate?k(I,navigator.storage.estimate(),3):I.return(!0):(E=I.h,I.return(E.usage+T<.95*E.quota))})},progressCallback:function(T,E){return ea([T,E])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:Ms()?.5:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(T){return ea([T],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(T,E){return ea([T,E])}};var c=!1,d=!1,p=!0;Mg()&&(d=c=!0,p=!1);var S={drm:t,manifest:r,streaming:a,mediaSource:n,offline:u,abrFactory:function(){return new yn},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:c,skipPlayDetection:d,supportsMultipleMediaElements:p}};return u.trackSelectionCallback=function(T){return z(function(E){return E.return(uk(T,S.preferredAudioLanguage,S.preferredVideoHdrLevel))})},S}function Rr(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return Sp(e,t,n||ta(),r,"")}function uk(e,t,n){var r=n;r=="AUTO"&&(r=h.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var a=e.filter(function(d){return!(d.type!="variant"||d.hdr&&d.hdr!=r)});n=[];var u=ff(t,a.map(function(d){return d.language}));u&&(n=a.filter(function(d){return qt(d.language)==u})),n.length==0&&(n=a.filter(function(d){return d.primary})),n.length==0&&(a.map(function(d){return d.language}),n=a);var c=n.filter(function(d){return d.height&&480>=d.height});for(c.length&&(c.sort(function(d,p){return p.height-d.height}),n=c.filter(function(d){return d.height==c[0].height})),t=[],n.length&&(a=Math.floor(n.length/2),n.sort(function(d,p){return d.bandwidth-p.bandwidth}),t.push(n[a])),e=b(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=Ut&&n.type!="image"||t.push(n);return t}function Gf(e){return ea([e],e)}function Wf(e){return ea([e],e)}we("shaka.util.PlayerConfiguration",Tp),Tp.mergeConfigObjects=Rr,Tp.createDefault=ta;function rr(e,t,n,r){Xt.call(this),this.L=e,this.U=t,this.xa=r.networkingEngine,this.A=n,this.o=null,this.qa=0,this.Fa=r.yc,this.C=r.vi,this.ab=r.wi,this.g=r.config,this.j=this.F=this.h=null,this.ea=!1,this.G=r.Fi,this.oa=!1,this.l=null,this.da=!1,this.i=this.B=null,this.ba=!1,this.K=new Map,this.pa=!1,this.za=r.Ei,this.Z=new Of,this.m=new Zt,this.N=null,this.s=!1,this.Da=r.yh,this.fa=null,this.Ea=r.xh,this.R=!1,this.I=[],this.H=[]}X(rr,Xt);function Ol(e,t,n){(e=t?e.H:e.I)?e.push(n):n()}function fk(e){if(e.H)for(var t=b(e.H),n=t.next();!n.done;n=t.next())n=n.value,n();e.H=null}function B1(e,t){if(e.N=t,e.R=!0,e.I){t=b(e.I);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.I=null}w=rr.prototype,w.getStartTime=function(){return this.A},w.Dc=function(){return this.L},w.gf=function(){return this.h};function ck(e){return e.ba=!0,e.i}function hk(e){return e.ea=!0,e.j}function dk(e){return e.oa=!0,e.G}w.getStats=function(){return this.Z};function pk(e){return e.da=!0,e.l}function mk(e){return e.pa=!0,e.K}w.start=function(){var e=this;(function(){var t;return z(function(n){switch(n.g){case 1:return k(n,Promise.resolve(),2);case 2:return Z(n,3),k(n,gk(e),5);case 5:return Nl(e),k(n,yk(e),6);case 6:if(Nl(e),e.o||(e.o=new Bs(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups)),e.Ea){var r=e.g.abrFactory;e.B=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Da){r=e.h.presentationTimeline.V();var a=df(e.h.variants);a=e.o.create(a),e.i.configure(e.g.abr),e.i.setVariants(Array.from(a.values())),(a=e.i.chooseVariant())&&(e.fa=a,a.video&&j1(e,a.video,r),a.audio&&j1(e,a.audio,r))}return k(n,void 0,7);case 7:Nl(e),e.m.resolve(),K(n,0);break;case 3:t=ne(n),e.m.reject(t),V(n)}})})()},w.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Xt.prototype.dispatchEvent.call(this,e)},w.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new $e("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function Nl(e){if(e.s)throw new se(2,7,7003)}function bp(e,t){e.dispatchEvent(new $e("onstatechange",new Map().set("state",t)))}function gk(e){var t,n,r,a;return z(function(u){if(u.g==1)return bp(e,"manifest-parser"),e.j||(e.F=Vy(e.L,e.U),e.j=e.F(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,bp(e,"manifest"),e.h?u.u(2):k(u,e.j.start(e.L,e.ab),3);if(u.g!=2&&(e.h=u.h),n=new $e("manifestparsed",void 0),e.dispatchEvent(n),e.h.variants.length==0)throw new se(2,4,4036);vk(e.h),r=Date.now()/1e3,a=r-t,e.Z.H=a,V(u)})}function yk(e){var t,n,r,a,u;return z(function(c){switch(c.g){case 1:bp(e,"drm-engine"),e.qa=Date.now()/1e3,e.l=e.Fa(),e.C.g=e.l,e.l.configure(e.g.drm);var d=e.C;if(t=Hg(e.h.variants,d.h.restrictions,d.i),!t){c.u(2);break}return n=new $e("trackschanged",void 0),k(c,Promise.resolve(),3);case 3:Nl(e),e.dispatchEvent(n);case 2:return r=df(e.h.variants),k(c,Ay(e.l,r,e.h.offlineSessionIds),4);case 4:return Nl(e),k(c,jy(e.C,e.h),5);case 5:if(a=c.h,!a){c.u(0);break}return u=new $e("trackschanged",void 0),k(c,Promise.resolve(),7);case 7:e.dispatchEvent(u),V(c)}})}w.configure=function(e,t){e=Hf(e,t),Rr(this.g,e)},w.getConfiguration=function(){return zi(this.g)};function j1(e,t,n){var r,a,u,c,d;z(function(p){if(p.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,a=new Nf(r,t,function(S,T,E){return zf(S,T,E||null,e.g.streaming.retryParameters,e.xa)},!1),e.K.set(t.id,a),k(p,t.createSegmentIndex(),2);u=e.A||0,(d=(c=t.segmentIndex.Ib(u))?c.current():null)||(d=t.segmentIndex.get(0)),d&&(n?d.$&&E1(a,d.$):_l(a,d.startTime)),V(p)})}w.fj=function(){return this.m},w.destroy=function(){var e=this,t,n,r;return z(function(a){switch(a.g){case 1:if(e.s=!0,!e.j||e.ea){a.u(2);break}return k(a,e.j.stop(),2);case 2:if(!e.i||e.ba){a.u(4);break}return k(a,e.i.stop(),4);case 4:if(e.G&&!e.oa&&e.G.release(),!e.l||e.da){a.u(6);break}return k(a,e.l.destroy(),6);case 6:if(0<e.K.size&&!e.pa)for(t=b(e.K.values()),n=t.next();!n.done;n=t.next())r=n.value,Li(r);V(a)}})};function vk(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}we("shaka.media.PreloadManager",rr),rr.prototype.destroy=rr.prototype.destroy,rr.prototype.waitForFinish=rr.prototype.fj;function Xf(e,t){Xt.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{wc:null,vc:na,jc:function(r,a){return is(n,"enter",r,a)}},{wc:Ul,vc:na,jc:function(r,a){return is(n,"enter",r,a)}},{wc:Bl,vc:na,jc:function(r,a){return is(n,"enter",r,a)}},{wc:na,vc:Ul,jc:function(r,a){return is(n,"exit",r,a)}},{wc:na,vc:Bl,jc:function(r,a){return is(n,"exit",r,a)}},{wc:Ul,vc:Bl,jc:function(r,a){return is(n,"skip",r,a)}},{wc:Bl,vc:Ul,jc:function(r,a){return is(n,"skip",r,a)}}],this.h=new Ct,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}X(Xf,Xt),Xf.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Xt.prototype.release.call(this)},Xf.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=b(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var a=this.g.get(r),u=e<r.startTime?Ul:e>r.endTime?Bl:na;this.g.set(r,u);for(var c=b(this.m),d=c.next();!d.done;d=c.next())d=d.value,d.wc==a&&d.vc==u&&d.jc(r,t)}}};function is(e,t,n,r){t=new $e(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var Ul=1,na=2,Bl=3;function Ep(e,t,n){var r,a,u,c,d,p,S;return z(function(T){switch(T.g){case 1:var E=new Ln(e).Pa.split("/").pop().split(".");return r=E.length==1?"":E.pop().toLowerCase(),(a=xk[r])?T.return(a):(u=0,c=Qn([e],n),Z(T,2),c.method="HEAD",k(T,t.request(u,c).promise,4));case 4:d=T.h,a=d.headers["content-type"],K(T,3);break;case 2:if(p=ne(T),!p||p.code!=1002&&p.code!=1001){T.u(3);break}return c.method="GET",k(T,t.request(u,c).promise,6);case 6:S=T.h,a=S.headers["content-type"];case 3:return T.return(a?a.toLowerCase().split(";").shift():"")}})}var xk={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function F1(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(c){return F1(c,e)}).join("");var n=[],r=700<=e.fontWeight,a=e.fontStyle=="italic",u=e.textDecoration.includes("underline");return r&&n.push(["b"]),a&&n.push(["i"]),u&&n.push(["u"]),a=e.color,a==""&&t&&(a=t.color),r="",(a=$1(a))&&(r+="."+a),a=e.backgroundColor,a==""&&t&&(a=t.backgroundColor),(t=$1(a))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(c,d){var p=b(d);return d=p.next().value,p=p.next().value,"<"+d+(p===void 0?"":p)+">"+c+"</"+d+">"},e.payload)}function $1(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function kp(e,t){var n=[];e=b(z1(e));for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,_(kp(r.nestedCues,r)));else{var a=r.clone();a.nestedCues=[],a.payload=F1(r,t),n.push(a)}return n}function z1(e){var t=[];e=b(e);for(var n=e.next(),r={};!n.done;r={Me:void 0},n=e.next())r.Me=n.value,t.some(function(a){return function(u){return On(a.Me,u)}}(r))||t.push(r.Me);return t}function wk(e){function t(r){for(var a=5381,u=r.length;u;)a=33*a^r.charCodeAt(--u);return(a>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function No(e,t){this.g=null;for(var n=b(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.kind!=="metadata"&&r.kind!=="chapters"&&(r.mode="disabled",r.label==t&&(this.g=r));this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}w=No.prototype,w.configure=function(){},w.remove=function(e,t){return this.g?(V1(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},w.append=function(e){var t=kp(e),n=[];e=this.g.cues?Array.from(this.g.cues):[],t=b(t);for(var r=t.next(),a={};!r.done;a={hd:void 0},r=t.next())a.hd=r.value,e.some(function(u){return function(c){return c.startTime==u.hd.startTime&&c.endTime==u.hd.endTime&&c.text==u.hd.payload}}(a))||(r=wk(a.hd))&&n.push(r);for(e=n.slice().sort(function(u,c){return u.startTime!=c.startTime?u.startTime-c.startTime:u.endTime!=c.endTime?u.endTime-c.startTime:"line"in VTTCue.prototype?n.indexOf(c)-n.indexOf(u):n.indexOf(u)-n.indexOf(c)}),e=b(e),t=e.next();!t.done;t=e.next())this.g.addCue(t.value)},w.destroy=function(){return this.g&&(V1(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},w.isTextVisible=function(){return this.g.mode=="showing"},w.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function V1(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=b(Array.from(e.cues)),a=r.next();!a.done;a=r.next())(a=a.value)&&t(a)&&e.removeCue(a);e.mode=n}we("shaka.text.SimpleTextDisplayer",No),No.prototype.setTextVisibility=No.prototype.setTextVisibility,No.prototype.isTextVisible=No.prototype.isTextVisible,No.prototype.destroy=No.prototype.destroy,No.prototype.append=No.prototype.append,No.prototype.remove=No.prototype.remove,No.prototype.configure=No.prototype.configure;function Uo(){}w=Uo.prototype,w.configure=function(){},w.remove=function(){},w.append=function(){},w.destroy=function(){},w.isTextVisible=function(){return!1},w.setTextVisibility=function(){},we("shaka.text.StubTextDisplayer",Uo),Uo.prototype.setTextVisibility=Uo.prototype.setTextVisibility,Uo.prototype.isTextVisible=Uo.prototype.isTextVisible,Uo.prototype.destroy=Uo.prototype.destroy,Uo.prototype.append=Uo.prototype.append,Uo.prototype.remove=Uo.prototype.remove,Uo.prototype.configure=Uo.prototype.configure;function H1(){}function oa(e){for(;e.firstChild;)e.removeChild(e.firstChild)}we("shaka.util.Dom",H1),H1.removeAllChildren=oa;function Bo(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||Ot("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new Mt(function(){r.A.paused||ia(r)}).Sa(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Ct,this.j.D(document,"fullscreenchange",function(){ia(r,!0)}),this.j.D(this.A,"seeking",function(){ia(r,!0)}),this.j.D(this.A,"resize",function(){var a=r.A,u=a.videoWidth;a=a.videoHeight,u&&a?r.l=u/a:r.l=null}),this.o=null,"ResizeObserver"in h&&(this.o=new ResizeObserver(function(){ia(r,!0)}),this.o.observe(this.g)),this.B=new Map}w=Bo.prototype,w.configure=function(e){this.C&&this.C.Sa(e.captionsUpdatePeriod)},w.append=function(e){var t=[].concat(_(this.h));e=b(z1(e));for(var n=e.next(),r={};!n.done;r={Ne:void 0},n=e.next())r.Ne=n.value,t.some(function(a){return function(u){return On(u,a.Ne)}}(r))||this.h.push(r.Ne);ia(this)},w.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},w.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),ia(this,n>this.h.length),!0},w.isTextVisible=function(){return this.m},w.setTextVisibility=function(e){this.m=e};function Sk(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function G1(e,t,n,r,a){var u=!1,c=[],d=[];t=b(t);for(var p=t.next();!p.done;p=t.next()){p=p.value,a.push(p);var S=e.i.get(p),T=p.startTime<=r&&p.endTime>r,E=S?S.qh:null;S&&(c.push(S.Oe),S.qc&&c.push(S.qc),T||(u=!0,e.i.delete(p),S=null)),T&&(d.push(p),S?Sk(e,E)||(u=!0):(Ck(e,p,a),S=e.i.get(p),E=S.qh,u=!0)),0<p.nestedCues.length&&E&&G1(e,p.nestedCues,E,r,a),a.pop()}if(u){for(r=b(c),a=r.next();!a.done;a=r.next())a=a.value,a.parentElement&&a.parentElement.removeChild(a);for(d.sort(function(I,A){return I.startTime!=A.startTime?I.startTime-A.startTime:I.endTime-A.endTime}),d=b(d),r=d.next();!r.done;r=d.next())r=e.i.get(r.value),r.qc?(r.qc.contains(n)&&r.qc.removeChild(n),n.appendChild(r.qc),r.qc.appendChild(r.Oe)):n.appendChild(r.Oe)}}function ia(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=b(e.B.values());for(var r=t.next();!r.done;r=t.next())oa(r.value);oa(e.g),e.i.clear(),e.B.clear()}e.m&&G1(e,e.h,e.g,n,[])}}function Ck(e,t,n){var r=1<n.length,a=r?"span":"div";t.lineBreak&&(a="br"),t.rubyTag&&(a=t.rubyTag),r=!r&&0<t.nestedCues.length;var u=document.createElement(a);if(a!="br"&&bk(e,u,t,n,r),n=null,t.region&&t.region.id){var c=t.region,d=e.l===4/3?2.5:1.9;if(n=c.id+"_"+c.width+"x"+c.height+(c.heightUnits==ce?"%":"px")+"-"+c.viewportAnchorX+"x"+c.viewportAnchorY+(c.viewportAnchorUnits==ce?"%":"px"),e.B.has(n))n=e.B.get(n);else{a=document.createElement("span");var p=c.heightUnits==ce?"%":"px",S=c.widthUnits==ce?"%":"px",T=c.viewportAnchorUnits==ce?"%":"px";a.id="shaka-text-region---"+n,a.classList.add("shaka-text-region"),a.style.position="absolute";var E=c.height,I=c.width;c.heightUnits===2&&(E=5.33*c.height,p="%"),c.widthUnits===2&&(I=c.width*d,S="%"),a.style.height=E+p,a.style.width=I+S,c.viewportAnchorUnits===2?(d=c.viewportAnchorY/75*100,p=c.viewportAnchorX/(e.l===4/3?160:210)*100,d-=c.regionAnchorY*E/100,p-=c.regionAnchorX*I/100,a.style.top=d+"%",a.style.left=p+"%"):(a.style.top=c.viewportAnchorY-c.regionAnchorY*E/100+T,a.style.left=c.viewportAnchorX-c.regionAnchorX*I/100+T),c.heightUnits!==0&&c.widthUnits!==0&&c.viewportAnchorUnits!==0&&(c=Math.max(0,Math.min(100-(parseInt(a.style.width.slice(0,-1),10)||0),parseInt(a.style.left.slice(0,-1),10)||0)),a.style.top=Math.max(0,Math.min(100-(parseInt(a.style.height.slice(0,-1),10)||0),parseInt(a.style.top.slice(0,-1),10)||0))+"%",a.style.left=c+"%"),a.style.display="flex",a.style.flexDirection="column",a.style.alignItems="center",a.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(n,a),n=a}}a=u,r&&(a=document.createElement("span"),a.classList.add("shaka-text-wrapper"),a.style.backgroundColor=t.backgroundColor,a.style.lineHeight="normal",u.appendChild(a)),e.i.set(t,{Oe:u,qh:a,qc:n})}function Tk(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==wn?n:e==="left"||e==="start"&&t===fo||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===fo?"line-right":"center"}function bk(e,t,n,r,a){var u=t.style,c=n.nestedCues.length==0,d=1<r.length;u.whiteSpace="pre-wrap";var p=n.payload.replace(/\s+$/g,function(T){return" ".repeat(T.length)});if(u.webkitTextStrokeColor=n.textStrokeColor,u.webkitTextStrokeWidth=n.textStrokeWidth,u.color=n.color,u.direction=n.direction,u.opacity=n.opacity,u.paddingLeft=Ap(n.linePadding,n,e.s),u.paddingRight=Ap(n.linePadding,n,e.s),u.textCombineUpright=n.textCombineUpright,u.textShadow=n.textShadow,n.backgroundImage)u.backgroundImage="url('"+n.backgroundImage+"')",u.backgroundRepeat="no-repeat",u.backgroundSize="contain",u.backgroundPosition="center",n.backgroundColor&&(u.backgroundColor=n.backgroundColor),u.width="100%",u.height="100%";else{if(n.nestedCues.length)var S=t;else S=document.createElement("span"),t.appendChild(S);n.border&&(S.style.border=n.border),!a&&((t=W1(r,function(T){return T.backgroundColor}))?S.style.backgroundColor=t:p&&(S.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=W1(r,function(T){return T.fontFamily}))&&(S.style.fontFamily=t),p&&(S.textContent=p)}d&&!r[r.length-1].isContainer?u.display="inline":(u.display="flex",u.flexDirection="column",u.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(u.width="100%",u.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(u.width="100%",u.alignItems="end"),u.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),c||(u.margin="0"),u.fontFamily=n.fontFamily,u.fontWeight=n.fontWeight.toString(),u.fontStyle=n.fontStyle,u.letterSpacing=n.letterSpacing,u.fontSize=Ap(n.fontSize,n,e.s),r=n.line,r!=null&&(c=n.lineInterpretation,c==Pe&&(c=1,d=16,e.l&&1>e.l&&(d=32),r=0>r?100+r/d*100:r/d*100),c==1&&(u.position="absolute",n.writingMode==rt?(u.width="100%",n.lineAlign==io?u.top=r+"%":n.lineAlign=="end"&&(u.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(u.height="100%",n.lineAlign==io?u.left=r+"%":n.lineAlign=="end"&&(u.right=100-r+"%")):(u.height="100%",n.lineAlign==io?u.right=r+"%":n.lineAlign=="end"&&(u.left=100-r+"%")))),u.lineHeight=n.lineHeight,e=Tk(n),e=="line-left"?(u.cssFloat="left",n.position!==null&&(u.position="absolute",n.writingMode==rt?(u.left=n.position+"%",u.width="auto"):u.top=n.position+"%")):e=="line-right"?(u.cssFloat="right",n.position!==null&&(u.position="absolute",n.writingMode==rt?(u.right=100-n.position+"%",u.width="auto"):u.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(u.position="absolute",n.writingMode==rt?(u.left=n.position+"%",u.width="auto"):u.top=n.position+"%"),u.textAlign=n.textAlign,u.textDecoration=n.textDecoration.join(" "),u.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&u.writingMode==n.writingMode||(u.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==rt?u.width=n.size+"%":u.height=n.size+"%")}function Ap(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var a=r.value;switch(r.unit){case"%":return a/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*a/t.cellResolution.rows+"px";default:return e}}function W1(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}we("shaka.text.UITextDisplayer",Bo),Bo.prototype.setTextVisibility=Bo.prototype.setTextVisibility,Bo.prototype.isTextVisible=Bo.prototype.isTextVisible,Bo.prototype.remove=Bo.prototype.remove,Bo.prototype.destroy=Bo.prototype.destroy,Bo.prototype.append=Bo.prototype.append,Bo.prototype.configure=Bo.prototype.configure;function Ek(e,t){function n(u){for(var c=u,d=b(t),p=d.next();!p.done;p=d.next())p=p.value,p.end&&p.start<u&&(c+=p.end-p.start);return u=Math.floor(c/3600),d=Math.floor(c/60%60),p=Math.floor(c%60),c=Math.floor(1e3*c%1e3),(10>u?"0":"")+u+":"+(10>d?"0":"")+d+":"+(10>p?"0":"")+p+"."+(100>c?10>c?"00":"0":"")+c}var r=kp(e);e=`WEBVTT

`,r=b(r);for(var a=r.next();!a.done;a=r.next())a=a.value,e+=n(a.startTime)+" --> "+n(a.endTime)+function(u){var c=[];switch(u.textAlign){case"left":c.push("align:left");break;case"right":c.push("align:right");break;case gn:c.push("align:middle");break;case"start":c.push("align:start");break;case"end":c.push("align:end")}switch(u.writingMode){case"vertical-lr":c.push("vertical:lr");break;case"vertical-rl":c.push("vertical:rl")}return c.length?" "+c.join(" "):""}(a)+`
`,e+=a.payload+`

`;return e}we("shaka.text.WebVttGenerator",function(){});function X1(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}X1.prototype.configure=function(e){this.g=e};function kk(e){e.i=!1,e.l=!0,e.j=!1}function Ak(e,t,n){try{if(!e.g.enabled)return t;var r=Ip(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var a=qf;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":a=Qf;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":a=q1;break e}a=void 0}r.ot=a,r.su=!0;var u=Kf(r);return Mp(t,u)}catch(c){return at("CMCD_SRC_ERROR","Could not generate src CMCD data.",c),t}}function Ip(e){return e.g.sessionId||(e.g.sessionId=h.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function ra(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,Ip(e)),n.pr=e.h.eb();var a=n.ot===Yf||n.ot===Qf;if(e.j&&a&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=Ik(e,n),r)r=Lk(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var u=Kf(e);u&&(t.uris=t.uris.map(function(c){return Mp(c,u)}))}}}function Ik(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,a){return n.includes(a)&&(r[a]=t[a]),r},{}):t}function Mk(e){if(e.type===0)return Dk;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?Qf:Yf;if(t=="audio")return qf;if(t=="text")return e.mimeType==="application/mp4"?Zf:_p}}function _k(e,t){if(t=e.h.wb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function K1(e,t){if(t=e.h.wb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function Rk(e,t){var n=e.h.ic();if(!n.length)return NaN;e=n[0],n=b(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case Yf:return e.videoBandwidth||NaN;case qf:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Kf(e){function t(E){return 100*n(E/100)}function n(E){return Math.round(E)}function r(E){return!Number.isNaN(E)&&E!=null&&E!==""&&E!==!1}var a=[],u={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(E){return encodeURIComponent(E)},rtp:t,tb:n},c=Object.keys(e||{}).sort();c=b(c);for(var d=c.next();!d.done;d=c.next()){d=d.value;var p=e[d];if(r(p)&&(d!=="v"||p!==1)&&(d!="pr"||p!==1)){var S=u[d];S&&(p=S(p)),S=typeof p;var T=void 0;T=S==="string"&&d!=="ot"&&d!=="sf"&&d!=="st"?d+"="+JSON.stringify(p):S==="boolean"?d:S==="symbol"?d+"="+p.description:d+"="+p,a.push(T)}}return a.join(",")}function Lk(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],a=[{},{},{},{}],u={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=b(t);for(var c=t.next();!c.done;c=t.next())c=c.value,a[u[c]!=null?u[c]:1][c]=e[c];for(e=0;e<a.length;e++)(u=Kf(a[e]))&&(n["CMCD-"+r[e]]=u);return n}function Mp(e,t){return!t||e.includes("offline:")?e:(e=new Ln(e),e.g.set("CMCD",t),e.toString())}var q1="m",qf="a",Yf="v",Qf="av",Dk="i",_p="c",Zf="tt";we("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Kj:"s",OTHER:"o"});function li(e){this.h=e,this.g=null}w=li.prototype,w.configure=function(e){this.h=e},w.zg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(Z1)?1e3*this.g.get(Z1):null},w.xg=function(){return this.h.enabled&&this.g&&this.g.has(Q1)?1e3*this.g.get(Q1):null},w.Yh=function(){return this.h.enabled&&this.g&&this.g.has(J1)?this.g.get(J1):null},w.Zh=function(){return this.h.enabled&&this.g&&this.g.has(ev)?this.g.get(ev):null},w.getBandwidthEstimate=function(e){var t=this.xg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function Y1(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}we("shaka.util.CmsdManager",li),li.prototype.getBandwidthEstimate=li.prototype.getBandwidthEstimate,li.prototype.getRoundTripTime=li.prototype.Zh,li.prototype.getResponseDelay=li.prototype.Yh,li.prototype.getEstimatedThroughput=li.prototype.xg,li.prototype.getMaxBitrate=li.prototype.zg;var Q1="etp",Z1="mb",J1="rd",ev="rtt";function tv(){this.g=null,this.h=[]}function Rp(e,t){return z(function(n){if(n.g==1)return e.g?k(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,V(n)})}tv.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function Te(e,t){Xt.call(this);var n=this;this.l=$p,this.de=this.h=null,this.oa=!1,this.qe=new Ct,this.gd=new Ct,this.m=new Ct,this.Fa=new Ct,this.ub=new Ct,this.C=this.G=this.B=this.H=null,this.te=0,this.Z=new tv,this.pa=this.ag=this.da=this.i=this.ab=this.F=this.j=this.Zc=this.K=this.eg=this.ea=this.N=this.dd=this.L=this.he=this.I=this.Fb=null,this.Ea=!1,this.xa=this.o=null,this.cg=1e9,this.qd=[],this.U=NaN,this.g=sr(this),this.R=null,this.ze=-1,this.Da=null,this.fa={width:1/0,height:1/0},this.be=new Hd(this.g,this.fa,null),this.ke=[],this.s=null,this.za=new Bs(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Db=this.g.preferredTextLanguage,this.pd=this.g.preferredTextRole,this.od=this.g.preferForcedSubs,this.md=[],t&&t(this),this.N=Wk(this),this.ea=new li(this.g.cmsd),this.H=lv(this),this.H.Pf(this.g.streaming.forceHTTP),this.H.Qf(this.g.streaming.forceHTTPS),this.Gb=this.ba=this.A=null,this.Ce=!1,this.dg=new Mt(function(){return z(function(r){if(r.g==1)return n.ba?k(r,n.Rb(n.Gb,!0),3):r.u(0);if(r.g!=4)return k(r,n.load(n.ba),4);n.Ce?n.Gb.pause():n.Gb.play(),n.ba=null,n.Ce=!1,V(r)})}),ic&&(this.A=ic(),this.A.configure(this.g.ads),this.ub.D(this.A,"ad-content-pause-requested",function(r){var a;return z(function(u){if(u.g==1)return n.dg.stop(),n.ba?u.u(0):(n.Gb=n.h,n.Ce=n.h.ended,a=r.saveLivePosition||!1,k(u,n.qg(!0,a),3));n.ba=u.h,V(u)})}),this.ub.D(this.A,"ad-content-resume-requested",function(r){if(r=r.offset||0,n.ba){var a=n.ba;a.A&&r&&(a.A+=r)}n.dg.Y(.1)}),this.ub.D(this.A,"ad-content-attach-requested",function(){return z(function(r){return n.h||!n.Gb?r.u(0):k(r,n.Rb(n.Gb,!0),0)})})),this.qe.D(h,"online",function(){Bp(n),n.If()}),this.je=new Mt(function(){for(var r=Date.now()/1e3,a=!1,u=!0,c=b(n.i.variants),d=c.next();!d.done;d=c.next())d=d.value,0<d.disabledUntilTime&&d.disabledUntilTime<=r&&(d.disabledUntilTime=0,a=!0),0<d.disabledUntilTime&&(u=!1);u&&n.je.stop(),a&&aa(n,!1,void 0,!1,!1)}),this.qa=null,e&&(Ot("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Rb(e,!0))}X(Te,Xt);function Jf(e){e.K!=null&&(t1(e.K),e.K.release(),e.K=null)}function Pk(e,t){t.lcevc.enabled?(Jf(e),e.K==null&&(e.K=new Al(e.h,e.eg,t.lcevc),e.G&&(e.G.Z=e.K))):Jf(e)}function cn(e,t){return new $e(e,t)}w=Te.prototype,w.destroy=function(){var e=this,t;return z(function(n){switch(n.g){case 1:return e.l==Di?n.return():(Jf(e),t=e.detach(),e.l=Di,k(n,t,2));case 2:return k(n,e.Qe(),3);case 3:if(e.qe&&(e.qe.release(),e.qe=null),e.gd&&(e.gd.release(),e.gd=null),e.m&&(e.m.release(),e.m=null),e.Fa&&(e.Fa.release(),e.Fa=null),e.ub&&(e.ub.release(),e.ub=null),e.xa=null,e.g=null,e.s=null,e.de=null,e.N=null,e.ea=null,!e.H){n.u(4);break}return k(n,e.H.destroy(),5);case 5:e.H=null;case 4:e.o&&(e.o.release(),e.o=null),Xt.prototype.release.call(e),V(n)}})};function sa(e,t){e.dispatchEvent(cn("onstatechange",new Map().set("state",t)))}w.Rb=function(e,t){t=t===void 0?!0:t;var n=this,r,a,u;return z(function(c){switch(c.g){case 1:if(n.l==Di)throw new se(2,7,7e3);if(r=n.h&&n.h==e,!n.h||n.h==e){c.u(2);break}return k(c,n.detach(),2);case 2:return k(c,Lp(n,"attach"),4);case 4:if(c.h)return c.return();if(Z(c,5,6),r||(sa(n,"attach"),a=function(){var d=jp(n,!1);d&&la(n,d)},n.gd.D(e,"error",a),n.h=e),!t||!Ii()||n.G){c.u(6);break}return k(c,Dp(n),6);case 6:W(c),n.Z.release(),J(c,0);break;case 5:return u=ne(c),k(c,n.detach(),10);case 10:throw u}})},w.zh=function(e){this.eg=e},w.detach=function(e){e=e===void 0?!1:e;var t=this;return z(function(n){if(n.g==1){if(t.l==Di)throw new se(2,7,7e3);return k(n,t.bc(!1,e),2)}if(n.g!=3)return k(n,Lp(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.gd.Ra(),t.h=null),sa(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Z.release()}V(n)})};function Lp(e,t){var n;return z(function(r){return r.g==1?(n=++e.te,k(r,Rp(e.Z,t),2)):n!=e.te?(e.Z.release(),r.return(!0)):r.return(!1)})}w.bc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,a,u,c,d,p,S,T,E,I;return z(function(A){switch(A.g){case 1:return n.l!=Di&&(n.l=$p),k(A,Lp(n,"unload"),2);case 2:return A.h?A.return():(oe(A,3),n.Ea=!1,sa(n,"unload"),e&&!Ii()&&(e=!1),Jf(n),r=n.md.map(function(R){return R()}),n.md=[],k(A,Promise.all(r),5));case 5:if(n.dispatchEvent(cn("unloading")),n.dd&&(n.dd.release(),n.dd=null),n.h&&(n.m.Ra(),n.Fa.Ra()),n.je.stop(),n.Fb&&(n.Fb.release(),n.Fb=null),n.he&&(n.he.stop(),n.he=null),!n.F){A.u(6);break}return k(A,n.F.stop(),7);case 7:n.F=null,n.ab=null;case 6:if(!n.o){A.u(8);break}return k(A,n.o.stop(),8);case 8:if(!n.j){A.u(10);break}return k(A,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.I&&(n.I.release(),n.I=null),n.C&&(n.C.release(),n.C=null),!lf("webkit")||!n.B){A.u(12);break}return k(A,n.B.destroy(),13);case 13:n.B=null;case 12:if(!n.G){A.u(14);break}return k(A,n.G.destroy(),15);case 15:n.G=null;case 14:if(n.A&&!t&&n.A.onAssetUnload(),n.ba&&!t&&(n.ba.destroy(),n.ba=null),t||n.dg.stop(),n.N&&kk(n.N),n.ea&&(n.ea.g=null),n.h&&oa(n.h),!n.h||!n.h.src){A.u(16);break}return k(A,new Promise(function(R){return new Mt(R).Y(.1)}),17);case 17:n.h.removeAttribute("src"),n.h.load();case 16:if(!n.B){A.u(18);break}return k(A,n.B.destroy(),19);case 19:n.B=null;case 18:if(n.qa&&n.da!=n.qa.Dc()&&(n.qa.s||n.qa.destroy(),n.qa=null),n.da=null,n.ag=null,n.L=null,n.i){for(a=b(n.i.variants),u=a.next();!u.done;u=a.next())for(c=u.value,d=b([c.audio,c.video]),p=d.next();!p.done;p=d.next())(S=p.value)&&S.segmentIndex&&S.segmentIndex.release();for(T=b(n.i.textStreams),E=T.next();!E.done;E=T.next())I=E.value,I.segmentIndex&&I.segmentIndex.release()}n.g.streaming.clearDecodingCache&&(ey={},tf.clear()),n.i=null,n.s=new Of,n.bg=null,n.Da=null,n.R=null,n.ze=-1,n.qd=[],n.U=NaN,Up(n);case 3:W(A),n.Z.release(),J(A,4);break;case 4:if(e&&Ii()&&!n.G&&n.h)return k(A,Dp(n),0);A.u(0)}})},w.ej=function(e){this.pa=e},w.load=function(e,t,n){t=t===void 0?null:t;var r=this,a,u,c,d,p,S,T,E,I,A,R,D,L;return z(function(F){switch(F.g){case 1:if(r.l==Di)throw new se(2,7,7e3);return a=null,u="",e instanceof rr?(a=e,u=a.Dc()||""):u=e||"",k(F,Rp(r.Z,"load"),2);case 2:if(r.Z.release(),!r.h)throw new se(2,7,7002);if(!r.da){F.u(3);break}return r.da=u,k(F,r.bc(!1),3);case 3:if(c=++r.te,d=function(){return z(function(U){if(U.g==1)return r.te==c?U.u(0):a?k(U,a.destroy(),3):U.u(3);throw new se(2,7,7e3)})},p=function(U,q){return z(function(N){switch(N.g){case 1:return oe(N,2),k(N,Rp(r.Z,q),4);case 4:return k(N,d(),5);case 5:return k(N,U(),6);case 6:return k(N,d(),7);case 7:a&&r.g&&(a.g=r.g);case 2:W(N),r.Z.release(),J(N,0)}})},Z(F,5,6),t==null&&a&&(t=a.getStartTime()),r.pa=t,r.Ea=!1,r.dispatchEvent(cn("loading")),a){n=a.U,F.u(8);break}if(n){F.u(8);break}return k(F,p(function(){return z(function(U){if(U.g==1)return k(U,rv(r,u),2);n=U.h,V(U)})},"guessMimeType_"),8);case 8:if(S=!!a,a){B1(a,r),r.s=a.getStats(),F.u(11);break}return k(F,ov(r,u,t,n,!0),12);case 12:(a=F.h)?(B1(a,r),r.s=a.getStats(),a.start(),a.m.catch(function(){})):r.s=new Of;case 11:if(T=!a,E=Date.now()/1e3,r.s=a?a.getStats():new Of,r.da=u,r.ag=n||null,T)return k(F,p(function(){return z(function(U){return k(U,Bk(r,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(r.G){F.u(15);break}return k(F,p(function(){return z(function(U){return k(U,Dp(r),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return k(F,p(function(){return z(function(U){return k(U,a.m,0)})},"waitForFinish"),17);case 17:return r.g=a.getConfiguration(),r.be=a.C,r.ab=a.F,r.F=hk(a),r.F&&r.F.setMediaElement&&r.h&&r.F.setMediaElement(r.h),r.dd=dk(a),r.Zc=a.za,r.i=a.gf(),(I=a.o)&&(r.za=I),S&&r.h&&r.h.nodeName==="AUDIO"&&(Ok(r),r.configure("manifest.disableVideo",!0)),r.B=pk(a),k(F,p(function(){return z(function(U){return k(U,r.B.Rb(r.h),0)})},"drmEngine_.attach"),18);case 18:return!(A=a.B)||r.xa&&r.xa==A||(r.o=ck(a),r.xa=a.B,typeof r.o.setMediaElement!="function"&&(Ot("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(Ot("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(Ot("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),R=mk(a),D=a.fa,k(F,p(function(){return z(function(U){return k(U,Uk(r,E,D,R),0)})},"loadInner_"),19);case 19:fk(a),F.u(14);break;case 20:return k(F,p(function(){return z(function(U){return k(U,jk(r,E,n),0)})},"srcEqualsInner_"),14);case 14:r.dispatchEvent(cn("loaded"));case 6:if(W(F),!a){F.u(22);break}return k(F,a.destroy(),22);case 22:r.qa=null,J(F,0);break;case 5:if(L=ne(F),!L||L.code==7e3){F.u(24);break}return k(F,r.bc(!1),24);case 24:throw L}})};function Ok(e){for(var t=b(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}w.aj=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r;return z(function(a){return a.g==1?k(a,nv(n),2):a.g!=3?(r=a.h,k(a,n.bc(e,t),3)):a.return(r)})},w.qg=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,r;return z(function(a){return a.g==1?k(a,nv(n,t),2):a.g!=3?(r=a.h,k(a,n.detach(e),3)):a.return(r)})};function nv(e,t){t=t===void 0?!1:t;var n,r;return z(function(a){if(a.g==1)return n=null,e.i&&e.F&&e.ab&&e.da?(r=e.h.currentTime,e.V()&&!t&&(r=null),k(a,iv(e,e.da,r,e.ag,!0,!1,!1),3)):a.u(2);if(a.g!=2){n=a.h,e.ke.push(n),e.F&&e.F.setMediaElement&&e.F.setMediaElement(null);var u=n,c=e.F,d=e.ab;u.h=e.i,u.j=c,u.F=d,u=n,c=e.xa,u.i=e.o,u.B=c,n.o=e.za,n.start(),e.i=null,e.F=null,e.ab=null,e.o=null,e.xa=null}return a.return(n)})}w.preload=function(e,t,n){t=t===void 0?null:t;var r=this,a;return z(function(u){return u.g==1?k(u,ov(r,e,t,n),2):((a=u.h)?a.start():la(r,new se(2,7,7005)),u.return(a))})},w.Qe=function(){var e=this,t,n,r,a;return z(function(u){for(t=[],n=b(e.ke),r=n.next();!r.done;r=n.next())a=r.value,a.s||t.push(a.destroy());return e.ke=[],k(u,Promise.all(t),0)})};function ov(e,t,n,r,a){a=a===void 0?!1:a;var u,c,d;return z(function(p){return p.g==1?r?p.u(2):k(p,rv(e,t),3):(p.g!=2&&(r=p.h),Nk(e,r)?p.return(null):(u=!1,c=!0,a&&(e.o&&e.xa==e.g.abrFactory&&(c=!1),e.h&&e.h.nodeName==="AUDIO"&&(u=!0)),d=iv(e,t,n,r||null,!a,u,c),a||(d=d.then(function(S){return e.ke.push(S),S})),p.return(d)))})}function iv(e,t,n,r,a,u,c){a=a===void 0?!0:a,u=u===void 0?!1:u,c=c===void 0?!0:c;var d,p,S,T,E,I,A,R,D,L,F,U,q,N,G;return z(function(Q){return Q.g==1?(d=null,p=zi(e.g),u&&(p.manifest.disableVideo=!0),S=function(){return d.R&&d.s?null:d},T=function(){return S()?S().getConfiguration():e.g},E=function(re,ae){S()?d.configure(re,ae):e.configure(re,ae)},e.fa.width!=1/0||e.fa.height!=1/0?Q.u(2):k(Q,Rg(),3)):(Q.g!=2&&(I=Q.h,e.fa.width=I.width,e.fa.height=I.height),A=new Hd(p,e.fa,null),R={networkingEngine:e.H,filter:function(re){var ae,me;return z(function(le){if(le.g==1)return k(le,jy(A,re),2);if(le.g!=4)return ae=le.h,ae?(me=cn("trackschanged"),k(le,Promise.resolve(),4)):le.u(0);d.dispatchEvent(me),V(le)})},makeTextStreamsForClosedCaptions:function(re){return qk(e,re)},onTimelineRegionAdded:function(re){var ae=d.G;e:{for(var me=b(ae.g),le=me.next();!le.done;le=me.next())if(le=le.value,le.schemeIdUri==re.schemeIdUri&&le.id==re.id&&le.startTime==re.startTime&&le.endTime==re.endTime){me=le;break e}me=null}me==null&&(ae.g.add(re),re=new $e("regionadd",new Map([["region",re]])),ae.dispatchEvent(re))},onEvent:function(re){return d.dispatchEvent(re)},onError:function(re){return d.onError(re)},isLowLatencyMode:function(){return T().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return T().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){E("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&d.R&&e.j.updateDuration()},newDrmInfo:function(re){var ae=d.l,me=ae?ae.g:null;me&&ae.s&&Gd(A,me.keySystem,re)},onManifestUpdated:function(){var re=new Map().set("isLive",e.V());d.dispatchEvent(cn("manifestupdated",re)),Ol(d,!1,function(){e.A&&e.A.onManifestUpdated(e.V())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(re,ae,me,le){var ue=re;re=="com.apple.hls.interstitial"&&(ue="com.apple.quicktime.HLS",re={startTime:ae,endTime:me,values:le},e.A)&&e.A.onInterstitialMetadata(e,e.h,re),le=b(le),re=le.next();for(var de={};!re.done;de={Pg:void 0},re=le.next())de.Pg=re.value,Ol(d,!1,function(be){return function(){Pp(e,ae,me,ue,be.Pg)}}(de))},disableStream:function(re){return e.disableStream(re,e.g.streaming.maxDisabledTime)}},D=new hp(function(){return e.Ob()}),D.addEventListener("regionadd",function(re){var ae=re.region;Fl(e,"timelineregionadded",ae,d),Ol(d,!1,function(){e.A&&e.A.onDashTimedMetadata(ae)})}),L=null,p.streaming.observeQualityChanges&&(L=new Uf(function(){return e.wb()}),L.addEventListener("qualitychange",function(re){Sv(e,re.quality,re.position)}),L.addEventListener("audiotrackchange",function(re){Sv(e,re.quality,re.position,!0)})),F=!0,U={Lb:e.H,onError:function(re){return d.onError(re)},ee:function(re){Ol(d,!0,function(){e:{var ae=re,me=cn("keystatuschanged");e.dispatchEvent(me);var le=Object.keys(ae);le.length==1&&le[0]==""&&(le=["00"],ae={"00":ae[""]}),me=le.length==1&&le[0]=="00";var ue=!1;if(le.length){le=b(e.i.variants);for(var de=le.next();!de.done;de=le.next()){de=de.value;var be=[];de.audio&&be.push(de.audio),de.video&&be.push(de.video),be=b(be);for(var Ce=be.next();!Ce.done;Ce=be.next()){var ke=Ce.value;if(Ce=de.allowedByKeySystem,ke.keyIds.size){de.allowedByKeySystem=!0,ke=b(ke.keyIds);for(var Oe=ke.next();!Oe.done;Oe=ke.next())Oe=Oe.value,((Oe=ae[me?"00":Oe])||e.B.F)&&(de.allowedByKeySystem=de.allowedByKeySystem&&!!Oe&&!zy.includes(Oe))}Ce!=de.allowedByKeySystem&&(ue=!0)}}}if(ue&&(ui(e),!ss(e)))break e;(ae=e.j.j)&&!ae.allowedByKeySystem&&aa(e)}})},onExpirationUpdated:function(re,ae){var me=cn("expirationupdated");d.dispatchEvent(me),(me=d.j)&&me.onExpirationUpdated&&me.onExpirationUpdated(re,ae)},onEvent:function(re){d.dispatchEvent(re),re.type=="drmsessionupdate"&&F&&(F=!1,re=Date.now()/1e3-d.qa,(e.s||d.getStats()).j=re,e.K&&t1(e.K))}},q=lv(e,S),hy(e.H,q),N=function(){return e.yc(U)},G={config:p,wi:R,Fi:D,Ei:L,yc:N,vi:A,networkingEngine:q,yh:a,xh:c},d=new rr(t,r,n,G),Q.return(d))})}function rv(e,t){var n,r;return z(function(a){return a.g==1?(n=e.g.manifest.retryParameters,k(a,Ep(t,e.H,n),2)):(r=a.h,r=="application/x-mpegurl"&&Ms()&&(r="application/vnd.apple.mpegurl"),a.return(r))})}function Nk(e,t){if(!Ii())return!0;if(t){if((e.h||_g()).canPlayType(t)=="")return!1;if(!(Ii()&&t in Ci))return!0;if(Ng(t))return Ms()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls}return!1}function Dp(e){var t,n,r,a,u;return z(function(c){if(c.g==1)return sa(e,"media-source"),t=e.g.textDisplayFactory,n=t(),n.configure?n.configure(e.g.textDisplayer):Ot("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.bg=t,r=Gk(e.h,n,{Qh:function(){return e.keySystem()},onMetadata:function(d,p,S){sv(e,d,p,S)}},e.K),r.configure(e.g.mediaSource),a=e.g.manifest,u=a.segmentRelativeVttTiming,r.fa=u,k(c,r.L,2);e.G=r,V(c)})}function Uk(e,t,n,r){var a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me;return z(function(le){switch(le.g){case 1:sa(e,"load"),a=e.h,e.I=new Ml({Nd:function(){return a.playbackRate},hc:function(){return a.defaultPlaybackRate},Rf:function(ue){a.playbackRate=ue},Lg:function(ue){a.currentTime+=ue}}),u=function(){return ec(e)},c=function(){return mv(e)},e.m.D(a,"playing",u),e.m.D(a,"pause",u),e.m.D(a,"ended",u),e.m.D(a,"ratechange",c),Pk(e,e.g),e.Db=e.g.preferredTextLanguage,e.pd=e.g.preferredTextRole,e.od=e.g.preferForcedSubs,Fp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(ue,de,be){e.i&&e.j&&ue!=e.j.j&&nc(e,ue,!0,de===void 0?!1:de,be===void 0?0:be)}),e.o.setMediaElement(a),e.o.setCmsdManager(e.ea),e.j=Xk(e),e.j.configure(e.g.streaming),e.l=xo,a.textTracks&&e.m.D(a.textTracks,"addtrack",function(ue){if(ue.track)switch(ue=ue.track,ue.kind){case"chapters":av(e,ue)}}),e.dispatchEvent(cn("streaming")),d=n;case 2:for((S=e.j.j)||d||(d=ss(e)?e.o.chooseVariant():null),T=[],p=S||d,E=b([p.video,p.audio]),I=E.next();!I.done;I=E.next())(A=I.value)&&!A.segmentIndex&&T.push(A.createSegmentIndex());if(!(0<T.length)){le.u(4);break}return k(le,Promise.all(T),4);case 4:if(!p||p.disabledUntilTime!=0){le.u(2);break}if(e.F&&e.F.onInitialVariantChosen&&e.F.onInitialVariantChosen(p),e.i.isLowLatency&&!e.g.streaming.lowLatencyMode&&je("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),Fp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),XE(e.j,e.g.playRangeStart,e.g.playRangeEnd),R=function(ue){e.C=Vk(e,ue),e.Fb=Hk(e,ue),uv(e,a,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||R(e.pa),S){le.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){le.u(8);break}return D=e.i.presentationTimeline,L=e.pa||e.h.currentTime,F=D.Vb(),U=D.yb(),L<F?L=F:L>U&&(L=U),k(le,Yk(d,L),9);case 9:q=le.h,R(q);case 8:nc(e,d,!0,!1,0);case 7:return e.C.ready(),N=e.Ec().find(function(ue){return ue.active}),N||((G=vl(e.i.textStreams,e.Db,e.pd,e.od)[0]||null)&&up(e.s.h,G,!0),d&&(G?(Qk(e,d.audio,G)&&(e.oa=!0),e.oa&&e.G.F.setTextVisibility(!0),xv(e)):e.oa=!1),G&&(e.g.streaming.alwaysStreamText||e.qf())&&Ff(e.j,G)),k(le,e.j.start(r),10);case 10:e.g.abr.enabled&&(e.o.enable(),wv(e)),ui(e),ss(e),e.i.variants.some(function(ue){return ue.primary}),((Q=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(re=function(){return gv(e)},e.m.D(a,"timeupdate",re)),Q||(ae=function(){return tc(e)},e.m.D(a,"timeupdate",ae),tc(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(me=function(){var ue;return z(function(de){if(de.g==1)return ue=e.h.duration-e.h.currentTime,isNaN(ue)||!(ue<=e.g.streaming.preloadNextUrlWindow)?de.u(0):(e.m.jb(a,"timeupdate",me),k(de,e.preload(e.i.nextUrl),4));e.qa=de.h,V(de)})},e.m.D(a,"timeupdate",me)),e.m.D(a,"ended",function(){e.load(e.qa||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(Q),e.Ea=!0,e.m.ha(a,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),V(le)}})}function Bk(e,t){var n,r,a,u,c;return z(function(d){return d.g==1?(n=zn,r=Date.now()/1e3,a=!0,e.B=e.yc({Lb:e.H,onError:function(p){la(e,p)},ee:function(){},onExpirationUpdated:function(){var p=cn("expirationupdated");e.dispatchEvent(p)},onEvent:function(p){e.dispatchEvent(p),p.type=="drmsessionupdate"&&a&&(a=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.g.drm),u={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},c={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?yi(t):"",codecs:t?Xo(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ga,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},c.fullMimeTypes.add(Vn(c.mimeType,c.codecs)),t.startsWith("audio/")?(c.type=n.X,u.audio=c):u.video=c,e.B.ba=!0,k(d,Ay(e.B,[u],[]),2)):k(d,e.B.Rb(e.h),0)})}function jk(e,t,n){var r,a,u,c,d,p,S,T,E,I,A,R;return z(function(D){if(D.g==1)return sa(e,"src-equals"),r=e.h,e.C=new y1(r),a=!1,e.md.push(function(){a=!0}),e.pa!=null&&e.C.Ee(e.pa),e.I=new Ml({Nd:function(){return r.playbackRate},hc:function(){return r.defaultPlaybackRate},Rf:function(L){r.playbackRate=L},Lg:function(L){r.currentTime+=L}}),u=e.g.streaming.rebufferingGoal,uv(e,r,u),c=function(){return ec(e)},d=function(){return mv(e)},e.m.D(r,"playing",c),e.m.D(r,"pause",c),e.m.D(r,"ended",c),e.m.D(r,"ratechange",d),r.preload!="none"&&e.m.ha(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.m.D(r.audioTracks,"addtrack",function(){return ui(e)}),e.m.D(r.audioTracks,"removetrack",function(){return ui(e)}),e.m.D(r.audioTracks,"change",function(){return ui(e)})),r.textTracks&&(e.m.D(r.textTracks,"addtrack",function(L){if(L.track)switch(L=L.track,L.kind){case"metadata":zk(e,L);break;case"chapters":av(e,L);break;default:ui(e)}}),e.m.D(r.textTracks,"removetrack",function(){return ui(e)}),e.m.D(r.textTracks,"change",function(){return ui(e)})),p=Ak(e.N,e.da,n),!p.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(p+="#t=",0<e.g.playRangeStart&&(p+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(p+=","+e.g.playRangeEnd)),r.src=p,(ji()||Fi())&&r.load(),r.preload!="none"&&!r.autoplay&&Ng(n)&&_s()&&r.load(),e.l=Ao,e.dispatchEvent(cn("streaming")),S=new Zt,Qs(r,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ready(),S.resolve()}),Qs(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var L;return z(function(F){if(F.g==1)return Fk(e),L=jl(e),L.find(function(U){return U.mode!="disabled"})?(0<L.length&&(e.oa=!0),F.u(2)):k(F,new Promise(function(U){e.m.ha(r.textTracks,"change",U),new Mt(U).Y(1)}),2);if(a)return F.return();$k(e),V(F)})}),r.error?S.reject(jp(e)):r.preload=="none"&&(je('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),S.resolve()),e.m.ha(r,"error",function(){S.reject(jp(e))}),T=new Promise(function(L,F){new Mt(F).Y(e.g.streaming.loadTimeout)}),k(D,Promise.race([S,T]),2);((E=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(I=function(){return gv(e)},e.m.D(r,"timeupdate",I)),E||(A=function(){return tc(e)},e.m.D(r,"timeupdate",A),tc(e)),e.A&&(e.A.onManifestUpdated(E),E&&(R=e.Ob().end,e.m.D(r,"progress",function(){var L=e.Ob().end;R!=L&&(e.A.onManifestUpdated(e.V()),R=L)}))),e.Ea=!0,V(D)})}function Fk(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Xg(t,e.g.preferredVariantRole)}function $k(e){var t=e.g.preferredTextLanguage;t!=""&&e.Lf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function zk(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues){for(var r=[],a=b(t.activeCues),u=a.next(),c={};!u.done;c={Ta:void 0},u=a.next())c.Ta=u.value,Pp(e,c.Ta.startTime,c.Ta.endTime,c.Ta.type,c.Ta.value),e.A&&e.A.onCueMetadataChange(c.Ta.value),c.Ta.type=="com.apple.quicktime.HLS"&&c.Ta.startTime!=null&&(u=r.find(function(d){return function(p){return p.startTime==d.Ta.startTime&&p.endTime==d.Ta.endTime}}(c)),u||(u={startTime:c.Ta.startTime,endTime:c.Ta.endTime,values:[]},r.push(u)),u.values.push(c.Ta.value));for(r=b(r),a=r.next();!a.done;a=r.next())a=a.value,a.values.some(function(d){return d.key=="X-ASSET-URI"||d.key=="X-ASSET-LIST"})&&e.A&&(a.values.push({key:"CUE",description:"",data:"ONCE",mimeType:null,pictureType:null}),e.A.onInterstitialMetadata(e,e.h,a))}});var n=new Mt(function(){var r=Kk(e);r=b(r);for(var a=r.next();!a.done;a=r.next())a.value.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}function sv(e,t,n,r){t=b(t);for(var a=t.next();!a.done;a=t.next())if(a=a.value,a.data&&typeof a.cueTime=="number"&&a.frames){var u=a.cueTime+n,c=r;c&&u>c&&(c=u);for(var d=b(a.frames),p=d.next();!p.done;p=d.next())Pp(e,u,c,"org.id3",p.value);e.A&&e.A.onHlsTimedMetadata(a,u)}}function Pp(e,t,n,r,a){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",a),e.dispatchEvent(cn("metadata",t))}function av(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new Mt(function(){t.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}w.Ji=function(){for(var e=this.Z;e.g;)e.release()},w.yc=function(e){return new kf(e)};function lv(e,t){function n(a){t()?t().dispatchEvent(a):e.dispatchEvent(a)}function r(a){t()?Ol(t(),!0,a):a()}return t||(t=function(){return null}),new nn(function(a,u,c,d){var p=t()?t().i:e.o;p&&p.segmentDownloaded(a,u,c,d)},function(a,u,c){u=new Map().set("headers",a).set("request",u).set("requestType",c),n(cn("downloadheadersreceived",u)),r(function(){if(e.ea){var d=e.ea;if(d.h.enabled){var p=a["cmsd-static"];if(p)try{var S=new Map,T=p.split(",");for(p=0;p<T.length;p++){var E=T[p].split("=");S.set(E[0],Y1(E[1]))}}catch{}if(S=a["cmsd-dynamic"]){try{var I=new Map,A=S.split(";");for(S=1;S<A.length;S++){var R=A[S].split("=");I.set(R[0],Y1(R[1]))}var D=I}catch{D=null}D&&(d.g=D)}}}})},function(a,u,c,d){a=new Map().set("request",a).set("error",u).set("httpResponseCode",c).set("aborted",d),n(cn("downloadfailed",a))},function(a,u,c){r(function(){var d=e.N,p=c;if(p=p===void 0?{}:p,d.g.enabled)if(u.method==="HEAD")ra(d,u);else switch(a){case 0:try{if(d.g.enabled){if(p.type){e:{switch(p.type){case 4:var S="d";break e;case 3:case 2:S="h";break e;case 5:S="s";break e}S=void 0}d.m=S}ra(d,u,{ot:q1,su:!d.i})}}catch(Ce){at("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Ce)}break;case Ri:try{if(d.g.enabled){var T=p.segment;S=0,T&&(S=T.endTime-T.startTime);var E={d:1e3*S,st:d.h.V()?"l":"v"};E.ot=Mk(p);var I=E.ot===Yf||E.ot===qf||E.ot===Qf||E.ot===Zf,A=p.stream;if(A){var R=d.h.eb();if(I&&(E.bl=_k(d,A.type),E.ot!==Zf)){var D=K1(d,A.type);E.dl=R?D/Math.abs(R):D}if(A.bandwidth&&(E.br=A.bandwidth/1e3),A.segmentIndex&&T){var L=A.segmentIndex.Ib(T.endTime,!0,0>R);if(L){var F=L.next().value;if(F&&F!=T){if(!un(T.M(),F.M())){var U=F.M()[0],q=u.uris[0],N=new URL(U),G=new URL(q);if(N.origin!==G.origin)var Q=U;else{for(var re=N.pathname.split("/").slice(1),ae=G.pathname.split("/").slice(1,-1);re[0]===ae[0];)re.shift(),ae.shift();for(;ae.length;)ae.shift(),re.unshift("..");Q=re.join("/")}E.nor=Q}if((F.Ha||F.sa)&&(T.Ha!=F.Ha||T.sa!=F.sa)){var me=F.Ha+"-";F.sa&&(me+=F.sa),E.nrr=me}}}var le=d.h.eb()||1,ue=K1(d,A.type)||500,de=A.bandwidth,be=de?de*(T.endTime-T.startTime)/1e3/(ue/le/1e3)*d.g.rtpSafetyFactor:NaN;isNaN(be)||(E.rtp=be)}}I&&E.ot!==Zf&&(E.tb=Rk(d,E.ot)/1e3),ra(d,u,E)}}catch(Ce){at("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Ce)}break;case 2:case 5:case 6:ra(d,u,{ot:"k"});break;case 4:ra(d,u,{ot:"o"})}})},function(a,u,c,d){(a=t()?t().j:e.F)&&a.banLocation&&a.banLocation(d)},function(a,u){if(u.data){u=u.data.byteLength;var c=t()?t().getStats():e.s;c&&(c.Cd=isNaN(c.Cd)?u:c.Cd+u,a===0&&(c.Hg=u))}})}function Vk(e,t){return new v1(e.h,e.i,e.g.streaming,t,function(){e.Fb&&b1(e.Fb,!0),e.j&&e.j.Qc(),e.L&&rs(e)},function(n){return e.dispatchEvent(n)})}function Hk(e,t){t=new Xf(e.dd,e.V()||0<t),t.addEventListener("enter",function(r){Fl(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){Fl(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var a=r.region;r.seeking||(Fl(e,"timelineregionenter",a),Fl(e,"timelineregionexit",a))});var n=new T1(e.h);return n.g.add(t),e.Zc&&n.g.add(e.Zc),n}function uv(e,t,n){e.L=new Db,e.L.g=js,sy(e.L,n,Math.min(.5,n/2)),Up(e),e.he=new Mt(function(){rs(e)}).Sa(.25),e.m.D(t,"waiting",function(){return rs(e)}),e.m.D(t,"stalled",function(){return rs(e)}),e.m.D(t,"canplaythrough",function(){return rs(e)}),e.m.D(t,"progress",function(){return rs(e)})}function rs(e){switch(e.l){case Ao:if(e.h.ended)var t=!0;else{var n=Xd(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case xo:e:if(e.h.ended||r1(e.G))t=!0;else{if(e.i.presentationTimeline.V()){n=e.i.presentationTimeline.Wb();var r=Xd(e.h.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=Xy(e.h.buffered,e.h.currentTime),n=e.L;var a=t,u=n.i.get(n.g);t=n.g,r=a||r>=u?xl:js,n.g=r,(t=t!=r)&&r===xl&&(n.h=Date.now()),t&&Up(e)}function Gk(e,t,n,r){return new o1(e,t,n,r)}function Wk(e){return new X1({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},wb:function(){return e.wb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},eb:function(){return e.eb()},xb:function(){return e.xb()},ic:function(){return e.ic()},V:function(){return e.V()}},e.g.cmcd)}function Xk(e){return new _1(e.i,{Md:function(){return e.C?e.C.yd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},aa:e.G,Lb:e.H,onError:function(t){return la(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Bi:function(){e.F&&e.F.update&&e.F.update()},Af:function(t,n){var r=t.startTime;t=t.endTime;var a=n.type;if(n=n.codecs.includes(","),e.C){e.C.Mg();var u=tp(e.G,a);!e.V()&&e.h.paused&&u!=null&&0<u&&e.C.yd()<u&&e.C.Ee(u)}rs(e),r=new Map().set("start",r).set("end",t).set("contentType",a).set("isMuxed",n),e.dispatchEvent(cn("segmentappended",r))},Ai:function(t,n){(n=n.Hc)&&e.Zc&&$E(e.Zc,n,t)},kg:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){t=new wy(Ae(n)),n=0;for(var a=b(t.data),u=a.next();!u.done;u=a.next())n+=u.value.length;if(n==0)r=Promise.resolve();else{for(n=new Uint8Array(n),a=0,t=b(t.data),u=t.next();!u.done;u=t.next())u=u.value,n.set(u,a),a+=u.length;Sl(r,"cenc",n),r=r.l}}else r=Promise.resolve();return r},onMetadata:function(t,n,r){sv(e,t,n,r)},disableStream:function(t,n){return e.disableStream(t,n)}})}w.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=Hf(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(Ot("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Ot("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(Ot("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&Ms(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){Ot("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var r=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+r,e.streaming.liveSync.targetLatencyTolerance=r}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Ot("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Ot("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Ot("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Ot("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Ot("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Ot("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Ot("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Ot("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Ot("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var a=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return a},delete e.mediaSource.sourceBufferExtraFeatures}return e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.maxDisabledTime==null&&(e.streaming.maxDisabledTime=1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.dash==null&&(e.manifest.dash={}),e.manifest.dash.autoCorrectDrift==null&&(e.manifest.dash.autoCorrectDrift=!1),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100)),n=Rr(this.g,e,sr(this)),fv(this),n};function fv(e){if(e.be=new Hd(e.g,e.fa,e.B),e.F){var t=zi(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.F.configure(t)}if(e.B&&e.B.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.l!=Di&&Fy(e.be,e.i)&&ui(e)}catch(u){la(e,u)}e.o&&ss(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||aa(e)}if(e.H&&(e.H.Pf(e.g.streaming.forceHTTP),e.H.Qf(e.g.streaming.forceHTTPS)),e.G)if(e.G.configure(e.g.mediaSource),e.G.fa=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.bg!=t){var n=t();n.configure?n.configure(e.g.textDisplayer):Ot("Text displayer w/ configure",'Text displayer should have a "configure" method!');var r=e.G,a=r.F;r.F=n,a&&(n.setTextVisibility(a.isTextVisible()),a.destroy()),r.g&&(r.g.j=n),e.bg=t,e.j&&(t=e.j,(n=t.i.get(Ut))&&Js(t,n.stream,!0,0,!0))}else t=e.G.F,t.configure&&t.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),wv(e)),e.L&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),sy(e.L,t,Math.min(.5,t/2))),e.i&&Fp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.N&&e.N.configure(e.g.cmcd),e.ea&&e.ea.configure(e.g.cmsd)}w.getConfiguration=function(){var e=sr(this);return Rr(e,this.g,sr(this)),e},w.Ag=function(){var e=sr(this);return Rr(e,this.g,sr(this)),O1(this.g,sr(this))},w.vg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ob().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},w.Ni=function(){for(var e in this.g)delete this.g[e];Rr(this.g,sr(this),sr(this)),fv(this)},w.yg=function(){return this.l},w.hf=function(){return this.i?this.i.type:null},w.Uh=function(){return this.h},w.xb=function(){return this.H},w.Dc=function(){return this.da},w.ug=function(){return this.A?this.A:null},w.V=function(){return this.i?this.i.presentationTimeline.V():this.h&&this.h.src?this.h.duration==1/0:!1},w.kc=function(){return this.i?this.i.presentationTimeline.kc():!1},w.ki=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},w.Ob=function(){if(this.i){if(!this.Ea&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Vb(),end:e.yb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},w.hi=function(){this.V()&&(this.h.currentTime=this.Ob().end)},w.li=function(){return this.Ea},w.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},w.drmInfo=function(){return this.B?this.B.g:null},w.ad=function(){return this.B?this.B.ad():1/0},w.ff=function(){return this.B?this.B.ff():[]},w.Ld=function(){return this.B?this.B.Ld():{}},w.pf=function(){return this.L?this.L.g==js:!1},w.eb=function(){return this.h?this.I?this.I.i:1:0},w.wd=function(e){var t=this;e==0?je("A trick play rate of 0 is unsupported!"):(this.Fa.Ra(),this.h.paused&&this.h.play(),this.I.set(e),this.l==xo&&(this.o.playbackRateChanged(e),R1(this.j,1<Math.abs(e))),this.V()&&this.Fa.D(this.h,"timeupdate",function(){var n=t.h.currentTime,r=t.Ob(),a=t.g.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.Tc():Math.floor(n)<=Math.floor(r.start+a)&&t.Tc()}))},w.Tc=function(){var e=this.I.hc();this.l==Ao&&this.I.set(e),this.l==xo&&(this.I.set(e),this.o.playbackRateChanged(e),R1(this.j,!1)),this.Fa.Ra()},w.ic=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=b(this.i.variants),a=r.next();!a.done;a=r.next())if(a=a.value,yl(a)){var u=Us(a);u.active=a==e,u.active||n==1||e==null||a.video!=e.video||a.audio!=e.audio||(u.active=!0),u.active&&n++,t.push(u)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(c){return Ld(c)}):[]},w.Ec=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=b(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var a=hf(r);a.active=r==e,t.push(a)}return t}return this.h&&this.h.src&&this.h.textTracks?jl(this).map(function(u){return Yg(u)}):[]},w.Oh=function(){var e=this.qd;return this.i&&(e=this.i.imageStreams),e.map(function(t){return _d(t)})},w.Gh=function(e){var t=this,n,r,a,u;return z(function(c){return c.g==1?t.l!=xo&&t.l!=Ao?c.return(null):(n=t.qd,t.i&&(n=t.i.imageStreams),(r=n.find(function(d){return d.id==e}))?r.segmentIndex?c.u(2):k(c,r.createSegmentIndex(),2):c.return(null)):c.g!=4?(a=[],r.segmentIndex.Hb(function(d){var p=cv(d.tilesLayout||r.tilesLayout);if(p){p=p.rows*p.dc;for(var S=d.j-d.startTime,T=0;T<p;T++)a.push(t.Cg(e,d.startTime+S*T/p))}}),k(c,Promise.all(a),4)):(u=c.h,c.return(u.filter(function(d){return d})))})};function cv(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{dc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}w.Cg=function(e,t){var n=this,r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N;return z(function(G){return G.g==1?n.l!=xo&&n.l!=Ao?G.return(null):(r=n.qd,n.i&&(r=n.i.imageStreams),(a=r.find(function(Q){return Q.id==e}))?a.segmentIndex?G.u(2):k(G,a.createSegmentIndex(),2):G.return(null)):(u=a.segmentIndex.find(t),u==null||(c=a.segmentIndex.get(u),d=cv(c.tilesLayout||a.tilesLayout),!d)?G.return(null):(p=a.width||0,S=a.height||0,T=p/d.dc,E=S/d.rows,I=d.dc*d.rows,A=c.j-c.startTime,R=c.B||A/I,D=c.startTime,F=L=0,1<I&&(U=Math.floor((t-c.startTime)/R),D=c.startTime+U*R,L=U%d.dc*T,F=Math.floor(U/d.dc)*E),q=!1,(N=c.A)&&(q=!0,E=N.height,L=N.positionX,F=N.positionY,T=N.width),G.return({segment:c,imageHeight:S,imageWidth:p,height:E,positionX:L,positionY:F,startTime:D,duration:R,uris:c.M(),width:T,sprite:q})))})},w.Yg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&(up(this.s.h,t,!1),Ff(this.j,t),oc(this),this.Db=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=jl(this),t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value,Rd(n)==e.id?n.mode=this.oa?"showing":"hidden":n.mode="disabled";oc(this)}},w.Mf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){var r=this.i.variants.find(function(u){return u.id==e.id});if(r&&yl(r)){var a=this.j.j;this.g.abr.enabled&&(a.video!=r.video||a.audio&&r.audio&&a.audio.language==r.audio.language&&a.audio.channelsCount==r.audio.channelsCount)&&je("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),nc(this,r,!1,t,n),this.za=new ry(r,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),ss(this)}}else if(this.h&&this.h.audioTracks){for(t=Array.from(this.h.audioTracks),t=b(t),n=t.next();!n.done;n=t.next())if(n=n.value,Rd(n)==e.id){yv(this,n);break}}},w.Ih=function(){return Tv(this.ic())},w.ai=function(){return Tv(this.Ec())},w.Hh=function(){return Array.from(Cv(this.ic()))},w.$h=function(){return Array.from(Cv(this.Ec()))},w.Xg=function(e,t,n,r,a){if(n=n===void 0?0:n,r=r===void 0?0:r,a=a===void 0?"":a,this.i&&this.C){this.za=new Bs(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,a),e=function(c,d){return c.video||d.video?c.video&&d.video?Math.abs((c.video.height||0)-(d.video.height||0))+Math.abs((c.video.width||0)-(d.video.width||0)):1/0:0},t=this.j.j,a=this.za.create(this.i.variants),n=null,a=b(a.values());for(var u=a.next();!u.done;u=a.next())u=u.value,yl(u)&&(!n||e(n,t)>e(u,t))&&(n=u);n!=t&&(n?(e=Us(n),this.Mf(e,!0,r)):aa(this))}else this.h&&this.h.audioTracks&&(r=vl(this.ic(),e,t||"",!1)[0])&&this.Mf(r)},w.Lf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Db=e,this.pd=t||"",this.od=n,(e=vl(this.i.textStreams,this.Db,this.pd,this.od)[0]||null)&&e!=this.j.s&&(up(this.s.h,e,!1),this.g.streaming.alwaysStreamText||this.qf())&&(Ff(this.j,e),oc(this))):(e=vl(this.Ec(),e,t||"",n)[0])&&this.Yg(e)},w.Ti=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var r=null,a=b(this.i.variants),u=a.next();!u.done;u=a.next())if(u=u.value,u.audio.label==e){r=u;break}r!=null&&(this.za=new Bs(r.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),aa(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=b(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&yv(this,t)}},w.qf=function(){var e=this.oa;return this.G&&this.l==xo?this.G.F.isTextVisible():this.h&&this.h.src&&this.h.textTracks?jl(this).some(function(t){return t.mode=="showing"}):e},w.wg=function(){return this.h&&this.h.src&&this.h.textTracks?hv(this).map(function(e){return Yg(e)}):[]},w.Kh=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=qt(e),n=hv(this).filter(function(d){return qt(d.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=b(n);for(var a=n.next();!a.done;a=n.next())if((a=a.value)&&a.cues){a=b(a.cues);for(var u=a.next();!u.done;u=a.next()){var c=u.value;(u=c.id)&&u!=""||(u=c.startTime+"-"+c.endTime+"-"+c.text),c={id:u,title:c.text,startTime:c.startTime,endTime:c.endTime},r.has(u)||(e.push(c),r.add(u))}}return e};function jl(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function Kk(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function hv(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}w.eh=function(e){if(e=!!e,this.oa!=e){if(this.oa=e,this.l==xo)this.G.F.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=vl(this.i.textStreams,this.Db,this.pd,this.od),0<e.length&&(Ff(this.j,e[0]),oc(this))):qE(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=jl(this);t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}xv(this)}},w.Wh=function(){if(this.C)var e=this.C.yd();else{if(this.pa==null)return new Date;e=this.pa}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},w.Bg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},w.Od=function(){return this.V()&&this.i?this.i.presentationTimeline.Od():null},w.wb=function(){if(this.l==xo)return this.G.wb();var e={total:[],audio:[],video:[],text:[]};return this.l==Ao&&(e.total=_r(this.h.buffered)),e},w.getStats=function(){if(this.l!=xo&&this.l!=Ao)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};ec(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.V()){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.U=this.C.fg(),this.s.Z=this.C.gg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.R=Number(n.droppedVideoFrames),t.N=r,this.s.L=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==xo){if(n=this.j.j,t=this.j.s,n){r=this.I?this.I.i:1;var a=r*n.bandwidth;t&&t.bandwidth&&(a+=r*t.bandwidth),this.s.B=a}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.V()&&(n=this.Bg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&(this.s.G=this.i.periodCount,this.s.F=this.i.gapCount,this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.g)),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==Ao&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var u=this.s;e=u.o,n=u.l,t=u.B,r=u.N,a=u.R;var c=u.L,d=u.Z,p=u.U,S=u.A,T=u.i,E=u.m,I=u.H,A=u.j,R=lp(u.g,"playing"),D=lp(u.g,"paused"),L=lp(u.g,"buffering"),F=u.s,U=u.C,q=u.I,N=u.Hg,G=u.Cd,Q=u.K,re=u.G,ae=u.F,me=NE(u.g),le=[];u=b(u.h.g);for(var ue=u.next();!ue.done;ue=u.next())ue=ue.value,le.push({timestamp:ue.timestamp,id:ue.id,type:ue.type,fromAdaptation:ue.fromAdaptation,bandwidth:ue.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:a,corruptedFrames:c,stallsDetected:d,gapsJumped:p,estimatedBandwidth:S,completionPercent:T,loadLatency:E,manifestTimeSeconds:I,drmTimeSeconds:A,playTime:R,pauseTime:D,bufferingTime:L,licenseTime:F,liveLatency:U,maxSegmentDuration:q,manifestSizeBytes:N,bytesDownloaded:G,nonFatalErrorCount:Q,manifestPeriodCount:re,manifestGapCount:ae,stateHistory:me,switchHistory:le}},w.uh=function(e,t,n,r,a,u,c){c=c===void 0?!1:c;var d=this,p,S,T,E,I,A,R,D,L,F,U,q;return z(function(N){switch(N.g){case 1:if(d.l!=xo&&d.l!=Ao)throw new se(1,7,7004);if(n!="subtitles"&&n!="captions"&&je("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){N.u(2);break}return k(N,Op(d,e),3);case 3:r=N.h;case 2:if(p=[],d.A&&(p=d.A.getCuePoints()),d.l!=Ao){N.u(4);break}return c&&(n="forced"),k(N,dv(d,e,t,n,r,u||"",p),5);case 5:if(S=qt(t),T=d.Ec(),E=T.find(function(G){return qt(G.language)==S&&G.label==(u||"")&&G.kind==n}))return ui(d),N.return(E);throw new se(1,2,2012);case 4:if(I=zn,A=d.h.duration,d.i&&(A=d.i.presentationTimeline.getDuration()),A==1/0)throw new se(1,4,4033);if(!p.length){N.u(6);break}return k(N,Np(d,e,d.H,d.g.streaming.retryParameters),7);case 7:R=N.h,D=pv(d,R,r,p),L=new Blob([D],{type:"text/vtt"}),e=Pf(L),r="text/vtt";case 6:if(F={id:d.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:ap(0,A,[e]),mimeType:r||"",codecs:a||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:u||null,type:I.ua,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!c,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Vn(r||"",a||"")])},U=Vn(F.mimeType,F.codecs),q=pl(U),!q)throw new se(2,2,2014,r);return d.i.textStreams.push(F),ui(d),N.return(hf(F))}})},w.vh=function(e,t){var n=this,r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U;return z(function(q){switch(q.g){case 1:if(n.l!=xo&&n.l!=Ao)throw new se(1,7,7004);if(t){q.u(2);break}return k(q,Op(n,e),3);case 3:t=q.h;case 2:if(t!="text/vtt")throw new se(1,2,2017,e);if(r=zn,a=n.h.duration,n.i&&(a=n.i.presentationTimeline.getDuration()),a==1/0)throw new se(1,4,4045);return k(q,Np(n,e,n.H,n.g.streaming.retryParameters),4);case 4:if(u=q.h,c=Hn[t],!c)throw new se(2,2,2014,t);for(d=c(),p={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},S=Ae(u),T=d.parseMedia(S,p,e),E=[],I=b(T),A=I.next(),R={};!A.done;R={ye:void 0,zc:void 0},A=I.next())R.zc=A.value,R.ye=null,D=function(N){return function(){return N.ye==null&&(N.ye=ro([e],[N.zc.payload])),N.ye||[]}}(R),L=new ft(R.zc.startTime,R.zc.endTime,D,0,null,null,0,0,1/0),R.zc.payload.includes("#xywh")&&(F=R.zc.payload.split("#xywh=")[1].split(","),F.length===4&&L.fh({height:parseInt(F[3],10),positionX:parseInt(F[0],10),positionY:parseInt(F[1],10),width:parseInt(F[2],10)})),E.push(L);return U={id:n.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ft(E),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.De,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Vn(t||"","")])},n.l==Ao?n.qd.push(U):n.i.imageStreams.push(U),ui(n),q.return(_d(U))}})},w.th=function(e,t,n){var r=this,a,u,c,d;return z(function(p){switch(p.g){case 1:if(r.l!=xo&&r.l!=Ao)throw new se(1,7,7004);if(n){p.u(2);break}return k(p,Op(r,e),3);case 3:n=p.h;case 2:return a=[],r.A&&(a=r.A.getCuePoints()),k(p,dv(r,e,t,"chapters",n,"",a),4);case 4:if(u=p.h,c=r.wg(),d=c.find(function(S){return S.language==t}),!d){p.u(5);break}return k(p,new Promise(function(S,T){r.m.ha(u,"load",S),r.m.ha(u,"error",function(){T(new se(1,2,2015))})}),6);case 6:return ui(r),p.return(d);case 5:throw new se(1,2,2012)}})};function Op(e,t){var n;return z(function(r){switch(r.g){case 1:return Z(r,2),k(r,Ep(t,e.H,e.g.streaming.retryParameters),4);case 4:n=r.h,K(r,3);break;case 2:ne(r);case 3:if(n)return r.return(n);throw new se(1,2,2011,t)}})}function dv(e,t,n,r,a,u,c){var d,p,S,T;return z(function(E){if(E.g==1)return a!="text/vtt"||c.length?k(E,Np(e,t,e.H,e.g.streaming.retryParameters),3):E.u(2);E.g!=2&&(d=E.h,p=pv(e,d,a,c),S=new Blob([p],{type:"text/vtt"}),t=Pf(S),a="text/vtt"),T=document.createElement("track");var I=e.N,A=t;try{if(I.g.enabled){var R=Ip(I);R.ot=_p,R.su=!0;var D=Kf(R),L=Mp(A,D)}else L=A}catch(F){at("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",F),L=A}return T.src=L,T.label=u,T.kind=r,T.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(T),E.return(T)})}function Np(e,t,n,r){var a,u,c;return z(function(d){if(d.g==1){a=Ri,u=Qn([t],r),u.method="GET";var p=e.N;try{p.g.enabled&&ra(p,u,{ot:_p,su:!0})}catch(S){at("CMCD_TEXT_ERROR","Could not generate text CMCD data.",S)}return k(d,n.request(a,u).promise,2)}return c=d.h,d.return(c.data)})}function pv(e,t,n,r){var a=Hn[n];if(a)return n=a(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Ae(t),t=n.parseMedia(t,e,null),Ek(t,r);throw new se(2,2,2014,n)}w.Yi=function(e,t){this.fa.width=e,this.fa.height=t},w.If=function(e){if(this.l==xo){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.A)t=!1;else{for(var n=b(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.fd||r.Qa||r.sb||(r.fd=!1,si(t,r,e));t=!0}}else t=!1;return t},w.gf=function(){return je("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},w.Rh=function(){return this.ab};function sr(e){var t=ta();return t.streaming.failureCallback=function(n){if(e.V()){var r=null;n.code==1001||n.code==1002?(r=1,e.g.streaming.lowLatencyMode&&(r=.1)):n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.If(r))}},t.textDisplayFactory=function(){if(e.de){var n=e.getConfiguration();return new Bo(e.h,e.de,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new No(e.h,"Shaka Player TextTrack"):new Uo},t}w.ih=function(e){this.de=e};function qk(e,t){for(var n=new Set,r=b(t.textStreams),a=r.next();!a.done;a=r.next())a=a.value,a.mimeType!="application/cea-608"&&a.mimeType!="application/cea-708"||n.add(a.originalId);for(r=b(t.variants),a=r.next();!a.done;a=r.next())if((a=a.value.video)&&a.closedCaptions){for(var u=b(a.closedCaptions.keys()),c=u.next();!c.done;c=u.next())if(c=c.value,!n.has(c)){var d=c.startsWith("CC")?"application/cea-608":"application/cea-708",p=new In,S=a.closedCaptions.get(c);d={id:e.cg++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:p,mimeType:d,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:S,originalLanguage:S,label:null,type:Ut,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Vn(d,"")])},t.textStreams.push(d),n.add(c)}}}function Yk(e,t){var n,r,a,u,c;return z(function(d){return d.g==1?(n=e.audio,r=e.video,a=function(p,S){var T,E,I;return z(function(A){return A.g==1?p?k(A,p.createSegmentIndex(),2):A.return(null):(E=(T=p.segmentIndex.Ib(S))?T.next().value:null,E?(I=E.startTime,A.return(I)):A.return(null))})},k(d,a(n,t),2)):d.g!=3?(u=d.h,k(d,a(r,t),3)):(c=d.h,c!=null&&u!=null?d.return(Math.max(c,u)):c!=null?d.return(c):u!=null?d.return(u):d.return(t))})}function Up(e){var t=e.pf();if(e.s&&e.L&&e.C){var n=e.I;if(n.j=t,C1(n),e.N&&(n=e.N,t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t),ec(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.ze<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,a=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.R&&(e.R=Math.min(e.R+ ++e.ze*a,n-r))}}t=new Map().set("buffering",t),e.dispatchEvent(cn("buffering",t))}function mv(e){var t=e.h.playbackRate;t!=0&&(e.I&&e.I.set(t),t=cn("ratechange"),e.dispatchEvent(t))}function ec(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==js?n="buffering":e.h.ended?n="ended":e.h.paused&&(n="paused");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var a=Date.now()/1e3;t.g.duration=a-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:a,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(cn("statechanged",n)))}}function gv(e){var t=e.h.playbackRate,n=e.V();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,a=e.vg();a<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.wd(r):a==1&&t!==e.I.hc()&&e.Tc()}if(n&&(n=e.Ob(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start))){r=e.g.streaming.liveSync.targetLatencyTolerance,a=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var u=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var c=e.g.streaming.liveSync.targetLatency,d=c+r,p=Math.max(0,c-r),S=e.g.streaming.liveSync.maxPlaybackRate,T=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(c=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?d=e.i.serviceDescription.targetLatency+r:e.i.serviceDescription.maxLatency!=null&&(d=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?p=Math.max(0,e.i.serviceDescription.targetLatency-r):e.i.serviceDescription.minLatency!=null&&(p=e.i.serviceDescription.minLatency),S=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,T=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.R||typeof c!="number"||(e.R=c);var E=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;a&&e.Da&&e.R!==null&&typeof c=="number"&&e.ze<E&&Date.now()-e.Da>1e3*u&&(u=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.R=Math.max(e.R-(c-u)/2,u+r),e.Da=Date.now()),a&&e.R!==null&&(d=e.R+r,p=e.R-r),c=n.end-e.h.currentTime,r=0,e.l==Ao&&(a=e.h.buffered,0<a.length&&(r=a.end(a.length-1),r=Math.max(S,r-n.end))),n=e.g.streaming.liveSync.panicMode,a=1e3*e.g.streaming.liveSync.panicThreshold,u=Date.now()-e.L.h,n&&!T&&(T=e.g.streaming.liveSync.minPlaybackRate),n&&T&&u<=a?t!=T&&e.wd(T):d&&S&&c-r>d?(t!=S&&e.wd(S),e.Da=null):p&&T&&c-r<p?(t!=T&&e.wd(T),e.Da=null):t!==e.I.hc()&&(e.Tc(),e.Da=Date.now())}}function tc(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.U)?(e.U=n,t=!0):(n=Math.max(e.U,n),e.U!=n&&(e.U=n,t=!0))),t){var r;e.U==0?r=cn("started"):e.U==25?r=cn("firstquartile"):e.U==50?r=cn("midpoint"):e.U==75?r=cn("thirdquartile"):e.U==100&&(r=cn("complete")),r&&e.dispatchEvent(r)}}}function ss(e){try{$y(e.be,e.i)}catch(n){return la(e,n),!1}var t=df(e.i.variants);return t=e.za.create(t),e.o.setVariants(Array.from(t.values())),!0}function aa(e,t,n,r,a){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,a=a===void 0?!0:a;var u;(u=ss(e)?e.o.chooseVariant():null)&&nc(e,u,a,t,n,r)}function nc(e,t,n,r,a,u){u=u===void 0?!1:u;var c=e.j.j;if(t==c)r&&L1(e.j,t,r,a,!0);else{var d=e.s.h;d.h!=t&&(d.h=t,d.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),L1(e.j,t,r,a,u,n),r=null,c&&(r=Us(c)),t=Us(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.K&&n1(e.K,t,e.hf()),n=cn("adaptation",n),ua(e,n)):vv(e,r,t)}}function yv(e,t){var n=Array.from(e.h.audioTracks).find(function(r){return r.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=Ld(n),t=Ld(t),vv(e,n,t))}function Qk(e,t,n){if(e.g.autoShowText==0)return!1;if(e.g.autoShowText==1)return!0;var r=qt(e.g.preferredTextLanguage);return n=qt(n.language),e.g.autoShowText==2?Os(n,r):e.g.autoShowText==3?t?(e=qt(t.language),Os(n,r)&&!Os(e,n)):!1:(je("Invalid autoShowText setting!"),!1)}function ui(e){var t=cn("trackschanged");ua(e,t)}function vv(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&n1(e.K,n,e.hf()),n=cn("variantchanged",t),ua(e,n)}function oc(e){var t=cn("textchanged");ua(e,t)}function xv(e){var t=cn("texttrackvisibility");ua(e,t)}function wv(e){e.g.abr.enabled||Bp(e);var t=new Map().set("newStatus",e.g.abr.enabled);ua(e,cn("abrstatuschanged",t))}function Bp(e,t){if(t=t===void 0?!0:t,e.l==xo){e.je.stop();for(var n=b(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&ss(e)}}w.disableStream=function(e,t){if(!this.g.abr.enabled||this.l===Di||!navigator.onLine||t==0)return!1;if(this.i.variants.some(function(u){var c=u[e.type];return c&&c.id!==e.id&&!u.disabledUntilTime?e.type=="audio"?e.language===c.language:!0:!1})){for(var n=b(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var a=r[e.type];a&&a.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t)}return this.je.Sa(1),t=this.wb().video.reduce(function(u,c){return u+c.end-c.start},0),aa(this,!1,t,!0,!1),!0}return!1};function la(e,t){var n,r,a;return z(function(u){switch(u.g){case 1:if(e.l==Di)return u.return();if(t.severity===1&&e.s.K++,n=!0,!(e.Ea&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){u.u(2);break}return Z(u,3),k(u,ak(e.j),5);case 5:r=u.h,n=!r,K(u,2);break;case 3:ne(u),n=!0;case 2:if(!n)return u.return();t.severity===2&&Bp(e,!1),a=cn("error",new Map().set("detail",t)),e.dispatchEvent(a),a.defaultPrevented&&(t.handled=!0),V(u)}})}function Fl(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(cn(t,e))}function Sv(e,t,n,r){r=r===void 0?!1:r,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(cn(r?"audiotrackchanged":"mediaqualitychanged",t))}function jp(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new se(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new se(2,3,3016,n,t,e.h.error.message))}function Fp(e,t,n){0<t&&(e.V()||e.hh(t)),t=e.getDuration(),n<t&&(e.V()||e.Za(n))}function ua(e,t){z(function(n){if(n.g==1)return k(n,Promise.resolve(),2);e.l!=Di&&e.dispatchEvent(t),V(n)})}function Cv(e){var t=new Set;e=b(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(qt(n.language)):t.add("und");return t}function Tv(e){var t=new Map,n=new Map;e=b(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var a="und",u=[];r.language&&(a=qt(r.language)),r.type=="variant"?u=r.audioRoles:u=r.roles,u&&u.length||(u=[""]),t.has(a)||t.set(a,new Set),u=b(u);for(var c=u.next();!c.done;c=u.next())c=c.value,t.get(a).add(c),r.label&&(n.has(a)||n.set(a,new Map),n.get(a).set(c,r.label))}var d=[];return t.forEach(function(p,S){p=b(p);for(var T=p.next();!T.done;T=p.next()){T=T.value;var E=null;n.has(S)&&n.get(S).has(T)&&(E=n.get(S).get(T)),d.push({language:S,role:T,label:E})}}),d}we("shaka.Player",Te),Te.prototype.setVideoContainer=Te.prototype.ih,Te.prototype.getManifestParserFactory=Te.prototype.Rh,Te.prototype.getManifest=Te.prototype.gf,Te.prototype.retryStreaming=Te.prototype.If,Te.prototype.setMaxHardwareResolution=Te.prototype.Yi,Te.prototype.addChaptersTrack=Te.prototype.th,Te.prototype.addThumbnailsTrack=Te.prototype.vh,Te.prototype.addTextTrackAsync=Te.prototype.uh,Te.prototype.getStats=Te.prototype.getStats,Te.prototype.getBufferedInfo=Te.prototype.wb,Te.prototype.getSegmentAvailabilityDuration=Te.prototype.Od,Te.prototype.getPresentationStartTimeAsDate=Te.prototype.Bg,Te.prototype.getPlayheadTimeAsDate=Te.prototype.Wh,Te.prototype.setTextTrackVisibility=Te.prototype.eh,Te.prototype.getChapters=Te.prototype.Kh,Te.prototype.getChaptersTracks=Te.prototype.wg,Te.prototype.isTextTrackVisible=Te.prototype.qf,Te.prototype.selectVariantsByLabel=Te.prototype.Ti,Te.prototype.selectTextLanguage=Te.prototype.Lf,Te.prototype.selectAudioLanguage=Te.prototype.Xg,Te.prototype.getTextLanguages=Te.prototype.$h,Te.prototype.getAudioLanguages=Te.prototype.Hh,Te.prototype.getTextLanguagesAndRoles=Te.prototype.ai,Te.prototype.getAudioLanguagesAndRoles=Te.prototype.Ih,Te.prototype.selectVariantTrack=Te.prototype.Mf,Te.prototype.selectTextTrack=Te.prototype.Yg,Te.prototype.getThumbnails=Te.prototype.Cg,Te.prototype.getAllThumbnails=Te.prototype.Gh,Te.prototype.getImageTracks=Te.prototype.Oh,Te.prototype.getTextTracks=Te.prototype.Ec,Te.prototype.getVariantTracks=Te.prototype.ic,Te.prototype.cancelTrickPlay=Te.prototype.Tc,Te.prototype.trickPlay=Te.prototype.wd,Te.prototype.getPlaybackRate=Te.prototype.eb,Te.prototype.isBuffering=Te.prototype.pf,Te.prototype.getKeyStatuses=Te.prototype.Ld,Te.prototype.getActiveSessionsMetadata=Te.prototype.ff,Te.prototype.getExpiration=Te.prototype.ad,Te.prototype.drmInfo=Te.prototype.drmInfo,Te.prototype.keySystem=Te.prototype.keySystem,Te.prototype.isFullyLoaded=Te.prototype.li,Te.prototype.goToLive=Te.prototype.hi,Te.prototype.seekRange=Te.prototype.Ob,Te.prototype.isAudioOnly=Te.prototype.ki,Te.prototype.isInProgress=Te.prototype.kc,Te.prototype.isLive=Te.prototype.V,Te.prototype.getAdManager=Te.prototype.ug,Te.prototype.getAssetUri=Te.prototype.Dc,Te.prototype.getNetworkingEngine=Te.prototype.xb,Te.prototype.getMediaElement=Te.prototype.Uh,Te.prototype.getManifestType=Te.prototype.hf,Te.prototype.getLoadMode=Te.prototype.yg,Te.prototype.resetConfiguration=Te.prototype.Ni,Te.prototype.getBufferFullness=Te.prototype.vg,Te.prototype.getNonDefaultConfiguration=Te.prototype.Ag,Te.prototype.getConfiguration=Te.prototype.getConfiguration,Te.prototype.configure=Te.prototype.configure,Te.prototype.releaseAllMutexes=Te.prototype.Ji,Te.prototype.destroyAllPreloads=Te.prototype.Qe,Te.prototype.preload=Te.prototype.preload,Te.prototype.detachAndSavePreload=Te.prototype.qg,Te.prototype.unloadAndSavePreload=Te.prototype.aj,Te.prototype.load=Te.prototype.load,Te.prototype.updateStartTime=Te.prototype.ej,Te.prototype.unload=Te.prototype.bc,Te.prototype.detach=Te.prototype.detach,Te.prototype.attachCanvas=Te.prototype.zh,Te.prototype.attach=Te.prototype.Rb,Te.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,a,u,c,d;return z(function(p){switch(p.g){case 1:if(t={},!e){p.u(2);break}return k(p,Zb(),3);case 3:t=p.h;case 2:var S={};if(Ii())for(var T in Ci)S[T]=!0;T=b(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var E=T.next();!E.done;E=T.next())E=E.value,S[E]=Ii()?!!Ci[E]:cl(E);for(n=S,T='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(_(kr)),S={},T=b(T),E=T.next();!E.done;E=T.next()){E=E.value,S[E]=pl(E)?!0:Ii()?ct(E)||!!At(E):cl(E);var I=E.split(";")[0];S[I]=S[I]||S[E]}return r=S,k(p,Rg(),4);case 4:a=p.h,u={manifest:n,media:r,drm:t,hardwareResolution:a},c=zp;for(d in c)u[d]=c[d]();return p.return(u)}})},Te.isBrowserSupported=function(){if(h.Promise||je("A Promise implementation or polyfill is required"),!(h.Promise&&h.Uint8Array&&Array.prototype.forEach)||Qt("Trident/"))return!1;var e=_s();return e&&9>e||!(h.MediaKeys&&h.navigator&&h.navigator.requestMediaKeySystemAccess&&h.MediaKeySystemAccess&&h.MediaKeySystemAccess.prototype.getConfiguration)?!1:Ii()?!0:cl("application/x-mpegurl")},Te.setAdManagerFactory=function(e){ic=e},Te.registerSupportPlugin=function(e,t){zp[e]=t},Te.prototype.destroy=Te.prototype.destroy;var Di=0,$p=1,xo=2,Ao=3;Te.LoadMode={DESTROYED:Di,NOT_LOADED:$p,MEDIA_SOURCE:xo,SRC_EQUALS:Ao},Te.version="v4.10.12";var bv=["4","10"];go=new function(e){this.g=e,this.i=mn,this.h=bn}(new Bn(Number(bv[0]),Number(bv[1])));var zp={},ic=null;function Ev(){this.g=[],this.i=this.l=this.j=this.h=0}function Zk(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function mt(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Ct,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}w=mt.prototype,w.needsSkipUI=function(){return!1},w.getDuration=function(){return this.g.getDuration()},w.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},w.getRemainingTime=function(){return this.h.getRemainingTime()},w.isPaused=function(){return this.i},w.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},w.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},w.canSkipNow=function(){return this.h.getAdSkippableState()},w.skip=function(){return this.h.skip()},w.pause=function(){return this.h.pause()},w.play=function(){return this.h.resume()},w.getVolume=function(){return this.h.getVolume()},w.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},w.isMuted=function(){return this.h.getVolume()==0},w.isLinear=function(){return this.g.isLinear()},w.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},w.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},w.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},w.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},w.getTitle=function(){return this.g.getTitle()},w.getDescription=function(){return this.g.getDescription()},w.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},w.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},w.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},w.getAdId=function(){return this.g.getAdId()},w.getCreativeAdId=function(){return this.g.getCreativeAdId()},w.getAdvertiserName=function(){return this.g.getAdvertiserName()},w.getMediaUrl=function(){return this.g.getMediaUrl()},w.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},w.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},w.release=function(){this.h=this.g=null},we("shaka.ads.ClientSideAd",mt),mt.prototype.release=mt.prototype.release,mt.prototype.getPodIndex=mt.prototype.getPodIndex,mt.prototype.getTimeOffset=mt.prototype.getTimeOffset,mt.prototype.getMediaUrl=mt.prototype.getMediaUrl,mt.prototype.getAdvertiserName=mt.prototype.getAdvertiserName,mt.prototype.getCreativeAdId=mt.prototype.getCreativeAdId,mt.prototype.getAdId=mt.prototype.getAdId,mt.prototype.getVastMediaWidth=mt.prototype.getVastMediaWidth,mt.prototype.getVastMediaHeight=mt.prototype.getVastMediaHeight,mt.prototype.getVastMediaBitrate=mt.prototype.getVastMediaBitrate,mt.prototype.getDescription=mt.prototype.getDescription,mt.prototype.getTitle=mt.prototype.getTitle,mt.prototype.getPositionInSequence=mt.prototype.getPositionInSequence,mt.prototype.getSequenceLength=mt.prototype.getSequenceLength,mt.prototype.setMuted=mt.prototype.setMuted,mt.prototype.resize=mt.prototype.resize,mt.prototype.isLinear=mt.prototype.isLinear,mt.prototype.isMuted=mt.prototype.isMuted,mt.prototype.setVolume=mt.prototype.setVolume,mt.prototype.getVolume=mt.prototype.getVolume,mt.prototype.play=mt.prototype.play,mt.prototype.pause=mt.prototype.pause,mt.prototype.skip=mt.prototype.skip,mt.prototype.canSkipNow=mt.prototype.canSkipNow,mt.prototype.getTimeUntilSkippable=mt.prototype.getTimeUntilSkippable,mt.prototype.isSkippable=mt.prototype.isSkippable,mt.prototype.isPaused=mt.prototype.isPaused,mt.prototype.getRemainingTime=mt.prototype.getRemainingTime,mt.prototype.getMinSuggestedDuration=mt.prototype.getMinSuggestedDuration,mt.prototype.getDuration=mt.prototype.getDuration,mt.prototype.needsSkipUI=mt.prototype.needsSkipUI;function sn(){}we("shaka.ads.Utils",sn),sn.ADS_LOADED="ads-loaded",sn.AD_STARTED="ad-started",sn.AD_FIRST_QUARTILE="ad-first-quartile",sn.AD_MIDPOINT="ad-midpoint",sn.AD_THIRD_QUARTILE="ad-third-quartile",sn.AD_COMPLETE="ad-complete",sn.AD_STOPPED="ad-stopped",sn.AD_SKIPPED="ad-skipped",sn.AD_VOLUME_CHANGED="ad-volume-changed",sn.AD_MUTED="ad-muted",sn.AD_PAUSED="ad-paused",sn.AD_RESUMED="ad-resumed",sn.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",sn.CUEPOINTS_CHANGED="ad-cue-points-changed",sn.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",sn.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",sn.AD_CLICKED="ad-clicked",sn.AD_PROGRESS="ad-progress",sn.AD_BUFFERING="ad-buffering",sn.AD_IMPRESSION="ad-impression",sn.AD_DURATION_CHANGED="ad-duration-changed",sn.AD_CLOSED="ad-closed",sn.AD_LOADED="ad-loaded",sn.ALL_ADS_COMPLETED="all-ads-completed",sn.AD_LINEAR_CHANGED="ad-linear-changed",sn.AD_METADATA="ad-metadata",sn.AD_RECOVERABLE_ERROR="ad-recoverable-error",sn.AD_ERROR="ad-error",sn.AD_BREAK_READY="ad-break-ready",sn.AD_INTERACTION="ad-interaction",sn.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",sn.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",sn.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function rc(e,t,n,r,a){var u=this;this.s=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=a,this.j=null,this.h=new Ct,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.10.12"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(c){Jk(u,c)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(c){kv(u,c)}),this.h.D(this.i,"ended",function(){u.m.contentComplete()}),this.h.ha(this.i,"play",function(){u.F=!0})}rc.prototype.configure=function(e){this.o=e},rc.prototype.stop=function(){this.g&&this.g.stop(),this.s&&oa(this.s)},rc.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function kv(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new $e("ad-error",t)),ac(e,null),e.l(new $e("ad-cue-points-changed",new Map().set("cuepoints",[])))}function Jk(e,t){if(e.l(new $e("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new $e("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=b(r);for(var a=r.next();!a.done;a=r.next())t.push({start:a.value,end:null});e.l(new $e("ad-cue-points-changed",new Map().set("cuepoints",t)))}eA(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,sc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,sc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in h?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,sc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,sc(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.ha(e.i,"play",function(){e.F=!0,e.g.start()})}catch{ac(e,null)}}function sc(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function eA(e){function t(n,r){n=new Map().set("originalEvent",n),e.l(new $e(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){kv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){Av(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){Av(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){ac(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){ac(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function Av(e,t){var n=t.getAd();n?(e.j=new mt(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new $e("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new $e("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):je("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function ac(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new $e("ad-content-resume-requested")),e.l(new $e("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function gt(e,t,n,r,a){this.g=e,this.h=t,this.j=n,this.l=r,this.i=a}w=gt.prototype,w.needsSkipUI=function(){return!0},w.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},w.getMinSuggestedDuration=function(){return this.getDuration()},w.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},w.isPaused=function(){return this.g.paused},w.isSkippable=function(){return this.h},w.getTimeUntilSkippable=function(){return this.h?0:Math.max(this.getRemainingTime(),0)},w.canSkipNow=function(){return this.getTimeUntilSkippable()==0},w.skip=function(){this.j()},w.pause=function(){return this.g.pause()},w.play=function(){return this.g.play()},w.getVolume=function(){return this.g.volume},w.setVolume=function(e){this.g.volume=e},w.isMuted=function(){return this.g.muted},w.isLinear=function(){return!0},w.resize=function(){},w.setMuted=function(e){this.g.muted=e},w.getSequenceLength=function(){return this.l},w.getPositionInSequence=function(){return this.i},w.getTitle=function(){return""},w.getDescription=function(){return""},w.getVastMediaBitrate=function(){return 0},w.getVastMediaHeight=function(){return 0},w.getVastMediaWidth=function(){return 0},w.getAdId=function(){return""},w.getCreativeAdId=function(){return""},w.getAdvertiserName=function(){return""},w.getMediaUrl=function(){return null},w.getTimeOffset=function(){return 0},w.getPodIndex=function(){return 0},w.release=function(){this.g=null},we("shaka.ads.InterstitialAd",gt),gt.prototype.release=gt.prototype.release,gt.prototype.getPodIndex=gt.prototype.getPodIndex,gt.prototype.getTimeOffset=gt.prototype.getTimeOffset,gt.prototype.getMediaUrl=gt.prototype.getMediaUrl,gt.prototype.getAdvertiserName=gt.prototype.getAdvertiserName,gt.prototype.getCreativeAdId=gt.prototype.getCreativeAdId,gt.prototype.getAdId=gt.prototype.getAdId,gt.prototype.getVastMediaWidth=gt.prototype.getVastMediaWidth,gt.prototype.getVastMediaHeight=gt.prototype.getVastMediaHeight,gt.prototype.getVastMediaBitrate=gt.prototype.getVastMediaBitrate,gt.prototype.getDescription=gt.prototype.getDescription,gt.prototype.getTitle=gt.prototype.getTitle,gt.prototype.getPositionInSequence=gt.prototype.getPositionInSequence,gt.prototype.getSequenceLength=gt.prototype.getSequenceLength,gt.prototype.setMuted=gt.prototype.setMuted,gt.prototype.resize=gt.prototype.resize,gt.prototype.isLinear=gt.prototype.isLinear,gt.prototype.isMuted=gt.prototype.isMuted,gt.prototype.setVolume=gt.prototype.setVolume,gt.prototype.getVolume=gt.prototype.getVolume,gt.prototype.play=gt.prototype.play,gt.prototype.pause=gt.prototype.pause,gt.prototype.skip=gt.prototype.skip,gt.prototype.canSkipNow=gt.prototype.canSkipNow,gt.prototype.getTimeUntilSkippable=gt.prototype.getTimeUntilSkippable,gt.prototype.isSkippable=gt.prototype.isSkippable,gt.prototype.isPaused=gt.prototype.isPaused,gt.prototype.getRemainingTime=gt.prototype.getRemainingTime,gt.prototype.getMinSuggestedDuration=gt.prototype.getMinSuggestedDuration,gt.prototype.getDuration=gt.prototype.getDuration,gt.prototype.needsSkipUI=gt.prototype.needsSkipUI;function lc(e,t,n,r){var a=this;this.F=e,this.B=t,this.i=n,this.C=null,this.m=!0,this.s=this.i,this.g=r,this.G=new Set,this.A=new Set,this.o=new Map,this.h=new Te,Hp(this),this.I=new Ct,this.j=new Ct,this.H=!1,this.l=null,this.I.D(this.i,"timeupdate",function(){if(!a.H){var u=a.l==null||a.l==0;a.l=a.i.currentTime,(u=Iv(a,u))&&Mv(a,u,1,1,Date.now())}}),new Mt(function(){var u,c,d,p,S,T,E,I,A,R;return z(function(D){switch(D.g){case 1:if(!a.A.size||a.H||a.l==null){D.u(0);break}u=!1,c=Array.from(a.A),d=a.B.Ob(),p=b(c),S=p.next();case 3:if(S.done){D.u(5);break}if(T=S.value,E=T.endTime||T.startTime,!(1<=d.start-E)){I=T.startTime-a.l,0<I&&10>=I&&(a.o.has(T)||a.o.set(T,a.h.preload(T.uri))),D.u(4);break}if(!a.o.has(T)){D.u(7);break}return k(D,a.o.get(T),8);case 8:(A=D.h)&&A.destroy(),a.o.delete(T);case 7:R=JSON.stringify(T),a.G.has(R)&&a.G.delete(R),a.A.delete(T),u=!0;case 4:S=p.next(),D.u(3);break;case 5:u&&Vp(a),V(D)}})}).Sa(1)}lc.prototype.configure=function(e){this.F&&this.m==e.supportsMultipleMediaElements&&((this.m=!e.supportsMultipleMediaElements)?(this.s=this.i,this.C&&(this.C.parentElement&&this.F.removeChild(this.C),this.C=null)):(this.C||(e=document.createElement(this.i.tagName),e.autoplay=!0,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgb(0, 0, 0)",e.setAttribute("playsinline",""),this.C=e),this.s=this.C))},lc.prototype.stop=function(){this.j&&this.j.Ra(),this.G.clear(),this.A.clear(),this.h.Qe(),this.o.clear(),this.h.detach(),this.H=!1,this.l=null},lc.prototype.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.F&&oa(this.F),this.h.destroy()};function tA(e,t){var n,r,a,u,c,d,p,S;z(function(T){if(T.g==1)return e.B.yg()==Ao&&e.m?(je("Unsupported interstitial when using single media element",t),T.return()):(Hp(e),n=!1,k(T,nA(e,t),2));if(r=T.h,r.length)for(a=b(r),u=a.next();!u.done;u=a.next())c=u.value,d=JSON.stringify(c),e.G.has(d)||(n=!0,e.G.add(d),e.A.add(c),p=!1,t.Ab&&e.l==null?p=!0:c.startTime!=0||c.Ie?e.l!=null&&(S=t.startTime-e.l,0<S&&10>=S&&(p=!0)):p=!0,p&&(e.o.has(c)||e.o.set(c,e.h.preload(c.uri))));else je("Unsupported interstitial",t);n&&Vp(e),V(T)})}function Iv(e,t,n){n=n===void 0?0:n;var r=0,a=null;if(e.A.size&&e.l!=null){var u=e.i.ended,c=Array.from(e.A).sort(function(S,T){return T.startTime-S.startTime});c=b(c);for(var d=c.next();!d.done;d=c.next()){d=d.value;var p=!1;if(t?p=d.Ab:u?p=d.nc:d.Ab||d.nc||(p=e.l-Math.round(1e3*d.startTime)/1e3,p=0<p&&(1>=p||!d.Ie)),p){if(r==n){a=d;break}r++}}}return a}function Mv(e,t,n,r,a,u){u=u===void 0?0:u;var c,d,p,S,T,E,I,A,R,D,L,F,U,q;z(function(N){switch(N.g){case 1:if(c=Date.now(),!e.s.parentElement&&e.F&&e.F.appendChild(e.s),r==1&&n==1&&(n=Array.from(e.A).filter(function(G){return t.Ab?G.Ab==t.Ab:t.nc?G.nc==t.nc:.001>Math.abs(G.startTime-t.startTime)}).length),(t.once||t.Ab)&&(u++,e.A.delete(t),Vp(e)),e.H=!0,!e.m||r!=1){N.u(2);break}return e.g(new $e("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),d=new Zt,p=function(G){return z(function(Q){if(Q.g==1)return G.state!="detach"?Q.u(0):Mg()?k(Q,new Promise(function(re){return new Mt(re).Y(.1)}),3):Q.u(3);d.resolve(),e.j.jb(e.B,"onstatechange",p),V(Q)})},e.j.D(e.B,"onstatechange",p),k(N,d,2);case 2:return e.m||(e.i.pause(),t.Oc!=null&&t.Oc!=0&&(e.i.currentTime+=t.Oc)),S=!1,T=null,E=function(){if(!e.m&&t.Oc==null)if(t.se&&t.endTime&&t.endTime!=1/0)e.i.currentTime!=t.endTime&&(e.i.currentTime=t.endTime);else{var G=Date.now();e.i.currentTime+=(G-a)/1e3,a=G}},I=function(){var G,Q;return z(function(re){if(re.g==1)return E(),T&&T.stop(),(G=Iv(e,t.Ab,r-u))?(e.g(new $e("ad-stopped")),e.j.Ra(),Mv(e,G,n,++r,a,u),re.u(0)):e.m?k(re,e.h.detach(),4):k(re,e.h.bc(),4);e.m&&(Q=t.Oc,Q==null&&(Q=t.se&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-a)/1e3),e.g(new $e("ad-content-resume-requested",new Map().set("offset",Q)))),e.g(new $e("ad-stopped")),e.j.Ra(),e.H=!1,e.m||(E(),e.i.ended||e.i.play()),V(re)})},A=function(G){return z(function(Q){return S?Q.return():(S=!0,e.g(new $e("ad-error",new Map().set("originalEvent",G))),k(Q,I(),0))})},R=function(){return z(function(G){if(G.g==1)return S?G.return():(S=!0,k(G,I(),2));e.g(new $e("ad-complete")),V(G)})},D=function(){return z(function(G){return S?G.return():(S=!0,e.g(new $e("ad-skipped")),k(G,I(),0))})},L=new gt(e.s,t.isSkippable,D,n,r),e.m||(L.setMuted(e.i.muted),L.setVolume(e.i.volume)),e.g(new $e("ad-started",new Map().set("ad",L))),L.canSkipNow()&&e.g(new $e("ad-skip-state-changed")),e.j.ha(e.h,"error",A),e.j.ha(e.h,"firstquartile",function(){E(),e.g(new $e("ad-first-quartile"))}),e.j.ha(e.h,"midpoint",function(){E(),e.g(new $e("ad-midpoint"))}),e.j.ha(e.h,"thirdquartile",function(){E(),e.g(new $e("ad-third-quartile"))}),e.j.ha(e.h,"complete",R),e.j.D(e.s,"play",function(){e.g(new $e("ad-resumed"))}),e.j.D(e.s,"pause",function(){e.g(new $e("ad-paused"))}),e.j.D(e.s,"volumechange",function(){e.s.muted?e.g(new $e("ad-muted")):e.g(new $e("ad-volume-changed"))}),Z(N,4),t.Ef&&(T=new Mt(function(){L.skip()}).Y(t.Ef)),Hp(e),k(N,e.h.Rb(e.s),6);case 6:return e.o.has(t)?k(N,e.o.get(t),10):k(N,e.h.load(t.uri),8);case 10:return F=N.h,e.o.delete(t),F?k(N,e.h.load(F),8):k(N,e.h.load(t.uri),8);case 8:U=(Date.now()-c)/1e3,e.g(new $e("ads-loaded",new Map().set("loadTime",U))),e.m&&e.i.play(),K(N,0);break;case 4:q=ne(N),A(q),V(N)}})}function nA(e,t){var n,r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me,le,ue,de,be,Ce,ke,Oe;return z(function(Ie){switch(Ie.g){case 1:if(n=[],!t||(r=t.values.find(function(Fe){return Fe.key=="X-ASSET-URI"}),a=t.values.find(function(Fe){return Fe.key=="X-ASSET-LIST"}),!r&&!a))return Ie.return(n);if(u=t.values.find(function(Fe){return Fe.key=="X-RESTRICT"}),d=c=!0,u&&u.data&&(p=u.data,c=!p.includes("SKIP"),d=!p.includes("JUMP")),S=null,(T=t.values.find(function(Fe){return Fe.key=="X-RESUME-OFFSET"}))&&(E=T.data,S=parseFloat(E),isNaN(S)&&(S=null)),I=null,(A=t.values.find(function(Fe){return Fe.key=="X-PLAYOUT-LIMIT"}))&&(R=A.data,I=parseFloat(R),isNaN(I)&&(I=null)),F=L=D=!1,(U=t.values.find(function(Fe){return Fe.key=="CUE"}))&&(q=U.data,D=q.includes("ONCE"),L=q.includes("PRE"),F=q.includes("POST")),N=!1,(G=t.values.find(function(Fe){return Fe.key=="X-TIMELINE-OCCUPIES"}))?(Q=G.data,N=Q.includes("RANGE")):!T&&e.B.V()&&(N=!L&&!F),r){if(re=r.data,!re)return Ie.return(n);n.push({startTime:t.startTime,endTime:t.endTime,uri:re,isSkippable:c,Ie:d,Oc:S,Ef:I,once:D,Ab:L,nc:F,se:N}),Ie.u(2);break}if(!a){Ie.u(2);break}return ae=a.data,ae?(me=Qn([ae],_i()),le=e.B.xb().request(7,me),Z(Ie,4),k(Ie,le.promise,6)):Ie.return(n);case 6:for(ue=Ie.h,de=fn(ue.data),be=JSON.parse(de),Ce=b(be.ASSETS),ke=Ce.next();!ke.done;ke=Ce.next())Oe=ke.value,Oe.URI&&n.push({startTime:t.startTime,endTime:t.endTime,uri:Oe.URI,isSkippable:c,Ie:d,Oc:S,Ef:I,once:D,Ab:L,nc:F,se:N});K(Ie,2);break;case 4:ne(Ie);case 2:return Ie.return(n)}})}function Vp(e){for(var t=[],n=b(e.A),r=n.next(),a={};!r.done;a={Qb:void 0},r=n.next())r=r.value,a.Qb={start:r.startTime,end:null},r.Ab?(a.Qb.start=0,a.Qb.end=null):r.nc?(a.Qb.start=-1,a.Qb.end=null):r.se&&(a.Qb.end=r.endTime),t.find(function(u){return function(c){return u.Qb.start==c.start&&u.Qb.end==c.end}}(a))||t.push(a.Qb);e.g(new $e("ad-cue-points-changed",new Map().set("cuepoints",t)))}function Hp(e){e.h.configure(e.B.Ag());var t=e.h.xb();t.mg(),t.ng(),hy(e.B.xb(),t)}function Lr(e){this.h=e||"",this.g=0}function fa(e){ar(e,/[ \t]+/gm)}function ar(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function as(e){return e.g==e.h.length?null:(e=ar(e,/[^ \t\n]*/gm))?e[0]:null}function pt(e,t,n,r,a){if(this.h=e,e=this.h.skipOffset)if(e=ar(new Lr(e),oA),e==null)e=null;else{var u=Number(e[2]),c=Number(e[3]);e=59<u||59<c?null:(Number(e[4])||0)/1e3+c+60*u+3600*(Number(e[1])||0)}else e=null;this.j=e,this.g=a,this.i=t,this.l=n,this.o=r,this.m=!1}w=pt.prototype,w.needsSkipUI=function(){return!0},w.getDuration=function(){return this.h.durationInSeconds},w.getMinSuggestedDuration=function(){return this.getDuration()},w.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},w.isPaused=function(){return this.g.paused},w.isSkippable=function(){return typeof this.j=="number"},w.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},w.canSkipNow=function(){return this.getTimeUntilSkippable()==0},w.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},w.pause=function(){return this.g.pause()},w.play=function(){return this.g.play()},w.getVolume=function(){return this.g.volume},w.setVolume=function(e){this.g.volume=e},w.isMuted=function(){return this.g.muted},w.isLinear=function(){return this.o},w.resize=function(){},w.setMuted=function(e){this.g.muted=e},w.getSequenceLength=function(){return this.l?this.l:1},w.getPositionInSequence=function(){return this.i?this.i:1},w.getTitle=function(){return this.h.adTitle},w.getDescription=function(){return""},w.getVastMediaBitrate=function(){return 0},w.getVastMediaHeight=function(){return 0},w.getVastMediaWidth=function(){return 0},w.getAdId=function(){return this.h.adId},w.getCreativeAdId=function(){return this.h.creativeId},w.getAdvertiserName=function(){return""},w.getMediaUrl=function(){return null},w.getTimeOffset=function(){return 0},w.getPodIndex=function(){return 0},w.release=function(){this.l=this.i=this.g=this.h=null},we("shaka.ads.MediaTailorAd",pt),pt.prototype.release=pt.prototype.release,pt.prototype.getPodIndex=pt.prototype.getPodIndex,pt.prototype.getTimeOffset=pt.prototype.getTimeOffset,pt.prototype.getMediaUrl=pt.prototype.getMediaUrl,pt.prototype.getAdvertiserName=pt.prototype.getAdvertiserName,pt.prototype.getCreativeAdId=pt.prototype.getCreativeAdId,pt.prototype.getAdId=pt.prototype.getAdId,pt.prototype.getVastMediaWidth=pt.prototype.getVastMediaWidth,pt.prototype.getVastMediaHeight=pt.prototype.getVastMediaHeight,pt.prototype.getVastMediaBitrate=pt.prototype.getVastMediaBitrate,pt.prototype.getDescription=pt.prototype.getDescription,pt.prototype.getTitle=pt.prototype.getTitle,pt.prototype.getPositionInSequence=pt.prototype.getPositionInSequence,pt.prototype.getSequenceLength=pt.prototype.getSequenceLength,pt.prototype.setMuted=pt.prototype.setMuted,pt.prototype.resize=pt.prototype.resize,pt.prototype.isLinear=pt.prototype.isLinear,pt.prototype.isMuted=pt.prototype.isMuted,pt.prototype.setVolume=pt.prototype.setVolume,pt.prototype.getVolume=pt.prototype.getVolume,pt.prototype.play=pt.prototype.play,pt.prototype.pause=pt.prototype.pause,pt.prototype.skip=pt.prototype.skip,pt.prototype.canSkipNow=pt.prototype.canSkipNow,pt.prototype.getTimeUntilSkippable=pt.prototype.getTimeUntilSkippable,pt.prototype.isSkippable=pt.prototype.isSkippable,pt.prototype.isPaused=pt.prototype.isPaused,pt.prototype.getRemainingTime=pt.prototype.getRemainingTime,pt.prototype.getMinSuggestedDuration=pt.prototype.getMinSuggestedDuration,pt.prototype.getDuration=pt.prototype.getDuration,pt.prototype.needsSkipUI=pt.prototype.needsSkipUI;var oA=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function $l(e,t,n,r){this.B=e,this.K=t,this.h=n,this.l=null,this.U=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.o=new Ct}$l.prototype.stop=function(){for(var e=b(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.jb(t.target,t.type,t.listener);ca(this),this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},$l.prototype.release=function(){this.stop(),this.o&&this.o.release()},$l.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(rA(this,this.G,this.R),this.R=!1)},$l.prototype.getCuePoints=function(){for(var e=[],t=b(this.j),n=t.next();!n.done;n=t.next()){n=b(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function iA(e,t,n){var r,a,u,c,d,p,S,T,E,I,A;z(function(R){if(R.g==1)return r=Qn([t],_i()),r.method="POST",n&&(a=JSON.stringify(n),r.body=Mi(a)),u=e.K.request(7,r),Z(R,2),k(R,u.promise,4);if(R.g!=2){if(c=R.h,d=fn(c.data),p=JSON.parse(d),p.manifestUrl&&p.trackingUrl)S=new Ln(t),T=new Ln(p.trackingUrl),e.G=S.resolve(T).toString(),E=Date.now()/1e3,I=E-e.U,e.i(new $e("ads-loaded",new Map().set("loadTime",I))),A=new Ln(p.manifestUrl),e.l.resolve(S.resolve(A).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return K(R,0)}if(ne(R),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,R.return();e.l.resolve(e.H),e.l=null,V(R)})}function rA(e,t,n){var r,a,u,c,d,p,S,T,E,I,A,R,D,L,F;z(function(U){if(U.g==1)return r=Qn([t],_i()),a=e.K.request(7,r),Z(U,2),k(U,a.promise,4);if(U.g!=2){if(u=U.h,c=[],d=fn(u.data),p=JSON.parse(d),0<p.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(p.avails)){for(e.j=p.avails,S=b(e.j),T=S.next();!T.done;T=S.next())for(E=T.value,I=b(E.nonLinearAdsList),A=I.next();!A.done;A=I.next())for(R=A.value,D=b(R.nonLinearAdList),L=D.next();!L.done;L=D.next())F=L.value,sA(e,F);c=e.getCuePoints(),e.i(new $e("ad-cue-points-changed",new Map().set("cuepoints",c)))}}else e.j.length&&e.i(new $e("ad-cue-points-changed",new Map().set("cuepoints",c))),ca(e),e.j=[];return n&&(e.I||0<c.length)&&aA(e),K(U,0)}ne(U),V(U)})}function sA(e,t){var n,r,a,u,c,d,p;z(function(S){if(S.g==1)return!t.staticResource||(n=_v(t),e.F.get(n))?S.return():(r=Qn([t.staticResource],_i()),a=e.K.request(7,r),Z(S,2),e.F.set(n,[]),k(S,a.promise,4));if(S.g!=2)return u=S.h,c=fn(u.data),d=JSON.parse(c),p=d.apps,e.F.set(n,p),K(S,0);ne(S),e.F.delete(n),V(S)})}function _v(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function aA(e){Lv(e),e.I||(Rv(e),e.o.D(e.h,"seeked",function(){Rv(e)}),e.o.D(e.h,"ended",function(){ca(e)})),e.o.D(e.h,"timeupdate",function(){Lv(e)})}function Rv(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,r,a=b(e.j),u=a.next();!u.done;u=a.next()){u=u.value;for(var c=b(u.ads),d=c.next();!d.done;d=c.next())if(d=d.value,!r)d.startTimeInSeconds<t&&(r=d,n=u);else if(d.startTimeInSeconds<t&&d.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=d,n=u;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function Lv(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.C,a=r.startTimeInSeconds+.5*r.durationInSeconds,u=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),wo(e,"firstQuartile")):t>=a&&!e.s.includes("midpoint")?(e.s.push("midpoint"),wo(e,"midpoint")):t>=u&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),wo(e,"thirdQuartile")),r=e.g.getRemainingTime(),a=e.g.getDuration(),e.g.canSkipNow()&&0<r&&0<a&&wo(e,"skipStateChanged"),0<a&&(0>=r||r>a)&&ca(e)}if(!e.g||!e.g.isLinear()){e:for(r=b(e.j),a=r.next();!a.done&&(a=a.value,!(e.g&&e.g.isLinear()));a=r.next())for(u=0;u<a.ads.length;u++){var c=a.ads[u],d=c.startTimeInSeconds+c.durationInSeconds;if(c.startTimeInSeconds<=t&&d>t){if(e.N.includes(c.adId)){if(e.h.ended)continue;e.h.currentTime=d;break e}ca(e),e.L=a,e.g=new pt(c,u+1,a.ads.length,!0,e.h),e.C=c,u===0&&wo(e,"breakStart"),Dv(e);break}}if(!e.g){for(r=b(e.j),a=r.next();!a.done&&(a=a.value,!e.g);a=r.next())for(u=0;u<a.nonLinearAdsList.length;u++)if(c=a.nonLinearAdsList[u],c.nonLinearAdList.length){d=a.startTimeInSeconds;var p=e.F.get(_v(c.nonLinearAdList[0]));if(d<=t&&p&&p.length){ca(e),d=e,p=b(p);for(var S=p.next();!S.done;S=p.next())if(S=S.value,S.data.source.length){var T=document.createElement("img");T.src=S.data.source[0].url,T.style.top=(S.placeholder.top||0)+"%",T.style.height=100-(S.placeholder.top||0)+"%",T.style.left=(S.placeholder.left||0)+"%",T.style.maxWidth=100-(S.placeholder.left||0)+"%",T.style.objectFit="contain",T.style.position="absolute",d.B.appendChild(T)}e.L=a,e.g=new pt(c,u+1,a.ads.length,!1,e.h),e.C=c,u===0&&wo(e,"breakStart"),Dv(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function ca(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId);var t=e.g.m;t!==void 0&&t?wo(e,"skip"):wo(e,"complete"),t=b(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.jb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&wo(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function Dv(e){var t=!1;e.h.paused?t=!0:(wo(e,"impression"),wo(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&wo(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||wo(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(wo(e,"impression"),wo(e,"start"),t=!1):wo(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){wo(e,"pause")}});for(var n=b(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function wo(e,t){var n=e.C.trackingEvents.find(function(a){return a.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(a){return a.eventType==t})),n){n=b(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=Qn([r],_i()),r.method="POST",e.K.request(7,r))}switch(t){case"impression":e.i(new $e("ad-impression"));break;case"start":e.i(new $e("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new $e("ad-muted"));break;case"unmute":e.i(new $e("ad-volume-changed"));break;case"resume":e.i(new $e("ad-resumed"));break;case"pause":e.i(new $e("ad-paused"));break;case"firstQuartile":e.i(new $e("ad-first-quartile"));break;case"midpoint":e.i(new $e("ad-midpoint"));break;case"thirdQuartile":e.i(new $e("ad-third-quartile"));break;case"complete":e.i(new $e("ad-complete")),e.i(new $e("ad-stopped"));break;case"skip":e.i(new $e("ad-skipped")),e.i(new $e("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new $e("ad-skip-state-changed"))}}function yt(e,t){this.g=e,this.i=null,this.h=t}w=yt.prototype,w.needsSkipUI=function(){return!0},w.getDuration=function(){return this.i?this.i.duration:-1},w.getMinSuggestedDuration=function(){return this.getDuration()},w.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},w.isPaused=function(){return this.h.paused},w.isSkippable=function(){return this.g.isSkippable()},w.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},w.canSkipNow=function(){return this.getTimeUntilSkippable()==0},w.skip=function(){this.h.currentTime+=this.getRemainingTime()},w.pause=function(){return this.h.pause()},w.play=function(){return this.h.play()},w.getVolume=function(){return this.h.volume},w.setVolume=function(e){this.h.volume=e},w.isMuted=function(){return this.h.muted},w.isLinear=function(){return!0},w.resize=function(){},w.setMuted=function(e){this.h.muted=e},w.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},w.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},w.getTitle=function(){return this.g.getTitle()},w.getDescription=function(){return this.g.getDescription()},w.getVastMediaBitrate=function(){return 0},w.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},w.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},w.getAdId=function(){return this.g.getAdId()},w.getCreativeAdId=function(){return this.g.getCreativeAdId()},w.getAdvertiserName=function(){return this.g.getAdvertiserName()},w.getMediaUrl=function(){return null},w.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},w.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},w.release=function(){this.h=this.i=this.g=null},we("shaka.ads.ServerSideAd",yt),yt.prototype.release=yt.prototype.release,yt.prototype.getPodIndex=yt.prototype.getPodIndex,yt.prototype.getTimeOffset=yt.prototype.getTimeOffset,yt.prototype.getMediaUrl=yt.prototype.getMediaUrl,yt.prototype.getAdvertiserName=yt.prototype.getAdvertiserName,yt.prototype.getCreativeAdId=yt.prototype.getCreativeAdId,yt.prototype.getAdId=yt.prototype.getAdId,yt.prototype.getVastMediaWidth=yt.prototype.getVastMediaWidth,yt.prototype.getVastMediaHeight=yt.prototype.getVastMediaHeight,yt.prototype.getVastMediaBitrate=yt.prototype.getVastMediaBitrate,yt.prototype.getDescription=yt.prototype.getDescription,yt.prototype.getTitle=yt.prototype.getTitle,yt.prototype.getPositionInSequence=yt.prototype.getPositionInSequence,yt.prototype.getSequenceLength=yt.prototype.getSequenceLength,yt.prototype.setMuted=yt.prototype.setMuted,yt.prototype.resize=yt.prototype.resize,yt.prototype.isLinear=yt.prototype.isLinear,yt.prototype.isMuted=yt.prototype.isMuted,yt.prototype.setVolume=yt.prototype.setVolume,yt.prototype.getVolume=yt.prototype.getVolume,yt.prototype.play=yt.prototype.play,yt.prototype.pause=yt.prototype.pause,yt.prototype.skip=yt.prototype.skip,yt.prototype.canSkipNow=yt.prototype.canSkipNow,yt.prototype.getTimeUntilSkippable=yt.prototype.getTimeUntilSkippable,yt.prototype.isSkippable=yt.prototype.isSkippable,yt.prototype.isPaused=yt.prototype.isPaused,yt.prototype.getRemainingTime=yt.prototype.getRemainingTime,yt.prototype.getMinSuggestedDuration=yt.prototype.getMinSuggestedDuration,yt.prototype.getDuration=yt.prototype.getDuration,yt.prototype.needsSkipUI=yt.prototype.needsSkipUI;function Pv(e,t,n,r){var a=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Ct,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new $e("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(u){lA(a,u)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){a.B.length?a.j.resolve(a.B):a.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),a.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(u){u=u.getAd(),a.m=new yt(u,a.l),a.A&&(a.m.i=a.A),a.i(new $e("ad-started",new Map().set("ad",a.m))),a.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){a.s.removeAttribute("ad-active");var u=a.l.currentTime;a.o&&a.o>u&&(a.l.currentTime=a.o,a.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(u){a.A=u.getStreamData().adProgressData,a.m&&(a.m.i=a.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){a.i(new $e("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){a.i(new $e("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){a.i(new $e("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){a.i(new $e("ad-complete")),a.i(new $e("ad-stopped")),a.s.removeAttribute("ad-active"),a.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){a.i(new $e("ad-skipped")),a.i(new $e("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(u){var c=u.getStreamData();u=[],c=b(c.cuepoints);for(var d=c.next();!d.done;d=c.next())d=d.value,u.push({start:d.start,end:d.end});a.C=u,a.i(new $e("ad-cue-points-changed",new Map().set("cuepoints",u)))})}w=Pv.prototype,w.configure=function(){},w.stop=function(){this.B="",this.o=null,this.C=[]},w.release=function(){this.stop(),this.h&&this.h.release()},w.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},w.getCuePoints=function(){return this.C};function lA(e,t){e.i(new $e("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function Qe(){Xt.call(this),this.g=this.h=this.i=this.j=null,this.m=new Ev,this.o=navigator.language,this.l=null}X(Qe,Xt),w=Qe.prototype,w.setLocale=function(e){this.o=e},w.configure=function(e){this.l=e,this.j&&this.j.configure(this.l),this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},w.initInterstitial=function(e,t,n){var r=this;this.j&&this.j.release(),this.j=new lc(e,t,n,function(a){return uc(r,a)}),this.j.configure(this.l)},w.initClientSide=function(e,t,n){var r=this;if(!h.google||!google.ima||!google.ima.AdsLoader)throw new se(2,10,1e4);this.i&&this.i.release(),this.i=new rc(e,t,this.o,n,function(a){return uc(r,a)}),this.i.configure(this.l)},w.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Xt.prototype.release.call(this)},w.onAssetUnload=function(){this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new $e("ad-stopped")),this.dispatchEvent(new $e("ad-content-attach-requested")),this.m=new Ev},w.requestClientSideAds=function(e){if(!this.i)throw new se(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},w.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new se(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},w.initMediaTailor=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new $l(e,t,n,function(a){return uc(r,a)})},w.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new se(1,10,10005);var r=this.h;return n=n===void 0?"":n,r.l?e=Promise.reject(new se(1,10,10004)):(r.l=new Zt,iA(r,e,t),r.H=n||"",r.U=Date.now()/1e3,e=r.l),e},w.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new se(1,10,10005);var t=this.h;t.G=e,t.i(new $e("ads-loaded",new Map().set("loadTime",0)))},w.initServerSide=function(e,t){var n=this;if(!h.google||!google.ima||!google.ima.dai)throw new se(2,10,10002);this.g&&this.g.release(),this.g=new Pv(e,t,this.o,function(r){return uc(n,r)}),this.g.configure(this.l)},w.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new se(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&je('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.10.12",n=this.g,n.j?e=Promise.reject(new se(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Zt,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},w.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new se(1,10,10003);(e.mpt||e.mpv)&&je('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.10.12",this.g.g.replaceAdTagParameters(e)},w.getServerSideCuePoints=function(){return Ot("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},w.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},w.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:Zk(e),started:e.h,playedCompletely:e.j,skipped:e.l,errors:e.i}},w.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},w.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},w.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},w.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},w.onInterstitialMetadata=function(e,t,n){this.j||this.initInterstitial(null,e,t),this.j&&tA(this.j,n)};function uc(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;break;case"ad-complete":e.m.j++;break;case"ad-skipped":e.m.l++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}we("shaka.ads.AdManager",Qe),Qe.prototype.onInterstitialMetadata=Qe.prototype.onInterstitialMetadata,Qe.prototype.onCueMetadataChange=Qe.prototype.onCueMetadataChange,Qe.prototype.onHlsTimedMetadata=Qe.prototype.onHlsTimedMetadata,Qe.prototype.onDashTimedMetadata=Qe.prototype.onDashTimedMetadata,Qe.prototype.onManifestUpdated=Qe.prototype.onManifestUpdated,Qe.prototype.getStats=Qe.prototype.getStats,Qe.prototype.getCuePoints=Qe.prototype.getCuePoints,Qe.prototype.getServerSideCuePoints=Qe.prototype.getServerSideCuePoints,Qe.prototype.replaceServerSideAdTagParameters=Qe.prototype.replaceServerSideAdTagParameters,Qe.prototype.requestServerSideStream=Qe.prototype.requestServerSideStream,Qe.prototype.initServerSide=Qe.prototype.initServerSide,Qe.prototype.addMediaTailorTrackingUrl=Qe.prototype.addMediaTailorTrackingUrl,Qe.prototype.requestMediaTailorStream=Qe.prototype.requestMediaTailorStream,Qe.prototype.initMediaTailor=Qe.prototype.initMediaTailor,Qe.prototype.updateClientSideAdsRenderingSettings=Qe.prototype.updateClientSideAdsRenderingSettings,Qe.prototype.requestClientSideAds=Qe.prototype.requestClientSideAds,Qe.prototype.onAssetUnload=Qe.prototype.onAssetUnload,Qe.prototype.release=Qe.prototype.release,Qe.prototype.initClientSide=Qe.prototype.initClientSide,Qe.prototype.initInterstitial=Qe.prototype.initInterstitial,Qe.prototype.configure=Qe.prototype.configure,Qe.prototype.setLocale=Qe.prototype.setLocale,Qe.ADS_LOADED="ads-loaded",Qe.AD_STARTED="ad-started",Qe.AD_FIRST_QUARTILE="ad-first-quartile",Qe.AD_MIDPOINT="ad-midpoint",Qe.AD_THIRD_QUARTILE="ad-third-quartile",Qe.AD_COMPLETE="ad-complete",Qe.AD_STOPPED="ad-stopped",Qe.AD_SKIPPED="ad-skipped",Qe.AD_VOLUME_CHANGED="ad-volume-changed",Qe.AD_MUTED="ad-muted",Qe.AD_PAUSED="ad-paused",Qe.AD_RESUMED="ad-resumed",Qe.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Qe.CUEPOINTS_CHANGED="ad-cue-points-changed",Qe.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Qe.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Qe.AD_CLICKED="ad-clicked",Qe.AD_PROGRESS="ad-progress",Qe.AD_BUFFERING="ad-buffering",Qe.AD_IMPRESSION="ad-impression",Qe.AD_DURATION_CHANGED="ad-duration-changed",Qe.AD_CLOSED="ad-closed",Qe.AD_LOADED="ad-loaded",Qe.ALL_ADS_COMPLETED="all-ads-completed",Qe.AD_LINEAR_CHANGED="ad-linear-changed",Qe.AD_METADATA="ad-metadata",Qe.AD_RECOVERABLE_ERROR="ad-recoverable-error",Qe.AD_ERROR="ad-error",Qe.AD_BREAK_READY="ad-break-ready",Qe.AD_INTERACTION="ad-interaction",Qe.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Qe.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Qe.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",ic=function(){return new Qe};function Ov(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof $e){var r={};for(a in n)(t=n[a])&&typeof t=="object"?a=="detail"&&(r[a]=t):a in Event||(r[a]=t);return r}if(n instanceof Error){var a=new Set(["name","message","stack"]);for(r in n)a.add(r);for(r=b(Object.getOwnPropertyNames(n)),t=r.next();!t.done;t=r.next())a.add(t.value);for(r={},a=b(a),t=a.next();!t.done;t=a.next())t=t.value,r[t]=n[t];n={__type__:"Error",contents:r}}else if(n instanceof TimeRanges){for(a={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=b(_r(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,a.start.push(r.start),a.end.push(t);n=a}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function Gp(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=uA(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function uA(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var Nv="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),fA="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Wp=["loop","playbackRate"],cA=["pause","play"],fc={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10,isFullyLoaded:1},cc={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Xp={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},Uv=[["getConfiguration","configure"]],Bv=[["isTextTrackVisible","setTextTrackVisibility"]],hA="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),dA=["attach","attachCanvas","detach","load","unload"];function Kp(e,t,n,r,a,u,c){var d=this;this.G=e,this.K=c,this.l=new Mt(t),this.L=n,this.s=!1,this.A=r,this.F=a,this.N=u,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return qp(d)},this.C=function(p,S){switch(p=Gp(S),p.type){case"event":var T=p.targetName,E=cy(p.event);d.A(T,E);break;case"update":T=p.update;for(E in T){p=d.g[E]||{};for(var I in T[E])p[I]=T[E][I]}d.s&&(d.L(),d.s=!1);break;case"asyncComplete":if(E=p.id,I=p.error,p=d.i[E],delete d.i[E],p)if(I){E=new se(I.severity,I.category,I.code);for(T in I)E[T]=I[T];p.reject(E)}else p.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,Vl.add(this)}w=Kp.prototype,w.destroy=function(){return Vl.delete(this),Yp(this),Ti&&Fv(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},w.fb=function(){return this.h},w.Ff=function(){return this.I},w.init=function(){if(this.G.length)if(h.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.tc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=b(Vl),r=n.next();!r.done;r=n.next()){r=r.value;var a=t;r.j=new Zt,r.s=!0,hc(r,a)}},function(t){for(var n=b(Vl),r=n.next();!r.done;r=n.next())r=r.value,dc=t=="available",r.l.tc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),dc&&this.l.Y(mA),(e=Ti)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Zt,this.s=!0,hc(this,e)):Ti=null}else h.__onGCastApiAvailable!==$v&&(pc=h.__onGCastApiAvailable||null,h.__onGCastApiAvailable=$v)},w.Nf=function(e){this.o=e,this.h&&zl(this,{type:"appData",appData:this.o})},w.cast=function(){var e=this;return z(function(t){if(!e.m)throw new se(1,8,8e3);if(!dc)throw new se(1,8,8001);if(e.h)throw new se(1,8,8002);return e.j=new Zt,chrome.cast.requestSession(function(n){return hc(e,n)},function(n){return jv(e,n)}),k(t,e.j,0)})};function pA(e){e.h&&chrome.cast.requestSession(function(t){return hc(e,t)},function(t){return jv(e,t)})}w.Cc=function(){if(this.h){if(Yp(this),Ti){Fv(this);try{Ti.stop(function(){},function(){})}catch{}Ti=null}qp(this)}},w.get=function(e,t){var n=this;if(e=="video"){if(cA.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(_(Me.apply(0,arguments))))}}else if(e=="player"){if(Xp[t]&&!this.get("player","isLive")())return function(){};if(hA.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(_(Me.apply(0,arguments))))};if(dA.includes(t))return function(){return n.Ki.apply(n,[e,t].concat(_(Me.apply(0,arguments))))};if(fc[t]||cc[t])return function(){return n.g[e][t]}}return this.g[e][t]},w.set=function(e,t,n){this.g[e][t]=n,zl(this,{type:"set",targetName:e,property:t,value:n})};function hc(e,t){var n=e.N();Ti=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),qp(e),zl(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function jv(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new se(2,8,n,t))}w.Ug=function(e,t){zl(this,{type:"call",targetName:e,methodName:t,args:Me.apply(2,arguments)})},w.Ki=function(e,t){var n=Me.apply(2,arguments),r=new Zt,a=this.H.toString();this.H++,this.i[a]=r;try{zl(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:a})}catch(u){r.reject(u)}return r};function Fv(e){var t=Ti;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function qp(e){var t=Ti?Ti.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};Yp(e)}e.h=t,e.I=t?Ti.receiver.friendlyName:"",e.l.tc()}function Yp(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new se(1,7,7e3))}}function zl(e,t){t=Ov(t);var n=Ti;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},xt)}catch(r){throw t=new se(2,8,8005,r),n=new $e("error",new Map().set("detail",t)),e.A("player",n),e.Cc(),t}}var mA=.02,dc=!1,Ti=null,pc=null,Vl=new Set;function $v(e){if(pc?h.__onGCastApiAvailable=pc:delete h.__onGCastApiAvailable,pc=null,e)for(var t=b(Vl),n=t.next();!n.done;n=t.next())n.value.init();typeof h.__onGCastApiAvailable=="function"&&h.__onGCastApiAvailable(e)}function Nn(e,t,n,r){r=r===void 0?!1:r,Xt.call(this);var a=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new Kp(n,function(){return Hv(a)},function(){return Gv(a)},function(u,c){return Xv(a,u,c)},function(){return Wv(a)},function(){return Vv(a)},r),gA(this)}X(Nn,Xt),w=Nn.prototype,w.destroy=function(e){return e&&this.g.Cc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Xt.prototype.release.call(this),Promise.all(e)},w.fi=function(){return this.l},w.Vh=function(){return this.s},w.Ah=function(){return this.g.m&&dc},w.fb=function(){return this.g.fb()},w.Ff=function(){return this.g.Ff()},w.cast=function(){var e=this;return z(function(t){return t.g==1?k(t,e.g.cast(),2):e.h?k(t,e.h.bc(),0):t.return()})},w.Nf=function(e){this.g.Nf(e)},w.$i=function(){pA(this.g)},w.Cc=function(){this.g.Cc()},w.Bh=function(e,t){t=t===void 0?!1:t;var n=this;return z(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.Cc(),k(r,n.g.destroy(),2));n.g=null,n.g=new Kp(e,function(){return Hv(n)},function(){return Gv(n)},function(a,u){return Xv(n,a,u)},function(){return Wv(n)},function(){return Vv(n)},t),n.g.init(),V(r)})};function gA(e){e.g.init(),e.m=new Ct;for(var t=b(Nv),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(u){e.g.fb()||(u=cy(u),e.j.dispatchEvent(u))});for(var r in gf)e.m.D(e.h,gf[r],function(u){e.g.fb()||e.o.dispatchEvent(u)});e.l={},t={};for(var a in e.i)t={nd:t.nd},t.nd=a,Object.defineProperty(e.l,t.nd,{configurable:!1,enumerable:!0,get:function(u){return function(){return vA(e,u.nd)}}(t),set:function(u){return function(c){var d=u.nd;e.g.fb()?e.g.set("video",d,c):e.i[d]=c}}(t)});e.s={},zv(e,function(u){Object.defineProperty(e.s,u,{configurable:!1,enumerable:!0,get:function(){return xA(e,u)}})}),yA(e),e.j=new Xt,e.j.me=e.l,e.o=new Xt,e.o.me=e.s}function yA(e){var t=new Map;zv(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function zv(e,t){function n(p){return p=="constructor"||typeof r[p]!="function"?!1:!a.has(p)}var r=e.h,a=new Set,u;for(u in r)n(u)&&(a.add(u),t(u,r[u]));for(e=Object.getPrototypeOf(r),u=Object.getPrototypeOf({});e&&e!=u;){for(var c=b(Object.getOwnPropertyNames(e)),d=c.next();!d.done;d=c.next())d=d.value,n(d)&&(a.add(d),t(d,r[d]));e=Object.getPrototypeOf(e)}}function Vv(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dc(),startTime:null};e.i.pause();for(var n=b(Wp),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=b(Uv),r=n.next();!r.done;r=n.next()){var a=r.value;r=a[1],a=e.h[a[0]](),t.player[r]=a}for(n=b(Bv),r=n.next();!r.done;r=n.next())a=r.value,r=a[1],a=e.h[a[0]](),t.playerAfterLoad[r]=a;return t}function Hv(e){var t=new $e("caststatuschanged");e.dispatchEvent(t)}function Gv(e){var t=new $e(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Wv(e){for(var t=b(Uv),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var a=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var u=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var c;(r=e.g.get("player","getTextTracks")())&&r.length&&(c=r.find(function(S){return S.active}));var d=e.g.get("player","isTextTrackVisible")();a&&(e.i.autoplay=!1,t=e.h.load(a,n));var p={};for(n=b(Wp),r=n.next();!r.done;r=n.next())r=r.value,p[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var S=b(Wp),T=S.next();!T.done;T=S.next())T=T.value,e.i[T]=p[T];for(S=b(Bv),T=S.next();!T.done;T=S.next()){var E=T.value;T=E[1],E=e.g.get("player",E[0])(),e.h[T](E)}e.h.eh(d),c&&e.h.Lf(c.language,c.roles,c.forced),e.i.autoplay=u,a&&e.i.play()}},function(S){S=new Map().set("detail",S),S=new $e("error",S),e.h.dispatchEvent(S)})}function vA(e,t){if(t=="addEventListener")return function(r,a,u){return e.j.addEventListener(r,a,u)};if(t=="removeEventListener")return function(r,a,u){return e.j.removeEventListener(r,a,u)};if(e.g.fb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.fb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function xA(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,a){return e.o.addEventListener(n,r,a)};if(t=="removeEventListener")return function(n,r,a){return e.o.removeEventListener(n,r,a)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.xb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.ug()};if(t=="setVideoContainer")return function(n){return e.h.ih(n)};if(e.g.fb()){if(t=="getManifest"||t=="drmInfo")return function(){return je(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return je(t+"() does not work while casting!"),Promise.resolve()}}return e.g.fb()&&Object.keys(e.g.g.video).length==0&&(fc[t]||cc[t])||!e.g.fb()?e.h[t].bind(e.h):e.g.get("player",t)}function Xv(e,t,n){e.g.fb()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}we("shaka.cast.CastProxy",Nn),Nn.prototype.changeReceiverId=Nn.prototype.Bh,Nn.prototype.forceDisconnect=Nn.prototype.Cc,Nn.prototype.suggestDisconnect=Nn.prototype.$i,Nn.prototype.setAppData=Nn.prototype.Nf,Nn.prototype.cast=Nn.prototype.cast,Nn.prototype.receiverName=Nn.prototype.Ff,Nn.prototype.isCasting=Nn.prototype.fb,Nn.prototype.canCast=Nn.prototype.Ah,Nn.prototype.getPlayer=Nn.prototype.Vh,Nn.prototype.getVideo=Nn.prototype.fi,Nn.prototype.destroy=Nn.prototype.destroy;function so(e,t,n,r){Xt.call(this);var a=this;this.g=e,this.h=t,this.j=new Ct,this.H={video:e,player:t},this.F=n||function(){},this.I=r||function(u){return u},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new Mt(function(){Qp(a)}),wA(this)}X(so,Xt),w=so.prototype,w.isConnected=function(){return this.G},w.mi=function(){return this.o},w.Wi=function(e){this.i=e},w.Dh=function(){this.i=null},w.Xi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},w.Vi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},w.Ui=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},w.destroy=function(){var e=this,t,n;return z(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.s=null,Xt.prototype.release.call(e),k(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),V(r)})};function wA(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Kv(e)},t.onSenderDisconnected=function(){return Kv(e)},t.onSystemVolumeChanged=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();a&&lr(e,{type:"update",update:{video:{volume:a.level,muted:a.muted}}},e.l),lr(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(a){return TA(e,a)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(a){return CA(e,a)},t.start(),t=b(Nv);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(a){return qv(e,"video",a)});for(var r in gf)e.j.D(e.h,gf[r],function(a){return qv(e,"player",a)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,ha(e)}),e.j.D(e.g,"playing",function(){e.o=!1,ha(e)}),e.j.D(e.g,"pause",function(){ha(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,ha(e)}),e.j.D(e.g,"ended",function(){new Mt(function(){e.g&&e.g.ended&&(e.o=!0,ha(e))}).Y(EA)})}function Kv(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,ha(e)}function ha(e){var t;z(function(n){if(n.g==1)return k(n,Promise.resolve(),2);if(!e.h)return n.return();t=new $e("caststatuschanged"),e.dispatchEvent(t),Yv(e)||ur(e),V(n)})}function SA(e,t,n){var r,a,u,c,d,p,S,T,E,I;z(function(A){switch(A.g){case 1:for(r in t.player)a=t.player[r],e.h[r](a);return e.F(n),u=e.g.autoplay,t.manifest?(e.g.autoplay=!1,Z(A,5),k(A,e.h.load(t.manifest,t.startTime),7)):k(A,Promise.resolve(),3);case 7:K(A,3);break;case 5:return c=ne(A),d=new Map().set("detail",c),p=new $e("error",d),e.h&&e.h.dispatchEvent(p),A.return();case 3:if(!e.h)return A.return();for(S in t.video)T=t.video[S],e.g[S]=T;for(E in t.playerAfterLoad)I=t.playerAfterLoad[E],e.h[E](I);e.g.autoplay=u,t.manifest&&(e.g.play(),ur(e)),V(A)}})}function qv(e,t,n){e.h&&(Qp(e),lr(e,{type:"event",targetName:t,event:n},e.l))}function Qp(e){e.C.Y(bA);for(var t={video:{},player:{}},n=b(fA),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.V())for(var a in Xp)e.m%Xp[a]==0&&(t.player[a]=e.h[a]());for(var u in fc)e.m%fc[u]==0&&(t.player[u]=e.h[u]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),lr(e,{type:"update",update:t},e.l);for(var c in cc)e.m%cc[c]==0&&(t={player:{}},t.player[c]=e.h[c](),lr(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),Yv(e)}function Yv(e){return e.A&&(e.g.duration||e.h.V())?(Zp(e),e.A=!1,!0):!1}function Zp(e,t){var n={contentId:e.h.Dc(),streamType:e.h.V()?"LIVE":"BUFFERED",contentType:""};e.h.V()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),ur(e,t===void 0?0:t,n)}function CA(e,t){var n=Gp(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,SA(e,n.initState,n.appData),Qp(e);break;case"appData":e.F(n.appData);break;case"set":var r=n.targetName,a=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),a=="volume"){t.setSystemVolumeLevel(n);break}else if(a=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][a]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,a=n.methodName,r=="player"&&a=="load"&&(e.m=0,e.B=!1);var u=n.id,c=t.senderId;t=e.H[r],n=t[a].apply(t,n.args),r=="player"&&a=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return Qv(e,c,u,null)},function(d){return Qv(e,c,u,d)})}}function TA(e,t){var n=Gp(t.data);switch(n.type){case"PLAY":e.g.play(),ur(e);break;case"PAUSE":e.g.pause(),ur(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),ur(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),ur(e));break;case"STOP":e.h.bc().then(function(){e.h&&ur(e)});break;case"GET_STATUS":Zp(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var a=e.g.volume,u=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),a==e.g.volume&&u==e.g.muted||ur(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,a=e.I(t.contentId),u=n.autoplay||!0,e.F(t.customData),u&&(e.g.autoplay=!0),e.h.load(a,r).then(function(){e.h&&Zp(e)}).catch(function(c){var d="LOAD_FAILED";c.category==7&&c.code==7e3&&(d="LOAD_CANCELLED"),lr(e,{requestId:Number(n.requestId),type:d},e.s)});break;default:lr(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function Qv(e,t,n,r){e.h&&lr(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function lr(e,t,n,r){e.G&&(e=Ov(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function ur(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?kA:e.h.pf()?IA:e.g.paused?MA:AA,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),lr(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}we("shaka.cast.CastReceiver",so),so.prototype.destroy=so.prototype.destroy,so.prototype.setContentArtist=so.prototype.Ui,so.prototype.setContentImage=so.prototype.Vi,so.prototype.setContentTitle=so.prototype.Xi,so.prototype.clearContentMetadata=so.prototype.Dh,so.prototype.setContentMetadata=so.prototype.Wi,so.prototype.isIdle=so.prototype.mi,so.prototype.isConnected=so.prototype.isConnected;var bA=.5,EA=5,kA="IDLE",AA="PLAYING",IA="BUFFERING",MA="PAUSED";function Zv(e,t,n,r,a){if(r>=a)return null;for(var u=-1,c=-1,d=0;d<n.length;d++)if(n[d].some(function(N){return N!=null&&N.g.trim()!=""})){u=d;break}for(d=n.length-1;0<=d;d--)if(n[d].some(function(N){return N!=null&&N.g.trim()!=""})){c=d;break}if(u===-1||c===-1)return null;for(var p=d=!1,S="white",T="black",E=Jp(r,a,d,p,S,T);u<=c;u++){for(var I=n[u],A=-1,R=-1,D=0;D<I.length;D++)if(I[D]!=null&&I[D].g.trim()!==""){A=D;break}for(D=I.length-1;0<=D;D--)if(I[D]!=null&&I[D].g.trim()!==""){R=D;break}if(A===-1||R===-1)I=Jv(r,a),e.nestedCues.push(I);else{for(;A<=R;A++)if(D=I[A]){var L=D.l,F=D.i,U=D.j,q=D.h;(L!=d||F!=p||U!=S||q!=T)&&(E.payload&&e.nestedCues.push(E),E=Jp(r,a,L,F,U,q),d=L,p=F,S=U,T=q),E.payload+=D.g}else E.payload+=" ";E.payload&&e.nestedCues.push(E),u!==c&&(E=Jv(r,a),e.nestedCues.push(E)),E=Jp(r,a,d,p,S,T)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Jp(e,t,n,r,a,u){return e=new Be(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=a,e.backgroundColor=u,e}function Jv(e,t){return e=new Be(e,t,""),e.lineBreak=!0,e}function ex(e,t,n,r,a){this.g=e,this.l=t,this.i=n,this.h=r,this.j=a}function e0(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Hl(this)}function mc(e,t,n){var r="CC"+((e.A<<1|e.s)+1),a=new Be(t,n,"");a.lineInterpretation=1;var u=ox.get(e.g);return u&&(a.line=u),(t=Zv(a,r,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(u=ox.get(e.g+3-t.cue.nestedCues.length))&&(a.line=u),t}function Hl(e){fr(e,0,15),e.g=1}function da(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case 0:r=nx.has(n)?nx.get(n):String.fromCharCode(n);break;case 1:r=_A.get(n);break;case 2:e.i[e.g].pop(),r=RA.get(n);break;case 3:e.i[e.g].pop(),r=LA.get(n)}r&&e.i[e.g].push(new ex(r,e.m,e.j,e.o,e.l))}}function tx(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(u){return u});else for(var a=0;a<r;a++)e.i[t+a]=e.i[n+a].map(function(u){return u})}function fr(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var nx=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),_A=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),RA=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),LA=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),ox=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function gc(e,t){this.h=0,this.o=new e0(e,t),this.i=new e0(e,t),this.g=this.j=new e0(e,t),this.l=0,this.m=null}function t0(e,t,n){e.g=e.i;var r=e.g,a=null;return e.h!==3&&e.h!==4&&(a=mc(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,fr(n,0,15),n=e.j,n.g=0<n.h?n.h:0,fr(n,0,15),r.g=15),e.h=3,r.h=t,a}function ix(e){e.h=1,e.g=e.j,e.g.h=0}function rx(e){at("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var DA="black green blue cyan red yellow magenta black".split(" "),sx="white green blue cyan red yellow magenta white_italics".split(" ");function ax(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",n0(this)}function n0(e){e.i=[];for(var t=0;16>t;t++)e.i.push(o0())}function o0(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function ls(e,t){lx(e)&&(e.i[e.h][e.g]=new ex(t,e.C,e.A,e.s,e.B),e.g++)}function lx(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}ax.prototype.isVisible=function(){return this.l};function us(e,t,n){var r=new Be(e.j,t,"");r.textAlign=e.F===0?"left":e.F===1?"right":gn;var a=r.region;switch(e.I&&(a.id+="svc"+e.I),a.id+="win"+e.N,a.height=e.o,a.width=e.m,a.heightUnits=2,a.widthUnits=2,a.viewportAnchorX=e.H,a.viewportAnchorY=e.L,a.viewportAnchorUnits=e.K?ce:2,e.G){case 0:a.regionAnchorX=0,a.regionAnchorY=0;break;case 1:a.regionAnchorX=50,a.regionAnchorY=0;break;case 2:a.regionAnchorX=100,a.regionAnchorY=0;break;case 3:a.regionAnchorX=0,a.regionAnchorY=50;break;case 4:a.regionAnchorX=50,a.regionAnchorY=50;break;case 5:a.regionAnchorX=100,a.regionAnchorY=50;break;case 6:a.regionAnchorX=0,a.regionAnchorY=100;break;case 7:a.regionAnchorX=50,a.regionAnchorY=100;break;case 8:a.regionAnchorX=100,a.regionAnchorY=100}return(n=Zv(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function PA(){this.i=[],this.h=null,this.g=0}function OA(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new yc(e.h)),e.h=null,e.g=0))}function yc(e){this.g=0,this.h=e}yc.prototype.na=function(){return this.g<this.h.length},yc.prototype.va=function(){return this.g};function eo(e){if(!e.na())throw new se(2,2,3e3);return e.h[e.g++]}yc.prototype.skip=function(e){if(this.g+e>this.h.length)throw new se(2,2,3e3);this.g+=e};function NA(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function UA(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=eo(t).value,t=null,n=b(Gl(e,n));for(var a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()&&(t=us(a,r,e.i)),n0(a);return t}if(n===137)for(t=eo(t).value,t=b(Gl(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(n===138){for(n=eo(t).value,t=null,n=b(Gl(e,n)),a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()&&(t=us(a,r,e.i)),a.l=!1;return t}if(n===139){for(n=eo(t).value,t=null,n=b(Gl(e,n)),a=n.next();!a.done;a=n.next())a=e.h[a.value],a.isVisible()?t=us(a,r,e.i):a.j=r,a.l=!a.l;return t}if(n===140)return t=eo(t).value,ux(e,t,r);if(n===143)return r=ux(e,255,r),fx(e),r;if(n===144)t.skip(1),r=eo(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=eo(t).value,n=eo(t).value,t.skip(1),e.g&&(t=cx((n&48)>>4,(n&12)>>2,n&3),e.g.B=cx((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=eo(t).value,t=eo(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=eo(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,a=e.h[n]!==null,!a){var u=new ax(n,e.i);u.j=r,e.h[n]=u}r=eo(t).value,u=eo(t).value;var c=eo(t).value,d=eo(t).value,p=eo(t).value;t=eo(t).value,a&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=u&127,t.H=c,t.G=(d&240)>>4,t.K=0<(u&128),t.o=(d&15)+1,t.m=(p&63)+1,e.g=e.h[n]}}}return null}function Gl(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function ux(e,t,n){var r=null;t=b(Gl(e,t));for(var a=t.next();!a.done;a=t.next()){a=a.value;var u=e.h[a];u.isVisible()&&(r=us(u,n,e.i)),e.h[a]=null}return r}function fx(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function cx(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],BA[e<<2|t<<1|n]}var hx=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),BA="black blue green cyan red magenta yellow white".split(" ");function pa(){this.h=[],this.g=[],this.i=new PA,this.l=0,this.m=new Map([["CC1",new gc(0,0)],["CC2",new gc(0,1)],["CC3",new gc(1,0)],["CC4",new gc(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,i0(this)}pa.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,i0(this),e=b(this.j.values());for(var t=e.next();!t.done;t=e.next())fx(t.value)};function i0(e){e.o=0,e.s=0;for(var t=b(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Hl(n.i),Hl(n.j),Hl(n.o);e.B=!0}pa.prototype.extract=function(e,t){if(this.B){for(var n=b(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new en(e,0),!(8>e.getLength())&&e.T()===181&&e.la()===49&&e.P()===1195456820&&e.T()===3&&(n=e.T(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var a=e.T(),u=(a&4)>>2,c=e.T(),d=e.T();u&&(a&=3,a===0||a===1?this.h.push({pts:t,type:a,bb:c,Cb:d,order:this.h.length}):(this.g.push({pts:t,type:a,value:c,order:this.g.length}),this.g.push({pts:t,type:2,value:d,order:this.g.length})))}},pa.prototype.decode=function(){function e(a,u){return a.pts-u.pts||a.order-u.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=b(this.h),r=n.next();!r.done;r=n.next())(r=jA(this,r.value))&&t.push(r);for(n=b(this.g),r=n.next();!r.done;r=n.next())OA(this.i,r.value);for(n=b(this.i.i),r=n.next();!r.done;r=n.next())r=FA(this,r.value),t.push.apply(t,_(r));return this.i.i=[],this.h=[],this.g=[],t};function jA(e,t){var n=t.type;if((t.bb&112)===16){var r=t.bb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.bb===255&&t.Cb===255||!t.bb&&!t.Cb||!dx(t.bb)||!dx(t.Cb))return 45<=++e.l&&i0(e),null;e.l=0,t.bb&=127,t.Cb&=127;var a=t.bb;if(1<=a&&15>=a||!t.bb&&!t.Cb)return null;if(a=null,(t.bb&112)===16)e:{if(e.A.add(r),r=t.bb,e=t.Cb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1];var u=(e&30)>>1;r="white",a=!1,7>u?r=sx[u]:u===7&&(a=!0),e=(e&1)===1,n.h!==4&&(u=n.g,n.h===3&&t!==u.g&&(n=1+t-u.h,tx(u,n,1+u.g-u.h,u.h),fr(u,0,n-1),fr(u,t+1,15-t)),u.g=t,u.m=e,u.j=a,u.l=r,u.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",da(n.g,0,32),r=!1,t=sx[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",!(r&7)&&(t=DA[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)da(n.g,1,e);else if((r&246)===18&&(e&224)===32)da(n.g,r&1?3:2,e);else if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.Cb){case 32:ix(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=t0(n,2,e);break;case 38:r=t0(n,3,e);break;case 39:r=t0(n,4,e);break;case 40:da(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Hl(n.o),rx(n);break;case 43:rx(n);break;case 44:t=n.i,r=null,n.h!==4&&(r=mc(t,n.l,e)),fr(t,0,15);break;case 45:t=n.g,n.h!==3?r=null:(r=mc(t,n.l,e),a=t.g-t.h+1,tx(t,a-1,a,t.h),fr(t,0,a-1),fr(t,t.g,15-t.g),n.l=e);break;case 46:fr(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=mc(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,ix(n),n.l=e,r=t}a=r;break e}a=null}else e=t.Cb,da(n.g,0,t.bb),da(n.g,0,e);return a}function FA(e,t){var n=[];try{for(;t.na();){var r=eo(t).value,a=(r&224)>>5,u=r&31;if(a===7&&u!=0&&(a=eo(t).value&63),a!=0){e.A.add("svc"+a),e.j.has(a)||e.j.set(a,new NA(a));for(var c=e.j.get(a),d=t.va();t.va()-d<u;){a=c;var p=t,S=eo(p),T=S.value,E=S.pts;if(T===16){var I=eo(p);T=T<<16|I.value}if(0<=T&&31>=T){p=a;var A=T,R=E;if(p.g){var D=p.g;switch(a=null,A){case 8:!lx(D)||0>=D.g&&0>=D.h||(0>=D.g?(D.g=D.m-1,D.h--):D.g--,D.i[D.h][D.g]=null);break;case 13:if(D.isVisible()&&(a=us(D,R,p.i)),D.h+1>=D.o){for(p=D,A=0,R=1;16>R;R++,A++)p.i[A]=p.i[R];for(R=0;1>R;R++,A++)p.i[A]=o0()}else D.h++;D.g=0;break;case 14:D.isVisible()&&(a=us(D,R,p.i)),D.i[D.h]=o0(),D.g=0;break;case 12:D.isVisible()&&(a=us(D,R,p.i)),n0(D),p=D,p.h=0,p.g=0}var L=a}else L=null}else if(128<=T&&159>=T)L=UA(a,p,T,E);else{if(4096<=T&&4127>=T)a=p,p=T&255,8<=p&&15>=p?a.skip(1):16<=p&&23>=p?a.skip(2):24<=p&&31>=p&&a.skip(3);else if(4224<=T&&4255>=T)a=p,p=T&255,128<=p&&135>=p?a.skip(4):136<=p&&143>=p&&a.skip(5);else if(32<=T&&127>=T)p=T,a.g&&(p===127?ls(a.g,"♪"):ls(a.g,String.fromCharCode(p)));else if(160<=T&&255>=T)a.g&&ls(a.g,String.fromCharCode(T));else if(4128<=T&&4223>=T){if(p=T&255,a.g)if(hx.has(p)){var F=hx.get(p);ls(a.g,F)}else ls(a.g,"_")}else 4256<=T&&4351>=T&&a.g&&((T&255)!=160?ls(a.g,"_"):ls(a.g,"[CC]"));L=null}(a=L)&&n.push(a)}}}}catch(U){if(U instanceof se&&U.code===3e3)at("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw U}return n}function dx(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}pa.prototype.getStreams=function(){return Array.from(this.A)},we("shaka.cea.CeaDecoder",pa),bt=function(){return new pa};function px(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(_(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var a=0;e[r]==255;)a+=255,r++;a+=e[r++],n==4&&t.push(e.subarray(r,r+a)),r+=a}return t}function vc(){this.j=new Map,this.i=this.h=0,this.g=r0}vc.prototype.init=function(e){function t(u){u=u.name,u in xc&&(n.g=xc[u])}var n=this,r=[],a=[];if(new tn().box("moov",Rt).box("mvex",Rt).S("trex",function(u){var c=u.reader;c.skip(4),c.skip(4),u=c.P(),c=c.P(),n.h=u,n.i=c}).box("trak",Rt).S("tkhd",function(u){var c=u.reader;u=u.version,u==1?(c.skip(8),c.skip(8)):(c.skip(4),c.skip(4));var d=c.P();u==1?c.skip(8):c.skip(4),c.skip(4),c.skip(8),c.skip(2),c.skip(2),c.skip(2),c.skip(2),c.skip(36),c.la(),c.la(),c.la(),c.la(),r.push(d)}).box("mdia",Rt).S("mdhd",function(u){u=If(u.reader,u.version),a.push(u.timescale)}).box("minf",Rt).box("stbl",Rt).S("stsd",Ar).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",Lo).box("sinf",Rt).box("frma",function(u){u=Jy(u.reader).codec,u in xc&&(n.g=xc[u])}).parse(e,!0),!r.length||!a.length||r.length!=a.length)throw new se(2,2,2010);this.g==r0&&je("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(u,c){n.j.set(u,a[c])})},vc.prototype.parse=function(e){var t=this;if(this.g==r0)return[];var n=[],r=0,a=[];return new tn().box("moof",function(u){r=u.start,a=[],Rt(u)}).box("traf",function(u){a.push({baseMediaDecodeTime:null,Yc:t.h,Id:t.i,Og:[],timescale:9e4}),Rt(u)}).S("trun",function(u){var c=a[a.length-1];u=Qy(u.reader,u.version,u.flags),c.Og.push(u)}).S("tfhd",function(u){var c=a[a.length-1];u=Yy(u.reader,u.flags),c.Yc=u.Yc||t.h,c.Id=u.Id||t.i,u=u.trackId,t.j.has(u)&&(c.timescale=t.j.get(u))}).S("tfdt",function(u){var c=a[a.length-1];u=Af(u.reader,u.version),c.baseMediaDecodeTime=u.baseMediaDecodeTime}).box("mdat",function(u){for(var c=r-u.start-8,d=u.reader.va(),p=b(a),S=p.next();!S.done;S=p.next()){if(S=S.value,S.baseMediaDecodeTime===null)throw je("Unable to find base media decode time for CEA captions!"),new se(2,2,2010);u.reader.seek(d),$A(t,u.reader,S.baseMediaDecodeTime,S.timescale,S.Yc,S.Id,c,S.Og,n)}}).parse(e,!1),n};function $A(e,t,n,r,a,u,c,d,p){var S=0,T=u,E=d.map(function(R){return R.Wg});for(E=[].concat.apply([],_(E)),E.length&&(T=E[0].sampleSize||u),t.skip(c+d[0].Fh);t.na();){c=t.P();var I=t.T(),A=null;switch(A=!1,d=1,e.g){case Wl:A=I&31,A=A==6;break;case Xl:d=2,t.skip(1),A=I>>1&63,A=A==39||A==40;break;case Kl:d=2,t.skip(1),A=I>>1&63,A=A==23||A==24;break;default:return}if(A)for(I=0,S<E.length&&(I=E[S].ne||0),I=(n+I)/r,d=b(px(t.qb(c-d))),A=d.next();!A.done;A=d.next())p.push({packet:A.value,pts:I});else try{t.skip(c-d)}catch{break}T-=c+4,T==0&&(n=S<E.length?n+(E[S].Jf||a):n+a,S++,S<E.length?T=E[S].sampleSize||u:T=u)}}we("shaka.cea.Mp4CeaParser",vc);var r0=0,Wl=1,Xl=2,Kl=3,xc={avc1:Wl,avc3:Wl,dvav:Wl,dva1:Wl,hev1:Xl,hvc1:Xl,dvh1:Xl,dvhe:Xl,vvc1:Kl,vvi1:Kl,dvc1:Kl,dvi1:Kl};Le["video/mp4"]=function(){return new vc};function wc(){this.g=null}wc.prototype.init=function(){},wc.prototype.parse=function(e){this.g?this.g.clearData():this.g=new rn;var t=[];if(e=Ae(e),!kl(e))return t;e=this.g.parse(e);var n=e.$c(),r=e.Pd();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=b(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var a=b(px(r.data)),u=a.next();!u.done;u=a.next())t.push({packet:u.value,pts:r.time});return t},we("shaka.cea.TsCeaParser",wc),Le["video/mp2t"]=function(){return new wc};function mx(e,t,n){var r=WA(e),a=null;e=[];var u=[],c=null,d=new Set(r.map(function(S){return S.keyId}));d.delete(null);var p="cenc";if(1<d.size)throw new se(2,4,4010);if(!t){if(u=r.filter(function(S){return S.Pc=="urn:mpeg:dash:sea:2012"}),1<u.length)throw new se(2,4,4050);u.length&&(c=KA(u[0])),(u=r.find(function(S){return S.Pc=="urn:mpeg:dash:mp4protection:2011"}))&&u.encryptionScheme&&(p=u.encryptionScheme),u=r.filter(function(S){return S.Pc=="urn:mpeg:dash:mp4protection:2011"?(a=S.init||a,!1):S.Pc!="urn:mpeg:dash:sea:2012"}),u.length&&(e=GA(a,p,u,n,d),e.length==0&&(e=[Qr("",p,a)]))}if(r.length&&!c&&(t||!u.length))for(e=[],t=b(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(Qr(n,p,a));if(d=Array.from(d)[0]||null)for(p=b(e),t=p.next();!t.done;t=p.next())for(t=b(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=d;return{pg:d,dk:a,drmInfos:e,Fe:c,tg:!0}}function zA(e,t,n,r){var a=mx(e,n,r);if(t.tg)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=a.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=a.drmInfos),t.tg=!1;else if(0<a.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(u){return a.drmInfos.some(function(c){return c.keySystem==u.keySystem})}),t.drmInfos.length==0))throw new se(2,4,4008);return a.pg||t.pg}function VA(e){var t=0,n=wt(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var a=n.getUint16(e,!0);if(e+=2,a&1||a+e>n.byteLength){n=[];break e}var u=Ae(n,e,a);t.push({type:r,value:u}),e+=a}n=t}return n}function HA(e){e=b(wi(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=b(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return Gn(n)}return""}function Sc(e){var t=er(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Gn(t))?t:(e=er(e.node,"urn:microsoft:playready","pro"),!e||!Gn(e)||(e=Gn(e),e=ri(e),e=VA(e).filter(function(n){return n.type===qA})[0],!e)?"":(e=Ki(e.value,!0),(e=Gs(e,"WRMHEADER"))?HA(e):""))}function GA(e,t,n,r,a){var u=[];n=b(n);for(var c=n.next();!c.done;c=n.next()){c=c.value;var d=r[c.Pc];if(d){var p;if((p=er(c.node,"urn:microsoft:playready","pro"))&&Gn(p)){p=Gn(p),p=ri(p);var S=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);p=[{initData:wf(p,S,new Set,0),initDataType:"cenc",keyId:c.keyId}]}else p=null;if(S=null,c.Pc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){S=c;var T=a;if(T.size==0)S=null;else{var E=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),I=new Uint8Array([]);S=[{initData:wf(I,E,T,1),initDataType:"cenc",keyId:S.keyId}]}}p=Qr(d,t,c.init||e||p||S),(d=YA.get(d))&&(p.licenseServerUri=d(c)),u.push(p)}}return u}function WA(e){var t=[];e=b(e);for(var n=e.next();!n.done;n=e.next())(n=XA(n.value))&&t.push(n);return t}function XA(e){var t=e.attributes.schemeIdUri,n=tr(e,"urn:mpeg:cenc:2013","default_KID"),r=Cy(e,"urn:mpeg:cenc:2013","pssh").map(xi),a=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new se(2,4,4009);var u=[];try{u=r.map(function(c){return{initDataType:"cenc",initData:ri(c),keyId:null}})}catch{throw new se(2,4,4007)}return{node:e,Pc:t,keyId:n,init:0<u.length?u:null,encryptionScheme:a}}function KA(e){if(!h.crypto||!h.crypto.subtle)throw je("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new se(2,4,4042);var t=er(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new se(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new se(2,4,4051);if(t=er(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new se(2,4,4051);if(e=t.attributes.IV,t=bo(t.attributes.keyUriTemplate),!e||!t)throw new se(2,4,4051);if(e=Yr(e.substr(2)),e.byteLength!=16)throw new se(2,4,4048);return{ti:t,iv:e}}var qA=1,YA=new Map().set("com.widevine.alpha",function(e){var t=er(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Gn(t))?t:(e=er(e.node,"urn:microsoft","laurl"))&&bo(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Sc).set("com.microsoft.playready.recommendation",Sc).set("com.microsoft.playready.software",Sc).set("com.microsoft.playready.hardware",Sc).set("org.w3.clearkey",function(e){var t=er(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Gn(t))?t:(e=er(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Gn(e))?e:""});function Cc(e,t,n,r,a,u){var c={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:a,Time:u};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(d,p,S,T){if(d=="$$")return"$";var E=c[p];if(E==null)return d;switch(p=="RepresentationID"&&S&&(S=void 0),p=="Time"&&typeof E!="bigint"&&(.2<=Math.abs(E-Math.round(E))&&je("Calculated $Time$ values must be close to integers"),E=Math.round(E)),T){case void 0:case"d":case"i":case"u":d=E.toString();break;case"o":d=E.toString(8);break;case"x":d=E.toString(16);break;case"X":d=E.toString(16).toUpperCase();break;default:d=E.toString()}return S=h.parseInt(S,10)||1,Array(Math.max(0,S-d.length)+1).join("0")+d})}function gx(e,t){var n=Pi(e,t,"timescale"),r=1;n&&(r=nr(n)||1),n=Pi(e,t,"duration"),(n=nr(n||""))&&(n/=r);var a=Pi(e,t,"startNumber"),u=Number(Pi(e,t,"presentationTimeOffset"))||0,c=vo(a||"");if((a==null||c==null)&&(c=1),a=null,t=ma(e,t,"SegmentTimeline")){t=on(t,"S"),a=r,e=e.ka.duration||1/0;for(var d=c,p=[],S=-u,T=0;T<t.length;++T){var E=t[T],I=t[T+1],A=Bt(E,"t",vo),R=Bt(E,"d",vo),D=Bt(E,"r",Tf);if(E=Bt(E,"k",Tf)||0,A!=null&&(A-=u),R){if(A=A??S,D=D||0,0>D)if(I){if(I=Bt(I,"t",vo),I==null)break;if(A>=I)break;D=Math.ceil((I-A)/R)-1}else{if(e==1/0)break;if(A/a>=e)break;D=Math.ceil((e*a-A)/R)-1}for(0<p.length&&A!=S&&(p[p.length-1].end=A/a),I=0;I<=D;++I)S=A+R,p.push({start:A/a,end:S/a,$f:A,zb:E,Si:p.length+d}),A=S}}a=p}return{timescale:r,La:n,vd:c,Nb:u/r||0,Zf:u,timeline:a}}function yx(e,t){return[t(e.J),t(e.ja),t(e.ta)].filter(Jr)}function Pi(e,t,n){t=yx(e,t),e=null,t=b(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function ma(e,t,n){t=yx(e,t),e=null,t=b(t);for(var r=t.next();!r.done&&!(e=Si(r.value,n));r=t.next());return e}function QA(e,t,n,r,a,u){for(var c=tr(e,"http://www.w3.org/1999/xlink","href"),d=tr(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",p=b(Object.keys(e.attributes)),S=p.next();!S.done;S=p.next()){S=S.value;var T=S.split(":"),E=jd("http://www.w3.org/1999/xlink");T[0]==E&&delete e.attributes[S]}if(5<=u)return ts(new se(2,4,4028));if(d!="onLoad")return ts(new se(2,4,4027));var I=ro([r],[c]);return a.request(0,Qn(I,t)).Aa(function(A){if(A=Bd(A.data,e.tagName),!A)return ts(new se(2,4,4001,c));for(e.children=[];A.children.length;){var R=A.children.shift();R.tagName&&(R.parent=e),e.children.push(R)}R=b(Object.keys(A.attributes));for(var D=R.next();!D.done;D=R.next())D=D.value,e.attributes[D]=A.attributes[D];return Tc(e,t,n,I[0],a,u+1)})}function Tc(e,t,n,r,a,u){if(u=u===void 0?0:u,tr(e,"http://www.w3.org/1999/xlink","href")){var c=QA(e,t,n,r,a,u);return n&&(c=c.Aa(void 0,function(){return Tc(e,t,n,r,a,u)})),c}c=[];for(var d=b(Sy(e)),p=d.next(),S={};!p.done;S={Uc:void 0},p=d.next())S.Uc=p.value,tr(S.Uc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(T){return function(E){return E!==T.Uc}}(S)):S.Uc.tagName!="SegmentTimeline"&&c.push(Tc(S.Uc,t,n,r,a,u));return fy(c).Aa(function(){return e})}function ZA(e,t,n,r,a,u,c){var d,p=new tn().S("sidx",function(S){d=JA(t,r,a,u,c,n,S)});if(e&&p.parse(e),d)return d;throw new se(2,3,3004)}function JA(e,t,n,r,a,u,c){var d=[];c.reader.skip(4);var p=c.reader.P();if(p==0)throw new se(2,3,3005);if(c.version==0)var S=c.reader.P(),T=c.reader.P();else S=c.reader.Nc(),T=c.reader.Nc();c.reader.skip(2);var E=c.reader.la();for(e=e+c.size+T,T=0;T<E;T++){var I=c.reader.P(),A=(I&2147483648)>>>31;I&=2147483647;var R=c.reader.P();if(c.reader.skip(4),A==1)throw new se(2,3,3006);d.push(new ft(S/p+n,(S+R)/p+n,function(){return u},e,e+I-1,t,n,r,a)),S+=R,e+=I}return c.parser.stop(),d}function Dr(e){this.h=wt(e),this.g=new en(this.h,0)}Dr.prototype.na=function(){return this.g.na()};function cr(e){var t=vx(e);if(7<t.length)throw new se(2,3,3002);var n=0;t=b(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=vx(e);e:{r=b(e4);for(var a=r.next();!a.done;a=r.next())if(Rn(t,new Uint8Array(a.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.va();else{if(t.length==8&&t[1]&224)throw new se(2,3,3001);for(a=r=0;a<t.length;a++){var u=t[a];r=a==0?u&(1<<8-t.length)-1:256*r+u}t=r}return t=e.g.va()+t<=e.h.byteLength?t:e.h.byteLength-e.g.va(),r=wt(e.h,e.g.va(),t),e.g.skip(t),new t4(n,r)}function vx(e){var t=e.g.va(),n=e.g.T();if(n==0)throw new se(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ae(e.h,t,n)}var e4=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function t4(e,t){this.id=e,this.g=t}function s0(e){if(8<e.g.byteLength)throw new se(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new se(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function n4(e,t,n,r,a,u,c,d,p){function S(){return a}var T=[];e=new Dr(e.g);for(var E=null,I=null;e.na();){var A=cr(e);if(A.id==187){var R=o4(A);R&&(A=n*R.dj,R=t+R.Ii,E!=null&&T.push(new ft(E+c,A+c,S,I,R-1,u,c,d,p)),E=A,I=R)}}return E!=null&&T.push(new ft(E+c,r+c,S,I,null,u,c,d,p)),T}function o4(e){var t=new Dr(e.g);if(e=cr(t),e.id!=179)throw new se(2,3,3013);if(e=s0(e),t=cr(t),t.id!=183)throw new se(2,3,3012);t=new Dr(t.g);for(var n=0;t.na();){var r=cr(t);if(r.id==241){n=s0(r);break}}return{dj:e,Ii:n}}function xx(e,t,n){if(t=ma(e,t,"Initialization"),!t)return null;var r=e.J.Ga(),a=t.attributes.sourceURL;a&&(r=ro(r,[bo(a)])),a=0;var u=null;return(t=Bt(t,"range",Cf))&&(a=t.start,u=t.end),n=new Do(function(){return r},a,u,Tx(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function i4(e,t,n){var r=Number(Pi(e,ga,"presentationTimeOffset"))||0,a=Pi(e,ga,"timescale"),u=1;a&&(u=nr(a)||1);var c=r/u||0,d=xx(e,ga,n);r4(e,d);var p=Md(e);return{fc:function(){var S=ma(p,ga,"RepresentationIndex"),T=p.J.Ga();return S&&(S=bo(S.attributes.sourceURL))&&(T=ro(T,[S])),S=Sx(p),wx(p,t,d,T,S.start,S.end,c)}}}function wx(e,t,n,r,a,u,c){var d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae;return z(function(me){if(me.g==1)return d=e.presentationTimeline,p=!e.vb||!e.ka.ld,S=e.ka.start,T=e.ka.duration,E=e.J.mimeType.split("/")[1],I=t,A=null,R=[I(r,a,u,!1),E=="webm"?I(n.M(),n.Ha,n.sa,!0):null],I=null,k(me,Promise.all(R),2);if(D=me.h,L=D[0],F=D[1]||null,U=null,q=S-c,N=S,G=T?S+T:1/0,E=="mp4")var le=ZA(L,a,r,n,q,N,G);else{le=L;var ue=new Dr(F);if(cr(ue).id!=440786851)throw new se(2,3,3008);var de=cr(ue);if(de.id!=408125543)throw new se(2,3,3009);ue=de.g.byteOffset,de=new Dr(de.g);for(var be=null;de.na();){var Ce=cr(de);if(Ce.id==357149030){be=Ce;break}}if(!be)throw new se(2,3,3010);for(be=new Dr(be.g),Ce=1e6,de=null;be.na();){var ke=cr(be);if(ke.id==2807729)Ce=s0(ke);else if(ke.id==17545)if(ke.g.byteLength==4)de=ke.g.getFloat32(0);else if(ke.g.byteLength==8)de=ke.g.getFloat64(0);else throw new se(2,3,3003)}if(de==null)throw new se(2,3,3011);if(be=Ce/1e9,de*=be,le=cr(new Dr(le)),le.id!=475249515)throw new se(2,3,3007);le=n4(le,ue,be,de,r,n,q,N,G)}for(U=le,Q=b(U),re=Q.next();!re.done;re=Q.next())ae=re.value,ae.codecs=e.J.codecs,ae.mimeType=e.J.mimeType;return d.sd(U),A=new Ft(U),p&&A.Bc(N,G,!0),me.return(A)})}function ga(e){return e.Rc}function Sx(e){var t=ma(e,ga,"RepresentationIndex");return e=Pi(e,ga,"indexRange"),e=Cf(e||""),t&&(e=Bt(t,"range",Cf,e)),e}function r4(e,t){if(Cx(e,t),!Sx(e))throw new se(2,4,4002)}function Cx(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=Ut&&n!="mp4"&&n!="webm")throw new se(2,4,4006);if(n=="webm"&&!t)throw new se(2,4,4005)}function Tx(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Jc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ja.label||null,roles:e.roles||null,language:e.ja.language||null}}function s4(e,t,n){var r=xx(e,bx,n),a=a4(e);if(!a.La&&!a.timeline&&1<a.Ic.length)throw new se(2,4,4002);if(!a.La&&!e.ka.duration&&!a.timeline&&a.Ic.length==1)throw new se(2,4,4002);if(a.timeline&&a.timeline.length==0)throw new se(2,4,4002);var u=null,c=null;e.ta.id&&e.J.id&&(c=t[e.ta.id+","+e.J.id])&&(u=c.segmentIndex);var d=l4(e.ka.start,e.ka.duration,e.J.Ga,a,r,n,e.J.mimeType,e.J.codecs);return t=!u,u?u.rd(d,e.presentationTimeline.mb()):u=new Ft(d),e.presentationTimeline.sd(d),e.vb&&e.ka.ld||u.Bc(e.ka.start,e.ka.duration?e.ka.start+e.ka.duration:1/0,t),c&&(c.segmentIndex=u),{fc:function(){return u&&u.getNumReferences()!=0||u.Zd(d),Promise.resolve(u)}}}function bx(e){return e.Pb}function a4(e){var t=u4(e);e=gx(e,bx);var n=e.vd;n==0&&(n=1);var r=0;return e.La?r=e.La*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{La:e.La,startTime:r,vd:n,Nb:e.Nb,timeline:e.timeline,Ic:t}}function l4(e,t,n,r,a,u,c,d){var p=r.Ic.length;r.timeline&&r.timeline.length!=r.Ic.length&&(p=Math.min(r.timeline.length,r.Ic.length));for(var S=e-r.Nb,T=t?e+t:1/0,E=[],I=r.startTime,A={},R=0;R<p;A={ve:void 0,oe:void 0},R++){A.oe=r.Ic[R];var D=I;I=void 0,I=r.La!=null?D+r.La:r.timeline?r.timeline[R].end:D+t,A.ve=null,A=new ft(e+D,e+I,function(L){return function(){return L.ve==null&&(L.ve=ro(n(),[L.oe.zi])),L.ve}}(A),A.oe.start,A.oe.end,a,S,e,T,[],"",null,null,Mr,u),A.codecs=d,A.mimeType=c,E.push(A)}return E}function u4(e){return[e.J.Pb,e.ja.Pb,e.ta.Pb].filter(Jr).map(function(t){return on(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.lf&&(e.lf=!0);var n=bo(t.attributes.media);return t=Bt(t,"mediaRange",Cf,{start:0,end:null}),{zi:n,start:t.start,end:t.end}})}function Ex(e,t,n,r,a,u,c,d,p){p||e.J.Gc||(e.J.Gc=Pi(e,fs,"initialization"));var S=e.J.Gc?d4(e,c):null,T=f4(e);c4(T);var E=Md(e);if(T.jd)return Cx(e,S),{fc:function(){var L=Cc(T.jd,E.J.id,null,null,E.bandwidth||null,null);return L=ro(E.J.Ga(),[L]),wx(E,t,S,L,0,null,T.Nb)}};if(T.La)return r||e.ja.contentType==="image"||(e.presentationTimeline.xf(T.La),e.presentationTimeline.ce(e.ka.start)),{fc:function(){return h4(E,T,a,S,u,c,d)}};var I=null;r=r=null,e.ta.id&&e.J.id&&(r=e.ta.id+","+e.J.id,r=n[r])&&(I=r.segmentIndex);var A=e.ka.start,R=e.ka.duration?A+e.ka.duration:1/0,D=!(e.vb&&e.ka.ld);return I?(n=I,kx(n,T,A,R,D,S),n.Ma(e.presentationTimeline.mb())):I=new bc(T,e.J.id,e.bandwidth,e.J.Ga,A,R,S,D,c,e.J.Kf),T.timeline&&e.ja.contentType!=="image"&&e.presentationTimeline.Ng(T.timeline,A),r&&e.vb&&(r.segmentIndex=I),{fc:function(){return I instanceof bc&&I.getNumReferences()==0&&kx(I,T,A,R,D,S),Promise.resolve(I)}}}function fs(e){return e.$b}function f4(e){var t=gx(e,fs),n=Pi(e,fs,"media"),r=Pi(e,fs,"index");return{La:t.La,timescale:t.timescale,vd:t.vd,Nb:t.Nb,Zf:t.Zf,timeline:t.timeline,Zb:n&&bo(n),jd:r,mimeType:e.J.mimeType,codecs:e.J.codecs}}function c4(e){var t=e.jd?1:0;if(t+=e.timeline?1:0,t+=e.La?1:0,t==0)throw new se(2,4,4002);if(t!=1&&(e.jd&&(e.timeline=null),e.La=null),!e.jd&&!e.Zb)throw new se(2,4,4002)}function h4(e,t,n,r,a,u,c){function d(ue){var de=(ue-D)*R,be=de+t.Nb,Ce=de+E;de=Ce+R;var ke=Math.min(de,S());return Ce=new ft(Ce,ke,function(){var Oe=be*L;return"BigInt"in h&&Oe>Number.MAX_SAFE_INTEGER&&(Oe=BigInt(be)*BigInt(L)),Oe=Cc(F,q,ue,null,U,Oe),ro(N(),[Oe])},0,null,r,G,E,S(),[],"",null,null,Mr,u),Ce.codecs=e.J.codecs,Ce.mimeType=e.J.mimeType,Ce.j=de,Ce}function p(){var ue=[Math.max(T.mb(),E),Math.min(T.Wb(),S())].map(function(de){return de-E});return ue=[Math.ceil(ue[0]/R),Math.ceil(ue[1]/R)-1],e.J.Ia&&ue[1]++,ue.map(function(de){return de+D})}function S(){var ue=I!=null&&a[I]||A;return ue?E+ue:1/0}var T=e.presentationTimeline,E=e.ka.start,I=e.ta.id,A=e.ka.duration,R=t.La,D=t.vd,L=t.timescale,F=t.Zb,U=e.bandwidth||null,q=e.J.id,N=e.J.Ga,G=E-t.Nb,Q=p();n=e.vb?Math.max(Q[0],Q[1]-n+1):Q[0],c=c||Q[1],Q=[];for(var re=n;re<=c;++re){var ae=d(re);Q.push(ae)}var me=new Ft(Q);if(Q=T.Wb()<S(),re=T.V(),Q||re){var le=Math.max(n,c+1);n=R,e.J.Ia&&(n=.1),me.ue(n,function(){var ue=T.mb();me.Ma(ue);var de=b(p());de.next(),de=de.next().value;for(var be=[];le<=de;){var Ce=d(le);be.push(Ce),le++}return ue>S()&&!be.length?null:be})}return Promise.resolve(me)}function d4(e,t){var n=e.J.Gc;if(n||(n=Pi(e,fs,"initialization")),!n)return null;n=bo(n);var r=e.J.id,a=e.bandwidth||null,u=e.J.Ga;return t=new Do(function(){var c=Cc(n,r,null,null,a,null);return ro(u(),[c])},0,null,Tx(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function bc(e,t,n,r,a,u,c,d,p,S){Ft.call(this,[]),this.g=e,this.C=t,this.A=n,this.B=r,this.h=a,this.j=u,this.o=c,this.s=p,this.F=S,d&&Ax(this)}X(bc,Ft),w=bc.prototype,w.getNumReferences=function(){return this.g?this.g.timeline.length:0},w.release=function(){Ft.prototype.release.call(this),this.g=null},w.Ma=function(e){if(this.g){for(var t=0,n=this.g.timeline,r=0;r<n.length&&n[r].end+this.h<=e;r+=1)t+=1;0<t&&(this.g.timeline=n.slice(t),this.O.length>=t&&(this.O=this.O.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function kx(e,t,n,r,a,u){if(p4(e,u),e.g){if(n=e.g.timeline,e.g.Zb!==t.Zb&&(e.g.Zb=t.Zb),n.length){var c=n[n.length-1];t=t.timeline.filter(function(d){return d.start>=c.end})}else t=t.timeline.slice();0<t.length&&e.g.timeline.push.apply(e.g.timeline,_(t)),e.j!==r&&(e.j=r)}else e.g=t,e.h=n,e.j=r;a&&Ax(e)}function p4(e,t){if(e.o!==t){e.o=t,e=b(e.O);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&Gy(n,t)}}function Ax(e){if(!e.m){for(var t=e.g.timeline;t.length&&t[t.length-1].start>=e.j;)t.pop();e.Ma(e.h)}}w.find=function(e){if(this.g&&this.g.timeline&&this.g.timeline.length&&e<this.g.timeline[0].start+this.h)return this.i;if(!this.g)return null;var t=this.g.timeline;if(e<this.h||e>=this.j)return null;for(var n=t.length-1,r=0;r<t.length;r++){var a=t[r],u=a.start+this.h;if(a=r<n?t[r+1].start+this.h:this.j===1/0?a.end+this.h:this.j,e>=u&&e<a)return r+this.i}return null},w.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.g)return null;var n=this.O[e];if(!n){var r=this.g.timeline[e],a=r.Si,u=this.g.Zf+r.$f;n=this.h-this.g.Nb;var c=this.h+r.end,d=c;e===this.getNumReferences()-1&&this.j!==1/0&&(d=this.j);for(var p=this.g.codecs,S=this.g.mimeType,T=[],E=(r.end-r.start)/r.zb,I={},A=0;A<r.zb;I={we:void 0,kh:void 0},A++){var R=r.start+E*A,D=R+E;I.kh=A+1,I.we=null,I=new ft(this.h+R,this.h+D,function(L){return function(){return t.g?(L.we==null&&(L.we=Ix(t.g.Zb,t.C,a,t.A,u,L.kh,t.B)),L.we):[]}}(I),0,null,this.o,n,this.h,this.j,[],"",null,null,Mr,this.s),I.codecs=p,I.mimeType=S,this.F==0?0<A&&I.Xd():A%this.F!=0&&I.Xd(),T.push(I)}n=new ft(this.h+r.start,d,function(){return 0<r.zb||!t.g?[]:Ix(t.g.Zb,t.C,a,t.A,u,null,t.B)},0,null,this.o,n,this.h,this.j,T,"",null,null,Mr,this.s,0<r.zb),n.codecs=p,n.mimeType=S,n.j=c,this.O[e]=n}return n};function Ix(e,t,n,r,a,u,c){return e=Cc(e,t,n,u,r||null,a),ro(c(),[e]).map(function(d){return d.toString()})}function ya(e){this.o=null,this.A=e,this.G=new $s,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}ya.prototype.configure=function(e){this.o=e},ya.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},ya.prototype.setManifestType=function(e){this.s=e};function ql(e,t){var n,r,a,u,c,d,p;return z(function(S){if(S.g==1)return n=ro(e.i,[m4(e,t)]),r=Qn(n,e.o.retryParameters),a=e.A.networkingEngine.request(8,r),ns(e.G,a),Z(S,2),k(S,a.promise,4);if(S.g!=2)return u=S.h,c=fn(u.data),d=JSON.parse(c),d.VERSION==1&&g4(e,d,u.uri),K(S,0);if((p=ne(S))&&p.code==7001)return S.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new Mt(function(){ql(e,t)}),e.g.Y(e.C),V(S)})}function m4(e,t){if(!e.m.length)return t;t=new Ln(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),a=t.g;return e.s=="DASH"?(a.add("_DASH_pathway",n),a.add("_DASH_throughput",String(r))):e.s=="HLS"&&(a.add("_HLS_pathway",n),a.add("_HLS_throughput",String(r))),Ag(a)&&sl(t,a),t.toString()}function g4(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new Mt(function(){ql(e,r)}),(n=t.TTL)&&(e.C=n),e.g.Y(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function va(e,t,n,r){var a=e.l.get(t);a||(a=new Map),a.set(n,r),e.l.set(t,a)}ya.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Yl(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],a=b(e.m),u=a.next(),c={};!u.done;c={Lc:void 0},u=a.next())if(c.Lc=u.value,u=t.get(c.Lc))r.push({Df:c.Lc,location:u});else if(u=e.F.find(function(p){return function(S){return S.wj==p.Lc}}(c))){var d=t.get(u["BASE-ID"]);d&&(u["URI-REPLACEMENT"].rh?(d=new Ln(d),Zu(d,u["URI-REPLACEMENT"].rh),r.push({Df:c.Lc,location:d.toString()})):r.push({Df:c.Lc,location:d}))}for(a=Date.now(),c=b(e.j.keys()),u=c.next();!u.done;u=c.next())u=u.value,d=e.j.get(u),a>d&&e.j.delete(u);if(r=r.filter(function(p){for(var S=b(e.j.keys()),T=S.next();!T.done;T=S.next())if(T.value.includes(new Ln(p.location).Eb))return!1;return!0}),r.length&&(e.B=r[0].Df),r=r.map(function(p){return p.location}),!r.length&&e.h)for(a=b(e.h.split(",")),c=a.next();!c.done;c=a.next())(c=t.get(c.value))&&(e.B=e.h,r.push(c));if(!r.length)for(t=b(t.values()),a=t.next();!a.done;a=t.next())r.push(a.value);return n?r:ro(e.i,r)}function Io(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.s=this.o=!1,this.m=new Set}w=Io.prototype,w.release=function(){for(var e=b(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},w.ei=function(){return this.j},w.jf=function(){return this.l.slice()},w.Nh=function(){return this.i};function Mx(e,t){var n=[],r=[],a=[],u=[];e=b(e);for(var c=e.next();!c.done;c=e.next()){var d=c.value;c=new Map(d.audioStreams.map(function(E){return[f0(E),E]}));var p=new Map(d.videoStreams.map(function(E){return[u0(E),E]})),S=new Map(d.textStreams.map(function(E){return[eu(E),E]}));if(d=new Map(d.imageStreams.map(function(E){return[tu(E),E]})),t){var T=Ox(Ut);S.set(eu(T),T),T=Ox("image"),d.set(tu(T),T)}n.push(c),r.push(p),a.push(S),u.push(d)}return{jg:n,ph:r,lh:a,Eg:u}}w.Ke=function(e,t,n){n=n===void 0?!1:n;var r=this,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me,le,ue,de,be,Ce,ke,Oe,Ie;return z(function(Fe){if(Fe.g==1){if(a=zn,!t&&e.length==1)return u=Mx(e,!1),c=u.jg,d=u.ph,p=u.lh,S=u.Eg,r.h=Array.from(c[0].values()),r.g=Array.from(d[0].values()),r.l=Array.from(p[0].values()),r.i=Array.from(S[0].values()),Fe.u(2);for(T=n?r.m.size:0,E=-1,I=0;I<e.length;I++)A=e[I],r.m.has(A.id)||(r.m.add(A.id),E==-1&&(E=I));return E==-1?Fe.return():(R=Mx(e,!0),D=R.jg,L=R.ph,F=R.lh,U=R.Eg,k(Fe,Promise.all([Pr(r,r.h,D,E,Ql,xa,T),Pr(r,r.g,L,E,Ql,xa,T),Pr(r,r.l,F,E,Ql,xa,T),Pr(r,r.i,U,E,Ql,xa,T)]),2))}if(q=0,N=[],r.g.length&&r.h.length)for(le=b(r.h),ue=le.next();!ue.done;ue=le.next())for(de=ue.value,be=b(r.g),Ce=be.next();!Ce.done;Ce=be.next())ke=Ce.value,Oe=gd(de.drmInfos,ke.drmInfos),de.drmInfos.length&&ke.drmInfos.length&&!Oe.length||(Ie=q++,N.push({id:Ie,language:de.language,disabledUntilTime:0,primary:de.primary,audio:de,video:ke,bandwidth:(de.bandwidth||0)+(ke.bandwidth||0),drmInfos:Oe,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(G=r.g.length?r.g:r.h,Q=b(G),re=Q.next();!re.done;re=Q.next())ae=re.value,me=q++,N.push({id:me,language:ae.language,disabledUntilTime:0,primary:ae.primary,audio:ae.type==a.X?ae:null,video:ae.type==a.ga?ae:null,bandwidth:ae.bandwidth||0,drmInfos:ae.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});r.j=N,V(Fe)})};function _x(e){var t,n,r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me,le,ue,de,be,Ce;return z(function(ke){switch(ke.g){case 1:if(t=zn,e.length==1)return ke.return(e[0]);for(n=e.map(function(Oe){return new Map(Oe.filter(function(Ie){return Ie.type===t.X}).map(function(Ie){return[f0(Ie),Ie]}))}),r=e.map(function(Oe){return new Map(Oe.filter(function(Ie){return Ie.type===t.ga}).map(function(Ie){return[u0(Ie),Ie]}))}),a=e.map(function(Oe){return new Map(Oe.filter(function(Ie){return Ie.type===t.ua}).map(function(Ie){return[eu(Ie),Ie]}))}),u=e.map(function(Oe){return new Map(Oe.filter(function(Ie){return Ie.type===t.De}).map(function(Ie){return[tu(Ie),Ie]}))}),c=b(a),d=c.next();!d.done;d=c.next())p=d.value,S=Px(t.ua),p.set(eu(S),S);for(T=b(u),E=T.next();!E.done;E=T.next())I=E.value,A=Px(t.De),I.set(tu(A),A);return R=new Io,k(ke,Pr(R,[],n,0,Ec,kc,0),2);case 2:return D=ke.h,k(ke,Pr(R,[],r,0,Ec,kc,0),3);case 3:return L=ke.h,k(ke,Pr(R,[],a,0,Ec,kc,0),4);case 4:return F=ke.h,k(ke,Pr(R,[],u,0,Ec,kc,0),5);case 5:if(U=ke.h,q=0,L.length&&D.length)for(ae=b(D),me=ae.next();!me.done;me=ae.next())for(le=me.value,ue=b(L),de=ue.next();!de.done;de=ue.next())be=de.value,Ce=q++,be.variantIds.push(Ce),le.variantIds.push(Ce);else for(N=L.concat(D),G=b(N),Q=G.next();!Q.done;Q=G.next())re=Q.value,re.variantIds=[q++];return ke.return(L.concat(D).concat(F).concat(U))}})}function Pr(e,t,n,r,a,u,c){var d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me;return z(function(le){switch(le.g){case 1:for(d=[],p=0;p<n.length;p++)p>=r?d.push(new Set(n[p].values())):d.push(new Set);S=b(t),T=S.next();case 2:if(T.done){le.u(4);break}return E=T.value,k(le,y4(e,E,n,r,u,d,c),5);case 5:if(I=le.h,!I)throw new se(2,4,4037);T=S.next(),le.u(2);break;case 4:for(A=b(d),R=A.next();!R.done;R=A.next())for(D=R.value,L=b(D),F=L.next();!F.done;F=L.next())U=F.value,(q=v4(e,U,n,a,u,d))&&t.push(q);for(N=b(d),G=N.next();!G.done;G=N.next())for(Q=G.value,re=b(Q),ae=re.next(),me={};!ae.done;me={Tf:void 0},ae=re.next())if(me.Tf=ae.value,!l0(me.Tf)&&t.some(function(ue){return function(de){return a0(e,ue.Tf,de)}}(me)))throw new se(2,4,4037);return le.return(t)}})}function y4(e,t,n,r,a,u,c){return z(function(d){return d.g==1?(Dx(e,n,t,0<c),t.matchedStreams?t.segmentIndex?k(d,Rx(t,r+c),2):d.u(2):d.return(!1)):(Lx(t,r,a,u,c),d.return(!0))})}function Rx(e,t){var n,r,a,u,c,d,p;return z(function(S){if(S.g==1){for(n=[],r=e.matchedStreams,a=b(r),u=a.next();!u.done;u=a.next())c=u.value,n.push(c.createSegmentIndex()),c.trickModeVideo&&!c.trickModeVideo.segmentIndex&&n.push(c.trickModeVideo.createSegmentIndex());return k(S,Promise.all(n),2)}if(e.segmentIndex instanceof In)for(d=t;d<r.length;d++)p=r[d],p.segmentIndex&&e.segmentIndex.g.push(p.segmentIndex);V(S)})}function v4(e,t,n,r,a,u){if(l0(t))return null;var c=r(t);return Dx(e,n,c),c.createSegmentIndex&&(c.createSegmentIndex=function(){return z(function(d){return c.segmentIndex?d.u(0):(c.segmentIndex=new In,k(d,Rx(c,0),0))})}),!c.matchedStreams||!c.matchedStreams.length?null:(Lx(c,0,a,u,0),c)}function Lx(e,t,n,r,a){var u=e.matchedStreams;for(t+=a;t<u.length;t++){var c=u[t];n(e,c);var d=!0;if(e.type=="audio"&&es(e.language,c.language)==0&&(d=!1),d&&(r[t-a].delete(c),c.fullMimeTypes))for(c=b(c.fullMimeTypes.values()),d=c.next();!d.done;d=c.next())e.fullMimeTypes.add(d.value)}}function Ql(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=b(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Ec(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function xa(e,t){function n(c,d){c||(c=[]),d=b(d);for(var p=d.next();!p.done;p=d.next())p=p.value,c.includes(p)||c.push(p);return c}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=b(t.keyIds),a=r.next();!a.done;a=r.next())e.keyIds.add(a.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=gd(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new se(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=b(t.closedCaptions),a=r.next();!a.done;a=r.next()){var u=b(a.value);a=u.next().value,u=u.next().value,e.closedCaptions.set(a,u)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Ql(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),xa(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&xa(e.trickModeVideo,t)}function kc(e,t){var n=e.roles;n||(n=[]);for(var r=b(t.roles),a=r.next();!a.done;a=r.next())a=a.value,n.includes(a)||n.push(a);for(e.roles=n,n=b(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,_(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=b(t.closedCaptions),n=t.next();!n.done;n=t.next())r=b(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function Dx(e,t,n,r){r=r!==void 0&&r?n.matchedStreams:[],t=b(t);for(var a=t.next();!a.done;a=t.next()){if(a=x4(e,a.value,n),!a)return;r.push(a)}n.matchedStreams=r}function x4(e,t,n){var r={audio:f0,video:u0,text:eu,image:tu}[n.type],a=null,u=r(n);if(t.has(u))a=t.get(u);else{u={audio:function(S,T){return a0(e,S,T)},video:function(S,T){return a0(e,S,T)},text:w4,image:S4}[n.type];for(var c={audio:C4,video:T4,text:b4,image:E4}[n.type],d=b(t.values()),p=d.next();!p.done;p=d.next())p=p.value,!u(n,p)||n.fastSwitching!=p.fastSwitching||a&&!c(n,a,p)||(a=p)}return e.s&&!l0(a)&&t.delete(r(a)),a}function Zl(e,t){return e.mimeType!=t.mimeType?!1:Ac(e.codecs)===Ac(t.codecs)}w.Zg=function(e){this.o=e},w.gh=function(e){this.s=e};function a0(e,t,n){return!(!Zl(t,n)&&!e.o||t.drmInfos&&!Ig(t.drmInfos,n.drmInfos))}function w4(e,t){return t.language?!(e.forced!==t.forced||es(e.language,t.language)==0||t.kind!=e.kind):!0}function S4(){return!0}function C4(e,t,n){var r=Zl(e,t),a=Zl(e,n);if(r&&!a)return!1;if(!r&&a||(r=es(e.language,t.language),a=es(e.language,n.language),a>r))return!0;if(a<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(u){return e.roles.includes(u)}),a=n.roles.filter(function(u){return e.roles.includes(u)}),a.length>r.length)return!0;if(a.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=Jl(e.channelsCount,t.channelsCount,n.channelsCount),r==Oi?!0:r==hr?!1:(r=Jl(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==Oi?!0:r==hr?!1:!!(e.bandwidth&&Nx(e.bandwidth,t.bandwidth,n.bandwidth)==Oi)))}function T4(e,t,n){var r=Zl(e,t),a=Zl(e,n);if(r&&!a)return!1;if(!r&&a||(r=Jl(e.width*e.height,t.width*t.height,n.width*n.height),r==Oi))return!0;if(r==hr)return!1;if(e.frameRate){if(r=Jl(e.frameRate,t.frameRate,n.frameRate),r==Oi)return!0;if(r==hr)return!1}return!!(e.bandwidth&&Nx(e.bandwidth,t.bandwidth,n.bandwidth)==Oi)}function b4(e,t,n){var r=es(e.language,t.language),a=es(e.language,n.language);if(a>r)return!0;if(a<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(u){return e.roles.includes(u)}),a=n.roles.filter(function(u){return e.roles.includes(u)}),a.length>r.length)return!0;if(a.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function E4(e,t,n){return Jl(e.width*e.height,t.width*t.height,n.width*n.height)==Oi}function Px(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Ox(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ft([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Jl(e,t,n){if(t==e&&e!=n)return hr;if(n==e&&e!=t)return Oi;if(t>e){if(n<=e||n-e<t-e)return Oi;if(n-e>t-e)return hr}else{if(n>e)return hr;if(e-n<e-t)return Oi;if(e-n>e-t)return hr}return Ux}function Nx(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Oi:t<e?hr:Ux}function l0(e){switch(e.type){case Ut:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function u0(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,Ac(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function f0(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,Ac(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function eu(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function tu(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function Ac(e){if(!c0.has(e)){var t=Eo(e);c0.set(e,t)}return c0.get(e)}we("shaka.util.PeriodCombiner",Io),Io.prototype.setUseStreamOnce=Io.prototype.gh,Io.prototype.setAllowMultiTypeVariants=Io.prototype.Zg,Io.prototype.combinePeriods=Io.prototype.Ke,Io.prototype.getImageStreams=Io.prototype.Nh,Io.prototype.getTextStreams=Io.prototype.jf,Io.prototype.getVariants=Io.prototype.ei;var Oi=1,Ux=0,hr=-1,c0=new Map;function k4(e,t){var n=new DOMParser,r=A4.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function Bx(e,t){try{var n=qi(e);return k4(n,t)}catch{return null}}var A4=new Is(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Ic(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.ea=1,this.B=[],this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.o=new Map,this.s={},this.ba={},this.m=new Io,this.H=0,this.da=new Ze(5),this.I=new Mt(function(){if(e.G&&!e.g.continueLoadingWhenPaused&&(e.C.jb(e.G,"timeupdate"),e.G.paused)){e.C.ha(e.G,"timeupdate",function(){return Hx(e)});return}Hx(e)}),this.N=new $s,this.L=null,this.fa=[],this.R=1/0,this.F=!1,this.h=null,this.K=0,this.U=!1,this.C=new Ct,this.G=null,this.Z=!1}w=Ic.prototype,w.configure=function(e){var t=this.j&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.i&&this.i.presentationTimeline.V()&&this.I.tc(),this.h&&this.h.configure(this.g),this.m&&(this.m.Zg(this.g.dash.multiTypeVariantsAllowed&&Pn()),this.m.gh(this.g.dash.useStreamOnceInPeriodFlattening))},w.start=function(e,t){var n=this,r;return z(function(a){if(a.g==1)return n.F=t.isLowLatencyMode(),n.A=[e],n.j=t,k(a,h0(n),2);if(r=a.h,n.j&&d0(n,r),!n.j)throw new se(2,7,7001);return a.return(n.i)})},w.stop=function(){for(var e=b(Object.values(this.s)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.s={},this.o.clear(),this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.m=null,this.I!=null&&(this.I.stop(),this.I=null),this.h&&this.h.destroy(),this.C&&(this.C.release(),this.C=null),this.N.destroy()},w.update=function(){var e=this,t;return z(function(n){if(n.g==1)return Z(n,2),k(n,h0(e),4);if(n.g!=2)return K(n,0);if(t=ne(n),!e.j||!t)return n.return();e.j.onError(t),V(n)})},w.onExpirationUpdated=function(){},w.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.V()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.Wb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.H=t.endTime-e,d0(this,0))}}},w.banLocation=function(e){this.h&&this.h.banLocation(e)},w.setMediaElement=function(e){this.G=e};function h0(e){var t,n,r,a,u,c,d,p,S,T;return z(function(E){return E.g==1?(t=4,n="MPD",r=$4(e),a=e.A,r.length?(a=r,n="Patch",t=6):1<e.A.length&&e.h&&(u=Yl(e.h,"Location",!0),u.length&&(a=u)),c=Qn(a,e.g.retryParameters),d=Date.now(),k(E,m0(e,c,0,{type:t}),2)):E.g!=3?(p=E.h,e.j?(p.uri&&p.uri!=p.originalUri&&!e.A.includes(p.uri)&&e.A.unshift(p.uri),k(E,I4(e,p.data,p.uri,n),3)):E.return(0)):(S=Date.now(),T=(S-d)/1e3,e.da.sample(1,T),E.return(T))})}function I4(e,t,n,r){var a,u,c,d,p,S,T,E,I,A;return z(function(R){if(R.g==1){if(a=t,u=e.g.dash.manifestPreprocessor,c=Gf,u!=c){if(Ot("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),d=Bx(a,r),!d)throw new se(2,4,4001,n);u(d),a=Mi(d.outerHTML)}if(p=Bd(a,r),!p)throw new se(2,4,4001,n);return S=e.g.dash.manifestPreprocessorTXml,T=Wf,S!=T&&S(p),r==="Patch"?R.return(M4(e,p)):e.g.dash.disableXlinkProcessing?R.return(jx(e,p,n)):(E=e.g.dash.xlinkFailGracefully,I=Tc(p,e.g.retryParameters,E,n,e.j.networkingEngine),ns(e.N,I),k(R,I.promise,2))}return A=R.h,R.return(jx(e,A,n))})}function jx(e,t,n){var r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me,le,ue,de,be,Ce,ke,Oe,Ie,Fe,vt,Dt,Sn,$t,kn,Un,Cn,Kt,Mn,Wn,Xn,zo,Vo,bi,pr,Ur,Aa,mr,uh,yu,vu;return z(function(Ni){switch(Ni.g){case 1:for(e.h&&e.h.l.clear(),r=[n],a=[],u=new Map,c=on(t,"Location"),d=b(c),p=d.next();!p.done;p=d.next())S=p.value,T=S.attributes.serviceLocation,(E=xi(S))&&(I=ro(r,[E])[0],T&&(e.h?va(e.h,"Location",T,I):u.set(T,I)),a.push(I));if(e.h?(A=Yl(e.h,"Location",!0),0<A.length&&(r=e.A=A)):a.length&&(r=e.A=a),e.l.ae=t.attributes.id||"",e.l.td=Bt(t,"publishTime",Ir)||0,e.B=on(t,"PatchLocation"),R=Promise.resolve(),(D=Si(t,"ContentSteering"))&&e.j)for(L=D.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=L):(e.h=new ya(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=L,(F=xi(D))&&(Bt(D,"queryBeforeStart",Fd,!1)?R=ql(e.h,F):ql(e.h,F))),U=b(u.keys()),q=U.next();!q.done;q=U.next())N=q.value,G=u.get(N),va(e.h,"Location",N,G);if(Q=on(t,"BaseURL"),ae=!1,e.h)for(me=b(Q),le=me.next();!le.done;le=me.next())ue=le.value,de=ue.attributes.serviceLocation,be=xi(ue),de&&be&&(va(e.h,"BaseURL",de,be),ae=!0);if(ae&&e.h||(Ce=Q.map(xi),re=ro(r,Ce)),ke=function(){return e.h&&ae?Yl(e.h,"BaseURL"):re||[]},e.l.Ga=ke,Oe=0,Q&&Q.length&&(Oe=Bt(Q[0],"availabilityTimeOffset",bf)||0),e.l.Ia=Oe,Ie=e.g.dash.ignoreMinBufferTime,Fe=0,Ie||(Fe=Bt(t,"minBufferTime",Hi)||0),e.H=Bt(t,"minimumUpdatePeriod",Hi,-1),vt=Bt(t,"availabilityStartTime",Ir),Dt=Bt(t,"timeShiftBufferDepth",Hi),Sn=e.g.dash.ignoreSuggestedPresentationDelay,$t=null,Sn||($t=Bt(t,"suggestedPresentationDelay",Hi)),kn=e.g.dash.ignoreMaxSegmentDuration,Un=null,kn||(Un=Bt(t,"maxSegmentDuration",Hi)),Cn=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.Z=e.i.presentationTimeline.V()&&Cn=="static"),e.l.type=Cn,e.i)for(Kt=e.i.presentationTimeline,Mn=b(Object.values(e.s)),Wn=Mn.next();!Wn.done;Wn=Mn.next())Xn=Wn.value,Xn.segmentIndex&&Xn.segmentIndex.Ma(Kt.mb());else zo=e.g.defaultPresentationDelay||1.5*Fe,Vo=$t??zo,Kt=new st(vt,Vo,e.g.dash.autoCorrectDrift);return Kt.sc(Cn=="static"),Kt.V()&&!isNaN(e.g.availabilityWindowOverride)&&(Dt=e.g.availabilityWindowOverride),Dt==null&&(Dt=1/0),Kt.pe(Dt),bi=t.attributes.profiles||"",e.l.profiles=bi.split(","),pr={vb:Cn!="static",presentationTimeline:Kt,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:Oe,Kb:null,profiles:bi.split(","),roles:null},e.K=0,Ur=Vx(e,pr,ke,t),Aa=Ur.duration,mr=Ur.periods,(Cn!="static"||e.Z)&&Ur.rg||Kt.Za(Aa||1/0),e.U&&!e.F&&e.j.isAutoLowLatencyMode()&&(e.j.enableLowLatencyMode(),e.F=e.j.isLowLatencyMode()),e.F&&Kt.$g(e.R),Kt.xf(Un||1),k(Ni,R,2);case 2:return e.F&&(Fe=0,uh=$t??e.g.defaultPresentationDelay,Kt.Of(uh)),e.i?(e.i.periodCount=mr.length,e.i.gapCount=e.K,k(Ni,Fx(e,mr,!1),4)):k(Ni,e.m.Ke(mr,pr.vb),6);case 6:if(e.i={presentationTimeline:Kt,variants:e.m.j,textStreams:e.m.jf(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:Fe||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:_4(t),nextUrl:R4(t),periodCount:mr.length,gapCount:e.K,isLowLatency:e.U},!Kt.nh()){Ni.u(7);break}return yu=on(t,"UTCTiming"),k(Ni,j4(e,ke,yu),8);case 8:if(vu=Ni.h,!e.j)return Ni.return();Kt.ah(vu);case 7:Kt.Wd();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),V(Ni)}})}function Fx(e,t,n){var r;return z(function(a){if(a.g==1)return k(a,e.m.Ke(t,!0,n),2);e.i.variants=e.m.j,r=e.m.jf(),0<r.length&&(e.i.textStreams=r),e.i.imageStreams=e.m.i,e.j.filter(e.i),V(a)})}function M4(e,t){var n,r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me,le,ue,de;return z(function(be){if(be.g==1){if(n=t.attributes.mpdId,r=Bt(t,"originalPublishTime",Ir),!n||n!==e.l.ae||r!==e.l.td)throw e.B=[],new se(1,4,4052);for(a=[],u=[],c=new Set,d=b(Sy(t)),p=d.next();!p.done;p=d.next())if(S=p.value,T=Ef(S.attributes.sel||""),E=T[T.length-1],I=xi(S)||"",E.name==="MPD")if(E.Sb==="mediaPresentationDuration"){A=xi(S)||"";var Ce=Hi(A);if(Ce!=null){e.l.Kb=Ce;for(var ke=b(e.o.values()),Oe=ke.next();!Oe.done;Oe=ke.next())Oe.value.Kb=Ce}}else if(E.Sb==="type"){for(e.i.presentationTimeline.sc(I=="static"),e.l.type=I,Ce=b(e.o.values()),ke=Ce.next();!ke.done;ke=Ce.next())ke.value.vb=I=="dynamic";I=="static"&&(e.H=-1)}else E.Sb==="publishTime"?e.l.td=Ir(I)||0:E.Sb===null&&S.tagName==="add"&&u.push(S);else if(E.name==="PatchLocation")Ty(e.B,S);else if(E.name==="Period"){if(S.tagName==="add")u.push(S);else if(S.tagName==="remove"&&E.id){Ce=e,ke=E.id,Ce.i.periodCount--,Oe=b(Ce.o.keys());for(var Ie=Oe.next();!Ie.done;Ie=Oe.next())if(Ie=Ie.value,Ie.startsWith(ke)){var Fe=Ce.o.get(Ie);ma(Fe,fs,"SegmentTimeline").children=[],zx(Ce,Ie),Ce.o.delete(Ie)}}}else if(E.name==="SegmentTemplate"){if(ke=Ef(S.attributes.sel||""),Ce=ke[ke.length-1],Ce.Sb){for(ke=$x(e,ke),Oe=xi(S)||"",Ie=b(ke),Fe=Ie.next();!Fe.done;Fe=Ie.next())Fe=e.o.get(Fe.value),Ey(Fe.J.$b,S.tagName,Ce.Sb,Oe);Ce=ke}else Ce=[];for(R=Ce,D=b(R),L=D.next();!L.done;L=D.next())F=L.value,c.add(F)}else if(E.name==="SegmentTimeline"||E.name==="S"){for(Ce=Ef(S.attributes.sel||""),Ce=$x(e,Ce),ke=b(Ce),Oe=ke.next();!Oe.done;Oe=ke.next())Oe=e.o.get(Oe.value),Oe=ma(Oe,fs,"SegmentTimeline"),Ie=on(Oe,"S"),Ty(Ie,S),Oe.children=Ie;for(U=Ce,q=b(U),N=q.next();!N.done;N=q.next())G=N.value,c.add(G)}for(Q=b(c),re=Q.next();!re.done;re=Q.next())ae=re.value,zx(e,ae);for(me=b(u),le=me.next();!le.done;le=me.next())ue=le.value,a.push.apply(a,_(Vx(e,{vb:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:e.l.Ia,profiles:e.l.profiles,Kb:e.l.Kb,roles:null},e.l.Ga,ue).periods));return a.length?(e.i.periodCount+=a.length,e.i.gapCount=e.K,k(be,Fx(e,a,!0),2)):be.u(2)}e.l.type=="static"&&(de=e.l.Kb,e.i.presentationTimeline.Za(de||1/0)),V(be)})}function $x(e,t){var n="",r="",a=-1,u="";t=b(t);for(var c=t.next();!c.done;c=t.next())c=c.value,c.name==="Period"?n=c.id:c.name==="AdaptationSet"?(r=c.id,c.position!==null&&(a=c.position)):c.name==="Representation"&&(u=c.id);if(t=[],u)t.push(n+","+u);else if(r)for(a=b(e.o.values()),e=a.next();!e.done;e=a.next())e=e.value,e.ta.id===n&&e.ja.id===r&&e.J.id&&t.push(n+","+e.J.id);else if(-1<a)for(r=b(e.o.values()),e=r.next();!e.done;e=r.next())e=e.value,e.ta.id===n&&e.ja.position===a&&e.J.id&&t.push(n+","+e.J.id);return t}function zx(e,t){var n=e.o.get(t),r=e.s[t];r.segmentIndex&&r.segmentIndex.Ma(e.i.presentationTimeline.mb());try{var a=Ex(n,function(u,c,d,p){return Wx(e,u,c,d,p)},e.s,!0,e.g.dash.initialSegmentLimit,e.ba,n.J.aesKey,null,!0);r.createSegmentIndex=function(){return z(function(u){if(u.g==1)return r.segmentIndex?u.u(0):k(u,a.fc(),3);r.segmentIndex=u.h,V(u)})}}catch(u){if(t=n.J.contentType,t!=Ut&&t!="application"&&t!="image"||u.code!=4002)throw u}}function _4(e){var t=Si(e,"ServiceDescription");if(!t||(e=Si(t,"Latency"),t=Si(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function R4(e){if(e=on(e,"SupplementalProperty"),!e.length)return null;e=b(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function Vx(e,t,n,r){var a=t.Kb;a||(a=Bt(r,"mediaPresentationDuration",Hi),e.l.Kb=a);var u=0;e.i&&e.i.presentationTimeline&&e.Z&&(u=e.i.presentationTimeline.Vb());var c=[],d=u;r=on(r,"Period");for(var p=0;p<r.length;p++){var S=r[p],T=r[p+1],E=Bt(S,"start",Hi,d),I=S.attributes.id,A=Bt(S,"duration",Hi),R=null;if(T){var D=Bt(T,"start",Hi);D!=null&&(R=D-E)}else a!=null&&(R=a-E+u);if(D=ib,R&&A&&Math.abs(R-A)>D&&R>A&&e.K++,R==null&&(R=A),!(e.L!==null&&I!==null&&E!==null&&E<e.L)||e.fa.includes(I)||p+1==r.length){if(E!==null&&(e.L===null||E>e.L)&&(e.L=E),d=L4(e,t,n,{start:E,duration:R,node:S,ld:R==null||!T}),c.push(d),t.ta.id&&R&&(e.ba[t.ta.id]=R),R==null){d=null;break}d=E+R}}return e.fa=c.map(function(L){return L.id}),a!=null?{periods:c,duration:a+u,rg:!1}:{periods:c,duration:d,rg:!0}}function L4(e,t,n,r){t.ta=p0(e,r.node,null,n),t.ka=r,t.ta.Ia=t.Ia,t.ta.id||(t.ta.id="__shaka_period_"+r.start);var a=on(r.node,"EventStream");n=t.presentationTimeline.mb(),a=b(a);for(var u=a.next();!u.done;u=a.next())F4(e,r.start,r.duration,u.value,n);if(n=on(r.node,"AdaptationSet").map(function(T,E){return D4(e,t,E,T)}).filter(Jr),t.vb){for(r=[],a=b(n),u=a.next();!u.done;u=a.next()){u=b(u.value.Mi);for(var c=u.next();!c.done;c=u.next())r.push(c.value)}if(r.length!=new Set(r).size)throw new se(2,4,4018)}for(r=n.filter(function(T){return!T.Yf}),n=n.filter(function(T){return T.Yf}),n=b(n),a=n.next();!a.done;a=n.next()){a=a.value,u=a.Yf.split(" "),c=b(r);for(var d=c.next();!d.done;d=c.next())if(d=d.value,u.includes(d.id)){d=b(d.streams);for(var p=d.next(),S={};!p.done;S={Sf:void 0},p=d.next())S.Sf=p.value,S.Sf.trickModeVideo=a.streams.find(function(T){return function(E){return Eo(T.Sf.codecs)==Eo(E.codecs)}}(S))}}if(n=Mc(e.g.disableAudio,r,"audio"),a=Mc(e.g.disableVideo,r,"video"),u=Mc(e.g.disableText,r,Ut),r=Mc(e.g.disableThumbnails,r,"image"),a.length===0&&n.length===0)throw new se(2,4,4004);return{id:t.ta.id,audioStreams:n,videoStreams:a,textStreams:u,imageStreams:r}}function Mc(e,t,n){return e||!t.length?[]:t.reduce(function(r,a){return a.contentType!=n||r.push.apply(r,_(a.streams)),r},[])}function D4(e,t,n,r){function a(ue){switch(ue){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function u(ue){switch(ue){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ja=p0(e,r,t.ta,null),t.ja.position=n;var c=!1;n=on(r,"Role");var d=n.map(function(ue){return ue.attributes.value}).filter(Jr),p=void 0,S=t.ja.contentType==Ut;S&&(p="subtitle"),n=b(n);for(var T=n.next();!T.done;T=n.next()){T=T.value;var E=T.attributes.schemeIdUri;if(E==null||E=="urn:mpeg:dash:role:2011")switch(T=T.attributes.value,T){case"main":c=!0;break;case"caption":case"subtitle":p=T}}var I,A;E=on(r,"EssentialProperty"),n=null;var R=!1;T=!1,E=b(E);for(var D=E.next();!D.done;D=E.next()){D=D.value;var L=D.attributes.schemeIdUri;L=="http://dashif.org/guidelines/trickmode"?n=D.attributes.value:L=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?I=u(parseInt(D.attributes.value,10)):L=="urn:mpeg:mpegB:cicp:ColourPrimaries"?A=a(parseInt(D.attributes.value,10)):L!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(L=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?R=!0:T=!0)}var F=null;for(E=on(r,"SupplementalProperty"),E=b(E),D=E.next();!D.done;D=E.next())D=D.value,L=D.attributes.schemeIdUri,L=="http://dashif.org/guidelines/last-segment-number"?F=parseInt(D.attributes.value,10)-1:L=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?I=u(parseInt(D.attributes.value,10)):L=="urn:mpeg:mpegB:cicp:ColourPrimaries"&&(A=a(parseInt(D.attributes.value,10)));E=on(r,"Accessibility");var U=new Map,q;for(E=b(E),D=E.next();!D.done;D=E.next())if(L=D.value,D=L.attributes.schemeIdUri,L=L.attributes.value,D!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(D!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)D=="urn:mpeg:dash:role:2011"?L!=null&&(d.push(L),L=="captions"&&(p="caption")):D=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(L=="1"?q="visually impaired":L=="2"&&(q="hard of hearing"));else if(D=1,L!=null){L=b(L.split(";"));for(var N=L.next();!N.done;N=L.next()){var G=N.value,Q=N=void 0;G.includes("=")?(G=G.split("="),N="svc"+G[0],Q=G[1].split(",")[0].split(":").pop()):(N="svc"+D,D++,Q=G),U.set(N,qt(Q))}}else U.set("svc1","und");else if(D=1,L!=null)for(L=L.split(";"),N=b(L),G=N.next();!G.done;G=N.next()){Q=G.value;var re=G=void 0;Q.includes("=")?(Q=Q.split("="),G=Q[0].startsWith("CC")?Q[0]:"CC"+Q[0],re=Q[1]||"und"):(G="CC"+D,L.length==2?D+=2:D++,re=Q),U.set(G,qt(re))}else U.set("CC1","und");if(T)return null;T=on(r,"ContentProtection");var ae=mx(T,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),me=qt(t.ja.language||"und"),le=t.ja.label;if(T=on(r,"Representation"),r=T.map(function(ue){return(ue=P4(e,t,ae,p,me,le,c,d,U,ue,q,F))&&(ue.hdr=ue.hdr||I,ue.colorGamut=ue.colorGamut||A,ue.fastSwitching=R),ue}).filter(function(ue){return!!ue}),r.length==0){if(n=t.ja.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||S||n)return null;throw new se(2,4,4003)}if(!t.ja.contentType||t.ja.contentType=="application")for(t.ja.contentType=Xx(r[0].mimeType,r[0].codecs),S=b(r),E=S.next();!E.done;E=S.next())E.value.type=t.ja.contentType;for(S=t.ja.id||"__fake__"+e.ea++,E=b(r),D=E.next();!D.done;D=E.next()){for(D=D.value,L=b(ae.drmInfos),N=L.next();!N.done;N=L.next())N=N.value,N.keyIds=N.keyIds&&D.keyIds?new Set([].concat(_(N.keyIds),_(D.keyIds))):N.keyIds||D.keyIds;e.g.dash.enableAudioGroups&&(D.groupId=S)}return T=T.map(function(ue){return ue.attributes.id}).filter(Jr),{id:S,contentType:t.ja.contentType,language:me,ek:c,streams:r,drmInfos:ae.drmInfos,Yf:n,Mi:T}}function P4(e,t,n,r,a,u,c,d,p,S,T,E){t.J=p0(e,S,t.ja,null);var I=t.J.id;if(e.R=Math.min(e.R,t.J.Ia),e.U=0<e.R,!B4(t.J))return null;var A=t.ka.start;t.bandwidth=Bt(S,"bandwidth",nr)||0,t.roles=d;var R=t.J.contentType,D=R==Ut||R=="application";R=R=="image";try{var L=void 0;if(n.Fe){var F=t.J.Ga,U=ro(F(),[n.Fe.ti]),q=Qn(U,e.g.retryParameters);L={bitsKey:128,blockCipherMode:"CBC",iv:n.Fe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var de,be,Ce;return z(function(ke){if(ke.g==1)return k(ke,m0(e,q,6),2);if(ke.g!=3){if(de=ke.h,!de.data||de.data.byteLength!=16)throw new se(2,4,4049);return be={name:"AES-CBC"},Ce=L,k(ke,h.crypto.subtle.importKey("raw",de.data,be,!0,["decrypt"]),3)}Ce.cryptoKey=ke.h,L.fetchKey=void 0,V(ke)})}}}if(t.J.aesKey=L,F=function(de,be,Ce,ke){return Wx(e,de,be,Ce,ke)},t.J.Rc)var N=i4(t,F,L);else if(t.J.Pb)N=s4(t,e.s,L);else if(t.J.$b)N=Ex(t,F,e.s,!!e.i,e.g.dash.initialSegmentLimit,e.ba,L,E,!1);else{var G=t.ka.duration||0,Q=t.J.Ga,re=t.J.mimeType,ae=t.J.codecs;N={fc:function(){var de=ap(A,G,Q());return de.Hb(function(be){be.mimeType=re,be.codecs=ae}),Promise.resolve(de)}}}}catch(de){if((D||R)&&de.code==4002)return null;throw de}E=on(S,"ContentProtection"),E=zA(E,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),E=new Set(E?[E]:[]),F=!1,on(S,"SupplementalProperty").some(function(de){return de.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&de.attributes.value=="JOC"})&&(F=!0),U=!1,D&&(U=d.includes("forced_subtitle")||d.includes("forced-subtitle"));var me;if(R&&((S=on(S,"EssentialProperty").find(function(de){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(de.attributes.schemeIdUri)}))&&(me=S.attributes.value),!me))return null;var le;S=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(S.includes("hvc1.2.4.L153.B0")||S.includes("hev1.2.4.L153.B0"))&&(le="PQ"),D=t.J.id?t.ta.id+","+t.J.id:"",e.B.length&&I&&e.o.set(t.ta.id+","+I,O4(t));var ue=D&&e.s[D]?e.s[D]:{id:e.ea++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){ue.segmentIndex&&(ue.segmentIndex.release(),ue.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:S,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:E,language:a,originalLanguage:t.ja.language,label:u,type:t.ja.contentType,primary:c,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:d,forced:U,channelsCount:t.J.Jc,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:F,closedCaptions:p,hdr:le,colorGamut:void 0,videoLayout:void 0,tilesLayout:me,accessibilityPurpose:T,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Vn(t.J.mimeType,t.J.codecs)])};return ue.createSegmentIndex=function(){var de;return z(function(be){if(be.g==1)return ue.segmentIndex?be.u(0):(de=ue,k(be,N.fc(),3));de.segmentIndex=be.h,V(be)})},D&&t.vb&&!e.s[D]&&(e.s[D]=ue),ue}function O4(e){for(var t={},n=b(Object.keys(e)),r=n.next();!r.done;r=n.next())if(r=r.value,["period","adaptationSet","representation"].includes(r)){var a=e[r];t[r]={Rc:null,Pb:null,$b:a.$b,Ga:a.Ga,width:a.width,height:a.height,contentType:a.contentType,mimeType:a.mimeType,language:a.language,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,emsgSchemeIdUris:a.emsgSchemeIdUris,id:a.id,position:a.position,Jc:a.Jc,audioSamplingRate:a.audioSamplingRate,Ia:a.Ia,Gc:a.Gc}}else r=="periodInfo"?(a=e[r],t[r]={start:a.start,duration:a.duration,node:null,ld:a.ld}):t[r]=e[r];return t}function Hx(e){var t,n;return z(function(r){switch(r.g){case 1:return t=0,Z(r,2),k(r,h0(e),4);case 4:t=r.h,K(r,3);break;case 2:if(n=ne(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),d0(e,t),V(r)}})}function d0(e,t){if(!(0>e.H)){var n=e.H;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.I.Y(Math.max(n-t,it(e.da)))}}function p0(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Jc:null,audioSamplingRate:null,Ia:0,Kf:0},r=r||n.Ga;var a=t.attributes.id,u=on(t,"BaseURL"),c,d=!1;if(e.h)for(var p=b(u),S=p.next();!S.done;S=p.next()){var T=S.value;S=T.attributes.serviceLocation,T=xi(T),S&&T&&(va(e.h,a,S,T),d=!0)}d&&e.h||(c=u.map(xi)),p=t.attributes.contentType||n.contentType,S=t.attributes.mimeType||n.mimeType,T=[t.attributes.codecs||n.codecs];var E=tr(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");E&&T.push(E),T=dp(T).join(","),E=Bt(t,"frameRate",Fb)||n.frameRate;var I=t.attributes.sar||n.pixelAspectRatio,A=N4(on(t,"InbandEventStream"),n.emsgSchemeIdUris),R=on(t,"AudioChannelConfiguration");R=U4(R)||n.Jc;var D=Bt(t,"audioSamplingRate",vo)||n.audioSamplingRate;p||(p=Xx(S,T));var L=Si(t,"SegmentBase"),F=Si(t,"SegmentTemplate"),U=L&&Bt(L,"availabilityTimeOffset",bf)||0,q=F&&Bt(F,"availabilityTimeOffset",bf)||0,N=u&&u.length&&Bt(u[0],"availabilityTimeOffset",bf)||0;U=n.Ia+N+U+q,q=null,(N=Si(t,"SegmentSequenceProperties"))&&(N=Si(N,"SAP"))&&(q=Bt(N,"cadence",Tf)),N=t.attributes.label;var G=on(t,"Label");return G&&G.length&&(G=G[0],Gn(G)&&(N=Gn(G))),{Ga:function(){return ro(r(),u.length?e.h&&d?Yl(e.h,a):c||[]:[])},Rc:L||n.Rc,Pb:Si(t,"SegmentList")||n.Pb,$b:F||n.$b,width:Bt(t,"width",vo)||n.width,height:Bt(t,"height",vo)||n.height,contentType:p,mimeType:S,codecs:T,frameRate:E,pixelAspectRatio:I,emsgSchemeIdUris:A,id:a,language:t.attributes.lang,Jc:R,audioSamplingRate:D,Ia:U,Gc:null,Kf:q||n.Kf,label:N||null}}function N4(e,t){t=t.slice(),e=b(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function U4(e){e=b(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function B4(e){var t=e.Rc?1:0;return t+=e.Pb?1:0,t+=e.$b?1:0,t==0?e.contentType==Ut||e.contentType=="application":(t!=1&&(e.Rc&&(e.Pb=null),e.$b=null),!0)}function Gx(e,t,n,r){var a,u,c,d,p,S,T;return z(function(E){if(E.g==1)return a=[bo(n)],u=ro(t(),a),c=Qn(u,e.g.retryParameters),c.method=r,d=e.j.networkingEngine.request(4,c),ns(e.N,d),k(E,d.promise,2);if(p=E.h,r=="HEAD"){if(!p.headers||!p.headers.date)return E.return(0);S=p.headers.date}else S=fn(p.data);return T=Date.parse(S),isNaN(T)?E.return(0):E.return(T-Date.now())})}function j4(e,t,n){var r,a,u,c,d,p,S,T;return z(function(E){switch(E.g){case 1:r=n.map(function(I){return{scheme:I.attributes.schemeIdUri,value:I.attributes.value}}),a=e.g.dash.clockSyncUri,!r.length&&a&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:a}),u=b(r),c=u.next();case 2:if(c.done){E.u(4);break}switch(d=c.value,Z(E,5),p=d.scheme,S=d.value,p){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return E.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return E.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return T=Date.parse(S),E.return(isNaN(T)?0:T-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":je("NTP UTCTiming scheme is not supported");break;default:je("Unrecognized scheme in UTCTiming element",p)}E.u(9);break;case 7:return k(E,Gx(e,t,S,"HEAD"),10);case 10:return E.return(E.h);case 8:return k(E,Gx(e,t,S,"GET"),11);case 11:return E.return(E.h);case 9:K(E,3);break;case 5:ne(E);case 3:c=u.next(),E.u(2);break;case 4:return je("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),E.return(0)}})}function F4(e,t,n,r,a){var u=r.attributes.schemeIdUri||"",c=r.attributes.value||"",d=Bt(r,"timescale",vo)||1;r=b(on(r,"Event"));for(var p=r.next();!p.done;p=r.next()){p=p.value;var S=Bt(p,"presentationTime",vo)||0,T=Bt(p,"duration",vo)||0;S=S/d+t,T=S+T/d,n!=null&&(S=Math.min(S,t+n),T=Math.min(T,t+n)),T<a||(p={schemeIdUri:u,value:c,startTime:S,endTime:T,id:p.attributes.id||"",eventElement:ky(p),eventNode:p},e.j.onTimelineRegionAdded(p))}}function Wx(e,t,n,r,a){var u,c,d,p;return z(function(S){return S.g==1?(u=Ri,c=a?0:1,d=Zs(t,n,r,e.g.retryParameters),k(S,m0(e,d,u,{type:c}),2)):(p=S.h,S.return(p.data))})}function Xx(e,t){return t=Vn(e,t),pl(t)?Ut:e.split("/")[0]}function m0(e,t,n,r){return t=e.j.networkingEngine.request(n,t,r),ns(e.N,t),t.promise}function $4(e){var t=e.l.td;if(!e.l.ae||!t||!e.B.length)return[];var n=Date.now()/1e3,r=e.B.filter(function(a){return a=vo(a.attributes.ttl),!a||t+a>n}).map(xi).filter(Jr);return r.length?ro(e.A,r):[]}we("shaka.dash.DashParser",Ic),Ci["application/dash+xml"]=function(){return new Ic},Ci["video/vnd.mpeg.dash.mpd"]=function(){return new Ic};function _c(){}we("shaka.dependencies",_c),_c.has=function(e){return g0.has(e)},_c.add=function(e,t){if(!qx[e])throw Error(e+" is not supported");e==Kx?Ot("mux.js","mux.js is no longer used in Shaka Player."):g0.set(e,function(){return t})};var Kx="muxjs",qx={fk:Kx,ISOBoxer:"ISOBoxer"};_c.Allowed=qx;var g0=new Map([["ISOBoxer",function(){return h.ISOBoxer}]]);function Yx(e,t,n){this.type=e,this.g=t,this.segments=n||null}function Qx(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}Qx.prototype.toString=function(e){function t(a){return a.name+"="+(isNaN(Number(a.value))?'"'+a.value+'"':a.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(a){return e?!e.has(a.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function Zx(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function nu(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function Ye(e,t,n){return(e=nu(e,t))?e.value:n||null}function Yt(e,t){if(e=nu(e,t),!e)throw new se(2,4,4023,t);return e.value}function Jx(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.zb=n}function e2(e,t){this.name=e,this.value=t}function fi(e,t){return e.filter(function(n){return n.name==t})}function t2(e,t){return e.filter(function(n){return Yt(n,"TYPE")==t})}function co(e,t){e=b(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function wa(e,t,n){return n=n===void 0?0:n,(e=co(e,t))?Number(e.value):n}function Or(e,t,n){return t?n2(e,[t],n):[]}function n2(e,t,n){if(!t.length)return[];t=ro(e,t),e=[],t=b(t);for(var r=t.next();!r.done;r=t.next())e.push(o2(r.value,n));return e}function o2(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=b(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var a=r.slice(2,r.length-1),u=t.get(a);if(u)e=e.replace(r,u);else throw new se(2,4,4039,a)}}return e}function z4(){this.g=0}function y0(e,t){t=fn(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new se(2,4,4015);t=0;for(var r=!0,a=b(n),u=a.next();!u.done;u=a.next())if(u=u.value,/^#(?!EXT)/m.test(u)||r)r=!1;else if(u=v0(e,u),--e.g,i2.includes(u.name)){t=1;break}else u.name=="EXT-X-STREAM-INF"&&(r=!0);for(a=[],r=!0,u=0;u<n.length;u++){var c=n[u],d=n[u+1];if(/^#(?!EXT)/m.test(c)||r)r=!1;else{if(c=v0(e,c),V4.includes(c.name)){if(t!=1)throw new se(2,4,4017);c=n.splice(u,n.length-u),n=[],r=[],u=[],d=null,c=b(c);for(var p=c.next();!p.done;p=c.next())p=p.value,/^(#EXT)/.test(p)?(p=v0(e,p),i2.includes(p.name)?a.push(p):p.name=="EXT-X-MAP"?d=p:p.name=="EXT-X-PART"?u.push(p):p.name=="EXT-X-PRELOAD-HINT"?Ye(p,"TYPE")=="PART"?u.push(p):Ye(p,"TYPE")=="MAP"&&(p.name="EXT-X-MAP",d=p):r.push(p)):/^#(?!EXT)/m.test(p)||(p=p.trim(),d&&r.push(d),n.push(new Jx(p,r,u)),r=[],u=[]);return u.length&&(d&&r.push(d),n.push(new Jx("",r,u))),new Yx(t,a,n)}a.push(c),c.name=="EXT-X-STREAM-INF"&&(c.attributes.push(new e2("URI",d)),r=!0)}}return new Yx(t,a)}function v0(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new se(2,4,4016,t);t=n[1];var r=n[2];n=[];var a;if(r){r=new Lr(r);var u;(u=ar(r,/^([^,=]+)(?:,|$)/g))&&(a=u[1]);for(var c=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;u=ar(r,c);)n.push(new e2(u[1],u[2]||u[3])),fa(r)}return new Qx(e,t,n,a)}var i2="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),V4="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");function r2(){}function s2(e){try{var t=x0(e);return Fs({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return ts(n)}}function x0(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new se(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new se(2,1,1004,e);var n=t[0];e=h.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var a;return r?a=ri(e):a=Mi(e),{data:a,contentType:n}}we("shaka.net.DataUriPlugin",r2),r2.parse=s2,Zi("data",s2);function Rc(){var e=this;this.g=this.h=null,this.B=1,this.s=new Map,this.G=new Map,this.N=new Map,this.N.set("video",new Map),this.N.set("audio",new Map),this.N.set(Ut,new Map),this.N.set("image",new Map),this.ub=new Set,this.i=new Map,this.l=null,this.L="",this.Fa=new z4,this.H=-1,this.fa=1/0,this.ea=this.Gb=!1,this.A=new Mt(function(){if(e.ba&&!e.g.continueLoadingWhenPaused&&(e.Z.jb(e.ba,"timeupdate"),e.ba.paused)){e.Z.ha(e.ba,"timeupdate",function(){return A2(e)});return}A2(e)}),this.xa=Nc,this.m=null,this.ab=0,this.o=1/0,this.Da=this.za=this.U=0,this.da=new $s,this.C=new Map,this.F=new Map,this.qa=new Map,this.oa=new Map,this.K=new Map,this.pa=new Map,this.ya=new Map,this.Fb=this.I=!1,this.Db=new Ze(5),this.j=null,this.R=!0,this.Ea=new Set,this.Z=new Ct,this.ba=null}w=Rc.prototype,w.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},w.start=function(e,t){var n=this,r;return z(function(a){return a.g==1?(n.h=t,n.I=t.isLowLatencyMode(),k(a,A0(n,[e]),2)):a.g!=3?(r=a.h,n.L=r.uri,k(a,W4(n,r.data,e),3)):a.return(n.m)})},w.stop=function(){this.A&&(this.A.stop(),this.A=null);var e=[];return this.da&&(e.push(this.da.destroy()),this.da=null),this.g=this.h=null,this.ub.clear(),this.m=null,this.i.clear(),this.G.clear(),this.F.clear(),this.s.clear(),this.qa.clear(),this.oa.clear(),this.K.clear(),this.pa.clear(),this.ya.clear(),this.Ea.clear(),this.j&&this.j.destroy(),this.Z&&(this.Z.release(),this.Z=null),Promise.all(e)},w.update=function(){var e=this,t,n,r,a,u,c,d,p,S,T,E,I;return z(function(A){if(A.g==1){if(!jo(e))return A.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,r=n.filter(function(R){return R.stream.segmentIndex}),a=b(r),u=a.next();!u.done;u=a.next())c=u.value,t.push(H4(e,c));return k(A,Promise.all(t),2)}for(m2(e,r.map(function(R){return R.stream})),d=r.some(function(R){return R.ed==0}),r.length&&!d&&(p=c3,Pc(e,p.sh),S=r.map(function(R){return R.Jb}),e.l.Za(Math.min.apply(Math,_(S))),e.h.updateDuration()),d&&S0(e),T=b(r),E=T.next();!E.done;E=T.next())I=E.value,I.stream.segmentIndex&&!I.stream.segmentIndex.O[0]&&e.h.disableStream(I.stream);V(A)})};function w0(e,t){return jo(e)?e.N.get(t.type):t.Yd}function H4(e,t){var n,r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me,le,ue,de,be,Ce,ke,Oe,Ie,Fe,vt;return z(function(Dt){switch(Dt.g){case 1:for(n=[],r=b(t.M()),a=r.next();!a.done;a=r.next())u=a.value,c=new Ln(u),d=c.g,t.Fd&&(0<=t.ob&&d.add("_HLS_msn",String(t.ob)),0<=t.pb&&d.add("_HLS_part",String(t.pb))),t.Gd&&d.add("_HLS_skip","YES"),Ag(d)&&sl(c,d),n.push(c.toString());return Z(Dt,2),k(Dt,A0(e,n,!0),4);case 4:p=Dt.h,K(Dt,3);break;case 2:throw S=ne(Dt),e.h&&e.h.disableStream(t.stream),S;case 3:if(!t.stream.segmentIndex)return Dt.return();if(T=y0(e.Fa,p.data),T.type!=1)throw new se(2,4,4017);return E=p.uri,E==p.originalUri||t.M().includes(E)||t.Tg.push(E),I=fi(T.g,"EXT-X-DEFINE"),A=C0(e,I,E),R=t.stream,D=w0(e,t),k(Dt,x2(e,T,R.mimeType,t.M,A),5);case 5:for(L=Dt.h,F=L.keyIds,U=L.drmInfos,q=function(Sn,$t){return Sn.size===$t.size&&[].concat(_(Sn)).every(function(kn){return $t.has(kn)})},q(R.keyIds,F)||(R.keyIds=F,R.drmInfos=U,e.h.newDrmInfo(R)),N=b2(e,T,D,A,t.M,t.type),G=N.segments,(Q=N.bandwidth)&&(R.bandwidth=Q),re=Bf(R),ae=b(G),me=ae.next();!me.done;me=ae.next())le=me.value,le.$&&(le.$.Hc=re);R.segmentIndex.rd(G,e.l.mb()),G.length&&(ue=wa(T.g,"EXT-X-MEDIA-SEQUENCE",0),be=(de=co(T.g,"EXT-X-SKIP"))?Number(Ye(de,"SKIPPED-SEGMENTS")):0,Ce=y2(ue,G),ke=Ce.ob,Oe=Ce.pb,t.ob=ke+be,t.pb=Oe,Ie=D.get(ue),R.segmentIndex.Ma(Ie)),(Fe=R.segmentIndex.O[0]||null)&&(t.mc=Fe.startTime,vt=G[G.length-1],t.Jb=vt.endTime),co(T.g,"EXT-X-ENDLIST")&&(t.ed=!0),b0(e,T),E0(e,T.g,R.type,A,t.M),V(Dt)}})}w.onExpirationUpdated=function(){},w.onInitialVariantChosen=function(){},w.banLocation=function(e){this.j&&this.j.banLocation(e)},w.setMediaElement=function(e){this.ba=e};function a2(e,t){for(var n=e.H==-1,r=b(t),a=r.next();!a.done;a=r.next()){a=a.value;var u=a.stream.segmentIndex,c=w0(e,a);if(u=u.O[0]||null){c=b(c);for(var d=c.next();!d.done;d=c.next()){d=b(d.value);var p=d.next().value;if(d.next().value==u.startTime){n&&(e.H=Math.max(e.H,p)),a.Re=p;break}}}}if(!(0>e.H))for(t=b(t),n=t.next();!n.done;n=t.next())n=n.value,ou(e,n.type)&&(r=n.stream.segmentIndex)&&(a=e.H-n.Re,0<a&&(r.O.splice(0,a),r=r.O[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),l2(e,n,r)))}function G4(e,t){if(e.fa==1/0){t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value.stream.segmentIndex.O[0]||null,n!=null&&n.h!=null&&(e.fa=Math.min(e.fa,n.h))}if(t=e.fa,t!=1/0){n=b(e.i.values());for(var r=n.next();!r.done;r=n.next())if(r=r.value,!ou(e,r.type)){var a=r.stream.segmentIndex;if(a!=null){var u=a.O[0]||null;if(u)if(u.h==null)It("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.M(),"Expect AV sync issues!");else for(l2(e,r,u.h-t-u.startTime),r=b(a),a=r.next();!a.done;a=r.next())a.value.Vf(t)}}}}function l2(e,t,n){t.mc+=n,t.Jb+=n,e=w0(e,t);for(var r=b(e),a=r.next();!a.done;a=r.next()){var u=b(a.value);a=u.next().value,u=u.next().value,e.set(a,u+n)}t.M()}function W4(e,t,n){var r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me,le,ue,de,be,Ce,ke,Oe,Ie,Fe;return z(function(vt){switch(vt.g){case 1:return r=zn,a=y0(e.Fa,t),u=fi(a.g,"EXT-X-DEFINE"),c=[],d=[],p=[],e.l=new st(null,0),e.l.sc(!0),S=function(){return[n]},T=null,E=new Map,a.type==1?(e.R=!1,q=fi(a.g,"EXT-X-DEFINE"),E=C0(e,q,e.L),T=r.ga,N="",G=new Map,k(vt,g2(e,e.B++,E,a,S,"",T,N,!0,"Media Playlist",null,G,null,!1,null,!1),7)):(K4(e,u),I=fi(a.g,"EXT-X-MEDIA"),A=fi(a.g,"EXT-X-STREAM-INF"),R=fi(a.g,"EXT-X-IMAGE-STREAM-INF"),D=fi(a.g,"EXT-X-I-FRAME-STREAM-INF"),L=fi(a.g,"EXT-X-SESSION-KEY"),F=fi(a.g,"EXT-X-SESSION-DATA"),U=fi(a.g,"EXT-X-CONTENT-STEERING"),Y4(e,F),k(vt,Q4(e,U),4));case 4:return q4(e,A),i3(e,I),k(vt,t3(e,A,L,I,S,e.s),5);case 5:return c=vt.h,d=Z4(e,I),k(vt,J4(e,R,D),6);case 6:p=vt.h,vt.u(3);break;case 7:Q=vt.h,e.i.set(n,Q),Q.stream&&(re=Bf(Q.stream),Q.stream.segmentIndex.Hb(function(Dt){Dt.$&&(Dt.$.Hc=re)})),T=Q.stream.type,c.push({id:0,language:qt(N||"und"),disabledUntilTime:0,primary:!0,audio:T=="audio"?Q.stream:null,video:T=="video"?Q.stream:null,bandwidth:Q.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new se(2,7,7001);if(a.type==1&&(jo(e)&&(S2(e,a),ae=e.o,e.A.Y(ae)),me=Array.from(e.i.values()),T0(e,me),S0(e),E0(e,a.g,T,E,S)),e.m={presentationTimeline:e.l,variants:c,textStreams:d,imageStreams:p,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.ea||!e.g.hls.disableCodecGuessing){vt.u(8);break}for(le=[],ue=b(e.m.variants),de=ue.next();!de.done;de=ue.next())be=de.value,be.audio&&be.audio.codecs===""&&le.push(be.audio.createSegmentIndex()),be.video&&be.video.codecs===""&&le.push(be.video.createSegmentIndex());return k(vt,Promise.all(le),8);case 8:if(e.h.makeTextStreamsForClosedCaptions(e.m),c.length==1){for(Ce=[],ke=c[0],Oe=b([ke.video,ke.audio]),Ie=Oe.next();!Ie.done;Ie=Oe.next())(Fe=Ie.value)&&!Fe.segmentIndex&&Ce.push(Fe.createSegmentIndex());if(0<Ce.length)return k(vt,Promise.all(Ce),0)}vt.u(0)}})}function X4(e,t){var n,r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae;return z(function(me){switch(me.g){case 1:if(n=jf(e.g.hls.mediaPlaylistFullMimeType),!t.length)return me.return(n);if(r=E2(e,t),a=r.segment,u=r.segmentIndex,c=a.M(),d=c[0],p=new Ln(d),S=p.Pa.split(".").pop(),T=I0[S])return me.return(jf(T));if(E=Ri,A=I=null,R=a.$,!R){me.u(2);break}return D=Zs(R.M(),R.Xb(),R.Ub(),e.g.retryParameters),k(me,dr(e,D,E,{type:0}),3);case 3:if(L=me.h,I=L.data,!R.aesKey){me.u(4);break}return k(me,pp(I,R.aesKey,0),5);case 5:I=me.h;case 4:(A=L.headers["content-type"])&&(A=A.split(";")[0].toLowerCase());case 2:return F=Zs(a.M(),a.Xb(),a.Ub(),e.g.retryParameters),k(me,dr(e,F,E,{type:1}),6);case 6:if(U=me.h,q=U.data,!a.aesKey){me.u(7);break}return k(me,pp(q,a.aesKey,u),8);case 8:q=me.h;case 7:if((N=U.headers["content-type"])&&(N=N.split(";")[0].toLowerCase()),G="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),Q=["audio/mp4","video/mp4","video/iso.segment"],kl(Ae(q))){var le=q,ue=Ae(le);ue=new rn().parse(ue);var de=ue.$c();ue=ue.kf();var be=[],Ce=!1,ke=!1;switch(de.audio){case"aac":case"aac-loas":be.push("mp4a.40.2"),Ce=!0;break;case"mp3":be.push("mp4a.40.34"),Ce=!0;break;case"ac3":be.push("ac-3"),Ce=!0;break;case"ec3":be.push("ec-3"),Ce=!0;break;case"opus":be.push("opus"),Ce=!0}switch(de.video){case"avc":ue.codec?be.push(ue.codec):be.push("avc1.42E01E"),ke=!0;break;case"hvc":ue.codec?be.push(ue.codec):be.push("hvc1.1.6.L93.90"),ke=!0;break;case"av1":be.push("av01.0.01M.08"),ke=!0}if(be.length){if(de=Ce&&!ke,Ce=new Map,ke){ke=new _e("video/mp2t"),ke.i(le),le=b(ke.j());for(var Oe=le.next();!Oe.done;Oe=le.next())Oe=Oe.value,Ce.set(Oe,Oe);ke.g()}ue={type:de?"audio":"video",mimeType:"video/mp2t",codecs:be.join(", "),language:null,height:ue.height,width:ue.width,channelCount:null,sampleRate:null,closedCaptions:Ce,xd:null,colorGamut:null}}else ue=null;if(re=ue)return me.return(re)}else if((G.includes(S)||Q.includes(N)||A&&Q.includes(A))&&(ae=VE(I,q)))return me.return(ae);return N?me.return(jf(N)):A?me.return(jf(A)):me.return(n)}})}function S0(e){if(jo(e)){if(e.xa==Uc){for(var t,n=t=1/0,r=b(e.i.values()),a=r.next();!a.done;a=r.next())a=a.value,a.stream.segmentIndex&&a.stream.type!="text"&&(t=Math.min(t,a.Jb),n=Math.min(n,a.mc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.A),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.pe(t)}}else e.l.Za(p2(e));if(!e.l.s)for(t=b(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.bh(n.h);e.l.Wd()}function K4(e,t){var n=new Ln(e.L).g;t=b(t);for(var r=t.next();!r.done;r=t.next()){var a=r.value;r=Ye(a,"NAME");var u=Ye(a,"VALUE");a=Ye(a,"QUERYPARAM"),r&&u&&(e.s.has(r)||e.s.set(r,u)),a&&(r=n.get(a)[0])&&!e.s.has(r)&&e.s.set(a,r)}}function C0(e,t,n){n=new Ln(n).g;var r=new Map;t=b(t);for(var a=t.next();!a.done;a=t.next()){var u=a.value,c=Ye(u,"NAME"),d=Ye(u,"VALUE");a=Ye(u,"QUERYPARAM"),u=Ye(u,"IMPORT"),c&&d&&(r.has(c)||r.set(c,d)),a&&(c=n.get(a)[0])&&!r.has(c)&&r.set(a,c),u&&(a=e.s.get(u))&&r.set(u,a)}return r}function q4(e,t){t=b(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,a=Ye(r,"AUDIO");n=Ye(r,"VIDEO");var u=Ye(r,"SUBTITLES");if(r=u2(e,r),u){var c=Ro(Ut,r);e.F.set(u,c),jt(r,c)}a&&(u=Ro("audio",r),u||(u=e.g.hls.defaultAudioCodec),e.F.set(a,u)),n&&(a=Ro("video",r),a||(a=e.g.hls.defaultVideoCodec),e.F.set(n,a))}}function Y4(e,t){t=b(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,a=Ye(r,"DATA-ID");n=Ye(r,"URI");var u=Ye(r,"LANGUAGE");r=Ye(r,"VALUE"),a=new Map().set("id",a),n&&a.set("uri",Or([e.L],n,e.s)[0]),u&&a.set("language",u),r&&a.set("value",r),n=new $e("sessiondata",a),e.h&&e.h.onEvent(n)}}function Q4(e,t){var n,r,a,u,c,d;return z(function(p){if(!e.h||!e.g)return p.return();for(r=b(t),a=r.next();!a.done;a=r.next())if(u=a.value,c=Ye(u,"PATHWAY-ID"),d=Ye(u,"SERVER-URI"),c&&d){e.j=new ya(e.h),e.j.configure(e.g),e.j.i=[e.L],e.j.setManifestType("HLS"),e.j.h=c,n=ql(e.j,d);break}return k(p,n,0)})}function Z4(e,t){var n=t2(t,"SUBTITLES");t=n.map(function(c){if(e.g.disableText)return null;try{return d2(e,[c],new Map).stream}catch(d){if(e.g.hls.ignoreTextStreamFailures)return null;throw d}}),n=b(n);for(var r=n.next();!r.done;r=n.next()){var a=Yt(r.value,"GROUP-ID");if((r=e.F.get(a))&&(a=e.G.get(a))){a=b(a);for(var u=a.next();!u.done;u=a.next())u=u.value,u.stream.codecs=r,u.stream.mimeType=k0(Ut,r)||Dc(Ut),Sa(u.stream)}}return t.filter(function(c){return c})}function Sa(e){var t=new Set([Vn(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Hb(function(n){n.mimeType&&t.add(Vn(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function J4(e,t,n){var r,a;return z(function(u){return u.g==1?(r=t.map(function(c){var d,p;return z(function(S){if(S.g==1)return e.g.disableThumbnails?S.return(null):(Z(S,2),k(S,r3(e,c),4));if(S.g!=2)return d=S.h,S.return(d.stream);if(p=ne(S),e.g.hls.ignoreImageStreamFailures)return S.return(null);throw p})}).concat(n.map(function(c){if(e.g.disableThumbnails)return null;try{var d=Yt(c,"URI"),p=Ye(c,"CODECS")||"";if(e.i.has(d))var S=e.i.get(d);else{var T=Ye(c,"LANGUAGE"),E=Ye(c,"NAME"),I=Ye(c,"CHARACTERISTICS"),A=Lc(e,e.B++,[d],p,"image",T,!1,E,null,null,I,!1,null,!1),R=Ye(c,"RESOLUTION"),D=b(R?R.split("x"):[null,null]),L=D.next().value,F=D.next().value;A.stream.width=Number(L)||void 0,A.stream.height=Number(F)||void 0;var U=Ye(c,"BANDWIDTH");U&&(A.stream.bandwidth=Number(U)),e.i.set(d,A),S=A}return c=S,c.stream.codecs!=="mjpg"?null:c.stream}catch(q){if(e.g.hls.ignoreImageStreamFailures)return null;throw q}})),k(u,Promise.all(r),2)):(a=u.h,u.return(a.filter(function(c){return c})))})}function e3(e,t,n){t=t.filter(function(d){var p=Ye(d,"URI")||"";return Ye(d,"TYPE")!="SUBTITLES"&&p!=""});var r={};t=b(t);for(var a=t.next();!a.done;a=t.next()){a=a.value;var u=Zx(a,!e.j);r[u]?r[u].push(a):r[u]=[a]}for(var c in r)d2(e,r[c],n)}function t3(e,t,n,r,a,u){var c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me,le,ue,de,be,Ce,ke,Oe,Ie,Fe,vt,Dt,Sn,$t,kn,Un;return z(function(Cn){switch(Cn.g){case 1:if(c=[],d=new Set,!(0<n.length)){Cn.u(2);break}p=b(n),S=p.next();case 3:if(S.done){Cn.u(2);break}if(T=S.value,E=Yt(T,"METHOD"),I=Ye(T,"KEYFORMAT")||"identity",A=null,E=="NONE"){Cn.u(4);break}if(Oc(E)){R=Or(a(),Yt(T,"URI"),u),D=R.sort().join(""),e.K.has(D)||(L=Qn(R,e.g.retryParameters),F=dr(e,L,6),e.K.set(D,F)),Cn.u(4);break}if(I!="identity"){A=(U=_2[I])?U(T,""):null,Cn.u(6);break}return k(Cn,I2(e,T,"",a,null,u),9);case 9:A=Cn.h;case 6:if(A){if(A.keyIds)for(q=b(A.keyIds),N=q.next();!N.done;N=q.next())G=N.value,d.add(G);c.push(A)}case 4:S=p.next(),Cn.u(3);break;case 2:for(Q={},re=b(t),ae=re.next();!ae.done;ae=re.next())me=ae.value,le=Zx(me,!e.j),Q[le]?Q[le].push(me):Q[le]=[me];ue=[];for(de in Q)be=Q[de],Ce=be[0],ke=Ye(Ce,"FRAME-RATE"),Oe=Number(Ye(Ce,"AVERAGE-BANDWIDTH"))||Number(Yt(Ce,"BANDWIDTH")),Ie=Ye(Ce,"RESOLUTION"),Fe=b(Ie?Ie.split("x"):[null,null]),vt=Fe.next().value,Dt=Fe.next().value,Sn=Ye(Ce,"VIDEO-RANGE"),($t=Ye(Ce,"REQ-VIDEO-LAYOUT"))&&$t.includes(",")&&(kn=$t.split(",").filter(function(Kt){return Kt=="CH-STEREO"||Kt=="CH-MONO"}),$t=kn[0]),$t=$t||"CH-MONO",Un=n3(e,be,r),ue.push.apply(ue,_(o3(e,Un.audio,Un.video,Oe,vt,Dt,ke,Sn,$t,c,d)));return Cn.return(ue.filter(function(Kt){return Kt!=null}))}})}function n3(e,t,n){for(var r={audio:[],video:[]},a=new Map,u=[],c=!1,d=!1,p=b(t),S=p.next();!S.done;S=p.next()){var T=S.value;S=Ye(T,"AUDIO");var E=Ye(T,"VIDEO"),I=S||E;I&&(u.includes(I)||u.push(I),(T=Ye(T,"PATHWAY-ID"))&&a.set(I,T),S?c=!0:E&&(d=!0))}u.length&&n.length&&(p=n.filter(function(D){return u.includes(Yt(D,"GROUP-ID"))}),e3(e,p,a)),p=(a=u.sort().join(","))&&e.G.has(a)?e.G.get(a):[],c?r.audio.push.apply(r.audio,_(p)):d&&r.video.push.apply(r.video,_(p)),S=!1;var A=t.map(function(D){return Yt(D,"URI")});if(d=r.audio.find(function(D){return D&&D.M().find(function(L){return A.includes(L)})}),c=u2(e,t[0]),E=Ro("video",c),(I=Ro("audio",c))&&!E?(d="audio",S=0<r.audio.length):!r.audio.length&&!r.video.length&&I&&E?(d="video",c=[[E,I].join()]):r.audio.length&&d?(d="audio",S=!0):d=r.video.length&&!r.audio.length?"audio":"video",!S){var R=T=I=E=S=null;!p.length&&(n=n.find(function(D){var L=Ye(D,"URI")||"",F=Ye(D,"TYPE");return D=Yt(D,"GROUP-ID"),F!="SUBTITLES"&&L==""&&u.includes(D)}))&&(S=Ye(n,"LANGUAGE"),E=Ye(n,"NAME"),I=f2(n),h2(n),T=Ye(n,"CHARACTERISTICS"),R=c2(n)),e=s3(e,t,c,d,S,E,I,T,R),a&&(e.stream.groupId=a),r[e.stream.type]=[e]}return r}function u2(e,t){var n=Ye(t,"CODECS")||"";return t=Ye(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,_(t))),dp(e)}function f2(e){return(e=Ye(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function c2(e){return(e=Ye(e,"SAMPLE-RATE"))?parseInt(e,10):null}function h2(e){return(e=Ye(e,"CHANNELS"))?e.includes("/JOC"):!1}function o3(e,t,n,r,a,u,c,d,p,S,T){for(var E=b(n),I=E.next();!I.done;I=E.next())k2(I.value.stream,a,u,c,d,p,null);for(a=e.g.disableAudio,(!t.length||a)&&(t=[null]),a=e.g.disableVideo,(!n.length||a)&&(n=[null]),a=[],t=b(t),u=t.next();!u.done;u=t.next())for(u=u.value,c=b(n),d=c.next();!d.done;d=c.next()){var A=d.value;(d=u?u.stream:null)&&(d.drmInfos=S,d.keyIds=T),(p=A?A.stream:null)&&(p.drmInfos=S,p.keyIds=T),p&&!d&&(p.bandwidth=r),!p&&d&&(d.bandwidth=r),E=u?u.stream.drmInfos:null,I=A?A.stream.drmInfos:null,A=A?A.M().sort().join(","):"";var R=u?u.M().sort().join(","):"";A=A+" - "+R,d&&p&&!Ig(E,I)||e.ub.has(A)||(d={id:e.B++,language:d?d.language:"und",disabledUntilTime:0,primary:!!d&&d.primary||!!p&&p.primary,audio:d,video:p,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},a.push(d),e.ub.add(A))}return a}function i3(e,t){t=t2(t,"CLOSED-CAPTIONS"),e.R=t.length==0,t=b(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,a=Ye(r,"LANGUAGE");n=qt(a||"und"),a||(a=Ye(r,"NAME"))&&(n=a),a=Yt(r,"GROUP-ID"),r=Yt(r,"INSTREAM-ID").replace("SERVICE","svc"),e.C.get(a)||e.C.set(a,new Map),e.C.get(a).set(r,n)}}function d2(e,t,n){for(var r=[],a=[],u=new Map,c=b(t),d=c.next();!d.done;d=c.next()){var p=d.value;d=Yt(p,"URI"),p=Yt(p,"GROUP-ID"),r.push(d),a.push(p),u.set(p,d)}if(c=a.sort().join(","),d=t[0],t="",p=Yt(d,"TYPE").toLowerCase(),p=="subtitles"&&(p=Ut),p==Ut)t=Ye(d,"CODECS")||"";else{a=b(a);for(var S=a.next();!S.done;S=a.next())if(S=S.value,e.F.has(S)){t=e.F.get(S);break}}if(a=r.sort().join(","),e.i.has(a))return e.i.get(a);if(S=e.B++,e.j){u=b(u);for(var T=u.next();!T.done;T=u.next()){var E=b(T.value);T=E.next().value,E=E.next().value,(T=n.get(T))&&va(e.j,S,T,E)}}n=Ye(d,"LANGUAGE"),u=Ye(d,"NAME"),T=Ye(d,"DEFAULT")=="YES",E=p=="audio"?f2(d):null;var I=p=="audio"?h2(d):!1,A=Ye(d,"CHARACTERISTICS"),R=Ye(d,"FORCED")=="YES";return d=p=="audio"?c2(d):null,r=Lc(e,S,r,t,p,n,T,u,E,null,A,R,d,I),r.stream&&(r.stream.groupId=c),e.G.has(c)?e.G.get(c).push(r):e.G.set(c,[r]),e.i.set(a,r),r}function r3(e,t){var n,r,a,u,c,d,p,S,T,E;return z(function(I){return I.g==1?(n=Yt(t,"URI"),r=Ye(t,"CODECS","jpeg")||"",e.i.has(n)?I.return(e.i.get(n)):(a=Ye(t,"LANGUAGE"),u=Ye(t,"NAME"),c=Ye(t,"CHARACTERISTICS"),d=Lc(e,e.B++,[n],r,"image",a,!1,u,null,null,c,!1,null,!1),(p=Ye(t,"RESOLUTION"))?k(I,d.stream.createSegmentIndex(),3):I.u(2))):(I.g!=2&&(S=d.stream.segmentIndex.get(0),T=S.tilesLayout)&&(d.stream.width=Number(p.split("x")[0])*Number(T.split("x")[0]),d.stream.height=Number(p.split("x")[1])*Number(T.split("x")[1])),(E=Ye(t,"BANDWIDTH"))&&(d.stream.bandwidth=Number(E)),e.i.set(n,d),I.return(d))})}function s3(e,t,n,r,a,u,c,d,p){for(var S=e.B++,T=[],E=b(t),I=E.next();!I.done;I=E.next()){var A=I.value;I=Yt(A,"URI"),A=Ye(A,"PATHWAY-ID"),e.j&&A&&va(e.j,S,A,I),T.push(I)}if(E=T.sort().join(","),e.i.has(E))return e.i.get(E);e:{if(t=Ye(t[0],"CLOSED-CAPTIONS"),r=="video"){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if(t!="NONE"){t=e.C.get(t);break e}e.R=!1}else if(!t&&e.C.size)for(t=b(e.C.keys()).next();!t.done;){t=e.C.get(t.value);break e}}t=null}return n=Ls(r,n),r=Lc(e,S,T,n,r,a,!1,u,c,t,d,!1,p,!1),e.i.set(E,r),r}function Lc(e,t,n,r,a,u,c,d,p,S,T,E,I,A){function R(G){var Q,re,ae,me,le,ue,de,be,Ce,ke,Oe,Ie,Fe,vt,Dt,Sn,$t,kn,Un,Cn,Kt,Mn;return z(function(Wn){switch(Wn.g){case 1:return Q=zn,re=U.M(),Z(Wn,2),k(Wn,A0(e,U.M(),!0),4);case 4:ae=Wn.h,K(Wn,3);break;case 2:if(me=ne(Wn),L.closeSegmentIndex(),e.h.disableStream(L))return Wn.return();throw me;case 3:if(G.aborted)return Wn.return();if(le=ae.uri,le==ae.originalUri||re.includes(le)||F.push(le),ue=y0(e.Fa,ae.data),ue.type!=1)throw new se(2,4,4017);return de=fi(ue.g,"EXT-X-DEFINE"),be=C0(e,de,le),Ce=!1,(!e.ea&&e.g.hls.disableCodecGuessing||e.R&&a==Q.ga&&!e.g.hls.disableClosedCaptionsDetection)&&0<ue.segments.length&&(e.R=!1,Ce=!0),ke=!e.ea&&e.g.hls.disableCodecGuessing,Oe=jo(e),k(Wn,g2(e,0,be,ue,D,r,a,u,c,d,p,S,T,E,I,A,void 0,Ce,ke),5);case 5:if(Ie=Wn.h,G.aborted)return Wn.return();if(Fe=Ie.stream,jo(e)&&!Oe&&S2(e,ue),U.mc=Ie.mc,U.Jb=Ie.Jb,U.Gd=Ie.Gd,U.Fd=Ie.Fd,U.ed=Ie.ed,U.Yd=Ie.Yd,U.ob=Ie.ob,U.pb=Ie.pb,U.vf=!0,L.segmentIndex=Fe.segmentIndex,L.encrypted=Fe.encrypted,L.drmInfos=Fe.drmInfos,L.keyIds=Fe.keyIds,L.mimeType=Fe.mimeType,L.bandwidth=L.bandwidth||Fe.bandwidth,L.codecs=L.codecs||Fe.codecs,L.closedCaptions=L.closedCaptions||Fe.closedCaptions,L.width=L.width||Fe.width,L.height=L.height||Fe.height,L.hdr=L.hdr||Fe.hdr,L.colorGamut=L.colorGamut||Fe.colorGamut,L.language=="und"&&Fe.language!="und"&&(L.language=Fe.language),L.language=L.language||Fe.language,L.channelsCount=L.channelsCount||Fe.channelsCount,L.audioSamplingRate=L.audioSamplingRate||Fe.audioSamplingRate,Sa(L),L.drmInfos.length&&e.h.newDrmInfo(L),vt=!1,(!S&&L.closedCaptions||S&&L.closedCaptions&&S.size!=L.closedCaptions.size)&&(vt=!0),e.m&&vt&&e.h.makeTextStreamsForClosedCaptions(e.m),a==Q.ga||a==Q.X)for(Dt=b(e.i.values()),Sn=Dt.next();!Sn.done;Sn=Dt.next())$t=Sn.value,$t.vf||$t.type!=a||($t.stream.mimeType=Fe.mimeType,Sa($t.stream));a==Q.ua&&(kn=Fe.segmentIndex.get(0))&&kn.$&&(L.mimeType="application/mp4",Sa(L)),Un=Bf(L),L.segmentIndex.Hb(function(Xn){Xn.$&&(Xn.$.Hc=Un)}),a3(e)&&(e.Gb?T0(e,[U]):(e.Gb=!0,Cn=Array.from(e.i.values()),Kt=Cn.filter(function(Xn){return Xn.stream.segmentIndex}),T0(e,Kt),S0(e),Mn=e.o,0<Mn&&e.A.Y(Mn))),E0(e,ue.g,L.type,be,D),V(Wn)}})}function D(){return e.j&&1<n.length?Yl(e.j,t):F.concat(n2([e.L],n,e.s))}var L=v2(e,r,a,u,c,d,p,S,T,E,I,A),F=[],U={stream:L,type:a,Tg:F,M:D,mc:0,Jb:0,Yd:new Map,Gd:!1,Fd:!1,ed:!1,Re:-1,ob:-1,pb:-1,vf:!1},q=null,N=new AbortController;return L.createSegmentIndex=function(){return q||(N=new AbortController,q=new Promise(function(G){G(R(N.signal))}))},L.closeSegmentIndex=function(){q&&!L.segmentIndex&&N.abort(),L.segmentIndex&&(L.segmentIndex.release(),L.segmentIndex=null),q=null},U}function p2(e){var t=1/0;e=b(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.Jb));return t}function m2(e,t){var n=[];t=b(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.Hb(function(a){n.push(a)});e.l.sd(n)}function T0(e,t){if(!jo(e))for(var n=p2(e),r=b(t),a=r.next();!a.done;a=r.next())a.value.stream.segmentIndex.Bc(0,n);m2(e,t.map(function(u){return u.stream})),e.g.hls.ignoreManifestProgramDateTime?a2(e,t):(G4(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&a2(e,t))}function ou(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function a3(e){if(!e.m)return!1;var t=[],n=[];e=b(e.m.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(a){return a.segmentIndex})||0<n.length&&!n.some(function(a){return a.segmentIndex}))}function g2(e,t,n,r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U){F=F===void 0?!0:F,U=U===void 0?!0:U;var q,N,G,Q,re,ae,me,le,ue,de,be,Ce,ke,Oe,Ie,Fe,vt,Dt,Sn,$t,kn,Un,Cn,Kt,Mn,Wn;return z(function(Xn){switch(Xn.g){case 1:var zo=co(r.g,"EXT-X-PLAYLIST-TYPE"),Vo=co(r.g,"EXT-X-ENDLIST");if(Vo=zo&&zo.value=="VOD"||Vo,zo=zo&&zo.value=="EVENT"&&!Vo,zo=!Vo&&!zo,Vo?Pc(e,Nc):zo?Pc(e,Uc):Pc(e,R2),jo(e)&&b0(e,r),q=jo(e)?e.N.get(c):new Map,N=b2(e,r,q,n,a,c),G=N.segments,Q=N.bandwidth,le=me=ae=re=null,!(0<G.length&&F)){Xn.u(2);break}return k(Xn,X4(e,G),3);case 3:ue=Xn.h,c=ue.type,d=ue.language,T=ue.channelCount,R=ue.sampleRate,e.g.disableText||(E=ue.closedCaptions),ae=ue.height,re=ue.width,me=ue.xd,le=ue.colorGamut,U&&(L=ue.mimeType,u=ue.codecs);case 2:if(L){Xn.u(4);break}return k(Xn,f3(e,c,u,G),5);case 5:L=Xn.h;case 4:return k(Xn,x2(e,r,L,a,n),6);case 6:if(de=Xn.h,be=de.drmInfos,Ce=de.keyIds,ke=de.encrypted,Oe=de.wh,ke&&!be.length&&!Oe)throw new se(2,4,4026);return Ie=v2(e,u,c,d,p,S,T,E,I,A,R,D),Ie.encrypted=ke,Ie.drmInfos=be,Ie.keyIds=Ce,Ie.mimeType=L,Q&&(Ie.bandwidth=Q),Sa(Ie),c=="video"&&(re||ae||me||le)&&k2(Ie,re,ae,null,me,null,le),jo(e)&&b0(e,r),Fe=G[0].startTime,vt=G[G.length-1],Dt=vt.endTime,Sn=new Ft(G),Ie.segmentIndex=Sn,kn=($t=co(r.g,"EXT-X-SERVER-CONTROL"))?nu($t,"CAN-SKIP-UNTIL")!=null:!1,Un=$t?nu($t,"CAN-BLOCK-RELOAD")!=null:!1,Cn=wa(r.g,"EXT-X-MEDIA-SEQUENCE",0),Kt=y2(Cn,G),Mn=Kt.ob,Wn=Kt.pb,Xn.return({stream:Ie,type:c,Tg:[],M:a,mc:Fe,Jb:Dt,Gd:kn,Fd:Un,ed:!1,Re:-1,ob:Mn,pb:Wn,Yd:q,vf:!1})}})}function y2(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{ob:e,pb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].preload||(e++,n=0),{ob:e,pb:n}):(e++,t.m&&(n=0),{ob:e,pb:n})}function v2(e,t,n,r,a,u,c,d,p,S,T,E){var I=k0(n,t)||Dc(n),A=[];if(p){p=b(p.split(","));for(var R=p.next();!R.done;R=p.next())A.push(R.value)}return p=void 0,R=null,n==Ut?p=A.includes("public.accessibility.transcribes-spoken-dialog")&&A.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":A.includes("public.accessibility.describes-video")&&(R="visually impaired"),A.length||p!=="subtitle"||A.push("subtitle"),e={id:e.B++,originalId:u,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:I,codecs:t,kind:n==Ut?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:qt(r||"und"),originalLanguage:r,label:u,type:n,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:A,forced:S,channelsCount:c,audioSamplingRate:T,spatialAudio:E,closedCaptions:d,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:R,external:!1,fastSwitching:!1,fullMimeTypes:new Set},Sa(e),e}function x2(e,t,n,r,a){var u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me,le,ue,de,be,Ce,ke,Oe;return z(function(Ie){switch(Ie.g){case 1:if(u=new Map,t.segments){for(c=b(t.segments),d=c.next();!d.done;d=c.next())if(p=d.value,S=fi(p.g,"EXT-X-KEY"),T=null,S.length)for(T=C2(e,t,p.g,r,a),E=b(S),I=E.next();!I.done;I=E.next())A=I.value,u.set(A,T)}D=R=!1,L=[],F=new Set,U=b(u),q=U.next();case 2:if(q.done){Ie.u(4);break}if(N=q.value,G=b(N),Q=G.next().value,re=G.next().value,ae=Q,me=re,le=Yt(ae,"METHOD"),le=="NONE"){Ie.u(3);break}if(R=!0,ue=Ye(ae,"KEYFORMAT")||"identity",de=null,Oc(le)){D=!0,Ie.u(3);break}if(ue!="identity"){de=(be=_2[ue])?be(ae,n):null,Ie.u(6);break}return k(Ie,I2(e,ae,n,r,me,a),8);case 8:de=Ie.h;case 6:if(de){if(de.keyIds)for(Ce=b(de.keyIds),ke=Ce.next();!ke.done;ke=Ce.next())Oe=ke.value,F.add(Oe);L.push(de)}case 3:q=U.next(),Ie.u(2);break;case 4:return Ie.return({drmInfos:L,keyIds:F,encrypted:R,wh:D})}})}function w2(e,t,n,r,a){if(!h.crypto||!h.crypto.subtle)throw je("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new se(2,4,4042);var u=0,c=Ye(t,"IV","");if(c){var d=Yr(c.substr(2));if(d.byteLength!=16)throw new se(2,4,4048)}else u=wa(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+u,!e.oa.has(n)){var p={bitsKey:128,blockCipherMode:"CBC",iv:d,firstMediaSequenceNumber:u};switch(Yt(t,"METHOD")){case"AES-256":p.bitsKey=256;break;case"AES-256-CTR":p.bitsKey=256,p.blockCipherMode="CTR"}p.fetchKey=function(){var S,T,E,I,A,R;return z(function(D){if(D.g==1)return S=Or(r(),Yt(t,"URI"),a),T=S.sort().join(""),e.K.has(T)||(E=Qn(S,e.g.retryParameters),I=dr(e,E,6),e.K.set(T,I)),k(D,e.K.get(T),2);if(D.g!=3){if(A=D.h,!A.data||A.data.byteLength!=p.bitsKey/8)throw new se(2,4,4049);return R={name:p.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:p.bitsKey},k(D,h.crypto.subtle.importKey("raw",A.data,R,!0,["decrypt"]),3)}p.cryptoKey=D.h,p.fetchKey=void 0,V(D)})},e.oa.set(n,p)}return e.oa.get(n)}function b0(e,t){var n=1/0,r=t.segments;if(r.length)for(var a=r.length-1;0<=a;){var u=co(r[a].g,"EXTINF");if(u){n=Number(u.value.split(",")[0]);break}a--}if(r=co(t.g,"EXT-X-TARGETDURATION"),!r)throw new se(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(a=co(t.g,"EXT-X-PART-INF"))&&(e.U=Number(Yt(a,"PART-TARGET"))),t=co(t.g,"EXT-X-SERVER-CONTROL"),e.I&&e.U?(e.o=e.Fb?5*e.U<=n?Math.min(e.U,e.o):Math.min(n,e.o):Math.min(e.U,e.o),e.Da=t?Number(Yt(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?nu(t,"HOLD-BACK"):null,e.za=n?Number(n.value):0),e.ab=Math.max(r,e.ab)}function S2(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.Da)t=e.Da;else if(e.za)t=e.za;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.ab*n}e.l.dh(0),e.l.Of(t),e.l.sc(!1)}function C2(e,t,n,r,a){var u=co(n,"EXT-X-MAP");if(!u)return null;var c=Yt(u,"URI"),d=Or(r(),c,a);if(c=[d.toString(),Ye(u,"BYTERANGE","")].join("-"),!e.qa.has(c)){var p=void 0,S=null;n=b(n);for(var T=n.next();!T.done;T=n.next())T=T.value,T.name=="EXT-X-KEY"?Oc(Yt(T,"METHOD"))&&T.id<u.id&&(p=w2(e,T,t,r,a)):T.name=="EXT-X-BYTERANGE"&&T.id<u.id&&(S=T);t=l3(d,u,S,p),e.qa.set(c,t)}return e.qa.get(c)}function l3(e,t,n,r){var a=0,u=null;return t=Ye(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(a=t.split("@"),u=Number(a[0]),a=Number(a[1]),u=a+u-1,r&&(n=u+1-a,n%16&&(u+=16-n%16))),new Do(function(){return e},a,u,null,null,null,r)}function u3(e,t,n,r,a,u,c,d,p){function S(Fe){Fe=new Ln(Fe).Pa.split(".").pop();var vt=M0[c][Fe];return vt||(vt=I0[Fe]),vt}var T=r.g,E=co(T,"EXTINF"),I=0,A=0,R=null;r.zb.length&&(e.m.isLowLatency=!0);var D=null;if(!e.g.hls.ignoreManifestProgramDateTime){var L=co(T,"EXT-X-PROGRAM-DATE-TIME");L&&L.value&&(D=Ir(L.value))}var F=Mr;if(co(T,"EXT-X-GAP")&&(e.m.gapCount++,F=2),!E){if(r.zb.length==0)throw new se(2,4,4024,"EXTINF");if(!e.I)return null}var U=[];L=!1;var q=null,N=!1,G=!1;if(e.I&&r.zb.length){I=t&&h.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var Q=D,re={},ae=0;ae<r.zb.length;re={xe:void 0,ge:void 0},ae++){var me=r.zb[ae],le=ae==0?n:U[U.length-1],ue=ae==0?a:le.endTime,de=Number(Ye(me,"DURATION"))||e.U;if(de){var be=ue+de,Ce=0,ke=null;if(me.name=="EXT-X-PRELOAD-HINT"?(Ce=(Ce=Ye(me,"BYTERANGE-START"))?Number(Ce):0,(le=Ye(me,"BYTERANGE-LENGTH"))?ke=Ce+Number(le)-1:Ce&&(ke=Number.MAX_SAFE_INTEGER)):(Ce=Ye(me,"BYTERANGE"),ke=b(T2(le,Ce)),Ce=ke.next().value,ke=ke.next().value),re.ge=Ye(me,"URI"),re.ge){le=Mr,Ye(me,"GAP")=="YES"&&(e.m.gapCount++,le=2,N=!0),re.xe=null;var Oe=function(Fe){return function(){return Fe.xe==null&&(Fe.xe=Or(d(),Fe.ge,u)),Fe.xe}}(re);I&&0<=Ce&&ke!=null&&(q=Oe,L=!0),ue=new ft(ue,be,Oe,Ce,ke,t,0,0,1/0,[],"",null,Q,le,p),me.name=="EXT-X-PRELOAD-HINT"&&(ue.wf(),G=!0),Ye(me,"INDEPENDENT")!="YES"&&0<ae&&ue.Xd(),(re=S(re.ge))&&(ue.mimeType=re,M2.has(re)&&(ue.$=null)),U.push(ue),Q&&(Q+=de)}}}}if(E){if(E=Number(E.value.split(",")[0]),E==0)return null;I=a+E}else if(U.length)I=U[U.length-1].endTime;else return null;L&&(N||U[0].Ha!=0?(L=!1,q=null):U=[]),(E=co(T,"EXT-X-BYTERANGE"))?(R=b(T2(n,E.value)),A=R.next().value,R=R.next().value):U.length&&(A=U[0].Ha,R=U[U.length-1].sa),n="",E=null,c=="image"&&(n="1x1",T=co(T,"EXT-X-TILES"))&&(n=Yt(T,"LAYOUT"),(T=Ye(T,"DURATION"))&&(E=Number(T)));var Ie=null;return t=new ft(a,I,function(){return q?q():(Ie==null&&(Ie=Or(d(),r.h,u)),Ie||[])},A,R,t,0,0,1/0,U,n,E,D,F,p,0<U.length&&!!r.h),(a=S(r.h))&&(t.mimeType=a,M2.has(a)&&(t.$=null)),L&&(e.Fb=!0,t.Ig(),G&&t.wf()),t}function T2(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.sa+1,r=n+t-1),[n,r]}function E0(e,t,n,r,a){if(n=="video"||n=="audio"){var u=e.l.m;if(u&&!ou(e,n))for(t=fi(t,"EXT-X-DATERANGE"),t=t.sort(function(D,L){return D=Yt(D,"START-DATE"),L=Yt(L,"START-DATE"),D<L?-1:D>L?1:0}),n=0;n<t.length;n++){var c=t[n],d=Yt(c,"ID");if(!e.Ea.has(d)){var p=Yt(c,"START-DATE"),S=Ir(p);if(!isNaN(S)){p=Math.max(0,S-u);var T=null,E=Ye(c,"END-DATE");if(E&&(E=Ir(E),!isNaN(E)&&(T=E-u,0>T))||T==null&&(E=Ye(c,"DURATION")||Ye(c,"PLANNED-DURATION"))&&(E=parseFloat(E),isNaN(E)||(T=p+E),0>S-u+E))continue;E=Ye(c,"CLASS")||"com.apple.quicktime.HLS";var I=Ye(c,"END-ON-NEXT")=="YES";if(T==null&&I){for(I=n+1;I<t.length;I++){var A=Ye(t[I],"CLASS")||"com.apple.quicktime.HLS";if(E==A&&(A=Yt(t[I],"START-DATE"),A=Ir(A),!isNaN(A)&&A&&A>S)){T=Math.max(0,A-u);break}}if(T==null)continue}for(S="ID CLASS START-DATE END-DATE DURATION END-ON-NEXT".split(" "),I=[],c=b(c.attributes),A=c.next();!A.done;A=c.next())if(A=A.value,!S.includes(A.name)){var R=o2(A.value,r);(A.name=="X-ASSET-URI"||A.name=="X-ASSET-LIST")&&(R=Or(a(),A.value,r)[0]),I.push({key:A.name,description:"",data:R,mimeType:null,pictureType:null})}I.length&&e.h.onMetadata(E,p,T,I),e.Ea.add(d)}}}}}function b2(e,t,n,r,a,u){var c=t.segments,d=void 0,p=wa(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),S=wa(t.g,"EXT-X-MEDIA-SEQUENCE",0),T=co(t.g,"EXT-X-SKIP"),E=T?Number(Ye(T,"SKIPPED-SEGMENTS")):0,I=S+E,A=0;jo(e)&&n.has(I)&&(A=n.get(I)),A===0&&e.xa==Uc&&0<n.size&&!n.has(I)&&(A=e.l.mb());var R=[],D=null;T=[];for(var L=0;L<c.length;L++){var F=c[L],U=L==0?A:D.endTime;I=S+E+L,co(F.g,"EXT-X-DISCONTINUITY")&&p++;for(var q=b(F.g),N=q.next();!N.done;N=q.next())N=N.value,N.name=="EXT-X-KEY"&&(Oc(Yt(N,"METHOD"))?d=w2(e,N,t,a,r):d=void 0);n.set(I,U),q=C2(e,t,F.g,a,r),!e.I&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.I=e.h.isLowLatencyMode()),(U=u3(e,q,D,F,U,r,u,a,d))&&((D=wa(F.g,"EXT-X-BITRATE"))?T.push({bitrate:D,duration:U.endTime-U.startTime}):T.length&&(D=T.pop(),D.duration+=U.endTime-U.startTime,T.push(D)),D=U,U.i=p,ou(e,u)&&e.H!=null&&I<e.H||R.push(U))}if(t=void 0,T.length&&(t=T.reduce(function(G,Q){return G+Q.duration},0),t=Math.round(T.reduce(function(G,Q){return G+Q.bitrate*Q.duration},0)/t*1e3)),T=R.some(function(G){return G.h!=null})){for(n={},r=0;r<R.length;n={Kd:void 0,Jd:void 0,Bd:void 0,pc:void 0,zd:void 0},r++)if(n.pc=R[r],n.pc.h==null)for(n.Jd=0,n.Kd=r,a=function(G){return function(){var Q=R[G.Kd];if(Q){if(Q.h!=null)return Q.h+G.Jd;G.Jd-=Q.endTime-Q.startTime,G.Kd+=1}return null}}(n),n.zd=0,n.Bd=r,c=function(G){return function(){var Q=R[G.Bd];if(Q){if(Q!=G.pc&&(G.zd+=Q.endTime-Q.startTime),Q.h!=null)return Q.h+G.zd;--G.Bd}return null}}(n);n.pc.h==null;)n.pc.h=c(),n.pc.h==null&&(n.pc.h=a())}if(T)for(n=b(R),r=n.next();!r.done;r=n.next())for(a=r.value,r=a.h,a=b(a.g),c=a.next();!c.done;c=a.next())c=c.value,c.h=r,r+=c.endTime-c.startTime;if(n=e.fa,T&&n!=1/0&&!ou(e,u))for(e=b(R),u=e.next();!u.done;u=e.next())u.value.Vf(n);return{segments:R,bandwidth:t}}function k0(e,t){if(e==Ut){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function Dc(e){return e==Ut?"text/vtt":M0[e].mp4}function E2(e,t){e=jo(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.Yb()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function f3(e,t,n,r){var a,u,c,d,p,S,T,E,I,A,R,D,L,F;return z(function(U){switch(U.g){case 1:return a=Ri,u=E2(e,r),c=u.segment,c.status==2?U.return(Dc(t)):(d=c.M(),p=new Ln(d[0]),S=p.Pa.split(".").pop(),T=M0[t],(E=T[S])||(E=I0[S])||(E=k0(t,n))?U.return(E):(A=1,R=Qn(d,e.g.retryParameters),Z(U,2),R.method="HEAD",k(U,dr(e,R,a,{type:A}),4)));case 4:D=U.h,I=D.headers["content-type"],K(U,3);break;case 2:if(L=ne(U),!L||L.code!=1002&&L.code!=1001){U.u(3);break}return R.method="GET",k(U,dr(e,R,a,{type:A}),6);case 6:F=U.h,I=F.headers["content-type"];case 3:return I?U.return(I.toLowerCase().split(";")[0]):U.return(Dc(t))}})}function k2(e,t,n,r,a,u,c){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=a||void 0,e.videoLayout=u||void 0,e.colorGamut=c||void 0)}function A0(e,t,n){return dr(e,Qn(t,e.g.retryParameters),0,{type:n?2:3})}function A2(e){var t,n,r,a,u,c;return z(function(d){switch(d.g){case 1:return e.h?(Z(d,2),t=Date.now(),k(d,e.update(),4)):d.return();case 4:n=Date.now(),jo(e)&&(r=(n-t)/1e3,e.Db.sample(1,r),a=e.o,u=Math.max(0,a-it(e.Db)),e.A.Y(u)),K(d,3);break;case 2:if(c=ne(d),!e.h)return d.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(c),d.return();c.severity=1,e.h.onError(c),e.A.Y(.1);case 3:if(!e.h)return d.return();e.h.onManifestUpdated(),V(d)}})}function jo(e){return e.xa!=Nc}function Pc(e,t){e.xa=t,e.l&&e.l.sc(!jo(e)),jo(e)||e.A.stop()}function dr(e,t,n,r){if(!e.da)throw new se(2,7,7001);return t=e.h.networkingEngine.request(n,t,r),ns(e.da,t),t.promise}function Oc(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function I2(e,t,n,r,a,u){var c,d,p,S,T,E,I,A,R,D,L,F,U,q,N;return z(function(G){switch(G.g){case 1:if(n=="video/mp2t")throw new se(2,4,4040);if(lf())throw new se(2,4,4041);if(c=Yt(t,"METHOD"),d=["SAMPLE-AES","SAMPLE-AES-CTR"],!d.includes(c))return G.return(null);if(p=Or(r(),Yt(t,"URI"),u),p[0].startsWith("data:text/plain;base64,")){S=Yi(ri(p[0].split("data:text/plain;base64,").pop())),G.u(2);break}return T=p.sort().join(""),e.pa.has(T)||(E=Qn(p,e.g.retryParameters),I=dr(e,E,6),e.pa.set(T,I)),k(G,e.pa.get(T),3);case 3:A=G.h,S=Yi(A.data);case 2:if(R="00000000000000000000000000000000",!a){G.u(4);break}if(e.ya.has(a)){D=e.ya.get(a),G.u(5);break}return L=Zs(a.M(),a.Xb(),a.Ub(),e.g.retryParameters),F=Ri,k(G,dr(e,L,F,{type:0}),6);case 6:U=G.h,D=GE(U.data),e.ya.set(a,D);case 5:D&&(R=D);case 4:return q=new Map,q.set(R,S),N="cenc",c=="SAMPLE-AES"&&(N="cbcs"),G.return(Pg(q,N))}})}we("shaka.hls.HlsParser",Rc);var I0={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},M0={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},M2=new Set(["video/mp2t"].concat(_(kr))),_2={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new se(2,4,4040);if(lf())throw new se(2,4,4041);if(t=Yt(e,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),Qr("com.apple.fps",n,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],Yt(e,"URI"))},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Yt(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=Yt(e,"URI"),t=x0(t.split("?")[0]),t=Ae(t.data),n=Qr("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=Ye(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=Yt(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=Yt(e,"URI"),e=x0(e.split("?")[0]),e=Ae(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=wf(e,t,new Set,0),Qr("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},Nc="VOD",R2="EVENT",Uc="LIVE",c3={sh:Nc,qj:R2,yj:Uc};Ci["application/x-mpegurl"]=function(){return new Rc},Ci["application/vnd.apple.mpegurl"]=function(){return new Rc};function h3(e){var t=0,n=wt(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var a=n.getUint16(e,!0);if(e+=2,a&1||a+e>n.byteLength){n=[];break e}var u=Ae(n,e,a);t.push({type:r,value:u}),e+=a}n=t}return n}function Bc(e){if(e=L2(e))e:{e=b(wi(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=Si(t.value,"LA_URL")){e=Gn(t);break e}e=""}else e="";return e}function L2(e){return e=ri(Gn(e)),e=h3(e).filter(function(t){return t.type===d3})[0],e?(e=Ki(e.value,!0),(e=Gs(e,"WRMHEADER"))?e:null):null}var d3=1,p3=new Map().set("com.microsoft.playready",Bc).set("com.microsoft.playready.recommendation",Bc).set("com.microsoft.playready.software",Bc).set("com.microsoft.playready.hardware",Bc);function Ca(e){if(!N2){N2=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);jc=Lt("ftyp",t,r,t,n),t=Lt("dref",E3),_0=Lt("dinf",t)}this.g=e}function Ta(e){for(var t=[],n=b(e.g),r=n.next();!r.done;r=n.next()){var a=t,u=a.push,c=r.value;r=Lt;var d=c.id+1,p=c.stream.width||0,S=c.stream.height||0;c.type=="audio"&&(S=p=0);var T=c.duration*c.timescale,E=Math.floor(T/(Nr+1));switch(T=Math.floor(T%(Nr+1)),d=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(_(vn(d,4)),[0,0,0,0],_(vn(E,4)),_(vn(T,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],_(vn(p,2)),[0,0],_(vn(S,2)),[0,0])),d=Lt("tkhd",d),p=Lt,E=c.duration*c.timescale,S=Math.floor(E/(Nr+1)),E=Math.floor(E%(Nr+1)),T=c.stream.language,T=T.charCodeAt(0)-96<<10|T.charCodeAt(1)-96<<5|T.charCodeAt(2)-96,S=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(_(vn(c.timescale,4)),_(vn(S,4)),_(vn(E,4)),_(vn(T,2)),[0,0])),S=Lt("mdhd",S),E=c,T=new Uint8Array([]),E.type){case"video":T=g3;break;case"audio":T=y3}E=Lt("hdlr",T);e:{switch(c.type){case"video":c=Lt("minf",Lt("vmhd",C3),_0,D2(c));break e;case"audio":c=Lt("minf",Lt("smhd",T3),_0,D2(c));break e}c=new Uint8Array([])}c=p("mdia",S,E,c),r=r("trak",d,c),u.call(a,r)}for(t=An.apply(yo,_(t)),u=e.g[0],n=Lt,r=u.duration*u.timescale,a=Math.floor(r/(Nr+1)),r=Math.floor(r%(Nr+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(_(vn(u.timescale,4)),_(vn(a,4)),_(vn(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),a=Lt("mvhd",a),r=[],e=b(e.g),p=e.next();!p.done;p=e.next())c=r,d=c.push,p=new Uint8Array([0,0,0,0].concat(_(vn(p.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),p=Lt("trex",p),d.call(c,p);if(e=An.apply(yo,_(r)),e=Lt("mvex",e),r=[],u.encrypted){for(u=b(u.stream.drmInfos),c=u.next();!c.done;c=u.next())if(c=c.value,c.initData)for(c=b(c.initData),d=c.next();!d.done;d=c.next())r.push(d.value.initData);u=An.apply(yo,_(r))}else u=new Uint8Array([]);return e=n("moov",a,t,e,u),t=new Uint8Array(jc.byteLength+e.byteLength),t.set(jc),t.set(e,jc.byteLength),t}function D2(e){var t=Lt,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.wa.byteLength)var a=Lt("avcC",e.wa);else{a=Lt;for(var u=7,c=[],d=[],p=0,S=0,T=0,E=0;E<e.$a.length;E++){var I=O2(e.$a[E]);switch(I[0]&31){case 7:c.push(I),u+=I.length+2;break;case 8:d.push(I),u+=I.length+2}}for(0<c.length&&(p=c[0][1],T=c[0][2],S=c[0][3]),u=new Uint8Array(u),E=0,u[E++]=1,u[E++]=p,u[E++]=T,u[E++]=S,u[E++]=255,u[E++]=224|c.length,p=0;p<c.length;p++)u[E++]=(c[p].length&65280)>>8,u[E++]=c[p].length&255,u.set(c[p],E),E+=c[p].length;for(u[E++]=d.length,c=0;c<d.length;c++)u[E++]=(d[c].length&65280)>>8,u[E++]=d[c].length&255,u.set(d[c],E),E+=d[c].length;a=a("avcC",u)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(_(vn(n,2)),_(vn(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",d=P2(e),c=new Uint8Array([]),e.encrypted&&(c=ba(e),r="encv"),n=Lt(r,n,a,d,c)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,a=e.stream.height||0,n=new Uint8Array([]),0<e.wa.byteLength&&(n=Lt("hvcC",e.wa)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(_(vn(r,2)),_(vn(a,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),a="hvc1",d=P2(e),c=new Uint8Array([]),e.encrypted&&(c=ba(e),a="encv"),n=Lt(a,r,n,d,c));break;case"audio":e.codecs.includes("mp3")?e=Lt(".mp3",iu(e)):e.codecs.includes("ac-3")?(n=Lt("dac3",e.ma),r="ac-3",a=new Uint8Array([]),e.encrypted&&(a=ba(e),r="enca"),e=Lt(r,iu(e),n,a)):e.codecs.includes("ec-3")?(n=Lt("dec3",e.ma),r="ec-3",a=new Uint8Array([]),e.encrypted&&(a=ba(e),r="enca"),e=Lt(r,iu(e),n,a)):e.codecs.includes("opus")?(n=Lt("dOps",e.ma),r="Opus",a=new Uint8Array([]),e.encrypted&&(a=ba(e),r="enca"),e=Lt(r,iu(e),n,a)):(0<e.ma.byteLength?n=Lt("esds",e.ma):(n=Lt,r=e.id+1,a=e.stream.channelsCount||2,c=e.stream.audioSamplingRate||44100,p=Ls("audio",e.codecs.split(",")),S={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},d=S[c],(p==="mp4a.40.5"||p==="mp4a.40.29")&&(d=S[2*c]),c=parseInt(p.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(_(vn(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,c<<3|d>>>1,d<<7|a<<3,6,1,2])),n=n("esds",r)),r="mp4a",a=new Uint8Array([]),e.encrypted&&(a=ba(e),r="enca"),e=Lt(r,iu(e),n,a)),n=e}return e=Lt("stsd",b3,n),t("stbl",e,Lt("stts",v3),Lt("stsc",x3),Lt("stsz",S3),Lt("stco",w3))}function P2(e){if(!e.Ba&&!e.Ca)return new Uint8Array([]);var t=e.Ca;return e=new Uint8Array([].concat(_(vn(e.Ba,4)),_(vn(t,4)))),Lt("pasp",e)}function iu(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(_(vn(e.stream.audioSamplingRate||44100,2)),[0,0]))}function ba(e){for(var t=Lt,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,a=0;a<n.length;a+=1)r|=n.charCodeAt(a)<<8*(n.length-a-1);n=new Uint8Array([].concat(_(vn(r,4)))),n=Lt("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=Lt("schm",r),a=Lt;var u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=b(e.stream.drmInfos);for(var c=e.next();!c.done;c=e.next())if((c=c.value)&&c.keyIds&&c.keyIds.size){c=b(c.keyIds);for(var d=c.next();!d.done;d=c.next())u=O2(d.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),u=Lt("tenc",e,u),t("sinf",n,r,a("schi",u))}function ru(e){var t=[];e=b(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,a=r.apply,u=Lt,c=new Uint8Array([0,0,0,0].concat(_(vn(n.data?n.data.rb:0,4))));c=Lt("mfhd",c);var d,p=n.data?n.data.Ya:[],S=new Uint8Array(4+p.length);for(d=0;d<p.length;d++){var T=p[d].flags;S[d+4]=T.Va<<4|T.Xa<<2|T.Wa}p=Lt("sdtp",S);var E=p.length+92;S=Lt,d=new Uint8Array([0,0,0,58].concat(_(vn(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),d=Lt("tfhd",d),T=n.data?n.data.baseMediaDecodeTime:0;var I=Math.floor(T%(Nr+1));T=new Uint8Array([1,0,0,0].concat(_(vn(Math.floor(T/(Nr+1)),4)),_(vn(I,4)))),T=Lt("tfdt",T);var A=E;E=n.data?n.data.Ya:[],I=E.length;var R=12+16*I,D=new Uint8Array(R);for(A+=8+R,D.set([n.type==="video"?1:0,0,15,1].concat(_(vn(I,4)),_(vn(A,4))),0),A=0;A<I;A++){var L=E[A];R=vn(L.duration,4);var F=vn(L.size,4),U=L.flags;L=vn(L.cb,4),D.set([].concat(_(R),_(F),[U.gb<<2|U.Va,U.Xa<<6|U.Wa<<4|U.hb,U.Ua&61440,U.Ua&15],_(L)),12+16*A)}E=Lt("trun",D),p=S("traf",d,T,E,p),u=u("moof",c,p),a.call(r,t,[u,m3(n)])}return An.apply(yo,_(t))}function m3(e){return e=(e.data?e.data.Ya:[]).map(function(t){return t.data}),e=An.apply(yo,_(e)),Lt("mdat",e)}function vn(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function O2(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function Lt(e){var t=Me.apply(1,arguments),n=U2[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],U2[e]=n);for(var r=8,a=t.length-1;0<=a;a--)r+=t[a].byteLength;for(a=new Uint8Array(r),a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=r&255,a.set(n,4),n=0,r=8;n<t.length;n++)a.set(t[n],r),r+=t[n].byteLength;return a}var N2=!1,Nr=Math.pow(2,32)-1,U2={},g3=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),y3=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),v3=new Uint8Array([0,0,0,0,0,0,0,0]),x3=new Uint8Array([0,0,0,0,0,0,0,0]),w3=new Uint8Array([0,0,0,0,0,0,0,0]),S3=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),C3=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),T3=new Uint8Array([0,0,0,0,0,0,0,0]),b3=new Uint8Array([0,0,0,0,0,0,0,1]),jc=new Uint8Array([]),E3=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),_0=new Uint8Array([]);function R0(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new Ze(5),this.o=new Mt(function(){k3(e)}),this.A=new $s,this.m=new Map}w=R0.prototype,w.configure=function(e){this.g=e},w.start=function(e,t){var n=this;return z(function(r){if(r.g==1)return n.l=[e],n.h=t,k(r,L0(n),2);if(!n.h)throw new se(2,7,7001);return r.return(n.j)})};function k3(e){var t;z(function(n){switch(n.g){case 1:return Z(n,2),k(n,L0(e),4);case 4:K(n,3);break;case 2:t=ne(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();V(n)}})}w.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},w.update=function(){var e=this,t;return z(function(n){if(n.g==1)return Z(n,2),k(n,L0(e),4);if(n.g!=2)return K(n,0);if(t=ne(n),!e.h||!t)return n.return();e.h.onError(t),V(n)})},w.onExpirationUpdated=function(){},w.onInitialVariantChosen=function(){},w.banLocation=function(){},w.setMediaElement=function(){};function L0(e){var t,n,r,a,u,c,d;return z(function(p){if(p.g==1)return t=Qn(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),a=n.request(0,t,{type:5}),ns(e.A,a),k(p,a.promise,2);if(u=p.h,!e.h)return p.return();u.uri&&!e.l.includes(u.uri)&&e.l.unshift(u.uri);var S=u.uri,T=u.data,E=e.g.mss.manifestPreprocessor;if(E!=Gf){if(Ot("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),T=Bx(T,"SmoothStreamingMedia"),!T)throw new se(2,4,4046,S);E(T),T=Mi(T.outerHTML)}var I=Bd(T,"SmoothStreamingMedia");if(!I)throw new se(2,4,4046,S);if(S=e.g.mss.manifestPreprocessorTXml,S!=Wf&&S(I),e.i||(e.i=new st(null,0)),S=Bt(I,"IsLive",Fd,!1))throw new se(2,4,4047);e.i.sc(!S),E=Bt(I,"TimeScale",vo,1e7),T=Bt(I,"DVRWindowLength",vo),S&&(T===0||isNaN(T))&&(T=1/0);var A=Bt(I,"CanSeek",Fd,!1);T===0&&A&&(T=1/0),A=null,T&&0<T&&(A=T/E),S&&!isNaN(e.g.availabilityWindowOverride)&&(A=e.g.availabilityWindowOverride),A==null&&(A=1/0),e.i.pe(A),T=Bt(I,"Duration",vo,1/0),S||e.i.Za(T/E),S={variants:[],textStreams:[],timescale:E,duration:T/E};var R;for(A=on(I,"Protection"),E=e.g.mss.keySystemsBySystemId,T=[],A=b(A),R=A.next();!R.done;R=A.next())T=T.concat(on(R.value,"ProtectionHeader"));if(T.length){for(A=[],R=0;R<T.length;R++){var D=T[R],L=D.attributes.SystemID.toLowerCase(),F=E[L];if(F){var U=L2(D);if(U)e:{U=b(wi(U,"DATA"));for(var q=U.next();!q.done;q=U.next())if(q=Si(q.value,"KID")){U=ri(Gn(q)),U=new Uint8Array([U[3],U[2],U[1],U[0],U[5],U[4],U[7],U[6]].concat(_(U.slice(8)))),U=Yi(U);break e}U=null}else U=null;q=ri(Gn(D)),L=Yr(L.replace(/-/g,"")),L=[{initData:wf(q,L,new Set,0),initDataType:"cenc",keyId:U}],L=Qr(F,"cenc",L),U&&L.keyIds.add(U),(F=p3.get(F))&&(L.licenseServerUri=F(D)),A.push(L)}}E=A}else E=[];for(R=E,A=[],E=[],T=[],I=on(I,"StreamIndex"),I=b(I),D=I.next();!D.done;D=I.next()){D=D.value,F=on(D,"QualityLevel"),L=S.timescale,U=S.duration,q=on(D,"c");for(var N=[],G=0,Q=0;Q<q.length;++Q){var re=q[Q],ae=q[Q+1],me=Bt(re,"t",vo),le=Bt(re,"d",vo);if(re=Bt(re,"r",Tf),!le)break;if(me=me??G,re=re||0,0>re)if(ae){if(ae=Bt(ae,"t",vo),ae==null)break;if(me>=ae)break;re=Math.ceil((ae-me)/le)-1}else{if(U==1/0)break;if(me/L>=U)break;re=Math.ceil((U*L-me)/le)-1}for(ae=0;ae<=re;++ae)G=me+le,N.push({start:me/L,end:G/L,$f:me}),me=G}for(L=N,F=b(F),U=F.next();!U.done;U=F.next())(U=A3(e,D,U.value,L,R,S))&&(U.type!="audio"||e.g.disableAudio?U.type!="video"||e.g.disableVideo?U.type!=Ut||e.g.disableText||T.push(U):E.push(U):A.push(U))}for(I=[],A=b(0<A.length?A:[null]),R=A.next();!R.done;R=A.next())for(R=R.value,D=b(0<E.length?E:[null]),N=D.next();!N.done;N=D.next())F=I,L=F.push,U=e,q=R,N=N.value,Q=0,q&&q.bandwidth&&0<q.bandwidth&&(Q+=q.bandwidth),N&&N.bandwidth&&0<N.bandwidth&&(Q+=N.bandwidth),U={id:U.s++,language:q?q.language:"und",disabledUntilTime:0,primary:!!q&&q.primary||!!N&&N.primary,audio:q,video:N,bandwidth:Q,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},L.call(F,U);S.variants=I,S.textStreams=T,e.j?(e.j.variants=S.variants,e.j.textStreams=S.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:S.variants,textStreams:S.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.i.Wd()),Promise.resolve(),c=Date.now(),d=(c-r)/1e3,e.B.sample(1,d),V(p)})}function A3(e,t,n,r,a,u){var c=t.attributes.Type;if(c!=="audio"&&c!=="video"&&c!=="text")return je("Ignoring unrecognized type:",c),null;var d=t.attributes.Language,p=e.s++,S=Bt(n,"Bitrate",nr),T=Bt(n,"MaxWidth",nr),E=Bt(n,"MaxHeight",nr),I=Bt(n,"Channels",nr),A=Bt(n,"SamplingRate",nr),R=u.duration;r.length&&(R=r[r.length-1].end-r[0].start);var D=e.i.getDuration();e.i.Za(Math.min(R,D));var L={id:p,originalId:t.attributes.Name||String(p),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:S||0,width:T||void 0,height:E||void 0,kind:"",encrypted:0<a.length,drmInfos:a,keyIds:new Set,language:qt(d||"und"),originalLanguage:d,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:I,audioSamplingRate:A,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:R,timescale:u.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((a=t.attributes.Subtype)&&((a=D3[a])&&L.roles.push(a),a==="main"&&(L.primary=!0)),a=n.attributes.FourCC,(a===null||a==="")&&(a=t.attributes.FourCC),!a){if(c==="audio")a="AAC";else if(c==="video")return je('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!L3.includes(a.toUpperCase()))return je("Codec not supported:",a),null;switch(n=I3(n,c,a,L),L.mssPrivateData.codecPrivateData=n,c){case"audio":if(!n)return je("Quality unsupported without CodecPrivateData",c),null;L.type="audio",L.mimeType="mss/audio/mp4",L.codecs=M3(a,n);break;case"video":if(!n)return je("Quality unsupported without CodecPrivateData",c),null;L.type="video",L.mimeType="mss/video/mp4",L.codecs=_3(n);break;case"text":L.type=Ut,L.mimeType="application/mp4",(a==="TTML"||a==="DFXP")&&(L.codecs="stpp")}return L.fullMimeTypes.add(Vn(L.mimeType,L.codecs)),L.createSegmentIndex=function(){if(L.segmentIndex)return Promise.resolve();if(e.m.has(L.id))var F=e.m.get(L.id);else F=[],L.type=="video"&&(F=L.mssPrivateData.codecPrivateData.split("00000001").slice(1)),F={id:L.id,type:L.type,codecs:L.codecs,encrypted:L.encrypted,timescale:L.mssPrivateData.timescale,duration:L.mssPrivateData.duration,$a:F,ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:null,stream:L},F=Ta(new Ca([F])),e.m.set(L.id,F);return F=R3(e,new Do(function(){return[]},0,null,Bf(L),L.mssPrivateData.timescale,F),L,t,r),L.segmentIndex=new Ft(F),Promise.resolve()},L.closeSegmentIndex=function(){L.segmentIndex&&(L.segmentIndex.release(),L.segmentIndex=null)},L}function I3(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var a={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=a[e],n==="AACH"?(n=new Uint8Array(4),e=a[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function M3(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function _3(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function R3(e,t,n,r,a){var u=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[],a=b(a);for(var c=a.next(),d={};!c.done;d={re:void 0},c=a.next())d.re=c.value,r.push(new ft(d.re.start,d.re.end,function(p){return function(){return ro(e.l,[u.replace("{start time}",String(p.re.$f))])}}(d),0,null,t,0,0,n.mssPrivateData.duration));return r}we("shaka.mss.MssParser",R0);var L3="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),D3={CAPT:"main",SUBT:"alternate",DESC:"main"};Ci["application/vnd.ms-sstr+xml"]=function(){return new R0};function B2(e,t,n,r,a,u){if(200<=n&&299>=n&&n!=202)return{uri:a||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var c=null;try{c=qi(t)}catch{}throw new se(n==401||n==403?2:1,1,1001,r,n,c,e,u,a||r)}function D0(){}function Fc(e,t,n,r,a){var u=new B3;wl(t.headers).forEach(function(S,T){u.append(T,S)});var c=new N3,d={lg:!1,mh:!1};if(e=P3(e,n,{body:t.body||void 0,headers:u,method:t.method,signal:c.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},d,r,a,t.streamDataCallback),e=new Dn(e,function(){return d.lg=!0,c.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var p=new Mt(function(){d.mh=!0,c.abort()});p.Y(t/1e3),e.finally(function(){p.stop()})}return e}function P3(e,t,n,r,a,u,c){var d,p,S,T,E,I,A,R,D,L,F,U,q;return z(function(N){switch(N.g){case 1:return d=O3,p=U3,I=E=0,A=Date.now(),Z(N,2),k(N,d(e,n),4);case 4:if(S=N.h,u(j2(S.headers)),n.method=="HEAD"){N.u(5);break}return R=S.clone().body.getReader(),L=(D=S.headers.get("Content-Length"))?parseInt(D,10):0,F=function(G){function Q(){var re,ae,me;return z(function(le){switch(le.g){case 1:return Z(le,2),k(le,R.read(),4);case 4:re=le.h,K(le,3);break;case 2:return ne(le),le.return();case 3:if(re.done){le.u(5);break}if(E+=re.value.byteLength,!c){le.u(5);break}return k(le,c(re.value),5);case 5:ae=Date.now(),(100<ae-A||re.done)&&(me=re.done?0:L-E,a(ae-A,E-I,me),I=E,A=ae),re.done?G.close():(G.enqueue(re.value),Q()),V(le)}})}Q()},new p({start:F}),k(N,S.arrayBuffer(),6);case 6:T=N.h;case 5:K(N,3);break;case 2:throw U=ne(N),r.lg?new se(1,1,7001,e,t):r.mh?new se(1,1,1003,e,t):new se(1,1,1002,e,U,t);case 3:return q=j2(S.headers),N.return(B2(q,T,S.status,e,S.url,t))}})}function j2(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function F2(){if(h.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(h.Response){if(!new Response("").body)return!1}else return!1;return!(!h.fetch||"polyfill"in h.fetch||!h.AbortController)}we("shaka.net.HttpFetchPlugin",D0),D0.isSupported=F2,D0.parse=Fc;var O3=h.fetch,N3=h.AbortController,U3=h.ReadableStream,B3=h.Headers;F2()&&(Zi("http",Fc,2,!0),Zi("https",Fc,2,!0),Zi("blob",Fc,2,!0));function $2(){}function $c(e,t,n,r,a){var u=new j3,c=Date.now(),d=0,p=new Promise(function(S,T){u.open(t.method,e,!0),u.responseType="arraybuffer",u.timeout=t.retryParameters.timeout,u.withCredentials=t.allowCrossSiteCredentials,u.onabort=function(){T(new se(1,1,7001,e,n))};var E=!1;u.onreadystatechange=function(){if(u.readyState==2&&!E){var A=z2(u);a(A),E=!0}},u.onload=function(A){var R=z2(u),D=u.response;try{r(Date.now()-c,A.loaded-d,0);var L=B2(R,D,u.status,e,u.responseURL,n);S(L)}catch(F){T(F)}},u.onerror=function(A){T(new se(1,1,1002,e,A,n))},u.ontimeout=function(){T(new se(1,1,1003,e,n))},u.onprogress=function(A){var R=Date.now();(100<R-c||A.lengthComputable&&A.loaded==A.total)&&(r(R-c,A.loaded-d,u.readyState==4?0:A.total-A.loaded),d=A.loaded,c=R)};for(var I in t.headers)u.setRequestHeader(I.toLowerCase(),t.headers[I]);u.send(t.body)});return new Dn(p,function(){return u.abort(),Promise.resolve()})}function z2(e){var t=e.getAllResponseHeaders().trim().split(`\r
`);e={},t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}we("shaka.net.HttpXHRPlugin",$2),$2.parse=$c;var j3=h.XMLHttpRequest;Zi("http",$c,1,!0),Zi("https",$c,1,!0),Zi("blob",$c,1,!0);function V2(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function P0(e){return e.M().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Ha+":"+e.sa}function F3(e,t){return Zs(e.g.M(),e.g.Ha,e.g.sa,t.streaming.retryParameters)}function H2(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function G2(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}H2.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function W2(e){var t=this;this.o=e,this.j=new Map,this.i=new zs(function(){return O0(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new H2}W2.prototype.destroy=function(){return this.i.destroy()};function $3(e,t,n){e.m=t,e.l=n}function O0(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function z3(e,t,n,r,a,u){Jt(e.i);var c=(e.j.get(t)||Promise.resolve()).then(function(){var d,p,S,T,E,I,A;return z(function(R){if(R.g==1)return k(R,H3(e,n),2);if(d=R.h,e.i.g)throw new se(2,9,7001);if(a)for(T in p=Ae(d),S=new wy(p),S.data)E=Number(T),I=S.data[E],A=S.g[E],e.l(I,A);e.g.close(r,d.byteLength);var D=e.g;return e.m(D.i==0?0:D.j/D.i,e.g.h),R.return(u(d))})});e.j.set(t,c)}function V3(e){return z(function(t){return t.g==1?k(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function H3(e,t){var n,r,a,u;return z(function(c){return c.g==1?(n=Ri,r=e.o.request(n,t),a=function(){return r.abort()},e.h.push(a),k(c,r.promise,2)):(u=c.h,jt(e.h,a),c.return(u.data))})}function zc(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Zt,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}zc.prototype.abort=function(){var e=this;return z(function(t){if(t.g==1){try{e.i.abort()}catch{}return Z(t,2),k(t,e.g,4)}if(t.g!=2)return K(t,0);ne(t),V(t)})};function N0(e,t){return new Promise(function(n,r){var a=e.h.openCursor();a.onerror=r,a.onsuccess=function(){var u;return z(function(c){if(c.g==1)return a.result==null?(n(),c.return()):(u=a.result,k(c,t(u.key,u.value,u),2));u.continue(),V(c)})}})}zc.prototype.store=function(){return this.h},zc.prototype.promise=function(){return this.g};function U0(e){this.h=e,this.g=[]}U0.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function cs(e,t){return Vc(e,t,"readwrite")}function Vc(e,t,n){n=e.h.transaction([t],n);var r=new zc(n,t);return e.g.push(r),r.promise().then(function(){jt(e.g,r)},function(){jt(e.g,r)}),r}function hs(e,t,n){this.h=new U0(e),this.i=t,this.g=n}w=hs.prototype,w.destroy=function(){return this.h.destroy()},w.hasFixedKeySpace=function(){return!0},w.addSegments=function(){return X2(this.i)},w.removeSegments=function(e,t){return K2(this,this.i,e,t)},w.getSegments=function(e){var t=this,n;return z(function(r){return r.g==1?k(r,q2(t,t.i,e),2):(n=r.h,r.return(n.map(function(a){return t.og(a)})))})},w.addManifests=function(){return X2(this.g)},w.updateManifest=function(){return Promise.reject(new se(2,9,9016,"Cannot modify values in "+this.g))};function G3(e,t,n){e=cs(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}w.updateManifestExpiration=function(e,t){var n=cs(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(a){(a=a.target.result)&&(a.expiration=t,r.put(a,e))},n.promise()},w.removeManifests=function(e,t){return K2(this,this.g,e,t)},w.getManifests=function(e){var t=this,n;return z(function(r){return r.g==1?k(r,q2(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(a){return t.Wc(a)}))))})},w.getAllManifests=function(){var e=this,t,n;return z(function(r){return r.g==1?(t=Vc(e.h,e.g,"readonly"),n=new Map,k(r,N0(t,function(a,u){var c;return z(function(d){if(d.g==1)return k(d,e.Wc(u),2);c=d.h,n.set(a,c),V(d)})}),2)):r.g!=3?k(r,t.promise(),3):r.return(n)})},w.og=function(e){return e},w.Wc=function(e){return Promise.resolve(e)};function X2(e){return Promise.reject(new se(2,9,9011,"Cannot add new value to "+e))}w.add=function(e,t){var n=this,r,a,u,c,d,p,S;return z(function(T){if(T.g==1){for(r=cs(n.h,e),a=r.store(),u=[],c=b(t),d=c.next(),p={};!d.done;p={Hf:void 0},d=c.next())S=d.value,p.Hf=a.add(S),p.Hf.onsuccess=function(E){return function(){u.push(E.Hf.result)}}(p);return k(T,r.promise(),2)}return T.return(u)})};function K2(e,t,n,r){e=cs(e.h,t),t=e.store(),n=b(n);for(var a=n.next(),u={};!a.done;u={rf:void 0},a=n.next())u.rf=a.value,t.delete(u.rf).onsuccess=function(c){return function(){return r(c.rf)}}(u);return e.promise()}function q2(e,t,n){var r,a,u,c,d,p,S;return z(function(T){if(T.g==1){for(r=Vc(e.h,t,"readonly"),a=r.store(),u={},c=[],d=b(n),p=d.next(),S={};!p.done;S={le:void 0,Sd:void 0},p=d.next())S.Sd=p.value,S.le=a.get(S.Sd),S.le.onsuccess=function(E){return function(){E.le.result==null&&c.push(E.Sd),u[E.Sd]=E.le.result}}(S);return k(T,r.promise(),2)}if(c.length)throw new se(2,9,9012,"Could not find values for "+c);return T.return(n.map(function(E){return u[E]}))})}function su(e){this.g=new U0(e)}su.prototype.destroy=function(){return this.g.destroy()},su.prototype.getAll=function(){var e=this,t,n;return z(function(r){return r.g==1?(t=Vc(e.g,"session-ids","readonly"),n=[],k(r,N0(t,function(a,u){n.push(u)}),2)):r.g!=3?k(r,t.promise(),3):r.return(n)})},su.prototype.add=function(e){var t=cs(this.g,"session-ids"),n=t.store();e=b(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},su.prototype.remove=function(e){var t=this,n;return z(function(r){return r.g==1?(n=cs(t.g,"session-ids"),k(r,N0(n,function(a,u,c){e.includes(u.sessionId)&&c.delete()}),2)):k(r,n.promise(),0)})};function Mo(){this.g=new Map}Mo.prototype.destroy=function(){for(var e=[],t=b(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Mo.prototype.init=function(){var e=this;au.forEach(function(a,u){(a=a())&&e.g.set(u,a)});for(var t=[],n=b(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function Y2(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(a,u){a.hasFixedKeySpace()||t||(t={path:{nb:r,Ja:u},Ja:a})})}),t)return t;throw new se(2,9,9013,"Could not find a cell that supports add-operations")}function W3(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(a,u){t({nb:r,Ja:u},a)})})}function Hc(e,t,n){if(e=e.g.get(t),!e)throw new se(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new se(2,9,9013,"Could not find cell with name "+n);return t}function X3(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function K3(e){var t=Array.from(e.g.keys());if(!t.length)throw new se(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function q3(e){var t,n,r;return z(function(a){return a.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=au,r.forEach(function(u){(u=u())&&t.push(u)})),k(a,Promise.all(t.map(function(u){return u.erase()})),2)):n?a.u(0):k(a,Promise.all(t.map(function(u){return u.destroy()})),0)})}function Q2(e,t){au.set(e,t)}we("shaka.offline.StorageMuxer",Mo),Mo.unregister=function(e){au.delete(e)},Mo.register=Q2,Mo.prototype.destroy=Mo.prototype.destroy;var au=new Map;function lu(){hs.apply(this,arguments)}X(lu,hs),lu.prototype.updateManifestExpiration=function(e,t){var n=this,r,a,u;return z(function(c){return r=cs(n.h,n.g),a=r.store(),u=new Zt,a.get(e).onsuccess=function(d){(d=d.target.result)?(d.expiration=t,a.put(d),u.resolve()):u.reject(new se(2,9,9012,"Could not find values for "+e))},k(c,Promise.all([r.promise(),u]),0)})},lu.prototype.Wc=function(e){var t,n,r,a,u,c;return z(function(d){if(d.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,a=r-e.periods[n].startTime,u=Y3(e.periods[n],a),t.push(u);return k(d,_x(t),2)}return c=d.h,d.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:c,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function Y3(e,t){Z3(e);for(var n=b(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(a){return Q3(a,e.startTime,t)})}function Q3(e,t,n){var r=e.initSegmentUri?Z2(e.initSegmentUri):null,a=t+e.presentationTimeOffset,u=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(c){var d=Z2(c.uri);return{startTime:t+c.startTime,endTime:t+c.endTime,dataKey:d,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:u,timestampOffset:a,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}lu.prototype.og=function(e){return{data:e.data}};function Z2(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new se(2,9,9004,"Could not parse uri "+e)}function Z3(e){var t=e.streams.filter(function(d){return d.contentType=="audio"});if(e=e.streams.filter(function(d){return d.contentType=="video"}),!t.every(function(d){return d.variantIds})||!e.every(function(d){return d.variantIds})){for(var n=b(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=b(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var a=b(e),u=a.next();!u.done;u=a.next())u.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,a=b(t),u=a.next();!u.done;u=a.next())u.value.variantIds.push(r);if(e.length&&t.length)for(t=b(t),r=t.next();!r.done;r=t.next())for(r=r.value,a=b(e),u=a.next();!u.done;u=a.next()){u=u.value;var c=n++;r.variantIds.push(c),u.variantIds.push(c)}}}function Gc(){hs.apply(this,arguments)}X(Gc,hs),Gc.prototype.Wc=function(e){var t,n,r,a,u,c;return z(function(d){if(d.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,a=r-e.periods[n].startTime;for(var p=e.periods[n],S=[],T=b(p.streams),E=T.next();!E.done;E=T.next())E=E.value,E.variantIds.length!=0&&S.push(J3(E,p.startTime,p.startTime+a));u=S,t.push(u)}return k(d,_x(t),2)}return c=d.h,d.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:c,sequenceMode:!1})})};function J3(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function B0(){hs.apply(this,arguments)}X(B0,hs),w=B0.prototype,w.hasFixedKeySpace=function(){return!1},w.addSegments=function(e){return this.add(this.i,e)},w.addManifests=function(e){return this.add(this.g,e)},w.updateManifest=function(e,t){return G3(this,e,t)},w.Wc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function J2(){this.m=this.j=this.i=this.h=this.g=this.l=null}w=J2.prototype,w.init=function(){var e=this,t=new Zt,n=!1,r=new Mt(function(){n=!0,t.reject(new se(2,9,9017))});r.Y(5);var a=h.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!n){var u=a.result;e.l=u;var c=u.objectStoreNames;c=c.contains("manifest")&&c.contains("segment")?new lu(u,"segment","manifest"):null,e.g=c,c=u.objectStoreNames,c=c.contains("manifest-v2")&&c.contains("segment-v2")?new Gc(u,"segment-v2","manifest-v2"):null,e.h=c,c=u.objectStoreNames,c=c.contains("manifest-v3")&&c.contains("segment-v3")?new Gc(u,"segment-v3","manifest-v3"):null,e.i=c,c=u.objectStoreNames,c=c.contains("manifest-v5")&&c.contains("segment-v5")?new B0(u,"segment-v5","manifest-v5"):null,e.j=c,u=u.objectStoreNames.contains("session-ids")?new su(u):null,e.m=u,r.stop(),t.resolve()}},a.onupgradeneeded=function(){for(var u=a.result,c=b(["segment-v5","manifest-v5","session-ids"]),d=c.next();!d.done;d=c.next())d=d.value,u.objectStoreNames.contains(d)||u.createObjectStore(d,{autoIncrement:!0})},a.onerror=function(u){n||(t.reject(new se(2,9,9001,a.error)),r.stop(),u.preventDefault())},t},w.destroy=function(){var e=this;return z(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return k(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return k(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return k(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return k(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return k(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),V(t)}})},w.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},w.getEmeSessionCell=function(){return this.m},w.erase=function(){var e=this;return z(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return k(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return k(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return k(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return k(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),k(t,eI(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,k(t,e.init(),0)}})};function eI(){var e=new Zt,t=h.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new se(2,9,9001,t.error)),n.preventDefault()},e}Q2("idb",function(){return Wo()||Bi()||!h.indexedDB?null:new J2});function Gi(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}Gi.prototype.nb=function(){return this.i},Gi.prototype.Ja=function(){return this.h},Gi.prototype.key=function(){return this.l},Gi.prototype.toString=function(){return this.j};function j0(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new Gi(t,n,r,Number(e[4])):null}function ew(e,t){this.h=e,this.g=t}function tw(e,t){var n=new st(null,0);n.Za(t.duration);var r=t.streams.filter(function(S){return S.type=="audio"}),a=t.streams.filter(function(S){return S.type=="video"});r=tI(e,r,a,n),a=t.streams.filter(function(S){return S.type==Ut}).map(function(S){return Wc(e,S,n)});var u=t.streams.filter(function(S){return S.type=="image"}).map(function(S){return Wc(e,S,n)}),c=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var d=b(r.values()),p=d.next();!p.done;p=d.next())p=p.value,p.audio&&p.audio.encrypted&&(p.audio.drmInfos=c),p.video&&p.video.encrypted&&(p.video.drmInfos=c);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:a,imageStreams:u,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1}}function tI(e,t,n,r){for(var a=new Set,u=b(t),c=u.next();!c.done;c=u.next()){c=b(c.value.variantIds);for(var d=c.next();!d.done;d=c.next())a.add(d.value)}for(u=b(n),c=u.next();!c.done;c=u.next())for(c=b(c.value.variantIds),d=c.next();!d.done;d=c.next())a.add(d.value);for(u=new Map,a=b(a),c=a.next();!c.done;c=a.next())c=c.value,u.set(c,{id:c,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=b(t),a=t.next();!a.done;a=t.next())for(c=a.value,a=Wc(e,c,r),c=b(c.variantIds),d=c.next();!d.done;d=c.next())d=u.get(d.value),d.language=a.language,d.primary=d.primary||a.primary,d.audio=a;for(n=b(n),t=n.next();!t.done;t=n.next())for(a=t.value,t=Wc(e,a,r),a=b(a.variantIds),c=a.next();!c.done;c=a.next())c=u.get(c.value),c.primary=c.primary||t.primary,c.video=t;return u}function Wc(e,t,n){var r=t.segments.map(function(a){return nI(e,a,t)});return n.sd(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ft(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Vn(t.mimeType,t.codecs)])}}function nI(e,t,n){var r=new Gi("segment",e.h,e.g,t.dataKey);return e=new ft(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?oI(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function oI(e,t){var n=new Gi("segment",e.h,e.g,t);return new Do(function(){return[n.toString()]},0,null)}function nw(){this.g=null}w=nw.prototype,w.configure=function(){},w.start=function(e,t){var n=this,r,a,u,c,d,p,S;return z(function(T){switch(T.g){case 1:if(r=j0(e),n.g=r,r==null||r.g!="manifest")throw new se(2,1,9004,e);return a=new Mo,oe(T,2),k(T,a.init(),4);case 4:return k(T,Hc(a,r.nb(),r.Ja()),5);case 5:return u=T.h,k(T,u.getManifests([r.key()]),6);case 6:return c=T.h,d=c[0],p=new ew(r.nb(),r.Ja()),S=tw(p,d),t.makeTextStreamsForClosedCaptions(S),T.return(S);case 2:return W(T),k(T,a.destroy(),7);case 7:J(T,0)}})},w.stop=function(){return Promise.resolve()},w.update=function(){},w.onExpirationUpdated=function(e,t){var n=this,r,a,u,c,d,p,S;return z(function(T){switch(T.g){case 1:return r=n.g,a=new Mo,Z(T,2,3),k(T,a.init(),5);case 5:return k(T,Hc(a,r.nb(),r.Ja()),6);case 6:return u=T.h,k(T,u.getManifests([r.key()]),7);case 7:if(c=T.h,d=c[0],p=d.sessionIds.includes(e),S=d.expiration==null||d.expiration>t,!p||!S){T.u(3);break}return k(T,u.updateManifestExpiration(r.key(),t),3);case 3:return W(T),k(T,a.destroy(),10);case 10:J(T,0);break;case 2:ne(T),T.u(3)}})},w.onInitialVariantChosen=function(){},w.banLocation=function(){},w.setMediaElement=function(){},Ci["application/x-offline-manifest"]=function(){return new nw};function ow(){}function iw(e){var t=j0(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Fs(e)):e=t&&t.g=="segment"?iI(t.key(),t):ts(new se(2,1,9004,e)),e}function iI(e,t){var n=new Mo;return Fs(void 0).Aa(function(){return n.init()}).Aa(function(){return Hc(n,t.nb(),t.Ja())}).Aa(function(r){return r.getSegments([t.key()])}).Aa(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}we("shaka.offline.OfflineScheme",ow),ow.plugin=iw,Zi("offline",iw);function rw(e,t,n){var r,a,u,c,d,p;return z(function(S){switch(S.g){case 1:r=[];for(var T=[],E=b(n),I=E.next();!I.done;I=E.next()){I=I.value;for(var A=!1,R=b(T),D=R.next();!D.done;D=R.next())if(D=D.value,sI(D.info,I)){D.sessionIds.push(I.sessionId),A=!0;break}A||T.push({info:I,sessionIds:[I.sessionId]})}a=b(T),u=a.next();case 2:if(u.done){S.u(4);break}return c=u.value,d=rI(e,t,c),k(S,d,5);case 5:p=S.h,r=r.concat(p),u=a.next(),S.u(2);break;case 4:return S.return(r)}})}function rI(e,t,n){var r,a;return z(function(u){switch(u.g){case 1:return r=new kf({Lb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),Z(u,2),r.configure(e),k(u,Vb(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:K(u,3);break;case 2:return ne(u),k(u,r.destroy(),5);case 5:return u.return([]);case 3:return a=[],k(u,Promise.all(n.sessionIds.map(function(c){return z(function(d){if(d.g==1)return Z(d,2),k(d,Wb(r,c),4);if(d.g!=2)return a.push(c),K(d,0);ne(d),V(d)})})),6);case 6:return k(u,r.destroy(),7);case 7:return u.return(a)}})}function sI(e,t){function n(r,a){return r.robustness==a.robustness&&r.contentType==a.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Vt(e.audioCapabilities,t.audioCapabilities,n)&&Vt(e.videoCapabilities,t.videoCapabilities,n)}function aI(e,t,n){var r=t.presentationTimeline.getDuration();return t=sw(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function F0(e,t){var n=tw(new ew(e.nb(),e.Ja()),t),r=t.appMetadata||{};return n=sw(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function sw(e){var t=[],n=df(e.variants);n=b(n);for(var r=n.next();!r.done;r=n.next())t.push(Us(r.value));for(e=b(e.textStreams),n=e.next();!n.done;n=e.next())t.push(hf(n.value));return t}function lI(){this.g={}}function uI(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var a=n.bandwidth||393216,u=r.bandwidth||t.bandwidth-a;0>=u&&(u=t.bandwidth),e.g[n.id]=a,e.g[r.id]=u}}function fI(e,t){e.g[t.id]=t.bandwidth||2048}function aw(e,t){return e=e.g[t],e==null&&(e=0),e}function to(e){var t=this;if(e&&e.constructor!=Te)throw new se(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.xb()):(this.h=ta(),this.g=new nn),this.i=[],this.j=[];var n=!e;this.l=new zs(function(){var r,a,u,c,d;return z(function(p){switch(p.g){case 1:return k(p,Promise.all(t.j.map(function(S){return O0(S)})),2);case 2:for(r=function(){},a=[],u=b(t.i),c=u.next();!c.done;c=u.next())d=c.value,a.push(d.then(r,r));return k(p,Promise.all(a),3);case 3:if(!n){p.u(4);break}return k(p,t.g.destroy(),4);case 4:t.h=null,t.g=null,V(p)}})})}function $0(){if(Ii())e:{for(var e=b(au.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}w=to.prototype,w.destroy=function(){return this.l.destroy()},w.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Hf(e,t)),Rr(this.h,e)},w.getConfiguration=function(){var e=ta();return Rr(e,this.h,ta()),e},w.xb=function(){return this.g},w.store=function(e,t,n){var r=this,a=this.getConfiguration(),u=new W2(this.g);return this.j.push(u),t=cI(this,e,t||{},function(){var c;return z(function(d){return d.g==1?n?d.u(2):k(d,Ep(e,r.g,a.manifest.retryParameters),3):(d.g!=2&&(n=d.h),c=Vy(e,n||null),d.return(c()))})},a,u),t=new Dn(t,function(){return O0(u)}),t.finally(function(){jt(r.j,u)}),bI(this,t)};function cI(e,t,n,r,a,u){var c,d,p,S,T,E,I,A,R,D,L,F,U,q;return z(function(N){switch(N.g){case 1:return Xc(),d=c=null,p=new Mo,E=T=S=null,Z(N,2,3),k(N,r(),5);case 5:return c=N.h,k(N,wI(e,t,c,a),6);case 6:if(I=N.h,ao(e),A=!I.presentationTimeline.V()&&!I.presentationTimeline.kc(),!A)throw new se(2,9,9005,t);return k(N,e.yc(I,function(G){E=E||G},a),7);case 7:if(d=N.h,ao(e),E)throw E;return k(N,dI(I,d,a),8);case 8:return k(N,p.init(),9);case 9:return ao(e),k(N,Y2(p),10);case 10:return S=N.h,ao(e),R=pI(d,I,t,n,a,u),D=R.ui,L=R.Xf,k(N,S.Ja.addManifests([D]),11);case 11:if(F=N.h,ao(e),T=F[0],ao(e),E)throw E;return k(N,hI(e,L,T,D,u,a,S.Ja,I,d),12);case 12:return ao(e),cw(I,D,d,a),k(N,S.Ja.updateManifest(T,D),13);case 13:return ao(e),U=new Gi("manifest",S.path.nb,S.path.Ja,T),N.return(F0(U,D));case 3:return W(N),k(N,p.destroy(),14);case 14:if(!c){N.u(15);break}return k(N,c.stop(),15);case 15:if(!d){N.u(17);break}return k(N,d.destroy(),17);case 17:J(N,0);break;case 2:if(q=ne(N),T==null){N.u(19);break}return k(N,lw(T),19);case 19:throw E||q}})}function hI(e,t,n,r,a,u,c,d,p){var S,T,E,I,A,R,D,L,F,U;return z(function(q){switch(q.g){case 1:if(S={},T=0,E=function(N,G){var Q,re,ae,me,le,ue,de;return z(function(be){if(be.g==1){for(Q=b(N),re=Q.next(),ae={};!re.done;ae={Ac:void 0},re=Q.next())ae.Ac=re.value,me=F3(ae.Ac,u),le=ae.Ac.i,ue=ae.Ac.h,de=function(Ce){return function(ke){var Oe,Ie,Fe;return z(function(vt){if(vt.g==1)return k(vt,c.addSegments([{data:ke}]),2);Oe=vt.h,ao(e),Ie=Ce.Ac.g,Fe=P0(Ie),S[Fe]=Oe[0],T+=ke.byteLength,V(vt)})}}(ae),z3(a,ae.Ac.groupId,me,le,ue,de);return k(be,V3(a),2)}return G?(ao(e),cw(d,r,p,u),k(be,c.updateManifest(n,r),0)):be.u(0)})},I=!1,Z(q,2),!z0(d)||!I||fw(d)){q.u(4);break}return k(q,E(t.filter(function(N){return N.h}),!0),5);case 5:return ao(e),t=t.filter(function(N){return!N.h}),A=S,R=T,S={},T=0,k(q,uw(c,n,r,A,R,function(){return ao(e)}),6);case 6:ao(e);case 4:if(I){q.u(7);break}return k(q,E(t,!1),8);case 8:return ao(e),D=S,L=T,S={},T=0,k(q,uw(c,n,r,D,L,function(){return ao(e)}),9);case 9:ao(e);case 7:K(q,0);break;case 2:return F=ne(q),U=Object.values(S),k(q,c.removeSegments(U,function(){}),10);case 10:throw F}})}function lw(e){var t,n,r,a;return z(function(u){switch(u.g){case 1:return t=new Mo,k(u,t.init(),2);case 2:return k(u,Y2(t),3);case 3:return n=u.h,r=new Gi("manifest",n.path.nb,n.path.Ja,e),k(u,t.destroy(),4);case 4:return a=new to,k(u,a.remove(r.toString()),0)}})}function uw(e,t,n,r,a,u){var c,d,p,S,T,E,I,A,R,D,L;return z(function(F){switch(F.g){case 1:for(c=!1,Z(F,2),d=!0,p=b(n.streams),S=p.next();!S.done;S=p.next())for(T=S.value,E=b(T.segments),I=E.next();!I.done;I=E.next())A=I.value,R=A.pendingSegmentRefId?r[A.pendingSegmentRefId]:null,R!=null&&(A.dataKey=R,A.pendingSegmentRefId=void 0),R=A.pendingInitSegmentRefId?r[A.pendingInitSegmentRefId]:null,R!=null&&(A.initSegmentKey=R,A.pendingInitSegmentRefId=void 0),A.pendingSegmentRefId&&(d=!1),A.pendingInitSegmentRefId&&(d=!1);return n.size+=a,d&&(n.isIncomplete=!1),k(F,e.updateManifest(t,n),4);case 4:c=!0,u(),K(F,0);break;case 2:return D=ne(F),k(F,lw(t),5);case 5:if(c){F.u(6);break}return L=Object.values(r),k(F,e.removeSegments(L,function(){}),6);case 6:throw D}})}function dI(e,t,n){var r,a,u,c,d,p,S,T,E,I,A,R,D,L,F,U,q,N,G,Q,re,ae,me,le,ue,de,be,Ce,ke;return z(function(Oe){switch(Oe.g){case 1:return r={width:1/0,height:1/0},hb(e,n.restrictions,r),k(Oe,Gg(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(a=[],u=n.preferredDecodingAttributes,c=n.preferredVideoCodecs,d=n.preferredAudioCodecs,Vg(e,c,d,u),p=b(e.variants),S=p.next();!S.done;S=p.next())T=S.value,a.push(Us(T));for(E=b(e.textStreams),I=E.next();!I.done;I=E.next())A=I.value,a.push(hf(A));for(R=b(e.imageStreams),D=R.next();!D.done;D=R.next())L=D.value,a.push(_d(L));return k(Oe,n.offline.trackSelectionCallback(a),3);case 3:for(F=Oe.h,U=e.presentationTimeline.getDuration(),q=0,N=b(F),G=N.next();!G.done;G=N.next())Q=G.value,re=Q.bandwidth*U/8,q+=re;return Z(Oe,4),k(Oe,n.offline.downloadSizeCallback(q),6);case 6:if(ae=Oe.h,!ae)throw new se(2,9,9014);K(Oe,5);break;case 4:throw me=ne(Oe),me instanceof se?me:new se(2,9,9015);case 5:for(le=new Set,ue=new Set,de=new Set,be=b(F),Ce=be.next();!Ce.done;Ce=be.next())ke=Ce.value,ke.type=="variant"&&le.add(ke.id),ke.type=="text"&&ue.add(ke.id),ke.type=="image"&&de.add(ke.id);e.variants=e.variants.filter(function(Ie){return le.has(Ie.id)}),e.textStreams=e.textStreams.filter(function(Ie){return ue.has(Ie.id)}),e.imageStreams=e.imageStreams.filter(function(Ie){return de.has(Ie.id)}),AI(e),V(Oe)}})}function pI(e,t,n,r,a,u){var c=aI(n,t,r),d=a.offline.progressCallback;$3(u,function(A,R){c.size=R,d(c,A)},function(A,R){p&&a.offline.usePersistentLicense&&S==R&&Sl(e,"cenc",A)});var p=z0(t)&&!fw(t),S=null;p&&(S=II.get(e.g.keySystem));for(var T=new lI,E=b(t.textStreams),I=E.next();!I.done;I=E.next())T.g[I.value.id]=52;for(E=b(t.imageStreams),I=E.next();!I.done;I=E.next())fI(T,I.value);for(E=b(t.variants),I=E.next();!I.done;I=E.next())uI(T,I.value);return T=SI(u,T,t,a),u=T.streams,T=T.Xf,E=e.g,I=a.offline.usePersistentLicense,E&&I&&(E.initData=[]),{ui:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ad(),streams:u,sessionIds:I?Ry(e):[],drmInfo:E,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Xf:T}}function z0(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function fw(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function cw(e,t,n,r){if(t.expiration=n.ad(),n=Ry(n),t.sessionIds=r.offline.usePersistentLicense?n:[],z0(e)&&r.offline.usePersistentLicense&&!n.length)throw new se(2,9,9007)}w.remove=function(e){return V0(this,mI(this,e))};function mI(e,t){var n,r,a,u,c,d;return z(function(p){switch(p.g){case 1:if(Xc(),n=j0(t),n==null||n.g!="manifest")throw new se(2,9,9004,t);return r=n,a=new Mo,oe(p,2),k(p,a.init(),4);case 4:return k(p,Hc(a,r.nb(),r.Ja()),5);case 5:return u=p.h,k(p,u.getManifests([r.key()]),6);case 6:return c=p.h,d=c[0],k(p,Promise.all([gI(e,d,a),yI(u,r,d)]),2);case 2:return W(p),k(p,a.destroy(),8);case 8:J(p,0)}})}function hw(e,t){for(var n=[],r=b(e.streams),a=r.next();!a.done;a=r.next())a=a.value,t&&a.type=="video"?n.push({contentType:Vn(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||a.type!="audio"||n.push({contentType:Vn(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function gI(e,t,n){return z(function(r){return k(r,kI(e.g,e.h.drm,n,t),0)})}function yI(e,t,n){function r(){}var a=EI(n);return F0(t,n),Promise.all([e.removeSegments(a,r),e.removeManifests([t.key()],r)])}w.Li=function(){return V0(this,vI(this))};function vI(e){var t,n,r,a,u,c,d,p,S,T;return z(function(E){switch(E.g){case 1:return Xc(),t=e.g,n=e.h.drm,r=new Mo,a=!1,oe(E,2),k(E,r.init(),4);case 4:u=[],X3(r,function(I){return u.push(I)}),c=b(u),d=c.next();case 5:if(d.done){E.u(2);break}return p=d.value,k(E,p.getAll(),8);case 8:return S=E.h,k(E,rw(n,t,S),9);case 9:return T=E.h,k(E,p.remove(T),10);case 10:T.length!=S.length&&(a=!0),d=c.next(),E.u(5);break;case 2:return W(E),k(E,r.destroy(),11);case 11:J(E,3);break;case 3:return E.return(!a)}})}w.list=function(){return V0(this,xI())};function xI(){var e,t,n;return z(function(r){switch(r.g){case 1:return Xc(),e=[],t=new Mo,oe(r,2),k(r,t.init(),4);case 4:return n=Promise.resolve(),W3(t,function(a,u){n=n.then(function(){var c;return z(function(d){if(d.g==1)return k(d,u.getAllManifests(),2);c=d.h,c.forEach(function(p,S){p=F0(new Gi("manifest",a.nb,a.Ja,S),p),e.push(p)}),V(d)})})}),k(r,n,2);case 2:return W(r),k(r,t.destroy(),6);case 6:J(r,3);break;case 3:return r.return(e)}})}function wI(e,t,n,r){var a,u,c,d,p;return z(function(S){if(S.g==1)return a=null,u=e.g,c={networkingEngine:u,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(T){a=T},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){}},n.configure(r.manifest),ao(e),k(S,n.start(t,c),2);if(S.g!=3)return d=S.h,ao(e),p=dw(d),k(S,Promise.all(Od(p,function(T){return T.createSegmentIndex()})),3);if(ao(e),a)throw a;return S.return(d)})}w.yc=function(e,t,n){var r=this,a;return z(function(u){return u.g==1?(a=new kf({Lb:r.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a.configure(n.drm),k(u,zb(a,e.variants,n.offline.usePersistentLicense),2)):u.g!=3?k(u,_y(a),3):u.return(a)})};function SI(e,t,n,r){var a=new Map,u=dw(n),c=new Map;u=b(u);for(var d=u.next();!d.done;d=u.next()){d=d.value;var p=CI(e,t,n,d,r,a);c.set(d.id,p)}for(e=b(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&c.get(t.audio.id).variantIds.push(t.id),t.video&&c.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(c.values()),Xf:Array.from(a.values())}}function CI(e,t,n,r,a,u){var c={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},d=a.offline.numberOfParallelDownloads,p=0;return TI(r,n.presentationTimeline.mb(),function(S){var T=P0(S),E=void 0;if(!u.has(T)){var I=S.endTime-S.startTime;I=aw(t,r.id)*I,I=G2(e.g,I),u.set(T,new V2(S,I,p,!1))}S.$&&(E=P0(S.$),u.has(E)||(I=.5*aw(t,r.id),I=G2(e.g,I),u.set(E,new V2(S.$,I,p,!0)))),c.segments.push({pendingInitSegmentRefId:E,initSegmentKey:E?0:null,startTime:S.startTime,endTime:S.endTime,appendWindowStart:S.appendWindowStart,appendWindowEnd:S.appendWindowEnd,timestampOffset:S.timestampOffset,tilesLayout:S.tilesLayout,pendingSegmentRefId:T,dataKey:0,mimeType:S.mimeType,codecs:S.codecs}),p=(p+1)%d}),c}function TI(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function ao(e){if(e.l.g)throw new se(2,9,7001)}function Xc(){if(!$0())throw new se(2,9,9e3)}function V0(e,t){return z(function(n){return n.g==1?(e.i.push(t),oe(n,2),k(n,t,4)):n.g!=2?n.return(n.h):(W(n),jt(e.i,t),J(n,0))})}function bI(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){jt(e.i,n)})}function EI(e){var t=new Set;e=b(e.streams);for(var n=e.next();!n.done;n=e.next()){n=b(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function kI(e,t,n,r){var a,u,c;return z(function(d){return d.g==1?r.drmInfo?(a=K3(n),u=r.sessionIds.map(function(p){return{sessionId:p,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:hw(r,!1),videoCapabilities:hw(r,!0)}}),k(d,rw(t,e,u),2)):d.return():d.g!=3?(c=d.h,k(d,a.remove(c),3)):k(d,a.add(u.filter(function(p){return!c.includes(p.sessionId)})),0)})}function dw(e){for(var t=new Set,n=b(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=b(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=b(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function AI(e){e.variants.map(function(u){return u.video});var t=new Set(e.variants.map(function(u){return u.audio}));e=e.textStreams;for(var n=b(t),r=n.next();!r.done;r=n.next()){r=b(t);for(var a=r.next();!a.done;a=r.next());}for(t=b(e),n=t.next();!n.done;n=t.next())for(n=b(e),r=n.next();!r.done;r=n.next());}we("shaka.offline.Storage",to),to.deleteAll=function(){var e;return z(function(t){return t.g==1?(e=new Mo,oe(t,2),k(t,q3(e),2)):t.g!=5?(W(t),k(t,e.destroy(),5)):J(t,0)})},to.prototype.list=to.prototype.list,to.prototype.removeEmeSessions=to.prototype.Li,to.prototype.remove=to.prototype.remove,to.prototype.store=to.prototype.store,to.prototype.getNetworkingEngine=to.prototype.xb,to.prototype.getConfiguration=to.prototype.getConfiguration,to.prototype.configure=to.prototype.configure,to.prototype.destroy=to.prototype.destroy,to.support=$0;var II=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");zp.offline=$0;function oo(){}function So(e,t){for(e={priority:t||0,callback:e},t=0;t<uu.length;t++)if(uu[t].priority<e.priority){uu.splice(t,0,e);return}uu.push(e)}we("shaka.polyfill",oo),oo.register=So,oo.installAll=function(){for(var e=b(uu),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){je("Error installing polyfill!",n)}}};var uu=[];function fu(){this.g=new ds}function pw(){h.AbortController||(h.AbortController=fu,h.AbortSignal=ds)}fu.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new $e("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},y.Object.defineProperties(fu.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),oo.AbortController=fu,fu.install=pw;function ds(){this.h=!1,this.g=void 0,this.onabort=null,this.i=new Xt}ds.prototype.addEventListener=function(e,t,n){return this.i.addEventListener(e,t,n)},ds.prototype.removeEventListener=function(e,t,n){return this.i.removeEventListener(e,t,n)},ds.prototype.dispatchEvent=function(e){return this.i.dispatchEvent(e)},ds.prototype.throwIfAborted=function(){if(this.h)throw this.g},y.Object.defineProperties(ds.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),So(pw);function mw(){}function gw(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=b(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())MI(t.value)}function MI(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}oo.Aria=mw,mw.install=gw,So(gw);function yw(){}function vw(){NS()}oo.EncryptionScheme=yw,yw.install=vw,So(vw,-2);function xw(){}function ww(){if(h.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Ea),document.addEventListener("webkitfullscreenerror",Ea),document.addEventListener("mozfullscreenchange",Ea),document.addEventListener("mozfullscreenerror",Ea),document.addEventListener("MSFullscreenChange",Ea),document.addEventListener("MSFullscreenError",Ea)}}function Ea(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}oo.Fullscreen=xw,xw.install=ww,So(ww);function Kc(){}function Sw(){var e=!0;!Wo()||Wo()&&af()||Wo()&&Qt("Fuchsia")||(e=!1),(Ms()||rf()||$i()||Fi()||ji()||Qt("PC=EOS")||sf())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Cw=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=_I)}function _I(e){var t,n,r,a,u,c,d,p,S,T,E;return z(function(I){switch(I.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,r=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(a=n.contentType,u=cl(a),!u)||r&&(c=r.contentType,d=cl(c),!d))return I.return(t)}else return I.return(t);I.u(2);break}if(!Ii())return I.return(t);if(!n){I.u(3);break}return k(I,RI(n),4);case 4:if(p=I.h,!p)return I.return(t);case 3:if(r){var A=r.contentType;if(Wo()&&r.spatialRendering&&(A+="; spatialRendering=true"),S=ct(A),!S)return I.return(t)}case 2:return e.keySystemConfiguration?(T=e.keySystemConfiguration,k(I,LI(n,r,T),6)):(t.supported=!0,I.return(t));case 6:(E=I.h)&&(t.supported=!0,t.keySystemAccess=E);case 5:return I.return(t)}})}function RI(e){var t,n;return z(function(r){return r.g==1?Wo()?k(r,DI(e),3):ji()?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width,t+="; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.bitrate&&(t+="; bitrate="+e.bitrate),r.return(ct(t))):r.u(2):r.g!=2?(n=r.h,r.return(n)):r.return(ct(e.contentType))})}function LI(e,t,n){var r,a,u,c,d,p,S,T,E;return z(function(I){switch(I.g){case 1:if(r=[],a=[],n.audio&&(u={robustness:n.audio.robustness||"",contentType:t.contentType},ji()&&t.contentType.includes('codecs="ac-3"')&&(u.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(u.encryptionScheme=n.audio.encryptionScheme),r.push(u)),n.video&&(c={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(c.encryptionScheme=n.video.encryptionScheme),a.push(c)),d={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(d.audioCapabilities=r),a.length&&(d.videoCapabilities=a),p=e?e.contentType:"",S=t?t.contentType:"",T=n.keySystem,E=null,Z(I,2),tf.has(p+"#"+S+"#"+T)){E=tf.get(p+"#"+S+"#"+T)||null,I.u(4);break}return k(I,navigator.requestMediaKeySystemAccess(n.keySystem,[d]),5);case 5:E=I.h,tf.set(p+"#"+S+"#"+T,E);case 4:K(I,3);break;case 2:ne(I);case 3:return I.return(E)}})}function DI(e){var t,n;return z(function(r){return r.g==1?h.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.transferFunction==="pq"&&(t+="; eotf=smpte2084"),n=!1,t in qc?(n=qc[t],r.u(2)):k(r,cast.__platform__.canDisplayType(t),3)):r.return(ct(e.contentType)):(r.g!=2&&(n=r.h,qc[t]=n),r.return(n))})}oo.MediaCapabilities=Kc,Kc.install=Sw;var Cw=null;Kc.originalMcap=Cw;var qc={};Kc.memoizedCanDisplayTypeRequests_=qc,So(Sw,-1);function Tw(){}function bw(){var e=_s();(h.MediaSource||h.ManagedMediaSource)&&(e&&h.MediaSource?10>=e?h.MediaSource=null:12>=e?(H0(),Ew()):15>=e&&H0():Qt("DT_STB_BCM")?(H0(),Ew()):(nf()||dl()||Qt("Tizen 4"))&&OI()),(h.MediaSource||h.ManagedMediaSource)&&PI(),h.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&NI()}function H0(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Me.apply(0,arguments));return t.abort=function(){},t}}function Ew(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function PI(){if(h.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return uf(n)!="mp2t"&&e(n)}}if(h.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);h.ManagedMediaSource.isTypeSupported=function(n){return uf(n)!="mp2t"&&t(n)}}}function OI(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Ps(n)!="opus"&&e(n)},h.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);h.ManagedMediaSource.isTypeSupported=function(n){return Ps(n)!="opus"&&t(n)}}}function NI(){var e=MediaSource.isTypeSupported;Fi()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(c){return c.startsWith("codecs=")});if(0>r)return e(t);var a=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),u=a.findIndex(function(c){return c.startsWith("vp09")});return 0<=u&&(a[u]="vp9",n[r]='codecs="'+a.join(",")+'"',t=n.join("; ")),e(t)})}oo.MediaSource=Tw,Tw.install=bw,So(bw);function kw(){}function Aw(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?UI():h.orientation!=null&&BI())}function UI(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function BI(){function e(){switch(h.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new Yc;screen.orientation=t,e(),h.addEventListener("orientationchange",function(){e();var n=new $e("change");t.dispatchEvent(n)})}oo.Orientation=kw,kw.install=Aw;function Yc(){Xt.call(this),this.type="",this.angle=0}X(Yc,Xt),Yc.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Yc.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},So(Aw);function G0(){}var W0,X0,K0,q0,Y0,Q0;function jI(e,t){try{var n=new Qc(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function FI(e){var t=this.mediaKeys;return t&&t!=e&&Iw(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Iw(e,this):Promise.resolve()}function $I(e){if(e=Ae(e.initData),wt(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ki(e.subarray(4),!0),e=Mi(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=ie(e),this.dispatchEvent(t)}oo.PatchedMediaKeysApple=G0,G0.uninstall=function(){W0&&(W0=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",X0),HTMLMediaElement.prototype.setMediaKeys=K0,h.MediaKeys=q0,h.MediaKeySystemAccess=Y0,navigator.requestMediaKeySystemAccess=Q0,X0=Q0=K0=Y0=q0=null,h.shakaMediaKeysPolyfill="")},G0.install=function(e){h.HTMLVideoElement&&h.WebKitMediaKeys&&(e!==void 0&&e&&(W0=!0,X0=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),K0=HTMLMediaElement.prototype.setMediaKeys,q0=h.MediaKeys,Y0=h.MediaKeySystemAccess,Q0=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=FI,h.MediaKeys=cu,h.MediaKeySystemAccess=Qc,navigator.requestMediaKeySystemAccess=jI,h.shakaMediaKeysPolyfill=zI)};function Qc(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=b(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,a=!1;if(n.audioCapabilities)for(var u=b(n.audioCapabilities),c=u.next();!c.done;c=u.next())c=c.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.audioCapabilities.push(c),a=!0));if(n.videoCapabilities)for(n=b(n.videoCapabilities),u=n.next();!u.done;u=n.next())u=u.value,u.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0])&&(t.videoCapabilities.push(u),a=!0));r||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=a?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Qc.prototype.createMediaKeys=function(){var e=new cu(this.keySystem);return Promise.resolve(e)},Qc.prototype.getConfiguration=function(){return this.g};function cu(e){this.h=new WebKitMediaKeys(e),this.g=new Ct}cu.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Z0(this.h)},cu.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function Iw(e,t){if(e.g.Ra(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",$I);try{return Qs(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}cu.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Z0(e){Xt.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Ct,this.sessionId="",this.expiration=NaN,this.closed=new Zt,this.keyStatuses=new Mw}X(Z0,Xt),w=Z0.prototype,w.generateRequest=function(e,t){var n=this;this.h=new Zt;try{var r=this.l.createSession("video/mp4",Ae(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(a){n.h&&(n.h.resolve(),n.h=null),a=new Map().set("messageType",n.keyStatuses.Yb()==null?"license-request":"license-renewal").set("message",ie(a.message)),a=new $e("message",a),n.dispatchEvent(a)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(Zc(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var a=Error("EME PatchedMediaKeysApple key error");if(a.errorCode=n.i.error,n.h!=null)n.h.reject(a),n.h=null;else if(n.g!=null)n.g.reject(a),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Zc(n,"output-not-allowed");break;default:Zc(n,"internal-error")}}),Zc(this,"status-pending")}catch(a){this.h.reject(a)}return this.h},w.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},w.update=function(e){this.g=new Zt;try{this.i.update(Ae(e))}catch(t){this.g.reject(t)}return this.g},w.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ra()}catch(e){this.closed.reject(e)}return this.closed},w.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Zc(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new $e("keystatuseschange"),e.dispatchEvent(t)}function Mw(){this.size=0,this.g=void 0}w=Mw.prototype,w.Yb=function(){return this.g},w.forEach=function(e){this.g&&e(this.g,ef.value())},w.get=function(e){if(this.has(e))return this.g},w.has=function(e){var t=ef.value();return!!(this.g&&Rn(e,t))},w.entries=function(){},w.keys=function(){},w.values=function(){};var zI="apple";function _w(){}function Rw(){h.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||dl()||Qt("Tizen 4")||Qt("Tizen 5.0")||of())&&(MediaKeys.prototype.setServerCertificate=VI)}function VI(){return Promise.resolve(!1)}oo.PatchedMediaKeysCert=_w,_w.install=Rw,So(Rw);function Lw(){}function Dw(){!h.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=HI,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=GI,h.MediaKeys=Jc,h.MediaKeySystemAccess=J0,h.shakaMediaKeysPolyfill=WI)}function HI(){return Promise.reject(Error("The key system specified is not supported."))}function GI(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}oo.PatchedMediaKeysNop=Lw,Lw.install=Dw;function Jc(){throw new TypeError("Illegal constructor.")}Jc.prototype.createSession=function(){},Jc.prototype.setServerCertificate=function(){},Jc.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function J0(){throw this.keySystem="",new TypeError("Illegal constructor.")}J0.prototype.getConfiguration=function(){},J0.prototype.createMediaKeys=function(){};var WI="nop";So(Dw,-10);function Pw(){}function Ow(){if(!(!h.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)im="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=XI,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=KI,h.MediaKeys=hu,h.MediaKeySystemAccess=eh,h.shakaMediaKeysPolyfill=qI}}function em(e){var t=im;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function XI(e,t){try{var n=new eh(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function KI(e){var t=this.mediaKeys;return t&&t!=e&&Nw(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Nw(e,this),Promise.resolve()}oo.PatchedMediaKeysWebkit=Pw,Pw.install=Ow;function eh(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,a=document.getElementsByTagName("video");a=a.length?a[0]:document.createElement("video"),t=b(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var c={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:u.initDataTypes,sessionTypes:["temporary"],label:u.label},d=!1;if(u.audioCapabilities)for(var p=b(u.audioCapabilities),S=p.next();!S.done;S=p.next())S=S.value,S.contentType&&(d=!0,a.canPlayType(S.contentType.split(";")[0],this.g)&&(c.audioCapabilities.push(S),r=!0));if(u.videoCapabilities)for(p=b(u.videoCapabilities),S=p.next();!S.done;S=p.next())S=S.value,S.contentType&&(d=!0,a.canPlayType(S.contentType,this.g)&&(c.videoCapabilities.push(S),r=!0));if(d||(r=a.canPlayType("video/mp4",this.g)||a.canPlayType("video/webm",this.g)),u.persistentState=="required"&&(n?(c.persistentState="required",c.sessionTypes=["persistent-license"]):r=!1),r){this.h=c;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}eh.prototype.createMediaKeys=function(){var e=new hu(this.g);return Promise.resolve(e)},eh.prototype.getConfiguration=function(){return this.h};function hu(e){this.l=e,this.h=null,this.g=new Ct,this.i=[],this.j=new Map}function Nw(e,t){e.h=t,e.g.Ra();var n=im;t&&(e.g.D(t,n+"needkey",function(r){var a=new CustomEvent("encrypted");a.initDataType="cenc",a.initData=ie(r.initData),e.h.dispatchEvent(a)}),e.g.D(t,n+"keymessage",function(r){var a=tm(e,r.sessionId);a&&(r=new Map().set("messageType",a.keyStatuses.Yb()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new $e("message",r),a.h&&(a.h.resolve(),a.h=null),a.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=tm(e,r.sessionId))&&r.ready()}),e.g.D(t,n+"keyerror",function(r){var a=tm(e,r.sessionId);if(a){var u=Error("EME v0.1b key error"),c=r.errorCode;c.systemCode=r.systemCode,u.errorCode=c,!r.sessionId&&a.h?(r.systemCode==45&&(u.message="Unsupported session type."),a.h.reject(u),a.h=null):r.sessionId&&a.g?(a.g.reject(u),a.g=null):(u=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?th(a,"output-restricted"):u==1?th(a,"expired"):th(a,"internal-error"))}}))}hu.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new nm(t,this.l,e),this.i.push(e),e},hu.prototype.setServerCertificate=function(){return Promise.resolve(!1)},hu.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function tm(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function nm(e,t,n){Xt.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Zt,this.keyStatuses=new Bw}X(nm,Xt),w=nm.prototype,w.ready=function(){th(this,"usable"),this.g&&this.g.resolve(),this.g=null};function Uw(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=Ae(Mi("LOAD_SESSION|"+n));else{var a=Mi("PERSISTENT|");r=An(a,t)}else r=Ae(t)}catch(c){return Promise.reject(c)}e.h=new Zt;var u=em("generateKeyRequest");try{e.j[u](e.i,r)}catch(c){if(c.name!="InvalidStateError")return e.h=null,Promise.reject(c);new Mt(function(){try{e.j[u](e.i,r)}catch(d){e.h.reject(d),e.h=null}}).Y(.01)}return e.h}function om(e,t,n){if(e.g)e.g.then(function(){return om(e,t,n)}).catch(function(){return om(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=fn(n),a=JSON.parse(r);a.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=ri(a.keys[0].k),a=ri(a.keys[0].kid)}else r=Ae(n),a=null;var u=em("addKey");try{e.j[u](e.i,r,a,e.sessionId)}catch(c){e.g.reject(c),e.g=null}}}function th(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new $e("keystatuseschange"),e.dispatchEvent(t)}w.generateRequest=function(e,t){return Uw(this,t,null)},w.load=function(e){return this.l=="persistent-license"?Uw(this,null,e):Promise.reject(Error("Not a persistent session."))},w.update=function(e){var t=new Zt;return om(this,t,e),t},w.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=em("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},w.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function Bw(){this.size=0,this.g=void 0}w=Bw.prototype,w.Yb=function(){return this.g},w.forEach=function(e){this.g&&e(this.g,ef.value())},w.get=function(e){if(this.has(e))return this.g},w.has=function(e){var t=ef.value();return!!(this.g&&Rn(e,t))},w.entries=function(){},w.keys=function(){},w.values=function(){};var im="",qI="webkit";So(Ow);function jw(){}function Fw(){if(h.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=QI,Object.defineProperty(e,"disablePictureInPicture",{get:JI,set:eM,enumerable:!0,configurable:!0}),document.exitPictureInPicture=ZI,document.addEventListener("webkitpresentationmodechanged",YI,!0))}}function YI(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function QI(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function ZI(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function JI(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function eM(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}oo.PiPWebkit=jw,jw.install=Fw,So(Fw);function $w(){}function zw(){h.crypto&&("randomUUID"in h.crypto||(h.crypto.randomUUID=tM))}function tM(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}oo.RandomUUID=$w,$w.install=zw,So(zw);function Vw(){}function Hw(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:nM})}function nM(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}oo.Symbol=Vw,Vw.install=Hw,So(Hw);function Gw(){}function Ww(){if(h.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}oo.VideoPlayPromise=Gw,Gw.install=Ww,So(Ww);function Xw(){}function Kw(){if(h.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||of())&&(e.getVideoPlaybackQuality=oM)}}function oM(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}oo.VideoPlaybackQuality=Xw,Xw.install=Kw,So(Kw);function qw(){}function Yw(){if(!h.VTTCue&&h.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=rm;else if(t==6)e=iM;else{try{var n=!!rm(1,2,"")}catch{n=!1}n&&(e=rm)}e&&(h.VTTCue=function(r,a,u){return e(r,a,u)})}}function rm(e,t,n){return new h.TextTrackCue(e,t,n)}function iM(e,t,n){return new h.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}oo.VTTCue=qw,qw.install=Yw,So(Yw);function qo(){}qo.prototype.parseInit=function(){},qo.prototype.setSequenceMode=function(){},qo.prototype.setManifestType=function(){},qo.prototype.parseMedia=function(e,t){var n=null,r=[];e=fn(e).split(/\r?\n/),e=b(e);for(var a=e.next();!a.done;a=e.next())if((a=a.value)&&!/^\s+$/.test(a)&&(a=rM.exec(a))){var u=sM.exec(a[1]);u=60*parseInt(u[1],10)+parseFloat(u[2].replace(",",".")),a=new Be(u,t.segmentEnd?t.segmentEnd:u+2,a[2]),n&&(n.endTime=u,r.push(n)),n=a}return n&&r.push(n),r},we("shaka.text.LrcTextParser",qo),qo.prototype.parseMedia=qo.prototype.parseMedia,qo.prototype.setManifestType=qo.prototype.setManifestType,qo.prototype.setSequenceMode=qo.prototype.setSequenceMode,qo.prototype.parseInit=qo.prototype.parseInit;var rM=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,sM=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Hn["application/x-subtitle-lrc"]=function(){return new qo};function Fo(){}Fo.prototype.parseInit=function(){},Fo.prototype.setSequenceMode=function(){},Fo.prototype.setManifestType=function(){},Fo.prototype.parseMedia=function(e,t,n){var r=fn(e);if(e=[],r=="")return e;var a=Gs(r,"tt");if(!a)throw new se(2,2,2005,"Failed to parse TTML.");if(r=wi(a,"body")[0],!r)return[];var u=Vi(a,du,"frameRate"),c=Vi(a,du,"subFrameRate"),d=Vi(a,du,"frameRateMultiplier"),p=Vi(a,du,"tickRate"),S=Vi(a,du,"cellResolution"),T=a.attributes["xml:space"]||"default",E=Vi(a,ih,"extent");if(T!="default"&&T!="preserve")throw new se(2,2,2005,"Invalid xml:space value: "+T);T=T=="default",u=new uM(u,c,d,p),S=S&&(S=/^(\d+) (\d+)$/.exec(S))?{dc:parseInt(S[1],10),rows:parseInt(S[2],10)}:null,c=(c=wi(a,"metadata")[0])?c.children:[],d=wi(a,"style"),a=wi(a,"region"),p=[];for(var I=b(a),A=I.next();!A.done;A=I.next()){var R=A.value;A=new xe;var D=R.attributes["xml:id"];if(D){A.id=D;var L=null;E&&(L=um.exec(E)||fm.exec(E)),D=L?Number(L[1]):null,L=L?Number(L[2]):null;var F,U=nh(R,d,"extent");if(U){var q=(F=um.exec(U))||fm.exec(U);q!=null&&(A.width=Number(q[1]),A.height=Number(q[2]),F||(D!=null&&(A.width=100*A.width/D),L!=null&&(A.height=100*A.height/L)),A.widthUnits=F||D!=null?ce:0,A.heightUnits=F||L!=null?ce:0)}(R=nh(R,d,"origin"))&&(q=(F=um.exec(R))||fm.exec(R),q!=null&&(A.viewportAnchorX=Number(q[1]),A.viewportAnchorY=Number(q[2]),F?U||(A.width=100-A.viewportAnchorX,A.widthUnits=ce,A.height=100-A.viewportAnchorY,A.heightUnits=ce):(L!=null&&(A.viewportAnchorY=100*A.viewportAnchorY/L),D!=null&&(A.viewportAnchorX=100*A.viewportAnchorX/D)),A.viewportAnchorUnits=F||D!=null?ce:0))}else A=null;A&&p.push(A)}if(on(r,"p").length)throw new se(2,2,2001,"<p> can only be inside <div> in TTML");for(E=b(on(r,"div")),I=E.next();!I.done;I=E.next())if(on(I.value,"span").length)throw new se(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Qw(r,t,u,c,d,a,p,T,S,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function Qw(e,t,n,r,a,u,c,d,p,S,T,E){var I=S;if(Sf(e)){if(!T)return null;var A={tagName:"span",children:[Gn(e)],attributes:{},parent:null}}else A=e;for(var R=null,D=b(aS),L=D.next();!L.done&&!(R=oh(A,"backgroundImage",r,"#",L.value)[0]);L=D.next());D=null;var F=Vi(A,aS,"backgroundImage");if(E&&F&&!F.startsWith("#")&&(L=new Ln(E),F=new Ln(F),(L=L.resolve(F).toString())&&(D=L)),(e.tagName=="p"||R||D)&&(T=!0),e=T,L=(A.attributes["xml:space"]||(d?"default":"preserve"))=="default",F=A.children.every(Sf),d=[],!F)for(var U=b(A.children),q=U.next();!q.done;q=U.next())(q=Qw(q.value,t,n,r,a,u,c,L,p,A,T,E))&&d.push(q);if(r=S!=null,E=Gn(A),E=A.children.length&&E&&/\S/.test(E),q=A.attributes.begin||A.attributes.end||A.attributes.dur,!(q||E||A.tagName=="br"||d.length!=0||r&&!L))return null;for(U=eS(A,n),E=U.start,U=U.end;I&&I.tagName&&I.tagName!="tt";)U=lM(I,n,E,U),E=U.start,U=U.end,I=I.parent;if(E==null&&(E=0),E+=t.periodStart,U=U==null?1/0:U+t.periodStart,E=Math.max(E,t.segmentStart),U=Math.min(U,t.segmentEnd),!q&&0<d.length)for(E=1/0,U=0,t=b(d),n=t.next();!n.done;n=t.next())n=n.value,E=Math.min(E,n.startTime),U=Math.max(U,n.endTime);if(A.tagName=="br")return a=new Be(E,U,""),a.lineBreak=!0,a;if(t="",F&&(t=bo(Gn(A)||""),L&&(t=t.replace(/\s+/g," "))),t=new Be(E,U,t),t.nestedCues=d,T||(t.isContainer=!0),p&&(t.cellResolution=p),p=oh(A,"region",u,"")[0],A.attributes.region&&p&&p.attributes["xml:id"]){var N=p.attributes["xml:id"];t.region=c.filter(function(G){return G.id==N})[0]}return c=p,S&&r&&!A.attributes.region&&!A.attributes.style&&(c=oh(S,"region",u,"")[0]),aM(t,A,c,R,D,a,e,d.length==0),t}function aM(e,t,n,r,a,u,c,d){if(c=c||d,lo(t,n,u,"direction",c)=="rtl"&&(e.direction="rtl"),d=lo(t,n,u,"writingMode",c),d=="tb"||d=="tblr"?e.writingMode="vertical-lr":d=="tbrl"?e.writingMode="vertical-rl":d=="rltb"||d=="rl"?e.direction="rtl":d&&(e.direction=fo),(d=lo(t,n,u,"textAlign",!0))?(e.positionAlign=hM[d],e.lineAlign=cM[d],e.textAlign=$n[d.toUpperCase()]):e.textAlign=gn,(d=lo(t,n,u,"displayAlign",!0))&&(e.displayAlign=kt[d.toUpperCase()]),(d=lo(t,n,u,"color",c))&&(e.color=d),(d=lo(t,n,u,"backgroundColor",c))&&(e.backgroundColor=d),(d=lo(t,n,u,"border",c))&&(e.border=d),d=lo(t,n,u,"fontFamily",c))switch(d){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=d.split(",").filter(function(p){return p!="default"}).join(",")}switch((d=lo(t,n,u,"fontWeight",c))&&d=="bold"&&(e.fontWeight=700),d=lo(t,n,u,"wrapOption",c),e.wrapLine=!(d&&d=="noWrap"),(d=lo(t,n,u,"lineHeight",c))&&d.match(ka)&&(e.lineHeight=d),(d=lo(t,n,u,"fontSize",c))&&(d.match(ka)||d.match(fM))&&(e.fontSize=d),(d=lo(t,n,u,"fontStyle",c))&&(e.fontStyle=ks[d.toUpperCase()]),r?(a=r.attributes.imageType||r.attributes.imagetype,d=r.attributes.encoding,r=Gn(r).trim(),a=="PNG"&&d=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):a&&(e.backgroundImage=a),(r=lo(t,n,u,"textOutline",c))&&(r=r.split(" "),r[0].match(ka)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(ka)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=lo(t,n,u,"letterSpacing",c))&&r.match(ka)&&(e.letterSpacing=r),(r=lo(t,n,u,"linePadding",c))&&r.match(ka)&&(e.linePadding=r),(r=lo(t,n,u,"opacity",c))&&(e.opacity=parseFloat(r)),(r=nh(n,u,"textDecoration"))&&Zw(e,r),(r=sm(t,u,"textDecoration"))&&Zw(e,r),(r=lo(t,n,u,"textCombine",c))&&(e.textCombineUpright=r),lo(t,n,u,"ruby",c)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function Zw(e,t){t=b(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&jt(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&jt(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&jt(e.textDecoration,"overline")}}function lo(e,t,n,r,a){return a=a===void 0?!0:a,(e=sm(e,n,r))?e:a?nh(t,n,r):null}function nh(e,t,n){if(!e)return null;var r=Vi(e,ih,n);return r||Jw(e,t,n)}function sm(e,t,n){var r=Vi(e,ih,n);return r||Jw(e,t,n)}function Jw(e,t,n){e=oh(e,"style",t,"");for(var r=null,a=0;a<e.length;a++){var u=tr(e[a],"urn:ebu:tt:style",n);u||(u=Vi(e[a],ih,n)),u||(u=sm(e[a],t,n)),u&&(r=u)}return r}function oh(e,t,n,r,a){var u=[];if(!e||1>n.length)return u;var c=e;for(e=null;!e&&!(e=a?tr(c,a,t):c.attributes[t])&&(c=c.parent,c););if(t=e){for(t=b(t.split(" ")),a=t.next();!a.done;a=t.next())for(a=a.value,e=b(n),c=e.next();!c.done;c=e.next())if(c=c.value,r+c.attributes["xml:id"]==a){u.push(c);break}}return u}function lM(e,t,n,r){return e=eS(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function eS(e,t){var n=am(e.attributes.begin,t),r=am(e.attributes.end,t);return e=am(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function am(e,t){var n=null;if(tS.test(e)){e=tS.exec(e),n=Number(e[1]);var r=Number(e[2]),a=Number(e[3]),u=Number(e[4]);u+=(Number(e[5])||0)/t.h,a+=u/t.frameRate,n=a+60*r+3600*n}else if(nS.test(e))n=lm(nS,e);else if(oS.test(e))n=lm(oS,e);else if(iS.test(e))e=iS.exec(e),n=Number(e[1])/t.frameRate;else if(rS.test(e))e=rS.exec(e),n=Number(e[1])/t.g;else if(sS.test(e))n=lm(sS,e);else if(e)throw new se(2,2,2001,"Could not parse cue time range in TTML");return n}function lm(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}we("shaka.text.TtmlTextParser",Fo),Fo.prototype.parseMedia=Fo.prototype.parseMedia,Fo.prototype.setManifestType=Fo.prototype.setManifestType,Fo.prototype.setSequenceMode=Fo.prototype.setSequenceMode,Fo.prototype.parseInit=Fo.prototype.parseInit;function uM(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var um=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,fM=/^(\d{1,4}(?:\.\d+)?|100)%$/,ka=/^(\d+px|\d+em|\d*\.?\d+c)$/,fm=/^(\d+)px (\d+)px$/,tS=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,nS=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,oS=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,iS=/^(\d*(?:\.\d*)?)f$/,rS=/^(\d*(?:\.\d*)?)t$/,sS=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),cM={left:io,center:"center",right:"end",start:io,end:"end"},hM={left:"line-left",center:"center",right:"line-right"},du=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],ih=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],aS=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Hn["application/ttml+xml"]=function(){return new Fo};function no(){this.g=new Fo}no.prototype.parseInit=function(e){var t=!1;if(new tn().box("moov",Rt).box("trak",Rt).box("mdia",Rt).box("minf",Rt).box("stbl",Rt).S("stsd",Ar).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new se(2,2,2007)},no.prototype.setSequenceMode=function(){},no.prototype.setManifestType=function(){},no.prototype.parseMedia=function(e,t,n){var r=this,a=!1,u=[];if(new tn().box("mdat",Vs(function(c){a=!0,u=u.concat(r.g.parseMedia(c,t,n))})).parse(e,!1),!a)throw new se(2,2,2007);return u},we("shaka.text.Mp4TtmlParser",no),no.prototype.parseMedia=no.prototype.parseMedia,no.prototype.setManifestType=no.prototype.setManifestType,no.prototype.setSequenceMode=no.prototype.setSequenceMode,no.prototype.parseInit=no.prototype.parseInit,Hn['application/mp4; codecs="stpp"']=function(){return new no},Hn['application/mp4; codecs="stpp.ttml"']=function(){return new no},Hn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new no},Hn['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new no},Hn['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new no},Hn['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new no},Hn['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new no},Hn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new no};function Co(){this.h=!1,this.g="UNKNOWN"}Co.prototype.parseInit=function(){},Co.prototype.setSequenceMode=function(e){this.h=e},Co.prototype.setManifestType=function(e){this.g=e},Co.prototype.parseMedia=function(e,t){e=fn(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new se(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new se(2,2,2e3);if(e=rh(new Lr(e[1])),e==null)throw new se(2,2,2e3);r=Number(r[1]);for(var a=t.segmentStart-t.periodStart;95443.7176888889<=a;)a-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}else e=t.segmentStart;for(t=[],r=b(n[0].split(`
`)),a=r.next();!a.done;a=r.next())if(a=a.value,/^Region:/.test(a)){a=new Lr(a);var u=new xe;as(a),fa(a);for(var c=as(a);c;){var d=u,p=c;(c=/^id=(.*)$/.exec(p))?d.id=c[1]:(c=/^width=(\d{1,2}|100)%$/.exec(p))?d.width=Number(c[1]):(c=/^lines=(\d+)$/.exec(p))?(d.height=Number(c[1]),d.heightUnits=2):(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(d.regionAnchorX=Number(c[1]),d.regionAnchorY=Number(c[2])):(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(d.viewportAnchorX=Number(c[1]),d.viewportAnchorY=Number(c[2])):/^scroll=up$/.exec(p)&&(d.scroll="up"),fa(a),c=as(a)}t.push(u)}for(r=new Map,lS(r),a=[],n=b(n.slice(1)),u=n.next();!u.done;u=n.next()){if(u=u.value.split(`
`),(u.length!=1||u[0])&&!/^NOTE($|[ \t])/.test(u[0])&&u[0]=="STYLE"){for(d=[],c=-1,p=1;p<u.length;p++)u[p].includes("::cue")&&(d.push([]),c=d.length-1),c!=-1&&(d[c].push(u[p]),u[p].includes("}")&&(c=-1));for(d=b(d),c=d.next();!c.done;c=d.next()){var S=c.value;c="global",(p=S[0].match(/\((.*)\)/))&&(c=p.pop()),p=S.slice(1,-1),S[0].includes("}")&&(S=/\{(.*?)\}/.exec(S[0]))&&(p=S[1].split(";")),(S=r.get(c))||(S=new Be(0,0,""));for(var T=!1,E=0;E<p.length;E++){var I=/^\s*([^:]+):\s*(.*)/.exec(p[E]);if(I){var A=I[2].trim().replace(";","");switch(I[1].trim()){case"background-color":case"background":T=!0,S.backgroundColor=A;break;case"color":T=!0,S.color=A;break;case"font-family":T=!0,S.fontFamily=A;break;case"font-size":T=!0,S.fontSize=A;break;case"font-weight":(700<=parseInt(A,10)||A=="bold")&&(T=!0,S.fontWeight=700);break;case"font-style":switch(A){case"normal":T=!0,S.fontStyle=Ai;break;case"italic":T=!0,S.fontStyle="italic";break;case"oblique":T=!0,S.fontStyle="oblique"}break;case"opacity":T=!0,S.opacity=parseFloat(A);break;case"text-combine-upright":T=!0,S.textCombineUpright=A;break;case"text-shadow":T=!0,S.textShadow=A;break;case"white-space":T=!0,S.wrapLine=A!="noWrap"}}}T&&r.set(c,S)}}if(S=u,T=e,S.length==1&&!S[0]||/^NOTE($|[ \t])/.test(S[0])||S[0]=="STYLE"||S[0]=="REGION")u=null;else if(u=null,S[0].includes("-->")||(u=S[0],S.splice(0,1)),d=new Lr(S[0]),c=rh(d),E=ar(d,/[ \t]+--\x3e[ \t]+/g),p=rh(d),c==null||E==null||p==null)je("Failed to parse VTT time code. Cue skipped:",u,S),u=null;else{for(c+=T,p+=T,S=S.slice(1).join(`
`).trim(),r.has("global")?(T=r.get("global").clone(),T.startTime=c,T.endTime=p,T.payload=""):T=new Be(c,p,""),fa(d),c=as(d);c;)cS(T,c,t),fa(d),c=as(d);uS(S,T,r),u!=null&&(T.id=u),u=T}u&&a.push(u)}return a};function lS(e){for(var t=b(Object.entries(Tr)),n=t.next();!n.done;n=t.next()){var r=b(n.value);n=r.next().value,r=r.next().value;var a=new Be(0,0,"");a.color=r,e.set("."+n,a)}for(t=b(Object.entries(Ho)),n=t.next();!n.done;n=t.next())r=b(n.value),n=r.next().value,r=r.next().value,a=new Be(0,0,""),a.backgroundColor=r,e.set("."+n,a)}function uS(e,t,n){if(e.includes("<")){n.size===0&&lS(n);var r=e;e=[];for(var a=-1,u=0;u<r.length;u++)r[u]==="<"?a=u+1:r[u]===">"&&0<a&&(a=r.substr(a,u-a),a.match(hS)&&e.push(a),a=-1);for(e=b(e),u=e.next();!u.done;u=e.next())u=u.value,r=r.replace("<"+u+">",'<div time="'+u+'">'),r+="</div>";e=r;e:{u=e,a=[];var c=-1;e="",r=!1;for(var d=0;d<u.length;d++)if(u[d]==="/"){var p=u.indexOf(">",d);if(p===-1){e=u;break e}if((p=u.substring(d+1,p))&&p=="v"){r=!0;var S=null;if(a.length&&(S=a[a.length-1]),S){if(S===p)e+="/"+p+">";else{if(!S.startsWith("v")){e+=u[d];continue}e+="/"+S+">"}d+=p.length+1}else e+=u[d]}else e+=u[d]}else u[d]==="<"?(c=d+1,u[c]!="v"&&(c=-1)):u[d]===">"&&0<c&&(a.push(u.substr(c,d-c)),c=-1),e+=u[d];for(u=b(a),a=u.next();!a.done;a=u.next())a=a.value,c=a.replace(" ",".voice-"),e=e.replace("<"+a+">","<"+c+">"),e=e.replace("</"+a+">","</"+c+">"),r||(e+="</"+c+">")}e=dM(e);try{var T=Gs("<span>"+e+"</span>","span")}catch{}if(T)if(T=T.children,T.length!=1||T[0].tagName)for(T=b(T),e=T.next();!e.done;e=T.next())fS(e.value,t,n);else t.payload=bo(e);else t.payload=bo(e)}else t.payload=bo(e)}function dM(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(a){return t[a]||""}):e||""}function pu(e,t){return e&&0<e.length?e:t}function fS(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new xe,r.position=null,r.size=0,e.tagName)for(var a=b(e.tagName.split(/(?=[ .])+/g)),u=a.next();!u.done;u=a.next()){var c=u=u.value;if(c.startsWith(".voice-")){var d=c.split("-").pop();c='v[voice="'+d+'"]',n.has(c)||(c="v[voice="+d+"]")}switch(n.has(c)&&(d=r,c=n.get(c))&&(d.backgroundColor=pu(c.backgroundColor,d.backgroundColor),d.color=pu(c.color,d.color),d.fontFamily=pu(c.fontFamily,d.fontFamily),d.fontSize=pu(c.fontSize,d.fontSize),d.textShadow=pu(c.textShadow,d.textShadow),d.fontWeight=c.fontWeight,d.fontStyle=c.fontStyle,d.opacity=c.opacity,d.rubyTag=c.rubyTag,d.textCombineUpright=c.textCombineUpright,d.wrapLine=c.wrapLine),u){case"br":r=qe(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(u=e.attributes.color)&&(r.color=u);break;case"div":if(u=e.attributes.time,!u)break;(u=rh(new Lr(u)))&&(r.startTime=u);break;case"ruby":case"rp":case"rt":r.rubyTag=u}}if(a=e.children,Sf(e)||a.length==1&&Sf(a[0]))for(n=Gn(e).split(`
`),e=!0,n=b(n),a=n.next();!a.done;a=n.next())a=a.value,e||(e=qe(r.startTime,r.endTime),t.nestedCues.push(e)),0<a.length&&(e=r.clone(),e.payload=bo(a),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=b(a),e=t.next();!e.done;e=t.next())fS(e.value,r,n)}function cS(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=gn:e.textAlign=$n[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":wn)):(r=/^region:(.*)$/.exec(t))?(t=pM(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=_o[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Pe,e.line=Number(n[1]),n[2]&&(e.lineAlign=_o[n[2].toUpperCase()]))}function pM(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function rh(e){if(e=ar(e,hS),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}we("shaka.text.VttTextParser",Co),Co.prototype.parseMedia=Co.prototype.parseMedia,Co.prototype.setManifestType=Co.prototype.setManifestType,Co.prototype.setSequenceMode=Co.prototype.setSequenceMode,Co.prototype.parseInit=Co.prototype.parseInit;var hS=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;Hn["text/vtt"]=function(){return new Co},Hn['text/vtt; codecs="vtt"']=function(){return new Co},Hn['text/vtt; codecs="wvtt"']=function(){return new Co};function Yo(){this.g=null}Yo.prototype.parseInit=function(e){var t=this,n=!1;if(new tn().box("moov",Rt).box("trak",Rt).box("mdia",Rt).S("mdhd",function(r){r=If(r.reader,r.version),t.g=r.timescale}).box("minf",Rt).box("stbl",Rt).S("stsd",Ar).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new se(2,2,2008);if(!n)throw new se(2,2,2008)},Yo.prototype.setSequenceMode=function(){},Yo.prototype.setManifestType=function(){},Yo.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new se(2,2,2008);var n=0,r=[],a,u=[],c=!1,d=!1,p=!1,S=null;if(new tn().box("moof",Rt).box("traf",Rt).S("tfdt",function(q){c=!0,n=Af(q.reader,q.version).baseMediaDecodeTime}).S("tfhd",function(q){S=Yy(q.reader,q.flags).Yc}).S("trun",function(q){d=!0,r=Qy(q.reader,q.version,q.flags).Wg}).box("mdat",Vs(function(q){p=!0,a=q})).parse(e,!1),!p&&!c&&!d)throw new se(2,2,2008);e=n;for(var T=new en(a,0),E=b(r),I=E.next();!I.done;I=E.next()){I=I.value;var A=I.Jf||S,R=I.ne?n+I.ne:e;e=R+(A||0);var D=0;do{var L=T.P();D+=L;var F=T.P(),U=null;xf(F)=="vttc"?8<L&&(U=T.qb(L-8)):T.skip(L-8),A&&U&&(L=mM(U,t.periodStart+R/this.g,t.periodStart+e/this.g),u.push(L))}while(I.sampleSize&&D<I.sampleSize)}return u.filter(Jr)};function mM(e,t,n){var r,a,u;return new tn().box("payl",Vs(function(c){r=fn(c)})).box("iden",Vs(function(c){a=fn(c)})).box("sttg",Vs(function(c){u=fn(c)})).parse(e),r?gM(r,a,u,t,n):null}function gM(e,t,n,r,a){if(r=new Be(r,a,""),uS(e,r,new Map),t&&(r.id=t),n)for(e=new Lr(n),t=as(e);t;)cS(r,t,[]),fa(e),t=as(e);return r}we("shaka.text.Mp4VttParser",Yo),Yo.prototype.parseMedia=Yo.prototype.parseMedia,Yo.prototype.setManifestType=Yo.prototype.setManifestType,Yo.prototype.setSequenceMode=Yo.prototype.setSequenceMode,Yo.prototype.parseInit=Yo.prototype.parseInit,Hn['application/mp4; codecs="wvtt"']=function(){return new Yo};function Qo(){}Qo.prototype.parseInit=function(){},Qo.prototype.setSequenceMode=function(){},Qo.prototype.setManifestType=function(){},Qo.prototype.parseMedia=function(e){var t=fn(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=b(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var r=new Lr(n[0]),a=dS(r),u=ar(r,/,/g);if(r=dS(r),a==null||u==null||r==null)throw new se(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Be(a,r,n.slice(1).join(`
`).trim()))}return e};function dS(e){if(e=ar(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}we("shaka.text.SbvTextParser",Qo),Qo.prototype.parseMedia=Qo.prototype.parseMedia,Qo.prototype.setManifestType=Qo.prototype.setManifestType,Qo.prototype.setSequenceMode=Qo.prototype.setSequenceMode,Qo.prototype.parseInit=Qo.prototype.parseInit,Hn["text/x-subviewer"]=function(){return new Qo};function $o(){this.g=new Co}$o.prototype.parseInit=function(){},$o.prototype.setSequenceMode=function(){},$o.prototype.setManifestType=function(){},$o.prototype.parseMedia=function(e,t,n){return e=fn(e),e=pS(e),e=Ae(Mi(e)),this.g.parseMedia(e,t,n)};function pS(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=b(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}we("shaka.text.SrtTextParser",$o),$o.srt2webvtt=pS,$o.prototype.parseMedia=$o.prototype.parseMedia,$o.prototype.setManifestType=$o.prototype.setManifestType,$o.prototype.setSequenceMode=$o.prototype.setSequenceMode,$o.prototype.parseInit=$o.prototype.parseInit,Hn["text/srt"]=function(){return new $o};function Zo(){}Zo.prototype.parseInit=function(){},Zo.prototype.setSequenceMode=function(){},Zo.prototype.setManifestType=function(){},Zo.prototype.parseMedia=function(e){var t="",n="",r=null,a=null;for(a=fn(e).split(/\r?\n\s*\r?\n/),e=b(a),a=e.next();!a.done;a=e.next()){var u=a.value;a=u,(u=vM.exec(u))&&(r=u[1],a=u[2]),r=="V4 Styles"||r=="V4+ Styles"?(t=a,t=n?t+(`
`+a):a):r=="Events"&&(n=n?n+(`
`+a):a)}for(r=[],a=null,t=b(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(u=yS.exec(e))){if(e=u[1].trim(),u=u[2].trim(),e=="Format")a=u.split(sh);else if(e=="Style"){e=u.split(sh),u={};for(var c=0;c<a.length&&c<e.length;c++)u[a[c]]=e[c];r.push(u)}}for(a=[],t=null,n=b(n.split(/\r?\n/)),u=n.next(),e={};!u.done;e={jh:void 0},u=n.next())if(u=u.value,!/^\s*;/.test(u)&&(c=yS.exec(u))){if(u=c[1].trim(),c=c[2].trim(),u=="Format")t=c.split(sh);else if(u=="Dialogue"){c=c.split(sh),u={};for(var d=0;d<t.length&&d<c.length;d++)u[t[d]]=c[d];d=gS(u.Start);var p=gS(u.End);c=new Be(d,p,c.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.jh=u.Style,(e=r.find(function(S){return function(T){return T.Name==S.jh}}(e)))&&yM(c,e),a.push(c)}}return a};function yM(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=mS(n))&&(e.color=n),(n=t.BackColour)&&(n=mS(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Jn,e.textAlign="start";break;case 2:e.displayAlign=Jn,e.textAlign=gn;break;case 3:e.displayAlign=Jn,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=gn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=gn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function mS(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function gS(e){return e=xM.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}we("shaka.text.SsaTextParser",Zo),Zo.prototype.parseMedia=Zo.prototype.parseMedia,Zo.prototype.setManifestType=Zo.prototype.setManifestType,Zo.prototype.setSequenceMode=Zo.prototype.setSequenceMode,Zo.prototype.parseInit=Zo.prototype.parseInit;var vM=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,yS=/^\s*([^:]+):\s*(.*)/,sh=/\s*,\s*/,xM=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Hn["text/x-ssa"]=function(){return new Zo};function vS(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,ca:e}:null}function xS(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var a=((e[t+2]&192)>>>6)+1,u=(e[t+2]&1)<<2;return u|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:u,codec:"mp4a.40."+a}}function wS(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function wM(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Jo(e){this.i=e,this.h=0,this.g=new Map}w=Jo.prototype,w.destroy=function(){this.g.clear()},w.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?ct(this.convertCodecs("audio",e)):!1},w.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Xo(t)||"mp4a.40.2")+'"':t},w.getOriginalMimeType=function(){return this.i},w.transmux=function(e,t,n,r){for(var a=Ae(e),u=Ws(a),c=u.length;c<a.length&&!wS(a,c);c++);if(e=1e3*n.endTime,u=os(u),u.length&&n&&(u=u.find(function(T){return T.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=u.data),u=xS(a,c),!u)return Promise.reject(new se(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount;for(var d=[];c<a.length;){var p=vS(a,c);if(!p)return Promise.reject(new se(2,3,3018,n?n.M()[0]:null));var S=p.Qd+p.ca;c+S<=a.length&&d.push({data:a.subarray(c+p.Qd,c+S),size:p.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),c+=S}return a=u.sampleRate,e=Math.floor(e*a/1e3),r={id:t.id,type:"audio",codecs:u.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:d},stream:t},r=new Ca([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Ta(r),this.g.set(n,t)),n=ru(r),this.h++,t=An(t,n),Promise.resolve(t)},we("shaka.transmuxer.AacTransmuxer",Jo),Jo.prototype.transmux=Jo.prototype.transmux,Jo.prototype.getOriginalMimeType=Jo.prototype.getOriginalMimeType,Jo.prototype.convertCodecs=Jo.prototype.convertCodecs,Jo.prototype.isSupported=Jo.prototype.isSupported,Jo.prototype.destroy=Jo.prototype.destroy,Nt("audio/aac",function(){return new Jo("audio/aac")},Go);function SS(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,a=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+a>e.length)return null;var u=e[t+6]>>5,c=0;u===2?c+=2:(u&1&&u!==1&&(c+=2),u&4&&(c+=2)),c=(e[t+6]<<8|e[t+7])>>12-c&1;var d=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|d>>2,(d&3)<<6|u<<3|c<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][u]+c,ma:e,ca:a}}function SM(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var a,u;0<r;){u=e[t];var c=Math.min(r,8),d=8-c;a=4278190080>>>24+d<<d,a=(u&a)>>d,n=n?n<<c|a:a,t+=1,r-=c}if(16>n)return!0}return!1}function ci(e){this.i=e,this.h=0,this.g=new Map}w=ci.prototype,w.destroy=function(){this.g.clear()},w.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?ct(this.convertCodecs("audio",e)):!1},w.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},w.getOriginalMimeType=function(){return this.i},w.transmux=function(e,t,n,r){e=Ae(e);for(var a=Ws(e),u=a.length;u<e.length&&!SM(e,u);u++);var c=1e3*n.endTime;a=os(a),a.length&&n&&(a=a.find(function(T){return T.description==="com.apple.streaming.transportStreamTimestamp"}))&&(c=a.data),a=0;for(var d=new Uint8Array([]),p=[];u<e.length;){var S=SS(e,u);if(!S)return Promise.reject(new se(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=S.sampleRate,t.channelsCount=S.channelCount,a=S.sampleRate,d=S.ma,p.push({data:e.subarray(u,u+S.ca),size:S.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),u+=S.ca}return e=Math.floor(c*a/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:r,$a:[],ma:d,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:p},stream:t},r=new Ca([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Ta(r),this.g.set(n,t)),n=ru(r),this.h++,t=An(t,n),Promise.resolve(t)},we("shaka.transmuxer.Ac3Transmuxer",ci),ci.prototype.transmux=ci.prototype.transmux,ci.prototype.getOriginalMimeType=ci.prototype.getOriginalMimeType,ci.prototype.convertCodecs=ci.prototype.convertCodecs,ci.prototype.isSupported=ci.prototype.isSupported,ci.prototype.destroy=ci.prototype.destroy,Nt("audio/ac3",function(){return new ci("audio/ac3")},Go);function CS(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new or(e.subarray(t+2));Oo(n,2),Oo(n,3);var r=_t(n,11)+1<<1,a=_t(n,2);if(a==3){a=_t(n,2),a=[24e3,22060,16e3][a];var u=3}else a=[48e3,44100,32e3][a],u=_t(n,2);var c=_t(n,3),d=_t(n,1);return n=_t(n,5),t+r>e.byteLength?null:(e=Math.floor(r*a/(16*[1,2,3,6][u])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,a<<6|n<<1|0,0|c<<1|d<<0,0]),{sampleRate:a,channelCount:[2,1,2,3,3,4,4,5][c]+d,ma:e,ca:r})}function hi(e){this.i=e,this.h=0,this.g=new Map}w=hi.prototype,w.destroy=function(){this.g.clear()},w.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?ct(this.convertCodecs("audio",e)):!1},w.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},w.getOriginalMimeType=function(){return this.i},w.transmux=function(e,t,n,r){e=Ae(e);for(var a=Ws(e),u=a.length;u<e.length&&(e[u]<<8|e[u+1]<<0)!==2935;u++);var c=1e3*n.endTime;a=os(a),a.length&&n&&(a=a.find(function(T){return T.description==="com.apple.streaming.transportStreamTimestamp"}))&&(c=a.data),a=0;for(var d=new Uint8Array([]),p=[];u<e.length;){var S=CS(e,u);if(!S)return Promise.reject(new se(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=S.sampleRate,t.channelsCount=S.channelCount,a=S.sampleRate,d=S.ma,p.push({data:e.subarray(u,u+S.ca),size:S.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),u+=S.ca}return e=Math.floor(c*a/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:a,duration:r,$a:[],ma:d,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:p},stream:t},r=new Ca([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Ta(r),this.g.set(n,t)),n=ru(r),this.h++,t=An(t,n),Promise.resolve(t)},we("shaka.transmuxer.Ec3Transmuxer",hi),hi.prototype.transmux=hi.prototype.transmux,hi.prototype.getOriginalMimeType=hi.prototype.getOriginalMimeType,hi.prototype.convertCodecs=hi.prototype.convertCodecs,hi.prototype.isSupported=hi.prototype.isSupported,hi.prototype.destroy=hi.prototype.destroy,Nt("audio/ec3",function(){return new hi("audio/ec3")},Go);function CM(e){if(!e.length)return null;var t=e.find(function(D){return D.type==7});if(e=e.find(function(D){return D.type==8}),!t||!e)return null;var n=new or(t.data),r=Ht(n);if(Ht(n),Ht(n),ko(n),bM.includes(r)&&(r=He(n),r===3&&Oo(n,1),ko(n),ko(n),Oo(n,1),ot(n))){r=r!==3?8:12;for(var a=0;a<r;a++)ot(n)&&(6>a?Mf(n,16):Mf(n,64))}if(ko(n),r=He(n),r===0)He(n);else if(r===1)for(Oo(n,1),ko(n),ko(n),r=He(n),a=0;a<r;a++)ko(n);ko(n),Oo(n,1);var u=He(n),c=He(n),d=_t(n,1);d===0&&Oo(n,1),Oo(n,1);var p=0,S=0,T=0,E=0;if(ot(n)&&(p=He(n),S=He(n),T=He(n),E=He(n)),a=r=1,ot(n)&&ot(n)){var I=Ht(n),A=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],R=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<I&&16>=I?(r=A[I-1],a=R[I-1]):I===255&&(r=_t(n,16),a=_t(n,16))}return n=(2-d)*(c+1)*16-2*T-2*E,u=16*(u+1)-2*p-2*S,p=[],t=t.fullData,p.push(t.byteLength>>>8&255),p.push(t.byteLength&255),p=p.concat.apply(p,_(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,_(e)),e=new Uint8Array([1,p[3],p[4],p[5],255,225].concat(p,[1],t)),{height:n,width:u,wa:e,Ba:r,Ca:a}}function TM(e){var t=!1,n=[],r=e.find(function(p){return p.type==7}),a=!1;e=b(e);for(var u=e.next();!u.done;u=e.next()){u=u.value;var c=!1;switch(u.type){case 1:c=a=!0;var d=u.data;r&&4<d.length&&(d=dE(new or(d)),d===2||d===4||d===7||d===9)&&(t=!0);break;case 5:t=c=a=!0;break;case 6:c=!0;break;case 7:c=!0;break;case 8:c=!0;break;case 9:a=c=!0;break;case 12:c=!0;break;default:c=!1}a&&c&&(c=u.fullData.byteLength,d=new Uint8Array(4),d[0]=c>>24&255,d[1]=c>>16&255,d[2]=c>>8&255,d[3]=c&255,n.push(d),n.push(u.fullData))}return n.length?{data:An.apply(yo,_(n)),kd:t}:null}var bM=[100,110,122,244,44,83,86,118,128,138,139,134];function EM(e){if(!e.length)return null;var t=e.find(function(c){return c.type==32}),n=e.find(function(c){return c.type==33}),r=e.find(function(c){return c.type==34});if(!t||!n||!r)return null;var a=kM(t.fullData);e=AM(n.fullData);var u=IM(r.fullData);return t=MM(t.fullData,n.fullData,r.fullData,{yf:a.yf,Wf:a.Wf,df:e.df,ef:e.ef,Ye:e.Ye,cf:e.cf,Ze:e.Ze,$e:e.$e,af:e.af,bf:e.bf,Se:e.Se,Te:e.Te,Ue:e.Ue,Ve:e.Ve,We:e.We,Xe:e.Xe,Le:e.Le,$d:e.$d,Je:e.Je,He:e.He,Ge:e.Ge,Bf:u.Bf}),{height:e.height,width:e.width,wa:t,Ba:e.Ri,Ca:e.Qi}}function kM(e){var t=new or(e,!0);return Ht(t),Ht(t),_t(t,4),_t(t,2),_t(t,6),e=_t(t,3),t=ot(t),{yf:e+1,Wf:t}}function AM(e){e=new or(e,!0),Ht(e),Ht(e);var t=0,n=0,r=0,a=0;_t(e,4);var u=_t(e,3);ot(e);for(var c=_t(e,2),d=_t(e,1),p=_t(e,5),S=Ht(e),T=Ht(e),E=Ht(e),I=Ht(e),A=Ht(e),R=Ht(e),D=Ht(e),L=Ht(e),F=Ht(e),U=Ht(e),q=Ht(e),N=[],G=[],Q=0;Q<u;Q++)N.push(ot(e)),G.push(ot(e));if(0<u)for(Q=u;8>Q;Q++)_t(e,2);for(Q=0;Q<u;Q++)N[Q]&&_t(e,88),G[Q]&&Ht(e);He(e),N=He(e),N==3&&_t(e,1),G=He(e),Q=He(e),ot(e)&&(t+=He(e),n+=He(e),r+=He(e),a+=He(e));var re=He(e),ae=He(e),me=He(e);if(ot(e))for(var le=0;le<=u;le++)He(e),He(e),He(e);else He(e),He(e),He(e);if(He(e),He(e),He(e),He(e),He(e),He(e),ot(e)&&ot(e))for(le=0;4>le;le++)for(var ue=0;ue<(le===3?2:6);ue++)if(ot(e)){var de=Math.min(64,1<<4+(le<<1));1<le&&Xs(e);for(var be=0;be<de;be++)Xs(e)}else He(e);for(ot(e),ot(e),ot(e)&&(Ht(e),He(e),He(e),ot(e)),le=He(e),de=ue=0;de<le;de++)if(be=!1,de!==0&&(be=ot(e)),be){de===le&&He(e),ot(e),He(e);for(var Ce=be=0;Ce<=ue;Ce++){var ke=ot(e),Oe=!1;ke||(Oe=ot(e)),(ke||Oe)&&be++}ue=be}else{for(Ce=He(e),be=He(e),ue=Ce+be,ke=0;ke<Ce;ke++)He(e),ot(e);for(Ce=0;Ce<be;Ce++)He(e),ot(e)}if(ot(e))for(le=He(e),ue=0;ue<le;ue++){for(de=0;de<me+4;de++)_t(e,1);_t(e,1)}if(le=me=1,ue=0,ot(e),ot(e),ot(e)){if(ot(e)&&(de=Ht(e),be=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Ce=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<de&&16>=de?(me=be[de-1],le=Ce[de-1]):de===255&&(me=_t(e,16),le=_t(e,16))),ot(e)&&ot(e),ot(e)&&(_t(e,3),ot(e),ot(e)&&(Ht(e),Ht(e),Ht(e))),ot(e)&&(He(e),He(e)),ot(e),ot(e),ot(e),(de=ot(e))&&(He(e),He(e),He(e),He(e)),ot(e)&&(_t(e,32),_t(e,32),ot(e)&&He(e),ot(e)))for(Ce=!1,de=ot(e),be=ot(e),(de||be)&&((Ce=ot(e))&&(Ht(e),_t(e,5),ot(e),_t(e,5)),_t(e,4),_t(e,4),Ce&&_t(e,4),_t(e,5),_t(e,5),_t(e,5)),ke=0;ke<=u;ke++){var Ie=!0;Oe=1,ot(e)||(Ie=ot(e));var Fe=!1;if(Ie?He(e):Fe=ot(e),Fe||(Oe=He(e)+1),de){for(Ie=0;Ie<Oe;Ie++)He(e),He(e),Ce&&(He(e),He(e));ot(e)}if(be){for(Ie=0;Ie<Oe;Ie++)He(e),He(e),Ce&&(He(e),He(e));ot(e)}}ot(e)&&(ot(e),ot(e),ot(e),ue=He(e),He(e),He(e),He(e),He(e))}return{Ye:q,df:c,ef:d,cf:p,Ze:S,$e:T,af:E,bf:I,Se:A,Te:R,Ue:D,Ve:L,We:F,Xe:U,$d:ue,Le:0,Je:N,He:re,Ge:ae,width:G-(t+n)*(N===1||N===2?2:1),height:Q-(r+a)*(N===1?2:1),Ri:me,Qi:le}}function IM(e){var t=new or(e,!0);Ht(t),Ht(t),He(t),He(t),ot(t),ot(t),_t(t,3),ot(t),ot(t),He(t),He(t),Xs(t),ot(t),ot(t),ot(t)&&He(t),Xs(t),Xs(t),ot(t),ot(t),ot(t),ot(t),e=ot(t),t=ot(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Bf:n}}function MM(e,t,n,r){var a=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return a[0]=1,a[1]=(r.df&3)<<6|(r.ef?1:0)<<5|r.cf&31,a[2]=r.Ze,a[3]=r.$e,a[4]=r.af,a[5]=r.bf,a[6]=r.Se,a[7]=r.Te,a[8]=r.Ue,a[9]=r.Ve,a[10]=r.We,a[11]=r.Xe,a[12]=r.Ye,a[13]=240|(r.$d&3840)>>8,a[14]=r.$d&255,a[15]=252|r.Bf&3,a[16]=252|r.Je&3,a[17]=248|r.He&7,a[18]=248|r.Ge&7,a[19]=0,a[20]=0,a[21]=(r.Le&3)<<6|(r.yf&7)<<3|(r.Wf?1:0)<<2|3,a[22]=3,a[23]=160,a[24]=0,a[25]=1,a[26]=(e.byteLength&65280)>>8,a[27]=(e.byteLength&255)>>0,a.set(e,28),a[23+(5+e.byteLength)]=161,a[e.byteLength+29]=0,a[e.byteLength+30]=1,a[e.byteLength+31]=(t.byteLength&65280)>>8,a[e.byteLength+32]=(t.byteLength&255)>>0,a.set(t,e.byteLength+33),a[23+(e.byteLength+10+t.byteLength)]=162,a[e.byteLength+10+t.byteLength+24]=0,a[e.byteLength+10+t.byteLength+25]=1,a[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,a[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,a.set(n,e.byteLength+10+t.byteLength+28),a}function ah(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,a=e[t+2]>>4&15,u=e[t+2]>>2&3;if(n!==1&&a!==0&&a!==15&&u!==3){var c=e[t+3]>>6;a=1e3*_M[14*(n===3?3-r:r===3?3:4)+a-1],u=RM[3*(n===3?0:n===2?1:2)+u],n=LM[n][r];var d=DM[r],p=Math.floor(n*a/u+(e[t+2]>>1&1))*d,S=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(S=S?parseInt(S[1],10):0)&&87>=S&&r===2&&224e3<=a&&c===0&&(e[t+3]|=128),{sampleRate:u,channelCount:c===3?1:2,ca:p,Pi:8*n*d}}return null}function TS(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function bS(e,t){if(t+1<e.length&&TS(e,t)){var n=ah(e,t),r=4;return n&&n.ca&&(r=n.ca),t+=r,t===e.length||t+1<e.length&&TS(e,t)}return!1}var _M=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],RM=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],LM=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],DM=[0,1,1,4];function di(e){this.i=e,this.h=0,this.g=new Map}w=di.prototype,w.destroy=function(){this.g.clear()},w.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?ct(this.convertCodecs("audio",e)):!1},w.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},w.getOriginalMimeType=function(){return this.i},w.transmux=function(e,t,n,r){for(var a=Ae(e),u=Ws(a).length;u<a.length&&!bS(a,u);u++);var c;for(e=[];u<a.length;){var d=ah(a,u);if(!d)return Promise.reject(new se(2,3,3018,n?n.M()[0]:null));c||(c=d),u+d.ca<=a.length&&e.push({data:a.subarray(u,u+d.ca),size:d.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),u+=d.ca}return c?(a=9e4*c.Pi/c.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:a,Ya:e},stream:t},r=new Ca([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Ta(r),this.g.set(n,t)),n=ru(r),this.h++,t=An(t,n),Promise.resolve(t)):Promise.reject(new se(2,3,3018,n?n.M()[0]:null))},we("shaka.transmuxer.Mp3Transmuxer",di),di.prototype.transmux=di.prototype.transmux,di.prototype.getOriginalMimeType=di.prototype.getOriginalMimeType,di.prototype.convertCodecs=di.prototype.convertCodecs,di.prototype.isSupported=di.prototype.isSupported,di.prototype.destroy=di.prototype.destroy,Nt("audio/mpeg",function(){return new di("audio/mpeg")},Go);function pi(e){this.h=e,this.g=null}w=pi.prototype,w.destroy=function(){},w.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Xo(e).split(","),n=Ro("audio",t);return t=Ro("video",t),!n||t||Eo(n)!="mp3"?!1:ct(this.convertCodecs("audio",e))},w.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},w.getOriginalMimeType=function(){return this.h},w.transmux=function(e,t,n,r,a){if(this.g?this.g.clearData():this.g=new rn,e=Ae(e),e=this.g.parse(e),e.$c().audio!="mp3"||a!="audio")return Promise.reject(new se(2,3,3018,n?n.M()[0]:null));for(n=new Uint8Array([]),a=b(e.Tb()),e=a.next();!e.done;e=a.next())if(e=e.value.data)for(t=0;t<e.length;)(r=ah(e,t))?(t+r.ca<=e.length&&(n=An(n,e.subarray(t,t+r.ca))),t+=r.ca):t++;return Promise.resolve(n)},we("shaka.transmuxer.MpegTsTransmuxer",pi),pi.prototype.transmux=pi.prototype.transmux,pi.prototype.getOriginalMimeType=pi.prototype.getOriginalMimeType,pi.prototype.convertCodecs=pi.prototype.convertCodecs,pi.prototype.isSupported=pi.prototype.isSupported,pi.prototype.destroy=pi.prototype.destroy,Nt("video/mp2t",function(){return new pi("video/mp2t")},br);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function ei(e){this.h=e,(this.g=g0.get("ISOBoxer")())&&PM(this)}function PM(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==OM[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}w=ei.prototype,w.destroy=function(){},w.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?ct(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ct(t)||ct(e))},w.convertCodecs=function(e,t){return t.replace("mss/","")},w.getOriginalMimeType=function(){return this.h},w.transmux=function(e,t,n){if(!n)return Promise.resolve(Ae(e));if(!t.mssPrivateData)return Promise.reject(new se(2,3,3020,n?n.M()[0]:null));try{var r,a=this.g.parseBuffer(e),u=a.fetch("tfhd");u.track_ID=t.id+1;var c=a.fetch("tfdt"),d=a.fetch("traf");c===null&&(c=this.g.createFullBox("tfdt",d,u),c.version=1,c.flags=0,c.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var p=a.fetch("trun"),S=a.fetch("tfxd");S&&S._parent.boxes.splice(S._parent.boxes.indexOf(S),1);var T=a.fetch("tfrf");T&&T._parent.boxes.splice(T._parent.boxes.indexOf(T),1);var E=a.fetch("sepiff");if(E!==null){E.type="senc",E.usertype=void 0;var I=a.fetch("saio");if(I===null){I=this.g.createFullBox("saio",d),I.version=0,I.flags=0,I.entry_count=1,I.offset=[0];var A=this.g.createFullBox("saiz",d);if(A.version=0,A.flags=0,A.sample_count=E.sample_count,A.default_sample_info_size=0,A.sample_info_size=[],E.flags&2)for(r=0;r<E.sample_count;r+=1)A.sample_info_size[r]=10+6*E.entry[r].NumberOfEntries;else A.default_sample_info_size=8}}u.flags&=16777214,u.flags|=131072,p.flags|=1;var R=a.fetch("moof");p.data_offset=R.getLength()+8;var D=a.fetch("saio");D!==null&&(D.offset[0]=ES(R,"traf")+ES(d,"senc")+16);var L=Ae(a.write());return Promise.resolve(L)}catch(F){return F instanceof se?Promise.reject(F):Promise.reject(new se(2,3,3022,n?n.M()[0]:null))}};function ES(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}we("shaka.transmuxer.MssTransmuxer",ei),ei.prototype.transmux=ei.prototype.transmux,ei.prototype.getOriginalMimeType=ei.prototype.getOriginalMimeType,ei.prototype.convertCodecs=ei.prototype.convertCodecs,ei.prototype.isSupported=ei.prototype.isSupported,ei.prototype.destroy=ei.prototype.destroy;var OM=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Nt("mss/audio/mp4",function(){return new ei("mss/audio/mp4")},Go),Nt("mss/video/mp4",function(){return new ei("mss/video/mp4")},Go);function mi(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}w=mi.prototype,w.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},w.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Xo(n).split(",");return n=Ro("audio",r),r=Ro("video",r),n&&(n=Eo(n),!NM.includes(n))||r&&(n=Eo(r),!UM.includes(n))?!1:t?ct(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ct(t)||ct(e))},w.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Xo(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return Ns(n,"audio/mp4")}).map(gl).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},w.getOriginalMimeType=function(){return this.l},w.transmux=function(e,t,n,r,a){var u=Ae(e);if(a=="audio"&&!kl(u)){for(var c=Ws(u),d=c.length;d<u.length;d++)if(bS(u,d))return Promise.reject(new se(2,3,3018,n?n.M()[0]:null));for(d=c.length;d<u.length;d++)if(wS(u,d))return this.h||(this.h=new Jo("audio/aac")),this.h.transmux(e,t,n,r,a);return Promise.reject(new se(2,3,3018,n?n.M()[0]:null))}this.j?this.j.clearData():this.j=new rn;var p=this.j.parse(u),S=[],T=p.$c();try{var E=null;if(a=="video"){switch(T.video){case"avc":var I=[],A=null,R=[],D=p.Fc();if(!D.length)throw new se(2,3,3023,n?n.M()[0]:null);for(var L=0;L<D.length;L++){var F=D[L],U=F.nalus;R.push.apply(R,_(U));var q=TM(U);if(q){A==null&&(A=F.dts);var N=void 0;N=L+1<D.length?(D[L+1].dts||0)-(F.dts||0):1<D.length?(F.dts||0)-(D[L-1].dts||0):9e4*(n.endTime-n.startTime),I.push({data:q.data,size:q.data.byteLength,duration:N,cb:Math.round((F.pts||0)-(F.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:q.kd?2:1,hb:q.kd?0:1}})}}var G=CM(R);if(!G||A==null)throw new se(2,3,3018,n?n.M()[0]:null);t.height=G.height,t.width=G.width,E={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,$a:[],ma:new Uint8Array([]),wa:G.wa,Ba:G.Ba,Ca:G.Ca,data:{rb:this.g,baseMediaDecodeTime:A,Ya:I},stream:t};break;case"hvc":var Q=[],re=null,ae=[],me=p.Fc();if(!me.length)throw new se(2,3,3023,n?n.M()[0]:null);for(var le=0;le<me.length;le++){var ue=me[le],de=ue.nalus;ae.push.apply(ae,_(de));for(var be=!1,Ce=[],ke=!1,Oe=b(de),Ie=Oe.next();!Ie.done;Ie=Oe.next()){var Fe=Ie.value;switch(Fe.type){case 1:case 0:var vt=ke=!0;break;case 19:case 20:case 21:be=vt=ke=!0;break;case 32:vt=!0;break;case 33:vt=!0;break;case 34:vt=!0;break;case 35:ke=vt=!0;break;case 39:case 40:vt=!0;break;default:vt=!1}if(ke&&vt){var Dt=Fe.fullData.byteLength,Sn=new Uint8Array(4);Sn[0]=Dt>>24&255,Sn[1]=Dt>>16&255,Sn[2]=Dt>>8&255,Sn[3]=Dt&255,Ce.push(Sn),Ce.push(Fe.fullData)}}var $t=Ce.length?{data:An.apply(yo,_(Ce)),kd:be}:null;if($t){re==null&&ue.dts!=null&&(re=ue.dts);var kn=void 0;kn=le+1<me.length?(me[le+1].dts||0)-(ue.dts||0):1<me.length?(ue.dts||0)-(me[le-1].dts||0):9e4*(n.endTime-n.startTime),Q.push({data:$t.data,size:$t.data.byteLength,duration:kn,cb:Math.round((ue.pts||0)-(ue.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:$t.kd?2:1,hb:$t.kd?0:1}})}}var Un=EM(ae);if(!Un||re==null)throw new se(2,3,3018,n?n.M()[0]:null);t.height=Un.height,t.width=Un.width,E={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,$a:[],ma:new Uint8Array([]),wa:Un.wa,Ba:Un.Ba,Ca:Un.Ca,data:{rb:this.g,baseMediaDecodeTime:re,Ya:Q},stream:t}}E&&(S.push(E),E=null)}if(a=="audio"){switch(T.audio){case"aac":for(var Cn=[],Kt,Mn=null,Wn=b(p.Tb()),Xn=Wn.next();!Xn.done;Xn=Wn.next()){var zo=Xn.value,Vo=zo.data;if(Vo){var bi=0;if(Kt=xS(Vo,bi),!Kt)throw new se(2,3,3018,n?n.M()[0]:null);for(t.audioSamplingRate=Kt.sampleRate,t.channelsCount=Kt.channelCount,Mn==null&&zo.pts!==null&&(Mn=zo.pts);bi<Vo.length;){var pr=vS(Vo,bi);if(pr){var Ur=pr.Qd+pr.ca;bi+Ur<=Vo.length&&Cn.push({data:Vo.subarray(bi+pr.Qd,bi+Ur),size:pr.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),bi+=Ur}else bi++}}}if(!Kt||Mn==null){if(!p.Fc().length)throw new se(2,3,3018,n?n.M()[0]:null);Mn=9e4*n.startTime;var Aa=Ro("audio",t.codecs.split(","));if(!Aa||!t.channelsCount||!t.audioSamplingRate)throw new se(2,3,3018,n?n.M()[0]:null);Kt={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:Aa};var mr=wM(Aa,t.channelsCount);if(!mr)throw new se(2,3,3018,n?n.M()[0]:null);for(var uh=Mn+9e4*(n.endTime-n.startTime),yu=Mn;yu<uh;)Cn.push({data:mr,size:mr.byteLength,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),yu+=1024/Kt.sampleRate*9e4}var vu=Kt.sampleRate,Ni=Mn/9e4*vu;E={id:t.id,type:"audio",codecs:Kt.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:vu,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:Ni,Ya:Cn},stream:t};break;case"ac3":for(var US=[],fh=0,dm=new Uint8Array([]),ch=null,BS=b(p.Tb()),pm=BS.next();!pm.done;pm=BS.next()){var mm=pm.value,gm=mm.data;ch==null&&mm.pts!==null&&(ch=mm.pts);for(var Ia=0;Ia<gm.length;){var Br=SS(gm,Ia);Br?(t.audioSamplingRate=Br.sampleRate,t.channelsCount=Br.channelCount,fh=Br.sampleRate,dm=Br.ma,US.push({data:gm.subarray(Ia,Ia+Br.ca),size:Br.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Ia+=Br.ca):Ia++}}if(fh==0||dm.byteLength==0||ch==null)throw new se(2,3,3018,n?n.M()[0]:null);var zM=ch/9e4*fh;E={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:fh,duration:r,$a:[],ma:dm,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:zM,Ya:US},stream:t};break;case"ec3":for(var jS=[],hh=0,ym=new Uint8Array([]),dh=null,FS=b(p.Tb()),vm=FS.next();!vm.done;vm=FS.next()){var xm=vm.value,wm=xm.data;dh==null&&xm.pts!==null&&(dh=xm.pts);for(var Ma=0;Ma<wm.length;){var jr=CS(wm,Ma);jr?(t.audioSamplingRate=jr.sampleRate,t.channelsCount=jr.channelCount,hh=jr.sampleRate,ym=jr.ma,jS.push({data:wm.subarray(Ma,Ma+jr.ca),size:jr.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Ma+=jr.ca):Ma++}}if(hh==0||ym.byteLength==0||dh==null)throw new se(2,3,3018,n?n.M()[0]:null);var VM=dh/9e4*hh;E={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:hh,duration:r,$a:[],ma:ym,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:VM,Ya:jS},stream:t};break;case"mp3":for(var $S=[],ph,mh=null,zS=b(p.Tb()),Sm=zS.next();!Sm.done;Sm=zS.next()){var Cm=Sm.value,xu=Cm.data;if(xu){mh==null&&Cm.pts!==null&&(mh=Cm.pts);for(var ps=0;ps<xu.length;){var _a=ah(xu,ps);_a?(ph||(ph=_a),ps+_a.ca<=xu.length&&$S.push({data:xu.subarray(ps,ps+_a.ca),size:_a.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),ps+=_a.ca):ps++}}}if(!ph||mh==null)throw new se(2,3,3018,n?n.M()[0]:null);var VS=ph.sampleRate,HM=mh/9e4*VS;E={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:VS,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:HM,Ya:$S},stream:t};break;case"opus":var HS=[],gh=null,Wi=p.F;if(!Wi)throw new se(2,3,3018,n?n.M()[0]:null);var To=[];switch(Wi.Ch){case 1:case 2:To=[0];break;case 0:To=[255,1,1,0,1];break;case 128:To=[255,2,0,0,1];break;case 3:To=[1,2,1,0,2,1];break;case 4:To=[1,2,2,0,1,2,3];break;case 5:To=[1,3,2,0,4,1,2,3];break;case 6:To=[1,4,2,0,4,1,2,3,5];break;case 7:To=[1,4,2,0,4,1,2,3,5,6];break;case 8:To=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:To=[1,1,2,0,1];break;case 131:To=[1,1,3,0,1,2];break;case 132:To=[1,1,4,0,1,2,3];break;case 133:To=[1,1,5,0,1,2,3,4];break;case 134:To=[1,1,6,0,1,2,3,4,5];break;case 135:To=[1,1,7,0,1,2,3,4,5,6];break;case 136:To=[1,1,8,0,1,2,3,4,5,6,7]}for(var GS=new Uint8Array([0,Wi.channelCount,0,0,Wi.sampleRate>>>24&255,Wi.sampleRate>>>17&255,Wi.sampleRate>>>8&255,Wi.sampleRate>>>0&255,0,0].concat(_(To))),WS=Wi.sampleRate,XS=b(p.Tb()),Tm=XS.next();!Tm.done;Tm=XS.next()){var bm=Tm.value,Ra=bm.data;gh==null&&bm.pts!==null&&(gh=bm.pts);for(var wu=0;wu<Ra.length;){for(var GM=(Ra[wu+1]&16)!==0,WM=(Ra[wu+1]&8)!==0,gr=wu+2,yh=0;Ra[gr]===255;)yh+=255,gr+=1;yh+=Ra[gr],gr+=1,gr+=GM?2:0,gr+=WM?2:0;var KS=Ra.slice(gr,gr+yh);HS.push({data:KS,size:KS.byteLength,duration:960,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),wu=gr+yh}}if(GS.byteLength==0||gh==null)throw new se(2,3,3018,n?n.M()[0]:null);t.audioSamplingRate=Wi.sampleRate,t.channelsCount=Wi.channelCount;var XM=gh/9e4*WS;E={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:WS,duration:r,$a:[],ma:GS,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:XM,Ya:HS},stream:t}}E&&(S.push(E),E=null)}}catch(Am){return Am&&Am.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(Am)}if(!S.length)return Promise.reject(new se(2,3,3018,n?n.M()[0]:null));var qS=new Ca(S),Em=t.id+"_"+n.i;if(this.i.has(Em))var km=this.i.get(Em);else km=Ta(qS),this.i.set(Em,km);var KM=ru(qS);this.g++;var qM=An(km,KM);return Promise.resolve(qM)},we("shaka.transmuxer.TsTransmuxer",mi),mi.prototype.transmux=mi.prototype.transmux,mi.prototype.getOriginalMimeType=mi.prototype.getOriginalMimeType,mi.prototype.convertCodecs=mi.prototype.convertCodecs,mi.prototype.isSupported=mi.prototype.isSupported,mi.prototype.destroy=mi.prototype.destroy;var NM=["aac","ac-3","ec-3","mp3","opus"],UM=["avc","hevc"];Nt("video/mp2t",function(){return new mi("video/mp2t")},Er);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function kS(){}var mu;function AS(){mu||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(mu=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=BM,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function BM(e,t){var n=this,r;return z(function(a){return a.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),k(a,mu.call(n,e,t),2)):(r=a.h,OS(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=mu,a.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=IS,a.return(IS.call(n,e,t))))})}function IS(e,t){var n=this,r,a,u,c,d,p,S,T,E,I,A,R;return z(function(D){if(D.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=PS(e),a=[],u=b(t),c=u.next();!c.done;c=u.next())d=c.value,p=MS(d.videoCapabilities,r),S=MS(d.audioCapabilities,r),d.videoCapabilities&&d.videoCapabilities.length&&!p.length||d.audioCapabilities&&d.audioCapabilities.length&&!S.length||(T=Object.assign({},d),T.videoCapabilities=p,T.audioCapabilities=S,a.push(T));if(!a.length)throw E=Error("Unsupported keySystem or supportedConfigurations."),E.name="NotSupportedError",E.code=DOMException.NOT_SUPPORTED_ERR,E;return k(D,mu.call(n,e,a),2)}return I=D.h,R=A=null,a[0]&&(a[0].videoCapabilities&&(A=a[0].videoCapabilities[0].encryptionScheme),a[0].audioCapabilities&&(R=a[0].audioCapabilities[0].encryptionScheme)),D.return(new lh(I,A,R))})}function MS(e,t){return e&&e.filter(function(n){return cm(n.encryptionScheme,t)})}we("EmeEncryptionSchemePolyfill",kS),kS.install=AS;function _S(){}var gu;function RS(){gu||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(gu=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=jM,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function jM(e){var t=this,n,r;return z(function(a){switch(a.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),k(a,gu.call(t,e),2);case 2:if(n=a.h,!e.keySystemConfiguration)return a.return(n);if((r=n.keySystemAccess)&&OS(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=gu,a.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=LS,r){a.u(3);break}return k(a,DS(e),4);case 4:return n.keySystemAccess=a.h,a.return(n);case 3:return a.return(LS.call(t,e))}})}function LS(e){var t=this,n,r,a,u,c,d,p;return z(function(S){switch(S.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=n=null,!e.keySystemConfiguration||(a=e.keySystemConfiguration,u=a.keySystem,r=a.audio&&a.audio.encryptionScheme,n=a.video&&a.video.encryptionScheme,c=PS(u),d={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},cm(r,c)&&cm(n,c))?k(S,gu.call(t,e),2):S.return(d);case 2:if(p=S.h,p.keySystemAccess){p.keySystemAccess=new lh(p.keySystemAccess,n,r),S.u(3);break}if(!e.keySystemConfiguration){S.u(3);break}return k(S,DS(e),5);case 5:p.keySystemAccess=S.h;case 3:return S.return(p)}})}function DS(e){var t,n;return z(function(r){if(r.g==1){var a=e.keySystemConfiguration,u=[],c=[];return a.audio&&u.push({robustness:a.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:a.audio.encryptionScheme}),a.video&&c.push({robustness:a.video.robustness||"",contentType:e.video.contentType,encryptionScheme:a.video.encryptionScheme}),a={initDataTypes:a.initDataType?[a.initDataType]:[],distinctiveIdentifier:a.distinctiveIdentifier,persistentState:a.persistentState,sessionTypes:a.sessionTypes},u.length&&(a.audioCapabilities=u),c.length&&(a.videoCapabilities=c),t=a,k(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}we("McEncryptionSchemePolyfill",_S),_S.install=RS;function lh(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}lh.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=b(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=b(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},lh.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function PS(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function OS(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function cm(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&($M||FM))}function hm(){}function NS(){AS(),RS()}we("EncryptionSchemePolyfills",hm),hm.install=NS;var FM=navigator.userAgent.includes("CrKey"),$M=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);typeof v<"u"&&v.exports&&(v.exports=hm)}).call(o,i,i,void 0);for(var l in o.shaka)f[l]=o.shaka[l]})()})(PT);const IC=h6(PT);let Cs,po;const bg={playingState:!1},d6=async f=>{IC.polyfill.installAll(),po=f,po||(po=document.createElement("video"),po.style.cssText="position: absolute; top: 0; left: 0; z-index: -1",po.width=window.innerWidth,po.height=window.innerHeight,Cs=new IC.Player,await Cs.attach(po),po.autoplay=!1,Cs.addEventListener("error",i=>{console.error(i)}),document.body.insertBefore(po,document.body.firstChild))},p6=async f=>{if(!Cs||!po)throw"Player not initialized yet";await Cs.load(f.streamUrl)},m6=()=>{po.play().then(()=>{bg.playingState=!0})},g6=()=>{po.pause(),bg.playingState=!1},y6=async()=>{await Cs.destroy(),Cs=null,po.remove(),po=null},v6=()=>po.currentTime,x6=()=>po.duration,w6=()=>{let f=i=>new Date(i*1e3).toISOString().substr(14,5);return`${f(po.currentTime)} : ${f(Math.floor(po.duration))}`},Fr={init:d6,load:p6,play:m6,pause:g6,getCurrentTime:v6,getVideoDuration:x6,getTimeFormat:w6,state:bg,destroy:y6},S6=Je.Component("Player",{code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(b),x===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},x===!0?y:o),_.y=1080,_.mount="{y:1}",_.w=1920,_.h=150,_.color={top:"0x00000000",bottom:"0x444444ff"},_.alpha={transition:o.controlsVisibility},s[1].populate(_),x===!0&&(M-=1),i=s[1];const P={};s[2]=this.element({parent:i||"root"},x===!0?y:o),P.x=60,P.y=50,s[2].populate(P),x===!0&&(M-=1),i=s[2];const j={};s[3]=this.element({parent:i||"root"},x===!0?y:o),j.w=60,j.h=60,j.color="0x0087ceeb",j.effects=[{type:"radius",props:{radius:16}}],s[3].populate(j),x===!0&&(M-=1),i=s[3];const H={};s[4]=this.element({parent:i||"root"},x===!0?y:o),H.y=14,H.x=14,H.w=32,H.h=32,H.src=o.playing?"assets/player/pause.png":"assets/player/play.png",s[4].populate(H),x===!0&&(M-=1),i=s[2];const $={};s[5]=this.element({parent:i||"root"},x===!0?y:o),$.y=22,$.x=100,$.w=o.progressLength,$.h=16,$.color="0xffffff80",$.effects=[{type:"radius",props:{radius:8}}],s[5].populate($),x===!0&&(M-=1),i=s[5];const B={};s[6]=this.element({parent:i||"root"},x===!0?y:o),B.h=16,B.w={transition:{value:o.progress,d:100,f:"ease-in-out"}},B.effects=[{type:"radius",props:{radius:8}}],B.color="0x0087ceeb",s[6].populate(B),x===!0&&(M-=1);const te=l.components&&l.components.Circle||h.Circle;i=s[5];const X={};s[7]=this.element({parent:i||"root"},x===!0?y:o),X.size=28,X.color="0xffffffff",X.y="-6",X.x={transition:{value:o.progress-8,d:100,f:"ease-in-out"}};const Y=[];if(typeof te<"u")for(let K in te[Symbol.for("config")].props)delete X[te[Symbol.for("config")].props[K]],Y.push(te[Symbol.for("config")].props[K]);s[7].populate(X),x===!0&&(M-=1),i=s[7];const ee={};ee.size=28,ee.color="0xffffffff",ee.y="-6",C={transition:{value:o.progress-8,d:100,f:"ease-in-out"}},Array.isArray(C)===!0&&(C=v(C).slice(0)),ee.x=C,m=ee.is||"Circle";let he;if(typeof m=="string"){if(he=l.components&&l.components[m]||h[m],!he)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(he=m);s[8]=he.call(null,{props:ee},s[7],o),s[8][Symbol.for("slots")][0]?(i=s[8][Symbol.for("slots")][0],y=s[8],x=!0):i=s[8][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[2];const k={};s[9]=this.element({parent:i||"root"},x===!0?y:o),k.x=1660,k.y=16,s[9].populate(k),x===!0&&(M-=1),i=s[9];const V={};s[10]=this.element({parent:i||"root"},x===!0?y:o),V.content=o.currentTime,V.size=25,V.__textnode=!0,s[10].populate(V),x===!0&&(M-=1),i=s[9];const Z={};s[11]=this.element({parent:i||"root"},x===!0?y:o),Z.x=70,Z.size=25,Z.content="/",Z.__textnode=!0,s[11].populate(Z),x===!0&&(M-=1),i=s[9];const oe={};return s[12]=this.element({parent:i||"root"},x===!0?y:o),oe.x=85,oe.size=25,oe.content=o.duration,oe.__textnode=!0,s[12].populate(oe),x===!0&&(M-=1),s},effects:[function(i,o,l,h,g,v){o[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(i,o,l,h,g,v){o[1].set("alpha",{transition:i.controlsVisibility})},function(i,o,l,h,g,v){o[3].set("effects",[{type:"radius",props:{radius:16}}])},function(i,o,l,h,g,v){o[4].set("src",i.playing?"assets/player/pause.png":"assets/player/play.png")},function(i,o,l,h,g,v){o[5].set("effects",[{type:"radius",props:{radius:8}}])},function(i,o,l,h,g,v){o[6].set("w",{transition:{value:i.progress,d:100,f:"ease-in-out"}})},function(i,o,l,h,g,v){o[6].set("effects",[{type:"radius",props:{radius:8}}])},function(i,o,l,h,g,v){(typeof skip7>"u"||skip7.indexOf("x")===-1)&&o[7].set("x",{transition:{value:i.progress-8,d:100,f:"ease-in-out"}})},function(i,o,l,h,g,v){o[8][Symbol.for("props")].x={transition:{value:i.progress-8,d:100,f:"ease-in-out"}}},function(i,o,l,h,g,v){o[10].set("content",i.currentTime)},function(i,o,l,h,g,v){o[12].set("content",i.duration)}],context:{}},state(){return{controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}},hooks:{focus(){this.$emit("clearBackground")},unfocus(){this.$emit("changeBackground")},async init(){await Fr.init()},async ready(){await Fr.load({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});const f=o=>new Date(o*1e3).toISOString().substr(14,5),i=Fr.getVideoDuration();i&&(this.duration=f(i),this.progressChunkSize=Math.round(this.progressLength/i*100)/100),this.$setInterval(()=>{const o=Fr.getCurrentTime();this.currentTime=f(o),this.progress=Math.round(o*this.progressChunkSize)},1e3),this.play()},async destroy(){await Fr.destroy()}},input:{space(){this.play()},up(){this.showControls(1)},down(){this.showControls(0)}},methods:{play(){this.showControls(1),this.hideTimeout=this.$setTimeout(()=>this.showControls(0),3e3),Fr.state.playingState==!0?(Fr.pause(),this.playing=!1):(console.log("play!"),Fr.play(),this.playing=!0)},showControls(f){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=f}}}),C6=Je.Component("Colors",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=1920,m.h=1080,m.color={transition:o.bg},s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.x=20,C.y=20,s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.w=100,y.h=100,y.x=0,y.color="0xecfeffff",s[2].populate(y),i=s[1];const x={};s[3]=this.element({parent:i||"root"},o),x.w=100,x.h=100,x.x=120,x.color="0xa5f3fcff",s[3].populate(x),i=s[1];const M={};s[4]=this.element({parent:i||"root"},o),M.w=100,M.h=100,M.x=240,M.color="0x22d3eeff",s[4].populate(M),i=s[1];const b={};s[5]=this.element({parent:i||"root"},o),b.w=100,b.h=100,b.x=360,b.color="0x0891b2ff",s[5].populate(b),i=s[0];const _={};s[6]=this.element({parent:i||"root"},o),_.x=20,_.y=140,s[6].populate(_),i=s[6];const P={};s[7]=this.element({parent:i||"root"},o),P.w=100,P.h=100,P.x=0,P.color="0xecfeffff",s[7].populate(P),i=s[6];const j={};s[8]=this.element({parent:i||"root"},o),j.w=100,j.h=100,j.x=120,j.color="0xa5f3fcff",s[8].populate(j),i=s[6];const H={};s[9]=this.element({parent:i||"root"},o),H.w=100,H.h=100,H.x=240,H.color="0x22d3eeff",s[9].populate(H),i=s[6];const $={};s[10]=this.element({parent:i||"root"},o),$.w=100,$.h=100,$.x=360,$.color="0x0891b2ff",s[10].populate($),i=s[0];const B={};s[11]=this.element({parent:i||"root"},o),B.x=20,B.y=260,s[11].populate(B),i=s[11];const te={};s[12]=this.element({parent:i||"root"},o),te.w=100,te.h=100,te.x=0,te.color="0xecfeffaa",s[12].populate(te),i=s[11];const X={};s[13]=this.element({parent:i||"root"},o),X.w=100,X.h=100,X.x=120,X.color="0xa5f3fc33",s[13].populate(X),i=s[11];const Y={};s[14]=this.element({parent:i||"root"},o),Y.w=100,Y.h=100,Y.x=240,Y.color="0x22d3ee20",s[14].populate(Y),i=s[11];const ee={};s[15]=this.element({parent:i||"root"},o),ee.w=100,ee.h=100,ee.x=360,ee.color="0x0891b2ff",s[15].populate(ee),i=s[0];const he={};s[16]=this.element({parent:i||"root"},o),he.x=20,he.y=380,s[16].populate(he),i=s[16];const k={};s[17]=this.element({parent:i||"root"},o),k.w=100,k.h=100,k.x=0,k.color="0xecfeffff",s[17].populate(k),i=s[16];const V={};s[18]=this.element({parent:i||"root"},o),V.w=100,V.h=100,V.x=120,V.color="0xa5f3fcff",s[18].populate(V),i=s[16];const Z={};s[19]=this.element({parent:i||"root"},o),Z.w=100,Z.h=100,Z.x=240,Z.color="0x22d3eeff",s[19].populate(Z),i=s[16];const oe={};s[20]=this.element({parent:i||"root"},o),oe.w=100,oe.h=100,oe.x=360,oe.color="0x0891b2ff",s[20].populate(oe),i=s[0];const K={};s[21]=this.element({parent:i||"root"},o),K.x=20,K.y=500,s[21].populate(K),i=s[21];const ne={};s[22]=this.element({parent:i||"root"},o),ne.w=100,ne.h=100,ne.x=0,ne.color="0xecfeffab",s[22].populate(ne),i=s[21];const W={};s[23]=this.element({parent:i||"root"},o),W.w=100,W.h=100,W.x=120,W.color="0xa5f3fc33",s[23].populate(W),i=s[21];const J={};s[24]=this.element({parent:i||"root"},o),J.w=100,J.h=100,J.x=240,J.color="0x22d3ee21",s[24].populate(J),i=s[21];const fe={};s[25]=this.element({parent:i||"root"},o),fe.w=100,fe.h=100,fe.x=360,fe.color="0x0891b2ff",s[25].populate(fe),i=s[0];const ye={};s[26]=this.element({parent:i||"root"},o),ye.x=20,ye.y=620,s[26].populate(ye),i=s[26];const ge={};s[27]=this.element({parent:i||"root"},o),ge.w=100,ge.h=100,ge.x=0,ge.color="0x000000ff",s[27].populate(ge),i=s[26];const pe={};s[28]=this.element({parent:i||"root"},o),pe.w=100,pe.h=100,pe.x=120,pe.color="0xccccccff",s[28].populate(pe),i=s[26];const Ee={};s[29]=this.element({parent:i||"root"},o),Ee.w=100,Ee.h=100,Ee.x=240,Ee.color="0x889900ff",s[29].populate(Ee),i=s[26];const Re={};s[30]=this.element({parent:i||"root"},o),Re.w=100,Re.h=100,Re.x=360,Re.color="0x00ff00ff",s[30].populate(Re),i=s[0];const z={};s[31]=this.element({parent:i||"root"},o),z.x=20,z.y=740,s[31].populate(z),i=s[31];const Me={};s[32]=this.element({parent:i||"root"},o),Me.w=100,Me.h=100,Me.x=0,Me.color="0x000000ff",s[32].populate(Me),i=s[31];const ve={};s[33]=this.element({parent:i||"root"},o),ve.w=100,ve.h=100,ve.x=120,ve.color="0xccccccff",s[33].populate(ve),i=s[31];const Ue={};s[34]=this.element({parent:i||"root"},o),Ue.w=100,Ue.h=100,Ue.x=240,Ue.color="0x889900ff",s[34].populate(Ue),i=s[31];const De={};s[35]=this.element({parent:i||"root"},o),De.w=100,De.h=100,De.x=360,De.color="0x00ff00ff",s[35].populate(De),i=s[0];const We={};s[36]=this.element({parent:i||"root"},o),We.x=620,We.y=20,s[36].populate(We),i=s[36];const Xe={};s[37]=this.element({parent:i||"root"},o),Xe.w=300,Xe.h=200,Xe.x=0,Xe.color={transition:o.color1},s[37].populate(Xe),i=s[36];const ze={};s[38]=this.element({parent:i||"root"},o),ze.w=300,ze.h=200,ze.x=0,ze.y=250,ze.color={transition:o.color2},s[38].populate(ze),i=s[36];const we={};s[39]=this.element({parent:i||"root"},o),we.w=300,we.h=200,we.x=100,we.y=400,we.color={transition:o.color3},s[39].populate(we),i=s[36];const tt={};return s[40]=this.element({parent:i||"root"},o),tt.w=300,tt.h=200,tt.x=0,tt.y=650,tt.color={transition:{value:o.color4,d:1e3,f:"ease-in-out"}},s[40].populate(tt),s},effects:[function(i,o,l,h,g,v){o[0].set("color",{transition:i.bg})},function(i,o,l,h,g,v){o[37].set("color",{transition:i.color1})},function(i,o,l,h,g,v){o[38].set("color",{transition:i.color2})},function(i,o,l,h,g,v){o[39].set("color",{transition:i.color3})},function(i,o,l,h,g,v){o[40].set("color",{transition:{value:i.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter(){this.color1=this.color1==="#0891b2"?"#22d3ee":"#0891b2",this.color2=this.color2==="#dc2626"?"#0f0":"#dc2626",this.color3=this.color3==="rgba(251, 191, 36)"?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4=this.color4==="#1e3a8a"?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let f=0;const i=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{f=f+1,f===i.length-1&&(f=0),this.bg=i[f]},2e3)}}}),T6=Je.Component("Gradients",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=1920/4,C.h=1080,C.color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.w=1920/4,y.h=1080,y.x=1920/4,y.color="{left: '0xdc2626ff',  right: '0xf87171ff'}",s[2].populate(y),i=s[0];const x={};s[3]=this.element({parent:i||"root"},o),x.w=1920/4,x.h=1080,x.x=1920/4*2,x.color="{top: '0x0891b2ff', right: '0xf87171ff'}",s[3].populate(x),i=s[0];const M={};return s[4]=this.element({parent:i||"root"},o),M.w=1920/4,M.h=1080,M.x=1920/4*3,M.color="{right: '0x008000ff', bottom: '0xffd700ff'}",s[4].populate(M),s},effects:[function(i,o,l,h,g,v){o[1].set("w",1920/4)},function(i,o,l,h,g,v){o[2].set("w",1920/4)},function(i,o,l,h,g,v){o[2].set("x",1920/4)},function(i,o,l,h,g,v){o[3].set("w",1920/4)},function(i,o,l,h,g,v){o[3].set("x",1920/4*2)},function(i,o,l,h,g,v){o[4].set("w",1920/4)},function(i,o,l,h,g,v){o[4].set("x",1920/4*3)}],context:{}}}),b6=Je.Component("Transitions",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.x=60,s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=200,C.h=200,C.x=50,C.y={transition:o.y},C.color="0xc4b5fdff",s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.w=200,y.h=200,y.x=300,y.y={transition:{value:o.y}},y.color="0xa78bfaff",s[2].populate(y),i=s[0];const x={};s[3]=this.element({parent:i||"root"},o),x.w=200,x.h=200,x.x=550,x.y={transition:{value:o.y,duration:1e3,start:o.start,end:o.doneTransition3}},x.color="0x8b5cf6ff",x.ref="bla",s[3].populate(x),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.w=200,M.h=200,M.x=800,M.y={transition:{value:o.y,duration:500,delay:500,start:o.start,end:o.finished}},M.color="0x7c3aedff",s[4].populate(M),i=s[0];const b={};s[5]=this.element({parent:i||"root"},o),b.w=200,b.h=200,b.x=1050,b.y={transition:{value:o.y,easing:"ease-in-out",end:o.finished}},b.color="0x6d28d9ff",s[5].populate(b),i=s[0];const _={};s[6]=this.element({parent:i||"root"},o),_.w=200,_.h=200,_.x=1300,_.y={transition:{value:o.y,duration:3e3,easing:"ease-in-out-back",end:o.finished}},_.color="0x5b21b6ff",s[6].populate(_),i=s[0];const P={};return s[7]=this.element({parent:i||"root"},o),P.w=200,P.h=200,P.x=1550,P.y={transition:{value:o.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},P.color="0x4c1d95ff",s[7].populate(P),s},effects:[function(i,o,l,h,g,v){o[1].set("y",{transition:i.y})},function(i,o,l,h,g,v){o[2].set("y",{transition:{value:i.y}})},function(i,o,l,h,g,v){o[3].set("y",{transition:{value:i.y,duration:1e3,start:i.start,end:i.doneTransition3}})},function(i,o,l,h,g,v){o[4].set("y",{transition:{value:i.y,duration:500,delay:500,start:i.start,end:i.finished}})},function(i,o,l,h,g,v){o[5].set("y",{transition:{value:i.y,easing:"ease-in-out",end:i.finished}})},function(i,o,l,h,g,v){o[6].set("y",{transition:{value:i.y,duration:3e3,easing:"ease-in-out-back",end:i.finished}})},function(i,o,l,h,g,v){o[7].set("y",{transition:{value:i.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state(){return{y:50}},hooks:{init(){this.$setInterval(()=>{this.go()},12e3),this.go()}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(f,i,o){this.$log.info("Start transition",f.nodeId,i,o)},finished(f,i,o){this.$log.info("Finished transition",f.nodeId,i,o)},go(){this.y=50,this.$setTimeout(()=>{this.y=1080-50-200},1e3),this.$setTimeout(()=>{this.y=50,this.$setTimeout(()=>{this.y=200},1e3)},6e3)}}}),E6=Je.Component("Alpha",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.y=100,s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.w=200,y.h=200,y.x=100,y.color="0xffffffff",y.alpha=.2,s[2].populate(y),i=s[1];const x={};s[3]=this.element({parent:i||"root"},o),x.w=200,x.h=200,x.x=320,x.color="0xffffffff",x.alpha=.4,s[3].populate(x),i=s[1];const M={};s[4]=this.element({parent:i||"root"},o),M.w=200,M.h=200,M.x=540,M.color="0xffffffff",M.alpha=.6,s[4].populate(M),i=s[1];const b={};s[5]=this.element({parent:i||"root"},o),b.w=200,b.h=200,b.x=760,b.color="0xffffffff",b.alpha=.8,s[5].populate(b),i=s[1];const _={};s[6]=this.element({parent:i||"root"},o),_.w=200,_.h=200,_.x=980,_.color="0xffffffff",_.alpha=1,s[6].populate(_),i=s[0];const P={};s[7]=this.element({parent:i||"root"},o),P.w=200,P.h=200,P.x=100,P.y=320,P.color="0xffffffff",P.alpha=o.alpha,s[7].populate(P),i=s[0];const j={};s[8]=this.element({parent:i||"root"},o),j.w=200,j.h=200,j.x=100,j.y=540,j.color="0xffffffff",j.alpha=o.alpha,s[8].populate(j),i=s[0];const H={};s[9]=this.element({parent:i||"root"},o),H.w=200,H.h=200,H.x=100,H.y=760,H.color="0xffffffff",H.alpha={transition:{value:o.alpha,duration:1e3,easing:"ease-in-out-circ"}},s[9].populate(H),i=s[0];const $={};s[10]=this.element({parent:i||"root"},o),$.w=428,$.h=234,$.x=1200,$.y=100,$.src=o.image,$.alpha=1,s[10].populate($),i=s[0];const B={};s[11]=this.element({parent:i||"root"},o),B.w=428,B.h=234,B.x=1300,B.y=100+234-40,B.src=o.image,B.alpha=.4,s[11].populate(B),i=s[0];const te={};s[12]=this.element({parent:i||"root"},o),te.w=428,te.h=234,te.x=1200,te.y=100+234*2-40*2,te.src=o.image,te.alpha=.1,s[12].populate(te),i=s[0];const X={};s[13]=this.element({parent:i||"root"},o),X.x=400,X.y=400,X.alpha=.2,X.content="Text with alpha applied directly",X.__textnode=!0,s[13].populate(X),i=s[0];const Y={};s[14]=this.element({parent:i||"root"},o),Y.alpha=.5,Y.x=400,Y.y=500,s[14].populate(Y),i=s[14];const ee={};return s[15]=this.element({parent:i||"root"},o),ee.content="Text with alpha applied on parent element",ee.__textnode=!0,s[15].populate(ee),s},effects:[function(i,o,l,h,g,v){o[8].set("alpha",i.alpha)},function(i,o,l,h,g,v){o[9].set("alpha",{transition:{value:i.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(i,o,l,h,g,v){o[10].set("src",i.image)},function(i,o,l,h,g,v){o[11].set("y",100+234-40)},function(i,o,l,h,g,v){o[11].set("src",i.image)},function(i,o,l,h,g,v){o[12].set("y",100+234*2-40*2)},function(i,o,l,h,g,v){o[12].set("src",i.image)}],context:{}},state(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready(){this.$setInterval(()=>{const f=this.direction==="up"?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(f,1),.1),this.alpha===1&&(this.direction="down"),this.alpha===.1&&(this.direction="up")},1400)}}}),k6=Je.Component("Scaling",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.x=100,C.y=100,C.w=150,C.h=150,C.color="0x64748bff",s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.x=300,y.y=100,y.w=100,y.h=100,y.color="0x64748bff",y.scale=1.5,s[2].populate(y),i=s[0];const x={};s[3]=this.element({parent:i||"root"},o),x.x=100,x.y=400,x.w=100,x.h=100,x.color="0xb45309ff",x.scale=o.scale,s[3].populate(x),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.x=900,M.y=400,M.w=100,M.h=100,M.src=o.balloon,M.scale={transition:{value:o.scale,easing:"ease-in-out"}},s[4].populate(M),i=s[0];const b={};s[5]=this.element({parent:i||"root"},o),b.x=300,b.y=600,b.w=100,b.h=100,b.color="0x059669ff",b.scale=o.scale2,s[5].populate(b),i=s[5];const _={};s[6]=this.element({parent:i||"root"},o),_.x=10,_.y=10,_.h=60,_.w=80,_.color="0x0369a1ff",s[6].populate(_),i=s[0];const P={};s[7]=this.element({parent:i||"root"},o),P.x=1500,P.y=600,P.w=100,P.h=100,P.color="0x059669ff",P.scale=o.scale2,s[7].populate(P),i=s[7];const j={};return s[8]=this.element({parent:i||"root"},o),j.x=10,j.y=10,j.h=60,j.w=80,j.color="0x0369a1ff",j.scale=o.scale2/2,s[8].populate(j),s},effects:[function(i,o,l,h,g,v){o[4].set("src",i.balloon)},function(i,o,l,h,g,v){o[4].set("scale",{transition:{value:i.scale,easing:"ease-in-out"}})},function(i,o,l,h,g,v){o[5].set("scale",i.scale2)},function(i,o,l,h,g,v){o[7].set("scale",i.scale2)},function(i,o,l,h,g,v){o[8].set("scale",i.scale2/2)}],context:{}},state(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready(){this.$setInterval(()=>{const o=this.direction==="up"?this.scale+.5:0;this.scale=Math.max(Math.min(o,8),0),this.scale===8&&(this.direction="down"),this.scale===0&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=this.scale2===1?3:1},2e3)}}}),A6=Je.Component("Rotation",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.y=70,s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.x=100,y.y=0,y.w=200,y.h=100,y.color="0xfee2e2ff",y.rotation=0,s[2].populate(y),i=s[1];const x={};s[3]=this.element({parent:i||"root"},o),x.x=100,x.y=150,x.w=200,x.h=100,x.color="0xfecacaff",x.rotation=10,s[3].populate(x),i=s[1];const M={};s[4]=this.element({parent:i||"root"},o),M.x=100,M.y=300,M.w=200,M.h=100,M.color="0xfca5a5ff",M.rotation=20,s[4].populate(M),i=s[1];const b={};s[5]=this.element({parent:i||"root"},o),b.x=100,b.y=450,b.w=200,b.h=100,b.color="0xf87171ff",b.rotation=30,s[5].populate(b),i=s[1];const _={};s[6]=this.element({parent:i||"root"},o),_.x=100,_.y=610,_.w=200,_.h=100,_.color="0xef4444ff",_.rotation=40,s[6].populate(_),i=s[1];const P={};s[7]=this.element({parent:i||"root"},o),P.x=100,P.y=800,P.w=200,P.h=100,P.color="0xdc2626ff",P.rotation=50,s[7].populate(P),i=s[0];const j={};s[8]=this.element({parent:i||"root"},o),j.y=70,j.x=300,s[8].populate(j),i=s[8];const H={};s[9]=this.element({parent:i||"root"},o),H.x=100,H.y=0,H.w=200,H.h=100,H.color="0xfee2e2ff",H.rotation=60,s[9].populate(H),i=s[8];const $={};s[10]=this.element({parent:i||"root"},o),$.x=100,$.y=150,$.w=200,$.h=100,$.color="0xfecacaff",$.rotation=70,s[10].populate($),i=s[8];const B={};s[11]=this.element({parent:i||"root"},o),B.x=100,B.y=300,B.w=200,B.h=100,B.color="0xfca5a5ff",B.rotation=80,s[11].populate(B),i=s[8];const te={};s[12]=this.element({parent:i||"root"},o),te.x=100,te.y=450,te.w=200,te.h=100,te.color="0xf87171ff",te.rotation=90,s[12].populate(te),i=s[8];const X={};s[13]=this.element({parent:i||"root"},o),X.x=100,X.y=610,X.w=200,X.h=100,X.color="0xef4444ff",X.rotation=100,s[13].populate(X),i=s[8];const Y={};s[14]=this.element({parent:i||"root"},o),Y.x=100,Y.y=800,Y.w=200,Y.h=100,Y.color="0xdc2626ff",Y.rotation=100,s[14].populate(Y),i=s[0];const ee={};s[15]=this.element({parent:i||"root"},o),ee.y=70,ee.x=600,s[15].populate(ee),i=s[15];const he={};s[16]=this.element({parent:i||"root"},o),he.x=100,he.y=0,he.w=200,he.h=100,he.color="0xfee2e2ff",he.rotation=110,s[16].populate(he),i=s[15];const k={};s[17]=this.element({parent:i||"root"},o),k.x=100,k.y=150,k.w=200,k.h=100,k.color="0xfecacaff",k.rotation=120,s[17].populate(k),i=s[15];const V={};s[18]=this.element({parent:i||"root"},o),V.x=100,V.y=300,V.w=200,V.h=100,V.color="0xfca5a5ff",V.rotation=130,s[18].populate(V),i=s[15];const Z={};s[19]=this.element({parent:i||"root"},o),Z.x=100,Z.y=450,Z.w=200,Z.h=100,Z.color="0xf87171ff",Z.rotation=140,s[19].populate(Z),i=s[15];const oe={};s[20]=this.element({parent:i||"root"},o),oe.x=100,oe.y=610,oe.w=200,oe.h=100,oe.color="0xef4444ff",oe.rotation=150,s[20].populate(oe),i=s[15];const K={};s[21]=this.element({parent:i||"root"},o),K.x=100,K.y=800,K.w=200,K.h=100,K.color="0xdc2626ff",K.rotation=160,s[21].populate(K),i=s[0];const ne={};s[22]=this.element({parent:i||"root"},o),ne.y=70,ne.x=900,s[22].populate(ne),i=s[22];const W={};s[23]=this.element({parent:i||"root"},o),W.x=100,W.y=0,W.w=200,W.h=100,W.color="0xfee2e2ff",W.rotation=170,s[23].populate(W),i=s[22];const J={};s[24]=this.element({parent:i||"root"},o),J.x=100,J.y=150,J.w=200,J.h=100,J.color="0xfecacaff",J.rotation=180,s[24].populate(J),i=s[22];const fe={};s[25]=this.element({parent:i||"root"},o),fe.x=100,fe.y=300,fe.w=200,fe.h=100,fe.color="0xfca5a5ff",fe.rotation=190,s[25].populate(fe),i=s[22];const ye={};s[26]=this.element({parent:i||"root"},o),ye.x=100,ye.y=450,ye.w=200,ye.h=100,ye.color="0xf87171ff",ye.rotation=200,s[26].populate(ye),i=s[22];const ge={};s[27]=this.element({parent:i||"root"},o),ge.x=100,ge.y=610,ge.w=200,ge.h=100,ge.color="0xef4444ff",ge.rotation=210,s[27].populate(ge),i=s[22];const pe={};s[28]=this.element({parent:i||"root"},o),pe.x=100,pe.y=800,pe.w=200,pe.h=100,pe.color="0xdc2626ff",pe.rotation=220,s[28].populate(pe),i=s[0];const Ee={};s[29]=this.element({parent:i||"root"},o),Ee.y=70,Ee.x=1200,s[29].populate(Ee),i=s[29];const Re={};s[30]=this.element({parent:i||"root"},o),Re.x=100,Re.y=0,Re.w=200,Re.h=100,Re.color="0xfee2e2ff",Re.rotation=230,s[30].populate(Re),i=s[29];const z={};s[31]=this.element({parent:i||"root"},o),z.x=100,z.y=150,z.w=200,z.h=100,z.color="0xfecacaff",z.rotation=240,s[31].populate(z),i=s[29];const Me={};s[32]=this.element({parent:i||"root"},o),Me.x=100,Me.y=300,Me.w=200,Me.h=100,Me.color="0xfca5a5ff",Me.rotation=250,s[32].populate(Me),i=s[29];const ve={};s[33]=this.element({parent:i||"root"},o),ve.x=100,ve.y=450,ve.w=200,ve.h=100,ve.color="0xf87171ff",ve.rotation=260,s[33].populate(ve),i=s[29];const Ue={};s[34]=this.element({parent:i||"root"},o),Ue.x=100,Ue.y=610,Ue.w=200,Ue.h=100,Ue.color="0xef4444ff",Ue.rotation=270,s[34].populate(Ue),i=s[29];const De={};s[35]=this.element({parent:i||"root"},o),De.x=100,De.y=800,De.w=200,De.h=100,De.color="0xdc2626ff",De.rotation=280,s[35].populate(De),i=s[0];const We={};s[36]=this.element({parent:i||"root"},o),We.y=70,We.x=1500,s[36].populate(We),i=s[36];const Xe={};s[37]=this.element({parent:i||"root"},o),Xe.x=100,Xe.y=0,Xe.w=200,Xe.h=100,Xe.color="0xfee2e2ff",Xe.rotation=290,s[37].populate(Xe),i=s[36];const ze={};s[38]=this.element({parent:i||"root"},o),ze.x=100,ze.y=150,ze.w=200,ze.h=100,ze.color="0xfecacaff",ze.rotation=300,s[38].populate(ze),i=s[36];const we={};s[39]=this.element({parent:i||"root"},o),we.x=100,we.y=300,we.w=200,we.h=100,we.color="0xfca5a5ff",we.rotation=310,s[39].populate(we),i=s[36];const tt={};s[40]=this.element({parent:i||"root"},o),tt.x=100,tt.y=450,tt.w=200,tt.h=100,tt.color="0xf87171ff",tt.rotation=320,s[40].populate(tt),i=s[36];const et={};s[41]=this.element({parent:i||"root"},o),et.x=100,et.y=610,et.w=200,et.h=100,et.color="0xef4444ff",et.rotation=330,s[41].populate(et),i=s[36];const Ze={};s[42]=this.element({parent:i||"root"},o),Ze.x=100,Ze.y=800,Ze.w=200,Ze.h=100,Ze.color="0xdc2626ff",Ze.rotation=340,s[42].populate(Ze),i=s[0];const it={};s[43]=this.element({parent:i||"root"},o),it.x=200,it.y=200,it.w=400,it.h=400,it.color="0x0891b2ff",it.rotation=o.rotation1,s[43].populate(it),i=s[0];const St={};s[44]=this.element({parent:i||"root"},o),St.x=800,St.y=200,St.w=400,St.h=400,St.color="0x0891b2ff",St.rotation=o.rotation2,s[44].populate(St),i=s[0];const ut={};return s[45]=this.element({parent:i||"root"},o),ut.x=1400,ut.y=200,ut.w=400,ut.h=400,ut.color="0x0891b2ff",ut.rotation={transition:o.rotation3},s[45].populate(ut),s},effects:[function(i,o,l,h,g,v){o[44].set("rotation",i.rotation2)},function(i,o,l,h,g,v){o[45].set("rotation",{transition:i.rotation3})}],context:{}},state(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready(){let f=800,i=2e3;this.$setInterval(()=>{const o=this.rotation2+10;this.rotation2=o<=360?o:0},f),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,this.rotation3*2)),this.rotation3===720&&(this.rotation3=0)},i)}}}),I6=Je.Component("KeyInput",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.x=525,m.y=130,s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=200,C.h=200,C.color=o.focusColor,C.x=o.focusedX*220,C.y=o.focusedY*210,s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.w=180,y.h=180,y.x=10,y.y=10,y.color=o.blockColor,s[2].populate(y),i=s[0];const x={};s[3]=this.element({parent:i||"root"},o),x.w=180,x.h=180,x.x=230,x.y=10,x.color=o.blockColor,s[3].populate(x),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.w=180,M.h=180,M.x=450,M.y=10,M.color=o.blockColor,s[4].populate(M),i=s[0];const b={};s[5]=this.element({parent:i||"root"},o),b.w=180,b.h=180,b.x=670,b.y=10,b.color=o.blockColor,s[5].populate(b),i=s[0];const _={};s[6]=this.element({parent:i||"root"},o),_.w=180,_.h=180,_.x=10,_.y=220,_.color=o.blockColor,s[6].populate(_),i=s[0];const P={};s[7]=this.element({parent:i||"root"},o),P.w=180,P.h=180,P.x=230,P.y=220,P.color=o.blockColor,s[7].populate(P),i=s[0];const j={};s[8]=this.element({parent:i||"root"},o),j.w=180,j.h=180,j.x=450,j.y=220,j.color=o.blockColor,s[8].populate(j),i=s[0];const H={};s[9]=this.element({parent:i||"root"},o),H.w=180,H.h=180,H.x=670,H.y=220,H.color=o.blockColor,s[9].populate(H),i=s[0];const $={};s[10]=this.element({parent:i||"root"},o),$.w=180,$.h=180,$.x=10,$.y=430,$.color=o.blockColor,s[10].populate($),i=s[0];const B={};s[11]=this.element({parent:i||"root"},o),B.w=180,B.h=180,B.x=230,B.y=430,B.color=o.blockColor,s[11].populate(B),i=s[0];const te={};s[12]=this.element({parent:i||"root"},o),te.w=180,te.h=180,te.x=450,te.y=430,te.color=o.blockColor,s[12].populate(te),i=s[0];const X={};s[13]=this.element({parent:i||"root"},o),X.w=180,X.h=180,X.x=670,X.y=430,X.color=o.blockColor,s[13].populate(X),i=s[0];const Y={};s[14]=this.element({parent:i||"root"},o),Y.w=180,Y.h=180,Y.x=10,Y.y=640,Y.color=o.blockColor,s[14].populate(Y),i=s[0];const ee={};s[15]=this.element({parent:i||"root"},o),ee.w=180,ee.h=180,ee.x=230,ee.y=640,ee.color=o.blockColor,s[15].populate(ee),i=s[0];const he={};s[16]=this.element({parent:i||"root"},o),he.w=180,he.h=180,he.x=450,he.y=640,he.color=o.blockColor,s[16].populate(he),i=s[0];const k={};return s[17]=this.element({parent:i||"root"},o),k.w=180,k.h=180,k.x=670,k.y=640,k.color=o.blockColor,s[17].populate(k),s},effects:[function(i,o,l,h,g,v){o[1].set("color",i.focusColor)},function(i,o,l,h,g,v){o[1].set("x",i.focusedX*220)},function(i,o,l,h,g,v){o[1].set("y",i.focusedY*210)},function(i,o,l,h,g,v){o[2].set("color",i.blockColor)},function(i,o,l,h,g,v){o[3].set("color",i.blockColor)},function(i,o,l,h,g,v){o[4].set("color",i.blockColor)},function(i,o,l,h,g,v){o[5].set("color",i.blockColor)},function(i,o,l,h,g,v){o[6].set("color",i.blockColor)},function(i,o,l,h,g,v){o[7].set("color",i.blockColor)},function(i,o,l,h,g,v){o[8].set("color",i.blockColor)},function(i,o,l,h,g,v){o[9].set("color",i.blockColor)},function(i,o,l,h,g,v){o[10].set("color",i.blockColor)},function(i,o,l,h,g,v){o[11].set("color",i.blockColor)},function(i,o,l,h,g,v){o[12].set("color",i.blockColor)},function(i,o,l,h,g,v){o[13].set("color",i.blockColor)},function(i,o,l,h,g,v){o[14].set("color",i.blockColor)},function(i,o,l,h,g,v){o[15].set("color",i.blockColor)},function(i,o,l,h,g,v){o[16].set("color",i.blockColor)},function(i,o,l,h,g,v){o[17].set("color",i.blockColor)}],context:{}},state(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor(){return this.colorscheme,this.colorscheme==="yellow"?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme,this.colorscheme==="yellow"?"#facc15":"#38bdf8"}},input:{left(){const f=this.focusedX-1;this.focusedX=Math.max(f,0)},right(){const f=this.focusedX+1;this.focusedX=Math.min(f,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme=this.colorscheme==="yellow"?"blue":"yellow"},any(f){const i=parseInt(f.key);isNaN(i)?this.parent.$focus(f):(this.focusedX=Math.max(0,(i-1)%4),this.focusedY=Math.max(0,Math.ceil(i/4)-1))}}}),$m=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],zm=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],M6=Je.Component("Texts",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.x=100,m.y=100,s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.content="Default text",C["@loaded"]=o.textLoaded&&o.textLoaded.bind(o),C.__textnode=!0,s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.content="123456",y.x=400,y.__textnode=!0,s[2].populate(y),i=s[0];const x={};s[3]=this.element({parent:i||"root"},o),x.content="Text with a different fontsize",x.size=o.size,x.y=120,x.font="raleway",x.__textnode=!0,s[3].populate(x),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.content="Text with a different color",M.size=50,M.color=o.color,M.y=250,M.__textnode=!0,s[4].populate(M),i=s[0];const b={};s[5]=this.element({parent:i||"root"},o),b.content="Letterspacing",b.size=50,b.color="0x38bdf8ff",b.y=450,b.letterspacing=40,b.__textnode=!0,s[5].populate(b),i=s[0];const _={};s[6]=this.element({parent:i||"root"},o),_.w=800,_.h=100,_.y=550,_.color="0x94a3b8ff",s[6].populate(_),i=s[6];const P={};s[7]=this.element({parent:i||"root"},o),P.content="Text align center",P.size=50,P.y=15,P.color="0xbae6fdff",P.align="center",P.maxwidth=800,P.__textnode=!0,s[7].populate(P),i=s[0];const j={};s[8]=this.element({parent:i||"root"},o),j.w=800,j.h=200,j.x=900,j.y=550,j.color="0x94a3b8ff",s[8].populate(j),i=s[8];const H={};s[9]=this.element({parent:i||"root"},o),H.content=o.longText,H.size=40,H.color="0xbae6fdff",H.maxwidth=800,H.maxlines=5,H.textoverflow="!!!",H.__textnode=!0,s[9].populate(H),i=s[0];const $={};s[10]=this.element({parent:i||"root"},o),$.w=800,$.h=120,$.x=900,$.y=800,$.color="0x94a3b8ff",s[10].populate($),i=s[10];const B={};s[11]=this.element({parent:i||"root"},o),B.content=o.longText,B.size=40,B.color="0xbae6fdff",B.maxwidth=800,B.maxlines=2,B.lineheight=60,B.textoverflow=!1,B.__textnode=!0,s[11].populate(B),i=s[0];const te={};s[12]=this.element({parent:i||"root"},o),te.content=o.character,te.size=50,te.color=o.color,te.y=750,te.font="opensans",te.__textnode=!0,s[12].populate(te),i=s[0];const X={};s[13]=this.element({parent:i||"root"},o),X.x=1200,X.y=300,s[13].populate(X),i=s[13];const Y={};s[14]=this.element({parent:i||"root"},o),Y.rotation={transition:o.rotation},Y.pivot=0,Y.content="Hello",Y.__textnode=!0,s[14].populate(Y),i=s[13];const ee={};s[15]=this.element({parent:i||"root"},o),ee.x=150,ee.rotation={transition:o.rotation},ee.pivot=.5,ee.content="World",ee.__textnode=!0,s[15].populate(ee),i=s[13];const he={};s[16]=this.element({parent:i||"root"},o),he.x=300,he.rotation={transition:o.rotation},he.pivot=1,he.content="!!",he.__textnode=!0,s[16].populate(he),i=s[0];const k={};s[17]=this.element({parent:i||"root"},o),k.x=500,k.y=700,s[17].populate(k),i=s[17];const V=[];let Z,oe;const K=(W=[],J,fe)=>{const ye=v(W),ge=new Set;let pe=ye.length;const Ee={};for(Z=Ee.from||0,oe=("to"in Ee)?Ee.to:ye.length;pe--;)ye[pe],pe<oe&&pe>=Z&&ge.add(""+pe);let Re=fe.length;for(;Re--;)if(ge.has(fe[Re])===!1){const ve=fe[Re];J[18][ve]&&J[18][ve].destroy(),delete J[18][ve]}fe.length=0;const z=ye.length,Me=[];for(let ve=0;ve<z;ve++){if(ve<Z||ve>=oe)continue;const Ue=Object.create(o);i=J[17],Ue.text=ye[ve],Ue.index=ve,Ue.key=""+ve,fe.push(Ue.key),i=J[17],J[18]===void 0&&(J[18]={});const De={};J[18][Ue.key]===void 0&&(J[18][Ue.key]=this.element({parent:i||"root"},o)),De.content=Ue.text,De.y=Ue.index*50,De.__textnode=!0,J[18][Ue.key].nodeId===void 0&&J[18][Ue.key].populate(De);let We=()=>{J[18][Ue.key].set("y",Ue.index*50)};g(We,null),Me.push(We)}return Me};let ne;return g(()=>{o[Symbol.for("removeGlobalEffects")](ne),ne=null,ne=K(o.texts,s,V)},["texts"]),g(()=>{o.text;for(let W=0;W<o.texts.length;W++){if(W<Z||W>=oe)continue;const J={};J.index=W,J.text=o.texts[W],J.key=W,s[18][J.key].set("content",J.text)}}),s},effects:[function(i,o,l,h,g,v){o[3].set("size",i.size)},function(i,o,l,h,g,v){o[4].set("color",i.color)},function(i,o,l,h,g,v){o[12].set("content",i.character)},function(i,o,l,h,g,v){o[12].set("color",i.color)},function(i,o,l,h,g,v){o[14].set("rotation",{transition:i.rotation})},function(i,o,l,h,g,v){o[15].set("rotation",{transition:i.rotation})},function(i,o,l,h,g,v){o[16].set("rotation",{transition:i.rotation})}],context:{}},state(){return{color:$m[0],size:10,character:zm[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0,texts:["Hello","World","Lightning 3","Blits"]}},hooks:{ready(){let f=0;this.$setInterval(()=>{f++,f>$m.length-1&&(f=0),this.color=$m[f],this.size=10*(f*2+1),this.rotation+=30},1e3);let i=0;this.$setInterval(()=>{i++,i>zm.length-1&&(i=0),this.character=zm[i]},1400)}},methods:{textLoaded(f){this.$log.info(`Text loaded with w: ${f.w} and h: ${f.h}`)}}}),Ph=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],_6=Je.Component("Images",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.src="assets/lightningbolt.png",C.w=428,C.h=234,C.x=100,C.y=100,s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",y.w=428,y.h=234,y.x=100,y.y=400,s[2].populate(y),i=s[0];const x={};s[3]=this.element({parent:i||"root"},o),x.src=o.image,x.x=100,x.y=700,x["@loaded"]=o.imageLoaded&&o.imageLoaded.bind(o),s[3].populate(x),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.color="{top: '0xff0000ff', bottom: '0xffd700ff'}",M.src="assets/lightningbolt.png",M.w=428,M.h=234,M.x=600,M.y=100,s[4].populate(M),i=s[0];const b={};s[5]=this.element({parent:i||"root"},o),b.x=600,b.y=400,b.w=428,b.h=234,b.clipping=o.clipping,s[5].populate(b),i=s[5];const _={};s[6]=this.element({parent:i||"root"},o),_.src="assets/lightningbolt.png",_.w=856,_.h=468,s[6].populate(_),i=s[0];const P={};return s[7]=this.element({parent:i||"root"},o),P.color=o.color,P.src="assets/lightningbolt.png",P.w=428,P.h=234,P.x=1100,P.y=100,s[7].populate(P),s},effects:[function(i,o,l,h,g,v){o[3].set("src",i.image)},function(i,o,l,h,g,v){o[5].set("clipping",i.clipping)},function(i,o,l,h,g,v){o[7].set("color",i.color)}],context:{}},state(){return{image:Ph[0],clipping:!0,color:"red"}},hooks:{ready(){this.$setInterval(()=>{this.image=this.image===Ph[0]?Ph[1]:Ph[0],this.clipping=!this.clipping,this.color=this.color==="red"?"blue":"red"},2e3)}},methods:{imageLoaded(f){console.log("backstopjs:ready"),this.$log.info(`Image loaded with w: ${f.w} and h: ${f.h}`)}}}),rl=Je.Component("Square",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.w={transition:o.size},m.h={transition:o.size},m.color={transition:o.color},s[0].populate(m),s},effects:[function(i,o,l,h,g,v){o[0].set("w",{transition:i.size})},function(i,o,l,h,g,v){o[0].set("h",{transition:i.size})},function(i,o,l,h,g,v){o[0].set("color",{transition:i.color})}],context:{}},props:[{key:"size",default:80}],state(){return{color:"#86198f"}},watch:{size(f,i){this.$log.info(`Size changed from ${i} to ${f}`),this.color=this.color==="#86198f"?"#9d174d":"#86198f"}}}),OT=Je.Component("Card",{components:{Square:rl},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),M.w=o.w,M.h=o.h,M.color="0x0891b2ff",s[0].populate(M),y===!0&&(x-=1);const b=l.components&&l.components.Square||h.Square;i=s[0];const _={};s[1]=this.element({parent:i||"root"},y===!0?C:o),_.x=80,_.y=80;const P=[];if(typeof b<"u")for(let ee in b[Symbol.for("config")].props)delete _[b[Symbol.for("config")].props[ee]],P.push(b[Symbol.for("config")].props[ee]);s[1].populate(_),y===!0&&(x-=1),i=s[1];const j={};j.x=80,j.y=80,m=j.is||"Square";let H;if(typeof m=="string"){if(H=l.components&&l.components[m]||h[m],!H)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(H=m);s[2]=H.call(null,{props:j},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],C=s[2],y=!0):i=s[2][Symbol.for("children")][0],y===!0&&x===0&&(y=!1);const $=l.components&&l.components.Square||h.Square;i=s[0];const B={};s[3]=this.element({parent:i||"root"},y===!0?C:o),B.x=20,B.y=20,B.size=40;const te=[];if(typeof $<"u")for(let ee in $[Symbol.for("config")].props)delete B[$[Symbol.for("config")].props[ee]],te.push($[Symbol.for("config")].props[ee]);s[3].populate(B),y===!0&&(x-=1),i=s[3];const X={};X.x=20,X.y=20,X.size=40,m=X.is||"Square";let Y;if(typeof m=="string"){if(Y=l.components&&l.components[m]||h[m],!Y)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Y=m);return s[4]=Y.call(null,{props:X},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],C=s[4],y=!0):i=s[4][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),s},effects:[],context:{}},props:["size"],computed:{w(){return this.size,this.size==="large"?400:200},h(){return this.size,this.size==="large"?500:300}}}),R6=Je.Component("Components",{components:{Square:rl,Card:OT},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(b),x===!0&&(M-=1);const _=l.components&&l.components.Square||h.Square;i=s[0];const P={};s[1]=this.element({parent:i||"root"},x===!0?y:o),P.x=100,P.y=100,P.size=50;const j=[];if(typeof _<"u")for(let at in _[Symbol.for("config")].props)delete P[_[Symbol.for("config")].props[at]],j.push(_[Symbol.for("config")].props[at]);s[1].populate(P),x===!0&&(M-=1),i=s[1];const H={};H.x=100,H.y=100,H.size=50,m=H.is||"Square";let $;if(typeof m=="string"){if($=l.components&&l.components[m]||h[m],!$)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);s[2]=$.call(null,{props:H},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],y=s[2],x=!0):i=s[2][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const B=l.components&&l.components.Square||h.Square;i=s[0];const te={};s[3]=this.element({parent:i||"root"},x===!0?y:o),te.x=100,te.y=200,te.size=100;const X=[];if(typeof B<"u")for(let at in B[Symbol.for("config")].props)delete te[B[Symbol.for("config")].props[at]],X.push(B[Symbol.for("config")].props[at]);s[3].populate(te),x===!0&&(M-=1),i=s[3];const Y={};Y.x=100,Y.y=200,Y.size=100,m=Y.is||"Square";let ee;if(typeof m=="string"){if(ee=l.components&&l.components[m]||h[m],!ee)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);s[4]=ee.call(null,{props:Y},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],y=s[4],x=!0):i=s[4][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const he=l.components&&l.components.Square||h.Square;i=s[0];const k={};s[5]=this.element({parent:i||"root"},x===!0?y:o),k.x=100,k.y=350,k.size=200;const V=[];if(typeof he<"u")for(let at in he[Symbol.for("config")].props)delete k[he[Symbol.for("config")].props[at]],V.push(he[Symbol.for("config")].props[at]);s[5].populate(k),x===!0&&(M-=1),i=s[5];const Z={};Z.x=100,Z.y=350,Z.size=200,m=Z.is||"Square";let oe;if(typeof m=="string"){if(oe=l.components&&l.components[m]||h[m],!oe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(oe=m);s[6]=oe.call(null,{props:Z},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],y=s[6],x=!0):i=s[6][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const K=l.components&&l.components.Square||h.Square;i=s[0];const ne={};s[7]=this.element({parent:i||"root"},x===!0?y:o),ne.x={transition:o.x},ne.y=600,ne.size=50;const W=[];if(typeof K<"u")for(let at in K[Symbol.for("config")].props)delete ne[K[Symbol.for("config")].props[at]],W.push(K[Symbol.for("config")].props[at]);s[7].populate(ne),x===!0&&(M-=1),i=s[7];const J={};C={transition:o.x},Array.isArray(C)===!0&&(C=v(C).slice(0)),J.x=C,J.y=600,J.size=50,m=J.is||"Square";let fe;if(typeof m=="string"){if(fe=l.components&&l.components[m]||h[m],!fe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fe=m);s[8]=fe.call(null,{props:J},s[7],o),s[8][Symbol.for("slots")][0]?(i=s[8][Symbol.for("slots")][0],y=s[8],x=!0):i=s[8][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const ye=l.components&&l.components.Card||h.Card;i=s[0];const ge={};s[9]=this.element({parent:i||"root"},x===!0?y:o),ge.x=500,ge.y=100;const pe=[];if(typeof ye<"u")for(let at in ye[Symbol.for("config")].props)delete ge[ye[Symbol.for("config")].props[at]],pe.push(ye[Symbol.for("config")].props[at]);s[9].populate(ge),x===!0&&(M-=1),i=s[9];const Ee={};Ee.x=500,Ee.y=100,m=Ee.is||"Card";let Re;if(typeof m=="string"){if(Re=l.components&&l.components[m]||h[m],!Re)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Re=m);s[10]=Re.call(null,{props:Ee},s[9],o),s[10][Symbol.for("slots")][0]?(i=s[10][Symbol.for("slots")][0],y=s[10],x=!0):i=s[10][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const z=l.components&&l.components.Card||h.Card;i=s[0];const Me={};s[11]=this.element({parent:i||"root"},x===!0?y:o),Me.x=500,Me.y=500,Me.size="large";const ve=[];if(typeof z<"u")for(let at in z[Symbol.for("config")].props)delete Me[z[Symbol.for("config")].props[at]],ve.push(z[Symbol.for("config")].props[at]);s[11].populate(Me),x===!0&&(M-=1),i=s[11];const Ue={};Ue.x=500,Ue.y=500,Ue.size="large",m=Ue.is||"Card";let De;if(typeof m=="string"){if(De=l.components&&l.components[m]||h[m],!De)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(De=m);s[12]=De.call(null,{props:Ue},s[11],o),s[12][Symbol.for("slots")][0]?(i=s[12][Symbol.for("slots")][0],y=s[12],x=!0):i=s[12][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[0];const We={};s[13]=this.element({parent:i||"root"},x===!0?y:o),We.x=1e3,We.y=100,s[13].populate(We),x===!0&&(M-=1),i=s[13];const Xe={};s[14]=this.element({parent:i||"root"},x===!0?y:o),Xe.content="Dynamic components",Xe.__textnode=!0,s[14].populate(Xe),x===!0&&(M-=1);const ze=l.components&&l.components.Component||h.Component;i=s[13];const we={};s[15]=this.element({parent:i||"root"},x===!0?y:o),we.is=o.dynamicComponent,we.y=100,we.color="0x0000ffff";const tt=[];if(typeof ze<"u")for(let at in ze[Symbol.for("config")].props)delete we[ze[Symbol.for("config")].props[at]],tt.push(ze[Symbol.for("config")].props[at]);s[15].populate(we),x===!0&&(M-=1),i=s[15];const et={};et.is=o.dynamicComponent,et.y=100,et.color="0x0000ffff",m=et.is||"Component";let Ze;if(typeof m=="string"){if(Ze=l.components&&l.components[m]||h[m],!Ze)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ze=m);s[16]=Ze.call(null,{props:et},s[15],o),s[16][Symbol.for("slots")][0]?(i=s[16][Symbol.for("slots")][0],y=s[16],x=!0):i=s[16][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[13];const it=[];let St,ut;const It=(at=[],xt,dt)=>{const xn=v(at),pn=new Set;let zt=xn.length;const Ct={};for(St=Ct.from||0,ut=("to"in Ct)?Ct.to:xn.length;zt--;)xn[zt],zt<ut&&zt>=St&&pn.add(""+zt);let Wt=dt.length;for(;Wt--;)if(pn.has(dt[Wt])===!1){const ln=dt[Wt];xt[17][ln]&&xt[17][ln].destroy(),delete xt[17][ln],xt[18][ln]&&xt[18][ln].destroy(),delete xt[18][ln]}dt.length=0;const Tt=xn.length,Pt=[];for(let ln=0;ln<Tt;ln++){if(ln<St||ln>=ut)continue;const ct=Object.create(o);i=xt[13],ct.bla=xn[ln],ct.index=ln,ct.key=""+ln,dt.push(ct.key);const Pn=l.components&&l.components.Component||h.Component;xt[17]===void 0&&(xt[17]={});const an={};xt[17][ct.key]===void 0&&(xt[17][ct.key]=this.element({parent:i||"root"},x===!0?y:o)),an.is=ct.bla,an.x=205*ct.index,an.y=300;const Bn=[];if(typeof Pn<"u")for(let bn in Pn[Symbol.for("config")].props)delete an[Pn[Symbol.for("config")].props[bn]],Bn.push(Pn[Symbol.for("config")].props[bn]);xt[17][ct.key].nodeId===void 0&&(xt[17][ct.key].populate(an),x===!0&&(M-=1)),xt[18]===void 0&&(xt[18]={}),i=xt[17][ct.key];const Ot={};if(xt[18][ct.key]===void 0){Ot.is=ct.bla,C=205*ct.index,Array.isArray(C)===!0&&(C=v(C).slice(0)),Ot.x=C,Ot.y=300,m=Ot.is||"Component";let bn;if(typeof m=="string"){if(bn=l.components&&l.components[m]||h[m],!bn)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(bn=m);xt[18][ct.key]=bn.call(null,{props:Ot},xt[17][ct.key],o),xt[18][ct.key][Symbol.for("slots")][0]?(i=xt[18][ct.key][Symbol.for("slots")][0],y=xt[18][ct.key],x=!0):i=xt[18][ct.key][Symbol.for("children")][0]}let mn=()=>{(typeof Bn>"u"||Bn.indexOf("x")===-1)&&xt[17][ct.key].set("x",205*ct.index)};g(mn,null),Pt.push(mn),xt[18][ct.key][Symbol.for("props")].x=205*ct.index}return Pt};let je;return g(()=>{o[Symbol.for("removeGlobalEffects")](je),je=null,je=It(o.dynamicComponents,s,it)},["dynamicComponents"]),s},effects:[function(i,o,l,h,g,v){(typeof skip7>"u"||skip7.indexOf("x")===-1)&&o[7].set("x",{transition:i.x})},function(i,o,l,h,g,v){o[8][Symbol.for("props")].x={transition:i.x}}],context:{}},state(){return{x:100,dynamicComponent:nd,dynamicComponents:["Square","Card","Square",nd],toggle:!1,size:50}},hooks:{ready(){this.$setInterval(()=>{this.x=this.x===100?250:100,this.size=this.size===50?200:50},2e3)}}}),ti=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],L6=Je.Component("ForLoop",{components:{Square:rl},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1;const M={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(M),i=s[0];const b={};s[1]=this.element({parent:i||"root"},x===!0?y:o),b.y=20,s[1].populate(b),i=s[1];const _=[];let P,j;const H=(Ve=[],ie,Ae)=>{const Ke=v(Ve),wt=new Set;let nt=Ke.length;const ht={};for(P=ht.from||0,j=("to"in ht)?ht.to:Ke.length;nt--;)Ke[nt],nt<j&&nt>=P&&wt.add(""+nt);let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const xe=Ae[_e];ie[2][xe]&&ie[2][xe].destroy(),delete ie[2][xe]}Ae.length=0;const Le=Ke.length,bt=[];for(let xe=0;xe<Le;xe++){if(xe<P||xe>=j)continue;const ce=Object.create(o);i=ie[1],ce.item=Ke[xe],ce.undefined=xe,ce.key=""+xe,Ae.push(ce.key),i=ie[1],ie[2]===void 0&&(ie[2]={});const Ge={};ie[2][ce.key]===void 0&&(ie[2][ce.key]=this.element({parent:i||"root"},x===!0?y:o)),Ge.w=80,Ge.h=80,Ge.x=ce.item,Ge.color="0x4d7c0fff",ie[2][ce.key].nodeId===void 0&&ie[2][ce.key].populate(Ge)}return bt};let $;g(()=>{o[Symbol.for("removeGlobalEffects")]($),$=null,$=H(o.collection1,s,_)},["collection1"]),i=s[0];const B={};s[3]=this.element({parent:i||"root"},x===!0?y:o),B.y=120,s[3].populate(B),i=s[3];const te=[];let X,Y;const ee=(Ve=[],ie,Ae)=>{const Ke=v(Ve),wt=new Set;let nt=Ke.length;const ht={};for(X=ht.from||0,Y=("to"in ht)?ht.to:Ke.length;nt--;){const xe=Ke[nt];nt<Y&&nt>=X&&wt.add(""+xe.id)}let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const xe=Ae[_e];ie[4][xe]&&ie[4][xe].destroy(),delete ie[4][xe]}Ae.length=0;const Le=Ke.length,bt=[];for(let xe=0;xe<Le;xe++){if(xe<X||xe>=Y)continue;const ce=Object.create(o);i=ie[3],ce.item=Ke[xe],ce.index=xe,ce.key=""+ce.item.id,Ae.push(ce.key),i=ie[3],ie[4]===void 0&&(ie[4]={});const Ge={};ie[4][ce.key]===void 0&&(ie[4][ce.key]=this.element({parent:i||"root"},x===!0?y:o)),Ge.w=80,Ge.h=80,Ge.x=ce.item.x*ce.index,Ge.color=ce.item.color,ie[4][ce.key].nodeId===void 0&&ie[4][ce.key].populate(Ge);let Et=()=>{ie[4][ce.key].set("x",ce.item.x*ce.index)};g(Et,null),bt.push(Et)}return bt};let he;g(()=>{o[Symbol.for("removeGlobalEffects")](he),he=null,he=ee(o.collection2,s,te)},["collection2"]),i=s[0];const k={};s[5]=this.element({parent:i||"root"},x===!0?y:o),k.y=220,s[5].populate(k),i=s[5];const V=[];let Z,oe;const K=(Ve=[],ie,Ae)=>{const Ke=v(Ve),wt=new Set;let nt=Ke.length;const ht={};for(Z=ht.from||0,oe=("to"in ht)?ht.to:Ke.length;nt--;)Ke[nt],nt<oe&&nt>=Z&&wt.add(""+nt);let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const xe=Ae[_e];ie[6][xe]&&ie[6][xe].destroy(),delete ie[6][xe]}Ae.length=0;const Le=Ke.length,bt=[];for(let xe=0;xe<Le;xe++){if(xe<Z||xe>=oe)continue;const ce=Object.create(o);i=ie[5],ce.item=Ke[xe],ce.undefined=xe,ce.key=""+xe,Ae.push(ce.key),i=ie[5],ie[6]===void 0&&(ie[6]={});const Ge={};ie[6][ce.key]===void 0&&(ie[6][ce.key]=this.element({parent:i||"root"},x===!0?y:o)),Ge.w=80,Ge.h=80,Ge.x=ce.item.x,Ge.color=ce.item.color,ie[6][ce.key].nodeId===void 0&&ie[6][ce.key].populate(Ge);let Et=()=>{ie[6][ce.key].set("x",ce.item.x)};g(Et,null),bt.push(Et)}return bt};let ne;g(()=>{o[Symbol.for("removeGlobalEffects")](ne),ne=null,ne=K(o.collection3,s,V)},["collection3"]),i=s[0];const W={};s[7]=this.element({parent:i||"root"},x===!0?y:o),W.y=320,s[7].populate(W),i=s[7];const J=[];let fe,ye;const ge=(Ve=[],ie,Ae)=>{const Ke=v(Ve),wt=new Set;let nt=Ke.length;const ht={};for(fe=ht.from||0,ye=("to"in ht)?ht.to:Ke.length;nt--;)Ke[nt],nt<ye&&nt>=fe&&wt.add(""+nt);let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const xe=Ae[_e];ie[8][xe]&&ie[8][xe].destroy(),delete ie[8][xe],ie[9][xe]&&ie[9][xe].destroy(),delete ie[9][xe]}Ae.length=0;const Le=Ke.length,bt=[];for(let xe=0;xe<Le;xe++){if(xe<fe||xe>=ye)continue;const ce=Object.create(o);i=ie[7],ce.item=Ke[xe],ce.index=xe,ce.key=""+xe,Ae.push(ce.key);const Ge=l.components&&l.components.Square||h.Square;ie[8]===void 0&&(ie[8]={});const Et={};ie[8][ce.key]===void 0&&(ie[8][ce.key]=this.element({parent:i||"root"},x===!0?y:o)),Et.x=ce.item.x*ce.index,Et.ref="square"+ce.index,Et.alpha=ce.alpha;const jt=[];if(typeof Ge<"u")for(let qe in Ge[Symbol.for("config")].props)delete Et[Ge[Symbol.for("config")].props[qe]],jt.push(Ge[Symbol.for("config")].props[qe]);ie[8][ce.key].nodeId===void 0&&ie[8][ce.key].populate(Et),ie[9]===void 0&&(ie[9]={}),i=ie[8][ce.key];const Vt={};if(ie[9][ce.key]===void 0){C=ce.item.x*ce.index,Array.isArray(C)===!0&&(C=v(C).slice(0)),Vt.x=C,C="square"+ce.index,Array.isArray(C)===!0&&(C=v(C).slice(0)),Vt.ref=C,C=ce.alpha,Array.isArray(C)===!0&&(C=v(C).slice(0)),Vt.alpha=C,m=Vt.is||"Square";let qe;if(typeof m=="string"){if(qe=l.components&&l.components[m]||h[m],!qe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(qe=m);ie[9][ce.key]=qe.call(null,{props:Vt},ie[8][ce.key],o),ie[9][ce.key][Symbol.for("slots")][0]?(i=ie[9][ce.key][Symbol.for("slots")][0],y=ie[9][ce.key],x=!0):i=ie[9][ce.key][Symbol.for("children")][0]}let un=()=>{(typeof jt>"u"||jt.indexOf("x")===-1)&&ie[8][ce.key].set("x",ce.item.x*ce.index)};g(un,null),bt.push(un);let Be=()=>{(typeof jt>"u"||jt.indexOf("ref")===-1)&&ie[8][ce.key].set("ref","square"+ce.index)};g(Be,null),bt.push(Be),ie[9][ce.key][Symbol.for("props")].x=ce.item.x*ce.index,ie[9][ce.key][Symbol.for("props")].ref="square"+ce.index}return bt};let pe;g(()=>{o[Symbol.for("removeGlobalEffects")](pe),pe=null,pe=ge(o.collection2,s,J)},["collection2"]),g(()=>{o.alpha;for(let Ve=0;Ve<o.collection2.length;Ve++){if(Ve<fe||Ve>=ye)continue;const ie={};ie.index=Ve,ie.item=o.collection2[Ve],ie.key=Ve,(typeof skip8>"u"||skip8.indexOf("alpha")===-1)&&s[8][ie.key].set("alpha",o.alpha)}}),g(()=>{o.alpha;for(let Ve=0;Ve<o.collection2.length;Ve++){if(Ve<fe||Ve>=ye)continue;const ie={};ie.index=Ve,ie.item=o.collection2[Ve],ie.key=Ve,s[9][ie.key][Symbol.for("props")].alpha=o.alpha}}),i=s[0];const Ee={};s[10]=this.element({parent:i||"root"},x===!0?y:o),Ee.y=420,s[10].populate(Ee),i=s[10];const Re=[];let z,Me;const ve=(Ve=[],ie,Ae)=>{const Ke=v(Ve),wt=new Set;let nt=Ke.length;const ht={};for(z=ht.from||0,Me=("to"in ht)?ht.to:Ke.length;nt--;){const xe=Ke[nt];nt<Me&&nt>=z&&wt.add(""+xe.color)}let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const xe=Ae[_e];ie[11][xe]&&ie[11][xe].destroy(),delete ie[11][xe],ie[12][xe]&&ie[12][xe].destroy(),delete ie[12][xe]}Ae.length=0;const Le=Ke.length,bt=[];for(let xe=0;xe<Le;xe++){if(xe<z||xe>=Me)continue;const ce=Object.create(o);i=ie[10],ce.item=Ke[xe],ce.undefined=xe,ce.key=""+ce.item.color,Ae.push(ce.key);const Ge=l.components&&l.components.Square||h.Square;ie[11]===void 0&&(ie[11]={});const Et={};ie[11][ce.key]===void 0&&(ie[11][ce.key]=this.element({parent:i||"root"},x===!0?y:o)),Et.x=ce.item.x,Et.alpha=ce.alpha;const jt=[];if(typeof Ge<"u")for(let Be in Ge[Symbol.for("config")].props)delete Et[Ge[Symbol.for("config")].props[Be]],jt.push(Ge[Symbol.for("config")].props[Be]);ie[11][ce.key].nodeId===void 0&&ie[11][ce.key].populate(Et),ie[12]===void 0&&(ie[12]={}),i=ie[11][ce.key];const Vt={};if(ie[12][ce.key]===void 0){C=ce.item.x,Array.isArray(C)===!0&&(C=v(C).slice(0)),Vt.x=C,C=ce.alpha,Array.isArray(C)===!0&&(C=v(C).slice(0)),Vt.alpha=C,m=Vt.is||"Square";let Be;if(typeof m=="string"){if(Be=l.components&&l.components[m]||h[m],!Be)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Be=m);ie[12][ce.key]=Be.call(null,{props:Vt},ie[11][ce.key],o),ie[12][ce.key][Symbol.for("slots")][0]?(i=ie[12][ce.key][Symbol.for("slots")][0],y=ie[12][ce.key],x=!0):i=ie[12][ce.key][Symbol.for("children")][0]}let un=()=>{(typeof jt>"u"||jt.indexOf("x")===-1)&&ie[11][ce.key].set("x",ce.item.x)};g(un,null),bt.push(un),ie[12][ce.key][Symbol.for("props")].x=ce.item.x}return bt};let Ue;g(()=>{o[Symbol.for("removeGlobalEffects")](Ue),Ue=null,Ue=ve(o.collection3,s,Re)},["collection3"]),g(()=>{o.alpha;for(let Ve=0;Ve<o.collection3.length;Ve++){if(Ve<z||Ve>=Me)continue;const ie={};ie.undefined=Ve,ie.item=o.collection3[Ve],ie.key=ie.item.color,(typeof skip11>"u"||skip11.indexOf("alpha")===-1)&&s[11][ie.key].set("alpha",o.alpha)}}),g(()=>{o.alpha;for(let Ve=0;Ve<o.collection3.length;Ve++){if(Ve<z||Ve>=Me)continue;const ie={};ie.undefined=Ve,ie.item=o.collection3[Ve],ie.key=ie.item.color,s[12][ie.key][Symbol.for("props")].alpha=o.alpha}}),i=s[0];const De={};s[13]=this.element({parent:i||"root"},x===!0?y:o),De.y=520,s[13].populate(De),i=s[13];const We=[];let Xe,ze;const we=(Ve=[],ie,Ae)=>{const Ke=v(Ve),wt=new Set;let nt=Ke.length;const ht={};for(Xe=ht.from||0,ze=("to"in ht)?ht.to:Ke.length;nt--;)Ke[nt],nt<ze&&nt>=Xe&&wt.add(""+nt);let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const xe=Ae[_e];ie[14][xe]&&ie[14][xe].destroy(),delete ie[14][xe]}Ae.length=0;const Le=Ke.length,bt=[];for(let xe=0;xe<Le;xe++){if(xe<Xe||xe>=ze)continue;const ce=Object.create(o);i=ie[13],ce.item=Ke[xe],ce.undefined=xe,ce.key=""+xe,Ae.push(ce.key),i=ie[13],ie[14]===void 0&&(ie[14]={});const Ge={};ie[14][ce.key]===void 0&&(ie[14][ce.key]=this.element({parent:i||"root"},x===!0?y:o)),Ge.w=80,Ge.h=80,Ge.x=ce.item,Ge.color="0xeab308ff",Ge.alpha=ce.alpha,ie[14][ce.key].nodeId===void 0&&ie[14][ce.key].populate(Ge)}return bt};let tt;g(()=>{o[Symbol.for("removeGlobalEffects")](tt),tt=null,tt=we(o.collection1,s,We)},["collection1"]),g(()=>{o.item;for(let Ve=0;Ve<o.collection1.length;Ve++){if(Ve<Xe||Ve>=ze)continue;const ie={};ie.undefined=Ve,ie.item=o.collection1[Ve],ie.key=Ve,s[14][ie.key].set("x",ie.item)}}),g(()=>{o.alpha;for(let Ve=0;Ve<o.collection1.length;Ve++){if(Ve<Xe||Ve>=ze)continue;const ie={};ie.undefined=Ve,ie.item=o.collection1[Ve],ie.key=Ve,s[14][ie.key].set("alpha",o.alpha)}}),i=s[0];const et={};s[15]=this.element({parent:i||"root"},x===!0?y:o),et.y=620,s[15].populate(et),i=s[15];const Ze=[];let it,St;const ut=(Ve=[],ie,Ae)=>{const Ke=v(Ve),wt=new Set;let nt=Ke.length;const ht={};for(it=ht.from||0,St=("to"in ht)?ht.to:Ke.length;nt--;){const xe=Ke[nt];nt<St&&nt>=it&&wt.add(""+xe.id)}let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const xe=Ae[_e];ie[16][xe]&&ie[16][xe].destroy(),delete ie[16][xe]}Ae.length=0;const Le=Ke.length,bt=[];for(let xe=0;xe<Le;xe++){if(xe<it||xe>=St)continue;const ce=Object.create(o);i=ie[15],ce.item=Ke[xe],ce.undefined=xe,ce.key=""+ce.item.id,Ae.push(ce.key),i=ie[15],ie[16]===void 0&&(ie[16]={});const Ge={};ie[16][ce.key]===void 0&&(ie[16][ce.key]=this.element({parent:i||"root"},x===!0?y:o)),Ge.w=80,Ge.h=80,Ge.x=ce.item.x,Ge.color=ce.item.color,Ge.alpha=ce.alpha,ie[16][ce.key].nodeId===void 0&&ie[16][ce.key].populate(Ge);let Et=()=>{ie[16][ce.key].set("x",ce.item.x)};g(Et,null),bt.push(Et)}return bt};let It;g(()=>{o[Symbol.for("removeGlobalEffects")](It),It=null,It=ut(o.collection2,s,Ze)},["collection2"]),g(()=>{o.alpha;for(let Ve=0;Ve<o.collection2.length;Ve++){if(Ve<it||Ve>=St)continue;const ie={};ie.undefined=Ve,ie.item=o.collection2[Ve],ie.key=ie.item.id,s[16][ie.key].set("alpha",o.alpha)}}),i=s[0];const je={};s[17]=this.element({parent:i||"root"},x===!0?y:o),je.y=720,s[17].populate(je),i=s[17];const at=[];let xt,dt;const xn=(Ve=[],ie,Ae)=>{const Ke=v(Ve),wt=new Set;let nt=Ke.length;const ht={};for(xt=ht.from||0,dt=("to"in ht)?ht.to:Ke.length;nt--;){const xe=Ke[nt];nt<dt&&nt>=xt&&wt.add(""+xe.id)}let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const xe=Ae[_e];ie[18][xe]&&ie[18][xe].destroy(),delete ie[18][xe]}Ae.length=0;const Le=Ke.length,bt=[];for(let xe=0;xe<Le;xe++){if(xe<xt||xe>=dt)continue;const ce=Object.create(o);i=ie[17],ce.item=Ke[xe],ce.undefined=xe,ce.key=""+ce.item.id,Ae.push(ce.key),i=ie[17],ie[18]===void 0&&(ie[18]={});const Ge={};ie[18][ce.key]===void 0&&(ie[18][ce.key]=this.element({parent:i||"root"},x===!0?y:o)),Ge.w=80,Ge.h=80,Ge.x=ce.item.x,Ge.color="0x06b6d4ff",ie[18][ce.key].nodeId===void 0&&ie[18][ce.key].populate(Ge);let Et=()=>{ie[18][ce.key].set("x",ce.item.x)};g(Et,null),bt.push(Et)}return bt};let pn;g(()=>{o[Symbol.for("removeGlobalEffects")](pn),pn=null,pn=xn(o.collection4,s,at)},["collection4"]),i=s[0];const zt={};s[19]=this.element({parent:i||"root"},x===!0?y:o),zt.y=720,zt.x=700,s[19].populate(zt),i=s[19];const Ct=[];let Wt,Tt;const Pt=(Ve=[],ie,Ae)=>{const Ke=v(Ve),wt=new Set;let nt=Ke.length;const ht={};for(Wt=ht.from||0,Tt=("to"in ht)?ht.to:Ke.length;nt--;)Ke[nt],nt<Tt&&nt>=Wt&&wt.add(""+nt);let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const xe=Ae[_e];ie[20][xe]&&ie[20][xe].destroy(),delete ie[20][xe]}Ae.length=0;const Le=Ke.length,bt=[];for(let xe=0;xe<Le;xe++){if(xe<Wt||xe>=Tt)continue;const ce=Object.create(o);i=ie[19],ce.item=Ke[xe],ce.undefined=xe,ce.key=""+xe,Ae.push(ce.key),i=ie[19],ie[20]===void 0&&(ie[20]={});const Ge={};ie[20][ce.key]===void 0&&(ie[20][ce.key]=this.element({parent:i||"root"},x===!0?y:o)),Ge.w=80,Ge.h=80,Ge.x=ce.item.x,Ge.color="0x8b5cf6ff",ie[20][ce.key].nodeId===void 0&&ie[20][ce.key].populate(Ge);let Et=()=>{ie[20][ce.key].set("x",ce.item.x)};g(Et,null),bt.push(Et)}return bt};let ln;g(()=>{o[Symbol.for("removeGlobalEffects")](ln),ln=null,ln=Pt(o.collection4,s,Ct)},["collection4"]),i=s[0];const ct={};s[21]=this.element({parent:i||"root"},x===!0?y:o),ct.y=920,s[21].populate(ct),i=s[21];const Pn=[];let an,Bn;const Ot=(Ve=[],ie,Ae)=>{const Ke=v(Ve),wt=new Set;let nt=Ke.length;const ht={};for(an=ht.from||0,Bn=("to"in ht)?ht.to:Ke.length;nt--;){const xe=Ke[nt];nt<Bn&&nt>=an&&wt.add(""+xe.id)}let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const xe=Ae[_e];ie[22][xe]&&ie[22][xe].destroy(),delete ie[22][xe],ie[23][xe]&&ie[23][xe].destroy(),delete ie[23][xe]}Ae.length=0;const Le=Ke.length,bt=[];for(let xe=0;xe<Le;xe++){if(xe<an||xe>=Bn)continue;const ce=Object.create(o);i=ie[21],ce.item=Ke[xe],ce.undefined=xe,ce.key=""+ce.item.id,Ae.push(ce.key);const Ge=l.components&&l.components.Square||h.Square;ie[22]===void 0&&(ie[22]={});const Et={};ie[22][ce.key]===void 0&&(ie[22][ce.key]=this.element({parent:i||"root"},x===!0?y:o)),Et.w=80,Et.h=80,Et.x=ce.item.x;const jt=[];if(typeof Ge<"u")for(let Be in Ge[Symbol.for("config")].props)delete Et[Ge[Symbol.for("config")].props[Be]],jt.push(Ge[Symbol.for("config")].props[Be]);ie[22][ce.key].nodeId===void 0&&ie[22][ce.key].populate(Et),ie[23]===void 0&&(ie[23]={}),i=ie[22][ce.key];const Vt={};if(ie[23][ce.key]===void 0){Vt.w=80,Vt.h=80,C=ce.item.x,Array.isArray(C)===!0&&(C=v(C).slice(0)),Vt.x=C,m=Vt.is||"Square";let Be;if(typeof m=="string"){if(Be=l.components&&l.components[m]||h[m],!Be)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Be=m);ie[23][ce.key]=Be.call(null,{props:Vt},ie[22][ce.key],o),ie[23][ce.key][Symbol.for("slots")][0]?(i=ie[23][ce.key][Symbol.for("slots")][0],y=ie[23][ce.key],x=!0):i=ie[23][ce.key][Symbol.for("children")][0]}let un=()=>{(typeof jt>"u"||jt.indexOf("x")===-1)&&ie[22][ce.key].set("x",ce.item.x)};g(un,null),bt.push(un),ie[23][ce.key][Symbol.for("props")].x=ce.item.x}return bt};let mn;g(()=>{o[Symbol.for("removeGlobalEffects")](mn),mn=null,mn=Ot(o.collection4,s,Pn)},["collection4"]),i=s[0];const bn={};s[24]=this.element({parent:i||"root"},x===!0?y:o),bn.y=920,bn.x=700,s[24].populate(bn),i=s[24];const go=[];let jn,Yn;const Fn=(Ve=[],ie,Ae)=>{const Ke=v(Ve),wt=new Set;let nt=Ke.length;const ht={};for(jn=ht.from||0,Yn=("to"in ht)?ht.to:Ke.length;nt--;)Ke[nt],nt<Yn&&nt>=jn&&wt.add(""+nt);let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const xe=Ae[_e];ie[25][xe]&&ie[25][xe].destroy(),delete ie[25][xe],ie[26][xe]&&ie[26][xe].destroy(),delete ie[26][xe]}Ae.length=0;const Le=Ke.length,bt=[];for(let xe=0;xe<Le;xe++){if(xe<jn||xe>=Yn)continue;const ce=Object.create(o);i=ie[24],ce.item=Ke[xe],ce.undefined=xe,ce.key=""+xe,Ae.push(ce.key);const Ge=l.components&&l.components.Square||h.Square;ie[25]===void 0&&(ie[25]={});const Et={};ie[25][ce.key]===void 0&&(ie[25][ce.key]=this.element({parent:i||"root"},x===!0?y:o)),Et.w=80,Et.h=80,Et.x=ce.item.x;const jt=[];if(typeof Ge<"u")for(let Be in Ge[Symbol.for("config")].props)delete Et[Ge[Symbol.for("config")].props[Be]],jt.push(Ge[Symbol.for("config")].props[Be]);ie[25][ce.key].nodeId===void 0&&ie[25][ce.key].populate(Et),ie[26]===void 0&&(ie[26]={}),i=ie[25][ce.key];const Vt={};if(ie[26][ce.key]===void 0){Vt.w=80,Vt.h=80,C=ce.item.x,Array.isArray(C)===!0&&(C=v(C).slice(0)),Vt.x=C,m=Vt.is||"Square";let Be;if(typeof m=="string"){if(Be=l.components&&l.components[m]||h[m],!Be)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Be=m);ie[26][ce.key]=Be.call(null,{props:Vt},ie[25][ce.key],o),ie[26][ce.key][Symbol.for("slots")][0]?(i=ie[26][ce.key][Symbol.for("slots")][0],y=ie[26][ce.key],x=!0):i=ie[26][ce.key][Symbol.for("children")][0]}let un=()=>{(typeof jt>"u"||jt.indexOf("x")===-1)&&ie[25][ce.key].set("x",ce.item.x)};g(un,null),bt.push(un),ie[26][ce.key][Symbol.for("props")].x=ce.item.x}return bt};let Rn;return g(()=>{o[Symbol.for("removeGlobalEffects")](Rn),Rn=null,Rn=Fn(o.collection4,s,go)},["collection4"]),s},effects:[],context:{}},state(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:ti[0]},{id:"block2",x:100,color:ti[1]},{id:"block3",x:200,color:ti[2]},{id:"block4",x:300,color:ti[3]},{id:"block5",x:400,color:ti[4]},{id:"block6",x:500,color:ti[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=ti[5],this.collection2[1].color=ti[4],this.collection2[2].color=ti[3],this.collection2[3].color=ti[2],this.collection2[4].color=ti[1],this.collection2[5].color=ti[0]},4e3);let f=0;const i=this.$setInterval(()=>{this.collection3.push({x:f*100,color:ti[f]}),f++,f===ti.length&&clearInterval(i)},1e3);this.$setInterval(()=>{this.alpha=this.alpha===.5?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),MC=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],_C=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],RC=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],Vm=f=>Math.round(Math.random()*1e3)%f;let D6=0;const Ou=()=>({id:D6++,text:`${MC[Vm(MC.length)]} ${_C[Vm(_C.length)]} ${RC[Vm(RC.length)]}`}),P6=(f=1)=>{const i=[];for(let o=0;o<f;o++)i.push(Ou());return i},O6=Je.Component("LegendItem",{code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(x-=1);const b=l.components&&l.components.Circle||h.Circle;i=s[0];const _={};s[1]=this.element({parent:i||"root"},y===!0?C:o),_.color="0xfb923cff",_.size=60;const P=[];if(typeof b<"u")for(let te in b[Symbol.for("config")].props)delete _[b[Symbol.for("config")].props[te]],P.push(b[Symbol.for("config")].props[te]);s[1].populate(_),y===!0&&(x-=1),i=s[1];const j={};j.color="0xfb923cff",j.size=60,m=j.is||"Circle";let H;if(typeof m=="string"){if(H=l.components&&l.components[m]||h[m],!H)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(H=m);s[2]=H.call(null,{props:j},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],C=s[2],y=!0):i=s[2][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),i=s[0];const $={};s[3]=this.element({parent:i||"root"},y===!0?C:o),$.color="0xe5e5e5ff",$.size=32,$.y=10,$.maxwidth=57,$.align="center",$.content=""+o.id,$.__textnode=!0,s[3].populate($),y===!0&&(x-=1),i=s[0];const B={};return s[4]=this.element({parent:i||"root"},y===!0?C:o),B.color="0xe5e5e5ff",B.x=80,B.y=14,B.size=28,B.content=""+o.text,B.__textnode=!0,s[4].populate(B),y===!0&&(x-=1),s},effects:[],context:{}},props:["id","text"]}),NT=Je.Component("Row",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=380,m.h=60,m.y=o.index*80,m.color="0xfff7edff",s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=10,C.h=60,C.color="0x06b6d4ff",s[1].populate(C),i=s[0];const y={};return s[2]=this.element({parent:i||"root"},o),y.content=o.text,y.x=30,y.y=15,y.font="lato",y.size=28,y.color=o.activeRow==o.index?"0x06b6d4ff":"0x1e293bff",y.__textnode=!0,s[2].populate(y),s},effects:[function(i,o,l,h,g,v){o[0].set("y",i.index*80)},function(i,o,l,h,g,v){o[2].set("content",i.text)},function(i,o,l,h,g,v){o[2].set("color",i.activeRow==i.index?"0x06b6d4ff":"0x1e293bff")}],context:{}},props:["index","text","activeRow"]}),N6=Je.Component("Rows",{components:{Row:NT},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1;const M={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(M),i=s[0];const b=[];let _,P;const j=($=[],B,te)=>{const X=v($),Y=new Set;let ee=X.length;const he={};for(_=he.from||0,P=("to"in he)?he.to:X.length;ee--;){const oe=X[ee];ee<P&&ee>=_&&Y.add(""+oe.id+"key2")}let k=te.length;for(;k--;)if(Y.has(te[k])===!1){const oe=te[k];B[1][oe]&&B[1][oe].destroy(),delete B[1][oe],B[2][oe]&&B[2][oe].destroy(),delete B[2][oe]}te.length=0;const V=X.length,Z=[];for(let oe=0;oe<V;oe++){if(oe<_||oe>=P)continue;const K=Object.create(o);i=B[0],K.item=X[oe],K.index=oe,K.key=""+K.item.id+"key2",te.push(K.key);const ne=l.components&&l.components.Row||h.Row;B[1]===void 0&&(B[1]={});const W={};B[1][K.key]===void 0&&(B[1][K.key]=this.element({parent:i||"root"},x===!0?y:o)),W.activeRow=K.activeRowIndex,W.index=K.index,W.text=K.item.text,W.y=50;const J=[];if(typeof ne<"u")for(let pe in ne[Symbol.for("config")].props)delete W[ne[Symbol.for("config")].props[pe]],J.push(ne[Symbol.for("config")].props[pe]);B[1][K.key].nodeId===void 0&&B[1][K.key].populate(W),B[2]===void 0&&(B[2]={}),i=B[1][K.key];const fe={};if(B[2][K.key]===void 0){C=K.activeRowIndex,Array.isArray(C)===!0&&(C=v(C).slice(0)),fe.activeRow=C,C=K.index,Array.isArray(C)===!0&&(C=v(C).slice(0)),fe.index=C,C=K.item.text,Array.isArray(C)===!0&&(C=v(C).slice(0)),fe.text=C,fe.y=50,m=fe.is||"Row";let pe;if(typeof m=="string"){if(pe=l.components&&l.components[m]||h[m],!pe)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);B[2][K.key]=pe.call(null,{props:fe},B[1][K.key],o),B[2][K.key][Symbol.for("slots")][0]?(i=B[2][K.key][Symbol.for("slots")][0],y=B[2][K.key],x=!0):i=B[2][K.key][Symbol.for("children")][0]}let ye=()=>{(typeof J>"u"||J.indexOf("index")===-1)&&B[1][K.key].set("index",K.index)};g(ye,null),Z.push(ye);let ge=()=>{(typeof J>"u"||J.indexOf("text")===-1)&&B[1][K.key].set("text",K.item.text)};g(ge,null),Z.push(ge),B[2][K.key][Symbol.for("props")].index=K.index,B[2][K.key][Symbol.for("props")].text=K.item.text}return Z};let H;return g(()=>{o[Symbol.for("removeGlobalEffects")](H),H=null,H=j(o.data,s,b)},["data"]),g(()=>{o.activeRowIndex;for(let $=0;$<o.data.length;$++){if($<_||$>=P)continue;const B={};B.index=$,B.item=o.data[$],B.key=B.item.id+"key2",(typeof skip1>"u"||skip1.indexOf("activeRow")===-1)&&s[1][B.key].set("activeRow",o.activeRowIndex)}}),g(()=>{o.activeRowIndex;for(let $=0;$<o.data.length;$++){if($<_||$>=P)continue;const B={};B.index=$,B.item=o.data[$],B.key=B.item.id+"key2",s[2][B.key][Symbol.for("props")].activeRow=o.activeRowIndex}}),s},effects:[],context:{}},props:["data","activeRowIndex"]}),U6=Je.Component("ForLoop",{components:{Square:rl,LegendItem:O6,Row:NT,Rows:N6},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(b),x===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},x===!0?y:o),_.x=100,_.y=60,_.size=48,_.content="Array operations test",_.__textnode=!0,s[1].populate(_),x===!0&&(M-=1),i=s[0];const P={};s[2]=this.element({parent:i||"root"},x===!0?y:o),P.y=170,P.x=140,s[2].populate(P),x===!0&&(M-=1),i=s[2];const j={};s[3]=this.element({parent:i||"root"},x===!0?y:o),j.x="-10",j.w=500,j.h=80,j.color="0x64748bff",j.y={transition:o.y},j.alpha={transition:!o.hide},s[3].populate(j),x===!0&&(M-=1);const H=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const $={};s[4]=this.element({parent:i||"root"},x===!0?y:o),$.y=0,$.id="a",$.text="Fill array by assignment";const B=[];if(typeof H<"u")for(let _e in H[Symbol.for("config")].props)delete $[H[Symbol.for("config")].props[_e]],B.push(H[Symbol.for("config")].props[_e]);s[4].populate($),x===!0&&(M-=1),i=s[4];const te={};te.y=0,te.id="a",te.text="Fill array by assignment",m=te.is||"LegendItem";let X;if(typeof m=="string"){if(X=l.components&&l.components[m]||h[m],!X)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(X=m);s[5]=X.call(null,{props:te},s[4],o),s[5][Symbol.for("slots")][0]?(i=s[5][Symbol.for("slots")][0],y=s[5],x=!0):i=s[5][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Y=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const ee={};s[6]=this.element({parent:i||"root"},x===!0?y:o),ee.y=90,ee.id="b",ee.text="Push new item to array";const he=[];if(typeof Y<"u")for(let _e in Y[Symbol.for("config")].props)delete ee[Y[Symbol.for("config")].props[_e]],he.push(Y[Symbol.for("config")].props[_e]);s[6].populate(ee),x===!0&&(M-=1),i=s[6];const k={};k.y=90,k.id="b",k.text="Push new item to array",m=k.is||"LegendItem";let V;if(typeof m=="string"){if(V=l.components&&l.components[m]||h[m],!V)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);s[7]=V.call(null,{props:k},s[6],o),s[7][Symbol.for("slots")][0]?(i=s[7][Symbol.for("slots")][0],y=s[7],x=!0):i=s[7][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Z=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const oe={};s[8]=this.element({parent:i||"root"},x===!0?y:o),oe.y=180,oe.id="c",oe.text="Pop item from array";const K=[];if(typeof Z<"u")for(let _e in Z[Symbol.for("config")].props)delete oe[Z[Symbol.for("config")].props[_e]],K.push(Z[Symbol.for("config")].props[_e]);s[8].populate(oe),x===!0&&(M-=1),i=s[8];const ne={};ne.y=180,ne.id="c",ne.text="Pop item from array",m=ne.is||"LegendItem";let W;if(typeof m=="string"){if(W=l.components&&l.components[m]||h[m],!W)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);s[9]=W.call(null,{props:ne},s[8],o),s[9][Symbol.for("slots")][0]?(i=s[9][Symbol.for("slots")][0],y=s[9],x=!0):i=s[9][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const J=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const fe={};s[10]=this.element({parent:i||"root"},x===!0?y:o),fe.y=270,fe.id="d",fe.text="Shift item from array";const ye=[];if(typeof J<"u")for(let _e in J[Symbol.for("config")].props)delete fe[J[Symbol.for("config")].props[_e]],ye.push(J[Symbol.for("config")].props[_e]);s[10].populate(fe),x===!0&&(M-=1),i=s[10];const ge={};ge.y=270,ge.id="d",ge.text="Shift item from array",m=ge.is||"LegendItem";let pe;if(typeof m=="string"){if(pe=l.components&&l.components[m]||h[m],!pe)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);s[11]=pe.call(null,{props:ge},s[10],o),s[11][Symbol.for("slots")][0]?(i=s[11][Symbol.for("slots")][0],y=s[11],x=!0):i=s[11][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Ee=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const Re={};s[12]=this.element({parent:i||"root"},x===!0?y:o),Re.y=360,Re.id="e",Re.text="Splice 2 items from array";const z=[];if(typeof Ee<"u")for(let _e in Ee[Symbol.for("config")].props)delete Re[Ee[Symbol.for("config")].props[_e]],z.push(Ee[Symbol.for("config")].props[_e]);s[12].populate(Re),x===!0&&(M-=1),i=s[12];const Me={};Me.y=360,Me.id="e",Me.text="Splice 2 items from array",m=Me.is||"LegendItem";let ve;if(typeof m=="string"){if(ve=l.components&&l.components[m]||h[m],!ve)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ve=m);s[13]=ve.call(null,{props:Me},s[12],o),s[13][Symbol.for("slots")][0]?(i=s[13][Symbol.for("slots")][0],y=s[13],x=!0):i=s[13][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Ue=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const De={};s[14]=this.element({parent:i||"root"},x===!0?y:o),De.y=450,De.id="f",De.text="Unshift 2 items into array";const We=[];if(typeof Ue<"u")for(let _e in Ue[Symbol.for("config")].props)delete De[Ue[Symbol.for("config")].props[_e]],We.push(Ue[Symbol.for("config")].props[_e]);s[14].populate(De),x===!0&&(M-=1),i=s[14];const Xe={};Xe.y=450,Xe.id="f",Xe.text="Unshift 2 items into array",m=Xe.is||"LegendItem";let ze;if(typeof m=="string"){if(ze=l.components&&l.components[m]||h[m],!ze)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ze=m);s[15]=ze.call(null,{props:Xe},s[14],o),s[15][Symbol.for("slots")][0]?(i=s[15][Symbol.for("slots")][0],y=s[15],x=!0):i=s[15][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const we=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const tt={};s[16]=this.element({parent:i||"root"},x===!0?y:o),tt.y=540,tt.id="g",tt.text="Empty array by assignment";const et=[];if(typeof we<"u")for(let _e in we[Symbol.for("config")].props)delete tt[we[Symbol.for("config")].props[_e]],et.push(we[Symbol.for("config")].props[_e]);s[16].populate(tt),x===!0&&(M-=1),i=s[16];const Ze={};Ze.y=540,Ze.id="g",Ze.text="Empty array by assignment",m=Ze.is||"LegendItem";let it;if(typeof m=="string"){if(it=l.components&&l.components[m]||h[m],!it)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(it=m);s[17]=it.call(null,{props:Ze},s[16],o),s[17][Symbol.for("slots")][0]?(i=s[17][Symbol.for("slots")][0],y=s[17],x=!0):i=s[17][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const St=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const ut={};s[18]=this.element({parent:i||"root"},x===!0?y:o),ut.y=630,ut.id="h",ut.text="Concat an array with items";const It=[];if(typeof St<"u")for(let _e in St[Symbol.for("config")].props)delete ut[St[Symbol.for("config")].props[_e]],It.push(St[Symbol.for("config")].props[_e]);s[18].populate(ut),x===!0&&(M-=1),i=s[18];const je={};je.y=630,je.id="h",je.text="Concat an array with items",m=je.is||"LegendItem";let at;if(typeof m=="string"){if(at=l.components&&l.components[m]||h[m],!at)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(at=m);s[19]=at.call(null,{props:je},s[18],o),s[19][Symbol.for("slots")][0]?(i=s[19][Symbol.for("slots")][0],y=s[19],x=!0):i=s[19][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const xt=l.components&&l.components.LegendItem||h.LegendItem;i=s[2];const dt={};s[20]=this.element({parent:i||"root"},x===!0?y:o),dt.y=720,dt.id="i",dt.text="Sort array alphabetically";const xn=[];if(typeof xt<"u")for(let _e in xt[Symbol.for("config")].props)delete dt[xt[Symbol.for("config")].props[_e]],xn.push(xt[Symbol.for("config")].props[_e]);s[20].populate(dt),x===!0&&(M-=1),i=s[20];const pn={};pn.y=720,pn.id="i",pn.text="Sort array alphabetically",m=pn.is||"LegendItem";let zt;if(typeof m=="string"){if(zt=l.components&&l.components[m]||h[m],!zt)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(zt=m);s[21]=zt.call(null,{props:pn},s[20],o),s[21][Symbol.for("slots")][0]?(i=s[21][Symbol.for("slots")][0],y=s[21],x=!0):i=s[21][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[2];const Ct={};s[22]=this.element({parent:i||"root"},x===!0?y:o),Ct.y=840,s[22].populate(Ct),x===!0&&(M-=1),i=s[22];const Wt={};s[23]=this.element({parent:i||"root"},x===!0?y:o),Wt.size=26,Wt.y=10,Wt.content="Array length:",Wt.__textnode=!0,s[23].populate(Wt),x===!0&&(M-=1),i=s[22];const Tt={};s[24]=this.element({parent:i||"root"},x===!0?y:o),Tt.content=o.data.length,Tt.size=40,Tt.x=180,Tt.color="0xfb923cff",Tt.__textnode=!0,s[24].populate(Tt),x===!0&&(M-=1),i=s[0];const Pt={};s[25]=this.element({parent:i||"root"},x===!0?y:o),Pt.x=660,Pt.y=100,s[25].populate(Pt),x===!0&&(M-=1),i=s[25];const ln={};s[26]=this.element({parent:i||"root"},x===!0?y:o),ln.content="For loop on Element",ln.__textnode=!0,s[26].populate(ln),x===!0&&(M-=1),i=s[25];const ct=[];let Pn,an;const Bn=(_e=[],Le,bt)=>{const xe=v(_e),ce=new Set;let Ge=xe.length;const Et={};for(Pn=Et.from||0,an=("to"in Et)?Et.to:xe.length;Ge--;){const Be=xe[Ge];Ge<an&&Ge>=Pn&&ce.add(""+Be.id+"key")}let jt=bt.length;for(;jt--;)if(ce.has(bt[jt])===!1){const Be=bt[jt];Le[27][Be]&&Le[27][Be].destroy(),delete Le[27][Be],Le[28][Be]&&Le[28][Be].destroy(),delete Le[28][Be],Le[29][Be]&&Le[29][Be].destroy(),delete Le[29][Be]}bt.length=0;const Vt=xe.length,un=[];for(let Be=0;Be<Vt;Be++){if(Be<Pn||Be>=an)continue;const qe=Object.create(o);i=Le[25],qe.item=xe[Be],qe.index=Be,qe.key=""+qe.item.id+"key",bt.push(qe.key),i=Le[25],Le[27]===void 0&&(Le[27]={});const On={};Le[27][qe.key]===void 0&&(Le[27][qe.key]=this.element({parent:i||"root"},x===!0?y:o)),On.w=380,On.h=60,On.y=qe.index*80+50,On.color="0xfff7edff",Le[27][qe.key].nodeId===void 0&&(Le[27][qe.key].populate(On),x===!0&&(M-=1)),i=Le[27][qe.key],Le[28]===void 0&&(Le[28]={});const wn={};Le[28][qe.key]===void 0&&(Le[28][qe.key]=this.element({parent:i||"root"},x===!0?y:o)),wn.w=10,wn.h=60,wn.color="0xfb923cff",Le[28][qe.key].nodeId===void 0&&(Le[28][qe.key].populate(wn),x===!0&&(M-=1)),i=Le[27][qe.key],Le[29]===void 0&&(Le[29]={});const gn={};Le[29][qe.key]===void 0&&(Le[29][qe.key]=this.element({parent:i||"root"},x===!0?y:o)),gn.content=qe.item.text,gn.x=30,gn.y=15,gn.font="lato",gn.size=28,gn.color=qe.activeRowIndex===qe.index?"0x06b6d4ff":"0x1e293bff",gn.__textnode=!0,Le[29][qe.key].nodeId===void 0&&(Le[29][qe.key].populate(gn),x===!0&&(M-=1));let $n=()=>{Le[27][qe.key].set("y",qe.index*80+50)};g($n,null),un.push($n);let Jn=()=>{Le[29][qe.key].set("content",qe.item.text)};g(Jn,null),un.push(Jn)}return un};let Ot;g(()=>{o[Symbol.for("removeGlobalEffects")](Ot),Ot=null,Ot=Bn(o.data,s,ct)},["data"]),g(()=>{o.activeRowIndex;for(let _e=0;_e<o.data.length;_e++){if(_e<Pn||_e>=an)continue;const Le={};Le.index=_e,Le.item=o.data[_e],Le.key=Le.item.id+"key",s[29][Le.key].set("color",o.activeRowIndex===Le.index?"0x06b6d4ff":"0x1e293bff")}}),i=s[0];const mn={};s[30]=this.element({parent:i||"root"},x===!0?y:o),mn.x=1080,mn.y=100,s[30].populate(mn),x===!0&&(M-=1),i=s[30];const bn={};s[31]=this.element({parent:i||"root"},x===!0?y:o),bn.content="For loop on Component",bn.__textnode=!0,s[31].populate(bn),x===!0&&(M-=1),i=s[30];const go=[];let jn,Yn;const Fn=(_e=[],Le,bt)=>{const xe=v(_e),ce=new Set;let Ge=xe.length;const Et={};for(jn=Et.from||0,Yn=("to"in Et)?Et.to:xe.length;Ge--;){const Be=xe[Ge];Ge<Yn&&Ge>=jn&&ce.add(""+Be.id+"key2")}let jt=bt.length;for(;jt--;)if(ce.has(bt[jt])===!1){const Be=bt[jt];Le[32][Be]&&Le[32][Be].destroy(),delete Le[32][Be],Le[33][Be]&&Le[33][Be].destroy(),delete Le[33][Be]}bt.length=0;const Vt=xe.length,un=[];for(let Be=0;Be<Vt;Be++){if(Be<jn||Be>=Yn)continue;const qe=Object.create(o);i=Le[30],qe.item=xe[Be],qe.index=Be,qe.key=""+qe.item.id+"key2",bt.push(qe.key);const On=l.components&&l.components.Row||h.Row;Le[32]===void 0&&(Le[32]={});const wn={};Le[32][qe.key]===void 0&&(Le[32][qe.key]=this.element({parent:i||"root"},x===!0?y:o)),wn.activeRow=(qe.count>0,qe.activeRowIndex),wn.index=qe.index,wn.text=qe.item.text,wn.y=50;const gn=[];if(typeof On<"u")for(let fo in On[Symbol.for("config")].props)delete wn[On[Symbol.for("config")].props[fo]],gn.push(On[Symbol.for("config")].props[fo]);Le[32][qe.key].nodeId===void 0&&(Le[32][qe.key].populate(wn),x===!0&&(M-=1)),Le[33]===void 0&&(Le[33]={}),i=Le[32][qe.key];const $n={};if(Le[33][qe.key]===void 0){C=(qe.count>0,qe.activeRowIndex),Array.isArray(C)===!0&&(C=v(C).slice(0)),$n.activeRow=C,C=qe.index,Array.isArray(C)===!0&&(C=v(C).slice(0)),$n.index=C,C=qe.item.text,Array.isArray(C)===!0&&(C=v(C).slice(0)),$n.text=C,$n.y=50,m=$n.is||"Row";let fo;if(typeof m=="string"){if(fo=l.components&&l.components[m]||h[m],!fo)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fo=m);Le[33][qe.key]=fo.call(null,{props:$n},Le[32][qe.key],o),Le[33][qe.key][Symbol.for("slots")][0]?(i=Le[33][qe.key][Symbol.for("slots")][0],y=Le[33][qe.key],x=!0):i=Le[33][qe.key][Symbol.for("children")][0]}let Jn=()=>{(typeof gn>"u"||gn.indexOf("index")===-1)&&Le[32][qe.key].set("index",qe.index)};g(Jn,null),un.push(Jn);let kt=()=>{(typeof gn>"u"||gn.indexOf("text")===-1)&&Le[32][qe.key].set("text",qe.item.text)};g(kt,null),un.push(kt),Le[33][qe.key][Symbol.for("props")].index=qe.index,Le[33][qe.key][Symbol.for("props")].text=qe.item.text}return un};let Rn;g(()=>{o[Symbol.for("removeGlobalEffects")](Rn),Rn=null,Rn=Fn(o.data,s,go)},["data"]),g(()=>{o.activeRowIndex,o.count;for(let _e=0;_e<o.data.length;_e++){if(_e<jn||_e>=Yn)continue;const Le={};Le.index=_e,Le.item=o.data[_e],Le.key=Le.item.id+"key2",(typeof skip32>"u"||skip32.indexOf("activeRow")===-1)&&s[32][Le.key].set("activeRow",(o.count>0,o.activeRowIndex))}}),g(()=>{o.activeRowIndex,o.count;for(let _e=0;_e<o.data.length;_e++){if(_e<jn||_e>=Yn)continue;const Le={};Le.index=_e,Le.item=o.data[_e],Le.key=Le.item.id+"key2",s[33][Le.key][Symbol.for("props")].activeRow=(o.count>0,o.activeRowIndex)}}),i=s[0];const Ve={};s[34]=this.element({parent:i||"root"},x===!0?y:o),Ve.x=1500,Ve.y=100,s[34].populate(Ve),x===!0&&(M-=1),i=s[34];const ie={};s[35]=this.element({parent:i||"root"},x===!0?y:o),ie.content="RowsComponent",ie.__textnode=!0,s[35].populate(ie),x===!0&&(M-=1);const Ae=l.components&&l.components.Rows||h.Rows;i=s[34];const Ke={};s[36]=this.element({parent:i||"root"},x===!0?y:o),Ke.data=o.data,Ke.activeRowIndex=o.activeRowIndex;const wt=[];if(typeof Ae<"u")for(let _e in Ae[Symbol.for("config")].props)delete Ke[Ae[Symbol.for("config")].props[_e]],wt.push(Ae[Symbol.for("config")].props[_e]);s[36].populate(Ke),x===!0&&(M-=1),i=s[36];const nt={};C=o.data,Array.isArray(C)===!0&&(C=v(C).slice(0)),nt.data=C,C=o.activeRowIndex,Array.isArray(C)===!0&&(C=v(C).slice(0)),nt.activeRowIndex=C,m=nt.is||"Rows";let ht;if(typeof m=="string"){if(ht=l.components&&l.components[m]||h[m],!ht)throw new Error('Component "Rows" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ht=m);return s[37]=ht.call(null,{props:nt},s[36],o),s[37][Symbol.for("slots")][0]?(i=s[37][Symbol.for("slots")][0],y=s[37],x=!0):i=s[37][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),s},effects:[function(i,o,l,h,g,v){o[3].set("y",{transition:i.y})},function(i,o,l,h,g,v){o[3].set("alpha",{transition:!i.hide})},function(i,o,l,h,g,v){o[24].set("content",i.data.length)},function(i,o,l,h,g,v){(typeof skip36>"u"||skip36.indexOf("data")===-1)&&o[36].set("data",i.data)},function(i,o,l,h,g,v){(typeof skip36>"u"||skip36.indexOf("activeRowIndex")===-1)&&o[36].set("activeRowIndex",i.activeRowIndex)},function(i,o,l,h,g,v){o[37][Symbol.for("props")].data=i.data},function(i,o,l,h,g,v){o[37][Symbol.for("props")].activeRowIndex=i.activeRowIndex}],context:{}},state(){return{count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1,activeRowIndex:0}},computed:{show(){return this.hide,this.hide===!0},data2(){return this.data,this.data}},watch:{y(){this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(()=>{this.hide=!0},600)}},input:{a(){this.y=-10,this.$trigger("y");const f=[];for(let i=0;i<6;i++)f.push(Ou());this.data=f},b(){this.y=80,this.$trigger("y"),this.data.push(Ou())},c(){this.y=170,this.$trigger("y"),this.data.pop()},d(){this.y=260,this.$trigger("y"),this.data.shift()},e(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f(){this.y=440,this.data.unshift(Ou(),Ou())},g(){this.y=530,this.$trigger("y"),this.data=[]},h(){this.y=620,this.$trigger("y"),this.data=this.data.concat(P6(3))},i(){this.y=710,this.$trigger("y"),this.sortDirection=this.sortDirection===1?0:1,this.data=this.data.sort((f,i)=>{const o=f.text.toLowerCase(),l=i.text.toLowerCase();return this.sortDirection===1?o<l?-1:o>l?1:0:o>l?-1:o<l?1:0})},up(){this.activeRowIndex>0&&(this.activeRowIndex-=1)},down(){this.activeRowIndex<this.data.length-1&&(this.activeRowIndex+=1)}}}),B6=Je.Component("Effects",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=160,C.h=160,C.x=40,C.y=40,C.color="0xfb923cff",C.effects=[{type:"radius",props:{radius:44}}],s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.w=160,y.h=160,y.x=240,y.y=40,y.color="0xd97706ff",y.effects=[{type:"radius",props:{radius:25}}],s[2].populate(y),i=s[0];const x={};s[3]=this.element({parent:i||"root"},o),x.w=160,x.h=160,x.x=440,x.y=40,x.color="0xb45309ff",x.effects=[{type:"radius",props:{radius:80}}],s[3].populate(x),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.w=160,M.h=160,M.x=640,M.y=40,M.color="0x78350fff",M.effects=[{type:"radius",props:{radius:10}}],s[4].populate(M),i=s[0];const b={};s[5]=this.element({parent:i||"root"},o),b.w=160,b.h=160,b.x=40,b.y=240,b.color="0x65a30dff",b.effects=[{type:"radius",props:{radius:o.radius}}],s[5].populate(b),i=s[0];const _={};s[6]=this.element({parent:i||"root"},o),_.w=300,_.h=300,_.x=40,_.y=440,_.color="0x0c4a6eff",_.effects=[{type:"radius",props:{radius:30}}],s[6].populate(_),i=s[6];const P={};s[7]=this.element({parent:i||"root"},o),P.w=200,P.h=200,P.x=50,P.y=50,P.color="0x0284c7ff",P.effects=[{type:"radius",props:{radius:40}}],s[7].populate(P),i=s[7];const j={};s[8]=this.element({parent:i||"root"},o),j.w=100,j.h=100,j.x=50,j.y=50,j.color="0x38bdf8ff",j.effects=[{type:"radius",props:{radius:50}}],s[8].populate(j),i=s[8];const H={};s[9]=this.element({parent:i||"root"},o),H.w=40,H.h=40,H.x=30,H.y=30,H.color="0xbae6fdff",H.effects=[{type:"radius",props:{radius:20}}],s[9].populate(H),i=s[0];const $={};s[10]=this.element({parent:i||"root"},o),$.w=160,$.h=160,$.x=840,$.y=40,$.color="0x3b82f6ff",$.effects=[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}],s[10].populate($),i=s[0];const B={};return s[11]=this.element({parent:i||"root"},o),B.w=160,B.h=160,B.x=1040,B.y=40,B.color="0x500724ff",B.effects=o.effects,s[11].populate(B),s},effects:[function(i,o,l,h,g,v){o[1].set("effects",[{type:"radius",props:{radius:44}}])},function(i,o,l,h,g,v){o[2].set("effects",[{type:"radius",props:{radius:25}}])},function(i,o,l,h,g,v){o[3].set("effects",[{type:"radius",props:{radius:80}}])},function(i,o,l,h,g,v){o[4].set("effects",[{type:"radius",props:{radius:10}}])},function(i,o,l,h,g,v){o[5].set("effects",[{type:"radius",props:{radius:i.radius}}])},function(i,o,l,h,g,v){o[6].set("effects",[{type:"radius",props:{radius:30}}])},function(i,o,l,h,g,v){o[7].set("effects",[{type:"radius",props:{radius:40}}])},function(i,o,l,h,g,v){o[8].set("effects",[{type:"radius",props:{radius:50}}])},function(i,o,l,h,g,v){o[9].set("effects",[{type:"radius",props:{radius:20}}])},function(i,o,l,h,g,v){o[10].set("effects",[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}])},function(i,o,l,h,g,v){o[11].set("effects",i.effects)}],context:{}},state(){return{direction:"up",radius:0,effects:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(i,80),0),this.radius===80&&(this.direction="down"),this.radius===0&&(this.direction="up")},500);let f=0;this.$setInterval(()=>{f++,f%2?this.effects=[{type:"borderTop",props:{width:50,color:"#f43f5e"}},{type:"borderBottom",props:{width:50,color:"#be123c"}}]:this.effects=[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]},2e3)}}}),j6=Je.Component("ShowIf",{components:{Square:rl},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(b),x===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},x===!0?y:o),_.y=40,s[1].populate(_),x===!0&&(M-=1),i=s[1];const P={};s[2]=this.element({parent:i||"root"},x===!0?y:o),P.x=50,P.w=200,P.h=300,P.color="0xbef264ff",P.show=!0,s[2].populate(P),x===!0&&(M-=1),i=s[1];const j={};s[3]=this.element({parent:i||"root"},x===!0?y:o),j.x=350,j.w=200,j.h=300,j.color="0xff0000ff",j.show=!1,s[3].populate(j),x===!0&&(M-=1),i=s[1];const H={};s[4]=this.element({parent:i||"root"},x===!0?y:o),H.x=650,H.w=200,H.h=300,H.color="0x84cc16ff",H.show=1,s[4].populate(H),x===!0&&(M-=1),i=s[1];const $={};s[5]=this.element({parent:i||"root"},x===!0?y:o),$.x=950,$.w=200,$.h=300,$.color="0xff0000ff",$.show=0,s[5].populate($),x===!0&&(M-=1),i=s[0];const B={};s[6]=this.element({parent:i||"root"},x===!0?y:o),B.y=380,s[6].populate(B),x===!0&&(M-=1),i=s[6];const te={};s[7]=this.element({parent:i||"root"},x===!0?y:o),te.x=50,te.w=200,te.h=300,te.color="0xfde047ff",te.show=o.showNr,s[7].populate(te),x===!0&&(M-=1),i=s[6];const X={};s[8]=this.element({parent:i||"root"},x===!0?y:o),X.x=350,X.w=200,X.h=300,X.color="0x0000ffff",X.show=o.hideNr,s[8].populate(X),x===!0&&(M-=1),i=s[6];const Y={};s[9]=this.element({parent:i||"root"},x===!0?y:o),Y.x=650,Y.w=200,Y.h=300,Y.color="0x84cc16ff",Y.show=o.showBool,s[9].populate(Y),x===!0&&(M-=1),i=s[6];const ee={};s[10]=this.element({parent:i||"root"},x===!0?y:o),ee.x=950,ee.w=200,ee.h=300,ee.color="0xff0000ff",ee.show=o.hideBool,s[10].populate(ee),x===!0&&(M-=1),i=s[0];const he={};s[11]=this.element({parent:i||"root"},x===!0?y:o),he.y=720,s[11].populate(he),x===!0&&(M-=1),i=s[11];const k={};s[12]=this.element({parent:i||"root"},x===!0?y:o),k.x=50,k.w=200,k.h=300,k.color="0x5eead4ff",k.show=o.showHideToggle,s[12].populate(k),x===!0&&(M-=1),i=s[0];const V={};s[13]=this.element({parent:i||"root"},x===!0?y:o),V.y=40,V.x=1e3,s[13].populate(V),x===!0&&(M-=1);const Z=l.components&&l.components.Square||h.Square;i=s[13];const oe={};s[14]=this.element({parent:i||"root"},x===!0?y:o),oe.show=!0;const K=[];if(typeof Z<"u")for(let Ze in Z[Symbol.for("config")].props)delete oe[Z[Symbol.for("config")].props[Ze]],K.push(Z[Symbol.for("config")].props[Ze]);s[14].populate(oe),x===!0&&(M-=1),i=s[14];const ne={};ne.show=!0,m=ne.is||"Square";let W;if(typeof m=="string"){if(W=l.components&&l.components[m]||h[m],!W)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);s[15]=W.call(null,{props:ne},s[14],o),s[15][Symbol.for("slots")][0]?(i=s[15][Symbol.for("slots")][0],y=s[15],x=!0):i=s[15][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const J=l.components&&l.components.Square||h.Square;i=s[13];const fe={};s[16]=this.element({parent:i||"root"},x===!0?y:o),fe.y=100,fe.show=!1;const ye=[];if(typeof J<"u")for(let Ze in J[Symbol.for("config")].props)delete fe[J[Symbol.for("config")].props[Ze]],ye.push(J[Symbol.for("config")].props[Ze]);s[16].populate(fe),x===!0&&(M-=1),i=s[16];const ge={};ge.y=100,ge.show=!1,m=ge.is||"Square";let pe;if(typeof m=="string"){if(pe=l.components&&l.components[m]||h[m],!pe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);s[17]=pe.call(null,{props:ge},s[16],o),s[17][Symbol.for("slots")][0]?(i=s[17][Symbol.for("slots")][0],y=s[17],x=!0):i=s[17][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const Ee=l.components&&l.components.Square||h.Square;i=s[13];const Re={};s[18]=this.element({parent:i||"root"},x===!0?y:o),Re.y=200,Re.show=o.showHideToggle;const z=[];if(typeof Ee<"u")for(let Ze in Ee[Symbol.for("config")].props)delete Re[Ee[Symbol.for("config")].props[Ze]],z.push(Ee[Symbol.for("config")].props[Ze]);s[18].populate(Re),x===!0&&(M-=1),i=s[18];const Me={};Me.y=200,C=o.showHideToggle,Array.isArray(C)===!0&&(C=v(C).slice(0)),Me.show=C,m=Me.is||"Square";let ve;if(typeof m=="string"){if(ve=l.components&&l.components[m]||h[m],!ve)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ve=m);s[19]=ve.call(null,{props:Me},s[18],o),s[19][Symbol.for("slots")][0]?(i=s[19][Symbol.for("slots")][0],y=s[19],x=!0):i=s[19][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[0];const Ue={};s[20]=this.element({parent:i||"root"},x===!0?y:o),Ue.y=40,Ue.x=1400,s[20].populate(Ue),x===!0&&(M-=1),i=s[20];const De={};s[21]=this.element({parent:i||"root"},x===!0?y:o),De.w=80,De.h=80,De.show=!0,De.alpha=.8,De.color="0xff00e4ff",s[21].populate(De),x===!0&&(M-=1),i=s[20];const We={};s[22]=this.element({parent:i||"root"},x===!0?y:o),We.y=100,We.w=80,We.h=80,We.show=!1,We.alpha=.8,We.color="0xff00e4ff",s[22].populate(We),x===!0&&(M-=1),i=s[20];const Xe={};s[23]=this.element({parent:i||"root"},x===!0?y:o),Xe.y=200,Xe.w=80,Xe.h=80,Xe.show=o.showHideToggle,Xe.alpha=.8,Xe.color="0xff00e4ff",s[23].populate(Xe),x===!0&&(M-=1),i=s[0];const ze={};s[24]=this.element({parent:i||"root"},x===!0?y:o),ze.x=1e3,ze.y=380,ze.direction="horizontal",ze.gap=20,ze.padding=20,ze.color="0xffffffff",ze.__layout=!0,s[24].populate(ze),x===!0&&(M-=1),i=s[24];const we={};s[25]=this.element({parent:i||"root"},x===!0?y:o),we.w=40,we.h=40,we.show=o.showHideToggle,we.color="0xbfdbfeff",s[25].populate(we),x===!0&&(M-=1),i=s[24];const tt={};s[26]=this.element({parent:i||"root"},x===!0?y:o),tt.w=40,tt.h=40,tt.color="0x60a5faff",s[26].populate(tt),x===!0&&(M-=1),i=s[24];const et={};return s[27]=this.element({parent:i||"root"},x===!0?y:o),et.w=40,et.h=40,et.color="0x2563ebff",s[27].populate(et),x===!0&&(M-=1),s},effects:[function(i,o,l,h,g,v){o[12].set("show",i.showHideToggle)},function(i,o,l,h,g,v){(typeof skip18>"u"||skip18.indexOf("show")===-1)&&o[18].set("show",i.showHideToggle)},function(i,o,l,h,g,v){o[19][Symbol.for("props")].show=i.showHideToggle},function(i,o,l,h,g,v){o[23].set("show",i.showHideToggle)},function(i,o,l,h,g,v){o[25].set("show",i.showHideToggle)}],context:{}},state(){return{showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready(){this.$setInterval(()=>{console.log("backstopjs:ready"),this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),F6=Je.Component("Events",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.x=400,m.y=360,s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=280,C.h=280,C.color="0xe5e7ebff",C.x=o.x,C.y="-5",s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.w=250,y.h=250,y.x=10,y.y=10,y.color=o.colors[0],s[2].populate(y),i=s[0];const x={};s[3]=this.element({parent:i||"root"},o),x.w=250,x.h=250,x.x=290,x.y=10,x.color=o.colors[1],s[3].populate(x),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.w=250,M.h=250,M.x=570,M.y=10,M.color=o.colors[2],s[4].populate(M),i=s[0];const b={};return s[5]=this.element({parent:i||"root"},o),b.w=250,b.h=250,b.x=850,b.y=10,b.color=o.colors[3],s[5].populate(b),s},effects:[function(i,o,l,h,g,v){o[1].set("x",i.x)}],context:{}},state(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x(){return this.count,this.count*280-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(f){const i=this.count-1;i===-1?this.parent.$focus(f):this.count=Math.max(i,0)},right(f){const i=this.count+1;i===4?this.parent.$focus(f):this.count=Math.min(i,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),$6=Je.Component("SlotCard",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=300,m.h=500,m.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],m.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C[Symbol.for("isSlot")]=!0,C.x=20,C.y=20,s[1].populate(C),i=s[0];const y={};return s[2]=this.element({parent:i||"root"},o),y.content=o.label,y.maxwidth=260,y.x=20,y.y=400,y.align="center",y.__textnode=!0,s[2].populate(y),s},effects:[function(i,o,l,h,g,v){o[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}},props:[{key:"label"}]}),z6=Je.Component("NamedSlotCard",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=700,m.h=300,m.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],m.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.x=20,C.y=20,s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.content="First slot",y.__textnode=!0,s[2].populate(y),i=s[1];const x={};s[3]=this.element({parent:i||"root"},o),x[Symbol.for("isSlot")]=!0,x.y=40,x.ref="first",s[3].populate(x),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.x=200,M.y=20,s[4].populate(M),i=s[4];const b={};s[5]=this.element({parent:i||"root"},o),b.content="Second slot",b.__textnode=!0,s[5].populate(b),i=s[4];const _={};s[6]=this.element({parent:i||"root"},o),_[Symbol.for("isSlot")]=!0,_.y=40,_.ref="second",s[6].populate(_),i=s[0];const P={};s[7]=this.element({parent:i||"root"},o),P.x=480,P.y=20,s[7].populate(P),i=s[7];const j={};s[8]=this.element({parent:i||"root"},o),j.content="Third slot",j.__textnode=!0,s[8].populate(j),i=s[7];const H={};return s[9]=this.element({parent:i||"root"},o),H[Symbol.for("isSlot")]=!0,H.y=40,H.ref="third",s[9].populate(H),s},effects:[function(i,o,l,h,g,v){o[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}}}),Eu=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],V6=Je.Component("Components",{components:{SlotCard:$6,NamedSlotCard:z6,Card:OT,Square:rl},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(x-=1);const b=l.components&&l.components.SlotCard||h.SlotCard;i=s[0];const _={};s[1]=this.element({parent:i||"root"},y===!0?C:o),_.x=400,_.y=100,_.label="Element";const P=[];if(typeof b<"u")for(let Tt in b[Symbol.for("config")].props)delete _[b[Symbol.for("config")].props[Tt]],P.push(b[Symbol.for("config")].props[Tt]);s[1].populate(_),y===!0&&(x-=1),i=s[1];const j={};j.x=400,j.y=100,j.label="Element",m=j.is||"SlotCard";let H;if(typeof m=="string"){if(H=l.components&&l.components[m]||h[m],!H)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(H=m);s[2]=H.call(null,{props:j},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],C=s[2],y=!0):i=s[2][Symbol.for("children")][0],y===!0&&(x=1+1);const $={};s[3]=this.element({parent:i||"root"},y===!0?C:o),s[3].populate($),y===!0&&(x-=1),i=s[3];const B={};s[4]=this.element({parent:i||"root"},y===!0?C:o),B.color=o.color,B.w=100,B.h=100,s[4].populate(B),y===!0&&(x-=1),y===!0&&x===0&&(y=!1);const te=l.components&&l.components.SlotCard||h.SlotCard;i=s[0];const X={};s[5]=this.element({parent:i||"root"},y===!0?C:o),X.x=800,X.y=100,X.label="Component";const Y=[];if(typeof te<"u")for(let Tt in te[Symbol.for("config")].props)delete X[te[Symbol.for("config")].props[Tt]],Y.push(te[Symbol.for("config")].props[Tt]);s[5].populate(X),y===!0&&(x-=1),i=s[5];const ee={};ee.x=800,ee.y=100,ee.label="Component",m=ee.is||"SlotCard";let he;if(typeof m=="string"){if(he=l.components&&l.components[m]||h[m],!he)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(he=m);s[6]=he.call(null,{props:ee},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],C=s[6],y=!0):i=s[6][Symbol.for("children")][0],y===!0&&(x=1+1);const k={};s[7]=this.element({parent:i||"root"},y===!0?C:o),s[7].populate(k),y===!0&&(x-=1);const V=l.components&&l.components.Square||h.Square;i=s[7];const Z={};s[8]=this.element({parent:i||"root"},y===!0?C:o),Z.size=200,Z.y=50;const oe=[];if(typeof V<"u")for(let Tt in V[Symbol.for("config")].props)delete Z[V[Symbol.for("config")].props[Tt]],oe.push(V[Symbol.for("config")].props[Tt]);s[8].populate(Z),y===!0&&(x-=1),i=s[8];const K={};K.size=200,K.y=50,m=K.is||"Square";let ne;if(typeof m=="string"){if(ne=l.components&&l.components[m]||h[m],!ne)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ne=m);s[9]=ne.call(null,{props:K},s[8],o),s[9][Symbol.for("slots")][0]?(i=s[9][Symbol.for("slots")][0],C=s[9],y=!0):i=s[9][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),y===!0&&x===0&&(y=!1);const W=l.components&&l.components.SlotCard||h.SlotCard;i=s[0];const J={};s[10]=this.element({parent:i||"root"},y===!0?C:o),J.x=1200,J.y=100,J.label="Element & Component";const fe=[];if(typeof W<"u")for(let Tt in W[Symbol.for("config")].props)delete J[W[Symbol.for("config")].props[Tt]],fe.push(W[Symbol.for("config")].props[Tt]);s[10].populate(J),y===!0&&(x-=1),i=s[10];const ye={};ye.x=1200,ye.y=100,ye.label="Element & Component",m=ye.is||"SlotCard";let ge;if(typeof m=="string"){if(ge=l.components&&l.components[m]||h[m],!ge)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ge=m);s[11]=ge.call(null,{props:ye},s[10],o),s[11][Symbol.for("slots")][0]?(i=s[11][Symbol.for("slots")][0],C=s[11],y=!0):i=s[11][Symbol.for("children")][0],y===!0&&(x=2+1);const pe={};s[12]=this.element({parent:i||"root"},y===!0?C:o),s[12].populate(pe),y===!0&&(x-=1),i=s[12];const Ee={};s[13]=this.element({parent:i||"root"},y===!0?C:o),Ee.color=o.color,Ee.w=100,Ee.h=100,s[13].populate(Ee),y===!0&&(x-=1);const Re=l.components&&l.components.Square||h.Square;i=s[12];const z={};s[14]=this.element({parent:i||"root"},y===!0?C:o),z.size=200,z.y=150;const Me=[];if(typeof Re<"u")for(let Tt in Re[Symbol.for("config")].props)delete z[Re[Symbol.for("config")].props[Tt]],Me.push(Re[Symbol.for("config")].props[Tt]);s[14].populate(z),y===!0&&(x-=1),i=s[14];const ve={};ve.size=200,ve.y=150,m=ve.is||"Square";let Ue;if(typeof m=="string"){if(Ue=l.components&&l.components[m]||h[m],!Ue)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ue=m);s[15]=Ue.call(null,{props:ve},s[14],o),s[15][Symbol.for("slots")][0]?(i=s[15][Symbol.for("slots")][0],C=s[15],y=!0):i=s[15][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),y===!0&&x===0&&(y=!1);const De=l.components&&l.components.Card||h.Card;i=s[0];const We={};s[16]=this.element({parent:i||"root"},y===!0?C:o),We.x=400,We.y=700,We.size="small";const Xe=[];if(typeof De<"u")for(let Tt in De[Symbol.for("config")].props)delete We[De[Symbol.for("config")].props[Tt]],Xe.push(De[Symbol.for("config")].props[Tt]);s[16].populate(We),y===!0&&(x-=1),i=s[16];const ze={};ze.x=400,ze.y=700,ze.size="small",m=ze.is||"Card";let we;if(typeof m=="string"){if(we=l.components&&l.components[m]||h[m],!we)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(we=m);s[17]=we.call(null,{props:ze},s[16],o),s[17][Symbol.for("slots")][0]?(i=s[17][Symbol.for("slots")][0],C=s[17],y=!0):i=s[17][Symbol.for("children")][0],y===!0&&(x=1+1);const tt={};s[18]=this.element({parent:i||"root"},y===!0?C:o),s[18].populate(tt),y===!0&&(x-=1),i=s[18];const et={};s[19]=this.element({parent:i||"root"},y===!0?C:o),et.color=o.color,et.w=100,et.h=100,s[19].populate(et),y===!0&&(x-=1),y===!0&&x===0&&(y=!1);const Ze=l.components&&l.components.NamedSlotCard||h.NamedSlotCard;i=s[0];const it={};s[20]=this.element({parent:i||"root"},y===!0?C:o),it.x=800,it.y=700;const St=[];if(typeof Ze<"u")for(let Tt in Ze[Symbol.for("config")].props)delete it[Ze[Symbol.for("config")].props[Tt]],St.push(Ze[Symbol.for("config")].props[Tt]);s[20].populate(it),y===!0&&(x-=1),i=s[20];const ut={};ut.x=800,ut.y=700,m=ut.is||"NamedSlotCard";let It;if(typeof m=="string"){if(It=l.components&&l.components[m]||h[m],!It)throw new Error('Component "NamedSlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(It=m);s[21]=It.call(null,{props:ut},s[20],o),s[21][Symbol.for("slots")][0]?(i=s[21][Symbol.for("slots")][0],C=s[21],y=!0):i=s[21][Symbol.for("children")][0],y===!0&&(x=4+1);const je={};s[22]=this.element({parent:i||"root"},y===!0?C:o),s[22].populate(je),y===!0&&(x-=1),i=s[22];const at={};s[23]=this.element({parent:i||"root"},y===!0?C:o),at.color="0x0891b2ff",at.x=10,at.y=140,at.w=80,at.h=60,at.parent=C[Symbol.for("slots")]!==void 0&&Array.isArray(C[Symbol.for("slots")])===!0&&C[Symbol.for("slots")].filter(Tt=>Tt.ref==="second").shift()||i,at.slot="second",s[23].populate(at),y===!0&&(x-=1),i=s[22];const xt={};s[24]=this.element({parent:i||"root"},y===!0?C:o),xt.color=o.color,xt.w=100,xt.h=100,xt.parent=C[Symbol.for("slots")]!==void 0&&Array.isArray(C[Symbol.for("slots")])===!0&&C[Symbol.for("slots")].filter(Tt=>Tt.ref==="third").shift()||i,xt.slot="third",s[24].populate(xt),y===!0&&(x-=1);const dt=l.components&&l.components.Square||h.Square;i=s[22];const xn={};s[25]=this.element({parent:i||"root"},y===!0?C:o),xn.size=100,xn.parent=C[Symbol.for("slots")]!==void 0&&Array.isArray(C[Symbol.for("slots")])===!0&&C[Symbol.for("slots")].filter(Tt=>Tt.ref==="first").shift()||i,xn.slot="first";const pn=[];if(typeof dt<"u")for(let Tt in dt[Symbol.for("config")].props)delete xn[dt[Symbol.for("config")].props[Tt]],pn.push(dt[Symbol.for("config")].props[Tt]);s[25].populate(xn),y===!0&&(x-=1),i=s[25];const zt={};zt.size=100,zt.slot="first",m=zt.is||"Square";let Ct;if(typeof m=="string"){if(Ct=l.components&&l.components[m]||h[m],!Ct)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ct=m);s[26]=Ct.call(null,{props:zt},s[25],o),s[26][Symbol.for("slots")][0]?(i=s[26][Symbol.for("slots")][0],C=s[26],y=!0):i=s[26][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),i=s[22];const Wt={};return s[27]=this.element({parent:i||"root"},y===!0?C:o),Wt.color="0x4d7c0fff",Wt.x=40,Wt.y=40,Wt.w=40,Wt.h=60,Wt.parent=C[Symbol.for("slots")]!==void 0&&Array.isArray(C[Symbol.for("slots")])===!0&&C[Symbol.for("slots")].filter(Tt=>Tt.ref==="second").shift()||i,Wt.slot="second",s[27].populate(Wt),y===!0&&(x-=1),y===!0&&x===0&&(y=!1),s},effects:[function(i,o,l,h,g,v){o[4].set("color",i.color)},function(i,o,l,h,g,v){o[13].set("color",i.color)},function(i,o,l,h,g,v){o[19].set("color",i.color)},function(i,o,l,h,g,v){o[24].set("color",i.color)}],context:{}},state(){return{color:Eu[0]}},hooks:{ready(){this.$setInterval(()=>{const f=Eu.indexOf(this.color)+1;this.color=f<=Eu.length?Eu[f]:Eu[0]},600)}}}),H6=Je.Component("MemoryCard",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=320,m.h=200,m.x=o.col*360,m.y=o.row*250,m.scale={transition:o.scale},m.rotation={transition:o.disabled?-2:0},s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.h={transition:o.h},C.w=320,C.y=125,C.mount="{y: 0.5}",C.color={transition:o.disabled?"#ccc":"#fff"},C.src=o.image+"&w=320&h=200",C.effects=[{type:"radius",props:{radius:6}}],C.show=o.open,s[1].populate(C),i=s[0];const y={};return s[2]=this.element({parent:i||"root"},o),y.h={transition:o.h},y.w=320,y.y=125,y.mount="{y: 0.5}",y.color=o.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},y.effects=[{type:"radius",props:{radius:6}}],s[2].populate(y),s},effects:[function(i,o,l,h,g,v){o[0].set("scale",{transition:i.scale})},function(i,o,l,h,g,v){o[0].set("rotation",{transition:i.disabled?-2:0})},function(i,o,l,h,g,v){o[1].set("h",{transition:i.h})},function(i,o,l,h,g,v){o[1].set("color",{transition:i.disabled?"#ccc":"#fff"})},function(i,o,l,h,g,v){o[1].set("src",i.image+"&w=320&h=200")},function(i,o,l,h,g,v){o[1].set("effects",[{type:"radius",props:{radius:6}}])},function(i,o,l,h,g,v){o[1].set("show",i.open)},function(i,o,l,h,g,v){o[2].set("h",{transition:i.h})},function(i,o,l,h,g,v){o[2].set("color",i.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(i,o,l,h,g,v){o[2].set("effects",[{type:"radius",props:{radius:6}}])}],context:{}},props:["row","col","image","description","index"],state(){return{disabled:!1,open:!1,h:200,scale:1,announcement:null}},hooks:{init(){this.$listen("closeMemoryCard",f=>{f===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",f=>{f===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(f){this.scale=1.08;const i="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.announcement=this.$announcer.speak(i)},unfocus(){this.scale=1,this.announcement.cancel()}},input:{enter(){if(!this.disabled){if(this.open){this.$announcer.speak("Card already open. Choose another");return}this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)}}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),LC=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],G6=Je.Component("Announcer",{components:{MemoryCard:H6},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1;const M={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(M),i=s[0];const b={};s[1]=this.element({parent:i||"root"},x===!0?y:o),b.font="raleway",b.size=80,b.color="0xffffffff",b.content="Let's play memory!",b.x=580,b.y=60,b.__textnode=!0,s[1].populate(b),i=s[0];const _={};s[2]=this.element({parent:i||"root"},x===!0?y:o),_.font="kalam",_.size=40,_.color="0xb91c1cff",_.content="the Accessible edition :)",_.x=1200,_.y=170,_.rotation="-6",_.__textnode=!0,s[2].populate(_),i=s[0];const P={};s[3]=this.element({parent:i||"root"},x===!0?y:o),P.x=260,P.y=260,s[3].populate(P),i=s[3];const j=[];let H,$;const B=(X=[],Y,ee)=>{const he=v(X),k=new Set;let V=he.length;const Z={};for(H=Z.from||0,$=("to"in Z)?Z.to:he.length;V--;){const W=he[V];V<$&&V>=H&&k.add(""+W.id)}let oe=ee.length;for(;oe--;)if(k.has(ee[oe])===!1){const W=ee[oe];Y[4][W]&&Y[4][W].destroy(),delete Y[4][W],Y[5][W]&&Y[5][W].destroy(),delete Y[5][W]}ee.length=0;const K=he.length,ne=[];for(let W=0;W<K;W++){if(W<H||W>=$)continue;const J=Object.create(o);i=Y[3],J.card=he[W],J.index=W,J.key=""+J.card.id,ee.push(J.key);const fe=l.components&&l.components.MemoryCard||h.MemoryCard;Y[4]===void 0&&(Y[4]={});const ye={};Y[4][J.key]===void 0&&(Y[4][J.key]=this.element({parent:i||"root"},x===!0?y:o)),ye.col=J.index%4,ye.row=Math.floor(J.index/4)%3,ye.image=J.card.image,ye.description=J.card.description,ye.ref="card"+J.index,ye.index=J.index;const ge=[];if(typeof fe<"u")for(let ve in fe[Symbol.for("config")].props)delete ye[fe[Symbol.for("config")].props[ve]],ge.push(fe[Symbol.for("config")].props[ve]);Y[4][J.key].nodeId===void 0&&Y[4][J.key].populate(ye),Y[5]===void 0&&(Y[5]={}),i=Y[4][J.key];const pe={};if(Y[5][J.key]===void 0){C=J.index%4,Array.isArray(C)===!0&&(C=v(C).slice(0)),pe.col=C,C=Math.floor(J.index/4)%3,Array.isArray(C)===!0&&(C=v(C).slice(0)),pe.row=C,pe.image=J.card.image,pe.description=J.card.description,C="card"+J.index,Array.isArray(C)===!0&&(C=v(C).slice(0)),pe.ref=C,C=J.index,Array.isArray(C)===!0&&(C=v(C).slice(0)),pe.index=C,m=pe.is||"MemoryCard";let ve;if(typeof m=="string"){if(ve=l.components&&l.components[m]||h[m],!ve)throw new Error('Component "MemoryCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ve=m);Y[5][J.key]=ve.call(null,{props:pe},Y[4][J.key],o),Y[5][J.key][Symbol.for("slots")][0]?(i=Y[5][J.key][Symbol.for("slots")][0],y=Y[5][J.key],x=!0):i=Y[5][J.key][Symbol.for("children")][0]}let Ee=()=>{(typeof ge>"u"||ge.indexOf("col")===-1)&&Y[4][J.key].set("col",J.index%4)};g(Ee,null),ne.push(Ee);let Re=()=>{(typeof ge>"u"||ge.indexOf("row")===-1)&&Y[4][J.key].set("row",Math.floor(J.index/4)%3)};g(Re,null),ne.push(Re);let z=()=>{(typeof ge>"u"||ge.indexOf("ref")===-1)&&Y[4][J.key].set("ref","card"+J.index)};g(z,null),ne.push(z);let Me=()=>{(typeof ge>"u"||ge.indexOf("index")===-1)&&Y[4][J.key].set("index",J.index)};g(Me,null),ne.push(Me),Y[5][J.key][Symbol.for("props")].col=J.index%4,Y[5][J.key][Symbol.for("props")].row=Math.floor(J.index/4)%3,Y[5][J.key][Symbol.for("props")].ref="card"+J.index,Y[5][J.key][Symbol.for("props")].index=J.index}return ne};let te;return g(()=>{o[Symbol.for("removeGlobalEffects")](te),te=null,te=B(o.cards,s,j)},["cards"]),s},effects:[],context:{}},state(){return{cards:LC.concat(LC).map((f,i)=>({...f,id:`card${i}`})),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0}},hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",f=>{this.openCards.length<2&&this.openCards.push(f),this.openCards.length===2&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(f){if(this.focusedRow===-1){this.focusedRow=0;return}f=f+this.focusedRow*4,this.$select("card"+f).$focus()},focusedRow(f){if(this.focusedCol===-1){this.focusedCol=0;return}f=this.focusedCol+f*4,this.$select("card"+f).$focus()}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){this.focusedCol===0?this.focusedRow===0?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1)},right(){this.focusedCol===3?this.focusedRow===2?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1)},up(){this.focusedCol===0&&this.$announcer.speak("You are already at the first card"),this.focusedRow=Math.max(0,this.focusedRow-1)},down(){this.focusedRow===2&&this.$announcer.speak("You are already at the last card"),this.focusedRow=Math.min(2,this.focusedRow+1)}}}),ku=(f,i)=>Math.floor(Math.random()*(i-f+1)+f),W6=Je.Component("Item",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.src="assets/blits-b-small.png",m.w=96,m.h=168,m.x={transition:{value:o.x,duration:2900}},m.y={transition:{value:o.y,duration:2900}},m.rotation={transition:{value:o.rotation,duration:2900}},m.scale={transition:{value:o.scale,duration:1e3}},s[0].populate(m),s},effects:[function(i,o,l,h,g,v){o[0].set("x",{transition:{value:i.x,duration:2900}})},function(i,o,l,h,g,v){o[0].set("y",{transition:{value:i.y,duration:2900}})},function(i,o,l,h,g,v){o[0].set("rotation",{transition:{value:i.rotation,duration:2900}})},function(i,o,l,h,g,v){o[0].set("scale",{transition:{value:i.scale,duration:1e3}})}],context:{}},state(){return{x:ku(20,1560),y:ku(20,720),rotation:0,scale:.1}},hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=ku(20,1740),this.y=ku(20,900),this.rotation=ku(10,360)},3e3)}}}),X6=Je.Component("Exponential",{components:{Item:W6},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1;const x={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(x),i=s[0];const M=[];let b,_;const P=(H=[],$,B)=>{const te=v(H),X=new Set;let Y=te.length;const ee={};for(b=ee.from||0,_=("to"in ee)?ee.to:te.length;Y--;){const Z=te[Y];Y<_&&Y>=b&&X.add(""+Z)}let he=B.length;for(;he--;)if(X.has(B[he])===!1){const Z=B[he];$[1][Z]&&$[1][Z].destroy(),delete $[1][Z],$[2][Z]&&$[2][Z].destroy(),delete $[2][Z]}B.length=0;const k=te.length,V=[];for(let Z=0;Z<k;Z++){if(Z<b||Z>=_)continue;const oe=Object.create(o);i=$[0],oe.item=te[Z],oe.undefined=Z,oe.key=""+oe.item,B.push(oe.key);const K=l.components&&l.components.Item||h.Item;$[1]===void 0&&($[1]={});const ne={};$[1][oe.key]===void 0&&($[1][oe.key]=this.element({parent:i||"root"},y===!0?C:o));const W=[];if(typeof K<"u")for(let fe in K[Symbol.for("config")].props)delete ne[K[Symbol.for("config")].props[fe]],W.push(K[Symbol.for("config")].props[fe]);$[1][oe.key].nodeId===void 0&&$[1][oe.key].populate(ne),$[2]===void 0&&($[2]={}),i=$[1][oe.key];const J={};if($[2][oe.key]===void 0){m=J.is||"Item";let fe;if(typeof m=="string"){if(fe=l.components&&l.components[m]||h[m],!fe)throw new Error('Component "Item" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fe=m);$[2][oe.key]=fe.call(null,{props:J},$[1][oe.key],o),$[2][oe.key][Symbol.for("slots")][0]?(i=$[2][oe.key][Symbol.for("slots")][0],C=$[2][oe.key],y=!0):i=$[2][oe.key][Symbol.for("children")][0]}}return V};let j;return g(()=>{o[Symbol.for("removeGlobalEffects")](j),j=null,j=P(o.items,s,M)},["items"]),s},effects:[],context:{}},state(){return{items:[]}},hooks:{ready(){const f=this.$setInterval(()=>{for(let i=0;i<=Math.floor(this.items.length/10);i++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(f)},2e3)}}}),UT=Je.Component("Ball",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};return s[0]=this.element({parent:i||"root"},o),m.w=100,m.h=100,m.src="/assets/basketball.png",s[0].populate(m),s},effects:[],context:{}},hooks:{attach(){this.$emit("ballUpdate","Attached to render tree")},detach(){this.$emit("ballUpdate","Detached from render tree")},enter(){this.$emit("ballUpdate","Entered viewport")},exit(){this.$emit("ballUpdate","Exited viewport")}}}),Oh=(f,i)=>Math.floor(Math.random()*(i-f+1)+f),K6=Je.Component("Viewport",{components:{Ball:UT},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(b),x===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},x===!0?y:o),_.size=32,_.x=960,_.y=540,_.mount=.5,_.content=o.status.join(`
`),_.lineheight=52,_.maxwidth=500,_.__textnode=!0,s[1].populate(_),x===!0&&(M-=1);const P=l.components&&l.components.Ball||h.Ball;i=s[0];const j={};s[2]=this.element({parent:i||"root"},x===!0?y:o),j.x={transition:{value:o.x,duration:1250}},j.y={transition:{value:o.y,duration:1250}},j.rotation={transition:{value:o.rotation,duration:1400,easing:"ease-in-out"}},j.w=100,j.h=100;const H=[];if(typeof P<"u")for(let te in P[Symbol.for("config")].props)delete j[P[Symbol.for("config")].props[te]],H.push(P[Symbol.for("config")].props[te]);s[2].populate(j),x===!0&&(M-=1),i=s[2];const $={};C={transition:{value:o.x,duration:1250}},Array.isArray(C)===!0&&(C=v(C).slice(0)),$.x=C,C={transition:{value:o.y,duration:1250}},Array.isArray(C)===!0&&(C=v(C).slice(0)),$.y=C,C={transition:{value:o.rotation,duration:1400,easing:"ease-in-out"}},Array.isArray(C)===!0&&(C=v(C).slice(0)),$.rotation=C,$.w=100,$.h=100,m=$.is||"Ball";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "Ball" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);return s[3]=B.call(null,{props:$},s[2],o),s[3][Symbol.for("slots")][0]?(i=s[3][Symbol.for("slots")][0],y=s[3],x=!0):i=s[3][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),s},effects:[function(i,o,l,h,g,v){o[1].set("content",i.status.join(`
`))},function(i,o,l,h,g,v){(typeof skip2>"u"||skip2.indexOf("x")===-1)&&o[2].set("x",{transition:{value:i.x,duration:1250}})},function(i,o,l,h,g,v){(typeof skip2>"u"||skip2.indexOf("y")===-1)&&o[2].set("y",{transition:{value:i.y,duration:1250}})},function(i,o,l,h,g,v){(typeof skip2>"u"||skip2.indexOf("rotation")===-1)&&o[2].set("rotation",{transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}})},function(i,o,l,h,g,v){o[3][Symbol.for("props")].x={transition:{value:i.x,duration:1250}}},function(i,o,l,h,g,v){o[3][Symbol.for("props")].y={transition:{value:i.y,duration:1250}}},function(i,o,l,h,g,v){o[3][Symbol.for("props")].rotation={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state(){return{x:-400,y:-400,rotation:0,status:[],count:1}},hooks:{ready(){this.$listen("ballUpdate",f=>{this.status.unshift(`${this.count++} -  ${f}`),this.status.length=Math.min(this.status.length,8)}),this.rotation=Oh(-90,90),this.x=(1920-100)/2,this.y=(1080-100)/2,this.$setInterval(()=>{this.x=Oh(-300,2220),this.y=Oh(-300,1380),this.rotation=Oh(-90,90)},2500)}}}),Yu={code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=1920,m.h=1080,m.color="0xffffffff",m.effects=[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}],s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.show=o.up!==void 0,s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.src="assets/arrow.png",y.w=100,y.h=44,y.x=960,y.y=40,y.mount="{x: 0.5}",s[2].populate(y),i=s[1];const x={};s[3]=this.element({parent:i||"root"},o),x.content=o.up&&o.up.toUpperCase(),x.x=960,x.y=100,x.size=76,x.mount="{x: 0.5}",x.__textnode=!0,s[3].populate(x),i=s[0];const M={};s[4]=this.element({parent:i||"root"},o),M.show=o.right!==void 0,s[4].populate(M),i=s[4];const b={};s[5]=this.element({parent:i||"root"},o),b.src="assets/arrow.png",b.w=100,b.h=44,b.x=1900,b.y=540,b.mount="{x: 1, y: 0.5}",b.rotation=90,s[5].populate(b),i=s[4];const _={};s[6]=this.element({parent:i||"root"},o),_.content=o.right&&o.right.toUpperCase(),_.x=1760,_.y=540,_.size=76,_.rotation=90,_.mount=.5,_.__textnode=!0,s[6].populate(_),i=s[0];const P={};s[7]=this.element({parent:i||"root"},o),P.show=o.down!==void 0,s[7].populate(P),i=s[7];const j={};s[8]=this.element({parent:i||"root"},o),j.src="assets/arrow.png",j.w=100,j.h=44,j.x=960,j.y=1040,j.mount="{x: 0.5, y: 1}",j.rotation=180,s[8].populate(j),i=s[7];const H={};s[9]=this.element({parent:i||"root"},o),H.content=o.down&&o.down.toUpperCase(),H.x=960,H.y=980,H.size=76,H.mount="{x: 0.5, y: 1}",H.__textnode=!0,s[9].populate(H),i=s[0];const $={};s[10]=this.element({parent:i||"root"},o),$.show=o.left!==void 0,s[10].populate($),i=s[10];const B={};s[11]=this.element({parent:i||"root"},o),B.src="assets/arrow.png",B.w=100,B.h=44,B.x=40,B.y=540,B.mount="{ y: 0.5}",B.rotation="-90",s[11].populate(B),i=s[10];const te={};s[12]=this.element({parent:i||"root"},o),te.content=o.left&&o.left.toUpperCase(),te.x=180,te.y=540,te.size=76,te.mount=.5,te.rotation="-90",te.__textnode=!0,s[12].populate(te),i=s[0];const X={};return s[13]=this.element({parent:i||"root"},o),X.content=o.pageTitle,X.font="raleway",X.x=960,X.y=540,X.size=240,X.mount=.5,X.__textnode=!0,s[13].populate(X),s},effects:[function(i,o,l,h,g,v){o[0].set("effects",[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}])},function(i,o,l,h,g,v){o[1].set("show",i.up!==void 0)},function(i,o,l,h,g,v){o[3].set("content",i.up&&i.up.toUpperCase())},function(i,o,l,h,g,v){o[4].set("show",i.right!==void 0)},function(i,o,l,h,g,v){o[6].set("content",i.right&&i.right.toUpperCase())},function(i,o,l,h,g,v){o[7].set("show",i.down!==void 0)},function(i,o,l,h,g,v){o[9].set("content",i.down&&i.down.toUpperCase())},function(i,o,l,h,g,v){o[10].set("show",i.left!==void 0)},function(i,o,l,h,g,v){o[12].set("content",i.left&&i.left.toUpperCase())},function(i,o,l,h,g,v){o[13].set("content",i.pageTitle)}],context:{}},props:[{key:"page",cast:Object}],computed:{pageTitle(){return this.page&&this.page.title||this.title}},state(){return{title:"Start",up:"up",right:"right",down:"down",left:"left"}}},q6=Je.Component("RouterHookPage",{...Yu,state(){return{title:"Start",down:"episode flow",right:"movie flow"}},input:{right(){this.$router.to("/examples/router-hooks/movie")},down(){this.$router.to("/examples/router-hooks/episode/1")}}}),Y6=Je.Component("RouterHookMovie",{...Yu,state(){return{title:"Movie",left:"Back",right:"Rating"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/rating")}}}),Q6=Je.Component("RouterHookRating",{...Yu,state(){return{title:"Rating",left:"Back",right:"TO START"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/")}}}),Z6=Je.Component("RouterHookEpisode",{...Yu,state(){return{title:"Episode",left:"Back",right:"NEXT EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to(`/examples/router-hooks/episode/${this.page.id+1}`,void 0,{inHistory:!1})}}}),J6=Je.Component("RouterHookEpisode",{...Yu,state(){return{title:`Episodes 
 overview`,right:"FIRST EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/episode/1",void 0,{inHistory:!1})}}}),vr={slideInOutLeft:{before:{prop:"x",value:"100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"-100%",duration:400}},slideInOutRight:{before:{prop:"x",value:"-100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"100%",duration:400}},slideInOutUp:{before:{prop:"y",value:"100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"-100%",duration:400}},slideInOutDown:{before:{prop:"y",value:"-100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"100%",duration:400}}},eD=[{path:"/examples/router-hooks",component:q6,hooks:{async before(f,i){return i&&i.path==="examples/router-hooks/movie"&&(f.transition=vr.slideInOutRight),i&&i.path==="examples/router-hooks/rating"&&(f.transition=vr.slideInOutLeft),i&&i.path.indexOf("episode")>-1&&(f.transition=vr.slideInOutDown),f}}},{path:"/examples/router-hooks/episode/:id",component:Z6,hooks:{before(f,i){i&&i.path.indexOf("episode")>-1&&(f.transition=vr.slideInOutLeft);const{id:o}=f.params;return o>5?"/examples/router-hooks/":(f.data.page={id:parseInt(o),title:`Episode ${o}`},f)}},transition:vr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/episode",component:J6,transition:vr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/movie",component:Y6,hooks:{before(f,i){return i&&i.path==="examples/router-hooks"&&(f.transition=vr.slideInOutLeft),i&&i.path==="examples/router-hooks/rating"&&(f.transition=vr.slideInOutRight),f}}},{path:"/examples/router-hooks/rating",component:Q6,transition:vr.slideInOutLeft}],tD=Je.Component("Resize",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.y=30,C.content="fit (Resize Mode) sample",C.maxwidth=1920,C.align="center",C.__textnode=!0,s[1].populate(C),i=s[0];const y={};s[2]=this.element({parent:i||"root"},o),y.x={transition:{value:o.pages.x1,duration:200}},y.y=90,s[2].populate(y),i=s[2];const x={};s[3]=this.element({parent:i||"root"},o),x.x=100,x.content="Image dimensions: 2560 X 1440",x.__textnode=!0,s[3].populate(x),i=s[2];const M={};s[4]=this.element({parent:i||"root"},o),M.x=100,M.y=80,M.content=o.titles.t1,M.__textnode=!0,s[4].populate(M),i=s[2];const b={};s[5]=this.element({parent:i||"root"},o),b.y=150,b.x=100,s[5].populate(b),i=s[5];const _={};s[6]=this.element({parent:i||"root"},o),_.w=o.w,_.h=o.w-300,_.src=o.img,_.fit="{type: 'cover', position: { y: 0 } }",s[6].populate(_),i=s[5];const P={};s[7]=this.element({parent:i||"root"},o),P.w=o.w,P.h=o.w-300,P.src=o.img,P.fit="{ type: 'cover', position: { y: 0.5 } }",P.x=600,s[7].populate(P),i=s[5];const j={};s[8]=this.element({parent:i||"root"},o),j.w=o.w,j.h=o.w-300,j.src=o.img,j.fit="{ type: 'cover', position: { y: 1 } }",j.x=1200,s[8].populate(j),i=s[2];const H={};s[9]=this.element({parent:i||"root"},o),H.x=100,H.y=500,H.content=o.titles.t2,H.__textnode=!0,s[9].populate(H),i=s[2];const $={};s[10]=this.element({parent:i||"root"},o),$.y=600,$.x=100,s[10].populate($),i=s[10];const B={};s[11]=this.element({parent:i||"root"},o),B.w=o.w,B.h=o.w-150,B.src=o.img,B.fit="{ type: 'cover', position: { x: 0 } }",s[11].populate(B),i=s[10];const te={};s[12]=this.element({parent:i||"root"},o),te.w=o.w,te.h=o.w-150,te.src=o.img,te.fit="{ type: 'cover', position: { x: 0.5 } }",te.x=600,s[12].populate(te),i=s[10];const X={};s[13]=this.element({parent:i||"root"},o),X.w=o.w,X.h=o.w-150,X.src=o.img,X.fit="{ type: 'cover', position: { x: 1 } }",X.x=1200,s[13].populate(X),i=s[0];const Y={};s[14]=this.element({parent:i||"root"},o),Y.x={transition:{value:o.pages.x2,duration:200}},Y.y=90,s[14].populate(Y),i=s[14];const ee={};s[15]=this.element({parent:i||"root"},o),ee.x=100,ee.content="Image dimensions: 1440 X 2560",ee.__textnode=!0,s[15].populate(ee),i=s[14];const he={};s[16]=this.element({parent:i||"root"},o),he.x=100,he.y=80,he.content=o.titles.t3,he.__textnode=!0,s[16].populate(he),i=s[14];const k={};s[17]=this.element({parent:i||"root"},o),k.y=150,k.x=100,s[17].populate(k),i=s[17];const V={};s[18]=this.element({parent:i||"root"},o),V.w=o.w,V.h=o.w-200,V.src=o.img1,V.fit="{ type: 'cover', position: { y: 0, x: 0 } }",s[18].populate(V),i=s[17];const Z={};s[19]=this.element({parent:i||"root"},o),Z.w=o.w,Z.h=o.w-200,Z.src=o.img1,Z.fit="{ type: 'cover', position: { y: 0.5, x: 0.5 } }",Z.x=600,s[19].populate(Z),i=s[17];const oe={};s[20]=this.element({parent:i||"root"},o),oe.w=o.w,oe.h=o.w-200,oe.src=o.img1,oe.fit="{ type: 'cover', position: { y: 1, x: 1 } }",oe.x=1200,s[20].populate(oe),i=s[14];const K={};s[21]=this.element({parent:i||"root"},o),K.x=100,K.y=500,K.content=o.titles.t4,K.__textnode=!0,s[21].populate(K),i=s[14];const ne={};s[22]=this.element({parent:i||"root"},o),ne.y=570,ne.x=100,s[22].populate(ne),i=s[22];const W={};s[23]=this.element({parent:i||"root"},o),W.w=o.w-350,W.h=o.w-100,W.src=o.img1,W.fit="{ type: 'cover', position: { x: 0 } }",s[23].populate(W),i=s[22];const J={};s[24]=this.element({parent:i||"root"},o),J.w=o.w-350,J.h=o.w-100,J.src=o.img1,J.fit="{ type: 'cover', position: { x: 0.25 } }",J.x=250,s[24].populate(J),i=s[22];const fe={};s[25]=this.element({parent:i||"root"},o),fe.w=o.w-350,fe.h=o.w-100,fe.src=o.img1,fe.fit="{ type: 'cover', position: { x: 0.5 } }",fe.x=500,s[25].populate(fe),i=s[22];const ye={};s[26]=this.element({parent:i||"root"},o),ye.w=o.w-350,ye.h=o.w-100,ye.src=o.img1,ye.fit="{ type: 'cover', position: { x: 0.75 } }",ye.x=750,s[26].populate(ye),i=s[22];const ge={};s[27]=this.element({parent:i||"root"},o),ge.w=o.w-350,ge.h=o.w-100,ge.src=o.img1,ge.fit="{ type: 'cover', position: { x: 1 } }",ge.x=1e3,s[27].populate(ge),i=s[0];const pe={};s[28]=this.element({parent:i||"root"},o),pe.x={transition:{value:o.pages.x3,duration:200}},pe.y=90,s[28].populate(pe),i=s[28];const Ee={};s[29]=this.element({parent:i||"root"},o),Ee.x=100,Ee.content="Image dimensions: 2560 X 1440",Ee.__textnode=!0,s[29].populate(Ee),i=s[28];const Re={};s[30]=this.element({parent:i||"root"},o),Re.x=100,Re.y=80,Re.content=o.titles.t5,Re.__textnode=!0,s[30].populate(Re),i=s[28];const z={};s[31]=this.element({parent:i||"root"},o),z.y=150,z.x=100,z.w=o.w+100,z.h=o.w-200,z.color="0x000000ff",s[31].populate(z),i=s[31];const Me={};s[32]=this.element({parent:i||"root"},o),Me.w=o.w+100,Me.h=o.w-200,Me.src=o.img,Me.fit="contain",s[32].populate(Me),i=s[28];const ve={};s[33]=this.element({parent:i||"root"},o),ve.x=100,ve.y=500,ve.content=o.titles.t6,ve.__textnode=!0,s[33].populate(ve),i=s[28];const Ue={};s[34]=this.element({parent:i||"root"},o),Ue.y=550,Ue.x=100,Ue.w=o.w+100,Ue.h=o.w-100,Ue.color="0x000000ff",s[34].populate(Ue),i=s[34];const De={};s[35]=this.element({parent:i||"root"},o),De.w=o.w+100,De.h=o.w-100,De.src=o.img,De.fit="contain",s[35].populate(De),i=s[0];const We={};return s[36]=this.element({parent:i||"root"},o),We.x=1700,We.y=20,We.content="Page "+o.activePage+"/"+o.totalPages,We.__textnode=!0,s[36].populate(We),s},effects:[function(i,o,l,h,g,v){o[2].set("x",{transition:{value:i.pages.x1,duration:200}})},function(i,o,l,h,g,v){o[3].set("content","Image dimensions: 2560 X 1440")},function(i,o,l,h,g,v){o[14].set("x",{transition:{value:i.pages.x2,duration:200}})},function(i,o,l,h,g,v){o[15].set("content","Image dimensions: 1440 X 2560")},function(i,o,l,h,g,v){o[28].set("x",{transition:{value:i.pages.x3,duration:200}})},function(i,o,l,h,g,v){o[29].set("content","Image dimensions: 2560 X 1440")},function(i,o,l,h,g,v){o[36].set("content","Page "+i.activePage+"/"+i.totalPages)}],context:{}},state(){return{activePage:1,pages:{x1:0,x2:1920,x3:1920*2},w:500,img:"assets/testscreen.png",img1:"assets/testscreen_rotated.png",titles:{t1:"Texture width > height - fit cover maximum width of node and position Y - 0, 0.5, 1",t2:"Texture width > height - fit:cover maximum width of node and position X - 0, 0.5, 1",t3:"Texture width < height - fit cover maximum width of node and positionY - 0, 0.5, 1",t4:"Texture width < height - fit cover maximum width of node and position X - 0, 0.25, 0.5, 0.75, 1",t5:"Texture width > height - fit contain maximum height of node",t6:"Texture width > height - fit contain maximum width of node"}}},computed:{totalPages(){return this.pages,Object.keys(this.pages).length}},input:{right(){if(this.activePage<this.totalPages){for(let f=1;f<=this.totalPages;f++)this.pages[`x${f}`]=this.pages[`x${f}`]-1920;this.activePage+=1}},left(){if(this.activePage>1){for(let f=this.totalPages;f>=1;f--)this.pages[`x${f}`]=this.pages[`x${f}`]+1920;this.activePage-=1}}}}),nD=Je.Component("Flags",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C=[];let y,x;const M=(_=[],P,j)=>{const H=v(_),$=new Set;let B=H.length;const te={};for(y=te.from||0,x=("to"in te)?te.to:H.length;B--;)H[B],B<x&&B>=y&&$.add(""+B);let X=j.length;for(;X--;)if($.has(j[X])===!1){const he=j[X];P[1][he]&&P[1][he].destroy(),delete P[1][he],P[2][he]&&P[2][he].destroy(),delete P[2][he],P[3][he]&&P[3][he].destroy(),delete P[3][he]}j.length=0;const Y=H.length,ee=[];for(let he=0;he<Y;he++){if(he<y||he>=x)continue;const k=Object.create(o);i=P[0],k.language=H[he],k.index=he,k.key=""+he,j.push(k.key),i=P[0],P[1]===void 0&&(P[1]={});const V={};P[1][k.key]===void 0&&(P[1][k.key]=this.element({parent:i||"root"},o)),V.x=k.index*250,P[1][k.key].nodeId===void 0&&P[1][k.key].populate(V),i=P[1][k.key],P[2]===void 0&&(P[2]={});const Z={};P[2][k.key]===void 0&&(P[2][k.key]=this.element({parent:i||"root"},o)),Z.src=k.language.flag,Z.w=150,Z.h=150,Z.alpha=k.index===k.activeIndex?1:.6,P[2][k.key].nodeId===void 0&&P[2][k.key].populate(Z),i=P[1][k.key],P[3]===void 0&&(P[3]={});const oe={};P[3][k.key]===void 0&&(P[3][k.key]=this.element({parent:i||"root"},o)),oe.content=k.language.name,oe.y=150,oe.maxwidth=150,oe.align="center",oe.color=k.index===k.activeIndex?"0xffffffff":"0xaaaaaaff",oe.__textnode=!0,P[3][k.key].nodeId===void 0&&P[3][k.key].populate(oe)}return ee};let b;return g(()=>{o[Symbol.for("removeGlobalEffects")](b),b=null,b=M(o.languages,s,C)},["languages"]),g(()=>{o.activeIndex;for(let _=0;_<o.languages.length;_++){if(_<y||_>=x)continue;const P={};P.index=_,P.language=o.languages[_],P.key=_,s[2][P.key].set("alpha",P.index===o.activeIndex?1:.6)}}),g(()=>{o.activeIndex;for(let _=0;_<o.languages.length;_++){if(_<y||_>=x)continue;const P={};P.index=_,P.language=o.languages[_],P.key=_,s[3][P.key].set("color",P.index===o.activeIndex?"0xffffffff":"0xaaaaaaff")}}),s},effects:[],context:{}},props:["languages"],state(){return{activeIndex:0}},watch:{activeIndex(f){const i=this.languages[f];i&&i.code&&this.$language.set(i.code)}},input:{right(){this.activeIndex=Math.min(this.activeIndex+1,this.languages.length-1)},left(){this.activeIndex=Math.max(this.activeIndex-1,0)}}}),DC=Je.Component("LanguagePlugin",{components:{Flags:nD},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(x-=1);const b=l.components&&l.components.Flags||h.Flags;i=s[0];const _={};s[1]=this.element({parent:i||"root"},y===!0?C:o),_.languages=o.languages,_.ref="flags",_.x=500,_.y=150;const P=[];if(typeof b<"u")for(let Y in b[Symbol.for("config")].props)delete _[b[Symbol.for("config")].props[Y]],P.push(b[Symbol.for("config")].props[Y]);s[1].populate(_),y===!0&&(x-=1),i=s[1];const j={};j.languages=o.languages,j.ref="flags",j.x=500,j.y=150,m=j.is||"Flags";let H;if(typeof m=="string"){if(H=l.components&&l.components[m]||h[m],!H)throw new Error('Component "Flags" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(H=m);s[2]=H.call(null,{props:j},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],C=s[2],y=!0):i=s[2][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),i=s[0];const $={};s[3]=this.element({parent:i||"root"},y===!0?C:o),$.x=960,$.y=540,$.mount=.5,$.content=o.$language.translate("hello"),$.size=80,$.__textnode=!0,s[3].populate($),y===!0&&(x-=1),i=s[0];const B={};s[4]=this.element({parent:i||"root"},y===!0?C:o),B.x=960,B.y=640,B.mount=.5,B.content=o.$language.translate("bye"),B.size=50,B.__textnode=!0,s[4].populate(B),y===!0&&(x-=1),i=s[0];const te={};s[5]=this.element({parent:i||"root"},y===!0?C:o),te.x=960,te.y=720,te.mount=.5,te.content=o.$language.translate("replacement",{first:"John",last:"Doe",age:18}),te.size=36,te.__textnode=!0,s[5].populate(te),y===!0&&(x-=1),i=s[0];const X={};return s[6]=this.element({parent:i||"root"},y===!0?C:o),X.size=32,X.x=960,X.y=940,X.mount=.5,X.align="center",X.content="Current language: "+o.$language.language+`
 Language file: `+(o.loaded===!0?"Loaded":"loading ..."),X.__textnode=!0,s[6].populate(X),y===!0&&(x-=1),s},effects:[function(i,o,l,h,g,v){o[3].set("content",i.$language.translate("hello"))},function(i,o,l,h,g,v){o[4].set("content",i.$language.translate("bye"))},function(i,o,l,h,g,v){o[5].set("content",i.$language.translate("replacement",{first:"John",last:"Doe",age:18}))},function(i,o,l,h,g,v){o[6].set("content","Current language: "+i.$language.language+`
 Language file: `+(i.loaded===!0?"Loaded":"loading ..."))}],context:{}},state(){return{loaded:!1,languages:[{flag:"/assets/flags/united-states.png",code:"en-US",name:"English"},{flag:"/assets/flags/netherlands.png",code:"nl-NL",name:"Dutch"},{flag:"/assets/flags/france.png",code:"fr-FR",name:"French"},{flag:"/assets/flags/germany.png",code:"de-DE",name:"German"}]}},hooks:{init(){this.$language.set("en-US"),setTimeout(()=>{this.$language.load("/assets/translations.json").then(()=>{this.loaded=!0})},2e3)},focus(){this.$select("flags").$focus()}}}),oD=Je.Component("Box",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=430,m.h=180,m.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}],m.color="{top: '0x667a97ff', bottom: '0x475569ff'}",s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.x=25,C.y=20,C.content=o.header,C.w=280,C.color="0x000000ff",C.contain="width",C.__textnode=!0,s[1].populate(C),i=s[0];const y={};return s[2]=this.element({parent:i||"root"},o),y.x=25,y.y=90,y.content=o.text,y.size=45,y.w=350,y.contain="width",y.align="center",y.__textnode=!0,s[2].populate(y),s},effects:[function(i,o,l,h,g,v){o[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}])},function(i,o,l,h,g,v){o[1].set("content",i.header)},function(i,o,l,h,g,v){o[2].set("content",i.text)}],context:{}},props:["header","text"]}),iD=Je.Application({components:{Box:oD},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),b.w=1920,b.h=1080,s[0].populate(b),x===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},x===!0?y:o),_.y=250,s[1].populate(_),x===!0&&(M-=1),i=s[1];const P={};s[2]=this.element({parent:i||"root"},x===!0?y:o),P.content="KeyCode Finder",P.font="raleway",P.mount="{x: 0.5}",P.x=960,P.size=62,P.w=800,P.h=200,P.contain="width",P.__textnode=!0,s[2].populate(P),x===!0&&(M-=1),i=s[1];const j={};s[3]=this.element({parent:i||"root"},x===!0?y:o),j.content="Press any key to get find the correct key code mapping",j.mount="{x: 0.5}",j.x=960,j.y=100,j.size=32,j.w=800,j.h=200,j.contain="width",j.__textnode=!0,s[3].populate(j),x===!0&&(M-=1),i=s[0];const H={};s[4]=this.element({parent:i||"root"},x===!0?y:o),H.x=200,s[4].populate(H),x===!0&&(M-=1);const $=l.components&&l.components.Box||h.Box;i=s[4];const B={};s[5]=this.element({parent:i||"root"},x===!0?y:o),B.y=600,B.header="Key",B.text=o.key;const te=[];if(typeof $<"u")for(let ye in $[Symbol.for("config")].props)delete B[$[Symbol.for("config")].props[ye]],te.push($[Symbol.for("config")].props[ye]);s[5].populate(B),x===!0&&(M-=1),i=s[5];const X={};X.y=600,X.header="Key",C=o.key,Array.isArray(C)===!0&&(C=v(C).slice(0)),X.text=C,m=X.is||"Box";let Y;if(typeof m=="string"){if(Y=l.components&&l.components[m]||h[m],!Y)throw new Error('Component "Box" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Y=m);s[6]=Y.call(null,{props:X},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],y=s[6],x=!0):i=s[6][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const ee=l.components&&l.components.Box||h.Box;i=s[4];const he={};s[7]=this.element({parent:i||"root"},x===!0?y:o),he.x=500,he.y=600,he.header="Code",he.text=o.code;const k=[];if(typeof ee<"u")for(let ye in ee[Symbol.for("config")].props)delete he[ee[Symbol.for("config")].props[ye]],k.push(ee[Symbol.for("config")].props[ye]);s[7].populate(he),x===!0&&(M-=1),i=s[7];const V={};V.x=500,V.y=600,V.header="Code",C=o.code,Array.isArray(C)===!0&&(C=v(C).slice(0)),V.text=C,m=V.is||"Box";let Z;if(typeof m=="string"){if(Z=l.components&&l.components[m]||h[m],!Z)throw new Error('Component "Box" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Z=m);s[8]=Z.call(null,{props:V},s[7],o),s[8][Symbol.for("slots")][0]?(i=s[8][Symbol.for("slots")][0],y=s[8],x=!0):i=s[8][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const oe=l.components&&l.components.Box||h.Box;i=s[4];const K={};s[9]=this.element({parent:i||"root"},x===!0?y:o),K.x=1e3,K.y=600,K.header="keyCode",K.text=o.keyCode;const ne=[];if(typeof oe<"u")for(let ye in oe[Symbol.for("config")].props)delete K[oe[Symbol.for("config")].props[ye]],ne.push(oe[Symbol.for("config")].props[ye]);s[9].populate(K),x===!0&&(M-=1),i=s[9];const W={};W.x=1e3,W.y=600,W.header="keyCode",C=o.keyCode,Array.isArray(C)===!0&&(C=v(C).slice(0)),W.text=C,m=W.is||"Box";let J;if(typeof m=="string"){if(J=l.components&&l.components[m]||h[m],!J)throw new Error('Component "Box" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(J=m);s[10]=J.call(null,{props:W},s[9],o),s[10][Symbol.for("slots")][0]?(i=s[10][Symbol.for("slots")][0],y=s[10],x=!0):i=s[10][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),i=s[0];const fe={};return s[11]=this.element({parent:i||"root"},x===!0?y:o),fe.mount="{x: 1}",fe.x=1860,fe.y=1e3,fe.size=30,fe.content=o.backLabel,fe.color=o.backPressed?"0xffffffff":"0x667a97ff",fe.__textnode=!0,s[11].populate(fe),x===!0&&(M-=1),s},effects:[function(i,o,l,h,g,v){(typeof skip5>"u"||skip5.indexOf("text")===-1)&&o[5].set("text",i.key)},function(i,o,l,h,g,v){o[6][Symbol.for("props")].text=i.key},function(i,o,l,h,g,v){(typeof skip7>"u"||skip7.indexOf("text")===-1)&&o[7].set("text",i.code)},function(i,o,l,h,g,v){o[8][Symbol.for("props")].text=i.code},function(i,o,l,h,g,v){(typeof skip9>"u"||skip9.indexOf("text")===-1)&&o[9].set("text",i.keyCode)},function(i,o,l,h,g,v){o[10][Symbol.for("props")].text=i.keyCode},function(i,o,l,h,g,v){o[11].set("content",i.backLabel)},function(i,o,l,h,g,v){o[11].set("color",i.backPressed?"0xffffffff":"0x667a97ff")}],context:{}},state(){return{backPressed:!1,key:"...",code:"...",keyCode:"..."}},computed:{backLabel(){return this.backPressed,this.backPressed?"Press back key again to navigate back":""}},methods:{updateLabels(f){this.key=f.key,this.code=f.code,this.keyCode=f.keyCode+""}},input:{any(f){this.backPressed=!1,this.updateLabels(f)},back(f){return this.backPressed===!0?this.$router.back():this.updateLabels(f),()=>{this.backPressed=!0}}}}),rD=Je.Component("Accent",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=300,m.h=250,m.color=o.bColor,m.effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),i=s[0];const C={};return s[1]=this.element({parent:i||"root"},o),C.x=150,C.y=125,C.mount="{x:0.5, y:0.5}",C.content=o.lang,C.color="0xffffffff",C.font="lato-black",C.__textnode=!0,s[1].populate(C),s},effects:[function(i,o,l,h,g,v){o[0].set("color",i.bColor)},function(i,o,l,h,g,v){o[0].set("effects",[{type:"radius",props:{radius:8}}])},function(i,o,l,h,g,v){o[1].set("content",i.lang)}],context:{}},state(){return{bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["lang"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),sD=Je.Component("Accents",{components:{Accent:rD},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1;const M={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(M),i=s[0];const b={};s[1]=this.element({parent:i||"root"},x===!0?y:o),b.x={transition:o.x},s[1].populate(b),i=s[1];const _=[];let P,j;const H=(te=[],X,Y)=>{const ee=v(te),he=new Set;let k=ee.length;const V={};for(P=V.from||0,j=("to"in V)?V.to:ee.length;k--;){const ne=ee[k];k<j&&k>=P&&he.add(""+ne.lang)}let Z=Y.length;for(;Z--;)if(he.has(Y[Z])===!1){const ne=Y[Z];X[2][ne]&&X[2][ne].destroy(),delete X[2][ne],X[3][ne]&&X[3][ne].destroy(),delete X[3][ne]}Y.length=0;const oe=ee.length,K=[];for(let ne=0;ne<oe;ne++){if(ne<P||ne>=j)continue;const W=Object.create(o);i=X[1],W.item=ee[ne],W.index=ne,W.key=""+W.item.lang,Y.push(W.key);const J=l.components&&l.components.Accent||h.Accent;X[2]===void 0&&(X[2]={});const fe={};X[2][W.key]===void 0&&(X[2][W.key]=this.element({parent:i||"root"},x===!0?y:o)),fe.lang=W.item.lang,fe.ref="accent"+W.index,fe.x=W.index*400;const ye=[];if(typeof J<"u")for(let Ee in J[Symbol.for("config")].props)delete fe[J[Symbol.for("config")].props[Ee]],ye.push(J[Symbol.for("config")].props[Ee]);X[2][W.key].nodeId===void 0&&X[2][W.key].populate(fe),X[3]===void 0&&(X[3]={}),i=X[2][W.key];const ge={};if(X[3][W.key]===void 0){ge.lang=W.item.lang,C="accent"+W.index,Array.isArray(C)===!0&&(C=v(C).slice(0)),ge.ref=C,ge.x=W.index*400,m=ge.is||"Accent";let Ee;if(typeof m=="string"){if(Ee=l.components&&l.components[m]||h[m],!Ee)throw new Error('Component "Accent" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ee=m);X[3][W.key]=Ee.call(null,{props:ge},X[2][W.key],o),X[3][W.key][Symbol.for("slots")][0]?(i=X[3][W.key][Symbol.for("slots")][0],y=X[3][W.key],x=!0):i=X[3][W.key][Symbol.for("children")][0]}let pe=()=>{(typeof ye>"u"||ye.indexOf("ref")===-1)&&X[2][W.key].set("ref","accent"+W.index)};g(pe,null),K.push(pe),X[3][W.key][Symbol.for("props")].ref="accent"+W.index}return K};let $;g(()=>{o[Symbol.for("removeGlobalEffects")]($),$=null,$=H(o.data,s,_)},["data"]),i=s[0];const B={};return s[4]=this.element({parent:i||"root"},x===!0?y:o),B.content=o.activeAccent,B.font="lato-black",B.x=960,B.y=400,B.mount="{x:0.5}",B.letterspacing=10,B.size=40,B.__textnode=!0,s[4].populate(B),s},effects:[function(i,o,l,h,g,v){o[1].set("x",{transition:i.x})},function(i,o,l,h,g,v){o[4].set("content",i.activeAccent)}],context:{}},props:["data"],state(){return{x:160,activeIndex:0,activeAccent:""}},watch:{activeIndex(f){const i=this.$select(`accent${f}`);i&&i.$focus&&(i.$focus(),this.activeAccent=this.data[f].chars)}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.activeIndex<this.data.length-1&&this.move(1)},left(){this.activeIndex>0&&this.move(-1)}},methods:{move(f){const i=this.activeIndex+f;this.x=i>3?-(i-3)*400-160:160,this.activeIndex=i}}}),aD=Je.Component("Characters",{components:{Accents:sD},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),M.w=1920,s[0].populate(M),y===!0&&(x-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.x=960,b.y=50,b.mount="{x:0.5}",b.content="Alphabets",b.font="lato-black",b.size=60,b.__textnode=!0,s[1].populate(b),y===!0&&(x-=1),i=s[0];const _={};s[2]=this.element({parent:i||"root"},y===!0?C:o),_.x=960,_.y=150,_.mount="{x:0.5}",_.content=o.alphabets,_.font="lato-black",_.size=40,_.letterspacing=10,_.__textnode=!0,s[2].populate(_),y===!0&&(x-=1),i=s[0];const P={};s[3]=this.element({parent:i||"root"},y===!0?C:o),P.x=960,P.y=290,P.mount="{x:0.5}",P.content="Accents",P.font="lato-black",P.size=60,P.__textnode=!0,s[3].populate(P),y===!0&&(x-=1);const j=l.components&&l.components.Accents||h.Accents;i=s[0];const H={};s[4]=this.element({parent:i||"root"},y===!0?C:o),H.data=o.accents,H.y=400,H.ref="accents";const $=[];if(typeof j<"u")for(let ee in j[Symbol.for("config")].props)delete H[j[Symbol.for("config")].props[ee]],$.push(j[Symbol.for("config")].props[ee]);s[4].populate(H),y===!0&&(x-=1),i=s[4];const B={};B.data=o.accents,B.y=400,B.ref="accents",m=B.is||"Accents";let te;if(typeof m=="string"){if(te=l.components&&l.components[m]||h[m],!te)throw new Error('Component "Accents" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(te=m);s[5]=te.call(null,{props:B},s[4],o),s[5][Symbol.for("slots")][0]?(i=s[5][Symbol.for("slots")][0],C=s[5],y=!0):i=s[5][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),i=s[0];const X={};s[6]=this.element({parent:i||"root"},y===!0?C:o),X.w=950,X.h=40,X.color="0x000000ff",X.effects=[{type:"radius",props:{radius:10}}],X.y=1e3,X.placement="center",s[6].populate(X),y===!0&&(x-=1),i=s[6];const Y={};return s[7]=this.element({parent:i||"root"},y===!0?C:o),Y.content="The character ? represents a character that is not supported by the Lato-Black font",Y.size=25,Y.x=475,Y.y=20,Y.mount="{x:0.5, y:0.5}",Y.__textnode=!0,s[7].populate(Y),y===!0&&(x-=1),s},effects:[function(i,o,l,h,g,v){o[6].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state(){return{alphabets:"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",accents:[{lang:"Dutch",chars:"éèëïüáóĳĲ"},{lang:"French",chars:"éèêëàâîïôùûç"},{lang:"Spanish",chars:"áéíóúñü"},{lang:"Turkish",chars:"ÇçĞğİiÖöÜüŞş"}]}},hooks:{focus(){const f=this.$select("accents");f&&f.$focus&&f.$focus()}}}),lD=Je.Component("Layout",{components:{Ball:UT},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),M.w=1920,M.h=1080,M.color="0xc4b5fdff",s[0].populate(M),y===!0&&(x-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.x=40,b.y=40,s[1].populate(b),y===!0&&(x-=1),i=s[1];const _={};s[2]=this.element({parent:i||"root"},y===!0?C:o),_.color="0x222222ff",_.content="Static horizontal Layout",_.__textnode=!0,s[2].populate(_),y===!0&&(x-=1),i=s[1];const P={};s[3]=this.element({parent:i||"root"},y===!0?C:o),P.y=50,P.gap=10,P.__layout=!0,s[3].populate(P),y===!0&&(x-=1),i=s[3];const j={};s[4]=this.element({parent:i||"root"},y===!0?C:o),j.w=50,j.h=100,j.color="0xeff6ffff",s[4].populate(j),y===!0&&(x-=1),i=s[3];const H={};s[5]=this.element({parent:i||"root"},y===!0?C:o),H.w=60,H.h=100,H.color="0xbfdbfeff",s[5].populate(H),y===!0&&(x-=1),i=s[3];const $={};s[6]=this.element({parent:i||"root"},y===!0?C:o),$.w=70,$.h=100,$.color="0x60a5faff",s[6].populate($),y===!0&&(x-=1),i=s[3];const B={};s[7]=this.element({parent:i||"root"},y===!0?C:o),B.w=80,B.h=100,B.color="0x2563ebff",s[7].populate(B),y===!0&&(x-=1),i=s[3];const te={};s[8]=this.element({parent:i||"root"},y===!0?C:o),te.w=90,te.h=100,te.color="0x1e40afff",s[8].populate(te),y===!0&&(x-=1),i=s[0];const X={};s[9]=this.element({parent:i||"root"},y===!0?C:o),X.x=40,X.y=220,s[9].populate(X),y===!0&&(x-=1),i=s[9];const Y={};s[10]=this.element({parent:i||"root"},y===!0?C:o),Y.color="0x222222ff",Y.content="Static vertical Layout",Y.__textnode=!0,s[10].populate(Y),y===!0&&(x-=1),i=s[9];const ee={};s[11]=this.element({parent:i||"root"},y===!0?C:o),ee.y=50,ee.gap=10,ee.direction="vertical",ee.__layout=!0,s[11].populate(ee),y===!0&&(x-=1),i=s[11];const he={};s[12]=this.element({parent:i||"root"},y===!0?C:o),he.w=100,he.h=50,he.color="0xeff6ffff",s[12].populate(he),y===!0&&(x-=1),i=s[11];const k={};s[13]=this.element({parent:i||"root"},y===!0?C:o),k.w=100,k.h=60,k.color="0xbfdbfeff",s[13].populate(k),y===!0&&(x-=1),i=s[11];const V={};s[14]=this.element({parent:i||"root"},y===!0?C:o),V.w=100,V.h=70,V.color="0x60a5faff",s[14].populate(V),y===!0&&(x-=1),i=s[11];const Z={};s[15]=this.element({parent:i||"root"},y===!0?C:o),Z.w=100,Z.h=80,Z.color="0x2563ebff",s[15].populate(Z),y===!0&&(x-=1),i=s[11];const oe={};s[16]=this.element({parent:i||"root"},y===!0?C:o),oe.w=100,oe.h=90,oe.color="0x1e40afff",s[16].populate(oe),y===!0&&(x-=1),i=s[0];const K={};s[17]=this.element({parent:i||"root"},y===!0?C:o),K.x=40,K.y=700,s[17].populate(K),y===!0&&(x-=1),i=s[17];const ne={};s[18]=this.element({parent:i||"root"},y===!0?C:o),ne.color="0x222222ff",ne.content="Nested Layouts",ne.__textnode=!0,s[18].populate(ne),y===!0&&(x-=1),i=s[17];const W={};s[19]=this.element({parent:i||"root"},y===!0?C:o),W.y=50,W.gap=10,W.direction="horizontal",W.__layout=!0,s[19].populate(W),y===!0&&(x-=1),i=s[19];const J={};s[20]=this.element({parent:i||"root"},y===!0?C:o),J.w=100,J.h=50,J.color="0xeff6ffff",s[20].populate(J),y===!0&&(x-=1),i=s[19];const fe={};s[21]=this.element({parent:i||"root"},y===!0?C:o),fe.w=100,fe.h=60,fe.color="0xbfdbfeff",s[21].populate(fe),y===!0&&(x-=1),i=s[19];const ye={};s[22]=this.element({parent:i||"root"},y===!0?C:o),ye.direction="vertical",ye.gap=10,ye.__layout=!0,s[22].populate(ye),y===!0&&(x-=1),i=s[22];const ge={};s[23]=this.element({parent:i||"root"},y===!0?C:o),ge.w=100,ge.h=70,ge.color="0x60a5faff",s[23].populate(ge),y===!0&&(x-=1),i=s[22];const pe={};s[24]=this.element({parent:i||"root"},y===!0?C:o),pe.w=100,pe.h=70,pe.color="0x60a5faff",s[24].populate(pe),y===!0&&(x-=1),i=s[22];const Ee={};s[25]=this.element({parent:i||"root"},y===!0?C:o),Ee.w=100,Ee.h=70,Ee.color="0x60a5faff",s[25].populate(Ee),y===!0&&(x-=1),i=s[22];const Re={};s[26]=this.element({parent:i||"root"},y===!0?C:o),Re.gap=50,Re.__layout=!0,s[26].populate(Re),y===!0&&(x-=1),i=s[26];const z={};s[27]=this.element({parent:i||"root"},y===!0?C:o),z.w=50,z.h=50,z.color="0x2563ebff",s[27].populate(z),y===!0&&(x-=1),i=s[26];const Me={};s[28]=this.element({parent:i||"root"},y===!0?C:o),Me.w=50,Me.h=50,Me.color="0x2563ebff",s[28].populate(Me),y===!0&&(x-=1),i=s[26];const ve={};s[29]=this.element({parent:i||"root"},y===!0?C:o),ve.w=50,ve.h=50,ve.color="0x2563ebff",s[29].populate(ve),y===!0&&(x-=1),i=s[19];const Ue={};s[30]=this.element({parent:i||"root"},y===!0?C:o),Ue.w=100,Ue.h=80,Ue.color="0x2563ebff",s[30].populate(Ue),y===!0&&(x-=1),i=s[19];const De={};s[31]=this.element({parent:i||"root"},y===!0?C:o),De.w=100,De.h=90,De.color="0x1e40afff",s[31].populate(De),y===!0&&(x-=1),i=s[0];const We={};s[32]=this.element({parent:i||"root"},y===!0?C:o),We.x=800,We.y=40,s[32].populate(We),y===!0&&(x-=1),i=s[32];const Xe={};s[33]=this.element({parent:i||"root"},y===!0?C:o),Xe.color="0x222222ff",Xe.content="Layout with Text",Xe.__textnode=!0,s[33].populate(Xe),y===!0&&(x-=1),i=s[32];const ze={};s[34]=this.element({parent:i||"root"},y===!0?C:o),ze.y=50,ze.gap=20,ze.__layout=!0,s[34].populate(ze),y===!0&&(x-=1),i=s[34];const we={};s[35]=this.element({parent:i||"root"},y===!0?C:o),we.w=3,we.h=32,we.color="0x60a5faff",s[35].populate(we),y===!0&&(x-=1),i=s[34];const tt={};s[36]=this.element({parent:i||"root"},y===!0?C:o),tt.color="0x1e40afff",tt.content="Hello",tt.__textnode=!0,s[36].populate(tt),y===!0&&(x-=1),i=s[34];const et={};s[37]=this.element({parent:i||"root"},y===!0?C:o),et.w=3,et.h=32,et.color="0x60a5faff",s[37].populate(et),y===!0&&(x-=1),i=s[34];const Ze={};s[38]=this.element({parent:i||"root"},y===!0?C:o),Ze.content="World",Ze.color="0x1e40afff",Ze.__textnode=!0,s[38].populate(Ze),y===!0&&(x-=1),i=s[34];const it={};s[39]=this.element({parent:i||"root"},y===!0?C:o),it.w=3,it.h=32,it.color="0x60a5faff",s[39].populate(it),y===!0&&(x-=1),i=s[0];const St={};s[40]=this.element({parent:i||"root"},y===!0?C:o),St.x=800,St.y=210,s[40].populate(St),y===!0&&(x-=1),i=s[40];const ut={};s[41]=this.element({parent:i||"root"},y===!0?C:o),ut.color="0x222222ff",ut.content="Dynamic dimensions Layout",ut.__textnode=!0,s[41].populate(ut),y===!0&&(x-=1),i=s[40];const It={};s[42]=this.element({parent:i||"root"},y===!0?C:o),It.y=50,It.gap=20,It["@updated"]=o.dynamicLayoutUpdated&&o.dynamicLayoutUpdated.bind(o),It.__layout=!0,s[42].populate(It),y===!0&&(x-=1),i=s[42];const je={};s[43]=this.element({parent:i||"root"},y===!0?C:o),je.w=o.w*.5,je.h=60,je.color="0xeff6ffff",s[43].populate(je),y===!0&&(x-=1),i=s[42];const at={};s[44]=this.element({parent:i||"root"},y===!0?C:o),at.w=o.w*.6,at.h=60,at.color="0xbfdbfeff",s[44].populate(at),y===!0&&(x-=1),i=s[42];const xt={};s[45]=this.element({parent:i||"root"},y===!0?C:o),xt.w=o.w*.7,xt.h=60,xt.color="0x60a5faff",s[45].populate(xt),y===!0&&(x-=1),i=s[42];const dt={};s[46]=this.element({parent:i||"root"},y===!0?C:o),dt.w=o.w*.8,dt.h=60,dt.color="0x2563ebff",s[46].populate(dt),y===!0&&(x-=1),i=s[42];const xn={};s[47]=this.element({parent:i||"root"},y===!0?C:o),xn.w=o.w*.9,xn.h=60,xn.color="0x1e40afff",s[47].populate(xn),y===!0&&(x-=1),i=s[0];const pn={};s[48]=this.element({parent:i||"root"},y===!0?C:o),pn.x=800,pn.y=400,s[48].populate(pn),y===!0&&(x-=1),i=s[48];const zt={};s[49]=this.element({parent:i||"root"},y===!0?C:o),zt.color="0x222222ff",zt.content="For loop Layout",zt.__textnode=!0,s[49].populate(zt),y===!0&&(x-=1),i=s[48];const Ct={};s[50]=this.element({parent:i||"root"},y===!0?C:o),Ct.y=50,Ct.gap=20,Ct.__layout=!0,s[50].populate(Ct),y===!0&&(x-=1),i=s[50];const Wt=[];let Tt,Pt;const ln=(rt=[],Pe,io)=>{const _o=v(rt),Tr=new Set;let Ho=_o.length;const Ui={};for(Tt=Ui.from||0,Pt=("to"in Ui)?Ui.to:_o.length;Ho--;)_o[Ho],Ho<Pt&&Ho>=Tt&&Tr.add(""+Ho);let Ai=io.length;for(;Ai--;)if(Tr.has(io[Ai])===!1){const Nt=io[Ai];Pe[51][Nt]&&Pe[51][Nt].destroy(),delete Pe[51][Nt]}io.length=0;const ks=_o.length,gi=[];for(let Nt=0;Nt<ks;Nt++){if(Nt<Tt||Nt>=Pt)continue;const At=Object.create(o);i=Pe[50],At.color=_o[Nt],At.undefined=Nt,At.key=""+Nt,io.push(At.key),i=Pe[50],Pe[51]===void 0&&(Pe[51]={});const ii={};Pe[51][At.key]===void 0&&(Pe[51][At.key]=this.element({parent:i||"root"},y===!0?C:o)),ii.w=60,ii.h=60,ii.color=At.color,Pe[51][At.key].nodeId===void 0&&(Pe[51][At.key].populate(ii),y===!0&&(x-=1))}return gi};let ct;g(()=>{o[Symbol.for("removeGlobalEffects")](ct),ct=null,ct=ln(o.colors,s,Wt)},["colors"]),g(()=>{o.color;for(let rt=0;rt<o.colors.length;rt++){if(rt<Tt||rt>=Pt)continue;const Pe={};Pe.undefined=rt,Pe.color=o.colors[rt],Pe.key=rt,s[51][Pe.key].set("color",Pe.color)}}),i=s[0];const Pn={};s[52]=this.element({parent:i||"root"},y===!0?C:o),Pn.x=800,Pn.y=600,s[52].populate(Pn),y===!0&&(x-=1),i=s[52];const an={};s[53]=this.element({parent:i||"root"},y===!0?C:o),an.color="0x222222ff",an.content="Layout with transitions",an.__textnode=!0,s[53].populate(an),y===!0&&(x-=1),i=s[52];const Bn={};s[54]=this.element({parent:i||"root"},y===!0?C:o),Bn.direction="horizontal",Bn.gap=20,Bn.y=60,Bn.__layout=!0,s[54].populate(Bn),y===!0&&(x-=1),i=s[54];const Ot=[];let mn,bn;const go=(rt=[],Pe,io)=>{const _o=v(rt),Tr=new Set;let Ho=_o.length;const Ui={};for(mn=Ui.from||0,bn=("to"in Ui)?Ui.to:_o.length;Ho--;)_o[Ho],Ho<bn&&Ho>=mn&&Tr.add(""+Ho);let Ai=io.length;for(;Ai--;)if(Tr.has(io[Ai])===!1){const Nt=io[Ai];Pe[55][Nt]&&Pe[55][Nt].destroy(),delete Pe[55][Nt],Pe[56][Nt]&&Pe[56][Nt].destroy(),delete Pe[56][Nt],Pe[57][Nt]&&Pe[57][Nt].destroy(),delete Pe[57][Nt],Pe[58][Nt]&&Pe[58][Nt].destroy(),delete Pe[58][Nt],Pe[59][Nt]&&Pe[59][Nt].destroy(),delete Pe[59][Nt],Pe[60][Nt]&&Pe[60][Nt].destroy(),delete Pe[60][Nt]}io.length=0;const ks=_o.length,gi=[];for(let Nt=0;Nt<ks;Nt++){if(Nt<mn||Nt>=bn)continue;const At=Object.create(o);i=Pe[54],At.color=_o[Nt],At.undefined=Nt,At.key=""+Nt,io.push(At.key),i=Pe[54],Pe[55]===void 0&&(Pe[55]={});const ii={};Pe[55][At.key]===void 0&&(Pe[55][At.key]=this.element({parent:i||"root"},y===!0?C:o)),ii.h=100,ii.w={transition:{value:At.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},ii.color=At.color,Pe[55][At.key].nodeId===void 0&&(Pe[55][At.key].populate(ii),y===!0&&(x-=1)),i=Pe[55][At.key],Pe[56]===void 0&&(Pe[56]={});const Go={};Pe[56][At.key]===void 0&&(Pe[56][At.key]=this.element({parent:i||"root"},y===!0?C:o)),Go.gap=10,Go.x=10,Go.y=35,Go.__layout=!0,Pe[56][At.key].nodeId===void 0&&(Pe[56][At.key].populate(Go),y===!0&&(x-=1)),i=Pe[56][At.key],Pe[57]===void 0&&(Pe[57]={});const br={};Pe[57][At.key]===void 0&&(Pe[57][At.key]=this.element({parent:i||"root"},y===!0?C:o)),br.h=20,br.w={transition:{value:At.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},br.color="0xffffffff",Pe[57][At.key].nodeId===void 0&&(Pe[57][At.key].populate(br),y===!0&&(x-=1)),i=Pe[56][At.key],Pe[58]===void 0&&(Pe[58]={});const Er={};Pe[58][At.key]===void 0&&(Pe[58][At.key]=this.element({parent:i||"root"},y===!0?C:o)),Er.h=20,Er.w={transition:{value:At.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Er.color="0xccccccff",Pe[58][At.key].nodeId===void 0&&(Pe[58][At.key].populate(Er),y===!0&&(x-=1)),i=Pe[56][At.key],Pe[59]===void 0&&(Pe[59]={});const Xr={};Pe[59][At.key]===void 0&&(Pe[59][At.key]=this.element({parent:i||"root"},y===!0?C:o)),Xr.h=20,Xr.w={transition:{value:At.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Xr.color="0x333333ff",Pe[59][At.key].nodeId===void 0&&(Pe[59][At.key].populate(Xr),y===!0&&(x-=1)),i=Pe[56][At.key],Pe[60]===void 0&&(Pe[60]={});const As={};Pe[60][At.key]===void 0&&(Pe[60][At.key]=this.element({parent:i||"root"},y===!0?C:o)),As.h=20,As.w={transition:{value:At.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},As.color="0x000000ff",Pe[60][At.key].nodeId===void 0&&(Pe[60][At.key].populate(As),y===!0&&(x-=1))}return gi};let jn;g(()=>{o[Symbol.for("removeGlobalEffects")](jn),jn=null,jn=go(o.colors,s,Ot)},["colors"]),g(()=>{o.w3;for(let rt=0;rt<o.colors.length;rt++){if(rt<mn||rt>=bn)continue;const Pe={};Pe.undefined=rt,Pe.color=o.colors[rt],Pe.key=rt,s[55][Pe.key].set("w",{transition:{value:o.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),g(()=>{o.color;for(let rt=0;rt<o.colors.length;rt++){if(rt<mn||rt>=bn)continue;const Pe={};Pe.undefined=rt,Pe.color=o.colors[rt],Pe.key=rt,s[55][Pe.key].set("color",Pe.color)}}),g(()=>{o.w2;for(let rt=0;rt<o.colors.length;rt++){if(rt<mn||rt>=bn)continue;const Pe={};Pe.undefined=rt,Pe.color=o.colors[rt],Pe.key=rt,s[57][Pe.key].set("w",{transition:{value:o.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),g(()=>{o.w2;for(let rt=0;rt<o.colors.length;rt++){if(rt<mn||rt>=bn)continue;const Pe={};Pe.undefined=rt,Pe.color=o.colors[rt],Pe.key=rt,s[58][Pe.key].set("w",{transition:{value:o.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),g(()=>{o.w2;for(let rt=0;rt<o.colors.length;rt++){if(rt<mn||rt>=bn)continue;const Pe={};Pe.undefined=rt,Pe.color=o.colors[rt],Pe.key=rt,s[59][Pe.key].set("w",{transition:{value:o.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),g(()=>{o.w2;for(let rt=0;rt<o.colors.length;rt++){if(rt<mn||rt>=bn)continue;const Pe={};Pe.undefined=rt,Pe.color=o.colors[rt],Pe.key=rt,s[60][Pe.key].set("w",{transition:{value:o.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),i=s[0];const Yn={};s[61]=this.element({parent:i||"root"},y===!0?C:o),Yn.x=800,Yn.y=840,s[61].populate(Yn),y===!0&&(x-=1),i=s[61];const Fn={};s[62]=this.element({parent:i||"root"},y===!0?C:o),Fn.color="0x222222ff",Fn.content="Layout with padding",Fn.__textnode=!0,s[62].populate(Fn),y===!0&&(x-=1),i=s[61];const Rn={};s[63]=this.element({parent:i||"root"},y===!0?C:o),Rn.direction="horizontal",Rn.gap=20,Rn.y=60,Rn.padding=20,Rn.color="0xffffffff",Rn.__layout=!0,s[63].populate(Rn),y===!0&&(x-=1),i=s[63];const Ve={};s[64]=this.element({parent:i||"root"},y===!0?C:o),Ve.w=40,Ve.h=40,Ve.color="0xbfdbfeff",s[64].populate(Ve),y===!0&&(x-=1),i=s[63];const ie={};s[65]=this.element({parent:i||"root"},y===!0?C:o),ie.w=40,ie.h=40,ie.color="0x60a5faff",s[65].populate(ie),y===!0&&(x-=1),i=s[63];const Ae={};s[66]=this.element({parent:i||"root"},y===!0?C:o),Ae.w=40,Ae.h=40,Ae.color="0x2563ebff",s[66].populate(Ae),y===!0&&(x-=1),i=s[61];const Ke={};s[67]=this.element({parent:i||"root"},y===!0?C:o),Ke.direction="horizontal",Ke.gap=20,Ke.y=60,Ke.x=240,Ke.padding={top:40,y:10,left:40,x:10},Ke.color="0xffffffff",Ke.__layout=!0,s[67].populate(Ke),y===!0&&(x-=1),i=s[67];const wt={};s[68]=this.element({parent:i||"root"},y===!0?C:o),wt.w=40,wt.h=40,wt.color="0xbfdbfeff",s[68].populate(wt),y===!0&&(x-=1),i=s[67];const nt={};s[69]=this.element({parent:i||"root"},y===!0?C:o),nt.w=40,nt.h=40,nt.color="0x60a5faff",s[69].populate(nt),y===!0&&(x-=1),i=s[67];const ht={};s[70]=this.element({parent:i||"root"},y===!0?C:o),ht.w=40,ht.h=40,ht.color="0x2563ebff",s[70].populate(ht),y===!0&&(x-=1),i=s[61];const _e={};s[71]=this.element({parent:i||"root"},y===!0?C:o),_e.direction="vertical",_e.gap=20,_e.y=60,_e.x=500,_e.padding=20,_e.color="0xffffffff",_e.__layout=!0,s[71].populate(_e),y===!0&&(x-=1),i=s[71];const Le={};s[72]=this.element({parent:i||"root"},y===!0?C:o),Le.w=40,Le.h=20,Le.color="0xbfdbfeff",s[72].populate(Le),y===!0&&(x-=1),i=s[71];const bt={};s[73]=this.element({parent:i||"root"},y===!0?C:o),bt.w=40,bt.h=20,bt.color="0x60a5faff",s[73].populate(bt),y===!0&&(x-=1),i=s[71];const xe={};s[74]=this.element({parent:i||"root"},y===!0?C:o),xe.w=40,xe.h=20,xe.color="0x2563ebff",s[74].populate(xe),y===!0&&(x-=1),i=s[61];const ce={};s[75]=this.element({parent:i||"root"},y===!0?C:o),ce.direction="vertical",ce.gap=20,ce.y=60,ce.x=640,ce.padding={top:40,y:10,left:40,x:10},ce.color="0xffffffff",ce.__layout=!0,s[75].populate(ce),y===!0&&(x-=1),i=s[75];const Ge={};s[76]=this.element({parent:i||"root"},y===!0?C:o),Ge.w=40,Ge.h=20,Ge.color="0xbfdbfeff",s[76].populate(Ge),y===!0&&(x-=1),i=s[75];const Et={};s[77]=this.element({parent:i||"root"},y===!0?C:o),Et.w=40,Et.h=20,Et.color="0x60a5faff",s[77].populate(Et),y===!0&&(x-=1),i=s[75];const jt={};s[78]=this.element({parent:i||"root"},y===!0?C:o),jt.w=40,jt.h=20,jt.color="0x2563ebff",s[78].populate(jt),y===!0&&(x-=1),i=s[0];const Vt={};s[79]=this.element({parent:i||"root"},y===!0?C:o),Vt.x=1300,Vt.y=210,s[79].populate(Vt),y===!0&&(x-=1),i=s[79];const un={};s[80]=this.element({parent:i||"root"},y===!0?C:o),un.color="0x222222ff",un.content="Layout with a Component",un.__textnode=!0,s[80].populate(un),y===!0&&(x-=1),i=s[79];const Be={};s[81]=this.element({parent:i||"root"},y===!0?C:o),Be.y=50,Be.gap=40,Be.__layout=!0,s[81].populate(Be),y===!0&&(x-=1),i=s[81];const qe={};s[82]=this.element({parent:i||"root"},y===!0?C:o),qe.w=100,qe.h=100,qe.color="0xff0000ff",s[82].populate(qe),y===!0&&(x-=1),i=s[81];const On={};s[83]=this.element({parent:i||"root"},y===!0?C:o),On.w=o.w,On.h=100,On.color="0xff0000ff",s[83].populate(On),y===!0&&(x-=1);const wn=l.components&&l.components.Ball||h.Ball;i=s[81];const gn={};s[84]=this.element({parent:i||"root"},y===!0?C:o),gn.y=500,gn.w=100;const $n=[];if(typeof wn<"u")for(let rt in wn[Symbol.for("config")].props)delete gn[wn[Symbol.for("config")].props[rt]],$n.push(wn[Symbol.for("config")].props[rt]);s[84].populate(gn),y===!0&&(x-=1),i=s[84];const Jn={};Jn.y=500,Jn.w=100,m=Jn.is||"Ball";let kt;if(typeof m=="string"){if(kt=l.components&&l.components[m]||h[m],!kt)throw new Error('Component "Ball" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(kt=m);s[85]=kt.call(null,{props:Jn},s[84],o),s[85][Symbol.for("slots")][0]?(i=s[85][Symbol.for("slots")][0],C=s[85],y=!0):i=s[85][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),i=s[81];const fo={};return s[86]=this.element({parent:i||"root"},y===!0?C:o),fo.w=100,fo.h=100,fo.color="0xff0000ff",s[86].populate(fo),y===!0&&(x-=1),s},effects:[function(i,o,l,h,g,v){o[43].set("w",i.w*.5)},function(i,o,l,h,g,v){o[44].set("w",i.w*.6)},function(i,o,l,h,g,v){o[45].set("w",i.w*.7)},function(i,o,l,h,g,v){o[46].set("w",i.w*.8)},function(i,o,l,h,g,v){o[47].set("w",i.w*.9)},function(i,o,l,h,g,v){o[67].set("padding",{top:40,y:10,left:40,x:10})},function(i,o,l,h,g,v){o[75].set("padding",{top:40,y:10,left:40,x:10})},function(i,o,l,h,g,v){o[83].set("w",i.w)}],context:{}},state(){return{w:50,colors:["green","red","blue","yellow"],w3:150,w2:20}},hooks:{ready(){this.$setInterval(()=>{this.w=this.w===100?50:100,this.w2=this.w2===20?40:20,this.w3=this.w3===150?250:150},2e3),this.$setTimeout(()=>{this.colors.push("purple")},4e3)}},methods:{dynamicLayoutUpdated(f){this.$log.info("Dynamic layout updated",f.w,f.h)}}}),Hm=typeof window<"u"?window:{};let BT;const uD=f=>{BT=f};let Eg;const gg=[],Nu={};let od,Ts;Hm.__firebolt&&Hm.__firebolt.testHarness&&(Ts=Hm.__firebolt.testHarness);function jT(f){console.debug("Sending message to transport: "+f);let i=JSON.parse(f);if(Array.isArray(i)){i.forEach(h=>jT(JSON.stringify(h)));return}let[o,l]=i.method.split(".");Ts&&Ts.onSend&&Ts.onSend(o,l,i.params,i.id),l.match(/^on[A-Z]/)&&(i.params.listen?Nu[i.id]=o.toLowerCase()+"."+l[2].toLowerCase()+l.substr(3):Object.keys(Nu).forEach(h=>{Nu[h]===o.toLowerCase()+"."+l[2].toLowerCase()+l.substr(3)&&delete Nu[h]})),Eg?FT(i):gg.push(i)}function FT(f){let i;try{i=hD(f.method,f.params)}catch{setTimeout(()=>od(JSON.stringify({jsonrpc:"2.0",error:{code:-32602,message:"Invalid params (this is a mock error from the mock transport layer)"},id:f.id})))}setTimeout(()=>od(JSON.stringify({jsonrpc:"2.0",result:i,id:f.id})))}function fD(f){od=f,Ts&&typeof Ts.initialize=="function"&&Ts.initialize({emit:$T,listen:function(...i){BT(...i)}})}function $T(f,i,o){const l=Object.entries(Nu).find(([h,g])=>g.toLowerCase()===f.toLowerCase()+"."+i.toLowerCase());if(l){let h=JSON.stringify({jsonrpc:"2.0",id:parseInt(l[0]),result:o});od(h)}}function cD(f={},i){const o=i.split(".");let l=f;for(let h=0;h<o.length;h++)l=(Object.entries(l).find(([g,v])=>g.toLowerCase()===o[h].toLowerCase())||[null,{}])[1];return l}function hD(f,i){let o=cD(Eg,f);return f.match(/^[a-zA-Z]+\.on[A-Za-z]+$/)&&(o={event:f,listening:!0}),typeof o=="function"?i==null?o():o(i):o}function dD(f){Eg=f,gg.forEach(i=>FT(i)),gg.length=0}const id={send:jT,receive:fD,event:$T};function zT(f,i,o){const l=f?Object.values(f).length:0;return l===o&&i===void 0?"getter":l===o&&typeof i=="function"||l===0&&typeof i=="function"?"subscriber":l===o&&i!==void 0?"setter":null}const Gm={};function pD(f,i,o,l,h,g){const v=zT(o,l,h),w=h?"."+Object.keys(o).filter(m=>m!=="value").map(m=>o[m]).join("."):"",s=`${f}.${i}${w}`;if(v==="getter")return Gm.hasOwnProperty(s)?Gm[s]:g;if(v!=="subscriber"){if(v==="setter")return Gm[s]=l,id.event(f,`${i}Changed`,{value:l}),null}}const Tn={mock:pD},VT={closedCaptions:{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]},closedCaptionsSettings:function(f){return Tn.mock("Accessibility","closedCaptionsSettings",f,void 0,0,{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]})},voiceGuidance:{enabled:!0,speed:2},voiceGuidanceSettings:function(f){return Tn.mock("Accessibility","voiceGuidanceSettings",f,void 0,0,{enabled:!0,speed:2})},audioDescriptionSettings:function(f){return Tn.mock("Accessibility","audioDescriptionSettings",f,void 0,0,{enabled:!0})}},mD={id:function(f){return Tn.mock("Account","id",f,void 0,0,"123")},uid:function(f){return Tn.mock("Account","uid",f,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")}},gD={config:{adServerUrl:"https://demo.v.fwmrm.net/ad/p/1",adServerUrlTemplate:"https://demo.v.fwmrm.net/ad/p/1?flag=+sltp+exvt+slcb+emcr+amcb+aeti&prof=12345:caf_allinone_profile &nw=12345&mode=live&vdur=123&caid=a110523018&asnw=372464&csid=gmott_ios_tablet_watch_live_ESPNU&ssnw=372464&vip=198.205.92.1&resp=vmap1&metr=1031&pvrn=12345&vprn=12345&vcid=1X0Ce7L3xRWlTeNhc7br8Q%3D%3D",adNetworkId:"519178",adProfileId:"12345:caf_allinone_profile",adSiteSectionId:"caf_allinone_profile_section",adOptOut:!0,privacyData:"ew0KICAicGR0IjogImdkcDp2MSIsDQogICJ1c19wcml2YWN5IjogIjEtTi0iLA0KICAibG10IjogIjEiIA0KfQ0K",ifaValue:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa:"ewogICJ2YWx1ZSI6ICIwMTIzNDU2Ny04OUFCLUNERUYtR0gwMS0yMzQ1Njc4OUFCQ0QiLAogICJpZmFfdHlwZSI6ICJzc3BpZCIsCiAgImxtdCI6ICIwIgp9Cg==",appName:"FutureToday",appBundleId:"FutureToday.comcast",distributorAppId:"1001",deviceAdAttributes:"ewogICJib0F0dHJpYnV0ZXNGb3JSZXZTaGFyZUlkIjogIjEyMzQiCn0=",coppa:0,authenticationEntity:"60f72475281cfba3852413bd53e957f6"},policy:function(f){return Tn.mock("Advertising","policy",f,void 0,0,{skipRestriction:"adsUnwatched",limitAdTracking:!1})},advertisingId:{ifa:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa_type:"sspid",lmt:"0"},deviceAttributes:{},appBundleId:"app.operator"},yD={token:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",expires:"2022-04-23T18:25:43.511Z",type:"platform"},device:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",session:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",root:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},vD={supported:!0,available:!0,permitted:!0,granted:!0,info:[{capability:"xrn:firebolt:capability:device:model",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:input:keyboard",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:protocol:bluetoothle",supported:!1,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unsupported"]},{capability:"xrn:firebolt:capability:token:device",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:token:platform",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unavailable"]},{capability:"xrn:firebolt:capability:protocol:moca",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["disabled","unavailable"]},{capability:"xrn:firebolt:capability:wifi:scan",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unpermitted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:null},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:locality",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["grantDenied","ungranted"]}],request:[{capability:"xrn:firebolt:capability:commerce:purchase",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}}]},HT={id:function(f){return Tn.mock("Device","id",f,void 0,0,"123")},distributor:function(f){return Tn.mock("Device","distributor",f,void 0,0,"Company")},platform:function(f){return Tn.mock("Device","platform",f,void 0,0,"WPE")},uid:function(f){return Tn.mock("Device","uid",f,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")},type:function(f){return Tn.mock("Device","type",f,void 0,0,"STB")},model:function(f){return Tn.mock("Device","model",f,void 0,0,"xi6")},sku:function(f){return Tn.mock("Device","sku",f,void 0,0,"AX061AEI")},make:function(f){return Tn.mock("Device","make",f,void 0,0,"Arris")},version:function(f){return Tn.mock("Device","version",f,void 0,0,{sdk:{major:0,minor:8,patch:0,readable:"Firebolt JS SDK v0.8.0"},api:{major:0,minor:8,patch:0,readable:"Firebolt API v0.8.0"},firmware:{major:1,minor:2,patch:3,readable:"Device Firmware v1.2.3"},os:{major:0,minor:1,patch:0,readable:"Firebolt OS v0.1.0"},debug:"Non-parsable build info for error logging only."})},hdcp:function(f){return Tn.mock("Device","hdcp",f,void 0,0,{"hdcp1.4":!0,"hdcp2.2":!0})},hdr:function(f){return Tn.mock("Device","hdr",f,void 0,0,{hdr10:!0,hdr10Plus:!0,dolbyVision:!0,hlg:!0})},audio:function(f){return Tn.mock("Device","audio",f,void 0,0,{stereo:!0,"dolbyDigital5.1":!0,"dolbyDigital5.1+":!0,dolbyAtmos:!0})},screenResolution:function(f){return Tn.mock("Device","screenResolution",f,void 0,0,[1920,1080])},videoResolution:function(f){return Tn.mock("Device","videoResolution",f,void 0,0,[1920,1080])},name:function(f){return Tn.mock("Device","name",f,void 0,0,"Living Room")},network:function(f){return Tn.mock("Device","network",f,void 0,0,{state:"connected",type:"wifi"})}},xD={policy:function(f){return Tn.mock("Discovery","policy",f,void 0,0,{enableRecommendations:!0,shareWatchHistory:!0,rememberWatchedPrograms:!0})},entityInfo:!0,purchasedContent:!0,watched:!0,watchNext:!0,entitlements:!0,contentAccess:null,clearContentAccess:null,launch:!0,signIn:!0,signOut:!0,userInterest:null,userInterestResponse:null,userInterestError:null},wD={email:"user@domain.com",password:"abc123",standard:"Living Room"};let Pa={state:"inactive",previous:"initializing"},PC={state:"foreground",previous:"inactive"},OC={state:"unloading",previous:"inactive"};const Au=f=>{id.event("Lifecycle",f.state,f)},rd=typeof window<"u"?window:{},Iu=rd.__firebolt?!!rd.__firebolt.automation:!1,SD={ready:function(){Pa.previous="initializing",setTimeout(()=>Au(Pa),Iu?1:500),PC.previous="inactive",setTimeout(()=>Au(PC),Iu?2:1e3)},close:function(f){let i=f.reason;if(i==="remoteButton")Pa.previous="foreground",setTimeout(()=>Au(Pa),Iu?1:500);else if(["userExit","error"].includes(i))Pa.previous="foreground",OC.previous="inactive",setTimeout(()=>Au(Pa),Iu?1:500),setTimeout(()=>Au(OC),Iu?2:1e3);else throw"Invalid close reason"},finished:function(){rd.location&&(rd.location.href="about:blank")}},GT={locality:function(f){return Tn.mock("Localization","locality",f,void 0,0,"Philadelphia")},postalCode:function(f){return Tn.mock("Localization","postalCode",f,void 0,0,"19103")},countryCode:function(f){return Tn.mock("Localization","countryCode",f,void 0,0,"US")},language:function(f){return Tn.mock("Localization","language",f,void 0,0,"en")},preferredAudioLanguages:function(f){return Tn.mock("Localization","preferredAudioLanguages",f,void 0,0,["spa","eng"])},locale:function(f){return Tn.mock("Localization","locale",f,void 0,0,"en-US")},latlon:[39.9549,75.1699],additionalInfo:{}},CD={ready:!0,signIn:!0,signOut:!0,startContent:!0,stopContent:!0,page:!0,action:!0,error:!0,mediaLoadStart:!0,mediaPlay:!0,mediaPlaying:!0,mediaPause:!0,mediaWaiting:!0,mediaProgress:!0,mediaSeeking:!0,mediaSeeked:!0,mediaRateChange:!0,mediaRenditionChange:!0,mediaEnded:!0,appInfo:null},TD={initialization:{lmt:0,us_privacy:"1-Y-",discovery:{navigateTo:{action:"entity",data:{entityId:"abc",entityType:"program",programType:"movie"},context:{source:"voice"}}}}},bD={approveContentRating:!1,approvePurchase:!1,flags:{userExperience:"1000"}},ED={protocols:{"dial1.7":!0},device:"device-id",friendlyName:function(f){return Tn.mock("SecondScreen","friendlyName",f,void 0,0,"Living Room")}},kD={get:"VGhpcyBub3QgYSByZWFsIHRva2VuLgo=",set:null,remove:null,clear:null},AD={localization:GT,device:HT,accessibility:VT};class ID{constructor(){this._callback=null,this._queue=[]}send(i){this._queue.push(i)}receive(i){this._callback=i}flush(i){i.receive(this._callback),this._queue.forEach(o=>i.send(o))}}const Ss={},Ei={},MD=(f,i)=>{Ss.app=f,Ss.platform={logLevel:"WARN",...i},Ss.user={}},_D=(f,i)=>{Ei[f]&&Ei[f].forEach(o=>o(i))},RD=(f={},i)=>{const o=i.split(".");for(let l=0;l<o.length;l++)f=f[o[l]]=f[o[l]]!==void 0?f[o[l]]:{};return typeof f=="object"?Object.keys(f).length?f:void 0:f},Wm={get(f,i,o=void 0){const l=RD(Ss[f],i);return l!==void 0?l:o},has(f,i){return!!this.get(f,i)},set(f,i){Ss.user[f]=i,_D(f,i)},subscribe(f,i){Ei[f]=Ei[f]||[],Ei[f].push(i)},unsubscribe(f,i){if(i){const o=Ei[f]&&Ei[f].findIndex(l=>l===i);o>-1&&Ei[f].splice(o,1)}else f in Ei&&(Ei[f]=[])},clearSubscribers(){for(const f of Object.getOwnPropertyNames(Ei))delete Ei[f]},setLogLevel(f){Ss.platform.logLevel=f},getLogLevel(){return Ss.platform.logLevel}},Xi=typeof window<"u"?window:{};class sd{constructor(i){this.bridge=i}send(i){this.bridge.JSMessageChanged(i,()=>{})}receive(i){Xi.$badger=Xi.$badger||{};const o=Xi.$badger.callback?Xi.$badger.callback.bind(Xi.$badger):null,l=Xi.$badger.event?Xi.$badger.event.bind(Xi.$badger):null;Xi.$badger.callback=(h,g,v)=>{v.jsonrpc?i(JSON.stringify(v)):o&&o(h,g,v)},Xi.$badger.event=(h,g)=>{g.jsonrpc?i(JSON.stringify(g)):l&&l(h,g)}}static isLegacy(i){return sd.isXREProxy(i)||i.send===void 0&&i.JSMessageChanged}static isXREProxy(i){return i.proxyObjectTest!==void 0}}const LD=100;class DD{constructor(i){this._endpoint=i,this._ws=null,this._connected=!1,this._queue=[],this._callbacks=[]}send(i){this._connect(),this._connected?this._ws.send(i):this._queue.length<LD&&this._queue.push(i)}receive(i){i&&(this._connect(),this._callbacks.push(i))}_notifyCallbacks(i){for(let o=0;o<this._callbacks.length;o++)setTimeout(()=>this._callbacks[o](i),1)}_connect(){this._ws||(this._ws=new WebSocket(this._endpoint,["jsonrpc"]),this._ws.addEventListener("message",i=>{this._notifyCallbacks(i.data)}),this._ws.addEventListener("error",i=>{}),this._ws.addEventListener("close",i=>{this._ws=null,this._connected=!1}),this._ws.addEventListener("open",i=>{this._connected=!0;for(let o=0;o<this._queue.length;o++)this._ws.send(this._queue[o]);this._queue=[]}))}}function PD(f,i){if(!i||!i.methods)return f;const{methods:o}=i,l=JSON.parse(JSON.stringify(f));return Object.keys(o).forEach(h=>{const g=o[h],v=g["x-method"],[w,s]=v.split("."),m={};m[g["x-this-param"]]=l,l[h]=(...C)=>{for(var y=0;y<C.length;y++)m[g["x-additional-params"][y]]=C[y];return En.send(w.toLowerCase(),s,m)}}),l}const NC={transform:PD},OD="com.comcast.BridgeObject_1";let Xm=null;const ND=f=>f&&typeof f.event=="string"&&typeof f.listening=="boolean",Kn=typeof window<"u"?window:{};class En{constructor(){this._promises=[],this._transport=null,this._id=1,this._eventEmitters=[],this._eventIds=[],this._queue=new ID,this._deprecated={},this.isMock=!1}static addEventEmitter(i){En.get()._eventEmitters.push(i)}static registerDeprecatedMethod(i,o,l){En.get()._deprecated[i.toLowerCase()+"."+o.toLowerCase()]={alternative:l||""}}_endpoint(){return Kn.__firebolt&&Kn.__firebolt.endpoint?Kn.__firebolt.endpoint:null}constructTransportLayer(){let i;const o=this._endpoint();return o&&(o.startsWith("ws://")||o.startsWith("wss://"))?(i=new DD(o),i.receive(this.receiveHandler.bind(this))):typeof Kn.ServiceManager<"u"&&Kn.ServiceManager&&Kn.ServiceManager.version?(i=this._queue,Kn.ServiceManager.getServiceForJavaScript(OD,l=>{sd.isLegacy(l)?i=new sd(l):i=l,this.setTransportLayer(i)})):(this.isMock=!0,i=id,i.receive(this.receiveHandler.bind(this))),i}setTransportLayer(i){this._transport=i,this._queue.flush(i)}static send(i,o,l,h){return En.get()._send(i,o,l,h)}static listen(i,o,l,h){return En.get()._sendAndGetId(i,o,l,h)}_send(i,o,l,h){return Array.isArray(i)&&!o&&!l?this._batch(i):this._sendAndGetId(i,o,l,h).promise}_sendAndGetId(i,o,l,h){const{promise:g,json:v,id:w}=this._processRequest(i,o,l,h),s=JSON.stringify(v);return Wm.getLogLevel()==="DEBUG"&&console.debug("Sending message to transport: "+s),this._transport.send(s),{id:w,promise:g}}_batch(i){const o=[],l=[];i.forEach(({module:g,method:v,params:w,transforms:s})=>{const m=this._processRequest(g,v,w,s);o.push({promise:m.promise,id:m.id}),l.push(m.json)});const h=JSON.stringify(l);return Wm.getLogLevel()==="DEBUG"&&console.debug("Sending message to transport: "+h),this._transport.send(h),o}_processRequest(i,o,l,h){const g=this._addPromiseToQueue(i,o,l,h),v=this._createRequestJSON(i,o,l),w={promise:g,json:v,id:this._id};return this._id++,w}_createRequestJSON(i,o,l){return{jsonrpc:"2.0",method:i.toLowerCase()+"."+o,params:l,id:this._id}}_addPromiseToQueue(i,o,l,h){return new Promise((g,v)=>{this._promises[this._id]={},this._promises[this._id].promise=this,this._promises[this._id].resolve=g,this._promises[this._id].reject=v,this._promises[this._id].transforms=h;const w=this._deprecated[i.toLowerCase()+"."+o.toLowerCase()];w&&console.warn(`WARNING: ${i}.${o}() is deprecated. `+w.alternative),o.match(/^on[A-Z]/)&&(l.listen?this._eventIds.push(this._id):this._eventIds=this._eventIds.filter(s=>s!==this._id))})}static get(){if(Kn.__firebolt=Kn.__firebolt||{},Kn.__firebolt.transport==null&&Xm==null){const i=new En;i.init(),i.isMock?Xm=i:(Kn.__firebolt=Kn.__firebolt||{},Kn.__firebolt.transport=i),Kn.__firebolt.setTransportLayer=i.setTransportLayer.bind(i)}return Kn.__firebolt.transport?Kn.__firebolt.transport:Xm}receiveHandler(i){Wm.getLogLevel()==="DEBUG"&&console.debug("Received message from transport: "+i);const o=JSON.parse(i),l=this._promises[o.id];if(l){if(o.error)l.reject(o.error);else{let h=o.result;l.transforms&&(Array.isArray(o.result)?h=h.map(g=>NC.transform(g,l.transforms)):h=NC.transform(h,l.transforms)),l.resolve(h)}delete this._promises[o.id]}this._eventIds.includes(o.id)&&!ND(o.result)&&this._eventEmitters.forEach(h=>{h(o.id,o.result)})}init(){MD({},{log:!0}),this._queue.receive(this.receiveHandler.bind(this)),Kn.__firebolt&&(Kn.__firebolt.mockTransportLayer===!0?(this.isMock=!0,this.setTransportLayer(id)):Kn.__firebolt.getTransportLayer&&this.setTransportLayer(Kn.__firebolt.getTransportLayer())),this._transport==null&&(this._transport=this.constructTransportLayer())}}Kn.__firebolt=Kn.__firebolt||{};Kn.__firebolt.setTransportLayer=f=>{En.get().setTransportLayer(f)};let ys=0;const hn={internal:{},external:{},get:f=>Object.assign(Object.assign({},hn.internal[f]),hn.external[f]),set:(f,i,o)=>{hn.external[f]=hn.external[f]||{},hn.external[f][i]=o},setInternal:(f,i,o)=>{hn.internal[f]=hn.internal[f]||{},hn.internal[f][i]=o},find:f=>{let i;return[hn.internal,hn.external].find(o=>{if(i=Object.keys(o).find(l=>o[l][f]),i)return!0}),i},remove:f=>{[hn.internal,hn.external].forEach(i=>{Object.keys(i).forEach(o=>{i[o]&&i[o][f]&&(delete i[o][f],Object.values(i[o]).length===0&&delete i[o])})})},removeKey:(f,i=!1)=>{i&&hn.internal[f]&&delete hn.internal[f],hn.external[f]&&delete hn.external[f]},keys:()=>Array.from(new Set(Object.keys(hn.internal).concat(Object.keys(hn.external)))),count:f=>Object.values(hn.get(f)).length},ad={},Wh=[],WT={},Xh={};let UC=!1;const XT=(f,i)=>{BC(hn.internal[ad[f]],[i]),BC(hn.external[ad[f]],[i])},Wr=(f,i)=>{WT[f.toLowerCase()]=i.concat()},hd=(f,i,o)=>{Xh[f.toLowerCase()]=Xh[f.toLowerCase()]||{},Xh[f.toLowerCase()][i]=o.concat()},BC=(f,i)=>{f&&Object.keys(f).forEach(o=>{let l=f[o];Wh.indexOf(parseInt(o))>=0&&(Wh.splice(Wh.indexOf(parseInt(o)),1),delete f[o]),l.apply(null,i)})},KT=function(f,i,o,l,h,g=!1){if(jD(),typeof o!="function")return Promise.reject("No valid callback function provided.");{if(f==="*")return Promise.reject("No valid module name provided");const v=i==="*",w=v?WT[f]:[i],s=[],m=Object.values(l).length>0,C=Object.keys(l).sort().map(b=>b+"="+JSON.stringify(l[b])).join("&");ys++,h&&Wh.push(ys),w.forEach(b=>{const _=f+"."+b+(m?`.${C}`:"");if(Object.values(hn.get(_)).length===0){const j=Object.assign({listen:!0},l),{id:H,promise:$}=En.listen(f,"on"+b[0].toUpperCase()+b.substring(1),j);ad[H]=_,s.push($)}const P=g?hn.setInternal:hn.set;v?P(_,""+ys,j=>o(b,j)):P(_,""+ys,o)});let y,x,M=new Promise((b,_)=>{y=b,x=_});return s.length?Promise.all(s).then(b=>{y(ys)}).catch(b=>{i==="*"?y(ys):x(b)}):y(ys),M}},qT=function(...f){const i=f.pop(),[o,l,h]=YT(...f);return[o,l,i,h]},YT=function(...f){const i=(f.shift()||"*").toLowerCase(),o=f.shift()||"*",l={};for(let h=0;f.length;h++)l[Xh[i][o][h]]=f.shift();return[i,o,l]},UD=function(...f){const[i,o,l,h]=qT(...f);return KT(i,o,l,h,!0)},QT=function(...f){const[i,o,l,h]=qT(...f);return KT(i,o,l,h,!1)},BD=function(...f){if(f&&f.length&&typeof f[0]=="number")return Km(f[0]);if(f&&f.length&&typeof f[1]=="number")return Km(f[1]);{const[i,o,l]=YT(...f);return Km(i,o,l)}},Nh=(f,i)=>{const[o,l]=f.split(".").slice(0,2),h=Object.assign({listen:!1},i);En.send(o,"on"+l[0].toUpperCase()+l.substr(1),h)},Km=function(f=!1,i=!1,o){if(i==="*"&&(i=!1),typeof f=="number"){const l=f.toString(),h=hn.find(l);return h?(hn.remove(l),hn.count(h)===0&&Nh(h),!0):!1}else if(!f&&!i)hn.keys().forEach(l=>{hn.removeKey(l),Nh(l)});else if(!i)hn.keys().forEach(l=>{l.indexOf(f.toLowerCase())===0&&(hn.removeKey(l),Nh(l))});else{const l=Object.values(o).length>0,h=Object.keys(o).sort().map(v=>v+"="+JSON.stringify(o[v])).join("&"),g=f+"."+i+(l?`.${h}`:"");hn.removeKey(g),Nh(g,o)}},jD=()=>{UC||(En.addEventEmitter(XT),uD(QT),UC=!0)},Es={listen:QT,once:UD,clear:BD,broadcast(f,i){XT(Object.entries(ad).find(([o,l])=>l==="app."+f)[0],i)}};function FD(f,i,o,l=void 0,h,g,v){const w=Object.values(o).length,s=zT(o,l,v);if(s==="getter")return En.send(f,i,o);if(s==="subscriber"){if(h)throw new Error("Cannot subscribe to an immutable property");return Es.listen(f,i+"Changed",...Object.values(o),l)}else if(s==="setter"){if(h)throw new Error("Cannot set a value to an immutable property");if(g)throw new Error("Cannot set a value to a readonly property");return En.send(f,"set"+i[0].toUpperCase()+i.substring(1),Object.assign({value:l},o))}else throw w<v?new Error("Cannot get a value without all required context parameters."):new Error("Property accessed with unexpected number of parameters.")}const qn={prop:FD};Wr("Accessibility",["audioDescriptionSettingsChanged","closedCaptionsSettingsChanged","voiceGuidanceSettingsChanged"]);En.registerDeprecatedMethod("Accessibility","closedCaptions","Use Accessibility.closedCaptionsSettings() instead.");En.registerDeprecatedMethod("Accessibility","voiceGuidance","Use Accessibility.voiceGuidanceSettings() instead.");function $D(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Account","id",i,f,!0,!0,0)}function zD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Account","uid",i,f,!0,!0,0)}const VD={id:$D,uid:zD};Wr("Advertising",["policyChanged"]);En.registerDeprecatedMethod("Authentication","token","Use Authentication module has individual methods for each token type. instead.");Wr("Capabilities",["available","granted","revoked","unavailable"]);hd("Capabilities","available",["capability"]);hd("Capabilities","granted",["role","capability"]);hd("Capabilities","revoked",["role","capability"]);hd("Capabilities","unavailable",["capability"]);Wr("Device",["audioChanged","deviceNameChanged","hdcpChanged","hdrChanged","nameChanged","networkChanged","screenResolutionChanged","videoResolutionChanged"]);En.registerDeprecatedMethod("Device","screenResolution","Use Use non-Firebolt APIs specific to your platform, e.g. W3C APIs instead.");En.registerDeprecatedMethod("Device","onDeviceNameChanged","Use Device.name() instead.");En.registerDeprecatedMethod("Device","onScreenResolutionChanged","Use screenResolution instead.");function HD(){return new Promise((f,i)=>{En.send("device","version").then(o=>{o=o||{},o.sdk=o.sdk||{},o.sdk.major=parseInt("1"),o.sdk.minor=parseInt("4"),o.sdk.patch=parseInt("1"),o.sdk.readable="Firebolt Core SDK 1.4.1",f(o)}).catch(o=>{i(o)})})}function GD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","audio",i,f,!1,!0,0)}function WD(...f){return Es.clear("Device",...f)}function XD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","distributor",i,f,!0,!0,0)}function KD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","hdcp",i,f,!1,!0,0)}function qD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","hdr",i,f,!1,!0,0)}function YD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","id",i,f,!0,!0,0)}function QD(...f){return Es.listen("Device",...f)}function ZD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","make",i,f,!0,!0,0)}function JD(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","model",i,f,!0,!0,0)}function eP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","name",i,f,!1,!0,0)}function tP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","network",i,f,!1,!0,0)}function nP(...f){return Es.once("Device",...f)}function oP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","platform",i,f,!0,!0,0)}function iP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","screenResolution",i,f,!1,!0,0)}function rP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","sku",i,f,!0,!0,0)}function sP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","type",i,f,!0,!0,0)}function aP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","uid",i,f,!0,!0,0)}function lP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Device","videoResolution",i,f,!1,!0,0)}const Va={Events:{DEVICE_NAME_CHANGED:"deviceNameChanged",NAME_CHANGED:"nameChanged",HDCP_CHANGED:"hdcpChanged",HDR_CHANGED:"hdrChanged",AUDIO_CHANGED:"audioChanged",SCREEN_RESOLUTION_CHANGED:"screenResolutionChanged",VIDEO_RESOLUTION_CHANGED:"videoResolutionChanged",NETWORK_CHANGED:"networkChanged"},NetworkState:{CONNECTED:"connected",DISCONNECTED:"disconnected"},NetworkType:{WIFI:"wifi",ETHERNET:"ethernet",HYBRID:"hybrid"},version:HD,audio:GD,clear:WD,distributor:XD,hdcp:KD,hdr:qD,id:YD,listen:QD,make:ZD,model:JD,name:eP,network:tP,once:nP,platform:oP,screenResolution:iP,sku:rP,type:sP,uid:aP,videoResolution:lP},jC={},uP=(f,i,o)=>{if(jC[f])throw`Capability ${f} has multiple provider interfaces registered.`;o.forEach(l=>l.name=`${i}.${l.name}`),jC[f]=o.concat()};Wr("Discovery",["navigateTo","policyChanged"]);uP("xrn:firebolt:capability:discovery:interest","Discovery",[{name:"userInterest",focus:!1,response:!0,parameters:!0}]);En.registerDeprecatedMethod("Discovery","entityInfo","Use null instead.");En.registerDeprecatedMethod("Discovery","purchasedContent","Use null instead.");En.registerDeprecatedMethod("Discovery","entitlements","Use Discovery.contentAccess() instead.");En.registerDeprecatedMethod("Discovery","onPullEntityInfo","Use null instead.");En.registerDeprecatedMethod("Discovery","onPullPurchasedContent","Use null instead.");Wr("Lifecycle",["background","foreground","inactive","suspended","unloading"]);Wr("Localization",["countryCodeChanged","languageChanged","localeChanged","localityChanged","postalCodeChanged","preferredAudioLanguagesChanged"]);En.registerDeprecatedMethod("Localization","language","Use Localization.locale instead.");En.registerDeprecatedMethod("Localization","onLanguageChanged","Use language instead.");function fP(){return En.send("Localization","additionalInfo",{},null)}function cP(...f){return Es.clear("Localization",...f)}function hP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Localization","countryCode",i,f,!1,!0,0)}function dP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Localization","language",i,f,!1,!0,0)}function pP(){return En.send("Localization","latlon",{},null)}function mP(...f){return Es.listen("Localization",...f)}function gP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Localization","locale",i,f,!1,!0,0)}function yP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Localization","locality",i,f,!1,!0,0)}function vP(...f){return Es.once("Localization",...f)}function xP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Localization","postalCode",i,f,!1,!0,0)}function wP(){let f=arguments[0],i={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],i={}),qn.prop("Localization","preferredAudioLanguages",i,f,!1,!0,0)}const Mu={Events:{LOCALITY_CHANGED:"localityChanged",POSTAL_CODE_CHANGED:"postalCodeChanged",COUNTRY_CODE_CHANGED:"countryCodeChanged",LANGUAGE_CHANGED:"languageChanged",PREFERRED_AUDIO_LANGUAGES_CHANGED:"preferredAudioLanguagesChanged",LOCALE_CHANGED:"localeChanged"},additionalInfo:fP,clear:cP,countryCode:hP,language:dP,latlon:pP,listen:mP,locale:gP,locality:yP,once:vP,postalCode:xP,preferredAudioLanguages:wP};Wr("SecondScreen",["closeRequest","friendlyNameChanged","launchRequest"]);dD({Accessibility:VT,Account:mD,Advertising:gD,Authentication:yD,Capabilities:vD,Device:HT,Discovery:xD,Keyboard:wD,Lifecycle:SD,Localization:GT,Metrics:CD,Parameters:TD,Profile:bD,SecondScreen:ED,SecureStorage:kD,Platform:AD});const dd={device:{about:"A module for querying about the device and it's capabilities",methods:[{name:"make",about:"The manufacturer of the device model"},{name:"model",about:"The manufacturer designated model of the device"},{name:"name",about:"The human readable name of the device"},{name:"network",about:"The current network status and type"},{name:"platform",about:"Platform identifier for the device"}]},account:{about:"A module for querying about the device account",methods:[{name:"id",about:"The platform back-office account identifier"},{name:"uid",about:"Unique id for the current app & account"}]},localization:{about:"Methods for accessing location and language preferences",methods:[{name:"countryCode",about:"Get the ISO 3166-1 alpha-2 code for the country device is located in"},{name:"language",about:"Get the ISO 639 1/2 code for the preferred language"},{name:"latlon",about:"Approximate latitude and longitude coordinates of the device location"},{name:"locality",about:"The locality/city the device is located in"},{name:"postalCode",about:"Get the postal code the device is located in"}]}},SP=Je.Component("Module",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.w=o.w,m.h=o.h,m.color=o.bColor,m.effects=[{type:"radius",props:{radius:8}}],s[0].populate(m),i=s[0];const C={};return s[1]=this.element({parent:i||"root"},o),C.x=o.w/2,C.y=o.h/2,C.mount="{x:0.5, y:0.5}",C.content=o.name,C.color=o.fColor,C.font="raleway",C.__textnode=!0,s[1].populate(C),s},effects:[function(i,o,l,h,g,v){o[0].set("color",i.bColor)},function(i,o,l,h,g,v){o[0].set("effects",[{type:"radius",props:{radius:8}}])},function(i,o,l,h,g,v){o[1].set("content",i.name)}],context:{}},state(){return{w:300,h:250,bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }",fColor:"#fff"}},props:["name"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}},input:{enter(){this.$router.to(`/examples/firebolt/${this.name}`)}}}),CP=Je.Component("Methods",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),s[0].populate(m),i=s[0];const C={};s[1]=this.element({parent:i||"root"},o),C.w=o.w,C.h=o.h,C.color=o.nameBgColor,C.effects=[{type:"radius",props:{radius:[8,8,0,0]}}],s[1].populate(C),i=s[1];const y={};s[2]=this.element({parent:i||"root"},o),y.content=o.name,y.x=o.w/2,y.y=o.h/2,y.mount=.5,y.color="0xffffffff",y.font="lato",y.size=50,y.__textnode=!0,s[2].populate(y),i=s[0];const x={};s[3]=this.element({parent:i||"root"},o),x.w=o.w,x.h=50,x.color="0x4b5563ff",x.y=75,x.effects=[{type:"radius",props:{radius:[0,0,8,8]}}],s[3].populate(x),i=s[3];const M={};return s[4]=this.element({parent:i||"root"},o),M.content=o.about,M.maxwidth=o.w,M.align="center",M.font="lato",M.maxlines=1,M.size=28,M.y=6,M.__textnode=!0,s[4].populate(M),s},effects:[function(i,o,l,h,g,v){o[1].set("color",i.nameBgColor)},function(i,o,l,h,g,v){o[1].set("effects",[{type:"radius",props:{radius:[8,8,0,0]}}])},function(i,o,l,h,g,v){o[2].set("content",i.name)},function(i,o,l,h,g,v){o[3].set("effects",[{type:"radius",props:{radius:[0,0,8,8]}}])},function(i,o,l,h,g,v){o[4].set("content",i.about)}],context:{}},state(){return{w:600,h:75,nameBgColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["name","about"],hooks:{focus(){this.nameBgColor="{ top: '#6366F1', bottom: '#4F46E5' }",this.$emit("execute",this.name)},unfocus(){this.nameBgColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),pd=Je.Component("List",{components:{Method:CP,Module:SP},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1;const M={};s[0]=this.element({parent:i||"root"},x===!0?y:o),s[0].populate(M),i=s[0];const b={};s[1]=this.element({parent:i||"root"},x===!0?y:o),b.y={transition:o.y},s[1].populate(b),i=s[1];const _=[];let P,j;const H=(k=[],V,Z)=>{const oe=v(k),K=new Set;let ne=oe.length;const W={};for(P=W.from||0,j=("to"in W)?W.to:oe.length;ne--;){const ge=oe[ne];ne<j&&ne>=P&&K.add(""+ge.name)}let J=Z.length;for(;J--;)if(K.has(Z[J])===!1){const ge=Z[J];V[2][ge]&&V[2][ge].destroy(),delete V[2][ge],V[3][ge]&&V[3][ge].destroy(),delete V[3][ge]}Z.length=0;const fe=oe.length,ye=[];for(let ge=0;ge<fe;ge++){if(ge<P||ge>=j)continue;const pe=Object.create(o);i=V[1],pe.item=oe[ge],pe.index=ge,pe.key=""+pe.item.name,Z.push(pe.key);const Ee=l.components&&l.components.Method||h.Method;V[2]===void 0&&(V[2]={});const Re={};V[2][pe.key]===void 0&&(V[2][pe.key]=this.element({parent:i||"root"},x===!0?y:o)),Re.name=pe.item.name,Re.about=pe.item.about,Re.y=pe.index*160,Re.ref=pe.type+pe.index;const z=[];if(typeof Ee<"u")for(let Ue in Ee[Symbol.for("config")].props)delete Re[Ee[Symbol.for("config")].props[Ue]],z.push(Ee[Symbol.for("config")].props[Ue]);V[2][pe.key].nodeId===void 0&&V[2][pe.key].populate(Re),V[3]===void 0&&(V[3]={}),i=V[2][pe.key];const Me={};if(V[3][pe.key]===void 0){Me.name=pe.item.name,Me.about=pe.item.about,C=pe.index*160,Array.isArray(C)===!0&&(C=v(C).slice(0)),Me.y=C,C=pe.type+pe.index,Array.isArray(C)===!0&&(C=v(C).slice(0)),Me.ref=C,m=Me.is||"Method";let Ue;if(typeof m=="string"){if(Ue=l.components&&l.components[m]||h[m],!Ue)throw new Error('Component "Method" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ue=m);V[3][pe.key]=Ue.call(null,{props:Me},V[2][pe.key],o),V[3][pe.key][Symbol.for("slots")][0]?(i=V[3][pe.key][Symbol.for("slots")][0],y=V[3][pe.key],x=!0):i=V[3][pe.key][Symbol.for("children")][0]}let ve=()=>{(typeof z>"u"||z.indexOf("y")===-1)&&V[2][pe.key].set("y",pe.index*160)};g(ve,null),ye.push(ve),V[3][pe.key][Symbol.for("props")].y=pe.index*160}return ye};let $;g(()=>{o[Symbol.for("removeGlobalEffects")]($),$=null,$=H(o.methods,s,_)},["methods"]),g(()=>{o.type;for(let k=0;k<o.methods.length;k++){if(k<P||k>=j)continue;const V={};V.index=k,V.item=o.methods[k],V.key=V.item.name,(typeof skip2>"u"||skip2.indexOf("ref")===-1)&&s[2][V.key].set("ref",o.type+V.index)}}),g(()=>{o.type;for(let k=0;k<o.methods.length;k++){if(k<P||k>=j)continue;const V={};V.index=k,V.item=o.methods[k],V.key=V.item.name,s[3][V.key][Symbol.for("props")].ref=o.type+V.index}}),i=s[0];const B={};s[4]=this.element({parent:i||"root"},x===!0?y:o),B.x={transition:o.x},B.y=325,s[4].populate(B),i=s[4];const te=[];let X,Y;const ee=(k=[],V,Z)=>{const oe=v(k),K=new Set;let ne=oe.length;const W={};for(X=W.from||0,Y=("to"in W)?W.to:oe.length;ne--;){const ge=oe[ne];ne<Y&&ne>=X&&K.add(""+ge.id)}let J=Z.length;for(;J--;)if(K.has(Z[J])===!1){const ge=Z[J];V[5][ge]&&V[5][ge].destroy(),delete V[5][ge],V[6][ge]&&V[6][ge].destroy(),delete V[6][ge]}Z.length=0;const fe=oe.length,ye=[];for(let ge=0;ge<fe;ge++){if(ge<X||ge>=Y)continue;const pe=Object.create(o);i=V[4],pe.item=oe[ge],pe.index=ge,pe.key=""+pe.item.id,Z.push(pe.key);const Ee=l.components&&l.components.Module||h.Module;V[5]===void 0&&(V[5]={});const Re={};V[5][pe.key]===void 0&&(V[5][pe.key]=this.element({parent:i||"root"},x===!0?y:o)),Re.name=pe.item.name,Re.ref=pe.type+pe.index,Re.x=pe.index*400;const z=[];if(typeof Ee<"u")for(let ve in Ee[Symbol.for("config")].props)delete Re[Ee[Symbol.for("config")].props[ve]],z.push(Ee[Symbol.for("config")].props[ve]);V[5][pe.key].nodeId===void 0&&V[5][pe.key].populate(Re),V[6]===void 0&&(V[6]={}),i=V[5][pe.key];const Me={};if(V[6][pe.key]===void 0){Me.name=pe.item.name,C=pe.type+pe.index,Array.isArray(C)===!0&&(C=v(C).slice(0)),Me.ref=C,Me.x=pe.index*400,m=Me.is||"Module";let ve;if(typeof m=="string"){if(ve=l.components&&l.components[m]||h[m],!ve)throw new Error('Component "Module" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ve=m);V[6][pe.key]=ve.call(null,{props:Me},V[5][pe.key],o),V[6][pe.key][Symbol.for("slots")][0]?(i=V[6][pe.key][Symbol.for("slots")][0],y=V[6][pe.key],x=!0):i=V[6][pe.key][Symbol.for("children")][0]}}return ye};let he;return g(()=>{o[Symbol.for("removeGlobalEffects")](he),he=null,he=ee(o.modules,s,te)},["modules"]),g(()=>{o.type;for(let k=0;k<o.modules.length;k++){if(k<X||k>=Y)continue;const V={};V.index=k,V.item=o.modules[k],V.key=V.item.id,(typeof skip5>"u"||skip5.indexOf("ref")===-1)&&s[5][V.key].set("ref",o.type+V.index)}}),g(()=>{o.type;for(let k=0;k<o.modules.length;k++){if(k<X||k>=Y)continue;const V={};V.index=k,V.item=o.modules[k],V.key=V.item.id,s[6][V.key][Symbol.for("props")].ref=o.type+V.index}}),s},effects:[function(i,o,l,h,g,v){o[1].set("y",{transition:i.y})},function(i,o,l,h,g,v){o[4].set("x",{transition:i.x})}],context:{}},state(){return{x:400,y:100,activeIndex:0}},props:["data","type"],computed:{methods(){return this.isModule,this.data,this.isModule?[]:this.data},modules(){return this.isModule,this.data,this.isModule?this.data:[]},isModule(){return this.type,this.type==="module"}},watch:{activeIndex(f){const i=this.$select(`${this.type}${f}`);i&&i.$focus&&i.$focus()}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},left(){this.isModule&&this.activeIndex>0&&this.move(-1)},down(){!this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},up(){!this.isModule&&this.activeIndex>0&&this.move(-1)}},methods:{move(f){const i=this.activeIndex+f;this.type=="method"?this.y=i>5?-(i-5)*160-100:100:this.type=="module"&&(this.x=i>3?-(i-3)*400-400:400),this.activeIndex=i}}}),TP=Je.Component("FireBolt",{components:{List:pd},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(x-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.content="FireBolt Modules",b.x=960,b.y=80,b.mount="{x:0.5}",b.size=80,b.font="raleway",b.__textnode=!0,s[1].populate(b),y===!0&&(x-=1);const _=l.components&&l.components.List||h.List;i=s[0];const P={};s[2]=this.element({parent:i||"root"},y===!0?C:o),P.data=o.moduleNames,P.type="module",P.ref="modules";const j=[];if(typeof _<"u")for(let B in _[Symbol.for("config")].props)delete P[_[Symbol.for("config")].props[B]],j.push(_[Symbol.for("config")].props[B]);s[2].populate(P),y===!0&&(x-=1),i=s[2];const H={};H.data=o.moduleNames,H.type="module",H.ref="modules",m=H.is||"List";let $;if(typeof m=="string"){if($=l.components&&l.components[m]||h[m],!$)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);return s[3]=$.call(null,{props:H},s[2],o),s[3][Symbol.for("slots")][0]?(i=s[3][Symbol.for("slots")][0],C=s[3],y=!0):i=s[3][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),s},effects:[],context:{}},computed:{moduleNames(){return Object.keys(dd).map(f=>({id:f,name:f.charAt(0).toUpperCase()+f.slice(1)}))}},hooks:{focus(){const f=this.$select("modules");f&&f.$focus&&f.$focus()}}}),bP=Je.Component("DeviceModule",{components:{List:pd},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(x-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.content="Device",b.x=960,b.mount="{x:0.5}",b.y=50,b.font="raleway",b.size=40,b.__textnode=!0,s[1].populate(b),y===!0&&(x-=1),i=s[0];const _={};s[2]=this.element({parent:i||"root"},y===!0?C:o),_.content=o.device.about,_.x=960,_.mount="{x:0.5}",_.y=110,_.font="lato",_.__textnode=!0,s[2].populate(_),y===!0&&(x-=1);const P=l.components&&l.components.List||h.List;i=s[0];const j={};s[3]=this.element({parent:i||"root"},y===!0?C:o),j.data=o.device.methods,j.x=300,j.ref="methods",j.type="method",j.y=100;const H=[];if(typeof P<"u")for(let he in P[Symbol.for("config")].props)delete j[P[Symbol.for("config")].props[he]],H.push(P[Symbol.for("config")].props[he]);s[3].populate(j),y===!0&&(x-=1),i=s[3];const $={};$.data=o.device.methods,$.x=300,$.ref="methods",$.type="method",$.y=100,m=$.is||"List";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);s[4]=B.call(null,{props:$},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],C=s[4],y=!0):i=s[4][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),i=s[0];const te={};s[5]=this.element({parent:i||"root"},y===!0?C:o),te.x=1400,te.y=540,te.content=o.response,te.size=100,te.mount=.5,te.font="lato",te.show=!o.isNetworkRes,te.__textnode=!0,s[5].populate(te),y===!0&&(x-=1),i=s[0];const X={};s[6]=this.element({parent:i||"root"},y===!0?C:o),X.show=o.isNetworkRes,s[6].populate(X),y===!0&&(x-=1),i=s[6];const Y={};s[7]=this.element({parent:i||"root"},y===!0?C:o),Y.content="State: "+o.networkRes.state,Y.size=70,Y.font="lato",Y.x=1400,Y.y=500,Y.mount=.5,Y.__textnode=!0,s[7].populate(Y),y===!0&&(x-=1),i=s[6];const ee={};return s[8]=this.element({parent:i||"root"},y===!0?C:o),ee.content="Type: "+o.networkRes.type,ee.size=70,ee.font="lato",ee.y=580,ee.x=1400,ee.mount=.5,ee.__textnode=!0,s[8].populate(ee),y===!0&&(x-=1),s},effects:[function(i,o,l,h,g,v){o[5].set("content",i.response)},function(i,o,l,h,g,v){o[5].set("show",!i.isNetworkRes)},function(i,o,l,h,g,v){o[6].set("show",i.isNetworkRes)},function(i,o,l,h,g,v){o[7].set("content","State: "+i.networkRes.state)},function(i,o,l,h,g,v){o[8].set("content","Type: "+i.networkRes.type)}],context:{}},state(){return{device:dd.device,response:"",networkRes:{},isNetworkRes:!1}},hooks:{ready(){this.$listen("execute",async f=>{switch(this.$log.info(`Execute Device ${f} API`),this.isNetworkRes=!1,f){case"make":this.response=await Va.make();break;case"model":this.response=await Va.model();break;case"name":this.response=await Va.name();break;case"network":Object.assign(this.networkRes,await Va.network()),this.isNetworkRes=!0;break;case"platform":this.response=await Va.platform();break}})},focus(){const f=this.$select("methods");f&&f.$focus&&f.$focus()}}}),EP=Je.Component("AccountModule",{components:{List:pd},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(x-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.content="Account",b.x=960,b.mount="{x:0.5}",b.y=50,b.font="raleway",b.size=40,b.__textnode=!0,s[1].populate(b),y===!0&&(x-=1),i=s[0];const _={};s[2]=this.element({parent:i||"root"},y===!0?C:o),_.content=o.account.about,_.x=960,_.mount="{x:0.5}",_.y=110,_.font="lato",_.__textnode=!0,s[2].populate(_),y===!0&&(x-=1);const P=l.components&&l.components.List||h.List;i=s[0];const j={};s[3]=this.element({parent:i||"root"},y===!0?C:o),j.data=o.account.methods,j.x=300,j.ref="methods",j.y=300,j.type="method";const H=[];if(typeof P<"u")for(let X in P[Symbol.for("config")].props)delete j[P[Symbol.for("config")].props[X]],H.push(P[Symbol.for("config")].props[X]);s[3].populate(j),y===!0&&(x-=1),i=s[3];const $={};$.data=o.account.methods,$.x=300,$.ref="methods",$.y=300,$.type="method",m=$.is||"List";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);s[4]=B.call(null,{props:$},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],C=s[4],y=!0):i=s[4][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),i=s[0];const te={};return s[5]=this.element({parent:i||"root"},y===!0?C:o),te.x=1400,te.y=540,te.content=o.response,te.size=o.size,te.mount=.5,te.font="lato",te.__textnode=!0,s[5].populate(te),y===!0&&(x-=1),s},effects:[function(i,o,l,h,g,v){o[5].set("content",i.response)},function(i,o,l,h,g,v){o[5].set("size",i.size)}],context:{}},state(){return{account:dd.account,response:"",size:100}},hooks:{ready(){this.$listen("execute",async f=>{switch(this.$log.info(`Execute Account ${f} API`),f){case"id":this.size=100,this.response=await VD.id();break;case"uid":this.size=40,this.response=await Va.uid();break}})},focus(){const f=this.$select("methods");f&&f.$focus&&f.$focus()}}}),kP=Je.Component("LocalizationModule",{components:{List:pd},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1,x=0;const M={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(M),y===!0&&(x-=1),i=s[0];const b={};s[1]=this.element({parent:i||"root"},y===!0?C:o),b.content="Localization",b.x=960,b.mount="{x:0.5}",b.y=50,b.font="raleway",b.size=40,b.__textnode=!0,s[1].populate(b),y===!0&&(x-=1),i=s[0];const _={};s[2]=this.element({parent:i||"root"},y===!0?C:o),_.content=o.localization.about,_.x=960,_.mount="{x:0.5}",_.y=110,_.font="lato",_.__textnode=!0,s[2].populate(_),y===!0&&(x-=1);const P=l.components&&l.components.List||h.List;i=s[0];const j={};s[3]=this.element({parent:i||"root"},y===!0?C:o),j.data=o.localization.methods,j.x=300,j.ref="methods",j.y=100,j.type="method";const H=[];if(typeof P<"u")for(let X in P[Symbol.for("config")].props)delete j[P[Symbol.for("config")].props[X]],H.push(P[Symbol.for("config")].props[X]);s[3].populate(j),y===!0&&(x-=1),i=s[3];const $={};$.data=o.localization.methods,$.x=300,$.ref="methods",$.y=100,$.type="method",m=$.is||"List";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);s[4]=B.call(null,{props:$},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],C=s[4],y=!0):i=s[4][Symbol.for("children")][0],y===!0&&x===0&&(y=!1),i=s[0];const te={};return s[5]=this.element({parent:i||"root"},y===!0?C:o),te.x=1400,te.y=540,te.content=o.response,te.size=o.size,te.mount=.5,te.font="lato",te.__textnode=!0,s[5].populate(te),y===!0&&(x-=1),s},effects:[function(i,o,l,h,g,v){o[5].set("content",i.response)},function(i,o,l,h,g,v){o[5].set("size",i.size)}],context:{}},state(){return{localization:dd.localization,response:"",size:100}},hooks:{ready(){this.$listen("execute",async f=>{switch(this.$log.info(`Execute Keyboard ${f} API`),this.response="null",f){case"countryCode":this.response=await Mu.countryCode();break;case"language":this.response=await Mu.language();break;case"latlon":this.response=(await Mu.latlon()).toString();break;case"locality":this.response=await Mu.locality();break;case"postalCode":this.response=await Mu.postalCode();break}})},focus(){const f=this.$select("methods");f&&f.$focus&&f.$focus()}}}),AP=[{path:"/examples/firebolt",component:TP},{path:"/examples/firebolt/device",component:bP},{path:"/examples/firebolt/account",component:EP},{path:"/examples/firebolt/localization",component:kP}],IP=Je.Component("Item",{code:{render:function(i,o,l,h,g,v,w){const s=[],m={};s[0]=this.element({parent:i||"root"},o),m.color=o.hasFocus?"0xe0f2feff":"0xfef9c3ff",m.w=200,m.h=200,m.effects=[{type:"radius",props:{radius:12}}],s[0].populate(m),i=s[0];const C={};return s[1]=this.element({parent:i||"root"},o),C.content=o.name,C.size=o.hasFocus?38:32,C.color=o.hasFocus?"0x1e3a8aff":"0x2563ebff",C.placement="{x: 'center', y: 'middle'}",C.__textnode=!0,s[1].populate(C),s},effects:[function(i,o,l,h,g,v){o[0].set("color",i.hasFocus?"0xe0f2feff":"0xfef9c3ff")},function(i,o,l,h,g,v){o[0].set("effects",[{type:"radius",props:{radius:12}}])},function(i,o,l,h,g,v){o[1].set("content",i.name)},function(i,o,l,h,g,v){o[1].set("size",i.hasFocus?38:32)},function(i,o,l,h,g,v){o[1].set("color",i.hasFocus?"0x1e3a8aff":"0x2563ebff")}],context:{}},props:["name"],state(){return{message:null}},hooks:{focus(){this.message=this.$announcer.speak(this.name)},unfocus(){this.message&&this.message.cancel()}}}),MP=Je.Component("Row",{components:{Item:IP},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y=!1;const x={};s[0]=this.element({parent:i||"root"},y===!0?C:o),s[0].populate(x),i=s[0];const M={};s[1]=this.element({parent:i||"root"},y===!0?C:o),M.content=o.title,M.size=40,M.__textnode=!0,s[1].populate(M),i=s[0];const b=[];let _,P;const j=($=[],B,te)=>{const X=v($),Y=new Set;let ee=X.length;const he={};for(_=he.from||0,P=("to"in he)?he.to:X.length;ee--;)X[ee],ee<P&&ee>=_&&Y.add(""+ee);let k=te.length;for(;k--;)if(Y.has(te[k])===!1){const oe=te[k];B[2][oe]&&B[2][oe].destroy(),delete B[2][oe],B[3][oe]&&B[3][oe].destroy(),delete B[3][oe]}te.length=0;const V=X.length,Z=[];for(let oe=0;oe<V;oe++){if(oe<_||oe>=P)continue;const K=Object.create(o);i=B[0],K.item=X[oe],K.index=oe,K.key=""+oe,K.__ref="item"+oe,te.push(K.key);const ne=l.components&&l.components.Item||h.Item;B[2]===void 0&&(B[2]={});const W={};B[2][K.key]===void 0&&(B[2][K.key]=this.element({parent:i||"root"},y===!0?C:o)),W.name=K.item,W.y=100,W.x=K.index*250+100,W.ref=K.__ref;const J=[];if(typeof ne<"u")for(let ye in ne[Symbol.for("config")].props)delete W[ne[Symbol.for("config")].props[ye]],J.push(ne[Symbol.for("config")].props[ye]);B[2][K.key].nodeId===void 0&&B[2][K.key].populate(W),B[3]===void 0&&(B[3]={}),i=B[2][K.key];const fe={};if(B[3][K.key]===void 0){fe.name=K.item,fe.y=100,fe.x=K.index*250+100,fe.ref=K.__ref,m=fe.is||"Item";let ye;if(typeof m=="string"){if(ye=l.components&&l.components[m]||h[m],!ye)throw new Error('Component "Item" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ye=m);B[3][K.key]=ye.call(null,{props:fe},B[2][K.key],o),B[3][K.key][Symbol.for("slots")][0]?(i=B[3][K.key][Symbol.for("slots")][0],C=B[3][K.key],y=!0):i=B[3][K.key][Symbol.for("children")][0]}}return Z};let H;return g(()=>{o[Symbol.for("removeGlobalEffects")](H),H=null,H=j(o.items,s,b)},["items"]),s},effects:[function(i,o,l,h,g,v){o[1].set("content",i.title)}],context:{}},props:["title","items"],state(){return{focusIndex:-1,message:null}},hooks:{focus(){this.message=this.$announcer.speak("Row with different "+this.title),this.focusIndex=0,this.$trigger("focusIndex")},unfocus(){this.message.cancel()}},watch:{focusIndex(f){this.$select("item"+f).$focus()}},input:{right(){this.focusIndex=Math.min(this.focusIndex+1,this.items.length-1)},left(){this.focusIndex=Math.max(this.focusIndex-1,0)}}}),_P=Je.Component("Announcer",{components:{Row:MP},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),b.width=i.node.width*(100/100),b.y=50,s[0].populate(b),x===!0&&(M-=1),i=s[0];const _={};s[1]=this.element({parent:i||"root"},x===!0?y:o),_.placement="{x: 'center'}",_.size=50,_.content="Food",_.__textnode=!0,s[1].populate(_),x===!0&&(M-=1);const P=l.components&&l.components.Row||h.Row;i=s[0];const j={};s[2]=this.element({parent:i||"root"},x===!0?y:o),j.title="Fruits",j.x=200,j.y=150,j.items=["Banana","Strawberry","Kiwi","Mango","Grape"],j.ref="row1";const H=[];if(typeof P<"u")for(let k in P[Symbol.for("config")].props)delete j[P[Symbol.for("config")].props[k]],H.push(P[Symbol.for("config")].props[k]);s[2].populate(j),x===!0&&(M-=1),i=s[2];const $={};$.title="Fruits",$.x=200,$.y=150,C=["Banana","Strawberry","Kiwi","Mango","Grape"],Array.isArray(C)===!0&&(C=v(C).slice(0)),$.items=C,$.ref="row1",m=$.is||"Row";let B;if(typeof m=="string"){if(B=l.components&&l.components[m]||h[m],!B)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(B=m);s[3]=B.call(null,{props:$},s[2],o),s[3][Symbol.for("slots")][0]?(i=s[3][Symbol.for("slots")][0],y=s[3],x=!0):i=s[3][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const te=l.components&&l.components.Row||h.Row;i=s[0];const X={};s[4]=this.element({parent:i||"root"},x===!0?y:o),X.title="Snacks",X.x=200,X.y=600,X.items=["Pizza","Burger","Fries","Popcorn","Chocolate"],X.ref="row2";const Y=[];if(typeof te<"u")for(let k in te[Symbol.for("config")].props)delete X[te[Symbol.for("config")].props[k]],Y.push(te[Symbol.for("config")].props[k]);s[4].populate(X),x===!0&&(M-=1),i=s[4];const ee={};ee.title="Snacks",ee.x=200,ee.y=600,C=["Pizza","Burger","Fries","Popcorn","Chocolate"],Array.isArray(C)===!0&&(C=v(C).slice(0)),ee.items=C,ee.ref="row2",m=ee.is||"Row";let he;if(typeof m=="string"){if(he=l.components&&l.components[m]||h[m],!he)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(he=m);return s[5]=he.call(null,{props:ee},s[4],o),s[5][Symbol.for("slots")][0]?(i=s[5][Symbol.for("slots")][0],y=s[5],x=!0):i=s[5][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),s},effects:[function(i,o,l,h,g,v){(typeof skip2>"u"||skip2.indexOf("items")===-1)&&o[2].set("items",["Banana","Strawberry","Kiwi","Mango","Grape"])},function(i,o,l,h,g,v){o[3][Symbol.for("props")].items=["Banana","Strawberry","Kiwi","Mango","Grape"]},function(i,o,l,h,g,v){(typeof skip4>"u"||skip4.indexOf("items")===-1)&&o[4].set("items",["Pizza","Burger","Fries","Popcorn","Chocolate"])},function(i,o,l,h,g,v){o[5][Symbol.for("props")].items=["Pizza","Burger","Fries","Popcorn","Chocolate"]}],context:{}},state(){return{focusIndex:1}},watch:{focusIndex(f){this.$select("row"+f).$focus()}},hooks:{focus(){this.$announcer.speak("The topic is Food"),this.$select("row1").$focus(),this.$trigger("focusIndex")}},input:{up(){this.focusIndex=Math.max(this.focusIndex-1,1)},down(){this.focusIndex=Math.min(this.focusIndex+1,2)}}}),ZT=new URLSearchParams(window.location.search),RP=!!ZT.get("source"),LP=!!ZT.get("fps"),DP=Je.Application({components:{SourceInfo:MT},code:{render:function(i,o,l,h,g,v,w){const s=[];let m,C,y,x=!1,M=0;const b={};s[0]=this.element({parent:i||"root"},x===!0?y:o),b.w=1920,b.h=1080,b.color=o.backgroundColor,s[0].populate(b),x===!0&&(M-=1);const _=l.components&&l.components.RouterView||h.RouterView;i=s[0];const P={};s[1]=this.element({parent:i||"root"},x===!0?y:o),P.w=i.node.width*(100/100),P.h=i.node.height*(100/100);const j=[];if(typeof _<"u")for(let K in _[Symbol.for("config")].props)delete P[_[Symbol.for("config")].props[K]],j.push(_[Symbol.for("config")].props[K]);s[1].populate(P),x===!0&&(M-=1),i=s[1];const H={};H.w=i.node.width*(100/100),H.h=i.node.height*(100/100),m=H.is||"RouterView";let $;if(typeof m=="string"){if($=l.components&&l.components[m]||h[m],!$)throw new Error('Component "RouterView" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);s[2]=$.call(null,{props:H},s[1],o),s[2][Symbol.for("slots")][0]?(i=s[2][Symbol.for("slots")][0],y=s[2],x=!0):i=s[2][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const B=l.components&&l.components.FPScounter||h.FPScounter;i=s[0];const te={};s[3]=this.element({parent:i||"root"},x===!0?y:o),te.x=1610,te.show=o.showFPS;const X=[];if(typeof B<"u")for(let K in B[Symbol.for("config")].props)delete te[B[Symbol.for("config")].props[K]],X.push(B[Symbol.for("config")].props[K]);s[3].populate(te),x===!0&&(M-=1),i=s[3];const Y={};Y.x=1610,C=o.showFPS,Array.isArray(C)===!0&&(C=v(C).slice(0)),Y.show=C,m=Y.is||"FPScounter";let ee;if(typeof m=="string"){if(ee=l.components&&l.components[m]||h[m],!ee)throw new Error('Component "FPScounter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);s[4]=ee.call(null,{props:Y},s[3],o),s[4][Symbol.for("slots")][0]?(i=s[4][Symbol.for("slots")][0],y=s[4],x=!0):i=s[4][Symbol.for("children")][0],x===!0&&M===0&&(x=!1);const he=l.components&&l.components.SourceInfo||h.SourceInfo;i=s[0];const k={};s[5]=this.element({parent:i||"root"},x===!0?y:o),k.ref="info",k.show=o.showInfo;const V=[];if(typeof he<"u")for(let K in he[Symbol.for("config")].props)delete k[he[Symbol.for("config")].props[K]],V.push(he[Symbol.for("config")].props[K]);s[5].populate(k),x===!0&&(M-=1),i=s[5];const Z={};Z.ref="info",C=o.showInfo,Array.isArray(C)===!0&&(C=v(C).slice(0)),Z.show=C,m=Z.is||"SourceInfo";let oe;if(typeof m=="string"){if(oe=l.components&&l.components[m]||h[m],!oe)throw new Error('Component "SourceInfo" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(oe=m);return s[6]=oe.call(null,{props:Z},s[5],o),s[6][Symbol.for("slots")][0]?(i=s[6][Symbol.for("slots")][0],y=s[6],x=!0):i=s[6][Symbol.for("children")][0],x===!0&&M===0&&(x=!1),s},effects:[function(i,o,l,h,g,v){o[0].set("color",i.backgroundColor)},function(i,o,l,h,g,v){(typeof skip3>"u"||skip3.indexOf("show")===-1)&&o[3].set("show",i.showFPS)},function(i,o,l,h,g,v){o[4][Symbol.for("props")].show=i.showFPS},function(i,o,l,h,g,v){(typeof skip5>"u"||skip5.indexOf("show")===-1)&&o[5].set("show",i.showInfo)},function(i,o,l,h,g,v){o[6][Symbol.for("props")].show=i.showInfo}],context:{}},state(){return{backgroundColor:"#1e293b",showFPS:LP,showInfo:!1}},routes:[{path:"/",component:zL,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>AL(()=>import("./Loading-4db46be4.js"),[])},{path:"/demos/intro",component:()=>new Promise(f=>{f(HL)})},{path:"/demos/theming",component:XL},{path:"/demos/tmdb",component:r6},{path:"/demos/sprites",component:a6},{path:"/demos/focushandling",component:u6},{path:"/demos/memory-game",component:G6,announce:"Let's play Memory"},{path:"/demos/player",component:S6},{path:"/examples/positioning",component:f6},{path:"/examples/colors",component:C6},{path:"/examples/gradients",component:T6},{path:"/examples/transitions",component:b6},{path:"/examples/alpha",component:E6},{path:"/examples/scaling",component:k6},{path:"/examples/rotation",component:A6},{path:"/examples/keyinput",component:I6},{path:"/examples/texts",component:M6},{path:"/examples/images",component:_6},{path:"/examples/components",component:R6},{path:"/examples/forloop",component:L6},{path:"/examples/forloop-advanced",component:U6},{path:"/examples/effects",component:B6},{path:"/examples/showif",component:j6},{path:"/examples/events",component:F6},{path:"/examples/slots",component:V6},{path:"/examples/viewport",component:K6},...eD,{path:"/examples/resize",component:tD},{path:"/examples/languageplugin",component:DC},{path:"/examples/keycodes",component:iD},{path:"/examples/translations",component:DC},{path:"/examples/special-characters",component:aD},{path:"/examples/layout",component:lD},{path:"/examples/announcer",component:_P,announce:"Welcome to the announcement example page"},{path:"/benchmarks/exponential",component:X6},...AP],hooks:{ready(){RP===!0&&(this.showInfo=!0),this.$listen("changeBackground",f=>{this.backgroundColor=f?f+80:"#1e293b"}),this.$listen("clearBackground",()=>{this.backgroundColor="transparent"})}},input:{async intercept(f){return f.key==="x"?(this.$log.info(`Intercepting key press (${f.key}) in App Component`),new Promise(i=>{this.$log.info("Executing an async operation"),setTimeout(()=>{this.$log.info("Finished an async operation"),i(f)},2e3)})):f},escape(){this.quit()},back(){this.$router.to("/")},sourceCode(){this.showInfo=!1;const f=PP(this.$router.currentRoute.path);f&&window.open(`https://github.com/lightning-js/blits-example-app/tree/master/${f}`,"_blank")}}}),PP=f=>({"/":"src/pages/Portal","/demos/loading":"src/pages/Loading","/demos/intro":"src/pages/Intro","/demos/theming":"src/pages/Theming","/demos/tmdb":"src/pages/Tmdb","/demos/sprites":"src/pages/Sprites","/demos/focushandling":"src/pages/FocusHandling","/demos/memory-game":"src/pages/MemoryGame","/demos/player":"src/pages/Player","/examples/positioning":"src/pages/Positioning","/examples/colors":"src/pages/Colors","/examples/gradients":"src/pages/Gradients","/examples/transitions":"src/pages/Transitions","/examples/components":"src/pages/Components","/examples/alpha":"src/pages/Alpha","/examples/scaling":"src/pages/Scaling","/examples/rotation":"src/pages/Rotation","/examples/keyinput":"src/pages/KeyInput","/examples/forloop":"src/pages/ForLoop","/examples/forloop-advanced":"src/pages/ForLoopAdvanced","/examples/effects":"src/pages/Effects","/examples/showif":"src/pages/ShowIf","/examples/events":"src/pages/Events","/examples/images":"src/pages/Images","/examples/texts":"src/pages/Texts","/examples/slots":"src/pages/Slots","/examples/viewport":"src/pages/Viewport","/examples/router-hooks":"src/pages/RouterHooks","/examples/resize":"src/pages/Resize","/examples/translations":"src/pages/LanguagePlugin","/examples/firebolt":"src/pages/Firebolt","/examples/keycodes":"src/pages/KeyCodes","/examples/special-characters":"src/pages/SpecialCharacters","/examples/layout":"src/pages/Layout","/benchmarks/exponential":"src/pages/Exponential"})["/"+f]+".js",FC={light:{color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},dark:{color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"}},$C={large:{w:1200,h:900,block1:{h:720},block2:{y:560,h:300,w:890},graph:{x:270,y:140,w:890,h:400,offset:110,size:"large"}},small:{w:500,h:600,block1:{h:180},block2:{y:140,h:180,w:200},graph:{x:32,y:370,w:0,h:0,offset:0,size:"small"}}};Je.Plugin(IT,"colors",{themes:{light:FC.light,dark:FC.dark},base:"light",current:"dark"});Je.Plugin(IT,"sizes",{themes:{small:$C.small,large:$C.large},base:"small",current:"small"});Je.Plugin(CL);Je.Launch(DP,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",defaultFont:"lato",keymap:{...bL(),85:"sourceCode"},fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"},{family:"lato-black",type:"msdf",file:"fonts/Lato-Black.ttf"}],canvasColor:"transparent",viewportMargin:100,announcer:!0});export{Je as B,rl as S};
