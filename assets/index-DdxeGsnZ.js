var xR=Object.defineProperty;var wR=(h,o,i)=>o in h?xR(h,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[o]=i;var F=(h,o,i)=>wR(h,typeof o!="symbol"?o+"":o,i);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const x of f)if(x.type==="childList")for(const w of x.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&c(w)}).observe(document,{childList:!0,subtree:!0});function i(f){const x={};return f.integrity&&(x.integrity=f.integrity),f.referrerPolicy&&(x.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?x.credentials="include":f.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function c(f){if(f.ep)return;f.ep=!0;const x=i(f);fetch(f.href,x)}})();const fe={cleanup:Symbol("cleanup"),currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),internalEvent:Symbol("internalEvent"),intervals:Symbol("intervals"),isProxy:Symbol("isProxy"),launched:Symbol("launched"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),routerHooks:Symbol("routerHooks"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),config:Symbol.for("config"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType"),isComponent:Symbol.for("isComponent"),effects:Symbol.for("effects"),removeGlobalEffects:Symbol.for("removeGlobalEffects")},ni={[fe.settings]:{},get(h,o=null){return h in this[fe.settings]?this[fe.settings][h]:o},set(h,o){typeof h=="object"?Object.keys(h).forEach(i=>{this.set(i,h[i])}):this[fe.settings][h]=o}},Bd=()=>{},Im=h=>String(h).padStart(2,"0"),Mm=()=>{const h=new Date;return Im(h.getHours())+":"+Im(h.getMinutes())+":"+Im(h.getSeconds())},CC=h=>{const o=ni.get("debugLevel"),i={};return Object.defineProperty(i,"info",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${h} %c ${Mm()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Bd}}),Object.defineProperty(i,"warn",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${h} %c ${Mm()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Bd}}),Object.defineProperty(i,"error",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${h} %c ${Mm()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Bd}}),Object.defineProperty(i,"debug",{get(){return(o>=2||Array.isArray(o)&&o.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${h} %c (${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||Bd}}),i};let Mt;const SR=()=>{Mt=CC("Blits")},Fd={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},TR=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,CR=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,bR=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,Rm={},jd=h=>{if(Rm[h]!==void 0)return Rm[h];const o=parseInt(h).toString(16).padStart(2,"0");return Rm[h]=o,o},Vu={normalize:(h="",o="0xffffffff")=>{if(h=h.toString(),h.startsWith("0x")&&h.length===10)return h;if(Fd[h]!==void 0)return Fd[h];if(TR.test(h)){h=h.replace("#","").toLowerCase(),h.length===3&&(h=h.split("").map(f=>f+f).join(""));const c="0x"+h.padEnd(8,"f");return Fd[h]=c,c}const i=CR.exec(h);if(i){const c=jd(i[3]),f=jd(i[5]),x=jd(i[7]);let w="ff";if(i[10]&&i[1]==="rgba"){const a=Math.min(Math.max(Math.round(parseFloat(i[10])*255),0),255);w=jd(a)}const y="0x"+c+f+x+w;return Fd[h]=y,y}return bR.test(h)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):o}},kR=(h="",o,i,c=null)=>{let f=0,x=0,w=[],y=null,a=0;const r=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,C=/^\s*(\/?>)\s*/,R=/^([A-Za-z0-9:.\-_@$]+)=\s*(["'])/,k=/^<>\s*/,I=/^\s*(<\/>)\s*/,m=()=>{h=E(h);try{return S(N),pe(w)}catch(H){throw(H.name=="TemplateParseError"||H.name=="TemplateStructureError")&&(H.message=`${H.message}
${H.context}`),H}},S=H=>{f>=h.length||H()},E=H=>H.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),A=H=>{const z=h.slice(f).match(H);return z&&(x=f,f+=z[0].length),z},N=()=>{A(k)?(w.push({[Symbol.for("componentType")]:null,[fe.type]:"opening",[fe.level]:a,[fe.cursorTagStart]:x}),a++,S(N)):S(K)},K=()=>{A(I)?(a--,w.push({[Symbol.for("componentType")]:null,[fe.type]:"closing",[fe.level]:a}),S(N)):S(Se)},Se=()=>{const H=A(r);if(H)y={[Symbol.for("componentType")]:H[1],[fe.level]:a,[fe.cursorTagStart]:x},H[0].startsWith("</")?(a--,y[fe.type]="closing",y[fe.level]=a):(y[fe.type]="opening",a++),S(Me);else throw le("InvalidTag")},Me=()=>{const H=A(C);if(H){if(H[1]==="/>"){if(y[fe.type]==="closing")throw le("InvalidClosingTag");y[fe.type]="self-closing",a--}if(y[fe.type]==="opening"){const z=h.slice(f,h.indexOf("<",f));z&&(y.content=z,f+=z.length)}w.push(y),S(N)}else S(ue)},ue=()=>{const H=A(R);if(H){if(y[fe.type]==="closing")throw le("AttributesInClosingTag");const z=H[2],se=new RegExp(`^(.*?)${z}\\s*`),we=A(se);if(we){const Fe=he(H[1],we[1]);y[Fe.name]=Fe.value,S(Me)}else throw le("MissingOrInvalidAttributeValue")}else throw le("InvalidAttribute")},he=(H,z)=>{if(H.includes(".")){const[se,we]=H.split(".");return{name:se,value:`{${we}: ${z}}`}}return["color",":color",":effects","effects"].includes(H)?oe(H,z):{name:H,value:z}},oe=(H,z)=>{let se=z,we=Vu.normalize(se,null);if(we===null){const Fe=/'([^']+)'/g;let Je,$e=0,ke="";for(;(Je=Fe.exec(z))!==null;){const j=Je[1],lt=Je.index,De=Je[0].length;ke+=z.slice($e,lt),we=Vu.normalize(j,null),we===null?ke+=z.slice(lt,lt+De):ke+=`'${we}'`,$e=lt+De}ke+=z.slice($e),se=ke}else se=we;return{name:H,value:se}},pe=H=>{let z=[],se=!1,we={children:[]},Fe=we;for(let Je=0;Je<H.length;Je++){let $e=H[Je];if($e[fe.level]===0&&$e[fe.type]!=="closing"){if(se)throw me("MultipleTopLevelTags",$e);if($e[":for"]!==void 0)throw me("ForAttributeOnRootElement",$e);se=!0}if($e[fe.type]==="opening")z.push({[fe.level]:$e[fe.level],[fe.type]:$e[fe.type],[fe.cursorTagStart]:$e[fe.cursorTagStart],[Symbol.for("componentType")]:$e[Symbol.for("componentType")],parent:Fe});else if($e[fe.type]==="closing"){const j=z.length===0;let lt=!1,De=!1;if(j||(lt=z[z.length-1][fe.level]!==$e[fe.level],De=z[z.length-1][Symbol.for("componentType")]!==$e[Symbol.for("componentType")]),j||lt||De)throw me("MismatchedClosingTag",$e);Fe=z.pop().parent}const ke={...$e};delete ke[fe.type],delete ke[fe.level],delete ke[fe.cursorTagStart],$e[fe.type]==="opening"?(Je+1<H.length&&H[Je+1][fe.type]!=="closing"&&(ke.children=[]),Fe.children.push(ke),Fe=ke):$e[fe.type]==="self-closing"&&Fe.children.push(ke)}if(z.length>0)throw me("UnclosedTags",z);return we},D=10,ne=50,le=H=>{const z=re();H=`${H} in ${z}`;const se=new Error(H);se.name="TemplateParseError";const we=Math.max(0,x-D),Fe=Math.min(h.length,f+ne),Je=h.slice(we,Fe),$e=f-we;return se.context=V($e,Je),se},me=(H,z)=>{const se=re();H=`${H} in ${se}`;const we=new Error(H);we.name="TemplateStructureError",Array.isArray(z)?we.context=z.map(Je=>Fe(Je)).join(`
`):we.context=Fe(z);function Fe(Je){const $e=Math.max(0,Je[fe.cursorTagStart]-D),ke=h.slice($e,$e+ne);return V(D,ke)}return we},V=(H,z)=>{const se=" ".repeat(H)+"^";return`
${z}
${se}
`},re=()=>c||"Blits.Application";return m()};let wt,mh;function AR(h={children:[]},o=!1){const i={renderCode:["const elms = []","const elementConfigs = []","const forloops = []","const props = []","const created = []","const skips = []","let componentType","let rootComponent = component","let propData","let slotComponent","let inSlot = false","let slotChildCounter = 0","let cmps = []"],effectsCode:[],cleanupCode:["rootComponent = null","propData = null","slotComponent = null","component = null","parent = null"],context:{props:[],components:this.components}};return wt=-1,mh=o,mh===!0&&i.renderCode.push(`
      function propInComponent(prop, kind="dynamic") {
        const property = prop.includes('.') ? prop.split('.')[0] : prop
        if (kind === 'reactive' || prop.includes('.') === false) {
          if (property in component === false) {
            Log.warn('Property ' +  property + ' was accessed during render but is not defined on instance')
          }
        } else {
          const nestedKeys = prop.split('.')
          let base = component
          for(let i =0; i<nestedKeys.length;i++){
            if (base[nestedKeys[i]] === undefined) {
              Log.warn('Property ' +  nestedKeys.slice(0,i+1).join('.') + ' was accessed during render but is not defined on instance')
            }
            base = base[nestedKeys[i]]
          }
        }
      }
    `),kC.call(i,h),i.renderCode.push(`
    return { elms, cleanup: () => {
      ${i.cleanupCode.join(`
`)}
      cmps.length = 0
      elms.length = 0
      components.length = 0
      elementConfigs.length = 0
      forloops.length = 0
      props.length = 0
      skips.length = 0
    }}
  `),{render:new Function("parent","component","context","components","effect","getRaw","Log",i.renderCode.join(`
`)),effects:i.effectsCode.map(c=>new Function("component","elms","context","components","rootComponent","effect",c)),context:i.context}}const ER=function(h){const o=/\$\$?\w+(\.\w+)?/g,i=h.match(o);if(i!==null){const c=/\$shader/;return i.filter(f=>!c.test(f))}else return!1},M3=function(h,o,i="dynamic"){const c=ER(h);if(c!==!1)for(let f=0;f<c.length;f++){let x=c[f];i==="reactive"&&x.includes(".")&&(x=x.split(".")[0]),o.push(`propInComponent('${x.replace("$","")}', '${i}')`)}},yh=function(h,o=!1,i={key:!1,component:"component.",forceEffect:!1,forloop:!1}){const c=i.forceEffect?this.effectsCode:this.renderCode;o&&c.push(`parent = ${o}`),"key"in h&&(i.key=Ai(h.key,i.component));const f=i.key?`elms[${wt}][${i.key}]`:`elms[${wt}]`;i.key&&c.push(`
      if(elms[${wt}] === undefined) {
        elms[${wt}] = {}
      }
    `),c.push(`elementConfigs[${wt}] = {}`),i.forloop&&c.push(`if(${f} === undefined) {`),c.push(`
    ${f} = this.element({parent: parent || 'root'}, inSlot === true ? slotComponent : component)
  `),i.forloop&&c.push("}");const x=h.children;delete h.children,h[Symbol.for("componentType")]==="Slot"&&c.push(`elementConfigs[${wt}][Symbol.for('isSlot')] = true`),Object.keys(h).forEach(w=>{if(w==="slot"&&c.push(`
        elementConfigs[${wt}]['parent'] = slotComponent[Symbol.for('slots')] !== undefined && Array.isArray(slotComponent[Symbol.for('slots')]) === true && slotComponent[Symbol.for('slots')].filter(slot => slot.ref === '${h.slot}').shift() || parent
      `),w==="key")return;const y=h[w];if(AC(w)){if(i.holder&&w===":color")return;i.holder?this.effectsCode.push(`
        if(typeof skips === 'undefined' || (typeof skips[${wt}] === 'undefined' ||
          skips[${wt}].indexOf('${w.substring(1)}') === -1))
          ${f}.set('${w.substring(1)}', ${Ai(h[w],i.component)})
        `):this.effectsCode.push(`
            ${f}.set('${w.substring(1)}', ${Ai(h[w],i.component)})
          `),mh===!0&&i.component!=="scope."&&y.includes("$")&&M3(y,c,"reactive"),c.push(`elementConfigs[${wt}]['${w.substring(1)}'] = ${Ai(y,i.component)}`)}else mh===!0&&i.component!=="scope."&&y.includes("$")&&M3(y,c),c.push(`elementConfigs[${wt}]['${w}'] = ${wy(y,w,i.component)}`)}),i.holder===!0&&c.push(`
    skips[${wt}] = []
    if(typeof cmps[${wt}] !== 'undefined') {
      for(let key in cmps[${wt}][Symbol.for('config')].props) {
        delete elementConfigs[${wt}][cmps[${wt}][Symbol.for('config')].props[key]]
        skips[${wt}].push(cmps[${wt}][Symbol.for('config')].props[key])
      }
    }
    `),i.forloop&&c.push(`if(${f}.nodeId === undefined) {`),c.push(`${f}.populate(elementConfigs[${wt}])`),c.push(`
    if(inSlot === true) {
      slotChildCounter -= 1
    }
  `),i.forloop&&c.push("}"),x&&kC.call(this,{children:x},`${f}`,i)},bC=function(h,o=!1,i={key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1}){const c=i.forceEffect?this.effectsCode:this.renderCode;c.push(`
    cmps[${wt}] =
      (context.components && context.components['${h[Symbol.for("componentType")]}']) || components['${h[Symbol.for("componentType")]}']
  `),this.cleanupCode.push(`
    cmps[${wt}] = null
  `),"key"in h&&(i.key=Ai(h.key,i.component));const f=h.children;delete h.children,yh.call(this,h,o,{...i,holder:!0}),o=i.key?`elms[${wt}][${i.key}]`:`elms[${wt}]`,wt++;const x=i.key?`elms[${wt}][${i.key}]`:`elms[${wt}]`;i.key&&c.push(`
      if(elms[${wt}] === undefined) {
        elms[${wt}] = {}
      }
    `),o&&c.push(`parent = ${o};`),c.push(`props[${wt}] = {}`),this.cleanupCode.push(`props[${wt}] = null`),i.forloop&&c.push(`if(${x} === undefined) {`),Object.keys(h).forEach(w=>{AC(w)?(this.effectsCode.push(`
        ${x}[Symbol.for('props')]['${w.substring(1)}'] = ${Ai(h[w],i.component)}`),c.push(`
        propData = ${Ai(h[w],i.component)}
        if (Array.isArray(propData) === true) {
          propData = getRaw(propData).slice(0)
        }
        props[${wt}]['${w.substring(1)}'] = propData`)):c.push(`props[${wt}]['${w}'] = ${wy(h[w],w,i.component)}`)}),c.push(`
    componentType = props[${wt}]['is'] || '${h[Symbol.for("componentType")]}'

    components[${wt}]
    if(typeof componentType === 'string') {
      components[${wt}] = context.components && context.components[componentType] || components[componentType]
      if(!components[${wt}]) {
        throw new Error('Component "${h[Symbol.for("componentType")]}" not found')
      }
    } else if(typeof componentType === 'function' && componentType[Symbol.for('isComponent')] === true) {
      components[${wt}] = componentType
    }

    ${x} = components[${wt}].call(null, {props: props[${wt}]}, ${o}, component)

    if (${x}[Symbol.for('slots')][0]) {
      parent = ${x}[Symbol.for('slots')][0]
      slotComponent = ${x}
      inSlot = true
    } else {
      parent = ${x}[Symbol.for('children')][0]
    }
  `),this.cleanupCode.push(`components[${wt}] = null`),i.forloop&&c.push("}"),f&&(i.forloop||c.push(`
        if(inSlot === true) {
          slotChildCounter = ${f.length}  + 1
        }
      `),wt++,yh.call(this,{children:f},!1,{...i})),i.forloop||c.push(`
      if (inSlot === true && slotChildCounter === 0) {
        inSlot = false
      }
    `)},IR=function(h,o){const i=h[":for"];delete h[":for"];const c=h.range||h[":range"]||"{}";delete h.range,delete h[":range"];const f=h.key,x=Ai(f,"scope."),w=!(h.$shallow&&h.$shallow.toLowerCase()==="false");delete h.$shallow,delete h.key;const a=/(.+)\s+in\s+(.+)/gi.exec(i),[r,C]=a[1].replace("(","").replace(")","").split(/\s*,\s*/),R=new RegExp(`(scope\\.(?!${r}\\.|${C}|key)(\\w+))`,"gi"),k={renderCode:[],effectsCode:[],cleanupCode:[],context:{props:[],components:this.components}};if(o&&k.renderCode.push(`parent = ${o}`),C!==void 0){const he=new RegExp(`\\$${C}(?!['\\w])`).exec(f);Array.isArray(he)&&k.renderCode.push(`console.warn(" Using '${C}' in the key, like key=${f},  is not recommended")`)}const I=wt;k.renderCode.push(`
    created[${I}] = []

    let from${I}
    let to${I}

    forloops[${I}] = (collection = [], elms, created) => {
      const rawCollection = getRaw(collection)
      const keys = new Set()
      let l = rawCollection.length

      const range = ${Ai(c)} || {}
      from${I} = range['from'] || 0
      to${I} = 'to' in range ? range['to'] : rawCollection.length

      while(l--) {
        const ${r} = rawCollection[l]
  `),k.cleanupCode.push(`
    created[${I}].length = 0
    forloops[${I}] = null
  `),C!==void 0&&k.renderCode.push(`
        const ${C} = l
    `),k.renderCode.push(`
        if(l < to${I} && l >= from${I}) {
          keys.add('' +  ${Ai(f,"")||"l"})
        }
      }
  `);const m=k.renderCode.length;k.renderCode.push(`
      created.length = 0
      const length = rawCollection.length
      const effects = []
      for(let __index = 0; __index < length; __index++) {
        if(__index < from${I} || __index >= to${I}) continue
        const scope = Object.create(component)
        parent = ${o}
        scope['${r}'] = rawCollection[__index]
  `),C!==""&&k.renderCode.push(`
        scope['${C}'] = __index
    `),k.renderCode.push(`
        scope['key'] = '' + ${x||"__index"}
  `),"ref"in h&&h.ref.indexOf("$")===-1&&(k.renderCode.push(`
        scope['__ref'] = '${h.ref}' + __index
    `),h.ref="$__ref"),k.renderCode.push(`
        created.push(scope.key)
  `),h[Symbol.for("componentType")]==="Element"||h[Symbol.for("componentType")]==="Slot"||h[Symbol.for("componentType")]==="Text"?(h[Symbol.for("componentType")]==="Text"&&(h.__textnode="true"),yh.call(k,h,o,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0})):bC.call(k,h,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});const S=k.effectsCode.filter(ue=>[...ue.matchAll(R)].length===0),E=k.effectsCode.filter(ue=>[...ue.matchAll(R)].length!==0);w===!1&&k.renderCode.push(`
      scope['${r}'] = null
      scope['${r}'] = collection[__index]
  `),S.forEach((ue,he)=>{const oe=ue.indexOf(`scope.${he}`)>-1?`'${Ai(a[2],"")}'`:null;ue.indexOf("Symbol.for('props')")===-1?k.renderCode.push(`
        let eff${he} = () => {
          ${ue}
        }
        effect(eff${he}, ${oe})
        effects.push(eff${he})
        component[Symbol.for('effects')].push(eff${he})
      `):k.renderCode.push(`
        ${ue}
      `)}),k.renderCode.push(`
    }
    return effects
  }`);const A=[];A.push(`
      let i = created.length

      while (i--) {
        if (keys.has(created[i]) === false) {
          const key = created[i]
  `);const N=wt;for(let ue=I;ue<=N;ue++)A.push(`
        elms[${ue}][key] && elms[${ue}][key].destroy()
        elms[${ue}][key] = null
        delete elms[${ue}][key]
    `);A.push(`
      }
    }
  `),k.renderCode.splice(m,0,...A);let K=`${Ai(a[2],"")}`;K&&K.includes(".")&&(K=K.match(/[^.]+$/)[0]);const Se=/\$([^,} ]+)/g,Me=[...c.matchAll(Se)].map(ue=>`'${ue[1]}'`);k.renderCode.push(`
    let eff${I} = () => {
      forloops[${I}](${wy(a[2],":for")}, elms, created[${I}])
    }

    component[Symbol.for('effects')].push(eff${I})

    effect(eff${I}, ['${K}', ${Me.join(",")}] )
  `),k.cleanupCode.push(`
    eff${I} = null
  `),E.forEach((ue,he)=>{const oe=[...ue.matchAll(R)];let pe=oe.length;const D=[];for(;pe--;){const ne=oe[pe],le=`component.${ne[2]}`;D.indexOf(le)===-1&&D.push(le),ne[2]!==r&&(ue=ue.substring(0,ne.index)+le+ue.substring(ne.index+ne[1].length))}k.renderCode.push(`
      let eff${I}_${he} = () => {
        void ${D.join(", ")}
        for(let __index = 0; __index < ${Ai(a[2])}.length; __index++) {
          if(__index < from${I} || __index >= to${I}) continue
          const scope = {}
          scope['${C}'] = __index
          scope['${r}'] = ${Ai(a[2])}[__index]
          scope['key'] = ${x||"__index"}
    `),k.cleanupCode.push(`eff${I}_${he} = null`),k.renderCode.push(`
          ${ue}
        }
      }
      component[Symbol.for('effects')].push(eff${I}_${he})
      effect(eff${I}_${he})
    `)}),this.renderCode.push(k.renderCode.join(`
`)),this.cleanupCode.push(k.cleanupCode.join(`
`))},kC=function(h,o=!1,i={}){h.children&&h.children.forEach(c=>{wt++,Object.keys(c).indexOf(":for")>-1?IR.call(this,c,o):c[Symbol.for("componentType")]==="Element"||c[Symbol.for("componentType")]==="Slot"||c[Symbol.for("componentType")]==="Text"||c[Symbol.for("componentType")]==="Layout"?(c[Symbol.for("componentType")]==="Text"&&(c.__textnode="true"),c[Symbol.for("componentType")]==="Layout"&&(c.__layout="true"),yh.call(this,c,o,i)):bC.call(this,c,o,i)})},Ai=(h,o="component.")=>{if(h===void 0)return h;const i=/('.*?')+/gi,c=/\$(\$(?=\$)|\$?)/g,f=h.matchAll(i),x=[];let w=0;for(const y of f)x.push(y[0]),h=h.replace(y[0],`[@@REPLACEMENT${w}@@]`),w++;return h=h.replace(c,(y,a)=>{if(a==="")return o;if(a==="$")return o+"$"}),x.forEach((y,a)=>{h=h.replace(`[@@REPLACEMENT${a}@@]`,y)}),h},wy=(h="",o=!1,i="component.")=>{const c=/\$\w+/gi;let f;if(o==="content")if(h.startsWith("$"))f=`${i}${h.replace("$","")}`;else{const x=h.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");f=`'${MR(x,i)}'`}else if(o!=="color"&&/[^0-9%\s.eE]/.test(h)===!1&&!isNaN(parseFloat(h))){if(f=parseFloat(h),h.endsWith("%")){const w={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[o];w&&(f=`parent.node.${w} * (${f} / 100)`)}}else if(h.toLowerCase()==="true")f=!0;else if(h.toLowerCase()==="false")f=!1;else if(o.startsWith("@")&&h){const x=i.slice(0,-1);f=`${x}['${h.replace("$","")}'] && ${x}['${h.replace("$","")}'].bind(${x})`}else if(h.startsWith("$"))f=`${i}${h.replace("$","")}`;else if(c.exec(h)){const x=/\w+\s*:\s*(?:[^\s,}]+|".*?"|'.*?')/g,w=h.match(x);if(f={},w)for(let y=0;y<w.length;y++){const a=w[y].split(/\s*:\s*/);a&&RR(a[0],a[1],i,f)}return _R(f)}else f=`"${h}"`;return f},AC=h=>h.startsWith(":"),MR=(h,o)=>{const i=/\{\{\s*(\$\S+)\s*\}\}/g,c=[...h.matchAll(i)];if(c.length)for(let[f,x]of c)h=h.replace(f,`${x.replace("$",`'+${o}`)}+'`);return h},RR=(h,o,i,c)=>{o.startsWith("$")?c[h]=`${i}${o.replace("$","")}`:c[h]=o},_R=h=>{const o=[];return Object.keys(h).forEach(i=>{o.push(`${i}: ${h[i]}`)}),` { ${o.join(", ")} }`},R3={};let LR=0;const DR=h=>`BlitsComponent::${h}_${R3[h]=(R3[h]||0)+1}`,PR=()=>++LR,Ao={},Qm=(h,o,i,c=[])=>{Ao[o]&&Ao[o][h]&&Ao[o][h].apply(i,c)},OR=(h,o,i)=>{const c=fe[h];Ao[o]&&Ao[o][c]&&Ao[o][c].apply(i)},NR=(h={},o)=>{Ao[o]={},[...Object.keys(h),...Object.getOwnPropertySymbols(h)].forEach(c=>{typeof h[c]=="function"&&(Ao[o][c]=h[c])})};let Hu=null,Bu=null,Lh=!1;const UR=()=>{Lh=!0},BR=()=>{Lh=!1},vh=new WeakMap,ih=new Map,_3=h=>{if(ih.size!==0)for(const[o,i]of ih){if(h.indexOf(o)===-1)continue;const c=vh.get(i);if(c!==void 0)for(const f of c.values())f.delete(o),ih.delete(o)}},rh=(h,o,i=!1)=>{if(Hu!==null){if(Lh)return;if(Array.isArray(Bu)===!0){if(Bu.includes(o)===!1)return}else if(Bu!==null&&o!==Bu)return;let c=vh.get(h);c===void 0&&(c=new Map,vh.set(h,c));let f=c.get(o);f===void 0&&(f=new Set,c.set(o,f)),f.add(Hu),i===!0&&ih.set(Hu,h)}},Gu=(h,o,i=!1)=>{if(Lh===!0)return;const c=vh.get(h);if(c===void 0)return;const f=c.get(o);if(f!==void 0)for(let x of f)x(i)},$d=(h,o=null)=>{Hu=h,Bu=o,Hu(),Hu=null,Bu=null},Jm=(h,o)=>{if(h===o)return!0;if(h.length!==o.length)return!1;let i=h.length;for(;i--;){const c=h[i],f=o[i];if(Array.isArray(c)&&Array.isArray(f)){if(Jm(c,f)===!1)return!1}else if(typeof c=="object"&&c!==null&&typeof f=="object"&&f!==null){if(Jm(Object.entries(c),Object.entries(f))===!1)return!1}else if(c!==f)return!1}return!0},oh=["push","pop","shift","unshift","splice","sort"],L3=new WeakMap,Co=h=>{const o=h&&h[fe.raw];return o?Co(o):h},Zm=(h,o=null,i,c)=>{if(typeof h=="object"&&Array.isArray(h)===!1&&Object.getPrototypeOf(h)!==Object.prototype)return h;const f=L3.get(h);if(f!==void 0)return f;const x={get(y,a,r){return a===fe.isProxy?!0:a===fe.raw?h:Array.isArray(y)===!0?typeof y[a]=="object"&&y[a]!==null?(Array.isArray(y[a])===!0&&rh(y,a,c),Zm(Co(y[a]),y,a)):oh.indexOf(a)!==-1?function(...C){UR();const R=y[a].apply(this,C);return BR(),Gu(o,i),R}:a==="length"?h.length:Reflect.get(y,a,r):typeof y[a]=="object"&&y[a]!==null?(Array.isArray(y[a])===!0&&rh(y,a,c),Zm(Co(y[a]),y,a)):(rh(y,a,c),Reflect.get(y,a,r))},set(y,a,r,C){const R=Co(y[a]),k=Co(r);let I=!0,m=!1;return Array.isArray(k)===!0&&Array.isArray(R)===!0?m=Jm(R,k):R===k&&(m=!0),m===!1&&(typeof r=="object"&&(Array.isArray(r)===!0?r=Co(r).slice(0):r!==null&&y[a]!==null&&y[a]!==void 0&&Array.isArray(y)===!1&&Object.getPrototypeOf(r)===Object.prototype&&(r=Object.assign(C[a],r))),I=Reflect.set(y,a,r,C)),I===!0&&m===!1&&(Array.isArray(y)===!0&&a in y&&Gu(o,i,!0),Gu(y,a,!0)),I}},w=new Proxy(h,x);return L3.set(h,w),w},EC=(h,o)=>(Object.keys(h).forEach(i=>{let c=h[i];if(h[i]!==null&&typeof h[i]=="object"){if(Object.getPrototypeOf(h[i])===Object.prototype)return EC(h[i]);if(Array.isArray(h[i])===!0)for(let f=0;f<oh.length-1;f++)h[i][oh[f]]=function(x){Array.prototype[oh[f]].call(this,x),Gu(h,i)}}Object.defineProperty(h,i,{enumerable:!0,configurable:!0,get(){return rh(h,i,o),c},set(f){c!==f&&(c=f,Gu(h,i))}})}),h),FR=typeof Proxy<"u",Vl=(h,o="Proxy",i=!1)=>(FR===!1&&(o="defineProperty"),o==="defineProperty"?EC(h,i):Zm(h,void 0,void 0,i)),jR=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],$R={previous:null,current:null,get state(){return this.current},set state(h){if(jR.indexOf(h)>-1&&h!==this.current||h==="refocus"){if(Mt.debug(`Setting lifecycle state from ${this.current} to ${h} for ${this.component.componentId}`),this.previous=this.current,this.current=h,h==="refocus")return;OR(h,this.component[fe.identifier],this.component),Qm(h,this.component[fe.identifier],this.component),h==="focus"&&(this.component[fe.state].hasFocus=!0),h==="unfocus"&&(this.component[fe.state].hasFocus=!1)}}},zR="modulepreload",VR=function(h){return"/"+h},D3={},IC=function(o,i,c){let f=Promise.resolve();if(i&&i.length>0){let w=function(r){return Promise.all(r.map(C=>Promise.resolve(C).then(R=>({status:"fulfilled",value:R}),R=>({status:"rejected",reason:R}))))};document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),a=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));f=w(i.map(r=>{if(r=VR(r),r in D3)return;D3[r]=!0;const C=r.endsWith(".css"),R=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${R}`))return;const k=document.createElement("link");if(k.rel=C?"stylesheet":zR,C||(k.as="script"),k.crossOrigin="",k.href=r,a&&k.setAttribute("nonce",a),document.head.appendChild(k),C)return new Promise((I,m)=>{k.addEventListener("load",I),k.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${r}`)))})}))}function x(w){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=w,window.dispatchEvent(y),!y.defaultPrevented)throw w}return f.then(w=>{for(const y of w||[])y.status==="rejected"&&x(y.reason);return o().catch(x)})},HR={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",VITE_TMDB_KEY:"ABC123"};function GR(h,o=!1,i){const c={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},f=h.getContext(o?"webgl2":"webgl",c)||h.getContext("experimental-webgl",c);if(!f)throw new Error("Unable to create WebGL context");return i?new Proxy(f,{get(x,w){const y=x[w];return typeof y=="function"?(i.increment(String(w)),y.bind(x)):y}}):f}function nt(h,o){if(Yu()!==!0&&!h)throw new Error(o||"Assertion failed")}function P3(h,o,i){const c=Math.trunc(h>>>24),f=Math.trunc(h>>>16&255),x=Math.trunc(h>>>8&255),w=Math.trunc(h&255),y=Math.trunc(o>>>24),a=Math.trunc(o>>>16&255),r=Math.trunc(o>>>8&255),C=Math.trunc(o&255),R=Math.round(y*i+c*(1-i)),k=Math.round(a*i+f*(1-i)),I=Math.round(r*i+x*(1-i)),m=Math.round(C*i+w*(1-i));return(R<<24|k<<16|I<<8|m)>>>0}function XR(h,o){const i=h>>>24,c=h>>>16&255,f=h>>>8&255,x=Math.trunc((h&255)*o);return(i<<24|c<<16|f<<8|x)>>>0}let MC=!0;function WR(h){MC=h==="webgl"}function zd(h,o,i=!1){const c=(h&255)/255*o,f=MC?c:1,x=Math.trunc((h>>>24)*f),w=Math.trunc((h>>>16&255)*f),y=Math.trunc((h>>>8&255)*f),a=Math.trunc(c*255);return i?(a<<24|y<<16|w<<8|x)>>>0:(x<<24|w<<16|y<<8|a)>>>0}function xh(h,o){return Object.prototype.hasOwnProperty.call(h,o)}function Yu(){return HR&&!0}let KR=1;function YR(){return KR++}class Kr{constructor(){F(this,"eventListeners",{})}on(o,i){let c=this.eventListeners[o];c||(c=[]),c.push(i),this.eventListeners[o]=c}off(o,i){const c=this.eventListeners[o];if(!c)return;if(!i){delete this.eventListeners[o];return}const f=c.indexOf(i);f>=0&&c.splice(f,1)}once(o,i){const c=(f,x)=>{this.off(o,c),i(f,x)};this.on(o,c)}emit(o,i){const c=this.eventListeners[o];c&&[...c].forEach(f=>{f(this,i)})}removeAllListeners(){this.eventListeners={}}}var sn;(function(h){h[h.generic=0]="generic",h[h.color=1]="color",h[h.image=2]="image",h[h.noise=3]="noise",h[h.renderToTexture=4]="renderToTexture",h[h.subTexture=5]="subTexture"})(sn||(sn={}));class Wr extends Kr{constructor(i){super();F(this,"txManager");F(this,"_dimensions",null);F(this,"_error",null);F(this,"state","initial");F(this,"renderableOwners",new Set);F(this,"renderable",!1);F(this,"type",sn.generic);F(this,"preventCleanup",!1);F(this,"ctxTexture");F(this,"textureData",null);this.txManager=i}get dimensions(){return this._dimensions}get error(){return this._error}setRenderableOwner(i,c){var x,w;const f=this.renderableOwners.size;if(c===!0){this.renderableOwners.has(i)===!1&&this.renderableOwners.add(i);const y=this.renderableOwners.size;y>f&&y===1&&(this.renderable=!0,(x=this.onChangeIsRenderable)==null||x.call(this,!0),this.load())}else{this.renderableOwners.delete(i);const y=this.renderableOwners.size;y<f&&y===0&&(this.renderable=!1,(w=this.onChangeIsRenderable)==null||w.call(this,!1),this.txManager.orphanTexture(this))}}load(){this.txManager.loadTexture(this)}loadCtxTexture(){return this.ctxTexture===void 0&&(this.ctxTexture=this.txManager.renderer.createCtxTexture(this)),this.ctxTexture}free(){var i;(i=this.ctxTexture)==null||i.free()}destroy(){this.state==="loaded"&&this.free(),this.freeTextureData()}freeTextureData(){this.textureData=null}setState(i,c){if(this.state===i)return;let f=null;i==="loaded"?(c!==void 0&&"width"in c&&"height"in c&&c.width!==void 0&&c.height!==void 0&&(this._dimensions=c),f=this._dimensions):i==="failed"&&(this._error=c,f=this._error),this.state=i,this.emit(i,f)}async getTextureData(){return this.textureData===null&&(this.textureData=await this.getTextureSource()),this.textureData}static makeCacheKey(i){return!1}static resolveDefaults(i){return{}}}F(Wr,"TRANSITIONAL_TEXTURE_STATES",["fetching","fetched","loading"]);const qR=/^(data|ftps?|https?):/,Wl=h=>{const o=h>>>24,i=h>>>16&255,c=h>>>8&255,f=h&255;return[o/255,i/255,c/255,f/255]},O3=h=>{const o=h>>>24,i=h>>>16&255,c=h>>>8&255,f=h&255;return[o,i,c,f]};function N3(h){return(h&255)/255}function _m(h){const o=Math.floor(h[0]*255),i=Math.floor(h[1]*255),c=Math.floor(h[2]*255),f=Math.floor(h[3]*255);return`rgba(${o},${i},${c},${f.toFixed(4)})`}function Fu(h,o,i,c,f){return f?(f.x1=h,f.y1=o,f.x2=i,f.y2=c,f):{x1:h,y1:o,x2:i,y2:c}}function Lm(h,o){return h.x1<o.x2&&h.x2>o.x1&&h.y1<o.y2&&h.y2>o.y1}function QR(h,o){return o?(o.x=h.x1,o.y=h.y1,o.width=h.x2-h.x1,o.height=h.y2-h.y1,o):{x:h.x1,y:h.y1,width:h.x2-h.x1,height:h.y2-h.y1}}function RC(h,o,i){const c=Math.max(h.x,o.x),f=Math.max(h.y,o.y),x=Math.min(h.x+h.width,o.x+o.width)-c,w=Math.min(h.y+h.height,o.y+o.height)-f;return x>0&&w>0?i?(i.x=c,i.y=f,i.width=x,i.height=w,i):{x:c,y:f,width:x,height:w}:i?(i.x=0,i.y=0,i.width=0,i.height=0,i):{x:0,y:0,width:0,height:0}}function _C(h,o){return o?(o.x=h.x,o.y=h.y,o.width=h.width,o.height=h.height,o):{x:h.x,y:h.y,width:h.width,height:h.height}}function JR(h,o){return h===o?!0:h===null||o===null?!1:h.x===o.x&&h.y===o.y&&h.width===o.width&&h.height===o.height}function Dm(h,o){return h.x1<=o.x2&&h.y1<=o.y2&&h.x2>=o.x1&&h.y2>=o.y1}function ZR(h,o){return h.x1<o.x1&&h.x2>o.x2&&h.y1<o.y1&&h.y2>o.y2}function e_(h,o,i){return!(h<i.x1||h>i.x2||o<i.y1||o>i.y2)}function t_(h){return h.x1<h.x2&&h.y1<h.y2}function ey(h,o){return Fu(h.x1-o[3],h.y1-o[0],h.x2+o[1],h.y2+o[2])}function n_(h){if(self.location.protocol==="file:"&&!qR.test(h)){const i=self.location.pathname.split("/");i.pop();const c=i.join("/"),f=self.location.protocol+"//"+c;return h.charAt(0)==="."&&(h=h.slice(1)),h.charAt(0)==="/"&&(h=h.slice(1)),f+"/"+h}return new URL(h,self.location.href).href}function Pm(h){return h.startsWith("data:")===!0}function i_(h){var a,r;h=h.replace(/^data:/,"");const o=((a=h.match(/image\/[^;]+/))==null?void 0:a[0])||"",i=h.replace(/^[^,]+,/,""),c=1024,f=atob(i),x=f.length,w=Math.ceil(x/c),y=new Array(w);for(let C=0;C<w;++C){const R=C*c,k=Math.min(R+c,x),I=new Array(k-R);for(let m=R,S=0;m<k;++S,++m)I[S]=(r=f[m])==null?void 0:r.charCodeAt(0);y[C]=new Uint8Array(I)}return new Blob(y,{type:o})}class Pn{constructor(){F(this,"ta");F(this,"tb");F(this,"tx");F(this,"tc");F(this,"td");F(this,"ty");F(this,"_floatArr",null);F(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return r_}static multiply(o,i,c){const f=o.ta*i.ta+o.tb*i.tc,x=o.ta*i.tb+o.tb*i.td,w=o.ta*i.tx+o.tb*i.ty+o.tx,y=o.tc*i.ta+o.td*i.tc,a=o.tc*i.tb+o.td*i.td,r=o.tc*i.tx+o.td*i.ty+o.ty;return c||(c=new Pn),c.ta=f,c.tb=x,c.tx=w,c.tc=y,c.td=a,c.ty=r,c.mutation=!0,c}static identity(o){return o||(o=new Pn),o.ta=1,o.tb=0,o.tx=0,o.tc=0,o.td=1,o.ty=0,o.mutation=!0,o}static translate(o,i,c){return c||(c=new Pn),c.ta=1,c.tb=0,c.tx=o,c.tc=0,c.td=1,c.ty=i,c.mutation=!0,c}static scale(o,i,c){return c||(c=new Pn),c.ta=o,c.tb=0,c.tx=0,c.tc=0,c.td=i,c.ty=0,c.mutation=!0,c}static rotate(o,i){const c=Math.cos(o),f=Math.sin(o);return i||(i=new Pn),i.ta=c,i.tb=-f,i.tx=0,i.tc=f,i.td=c,i.ty=0,i.mutation=!0,i}static copy(o,i){return i||(i=new Pn),i.ta=o.ta,i.tc=o.tc,i.tb=o.tb,i.td=o.td,i.tx=o.tx,i.ty=o.ty,i.mutation=!0,i}translate(o,i){return this.tx=this.ta*o+this.tb*i+this.tx,this.ty=this.tc*o+this.td*i+this.ty,this.mutation=!0,this}scale(o,i){return this.ta=this.ta*o,this.tb=this.tb*i,this.tc=this.tc*o,this.td=this.td*i,this.mutation=!0,this}rotate(o){if(o===0||!(o%Math.PI*2))return this;const i=Math.cos(o),c=Math.sin(o),f=this.ta*i+this.tb*c,x=this.tb*i-this.ta*c,w=this.tc*i+this.td*c,y=this.td*i-this.tc*c;return this.ta=f,this.tb=x,this.tc=w,this.td=y,this.mutation=!0,this}multiply(o){return Pn.multiply(this,o,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const r_=new Pn,Vd=0,Hd=2,Gd=4,Xd=6,Wd=1,Kd=3,Yd=5,qd=7;class ju{constructor(o){F(this,"data");this.data=new Float32Array(8),o&&(this.data[Vd]=o[Vd],this.data[Hd]=o[Hd],this.data[Gd]=o[Gd],this.data[Xd]=o[Xd],this.data[Wd]=o[Wd],this.data[Kd]=o[Kd],this.data[Yd]=o[Yd],this.data[qd]=o[qd])}static translate(o,i,c,f,x,w,y,a,r){return r||(r=new ju),r.data[Vd]=o,r.data[Hd]=c,r.data[Gd]=x,r.data[Xd]=y,r.data[Wd]=i,r.data[Kd]=f,r.data[Yd]=w,r.data[qd]=a,r}get x1(){return this.data[Vd]}get x2(){return this.data[Hd]}get x3(){return this.data[Gd]}get x4(){return this.data[Xd]}get y1(){return this.data[Wd]}get y2(){return this.data[Kd]}get y3(){return this.data[Yd]}get y4(){return this.data[qd]}}const LC=(h,o,i,c)=>{const f=3*h,x=3*(i-h)-f,w=1-f-x,y=3*o,a=3*(c-o)-y,r=1-y-a;return function(C){if(C>=1)return 1;if(C<=0)return 0;let R=.5,k,I,m;for(let A=0;A<20;A++){if(k=R*(R*(R*w+x)+f),m=C-k,m>-1e-8&&m<1e-8)return R*(R*(R*r+a)+y);if(I=R*(R*(3*w)+2*x)+f,I>1e-10&&I<1e-10)break;R+=m/I}let S=0,E=1;for(let A=0;A<20;A++){if(R=.5*(S+E),k=R*(R*(R*w+x)+f),m=C-k,m>-1e-8&&m<1e-8)return R*(R*(R*r+a)+y);m<0?E=R:S=R}}},sh={},o_={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},uh=h=>h,s_=h=>{const o=/-?\d*\.?\d+/g,i=h.match(o);if(i){const[c,f,x,w]=i,y=parseFloat(c||"0.42"),a=parseFloat(f||"0"),r=parseFloat(x||"1"),C=parseFloat(w||"1"),R=LC(y,a,r,C);return sh[h]=R,R}return console.warn("Unknown cubic-bezier timing: "+h),uh},u_=h=>{if(h==="linear")return uh;if(sh[h]!==void 0)return sh[h]||uh;if(h==="step-start")return()=>1;if(h==="step-end")return i=>i===1?1:0;const o=o_[h];if(o!==void 0){const[i,c,f,x]=o,w=LC(i,c,f,x);return sh[h]=w,w}return h.startsWith("cubic-bezier")?s_(h):(console.warn("Unknown timing function: "+h),uh)};function U3(h){return(h/1024/1024).toFixed(2)}class a_ extends Kr{constructor(i,c,f){super();F(this,"node");F(this,"props");F(this,"settings");F(this,"progress",0);F(this,"delayFor",0);F(this,"delay",0);F(this,"timingFunction");F(this,"propValuesMap",{});F(this,"dynPropValuesMap");this.node=i,this.props=c;for(const y in c)if(y!=="shaderProps")this.propValuesMap.props===void 0&&(this.propValuesMap.props={}),this.propValuesMap.props[y]={start:i[y]||0,target:c[y]};else if(i.shader.type!=="DynamicShader"){this.propValuesMap.shaderProps={};for(const a in c.shaderProps)this.propValuesMap.shaderProps[a]={start:i.shader.props[a],target:c.shaderProps[a]}}else{const a=Object.keys(c.shaderProps),r=a.length;this.dynPropValuesMap={};for(let C=0;C<r;C++){const R=a[C],k=c.shaderProps[R];this.dynPropValuesMap[R]={};const I=Object.entries(k),m=I.length;for(let S=0;S<m;S++){const[E,A]=I[S];this.dynPropValuesMap[R][E]={start:i.shader.props[R][E],target:A}}}}const x=f.easing||"linear",w=f.delay??0;this.settings={duration:f.duration??0,delay:w,easing:x,loop:f.loop??!1,repeat:f.repeat??0,repeatDelay:f.repeatDelay??0,stopMethod:f.stopMethod??!1},this.timingFunction=u_(x),this.delayFor=w,this.delay=w}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(i,c){const f=Object.entries(c),x=f.length;for(let w=0;w<x;w++){const[y,a]=f[w];i[y]=a.start}}restore(){if(this.reset(),this.propValuesMap.props!==void 0&&this.restoreValues(this.node,this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),c=i.length;if(c>0)for(let f=0;f<c;f++){const x=i[f];this.restoreValues(this.node.shader.props[x],this.dynPropValuesMap[x])}}}reverseValues(i){const c=Object.entries(i),f=c.length;for(let x=0;x<f;x++){const[w,y]=c[x];i[w]={start:y.target,target:y.start}}}reverse(){if(this.progress=0,this.propValuesMap.props!==void 0&&this.reverseValues(this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.reverseValues(this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),c=i.length;if(c>0)for(let f=0;f<c;f++){const x=i[f];this.reverseValues(this.dynPropValuesMap[x])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(i,c,f){return(this.timingFunction(i)||i)*(f-c)+c}updateValue(i,c,f,x){if(this.progress===1)return c;if(this.progress===0)return f;const w=c;if(i.indexOf("color")!==-1){if(f===w)return f;if(x){const y=this.timingFunction(this.progress)||this.progress;return P3(f,w,y)}return P3(f,w,this.progress)}return x?this.applyEasing(this.progress,f,w):f+(w-f)*this.progress}updateValues(i,c,f){const x=Object.entries(c),w=x.length;for(let y=0;y<w;y++){const[a,r]=x[y];i[a]=this.updateValue(a,r.target,r.start,f)}}update(i){const{duration:c,loop:f,easing:x,stopMethod:w}=this.settings,{delayFor:y}=this;if(this.node.destroyed){this.emit("destroyed",{});return}if(c===0&&y===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=i,this.delayFor>=0)return;i=-this.delayFor,this.delayFor=0}if(c===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=i/c,this.progress>1&&(this.progress=f?0:1,this.delayFor=this.delay,w)){this.emit("finished",{});return}if(this.propValuesMap.props!==void 0&&this.updateValues(this.node,this.propValuesMap.props,x),this.propValuesMap.shaderProps!==void 0&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,x),this.dynPropValuesMap!==void 0){const a=Object.keys(this.dynPropValuesMap),r=a.length;if(r>0)for(let C=0;C<r;C++){const R=a[C];this.updateValues(this.node.shader.props[R],this.dynPropValuesMap[R],x)}}this.progress<1&&this.emit("tick",{progress:this.progress}),this.progress===1&&this.emit("finished",{})}}class l_ extends Kr{constructor(i,c){super();F(this,"manager");F(this,"animation");F(this,"stoppedPromise");F(this,"stoppedResolve",null);F(this,"state");this.manager=i,this.animation=c,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this),this.onTick=this.onTick.bind(this),this.onDestroy=this.onDestroy.bind(this)}start(){return this.state!=="running"&&this.state!=="scheduled"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="scheduled"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.animation.on("tick",this.onTick),this.animation.on("destroyed",this.onDestroy),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating),this.animation.off("tick",this.onTick),this.animation.off("destroy",this.onDestroy)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(i=>{this.stoppedResolve=i}))}onDestroy(){this.unregisterAnimation(),this.state="stopped"}onFinished(){const{loop:i,stopMethod:c}=this.animation.settings;if(c==="reverse"){this.animation.once("finished",this.onFinished),this.animation.reverse();return}i||(this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.emit("stopped",this),this.state="stopped")}onAnimating(){this.state="running",this.emit("animating",this)}onTick(i,c){this.emit("tick",c)}}var jn;(function(h){h[h.Init=0]="Init",h[h.OutOfBounds=2]="OutOfBounds",h[h.InBounds=4]="InBounds",h[h.InViewport=8]="InViewport"})(jn||(jn={}));const Kl=new Map;Kl.set(jn.Init,"init");Kl.set(jn.OutOfBounds,"outOfBounds");Kl.set(jn.InBounds,"inBounds");Kl.set(jn.InViewport,"inViewport");var Ae;(function(h){h[h.Children=1]="Children",h[h.ScaleRotate=2]="ScaleRotate",h[h.Local=4]="Local",h[h.Global=8]="Global",h[h.Clipping=16]="Clipping",h[h.CalculatedZIndex=32]="CalculatedZIndex",h[h.ZIndexSortedChildren=64]="ZIndexSortedChildren",h[h.PremultipliedColors=128]="PremultipliedColors",h[h.WorldAlpha=256]="WorldAlpha",h[h.RenderState=512]="RenderState",h[h.IsRenderable=1024]="IsRenderable",h[h.RenderTexture=2048]="RenderTexture",h[h.ParentRenderTexture=4096]="ParentRenderTexture",h[h.RenderBounds=8192]="RenderBounds",h[h.None=0]="None",h[h.All=14335]="All"})(Ae||(Ae={}));class ty extends Kr{constructor(i,c){super();F(this,"stage");F(this,"children",[]);F(this,"_id",YR());F(this,"props");F(this,"updateType",Ae.All);F(this,"childUpdateType",Ae.None);F(this,"globalTransform");F(this,"scaleRotateTransform");F(this,"localTransform");F(this,"sceneGlobalTransform");F(this,"renderCoords");F(this,"sceneRenderCoords");F(this,"renderBound");F(this,"strictBound");F(this,"preloadBound");F(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});F(this,"isRenderable",!1);F(this,"renderState",jn.Init);F(this,"worldAlpha",1);F(this,"premultipliedColorTl",0);F(this,"premultipliedColorTr",0);F(this,"premultipliedColorBl",0);F(this,"premultipliedColorBr",0);F(this,"calcZIndex",0);F(this,"hasRTTupdates",!1);F(this,"parentHasRenderTexture",!1);F(this,"rttParent",null);F(this,"destroyed",!1);F(this,"onTextureLoaded",(i,c)=>{var f,x;this.autosizeNode(c),this.setUpdateType(Ae.IsRenderable),this.stage.requestRender(),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),c.width>1&&c.height>1&&this.emit("loaded",{type:"texture",dimensions:c}),((x=(f=this.props.textureOptions)==null?void 0:f.resizeMode)==null?void 0:x.type)==="contain"&&this.setUpdateType(Ae.Local)});F(this,"onTextureFailed",(i,c)=>{this.isRenderable=!1,this.setUpdateType(Ae.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("failed",{type:"texture",error:c})});F(this,"onTextureFreed",()=>{this.isRenderable=!1,this.setUpdateType(Ae.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("freed",{type:"texture"})});this.stage=i,this.props={...c,parent:null,texture:null,src:null,rtt:!1},this.parent=c.parent,this.texture=c.texture,this.src=c.src,this.rtt=c.rtt,this.interactive=c.interactive,c.boundsMargin&&(this.boundsMargin=Array.isArray(c.boundsMargin)?c.boundsMargin:[c.boundsMargin,c.boundsMargin,c.boundsMargin,c.boundsMargin]),this.setUpdateType(Ae.ScaleRotate|Ae.Local|Ae.RenderBounds|Ae.RenderState),Yu()===!1&&c.preventCleanup===!0&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.stage.defaultTexture&&this.stage.defaultTexture.state!=="loaded"&&this.stage.defaultTexture.once("loaded",()=>{this.setUpdateType(Ae.IsRenderable)})}loadTexture(){const{texture:i}=this.props;nt(i),queueMicrotask(()=>{var c;if(this.textureOptions.preload===!0&&this.stage.txManager.loadTexture(i),i.preventCleanup=((c=this.props.textureOptions)==null?void 0:c.preventCleanup)??!1,i.on("loaded",this.onTextureLoaded),i.on("failed",this.onTextureFailed),i.on("freed",this.onTextureFreed),this.parentHasRenderTexture){this.notifyParentRTTOfUpdate();return}i.state==="loaded"?(nt(i.dimensions),this.onTextureLoaded(i,i.dimensions)):i.state==="failed"?(nt(i.error),this.onTextureFailed(i,i.error)):i.state==="freed"&&this.onTextureFreed(i)})}unloadTexture(){this.texture!==null&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(i){this.autosize&&(this.width=i.width,this.height=i.height)}setUpdateType(i){this.updateType|=i;const c=this.props.parent;c&&(c.updateType&Ae.Children)===0&&c.setUpdateType(Ae.Children)}sortChildren(){this.children.sort((i,c)=>i.calcZIndex-c.calcZIndex)}updateScaleRotateTransform(){const{rotation:i,scaleX:c,scaleY:f}=this.props;if(i===0&&c===1&&f===1){this.scaleRotateTransform=void 0;return}this.scaleRotateTransform=Pn.rotate(i,this.scaleRotateTransform).scale(c,f)}updateLocalTransform(){var r,C;const{x:i,y:c,width:f,height:x}=this.props,w=this.props.mountX*f,y=this.props.mountY*x;if(this.scaleRotateTransform){const R=this.props.pivotX*f,k=this.props.pivotY*x;this.localTransform=Pn.translate(i-w+R,c-y+k,this.localTransform).multiply(this.scaleRotateTransform).translate(-R,-k)}else this.localTransform=Pn.translate(i-w,c-y,this.localTransform);const a=this.props.texture;if(a&&a.dimensions&&((C=(r=this.props.textureOptions)==null?void 0:r.resizeMode)==null?void 0:C.type)==="contain"){let R=1,k=1,I=0,m=0;const{width:S,height:E}=a.dimensions,A=S/E,N=f/x;if(A>N){const K=f/S,Se=E*K;m=(x-Se)/2,k=Se/x}else{const K=x/E,Se=S*K;I=(f-Se)/2,R=Se/f}this.localTransform.translate(I,m).scale(R,k)}this.setUpdateType(Ae.Global)}update(i,c){this.updateType&Ae.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(Ae.Local)),this.updateType&Ae.Local&&(this.updateLocalTransform(),this.setUpdateType(Ae.Global));const f=this.props.parent;let x=null;if(this.updateType&Ae.RenderTexture&&this.rtt&&(this.hasRTTupdates=!0),this.updateType&Ae.Global&&(nt(this.localTransform),this.parentHasRenderTexture===!0&&(f==null?void 0:f.rtt)===!0?(this.globalTransform=Pn.identity(),this.sceneGlobalTransform=Pn.copy((f==null?void 0:f.globalTransform)||Pn.identity()).multiply(this.localTransform)):this.parentHasRenderTexture===!0&&(f==null?void 0:f.rtt)===!1?(this.sceneGlobalTransform=Pn.copy((f==null?void 0:f.sceneGlobalTransform)||this.localTransform).multiply(this.localTransform),this.globalTransform=Pn.copy((f==null?void 0:f.globalTransform)||this.localTransform,this.globalTransform)):this.globalTransform=Pn.copy((f==null?void 0:f.globalTransform)||this.localTransform,this.globalTransform),f!==null&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(Ae.RenderState|Ae.Children),this.childUpdateType|=Ae.Global,this.clipping===!0&&(this.setUpdateType(Ae.Clipping|Ae.RenderBounds),this.childUpdateType|=Ae.RenderBounds)),this.updateType&Ae.RenderBounds&&(this.createRenderBounds(),this.setUpdateType(Ae.RenderState),this.setUpdateType(Ae.Children),this.childUpdateType|=Ae.RenderBounds),this.updateType&Ae.RenderState&&(x=this.checkRenderBounds(),this.setUpdateType(Ae.IsRenderable),x!==jn.OutOfBounds&&this.updateRenderState(x)),this.updateType&Ae.WorldAlpha&&(f?this.worldAlpha=f.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(Ae.Children|Ae.PremultipliedColors|Ae.IsRenderable),this.childUpdateType|=Ae.WorldAlpha),this.updateType&Ae.IsRenderable&&this.updateIsRenderable(),this.updateType&Ae.Clipping&&(this.calculateClippingRect(c),this.setUpdateType(Ae.Children),this.childUpdateType|=Ae.Clipping,this.childUpdateType|=Ae.RenderBounds),this.updateType&Ae.PremultipliedColors&&(this.premultipliedColorTl=zd(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=zd(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=zd(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=zd(this.props.colorBr,this.worldAlpha,!0))),f!==null&&this.updateType&Ae.CalculatedZIndex&&(this.calculateZIndex(),f.setUpdateType(Ae.ZIndexSortedChildren)),this.props.strictBounds===!0&&this.renderState===jn.OutOfBounds){this.updateType&=~Ae.RenderBounds;return}if(this.updateType&Ae.Children&&this.children.length>0)for(let w=0,y=this.children.length;w<y;w++){const a=this.children[w];if(a.setUpdateType(this.childUpdateType),a.updateType===0)continue;let r=this.clippingRect;this.rtt===!0&&(r={x:0,y:0,width:0,height:0,valid:!1}),a.update(i,r)}this.parentHasRenderTexture&&this.updateType>0&&this.notifyParentRTTOfUpdate(),this.updateType&Ae.ZIndexSortedChildren&&this.sortChildren(),x===jn.OutOfBounds&&(this.updateRenderState(x),this.updateIsRenderable(),this.rtt===!0&&x===jn.OutOfBounds&&this.notifyChildrenRTTOfUpdate(x)),this.updateType=0,this.childUpdateType=0}findParentRTTNode(){let i=this.parent;for(;i&&!i.rtt;)i=i.parent;return i}getRTTParentRenderState(){const i=this.rttParent||this.findParentRTTNode();return i?i.renderState:null}notifyChildrenRTTOfUpdate(i){for(const c of this.children)c.updateRenderState(i),c.updateIsRenderable(),c.notifyChildrenRTTOfUpdate(i)}notifyParentRTTOfUpdate(){if(this.parent===null)return;const i=this.rttParent||this.findParentRTTNode();i&&(i.hasRTTupdates=!0,i.setUpdateType(Ae.RenderTexture),i.parentHasRenderTexture===!0&&i.notifyParentRTTOfUpdate())}checkRenderBounds(){return nt(this.renderBound),nt(this.strictBound),nt(this.preloadBound),Dm(this.renderBound,this.strictBound)?jn.InViewport:Dm(this.renderBound,this.preloadBound)?jn.InBounds:ZR(this.renderBound,this.strictBound)?jn.InViewport:this.parent!==null&&(this.props.width===0||this.props.height===0)?this.parent.renderState:jn.OutOfBounds}updateBoundingRect(){const i=this.sceneGlobalTransform||this.globalTransform,c=this.sceneRenderCoords||this.renderCoords;nt(i),nt(c);const{tb:f,tc:x}=i,{x1:w,y1:y,x3:a,y3:r}=c;if(f===0||x===0)this.renderBound=Fu(w,y,a,r,this.renderBound);else{const{x2:C,x4:R,y2:k,y4:I}=c;this.renderBound=Fu(Math.min(w,C,a,R),Math.min(y,k,r,I),Math.max(w,C,a,R),Math.max(y,k,r,I),this.renderBound)}}createRenderBounds(){if(nt(this.stage),this.parent!==null&&this.parent.strictBound!==void 0){const C=this.parent.strictBound;this.strictBound=Fu(C.x1,C.y1,C.x2,C.y2),this.preloadBound=ey(this.strictBound,this.boundsMargin)}else this.strictBound=this.stage.strictBound,this.preloadBound=this.stage.preloadBound;if(this.props.clipping===!1||this.renderBound===void 0||Dm(this.renderBound,this.strictBound)===!1)return;const{x:i,y:c,width:f,height:x}=this.props,{tx:w,ty:y}=this.sceneGlobalTransform||this.globalTransform||{},a=w??i,r=y??c;this.strictBound=Fu(a,r,a+f,r+x,this.strictBound),this.preloadBound=ey(this.strictBound,this.boundsMargin)}updateRenderState(i){if(i===this.renderState)return;const c=this.renderState;this.renderState=i;const f=Kl.get(i);nt(f),this.emit(f,{previous:c,current:i})}updateIsRenderable(){let i=!1,c=!1;if(this.checkBasicRenderability()===!1){this.updateTextureOwnership(!1),this.setRenderable(!1);return}this.texture!==null?(c=!0,i=this.texture.state==="loaded"):(this.hasShader()||this.hasColorProperties()===!0)&&this.hasDimensions()===!0&&this.stage.defaultTexture&&this.stage.defaultTexture.state==="loaded"&&(i=!0),this.updateTextureOwnership(c),this.setRenderable(i)}checkBasicRenderability(){return!(this.worldAlpha===0||this.isOutOfBounds()===!0)}setRenderable(i){this.isRenderable=i}updateTextureOwnership(i){var c;(c=this.texture)==null||c.setRenderableOwner(this,i)}isOutOfBounds(){return this.renderState<=jn.OutOfBounds}hasDimensions(){return this.props.width!==0&&this.props.height!==0}hasColorProperties(){return this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0}hasShader(){return this.props.shader!==null}calculateRenderCoords(){const{width:i,height:c}=this,{tx:f,ty:x,ta:w,tb:y,tc:a,td:r}=this.globalTransform;if(y===0&&a===0){const E=f,A=f+i*w,N=x,K=x+c*r;this.renderCoords=ju.translate(E,N,A,N,A,K,E,K,this.renderCoords)}else this.renderCoords=ju.translate(f,x,f+i*w,x+i*a,f+i*w+c*y,x+i*a+c*r,f+c*y,x+c*r,this.renderCoords);if(this.sceneGlobalTransform===void 0)return;const{tx:C,ty:R,ta:k,tb:I,tc:m,td:S}=this.sceneGlobalTransform;if(I===0&&m===0){const E=C,A=C+i*k,N=R,K=R+c*S;this.sceneRenderCoords=ju.translate(E,N,A,N,A,K,E,K,this.sceneRenderCoords)}else this.sceneRenderCoords=ju.translate(C,R,C+i*k,R+i*m,C+i*k+c*I,R+i*m+c*S,C+c*I,R+c*S,this.sceneRenderCoords)}calculateClippingRect(i){nt(this.globalTransform);const{clippingRect:c,props:f,globalTransform:x}=this,{clipping:w}=f,y=x.tb!==0||x.tc!==0;w===!0&&y===!1?(c.x=x.tx,c.y=x.ty,c.width=this.width*x.ta,c.height=this.height*x.td,c.valid=!0):c.valid=!1,i.valid===!0&&c.valid===!0?RC(i,c,c):i.valid===!0&&(_C(i,c),c.valid=!0)}calculateZIndex(){var w,y;const i=this.props,c=i.zIndex||0,f=((w=i.parent)==null?void 0:w.zIndex)||0;let x=c;(y=i.parent)!=null&&y.zIndexLocked&&(x=c<f?c:f),this.calcZIndex=x}destroy(){var i;if(this.destroyed!==!0){for(this.destroyed=!0,this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,this.renderCoords=void 0,this.renderBound=void 0,this.strictBound=void 0,this.preloadBound=void 0,this.globalTransform=void 0,this.scaleRotateTransform=void 0,this.localTransform=void 0,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;this.children.length>0;)(i=this.children[0])==null||i.destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}}renderQuads(i){this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(nt(this.globalTransform),nt(this.renderCoords),i.addQuad({width:this.props.width,height:this.props.height,colorTl:this.premultipliedColorTl,colorTr:this.premultipliedColorTr,colorBl:this.premultipliedColorBl,colorBr:this.premultipliedColorBr,texture:this.texture||this.stage.defaultTexture,textureOptions:this.textureOptions,zIndex:this.zIndex,shader:this.shader.shader,shaderProps:this.shader.getResolvedProps(),alpha:this.worldAlpha,clippingRect:this.clippingRect,tx:this.globalTransform.tx,ty:this.globalTransform.ty,ta:this.globalTransform.ta,tb:this.globalTransform.tb,tc:this.globalTransform.tc,td:this.globalTransform.td,renderCoords:this.renderCoords,rtt:this.rtt,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions}))}get id(){return this._id}get data(){return this.props.data}set data(i){this.props.data=i}get x(){return this.props.x}set x(i){this.props.x!==i&&(this.props.x=i,this.setUpdateType(Ae.Local))}get absX(){var i,c,f;return this.props.x+-this.props.width*this.props.mountX+(((i=this.props.parent)==null?void 0:i.absX)||((f=(c=this.props.parent)==null?void 0:c.globalTransform)==null?void 0:f.tx)||0)}get absY(){var i;return this.props.y+-this.props.height*this.props.mountY+(((i=this.props.parent)==null?void 0:i.absY)??0)}get y(){return this.props.y}set y(i){this.props.y!==i&&(this.props.y=i,this.setUpdateType(Ae.Local))}get width(){return this.props.width}set width(i){this.props.width!==i&&(this.props.width=i,this.setUpdateType(Ae.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Ae.RenderTexture)))}get height(){return this.props.height}set height(i){this.props.height!==i&&(this.props.height=i,this.setUpdateType(Ae.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Ae.RenderTexture)))}get scale(){return this.scaleX}set scale(i){this.scaleX=i,this.scaleY=i}get scaleX(){return this.props.scaleX}set scaleX(i){this.props.scaleX!==i&&(this.props.scaleX=i,this.setUpdateType(Ae.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(i){this.props.scaleY!==i&&(this.props.scaleY=i,this.setUpdateType(Ae.ScaleRotate))}get mount(){return this.props.mount}set mount(i){(this.props.mountX!==i||this.props.mountY!==i)&&(this.props.mountX=i,this.props.mountY=i,this.props.mount=i,this.setUpdateType(Ae.Local))}get mountX(){return this.props.mountX}set mountX(i){this.props.mountX!==i&&(this.props.mountX=i,this.setUpdateType(Ae.Local))}get mountY(){return this.props.mountY}set mountY(i){this.props.mountY!==i&&(this.props.mountY=i,this.setUpdateType(Ae.Local))}get pivot(){return this.props.pivot}set pivot(i){(this.props.pivotX!==i||this.props.pivotY!==i)&&(this.props.pivotX=i,this.props.pivotY=i,this.props.pivot=i,this.setUpdateType(Ae.Local))}get pivotX(){return this.props.pivotX}set pivotX(i){this.props.pivotX!==i&&(this.props.pivotX=i,this.setUpdateType(Ae.Local))}get pivotY(){return this.props.pivotY}set pivotY(i){this.props.pivotY!==i&&(this.props.pivotY=i,this.setUpdateType(Ae.Local))}get rotation(){return this.props.rotation}set rotation(i){this.props.rotation!==i&&(this.props.rotation=i,this.setUpdateType(Ae.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(i){this.props.alpha=i,this.setUpdateType(Ae.PremultipliedColors|Ae.WorldAlpha|Ae.Children|Ae.IsRenderable),this.childUpdateType|=Ae.WorldAlpha}get autosize(){return this.props.autosize}set autosize(i){this.props.autosize=i}get boundsMargin(){var i;return this.props.boundsMargin??((i=this.parent)==null?void 0:i.boundsMargin)??this.stage.boundsMargin}set boundsMargin(i){if(i!==this.props.boundsMargin){if(i===null)this.props.boundsMargin=i;else{const c=Array.isArray(i)?i:[i,i,i,i];this.props.boundsMargin=c}this.setUpdateType(Ae.RenderBounds)}}get clipping(){return this.props.clipping}set clipping(i){this.props.clipping=i,this.setUpdateType(Ae.Clipping|Ae.RenderBounds|Ae.Children),this.childUpdateType|=Ae.Global|Ae.Clipping}get color(){return this.props.color}set color(i){this.colorTop=i,this.colorBottom=i,this.colorLeft=i,this.colorRight=i,this.props.color=i,this.setUpdateType(Ae.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(i){(this.props.colorTl!==i||this.props.colorTr!==i)&&(this.colorTl=i,this.colorTr=i),this.props.colorTop=i,this.setUpdateType(Ae.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(i){(this.props.colorBl!==i||this.props.colorBr!==i)&&(this.colorBl=i,this.colorBr=i),this.props.colorBottom=i,this.setUpdateType(Ae.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(i){(this.props.colorTl!==i||this.props.colorBl!==i)&&(this.colorTl=i,this.colorBl=i),this.props.colorLeft=i,this.setUpdateType(Ae.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(i){(this.props.colorTr!==i||this.props.colorBr!==i)&&(this.colorTr=i,this.colorBr=i),this.props.colorRight=i,this.setUpdateType(Ae.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(i){this.props.colorTl=i,this.setUpdateType(Ae.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(i){this.props.colorTr=i,this.setUpdateType(Ae.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(i){this.props.colorBl=i,this.setUpdateType(Ae.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(i){this.props.colorBr=i,this.setUpdateType(Ae.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(i){this.props.zIndexLocked=i,this.setUpdateType(Ae.CalculatedZIndex|Ae.Children);for(let c=0,f=this.children.length;c<f;c++)this.children[c].setUpdateType(Ae.CalculatedZIndex)}get zIndex(){return this.props.zIndex}set zIndex(i){this.props.zIndex=i,this.setUpdateType(Ae.CalculatedZIndex|Ae.Children);for(let c=0,f=this.children.length;c<f;c++)this.children[c].setUpdateType(Ae.CalculatedZIndex)}get parent(){return this.props.parent}set parent(i){const c=this.props.parent;if(c!==i){if(this.props.parent=i,c){const f=c.children.indexOf(this);nt(f!==-1,"CoreNode.parent: Node not found in old parent's children!"),c.children.splice(f,1),c.setUpdateType(Ae.Children|Ae.ZIndexSortedChildren)}i&&(i.children.push(this),this.setUpdateType(Ae.All),i.setUpdateType(Ae.Children|Ae.ZIndexSortedChildren),(i.rtt||i.parentHasRenderTexture)&&this.applyRTTInheritance(i)),this.updateScaleRotateTransform(),this.setUpdateType(Ae.RenderBounds|Ae.Children)}}get preventCleanup(){return this.props.textureOptions.preventCleanup||!1}set preventCleanup(i){Yu()===!1&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.props.textureOptions.preventCleanup=i}get rtt(){return this.props.rtt}set rtt(i){this.props.rtt!==i&&(this.props.rtt=i,i===!0?(this.initRenderTexture(),this.markChildrenWithRTT()):this.cleanupRenderTexture(),this.setUpdateType(Ae.RenderTexture),this.parentHasRenderTexture===!0&&this.notifyParentRTTOfUpdate())}initRenderTexture(){this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.stage.renderer.renderToTexture(this)}cleanupRenderTexture(){this.unloadTexture(),this.clearRTTInheritance(),this.hasRTTupdates=!1,this.texture=null}markChildrenWithRTT(i=null){const c=i||this;for(const f of c.children)f.setUpdateType(Ae.All),f.parentHasRenderTexture=!0,f.markChildrenWithRTT()}applyRTTInheritance(i){i.rtt&&i.setUpdateType(Ae.RenderTexture),this.markChildrenWithRTT(i)}clearRTTInheritance(){if(!this.rtt)for(const i of this.children)i.parentHasRenderTexture=!1,i.rttParent=null,i.setUpdateType(Ae.All),i.clearRTTInheritance()}get shader(){return this.props.shader}set shader(i){this.props.shader!==i&&(this.props.shader=i,this.setUpdateType(Ae.IsRenderable))}get src(){return this.props.src}set src(i){if(this.props.src!==i){if(this.props.src=i,!i){this.texture=null;return}this.texture=this.stage.txManager.createTexture("ImageTexture",{src:i,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight})}}set imageType(i){this.props.imageType!==i&&(this.props.imageType=i)}get imageType(){return this.props.imageType||null}get srcHeight(){return this.props.srcHeight}set srcHeight(i){this.props.srcHeight=i}get srcWidth(){return this.props.srcWidth}set srcWidth(i){this.props.srcWidth=i}get srcX(){return this.props.srcX}set srcX(i){this.props.srcX=i}get srcY(){return this.props.srcY}set srcY(i){this.props.srcY=i}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let i=this.parent;for(;i;){if(i.rtt)return i;i=i.parent}return null}get texture(){return this.props.texture}set texture(i){if(this.props.texture===i)return;const c=this.props.texture;c&&(c.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=i,i!==null&&(i.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(Ae.IsRenderable)}set textureOptions(i){this.props.textureOptions=i}get textureOptions(){return this.props.textureOptions}get strictBounds(){return this.props.strictBounds}set strictBounds(i){i!==this.props.strictBounds&&(this.props.strictBounds=i,this.setUpdateType(Ae.RenderBounds|Ae.Children),this.childUpdateType|=Ae.RenderBounds|Ae.Children)}set interactive(i){this.props.interactive=i,i===!0&&this.stage.interactiveNodes.add(this)}get interactive(){return this.props.interactive}animate(i,c){const f=new a_(this,i,c);return new l_(this.stage.animationManager,f)}flush(){}}const f_=h=>{let o=!1,i=0;const c=(f=0)=>{const x=h.targetFrameTime;if(x>0&&f-i<x){const w=x-(f-i);setTimeout(()=>requestAnimationFrame(c),w);return}if(i=f,h.updateFrameTime(),h.updateAnimations(),!h.hasSceneUpdates()){h.calculateFps(),x>0?setTimeout(()=>requestAnimationFrame(c),Math.max(x,16.666666666666668)):setTimeout(()=>requestAnimationFrame(c),16.666666666666668),o||(h.eventBus.emit("idle"),o=!0),h.txMemManager.checkCleanup()===!0&&h.txMemManager.cleanup(!1),h.flushFrameEvents();return}if(o=!1,h.drawFrame(),h.flushFrameEvents(),x>0){const w=Math.max(0,x-(performance.now()-f));setTimeout(()=>requestAnimationFrame(c),w)}else requestAnimationFrame(c)};requestAnimationFrame(c)},Xu=()=>performance?performance.now():Date.now();class c_{constructor(){F(this,"activeAnimations",new Set)}registerAnimation(o){this.activeAnimations.add(o)}unregisterAnimation(o){this.activeAnimations.delete(o)}update(o){this.activeAnimations.forEach(i=>{i.update(o)})}}function d_(){function h(i){return i.indexOf("image/png")!==-1}function o(i,c,f,x,w,y,a){return new Promise(function(r,C){var R=new XMLHttpRequest;R.open("GET",i,!0),R.responseType="blob",R.onload=function(){if(R.status!==200&&R.status!==0)return C(new Error("Failed to load image: "+R.statusText));var k=R.response;c!==void 0||h(k.type),createImageBitmap(k).then(function(I){r({data:I,premultiplyAlpha:c})}).catch(function(I){C(I)})},R.onerror=function(){C(new Error("Network error occurred while trying to fetch the image."))},R.send()})}self.onmessage=i=>{var c=i.data.src,f=i.data.id,x=i.data.premultiplyAlpha;i.data.sx,i.data.sy,i.data.sw,i.data.sh,o(c,x).then(function(w){self.postMessage({id:f,src:c,data:w},[w.data])}).catch(function(w){self.postMessage({id:f,src:c,error:w.message})})}}class h_{constructor(o,i){F(this,"imageWorkersEnabled",!0);F(this,"messageManager",{});F(this,"workers",[]);F(this,"workerIndex",0);F(this,"nextId",0);this.workers=this.createWorkers(o,i),this.workers.forEach(c=>{c.onmessage=this.handleMessage.bind(this)})}handleMessage(o){const{id:i,data:c,error:f}=o.data,x=this.messageManager[i];if(x){const[w,y]=x;delete this.messageManager[i],f?y(new Error(f)):w(c)}}createWorkers(o=1,i){let c=`(${d_.toString()})()`;i.options===!0&&(c=c.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")),i.full===!0&&(c=c.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;"),c=c.replace("var supportsFullCreateImageBitmap = false;","var supportsFullCreateImageBitmap = true;")),c=c.replace('"use strict";',"");const f=new Blob([c],{type:"application/javascript"}),x=(self.URL?URL:webkitURL).createObjectURL(f),w=[];for(let y=0;y<o;y++)w.push(new Worker(x));return w}getNextWorker(){const o=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,o}getImage(o,i,c,f,x,w){return new Promise((y,a)=>{try{if(this.workers){const r=this.nextId++;this.messageManager[r]=[y,a];const C=this.getNextWorker();C&&C.postMessage({id:r,src:o,premultiplyAlpha:i,sx:c,sy:f,sw:x,sh:w})}}catch(r){a(r)}})}}const Fl=class Fl extends Wr{constructor(i,c){super(i);F(this,"type",sn.color);F(this,"props");this.props=Fl.resolveDefaults(c||{})}get color(){return this.props.color}set color(i){this.props.color=i}async getTextureSource(){const i=new Uint8Array(4);return this.color===4294967295?(i[0]=255,i[1]=255,i[2]=255,i[3]=255):(i[0]=this.color>>16&255,i[1]=this.color>>8&255,i[2]=this.color&255,i[3]=this.color>>>24&255),this.setState("fetched",{width:1,height:1}),{data:i,premultiplyAlpha:!0}}static makeCacheKey(i){return`ColorTexture,${Fl.resolveDefaults(i).color}`}static resolveDefaults(i){return{color:i.color||4294967295}}};F(Fl,"z$__type__Props");let wh=Fl;function p_(h){return/\.(ktx|pvr)$/.test(h)}const B3=async h=>{const i=await(await fetch(h)).arrayBuffer();return h.indexOf(".ktx")!==-1?g_(i):m_(i)},g_=async h=>{const o=new DataView(h),i=o.getUint32(12)===16909060,c=[],f={glInternalFormat:o.getUint32(28,i),pixelWidth:o.getUint32(36,i),pixelHeight:o.getUint32(40,i),numberOfMipmapLevels:o.getUint32(56,i),bytesOfKeyValueData:o.getUint32(60,i)};let x=64;x+=f.bytesOfKeyValueData;for(let w=0;w<f.numberOfMipmapLevels;w++){const y=o.getUint32(x);x+=4,c.push(o.buffer.slice(x,y)),x+=y}return{data:{glInternalFormat:f.glInternalFormat,mipmaps:c,width:f.pixelWidth||0,height:f.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},m_=async h=>{const y=h,a=new Int32Array(y,0,13),r=a[12]+52,C=new Uint8Array(y,r),R=[],k={pixelWidth:a[7],pixelHeight:a[6],numberOfMipmapLevels:a[11]||0};let I=0,m=k.pixelWidth||0,S=k.pixelHeight||0;for(let E=0;E<k.numberOfMipmapLevels;E++){const A=(m+3>>2)*(S+3>>2)*8,N=new Uint8Array(y,C.byteOffset+I,A);R.push(N),I+=A,m=m>>1,S=S>>1}return{data:{glInternalFormat:36196,mipmaps:R,width:k.pixelWidth||0,height:k.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}};function y_(h){return/\.(svg)(\?.*)?$/.test(h)}const F3=(h,o,i,c,f,x,w)=>new Promise((y,a)=>{const r=document.createElement("canvas"),C=r.getContext("2d");nt(C),C.imageSmoothingEnabled=!0;const R=new Image;R.onload=()=>{const k=c??0,I=f??0,m=o||R.width,S=i||R.height;r.width=m,r.height=S,C.drawImage(R,0,0,m,S),y({data:C.getImageData(k,I,x??m,w??S),premultiplyAlpha:!1})},R.onerror=k=>{a(k)},R.src=h});function DC(h,o=""){return new Promise((i,c)=>{const f=new XMLHttpRequest;f.responseType=o,f.onreadystatechange=function(){f.readyState==XMLHttpRequest.DONE&&(f.status===0||f.status===200?i(f.response):c(f.statusText))},f.open("GET",h,!0),f.send(null)})}const jl=class jl extends Wr{constructor(i,c){super(i);F(this,"props");F(this,"type",sn.image);this.props=jl.resolveDefaults(c)}hasAlphaChannel(i){return i.indexOf("image/png")!==-1}async loadImageFallback(i,c){const f=new Image;return typeof i=="string"&&Pm(i)===!1&&(f.crossOrigin="anonymous"),new Promise(x=>{f.onload=()=>{x({data:f,premultiplyAlpha:c})},f.onerror=()=>{console.warn("Image loading failed, returning fallback object."),x({data:null,premultiplyAlpha:c})},i instanceof Blob?f.src=URL.createObjectURL(i):f.src=i})}async createImageBitmap(i,c,f,x,w,y){const a=c??i.type.includes("image/png"),r=this.txManager.imageBitmapSupported;return r.full===!0&&w!==null&&y!==null?{data:await createImageBitmap(i,f||0,x||0,w,y,{premultiplyAlpha:a?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:a}:r.basic===!0?{data:await createImageBitmap(i),premultiplyAlpha:a}:{data:await createImageBitmap(i,{premultiplyAlpha:a?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:a}}async loadImage(i){const{premultiplyAlpha:c,sx:f,sy:x,sw:w,sh:y}=this.props;if(this.txManager.hasCreateImageBitmap===!0){if(Pm(i)===!1&&this.txManager.hasWorker===!0&&this.txManager.imageWorkerManager!==null)return this.txManager.imageWorkerManager.getImage(i,c,f,x,w,y);let a;return Pm(i)===!0?a=i_(i):a=await DC(i,"blob").then(r=>r),this.createImageBitmap(a,c,f,x,w,y)}return this.loadImageFallback(i,c??!0)}async getTextureSource(){var x,w;let i;try{i=await this.determineImageTypeAndLoadImage()}catch(y){return this.setState("failed",y),{data:null}}if(i.data===null)return this.setState("failed",Error("ImageTexture: No image data")),{data:null};let c,f;return i.data instanceof Uint8Array?(c=this.props.width??0,f=this.props.height??0):(c=((x=i.data)==null?void 0:x.width)??(this.props.width||0),f=((w=i.data)==null?void 0:w.height)??(this.props.height||0)),this.setState("fetched",{width:c,height:f}),{data:i.data,premultiplyAlpha:this.props.premultiplyAlpha??!0}}determineImageTypeAndLoadImage(){const{src:i,premultiplyAlpha:c,type:f}=this.props;if(i===null)return{data:null};if(typeof i!="string"){if(i instanceof Blob)if(this.txManager.hasCreateImageBitmap===!0){const{sx:w,sy:y,sw:a,sh:r}=this.props;return this.createImageBitmap(i,c,w,y,a,r)}else return this.loadImageFallback(i,c??!0);return i instanceof ImageData?{data:i,premultiplyAlpha:c}:{data:i(),premultiplyAlpha:c}}const x=n_(i);return f==="regular"?this.loadImage(x):f==="svg"?F3(x,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):y_(i)===!0?F3(x,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):f==="compressed"||p_(i)===!0?B3(x):this.loadImage(x)}static makeCacheKey(i){const c=jl.resolveDefaults(i),f=c.key||c.src;if(typeof f!="string")return!1;let x="";return c.sh!==null&&c.sw!==null&&(x+=",",x+=c.sx??"",x+=c.sy??"",x+=c.sw||"",x+=c.sh||""),`ImageTexture,${f},${c.premultiplyAlpha??"true"}${x}`}static resolveDefaults(i){return{src:i.src??"",premultiplyAlpha:i.premultiplyAlpha??!0,key:i.key??null,type:i.type??null,width:i.width??null,height:i.height??null,sx:i.sx??null,sy:i.sy??null,sw:i.sw??null,sh:i.sh??null}}};F(jl,"z$__type__Props");let Hl=jl;const $l=class $l extends Wr{constructor(i,c){super(i);F(this,"props");F(this,"type",sn.noise);this.props=$l.resolveDefaults(c)}async getTextureSource(){const{width:i,height:c}=this.props,f=i*c*4,x=new Uint8ClampedArray(f);for(let w=0;w<f;w+=4){const y=Math.floor(Math.random()*256);x[w]=y,x[w+1]=y,x[w+2]=y,x[w+3]=255}return this.setState("fetched"),{data:new ImageData(x,i,c)}}static makeCacheKey(i){if(i.cacheId===void 0)return!1;const c=$l.resolveDefaults(i);return`NoiseTexture,${c.width},${c.height},${c.cacheId}`}static resolveDefaults(i){return{width:i.width??128,height:i.height??128,cacheId:i.cacheId??0}}};F($l,"z$__type__Props");let ny=$l;const Rh=class Rh extends Wr{constructor(i,c){super(i);F(this,"props");F(this,"parentTexture");F(this,"type",sn.subTexture);F(this,"onParentTxLoaded",()=>{this.forwardParentTxState("loaded",{width:this.props.width,height:this.props.height})});F(this,"onParentTxFailed",(i,c)=>{this.forwardParentTxState("failed",c)});F(this,"onParentTxFetched",()=>{this.forwardParentTxState("fetched",{width:this.props.width,height:this.props.height})});F(this,"onParentTxFetching",()=>{this.forwardParentTxState("fetching")});F(this,"onParentTxLoading",()=>{this.forwardParentTxState("loading")});F(this,"onParentTxFreed",()=>{this.forwardParentTxState("freed")});this.props=Rh.resolveDefaults(c||{}),nt(this.props.texture,"SubTexture requires a parent texture"),nt(this.props.texture instanceof Hl,"SubTexture requires an ImageTexture parent"),this.parentTexture=i.resolveParentTexture(this.props.texture),this.renderableOwners.size>0&&this.parentTexture.setRenderableOwner(this,!0),queueMicrotask(()=>{const f=this.parentTexture;f.state==="loaded"?this.onParentTxLoaded(f,f.dimensions):f.state==="fetching"?this.onParentTxFetching():f.state==="fetched"?this.onParentTxFetched():f.state==="loading"?this.onParentTxLoading():f.state==="failed"?this.onParentTxFailed(f,f.error):f.state==="freed"&&this.onParentTxFreed(),f.on("fetched",this.onParentTxFetched),f.on("loading",this.onParentTxLoading),f.on("fetching",this.onParentTxFetching),f.on("loaded",this.onParentTxLoaded),f.on("failed",this.onParentTxFailed),f.on("freed",this.onParentTxFreed)})}forwardParentTxState(i,c){this.setState(i,c)}onChangeIsRenderable(i){this.parentTexture.setRenderableOwner(this,i)}async getTextureSource(){return new Promise((i,c)=>{this.setState("fetched"),i({data:this.props})})}static makeCacheKey(i){return!1}static resolveDefaults(i){return{texture:i.texture,x:i.x||0,y:i.y||0,width:i.width||0,height:i.height||0}}};F(Rh,"z$__type__Props");let Gl=Rh;const _h=class _h extends Wr{constructor(i,c){super(i);F(this,"props");F(this,"type",sn.renderToTexture);this.props=_h.resolveDefaults(c||{})}get width(){return this.props.width}set width(i){this.props.width=i}get height(){return this.props.height}set height(i){this.props.height=i}async getTextureSource(){return this.setState("fetched"),{data:null,premultiplyAlpha:null}}static resolveDefaults(i){return{width:i.width||256,height:i.height||256}}};F(_h,"z$__type__Props");let Sh=_h;async function v_(){var f,x,w;const h=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,1,3,0,0,0,37,219,86,202,0,0,0,3,80,76,84,69,0,0,0,167,122,61,218,0,0,0,1,116,82,78,83,0,64,230,216,102,0,0,0,10,73,68,65,84,8,215,99,96,0,0,0,2,0,1,226,33,188,51,0,0,0,0,73,69,78,68,174,66,96,130]),o={basic:!1,options:!1,full:!1},i=new Blob([h],{type:"image/png"}),c=await createImageBitmap(i);(f=c.close)==null||f.call(c),o.basic=!0;try{const y={premultiplyAlpha:"none"},a=await createImageBitmap(i,y);(x=a.close)==null||x.call(a),o.options=!0}catch{}try{const y=await createImageBitmap(i,0,0,1,1,{premultiplyAlpha:"none"});(w=y.close)==null||w.call(y),o.full=!0}catch{}return o}class x_ extends Kr{constructor(i,c){super();F(this,"keyCache",new Map);F(this,"inverseKeyCache",new WeakMap);F(this,"txConstructors",{});F(this,"priorityQueue",[]);F(this,"uploadTextureQueue",[]);F(this,"initialized",!1);F(this,"stage");F(this,"numImageWorkers");F(this,"imageWorkerManager",null);F(this,"hasCreateImageBitmap",!!self.createImageBitmap);F(this,"imageBitmapSupported",{basic:!1,options:!1,full:!1});F(this,"hasWorker",!!self.Worker);F(this,"renderer");F(this,"frameTime",0);const{numImageWorkers:f,createImageBitmapSupport:x}=c;this.stage=i,this.numImageWorkers=f,x==="auto"?v_().then(w=>{this.initialize(w)}).catch(()=>{console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.initialized=!0,this.emit("initialized")}):this.initialize({basic:x==="basic",options:x==="options",full:x==="full"}),this.registerTextureType("ImageTexture",Hl),this.registerTextureType("ColorTexture",wh),this.registerTextureType("NoiseTexture",ny),this.registerTextureType("SubTexture",Gl),this.registerTextureType("RenderTexture",Sh)}registerTextureType(i,c){this.txConstructors[i]=c}initialize(i){this.hasCreateImageBitmap=i.basic||i.options||i.full,this.imageBitmapSupported=i,this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.hasCreateImageBitmap&&this.hasWorker&&this.numImageWorkers>0?this.imageWorkerManager=new h_(this.numImageWorkers,i):console.warn("[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower."),this.initialized=!0,this.emit("initialized")}enqueueUploadTexture(i){this.uploadTextureQueue.includes(i)===!1&&this.uploadTextureQueue.push(i)}createTexture(i,c){let f;const x=this.txConstructors[i];if(!x)throw new Error(`Texture type "${i}" is not registered`);const w=x.makeCacheKey(c);return w&&this.keyCache.has(w)?f=this.keyCache.get(w):(f=new x(this,c),w&&this.initTextureToCache(f,w)),f}orphanTexture(i){this.removeTextureFromQueue(i),i.type!==sn.subTexture&&this.stage.txMemManager.addToOrphanedTextures(i)}loadTexture(i,c){if(this.stage.txMemManager.removeFromOrphanedTextures(i),i.type!==sn.subTexture&&i.state!=="loaded"&&!Wr.TRANSITIONAL_TEXTURE_STATES.includes(i.state)){if(this.initialized===!1){this.priorityQueue.push(i);return}i.state==="failed"&&(i.free(),i.freeTextureData()),i.setState("loading"),i.getTextureData().then(()=>{if(i.state!=="fetched"){i.setState("failed");return}i.type!==sn.image?this.uploadTexture(i).catch(f=>{console.error("Failed to upload non-image texture:",f),i.setState("failed")}):c===!0?this.uploadTexture(i).catch(f=>{console.error("Failed to upload priority texture:",f),i.setState("failed")}):this.enqueueUploadTexture(i)}).catch(f=>{console.error(f),i.setState("failed")})}}async uploadTexture(i){if(this.stage.txMemManager.doNotExceedCriticalThreshold===!0&&this.stage.txMemManager.criticalCleanupRequested===!0){this.enqueueUploadTexture(i);return}const c=i.loadCtxTexture();if(c!==null&&c.state==="loaded"){i.setState("loaded");return}await c.load()}isProcessingTexture(i){return this.uploadTextureQueue.includes(i)===!0}async processSome(i){if(this.initialized===!1)return;const c=Xu();for(;this.priorityQueue.length>0&&Xu()-c<i;){const f=this.priorityQueue.pop();try{await f.getTextureData(),await this.uploadTexture(f)}catch(x){console.error("Failed to process priority texture:",x)}}for(;this.uploadTextureQueue.length>0&&Xu()-c<i;){const f=this.uploadTextureQueue.shift();try{await this.uploadTexture(f)}catch(x){console.error("Failed to upload texture:",x)}}}hasUpdates(){return this.uploadTextureQueue.length>0}initTextureToCache(i,c){const{keyCache:f,inverseKeyCache:x}=this;f.set(c,i),x.set(i,c)}getTextureFromCache(i){return this.keyCache.get(i)}removeTextureFromCache(i){const{inverseKeyCache:c,keyCache:f}=this,x=c.get(i);x&&f.delete(x)}removeTextureFromQueue(i){const c=this.uploadTextureQueue.indexOf(i);c!==-1&&this.uploadTextureQueue.splice(c,1)}resolveParentTexture(i){if(!(i!=null&&i.props))return i;const c=Hl.makeCacheKey(i.props);return(c?this.getTextureFromCache(c):void 0)??i}}const w_={normal:400,bold:700,bolder:900,lighter:100},j3=h=>typeof h=="number"?h:w_[h]||400;function S_(h,o,i,c,f){let x=j3(i);for(const w of h){const y=w[o];if(!y)continue;if(y.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${o}' - will be used for all weights and styles`),y.values().next().value;const a=new Map;for(const C of y){const R=j3(C.descriptors.weight);if(R===x&&C.descriptors.style===c&&C.descriptors.stretch===f)return C;a.set(R,C)}const r=`TrFontManager: No exact match: '${o} Weight: ${x} Style: ${c} Stretch: ${f}'`;if(console.error(r),x===400&&a.has(500))return a.get(500);if(x===500&&a.has(400))return a.get(400);if(x<400){for(;x>0;){if(a.has(x))return a.get(x);x-=100}x=600}for(;x<1e3;){if(a.has(x))return a.get(x);x+=100}for(x=500;x>0;){if(a.has(x))return a.get(x);x-=100}}}class T_{constructor(o){F(this,"textRenderers");F(this,"fontCache",new Map);this.textRenderers=o}addFontFace(o){for(const i in this.textRenderers){const c=this.textRenderers[i];c&&c.isFontFaceSupported(o)&&c.addFontFace(o)}}resolveFontFace(o,i,c){const{fontFamily:f,fontWeight:x,fontStyle:w,fontStretch:y}=i,a=`${c}_${f}_${w}_${x}_${y}`;if(this.fontCache.has(a)===!0)return this.fontCache.get(a);const r=S_(o,f,x,w,y);return r!==void 0&&this.fontCache.set(a,r),r}}class PC{static makeCacheKey(o){return!1}static resolveDefaults(o){return{}}}function $3(h,o,i){const c=h.createShader(o);if(!c){const x=h.getError();throw new Error(`Unable to create the shader: ${o===h.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER"}.${x?` WebGlContext Error: ${x}`:""}`)}if(h.shaderSource(c,i),h.compileShader(c),!!h.getShaderParameter(c,h.COMPILE_STATUS))return c;console.error(h.getShaderInfoLog(c)),h.deleteShader(c)}function C_(h,o,i){const c=h.createProgram();if(!c)throw new Error("Unable to create program");if(h.attachShader(c,o),h.attachShader(c,i),h.linkProgram(c),!!h.getProgramParameter(c,h.LINK_STATUS))return c;console.warn(h.getProgramInfoLog(c)),h.deleteProgram(c)}class hs extends PC{constructor(i){super();F(this,"boundBufferCollection",null);F(this,"buffersBound",!1);F(this,"program");F(this,"vao");F(this,"renderer");F(this,"glw");F(this,"attributeBuffers");F(this,"attributeLocations");F(this,"attributeNames");F(this,"uniformLocations");F(this,"uniformTypes");F(this,"supportsIndexedTextures");const c=this.renderer=i.renderer,f=this.glw=this.renderer.glw;this.supportsIndexedTextures=i.supportsIndexedTextures||!1;const x=f.isWebGl2(),w=x&&i.webgl2Extensions||!x&&i.webgl1Extensions||[],y=x?"2.0":"1.0";w.forEach(S=>{if(!f.getExtension(S))throw new Error(`Shader "${this.constructor.name}" requires extension "${S}" for WebGL ${y} but wasn't found`)});const a=i.shaderSources||this.constructor.shaderSources;if(a)x&&(a!=null&&a.webGl2)&&(a.fragment=a.webGl2.fragment,a.vertex=a.webGl2.vertex,delete a.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const r=c.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,C=a.vertex instanceof Function?a.vertex(r):a.vertex,R=a.fragment instanceof Function?a.fragment(r):a.fragment,k=$3(f,f.VERTEX_SHADER,C),I=$3(f,f.FRAGMENT_SHADER,R);if(!k||!I)throw new Error(`Unable to create the following shader(s): ${[!k&&"VERTEX_SHADER",!I&&"FRAGMENT_SHADER"].filter(Boolean).join(" and ")}`);const m=C_(f,k,I);if(!m)throw new Error("Unable to create program");this.program=m,this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...i.attributes].forEach(S=>{const E=f.getAttribLocation(this.program,S);if(E<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${S}"!`);const A=f.createBuffer();if(!A)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${S}"`);this.attributeLocations[S]=E,this.attributeBuffers[S]=A,this.attributeNames.push(S)}),this.uniformLocations={},this.uniformTypes={},i.uniforms.forEach(S=>{const E=f.getUniformLocation(this.program,S.name);if(this.uniformTypes[S.name]=S.uniform,!E){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${S.name}"`);return}this.uniformLocations[S.name]=E})}bindBufferAttribute(i,c,f){const{glw:x}=this;x.enableVertexAttribArray(i),x.vertexAttribPointer(c,i,f.size,f.type,f.normalized,f.stride,f.offset)}disableAttribute(i){this.glw.disableVertexAttribArray(i)}disableAttributes(){for(const i in this.attributeLocations)this.disableAttribute(this.attributeLocations[i]);this.boundBufferCollection=null}canBatchShaderProps(i,c){return!1}bindRenderOp(i,c){var y;this.bindBufferCollection(i.buffers),i.textures.length>0&&((y=i.textures[0])!=null&&y.ctxTexture)&&this.bindTextures(i.textures);const{glw:f,parentHasRenderTexture:x,renderToTexture:w}=i;if(!(w&&x)){if(x){const{width:a,height:r}=i.framebufferDimensions||{};f.uniform1f(this.getUniformLocation("u_pixelRatio"),1),f.uniform2f(this.getUniformLocation("u_resolution"),a??0,r??0)}else f.uniform1f(this.getUniformLocation("u_pixelRatio"),i.options.pixelRatio),f.uniform2f(this.getUniformLocation("u_resolution"),f.canvas.width,f.canvas.height);if(c){if(xh(c,"$dimensions")){let a=c.$dimensions;a||(a=i.dimensions),f.uniform2f(this.getUniformLocation("u_dimensions"),a.width,a.height)}if(xh(c,"$alpha")){let a=c.$alpha;a||(a=i.alpha),f.uniform1f(this.getUniformLocation("u_alpha"),a)}this.bindProps(c)}}}getUniformLocation(i){return this.uniformLocations[i]||null}bindBufferCollection(i){if(this.boundBufferCollection!==i){for(const c in this.attributeLocations){const f=i.getBuffer(c),x=i.getAttributeInfo(c);nt(f,`Buffer for "${c}" not found`),nt(x),this.bindBufferAttribute(this.attributeLocations[c],f,x)}this.boundBufferCollection=i}}bindProps(i){}bindTextures(i){}attach(){this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}F(hs,"shaderSources");class OC extends hs{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(o){const{glw:i}=this;i.activeTexture(0),i.bindTexture(o[0].ctxTexture)}}F(OC,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class NC extends hs{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});F(this,"supportsIndexedTextures",!0)}bindTextures(i){const{renderer:c,glw:f}=this;if(i.length>c.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${c.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);i.forEach((w,y)=>{f.activeTexture(y),f.bindTexture(w.ctxTexture)});const x=Array.from(Array(i.length).keys());this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"),x)}}F(NC,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:i=>`
      #define txUnits ${i}
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${i}], int idx, vec2 uv) {
        ${Array.from(Array(i).keys()).map(c=>`
          ${c!==0?"else ":""}if (idx == ${c}) {
            return texture2D(textures[${c}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class zn{constructor(o){F(this,"priority",1);F(this,"name","");F(this,"ref");F(this,"target");F(this,"passParameters","");F(this,"declaredUniforms","");F(this,"uniformInfo",{});const{ref:i,target:c,props:f={}}=o;this.ref=i,this.target=c;const x={},w=[];let y="";const a=this.constructor.uniforms||{};for(const r in a){const C=a[r],R=C.type,k=`${i}_${r}`;let I="";C.size&&(I=`[${C.size(f)}]`),w.push(k),y+=`uniform ${R} ${k}${I};`,x[r]={name:k,uniform:a[r].method}}this.passParameters=w.join(","),this.declaredUniforms=y,this.uniformInfo=x}static getEffectKey(o){return""}static getMethodParameters(o,i){const c=[];for(const f in o){const x=o[f];let w="";x.size&&(w=`[${x.size(i)}]`),c.push(`${x.type} ${f}${w}`)}return c.join(",")}static resolveDefaults(o){return{}}static makeEffectKey(o){return!1}}F(zn,"uniforms",{}),F(zn,"methods"),F(zn,"onShaderMask"),F(zn,"onColorize"),F(zn,"onEffectMask");const Om=new Map,b_=(h,o)=>{const i=JSON.stringify(h);if(Om.has(i))return Om.get(i);h=h??[];const c=[],f=h.length;let x=0;for(;x<f;x++){const{name:w,type:y,props:a}=h[x],r={name:w,type:y,props:{}},C=o[y],R=C.resolveDefaults(a),k=C.uniforms,I=Object.keys(k),m=I.length;let S=0;for(;S<m;S++){const E=I[S],A=k[E],N={value:R[E],programValue:void 0,method:A.method,updateOnBind:A.updateOnBind||!1,hasValidator:A.validator!==void 0,hasProgramValueUpdater:A.updateProgramValue!==void 0},K=N.hasValidator&&A.validator(R[E],R)||R[E];R[E]!==K&&(N.validatedValue=K),N.hasProgramValueUpdater&&A.updateProgramValue(N),N.programValue===void 0&&(N.programValue=N.value),r.props[E]=N}c.push(r)}return Om.set(i,c),c},Gr=class Gr extends hs{constructor(i,c,f){const x=Gr.createShader(c,f);super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...x.uniforms],shaderSources:{vertex:x.vertex,fragment:x.fragment}});F(this,"effects",[]);this.effects=x.effects}bindTextures(i){const{glw:c}=this;c.activeTexture(0),c.bindTexture(i[0].ctxTexture)}bindUniformMethods(i){const c=this.glw,f=i.effects,x=f.length;for(let w=0;w<x;w++){const y=this.effects[w].uniformInfo,a=f[w],r=Object.keys(a.props),C=r.length;for(let R=0;R<C;R++){const k=r[R],I=a.props[k].method,m=this.getUniformLocation(y[k].name);if(I==="uniform2fv"||I==="uniform2iv"||I==="uniform3iv"||I==="uniform4fv"||I==="uniform4iv"||I==="uniformMatrix2fv"||I==="uniformMatrix3fv"||I==="uniformMatrix4fv"||I==="uniform1f"||I==="uniform1fv"||I==="uniform1i"||I==="uniform1iv"){a.props[k].setUniformValue=function(){c[I](m,this.programValue)};continue}if(I==="uniform2f"||I==="uniform2i"){a.props[k].setUniformValue=function(){c[I](m,this.programValue[0],this.programValue[1])};continue}if(I==="uniform3f"||I==="uniform3i"){a.props[k].setUniformValue=function(){c[I](m,this.programValue[0],this.programValue[1],this.programValue[2])};continue}if(I==="uniform4f"||I==="uniform4i"){a.props[k].setUniformValue=function(){c[I](m,this.programValue[0],this.programValue[1],this.programValue[2],this.programValue[3])};continue}}}}bindProps(i){var w;const c=i.effects,f=c.length;let x=0;for(;x<f;x++){const y=c[x],a=Object.keys(y.props),r=a.length;let C=0;for(;C<r;C++){const R=a[C],k=y.props[R];if(k.updateOnBind===!0){const I=(w=this.renderer.shManager.getRegisteredEffects()[y.type])==null?void 0:w.uniforms[R];I==null||I.updateProgramValue(y.props[R],i)}k.setUniformValue()}}}canBatchShaderProps(i,c){if(i.$alpha!==c.$alpha||i.$dimensions.width!==c.$dimensions.width||i.$dimensions.height!==c.$dimensions.height||i.effects.length!==c.effects.length)return!1;const f=i.effects.length;let x=0;for(;x<f;x++){const w=i.effects[x],y=c.effects[x];if(w.type!==y.type)return!1;for(const a in w.props)if(y.props&&!y.props[a]||w.props[a].value!==y.props[a].value)return!1}return!0}static createShader(i,c){const f={},x={};let w="";const y=[],a=[],r=i.effects.map(m=>{const S=c[m.type],E=S.getEffectKey(m.props||{});f[E]=f[E]?++f[E]:1;const A=f[E];A===1&&a.push({key:E,type:m.type,props:m.props});const N=new S({ref:`${E}${A===1?"":A}`,target:E,props:m.props});return w+=N.declaredUniforms,y.push(...Object.values(N.uniformInfo)),N});let C="";a==null||a.forEach(m=>{const S=c[m.type],E=S.resolveDefaults(m.props??{}),A=[];for(const he in S.methods){let oe=he;const pe=S.methods[he];x[he]&&x[he]!==pe&&(oe=Gr.resolveMethodDuplicate(he,pe,x)),x[oe]=pe.replace("function",oe),A.push({m:he,cm:oe})}let N=S.onShaderMask instanceof Function?S.onShaderMask(E):S.onShaderMask,K=S.onColorize instanceof Function?S.onColorize(E):S.onColorize,Se=S.onEffectMask instanceof Function?S.onEffectMask(E):S.onEffectMask;A.forEach(he=>{const{m:oe,cm:pe}=he,D=new RegExp(`\\$${oe}`,"g");N&&(N=N.replace(D,pe)),K&&(K=K.replace(D,pe)),Se&&(Se=Se.replace(D,pe))});const Me=S.getMethodParameters(S.uniforms,E),ue=Me.length>0?`, ${Me}`:"";N&&(C+=`
        float fx_${m.key}_onShaderMask(float shaderMask ${ue}) {
          ${N}
        }
        `),K&&(C+=`
          vec4 fx_${m.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${ue}) {
            ${K}
          }
        `),Se&&(C+=`
          vec4 fx_${m.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${ue}) {
            ${Se}
          }
        `)});let R="";for(const m in x)R+=x[m];let k="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",I=`

    `;for(let m=0;m<r.length;m++){const S=r[m],E=S.passParameters.length>0?`, ${S.passParameters}`:"",A=c[S.name];A.onShaderMask&&(I+=`
        shaderMask = fx_${S.target}_onShaderMask(shaderMask ${E});
        `),A.onColorize&&(I+=`
        maskColor = fx_${S.target}_onColorize(shaderMask, maskColor, shaderColor${E});
        `),A.onEffectMask&&(k=`fx_${S.target}_onEffectMask(shaderMask, maskColor, shaderColor${E})`);const N=r[m+1];(N===void 0||c[N.name].onEffectMask)&&(I+=`
          shaderColor = ${k};
        `)}return{effects:r,uniforms:y,fragment:Gr.fragment(w,R,C,I),vertex:Gr.vertex()}}static resolveMethodDuplicate(i,c,f,x=0){const w=i+(x>0?x:"");return f[w]&&f[w]!==c?this.resolveMethodDuplicate(i,c,f,++x):w}static resolveDefaults(i,c){return nt(c),{effects:b_(i.effects??[],c),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(i,c){var x;let f="";return(x=i.effects)==null||x.forEach(w=>{const a=c[w.type].getEffectKey(w.props||{});f+=`,${a}`}),`DynamicShader${f}`}};F(Gr,"z$__type__Props"),F(Gr,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),F(Gr,"fragment",(i,c,f,x)=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${i}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${c}

    ${f}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${x}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let $u=Gr;class iy extends hs{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(o){return{radius:o.radius||10,$dimensions:{width:0,height:0}}}bindTextures(o){const{glw:i}=this;i.activeTexture(0),i.bindTexture(o[0].ctxTexture)}bindProps(o){const i=Math.min(o.$dimensions.width,o.$dimensions.height)/(2*o.radius);this.glw.uniform1f(this.getUniformLocation("u_radius"),o.radius*Math.min(i,1))}canBatchShaderProps(o,i){return o.radius===i.radius&&o.$dimensions.width===i.$dimensions.width&&o.$dimensions.height===i.$dimensions.height}}F(iy,"z$__type__Props"),F(iy,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const k_=new Float32Array([1,0,0,0,1,0,0,0,1]),zl=class zl extends hs{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(o){const{glw:i}=this;i.activeTexture(0),i.bindTexture(o[0].ctxTexture)}bindProps(o){const i=zl.resolveDefaults(o);for(const c in i)if(c==="transform")this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"),i[c]);else if(c==="scrollY")this.glw.uniform1f(this.getUniformLocation("u_scrollY"),i[c]);else if(c==="color"){const f=Wl(i.color);this.glw.uniform4fv(this.getUniformLocation("u_color"),f)}else c==="size"?this.glw.uniform1f(this.getUniformLocation("u_size"),i[c]):c==="distanceRange"?this.glw.uniform1f(this.getUniformLocation("u_distanceRange"),i[c]):c==="debug"&&this.glw.uniform1i(this.getUniformLocation("u_debug"),i[c]?1:0)}static resolveDefaults(o={}){return{transform:o.transform??k_,scrollY:o.scrollY??0,color:o.color??4294967295,size:o.size??16,distanceRange:o.distanceRange??1,debug:o.debug??!1}}};F(zl,"z$__type__Props"),F(zl,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let ry=zl;const qu=h=>{h.programValue===void 0&&(h.programValue=new Float32Array(4));const o=h.value,i=h.programValue;i[0]=(o>>>24)/255,i[1]=(o>>>16&255)/255,i[2]=(o>>>8&255)/255,i[3]=(o&255)/255},A_=h=>{const o=h.validatedValue||h.value;if(h.programValue instanceof Float32Array){const i=h.programValue;i[0]=o[0],i[1]=o[1]}else h.programValue=new Float32Array(o)},E_=h=>{const o=h.validatedValue||h.value;if(h.programValue instanceof Float32Array){const i=h.programValue;i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3]}else h.programValue=new Float32Array(o)},UC=h=>{const o=h.validatedValue||h.value;if(h.programValue instanceof Float32Array){const i=o.length,c=h.programValue;for(let f=0;f<i;f++)c[f]=o[f]}else h.programValue=new Float32Array(o)},Sy=h=>{const o=Array.isArray(h);if(o){if(o&&h.length===4)return h;if(o&&h.length===2)return[h[0],h[1],h[0],h[1]];if(o&&h.length===3)return[h[0],h[1],h[2],h[0]]}else return[h,h,h,h];return[h[0],h[0],h[0],h[0]]},BC=(h,o)=>{h.programValue===void 0&&(h.programValue=new Float32Array(4));const i=h.programValue,c=h.validatedValue||h.value;if(o===void 0&&h.$dimensions===void 0){i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3];return}let f=h.$dimensions;if(o!==void 0){const{$dimensions:k}=o;if(f!==void 0&&(f.width===k.width||f.height===k.height))return;f===void 0&&(f={width:k==null?void 0:k.width,height:k==null?void 0:k.height},h.$dimensions=f)}const{width:x,height:w}=f,[y,a,r,C]=c,R=Math.min(Math.min(Math.min(x/Math.max(x,y+a),x/Math.max(x,r+C)),Math.min(w/Math.max(w,y+r),w/Math.max(w,a+C))),1);i[0]=y*R,i[1]=a*R,i[2]=r*R,i[3]=C*R};class Iu extends zn{constructor(){super(...arguments);F(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(i){return{radius:i.radius??10}}}F(Iu,"z$__type__Props"),F(Iu,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Sy,updateProgramValue:BC}}),F(Iu,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),F(Iu,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),F(Iu,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class Rl extends zn{constructor(){super(...arguments);F(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}F(Rl,"z$__type__Props"),F(Rl,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:qu,method:"uniform4fv",type:"vec4"}}),F(Rl,"onEffectMask",`
  float intR = shaderMask + 1.0;
  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),F(Rl,"onColorize",`
    return color;
  `);const To=class To extends zn{constructor(){super(...arguments);F(this,"name","linearGradient")}static getEffectKey(i){return i.colors.value?`linearGradient${i.colors.value.length}`:`linearGradient${i.colors.length}`}static resolveDefaults(i){const c=i.colors??[4278190080,4294967295];let f=i.stops||[];if(f.length===0||f.length!==c.length){const x=c.length;let w=0;const y=f;for(;w<x;w++)f[w]?(y[w]=f[w],f[w-1]===void 0&&y[w-2]!==void 0&&(y[w-1]=y[w-2]+(f[w]-y[w-2])/2)):y[w]=w*(1/(c.length-1));f=y}return{colors:c,stops:f,angle:i.angle??0}}};F(To,"z$__type__Props"),F(To,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:i=>i.reduce((c,f)=>c.concat(Wl(f)),[]),updateProgramValue:UC,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),F(To,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),F(To,"ColorLoop",i=>{let c="";for(let f=2;f<i;f++)c+=`colorOut = mix(colorOut, colors[${f}], clamp((dist - stops[${f-1}]) / (stops[${f}] - stops[${f-1}]), 0.0, 1.0));`;return c}),F(To,"onColorize",i=>{const c=i.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${To.ColorLoop(c)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let oy=To;class sy extends zn{constructor(){super(...arguments);F(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(i){return{amount:i.amount??1}}}F(sy,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),F(sy,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class Mu extends zn{constructor(){super(...arguments);F(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}F(Mu,"z$__type__Props"),F(Mu,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:qu,method:"uniform4fv",type:"vec4"}}),F(Mu,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),F(Mu,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),F(Mu,"onColorize",`
    return color;
  `);class Ru extends zn{constructor(){super(...arguments);F(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}F(Ru,"z$__type__Props"),F(Ru,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:qu,method:"uniform4fv",type:"vec4"}}),F(Ru,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),F(Ru,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),F(Ru,"onColorize",`
    return color;
  `);class _u extends zn{constructor(){super(...arguments);F(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}F(_u,"z$__type__Props"),F(_u,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:qu,method:"uniform4fv",type:"vec4"}}),F(_u,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),F(_u,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),F(_u,"onColorize",`
    return color;
  `);class Lu extends zn{constructor(){super(...arguments);F(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}F(Lu,"z$__type__Props"),F(Lu,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:qu,method:"uniform4fv",type:"vec4"}}),F(Lu,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),F(Lu,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),F(Lu,"onColorize",`
    return color;
  `);class _l extends zn{constructor(){super(...arguments);F(this,"name","glitch")}static getEffectKey(i){return"glitch"}static resolveDefaults(i){return{amplitude:i.amplitude??.2,narrowness:i.narrowness??4,blockiness:i.blockiness??2,minimizer:i.minimizer??8,time:i.time??Date.now()}}}F(_l,"z$__type__Props"),F(_l,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:i=>{const c=i.value=(Date.now()-i.value)%1e3;i.programValue=c},type:"float"}}),F(_l,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),F(_l,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class ah extends zn{constructor(){super(...arguments);F(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(i){return{fade:i.fade??10}}}F(ah,"z$__type__Props"),F(ah,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:Sy,updateProgramValue:E_}}),F(ah,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const us=class us extends zn{constructor(){super(...arguments);F(this,"name","radialGradient")}static getEffectKey(i){return i.colors.value?`radialGradient${i.colors.value.length}`:`radialGradient${i.colors.length}`}static resolveDefaults(i){const c=i.colors??[4278190080,4294967295];let f=i.stops||[];if(f.length===0||f.length!==c.length){const x=c.length;let w=0;const y=f;for(;w<x;w++)f[w]?(y[w]=f[w],f[w-1]===void 0&&y[w-2]!==void 0&&(y[w-1]=y[w-2]+(f[w]-y[w-2])/2)):y[w]=w*(1/(c.length-1));f=y}return{colors:c,stops:f,width:i.width??0,height:i.height??i.width??0,pivot:i.pivot??[.5,.5]}}};F(us,"z$__type__Props"),F(us,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:A_,method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:i=>i.reduce((c,f)=>c.concat(Wl(f)),[]),updateProgramValue:UC,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),F(us,"ColorLoop",i=>{let c="";for(let f=2;f<i;f++)c+=`colorOut = mix(colorOut, colors[${f}], clamp((dist - stops[${f-1}]) / (stops[${f}] - stops[${f-1}]), 0.0, 1.0));`;return c}),F(us,"onColorize",i=>{const c=i.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${us.ColorLoop(c)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let uy=us;class Du extends zn{constructor(){super(...arguments);F(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(i){return{width:i.width??10,progress:i.progress??.5,offset:i.offset??0,range:i.range??Math.PI*2,rounded:i.rounded??!1,radius:i.radius??1,color:i.color??4294967295}}}F(Du,"z$__type__Props"),F(Du,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:i=>i?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:qu,method:"uniform4fv",type:"vec4"}}),F(Du,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),F(Du,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),F(Du,"onColorize",`
    return color;
  `);class Pu extends zn{constructor(){super(...arguments);F(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(i){return{x:i.x||0,y:i.y||0,width:i.width||50,height:i.height||50,radius:i.radius??0}}}F(Pu,"z$__type__Props"),F(Pu,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:Sy,updateProgramValue:BC}}),F(Pu,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),F(Pu,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),F(Pu,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const I_="RoundedRectangle";class Dh extends PC{constructor(i){super();F(this,"shType");this.shType=i}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class M_{constructor(o,i,c,f){F(this,"type");F(this,"shader");F(this,"resolvedProps");F(this,"props");this.type=o,this.shader=i,this.resolvedProps=c;const x=Object.keys(c),w=x.length,y={};for(let a=0;a<w;a++){const r=x[a];Object.defineProperty(y,r,{get:()=>this.resolvedProps[r],set:C=>{this.resolvedProps[r]=C,f.requestRender()}})}this.props=y}getResolvedProps(){return this.resolvedProps}}class R_{constructor(o,i,c){F(this,"shader");F(this,"resolvedProps");F(this,"props");F(this,"type");this.shader=o,this.type="DynamicShader",this.resolvedProps=i;const f=c.getRegisteredEffects(),x={},w=i.effects,y=w.length;for(let a=0;a<y;a++){const{name:r,props:C,type:R}=w[a];if(r===void 0)continue;const k={},I=Object.keys(C),m=I.length;for(let S=0;S<m;S++){const E=I[S];Object.defineProperty(k,E,{get:()=>this.resolvedProps.effects[a].props[E].value,set:A=>{var K,Se;const N=this.resolvedProps.effects[a].props[E];N.value=A,N.hasValidator&&(A=N.validatedValue=(K=f[R].uniforms[E])==null?void 0:K.validator(A,C)),N.hasProgramValueUpdater?(Se=f[R].uniforms[E])==null||Se.updateProgramValue(N):N.programValue=A,c.renderer.stage.requestRender()}})}Object.defineProperty(x,r,{get:()=>k})}this.props=x}getResolvedProps(){return this.resolvedProps}}class __{constructor(){F(this,"shCache",new Map);F(this,"shConstructors",{});F(this,"attachedShader",null);F(this,"effectConstructors",{});F(this,"renderer");this.registerShaderType("DefaultShader",OC),this.registerShaderType("DefaultShaderBatched",NC),this.registerShaderType("RoundedRectangle",iy),this.registerShaderType("DynamicShader",$u),this.registerShaderType("SdfShader",ry),this.registerEffectType("border",Rl),this.registerEffectType("borderBottom",_u),this.registerEffectType("borderLeft",Lu),this.registerEffectType("borderRight",Mu),this.registerEffectType("borderTop",Ru),this.registerEffectType("fadeOut",ah),this.registerEffectType("linearGradient",oy),this.registerEffectType("radialGradient",uy),this.registerEffectType("grayscale",sy),this.registerEffectType("glitch",_l),this.registerEffectType("radius",Iu),this.registerEffectType("radialProgress",Du),this.registerEffectType("holePunch",Pu)}registerShaderType(o,i){this.shConstructors[o]=i}registerEffectType(o,i){this.effectConstructors[o]=i}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(o,i){if(!this.renderer)throw new Error("Renderer is not been defined");const c=this.shConstructors[o];if(!c)throw new Error(`Shader type "${o}" is not registered`);if(this.renderer.mode==="canvas"&&c.prototype instanceof hs)return this._createShaderCtr(o,new Dh(o),i);if(o==="DynamicShader")return this.loadDynamicShader(i);const f=c.resolveDefaults(i),x=c.makeCacheKey(f)||c.name;if(x&&this.shCache.has(x))return this._createShaderCtr(o,this.shCache.get(x),f);const w=new c(this.renderer,i);return x&&this.shCache.set(x,w),this._createShaderCtr(o,w,f)}loadDynamicShader(o){if(!this.renderer)throw new Error("Renderer is not been defined");const i=$u.resolveDefaults(o,this.effectConstructors),c=$u.makeCacheKey(i,this.effectConstructors);if(c&&this.shCache.has(c))return this._createDynShaderCtr(this.shCache.get(c),i);const f=new $u(this.renderer,o,this.effectConstructors);return c&&this.shCache.set(c,f),this._createDynShaderCtr(f,i)}_createShaderCtr(o,i,c){return new M_(o,i,c,this.renderer.stage)}_createDynShaderCtr(o,i){return o.bindUniformMethods(i),new R_(o,i,this)}useShader(o){this.attachedShader!==o&&(this.attachedShader&&this.attachedShader.detach(),o.attach(),this.attachedShader=o)}}const L_={x:(h,o)=>{h.props.x=o},y:(h,o)=>{h.props.y=o},width:(h,o)=>{h.props.width=o},height:(h,o)=>{h.props.height=o},color:(h,o)=>{h.props.color=o},zIndex:(h,o)=>{h.props.zIndex=o},fontFamily:(h,o)=>{h.props.fontFamily=o},fontWeight:(h,o)=>{h.props.fontWeight=o},fontStyle:(h,o)=>{h.props.fontStyle=o},fontStretch:(h,o)=>{h.props.fontStretch=o},fontSize:(h,o)=>{h.props.fontSize=o},text:(h,o)=>{h.props.text=o},textAlign:(h,o)=>{h.props.textAlign=o},contain:(h,o)=>{h.props.contain=o},offsetY:(h,o)=>{h.props.offsetY=o},scrollable:(h,o)=>{h.props.scrollable=o},scrollY:(h,o)=>{h.props.scrollY=o},letterSpacing:(h,o)=>{h.props.letterSpacing=o},lineHeight:(h,o)=>{h.props.lineHeight=o},maxLines:(h,o)=>{h.props.maxLines=o},textBaseline:(h,o)=>{h.props.textBaseline=o},verticalAlign:(h,o)=>{h.props.verticalAlign=o},overflowSuffix:(h,o)=>{h.props.overflowSuffix=o},debug:(h,o)=>{h.props.debug=o}};class Ty{constructor(o){F(this,"stage");F(this,"set");this.stage=o;const i={...L_,...this.getPropertySetters()},c={};Object.keys(i).forEach(f=>{Object.defineProperty(c,f,{value:(x,w)=>{x.props[f]!==w&&(i[f](x,w),this.stage.requestRender())},writable:!1,configurable:!1})}),this.set=c}setStatus(o,i,c){o.status!==i&&(o.status=i,o.emitter.emit(i,c))}setIsRenderable(o,i){o.isRenderable=i}destroyState(o){this.setStatus(o,"destroyed"),o.emitter.removeAllListeners()}scheduleUpdateState(o){o.updateScheduled||(o.updateScheduled=!0,queueMicrotask(()=>{o.status!=="destroyed"&&(o.updateScheduled=!1,this.updateState(o))}))}}class D_{constructor(){F(this,"data",{})}reset(){this.data={}}increment(o){this.data[o]||(this.data[o]=0),this.data[o]++}getData(){return{...this.data}}}class P_{constructor(o,i){F(this,"stage");F(this,"memUsed",0);F(this,"loadedTextures",new Map);F(this,"orphanedTextures",[]);F(this,"criticalThreshold");F(this,"targetThreshold");F(this,"cleanupInterval");F(this,"debugLogging");F(this,"lastCleanupTime",0);F(this,"baselineMemoryAllocation");F(this,"criticalCleanupRequested",!1);F(this,"doNotExceedCriticalThreshold");F(this,"frameTime",0);this.stage=o;const{criticalThreshold:c,doNotExceedCriticalThreshold:f}=i;this.doNotExceedCriticalThreshold=f||!1,this.criticalThreshold=Math.round(c);const x=Math.max(0,Math.min(1,i.targetThresholdLevel));if(this.cleanupInterval=i.cleanupInterval,this.debugLogging=i.debugLogging,this.baselineMemoryAllocation=Math.round(i.baselineMemoryAllocation),this.targetThreshold=Math.max(Math.round(c*x),this.baselineMemoryAllocation),this.memUsed=Math.round(i.baselineMemoryAllocation),i.debugLogging){let w=0;setInterval(()=>{w!==this.memUsed&&(w=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${U3(this.memUsed)} mb / ${U3(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}c===0&&(this.setTextureMemUse=()=>{})}addToOrphanedTextures(o){this.orphanedTextures.includes(o)&&this.removeFromOrphanedTextures(o),o.preventCleanup===!1&&this.orphanedTextures.push(o)}removeFromOrphanedTextures(o){const i=this.orphanedTextures.indexOf(o);i!==-1&&this.orphanedTextures.splice(i,1)}setTextureMemUse(o,i){if(this.loadedTextures.has(o)&&(this.memUsed-=this.loadedTextures.get(o)),i===0){this.loadedTextures.delete(o);return}else this.memUsed+=i,this.loadedTextures.set(o,i);this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}checkCriticalCleanup(){return this.memUsed>this.criticalThreshold}cleanupQuick(o){const i=this.targetThreshold,c=Xu();for(;this.memUsed>=i&&this.orphanedTextures.length>0&&(o||Xu()-c<10);){const f=this.orphanedTextures.shift();f!==void 0&&f.renderable!==!0&&(Wr.TRANSITIONAL_TEXTURE_STATES.includes(f.state)||this.destroyTexture(f))}}destroyTexture(o){this.debugLogging===!0&&console.log(`[TextureMemoryManager] Destroying texture. State: ${o.state}`);const i=this.stage.txManager;i.removeTextureFromQueue(o),i.removeTextureFromCache(o),o.destroy(),this.removeFromOrphanedTextures(o),this.loadedTextures.delete(o)}cleanupDeep(o){const i=o?this.criticalThreshold:this.targetThreshold,c=[],f=[...this.loadedTextures.keys()];for(let x=0;x<f.length;x++){const w=f[x];w!==void 0&&(w.type===sn.image||w.type===sn.noise||w.type===sn.renderToTexture)&&(w.renderable===!0?c.push(w):c.unshift(w))}for(;this.memUsed>=i&&c.length>0;){const x=c.shift();if(x!==void 0&&x.preventCleanup!==!0){if(x.renderable===!0||Wr.TRANSITIONAL_TEXTURE_STATES.includes(x.state))break;this.destroyTexture(x)}}}cleanup(o=!1){const i=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,i===!0&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging===!0&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${i}. Aggressive: ${o}`),this.cleanupQuick(i),o===!0&&this.memUsed>=this.criticalThreshold&&this.cleanupDeep(i),this.memUsed>=this.criticalThreshold?(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),(this.debugLogging===!0||Yu()===!1)&&console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`)):this.criticalCleanupRequested=!1}getMemoryInfo(){let o=0;const i=[...this.loadedTextures.keys()].reduce((c,f)=>{o+=f.renderable?1:0;const x=this.loadedTextures.get(f)??0;return c+(f.renderable?x:0)},this.baselineMemoryAllocation);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:i,memUsed:this.memUsed,renderableTexturesLoaded:o,loadedTextures:this.loadedTextures.size,baselineMemoryAllocation:this.baselineMemoryAllocation}}}class FC{constructor(o,i){F(this,"textureSource");F(this,"memManager");F(this,"state","freed");this.memManager=o,this.textureSource=i}setTextureMemUse(o){this.memManager.setTextureMemUse(this.textureSource,o)}get renderable(){return this.textureSource.renderable}}class jC{constructor(o){F(this,"options");F(this,"mode");F(this,"stage");F(this,"txManager");F(this,"txMemManager");F(this,"shManager");F(this,"rttNodes",[]);this.options=o,this.stage=o.stage,this.txManager=o.txManager,this.txMemManager=o.txMemManager,this.shManager=o.shManager}}class O_ extends ty{constructor(i,c,f){super(i,c);F(this,"textRenderer");F(this,"trState");F(this,"_textRendererOverride",null);F(this,"onTextLoaded",()=>{const{contain:i}=this,c=this.trState.props.width,f=this.trState.props.height,x=this.trState.textW||0,w=this.trState.textH||0;i==="both"?(this.props.width=c,this.props.height=f):i==="width"?(this.props.width=c,this.props.height=w):i==="none"&&(this.props.width=x,this.props.height=w),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});F(this,"onTextFailed",(i,c)=>{this.emit("failed",{type:"text",error:c})});this._textRendererOverride=c.textRendererOverride,this.textRenderer=f;const x=this.createState({x:0,y:0,width:c.width,height:c.height,textAlign:c.textAlign,color:c.color,zIndex:c.zIndex,contain:c.contain,scrollable:c.scrollable,scrollY:c.scrollY,offsetY:c.offsetY,letterSpacing:c.letterSpacing,debug:c.debug,fontFamily:c.fontFamily,fontSize:c.fontSize,fontStretch:c.fontStretch,fontStyle:c.fontStyle,fontWeight:c.fontWeight,text:c.text,lineHeight:c.lineHeight,maxLines:c.maxLines,textBaseline:c.textBaseline,verticalAlign:c.verticalAlign,overflowSuffix:c.overflowSuffix});this.trState=x}get width(){return this.props.width}set width(i){this.props.width=i,this.textRenderer.set.width(this.trState,i),this.contain==="none"&&this.setUpdateType(Ae.Local)}get height(){return this.props.height}set height(i){this.props.height=i,this.textRenderer.set.height(this.trState,i),this.contain!=="both"&&this.setUpdateType(Ae.Local)}get color(){return this.trState.props.color}set color(i){this.textRenderer.set.color(this.trState,i)}get text(){return this.trState.props.text}set text(i){this.textRenderer.set.text(this.trState,i)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(i){this._textRendererOverride=i,this.textRenderer.destroyState(this.trState);const c=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);if(!c){console.warn("Text Renderer not found for font",this.trState.props.fontFamily);return}this.textRenderer=c,this.trState=this.createState(this.trState.props)}get fontSize(){return this.trState.props.fontSize}set fontSize(i){this.textRenderer.set.fontSize(this.trState,i)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(i){this.textRenderer.set.fontFamily(this.trState,i)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(i){this.textRenderer.set.fontStretch(this.trState,i)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(i){this.textRenderer.set.fontStyle(this.trState,i)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(i){this.textRenderer.set.fontWeight(this.trState,i)}get textAlign(){return this.trState.props.textAlign}set textAlign(i){this.textRenderer.set.textAlign(this.trState,i)}get contain(){return this.trState.props.contain}set contain(i){this.textRenderer.set.contain(this.trState,i)}get scrollable(){return this.trState.props.scrollable}set scrollable(i){this.textRenderer.set.scrollable(this.trState,i)}get scrollY(){return this.trState.props.scrollY}set scrollY(i){this.textRenderer.set.scrollY(this.trState,i)}get offsetY(){return this.trState.props.offsetY}set offsetY(i){this.textRenderer.set.offsetY(this.trState,i)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(i){this.textRenderer.set.letterSpacing(this.trState,i)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(i){this.textRenderer.set.lineHeight(this.trState,i)}get maxLines(){return this.trState.props.maxLines}set maxLines(i){this.textRenderer.set.maxLines(this.trState,i)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(i){this.textRenderer.set.textBaseline(this.trState,i)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(i){this.textRenderer.set.verticalAlign(this.trState,i)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(i){this.textRenderer.set.overflowSuffix(this.trState,i)}get debug(){return this.trState.props.debug}set debug(i){this.textRenderer.set.debug(this.trState,i)}update(i,c){super.update(i,c),nt(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkBasicRenderability(){return this.worldAlpha===0||this.isOutOfBounds()===!0?!1:!!(this.trState&&this.trState.props.text!=="")}setRenderable(i){super.setRenderable(i),this.textRenderer.setIsRenderable(this.trState,i)}renderQuads(i){var c;if(nt(this.globalTransform),!this.textRenderer.renderQuads){super.renderQuads(i);return}this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(this.parentHasRenderTexture&&((c=this.props.parent)!=null&&c.rtt)&&(this.globalTransform=Pn.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),nt(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}createState(i){const c=this.textRenderer.createState(i,this);return c.emitter.on("loaded",this.onTextLoaded),c.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(c),c}}function N_(h){const o={boolean:!0,string:!0,number:!0,undefined:!0},i=Object.keys(h);for(let c=0;c<i.length;c++){const f=i[c];if(!f)continue;const x=h[f],w=typeof x;w==="string"&&x.length>2048&&(console.warn(`Custom Data value for ${f} is too long, it will be truncated to 2048 characters`),h[f]=x.substring(0,2048)),o[w]||(console.warn(`Custom Data value for ${f} is not a boolean, string, or number, it will be ignored`),delete h[f])}return h}const U_=2e6;class B_{constructor(o){F(this,"options");F(this,"animationManager");F(this,"txManager");F(this,"txMemManager");F(this,"fontManager");F(this,"textRenderers");F(this,"shManager");F(this,"renderer");F(this,"root");F(this,"interactiveNodes",new Set);F(this,"boundsMargin");F(this,"defShaderCtr");F(this,"strictBound");F(this,"preloadBound");F(this,"strictBounds");F(this,"defaultTexture",null);F(this,"targetFrameTime",0);F(this,"eventBus");F(this,"deltaTime",0);F(this,"lastFrameTime",0);F(this,"currentFrameTime",0);F(this,"fpsNumFrames",0);F(this,"fpsElapsedTime",0);F(this,"numQuadsRendered",0);F(this,"renderRequested",!1);F(this,"frameEventQueue",[]);F(this,"fontResolveMap",{});F(this,"contextSpy",null);this.options=o;const{canvas:i,clearColor:c,appWidth:f,appHeight:x,boundsMargin:w,enableContextSpy:y,forceWebGL2:a,numImageWorkers:r,textureMemory:C,renderEngine:R,fontEngines:k,createImageBitmapSupport:I}=o;this.eventBus=o.eventBus,this.targetFrameTime=o.targetFPS>0?1e3/o.targetFPS:0,this.txManager=new x_(this,{numImageWorkers:r,createImageBitmapSupport:I}),this.txManager.on("initialized",()=>{this.requestRender()}),this.txMemManager=new P_(this,C),this.shManager=new __,this.animationManager=new c_,this.contextSpy=y?new D_:null,this.strictBounds=o.strictBounds;let m=[0,0,0,0];w&&(m=Array.isArray(w)?w:[w,w,w,w]),this.boundsMargin=m,this.strictBound=Fu(0,0,f,x),this.preloadBound=ey(this.strictBound,m);const S={stage:this,canvas:i,pixelRatio:o.devicePhysicalPixelRatio*o.deviceLogicalPixelRatio,clearColor:c??4278190080,bufferMemory:U_,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy,forceWebGL2:a};this.renderer=new R(S);const E=this.renderer.mode||"webgl";this.createDefaultTexture(),this.defShaderCtr=this.renderer.getDefShaderCtr(),WR(E),this.txManager.renderer=this.renderer,this.textRenderers={},k.forEach(N=>{const K=new N(this),Se=K.type;if(Se==="sdf"&&E==="canvas"){console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...");return}K instanceof Ty&&(Se==="canvas"?this.textRenderers.canvas=K:Se==="sdf"&&(this.textRenderers.sdf=K))}),Object.keys(this.textRenderers).length===0&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new T_(this.textRenderers);const A=new ty(this,{x:0,y:0,width:f,height:x,alpha:1,autosize:!1,boundsMargin:null,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1,strictBounds:this.strictBounds});this.root=A,f_(this)}setClearColor(o){this.renderer.updateClearColor(o),this.renderRequested=!0}updateTargetFrameTime(){this.targetFrameTime=this.options.targetFPS>0?1e3/this.options.targetFPS:0}updateFrameTime(){const o=Xu();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=o,this.deltaTime=this.lastFrameTime?o-this.lastFrameTime:100/6,this.txManager.frameTime=o,this.txMemManager.frameTime=o,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}createDefaultTexture(){console.log("Creating default texture"),this.defaultTexture=this.txManager.createTexture("ColorTexture",{color:4294967295}),nt(this.defaultTexture instanceof wh),this.txManager.loadTexture(this.defaultTexture,!0),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.requestRender()})}updateAnimations(){const{animationManager:o}=this;this.root&&o.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested||this.txManager.hasUpdates()}drawFrame(){const{renderer:o,renderRequested:i}=this;nt(o),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),this.txManager.processSome(this.options.textureProcessingTimeLimit).catch(c=>{console.error("Error processing textures:",c)}),o.reset(),this.txMemManager.criticalCleanupRequested===!0&&(this.txMemManager.cleanup(!1),this.txMemManager.criticalCleanupRequested===!0&&this.txMemManager.cleanup(!0)),o.rttNodes.length>0&&o.renderRTTNodes(),this.addQuads(this.root),o==null||o.render(),this.calculateFps(),this.calculateQuads(),i&&(this.renderRequested=!1)}queueFrameEvent(o,i){this.frameEventQueue.push([o,i])}flushFrameEvents(){for(const[o,i]of this.frameEventQueue)this.eventBus.emit(o,i);this.frameEventQueue=[]}calculateFps(){var i,c;const{fpsUpdateInterval:o}=this.options;if(o&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=o)){const f=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:f,contextSpyData:((i=this.contextSpy)==null?void 0:i.getData())??null}),(c=this.contextSpy)==null||c.reset()}}calculateQuads(){const o=this.renderer.getQuadCount();o&&o!==this.numQuadsRendered&&(this.numQuadsRendered=o,this.queueFrameEvent("quadsUpdate",{quads:o}))}addQuads(o){nt(this.renderer),o.isRenderable===!0&&o.renderQuads(this.renderer);for(let i=0;i<o.children.length;i++){const c=o.children[i];c!==void 0&&(c.worldAlpha===0||c.strictBounds===!0&&c.renderState===jn.OutOfBounds||this.addQuads(c))}}requestRender(){this.renderRequested=!0}findNodesAtPoint(o){const i=o.x/this.options.deviceLogicalPixelRatio,c=o.y/this.options.deviceLogicalPixelRatio,f=[];for(const x of this.interactiveNodes)x.isRenderable!==!1&&e_(i,c,x.renderBound)===!0&&f.push(x);return f}getNodeFromPosition(o){const i=this.findNodesAtPoint(o);if(i.length===0)return null;let c=i[0];for(let f=0;f<i.length;f++)i[f].zIndex>c.zIndex&&(c=i[f]);return c||null}resolveTextRenderer(o,i=null){const c=`${o.fontFamily}${o.fontStyle}${o.fontWeight}${o.fontStretch}${i||""}`;if(this.fontResolveMap[c]!==void 0)return this.fontResolveMap[c];let f=i,x=!1;if(f){const y=this.textRenderers[f];y?y.canRenderFont(o)||(console.warn(`Cannot use override text renderer '${f}' for font`,o),f=null,x=!0):(console.warn(`Text renderer override '${f}' not found.`),f=null,x=!0)}if(!f){for(const[y,a]of Object.entries(this.textRenderers))if(a.canRenderFont(o)){f=y;break}!f&&this.textRenderers.canvas!==void 0&&(f="canvas")}if(x&&console.warn(`Falling back to text renderer ${String(f)}`),!f)return null;const w=this.textRenderers[f];return nt(w,"resolvedTextRenderer undefined"),this.fontResolveMap[c]=w,w}createShaderCtr(o,i){return this.shManager.loadShader(o,i)}createNode(o){const i=this.resolveNodeDefaults(o);return new ty(this,i)}createTextNode(o){const i=o.fontSize??16,c={...this.resolveNodeDefaults(o),text:o.text??"",textRendererOverride:o.textRendererOverride??null,fontSize:i,fontFamily:o.fontFamily??"sans-serif",fontStyle:o.fontStyle??"normal",fontWeight:o.fontWeight??"normal",fontStretch:o.fontStretch??"normal",textAlign:o.textAlign??"left",contain:o.contain??"none",scrollable:o.scrollable??!1,scrollY:o.scrollY??0,offsetY:o.offsetY??0,letterSpacing:o.letterSpacing??0,lineHeight:o.lineHeight,maxLines:o.maxLines??0,textBaseline:o.textBaseline??"alphabetic",verticalAlign:o.verticalAlign??"middle",overflowSuffix:o.overflowSuffix??"...",debug:o.debug??{},shaderProps:null},f=this.resolveTextRenderer(c,o.textRendererOverride);if(!f)throw new Error(`No compatible text renderer found for ${c.fontFamily}`);return new O_(this,c,f)}setBoundsMargin(o){this.boundsMargin=Array.isArray(o)?o:[o,o,o,o],this.root.setUpdateType(Ae.RenderBounds)}resolveNodeDefaults(o){const i=o.color??4294967295,c=o.colorTl??o.colorTop??o.colorLeft??i,f=o.colorTr??o.colorTop??o.colorRight??i,x=o.colorBl??o.colorBottom??o.colorLeft??i,w=o.colorBr??o.colorBottom??o.colorRight??i;let y={};return this.options.inspector===!0&&(y=N_(o.data??{})),{x:o.x??0,y:o.y??0,width:o.width??0,height:o.height??0,alpha:o.alpha??1,autosize:o.autosize??!1,boundsMargin:o.boundsMargin??null,clipping:o.clipping??!1,color:i,colorTop:o.colorTop??i,colorBottom:o.colorBottom??i,colorLeft:o.colorLeft??i,colorRight:o.colorRight??i,colorBl:x,colorBr:w,colorTl:c,colorTr:f,zIndex:o.zIndex??0,zIndexLocked:o.zIndexLocked??0,parent:o.parent??null,texture:o.texture??null,textureOptions:o.textureOptions??{},shader:o.shader??this.defShaderCtr,src:o.src??null,srcHeight:o.srcHeight,srcWidth:o.srcWidth,srcX:o.srcX,srcY:o.srcY,scale:o.scale??null,scaleX:o.scaleX??o.scale??1,scaleY:o.scaleY??o.scale??1,mount:o.mount??0,mountX:o.mountX??o.mount??0,mountY:o.mountY??o.mount??0,pivot:o.pivot??.5,pivotX:o.pivotX??o.pivot??.5,pivotY:o.pivotY??o.pivot??.5,rotation:o.rotation??0,rtt:o.rtt??!1,data:y,preventCleanup:o.preventCleanup??!1,imageType:o.imageType,interactive:o.interactive??!1,strictBounds:o.strictBounds??this.strictBounds}}cleanup(o){this.txMemManager.cleanup(o)}}class F_ extends Kr{constructor(i,c){var S,E,A,N,K,Se;super();F(this,"root");F(this,"canvas");F(this,"settings");F(this,"stage");F(this,"inspector",null);const f={criticalThreshold:((S=i.textureMemory)==null?void 0:S.criticalThreshold)||124e6,targetThresholdLevel:((E=i.textureMemory)==null?void 0:E.targetThresholdLevel)||.5,cleanupInterval:((A=i.textureMemory)==null?void 0:A.cleanupInterval)||5e3,debugLogging:((N=i.textureMemory)==null?void 0:N.debugLogging)||!1,baselineMemoryAllocation:((K=i.textureMemory)==null?void 0:K.baselineMemoryAllocation)||26e6,doNotExceedCriticalThreshold:((Se=i.textureMemory)==null?void 0:Se.doNotExceedCriticalThreshold)||!1},x={appWidth:i.appWidth||1920,appHeight:i.appHeight||1080,textureMemory:f,boundsMargin:i.boundsMargin||0,deviceLogicalPixelRatio:i.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:i.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:i.clearColor??0,fpsUpdateInterval:i.fpsUpdateInterval||0,targetFPS:i.targetFPS||0,numImageWorkers:i.numImageWorkers!==void 0?i.numImageWorkers:2,enableContextSpy:i.enableContextSpy??!1,forceWebGL2:i.forceWebGL2??!1,inspector:i.inspector??!1,renderEngine:i.renderEngine,quadBufferSize:i.quadBufferSize??4*1024*1024,fontEngines:i.fontEngines,strictBounds:i.strictBounds??!0,textureProcessingTimeLimit:i.textureProcessingTimeLimit||42,canvas:i.canvas||document.createElement("canvas"),createImageBitmapSupport:i.createImageBitmapSupport||"full"};this.settings=x;const{appWidth:w,appHeight:y,deviceLogicalPixelRatio:a,devicePhysicalPixelRatio:r,inspector:C,canvas:R}=x,k=w*a,I=y*a;this.canvas=R,R.width=k*r,R.height=I*r,R.style.width=`${k}px`,R.style.height=`${I}px`,this.stage=new B_({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,forceWebGL2:this.settings.forceWebGL2,fpsUpdateInterval:this.settings.fpsUpdateInterval,targetFPS:this.settings.targetFPS,numImageWorkers:this.settings.numImageWorkers,renderEngine:this.settings.renderEngine,textureMemory:f,eventBus:this,quadBufferSize:this.settings.quadBufferSize,fontEngines:this.settings.fontEngines,inspector:this.settings.inspector!==null,strictBounds:this.settings.strictBounds,textureProcessingTimeLimit:this.settings.textureProcessingTimeLimit,createImageBitmapSupport:this.settings.createImageBitmapSupport}),this.root=this.stage.root;let m;if(typeof c=="string"?m=document.getElementById(c):m=c,!m)throw new Error("Could not find target element");m.appendChild(R),C&&!Yu()&&(this.inspector=new C(R,x))}createNode(i){const c=this.stage.createNode(i);return this.inspector?this.inspector.createNode(c):c}createTextNode(i){const c=this.stage.createTextNode(i);return this.inspector?this.inspector.createTextNode(c):c}destroyNode(i){return this.inspector&&this.inspector.destroyNode(i.id),i.destroy()}createTexture(i,c){return this.stage.txManager.createTexture(i,c)}createShader(i,c){return this.stage.shManager.loadShader(i,c)}createDynamicShader(i){return this.stage.shManager.loadDynamicShader({effects:i})}createEffect(i,c,f){return{name:f,type:i,props:c}}getNodeById(i){var x;const c=(x=this.stage)==null?void 0:x.root;if(!c)return null;const f=w=>{if(w.id===i)return w;for(const y of w.children){const a=f(y);if(a)return a}return null};return f(c)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){this.stage.requestRender()}cleanup(i=!1){this.stage.cleanup(i)}setClearColor(i){this.stage.setClearColor(i)}get targetFPS(){return this.stage.options.targetFPS}set targetFPS(i){this.stage.options.targetFPS=i>0?i:0,this.stage.updateTargetFrameTime()}}class $C extends Kr{constructor(i){super();F(this,"fontFamily");F(this,"descriptors");F(this,"loaded",!1);F(this,"metrics",null);const{fontFamily:c,descriptors:f,metrics:x}=i;x&&(this.metrics={ascender:x.ascender/x.unitsPerEm,descender:x.descender/x.unitsPerEm,lineGap:x.lineGap/x.unitsPerEm}),this.fontFamily=c,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...f}}static convertToCssFontFaceDescriptors(i){return{style:i.style,weight:typeof i.weight=="number"?`${i.weight}`:i.weight,stretch:i.stretch,unicodeRange:i.unicodeRange,featureSettings:i.featureSettings,display:i.display}}}class lh extends $C{constructor(i){super(i);F(this,"fontFace");F(this,"fontUrl");const{fontFamily:c,fontUrl:f}=i,x=f.replace(/\(|\)/g,""),w=this.descriptors;let y={style:w.style,weight:typeof w.weight=="number"?`${w.weight}`:w.weight,stretch:w.stretch,unicodeRange:w.unicodeRange,featureSettings:w.featureSettings,display:w.display};for(const r in y){const C=r;y[C]===void 0&&delete y[C]}const a=new FontFace(c,`url(${x})`,y);x.length>0?a.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error):(this.loaded=!0,this.emit("loaded")),this.fontFace=a,this.fontUrl=f}}class j_{}class zC extends j_{constructor(i,c,f,x,w,y,a,r,C,R,k,I,m){super();F(this,"glw");F(this,"options");F(this,"buffers");F(this,"shader");F(this,"shaderProps");F(this,"alpha");F(this,"clippingRect");F(this,"dimensions");F(this,"bufferIdx");F(this,"zIndex");F(this,"renderToTexture");F(this,"parentHasRenderTexture");F(this,"framebufferDimensions");F(this,"length",0);F(this,"numQuads",0);F(this,"textures",[]);F(this,"maxTextures");this.glw=i,this.options=c,this.buffers=f,this.shader=x,this.shaderProps=w,this.alpha=y,this.clippingRect=a,this.dimensions=r,this.bufferIdx=C,this.zIndex=R,this.renderToTexture=k,this.parentHasRenderTexture=I,this.framebufferDimensions=m,this.maxTextures=x.supportsIndexedTextures?i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(i){const{textures:c,maxTextures:f}=this;let x=-1;const w=c.length;for(let y=0;y<w;y++)if(c[y]===i){x=y;break}return x!==-1?x:w>=f?4294967295:(this.textures.push(i),w)}draw(){const{glw:i,shader:c,shaderProps:f,options:x}=this,{shManager:w}=x;w.useShader(c),c.bindRenderOp(this,f);const y=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:a,y:r,width:C,height:R}=this.clippingRect,k=this.parentHasRenderTexture?1:x.pixelRatio,I=x.canvas.height,m=Math.round(a*k),S=Math.round(C*k),E=Math.round(R*k);let A=Math.round(I-E-r*k);this.parentHasRenderTexture&&(A=this.framebufferDimensions?this.framebufferDimensions.height-this.dimensions.height:0),i.setScissorTest(!0),i.scissor(m,A,S,E)}else i.setScissorTest(!1);i.drawElements(i.TRIANGLES,6*this.numQuads,i.UNSIGNED_SHORT,y)}}function $_(h){const o={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(o).forEach(c=>{o[c]=h.getParameter(h[c])}),o}function z_(h){const o={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(o).forEach(c=>{o[c]=h.getExtension(c)}),o}function V_(h,o){const i=~~(o/80),c=new Uint16Array(i*6);for(let x=0,w=0;x<i;x+=6,w+=4)c[x]=w,c[x+1]=w+1,c[x+2]=w+2,c[x+3]=w+2,c[x+4]=w+1,c[x+5]=w+3;const f=h.createBuffer();h.elementArrayBufferData(f,c,h.STATIC_DRAW)}function H_(h){return h!==null&&(typeof h=="object"&&h.constructor&&h.constructor.name==="HTMLImageElement"||typeof HTMLImageElement<"u"&&h instanceof HTMLImageElement)}const Nm=new Uint8Array([0,0,0,0]);class Cy extends FC{constructor(i,c,f){super(c,f);F(this,"glw");F(this,"_nativeCtxTexture",null);F(this,"_w",0);F(this,"_h",0);this.glw=i}get ctxTexture(){return this.state==="freed"?(this.load(),null):(nt(this._nativeCtxTexture),this._nativeCtxTexture)}get w(){return this._w}get h(){return this._h}async load(){if(this.state==="loading"||this.state==="loaded")return Promise.resolve();if(this.state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this._nativeCtxTexture===null){this.state="failed";const i=new Error("Could not create WebGL Texture");throw this.textureSource.setState("failed",i),console.error("Could not create WebGL Texture"),i}try{const{width:i,height:c}=await this.onLoadRequest();if(this.state==="freed")return;this.state="loaded",this._w=i,this._h=c,this.textureSource.setState("loaded",{width:i,height:c}),queueMicrotask(()=>{this.textureSource.freeTextureData()})}catch(i){if(this.state==="freed")return;this.state="failed";const c=i instanceof Error?i:new Error(String(i));throw this.textureSource.setState("failed",c),this.textureSource.freeTextureData(),console.error(i),c}}async onLoadRequest(){const{glw:i}=this,c=this.textureSource.textureData;if(c===null||this._nativeCtxTexture===null)throw new Error("Texture data or native texture is null "+this.textureSource.type);i.texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(Nm.byteLength);let f=0,x=0;i.activeTexture(0);const w=c.data,y=i.RGBA,a=4,r=1.1;if(typeof ImageBitmap<"u"&&w instanceof ImageBitmap||w instanceof ImageData||H_(w))f=w.width,x=w.height,i.bindTexture(this._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!c.premultiplyAlpha),i.texImage2D(0,y,y,i.UNSIGNED_BYTE,w),this.setTextureMemUse(x*f*a*r);else if(w===null)f=0,x=0,i.bindTexture(this._nativeCtxTexture),i.texImage2D(0,y,1,1,0,y,i.UNSIGNED_BYTE,Nm),this.setTextureMemUse(Nm.byteLength);else if("mipmaps"in w&&w.mipmaps){const{mipmaps:C,width:R=0,height:k=0,type:I,glInternalFormat:m}=w,S=I==="ktx"?new DataView(C[0]??new ArrayBuffer(0)):C[0];i.bindTexture(this._nativeCtxTexture),i.compressedTexImage2D(0,m,R,k,0,S),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),this.setTextureMemUse(S.byteLength)}else w&&w instanceof Uint8Array?(f=1,x=1,i.bindTexture(this._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!c.premultiplyAlpha),i.texImage2D(0,y,f,x,0,y,i.UNSIGNED_BYTE,w),this.setTextureMemUse(f*x*a)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",c);return{width:f,height:x}}free(){this.state!=="freed"&&(this.state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,this._nativeCtxTexture!==null&&(this.glw.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null),this.textureSource.freeTextureData())}createNativeCtxTexture(){const{glw:i}=this,c=i.createTexture();return c?(i.activeTexture(0),i.bindTexture(c),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),c):null}}class G_ extends Cy{constructor(o,i,c){super(o,i,c)}async onLoadRequest(){var i,c;const o=this.textureSource.textureData;return nt(o,"SubTexture must have texture data"),o.data instanceof Uint8Array?{width:1,height:1}:{width:((i=o.data)==null?void 0:i.width)||0,height:((c=o.data)==null?void 0:c.height)||0}}}class VC{constructor(o){F(this,"config");this.config=o}getBuffer(o){var i;return(i=this.config.find(c=>c.attributes[o]))==null?void 0:i.buffer}getAttributeInfo(o){var i;return(i=this.config.find(c=>c.attributes[o]))==null?void 0:i.attributes[o]}}function X_(h){return self.WebGL2RenderingContext&&h instanceof self.WebGL2RenderingContext}class W_{constructor(o){F(this,"gl");F(this,"activeTextureUnit",0);F(this,"texture2dUnits");F(this,"texture2dParams",new WeakMap);F(this,"scissorEnabled");F(this,"scissorX");F(this,"scissorY");F(this,"scissorWidth");F(this,"scissorHeight");F(this,"blendEnabled");F(this,"blendSrcRgb");F(this,"blendDstRgb");F(this,"blendSrcAlpha");F(this,"blendDstAlpha");F(this,"boundArrayBuffer");F(this,"boundElementArrayBuffer");F(this,"curProgram");F(this,"canvas");F(this,"MAX_RENDERBUFFER_SIZE");F(this,"MAX_TEXTURE_SIZE");F(this,"MAX_VIEWPORT_DIMS");F(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");F(this,"MAX_TEXTURE_IMAGE_UNITS");F(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");F(this,"MAX_VERTEX_ATTRIBS");F(this,"MAX_VARYING_VECTORS");F(this,"MAX_VERTEX_UNIFORM_VECTORS");F(this,"MAX_FRAGMENT_UNIFORM_VECTORS");F(this,"TEXTURE_MAG_FILTER");F(this,"TEXTURE_MIN_FILTER");F(this,"TEXTURE_WRAP_S");F(this,"TEXTURE_WRAP_T");F(this,"LINEAR");F(this,"CLAMP_TO_EDGE");F(this,"RGB");F(this,"RGBA");F(this,"UNSIGNED_BYTE");F(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");F(this,"UNPACK_FLIP_Y_WEBGL");F(this,"FLOAT");F(this,"TRIANGLES");F(this,"UNSIGNED_SHORT");F(this,"ONE");F(this,"ONE_MINUS_SRC_ALPHA");F(this,"VERTEX_SHADER");F(this,"FRAGMENT_SHADER");F(this,"STATIC_DRAW");F(this,"COMPILE_STATUS");F(this,"LINK_STATUS");F(this,"DYNAMIC_DRAW");F(this,"COLOR_ATTACHMENT0");F(this,"INVALID_ENUM");F(this,"INVALID_OPERATION");this.gl=o,this.activeTextureUnit=o.getParameter(o.ACTIVE_TEXTURE)-o.TEXTURE0;const i=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(i).fill(void 0).map((f,x)=>(this.activeTexture(x),o.getParameter(o.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=o.isEnabled(o.SCISSOR_TEST);const c=o.getParameter(o.SCISSOR_BOX);this.scissorX=c[0],this.scissorY=c[1],this.scissorWidth=c[2],this.scissorHeight=c[3],this.blendEnabled=o.isEnabled(o.BLEND),this.blendSrcRgb=o.getParameter(o.BLEND_SRC_RGB),this.blendDstRgb=o.getParameter(o.BLEND_DST_RGB),this.blendSrcAlpha=o.getParameter(o.BLEND_SRC_ALPHA),this.blendDstAlpha=o.getParameter(o.BLEND_DST_ALPHA),this.boundArrayBuffer=o.getParameter(o.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=o.getParameter(o.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=o.getParameter(o.CURRENT_PROGRAM),this.canvas=o.canvas,this.MAX_RENDERBUFFER_SIZE=o.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=o.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=o.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=o.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=o.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=o.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=o.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=o.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=o.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=o.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=o.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=o.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=o.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=o.TEXTURE_WRAP_T,this.LINEAR=o.LINEAR,this.CLAMP_TO_EDGE=o.CLAMP_TO_EDGE,this.RGB=o.RGB,this.RGBA=o.RGBA,this.UNSIGNED_BYTE=o.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=o.UNPACK_FLIP_Y_WEBGL,this.FLOAT=o.FLOAT,this.TRIANGLES=o.TRIANGLES,this.UNSIGNED_SHORT=o.UNSIGNED_SHORT,this.ONE=o.ONE,this.ONE_MINUS_SRC_ALPHA=o.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=o.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=o.TRIANGLES,this.UNSIGNED_SHORT=o.UNSIGNED_SHORT,this.VERTEX_SHADER=o.VERTEX_SHADER,this.FRAGMENT_SHADER=o.FRAGMENT_SHADER,this.STATIC_DRAW=o.STATIC_DRAW,this.COMPILE_STATUS=o.COMPILE_STATUS,this.LINK_STATUS=o.LINK_STATUS,this.DYNAMIC_DRAW=o.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=o.COLOR_ATTACHMENT0,this.INVALID_ENUM=o.INVALID_ENUM,this.INVALID_OPERATION=o.INVALID_OPERATION}isWebGl2(){return X_(this.gl)}activeTexture(o){const{gl:i}=this;this.activeTextureUnit!==o&&(i.activeTexture(o+i.TEXTURE0),this.activeTextureUnit=o)}bindTexture(o){const{gl:i,activeTextureUnit:c,texture2dUnits:f}=this;f[c]!==o&&(f[c]=o,i.bindTexture(this.gl.TEXTURE_2D,o))}_getActiveTexture(){const{activeTextureUnit:o,texture2dUnits:i}=this;return i[o]}texParameteri(o,i){const{gl:c,texture2dParams:f}=this,x=this._getActiveTexture();if(!x)throw new Error("No active texture");let w=f.get(x);w||(w={},f.set(x,w)),w[o]!==i&&(w[o]=i,c.texParameteri(c.TEXTURE_2D,o,i))}texImage2D(o,i,c,f,x,w,y,a){const{gl:r}=this;w?r.texImage2D(r.TEXTURE_2D,o,i,c,f,x,w,y,a):r.texImage2D(r.TEXTURE_2D,o,i,c,f,x)}compressedTexImage2D(o,i,c,f,x,w){const{gl:y}=this;y.compressedTexImage2D(y.TEXTURE_2D,o,i,c,f,x,w)}pixelStorei(o,i){const{gl:c}=this;c.pixelStorei(o,i)}generateMipmap(){const{gl:o}=this;o.generateMipmap(o.TEXTURE_2D)}createTexture(){const{gl:o}=this;return o.createTexture()}deleteTexture(o){const{gl:i}=this;o&&this.texture2dParams.delete(o),i.deleteTexture(o)}deleteFramebuffer(o){this.gl.deleteFramebuffer(o)}viewport(o,i,c,f){const{gl:x}=this;x.viewport(o,i,c,f)}clearColor(o,i,c,f){const{gl:x}=this;x.clearColor(o,i,c,f)}setScissorTest(o){const{gl:i,scissorEnabled:c}=this;o!==c&&(o?i.enable(i.SCISSOR_TEST):i.disable(i.SCISSOR_TEST),this.scissorEnabled=o)}scissor(o,i,c,f){const{gl:x,scissorX:w,scissorY:y,scissorWidth:a,scissorHeight:r}=this;(o!==w||i!==y||c!==a||f!==r)&&(x.scissor(o,i,c,f),this.scissorX=o,this.scissorY=i,this.scissorWidth=c,this.scissorHeight=f)}setBlend(o){const{gl:i,blendEnabled:c}=this;o!==c&&(o?i.enable(i.BLEND):i.disable(i.BLEND),this.blendEnabled=o)}blendFunc(o,i){const{gl:c,blendSrcRgb:f,blendDstRgb:x,blendSrcAlpha:w,blendDstAlpha:y}=this;(o!==f||i!==x||o!==w||i!==y)&&(c.blendFunc(o,i),this.blendSrcRgb=o,this.blendDstRgb=i,this.blendSrcAlpha=o,this.blendDstAlpha=i)}createBuffer(){const{gl:o}=this;return o.createBuffer()}createFramebuffer(){const{gl:o}=this;return o.createFramebuffer()}bindFramebuffer(o){const{gl:i}=this;i.bindFramebuffer(i.FRAMEBUFFER,o)}framebufferTexture2D(o,i,c){const{gl:f}=this;f.framebufferTexture2D(f.FRAMEBUFFER,o,f.TEXTURE_2D,i,c)}clear(){const{gl:o}=this;o.clear(o.COLOR_BUFFER_BIT)}arrayBufferData(o,i,c){const{gl:f,boundArrayBuffer:x}=this;x!==o&&(f.bindBuffer(f.ARRAY_BUFFER,o),this.boundArrayBuffer=o),f.bufferData(f.ARRAY_BUFFER,i,c)}elementArrayBufferData(o,i,c){const{gl:f,boundElementArrayBuffer:x}=this;x!==o&&(f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),this.boundElementArrayBuffer=o),f.bufferData(f.ELEMENT_ARRAY_BUFFER,i,c)}vertexAttribPointer(o,i,c,f,x,w,y){const{gl:a,boundArrayBuffer:r}=this;r!==o&&(a.bindBuffer(a.ARRAY_BUFFER,o),this.boundArrayBuffer=o),a.vertexAttribPointer(i,c,f,x,w,y)}useProgram(o){const{gl:i,curProgram:c}=this;c!==o&&(i.useProgram(o),this.curProgram=o)}uniform1f(o,i){const{gl:c}=this;c.uniform1f(o,i)}uniform1fv(o,i){const{gl:c}=this;c.uniform1fv(o,i)}uniform1i(o,i){const{gl:c}=this;c.uniform1i(o,i)}uniform1iv(o,i){const{gl:c}=this;c.uniform1iv(o,i)}uniform2f(o,i,c){const{gl:f}=this;f.uniform2f(o,i,c)}uniform2fv(o,i){const{gl:c}=this;c.uniform2fv(o,i)}uniform2i(o,i,c){const{gl:f}=this;f.uniform2i(o,i,c)}uniform2iv(o,i){const{gl:c}=this;c.uniform2iv(o,i)}uniform3f(o,i,c,f){const{gl:x}=this;x.uniform3f(o,i,c,f)}uniform3fv(o,i){const{gl:c}=this;c.uniform3fv(o,i)}uniform3i(o,i,c,f){const{gl:x}=this;x.uniform3i(o,i,c,f)}uniform3iv(o,i){const{gl:c}=this;c.uniform3iv(o,i)}uniform4f(o,i,c,f,x){const{gl:w}=this;w.uniform4f(o,i,c,f,x)}uniform4fv(o,i){const{gl:c}=this;c.uniform4fv(o,i)}uniform4i(o,i,c,f,x){const{gl:w}=this;w.uniform4i(o,i,c,f,x)}uniform4iv(o,i){const{gl:c}=this;c.uniform4iv(o,i)}uniformMatrix2fv(o,i){const{gl:c}=this;c.uniformMatrix2fv(o,!1,i)}uniformMatrix3fv(o,i){const{gl:c}=this;c.uniformMatrix3fv(o,!1,i)}uniformMatrix4fv(o,i){const{gl:c}=this;c.uniformMatrix4fv(o,!1,i)}getParameter(o){const{gl:i}=this;return i.getParameter(o)}drawElements(o,i,c,f){const{gl:x}=this;x.drawElements(o,i,c,f)}getExtension(o){const{gl:i}=this;return i.getExtension(o)}getError(){const{gl:o}=this;return o.getError()}createVertexArray(){const{gl:o}=this;return nt(o instanceof WebGL2RenderingContext),o.createVertexArray()}bindVertexArray(o){const{gl:i}=this;nt(i instanceof WebGL2RenderingContext),i.bindVertexArray(o)}getAttribLocation(o,i){const{gl:c}=this;return c.getAttribLocation(o,i)}getUniformLocation(o,i){const{gl:c}=this;return c.getUniformLocation(o,i)}enableVertexAttribArray(o){const{gl:i}=this;i.enableVertexAttribArray(o)}disableVertexAttribArray(o){const{gl:i}=this;i.disableVertexAttribArray(o)}createShader(o){const{gl:i}=this;return i.createShader(o)}compileShader(o){const{gl:i}=this;i.compileShader(o)}attachShader(o,i){const{gl:c}=this;c.attachShader(o,i)}linkProgram(o){const{gl:i}=this;i.linkProgram(o)}deleteProgram(o){const{gl:i}=this;i.deleteProgram(o)}getShaderParameter(o,i){const{gl:c}=this;return c.getShaderParameter(o,i)}getShaderInfoLog(o){const{gl:i}=this;return i.getShaderInfoLog(o)}createProgram(){const{gl:o}=this;return o.createProgram()}getProgramParameter(o,i){const{gl:c}=this;return c.getProgramParameter(o,i)}getProgramInfoLog(o){const{gl:i}=this;return i.getProgramInfoLog(o)}shaderSource(o,i){const{gl:c}=this;c.shaderSource(o,i)}deleteShader(o){const{gl:i}=this;i.deleteShader(o)}}class z3 extends Cy{constructor(i,c,f){super(i,c,f);F(this,"framebuffer",null)}async onLoadRequest(){const{glw:i}=this,c=this._nativeCtxTexture=this.createNativeCtxTexture();if(!c)throw new Error("Failed to create native texture for RenderTexture");const{width:f,height:x}=this.textureSource;return this.framebuffer=i.createFramebuffer(),i.texImage2D(0,i.RGBA,f,x,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(f*x*4),i.bindFramebuffer(this.framebuffer),i.framebufferTexture2D(i.COLOR_ATTACHMENT0,c,0),i.bindFramebuffer(null),{width:f,height:x}}free(){super.free(),this.glw.deleteFramebuffer(this.framebuffer),this.framebuffer=null}}const K_=24;class by extends jC{constructor(i){super(i);F(this,"glw");F(this,"system");F(this,"quadBuffer");F(this,"fQuadBuffer");F(this,"uiQuadBuffer");F(this,"renderOps",[]);F(this,"curBufferIdx",0);F(this,"curRenderOp",null);F(this,"rttNodes",[]);F(this,"activeRttNode",null);F(this,"defShaderCtrl");F(this,"defaultShader");F(this,"quadBufferCollection");F(this,"clearColor",{raw:0,normalized:[0,0,0,0]});F(this,"quadBufferUsage",0);F(this,"numQuadsRendered",0);F(this,"renderToTextureActive",!1);this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:c,clearColor:f,bufferMemory:x}=i,w=GR(c,i.forceWebGL2,i.contextSpy),y=this.glw=new W_(w);y.viewport(0,0,c.width,c.height),this.updateClearColor(f),y.setBlend(!0),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),V_(y,x),this.system={parameters:$_(this.glw),extensions:z_(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const a=y.createBuffer();nt(a);const r=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new VC([{buffer:a,attributes:{a_position:{name:"a_position",size:2,type:y.FLOAT,normalized:!1,stride:r,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:y.FLOAT,normalized:!1,stride:r,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:y.UNSIGNED_BYTE,normalized:!0,stride:r,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:y.FLOAT,normalized:!1,stride:r,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:i}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,i.setScissorTest(!1),i.clear()}getShaderManager(){return this.shManager}createCtxTexture(i){return i instanceof Gl?new G_(this.glw,this.txMemManager,i):i instanceof Sh?new z3(this.glw,this.txMemManager,i):new Cy(this.glw,this.txMemManager,i)}addQuad(i){var A;const{fQuadBuffer:c,uiQuadBuffer:f}=this;let x=i.texture;if(nt(x!==null,"Texture is required"),i.shaderProps!==null){if(xh(i.shaderProps,"$dimensions")==!0){const N=i.shaderProps.$dimensions;N.width=i.width,N.height=i.height}xh(i.shaderProps,"$alpha")===!0&&(i.shaderProps.$alpha=i.alpha)}let{curBufferIdx:w,curRenderOp:y}=this;const a={width:-1,height:-1};a.width=i.width,a.height=i.height;const r=i.shader||this.defaultShader;nt(r.getUniformLocation!==void 0,"Invalid WebGL shader"),this.reuseRenderOp(i)===!1&&(this.newRenderOp(r,i.shaderProps,i.alpha,a,i.clippingRect,w,i.rtt,i.parentHasRenderTexture,i.framebufferDimensions),y=this.curRenderOp,nt(y));let C=0,R=0,k=1,I=1;if(x.type===sn.subTexture){const{x:N,y:K,width:Se,height:Me}=x.props,{width:ue=0,height:he=0}=x.parentTexture.dimensions||{width:0,height:0};C=N/ue,k=C+Se/ue,R=K/he,I=R+Me/he,x=x.parentTexture}if(x.type===sn.image&&i.textureOptions!==null&&i.textureOptions.resizeMode!==void 0&&x.dimensions!==null){const N=i.textureOptions.resizeMode,{width:K,height:Se}=x.dimensions;if(N.type==="cover"){const Me=i.width/K,ue=i.height/Se,he=Math.max(Me,ue),oe=1/he;if(he&&Me&&Me<he){const pe=oe*i.width;C=(1-pe/K)*(N.clipX??.5),k=C+pe/K}if(he&&ue&&ue<he){const pe=oe*i.height;R=(1-pe/Se)*(N.clipY??.5),I=R+pe/Se}}}let m=0;i.textureOptions!==null&&(i.textureOptions.flipX===!0&&([C,k]=[k,C]),m=+(i.textureOptions.flipY||!1)),m^+(x.type===sn.renderToTexture)&&([R,I]=[I,R]);let S=x.ctxTexture;S===void 0&&(S=(A=this.stage.defaultTexture)==null?void 0:A.ctxTexture,console.warn("WebGL Renderer: Texture does not have a ctxTexture, using default texture instead"));const E=this.addTexture(S,w);if(nt(this.curRenderOp!==null),i.renderCoords)c[w++]=i.renderCoords.x1,c[w++]=i.renderCoords.y1,c[w++]=C,c[w++]=R,f[w++]=i.colorTl,c[w++]=E,c[w++]=i.renderCoords.x2,c[w++]=i.renderCoords.y2,c[w++]=k,c[w++]=R,f[w++]=i.colorTr,c[w++]=E,c[w++]=i.renderCoords.x4,c[w++]=i.renderCoords.y4,c[w++]=C,c[w++]=I,f[w++]=i.colorBl,c[w++]=E,c[w++]=i.renderCoords.x3,c[w++]=i.renderCoords.y3,c[w++]=k,c[w++]=I,f[w++]=i.colorBr,c[w++]=E;else if(i.tb!==0||i.tc!==0)c[w++]=i.tx,c[w++]=i.ty,c[w++]=C,c[w++]=R,f[w++]=i.colorTl,c[w++]=E,c[w++]=i.tx+i.width*i.ta,c[w++]=i.ty+i.width*i.tc,c[w++]=k,c[w++]=R,f[w++]=i.colorTr,c[w++]=E,c[w++]=i.tx+i.height*i.tb,c[w++]=i.ty+i.height*i.td,c[w++]=C,c[w++]=I,f[w++]=i.colorBl,c[w++]=E,c[w++]=i.tx+i.width*i.ta+i.height*i.tb,c[w++]=i.ty+i.width*i.tc+i.height*i.td,c[w++]=k,c[w++]=I,f[w++]=i.colorBr,c[w++]=E;else{const N=i.tx+i.width*i.ta,K=i.ty+i.height*i.td;c[w++]=i.tx,c[w++]=i.ty,c[w++]=C,c[w++]=R,f[w++]=i.colorTl,c[w++]=E,c[w++]=N,c[w++]=i.ty,c[w++]=k,c[w++]=R,f[w++]=i.colorTr,c[w++]=E,c[w++]=i.tx,c[w++]=K,c[w++]=C,c[w++]=I,f[w++]=i.colorBl,c[w++]=E,c[w++]=N,c[w++]=K,c[w++]=k,c[w++]=I,f[w++]=i.colorBr,c[w++]=E}this.curRenderOp.length+=K_,this.curRenderOp.numQuads++,this.curBufferIdx=w}newRenderOp(i,c,f,x,w,y,a,r,C){const R=new zC(this.glw,this.options,this.quadBufferCollection,i,c,f,w,x,y,0,a,r,C);this.curRenderOp=R,this.renderOps.push(R)}addTexture(i,c,f){const{curRenderOp:x}=this;nt(x);const w=x.addTexture(i);if(w===4294967295){if(f)throw new Error("Unable to add texture to render op");return this.newRenderOp(x.shader,x.shaderProps,x.alpha,x.dimensions,x.clippingRect,c),this.addTexture(i,c,!0)}return w}reuseRenderOp(i){var r;const{shader:c,shaderProps:f,parentHasRenderTexture:x,rtt:w,clippingRect:y}=i,a=c||this.defaultShader;return!(((r=this.curRenderOp)==null?void 0:r.shader)!==a||JR(this.curRenderOp.clippingRect,y)===!1||x!==void 0||w!==void 0||this.curRenderOp.shader!==this.defaultShader&&(f===null||this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,f)===!1))}addRenderOp(i){this.renderOps.push(i),this.curRenderOp=null}render(i="screen"){const{glw:c,quadBuffer:f}=this,x=new Float32Array(f,0,this.curBufferIdx),w=this.quadBufferCollection.getBuffer("a_position")||null;c.arrayBufferData(w,x,c.STATIC_DRAW);for(let a=0,r=this.renderOps.length;a<r;a++)this.renderOps[a].draw();this.quadBufferUsage=this.curBufferIdx*x.BYTES_PER_ELEMENT;const y=4*(6*x.BYTES_PER_ELEMENT);this.numQuadsRendered=this.quadBufferUsage/y}getQuadCount(){return this.numQuadsRendered}renderToTexture(i){for(let c=0;c<this.rttNodes.length;c++)if(this.rttNodes[c]===i)return;this.insertRTTNodeInOrder(i)}insertRTTNodeInOrder(i){let c=this.rttNodes.length,f=i;for(;f&&f.parent;){const w=this.rttNodes.indexOf(f.parent);if(w!==-1){c=w;break}f=f.parent}const x=this.findMaxChildRTTIndex(i);x!==-1&&(c=Math.max(c,x+1)),this.rttNodes.splice(c,0,i)}findMaxChildRTTIndex(i){let c=-1;const f=x=>{const w=this.rttNodes.indexOf(x);w!==-1&&(c=Math.max(c,w));for(const y of x.children)f(y)};return f(i),c}renderRTTNodes(){const{glw:i}=this,{txManager:c}=this.stage;for(let x=0;x<this.rttNodes.length;x++){const w=this.rttNodes[x];if(w===void 0||w.hasRTTupdates===!1||w.worldAlpha===0||w.strictBounds===!0&&w.renderState===jn.OutOfBounds||w.texture===null||w.texture.state!=="loaded")continue;this.activeRttNode=w,nt(w.texture,"RTT node missing texture");const y=w.texture.ctxTexture;nt(y instanceof z3),this.renderToTextureActive=!0,i.bindFramebuffer(y.framebuffer),i.viewport(0,0,y.w,y.h),i.clearColor(0,0,0,0),i.clear();for(let a=0;a<w.children.length;a++){const r=w.children[a];r!==void 0&&(this.stage.addQuads(r),r.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,w.hasRTTupdates=!1}const f=this.clearColor.normalized;i.clearColor(f[0],f[1],f[2],f[3]),i.bindFramebuffer(null),i.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(i){const c=this.rttNodes.indexOf(i);c!==-1&&this.rttNodes.splice(c,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}updateClearColor(i){if(this.clearColor.raw===i)return;const c=this.glw,f=Wl(i);c.clearColor(f[0],f[1],f[2],f[3]),this.clearColor={raw:i,normalized:f},c.clear()}}const Y_={LINE_FEED:10};class q_{}class Q_ extends q_{constructor(i,c){super();F(this,"data");F(this,"glyphMap");F(this,"kernings");this.data=i,this.glyphMap=c;const f=this.kernings={};i.kernings.forEach(x=>{const w=x.second,y=f[w]=f[w]||{};y[x.first]=x.amount}),this.kernings=f}*shapeText(i,c){var w;let f,x;for(;(f=c.peek())&&!f.done;){const y=f.value,a=this.glyphMap.get(y);if(c.next(),a!==void 0){const r=x!==void 0?(((w=this.kernings[a.id])==null?void 0:w[x])||0)+i.letterSpacing:0;x=a.id,yield{mapped:!0,glyphId:a.id,codepoint:y,cluster:c.lastIndex,xAdvance:a.xadvance+r,yAdvance:0,xOffset:a.xoffset+r,yOffset:a.yoffset,xBearing:0,yBearing:0,width:a.width,height:a.height}}else y===Y_.LINE_FEED&&(x=void 0),yield{mapped:!1,codepoint:y,cluster:c.lastIndex}}}}class ay extends $C{constructor(i,c){super(c);F(this,"type");F(this,"texture");F(this,"maxCharHeight",0);F(this,"shaper");F(this,"glyphMap",new Map);F(this,"data");const{atlasUrl:f,atlasDataUrl:x,stage:w}=c;this.type=i;const y=w.renderer;nt(y instanceof by,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=w.txManager.createTexture("ImageTexture",{src:f,premultiplyAlpha:!1}),w.txManager.loadTexture(this.texture,!0),this.texture.preventCleanup=!0,this.texture.on("loaded",()=>{this.checkLoaded(),w.requestRender()}),DC(x).then(a=>{var C;this.data=JSON.parse(a),nt(this.data);let r=0;if(this.data.chars.forEach(R=>{this.glyphMap.set(R.id,R);const k=R.yoffset+R.height;k>r&&(r=k)}),this.maxCharHeight=r,this.shaper=new Q_(this.data,this.glyphMap),!this.metrics)if((C=this.data)!=null&&C.lightningMetrics){const{ascender:R,descender:k,lineGap:I,unitsPerEm:m}=this.data.lightningMetrics;this.metrics={ascender:R/m,descender:k/m,lineGap:I/m}}else throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);this.checkLoaded()}).catch(console.error)}getAtlasEntry(i){const c=this.glyphMap.get(i);if(c===void 0)throw new Error(`Glyph ${i} not found in font ${this.fontFamily}`);return{x:c.x,y:c.y,width:c.width,height:c.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}const J_=24;function Z_(h,o,i,c,f,x,w,y,a){const r=Math.min(Math.max(w.firstLineIdx,0),y.length),C=0,{metrics:R}=i;nt(R,"Font metrics not loaded"),nt(i.data,"Font data not loaded");const k=(R.ascender-R.descender)*h;let I=0;c==="middle"?I=(o-k)/2:c==="bottom"&&(I=o-k);const m=f/x,S=i.data.common.base,A=R.ascender*h-S,N=m+A+r*o+I;if(!(a&&N>=a/x))return{sdfX:C,sdfY:N,lineIndex:r}}class Ll{constructor(o,i=0){F(this,"iterator");F(this,"peekBuffer",[]);F(this,"_lastIndex");this.iterator=o,this.iterator=o,this._lastIndex=i-1,this.peekBuffer=[]}next(){const o=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return o.done?this._lastIndex=-1:this._lastIndex++,o}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const o=this.iterator.next();return this.peekBuffer.push(o),o}get lastIndex(){return this._lastIndex}}function*Dl(h,o=0){let i=o;for(;i<h.length;){const c=h.codePointAt(i);if(c===void 0)throw new Error("Invalid Unicode code point");yield c,i+=c<=65535?1:2}}function e8(h,o,i){const c=i.shapeText(o,new Ll(Dl(h,0),0));let f=0;for(const x of c)x.mapped&&x.codepoint!==8203&&(f+=x.xAdvance);return f}function t8(h,o,i,c,f,x,w,y,a,r,C,R,k,I,m,S,E,A,N){nt(m,"Font face must be loaded"),nt(m.loaded,"Font face must be loaded"),nt(m.data,"Font face must be loaded"),nt(m.shaper,"Font face must be loaded");const K=y/m.data.info.size,Se=a/K,Me=x/K,ue=r/K,he=k[h],oe=(he==null?void 0:he.codepointIndex)||0,pe=(he==null?void 0:he.maxX)||0,D=(he==null?void 0:he.maxY)||0;let ne=pe,le=D,me=o,V=i,re=0;const H={codepointIndex:-1,bufferOffset:-1,xStart:-1},z=m.shaper,se={letterSpacing:ue};c.endsWith(" ")&&(c+=" ");let we=z.shapeText(se,new Ll(Dl(c,oe),oe)),Fe,Je=-1;const $e=[],ke=w/K,j=e8(A,se,z);let lt=!0;for(;lt;){const De=(N===0||h+1<N)&&(R!=="both"||E||V+Se+m.maxCharHeight<=ke),Ye=De?Me:Me-j;let un=0;const ji=V+m.maxCharHeight>=I.y1,Zi=V<=I.y2,ii=ji&&Zi;for(;(Fe=we.next())&&!Fe.done;){const be=Fe.value;if(h===k.length)k.push({codepointIndex:be.cluster,maxY:le,maxX:ne});else if(h>k.length)throw new Error("Unexpected lineCache length");if(be.codepoint===32||be.codepoint===10||be.codepoint===8203?H.codepointIndex!==-1&&(H.codepointIndex=-1,un=me):H.codepointIndex===-1&&(H.codepointIndex=be.cluster,H.bufferOffset=re,H.xStart=un),be.mapped){const $i=me+be.xOffset+be.width;if(R!=="none"&&$i>=Ye&&H.codepointIndex!==-1&&H.xStart>0)if(De){we=z.shapeText(se,new Ll(Dl(c,H.codepointIndex),H.codepointIndex)),re=H.bufferOffset;break}else we=z.shapeText(se,new Ll(Dl(A,0),0)),me=H.xStart,re=H.bufferOffset,R="none";else{const gi=me+be.xOffset,ri=V+be.yOffset;if(ii){Je===-1&&(Je=re);const ar=m.getAtlasEntry(be.glyphId),En=ar.x/m.data.common.scaleW,ft=ar.y/m.data.common.scaleH,mi=ar.width/m.data.common.scaleW,Yr=ar.height/m.data.common.scaleH;C[re++]=gi,C[re++]=ri,C[re++]=En,C[re++]=ft,C[re++]=gi+be.width,C[re++]=ri,C[re++]=En+mi,C[re++]=ft,C[re++]=gi,C[re++]=ri+be.height,C[re++]=En,C[re++]=ft+Yr,C[re++]=gi+be.width,C[re++]=ri+be.height,C[re++]=En+mi,C[re++]=ft+Yr}le=Math.max(le,ri+be.height),ne=Math.max(ne,gi+be.width),me+=be.xAdvance}}else if(be.codepoint===10){if(De)break;we=z.shapeText(se,new Ll(Dl(A,0),0)),R="none"}}Je!==-1&&($e.push({bufferStart:Je,bufferEnd:re}),Je=-1),me=0,V+=Se,h++,H.codepointIndex=-1,un=0,!S&&R==="both"&&V>I.y2||Fe&&Fe.done?lt=!1:De||(lt=!1)}if(f==="center"){const De=R==="none"?ne:Me;for(let Ye=0;Ye<$e.length;Ye++){const un=$e[Ye],ji=C[un.bufferEnd-4]-C[un.bufferStart],Zi=(De-ji)/2;for(let ii=un.bufferStart;ii<un.bufferEnd;ii+=4)C[ii]+=Zi}}else if(f==="right"){const De=R==="none"?ne:Me;for(let Ye=0;Ye<$e.length;Ye++){const un=$e[Ye],ji=un.bufferEnd===un.bufferStart?0:C[un.bufferEnd-4]-C[un.bufferStart],Zi=De-ji;for(let ii=un.bufferStart;ii<un.bufferEnd;ii+=4)C[ii]+=Zi}}return nt(Fe),{bufferNumFloats:re,bufferNumQuads:re/16,layoutNumCharacters:Fe.done?c.length-oe:Fe.value.cluster-oe+1,fullyProcessed:!!Fe.done,maxX:ne,maxY:le,numLines:k.length}}function n8(h,o){return Math.ceil(h/o)*o}function i8(h,o){return Math.floor(h/o)*o}function r8(h,o,i,c,f,x,w,y){const{screen:a,sdf:r}=h;if(!t_(w))a.x1=0,a.y1=0,a.x2=0,a.y2=0,r.x1=0,r.y1=0,r.x2=0,r.y2=0,h.numLines=0,h.firstLineIdx=0;else{const C=w.x1-o,R=C+(w.x2-w.x1),k=w.y1-i+c,I=i8(k-x,f||1),m=n8(k+(w.y2-w.y1)+x,f||1);a.x1=C,a.y1=I,a.x2=R,a.y2=m,r.x1=C/y,r.y1=I/y,r.x2=R/y,r.y2=m/y,h.numLines=Math.ceil((m-I)/f),h.firstLineIdx=f?Math.floor(I/f):0}h.valid=!0}function HC(h,o){return o*(h.ascender-h.descender+h.lineGap)}const o8={x:0,y:0,width:0,height:0};class s8 extends Ty{constructor(i){super(i);F(this,"ssdfFontFamilies",{});F(this,"msdfFontFamilies",{});F(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);F(this,"sdfShader");F(this,"rendererBounds");F(this,"type","sdf");this.sdfShader=this.stage.shManager.loadShader("SdfShader",{transform:new Float32Array,color:0,size:0,scrollY:0,distanceRange:0,debug:!1}).shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(i,c)=>{i.props.fontFamily=c,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontWeight:(i,c)=>{i.props.fontWeight=c,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStyle:(i,c)=>{i.props.fontStyle=c,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStretch:(i,c)=>{i.props.fontStretch=c,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontSize:(i,c)=>{i.props.fontSize=c,this.invalidateLayoutCache(i)},text:(i,c)=>{i.props.text=c,this.invalidateLayoutCache(i)},textAlign:(i,c)=>{i.props.textAlign=c,this.invalidateLayoutCache(i)},color:(i,c)=>{i.props.color=c},x:(i,c)=>{i.props.x=c,i.elementBounds.valid&&(this.setElementBoundsX(i),!i.renderWindow.valid&&Lm(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},y:(i,c)=>{i.props.y=c,i.elementBounds.valid&&(this.setElementBoundsY(i),!i.renderWindow.valid&&Lm(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},contain:(i,c)=>{i.props.contain=c,this.invalidateLayoutCache(i)},width:(i,c)=>{i.props.width=c,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,c)=>{i.props.height=c,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,c)=>{i.props.offsetY=c,this.invalidateLayoutCache(i)},scrollable:(i,c)=>{i.props.scrollable=c,this.invalidateLayoutCache(i)},scrollY:(i,c)=>{i.props.scrollY=c,this.scheduleUpdateState(i)},letterSpacing:(i,c)=>{i.props.letterSpacing=c,this.invalidateLayoutCache(i)},lineHeight:(i,c)=>{i.props.lineHeight=c,i.resLineHeight=void 0,this.invalidateLayoutCache(i)},maxLines:(i,c)=>{i.props.maxLines=c,this.invalidateLayoutCache(i)},textBaseline:(i,c)=>{i.props.textBaseline=c,this.invalidateLayoutCache(i)},verticalAlign:(i,c)=>{i.props.verticalAlign=c,this.invalidateLayoutCache(i)},overflowSuffix:(i,c)=>{i.props.overflowSuffix=c,this.invalidateLayoutCache(i)},debug:(i,c)=>{i.props.debug=c}}}canRenderFont(i){const{fontFamily:c}=i;return c in this.ssdfFontFamilies||c in this.msdfFontFamilies||c==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(i){return i instanceof ay}addFontFace(i){nt(i instanceof ay);const c=i.fontFamily,f=i.type==="ssdf"?this.ssdfFontFamilies:i.type==="msdf"?this.msdfFontFamilies:void 0;if(!f){console.warn(`Invalid font face type: ${i.type}`);return}let x=f[c];x||(x=new Set,f[c]=x),x.add(i)}createState(i){return{props:i,status:"initialState",updateScheduled:!1,emitter:new Kr,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(i){let{trFontFace:c}=i;const{textH:f,lineCache:x,debugData:w,forceFullLayoutCalc:y}=i;if(w.updateCount++,i.status==="initialState"&&this.setStatus(i,"loading"),c===void 0){if(c=this.resolveFontFace(i.props),i.trFontFace=c,c===void 0){const z=`SdfTextRenderer: Could not resolve font face for family: '${i.props.fontFamily}'`;console.error(z),this.setStatus(i,"failed",new Error(z));return}c.texture.setRenderableOwner(i,!0)}if(c.loaded===!1){c.once("loaded",()=>{this.scheduleUpdateState(i)});return}nt(c.data,"Font face data should be loaded"),nt(c.metrics,"Font face metrics should be loaded");const{text:a,fontSize:r,x:C,y:R,contain:k,width:I,height:m,verticalAlign:S,scrollable:E,overflowSuffix:A,maxLines:N}=i.props,K=k==="both"&&E?i.props.scrollY:0,{renderWindow:Se}=i,Me=c.data.info.size,ue=r/Me;let he=i.resLineHeight;if(he===void 0){const z=i.props.lineHeight;z===void 0?he=HC(c.metrics,r):he=z,i.resLineHeight=he}const oe=he/ue;i.distanceRange=ue*c.data.distanceField.distanceRange;const pe=a.length*J_;let D=i.vertexBuffer;(!D||D.length<pe)&&(D=new Float32Array(pe*2));const ne=i.elementBounds;if(ne.valid||(this.setElementBoundsX(i),this.setElementBoundsY(i),ne.valid=!0),!y&&Se.valid){const z=Se.screen;if(C+z.x1<=ne.x1&&C+z.x2>=ne.x2&&R-K+z.y1<=ne.y1&&R-K+z.y2>=ne.y2){this.setStatus(i,"loaded");return}Se.valid=!1,this.setStatus(i,"loading")}const{offsetY:le,textAlign:me}=i.props;if(!Se.valid){if(!Lm(ne,this.rendererBounds))return;r8(Se,C,R,K,he,k==="both"?ne.y2-ne.y1:0,ne,ue)}const V=Z_(Me,oe,c,S,le,ue,Se,x,f);if(!V){this.setStatus(i,"loaded");return}const{letterSpacing:re}=i.props,H=t8(V.lineIndex,V.sdfX,V.sdfY,a,me,I,m,r,he,re,D,k,x,Se.sdf,c,y,E,A,N);i.bufferUploaded=!1,i.bufferNumFloats=H.bufferNumFloats,i.bufferNumQuads=H.bufferNumQuads,i.vertexBuffer=D,i.renderWindow=Se,w.lastLayoutNumCharacters=H.layoutNumCharacters,w.bufferSize=D.byteLength,H.fullyProcessed&&(i.textW=H.maxX*ue,i.textH=H.numLines*oe*ue),this.setStatus(i,"loaded")}renderQuads(i,c,f,x,w,y){var ne,le;if(!i.vertexBuffer)return;const a=this.stage.renderer;nt(a instanceof by);const{fontSize:r,color:C,contain:R,scrollable:k,zIndex:I,debug:m}=i.props,S=R==="both"&&k?i.props.scrollY:0,{textW:E=0,textH:A=0,distanceRange:N,vertexBuffer:K,bufferUploaded:Se,trFontFace:Me,elementBounds:ue}=i;let{webGlBuffers:he}=i;if(!he){const me=a.glw,V=4*Float32Array.BYTES_PER_ELEMENT,re=me.createBuffer();nt(re),i.webGlBuffers=new VC([{buffer:re,attributes:{a_position:{name:"a_position",size:2,type:me.FLOAT,normalized:!1,stride:V,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:me.FLOAT,normalized:!1,stride:V,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),i.bufferUploaded=!1,nt(i.webGlBuffers),he=i.webGlBuffers}if(!Se){const me=a.glw,V=(he==null?void 0:he.getBuffer("a_textureCoordinate"))??null;me.arrayBufferData(V,K,me.STATIC_DRAW),i.bufferUploaded=!0}if(nt(Me),k&&R==="both"){nt(ue.valid);const me=QR(ue,o8);f.valid?(i.clippingRect.valid=!0,f=RC(f,me,i.clippingRect)):(i.clippingRect.valid=!0,f=_C(me,i.clippingRect))}const oe=new zC(a.glw,a.options,he,this.sdfShader,{transform:c.getFloatArr(),color:XR(C,x),size:r/(((ne=Me.data)==null?void 0:ne.info.size)||0),scrollY:S,distanceRange:N,debug:m.sdfShaderDebug},x,f,{height:A,width:E},0,I,!1,w,y),pe=(le=i.trFontFace)==null?void 0:le.texture;nt(pe);const D=pe.ctxTexture;oe.addTexture(D),oe.length=i.bufferNumFloats,oe.numQuads=i.bufferNumQuads,a.addRenderOp(oe)}setIsRenderable(i,c){var f;super.setIsRenderable(i,c),(f=i.trFontFace)==null||f.texture.setRenderableOwner(i,c)}destroyState(i){var c;super.destroyState(i),(c=i.trFontFace)==null||c.texture.setRenderableOwner(i,!1)}resolveFontFace(i){return this.stage.fontManager.resolveFontFace(this.fontFamilyArray,i,"sdf")}releaseFontFace(i){i.resLineHeight=void 0,i.trFontFace&&(i.trFontFace.texture.setRenderableOwner(i,!1),i.trFontFace=void 0)}invalidateLayoutCache(i){i.renderWindow.valid=!1,i.elementBounds.valid=!1,i.textH=void 0,i.textW=void 0,i.lineCache=[],this.setStatus(i,"loading"),this.scheduleUpdateState(i)}setElementBoundsX(i){const{x:c,contain:f,width:x}=i.props,{elementBounds:w}=i;w.x1=c,w.x2=f!=="none"?c+x:1/0}setElementBoundsY(i){const{y:c,contain:f,height:x}=i.props,{elementBounds:w}=i;w.y1=c,w.y2=f==="both"?c+x:1/0}}function V3(h){return h===""||h==="​"}function u8(h,o,i){if(o.metrics)return o.metrics;const c=h.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${o.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let f;return c.actualBoundingBoxDescent&&c.actualBoundingBoxAscent?f={ascender:c.actualBoundingBoxAscent/i,descender:-c.actualBoundingBoxDescent/i,lineGap:.2}:f={ascender:.8,descender:-.2,lineGap:.2},o.metrics=f,f}const H3=2048;function G3(h,o,i,c,f){const x=h!=="bottom"?.5*o:0;return i*(c-1)+x+Math.max(i,o)+(f||0)}class a8{constructor(o,i){F(this,"_canvas");F(this,"_context");F(this,"_settings");this._canvas=o,this._context=i,this._settings=this.mergeDefaults({})}set settings(o){this._settings=this.mergeDefaults(o)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const o=[this._settings.fontFamily],i=[];for(let c=0,f=o.length;c<f;c++)o[c]==="serif"||o[c]==="sans-serif"?i.push(o[c]):i.push(`"${o[c]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${i.join(",")}`}_load(){if(document.fonts){const o=this._getFontSetting();try{if(!document.fonts.check(o,this._settings.text))return document.fonts.load(o,this._settings.text).catch(i=>{console.warn("[Lightning] Font load error",i,o)}).then(()=>{document.fonts.check(o,this._settings.text)||console.warn("[Lightning] Font not found",o)})}catch{console.warn("[Lightning] Can't check font loading for "+o)}}}calculateRenderInfo(){const o={},i=this.getPrecision(),c=this._settings.paddingLeft*i,f=this._settings.paddingRight*i,x=this._settings.fontSize*i;let w=this._settings.offsetY===null?null:this._settings.offsetY*i;const y=this._settings.w*i,a=this._settings.h*i;let r=this._settings.wordWrapWidth*i;const C=this._settings.cutSx*i,R=this._settings.cutEx*i,k=this._settings.cutSy*i,I=this._settings.cutEy*i,m=(this._settings.letterSpacing||0)*i,S=this._settings.textIndent*i,E=this._settings.trFontFace;this.setFontProperties(),nt(E);const A=u8(this._context,E,x),N=HC(A,x)*i,K=this._settings.lineHeight!==null?this._settings.lineHeight*i:N,Se=this._settings.maxHeight,Me=Se!==null&&K>0?Math.floor(Se/K):0,ue=this._settings.maxLines,he=Me>0&&ue>0?Math.min(Me,ue):Math.max(Me,ue);let oe=y||2048/this.getPrecision(),pe=oe-c;if(pe<10&&(oe+=10-pe,pe=10),r||(r=pe),this._settings.textOverflow&&!this._settings.wordWrap){let re;switch(this._settings.textOverflow){case"clip":re="";break;case"ellipsis":re=this._settings.overflowSuffix;break;default:re=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,r-S,re)}let D;if(this._settings.wordWrap)D=this.wrapText(this._settings.text,r,m,S);else{D={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const re=D.l.length;for(let H=0;H<re-1;H++)D.n.push(H)}let ne=D.l;if(he&&ne.length>he){const re=ne.slice(0,he);let H=null;if(this._settings.overflowSuffix){const Je=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,$e=this.wrapText(re[re.length-1],r-Je,m,S);re[re.length-1]=`${$e.l[0]}${this._settings.overflowSuffix}`,H=[$e.l.length>1?$e.l[1]:""]}else H=[""];let z;const se=ne.length;let we=0;const Fe=D.n.length;for(z=he;z<se;z++)H[we]+=`${H[we]?" ":""}${ne[z]}`,z+1<Fe&&D.n[z+1]&&we++;o.remainingText=H.join(`
`),o.moreTextLines=!0,ne=re}else o.moreTextLines=!1,o.remainingText="";let le=0;const me=[];for(let re=0;re<ne.length;re++){const H=this.measureText(ne[re],m)+(re===0?S:0);me.push(H),le=Math.max(le,H)}o.lineWidths=me,y||(oe=le+c+f,pe=le),this._settings.wordWrap&&y>le&&this._settings.textAlign==="left"&&ne.length===1&&(oe=le+c+f);let V;return a?V=a:V=G3(this._settings.textBaseline,x,K,ne.length,w),w===null&&(w=x),o.w=oe,o.h=V,o.lines=ne,o.precision=i,oe||(oe=1),V||(V=1),(C||R)&&(oe=Math.min(oe,R-C)),(k||I)&&(V=Math.min(V,I-k)),o.width=oe,o.innerWidth=pe,o.height=V,o.fontSize=x,o.cutSx=C,o.cutSy=k,o.cutEx=R,o.cutEy=I,o.lineHeight=K,o.defLineHeight=N,o.lineWidths=me,o.offsetY=w,o.paddingLeft=c,o.paddingRight=f,o.letterSpacing=m,o.textIndent=S,o.metrics=A,o}draw(o,i){const c=this.getPrecision(),f=(i==null?void 0:i.lines)||o.lines,x=(i==null?void 0:i.lineWidths)||o.lineWidths,w=i?G3(this._settings.textBaseline,o.fontSize,o.lineHeight,i.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*c):o.height;this._canvas.width=Math.min(Math.ceil(o.width+this._settings.textRenderIssueMargin),H3),this._canvas.height=Math.min(Math.ceil(w),H3),this.setFontProperties(),o.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(o.cutSx||o.cutSy)&&this._context.translate(-o.cutSx,-o.cutSy);let y,a;const r=[],{metrics:C}=o,R=C?C.ascender*o.fontSize:o.fontSize,k=(C.ascender-C.descender)*o.fontSize;for(let m=0,S=f.length;m<S;m++)y=m===0?o.textIndent:0,a=m*o.lineHeight+R,this._settings.verticalAlign=="middle"?a+=(o.lineHeight-k)/2:this._settings.verticalAlign=="bottom"&&(a+=o.lineHeight-k),this._settings.textAlign==="right"?y+=o.innerWidth-x[m]:this._settings.textAlign==="center"&&(y+=(o.innerWidth-x[m])/2),y+=o.paddingLeft,r.push({text:f[m],x:y,y:a,w:x[m]});if(this._settings.highlight){const m=this._settings.highlightColor,S=this._settings.highlightHeight*c||o.fontSize*1.5,E=this._settings.highlightOffset*c,A=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*c:o.paddingLeft,N=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*c:o.paddingRight;this._context.fillStyle=_m(m);for(let K=0;K<r.length;K++){const Se=r[K];this._context.fillRect(Se.x-A,Se.y-o.offsetY+E,Se.w+N+A,S)}}let I=null;this._settings.shadow&&(I=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=_m(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*c,this._context.shadowOffsetY=this._settings.shadowOffsetY*c,this._context.shadowBlur=this._settings.shadowBlur*c),this._context.fillStyle=_m(this._settings.textColor);for(let m=0,S=r.length;m<S;m++){const E=r[m];if(o.letterSpacing===0)this._context.fillText(E.text,E.x,E.y);else{const A=E.text.split("");let N=E.x;for(let K=0,Se=A.length;K<Se;K++)this._context.fillText(A[K],N,E.y),N+=this.measureText(A[K],o.letterSpacing)}}I&&(this._context.shadowColor=I[0],this._context.shadowOffsetX=I[1],this._context.shadowOffsetY=I[2],this._context.shadowBlur=I[3]),(o.cutSx||o.cutSy)&&this._context.translate(o.cutSx,o.cutSy)}wrapWord(o,i,c){const f=this._context.measureText(c).width,x=o.length,w=this._context.measureText(o).width;if(w<=i)return o;let y=Math.floor(i*x/w),a=this._context.measureText(o.substring(0,y)).width+f;if(a>i)for(;y>0&&(a=this._context.measureText(o.substring(0,y)).width+f,a>i);)y-=1;else for(;y<x;)if(a=this._context.measureText(o.substring(0,y)).width+f,a<i)y+=1;else{y-=1;break}return o.substring(0,y)+(i>=f?c:"")}wrapText(o,i,c,f=0){const x=/ |\u200B/g,w=o.split(/\r?\n/g);let y=[];const a=[];for(let r=0;r<w.length;r++){const C=[];let R="",k=i-f;const I=w[r].split(x),m=w[r].match(x)||[];for(let S=0;S<I.length;S++){const E=m[S-1]||"",A=I[S],N=this.measureText(A,c),K=V3(E)?N:N+this.measureText(E,c);S===0||K>k?(S>0&&(C.push(R),R=""),R+=A,k=i-N-(S===0?f:0)):(k-=K,R+=E+A)}C.push(R),R="",y=y.concat(C),r<w.length-1&&a.push(y.length)}return{l:y,n:a}}measureText(o,i=0){return i?o.split("").reduce((c,f)=>V3(f)?c:c+this._context.measureText(f).width+i,0):this._context.measureText(o).width}mergeDefaults(o){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...o}}}const X3=typeof self>"u"?globalThis:self;var TC;const W3=((TC=X3.document)==null?void 0:TC.fonts)||X3.fonts;function l8(h){const{fontFamily:o,fontStyle:i,fontWeight:c,fontStretch:f,fontSize:x}=h;return[i,c,f,`${x}px`,o].join(" ")}class K3 extends Ty{constructor(i){super(i);F(this,"canvas");F(this,"context");F(this,"fontFamilies",{});F(this,"fontFamilyArray",[this.fontFamilies]);F(this,"type","canvas");F(this,"loadFont",i=>{const c=l8(i.props),f=this.stage.fontManager.resolveFontFace(this.fontFamilyArray,i.props,"canvas");if(nt(f,`Could not resolve font face for ${c}`),i.fontInfo={fontFace:f,cssString:c,loaded:!1},!i.fontInfo.loaded){W3.load(c).then(this.onFontLoaded.bind(this,i,c)).catch(this.onFontLoadError.bind(this,i,c));return}});typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let c=this.canvas.getContext("2d",{willReadFrequently:!0});c||(this.canvas=document.createElement("canvas"),c=this.canvas.getContext("2d",{willReadFrequently:!0})),nt(c),this.context=c,this.addFontFace(new lh({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(i,c)=>{i.props.fontFamily=c,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontWeight:(i,c)=>{i.props.fontWeight=c,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStyle:(i,c)=>{i.props.fontStyle=c,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStretch:(i,c)=>{i.props.fontStretch=c,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontSize:(i,c)=>{i.props.fontSize=c,i.fontInfo=void 0,this.invalidateLayoutCache(i)},text:(i,c)=>{i.props.text=c,this.invalidateLayoutCache(i)},textAlign:(i,c)=>{i.props.textAlign=c,this.invalidateLayoutCache(i)},color:(i,c)=>{i.props.color=c,this.invalidateLayoutCache(i)},x:(i,c)=>{i.props.x=c},y:(i,c)=>{i.props.y=c},contain:(i,c)=>{i.props.contain=c,this.invalidateLayoutCache(i)},width:(i,c)=>{i.props.width=c,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,c)=>{i.props.height=c,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,c)=>{i.props.offsetY=c,this.invalidateLayoutCache(i)},scrollY:(i,c)=>{i.props.scrollY=c},letterSpacing:(i,c)=>{i.props.letterSpacing=c,this.invalidateLayoutCache(i)},lineHeight:(i,c)=>{i.props.lineHeight=c,this.invalidateLayoutCache(i)},maxLines:(i,c)=>{i.props.maxLines=c,this.invalidateLayoutCache(i)},textBaseline:(i,c)=>{i.props.textBaseline=c,this.invalidateLayoutCache(i)},verticalAlign:(i,c)=>{i.props.verticalAlign=c,this.invalidateLayoutCache(i)},overflowSuffix:(i,c)=>{i.props.overflowSuffix=c,this.invalidateLayoutCache(i)}}}canRenderFont(i){return!0}isFontFaceSupported(i){return i instanceof lh}addFontFace(i){nt(i instanceof lh);const c=i.fontFamily;c!=="sans-serif"&&W3.add(i.fontFace);let f=this.fontFamilies[c];f||(f=new Set,this.fontFamilies[c]=f),f.add(i)}createState(i,c){return{node:c,props:i,status:"initialState",updateScheduled:!1,emitter:new Kr,textureNode:void 0,lightning2TextRenderer:new a8(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(i){if(i.status==="initialState"&&this.setStatus(i,"loading"),i.status!=="loaded"){if(!i.fontInfo)return this.loadFont(i);i.fontInfo.loaded&&(i.renderInfo||(i.renderInfo=this.calculateRenderInfo(i),i.textH=i.renderInfo.lineHeight*i.renderInfo.lines.length,i.textW=i.renderInfo.width,this.renderSingleCanvasPage(i)))}}renderSingleCanvasPage(i){nt(i.renderInfo);const c=i.node,f=this.stage.txManager.createTexture("ImageTexture",{premultiplyAlpha:!0,src:(function(x,w){return nt(w),x.draw(w,{lines:w.lines,lineWidths:w.lineWidths}),this.canvas.width===0||this.canvas.height===0?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}).bind(this,i.lightning2TextRenderer,i.renderInfo)});if(i.textureNode)i.textureNode.texture=f,i.textureNode.alpha=N3(i.props.color);else{const x=this.stage.createNode({parent:c,texture:f,autosize:!0,alpha:N3(i.props.color)});i.textureNode=x}this.setStatus(i,"loaded")}calculateRenderInfo(i){var c;return i.lightning2TextRenderer.settings={text:i.props.text,textAlign:i.props.textAlign,fontFamily:i.props.fontFamily,trFontFace:(c=i.fontInfo)==null?void 0:c.fontFace,fontSize:i.props.fontSize,fontStyle:[i.props.fontStretch,i.props.fontStyle,i.props.fontWeight].join(" "),textColor:Wl(i.props.color),offsetY:i.props.offsetY,wordWrap:i.props.contain!=="none",wordWrapWidth:i.props.contain==="none"?void 0:i.props.width,letterSpacing:i.props.letterSpacing,lineHeight:i.props.lineHeight??null,maxLines:i.props.maxLines,maxHeight:i.props.contain==="both"?i.props.height-i.props.offsetY:null,textBaseline:i.props.textBaseline,verticalAlign:i.props.verticalAlign,overflowSuffix:i.props.overflowSuffix,w:i.props.contain!=="none"?i.props.width:void 0},i.renderInfo=i.lightning2TextRenderer.calculateRenderInfo(),i.renderInfo}renderQuads(){}destroyState(i){i.status!=="destroyed"&&(super.destroyState(i),i.textureNode&&(i.textureNode.destroy(),delete i.textureNode),delete i.renderInfo)}invalidateLayoutCache(i){i.renderInfo=void 0,this.setStatus(i,"loading"),this.scheduleUpdateState(i)}onFontLoaded(i,c){var f;c!==((f=i.fontInfo)==null?void 0:f.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,this.scheduleUpdateState(i))}onFontLoadError(i,c,f){var x;c!==((x=i.fontInfo)==null?void 0:x.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${i.fontInfo.cssString}'`,f),this.scheduleUpdateState(i))}}const GC={isWhite:!0,a:1,r:255,g:255,b:255};function Um(h){if(h===4294967295)return GC;const o=(h>>>24&255)/255,i=h>>>16&255&255,c=h>>>8&255&255,f=h&255&255;return{isWhite:!1,a:o,r:f,g:c,b:i}}function XC(h){if(h===4294967295)return GC;const o=h>>>24&255,i=h>>>16&255&255,c=h>>>8&255&255,f=(h&255&255)/255;return{isWhite:!1,r:o,g:i,b:c,a:f}}function zu({a:h,r:o,g:i,b:c}){return`rgba(${o},${i},${c},${h})`}class f8 extends FC{constructor(){super(...arguments);F(this,"image");F(this,"tintCache")}async load(){this.textureSource.setState("loading");try{const i=await this.onLoadRequest();this.textureSource.setState("loaded",i),this.textureSource.freeTextureData(),this.updateMemSize()}catch(i){throw this.textureSource.setState("failed",i),this.textureSource.freeTextureData(),i}}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0),this.textureSource.freeTextureData()}updateMemSize(){const i=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:c,height:f}=this.textureSource.dimensions;this.setTextureMemUse(c*f*i)}}hasImage(){return this.image!==void 0}getImage(i){var w;const c=this.image;if(nt(c,"Attempt to get unloaded image texture"),i.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),c;const f=zu(i);if(((w=this.tintCache)==null?void 0:w.key)===f)return this.tintCache.image;const x=this.tintTexture(c,f);return this.tintCache={key:f,image:x},this.updateMemSize(),x}tintTexture(i,c){const{width:f,height:x}=i,w=document.createElement("canvas");w.width=f,w.height=x;const y=w.getContext("2d");return y&&(y.fillStyle=c,y.globalCompositeOperation="copy",y.fillRect(0,0,f,x),y.globalCompositeOperation="multiply",y.drawImage(i,0,0,f,x,0,0,f,x),y.globalCompositeOperation="destination-in",y.drawImage(i,0,0,f,x,0,0,f,x)),w}async onLoadRequest(){var c,f;nt((f=(c=this.textureSource)==null?void 0:c.textureData)==null?void 0:f.data,"Texture data is null");const{data:i}=this.textureSource.textureData;if(i instanceof ImageData){const x=document.createElement("canvas");x.width=i.width,x.height=i.height;const w=x.getContext("2d");return w&&w.putImageData(i,0,0),this.image=x,{width:i.width,height:i.height}}else if(typeof ImageBitmap<"u"&&i instanceof ImageBitmap||i instanceof HTMLImageElement)return this.image=i,{width:i.width,height:i.height};return{width:0,height:0}}}function c8(h){var o,i;if(h.shader instanceof Dh){const c=h.shader.shType;if(c===I_)return((o=h.shaderProps)==null?void 0:o.radius)??0;if(c==="DynamicShader"){const f=(i=h.shaderProps)==null?void 0:i.effects;if(f){const x=f.find(w=>{var y;return w.type==="radius"&&((y=w==null?void 0:w.props)==null?void 0:y.radius)});return x&&x.type==="radius"&&x.props.radius||0}}}return 0}function Tl(h,o=""){var i;if(h.shader instanceof Dh&&h.shader.shType==="DynamicShader"){const f=(i=h.shaderProps)==null?void 0:i.effects;if(f&&f.length){const x=f.find(w=>w.type===`border${o}`&&w.props&&w.props.width);return x&&x.props}}}function Y3(h,o,i,c,f){if(Object.getPrototypeOf(this).roundRect)this.roundRect(h,o,i,c,f);else{const w=a=>{const r=Math.min(i/2,c/2),C=a.topLeft+a.topRight+a.bottomRight+a.bottomLeft;if(C>i||C>c){const R=r/Math.max(a.topLeft,a.topRight,a.bottomRight,a.bottomLeft);a.topLeft*=R,a.topRight*=R,a.bottomRight*=R,a.bottomLeft*=R}},y=typeof f=="number"?{topLeft:f,topRight:f,bottomRight:f,bottomLeft:f}:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,...f};w(y),this.moveTo(h+y.topLeft,o),this.lineTo(h+i-y.topRight,o),this.ellipse(h+i-y.topRight,o+y.topRight,y.topRight,y.topRight,0,1.5*Math.PI,2*Math.PI),this.lineTo(h+i,o+c-y.bottomRight),this.ellipse(h+i-y.bottomRight,o+c-y.bottomRight,y.bottomRight,y.bottomRight,0,0,.5*Math.PI),this.lineTo(h+y.bottomLeft,o+c),this.ellipse(h+y.bottomLeft,o+c-y.bottomLeft,y.bottomLeft,y.bottomLeft,0,.5*Math.PI,Math.PI),this.lineTo(h,o+y.topLeft),this.ellipse(h+y.topLeft,o+y.topLeft,y.topLeft,y.topLeft,0,Math.PI,1.5*Math.PI)}}function Qd(h,o,i,c,f,x=0,w,y){if(!x)return;let a,r=0,C,R=0;switch(y){case"Top":a=o,r=i,C=c+o,R=i;break;case"Right":a=o+c,r=i,C=o+c,R=i+f;break;case"Bottom":a=o,r=i+f,C=o+c,R=i+f;break;case"Left":a=o,r=i,C=o,R=i+f;break}h.beginPath(),h.lineWidth=x,h.strokeStyle=zu(XC(w??0)),h.moveTo(a,r),h.lineTo(C,R),h.stroke()}class d8 extends jC{constructor(i){super(i);F(this,"context");F(this,"canvas");F(this,"pixelRatio");F(this,"clearColor");F(this,"renderToTextureActive",!1);F(this,"activeRttNode",null);F(this,"defShaderCtr");this.mode="canvas",this.shManager.renderer=this;const{canvas:c,pixelRatio:f,clearColor:x}=i;this.canvas=c,this.context=c.getContext("2d"),this.pixelRatio=f,this.clearColor=x?O3(x):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new Dh("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const i=this.context;if(this.clearColor){const[c,f,x,w]=this.clearColor;i.fillStyle=`rgba(${c}, ${f}, ${x}, ${w/255})`,i.fillRect(0,0,this.canvas.width,this.canvas.height)}i.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(i){const c=this.context,{tx:f,ty:x,width:w,height:y,alpha:a,colorTl:r,colorTr:C,colorBr:R,ta:k,tb:I,tc:m,td:S,clippingRect:E}=i;let A=i.texture,N,K;const Se=A==null?void 0:A.type;if(nt(Se,"Texture type is not defined"),Se!==sn.image&&Se!==sn.color&&Se!==sn.subTexture&&Se!==sn.noise||A&&(A instanceof Gl&&(K=A.props,A=A.parentTexture),N=A.ctxTexture,A.state==="freed"||A.state!=="loaded"))return;const Me=Um(r),ue=k!==1,he=E.width!==0&&E.height!==0,oe=r!==C||r!==R,pe=!!i.shader,D=pe?c8(i):0,ne=pe?Tl(i):void 0;if((ue||he||D)&&c.save(),he){const le=new Path2D,{x:me,y:V,width:re,height:H}=E;le.rect(me,V,re,H),c.clip(le)}if(ue){const le=this.pixelRatio;c.setTransform(k,m,I,S,f*le,x*le),c.scale(le,le),c.translate(-f,-x)}if(D){const le=new Path2D;Y3.call(le,f,x,w,y,D),c.clip(le)}if((Se===sn.image||Se===sn.subTexture||Se===sn.noise)&&N){const le=N.getImage(Me);if(c.globalAlpha=Me.a??a,K)c.drawImage(le,K.x,K.y,K.width,K.height,f,x,w,y);else try{c.drawImage(le,f,x,w,y)}catch{}c.globalAlpha=1}else if(Se===sn.color&&oe){let le=f,me=x,V;r===C?(le=f,me=x+y,V=Um(R)):(le=f+w,me=x,V=Um(C));const re=c.createLinearGradient(f,x,le,me);re.addColorStop(0,zu(Me)),re.addColorStop(1,zu(V)),c.fillStyle=re,c.fillRect(f,x,w,y)}else Se===sn.color&&(c.fillStyle=zu(Me),c.fillRect(f,x,w,y));if(ne&&ne.width){const le=ne.width,me=ne.width/2,V=zu(XC(ne.color??0));c.beginPath(),c.lineWidth=le,c.strokeStyle=V,c.globalAlpha=a,D?(Y3.call(c,f+me,x+me,w-le,y-le,D),c.stroke()):c.strokeRect(f+me,x+me,w-le,y-le),c.globalAlpha=1}else if(pe){const le=Tl(i,"Top"),me=Tl(i,"Right"),V=Tl(i,"Bottom"),re=Tl(i,"Left");le&&Qd(c,f,x,w,y,le.width,le.color,"Top"),me&&Qd(c,f,x,w,y,me.width,me.color,"Right"),V&&Qd(c,f,x,w,y,V.width,V.color,"Bottom"),re&&Qd(c,f,x,w,y,re.width,re.color,"Left")}(ue||he||D)&&c.restore()}createCtxTexture(i){return new f8(this.txMemManager,i)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(i){}renderToTexture(i){}getBufferInfo(){return null}getQuadCount(){return null}updateClearColor(i){this.clearColor=i?O3(i):void 0}}const Pl={alpha:h=>h===1?null:{prop:"opacity",value:`${h}`},x:h=>({prop:"left",value:`${h}px`}),y:h=>({prop:"top",value:`${h}px`}),width:h=>h===0?null:{prop:"width",value:`${h}px`},height:h=>h===0?null:{prop:"height",value:`${h}px`},fontSize:h=>h===0?null:{prop:"font-size",value:`${h}px`},lineHeight:h=>h===0?null:{prop:"line-height",value:`${h}px`},zIndex:()=>"z-index",fontFamily:()=>"font-family",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:h=>h===!1?null:{prop:"overflow",value:h?"hidden":"visible"},rotation:h=>h===0?null:{prop:"transform",value:`rotate(${h}rad)`},scale:h=>h===1?null:{prop:"transform",value:`scale(${h})`},scaleX:h=>h===1?null:{prop:"transform",value:`scaleX(${h})`},scaleY:h=>h===1?null:{prop:"transform",value:`scaleY(${h})`},color:h=>h===0?null:{prop:"color",value:WC(h)}},WC=h=>{const o=(h&255)/255,i=h>>8&255,c=h>>16&255;return`rgba(${h>>24&255},${c},${i},${o})`},ly={id:"test-id"},h8=new Set([...Object.keys(Pl),...Object.keys(ly),"src","parent","data"]);class p8{constructor(o,i){F(this,"root",null);F(this,"canvas",null);F(this,"height",1080);F(this,"width",1920);F(this,"scaleX",1);F(this,"scaleY",1);if(Yu())return;if(!i)throw new Error("settings is required");this.height=Math.ceil(i.appHeight??1080/(i.deviceLogicalPixelRatio??1)),this.width=Math.ceil(i.appWidth??1920/(i.deviceLogicalPixelRatio??1)),this.scaleX=i.deviceLogicalPixelRatio??1,this.scaleY=i.deviceLogicalPixelRatio??1,this.canvas=o,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(o,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(o),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const o=this.canvas.getBoundingClientRect(),i=document.documentElement.scrollTop+o.top,c=document.documentElement.scrollLeft+o.left;this.root.id="root",this.root.style.left=`${c}px`,this.root.style.top=`${i}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(o,i){const c=document.createElement("div");c.style.position="absolute",c.id=o.toString();for(const f in i)this.updateNodeProperty(c,f,i[f],i);return c}createNode(o){const i=this.createDiv(o.id,o.props);return i.node=o,o.div=i,o.on("inViewport",()=>i.setAttribute("state","inViewport")),o.on("inBounds",()=>i.setAttribute("state","inBounds")),o.on("outOfBounds",()=>i.setAttribute("state","outOfBounds")),this.createProxy(o,i)}createTextNode(o){const i=this.createDiv(o.id,o.props);return i.node=o,o.div=i,this.createProxy(o,i)}createProxy(o,i){h8.forEach(x=>{let w=Object.getOwnPropertyDescriptor(o,x);if(w===void 0){const y=Object.getPrototypeOf(o);w=Object.getOwnPropertyDescriptor(y,x)}w!==void 0&&Object.defineProperty(o,x,{get(){var y;return(y=w==null?void 0:w.get)==null?void 0:y.call(o)},set:y=>{var a;(a=w==null?void 0:w.set)==null||a.call(o,y),this.updateNodeProperty(i,x,y,o.props)},configurable:!0,enumerable:!0})});const c=o.destroy;Object.defineProperty(o,"destroy",{value:()=>{this.destroyNode(o.id),c.call(o)}});const f=o.animate;return Object.defineProperty(o,"animate",{value:(x,w)=>{const y=f.call(o,x,w),a=y.start.bind(y);return y.start=()=>(this.animateNode(i,x,w),a()),y}}),o}destroyNode(o){const i=document.getElementById(o.toString());i==null||i.remove()}updateNodeProperty(o,i,c,f){var x;if(!(this.root===null||c===void 0||c===null)){if(i==="parent"){const w=c.id;if(w===1){this.root.appendChild(o);return}const y=document.getElementById(w.toString());y==null||y.appendChild(o);return}if(i==="text"){o.innerHTML=String(c),o.style.visibility="hidden";return}if(i==="src"&&c){o.setAttribute("data-src",String(c));return}if(i==="rtt"&&c){o.setAttribute("data-rtt",String(c));return}if(Pl[i]){const w=(x=Pl[i])==null?void 0:x.call(Pl,c);if(w===null)return;if(typeof w=="string"){o.style.setProperty(w,String(c));return}if(typeof w=="object"){let y=w.value;if(i==="x"){const a=f.mountX,r=f.width;a&&(y=`${parseInt(y)-r*a}px`)}else if(i==="y"){const a=f.mountY,r=f.height;a&&(y=`${parseInt(y)-r*a}px`)}o.style.setProperty(w.prop,y)}return}if(ly[i]){const w=ly[i];if(!w)return;o.setAttribute(String(w),String(c));return}if(i==="data"){for(const w in c){const y=c[w];y===void 0?o.removeAttribute(`data-${w}`):o.setAttribute(`data-${w}`,String(y))}return}}}animateNode(o,i,c){const{duration:f=1e3,delay:x=0}=c,{x:w,y,width:a,height:r,alpha:C=1,rotation:R=0,scale:k=1,color:I,mountX:m,mountY:S}=i;function E(){setTimeout(()=>{o.style.top=`${y-r*S}px`,o.style.left=`${w-a*m}px`,o.style.width=`${a}px`,o.style.height=`${r}px`,o.style.opacity=`${C}`,o.style.rotate=`${R}rad`,o.style.scale=`${k}`,o.style.color=WC(I)},f)}setTimeout(E,x)}}const KC=50,q3={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},g8={low:.66666667,medium:.85,high:1,retina:2},m8=()=>{const h=Ji.stage;ni.get("fonts",[]).forEach(o=>{o.type==="sdf"||o.type==="msdf"?(!o.png&&o.file&&(o.png=o.file.replace(/\.[^.]+$/,`.${o.type}.png`)),!o.json&&o.file&&(o.json=o.file.replace(/\.[^.]+$/,`.${o.type}.json`)),h.fontManager.addFontFace(new ay(o.type,{fontFamily:o.family,descriptors:{},atlasUrl:o.png,atlasDataUrl:o.json,stage:h,metrics:o.metrics}))):o.type==="web"&&h.fontManager.addFontFace(new lh({fontFamily:o.family,fontUrl:o.file,descriptors:{},metrics:o.metrics}))})},y8=()=>{const h=Ji.stage;ni.get("shaders",[]).forEach(o=>{h.shManager.registerShaderType(o.name,o.type)}),ni.get("effects",[]).forEach(o=>{h.shManager.registerShaderType(o.name,o.type)})};let Ji={};const v8=h=>{const o="renderMode"in h?h.renderMode:"webgl";if(o==="webgl")return by;if(o==="canvas")return d8},x8=h=>{const o="renderMode"in h?h.renderMode:"webgl";if(o==="webgl")return[s8,K3];if(o==="canvas")return[K3]},w8=h=>{const o={max:200,target:.8,cleanupInterval:5e3,baseline:25,strict:!1,..."gpuMemory"in h?h.gpuMemory:{}};return{criticalThreshold:o.max*1024*1024,targetThresholdLevel:o.target,cleanupInterval:o.cleanupInterval,baselineMemoryAllocation:o.baseline*1024*1024,doNotExceedCriticalThreshold:o.strict}},S8=(h,o,i={})=>{Ji=new F_({appWidth:i.w||1920,appHeight:i.h||1080,fpsUpdateInterval:i.fpsInterval||1e3,devicePhysicalPixelRatio:g8[i.renderQuality]||i.renderQuality||1,deviceLogicalPixelRatio:i.pixelRatio||q3[i.screenResolution]||q3[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in i?i.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:i.canvasColor&&Vu.normalize(i.canvasColor)||0,inspector:i.inspector===!0?p8:void 0,boundsMargin:i.viewportMargin||0,renderEngine:v8(i),fontEngines:x8(i),canvas:i.canvas,textureProcessingTimeLimit:i.textureProcessingTimeLimit,textureMemory:w8(i),createImageBitmapSupport:"auto",targetFPS:"maxFPS"in i?i.maxFPS:0,...i.advanced||{}},o);const c=()=>{let f=h();f.quit=()=>{Mt.info("Closing App"),f.destroy(),f=null,Ji=null}};return y8(),m8(),c(),Ji},T8=(h,o)=>{if(h===void 0)return{start:0,end:0,oppositeStart:0,oppositeEnd:0};if(typeof h=="number")return{start:h,end:h,oppositeStart:h,oppositeEnd:h};if(wo(h)===!0&&(h=So(h)),typeof h=="object"){const{top:i=void 0,right:c=void 0,bottom:f=void 0,left:x=void 0,x:w=0,y=0}=h;return o==="vertical"?{start:i!==void 0?i:y,end:f!==void 0?f:y,oppositeStart:x!==void 0?x:w,oppositeEnd:c!==void 0?c:w}:{start:x!==void 0?x:w,end:c!==void 0?c:w,oppositeStart:i!==void 0?i:y,oppositeEnd:f!==void 0?f:y}}return{start:0,end:0,oppositeStart:0,oppositeEnd:0}},C8=function(h){const o=h.direction==="vertical"?"y":"x",i=h.direction==="vertical"?"x":"y",c=h.direction==="vertical"?"mountX":"mountY",f=h.direction==="vertical"?"height":"width",x=h.direction==="vertical"?"width":"height",w=T8(h.padding,h.direction);let y=w.start;const a=this.node.children,r=a.length,C=this.children;let R=0;const k=h.gap||0;for(let m=0;m<r;m++){if(C[m]!==void 0&&C[m].props.raw.show===!1)continue;const S=a[m];S[o]=y,S[i]=w.oppositeStart,f==="width"?y+=S.width+(S.width!==("text"in S?1:0)?k:0):y+="text"in S?S.width>1?S.height+k:0:S.height!==0?S.height+k:0,R=Math.max(R,S[x]+w.oppositeStart+w.oppositeEnd)}this.node[f]=y-k+w.end,this.node[x]=R;const I={start:0,end:1,center:.5}[h["align-items"]||"start"];if(I!==0)for(let m=0;m<r;m++){const S=a[m];S[i]=R*I,S[c]=I}h["@updated"]!==void 0&&h["@updated"]({w:this.node.width,h:this.node.height},this),this.config.parent&&this.config.parent.props.__layout===!0&&this.config.parent.triggerLayout(this.config.parent.props)},Q3=h=>h!==null&&typeof h=="object"&&"transition"in h,wo=h=>typeof h=="string"&&h.startsWith("{")&&h.endsWith("}"),So=h=>JSON.parse(h.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),bu=function(h,o){return typeof h!="string"?h:h.indexOf("%")===h.length-1?this.element.config.parent&&(this.element.config.parent.node[o]||0)*(parseFloat(h)/100)||0:h},fy=h=>{if(typeof h!="object"||h===null)return h;if(h.constructor===Object){if("value"in h)return h.value;if("transition"in h)return fy(h.transition)}return h},b8={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};let cy=null;const k8={set parent(h){this.props.parent=h==="root"?Ji.root:h.node},set rotation(h){this.props.rotation=h*(Math.PI/180)},set w(h){this.props.width=bu.call(this,h,"width")},set width(h){this.props.width=bu.call(this,h,"width")},set h(h){this.props.height=bu.call(this,h,"height")},set height(h){this.props.height=bu.call(this,h,"height")},set x(h){this.props.x=bu.call(this,h,"width")},set y(h){this.props.y=bu.call(this,h,"height")},set z(h){this.props.zIndex=h},set zIndex(h){this.props.zIndex=h},set color(h){typeof h=="string"&&h.startsWith("{")===!1?this.props.color=Vu.normalize(h):(typeof h=="object"||wo(h)===!0&&(h=So(h)))&&(this.props.color=0,Object.entries(h).forEach(o=>{this.props[b8[o[0]]]=Vu.normalize(o[1])}))},set src(h){this.props.src=h,this.raw.color===void 0&&(this.props.color=this.props.src?4294967295:0),!("w"in this.raw)&&!("w"in this.raw)&&!("h"in this.raw)&&!("height"in this.raw)&&(this.props.autosize=!0)},set texture(h){this.props.texture=h,this.raw.color===void 0&&h==null?this.props.color=0:this.raw.color===void 0&&(this.props.color=4294967295)},set fit(h){const o={};if(h==="cover"||h==="contain"){this.props.textureOptions={resizeMode:{type:h}};return}(typeof h=="object"||wo(h)===!0&&(h=So(h)))&&(o.type=h.type||"cover",typeof h.position=="number"&&(o.clipY=o.clipX=h.position),typeof h.position=="object"&&(o.clipX="x"in h.position?h.position.x:null,o.clipY="y"in h.position?h.position.y:null),this.props.textureOptions={resizeMode:o})},set rtt(h){this.props.rtt=h,this.raw.color===void 0&&(this.props.color=h===!0?4294967295:0)},set mount(h){typeof h=="object"||wo(h)===!0&&(h=So(h))?("x"in h&&(this.props.mountX=h.x),"y"in h&&(this.props.mountY=h.y)):(this.props.mountX=h,this.props.mountY=h)},set pivot(h){typeof h=="object"||wo(h)===!0&&(h=So(h))?("x"in h&&(this.props.pivotX=h.x),"y"in h&&(this.props.pivotY=h.y)):(this.props.pivotX=h,this.props.pivotY=h)},set scale(h){typeof h=="object"||wo(h)===!0&&(h=So(h))?("x"in h&&(this.props.scaleX=h.x),"y"in h&&(this.props.scaleY=h.y)):this.props.scale=h},set show(h){h?this.props.alpha=this.raw.alpha!==void 0?this.raw.alpha:1:this.props.alpha=0},set alpha(h){(this.raw.show===void 0||this.raw.show==!0)&&(this.props.alpha=h)},set shader(h){h!==null?this.props.shader=Ji.createShader(h.type,h.props):this.props.shader=Ji.createShader("DefaultShader")},set effects(h){for(let o=0;o<h.length;o++)h[o].props&&h[o].props.color&&(h[o].props.color=Vu.normalize(h[o].props.color));this.element.node===void 0&&(this.props.shader=Ji.createShader("DynamicShader",{effects:h.map(o=>Ji.createEffect(o.type,o.props))}))},set clipping(h){this.props.clipping=h},set overflow(h){this.props.clipping=!h},set font(h){this.props.fontFamily=h},set size(h){this.props.fontSize=h},set wordwrap(h){Mt.warn("The wordwrap attribute is deprecated, use maxwidth instead"),this.props.width=h,this.props.contain="width"},set maxwidth(h){this.props.width=h,this.props.contain="width"},set maxheight(h){this.props.height=h,this.props.contain="both"},set contain(h){this.props.contain=h},set maxlines(h){this.props.maxLines=h},set textoverflow(h){this.props.overflowSuffix=h===!1?" ":h===!0?void 0:h},set letterspacing(h){this.props.letterSpacing=h||1},set lineheight(h){this.props.lineHeight=h},set align(h){this.props.textAlign=h},set content(h){this.props.text=""+h},set placement(h){let o,i;typeof h=="object"||wo(h)===!0&&(h=So(h))?("x"in h&&(o=h.x),"y"in h&&(i=h.y)):h==="center"||h==="right"?o=h:i=h,o==="center"?(this.x="50%",this.props.mountX=.5):o==="right"&&(this.x="100%",this.props.mountX=1),i==="middle"?(this.y="50%",this.props.mountY=.5):i==="bottom"&&(this.y="100%",this.props.mountY=1)},set"inspector-data"(h){(typeof h=="object"||wo(h)===!0&&(h=So(h)))&&(this.props.data=h)}},A8={populate(h){const o=h;o.node=this.config.node,o[fe.isSlot]===!0&&(this[fe.isSlot]=!0),this.props.element=this,this.props.parent=o.parent||this.config.parent,delete o.parent,this.props.raw=h;const i=Object.keys(o),c=i.length;for(let f=0;f<c;f++){const x=i[f],w=o[x];w!==void 0&&(this.props[x]=fy(w))}this.props.props.color===void 0&&!("__textnode"in o)&&(this.props.props.color=0),this.node=o.__textnode?Ji.createTextNode({...cy,...this.props.props}):Ji.createNode(this.props.props),o["@loaded"]!==void 0&&typeof o["@loaded"]=="function"&&this.node.on("loaded",(f,{type:x,dimensions:w})=>{o["@loaded"]({w:w.width,h:w.height,type:x},this)}),o["@error"]!==void 0&&typeof o["@error"]=="function"&&this.node.on("failed",(f,x)=>{o["@error"](x,this)}),o.__layout===!0&&(this.triggerLayout=C8.bind(this)),this.config.parent.props!==void 0&&this.config.parent.props.__layout===!0&&(this.config.parent.triggerLayout(this.config.parent.props),this.node.on("loaded",()=>{this.config.parent.triggerLayout(this.config.parent.props)}))},set(h,o){if(o===void 0||this.props.raw[h]===o)return;this.props.raw[h]=o,this.props.props={},this.props[h]=fy(o);const i=Object.keys(this.props.props);if(i.length===1){if(Q3(o)===!0)return this.animate(i[0],this.props.props[i[0]],o.transition);this.node[i[0]]=this.props.props[i[0]]}else for(let c=0;c<i.length;c++){if(Q3(o)===!0)return this.animate(i[c],this.props.props[i[c]],o.transition);this.node[i[c]]=this.props.props[i[c]]}this.config.parent.props&&this.config.parent.props.__layout===!0&&this.config.parent.triggerLayout(this.config.parent.props)},animate(h,o,i){if(this.scheduledTransitions[h]!==void 0&&this.scheduledTransitions[h].f.state==="scheduled"&&this.scheduledTransitions[h].f.stop(),this.node[h]===o)return;const c={};c[h]=o;const f=this.node.animate(c,{duration:typeof i=="object"&&"duration"in i?i.duration:300,easing:typeof i=="object"&&"easing"in i?i.easing:"ease",delay:typeof i=="object"&&"delay"in i?i.delay:0}),x=this.node[h];if(this.scheduledTransitions[h]={v:c[h],f},i.start!==void 0&&typeof i.start=="function"&&f.once("animating",()=>{i.start.call(this.component,this,h,x)}),this.config.parent.props&&this.config.parent.props.__layout===!0&&f.on("tick",()=>{this.config.parent.triggerLayout(this.config.parent.props)}),i.progress!==void 0&&typeof i.progress=="function"){let w=0;f.on("tick",(y,{progress:a})=>{i.progress.call(this.component,this,h,a,w),w=a})}f.once("stopped",()=>{this.scheduledTransitions[h]!==void 0&&this.scheduledTransitions[h].canceled===!0||(this.node!==void 0&&i.end&&typeof i.end=="function"&&i.end.call(this.component,this,h,this.node[h]),delete this.scheduledTransitions[h])}),f.start()},destroy(){if(this.node===null)return;Mt.debug("Deleting Node",this.nodeId);const h=Object.keys(this.scheduledTransitions);for(let o=0;o<h.length;o++){const i=this.scheduledTransitions[h[o]];i!==void 0&&(i.canceled=!0,i.f!==void 0&&i.f.stop())}this.scheduledTransitions={},this.component=null,delete this.component,this.config=null,delete this.config,this.props.raw={},this.props.element=null,this.props.props=null,this.props={},delete this.props,this.triggerLayout=null,delete this.triggerLayout,this.forComponent=null,delete this.forComponent,this.node.destroy(),this.node=null},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){const h=this.component[fe.getChildren](),o=[],i=h.length;for(let c=0;c<i;c++){const f=h[c];f!==void 0&&f.parent===(this[fe.isSlot]?this.node.children[0]:this.node)&&o.push(f)}return o}},E8=(h,o)=>(cy===null&&(cy={fontSize:32,fontFamily:ni.get("defaultFont","sans-serif")}),Object.assign(Object.create(A8),{props:Object.assign(Object.create(k8),{props:{}}),scheduledTransitions:{},config:h,component:o})),J3={Element:E8,Launch:S8},I8="1.36.0",M8={"@lightningjs/renderer":"^2.15.0"},YC={version:I8,dependencies:M8};let Th={};const ky={};async function R8(){let h;try{if(h=await IC(()=>import("./package-OhhVVrMQ.js"),[]),h!==void 0)return h.version}catch{return YC.dependencies["@lightningjs/renderer"]}}const _8=(h,o,i)=>{ni.set(i),SR(),R8().then(c=>{Mt.info("Blits Version ",YC.version),Mt.info("Renderer Version ",c)}),ky.element=J3.Element,Th=J3.Launch(h,o,i)},L8={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},fs=window.speechSynthesis,D8=/android/i.test((window.navigator||{}).userAgent||""),Bm=new Map;let qC=!1,Bl=null;const Ch=()=>{Bl&&(clearTimeout(Bl),Bl=null)},dy=h=>{if(!h||Bl)return Ch();fs.pause(),setTimeout(()=>{fs.resume()},0),Bl=setTimeout(()=>{dy(h)},5e3)},Ou={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},P8=()=>{const h=fs.getVoices();Ou.voice=h[0]||null,qC=!0},O8=h=>{const o=new SpeechSynthesisUtterance(h.message),i=h.id;return o.lang=h.lang||Ou.lang,o.pitch=h.pitch||Ou.pitch,o.rate=h.rate||Ou.rate,o.voice=h.voice||Ou.voice,o.volume=h.volume||Ou.volume,Bm.set(i,o),D8===!1&&(o.onstart=()=>{dy(o)},o.onresume=()=>{dy(o)}),new Promise((c,f)=>{o.onend=()=>{Ch(),Bm.delete(i),c()},o.onerror=x=>{Ch(),Bm.delete(i),f(x)},fs.speak(o)})},Ay={speak(h){return fs!==void 0?(qC===!1&&P8(),O8(h)):(Mt.error("speechSynthesis web API not available"),Promise.reject({error:"unavailable"}))},cancel(){fs!==void 0&&(fs.cancel(),Ch())}};let Yl=!1,N8=0;const bo=[];let ss=!1,Ol=null,Jd=null;const QC={then(){},done(){},cancel(){},remove(){},stop(){}},U8=()=>{Yl=!0},B8=()=>{Yl=!1},F8=h=>{Yl=!!h},Ey=(h,o="off")=>Yl===!1?QC:JC(h,o),j8=h=>Yl===!1?QC:JC(void 0,void 0,h),JC=(h,o,i=!1)=>{const c=N8++;let f;const x=new Promise(w=>{f=w});return x.remove=x.cancel=()=>{const w=bo.findIndex(y=>y.id===c);w!==-1&&bo.splice(w,1),Mt.debug(`Announcer - removed from queue: "${h}" (id: ${c})`),f("canceled")},x.stop=()=>{c===Ol&&(Ay.cancel(),ss=!1,f("interupted"))},i===!1?o==="assertive"?bo.unshift({message:h,resolveFn:f,id:c}):bo.push({message:h,resolveFn:f,id:c}):bo.push({delay:i,resolveFn:f,id:c}),Mt.debug(`Announcer - added to queue: "${h}" (id: ${c})`),setTimeout(()=>{fh()},100),x},fh=async()=>{if(ss===!0||bo.length===0)return;ss=!0;const{message:h,resolveFn:o,delay:i,id:c}=bo.shift();Ol=c,i?setTimeout(()=>{ss=!1,Ol=null,o("finished"),fh()},i):(Jd!==null&&clearTimeout(Jd),Jd=setTimeout(()=>{Mt.debug(`Announcer - speaking: "${h}" (id: ${c})`),Ay.speak({message:h,id:c}).then(()=>{Mt.debug(`Announcer - finished speaking: "${h}" (id: ${c})`),Ol=null,ss=!1,o("finished"),fh()}).catch(f=>{Ol=null,ss=!1,Mt.debug(`Announcer - error ("${f.error}") while speaking: "${h}" (id: ${c})`),o(f.error),fh()}),Jd=null},200))},$8=h=>Ey(h,"polite"),z8=h=>Ey(h,"assertive"),V8=()=>{Ay.cancel()},H8=()=>{ss=!1,bo.length=0},ch={speak:Ey,polite:$8,assertive:z8,stop:V8,enable:U8,disable:B8,toggle:F8,clear:H8,pause:j8};let ko;const Xr=Vl({path:"",navigating:!1,data:null,params:null,hash:""},ni.get("reactivityMode"),!0),hy=new Map,ZC=[];let e4={},t4={},Wu=!1,py;const G8=()=>{const h=(document.location.hash||"/").replace(/^#/,"").split("?");return{path:h[0],queryParams:new URLSearchParams(h[1]),hash:document.location.hash}},Z3=h=>h.replace(/^\/+|\/+$/g,"").toLowerCase(),eC=h=>typeof h=="object"&&h!==null,tC=h=>typeof h=="string",n4=(h,o=[])=>{const i=h.replace(/^\/+|\/+$/g,"");h=Z3(h);let c=!1,f=0;for(;!c&&f<o.length;){const x=o[f];if(x.path=Z3(x.path),x.path===h)x.params={},c=x;else if(x.path.indexOf(":")>-1){const w=[...x.path.matchAll(/:([^\s/]+)/gi)];let y=x.path;w.reverse().forEach(r=>{y=y.substring(0,r.index)+"([^\\s/]+)"+y.substring(r.index+r[0].length)}),y="^"+y;const a=i.match(new RegExp(`${y}`,"i"));a&&(x.params=w.reverse().reduce((r,C,R)=>(r[C[1]]=a[R+1],r),{}),c=x)}else if(x.path.endsWith("*")){const w=new RegExp(x.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),y=h.match(w);y&&(y[1]&&(x.params={path:y[1]}),c=x)}f++}return c&&(c.options={...c.options,...e4},c.data||(c.data={})),c},X8=async function(){if(ch.stop(),ch.clear(),Xr.navigating=!0,this.parent[fe.routes]){let h=ko;const{hash:o,path:i,queryParams:c}=G8();let f=n4(i,this.parent[fe.routes]);if(ko=f,f){const x={},w=[...c.entries()];for(let m=0;m<w.length;m++)x[w[m][0]]=w[m][1];f.data={...f.data,...t4,...x},o!==null&&(f.hash=o);let y;if(this.parent[fe.routerHooks]){const m=this.parent[fe.routerHooks];if(m.beforeEach&&(y=await m.beforeEach.call(this.parent,f,h),tC(y))){Xl(y);return}}f=eC(y)?y:f;let a;if(f.hooks&&f.hooks.before&&(a=await f.hooks.before.call(this.parent,f,h),tC(a))){ko=h,Xl(a);return}f=eC(a)?a:f,Wu===!1&&h&&h.options.inHistory===!0&&ZC.push(h),"transition"in f||(f.transition=L8),typeof f.transition=="function"&&(f.transition=f.transition(h,f));let r,{view:C,focus:R}=hy.get(f.hash)||{};if(f.announce&&(typeof f.announce=="string"&&(f.announce={message:f.announce}),ch.speak(f.announce.message,f.announce.politeness)),C){r=C[fe.holder];let m=!1;if(f.transition.before)if(Array.isArray(f.transition.before)){for(let S=0;S<f.transition.before.length;S++)if(f.transition.before[S].prop==="alpha"){m=!0;break}}else f.transition.before.prop==="alpha"&&(m=!0);m===!1&&r.set("alpha",1)}else{r=ky.element({parent:this[fe.children][0]}),r.populate({}),r.set("w","100%"),r.set("h","100%");const m={...this[fe.props],...f.params,...f.data};C=await f.component({props:m},r,this),C[Symbol.toStringTag]==="Module"&&(C.default&&typeof C.default=="function"?C=C.default({props:m},r,this):Mt.error("Dynamic import doesn't have a default export or default is not a function")),typeof C=="function"&&(C=C({props:m},r,this))}this[fe.children].push(C),py=as.get();const k=this[fe.children];if(this.activeView=k[k.length-1],f.options.passFocus!==!1&&(R?R.$focus():C.$focus()),f.transition.before)if(Array.isArray(f.transition.before))for(let m=0;m<f.transition.before.length;m++)r.set(f.transition.before[m].prop,f.transition.before[m].value);else r.set(f.transition.before.prop,f.transition.before.value);let I=!1;if(h){I=!0;const m=this[fe.children].splice(1,1).pop();m&&W8(h,m,f.transition.out)}if(Xr.path=f.path,Xr.params=f.params,Xr.hash=o,Xr.data=f.data,f.transition.in)if(Array.isArray(f.transition.in))for(let m=0;m<f.transition.in.length;m++)m===f.transition.length-1?await Ku(r,f.transition.in[m],I):Ku(r,f.transition.in[m],I);else await Ku(r,f.transition.in,I)}else{Mt.error(`Route ${o} not found`);const x=this.parent[fe.routerHooks];x&&typeof x.error=="function"&&x.error.call(this.parent,`Route ${o} not found`)}}Wu=!1,Xr.navigating=!1},W8=async(h,o,i)=>{if(i)if(Array.isArray(i))for(let c=0;c<i.length;c++)c===i.length-1?await Ku(o[fe.holder],i[c]):Ku(o[fe.holder],i[c]);else await Ku(o[fe.holder],i);Wu===!1&&h.options&&h.options.keepAlive===!0?hy.set(h.hash,{view:o,focus:py}):Wu===!0&&hy.delete(h.hash),h.options&&(h.options.keepAlive!==!0||Wu===!0)&&(o.destroy(),o=null),py=null},Ku=(h,o,i=!0)=>new Promise(c=>{if(i===!0){let f=o.end;o.end=(...x)=>{f&&f(x),f=null,c()},h.set(o.prop,{transition:o})}else h.set(o.prop,o.value),c()}),Xl=(h,o={},i={})=>{t4=o,e4=i,window.location.hash=h},i4=function(){const h=ZC.pop();if(h&&ko!==h)return Wu=!0,Xl(h.hash,h.data,h.options),!0;const o=ko&&ko.options.backtrack||!1;if(o===!1)return!1;const i=/(\/:?[\w%\s-]+)$/;let c=ko.path,f=c.split("/").length;if(f<=1)return!1;for(;f--;){if(!i.test(c))return!1;c=c.replace(i,"");const x=n4(c,this.parent[fe.routes]);if(x&&o)return Xl(x.path),!0}return!1},Fm={navigate:X8,back:i4};let Nu=null,ur=[],nC;const gy=new Map,as={_hold:!1,set hold(h){this._hold=h},get hold(){return this._hold},get(){return Nu},set(h,o){if(clearTimeout(nC),h===Nu)return;if(Nu===null&&(ur=my([h])),Nu!==null)if(ur[ur.length-1]===h.parent)ur.push(h);else{const c=my([h]);let f=ur.length;for(;f--&&!(c.indexOf(ur[f])>-1);)ur[f].lifecycle.state="unfocus";ur=c}let i=0;for(;i<ur.length-1;)ur[i].lifecycle.state="focus",i++;nC=setTimeout(()=>K8(h,o),this.hold===!0?ni.get("holdTimeout",KC):0)},input(h,o){if(Xr.navigating===!0)return;const i=r4(Nu,h);if(i===null)return;const c=i[fe.inputEvents];let f;c[h]?f=c[h].call(i,o):c.any&&(f=c.any.call(i,o)),f!==void 0&&gy.set(o.code,f)}},my=h=>h[0].parent!==void 0?(h.unshift(h[0].parent),my(h)):h,r4=(h,o)=>h[fe.inputEvents]&&(typeof h[fe.inputEvents][o]=="function"||typeof h[fe.inputEvents].any=="function")?h:h.parent!==void 0?r4(h.parent,o):null,K8=(h,o)=>{if(Mt.info(`
Focus chain:
`,ur.map((i,c)=>"	".repeat(c)+"↳ "+i.componentId).join(`
`)),Nu=h,h.lifecycle.state="focus",o instanceof KeyboardEvent){const i=new KeyboardEvent("keydown",o);i[fe.internalEvent]=!0,document.dispatchEvent(i)}},rs=new Map,ku=new Map;function Y8(h){return h&&typeof h=="object"&&h[fe.isProxy]===!0}function o4(h){if(h===null||typeof h!="object")return h;const o=Y8(h)?Co(h):h,i=Array.isArray(o)?[]:{};for(const c of Object.keys(o)){const f=o[c];i[c]=f&&typeof f=="object"?o4(f):f}return i}const dh={registerListener(h,o,i,c=0){let f=rs.get(o);f===void 0&&(f=new Map,rs.set(o,f));let x=f.get(h);x===void 0&&(x=new Set,f.set(h,x)),x.add({cb:i,priority:c}),ku.delete(o)},deregisterListener(h,o){let i=rs.get(o);i!==void 0&&i.has(h)&&(i.delete(h),rs.set(o,i),ku.delete(o))},executeListeners(h,o,i){i===!1&&(o=o4(o));const c=rs.get(h);if(c===void 0||c.size===0)return!0;if(ku.has(h)===!1){const x=[];for(const[w,y]of c)for(const a of y)x.push({...a,component:w});x.sort((w,y)=>y.priority-w.priority),ku.set(h,x)}const f=ku.get(h);for(let x=0;x<f.length;x++){const{cb:w,component:y}=f[x];if(w.call(y,o)===!1)return!1}return!0},removeListeners(h){for(const[o,i]of rs)i.has(h)&&(i.delete(h),ku.delete(o),i.size===0&&rs.delete(o))}},q8={focus:{value:function(h){return Mt.warn("this.focus is deprecated, use this.$focus instead"),this.$focus(h)},writable:!1,enumerable:!0,configurable:!1},$focus:{value:function(h){this.lifecycle.state==="focus"&&(this.lifecycle.state="refocus"),as.set(this,h)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[fe.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.eol=!0,this.lifecycle.state="destroy",this.hasFocus===!0&&this.parent.$focus();for(let h in this[fe.state])Array.isArray(this[fe.state][h])&&(this[fe.state][h]=[]);this.$clearTimeouts(),this.$clearIntervals(),dh.removeListeners(this),s4(this[fe.children]),this[fe.children].length=0,_3(this[fe.effects]),this[fe.state]={},this[fe.props]={},this[fe.computed]=null,this.lifecycle={},this[fe.effects].length=0,this.parent=null,this.rootParent=null,this[fe.wrapper]=null,this[fe.originalState]=null,this[fe.slots].length=0,delete this[fe.computed],delete this[fe.effects],delete this.parent,delete this.rootParent,delete this[fe.wrapper],delete this[fe.originalState],delete this[fe.children],delete this[fe.slots],delete this.componentId,delete this[fe.id],delete this.ref,delete this[fe.state].hasFocus,this[fe.holder].destroy(),this[fe.holder]=null,delete this[fe.holder],this[fe.cleanup](),delete this[fe.cleanup],Mt.debug(`Destroyed component ${this.componentId}`)},writable:!1,enumerable:!0,configurable:!1},[fe.removeGlobalEffects]:{value:function(h=[]){_3(h)},writable:!1,enumerable:!1,configurable:!1},select:{value:function(h){return Mt.warn("this.select is deprecated, use this.$select instead"),this.$select(h)},writable:!1,enumerable:!0,configurable:!1},$select:{value:function(h){let o=null;return this[fe.children].forEach(i=>{Array.isArray(i)?i.forEach(c=>{c.ref===h&&(o=c)}):Object.getPrototypeOf(i)===Object.prototype?Object.keys(i).forEach(c=>{i[c].ref===h&&(o=i[c])}):i.ref===h&&(o=i)}),o},writable:!1,enumerable:!0,configurable:!1},trigger:{value:function(h){return Mt.warn("this.trigger is deprecated, use this.$trigger instead"),this.$trigger(h)},writable:!1,enumerable:!0,configurable:!1},$trigger:{value:function(h){let o=this[fe.originalState];if(h.indexOf(".")>-1){const i=h.split(".");h=i.pop(i);for(let c=0;c<i.length;c++)o=o[i[c]]}Gu(o,h,!0)},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(h,o){return{type:h,props:o}},writable:!1,enumerable:!0,configurable:!1}},s4=function(h){for(let o=0;o<h.length;o++){if(!h[o])return;h[o].destroy&&typeof h[o].destroy=="function"?h[o].destroy():Object.getPrototypeOf(h[o])===Object.prototype&&s4(Object.values(h[o])),h[o]=null}h.length=0},Q8={$setTimeout:{value:function(h,o,...i){if(this.eol===!0)return;const c=setTimeout(()=>{this.$clearTimeout(c),h.apply(null,i)},o,i);return this[fe.timeouts].push(c),c},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(h){const o=this[fe.timeouts].indexOf(h);o>-1&&(this[fe.timeouts].splice(o,1),clearTimeout(h))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(let h=0;h<this[fe.timeouts].length;h++)clearTimeout(this[fe.timeouts][h]);this[fe.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(h,o,...i){if(this.eol===!0)return;const c=setInterval(()=>h.apply(null,i),o,i);return this[fe.intervals].push(c),c},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(h){const o=this[fe.intervals].indexOf(h);o>-1&&(this[fe.intervals].splice(o,1),clearTimeout(h))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(let h=0;h<this[fe.intervals].length;h++)clearInterval(this[fe.intervals][h]);this[fe.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},J8={$emit:{value:function(h,o,i=!0){return dh.executeListeners(h,o,i)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(h,o,i=0){this.eol!==!0&&dh.registerListener(this,h,o,i)},writable:!1,enumerable:!0,configurable:!1},$unlisten:{value:function(h){dh.deregisterListener(this,h)},writable:!1,enumerable:!0,configurable:!1}},Z8={$router:{value:{to:Xl,back:i4,get currentRoute(){return ko},get routes(){return this[fe.routes]},get navigating(){return Xr.navigating},state:Xr},writable:!1,enumerable:!0,configurable:!1}},eL={$announcer:{value:ch,writable:!1,enumerable:!0,configurable:!1}},tL={$size:{value:function(h={w:0,h:0}){this[fe.holder].set("w",h.w||0),this[fe.holder].set("h",h.h||0)},writable:!1,enumerable:!0,configurable:!1},[fe.renderer]:{value:()=>Th,writable:!1,enumerable:!0,configurable:!1},[fe.getChildren]:{value(){const h=this.rootParent||this.parent;return(this[fe.children]||[]).concat(h&&h[fe.getChildren]().map(o=>Object.getPrototypeOf(o)===Object.prototype?Object.values(o).map(i=>(i.forComponent=i[Symbol.for("config")]&&i[Symbol.for("config")].parent.component,i)):o).flat().filter(o=>{if(o&&o.component)return o.component&&o.component.componentId===this.componentId||o.forComponent&&o.forComponent.componentId===this.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}},u4={...J8,...Z8,...eL},os=Object.defineProperties({[fe.launched]:!1},{...q8,...Q8,...u4,...tL}),nL={cast:h=>h,required:!1},iL=(h,o=[])=>{o.indexOf("ref")===-1&&o.push("ref"),h[fe.propKeys]=[];const i=o.length;for(let c=0;c<i;c++){const f={...nL,...typeof o[c]=="object"?o[c]:{key:o[c]}};h[fe.propKeys].push(f.key),Object.defineProperty(h,f.key,{get(){const x=f.cast(this[fe.props]!==void 0&&f.key in this[fe.props]?this[fe.props][f.key]:"default"in f?f.default:void 0);return f.required===!0&&x===void 0&&Mt.warn(`${f.key} is required`),x},set(x){Mt.warn(`Warning! Avoid mutating props directly (prop "${f.key}" in component "${this.componentId}")`),this[fe.props][f.key]=x}})}},rL=(h,o)=>{h[fe.methodKeys]=[];for(let i in o)h[fe.propKeys]&&h[fe.propKeys].indexOf(i)>-1?Mt.error(`${i} already exists as a prop`):(typeof o[i]!="function"&&Mt.warn(`${i} is not a function`),h[fe.methodKeys].push(i),h[i]=o[i])},oL=(h,o=()=>{})=>{Object.defineProperty(h,fe.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1});const i=Object.keys(o.apply(h)||{});i.indexOf("hasFocus")>-1?Mt.warn("State `hasFocus` already exists as a built-in Component variable (to indicate whether the component currently has focus). Avoid using your own `hasFocus` key in the Component state"):i.push(["hasFocus"]);const c=i.length;for(let f=0;f<c;f++){const x=i[f];h[fe.propKeys]!==void 0&&h[fe.propKeys].indexOf(x)>-1&&Mt.error(`State ${x} already exists as a prop`),h[fe.methodKeys]!==void 0&&h[fe.methodKeys].indexOf(x)>-1&&Mt.error(`State ${x} already exists as a method`),h[fe.stateKeys].push(x),Object.defineProperty(h,x,{get(){return this[fe.state][x]},set(w){this[fe.state][x]=w}})}},sL=(h,o)=>{h[fe.computedKeys]=[];for(let i in o)h[fe.stateKeys]&&h[fe.stateKeys].indexOf(i)>-1?Mt.error(`${i} already exists as a state variable`):h[fe.propKeys]&&h[fe.propKeys].indexOf(i)>-1?Mt.error(`${i} already exists as a prop`):h[fe.methodKeys]&&h[fe.methodKeys].indexOf(i)>-1?Mt.error(`${i} already exists as a method`):(typeof o[i]!="function"&&Mt.warn(`${i} is not a function`),h[fe.computedKeys].push(i),Object.defineProperty(h,i,{get(){return o[i].apply(this)}}))},uL=(h,o)=>{h[fe.inputEvents]=[],Object.keys(o).forEach(i=>{typeof o[i]!="function"&&Mt.warn(`${o[i]} is not a function`),h[fe.inputEvents][i]=o[i]})},aL=(h,o)=>{let i=o;Array.isArray(o)===!1&&(h[fe.routerHooks]=o.hooks,i=o.routes),h[fe.routes]=[];const c=i.length;for(let f=0;f<c;f++)h[fe.routes][f]=i[f],h[fe.routes][f].options={inHistory:!0,...i[f].options}},lL=(h,o)=>{h[fe.watchKeys]=[],h[fe.watchers]={};for(let i in o)typeof o[i]!="function"&&console.warn(`${i} is not a function`),h[fe.watchKeys].push(i),h[fe.watchers][i]=function(c,f){o[i].call(this,c,f)}};let fL=0;function cL(h,o){h[fe.identifier]=++fL,NR(o.hooks,h[fe.identifier]),iL(h,o.props),o.methods&&rL(h,o.methods),oL(h,o.state),o.computed&&sL(h,o.computed),o.watch&&lL(h,o.watch);const i=o.router!==void 0?o.router:o.routes;return i!==void 0&&aL(h,i),o.input&&uL(h,o.input),h}const dL=()=>Qu("Circle",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].color=i.color,r[0].w=i.size,r[0].h=i.size,r[0].effects=[i.shader("radius",{radius:i.radius})],a[0].populate(r[0]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("color",o.color)},function(o,i,c,f,x,w){i[0].set("w",o.size)},function(o,i,c,f,x,w){i[0].set("h",o.size)},function(o,i,c,f,x,w){i[0].set("effects",[o.shader("radius",{radius:o.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let jm=null;const hL=()=>Qu("RouterView",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=o.node.width*(100/100),r[0].height=o.node.height*(100/100),a[0].populate(r[0]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[],context:{}},state(){return{activeView:null}},hooks:{async ready(){this.parent[fe.routerHooks]&&this.parent[fe.routerHooks].init&&await this.parent[fe.routerHooks].init.apply(this.parent),jm=()=>Fm.navigate.apply(this),Fm.navigate.apply(this),window.addEventListener("hashchange",jm)},destroy(){window.removeEventListener("hashchange",jm,!1)},focus(){this.activeView&&as.get()===this&&this.activeView.$focus()}},input:{back(h){Fm.back.call(this)===!1&&this.parent.$focus(h)}}}),pL=()=>Qu("Sprite",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=o.node.width*(100/100),r[0].h=o.node.height*(100/100),r[0].texture=i.texture,r[0].color=i.color,a[0].populate(r[0]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("texture",o.texture)},function(o,i,c,f,x,w){i[0].set("color",o.color)}],context:{}},props:["image","map","frame","color"],state(){return{spriteTexture:null}},computed:{texture(){const h="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(this.spriteTexture!==null&&h)return this[fe.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:h.x,y:h.y,width:h.w,height:h.h})}},hooks:{ready(){this.spriteTexture=this[fe.renderer]().createTexture("ImageTexture",{src:this.image})}}}),gL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",mL=()=>Qu("FPScounter",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),a[0].populate(r[0]),S===!0&&(E-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].y=15,r[1].x=20,a[1].populate(r[1]),S===!0&&(E-=1),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},S===!0?m:i),a[2].populate(r[2]),S===!0&&(E-=1),A[3]=c.components&&c.components.Sprite||f.Sprite,o=a[2],r[3]={},a[3]=this.element({parent:o||"root"},S===!0?m:i),r[3].image=i.image,r[3].w=43,r[3].h=25,r[3].map=i.sprite,r[3].frame="fps",R[3]=[],typeof A[3]<"u")for(let N in A[3][Symbol.for("config")].props)delete r[3][A[3][Symbol.for("config")].props[N]],R[3].push(A[3][Symbol.for("config")].props[N]);if(a[3].populate(r[3]),S===!0&&(E-=1),o=a[3],C[4]={},C[4].image=i.image,C[4].w=43,C[4].h=25,C[4].map=i.sprite,C[4].frame="fps",k=C[4].is||"Sprite",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);if(a[4]=f[4].call(null,{props:C[4]},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],m=a[4],S=!0):o=a[4][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),o=a[2],r[5]={},a[5]=this.element({parent:o||"root"},S===!0?m:i),r[5].x=58,r[5].y=2,a[5].populate(r[5]),S===!0&&(E-=1),A[6]=c.components&&c.components.Sprite||f.Sprite,o=a[5],r[6]={},a[6]=this.element({parent:o||"root"},S===!0?m:i),r[6].image=i.image,r[6].x=0,r[6].h=20,r[6].w=20,r[6].map=i.sprite,r[6].frame=i.fps[0],R[6]=[],typeof A[6]<"u")for(let N in A[6][Symbol.for("config")].props)delete r[6][A[6][Symbol.for("config")].props[N]],R[6].push(A[6][Symbol.for("config")].props[N]);if(a[6].populate(r[6]),S===!0&&(E-=1),o=a[6],C[7]={},C[7].image=i.image,C[7].x=0,C[7].h=20,C[7].w=20,C[7].map=i.sprite,I=i.fps[0],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[7].frame=I,k=C[7].is||"Sprite",f[7],typeof k=="string"){if(f[7]=c.components&&c.components[k]||f[k],!f[7])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[7]=k);if(a[7]=f[7].call(null,{props:C[7]},a[6],i),a[7][Symbol.for("slots")][0]?(o=a[7][Symbol.for("slots")][0],m=a[7],S=!0):o=a[7][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[8]=c.components&&c.components.Sprite||f.Sprite,o=a[5],r[8]={},a[8]=this.element({parent:o||"root"},S===!0?m:i),r[8].image=i.image,r[8].x=18,r[8].h=20,r[8].w=20,r[8].map=i.sprite,r[8].frame=i.fps[1],R[8]=[],typeof A[8]<"u")for(let N in A[8][Symbol.for("config")].props)delete r[8][A[8][Symbol.for("config")].props[N]],R[8].push(A[8][Symbol.for("config")].props[N]);if(a[8].populate(r[8]),S===!0&&(E-=1),o=a[8],C[9]={},C[9].image=i.image,C[9].x=18,C[9].h=20,C[9].w=20,C[9].map=i.sprite,I=i.fps[1],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[9].frame=I,k=C[9].is||"Sprite",f[9],typeof k=="string"){if(f[9]=c.components&&c.components[k]||f[k],!f[9])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[9]=k);if(a[9]=f[9].call(null,{props:C[9]},a[8],i),a[9][Symbol.for("slots")][0]?(o=a[9][Symbol.for("slots")][0],m=a[9],S=!0):o=a[9][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[10]=c.components&&c.components.Sprite||f.Sprite,o=a[5],r[10]={},a[10]=this.element({parent:o||"root"},S===!0?m:i),r[10].image=i.image,r[10].x=36,r[10].h=20,r[10].w=20,r[10].map=i.sprite,r[10].frame=i.fps[2],R[10]=[],typeof A[10]<"u")for(let N in A[10][Symbol.for("config")].props)delete r[10][A[10][Symbol.for("config")].props[N]],R[10].push(A[10][Symbol.for("config")].props[N]);if(a[10].populate(r[10]),S===!0&&(E-=1),o=a[10],C[11]={},C[11].image=i.image,C[11].x=36,C[11].h=20,C[11].w=20,C[11].map=i.sprite,I=i.fps[2],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[11].frame=I,k=C[11].is||"Sprite",f[11],typeof k=="string"){if(f[11]=c.components&&c.components[k]||f[k],!f[11])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[11]=k);if(a[11]=f[11].call(null,{props:C[11]},a[10],i),a[11][Symbol.for("slots")][0]?(o=a[11][Symbol.for("slots")][0],m=a[11],S=!0):o=a[11][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),o=a[1],r[12]={},a[12]=this.element({parent:o||"root"},S===!0?m:i),r[12].x=150,a[12].populate(r[12]),S===!0&&(E-=1),A[13]=c.components&&c.components.Sprite||f.Sprite,o=a[12],r[13]={},a[13]=this.element({parent:o||"root"},S===!0?m:i),r[13].image=i.image,r[13].y=2,r[13].w=48,r[13].h=25,r[13].map=i.sprite,r[13].frame="avg",R[13]=[],typeof A[13]<"u")for(let N in A[13][Symbol.for("config")].props)delete r[13][A[13][Symbol.for("config")].props[N]],R[13].push(A[13][Symbol.for("config")].props[N]);if(a[13].populate(r[13]),S===!0&&(E-=1),o=a[13],C[14]={},C[14].image=i.image,C[14].y=2,C[14].w=48,C[14].h=25,C[14].map=i.sprite,C[14].frame="avg",k=C[14].is||"Sprite",f[14],typeof k=="string"){if(f[14]=c.components&&c.components[k]||f[k],!f[14])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[14]=k);if(a[14]=f[14].call(null,{props:C[14]},a[13],i),a[14][Symbol.for("slots")][0]?(o=a[14][Symbol.for("slots")][0],m=a[14],S=!0):o=a[14][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),o=a[12],r[15]={},a[15]=this.element({parent:o||"root"},S===!0?m:i),r[15].x=63,r[15].y=2,a[15].populate(r[15]),S===!0&&(E-=1),A[16]=c.components&&c.components.Sprite||f.Sprite,o=a[15],r[16]={},a[16]=this.element({parent:o||"root"},S===!0?m:i),r[16].image=i.image,r[16].x=0,r[16].h=20,r[16].w=20,r[16].map=i.sprite,r[16].frame=i.avgFps[0],R[16]=[],typeof A[16]<"u")for(let N in A[16][Symbol.for("config")].props)delete r[16][A[16][Symbol.for("config")].props[N]],R[16].push(A[16][Symbol.for("config")].props[N]);if(a[16].populate(r[16]),S===!0&&(E-=1),o=a[16],C[17]={},C[17].image=i.image,C[17].x=0,C[17].h=20,C[17].w=20,C[17].map=i.sprite,I=i.avgFps[0],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[17].frame=I,k=C[17].is||"Sprite",f[17],typeof k=="string"){if(f[17]=c.components&&c.components[k]||f[k],!f[17])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[17]=k);if(a[17]=f[17].call(null,{props:C[17]},a[16],i),a[17][Symbol.for("slots")][0]?(o=a[17][Symbol.for("slots")][0],m=a[17],S=!0):o=a[17][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[18]=c.components&&c.components.Sprite||f.Sprite,o=a[15],r[18]={},a[18]=this.element({parent:o||"root"},S===!0?m:i),r[18].image=i.image,r[18].x=18,r[18].h=20,r[18].w=20,r[18].map=i.sprite,r[18].frame=i.avgFps[1],R[18]=[],typeof A[18]<"u")for(let N in A[18][Symbol.for("config")].props)delete r[18][A[18][Symbol.for("config")].props[N]],R[18].push(A[18][Symbol.for("config")].props[N]);if(a[18].populate(r[18]),S===!0&&(E-=1),o=a[18],C[19]={},C[19].image=i.image,C[19].x=18,C[19].h=20,C[19].w=20,C[19].map=i.sprite,I=i.avgFps[1],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[19].frame=I,k=C[19].is||"Sprite",f[19],typeof k=="string"){if(f[19]=c.components&&c.components[k]||f[k],!f[19])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[19]=k);if(a[19]=f[19].call(null,{props:C[19]},a[18],i),a[19][Symbol.for("slots")][0]?(o=a[19][Symbol.for("slots")][0],m=a[19],S=!0):o=a[19][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[20]=c.components&&c.components.Sprite||f.Sprite,o=a[15],r[20]={},a[20]=this.element({parent:o||"root"},S===!0?m:i),r[20].image=i.image,r[20].x=36,r[20].h=20,r[20].w=20,r[20].map=i.sprite,r[20].frame=i.avgFps[2],R[20]=[],typeof A[20]<"u")for(let N in A[20][Symbol.for("config")].props)delete r[20][A[20][Symbol.for("config")].props[N]],R[20].push(A[20][Symbol.for("config")].props[N]);if(a[20].populate(r[20]),S===!0&&(E-=1),o=a[20],C[21]={},C[21].image=i.image,C[21].x=36,C[21].h=20,C[21].w=20,C[21].map=i.sprite,I=i.avgFps[2],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[21].frame=I,k=C[21].is||"Sprite",f[21],typeof k=="string"){if(f[21]=c.components&&c.components[k]||f[k],!f[21])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[21]=k);if(a[21]=f[21].call(null,{props:C[21]},a[20],i),a[21][Symbol.for("slots")][0]?(o=a[21][Symbol.for("slots")][0],m=a[21],S=!0):o=a[21][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),o=a[1],r[22]={},a[22]=this.element({parent:o||"root"},S===!0?m:i),r[22].x=0,r[22].y=40,a[22].populate(r[22]),S===!0&&(E-=1),A[23]=c.components&&c.components.Sprite||f.Sprite,o=a[22],r[23]={},a[23]=this.element({parent:o||"root"},S===!0?m:i),r[23].image=i.image,r[23].x="-2",r[23].w=47,r[23].h=25,r[23].map=i.sprite,r[23].frame="min",R[23]=[],typeof A[23]<"u")for(let N in A[23][Symbol.for("config")].props)delete r[23][A[23][Symbol.for("config")].props[N]],R[23].push(A[23][Symbol.for("config")].props[N]);if(a[23].populate(r[23]),S===!0&&(E-=1),o=a[23],C[24]={},C[24].image=i.image,C[24].x="-2",C[24].w=47,C[24].h=25,C[24].map=i.sprite,C[24].frame="min",k=C[24].is||"Sprite",f[24],typeof k=="string"){if(f[24]=c.components&&c.components[k]||f[k],!f[24])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[24]=k);if(a[24]=f[24].call(null,{props:C[24]},a[23],i),a[24][Symbol.for("slots")][0]?(o=a[24][Symbol.for("slots")][0],m=a[24],S=!0):o=a[24][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),o=a[22],r[25]={},a[25]=this.element({parent:o||"root"},S===!0?m:i),r[25].x=58,r[25].y=2,a[25].populate(r[25]),S===!0&&(E-=1),A[26]=c.components&&c.components.Sprite||f.Sprite,o=a[25],r[26]={},a[26]=this.element({parent:o||"root"},S===!0?m:i),r[26].image=i.image,r[26].x=0,r[26].h=20,r[26].w=20,r[26].map=i.sprite,r[26].frame=i.minFps[0],R[26]=[],typeof A[26]<"u")for(let N in A[26][Symbol.for("config")].props)delete r[26][A[26][Symbol.for("config")].props[N]],R[26].push(A[26][Symbol.for("config")].props[N]);if(a[26].populate(r[26]),S===!0&&(E-=1),o=a[26],C[27]={},C[27].image=i.image,C[27].x=0,C[27].h=20,C[27].w=20,C[27].map=i.sprite,I=i.minFps[0],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[27].frame=I,k=C[27].is||"Sprite",f[27],typeof k=="string"){if(f[27]=c.components&&c.components[k]||f[k],!f[27])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[27]=k);if(a[27]=f[27].call(null,{props:C[27]},a[26],i),a[27][Symbol.for("slots")][0]?(o=a[27][Symbol.for("slots")][0],m=a[27],S=!0):o=a[27][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[28]=c.components&&c.components.Sprite||f.Sprite,o=a[25],r[28]={},a[28]=this.element({parent:o||"root"},S===!0?m:i),r[28].image=i.image,r[28].x=18,r[28].h=20,r[28].w=20,r[28].map=i.sprite,r[28].frame=i.minFps[1],R[28]=[],typeof A[28]<"u")for(let N in A[28][Symbol.for("config")].props)delete r[28][A[28][Symbol.for("config")].props[N]],R[28].push(A[28][Symbol.for("config")].props[N]);if(a[28].populate(r[28]),S===!0&&(E-=1),o=a[28],C[29]={},C[29].image=i.image,C[29].x=18,C[29].h=20,C[29].w=20,C[29].map=i.sprite,I=i.minFps[1],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[29].frame=I,k=C[29].is||"Sprite",f[29],typeof k=="string"){if(f[29]=c.components&&c.components[k]||f[k],!f[29])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[29]=k);if(a[29]=f[29].call(null,{props:C[29]},a[28],i),a[29][Symbol.for("slots")][0]?(o=a[29][Symbol.for("slots")][0],m=a[29],S=!0):o=a[29][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[30]=c.components&&c.components.Sprite||f.Sprite,o=a[25],r[30]={},a[30]=this.element({parent:o||"root"},S===!0?m:i),r[30].image=i.image,r[30].x=36,r[30].h=20,r[30].w=20,r[30].map=i.sprite,r[30].frame=i.minFps[2],R[30]=[],typeof A[30]<"u")for(let N in A[30][Symbol.for("config")].props)delete r[30][A[30][Symbol.for("config")].props[N]],R[30].push(A[30][Symbol.for("config")].props[N]);if(a[30].populate(r[30]),S===!0&&(E-=1),o=a[30],C[31]={},C[31].image=i.image,C[31].x=36,C[31].h=20,C[31].w=20,C[31].map=i.sprite,I=i.minFps[2],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[31].frame=I,k=C[31].is||"Sprite",f[31],typeof k=="string"){if(f[31]=c.components&&c.components[k]||f[k],!f[31])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[31]=k);if(a[31]=f[31].call(null,{props:C[31]},a[30],i),a[31][Symbol.for("slots")][0]?(o=a[31][Symbol.for("slots")][0],m=a[31],S=!0):o=a[31][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),o=a[1],r[32]={},a[32]=this.element({parent:o||"root"},S===!0?m:i),r[32].x=150,r[32].y=40,a[32].populate(r[32]),S===!0&&(E-=1),A[33]=c.components&&c.components.Sprite||f.Sprite,o=a[32],r[33]={},a[33]=this.element({parent:o||"root"},S===!0?m:i),r[33].image=i.image,r[33].w=53,r[33].h=25,r[33].map=i.sprite,r[33].frame="max",R[33]=[],typeof A[33]<"u")for(let N in A[33][Symbol.for("config")].props)delete r[33][A[33][Symbol.for("config")].props[N]],R[33].push(A[33][Symbol.for("config")].props[N]);if(a[33].populate(r[33]),S===!0&&(E-=1),o=a[33],C[34]={},C[34].image=i.image,C[34].w=53,C[34].h=25,C[34].map=i.sprite,C[34].frame="max",k=C[34].is||"Sprite",f[34],typeof k=="string"){if(f[34]=c.components&&c.components[k]||f[k],!f[34])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[34]=k);if(a[34]=f[34].call(null,{props:C[34]},a[33],i),a[34][Symbol.for("slots")][0]?(o=a[34][Symbol.for("slots")][0],m=a[34],S=!0):o=a[34][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),o=a[32],r[35]={},a[35]=this.element({parent:o||"root"},S===!0?m:i),r[35].x=63,r[35].y=2,a[35].populate(r[35]),S===!0&&(E-=1),A[36]=c.components&&c.components.Sprite||f.Sprite,o=a[35],r[36]={},a[36]=this.element({parent:o||"root"},S===!0?m:i),r[36].image=i.image,r[36].x=0,r[36].h=20,r[36].w=20,r[36].map=i.sprite,r[36].frame=i.maxFps[0],R[36]=[],typeof A[36]<"u")for(let N in A[36][Symbol.for("config")].props)delete r[36][A[36][Symbol.for("config")].props[N]],R[36].push(A[36][Symbol.for("config")].props[N]);if(a[36].populate(r[36]),S===!0&&(E-=1),o=a[36],C[37]={},C[37].image=i.image,C[37].x=0,C[37].h=20,C[37].w=20,C[37].map=i.sprite,I=i.maxFps[0],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[37].frame=I,k=C[37].is||"Sprite",f[37],typeof k=="string"){if(f[37]=c.components&&c.components[k]||f[k],!f[37])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[37]=k);if(a[37]=f[37].call(null,{props:C[37]},a[36],i),a[37][Symbol.for("slots")][0]?(o=a[37][Symbol.for("slots")][0],m=a[37],S=!0):o=a[37][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[38]=c.components&&c.components.Sprite||f.Sprite,o=a[35],r[38]={},a[38]=this.element({parent:o||"root"},S===!0?m:i),r[38].image=i.image,r[38].x=18,r[38].h=20,r[38].w=20,r[38].map=i.sprite,r[38].frame=i.maxFps[1],R[38]=[],typeof A[38]<"u")for(let N in A[38][Symbol.for("config")].props)delete r[38][A[38][Symbol.for("config")].props[N]],R[38].push(A[38][Symbol.for("config")].props[N]);if(a[38].populate(r[38]),S===!0&&(E-=1),o=a[38],C[39]={},C[39].image=i.image,C[39].x=18,C[39].h=20,C[39].w=20,C[39].map=i.sprite,I=i.maxFps[1],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[39].frame=I,k=C[39].is||"Sprite",f[39],typeof k=="string"){if(f[39]=c.components&&c.components[k]||f[k],!f[39])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[39]=k);if(a[39]=f[39].call(null,{props:C[39]},a[38],i),a[39][Symbol.for("slots")][0]?(o=a[39][Symbol.for("slots")][0],m=a[39],S=!0):o=a[39][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[40]=c.components&&c.components.Sprite||f.Sprite,o=a[35],r[40]={},a[40]=this.element({parent:o||"root"},S===!0?m:i),r[40].image=i.image,r[40].x=36,r[40].h=20,r[40].w=20,r[40].map=i.sprite,r[40].frame=i.maxFps[2],R[40]=[],typeof A[40]<"u")for(let N in A[40][Symbol.for("config")].props)delete r[40][A[40][Symbol.for("config")].props[N]],R[40].push(A[40][Symbol.for("config")].props[N]);if(a[40].populate(r[40]),S===!0&&(E-=1),o=a[40],C[41]={},C[41].image=i.image,C[41].x=36,C[41].h=20,C[41].w=20,C[41].map=i.sprite,I=i.maxFps[2],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[41].frame=I,k=C[41].is||"Sprite",f[41],typeof k=="string"){if(f[41]=c.components&&c.components[k]||f[k],!f[41])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[41]=k);return a[41]=f[41].call(null,{props:C[41]},a[40],i),a[41][Symbol.for("slots")][0]?(o=a[41][Symbol.for("slots")][0],m=a[41],S=!0):o=a[41][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[3]=null,C[4]=null,f[4]=null,A[6]=null,C[7]=null,f[7]=null,A[8]=null,C[9]=null,f[9]=null,A[10]=null,C[11]=null,f[11]=null,A[13]=null,C[14]=null,f[14]=null,A[16]=null,C[17]=null,f[17]=null,A[18]=null,C[19]=null,f[19]=null,A[20]=null,C[21]=null,f[21]=null,A[23]=null,C[24]=null,f[24]=null,A[26]=null,C[27]=null,f[27]=null,A[28]=null,C[29]=null,f[29]=null,A[30]=null,C[31]=null,f[31]=null,A[33]=null,C[34]=null,f[34]=null,A[36]=null,C[37]=null,f[37]=null,A[38]=null,C[39]=null,f[39]=null,A[40]=null,C[41]=null,f[41]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[6]>"u"||skips[6].indexOf("frame")===-1)&&i[6].set("frame",o.fps[0])},function(o,i,c,f,x,w){i[7][Symbol.for("props")].frame=o.fps[0]},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[8]>"u"||skips[8].indexOf("frame")===-1)&&i[8].set("frame",o.fps[1])},function(o,i,c,f,x,w){i[9][Symbol.for("props")].frame=o.fps[1]},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[10]>"u"||skips[10].indexOf("frame")===-1)&&i[10].set("frame",o.fps[2])},function(o,i,c,f,x,w){i[11][Symbol.for("props")].frame=o.fps[2]},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[16]>"u"||skips[16].indexOf("frame")===-1)&&i[16].set("frame",o.avgFps[0])},function(o,i,c,f,x,w){i[17][Symbol.for("props")].frame=o.avgFps[0]},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[18]>"u"||skips[18].indexOf("frame")===-1)&&i[18].set("frame",o.avgFps[1])},function(o,i,c,f,x,w){i[19][Symbol.for("props")].frame=o.avgFps[1]},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[20]>"u"||skips[20].indexOf("frame")===-1)&&i[20].set("frame",o.avgFps[2])},function(o,i,c,f,x,w){i[21][Symbol.for("props")].frame=o.avgFps[2]},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[26]>"u"||skips[26].indexOf("frame")===-1)&&i[26].set("frame",o.minFps[0])},function(o,i,c,f,x,w){i[27][Symbol.for("props")].frame=o.minFps[0]},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[28]>"u"||skips[28].indexOf("frame")===-1)&&i[28].set("frame",o.minFps[1])},function(o,i,c,f,x,w){i[29][Symbol.for("props")].frame=o.minFps[1]},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[30]>"u"||skips[30].indexOf("frame")===-1)&&i[30].set("frame",o.minFps[2])},function(o,i,c,f,x,w){i[31][Symbol.for("props")].frame=o.minFps[2]},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[36]>"u"||skips[36].indexOf("frame")===-1)&&i[36].set("frame",o.maxFps[0])},function(o,i,c,f,x,w){i[37][Symbol.for("props")].frame=o.maxFps[0]},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[38]>"u"||skips[38].indexOf("frame")===-1)&&i[38].set("frame",o.maxFps[1])},function(o,i,c,f,x,w){i[39][Symbol.for("props")].frame=o.maxFps[1]},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[40]>"u"||skips[40].indexOf("frame")===-1)&&i[40].set("frame",o.maxFps[2])},function(o,i,c,f,x,w){i[41][Symbol.for("props")].frame=o.maxFps[2]}],context:{}},state(){return{image:gL,sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready(){}}}),yL=()=>({Circle:dL(),RouterView:hL(),Sprite:pL(),FPScounter:mL()}),vL={name:"log",plugin(){return CC("App")}},yy={log:vL},a4=(h,o="",i={})=>{let c;if(typeof o=="object"?i=o:c=o,typeof h=="function"){if(c===void 0)throw Error("Error registering plugin: name is required for plugin");yy[c]={plugin:h,options:i}}else h.plugin&&a4(h.plugin,c||h.name,i)};let $m;const iC=h=>{throw new Error(`Parameter ${h} is required`)},Qu=(h=iC("name"),o=iC("config"))=>{let i;const c=function(x,w,y,a){this.componentId=DR(h),this[fe.effects]=[],this.lifecycle=Object.assign(Object.create($R),{component:this,previous:null,current:null}),this.parent=y,this.rootParent=a,this[fe.holder]=w,this[fe.id]=PR(),this[fe.props]=Vl(x.props||{},ni.get("reactivityMode")),this[fe.timeouts]=[],this[fe.intervals]=[],this[fe.originalState]=o.state&&typeof o.state=="function"&&o.state.apply(this)||{},this[fe.originalState].hasFocus=!1,this[fe.state]=Vl(this[fe.originalState],ni.get("reactivityMode")),this.lifecycle.state="init";const{elms:r,cleanup:C}=o.code.render.apply(ky,[w,this,o,$m,$d,Co,Mt])||{elms:[],cleanup:()=>{}};this[fe.children]=r,this[fe.cleanup]=C,this[fe.wrapper]=this[fe.children][0],this[fe.slots]=this[fe.children].filter(k=>k[fe.isSlot]),o.hooks&&(o.hooks.frameTick&&Th.on("frameTick",(k,I)=>Qm("frameTick",this[fe.identifier],this,[I])),o.hooks.idle&&Th.on("idle",()=>{Qm("idle",this[fe.identifier],this)}),o.hooks.attach&&this[fe.wrapper].node.on("inBounds",()=>{this.lifecycle.state="attach"}),o.hooks.detach&&this[fe.wrapper].node.on("outOfBounds",(k,{previous:I})=>{I>0&&(this.lifecycle.state="detach")}),o.hooks.enter&&this[fe.wrapper].node.on("inViewport",()=>{this.lifecycle.state="enter"}),o.hooks.exit&&this[fe.wrapper].node.on("outOfBounds",()=>{this.lifecycle.state="exit"}));const R=o.code.effects;for(let k=0;k<R.length;k++){const I=()=>{R[k](this,this[fe.children],o,$m,a,$d)};this[fe.effects].push(I),$d(I)}if(this[fe.watchers]){const k=Object.keys(this[fe.watchers]),I=k.length;for(let m=0;m<I;m++){let S=this,E=k[m];const A=E;if(E.indexOf(".")>-1){const Se=E.split(".");E=Se.pop();for(let Me=0;Me<Se.length;Me++)S=S[Se[Me]]}let N=this[E];const K=(Se=!1)=>{const Me=S[E];(N!==Me||Se===!0)&&(this[fe.watchers][A].apply(this,[Me,N]),N=Me)};this[fe.effects].push(K),$d(K)}}return setTimeout(()=>this.lifecycle.state="ready"),this},f=(x={},w,y,a)=>{if(os[fe.launched]===!1){const r=Object.keys(yy),C=r.length,R={};for(let k=0;k<C;k++){const I=r[k],m=`$${I}`;m in os&&Mt.warn(`"${I}" (this.${m}) already exists as a property or plugin on the Base Component. You may be overwriting built-in functionality. Proceed with care!`);const S=yy[I];R[m]={value:Object.defineProperties(S.plugin(S.options),u4),writable:!1,enumerable:!0,configurable:!0}}Object.defineProperties(os,R);for(const k in R)Object.defineProperties(os[k],R),delete os[k][k];$m=yL(),os[fe.launched]=!0}return i===void 0&&(Mt.debug(`Setting up ${h} component`),i=cL(Object.create(os),o)),o.code===void 0&&(Mt.debug(`Generating code for ${h} component`),o.code=AR.call(o,kR(o.template))),c.call(Object.create(i),x,w,y,a)};return f[Symbol.for("config")]=o,f[fe.isComponent]=!0,f},xL=h=>{const o={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};h.hooks=h.hooks||{};let i,c,f,x=0,w=null;return h.hooks[fe.destroy]=function(){document.removeEventListener("keydown",i),document.removeEventListener("keyup",c)},h.hooks[fe.init]=function(){this.$announcer.toggle(ni.get("announcer",!1));const y={...o,...ni.get("keymap",{})},a=ni.get("inputThrottle",0);i=async C=>{const R=performance.now(),k=y[C.key]||y[C.keyCode]||C.key||C.keyCode,I=w===k;if(w=k,a===0||C[fe.internalEvent]===!0||I===!1)return await r.call(this,C,k);R-x<a||(x=R,await r.call(this,C,k))};const r=async function(C,R){this[fe.inputEvents]!==void 0&&this[fe.inputEvents].intercept!==void 0&&(C=await this[fe.inputEvents].intercept.call(this,C),!(C instanceof KeyboardEvent))||(as.input(R,C),clearTimeout(f),f=setTimeout(()=>{as.hold=!0},ni.get("holdTimeout",KC)))};c=C=>{const R=gy.get(C.code);R!==void 0&&typeof R=="function"&&(gy.delete(C.code),R()),clearTimeout(f),as.hold=!1},document.addEventListener("keydown",i),document.addEventListener("keyup",c),setTimeout(()=>as.set(this))},Qu("App",h)},Oe={Component:Qu,Application:xL,Launch:_8,Plugin:a4},rC=h=>new Promise((o,i)=>{const c=new XMLHttpRequest;c.onreadystatechange=function(){c.readyState==XMLHttpRequest.DONE&&(c.status===0||c.status===200?o(JSON.parse(c.responseText)):i(c.statusText))},c.open("GET",h),c.send(null)}),wL={name:"language",plugin(h={}){let o={},i={};const c=Vl({language:"",loaded:0},ni.get("reactivityMode"),!0),f=a=>{const r=Object.keys(o).length===0?"No translations loaded. Please load a file with translations or specify a translations object manually":a in o?!1:`Language ${a} not available in the loaded translations`;r?(Mt.warn(r),c.language=a):x(a).then(()=>{c.language=a})},x=a=>new Promise(r=>{const C=o[a];typeof C=="object"?(i=C,r()):typeof C=="string"&&rC(C).then(R=>{o[a]=R,i=R,r()}).catch(R=>{Mt.error(R)})}),w=a=>rC(a).then(r=>{y(r)}).catch(r=>{Mt.error(r)}),y=a=>{o=a,x(c.language).then(()=>{c.loaded++})};return"file"in h?w(h.file).then(()=>{"language"in h&&f(h.language)}):"language"in h&&f(h.language),{translate(a){c.language,c.loaded;let r=[...arguments].slice(1);return r.length===0?i&&i[a]||a:(r.length===1&&typeof r[0]=="object"&&(r=r.pop()),Object.keys(Array.isArray(r)?Object.assign({},r):r).reduce((C,R)=>C.replace(new RegExp("{\\s?"+R+"\\s?}","g"),r[R]),i&&i[a]||a))},get language(){return c.language},set(a){f(a)},translations(a){y(a)},load(a){return w(a)}}}},SL=(h,o,i)=>{const c=i.split(".");for(let f=0;f<c.length;f++){const x=c[f];if(h!==null&&x in h)h=h[x],o=o!==null&&x in o?o[x]:null;else if(o!==null&&x in o)o=o[x],h=o;else{h=void 0;break}}return h},l4={name:"theme",plugin(h={}){let o={};const i=Vl({current:"default"},ni.get("reactivityMode"),!0);let c={},f=null;return"themes"in h?(c=h.themes,i.current=h.current||"default",f=h.base||"default"):c={default:h},{get(x,w){if(i.current,o[x]!==void 0)return o[x];const y=SL(c[i.current],c[f]||null,x);return y!==void 0?(o[x]=y,y):w},set(x){x in c?(o={},i.current=x):Mt.warn(`Theme ${x} not found`)}}}};class TL{constructor(o){return o=o||{},this.forceCookies=o.forceCookies||!1,this._checkIfLocalStorageWorks()===!0&&o.forceCookies!==!0?{getItem:this._getItemLocalStorage,setItem:this._setItemLocalStorage,removeItem:this._removeItemLocalStorage,clear:this._clearLocalStorage,keys:this._getLocalStorageKeys}:{getItem:this._getItemCookie,setItem:this._setItemCookie,removeItem:this._removeItemCookie,clear:this._clearCookies,keys:this._getCookieKeys}}_checkIfLocalStorageWorks(){if(typeof localStorage<"u")try{return localStorage.setItem("feature_test","yes"),localStorage.getItem("feature_test")==="yes"?(localStorage.removeItem("feature_test"),!0):!1}catch{return!1}else return!1}_getItemLocalStorage(o){return window.localStorage.getItem(o)}_setItemLocalStorage(o,i){return window.localStorage.setItem(o,i)}_removeItemLocalStorage(o){return window.localStorage.removeItem(o)}_clearLocalStorage(){return window.localStorage.clear()}_getLocalStorageKeys(){return Object.keys(window.localStorage)}_getItemCookie(o){function i(f){return f.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")}var c=document.cookie.match(RegExp("(?:^|;\\s*)"+i(o)+"=([^;]*)"));return c&&c[1]===""&&(c[1]=null),c?c[1]:null}_setItemCookie(o,i){var c=new Date,f=new Date(c.getTime()+1e3*60*60*24*365*5);document.cookie=`${o}=${i}; expires=${f.toUTCString()};`}_removeItemCookie(o){document.cookie=`${o}=;Max-Age=-99999999;`}_clearCookies(){document.cookie.split(";").forEach(o=>{document.cookie=o.replace(/^ +/,"").replace(/=.*/,"=;expires=;Max-Age=-99999999")})}_getCookieKeys(){return document.cookie.split(";").map(o=>o.trim().split("=")[0])}}new TL;const zm=h=>new URLSearchParams(window.location.search).get(h),Cl={sky:{test(){return navigator.userAgent.indexOf("WPE Sky")>-1||zm("keymapping")==="sky"},mapping:{Escape:"back",27:"back"}},webos:{test(){return navigator.userAgent.indexOf("WebOS")>-1||zm("keymapping")==="webos"},mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test(){return navigator.userAgent.indexOf("Tizen")>-1||zm("keymapping")==="tizen"},mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},CL=()=>{let h={};return Object.keys(Cl).forEach(o=>{if(Cl[o].test&&typeof Cl[o].test=="function"&&Cl[o].test()===!0){h=Cl[o].mapping;return}}),h},bL=Oe.Component("PortalItem",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=370,r[0].h=320,r[0].scale={transition:i.hasFocus?1.1:1},r[0].color=i.backgroundColor,r[0].effects=[{type:"radius",props:{radius:6}}],a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].x=30,r[1].y=30,r[1].content=i.number,r[1].size=84,r[1].color=i.fontColor,r[1].__textnode=!0,a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].x=30,r[2].y=140,r[2].content=i.title,r[2].size=42,r[2].font="raleway",r[2].color=i.fontColor,r[2].letterspacing=2,r[2].__textnode=!0,a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].x=30,r[3].y=200,r[3].content=i.description,r[3].maxwidth=300,r[3].size=28,r[3].color=i.fontColor,r[3].lineheight=32,r[3].__textnode=!0,a[3].populate(r[3]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("scale",{transition:o.hasFocus?1.1:1})},function(o,i,c,f,x,w){i[0].set("color",o.backgroundColor)},function(o,i,c,f,x,w){i[0].set("effects",[{type:"radius",props:{radius:6}}])},function(o,i,c,f,x,w){i[1].set("content",o.number)},function(o,i,c,f,x,w){i[1].set("color",o.fontColor)},function(o,i,c,f,x,w){i[2].set("content",o.title)},function(o,i,c,f,x,w){i[2].set("color",o.fontColor)},function(o,i,c,f,x,w){i[3].set("content",o.description)},function(o,i,c,f,x,w){i[3].set("color",o.fontColor)}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),kL=Oe.Component("PortalRow",{components:{PortalItem:bL},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E,A=!1,N=[];r[0]={},a[0]=this.element({parent:o||"root"},A===!0?E:i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},A===!0?E:i),r[1].alpha={transition:{value:i.itemOffset<240?1:0,duration:200}},a[1].populate(r[1]),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},A===!0?E:i),r[2].content=i.title,r[2].x=60,r[2].__textnode=!0,a[2].populate(r[2]),o=a[1],r[3]={},a[3]=this.element({parent:o||"root"},A===!0?E:i),r[3].y=50,r[3].x=60,r[3].h=1,r[3].w=1800,r[3].color="0xe8d7f9ff",a[3].populate(r[3]),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},A===!0?E:i),r[4].y=100,r[4].x={transition:i.rowOffset},a[4].populate(r[4]),o=a[4],k[5]=[];let K,Se;C[5]=(oe=[],pe,D)=>{const ne=w(oe),le=new Set;let me=ne.length;const V={};for(K=V.from||0,Se=("to"in V)?V.to:ne.length;me--;){const se=ne[me];me<Se&&me>=K&&le.add(""+se.id)}let re=D.length;for(;re--;)if(le.has(D[re])===!1){const se=D[re];pe[5][se]&&pe[5][se].destroy(),pe[5][se]=null,delete pe[5][se],pe[6][se]&&pe[6][se].destroy(),pe[6][se]=null,delete pe[6][se]}D.length=0;const H=ne.length,z=[];for(let se=0;se<H;se++){if(se<K||se>=Se)continue;const we=Object.create(i);if(o=pe[4],we.item=ne[se],we.index=se,we.key=""+we.item.id,D.push(we.key),N[5]=c.components&&c.components.PortalItem||f.PortalItem,pe[5]===void 0&&(pe[5]={}),r[5]={},pe[5][we.key]===void 0&&(pe[5][we.key]=this.element({parent:o||"root"},A===!0?E:i)),r[5].x={transition:{value:we.itemOffset+we.index*430,delay:50*(we.index%4),duration:500}},r[5].title=we.item.title,r[5].description=we.item.description,r[5].id=we.item.id,r[5].index=we.index,r[5].ref="item"+we.index,I[5]=[],typeof N[5]<"u")for(let Je in N[5][Symbol.for("config")].props)delete r[5][N[5][Symbol.for("config")].props[Je]],I[5].push(N[5][Symbol.for("config")].props[Je]);if(pe[5][we.key].nodeId===void 0&&pe[5][we.key].populate(r[5]),pe[6]===void 0&&(pe[6]={}),o=pe[5][we.key],R[6]={},pe[6][we.key]===void 0){if(S={transition:{value:we.itemOffset+we.index*430,delay:50*(we.index%4),duration:500}},Array.isArray(S)===!0&&(S=w(S).slice(0)),R[6].x=S,R[6].title=we.item.title,R[6].description=we.item.description,R[6].id=we.item.id,R[6].index=we.index,S="item"+we.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[6].ref=S,m=R[6].is||"PortalItem",f[6],typeof m=="string"){if(f[6]=c.components&&c.components[m]||f[m],!f[6])throw new Error('Component "PortalItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[6]=m);pe[6][we.key]=f[6].call(null,{props:R[6]},pe[5][we.key],i),pe[6][we.key][Symbol.for("slots")][0]?(o=pe[6][we.key][Symbol.for("slots")][0],E=pe[6][we.key],A=!0):o=pe[6][we.key][Symbol.for("children")][0]}let Fe=()=>{(typeof I>"u"||typeof I[5]>"u"||I[5].indexOf("ref")===-1)&&pe[5][we.key].set("ref","item"+we.index)};x(Fe,null),z.push(Fe),i[Symbol.for("effects")].push(Fe),pe[6][we.key][Symbol.for("props")].ref="item"+we.index}return z};let Me=()=>{C[5](i.items,a,k[5])};i[Symbol.for("effects")].push(Me),x(Me,["items"]);let ue=()=>{i.itemOffset;for(let oe=0;oe<i.items.length;oe++){if(oe<K||oe>=Se)continue;const pe={};pe.index=oe,pe.item=i.items[oe],pe.key=pe.item.id,(typeof I>"u"||typeof I[5]>"u"||I[5].indexOf("x")===-1)&&a[5][pe.key].set("x",{transition:{value:i.itemOffset+pe.index*430,delay:50*(pe.index%4),duration:500}})}};i[Symbol.for("effects")].push(ue),x(ue);let he=()=>{i.itemOffset;for(let oe=0;oe<i.items.length;oe++){if(oe<K||oe>=Se)continue;const pe={};pe.index=oe,pe.item=i.items[oe],pe.key=pe.item.id,a[6][pe.key][Symbol.for("props")].x={transition:{value:i.itemOffset+pe.index*430,delay:50*(pe.index%4),duration:500}}}};return i[Symbol.for("effects")].push(he),x(he),{elms:a,cleanup:()=>{S=null,E=null,i=null,o=null,k[5].length=0,C[5]=null,N[5]=null,R[6]=null,f[6]=null,Me=null,ue=null,he=null,N.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("alpha",{transition:{value:o.itemOffset<240?1:0,duration:200}})},function(o,i,c,f,x,w){i[4].set("x",{transition:o.rowOffset})}],context:{}},props:["title","items"],state(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(h){const o=this.$select(`item${h}`);o&&o.$focus&&(o.$focus(),h<1?this.rowOffset=60:h>this.items.length-2?this.rowOffset=60-(this.items.length-2)*430+430:this.rowOffset=60-h*430+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),f4=Oe.Component("SourceInfo",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].x=1860,r[0].y={transition:{value:1060+i.offsetY,delay:1e3,duration:300,easing:"ease-out"}},r[0].alpha={transition:{value:i.alpha,delay:1e3,duration:300,easing:"ease-out"}},r[0].w=480,r[0].h=100,r[0].mount=1,r[0].color="{top: '0x000000dd', bottom: '0x000000ff'}",r[0].effects=[{type:"radius",props:{radius:10}}],a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].y=18,r[1].x=20,r[1].size=26,r[1].maxwidth=440,r[1].align="center",r[1].lineheight=32,r[1].content='Press "U" to check out the source code of this example on GitHub',r[1].__textnode=!0,a[1].populate(r[1]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("y",{transition:{value:1060+o.offsetY,delay:1e3,duration:300,easing:"ease-out"}})},function(o,i,c,f,x,w){i[0].set("alpha",{transition:{value:o.alpha,delay:1e3,duration:300,easing:"ease-out"}})},function(o,i,c,f,x,w){i[0].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state(){return{offsetY:15,alpha:0}},hooks:{ready(){this.offsetY=0,this.alpha=1}}}),AL="1.16.0",EL={version:AL},IL=Oe.Component("Portal",{components:{PortalRow:kL,SourceInfo:f4},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),r[0].w=1920,r[0].h=1080,r[0].color="{top: '0x44037aff', bottom: '0x240244ff'}",a[0].populate(r[0]),S===!0&&(E-=1),A[1]=c.components&&c.components.PortalRow||f.PortalRow,o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].mount="{y: 0.5}",r[1].h=500,r[1].y={transition:-i.rowFocused*420+550},r[1].title="Demos",r[1].items=i.demo,r[1].ref="row0",R[1]=[],typeof A[1]<"u")for(let N in A[1][Symbol.for("config")].props)delete r[1][A[1][Symbol.for("config")].props[N]],R[1].push(A[1][Symbol.for("config")].props[N]);if(a[1].populate(r[1]),S===!0&&(E-=1),o=a[1],C[2]={},C[2].mount="{y: 0.5}",C[2].h=500,I={transition:-i.rowFocused*420+550},Array.isArray(I)===!0&&(I=w(I).slice(0)),C[2].y=I,C[2].title="Demos",C[2].items=i.demo,C[2].ref="row0",k=C[2].is||"PortalRow",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "PortalRow" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);if(a[2]=f[2].call(null,{props:C[2]},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],m=a[2],S=!0):o=a[2][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[3]=c.components&&c.components.PortalRow||f.PortalRow,o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},S===!0?m:i),r[3].mount="{y: 0.5}",r[3].h=500,r[3].y={transition:-i.rowFocused*420+1100},r[3].title="Examples and tests",r[3].items=i.example,r[3].ref="row1",R[3]=[],typeof A[3]<"u")for(let N in A[3][Symbol.for("config")].props)delete r[3][A[3][Symbol.for("config")].props[N]],R[3].push(A[3][Symbol.for("config")].props[N]);if(a[3].populate(r[3]),S===!0&&(E-=1),o=a[3],C[4]={},C[4].mount="{y: 0.5}",C[4].h=500,I={transition:-i.rowFocused*420+1100},Array.isArray(I)===!0&&(I=w(I).slice(0)),C[4].y=I,C[4].title="Examples and tests",C[4].items=i.example,C[4].ref="row1",k=C[4].is||"PortalRow",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "PortalRow" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);if(a[4]=f[4].call(null,{props:C[4]},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],m=a[4],S=!0):o=a[4][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[5]=c.components&&c.components.PortalRow||f.PortalRow,o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},S===!0?m:i),r[5].mount="{y: 0.5}",r[5].h=500,r[5].y={transition:-i.rowFocused*420+1650},r[5].title="Benchmarks and stress tests",r[5].items=i.benchmark,r[5].ref="row2",R[5]=[],typeof A[5]<"u")for(let N in A[5][Symbol.for("config")].props)delete r[5][A[5][Symbol.for("config")].props[N]],R[5].push(A[5][Symbol.for("config")].props[N]);if(a[5].populate(r[5]),S===!0&&(E-=1),o=a[5],C[6]={},C[6].mount="{y: 0.5}",C[6].h=500,I={transition:-i.rowFocused*420+1650},Array.isArray(I)===!0&&(I=w(I).slice(0)),C[6].y=I,C[6].title="Benchmarks and stress tests",C[6].items=i.benchmark,C[6].ref="row2",k=C[6].is||"PortalRow",f[6],typeof k=="string"){if(f[6]=c.components&&c.components[k]||f[k],!f[6])throw new Error('Component "PortalRow" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[6]=k);return a[6]=f[6].call(null,{props:C[6]},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],m=a[6],S=!0):o=a[6][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),o=a[0],r[7]={},a[7]=this.element({parent:o||"root"},S===!0?m:i),r[7].w=1920,r[7].h=200,r[7].color="0x44037aff",a[7].populate(r[7]),S===!0&&(E-=1),o=a[7],r[8]={},a[8]=this.element({parent:o||"root"},S===!0?m:i),r[8].w=1920,r[8].h=70,r[8].y=200,r[8].color="{top: '0x44037aff'}",a[8].populate(r[8]),S===!0&&(E-=1),o=a[7],r[9]={},a[9]=this.element({parent:o||"root"},S===!0?m:i),r[9].y={transition:{value:80-i.logoOffset,duration:400}},a[9].populate(r[9]),S===!0&&(E-=1),o=a[9],r[10]={},a[10]=this.element({parent:o||"root"},S===!0?m:i),r[10].src="assets/blits-logo-full.png",r[10].w=200,r[10].h=112,r[10].x=60,a[10].populate(r[10]),S===!0&&(E-=1),o=a[9],r[11]={},a[11]=this.element({parent:o||"root"},S===!0?m:i),r[11].w=2,r[11].h=120,r[11].y="-10",r[11].color="0xffffff80",r[11].x=300,a[11].populate(r[11]),S===!0&&(E-=1),o=a[9],r[12]={},a[12]=this.element({parent:o||"root"},S===!0?m:i),r[12].x=320,r[12].y=16,a[12].populate(r[12]),S===!0&&(E-=1),o=a[12],r[13]={},a[13]=this.element({parent:o||"root"},S===!0?m:i),r[13].y=0,r[13].size=36,r[13].content="Example App",r[13].__textnode=!0,a[13].populate(r[13]),S===!0&&(E-=1),o=a[12],r[14]={},a[14]=this.element({parent:o||"root"},S===!0?m:i),r[14].y=50,r[14].size=24,r[14].content="v"+i.version,r[14].__textnode=!0,a[14].populate(r[14]),S===!0&&(E-=1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[1]=null,C[2]=null,f[2]=null,A[3]=null,C[4]=null,f[4]=null,A[5]=null,C[6]=null,f[6]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[1]>"u"||skips[1].indexOf("y")===-1)&&i[1].set("y",{transition:-o.rowFocused*420+550})},function(o,i,c,f,x,w){i[2][Symbol.for("props")].y={transition:-o.rowFocused*420+550}},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[3]>"u"||skips[3].indexOf("y")===-1)&&i[3].set("y",{transition:-o.rowFocused*420+1100})},function(o,i,c,f,x,w){i[4][Symbol.for("props")].y={transition:-o.rowFocused*420+1100}},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[5]>"u"||skips[5].indexOf("y")===-1)&&i[5].set("y",{transition:-o.rowFocused*420+1650})},function(o,i,c,f,x,w){i[6][Symbol.for("props")].y={transition:-o.rowFocused*420+1650}},function(o,i,c,f,x,w){i[9].set("y",{transition:{value:80-o.logoOffset,duration:400}})}],context:{}},state(){return{version:EL.version,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"},{title:"Router Hooks",id:"examples/router-hooks",description:"Example of router before hook"},{title:"Image resizing",id:"examples/resize",description:'Using the "fit" syntax for resizing images on the fly'},{title:"Translations",id:"examples/translations",description:"Language Plugin for internationalization"},{title:"Firebolt",id:"examples/firebolt",description:"Example Firebolt Integration"},{title:"Keycodes",id:"examples/keycodes",description:"Find the correct keycode mappings for your device"},{title:"Special Chars",id:"examples/special-characters",description:"Accents and special characters with MSDF fonts"},{title:"Layout",id:"examples/layout",description:'Using the built-in "Layout" Component'},{title:"Announcer",id:"examples/announcer",description:'Using the built-in "Announcer" plugin'}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready(){this.logoOffset=0},focus(){this.$trigger("rowFocused")}},watch:{rowFocused(h){const o=this.$select(`row${h}`);o&&o.$focus&&o.$focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),ML=Oe.Component("Letter",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].w=i.w,r[1].h={transition:{value:410+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},r[1].color="0xe6e6e6ff",a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].w=i.w,r[2].h=280,r[2].src=i.image,r[2].y={transition:{value:400+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].w=i.w,r[3].color="0xe6e6e6ff",r[3].h={transition:{value:500-i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},r[3].y={transition:{value:660+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},a[3].populate(r[3]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("h",{transition:{value:410+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})},function(o,i,c,f,x,w){i[2].set("src",o.image)},function(o,i,c,f,x,w){i[2].set("y",{transition:{value:400+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})},function(o,i,c,f,x,w){i[3].set("h",{transition:{value:500-o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})},function(o,i,c,f,x,w){i[3].set("y",{transition:{value:660+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return this.letter,`assets/${this.letter}.png`}},state(){return{offset:this.direction==="up"?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),RL=Oe.Component("Intro",{components:{Letter:ML},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m=!1,S=0,E=[];if(r[0]={},a[0]=this.element({parent:o||"root"},m===!0?I:i),r[0].w=1920,r[0].h=1080,r[0].src="assets/background.jpg",a[0].populate(r[0]),m===!0&&(S-=1),E[1]=c.components&&c.components.Letter||f.Letter,o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},m===!0?I:i),r[1].letter="l",r[1].w=294,R[1]=[],typeof E[1]<"u")for(let A in E[1][Symbol.for("config")].props)delete r[1][E[1][Symbol.for("config")].props[A]],R[1].push(E[1][Symbol.for("config")].props[A]);if(a[1].populate(r[1]),m===!0&&(S-=1),o=a[1],C[2]={},C[2].letter="l",C[2].w=294,k=C[2].is||"Letter",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);if(a[2]=f[2].call(null,{props:C[2]},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],I=a[2],m=!0):o=a[2][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),E[3]=c.components&&c.components.Letter||f.Letter,o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},m===!0?I:i),r[3].letter="i-1",r[3].w=128,r[3].x=294,r[3].direction="up",r[3].delay=50,R[3]=[],typeof E[3]<"u")for(let A in E[3][Symbol.for("config")].props)delete r[3][E[3][Symbol.for("config")].props[A]],R[3].push(E[3][Symbol.for("config")].props[A]);if(a[3].populate(r[3]),m===!0&&(S-=1),o=a[3],C[4]={},C[4].letter="i-1",C[4].w=128,C[4].x=294,C[4].direction="up",C[4].delay=50,k=C[4].is||"Letter",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);if(a[4]=f[4].call(null,{props:C[4]},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],I=a[4],m=!0):o=a[4][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),E[5]=c.components&&c.components.Letter||f.Letter,o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},m===!0?I:i),r[5].letter="g-1",r[5].w=205,r[5].x=422,r[5].delay=100,R[5]=[],typeof E[5]<"u")for(let A in E[5][Symbol.for("config")].props)delete r[5][E[5][Symbol.for("config")].props[A]],R[5].push(E[5][Symbol.for("config")].props[A]);if(a[5].populate(r[5]),m===!0&&(S-=1),o=a[5],C[6]={},C[6].letter="g-1",C[6].w=205,C[6].x=422,C[6].delay=100,k=C[6].is||"Letter",f[6],typeof k=="string"){if(f[6]=c.components&&c.components[k]||f[k],!f[6])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[6]=k);if(a[6]=f[6].call(null,{props:C[6]},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],I=a[6],m=!0):o=a[6][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),E[7]=c.components&&c.components.Letter||f.Letter,o=a[0],r[7]={},a[7]=this.element({parent:o||"root"},m===!0?I:i),r[7].letter="h",r[7].w=224,r[7].x=627,r[7].direction="up",r[7].delay=150,R[7]=[],typeof E[7]<"u")for(let A in E[7][Symbol.for("config")].props)delete r[7][E[7][Symbol.for("config")].props[A]],R[7].push(E[7][Symbol.for("config")].props[A]);if(a[7].populate(r[7]),m===!0&&(S-=1),o=a[7],C[8]={},C[8].letter="h",C[8].w=224,C[8].x=627,C[8].direction="up",C[8].delay=150,k=C[8].is||"Letter",f[8],typeof k=="string"){if(f[8]=c.components&&c.components[k]||f[k],!f[8])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[8]=k);if(a[8]=f[8].call(null,{props:C[8]},a[7],i),a[8][Symbol.for("slots")][0]?(o=a[8][Symbol.for("slots")][0],I=a[8],m=!0):o=a[8][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),E[9]=c.components&&c.components.Letter||f.Letter,o=a[0],r[9]={},a[9]=this.element({parent:o||"root"},m===!0?I:i),r[9].letter="t",r[9].w=190,r[9].x=851,r[9].delay=200,R[9]=[],typeof E[9]<"u")for(let A in E[9][Symbol.for("config")].props)delete r[9][E[9][Symbol.for("config")].props[A]],R[9].push(E[9][Symbol.for("config")].props[A]);if(a[9].populate(r[9]),m===!0&&(S-=1),o=a[9],C[10]={},C[10].letter="t",C[10].w=190,C[10].x=851,C[10].delay=200,k=C[10].is||"Letter",f[10],typeof k=="string"){if(f[10]=c.components&&c.components[k]||f[k],!f[10])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[10]=k);if(a[10]=f[10].call(null,{props:C[10]},a[9],i),a[10][Symbol.for("slots")][0]?(o=a[10][Symbol.for("slots")][0],I=a[10],m=!0):o=a[10][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),E[11]=c.components&&c.components.Letter||f.Letter,o=a[0],r[11]={},a[11]=this.element({parent:o||"root"},m===!0?I:i),r[11].letter="n-1",r[11].w=221,r[11].x=1041,r[11].direction="up",r[11].delay=250,R[11]=[],typeof E[11]<"u")for(let A in E[11][Symbol.for("config")].props)delete r[11][E[11][Symbol.for("config")].props[A]],R[11].push(E[11][Symbol.for("config")].props[A]);if(a[11].populate(r[11]),m===!0&&(S-=1),o=a[11],C[12]={},C[12].letter="n-1",C[12].w=221,C[12].x=1041,C[12].direction="up",C[12].delay=250,k=C[12].is||"Letter",f[12],typeof k=="string"){if(f[12]=c.components&&c.components[k]||f[k],!f[12])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[12]=k);if(a[12]=f[12].call(null,{props:C[12]},a[11],i),a[12][Symbol.for("slots")][0]?(o=a[12][Symbol.for("slots")][0],I=a[12],m=!0):o=a[12][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),E[13]=c.components&&c.components.Letter||f.Letter,o=a[0],r[13]={},a[13]=this.element({parent:o||"root"},m===!0?I:i),r[13].letter="i-2",r[13].w=115,r[13].x=1262,r[13].delay=300,R[13]=[],typeof E[13]<"u")for(let A in E[13][Symbol.for("config")].props)delete r[13][E[13][Symbol.for("config")].props[A]],R[13].push(E[13][Symbol.for("config")].props[A]);if(a[13].populate(r[13]),m===!0&&(S-=1),o=a[13],C[14]={},C[14].letter="i-2",C[14].w=115,C[14].x=1262,C[14].delay=300,k=C[14].is||"Letter",f[14],typeof k=="string"){if(f[14]=c.components&&c.components[k]||f[k],!f[14])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[14]=k);if(a[14]=f[14].call(null,{props:C[14]},a[13],i),a[14][Symbol.for("slots")][0]?(o=a[14][Symbol.for("slots")][0],I=a[14],m=!0):o=a[14][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),E[15]=c.components&&c.components.Letter||f.Letter,o=a[0],r[15]={},a[15]=this.element({parent:o||"root"},m===!0?I:i),r[15].letter="n-2",r[15].w=219,r[15].x=1377,r[15].direction="up",r[15].delay=350,R[15]=[],typeof E[15]<"u")for(let A in E[15][Symbol.for("config")].props)delete r[15][E[15][Symbol.for("config")].props[A]],R[15].push(E[15][Symbol.for("config")].props[A]);if(a[15].populate(r[15]),m===!0&&(S-=1),o=a[15],C[16]={},C[16].letter="n-2",C[16].w=219,C[16].x=1377,C[16].direction="up",C[16].delay=350,k=C[16].is||"Letter",f[16],typeof k=="string"){if(f[16]=c.components&&c.components[k]||f[k],!f[16])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[16]=k);if(a[16]=f[16].call(null,{props:C[16]},a[15],i),a[16][Symbol.for("slots")][0]?(o=a[16][Symbol.for("slots")][0],I=a[16],m=!0):o=a[16][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),E[17]=c.components&&c.components.Letter||f.Letter,o=a[0],r[17]={},a[17]=this.element({parent:o||"root"},m===!0?I:i),r[17].letter="g-2",r[17].w=324,r[17].x=1596,r[17].direction="up",r[17].delay=400,R[17]=[],typeof E[17]<"u")for(let A in E[17][Symbol.for("config")].props)delete r[17][E[17][Symbol.for("config")].props[A]],R[17].push(E[17][Symbol.for("config")].props[A]);if(a[17].populate(r[17]),m===!0&&(S-=1),o=a[17],C[18]={},C[18].letter="g-2",C[18].w=324,C[18].x=1596,C[18].direction="up",C[18].delay=400,k=C[18].is||"Letter",f[18],typeof k=="string"){if(f[18]=c.components&&c.components[k]||f[k],!f[18])throw new Error('Component "Letter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[18]=k);return a[18]=f[18].call(null,{props:C[18]},a[17],i),a[18][Symbol.for("slots")][0]?(o=a[18][Symbol.for("slots")][0],I=a[18],m=!0):o=a[18][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),{elms:a,cleanup:()=>{I=null,i=null,o=null,E[1]=null,C[2]=null,f[2]=null,E[3]=null,C[4]=null,f[4]=null,E[5]=null,C[6]=null,f[6]=null,E[7]=null,C[8]=null,f[8]=null,E[9]=null,C[10]=null,f[10]=null,E[11]=null,C[12]=null,f[12]=null,E[13]=null,C[14]=null,f[14]=null,E[15]=null,C[16]=null,f[16]=null,E[17]=null,C[18]=null,f[18]=null,E.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[],context:{}}}),_L=Oe.Component("Toggle",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),r[0].w=100,r[0].h=50,r[0].y=5,r[0].color=i.bgColor,r[0].effects=[{type:"radius",props:{radius:25}}],a[0].populate(r[0]),S===!0&&(E-=1),A[1]=c.components&&c.components.Circle||f.Circle,o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].x={transition:i.on?0:50},r[1].size=50,R[1]=[],typeof A[1]<"u")for(let N in A[1][Symbol.for("config")].props)delete r[1][A[1][Symbol.for("config")].props[N]],R[1].push(A[1][Symbol.for("config")].props[N]);if(a[1].populate(r[1]),S===!0&&(E-=1),o=a[1],C[2]={},I={transition:i.on?0:50},Array.isArray(I)===!0&&(I=w(I).slice(0)),C[2].x=I,C[2].size=50,I=i.primaryColor,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[2].color=I,k=C[2].is||"Circle",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "Circle" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);return a[2]=f[2].call(null,{props:C[2]},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],m=a[2],S=!0):o=a[2][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[1]=null,C[2]=null,f[2]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("color",o.bgColor)},function(o,i,c,f,x,w){i[0].set("effects",[{type:"radius",props:{radius:25}}])},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[1]>"u"||skips[1].indexOf("x")===-1)&&i[1].set("x",{transition:o.on?0:50})},function(o,i,c,f,x,w){i[2][Symbol.for("props")].x={transition:o.on?0:50}},function(o,i,c,f,x,w){i[2][Symbol.for("props")].color=o.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),LL=Oe.Component("Bar",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w={value:i.w,duration:i.duration},r[0].h={value:i.h,duration:i.duration},r[0].color=i.bgColor,r[0].x=i.index*(i.w+i.w/4),r[0].effects=[{type:"radius",props:{radius:10}}],a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].w=i.w,r[1].y={transition:{value:i.h-i.innerH,duration:i.duration}},r[1].h={transition:{value:i.innerH,duration:i.duration}},r[1].color=i.primaryColor,r[1].effects=[{type:"radius",props:{radius:10}}],a[1].populate(r[1]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("w",{value:o.w,duration:o.duration})},function(o,i,c,f,x,w){i[0].set("h",{value:o.h,duration:o.duration})},function(o,i,c,f,x,w){i[0].set("color",o.bgColor)},function(o,i,c,f,x,w){i[0].set("x",o.index*(o.w+o.w/4))},function(o,i,c,f,x,w){i[0].set("effects",[{type:"radius",props:{radius:10}}])},function(o,i,c,f,x,w){i[1].set("w",o.w)},function(o,i,c,f,x,w){i[1].set("y",{transition:{value:o.h-o.innerH,duration:o.duration}})},function(o,i,c,f,x,w){i[1].set("h",{transition:{value:o.innerH,duration:o.duration}})},function(o,i,c,f,x,w){i[1].set("color",o.primaryColor)},function(o,i,c,f,x,w){i[1].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state(){return{h:200,innerH:0,duration:400}},hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size,this.size==="large"?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),DL=Oe.Component("Theming",{components:{Bar:LL,Toggle:_L},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),r[0].w=1920,r[0].h=1080,r[0].color={transition:i.$colors.get("bg")},a[0].populate(r[0]),S===!0&&(E-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].y=1020,r[1].x=1160,r[1].size=28,r[1].color=i.$colors.get("color4"),r[1].content='Use "up", "down", "left" and "right" to change the appearance',r[1].__textnode=!0,a[1].populate(r[1]),S===!0&&(E-=1),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},S===!0?m:i),r[2].x={transition:(1920-i.$sizes.get("w"))/2},r[2].y={transition:(1080-i.$sizes.get("h"))/2},a[2].populate(r[2]),S===!0&&(E-=1),o=a[2],r[3]={},a[3]=this.element({parent:o||"root"},S===!0?m:i),r[3].x="-250",r[3].y="-100",r[3].src="assets/shadow.png",r[3].w=1e3,r[3].h=900,r[3].alpha=.5,a[3].populate(r[3]),S===!0&&(E-=1),o=a[2],r[4]={},a[4]=this.element({parent:o||"root"},S===!0?m:i),r[4].w={transition:i.$sizes.get("w")},r[4].h={transition:i.$sizes.get("h")},r[4].color=i.$colors.get("color1"),r[4].effects=[{type:"radius",props:{radius:i.radius}}],a[4].populate(r[4]),S===!0&&(E-=1),o=a[4],r[5]={},a[5]=this.element({parent:o||"root"},S===!0?m:i),r[5].w={transition:i.$sizes.get("w")},r[5].h=100,r[5].color=i.$colors.get("color2"),r[5].effects=[{type:"radius",props:{radius:i.radius}}],a[5].populate(r[5]),S===!0&&(E-=1),o=a[4],r[6]={},a[6]=this.element({parent:o||"root"},S===!0?m:i),r[6].w={transition:i.$sizes.get("w")},r[6].h=80,r[6].y=20,r[6].color=i.$colors.get("color2"),a[6].populate(r[6]),S===!0&&(E-=1),o=a[4],r[7]={},a[7]=this.element({parent:o||"root"},S===!0?m:i),r[7].content=i.text,r[7].color=i.$colors.get("color3"),r[7].size=28,r[7].x=20,r[7].y=14,r[7].__textnode=!0,a[7].populate(r[7]),S===!0&&(E-=1),A[8]=c.components&&c.components.Toggle||f.Toggle,o=a[4],r[8]={},a[8]=this.element({parent:o||"root"},S===!0?m:i),r[8].x={transition:i.$sizes.get("w")-120},r[8].on=i.mode==="dark",r[8].bgColor=i.$colors.get("color1"),r[8].primaryColor="#22c55e",R[8]=[],typeof A[8]<"u")for(let N in A[8][Symbol.for("config")].props)delete r[8][A[8][Symbol.for("config")].props[N]],R[8].push(A[8][Symbol.for("config")].props[N]);if(a[8].populate(r[8]),S===!0&&(E-=1),o=a[8],C[9]={},I={transition:i.$sizes.get("w")-120},Array.isArray(I)===!0&&(I=w(I).slice(0)),C[9].x=I,I=i.mode==="dark",Array.isArray(I)===!0&&(I=w(I).slice(0)),C[9].on=I,I=i.$colors.get("color1"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[9].bgColor=I,C[9].primaryColor="#22c55e",k=C[9].is||"Toggle",f[9],typeof k=="string"){if(f[9]=c.components&&c.components[k]||f[k],!f[9])throw new Error('Component "Toggle" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[9]=k);if(a[9]=f[9].call(null,{props:C[9]},a[8],i),a[9][Symbol.for("slots")][0]?(o=a[9][Symbol.for("slots")][0],m=a[9],S=!0):o=a[9][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),o=a[2],r[10]={},a[10]=this.element({parent:o||"root"},S===!0?m:i),r[10].w=200,r[10].h={transition:i.$sizes.get("block1.h")},r[10].x=25,r[10].y=140,r[10].color=i.$colors.get("color2"),r[10].effects=[{type:"radius",props:{radius:i.radius/2}}],a[10].populate(r[10]),S===!0&&(E-=1),o=a[2],r[11]={},a[11]=this.element({parent:o||"root"},S===!0?m:i),r[11].w={transition:i.$sizes.get("block2.w")},r[11].h=i.$sizes.get("block2.h"),r[11].x=270,r[11].y={transition:i.$sizes.get("block2.y")},r[11].color=i.$colors.get("color2"),r[11].effects=[{type:"radius",props:{radius:i.radius/2}}],a[11].populate(r[11]),S===!0&&(E-=1),o=a[2],r[12]={},a[12]=this.element({parent:o||"root"},S===!0?m:i),r[12].x={transition:i.$sizes.get("graph.x")},r[12].y={transition:i.$sizes.get("graph.y")},r[12].w=i.$sizes.get("graph.w"),r[12].h=i.$sizes.get("graph.h"),r[12].color="0x00000000",a[12].populate(r[12]),S===!0&&(E-=1),o=a[12],r[13]={},a[13]=this.element({parent:o||"root"},S===!0?m:i),r[13].x={transition:i.$sizes.get("graph.offset")},r[13].y={transition:i.$sizes.get("graph.offset")},a[13].populate(r[13]),S===!0&&(E-=1),A[14]=c.components&&c.components.Bar||f.Bar,o=a[13],r[14]={},a[14]=this.element({parent:o||"root"},S===!0?m:i),r[14].bgColor=i.$colors.get("color2"),r[14].primaryColor=i.$colors.get("color4"),r[14].size=i.$sizes.get("graph.size"),r[14].height=100,r[14].index=0,R[14]=[],typeof A[14]<"u")for(let N in A[14][Symbol.for("config")].props)delete r[14][A[14][Symbol.for("config")].props[N]],R[14].push(A[14][Symbol.for("config")].props[N]);if(a[14].populate(r[14]),S===!0&&(E-=1),o=a[14],C[15]={},I=i.$colors.get("color2"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[15].bgColor=I,I=i.$colors.get("color4"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[15].primaryColor=I,I=i.$sizes.get("graph.size"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[15].size=I,C[15].height=100,C[15].index=0,k=C[15].is||"Bar",f[15],typeof k=="string"){if(f[15]=c.components&&c.components[k]||f[k],!f[15])throw new Error('Component "Bar" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[15]=k);if(a[15]=f[15].call(null,{props:C[15]},a[14],i),a[15][Symbol.for("slots")][0]?(o=a[15][Symbol.for("slots")][0],m=a[15],S=!0):o=a[15][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[16]=c.components&&c.components.Bar||f.Bar,o=a[13],r[16]={},a[16]=this.element({parent:o||"root"},S===!0?m:i),r[16].bgColor=i.$colors.get("color2"),r[16].primaryColor=i.$colors.get("color4"),r[16].size=i.$sizes.get("graph.size"),r[16].height=140,r[16].index=1,R[16]=[],typeof A[16]<"u")for(let N in A[16][Symbol.for("config")].props)delete r[16][A[16][Symbol.for("config")].props[N]],R[16].push(A[16][Symbol.for("config")].props[N]);if(a[16].populate(r[16]),S===!0&&(E-=1),o=a[16],C[17]={},I=i.$colors.get("color2"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[17].bgColor=I,I=i.$colors.get("color4"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[17].primaryColor=I,I=i.$sizes.get("graph.size"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[17].size=I,C[17].height=140,C[17].index=1,k=C[17].is||"Bar",f[17],typeof k=="string"){if(f[17]=c.components&&c.components[k]||f[k],!f[17])throw new Error('Component "Bar" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[17]=k);if(a[17]=f[17].call(null,{props:C[17]},a[16],i),a[17][Symbol.for("slots")][0]?(o=a[17][Symbol.for("slots")][0],m=a[17],S=!0):o=a[17][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[18]=c.components&&c.components.Bar||f.Bar,o=a[13],r[18]={},a[18]=this.element({parent:o||"root"},S===!0?m:i),r[18].bgColor=i.$colors.get("color2"),r[18].primaryColor=i.$colors.get("color4"),r[18].size=i.$sizes.get("graph.size"),r[18].height=170,r[18].index=2,R[18]=[],typeof A[18]<"u")for(let N in A[18][Symbol.for("config")].props)delete r[18][A[18][Symbol.for("config")].props[N]],R[18].push(A[18][Symbol.for("config")].props[N]);if(a[18].populate(r[18]),S===!0&&(E-=1),o=a[18],C[19]={},I=i.$colors.get("color2"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[19].bgColor=I,I=i.$colors.get("color4"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[19].primaryColor=I,I=i.$sizes.get("graph.size"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[19].size=I,C[19].height=170,C[19].index=2,k=C[19].is||"Bar",f[19],typeof k=="string"){if(f[19]=c.components&&c.components[k]||f[k],!f[19])throw new Error('Component "Bar" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[19]=k);if(a[19]=f[19].call(null,{props:C[19]},a[18],i),a[19][Symbol.for("slots")][0]?(o=a[19][Symbol.for("slots")][0],m=a[19],S=!0):o=a[19][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[20]=c.components&&c.components.Bar||f.Bar,o=a[13],r[20]={},a[20]=this.element({parent:o||"root"},S===!0?m:i),r[20].bgColor=i.$colors.get("color2"),r[20].primaryColor=i.$colors.get("color4"),r[20].size=i.$sizes.get("graph.size"),r[20].height=150,r[20].index=3,R[20]=[],typeof A[20]<"u")for(let N in A[20][Symbol.for("config")].props)delete r[20][A[20][Symbol.for("config")].props[N]],R[20].push(A[20][Symbol.for("config")].props[N]);if(a[20].populate(r[20]),S===!0&&(E-=1),o=a[20],C[21]={},I=i.$colors.get("color2"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[21].bgColor=I,I=i.$colors.get("color4"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[21].primaryColor=I,I=i.$sizes.get("graph.size"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[21].size=I,C[21].height=150,C[21].index=3,k=C[21].is||"Bar",f[21],typeof k=="string"){if(f[21]=c.components&&c.components[k]||f[k],!f[21])throw new Error('Component "Bar" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[21]=k);if(a[21]=f[21].call(null,{props:C[21]},a[20],i),a[21][Symbol.for("slots")][0]?(o=a[21][Symbol.for("slots")][0],m=a[21],S=!0):o=a[21][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[22]=c.components&&c.components.Bar||f.Bar,o=a[13],r[22]={},a[22]=this.element({parent:o||"root"},S===!0?m:i),r[22].bgColor=i.$colors.get("color2"),r[22].primaryColor=i.$colors.get("color4"),r[22].size=i.$sizes.get("graph.size"),r[22].height=90,r[22].index=4,R[22]=[],typeof A[22]<"u")for(let N in A[22][Symbol.for("config")].props)delete r[22][A[22][Symbol.for("config")].props[N]],R[22].push(A[22][Symbol.for("config")].props[N]);if(a[22].populate(r[22]),S===!0&&(E-=1),o=a[22],C[23]={},I=i.$colors.get("color2"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[23].bgColor=I,I=i.$colors.get("color4"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[23].primaryColor=I,I=i.$sizes.get("graph.size"),Array.isArray(I)===!0&&(I=w(I).slice(0)),C[23].size=I,C[23].height=90,C[23].index=4,k=C[23].is||"Bar",f[23],typeof k=="string"){if(f[23]=c.components&&c.components[k]||f[k],!f[23])throw new Error('Component "Bar" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[23]=k);return a[23]=f[23].call(null,{props:C[23]},a[22],i),a[23][Symbol.for("slots")][0]?(o=a[23][Symbol.for("slots")][0],m=a[23],S=!0):o=a[23][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[8]=null,C[9]=null,f[9]=null,A[14]=null,C[15]=null,f[15]=null,A[16]=null,C[17]=null,f[17]=null,A[18]=null,C[19]=null,f[19]=null,A[20]=null,C[21]=null,f[21]=null,A[22]=null,C[23]=null,f[23]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("color",{transition:o.$colors.get("bg")})},function(o,i,c,f,x,w){i[1].set("color",o.$colors.get("color4"))},function(o,i,c,f,x,w){i[2].set("x",{transition:(1920-o.$sizes.get("w"))/2})},function(o,i,c,f,x,w){i[2].set("y",{transition:(1080-o.$sizes.get("h"))/2})},function(o,i,c,f,x,w){i[4].set("w",{transition:o.$sizes.get("w")})},function(o,i,c,f,x,w){i[4].set("h",{transition:o.$sizes.get("h")})},function(o,i,c,f,x,w){i[4].set("color",o.$colors.get("color1"))},function(o,i,c,f,x,w){i[4].set("effects",[{type:"radius",props:{radius:o.radius}}])},function(o,i,c,f,x,w){i[5].set("w",{transition:o.$sizes.get("w")})},function(o,i,c,f,x,w){i[5].set("color",o.$colors.get("color2"))},function(o,i,c,f,x,w){i[5].set("effects",[{type:"radius",props:{radius:o.radius}}])},function(o,i,c,f,x,w){i[6].set("w",{transition:o.$sizes.get("w")})},function(o,i,c,f,x,w){i[6].set("color",o.$colors.get("color2"))},function(o,i,c,f,x,w){i[7].set("content",o.text)},function(o,i,c,f,x,w){i[7].set("color",o.$colors.get("color3"))},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[8]>"u"||skips[8].indexOf("x")===-1)&&i[8].set("x",{transition:o.$sizes.get("w")-120})},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[8]>"u"||skips[8].indexOf("on")===-1)&&i[8].set("on",o.mode==="dark")},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[8]>"u"||skips[8].indexOf("bgColor")===-1)&&i[8].set("bgColor",o.$colors.get("color1"))},function(o,i,c,f,x,w){i[9][Symbol.for("props")].x={transition:o.$sizes.get("w")-120}},function(o,i,c,f,x,w){i[9][Symbol.for("props")].on=o.mode==="dark"},function(o,i,c,f,x,w){i[9][Symbol.for("props")].bgColor=o.$colors.get("color1")},function(o,i,c,f,x,w){i[10].set("h",{transition:o.$sizes.get("block1.h")})},function(o,i,c,f,x,w){i[10].set("color",o.$colors.get("color2"))},function(o,i,c,f,x,w){i[10].set("effects",[{type:"radius",props:{radius:o.radius/2}}])},function(o,i,c,f,x,w){i[11].set("w",{transition:o.$sizes.get("block2.w")})},function(o,i,c,f,x,w){i[11].set("h",o.$sizes.get("block2.h"))},function(o,i,c,f,x,w){i[11].set("y",{transition:o.$sizes.get("block2.y")})},function(o,i,c,f,x,w){i[11].set("color",o.$colors.get("color2"))},function(o,i,c,f,x,w){i[11].set("effects",[{type:"radius",props:{radius:o.radius/2}}])},function(o,i,c,f,x,w){i[12].set("x",{transition:o.$sizes.get("graph.x")})},function(o,i,c,f,x,w){i[12].set("y",{transition:o.$sizes.get("graph.y")})},function(o,i,c,f,x,w){i[12].set("w",o.$sizes.get("graph.w"))},function(o,i,c,f,x,w){i[12].set("h",o.$sizes.get("graph.h"))},function(o,i,c,f,x,w){i[13].set("x",{transition:o.$sizes.get("graph.offset")})},function(o,i,c,f,x,w){i[13].set("y",{transition:o.$sizes.get("graph.offset")})},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[14]>"u"||skips[14].indexOf("bgColor")===-1)&&i[14].set("bgColor",o.$colors.get("color2"))},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[14]>"u"||skips[14].indexOf("primaryColor")===-1)&&i[14].set("primaryColor",o.$colors.get("color4"))},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[14]>"u"||skips[14].indexOf("size")===-1)&&i[14].set("size",o.$sizes.get("graph.size"))},function(o,i,c,f,x,w){i[15][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,c,f,x,w){i[15][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,c,f,x,w){i[15][Symbol.for("props")].size=o.$sizes.get("graph.size")},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[16]>"u"||skips[16].indexOf("bgColor")===-1)&&i[16].set("bgColor",o.$colors.get("color2"))},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[16]>"u"||skips[16].indexOf("primaryColor")===-1)&&i[16].set("primaryColor",o.$colors.get("color4"))},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[16]>"u"||skips[16].indexOf("size")===-1)&&i[16].set("size",o.$sizes.get("graph.size"))},function(o,i,c,f,x,w){i[17][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,c,f,x,w){i[17][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,c,f,x,w){i[17][Symbol.for("props")].size=o.$sizes.get("graph.size")},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[18]>"u"||skips[18].indexOf("bgColor")===-1)&&i[18].set("bgColor",o.$colors.get("color2"))},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[18]>"u"||skips[18].indexOf("primaryColor")===-1)&&i[18].set("primaryColor",o.$colors.get("color4"))},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[18]>"u"||skips[18].indexOf("size")===-1)&&i[18].set("size",o.$sizes.get("graph.size"))},function(o,i,c,f,x,w){i[19][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,c,f,x,w){i[19][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,c,f,x,w){i[19][Symbol.for("props")].size=o.$sizes.get("graph.size")},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[20]>"u"||skips[20].indexOf("bgColor")===-1)&&i[20].set("bgColor",o.$colors.get("color2"))},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[20]>"u"||skips[20].indexOf("primaryColor")===-1)&&i[20].set("primaryColor",o.$colors.get("color4"))},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[20]>"u"||skips[20].indexOf("size")===-1)&&i[20].set("size",o.$sizes.get("graph.size"))},function(o,i,c,f,x,w){i[21][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,c,f,x,w){i[21][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,c,f,x,w){i[21][Symbol.for("props")].size=o.$sizes.get("graph.size")},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[22]>"u"||skips[22].indexOf("bgColor")===-1)&&i[22].set("bgColor",o.$colors.get("color2"))},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[22]>"u"||skips[22].indexOf("primaryColor")===-1)&&i[22].set("primaryColor",o.$colors.get("color4"))},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[22]>"u"||skips[22].indexOf("size")===-1)&&i[22].set("size",o.$sizes.get("graph.size"))},function(o,i,c,f,x,w){i[23][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,c,f,x,w){i[23][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,c,f,x,w){i[23][Symbol.for("props")].size=o.$sizes.get("graph.size")}],context:{}},state(){return{mode:"dark",sizes:"small",radius:20}},watch:{mode(h){this.$colors.set(h)},sizes(h){this.$sizes.set(h)}},computed:{text(){return this.mode,this.mode==="dark"?"Dark mode":"Light mode"}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.sizes="large"},down(){this.sizes="small"}}}),PL="ABC123",OL="https://8b4fa39d.lightningjs.workers.dev";let c4,d4;const NL="w185",UL={headers:{"Content-Type":"application/json",Authorization:"Bearer "+PL}};function oC(h,o=NL){return d4+o+h}function BL(...h){return c4?vy(...h):h4().then(()=>vy(...h))}function vy(h,o={}){return fetch(OL+h,{...UL,...o}).then(i=>i.json())}function h4(){return vy("/configuration").then(h=>(c4=h,d4=h.images.secure_base_url,h))}const Iy={get:BL,loadConfig:h4},sC=h=>Iy.get(`/${h}/popular`).then(p4),p4=h=>h.results.filter(i=>!i.adult).map(i=>({poster:oC(i.poster_path||i.profile_path),background:oC(i.backdrop_path,"w1280"),identifier:i.id,title:i.title||i.name,overview:i.overview})),bl=h=>{const o=Array.isArray(h)?h:[h];return FL("movie").then(({genres:i})=>{let c=[];return i.forEach(f=>{o.includes(f.name)&&c.push(f.id)}),Iy.get(`/discover/movie?with_genres=${c.join()}`).then(p4)})},FL=h=>Iy.get(`/genre/${h}/list`),jL=Oe.Component("Poster",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=1280,r[0].h=720,r[0].x=i.x,r[0].src=i.item.background,r[0].color="{top: '0xffffffff', bottom: '0x000000ff'}",r[0].scale={transition:{value:i.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},r[0]._effects=[{type:"radius",props:{radius:8}}],a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},a[1].populate(r[1]),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].w=185,r[2].h=278,r[2].x=54,r[2].y=220,r[2].src=i.item.poster,a[2].populate(r[2]),o=a[1],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].content=i.item.title,r[3].font="raleway",r[3].y=520,r[3].x=54,r[3].size=64,r[3].maxwidth=1e3,r[3].maxlines=1,r[3].__textnode=!0,a[3].populate(r[3]),o=a[1],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].content=i.item.overview,r[4].size=21,r[4].y=620,r[4].x=60,r[4].color="0xccccccff",r[4].maxwidth=1e3,r[4].maxlines=2,r[4].lineheight=36,r[4].__textnode=!0,a[4].populate(r[4]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("src",o.item.background)},function(o,i,c,f,x,w){i[0].set("scale",{transition:{value:o.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,c,f,x,w){i[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(o,i,c,f,x,w){i[1].set("alpha",{transition:{value:o.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,c,f,x,w){i[2].set("src",o.item.poster)},function(o,i,c,f,x,w){i[3].set("content",o.item.title)},function(o,i,c,f,x,w){i[4].set("content",o.item.overview)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,zIndex:1,alpha:0}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1},unfocus(){this.scale=1,this.alpha=0}}}),$L=Oe.Component("Poster",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=185,r[0].h=278,r[0].x=i.x,r[0].src=i.item.poster,r[0].scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},r[0]._effects=[{type:"radius",props:{radius:8}}],a[0].populate(r[0]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("src",o.item.poster)},function(o,i,c,f,x,w){i[0].set("scale",{transition:{value:o.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,c,f,x,w){i[0].set("_effects",[{type:"radius",props:{radius:8}}])}],context:{}},props:["src","index","item","width"],state(){return{scale:1,color:"#333"}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.color="#fff",this.scale=1.1},unfocus(){this.color="#333",this.scale=1}}}),zL=Oe.Component("PosterTitle",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=185,r[0].h=278,r[0].x=i.x,r[0].src=i.item.poster,r[0].scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},r[0]._effects=[{type:"radius",props:{radius:8}}],a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].x=10,r[1].y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},r[1].alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},a[1].populate(r[1]),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].content=i.item.title,r[2].font="raleway",r[2].size=22,r[2].maxwidth=185,r[2].maxlines=2,r[2].lineheight=28,r[2].__textnode=!0,a[2].populate(r[2]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("src",o.item.poster)},function(o,i,c,f,x,w){i[0].set("scale",{transition:{value:o.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,c,f,x,w){i[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(o,i,c,f,x,w){i[1].set("y",{transition:{value:o.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,c,f,x,w){i[1].set("alpha",{transition:{value:o.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,c,f,x,w){i[2].set("content",o.item.title)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,alpha:0,y:278}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1,this.y=288},unfocus(){this.scale=1,this.alpha=0,this.y=278}}}),VL=Oe.Component("TmdbRow",{components:{Hero:jL,Poster:$L,PosterTitle:zL},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E=!1,A=[];r[0]={},a[0]=this.element({parent:o||"root"},E===!0?S:i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},E===!0?S:i),r[1].x={transition:{value:i.x,duration:300,easing:"ease-in-out"}},r[1].y=80,a[1].populate(r[1]),o=a[1],k[2]=[];let N,K;C[2]=(Me=[],ue,he)=>{const oe=w(Me),pe=new Set;let D=oe.length;const ne={};for(N=ne.from||0,K=("to"in ne)?ne.to:oe.length;D--;){const re=oe[D];D<K&&D>=N&&pe.add(""+re.identifier)}let le=he.length;for(;le--;)if(pe.has(he[le])===!1){const re=he[le];ue[2][re]&&ue[2][re].destroy(),ue[2][re]=null,delete ue[2][re],ue[3][re]&&ue[3][re].destroy(),ue[3][re]=null,delete ue[3][re]}he.length=0;const me=oe.length,V=[];for(let re=0;re<me;re++){if(re<N||re>=K)continue;const H=Object.create(i);if(o=ue[1],H.item=oe[re],H.index=re,H.key=""+H.item.identifier,H.__ref="poster"+re,he.push(H.key),A[2]=c.components&&c.components.Component||f.Component,ue[2]===void 0&&(ue[2]={}),r[2]={},ue[2][H.key]===void 0&&(ue[2][H.key]=this.element({parent:o||"root"},E===!0?S:i)),r[2].is=H.type,r[2].index=H.index,r[2].item=H.item,r[2].ref=H.__ref,r[2].width=H.width,I[2]=[],typeof A[2]<"u")for(let z in A[2][Symbol.for("config")].props)delete r[2][A[2][Symbol.for("config")].props[z]],I[2].push(A[2][Symbol.for("config")].props[z]);if(ue[2][H.key].nodeId===void 0&&ue[2][H.key].populate(r[2]),ue[3]===void 0&&(ue[3]={}),o=ue[2][H.key],R[3]={},ue[3][H.key]===void 0){if(R[3].is=H.type,R[3].index=H.index,R[3].item=H.item,R[3].ref=H.__ref,R[3].width=H.width,m=R[3].is||"Component",f[3],typeof m=="string"){if(f[3]=c.components&&c.components[m]||f[m],!f[3])throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[3]=m);ue[3][H.key]=f[3].call(null,{props:R[3]},ue[2][H.key],i),ue[3][H.key][Symbol.for("slots")][0]?(o=ue[3][H.key][Symbol.for("slots")][0],S=ue[3][H.key],E=!0):o=ue[3][H.key][Symbol.for("children")][0]}}return V};let Se=()=>{C[2](i.items,a,k[2])};return i[Symbol.for("effects")].push(Se),x(Se,["items"]),{elms:a,cleanup:()=>{S=null,i=null,o=null,k[2].length=0,C[2]=null,A[2]=null,R[3]=null,f[3]=null,Se=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("x",{transition:{value:o.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state(){return{focused:0,offset:0}},hooks:{focus(){this.$trigger("focused")}},computed:{x(){return this.focused,this.items,this.width,150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused(h){const o=this.$select("poster"+h);o&&o.$focus&&(o.$focus(),this.$emit("posterSelect",this.items[h]))}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),HL=Oe.Component("Background",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].src=i.bg1,r[1].w=1920,r[1].h=1080,r[1].color="{top: '0xffffffff', bottom: '0x000000ff'}",r[1].alpha={transition:{value:i.alpha1,duration:400,easing:"ease-in"}},a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].src=i.bg2,r[2].w=1920,r[2].h=1080,r[2].color="{top: '0xffffffff', bottom: '0x000000ff'}",r[2].alpha={transition:{value:i.alpha2,duration:400,easing:"ease-in"}},a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].w=1920,r[3].h=1080,r[3].src="assets/gradient.png",r[3].color="0x8866ddff",r[3].alpha=.8,a[3].populate(r[3]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("src",o.bg1)},function(o,i,c,f,x,w){i[1].set("alpha",{transition:{value:o.alpha1,duration:400,easing:"ease-in"}})},function(o,i,c,f,x,w){i[2].set("src",o.bg2)},function(o,i,c,f,x,w){i[2].set("alpha",{transition:{value:o.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["bgImg"],state(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{bgImg(h){this.counter=(this.counter+1)%2,this.counter===0?(this.bg1=h,this.alpha1=.8,this.alpha2=0):(this.bg2=h,this.alpha1=0,this.alpha2=.8)}}}),GL=Oe.Component("TMdb",{components:{Background:HL,TmdbRow:VL},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E,A=!1,N=0,K=[];if(r[0]={},a[0]=this.element({parent:o||"root"},A===!0?E:i),r[0].w=1920,r[0].h=1080,r[0].color="0x000000ff",a[0].populate(r[0]),A===!0&&(N-=1),K[1]=c.components&&c.components.Background||f.Background,o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},A===!0?E:i),r[1].bgImg=i.src,I[1]=[],typeof K[1]<"u")for(let he in K[1][Symbol.for("config")].props)delete r[1][K[1][Symbol.for("config")].props[he]],I[1].push(K[1][Symbol.for("config")].props[he]);if(a[1].populate(r[1]),A===!0&&(N-=1),o=a[1],R[2]={},S=i.src,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[2].bgImg=S,m=R[2].is||"Background",f[2],typeof m=="string"){if(f[2]=c.components&&c.components[m]||f[m],!f[2])throw new Error('Component "Background" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[2]=m);a[2]=f[2].call(null,{props:R[2]},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],E=a[2],A=!0):o=a[2][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},A===!0?E:i),a[3].populate(r[3]),A===!0&&(N-=1),o=a[3],r[4]={},a[4]=this.element({parent:o||"root"},A===!0?E:i),r[4].y={transition:{value:i.contentY,duration:i.duration}},r[4].alpha={transition:{value:i.alpha,duration:i.duration}},a[4].populate(r[4]),A===!0&&(N-=1),o=a[4],r[5]={},a[5]=this.element({parent:o||"root"},A===!0?E:i),r[5].src="assets/logo.png",r[5].x=140,r[5].y=90,r[5].w=243,r[5].h=52,a[5].populate(r[5]),A===!0&&(N-=1),o=a[4],r[6]={},a[6]=this.element({parent:o||"root"},A===!0?E:i),r[6].content=i.title,r[6].font="raleway",r[6].size=80,r[6].x=140,r[6].y=300,r[6].maxwidth=1e3,r[6]["@loaded"]=i.positionText&&i.positionText.bind(i),r[6].maxlines=1,r[6].__textnode=!0,a[6].populate(r[6]),A===!0&&(N-=1),o=a[4],r[7]={},a[7]=this.element({parent:o||"root"},A===!0?E:i),r[7].content=i.overview,r[7].maxwidth=880,r[7].x=140,r[7].y=430,r[7].lineheight=40,r[7].maxlines=3,r[7].__textnode=!0,a[7].populate(r[7]),A===!0&&(N-=1),o=a[3],r[8]={},a[8]=this.element({parent:o||"root"},A===!0?E:i),r[8].y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},a[8].populate(r[8]),A===!0&&(N-=1),o=a[8],k[9]=[];let Se,Me;C[9]=(he=[],oe,pe)=>{const D=w(he),ne=new Set;let le=D.length;const me={};for(Se=me.from||0,Me=("to"in me)?me.to:D.length;le--;){const z=D[le];le<Me&&le>=Se&&ne.add(""+z.title)}let V=pe.length;for(;V--;)if(ne.has(pe[V])===!1){const z=pe[V];oe[9][z]&&oe[9][z].destroy(),oe[9][z]=null,delete oe[9][z],oe[10][z]&&oe[10][z].destroy(),oe[10][z]=null,delete oe[10][z]}pe.length=0;const re=D.length,H=[];for(let z=0;z<re;z++){if(z<Se||z>=Me)continue;const se=Object.create(i);if(o=oe[8],se.row=D[z],se.index=z,se.key=""+se.row.title,se.__ref="row"+z,pe.push(se.key),K[9]=c.components&&c.components.TmdbRow||f.TmdbRow,oe[9]===void 0&&(oe[9]={}),r[9]={},oe[9][se.key]===void 0&&(oe[9][se.key]=this.element({parent:o||"root"},A===!0?E:i)),r[9].title=se.row.title,r[9].items=se.row.items,r[9].type=se.row.type,r[9].width=se.row.width,r[9].y=se.row.y,r[9].ref=se.__ref,I[9]=[],typeof K[9]<"u")for(let $e in K[9][Symbol.for("config")].props)delete r[9][K[9][Symbol.for("config")].props[$e]],I[9].push(K[9][Symbol.for("config")].props[$e]);if(oe[9][se.key].nodeId===void 0&&(oe[9][se.key].populate(r[9]),A===!0&&(N-=1)),oe[10]===void 0&&(oe[10]={}),o=oe[9][se.key],R[10]={},oe[10][se.key]===void 0){if(R[10].title=se.row.title,S=se.row.items,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[10].items=S,S=se.row.type,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[10].type=S,S=se.row.width,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[10].width=S,R[10].y=se.row.y,R[10].ref=se.__ref,m=R[10].is||"TmdbRow",f[10],typeof m=="string"){if(f[10]=c.components&&c.components[m]||f[m],!f[10])throw new Error('Component "TmdbRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[10]=m);oe[10][se.key]=f[10].call(null,{props:R[10]},oe[9][se.key],i),oe[10][se.key][Symbol.for("slots")][0]?(o=oe[10][se.key][Symbol.for("slots")][0],E=oe[10][se.key],A=!0):o=oe[10][se.key][Symbol.for("children")][0]}let we=()=>{(typeof I>"u"||typeof I[9]>"u"||I[9].indexOf("items")===-1)&&oe[9][se.key].set("items",se.row.items)};x(we,null),H.push(we),i[Symbol.for("effects")].push(we);let Fe=()=>{(typeof I>"u"||typeof I[9]>"u"||I[9].indexOf("type")===-1)&&oe[9][se.key].set("type",se.row.type)};x(Fe,null),H.push(Fe),i[Symbol.for("effects")].push(Fe);let Je=()=>{(typeof I>"u"||typeof I[9]>"u"||I[9].indexOf("width")===-1)&&oe[9][se.key].set("width",se.row.width)};x(Je,null),H.push(Je),i[Symbol.for("effects")].push(Je),oe[10][se.key][Symbol.for("props")].items=se.row.items,oe[10][se.key][Symbol.for("props")].type=se.row.type,oe[10][se.key][Symbol.for("props")].width=se.row.width}return H};let ue=()=>{C[9](i.rows,a,k[9])};return i[Symbol.for("effects")].push(ue),x(ue,["rows"]),{elms:a,cleanup:()=>{S=null,E=null,i=null,o=null,K[1]=null,R[2]=null,f[2]=null,k[9].length=0,C[9]=null,K[9]=null,R[10]=null,f[10]=null,ue=null,K.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[1]>"u"||skips[1].indexOf("bgImg")===-1)&&i[1].set("bgImg",o.src)},function(o,i,c,f,x,w){i[2][Symbol.for("props")].bgImg=o.src},function(o,i,c,f,x,w){i[4].set("y",{transition:{value:o.contentY,duration:o.duration}})},function(o,i,c,f,x,w){i[4].set("alpha",{transition:{value:o.alpha,duration:o.duration}})},function(o,i,c,f,x,w){i[6].set("content",o.title)},function(o,i,c,f,x,w){i[7].set("content",o.overview)},function(o,i,c,f,x,w){i[8].set("y",{transition:{value:o.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state(){return{rows:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}},watch:{focused(h){const o=this.$select("row"+h);o&&o.$focus&&o.$focus()}},hooks:{async init(){this.rows=[{title:"Popular Movies",items:await sC("movie"),type:"Poster",width:215,y:0},{title:"Best Western movies",items:await bl(["Western"]),type:"Hero",width:1370,y:358},{title:"Best Comedy movies",items:await bl(["Comedy"]),type:"PosterTitle",width:215,y:1158},{title:"Popular TV shows",items:await sC("tv"),type:"PosterTitle",width:215,y:1536},{title:"Best Adventure and Action movies",items:await bl(["adventure","action"]),type:"Hero",width:1370,y:1914},{title:"Best Documentaries",items:await bl("Documentary"),type:"PosterTitle",width:215,y:2714},{title:"Best Western movies 2",items:await bl("Western"),type:"PosterTitle",width:215,y:3092}],this.focused=0},ready(){this.$listen("posterSelect",h=>{this.focused===0&&(this.src=h.background,this.title=h.title,this.overview=h.overview)})},focus(){this.$trigger("focused")}},input:{up(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0},down(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0}}}),XL=Oe.Component("MenuSprite",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),a[0].populate(r[0]),S===!0&&(E-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].src="assets/menusprite.png",r[1].x=748,r[1].y=120,r[1].w=425,r[1].h=340,a[1].populate(r[1]),S===!0&&(E-=1),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},S===!0?m:i),r[2].y=680,r[2].x=560,a[2].populate(r[2]),S===!0&&(E-=1),A[3]=c.components&&c.components.Sprite||f.Sprite,o=a[2],r[3]={},a[3]=this.element({parent:o||"root"},S===!0?m:i),r[3].image="assets/menusprite.png",r[3].x=0,r[3].w=140,r[3].h=140,r[3].map=i.map,r[3].frame=i.icon1,R[3]=[],typeof A[3]<"u")for(let N in A[3][Symbol.for("config")].props)delete r[3][A[3][Symbol.for("config")].props[N]],R[3].push(A[3][Symbol.for("config")].props[N]);if(a[3].populate(r[3]),S===!0&&(E-=1),o=a[3],C[4]={},C[4].image="assets/menusprite.png",C[4].x=0,C[4].w=140,C[4].h=140,C[4].map=i.map,I=i.icon1,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[4].frame=I,k=C[4].is||"Sprite",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);if(a[4]=f[4].call(null,{props:C[4]},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],m=a[4],S=!0):o=a[4][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[5]=c.components&&c.components.Sprite||f.Sprite,o=a[2],r[5]={},a[5]=this.element({parent:o||"root"},S===!0?m:i),r[5].image="assets/menusprite.png",r[5].x=220,r[5].w=140,r[5].h=140,r[5].map=i.map,r[5].frame="icon2",R[5]=[],typeof A[5]<"u")for(let N in A[5][Symbol.for("config")].props)delete r[5][A[5][Symbol.for("config")].props[N]],R[5].push(A[5][Symbol.for("config")].props[N]);if(a[5].populate(r[5]),S===!0&&(E-=1),o=a[5],C[6]={},C[6].image="assets/menusprite.png",C[6].x=220,C[6].w=140,C[6].h=140,C[6].map=i.map,C[6].frame="icon2",k=C[6].is||"Sprite",f[6],typeof k=="string"){if(f[6]=c.components&&c.components[k]||f[k],!f[6])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[6]=k);if(a[6]=f[6].call(null,{props:C[6]},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],m=a[6],S=!0):o=a[6][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[7]=c.components&&c.components.Sprite||f.Sprite,o=a[2],r[7]={},a[7]=this.element({parent:o||"root"},S===!0?m:i),r[7].image="assets/menusprite.png",r[7].x=440,r[7].w=140,r[7].h=140,r[7].map=i.map,r[7].frame="icon3",R[7]=[],typeof A[7]<"u")for(let N in A[7][Symbol.for("config")].props)delete r[7][A[7][Symbol.for("config")].props[N]],R[7].push(A[7][Symbol.for("config")].props[N]);if(a[7].populate(r[7]),S===!0&&(E-=1),o=a[7],C[8]={},C[8].image="assets/menusprite.png",C[8].x=440,C[8].w=140,C[8].h=140,C[8].map=i.map,C[8].frame="icon3",k=C[8].is||"Sprite",f[8],typeof k=="string"){if(f[8]=c.components&&c.components[k]||f[k],!f[8])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[8]=k);if(a[8]=f[8].call(null,{props:C[8]},a[7],i),a[8][Symbol.for("slots")][0]?(o=a[8][Symbol.for("slots")][0],m=a[8],S=!0):o=a[8][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[9]=c.components&&c.components.Sprite||f.Sprite,o=a[2],r[9]={},a[9]=this.element({parent:o||"root"},S===!0?m:i),r[9].image="assets/menusprite.png",r[9].x=660,r[9].w=140,r[9].h=140,r[9].map=i.map,r[9].frame="icon4_unfocus",R[9]=[],typeof A[9]<"u")for(let N in A[9][Symbol.for("config")].props)delete r[9][A[9][Symbol.for("config")].props[N]],R[9].push(A[9][Symbol.for("config")].props[N]);if(a[9].populate(r[9]),S===!0&&(E-=1),o=a[9],C[10]={},C[10].image="assets/menusprite.png",C[10].x=660,C[10].w=140,C[10].h=140,C[10].map=i.map,C[10].frame="icon4_unfocus",k=C[10].is||"Sprite",f[10],typeof k=="string"){if(f[10]=c.components&&c.components[k]||f[k],!f[10])throw new Error('Component "Sprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[10]=k);return a[10]=f[10].call(null,{props:C[10]},a[9],i),a[10][Symbol.for("slots")][0]?(o=a[10][Symbol.for("slots")][0],m=a[10],S=!0):o=a[10][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[3]=null,C[4]=null,f[4]=null,A[5]=null,C[6]=null,f[6]=null,A[7]=null,C[8]=null,f[8]=null,A[9]=null,C[10]=null,f[10]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[3]>"u"||skips[3].indexOf("frame")===-1)&&i[3].set("frame",o.icon1)},function(o,i,c,f,x,w){i[4][Symbol.for("props")].frame=o.icon1}],context:{}},state(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready(){this.$setInterval(()=>{this.icon1=this.icon1==="icon1_unfocus"?"icon1_focus":"icon1_unfocus"},2e3)}}}),Zd=["menu"],WL=Oe.Component("Sprites",{components:{MenuSprite:XL},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),a[0].populate(r[0]),S===!0&&(E-=1),A[1]=c.components&&c.components.MenuSprite||f.MenuSprite,o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].show=i.currentSprite==="menu",R[1]=[],typeof A[1]<"u")for(let N in A[1][Symbol.for("config")].props)delete r[1][A[1][Symbol.for("config")].props[N]],R[1].push(A[1][Symbol.for("config")].props[N]);if(a[1].populate(r[1]),S===!0&&(E-=1),o=a[1],C[2]={},I=i.currentSprite==="menu",Array.isArray(I)===!0&&(I=w(I).slice(0)),C[2].show=I,k=C[2].is||"MenuSprite",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "MenuSprite" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);return a[2]=f[2].call(null,{props:C[2]},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],m=a[2],S=!0):o=a[2][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[1]=null,C[2]=null,f[2]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[1]>"u"||skips[1].indexOf("show")===-1)&&i[1].set("show",o.currentSprite==="menu")},function(o,i,c,f,x,w){i[2][Symbol.for("props")].show=o.currentSprite==="menu"}],context:{}},state(){return{currentSprite:"menu"}},input:{down(){const h=Zd.indexOf(this.currentSprite);h<Zd.length-1?this.currentSprite=Zd[h+1]:this.currentSprite=Zd[0]}}}),bh=Oe.Component("Button",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=300,r[0].h=80,r[0].color=i.color||"0xff0000ff",r[0].effects=[{type:"radius",props:{radius:20}}],r[0].alpha={transition:i.alpha},r[0].scale={transition:i.scale},r[0].rotation=i.rotate,a[0].populate(r[0]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("effects",[{type:"radius",props:{radius:20}}])},function(o,i,c,f,x,w){i[0].set("alpha",{transition:o.alpha})},function(o,i,c,f,x,w){i[0].set("scale",{transition:o.scale})},function(o,i,c,f,x,w){i[0].set("rotation",o.rotate)}],context:{}},props:["color"],state(){return{alpha:.4,scale:1,rotate:0}},hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=this.scale===1?1.2:1},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.rotate=0}},input:{enter(){this.rotate=this.rotate===0?-4:0,this.scale=this.scale===1.2?1.3:1.2}}}),KL=Oe.Component("Menu",{components:{Button:bh},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m=!1,S=0,E=[];if(r[0]={},a[0]=this.element({parent:o||"root"},m===!0?I:i),r[0].x={transition:i.x},r[0].w=400,r[0].h=1080,r[0].color="{right: '0x64748baa', left: '0x475569aa'}",a[0].populate(r[0]),m===!0&&(S-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},m===!0?I:i),r[1].x=50,r[1].y=40,a[1].populate(r[1]),m===!0&&(S-=1),E[2]=c.components&&c.components.Button||f.Button,o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},m===!0?I:i),r[2].color="0xe4e4e7ff",r[2].ref="menu1",R[2]=[],typeof E[2]<"u")for(let A in E[2][Symbol.for("config")].props)delete r[2][E[2][Symbol.for("config")].props[A]],R[2].push(E[2][Symbol.for("config")].props[A]);if(a[2].populate(r[2]),m===!0&&(S-=1),o=a[2],C[3]={},C[3].color="0xe4e4e7ff",C[3].ref="menu1",k=C[3].is||"Button",f[3],typeof k=="string"){if(f[3]=c.components&&c.components[k]||f[k],!f[3])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[3]=k);if(a[3]=f[3].call(null,{props:C[3]},a[2],i),a[3][Symbol.for("slots")][0]?(o=a[3][Symbol.for("slots")][0],I=a[3],m=!0):o=a[3][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),E[4]=c.components&&c.components.Button||f.Button,o=a[1],r[4]={},a[4]=this.element({parent:o||"root"},m===!0?I:i),r[4].color="0xe4e4e7ff",r[4].y=100,r[4].ref="menu2",R[4]=[],typeof E[4]<"u")for(let A in E[4][Symbol.for("config")].props)delete r[4][E[4][Symbol.for("config")].props[A]],R[4].push(E[4][Symbol.for("config")].props[A]);if(a[4].populate(r[4]),m===!0&&(S-=1),o=a[4],C[5]={},C[5].color="0xe4e4e7ff",C[5].y=100,C[5].ref="menu2",k=C[5].is||"Button",f[5],typeof k=="string"){if(f[5]=c.components&&c.components[k]||f[k],!f[5])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[5]=k);if(a[5]=f[5].call(null,{props:C[5]},a[4],i),a[5][Symbol.for("slots")][0]?(o=a[5][Symbol.for("slots")][0],I=a[5],m=!0):o=a[5][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),E[6]=c.components&&c.components.Button||f.Button,o=a[1],r[6]={},a[6]=this.element({parent:o||"root"},m===!0?I:i),r[6].color="0xe4e4e7ff",r[6].y=200,r[6].ref="menu3",R[6]=[],typeof E[6]<"u")for(let A in E[6][Symbol.for("config")].props)delete r[6][E[6][Symbol.for("config")].props[A]],R[6].push(E[6][Symbol.for("config")].props[A]);if(a[6].populate(r[6]),m===!0&&(S-=1),o=a[6],C[7]={},C[7].color="0xe4e4e7ff",C[7].y=200,C[7].ref="menu3",k=C[7].is||"Button",f[7],typeof k=="string"){if(f[7]=c.components&&c.components[k]||f[k],!f[7])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[7]=k);if(a[7]=f[7].call(null,{props:C[7]},a[6],i),a[7][Symbol.for("slots")][0]?(o=a[7][Symbol.for("slots")][0],I=a[7],m=!0):o=a[7][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),E[8]=c.components&&c.components.Button||f.Button,o=a[1],r[8]={},a[8]=this.element({parent:o||"root"},m===!0?I:i),r[8].color="0xe4e4e7ff",r[8].y=300,r[8].ref="menu4",R[8]=[],typeof E[8]<"u")for(let A in E[8][Symbol.for("config")].props)delete r[8][E[8][Symbol.for("config")].props[A]],R[8].push(E[8][Symbol.for("config")].props[A]);if(a[8].populate(r[8]),m===!0&&(S-=1),o=a[8],C[9]={},C[9].color="0xe4e4e7ff",C[9].y=300,C[9].ref="menu4",k=C[9].is||"Button",f[9],typeof k=="string"){if(f[9]=c.components&&c.components[k]||f[k],!f[9])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[9]=k);return a[9]=f[9].call(null,{props:C[9]},a[8],i),a[9][Symbol.for("slots")][0]?(o=a[9][Symbol.for("slots")][0],I=a[9],m=!0):o=a[9][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),{elms:a,cleanup:()=>{I=null,i=null,o=null,E[2]=null,C[3]=null,f[3]=null,E[4]=null,C[5]=null,f[5]=null,E[6]=null,C[7]=null,f[7]=null,E[8]=null,C[9]=null,f[9]=null,E.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("x",{transition:o.x})}],context:{}},state(){return{x:-360,focused:1}},hooks:{focus(){this.$trigger("focused"),this.x=0}},watch:{focused(){const h=this.$select(`menu${this.focused}`);h&&h.$focus&&h.$focus()}},input:{right(){this.parent.$focus(),this.x=-360},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)},left(){}}}),YL=Oe.Component("FocusHandling",{components:{Menu:KL,Button:bh},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),a[0].populate(r[0]),S===!0&&(E-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].x=300,r[1].y=150,a[1].populate(r[1]),S===!0&&(E-=1),A[2]=c.components&&c.components.Button||f.Button,o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},S===!0?m:i),r[2].color="0xef4444ff",r[2].x=0,r[2].ref="button1",r[2].z=i.focused===1?1:0,R[2]=[],typeof A[2]<"u")for(let N in A[2][Symbol.for("config")].props)delete r[2][A[2][Symbol.for("config")].props[N]],R[2].push(A[2][Symbol.for("config")].props[N]);if(a[2].populate(r[2]),S===!0&&(E-=1),o=a[2],C[3]={},C[3].color="0xef4444ff",C[3].x=0,C[3].ref="button1",I=i.focused===1?1:0,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[3].z=I,k=C[3].is||"Button",f[3],typeof k=="string"){if(f[3]=c.components&&c.components[k]||f[k],!f[3])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[3]=k);if(a[3]=f[3].call(null,{props:C[3]},a[2],i),a[3][Symbol.for("slots")][0]?(o=a[3][Symbol.for("slots")][0],m=a[3],S=!0):o=a[3][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[4]=c.components&&c.components.Button||f.Button,o=a[1],r[4]={},a[4]=this.element({parent:o||"root"},S===!0?m:i),r[4].color="0xf97316ff",r[4].x=320,r[4].ref="button2",r[4].z=i.focused===2?1:0,R[4]=[],typeof A[4]<"u")for(let N in A[4][Symbol.for("config")].props)delete r[4][A[4][Symbol.for("config")].props[N]],R[4].push(A[4][Symbol.for("config")].props[N]);if(a[4].populate(r[4]),S===!0&&(E-=1),o=a[4],C[5]={},C[5].color="0xf97316ff",C[5].x=320,C[5].ref="button2",I=i.focused===2?1:0,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[5].z=I,k=C[5].is||"Button",f[5],typeof k=="string"){if(f[5]=c.components&&c.components[k]||f[k],!f[5])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[5]=k);if(a[5]=f[5].call(null,{props:C[5]},a[4],i),a[5][Symbol.for("slots")][0]?(o=a[5][Symbol.for("slots")][0],m=a[5],S=!0):o=a[5][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[6]=c.components&&c.components.Button||f.Button,o=a[1],r[6]={},a[6]=this.element({parent:o||"root"},S===!0?m:i),r[6].color="0x84cc16ff",r[6].x=640,r[6].ref="button3",r[6].z=i.focused===3?1:0,R[6]=[],typeof A[6]<"u")for(let N in A[6][Symbol.for("config")].props)delete r[6][A[6][Symbol.for("config")].props[N]],R[6].push(A[6][Symbol.for("config")].props[N]);if(a[6].populate(r[6]),S===!0&&(E-=1),o=a[6],C[7]={},C[7].color="0x84cc16ff",C[7].x=640,C[7].ref="button3",I=i.focused===3?1:0,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[7].z=I,k=C[7].is||"Button",f[7],typeof k=="string"){if(f[7]=c.components&&c.components[k]||f[k],!f[7])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[7]=k);if(a[7]=f[7].call(null,{props:C[7]},a[6],i),a[7][Symbol.for("slots")][0]?(o=a[7][Symbol.for("slots")][0],m=a[7],S=!0):o=a[7][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[8]=c.components&&c.components.Button||f.Button,o=a[1],r[8]={},a[8]=this.element({parent:o||"root"},S===!0?m:i),r[8].color="0x10b981ff",r[8].x=0,r[8].y=100,r[8].ref="button4",r[8].z=i.focused===4?1:0,R[8]=[],typeof A[8]<"u")for(let N in A[8][Symbol.for("config")].props)delete r[8][A[8][Symbol.for("config")].props[N]],R[8].push(A[8][Symbol.for("config")].props[N]);if(a[8].populate(r[8]),S===!0&&(E-=1),o=a[8],C[9]={},C[9].color="0x10b981ff",C[9].x=0,C[9].y=100,C[9].ref="button4",I=i.focused===4?1:0,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[9].z=I,k=C[9].is||"Button",f[9],typeof k=="string"){if(f[9]=c.components&&c.components[k]||f[k],!f[9])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[9]=k);if(a[9]=f[9].call(null,{props:C[9]},a[8],i),a[9][Symbol.for("slots")][0]?(o=a[9][Symbol.for("slots")][0],m=a[9],S=!0):o=a[9][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[10]=c.components&&c.components.Button||f.Button,o=a[1],r[10]={},a[10]=this.element({parent:o||"root"},S===!0?m:i),r[10].color="0x06b6d4ff",r[10].y=100,r[10].x=320,r[10].ref="button5",r[10].z=i.focused===5?1:0,R[10]=[],typeof A[10]<"u")for(let N in A[10][Symbol.for("config")].props)delete r[10][A[10][Symbol.for("config")].props[N]],R[10].push(A[10][Symbol.for("config")].props[N]);if(a[10].populate(r[10]),S===!0&&(E-=1),o=a[10],C[11]={},C[11].color="0x06b6d4ff",C[11].y=100,C[11].x=320,C[11].ref="button5",I=i.focused===5?1:0,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[11].z=I,k=C[11].is||"Button",f[11],typeof k=="string"){if(f[11]=c.components&&c.components[k]||f[k],!f[11])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[11]=k);if(a[11]=f[11].call(null,{props:C[11]},a[10],i),a[11][Symbol.for("slots")][0]?(o=a[11][Symbol.for("slots")][0],m=a[11],S=!0):o=a[11][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[12]=c.components&&c.components.Button||f.Button,o=a[1],r[12]={},a[12]=this.element({parent:o||"root"},S===!0?m:i),r[12].color="0x3b82f6ff",r[12].y=100,r[12].x=640,r[12].ref="button6",r[12].z=i.focused===6?1:0,R[12]=[],typeof A[12]<"u")for(let N in A[12][Symbol.for("config")].props)delete r[12][A[12][Symbol.for("config")].props[N]],R[12].push(A[12][Symbol.for("config")].props[N]);if(a[12].populate(r[12]),S===!0&&(E-=1),o=a[12],C[13]={},C[13].color="0x3b82f6ff",C[13].y=100,C[13].x=640,C[13].ref="button6",I=i.focused===6?1:0,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[13].z=I,k=C[13].is||"Button",f[13],typeof k=="string"){if(f[13]=c.components&&c.components[k]||f[k],!f[13])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[13]=k);if(a[13]=f[13].call(null,{props:C[13]},a[12],i),a[13][Symbol.for("slots")][0]?(o=a[13][Symbol.for("slots")][0],m=a[13],S=!0):o=a[13][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[14]=c.components&&c.components.Button||f.Button,o=a[1],r[14]={},a[14]=this.element({parent:o||"root"},S===!0?m:i),r[14].color="0x8b5cf6ff",r[14].y=200,r[14].x=0,r[14].ref="button7",r[14].z=i.focused===7?1:0,R[14]=[],typeof A[14]<"u")for(let N in A[14][Symbol.for("config")].props)delete r[14][A[14][Symbol.for("config")].props[N]],R[14].push(A[14][Symbol.for("config")].props[N]);if(a[14].populate(r[14]),S===!0&&(E-=1),o=a[14],C[15]={},C[15].color="0x8b5cf6ff",C[15].y=200,C[15].x=0,C[15].ref="button7",I=i.focused===7?1:0,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[15].z=I,k=C[15].is||"Button",f[15],typeof k=="string"){if(f[15]=c.components&&c.components[k]||f[k],!f[15])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[15]=k);if(a[15]=f[15].call(null,{props:C[15]},a[14],i),a[15][Symbol.for("slots")][0]?(o=a[15][Symbol.for("slots")][0],m=a[15],S=!0):o=a[15][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[16]=c.components&&c.components.Button||f.Button,o=a[1],r[16]={},a[16]=this.element({parent:o||"root"},S===!0?m:i),r[16].color="0xd946efff",r[16].y=200,r[16].x=320,r[16].ref="button8",r[16].z=i.focused===8?1:0,R[16]=[],typeof A[16]<"u")for(let N in A[16][Symbol.for("config")].props)delete r[16][A[16][Symbol.for("config")].props[N]],R[16].push(A[16][Symbol.for("config")].props[N]);if(a[16].populate(r[16]),S===!0&&(E-=1),o=a[16],C[17]={},C[17].color="0xd946efff",C[17].y=200,C[17].x=320,C[17].ref="button8",I=i.focused===8?1:0,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[17].z=I,k=C[17].is||"Button",f[17],typeof k=="string"){if(f[17]=c.components&&c.components[k]||f[k],!f[17])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[17]=k);if(a[17]=f[17].call(null,{props:C[17]},a[16],i),a[17][Symbol.for("slots")][0]?(o=a[17][Symbol.for("slots")][0],m=a[17],S=!0):o=a[17][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[18]=c.components&&c.components.Button||f.Button,o=a[1],r[18]={},a[18]=this.element({parent:o||"root"},S===!0?m:i),r[18].color="0xf43f5eff",r[18].y=200,r[18].x=640,r[18].ref="button9",r[18].z=i.focused===9?1:0,R[18]=[],typeof A[18]<"u")for(let N in A[18][Symbol.for("config")].props)delete r[18][A[18][Symbol.for("config")].props[N]],R[18].push(A[18][Symbol.for("config")].props[N]);if(a[18].populate(r[18]),S===!0&&(E-=1),o=a[18],C[19]={},C[19].color="0xf43f5eff",C[19].y=200,C[19].x=640,C[19].ref="button9",I=i.focused===9?1:0,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[19].z=I,k=C[19].is||"Button",f[19],typeof k=="string"){if(f[19]=c.components&&c.components[k]||f[k],!f[19])throw new Error('Component "Button" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[19]=k);if(a[19]=f[19].call(null,{props:C[19]},a[18],i),a[19][Symbol.for("slots")][0]?(o=a[19][Symbol.for("slots")][0],m=a[19],S=!0):o=a[19][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[20]=c.components&&c.components.Menu||f.Menu,o=a[0],r[20]={},a[20]=this.element({parent:o||"root"},S===!0?m:i),r[20].ref="menu",R[20]=[],typeof A[20]<"u")for(let N in A[20][Symbol.for("config")].props)delete r[20][A[20][Symbol.for("config")].props[N]],R[20].push(A[20][Symbol.for("config")].props[N]);if(a[20].populate(r[20]),S===!0&&(E-=1),o=a[20],C[21]={},C[21].ref="menu",k=C[21].is||"Menu",f[21],typeof k=="string"){if(f[21]=c.components&&c.components[k]||f[k],!f[21])throw new Error('Component "Menu" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[21]=k);return a[21]=f[21].call(null,{props:C[21]},a[20],i),a[21][Symbol.for("slots")][0]?(o=a[21][Symbol.for("slots")][0],m=a[21],S=!0):o=a[21][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[2]=null,C[3]=null,f[3]=null,A[4]=null,C[5]=null,f[5]=null,A[6]=null,C[7]=null,f[7]=null,A[8]=null,C[9]=null,f[9]=null,A[10]=null,C[11]=null,f[11]=null,A[12]=null,C[13]=null,f[13]=null,A[14]=null,C[15]=null,f[15]=null,A[16]=null,C[17]=null,f[17]=null,A[18]=null,C[19]=null,f[19]=null,A[20]=null,C[21]=null,f[21]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[2]>"u"||skips[2].indexOf("z")===-1)&&i[2].set("z",o.focused===1?1:0)},function(o,i,c,f,x,w){i[3][Symbol.for("props")].z=o.focused===1?1:0},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[4]>"u"||skips[4].indexOf("z")===-1)&&i[4].set("z",o.focused===2?1:0)},function(o,i,c,f,x,w){i[5][Symbol.for("props")].z=o.focused===2?1:0},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[6]>"u"||skips[6].indexOf("z")===-1)&&i[6].set("z",o.focused===3?1:0)},function(o,i,c,f,x,w){i[7][Symbol.for("props")].z=o.focused===3?1:0},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[8]>"u"||skips[8].indexOf("z")===-1)&&i[8].set("z",o.focused===4?1:0)},function(o,i,c,f,x,w){i[9][Symbol.for("props")].z=o.focused===4?1:0},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[10]>"u"||skips[10].indexOf("z")===-1)&&i[10].set("z",o.focused===5?1:0)},function(o,i,c,f,x,w){i[11][Symbol.for("props")].z=o.focused===5?1:0},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[12]>"u"||skips[12].indexOf("z")===-1)&&i[12].set("z",o.focused===6?1:0)},function(o,i,c,f,x,w){i[13][Symbol.for("props")].z=o.focused===6?1:0},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[14]>"u"||skips[14].indexOf("z")===-1)&&i[14].set("z",o.focused===7?1:0)},function(o,i,c,f,x,w){i[15][Symbol.for("props")].z=o.focused===7?1:0},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[16]>"u"||skips[16].indexOf("z")===-1)&&i[16].set("z",o.focused===8?1:0)},function(o,i,c,f,x,w){i[17][Symbol.for("props")].z=o.focused===8?1:0},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[18]>"u"||skips[18].indexOf("z")===-1)&&i[18].set("z",o.focused===9?1:0)},function(o,i,c,f,x,w){i[19][Symbol.for("props")].z=o.focused===9?1:0}],context:{}},state(){return{focused:1}},hooks:{focus(){this.$trigger("focused")}},watch:{focused(h){const o=this.$select(`button${h}`);o&&o.$focus&&o.$focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const h=this.focused-1;if(h===0){const o=this.$select("menu");o&&o.$focus&&o.$focus()}else this.focused=Math.max(h,1)},a(){const h=this.$select("menu");h&&h.$focus&&h.$focus()}}}),qL=Oe.Component("Positioning",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m=!1,S=0,E=[];if(r[0]={},a[0]=this.element({parent:o||"root"},m===!0?I:i),a[0].populate(r[0]),m===!0&&(S-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},m===!0?I:i),r[1].w=100,r[1].h=100,r[1].x=20,r[1].y=20,r[1].color="0xecfeffff",a[1].populate(r[1]),m===!0&&(S-=1),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},m===!0?I:i),r[2].w=100,r[2].h=100,r[2].x=140,r[2].y=20,r[2].color="0xa5f3fcff",a[2].populate(r[2]),m===!0&&(S-=1),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},m===!0?I:i),r[3].w=100,r[3].h=100,r[3].x=260,r[3].y=20,r[3].color="0x22d3eeff",a[3].populate(r[3]),m===!0&&(S-=1),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},m===!0?I:i),r[4].w=100,r[4].h=100,r[4].x=380,r[4].y=20,r[4].color="0x0891b2ff",a[4].populate(r[4]),m===!0&&(S-=1),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},m===!0?I:i),r[5].w=100,r[5].h=100,r[5].x=i.x1,r[5].y=i.y,r[5].color="0xfdf4ffff",a[5].populate(r[5]),m===!0&&(S-=1),o=a[0],r[6]={},a[6]=this.element({parent:o||"root"},m===!0?I:i),r[6].w=100,r[6].h=100,r[6].x=i.x2,r[6].y=i.y,r[6].color="0xf5d0feff",a[6].populate(r[6]),m===!0&&(S-=1),o=a[0],r[7]={},a[7]=this.element({parent:o||"root"},m===!0?I:i),r[7].w=100,r[7].h=100,r[7].x=i.x3,r[7].y=i.y,r[7].color="0xe879f9ff",a[7].populate(r[7]),m===!0&&(S-=1),o=a[0],r[8]={},a[8]=this.element({parent:o||"root"},m===!0?I:i),r[8].w=100,r[8].h=100,r[8].x=i.x4,r[8].y=i.y,r[8].color="0xc026d3ff",a[8].populate(r[8]),m===!0&&(S-=1),o=a[0],r[9]={},a[9]=this.element({parent:o||"root"},m===!0?I:i),r[9].w=100,r[9].h=100,r[9].x=i.xA,r[9].y=260,r[9].color="0xfff7edff",a[9].populate(r[9]),m===!0&&(S-=1),o=a[0],r[10]={},a[10]=this.element({parent:o||"root"},m===!0?I:i),r[10].w=100,r[10].h=100,r[10].x=i.xB,r[10].y=260,r[10].color="0xfed7aaff",a[10].populate(r[10]),m===!0&&(S-=1),o=a[0],r[11]={},a[11]=this.element({parent:o||"root"},m===!0?I:i),r[11].w=100,r[11].h=100,r[11].x=i.xC,r[11].y=260,r[11].color="0xfb923cff",a[11].populate(r[11]),m===!0&&(S-=1),o=a[0],r[12]={},a[12]=this.element({parent:o||"root"},m===!0?I:i),r[12].w=100,r[12].h=100,r[12].x=i.xD,r[12].y=260,r[12].color="0xea580cff",a[12].populate(r[12]),m===!0&&(S-=1),o=a[0],r[13]={},a[13]=this.element({parent:o||"root"},m===!0?I:i),r[13].w=800,r[13].h=800,r[13].y=20,r[13].x=800,r[13].color="0xecfdf5ff",a[13].populate(r[13]),m===!0&&(S-=1),o=a[13],r[14]={},a[14]=this.element({parent:o||"root"},m===!0?I:i),r[14].w=600,r[14].h=600,r[14].y=20,r[14].x=20,r[14].color="0xa7f3d0ff",a[14].populate(r[14]),m===!0&&(S-=1),o=a[14],r[15]={},a[15]=this.element({parent:o||"root"},m===!0?I:i),r[15].w=400,r[15].h=400,r[15].y=100,r[15].x=20,r[15].color="0x34d399ff",a[15].populate(r[15]),m===!0&&(S-=1),o=a[15],r[16]={},a[16]=this.element({parent:o||"root"},m===!0?I:i),r[16].w=200,r[16].h=100,r[16].y=300/2,r[16].x=200/2,r[16].color="0x059669ff",a[16].populate(r[16]),m===!0&&(S-=1),o=a[16],r[17]={},a[17]=this.element({parent:o||"root"},m===!0?I:i),r[17].w=50,r[17].h=50,r[17].y={transition:i.yNested},r[17].x={transition:i.xNested},r[17].color="0x065f46ff",a[17].populate(r[17]),m===!0&&(S-=1),o=a[0],r[18]={},a[18]=this.element({parent:o||"root"},m===!0?I:i),r[18].w=100,r[18].h=100,r[18].y=500,r[18].x=20,r[18].color="0xe11d48ff",a[18].populate(r[18]),m===!0&&(S-=1),o=a[0],r[19]={},a[19]=this.element({parent:o||"root"},m===!0?I:i),r[19].w=200,r[19].h=200,r[19].x=50,r[19].y=700,r[19].color="0x94a3b8ff",r[19].z=100,a[19].populate(r[19]),m===!0&&(S-=1),o=a[19],r[20]={},a[20]=this.element({parent:o||"root"},m===!0?I:i),r[20].content="Lightning!",r[20].x=100,r[20].y=140,r[20].__textnode=!0,a[20].populate(r[20]),m===!0&&(S-=1),o=a[19],r[21]={},a[21]=this.element({parent:o||"root"},m===!0?I:i),r[21].w=300,r[21].h=100,r[21].color="0x475569ff",a[21].populate(r[21]),m===!0&&(S-=1),E[22]=c.components&&c.components.Circle||f.Circle,o=a[19],r[22]={},a[22]=this.element({parent:o||"root"},m===!0?I:i),r[22].x=150,r[22].y=150,r[22].size=100,r[22].color="0xffffffff",R[22]=[],typeof E[22]<"u")for(let A in E[22][Symbol.for("config")].props)delete r[22][E[22][Symbol.for("config")].props[A]],R[22].push(E[22][Symbol.for("config")].props[A]);if(a[22].populate(r[22]),m===!0&&(S-=1),o=a[22],C[23]={},C[23].x=150,C[23].y=150,C[23].size=100,C[23].color="0xffffffff",k=C[23].is||"Circle",f[23],typeof k=="string"){if(f[23]=c.components&&c.components[k]||f[k],!f[23])throw new Error('Component "Circle" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[23]=k);return a[23]=f[23].call(null,{props:C[23]},a[22],i),a[23][Symbol.for("slots")][0]?(o=a[23][Symbol.for("slots")][0],I=a[23],m=!0):o=a[23][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),o=a[0],r[24]={},a[24]=this.element({parent:o||"root"},m===!0?I:i),r[24].w=300,r[24].h=300,r[24].x=50,r[24].y=700,r[24].color="0xef444480",a[24].populate(r[24]),m===!0&&(S-=1),o=a[0],r[25]={},a[25]=this.element({parent:o||"root"},m===!0?I:i),r[25].w=400,r[25].h=100,r[25].x=800,r[25].y=900,r[25].color="0x0284c7ff",a[25].populate(r[25]),m===!0&&(S-=1),o=a[25],r[26]={},a[26]=this.element({parent:o||"root"},m===!0?I:i),r[26].w=o.node.width*(42/100),r[26].h=o.node.height*(30/100),r[26].y=o.node.height*(5/100),r[26].x=o.node.width*(1/100),r[26].color="0x075985ff",a[26].populate(r[26]),m===!0&&(S-=1),o=a[25],r[27]={},a[27]=this.element({parent:o||"root"},m===!0?I:i),r[27].w=i.bar2.v,r[27].h=o.node.height*(30/100),r[27].y=o.node.height*(35/100),r[27].x=o.node.width*(1/100),r[27].color="0x6b21a8ff",a[27].populate(r[27]),m===!0&&(S-=1),o=a[25],r[28]={},a[28]=this.element({parent:o||"root"},m===!0?I:i),r[28].w={transition:i.bar3},r[28].h=o.node.height*(30/100),r[28].y=o.node.height*(65/100),r[28].x=o.node.width*(1/100),r[28].color="0x9f1239ff",a[28].populate(r[28]),m===!0&&(S-=1),o=a[0],r[29]={},a[29]=this.element({parent:o||"root"},m===!0?I:i),r[29].w=250,r[29].h=250,r[29].color="0xfef08aff",r[29].x=450,r[29].y=700,a[29].populate(r[29]),m===!0&&(S-=1),o=a[29],r[30]={},a[30]=this.element({parent:o||"root"},m===!0?I:i),r[30].w=40,r[30].h=40,r[30].placement="left",r[30].color="0x818cf8ff",a[30].populate(r[30]),m===!0&&(S-=1),o=a[29],r[31]={},a[31]=this.element({parent:o||"root"},m===!0?I:i),r[31].w=40,r[31].h=40,r[31].placement="center",r[31].color="0x2563ebff",a[31].populate(r[31]),m===!0&&(S-=1),o=a[29],r[32]={},a[32]=this.element({parent:o||"root"},m===!0?I:i),r[32].w=40,r[32].h=40,r[32].placement="right",r[32].color="0x1e40afff",a[32].populate(r[32]),m===!0&&(S-=1),o=a[29],r[33]={},a[33]=this.element({parent:o||"root"},m===!0?I:i),r[33].w=40,r[33].h=40,r[33].x=54,r[33].placement="top",r[33].color="0xf472b6ff",a[33].populate(r[33]),m===!0&&(S-=1),o=a[29],r[34]={},a[34]=this.element({parent:o||"root"},m===!0?I:i),r[34].w=40,r[34].h=40,r[34].x=54,r[34].placement="middle",r[34].color="0xdb2777ff",a[34].populate(r[34]),m===!0&&(S-=1),o=a[29],r[35]={},a[35]=this.element({parent:o||"root"},m===!0?I:i),r[35].w=40,r[35].h=40,r[35].x=54,r[35].placement="bottom",r[35].color="0xbe185dff",a[35].populate(r[35]),m===!0&&(S-=1),o=a[29],r[36]={},a[36]=this.element({parent:o||"root"},m===!0?I:i),r[36].w=40,r[36].h=40,r[36].placement="{x: 'center', y: 'bottom'}",r[36].color="0xa3e635ff",a[36].populate(r[36]),m===!0&&(S-=1),o=a[29],r[37]={},a[37]=this.element({parent:o||"root"},m===!0?I:i),r[37].w=40,r[37].h=40,r[37].placement="{x: 'right', y: 'middle'}",r[37].color="0x65a30dff",a[37].populate(r[37]),m===!0&&(S-=1),o=a[29],r[38]={},a[38]=this.element({parent:o||"root"},m===!0?I:i),r[38].w=40,r[38].h=40,r[38].placement="{x: 'center', y: 'middle'}",r[38].color="0x4d7c0fff",a[38].populate(r[38]),m===!0&&(S-=1),{elms:a,cleanup:()=>{I=null,i=null,o=null,E[22]=null,C[23]=null,f[23]=null,E.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[9].set("x",o.xA)},function(o,i,c,f,x,w){i[10].set("x",o.xB)},function(o,i,c,f,x,w){i[11].set("x",o.xC)},function(o,i,c,f,x,w){i[12].set("x",o.xD)},function(o,i,c,f,x,w){i[16].set("y",300/2)},function(o,i,c,f,x,w){i[16].set("x",200/2)},function(o,i,c,f,x,w){i[17].set("y",{transition:o.yNested})},function(o,i,c,f,x,w){i[17].set("x",{transition:o.xNested})},function(o,i,c,f,x,w){i[27].set("w",o.bar2.v)},function(o,i,c,f,x,w){i[28].set("w",{transition:o.bar3})}],context:{}},state(){return{x1:20,x2:140,x3:260,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=this.yNested===0?50:0},2e3),this.$setInterval(()=>{this.xNested=this.xNested===0?150:0},1e3),this.$setInterval(()=>{const h=parseFloat(this.bar2.v),o=this.bar2.direction==="up"?h+10:h-10;this.bar2.v=o+"%",o>=90&&(this.bar2.direction="down"),o<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(Math.random()*96)+"%"},2e3)}}});var QL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function JL(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Vm={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var uC;function ZL(){return uC||(uC=1,function(h){(function(){var o=typeof window<"u"?window:QL,i={};(function(f,x,w){var y;function a(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function C(e){e=[typeof globalThis=="object"&&globalThis,e,typeof f=="object"&&f,typeof self=="object"&&self,typeof x=="object"&&x];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var R=C(this);function k(e,t){if(t)e:{var n=R;e=e.split(".");for(var s=0;s<e.length-1;s++){var u=e[s];if(!(u in n))break e;n=n[u]}e=e[e.length-1],s=n[e],t=t(s),t!=s&&t!=null&&r(n,e,{configurable:!0,writable:!0,value:t})}}k("Symbol",function(e){function t(l){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(s+(l||"")+"_"+u++,l)}function n(l,d){this.g=l,r(this,"description",{configurable:!0,writable:!0,value:d})}if(e)return e;n.prototype.toString=function(){return this.g};var s="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",u=0;return t}),k("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var s=R[t[n]];typeof s=="function"&&typeof s.prototype[e]!="function"&&r(s.prototype,e,{configurable:!0,writable:!0,value:function(){return I(a(this))}})}return e});function I(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:a(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function S(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var E=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},A;if(typeof Object.setPrototypeOf=="function")A=Object.setPrototypeOf;else{var N;e:{var K={a:!0},Se={};try{Se.__proto__=K,N=Se.a;break e}catch{}N=!1}A=N?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Me=A;function ue(e,t){if(e.prototype=E(t.prototype),e.prototype.constructor=e,Me)Me(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var s=Object.getOwnPropertyDescriptor(t,n);s&&Object.defineProperty(e,n,s)}else e[n]=t[n];e.zm=t.prototype}function he(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function oe(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}he.prototype.s=function(e){this.h=e};function pe(e,t){e.i={Sh:t,di:!0},e.g=e.m||e.j}he.prototype.return=function(e){this.i={return:e},this.g=this.j};function D(e,t,n){return e.g=n,{value:t}}he.prototype.u=function(e){this.g=e};function ne(e){e.g=0}function le(e,t,n){e.m=t,n!=null&&(e.j=n)}function me(e,t){e.m=0,e.j=t||0}function V(e,t,n){e.g=t,e.m=n||0}function re(e,t){return e.m=t||0,t=e.i.Sh,e.i=null,t}function H(e){e.A=[e.i],e.m=0,e.j=0}function z(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.di?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function se(e){this.g=new he,this.h=e}function we(e,t){oe(e.g);var n=e.g.l;return n?Fe(e,"return"in n?n.return:function(s){return{value:s,done:!0}},t,e.g.return):(e.g.return(t),Je(e))}function Fe(e,t,n,s){try{var u=t.call(e.g.l,n);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return e.g.o=!1,u;var l=u.value}catch(d){return e.g.l=null,pe(e.g,d),Je(e)}return e.g.l=null,s.call(e.g,l),Je(e)}function Je(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,pe(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.di)throw t.Sh;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function $e(e){this.next=function(t){return oe(e.g),e.g.l?t=Fe(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=Je(e)),t},this.throw=function(t){return oe(e.g),e.g.l?t=Fe(e,e.g.l.throw,t,e.g.s):(pe(e.g,t),t=Je(e)),t},this.return=function(t){return we(e,t)},this[Symbol.iterator]=function(){return this}}function ke(e){function t(s){return e.next(s)}function n(s){return e.throw(s)}return new Promise(function(s,u){function l(d){d.done?s(d.value):Promise.resolve(d.value).then(t,n).then(l,u)}l(e.next())})}function j(e){return ke(new $e(new se(e)))}function lt(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}k("Promise",function(e){function t(d){this.h=0,this.i=void 0,this.g=[],this.o=!1;var p=this.j();try{d(p.resolve,p.reject)}catch(g){p.reject(g)}}function n(){this.g=null}function s(d){return d instanceof t?d:new t(function(p){p(d)})}if(e)return e;n.prototype.h=function(d){if(this.g==null){this.g=[];var p=this;this.i(function(){p.l()})}this.g.push(d)};var u=R.setTimeout;n.prototype.i=function(d){u(d,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var d=this.g;this.g=[];for(var p=0;p<d.length;++p){var g=d[p];d[p]=null;try{g()}catch(v){this.j(v)}}}this.g=null},n.prototype.j=function(d){this.i(function(){throw d})},t.prototype.j=function(){function d(v){return function(T){g||(g=!0,v.call(p,T))}}var p=this,g=!1;return{resolve:d(this.F),reject:d(this.l)}},t.prototype.F=function(d){if(d===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof t)this.H(d);else{e:switch(typeof d){case"object":var p=d!=null;break e;case"function":p=!0;break e;default:p=!1}p?this.C(d):this.m(d)}},t.prototype.C=function(d){var p=void 0;try{p=d.then}catch(g){this.l(g);return}typeof p=="function"?this.I(p,d):this.m(d)},t.prototype.l=function(d){this.s(2,d)},t.prototype.m=function(d){this.s(1,d)},t.prototype.s=function(d,p){if(this.h!=0)throw Error("Cannot settle("+d+", "+p+"): Promise already settled in state"+this.h);this.h=d,this.i=p,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var d=this;u(function(){if(d.B()){var p=R.console;typeof p<"u"&&p.error(d.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var d=R.CustomEvent,p=R.Event,g=R.dispatchEvent;return typeof g>"u"?!0:(typeof d=="function"?d=new d("unhandledrejection",{cancelable:!0}):typeof p=="function"?d=new p("unhandledrejection",{cancelable:!0}):(d=R.document.createEvent("CustomEvent"),d.initCustomEvent("unhandledrejection",!1,!0,d)),d.promise=this,d.reason=this.i,g(d))},t.prototype.A=function(){if(this.g!=null){for(var d=0;d<this.g.length;++d)l.h(this.g[d]);this.g=null}};var l=new n;return t.prototype.H=function(d){var p=this.j();d.Le(p.resolve,p.reject)},t.prototype.I=function(d,p){var g=this.j();try{d.call(p,g.resolve,g.reject)}catch(v){g.reject(v)}},t.prototype.then=function(d,p){function g(M,_){return typeof M=="function"?function(L){try{v(M(L))}catch(O){T(O)}}:_}var v,T,b=new t(function(M,_){v=M,T=_});return this.Le(g(d,v),g(p,T)),b},t.prototype.catch=function(d){return this.then(void 0,d)},t.prototype.Le=function(d,p){function g(){switch(v.h){case 1:d(v.i);break;case 2:p(v.i);break;default:throw Error("Unexpected state: "+v.h)}}var v=this;this.g==null?l.h(g):this.g.push(g),this.o=!0},t.resolve=s,t.reject=function(d){return new t(function(p,g){g(d)})},t.race=function(d){return new t(function(p,g){for(var v=m(d),T=v.next();!T.done;T=v.next())s(T.value).Le(p,g)})},t.all=function(d){var p=m(d),g=p.next();return g.done?s([]):new t(function(v,T){function b(L){return function(O){M[L]=O,_--,_==0&&v(M)}}var M=[],_=0;do M.push(void 0),_++,s(g.value).Le(b(M.length-1),T),g=p.next();while(!g.done)})},t});function De(e,t){return Object.prototype.hasOwnProperty.call(e,t)}k("WeakMap",function(e){function t(g){if(this.g=(p+=Math.random()+1).toString(),g){g=m(g);for(var v;!(v=g.next()).done;)v=v.value,this.set(v[0],v[1])}}function n(){}function s(g){var v=typeof g;return v==="object"&&g!==null||v==="function"}function u(g){if(!De(g,d)){var v=new n;r(g,d,{value:v})}}function l(g){var v=Object[g];v&&(Object[g]=function(T){return T instanceof n?T:(Object.isExtensible(T)&&u(T),v(T))})}if(function(){if(!e||!Object.seal)return!1;try{var g=Object.seal({}),v=Object.seal({}),T=new e([[g,2],[v,3]]);return T.get(g)!=2||T.get(v)!=3?!1:(T.delete(g),T.set(v,4),!T.has(g)&&T.get(v)==4)}catch{return!1}}())return e;var d="$jscomp_hidden_"+Math.random();l("freeze"),l("preventExtensions"),l("seal");var p=0;return t.prototype.set=function(g,v){if(!s(g))throw Error("Invalid WeakMap key");if(u(g),!De(g,d))throw Error("WeakMap key fail: "+g);return g[d][this.g]=v,this},t.prototype.get=function(g){return s(g)&&De(g,d)?g[d][this.g]:void 0},t.prototype.has=function(g){return s(g)&&De(g,d)&&De(g[d],this.g)},t.prototype.delete=function(g){return s(g)&&De(g,d)&&De(g[d],this.g)?delete g[d][this.g]:!1},t}),k("Map",function(e){function t(){var p={};return p.sc=p.next=p.head=p}function n(p,g){var v=p[1];return I(function(){if(v){for(;v.head!=p[1];)v=v.sc;for(;v.next!=v.head;)return v=v.next,{done:!1,value:g(v)};v=null}return{done:!0,value:void 0}})}function s(p,g){var v=g&&typeof g;v=="object"||v=="function"?l.has(g)?v=l.get(g):(v=""+ ++d,l.set(g,v)):v="p_"+g;var T=p[0][v];if(T&&De(p[0],v))for(p=0;p<T.length;p++){var b=T[p];if(g!==g&&b.key!==b.key||g===b.key)return{id:v,list:T,index:p,entry:b}}return{id:v,list:T,index:-1,entry:void 0}}function u(p){if(this[0]={},this[1]=t(),this.size=0,p){p=m(p);for(var g;!(g=p.next()).done;)g=g.value,this.set(g[0],g[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var p=Object.seal({x:4}),g=new e(m([[p,"s"]]));if(g.get(p)!="s"||g.size!=1||g.get({x:4})||g.set({x:4},"t")!=g||g.size!=2)return!1;var v=g.entries(),T=v.next();return T.done||T.value[0]!=p||T.value[1]!="s"?!1:(T=v.next(),!(T.done||T.value[0].x!=4||T.value[1]!="t"||!v.next().done))}catch{return!1}}())return e;var l=new WeakMap;u.prototype.set=function(p,g){p=p===0?0:p;var v=s(this,p);return v.list||(v.list=this[0][v.id]=[]),v.entry?v.entry.value=g:(v.entry={next:this[1],sc:this[1].sc,head:this[1],key:p,value:g},v.list.push(v.entry),this[1].sc.next=v.entry,this[1].sc=v.entry,this.size++),this},u.prototype.delete=function(p){return p=s(this,p),p.entry&&p.list?(p.list.splice(p.index,1),p.list.length||delete this[0][p.id],p.entry.sc.next=p.entry.next,p.entry.next.sc=p.entry.sc,p.entry.head=null,this.size--,!0):!1},u.prototype.clear=function(){this[0]={},this[1]=this[1].sc=t(),this.size=0},u.prototype.has=function(p){return!!s(this,p).entry},u.prototype.get=function(p){return(p=s(this,p).entry)&&p.value},u.prototype.entries=function(){return n(this,function(p){return[p.key,p.value]})},u.prototype.keys=function(){return n(this,function(p){return p.key})},u.prototype.values=function(){return n(this,function(p){return p.value})},u.prototype.forEach=function(p,g){for(var v=this.entries(),T;!(T=v.next()).done;)T=T.value,p.call(g,T[1],T[0],this)},u.prototype[Symbol.iterator]=u.prototype.entries;var d=0;return u}),k("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var s;!(s=n.next()).done;)this.add(s.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),s=new e(m([n]));if(!s.has(n)||s.size!=1||s.add(n)!=s||s.size!=1||s.add({x:4})!=s||s.size!=2)return!1;var u=s.entries(),l=u.next();return l.done||l.value[0]!=n||l.value[1]!=n?!1:(l=u.next(),l.done||l.value[0]==n||l.value[0].x!=4||l.value[1]!=l.value[0]?!1:u.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,s){var u=this;this.g.forEach(function(l){return n.call(s,l,l,u)})},t)});function Ye(e,t){e instanceof String&&(e+="");var n=0,s=!1,u={next:function(){if(!s&&n<e.length){var l=n++;return{value:t(l,e[l]),done:!1}}return s=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u}k("Array.prototype.values",function(e){return e||function(){return Ye(this,function(t,n){return n})}}),k("Array.from",function(e){return e||function(t,n,s){n=n??function(p){return p};var u=[],l=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof l=="function"){t=l.call(t);for(var d=0;!(l=t.next()).done;)u.push(n.call(s,l.value,d++))}else for(l=t.length,d=0;d<l;d++)u.push(n.call(s,t[d],d));return u}}),k("Array.prototype.keys",function(e){return e||function(){return Ye(this,function(t){return t})}}),k("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),k("Array.prototype.includes",function(e){return e||function(t,n){var s=this;s instanceof String&&(s=String(s));var u=s.length;for(n=n||0,0>n&&(n=Math.max(n+u,0));n<u;n++){var l=s[n];if(l===t||Object.is(l,t))return!0}return!1}});function un(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}k("String.prototype.includes",function(e){return e||function(t,n){return un(this,t,"includes").indexOf(t,n||0)!==-1}}),k("String.fromCodePoint",function(e){return e||function(t){for(var n="",s=0;s<arguments.length;s++){var u=Number(arguments[s]);if(0>u||1114111<u||u!==Math.floor(u))throw new RangeError("invalid_code_point "+u);65535>=u?n+=String.fromCharCode(u):(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),n+=String.fromCharCode(u&1023|56320))}return n}});function ji(e,t,n){e instanceof String&&(e=String(e));for(var s=e.length,u=0;u<s;u++){var l=e[u];if(t.call(n,l,u,e))return{ai:u,v:l}}return{ai:-1,v:void 0}}k("Array.prototype.findIndex",function(e){return e||function(t,n){return ji(this,t,n).ai}}),k("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var s;!(s=n.next()).done;)this.add(s.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),s=Object.seal({}),u=new e([n]);return!u.has(n)||u.has(s)?!1:(u.delete(n),u.add(s),!u.has(n)&&u.has(s))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),k("Array.prototype.find",function(e){return e||function(t,n){return ji(this,t,n).v}}),k("String.prototype.startsWith",function(e){return e||function(t,n){var s=un(this,t,"startsWith"),u=s.length,l=t.length;n=Math.max(0,Math.min(n|0,s.length));for(var d=0;d<l&&n<u;)if(s[n++]!=t[d++])return!1;return d>=l}}),k("Object.entries",function(e){return e||function(t){var n=[],s;for(s in t)De(t,s)&&n.push([s,t[s]]);return n}});var Zi=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var s=arguments[n];if(s)for(var u in s)De(s,u)&&(e[u]=s[u])}return e};k("Object.assign",function(e){return e||Zi}),k("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),k("Array.prototype.entries",function(e){return e||function(){return Ye(this,function(t,n){return[t,n]})}}),k("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),k("String.prototype.repeat",function(e){return e||function(t){var n=un(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var s="";t;)t&1&&(s+=n),(t>>>=1)&&(n+=n);return s}}),k("Number.EPSILON",function(){return Math.pow(2,-52)}),k("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),k("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),k("Object.values",function(e){return e||function(t){var n=[],s;for(s in t)De(t,s)&&n.push(t[s]);return n}}),k("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),k("String.prototype.endsWith",function(e){return e||function(t,n){var s=un(this,t,"endsWith");n===void 0&&(n=s.length),n=Math.max(0,Math.min(n|0,s.length));for(var u=t.length;0<u&&0<n;)if(s[--n]!=t[--u])return!1;return 0>=u}}),k("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}});var ii=this||self;function be(e,t){e=e.split(".");var n=ii;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var s;e.length&&(s=e.shift());)e.length||t===void 0?n[s]&&n[s]!==Object.prototype[s]?n=n[s]:n=n[s]={}:n[s]=t}function $i(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}$i.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function gi(e){return e.h/(1-Math.pow(e.g,e.i))}function ri(){this.h=new $i(2),this.j=new $i(5),this.g=0,this.i=128e3,this.l=16e3}ri.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},ri.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},ri.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(gi(this.h),gi(this.j))};function ar(){}function En(){}function ft(){}function mi(e){var t=lt.apply(1,arguments);Ue.has(e)||(Ue.add(e),ft.apply(ar,S(t)))}function Yr(){}function Ql(){}function Jl(){}var Ue=new Set;f.console&&(new Map().set(1,function(){return console.error.apply(console,S(lt.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,S(lt.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,S(lt.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,S(lt.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,S(lt.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,S(lt.apply(0,arguments)))}),ft=function(){return console.warn.apply(console,S(lt.apply(0,arguments)))},En=function(){console.error.apply(console,S(lt.apply(0,arguments)))});function ee(){this.g=new Map}y=ee.prototype,y.push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},y.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},y.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(s){return s!=t});this.g.set(e,n),n.length||this.g.delete(e)}},y.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},y.size=function(){return this.g.size},y.keys=function(){return Array.from(this.g.keys())};function Ee(){this.g=new ee}y=Ee.prototype,y.release=function(){this.Ra(),this.g=null},y.D=function(e,t,n,s){this.g&&(e=new tt(e,t,n,s),this.g.push(t,e))},y.Aa=function(e,t,n,s){function u(d){l.Ja(e,t,u),n(d)}var l=this;this.D(e,t,u,s)},y.Ja=function(e,t,n){if(this.g){var s=this.g.get(t)||[];s=m(s);for(var u=s.next();!u.done;u=s.next())u=u.value,u.target!=e||n!=u.listener&&n||(u.Ja(),this.g.remove(t,u))}},y.Ra=function(){if(this.g){for(var e=[],t=m(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,S(n.value));for(e=m(e),t=e.next();!t.done;t=e.next())t.value.Ja();this.g.g.clear()}},be("shaka.util.EventManager",Ee),Ee.prototype.removeAll=Ee.prototype.Ra,Ee.prototype.unlisten=Ee.prototype.Ja,Ee.prototype.listenOnce=Ee.prototype.Aa,Ee.prototype.listen=Ee.prototype.D,Ee.prototype.release=Ee.prototype.release;function tt(e,t,n,s){this.target=e,this.type=t,this.listener=n,this.g=jt(e,s),this.target.addEventListener(t,n,this.g)}tt.prototype.Ja=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function jt(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(s){return!n.has(s)}),it(e)?t:t.capture||!1}function it(e){var t=xt;if(t==null){t=!1;try{var n={},s={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",s),Object.defineProperty(n,"capture",s),s=function(){},e.addEventListener("test",s,n),e.removeEventListener("test",s,n)}catch{t=!1}xt=t}return t||!1}var xt=void 0;be("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function je(e){this.h=e,this.g=void 0}je.prototype.value=function(){return this.g===void 0&&(this.g=this.h()),this.g};/*
 @license
 Shaka Player
 Copyright 2025 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Be(){return ce.value()}var St=null,xe=null,ce=new je(function(){var e=void 0;return St&&(e=St()),!e&&xe&&(e=xe()),e});function Rt(e,t){this.g=e,this.h=t}Rt.prototype.toString=function(){return"v"+this.g+"."+this.h};function st(e,t){var n=new Rt(5,0),s=_y,u=s.g,l=n.h-u.h;(0<(n.g-u.g||l)?s.i:s.h)(s.g,n,e,t)}function Zl(e,t,n,s){ft([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",s].join(" "))}function D4(e,t,n,s){En([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",s].join(" "))}var _y=null;/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var P4=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function en(e){var t;e instanceof en?(ef(this,e.cc),this.ed=e.ed,tf(this,e.Cb),Uh(this,e.vd),this.ob=e.ob,Io(this,e.g.clone()),this.Nc=e.Nc):e&&(t=String(e).match(P4))?(ef(this,t[1]||"",!0),this.ed=gs(t[2]||""),tf(this,t[3]||"",!0),Uh(this,t[4]),this.ob=gs(t[5]||"",!0),Io(this,t[6]||"",!0),this.Nc=gs(t[7]||"")):this.g=new ms(null)}y=en.prototype,y.cc="",y.ed="",y.Cb="",y.vd=null,y.ob="",y.Nc="",y.toString=function(){var e=[],t=this.cc;if(t&&e.push(Zu(t,Ly,!0),":"),t=this.Cb){e.push("//");var n=this.ed;n&&e.push(Zu(n,Ly,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.vd,t!=null&&e.push(":",String(t))}return(t=this.ob)&&(this.Cb&&t.charAt(0)!="/"&&e.push("/"),e.push(Zu(t,t.charAt(0)=="/"?U4:N4,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Nc)&&e.push("#",Zu(t,F4)),e.join("")},y.resolve=function(e){var t=this.clone();t.cc==="data"&&(t=new en);var n=!!e.cc;n?ef(t,e.cc):n=!!e.ed,n?t.ed=e.ed:n=!!e.Cb,n?tf(t,e.Cb):n=e.vd!=null;var s=e.ob;if(n)Uh(t,e.vd);else if(n=!!e.ob){if(s.charAt(0)!="/")if(this.Cb&&!this.ob)s="/"+s;else{var u=t.ob.lastIndexOf("/");u!=-1&&(s=t.ob.substr(0,u+1)+s)}if(s==".."||s==".")s="";else if(s.indexOf("./")!=-1||s.indexOf("/.")!=-1){u=s.lastIndexOf("/",0)==0,s=s.split("/");for(var l=[],d=0;d<s.length;){var p=s[d++];p=="."?u&&d==s.length&&l.push(""):p==".."?((1<l.length||l.length==1&&l[0]!="")&&l.pop(),u&&d==s.length&&l.push("")):(l.push(p),u=!0)}s=l.join("/")}}return n?t.ob=s:n=e.g.toString()!=="",n?Io(t,e.g.clone()):n=!!e.Nc,n&&(t.Nc=e.Nc),t},y.clone=function(){return new en(this)};function ef(e,t,n){e.cc=n?gs(t,!0):t,e.cc&&(e.cc=e.cc.replace(/:$/,""))}function tf(e,t,n){e.Cb=n?gs(t,!0):t}function Uh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.vd=t}else e.vd=null}function Io(e,t,n){t instanceof ms?e.g=t:(n||(t=Zu(t,B4)),e.g=new ms(t))}function gs(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Zu(e,t,n){return e!=null?(e=encodeURI(e).replace(t,O4),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function O4(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Ly=/[#\/\?@]/g,N4=/[#\?:]/g,U4=/[#\?]/g,B4=/[#\?@]/g,F4=/#/g;function ms(e){this.g=e||null}function nf(e){if(!e.fb&&(e.fb=new Map,e.Ld=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var s=t[n].indexOf("="),u=null;if(0<=s){var l=t[n].substring(0,s);u=t[n].substring(s+1)}else l=t[n];l=decodeURIComponent(l),u=u||"",e.add(l,decodeURIComponent(u))}}y=ms.prototype,y.fb=null,y.Ld=null;function Dy(e){return nf(e),e.Ld}y.add=function(e,t){nf(this),this.g=null;var n=this.fb.has(e)?this.fb.get(e):null;return n||this.fb.set(e,n=[]),n.push(t),this.Ld++,this},y.set=function(e,t){return nf(this),this.g=null,this.fb.has(e)?this.fb.set(e,[t]):this.add(e,t),this},y.get=function(e){return nf(this),this.fb.get(e)||[]},y.toString=function(){if(this.g)return this.g;if(!this.fb||!this.fb.size)return"";for(var e=[],t=m(this.fb.keys()),n=t.next();!n.done;n=t.next()){var s=n.value;n=encodeURIComponent(s),s=this.fb.get(s);for(var u=0;u<s.length;u++){var l=n;s[u]!==""&&(l+="="+encodeURIComponent(s[u])),e.push(l)}}return this.g=e.join("&")},y.clone=function(){var e=new ms;if(e.g=this.g,this.fb){for(var t=new Map,n=m(this.fb),s=n.next();!s.done;s=n.next()){var u=m(s.value);s=u.next().value,u=u.next().value,t.set(s,u.concat())}e.fb=t,e.Ld=this.Ld}return e};function ys(){}function xr(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Ze(e);t=Ze(t);for(var s=0;s<e.byteLength;s++)if(n[s]!=t[s])return!1;return!0}function Ei(e){return ArrayBuffer.isView(e)?e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function Ze(e,t,n){return n=n===void 0?1/0:n,Bh(e,t===void 0?0:t,n,Uint8Array)}function Py(e,t,n){return n=n===void 0?1/0:n,Bh(e,t===void 0?0:t,n,Uint16Array)}function Yn(e,t,n){return n=n===void 0?1/0:n,Bh(e,t===void 0?0:t,n,DataView)}function Bh(e,t,n,s){var u=ArrayBuffer.isView(e)?e.buffer:e,l=1;"BYTES_PER_ELEMENT"in s&&(l=s.BYTES_PER_ELEMENT);var d=((e.byteOffset||0)+e.byteLength)/l;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/l,d))),new s(u,e,Math.floor(Math.min(e+Math.max(n,0),d))-e)}be("shaka.util.BufferUtils",ys),ys.toDataView=Yn,ys.toUint16=Py,ys.toUint8=Ze,ys.toArrayBuffer=Ei,ys.equal=xr;function q(e,t,n){var s=lt.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=s,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(u){this.stack=u.stack}}q.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},be("shaka.util.Error",q),q.Severity={RECOVERABLE:1,CRITICAL:2},q.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},q.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4054,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007};function Mo(){}function Ht(e){if(!e)return"";if(e=Ze(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),f.TextDecoder&&!Be().ph())return e=new TextDecoder().decode(e),e.includes("�")&&En('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var s=65533;if((e[n]&128)==0?s=e[n]:e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(s=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(s=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(s=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3),65535>=s)t+=String.fromCharCode(s);else{s-=65536;var u=s&1023;t+=String.fromCharCode(55296+(s>>10)),t+=String.fromCharCode(56320+u)}}return t}function qr(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new q(2,2,2004);n=Math.floor(e.byteLength/2);var s=new Uint16Array(n);e=Yn(e);for(var u=0;u<n;u++)s[u]=e.getUint16(2*u,t);return jh(s)}function lr(e){function t(s){return n.byteLength<=s||9<=n[s]&&126>=n[s]}if(!e)return"";var n=Ze(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Ht(n);if(n[0]==254&&n[1]==255)return qr(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return qr(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return qr(e,!1);if(n[1]==0&&n[3]==0)return qr(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Ht(e);throw new q(2,2,2003)}function zi(e){if(f.TextEncoder&&!Be().ph()){var t=new TextEncoder;return Ei(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return Ei(t)}function Fh(e,t){for(var n=new ArrayBuffer(2*e.length),s=new DataView(n),u=0;u<e.length;++u)s.setUint16(2*u,e.charCodeAt(u),t);return n}function jh(e){return Oy.value()(e)}function qn(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,s=RegExp(n.source);return e&&s.test(e)?e.replace(n,function(u){return u[1]=="#"?(u=u[2]=="x"||u[2]=="X"?parseInt(u.substring(3),16):parseInt(u.substring(2),10),0<=u&&1114111>=u?String.fromCodePoint(u):""):t[u]||"'"}):e||""}be("shaka.util.StringUtils",Mo),Mo.resetFromCharCode=function(){Oy.g=void 0},Mo.toUTF16=Fh,Mo.toUTF8=zi,Mo.fromBytesAutoDetect=lr,Mo.fromUTF16=qr,Mo.fromUTF8=Ht;var Oy=new je(function(){function e(n){try{var s=new Uint8Array(n);return 0<String.fromCharCode.apply(null,s).length}catch{return!1}}for(var t={Hc:65536};0<t.Hc;t={Hc:t.Hc},t.Hc/=2)if(e(t.Hc))return function(n){return function(s){for(var u="",l=0;l<s.length;l+=n.Hc)u+=String.fromCharCode.apply(null,s.subarray(l,l+n.Hc));return u}}(t);return null});function In(){}function rf(e){return e=jh(Ze(e)),btoa(e)}function wr(e,t){return t=t??!0,e=rf(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Ii(e){e=f.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function Ro(e){for(var t=e.length/2,n=new Uint8Array(t),s=0;s<t;s++)n[s]=f.parseInt(e.substr(2*s,2),16);return n}function Sr(e){var t=Ze(e);e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function Zt(){for(var e=lt.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var s=n=0;s<e.length;++s){var u=e[s];ArrayBuffer.isView(u)&&u.BYTES_PER_ELEMENT===1?t.set(u,n):t.set(Ze(u),n),n+=u.byteLength}return t}be("shaka.util.Uint8ArrayUtils",In),In.concat=Zt,In.toHex=Sr,In.fromHex=Ro,In.fromBase64=Ii,In.toBase64=wr,In.toStandardBase64=rf;function yn(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var s=new en(e[0]);return t=new en(t[0]),t=s.resolve(t),n&&Io(t,n),[t.toString()]}t=t.map(function(p){return new en(p)}),s=[],e=m(e);for(var u=e.next();!u.done;u=e.next()){u=new en(u.value);for(var l=m(t),d=l.next();!d.done;d=l.next())d=u.resolve(d.value),n&&Io(d,n),s.push(d.toString())}return s}function Tr(e,t,n,s){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},s&&(e.keySystemUris=new Set([s])),e}function Ny(e,t){t=t===void 0?"cenc":t;var n=[],s=[],u=[];e.forEach(function(d,p){var g=p;g.length!=22&&(g=wr(Ro(p),!1));var v=d;v.length!=22&&(v=wr(Ro(d),!1)),d={kty:"oct",kid:g,k:v},n.push(d),s.push(d.kid),u.push(p)}),e=JSON.stringify({keys:n});var l=JSON.stringify({kids:s});return l=[{initData:Ze(zi(l)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+f.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:l,keyIds:new Set(u)}}function vs(e,t){if(t.length==1)return t[0];if(e=Qn(e,t),e!=null)return e;throw new q(2,4,4025,t)}function Qn(e,t){var n=By.get(e);n=m(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;for(var u=m(t),l=u.next();!l.done;l=u.next())if(l=l.value,s.test(l.trim()))return l.trim()}return e==ct?"":null}function $h(e,t){var n=[];e=By.get(e),e=m(e);for(var s=e.next();!s.done;s=e.next()){s=s.value;for(var u=m(t),l=u.next();!l.done;l=u.next())l=l.value,s.test(l.trim())&&n.push(l.trim())}return n}var ct="text",vn={Ca:"video",ea:"audio",Ta:ct,Tf:"image",hl:"application"},Uy=1/15,By=new Map().set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function ea(e,t,n,s){this.g=null,this.l=e,this.i=t,this.m=n,this.o=s,this.j=!1;e:{if(typeof libDPIModule>"u"&&ft("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,st("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{ft("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(ft("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||ft(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function zh(e,t,n,s){s.type!=="video"||e.o&&!s.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",s.id,-n,!e.o)}function Fy(e){e.g&&e.i.classList.add("shaka-hidden")}ea.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function jy(e){return e&&typeof LCEVCdec<"u"?e.codecs=="lvc1":!1}be("shaka.lcevc.Dec",ea),ea.prototype.release=ea.prototype.release;function On(e){if(Vh.has(e))return Vh.get(e);var t=f.ManagedMediaSource||f.MediaSource;return t?(t=t.isTypeSupported(e),Vh.set(e,t),t):!1}function xs(){var e=f.ManagedSourceBuffer||f.SourceBuffer;return!!e&&!!e.prototype&&!!e.prototype.changeType}function $y(){var e=f.ManagedMediaSource||f.MediaSource;return e&&e.prototype?!!e.prototype.setLiveSeekableRange&&!!e.prototype.clearLiveSeekableRange:!1}var Vh=new Map;function ta(){}ta.prototype.extract=function(){},ta.prototype.decode=function(){return[]},ta.prototype.clear=function(){},ta.prototype.getStreams=function(){return[]};function Hh(){}Hh.prototype.init=function(){},Hh.prototype.parse=function(){return[]};function zy(){}y=zy.prototype,y.init=function(){},y.vf=function(){},y.Fd=function(){},y.remove=function(){},y.Uf=function(){},be("shaka.media.IClosedCaptionParser",zy);function er(e){this.h=new Map,this.i=0,this.j=new Hh,(e=Vy(e.toLowerCase()))&&(this.j=e()),this.g=new ta,(e=_o)&&(this.g=e(),this.h.set(this.i,this.g))}y=er.prototype,y.init=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?-1:n,n!=-1&&this.i!=n){t=n;var s=this.h.get(t);this.h.set(this.i,this.g),s?this.g=s:((s=_o)&&(this.g=s()),this.h.set(t,this.g))}else t||this.Fd();this.j.init(e),n!=-1&&(this.i=n)},y.vf=function(e){e=this.j.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Ze(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},y.Fd=function(){this.g.clear()},y.remove=function(e){e=e===void 0?[]:e,e=new Set(e);for(var t=m(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var s=this.h.get(n);s&&s.clear(),this.h.delete(n)}},y.Uf=function(){return this.g.getStreams()};function Gh(e,t){Xh.set(e,t)}function Vy(e){return Xh.get(e)}be("shaka.media.ClosedCaptionParser",er),er.findDecoder=function(){return _o},er.unregisterDecoder=function(){_o=null},er.registerDecoder=function(e){_o=e},er.findParser=Vy,er.unregisterParser=function(e){Xh.delete(e)},er.registerParser=Gh;var Xh=new Map,_o=null;function Lo(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=oi,this.scroll=Hy}be("shaka.text.CueRegion",Lo);var oi=1;Lo.units={PX:0,PERCENTAGE:oi,LINES:2};var Hy="";Lo.scrollMode={NONE:Hy,UP:"up"};function Gy(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Vi(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function Wh(e,t,n){if(n||(n=Gy),e.length!=t.length)return!1;t=t.slice(),e=m(e);for(var s=e.next(),u={};!s.done;u={ei:void 0},s=e.next()){if(u.ei=s.value,s=t.findIndex(function(l){return function(d){return n(l.ei,d)}}(u)),s==-1)return!1;t[s]=t[t.length-1],t.pop()}return t.length==0}function na(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=Gy),e.length!=t.length)return!1;for(var s=0;s<e.length;s++)if(!n(e[s],t[s]))return!1;return!0}function ws(e){this.h=e||"",this.g=0}function Ss(e){Do(e,/[ \t]+/gm)}function Do(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function Po(e){return e.g==e.h.length?null:(e=Do(e,/[^ \t\n]*/gm))?e[0]:null}function ia(e){if(e=Do(e,j4),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function Ts(e){return e?ia(new ws(e)):null}var j4=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function of(){}function Hi(e){function t(s){switch(typeof s){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return s;default:if(!s||ArrayBuffer.isView(s))return s;if(n.has(s))return null;var u=Array.isArray(s);if(s.constructor!=Object&&!u)return null;n.add(s);var l=u?[]:{},d;for(d in s)l[d]=t(s[d]);return u&&(l.length=s.length),l}}var n=new WeakSet;return t(e)}function Qr(e){var t={},n;for(n in e)t[n]=e[n];return t}function sf(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var s=n.toString(),u=e[n];u!==void 0&&(u=sf(u))&&t.push(s+":"+u)}e="["+t.join(",")+"]"}else if(typeof e=="function")e="";else if(e instanceof Object){for(n=Object.keys(e),n.sort(),t=[],n=m(n),s=n.next();!s.done;s=n.next())u=s.value,s=JSON.stringify(u),u=e[u],u!==void 0&&(u=sf(u))&&t.push(s+":"+u);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}be("shaka.util.ObjectUtils",of),of.alphabeticalKeyOrderStringify=sf,of.shallowCloneObject=Qr,of.cloneObject=Hi;/*
 @license
 tXml
 Copyright 2015 Tobias Nickel
 SPDX-License-Identifier: MIT
*/function ra(e,t){var n=n===void 0?!1:n;return e=lr(e),Oo(e,t,n)}function Oo(e,t,n){return e=$4(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(s){return t.split(",").includes(s.tagName)}))?e:null}function Kh(e){return qh.has(e)?qh.get(e):""}function $4(e,t){function n(l,d){d=d===void 0?!1:d;for(var p=[];e[u];)if(e.charCodeAt(u)==60){if(e.charCodeAt(u+1)===47){d=u+2,u=e.indexOf(">",u),d=e.substring(d,u);var g=d.indexOf(l);if(g==-1){var v=l.indexOf(".");0<v&&(g=d.indexOf(l.substring(0,v)))}if(g==-1)throw l=e.substring(0,u).split(`
`),Error(`Unexpected close tag
Line: `+(l.length-1)+`
Column: `+(l[l.length-1].length+1)+`
Char: `+e[u]);u+1&&(u+=1);break}else if(e.charCodeAt(u+1)===33){if(e.charCodeAt(u+2)==45){for(;u!==-1&&(e.charCodeAt(u)!==62||e.charCodeAt(u-1)!=45||e.charCodeAt(u-2)!=45||u==-1);)u=e.indexOf(">",u+1);u===-1&&(u=e.length)}else if(e.charCodeAt(u+2)===91&&e.charCodeAt(u+8)===91&&e.substr(u+3,5).toLowerCase()==="cdata"){g=e.indexOf("]]>",u),g==-1?(p.push(e.substr(u+9)),u=e.length):(p.push(e.substring(u+9,g)),u=g+3);continue}u++;continue}e:{v=d,u++;var T=s(),b={};for(g=[];e.charCodeAt(u)!==62&&e[u];){var M=e.charCodeAt(u);if(64<M&&91>M||96<M&&123>M){M=s();for(var _=e.charCodeAt(u);_&&_!==39&&_!==34&&!(64<_&&91>_||96<_&&123>_)&&_!==62;)u++,_=e.charCodeAt(u);var L=u+1;if(u=e.indexOf(e[u],L),L=e.slice(L,u),_===39||_===34){if(u===-1){if(v={tagName:T,attributes:b,children:g,parent:null},t)for(T=0;T<g.length;T++)typeof g[T]!="string"&&(g[T].parent=v);g=v;break e}}else L=null,u--;if(M.startsWith("xmlns:")){_=L;var O=M.split(":")[1];qh.set(_,O),Qh.set(O,_)}T==="tt"&&M==="xml:space"&&L==="preserve"&&(v=!0),b[M]=L}u++}for(e.charCodeAt(u-1)!==47?(u++,g=n(T,v)):u++,v={tagName:T,attributes:b,children:g,parent:null},T=g.length,b=0;b<T;b++)M=g[b],typeof M!="string"?t&&(M.parent=v):b==T-1&&M==`
`&&g.pop();g=v}if(p.push(g),typeof g=="string")break;g.tagName[0]==="?"&&g.children&&(p.push.apply(p,S(g.children)),g.children=[])}else g=u,u=e.indexOf("<",u)-1,u===-2&&(u=e.length),g=e.slice(g,u+1),d?0<g.length&&p.push(g):(p.length&&g.length==1&&g[0]==`
`||0<g.trim().length)&&p.push(g),u++;return p}function s(){for(var l=u;`\r
	>/= `.indexOf(e[u])===-1&&e[u];)u++;return e.slice(l,u)}var u=0;return n("")}function uf(e){return typeof e=="string"}function Xy(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function kt(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var s=e.next();!s.done;s=e.next())s=s.value,s.tagName===t&&n.push(s);return n}function an(e){return typeof e=="string"?qn(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:qn(e))}function si(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=an(e))&&(e=e.trim()),e):null}function tr(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var s=e.next();!s.done;s=e.next())tr(s.value,t,n)}return n}function Yt(e,t){return e=kt(e,t),e.length!=1?null:e[0]}function Gi(e,t,n){return e=Wy(e,t,n),e.length!=1?null:e[0]}function Qe(e,t,n,s){s=s===void 0?null:s;var u=null;return e=e.attributes[t],e!=null&&(u=n(e)),u??s}function Cr(e,t,n){return t=Kh(t),e.attributes[t+":"+n]||null}function Wy(e,t,n){var s=Kh(t);if(t=[],e.children)for(n=s?s+":"+n:n,e=m(e.children),s=e.next();!s.done;s=e.next())(s=s.value)&&s.tagName===n&&t.push(s);return t}function fr(e,t,n){t=m(t);for(var s=t.next();!s.done;s=t.next())if(s=Cr(e,s.value,n))return s;return null}function br(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function cr(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function af(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Cn(e){return e=Number(e),e%1===0?e:null}function dr(e){return e=Number(e),e%1===0&&0<e?e:null}function bn(e){return e=Number(e),e%1===0&&0<=e?e:null}function lf(e){return e=Number(e),isNaN(e)?null:e}function ff(e){return e?e.toLowerCase()==="true":!1}function z4(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function cf(e){var t=[];e=qn(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=m(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var s=n.match(/^([\w]+)/);if(s){var u=n.match(/(@id='(.*?)')/),l=n.match(/(@t='(\d+)')/),d=n.match(/(@n='(\d+)')/),p=n.match(/\[(\d+)\]/);t.push({name:s[0],id:u?u[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:l?Number(l[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:d?Number(d[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:p?Number(p[1])-1:null,wc:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].wc=n.slice(1))}return t}function Ky(e,t){var n=cf(t.attributes.sel||"");if(n.length){var s=n[n.length-1],u=t.attributes.pos||null;n=s.position,n==null&&(s.t!==null&&(n=Yy(e,"t",s.t)),s.n!==null&&(n=Yy(e,"n",s.n))),n===null?n=u==="prepend"?0:e.length:u==="prepend"?--n:u==="after"&&++n,u=t.tagName,(s=s.wc)&&e[n]?qy(e[n],u,s,si(t)||""):(u!=="remove"&&u!=="replace"||e.splice(n,1),u!=="add"&&u!=="replace"||e.splice.apply(e,[n,0].concat(S(t.children))))}}function Yy(e,t,n){var s=0;e=m(e);for(var u=e.next();!u.done;u=e.next()){if(Number(u.value.attributes[t])===n)return s;s++}return null}function qy(e,t,n,s){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=s)}function Qy(e){var t="",n=e.tagName.split(":");0<n.length&&(t=n[0],t=Qh.has(t)?Qh.get(t):""),t=document.createElementNS(t,e.tagName);for(var s in e.attributes)t.setAttribute(s,e.attributes[s]);for(e=m(e.children),s=e.next();!s.done;s=e.next())s=s.value,n=void 0,typeof s=="string"?n=new Text(s):n=Qy(s),t.appendChild(n);return t}function Yh(e){if(!e)return null;var t={tagName:e.tagName,attributes:Qr(e.attributes),children:[],parent:null};e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=Yh(n),n.parent=t),t.children.push(n);return t}var qh=new Map,Qh=new Map;function Bt(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Lo,this.position=null,this.positionAlign=pf,this.size=0,this.textAlign=hr,this.direction=ua,this.writingMode=No,this.lineInterpretation=aa,this.line=null,this.lineHeight="",this.lineAlign=Uo,this.displayAlign=sa,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=r1,this.fontStyle=ep,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Lc:32,rows:15}}function Jy(e,t){return e=new Bt(e,t,""),e.lineBreak=!0,e}Bt.prototype.clone=function(){var e=new Bt(0,0,""),t;for(t in this)e[t]=this[t],Array.isArray(e[t])&&(e[t]=e[t].slice());return e};function df(e,t){if(e.payload!=t.payload||!(.001>Math.abs(e.startTime-t.startTime)&&.001>Math.abs(e.endTime-t.endTime)))return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!na(e.nestedCues,t.nestedCues,df))return!1}else if(n=="region"||n=="cellResolution"){for(var s in e[n])if(e[n][s]!=t[n][s])return!1}else if(Array.isArray(e[n])){if(!na(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function hf(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&Zy(t);var s=n;n=[];for(var u=-1,l=0;l<s.length;l++)s[l]==="<"?u=l+1:s[l]===">"&&0<u&&(u=s.substr(u,l-u),u.match(H4)&&n.push(u),u=-1);for(n=m(n),l=n.next();!l.done;l=n.next())l=l.value,s=s.replace("<"+l+">",'<div time="'+l+'">'),s+="</div>";e:{l=s,u=[];var d=-1;n="",s=!1;for(var p=0;p<l.length;p++)if(l[p]==="/"){var g=l.indexOf(">",p);if(g===-1){n=l;break e}if((g=l.substring(p+1,g))&&g=="v"){s=!0;var v=null;if(u.length&&(v=u[u.length-1]),v){if(v===g)n+="/"+g+">";else{if(!v.startsWith("v")){n+=l[p];continue}n+="/"+v+">"}p+=g.length+1}else n+=l[p]}else n+=l[p]}else l[p]==="<"?(d=p+1,l[d]!="v"&&(d=-1)):l[p]===">"&&0<d&&(u.push(l.substr(d,p-d)),d=-1),n+=l[p];for(l=m(u),u=l.next();!u.done;u=l.next())u=u.value,d=u.replace(" ",".voice-"),n=n.replace("<"+u+">","<"+d+">"),n=n.replace("</"+u+">","</"+d+">"),s||(n+="</"+d+">")}n=V4(n),e.payload="";try{var T=Oo("<span>"+n+"</span>","span")}catch{}if(T)if(T=T.children,T.length!=1||T[0].tagName)for(T=m(T),n=T.next();!n.done;n=T.next())e1(n.value,e,t);else e.payload=qn(n);else e.payload=qn(n)}else e.payload=qn(n)}function Zy(e){for(var t=m(Object.entries(n1)),n=t.next();!n.done;n=t.next()){var s=m(n.value);n=s.next().value,s=s.next().value;var u=new Bt(0,0,"");u.color=s,e.set("."+n,u)}for(t=m(Object.entries(i1)),n=t.next();!n.done;n=t.next())s=m(n.value),n=s.next().value,s=s.next().value,u=new Bt(0,0,""),u.backgroundColor=s,e.set("."+n,u)}function V4(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,s=RegExp(n.source);return e&&s.test(e)?e.replace(n,function(u){return t[u]||""}):e||""}function e1(e,t,n){var s=t.clone();if(s.nestedCues=[],s.payload="",s.rubyTag="",s.line=null,s.region=new Lo,s.position=null,s.size=0,s.textAlign=hr,e.tagName)for(var u=m(e.tagName.split(/(?=[ .])+/g)),l=u.next();!l.done;l=u.next()){var d=l=l.value;if(d.startsWith(".voice-")){var p=d.split("-").pop();d='v[voice="'+p+'"]',n.has(d)||(d="v[voice="+p+"]")}switch(n.has(d)&&(p=s,d=n.get(d))&&(p.backgroundColor=oa(d.backgroundColor,p.backgroundColor),p.color=oa(d.color,p.color),p.fontFamily=oa(d.fontFamily,p.fontFamily),p.fontSize=oa(d.fontSize,p.fontSize),p.textShadow=oa(d.textShadow,p.textShadow),p.fontWeight=d.fontWeight,p.fontStyle=d.fontStyle,p.opacity=d.opacity,p.rubyTag=d.rubyTag,p.textCombineUpright=d.textCombineUpright,p.wrapLine=d.wrapLine),l){case"br":s=Jy(s.startTime,s.endTime),t.nestedCues.push(s);return;case"b":s.fontWeight=Cs;break;case"i":s.fontStyle=bs;break;case"u":s.textDecoration.push(kr);break;case"font":(l=e.attributes.color)&&(s.color=l);break;case"div":if(l=e.attributes.time,!l)break;(l=Ts(l))&&(s.startTime=l);break;case"ruby":case"rp":case"rt":s.rubyTag=l}}if(u=e.children,uf(e)||u.length==1&&uf(u[0]))for(n=an(e).split(`
`),e=!0,n=m(n),u=n.next();!u.done;u=n.next())u=u.value,e||(e=Jy(s.startTime,s.endTime),t.nestedCues.push(e)),0<u.length&&(e=s.clone(),e.payload=qn(u),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(s),t=m(u),e=t.next();!e.done;e=t.next())e1(e.value,s,n)}function oa(e,t){return e&&0<e.length?e:t}be("shaka.text.Cue",Bt),Bt.parseCuePayload=hf,Bt.equal=df,Bt.prototype.clone=Bt.prototype.clone;var pf="auto";Bt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:pf};var hr="center",Jh={LEFT:"left",RIGHT:"right",CENTER:hr,START:"start",END:"end"};Bt.textAlign=Jh;var sa="after",t1={BEFORE:"before",CENTER:"center",AFTER:sa};Bt.displayAlign=t1;var ua="ltr";Bt.direction={HORIZONTAL_LEFT_TO_RIGHT:ua,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var No="horizontal-tb";Bt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:No,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var aa=0;Bt.lineInterpretation={LINE_NUMBER:aa,PERCENTAGE:1};var Uo="start",Zh={CENTER:"center",START:Uo,END:"end"};Bt.lineAlign=Zh;var n1={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Bt.defaultTextColor=n1;var i1={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Bt.defaultTextBackgroundColor=i1;var r1=400,Cs=700;Bt.fontWeight={NORMAL:r1,BOLD:Cs};var ep="normal",bs="italic",o1={NORMAL:ep,ITALIC:bs,OBLIQUE:"oblique"};Bt.fontStyle=o1;var kr="underline";Bt.textDecoration={UNDERLINE:kr,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var H4=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Jr(){}Jr.prototype.destroy=function(){};function Ar(e,t,n){tp.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,wf:t})}function ks(e,t){for(var n=e.toLowerCase().split(";")[0],s=m([s1,ip,np,Zr]),u=s.next();!u.done;u=s.next())if(u=tp.get(n+"-"+u.value)){var l=u.wf(),d=l.isSupported(e,t);if(l.destroy(),d)return u.wf}return null}be("shaka.transmuxer.TransmuxerEngine",Jr),Jr.findTransmuxer=ks,Jr.unregisterTransmuxer=function(e,t){tp.delete(e.toLowerCase().split(";")[0]+"-"+t)},Jr.registerTransmuxer=Ar,Jr.prototype.destroy=Jr.prototype.destroy;var tp=new Map,Zr=1,np=2,ip=3,s1=4;Jr.PluginPriority={FALLBACK:Zr,PREFERRED_SECONDARY:np,PREFERRED:ip,APPLICATION:s1};function rp(){}function rn(e,t){var n=e;return t&&!to.includes(e)&&(n+='; codecs="'+t+'"'),n}function gf(e,t){return t&&(e+='; codecs="'+t+'"'),e}function op(e,t,n){var s=rn(e,t);return t=gf(e,t),ks(t)?(e=ks(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?s.replace("video","audio"):s,n}function mf(e){return e.split(";")[0].split("/")[1]}function Vn(e){var t=u1(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):case e==="ac3":case e==="ac-3":return"ac-3";case(e==="mp4a"&&t==="a6"):case e==="eac3":case e==="ec-3":return"ec-3";case e==="ac-4":return"ac-4";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="vp09":case e==="vp9":return"vp9";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function eo(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=u1(n.value),t.push(n[0]);return t.sort().join(",")}function yi(e){return e.split(";")[0]}function Mi(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function la(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function u1(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}be("shaka.util.MimeUtils",rp),rp.getFullTypeWithAllCodecs=gf,rp.getFullType=rn,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var to=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Er(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function kn(e,t){da.set(e,t)}function fa(e){return da.get(e)}function ca(e){return da.has(e)?!0:e=="application/cea-608"||e=="application/cea-708"?!!_o:!1}Er.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function G4(e,t,n,s,u){var l,d,p,g,v,T,b;return j(function(M){if(M.g==1)return D(M,Promise.resolve(),2);if(!e.i||!e.j)return M.return();if(n==null||s==null)return e.i.parseInit(Ze(t)),M.return();for(l=e.B?n:e.s,d={periodStart:e.s,segmentStart:n,segmentEnd:s,vttOffset:l},p=e.i.parseMedia(Ze(t),d,u,[]),g=m(p),v=g.next();!v.done;v=g.next())T=v.value,e.A(T,u||null,d);b=p.filter(function(_){return _.startTime>=e.l&&_.startTime<e.m}),e.j.append(b),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(s,e.m),ne(M)})}Er.prototype.remove=function(e,t){var n=this;return j(function(s){if(s.g==1)return D(s,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),ne(s)})};function X4(e,t,n){e.l=t,e.m=n}function a1(e,t,n){if(e.C=t,t=e.o.get(t))for(var s=m(t.keys()),u=s.next();!u.done;u=s.next())(u=t.get(u.value).filter(function(l){return l.endTime<=n}))&&e.j.append(u)}function l1(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var s=t.next();!s.done;s=t.next())l1(e,s.value,n)}function W4(e,t,n,s,u){var l=n+" "+s,d=new Map;t=m(t);for(var p=t.next();!p.done;p=t.next()){var g=p.value;p=g.stream,g=g.cue,d.has(p)||d.set(p,new Map),d.get(p).has(l)||d.get(p).set(l,[]),l1(e,g,u),g.startTime>=e.l&&g.startTime<e.m&&(d.get(p).get(l).push(g),p==e.C&&e.j.append([g]))}for(u=m(d.keys()),l=u.next();!l.done;l=u.next())for(l=l.value,e.o.has(l)||e.o.set(l,new Map),t=m(d.get(l).keys()),p=t.next();!p.done;p=t.next())p=p.value,g=d.get(l).get(p),e.o.get(l).set(p,g);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(s,e.m))}be("shaka.text.TextEngine",Er),Er.prototype.destroy=Er.prototype.destroy,Er.findParser=fa,Er.unregisterParser=function(e){da.delete(e)},Er.registerParser=kn;var da=new Map;function ha(e){this.h=e,this.g=null}ha.prototype.ia=function(e){var t=this;this.stop();var n=!0,s=null;return this.g=function(){f.clearTimeout(s),n=!1},s=f.setTimeout(function(){n&&t.h()},1e3*e),this},ha.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function ht(e){this.h=e,this.g=null}ht.prototype.Jb=function(){return this.stop(),this.h(),this},ht.prototype.ia=function(e){var t=this;return this.stop(),this.g=new ha(function(){t.h()}).ia(e),this},ht.prototype.Fa=function(e){var t=this;return this.stop(),this.g=new ha(function(){t.g.ia(e),t.h()}).ia(e),this},ht.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},be("shaka.util.Timer",ht),ht.prototype.stop=ht.prototype.stop,ht.prototype.tickEvery=ht.prototype.Fa,ht.prototype.tickAfter=ht.prototype.ia,ht.prototype.tickNow=ht.prototype.Jb;function K4(e,t){return e.concat(t)}function Y4(){}function no(e){return e!=null}function pa(e,t){return Promise.race([t,new Promise(function(n,s){new ht(s).ia(e)})])}function Xi(){}function As(e,t){return e=Tt(e),t=Tt(t),e.split("-")[0]==t.split("-")[0]}function ga(e,t){return e=Tt(e),t=Tt(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function sp(e,t){return e=Tt(e),t=Tt(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Tt(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=f1.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Bo(e,t){return e=Tt(e),t=Tt(t),t==e?4:ga(t,e)?3:sp(t,e)?2:ga(e,t)?1:0}function yf(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=f1.get(e)||e}function up(e){return e.language?Tt(e.language):e.audio&&e.audio.language?Tt(e.audio.language):e.video&&e.video.language?Tt(e.video.language):"und"}function vf(e,t){e=Tt(e);var n=new Set;t=m(t);for(var s=t.next();!s.done;s=t.next())n.add(Tt(s.value));for(t=m(n),s=t.next();!s.done;s=t.next())if(s=s.value,s==e)return s;for(t=m(n),s=t.next();!s.done;s=t.next())if(s=s.value,ga(s,e))return s;for(t=m(n),s=t.next();!s.done;s=t.next())if(s=s.value,sp(s,e))return s;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,ga(e,t))return t;return null}be("shaka.util.LanguageUtils",Xi),Xi.findClosestLocale=vf,Xi.getLocaleForVariant=up,Xi.getLocaleForText=function(e){return Tt(e.language||"und")},Xi.getBase=yf,Xi.relatedness=Bo,Xi.areSiblings=function(e,t){var n=yf(e),s=yf(t);return e!=n&&t!=s&&n==s},Xi.normalize=Tt,Xi.isSiblingOf=sp,Xi.isParentOf=ga,Xi.areLanguageCompatible=As,Xi.areLocaleCompatible=function(e,t){return e=Tt(e),t=Tt(t),e==t};var f1=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function c1(){}function d1(e,t,n,s,u){function l(U){var B=String(U.width||"")+String(U.height||"")+String(Math.round(U.frameRate||0))+(U.hdr||"")+U.fastSwitching;return U.dependencyStream&&(B+=U.dependencyStream.baseOriginalId||""),B}function d(U){var B=U.language+(U.channelsCount||0)+(U.audioSamplingRate||0)+U.roles.join(",")+U.label+U.groupId+U.fastSwitching;return U.dependencyStream&&(B+=U.dependencyStream.baseOriginalId||""),B}if(u.length){var p=e.textStreams;u=m(u);for(var g=u.next(),v={};!g.done;v={xh:void 0},g=u.next())if(v.xh=g.value,g=p.filter(function(U){return function(B){return!!(B.codecs.startsWith(U.xh)||B.mimeType.startsWith(U.xh))}}(v)),g.length){p=g;break}e.textStreams=p}if(p=e.variants,(t.length||n.length)&&(p=q4(p,t,n)),s.length){for(t=new ee,n=m(p),p=n.next();!p.done;p=n.next())p=p.value,t.push(String(p.video.width||0),p);var T=[];t.forEach(function(U,B){U=0;var $=[];B=m(B);for(var W=B.next(),J={};!W.done;J={Rf:void 0},W=B.next())J.Rf=W.value,W=s.filter(function(G){return function(X){return G.Rf.decodingInfos[0][X]}}(J)).length,W>U?(U=W,$=[J.Rf]):W==U&&$.push(J.Rf);T.push.apply(T,S($))}),p=T}for(n=new Set,t=new Set,p=m(p),u=p.next();!u.done;u=p.next())u=u.value,u.audio&&n.add(u.audio),u.video&&t.add(u.video);p=Array.from(n).sort(function(U,B){return U.bandwidth-B.bandwidth});var b=[];for(n=new Map,p=m(p),u=p.next();!u.done;u=p.next()){if(u=u.value,g=d(u),v=n.get(g)||[],v.length){var M=v[v.length-1],_=Vn(M.codecs),L=Vn(u.codecs);_!=L||u.bandwidth&&M.bandwidth&&!(u.bandwidth>M.bandwidth)||(v.push(u),b.push(u.id))}else v.push(u),b.push(u.id);n.set(g,v)}var O={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};p=Array.from(t).sort(function(U,B){if(!U.bandwidth||!B.bandwidth||U.bandwidth==B.bandwidth){if(U.codecs&&B.codecs&&U.codecs!=B.codecs&&U.width==B.width){var $=Vn(U.codecs),W=Vn(B.codecs);if($!=W)return(O[$]||1)-(O[W]||1)}return U.width-B.width}return U.bandwidth-B.bandwidth}),t=xs();var P=[];for(n=new Map,p=m(p),u=p.next();!u.done;u=p.next()){if(u=u.value,g=l(u),v=n.get(g)||[],v.length){if(M=v[v.length-1],!t&&(_=Vn(M.codecs),L=Vn(u.codecs),_!==L))continue;_=Vn(M.codecs),L=Vn(u.codecs),_!=L||u.bandwidth&&M.bandwidth&&!(u.bandwidth>M.bandwidth)||(v.push(u),P.push(u.id))}else v.push(u),P.push(u.id);n.set(g,v)}e.variants=e.variants.filter(function(U){var B=U.audio;return U=U.video,!(B&&!b.includes(B.id)||U&&!P.includes(U.id))})}function q4(e,t,n){t=m(t);for(var s=t.next(),u={};!s.done;u={videoCodec:void 0},s=t.next())if(u.videoCodec=s.value,s=e.filter(function(l){return function(d){return d.video&&d.video.codecs.startsWith(l.videoCodec)}}(u)),s.length){e=s;break}for(n=m(n),t=n.next(),s={};!t.done;s={audioCodec:void 0},t=n.next())if(s.audioCodec=t.value,t=e.filter(function(l){return function(d){return d.audio&&d.audio.codecs.startsWith(l.audioCodec)}}(s)),t.length){e=t;break}return e}function Q4(e,t,n){e.variants=e.variants.filter(function(s){return xf(s,t,n)})}function xf(e,t,n){function s(p,g,v){return p>=g&&p<=v}var u=e.video;if(u&&u.width&&u.height){var l=u.width,d=u.height;if(d>l&&(d=m([d,l]),l=d.next().value,d=d.next().value),!s(l,t.minWidth,Math.min(t.maxWidth,n.width))||!s(d,t.minHeight,Math.min(t.maxHeight,n.height))||!s(u.width*u.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!s(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!s(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!s(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function J4(e,t,n,s){return n=n===void 0?[]:n,s=s===void 0?{}:s,j(function(u){return u.g==1?D(u,h1(e,t,0<t.offlineSessionIds.length,n,s),2):(nb(t),D(u,ib(t),0))})}function h1(e,t,n,s,u){var l,d;return j(function(p){if(p.g==1)return Be().Pi()&&Z4(t.variants),D(p,ap(t.variants,n,!1,s),2);l=null,e&&(d=e.g)&&(l=d.keySystem),t.variants=t.variants.filter(function(g){var v=eb(g,l,u);if(!v){var T=[];g.audio&&T.push(w1(g.audio)),g.video&&T.push(w1(g.video))}return v}),ne(p)})}function Z4(e){var t=new Map().set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set;e=m(e);for(var s=e.next();!s.done;s=e.next())s=s.value,s.video&&n.add(s.video);for(n=m(n),e=n.next();!e.done;e=n.next()){e=e.value,s=m(t);for(var u=s.next();!u.done;u=s.next()){var l=m(u.value);if(u=l.next().value,l=l.next().value,e.codecs.includes(u)){e.codecs=e.codecs.replace(u,l);break}}}}function eb(e,t,n){if(!e.decodingInfos.some(function(g){return!(!g.supported||t&&(g=g.keySystemAccess)&&(n[g.keySystem]||g.keySystem)!=t)}))return!1;var s=Be(),u=s.Nb()==="Xbox";s=s.La()==="MOBILE"&&s.Da()==="GECKO";var l=e.video,d=l&&l.width||0,p=l&&l.height||0;return u&&l&&(1920<d||1080<p)&&(l.codecs.includes("avc1.")||l.codecs.includes("avc3."))||(u=l&&l.dependencyStream)&&!jy(u)?!1:(e=e.audio,!(s&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function p1(e,t){var n,s,u,l,d,p,g;return j(function(v){if(v.g==1){for(n=function(T,b){if(T){var M=Qr(T);return M.supported=T.supported&&b.supported,M.powerEfficient=T.powerEfficient&&b.powerEfficient,M.smooth=T.smooth&&b.smooth,b.keySystemAccess&&!M.keySystemAccess&&(M.keySystemAccess=b.keySystemAccess),M}return b},s=null,u=[],l=m(t),d=l.next(),p={};!d.done;p={cache:void 0,Ke:void 0},d=l.next())g=d.value,p.Ke=sf(g),p.cache=bf,p.cache.has(p.Ke)?s=n(s,p.cache.get(p.Ke)):u.push(tb(g).then(function(T){return function(b){var M=null;b=m(b||[]);for(var _=b.next();!_.done;_=b.next())M=n(M,_.value);M&&(T.cache.set(T.Ke,M),s=n(s,M))}}(p)));return D(v,Promise.all(u),2)}s&&e.decodingInfos.push(s),ne(v)})}function tb(e){var t=[""];e.video&&(t=Mi(e.video.contentType).split(","));var n=[""];e.audio&&(n=Mi(e.audio.contentType).split(","));var s=[];t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;for(var l=m(n),d=l.next(),p={};!d.done;p={Mc:void 0},d=l.next())d=d.value,p.Mc=Hi(e),e.video&&(p.Mc.video.contentType=rn(yi(p.Mc.video.contentType),u)),e.audio&&(p.Mc.audio.contentType=rn(yi(p.Mc.audio.contentType),d)),s.push(new Promise(function(g){return function(v,T){(Be().La()=="MOBILE"?pa(5,navigator.mediaCapabilities.decodingInfo(g.Mc)):navigator.mediaCapabilities.decodingInfo(g.Mc)).then(function(b){v(b)}).catch(T)}}(p)))}return Promise.all(s).catch(function(){return JSON.stringify(e),null})}function ap(e,t,n,s){var u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J;return j(function(G){switch(G.g){case 1:if(e.some(function(X){return X.decodingInfos.length}))return G.return();u=m(s),l=u.next(),d={};case 2:if(l.done){G.u(4);break}d.ui=l.value,p=!1,g=m(e),v=g.next();case 5:if(v.done){G.u(7);break}T=v.value,b=g1(T,t,n).filter(function(X){return function(Y){return Y=Y[0],(Y.keySystemConfiguration&&Y.keySystemConfiguration.keySystem)===X.ui}}(d)),M=m(b),_=M.next();case 8:if(_.done){G.u(10);break}return L=_.value,D(G,p1(T,L),9);case 9:_=M.next(),G.u(8);break;case 10:T.decodingInfos.some(function(X){return X.supported})&&(p=!0),v=g.next(),G.u(5);break;case 7:if(p)return G.return();d={ui:void 0},l=u.next(),G.u(2);break;case 4:O=m(e),P=O.next();case 12:if(P.done){G.u(0);break}U=P.value,B=g1(U,t,n).filter(function(X){return X=X[0],X=X.keySystemConfiguration&&X.keySystemConfiguration.keySystem,!X||!s.includes(X)}),$=m(B),W=$.next();case 15:if(W.done){P=O.next(),G.u(12);break}return J=W.value,D(G,p1(U,J),16);case 16:W=$.next(),G.u(15)}})}function g1(e,t,n){var s=e.audio,u=e.video,l=[],d=[];if(u)for(var p=m(u.fullMimeTypes),g=p.next();!g.done;g=p.next()){g=g.value;var v=Mi(g);if(v.includes(",")&&!s){var T=v.split(","),b=yi(g);v=vs("video",T),T=vs("audio",T),T=wf(T,b),b=op(b,T,"audio"),d.push({contentType:b,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(v=m1(v),g={contentType:op(yi(g),v,"video"),width:u.width||64,height:u.height||64,bitrate:u.bandwidth||e.bandwidth||1,framerate:u.frameRate||30},u.hdr)switch(u.hdr){case"PQ":g.transferFunction="pq";break;case"HLG":g.transferFunction="hlg"}u.colorGamut&&(g.colorGamut=u.colorGamut),l.push(g)}if(s)for(p=m(s.fullMimeTypes),g=p.next();!g.done;g=p.next())v=g.value,g=yi(v),v=wf(Mi(v),g),g=op(g,v,"audio"),d.push({contentType:g,channels:s.channelsCount||2,bitrate:s.bandwidth||e.bandwidth||1,samplerate:s.audioSamplingRate||1,spatialRendering:s.spatialAudio});for(p=[],l.length==0&&l.push(null),d.length==0&&d.push(null),l=m(l),g=l.next();!g.done;g=l.next())for(g=g.value,v=m(d),b=v.next();!b.done;b=v.next())b=b.value,T={type:n?"file":"media-source"},g&&(T.video=g),b&&(T.audio=b),p.push(T);if(d=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!d.length)return[p];for(e=[],n=new Map,d=m(d),l=d.next();!l.done;l=d.next())l=l.value,n.get(l.keySystem)||n.set(l.keySystem,[]),n.get(l.keySystem).push(l);for(d=t?"required":"optional",t=t?["persistent-license"]:["temporary"],l=m(n.keys()),g=l.next();!g.done;g=l.next()){for(g=g.value,b=n.get(g),v=new Map,b=m(b),T=b.next();!T.done;T=b.next()){T=T.value;var M=T.videoRobustness+","+T.audioRobustness;v.get(M)||v.set(M,[]),v.get(M).push(T)}for(v=m(v.values()),b=v.next();!b.done;b=v.next()){b=b.value,T=[],M=m(p);for(var _=M.next();!_.done;_=M.next()){_=Object.assign({},_.value);for(var L={keySystem:g,initDataType:"cenc",persistentState:d,distinctiveIdentifier:"optional",sessionTypes:t},O=m(b),P=O.next();!P.done;P=O.next()){if(P=P.value,P.initData&&P.initData.length){for(var U=new Set,B=m(P.initData),$=B.next();!$.done;$=B.next())U.add($.value.initDataType);L.initDataType=P.initData[0].initDataType}P.distinctiveIdentifierRequired&&(L.distinctiveIdentifier="required"),P.persistentStateRequired&&(L.persistentState="required"),P.sessionType&&(L.sessionTypes=[P.sessionType]),s&&(L.audio?(P.encryptionScheme&&(L.audio.encryptionScheme=L.audio.encryptionScheme||P.encryptionScheme),L.audio.robustness=L.audio.robustness||P.audioRobustness):(L.audio={robustness:P.audioRobustness},P.encryptionScheme&&(L.audio.encryptionScheme=P.encryptionScheme)),L.audio.robustness==""&&delete L.audio.robustness),u&&(L.video?(P.encryptionScheme&&(L.video.encryptionScheme=L.video.encryptionScheme||P.encryptionScheme),L.video.robustness=L.video.robustness||P.videoRobustness):(L.video={robustness:P.videoRobustness},P.encryptionScheme&&(L.video.encryptionScheme=P.encryptionScheme)),L.video.robustness==""&&delete L.video.robustness)}_.keySystemConfiguration=L,T.push(_)}e.push(T)}}return e}function wf(e,t){var n=Be();return e.toLowerCase()=="flac"?n.Da()!="WEBKIT"?"flac":"fLaC":e.toLowerCase()==="opus"?n.Da()!="WEBKIT"?"opus":mf(t)=="mp4"?"Opus":"opus":e.toLowerCase()=="ac-3"&&n.ee()?"ec-3":e}function m1(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function nb(e){e.textStreams=e.textStreams.filter(function(t){return t=rn(t.mimeType,t.codecs),ca(t)})}function ib(e){var t,n,s,u,l,d,p;return j(function(g){switch(g.g){case 1:t=[],n=m(e.imageStreams),s=n.next();case 2:if(s.done){g.u(4);break}if(u=s.value,l=u.mimeType,l=="application/mp4"&&u.codecs=="mjpg"&&(l="image/jpg"),kf.has(l)){g.u(5);break}if(d=sb.get(l),!d){kf.set(l,!1),g.u(5);break}return D(g,rb(d),7);case 7:p=g.h,kf.set(l,p);case 5:kf.get(l)&&t.push(u),s=n.next(),g.u(2);break;case 4:e.imageStreams=t,ne(g)}})}function rb(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Fo(e){var t=e.audio,n=e.video,s=t?t.mimeType:null,u=n?n.mimeType:null,l=t?t.codecs:null,d=n?n.codecs:null,p=t?t.groupId:null,g=[];n&&g.push(n.mimeType),t&&g.push(t.mimeType),g=g[0]||null;var v=[];t&&v.push(t.kind),n&&v.push(n.kind),v=v[0]||null;var T=new Set;if(t)for(var b=m(t.roles),M=b.next();!M.done;M=b.next())T.add(M.value);if(n)for(b=m(n.roles),M=b.next();!M.done;M=b.next())T.add(M.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:v,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:g,audioMimeType:s,videoMimeType:u,codecs:"",audioCodec:l,videoCodec:d,primary:e.primary,roles:Array.from(T),audioRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:p,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,(s=n.dependencyStream)&&(e.width=s.width||e.width,e.height=s.height||e.height,e.videoCodec=s.codecs||e.videoCodec),d.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=u,n=d.split(",");try{e.videoCodec=vs("video",n),e.audioCodec=vs("audio",n)}catch{}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,t=t.dependencyStream)&&(e.audioCodec=t.codecs||e.audioCodec),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function jo(e){return{id:e.id,active:!1,type:ct,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function lp(e){var t=e.width||null,n=e.height||null,s=null;e.segmentIndex&&(s=ir(e.segmentIndex));var u=e.tilesLayout;return s&&(u=s.tilesLayout||u),u&&t!=null&&(t/=Number(u.split("x")[0])),u&&n!=null&&(n/=Number(u.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:u||null,originalImageId:e.originalId}}function Sf(e){return e.__shaka_id||(e.__shaka_id=ob++),e.__shaka_id}function y1(e){var t={id:Sf(e),active:e.mode!="disabled",type:ct,bandwidth:0,language:Tt(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:e.kind=="forced",originalTextId:e.id,originalLanguage:e.language};return e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function Tf(e,t){var n=e?e.language:null;if(n={id:Sf(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:Tt(n||"und"),label:e?e.label:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:e?e.kind=="main":!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+(","+n.videoCodec):n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function ma(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Cf(e){return e.filter(function(t){return ma(t)})}function Es(e,t,n,s){var u=e,l=e.filter(function(g){return g.primary});l.length&&(u=l);var d=u.length?u[0].language:"";if(u=u.filter(function(g){return g.language==d}),t){var p=vf(Tt(t),e.map(function(g){return g.language}));p&&(u=e.filter(function(g){return Tt(g.language)==p}))}if(u=u.filter(function(g){return g.forced==s}),n){if(e=v1(u,n),e.length)return e}else if(e=u.filter(function(g){return g.roles.length==0}),e.length)return e;return e=u.map(function(g){return g.roles}).reduce(K4,[]),e.length?v1(u,e[0]):u}function v1(e,t){return e.filter(function(n){return n.roles.includes(t)})}function x1(e,t){t.length&&(t=t.filter(function(n){return Vn(e.codecs)==Vn(n.codecs)}).sort(function(n,s){return n.bandwidth&&s.bandwidth&&n.bandwidth!=s.bandwidth?n.bandwidth-s.bandwidth:(n.width||0)-(s.width||0)}),e.trickModeVideo=t[0],1<t.length&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function w1(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function S1(e,t,n){if(n.autoShowText==0)return!1;if(n.autoShowText==1)return!0;var s=Tt(n.preferredTextLanguage);return t=Tt(t.language),n.autoShowText==2?As(t,s):n.autoShowText==3?e?(e=Tt(e.language),As(t,s)&&!As(e,t)):!1:(ft("Invalid autoShowText setting!"),!1)}function T1(e){var t={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]};e=m(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var s={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n?yi(n):"",codecs:n?Mi(n):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"video",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};s.fullMimeTypes.add(rn(s.mimeType,s.codecs)),n.startsWith("audio/")?(s.type="audio",t.audio=s):t.video=s}return t}be("shaka.util.StreamUtils",c1),c1.meetsRestrictions=xf;var bf=new Map,ob=0,kf=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),sb=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function qt(){var e=this;this.G=null,this.o=!1,this.m=new ri,this.j=new Ee,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.m=new ri,e.g&&e.m.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.F=[],this.H=1,this.I=!1,this.h=this.l=this.g=this.s=null,this.A=new ht(function(){if(e.o&&(e.g.restrictToElementSize||e.g.restrictToScreenSize)){var t=e.chooseVariant();t&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.B=f,"documentPictureInPicture"in f&&this.j.D(f.documentPictureInPicture,"enter",function(){e.B=f.documentPictureInPicture.window,e.A&&e.A.Jb(),e.j.Aa(e.B,"pagehide",function(){e.B=f,e.A&&e.A.Jb()})}),this.C=this.i=null}y=qt.prototype,y.stop=function(){this.G=null,this.o=!1,this.F=[],this.H=1,this.l=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.A.stop(),this.C=this.i=null},y.release=function(){this.j.release(),this.A=null},y.init=function(e){this.G=e},y.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:this.B.devicePixelRatio;e=this.B.screen.height*n,t=this.B.screen.width*n}if(this.h&&this.g.restrictToElementSize){n=this.g.ignoreDevicePixelRatio?1:this.B.devicePixelRatio;var s=this.l.clientHeight,u=this.l.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.l&&(s=this.i.height,u=this.i.width),e=Math.min(e,s*n),t=Math.min(t,u*n)}if(n=this.F.filter(function(v){return v&&!(v.audio&&v.audio.fastSwitching||v.video&&v.video.fastSwitching)}),n.length||(n=this.F),s=n,n.length!=this.F.length&&(s=this.F.filter(function(v){return v&&!!(v.audio&&v.audio.fastSwitching||v.video&&v.video.fastSwitching)})),n=fp(this,this.g.restrictions,s,1/0,1/0),e!=1/0||t!=1/0){for(n=ub(n),n=m(n),u=n.next();!u.done;u=n.next())if(u=u.value,u.height>=e&&u.width>=t){e=u.height,t=u.width;break}n=fp(this,this.g.restrictions,s,e,t)}for(e=this.getBandwidthEstimate(),s.length&&!n.length&&(n=fp(this,null,s,1/0,1/0),n=[n[0]]),t=n[0]||null,s=0;s<n.length;s++){u=n[s];for(var l=isNaN(this.H)?1:Math.abs(this.H),d=l*u.bandwidth/this.g.bandwidthDowngradeTarget,p={bandwidth:1/0},g=s+1;g<n.length;g++)if(u.bandwidth!=n[g].bandwidth){p=n[g];break}l=l*p.bandwidth/this.g.bandwidthUpgradeTarget,e>=d&&e<=l&&(t.bandwidth!=u.bandwidth||t.bandwidth==u.bandwidth&&t.video&&u.video&&(t.video.width<u.video.width||t.video.height<u.video.height))&&(t=u)}return this.s=Date.now(),t},y.enable=function(){this.o=!0},y.disable=function(){this.o=!1},y.segmentDownloaded=function(e,t,n,s){var u=e;this.g.removeLatencyFromFirstPacketTime&&s&&s.packetNumber===1&&s.timeToFirstByte&&(u=e-s.timeToFirstByte),u>=this.g.cacheLoadThreshold&&this.m.sample(u,t),n&&this.s!=null&&this.o&&C1(this)},y.trySuggestStreams=function(){this.s!=null&&this.o&&C1(this)},y.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.m.getBandwidthEstimate(e),this.C?this.C.getBandwidthEstimate(e):e)},y.setVariants=function(e){this.F=e},y.playbackRateChanged=function(e){this.H=e},y.setMediaElement=function(e){function t(){n.A.ia(ab)}var n=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in f&&(this.h=new ResizeObserver(t),this.h.observe(this.l)),this.j.D(e,"enterpictureinpicture",function(s){s.pictureInPictureWindow&&(n.i=s.pictureInPictureWindow,n.j.D(n.i,"resize",t))}),this.j.D(e,"leavepictureinpicture",function(){n.i&&n.j.Ja(n.i,"resize",t),n.i=null})},y.setCmsdManager=function(e){this.C=e},y.configure=function(e){this.g=e,this.m&&this.g&&this.m.configure(this.g.advanced)};function C1(e){if(!e.I){var t=e.m;if(!(t.g>=t.i))return;e.I=!0,e.s-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.s<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function fp(e,t,n,s,u){if(e.C){var l=e.C.Yh();l&&(n=n.filter(function(d){return d.bandwidth&&l?d.bandwidth<=l:!0}))}return t&&(n=n.filter(function(d){return xf(d,t,{width:u,height:s})})),n.sort(function(d,p){return d.bandwidth-p.bandwidth})}function ub(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(s,u){return s.width-u.width})}be("shaka.abr.SimpleAbrManager",qt),qt.prototype.configure=qt.prototype.configure,qt.prototype.setCmsdManager=qt.prototype.setCmsdManager,qt.prototype.setMediaElement=qt.prototype.setMediaElement,qt.prototype.playbackRateChanged=qt.prototype.playbackRateChanged,qt.prototype.setVariants=qt.prototype.setVariants,qt.prototype.getBandwidthEstimate=qt.prototype.getBandwidthEstimate,qt.prototype.trySuggestStreams=qt.prototype.trySuggestStreams,qt.prototype.segmentDownloaded=qt.prototype.segmentDownloaded,qt.prototype.disable=qt.prototype.disable,qt.prototype.enable=qt.prototype.enable,qt.prototype.chooseVariant=qt.prototype.chooseVariant,qt.prototype.init=qt.prototype.init,qt.prototype.release=qt.prototype.release,qt.prototype.stop=qt.prototype.stop;var ab=1;be("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});function b1(e,t){if(e===t||!e.length||!t.length)return!0;e=m(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,Ef(n))return!0;for(var s=m(t),u=s.next();!u.done;u=s.next())if(u=u.value,n.keySystem===u.keySystem||Ef(u))return!0}return!1}function k1(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var s=e.next();!s.done;s=e.next()){s=s.value;for(var u=m(t),l=u.next();!l.done;l=u.next())if(l=l.value,s.keySystem==l.keySystem){u=new Map;for(var d=m((s.initData||[]).concat(l.initData||[])),p=d.next();!p.done;p=d.next())p=p.value,u.set(p.keyId,p);u=Array.from(u.values()),d=s.keyIds&&l.keyIds?new Set([].concat(S(s.keyIds),S(l.keyIds))):s.keyIds||l.keyIds,n.push({keySystem:s.keySystem,licenseServerUri:s.licenseServerUri||l.licenseServerUri,distinctiveIdentifierRequired:s.distinctiveIdentifierRequired||l.distinctiveIdentifierRequired,persistentStateRequired:s.persistentStateRequired||l.persistentStateRequired,videoRobustness:s.videoRobustness||l.videoRobustness,audioRobustness:s.audioRobustness||l.audioRobustness,serverCertificate:s.serverCertificate||l.serverCertificate,serverCertificateUri:s.serverCertificateUri||l.serverCertificateUri,initData:u,keyIds:d});break}else Ef(s)?n.push(s):Ef(l)&&n.push(l)}return n}function cp(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function Af(e){return e?!!e.match(/^com\.apple\.fps/):!1}function Ef(e){return(e=e.licenseServerUri)?e.startsWith("data:application/json;base64,"):!1}var If=new je(function(){return Ei(new Uint8Array([0]))}),Is=new Map;function A1(e,t){var n=nr();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function E1(e){var t,n;return j(function(s){if(s.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new q(2,7,1010);return t=e.g,e.g++,t==0?s.return():(n=e.h*(1+(2*Math.random()-1)*e.o),D(s,new Promise(function(u){new ht(u).ia(n/1e3)}),2))}e.h*=e.m,ne(s)})}function nr(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function _t(){var e,t,n=new Promise(function(s,u){e=s,t=u});return n.resolve=e,n.reject=t,n}_t.prototype.resolve=function(){},_t.prototype.reject=function(){};function nn(e,t){this.promise=e,this.i=t,this.g=null}function $o(e){return new nn(Promise.reject(e),function(){return Promise.resolve()})}function dp(){var e=Promise.reject(new q(2,7,7001));return e.catch(function(){}),new nn(e,function(){return Promise.resolve()})}function Ms(e){return new nn(Promise.resolve(e),function(){return Promise.resolve()})}function I1(e){return new nn(e,function(){return e.catch(function(){})})}nn.prototype.abort=function(){return this.g||(this.g=this.i()),this.g};function M1(e){return new nn(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}nn.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},nn.prototype.Va=function(e,t){function n(p){return function(g){if(u.g&&p)l.reject(d);else{var v=p?e:t;v?s=lb(v,g,l):(p?l.resolve:l.reject)(g)}}}function s(){return l.reject(d),u.abort()}var u=this,l=new _t;l.catch(function(){});var d=new q(2,7,7001);return this.promise.then(n(!0),n(!1)),new nn(l,function(){return s()})};function lb(e,t,n){try{var s=e(t);return s&&s.promise&&s.abort?(n.resolve(s.promise),function(){return s.abort()}):(n.resolve(s),function(){return Promise.resolve(s).then(function(){},function(){})})}catch(u){return n.reject(u),function(){return Promise.resolve()}}}R.Object.defineProperties(nn.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g!==null}}}),be("shaka.util.AbortableOperation",nn),nn.prototype.chain=nn.prototype.Va,nn.prototype.finally=nn.prototype.finally,nn.all=M1,nn.prototype.abort=nn.prototype.abort,nn.notAbortable=I1,nn.completed=Ms,nn.aborted=dp,nn.failed=$o;function Ie(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),s=n.next();!s.done;s=n.next())s=s.value,Object.defineProperty(this,s,{value:t.get(s),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=f.performance&&f.performance.now?f.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function R1(e){var t=new Ie(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}Ie.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Ie.prototype.stopImmediatePropagation=function(){this.g=!0},Ie.prototype.stopPropagation=function(){},be("shaka.util.FakeEvent",Ie);var Mf={jl:"abrstatuschanged",kl:"adaptation",ll:"audiotrackchanged",ol:"audiotrackschanged",ql:"boundarycrossed",rl:"buffering",ul:"canupdatestarttime",vl:"complete",wl:"currentitemchanged",xl:"downloadcompleted",yl:"downloadfailed",zl:"downloadheadersreceived",Al:"drmsessionupdate",Cl:"emsg",Il:"itemsinserted",Jl:"itemsremoved",Zl:"prft",Error:"error",Dl:"expirationupdated",El:"firstquartile",Fl:"gapjumped",Kl:"keystatuschanged",Ol:"loaded",Pl:"loading",Rl:"manifestparsed",Sl:"manifestupdated",Tl:"mediaqualitychanged",Ul:"mediasourcerecovered",Vl:"metadataadded",Metadata:"metadata",Wl:"midpoint",Xl:"nospatialvideoinfo",Yl:"onstatechange",$l:"ratechange",cm:"segmentappended",dm:"sessiondata",em:"spatialvideoinfo",fm:"stalldetected",gm:"started",hm:"statechanged",im:"streaming",jm:"textchanged",lm:"texttrackvisibility",mm:"thirdquartile",nm:"timelineregionadded",om:"timelineregionenter",pm:"timelineregionexit",qm:"trackschanged",sm:"unloading",um:"variantchanged"};function Ct(){this.Ya=new ee,this.ze=this}Ct.prototype.addEventListener=function(e,t){this.Ya&&this.Ya.push(e,t)},Ct.prototype.removeEventListener=function(e,t){this.Ya&&this.Ya.remove(e,t)},Ct.prototype.dispatchEvent=function(e){if(!this.Ya)return!0;var t=this.Ya.get(e.type)||[],n=this.Ya.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.ze,e.currentTarget=this.ze;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Ct.prototype.release=function(){this.Ya=null};function Rs(){this.g=[]}function zo(e,t){e.g.push(t.finally(function(){Vi(e.g,t)}))}Rs.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function $t(e,t,n,s,u,l,d){Ct.call(this),this.i=null,this.j=!1,this.s=new Rs,this.g=new Set,this.h=new Set,this.o=e||null,this.m=t||null,this.A=n||null,this.B=s||null,this.C=u||null,this.G=l||null,this.F=d||null,this.l=new Map}ue($t,Ct),y=$t.prototype,y.configure=function(e){this.i=e};function Ir(e,t,n,s){s=s===void 0?!1:s,n=n||O1;var u=_f.get(e);(!u||n>=u.priority)&&_f.set(e,{priority:n,wf:t,Ak:s})}function _1(e,t){for(var n=m(e.g),s=n.next();!s.done;s=n.next())t.g.add(s.value);for(e=m(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}y.Dk=function(e){this.g.add(e)},y.Zk=function(e){this.g.delete(e)},y.kj=function(){this.g.clear()},y.Ek=function(e){this.h.add(e)},y.$k=function(e){this.h.delete(e)},y.lj=function(){this.h.clear()},y.Mh=function(){this.l.clear()};function fn(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}y.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),Ct.prototype.release.call(this),this.s.destroy()},y.request=function(e,t,n){var s=this,u=new P1;if(this.j){var l=Promise.reject(new q(2,7,7001));return l.catch(function(){}),new Rf(l,function(){return Promise.resolve()},u)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Hi(t.retryParameters):nr(),t.uris=Hi(t.uris),l=fb(this,e,t,n);var d=l.Va(function(){return L1(s,e,t,n,new A1(t.retryParameters,!1),0,null,u)}),p=d.Va(function(M){return cb(s,e,M,n)}),g=Date.now(),v=0;l.promise.then(function(){v=Date.now()-g},function(){});var T=0;d.promise.then(function(){T=Date.now()},function(){});var b=p.Va(function(M){var _=Date.now()-T,L=M.response;return L.timeMs+=v,L.timeMs+=_,M.$j||!s.o||L.fromCache||t.method=="HEAD"||e!=Wi||s.o(L.timeMs,L.data.byteLength,D1(n),t,n),s.F&&s.F(e,L,n),L},function(M){throw M&&(M.severity=2),M});return l=new Rf(b.promise,function(){return b.abort()},u),zo(this.s,l),l};function fb(e,t,n,s){function u(p){l=l.Va(function(){return n.body&&(n.body=Ei(n.body)),p(t,n,s)})}var l=Ms(void 0);e.C&&u(e.C),e=m(e.g);for(var d=e.next();!d.done;d=e.next())u(d.value);return l.Va(void 0,function(p){throw p instanceof q&&p.code==7001?p:new q(2,1,1006,p)})}function L1(e,t,n,s,u,l,d,p){e.i.forceHTTP&&(n.uris[l]=n.uris[l].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[l]=n.uris[l].replace("http://","https://")),0<l&&e.G&&e.G(t,s,n.uris[l],n.uris[l-1]);var g=new en(n.uris[l]),v=g.cc,T=!1;v||(v=location.protocol,v=v.slice(0,-1),ef(g,v),n.uris[l]=g.toString()),v=v.toLowerCase();var b=(v=_f.get(v))?v.wf:null;if(!b)return $o(new q(2,1,1e3,g));var M=v.Ak;(g=e.l.get(g.Cb))&&(n.headers["common-access-token"]=g);var _=null,L=null,O=!1,P=!1,U;return I1(E1(u)).Va(function(){if(e.j)return dp();U=Date.now();var B=0;n.requestStartTime=Date.now();var $=b(n.uris[l],n,t,function(G,X,Y){_&&_.stop(),L&&L.ia(J/1e3),e.o&&t==Wi&&(B++,n.packetNumber=B,e.o(G,X,D1(s),n,s),T=!0,p.g=Y)},function(G){P=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(G,n,t)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!M)return $;var W=n.retryParameters.connectionTimeout;W&&(_=new ht(function(){O=!0,$.abort()}),_.ia(W/1e3));var J=n.retryParameters.stallTimeout;return J&&(L=new ht(function(){O=!0,$.abort()})),$}).Va(function(B){_&&_.stop(),L&&L.stop(),B.timeMs==null&&(B.timeMs=Date.now()-U);var $=B.headers["common-access-token"];if($){var W=new en(B.uri);e.l.set(W.Cb,$)}return $={response:B,$j:T},!P&&e.m&&e.m(B.headers,n,t),e.A&&e.A(n,B),$},function(B){if(_&&_.stop(),L&&L.stop(),e.B){var $=null,W=0;B instanceof q&&($=B,B.code==1001&&(W=B.data[1])),e.B(n,$,W,O)}if(e.j)return dp();if(O&&(B=new q(1,1,1003,n.uris[l],t)),B instanceof q){if(B.code==7001)throw B;if(B.code==1010)throw d;if(B.severity==1){if($=new Map().set("error",B),$=new Ie("retry",$),$.cancelable=!0,e.dispatchEvent($),$.defaultPrevented)throw B;return l=(l+1)%n.uris.length,L1(e,t,n,s,u,l,B,p)}}throw B})}function cb(e,t,n,s){var u=Ms(void 0);e=m(e.h);for(var l=e.next(),d={};!l.done;d={Di:void 0},l=e.next())d.Di=l.value,u=u.Va(function(p){return function(){var g=n.response;return g.data&&(g.data=Ei(g.data)),(0,p.Di)(t,g,s)}}(d));return u.Va(function(){return n},function(p){var g=2;if(p instanceof q){if(p.code==7001)throw p;g=p.severity}throw new q(g,1,1007,p)})}function D1(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.o)return!1}return!0}be("shaka.net.NetworkingEngine",$t),$t.prototype.request=$t.prototype.request,$t.prototype.destroy=$t.prototype.destroy,$t.makeRequest=fn,$t.defaultRetryParameters=function(){return nr()},$t.prototype.clearCommonAccessTokenMap=$t.prototype.Mh,$t.prototype.clearAllResponseFilters=$t.prototype.lj,$t.prototype.unregisterResponseFilter=$t.prototype.$k,$t.prototype.registerResponseFilter=$t.prototype.Ek,$t.prototype.clearAllRequestFilters=$t.prototype.kj,$t.prototype.unregisterRequestFilter=$t.prototype.Zk,$t.prototype.registerRequestFilter=$t.prototype.Dk,$t.unregisterScheme=function(e){_f.delete(e)},$t.registerScheme=Ir,$t.prototype.configure=$t.prototype.configure;function P1(){this.g=0}$t.NumBytesRemainingClass=P1;function Rf(e,t,n){nn.call(this,e,t),this.h=n}ue(Rf,nn),$t.PendingRequest=Rf;var Wi=1;$t.RequestType={MANIFEST:0,SEGMENT:Wi,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},$t.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var O1=3;$t.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:O1};var _f=new Map;function _s(e){this.g=!1,this.h=new _t,this.i=e}_s.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Nt(e,t){if(e.g)throw t instanceof q&&t.code==7003?t:new q(2,7,7003,t)}function hp(e,t){var n=[];e=m(e);for(var s=e.next();!s.done;s=e.next())n.push(t(s.value));return n}function db(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Ls(e){for(var t=new Map,n=m(Object.keys(e)),s=n.next();!s.done;s=n.next())s=s.value,t.set(s,e[s]);return t}function pp(e){var t={};return e.forEach(function(n,s){t[s]=n}),t}function Ft(e,t){this.h=Yn(e),this.i=t==N1,this.g=0}y=Ft.prototype,y.Ga=function(){return this.g<this.h.byteLength},y.Ma=function(){return this.g},y.getLength=function(){return this.h.byteLength},y.X=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw Mr()}},y.Ba=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw Mr()}},y.T=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw Mr()}},y.Yg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw Mr()}},y.yd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw Mr()}if(2097151<t)throw new q(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},y.Tb=function(e){if(this.g+e>this.h.byteLength)throw Mr();var t=Ze(this.h,this.g,e);return this.g+=e,t},y.skip=function(e){if(this.g+e>this.h.byteLength)throw Mr();this.g+=e},y.Ei=function(e){if(this.g<e)throw Mr();this.g-=e},y.seek=function(e){if(0>e||e>this.h.byteLength)throw Mr();this.g=e},y.Vc=function(){for(var e=this.g;this.Ga()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Ze(this.h,e,this.g-e),this.g+=1,Ht(e)};function Mr(){return new q(2,3,3e3)}be("shaka.util.DataViewReader",Ft),Ft.prototype.readTerminatedString=Ft.prototype.Vc,Ft.prototype.seek=Ft.prototype.seek,Ft.prototype.rewind=Ft.prototype.Ei,Ft.prototype.skip=Ft.prototype.skip,Ft.prototype.readBytes=Ft.prototype.Tb,Ft.prototype.readUint64=Ft.prototype.yd,Ft.prototype.readInt32=Ft.prototype.Yg,Ft.prototype.readUint32=Ft.prototype.T,Ft.prototype.readUint16=Ft.prototype.Ba,Ft.prototype.readUint8=Ft.prototype.X,Ft.prototype.getLength=Ft.prototype.getLength,Ft.prototype.getPosition=Ft.prototype.Ma,Ft.prototype.hasMoreData=Ft.prototype.Ga;var N1=1;Ft.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:N1};function Lt(){this.i=new Map,this.h=new Map,this.g=!1}y=Lt.prototype,y.box=function(e,t){return e=U1(e),this.i.set(e,hb),this.h.set(e,t),this},y.R=function(e,t){return e=U1(e),this.i.set(e,B1),this.h.set(e,t),this},y.stop=function(){this.g=!0},y.parse=function(e,t,n){for(e=new Ft(e,0),this.g=!1;e.Ga()&&!this.g;)this.td(0,e,t,n)},y.td=function(e,t,n,s){var u=t.Ma();if(s&&u+8>t.getLength())this.g=!0;else{var l=t.T(),d=t.T(),p=Df(d),g=!1;switch(l){case 0:l=t.getLength()-u;break;case 1:if(s&&t.Ma()+8>t.getLength()){this.g=!0;return}l=t.yd(),g=!0}var v=this.h.get(d);if(v){var T=null,b=null;if(this.i.get(d)==B1){if(s&&t.Ma()+4>t.getLength()){this.g=!0;return}b=t.T(),T=b>>>24,b&=16777215}d=u+l,n&&d>t.getLength()&&(d=t.getLength()),s&&d>t.getLength()?this.g=!0:(d-=t.Ma(),t=0<d?t.Tb(d):new Uint8Array(0),t=new Ft(t,0),v({name:p,parser:this,partialOkay:n||!1,stopOnPartial:s||!1,version:T,flags:b,reader:t,size:l,start:u+e,has64BitSize:g}))}else t.skip(Math.min(u+l-t.Ma(),t.getLength()-t.Ma()))}};function ot(e){for(var t=io(e);e.reader.Ga()&&!e.parser.g;)e.parser.td(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function Rr(e){for(var t=io(e),n=e.reader.T(),s=0;s<n&&(e.parser.td(e.start+t,e.reader,e.partialOkay,e.stopOnPartial),!e.parser.g);s++);}function ui(e){var t=io(e);for(e.reader.skip(78);e.reader.Ga()&&!e.parser.g;)e.parser.td(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function Lf(e){var t=io(e);e.reader.skip(8);var n=e.reader.Ba();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.Ga()&&!e.parser.g;)e.parser.td(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function Ds(e){return function(t){e(t.reader.Tb(t.reader.getLength()-t.reader.Ma()))}}function U1(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Df(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function io(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}be("shaka.util.Mp4Parser",Lt),Lt.headerSize=io,Lt.typeToString=Df,Lt.allData=Ds,Lt.audioSampleEntry=Lf,Lt.visualSampleEntry=ui,Lt.sampleDescription=Rr,Lt.children=ot,Lt.prototype.parseNext=Lt.prototype.td,Lt.prototype.parse=Lt.prototype.parse,Lt.prototype.stop=Lt.prototype.stop,Lt.prototype.fullBox=Lt.prototype.R,Lt.prototype.box=Lt.prototype.box;var hb=0,B1=1;function gp(e){var t=this;this.g=[],this.h=[],this.data=[],new Lt().box("moov",ot).box("moof",ot).R("pssh",function(n){if(!(1<n.version)){var s=Ze(n.reader.h,-12,n.size);if(t.data.push(s),t.g.push(Sr(n.reader.Tb(16))),0<n.version){s=n.reader.T();for(var u=0;u<s;u++){var l=Sr(n.reader.Tb(16));t.h.push(l)}}}}).parse(e)}function Pf(e,t,n,s){var u=e.length,l=t.length+16+u;0<s&&(l+=4+16*n.size);var d=new Uint8Array(l),p=Yn(d),g=0;if(p.setUint32(g,l),g+=4,p.setUint32(g,1886614376),g+=4,1>s?p.setUint32(g,0):p.setUint32(g,16777216),g+=4,d.set(t,g),g+=t.length,0<s)for(p.setUint32(g,n.size),g+=4,t=m(n),n=t.next();!n.done;n=t.next())n=Ro(n.value),d.set(n,g),g+=n.length;return p.setUint32(g,u),d.set(e,g+4),d}function Of(e){var t=this;this.C=e,this.j=this.A=null,this.na=this.S=!1,this.I=0,this.g=null,this.o=new Ee,this.i=new Map,this.W=[],this.B=new Map,this.K=!1,this.m=new _t,this.h=null,this.s=function(n){n.severity==2&&t.m.reject(n),e.onError(n)},this.ha=new Map,this.ka=new Map,this.L=new ht(function(){return bb(t)}),this.P=!1,this.M=[],this.ba=!1,this.F=new ht(function(){Ab(t)}),this.m.catch(function(){}),this.l=new _s(function(){return pb(t)}),this.N=!1,this.G=this.H=null,this.U=function(){return!1}}y=Of.prototype,y.destroy=function(){return this.l.destroy()};function pb(e){return j(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.F.stop(),e.F=null,e.L.stop(),e.L=null,D(t,va(e),2);case 2:if(!e.j){t.u(3);break}return le(t,4),D(t,e.j.setMediaKeys(null),6);case 6:V(t,5);break;case 4:re(t);case 5:e.j=null;case 3:e.g=null,e.A=null,e.B=new Map,e.h=null,e.s=function(){},e.C=null,e.N=!1,e.H=null,ne(t)}})}y.configure=function(e,t){this.h=e,t&&(this.U=t),this.F&&this.S&&this.g&&this.F.Fa(this.h.updateExpirationTime)};function gb(e,t,n){return e.na=!0,e.B=new Map,e.P=n,j1(e,t,!1)}function F1(e,t,n,s){s=s===void 0?!0:s,e.B=new Map,n=m(n);for(var u=n.next();!u.done;u=n.next())e.B.set(u.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),u=n.next();!u.done;u=n.next())u=u.value,e.B.set(u.sessionId,{initData:u.initData,initDataType:u.initDataType});return e.P=0<e.B.size,j1(e,t,s)}function mb(e,t,n,s,u,l){var d,p,g,v,T;return j(function(b){return b.g==1?(d=[],l.length&&d.push(l[0].contentType),u.length&&d.push(u[0].contentType),p=function(M){return M=Tr(t,M,null),M.licenseServerUri=n,M.serverCertificate=s,M.persistentStateRequired=!0,M.sessionType="persistent-license",M},g=T1(d),g.video&&(v=p(l[0].encryptionScheme||""),g.video.drmInfos.push(v)),g.audio&&(T=p(u[0].encryptionScheme||""),g.audio.drmInfos.push(T)),D(b,ap([g],!0,e.N,[]),2)):(Nt(e.l),b.return(H1(e,[g])))})}function j1(e,t,n){var s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W;return j(function(J){if(J.g==1){for(q1(e.h.clearKeys,t),s=t.some(function(G){return!!(G.video&&G.video.drmInfos.length||G.audio&&G.audio.drmInfos.length)}),u=Ls(e.h.servers),l=Ls(e.h.advanced||{}),!s&&n&&Ib(t,u),d=new WeakSet,p=m(t),g=p.next();!g.done;g=p.next())for(v=g.value,T=Y1(v),b=m(T),M=b.next();!M.done;M=b.next())_=M.value,d.has(_)||(d.add(_),Rb(_,u,l,e.h.keySystemsMapping));for(L=function(G,X){var Y=[];G=m(G);for(var Q=G.next();!Q.done;Q=G.next()){Q=Q.value;var ie=Q[X]||l.has(Q.keySystem)&&l.get(Q.keySystem)[X]||"",te;if((te=ie=="")&&(te=(te=Q.keySystem)?!!te.match(/^com\.widevine\.alpha/):!1),te&&(X=="audioRobustness"?ie=[e.h.defaultAudioRobustnessForWidevine]:X=="videoRobustness"&&(ie=[e.h.defaultVideoRobustnessForWidevine])),typeof ie=="string")Y.push(Q);else if(Array.isArray(ie))for(ie.length===0&&(ie=[""]),ie=m(ie),te=ie.next();!te.done;te=ie.next()){var Z={};Y.push(Object.assign({},Q,(Z[X]=te.value,Z)))}}return Y},O=new WeakSet,P=m(t),U=P.next();!U.done;U=P.next())B=U.value,B.video&&!O.has(B.video)&&(B.video.drmInfos=L(B.video.drmInfos,"videoRobustness"),B.video.drmInfos=L(B.video.drmInfos,"audioRobustness"),O.add(B.video)),B.audio&&!O.has(B.audio)&&(B.audio.drmInfos=L(B.audio.drmInfos,"videoRobustness"),B.audio.drmInfos=L(B.audio.drmInfos,"audioRobustness"),O.add(B.audio));return D(J,ap(t,e.P,e.N,e.h.preferredKeySystems),2)}return Nt(e.l),$=s||0<u.size,$?(W=H1(e,t),J.return(s?W:W.catch(function(){}))):(e.S=!0,J.return(Promise.resolve()))})}function $1(e){var t;return j(function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.H){n.u(2);break}return D(n,e.H,3);case 3:return Nt(e.l),n.return();case 2:return le(n,4),e.H=e.j.setMediaKeys(e.A),D(n,e.H,6);case 6:V(n,5);break;case 4:t=re(n),e.s(new q(2,6,6003,t.message));case 5:Nt(e.l),ne(n)}})}function yb(e,t){return j(function(n){if(n.g==1)return D(n,$1(e),2);ya(e,t.initDataType,Ze(t.initData)),ne(n)})}y.fc=function(e){var t=this,n;return j(function(s){if(s.g==1)return t.j===e?s.return():t.A?(t.j=e,t.o.Aa(t.j,"play",function(){for(var u=m(t.M),l=u.next();!l.done;l=u.next())yp(t,l.value);t.ba=!0,t.M=[]}),t.j.remote?(t.o.D(t.j.remote,"connect",function(){return va(t)}),t.o.D(t.j.remote,"connecting",function(){return va(t)}),t.o.D(t.j.remote,"disconnect",function(){return va(t)})):"webkitCurrentPlaybackTargetIsWireless"in t.j&&t.o.D(t.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return va(t)}),t.G=t.g&&t.g.initData.find(function(u){return 0<u.initData.length})||null,n=t.g.keySystem,Be().Qg(n)||!(t.G||t.B.size||t.h.parseInbandPsshEnabled)?(t.o.D(t.j,"encrypted",function(u){return yb(t,u)}),s.u(2)):D(s,$1(t),2)):(t.o.Aa(e,"encrypted",function(){t.s(new q(2,6,6010))}),s.return());z1(t).catch(function(){}),ne(s)})};function vb(e){var t,n,s,u,l;return j(function(d){switch(d.g){case 1:if(!e.A||!e.g)return d.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){d.u(2);break}return t=fn([e.g.serverCertificateUri],e.h.retryParameters),le(d,3),n=e.C.pc.request(5,t,{isPreload:e.U()}),D(d,n.promise,5);case 5:s=d.h,e.g.serverCertificate=Ze(s.data),V(d,4);break;case 3:throw u=re(d),new q(2,6,6017,u);case 4:if(e.l.g)return d.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?d.return():(le(d,6),D(d,e.A.setServerCertificate(e.g.serverCertificate),8));case 8:V(d,0);break;case 6:throw l=re(d),new q(2,6,6004,l.message)}})}function xb(e,t){var n,s,u;return j(function(l){if(l.g==1)return D(l,X1(e,t,{initData:null,initDataType:null}),2);if(l.g!=3)return n=l.h,n?(s=[],(u=e.i.get(n))&&(u.Kb=new _t,s.push(u.Kb)),s.push(n.remove()),D(l,Promise.all(s),3)):l.return();e.i.delete(n),ne(l)})}function z1(e){var t,n,s,u,l;return j(function(d){if(d.g==1)return e.B.size?(e.B.forEach(function(p,g){X1(e,g,p)}),D(d,e.m,3)):d.u(2);if(d.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&Eb(e))return d.return(e.m);e.K=!1,e.m=new _t,e.m.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],s=m(n),u=s.next();!u.done;u=s.next())l=u.value,ya(e,l.initDataType,l.initData);return xa(e)&&e.m.resolve(),d.return(e.m)})}function ya(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var s=e.i.values();s=m(s);for(var u=s.next();!u.done;u=s.next())if(xr(n,u.value.initData))return;var l=!1;if(e.B.forEach(function(d){!l&&xr(n,d.initData)&&(l=!0)}),l)return}e.K=!0,0<e.i.size&&xa(e)&&(e.m.resolve(),e.K=!1,e.m=new _t,e.m.catch(function(){})),Tb(e,t,n,e.g.sessionType)}}function V1(e){return e=e.i.keys(),e=hp(e,function(t){return t.sessionId}),Array.from(e)}y.Eg=function(){var e=this,t=this.i.keys();return t=hp(t,function(n){var s=e.i.get(n);return{sessionId:n.sessionId,sessionType:s.type,initData:s.initData,initDataType:s.initDataType}}),Array.from(t)},y.Pd=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};function wb(e){return e.I?e.I:NaN}y.Te=function(){return pp(this.ka)};function H1(e,t){var n,s,u,l,d,p,g;return j(function(v){switch(v.g){case 1:if(n=new Map,s=Sb(e,t,n),!s)throw navigator.requestMediaKeySystemAccess?new q(2,6,6001):new q(2,6,6020);Nt(e.l),le(v,2),s.getConfiguration();var T=u=e.h.keySystemsMapping[s.keySystem]||s.keySystem,b=n.get(u),M=[],_=[],L=[],O=[],P=[],U=new Set,B=new Set;Mb(b,M,_,O,L,P,U,B);var $=e.P?"persistent-license":"temporary";for(T={keySystem:T,encryptionScheme:M[0],licenseServerUri:_[0],distinctiveIdentifierRequired:b[0].distinctiveIdentifierRequired,persistentStateRequired:b[0].persistentStateRequired,sessionType:b[0].sessionType||$,audioRobustness:b[0].audioRobustness||"",videoRobustness:b[0].videoRobustness||"",serverCertificate:O[0],serverCertificateUri:L[0],initData:P,keyIds:U},0<B.size&&(T.keySystemUris=B),b=m(b),B=b.next();!B.done;B=b.next())B=B.value,B.distinctiveIdentifierRequired&&(T.distinctiveIdentifierRequired=B.distinctiveIdentifierRequired),B.persistentStateRequired&&(T.persistentStateRequired=B.persistentStateRequired);if(e.g=T,!e.g.licenseServerUri)throw new q(2,6,6012,e.g.keySystem);return D(v,s.createMediaKeys(),4);case 4:if(l=v.h,Nt(e.l),e.A=l,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.A)){v.u(5);break}return le(v,6),D(v,e.A.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),8);case 8:if(d=v.h,d!="usable")throw new q(2,6,6018);Nt(e.l),V(v,5,2);break;case 6:throw p=re(v,2),p instanceof q?p:new q(2,6,6019,p.message);case 5:return e.S=!0,e.F.Fa(e.h.updateExpirationTime),D(v,vb(e),9);case 9:Nt(e.l),V(v,0);break;case 2:throw g=re(v),Nt(e.l,g),e.g=null,g instanceof q?g:new q(2,6,6002,g.message)}})}function Sb(e,t,n){for(var s=m(t),u=s.next();!u.done;u=s.next()){u=m(Y1(u.value));for(var l=u.next();!l.done;l=u.next())l=l.value,n.has(l.keySystem)||n.set(l.keySystem,[]),n.get(l.keySystem).push(l)}if(n.size==1&&n.has(""))throw new q(2,6,6e3);s=e.h.preferredKeySystems,s.length||(u=Ls(e.h.servers),u.size==1&&(s=Array.from(u.keys()))),u=m(s);var d=u.next();for(l={};!d.done;l={wi:void 0},d=u.next()){l.wi=d.value,d=m(t);for(var p=d.next();!p.done;p=d.next())if(p=p.value.decodingInfos.find(function(b){return function(M){return M.supported&&M.keySystemAccess!=null&&M.keySystemAccess.keySystem==b.wi}}(l)))return p.keySystemAccess}for(u=m([!0,!1]),l=u.next();!l.done;l=u.next())for(l=l.value,d=m(t),p=d.next();!p.done;p=d.next()){p=m(p.value.decodingInfos);for(var g=p.next();!g.done;g=p.next())if(g=g.value,g.supported&&g.keySystemAccess){var v=g.keySystemAccess.keySystem;if(!s.includes(v)){var T=n.get(v);for(!T&&e.h.keySystemsMapping[v]&&(T=n.get(e.h.keySystemsMapping[v])),v=m(T),T=v.next();!T.done;T=v.next())if(!!T.value.licenseServerUri==l)return g.keySystemAccess}}}return null}function mp(e){xa(e)&&e.m.resolve()}function G1(e,t){new ht(function(){t.loaded=!0,mp(e)}).ia(Lb)}function X1(e,t,n){var s,u,l,d,p,g,v;return j(function(T){switch(T.g){case 1:try{s=e.A.createSession("persistent-license")}catch(b){return u=new q(2,6,6005,b.message),e.s(u),T.return(Promise.reject(u))}return e.o.D(s,"message",function(b){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.ba?e.M.push(b):yp(e,b)}),e.o.D(s,"keystatuseschange",function(b){return W1(e,b)}),l={initData:n.initData,initDataType:n.initDataType,loaded:!1,Tg:1/0,Kb:null,type:"persistent-license"},e.i.set(s,l),le(T,2),D(T,s.load(t),4);case 4:return d=T.h,Nt(e.l),d||(e.i.delete(s),p=e.h.persistentSessionOnlinePlayback?1:2,e.s(new q(p,6,6013)),l.loaded=!0),G1(e,l),mp(e),T.return(s);case 2:g=re(T),Nt(e.l,g),e.i.delete(s),v=e.h.persistentSessionOnlinePlayback?1:2,e.s(new q(v,6,6005,g.message)),l.loaded=!0,mp(e);case 3:return T.return(Promise.resolve())}})}function Tb(e,t,n,s){try{var u=e.A.createSession(s)}catch(l){e.s(new q(2,6,6005,l.message));return}e.o.D(u,"message",function(l){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.ba?e.M.push(l):yp(e,l)}),e.o.D(u,"keystatuseschange",function(l){return W1(e,l)}),e.i.set(u,{initData:n,initDataType:t,loaded:!1,Tg:1/0,Kb:null,type:s});try{n=e.h.initDataTransform(n,t,e.g)}catch(l){t=l,l instanceof q||(t=new q(2,6,6016,l)),e.s(t);return}e.h.logLicenseExchange&&wr(n),u.generateRequest(t,n).catch(function(l){if(!e.l.g){e.i.delete(u);var d=l.errorCode;if(d&&d.systemCode){var p=d.systemCode;0>p&&(p+=Math.pow(2,32)),p="0x"+p.toString(16)}e.s(new q(2,6,6006,l.message,l,p))}})}function Cb(e){return j(function(t){return t.g==1?e.K?D(t,e.m,3):t.u(0):D(t,Promise.all(e.W.map(function(n){return n.promise})),0)})}function yp(e,t){var n,s,u,l,d,p,g,v,T,b,M,_,L,O,P;j(function(U){switch(U.g){case 1:if(n=t.target,e.h.logLicenseExchange&&wr(t.message),s=e.i.get(n),u=e.g.licenseServerUri,l=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&l&&l.individualizationServer&&(u=l.individualizationServer),d=fn([u],e.h.retryParameters),d.body=t.message,d.method="POST",d.licenseRequestType=t.messageType,d.sessionId=n.sessionId,d.drmInfo=e.g,s&&(d.initData=s.initData,d.initDataType=s.initDataType),l&&l.headers)for(p in l.headers)d.headers[p]=l.headers[p];if(e.g.keySystem==="org.w3.clearkey"){var B=d,$=e.g;try{var W=lr(B.body);if(W){var J=JSON.parse(W);J.type||(J.type=$.sessionType,B.body=zi(JSON.stringify(J)))}}catch{}}if(cp(e.g.keySystem))if(B=qr(d.body,!0,!0),B.includes("PlayReadyKeyMessage")){for(B=Oo(B,"PlayReadyKeyMessage"),$=tr(B,"HttpHeader"),$=m($),W=$.next();!W.done;W=$.next())J=W.value,W=tr(J,"name")[0],J=tr(J,"value")[0],d.headers[an(W)]=an(J);B=tr(B,"Challenge")[0],d.body=Ii(an(B))}else d.headers["Content-Type"]="text/xml; charset=utf-8";return g=Date.now(),le(U,2),T=e.C.pc.request(2,d,{isPreload:e.U()}),e.W.push(T),D(U,T.promise,4);case 4:v=U.h,Vi(e.W,T),V(U,3);break;case 2:return b=re(U),e.l.g||(M=new q(2,6,6007,b),e.i.size==1?(e.s(M),s&&s.Kb&&s.Kb.reject(M)):(s&&s.Kb&&s.Kb.reject(M),e.i.delete(n),xa(e)&&(e.m.resolve(),e.L.ia(.1)))),U.return();case 3:return e.l.g?U.return():(e.I+=(Date.now()-g)/1e3,e.h.logLicenseExchange&&wr(v.data),le(U,5),D(U,n.update(v.data),7));case 7:V(U,6);break;case 5:return L=(_=re(U))&&_.message||String(_),O=new q(2,6,6008,L),e.s(O),s&&s.Kb&&s.Kb.reject(O),U.return();case 6:if(e.l.g)return U.return();P=new Ie("drmsessionupdate"),e.C.onEvent(P),s&&(s.Kb&&s.Kb.resolve(),G1(e,s)),ne(U)}})}function W1(e,t){t=t.target;var n=e.i.get(t),s=!1;t.keyStatuses.forEach(function(l,d){if(typeof d=="string"){var p=d;d=l,l=p}if(p=Be(),cp(e.g.keySystem)&&d.byteLength==16&&p.fh()){p=Yn(d);var g=p.getUint32(0,!0),v=p.getUint16(4,!0),T=p.getUint16(6,!0);p.setUint32(0,g,!1),p.setUint16(4,v,!1),p.setUint16(6,T,!1)}l!="status-pending"&&(n.loaded=!0),l=="expired"&&(s=!0),d=Sr(d).slice(0,32),e.ha.set(d,l)});var u=t.expiration-Date.now();(0>u||s&&1e3>u)&&n&&!n.Kb&&(e.i.delete(t),K1(t)),xa(e)&&(e.m.resolve(),e.L.ia(Db))}function bb(e){var t=e.ha,n=e.ka;n.clear(),t.forEach(function(s,u){return n.set(u,s)}),t=Array.from(n.values()),t.length&&t.every(function(s){return s=="expired"})&&e.s(new q(2,6,6014)),e.C.rf(pp(n))}function kb(){var e,t,n,s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z,ve,de,ae,ge,Te,Ce;return j(function(Pe){if(Pe.g==1){if(e="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(f.MediaKeys&&f.navigator&&f.navigator.requestMediaKeySystemAccess&&f.MediaKeySystemAccess&&f.MediaKeySystemAccess.prototype.getConfiguration)){for(t={},n=m(e),s=n.next();!s.done;s=n.next())u=s.value,t[u]=null;return Pe.return(t)}for(l="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),d=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],p=["150","2000","3000"],g={"com.widevine.alpha":d,"com.widevine.alpha.experiment":d,"com.microsoft.playready.recommendation":p},v=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],T=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],b={videoCapabilities:v,audioCapabilities:T,initDataTypes:["cenc","sinf","skd","keyids"]},M=[null,"cenc","cbcs"],_=new Map,L=Be(),O=function(Re,yt){var pt,At,ut,et,Et,at,rt,dt,Xt,Vt,Wt,pn,on;return j(function(It){switch(It.g){case 1:return le(It,2),D(It,yt.createMediaKeys(),5);case 5:pt=It.h;case 4:V(It,3);break;case 2:return re(It),It.return();case 3:if(ut=(At=yt.getConfiguration().sessionTypes)?At.includes("persistent-license"):!1,L.mi()&&(ut=!1),et=yt.getConfiguration().videoCapabilities,Et=yt.getConfiguration().audioCapabilities,at={persistentState:ut,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},_.has(Re)&&_.get(Re)?at=_.get(Re):_.set(Re,at),(rt=et[0].encryptionScheme)&&!at.encryptionSchemes.includes(rt)&&at.encryptionSchemes.push(rt),(dt=et[0].robustness)&&!at.videoRobustnessLevels.includes(dt)&&at.videoRobustnessLevels.push(dt),(Xt=Et[0].robustness)&&!at.audioRobustnessLevels.includes(Xt)&&at.audioRobustnessLevels.push(Xt),"getStatusForPolicy"in pt){for(Vt=[],Wt=m(l),pn=Wt.next(),on={};!pn.done;on={Td:void 0},pn=Wt.next())on.Td=pn.value,at.minHdcpVersions.includes(on.Td)||Vt.push(pt.getStatusForPolicy({minHdcpVersion:on.Td}).then(function(go){return function(pi){pi!="usable"||at.minHdcpVersions.includes(go.Td)||at.minHdcpVersions.push(go.Td)}}(on)));return D(It,Promise.all(Vt),0)}It.u(0)}})},P=function(Re,yt,pt,At){var ut,et,Et,at,rt,dt,Xt,Vt,Wt,pn,on;return j(function(It){switch(It.g){case 1:for(le(It,2),ut=Hi(b),et=m(ut.videoCapabilities),Et=et.next();!Et.done;Et=et.next())at=Et.value,at.encryptionScheme=yt,at.robustness=pt;for(rt=m(ut.audioCapabilities),dt=rt.next();!dt.done;dt=rt.next())Xt=dt.value,Xt.encryptionScheme=yt,Xt.robustness=At;return Vt=Hi(ut),Vt.persistentState="required",Vt.sessionTypes=["persistent-license"],Wt=[Vt,ut],on=Be(),on.La()=="MOBILE"?D(It,pa(5,navigator.requestMediaKeySystemAccess(Re,Wt)),7):D(It,navigator.requestMediaKeySystemAccess(Re,Wt),6);case 6:pn=It.h,It.u(5);break;case 7:pn=It.h;case 5:return D(It,O(Re,pn),8);case 8:V(It,0);break;case 2:re(It),ne(It)}})},U=function(Re,yt,pt,At){var ut,et,Et,at;return j(function(rt){switch(rt.g){case 1:return le(rt,2),ut={type:"media-source",video:{contentType:v[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:T[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:Re,video:{encryptionScheme:yt,robustness:pt},audio:{encryptionScheme:yt,robustness:At}}},Et=Be(),Et.La()=="MOBILE"?D(rt,pa(5,navigator.mediaCapabilities.decodingInfo(ut)),7):D(rt,navigator.mediaCapabilities.decodingInfo(ut),6);case 6:et=rt.h,rt.u(5);break;case 7:et=rt.h;case 5:return at=et.keySystemAccess,D(rt,O(Re,at),8);case 8:V(rt,0);break;case 2:re(rt),ne(rt)}})},B=m(e),$=B.next();!$.done;$=B.next())W=$.value,_.set(W,null);for(J=function(Re){return!(Be().Da()==="WEBKIT"&&Re==="org.w3.clearkey")},G=[],X=m(M),Y=X.next();!Y.done;Y=X.next())for(Q=Y.value,ie=m(e),te=ie.next();!te.done;te=ie.next())Z=te.value,J(Z)&&(G.push(P(Z,Q,"","")),G.push(U(Z,Q,"","")));for(ve=m(e),de=ve.next();!de.done;de=ve.next())for(ae=de.value,ge=m(g[ae]||[]),Te=ge.next();!Te.done;Te=ge.next())Ce=Te.value,J(ae)&&(G.push(P(ae,null,Ce,"")),G.push(P(ae,null,"",Ce)),G.push(U(ae,null,Ce,"")),G.push(U(ae,null,"",Ce)));return D(Pe,Promise.all(G),2)}return Pe.return(pp(_))})}function K1(e){return j(function(t){if(t.g==1)return le(t,2),D(t,pa(_b,Promise.all([e.close().catch(function(){}),e.closed])),4);if(t.g!=2)return V(t,0);re(t),ne(t)})}function va(e){var t;return j(function(n){return t=Array.from(e.i.entries()),e.i.clear(),D(n,Promise.all(t.map(function(s){s=m(s);var u=s.next().value,l=s.next().value;return j(function(d){if(d.g==1)return le(d,2),e.na||e.B.has(u.sessionId)||l.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?D(d,K1(u),5):D(d,u.remove(),5);if(d.g!=2)return V(d,0);re(d),ne(d)})})),0)})}function Y1(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Ab(e){e.i.forEach(function(t,n){var s=t.Tg,u=n.expiration;isNaN(u)&&(u=1/0),u!=s&&(e.C.onExpirationUpdated(n.sessionId,u),t.Tg=u)})}function xa(e){return e=e.i.values(),db(e,function(t){return t.loaded})}function Eb(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.ha.get(n.value)!=="usable")return!1;return!0}function Ib(e,t){var n=[];for(t.forEach(function(s,u){n.push({keySystem:u,licenseServerUri:s,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function Mb(e,t,n,s,u,l,d,p){var g=[];e=m(e);for(var v=e.next(),T={};!v.done;T={Ha:void 0},v=e.next()){if(T.Ha=v.value,t.includes(T.Ha.encryptionScheme)||t.push(T.Ha.encryptionScheme),T.Ha.keySystem=="org.w3.clearkey"&&T.Ha.licenseServerUri.startsWith("data:application/json;base64,")?g.includes(T.Ha.licenseServerUri)||g.push(T.Ha.licenseServerUri):n.includes(T.Ha.licenseServerUri)||n.push(T.Ha.licenseServerUri),u.includes(T.Ha.serverCertificateUri)||u.push(T.Ha.serverCertificateUri),T.Ha.serverCertificate&&(s.some(function(_){return function(L){return xr(L,_.Ha.serverCertificate)}}(T))||s.push(T.Ha.serverCertificate)),T.Ha.initData){v=m(T.Ha.initData);for(var b=v.next(),M={};!b.done;M={Kg:void 0},b=v.next())M.Kg=b.value,l.some(function(_){return function(L){var O=_.Kg;return L.keyId&&L.keyId==O.keyId?!0:L.initDataType==O.initDataType&&xr(L.initData,O.initData)}}(M))||l.push(M.Kg)}if(T.Ha.keyIds)for(v=m(T.Ha.keyIds),b=v.next();!b.done;b=v.next())d.add(b.value);if(T.Ha.keySystemUris&&p)for(T=m(T.Ha.keySystemUris),v=T.next();!v.done;v=T.next())p.add(v.value)}if(g.length==1)n.push(g[0]);else if(0<g.length){for(t=[],g=m(g),s=g.next();!s.done;s=g.next())s=f.atob(s.value.split("data:application/json;base64,").pop()),s=JSON.parse(s),t.push.apply(t,S(s.keys));g=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+f.btoa(g))}}function Rb(e,t,n,s){var u=e.keySystem;u&&(u!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&t.get(u)&&(t=t.get(u),e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(u))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),s[u]&&(e.keySystem=s[u]),f.cast&&f.cast.__platform__&&u=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}function q1(e,t){if(e=Ls(e),e.size!=0){e=Ny(e),t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}var _b=1,Lb=5,Db=.5;function Nf(e,t,n){for(n=n===void 0?!0:n,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n)}Nf.prototype.add=function(e,t){var n=this.h;t=t===void 0?!0:t;var s;if(!(s=!!n.audio!=!!e.audio||!!n.video!=!!e.video||n.language!=e.language)&&(s=n.audio&&e.audio)){s=n.audio;var u=e.audio;s=!(!((!s.channelsCount||!u.channelsCount||2<s.channelsCount||2<u.channelsCount)&&s.channelsCount!=u.channelsCount||s.spatialAudio!==u.spatialAudio||t&&!Q1(s,u))&&J1(s.roles,u.roles)&&s.groupId===u.groupId)}return!s&&(s=n.video&&e.video)&&(n=n.video,s=e.video,s=!((!t||Q1(n,s))&&J1(n.roles,s.roles))),s?!1:(this.g.add(e),!0)},Nf.prototype.values=function(){return this.g.values()};function Q1(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(s){return eo(s)}),t=t.codecs.split(",").map(function(s){return eo(s)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function J1(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}be("shaka.media.AdaptationSet",Nf),be("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function Uf(){}Uf.prototype.create=function(){},Uf.prototype.configure=function(){},Uf.prototype.getConfiguration=function(){},be("shaka.media.AdaptationSetCriteria",Uf);function Pb(){this.g=wa,this.i=new Map().set(wa,2).set(Ps,1),this.h=0}var Ps=0,wa=1;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function vp(e,t,n){this.g=e,this.i=t,this.h=n}function Z1(e,t){return j(function(n){if(n.g==1)return D(n,J4(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||d1(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(ma))throw new q(2,4,4032);return n.return(tv(e,t))})}function ev(e,t){var n=e.g.restrictions;e=e.i;var s=!1;t=m(t.variants);for(var u=t.next();!u.done;u=t.next()){u=u.value;var l=u.allowedByApplication;u.allowedByApplication=xf(u,n,e),l!=u.allowedByApplication&&(s=!0)}return s}function tv(e,t){var n=ev(e,t);if(t){var s=e.h?e.h.g:null;if(s&&e.h.A){for(var u=new Set,l=m(t.variants),d=l.next();!d.done;d=l.next())d=d.value,d.audio&&u.add(d.audio),d.video&&u.add(d.video);for(u=m(u),l=u.next();!l.done;l=u.next())nv(e,s.keySystem,l.value)}iv(e,t)}return n}function nv(e,t,n){n=m(n.drmInfos);for(var s=n.next();!s.done;s=n.next())if(s=s.value,s.keySystem==t){s=m(s.initData||[]);for(var u=s.next();!u.done;u=s.next())u=u.value,ya(e.h,u.initDataType,u.initData)}}function iv(e,t){e=e.h?e.h.Te():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var s=!1,u=!1,l=new Set,d=new Set,p=new Set;t=m(t.variants);for(var g=t.next();!g.done;g=t.next())g=g.value,g.audio&&p.add(g.audio),g.video&&p.add(g.video),g.allowedByApplication?g.allowedByKeySystem&&(s=!0):u=!0;for(p=m(p),t=p.next();!t.done;t=p.next())if(t=t.value,t.keyIds.size)for(t=m(t.keyIds),g=t.next();!g.done;g=t.next()){g=g.value;var v=e[n?"00":g];v?xp.includes(v)&&d.add(v):l.add(g)}if(!s)throw e={hasAppRestrictions:u,missingKeys:Array.from(l),restrictedKeyStatuses:Array.from(d)},new q(2,4,4012,e)}var xp=["output-restricted","internal-error"];function Sa(){}function Vo(e,t){Os.set(e,t)}function Ob(){var e={};if(Be(),gr())for(var t=m(Os.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(t=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),n=t.next();!n.done;n=t.next())n=n.value,e[n]=gr()?Os.has(n):Go().canPlayType(n)!="";return e}function rv(e,t){if(t){var n=Os.get(t.toLowerCase());if(n)return n}throw new q(2,4,4e3,e,t)}be("shaka.media.ManifestParser",Sa),Sa.unregisterParserByMime=function(e){Os.delete(e)},Sa.registerParserByMime=Vo,Sa.registerParserByExtension=function(){st("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Sa.AccessibilityPurpose={tm:"visually impaired",Gl:"hard of hearing",bm:"spoken subtitles"};var Os=new Map;function Bf(e,t){var n=null,s=null,u=null,l=null,d=e.T();return t&1&&(u=e.yd()),t&2&&(l=e.T()),t&8&&(n=e.T()),t&16&&(s=e.T()),{trackId:d,Md:n,Nd:s,gj:u,Fi:l}}function Ff(e,t){return t==1?(t=e.T(),e=e.T(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.T()}}function jf(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.T(),e.skip(4),e=e.Ba(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function $f(e,t,n){var s=e.T(),u=[],l=null;n&1&&(l=e.Yg()),n&4&&e.skip(4);for(var d=0;d<s;d++){var p={hh:null,sampleSize:null,Bf:null};n&256&&(p.hh=e.T()),n&512&&(p.sampleSize=e.T()),n&1024&&e.skip(4),n&2048&&(p.Bf=t==0?e.T():e.Yg()),u.push(p)}return{ym:s,gh:u,mg:l}}function ov(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Ba();return e.skip(2),e.skip(2),e.skip(2),e=e.Ba()+e.Ba()/65536,{channelCount:t,sampleRate:e}}function wp(e){return e=e.T(),{codec:Df(e)}}function Nb(e){var t=null,n=null,s=e.Tb(4),u=String.fromCharCode(s[0]);if(u+=String.fromCharCode(s[1]),u+=String.fromCharCode(s[2]),u+=String.fromCharCode(s[3]),u==="nclx"){switch(e.Ba()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(s=e.Ba(),e.Ba(),s){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,oe:n}}function Ta(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function ai(e){return(10>e?"0":"")+e}function Ns(e){this.g=e}function Us(e){for(var t=[],n=m(e.g),s=n.next();!s.done;s=n.next()){var u=t,l=u.push,d=s.value;s=mt;var p=d.id+1,g=d.stream.width||0,v=d.stream.height||0;d.type=="audio"&&(v=g=0);var T=d.duration*d.timescale,b=Math.floor(T/(ro+1));switch(T=Math.floor(T%(ro+1)),p=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(S(Gt(p,4)),[0,0,0,0],S(Gt(b,4)),S(Gt(T,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],S(Gt(g,2)),[0,0],S(Gt(v,2)),[0,0])),p=mt("tkhd",p),g=mt,b=d.duration*d.timescale,v=Math.floor(b/(ro+1)),b=Math.floor(b%(ro+1)),T=d.stream.language,T=T.charCodeAt(0)-96<<10|T.charCodeAt(1)-96<<5|T.charCodeAt(2)-96,v=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(S(Gt(d.timescale,4)),S(Gt(v,4)),S(Gt(b,4)),S(Gt(T,2)),[0,0])),v=mt("mdhd",v),b=d,T=new Uint8Array([]),b.type){case"video":T=Bb.value();break;case"audio":T=Fb.value()}b=mt("hdlr",T);e:{switch(d.type){case"video":d=mt("minf",mt("vmhd",Hb.value()),cv.value(),sv(d));break e;case"audio":d=mt("minf",mt("smhd",Gb.value()),cv.value(),sv(d));break e}d=new Uint8Array([])}d=g("mdia",v,b,d),s=s("trak",p,d),l.call(u,s)}for(t=Zt.apply(In,S(t)),l=e.g[0],n=mt,s=l.duration*l.timescale,u=Math.floor(s/(ro+1)),s=Math.floor(s%(ro+1)),u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(S(Gt(l.timescale,4)),S(Gt(u,4)),S(Gt(s,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),u=mt("mvhd",u),s=[],e=m(e.g),g=e.next();!g.done;g=e.next())d=s,p=d.push,g=new Uint8Array([0,0,0,0].concat(S(Gt(g.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),g=mt("trex",g),p.call(d,g);if(e=Zt.apply(In,S(s)),e=mt("mvex",e),s=[],l.encrypted){for(l=m(l.stream.drmInfos),d=l.next();!d.done;d=l.next())if(d=d.value,d.initData)for(d=m(d.initData),p=d.next();!p.done;p=d.next())s.push(p.value.initData);l=Zt.apply(In,S(s))}else l=new Uint8Array([]);return e=n("moov",u,t,e,l),t=Wb.value(),n=new Uint8Array(t.byteLength+e.byteLength),n.set(t),n.set(e,t.byteLength),n}function sv(e){var t=mt,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=Be().ee()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var s=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,s=e.stream.height||0,0<e.Na.byteLength)var u=mt("avcC",e.Na);else{u=mt;for(var l=7,d=[],p=[],g=0,v=0,T=0,b=0;b<e.Ab.length;b++){var M=av(e.Ab[b]);switch(M[0]&31){case 7:d.push(M),l+=M.length+2;break;case 8:p.push(M),l+=M.length+2}}for(0<d.length&&(g=d[0][1],T=d[0][2],v=d[0][3]),l=new Uint8Array(l),b=0,l[b++]=1,l[b++]=g,l[b++]=T,l[b++]=v,l[b++]=255,l[b++]=224|d.length,g=0;g<d.length;g++)l[b++]=(d[g].length&65280)>>8,l[b++]=d[g].length&255,l.set(d[g],b),b+=d[g].length;for(l[b++]=p.length,d=0;d<p.length;d++)l[b++]=(p[d].length&65280)>>8,l[b++]=p[d].length&255,l.set(p[d],b),b+=p[d].length;u=u("avcC",l)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(S(Gt(n,2)),S(Gt(s,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),s="avc1",p=uv(e),d=new Uint8Array([]),e.encrypted&&(d=Ho(e.stream,e.codecs),s="encv"),s=mt(s,n,u,p,d)}else e.codecs.includes("hvc1")&&(s=e.stream.width||0,u=e.stream.height||0,n=new Uint8Array([]),0<e.Na.byteLength&&(n=mt("hvcC",e.Na)),s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(S(Gt(s,2)),S(Gt(u,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),u="hvc1",p=uv(e),d=new Uint8Array([]),e.encrypted&&(d=Ho(e.stream,e.codecs),u="encv"),s=mt(u,s,n,p,d));break;case"audio":n=="mp3"?e=mt(".mp3",Ca(e)):n=="ac-3"?(n=mt("dac3",e.Ea),s="ac-3",u=new Uint8Array([]),e.encrypted&&(u=Ho(e.stream,e.codecs),s="enca"),e=mt(s,Ca(e),n,u)):n=="ec-3"?(n=mt("dec3",e.Ea),s="ec-3",u=new Uint8Array([]),e.encrypted&&(u=Ho(e.stream,e.codecs),s="enca"),e=mt(s,Ca(e),n,u)):n=="opus"?(n=mt("dOps",e.Ea),s="Opus",u=new Uint8Array([]),e.encrypted&&(u=Ho(e.stream,e.codecs),s="enca"),e=mt(s,Ca(e),n,u)):(0<e.Ea.byteLength?n=mt("esds",e.Ea):(n=mt,s=e.id+1,u=e.stream.channelsCount||2,d=e.stream.audioSamplingRate||44100,g=vs("audio",e.codecs.split(",")),v={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},p=v[d],(g==="mp4a.40.5"||g==="mp4a.40.29")&&(p=v[2*d]),d=parseInt(g.split(".").pop(),10),s=new Uint8Array([0,0,0,0,3,25].concat(S(Gt(s,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,d<<3|p>>>1,p<<7|u<<3,6,1,2])),n=n("esds",s)),s="mp4a",u=new Uint8Array([]),e.encrypted&&(u=Ho(e.stream,e.codecs),s="enca"),e=mt(s,Ca(e),n,u)),s=e}return e=mt("stsd",Xb.value(),s),t("stbl",e,mt("stts",jb.value()),mt("stsc",$b.value()),mt("stsz",Vb.value()),mt("stco",zb.value()))}function uv(e){if(!e.Wa&&!e.Xa)return new Uint8Array([]);var t=e.Xa;return e=new Uint8Array([].concat(S(Gt(e.Wa,4)),S(Gt(t,4)))),mt("pasp",e)}function Ca(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(S(Gt(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Ho(e,t){var n=mt;t=new Uint8Array([].concat(S(Gt(lv(t.split(".")[0]),4)))),t=mt("frma",t);var s="cenc",u=e.drmInfos[0];u&&u.encryptionScheme&&(s=u.encryptionScheme),s=new Uint8Array([0,0,0,0].concat(S(Gt(lv(s),4)),[0,1,0,0])),s=mt("schm",s),u=mt;var l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.drmInfos);for(var d=e.next();!d.done;d=e.next())if((d=d.value)&&d.keyIds&&d.keyIds.size){d=m(d.keyIds);for(var p=d.next();!p.done;p=d.next())l=av(p.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),l=mt("tenc",e,l),n("sinf",t,s,u("schi",l))}function ba(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var s=t.push,u=s.apply,l=mt,d=new Uint8Array([0,0,0,0].concat(S(Gt(n.data?n.data.Ub:0,4))));d=mt("mfhd",d);var p,g=n.data?n.data.yb:[],v=new Uint8Array(4+g.length);for(p=0;p<g.length;p++){var T=g[p].flags;v[p+4]=T.ib<<4|T.kb<<2|T.jb}g=mt("sdtp",v);var b=g.length+92;v=mt,p=new Uint8Array([0,0,0,58].concat(S(Gt(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),p=mt("tfhd",p),T=n.data?n.data.baseMediaDecodeTime:0;var M=Math.floor(T%(ro+1));T=new Uint8Array([1,0,0,0].concat(S(Gt(Math.floor(T/(ro+1)),4)),S(Gt(M,4)))),T=mt("tfdt",T);var _=b;b=n.data?n.data.yb:[],M=b.length;var L=12+16*M,O=new Uint8Array(L);for(_+=8+L,O.set([n.type==="video"?1:0,0,15,1].concat(S(Gt(M,4)),S(Gt(_,4))),0),_=0;_<M;_++){var P=b[_];L=Gt(P.duration,4);var U=Gt(P.size,4),B=P.flags;P=Gt(P.rb,4),O.set([].concat(S(L),S(U),[B.wb<<2|B.ib,B.kb<<6|B.jb<<4|B.xb,B.hb&61440,B.hb&15],S(P)),12+16*_)}b=mt("trun",O),g=v("traf",p,T,b,g),l=l("moof",d,g),u.call(s,t,[l,Ub(n)])}return Zt.apply(In,S(t))}function Ub(e){return e=(e.data?e.data.yb:[]).map(function(t){return t.data}),e=Zt.apply(In,S(e)),mt("mdat",e)}function Gt(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function av(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function lv(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<8*(e.length-n-1);return t}function mt(e){var t=lt.apply(1,arguments),n=fv.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],fv.set(e,n));for(var s=8,u=t.length-1;0<=u;u--)s+=t[u].byteLength;for(u=new Uint8Array(s),u[0]=s>>24&255,u[1]=s>>16&255,u[2]=s>>8&255,u[3]=s&255,u.set(n,4),n=0,s=8;n<t.length;n++)u.set(t[n],s),s+=t[n].byteLength;return u}var ro=Math.pow(2,32)-1,fv=new Map,Bb=new je(function(){return new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0])}),Fb=new je(function(){return new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),jb=new je(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),$b=new je(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),zb=new je(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Vb=new je(function(){return new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])}),Hb=new je(function(){return new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}),Gb=new je(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Xb=new je(function(){return new Uint8Array([0,0,0,0,0,0,0,1])}),Wb=new je(function(){var e=new Uint8Array([105,115,111,109]),t=new Uint8Array([97,118,99,49]),n=new Uint8Array([0,0,0,1]);return mt("ftyp",e,n,e,t)}),cv=new je(function(){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);return e=mt("dref",e),mt("dinf",e)});function Kb(e){e=Ze(e);var t=null;return new Lt().box("moov",ot).box("trak",ot).box("mdia",ot).box("minf",ot).box("stbl",ot).R("stsd",Rr).box("enca",function(n){return t=n.reader.h,Lf(n)}).box("sinf",ot).box("frma",function(n){n.parser.stop(),wp(n.reader).codec==="ec-3"&&t&&t.getUint16(16)!==2&&t.setUint16(16,2)}).parse(e),e}function Yb(e,t,n){function s(_){b.push({box:_,oi:1701733217})}function u(_){b.push({box:_,oi:1701733238})}function l(_){g=!0,_.parser.stop()}function d(_){T.push(_),ot(_)}var p=t=Ze(t),g=!1,v,T=[],b=[];if(new Lt().box("moov",d).box("trak",d).box("mdia",d).box("minf",d).box("stbl",d).R("stsd",function(_){v=_,T.push(_),Rr(_)}).R("encv",l).R("enca",l).R("dvav",u).R("dva1",u).R("dvh1",u).R("dvhe",u).R("dvc1",u).R("dvi1",u).R("hev1",u).R("hvc1",u).R("avc1",u).R("avc3",u).R("ac-3",s).R("ec-3",s).R("ac-4",s).R("Opus",s).R("fLaC",s).R("mp4a",s).parse(t),g)return t;if(b.length==0||!v)throw Sr(t),new q(2,3,3019,n);b.reverse(),n=m(b);for(var M=n.next();!M.done;M=n.next())M=M.value,p=Jb(e,p,v,M.box,T,M.oi);return Be().Ai()?(e=new Uint8Array(t.byteLength+p.byteLength),e.set(p),e.set(t,p.byteLength),e):p}function qb(e){e=Ze(e);var t=[];new Lt().box("mdat",function(d){t.push(d)}).parse(e);for(var n=[],s=0;s<t.length;s++){var u=t[s-1],l=t[s];n.push(Qb(e.subarray(u?u.start+u.size:0,l.start+l.size)))}return Zt.apply(In,S(n))}function Qb(e){function t(b){d.push(b),ot(b)}var n,s,u,l,d=[];if(new Lt().box("moof",t).box("traf",t).R("tfhd",function(b){n=b,u=Bf(b.reader,b.flags)}).R("trun",function(b){s=b,l=$f(b.reader,b.version,b.flags)}).parse(e),u&&u.Fi!==2){var p=n.start+io(n)+4+(u.gj!==null?8:0),g=Yn(e);if(u.Fi!==null)g.setUint32(p,2);else{zf(e,n.start,n.size+4);var v=g.getUint32(n.start+8);g.setUint32(n.start+8,v|2),l&&l.mg!==null&&g.setInt32(s.start+io(s)+4,l.mg+4),v=e.subarray(0,p),g=e.subarray(p),e=new Uint8Array(e.byteLength+4),e.set(v),v=[];for(var T=3;0<=T;T--)v.push(2>>8*T&255);for(e.set(new Uint8Array(v),p),e.set(g,p+4),p=m(d),g=p.next();!g.done;g=p.next())g=g.value,zf(e,g.start,g.size+4)}}return e}function Jb(e,t,n,s,u,l){var d=Ho(e,s.name),p=t.subarray(s.start,s.start+s.size);for(e=new Uint8Array(s.size+d.byteLength),e.set(p,0),Yn(e).setUint32(4,l),e.set(d,s.size),zf(e,0,e.byteLength),l=new Uint8Array(t.byteLength+e.byteLength),s=Be().$e()?s.start:s.start+s.size,d=t.subarray(s),l.set(t.subarray(0,s)),l.set(e,s),l.set(d,s+e.byteLength),t=m(u),u=t.next();!u.done;u=t.next())u=u.value,zf(l,u.start,u.size+e.byteLength);return e=Yn(l,n.start),n=io(n),t=e.getUint32(n),e.setUint32(n,t+1),l}function zf(e,t,n){e=Yn(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}function Zb(e){function t(u){s.push({start:u.start,size:u.size}),ot(u)}var n=Ze(e),s=[];return new Lt().box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(u){s.push({start:u.start,size:u.size});for(var l=Yn(n,u.start),d=0;d<u.size-3;d++){var p=l.getUint32(d);p==1633889587?l.setUint32(d,1700998451):p==1684103987&&l.setUint32(d,1684366131)}}).parse(n),n}function Jn(e,t,n,s,u,l,d,p){this.O=e,this.startByte=t,this.endByte=n,this.rd=s===void 0?null:s,this.timescale=u===void 0?null:u,this.h=l===void 0?null:l,this.aesKey=d===void 0?null:d,this.g=this.mimeType=this.codecs=null,this.encrypted=p===void 0?!1:p}Jn.prototype.Bc=function(){return this.startByte},Jn.prototype.zc=function(){return this.endByte},Jn.prototype.ge=function(e){this.h=e},Jn.prototype.Yb=function(){return this.h};function ka(e,t){return e===t?!0:e&&t?e.Bc()==t.Bc()&&e.zc()==t.zc()&&na(e.O().sort(),t.O().sort())&&xr(e.Yb(),t.Yb()):e==t}be("shaka.media.InitSegmentReference",Jn),Jn.prototype.getEndByte=Jn.prototype.zc,Jn.prototype.getStartByte=Jn.prototype.Bc;function He(e,t,n,s,u,l,d,p,g,v,T,b,M,_,L,O){for(v=v===void 0?[]:v,_=_===void 0?_r:_,this.startTime=e,this.j=this.endTime=t,this.C=n,this.startByte=s,this.endByte=u,this.Y=l,this.timestampOffset=d,this.appendWindowStart=p,this.appendWindowEnd=g,this.g=v,this.tilesLayout=T===void 0?"":T,this.B=b===void 0?null:b,this.h=M===void 0?null:M,this.status=_,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=L===void 0?null:L,this.thumbnailSprite=null,this.i=-1,this.A=O===void 0?!1:O,this.F=this.o=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.ki();this.A&&this.g.length&&this.g[this.g.length-1].ji(),this.s=this.bandwidth=this.mimeType=this.codecs=null,this.G=!1}y=He.prototype,y.O=function(){return this.C()},y.getStartTime=function(){return this.startTime},y.zj=function(){return this.endTime},y.Bc=function(){return this.startByte},y.zc=function(){return this.endByte},y.Vj=function(){return this.tilesLayout},y.Uj=function(){return this.B},y.Cc=function(){return this.status},y.qk=function(){this.status=hv},y.Pg=function(){this.preload=!0},y.isPreload=function(){return this.preload},y.qd=function(){this.l=!1},y.fk=function(){return this.l},y.ki=function(){this.o=!0},y.hk=function(){return this.o},y.ji=function(){this.F=!0},y.gk=function(){return this.F},y.ii=function(){this.m=!0},y.bk=function(){return this.m},y.Hf=function(e){this.thumbnailSprite=e},y.Sj=function(){return this.thumbnailSprite},y.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},y.vh=function(e){this.h==null?En("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},y.ge=function(e,t){this.s=e,this.G=t===void 0?!1:t},y.Yb=function(e){var t=this.s;return(e===void 0||e)&&this.G&&(this.s=null),t};function dv(e,t){e.Y=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())dv(n.value,t)}be("shaka.media.SegmentReference",He),He.prototype.getSegmentData=He.prototype.Yb,He.prototype.setSegmentData=He.prototype.ge,He.prototype.syncAgainst=He.prototype.vh,He.prototype.offset=He.prototype.offset,He.prototype.getThumbnailSprite=He.prototype.Sj,He.prototype.setThumbnailSprite=He.prototype.Hf,He.prototype.hasByterangeOptimization=He.prototype.bk,He.prototype.markAsByterangeOptimization=He.prototype.ii,He.prototype.isLastPartial=He.prototype.gk,He.prototype.markAsLastPartial=He.prototype.ji,He.prototype.isPartial=He.prototype.hk,He.prototype.markAsPartial=He.prototype.ki,He.prototype.isIndependent=He.prototype.fk,He.prototype.markAsNonIndependent=He.prototype.qd,He.prototype.isPreload=He.prototype.isPreload,He.prototype.markAsPreload=He.prototype.Pg,He.prototype.markAsUnavailable=He.prototype.qk,He.prototype.getStatus=He.prototype.Cc,He.prototype.getTileDuration=He.prototype.Uj,He.prototype.getTilesLayout=He.prototype.Vj,He.prototype.getEndByte=He.prototype.zc,He.prototype.getStartByte=He.prototype.Bc,He.prototype.getEndTime=He.prototype.zj,He.prototype.getStartTime=He.prototype.getStartTime,He.prototype.getUris=He.prototype.O;var _r=0,hv=1;He.Status={il:_r,rm:hv,Ql:2};function Aa(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function pv(e){return!e||Aa(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null}function Vf(e){return!e||Aa(e)?null:e.length?e.end(e.length-1):null}function Sp(e,t){return!e||!e.length||Aa(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function gv(e,t){if(!e||!e.length||Aa(e))return 0;var n=0;e=m(Lr(e));for(var s=e.next();!s.done;s=e.next()){var u=s.value;s=u.start,u=u.end,u>t&&(n+=u-Math.max(s,t))}return n}function ek(e,t,n){return!e||!e.length||Aa(e)?null:(e=Lr(e).findIndex(function(s,u,l){return s.start>t&&(u==0||l[u-1].end-t<=n)}),0<=e?e:null)}function Lr(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Tp(){}function mv(e,t){var n=document.createElement("source");return n.src=e,n.type=t===void 0?"":t,n}function Hf(e){for(var t=!1,n=e.getElementsByTagName("source"),s=n.length-1;0<=s;--s)e.removeChild(n[s]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function Ea(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Go(){return Bs||(Cp||(Cp=new ht(function(){Bs=null})),(Bs=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Bs=document.createElement("video")),Cp.ia(1),Bs)}function tk(e,t){var n,s,u,l,d;return j(function(p){if(p.g==1)return"fonts"in document&&"FontFace"in f?D(p,document.fonts.ready,2):p.return();if(!("entries"in document.fonts))return p.return();for(n=function(g){g=g.entries();for(var v=[],T=g.next();T.done===!1;)v.push(T.value),T=g.next();return v},s=m(n(document.fonts)),u=s.next();!u.done;u=s.next())if(l=u.value,l.family===e&&l.display==="swap")return p.return();d=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(d),ne(p)})}be("shaka.util.Dom",Tp),Tp.removeAllChildren=Ea,Tp.clearSourceFromVideo=Hf;var Cp=null,Bs=null;/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function bp(){}function yv(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function vv(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function kp(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function nk(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var s=Ht(Ze(e.data,1,n)),u=e.data[2+n],l=e.data.subarray(3+n).indexOf(0);if(l===-1)return null;var d=Ht(Ze(e.data,3+n,l)),p;return s==="-->"?p=Ht(Ze(e.data,4+n+l)):p=Ei(e.data.subarray(4+n+l)),t.mimeType=s,t.pictureType=u,t.description=d,t.data=p,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(s=e.data.subarray(1).indexOf(0),s===-1)?null:(n=Ht(Ze(e.data,1,s)),e=Ht(Ze(e.data,2+s)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(s=e.data.subarray(1).indexOf(0),s===-1)?null:(n=Ht(Ze(e.data,1,s)),e=Ht(Ze(e.data,2+s)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=Ht(Ze(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=Ei(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Ht(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Ht(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ei(e.data),t):null}function Xo(e){for(var t=0,n=[];yv(e,t);){var s=kp(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,s=t+s;t+10<s;){var u=e.subarray(t),l=kp(u,4);u={type:String.fromCharCode(u[0],u[1],u[2],u[3]),size:l,data:u.subarray(10,10+l)},(l=nk(u))&&n.push(l),t+=u.size+10}vv(e,t)&&(t+=10)}return n}function Fs(e,t){for(var n=t=t===void 0?0:t,s=0;yv(e,t);)e[t+5]>>6&1&&(s+=10),s+=10,s+=kp(e,t+6),vv(e,t+10)&&(s+=10),t+=s;return 0<s?e.subarray(n,n+s):new Uint8Array([])}be("shaka.util.Id3Utils",bp),bp.getID3Data=Fs,bp.getID3Frames=Xo;function xv(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function Dr(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,s=0;s<e.byteLength;s++)2<=s&&e[s]==3&&e[s-1]==0&&e[s-2]==0||(t[n]=e[s],n++);this.j=Ze(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Ap(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),s=Math.min(4,e.i);s!==0&&(n.set(e.j.subarray(t,t+s)),e.h=new Ft(n,0).T(),e.g=8*s,e.i-=s)}function li(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Ap(e)}e.h<<=t,e.g-=t}function gt(e,t){var n=Math.min(e.g,t),s=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Ap(e),n=t-n,0<n?s<<n|gt(e,n):s}function Ep(e){var t;for(t=0;t<e.g;++t)if((e.h&2147483648>>>t)!==0)return e.h<<=t,e.g-=t,t;return Ap(e),t+Ep(e)}function Zn(e){li(e,1+Ep(e))}function _e(e){var t=Ep(e);return gt(e,t+1)-1}function js(e){return e=_e(e),1&e?1+e>>>1:-1*(e>>>1)}function ze(e){return gt(e,1)===1}function bt(e){return gt(e,8)}function Gf(e,t){for(var n=8,s=8,u=0;u<t;u++)s!==0&&(s=js(e),s=(n+s+256)%256),n=s===0?n:s}function ik(e){return bt(e),_e(e),_e(e)}be("shaka.util.ExpGolomb",Dr);function Ut(){this.H=null,this.I=!1,this.m=this.K=null,this.j=[],this.g=[],this.B=this.C=null,this.i=[],this.h=[],this.F=null,this.l=[],this.A=this.G=this.o=this.s=null}y=Ut.prototype,y.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},y.Ff=function(e){this.A!=null&&this.A!=e&&(this.o=this.s=null),this.A=e},y.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Mp(e)),n=e.length-(e.length+t)%188,s=!1,u=t;u<n;u+=188)if(e[u]==71){var l=!!(e[u+1]&64),d=((e[u+1]&31)<<8)+e[u+2];if(1<(e[u+3]&48)>>4){var p=u+5+e[u+4];if(p==u+188)continue}else p=u+4;switch(d){case 0:l&&(p+=e[p]+1),this.H=(e[p+10]&31)<<8|e[p+11];break;case 17:case 8191:break;case this.H:l&&(p+=e[p]+1),l=e,d={audio:-1,video:-1,Ye:-1,audioCodec:"",videoCodec:""};var g=p+3+((l[p+1]&15)<<8|l[p+2])-4;for(p+=12+((l[p+10]&15)<<8|l[p+11]);p<g;){var v=(l[p+1]&31)<<8|l[p+2],T=(l[p+3]&15)<<8|l[p+4];switch(l[p]){case 6:if(0<T)for(var b=p+5,M=T;2<M;){var _=l[b+1]+2;switch(l[b]){case 5:var L=jh(l.subarray(b+2,b+_));d.audio==-1&&L==="Opus"?(d.audio=v,d.audioCodec="opus"):d.video==-1&&L==="AV01"&&(d.video=v,d.videoCodec="av1");break;case 106:d.audio==-1&&(d.audio=v,d.audioCodec="ac3");break;case 122:d.audio==-1&&(d.audio=v,d.audioCodec="ec3");break;case 124:d.audio==-1&&(d.audio=v,d.audioCodec="aac");break;case 127:d.audioCodec=="opus"&&(L=null,l[b+2]===128&&(L=l[b+3]),L!=null&&(this.G={channelCount:(L&15)===0?2:L&15,jj:L,sampleRate:48e3}))}b+=_,M-=_}break;case 15:d.audio==-1&&(d.audio=v,d.audioCodec="aac");break;case 17:d.audio==-1&&(d.audio=v,d.audioCodec="aac-loas");break;case 21:d.Ye==-1&&(d.Ye=v);break;case 27:d.video==-1&&(d.video=v,d.videoCodec="avc");break;case 3:case 4:d.audio==-1&&(d.audio=v,d.audioCodec="mp3");break;case 36:d.video==-1&&(d.video=v,d.videoCodec="hvc");break;case 129:d.audio==-1&&(d.audio=v,d.audioCodec="ac3");break;case 132:case 135:d.audio==-1&&(d.audio=v,d.audioCodec="ec3")}p+=T+5}l=d,l.video!=-1&&(this.K=l.video,this.m=l.videoCodec),l.audio!=-1&&(this.C=l.audio,this.B=l.audioCodec),l.Ye!=-1&&(this.F=l.Ye),s&&!this.I&&(s=!1,u=t-188),this.I=!0;break;case this.K:p=e.subarray(p,u+188),l?this.j.push([p]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(p);break;case this.C:p=e.subarray(p,u+188),l?this.i.push([p]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(p);break;case this.F:p=e.subarray(p,u+188),l?this.l.push([p]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(p);break;default:s=!0}}return this};function Ip(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var s=t[7];if(s&192){var u=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=u),n.pts=Sv(u,e.s),e.s=n.pts,n.dts=n.pts,s&64&&(s=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=s),n.dts=n.pts!=u?Sv(s,e.o):s),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}y.zk=function(e){return st("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Vg(e,{Zd:null,state:null})},y.Vg=function(e,t){var n=e.pts?e.pts/9e4:null;e=e.data;var s=e.byteLength,u=1;this.m=="hvc"&&(u=2);var l=t.state||0,d=l,p=0,g=[],v=-1,T=0;for(l==-1&&(v=0,T=this.m=="hvc"?e[0]>>1&63:e[0]&31,l=0,p=1);p<s;){var b=e[p++];l?l===1?l=b?0:2:b?b==1?(b=p-l-1,0<=v?g.push({data:e.subarray(v+u,b),fullData:e.subarray(v,b),type:T,time:n,state:null}):(l=g.length?g[g.length-1]:t.Zd)&&(d&&p<=4-d&&l.state&&(l.data=l.data.subarray(0,l.data.byteLength-d),l.fullData=l.fullData.subarray(0,l.fullData.byteLength-d)),0<b&&(b=e.subarray(0,b),l.data=Zt(l.data,b),l.fullData=Zt(l.fullData,b),l.state=0)),p<s?(T=this.m=="hvc"?e[p]>>1&63:e[p]&31,v=p,l=0):l=-1):l=0:l=3:l=b?0:1}return 0<=v&&0<=l&&g.push({data:e.subarray(v+u,s),fullData:e.subarray(v,s),type:T,time:n,state:l}),!g.length&&t.Zd&&(n=g.length?g[g.length-1]:t.Zd)&&(n.data=Zt(n.data,e),n.fullData=Zt(n.fullData,e)),t.state=l,g},y.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=Zt.apply(In,S(n.value)),(n=Ip(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Xo(n.data),dts:n.dts,pts:n.pts});return e},y.sb=function(){if(this.i.length&&!this.h.length)for(var e=m(this.i),t=e.next();!t.done;t=e.next()){var n=Zt.apply(In,S(t.value)),s=Ip(this,n);t=this.h.length?this.h[this.h.length-1]:null,s&&s.pts!=null&&s.dts!=null&&(!t||t.pts!=s.pts&&t.dts!=s.dts)?this.h.push(s):this.h.length&&(n=s?s.data:n)&&(t=this.h.pop(),t.data=Zt(t.data,n),this.h.push(t))}return this.h},y.Rc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=m(this.j),n=t.next();!n.done;n=t.next()){var s=Zt.apply(In,S(n.value)),u=Ip(this,s);n=this.g.length?this.g[this.g.length-1]:null,u&&u.pts!=null&&u.dts!=null&&(!n||n.pts!=u.pts&&n.dts!=u.dts)?this.g.push(u):this.g.length&&(s=u?u.data:s)&&(n=this.g.pop(),n.data=Zt(n.data,s),this.g.push(n))}if(e){for(t={Zd:null,state:null},n=[],s=m(this.g),u=s.next();!u.done;u=s.next())u=u.value,u.nalus=this.Vg(u,t),u.nalus.length&&(n.push(u),t.Zd=u.nalus[u.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},y.getStartTime=function(e){if(e=="audio"){e=null;var t=this.sb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.Rc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},y.Od=function(){return{audio:this.B,video:this.m}},y.Xe=function(){for(var e=[],t=m(this.Rc()),n=t.next();!n.done;n=t.next())e.push.apply(e,S(n.value.nalus));return e},y.Yj=function(){st("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Ig();return{height:e.height,width:e.width}},y.Ig=function(){return this.m=="hvc"?ok(this):rk(this)};function wv(e){var t=e.Rc();return 1<t.length&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function rk(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Xe();if(!n.length||(n=n.find(function(_){return _.type==7}),!n))return t;n=new Dr(n.data);var s=bt(n),u=bt(n),l=bt(n);if(Zn(n),sk.includes(s)){var d=_e(n);if(d===3&&li(n,1),Zn(n),Zn(n),li(n,1),ze(n)){d=d!==3?8:12;for(var p=0;p<d;p++)ze(n)&&(6>p?Gf(n,16):Gf(n,64))}}if(Zn(n),d=_e(n),d===0)_e(n);else if(d===1)for(li(n,1),Zn(n),Zn(n),d=_e(n),p=0;p<d;p++)Zn(n);Zn(n),li(n,1),d=_e(n),p=_e(n);var g=gt(n,1);g===0&&li(n,1),li(n,1);var v=0,T=0,b=0,M=0;return ze(n)&&(v=_e(n),T=_e(n),b=_e(n),M=_e(n)),t.height=String((2-g)*(p+1)*16-2*b-2*M),t.width=String(16*(d+1)-2*v-2*T),t.codec="avc1."+("0"+s.toString(16).toUpperCase()).slice(-2)+("0"+u.toString(16).toUpperCase()).slice(-2)+("0"+l.toString(16).toUpperCase()).slice(-2),t.frameRate=wv(e),t}function ok(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.Xe();if(!n.length||(n=n.find(function(J){return J.type==33}),!n))return t;var s=new Dr(n.fullData,!0);bt(s),bt(s),gt(s,4);var u=gt(s,3);ze(s);var l=gt(s,2),d=gt(s,1),p=gt(s,5),g=gt(s,32);n=bt(s);for(var v=bt(s),T=bt(s),b=bt(s),M=bt(s),_=bt(s),L=bt(s),O=[],P=[],U=0;U<u;U++)O.push(ze(s)),P.push(ze(s));if(0<u)for(U=u;8>U;U++)gt(s,2);for(U=0;U<u;U++)O[U]&&gt(s,88),P[U]&&bt(s);_e(s),u=_e(s),u==3&&gt(s,1),O=_e(s),P=_e(s);var B=U=0,$=0,W=0;return ze(s)&&(U+=_e(s),B+=_e(s),$+=_e(s),W+=_e(s)),t.width=String(O-(U+B)*(u===1||u===2?2:1)),t.height=String(P-($+W)*(u===1?2:1)),s=function(J){for(var G=0,X=0;32>X;X++)G|=(J>>X&1)<<31-X;return G>>>0}(g),d=d==1?"H":"L",l="hvc1"+("."+["","A","B","C"][l]+p),l+="."+s.toString(16).toUpperCase(),l+="."+d+L,_&&(l+="."+_.toString(16).toUpperCase()),M&&(l+="."+M.toString(16).toUpperCase()),b&&(l+="."+b.toString(16).toUpperCase()),T&&(l+="."+T.toString(16).toUpperCase()),v&&(l+="."+v.toString(16).toUpperCase()),n&&(l+="."+n.toString(16).toUpperCase()),t.codec=l,t.frameRate=wv(e),t}function Sv(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function $s(e){return!(0>Mp(e))}function Mp(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}be("shaka.util.TsParser",Ut),Ut.syncOffset=Mp,Ut.probe=$s,Ut.prototype.getVideoInfo=Ut.prototype.Ig,Ut.prototype.getVideoResolution=Ut.prototype.Yj,Ut.prototype.getVideoNalus=Ut.prototype.Xe,Ut.prototype.getCodecs=Ut.prototype.Od,Ut.prototype.getStartTime=Ut.prototype.getStartTime,Ut.prototype.getVideoData=Ut.prototype.Rc,Ut.prototype.getAudioData=Ut.prototype.sb,Ut.prototype.getMetadata=Ut.prototype.getMetadata,Ut.prototype.parseNalus=Ut.prototype.Vg,Ut.prototype.parseAvcNalus=Ut.prototype.zk,Ut.prototype.parse=Ut.prototype.parse,Ut.prototype.setDiscontinuitySequence=Ut.prototype.Ff,Ut.prototype.clearData=Ut.prototype.clearData,Ut.Timescale=9e4;var sk=[100,110,122,244,44,83,86,118,128,138,139,134];function Tv(e,t,n,s,u){var l=this;this.g=e,this.N=n,this.A=s,this.ha=t,this.l=new Map,this.C=new Map,this.Oa=new Map,this.h=null,this.Ka=!1,this.M=u||null,this.o=new Map,this.s=new Ee,this.j=new Map,this.I=null,this.K=new _t,this.za="",this.eb=!1,this.ya=!0,this.L=!1,this.B=this.P=null,this.i=Rp(this,this.K),this.Ya=this.F=!1,this.H=new _s(function(){return lk(l)}),this.G=!1,this.W="UNKNOWN",this.Za=this.ab=!1,this.Pa=new _t,this.m=!1,this.wa=null,this.ba=new Map,this.na=this.S=this.va=this.U=null,this.ka=new _t,this.g.remote&&(this.L=this.g.remote.state!="disconnected",this.s.D(this.g.remote,"connect",function(){l.L=l.g.remote.state!="disconnected"}),this.s.D(this.g.remote,"connecting",function(){l.L=l.g.remote.state!="disconnected"}),this.s.D(this.g.remote,"disconnect",function(){l.L=l.g.remote.state!="disconnected"}))}function Rp(e,t){if(e.ya=!0,f.ManagedMediaSource){e.B||(e.g.disableRemotePlayback=!0);var n=new ManagedMediaSource;e.s.D(n,"startstreaming",function(){e.ya=!0}),e.s.D(n,"endstreaming",function(){e.ya=!1})}else n=new MediaSource;return e.s.Aa(n,"sourceopen",function(){URL.revokeObjectURL(e.za),t.resolve()}),e.s.Aa(e.g,"playing",function(){e.eb=!0}),e.za=Pp(n),e.A.useSourceElements?(e.g.removeAttribute("src"),e.P&&e.g.removeChild(e.P),e.B&&e.g.removeChild(e.B),e.P=mv(e.za),e.g.appendChild(e.P),e.B&&e.g.appendChild(e.B),e.g.load()):e.g.src=e.za,n}function uk(e,t,n){e.g&&f.ManagedMediaSource&&e.i&&e.A.useSourceElements&&(e.B&&e.g.removeChild(e.B),e.B=mv(t,n),e.g.appendChild(e.B),e.g.disableRemotePlayback=!1)}function ak(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(S(to)),t={};Be(),e=m(e);for(var n=e.next();!n.done;n=e.next()){n=n.value,ca(n)?t[n]=!0:t[n]=gr()?On(n)||!!ks(n):Go().canPlayType(n)!="";var s=n.split(";")[0];t[s]=t[s]||t[n]}return t}y=Tv.prototype,y.destroy=function(){return this.H.destroy()};function lk(e){var t,n,s,u,l,d,p,g,v,T,b,M,_,L,O;return j(function(P){if(P.g==1){for(t=[],n=m(e.o),s=n.next();!s.done;s=n.next())for(u=s.value,l=m(u),d=l.next().value,p=l.next().value,g=p[0],v=d,e.o.set(v,p.slice(0,1)),g&&t.push(g.p.catch(Y4)),T=m(p.slice(1)),b=T.next();!b.done;b=T.next())M=b.value,M.p.reject(new q(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),D(P,Promise.all(t),2)}for(_=m(e.j.values()),L=_.next();!L.done;L=_.next())O=L.value,O.destroy();e.s&&(e.s.release(),e.s=null),e.g&&e.B&&e.g.removeChild(e.B),e.g&&e.P&&(e.g.removeChild(e.P),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.P=null,e.B=null,e.A=null,e.i=null,e.h=null,e.ha=null,e.l.clear(),e.Oa.clear(),e.j.clear(),e.I=null,e.o.clear(),e.M=null,e.ba.clear(),e.N=null,ne(P)})}y.init=function(e,t,n,s){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,s=s===void 0?!1:s;var u=this,l,d,p,g,v,T;return j(function(b){if(b.g==1)return l=vn,D(b,u.K,2);if(b.g!=3)return!Wo(u)&&!zs(u)?b.u(3):(En("Expected MediaSource to be open during init(); reopening the media source."),u.K=new _t,u.i=Rp(u,u.K),D(b,u.K,3));for(u.G=t,u.W=n,u.ab=s,u.Za=!u.G&&u.W=="HLS"&&!u.ab,u.ba.clear(),u.U=null,u.va=null,u.S=null,u.na=null,u.ka=new _t,d=m(e.keys()),p=d.next();!p.done;p=d.next())g=p.value,v=e.get(g),Xf(u,g,v,v.codecs),u.m?(u.o.set(l.ea,[]),u.o.set(l.Ca,[])):u.o.set(g,[]);(T=e.get(l.ea))&&T.isAudioMuxedInVideo&&(u.m=!0),ne(b)})};function Xf(e,t,n,s){t=="audio"&&s&&(s=wf(s,n.mimeType));var u=rn(n.mimeType,s);if(t==ct)Wf(e,u,e.G,n.external);else{var l=e.A.forceTransmux;(!On(u)||!e.G&&to.includes(u))&&(l=!0);var d=gf(n.mimeType,s);if(l){if(l=Qn("audio",(s||"").split(",")),s=Qn("video",(s||"").split(",")),l&&s){e.m=!0,Xf(e,"audio",n,l),Xf(e,"video",n,s);return}(s=ks(d))&&(u=s(),e.j.set(t,u),u=u.convertCodecs(t,d))}d=u+e.A.addExtraFeaturesToSourceBuffer(u),Nt(e.H);try{var p=e.i.addSourceBuffer(d)}catch(g){throw new q(2,3,3015,g,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.G&&(p.mode=Tk),e.s.D(p,"error",function(){var g=e.o.get(t)[0];g.p.reject(new q(2,3,3014,e.g.error?e.g.error.code:0,g.uri))}),e.s.D(p,"updateend",function(){return oo(e,t)}),e.l.set(t,p),e.C.set(t,u),e.Oa.set(t,!!n.drmInfos.length)}}y.configure=function(e){this.A=e,this.h&&(this.h.A=e.modifyCueCallback)};function Cv(e){return e.ya&&!e.L&&!e.F}function Wf(e,t,n,s){e.h||(e.h=new Er(e.ha),e.h&&(e.h.A=e.A.modifyCueCallback));var u=e.h;s=s||e.Ka,e=e.W,t=="application/cea-608"||t=="application/cea-708"?u.i=null:(u.i=da.get(t)(),u.i.setSequenceMode?u.i.setSequenceMode(n):st("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),u.i.setManifestType?u.i.setManifestType(e):st("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),u.B=s)}function Wo(e){return e.F?!1:e.i?e.i.readyState=="ended":!0}function zs(e){return e.F?!1:e.i?e.i.readyState=="closed":!0}function _p(e,t){return e.l.size?t==ct?e.h.g:pv(Hs(e,t)):null}function Vs(e,t){return e.l.size?t==ct?e.h.h:Vf(Hs(e,t)):null}function fk(e,t,n){return t==ct?(e=e.h,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Hs(e,t),gv(e,n))}y.Vb=function(){var e={total:this.F?[]:Lr(this.g.buffered),audio:Lr(Hs(this,"audio")),video:Lr(Hs(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Hs(e,t){if(e.F||e.L)return null;try{return e.l.get(t).buffered}catch{return e.l.has(t),null}}function ck(e,t,n,s,u,l){var d=null,p=[],g=Ze(n);if(to.includes(l))t=Xo(g),t.length&&s&&((n=t.find(function(_){return _.description==="com.apple.streaming.transportStreamTimestamp"}))&&typeof n.data=="number"&&(d=Math.round(n.data)/1e3),e.N.onMetadata([{cueTime:s.startTime,data:g,frames:t,dts:s.startTime,pts:s.startTime}],0,s.endTime));else if(l.includes("/mp4")&&s&&s.Y&&s.Y.timescale){var v=s.Y.timescale;if(!isNaN(v)){var T=u.emsgSchemeIdUris!=null&&0<u.emsgSchemeIdUris.length||e.A.dispatchAllEmsgBoxes,b=0,M=!1;g=new Lt,T&&g.R("emsg",function(_){var L=u.emsgSchemeIdUris;if(_.version===0)var O=_.reader.Vc(),P=_.reader.Vc(),U=_.reader.T(),B=_.reader.T(),$=_.reader.T(),W=_.reader.T(),J=s.startTime+B/U;else U=_.reader.T(),J=_.reader.yd()/U+s.timestampOffset,B=J-s.startTime,$=_.reader.T(),W=_.reader.T(),O=_.reader.Vc(),P=_.reader.Vc();_=_.reader.Tb(_.reader.getLength()-_.reader.Ma()),(L&&L.includes(O)||e.A.dispatchAllEmsgBoxes)&&(O=="urn:mpeg:dash:event:2012"?e.N.yk():(L=J+$/U,e.N.wk({startTime:J,endTime:L,schemeIdUri:O,value:P,timescale:U,presentationTimeDelta:B,eventDuration:$,id:W,messageData:_}),(O=="https://aomedia.org/emsg/ID3"||O=="https://developer.apple.com/streaming/emsg-id3")&&(U=Xo(_),U.length&&e.N.onMetadata([{cueTime:J,data:_,frames:U,dts:J,pts:J}],0,L))))}),g.R("prft",function(_){var L=_.reader,O=_.version;L.T(),_=L.T();var P=L.T();_=1e3*_+P/Math.pow(2,32)*1e3,O===0?L=L.T():(O=L.T(),L=L.T(),L=O*Math.pow(2,32)+L),_=xv(_),L=new Map().set("detail",{wallClockTime:_,programStartDate:new Date(_-L/v*1e3)}),L=new Ie("prft",L),e.N.onEvent(L)}).box("moof",ot).box("traf",ot).R("tfdt",function(_){M||(b=Ff(_.reader,_.version).baseMediaDecodeTime/v,M=!0,T||_.parser.stop())}).parse(n,!0),M&&s.timestampOffset==0&&(d=b)}}else l.includes("/mp4")||l.includes("/webm")||!$s(g)||(e.ba.has(t)||e.ba.set(t,new Ut),p=e.ba.get(t),p.clearData(),p.Ff(s.i),p.parse(g),g=p.getStartTime(t),g!=null&&(d=g),p=p.getMetadata());return{timestamp:d,metadata:p}}function Kf(e,t,n,s,u,l,d,p,g,v,T){d=d===void 0?!1:d,p=p===void 0?!1:p,g=g===void 0?!1:g,v=v===void 0?!1:v;var b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te;return j(function(Z){switch(Z.g){case 1:if(b=vn,t!=b.Ta){Z.u(2);break}if(e.W!="HLS"){Z.u(3);break}return D(Z,e.Pa,4);case 4:M=Z.h,e.h.s=M;case 3:return D(Z,G4(e.h,n,s?s.startTime:null,s?s.endTime:null,s?s.O()[0]:null),5);case 5:return Z.return();case 2:if(v||!e.m){Z.u(6);break}return D(Z,Kf(e,b.ea,n,s,u,l,d,p,g,!0),7);case 7:return D(Z,Kf(e,b.Ca,n,s,u,l,d,p,g,!0),8);case 8:return Z.return();case 6:if(!e.l.has(t))return Z.return();if(_=e.l.get(t).timestampOffset,L=e.C.get(t),e.j.has(t)&&(L=e.j.get(t).getOriginalMimeType()),s&&(O=ck(e,t,n,s,u,L),P=O.timestamp,U=O.metadata,P!=null&&(e.U==null&&t==b.Ca&&(e.U=P,e.va=s.startTime,e.S!=null&&(B=0,e.va==e.na&&(B=e.U-e.S),e.ka.resolve(B))),e.S==null&&t==b.ea&&(e.S=P,e.na=s.startTime,e.U!=null&&($=0,e.va==e.na&&($=e.U-e.S),e.ka.resolve($))),W=P,J=to,!e.G&&J.includes(e.C.get(t))&&(W=0),G=s.startTime-W,X=Math.abs(_-G),(.001<=X||d||p)&&(!g||0<G||!_)&&(_=G,e.Za&&(xn(e,t,function(){return Gs(e,t)},null),xn(e,t,function(){return Xs(e,t,_)},null))),(t==b.Ca||!e.l.has(b.Ca))&&e.Pa.resolve(_)),U.length)&&e.N.onMetadata(U,_,s?s.endTime:null),l&&t==b.Ca&&(e.h||Wf(e,"application/cea-608",e.G,!1),e.I||(Y=L.split(";",1)[0],e.I=new er(Y)),s?(Q=e.I.vf(n),Q.length&&W4(e.h,Q,s.startTime,s.endTime,_)):e.I.init(n,p,T)),!e.j.has(t)){Z.u(9);break}return D(Z,e.j.get(t).transmux(n,u,s,e.i.duration,t),10);case 10:n=Z.h;case 9:if(n=yk(e,u,n,s,t),!s||!e.G||t==b.Ta){Z.u(11);break}if(!d&&!p){Z.u(11);break}if(ie=s.startTime,e.W!="HLS"||e.m||t!=b.ea||!e.l.has(b.Ca)){Z.u(13);break}return D(Z,e.ka,14);case 14:te=Z.h,.15<Math.abs(te)&&(ie-=te);case 13:xn(e,t,function(){return Gs(e,t)},null),xn(e,t,function(){return Xs(e,t,ie)},null);case 11:return D(Z,xn(e,t,function(){var ve=n;e.M&&zh(e.M,ve,_,u),e.l.get(t).appendBuffer(ve)},s?s.O()[0]:null),15);case 15:ne(Z)}})}function dk(e,t){var n=Vs(e,"video")||0;a1(e.h,t,n)}function hk(e){e.h&&a1(e.h,"",0)}y.remove=function(e,t,n,s){var u=this,l;return j(function(d){return d.g==1?(l=vn,e==l.Ca&&u.I&&u.I.remove(s),e==l.Ta?D(d,u.h.remove(t,n),0):n>t?D(d,xn(u,e,function(){return Yf(u,e,t,n)},null),5):d.u(0)):u.m?D(d,xn(u,l.ea,function(){return Yf(u,l.ea,t,n)},null),0):d.u(0)})};function bv(e,t){var n;return j(function(s){return s.g==1?(n=vn,t==n.Ta?e.h?D(s,e.h.remove(0,1/0),0):s.return():D(s,xn(e,t,function(){return Yf(e,t,0,e.i.duration)},null),4)):e.m?D(s,xn(e,n.ea,function(){return Yf(e,n.ea,0,e.i.duration)},null),0):s.u(0)})}y.flush=function(e){var t=this,n;return j(function(s){return s.g==1?(n=vn,e==n.Ta?s.return():D(s,xn(t,e,function(){t.g.currentTime-=.001,oo(t,e)},null),2)):t.m?D(s,xn(t,n.ea,function(){var u=n.ea;t.g.currentTime-=.001,oo(t,u)},null),0):s.u(0)})};function kv(e,t,n,s,u,l,d,p,g){var v,T,b;return j(function(M){return M.g==1?(v=vn,t==v.Ta?(l||(e.h.s=n),X4(e.h,s,u),M.return()):(T=[],D(M,wk(e,t,d,p,g),2))):(b=M.h,b||(T.push(xn(e,t,function(){return Gs(e,t)},null)),e.m&&T.push(xn(e,v.ea,function(){return Gs(e,v.ea)},null))),l||(T.push(xn(e,t,function(){return Xs(e,t,n)},null)),e.m&&T.push(xn(e,v.ea,function(){return Xs(e,v.ea,n)},null))),(s!=0||u!=1/0)&&(T.push(xn(e,t,function(){return Av(e,t,s,u)},null)),e.m&&T.push(xn(e,v.ea,function(){return Av(e,v.ea,s,u)},null))),T.length?D(M,Promise.all(T),0):M.u(0))})}function pk(e,t,n){var s,u;return j(function(l){return l.g==1?(s=vn,t==s.Ta||(t==s.Ca&&(e.Pa=new _t),!e.G||(u=Vs(e,t))&&.15>Math.abs(u-n))?l.return():(xn(e,t,function(){return Gs(e,t)},null),e.m&&xn(e,s.ea,function(){return Gs(e,s.ea)},null),D(l,xn(e,t,function(){return Xs(e,t,n)},null),2))):e.m?D(l,xn(e,s.ea,function(){return Xs(e,s.ea,n)},null),0):l.u(0)})}y.endOfStream=function(e){var t=this;return j(function(n){return D(n,Ia(t,function(){Wo(t)||zs(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},y.pb=function(e){var t=this;return j(function(n){return D(n,Ia(t,function(){if(t.A.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var s=m(t.l.keys()),u=s.next();!u.done;u=s.next()){u=u.value;var l={start:function(){},p:new _t,uri:null};t.o.get(u).unshift(l)}t.i.duration=e,t.wa=e}),0)})},y.getDuration=function(){return this.i.duration};function gk(e,t,n){j(function(s){return e.H.g||e.g.error||e.L||e.F||Wo(e)||zs(e)?s.return():D(s,Ia(e,function(){Wo(e)||zs(e)||e.i.setLiveSeekableRange(t,n)}),0)})}function Lp(e){j(function(t){return e.H.g||e.g.error||e.L||e.F||Wo(e)||zs(e)?t.return():D(t,Ia(e,function(){Wo(e)||zs(e)||e.i.clearLiveSeekableRange()}),0)})}function Yf(e,t,n,s){s<=n?oo(e,t):e.l.get(t).remove(n,s)}function Gs(e,t){var n=e.l.get(t),s=n.appendWindowStart,u=n.appendWindowEnd;n.abort(),n.appendWindowStart=s,n.appendWindowEnd=u,oo(e,t)}function Xs(e,t,n){0>n&&(n+=.001),e.l.get(t).timestampOffset=n,oo(e,t)}function Av(e,t,n,s){var u=e.l.get(t);(u.appendWindowEnd!==s||u.appendWindowStart!==n)&&(u.appendWindowStart=0,u.appendWindowEnd=s,u.appendWindowStart=n),oo(e,t)}function oo(e,t){if(e.F||e.H.g){var n=e.o.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.o.set(t,[]))}else(n=e.o.get(t)[0])&&(n.p.resolve(),Dp(e,t))}function xn(e,t,n,s){return Nt(e.H),n={start:n,p:new _t,uri:s},e.o.get(t).push(n),e.o.get(t).length==1&&Ev(e,t),n.p}function Ia(e,t){var n,s,u,l,d,p,g,v,T,b,M,_,L;return j(function(O){switch(O.g){case 1:for(Nt(e.H),n=[],s=Array.from(e.l.keys()),u=m(s),l=u.next(),d={};!l.done;d={ready:void 0},l=u.next())p=l.value,d.ready=new _t,g={start:function(P){return function(){return P.ready.resolve()}}(d),p:d.ready,uri:null},v=e.o.get(p),v.push(g),n.push(d.ready),v.length==1&&g.start();return le(O,2),D(O,Promise.all(n),4);case 4:V(O,3);break;case 2:throw T=re(O),T;case 3:return le(O,5,6),D(O,t(),6);case 6:for(H(O),b=m(s),M=b.next();!M.done;M=b.next())_=M.value,Dp(e,_);z(O,0);break;case 5:throw L=re(O),new q(2,3,3015,L,e.g.error||"No error in the media element",null)}})}function Dp(e,t){e.o.get(t).shift(),Ev(e,t)}function Ev(e,t){var n=e.o.get(t)[0];if(n)try{n.start()}catch(s){s.name=="QuotaExceededError"?n.p.reject(new q(2,3,3017,t)):Cv(e)?n.p.reject(new q(2,3,3015,s,e.g.error||"No error in the media element",n.uri)):n.p.reject(new q(2,3,3024,t)),Dp(e,t)}}function mk(e,t){e.ha=t,e.h&&(e.h.j=t)}function yk(e,t,n,s,u){if(mf(e.C.get(u))!="mp4")return n;var l=s===null,d=e.Oa.get(u),p=e.N.Ej(),g=!1;s&&s.Y&&(g=s.Y.encrypted),s=s?s.O()[0]:null;var v=Be();return e.A.correctEc3Enca&&l&&u==="audio"&&(n=Kb(n)),e.A.insertFakeEncryptionInInit&&d&&v.fe(p,u)&&(l?n=Yb(t,n,s):!g&&v.Bi(u)&&(n=qb(n))),l&&v.ee()&&(n=Zb(n)),n}function vk(e,t,n,s){return xn(e,t,function(){if(t!==ct){if(e.C.get(t),xs()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),s&&e.j.set(t,s);var u=n+e.A.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(u),e.C.set(t,n)}oo(e,t)}},null)}function xk(e,t){var n,s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J;return j(function(G){if(G.g==1){if(e.F||e.L)return G.return();for(n=vn,e.F=!0,e.m=!1,s=e.g.currentTime,u=e.g.autoplay,e.g.paused||(e.Ya=!0),e.eb&&(e.g.autoplay=!1),me(G,2),e.s.Ra(),l=m(e.j.values()),d=l.next();!d.done;d=l.next())p=d.value,p.destroy();for(g=m(e.l.values()),v=g.next();!v.done;v=g.next()){T=v.value;try{e.i.removeSourceBuffer(T)}catch{}}return e.j.clear(),e.l.clear(),b=e.i.duration,e.K=new _t,e.i=Rp(e,e.K),D(G,e.K,4)}if(G.g!=2){for(!isNaN(b)&&b?e.i.duration=b:!isNaN(e.wa)&&e.wa&&(e.i.duration=e.wa),M=new _t,_=e.i.sourceBuffers,L=t.size,O=0,P=function(){O++,O===L&&(M.resolve(),e.s.Ja(_,"addsourcebuffer",P))},e.s.D(_,"addsourcebuffer",P),U=m(t.keys()),B=U.next();!B.done;B=U.next())$=B.value,W=t.get($),Xf(e,$,W,W.codecs);return(J=t.get(n.ea))&&J.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.o.has(n.ea)&&e.o.set(n.ea,[]),e.g.currentTime=s,D(G,M,2)}return H(G),e.F=!1,Nt(e.H),e.s.Aa(e.g,"canplaythrough",function(){e.H.g||(e.g.autoplay=u,e.Ya&&(e.Ya=!1,e.g.play()))}),z(G,0)})}function Iv(e,t){return Ia(e,function(){return xk(e,t)})}function Mv(e,t,n,s){var u=!1,l=Qn("audio",(s||"").split(",")),d=Qn("video",(s||"").split(",")),p=d;t=="audio"&&(p=l),p||(p=s),s=rn(n,p);var g=yi(e.C.get(t)),v=e.A.forceTransmux;if(!On(s)||!e.G&&to.includes(s)?v=!0:v||n==g||(v=Be().Da()==="WEBKIT"&&to.includes(n)),v&&(e=gf(n,p),n=ks(e))){var T=n();l&&d&&(u=!0),s=T.convertCodecs(t,e)}return t=Vn(Mi(s)),{ec:T,Xk:u,Jh:yi(s),codec:t,mimeType:s}}function Rv(e,t,n,s,u){if(t==ct)return{type:Op,nf:n,ec:null};var l=Vn(Mi(e.C.get(t))),d=yi(e.C.get(t)),p=Mv(e,t,n,s),g=p.ec,v=p.Xk,T=p.Jh,b=p.codec;p=p.mimeType;var M=!0;return v&&e.C.has("audio")&&(n=Mv(e,"audio",n,s),s=Vn(Mi(e.C.get("audio"))),M=yi(e.C.get("audio")),M=s==n.codec&&M==n.Jh,n.ec&&n.ec.destroy()),l===b&&d===T&&M?{type:Op,nf:p,ec:g}:(l=!0,(e.m&&!u.has("audio")||v&&g&&!e.j.has(t))&&(l=!1),l&&e.A.codecSwitchingStrategy==="smooth"&&xs()?{type:_v,nf:p,ec:g}:(g&&g.destroy(),{type:Np,nf:p,ec:null}))}function wk(e,t,n,s,u){var l,d,p,g,v,T;return j(function(b){return b.g==1?(l=vn,d=Rv(e,t,n,s,u),p=d.type,g=d.ec,v=d.nf,(T=u.get(l.ea))&&(e.m=T.isAudioMuxedInVideo),p==Op?(e.j.has(t)&&!g?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&g?e.j.set(t,g):g&&(e.j.has(t)&&e.j.get(t).transmux!==g.transmux?(e.j.get(t).destroy(),e.j.set(t,g)):g.destroy()),b.return(!1)):p==_v?D(b,vk(e,t,v,g),3):p!=Np?b.u(3):(g&&g.destroy(),D(b,Iv(e,u),3))):b.return(!0)})}function Sk(e,t,n,s,u){return e=Rv(e,t,n,s,u),e.ec&&e.ec.destroy(),e.type==Np}var Pp=f.URL.createObjectURL,Tk="sequence",Op="none",Np="reset",_v="changeType";function qe(e,t,n){this.i=e,this.C=t,this.s=this.l=1/0,this.h=1,this.g=this.j=null,this.A=0,this.B=!0,this.I=!1,this.H=0,this.F=n===void 0?!0:n,this.G=0,this.o=!1,this.m=e}y=qe.prototype,y.getDuration=function(){return this.l},y.Hj=function(){return this.h},y.Li=function(e){this.i=e},y.pb=function(e){this.l=e},y.Nj=function(){return this.i},y.Ki=function(e){this.A=e},y.Zc=function(e){e&&!this.B&&(this.I=!0),this.B=e},y.Gf=function(e){this.s=e},y.We=function(){return this.s},y.lh=function(e){this.C=e},y.yj=function(){return this.C},y.si=function(e,t){if(e.length!=0){var n=(Date.now()+this.A)/1e3;if(e=e.filter(function(u){return u.start+t<n}),e.length!=0){var s=e[e.length-1].end+t;this.pf(e[0].start+t),this.h=e.reduce(function(u,l){return Math.max(u,l.end-l.start)},this.h),this.g=Math.max(this.g,s),this.i!=null&&this.F&&!this.o&&(this.i=n-this.g-this.h)}}},y.$d=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,s=(Date.now()+this.A)/1e3;e=m(e);for(var u=e.next();!u.done;u=e.next())u=u.value,s<u.startTime||(t=Math.min(t,u.startTime),n=Math.max(n,u.endTime),this.h=Math.max(this.h,u.endTime-u.startTime));this.pf(t),this.g=Math.max(this.g,n),this.i!=null&&this.F&&!this.o&&(this.i=s-this.g-this.h)}},y.ri=function(e,t){this.pf(e),t==1/0||this.V()||(this.g=Math.max(this.g,t))},y.Ij=function(){return this.g},y.hf=function(){this.o=!0},y.ik=function(){return this.o},y.mh=function(e){this.m=e},y.Dj=function(){return this.m},y.pf=function(e){this.j==null?this.j=e:this.I||(this.j=Math.min(this.j,e))},y.Rg=function(e){this.h=Math.max(this.h,e)},y.offset=function(e){this.j!=null&&(this.j+=e),this.g!=null&&(this.g+=e)},y.V=function(){return this.l==1/0&&!this.B},y.Tc=function(){return this.l!=1/0&&!this.B},y.Gb=function(){return Math.max(this.H,this.Ac()-this.s)},y.Ni=function(e){this.H=e},y.Ac=function(){return this.V()||this.Tc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.h-this.i)+this.G,this.l):this.g?Math.min(this.g,this.l):this.l},y.Qd=function(e){var t=Math.max(this.j,this.H);return this.s==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Ac()-this.s+e,this.Fb()))},y.Xb=function(){return this.Qd(0)},y.Fb=function(){return Math.max(0,this.Ac()-(this.V()||this.Tc()?this.C:0))},y.Zi=function(){return!(this.i==null||this.g!=null&&this.F)},y.Ji=function(e){this.G=e},y.tj=function(){return this.G},be("shaka.media.PresentationTimeline",qe),qe.prototype.getAvailabilityTimeOffset=qe.prototype.tj,qe.prototype.setAvailabilityTimeOffset=qe.prototype.Ji,qe.prototype.usingPresentationStartTime=qe.prototype.Zi,qe.prototype.getSeekRangeEnd=qe.prototype.Fb,qe.prototype.getSeekRangeStart=qe.prototype.Xb,qe.prototype.getSafeSeekRangeStart=qe.prototype.Qd,qe.prototype.getSegmentAvailabilityEnd=qe.prototype.Ac,qe.prototype.setUserSeekStart=qe.prototype.Ni,qe.prototype.getSegmentAvailabilityStart=qe.prototype.Gb,qe.prototype.isInProgress=qe.prototype.Tc,qe.prototype.isLive=qe.prototype.V,qe.prototype.offset=qe.prototype.offset,qe.prototype.notifyMaxSegmentDuration=qe.prototype.Rg,qe.prototype.notifyMinSegmentStartTime=qe.prototype.pf,qe.prototype.getInitialProgramDateTime=qe.prototype.Dj,qe.prototype.setInitialProgramDateTime=qe.prototype.mh,qe.prototype.isStartTimeLocked=qe.prototype.ik,qe.prototype.lockStartTime=qe.prototype.hf,qe.prototype.getMaxSegmentEndTime=qe.prototype.Ij,qe.prototype.notifyPeriodDuration=qe.prototype.ri,qe.prototype.notifySegments=qe.prototype.$d,qe.prototype.notifyTimeRange=qe.prototype.si,qe.prototype.getDelay=qe.prototype.yj,qe.prototype.setDelay=qe.prototype.lh,qe.prototype.getSegmentAvailabilityDuration=qe.prototype.We,qe.prototype.setSegmentAvailabilityDuration=qe.prototype.Gf,qe.prototype.setStatic=qe.prototype.Zc,qe.prototype.setClockOffset=qe.prototype.Ki,qe.prototype.getPresentationStartTime=qe.prototype.Nj,qe.prototype.setDuration=qe.prototype.pb,qe.prototype.setPresentationStartTime=qe.prototype.Li,qe.prototype.getMaxSegmentDuration=qe.prototype.Hj,qe.prototype.getDuration=qe.prototype.getDuration;function Up(e,t,n,s){var u=this;this.s=s,this.g=e,this.B=t,this.h=n,this.o=new Ee,this.l=!1,this.F=e.readyState,this.G=this.C=this.j=0,this.m=Ck(this),this.A=!1,this.o.D(e,"waiting",function(){return Ma(u)}),this.i=new ht(function(){Ma(u)}).Fa(this.h.gapJumpTimerTime)}Up.prototype.release=function(){this.o&&(this.o.release(),this.o=null),this.i!=null&&(this.i.stop(),this.i=null),this.m&&(this.m.release(),this.m=null),this.g=this.B=this.s=null},Up.prototype.tf=function(){this.A=!0,this.i&&this.i.Fa(this.h.gapJumpTimerTime),Ma(this)};function Ma(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.l)return}else e.l=!1;if(!e.g.paused||e.g.currentTime==e.j&&(e.g.autoplay||e.g.currentTime!=e.j)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.m)){t=e.m;var n=t.h,s=Pv(n),u=n.g.currentTime,l=Date.now()/1e3;(t.g!=u||t.m!=s)&&(t.l=l,t.g=u,t.m=s,t.i=!1),u=l-t.l,(s=u>=t.o&&s&&!t.i)&&(t.j&&t.j(t.g,u),t.i=!0,t.g=n.g.currentTime),t=!s}t&&(t=e.g.currentTime,n=e.g.buffered,s=ek(n,t,e.h.gapDetectionThreshold),s==null||s==0&&!e.A||(u=n.start(s),(l=e.h.gapPadding)&&(u=Math.ceil(100*(u+l))/100),u>=e.B.Fb()||.001>u-t||(s!=0&&n.end(s-1),e.g.currentTime=u,t==e.j&&(e.j=u),e.C++,e.s(new Ie("gapjumped")))))}}}function Ck(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new Lv(new Dv(e.g),t,function(){var s;return j(function(u){if(u.g==1)return s=Lr(e.g.buffered),s.length?n?(e.g.currentTime+=n,u.u(2)):D(u,e.g.play(),3):u.return();if(u.g!=2){if(!e.g)return u.return();e.g.pause(),e.g.play()}e.G++,e.s(new Ie("stalldetected")),ne(u)})})}function Lv(e,t,n){this.h=e,this.m=Pv(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.o=t,this.j=n}Lv.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null};function Dv(e){var t=this;this.g=e,this.h=new Ee,this.i=!1,this.h.D(this.g,"audiofocuspaused",function(){t.i=!0}),this.h.D(this.g,"audiofocusgranted",function(){t.i=!1}),this.h.D(this.g,"audiofocuslost",function(){t.i=!0})}function Pv(e){if(e.g.paused||e.g.playbackRate==0||e.i||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(Lr(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}Dv.prototype.release=function(){this.h&&this.h.release(),this.h=null};function Ws(e,t,n,s){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?s():(t=bk.value().get(t),n.Aa(e,t,s))}var bk=new je(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Ov(e,t,n,s){var u=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return u.l==null&&(u.l=s()),u.l},this.o=!1,this.h=new Ee,this.i=new Fv(e),Ws(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Uv(u,u.j())})}Ov.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function Bp(e){return e.o?e.g.currentTime:e.j()}function Nv(e,t){0<e.g.readyState?jv(e.i,t):Ws(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){Uv(e,e.j())})}function Uv(e,t){.001>Math.abs(e.g.currentTime-t)?Bv(e):(e.h.Aa(e.g,"seeking",function(){Bv(e)}),jv(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function Bv(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function Fv(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new ht(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}Fv.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function jv(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Fa(.1)}function $v(e){this.g=e,this.i=!1,this.h=null,this.j=new Ee}y=$v.prototype,y.ready=function(){function e(){if(t.h==null||t.h==0&&t.g.duration!=1/0)t.i=!0;else{var n=t.g.currentTime,s=null;if(typeof t.h=="number")s=t.h;else if(t.h instanceof Date){var u=zv(t);u!==null&&(s=t.h.getTime()/1e3-u,s=Vv(t,s))}s==null?t.i=!0:(0>s&&(s=Math.max(0,n+s)),n!=s?(t.j.Aa(t.g,"seeking",function(){t.i=!0}),t.g.currentTime=s):t.i=!0)}}var t=this;Ws(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){e()})},y.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},y.Vf=function(e){this.h=this.i?this.h:e},y.De=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=e.getTime()/1e3-(zv(this)||0),e=Vv(this,e)),e||0},y.Eh=function(){return 0},y.Dh=function(){return 0},y.pi=function(){},y.ci=function(){var e=Vf(this.g.buffered);return e!=null&&e>=this.g.duration-1};function zv(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function Vv(e,t){return e=e.g.seekable,0<e.length&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function Hv(e,t,n,s,u,l){var d=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.s=u,this.o=null,this.j=new Up(e,t.presentationTimeline,n,l),this.i=new Ov(e,function(){e:{var p=d.j;p.l=!0,p.A=!1,p.i&&p.i.Fa(p.h.gapJumpTimerTime),Ma(p);var g=Bp(d.i);if(p=Wv(d,g),!$y()&&.001<Math.abs(p-g)){g=!1;var v=Be().Gi();if(v){var T=Date.now()/1e3;(!d.o||d.o<T-v)&&(d.o=T,g=!0)}else g=!0;if(g){Nv(d.i,p),p=void 0;break e}}d.s(),p=void 0}return p},function(p){var g=d.j;g.g.seeking&&!g.l&&(g.l=!0,g.j=p),g.i&&g.i.Fa(g.h.gapJumpTimerTime),Ma(g)},function(){return Gv(d,s)}),this.m=new ht(function(){if(d.h.readyState!=0&&!d.h.paused){var p=Bp(d.i),g=d.g.Xb(),v=d.g.Fb();3>v-g&&(g=v-3),p<g&&(p=Wv(d,p),d.h.currentTime=p)}})}y=Hv.prototype,y.ready=function(){this.m.Fa(.25)},y.release=function(){this.i&&(this.i.release(),this.i=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.h=this.i=this.g=this.l=null,this.s=function(){}},y.Vf=function(e){Nv(this.i,Gv(this,e))},y.De=function(){var e=Bp(this.i);return 0<this.h.readyState&&!this.h.paused?Kv(this,e):e},y.Eh=function(){return this.j.G},y.Dh=function(){return this.j.C};function Gv(e,t){return t==null?t=1/0>e.g.getDuration()?e.g.Xb():e.g.Fb():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):0>t&&(t=e.g.Fb()+t),Xv(e,Kv(e,t))}y.pi=function(){this.j.tf()},y.ci=function(){if(this.g.V()){var e=this.g.Ac(),t=Vf(this.h.buffered);if(t!=null&&t>=e)return!0}return!1};function Xv(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Wv(e,t){var n=e.l.rebufferingGoal,s=e.l.safeSeekOffset,u=e.g.Xb(),l=e.g.Fb(),d=e.g.getDuration();3>l-u&&(u=l-3);var p=e.g.Qd(n),g=e.g.Qd(s);return n=e.g.Qd(n+s),t>=d?Xv(e,t):t>l?l-e.l.safeSeekEndOffset:t<u?e.g.V()&&e.l.returnToEndOfLiveWindowWhenOutside?l-e.l.safeSeekEndOffset:Sp(e.h.buffered,g)?g:n:t>=p||Sp(e.h.buffered,t)?t:n}function Kv(e,t){var n=e.g.Xb();return t<n?n:(e=e.g.Fb(),t>e?e:t)}function vt(e){this.g=e,this.m=null,this.i=0,this.o=!1}y=vt.prototype,y.getNumReferences=function(){return this.g.length},y.getNumEvicted=function(){return this.i},y.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},y.rk=function(){this.o=!0},y.Eb=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function ir(e){return e.g[0]||null}y.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var s=this.g[n],u=n<t?this.g[n+1].startTime:s.endTime;if(e>=s.startTime&&e<u)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},y.get=function(e){return this.g.length==0?null:(e-=this.i,0>e||e>=this.g.length?null:this.g[e])},y.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},y.kf=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,S(e))}},y.Yd=function(e,t){var n=this;e=e.filter(function(s){return s.endTime>t&&(n.g.length==0||s.endTime>n.g[0].startTime)}),this.kf(e),this.$a(t)},y.$a=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},y.ld=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new He(e.startTime,t,e.C,e.startByte,e.endByte,e.Y,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},y.Lf=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new ht(function(){var s=t();s?n.g.push.apply(n.g,S(s)):(n.m.stop(),n.m=null)}),this.m.Fa(e))},vt.prototype[Symbol.iterator]=function(){return this.Wb(0)},vt.prototype.Wb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var s=this.find(e);if(s==null)return null;var u=this.get(s);n?s++:s--;var l=-1;if(u&&0<u.g.length)for(var d=u.g.length-1;0<=d;--d){var p=u.g[d];if(e>=p.startTime&&e<p.endTime){if(!t){for(;d&&!p.l;)d--,p=u.g[d];if(!p.l)return En("No independent partial segment found!"),null}n?s--:s++,l=d-1;break}}return new Ri(this,s,l,n)},vt.prototype.Pe=function(){return-1};function qf(e,t,n){return e=new He(e,e+t,function(){return n},0,null,null,e,e,e+t),new vt([e])}be("shaka.media.SegmentIndex",vt),vt.forSingleSegment=qf,vt.prototype.getIteratorForTime=vt.prototype.Wb,vt.prototype.updateEvery=vt.prototype.Lf,vt.prototype.fit=vt.prototype.ld,vt.prototype.evict=vt.prototype.$a,vt.prototype.mergeAndEvict=vt.prototype.Yd,vt.prototype.offset=vt.prototype.offset,vt.prototype.get=vt.prototype.get,vt.prototype.find=vt.prototype.find,vt.prototype.markImmutable=vt.prototype.rk,vt.prototype.release=vt.prototype.release,vt.prototype.getNumEvicted=vt.prototype.getNumEvicted,vt.prototype.getNumReferences=vt.prototype.getNumReferences;function Ri(e,t,n,s){this.i=e,this.h=t,this.g=n,this.reverse=s}y=Ri.prototype,y.Dd=function(e){this.reverse=e},y.oj=function(){return this.h},y.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.A&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},y.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.A&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},y.dh=function(){var e=this.current();if(e.o&&!e.l&&(e=this.i.get(this.h))&&0<e.g.length)for(var t=e.g[this.g];t.l&&!(0>=this.g);)this.g--,t=e.g[this.g]},be("shaka.media.SegmentIterator",Ri),Ri.prototype.resetToLastIndependent=Ri.prototype.dh,Ri.prototype.next=Ri.prototype.next,Ri.prototype.current=Ri.prototype.current,Ri.prototype.currentPosition=Ri.prototype.oj,Ri.prototype.setReverse=Ri.prototype.Dd;function Qt(){vt.call(this,[]),this.h=[]}ue(Qt,vt),y=Qt.prototype,y.clone=function(){var e=new Qt;return e.h=this.h.slice(),e.i=this.i,e},y.release=function(){for(var e=m(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},y.Eb=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.Eb(e)};function kk(e,t){e=m(e.h);for(var n=e.next();!n.done;n=e.next())t(n.value)}y.find=function(e){for(var t=this.i,n=m(this.h),s=n.next();!s.done;s=n.next()){s=s.value;var u=s.find(e);if(u!=null)return u+t;t+=s.getNumEvicted()+s.getNumReferences()}return null};function Ak(e,t){e=m(e.h);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.find(t)!=null)return n.Pe();return-1}y.get=function(e){for(var t=this.i,n=m(this.h),s=n.next();!s.done;s=n.next()){s=s.value;var u=s.get(e-t);if(u)return u;u=s.getNumReferences(),t+=s.getNumEvicted()+u}return null},y.offset=function(){},y.kf=function(){},y.$a=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.$a(e);for(;1<this.h.length&&this.h[0].getNumReferences()==0;)e=this.h.shift(),this.i+=e.getNumEvicted(),e.release()},y.Yd=function(){},y.ld=function(){},y.Lf=function(){},be("shaka.media.MetaSegmentIndex",Qt),Qt.prototype.updateEvery=Qt.prototype.Lf,Qt.prototype.fit=Qt.prototype.ld,Qt.prototype.mergeAndEvict=Qt.prototype.Yd,Qt.prototype.evict=Qt.prototype.$a,Qt.prototype.merge=Qt.prototype.kf,Qt.prototype.offset=Qt.prototype.offset,Qt.prototype.get=Qt.prototype.get,Qt.prototype.find=Qt.prototype.find,Qt.prototype.forEachTopLevelReference=Qt.prototype.Eb,Qt.prototype.release=Qt.prototype.release;function Ra(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Ve(),this.h=new ht(function(){t.g.ni(.25*t.i)})}Ra.prototype.release=function(){this.set(this.Pc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Ra.prototype.set=function(e){this.i=e,Fp(this)},Ra.prototype.Pc=function(){return this.g.Pc()};function Fp(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Ve()!=t&&e.g.nh(t);return}catch{}e.h.Fa(.25),e.g.Ve()!=0&&e.g.nh(0)}function jp(e){var t=this;this.j=e,this.h=new Ee,this.g=new Set,this.i=new ht(function(){Yv(t,!1)}).Jb(),e.paused||this.i.Fa(.25),this.h.D(e,"playing",function(){t.i.Jb().Fa(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}jp.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function Yv(e,t){var n=e.j.currentTime;e=m(e.g);for(var s=e.next();!s.done;s=e.next())s.value.j(n,t)}function Qf(e){Ct.call(this),this.g=new Map,this.h=e}ue(Qf,Ct),Qf.prototype.release=function(){this.g.clear(),Ct.prototype.release.call(this)};function Ek(e,t){var n=e.g.get(t);return n||(n={ce:[],lg:null,contentType:t},e.g.set(t,n)),n}function Ik(e,t,n){var s=Ek(e,t.contentType);Mk(e,s),e={rd:t,position:n},s=s.ce,t=s.findIndex(function(u){return u.position>=n}),0<=t?s.splice(t,s[t].position==n?1:0,e):s.push(e)}Qf.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var s=n.lg;e:{for(var u=n.ce,l=u.length-1;0<=l;l--){var d=u[l];if(d.position<=e){u=d.rd;break e}}u=null}l=u&&!(s===u||s&&u&&s.bandwidth==u.bandwidth&&s.audioSamplingRate==u.audioSamplingRate&&s.codecs==u.codecs&&s.contentType==u.contentType&&s.frameRate==u.frameRate&&s.height==u.height&&s.mimeType==u.mimeType&&s.channelsCount==u.channelsCount&&s.pixelAspectRatio==u.pixelAspectRatio&&s.width==u.width),d=u&&s&&u.label&&s.label&&s.label!==u.label;var p=u&&s&&u.language&&s.language&&s.language!==u.language;s=u&&s&&u.roles&&s.roles&&!na(s.roles,u.roles),(d||p||s)&&qv(this,e,u.contentType)&&(n.lg=u,s=new Ie("audiotrackchange",new Map([["quality",u],["position",e]])),this.dispatchEvent(s)),l&&qv(this,e,u.contentType)&&(n.lg=u,JSON.stringify(u),n=new Ie("qualitychange",new Map([["quality",u],["position",e]])),this.dispatchEvent(n))}};function qv(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function Mk(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,s=e[e.length-1].end,u=t.ce;t.ce=u.filter(function(l,d){return!(l.position<=n&&d+1<u.length&&u[d+1].position<=n||l.position>=s)})}else t.ce=[]}function Jf(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function _a(e){Ct.call(this),this.h=new Map,this.i=e,this.g=null}ue(_a,Ct),_a.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),Ct.prototype.release.call(this)};function $p(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+(t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1));e.h.has(n)||(e.h.set(n,t),t=new Ie("regionadd",new Map([["region",t]])),e.dispatchEvent(t),Rk(e))}function Rk(e){e.g||(e.g=new ht(function(){for(var t=e.i(),n=m(e.h),s=n.next();!s.done;s=n.next()){var u=m(s.value);s=u.next().value,u=u.next().value,u.endTime<t.start&&(e.h.delete(s),s=new Ie("regionremove",new Map([["region",u]])),e.dispatchEvent(s))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).Fa(2))}function Zf(e,t,n,s){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=s}function _k(e,t){e.l=t,e=m(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function La(e,t,n){if(n=n===void 0?!1:n,!e.i.segmentIndex||(e.g||(e.g=e.i.segmentIndex.Wb(t,!0,e.o)),!e.g))return Promise.resolve();for(n&&e.g.next(),t=[];e.h.size<e.m&&(n=e.g.next().value,!!n);){var s=!0;n.isPreload()&&n.endByte!=null&&(s=!1),n.Cc()==2&&(s=!1),n.Yb(!1)&&(s=!1),s&&n.Y&&t.push(Qv(e,n.Y)),s&&!e.h.has(n)&&(s=new Vp(e.l),t.push(ex(s,n,e.i)),e.h.set(n,s))}return zp(e),Promise.all(t)}function Qv(e,t){if(!e.i.segmentIndex||t.Yb()||Array.from(e.j.keys()).some(function(u){return ka(u,t)}))return Promise.resolve();var n=new Vp(e.l),s=ex(n,t,e.i);return e.j.set(t,n),s}function Jv(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Da(e,n)}function rr(e){Jv(e,e.h),Jv(e,e.j),e.g=null}Zf.prototype.$a=function(e,t){t=t===void 0?!1:t;for(var n=m(this.h.keys()),s=n.next();!s.done;s=n.next())s=s.value,e>s.endTime&&Da(this,s);t&&zp(this)},Zf.prototype.Dd=function(e){this.o=e,this.g&&this.g.Dd(e)};function zp(e){for(var t=Array.from(e.h.keys()),n=m(e.j.keys()),s=n.next(),u={};!s.done;u={Lg:void 0},s=n.next())u.Lg=s.value,t.some(function(l){return function(d){return ka(d.Y,l.Lg)}}(u))||Da(e,u.Lg)}function Zv(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var s=n.pop();s&&Da(e,s)}zp(e)}function Lk(e,t){t&&t!==e.i&&(rr(e),e.i=t)}function Da(e,t){var n=e.h;t instanceof Jn&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function Vp(e){this.g=e,this.ae=this.sh=null}function ex(e,t,n){var s=new Uint8Array(0);return e.ae=e.g(t,n,function(u){return j(function(l){if(l.g==1)return 0<s.byteLength?s=Zt(s,u):s=u,e.sh?D(l,e.sh(s),3):l.u(0);s=new Uint8Array(0),ne(l)})}),e.ae.promise.catch(function(u){return u instanceof q&&u.code==7001?Promise.resolve():Promise.reject(u)})}Vp.prototype.abort=function(){this.ae&&this.ae.abort()};function Hp(e){var t=yi(e),n=t.split("/")[0];return e=Mi(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,oe:null,colorGamut:null,frameRate:null}}function Dk(e,t,n){function s(X){U=X.name;var Y=X.reader;Y.skip(24);var Q=Y.Ba(),ie=Y.Ba();Y.skip(50),M=String(Q),b=String(ie),X.reader.Ga()&&ot(X)}function u(X){var Y=ov(X.reader);_=Y.channelCount,L=Y.sampleRate,l(X.name)}function l(X){switch(X=X.toLowerCase(),X){case"avc1":case"avc3":p.push(X+".42E01E"),v=!0;break;case"hev1":case"hvc1":p.push(X+".1.6.L93.90"),v=!0;break;case"dvh1":case"dvhe":p.push(X+".05.04"),v=!0;break;case"vp09":p.push(X+".00.10.08"),v=!0;break;case"av01":p.push(X+".0.01M.08"),v=!0;break;case"mp4a":d.push("mp4a.40.2"),g=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":d.push(X),g=!0;break;case"apac":d.push("apac.31.00"),g=!0}}var d=[],p=[],g=!1,v=!1,T=null,b=null,M=null,_=null,L=null,O=null,P=null,U;if(new Lt().box("moov",ot).box("trak",ot).box("mdia",ot).R("mdhd",function(X){T=jf(X.reader,X.version).language}).box("minf",ot).box("stbl",ot).R("stsd",Rr).box("mp4a",function(X){var Y=ov(X.reader);_=Y.channelCount,L=Y.sampleRate,X.reader.Ga()?ot(X):l(X.name)}).box("esds",function(X){X=X.reader;for(var Y="mp4a",Q,ie;X.Ga();){Q=X.X();for(var te=X.X();te&128;)te=X.X();if(Q==3)X.Ba(),te=X.X(),te&128&&X.Ba(),te&64&&X.skip(X.X()),te&32&&X.Ba();else if(Q==4)ie=X.X(),X.skip(12);else if(Q==5)break}ie&&(Y+="."+Ta(ie),Q==5&&X.Ga()&&(Q=X.X(),ie=(Q&248)>>3,ie===31&&X.Ga()&&(ie=32+((Q&7)<<3)+((X.X()&224)>>5)),Y+="."+ie)),d.push(Y),g=!0}).box("ac-3",u).box("ec-3",u).box("ac-4",u).box("Opus",u).box("fLaC",u).box("apac",u).box("avc1",s).box("avc3",s).box("hev1",s).box("hvc1",s).box("dva1",s).box("dvav",s).box("dvh1",s).box("dvhe",s).box("vp09",s).box("av01",s).box("avcC",function(X){var Y=U||"";switch(U){case"dvav":Y="avc3";break;case"dva1":Y="avc1"}X=X.reader,X.skip(1),X=Y+"."+Ta(X.X())+Ta(X.X())+Ta(X.X()),p.push(X),v=!0}).box("hvcC",function(X){var Y=U||"";switch(U){case"dvh1":Y="hvc1";break;case"dvhe":Y="hev1"}var Q=X.reader;Q.skip(1),X=Q.X();var ie=["","A","B","C"][X>>6],te=X&31,Z=Q.T(),ve=(X&32)>>5?"H":"L";X=[Q.X(),Q.X(),Q.X(),Q.X(),Q.X(),Q.X()],Q=Q.X();for(var de=0,ae=0;32>ae&&(de|=Z&1,ae!=31);ae++)de<<=1,Z>>=1;for(Y=Y+("."+ie+te)+("."+Ta(de,!0)),Y+="."+ve+Q,ie="",te=X.length;te--;)((ve=X[te])||ie)&&(ie="."+ve.toString(16).toUpperCase()+ie);Y+=ie,p.push(Y),v=!0}).box("dvcC",function(X){var Y=U||"";switch(U){case"hvc1":Y="dvh1";break;case"hev1":Y="dvhe";break;case"avc1":Y="dva1";break;case"avc3":Y="dvav";break;case"av01":Y="dav1"}var Q=X.reader;Q.skip(2),X=Q.X(),Q=Q.X(),p.push(Y+"."+ai(X>>1&127)+"."+ai(X<<5&32|Q>>3&31)),v=!0}).box("dvvC",function(X){var Y=U||"";switch(U){case"hvc1":Y="dvh1";break;case"hev1":Y="dvhe";break;case"avc1":Y="dva1";break;case"avc3":Y="dvav";break;case"av01":Y="dav1"}var Q=X.reader;Q.skip(2),X=Q.X(),Q=Q.X(),p.push(Y+"."+ai(X>>1&127)+"."+ai(X<<5&32|Q>>3&31)),v=!0}).R("vpcC",function(X){var Y=U||"",Q=X.reader;X=Q.X();var ie=Q.X();Q=Q.X()>>4&15,p.push(Y+"."+ai(X)+"."+ai(ie)+"."+ai(Q)),v=!0}).box("av1C",function(X){var Y=U||"";switch(U){case"dav1":Y="av01"}var Q=X.reader;Q.skip(1),X=Q.X(),Q=Q.X();var ie=X>>>5,te=(Q&64)>>6;p.push(Y+"."+ie+"."+ai(X&31)+(Q>>>7?"H":"M")+"."+ai(ie===2&&te?(Q&32)>>5?12:10:te?10:8)+"."+((Q&16)>>4)+"."+((Q&8)>>3)+((Q&4)>>2)+(Q&3)+"."+ai(1)+"."+ai(1)+"."+ai(1)+".0"),v=!0}).box("enca",Lf).box("encv",ui).box("sinf",ot).box("frma",function(X){X=wp(X.reader).codec,l(X)}).box("colr",function(X){p=p.map(function(ie){if(ie.startsWith("av01.")){var te=X.reader,Z=te.Ma(),ve=te.Tb(4),de=String.fromCharCode(ve[0]);if(de+=String.fromCharCode(ve[1]),de+=String.fromCharCode(ve[2]),de+=String.fromCharCode(ve[3]),de==="nclx"){ve=te.Ba(),de=te.Ba();var ae=te.Ba(),ge=te.X()>>7,Te=ie.split(".");Te.length==10&&(Te[6]=ai(ve),Te[7]=ai(de),Te[8]=ai(ae),Te[9]=String(ge),ie=Te.join("."))}te.seek(Z)}return ie});var Y=Nb(X.reader),Q=Y.colorGamut;O=Y.oe,P=Q}).parse(e||t,!0,!0),!d.length&&!p.length)return null;var B=g&&!v,$=new Map;if(v&&!n){n=new er("video/mp4"),e&&n.init(e);try{n.vf(t);for(var W=m(n.Uf()),J=W.next();!J.done;J=W.next()){var G=J.value;$.set(G,G)}}catch{}n.Fd()}return{type:B?"audio":"video",mimeType:B?"audio/mp4":"video/mp4",codecs:Gp(d.concat(p)).join(", "),language:T,height:b,width:M,channelCount:_,sampleRate:L,closedCaptions:$,oe:O,colorGamut:P,frameRate:null}}function Gp(e){var t=new Set,n=[];e=m(e);for(var s=e.next();!s.done;s=e.next()){s=s.value;var u=eo(s);t.has(u)||(n.push(s),t.add(u))}return t=$h("audio",n),s=$h("video",n),e=$h(ct,n),s=Pk(s),t=t.concat(s).concat(e),n.length&&!t.length?n:t}function Pk(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?On('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function Ok(e){var t=null;return new Lt().box("moov",ot).box("trak",ot).box("mdia",ot).box("minf",ot).box("stbl",ot).R("stsd",Rr).box("encv",ui).box("enca",Lf).box("sinf",ot).box("schi",ot).R("tenc",function(n){n=n.reader,n.X(),n.X(),n.X(),n.X(),t=Sr(n.Tb(16))}).parse(e,!0),t}function Xp(e,t,n){var s,u,l,d,p;return j(function(g){if(g.g==1)return s=t,s.cryptoKey?g.u(2):D(g,s.fetchKey(),3);if(u=s.iv,!u)for(u=Ze(new ArrayBuffer(16)),l=s.firstMediaSequenceNumber+n,d=u.byteLength-1;0<=d;d--)u[d]=l&255,l>>=8;return t.blockCipherMode=="CBC"?p={name:"AES-CBC",iv:u}:p={name:"AES-CTR",counter:u,length:64},g.return(f.crypto.subtle.decrypt(p,s.cryptoKey,e))})}function Pa(e,t,n,s,u){return e=fn(e,s,u),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function tx(e,t){var n=this;this.g=t,this.j=e,this.i=null,this.K=new Map,this.C=1,this.A=this.o=null,this.P=0,this.h=new Map,this.I=!1,this.S=null,this.B=!1,this.l=new _s(function(){return Nk(n)}),this.M=Date.now()/1e3,this.m=new Map,this.N={projection:null,hfov:null},this.W=0,this.U=1/0,this.F=null,this.L=[],this.s=new ht(function(){if(n.j&&n.g)if(n.j.presentationTimeline.V()){var s=n.j.presentationTimeline.Xb(),u=n.j.presentationTimeline.Fb();1<u-s?gk(n.g.Z,s,u):Lp(n.g.Z)}else Lp(n.g.Z),n.s&&n.s.stop();else n.s&&n.s.stop()}),this.G=null,this.H=new ht(function(){var s=n.g.video;!s.ended&&n.G&&(s.currentTime=n.G,n.G=null)})}y=tx.prototype,y.destroy=function(){return this.l.destroy()};function Nk(e){var t,n,s,u,l,d,p;return j(function(g){if(g.g==1){for(e.s&&e.s.stop(),e.s=null,e.H&&e.H.stop(),e.H=null,t=[],n=m(e.h.values()),s=n.next();!s.done;s=n.next())u=s.value,Pr(u),t.push(Ys(u)),u.$&&(rr(u.$),u.$=null);for(l=m(e.m.values()),d=l.next();!d.done;d=l.next())p=d.value,rr(p);return D(g,Promise.all(t),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.G=null,ne(g)})}y.configure=function(e){if(this.i=e,this.S=new A1({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.h.get("audio");t&&t.$&&(rr(t.$),t.$=null),t=m(this.m.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,rr(this.m.get(n)),this.m.delete(n)}for(e.disableTextPrefetch&&(t=this.h.get(ct))&&t.$&&(rr(t.$),t.$=null),e.disableVideoPrefetch&&(t=this.h.get("video"))&&t.$&&(rr(t.$),t.$=null),t=m(this.h.keys()),n=t.next();!n.done;n=t.next())n=this.h.get(n.value),n.$?(Zv(n.$,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(rr(n.$),n.$=null)):0<e.segmentPrefetchLimit&&(n.$=Wp(this,n.stream));e.disableAudioPrefetch||Vk(this)};function Uk(e,t,n){e.j.presentationTimeline.V()||(e.W=t,e.U=n)}y.start=function(e){var t=this;return j(function(n){if(n.g==1)return D(n,zk(t,e||new Map),2);Nt(t.l),t.I=!0,ne(n)})};function Bk(e,t){var n,s,u,l,d,p;j(function(g){switch(g.g){case 1:return n=vn,e.P++,s=e.P,le(g,2),D(g,bv(e.g.Z,n.Ta),4);case 4:V(g,3);break;case 2:u=re(g),e.g&&e.g.onError(u);case 3:l=rn(t.mimeType,t.codecs),Wf(e.g.Z,l,e.j.sequenceMode,t.external),d=e.g.Z.ha,(d.isTextVisible()||e.i.alwaysStreamText)&&e.P==s&&(p=tc(e,t),e.h.set(n.Ta,p),Hn(e,p,0)),ne(g)}})}function Fk(e){var t=e.h.get(ct);t&&(Pr(t),Ys(t).catch(function(){}),e.F=e.h.get(ct),e.h.delete(ct),t.stream&&t.stream.closeSegmentIndex&&t.stream.closeSegmentIndex()),e.A=null}function nx(e,t){for(var n=0>e.g.ub(),s=m(e.h.values()),u=s.next();!u.done;u=s.next())u=u.value,u.sa&&u.sa.Dd(n),u.$&&u.$.Dd(n);for(s=m(e.m.values()),u=s.next();!u.done;u=s.next())u.value.Dd(n);(n=e.h.get("video"))&&(s=n.stream)&&(t?(t=s.trickModeVideo)&&!n.Fc&&(Ks(e,t,!1,0,!1),n.Fc=s):(t=n.Fc)&&(n.Fc=null,Ks(e,t,!0,0,!1)))}function ix(e,t,n,s,u,l){n=n===void 0?!1:n,s=s===void 0?0:s,u=u===void 0?!1:u,l=l===void 0?!1:l,e.o=t,e.I&&(t.video&&Ks(e,t.video,n,s,u,l),t.audio&&Ks(e,t.audio,n,s,u,l))}function ec(e,t){j(function(n){if(n.g==1)return e.F=null,e.A=t,e.I?t.segmentIndex?n.u(2):D(n,t.createSegmentIndex(),2):n.return();Ks(e,t,!0,0,!1),ne(n)})}function jk(e){var t=e.h.get(ct);t&&Ks(e,t.stream,!0,0,!0)}function $k(e,t){for(var n=m(e.K.entries()),s=n.next();!s.done;s=n.next()){var u=m(s.value);s=u.next().value,u=u.next().value,s.includes(t.type)&&(u(),e.K.delete(s))}}function Ks(e,t,n,s,u,l){var d=e.h.get(t.type);d||t.type!=ct?d&&(d.Fc&&(t.trickModeVideo?(d.Fc=t,t=t.trickModeVideo):d.Fc=null),d.stream!=t||u)&&(e.m.has(t)?d.$=e.m.get(t):d.$&&Lk(d.$,t),t.type==ct&&d.stream!=t&&(u=rn(t.mimeType,t.codecs),Wf(e.g.Z,u,e.j.sequenceMode,t.external)),!e.m.has(d.stream)&&d.stream.closeSegmentIndex&&(d.Qa?(u="("+d.type+":"+d.stream.id+")",e.K.has(u)||e.K.set(u,d.stream.closeSegmentIndex)):d.stream.closeSegmentIndex()),u=d.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,d.stream=t,d.sa=null,d.ag=!!l,t.dependencyStream?d.yc=tc(e,t.dependencyStream):d.yc=null,u&&(d.mb=null,d.lc=null,d.kc=null,t.isAudioMuxedInVideo&&(t=null,d.type==="video"?t=e.h.get("audio"):d.type==="audio"&&(t=e.h.get("video")),t&&(Ys(t).catch(function(){}),t.mb=null,t.lc=null,t.kc=null,Oa(e,t),rx(e,t).catch(function(p){e.g&&e.g.onError(p)})))),n?d.Kc?d.Sf=!0:d.Qa?(d.Ic=!0,d.Oe=s,d.Sf=!0):(Pr(d),Qp(e,d,!0,s).catch(function(p){e.g&&e.g.onError(p)})):d.Qa||d.zb||Hn(e,d,0),rx(e,d).catch(function(p){e.g&&e.g.onError(p)})):Bk(e,t)}function rx(e,t){var n,s,u;return j(function(l){if(l.g==1)return t.Hb?(n=t.stream,s=t.Hb,n.segmentIndex?l.u(2):D(l,n.createSegmentIndex(),2)):l.return();if(l.g!=4)return u=n.dependencyStream,!u||u.segmentIndex?l.u(4):D(l,u.createSegmentIndex(),4);if(t.Hb!=s||t.stream!=n)return l.return();var d=e.g.Qc(),p=Vs(e.g.Z,t.type),g=t.stream.segmentIndex.find(t.Ia?t.Ia.endTime:d),v=g==null?null:t.stream.segmentIndex.get(g);g=v&&v.endByte?v.endByte-v.startByte:null,v&&!g&&(g=(v.endTime-v.getStartTime())*(t.stream.bandwidth||0)/8),g?((v=v.Y)&&(g+=(v.endByte?v.endByte-v.startByte:null)||0),v=e.g.getBandwidthEstimate(),d=8*g/v<(p||0)-d-e.i.rebufferingGoal||t.Hb.h.g>g):d=!1,d&&t.Hb.abort(),ne(l)})}y.Yc=function(){if(this.g){for(var e=this.g.Qc(),t=m(this.h.keys()),n=t.next();!n.done;n=t.next()){var s=n.value;n=this.h.get(s);var u=this.g.Z;if(s==ct?(u=u.h,u=u.g==null||u.h==null?!1:e>=u.g&&e<u.h):(u=Hs(u,s),u=Sp(u,e)),!u){if(this.M=0,n.$&&(n.$.g=null),n.type==="audio"){u=m(this.m.values());for(var l=u.next();!l.done;l=u.next())l.value.g=null}n.sa=null,(Vs(this.g.Z,s)!=null||n.Qa)&&Oa(this,n),n.Hb&&(n.Hb.abort(),n.Hb=null),s===ct&&(s=this.g.Z,s.I&&s.I.Fd()),n.Yc=!0}}ic(this)&&e0(this)}};function Oa(e,t){t.Kc||t.Ic||(t.Qa?(t.Ic=!0,t.Oe=0):_p(e.g.Z,t.type)==null?t.zb==null&&Hn(e,t,0):(Pr(t),Qp(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function zk(e,t){var n,s,u,l,d,p,g,v;return j(function(T){if(T.g==1){if(!e.o)throw new q(2,5,5006);return n=rc(e,!0),s=e.g.Z,D(T,s.init(n,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(Nt(e.l),e.updateDuration(),u=m(n.keys()),l=u.next();!l.done;l=u.next())d=l.value,p=n.get(d),e.h.has(d)||(g=tc(e,p),t.has(p.id)&&(v=t.get(p.id),_k(v,function(b,M,_){return nc(b,M,_||null,e.i.retryParameters,e.g.pc)}),g.$=v),e.h.set(d,g),Hn(e,g,0));ne(T)})}function tc(e,t){var n={stream:t,type:t.type,sa:null,$:Wp(e,t),Ia:null,mb:null,gf:null,lc:null,kc:null,df:null,ef:null,Fc:null,endOfStream:!1,Qa:!1,zb:null,Ic:!1,Oe:0,Sf:!1,Kc:!1,Yc:!0,ag:!1,$g:!1,Sd:!1,Hb:null,yc:null};return t.dependencyStream&&(n.yc=tc(e,t.dependencyStream)),n}function Wp(e,t){if(t.type==="video"&&e.i.disableVideoPrefetch||t.type==="audio"&&e.i.disableAudioPrefetch||t.type===ct&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===ct&&e.i.disableTextPrefetch)return null;if(e.m.has(t))return e.m.get(t);var n=e.h.get(t.type);return(n=n&&n.$)&&t===n.i?n:0<e.i.segmentPrefetchLimit?new Zf(e.i.segmentPrefetchLimit,t,function(s,u,l){return nc(s,u,l||null,e.i.retryParameters,e.g.pc)},0>e.g.ub()):null}function Vk(e){for(var t=e.i.segmentPrefetchLimit,n=e.i.prefetchAudioLanguages,s=m(e.j.variants),u=s.next(),l={};!u.done;l={Mb:void 0},u=s.next())if(l.Mb=u.value,l.Mb.audio)if(e.m.has(l.Mb.audio)){if(u=e.m.get(l.Mb.audio),Zv(u,t),!(0<t&&n.some(function(p){return function(g){return As(p.Mb.audio.language,g)}}(l)))){var d=e.h.get(l.Mb.audio.type);u!==(d&&d.$)&&rr(u),e.m.delete(l.Mb.audio)}}else 0>=t||!n.some(function(p){return function(g){return As(p.Mb.audio.language,g)}}(l))||!(u=Wp(e,l.Mb.audio))||(l.Mb.audio.segmentIndex||l.Mb.audio.createSegmentIndex(),e.m.set(l.Mb.audio,u))}y.updateDuration=function(){var e=$y(),t=this.j.presentationTimeline.getDuration();1/0>t?(e&&(this.s&&this.s.stop(),Lp(this.g.Z)),this.g.Z.pb(t)):e?(this.s&&this.s.Fa(.5),this.g.Z.pb(1/0)):this.g.Z.pb(Math.pow(2,32))};function Hk(e,t){var n,s,u,l,d,p,g,v,T;return j(function(b){switch(b.g){case 1:if(Nt(e.l),n=vn,t.Qa||t.zb==null||t.Kc)return b.return();if(t.zb=null,!t.Ic){b.u(2);break}return D(b,Qp(e,t,t.Sf,t.Oe),3);case 3:return b.return();case 2:if($k(e,t),t.stream.segmentIndex){b.u(4);break}return s=t.stream,le(b,5),D(b,t.stream.createSegmentIndex(),7);case 7:V(b,6);break;case 5:return u=re(b),D(b,Jp(e,t,u),8);case 8:return b.return();case 6:if(s!=t.stream)return s.closeSegmentIndex&&s.closeSegmentIndex(),t.Qa||t.zb||Hn(e,t,0),b.return();case 4:if(!t.yc){b.u(9);break}if(t.yc.stream.segmentIndex){b.u(9);break}return le(b,11),D(b,t.yc.stream.createSegmentIndex(),13);case 13:V(b,9);break;case 11:re(b);case 9:le(b,14),l=Gk(e,t),l!=null&&(Hn(e,t,l),t.Sd=!1),V(b,15);break;case 14:return d=re(b),D(b,Jp(e,t,d),16);case 16:return b.return();case 15:if(t.type===n.Ta)return b.return();if(p=[t],g=t.type===n.ea?n.Ca:n.ea,(v=e.h.get(g))&&p.push(v),!e.I||!p.every(function(M){return M.endOfStream})){b.u(0);break}return D(b,e.g.Z.endOfStream(),18);case 18:Nt(e.l),T=e.g.Z.getDuration(),T!=0&&T<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.pb(T),ne(b)}})}function Gk(e,t){if(qp(t))return dk(e.g.Z,t.stream.originalId||""),null;if(t.type==ct&&hk(e.g.Z),t.stream.isAudioMuxedInVideo&&t.type=="audio")return null;var n=e.i.updateIntervalSeconds/Math.max(1,Math.abs(e.g.ub()));if(!Cv(e.g.Z)&&t.type!=ct)return n/2;var s=e.g.Qc();if(t.type==="audio")for(var u=m(e.m.keys()),l=u.next();!l.done;l=u.next())l=e.m.get(l.value),l.$a(s,!0),La(l,s);u=t.Ia?t.Ia.endTime:s;var d=fk(e.g.Z,t.type,s);l=Math.max(1,Math.max(e.i.rebufferingGoal,e.i.bufferingGoal)*e.C);var p=e.j.presentationTimeline.getDuration()-u,g=Vs(e.g.Z,t.type);if(1e-6>p&&g)return t.endOfStream=!0,t.type=="video"&&(e=e.h.get(ct))&&qp(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,d>=l)return n/2;if(p=!t.sa,g=Xk(e,t,s,g),!g)return n;d=t.mb;var v=g.Y;d&&v&&ka(v,d)&&(d.g=v.g),d=!1,p&&t.ag&&(d=!0,t.ag=!1),p=1/0,v=Array.from(e.h.values()),v=m(v);for(var T=v.next();!T.done;T=v.next())T=T.value,qp(T)||T.sa&&!T.sa.current()||(p=Math.min(p,T.Ia?T.Ia.endTime:s));return u>=p+e.j.presentationTimeline.h?n:(t.$&&t.sa&&!e.m.has(t.stream)&&(t.$.$a(g.startTime+.001),La(t.$,g.startTime).catch(function(){})),ic(e)&&Qk(e,t,g)||(Wk(e,t,s,g,d).catch(function(){}),t.yc&&ox(e,t.yc,s,l)),null)}function Xk(e,t,n,s){if(t.sa)return(n=t.sa.current())&&t.Ia&&.001>Math.abs(t.Ia.startTime-n.startTime)&&(n=t.sa.next().value),n;if(t.Ia||s)return n=t.Ia?t.Ia.endTime:s,e=0>e.g.ub(),t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Wb(n,!1,e)),t.sa&&t.sa.next().value;s=e.j.sequenceMode||ic(e)?0:e.i.inaccurateManifestTolerance;var u=Math.max(n-s,0);e=0>e.g.ub();var l=null;return s&&(t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Wb(u,!1,e)),l=t.sa&&t.sa.next().value),l||(t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Wb(n,!1,e)),l=t.sa&&t.sa.next().value),l}function Wk(e,t,n,s,u){var l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J;return j(function(G){switch(G.g){case 1:if(l=vn,d=t.stream,p=t.sa,t.Qa=!0,le(G,2),s.Cc()==2)throw new q(1,1,1011);return D(G,Yk(e,t,s,u),4);case 4:return Nt(e.l),e.B?G.return():(g=d.mimeType=="video/mp4"||d.mimeType=="audio/mp4",v=f.ReadableStream,e.i.lowLatencyMode&&e.j.isLowLatency&&v&&g&&(e.j.type!="HLS"||s.m)?(M=new Uint8Array(0),L=_=!1,P=function(X){var Y,Q,ie;return j(function(te){switch(te.g){case 1:if(_||(L=!0,Nt(e.l),e.B))return te.return();if(le(te,2),M=Zt(M,X),Y=!1,Q=0,new Lt().box("mdat",function(Z){Q=Z.size+Z.start,Y=!0}).parse(M,!1,!0),!Y){te.u(4);break}return ie=M.subarray(0,Q),M=M.subarray(Q),D(te,Kp(e,t,n,d,s,ie,!0,u),5);case 5:t.$&&t.sa&&La(t.$,s.startTime,!0);case 4:V(te,0);break;case 2:O=re(te),ne(te)}})},D(G,Na(e,t,s,P),9)):(T=Na(e,t,s),D(G,T,7)));case 7:return b=G.h,Nt(e.l),e.B?G.return():(Nt(e.l),t.Ic?(t.Qa=!1,Hn(e,t,0),G.return()):D(G,Kp(e,t,n,d,s,b,!1,u),6));case 9:if(U=G.h,O)throw O;if(L){G.u(10);break}return _=!0,Nt(e.l),e.B?G.return():t.Ic?(t.Qa=!1,Hn(e,t,0),G.return()):D(G,Kp(e,t,n,d,s,U,!1,u),10);case 10:t.$&&t.sa&&La(t.$,s.startTime,!0);case 6:if(Nt(e.l),e.B)return G.return();t.Ia=s,p.next(),t.Qa=!1,t.$g=!1,B=e.g.Z.Vb(),$=B[t.type],JSON.stringify($),t.Ic||(W=null,t.type===l.Ca?W=e.h.get(l.ea):t.type===l.ea&&(W=e.h.get(l.Ca)),W&&W.type==l.ea?e.g.tf(s,t.stream,W.stream.isAudioMuxedInVideo):e.g.tf(s,t.stream,t.stream.codecs.includes(","))),Pr(t),Hn(e,t,0),V(G,0);break;case 2:if(J=re(G),Nt(e.l,J),e.B)return G.return();if(t.Qa=!1,J.code==7001)t.Qa=!1,Pr(t),Hn(e,t,0),G.u(0);else if(t.type==l.Ta&&e.i.ignoreTextStreamFailures)e.h.delete(l.Ta),G.u(0);else return J.code==3017?D(G,Kk(e,t,J),0):(t.Sd=!0,J.category==1&&t.$&&Da(t.$,s),J.severity=2,D(G,Jp(e,t,J),0))}})}function ox(e,t,n,s){var u,l,d,p,g,v,T,b,M,_,L;return j(function(O){switch(O.g){case 1:for(u=t.stream,p=(d=(l=u.segmentIndex)&&l.Wb(n))&&d.next().value;p&&e.L.includes(p.startTime);)p=d&&d.next().value;if(!p){O.u(0);break}if(g=p.Y,!g||ka(g,t.mb)){O.u(3);break}return t.mb=g,le(O,4),D(O,Na(e,t,g),6);case 6:v=O.h;var P=e.g.Z;P.M&&zh(P.M,v,0,u),e.L=[],V(O,3);break;case 4:throw T=re(O),t.mb=null,T;case 3:if(t.Ia&&t.Ia==p){O.u(0);break}return t.Ia=p,le(O,8),D(O,Na(e,t,p),10);case 10:b=O.h,P=e.g.Z,P.M&&zh(P.M,b,0,u),e.L.push(p.startTime),V(O,9);break;case 8:throw M=re(O),t.Ia=null,M;case 9:if(_=Math.max.apply(Math,[0].concat(S(e.L))),L=e.g.Qc(),L+s>_)return D(O,ox(e,t,p.startTime,s),0);O.u(0)}})}function Kk(e,t,n){var s,u,l,d;return j(function(p){if(p.g==1){if(s=Array.from(e.h.values()),s.some(function(g){return g!=t&&g.$g}))return p.u(2);if(u=e.i.maxDisabledTime===0&&n.code==1011?1:e.i.maxDisabledTime,e.g.disableStream(t.stream,u))return p.return();if(e.i.avoidEvictionOnQuotaExceededError)return Hn(e,t,4),p.return();if(l=Math.round(100*e.C),20<l)e.C-=.2;else if(4<l)e.C-=.04;else return t.Sd=!0,e.B=!0,e.g.onError(n),p.return();return t.$g=!0,d=e.g.Qc(),D(p,Yp(e,t,d),2)}Hn(e,t,4),ne(p)})}function Yk(e,t,n,s){var u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$;return j(function(W){switch(W.g){case 1:if(u=vn,l=t.Ia==null,d=[],p=Math.max(0,Math.max(n.appendWindowStart,e.W)-.1),g=Math.min(n.appendWindowEnd,e.U)+.1,v=n.codecs||t.stream.codecs,T=eo(v),b=yi(n.mimeType||t.stream.mimeType),M=n.timestampOffset,M==t.gf&&p==t.lc&&g==t.kc&&T==t.df&&b==t.ef){W.u(2);break}if(_=t.df&&t.ef&&Sk(e.g.Z,t.type,b,v,rc(e)),!_){W.u(3);break}if(L=null,t.type===u.Ca?L=e.h.get(u.ea):t.type===u.ea&&(L=e.h.get(u.Ca)),!L){W.u(3);break}return D(W,Ys(L).catch(function(){}),5);case 5:L.mb=null,L.lc=null,L.kc=null,Oa(e,L);case 3:return D(W,sx(e,t,M,p,g,n,T,b),2);case 2:return ka(n.Y,t.mb)||(t.mb=n.Y,n.l&&n.Y&&(O=Na(e,t,n.Y),P=function(){var J,G,X,Y,Q,ie,te,Z,ve;return j(function(de){switch(de.g){case 1:return le(de,2),D(de,O,4);case 4:return J=de.h,Nt(e.l),G=null,X=new Map,Y={projection:null,hfov:null},Q=new Lt,Q.box("moov",ot).box("trak",ot).box("mdia",ot).R("mdhd",function(ae){G=jf(ae.reader,ae.version).timescale}).box("hdlr",function(ae){switch(ae=ae.reader,ae.skip(8),ae.Vc()){case"soun":X.set(u.ea,G);break;case"vide":X.set(u.Ca,G)}G=null}),t.type===u.Ca&&Q.box("minf",ot).box("stbl",ot).R("stsd",Rr).box("encv",ui).box("avc1",ui).box("avc3",ui).box("hev1",ui).box("hvc1",ui).box("dvav",ui).box("dva1",ui).box("dvh1",ui).box("dvhe",ui).box("dvc1",ui).box("dvi1",ui).box("vexu",ot).box("proj",ot).R("prji",function(ae){ae=ae.reader.Vc(),Y.projection=ae}).box("hfov",function(ae){ae=ae.reader.T()/1e3,Y.hfov=ae}),Q.parse(J,!0,!0),t.type===u.Ca&&qk(e,Y),X.has(t.type)?n.Y.timescale=X.get(t.type):G!=null&&(n.Y.timescale=G),ie=t.stream.segmentIndex,ie instanceof Qt&&(te=Ak(ie,n.startTime)),Z=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,D(de,e.g.Kh(t.type,J),5);case 5:return D(de,Kf(e.g.Z,t.type,J,null,t.stream,Z,t.Yc,s,!1,!1,te),6);case 6:V(de,0);break;case 2:throw ve=re(de),t.mb=null,ve}})},U=n.startTime,l&&(B=Vs(e.g.Z,t.type),B!=null&&(U=B)),e.g.xk(U,n.Y),d.push(P()))),$=t.Ia?t.Ia.i:-1,n.i!=$&&d.push(pk(e.g.Z,t.type,n.startTime)),D(W,Promise.all(d),0)}})}function sx(e,t,n,s,u,l,d,p){var g,v,T,b,M;return j(function(_){switch(_.g){case 1:if(g=vn,v=rc(e),le(_,2),t.lc=s,t.kc=u,d&&(t.df=d),p&&(t.ef=p),t.gf=n,T=e.j.sequenceMode||e.j.type=="HLS",b=null,t.type===g.Ca?b=e.h.get(g.ea):t.type===g.ea&&(b=e.h.get(g.Ca)),!(b&&b.stream&&b.stream.isAudioMuxedInVideo)){_.u(4);break}return D(_,kv(e.g.Z,b.type,n,s,u,T,b.stream.mimeType,b.stream.codecs,v),4);case 4:return D(_,kv(e.g.Z,t.type,n,s,u,T,l.mimeType||t.stream.mimeType,l.codecs||t.stream.codecs,v),6);case 6:V(_,0);break;case 2:throw M=re(_),t.lc=null,t.kc=null,t.df=null,t.ef=null,t.gf=null,M}})}function Kp(e,t,n,s,u,l,d,p){d=d===void 0?!1:d,p=p===void 0?!1:p;var g,v,T,b;return j(function(M){switch(M.g){case 1:return g=s.closedCaptions&&0<s.closedCaptions.size,e.i.shouldFixTimestampOffset&&(v=s.mimeType=="video/mp4"||s.mimeType=="audio/mp4",T=null,u.Y&&(T=u.Y.timescale),v&&T&&s.type==="video"&&e.j.type=="DASH"&&new Lt().box("moof",ot).box("traf",ot).R("tfdt",function(_){var L,O,P,U,B,$;return j(function(W){return L=Ff(_.reader,_.version),O=L.baseMediaDecodeTime,O?(P=-O/T,U=Number(t.gf)||0,U<P?(B=t.lc,$=t.kc,D(W,sx(e,t,P,B,$,u),0)):W.u(0)):W.return()})}).parse(l,!1,d)),D(M,Yp(e,t,n),2);case 2:return Nt(e.l),b=t.Yc,t.Yc=!1,D(M,e.g.Kh(t.type,l),3);case 3:return D(M,Kf(e.g.Z,t.type,l,u,s,g,b,p,d),4);case 4:Nt(e.l),ne(M)}})}function Yp(e,t,n){var s,u,l,d,p,g,v,T,b;return j(function(M){if(M.g==1)return s=t.stream.segmentIndex,s instanceof Qt&&(s.$a(e.j.presentationTimeline.Gb()),u=[],kk(s,function(_){u.push(_.Pe())})),l=Math.max(e.i.bufferBehind*e.C,e.j.presentationTimeline.h),d=_p(e.g.Z,t.type),d==null?(e.F==t&&(e.F=null),M.return()):(p=n-d,g=e.i.evictionGoal,v=e.j.presentationTimeline.Xb(),T=e.j.presentationTimeline.Fb(),b=p-l,T-v>g&&(b=Math.max(p-l,v-g-d)),b<=g?M.return():D(M,e.g.Z.remove(t.type,d,d+b,u),2));if(M.g!=4)return Nt(e.l),e.F?D(M,Yp(e,e.F,n),4):M.u(0);Nt(e.l),ne(M)})}function qp(e){return e&&e.type==ct&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Na(e,t,n,s){var u,l,d,p,g;return j(function(v){switch(v.g){case 1:if(u=n.Yb())return v.return(u);if(l=null,t.$){var T=t.$,b=T.h;n instanceof Jn&&(b=T.j),b.has(n)?(T=b.get(n),s&&(T.sh=s),l=T.ae):l=null}return l||(l=nc(n,t.stream,s||null,e.i.retryParameters,e.g.pc)),d=0,t.sa&&(d=t.sa.h),t.Hb=l,D(v,l.promise,2);case 2:if(p=v.h,t.Hb=null,g=p.data,!n.aesKey){v.u(3);break}return D(v,Xp(g,n.aesKey,d),4);case 4:g=v.h;case 3:return v.return(g)}})}function nc(e,t,n,s,u,l){l=l===void 0?!1:l;var d=e instanceof He?e:void 0,p=d?1:0;return e=Pa(e.O(),e.startByte,e.endByte,s,n),e.contentType=t.type,u.request(Wi,e,{type:p,stream:t,segment:d,isPreload:l})}function Qp(e,t,n,s){var u,l;return j(function(d){if(d.g==1)return t.Ic=!1,t.Sf=!1,t.Oe=0,t.Kc=!0,t.Ia=null,t.sa=null,t.$&&!e.m.has(t.stream)&&rr(t.$),s?(u=e.g.Qc(),l=e.g.Z.getDuration(),D(d,e.g.Z.remove(t.type,u+s,l),3)):D(d,bv(e.g.Z,t.type),4);if(d.g!=3)return Nt(e.l),n?D(d,e.g.Z.flush(t.type),3):d.u(3);Nt(e.l),t.Kc=!1,t.endOfStream=!1,t.Qa||t.zb||Hn(e,t,0),ne(d)})}function Hn(e,t,n){var s=t.type;(s!=ct||e.h.has(s))&&(t.zb=new ha(function(){var u;return j(function(l){if(l.g==1)return le(l,2),D(l,Hk(e,t),4);if(l.g!=2)return V(l,0);u=re(l),e.g&&e.g.onError(u),ne(l)})}).ia(n))}function Pr(e){e.zb!=null&&(e.zb.stop(),e.zb=null)}function Ys(e){return j(function(t){return e.Hb?D(t,e.Hb.abort(),0):t.u(0)})}function Jp(e,t,n){var s;return j(function(u){if(u.g==1)return n.code==3024?(t.Qa=!1,Pr(t),Hn(e,t,0),u.return()):D(u,E1(e.S),2);if(Nt(e.l),n.category===1&&n.code!=1003){if(t.Fc)return nx(e,!1),u.return();s=e.i.maxDisabledTime===0&&n.code==1011?1:e.i.maxDisabledTime,n.handled=e.g.disableStream(t.stream,s),n.handled&&(n.severity=1)}(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.i.failureCallback(n),ne(u)})}function Zp(e,t){t=t===void 0?!1:t;var n=n===void 0?!0:n,s,u,l,d,p;return j(function(g){if(g.g==1){if(s=Date.now()/1e3,u=e.i.minTimeBetweenRecoveries,!t){if(!e.i.allowMediaSourceRecoveries||s-e.M<u)return g.return(!1);e.M=s}return l=vn,(d=e.h.get(l.ea))&&(d.mb=null,d.lc=null,d.kc=null,n&&Oa(e,d),Ys(d).catch(function(){}),d.sa&&d.sa.dh(),Pr(d)),(p=e.h.get(l.Ca))&&(p.mb=null,p.lc=null,p.kc=null,n&&Oa(e,p),Ys(p).catch(function(){}),p.sa&&p.sa.dh(),Pr(p)),D(g,Iv(e.g.Z,rc(e)),2)}return!p||p.Kc||p.Qa||p.zb||Hn(e,p,0),!d||d.Kc||d.Qa||d.zb||Hn(e,d,0),g.return(!0)})}function qk(e,t){if(e.N.projection!=t.projection||e.N.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new Ie("spatialvideoinfo",n)}else n=new Ie("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.N=t}}function ic(e){return e.i.crossBoundaryStrategy!=="keep"}function e0(e){if(ic(e)){e.H.stop();var t=e.g.Qc(),n=e.h.get("video")||e.h.get("audio");n&&(n=n.mb)&&n.g!==null&&(t=n.g-t,0>t||1<t||(e.G=n.g+.1,e.H.ia(t)))}}function Qk(e,t,n){if(t.type===ct)return!1;var s=t.mb;if(!s)return!1;var u=n.Y;if(n=s.g!==u.g,e.i.crossBoundaryStrategy==="reset_to_encrypted"&&(s.encrypted||u.encrypted||(n=!1),s.encrypted&&(e.i.crossBoundaryStrategy="keep")),e.i.crossBoundaryStrategy==="RESET_ON_ENCRYPTION_CHANGE"&&s.encrypted==u.encrypted&&(n=!1),n&&t.Yc){var l=e.g.video,d=l.paused;Zp(e,!0).then(function(){var p=new Map().set("oldEncrypted",s.encrypted).set("newEncrypted",u.encrypted);e.g.onEvent(new Ie("boundarycrossed",p)),d||l.play()})}return n}function rc(e,t){t=t===void 0?!1:t;var n=new Map;return e.o.audio&&n.set("audio",e.o.audio),e.o.video&&n.set("video",e.o.video),t&&e.A&&n.set(ct,e.A),n}function oc(){}function t0(e,t,n,s,u){var l=u in s,d=l?n.constructor==Object&&Object.keys(s).length==0:n.constructor==Object&&Object.keys(n).length==0,p=l||d,g=!0,v;for(v in t){var T=u+"."+v,b=l?s[u]:n[v];p||v in n?t[v]===void 0?b===void 0||p?delete e[v]:e[v]=Hi(b):d?e[v]=t[v]:b.constructor==Object&&t[v]&&t[v].constructor==Object?(e[v]||(e[v]=Hi(b)),T=t0(e[v],t[v],b,s,T),g=g&&T):typeof t[v]!=typeof b||t[v]==null||typeof t[v]!="function"&&t[v].constructor!=b.constructor?(En("Invalid config, wrong type for "+T),g=!1):typeof n[v]=="function"&&n[v].length!=t[v].length?(ft("Unexpected number of arguments for "+T),e[v]=t[v]):e[v]=Array.isArray(e[v])?t[v].slice():t[v]:(En("Invalid config, unrecognized key "+T),g=!1)}return g}function sc(e,t){for(var n={},s=n,u=0,l=0;u=e.indexOf(".",u),!(0>u);)(u==0||e[u-1]!="\\")&&(l=e.substring(l,u).replace(/\\\./g,"."),s[l]={},s=s[l],l=u+1),u+=1;return s[e.substring(l).replace(/\\\./g,".")]=t,n}function qs(e,t){return e&&t}function ux(e,t){function n(l){for(var d=m(Object.keys(l)),p=d.next();!p.done;p=d.next())if(p=p.value,!(l[p]instanceof HTMLElement))if(u(l[p])&&Object.keys(l[p]).length===0)delete l[p];else{var g=l[p];Array.isArray(g)&&g.length===0||typeof l[p]=="function"?delete l[p]:u(l[p])&&(n(l[p]),Object.keys(l[p]).length===0&&delete l[p])}}function s(l,d){return Object.keys(l).reduce(function(p,g){var v=l[g];return d.hasOwnProperty(g)?v instanceof HTMLElement&&d[g]instanceof HTMLElement?v.isEqualNode(d[g])||(p[g]=v):u(v)&&u(d[g])?(v=s(v,d[g]),(0<Object.keys(v).length||!u(v))&&(p[g]=v)):Array.isArray(v)&&Array.isArray(d[g])?Wh(v,d[g])||(p[g]=v):Number.isNaN(v)&&Number.isNaN(d[g])||v!==d[g]&&(p[g]=v):p[g]=v,p},{})}function u(l){return l&&typeof l=="object"&&!Array.isArray(l)}return e=s(e,t),n(e),e}be("shaka.util.ConfigUtils",oc),oc.getDifferenceFromConfigObjects=ux,oc.convertToConfigObject=sc,oc.mergeConfigObjects=t0,be("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2});function ei(){}function ax(e){return e=lr(e),new en(e).Cb}function Ua(e,t,n){function s(p){Yn(l).setUint32(d,p.byteLength,!0),d+=4,l.set(Ze(p),d),d+=p.byteLength}if(!n||!n.byteLength)throw new q(2,6,6015);var u;typeof t=="string"?u=Fh(t,!0):u=t,e=lr(e),e=Fh(e,!0);var l=new Uint8Array(12+e.byteLength+u.byteLength+n.byteLength),d=0;return s(e),s(u),s(n),l}function n0(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=lr(e).split("skd://").pop(),Ua(e,n,t))}function uc(e,t){e===2&&(e=t.drmInfo)&&Af(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}be("shaka.drm.FairPlay",ei),ei.commonFairPlayResponse=function(e,t){if(e===2&&(e=t.originalRequest.drmInfo)&&Af(e.keySystem)){try{var n=Ht(t.data)}catch{return}if(e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0),!e)try{var s=JSON.parse(n);s.ckc&&(n=s.ckc,e=!0),s.CkcMessage&&(n=s.CkcMessage,e=!0),s.License&&(n=s.License,e=!0)}catch{}e&&(t.data=Ei(Ii(n)))}},ei.muxFairPlayRequest=function(e,t){uc(e,t)},ei.expressplayFairPlayRequest=function(e,t){if(e===2){var n=t.drmInfo;n&&Af(n.keySystem)&&uc(e,t)}},ei.conaxFairPlayRequest=function(e,t){uc(e,t)},ei.ezdrmFairPlayRequest=function(e,t){uc(e,t)},ei.verimatrixFairPlayRequest=function(e,t){e===2&&(e=t.drmInfo)&&Af(e.keySystem)&&(e=Ze(t.body),e=wr(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=zi("spc="+e))},ei.muxInitDataTransform=function(e,t,n){return n0(e,t,n)},ei.expressplayInitDataTransform=function(e,t,n){return n0(e,t,n)},ei.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=lr(e).split("skd://").pop().split("?").shift(),n=f.atob(n);var s=new ArrayBuffer(2*n.length);s=Py(s);for(var u=0,l=n.length;u<l;u++)s[u]=n.charCodeAt(u);return Ua(e,s,t)},ei.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=lr(e).split(";").pop(),Ua(e,n,t))},ei.verimatrixInitDataTransform=function(e,t,n){return n0(e,t,n)},ei.initDataTransform=Ua,ei.defaultGetContentId=ax,ei.isFairPlaySupported=function(){var e;return j(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},le(t,2),D(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(re(t),t.return(!1))})};function ac(){this.g=null}ac.prototype.configure=function(e){this.g=e},ac.prototype.getConfiguration=function(){return this.g},ac.prototype.create=function(e){var t;if(this.g.language){var n=Jk(e,this.g.language);n.length&&(t=n)}t||(t=e.filter(function(l){return l.primary}),t=t.length?t:e),e=Zk(t,this.g.role),e.length&&(t=e),this.g.videoLayout&&(e=rA(t,this.g.videoLayout),e.length&&(t=e)),this.g.Ec&&(e=iA(t,this.g.Ec),e.length&&(t=e));var s=[this.g.channelCount,this.g.preferredAudioChannelCount];if(e=s.filter(function(l,d){return l&&s.indexOf(l)===d}),e.length){for(e=m(e),n=e.next();!n.done;n=e.next())if(n=nA(t,n.value),n.length){t=n;break}}this.g.Jc&&(e=eA(t,this.g.Jc),e.length&&(t=e)),this.g.Ed&&(e=tA(t,this.g.Ed),e.length&&(t=e)),e=oA(t,this.g.spatialAudio),e.length&&(t=e);var u=[this.g.audioCodec,this.g.Gd].concat(S(this.g.preferredAudioCodecs));if(e=u.filter(function(l,d){return l&&u.indexOf(l)===d}),e.length){for(e=m(e),n=e.next();!n.done;n=e.next())if(n=sA(t,n.value),n.length){t=n;break}}return new Nf(t[0],t,!(this.g.codecSwitchingStrategy=="smooth"&&xs()))};function Jk(e,t){t=Tt(t);var n=vf(t,e.map(function(s){return up(s)}));return n?e.filter(function(s){return n==up(s)}):[]}function Zk(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function eA(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function tA(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function nA(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount>t)}).sort(function(n,s){return n.audio||s.audio?n.audio?s.audio?(s.audio.channelsCount||0)-(n.audio.channelsCount||0):1:-1:0})}function iA(e,t){if(t=="AUTO"){var n=e.some(function(s){return!!(s.video&&s.video.hdr&&s.video.hdr=="HLG")});t=Bw(n)}return e.filter(function(s){return!(s.video&&s.video.hdr&&s.video.hdr!=t)})}function rA(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function oA(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function sA(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function lc(){}function Qs(){var e=1/0,t=Be();navigator.connection&&navigator.connection.saveData&&(e=360);var n={retryParameters:nr(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(p,g,v){return f.shakaMediaKeysPolyfill==="apple"&&g=="skd"&&(g=v.serverCertificate,v=ax(p),p=Ua(p,v,g)),p},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},s="reload",u=!1;xs()&&t.cd()&&(s="smooth",u=!0),u={retryParameters:nr(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:fc,manifestPreprocessorTXml:cc,sequenceMode:!1,multiTypeVariantsAllowed:u,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:t.bd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:fc,manifestPreprocessorTXml:cc,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var l={trackSelectionCallback:function(p){return j(function(g){return g.return(p)})},downloadSizeCallback:function(p){var g;return j(function(v){return v.g==1?navigator.storage&&navigator.storage.estimate?D(v,navigator.storage.estimate(),3):v.return(!0):(g=v.h,v.return(g.usage+p<.95*g.quota))})},progressCallback:function(p,g){return qs([p,g])},usePersistentLicense:!0,numberOfParallelDownloads:5},d={drm:n,manifest:u,streaming:{retryParameters:nr(),failureCallback:function(p){return qs([p])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:s,addExtraFeaturesToSourceBuffer:function(p){return qs([p],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(p,g){return qs([p,g])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:l,abrFactory:function(){return new qt},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(ac,[null].concat(S(lt.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:5,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:30,repeatMode:0}};return l.trackSelectionCallback=function(p){return j(function(g){return g.return(uA(p,d.preferredAudioLanguage,d.preferredVideoHdrLevel))})},t.Ua(d)}function lx(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function Or(e,t,n){var s={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return t0(e,t,n||Qs(),s,"")}function uA(e,t,n){var s=n;s=="AUTO"&&(n=e.some(function(p){return!!(p.hdr&&p.hdr=="HLG")}),s=Bw(n));var u=e.filter(function(p){return!(p.type!="variant"||p.hdr&&p.hdr!=s)});n=[];var l=vf(t,u.map(function(p){return p.language}));l&&(n=u.filter(function(p){return Tt(p.language)==l})),n.length==0&&(n=u.filter(function(p){return p.primary})),n.length==0&&(u.map(function(p){return p.language}),n=u);var d=n.filter(function(p){return p.height&&480>=p.height});for(d.length&&(d.sort(function(p,g){return g.height-p.height}),n=d.filter(function(p){return p.height==d[0].height})),t=[],n.length&&(u=Math.floor(n.length/2),n.sort(function(p,g){return p.bandwidth-g.bandwidth}),t.push(n[u])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=ct&&n.type!="image"||t.push(n);return t}function fc(e){return qs([e],e)}function cc(e){return qs([e],e)}be("shaka.util.PlayerConfiguration",lc),lc.mergeConfigObjects=Or,lc.createDefaultForLL=lx,lc.createDefault=Qs;function aA(){this.g=null,this.h=[]}function i0(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var s=e.next();!s.done;s=e.next())s=s.value,n+=s.state==t?s.duration:0;return n}function lA(e){function t(l){return{timestamp:l.timestamp,state:l.state,duration:l.duration}}for(var n=[],s=m(e.h),u=s.next();!u.done;u=s.next())n.push(t(u.value));return e.g&&n.push(t(e.g)),n}function fA(){this.i=this.h=null,this.g=[]}function r0(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function dc(){this.B=this.W=NaN,this.l="",this.j=this.gi=this.s=this.A=this.K=this.C=this.o=this.m=this.I=this.F=this.i=this.S=this.U=this.M=this.N=this.P=NaN,this.L=0,this.G=this.H=NaN,this.g=new aA,this.h=new fA}function cA(e,t,n){e.P=t,e.N=n}function fx(e,t,n){e.W=t,e.B=n}function dA(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}function cx(e,t){e.j=isNaN(e.j)?t:e.j+t}function hA(e){var t=e.W,n=e.B,s=e.l,u=e.A,l=e.N,d=e.P,p=e.M,g=e.U,v=e.S,T=e.s,b=e.i,M=e.F,_=e.I,L=e.m,O=i0(e.g,"playing"),P=i0(e.g,"paused"),U=i0(e.g,"buffering"),B=e.o,$=e.C,W=e.K,J=e.gi,G=e.j,X=e.L,Y=e.H,Q=e.G,ie=lA(e.g),te=[];e=m(e.h.g);for(var Z=e.next();!Z.done;Z=e.next())Z=Z.value,te.push({timestamp:Z.timestamp,id:Z.id,type:Z.type,fromAdaptation:Z.fromAdaptation,bandwidth:Z.bandwidth});return{width:t,height:n,currentCodecs:s,streamBandwidth:u,decodedFrames:l,droppedFrames:d,corruptedFrames:p,stallsDetected:g,gapsJumped:v,estimatedBandwidth:T,completionPercent:b,loadLatency:M,manifestTimeSeconds:_,drmTimeSeconds:L,playTime:O,pauseTime:P,bufferingTime:U,licenseTime:B,liveLatency:$,maxSegmentDuration:W,manifestSizeBytes:J,bytesDownloaded:G,nonFatalErrorCount:X,manifestPeriodCount:Y,manifestGapCount:Q,stateHistory:ie,switchHistory:te}}function _i(e,t,n,s){Ct.call(this),this.N=e,this.W=t,this.Oa=s.networkingEngine,this.m=n,this.B=null,this.Ka=0,this.ab=s.hd,this.G=s.nk,this.eb=s.pk,this.g=s.config,this.l=this.H=this.h=null,this.wa=!1,this.I=s.Ck,this.ya=!1,this.i=null,this.na=!1,this.j=this.F=null,this.ha=!1,this.M=new Map,this.za=!1,this.Pa=s.Bk,this.ba=new dc,this.va=new _t,this.A=new _t,this.P=null,this.s=!1,this.ka=s.ej,this.U=this.o=null,this.Za=s.dj,this.S=!1,this.L=[],this.K=[],this.C=!0}ue(_i,Ct);function Ba(e,t,n){(e=t?e.K:e.L)?e.push(n):n()}function pA(e){if(e.K)for(var t=m(e.K),n=t.next();!n.done;n=t.next())n=n.value,n();e.K=null}function dx(e,t){if(e.P=t,e.S=!0,e.L){t=m(e.L);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.L=null}y=_i.prototype,y.getStartTime=function(){return this.m},y.nd=function(){return this.N},y.Fg=function(){return this.h};function gA(e){return e.ha=!0,e.j}function mA(e){return e.ya=!0,e.I}y.getStats=function(){return this.ba};function yA(e){return e.na=!0,e.i}y.Mj=function(){return this.o?Fo(this.o):null},y.Lj=function(){return this.U?jo(this.U):null};function vA(e){return e.za=!0,e.M}function xA(e,t,n){e.j=t,e.F=n}y.start=function(){var e=this;(function(){var t;return j(function(n){switch(n.g){case 1:return D(n,Promise.resolve(),2);case 2:return le(n,3),D(n,wA(e),5);case 5:if(Ko(e),f.shakaMediaKeysPolyfill==="webkit"){n.u(6);break}return D(n,hx(e),7);case 7:Ko(e);case 6:if(!e.ka){n.u(8);break}return D(n,TA(e),9);case 9:Ko(e);case 8:if(!e.ka||!e.i){n.u(10);break}return D(n,Cb(e.i),11);case 11:Ko(e);case 10:e.A.resolve(),V(n,0);break;case 3:t=re(n),t instanceof q&&(t.code==7001||t.code==7003)||e.A.reject(t),ne(n)}})})()},y.dispatchEvent=function(e){return this.P?this.P.dispatchEvent(e):Ct.prototype.dispatchEvent.call(this,e)},y.onError=function(e){e.severity===2&&(this.A.reject(e),this.destroy());var t=new Map().set("detail",e);t=new Ie("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function Ko(e){if(e.s)throw new q(2,7,7003)}function o0(e,t){e.dispatchEvent(new Ie("onstatechange",new Map().set("state",t)))}function wA(e){var t,n,s,u,l,d;return j(function(p){switch(p.g){case 1:if(o0(e,"manifest-parser"),e.l||(e.H=rv(e.N,e.W),e.l=e.H(),e.l.configure(e.g.manifest,function(){return e.C})),t=Date.now()/1e3,o0(e,"manifest"),e.h){p.u(2);break}return D(p,e.l.start(e.N,e.eb),3);case 3:return e.h=p.h,D(p,SA(e),2);case 2:return e.va.resolve(),n=new Ie("manifestparsed",void 0),D(p,Promise.resolve(),5);case 5:if(e.dispatchEvent(n),e.h.variants.length==0)throw new q(2,4,4036);if(CA(e.h),s=ev(e.G,e.h),!s){p.u(6);break}return u=new Ie("trackschanged",void 0),D(p,Promise.resolve(),7);case 7:Ko(e),e.dispatchEvent(u);case 6:l=Date.now()/1e3,d=l-t,e.ba.I=d,ne(p)}})}function hx(e,t){var n,s,u,l;return j(function(d){switch(d.g){case 1:return!e.h||e.i?d.return():(o0(e,"drm-engine"),e.Ka=Date.now()/1e3,e.i=e.ab(),e.G.h=e.i,e.i.configure(e.g.drm,function(){return e.C}),n=Cf(e.h.variants),s=!0,e.h&&e.h.presentationTimeline&&(s=e.h.presentationTimeline.V()),D(d,F1(e.i,n,e.h.offlineSessionIds,s),2));case 2:if(Ko(e),!t){d.u(3);break}return D(d,e.i.fc(t),4);case 4:Ko(e);case 3:return D(d,Z1(e.G,e.h),5);case 5:if(u=d.h,!u){d.u(0);break}return l=new Ie("trackschanged",void 0),D(d,Promise.resolve(),7);case 7:e.dispatchEvent(l),ne(d)}})}y.configure=function(e,t){e=sc(e,t),Or(this.g,e)},y.getConfiguration=function(){return Hi(this.g)};function SA(e){var t,n,s,u,l,d;return j(function(p){if(e.B||(e.B=e.g.adaptationSetCriteriaFactory(),e.B.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredVariantRole,channelCount:e.g.preferredAudioChannelCount,Ec:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,Jc:e.g.preferredAudioLabel,Ed:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",Gd:"",Fe:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),e.Za&&(t=e.g.abrFactory,e.F=t,e.j=t(),e.j.configure(e.g.abr)),n=px(e),!n||e.h.variants.length!=1&&e.h.type!="HLS")return p.u(0);for(s=[],u=m([n.video,n.audio]),l=u.next();!l.done;l=u.next())(d=l.value)&&!d.segmentIndex&&s.push(d.createSegmentIndex());return 0<s.length?D(p,Promise.all(s),0):p.u(0)})}function TA(e){var t,n,s,u,l;return j(function(d){return!e.o&&(t=px(e))&&(e.o=t),e.o?(n=e.h.presentationTimeline.V(),s=[],u=e.o,u.video&&s.push(s0(e,u.video,n)),u.audio&&s.push(s0(e,u.audio,n)),(l=Es(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&S1(u.audio,l,e.g)&&(s.push(s0(e,l,n)),e.U=l),D(d,Promise.all(s),0)):d.u(0)})}function px(e){var t=Cf(e.h.variants);return t=e.B.create(t),e.j.configure(e.g.abr),e.j.setVariants(Array.from(t.values())),e.j.chooseVariant()}function s0(e,t,n){var s,u,l,d,p;return j(function(g){return g.g==1?(s=e.g.streaming.segmentPrefetchLimit||2,u=new Zf(s,t,function(v,T,b){return nc(v,T,b||null,e.g.streaming.retryParameters,e.Oa,e.C)},!1),e.M.set(t.id,u),t.segmentIndex?g.u(2):D(g,t.createSegmentIndex(),2)):(l=typeof e.m=="number"?e.m:0,d=t.segmentIndex.Wb(l),p=null,d&&(p=d.current(),p||(p=d.next().value)),p||(p=ir(t.segmentIndex)),p?n?p.Y?D(g,Qv(u,p.Y),0):g.u(0):D(g,La(u,p.startTime),0):g.u(0))})}y.fl=function(){return this.A},y.destroy=function(){var e=this,t,n,s;return j(function(u){switch(u.g){case 1:if(e.s=!0,!e.l||e.wa){u.u(2);break}return D(u,e.l.stop(),2);case 2:if(!e.j||e.ha){u.u(4);break}return D(u,e.j.stop(),4);case 4:if(e.I&&!e.ya&&e.I.release(),!e.i||e.na){u.u(6);break}return D(u,e.i.destroy(),6);case 6:if(0<e.M.size&&!e.za)for(t=m(e.M.values()),n=t.next();!n.done;n=t.next())s=n.value,rr(s);ne(u)}})};function CA(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}be("shaka.media.PreloadManager",_i),_i.prototype.destroy=_i.prototype.destroy,_i.prototype.waitForFinish=_i.prototype.fl,_i.prototype.getPrefetchedTextTrack=_i.prototype.Lj,_i.prototype.getPrefetchedVariantTrack=_i.prototype.Mj;function Yo(e,t){Ct.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{gd:null,fd:Js,Sc:function(s,u){return Nr(n,"enter",s,u)}},{gd:Fa,fd:Js,Sc:function(s,u){return Nr(n,"enter",s,u)}},{gd:ja,fd:Js,Sc:function(s,u){return Nr(n,"enter",s,u)}},{gd:Js,fd:Fa,Sc:function(s,u){return Nr(n,"exit",s,u)}},{gd:Js,fd:ja,Sc:function(s,u){return Nr(n,"exit",s,u)}},{gd:Fa,fd:ja,Sc:function(s,u){u?Nr(n,"skip",s,u):(Nr(n,"enter",s,u),Nr(n,"exit",s,u))}},{gd:ja,fd:Fa,Sc:function(s,u){return Nr(n,"skip",s,u)}}],this.h=new Ee,this.h.D(this.i,"regionremove",function(s){n.g.delete(s.region)})}ue(Yo,Ct),Yo.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Ct.prototype.release.call(this)},Yo.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.h.values()),s=n.next();!s.done;s=n.next()){s=s.value;var u=this.g.get(s),l=e<s.startTime?Fa:e>s.endTime?ja:Js;this.g.set(s,l);for(var d=m(this.m),p=d.next();!p.done;p=d.next())p=p.value,p.gd==u&&p.fd==l&&p.Sc(s,t)}}};function Nr(e,t,n,s){t=new Ie(t,new Map([["region",n],["seeking",s]])),e.dispatchEvent(t)}var Fa=1,Js=2,ja=3;function qo(e,t,n){var s,u,l,d,p,g,v;return j(function(T){switch(T.g){case 1:var b=new en(e).ob.split("/").pop().split(".");return s=b.length==1?"":b.pop().toLowerCase(),(u=bA.get(s))?T.return(u):(l=0,d=fn([e],n),le(T,2),d.method="HEAD",D(T,t.request(l,d).promise,4));case 4:p=T.h,u=p.headers["content-type"],V(T,3);break;case 2:if(g=re(T),!g||g.code!=1002&&g.code!=1001){T.u(3);break}return d.method="GET",D(T,t.request(l,d).promise,6);case 6:v=T.h,u=v.headers["content-type"];case 3:return T.return(u?u.toLowerCase().split(";").shift():"")}})}var bA=new Map().set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html");/*
		 @license
		 Copyright 2013 Ali Al Dallal

		 Licensed under the MIT license.

		 Permission is hereby granted, free of charge, to any person obtaining a copy
		 of this software and associated documentation files (the "Software"), to deal
		 in the Software without restriction, including without limitation the rights
		 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
		 copies of the Software, and to permit persons to whom the Software is
		 furnished to do so, subject to the following conditions:

		 The above copyright notice and this permission notice shall be included in
		 all copies or substantial portions of the Software.

		 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
		 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
		 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
		 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
		 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
		 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
		 SOFTWARE.
		*/for(var so={ach:"Lwo",ady:"Адыгэбзэ",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Tɕɥi",ar:"العربية","ar-AR":"العربية","ar-MA":"العربية","ar-SA":"العربية (السعودية)","ay-BO":"Aymar aru",az:"Azərbaycan dili","az-AZ":"Azərbaycan dili","be-BY":"Беларуская",bg:"Български","bg-BG":"Български",bn:"বাংলা","bn-IN":"বাংলা (ভারত)","bn-BD":"বাংলা(বাংলাদেশ)","bs-BA":"Bosanski",ca:"Català","ca-ES":"Català",cak:"Maya Kaqchikel","ck-US":"ᏣᎳᎩ (tsalagi)",cs:"Čeština","cs-CZ":"Čeština",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (Österreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbšćina",el:"Ελληνικά","el-GR":"Ελληνικά",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Español","es-AR":"Español (Argentine)","es-419":"Español (Latinoamérica)","es-CL":"Español (Chile)","es-CO":"Español (Colombia)","es-EC":"Español (Ecuador)","es-ES":"Español (España)","es-LA":"Español (Latinoamérica)","es-NI":"Español (Nicaragua)","es-MX":"Español (México)","es-US":"Español (Estados Unidos)","es-VE":"Español (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"فارسی","fa-IR":"فارسی","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Føroyskt",fr:"Français","fr-CA":"Français (Canada)","fr-FR":"Français (France)","fr-BE":"Français (Belgique)","fr-CH":"Français (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avañe'ẽ","gu-IN":"ગુજરાતી","gx-GR":"Ἑλληνική ἀρχαία",he:"עברית‏","he-IL":"עברית‏",hi:"हिन्दी","hi-IN":"हिन्दी",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbšćina",ht:"Kreyòl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"Հայերեն",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"Íslenska","is-IS":"Íslenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"日本語","ja-JP":"日本語","jv-ID":"Basa Jawa","ka-GE":"ქართული","kk-KZ":"Қазақша",km:"ភាសាខ្មែរ","km-KH":"ភាសាខ្មែរ",kab:"Taqbaylit",kn:"ಕನ್ನಡ","kn-IN":"ಕನ್ನಡ (India)",ko:"한국어","ko-KR":"한국어 (韩国)",ku:"Kurdî","ku-TR":"Kurdî",la:"Latin","la-VA":"Latin",lb:"Lëtzebuergesch","li-NL":"Lèmbörgs",lt:"Lietuvių","lt-LT":"Lietuvių",lv:"Latviešu","lv-LV":"Latviešu",mai:"मैथिली, মৈথিলী","mg-MG":"Malagasy",mk:"Македонски","mk-MK":"Македонски (Македонски)",ml:"മലയാളം","ml-IN":"മലയാളം","mn-MN":"Монгол",mr:"मराठी","mr-IN":"मराठी",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"ဗမာစကာ",nb:"Norsk (bokmål)","nb-NO":"Norsk (bokmål)",ne:"नेपाली","ne-NP":"नेपाली",nl:"Nederlands","nl-BE":"Nederlands (België)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"ଓଡ଼ିଆ",pa:"ਪੰਜਾਬੀ","pa-IN":"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",pl:"Polski","pl-PL":"Polski","ps-AF":"پښتو",pt:"Português","pt-BR":"Português (Brasil)","pt-PT":"Português (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Română","ro-RO":"Română",ru:"Русский","ru-RU":"Русский","sa-IN":"संस्कृतम्","se-NO":"Davvisámegiella","si-LK":"පළාත",sk:"Slovenčina","sk-SK":"Slovenčina (Slovakia)",sl:"Slovenščina","sl-SI":"Slovenščina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"Српски","sr-RS":"Српски (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"தமிழ்","ta-IN":"தமிழ்",te:"తెలుగు","te-IN":"తెలుగు",tg:"забо́ни тоҷикӣ́","tg-TJ":"тоҷикӣ",th:"ภาษาไทย","th-TH":"ภาษาไทย (ประเทศไทย)",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Türkçe","tr-TR":"Türkçe","tt-RU":"татарча",uk:"Українська","uk-UA":"Українська",ur:"اردو","ur-PK":"اردو",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Tiếng Việt","vi-VN":"Tiếng Việt","xh-ZA":"isiXhosa",yi:"ייִדיש","yi-DE":"ייִדיש (German)",zh:"中文","zh-HANS":"中文简体","zh-HANT":"中文繁體","zh-CN":"中文（中国）","zh-HK":"中文（香港）","zh-SG":"中文（新加坡）","zh-TW":"中文（台灣）","zu-ZA":"isiZulu"},gx=m(Object.keys(so)),u0=gx.next();!u0.done;u0=gx.next()){var mx=u0.value;so[mx.toLowerCase()]=so[mx]}function yx(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(d){return yx(d,e)}).join("");if(!e.payload)return e.payload;var n=[],s=e.fontWeight>=Cs,u=e.fontStyle==bs,l=e.textDecoration.includes(kr);return s&&n.push(["b"]),u&&n.push(["i"]),l&&n.push(["u"]),u=e.color,u==""&&t&&(u=t.color),s="",(u=vx(u))&&(s+="."+u),u=e.backgroundColor,u==""&&t&&(u=t.backgroundColor),(t=vx(u))&&(s+=".bg_"+t),s&&n.push(["c",s]),n.reduceRight(function(d,p){var g=m(p);return p=g.next().value,g=g.next().value,"<"+p+(g===void 0?"":g)+">"+d+"</"+p+">"},e.payload)}function vx(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function a0(e,t){var n=[];e=m(xx(e));for(var s=e.next();!s.done;s=e.next())if(s=s.value,s.isContainer)n.push.apply(n,S(a0(s.nestedCues,s)));else{var u=s.clone();u.nestedCues=[],u.payload=yx(s,t),n.push(u)}return n}function xx(e){var t=[];e=m(e);for(var n=e.next(),s={};!n.done;s={ig:void 0},n=e.next())s.ig=n.value,t.some(function(u){return function(l){return df(u.ig,l)}}(s))||t.push(s.ig);return t}function kA(e){function t(s){for(var u=5381,l=s.length;l;)u=33*u^s.charCodeAt(--l);return(u>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function wx(e,t){var n=a0(t),s=[];t=e.cues?Array.from(e.cues):[],n=m(n);for(var u=n.next(),l={};!u.done;l={pd:void 0},u=n.next())l.pd=u.value,!t.some(function(d){return function(p){return p.startTime==d.pd.startTime&&p.endTime==d.pd.endTime&&p.text==d.pd.payload}}(l))&&l.pd.payload&&(u=kA(l.pd))&&s.push(u);for(t=s.slice().sort(function(d,p){return d.startTime!=p.startTime?d.startTime-p.startTime:d.endTime!=p.endTime?d.endTime-p.startTime:"line"in VTTCue.prototype?s.indexOf(p)-s.indexOf(d):s.indexOf(d)-s.indexOf(p)}),t=m(t),n=t.next();!n.done;n=t.next())e.addCue(n.value)}function l0(e,t){var n=!1;e.mode==="disabled"&&(n=!0,e.mode="hidden");for(var s=0;s<e.cues.length;){var u=e.cues[s];t(u)?e.removeCue(u):s++}n&&(e.mode="disabled")}function cn(e){var t=this;this.i=e,this.l=new Ee,this.j=null,this.h=new Map,this.g=-1,this.s=!1,this.o=null,this.B=function(){t.l.Ja(t.i,"textchanged",t.m),t.l.Ja(t.j.textTracks,"change",t.A);for(var n=m(t.h.values()),s=n.next();!s.done;s=n.next())s.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){var n=new Map,s=t.i.Dc();s=m(s);for(var u=s.next();!u.done;u=s.next()){if(u=u.value,t.h.has(u.id)){var l=t.h.get(u.id);u.active||l.track.mode==="disabled"||(l.track.mode="disabled"),t.h.delete(u.id)}else{l=t.j.ownerDocument.createElement("track"),l.kind=AA(u);var d=l,p=void 0;if(u.label)p=u.label;else if(u.language)if(u.language in so)p=so[u.language];else{var g=yf(u.language);g in so&&(p=so[g]+" ("+u.language+")")}p||(p=u.originalTextId,u.language&&u.language!==u.originalTextId&&(p+=" ("+u.language+")")),d.label=p,u.language in so&&(l.srclang=u.language),Be().Da()==="CHROMIUM"&&(l.src="data:,WEBVTT"),l.track.mode="disabled",t.j.appendChild(l)}n.set(u.id,l),u.active&&(t.g=u.id)}for(s=m(t.h.values()),u=s.next();!u.done;u=s.next())u.value.remove();-1<t.g&&(n.has(t.g)?(s=n.get(t.g).track,s.mode==="disabled"&&(s.mode=t.s?"showing":"hidden")):t.g=-1),t.h=n},this.A=function(){if(!t.o){var n=t.j;t.o=new ht(function(){if(t.o=null,t.j===n){var s=-1,u=!1;if(t.h.has(t.g)){var l=t.h.get(t.g);l.track.mode==="showing"?(s=t.g,u=!0):l.track.mode==="hidden"&&(s=t.g)}if(!u)for(u=m(t.h),l=u.next();!l.done;l=u.next()){var d=m(l.value);if(l=d.next().value,d=d.next().value,d.track.mode==="showing"){s=l;break}else 0>s&&d.track.mode==="hidden"&&(s=l)}for(u=m(t.h),l=u.next();!l.done;l=u.next())d=m(l.value),l=d.next().value,d=d.next().value,l!==s&&d.track.mode!=="disabled"&&(d.track.mode="disabled");t.g!==s&&(t.g=s,-1<s&&t.i.jh({id:s})),t.i.oh(-1<s&&t.h.get(s).track.mode==="showing")}}).ia(0)}},this.l.D(e,"loaded",function(){return t.enableTextDisplayer()}),this.enableTextDisplayer()}y=cn.prototype,y.configure=function(){},y.remove=function(e,t){if(this.i)this.h.has(this.g)&&l0(this.h.get(this.g).track,function(n){return n.startTime<t&&n.endTime>e});else return!1;return!0},y.append=function(e){this.h.has(this.g)&&wx(this.h.get(this.g).track,e)},y.destroy=function(){return this.i&&(this.j&&this.B(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},y.isTextVisible=function(){return this.s},y.setTextVisibility=function(e){if(this.s=e,this.h.has(this.g)){var t=this.h.get(this.g).track;t.mode!=="disabled"&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&this.i.m===3)if(t=Array.from(this.i.h.textTracks).filter(function(s){return["captions","subtitles","forced"].includes(s.kind)}),e){e=null,t=m(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.mode==="showing"){e=null;break}else e||n.mode!=="hidden"||(e=n);e&&(e.mode="showing")}else for(e=m(t),t=e.next();!t.done;t=e.next())t=t.value,t.mode==="showing"&&(t.mode="hidden")},y.setTextLanguage=function(){},y.enableTextDisplayer=function(){!this.j&&this.i&&this.i.m===2&&(this.j=this.i.h,this.l.Aa(this.i,"unloading",this.B),this.l.D(this.i,"textchanged",this.m),this.l.D(this.j.textTracks,"change",this.A),this.m())};function AA(e){var t=Be();return e.forced&&t.Da()==="WEBKIT"?"forced":e.kind==="caption"||e.roles&&e.roles.some(function(n){return n.includes("transcribes-spoken-dialog")})&&e.roles.some(function(n){return n.includes("describes-music-and-sound")})?"captions":"subtitles"}be("shaka.text.NativeTextDisplayer",cn),cn.prototype.enableTextDisplayer=cn.prototype.enableTextDisplayer,cn.prototype.setTextLanguage=cn.prototype.setTextLanguage,cn.prototype.setTextVisibility=cn.prototype.setTextVisibility,cn.prototype.isTextVisible=cn.prototype.isTextVisible,cn.prototype.destroy=cn.prototype.destroy,cn.prototype.append=cn.prototype.append,cn.prototype.remove=cn.prototype.remove,cn.prototype.configure=cn.prototype.configure;function Mn(e,t){for(st("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,e=m(Array.from(this.h.textTracks)),t=e.next();!t.done;t=e.next())t=t.value,t.kind!=="metadata"&&t.kind!=="chapters"&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}y=Mn.prototype,y.configure=function(){},y.remove=function(e,t){return this.g?(l0(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},y.append=function(e){this.g&&wx(this.g,e)},y.destroy=function(){return this.g&&(l0(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},y.isTextVisible=function(){return this.g?this.g.mode=="showing":!1},y.setTextVisibility=function(e){e&&!this.g&&Sx(this),this.g&&(this.g.mode=e?"showing":"hidden")},y.setTextLanguage=function(){},y.enableTextDisplayer=function(){Sx(this)};function Sx(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}be("shaka.text.SimpleTextDisplayer",Mn),Mn.prototype.enableTextDisplayer=Mn.prototype.enableTextDisplayer,Mn.prototype.setTextLanguage=Mn.prototype.setTextLanguage,Mn.prototype.setTextVisibility=Mn.prototype.setTextVisibility,Mn.prototype.isTextVisible=Mn.prototype.isTextVisible,Mn.prototype.destroy=Mn.prototype.destroy,Mn.prototype.append=Mn.prototype.append,Mn.prototype.remove=Mn.prototype.remove,Mn.prototype.configure=Mn.prototype.configure;function Rn(){}y=Rn.prototype,y.configure=function(){},y.remove=function(){},y.append=function(){},y.destroy=function(){},y.isTextVisible=function(){return!1},y.setTextVisibility=function(){},y.setTextLanguage=function(){},y.enableTextDisplayer=function(){},be("shaka.text.StubTextDisplayer",Rn),Rn.prototype.enableTextDisplayer=Rn.prototype.enableTextDisplayer,Rn.prototype.setTextLanguage=Rn.prototype.setTextLanguage,Rn.prototype.setTextVisibility=Rn.prototype.setTextVisibility,Rn.prototype.isTextVisible=Rn.prototype.isTextVisible,Rn.prototype.destroy=Rn.prototype.destroy,Rn.prototype.append=Rn.prototype.append,Rn.prototype.remove=Rn.prototype.remove,Rn.prototype.configure=Rn.prototype.configure;function _n(e,t){var n=this;this.m=!1,this.h=[],this.j=e,this.o=t,this.B=this.s=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.A=new ht(function(){n.j.paused||uo(n)}),$a(this),this.l=new Map,this.i=new Ee,this.i.D(document,"fullscreenchange",function(){uo(n,!0)}),this.i.D(this.j,"seeking",function(){uo(n,!0)}),this.i.D(this.j,"ratechange",function(){$a(n)}),this.i.D(this.j,"resize",function(){var s=n.j,u=s.videoWidth;s=s.videoHeight,u&&s?n.s=u/s:n.s=null}),this.C=null,"ResizeObserver"in f&&(this.C=new ResizeObserver(function(){uo(n,!0)}),this.C.observe(this.g)),this.F=new Map}y=_n.prototype,y.configure=function(e){this.B=e,$a(this),uo(this,!0)},y.append=function(e){var t=[].concat(S(this.h));e=m(xx(e));for(var n=e.next(),s={};!n.done;s={jg:void 0},n=e.next())s.jg=n.value,t.some(function(u){return function(l){return df(l,u.jg)}}(s))||this.h.push(s.jg);this.h.length&&$a(this),uo(this)},y.destroy=function(){return this.g&&(this.g.parentElement&&this.o.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.A&&(this.A.stop(),this.A=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.C&&(this.C.disconnect(),this.C=null)),Promise.resolve()},y.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(s){return s.startTime<e||s.endTime>=t}),uo(this,n>this.h.length),this.h.length||$a(this),!0},y.isTextVisible=function(){return this.m},y.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.o.appendChild(this.g),uo(this,!0)):this.g.parentElement&&this.o.removeChild(this.g)},y.setTextLanguage=function(e){e&&e!="und"?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},y.enableTextDisplayer=function(){};function $a(e){e.A&&(e.h.length?e.A.Fa((e.B?e.B.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.A.stop())}function EA(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function Tx(e,t,n,s,u){var l=!1,d=[],p=[];t=m(t);for(var g=t.next();!g.done;g=t.next()){g=g.value,u.push(g);var v=e.l.get(g),T=g.startTime<=s&&g.endTime>s,b=v?v.aj:null;v&&(d.push(v.kg),v.Xc&&d.push(v.Xc),T||(l=!0,e.l.delete(g),v=null)),T&&(p.push(g),v?EA(e,b)||(l=!0):(IA(e,g,u),v=e.l.get(g),b=v.aj,l=!0)),0<g.nestedCues.length&&b&&Tx(e,g.nestedCues,b,s,u),u.pop()}if(l){for(s=m(d),u=s.next();!u.done;u=s.next())u=u.value,u.parentElement&&u.parentElement.removeChild(u);for(p.sort(function(M,_){return M.startTime!=_.startTime?M.startTime-_.startTime:M.endTime-_.endTime}),p=m(p),s=p.next();!s.done;s=p.next())s=e.l.get(s.value),s.Xc?(s.Xc.contains(n)&&s.Xc.removeChild(n),n.appendChild(s.Xc),s.Xc.appendChild(s.kg)):n.appendChild(s.kg)}}function uo(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||t!==void 0&&t){t=m(e.F.values());for(var s=t.next();!s.done;s=t.next())Ea(s.value);Ea(e.g),e.l.clear(),e.F.clear()}e.m&&Tx(e,e.h,e.g,n,[])}}function IA(e,t,n){var s=1<n.length,u=s?"span":"div";t.lineBreak&&(u="br"),t.rubyTag&&(u=t.rubyTag),s=!s&&0<t.nestedCues.length;var l=document.createElement(u);if(u!="br"&&RA(e,l,t,n,s),n=null,t.region&&t.region.id){var d=t.region,p=e.s===4/3?2.5:1.9;if(n=d.id+"_"+d.width+"x"+d.height+(d.heightUnits==oi?"%":"px")+"-"+d.viewportAnchorX+"x"+d.viewportAnchorY+(d.viewportAnchorUnits==oi?"%":"px"),e.F.has(n))n=e.F.get(n);else{u=document.createElement("span");var g=d.heightUnits==oi?"%":"px",v=d.widthUnits==oi?"%":"px",T=d.viewportAnchorUnits==oi?"%":"px";u.id="shaka-text-region---"+n,u.classList.add("shaka-text-region"),u.style.position="absolute";var b=d.height,M=d.width;d.heightUnits===2&&(b=5.33*d.height,g="%"),d.widthUnits===2&&(M=d.width*p,v="%"),u.style.height=b+g,u.style.width=M+v,d.viewportAnchorUnits===2?(p=d.viewportAnchorY/75*100,g=d.viewportAnchorX/(e.s===4/3?160:210)*100,p-=d.regionAnchorY*b/100,g-=d.regionAnchorX*M/100,u.style.top=p+"%",u.style.left=g+"%"):(u.style.top=d.viewportAnchorY-d.regionAnchorY*b/100+T,u.style.left=d.viewportAnchorX-d.regionAnchorX*M/100+T),d.heightUnits!==0&&d.widthUnits!==0&&d.viewportAnchorUnits!==0&&(d=Math.max(0,Math.min(100-(parseInt(u.style.width.slice(0,-1),10)||0),parseInt(u.style.left.slice(0,-1),10)||0)),u.style.top=Math.max(0,Math.min(100-(parseInt(u.style.height.slice(0,-1),10)||0),parseInt(u.style.top.slice(0,-1),10)||0))+"%",u.style.left=d+"%"),u.style.display="flex",u.style.flexDirection="column",u.style.alignItems="center",u.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.F.set(n,u),n=u}}u=l,s&&(u=document.createElement("span"),u.classList.add("shaka-text-wrapper"),u.style.backgroundColor=t.backgroundColor,u.style.lineHeight="normal",l.appendChild(u)),e.l.set(t,{kg:l,aj:u,Xc:n})}function MA(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==pf?n:e==="left"||e==="start"&&t===ua||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===ua?"line-right":"center"}function RA(e,t,n,s,u){var l=t.style,d=n.nestedCues.length==0,p=1<s.length;l.whiteSpace="pre-wrap";var g=n.payload.replace(/\s+$/g,function(T){return" ".repeat(T.length)});if(l.webkitTextStrokeColor=n.textStrokeColor,l.webkitTextStrokeWidth=n.textStrokeWidth,l.color=n.color,l.direction=n.direction,l.opacity=n.opacity,l.paddingLeft=f0(n.linePadding,n,e.o),l.paddingRight=f0(n.linePadding,n,e.o),l.textCombineUpright=n.textCombineUpright,l.textShadow=n.textShadow,n.backgroundImage)l.backgroundImage="url('"+n.backgroundImage+"')",l.backgroundRepeat="no-repeat",l.backgroundSize="contain",l.backgroundPosition="center",n.backgroundColor&&(l.backgroundColor=n.backgroundColor),l.width="100%",l.height="100%";else{if(n.nestedCues.length)var v=t;else v=document.createElement("span"),t.appendChild(v);n.border&&(v.style.border=n.border),u||((t=_A(s,function(T){return T.backgroundColor}))?v.style.backgroundColor=t:g&&(v.style.backgroundColor="rgba(0, 0, 0, 0.8)")),g&&(v.setAttribute("translate","no"),v.textContent=g)}p&&!s[s.length-1].isContainer?l.display="inline":(l.display="flex",l.flexDirection="column",l.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(l.width="100%",l.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(l.width="100%",l.alignItems="end"),l.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),d||(l.margin="0"),l.fontFamily=n.fontFamily,l.fontWeight=n.fontWeight.toString(),l.fontStyle=n.fontStyle,l.letterSpacing=n.letterSpacing,l.fontSize=f0(n.fontSize,n,e.o,e.B?e.B.fontScaleFactor:1),s=n.line,s!=null&&(d=n.lineInterpretation,d==aa&&(d=1,p=16,e.s&&1>e.s&&(p=32),s=0>s?100+s/p*100:s/p*100),d==1&&(l.position="absolute",n.writingMode==No?(l.width="100%",n.lineAlign==Uo?l.top=s+"%":n.lineAlign=="end"&&(l.bottom=100-s+"%")):n.writingMode=="vertical-lr"?(l.height="100%",n.lineAlign==Uo?l.left=s+"%":n.lineAlign=="end"&&(l.right=100-s+"%")):(l.height="100%",n.lineAlign==Uo?l.right=s+"%":n.lineAlign=="end"&&(l.left=100-s+"%")))),l.lineHeight=n.lineHeight,e=MA(n),e=="line-left"?(l.cssFloat="left",n.position!==null&&(l.position="absolute",n.writingMode==No?(l.left=n.position+"%",l.width="auto"):l.top=n.position+"%")):e=="line-right"?(l.cssFloat="right",n.position!==null&&(l.position="absolute",n.writingMode==No?(l.right=100-n.position+"%",l.width="auto"):l.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(l.position="absolute",n.writingMode==No?(l.left=n.position+"%",l.width="auto"):l.top=n.position+"%"),l.textAlign=n.textAlign,l.textDecoration=n.textDecoration.join(" "),l.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&l.writingMode==n.writingMode||(l.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==No?l.width=n.size+"%":l.height=n.size+"%")}function f0(e,t,n,s){s=s===void 0?1:s;var u=(u=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(u[1]),unit:u[2]}:null;if(!u)return e;switch(e=u.unit,s*=u.value,e){case"%":return s/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*s/t.cellResolution.rows+"px";default:return s+e}}function _A(e,t){for(var n=e.length-1;0<=n;n--){var s=t(e[n]);if(s||s===0)return s}return null}be("shaka.text.UITextDisplayer",_n),_n.prototype.enableTextDisplayer=_n.prototype.enableTextDisplayer,_n.prototype.setTextLanguage=_n.prototype.setTextLanguage,_n.prototype.setTextVisibility=_n.prototype.setTextVisibility,_n.prototype.isTextVisible=_n.prototype.isTextVisible,_n.prototype.remove=_n.prototype.remove,_n.prototype.destroy=_n.prototype.destroy,_n.prototype.append=_n.prototype.append,_n.prototype.configure=_n.prototype.configure;function LA(e,t){function n(l){for(var d=l,p=m(t),g=p.next();!g.done;g=p.next())g=g.value,g.end&&g.start<l&&(d+=g.end-g.start);return l=Math.floor(d/3600),p=Math.floor(d/60%60),g=Math.floor(d%60),d=Math.floor(1e3*d%1e3),(10>l?"0":"")+l+":"+(10>p?"0":"")+p+":"+(10>g?"0":"")+g+"."+(100>d?10>d?"00":"0":"")+d}var s=a0(e);e=`WEBVTT

`,s=m(s);for(var u=s.next();!u.done;u=s.next())u=u.value,e+=n(u.startTime)+" --> "+n(u.endTime)+function(l){var d=[];switch(l.textAlign){case"left":d.push("align:left");break;case"right":d.push("align:right");break;case hr:d.push("align:middle");break;case"start":d.push("align:start");break;case"end":d.push("align:end")}switch(l.writingMode){case"vertical-lr":d.push("vertical:lr");break;case"vertical-rl":d.push("vertical:rl")}return d.length?" "+d.join(" "):""}(u)+`
`,e+=u.payload+`

`;return e}be("shaka.text.WebVttGenerator",function(){});function c0(e,t){this.h=e,this.g=t,this.i=void 0,this.s=!1,this.F=!0,this.l=this.B=!1,this.o=this.m=void 0,this.A=0,this.G=!1,this.C=new Ee,this.j=null}c0.prototype.setMediaElement=function(e){this.j=e,UA(this)},c0.prototype.configure=function(e){this.g=e};function DA(e){e.s=!1,e.F=!0,e.B=!1,e.l=!1,e.m=0,e.o=0,e.A=0,e.G=!1,e.j=null,e.C.Ra()}function PA(e,t){e.l=t,e.l?e.i==vc?e.i=xc:e.i==wc&&(e.i=Sc):e.i==xc?e.i=vc:e.i==Sc&&(e.i=wc)}function OA(e,t){if(e.g&&e.g.enabled&&e.g.version==kx&&e.j&&e.j.autoplay){var n=e.j.play();n&&n.then(function(){e.A=t}).catch(function(){e.A=0})}}function NA(e,t,n){try{if(!e.g.enabled)return t;var s=d0(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var u=pc;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":u=mc;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":u=bx;break e}u=void 0}s.ot=u,s.su=!0;var l=hc(s);return h0(t,l)}catch(d){return mi("CMCD_SRC_ERROR","Could not generate src CMCD data.",d),t}}function UA(e){e.C.Aa(e.j,"play",function(){e.m||(e.m=Date.now())}),e.C.Aa(e.j,"playing",function(){e.o||(e.o=Date.now())})}function d0(e){return e.g.sessionId||(e.g.sessionId=f.crypto.randomUUID()),{v:e.g.version,sf:e.i,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function Zs(e,t,n){n=n===void 0?{}:n;var s=s===void 0?e.g.useHeaders:s;if(e.g.enabled)if(e=zA(e,n),s)s=VA(e),Object.keys(s).length&&Object.assign(t.headers,s);else{var u=hc(e);u&&(t.uris=t.uris.map(function(l){return h0(l,u)}))}}function BA(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(s,u){return n.includes(u)&&(s[u]=t[u]),s},{}):t}function FA(e){if(e.type===0)return HA;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?mc:gc;if(t=="audio")return pc;if(t=="text")return e.mimeType==="application/mp4"?yc:p0}}function jA(e,t){if(t=e.h.Vb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(s){return s.start<=n&&s.end>=n}))?1e3*(e.end-n):NaN}function Cx(e,t){if(t=e.h.Vb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(s){return s.start<=n&&s.end>=n}))?1e3*(e.end-n):0}function $A(e,t){var n=e.h.Pb();if(!n.length)return NaN;e=n[0],n=m(n);for(var s=n.next();!s.done;s=n.next())s=s.value,s.type==="variant"&&s.bandwidth>e.bandwidth&&(e=s);switch(t){case gc:return e.videoBandwidth||NaN;case pc:return e.audioBandwidth||NaN;default:return e.bandwidth}}function zA(e,t){t=t===void 0?{}:t,Object.assign(t,d0(e)),t.pr=e.h.ub();var n=t.ot===gc||t.ot===mc;return e.B&&n&&(t.bs=!0,t.su=!0,e.B=!1),t.su==null&&(t.su=e.F),t.v===kx&&(e.h.V()&&(t.ltc=e.h.Ue()),n=!e.G&&e.o&&e.m?e.o-(e.A||e.m):void 0,n!=null&&(t.msd=n,e.G=!0)),BA(e,t)}function hc(e){function t(b){return 100*n(b/100)}function n(b){return Math.round(b)}function s(b){return!Number.isNaN(b)&&b!=null&&b!==""&&b!==!1}var u=[],l={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(b){return encodeURIComponent(b)},rtp:t,tb:n},d=Object.keys(e||{}).sort();d=m(d);for(var p=d.next();!p.done;p=d.next()){p=p.value;var g=e[p];if(s(g)&&(p!=="v"||g!==1)&&(p!="pr"||g!==1)){var v=l[p];v&&(g=v(g)),v=typeof g;var T=void 0;T=v==="string"&&p!=="ot"&&p!=="sf"&&p!=="st"?p+"="+JSON.stringify(g):v==="boolean"?p:v==="symbol"?p+"="+g.description:p+"="+g,u.push(T)}}return u.join(",")}function VA(e){var t=Object.keys(e),n={},s=["Object","Request","Session","Status"],u=[{},{},{},{}],l={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3};t=m(t);for(var d=t.next();!d.done;d=t.next())d=d.value,u[l[d]!=null?l[d]:1][d]=e[d];for(e=0;e<u.length;e++)(l=hc(u[e]))&&(n["CMCD-"+s[e]]=l);return n}function h0(e,t){return!t||e.includes("offline:")?e:(e=new en(e),e.g.set("CMCD",t),e.toString())}var bx="m",pc="a",gc="v",mc="av",HA="i",p0="c",yc="tt",kx=2,vc="d",xc="ld",wc="h",Sc="lh";be("shaka.util.CmcdManager.StreamingFormat",{DASH:vc,Ml:xc,HLS:wc,Nl:Sc,am:"s",OTHER:"o"});function Li(e){this.h=e,this.g=null}y=Li.prototype,y.configure=function(e){this.h=e},y.Yh=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(Ix)?1e3*this.g.get(Ix):null},y.Wh=function(){return this.h.enabled&&this.g&&this.g.has(Ex)?1e3*this.g.get(Ex):null},y.Oj=function(){return this.h.enabled&&this.g&&this.g.has(Mx)?this.g.get(Mx):null},y.Pj=function(){return this.h.enabled&&this.g&&this.g.has(Rx)?this.g.get(Rx):null},y.getBandwidthEstimate=function(e){var t=this.Wh();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function Ax(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}be("shaka.util.CmsdManager",Li),Li.prototype.getBandwidthEstimate=Li.prototype.getBandwidthEstimate,Li.prototype.getRoundTripTime=Li.prototype.Pj,Li.prototype.getResponseDelay=Li.prototype.Oj,Li.prototype.getEstimatedThroughput=Li.prototype.Wh,Li.prototype.getMaxBitrate=Li.prototype.Yh;var Ex="etp",Ix="mb",Mx="rd",Rx="rtt";function _x(){this.g=null,this.h=[]}function g0(e,t){return j(function(n){if(n.g==1)return e.g?D(n,new Promise(function(s){return e.h.push(s)}),2):n.u(2);e.g=t,ne(n)})}_x.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function ye(e,t,n){t=t===void 0?null:t,Ct.call(this);var s=this;this.m=Ec,this.h=null,this.we=t,this.ba=!1,this.Be=new Ee,this.pe=new Ee,this.j=new Ee,this.bc=new Ee,this.wd=new Ee,this.F=this.G=this.C=this.I=null,this.Ce=0,this.ka=new _x,this.N=this.ha=this.W=this.i=this.qc=this.H=this.l=this.le=this.S=this.Gh=this.va=this.L=this.ab=this.ya=this.me=this.P=this.Ka=this.K=this.Zb=null,this.Oa=!1,this.Za=this.s=null,this.ve=1e9,this.Ae=[],this.eb=[],this.Wf=-1,this.g=or(this),this.Yf=lx(),this.U=null,this.Ee=-1,this.$b=null,this.wa={width:1/0,height:1/0},this.ue=new vp(this.g,this.wa,null),this.ye=[],this.A=null,this.M=this.g.adaptationSetCriteriaFactory(),this.M.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredVariantRole,channelCount:0,Ec:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,Jc:this.g.preferredAudioLabel,Ed:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",Gd:"",Fe:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.xd=this.g.preferredTextLanguage,this.se=this.g.preferredTextRole,this.re=this.g.preferForcedSubs,this.qe=[],n&&n(this),this.L=oE(this),this.va=new Li(this.g.cmsd),this.I=Bx(this),this.zd=this.na=this.za=this.B=null,this.$f=!1,this.Xf=[],this.Zf=new ht(function(){return j(function(u){if(u.g==1)return s.na?D(u,s.fc(s.zd,!0),3):u.u(0);if(u.g!=4)return D(u,s.load(s.na),4);s.$f?s.zd.pause():s.zd.play(),s.na=null,s.$f=!1,ne(u)})}),Ic&&(this.B=Ic(),this.B.configure(this.g.ads),this.wd.D(this.B,"ad-content-pause-requested",function(u){var l;return j(function(d){if(d.g==1)return s.Zf.stop(),s.na?d.u(0):(s.zd=s.h,s.$f=s.Wd(),l=u.saveLivePosition||!1,D(d,s.Qh(!0,l),3));s.na=d.h,ne(d)})}),this.wd.D(this.B,"ad-content-resume-requested",function(u){if(u=u.offset||0,s.na){var l=s.na;l.m&&u&&(typeof l.m=="number"?l.m+=u:l.m.setTime(l.m.getTime()+1e3*u))}s.Zf.ia(.1)}),this.wd.D(this.B,"ad-content-attach-requested",function(){return j(function(u){return s.h||!s.zd?u.u(0):D(u,s.fc(s.zd,!0),0)})})),Mc&&(this.za=Mc(this),this.za.configure(this.g.queue)),this.Be.D(f,"online",function(){b0(s),s.eh()}),this.xe=new ht(function(){for(var u=Date.now()/1e3,l=!1,d=!0,p=m(s.i.variants),g=p.next();!g.done;g=p.next())g=g.value,0<g.disabledUntilTime&&g.disabledUntilTime<=u&&(g.disabledUntilTime=0,l=!0),0<g.disabledUntilTime&&(d=!1);d&&s.xe.stop(),l&&Qo(s,!1,void 0,!1,!1)}),this.Pa=null,e&&(st("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.fc(e,!0)),this.o=null}ue(ye,Ct);function Tc(e){e.S!=null&&(Fy(e.S),e.S.release(),e.S=null)}function GA(e,t,n){n||t.lcevc.enabled?(Tc(e),e.S==null&&(e.S=new ea(e.h,e.Gh,t.lcevc,n),e.G&&(e.G.M=e.S))):Tc(e)}function Ot(e,t){return new Ie(e,t)}y=ye.prototype,y.destroy=function(){var e=this,t;return j(function(n){switch(n.g){case 1:return e.m==Ki?n.return():(Tc(e),t=e.detach(),e.m=Ki,D(n,t,2));case 2:return D(n,e.ng(),3);case 3:if(e.Be&&(e.Be.release(),e.Be=null),e.pe&&(e.pe.release(),e.pe=null),e.j&&(e.j.release(),e.j=null),e.bc&&(e.bc.release(),e.bc=null),e.wd&&(e.wd.release(),e.wd=null),e.Za=null,e.g=null,e.A=null,e.we=null,e.L=null,e.va=null,!e.I){n.u(4);break}return D(n,e.I.destroy(),5);case 5:e.I=null;case 4:e.s&&(e.s.release(),e.s=null),e.za&&(e.za.destroy(),e.za=null),Ct.prototype.release.call(e),ne(n)}})};function Lx(e,t){o2.set(e,t)}function eu(e,t){e.dispatchEvent(Ot("onstatechange",new Map().set("state",t)))}y.fc=function(e,t){t=t===void 0?!0:t;var n=this,s,u,l;return j(function(d){switch(d.g){case 1:if(n.m==Ki)throw new q(2,7,7e3);if(s=n.h&&n.h==e,!n.h||n.h==e){d.u(2);break}return D(d,n.detach(),2);case 2:return D(d,m0(n,"attach"),4);case 4:if(d.h)return d.return();if(le(d,5,6),s||(eu(n,"attach"),u=function(){var p=k0(n,!1);p&&tu(n,p)},n.pe.D(e,"error",u),n.h=e,n.L&&n.L.setMediaElement(e)),Be(),!t||!gr()||n.G){d.u(6);break}return D(d,v0(n),6);case 6:H(d),n.ka.release(),z(d,0);break;case 5:return l=re(d),D(d,n.detach(),10);case 10:throw l}})},y.fj=function(e){this.Gh=e},y.detach=function(e){e=e===void 0?!1:e;var t=this;return j(function(n){if(n.g==1){if(t.m==Ki)throw new q(2,7,7e3);return D(n,t.vc(!1,e),2)}if(n.g!=3)return D(n,m0(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.pe.Ra(),t.h=null),eu(t,"detach"),t.B&&!e&&t.B.release()}finally{t.ka.release()}ne(n)})};function m0(e,t){var n;return j(function(s){return s.g==1?(n=++e.Ce,D(s,g0(e.ka,t),2)):n!=e.Ce?(e.ka.release(),s.return(!0)):s.return(!1)})}y.vc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,s,u,l,d,p,g,v,T,b,M,_,L,O;return j(function(P){switch(P.g){case 1:return n.m!=Ki&&(n.m=Ec),D(P,m0(n,"unload"),2);case 2:return P.h?P.return():(me(P,3),n.Oa=!1,eu(n,"unload"),Tc(n),s=n.qe.map(function(U){return U()}),n.qe=[],D(P,Promise.all(s),5));case 5:if(n.dispatchEvent(Ot("unloading")),n.me&&(n.me.release(),n.me=null),n.ya&&(n.ya.release(),n.ya=null),n.ab&&(n.ab.release(),n.ab=null),n.h&&(n.j.Ra(),n.bc.Ra()),n.xe.stop(),n.Zb&&(n.Zb.release(),n.Zb=null),n.Ka&&(n.Ka.stop(),n.Ka=null),!n.H){P.u(6);break}return D(P,n.H.stop(),7);case 7:n.H=null,n.qc=null;case 6:if(!n.s){P.u(8);break}return D(P,n.s.stop(),8);case 8:if(!n.l){P.u(10);break}return D(P,n.l.destroy(),11);case 11:n.l=null;case 10:if(n.K&&(n.K.release(),n.K=null),n.F&&(n.F.release(),n.F=null),f.shakaMediaKeysPolyfill!=="webkit"||!n.C){P.u(12);break}return D(P,n.C.destroy(),13);case 13:n.C=null;case 12:if(!n.G){P.u(14);break}return D(P,n.G.destroy(),15);case 15:n.G=null;case 14:if(n.B&&!t&&n.B.onAssetUnload(),n.na&&!t&&(n.na.destroy(),n.na=null),t||n.Zf.stop(),n.L&&DA(n.L),n.va&&(n.va.g=null),!n.o){P.u(16);break}return D(P,n.o.destroy(),17);case 17:n.o=null;case 16:if(n.ba=!1,n.h){for(u=m(n.Xf),l=u.next();!l.done;l=u.next())d=l.value,d.src.startsWith("blob:")&&URL.revokeObjectURL(d.src),d.remove();n.Xf=[],Hf(n.h)&&n.h.load()}if(!n.C){P.u(18);break}return D(P,n.C.destroy(),19);case 19:n.C=null;case 18:if(n.Pa&&n.W!=n.Pa.nd()&&(n.Pa.s||n.Pa.destroy(),n.Pa=null),n.W=null,n.ha=null,n.P=null,n.i){for(p=m(n.i.variants),g=p.next();!g.done;g=p.next())for(v=g.value,T=m([v.audio,v.video]),b=T.next();!b.done;b=T.next())(M=b.value)&&M.segmentIndex&&M.segmentIndex.release();for(_=m(n.i.textStreams),L=_.next();!L.done;L=_.next())O=L.value,O.segmentIndex&&O.segmentIndex.release()}n.g&&n.g.streaming.clearDecodingCache&&(bf.clear(),Is.clear()),n.i=null,n.A=new dc,n.Fh=null,n.$b=null,n.U=null,n.Ee=-1,n.Ae=[],n.eb=[],n.Wf=-1,n.I&&n.I.Mh(),kc(n);case 3:H(P),n.ka.release(),z(P,4);break;case 4:if(Be(),e&&gr()&&!n.G&&n.h)return D(P,v0(n),0);P.u(0)}})},y.cl=function(e){this.N=e},y.load=function(e,t,n){t=t===void 0?null:t;var s=this,u,l,d,p,g,v,T,b,M,_,L,O,P,U;return j(function(B){switch(B.g){case 1:if(s.m==Ki)throw new q(2,7,7e3);if(u=null,l="",e instanceof _i){if(e.s)throw new q(2,7,7006);u=e,l=u.nd()||""}else l=e||"";return D(B,g0(s.ka,"load"),2);case 2:if(s.ka.release(),!s.h)throw new q(2,7,7002);if(!s.W){B.u(3);break}return s.W=l,D(B,s.vc(!1),3);case 3:if(d=++s.Ce,p=function(){return j(function($){if($.g==1)return s.Ce==d?$.u(0):u?D($,u.destroy(),3):$.u(3);throw new q(2,7,7e3)})},g=function($,W){return j(function(J){switch(J.g){case 1:return me(J,2),D(J,g0(s.ka,W),4);case 4:return D(J,p(),5);case 5:return D(J,$(),6);case 6:return D(J,p(),7);case 7:u&&s.g&&(u.g=s.g);case 2:H(J),s.ka.release(),z(J,0)}})},le(B,5,6),t==null&&u&&(t=u.getStartTime()),s.N=t,s.Oa=!1,s.dispatchEvent(Ot("loading")),u){n=u.W,B.u(8);break}if(n){B.u(8);break}return D(B,g(function(){return j(function($){if($.g==1)return D($,Nx(s,l),2);n=$.h,ne($)})},"guessMimeType_"),8);case 8:if(v=!!u,u){dx(u,s),s.A=u.getStats(),B.u(11);break}return D(B,Px(s,l,t,n,!0,s.g),12);case 12:(u=B.h)?(u.C=!1,dx(u,s),s.A=u.getStats(),u.start(),u.A.catch(function(){})):s.A=new dc;case 11:return T=!u,b=Date.now()/1e3,s.A=u?u.getStats():new dc,s.W=l,s.ha=n||null,kc(s),M=function(){var $=s.h?s.h.buffered:null;return{start:pv($)||0,end:Vf($)||0}},s.ya=new _a(M),s.ya.addEventListener("regionadd",function($){x0(s,$.region,"metadataadded")}),T?D(B,g(function(){return j(function($){return D($,YA(s,n),0)})},"initializeSrcEqualsDrmInner_"),23):(s.ab=new _a(M),D(B,g(function(){return j(function($){if($.g==1)return D($,Promise.race([u.va,u.A]),2);s.qc=u.H;var W=u;W.wa=!0,s.H=W.l,s.i=u.Fg(),ne($)})},"waitForFinish"),15));case 15:if(s.G){B.u(16);break}return D(B,g(function(){return j(function($){return D($,v0(s),0)})},"initializeMediaSourceEngineInner_"),16);case 16:return s.i&&s.i.textStreams.length&&(s.o.enableTextDisplayer?s.o.enableTextDisplayer():st("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),D(B,g(function(){return j(function($){return D($,u.A,0)})},"waitForFinish"),18);case 18:if(s.g=u.getConfiguration(),s.ue=u.G,s.H&&s.H.setMediaElement&&s.h&&s.H.setMediaElement(s.h),s.me=mA(u),s.le=u.Pa,(_=u.B)&&(s.M=_),v&&s.h&&s.h.nodeName==="AUDIO"&&(XA(s),s.configure("manifest.disableVideo",!0)),u.i){B.u(19);break}return D(B,g(function(){return j(function($){return D($,hx(u,s.h),0)})},"drmEngine_.init"),19);case 19:return s.C=yA(u),D(B,g(function(){return j(function($){return D($,s.C.fc(s.h),0)})},"drmEngine_.attach"),21);case 21:return!(L=u.F)||s.Za&&s.Za==L||(s.s=gA(u),s.Za=u.F,typeof s.s.setMediaElement!="function"&&(st("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),s.s.setMediaElement=function(){}),typeof s.s.setCmsdManager!="function"&&(st("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),s.s.setCmsdManager=function(){}),typeof s.s.trySuggestStreams!="function"&&(st("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),s.s.trySuggestStreams=function(){})),O=vA(u),P=u.o,D(B,g(function(){return j(function($){return D($,KA(s,b,P,O),0)})},"loadInner_"),22);case 22:pA(u),s.ha&&Be().Wi()&&la(s.ha)&&uk(s.G,s.W,s.ha),B.u(14);break;case 23:return D(B,g(function(){return j(function($){return D($,qA(s,b,n),0)})},"srcEqualsInner_"),14);case 14:s.dispatchEvent(Ot("loaded"));case 6:if(H(B),!u){B.u(25);break}return D(B,u.destroy(),25);case 25:s.Pa=null,z(B,0);break;case 5:if(U=re(B),!U||U.code==7e3){B.u(27);break}return D(B,s.vc(!1),27);case 27:throw U}})};function XA(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(s){return s.audio})}y.Yk=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,s;return j(function(u){return u.g==1?D(u,Dx(n),2):u.g!=3?(s=u.h,D(u,n.vc(e,t),3)):u.return(s)})},y.Qh=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,s;return j(function(u){return u.g==1?D(u,Dx(n,t),2):u.g!=3?(s=u.h,D(u,n.detach(e),3)):u.return(s)})};function Dx(e,t){t=t===void 0?!1:t;var n,s,u;return j(function(l){if(l.g==1)return n=null,e.i&&e.H&&e.qc&&e.W&&e.g?(s=e.h.currentTime,e.V()&&!t&&(s=null),D(l,Ox(e,e.W,s,e.ha,e.g,!0,!1,!1),3)):l.u(2);if(l.g!=2){n=l.h,e.ye.push(n),e.H&&e.H.setMediaElement&&e.H.setMediaElement(null),(u=e.l?e.l.o:null)&&(n.o=u);var d=n,p=e.H,g=e.qc;d.h=e.i,d.l=p,d.H=g,n.B=e.M,n.start(),e.i=null,e.H=null,e.qc=null,e.s=null,e.Za=null}return l.return(n)})}y.preload=function(e,t,n,s){t=t===void 0?null:t;var u=this,l,d;return j(function(p){return p.g==1?(l=or(u),Or(l,s||u.g,or(u)),D(p,Px(u,e,t,n,!1,l),2)):((d=p.h)?d.start():tu(u,new q(2,7,7005)),p.return(d))})},y.ng=function(){var e=this,t,n,s,u;return j(function(l){for(t=[],n=m(e.ye),s=n.next();!s.done;s=n.next())u=s.value,u.s||t.push(u.destroy());return e.ye=[],D(l,Promise.all(t),0)})};function Px(e,t,n,s,u,l){u=u===void 0?!1:u;var d,p,g,v;return j(function(T){return T.g==1?s?T.u(2):D(T,Nx(e,t),3):(T.g!=2&&(s=T.h),WA(e,s)?T.return(null):(d=l||e.g,p=!1,g=!0,u&&(e.s&&e.Za==d.abrFactory&&(g=!1),e.h&&e.h.nodeName==="AUDIO"&&(p=!0)),v=Ox(e,t,n,s||null,d,!u,p,g),v=u?v.then(function(b){return b.C=!1,b}):v.then(function(b){return e.ye.push(b),b}),T.return(v)))})}function Ox(e,t,n,s,u,l,d,p){l=l===void 0?!0:l,d=d===void 0?!1:d,p=p===void 0?!0:p;var g,v,T,b,M,_,L,O,P,U,B,$,W,J,G;return j(function(X){return X.g==1?(g=null,v=Hi(u),d&&(v.manifest.disableVideo=!0),T=function(){return g.S&&g.s?null:g},b=function(){return T()?T().getConfiguration():e.g},e.wa.width!=1/0||e.wa.height!=1/0||e.g.ignoreHardwareResolution?X.u(2):(M=Be(),D(X,M.ic(),3))):(X.g!=2&&(_=X.h,e.wa.width=_.width,e.wa.height=_.height),L=new vp(v,e.wa,null),O={networkingEngine:e.I,filter:function(Y){var Q,ie;return j(function(te){if(te.g==1)return D(te,Z1(L,Y),2);if(te.g!=4)return Q=te.h,Q?(ie=Ot("trackschanged"),D(te,Promise.resolve(),4)):te.u(0);g.dispatchEvent(ie),ne(te)})},makeTextStreamsForClosedCaptions:function(Y){return fE(e,Y)},onTimelineRegionAdded:function(Y){$p(g.I,Y)},onEvent:function(Y){return g.dispatchEvent(Y)},onError:function(Y){return g.onError(Y)},isLowLatencyMode:function(){return b().streaming.lowLatencyMode},updateDuration:function(){e.l&&g.S&&e.l.updateDuration()},newDrmInfo:function(Y){var Q=g.i,ie=Q?Q.g:null;ie&&Q.A&&nv(L,ie.keySystem,Y)},onManifestUpdated:function(){var Y=new Map().set("isLive",e.V());g.dispatchEvent(Ot("manifestupdated",Y)),Ba(g,!1,function(){e.B&&e.B.onManifestUpdated(e.V())})},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},onMetadata:function(Y,Q,ie,te){var Z=Y;Y=="com.apple.hls.interstitial"&&(Z="com.apple.quicktime.HLS",Y={startTime:Q,endTime:ie,values:te},e.B)&&e.B.onHLSInterstitialMetadata(e,e.h,Y),te=m(te),Y=te.next();for(var ve={};!Y.done;ve={Xg:void 0},Y=te.next())ve.Xg=Y.value,ve.Xg.name!="ID"&&Ba(g,!1,function(de){return function(){w0(e,Q,ie,Z,de.Xg)}}(ve))},disableStream:function(Y){return e.disableStream(Y,e.g.streaming.maxDisabledTime)},addFont:function(Y,Q){return e.addFont(Y,Q)}},P=new _a(function(){return e.Sa()}),P.addEventListener("regionadd",function(Y){var Q=Y.region;Ha(e,"timelineregionadded",Q,g),Ba(g,!1,function(){e.B&&(e.B.onDashTimedMetadata(Q),e.B.onDASHInterstitialMetadata(e,e.h,Q))})}),U=null,v.streaming.observeQualityChanges&&(U=new Qf(function(){return e.Vb()}),U.addEventListener("qualitychange",function(Y){t2(e,Y.quality,Y.position)}),U.addEventListener("audiotrackchange",function(Y){t2(e,Y.quality,Y.position,!0)})),B=!0,$={pc:e.I,onError:function(Y){return g.onError(Y)},rf:function(Y){Ba(g,!0,function(){if(e.C)e:{var Q=Y,ie=Ot("keystatuschanged");e.dispatchEvent(ie);var te=Object.keys(Q);te.length==1&&te[0]==""&&(te=["00"],Q={"00":Q[""]}),ie=te.length==1&&te[0]=="00";var Z=!1;if(te.length){te=e.keySystem();for(var ve=Ls(e.g.drm.clearKeys),de=m(e.i.variants),ae=de.next();!ae.done;ae=de.next()){ae=ae.value;var ge=[];ae.audio&&ge.push(ae.audio),ae.video&&ge.push(ae.video),ge=m(ge);for(var Te=ge.next();!Te.done;Te=ge.next()){var Ce=Te.value;if(Te=ae.allowedByKeySystem,Ce.keyIds.size)if(Ce.drmInfos.length&&!ve.size){Ce=m(Ce.drmInfos);for(var Pe=Ce.next();!Pe.done;Pe=Ce.next())if(Pe=Pe.value,Pe.keyIds.size&&Pe.keySystem==te){ae.allowedByKeySystem=!0,Pe=m(Pe.keyIds);for(var Re=Pe.next();!Re.done;Re=Pe.next())Re=Re.value,((Re=Q[ie?"00":Re])||e.C.G)&&(ae.allowedByKeySystem=ae.allowedByKeySystem&&!!Re&&!xp.includes(Re))}}else for(ae.allowedByKeySystem=!0,Ce=m(Ce.keyIds),Pe=Ce.next();!Pe.done;Pe=Ce.next())Pe=Pe.value,((Pe=Q[ie?"00":Pe])||e.C.G)&&(ae.allowedByKeySystem=ae.allowedByKeySystem&&!!Pe&&!xp.includes(Pe));Te!=ae.allowedByKeySystem&&(Z=!0)}}}if(Z&&(Gn(e),!Ur(e)))break e;(Q=e.l.o)&&!Q.allowedByKeySystem&&Qo(e)}})},onExpirationUpdated:function(Y,Q){var ie=Ot("expirationupdated");g.dispatchEvent(ie),(ie=g.l)&&ie.onExpirationUpdated&&ie.onExpirationUpdated(Y,Q)},onEvent:function(Y){g.dispatchEvent(Y),Y.type=="drmsessionupdate"&&B&&(B=!1,Y=Date.now()/1e3-g.Ka,(e.A||g.getStats()).m=Y,e.S&&Fy(e.S))}},W=Bx(e,T),_1(e.I,W),J=function(){return e.hd($)},G={config:v,pk:O,Ck:P,Bk:U,hd:J,nk:L,networkingEngine:W,ej:l,dj:p},g=new _i(t,s,n,G),p||xA(g,e.s,e.Za),X.return(g))})}function Nx(e,t){var n,s,u;return j(function(l){return l.g==1?(n=e.g.manifest.retryParameters,D(l,qo(t,e.I,n),2)):(s=l.h,s=="application/x-mpegurl"&&(u=Be(),u.Da()==="WEBKIT"&&(s="application/vnd.apple.mpegurl")),l.return(s))})}function WA(e,t){if(!gr(Be()))return!0;if(t){if((e.h||Go()).canPlayType(t)=="")return!1;if(!gr(Be())||!Os.has(t))return!0;if(la(t))return Be().Da()==="WEBKIT"&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if(t==="application/dash+xml"||t==="video/vnd.mpeg.dash.mpd")return e.g.streaming.preferNativeDash}return!1}function y0(e){var t=e.g.textDisplayFactory;if(e.Fh!==t){var n=e.o;e.o=t(),e.o.configure?e.o.configure(e.g.textDisplayer):st("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.o.setTextLanguage||st("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),n?(e.o.setTextVisibility(n.isTextVisible()),n.destroy().catch(function(){})):e.o.setTextVisibility(e.ba),e.G&&mk(e.G,e.o),e.Fh=t,e.l&&jk(e.l)}else e.o&&e.o.configure&&e.o.configure(e.g.textDisplayer)}function v0(e){var t,n,s;return j(function(u){if(u.g==1)return Be(),eu(e,"media-source"),e.g.mediaSource.useSourceElements&&Hf(e.h),y0(e),t=rE(e.h,e.o,{Ej:function(){return e.keySystem()},onMetadata:function(l,d,p){l=m(l);for(var g=l.next();!g.done;g=l.next())if(g=g.value,g.data&&typeof g.cueTime=="number"&&g.frames){var v=g.cueTime+d,T=p;T&&v>T&&(T=v);for(var b=m(g.frames),M=b.next();!M.done;M=b.next())w0(e,v,T,"org.id3",M.value);e.B&&e.B.onHlsTimedMetadata(g,v)}},wk:function(l){e.ab&&$p(e.ab,{schemeIdUri:l.schemeIdUri,startTime:l.startTime,endTime:l.endTime,id:String(l.id),emsg:l})},onEvent:function(l){return e.dispatchEvent(l)},yk:function(){e.H&&e.H.update&&e.H.update()}},e.S,e.g.mediaSource),n=e.g.manifest,s=n.segmentRelativeVttTiming,t.Ka=s,D(u,t.K,2);e.G=t,ne(u)})}function Ux(e,t,n){function s(){return T0(e)}if(e.j.D(t,"playing",s),e.j.D(t,"pause",s),e.j.D(t,"ended",s),e.j.D(t,"ratechange",function(){var l=e.h.playbackRate;l!=0&&(e.K&&(e.K.set(l),e.m==Nn&&e.s.playbackRateChanged(l),Wx(e,l)),l=Ot("ratechange"),e.dispatchEvent(l))}),t.remote&&(e.j.D(t.remote,"connect",function(){e.l&&t.remote.state=="connected"&&Jo(e),Gn(e)}),e.j.D(t.remote,"connecting",function(){return Gn(e)}),e.j.D(t.remote,"disconnect",function(){return j(function(l){if(l.g==1)return e.l&&t.remote.state=="disconnected"?D(l,Zp(e.l),3):l.u(2);l.g!=2&&Jo(e),Gn(e),ne(l)})})),t.audioTracks&&(e.j.D(t.audioTracks,"addtrack",function(){return Gn(e)}),e.j.D(t.audioTracks,"removetrack",function(){return Gn(e)}),e.j.D(t.audioTracks,"change",function(){return Gn(e)})),t.videoTracks&&(e.j.D(t.videoTracks,"addtrack",function(){return Gn(e)}),e.j.D(t.videoTracks,"removetrack",function(){return Gn(e)}),e.j.D(t.videoTracks,"change",function(){return Gn(e)})),t.textTracks){var u=function(){e.m===fi&&e.o instanceof cn&&Jo(e),Gn(e)};e.j.D(t.textTracks,"addtrack",function(l){if(l.track)switch(l=l.track,l.kind){case"metadata":ZA(e,l);break;case"chapters":eE(e,l);break;default:u()}}),e.j.D(t.textTracks,"removetrack",u),e.j.D(t.textTracks,"change",u),e.g.streaming.crossBoundaryStrategy!=="keep"&&(e.j.D(t,"waiting",function(){e.l&&e0(e.l)}),e.j.D(t,"timeupdate",function(){e.l&&e0(e.l)}))}t.preload!="none"&&e.j.Aa(t,"loadedmetadata",function(){e.A.F=Date.now()/1e3-n})}function KA(e,t,n,s){var u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z,ve,de,ae;return j(function(ge){switch(ge.g){case 1:for(eu(e,"load"),u=e.h,e.K=new Ra({Ve:function(){return u.playbackRate},Pc:function(){return u.defaultPlaybackRate},nh:function(Te){u.playbackRate=Te},ni:function(Te){u.currentTime+=Te}}),Ux(e,u,t),("onchange"in f.screen)&&e.j.D(f.screen,"change",function(){if(e.M.getConfiguration){var Te=e.M.getConfiguration();Te.Ec=="AUTO"?Ur(e):e.g.preferredVideoHdrLevel=="AUTO"&&e.g.abr.enabled&&(Te.Ec="AUTO",e.M.configure(Te),Ur(e))}}),l=!1,d=m(e.i.variants),p=d.next();!p.done;p=d.next())g=p.value,(v=g.video&&g.video.dependencyStream)&&(l=jy(v));GA(e,e.g,l),e.xd=e.g.preferredTextLanguage,e.se=e.g.preferredTextRole,e.re=e.g.preferForcedSubs,A0(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.s.init(function(Te,Ce,Pe){e.i&&e.l&&Te!=e.l.o&&za(e,Te,!0,Ce===void 0?!1:Ce,Pe===void 0?0:Pe)}),e.s.setMediaElement(u),e.s.setCmsdManager(e.va),e.l=sE(e),e.l.configure(e.g.streaming),e.m=Nn,e.dispatchEvent(Ot("streaming")),T=n;case 2:for((M=e.l.o)||T||(T=Ur(e)?e.s.chooseVariant():null),_=[],b=M||T,L=m([b.video,b.audio]),O=L.next();!O.done;O=L.next())(P=O.value)&&!P.segmentIndex&&(_.push(P.createSegmentIndex()),P.dependencyStream&&_.push(P.dependencyStream.createSegmentIndex()));if(!(0<_.length)){ge.u(4);break}return D(ge,Promise.all(_),4);case 4:if(!b||b.disabledUntilTime!=0){ge.u(2);break}if(e.H&&e.H.onInitialVariantChosen&&e.H.onInitialVariantChosen(b),e.i.isLowLatency&&(e.g.streaming.lowLatencyMode?e.configure(e.Yf):ft("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),e.L&&(PA(e.L,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),OA(e.L,1e3*t)),A0(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),Uk(e.l,e.g.playRangeStart,e.g.playRangeEnd),e.Oa=!0,e.dispatchEvent(Ot("canupdatestarttime")),U=function(Te){e.F=tE(e,Te),e.Zb=nE(e,Te),Fx(e,u,!1)},e.g.streaming.startAtSegmentBoundary||(B=e.N,B==null&&e.i.startTime&&(B=e.i.startTime),U(B)),M){ge.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){ge.u(8);break}return $=e.i.presentationTimeline,e.N instanceof Date&&(J=$.m||$.i,G=e.N.getTime()/1e3-J,G!=null&&(W=G)),W==null&&(W=typeof e.N=="number"?e.N:e.h.currentTime),e.N==null&&e.i.startTime&&(W=e.i.startTime),X=$.Xb(),Y=$.Fb(),W<X?W=X:W>Y&&(W=Y),D(ge,cE(T,W),9);case 9:Q=ge.h,U(Q);case 8:za(e,T,!0,!1,0);case 7:return e.F.ready(),ie=e.Dc().find(function(Te){return Te.active}),ie||((te=Es(e.i.textStreams,e.xd,e.se,e.re)[0]||null)&&r0(e.A.h,te,!0),T&&(te?(S1(T.audio,te,e.g)&&(e.ba=!0),e.ba&&e.o.setTextVisibility(!0)):(e.ba=!1,e.o.setTextVisibility(!1)),Zx(e)),te&&(e.g.streaming.alwaysStreamText||e.Ng())&&(ec(e.l,te),Va(e))),D(ge,e.l.start(s),10);case 10:e.g.abr.enabled&&(e.s.enable(),e2(e)),Gn(e),Ur(e),e.i.variants.some(function(Te){return Te.primary}),((Z=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(ve=function(){return Kx(e)},e.j.D(u,"timeupdate",ve)),Z||(de=function(){return Ac(e)},e.j.D(u,"timeupdate",de),Ac(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(ae=function(){var Te;return j(function(Ce){if(Ce.g==1)return Te=e.Sa().end-e.h.currentTime,isNaN(Te)||!(Te<=e.g.streaming.preloadNextUrlWindow)?Ce.u(0):(e.j.Ja(u,"timeupdate",ae),D(Ce,e.preload(e.i.nextUrl),4));e.Pa=Ce.h,ne(Ce)})},e.j.D(u,"timeupdate",ae)),e.j.D(u,"ended",function(){e.load(e.Pa||e.i.nextUrl)}))),e.B&&e.B.onManifestUpdated(Z),ne(ge)}})}function YA(e,t){var n,s,u;return j(function(l){return l.g==1?(n=Date.now()/1e3,s=!0,e.C=e.hd({pc:e.I,onError:function(d){tu(e,d)},rf:function(){},onExpirationUpdated:function(){var d=Ot("expirationupdated");e.dispatchEvent(d)},onEvent:function(d){e.dispatchEvent(d),d.type=="drmsessionupdate"&&s&&(s=!1,e.A.m=Date.now()/1e3-n)}}),e.C.configure(e.g.drm),u=T1([t]),e.C.N=!0,D(l,F1(e.C,[u],[]),2)):D(l,e.C.fc(e.h),0)})}function qA(e,t,n){var s,u,l,d,p,g,v,T,b,M,_,L;return j(function(O){switch(O.g){case 1:if(eu(e,"src-equals"),s=e.h,e.F=new $v(s),u=!1,e.qe.push(function(){u=!0}),e.dispatchEvent(Ot("canupdatestarttime")),e.N!=null&&e.F.Vf(e.N),e.Zb=iE(e,e.N||0),e.K=new Ra({Ve:function(){return s.playbackRate},Pc:function(){return s.defaultPlaybackRate},nh:function(P){s.playbackRate=P},ni:function(P){s.currentTime+=P}}),Fx(e,s,!0),s.textTracks&&(y0(e),l=function(P){if(!(e.o instanceof cn)){var U=Cc(e).find(function(B){return B.mode!=="disabled"});U&&(U.mode=P?"showing":"hidden"),e.o instanceof Mn&&(U=uE(e))&&(U.mode=!P&&e.o.isTextVisible()?"showing":"hidden")}},e.j.D(s,"enterpictureinpicture",function(){return l(!0)}),e.j.D(s,"leavepictureinpicture",function(){return l(!1)}),s.remote?(e.j.D(s.remote,"connect",function(){return l(!1)}),e.j.D(s.remote,"connecting",function(){return l(!1)}),e.j.D(s.remote,"disconnect",function(){return l(!1)})):"webkitCurrentPlaybackTargetIsWireless"in s&&e.j.D(s,"webkitcurrentplaybacktargetiswirelesschanged",function(){return l(!1)}),d=s,d.webkitSupportsFullscreen&&e.j.D(d,"webkitpresentationmodechanged",function(){return l(d.webkitPresentationMode!=="inline")})),Ux(e,s,t),p=NA(e.L,e.W,n),!p.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(p+="#t=",0<e.g.playRangeStart&&(p+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(p+=","+e.g.playRangeEnd)),!e.G){O.u(2);break}return D(O,e.G.destroy(),3);case 3:e.G=null;case 2:return Hf(s),s.src=p,g=Be(),g.La()=="TV"&&s.load(),s.preload!="none"&&!s.autoplay&&la(n)&&g.Da()==="WEBKIT"&&s.load(),e.m=fi,e.dispatchEvent(Ot("streaming")),v=new _t,Ws(s,HTMLMediaElement.HAVE_METADATA,e.j,function(){e.F.ready(),e.ha&&la(e.ha)||v.resolve()}),T=function(){return new Promise(function(P){var U=new ht(P);e.j.D(s.textTracks,"change",function(){return U.ia(.5)}),U.ia(.5)})},Ws(s,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var P,U,B,$,W;return j(function(J){if(J.g==1)return D(J,T(),2);if(u)return J.return();if(QA(e),P=Cc(e),P.some(function(G){return G.mode==="showing"})&&(e.ba=!0,e.o.setTextVisibility(!0)),!(e.o instanceof cn))for(P.length&&(e.o.enableTextDisplayer?e.o.enableTextDisplayer():st("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),U=!1,B=m(P),$=B.next();!$.done;$=B.next())W=$.value,W.mode!=="disabled"&&(U?(W.mode="disabled",ft("Found more than one enabled text track, disabling it",W)):(Gx(e,W),U=!0));JA(e),e.ha&&la(e.ha)&&v.resolve(),ne(J)})}),s.error?v.reject(k0(e)):s.preload=="none"&&(ft('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),v.resolve()),e.j.Aa(s,"error",function(){v.reject(k0(e))}),D(O,pa(e.g.streaming.loadTimeout,v),4);case 4:((b=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(M=function(){return Kx(e)},e.j.D(s,"timeupdate",M)),b||(_=function(){return Ac(e)},e.j.D(s,"timeupdate",_),Ac(e)),e.B&&(e.B.onManifestUpdated(b),b&&(L=e.Sa().end,e.j.D(s,"progress",function(){var P=e.Sa().end;L!=P&&(e.B.onManifestUpdated(e.V()),L=P)}))),e.Oa=!0,ne(O)}})}function QA(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Hi(t,e.g.preferredVariantRole)}function JA(e){var t=e.g.preferredTextLanguage;t!=""&&e.ih(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function ZA(e,t){if(t.kind=="metadata"){t.mode="hidden",e.j.D(t,"cuechange",function(){if(t.activeCues)for(var s=m(t.activeCues),u=s.next();!u.done;u=s.next())u=u.value,w0(e,u.startTime,u.endTime,u.type,u.value),e.B&&e.B.onCueMetadataChange(u.value);if(t.cues){s=[],u=m(t.cues);for(var l=u.next(),d={};!l.done;d={xc:void 0},l=u.next())d.xc=l.value,d.xc.type=="com.apple.quicktime.HLS"&&d.xc.startTime!=null&&(l=s.find(function(p){return function(g){return g.startTime==p.xc.startTime&&g.endTime==p.xc.endTime}}(d)),l||(l={startTime:d.xc.startTime,endTime:d.xc.endTime,values:[]},s.push(l)),l.values.push(d.xc.value));for(s=m(s),u=s.next();!u.done;u=s.next())u=u.value,u.values.some(function(p){return p.key=="X-ASSET-URI"||p.key=="X-ASSET-LIST"})&&e.B&&(u.values.push({key:"CUE",description:"",data:u.startTime!=0||e.V()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.B.onHLSInterstitialMetadata(e,e.h,u))}});var n=new ht(function(){var s=aE(e);s=m(s);for(var u=s.next();!u.done;u=s.next())u.value.mode="hidden"}).Jb().ia(.5);e.qe.push(function(){n.stop()})}}function x0(e,t,n){t=new Map().set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(Ot(n,t))}function w0(e,t,n,s,u){e.ya&&(t={schemeIdUri:s,startTime:t,endTime:n||1/0,id:"",payload:u},t.id=JSON.stringify(t),$p(e.ya,t))}function eE(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new ht(function(){t.mode="hidden"}).Jb().ia(.5);e.qe.push(function(){n.stop()})}}y.Gk=function(){for(var e=this.ka;e.g;)e.release()},y.hd=function(e){return new Of(e)};function Bx(e,t){function n(l){t()?t().dispatchEvent(l):e.dispatchEvent(l)}function s(l){t()?Ba(t(),!0,l):l()}t||(t=function(){return null});var u=new $t(function(l,d,p,g,v){var T=t()?t().j:e.s;T&&T.segmentDownloaded(l,d,p,g,v)},function(l,d,p){d=new Map().set("headers",l).set("request",d).set("requestType",p),n(Ot("downloadheadersreceived",d)),s(function(){if(e.va){var g=e.va;if(g.h.enabled){var v=l["cmsd-static"];if(v)try{var T=new Map,b=v.split(",");for(v=0;v<b.length;v++){var M=b[v].split("=");T.set(M[0],Ax(M[1]))}}catch{}if(T=l["cmsd-dynamic"]){try{var _=new Map,L=T.split(";");for(T=1;T<L.length;T++){var O=L[T].split("=");_.set(O[0],Ax(O[1]))}var P=_}catch{P=null}P&&(g.g=P)}}}})},function(l,d){l=new Map().set("request",l).set("response",d),n(Ot("downloadcompleted",l))},function(l,d,p,g){l=new Map().set("request",l).set("error",d).set("httpResponseCode",p).set("aborted",g),n(Ot("downloadfailed",l))},function(l,d,p){s(function(){var g=e.L,v=p;if(v=v===void 0?{}:v,g.g.enabled)if(d.method==="HEAD")Zs(g,d);else switch(l){case 0:try{if(g.g.enabled){if(v.type){e:{switch(v.type){case 4:var T=g.l?xc:vc;break e;case 3:case 2:T=g.l?Sc:wc;break e;case 5:T="s";break e}T=void 0}g.i=T}Zs(g,d,{ot:bx,su:!g.s})}}catch(ae){mi("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",ae)}break;case Wi:try{if(g.g.enabled){var b=d.uris[0],M=v.segment;T=0,M&&(T=M.endTime-M.startTime);var _={d:1e3*T,st:g.h.V()?"l":"v"};_.ot=FA(v);var L=_.ot===gc||_.ot===pc||_.ot===mc||_.ot===yc,O=v.stream;if(O){var P=g.h.ub();if(L&&(_.bl=jA(g,O.type),_.ot!==yc)){var U=Cx(g,O.type);_.dl=P?U/Math.abs(P):U}if(O.bandwidth&&(_.br=O.bandwidth/1e3),O.segmentIndex&&M){var B=O.segmentIndex.Wb(M.endTime,!0,0>P);if(B){var $=B.next().value;if($&&$!=M){if(b&&!na(M.O(),$.O())){var W=$.O()[0],J=new URL(W),G=new URL(b);if(J.origin!==G.origin)var X=W;else{for(var Y=J.pathname.split("/").slice(1),Q=G.pathname.split("/").slice(1,-1);Y[0]===Q[0];)Y.shift(),Q.shift();for(;Q.length;)Q.shift(),Y.unshift("..");X=Y.join("/")}_.nor=X}if(($.startByte||$.endByte)&&(M.startByte!=$.startByte||M.endByte!=$.endByte)){var ie=$.startByte+"-";$.endByte&&(ie+=$.endByte),_.nrr=ie}}}var te=g.h.ub()||1,Z=Cx(g,O.type)||500,ve=O.bandwidth,de=ve?ve*(M.endTime-M.startTime)/1e3/(Z/te/1e3)*g.g.rtpSafetyFactor:NaN;isNaN(de)||(_.rtp=de)}}L&&_.ot!==yc&&(_.tb=$A(g,_.ot)/1e3),Zs(g,d,_)}}catch(ae){mi("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",ae)}break;case 2:case 5:case 6:Zs(g,d,{ot:"k"});break;case 4:Zs(g,d,{ot:"o"})}})},function(l,d,p,g){(l=t()?t().l:e.H)&&l.banLocation&&l.banLocation(g)},function(l,d){if(d.data){d=d.data.byteLength;var p=t()?t().getStats():e.A;p&&(cx(p,d),l===0&&(p.gi=d))}});return u.configure(e.g.networking),u}function tE(e,t){return new Hv(e.h,e.i,e.g.streaming,t,function(){e.Zb&&Yv(e.Zb,!0),e.l&&e.l.Yc(),e.P&&pr(e)},function(n){return e.dispatchEvent(n)})}function nE(e,t){var n=e.V()||typeof t=="number"&&0<t;t=new Yo(e.me,n),t.addEventListener("enter",function(l){Ha(e,"timelineregionenter",l.region)}),t.addEventListener("exit",function(l){Ha(e,"timelineregionexit",l.region)}),t.addEventListener("skip",function(l){var d=l.region;l.seeking||(Ha(e,"timelineregionenter",d),Ha(e,"timelineregionexit",d))});var s=new Yo(e.ya,n);s.addEventListener("enter",function(l){x0(e,l.region,"metadata")}),n=new Yo(e.ab,n),n.addEventListener("enter",function(l){l=new Map().set("detail",l.region.emsg),e.dispatchEvent(Ot("emsg",l))});var u=new jp(e.h);return u.g.add(t),u.g.add(s),u.g.add(n),e.le&&u.g.add(e.le),u}function iE(e,t){t=new Yo(e.ya,t instanceof Date||0<t),t.addEventListener("enter",function(s){x0(e,s.region,"metadata")});var n=new jp(e.h);return n.g.add(t),n}function Fx(e,t,n){e.P=new Pb,e.P.g=Ps,jx(e),kc(e),e.Ka=new ht(function(){pr(e)}),e.g.streaming.rebufferingGoal&&e.Ka.Fa(.25),e.j.D(t,"waiting",function(){return pr(e)}),e.j.D(t,"canplaythrough",function(){return pr(e)}),e.j.D(t,"playing",function(){return pr(e)}),e.j.D(t,"seeked",function(){return pr(e)}),n&&(e.j.D(t,"stalled",function(){return pr(e)}),e.j.D(t,"progress",function(){return pr(e)}),e.j.D(t,"timeupdate",function(){return pr(e)}))}function jx(e){var t=e.g.streaming.rebufferingGoal;e.P.i.set(wa,Math.min(.5,t/2)).set(Ps,t)}function pr(e){var t=e.G?Wo(e.G):!1,n=e.Wd()||t||e.F.ci(),s=gv(e.h.buffered,e.h.currentTime);t=e.P;var u=t.i.get(t.g),l=t.g;n=n||s>=u&&0<s?wa:Ps,t.g=n,(l=l!=n)&&n===wa&&(t.h=Date.now()),l&&kc(e)}function rE(e,t,n,s,u){return new Tv(e,t,n,u,s)}function oE(e){return new c0({getBandwidthEstimate:function(){return e.s?e.s.getBandwidthEstimate():NaN},Vb:function(){return e.Vb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},ub:function(){return e.ub()},Ob:function(){return e.Ob()},Pb:function(){return e.Pb()},V:function(){return e.V()},Ue:function(){return e.Ue()}},e.g.cmcd)}function sE(e){return new tx(e.i,{Qc:function(){return e.F?e.F.De():0},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},ub:function(){return e.ub()},video:e.h,Z:e.G,pc:e.I,onError:function(t){return tu(e,t)},onEvent:function(t){return e.dispatchEvent(t)},tf:function(t,n,s){var u=t.startTime;if(t=t.endTime,n=n.type,n!=ct){if(e.F){e.F.pi();var l=_p(e.G,n);!e.V()&&e.h.paused&&!e.h.seeking&&l!=null&&0<l&&e.F.De()<l&&e.F.Vf(l)}pr(e)}s=new Map().set("start",u).set("end",t).set("contentType",n).set("isMuxed",s),e.dispatchEvent(Ot("segmentappended",s))},xk:function(t,n){(n=n.rd)&&e.le&&Ik(e.le,n,t)},Kh:function(t,n){var s=e.C;if(s.h.parseInbandPsshEnabled&&!s.G&&["audio","video"].includes(t)){t=new gp(Ze(n)),n=0;for(var u=m(t.data),l=u.next();!l.done;l=u.next())n+=l.value.length;if(n==0)s=Promise.resolve();else{for(n=new Uint8Array(n),u=0,t=m(t.data),l=t.next();!l.done;l=t.next())l=l.value,n.set(l,u),u+=l.length;ya(s,"cenc",n),s=s.m}}else s=Promise.resolve();return s},disableStream:function(t,n){return e.disableStream(t,n)}})}y.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=sc(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(st("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(st("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){st("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var n=Be();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&n.Da()==="WEBKIT",delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&typeof e.streaming.liveSync=="boolean"&&(st("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),n=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=n),e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var s=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+s,e.streaming.liveSync.targetLatencyTolerance=s}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(st("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(st("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(st("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(st("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(st("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(st("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(st("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(st("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){st("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var u=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return u},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(st("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(st("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(st("manifest.dash.enableAudioGroups configuration","It is now enabled by default and cannot be disabled."),delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(st("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(st("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(st("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(st("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(st("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(st("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(st("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){n=!1;for(var l in e.drm.advanced){var d=e.drm.advanced[l];s=d.videoRobustness,d=d.audioRobustness,"videoRobustness"in e.drm.advanced[l]&&!Array.isArray(e.drm.advanced[l].videoRobustness)&&(e.drm.advanced[l].videoRobustness=[s],n=!0),"audioRobustness"in e.drm.advanced[l]&&!Array.isArray(e.drm.advanced[l].audioRobustness)&&(e.drm.advanced[l].audioRobustness=[d],n=!0)}n&&st("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(st("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(st("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(st("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),l=Or(this.g,e,or(this)),$x(this),l},y.nj=function(e){this.Yf=e};function $x(e){if(e.ue=new vp(e.g,e.wa,e.C),e.H){var t=Hi(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.H.configure(t)}if(e.C&&e.C.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=Ki&&tv(e.ue,e.i)&&Gn(e)}catch(n){tu(e,n)}e.s&&Ur(e),t=e.l.o,!t||t.allowedByApplication&&t.allowedByKeySystem||Qo(e)}e.I&&e.I.configure(e.g.networking),e.G&&(e.G.configure(e.g.mediaSource),e.G.Ka=e.g.manifest.segmentRelativeVttTiming),e.o&&y0(e),e.s&&(e.s.configure(e.g.abr),e.g.abr.enabled?e.s.enable():e.s.disable(),e2(e)),e.P&&jx(e),e.Ka&&(e.g.streaming.rebufferingGoal?e.Ka.Fa(.25):e.Ka.stop()),e.i&&A0(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.B&&e.B.configure(e.g.ads),e.L&&e.L.configure(e.g.cmcd),e.va&&e.va.configure(e.g.cmsd),e.za&&e.za.configure(e.g.queue)}y.getConfiguration=function(){var e=or(this);return Or(e,this.g,or(this)),e},y.xj=function(){return this.Yf},y.Zh=function(){var e=or(this);return Or(e,this.g,or(this)),ux(this.g,or(this))},y.Vh=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Sa().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},y.Ci=function(){for(var e in this.g)delete this.g[e];Or(this.g,or(this),or(this)),$x(this)},y.Fj=function(){return this.m},y.Xh=function(){return this.i?this.i.type:null},y.Jj=function(){return this.h},y.Ob=function(){return this.I},y.nd=function(){return this.W},y.Uh=function(){return this.B?this.B:null},y.$h=function(){return this.za?this.za:null},y.V=function(){return this.i&&!this.ua()?this.i.presentationTimeline.V():this.h&&(this.h.src||this.ua())?this.h.duration==1/0:!1},y.Tc=function(){return this.i?this.i.presentationTimeline.Tc():!1},y.ck=function(){if(this.i&&!this.ua()){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&(this.h.src||this.ua())?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},y.jk=function(){if(this.i&&!this.ua()){var e=this.i.variants;return e.length?(e=e[0],e.audio||!e.video?!1:!e.video.codecs.includes(",")):!1}return this.h&&(this.h.src||this.ua())&&this.h.audioTracks?this.h.audioTracks.length==0:!1},y.Sa=function(){if(this.i&&!this.ua()){if(!this.Oa&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Xb(),end:e.Fb()}}if(this.h&&(this.h.src||this.ua())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),n),{start:t,end:e}}return{start:0,end:0}},y.Zj=function(){this.V()&&(this.h.currentTime=this.Sa().end)},y.dk=function(){return this.Oa},y.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},y.drmInfo=function(){return this.C?this.C.g:null},y.Pd=function(){return this.C?this.C.Pd():1/0},y.Eg=function(){return this.C?this.C.Eg():[]},y.Te=function(){return this.C?this.C.Te():{}},y.Mg=function(){return this.P?this.P.g==Ps:!!this.W},y.ub=function(){return this.h?this.K?this.K.i:1:0},y.Ch=function(e){this.m==Nn&&this.l&&nx(this.l,e)},y.ke=function(e,t){t=t===void 0?!0:t,e==0?ft("A trick play rate of 0 is unsupported!"):(this.K.set(e),this.m==Nn&&(this.s.playbackRateChanged(e),this.Ch(t&&e!=1)),Wx(this,e))},y.Id=function(){var e=this.K.Pc();this.m==fi&&this.K.set(e),this.m==Nn&&(this.K.set(e),this.s.playbackRateChanged(e),this.Ch(!1)),this.bc.Ra()},y.Pb=function(){if(this.i&&!this.ua()){for(var e=this.l?this.l.o:null,t=[],n=0,s=m(this.i.variants),u=s.next();!u.done;u=s.next())if(u=u.value,ma(u)){var l=Fo(u);l.active=u==e,l.active||n==1||e==null||u.video!=e.video||u.audio!=e.audio||(l.active=!0),l.active&&n++,t.push(l)}return t}if(this.h&&this.h.audioTracks){var d=Yx(this);return e=Array.from(this.h.audioTracks),e.length?e.map(function(p){return Tf(p,d)}):d?[Tf(null,d)]:[]}return[]},y.Dc=function(){if(this.i){if(this.ua())return[];for(var e=this.l?this.l.A:null,t=[],n=m(this.i.textStreams),s=n.next();!s.done;s=n.next()){s=s.value;var u=jo(s);u.active=s==e,t.push(u)}return t}return this.h&&this.h.src&&this.h.textTracks?Cc(this).map(function(l){return y1(l)}):[]},y.Cj=function(){var e=this.Ae;return this.i&&(e=this.i.imageStreams),e.map(function(t){return lp(t)})},y.qj=function(e){var t=this,n,s;return j(function(u){return u.g==1?D(u,Vx(t,e),2):(n=u.h,n?(s=[],n.segmentIndex.Eb(function(l){var d=zx(l.tilesLayout||n.tilesLayout);if(d)for(var p=d.rows*d.Lc,g=l.j-l.startTime,v=0;v<p;v++){var T=Hx(l,n,l.startTime+g*v/p,d);s.push(T)}}),n.closeSegmentIndex&&n.closeSegmentIndex(),u.return(s)):u.return(null))})};function zx(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Lc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}y.Tj=function(e,t){var n=this,s,u,l,d;return j(function(p){return p.g==1?D(p,Vx(n,e),2):(s=p.h,!s||(u=s.segmentIndex.find(t),u==null)?p.return(null):(l=s.segmentIndex.get(u),(d=zx(l.tilesLayout||s.tilesLayout))?p.return(Hx(l,s,t,d)):p.return(null)))})};function Vx(e,t){var n,s;return j(function(u){return u.g==1?e.m!=Nn&&e.m!=fi||(n=e.Ae,e.i&&(n=e.i.imageStreams),s=n[0],!s)?u.return(null):(t!=null&&(s=n.find(function(l){return l.id==t})),s?s.segmentIndex?u.u(2):D(u,s.createSegmentIndex(),2):u.return(null)):u.return(s)})}function Hx(e,t,n,s){var u=t.width||0,l=t.height||0,d=u/s.Lc,p=l/s.rows,g=s.Lc*s.rows,v=e.j-e.startTime;v=e.B||v/g;var T=e.startTime,b=0,M=0;return 1<g&&(M=Math.floor((n-e.startTime)/v),T=e.startTime+M*v,b=M%s.Lc*d,M=Math.floor(M/s.Lc)*p),s=!1,(n=e.thumbnailSprite)&&(s=!0,p=n.height,b=n.positionX,M=n.positionY,d=n.width),{segment:e,imageHeight:l,imageWidth:u,height:p,positionX:b,positionY:M,startTime:T,duration:v,uris:e.O(),startByte:e.Bc(),endByte:e.zc(),width:d,sprite:s,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}y.jh=function(e){function t(){var s=n.i.textStreams.find(function(u){return u.id==e.id});s&&s!=n.l.A&&(r0(n.A.h,s,!1),ec(n.l,s),Jo(n),Va(n),n.xd=s.language)}var n=this;this.i&&this.F&&(t(),!this.ua())||function(){if(n.h&&n.h.textTracks){var s=Cc(n),u=s.find(function(p){return Sf(p)===e.id});if(u){if(n.o instanceof cn){s=m(s);for(var l=s.next();!l.done;l=s.next()){l=l.value;var d=l===u?n.ba?"showing":"hidden":"disabled";l.mode!==d&&(l.mode=d)}}else s=s.find(function(p){return p.mode!=="disabled"}),s!==u&&(s&&(s.mode="disabled",n.j.Ja(s,"cuechange"),n.o.remove(0,1/0)),u&&Gx(n,u));Jo(n),Va(n)}}}()};function Gx(e,t){e.j.D(t,"cuechange",function(){e.o.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},s=[],u=Array.from(t.activeCues||[]);u=m(u);for(var l=u.next();!l.done;l=u.next()){if(l=l.value,l.endTime===1/0||l.endTime<l.startTime)l=null;else{var d=new Bt(l.startTime,l.endTime,l.text);d.line=typeof l.line=="number"?l.line:null,l.lineAlign&&(d.lineAlign=l.lineAlign),d.lineInterpretation=l.snapToLines?aa:1,d.position=typeof l.position=="number"?l.position:null,l.positionAlign&&(d.positionAlign=l.positionAlign),d.size=l.size,d.textAlign=l.align,l.vertical==="lr"?d.writingMode="vertical-lr":l.vertical==="rl"&&(d.writingMode="vertical-rl"),l.region&&(d.region.id=l.region.id,d.region.height=l.region.lines,d.region.heightUnits=2,d.region.regionAnchorX=l.region.regionAnchorX,d.region.regionAnchorY=l.region.regionAnchorY,d.region.scroll=l.region.scroll,d.region.viewportAnchorX=l.region.viewportAnchorX,d.region.viewportAnchorY=l.region.viewportAnchorY,d.region.viewportAnchorUnits=oi,d.region.width=l.region.width,d.region.widthUnits=oi),hf(d),l=d}l&&((d=e.g.mediaSource.modifyCueCallback)&&d(l,null,n),s.push(l))}e.o.append(s)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}y.Ef=function(e,t,n){function s(){var l=u.i.variants.find(function(p){return p.id==e.id});if(l&&ma(l)){var d=u.l.o;u.g.abr.enabled&&(d.video!=l.video||d.audio&&l.audio&&d.audio.language==l.audio.language&&d.audio.channelsCount==l.audio.channelsCount&&d.audio.label==l.audio.label)&&ft("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),u.ua()?za(u,l,!1,!1,0):za(u,l,!1,t||!1,n||0),u.M.configure({language:l.language,role:l.audio&&l.audio.roles&&l.audio.roles[0]||"",channelCount:l.audio&&l.audio.channelsCount?l.audio.channelsCount:0,Ec:l.video&&l.video.hdr?l.video.hdr:"",spatialAudio:l.audio&&l.audio.spatialAudio?l.audio.spatialAudio:!1,videoLayout:l.video&&l.video.videoLayout?l.video.videoLayout:"",Jc:l.audio&&l.audio.label?l.audio.label:"",Ed:"",codecSwitchingStrategy:u.g.mediaSource.codecSwitchingStrategy,audioCodec:l.audio&&l.audio.codecs?l.audio.codecs:"",Gd:d.audio&&d.audio.codecs?d.audio.codecs:"",Fe:d.audio&&d.audio.channelsCount?d.audio.channelsCount:0,preferredAudioCodecs:u.g.preferredAudioCodecs,preferredAudioChannelCount:u.g.preferredAudioChannelCount}),Ur(u)}}var u=this;t=t===void 0?!1:t,n=n===void 0?0:n,!(this.i&&this.F&&(s(),!this.ua()))&&function(){if(e.originalAudioId&&u.h&&u.h.audioTracks){var l=Array.from(u.h.audioTracks);l=m(l);for(var d=l.next();!d.done;d=l.next())if(d=d.value,Sf(d)==e.id){C0(u,d);break}}}()},y.Ok=function(e,t){function n(){var u=s.M.getConfiguration();u.audioCodec=e.codecs||"",u.Jc=e.label||"",u.channelCount=e.channelsCount||0,u.language=e.language,u.role=e.roles[0]||"",u.spatialAudio=e.spatialAudio,s.M.configure(u),Qo(s,!0,t,!1,!1)}var s=this;t=t===void 0?0:t,!(this.i&&this.F&&(n(),!this.ua()))&&function(){if(s.h&&s.h.audioTracks){var u=Tt(e.language),l=Array.from(s.h.audioTracks),d=null;l=m(l);for(var p=l.next();!p.done;p=l.next()){p=p.value;var g=p.language||"und";if(p.label==e.label&&Tt(g)==u&&p.kind==e.roles[0]){d=p;break}}d&&C0(s,d)}}()},y.getAudioTracks=function(){if(this.i&&!this.ua()){var e=this.Pb();if(!e.length)return[];var t=e.find(function(l){return l.active});if(!t)return[];var n=e;if(this.m!=Nn||this.ua()||(n=e.filter(function(l){return l.originalVideoId===t.originalVideoId&&l.audioCodec})),!n.length)return[];e=new Map,n=m(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;var u=s.originalAudioId;u||s.audioId==null||(u=String(s.audioId)),u&&e.set(u,{active:s.active,language:s.language,label:s.label,mimeType:s.audioMimeType,codecs:s.audioCodec,primary:s.primary,roles:s.audioRoles||[],accessibilityPurpose:s.accessibilityPurpose,channelsCount:s.channelsCount,audioSamplingRate:s.audioSamplingRate,spatialAudio:s.spatialAudio,originalLanguage:s.originalLanguage})}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(l){var d=l.language;return d={active:l.enabled,language:Tt(d||"und"),label:l.label,mimeType:null,codecs:null,primary:l.kind=="main",roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:d},l.kind&&d.roles.push(l.kind),l.configuration&&(l.configuration.codec&&(d.codecs=l.configuration.codec),l.configuration.sampleRate&&(d.audioSamplingRate=l.configuration.sampleRate),l.configuration.numberOfChannels&&(d.channelsCount=l.configuration.numberOfChannels)),d}):[]},y.Qk=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?0:n;var s=this.Pb();if(s.length){var u=s.find(function(l){return l.active});u&&(s=s.find(function(l){return l.audioId===u.audioId&&(l.videoBandwidth||l.bandwidth)==e.bandwidth&&l.width==e.width&&l.height==e.height&&l.frameRate==e.frameRate&&l.pixelAspectRatio==e.pixelAspectRatio&&l.hdr==e.hdr&&l.colorGamut==e.colorGamut&&l.videoLayout==e.videoLayout&&l.videoMimeType==e.mimeType&&l.videoCodec==e.codecs}))&&!s.active&&this.Ef(s,t,n)}},y.getVideoTracks=function(){if(this.m==fi||this.ua())return[];var e=this.Pb();if(!e.length)return[];var t=e.find(function(l){return l.active});if(!t)return[];var n=e.filter(function(l){return l.originalAudioId===t.originalAudioId&&l.audioId===t.audioId&&l.audioGroupId===t.audioGroupId&&l.videoCodec});if(!n.length)return[];e=new Map,n=m(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;var u=s.originalVideoId;u||s.videoId==null||(u=String(s.videoId)),u&&e.set(u,{active:s.active,bandwidth:s.videoBandwidth||s.bandwidth,width:s.width,height:s.height,frameRate:s.frameRate,pixelAspectRatio:s.pixelAspectRatio,hdr:s.hdr,colorGamut:s.colorGamut,videoLayout:s.videoLayout,mimeType:s.videoMimeType,codecs:s.videoCodec})}return Array.from(e.values())},y.sj=function(){return i2(this.Pb())},y.Rj=function(){return i2(this.Dc())},y.rj=function(){return Array.from(n2(this.Pb()))},y.Qj=function(){return Array.from(n2(this.Dc()))},y.Hi=function(e,t,n,s,u,l,d){function p(){function v(L,O){return L.video||O.video?L.video&&O.video?Math.abs((L.video.height||0)-(O.video.height||0))+Math.abs((L.video.width||0)-(O.video.width||0)):1/0:0}var T=g.l.o;g.M=g.g.adaptationSetCriteriaFactory(),g.M.configure({language:e,role:t||"",channelCount:n||0,Ec:"",spatialAudio:l||!1,videoLayout:"",Jc:d||"",Ed:"",codecSwitchingStrategy:g.g.mediaSource.codecSwitchingStrategy,audioCodec:u||"",Gd:T.audio&&T.audio.codecs?T.audio.codecs:"",Fe:T.audio&&T.audio.channelsCount?T.audio.channelsCount:0,preferredAudioCodecs:g.g.preferredAudioCodecs,preferredAudioChannelCount:g.g.preferredAudioChannelCount});var b=g.M.create(g.i.variants),M=null;b=m(b.values());for(var _=b.next();!_.done;_=b.next())_=_.value,ma(_)&&(!M||v(M,T)>v(_,T))&&(M=_);M!=T&&(M?(T=Fo(M),g.Ef(T,!0,s||0)):Qo(g))}var g=this;n=n===void 0?0:n,s=s===void 0?0:s,u=u===void 0?"":u,l=l===void 0?!1:l,d=d===void 0?"":d,!(this.i&&this.F&&(p(),!this.ua()))&&function(){if(g.h&&g.h.audioTracks){var v=Es(g.Pb(),e,t||"",!1)[0];v&&g.Ef(v)}}()},y.ih=function(e,t,n){function s(){u.xd=e,u.se=t||"",u.re=n||!1;var l=Es(u.i.textStreams,u.xd,u.se,u.re)[0]||null;l&&l!=u.l.A&&(r0(u.A.h,l,!1),u.g.streaming.alwaysStreamText||u.Ng())&&(ec(u.l,l),Jo(u),Va(u))}var u=this;n=n===void 0?!1:n,!(this.i&&this.F&&(s(),!this.ua()))&&function(){var l=Es(u.Dc(),e,t||"",n||!1)[0];l&&u.jh(l)}()},y.Pk=function(e,t,n){function s(){for(var l=null,d=m(u.i.variants),p=d.next();!p.done;p=d.next())if(p=p.value,p.audio.label==e){l=p;break}l!=null&&(u.M=u.g.adaptationSetCriteriaFactory(),u.M.configure({language:l.language,role:"",channelCount:0,Ec:"",spatialAudio:!1,videoLayout:"",Ed:"",Jc:e,codecSwitchingStrategy:u.g.mediaSource.codecSwitchingStrategy,audioCodec:"",Gd:"",Fe:0,preferredAudioCodecs:u.g.preferredAudioCodecs,preferredAudioChannelCount:u.g.preferredAudioChannelCount}),Qo(u,t,n))}var u=this;t=t===void 0?!0:t,n=n===void 0?0:n,!(this.i&&this.F&&(s(),!this.ua()))&&function(){if(u.h&&u.h.audioTracks){var l=Array.from(u.h.audioTracks),d=null;l=m(l);for(var p=l.next();!p.done;p=l.next())p=p.value,p.label==e&&(d=p);d&&C0(u,d)}}()},y.Ng=function(){var e=this.ba;return this.o?this.o.isTextVisible():e},y.wj=function(){return this.eb.map(function(e){return jo(e)})},y.uj=function(e){if(st("getChapters","Please use an getChaptersAsync."),!this.eb.length)return[];var t=Tt(e);if(e=this.eb.filter(function(l){return Tt(l.language)==t}),!e.length)return[];var n=[],s=new Set;e=m(e);for(var u=e.next();!u.done;u=e.next())u=u.value,u.segmentIndex&&u.segmentIndex.Eb(function(l){var d=l.O()[0],p=l.startTime+"-"+l.endTime+"-"+d;l={id:p,title:d,startTime:l.startTime,endTime:l.endTime},s.has(p)||(n.push(l),s.add(p))});return n},y.vj=function(e){var t=this,n,s,u,l,d,p,g;return j(function(v){switch(v.g){case 1:if(!t.eb.length)return v.return([]);if(n=Tt(e),s=t.eb.filter(function(T){return Tt(T.language)==n}),!s.length)return v.return([]);u=[],l=new Set,d=m(s),p=d.next();case 2:if(p.done){v.u(4);break}if(g=p.value,g.segmentIndex){v.u(5);break}return D(v,g.createSegmentIndex(),5);case 5:g.segmentIndex.Eb(function(T){var b=T.O()[0],M=T.startTime+"-"+T.endTime+"-"+b;T={id:M,title:b,startTime:T.startTime,endTime:T.endTime},l.has(M)||(u.push(T),l.add(M))}),p=d.next(),v.u(2);break;case 4:return v.return(u)}})};function Cc(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function uE(e){return Array.from(e.h.textTracks).find(function(t){return t.label=="Shaka Player TextTrack"})}function aE(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}y.oh=function(e){e=!!e,this.ba!=e&&(this.ba=e,this.m==Nn?(this.o.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.A||(e=Es(this.i.textStreams,this.xd,this.se,this.re),0<e.length&&(ec(this.l,e[0]),Jo(this),Va(this))):Fk(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.o.setTextVisibility(e),Zx(this))},y.Kj=function(){if(this.F)var e=this.F.De();else{if(this.N==null)return new Date;if(this.N instanceof Date)return this.N;e=this.N}if(this.i&&!this.ua()){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},y.Gg=function(){if(this.i&&!this.ua()){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},y.We=function(){return this.V()&&this.i?this.i.presentationTimeline.We():null},y.Vb=function(){if(this.m==Nn)return this.G.Vb();var e={total:[],audio:[],video:[],text:[]};return this.m==fi&&(e.total=Lr(this.h.buffered)),e},y.Ue=function(){if(!this.h||!this.h.currentTime)return null;var e=this.Gg().getTime()+1e3*this.h.currentTime;return Math.floor(Date.now()-e)},y.getStats=function(){if(this.m!=Nn&&this.m!=fi)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};T0(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.V()||dA(this.A,Math.round(100*t)),this.F&&(this.A.S=this.F.Dh(),this.A.U=this.F.Eh()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),cA(this.A,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.A.M=Number(t.corruptedVideoFrames)),this.A.o=this.C?wb(this.C):NaN,fx(this.A,e.videoWidth||NaN,e.videoHeight||NaN),this.A.l="",this.V()&&this.Gg()!=null&&(e=this.Ue()||0,this.A.C=e/1e3),t=this.Pb().find(function(u){return u.active}),e=this.Dc().find(function(u){return u.active}),t){if(t.bandwidth){var n=this.K?this.K.i:1,s=n*t.bandwidth;e&&e.bandwidth&&(s+=n*e.bandwidth),this.A.A=s}t.width&&t.height&&fx(this.A,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.A.l=t)}return this.m!=Nn||this.ua()||(this.i&&(this.A.H=this.i.periodCount,this.A.G=this.i.gapCount,this.i.presentationTimeline&&(this.A.K=this.i.presentationTimeline.h)),e=this.s.getBandwidthEstimate(),this.A.s=e),this.m==fi&&cx(this.A,NaN),hA(this.A)},y.Hd=function(e,t,n,s,u,l,d){d=d===void 0?!1:d;var p=this,g,v,T,b,M,_,L,O,P,U,B,$;return j(function(W){switch(W.g){case 1:if(p.m!=Nn&&p.m!=fi)throw new q(1,7,7004);if(n!="subtitles"&&n!="captions"&&ft("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),s){W.u(2);break}return D(W,S0(p,e),3);case 3:s=W.h;case 2:if(g=[],p.B&&(g=p.B.getCuePoints()),p.m!=fi){W.u(4);break}return v=Be(),d&&v.Da()==="WEBKIT"&&(n="forced"),D(W,lE(p,e,t,n,s,l||"",g),5);case 5:if(T=W.h,T.track)return Gn(p),W.return(y1(T.track));throw new q(1,2,2012);case 4:if(b=vn,M=p.Sa(),_=M.end-M.start,p.i&&(_=p.i.presentationTimeline.getDuration()),_==1/0)throw new q(1,4,4033);if(!g.length){W.u(6);break}return D(W,bc(p,e,p.I,p.g.streaming.retryParameters),7);case 7:L=W.h,O=Xx(p,L,s,g),P=new Blob([O],{type:"text/vtt"}),e=Pp(P),s="text/vtt";case 6:if(U={id:p.ve++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:qf(0,_,[e]),mimeType:s||"",codecs:u||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:l||null,type:b.Ta,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!d,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([rn(s||"",u||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},B=rn(U.mimeType,U.codecs),$=ca(B),!$)throw new q(2,2,2014,s);return p.i.textStreams.push(U),Gn(p),W.return(jo(U))}})},y.He=function(e,t){var n=this,s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W;return j(function(J){switch(J.g){case 1:if(n.m!=Nn&&n.m!=fi)throw new q(1,7,7004);if(t){J.u(2);break}return D(J,S0(n,e),3);case 3:t=J.h;case 2:if(t!="text/vtt")throw new q(1,2,2017,e);if(s=vn,u=n.Sa(),l=u.end-u.start,n.i&&(l=n.i.presentationTimeline.getDuration()),l==1/0)throw new q(1,4,4045);return D(J,bc(n,e,n.I,n.g.streaming.retryParameters),4);case 4:if(d=J.h,p=fa(t),!p)throw new q(2,2,2014,t);for(g=p(),v={periodStart:0,segmentStart:0,segmentEnd:l,vttOffset:0},T=Ze(d),b=g.parseMedia(T,v,e,[]),M=[],_=m(b),L=_.next(),O={};!L.done;O={Qf:void 0,jd:void 0},L=_.next())O.jd=L.value,O.Qf=null,P=function(G){return function(){return G.Qf==null&&(G.Qf=yn([e],[G.jd.payload])),G.Qf||[]}}(O),U=new He(O.jd.startTime,O.jd.endTime,P,0,null,null,0,0,1/0),O.jd.payload.includes("#xywh")&&(B=O.jd.payload.split("#xywh=")[1].split(","),B.length===4&&U.Hf({height:parseInt(B[3],10),positionX:parseInt(B[0],10),positionY:parseInt(B[1],10),width:parseInt(B[2],10)})),M.push(U);if($=t,!M.length){J.u(5);break}return D(J,qo(M[0].O()[0],n.I,n.g.manifest.retryParameters),6);case 6:$=J.h;case 5:return W={id:n.ve++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vt(M),mimeType:$||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:s.Tf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([rn($||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},n.m==fi?n.Ae.push(W):n.i.imageStreams.push(W),Gn(n),J.return(lp(W))}})},y.Ge=function(e,t,n){var s=this,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B;return j(function($){switch($.g){case 1:if(s.m!=Nn&&s.m!=fi)throw new q(1,7,7004);if(n){$.u(2);break}return D($,S0(s,e),3);case 3:n=$.h;case 2:if(u=vn,l=s.Sa(),d=l.end-l.start,s.i&&(d=s.i.presentationTimeline.getDuration()),d==1/0)throw new q(1,4,4054);return D($,bc(s,e,s.I,s.g.streaming.retryParameters),4);case 4:if(p=$.h,g=fa(n),!g)throw new q(2,2,2014,n);for(v=g(),T={periodStart:0,segmentStart:0,segmentEnd:d,vttOffset:0},b=Ze(p),M=v.parseMedia(b,T,e,[]),_=[],L=m(M),O=L.next(),P={};!O.done;P={Qe:void 0},O=L.next())P.Qe=O.value,U=new He(P.Qe.startTime,P.Qe.endTime,function(W){return function(){return[W.Qe.payload]}}(P),0,null,null,0,0,1/0),_.push(U);return B={id:s.ve++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vt(_),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:u.Ta,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([rn("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},s.eb.push(B),Gn(s),$.return(jo(B))}})};function S0(e,t){var n;return j(function(s){switch(s.g){case 1:return le(s,2),D(s,qo(t,e.I,e.g.streaming.retryParameters),4);case 4:n=s.h,V(s,3);break;case 2:re(s);case 3:if(n)return s.return(n);throw new q(1,2,2011,t)}})}function lE(e,t,n,s,u,l,d){var p,g,v,T;return j(function(b){if(b.g==1)return u!="text/vtt"||d.length?D(b,bc(e,t,e.I,e.g.streaming.retryParameters),3):b.u(2);b.g!=2&&(p=b.h,g=Xx(e,p,u,d),v=new Blob([g],{type:"text/vtt"}),t=Pp(v),u="text/vtt"),T=document.createElement("track");var M=e.L,_=t;try{if(M.g.enabled){var L=d0(M);L.ot=p0,L.su=!0;var O=hc(L),P=h0(_,O)}else P=_}catch(U){mi("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",U),P=_}return T.src=P,T.label=l,T.kind=s,T.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(T),e.Xf.push(T),b.return(T)})}function bc(e,t,n,s){var u,l,d;return j(function(p){if(p.g==1){u=Wi,l=fn([t],s),l.method="GET";var g=e.L;try{g.g.enabled&&Zs(g,l,{ot:p0,su:!0})}catch(v){mi("CMCD_TEXT_ERROR","Could not generate text CMCD data.",v)}return D(p,n.request(u,l).promise,2)}return d=p.h,p.return(d.data)})}function Xx(e,t,n,s){var u=fa(n);if(u)return n=u(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Ze(t),t=n.parseMedia(t,e,null,[]),LA(t,s);throw new q(2,2,2014,n)}y.Vk=function(e,t){this.wa.width=e,this.wa.height=t},y.eh=function(e){if(this.m==Nn){var t=this.l;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.B)t=!1;else{for(var n=m(t.h.values()),s=n.next();!s.done;s=n.next())s=s.value,!s.Sd||s.Qa||s.zb||(s.Sd=!1,Hn(t,s,e));t=!0}}else t=!1;return t},y.Fg=function(){return ft("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},y.Gj=function(){return this.qc},y.Aj=function(){var e={video:null,audio:null,text:null};if(this.m!=Nn)return e;var t=this.l.o,n=this.h.currentTime;t=m([t.video,t.audio,this.l.A]);for(var s=t.next();!s.done;s=t.next())if((s=s.value)&&s.segmentIndex){var u=s.segmentIndex.find(n);u=s.segmentIndex.get(u),u={codecs:u.codecs||s.codecs,mimeType:u.mimeType||s.mimeType,bandwidth:u.bandwidth||s.bandwidth},s.type=="video"?(u.width=s.width,u.height=s.height,e.video=u):s.type=="audio"?e.audio=u:s.type==ct&&(e.text=u)}return e};function or(e){var t=Qs();return t.streaming.failureCallback=function(n){if(e.V()){var s=null;n.code==1001||n.code==1002?(s=1,e.g.streaming.lowLatencyMode&&(s=.1)):n.code==1003&&(s=.1),s!=null&&(n.severity=1,e.eh(s))}},t.textDisplayFactory=function(){var n=Be();return e.we&&(document.fullscreenEnabled||n.Da()!=="WEBKIT")?new _n(e.h,e.we):"track"in document.createElement("track")?new cn(e):new Rn},t}y.Oi=function(e){this.we=e};function fE(e,t){for(var n=new Set,s=m(t.textStreams),u=s.next();!u.done;u=s.next())u=u.value,u.mimeType!="application/cea-608"&&u.mimeType!="application/cea-708"||n.add(u.originalId);for(s=m(t.variants),u=s.next();!u.done;u=s.next())if((u=u.value.video)&&u.closedCaptions){for(var l=m(u.closedCaptions.keys()),d=l.next();!d.done;d=l.next())if(d=d.value,!n.has(d)){var p=d.startsWith("CC")?"application/cea-608":"application/cea-708",g=new Qt,v=u.closedCaptions.get(d);p={id:e.ve++,originalId:d,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:g,mimeType:p,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:v,originalLanguage:v,label:null,type:ct,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:u.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([rn(p,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(p),n.add(d)}}}function cE(e,t){var n,s,u,l,d;return j(function(p){return p.g==1?(n=e.audio,s=e.video,u=function(g,v){var T,b,M;return j(function(_){return _.g==1?g?g.segmentIndex?_.u(2):D(_,g.createSegmentIndex(),2):_.return(null):(b=(T=g.segmentIndex.Wb(v))?T.next().value:null,b?(M=b.startTime,_.return(M)):_.return(null))})},D(p,u(n,t),2)):p.g!=3?(l=p.h,D(p,u(s,t),3)):(d=p.h,d!=null&&l!=null?p.return(Math.max(d,l)):d!=null?p.return(d):l!=null?p.return(l):p.return(t))})}function kc(e){var t=e.Mg();if(e.A&&e.P&&e.F){if(e.g.streaming.rebufferingGoal==0){var n=e.K;n.j=!1,Fp(n)}else n=e.K,n.j=t,Fp(n);if(e.L&&(n=e.L,t||n.s||(n.s=!0),n.s&&t&&(n.B=!0),n.F=t),T0(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ee<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var s=e.g.streaming.liveSync.targetLatencyTolerance,u=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.U&&(e.U=Math.min(e.U+ ++e.Ee*u,n-s))}}t=new Map().set("buffering",t),e.dispatchEvent(Ot("buffering",t))}function Wx(e,t){e.bc.Ra(),e.bc.D(e.h,"timeupdate",function(){var n=e.h.currentTime,s=e.Sa(),u=e.V(),l=u?e.g.streaming.safeSeekOffset:0;0<t?(!u||1<=t)&&Math.floor(n)>=Math.floor(s.end)&&e.Id():Math.floor(n)<=Math.floor(s.start+l)&&e.Id()})}function T0(e){if(e.A&&e.P){var t=e.A.g,n="playing";e.P.g==Ps?n="buffering":e.Wd()?n="ended":e.h.paused&&(n="paused");var s=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:s,duration:0},t=!0;else{var u=Date.now()/1e3;t.g.duration=u-t.g.timestamp,t.g.state==s?t=!1:(t.h.push(t.g),t.g={timestamp:u,state:s,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Ot("statechanged",n)))}}function Kx(e){var t=e.h.playbackRate,n=e.V();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var s=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,u=e.Vh();u<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=s&&e.ke(s,!1):u==1&&t!==e.K.Pc()&&e.Id()}if(n&&(n=e.Sa(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){s=e.g.streaming.liveSync.targetLatencyTolerance,u=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var l=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var d=e.g.streaming.liveSync.targetLatency,p=d+s,g=Math.max(0,d-s),v=e.g.streaming.liveSync.maxPlaybackRate,T=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(d=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?p=e.i.serviceDescription.targetLatency+s:e.i.serviceDescription.maxLatency!=null&&(p=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?g=Math.max(0,e.i.serviceDescription.targetLatency-s):e.i.serviceDescription.minLatency!=null&&(g=e.i.serviceDescription.minLatency),v=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,T=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.U||typeof d!="number"||(e.U=d);var b=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;u&&e.$b&&e.U!==null&&typeof d=="number"&&e.Ee<b&&Date.now()-e.$b>1e3*l&&(l=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.U=Math.max(e.U-(d-l)/2,l+s),e.$b=Date.now()),u&&e.U!==null&&(p=e.U+s,g=e.U-s),d=n.end-e.h.currentTime,s=0,e.m==fi&&(u=e.h.buffered,0<u.length&&(s=u.end(u.length-1),s=Math.max(v,s-n.end))),n=e.g.streaming.liveSync.panicMode,u=1e3*e.g.streaming.liveSync.panicThreshold,l=Date.now()-e.P.h,n&&!T&&(T=e.g.streaming.liveSync.minPlaybackRate),n&&T&&l<=u?t!=T&&e.ke(T,!1):p!=null&&v&&d-s>p?(t!=v&&e.ke(v,!1),e.$b=null):g!=null&&T&&d-s<g?(t!=T&&e.ke(T,!1),e.$b=null):t!==e.K.Pc()&&(e.Id(),e.$b=Date.now())}}function Ac(e){if(e.h){var t=function(u,l){var d=d===void 0?Number.EPSILON:d;if(u===l)d=!0;else{var p=Math.abs(u-l);d=p<=d?!0:d!==Number.EPSILON?Math.abs(p-d)<=Number.EPSILON:!1}return(d||l>u)&&e.Wf<u?(e.Wf=u,!0):!1},n=e.Sa();if(n=n.end-n.start,n=0<n?e.h.currentTime/n:0,!isNaN(n)){if(n*=100,t(0,n))var s=Ot("started");else t(25,n)?s=Ot("firstquartile"):t(50,n)?s=Ot("midpoint"):t(75,n)?s=Ot("thirdquartile"):((t(100,n)||100<n)&&(s=Ot("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.Wd()&&e.h.pause());s&&e.dispatchEvent(s)}}}function Ur(e){try{iv(e.ue,e.i)}catch(n){return tu(e,n),!1}var t=Cf(e.i.variants);return t=e.M.create(t),e.s.setVariants(Array.from(t.values())),!0}function Qo(e,t,n,s,u){t=t===void 0?!0:t,n=n===void 0?0:n,s=s===void 0?!1:s,u=u===void 0?!0:u;var l;(l=Ur(e)?e.s.chooseVariant():null)&&za(e,l,u,t,n,s)}function za(e,t,n,s,u,l){l=l===void 0?!1:l;var d=e.l.o;if(t==d)s&&ix(e.l,t,s,u,!0);else{var p=e.A.h;if(p.h!=t&&(p.h=t,p.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),ix(e.l,t,s,u,l,n),s=null,d&&(s=Fo(d)),d=Fo(t),d.active=!0,e.S&&(u=e.S,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),l=0,p=-1,t.mimeType){case"video/webm":l=1;break;case"video/mp4":l=2}switch(e.Xh()){case"DASH":p=1;break;case"HLS":p=0}u.g&&(u.g.setLevelSwitching(t.id,!0),u.g.setContainerFormat(l),u.j||u.g.setStreamingFormat(p))}n?(n=new Map().set("oldTrack",s).set("newTrack",d),n=Ot("adaptation",n),Zo(e,n)):qx(e,s,d),Qx(e,s,d)}}function C0(e,t){var n=Array.from(e.h.audioTracks).find(function(u){return u.enabled});if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var s=Yx(e);n=Tf(n,s),t=Tf(t,s),qx(e,n,t),Qx(e,n,t)}}function Yx(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(t){return t.selected}):null}function Gn(e){var t=Ot("trackschanged");Zo(e,t),Jx(e)}function qx(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),t=Ot("variantchanged",t),Zo(e,t)}function Qx(e,t,n){var s=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(s=!0),s&&Jx(e)}function Jx(e){var t=Ot("audiotrackschanged");Zo(e,t)}function Jo(e){var t=Ot("textchanged");Zo(e,t)}function Zx(e){var t=Ot("texttrackvisibility");Zo(e,t)}function e2(e){e.g.abr.enabled||b0(e);var t=new Map().set("newStatus",e.g.abr.enabled);Zo(e,Ot("abrstatuschanged",t))}function Va(e){var t=e.Dc().find(function(n){return n.active});t&&e.o&&e.o.setTextLanguage&&e.o.setTextLanguage(t.language)}function b0(e,t){if(t=t===void 0?!0:t,e.m==Nn){e.xe.stop();for(var n=m(e.i.variants),s=n.next();!s.done;s=n.next())s.value.disabledUntilTime=0;t&&Ur(e)}}y.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===Ki||!navigator.onLine||t==0||!this.i)return!1;if(this.i.variants.some(function(p){var g=p[e.type];return g&&g.id!==e.id&&!p.disabledUntilTime?e.type=="audio"?e.language===g.language:!0:!1})){for(var n=!1,s=!1,u=m(this.i.variants),l=u.next();!l.done;l=u.next()){l=l.value;var d=l[e.type];d&&(d.id===e.id?(l.disabledUntilTime=Date.now()/1e3+t,n=!0):d.trickModeVideo&&d.trickModeVideo.id==e.id&&(s=!0))}return!n&&s?!1:(this.xe.Fa(1),t=this.Vb().video.reduce(function(p,g){return p+g.end-g.start},0),Qo(this,!1,t,!0,!1),!0)}return!1};function tu(e,t){var n,s,u,l,d;return j(function(p){switch(p.g){case 1:if(e.m==Ki)return p.return();if(t.severity===1&&e.A.L++,n=!0,!(e.Oa&&e.i&&e.l)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3024&&t.code!=3018){p.u(2);break}return s=Be(),s.Da()==="WEBKIT"&&t.code==3016?p.return():(le(p,3),D(p,Zp(e.l),5));case 5:u=p.h,n=!u,u&&(l=Ot("mediasourcerecovered"),e.dispatchEvent(l)),V(p,2);break;case 3:re(p),n=!0;case 2:if(!n)return p.return();t.severity===2&&b0(e,!1),d=Ot("error",new Map().set("detail",t)),e.dispatchEvent(d),d.defaultPrevented&&(t.handled=!0),ne(p)}})}y.addFont=function(e,t){return tk(e,t)};function Ha(e,t,n,s){s=s===void 0?e:s,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),s.dispatchEvent(Ot(t,e))}function t2(e,t,n,s){s=s===void 0?!1:s,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Ot(s?"audiotrackchanged":"mediaqualitychanged",t))}function k0(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new q(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new q(2,3,3016,n,t,e.h.error.message))}function A0(e,t,n){0<t&&(e.V()||e.Ni(t)),t=e.getDuration(),n<t&&(e.V()||e.pb(n))}function Zo(e,t){j(function(n){if(n.g==1)return D(n,Promise.resolve(),2);e.m!=Ki&&e.dispatchEvent(t),ne(n)})}function n2(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Tt(n.language)):t.add("und");return t}function i2(e){for(var t=new Map,n=new Map,s=0;s<e.length;s++){var u=e[s],l="und",d=[];u.language&&(l=Tt(u.language)),u.type=="variant"?d=u.audioRoles:d=u.roles,d&&d.length||(d=[""]),t.has(l)||t.set(l,new Set),d=m(d);for(var p=d.next();!p.done;p=d.next())p=p.value,t.get(l).add(p),u.label&&(n.has(l)||n.set(l,new Map),n.get(l).set(p,u.label))}var g=[];return t.forEach(function(v,T){v=m(v);for(var b=v.next();!b.done;b=v.next()){b=b.value;var M=null;n.has(T)&&n.get(T).has(b)&&(M=n.get(T).get(b)),g.push({language:T,role:b,label:M})}}),g}y.ua=function(){return this.h&&this.h.remote?this.h.remote.state!="disconnected":!1},y.Wd=function(){return!this.h||this.h.ended?!0:this.Oa&&!this.V()&&this.h.currentTime>=this.Sa().end},be("shaka.Player",ye),ye.prototype.isEnded=ye.prototype.Wd,ye.prototype.isRemotePlayback=ye.prototype.ua,ye.prototype.addFont=ye.prototype.addFont,ye.prototype.setVideoContainer=ye.prototype.Oi,ye.prototype.getFetchedPlaybackInfo=ye.prototype.Aj,ye.prototype.getManifestParserFactory=ye.prototype.Gj,ye.prototype.getManifest=ye.prototype.Fg,ye.prototype.retryStreaming=ye.prototype.eh,ye.prototype.setMaxHardwareResolution=ye.prototype.Vk,ye.prototype.addChaptersTrack=ye.prototype.Ge,ye.prototype.addThumbnailsTrack=ye.prototype.He,ye.prototype.addTextTrackAsync=ye.prototype.Hd,ye.prototype.getStats=ye.prototype.getStats,ye.prototype.getBufferedInfo=ye.prototype.Vb,ye.prototype.getSegmentAvailabilityDuration=ye.prototype.We,ye.prototype.getPresentationStartTimeAsDate=ye.prototype.Gg,ye.prototype.getPlayheadTimeAsDate=ye.prototype.Kj,ye.prototype.setTextTrackVisibility=ye.prototype.oh,ye.prototype.getChaptersAsync=ye.prototype.vj,ye.prototype.getChapters=ye.prototype.uj,ye.prototype.getChaptersTracks=ye.prototype.wj,ye.prototype.isTextTrackVisible=ye.prototype.Ng,ye.prototype.selectVariantsByLabel=ye.prototype.Pk,ye.prototype.selectTextLanguage=ye.prototype.ih,ye.prototype.selectAudioLanguage=ye.prototype.Hi,ye.prototype.getTextLanguages=ye.prototype.Qj,ye.prototype.getAudioLanguages=ye.prototype.rj,ye.prototype.getTextLanguagesAndRoles=ye.prototype.Rj,ye.prototype.getAudioLanguagesAndRoles=ye.prototype.sj,ye.prototype.getVideoTracks=ye.prototype.getVideoTracks,ye.prototype.selectVideoTrack=ye.prototype.Qk,ye.prototype.getAudioTracks=ye.prototype.getAudioTracks,ye.prototype.selectAudioTrack=ye.prototype.Ok,ye.prototype.selectVariantTrack=ye.prototype.Ef,ye.prototype.selectTextTrack=ye.prototype.jh,ye.prototype.getThumbnails=ye.prototype.Tj,ye.prototype.getAllThumbnails=ye.prototype.qj,ye.prototype.getImageTracks=ye.prototype.Cj,ye.prototype.getTextTracks=ye.prototype.Dc,ye.prototype.getVariantTracks=ye.prototype.Pb,ye.prototype.cancelTrickPlay=ye.prototype.Id,ye.prototype.trickPlay=ye.prototype.ke,ye.prototype.useTrickPlayTrackIfAvailable=ye.prototype.Ch,ye.prototype.getPlaybackRate=ye.prototype.ub,ye.prototype.isBuffering=ye.prototype.Mg,ye.prototype.getKeyStatuses=ye.prototype.Te,ye.prototype.getActiveSessionsMetadata=ye.prototype.Eg,ye.prototype.getExpiration=ye.prototype.Pd,ye.prototype.drmInfo=ye.prototype.drmInfo,ye.prototype.keySystem=ye.prototype.keySystem,ye.prototype.isFullyLoaded=ye.prototype.dk,ye.prototype.goToLive=ye.prototype.Zj,ye.prototype.seekRange=ye.prototype.Sa,ye.prototype.isVideoOnly=ye.prototype.jk,ye.prototype.isAudioOnly=ye.prototype.ck,ye.prototype.isInProgress=ye.prototype.Tc,ye.prototype.isLive=ye.prototype.V,ye.prototype.getQueueManager=ye.prototype.$h,ye.prototype.getAdManager=ye.prototype.Uh,ye.prototype.getAssetUri=ye.prototype.nd,ye.prototype.getNetworkingEngine=ye.prototype.Ob,ye.prototype.getMediaElement=ye.prototype.Jj,ye.prototype.getManifestType=ye.prototype.Xh,ye.prototype.getLoadMode=ye.prototype.Fj,ye.prototype.resetConfiguration=ye.prototype.Ci,ye.prototype.getBufferFullness=ye.prototype.Vh,ye.prototype.getNonDefaultConfiguration=ye.prototype.Zh,ye.prototype.getConfigurationForLowLatency=ye.prototype.xj,ye.prototype.getConfiguration=ye.prototype.getConfiguration,ye.prototype.configurationForLowLatency=ye.prototype.nj,ye.prototype.configure=ye.prototype.configure,ye.prototype.releaseAllMutexes=ye.prototype.Gk,ye.prototype.destroyAllPreloads=ye.prototype.ng,ye.prototype.preload=ye.prototype.preload,ye.prototype.detachAndSavePreload=ye.prototype.Qh,ye.prototype.unloadAndSavePreload=ye.prototype.Yk,ye.prototype.load=ye.prototype.load,ye.prototype.updateStartTime=ye.prototype.cl,ye.prototype.unload=ye.prototype.vc,ye.prototype.detach=ye.prototype.detach,ye.prototype.attachCanvas=ye.prototype.fj,ye.prototype.attach=ye.prototype.fc,ye.probeSupport=function(e){e=e===void 0?!0:e;var t,n,s,u,l,d,p;return j(function(g){switch(g.g){case 1:if(t={},!e){g.u(2);break}return D(g,kb(),3);case 3:t=g.h;case 2:return n=Ob(),s=ak(),u=Be(),D(g,u.ic(),4);case 4:return l=g.h,d={manifest:n,media:s,drm:t,hardwareResolution:l},p=o2,p.forEach(function(v,T){d[T]=v()}),g.return(d)}})},ye.isBrowserSupported=function(){return f.Promise||ft("A Promise implementation or polyfill is required"),!(f.Promise&&f.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/")?!1:(Be(),gr()?!0:Go().canPlayType("application/x-mpegurl")!="")},ye.setQueueManagerFactory=function(e){Mc=e},ye.setAdManagerFactory=function(e){Ic=e},ye.registerSupportPlugin=Lx,ye.prototype.destroy=ye.prototype.destroy;var Ki=0,Ec=1,Nn=2,fi=3;ye.LoadMode={DESTROYED:Ki,NOT_LOADED:Ec,MEDIA_SOURCE:Nn,SRC_EQUALS:fi},ye.version="v4.15.9";var r2=["4","15"];_y=new function(e){this.g=e,this.i=Zl,this.h=D4}(new Rt(Number(r2[0]),Number(r2[1])));var o2=new Map,Ic=null,Mc=null;function s2(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function dE(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function Ge(e,t,n){var s=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new Ee,this.l.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){s.i=!0}),this.l.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){s.i=!1})}y=Ge.prototype,y.needsSkipUI=function(){return!1},y.isClientRendering=function(){return!0},y.hasCustomClick=function(){return!0},y.isUsingAnotherMediaElement=function(){return!0},y.getDuration=function(){return this.g.getDuration()},y.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},y.getRemainingTime=function(){return this.h.getRemainingTime()},y.isPaused=function(){return this.i},y.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},y.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},y.canSkipNow=function(){return this.h.getAdSkippableState()},y.skip=function(){return this.h.skip()},y.pause=function(){return this.h.pause()},y.play=function(){return this.h.resume()},y.getVolume=function(){return this.h.getVolume()},y.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},y.isMuted=function(){return this.h.getVolume()==0},y.isLinear=function(){return this.g.isLinear()},y.resize=function(e,t){this.h.resize(e,t)},y.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},y.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},y.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},y.getTitle=function(){return this.g.getTitle()},y.getDescription=function(){return this.g.getDescription()},y.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},y.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},y.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},y.getVastAdId=function(){return""},y.getAdId=function(){return this.g.getAdId()},y.getCreativeAdId=function(){return this.g.getCreativeAdId()},y.getAdvertiserName=function(){return this.g.getAdvertiserName()},y.getMediaUrl=function(){return this.g.getMediaUrl()},y.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},y.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},y.release=function(){this.h=this.g=null},be("shaka.ads.ClientSideAd",Ge),Ge.prototype.release=Ge.prototype.release,Ge.prototype.getPodIndex=Ge.prototype.getPodIndex,Ge.prototype.getTimeOffset=Ge.prototype.getTimeOffset,Ge.prototype.getMediaUrl=Ge.prototype.getMediaUrl,Ge.prototype.getAdvertiserName=Ge.prototype.getAdvertiserName,Ge.prototype.getCreativeAdId=Ge.prototype.getCreativeAdId,Ge.prototype.getAdId=Ge.prototype.getAdId,Ge.prototype.getVastAdId=Ge.prototype.getVastAdId,Ge.prototype.getVastMediaWidth=Ge.prototype.getVastMediaWidth,Ge.prototype.getVastMediaHeight=Ge.prototype.getVastMediaHeight,Ge.prototype.getVastMediaBitrate=Ge.prototype.getVastMediaBitrate,Ge.prototype.getDescription=Ge.prototype.getDescription,Ge.prototype.getTitle=Ge.prototype.getTitle,Ge.prototype.getPositionInSequence=Ge.prototype.getPositionInSequence,Ge.prototype.getSequenceLength=Ge.prototype.getSequenceLength,Ge.prototype.setMuted=Ge.prototype.setMuted,Ge.prototype.resize=Ge.prototype.resize,Ge.prototype.isLinear=Ge.prototype.isLinear,Ge.prototype.isMuted=Ge.prototype.isMuted,Ge.prototype.setVolume=Ge.prototype.setVolume,Ge.prototype.getVolume=Ge.prototype.getVolume,Ge.prototype.play=Ge.prototype.play,Ge.prototype.pause=Ge.prototype.pause,Ge.prototype.skip=Ge.prototype.skip,Ge.prototype.canSkipNow=Ge.prototype.canSkipNow,Ge.prototype.getTimeUntilSkippable=Ge.prototype.getTimeUntilSkippable,Ge.prototype.isSkippable=Ge.prototype.isSkippable,Ge.prototype.isPaused=Ge.prototype.isPaused,Ge.prototype.getRemainingTime=Ge.prototype.getRemainingTime,Ge.prototype.getMinSuggestedDuration=Ge.prototype.getMinSuggestedDuration,Ge.prototype.getDuration=Ge.prototype.getDuration,Ge.prototype.isUsingAnotherMediaElement=Ge.prototype.isUsingAnotherMediaElement,Ge.prototype.hasCustomClick=Ge.prototype.hasCustomClick,Ge.prototype.isClientRendering=Ge.prototype.isClientRendering,Ge.prototype.needsSkipUI=Ge.prototype.needsSkipUI;function zt(){}function u2(e,t){var n=[];e=m(kt(e,"Ad"));for(var s=e.next();!s.done;s=e.next())if((s=Yt(s.value,"InLine"))&&(s=Yt(s,"Creatives"))){s=m(kt(s,"Creative"));for(var u=s.next();!u.done;u=s.next()){u=u.value;var l=Yt(u,"Linear");if(l&&hE(n,t,l),u=Yt(u,"NonLinearAds")){u=kt(u,"NonLinear"),u=m(u);for(var d=u.next();!d.done;d=u.next())e:{l=n;var p=t,g=d.value,v=Yt(g,"StaticResource");if(v)d=v.attributes.creativeType;else{if(v=Yt(g,"HTMLResource"),!v)break e;d="text/html"}if(v=si(v)){d==="text/html"&&(v="data:text/html;charset=UTF-8,"+encodeURIComponent(v));var T=Qe(g,"width",Cn)||Qe(g,"expandedWidth",Cn),b=Qe(g,"height",Cn)||Qe(g,"expandedHeight",Cn);if(T||b){var M=null;(g=g.attributes.minSuggestedDuration)&&(M=Ts(g)),g=0,p!=null&&(g=p),l.push({id:null,groupId:null,startTime:g,endTime:null,uri:v,mimeType:d,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:M,once:!0,pre:p==null,post:p==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:T||0,y:b||0}},displayOnBackground:!1,currentVideo:null,background:null})}}}}}}return n}function hE(e,t,n){var s=0;t!=null&&(s=t);var u=null;if(n.attributes.skipoffset&&(u=Ts(n.attributes.skipoffset),isNaN(u)&&(u=null)),n=Yt(n,"MediaFiles")){var l=kt(n,"MediaFile");for(n=l,l=l.filter(function(p){return p.attributes.delivery=="streaming"}),l.length&&(n=l),n=n.sort(function(p,g){return(parseInt(g.attributes.height,10)||0)-(parseInt(p.attributes.height,10)||0)}),n=m(n),l=n.next();!l.done;l=n.next())if(l=l.value,!l.attributes.apiFramework){var d=si(l);if(d){e.push({id:null,groupId:null,startTime:s,endTime:null,uri:d,mimeType:l.attributes.type||null,isSkippable:u!=null,skipOffset:u,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});break}}}}function pE(e){var t=[];e=m(kt(e,"vmap:AdBreak"));for(var n=e.next();!n.done;n=e.next()){var s=n.value,u=s.attributes.timeOffset;u&&(n=null,u=="start"?n=null:u=="end"?n=1/0:n=Ts(u),(s=Yt(s,"vmap:AdSource"))&&(s=Yt(s,"vmap:AdTagURI"))&&(s=an(s))&&t.push({time:n,uri:s}))}return t}be("shaka.ads.Utils",zt),zt.ADS_LOADED="ads-loaded",zt.AD_STARTED="ad-started",zt.AD_FIRST_QUARTILE="ad-first-quartile",zt.AD_MIDPOINT="ad-midpoint",zt.AD_THIRD_QUARTILE="ad-third-quartile",zt.AD_COMPLETE="ad-complete",zt.AD_STOPPED="ad-stopped",zt.AD_SKIPPED="ad-skipped",zt.AD_VOLUME_CHANGED="ad-volume-changed",zt.AD_MUTED="ad-muted",zt.AD_PAUSED="ad-paused",zt.AD_RESUMED="ad-resumed",zt.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",zt.CUEPOINTS_CHANGED="ad-cue-points-changed",zt.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",zt.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",zt.AD_CLICKED="ad-clicked",zt.AD_PROGRESS="ad-progress",zt.AD_BUFFERING="ad-buffering",zt.AD_IMPRESSION="ad-impression",zt.AD_DURATION_CHANGED="ad-duration-changed",zt.AD_CLOSED="ad-closed",zt.AD_LOADED="ad-loaded",zt.ALL_ADS_COMPLETED="all-ads-completed",zt.AD_LINEAR_CHANGED="ad-linear-changed",zt.AD_METADATA="ad-metadata",zt.AD_RECOVERABLE_ERROR="ad-recoverable-error",zt.AD_ERROR="ad-error",zt.AD_BREAK_READY="ad-break-ready",zt.AD_INTERACTION="ad-interaction",zt.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",zt.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",zt.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function Rc(e,t,n,s,u){var l=this;this.s=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=u,this.j=null,this.h=new Ee,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.15.9"),this.g=null,this.B=s||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(d){gE(l,d)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(d){a2(l,d)}),this.h.D(this.i,"ended",function(){l.m.contentComplete()}),this.h.Aa(this.i,"play",function(){l.F=!0})}Rc.prototype.configure=function(e){this.o=e},Rc.prototype.stop=function(){this.g&&this.g.stop(),this.s&&Ea(this.s)},Rc.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function a2(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new Ie("ad-error",t)),_c(e,null),e.l(new Ie("ad-cue-points-changed",new Map().set("cuepoints",[])))}function gE(e,t){if(e.l(new Ie("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new Ie("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var s=e.g.getCuePoints();if(s.length){t=[],s=m(s);for(var u=s.next();!u.done;u=s.next())t.push({start:u.value,end:null});e.l(new Ie("ad-cue-points-changed",new Map().set("cuepoints",t)))}mE(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),"ResizeObserver"in f?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.Aa(e.i,"play",function(){e.F=!0,e.g.start()})}catch{_c(e,null)}}function mE(e){function t(n,s){n=new Map().set("originalEvent",n),e.l(new Ie(s,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){a2(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){l2(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){l2(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){_c(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){_c(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function l2(e,t){var n=t.getAd();n?(e.j=new Ge(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new Ie("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new Ie("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):ft("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function _c(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new Ie("ad-content-resume-requested")),e.l(new Ie("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function Xe(e,t,n,s,u,l){this.g=e,this.i=t,this.j=(this.h=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.A=n,this.o=s,this.m=u,this.s=l,this.B=t.overlay}y=Xe.prototype,y.needsSkipUI=function(){return!0},y.isClientRendering=function(){return!0},y.hasCustomClick=function(){return!1},y.isUsingAnotherMediaElement=function(){return this.s},y.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},y.getMinSuggestedDuration=function(){return this.getDuration()},y.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},y.isPaused=function(){return this.g.paused},y.isSkippable=function(){return this.h&&this.l!=null?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.h},y.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},y.canSkipNow=function(){return this.h&&this.getTimeUntilSkippable()==0},y.skip=function(){this.canSkipNow()&&this.A()},y.pause=function(){return this.g.pause()},y.play=function(){return this.g.play()},y.getVolume=function(){return this.g.volume},y.setVolume=function(e){this.g.volume=e},y.isMuted=function(){return this.g.muted},y.isLinear=function(){return this.B==null},y.resize=function(){},y.setMuted=function(e){this.g.muted=e},y.getSequenceLength=function(){return this.o},y.getPositionInSequence=function(){return this.m},y.getTitle=function(){return""},y.getDescription=function(){return""},y.getVastMediaBitrate=function(){return 0},y.getVastMediaHeight=function(){return 0},y.getVastMediaWidth=function(){return 0},y.getVastAdId=function(){return""},y.getAdId=function(){return this.i.id||""},y.getCreativeAdId=function(){return""},y.getAdvertiserName=function(){return""},y.getMediaUrl=function(){return this.i.uri},y.getTimeOffset=function(){return 0},y.getPodIndex=function(){return 0},y.release=function(){this.g=null},be("shaka.ads.InterstitialAd",Xe),Xe.prototype.release=Xe.prototype.release,Xe.prototype.getPodIndex=Xe.prototype.getPodIndex,Xe.prototype.getTimeOffset=Xe.prototype.getTimeOffset,Xe.prototype.getMediaUrl=Xe.prototype.getMediaUrl,Xe.prototype.getAdvertiserName=Xe.prototype.getAdvertiserName,Xe.prototype.getCreativeAdId=Xe.prototype.getCreativeAdId,Xe.prototype.getAdId=Xe.prototype.getAdId,Xe.prototype.getVastAdId=Xe.prototype.getVastAdId,Xe.prototype.getVastMediaWidth=Xe.prototype.getVastMediaWidth,Xe.prototype.getVastMediaHeight=Xe.prototype.getVastMediaHeight,Xe.prototype.getVastMediaBitrate=Xe.prototype.getVastMediaBitrate,Xe.prototype.getDescription=Xe.prototype.getDescription,Xe.prototype.getTitle=Xe.prototype.getTitle,Xe.prototype.getPositionInSequence=Xe.prototype.getPositionInSequence,Xe.prototype.getSequenceLength=Xe.prototype.getSequenceLength,Xe.prototype.setMuted=Xe.prototype.setMuted,Xe.prototype.resize=Xe.prototype.resize,Xe.prototype.isLinear=Xe.prototype.isLinear,Xe.prototype.isMuted=Xe.prototype.isMuted,Xe.prototype.setVolume=Xe.prototype.setVolume,Xe.prototype.getVolume=Xe.prototype.getVolume,Xe.prototype.play=Xe.prototype.play,Xe.prototype.pause=Xe.prototype.pause,Xe.prototype.skip=Xe.prototype.skip,Xe.prototype.canSkipNow=Xe.prototype.canSkipNow,Xe.prototype.getTimeUntilSkippable=Xe.prototype.getTimeUntilSkippable,Xe.prototype.isSkippable=Xe.prototype.isSkippable,Xe.prototype.isPaused=Xe.prototype.isPaused,Xe.prototype.getRemainingTime=Xe.prototype.getRemainingTime,Xe.prototype.getMinSuggestedDuration=Xe.prototype.getMinSuggestedDuration,Xe.prototype.getDuration=Xe.prototype.getDuration,Xe.prototype.isUsingAnotherMediaElement=Xe.prototype.isUsingAnotherMediaElement,Xe.prototype.hasCustomClick=Xe.prototype.hasCustomClick,Xe.prototype.isClientRendering=Xe.prototype.isClientRendering,Xe.prototype.needsSkipUI=Xe.prototype.needsSkipUI;function We(e,t,n){this.g=e,this.j=t,this.h=n,this.i=e.overlay==null}y=We.prototype,y.needsSkipUI=function(){return!0},y.isClientRendering=function(){return!0},y.hasCustomClick=function(){return!1},y.isUsingAnotherMediaElement=function(){return!1},y.getDuration=function(){return-1},y.getMinSuggestedDuration=function(){return this.getDuration()},y.getRemainingTime=function(){return-1},y.isPaused=function(){return!1},y.isSkippable=function(){return!1},y.getTimeUntilSkippable=function(){return 0},y.canSkipNow=function(){return!1},y.skip=function(){},y.pause=function(){},y.play=function(){},y.getVolume=function(){return 1},y.setVolume=function(){},y.isMuted=function(){return!1},y.isLinear=function(){return this.i},y.resize=function(){},y.setMuted=function(){},y.getSequenceLength=function(){return this.j},y.getPositionInSequence=function(){return this.h},y.getTitle=function(){return""},y.getDescription=function(){return""},y.getVastMediaBitrate=function(){return 0},y.getVastMediaHeight=function(){return 0},y.getVastMediaWidth=function(){return 0},y.getVastAdId=function(){return""},y.getAdId=function(){return this.g.id||""},y.getCreativeAdId=function(){return""},y.getAdvertiserName=function(){return""},y.getMediaUrl=function(){return this.g.uri},y.getTimeOffset=function(){return 0},y.getPodIndex=function(){return 0},y.release=function(){},be("shaka.ads.InterstitialStaticAd",We),We.prototype.release=We.prototype.release,We.prototype.getPodIndex=We.prototype.getPodIndex,We.prototype.getTimeOffset=We.prototype.getTimeOffset,We.prototype.getMediaUrl=We.prototype.getMediaUrl,We.prototype.getAdvertiserName=We.prototype.getAdvertiserName,We.prototype.getCreativeAdId=We.prototype.getCreativeAdId,We.prototype.getAdId=We.prototype.getAdId,We.prototype.getVastAdId=We.prototype.getVastAdId,We.prototype.getVastMediaWidth=We.prototype.getVastMediaWidth,We.prototype.getVastMediaHeight=We.prototype.getVastMediaHeight,We.prototype.getVastMediaBitrate=We.prototype.getVastMediaBitrate,We.prototype.getDescription=We.prototype.getDescription,We.prototype.getTitle=We.prototype.getTitle,We.prototype.getPositionInSequence=We.prototype.getPositionInSequence,We.prototype.getSequenceLength=We.prototype.getSequenceLength,We.prototype.setMuted=We.prototype.setMuted,We.prototype.resize=We.prototype.resize,We.prototype.isLinear=We.prototype.isLinear,We.prototype.isMuted=We.prototype.isMuted,We.prototype.setVolume=We.prototype.setVolume,We.prototype.getVolume=We.prototype.getVolume,We.prototype.play=We.prototype.play,We.prototype.pause=We.prototype.pause,We.prototype.skip=We.prototype.skip,We.prototype.canSkipNow=We.prototype.canSkipNow,We.prototype.getTimeUntilSkippable=We.prototype.getTimeUntilSkippable,We.prototype.isSkippable=We.prototype.isSkippable,We.prototype.isPaused=We.prototype.isPaused,We.prototype.getRemainingTime=We.prototype.getRemainingTime,We.prototype.getMinSuggestedDuration=We.prototype.getMinSuggestedDuration,We.prototype.getDuration=We.prototype.getDuration,We.prototype.isUsingAnotherMediaElement=We.prototype.isUsingAnotherMediaElement,We.prototype.hasCustomClick=We.prototype.hasCustomClick,We.prototype.isClientRendering=We.prototype.isClientRendering,We.prototype.needsSkipUI=We.prototype.needsSkipUI;function f2(e,t,n,s){var u=this;this.M=null,this.B=e,this.C=t,this.g=n,this.G=null,this.A=!0,this.h=this.g,this.i=s,this.U=new Set,this.H=new Set,this.F=new Map,this.L=new Map,this.j=new ye,R0(this),this.I=new Ee,this.l=new Ee,this.K=!1,this.ha=this.o=this.s=this.m=null,this.ka=!1,this.P=-1,this.ba=function(){if(!u.K&&u.m&&!u.C.ua()){u.m=u.g.currentTime;var l=nu(u);l&&Lc(u,l,1,1,Date.now())}},this.W=function(){if(!(u.K||u.m||u.C.ua())){u.m=u.g.currentTime;var l=nu(u,!0);l||(l=nu(u)),l&&Lc(u,l,1,1,Date.now())}},this.na=function(){if(!u.K&&u.m&&!u.C.ua()){var l=u.g.currentTime;u.s&&!u.s.pre&&!u.s.post&&l<(u.s.endTime||u.s.startTime)&&(u.s=null)}},this.S=new ht(this.ba),this.N=new ht(function(){var l,d,p,g,v,T,b,M,_,L,O;return j(function(P){switch(P.g){case 1:if(!u.H.size||u.m==null){P.u(0);break}if(l=u.C.m,l==Ki||l==Ec)return P.return();d=!1,p=Array.from(u.H),g=u.C.Sa(),v=m(p),T=v.next();case 3:if(T.done){P.u(5);break}if(b=T.value,b==u.s){P.u(4);break}if(M=b.endTime||b.startTime,!(1<=g.start-M)){_=b.startTime-u.m,0<_&&10>=_&&(!u.F.has(b)&&d2(b)&&u.F.set(b,u.j.preload(b.uri,null,b.mimeType||void 0)),p2(u,b)),P.u(4);break}if(!u.F.has(b)){P.u(7);break}return D(P,u.F.get(b),8);case 8:(L=P.h)&&L.destroy(),u.F.delete(b);case 7:g2(u,b),O=JSON.stringify(b),u.U.has(O)&&u.U.delete(O),u.H.delete(b),E0(u),b.overlay||(d=!0);case 4:T=v.next(),P.u(3);break;case 5:d&&Dc(u),ne(P)}})}),this.configure(this.C.getConfiguration().ads)}y=f2.prototype,y.configure=function(e){this.M=e,I0(this)};function yE(e){if(!e.ka&&e.H.size){if(e.I.D(e.g,"playing",e.W),e.I.D(e.g,"timeupdate",e.W),e.I.D(e.g,"seeked",e.na),e.I.D(e.g,"ended",e.ba),"requestVideoFrameCallback"in e.g&&!h2()){var t=e.g,n=function(){e.P!=-1&&(e.ba(),e.P!=-1&&(e.P=t.requestVideoFrameCallback(n)))};e.P=t.requestVideoFrameCallback(n)}else e.S.Fa(.025);e.N&&e.N.Fa(1),e.ka=!0}}function E0(e){e.ka&&!e.H.size&&(e.I.Ja(e.g,"playing",e.W),e.I.Ja(e.g,"timeupdate",e.W),e.I.Ja(e.g,"seeked",e.na),e.I.Ja(e.g,"ended",e.ba),e.P!=-1&&(e.g.cancelVideoFrameCallback(e.P),e.P=-1),e.S&&e.S.stop(),e.N&&e.N.stop(),e.ka=!1)}function I0(e){if(e.B&&e.M&&!e.K){var t=e.M.supportsMultipleMediaElements,n=e.g;n.webkitPresentationMode&&n.webkitPresentationMode!=="inline"&&(t=!1),e.A==t&&(e.A=!t,e.A?(e.h=e.g,e.G&&(e.G.parentElement&&e.B.removeChild(e.G),e.G=null)):(e.G||(t=document.createElement(e.g.tagName),t.autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.G=t),e.h=e.G))}else e.A=!0}y.stop=function(){if(this.l&&this.l.Ra(),this.U.clear(),this.H.clear(),this.j.ng(),this.F.size){var e=Array.from(this.F.values());e=m(e);for(var t=e.next();!t.done;t=e.next())(t=t.value)&&t.then(function(n){n&&n.destroy()})}if(this.F.clear(),this.L.size)for(e=Array.from(this.L.keys()),e=m(e),t=e.next();!t.done;t=e.next())g2(this,t.value);this.L.clear(),this.j.detach(),this.K=!1,this.s=this.m=null,this.A=!0,this.h=this.g,this.G=null,M0(this),E0(this),this.B&&Ea(this.B),this.o&&(this.o.stop(),this.o=null)},y.release=function(){this.stop(),this.I&&this.I.release(),this.l&&this.l.release(),this.S&&(this.S.stop(),this.S=null),this.N&&(this.N.stop(),this.N=null),this.j.destroy()},y.od=function(){return this.j};function vE(e,t){var n;j(function(s){if(s.g==1)return R0(e),D(s,TE(e,t),2);n=s.h,n.length?Ga(e,n):ft("Unsupported HLS interstitial",t),ne(s)})}function xE(e,t){var n=Yt(t.eventNode,"OverlayEvent"),s=n.attributes.uri,u=n.attributes.mimeType,l=n.attributes.loop=="true",d=Qe(n,"z",Cn);if(s&&d!=0){var p=null,g=Yt(n,"Background");if(g){var v=g.attributes.uri;v?p="center / contain no-repeat url('"+v+"')":p=si(g)}g=1920,v=1080;var T=Yt(n,"Viewport");if(T&&(g=Qe(T,"x",Cn),g==null||(v=Qe(T,"y",Cn),v==null)))return;var b={viewport:{x:g,y:v},topLeft:{x:0,y:0},size:{x:g,y:v}},M=Yt(n,"Overlay");if(T&&M){var _=Yt(M,"TopLeft"),L=Yt(M,"Size");if(_&&L){if(M=Qe(_,"x",Cn),M==null||(_=Qe(_,"y",Cn),_==null))return;var O=Qe(L,"x",Cn);if(O==null||(L=Qe(L,"y",Cn),L==null))return;b.topLeft.x=M,b.topLeft.y=_,b.size.x=O,b.size.y=L}}if(M=null,n=Yt(n,"Squeeze"),T&&n&&(L=Yt(n,"TopLeft"),n=Yt(n,"Size"),L&&n)){if(T=Qe(L,"x",Cn),T==null||(M=Qe(L,"y",Cn),M==null)||(L=Qe(n,"x",Cn),L==null)||(n=Qe(n,"y",Cn),n==null))return;M={viewport:{x:g,y:v},topLeft:{x:T,y:M},size:{x:L,y:n}}}Ga(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:s,mimeType:u,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:l,overlay:b,displayOnBackground:d==-1,currentVideo:M,background:p}])}}y.addAdUrlInterstitial=function(e){var t=this,n,s,u,l,d,p,g,v,T;return j(function(b){if(b.g==1)return n={type:12},D(b,_0(t,e,n),2);if(b.g!=3){if(s=b.h,u=ra(s,"VAST,vmap:VMAP"),!u)throw new q(2,10,10007);if(l=[],u.tagName=="VAST")return l=u2(u,t.m),b.u(3);if(u.tagName!="vmap:VMAP")return b.u(3);for(d=function(M){var _,L;return j(function(O){if(O.g==1)return D(O,_0(t,M.uri,n),2);if(_=O.h,L=ra(_,"VAST"),!L)throw new q(2,10,10007);l.push.apply(l,S(u2(L,M.time))),ne(O)})},p=[],g=m(pE(u)),v=g.next();!v.done;v=g.next())T=v.value,p.push(d(T));return p.length?D(b,Promise.all(p),3):b.u(3)}Ga(t,l),ne(b)})};function Ga(e,t){var n,s,u,l,d,p,g,v;j(function(T){switch(T.g){case 1:n=!1,s=m(t),u=s.next();case 2:if(u.done){T.u(4);break}if(l=u.value,!l.uri){ft("Missing URL in interstitial",l),T.u(3);break}if(l.mimeType){T.u(5);break}return le(T,6),d=e.j.Ob(),D(T,qo(l.uri,d,e.C.getConfiguration().streaming.retryParameters),8);case 8:l.mimeType=T.h,V(T,5);break;case 6:re(T);case 5:if(p=l.id||JSON.stringify(l),e.U.has(p)){T.u(3);break}l.loop&&!l.overlay&&ft("Loop is only supported in overlay interstitials",l),l.overlay||(n=!0),e.U.add(p),e.H.add(l),g=!1,l.pre&&e.m==null?g=!0:l.startTime!=0||l.canJump?e.m!=null&&(v=l.startTime-e.m,0<v&&10>=v&&(g=!0)):g=!0,g&&(!e.F.has(l)&&d2(l)&&e.F.set(l,e.j.preload(l.uri,null,l.mimeType||void 0)),p2(e,l));case 3:u=s.next(),T.u(2);break;case 4:n&&Dc(e),yE(e),ne(T)}})}function nu(e,t,n){t=t===void 0?!1:t,n=n===void 0?null:n;var s=0,u=null;if(e.H.size&&e.m!=null){var l=e.g.ended,d=Array.from(e.H).sort(function(b,M){return M.startTime-b.startTime}),p=d;for(p=t?d.filter(function(b){return b.pre}):l?d.filter(function(b){return b.post}):d.filter(function(b){return!b.pre&&!b.post}),d=m(p),p=d.next();!p.done;p=d.next()){p=p.value;var g=!1;if(t)g=p.pre;else if(l)g=p.post;else if(!p.pre&&!p.post){var v=e.m-Math.round(1e3*p.startTime)/1e3,T=1;e.M.allowStartInMiddleOfInterstitial&&p.endTime&&p.endTime!=1/0&&(T=p.endTime-p.startTime),(0<v||v==0&&e.m==0)&&(v<=T||!p.canJump)&&(g=!(n==null&&e.s&&!e.s.pre&&!e.s.post&&e.s.startTime>=p.startTime))}g&&(!e.s||p.startTime>=e.s.startTime)&&(s==(n||0)?u=p:u&&!p.canJump&&.001<Math.round(1e3*p.startTime)/1e3-Math.round(1e3*u.startTime)/1e3&&(u=p,s=0),s++)}}return u}function Lc(e,t,n,s,u,l){l=l===void 0?0:l,e.s=t,I0(e),e.A||!e.B||e.h.parentElement||e.B.appendChild(e.h),s==1&&n==1&&(n=Array.from(e.H).filter(function(d){return t.pre?d.pre==t.pre:t.post?d.post==t.post:.001>Math.abs(d.startTime-t.startTime)}).length),t.once&&(l++,e.H.delete(t),E0(e),t.overlay||Dc(e)),t.mimeType&&(t.mimeType.startsWith("image/")||t.mimeType==="text/html")?t.overlay?wE(e,t,n,s,l):ft("Unsupported interstitial",t):e.A&&t.overlay?ft("Unsupported interstitial",t):SE(e,t,n,s,u,l)}function wE(e,t,n,s,u){function l(){e.o&&(e.o.stop(),e.o=null),e.B.removeChild(g),M0(e,t),e.i(new Ie("ad-stopped")),e.l.Ra();var M=nu(e,t.pre,s-u);M?Lc(e,M,n,++s,Date.now(),u):e.K=!1}e.K=!0;var d=t.overlay,p=t.mimeType=="text/html"?"iframe":"img",g=document.createElement(p);g.style.objectFit="contain",g.style.position="absolute",g.style.border="none",c2(e,t),e.i(new Ie("ad-started",new Map().set("ad",new We(t,n,s)))),p=="iframe"?g.src=t.uri:(g.src=t.uri,g.onerror=function(M){e.i(new Ie("ad-error",new Map().set("originalEvent",M))),l()});var v=d.viewport,T=d.topLeft;d=d.size,v.x==0&&v.y==0?(g.width=t.overlay.size.x,g.height=t.overlay.size.y,g.style.bottom="10%",g.style.left="0",g.style.right="0",g.style.width="100%",t.overlay.size.y||p!="iframe"||(g.style.height="auto")):(g.style.height=d.y/v.y*100+"%",g.style.left=T.x/v.x*100+"%",g.style.top=T.y/v.y*100+"%",g.style.width=d.x/v.x*100+"%"),e.B.appendChild(g);var b=Date.now();e.o&&e.o.stop(),e.o=new ht(function(){t.playoutLimit&&(Date.now()-b)/1e3>t.playoutLimit?(e.i(new Ie("ad-complete")),l()):t.endTime&&e.g.currentTime>t.endTime?(e.i(new Ie("ad-complete")),l()):e.g.currentTime<t.startTime&&(e.i(new Ie("ad-skipped")),l())}),t.playoutLimit&&!t.endTime?e.o.ia(t.playoutLimit):t.endTime&&e.o.Fa(.025),e.l.D(e.g,"seeked",function(){var M=e.g.currentTime;(M<t.startTime||t.endTime&&M>t.endTime)&&(e.o&&e.o.stop(),e.i(new Ie("ad-skipped")),l())})}function SE(e,t,n,s,u,l){var d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q;j(function(ie){switch(ie.g){case 1:if(d=Date.now(),e.K=!0,p=!1,g=function(){if(!e.A&&!t.overlay&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.g.currentTime!=t.endTime&&(e.g.currentTime=t.endTime);else{var te=Date.now();e.g.currentTime+=(te-u)/1e3,u=te}},v=function(te){var Z,ve;return j(function(de){if(de.g==1){if(g(),Z=nu(e,t.pre,s-l),te&&t.groupId)for(;Z&&Z.groupId==t.groupId;)s++,Z=nu(e,t.pre,s-l);return e.o&&(!t.groupId||Z&&Z.groupId!=t.groupId)&&(e.o.stop(),e.o=null),M0(e,t),Z&&!Z.overlay?de.u(2):(t.post&&(e.m=null,e.s=null),e.A?D(de,e.j.detach(),4):D(de,e.j.vc(),4))}de.g!=2&&(e.A&&(ve=t.resumeOffset,ve==null&&(ve=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.m||0):(Date.now()-u)/1e3),e.i(new Ie("ad-content-resume-requested",new Map().set("offset",ve)))),e.i(new Ie("ad-stopped")),e.l.Ra(),e.K=!1,e.A?Dc(e):(e.h.style.display="none",g(),e.g.ended||e.g.play())),I0(e),Z&&(e.i(new Ie("ad-stopped")),e.l.Ra(),Lc(e,Z,n,++s,u,l)),ne(de)})},T=function(te){return j(function(Z){return p?Z.return():(p=!0,e.i(new Ie("ad-error",new Map().set("originalEvent",te))),D(Z,v(!1),0))})},b=function(){return j(function(te){if(te.g==1)return p?te.return():(p=!0,D(te,v(!1),2));e.i(new Ie("ad-complete")),ne(te)})},e.ha=function(){return j(function(te){return p?te.return():(p=!0,e.i(new Ie("ad-skipped")),D(te,v(!0),0))})},M=new Xe(e.h,t,e.ha,n,s,!e.A),e.A||(M.setMuted(e.g.muted),M.setVolume(e.g.volume)),e.i(new Ie("ad-started",new Map().set("ad",M))),(_=M.canSkipNow())&&e.i(new Ie("ad-skip-state-changed")),e.l.Aa(e.j,"error",T),e.l.D(e.h,"timeupdate",function(){if(e.h.duration){var te=M.canSkipNow();_!=te&&0<M.getRemainingTime()&&0<M.getDuration()&&e.i(new Ie("ad-skip-state-changed")),_=te}}),e.l.Aa(e.j,"firstquartile",function(){g(),e.i(new Ie("ad-first-quartile"))}),e.l.Aa(e.j,"midpoint",function(){g(),e.i(new Ie("ad-midpoint"))}),e.l.Aa(e.j,"thirdquartile",function(){g(),e.i(new Ie("ad-third-quartile"))}),e.l.Aa(e.j,"complete",b),e.l.D(e.h,"play",function(){e.i(new Ie("ad-resumed"))}),e.l.D(e.h,"pause",function(){var te=e.j.getConfiguration();e.h.currentTime>=te.playRangeEnd?b():e.i(new Ie("ad-paused"))}),e.l.D(e.h,"volumechange",function(){e.h.muted?e.i(new Ie("ad-muted")):e.i(new Ie("ad-volume-changed"))}),!e.A||s!=1){ie.u(2);break}return e.i(new Ie("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),L=new _t,O=function(te){return j(function(Z){if(Z.g==1)return te.state!="detach"?Z.u(0):h2()?D(Z,new Promise(function(ve){return new ht(ve).ia(.1)}),3):Z.u(3);L.resolve(),e.l.Ja(e.C,"onstatechange",O),ne(Z)})},e.l.D(e.C,"onstatechange",O),D(ie,L,2);case 2:return c2(e,t),e.A||(e.h.style.display="",t.overlay?(e.h.loop=t.loop,P=t.overlay.viewport,U=t.overlay.topLeft,B=t.overlay.size,e.h.style.height=B.y/P.y*100+"%",e.h.style.left=U.x/P.x*100+"%",e.h.style.top=U.y/P.y*100+"%",e.h.style.width=B.x/P.x*100+"%"):(e.g.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.g.currentTime+=t.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),le(ie,4),R0(e),t.startTime&&t.endTime&&t.endTime!=1/0&&t.startTime!=t.endTime&&($=t.endTime-t.startTime,0<$&&e.j.configure("playRangeEnd",$)),t.playoutLimit&&!e.o&&(e.o=new ht(function(){e.ha()}).ia(t.playoutLimit),e.j.configure("playRangeEnd",t.playoutLimit)),D(ie,e.j.fc(e.h),6);case 6:return W=null,e.M.allowStartInMiddleOfInterstitial&&e.m!=null&&(J=e.m-t.startTime,.25<Math.abs(J)&&(W=J)),e.F.has(t)?D(ie,e.F.get(t),10):D(ie,e.j.load(t.uri,W,t.mimeType||void 0),8);case 10:return G=ie.h,e.F.delete(t),G?D(ie,e.j.load(G),8):D(ie,e.j.load(t.uri,W,t.mimeType||void 0),8);case 8:e.h.play(),X=(Date.now()-d)/1e3,e.i(new Ie("ads-loaded",new Map().set("loadTime",X))),e.A&&e.g.play(),t.overlay&&(Y=function(){var te=e.g.currentTime-t.startTime;.1<Math.abs(te-e.h.currentTime)&&(e.h.currentTime=te)},e.l.Aa(e.h,"playing",Y),e.l.D(e.g,"seeking",Y),e.l.D(e.g,"seeked",function(){var te=e.g.currentTime;(te<t.startTime||t.endTime&&te>t.endTime)&&e.ha()})),V(ie,0);break;case 4:if(Q=re(ie),!e.K)return ie.return();T(Q),ne(ie)}})}function c2(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),t.currentVideo!=null){var n=t.currentVideo;e.g.style.transformOrigin="top left";var s=!0,u=[],l=n.topLeft.x/n.viewport.x*100;0<l&&100>=l&&(u.push("translateX("+l+"%)"),s=!1),l=n.topLeft.y/n.viewport.y*100,0<l&&100>=l&&(u.push("translateY("+l+"%)"),s=!1),l=n.size.x/n.viewport.x,1>l&&u.push("scaleX("+l+")"),n=n.size.y/n.viewport.y,1>l&&u.push("scaleY("+n+")"),u.length&&(e.g.style.transform=u.join(" ")),s&&(e.g.style.transition="transform 250ms")}e.B&&(e.B.style.pointerEvents="none",t.background&&(e.B.style.background=t.background)),e.G&&(e.G.style.background=t.overlay?"":"rgb(0, 0, 0)")}function M0(e,t){(!t||t.displayOnBackground)&&(e.g.style.zIndex=""),t&&t.currentVideo==null||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.B&&(e.B.style.pointerEvents="",!t||t.background)&&(e.B.style.background=""),e.G&&(e.G.style.background="")}function TE(e,t){var n,s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z,ve,de,ae,ge,Te,Ce,Pe,Re,yt,pt,At,ut,et,Et,at;return j(function(rt){switch(rt.g){case 1:if(n=[],!t||(s=t.values.find(function(dt){return dt.key=="X-ASSET-URI"}),u=t.values.find(function(dt){return dt.key=="X-ASSET-LIST"}),!s&&!u))return rt.return(n);if(l=null,(d=t.values.find(function(dt){return dt.key=="ID"}))&&(l=d.data),p=l==null?Math.floor(10*t.startTime)/10:t.startTime,(g=t.endTime)&&t.endTime!=1/0&&typeof t.endTime=="number"&&(g=l==null?Math.floor(10*t.endTime)/10:t.endTime),v=t.values.find(function(dt){return dt.key=="X-RESTRICT"}),b=T=!0,v&&v.data&&(M=v.data,T=!M.includes("SKIP"),b=!M.includes("JUMP")),_=T?0:null,(L=t.values.find(function(dt){return dt.key=="X-ENABLE-SKIP-AFTER"}))&&(O=L.data,_=parseFloat(O),isNaN(_)&&(_=T?0:null)),P=null,(U=t.values.find(function(dt){return dt.key=="X-ENABLE-SKIP-FOR"}))&&(B=U.data,P=parseFloat(B),isNaN(_)&&(P=null)),$=null,(W=t.values.find(function(dt){return dt.key=="X-RESUME-OFFSET"}))&&(J=W.data,$=parseFloat(J),isNaN($)&&($=null)),G=null,(X=t.values.find(function(dt){return dt.key=="X-PLAYOUT-LIMIT"}))&&(Y=X.data,G=parseFloat(Y),isNaN(G)&&(G=null)),te=ie=Q=!1,(Z=t.values.find(function(dt){return dt.key=="CUE"}))&&(ve=Z.data,Q=ve.includes("ONCE"),ie=ve.includes("PRE"),te=ve.includes("POST")),de=!1,(ae=t.values.find(function(dt){return dt.key=="X-TIMELINE-OCCUPIES"}))?(ge=ae.data,de=ge.includes("RANGE")):!W&&e.C.V()&&(de=!ie&&!te),s){if(Te=s.data,!Te)return rt.return(n);n.push({id:l,groupId:null,startTime:p,endTime:g,uri:Te,mimeType:null,isSkippable:T,skipOffset:_,skipFor:P,canJump:b,resumeOffset:$,playoutLimit:G,once:Q,pre:ie,post:te,timelineRange:de,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}),rt.u(2);break}if(!u){rt.u(2);break}return Ce=u.data,Ce?(le(rt,4),Pe={type:11},D(rt,_0(e,Ce,Pe),6)):rt.return(n);case 6:for(Re=rt.h,yt=Ht(Re),pt=JSON.parse(yt),(At=pt["SKIP-CONTROL"])&&(ut=At["ENABLE-SKIP-AFTER"],typeof ut=="number"&&(_=parseFloat(ut),isNaN(ut)&&(_=T?0:null)),et=At["ENABLE-SKIP-FOR"],typeof et=="number"&&(P=parseFloat(et),isNaN(et)&&(P=null))),Et=0;Et<pt.ASSETS.length;Et++)at=pt.ASSETS[Et],at.URI&&n.push({id:l+"_shaka_asset_"+Et,groupId:l,startTime:p,endTime:g,uri:at.URI,mimeType:null,isSkippable:T,skipOffset:_,skipFor:P,canJump:b,resumeOffset:$,playoutLimit:G,once:Q,pre:ie,post:te,timelineRange:de,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});V(rt,2);break;case 4:re(rt);case 2:return rt.return(n)}})}function Dc(e){for(var t=[],n=m(e.H),s=n.next(),u={};!s.done;u={uc:void 0},s=n.next())s=s.value,s.overlay||(u.uc={start:s.startTime,end:null},s.pre?(u.uc.start=0,u.uc.end=null):s.post?(u.uc.start=-1,u.uc.end=null):s.timelineRange&&(u.uc.end=s.endTime),t.find(function(l){return function(d){return l.uc.start==d.start&&l.uc.end==d.end}}(u))||t.push(u.uc));e.i(new Ie("ad-cue-points-changed",new Map().set("cuepoints",t)))}function R0(e){e.j.configure(e.C.Zh()),e.j.configure("ads.disableHLSInterstitial",!0),e.j.configure("ads.disableDASHInterstitial",!0),e.j.configure("playRangeEnd",1/0),_1(e.C.Ob(),e.j.Ob())}function _0(e,t,n){var s,u,l;return j(function(d){return d.g==1?(s=fn([t],nr()),u=e.C.Ob().request(7,s,n),D(d,u.promise,2)):(l=d.h,d.return(l.data))})}function d2(e){return(e=e.mimeType)?!e.startsWith("image/")&&e!=="text/html":!0}function h2(){var e=Be().La();return e=="TV"||e=="CONSOLE"||e=="CAST"}function p2(e,t){if(!(e.L.has(t)||e.M&&!e.M.allowPreloadOnDomElements)){var n=function(l){var d=document.createElement("link");return d.rel="preload",d.href=l,d.as="image",document.head.appendChild(d),d},s=[];if(t.background){var u=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);u&&s.push(n(u[2]))}t.mimeType.startsWith("image/")&&s.push(n(t.uri)),e.L.set(t,s)}}function g2(e,t){if(e.L.has(t)){var n=e.L.get(t);n=m(n);for(var s=n.next();!s.done;s=n.next())s=s.value,s.parentNode.removeChild(s);e.L.delete(t)}}function Ve(e,t,n,s,u){this.h=e,this.j=Ts(this.h.skipOffset),this.g=u,this.i=t,this.l=n,this.o=s,this.m=!1}y=Ve.prototype,y.needsSkipUI=function(){return!0},y.isClientRendering=function(){return!1},y.hasCustomClick=function(){return!1},y.isUsingAnotherMediaElement=function(){return!1},y.getDuration=function(){return this.h.durationInSeconds},y.getMinSuggestedDuration=function(){return this.getDuration()},y.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},y.isPaused=function(){return this.g.paused},y.isSkippable=function(){return typeof this.j=="number"},y.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},y.canSkipNow=function(){return this.getTimeUntilSkippable()==0},y.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},y.pause=function(){return this.g.pause()},y.play=function(){return this.g.play()},y.getVolume=function(){return this.g.volume},y.setVolume=function(e){this.g.volume=e},y.isMuted=function(){return this.g.muted},y.isLinear=function(){return this.o},y.resize=function(){},y.setMuted=function(e){this.g.muted=e},y.getSequenceLength=function(){return this.l?this.l:1},y.getPositionInSequence=function(){return this.i?this.i:1},y.getTitle=function(){return this.h.adTitle},y.getDescription=function(){return""},y.getVastMediaBitrate=function(){return 0},y.getVastMediaHeight=function(){return 0},y.getVastMediaWidth=function(){return 0},y.getVastAdId=function(){return this.h.vastAdId||""},y.getAdId=function(){return this.h.adId},y.getCreativeAdId=function(){return this.h.creativeId},y.getAdvertiserName=function(){return""},y.getMediaUrl=function(){return null},y.getTimeOffset=function(){return 0},y.getPodIndex=function(){return 0},y.release=function(){this.l=this.i=this.g=this.h=null},be("shaka.ads.MediaTailorAd",Ve),Ve.prototype.release=Ve.prototype.release,Ve.prototype.getPodIndex=Ve.prototype.getPodIndex,Ve.prototype.getTimeOffset=Ve.prototype.getTimeOffset,Ve.prototype.getMediaUrl=Ve.prototype.getMediaUrl,Ve.prototype.getAdvertiserName=Ve.prototype.getAdvertiserName,Ve.prototype.getCreativeAdId=Ve.prototype.getCreativeAdId,Ve.prototype.getAdId=Ve.prototype.getAdId,Ve.prototype.getVastAdId=Ve.prototype.getVastAdId,Ve.prototype.getVastMediaWidth=Ve.prototype.getVastMediaWidth,Ve.prototype.getVastMediaHeight=Ve.prototype.getVastMediaHeight,Ve.prototype.getVastMediaBitrate=Ve.prototype.getVastMediaBitrate,Ve.prototype.getDescription=Ve.prototype.getDescription,Ve.prototype.getTitle=Ve.prototype.getTitle,Ve.prototype.getPositionInSequence=Ve.prototype.getPositionInSequence,Ve.prototype.getSequenceLength=Ve.prototype.getSequenceLength,Ve.prototype.setMuted=Ve.prototype.setMuted,Ve.prototype.resize=Ve.prototype.resize,Ve.prototype.isLinear=Ve.prototype.isLinear,Ve.prototype.isMuted=Ve.prototype.isMuted,Ve.prototype.setVolume=Ve.prototype.setVolume,Ve.prototype.getVolume=Ve.prototype.getVolume,Ve.prototype.play=Ve.prototype.play,Ve.prototype.pause=Ve.prototype.pause,Ve.prototype.skip=Ve.prototype.skip,Ve.prototype.canSkipNow=Ve.prototype.canSkipNow,Ve.prototype.getTimeUntilSkippable=Ve.prototype.getTimeUntilSkippable,Ve.prototype.isSkippable=Ve.prototype.isSkippable,Ve.prototype.isPaused=Ve.prototype.isPaused,Ve.prototype.getRemainingTime=Ve.prototype.getRemainingTime,Ve.prototype.getMinSuggestedDuration=Ve.prototype.getMinSuggestedDuration,Ve.prototype.getDuration=Ve.prototype.getDuration,Ve.prototype.isUsingAnotherMediaElement=Ve.prototype.isUsingAnotherMediaElement,Ve.prototype.hasCustomClick=Ve.prototype.hasCustomClick,Ve.prototype.isClientRendering=Ve.prototype.isClientRendering,Ve.prototype.needsSkipUI=Ve.prototype.needsSkipUI;function Xa(e,t,n,s){this.B=e,this.K=t,this.h=n,this.l=null,this.P=NaN,this.i=s,this.I=!1,this.A=null,this.j=[],this.M=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.N=!0,this.H="",this.o=new Ee}Xa.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ja(t.target,t.type,t.listener);iu(this),this.m=[],this.s=[],this.G="",this.N=!0,this.H="",this.A=null,this.j=[],this.M=[],this.F.clear()},Xa.prototype.release=function(){this.stop(),this.o&&this.o.release()},Xa.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(bE(this,this.G,this.N),this.N=!1)},Xa.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var s=n.next();!s.done;s=n.next())s=s.value,e.push({start:s.startTimeInSeconds,end:s.startTimeInSeconds+s.durationInSeconds})}return e};function CE(e,t,n){var s,u,l,d,p,g,v,T,b,M,_,L;j(function(O){if(O.g==1)return s={type:7},u=fn([t],nr()),u.method="POST",n&&(l=JSON.stringify(n),u.body=zi(l)),d=e.K.request(7,u,s),le(O,2),D(O,d.promise,4);if(O.g!=2){if(p=O.h,g=Ht(p.data),v=JSON.parse(g),v.manifestUrl&&v.trackingUrl)T=new en(t),b=new en(v.trackingUrl),e.G=T.resolve(b).toString(),M=Date.now()/1e3,_=M-e.P,e.i(new Ie("ads-loaded",new Map().set("loadTime",_))),L=new en(v.manifestUrl),e.l.resolve(T.resolve(L).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return V(O,0)}if(re(O),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,O.return();e.l.resolve(e.H),e.l=null,ne(O)})}function bE(e,t,n){var s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B;j(function($){if($.g==1)return s={type:8},u=fn([t],nr()),l=e.K.request(7,u,s),le($,2),D($,l.promise,4);if($.g!=2){if(d=$.h,p=[],g=Ht(d.data),v=JSON.parse(g),0<v.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(v.avails)){for(e.j=v.avails,T=m(e.j),b=T.next();!b.done;b=T.next())for(M=b.value,_=m(M.nonLinearAdsList),L=_.next();!L.done;L=_.next())for(O=L.value,P=m(O.nonLinearAdList),U=P.next();!U.done;U=P.next())B=U.value,kE(e,B);p=e.getCuePoints(),e.i(new Ie("ad-cue-points-changed",new Map().set("cuepoints",p)))}}else e.j.length&&e.i(new Ie("ad-cue-points-changed",new Map().set("cuepoints",p))),iu(e),e.j=[];return n&&(e.I||0<p.length)&&AE(e),V($,0)}re($),ne($)})}function kE(e,t){var n,s,u,l,d,p,g,v;j(function(T){if(T.g==1)return!t.staticResource||(n=m2(t),e.F.get(n))?T.return():(s={type:9},u=fn([t.staticResource],nr()),l=e.K.request(7,u,s),le(T,2),e.F.set(n,[]),D(T,l.promise,4));if(T.g!=2)return d=T.h,p=Ht(d.data),g=JSON.parse(p),v=g.apps,e.F.set(n,v),V(T,0);re(T),e.F.delete(n),ne(T)})}function m2(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function AE(e){v2(e),e.I||(y2(e),e.o.D(e.h,"seeked",function(){y2(e)}),e.o.D(e.h,"ended",function(){iu(e)})),e.o.D(e.h,"timeupdate",function(){v2(e)})}function y2(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,s,u=m(e.j),l=u.next();!l.done;l=u.next()){l=l.value;for(var d=m(l.ads),p=d.next();!p.done;p=d.next())if(p=p.value,!s)p.startTimeInSeconds<t&&(s=p,n=l);else if(p.startTimeInSeconds<t&&p.startTimeInSeconds>s.startTimeInSeconds+s.durationInSeconds){s=p,n=l;break}}n&&s&&!e.M.includes(s.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function v2(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var s=e.C,u=s.startTimeInSeconds+.5*s.durationInSeconds,l=s.startTimeInSeconds+.75*s.durationInSeconds;t>=s.startTimeInSeconds+.25*s.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),Xn(e,"firstQuartile")):t>=u&&!e.s.includes("midpoint")?(e.s.push("midpoint"),Xn(e,"midpoint")):t>=l&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),Xn(e,"thirdQuartile")),s=e.g.getRemainingTime(),u=e.g.getDuration(),e.g.canSkipNow()&&0<s&&0<u&&Xn(e,"skipStateChanged"),0<u&&(0>=s||s>u)&&iu(e)}if(!e.g||!e.g.isLinear()){e:for(s=m(e.j),u=s.next();!u.done&&(u=u.value,!(e.g&&e.g.isLinear()));u=s.next())for(l=0;l<u.ads.length;l++){var d=u.ads[l],p=d.startTimeInSeconds+d.durationInSeconds;if(d.startTimeInSeconds<=t&&p>t){if(e.M.includes(d.adId)){if(e.h.ended)continue;e.h.currentTime=p;break e}iu(e),e.L=u,e.g=new Ve(d,l+1,u.ads.length,!0,e.h),e.C=d,l===0&&Xn(e,"breakStart"),x2(e);break}}if(!e.g){for(s=m(e.j),u=s.next();!u.done&&(u=u.value,!e.g);u=s.next())for(l=0;l<u.nonLinearAdsList.length;l++)if(d=u.nonLinearAdsList[l],d.nonLinearAdList.length){p=u.startTimeInSeconds;var g=e.F.get(m2(d.nonLinearAdList[0]));if(p<=t&&g&&g.length){iu(e),p=e,g=m(g);for(var v=g.next();!v.done;v=g.next())if(v=v.value,v.data.source.length){var T=document.createElement("img");T.src=v.data.source[0].url,T.style.top=(v.placeholder.top||0)+"%",T.style.height=100-(v.placeholder.top||0)+"%",T.style.left=(v.placeholder.left||0)+"%",T.style.maxWidth=100-(v.placeholder.left||0)+"%",T.style.objectFit="contain",T.style.position="absolute",p.B.appendChild(T)}e.L=u,e.g=new Ve(d,l+1,u.ads.length,!1,e.h),e.C=d,l===0&&Xn(e,"breakStart"),x2(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function iu(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.M.push(e.C.adId);var t=e.g.m;t!==void 0&&t?Xn(e,"skip"):Xn(e,"complete"),t=m(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.Ja(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&Xn(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function x2(e){var t=!1;e.h.paused?t=!0:(Xn(e,"impression"),Xn(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&Xn(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||Xn(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(Xn(e,"impression"),Xn(e,"start"),t=!1):Xn(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){Xn(e,"pause")}});for(var n=m(e.m),s=n.next();!s.done;s=n.next())s=s.value,e.o.D(s.target,s.type,s.listener)}function Xn(e,t){var n=e.C.trackingEvents.find(function(l){return l.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(l){return l.eventType==t})),n){var s={type:10};n=m(n.beaconUrls);for(var u=n.next();!u.done;u=n.next())(u=u.value)&&u!=""&&(u=fn([u],nr()),u.method="POST",e.K.request(7,u,s))}switch(t){case"impression":e.i(new Ie("ad-impression"));break;case"start":e.i(new Ie("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new Ie("ad-muted"));break;case"unmute":e.i(new Ie("ad-volume-changed"));break;case"resume":e.i(new Ie("ad-resumed"));break;case"pause":e.i(new Ie("ad-paused"));break;case"firstQuartile":e.i(new Ie("ad-first-quartile"));break;case"midpoint":e.i(new Ie("ad-midpoint"));break;case"thirdQuartile":e.i(new Ie("ad-third-quartile"));break;case"complete":e.i(new Ie("ad-complete")),e.i(new Ie("ad-stopped"));break;case"skip":e.i(new Ie("ad-skipped")),e.i(new Ie("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new Ie("ad-skip-state-changed"))}}function Ke(e,t){this.g=e,this.i=null,this.h=t}y=Ke.prototype,y.needsSkipUI=function(){return!0},y.isClientRendering=function(){return!1},y.hasCustomClick=function(){return!0},y.isUsingAnotherMediaElement=function(){return!1},y.getDuration=function(){return this.i?this.i.duration:-1},y.getMinSuggestedDuration=function(){return this.getDuration()},y.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},y.isPaused=function(){return this.h.paused},y.isSkippable=function(){return this.g.isSkippable()},y.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},y.canSkipNow=function(){return this.getTimeUntilSkippable()==0},y.skip=function(){this.h.currentTime+=this.getRemainingTime()},y.pause=function(){return this.h.pause()},y.play=function(){return this.h.play()},y.getVolume=function(){return this.h.volume},y.setVolume=function(e){this.h.volume=e},y.isMuted=function(){return this.h.muted},y.isLinear=function(){return!0},y.resize=function(){},y.setMuted=function(e){this.h.muted=e},y.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},y.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},y.getTitle=function(){return this.g.getTitle()},y.getDescription=function(){return this.g.getDescription()},y.getVastMediaBitrate=function(){return 0},y.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},y.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},y.getVastAdId=function(){return""},y.getAdId=function(){return this.g.getAdId()},y.getCreativeAdId=function(){return this.g.getCreativeAdId()},y.getAdvertiserName=function(){return this.g.getAdvertiserName()},y.getMediaUrl=function(){return null},y.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},y.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},y.release=function(){this.h=this.i=this.g=null},be("shaka.ads.ServerSideAd",Ke),Ke.prototype.release=Ke.prototype.release,Ke.prototype.getPodIndex=Ke.prototype.getPodIndex,Ke.prototype.getTimeOffset=Ke.prototype.getTimeOffset,Ke.prototype.getMediaUrl=Ke.prototype.getMediaUrl,Ke.prototype.getAdvertiserName=Ke.prototype.getAdvertiserName,Ke.prototype.getCreativeAdId=Ke.prototype.getCreativeAdId,Ke.prototype.getAdId=Ke.prototype.getAdId,Ke.prototype.getVastAdId=Ke.prototype.getVastAdId,Ke.prototype.getVastMediaWidth=Ke.prototype.getVastMediaWidth,Ke.prototype.getVastMediaHeight=Ke.prototype.getVastMediaHeight,Ke.prototype.getVastMediaBitrate=Ke.prototype.getVastMediaBitrate,Ke.prototype.getDescription=Ke.prototype.getDescription,Ke.prototype.getTitle=Ke.prototype.getTitle,Ke.prototype.getPositionInSequence=Ke.prototype.getPositionInSequence,Ke.prototype.getSequenceLength=Ke.prototype.getSequenceLength,Ke.prototype.setMuted=Ke.prototype.setMuted,Ke.prototype.resize=Ke.prototype.resize,Ke.prototype.isLinear=Ke.prototype.isLinear,Ke.prototype.isMuted=Ke.prototype.isMuted,Ke.prototype.setVolume=Ke.prototype.setVolume,Ke.prototype.getVolume=Ke.prototype.getVolume,Ke.prototype.play=Ke.prototype.play,Ke.prototype.pause=Ke.prototype.pause,Ke.prototype.skip=Ke.prototype.skip,Ke.prototype.canSkipNow=Ke.prototype.canSkipNow,Ke.prototype.getTimeUntilSkippable=Ke.prototype.getTimeUntilSkippable,Ke.prototype.isSkippable=Ke.prototype.isSkippable,Ke.prototype.isPaused=Ke.prototype.isPaused,Ke.prototype.getRemainingTime=Ke.prototype.getRemainingTime,Ke.prototype.getMinSuggestedDuration=Ke.prototype.getMinSuggestedDuration,Ke.prototype.getDuration=Ke.prototype.getDuration,Ke.prototype.isUsingAnotherMediaElement=Ke.prototype.isUsingAnotherMediaElement,Ke.prototype.hasCustomClick=Ke.prototype.hasCustomClick,Ke.prototype.isClientRendering=Ke.prototype.isClientRendering,Ke.prototype.needsSkipUI=Ke.prototype.needsSkipUI;function w2(e,t,n,s){var u=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=s,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Ee,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new Ie("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(l){EE(u,l)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){u.B.length?u.j.resolve(u.B):u.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),u.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(l){l=l.getAd(),u.m=new Ke(l,u.l),u.A&&(u.m.i=u.A),u.i(new Ie("ad-started",new Map().set("ad",u.m))),u.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){u.s.removeAttribute("ad-active");var l=u.l.currentTime;u.o&&u.o>l&&(u.l.currentTime=u.o,u.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(l){u.A=l.getStreamData().adProgressData,u.m&&(u.m.i=u.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){u.i(new Ie("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){u.i(new Ie("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){u.i(new Ie("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){u.i(new Ie("ad-complete")),u.i(new Ie("ad-stopped")),u.s.removeAttribute("ad-active"),u.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){u.i(new Ie("ad-skipped")),u.i(new Ie("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(l){var d=l.getStreamData();l=[],d=m(d.cuepoints);for(var p=d.next();!p.done;p=d.next())p=p.value,l.push({start:p.start,end:p.end});u.C=l,u.i(new Ie("ad-cue-points-changed",new Map().set("cuepoints",l)))})}y=w2.prototype,y.configure=function(){},y.stop=function(){this.B="",this.o=null,this.C=[]},y.release=function(){this.stop(),this.h&&this.h.release()},y.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},y.getCuePoints=function(){return this.C};function EE(e,t){e.i(new Ie("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var s=e.g.previousCuePointForStreamTime(n);s&&!s.played&&(e.o=n,e.l.currentTime=s.start)}})}function Le(){Ct.call(this),this.h=this.i=this.j=this.g=null,this.m=new s2,this.o=navigator.language,this.l=null}ue(Le,Ct),y=Le.prototype,y.setLocale=function(e){this.o=e},y.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},y.initInterstitial=function(e,t,n){var s=this;this.g&&this.g.release(),this.g=new f2(e,t,n,function(u){return Pc(s,u)}),this.g.configure(this.l)},y.initClientSide=function(e,t,n){var s=this;if(!f.google||!google.ima||!google.ima.AdsLoader)throw new q(2,10,1e4);this.j&&this.j.release(),this.j=new Rc(e,t,this.o,n,function(u){return Pc(s,u)}),this.j.configure(this.l)},y.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),Ct.prototype.release.call(this)},y.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new Ie("ad-stopped")),this.dispatchEvent(new Ie("ad-content-attach-requested")),this.m=new s2},y.requestClientSideAds=function(e){if(!this.j)throw new q(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},y.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new q(1,10,10001);var t=this.j;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},y.initMediaTailor=function(e,t,n){var s=this;this.i&&this.i.release(),this.i=new Xa(e,t,n,function(u){return Pc(s,u)})},y.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new q(1,10,10005);var s=this.i;return n=n===void 0?"":n,s.l?e=Promise.reject(new q(1,10,10004)):(s.l=new _t,CE(s,e,t),s.H=n||"",s.P=Date.now()/1e3,e=s.l),e},y.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new q(1,10,10005);var t=this.i;t.G=e,t.i(new Ie("ads-loaded",new Map().set("loadTime",0)))},y.initServerSide=function(e,t){var n=this;if(!f.google||!google.ima||!google.ima.dai)throw new q(2,10,10002);this.h&&this.h.release(),this.h=new w2(e,t,this.o,function(s){return Pc(n,s)}),this.h.configure(this.l)},y.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.h)throw new q(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&ft('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.15.9",n=this.h,n.j?e=Promise.reject(new q(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new _t,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},y.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new q(1,10,10003);(e.mpt||e.mpv)&&ft('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.15.9",this.h.g.replaceAdTagParameters(e)},y.getServerSideCuePoints=function(){return st("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},y.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},y.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:dE(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},y.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},y.onDashTimedMetadata=function(e){this.h&&e.schemeIdUri=="urn:google:dai:2018"&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},y.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},y.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},y.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&vE(this.g,n))},y.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var s=n.schemeIdUri;if(s=="urn:mpeg:dash:event:alternativeMPD:insert:2025"||s=="urn:mpeg:dash:event:alternativeMPD:replace:2025"){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:replace:2025",s=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:insert:2025",t||s)){for(var u=n.startTime,l=n.endTime,d=null,p=0,g,v=m(n.eventNode.children),T=v.next();!T.done;T=v.next())if(T=T.value,T.tagName=="AlternativeMPD"){if(T=T.attributes.uri){g=T;break}}else if(T.tagName=="InsertPresentation"||T.tagName=="ReplacePresentation"){var b=T.attributes.url;if(b){g=b,(v=Qe(T,"maxDuration",Cn))&&(d=v/n.timescale),(v=Qe(T,"returnOffset",Cn))&&(p=v/n.timescale),t&&p&&(l=u+p);break}}g&&Ga(e,[{id:n.id,groupId:null,startTime:u,endTime:l,uri:g,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:s?p:null,playoutLimit:d,once:!1,pre:!1,post:!1,timelineRange:t&&!s,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}])}}else(s=="urn:mpeg:dash:event:2012"||s=="urn:scte:dash:scte214-events")&&n.eventNode&&Yt(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&xE(this.g,n))}},y.addCustomInterstitial=function(e){if(!this.g)throw new q(1,10,10006);Ga(this.g,[e])},y.addAdUrlInterstitial=function(e){if(!this.g)throw new q(1,10,10006);return this.g.addAdUrlInterstitial(e)},y.getInterstitialPlayer=function(){if(!this.g)throw new q(1,10,10006);return this.g.od()};function Pc(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}be("shaka.ads.AdManager",Le),Le.prototype.getInterstitialPlayer=Le.prototype.getInterstitialPlayer,Le.prototype.addAdUrlInterstitial=Le.prototype.addAdUrlInterstitial,Le.prototype.addCustomInterstitial=Le.prototype.addCustomInterstitial,Le.prototype.onDASHInterstitialMetadata=Le.prototype.onDASHInterstitialMetadata,Le.prototype.onHLSInterstitialMetadata=Le.prototype.onHLSInterstitialMetadata,Le.prototype.onCueMetadataChange=Le.prototype.onCueMetadataChange,Le.prototype.onHlsTimedMetadata=Le.prototype.onHlsTimedMetadata,Le.prototype.onDashTimedMetadata=Le.prototype.onDashTimedMetadata,Le.prototype.onManifestUpdated=Le.prototype.onManifestUpdated,Le.prototype.getStats=Le.prototype.getStats,Le.prototype.getCuePoints=Le.prototype.getCuePoints,Le.prototype.getServerSideCuePoints=Le.prototype.getServerSideCuePoints,Le.prototype.replaceServerSideAdTagParameters=Le.prototype.replaceServerSideAdTagParameters,Le.prototype.requestServerSideStream=Le.prototype.requestServerSideStream,Le.prototype.initServerSide=Le.prototype.initServerSide,Le.prototype.addMediaTailorTrackingUrl=Le.prototype.addMediaTailorTrackingUrl,Le.prototype.requestMediaTailorStream=Le.prototype.requestMediaTailorStream,Le.prototype.initMediaTailor=Le.prototype.initMediaTailor,Le.prototype.updateClientSideAdsRenderingSettings=Le.prototype.updateClientSideAdsRenderingSettings,Le.prototype.requestClientSideAds=Le.prototype.requestClientSideAds,Le.prototype.onAssetUnload=Le.prototype.onAssetUnload,Le.prototype.release=Le.prototype.release,Le.prototype.initClientSide=Le.prototype.initClientSide,Le.prototype.initInterstitial=Le.prototype.initInterstitial,Le.prototype.configure=Le.prototype.configure,Le.prototype.setLocale=Le.prototype.setLocale,Le.ADS_LOADED="ads-loaded",Le.AD_STARTED="ad-started",Le.AD_FIRST_QUARTILE="ad-first-quartile",Le.AD_MIDPOINT="ad-midpoint",Le.AD_THIRD_QUARTILE="ad-third-quartile",Le.AD_COMPLETE="ad-complete",Le.AD_STOPPED="ad-stopped",Le.AD_SKIPPED="ad-skipped",Le.AD_VOLUME_CHANGED="ad-volume-changed",Le.AD_MUTED="ad-muted",Le.AD_PAUSED="ad-paused",Le.AD_RESUMED="ad-resumed",Le.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Le.CUEPOINTS_CHANGED="ad-cue-points-changed",Le.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Le.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Le.AD_CLICKED="ad-clicked",Le.AD_PROGRESS="ad-progress",Le.AD_BUFFERING="ad-buffering",Le.AD_IMPRESSION="ad-impression",Le.AD_DURATION_CHANGED="ad-duration-changed",Le.AD_CLOSED="ad-closed",Le.AD_LOADED="ad-loaded",Le.ALL_ADS_COMPLETED="all-ads-completed",Le.AD_LINEAR_CHANGED="ad-linear-changed",Le.AD_METADATA="ad-metadata",Le.AD_RECOVERABLE_ERROR="ad-recoverable-error",Le.AD_ERROR="ad-error",Le.AD_BREAK_READY="ad-break-ready",Le.AD_INTERACTION="ad-interaction",Le.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Le.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Le.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Ic=function(){return new Le};function S2(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof Ie){var s={};for(u in n)(t=n[u])&&typeof t=="object"?u=="detail"&&(s[u]=t):u in Event||(s[u]=t);return s}if(n instanceof Error){var u=new Set(["name","message","stack"]);for(s in n)u.add(s);for(s=m(Object.getOwnPropertyNames(n)),t=s.next();!t.done;t=s.next())u.add(t.value);for(s={},u=m(u),t=u.next();!t.done;t=u.next())t=t.value,s[t]=n[t];n={__type__:"Error",contents:s}}else if(n instanceof TimeRanges){for(u={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(Lr(n)),s=n.next();!s.done;s=n.next())s=s.value,t=s.end,u.start.push(s.start),u.end.push(t);n=u}else n=ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT===1?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function L0(e){return JSON.parse(e,function(t,n){if(n=="NaN")var s=NaN;else if(n=="-Infinity")s=-1/0;else if(n=="Infinity")s=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")s=IE(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")s=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(s in t)n[s]=t[s];s=n}else s=n;return s})}function IE(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var T2="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),ME="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),D0=["loop","playbackRate"],RE=["pause","play"],P0=new Map().set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1),O0=new Map().set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),C2=new Map().set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),b2=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],k2=[["isTextTrackVisible","setTextTrackVisibility"]],_E="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),LE="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function N0(e,t,n,s,u,l,d){var p=this;this.G=e,this.K=d,this.l=new ht(t),this.L=n,this.s=!1,this.A=s,this.F=u,this.M=l,this.i=this.m=!1,this.I="",this.o=null,this.B=function(){return U0(p)},this.C=function(g,v){switch(g=L0(v),g.type){case"event":var T=g.targetName,b=R1(g.event);p.A(T,b);break;case"update":T=g.update;for(b in T){g=p.g[b]||{};for(var M in T[b])g[M]=T[b][M]}p.s&&(p.L(),p.s=!1);break;case"asyncComplete":if(M=g.id,b=g.error,v=g.res,g=p.h.get(M),p.h.delete(M),g)if(b){M=new q(b.severity,b.category,b.code);for(T in b)M[T]=b[T];g.reject(M)}else g.resolve(v)}},this.g={video:{},player:{}},this.H=0,this.h=new Map,this.j=null,Ka.add(this)}y=N0.prototype,y.destroy=function(){return Ka.delete(this),B0(this),Yi&&E2(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.i=this.m=!1,this.C=this.B=this.j=this.h=this.g=this.o=null,Promise.resolve()},y.vb=function(){return this.i},y.Zg=function(){return this.I},y.init=function(){if(this.G.length)if(f.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Jb();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(Ka),s=n.next();!s.done;s=n.next()){s=s.value;var u=t;s.j=new _t,s.s=!0,Oc(s,u)}},function(t){for(var n=m(Ka),s=n.next();!s.done;s=n.next())s=s.value,Nc=t=="available",s.l.Jb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),Nc&&this.l.ia(PE),(e=Yi)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new _t,this.s=!0,Oc(this,e)):Yi=null}else f.__onGCastApiAvailable!==I2&&(Uc=f.__onGCastApiAvailable||null,f.__onGCastApiAvailable=I2)},y.kh=function(e){this.o=e,this.i&&Wa(this,{type:"appData",appData:this.o})},y.cast=function(){var e=this;return j(function(t){if(!e.m)throw new q(1,8,8e3);if(!Nc)throw new q(1,8,8001);if(e.i)throw new q(1,8,8002);return e.j=new _t,chrome.cast.requestSession(function(n){return Oc(e,n)},function(n){return A2(e,n)}),D(t,e.j,0)})};function DE(e){e.i&&chrome.cast.requestSession(function(t){return Oc(e,t)},function(t){return A2(e,t)})}y.md=function(){if(this.i){if(B0(this),Yi){E2(this);try{Yi.stop(function(){},function(){})}catch{}Yi=null}U0(this)}},y.get=function(e,t){var n=this;if(e=="video"){if(RE.includes(t))return function(){return n.zi.apply(n,[e,t].concat(S(lt.apply(0,arguments))))}}else if(e=="player"){if(C2.has(t)&&!this.get("player","isLive")())return function(){};if(_E.includes(t))return function(){return n.zi.apply(n,[e,t].concat(S(lt.apply(0,arguments))))};if(LE.includes(t))return function(){return n.Hk.apply(n,[e,t].concat(S(lt.apply(0,arguments))))};if(P0.has(t)||O0.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},y.set=function(e,t,n){this.g[e][t]=n,Wa(this,{type:"set",targetName:e,property:t,value:n})};function Oc(e,t){var n=e.M();Yi=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),U0(e),Wa(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function A2(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new q(2,8,n,t))}y.zi=function(e,t){Wa(this,{type:"call",targetName:e,methodName:t,args:lt.apply(2,arguments)})},y.Hk=function(e,t){var n=lt.apply(2,arguments),s=new _t,u=this.H.toString();this.H++,this.h.set(u,s);try{Wa(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:u})}catch(l){s.reject(l)}return s};function E2(e){var t=Yi;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function U0(e){var t=Yi?Yi.status=="connected":!1;if(e.i&&!t){e.F();for(var n in e.g)e.g[n]={};B0(e)}e.i=t,e.I=t?Yi.receiver.friendlyName:"",e.l.Jb()}function B0(e){if(e.h)for(var t=m(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var s=e.h.get(n);e.h.delete(n),s.reject(new q(1,7,7e3))}}function Wa(e,t){t=S2(t);var n=Yi;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},Yr)}catch(s){throw t=new q(2,8,8005,s),n=new Ie("error",new Map().set("detail",t)),e.A("player",n),e.md(),t}}var PE=.02,Nc=!1,Yi=null,Uc=null,Ka=new Set;function I2(e){if(Uc?f.__onGCastApiAvailable=Uc:delete f.__onGCastApiAvailable,Uc=null,e)for(var t=m(Ka),n=t.next();!n.done;n=t.next())n.value.init();typeof f.__onGCastApiAvailable=="function"&&f.__onGCastApiAvailable(e)}function ln(e,t,n,s){s=s===void 0?!1:s,Ct.call(this);var u=this;this.i=e,this.h=t,this.l=this.o=this.m=this.s=this.j=null,this.H=n,this.G=s,this.C=[],this.B=[],this.A=[],this.F=new Map,this.g=null,f.chrome?(this.g=new N0(n,function(){return _2(u)},function(){return L2(u)},function(l,d){return P2(u,l,d)},function(){return D2(u)},function(){return R2(u)},s),OE(this)):(this.j=this.i,this.s=this.h)}ue(ln,Ct),y=ln.prototype,y.destroy=function(e){return this.g&&(e!==void 0&&e)&&this.g.md(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.j=this.i=null,Ct.prototype.release.call(this),Promise.all(e)},y.Xj=function(){return this.j},y.od=function(){return this.s},y.hj=function(){return this.g?this.g.m&&Nc:!1},y.vb=function(){return this.g?this.g.vb():!1},y.Zg=function(){return this.g?this.g.Zg():""},y.cast=function(){var e=this;return j(function(t){return t.g==1?e.g?D(t,e.g.cast(),2):t.return():e.h?D(t,e.h.vc(),0):t.return()})},y.kh=function(e){this.g&&this.g.kh(e)},y.Wk=function(){this.g&&DE(this.g)},y.md=function(){this.g&&this.g.md()},y.ij=function(e,t){t=t===void 0?!1:t;var n=this;return j(function(s){if(s.g==1)return e==n.H&&t==n.G||(n.H=e,n.G=t,!n.g)?s.return():(n.g.md(),D(s,n.g.destroy(),2));n.g=null,n.g=new N0(e,function(){return _2(n)},function(){return L2(n)},function(u,l){return P2(n,u,l)},function(){return D2(n)},function(){return R2(n)},t),n.g.init(),ne(s)})};function OE(e){e.g.init(),e.l=new Ee;for(var t=m(T2),n=t.next();!n.done;n=t.next())e.l.D(e.i,n.value,function(l){e.g.vb()||(l=R1(l),e.m.dispatchEvent(l))});for(var s in Mf)e.l.D(e.h,Mf[s],function(l){e.g.vb()||e.o.dispatchEvent(l)});e.j={},t={};for(var u in e.i)t={Xd:t.Xd},t.Xd=u,Object.defineProperty(e.j,t.Xd,{configurable:!1,enumerable:!0,get:function(l){return function(){return UE(e,l.Xd)}}(t),set:function(l){return function(d){var p=l.Xd;e.g.vb()?e.g.set("video",p,d):e.i[p]=d}}(t)});e.s={},M2(e,function(l){Object.defineProperty(e.s,l,{configurable:!1,enumerable:!0,get:function(){return Bc(e,l)}})}),NE(e),e.m=new Ct,e.m.ze=e.j,e.o=new Ct,e.o.ze=e.s,e.l.D(e.h,"unloading",function(){e.g&&e.g.vb()||F0(e)})}function NE(e){var t=new Map;M2(e,function(n,s){t.has(s)?(s=t.get(s),n.length<s.length?e.F.set(n,s):e.F.set(s,n)):t.set(s,n)})}function M2(e,t){function n(g){return g=="constructor"||typeof s[g]!="function"?!1:!u.has(g)}var s=e.h,u=new Set,l;for(l in s)n(l)&&(u.add(l),t(l,s[l]));for(e=Object.getPrototypeOf(s),l=Object.getPrototypeOf({});e&&e!=l;){for(var d=m(Object.getOwnPropertyNames(e)),p=d.next();!p.done;p=d.next())p=p.value,n(p)&&(u.add(p),t(p,s[p]));e=Object.getPrototypeOf(e)}}function R2(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.nd(),startTime:null,addThumbnailsTrackCalls:e.C,addTextTrackAsyncCalls:e.B,addChaptersTrackCalls:e.A};e.i.pause();for(var n=m(D0),s=n.next();!s.done;s=n.next())s=s.value,t.video[s]=e.i[s];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(b2),s=n.next();!s.done;s=n.next()){var u=s.value;s=u[1],u=e.h[u[0]](),t.player[s]=u}for(n=m(k2),s=n.next();!s.done;s=n.next())u=s.value,s=u[1],u=e.h[u[0]](),t.playerAfterLoad[s]=u;return t}function _2(e){var t=new Ie("caststatuschanged");e.dispatchEvent(t)}function L2(e){var t=new Ie(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function D2(e){for(var t=m(b2),n=t.next();!n.done;n=t.next()){var s=n.value;n=s[1],s=e.g.get("player",s[0])(),e.h[n](s)}var u=e.C,l=e.B,d=e.A;F0(e);var p=e.g.get("player","getAssetUri")();s=e.g.get("video","ended"),t=Promise.resolve();var g=e.i.autoplay;n=null,s||(n=e.g.get("video","currentTime"));var v;(s=e.g.get("player","getTextTracks")())&&s.length&&(v=s.find(function(M){return M.active}));var T=e.g.get("player","isTextTrackVisible")();p&&(e.i.autoplay=!1,t=e.h.load(p,n));var b={};for(n=m(D0),s=n.next();!s.done;s=n.next())s=s.value,b[s]=e.g.get("video",s);t.then(function(){if(e.i){for(var M=m(u),_=M.next();!_.done;_=M.next()){_=_.value;var L;(L=e.od()).He.apply(L,S(_))}for(M=m(l),L=M.next();!L.done;L=M.next()){L=L.value;var O;(O=e.od()).Hd.apply(O,S(L))}for(O=m(d),M=O.next();!M.done;M=O.next()){M=M.value;var P;(P=e.od()).Ge.apply(P,S(M))}for(P=m(D0),O=P.next();!O.done;O=P.next())O=O.value,e.i[O]=b[O];for(P=m(k2),O=P.next();!O.done;O=P.next())M=O.value,O=M[1],M=e.g.get("player",M[0])(),e.h[O](M);e.h.oh(T),v&&e.h.ih(v.language,v.roles,v.forced),e.i.autoplay=g,p&&e.i.play()}},function(M){M=new Map().set("detail",M),M=new Ie("error",M),e.h.dispatchEvent(M)})}function UE(e,t){if(t=="addEventListener")return function(s,u,l){return e.m.addEventListener(s,u,l)};if(t=="removeEventListener")return function(s,u,l){return e.m.removeEventListener(s,u,l)};if(e.g.vb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.vb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function Bc(e,t,n){if(n=n===void 0?!1:n,e.F.has(t)&&(t=e.F.get(t)),t=="addEventListener")return function(s,u,l){return e.o.addEventListener(s,u,l)};if(t=="removeEventListener")return function(s,u,l){return e.o.removeEventListener(s,u,l)};if(t=="getMediaElement")return function(){return e.j};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Ob()};if(t=="getDrmEngine")return function(){return e.h.C};if(t=="getAdManager")return function(){return e.h.Uh()};if(t=="getQueueManager")return function(){return e.h.$h()};if(t=="setVideoContainer")return function(s){return e.h.Oi(s)};if(!n){if(t=="addThumbnailsTrack")return function(){var s=lt.apply(0,arguments);return e.C.push(s),Bc(e,t,!0).apply(null,S(s))};if(t=="addTextTrackAsync")return function(){var s=lt.apply(0,arguments);return e.B.push(s),Bc(e,t,!0).apply(null,S(s))};if(t=="addChaptersTrack")return function(){var s=lt.apply(0,arguments);return e.A.push(s),Bc(e,t,!0).apply(null,S(s))}}if(e.g.vb()){if(t=="getManifest"||t=="drmInfo")return function(){return ft(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return ft(t+"() does not work while casting!"),Promise.resolve()};if(t=="getChapters")return function(){return ft(t+"() does not work while casting!"),[]}}return e.g.vb()&&Object.keys(e.g.g.video).length==0&&(P0.has(t)||O0.has(t))||!e.g.vb()?e.h[t].bind(e.h):e.g.get("player",t)}function P2(e,t,n){e.g.vb()&&(t=="video"?e.m.dispatchEvent(n):t=="player"&&(n.type=="unloading"&&F0(e),e.o.dispatchEvent(n)))}function F0(e){e.C=[],e.B=[],e.A=[]}be("shaka.cast.CastProxy",ln),ln.prototype.changeReceiverId=ln.prototype.ij,ln.prototype.forceDisconnect=ln.prototype.md,ln.prototype.suggestDisconnect=ln.prototype.Wk,ln.prototype.setAppData=ln.prototype.kh,ln.prototype.cast=ln.prototype.cast,ln.prototype.receiverName=ln.prototype.Zg,ln.prototype.isCasting=ln.prototype.vb,ln.prototype.canCast=ln.prototype.hj,ln.prototype.getPlayer=ln.prototype.od,ln.prototype.getVideo=ln.prototype.Xj,ln.prototype.destroy=ln.prototype.destroy;function Ln(e,t,n,s){Ct.call(this);var u=this;this.h=e,this.g=t,this.j=new Ee,this.H={video:e,player:t},this.F=n||function(){},this.I=s||function(l){return l},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new ht(function(){j0(u)}),BE(this)}ue(Ln,Ct),y=Ln.prototype,y.isConnected=function(){return this.G},y.ek=function(){return this.o},y.Tk=function(e){this.i=e},y.mj=function(){this.i=null},y.Uk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},y.Sk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},y.Rk=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},y.destroy=function(){var e=this,t,n;return j(function(s){if(s.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.g&&(t.push(e.g.destroy()),e.g=null),e.C&&(e.C.stop(),e.C=null),e.h=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.s=null,Ct.prototype.release.call(e),D(s,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),ne(s)})};function BE(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return O2(e)},t.onSenderDisconnected=function(){return O2(e)},t.onSystemVolumeChanged=function(){var u=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();u&&Br(e,{type:"update",update:{video:{volume:u.level,muted:u.muted}}},e.l),Br(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(u){return $E(e,u)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(u){return jE(e,u)},t.start(),t=m(T2);for(var n=t.next();!n.done;n=t.next())e.j.D(e.h,n.value,function(u){return N2(e,"video",u)});for(var s in Mf)e.j.D(e.g,Mf[s],function(u){return N2(e,"player",u)});e.j.D(e.h,"loadeddata",function(){e.B=!0}),e.j.D(e.g,"loading",function(){e.o=!1,ru(e)}),e.j.D(e.h,"playing",function(){e.o=!1,ru(e)}),e.j.D(e.h,"pause",function(){ru(e)}),e.j.D(e.g,"unloading",function(){e.o=!0,ru(e)}),e.j.D(e.h,"ended",function(){new ht(function(){e.h&&e.h.ended&&(e.o=!0,ru(e))}).ia(VE)})}function O2(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,ru(e)}function ru(e){var t;j(function(n){if(n.g==1)return D(n,Promise.resolve(),2);if(!e.g)return n.return();t=new Ie("caststatuschanged"),e.dispatchEvent(t),U2(e)||Fr(e),ne(n)})}function FE(e,t,n){var s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J;j(function(G){switch(G.g){case 1:for(s in t.player)u=t.player[s],e.g[s](u);return e.F(n),l=e.h.autoplay,t.manifest?(e.h.autoplay=!1,le(G,5),D(G,e.g.load(t.manifest,t.startTime),7)):D(G,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(d=m(t.addThumbnailsTrackCalls),p=d.next();!p.done;p=d.next())g=p.value,e.g.He.apply(e.g,S(g));if(t.addTextTrackAsyncCalls)for(v=m(t.addTextTrackAsyncCalls),T=v.next();!T.done;T=v.next())b=T.value,e.g.Hd.apply(e.g,S(b));if(t.addChaptersTrackCalls)for(M=m(t.addChaptersTrackCalls),_=M.next();!_.done;_=M.next())L=_.value,e.g.Ge.apply(e.g,S(L));V(G,3);break;case 5:return O=re(G),P=new Map().set("detail",O),U=new Ie("error",P),e.g&&e.g.dispatchEvent(U),G.return();case 3:if(!e.g)return G.return();for(B in t.video)$=t.video[B],e.h[B]=$;for(W in t.playerAfterLoad)J=t.playerAfterLoad[W],e.g[W](J);e.h.autoplay=l,t.manifest&&(e.h.play(),Fr(e)),ne(G)}})}function N2(e,t,n){e.g&&(j0(e),Br(e,{type:"event",targetName:t,event:n},e.l))}function j0(e){e.C.ia(zE);for(var t={video:{},player:{}},n=m(ME),s=n.next();!s.done;s=n.next())s=s.value,t.video[s]=e.h[s];e.g.V()&&C2.forEach(function(u,l){e.m%u==0&&(t.player[l]=e.g[l]())}),P0.forEach(function(u,l){e.m%u==0&&(t.player[l]=e.g[l]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Br(e,{type:"update",update:t},e.l),O0.forEach(function(u,l){e.m%u==0&&(u={player:{}},u.player[l]=e.g[l](),Br(e,{type:"update",update:u},e.l))}),e.B&&(e.m+=1),U2(e)}function U2(e){return e.A&&(e.h.duration||e.g.V())?($0(e),e.A=!1,!0):!1}function $0(e,t){var n={contentId:e.g.nd(),streamType:e.g.V()?"LIVE":"BUFFERED",contentType:""};e.g.V()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),Fr(e,t===void 0?0:t,n)}function jE(e,t){var n=L0(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,FE(e,n.initState,n.appData),j0(e);break;case"appData":e.F(n.appData);break;case"set":var s=n.targetName,u=n.property;if(n=n.value,s=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),u=="volume"){t.setSystemVolumeLevel(n);break}else if(u=="muted"){t.setSystemVolumeMuted(n);break}}e.H[s][u]=n;break;case"call":s=e.H[n.targetName],s[n.methodName].apply(s,n.args);break;case"asyncCall":s=n.targetName,u=n.methodName,s=="player"&&u=="load"&&(e.m=0,e.B=!1);var l=n.id,d=t.senderId;t=e.H[s],n=t[u].apply(t,n.args),s=="player"&&u=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(p){return B2(e,d,l,null,p)},function(p){return B2(e,d,l,p,null)})}}function $E(e,t){var n=L0(t.data);switch(n.type){case"PLAY":e.h.play(),Fr(e);break;case"PAUSE":e.h.pause(),Fr(e);break;case"SEEK":t=n.currentTime;var s=n.resumeState;t!=null&&(e.h.currentTime=Number(t)),s&&s=="PLAYBACK_START"?(e.h.play(),Fr(e)):s&&s=="PLAYBACK_PAUSE"&&(e.h.pause(),Fr(e));break;case"STOP":e.g.vc().then(function(){e.g&&Fr(e)});break;case"GET_STATUS":$0(e,Number(n.requestId));break;case"VOLUME":s=n.volume,t=s.level,s=s.muted;var u=e.h.volume,l=e.h.muted;t!=null&&(e.h.volume=Number(t)),s!=null&&(e.h.muted=s),u==e.h.volume&&l==e.h.muted||Fr(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,s=n.currentTime,u=e.I(t.contentId),l=n.autoplay||!0,e.F(t.customData),l&&(e.h.autoplay=!0),e.g.load(u,s).then(function(){e.g&&$0(e)}).catch(function(d){var p="LOAD_FAILED";d.category==7&&d.code==7e3&&(p="LOAD_CANCELLED"),Br(e,{requestId:Number(n.requestId),type:p},e.s)});break;default:Br(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function B2(e,t,n,s,u){e.g&&Br(e,{type:"asyncComplete",id:n,error:s,res:u},e.l,t)}function Br(e,t,n,s){e.G&&(e=S2(t),s?n.getCastChannel(s).send(e):n.broadcast(e))}function Fr(e,t,n){n=n===void 0?null:n;var s={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.o?HE:e.g.Mg()?XE:e.h.paused?WE:GE,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(s.media=n),Br(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[s]},e.s)}be("shaka.cast.CastReceiver",Ln),Ln.prototype.destroy=Ln.prototype.destroy,Ln.prototype.setContentArtist=Ln.prototype.Rk,Ln.prototype.setContentImage=Ln.prototype.Sk,Ln.prototype.setContentTitle=Ln.prototype.Uk,Ln.prototype.clearContentMetadata=Ln.prototype.mj,Ln.prototype.setContentMetadata=Ln.prototype.Tk,Ln.prototype.isIdle=Ln.prototype.ek,Ln.prototype.isConnected=Ln.prototype.isConnected;var zE=.5,VE=5,HE="IDLE",GE="PLAYING",XE="BUFFERING",WE="PAUSED";function F2(e,t,n,s,u){if(s>=u)return null;for(var l=-1,d=-1,p=0;p<n.length;p++)if(n[p].some(function(W){return W!=null&&W.g.trim()!=""})){l=p;break}for(p=n.length-1;0<=p;p--)if(n[p].some(function(W){return W!=null&&W.g.trim()!=""})){d=p;break}if(l===-1||d===-1)return null;for(var g=p=!1,v="white",T="black",b=z0(s,u,p,g,v,T);l<=d;l++){for(var M=n[l],_=-1,L=-1,O=0;O<M.length;O++)if(M[O]!=null&&M[O].g.trim()!==""){_=O;break}for(O=M.length-1;0<=O;O--)if(M[O]!=null&&M[O].g.trim()!==""){L=O;break}if(_===-1||L===-1)M=j2(s,u),e.nestedCues.push(M);else{for(;_<=L;_++)if(O=M[_]){var P=O.l,U=O.i,B=O.j,$=O.h;(P!=p||U!=g||B!=v||$!=T)&&(b.payload&&e.nestedCues.push(b),b=z0(s,u,P,U,B,$),p=P,g=U,v=B,T=$),b.payload+=O.g}else b.payload+=" ";b.payload&&e.nestedCues.push(b),l!==d&&(b=j2(s,u),e.nestedCues.push(b)),b=z0(s,u,p,g,v,T)}}return e.nestedCues.length?{cue:e,stream:t}:null}function z0(e,t,n,s,u,l){return e=new Bt(e,t,""),n&&e.textDecoration.push(kr),s&&(e.fontStyle=bs),e.color=u,e.backgroundColor=l,e}function j2(e,t){return e=new Bt(e,t,""),e.lineBreak=!0,e}function $2(e,t,n,s,u){this.g=e,this.l=t,this.i=n,this.h=s,this.j=u}function V0(e,t){this.i=[],this.g=1,this.h=0,this.C=e,this.B=t,this.j=this.m=!1,this.l="white",this.o="black",this.s=this.A=null,Ya(this)}function Fc(e,t,n){var s="CC"+((e.C<<1|e.B)+1),u=new Bt(t,n,"");u.lineInterpretation=1;var l=H2.get(e.g);return l&&(u.line=l),e.s!=null&&e.A!=null&&(u.position=10+Math.min(70,10*e.s)+2.5*e.A),(t=F2(u,s,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(l=H2.get(e.g+3-t.cue.nestedCues.length))&&(u.line=l),t}function Ya(e){jr(e,0,15),e.g=1}function ou(e,t,n){if(!(32>n||127<n)){var s="";switch(t){case 0:s=V2.has(n)?V2.get(n):String.fromCharCode(n);break;case 1:s=KE.get(n);break;case 2:e.i[e.g].pop(),s=YE.get(n);break;case 3:e.i[e.g].pop(),s=qE.get(n)}s&&e.i[e.g].push(new $2(s,e.m,e.j,e.o,e.l))}}function z2(e,t,n,s){if(!(0>n||0>t))if(t>=n)for(--s;0<=s;s--)e.i[t+s]=e.i[n+s].map(function(l){return l});else for(var u=0;u<s;u++)e.i[t+u]=e.i[n+u].map(function(l){return l})}function jr(e,t,n){for(var s=0;s<=n;s++)e.i[t+s]=[]}var V2=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),KE=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),YE=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),qE=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),H2=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function jc(e,t){this.h=0,this.o=new V0(e,t),this.i=new V0(e,t),this.g=this.j=new V0(e,t),this.l=0,this.m=null}function H0(e,t,n){e.g=e.i;var s=e.g,u=null;return e.h!==3&&e.h!==4&&(u=Fc(s,e.l,n),n=e.i,n.g=0<n.h?n.h:0,jr(n,0,15),n=e.j,n.g=0<n.h?n.h:0,jr(n,0,15),s.g=15),e.h=3,s.h=t,u}function G2(e){e.h=1,e.g=e.j,e.g.h=0}function X2(e){mi("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var QE="black green blue cyan red yellow magenta black".split(" "),W2="white green blue cyan red yellow magenta white_italics".split(" ");function G0(e,t){this.I=t,this.M=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",X0(this)}function X0(e){e.i=[];for(var t=0;16>t;t++)e.i.push(W0())}function W0(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function ao(e,t){K2(e)&&(e.i[e.h][e.g]=new $2(t,e.C,e.A,e.s,e.B),e.g++)}function K2(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}G0.prototype.isVisible=function(){return this.l};function JE(e){for(var t=0,n=1;16>n;n++,t++)e.i[t]=e.i[n];for(n=0;1>n;n++,t++)e.i[t]=W0()}function es(e,t,n){var s=new Bt(e.j,t,"");s.textAlign=e.F===0?"left":e.F===1?"right":hr;var u=s.region;switch(e.I&&(u.id+="svc"+e.I),u.id+="win"+e.M,u.height=e.o,u.width=e.m,u.heightUnits=2,u.widthUnits=2,u.viewportAnchorX=e.H,u.viewportAnchorY=e.L,u.viewportAnchorUnits=e.K?oi:2,e.G){case 0:u.regionAnchorX=0,u.regionAnchorY=0;break;case 1:u.regionAnchorX=50,u.regionAnchorY=0;break;case 2:u.regionAnchorX=100,u.regionAnchorY=0;break;case 3:u.regionAnchorX=0,u.regionAnchorY=50;break;case 4:u.regionAnchorX=50,u.regionAnchorY=50;break;case 5:u.regionAnchorX=100,u.regionAnchorY=50;break;case 6:u.regionAnchorX=0,u.regionAnchorY=100;break;case 7:u.regionAnchorX=50,u.regionAnchorY=100;break;case 8:u.regionAnchorX=100,u.regionAnchorY=100}return(n=F2(s,"svc"+n,e.i,e.j,t))&&(e.j=t),n}G0.prototype.display=function(){this.l=!0};function ZE(){this.i=[],this.h=null,this.g=0}function eI(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new qa(e.h)),e.h=null,e.g=0))}function qa(e){this.g=0,this.h=e}qa.prototype.Ga=function(){return this.g<this.h.length},qa.prototype.Ma=function(){return this.g};function dn(e){if(!e.Ga())throw new q(2,2,3e3);return e.h[e.g++]}qa.prototype.skip=function(e){if(this.g+e>this.h.length)throw new q(2,2,3e3);this.g+=e},qa.prototype.Ei=function(e){if(0>this.g-e)throw new q(2,2,3e3);this.g-=e};function tI(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function nI(e,t,n,s){if(!e.g)return[];if(n==24)return n=dn(t).value,s=dn(t).value,n=function(l){return l.map(function(d){return("0"+(d&255).toString(16)).slice(-2)}).join("")}([n,s]),ao(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var u=null;switch(n){case 8:!K2(t)||0>=t.g&&0>=t.h||(0>=t.g?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(u=es(t,s,e.i)),t.h+1>=t.o?JE(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(u=es(t,s,e.i)),t.i[t.h]=W0(),t.g=0;break;case 12:t.isVisible()&&(u=es(t,s,e.i)),X0(t),t.h=0,t.g=0}return u?[u]:[]}function iI(e,t,n,s){if(128<=n&&135>=n)s=n&7,e.h[s]&&(e.g=e.h[s]);else{if(n===136){n=dn(t).value,t=[],n=m(Qa(e,n));for(var u=n.next();!u.done;u=n.next()){if(u=e.h[u.value],u.isVisible()){var l=es(u,s,e.i);l&&t.push(l)}X0(u)}return t}if(n===137)for(t=dn(t).value,t=m(Qa(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=s),n.display();else{if(n===138){for(n=dn(t).value,t=null,n=m(Qa(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()&&(t=es(u,s,e.i)),u.l=!1;return t?[t]:[]}if(n===139){for(n=dn(t).value,t=null,n=m(Qa(e,n)),u=n.next();!u.done;u=n.next())u=e.h[u.value],u.isVisible()?t=es(u,s,e.i):u.j=s,u.l=!u.l;return t?[t]:[]}if(n===140)return t=dn(t).value,Y2(e,t,s);if(n===143)return s=Y2(e,255,s),q2(e),s;if(n===144)t.skip(1),s=dn(t).value,e.g&&(e.g.A=0<(s&128),e.g.C=0<(s&64));else if(n===145)s=dn(t).value,n=dn(t).value,t.skip(1),e.g&&(t=Q2((n&48)>>4,(n&12)>>2,n&3),e.g.B=Q2((s&48)>>4,(s&12)>>2,s&3),e.g.s=t);else if(n===146)s=dn(t).value,t=dn(t).value,e.g&&(e=e.g,e.h=s&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),s=dn(t).value,t.skip(1),e.g&&(e.g.F=s&3);else if(152<=n&&159>=n){n=(n&15)-8,u=e.h[n]!==null,u||(l=new G0(n,e.i),l.j=s,e.h[n]=l),s=dn(t).value,l=dn(t).value;var d=dn(t).value,p=dn(t).value,g=dn(t).value;t=dn(t).value,u&&(t&7)===0||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(s&32),t.L=l&127,t.H=d,t.G=(p&240)>>4,t.K=0<(l&128),t.o=(p&15)+1,t.m=(g&63)+1,e.g=e.h[n]}}}return[]}function Qa(e,t){for(var n=[],s=0;8>s;s++)(t&1)===1&&e.h[s]&&n.push(s),t>>=1;return n}function Y2(e,t,n){var s=[];t=m(Qa(e,t));for(var u=t.next();!u.done;u=t.next()){u=u.value;var l=e.h[u];l.isVisible()&&(l=es(l,n,e.i))&&s.push(l),e.h[u]=null}return s}function q2(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Q2(e,t,n){var s={0:0,1:0,2:1,3:1};return e=s[e],t=s[t],n=s[n],rI[e<<2|t<<1|n]}var J2=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),rI="black blue green cyan red magenta yellow white".split(" ");function su(){this.h=[],this.g=[],this.i=new ZE,this.l=0,this.m=new Map([["CC1",new jc(0,0)],["CC2",new jc(0,1)],["CC3",new jc(1,0)],["CC4",new jc(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,K0(this)}su.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,K0(this),e=m(this.j.values());for(var t=e.next();!t.done;t=e.next())q2(t.value)};function K0(e){e.o=0,e.s=0;for(var t=m(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Ya(n.i),Ya(n.j),Ya(n.o);e.B=!0}su.prototype.extract=function(e,t){if(this.B){for(var n=m(this.m.values()),s=n.next();!s.done;s=n.next())s.value.l=t;this.B=!1}if(e=new Ft(e,0),!(8>e.getLength())&&e.X()===181&&e.Ba()===49&&e.T()===1195456820&&e.X()===3&&(n=e.X(),(n&64)!==0))for(n&=31,e.skip(1),s=0;s<n;s++){var u=e.X(),l=(u&4)>>2,d=e.X(),p=e.X();l&&(u&=3,u===0||u===1?this.h.push({pts:t,type:u,Bb:d,hc:p,order:this.h.length}):(this.g.push({pts:t,type:u,value:d,order:this.g.length}),this.g.push({pts:t,type:2,value:p,order:this.g.length})))}},su.prototype.decode=function(){function e(u,l){return u.pts-l.pts||u.order-l.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),s=n.next();!s.done;s=n.next())(s=oI(this,s.value))&&t.push(s);for(n=m(this.g),s=n.next();!s.done;s=n.next())eI(this.i,s.value);for(n=m(this.i.i),s=n.next();!s.done;s=n.next())s=sI(this,s.value),t.push.apply(t,S(s));return this.i.i=[],this.h=[],this.g=[],t};function oI(e,t){var n=t.type;if((t.Bb&112)===16){var s=t.Bb>>3&1;n===0?e.o=s:e.s=s}if(s="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(s),t.Bb===255&&t.hc===255||!t.Bb&&!t.hc||!Z2(t.Bb)||!Z2(t.hc))return 45<=++e.l&&K0(e),null;e.l=0,t.Bb&=127,t.hc&=127;var u=t.Bb;if(1<=u&&15>=u||!t.Bb&&!t.hc)return null;if(u=null,(t.Bb&112)===16)e:{if(e.A.add(s),s=t.Bb,e=t.hc,n.m===(s<<8|e))n.m=null;else if(n.m=s<<8|e,(s&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(s&7)<<1|e>>5&1],s="white",u=!1;var l=null,d=95<e?e-96:e-64;13>=d?s=W2[Math.floor(d/2)]:15>=d?u=!0:l=Math.floor((d-16)/2),e=(e&1)===1,n.h!==4&&(d=n.g,n.h===3&&t!==d.g&&(n=1+t-d.h,z2(d,n,1+d.g-d.h,d.h),jr(d,0,n-1),jr(d,t+1,15-t)),d.g=t,d.m=e,d.j=u,d.l=s,d.s=l,d.o="black")}else if((s&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",ou(n.g,0,32),s=!1,t=W2[(e&14)>>1],t==="white_italics"&&(t="white",s=!0),n.g.m=(e&1)===1,n.g.j=s,n.g.l=t;else if((s&247)===16&&(e&240)===32||(s&247)===23&&(e&255)===45)t="black",(s&7)===0&&(t=QE[(e&14)>>1]),n.g.o=t;else if((s&247)===17&&(e&240)===48)ou(n.g,1,e);else if((s&246)===18&&(e&224)===32)ou(n.g,s&1?3:2,e);else{if((s&246)===20&&(e&240)===32){switch(e=t.pts,s=null,t.hc){case 32:G2(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:s=H0(n,2,e);break;case 38:s=H0(n,3,e);break;case 39:s=H0(n,4,e);break;case 40:ou(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Ya(n.o),X2(n);break;case 43:X2(n);break;case 44:t=n.i,s=null,n.h!==4&&(s=Fc(t,n.l,e)),jr(t,0,15);break;case 45:t=n.g,n.h!==3?s=null:(s=Fc(t,n.l,e),u=t.g-t.h+1,z2(t,u-1,u,t.h),jr(t,0,u-1),jr(t,t.g,15-t.g),n.l=e);break;case 46:jr(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=Fc(n.i,n.l,e)),s=n.j,n.j=n.i,n.i=s,G2(n),n.l=e,s=t}u=s;break e}(s==23||s==31)&&33<=e&&35>=e&&(n.g.A=e-32)}u=null}else e=t.hc,ou(n.g,0,t.Bb),ou(n.g,0,e);return u}function sI(e,t){var n=[];try{for(;t.Ga();){var s=dn(t).value,u=(s&224)>>5,l=s&31;if(u===7&&l!=0&&(u=dn(t).value&63),u!=0){e.A.add("svc"+u),e.j.has(u)||e.j.set(u,new tI(u));for(var d=e.j.get(u),p=t.Ma();t.Ma()-p<l;){u=d;var g=t,v=dn(g),T=v.value,b=v.pts;if(T===16){var M=dn(g);T=T<<16|M.value}if(0<=T&&31>=T)var _=nI(u,g,T,b);else if(128<=T&&159>=T)_=iI(u,g,T,b);else{if(4096<=T&&4127>=T)u=g,g=T&255,8<=g&&15>=g?u.skip(1):16<=g&&23>=g?u.skip(2):24<=g&&31>=g&&u.skip(3);else if(4224<=T&&4255>=T)u=g,g=T&255,128<=g&&135>=g?u.skip(4):136<=g&&143>=g&&u.skip(5);else if(32<=T&&127>=T)g=T,u.g&&(g===127?ao(u.g,"♪"):ao(u.g,String.fromCharCode(g)));else if(160<=T&&255>=T)u.g&&ao(u.g,String.fromCharCode(T));else if(4128<=T&&4223>=T){if(g=T&255,u.g)if(J2.has(g)){var L=J2.get(g);ao(u.g,L)}else ao(u.g,"_")}else 4256<=T&&4351>=T&&u.g&&((T&255)!=160?ao(u.g,"_"):ao(u.g,"[CC]"));_=[]}n.push.apply(n,S(_))}}}}catch(O){if(O instanceof q&&O.code===3e3)mi("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw O}return n}function Z2(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}su.prototype.getStreams=function(){return Array.from(this.A)},be("shaka.cea.CeaDecoder",su),_o=function(){return new su};function ew(e){for(var t=[],n=e,s=e=0;s<n.length;)e==2&&n[s]==3?(e=0,n=[].concat(S(n)),n.splice(s,1),n=new Uint8Array(n)):n[s]==0?e++:e=0,s++;for(e=n,s=0;s<e.length;){for(n=0;e[s]==255;)n+=255,s++;n+=e[s++];for(var u=0;e[s]==255;)u+=255,s++;u+=e[s++],n==4&&t.push(e.subarray(s,s+u)),s+=u}return t}function $c(){this.j=new Map,this.i=this.h=0,this.g=Y0}$c.prototype.init=function(e){function t(l){l=l.name,zc.has(l)&&(n.g=zc.get(l))}var n=this,s=[],u=[];if(new Lt().box("moov",ot).box("mvex",ot).R("trex",function(l){var d=l.reader;d.skip(4),d.skip(4),l=d.T(),d=d.T(),n.h=l,n.i=d}).box("trak",ot).R("tkhd",function(l){var d=l.reader;l=l.version,l==1?(d.skip(8),d.skip(8)):(d.skip(4),d.skip(4));var p=d.T();l==1?d.skip(8):d.skip(4),d.skip(4),d.skip(8),d.skip(2),d.skip(2),d.skip(2),d.skip(2),d.skip(36),d.Ba(),d.Ba(),d.Ba(),d.Ba(),s.push(p)}).box("mdia",ot).R("mdhd",function(l){l=jf(l.reader,l.version),u.push(l.timescale)}).box("minf",ot).box("stbl",ot).R("stsd",Rr).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",ui).box("sinf",ot).box("frma",function(l){l=wp(l.reader).codec,zc.has(l)&&(n.g=zc.get(l))}).parse(e,!0,!0),!s.length||!u.length||s.length!=u.length)throw new q(2,2,2010);this.g==Y0&&ft("Unable to determine bitstream format for CEA parsing!"),s.forEach(function(l,d){n.j.set(l,u[d])})},$c.prototype.parse=function(e){var t=this;if(this.g==Y0)return[];var n=[],s=0,u=[];return new Lt().box("moof",function(l){s=l.start,u=[],ot(l)}).box("traf",function(l){u.push({baseMediaDecodeTime:null,Md:t.h,Nd:t.i,ti:[],timescale:9e4}),ot(l)}).R("trun",function(l){var d=u[u.length-1];l=$f(l.reader,l.version,l.flags),d.ti.push(l)}).R("tfhd",function(l){var d=u[u.length-1];l=Bf(l.reader,l.flags),d.Md=l.Md||t.h,d.Nd=l.Nd||t.i,l=l.trackId,t.j.has(l)&&(d.timescale=t.j.get(l))}).R("tfdt",function(l){var d=u[u.length-1];l=Ff(l.reader,l.version),d.baseMediaDecodeTime=l.baseMediaDecodeTime}).box("mdat",function(l){for(var d=s-l.start-8,p=l.reader.Ma(),g=m(u),v=g.next();!v.done;v=g.next())v=v.value,v.baseMediaDecodeTime===null?ft("Unable to find base media decode time for CEA captions!"):(l.reader.seek(p),uI(t,l.reader,v.baseMediaDecodeTime,v.timescale,v.Md,v.Nd,d,v.ti,n))}).parse(e,!1,!0),n};function uI(e,t,n,s,u,l,d,p,g){var v=0,T=l,b=p.map(function(L){return L.gh});for(b=[].concat.apply([],S(b)),b.length&&(T=b[0].sampleSize||l),t.skip(d+p[0].mg);t.Ga();){d=t.T();var M=t.X(),_=null;switch(_=!1,p=1,e.g){case Ja:_=M&31,_=_==6;break;case Za:p=2,t.skip(1),_=M>>1&63,_=_==39||_==40;break;case el:p=2,t.skip(1),_=M>>1&63,_=_==23||_==24;break;default:return}if(_)for(M=0,v<b.length&&(M=b[v].Bf||0),M=(n+M)/s,p=m(ew(t.Tb(d-p))),_=p.next();!_.done;_=p.next())g.push({packet:_.value,pts:M});else try{t.skip(d-p)}catch{break}T-=d+4,T==0&&(n=v<b.length?n+(b[v].hh||u):n+u,v++,v<b.length?T=b[v].sampleSize||l:T=l)}}be("shaka.cea.Mp4CeaParser",$c);var Y0=0,Ja=1,Za=2,el=3,zc=new Map().set("avc1",Ja).set("avc3",Ja).set("dvav",Ja).set("dva1",Ja).set("hev1",Za).set("hvc1",Za).set("dvh1",Za).set("dvhe",Za).set("vvc1",el).set("vvi1",el).set("dvc1",el).set("dvi1",el);Gh("video/mp4",function(){return new $c});function Vc(){this.g=null}Vc.prototype.init=function(){},Vc.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Ut;var t=[];if(e=Ze(e),!$s(e))return t;e=this.g.parse(e);var n=e.Od(),s=e.Xe();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(s),s=n.next();!s.done;s=n.next())if(s=s.value,e.includes(s.type)&&s.time!=null)for(var u=m(ew(s.data)),l=u.next();!l.done;l=u.next())t.push({packet:l.value,pts:s.time});return t},be("shaka.cea.TsCeaParser",Vc),Gh("video/mp2t",function(){return new Vc});function aI(e){var t=0,n=Yn(e),s=n.getUint32(t,!0);if(s!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){s=n.getUint16(e,!0),e+=2;var u=n.getUint16(e,!0);if(e+=2,(u&1)!=0||u+e>n.byteLength){n=[];break e}var l=Ze(n,e,u);t.push({type:s,value:l}),e+=u}n=t}return n}function tw(e){return e=Ii(an(e)),e=aI(e).filter(function(t){return t.type===lI})[0],e?(e=qr(e.value,!0),(e=Oo(e,"WRMHEADER"))?e:null):null}function Hc(e){try{var t=tw(e);if(t)e:{for(var n=m(tr(t,"DATA")),s=n.next();!s.done;s=n.next()){var u=s.value;if(u.children)for(var l=m(u.children),d=l.next();!d.done;d=l.next()){var p=d.value;if(p.tagName=="LA_URL"){var g=an(p);break e}}}g=""}else g="";return g}catch{return""}}var lI=1;function nw(e,t,n){var s=dI(e),u=null;e=[];var l=[],d=null,p=new Set(s.map(function(v){return v.keyId}));p.delete(null);var g="cenc";if(1<p.size)throw new q(2,4,4010);if(!t){if(l=s.filter(function(v){return v.Bd=="urn:mpeg:dash:sea:2012"}),1<l.length)throw new q(2,4,4050);l.length&&(d=pI(l[0])),(l=s.find(function(v){return v.Bd=="urn:mpeg:dash:mp4protection:2011"}))&&l.encryptionScheme&&(g=l.encryptionScheme),l=s.filter(function(v){return v.Bd=="urn:mpeg:dash:mp4protection:2011"?(u=v.init||u,!1):v.Bd!="urn:mpeg:dash:sea:2012"}),l.length&&(e=cI(u,g,l,n,p),e.length==0&&(e=[Tr("",g,u)]))}if(s.length&&!d&&(t||!l.length))for(e=[],t=m(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(Tr(n,g,u));if(p=Array.from(p)[0]||null)for(g=m(e),t=g.next();!t.done;t=g.next())for(t=m(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=p;return{Oh:p,vm:u,drmInfos:e,cg:d,Th:!0}}function fI(e,t,n,s){var u=nw(e,n,s);if(t.Th)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=u.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=u.drmInfos),t.Th=!1;else if(0<u.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(l){return u.drmInfos.some(function(d){return d.keySystem==l.keySystem})}),t.drmInfos.length==0))throw new q(2,4,4008);return u.Oh||t.Oh}function Gc(e){var t=Gi(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=an(t)))return t;if((t=Gi(e.node,"urn:microsoft:playready","pro"))&&an(t))return Hc(t);if((e=Gi(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=an(e))){t=Ii(e),e=8,t=Yn(t);var n=t.getUint8(e);return e+=20,0<n&&(e+=4+16*t.getUint32(e)),e=Ze(t,e+4),e=rf(e),e=Oo("<pro>"+e+"</pro>"),Hc(e)}return""}function cI(e,t,n,s,u){var l=[];n=m(n);for(var d=n.next();!d.done;d=n.next()){d=d.value;var p=s[d.Bd];if(p){var g;if((g=Gi(d.node,"urn:microsoft:playready","pro"))&&an(g)){g=an(g),g=Ii(g);var v=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);g=[{initData:Pf(g,v,new Set,0),initDataType:"cenc",keyId:d.keyId}]}else g=null;if(v=null,d.Bd==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){v=d;var T=u;if(T.size==0)v=null;else{var b=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),M=new Uint8Array([]);v=[{initData:Pf(M,b,T,1),initDataType:"cenc",keyId:v.keyId}]}}g=Tr(p,t,d.init||e||g||v),(p=gI.get(p))&&(g.licenseServerUri=p(d)),l.push(g)}}return l}function dI(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=hI(n.value))&&t.push(n);return t}function hI(e){var t=e.attributes.schemeIdUri,n=Cr(e,"urn:mpeg:cenc:2013","default_KID"),s=Wy(e,"urn:mpeg:cenc:2013","pssh").map(si),u=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new q(2,4,4009);var l=[];try{l=s.map(function(d){return{initDataType:"cenc",initData:Ii(d),keyId:null}})}catch{throw new q(2,4,4007)}return{node:e,Bd:t,keyId:n,init:0<l.length?l:null,encryptionScheme:u}}function pI(e){if(!f.crypto||!f.crypto.subtle)throw ft("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new q(2,4,4042);var t=Gi(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new q(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new q(2,4,4051);if(t=Gi(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new q(2,4,4051);if(e=t.attributes.IV,t=qn(t.attributes.keyUriTemplate),!e||!t)throw new q(2,4,4051);if(e=Ro(e.substr(2)),e.byteLength!=16)throw new q(2,4,4048);return{kk:t,iv:e}}var gI=new Map().set("com.apple.fps",function(e){if(f.shakaMediaKeysPolyfill==="apple")throw new q(2,4,4054);return(e=Gi(e.node,"https://dashif.org/CPS","Laurl"))&&(e=an(e))?e:""}).set("com.widevine.alpha",function(e){var t=Gi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=an(t))?t:(e=Gi(e.node,"urn:microsoft","laurl"))&&qn(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Gc).set("com.microsoft.playready.recommendation",Gc).set("com.microsoft.playready.software",Gc).set("com.microsoft.playready.hardware",Gc).set("org.w3.clearkey",function(e){var t=Gi(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=an(t))?t:(e=Gi(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=an(e))?e:""});function tl(e,t,n,s,u,l){var d=new Map().set("RepresentationID",t).set("Number",n).set("SubNumber",s).set("Bandwidth",u).set("Time",l);return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(p,g,v,T){if(p=="$$")return"$";var b=d.get(g);if(b==null)return p;switch(g=="RepresentationID"&&v&&(v=void 0),g=="Time"&&typeof b!="bigint"&&(.2<=Math.abs(b-Math.round(b))&&ft("Calculated $Time$ values must be close to integers"),b=Math.round(b)),T){case void 0:case"d":case"i":case"u":p=b.toString();break;case"o":p=b.toString(8);break;case"x":p=b.toString(16);break;case"X":p=b.toString(16).toUpperCase();break;default:p=b.toString()}return v=f.parseInt(v,10)||1,Array(Math.max(0,v-p.length)+1).join("0")+p})}function iw(e,t){var n=qi(e,t,"timescale"),s=1;n&&(s=dr(n)||1),n=qi(e,t,"duration");var u=(n=dr(n||""))?n/s:null,l=qi(e,t,"startNumber"),d=Number(qi(e,t,"presentationTimeOffset"))||0,p=bn(l||"");if((l==null||p==null)&&(p=1),l=null,t=uu(e,t,"SegmentTimeline")){t=kt(t,"S"),l=s,e=e.ma.duration||1/0;for(var g=p,v=[],T=-d,b=0;b<t.length;++b){var M=t[b],_=t[b+1],L=Qe(M,"t",bn),O=Qe(M,"d",bn),P=Qe(M,"r",Cn);if(M=Qe(M,"k",Cn)||0,L!=null&&(L-=d),O){if(L=L??T,P=P||0,0>P)if(_){if(_=Qe(_,"t",bn),_==null)break;if(L>=_)break;P=Math.ceil((_-L)/O)-1}else{if(e==1/0)break;if(L/l>=e)break;P=Math.ceil((e*l-L)/O)-1}for(0<v.length&&L!=T&&(v[v.length-1].end=L/l),_=0;_<=P;++_)T=L+O,v.push({start:L/l,end:T/l,Bh:L,rc:M,Nk:v.length+g}),L=T}}l=v}return{timescale:s,Kf:n,gb:u,ie:p,Ib:d/s||0,dd:d,timeline:l}}function rw(e,t){return[t(e.J),t(e.oa),t(e.ra)].filter(no)}function qi(e,t,n){t=rw(e,t),e=null,t=m(t);for(var s=t.next();!s.done&&!(e=s.value.attributes[n]);s=t.next());return e}function uu(e,t,n){t=rw(e,t),e=null,t=m(t);for(var s=t.next();!s.done&&!(e=Yt(s.value,n));s=t.next());return e}function mI(e,t,n,s,u,l){for(var d=Cr(e,"http://www.w3.org/1999/xlink","href"),p=Cr(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",g=m(Object.keys(e.attributes)),v=g.next();!v.done;v=g.next()){v=v.value;var T=v.split(":"),b=Kh("http://www.w3.org/1999/xlink");T[0]==b&&delete e.attributes[v]}if(5<=l)return $o(new q(2,4,4028));if(p!="onLoad")return $o(new q(2,4,4027));var M=yn([s],[d]);return u.request(0,fn(M,t)).Va(function(_){if(_=ra(_.data,e.tagName),!_)return $o(new q(2,4,4001,d));for(e.children=[];_.children.length;){var L=_.children.shift();e.children.push(L)}L=m(Object.keys(_.attributes));for(var O=L.next();!O.done;O=L.next())O=O.value,e.attributes[O]=_.attributes[O];return Xc(e,t,n,M[0],u,l+1)})}function Xc(e,t,n,s,u,l){if(l=l===void 0?0:l,Cr(e,"http://www.w3.org/1999/xlink","href")){var d=mI(e,t,n,s,u,l);return n&&(d=d.Va(void 0,function(){return Xc(e,t,n,s,u,l)})),d}d=[];for(var p=m(Xy(e)),g=p.next(),v={};!g.done;v={Jd:void 0},g=p.next())v.Jd=g.value,Cr(v.Jd,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(T){return function(b){return b!==T.Jd}}(v)):v.Jd.tagName!="SegmentTimeline"&&d.push(Xc(v.Jd,t,n,s,u,l));return M1(d).Va(function(){return e})}function yI(e,t,n,s,u,l,d){var p,g=new Lt().R("sidx",function(v){p=vI(t,s,u,l,d,n,v)});if(e&&g.parse(e),p)return p;throw new q(2,3,3004)}function vI(e,t,n,s,u,l,d){var p=[];d.reader.skip(4);var g=d.reader.T();if(g==0)throw new q(2,3,3005);if(d.version==0)var v=d.reader.T(),T=d.reader.T();else v=d.reader.yd(),T=d.reader.yd();d.reader.skip(2);var b=d.reader.Ba();for(e=e+d.size+T,T=0;T<b;T++){var M=d.reader.T(),_=(M&2147483648)>>>31;M&=2147483647;var L=d.reader.T();if(d.reader.skip(4),_==1)throw new q(2,3,3006);p.push(new He(v/g+n,(v+L)/g+n,function(){return l},e,e+M-1,t,n,s,u)),v+=L,e+=M}return d.parser.stop(),p}function lo(e){this.h=Yn(e),this.g=new Ft(this.h,0)}lo.prototype.Ga=function(){return this.g.Ga()};function $r(e){var t=ow(e);if(7<t.length)throw new q(2,3,3002);var n=0;t=m(t);for(var s=t.next();!s.done;s=t.next())n=256*n+s.value;t=ow(e);e:{s=m(xI);for(var u=s.next();!u.done;u=s.next())if(xr(t,new Uint8Array(u.value))){s=!0;break e}s=!1}if(s)t=e.h.byteLength-e.g.Ma();else{if(t.length==8&&t[1]&224)throw new q(2,3,3001);for(u=s=0;u<t.length;u++){var l=t[u];s=u==0?l&(1<<8-t.length)-1:256*s+l}t=s}return t=e.g.Ma()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Ma(),s=Yn(e.h,e.g.Ma(),t),e.g.skip(t),new wI(n,s)}function ow(e){var t=e.g.Ma(),n=e.g.X();if(n==0)throw new q(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ze(e.h,t,n)}var xI=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function wI(e,t){this.id=e,this.g=t}function q0(e){if(8<e.g.byteLength)throw new q(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new q(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var s=e.g.getUint8(n);t=256*t+s}return t}function SI(e,t,n,s,u,l,d,p,g){function v(){return u}var T=[];e=new lo(e.g);for(var b=null,M=null;e.Ga();){var _=$r(e);if(_.id==187){var L=TI(_);L&&(_=n*L.al,L=t+L.Fk,b!=null&&T.push(new He(b+d,_+d,v,M,L-1,l,d,p,g)),b=_,M=L)}}return b!=null&&T.push(new He(b+d,s+d,v,M,null,l,d,p,g)),T}function TI(e){var t=new lo(e.g);if(e=$r(t),e.id!=179)throw new q(2,3,3013);if(e=q0(e),t=$r(t),t.id!=183)throw new q(2,3,3012);t=new lo(t.g);for(var n=0;t.Ga();){var s=$r(t);if(s.id==241){n=q0(s);break}}return{al:e,Fk:n}}function sw(e,t,n){if(t=uu(e,t,"Initialization"),!t)return null;var s=e.J.cb(),u=t.attributes.sourceURL;u&&(s=yn(s,[qn(u)],e.Lb())),u=0;var l=null;return(t=Qe(t,"range",af))&&(u=t.start,l=t.end),n=new Jn(function(){return s},u,l,fw(e),null,null,n,e.oa.encrypted),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,e.ma&&!e.ma.bf&&(n.g=e.ma.start+e.ma.duration),n}function CI(e,t,n){var s=Number(qi(e,au,"presentationTimeOffset"))||0,u=qi(e,au,"timescale"),l=1;u&&(l=dr(u)||1);var d=s/l||0,p=sw(e,au,n);bI(e,p);var g=Qr(e);return{endTime:-1,timeline:-1,Oc:function(){var v=uu(g,au,"RepresentationIndex"),T=g.J.cb();return v&&(v=qn(v.attributes.sourceURL))&&(T=yn(T,[v],g.Lb())),v=aw(g),uw(g,t,p,T,v.start,v.end,d)},timescale:l}}function uw(e,t,n,s,u,l,d){var p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y;return j(function(Q){if(Q.g==1)return p=e.presentationTimeline,g=!e.Db||!e.ma.bf,v=e.ma.start,T=e.ma.duration,b=e.J.mimeType.split("/")[1],M=t,_=null,L=[M(s,u,l,!1),b=="webm"?M(n.O(),n.startByte,n.endByte,!0):null],M=null,D(Q,Promise.all(L),2);if(O=Q.h,P=O[0],U=O[1]||null,B=null,$=v-d,W=v,J=T?v+T:1/0,b=="mp4")var ie=yI(P,u,s,n,$,W,J);else{ie=P;var te=new lo(U);if($r(te).id!=440786851)throw new q(2,3,3008);var Z=$r(te);if(Z.id!=408125543)throw new q(2,3,3009);te=Z.g.byteOffset,Z=new lo(Z.g);for(var ve=null;Z.Ga();){var de=$r(Z);if(de.id==357149030){ve=de;break}}if(!ve)throw new q(2,3,3010);for(ve=new lo(ve.g),de=1e6,Z=null;ve.Ga();){var ae=$r(ve);if(ae.id==2807729)de=q0(ae);else if(ae.id==17545)if(ae.g.byteLength==4)Z=ae.g.getFloat32(0);else if(ae.g.byteLength==8)Z=ae.g.getFloat64(0);else throw new q(2,3,3003)}if(Z==null)throw new q(2,3,3011);if(ve=de/1e9,Z*=ve,ie=$r(new lo(ie)),ie.id!=475249515)throw new q(2,3,3007);ie=SI(ie,te,ve,Z,s,n,$,W,J)}for(B=ie,G=m(B),X=G.next();!X.done;X=G.next())Y=X.value,Y.codecs=e.J.codecs,Y.mimeType=e.J.mimeType,Y.bandwidth=e.bandwidth;return p.$d(B),_=new vt(B),g&&_.ld(W,J,!0),Q.return(_)})}function au(e){return e.Cd}function aw(e){var t=uu(e,au,"RepresentationIndex");return e=qi(e,au,"indexRange"),e=af(e||""),t&&(e=Qe(t,"range",af,e)),e}function bI(e,t){if(lw(e,t),!aw(e))throw new q(2,4,4002)}function lw(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=ct&&n!="mp4"&&n!="webm")throw new q(2,4,4006);if(n=="webm"&&!t)throw new q(2,4,4005)}function fw(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.qf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.oa.label||null,roles:e.roles||null,language:e.oa.language||null}}function kI(e,t,n){var s=sw(e,cw,n),u=AI(e);if(!u.gb&&!u.timeline&&1<u.sd.length)throw new q(2,4,4002);if(!u.gb&&!e.ma.duration&&!u.timeline&&u.sd.length==1)throw new q(2,4,4002);if(u.timeline&&u.timeline.length==0)throw new q(2,4,4002);var l=null,d=null;e.ra.id&&e.J.id&&(d=t.get(e.ra.id+","+e.J.id))&&(l=d.segmentIndex);var p=EI(e.ma.start,e.ma.duration,e.J.cb,u,s,n,e.J.mimeType,e.J.codecs,e.bandwidth,e.Lb);return t=!l,l?l.Yd(p,e.presentationTimeline.Gb()):l=new vt(p),e.presentationTimeline.$d(p),e.Db&&e.ma.bf||l.ld(e.ma.start,e.ma.duration?e.ma.start+e.ma.duration:1/0,t),d&&(d.segmentIndex=l),{endTime:-1,timeline:-1,Oc:function(){return l&&l.getNumReferences()!=0||l.kf(p),Promise.resolve(l)},timescale:u.timescale}}function cw(e){return e.tc}function AI(e){var t=II(e);e=iw(e,cw);var n=e.ie;n==0&&(n=1);var s=0;return e.gb?s=e.gb*(n-1):e.timeline&&0<e.timeline.length&&(s=e.timeline[0].start),{gb:e.gb,startTime:s,ie:n,Ib:e.Ib,timescale:e.timescale,timeline:e.timeline,sd:t}}function EI(e,t,n,s,u,l,d,p,g,v){var T=s.sd.length;s.timeline&&s.timeline.length!=s.sd.length&&(T=Math.min(s.timeline.length,s.sd.length));for(var b=e-s.Ib,M=t?e+t:1/0,_=[],L=s.startTime,O={},P=0;P<T;O={Mf:void 0,Cf:void 0},P++){O.Cf=s.sd[P];var U=L;L=void 0,L=s.gb!=null?U+s.gb:s.timeline?s.timeline[P].end:U+t,O.Mf=null,O=new He(e+U,e+L,function(B){return function(){return B.Mf==null&&(B.Mf=yn(n(),[B.Cf.tk],v())),B.Mf}}(O),O.Cf.start,O.Cf.end,u,b,e,M,[],"",null,null,_r,l),O.codecs=p,O.mimeType=d,O.bandwidth=g,_.push(O)}return _}function II(e){return[e.J.tc,e.oa.tc,e.ra.tc].filter(no).map(function(t){return kt(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.Jg&&(e.Jg=!0);var n=qn(t.attributes.media);return t=Qe(t,"mediaRange",af,{start:0,end:null}),{tk:n,start:t.start,end:t.end}})}function dw(e,t,n,s,u,l,d,p,g,v){g||e.J.Ze||(e.J.Ze=qi(e,fo,"initialization"));var T=e.J.Ze?LI(e,d):null,b=MI(e);RI(b);var M=Qr(e);if(b.Vd)return lw(e,T),{endTime:-1,timeline:-1,Oc:function(){var U=tl(b.Vd,M.J.originalId,null,null,M.bandwidth||null,null);return U=yn(M.J.cb(),[U]),uw(M,t,T,U,0,null,b.Ib)},timescale:b.timescale};if(b.gb)return s||e.oa.contentType==="image"||e.oa.contentType==="text"||(s=e.ma.start,v=e.ra.id,n=e.ma.duration,v=(v=v!=null&&l.get(v)||n)?s+v:1/0,e.presentationTimeline.Rg(b.gb),e.presentationTimeline.ri(s,v)),{endTime:-1,timeline:-1,Oc:function(){return _I(M,b,u,T,l,d,p,e.J.Df)},timescale:b.timescale};var _=null;s=s=null,e.ra.id&&e.J.id&&(s=e.ra.id+","+e.J.id,s=n.get(s))&&(_=s.segmentIndex);var L=e.ma.start,O=e.ma.duration?L+e.ma.duration:1/0;if(_)v=_,hw(v,b,L,O,T,e.Db),v.$a(e.presentationTimeline.Gb());else{if(n=0,g=-1,e.ra.id!=null&&e.J.id!=null){var P=v.get(e.ra.id);if(P)g=P.timeline;else for(v=m(v.values()),P=v.next();!P.done;P=v.next())if(P=P.value,Math.abs(b.Ib-P.endTime)<=Uy&&P.ah.includes(e.J.id)){g=P.timeline;break}else P.timeline>=n&&(n=P.timeline+1)}g==-1&&(g=n),_=new nl(e.Db,b,e.J.originalId,e.bandwidth,e.J.cb,e.Lb,L,O,T,d,e.J.Df,g)}return b.timeline&&e.oa.contentType!=="image"&&e.oa.contentType!=="text"&&e.presentationTimeline.si(_.h?_.h.timeline:[],L),s&&e.Db&&(s.segmentIndex=_),s=(s=(s=b.timeline)&&s[s.length-1])?s.end+b.Ib:-1,v=-1,_ instanceof nl&&(v=_.Pe()),{endTime:s,timeline:v,Oc:function(){return _ instanceof nl&&_.getNumReferences()==0&&hw(_,b,L,O,T,e.Db),Promise.resolve(_)},timescale:b.timescale}}function fo(e){return e.Gc}function MI(e){var t=iw(e,fo),n=qi(e,fo,"media"),s=qi(e,fo,"index"),u=qi(e,fo,"k"),l=0;return u&&(l=parseInt(u,10)),{Kf:t.Kf,gb:t.gb,timescale:t.timescale,ie:t.ie,Ib:t.Ib,dd:t.dd,timeline:t.timeline,ac:n&&qn(n),Vd:s,mimeType:e.J.mimeType,codecs:e.J.codecs,bandwidth:e.bandwidth,vk:l}}function RI(e){var t=e.Vd?1:0;if(t+=e.timeline?1:0,t+=e.gb?1:0,t==0)throw new q(2,4,4002);if(t!=1&&(e.Vd&&(e.timeline=null),e.Kf=null,e.gb=null),!e.Vd&&!e.ac)throw new q(2,4,4002)}function _I(e,t,n,s,u,l,d,p){function g(Z){var ve=Z-P,de=ve*O,ae=t.Kf,ge=ve*ae;"BigInt"in f&&ge>Number.MAX_SAFE_INTEGER&&(ge=BigInt(ve)*BigInt(ae)),de+=M,ve=de+O,ae=Math.min(ve,T());var Te=[],Ce=t.vk;if(Ce)for(var Pe=(ae-de)/Ce,Re={},yt=0;yt<Ce;Re={Ri:void 0},yt++){var pt=de+Pe*yt,At=pt+Pe;Re.Ri=yt,Re=new He(pt,At,function(ut){return function(){var et=tl(U,$,Z,ut.Ri,B,ge);return yn(W(),[et],J())}}(Re),0,null,s,G,M,T(),[],"",null,null,_r,l),Re.codecs=e.J.codecs,Re.mimeType=e.J.mimeType,p==0?0<yt&&Re.qd():yt%p!=0&&Re.qd(),Te.push(Re)}return de=new He(de,ae,function(){if(Ce)return[];var ut=tl(U,$,Z,null,B,ge);return yn(W(),[ut],J())},0,null,s,G,M,T(),Te,"",null,null,_r,l,0<Te.length),de.codecs=e.J.codecs,de.mimeType=e.J.mimeType,de.bandwidth=e.bandwidth,de.j=ve,de}function v(){var Z=[Math.max(b.Gb(),M),Math.min(b.Ac(),T())].map(function(ve){return ve-M});return Z=[Math.ceil(Z[0]/O),Math.ceil(Z[1]/O)-1],e.J.qb&&Z[1]++,Z.map(function(ve){return ve+P})}function T(){var Z=_!=null&&u.get(_)||L;return Z?M+Z:1/0}var b=e.presentationTimeline,M=e.ma.start,_=e.ra.id,L=e.ma.duration,O=t.gb,P=t.ie,U=t.ac,B=e.bandwidth||null,$=e.J.originalId,W=e.J.cb,J=e.Lb,G=M-t.Ib,X=v();n=e.Db?Math.max(X[0],X[1]-n+1):X[0],d=d||X[1],X=[];for(var Y=n;Y<=d;++Y){var Q=g(Y);X.push(Q)}var ie=new vt(X);if(X=b.Ac()<T(),Y=b.V(),X||Y){var te=Math.max(n,d+1);n=O,e.J.qb&&(n=.1),ie.Lf(n,function(){var Z=b.Gb();ie.$a(Z);var ve=m(v());ve.next(),ve=ve.next().value;for(var de=[];te<=ve;){var ae=g(te);de.push(ae),te++}return Z>T()&&!de.length?null:de})}return Promise.resolve(ie)}function LI(e,t){var n=e.J.Ze;if(n||(n=qi(e,fo,"initialization")),!n)return null;n=qn(n);var s=e.J.originalId,u=e.bandwidth||null,l=e.J.cb,d=e.Lb;return t=new Jn(function(){var p=tl(n,s,null,null,u,null);return yn(l(),[p],d())},0,null,fw(e),null,null,t,e.oa.encrypted),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,e.ma&&!e.ma.bf&&(t.g=e.ma.start+e.ma.duration),t}function nl(e,t,n,s,u,l,d,p,g,v,T,b){vt.call(this,[]),this.C=e,this.h=t,this.G=n,this.B=s,this.F=u,this.I=l,this.j=d,this.l=p,this.s=g,this.A=v,this.H=T,this.K=b,Q0(this)}ue(nl,vt),y=nl.prototype,y.getNumReferences=function(){return this.h?this.h.timeline.length:0},y.release=function(){vt.prototype.release.call(this),this.h=null},y.$a=function(e){if(this.h){for(var t=0,n=this.h.timeline,s=0;s<n.length&&n[s].end+this.j<=e;s+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function hw(e,t,n,s,u,l){if(DI(e,u),e.C=l,e.h){if(e.h.dd!==t.dd&&(e.h.timeline=t.timeline,e.h.dd=t.dd,e.h.Ib=t.Ib),e.h.ac!==t.ac&&(e.h.ac=t.ac),n=e.h.timeline,n.length){var d=n[n.length-1];t=t.timeline.filter(function(p){return p.end>d.end})}else t=t.timeline.slice();0<t.length&&e.h.timeline.push.apply(e.h.timeline,S(t)),e.l!==s&&(e.l=s)}else e.h=t,e.j=n,e.l=s;Q0(e)}function DI(e,t){if(e.s!==t){e.s=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&dv(n,t)}}function Q0(e){if(e.h&&!e.o){for(var t=[],n=m(e.h.timeline),s=n.next();!s.done;s=n.next())s=s.value,s.start>=e.l||0>=s.end||t.push(s);e.h.timeline=t,e.$a(e.j)}}y.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,s=0;s<t.length;s++){var u=t[s],l=u.start+this.j;if(u=s<n?t[s+1].start+this.j:this.l===1/0?u.end+this.j:this.l,e>=l&&e<u)return s+this.i}return null},y.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){n=this.h.timeline[e];var s=n.Nk,u=n.Bh+this.h.dd,l=this.j-this.h.Ib,d=this.j+n.end,p=d;e===this.getNumReferences()-1&&this.l!==1/0&&(p=this.C&&.1<Math.abs(p-this.l)?Math.min(p,this.l):this.l);var g=this.h.codecs,v=this.h.mimeType,T=this.h.bandwidth,b=[],M=!1;if(n.rc&&this.h&&this.h.ac&&(M=this.h.ac.includes("$SubNumber$")),M){M=(n.end-n.start)/n.rc;for(var _={},L=0;L<n.rc;_={Nf:void 0,Si:void 0},L++){var O=n.start+M*L,P=O+M;_.Si=L,_.Nf=null,_=new He(this.j+O,this.j+P,function(U){return function(){return t.h?(U.Nf==null&&(U.Nf=pw(t.h.ac,t.G,s,t.B,u,U.Si,t.F,t.I)),U.Nf):[]}}(_),0,null,this.s,l,this.j,this.l,[],"",null,null,_r,this.A),_.codecs=g,_.mimeType=v,_.bandwidth=T,this.H==0?0<L&&_.qd():L%this.H!=0&&_.qd(),b.push(_)}}n=new He(this.j+n.start,p,function(){return 0<b.length||!t.h?[]:pw(t.h.ac,t.G,s,t.B,u,null,t.F,t.I)},0,null,this.s,l,this.j,this.l,b,"",null,null,_r,this.A,0<b.length),n.codecs=g,n.mimeType=v,n.j=d,n.bandwidth=T,this.g[e]=n}return n},y.Eb=function(e){Q0(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}};function pw(e,t,n,s,u,l,d,p){return e=tl(e,t,n,l,s||null,u),yn(d(),[e],p()).map(function(g){return g.toString()})}y.Pe=function(){return this.K};function lu(e){this.o=null,this.A=e,this.G=new Rs,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}lu.prototype.configure=function(e){this.o=e},lu.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},lu.prototype.setManifestType=function(e){this.s=e};function il(e,t){var n,s,u,l,d,p,g;return j(function(v){if(v.g==1)return n=yn(e.i,[PI(e,t)]),s=fn(n,e.o.retryParameters),u=e.A.networkingEngine.request(8,s),zo(e.G,u),le(v,2),D(v,u.promise,4);if(v.g!=2)return l=v.h,d=Ht(l.data),p=JSON.parse(d),p.VERSION==1&&OI(e,p,l.uri),V(v,0);if((g=re(v))&&g.code==7001)return v.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new ht(function(){il(e,t)}),e.g.ia(e.C),ne(v)})}function PI(e,t){if(!e.m.length)return t;t=new en(t);var n=e.B||e.m[0],s=Math.round(e.A.getBandwidthEstimate()),u=t.g;return e.s=="DASH"?(u.add("_DASH_pathway",n),u.add("_DASH_throughput",String(s))):e.s=="HLS"&&(u.add("_HLS_pathway",n),u.add("_HLS_throughput",String(s))),Dy(u)&&Io(t,u),t.toString()}function OI(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var s=t["RELOAD-URI"]||n;e.g=new ht(function(){il(e,s)}),(n=t.TTL)&&(e.C=n),e.g.ia(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function fu(e,t,n,s){var u=e.l.get(t);u||(u=new Map),u.set(n,s),e.l.set(t,u)}lu.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function rl(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var s=[],u=m(e.m),l=u.next(),d={};!l.done;d={ud:void 0},l=u.next())if(d.ud=l.value,l=t.get(d.ud))s.push({Wg:d.ud,location:l});else if(l=e.F.find(function(g){return function(v){return v.Hl==g.ud}}(d))){var p=t.get(l["BASE-ID"]);p&&(l["URI-REPLACEMENT"].bj?(p=new en(p),tf(p,l["URI-REPLACEMENT"].bj),s.push({Wg:d.ud,location:p.toString()})):s.push({Wg:d.ud,location:p}))}for(u=Date.now(),d=m(e.j.keys()),l=d.next();!l.done;l=d.next())l=l.value,p=e.j.get(l),u>p&&e.j.delete(l);if(s=s.filter(function(g){for(var v=m(e.j.keys()),T=v.next();!T.done;T=v.next())if(T.value.includes(new en(g.location).Cb))return!1;return!0}),s.length&&(e.B=s[0].Wg),s=s.map(function(g){return g.location}),!s.length&&e.h)for(u=m(e.h.split(",")),d=u.next();!d.done;d=u.next())(d=t.get(d.value))&&(e.B=e.h,s.push(d));if(!s.length)for(t=m(t.values()),u=t.next();!u.done;u=t.next())s.push(u.value);return n?s:yn(e.i,s)}function Un(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.s=this.o=!1,this.m=new Set}y=Un.prototype,y.release=function(){for(var e=m(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.s=this.o=!1,this.m.clear()},y.Wj=function(){return this.l},y.Hg=function(){return this.j.slice()},y.Bj=function(){return this.i},y.Ph=function(e,t){if(e){if(e.type=="audio")for(var n=m(this.h),s=n.next();!s.done;s=n.next())s=s.value,s.matchedStreams=s.matchedStreams.filter(function(u){return u!==e});else if(e.type=="video")for(n=m(this.g),s=n.next();!s.done;s=n.next())s=s.value,s.matchedStreams=s.matchedStreams.filter(function(u){return u!==e}),s.trickModeVideo&&(s.trickModeVideo.matchedStreams=s.trickModeVideo.matchedStreams.filter(function(u){return u!==e})),s.dependencyStream&&(s.dependencyStream.matchedStreams=s.dependencyStream.matchedStreams.filter(function(u){return u!==e}));else if(e.type==ct)for(n=m(this.j),s=n.next();!s.done;s=n.next())s=s.value,s.matchedStreams=s.matchedStreams.filter(function(u){return u!==e});else if(e.type=="image")for(n=m(this.i),s=n.next();!s.done;s=n.next())s=s.value,s.matchedStreams=s.matchedStreams.filter(function(u){return u!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function gw(e,t){var n=[],s=[],u=[],l=[];e=m(e);for(var d=e.next();!d.done;d=e.next()){var p=d.value;d=new Map(p.audioStreams.map(function(b){return[ng(b),b]}));var g=new Map(p.videoStreams.map(function(b){return[tg(b),b]})),v=new Map(p.textStreams.map(function(b){return[sl(b),b]}));if(p=new Map(p.imageStreams.map(function(b){return[ul(b),b]})),t){var T=Sw(ct);v.set(sl(T),T),T=Sw("image"),p.set(ul(T),T)}n.push(d),s.push(g),u.push(v),l.push(p)}return{Ih:n,$i:s,Xi:u,bi:l}}y.gg=function(e,t,n){n=n===void 0?!1:n;var s=this,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z,ve,de,ae,ge,Te,Ce,Pe;return j(function(Re){if(Re.g==1){if(u=vn,!t&&e.length==1)return l=gw(e,!1),d=l.Ih,p=l.$i,g=l.Xi,v=l.bi,s.h=Array.from(d[0].values()),s.g=Array.from(p[0].values()),s.j=Array.from(g[0].values()),s.i=Array.from(v[0].values()),Re.u(2);for(T=n?s.m.size:0,b=-1,M=0;M<e.length;M++)_=e[M],s.m.has(_.id)||(s.m.add(_.id),b==-1&&(b=M));return b==-1?Re.return():(L=gw(e,!0),O=L.Ih,P=L.$i,U=L.Xi,B=L.bi,D(Re,Promise.all([co(s,s.h,O,b,cu,ho,T),co(s,s.g,P,b,cu,ho,T),co(s,s.j,U,b,cu,ho,T),co(s,s.i,B,b,cu,ho,T)]),2))}if($=0,W=[],s.g.length&&s.h.length)for(te=m(s.h),Z=te.next();!Z.done;Z=te.next())for(ve=Z.value,de=m(s.g),ae=de.next();!ae.done;ae=de.next())ge=ae.value,Te=k1(ve.drmInfos,ge.drmInfos),ve.drmInfos.length&&ge.drmInfos.length&&!Te.length||(Ce=(ve.bandwidth||0)+(ge.bandwidth||0),ve.dependencyStream&&(Ce+=ve.dependencyStream.bandwidth||0),ge.dependencyStream&&(Ce+=ge.dependencyStream.bandwidth||0),Pe=$++,W.push({id:Pe,language:ve.language,disabledUntilTime:0,primary:ve.primary,audio:ve,video:ge,bandwidth:Ce,drmInfos:Te,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(J=s.g.length?s.g:s.h,G=m(J),X=G.next();!X.done;X=G.next())Y=X.value,Q=$++,ie=Y.bandwidth||0,Y.dependencyStream&&(ie+=Y.dependencyStream.bandwidth||0),W.push({id:Q,language:Y.language,disabledUntilTime:0,primary:Y.primary,audio:Y.type==u.ea?Y:null,video:Y.type==u.Ca?Y:null,bandwidth:ie,drmInfos:Y.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});s.l=W,ne(Re)})};function mw(e){var t,n,s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z,ve,de;return j(function(ae){switch(ae.g){case 1:if(t=vn,e.length==1)return ae.return(e[0]);for(n=e.map(function(ge){return new Map(ge.filter(function(Te){return Te.type===t.ea}).map(function(Te){return[ng(Te),Te]}))}),s=e.map(function(ge){return new Map(ge.filter(function(Te){return Te.type===t.Ca}).map(function(Te){return[tg(Te),Te]}))}),u=e.map(function(ge){return new Map(ge.filter(function(Te){return Te.type===t.Ta}).map(function(Te){return[sl(Te),Te]}))}),l=e.map(function(ge){return new Map(ge.filter(function(Te){return Te.type===t.Tf}).map(function(Te){return[ul(Te),Te]}))}),d=m(u),p=d.next();!p.done;p=d.next())g=p.value,v=ww(t.Ta),g.set(sl(v),v);for(T=m(l),b=T.next();!b.done;b=T.next())M=b.value,_=ww(t.Tf),M.set(ul(_),_);return L=new Un,D(ae,co(L,[],n,0,Wc,Kc,0),2);case 2:return O=ae.h,D(ae,co(L,[],s,0,Wc,Kc,0),3);case 3:return P=ae.h,D(ae,co(L,[],u,0,Wc,Kc,0),4);case 4:return U=ae.h,D(ae,co(L,[],l,0,Wc,Kc,0),5);case 5:if(B=ae.h,$=0,P.length&&O.length)for(Y=m(O),Q=Y.next();!Q.done;Q=Y.next())for(ie=Q.value,te=m(P),Z=te.next();!Z.done;Z=te.next())ve=Z.value,de=$++,ve.variantIds.push(de),ie.variantIds.push(de);else for(W=P.concat(O),J=m(W),G=J.next();!G.done;G=J.next())X=G.value,X.variantIds=[$++];return ae.return(P.concat(O).concat(U).concat(B))}})}function co(e,t,n,s,u,l,d){var p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q;return j(function(ie){switch(ie.g){case 1:for(p=[],g=0;g<n.length;g++)g>=s?p.push(new Set(n[g].values())):p.push(new Set);v=m(t),T=v.next();case 2:if(T.done){ie.u(4);break}return b=T.value,D(ie,NI(e,b,n,s,l,p,d),5);case 5:if(M=ie.h,!M)throw new q(2,4,4037);T=v.next(),ie.u(2);break;case 4:for(_=m(p),L=_.next();!L.done;L=_.next())for(O=L.value,P=m(O),U=P.next();!U.done;U=P.next())B=U.value,($=UI(e,B,n,u,l,p))&&t.push($);for(W=m(p),J=W.next();!J.done;J=W.next())for(G=J.value,X=m(G),Y=X.next(),Q={};!Y.done;Q={qh:void 0},Y=X.next())if(Q.qh=Y.value,!eg(Q.qh)&&t.some(function(te){return function(Z){return Z0(e,te.qh,Z)}}(Q)))throw new q(2,4,4037);return ie.return(t)}})}function NI(e,t,n,s,u,l,d){return j(function(p){return p.g==1?(xw(e,n,t,0<d),t.matchedStreams?t.segmentIndex?D(p,yw(t,s+d),2):p.u(2):p.return(!1)):(vw(t,s,u,l,d),p.return(!0))})}function yw(e,t){var n,s,u,l,d,p;return j(function(g){if(g.g==1){for(n=[],s=e.matchedStreams,u=t;u<s.length;u++)l=s[u],n.push(l.createSegmentIndex()),l.trickModeVideo&&!l.trickModeVideo.segmentIndex&&n.push(l.trickModeVideo.createSegmentIndex()),l.dependencyStream&&!l.dependencyStream.segmentIndex&&n.push(l.dependencyStream.createSegmentIndex());return D(g,Promise.all(n),2)}if(e.segmentIndex instanceof Qt)for(d=t;d<s.length;d++)p=s[d],p.segmentIndex&&e.segmentIndex.h.push(p.segmentIndex);ne(g)})}function UI(e,t,n,s,u,l){if(eg(t))return null;var d=s(t);return xw(e,n,d),d.createSegmentIndex&&(d.createSegmentIndex=function(){return j(function(p){return d.segmentIndex?p.u(0):(d.segmentIndex=new Qt,D(p,yw(d,0),0))})}),!d.matchedStreams||!d.matchedStreams.length?null:(vw(d,0,u,l,0),d)}function vw(e,t,n,s,u){var l=e.matchedStreams;for(t+=u;t<l.length;t++){var d=l[t];n(e,d);var p=!0;if(e.type=="audio"&&Bo(e.language,d.language)==0&&(p=!1),p&&(s[t-u].delete(d),d.fullMimeTypes))for(d=m(d.fullMimeTypes.values()),p=d.next();!p.done;p=d.next())e.fullMimeTypes.add(p.value)}}function cu(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=m(t.matchedStreams),s=n.next();!s.done;s=n.next())s=s.value,s.segmentIndex&&(s.segmentIndex.release(),s.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function Wc(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function ho(e,t){function n(d,p){d||(d=[]),p=m(p);for(var g=p.next();!g.done;g=p.next())g=g.value,d.includes(g)||d.push(g);return d}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var s=m(t.keyIds),u=s.next();!u.done;u=s.next())e.keyIds.add(u.value);if(e.originalId==null?e.originalId=t.originalId:(s=t.originalId||"")&&!e.originalId.endsWith(s)&&(e.originalId+=","+s),s=k1(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!s.length)throw new q(2,4,4038);if(e.drmInfos=s,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),s=m(t.closedCaptions),u=s.next();!u.done;u=s.next()){var l=m(u.value);u=l.next().value,l=l.next().value,e.closedCaptions.set(u,l)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=cu(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var d=new Qt,p=m(e.trickModeVideo.matchedStreams),g=p.next();!g.done;g=p.next())d.h.push(g.value.segmentIndex);return e.trickModeVideo.segmentIndex=d,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),ho(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),ho(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=cu(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var d=new Qt,p=m(e.dependencyStream.matchedStreams),g=p.next();!g.done;g=p.next())d.h.push(g.value.segmentIndex);return e.dependencyStream.segmentIndex=d,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),ho(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),ho(e.dependencyStream,t))}function Kc(e,t){var n=e.roles;n||(n=[]);for(var s=m(t.roles),u=s.next();!u.done;u=s.next())u=u.value,n.includes(u)||n.push(u);for(e.roles=n,n=m(t.keyIds),s=n.next();!s.done;s=n.next())e.keyIds.add(s.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,S(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())s=m(n.value),n=s.next().value,s=s.next().value,e.closedCaptions.set(n,s)}function xw(e,t,n,s){s=s!==void 0&&s?n.matchedStreams:[],t=m(t);for(var u=t.next();!u.done;u=t.next()){if(u=BI(e,u.value,n),!u)return;s.push(u)}n.matchedStreams=s}function BI(e,t,n){var s={audio:ng,video:tg,text:sl,image:ul}[n.type],u=null,l=s(n);if(t.has(l))u=t.get(l);else{l={audio:function(v,T){return Z0(e,v,T)},video:function(v,T){return Z0(e,v,T)},text:FI,image:jI}[n.type];for(var d={audio:$I,video:zI,text:VI,image:HI}[n.type],p=m(t.values()),g=p.next();!g.done;g=p.next())g=g.value,!l(n,g)||n.fastSwitching!=g.fastSwitching||u&&!d(n,u,g)||(u=g)}return e.s&&!eg(u)&&t.delete(s(u)),u}function J0(e,t){return e.mimeType!=t.mimeType?!1:bw(e.codecs)===bw(t.codecs)}y.Ii=function(e){this.o=e},y.Mi=function(e){this.s=e};function Z0(e,t,n){return!(!J0(t,n)&&!e.o||t.drmInfos&&!b1(t.drmInfos,n.drmInfos))}function FI(e,t){return t.language?!(e.forced!==t.forced||Bo(e.language,t.language)==0||t.kind!=e.kind):!0}function jI(){return!0}function $I(e,t,n){var s=Tw(e,t,n);if(s===ci)return!0;if(s===Di)return!1;s=Bo(e.language,t.language);var u=Bo(e.language,n.language);if(u>s)return!0;if(u<s)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(s=t.roles.filter(function(l){return e.roles.includes(l)}),u=n.roles.filter(function(l){return e.roles.includes(l)}),u.length>s.length)return!0;if(u.length<s.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(s=ol(e.channelsCount,t.channelsCount,n.channelsCount),s==ci?!0:s==Di?!1:(s=ol(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),s==ci?!0:s==Di?!1:!!(e.bandwidth&&Cw(e.bandwidth,t.bandwidth,n.bandwidth)==ci)))}function zI(e,t,n){var s=Tw(e,t,n);if(s===ci)return!0;if(s===Di)return!1;if(s=ol(e.width*e.height,t.width*t.height,n.width*n.height),s==ci)return!0;if(s==Di)return!1;if(e.frameRate){if(s=ol(e.frameRate,t.frameRate,n.frameRate),s==ci)return!0;if(s==Di)return!1}return!!(e.bandwidth&&Cw(e.bandwidth,t.bandwidth,n.bandwidth)==ci)}function VI(e,t,n){var s=Bo(e.language,t.language),u=Bo(e.language,n.language);if(u>s)return!0;if(u<s)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(s=t.roles.filter(function(l){return e.roles.includes(l)}),u=n.roles.filter(function(l){return e.roles.includes(l)}),u.length>s.length)return!0;if(u.length<s.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function HI(e,t,n){return ol(e.width*e.height,t.width*t.height,n.width*n.height)==ci}function ww(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function Sw(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vt([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function ol(e,t,n){if(t==e&&e!=n)return Di;if(n==e&&e!=t)return ci;if(t>e){if(n<=e||n-e<t-e)return ci;if(n-e>t-e)return Di}else{if(n>e)return Di;if(e-n<e-t)return ci;if(e-n>e-t)return Di}return ig}function Tw(e,t,n){var s=e.mimeType===t.mimeType&&e.codecs===t.codecs,u=e.mimeType===n.mimeType&&e.codecs===n.codecs;return s&&!u?Di:!s&&u?ci:(t=J0(e,t),e=J0(e,n),t&&!e?Di:!t&&e?ci:ig)}function Cw(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?ci:t<e?Di:ig}function eg(e){switch(e.type){case ct:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function tg(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function ng(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function sl(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function ul(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function bw(e){if(!rg.has(e)){var t=Vn(e);rg.set(e,t)}return rg.get(e)}be("shaka.util.PeriodCombiner",Un),Un.prototype.setUseStreamOnce=Un.prototype.Mi,Un.prototype.setAllowMultiTypeVariants=Un.prototype.Ii,Un.prototype.combinePeriods=Un.prototype.gg,Un.prototype.deleteStream=Un.prototype.Ph,Un.prototype.getImageStreams=Un.prototype.Bj,Un.prototype.getTextStreams=Un.prototype.Hg,Un.prototype.getVariants=Un.prototype.Wj;var ci=1,ig=0,Di=-1,rg=new Map;function GI(e,t){var n=new DOMParser,s=XI.value()(e);e=null;try{e=n.parseFromString(s,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function kw(e,t){try{var n=lr(e);return GI(n,t)}catch{return null}}var XI=new je(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Yc(){var e=this;this.j=this.g=null,this.A=[],this.h=null,this.za=1,this.G=[],this.l={mf:"",type:"",profiles:[],nc:null,qb:0,cb:null,be:0},this.s=new Map,this.B=new Map,this.o=new Map,this.C=new Map,this.wa=new Map,this.m=new Un,this.K=0,this.ya=new $i(5),this.L=new ht(function(){if(e.I&&!e.g.continueLoadingWhenPaused&&(e.H.Ja(e.I,"timeupdate"),e.I.paused)){e.H.Aa(e.I,"timeupdate",function(){return Lw(e)});return}Lw(e)}),this.P=new Rs,this.N=null,this.F=[],this.ha=1/0,this.va=!1,this.i=null,this.M=0,this.S=!1,this.H=new Ee,this.I=null,this.U=!1,this.ba="",this.na=function(){return!1},this.W=[],this.ka=new Set}y=Yc.prototype,y.configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.na=t),n&&this.h&&this.h.presentationTimeline.V()&&this.L.Jb(),this.i&&this.i.configure(this.g),this.m&&(this.m.Ii(this.g.dash.multiTypeVariantsAllowed&&xs()),this.m.Mi(this.g.dash.useStreamOnceInPeriodFlattening))},y.start=function(e,t){var n=this,s;return j(function(u){if(u.g==1)return n.va=t.isLowLatencyMode(),n.A=[e],n.j=t,D(u,og(n),2);if(s=u.h,n.j&&sg(n,s),!n.j)throw new q(2,7,7001);return u.return(n.h)})},y.stop=function(){for(var e=m(this.o.values()),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.h=null,this.o.clear(),this.C.clear(),this.s.clear(),this.B.clear(),this.l={mf:"",type:"",profiles:[],nc:null,qb:0,cb:null,be:0},this.m=null,this.L!=null&&(this.L.stop(),this.L=null),this.i&&this.i.destroy(),this.H&&(this.H.release(),this.H=null),this.ka.clear(),this.P.destroy()},y.update=function(){var e=this,t;return j(function(n){if(n.g==1)return le(n,2),D(n,og(e),4);if(n.g!=2)return V(n,0);if(t=re(n),!e.j||!t)return n.return();e.j.onError(t),ne(n)})},y.onExpirationUpdated=function(){},y.onInitialVariantChosen=function(e){if(this.h&&this.h.presentationTimeline.V()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.h.presentationTimeline.Ac();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.K=t.endTime-e,sg(this,0))}}},y.banLocation=function(e){this.i&&this.i.banLocation(e)},y.setMediaElement=function(e){this.I=e};function og(e){var t,n,s,u,l,d,p,g,v,T,b;return j(function(M){return M.g==1?(t=4,n="MPD",s=f5(e),u=e.A,s.length?(u=s,n="Patch",t=6):1<e.A.length&&e.i&&(l=rl(e.i,"Location",!0),l.length&&(u=l)),d=fn(u,e.g.retryParameters),p=Date.now(),D(M,ag(e,d,0,{type:t}),2)):M.g!=3?(g=M.h,e.j?(g.uri&&g.uri!=g.originalUri&&!e.A.includes(g.uri)&&e.A.unshift(g.uri),v=new en(g.uri),e.ba=v.g.toString(),D(M,WI(e,g.data,g.uri,n),3)):M.return(0)):(T=Date.now(),b=(T-p)/1e3,e.ya.sample(1,b),e.ka.clear(),M.return(b))})}function WI(e,t,n,s){var u,l,d,p,g,v,T,b,M,_;return j(function(L){if(L.g==1){if(u=t,l=e.g.dash.manifestPreprocessor,d=fc,l!=d){if(st("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),p=kw(u,s),!p)throw new q(2,4,4001,n);l(p),u=zi(p.outerHTML)}if(g=ra(u,s),!g)throw new q(2,4,4001,n);return v=e.g.dash.manifestPreprocessorTXml,T=cc,v!=T&&v(g),s==="Patch"?L.return(KI(e,g)):e.g.dash.disableXlinkProcessing?L.return(Aw(e,g,n)):(b=e.g.dash.xlinkFailGracefully,M=Xc(g,e.g.retryParameters,b,n,e.j.networkingEngine),zo(e.P,M),D(L,M.promise,2))}return _=L.h,L.return(Aw(e,_,n))})}function Aw(e,t,n){var s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z,ve,de,ae,ge,Te,Ce,Pe,Re,yt,pt,At,ut,et,Et,at,rt,dt,Xt,Vt,Wt,pn,on,It,go,pi,mo,vu,xu;return j(function(sr){switch(sr.g){case 1:for(e.i&&e.i.l.clear(),s=[n],u=[],l=new Map,d=kt(t,"Location"),p=m(d),g=p.next();!g.done;g=p.next())v=g.value,T=v.attributes.serviceLocation,(b=si(v))&&(M=yn(s,[b])[0],T&&(e.i?fu(e.i,"Location",T,M):l.set(T,M)),u.push(M));if(e.i?(_=rl(e.i,"Location",!0),0<_.length&&(s=e.A=_)):u.length&&(s=e.A=u),e.l.mf=t.attributes.id||"",e.l.be=Qe(t,"publishTime",br)||0,e.G=kt(t,"PatchLocation"),L=Promise.resolve(),(O=Yt(t,"ContentSteering"))&&e.j)for(P=O.attributes.defaultServiceLocation,e.i?(e.i.i=s,e.i.h=P):(e.i=new lu(e.j),e.i.configure(e.g),e.i.setManifestType("DASH"),e.i.i=s,e.i.h=P,(U=si(O))&&(Qe(O,"queryBeforeStart",ff,!1)?L=il(e.i,U):il(e.i,U))),B=m(l.keys()),$=B.next();!$.done;$=B.next())W=$.value,J=l.get(W),fu(e.i,"Location",W,J);if(G=kt(t,"BaseURL"),X=!1,e.i)for(Y=m(G),Q=Y.next();!Q.done;Q=Y.next())ie=Q.value,te=ie.attributes.serviceLocation,Z=si(ie),te&&Z&&(fu(e.i,"BaseURL",te,Z),X=!0);if(e.W.splice(0),X&&e.i||(ve=G.map(si),e.W.push.apply(e.W,S(yn(s,ve)))),de=e.i,ae=e.W,ge=function(){return de&&X?rl(de,"BaseURL"):ae.slice()},e.l.cb=ge,Te=0,G&&G.length&&(Te=Qe(G[0],"availabilityTimeOffset",lf)||0),e.l.qb=Te,e.K=Qe(t,"minimumUpdatePeriod",cr,-1),Ce=Qe(t,"availabilityStartTime",br),Pe=Qe(t,"timeShiftBufferDepth",cr),Re=e.g.dash.ignoreSuggestedPresentationDelay,yt=null,Re||(yt=Qe(t,"suggestedPresentationDelay",cr)),pt=e.g.dash.ignoreMaxSegmentDuration,At=null,pt||(At=Qe(t,"maxSegmentDuration",cr)),ut=t.attributes.type||"static",e.h&&e.h.presentationTimeline&&(e.U=e.h.presentationTimeline.V()&&ut=="static"),e.l.type=ut,e.h)for(et=e.h.presentationTimeline,Et=et.Gb(),at=m(e.o.values()),rt=at.next();!rt.done;rt=at.next())dt=rt.value,dt.segmentIndex&&dt.segmentIndex.$a(Et);else Xt=e.g.dash.ignoreMinBufferTime,Vt=0,Xt||(Vt=Qe(t,"minBufferTime",cr)||0),Wt=0,Wt=yt!=null?Math.min(yt,Pe||1/0):0<e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:Math.min(1.5*Vt,Pe||1/0),et=new qe(Ce,Wt,e.g.dash.autoCorrectDrift);return et.Zc(ut=="static"),et.V()&&!isNaN(e.g.availabilityWindowOverride)&&(Pe=e.g.availabilityWindowOverride),Pe==null&&(Pe=1/0),et.Gf(Pe),pn=t.attributes.profiles||"",e.l.profiles=pn.split(","),on={Db:ut!="static",presentationTimeline:et,ra:null,ma:null,oa:null,J:null,bandwidth:0,Jg:!1,qb:Te,nc:null,profiles:pn.split(","),roles:null,Lb:function(){return""}},D(sr,L,2);case 2:return e.M=0,It=Rw(e,on,ge,t,!1),go=It.duration,pi=It.periods,(ut!="static"||e.U)&&It.Rh||et.pb(go||1/0),e.S&&e.va&&et.Ji(e.ha),et.Rg(At||1),e.S&&e.va&&(mo=yt??e.g.defaultPresentationDelay,et.lh(mo)),e.h?(e.h.periodCount=pi.length,e.h.gapCount=e.M,D(sr,Ew(e,pi,!1),4)):D(sr,e.m.gg(pi,on.Db),6);case 6:if(e.h={presentationTimeline:et,variants:e.m.l,textStreams:e.m.Hg(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:QI(t),nextUrl:JI(t),periodCount:pi.length,gapCount:e.M,isLowLatency:e.S,startTime:null},!et.Zi()){sr.u(7);break}return vu=kt(t,"UTCTiming"),D(sr,a5(e,ge,vu),8);case 8:if(xu=sr.h,!e.j)return sr.return();et.Ki(xu);case 7:et.hf(),e.m&&!e.h.presentationTimeline.V()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.h),ZI(e),e5(e,pi),ne(sr)}})}function Ew(e,t,n){var s;return j(function(u){if(u.g==1)return D(u,e.m.gg(t,!0,n),2);e.h.variants=e.m.l,s=e.m.Hg(),0<s.length&&(e.h.textStreams=s),e.h.imageStreams=e.m.i,e.j.filter(e.h),ne(u)})}function KI(e,t){var n,s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z;return j(function(ve){if(ve.g==1){if(n=t.attributes.mpdId,s=Qe(t,"originalPublishTime",br),!n||n!==e.l.mf||s!==e.l.be)throw e.G=[],new q(1,4,4052);for(u=[],l=[],d=new Set,p=m(Xy(t)),g=p.next();!g.done;g=p.next())if(v=g.value,T=cf(v.attributes.sel||""),b=T[T.length-1],M=si(v)||"",b.name==="MPD")if(b.wc==="mediaPresentationDuration"){_=si(v)||"";var de=cr(_);if(de!=null){e.l.nc=de;for(var ae=m(e.s.values()),ge=ae.next();!ge.done;ge=ae.next())ge.value.nc=de}}else if(b.wc==="type"){for(e.h.presentationTimeline.Zc(M=="static"),e.l.type=M,de=m(e.s.values()),ae=de.next();!ae.done;ae=de.next())ae.value.Db=M=="dynamic";M=="static"&&(e.K=-1)}else b.wc==="publishTime"?e.l.be=br(M)||0:b.wc===null&&v.tagName==="add"&&l.push(v);else if(b.name==="PatchLocation")Ky(e.G,v);else if(b.name==="Period")v.tagName==="add"?l.push(v):v.tagName==="remove"&&b.id&&qI(e,b.id);else if(b.name==="SegmentTemplate"){if(ae=cf(v.attributes.sel||""),de=ae[ae.length-1],de.wc){ae=Iw(e,ae),ge=si(v)||"";for(var Te=m(ae),Ce=Te.next();!Ce.done;Ce=Te.next())Ce=e.s.get(Ce.value),qy(Ce.J.Gc,v.tagName,de.wc,ge);de=ae}else de=[];for(L=de,O=m(L),P=O.next();!P.done;P=O.next())U=P.value,d.add(U)}else if(b.name==="SegmentTimeline"||b.name==="S"){for(de=cf(v.attributes.sel||""),de=Iw(e,de),ae=m(de),ge=ae.next();!ge.done;ge=ae.next())ge=e.s.get(ge.value),ge=uu(ge,fo,"SegmentTimeline"),Te=kt(ge,"S"),Ky(Te,v),ge.children=Te;for(B=de,$=m(B),W=$.next();!W.done;W=$.next())J=W.value,d.add(J)}for(G=m(d),X=G.next();!X.done;X=G.next())Y=X.value,Mw(e,Y);for(Q=m(l),ie=Q.next();!ie.done;ie=Q.next())te=ie.value,u.push.apply(u,S(YI(e,te)));return u.length?(e.h.periodCount+=u.length,e.h.gapCount=e.M,D(ve,Ew(e,u,!0),2)):ve.u(2)}e.l.type=="static"&&(Z=e.l.nc,e.h.presentationTimeline.pb(Z||1/0)),ne(ve)})}function YI(e,t){return Rw(e,{Db:e.l.type=="dynamic",presentationTimeline:e.h.presentationTimeline,ra:null,ma:null,oa:null,J:null,bandwidth:0,Jg:!1,qb:e.l.qb,profiles:e.l.profiles,nc:e.l.nc,roles:null,Lb:function(){return""}},e.l.cb,t,!0).periods}function qI(e,t){e.h.periodCount--;for(var n=m(e.s.keys()),s=n.next();!s.done;s=n.next())if(s=s.value,s.startsWith(t)){var u=e.s.get(s);uu(u,fo,"SegmentTimeline").children=[],Mw(e,s),e.s.delete(s)}e.F=e.F.filter(function(l){return l!==t})}function Iw(e,t){var n="",s="",u=-1,l="";t=m(t);for(var d=t.next();!d.done;d=t.next())d=d.value,d.name==="Period"?n=d.id:d.name==="AdaptationSet"?(s=d.id,d.position!==null&&(u=d.position)):d.name==="Representation"&&(l=d.id);if(t=[],l)t.push(n+","+l);else if(s)for(u=m(e.s.values()),e=u.next();!e.done;e=u.next())e=e.value,e.ra.id===n&&e.oa.id===s&&e.J.id&&t.push(n+","+e.J.id);else if(-1<u)for(s=m(e.s.values()),e=s.next();!e.done;e=s.next())e=e.value,e.ra.id===n&&e.oa.position===u&&e.J.id&&t.push(n+","+e.J.id);return t}function Mw(e,t){var n=e.s.get(t),s=e.o.get(t);s.segmentIndex&&s.segmentIndex.$a(e.h.presentationTimeline.Gb());try{var u=dw(n,function(l,d,p,g){return Pw(e,l,d,p,g)},e.o,!0,e.g.dash.initialSegmentLimit,e.wa,n.J.aesKey,null,!0,e.B);s.createSegmentIndex=function(){return j(function(l){if(l.g==1)return s.segmentIndex?l.u(0):D(l,u.Oc(),3);s.segmentIndex=l.h,ne(l)})}}catch(l){if(t=n.J.contentType,t!=ct&&t!="application"&&t!="image"||l.code!=4002)throw l}}function QI(e){var t=Yt(e,"ServiceDescription");if(!t||(e=Yt(t,"Latency"),t=Yt(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function JI(e){if(e=kt(e,"SupplementalProperty"),!e.length)return null;e=m(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function Rw(e,t,n,s,u){var l=t.nc;l||(l=Qe(s,"mediaPresentationDuration",cr),e.l.nc=l);var d=0;e.h&&e.h.presentationTimeline&&e.U&&(d=e.h.presentationTimeline.Xb());var p=[],g=d;s=kt(s,"Period");for(var v=0;v<s.length;v++){var T=s[v],b=s[v+1],M=Qe(T,"start",cr,g),_=T.attributes.id,L=Qe(T,"duration",cr);M=v==0&&M==0&&e.U?d:M;var O=null;if(b){var P=Qe(b,"start",cr);P!=null&&(O=P-M+d)}else l!=null&&(O=l-M+d);if(P=Uy,O&&L&&Math.abs(O-L)>P&&O>L&&e.M++,O==null&&(O=L),!(e.N!==null&&_!==null&&M!==null&&M<e.N)||e.F.includes(_)||v+1==s.length){if(M!==null&&(e.N===null||M>e.N)&&(e.N=M),g=t5(e,t,n,{start:M,duration:O,node:T,bf:O==null||!b}),p.push(g),t.ra.id&&O&&e.wa.set(t.ra.id,O),O==null){g=null;break}g=M+O}}if(u)for(t=m(p),n=t.next();!n.done;n=t.next())n=n.value.id,e.F.includes(n)||e.F.push(n);else e.F=p.map(function(U){return U.id});return l!=null?{periods:p,duration:l+d,Rh:!1}:{periods:p,duration:g,Rh:!0}}function ZI(e){var t=Array.from(e.C.keys()).filter(function(p){return!e.F.includes(p)});t=m(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var s=!0,u=m(e.C.get(n)),l=u.next();!l.done;l=u.next()){l=l.value;var d=e.o.get(l);d&&(d.segmentIndex&&d.segmentIndex.getNumReferences()!=0?s=!1:(e.m&&e.m.Ph(d,n),e.o.delete(l)))}s&&e.C.delete(n)}}function e5(e,t){t=new Set(t.map(function(u){return u.id}));for(var n=m(e.B.keys()),s=n.next();!s.done;s=n.next())s=s.value,t.has(s)||e.B.delete(s)}function t5(e,t,n,s){t.ra=ug(e,s.node,null,n),t.ma=s,t.ra.qb=t.qb,t.ra.id||(t.ra.id="__shaka_period_"+s.start);var u=kt(s.node,"EventStream");n=t.presentationTimeline.Gb(),u=m(u);for(var l=u.next();!l.done;l=u.next())l5(e,s.start,s.duration,l.value,n);for(n=kt(s.node,"SupplementalProperty"),n=m(n),u=n.next();!u.done;u=n.next())u=u.value,u.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(u=al(e,u))&&(t.Lb=u);if(n=kt(s.node,"AdaptationSet").map(function(_,L){return _w(e,t,L,_)}).filter(no),t.Db){u=[],l=m(n);for(var d=l.next();!d.done;d=l.next()){d=m(d.value.Jk);for(var p=d.next();!p.done;p=d.next())u.push(p.value)}if(u.length!=new Set(u).size)throw new q(2,4,4018)}for(u=new Map,l=m(n),d=l.next();!d.done;d=l.next())for(d=m(d.value.pj),p=d.next();!p.done;p=d.next()){var g=m(p.value);p=g.next().value,g=g.next().value,u.set(p,g)}if(u.size)for(l=null,d=m(n),p=d.next();!p.done;p=d.next()){p=p.value,g=[];for(var v=m(p.streams),T=v.next(),b={};!T.done;b={rh:void 0},T=v.next())if(b.rh=T.value,u.has(b.rh.originalId)){l||(l=kt(s.node,"AdaptationSet").map(function(_,L){return _w(e,t,L,_)}).filter(no)),T=m(l);for(var M=T.next();!M.done;M=T.next())(M=M.value.streams.find(function(_){return function(L){return L.originalId==_.rh.originalId}}(b)))&&(M.dependencyStream=u.get(M.originalId),M.originalId+=M.dependencyStream.originalId,g.push(M))}g.length&&p.streams.push.apply(p.streams,S(g))}if(s=n.filter(function(_){return!_.Ah}),n=n.filter(function(_){return _.Ah}),!e.g.disableIFrames){for(n=m(n),u=n.next();!u.done;u=n.next())for(u=u.value,l=u.Ah.split(" "),d=m(s),p=d.next();!p.done;p=d.next())if(p=p.value,l.includes(p.id))for(p=m(p.streams),g=p.next();!g.done;g=p.next())x1(g.value,u.streams)}if(n=qc(e.g.disableAudio,s,"audio"),u=qc(e.g.disableVideo,s,"video"),l=qc(e.g.disableText,s,ct),s=qc(e.g.disableThumbnails,s,"image"),u.length===0&&n.length===0)throw new q(2,4,4004);return{id:t.ra.id,audioStreams:n,videoStreams:u,textStreams:l,imageStreams:s}}function qc(e,t,n){return e||!t.length?[]:t.reduce(function(s,u){return u.contentType!=n||s.push.apply(s,S(u.streams)),s},[])}function _w(e,t,n,s){function u(Z){var ve=Z.attributes["dvb:fontFamily"];Z=Z.attributes["dvb:url"],ve&&Z&&(Z=yn(t.oa.cb(),[Z],t.Lb()),e.j.addFont(ve,Z[0]))}function l(Z){switch(Z){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function d(Z){switch(Z){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.oa=ug(e,s,t.ra,null),t.oa.position=n;var p=!1;n=kt(s,"Role");var g=n.map(function(Z){return Z.attributes.value}).filter(no),v=void 0,T=t.oa.contentType==ct;T&&(v="subtitle"),n=m(n);for(var b=n.next();!b.done;b=n.next()){b=b.value;var M=b.attributes.schemeIdUri;if(M==null||M=="urn:mpeg:dash:role:2011")switch(b=b.attributes.value,b){case"main":p=!0;break;case"caption":case"subtitle":v=b}}var _=kt(s,"EssentialProperty");n=null;var L=!1;b=null,M=!1,_=m(_);for(var O=_.next();!O.done;O=_.next()){O=O.value;var P=O.attributes.schemeIdUri;if(P=="http://dashif.org/guidelines/trickmode")n=O.attributes.value;else if(P=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var U=d(parseInt(O.attributes.value,10));else if(P=="urn:mpeg:mpegB:cicp:ColourPrimaries")var B=l(parseInt(O.attributes.value,10));else P!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(P=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?L=!0:P=="urn:dvb:dash:fontdownload:2014"?u(O):P=="urn:mpeg:dash:urlparam:2014"&&(b=al(e,O))||(M=!0))}if(M)return null;var $=null;for(M=kt(s,"SupplementalProperty"),M=m(M),_=M.next();!_.done;_=M.next())_=_.value,O=_.attributes.schemeIdUri,O=="http://dashif.org/guidelines/last-segment-number"?$=parseInt(_.attributes.value,10)-1:O=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?U=d(parseInt(_.attributes.value,10)):O=="urn:mpeg:mpegB:cicp:ColourPrimaries"?B=l(parseInt(_.attributes.value,10)):O=="urn:dvb:dash:fontdownload:2014"?u(_):O=="urn:mpeg:dash:urlparam:2014"&&(b=al(e,_));b&&(t.Lb=b),b=kt(s,"Accessibility");var W=new Map,J;for(b=m(b),M=b.next();!M.done;M=b.next())if(_=M.value,M=_.attributes.schemeIdUri,_=_.attributes.value,M!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(M!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)M=="urn:mpeg:dash:role:2011"?_!=null&&(g.push(_),_=="captions"&&(v="caption")):M=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(_=="1"?J="visually impaired":_=="2"?J="hard of hearing":_=="9"&&(J="spoken subtitles"));else if(M=1,_!=null)for(_=m(_.split(";")),O=_.next();!O.done;O=_.next()){P=O.value;var G=O=void 0;P.includes("=")?(P=P.split("="),O="svc"+P[0],G=P[1].split(",")[0].split(":").pop()):(O="svc"+M,M++,G=P),W.set(O,Tt(G))}else W.set("svc1","und");else if(M=1,_!=null)for(_=_.split(";"),O=m(_),P=O.next();!P.done;P=O.next()){G=P.value;var X=P=void 0;G.includes("=")?(G=G.split("="),P=G[0].startsWith("CC")?G[0]:"CC"+G[0],X=G[1]||"und"):(P="CC"+M,_.length==2?M+=2:M++,X=G),W.set(P,Tt(X))}else W.set("CC1","und");b=kt(s,"ContentProtection");var Y=nw(b,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);t.oa.encrypted=0<b.length;var Q=Tt(t.oa.language||"und"),ie=t.oa.label,te=new Map;if(s=kt(s,"Representation"),!e.g.ignoreSupplementalCodecs){for(b=[],M=m(s),_=M.next();!_.done;_=M.next())O=_.value,(_=Cr(O,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(O=Hi(O),O.attributes.codecs=_.split(" ").join(","),O.attributes.id&&(O.attributes.supplementalId=O.attributes.id+"_supplementalCodecs"),b.push(O));s.push.apply(s,S(b))}if(b=s.map(function(Z){var ve=n5(e,t,Y,v,Q,ie,p,g,W,Z,J,$);return ve&&(ve.hdr=ve.hdr||U,ve.colorGamut=ve.colorGamut||B,ve.fastSwitching=L,Z=Z.attributes.dependencyId)?(ve.baseOriginalId=Z,te.set(Z,ve),null):ve}).filter(function(Z){return!!Z}),b.length==0&&te.size==0){if(n=t.oa.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||T||n)return null;throw new q(2,4,4003)}if(!t.oa.contentType||t.oa.contentType=="application")for(t.oa.contentType=Ow(b[0].mimeType,b[0].codecs),T=m(b),M=T.next();!M.done;M=T.next())M.value.type=t.oa.contentType;for(T=t.oa.id||"__fake__"+e.za++,M=m(b),_=M.next();!_.done;_=M.next()){for(_=_.value,O=m(Y.drmInfos),P=O.next();!P.done;P=O.next())P=P.value,P.keyIds=P.keyIds&&_.keyIds?new Set([].concat(S(P.keyIds),S(_.keyIds))):P.keyIds||_.keyIds;_.groupId=T}return s=s.map(function(Z){return Z.attributes.supplementalId||Z.attributes.id}).filter(no),{id:T,contentType:t.oa.contentType,language:Q,wm:p,streams:b,drmInfos:Y.drmInfos,Ah:n,Jk:s,pj:te}}function al(e,t){if((t=Gi(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&Qe(t,"useMPDUrlQuery",ff,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.ba:n.split("&").map(function(s){if(s=="$querypart$")return e.ba;var u=/\$query:(.*?)\$/g.exec(s);if(u&&u.length==2){u=u[1];var l=new ms(e.ba).get(u);if(l.length)return u+"="+l[0]}return s}).join("&")}}return null}function n5(e,t,n,s,u,l,d,p,g,v,T,b){t.J=ug(e,v,t.oa,null);var M=t.J.id;if(e.ha=Math.min(e.ha,t.J.qb),e.S=0<e.ha,!u5(t.J))return null;var _=t.ma.start;t.bandwidth=Qe(v,"bandwidth",dr)||0,t.roles=p;var L=kt(v,"SupplementalProperty"),O=kt(v,"EssentialProperty"),P=kt(v,"ContentProtection");v=null;var U=O.find(function(ae){return ae.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(U||(U=L.find(function(ae){return ae.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(v=al(e,U)),v&&(t.Lb=v),U=t.J.contentType,v=U==ct||U=="application",U=U=="image",P.length&&(t.oa.encrypted=!0);try{var B=void 0;if(n.cg){var $=t.J.cb,W=t.Lb,J=yn($(),[n.cg.kk],W()),G=fn(J,e.g.retryParameters);B={bitsKey:128,blockCipherMode:"CBC",iv:n.cg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var ae,ge,Te;return j(function(Ce){if(Ce.g==1)return D(Ce,ag(e,G,6),2);if(Ce.g!=3){if(ae=Ce.h,!ae.data||ae.data.byteLength!=16)throw new q(2,4,4049);return ge={name:"AES-CBC"},Te=B,D(Ce,f.crypto.subtle.importKey("raw",ae.data,ge,!0,["decrypt"]),3)}Te.cryptoKey=Ce.h,B.fetchKey=void 0,ne(Ce)})}}}if(t.J.aesKey=B,$=function(ae,ge,Te,Ce){return Pw(e,ae,ge,Te,Ce)},t.J.Cd)var X=CI(t,$,B);else if(t.J.tc)X=kI(t,e.o,B);else if(t.J.Gc)X=dw(t,$,e.o,!!e.h,e.g.dash.initialSegmentLimit,e.wa,B,b,!1,e.B);else{var Y=t.ma.duration||0,Q=t.J.cb,ie=t.J.mimeType,te=t.J.codecs;X={endTime:-1,timeline:-1,Oc:function(){var ae=qf(_,Y,Q());return ae.Eb(function(ge){ge.mimeType=ie,ge.codecs=te}),Promise.resolve(ae)},timescale:1}}}catch(ae){if((v||U)&&ae.code==4002)return null;throw ae}b=fI(P,n,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI),b=new Set(b?[b]:[]),P=!1,L.some(function(ae){return ae.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&ae.attributes.value=="JOC"})&&(P=!0),L=!1,v&&(L=p.includes("forced_subtitle")||p.includes("forced-subtitle"));var Z;if(U&&((O=O.find(function(ae){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(ae.attributes.schemeIdUri)}))&&(Z=O.attributes.value),!Z))return null;var ve;v=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(v.includes("hvc1.2.4.L153.B0")||v.includes("hev1.2.4.L153.B0"))&&(ve="PQ"),O=t.J.id?t.ra.id+","+t.J.id:"",e.G.length&&M&&e.s.set(t.ra.id+","+M,r5(t)),t.J.yf&&i5(e,t.J.yf,X,t.presentationTimeline),X.endTime!=-1&&t.ra.id!=null&&t.J.id!=null&&((M=e.B.get(t.ra.id))?(M.endTime=X.endTime,M.ah.includes(t.J.id)||M.ah.push(t.J.id),e.B.set(t.ra.id,M)):e.B.set(t.ra.id,{endTime:X.endTime,timeline:X.timeline,ah:[t.J.id]}));var de=O&&e.o.has(O)?e.o.get(O):{id:e.za++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){de.segmentIndex&&(de.segmentIndex.release(),de.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:v,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:s,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:b,language:u,originalLanguage:t.oa.language,label:l,type:t.oa.contentType,primary:d,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:p,forced:L,channelsCount:t.J.qf,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:P,closedCaptions:g,hdr:ve,colorGamut:void 0,videoLayout:void 0,tilesLayout:Z,accessibilityPurpose:T,external:!1,fastSwitching:!1,fullMimeTypes:new Set([rn(t.J.mimeType,t.J.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return de.createSegmentIndex=function(){var ae;return j(function(ge){if(ge.g==1)return de.segmentIndex?ge.u(0):(ae=de,D(ge,X.Oc(),3));ae.segmentIndex=ge.h,ne(ge)})},O&&t.Db&&!e.o.has(O)&&(t=t.ra.id||"",e.C.has(t)||e.C.set(t,[]),e.o.set(O,de),e.C.get(t).push(O)),de}function i5(e,t,n,s){if(!e.ka.has(t)){e.ka.add(t);var u=Qe(t,"presentationTime",bn)||0,l=Yt(t,"UTCTiming"),d;(d=l&&l.attributes.schemeIdUri)&&(l=l.attributes.schemeIdUri,d=!(l==="urn:mpeg:dash:utc:http-ntp:2014"||l==="urn:mpeg:dash:utc:ntp:2014"||l==="urn:mpeg:dash:utc:sntp:2014")),d?t=1e3*(Qe(t,"wallClockTime",br)||0):(t=Qe(t,"wallClockTime",bn)||0,t=xv(t)),n=new Date(t-u/n.timescale*1e3),u=n.getTime()/1e3,isNaN(u)||(s.o||s.mh(u),s=new Map().set("detail",{wallClockTime:t,programStartDate:n}),s=new Ie("prft",s),e.j.onEvent(s))}}function r5(e){function t(n){return n?(n=Qr(n),n.Cd=null,n.tc=null,n.Gc=Yh(n.Gc),n.yf=null,n):null}return e=Qr(e),e.ra=t(e.ra),e.oa=t(e.oa),e.J=t(e.J),e.ma&&(e.ma=Qr(e.ma),e.ma.node=null),e}function Lw(e){var t,n;return j(function(s){switch(s.g){case 1:return t=0,le(s,2),D(s,og(e),4);case 4:t=s.h,V(s,3);break;case 2:if(n=re(s),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),s.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return s.return();e.j.onManifestUpdated(),sg(e,t),ne(s)}})}function sg(e,t){if(!(0>e.K)){var n=e.K;0<=e.g.updatePeriod&&(n=e.g.updatePeriod),e.L.ia(Math.max(n-t,gi(e.ya)))}}function ug(e,t,n,s){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,qf:null,audioSamplingRate:null,qb:0,Df:1,encrypted:!1},s=s||n.cb;var u=t.attributes.id,l=t.attributes.supplementalId,d=kt(t,"BaseURL"),p,g=!1;if(e.i)for(var v=m(d),T=v.next();!T.done;T=v.next()){var b=T.value;T=b.attributes.serviceLocation,b=si(b),T&&b&&(fu(e.i,u,T,b),g=!0)}g&&e.i||(p=d.map(si));var M=e.i;e=t.attributes.contentType||n.contentType,v=t.attributes.mimeType||n.mimeType,T=Gp([t.attributes.codecs||n.codecs]).join(","),b=Qe(t,"frameRate",z4)||n.frameRate;var _=t.attributes.sar||n.pixelAspectRatio,L=o5(kt(t,"InbandEventStream"),n.emsgSchemeIdUris),O=kt(t,"AudioChannelConfiguration");O=s5(O)||n.qf;var P=Qe(t,"audioSamplingRate",bn)||n.audioSamplingRate;e||(e=Ow(v,T));var U=Yt(t,"SegmentBase"),B=Yt(t,"SegmentTemplate"),$=U&&Qe(U,"availabilityTimeOffset",lf)||0,W=B&&Qe(B,"availabilityTimeOffset",lf)||0,J=d&&d.length&&Qe(d[0],"availabilityTimeOffset",lf)||0;$=n.qb+J+$+W,W=null,(J=Yt(t,"SegmentSequenceProperties"))&&(J=Qe(J,"cadence",dr))&&(W=J),J=t.attributes.label;var G=kt(t,"Label");return G&&G.length&&(G=G[0],an(G)&&(J=an(G))),{cb:function(){return yn(s(),d.length?M&&g?rl(M,u):p||[]:[])},Cd:U||n.Cd,tc:Yt(t,"SegmentList")||n.tc,Gc:B||n.Gc,yf:Yt(t,"ProducerReferenceTime")||n.yf,width:Qe(t,"width",bn)||n.width,height:Qe(t,"height",bn)||n.height,contentType:e,mimeType:v,codecs:T,frameRate:b,pixelAspectRatio:_,emsgSchemeIdUris:L,id:l||u,originalId:u,language:t.attributes.lang,qf:O,audioSamplingRate:P,qb:$,Ze:null,Df:W||n.Df,label:J||null,encrypted:!1}}function o5(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function s5(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=t.attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(t,10),!t)continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],t=parseInt(t,16),!t)continue;for(var s=0,u=0;u<n.length;u++)t&1<<u&&(s+=n[u]);if(s)return s;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),t=parseInt(t,16),!t)continue;for(u=s=0;u<n.length;u++)t&1<<u&&(s+=n[u]);if(s)return s;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&0<t&&t<n.length)return n[t]}}return null}function u5(e){var t=e.Cd?1:0;return t+=e.tc?1:0,t+=e.Gc?1:0,t==0?e.contentType==ct||e.contentType=="application":(t!=1&&(e.Cd&&(e.tc=null),e.Gc=null),!0)}function Dw(e,t,n,s){var u,l,d,p,g,v,T;return j(function(b){if(b.g==1)return u=[qn(n)],l=yn(t(),u),d=fn(l,e.g.retryParameters),d.method=s,p=e.j.networkingEngine.request(4,d,{isPreload:e.na()}),zo(e.P,p),D(b,p.promise,2);if(g=b.h,s=="HEAD"){if(!g.headers||!g.headers.date)return b.return(0);v=g.headers.date}else v=Ht(g.data);return T=Date.parse(v),isNaN(T)?b.return(0):b.return(T-Date.now())})}function a5(e,t,n){var s,u,l,d,p,g,v,T;return j(function(b){switch(b.g){case 1:s=n.map(function(M){return{scheme:M.attributes.schemeIdUri,value:M.attributes.value}}),u=e.g.dash.clockSyncUri,!s.length&&u&&s.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:u}),l=m(s),d=l.next();case 2:if(d.done){b.u(4);break}switch(p=d.value,le(b,5),g=p.scheme,v=p.value,g){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return b.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return b.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return T=Date.parse(v),b.return(isNaN(T)?0:T-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":ft("NTP UTCTiming scheme is not supported");break;default:ft("Unrecognized scheme in UTCTiming element",g)}b.u(9);break;case 7:return D(b,Dw(e,t,v,"HEAD"),10);case 10:return b.return(b.h);case 8:return D(b,Dw(e,t,v,"GET"),11);case 11:return b.return(b.h);case 9:V(b,3);break;case 5:re(b);case 3:d=l.next(),b.u(2);break;case 4:return ft("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),b.return(0)}})}function l5(e,t,n,s,u){var l=s.attributes.schemeIdUri||"",d=s.attributes.value||"",p=Qe(s,"timescale",bn)||1,g=Qe(s,"presentationTimeOffset",bn)||0;s=m(kt(s,"Event"));for(var v=s.next();!v.done;v=s.next()){v=v.value;var T=Qe(v,"presentationTime",bn)||0,b=Qe(v,"duration",bn)||0;T=Math.max((T-g)/p+t,t),b=T+b/p,n!=null&&(T=Math.min(T,t+n),b=Math.min(b,t+n)),b<u||(v={schemeIdUri:l,value:d,startTime:T,endTime:b,id:v.attributes.id||"",timescale:p,eventElement:Qy(v),eventNode:Yh(v)},e.j.onTimelineRegionAdded(v))}}function Pw(e,t,n,s,u){var l,d,p,g;return j(function(v){return v.g==1?(l=Wi,d=u?0:1,p=Pa(t,n,s,e.g.retryParameters),D(v,ag(e,p,l,{type:d}),2)):(g=v.h,v.return(g.data))})}function Ow(e,t){return t=rn(e,t),ca(t)?ct:e.split("/")[0]}function ag(e,t,n,s){return s||(s={}),s.isPreload=e.na(),t=e.j.networkingEngine.request(n,t,s),zo(e.P,t),t.promise}function f5(e){var t=e.l.be;if(!e.l.mf||!t||!e.G.length)return[];var n=Date.now()/1e3,s=e.G.filter(function(u){return u=bn(u.attributes.ttl),!u||t+u>n}).map(si).filter(no);return s.length?yn(e.A,s):[]}be("shaka.dash.DashParser",Yc),Vo("application/dash+xml",function(){return new Yc}),Vo("video/vnd.mpeg.dash.mpd",function(){return new Yc});function Qc(){}be("shaka.dependencies",Qc),Qc.has=function(e){return lg.has(e)},Qc.add=function(e,t){if(!Uw[e])throw Error(e+" is not supported");e==Nw?st("mux.js","mux.js is no longer used in Shaka Player."):lg.set(e,function(){return t})};var Nw="muxjs",Uw={xm:Nw,ISOBoxer:"ISOBoxer"};Qc.Allowed=Uw;var lg=new Map([["ISOBoxer",function(){return f.ISOBoxer}]]);function Dt(){this.j=new je(function(){return["Oculus","Quest"].some(function(e){return navigator.userAgent.includes(e.toLowerCase())})?"VR":navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android"?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new je(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function gr(){var e=f.ManagedMediaSource||f.MediaSource;return!!(e&&e.isTypeSupported)}y=Dt.prototype,y.dc=function(){return!!navigator.mediaCapabilities},y.La=function(){return this.j.value()},y.Da=function(){return this.l.value()},y.fe=function(){return!1},y.Ai=function(){return!1},y.$e=function(){return!1},y.Bi=function(){return!1},y.ee=function(){return!1},y.bd=function(){return!0},y.cd=function(){return!0},y.je=function(){return!0},y.Gi=function(){return 0},y.ic=function(){return Promise.resolve({width:1/0,height:1/0})},y.Pi=function(){return!1},y.ph=function(){return!1},y.Ua=function(e){var t=this.La();return(t==="TV"||t==="CONSOLE"||t==="CAST")&&(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},y.uh=function(){return!!f.indexedDB},y.xi=function(){return[]};function Bw(e){return Be(),f.matchMedia!==void 0&&f.matchMedia("(color-gamut: p3)").matches?e?"HLG":"PQ":"SDR"}y.Wi=function(){return!1},y.li=function(){return!1},y.fh=function(){return!1},y.If=function(){return!0},y.mi=function(){return!1},y.Vi=function(){return!0},y.$c=function(){return!1},y.Qg=function(e){return e==="com.apple.fps"},y.toString=function(){return"Device: "+this.Nb()+" v"+this.xa()+"; Type: "+this.La()};function fg(){Dt.call(this),this.g=new je(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new je(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||1<navigator.maxTouchPoints?"xr"in navigator?"APPLE_VR":"MOBILE":"xr"in navigator?"APPLE_VR":"DESKTOP"})}ue(fg,Dt),y=fg.prototype,y.xa=function(){return this.g.value()},y.Nb=function(){return"Apple Browser"},y.La=function(){return this.h.value()},y.Da=function(){return"WEBKIT"},y.dc=function(){return!1},y.fe=function(e,t){return t==="audio"},y.$e=function(){return!0},y.Bi=function(e){return e==="audio"},y.Ua=function(e){return Dt.prototype.Ua.call(this,e),e.abr.minTimeToSwitch=.5,e},y.Wi=function(){return!0},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||1<navigator.maxTouchPoints||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(St=function(){return new fg});function cg(){if(!Fw())throw Error("Not a Chromecast device!");Dt.call(this),this.h=new je(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new je(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return e=e.toLowerCase(),e.includes("android")?jw:e.includes("fuchsia")?$w:dg})}ue(cg,Dt),y=cg.prototype,y.xa=function(){return this.h.value()},y.Nb=function(){return"Chromecast with "+this.g.value()},y.La=function(){return"CAST"},y.Da=function(){return"CHROMIUM"},y.dc=function(){return Dt.prototype.dc.call(this)&&this.g.value()!==dg},y.cd=function(){return this.g.value()!==dg},y.Gi=function(){switch(this.g.value()){case jw:return 0;case $w:return 3;default:return 1}},y.ic=function(){var e,t,n,s,u;return j(function(l){switch(l.g){case 1:if(e=f.cast&&cast.__platform__&&cast.__platform__.canDisplayType,t={width:1280,height:720},le(l,2),!(n=e)){l.u(4);break}return D(l,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:n=l.h;case 4:if(n){t.width=3840,t.height=2160,l.u(6);break}if(!(s=e)){l.u(7);break}return D(l,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:s=l.h;case 7:s&&(t.width=1920,t.height=1080);case 6:V(l,3);break;case 2:u=re(l),En("Failed to check canDisplayType:",u);case 3:return l.return(t)}})},y.Ua=function(e){return Dt.prototype.Ua.call(this,e),e.streaming.stallSkip=0,e},y.uh=function(){return!1},y.$c=function(){return!0};function Fw(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}var jw="Android",$w="Fuchsia",dg="Linux";Fw()&&(St=function(){return new cg});function hg(){Dt.call(this);var e=this;this.i=new je(function(){var t=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return t?parseInt(t[2],10):null}),this.g=new je(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new je(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("win32"):!1}),this.s=new je(function(){return navigator.userAgent.match(/Edge?\//)?!e.h.value():!0}),this.o=new je(function(){return navigator.userAgent.includes("sony.hbbtv.tv")}),this.m=new je(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android":!!navigator.userAgent.includes("Android")})}ue(hg,Dt),y=hg.prototype,y.xa=function(){return this.i.value()},y.Nb=function(){return this.g.value()},y.fe=function(e){return cp(e)?this.g.value()==="Edge"&&this.h.value():!1},y.Ai=function(){return this.g.value()==="Edge"&&this.h.value()},y.$e=function(){return this.g.value()==="Edge"&&this.h.value()},y.cd=function(){return this.s.value()},y.Ua=function(e){if(Dt.prototype.Ua.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return this.m.value()&&(e.drm.defaultAudioRobustnessForWidevine="",e.drm.defaultVideoRobustnessForWidevine=""),e},y.fh=function(){return this.g.value()==="Edge"||this.o.value()},y.$c=function(){if(this.Da()==="GECKO"){var e=this.xa();return e!==null?100<=e:Dt.prototype.$c.call(this)}return Dt.prototype.$c.call(this)},y.Qg=function(e){return this.Da()==="GECKO"?e.startsWith("com.microsoft.playready.recommendation"):Dt.prototype.Qg.call(this,e)},xe=function(){return new hg};function pg(){Dt.apply(this,arguments)}ue(pg,Dt),y=pg.prototype,y.xa=function(){return null},y.Nb=function(){return"Hisense"},y.La=function(){return"TV"},y.dc=function(){return!1},y.ic=function(){var e={width:1920,height:1080},t=null;if(f.Hisense_Get4KSupportState)try{t=f.Hisense_Get4KSupportState()}catch{}return t==null&&(t=navigator.userAgent.includes("UHD")),t&&(e.width=3840,e.height=2160),Promise.resolve(e)},y.Ua=function(e){return Dt.prototype.Ua.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(St=function(){return new pg});function gg(){Dt.call(this),this.g=new je(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}ue(gg,Dt),y=gg.prototype,y.Nb=function(){return"PlayStation"},y.La=function(){return"CONSOLE"},y.Da=function(){return"WEBKIT"},y.xa=function(){return this.g.value()},y.dc=function(){return!1},y.bd=function(){return!1},y.cd=function(){return!1},y.ph=function(){return this.xa()===4},y.ic=function(){var e,t,n,s,u;return j(function(l){switch(l.g){case 1:return e={width:1920,height:1080},t=!1,le(l,2),D(l,f.msdk.device.getDisplayInfo(),4);case 4:n=l.h,t=n.resolution==="4K",V(l,3);break;case 2:return re(l),le(l,5),D(l,f.msdk.device.getDisplayInfoImmediate(),7);case 7:s=l.h,t=s.resolution==="4K",V(l,3);break;case 5:u=re(l),ft("PlayStation: Failed to get the display info:",u);case 3:return t&&(e.width=3840,e.height=2160),l.return(e)}})},y.Ua=function(e){return Dt.prototype.Ua.call(this,e),this.xa()===4&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},y.fh=function(){return this.xa()===4},y.If=function(){return this.xa()!==4},navigator.userAgent.includes("PlayStation")&&(St=function(){return new gg});function mg(){Dt.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}ue(mg,Dt),y=mg.prototype,y.xa=function(){return this.g},y.Nb=function(){return"Tizen"},y.Da=function(){return"CHROMIUM"},y.La=function(){return"TV"},y.fe=function(){return!0},y.ee=function(){return this.xa()===3},y.dc=function(){return!1},y.bd=function(){var e=this.xa();return e!==null?4<=e:Dt.prototype.bd.call(this)},y.cd=function(){return!1},y.je=function(){return this.g&&this.h?this.g===5?5<=this.h:5<this.g:Dt.prototype.je.call(this)},y.ic=function(){var e=f.devicePixelRatio;e={width:1920<f.screen.width*e?3840:1920,height:1080<f.screen.height*e?2160:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var t=webapis.systeminfo.getMaxVideoResolution();e.width=t.width,e.height=t.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{ft("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},y.Ua=function(e){return Dt.prototype.Ua.call(this,e),e.drm.ignoreDuplicateInitData=this.xa()!==2,this.xa()===3&&(e.streaming.crossBoundaryStrategy="reset_to_encrypted"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},y.xi=function(){var e=[];return this.g!==null&&5>this.g&&e.push("opus"),e},y.li=function(){return!0},y.mi=function(){return this.xa()===3},navigator.userAgent.includes("Tizen")&&(St=function(){return new mg});function du(){Dt.apply(this,arguments)}ue(du,Dt),du.prototype.xa=function(){return null},du.prototype.Nb=function(){return"Vizio"},du.prototype.La=function(){return"TV"},du.prototype.dc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(St=function(){return new du});function yg(){Dt.call(this),this.h=new je(function(){return navigator.userAgent.includes("DT_STB_BCM")}),this.g=new je(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}ue(yg,Dt),y=yg.prototype,y.xa=function(){return this.g.value()},y.Nb=function(){return"WebKit STB"},y.La=function(){return"TV"},y.Da=function(){return"WEBKIT"},y.dc=function(){return!1},y.bd=function(){var e=this.g.value();return e!==null?15<=e:!0},y.ic=function(){return Promise.resolve({width:f.screen.width*f.devicePixelRatio,height:f.screen.height*f.devicePixelRatio})},y.If=function(){return!this.h.value()},(navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("DT_STB_BCM")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||1<navigator.maxTouchPoints||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(St=function(){return new yg});function vg(){Dt.call(this),this.g=c5()}ue(vg,Dt),y=vg.prototype,y.xa=function(){return this.g},y.Nb=function(){return"WebOS"},y.La=function(){return"TV"},y.Da=function(){return"CHROMIUM"},y.dc=function(){return!1},y.bd=function(){var e=this.xa();return e!==null?3<e:Dt.prototype.bd.call(this)},y.cd=function(){var e=this.xa();return e!==null?6<e:Dt.prototype.cd.call(this)},y.je=function(){var e=this.xa();return e!==null?3<e:Dt.prototype.je.call(this)},y.ic=function(){var e={width:1920,height:1080};try{var t=JSON.parse(f.PalmSystem.deviceInfo);e.width=Math.max(1920,t.screenWidth),e.height=Math.max(1080,t.screenHeight)}catch{ft("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},y.Ua=function(e){return Dt.prototype.Ua.call(this,e),this.xa()===3&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e};function c5(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}y.Vi=function(){return!1},y.$c=function(){var e=this.xa();return e!==null?6<=e:Dt.prototype.$c.call(this)},navigator.userAgent.includes("Web0S")&&(St=function(){return new vg});function xg(){Dt.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}ue(xg,Dt),y=xg.prototype,y.xa=function(){return this.h},y.Nb=function(){return"Xbox"},y.La=function(){return"CONSOLE"},y.Da=function(){return this.g?"EDGE":"CHROMIUM"},y.fe=function(){return!0},y.$e=function(){return!0},y.Pi=function(){return this.g},y.ic=function(){var e={width:1920,height:1080},t=zw();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,s=t.Media.Protection.ProtectionCapabilityResult;t=null;do t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(t===s.maybe);t===s.probably&&(e.width=3840,e.height=2160)}catch{ft("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},y.Ua=function(e){return Dt.prototype.Ua.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},y.uh=function(){return!1};function zw(){var e=null;try{e=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows}catch{}return e}(navigator.userAgent.includes("Xbox One")||zw()!==null)&&(St=function(){return new xg});function Vw(e,t,n){this.type=e,this.aa=t,this.segments=n||null}function Jc(e,t,n,s){this.id=e,this.name=t,this.attributes=n,this.value=s===void 0?null:s}Jc.prototype.toString=function(e){function t(u){return u.name+"="+(isNaN(Number(u.value))?'"'+u.value+'"':u.value)}var n="#"+this.name,s=this.attributes?this.attributes.filter(function(u){return e?!e.has(u.name):!0}).map(t):[];return this.value&&s.unshift(this.value),0<s.length&&(n+=":"+s.join(",")),n};function Hw(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function hu(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function Ne(e,t,n){return(e=hu(e,t))?e.value:n||null}function Pt(e,t){if(e=hu(e,t),!e)throw new q(2,4,4023,t);return e.value}function Gw(e,t,n){n=n===void 0?[]:n,this.aa=t,this.g=e,this.rc=n}function Zc(e,t){this.name=e,this.value=t}function Pi(e,t){return e.filter(function(n){return n.name==t})}function Xw(e,t){return e.filter(function(n){return Pt(n,"TYPE")==t})}function Sn(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function pu(e,t,n){return n=n===void 0?0:n,(e=Sn(e,t))?Number(e.value):n}function po(e,t,n){return t?Ww(e,[t],n):[]}function Ww(e,t,n){if(!t.length)return[];var s=t;return n&&n.size&&(s=t.map(function(u){return Kw(u,n)})),yn(e,s)}function Kw(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=m(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;var u=s.slice(2,s.length-1),l=t.get(u);if(l)e=e.replace(s,l);else throw new q(2,4,4039,u)}}return e}function d5(){this.g=0}function wg(e,t){t=Ht(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new q(2,4,4015);t=0;for(var s=!0,u=m(n),l=u.next();!l.done;l=u.next())if(l=l.value,/^#(?!EXT)/m.test(l)||s)s=!1;else if(l=Sg(e,l),--e.g,Yw.includes(l.name)){t=1;break}else l.name=="EXT-X-STREAM-INF"&&(s=!0);for(u=[],s=!0,l=0;l<n.length;l++){var d=n[l],p=n[l+1];if(/^#(?!EXT)/m.test(d)||s)s=!1;else{if(d=Sg(e,d),h5.includes(d.name)){if(t!=1)throw new q(2,4,4017);d=n.splice(l,n.length-l),n=[],s=[],l=[],p=null,d=m(d);for(var g=d.next();!g.done;g=d.next())g=g.value,/^(#EXT)/.test(g)?(g=Sg(e,g),Yw.includes(g.name)?u.push(g):g.name=="EXT-X-MAP"?p=g:g.name=="EXT-X-PART"?l.push(g):g.name=="EXT-X-PRELOAD-HINT"?Ne(g,"TYPE")=="PART"?l.push(g):Ne(g,"TYPE")=="MAP"&&(g.name="EXT-X-MAP",p=g):s.push(g)):/^#(?!EXT)/m.test(g)||(g=g.trim(),p&&s.push(p),n.push(new Gw(g,s,l)),s=[],l=[]);return l.length&&(p&&s.push(p),n.push(new Gw("",s,l))),new Vw(t,u,n)}u.push(d),d.name=="EXT-X-STREAM-INF"&&(d.attributes.push(new Zc("URI",p)),s=!0)}}return new Vw(t,u)}function Sg(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new q(2,4,4016,t);t=n[1];var s=n[2];n=[];var u;if(s){s=new ws(s);var l;(l=Do(s,/^([^,=]+)(?:,|$)/g))&&(u=l[1]);for(var d=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;l=Do(s,d);)n.push(new Zc(l[1],l[2]||l[3])),Ss(s)}return new Jc(e,t,n,u)}var Yw="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),h5="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");function qw(){}function Qw(e,t){try{var n=ed(e);return Ms({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(s){return $o(s)}}function ed(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new q(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new q(2,1,1004,e);var n=t[0];e=f.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var s=!1;1<t.length&&t[t.length-1]=="base64"&&(s=!0,t.pop());var u;return s?u=Ii(e):u=zi(e),{data:u,contentType:n}}be("shaka.net.DataUriPlugin",qw),qw.parse=Qw,Ir("data",Qw);function td(){var e=this;this.g=this.h=null,this.G=1,this.A=new Map,this.K=new Map,this.B=new Map,this.B.set("video",new Map),this.B.set("audio",new Map),this.B.set(ct,new Map),this.B.set("image",new Map),this.$b=new Map().set("com.apple.streamingkeydelivery",function(t,n,s){return U5(e,t,n,s)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(t){var n=Pt(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var s="cenc";n=="SAMPLE-AES"&&(s="cbcs"),n=Pt(t,"URI"),n=ed(n.split("?")[0]),n=Ze(n.data),s=Tr("com.widevine.alpha",s,[{initDataType:"cenc",initData:n}]),(t=Ne(t,"KEYID"))&&s.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(s)}else t=Promise.resolve(null);return t}).set("com.microsoft.playready",function(t){var n=Pt(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var s="cenc";n=="SAMPLE-AES"&&(s="cbcs"),t=Pt(t,"URI"),t=ed(t.split("?")[0]),t=Ze(t.data),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),n=Pf(t,n,new Set,0),s=Tr("com.microsoft.playready",s,[{initDataType:"cenc",initData:n}]),(t=Oo(["<PLAYREADY>",wr(t),"</PLAYREADY>"].join(`
`)))&&(s.licenseServerUri=Hc(t)),s=Promise.resolve(s)}else s=Promise.resolve(null);return s}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(t){var n=Pt(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var s="cenc";n=="SAMPLE-AES"&&(s="cbcs"),n=Pt(t,"URI"),n=ed(n.split("?")[0]),n=Ze(n.data),s=Tr("com.huawei.wiseplay",s,[{initDataType:"cenc",initData:n}]),(t=Ne(t,"KEYID"))&&s.keyIds.add(t.toLowerCase().substr(2)),t=Promise.resolve(s)}else t=Promise.resolve(null);return t}),this.ab=new Set,this.i=new Map,this.l=null,this.F="",this.Ya=new d5,this.L=-1,this.ha=1/0,this.ba=this.qc=this.Za=!1,this.C=new ht(function(){if(e.U&&!e.g.continueLoadingWhenPaused&&(e.S.Ja(e.U,"timeupdate"),e.U.paused)){e.S.Aa(e.U,"timeupdate",function(){return vS(e)});return}vS(e)}),this.za=sd,this.m=null,this.Pa=0,this.o=1/0,this.Oa=this.Ka=this.P=0,this.W=new Rs,this.H=new Map,this.I=new Map,this.ya=new Map,this.na=new Map,this.M=new Map,this.va=new Map,this.wa=new Map,this.bc=this.ka=!1,this.eb=new $i(5),this.j=null,this.N=!0,this.S=new Ee,this.s=this.U=null,this.Zb=function(){return!1}}y=td.prototype,y.configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.Zb=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.V()&&this.C.Jb()},y.start=function(e,t){var n=this,s;return j(function(u){return u.g==1?(n.h=t,n.ka=t.isLowLatencyMode(),D(u,Mg(n,[e]).promise,2)):u.g!=3?(s=u.h,n.F=s.uri,D(u,m5(n,s.data),3)):u.return(n.m)})},y.stop=function(){this.C&&(this.C.stop(),this.C=null);var e=[];return this.W&&(e.push(this.W.destroy()),this.W=null),this.g=this.h=null,this.ab.clear(),this.m=null,this.i.clear(),this.K.clear(),this.I.clear(),this.A.clear(),this.ya.clear(),this.na.clear(),this.M.clear(),this.va.clear(),this.wa.clear(),this.j&&this.j.destroy(),this.S&&(this.S.release(),this.S=null),Promise.all(e)},y.update=function(){var e=this,t,n,s,u,l,d,p,g,v,T,b,M;return j(function(_){if(_.g==1){if(!Bn(e))return _.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,s=n.filter(function(L){return L.stream.segmentIndex}),u=m(s),l=u.next();!l.done;l=u.next())d=l.value,t.push(p5(e,d));return D(_,Promise.all(t),2)}for(oS(e,s.map(function(L){return L.stream})),p=s.some(function(L){return L.Rd==0}),s.length&&!p&&(g=z5,rd(e,g.cj),v=s.map(function(L){return L.mc}),e.l.pb(Math.min.apply(Math,S(v))),e.h.updateDuration()),p&&Cg(e),T=m(s),b=T.next();!b.done;b=T.next())M=b.value,M.stream.isAudioMuxedInVideo||!M.stream.segmentIndex||ir(M.stream.segmentIndex)||e.h.disableStream(M.stream);ne(_)})};function Tg(e,t){return Bn(e)?e.B.get(t.type):t.jf}function p5(e,t){var n,s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z,ve,de,ae,ge,Te,Ce,Pe,Re,yt;return j(function(pt){switch(pt.g){case 1:if(t.stream.isAudioMuxedInVideo)return pt.return();for(n=[],s=m(t.O()),u=s.next();!u.done;u=s.next())l=u.value,d=new en(l),p=d.g,t.Me&&(0<=t.Rb&&p.add("_HLS_msn",String(t.Rb)),0<=t.Sb&&p.add("_HLS_part",String(t.Sb))),t.Ne&&p.add("_HLS_skip","YES"),Dy(p)&&Io(d,gs(p.toString())),n.push(d.toString());return le(pt,2),D(pt,Mg(e,n,!0).promise,4);case 4:g=pt.h,V(pt,3);break;case 2:throw v=re(pt),e.h&&e.h.disableStream(t.stream),v;case 3:if(!t.stream.segmentIndex)return pt.return();if(T=wg(e.Ya,g.data),T.type!=1)throw new q(2,4,4017);return b=g.uri,b==g.originalUri||t.O().includes(b)||t.zf.push(b),M=Pi(T.aa,"EXT-X-DEFINE"),_=bg(e,M,b),L=t.stream,O=Tg(e,t),D(pt,lS(e,T,L.mimeType,t.O,_),5);case 5:for(P=pt.h,U=P.keyIds,B=P.drmInfos,$=P.encrypted,W=P.Hh,L.encrypted||!$||W||(L.encrypted=!0),J=function(At,ut){return At.size===ut.size&&[].concat(S(At)).every(function(et){return ut.has(et)})},J(L.keyIds,U)||(L.keyIds=U,L.drmInfos=B,e.h.newDrmInfo(L)),G=gS(e,T,O,_,t.O,t.type),X=G.segments,(Y=G.bandwidth)&&(L.bandwidth=Y),Q=Jf(L),ie=m(X),te=ie.next();!te.done;te=ie.next())Z=te.value,Z.Y&&(Z.Y.rd=Q);L.segmentIndex.Yd(X,e.l.Gb()),X.length&&(ve=pu(T.aa,"EXT-X-MEDIA-SEQUENCE",0),ae=(de=Sn(T.aa,"EXT-X-SKIP"))?Number(Ne(de,"SKIPPED-SEGMENTS")):0,ge=uS(ve,X),Te=ge.Rb,Ce=ge.Sb,t.Rb=Te+ae,t.Sb=Ce,Pe=O.get(ve),L.segmentIndex.$a(Pe)),(Re=ir(L.segmentIndex))&&(t.Uc=Re.startTime,yt=X[X.length-1],t.mc=yt.endTime),Sn(T.aa,"EXT-X-ENDLIST")&&(t.Rd=!0),Ag(e,T),Eg(e,T.aa,L.type,_,t.O),ne(pt)}})}y.onExpirationUpdated=function(){},y.onInitialVariantChosen=function(){},y.banLocation=function(e){this.j&&this.j.banLocation(e)},y.setMediaElement=function(e){this.U=e};function Jw(e,t,n){n=n===void 0?!1:n;for(var s=e.L==-1,u=m(t),l=u.next();!l.done;l=u.next()){l=l.value;var d=l.stream.segmentIndex,p=Tg(e,l);if(d=ir(d)){p=m(p);for(var g=p.next();!g.done;g=p.next()){g=m(g.value);var v=g.next().value;if(g.next().value==d.startTime){s&&(e.L=Math.max(e.L,v)),l.og=v;break}}}}if(!(0>e.L))for(t=m(t),s=t.next();!s.done;s=t.next())s=s.value,(ll(e,s.type)||n)&&(u=s.stream.segmentIndex)&&(l=e.L-s.og,0<l&&(u.g.splice(0,l),u=ir(u))&&(u=-u.startTime,s.stream.segmentIndex.offset(u),Zw(e,s,u)))}function g5(e,t){if(e.ha==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next())n=ir(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.ha=Math.min(e.ha,n.h))}if(t=e.ha,t!=1/0){n=m(e.i.values());for(var s=n.next();!s.done;s=n.next())if(s=s.value,!ll(e,s.type)){var u=s.stream.segmentIndex;if(u!=null){var l=ir(u);if(l)if(l.h==null)En("Missing EXT-X-PROGRAM-DATE-TIME for stream",s.O(),"Expect AV sync issues!");else for(Zw(e,s,l.h-t-l.startTime),s=m(u),u=s.next();!u.done;u=s.next())u.value.vh(t)}}}}function Zw(e,t,n){if(!(.001>Math.abs(n))){t.Uc+=n,t.mc+=n,e=Tg(e,t);for(var s=m(e),u=s.next();!u.done;u=s.next()){var l=m(u.value);u=l.next().value,l=l.next().value,e.set(u,l+n)}t.O()}}function m5(e,t){var n,s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z,ve,de,ae,ge,Te,Ce,Pe,Re,yt,pt,At,ut,et,Et,at,rt;return j(function(dt){switch(dt.g){case 1:return n=vn,s=wg(e.Ya,t),u=Pi(s.aa,"EXT-X-DEFINE"),l=[],d=[],p=[],e.l=new qe(null,0),e.l.Zc(!0),g=function(){return[e.F]},v=null,T=new Map,s.type==1?(e.N=!1,Te=Pi(s.aa,"EXT-X-DEFINE"),T=bg(e,Te,e.F),v=n.Ca,Ce="",Pe=new Map,D(dt,sS(e,e.G++,T,s,g,"",v,Ce,!0,"Media Playlist",null,Pe,null,!1,null,!1),7)):(v5(e,u),b=Pi(s.aa,"EXT-X-MEDIA"),M=Pi(s.aa,"EXT-X-STREAM-INF"),_=Pi(s.aa,"EXT-X-IMAGE-STREAM-INF"),L=Pi(s.aa,"EXT-X-I-FRAME-STREAM-INF"),O=Pi(s.aa,"EXT-X-SESSION-KEY"),P=Pi(s.aa,"EXT-X-SESSION-DATA"),U=Pi(s.aa,"EXT-X-CONTENT-STEERING"),w5(e,P),D(dt,S5(e,U),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(B=[],$=m(M),W=$.next(),J={};!W.done;J={Ti:void 0},W=$.next())G=W.value,(X=Ne(G,"SUPPLEMENTAL-CODECS"))&&(J.Ti=X.split(/\s*,\s*/).map(function(Xt){return Xt.split("/")[0]}),Y=G.attributes.map(function(Xt){return function(Vt){var Wt=Vt.name,pn=Vt.value;return Wt=="CODECS"&&(pn=Xt.Ti.join(","),Vt=Vt.value.split(","),1<Vt.length&&(Vt=Qn("audio",Vt))&&(pn+=","+Vt)),new Zc(Wt,pn)}}(J)),B.push(new Jc(G.id,G.name,Y,null)));for(M.push.apply(M,S(B)),Q=[],ie=m(L),te=ie.next(),Z={};!te.done;Z={Ui:void 0},te=ie.next())ve=te.value,(de=Ne(ve,"SUPPLEMENTAL-CODECS"))&&(Z.Ui=de.split(/\s*,\s*/).map(function(Xt){return Xt.split("/")[0]}),ae=ve.attributes.map(function(Xt){return function(Vt){var Wt=Vt.name;return Vt=Vt.value,Wt=="CODECS"&&(Vt=Xt.Ui.join(",")),new Zc(Wt,Vt)}}(Z)),Q.push(new Jc(ve.id,ve.name,ae,null)));L.push.apply(L,S(Q))}return x5(e,M),M5(e,b),ge=k5(e,L),D(dt,A5(e,M,O,b,g,e.A,ge),5);case 5:return l=dt.h,d=T5(e,b),D(dt,C5(e,_,L),6);case 6:p=dt.h,dt.u(3);break;case 7:Re=dt.h,e.i.set(e.F,Re),Re.stream&&(yt=Jf(Re.stream),Re.stream.segmentIndex.Eb(function(Xt){Xt.Y&&(Xt.Y.rd=yt)})),v=Re.stream.type,pt=!0,(e.g.disableAudio&&Re.type=="audio"||e.g.disableVideo&&Re.type=="video"&&!Re.stream.codecs.includes(","))&&(pt=!1),pt&&l.push({id:0,language:Tt(Ce||"und"),disabledUntilTime:0,primary:!0,audio:Re.type=="audio"?Re.stream:null,video:Re.type=="video"?Re.stream:null,bandwidth:Re.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new q(2,7,7001);if(cS(e,s),s.type==1&&(Bn(e)&&(dS(e,s),At=e.o,e.C.ia(At)),ut=Array.from(e.i.values()),kg(e,ut),Cg(e),Eg(e,s.aa,v,T,g)),e.m={presentationTimeline:e.l,variants:l,textStreams:d,imageStreams:p,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.s},e.ba||!e.g.hls.disableCodecGuessing){dt.u(8);break}for(et=[],Et=m(e.m.variants),at=Et.next();!at.done;at=Et.next())rt=at.value,rt.audio&&rt.audio.codecs===""&&et.push(rt.audio.createSegmentIndex()),rt.video&&rt.video.codecs===""&&et.push(rt.video.createSegmentIndex());return D(dt,Promise.all(et),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),ne(dt)}})}function y5(e,t){var n,s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$;return j(function(W){if(W.g==1)return n=Hp(e.g.hls.mediaPlaylistFullMimeType),t.length?(s=mS(e,t),u=s.segment,l=s.segmentIndex,d=u.O(),p=d[0],g=new en(p),v=g.ob.split(".").pop(),(T=Rg.get(v))?W.return(Hp(T)):D(W,Promise.all([eS(e,u.Y,0),eS(e,u,l)]),2)):W.return(n);if(b=W.h,M=b[1].mimeType,_=b[0].data,L=b[1].data,O="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),P=["audio/mp4","video/mp4","video/iso.segment"],U=u.Y||P.includes(M),!U&&$s(Ze(L))){var J=L,G=e.g.disableAudio,X=e.g.disableVideo,Y=e.g.disableText,Q=Ze(J),ie=new Ut().parse(Q),te=ie.Od();Q=ie.Ig();var Z=[],ve=!1,de=!1;if(!G)switch(te.audio){case"aac":case"aac-loas":ie.sb().length&&(Z.push("mp4a.40.2"),ve=!0);break;case"mp3":ie.sb().length&&(Z.push("mp4a.40.34"),ve=!0);break;case"ac3":ie.sb().length&&(Z.push("ac-3"),ve=!0);break;case"ec3":ie.sb().length&&(Z.push("ec-3"),ve=!0);break;case"opus":ie.sb().length&&(Z.push("opus"),ve=!0)}if(!X)switch(te.video){case"avc":Q.codec?Z.push(Q.codec):Z.push("avc1.42E01E"),de=!0;break;case"hvc":Q.codec?Z.push(Q.codec):Z.push("hvc1.1.6.L93.90"),de=!0;break;case"av1":Z.push("av01.0.01M.08"),de=!0}if(Z.length){if(G=ve&&!de,X=new Map,de&&!Y){for(Y=new er("video/mp2t"),Y.vf(J),J=m(Y.Uf()),de=J.next();!de.done;de=J.next())de=de.value,X.set(de,de);Y.Fd()}Q={type:G?"audio":"video",mimeType:"video/mp2t",codecs:Z.join(", "),language:null,height:Q.height,width:Q.width,channelCount:null,sampleRate:null,closedCaptions:X,oe:null,colorGamut:null,frameRate:Q.frameRate}}else Q=null;if(B=Q)return W.return(B)}else if((U||O.includes(v))&&($=Dk(_,L,e.g.disableText)))return W.return($);return M?W.return(Hp(M)):W.return(n)})}function eS(e,t,n){var s,u,l,d,p,g;return j(function(v){switch(v.g){case 1:return t?(s=Wi,u=Pa(t.O(),t.Bc(),t.zc(),e.g.retryParameters),l=t instanceof He?1:0,D(v,zr(e,u,s,{type:l}).promise,2)):v.return({mimeType:null,data:null});case 2:if(d=v.h,p=d.data,!t.aesKey){v.u(3);break}return D(v,Xp(p,t.aesKey,n),4);case 4:p=v.h;case 3:return t instanceof He?t.ge(p,!0):t.ge(p),(g=d.headers["content-type"])&&(g=g.split(";")[0].toLowerCase()),v.return({mimeType:g,data:p})}})}function Cg(e){if(Bn(e)){if(e.za==ud){for(var t=1/0,n=1/0,s=m(e.i.values()),u=s.next();!u.done;u=s.next())u=u.value,u.stream.segmentIndex&&u.stream.type!="text"&&!u.stream.isAudioMuxedInVideo&&(t=Math.min(t,u.mc),n=Math.min(n,u.Uc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Gf(t)}}else e.l.pb(rS(e));if(!e.l.o)for(t=m(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=ir(n.stream.segmentIndex))&&n.h&&e.l.mh(n.h);e.l.hf()}function v5(e,t){var n=new en(e.F).g;t=m(t);for(var s=t.next();!s.done;s=t.next()){var u=s.value;s=Ne(u,"NAME");var l=Ne(u,"VALUE");u=Ne(u,"QUERYPARAM"),s&&l&&(e.A.has(s)||e.A.set(s,l)),u&&(s=n.get(u)[0])&&!e.A.has(s)&&e.A.set(u,s)}}function bg(e,t,n){n=new en(n).g;var s=new Map;t=m(t);for(var u=t.next();!u.done;u=t.next()){var l=u.value,d=Ne(l,"NAME"),p=Ne(l,"VALUE");u=Ne(l,"QUERYPARAM"),l=Ne(l,"IMPORT"),d&&p&&(s.has(d)||s.set(d,p)),u&&(d=n.get(u)[0])&&!s.has(d)&&s.set(u,d),l&&(u=e.A.get(l))&&s.set(l,u)}return s}function x5(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var s=n.value,u=Ne(s,"AUDIO");n=Ne(s,"VIDEO");var l=Ne(s,"SUBTITLES");if(s=tS(e,s),l){var d=Qn(ct,s);e.I.set(l,d),Vi(s,d)}u&&(l=Qn("audio",s),l||(l=e.g.hls.defaultAudioCodec),e.I.set(u,l)),n&&(u=Qn("video",s),u||(u=e.g.hls.defaultVideoCodec),e.I.set(n,u))}}function w5(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var s=n.value,u=Ne(s,"DATA-ID");n=Ne(s,"URI");var l=Ne(s,"LANGUAGE");s=Ne(s,"VALUE"),u=new Map().set("id",u),n&&u.set("uri",po([e.F],n,e.A)[0]),l&&u.set("language",l),s&&u.set("value",s),n=new Ie("sessiondata",u),e.h&&e.h.onEvent(n)}}function S5(e,t){var n,s,u,l,d,p;return j(function(g){if(!e.h||!e.g)return g.return();for(s=m(t),u=s.next();!u.done;u=s.next())if(l=u.value,d=Ne(l,"PATHWAY-ID"),p=Ne(l,"SERVER-URI"),d&&p){e.j=new lu(e.h),e.j.configure(e.g),e.j.i=[e.F],e.j.setManifestType("HLS"),e.j.h=d,n=il(e.j,p);break}return D(g,n,0)})}function T5(e,t){var n=Xw(t,"SUBTITLES");t=n.map(function(d){if(e.g.disableText)return null;try{return nS(e,[d],new Map).stream}catch(p){if(e.g.hls.ignoreTextStreamFailures)return null;throw p}}),n=m(n);for(var s=n.next();!s.done;s=n.next()){var u=Pt(s.value,"GROUP-ID");if((s=e.I.get(u))&&(u=e.K.get(u))){u=m(u);for(var l=u.next();!l.done;l=u.next())l=l.value,l.stream.codecs=s,l.stream.mimeType=Ig(ct,s)||id(ct),gu(l.stream)}}return t.filter(function(d){return d})}function gu(e){var t=new Set([rn(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Eb(function(n){n.mimeType&&t.add(rn(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function C5(e,t,n){var s,u;return j(function(l){return l.g==1?(s=t.map(function(d){var p,g;return j(function(v){if(v.g==1)return e.g.disableThumbnails?v.return(null):(le(v,2),D(v,R5(e,d),4));if(v.g!=2)return p=v.h,v.return(p.stream);if(g=re(v),e.g.hls.ignoreImageStreamFailures)return v.return(null);throw g})}).concat(n.map(function(d){if(e.g.disableThumbnails)return null;try{var p=iS(e,d);return p.stream.type!=="image"?null:p.stream}catch(g){if(e.g.hls.ignoreImageStreamFailures)return null;throw g}})),D(l,Promise.all(s),2)):(u=l.h,l.return(u.filter(function(d){return d})))})}function b5(e,t,n){t=t.filter(function(p){var g=Ne(p,"URI")||"";return p=Ne(p,"TYPE"),p!="SUBTITLES"&&(g!=""||p=="AUDIO")});var s={};t=m(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var l=Hw(u,!e.j);s[l]?s[l].push(u):s[l]=[u]}for(var d in s)nS(e,s[d],n,!1)}function k5(e,t){return t.map(function(n){return n=iS(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function A5(e,t,n,s,u,l,d){var p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z,ve,de,ae,ge,Te,Ce,Pe,Re,yt,pt,At,ut,et,Et;return j(function(at){switch(at.g){case 1:if(p=[],g=new Set,e.g.ignoreDrmInfo||!(0<n.length)){at.u(2);break}v=m(n),T=v.next();case 3:if(T.done){at.u(2);break}if(b=T.value,M=Pt(b,"METHOD"),_=Ne(b,"KEYFORMAT")||"identity",L=null,M=="NONE"){at.u(4);break}if(od(M)){O=po(u(),Pt(b,"URI"),l),P=O.sort().join(""),e.M.has(P)||(U=fn(O,e.g.retryParameters),B=zr(e,U,6).promise,e.M.set(P,B)),at.u(4);break}if(_=="identity")return D(at,xS(e,b,"",u,null,l),12);if($=e.$b.get(_),!$){W=null,at.u(10);break}return D(at,$(b,"",null),11);case 11:W=at.h;case 10:L=W,at.u(6);break;case 12:L=at.h;case 6:if(L){if(L.keyIds)for(J=m(L.keyIds),G=J.next();!G.done;G=J.next())X=G.value,g.add(X);p.push(L)}case 4:T=v.next(),at.u(3);break;case 2:for(Y={},Q=m(t),ie=Q.next();!ie.done;ie=Q.next())te=ie.value,Z=Hw(te,!e.j),Y[Z]?Y[Z].push(te):Y[Z]=[te];ve=[];for(de in Y)ae=Y[de],ge=ae[0],Te=Ne(ge,"FRAME-RATE"),Ce=Number(Ne(ge,"AVERAGE-BANDWIDTH"))||Number(Pt(ge,"BANDWIDTH")),Pe=Ne(ge,"RESOLUTION"),Re=m(Pe?Pe.split("x"):[null,null]),yt=Re.next().value,pt=Re.next().value,At=Ne(ge,"VIDEO-RANGE"),(ut=Ne(ge,"REQ-VIDEO-LAYOUT"))&&ut.includes(",")&&(et=ut.split(",").filter(function(rt){return rt=="CH-STEREO"||rt=="CH-MONO"}),ut=et[0]),ut=ut||"CH-MONO",Et=E5(e,ae,s),ve.push.apply(ve,S(I5(e,Et.audio,Et.video,Ce,yt,pt,Te,At,ut,p,g,d)));return at.return(ve.filter(function(rt){return rt!=null}))}})}function E5(e,t,n){for(var s={audio:[],video:[]},u=new Map,l=[],d=!1,p=!1,g=m(t),v=g.next();!v.done;v=g.next()){var T=v.value;v=Ne(T,"AUDIO");var b=Ne(T,"VIDEO"),M=v||b;M&&(l.includes(M)||l.push(M),(T=Ne(T,"PATHWAY-ID"))&&u.set(M,T),v?d=!0:b&&(p=!0))}l.length&&n.length&&(n=n.filter(function(L){return l.includes(Pt(L,"GROUP-ID"))}),b5(e,n,u)),n=(u=l.sort().join(","))&&e.K.has(u)?e.K.get(u):[],d?s.audio.push.apply(s.audio,S(n)):p&&s.video.push.apply(s.video,S(n)),d=!1;var _=t.map(function(L){return Pt(L,"URI")});return v=s.audio.find(function(L){return L&&L.O().find(function(O){return _.includes(O)})}),p=tS(e,t[0]),n=Qn("video",p),(g=Qn("audio",p))&&!n?(v="audio",d=0<s.audio.length):!s.audio.length&&!s.video.length&&g&&n?(v="video",p=[[n,g].join()]):s.audio.length&&v?(v="audio",d=!0):v=s.video.length&&!s.audio.length?"audio":"video",d||(e=_5(e,t,p,v),u&&(e.stream.groupId=u),s[e.stream.type]=[e]),s}function tS(e,t){return t=Ne(t,"CODECS")||"",e.ba=0<t.length,e.ba||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),Gp(t.split(/\s*,\s*/))}function I5(e,t,n,s,u,l,d,p,g,v,T,b){for(var M=m(n),_=M.next();!_.done;_=M.next())yS(_.value.stream,u,l,d,p,g,null);for(u=e.g.disableVideo,(!n.length||u)&&(n=[null]),u&&(t=t.filter(function(U){return!U.stream.isAudioMuxedInVideo})),u=e.g.disableAudio,(!t.length||u)&&(t=[null]),u=[],t=m(t),l=t.next();!l.done;l=t.next())for(l=l.value,d=m(n),p=d.next();!p.done;p=d.next()){var L=p.value;(p=l?l.stream:null)&&(p.drmInfos=v,p.keyIds=T),(g=L?L.stream:null)&&(g.drmInfos=v,g.keyIds=T,e.g.disableIFrames||x1(g,b)),g&&!p&&(g.bandwidth=s),!g&&p&&(p.bandwidth=s),M=l?l.stream.drmInfos:null,_=L?L.stream.drmInfos:null,L=L?L.O().sort().join(","):"";var O=l?l.O().sort().join(","):"",P=[];p&&p.codecs&&P.push(p.codecs),g&&g.codecs&&P.push(g.codecs),L=[L,O,P.sort()].join("-"),p&&g&&!b1(M,_)||e.ab.has(L)||(p={id:e.G++,language:p?p.language:"und",disabledUntilTime:0,primary:!!p&&p.primary||!!g&&g.primary,audio:p,video:g,bandwidth:s,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},u.push(p),e.ab.add(L))}return u}function M5(e,t){t=Xw(t,"CLOSED-CAPTIONS"),e.N=t.length==0,t=m(t);for(var n=t.next();!n.done;n=t.next()){var s=n.value,u=Ne(s,"LANGUAGE");n=Tt(u||"und"),u||(u=Ne(s,"NAME"))&&(n=u),u=Pt(s,"GROUP-ID"),s=Pt(s,"INSTREAM-ID").replace("SERVICE","svc"),e.H.get(u)||e.H.set(u,new Map),e.H.get(u).set(s,n)}}function nS(e,t,n,s){s=s===void 0?!0:s;for(var u=[],l=[],d=new Map,p=m(t),g=p.next();!g.done;g=p.next()){var v=g.value;g=s?Pt(v,"URI"):Ne(v,"URI")||"shaka://hls-muxed",v=Pt(v,"GROUP-ID"),u.push(g),l.push(v),d.set(v,g)}if(s=l.sort().join(","),g=t[0],t="",p=Pt(g,"TYPE").toLowerCase(),p=="subtitles"&&(p=ct),p==ct)t=Ne(g,"CODECS")||"";else for(l=m(l),v=l.next();!v.done;v=l.next())if(v=v.value,e.I.has(v)){t=e.I.get(v);break}if(l=u.sort().join(","),e.i.has(l))return e.i.get(l);if(v=e.G++,e.j){d=m(d);for(var T=d.next();!T.done;T=d.next()){var b=m(T.value);T=b.next().value,b=b.next().value,(T=n.get(T))&&fu(e.j,v,T,b)}}n=Ne(g,"LANGUAGE"),d=Ne(g,"NAME"),T=Ne(g,"DEFAULT")=="YES",p=="audio"?b=(b=Ne(g,"CHANNELS"))?parseInt(b.split("/")[0],10):null:b=null;var M;p=="audio"&&(M=Ne(g,"CHANNELS"))?(M=M.split("/"),M=M.length!=2?!1:M[1]==="JOC"||M[1].includes("ATMOS")):M=!1;var _=Ne(g,"CHARACTERISTICS"),L=Ne(g,"FORCED")=="YES";return p=="audio"?g=(g=Ne(g,"SAMPLE-RATE"))?parseInt(g,10):null:g=null,u=nd(e,v,u,t,p,n,T,d,b,null,_,L,g,M),u.stream&&(u.stream.groupId=s),e.K.has(s)?e.K.get(s).push(u):e.K.set(s,[u]),e.i.set(l,u),u}function R5(e,t){var n,s,u,l,d,p,g,v,T,b;return j(function(M){return M.g==1?(n=Pt(t,"URI"),s=Ne(t,"CODECS","jpeg")||"",e.i.has(n)?M.return(e.i.get(n)):(u=Ne(t,"LANGUAGE"),l=Ne(t,"NAME"),d=Ne(t,"CHARACTERISTICS"),p=nd(e,e.G++,[n],s,"image",u,!1,l,null,null,d,!1,null,!1),(g=Ne(t,"RESOLUTION"))?D(M,p.stream.createSegmentIndex(),3):M.u(2))):(M.g!=2&&(v=ir(p.stream.segmentIndex),T=v.tilesLayout)&&(p.stream.width=Number(g.split("x")[0])*Number(T.split("x")[0]),p.stream.height=Number(g.split("x")[1])*Number(T.split("x")[1])),(b=Ne(t,"BANDWIDTH"))&&(p.stream.bandwidth=Number(b)),e.i.set(n,p),M.return(p))})}function iS(e,t){var n="video",s=Pt(t,"URI"),u=Ne(t,"CODECS")||"";if(u=="mjpg"&&(n="image"),e.i.has(s))return e.i.get(s);var l=Ne(t,"LANGUAGE"),d=Ne(t,"NAME"),p=Ne(t,"CHARACTERISTICS");return n=nd(e,e.G++,[s],u,n,l,!1,d,null,null,p,!1,null,!1),u=Ne(t,"RESOLUTION"),l=m(u?u.split("x"):[null,null]),u=l.next().value,l=l.next().value,n.stream.width=Number(u)||void 0,n.stream.height=Number(l)||void 0,(t=Ne(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(s,n),n}function _5(e,t,n,s){for(var u=e.G++,l=[],d=m(t),p=d.next();!p.done;p=d.next()){var g=p.value;p=Pt(g,"URI"),g=Ne(g,"PATHWAY-ID"),e.j&&g&&fu(e.j,u,g,p),l.push(p)}if(d=l.sort().join(",")+n.sort().join(","),e.i.has(d))return e.i.get(d);p=l.join(",");e:{if(t=Ne(t[0],"CLOSED-CAPTIONS"),s=="video"){if(e.g.disableText){e.N=!1,t=null;break e}if(t){if(t!="NONE"){t=e.H.get(t);break e}e.N=!1}else if(!t&&e.H.size)for(t=m(e.H.keys()).next();!t.done;){t=e.H.get(t.value);break e}}t=null}return n=vs(s,n),s=nd(e,u,l,n,s,null,!1,p,null,t,null,!1,null,!1),e.i.set(d,s),s}function nd(e,t,n,s,u,l,d,p,g,v,T,b,M,_){function L(W){var J,G,X,Y,Q,ie,te,Z,ve,de,ae,ge,Te,Ce,Pe,Re,yt,pt,At,ut;return j(function(et){switch(et.g){case 1:return J=vn,le(et,2),D(et,W.promise,4);case 4:if(G=et.h,W.aborted)return et.return();if(X=G.uri,X!=G.originalUri&&(Y=U.O(),Y.includes(X)||U.zf.push(X)),Q=wg(e.Ya,G.data),Q.type!=1)throw new q(2,4,4017);return ie=Pi(Q.aa,"EXT-X-DEFINE"),te=bg(e,ie,X),Z=!1,(!e.ba&&e.g.hls.disableCodecGuessing||e.N&&u==J.Ca&&!e.g.hls.disableClosedCaptionsDetection)&&0<Q.segments.length&&(e.N=!1,Z=!0),ve=!e.ba&&e.g.hls.disableCodecGuessing,de=Bn(e),D(et,sS(e,0,te,Q,O,s,u,l,d,p,g,v,T,b,M,_,void 0,Z,ve),5);case 5:if(ae=et.h,W.aborted)return et.return();ge=ae.stream,cS(e,Q),Bn(e)&&!de&&dS(e,Q),U.Uc=ae.Uc,U.mc=ae.mc,U.Ne=ae.Ne,U.Me=ae.Me,U.Rd=ae.Rd,U.jf=ae.jf,U.Rb=ae.Rb,U.Sb=ae.Sb,P.segmentIndex=ge.segmentIndex,P.encrypted=ge.encrypted,P.drmInfos=ge.drmInfos,P.keyIds=ge.keyIds,P.mimeType=ge.mimeType,P.bandwidth=P.bandwidth||ge.bandwidth,P.codecs=P.codecs||ge.codecs,P.closedCaptions=P.closedCaptions||ge.closedCaptions,P.width=P.width||ge.width,P.height=P.height||ge.height,P.hdr=P.hdr||ge.hdr,P.colorGamut=P.colorGamut||ge.colorGamut,P.frameRate=P.frameRate||ge.frameRate,P.language=="und"&&ge.language!="und"&&(P.language=ge.language),P.language=P.language||ge.language,P.channelsCount=P.channelsCount||ge.channelsCount,P.audioSamplingRate=P.audioSamplingRate||ge.audioSamplingRate,gu(P),P.drmInfos.length&&e.h.newDrmInfo(P),Te=!1,(!v&&P.closedCaptions||v&&P.closedCaptions&&v.size!=P.closedCaptions.size)&&(Te=!0),e.m&&Te&&e.h.makeTextStreamsForClosedCaptions(e.m),u==J.Ta&&(Ce=ir(ge.segmentIndex))&&Ce.Y&&(P.mimeType="application/mp4",gu(P)),Pe=Jf(P),P.segmentIndex.Eb(function(Et){Et.Y&&(Et.Y.rd=Pe)}),L5(e)&&(e.qc?kg(e,[U]):(e.qc=!0,Re=Array.from(e.i.values()),yt=Re.filter(function(Et){return Et.stream.segmentIndex}),kg(e,yt),Cg(e),pt=e.o,0<pt&&e.C.ia(pt))),Eg(e,Q.aa,P.type,te,O),e.m&&(e.m.startTime=e.s),V(et,0);break;case 2:if(At=re(et),P.closeSegmentIndex(),At.code===7001)return et.return();if(ut=e.h.disableStream(P),!ut)throw At;ne(et)}})}function O(){return e.j&&1<n.length?rl(e.j,t):U.zf.concat(Ww([e.F],n,e.A))}var P=aS(e,s,u,l,d,p,g,v,T,b,M,_);n.includes("shaka://hls-muxed")&&(P.isAudioMuxedInVideo=!0,P.mimeType="video/mp2t",gu(P));var U={stream:P,type:u,zf:[],Uc:0,mc:0,jf:new Map,Ne:!1,Me:!1,Rd:!1,og:-1,Rb:-1,Sb:-1,O},B=null,$;return P.createSegmentIndex=function(){return B||(P.isAudioMuxedInVideo?(P.segmentIndex=new vt([]),Promise.resolve()):($=Mg(e,U.O(),!0),B=new Promise(function(W){W(L($))})))},P.closeSegmentIndex=function(){B&&!P.segmentIndex&&$.abort(),P.segmentIndex&&(P.segmentIndex.release(),P.segmentIndex=null),B=null},U}function rS(e){var t=1/0;e=m(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.mc));return t}function oS(e,t){var n=[];t=m(t);for(var s=t.next();!s.done;s=t.next())s=s.value,s.segmentIndex&&s.segmentIndex.Eb(function(u){n.push(u)});e.l.$d(n)}function kg(e,t){if(!Bn(e))for(var n=rS(e),s=m(t),u=s.next();!u.done;u=s.next())u.value.stream.segmentIndex.ld(0,n);oS(e,t.map(function(l){return l.stream})),s=Array.from(e.i.values()).filter(function(l){return l.stream.segmentIndex}),n=s.some(function(l){return l.stream.type=="audio"}),u=s.some(function(l){return l.stream.type=="video"}),s=Bn(e)&&!e.Za,n=!Bn(e)&&e.Za&&!(n&&u),e.g.hls.ignoreManifestProgramDateTime||s||n?Jw(e,t,s):(g5(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&Jw(e,t))}function ll(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function L5(e){if(!e.m)return!1;var t=[],n=[];e=m(e.m.variants);for(var s=e.next();!s.done;s=e.next())s=s.value,s.video&&t.push(s.video),s.audio&&n.push(s.audio);return!(0<t.length&&!t.some(function(u){return u.segmentIndex})||0<n.length&&!n.some(function(u){return u.segmentIndex}))}function sS(e,t,n,s,u,l,d,p,g,v,T,b,M,_,L,O,P,U,B){U=U===void 0?!0:U,B=B===void 0?!0:B;var $,W,J,G,X,Y,Q,ie,te,Z,ve,de,ae,ge,Te,Ce,Pe,Re,yt,pt,At,ut,et,Et,at,rt,dt,Xt,Vt;return j(function(Wt){switch(Wt.g){case 1:if($=s.segments||[],W=$.every(function(pn){return!!Sn(pn.aa,"EXT-X-GAP")}),!$.length||W)throw new q(2,4,4053);if(D5(e,s),Bn(e)&&Ag(e,s),J=Bn(e)?e.B.get(d):new Map,G=gS(e,s,J,n,u,d),X=G.segments,Y=G.bandwidth,ve=Z=te=ie=Q=null,!(0<X.length&&U)){Wt.u(2);break}return D(Wt,y5(e,X),3);case 3:de=Wt.h,d!=de.type&&Bn(e)&&(e.B.set(de.type,e.B.get(d)),e.B.set(d,new Map)),d=de.type,p=de.language,T=de.channelCount,L=de.sampleRate,e.g.disableText||(b=de.closedCaptions),ie=de.height,Q=de.width,te=de.oe,Z=de.colorGamut,ve=de.frameRate,B&&(P=de.mimeType,l=de.codecs);case 2:if(P){Wt.u(4);break}return D(Wt,N5(e,d,l,X),5);case 5:P=Wt.h,d!=ct||l||P!="application/mp4"||!X[0]||X[0].Y||(P="text/vtt");case 4:return D(Wt,lS(e,s,P,u,n),6);case 6:if(ae=Wt.h,ge=ae.drmInfos,Te=ae.keyIds,Ce=ae.encrypted,Pe=ae.Hh,Ce&&!ge.length&&!Pe)throw new q(2,4,4026);return Re=aS(e,l,d,p,g,v,T,b,M,_,L,O),Re.encrypted=Ce&&!Pe,Re.drmInfos=ge,Re.keyIds=Te,Re.mimeType=P,Y&&(Re.bandwidth=Y),gu(Re),d=="video"&&(Q||ie||te||Z)&&yS(Re,Q,ie,ve,te,null,Z),Bn(e)&&Ag(e,s),yt=X[0].startTime,pt=X[X.length-1],At=pt.endTime,ut=new vt(X),Re.segmentIndex=ut,Et=(et=Sn(s.aa,"EXT-X-SERVER-CONTROL"))?hu(et,"CAN-SKIP-UNTIL")!=null:!1,at=et?hu(et,"CAN-BLOCK-RELOAD")!=null:!1,rt=pu(s.aa,"EXT-X-MEDIA-SEQUENCE",0),dt=uS(rt,X),Xt=dt.Rb,Vt=dt.Sb,Wt.return({stream:Re,type:d,zf:[],O:u,Uc:yt,mc:At,Ne:Et,Me:at,Rd:!1,og:-1,Rb:Xt,Sb:Vt,jf:J})}})}function uS(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Rb:e,Sb:n};t=t[t.length-1];var s=t.g;return t.g.length?(n=s.length-1,s[s.length-1].isPreload()||(e++,n=0),{Rb:e,Sb:n}):(e++,t.m&&(n=0),{Rb:e,Sb:n})}function aS(e,t,n,s,u,l,d,p,g,v,T,b){var M=Ig(n,t)||id(n),_=[];if(g){g=m(g.split(","));for(var L=g.next();!L.done;L=g.next())_.push(L.value)}return g=void 0,L=null,n==ct?g=_.includes("public.accessibility.transcribes-spoken-dialog")&&_.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":_.includes("public.accessibility.describes-video")&&(L="visually impaired"),_.length||g!=="subtitle"||_.push("subtitle"),e={id:e.G++,originalId:l,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:M,codecs:t,kind:n==ct?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Tt(s||"und"),originalLanguage:s,label:l,type:n,primary:u,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:_,forced:v,channelsCount:d,audioSamplingRate:T,spatialAudio:b,closedCaptions:p,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:L,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},gu(e),e}function lS(e,t,n,s,u){var l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z,ve,de,ae,ge,Te;return j(function(Ce){switch(Ce.g){case 1:if(l=new Map,!e.g.ignoreDrmInfo&&t.segments){for(d=m(t.segments),p=d.next();!p.done;p=d.next())if(g=p.value,v=Pi(g.aa,"EXT-X-KEY"),T=null,v.length)for(T=hS(e,t,g.aa,s,u),b=m(v),M=b.next();!M.done;M=b.next())_=M.value,l.set(_,T)}O=L=!1,P=[],U=new Set,B=m(l),$=B.next();case 2:if($.done){Ce.u(4);break}if(W=$.value,J=m(W),G=J.next().value,X=J.next().value,Y=G,Q=X,ie=Pt(Y,"METHOD"),ie=="NONE"){Ce.u(3);break}if(L=!0,te=Ne(Y,"KEYFORMAT")||"identity",Z=null,od(ie)){O=!0,Ce.u(3);break}if(te=="identity")return D(Ce,xS(e,Y,n,s,Q,u),11);if(ve=e.$b.get(te),!ve){de=null,Ce.u(9);break}return D(Ce,ve(Y,n,Q),10);case 10:de=Ce.h;case 9:Z=de,Ce.u(6);break;case 11:Z=Ce.h;case 6:if(Z){if(Z.keyIds)for(ae=m(Z.keyIds),ge=ae.next();!ge.done;ge=ae.next())Te=ge.value,U.add(Te);P.push(Z)}case 3:$=B.next(),Ce.u(2);break;case 4:return Ce.return({drmInfos:P,keyIds:U,encrypted:L,Hh:O})}})}function fS(e,t,n,s,u){if(!f.crypto||!f.crypto.subtle)throw ft("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new q(2,4,4042);var l=0,d=Ne(t,"IV","");if(d){var p=Ro(d.substr(2));if(p.byteLength!=16)throw new q(2,4,4048)}else l=pu(n.aa,"EXT-X-MEDIA-SEQUENCE",0);var g=po(s(),Pt(t,"URI"),u),v=g.sort().join("");if(n=t.toString()+"-"+l+"-"+v,!e.na.has(n)){var T={bitsKey:128,blockCipherMode:"CBC",iv:p,firstMediaSequenceNumber:l};switch(Pt(t,"METHOD")){case"AES-256":T.bitsKey=256;break;case"AES-256-CTR":T.bitsKey=256,T.blockCipherMode="CTR"}T.fetchKey=function(){var b,M,_,L;return j(function(O){if(O.g==1)return e.M.has(v)||(b=fn(g,e.g.retryParameters),M=zr(e,b,6).promise,e.M.set(v,M)),D(O,e.M.get(v),2);if(O.g!=3){if(_=O.h,!_.data||_.data.byteLength!=T.bitsKey/8)throw new q(2,4,4049);return L={name:T.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:T.bitsKey},D(O,f.crypto.subtle.importKey("raw",_.data,L,!0,["decrypt"]),3)}T.cryptoKey=O.h,T.fetchKey=void 0,ne(O)})},e.na.set(n,T)}return e.na.get(n)}function cS(e,t){e.s==null&&(t=Sn(t.aa,"EXT-X-START"))&&(e.s=Number(Pt(t,"TIME-OFFSET")))}function D5(e,t){var n=Sn(t.aa,"EXT-X-PLAYLIST-TYPE");t=Sn(t.aa,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?rd(e,sd):n?rd(e,ud):rd(e,TS)}function Ag(e,t){var n=1/0,s=t.segments;if(s.length)for(var u=s.length-1;0<=u;){var l=Sn(s[u].aa,"EXTINF");if(l){n=Number(l.value.split(",")[0]);break}u--}if(s=Sn(t.aa,"EXT-X-TARGETDURATION"),!s)throw new q(2,4,4024,"EXT-X-TARGETDURATION");s=Number(s.value),(u=Sn(t.aa,"EXT-X-PART-INF"))&&(e.P=Number(Pt(u,"PART-TARGET"))),t=Sn(t.aa,"EXT-X-SERVER-CONTROL"),e.ka&&e.P?(e.o=e.bc?5*e.P<=n?Math.min(e.P,e.o):Math.min(n,e.o):Math.min(e.P,e.o),e.Oa=t?Number(Pt(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?hu(t,"HOLD-BACK"):null,e.Ka=n?Number(n.value):0),e.Pa=Math.max(s,e.Pa)}function dS(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.Oa)n=e.Oa;else if(e.Ka)n=e.Ka;else for(var s=t.segments.length,u=s-Math.min(s,e.g.hls.liveSegmentsDelay);u<s;u++){var l=Sn(t.segments[u].aa,"EXTINF");n=l?n+Number(l.value.split(",")[0]):n+e.Pa}e.s&&0>e.s&&(n=Math.min(-e.s,n),e.s+=n),e.l.Li(0),e.l.lh(n),e.l.Zc(!1)}function hS(e,t,n,s,u){var l=Sn(n,"EXT-X-MAP");if(!l)return null;var d=Pt(l,"URI"),p=po(s(),d,u);if(d=[p.toString(),Ne(l,"BYTERANGE","")].join("-"),!e.ya.has(d)){var g=void 0,v=null,T=!1;n=m(n);for(var b=n.next();!b.done;b=n.next())b=b.value,b.name=="EXT-X-KEY"?(T=Pt(b,"METHOD"),od(T)&&b.id<l.id?(T=!1,g=fS(e,b,t,s,u)):T=T!="NONE"):b.name=="EXT-X-BYTERANGE"&&b.id<l.id&&(v=b);t=P5(p,l,v,g,T),e.ya.set(d,t)}return e.ya.get(d)}function P5(e,t,n,s,u){var l=0,d=null;return t=Ne(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(l=t.split("@"),d=Number(l[0]),l=Number(l[1]),d=l+d-1,s&&(n=d+1-l,n%16&&(d+=16-n%16))),new Jn(function(){return e},l,d,null,null,null,s,u)}function O5(e,t,n,s,u,l,d,p,g){function v(Ce){Ce=new en(Ce).ob.split(".").pop();var Pe=_g.get(d).get(Ce);return Pe||(Pe=Rg.get(Ce)),Pe}var T=s.aa,b=Sn(T,"EXTINF"),M=0,_=0,L=null;s.rc.length&&(e.m.isLowLatency=!0);var O=null;if(!e.g.hls.ignoreManifestProgramDateTime){var P=Sn(T,"EXT-X-PROGRAM-DATE-TIME");P&&P.value&&(O=br(P.value),e.Za=!0)}var U=_r;if(Sn(T,"EXT-X-GAP")&&(e.m.gapCount++,U=2),!b){if(s.rc.length==0)throw new q(2,4,4024,"EXTINF");if(!e.ka)return null}var B=[];P=!1;var $=null,W=!1,J=!1;if(e.ka&&s.rc.length){M=t&&f.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var G=O,X={},Y=0;Y<s.rc.length;X={Of:void 0,uf:void 0},Y++){var Q=s.rc[Y],ie=Y==0?n:B[B.length-1],te=Y==0?u:ie.endTime,Z=Number(Ne(Q,"DURATION"))||e.P;if(Z){var ve=te+Z,de=0,ae=null;if(Q.name=="EXT-X-PRELOAD-HINT"?(de=(de=Ne(Q,"BYTERANGE-START"))?Number(de):0,(ie=Ne(Q,"BYTERANGE-LENGTH"))?ae=de+Number(ie)-1:de&&(ae=Number.MAX_SAFE_INTEGER)):(de=Ne(Q,"BYTERANGE"),ae=m(pS(ie,de)),de=ae.next().value,ae=ae.next().value),X.uf=Ne(Q,"URI"),X.uf){ie=_r,Ne(Q,"GAP")=="YES"&&(e.m.gapCount++,ie=2,W=!0),X.Of=null;var ge=function(Ce){return function(){return Ce.Of==null&&(Ce.Of=po(p(),Ce.uf,l)),Ce.Of}}(X);M&&0<=de&&ae!=null&&($=ge,P=!0),te=new He(te,ve,ge,de,ae,t,0,0,1/0,[],"",null,G,ie,g),Q.name=="EXT-X-PRELOAD-HINT"&&(te.Pg(),J=!0),Ne(Q,"INDEPENDENT")!="YES"&&0<Y&&te.qd(),(X=v(X.uf))&&(te.mimeType=X,SS.has(X)&&(te.Y=null)),B.push(te),G&&(G+=Z)}}}}if(b){if(b=Number(b.value.split(",")[0]),b==0)return null;M=u+b}else if(B.length)M=B[B.length-1].endTime;else return null;P&&(W||B[0].startByte!=0?(P=!1,$=null):B=[]),(b=Sn(T,"EXT-X-BYTERANGE"))?(L=m(pS(n,b.value)),_=L.next().value,L=L.next().value):B.length&&(_=B[0].startByte,L=B[B.length-1].endByte),n="",b=null,d=="image"&&(n="1x1",T=Sn(T,"EXT-X-TILES"))&&(n=Pt(T,"LAYOUT"),(T=Ne(T,"DURATION"))&&(b=Number(T)));var Te=null;return t=new He(u,M,function(){return $?$():(Te==null&&(Te=po(p(),s.g,l)),Te||[])},_,L,t,0,0,1/0,B,n,b,O,U,g,0<B.length&&!!s.g),(u=v(s.g))&&(t.mimeType=u,SS.has(u)&&(t.Y=null)),P&&(e.bc=!0,t.ii(),J&&t.Pg()),t}function pS(e,t){var n=0,s=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.endByte+1,s=n+t-1),[n,s]}function Eg(e,t,n,s,u){if(n=="video"||n=="audio"){var l=e.l.m;if(l&&!ll(e,n))for(t=Pi(t,"EXT-X-DATERANGE"),t=t.filter(function(ie){return hu(ie,"START-DATE")!=null}).sort(function(ie,te){return ie=Pt(ie,"START-DATE"),te=Pt(te,"START-DATE"),ie<te?-1:ie>te?1:0}),n=0;n<t.length;n++){var d=t[n];try{var p=Pt(d,"START-DATE"),g=br(p);if(!isNaN(g)){var v=Math.max(0,g-l),T=null,b=Ne(d,"END-DATE");if(b){var M=br(b);if(!isNaN(M)&&(T=M-l,0>T))continue}if(T==null){var _=Ne(d,"DURATION")||Ne(d,"PLANNED-DURATION");if(_){var L=parseFloat(_);if(isNaN(L)||(T=v+L),0>g-l+L)continue}}var O=Ne(d,"CLASS")||"com.apple.quicktime.HLS",P=Ne(d,"END-ON-NEXT")=="YES";if(T==null&&P){for(var U=n+1;U<t.length;U++){var B=Ne(t[U],"CLASS")||"com.apple.quicktime.HLS";if(O==B){var $=Pt(t[U],"START-DATE"),W=br($);if(!isNaN(W)&&W&&W>g){T=Math.max(0,W-l);break}}}if(T==null)continue}U=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var J=[],G=m(d.attributes),X=G.next();!X.done;X=G.next()){var Y=X.value;if(!U.includes(Y.name)){var Q=Kw(Y.value,s);(Y.name=="X-ASSET-URI"||Y.name=="X-ASSET-LIST")&&(Q=po(u(),Y.value,s)[0]),J.push({key:Y.name,description:"",data:Q,mimeType:null,pictureType:null})}}1<J.length&&e.h.onMetadata(O,v,T,J)}}catch{}}}}function gS(e,t,n,s,u,l){var d=t.segments,p=void 0,g=pu(t.aa,"EXT-X-DISCONTINUITY-SEQUENCE",-1),v=pu(t.aa,"EXT-X-MEDIA-SEQUENCE",0),T=Sn(t.aa,"EXT-X-SKIP"),b=T?Number(Ne(T,"SKIPPED-SEGMENTS")):0,M=v+b,_=0;Bn(e)&&n.has(M)&&(_=n.get(M)),_===0&&e.za==ud&&0<n.size&&!n.has(M)&&e.l.i!=null&&(_=e.l.Gb());var L=[],O=null;T=[];for(var P=0;P<d.length;P++){var U=d[P],B=P==0?_:O.endTime;M=v+b+P,Sn(U.aa,"EXT-X-DISCONTINUITY")&&(g++,O&&O.Y&&(O.Y.g=B));for(var $=m(U.aa),W=$.next();!W.done;W=$.next())W=W.value,W.name=="EXT-X-KEY"&&(od(Pt(W,"METHOD"))?p=fS(e,W,t,u,s):p=void 0);n.set(M,B),$=hS(e,t,U.aa,u,s),(B=O5(e,$,O,U,B,s,l,u,p))&&((O=pu(U.aa,"EXT-X-BITRATE"))?T.push({bitrate:O,duration:B.endTime-B.startTime}):T.length&&(O=T.pop(),O.duration+=B.endTime-B.startTime,T.push(O)),O=B,B.i=g,ll(e,l)&&e.L!=null&&M<e.L||L.push(B))}if(t=void 0,T.length&&(t=T.reduce(function(J,G){return J+G.duration},0),t=Math.round(T.reduce(function(J,G){return J+G.bitrate*G.duration},0)/t*1e3)),T=L.some(function(J){return J.h!=null})){for(n={},s=0;s<L.length;n={Se:void 0,Re:void 0,Je:void 0,Wc:void 0,Ie:void 0},s++)if(n.Wc=L[s],n.Wc.h==null)for(n.Re=0,n.Se=s,u=function(J){return function(){var G=L[J.Se];if(G){if(G.h!=null)return G.h+J.Re;J.Re-=G.endTime-G.startTime,J.Se+=1}return null}}(n),n.Ie=0,n.Je=s,d=function(J){return function(){var G=L[J.Je];if(G){if(G!=J.Wc&&(J.Ie+=G.endTime-G.startTime),G.h!=null)return G.h+J.Ie;--J.Je}return null}}(n);n.Wc.h==null;)n.Wc.h=d(),n.Wc.h==null&&(n.Wc.h=u())}if(T)for(n=m(L),s=n.next();!s.done;s=n.next())for(u=s.value,s=u.h,u=m(u.g),d=u.next();!d.done;d=u.next())d=d.value,d.h=s,s+=d.endTime-d.startTime;if(n=e.ha,T&&n!=1/0&&!ll(e,l))for(e=m(L),l=e.next();!l.done;l=e.next())l.value.vh(n);return{segments:L,bandwidth:t}}function Ig(e,t){if(e==ct){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function id(e){return e==ct?"text/vtt":_g.get(e).get("mp4")}function mS(e,t){e=Bn(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.Cc()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function N5(e,t,n,s){var u,l,d,p,g,v,T,b,M,_,L,O,P;return j(function(U){switch(U.g){case 1:return u=Wi,l=mS(e,s),d=l.segment,d.status==2?U.return(id(t)):(p=d.O(),g=new en(p[0]),v=g.ob.split(".").pop(),T=_g.get(t),(b=T.get(v))||(b=Rg.get(v))||(b=Ig(t,n))?U.return(b):(_=1,L=fn(p,e.g.retryParameters),le(U,2),L.method="HEAD",D(U,zr(e,L,u,{type:_}).promise,4)));case 4:O=U.h,M=O.headers["content-type"],V(U,3);break;case 2:if(P=re(U),!P||P.code!=1002&&P.code!=1001){U.u(3);break}return L.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(L.headers.Range="bytes=0-0"),D(U,zr(e,L,u,{type:_}).promise,6);case 6:O=U.h,M=O.headers["content-type"];case 3:if(!M){U.u(7);break}if(b=M.toLowerCase().split(";")[0],b!="application/octet-stream"){U.u(8);break}if(O.data.byteLength){U.u(9);break}return L.method="GET",D(U,zr(e,L,u,{type:_}).promise,10);case 10:O=U.h;case 9:$s(Ze(O.data))&&(b="video/mp2t");case 8:if(b!="application/octet-stream")return U.return(b);case 7:return U.return(id(t))}})}function yS(e,t,n,s,u,l,d){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(s)||void 0,e.hdr=u||void 0,e.videoLayout=l||void 0,e.colorGamut=d||void 0)}function Mg(e,t,n){return zr(e,fn(t,e.g.retryParameters),0,{type:n?2:3})}function vS(e){var t,n,s,u,l,d;return j(function(p){switch(p.g){case 1:return e.h?(le(p,2),t=Date.now(),D(p,e.update(),4)):p.return();case 4:n=Date.now(),Bn(e)&&(s=(n-t)/1e3,e.eb.sample(1,s),u=0<e.g.updatePeriod?e.g.updatePeriod:e.o,l=Math.max(0,u-gi(e.eb)),e.C.ia(l)),V(p,3);break;case 2:if(d=re(p),!e.h)return p.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(d),p.return();d.severity=1,e.h.onError(d),e.C.ia(.1);case 3:if(!e.h)return p.return();e.h.onManifestUpdated(),ne(p)}})}function Bn(e){return e.za!=sd}function rd(e,t){e.za=t,e.l&&e.l.Zc(!Bn(e)),Bn(e)||e.C.stop()}function zr(e,t,n,s){if(!e.W)throw new q(2,7,7001);return s||(s={}),s.isPreload=e.Zb(),t=e.h.networkingEngine.request(n,t,s),zo(e.W,t),t}function od(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function U5(e,t,n,s){var u,l,d,p,g,v;return j(function(T){if(T.g==1){if(n=="video/mp2t")throw new q(2,4,4040);if(f.shakaMediaKeysPolyfill==="apple")throw new q(2,4,4041);if(u=Pt(t,"METHOD"),l=["SAMPLE-AES","SAMPLE-AES-CTR"],!l.includes(u))return T.return(null);d="cenc",u=="SAMPLE-AES"&&(d="cbcs"),p=Pt(t,"URI"),g=Tr("com.apple.fps",d,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],p);var b=new en(p).Cb.replace(/-/g,"").toLowerCase();return(v=b.length===32&&/^[0-9a-f]+$/.test(b)?b:null)||!s?T.u(2):D(T,wS(e,s),3)}return T.g!=2&&(v=T.h),v&&g.keyIds.add(v),T.return(g)})}function xS(e,t,n,s,u,l){var d,p,g,v,T,b,M,_,L,O,P,U;return j(function(B){switch(B.g){case 1:if(n=="video/mp2t")throw new q(2,4,4040);if(f.shakaMediaKeysPolyfill==="apple")throw new q(2,4,4041);if(d=Pt(t,"METHOD"),p=["SAMPLE-AES","SAMPLE-AES-CTR"],!p.includes(d))return B.return(null);if(g=po(s(),Pt(t,"URI"),l),g[0].startsWith("data:text/plain;base64,")){v=Sr(Ii(g[0].split("data:text/plain;base64,").pop())),B.u(2);break}return T=g.sort().join(""),e.va.has(T)||(b=fn(g,e.g.retryParameters),M=zr(e,b,6).promise,e.va.set(T,M)),D(B,e.va.get(T),3);case 3:_=B.h,v=Sr(_.data);case 2:if(L="00000000000000000000000000000000",!u){B.u(4);break}return D(B,wS(e,u),5);case 5:(O=B.h)&&(L=O);case 4:return P=new Map,P.set(L,v),U="cenc",d=="SAMPLE-AES"&&(U="cbcs"),B.return(Ny(P,U))}})}function wS(e,t){var n,s,u,l;return j(function(d){return d.g==1?(n=null,e.wa.has(t)?(n=e.wa.get(t),d.u(2)):(s=Pa(t.O(),t.Bc(),t.zc(),e.g.retryParameters),u=Wi,D(d,zr(e,s,u,{type:0}).promise,3))):(d.g!=2&&(l=d.h,t.ge(l.data),n=Ok(l.data),e.wa.set(t,n)),d.return(n))})}be("shaka.hls.HlsParser",td);var Rg=new Map().set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),B5=new Map().set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),F5=new Map().set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),j5=new Map().set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),$5=new Map().set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),_g=new Map().set("audio",B5).set("video",F5).set("text",j5).set("image",$5),SS=new Set(["video/mp2t"].concat(S(to))),sd="VOD",TS="EVENT",ud="LIVE",z5={cj:sd,Bl:TS,Ll:ud};Vo("application/x-mpegurl",function(){return new td}),Vo("application/vnd.apple.mpegurl",function(){return new td});function ad(e){return Hc(e)}var V5=new Map().set("com.microsoft.playready",ad).set("com.microsoft.playready.recommendation",ad).set("com.microsoft.playready.software",ad).set("com.microsoft.playready.hardware",ad);function Lg(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.C=new $i(5),this.o=new ht(function(){H5(e)}),this.B=new Rs,this.m=new Map,this.A=function(){return!1}}y=Lg.prototype,y.configure=function(e,t){this.g=e,t&&(this.A=t)},y.start=function(e,t){var n=this;return j(function(s){if(s.g==1)return n.l=[e],n.h=t,D(s,Dg(n),2);if(!n.h)throw new q(2,7,7001);return s.return(n.j)})};function H5(e){var t;j(function(n){switch(n.g){case 1:return le(n,2),D(n,Dg(e),4);case 4:V(n,3);break;case 2:t=re(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();ne(n)}})}y.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.B.destroy()},y.update=function(){var e=this,t;return j(function(n){if(n.g==1)return le(n,2),D(n,Dg(e),4);if(n.g!=2)return V(n,0);if(t=re(n),!e.h||!t)return n.return();e.h.onError(t),ne(n)})},y.onExpirationUpdated=function(){},y.onInitialVariantChosen=function(){},y.banLocation=function(){},y.setMediaElement=function(){};function Dg(e){var t,n,s,u,l,d,p;return j(function(g){if(g.g==1)return t=fn(e.l,e.g.retryParameters),n=e.h.networkingEngine,s=Date.now(),u=n.request(0,t,{type:5,isPreload:e.A()}),zo(e.B,u),D(g,u.promise,2);if(l=g.h,!e.h)return g.return();l.uri&&!e.l.includes(l.uri)&&e.l.unshift(l.uri);var v=l.uri,T=l.data,b=e.g.mss.manifestPreprocessor;if(b!=fc){if(st("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),T=kw(T,"SmoothStreamingMedia"),!T)throw new q(2,4,4046,v);b(T),T=zi(T.outerHTML)}var M=ra(T,"SmoothStreamingMedia");if(!M)throw new q(2,4,4046,v);if(v=e.g.mss.manifestPreprocessorTXml,v!=cc&&v(M),e.i||(e.i=new qe(null,0)),v=Qe(M,"IsLive",ff,!1))throw new q(2,4,4047);e.i.Zc(!v),b=Qe(M,"TimeScale",bn,1e7),T=Qe(M,"DVRWindowLength",bn),v&&(T===0||isNaN(T))&&(T=1/0);var _=Qe(M,"CanSeek",ff,!1);T===0&&_&&(T=1/0),_=null,T&&0<T&&(_=T/b),v&&!isNaN(e.g.availabilityWindowOverride)&&(_=e.g.availabilityWindowOverride),_==null&&(_=1/0),e.i.Gf(_),T=Qe(M,"Duration",bn,1/0),v||e.i.pb(T/b),v={variants:[],textStreams:[],timescale:b,duration:T/b};var L;for(_=kt(M,"Protection"),b=e.g.mss.keySystemsBySystemId,T=[],_=m(_),L=_.next();!L.done;L=_.next())T=T.concat(kt(L.value,"ProtectionHeader"));if(T.length){for(_=[],L=0;L<T.length;L++){var O=T[L],P=O.attributes.SystemID.toLowerCase(),U=b[P];if(U){var B;e:{if(B=tw(O)){B=m(tr(B,"DATA"));for(var $=B.next();!$.done;$=B.next())if($=Yt($.value,"KID")){B=Ii(an($)),B=new Uint8Array([B[3],B[2],B[1],B[0],B[5],B[4],B[7],B[6]].concat(S(B.slice(8)))),B=Sr(B);break e}}B=null}$=Ii(an(O)),P=Ro(P.replace(/-/g,"")),P=[{initData:Pf($,P,new Set,0),initDataType:"cenc",keyId:B}],P=Tr(U,"cenc",P),B&&P.keyIds.add(B),(U=V5.get(U))&&(P.licenseServerUri=U(O)),_.push(P)}}b=_}else b=[];for(L=b,_=[],b=[],T=[],M=kt(M,"StreamIndex"),M=m(M),O=M.next();!O.done;O=M.next()){O=O.value,U=kt(O,"QualityLevel"),P=v.timescale,B=v.duration,$=kt(O,"c");for(var W=[],J=0,G=0;G<$.length;++G){var X=$[G],Y=$[G+1],Q=Qe(X,"t",bn),ie=Qe(X,"d",bn);if(X=Qe(X,"r",Cn),!ie)break;if(Q=Q??J,(X=X||0)&&X--,0>X)if(Y){if(Y=Qe(Y,"t",bn),Y==null)break;if(Q>=Y)break;X=Math.ceil((Y-Q)/ie)-1}else{if(B==1/0)break;if(Q/P>=B)break;X=Math.ceil((B*P-Q)/ie)-1}for(Y=0;Y<=X;++Y)J=Q+ie,W.push({start:Q/P,end:J/P,Bh:Q}),Q=J}for(P=W,U=m(U),B=U.next();!B.done;B=U.next())(B=G5(e,O,B.value,P,L,v))&&(B.type!="audio"||e.g.disableAudio?B.type!="video"||e.g.disableVideo?B.type!=ct||e.g.disableText||T.push(B):b.push(B):_.push(B))}for(M=[],_=m(0<_.length?_:[null]),L=_.next();!L.done;L=_.next())for(L=L.value,O=m(0<b.length?b:[null]),W=O.next();!W.done;W=O.next())U=M,P=U.push,B=e,$=L,W=W.value,G=0,$&&$.bandwidth&&0<$.bandwidth&&(G+=$.bandwidth),W&&W.bandwidth&&0<W.bandwidth&&(G+=W.bandwidth),B={id:B.s++,language:$?$.language:"und",disabledUntilTime:0,primary:!!$&&$.primary||!!W&&W.primary,audio:$,video:W,bandwidth:G,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},P.call(U,B);v.variants=M,v.textStreams=T,e.j?(e.j.variants=v.variants,e.j.textStreams=v.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:v.variants,textStreams:v.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.hf()),Promise.resolve(),d=Date.now(),p=(d-s)/1e3,e.C.sample(1,p),ne(g)})}function G5(e,t,n,s,u,l){var d=t.attributes.Type;if(d!=="audio"&&d!=="video"&&d!=="text")return ft("Ignoring unrecognized type:",d),null;var p=t.attributes.Language,g=e.s++,v=Qe(n,"Bitrate",dr),T=Qe(n,"MaxWidth",dr),b=Qe(n,"MaxHeight",dr),M=Qe(n,"Channels",dr),_=Qe(n,"SamplingRate",dr),L=l.duration;s.length&&(L=s[s.length-1].end-s[0].start);var O=e.i.getDuration();e.i.pb(Math.min(L,O));var P={id:g,originalId:t.attributes.Name||String(g),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:v||0,width:T||void 0,height:b||void 0,kind:"",encrypted:0<u.length,drmInfos:u,keyIds:new Set,language:Tt(p||"und"),originalLanguage:p,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:M,audioSamplingRate:_,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:L,timescale:l.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((u=t.attributes.Subtype)&&((u=Q5.get(u))&&P.roles.push(u),u==="main"&&(P.primary=!0)),u=n.attributes.FourCC,(u===null||u==="")&&(u=t.attributes.FourCC),!u){if(d==="audio")u="AAC";else if(d==="video")return ft('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!q5.includes(u.toUpperCase()))return ft("Codec not supported:",u),null;switch(n=X5(n,d,u,P),P.mssPrivateData.codecPrivateData=n,d){case"audio":if(!n)return ft("Quality unsupported without CodecPrivateData",d),null;P.type="audio",P.mimeType="mss/audio/mp4",P.codecs=W5(u,n);break;case"video":if(!n)return ft("Quality unsupported without CodecPrivateData",d),null;P.type="video",P.mimeType="mss/video/mp4",P.codecs=K5(n);break;case"text":P.type=ct,P.mimeType="application/mp4",(u==="TTML"||u==="DFXP")&&(P.codecs="stpp")}return P.fullMimeTypes.add(rn(P.mimeType,P.codecs)),P.createSegmentIndex=function(){if(P.segmentIndex)return Promise.resolve();if(e.m.has(P.id))var U=e.m.get(P.id);else U=[],P.type=="video"&&(U=P.mssPrivateData.codecPrivateData.split("00000001").slice(1)),U={id:P.id,type:P.type,codecs:P.codecs,encrypted:P.encrypted,timescale:P.mssPrivateData.timescale,duration:P.mssPrivateData.duration,Ab:U,Ea:new Uint8Array([]),Na:new Uint8Array([]),Wa:0,Xa:0,data:null,stream:P},U=Us(new Ns([U])),e.m.set(P.id,U);return U=Y5(e,new Jn(function(){return[]},0,null,Jf(P),P.mssPrivateData.timescale,U,null,P.encrypted),P,t,s),P.segmentIndex=new vt(U),Promise.resolve()},P.closeSegmentIndex=function(){P.segmentIndex&&(P.segmentIndex.release(),P.segmentIndex=null)},P}function X5(e,t,n,s){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=s.channelsCount||2,e=s.audioSamplingRate||44100;var u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return s=u[e],n==="AACH"?(n=new Uint8Array(4),e=u[2*e],n[0]=40|s>>1,n[1]=s<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|s>>1,n[1]=s<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function W5(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function K5(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function Y5(e,t,n,s,u){var l=s.attributes.Url.replace("{bitrate}",String(n.bandwidth));s=[],u=m(u);for(var d=u.next(),p={};!d.done;p={Jf:void 0},d=u.next())p.Jf=d.value,s.push(new He(p.Jf.start,p.Jf.end,function(g){return function(){return yn(e.l,[l.replace("{start time}",String(g.Jf.Bh))])}}(p),0,null,t,0,0,n.mssPrivateData.duration));return s}be("shaka.mss.MssParser",Lg);var q5="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),Q5=new Map().set("CAPT","main").set("SUBT","alternate").set("DESC","main");Vo("application/vnd.ms-sstr+xml",function(){return new Lg});function CS(e,t,n,s,u,l,d){if(200<=n&&299>=n&&n!=202||n==304)return{uri:u||s,originalUri:s,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:l};l=null;try{l=lr(t)}catch{}throw new q(n==401||n==403?2:1,1,1001,s,n,l,e,d,u||s)}function Pg(){}function ld(e,t,n,s,u,l){var d=new iM;Ls(t.headers).forEach(function(T,b){d.append(b,T)});var p=new tM,g={Lh:!1,Yi:!1};if(e=J5(e,t,n,{body:t.body||void 0,headers:d,method:t.method,signal:p.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},g,s,u,t.streamDataCallback,l.minBytesForProgressEvents||0),e=new nn(e,function(){return g.Lh=!0,p.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var v=new ht(function(){g.Yi=!0,p.abort()});v.ia(t/1e3),e.finally(function(){v.stop()})}return e}function J5(e,t,n,s,u,l,d,p,g){var v,T,b,M,_,L,O,P,U,B,$,W,J,G,X;return j(function(Y){switch(Y.g){case 1:return v=eM,T=nM,M=new ArrayBuffer(0),L=_=0,O={},P=Date.now(),le(Y,2),D(Y,v(e,s),4);case 4:if(b=Y.h,O=Z5(b.headers),d(O),s.method=="HEAD"){Y.u(5);break}return B=(U=b.headers.get("Content-Length"))?parseInt(U,10):0,b.body?($=b.clone().body.getReader(),W=function(Q){function ie(){var te,Z,ve,de;return j(function(ae){switch(ae.g){case 1:return le(ae,2),D(ae,$.read(),4);case 4:te=ae.h,V(ae,3);break;case 2:return re(ae),ae.return();case 3:if(te.done){ae.u(5);break}if(_+=te.value.byteLength,!p){ae.u(5);break}return D(ae,p(te.value),5);case 5:Z=Date.now(),ve=_-L,(100<Z-P&&ve>=g||te.done)&&(de=te.done?0:B-_,l(Z-P,ve,de),L=_,P=Z),te.done?Q.close():(Q.enqueue(te.value),ie()),ne(ae)}})}ie()},new T({start:W}),D(Y,b.arrayBuffer(),8)):D(Y,b.arrayBuffer(),9);case 8:M=Y.h,Y.u(5);break;case 9:M=Y.h,J=Date.now(),l(J-P,M.byteLength,0);case 5:t.headers.Range&&(G=t.headers.Range.replace("bytes=","").split("-").filter(function(Q){return Q}).map(function(Q){return parseInt(Q,10)}),G.length==2&&M.byteLength!=G[1]-G[0]+1&&ft("Payload length does not match range requested bytes",t,b)),V(Y,3);break;case 2:throw X=re(Y),u.Lh?new q(1,1,7001,e,n):u.Yi?new q(1,1,1003,e,n):new q(1,1,1002,e,X,n);case 3:return Y.return(CS(O,M,b.status,e,b.url,t,n))}})}function Z5(e){var t={};return e.forEach(function(n,s){t[s.trim()]=n}),t}function bS(){if(f.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(f.Response){if(!new Response("").body)return!1}else return!1;return!(!f.fetch||"polyfill"in f.fetch||!f.AbortController)}be("shaka.net.HttpFetchPlugin",Pg),Pg.isSupported=bS,Pg.parse=ld;var eM=f.fetch,tM=f.AbortController,nM=f.ReadableStream,iM=f.Headers;bS()&&(Ir("http",ld,2,!0),Ir("https",ld,2,!0),Ir("blob",ld,2,!0));function kS(){}function fd(e,t,n,s,u,l){var d=new rM,p=Date.now(),g=0,v=new Promise(function(T,b){d.open(t.method,e,!0),d.responseType="arraybuffer",d.timeout=t.retryParameters.timeout,d.withCredentials=t.allowCrossSiteCredentials;var M={};d.onabort=function(){b(new q(1,1,7001,e,n))},d.onreadystatechange=function(){if(d.readyState===XMLHttpRequest.HEADERS_RECEIVED){var L=d.getAllResponseHeaders().trim().split(`\r
`),O={};L=m(L);for(var P=L.next();!P.done;P=L.next())P=P.value.split(": "),O[P[0].toLowerCase()]=P.slice(1).join(": ");M=O,u(M)}},d.onload=function(L){var O=d.response;try{s(Date.now()-p,L.loaded-g,0);var P=CS(M,O,d.status,e,d.responseURL,t,n);T(P)}catch(U){b(U)}},d.onerror=function(L){b(new q(1,1,1002,e,L,n))},d.ontimeout=function(){b(new q(1,1,1003,e,n))},d.onprogress=function(L){var O=Date.now(),P=l.minBytesForProgressEvents||0,U=L.loaded-g;(100<O-p&&U>=P||L.lengthComputable&&L.loaded==L.total)&&(s(O-p,U,d.readyState==4?0:L.total-L.loaded),g=L.loaded,p=O)};for(var _ in t.headers)d.setRequestHeader(_.toLowerCase(),t.headers[_]);d.send(t.body)});return new nn(v,function(){return d.abort(),Promise.resolve()})}be("shaka.net.HttpXHRPlugin",kS),kS.parse=fd;var rM=f.XMLHttpRequest;Ir("http",fd,1,!0),Ir("https",fd,1,!0),Ir("blob",fd,1,!0);function AS(e,t,n,s,u){this.g=e,this.i=t,this.groupId=n,this.h=s,this.j=u}function Og(e){var t=e.Yb(!1);return t?wr(t):e.O().map(function(n){return"{"+encodeURI(n.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function oM(e,t){return Pa(e.g.O(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function ES(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function IS(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}ES.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}};function MS(e){return e.i==0?0:e.j/e.i}function Ng(e){var t=this;this.s=e,this.i=new Map,this.h=new _s(function(){return Ug(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new ES,this.l=!1}Ng.prototype.destroy=function(){return this.h.destroy()};function sM(e,t,n){e.o=t,e.m=n}function Ug(e){e.l=!0;var t=e.j.map(function(n){return n()});return e.j=[],Promise.all(t)}Ng.prototype.queue=function(e,t,n,s,u){var l=this;Nt(this.h);var d=(this.i.get(e)||Promise.resolve()).then(function(){var p,g,v,T,b,M,_;return j(function(L){if(L.g==1)return D(L,lM(l,t),2);if(p=L.h,l.h.g)throw new q(2,9,7001);if(s)for(T in g=Ze(p),v=new gp(g),v.data)b=Number(T),M=v.data[b],_=v.g[b],l.m(M,_);return l.g.close(n,p.byteLength),l.o(MS(l.g),l.g.g),L.return(u(p))})});return this.i.set(e,d),d};function uM(e,t,n,s,u,l){Nt(e.h);var d=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new q(2,9,7001);if(u){var p=Ze(n);p=new gp(p);for(var g in p.data){var v=Number(g);e.m(p.data[v],p.g[v])}}return e.g.close(s,n.byteLength),e.o(MS(e.g),e.g.g),l(n)});e.i.set(t,d)}function aM(e){return j(function(t){return t.g==1?D(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}function lM(e,t){var n,s,u,l;return j(function(d){return d.g==1?(n=Wi,s=e.s.request(n,t),u=function(){return s.abort()},e.j.push(u),D(d,s.promise,2)):(l=d.h,Vi(e.j,u),d.return(l.data))})}function cd(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new _t,e.onabort=function(s){s.preventDefault(),n.g.reject()},e.onerror=function(s){s.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}cd.prototype.abort=function(){var e=this;return j(function(t){if(t.g==1){try{e.i.abort()}catch{}return le(t,2),D(t,e.g,4)}if(t.g!=2)return V(t,0);re(t),ne(t)})};function Bg(e,t){return new Promise(function(n,s){var u=e.h.openCursor();u.onerror=s,u.onsuccess=function(){var l;return j(function(d){if(d.g==1)return u.result==null?(n(),d.return()):(l=u.result,D(d,t(l.key,l.value,l),2));l.continue(),ne(d)})}})}cd.prototype.store=function(){return this.h},cd.prototype.promise=function(){return this.g};function Fg(e){this.h=e,this.g=[]}Fg.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function ts(e,t){return dd(e,t,"readwrite")}function dd(e,t,n){n=e.h.transaction([t],n);var s=new cd(n,t);return e.g.push(s),s.promise().then(function(){Vi(e.g,s)},function(){Vi(e.g,s)}),s}function ns(e,t,n){this.h=new Fg(e),this.i=t,this.g=n}y=ns.prototype,y.destroy=function(){return this.h.destroy()},y.hasFixedKeySpace=function(){return!0},y.addSegments=function(){return RS(this.i)},y.removeSegments=function(e,t){return _S(this,this.i,e,t)},y.getSegments=function(e){var t=this,n;return j(function(s){return s.g==1?D(s,LS(t,t.i,e),2):(n=s.h,s.return(n.map(function(u){return t.Nh(u)})))})},y.addManifests=function(){return RS(this.g)},y.updateManifest=function(){return Promise.reject(new q(2,9,9016,"Cannot modify values in "+this.g))};function fM(e,t,n){e=ts(e.h,e.g);var s=e.store();return s.get(t).onsuccess=function(){s.put(n,t)},e.promise()}y.updateManifestExpiration=function(e,t){var n=ts(this.h,this.g),s=n.store();return s.get(e).onsuccess=function(u){(u=u.target.result)&&(u.expiration=t,s.put(u,e))},n.promise()},y.removeManifests=function(e,t){return _S(this,this.g,e,t)},y.getManifests=function(e){var t=this,n;return j(function(s){return s.g==1?D(s,LS(t,t.g,e),2):(n=s.h,s.return(Promise.all(n.map(function(u){return t.Kd(u)}))))})},y.getAllManifests=function(){var e=this,t,n;return j(function(s){return s.g==1?(t=dd(e.h,e.g,"readonly"),n=new Map,D(s,Bg(t,function(u,l){var d;return j(function(p){if(p.g==1)return D(p,e.Kd(l),2);d=p.h,n.set(u,d),ne(p)})}),2)):s.g!=3?D(s,t.promise(),3):s.return(n)})},y.Nh=function(e){return e},y.Kd=function(e){return Promise.resolve(e)};function RS(e){return Promise.reject(new q(2,9,9011,"Cannot add new value to "+e))}y.add=function(e,t){var n=this,s,u,l,d,p,g,v;return j(function(T){if(T.g==1){for(s=ts(n.h,e),u=s.store(),l=[],d=m(t),p=d.next(),g={};!p.done;g={bh:void 0},p=d.next())v=p.value,g.bh=u.add(v),g.bh.onsuccess=function(b){return function(){l.push(b.bh.result)}}(g);return D(T,s.promise(),2)}return T.return(l)})};function _S(e,t,n,s){e=ts(e.h,t),t=e.store(),n=m(n);for(var u=n.next(),l={};!u.done;l={Og:void 0},u=n.next())l.Og=u.value,t.delete(l.Og).onsuccess=function(d){return function(){return s(d.Og)}}(l);return e.promise()}function LS(e,t,n){var s,u,l,d,p,g,v;return j(function(T){if(T.g==1){for(s=dd(e.h,t,"readonly"),u=s.store(),l={},d=[],p=m(n),g=p.next(),v={};!g.done;v={Af:void 0,cf:void 0},g=p.next())v.cf=g.value,v.Af=u.get(v.cf),v.Af.onsuccess=function(b){return function(){b.Af.result==null&&d.push(b.cf),l[b.cf]=b.Af.result}}(v);return D(T,s.promise(),2)}if(d.length)throw new q(2,9,9012,"Could not find values for "+d);return T.return(n.map(function(b){return l[b]}))})}function fl(e){this.g=new Fg(e)}fl.prototype.destroy=function(){return this.g.destroy()},fl.prototype.getAll=function(){var e=this,t,n;return j(function(s){return s.g==1?(t=dd(e.g,"session-ids","readonly"),n=[],D(s,Bg(t,function(u,l){n.push(l)}),2)):s.g!=3?D(s,t.promise(),3):s.return(n)})},fl.prototype.add=function(e){var t=ts(this.g,"session-ids"),n=t.store();e=m(e);for(var s=e.next();!s.done;s=e.next())n.add(s.value);return t.promise()},fl.prototype.remove=function(e){var t=this,n;return j(function(s){return s.g==1?(n=ts(t.g,"session-ids"),D(s,Bg(n,function(u,l,d){e.includes(l.sessionId)&&d.delete()}),2)):D(s,n.promise(),0)})};function ti(){this.g=new Map}ti.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},ti.prototype.init=function(){var e=this;cl.forEach(function(u,l){(u=u())&&e.g.set(l,u)});for(var t=[],n=m(this.g.values()),s=n.next();!s.done;s=n.next())t.push(s.value.init());return Promise.all(t)};function DS(e){var t=null;if(e.g.forEach(function(n,s){n.getCells().forEach(function(u,l){u.hasFixedKeySpace()||t||(t={path:{Qb:s,bb:l},bb:u})})}),t)return t;throw new q(2,9,9013,"Could not find a cell that supports add-operations")}function cM(e,t){e.g.forEach(function(n,s){n.getCells().forEach(function(u,l){t({Qb:s,bb:l},u)})})}function hd(e,t,n){if(e=e.g.get(t),!e)throw new q(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new q(2,9,9013,"Could not find cell with name "+n);return t}function dM(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function hM(e){var t=Array.from(e.g.keys());if(!t.length)throw new q(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function pM(e){var t,n,s;return j(function(u){return u.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(s=cl,s.forEach(function(l){(l=l())&&t.push(l)})),D(u,Promise.all(t.map(function(l){return l.erase()})),2)):n?u.u(0):D(u,Promise.all(t.map(function(l){return l.destroy()})),0)})}function PS(e,t){cl.set(e,t)}be("shaka.offline.StorageMuxer",ti),ti.unregister=function(e){cl.delete(e)},ti.register=PS,ti.prototype.destroy=ti.prototype.destroy;var cl=new Map;function dl(){ns.apply(this,arguments)}ue(dl,ns),dl.prototype.updateManifestExpiration=function(e,t){var n=this,s,u,l;return j(function(d){return s=ts(n.h,n.g),u=s.store(),l=new _t,u.get(e).onsuccess=function(p){(p=p.target.result)?(p.expiration=t,u.put(p),l.resolve()):l.reject(new q(2,9,9012,"Could not find values for "+e))},D(d,Promise.all([s.promise(),l]),0)})},dl.prototype.Kd=function(e){var t,n,s,u,l,d;return j(function(p){if(p.g==1){for(t=[],n=0;n<e.periods.length;++n)s=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=s-e.periods[n].startTime,l=gM(e.periods[n],u),t.push(l);return D(p,mw(t),2)}return d=p.h,p.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:d,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function gM(e,t){yM(e);for(var n=m(e.streams),s=n.next();!s.done;s=n.next());return e.streams.map(function(u){return mM(u,e.startTime,t)})}function mM(e,t,n){var s=e.initSegmentUri?OS(e.initSegmentUri):null,u=t+e.presentationTimeOffset,l=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:s,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(d){var p=OS(d.uri);return{startTime:t+d.startTime,endTime:t+d.endTime,dataKey:p,initSegmentKey:s,appendWindowStart:t,appendWindowEnd:l,timestampOffset:u,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}dl.prototype.Nh=function(e){return{data:e.data}};function OS(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new q(2,9,9004,"Could not parse uri "+e)}function yM(e){var t=e.streams.filter(function(p){return p.contentType=="audio"});if(e=e.streams.filter(function(p){return p.contentType=="video"}),!t.every(function(p){return p.variantIds})||!e.every(function(p){return p.variantIds})){for(var n=m(t),s=n.next();!s.done;s=n.next())s.value.variantIds=[];for(n=m(e),s=n.next();!s.done;s=n.next())s.value.variantIds=[];if(n=0,e.length&&!t.length){s=n++;for(var u=m(e),l=u.next();!l.done;l=u.next())l.value.variantIds.push(s)}if(!e.length&&t.length)for(s=n++,u=m(t),l=u.next();!l.done;l=u.next())l.value.variantIds.push(s);if(e.length&&t.length)for(t=m(t),s=t.next();!s.done;s=t.next())for(s=s.value,u=m(e),l=u.next();!l.done;l=u.next()){l=l.value;var d=n++;s.variantIds.push(d),l.variantIds.push(d)}}}function pd(){ns.apply(this,arguments)}ue(pd,ns),pd.prototype.Kd=function(e){var t,n,s,u,l,d;return j(function(p){if(p.g==1){for(t=[],n=0;n<e.periods.length;++n){s=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,u=s-e.periods[n].startTime;for(var g=e.periods[n],v=[],T=m(g.streams),b=T.next();!b.done;b=T.next())b=b.value,b.variantIds.length!=0&&v.push(vM(b,g.startTime,g.startTime+u));l=v,t.push(l)}return D(p,mw(t),2)}return d=p.h,p.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:d,sequenceMode:!1})})};function vM(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(s){return{startTime:t+s.startTime,endTime:t+s.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:s.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function jg(){ns.apply(this,arguments)}ue(jg,ns),y=jg.prototype,y.hasFixedKeySpace=function(){return!1},y.addSegments=function(e){return this.add(this.i,e)},y.addManifests=function(e){return this.add(this.g,e)},y.updateManifest=function(e,t){return fM(this,e,t)},y.Kd=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function NS(){this.m=this.j=this.i=this.h=this.g=this.l=null}y=NS.prototype,y.init=function(){var e=this,t=new _t,n=!1,s=new ht(function(){n=!0,t.reject(new q(2,9,9017))});typeof gd=="number"&&0<gd&&s.ia(gd);var u=f.indexedDB.open("shaka_offline_db",5);return u.onsuccess=function(){if(!n){s.stop();var l=u.result;e.l=l;var d=l.objectStoreNames;d=d.contains("manifest")&&d.contains("segment")?new dl(l,"segment","manifest"):null,e.g=d,d=l.objectStoreNames,d=d.contains("manifest-v2")&&d.contains("segment-v2")?new pd(l,"segment-v2","manifest-v2"):null,e.h=d,d=l.objectStoreNames,d=d.contains("manifest-v3")&&d.contains("segment-v3")?new pd(l,"segment-v3","manifest-v3"):null,e.i=d,d=l.objectStoreNames,d=d.contains("manifest-v5")&&d.contains("segment-v5")?new jg(l,"segment-v5","manifest-v5"):null,e.j=d,l=l.objectStoreNames.contains("session-ids")?new fl(l):null,e.m=l,t.resolve()}},u.onupgradeneeded=function(){for(var l=u.result,d=m(["segment-v5","manifest-v5","session-ids"]),p=d.next();!p.done;p=d.next())p=p.value,l.objectStoreNames.contains(p)||l.createObjectStore(p,{autoIncrement:!0})},u.onerror=function(l){n||(s.stop(),t.reject(new q(2,9,9001,u.error)),l.preventDefault())},t},y.destroy=function(){var e=this;return j(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return D(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return D(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return D(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return D(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return D(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),ne(t)}})},y.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},y.getEmeSessionCell=function(){return this.m},y.erase=function(){var e=this;return j(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return D(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return D(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return D(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return D(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),D(t,xM(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,D(t,e.init(),0)}})};function xM(){var e=new _t,t=f.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new q(2,9,9001,t.error)),n.preventDefault()},e}var gd=5;be("shaka.offline.indexeddb.StorageMechanismOpenTimeout",gd),PS("idb",function(){return Be().uh()?new NS:null});function mr(e,t,n,s){this.g=e,this.i=t,this.h=n,this.l=s,this.j=["offline:",e,"/",t,"/",n,"/",s].join("")}mr.prototype.Qb=function(){return this.i},mr.prototype.bb=function(){return this.h},mr.prototype.key=function(){return this.l},mr.prototype.toString=function(){return this.j};function $g(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var s=e[3];return s&&t!=null?new mr(t,n,s,Number(e[4])):null}function US(e,t){this.h=e,this.g=t}function BS(e,t){var n=new qe(null,0);n.pb(t.duration);var s=t.streams.filter(function(v){return v.type=="audio"}),u=t.streams.filter(function(v){return v.type=="video"});s=wM(e,s,u,n),u=t.streams.filter(function(v){return v.type==ct}).map(function(v){return md(e,v,n)});var l=t.streams.filter(function(v){return v.type=="image"}).map(function(v){return md(e,v,n)}),d=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var p=m(s.values()),g=p.next();!g.done;g=p.next())g=g.value,g.audio&&g.audio.encrypted&&(g.audio.drmInfos=d),g.video&&g.video.encrypted&&(g.video.drmInfos=d);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(s.values()),textStreams:u,imageStreams:l,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function wM(e,t,n,s){for(var u=new Set,l=m(t),d=l.next();!d.done;d=l.next()){d=m(d.value.variantIds);for(var p=d.next();!p.done;p=d.next())u.add(p.value)}for(l=m(n),d=l.next();!d.done;d=l.next())for(d=m(d.value.variantIds),p=d.next();!p.done;p=d.next())u.add(p.value);for(l=new Map,u=m(u),d=u.next();!d.done;d=u.next())d=d.value,l.set(d,{id:d,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),u=t.next();!u.done;u=t.next())for(d=u.value,u=md(e,d,s),d=m(d.variantIds),p=d.next();!p.done;p=d.next())p=l.get(p.value),p.language=u.language,p.primary=p.primary||u.primary,p.audio=u;for(n=m(n),t=n.next();!t.done;t=n.next())for(u=t.value,t=md(e,u,s),u=m(u.variantIds),d=u.next();!d.done;d=u.next())d=l.get(d.value),d.primary=d.primary||t.primary,d.video=t;return l}function md(e,t,n){var s=t.segments.map(function(u){return SM(e,u,t)});return n.$d(s),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vt(s),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([rn(t.mimeType,t.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function SM(e,t,n){var s=new mr("segment",e.h,e.g,t.dataKey);return e=new He(t.startTime,t.endTime,function(){return[s.toString()]},0,null,t.initSegmentKey!=null?TM(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.Hf(t.thumbnailSprite),e}function TM(e,t){var n=new mr("segment",e.h,e.g,t);return new Jn(function(){return[n.toString()]},0,null)}function FS(){this.g=null}y=FS.prototype,y.configure=function(){},y.start=function(e,t){var n=this,s,u,l,d,p,g,v;return j(function(T){switch(T.g){case 1:if(s=$g(e),n.g=s,s==null||s.g!="manifest")throw new q(2,1,9004,e);return u=new ti,me(T,2),D(T,u.init(),4);case 4:return D(T,hd(u,s.Qb(),s.bb()),5);case 5:return l=T.h,D(T,l.getManifests([s.key()]),6);case 6:return d=T.h,p=d[0],g=new US(s.Qb(),s.bb()),v=BS(g,p),t.makeTextStreamsForClosedCaptions(v),T.return(v);case 2:return H(T),D(T,u.destroy(),7);case 7:z(T,0)}})},y.stop=function(){return Promise.resolve()},y.update=function(){},y.onExpirationUpdated=function(e,t){var n=this,s,u,l,d,p,g,v;return j(function(T){switch(T.g){case 1:return s=n.g,u=new ti,le(T,2,3),D(T,u.init(),5);case 5:return D(T,hd(u,s.Qb(),s.bb()),6);case 6:return l=T.h,D(T,l.getManifests([s.key()]),7);case 7:if(d=T.h,p=d[0],g=p.sessionIds.includes(e),v=p.expiration==null||p.expiration>t,!g||!v){T.u(3);break}return D(T,l.updateManifestExpiration(s.key(),t),3);case 3:return H(T),D(T,u.destroy(),10);case 10:z(T,0);break;case 2:re(T),T.u(3)}})},y.onInitialVariantChosen=function(){},y.banLocation=function(){},y.setMediaElement=function(){},Vo("application/x-offline-manifest",function(){return new FS});function jS(){}function $S(e,t){var n=$g(e);return n&&n.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t},e=Ms(e)):e=n&&n.g=="segment"?CM(n.key(),n,t):$o(new q(2,1,9004,e)),e}function CM(e,t,n){var s=new ti;return Ms(void 0).Va(function(){return s.init()}).Va(function(){return hd(s,t.Qb(),t.bb())}).Va(function(u){return u.getSegments([t.key()])}).Va(function(u){return{uri:t,data:u[0].data,headers:{},originalRequest:n}}).finally(function(){return s.destroy()})}be("shaka.offline.OfflineScheme",jS),jS.plugin=$S,Ir("offline",$S);function zS(e,t,n){var s,u,l,d,p,g;return j(function(v){switch(v.g){case 1:s=[];for(var T=[],b=m(n),M=b.next();!M.done;M=b.next()){M=M.value;for(var _=!1,L=m(T),O=L.next();!O.done;O=L.next())if(O=O.value,kM(O.info,M)){O.sessionIds.push(M.sessionId),_=!0;break}_||T.push({info:M,sessionIds:[M.sessionId]})}u=m(T),l=u.next();case 2:if(l.done){v.u(4);break}return d=l.value,p=bM(e,t,d),D(v,p,5);case 5:g=v.h,s=s.concat(g),l=u.next(),v.u(2);break;case 4:return v.return(s)}})}function bM(e,t,n){var s,u;return j(function(l){switch(l.g){case 1:return s=new Of({pc:t,onError:function(){},rf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),le(l,2),s.configure(e),D(l,mb(s,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:V(l,3);break;case 2:return re(l),D(l,s.destroy(),5);case 5:return l.return([]);case 3:return u=[],D(l,Promise.all(n.sessionIds.map(function(d){return j(function(p){if(p.g==1)return le(p,2),D(p,xb(s,d),4);if(p.g!=2)return u.push(d),V(p,0);re(p),ne(p)})})),6);case 6:return D(l,s.destroy(),7);case 7:return l.return(u)}})}function kM(e,t){function n(s,u){return s.robustness==u.robustness&&s.contentType==u.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Wh(e.audioCapabilities,t.audioCapabilities,n)&&Wh(e.videoCapabilities,t.videoCapabilities,n)}function AM(e,t,n){var s=t.presentationTimeline.getDuration();return t=VS(t),{offlineUri:null,originalManifestUri:e,duration:s,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function zg(e,t){var n=BS(new US(e.Qb(),e.bb()),t),s=t.appMetadata||{};return n=VS(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:s,isIncomplete:t.isIncomplete||!1}}function VS(e){var t=[],n=Cf(e.variants);n=m(n);for(var s=n.next();!s.done;s=n.next())t.push(Fo(s.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(jo(n.value));return t}function EM(){this.g=new Map}function IM(e,t){var n=t.audio,s=t.video;if(n&&!s&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&s&&e.g.set(s.id,s.bandwidth||t.bandwidth),n&&s){var u=n.bandwidth||393216,l=s.bandwidth||t.bandwidth-u;0>=l&&(l=t.bandwidth),e.g.set(n.id,u),e.g.set(s.id,l)}}function MM(e,t){e.g.set(t.id,t.bandwidth||2048)}function HS(e,t){return e=e.g.get(t),e==null&&(e=0),e}function Tn(e){var t=this;if(e&&e.constructor!=ye)throw new q(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Ob()):(this.h=Qs(),this.g=new $t,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new _s(function(){var s,u,l,d,p;return j(function(g){switch(g.g){case 1:return D(g,Promise.all(t.l.map(function(v){return Ug(v)})),2);case 2:for(s=function(){},u=[],l=m(t.i),d=l.next();!d.done;d=l.next())p=d.value,u.push(p.then(s,s));return D(g,Promise.all(u),3);case 3:if(!n){g.u(4);break}return D(g,t.g.destroy(),4);case 4:t.h=null,t.g=null,ne(g)}})}),this.m=1e9}function Vg(){if(gr(Be()))e:{for(var e=m(cl.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}y=Tn.prototype,y.destroy=function(){return this.j.destroy()},y.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=sc(e,t)),Or(this.h,e)},y.getConfiguration=function(){var e=Qs();return Or(e,this.h,Qs()),e},y.Ob=function(){return this.g},y.store=function(e,t,n,s,u){var l=this,d=this.getConfiguration(),p=new Ng(this.g);return this.l.push(p),t=RM(this,e,t||{},s||[],u||[],function(){var g;return j(function(v){return v.g==1?n?v.u(2):D(v,qo(e,l.g,d.manifest.retryParameters),3):(v.g!=2&&(n=v.h),g=rv(e,n||null),v.return(g()))})},d,p),t=new nn(t,function(){return Ug(p)}),t.finally(function(){Vi(l.l,p)}),XM(this,t)};function RM(e,t,n,s,u,l,d,p){var g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z,ve,de,ae;return j(function(ge){switch(ge.g){case 1:return yd(),v=g=null,T=new ti,_=M=b=null,le(ge,2,3),D(ge,l(),5);case 5:return g=ge.h,D(ge,FM(e,t,g,d),6);case 6:if(L=ge.h,vi(e),O=!L.presentationTimeline.V()&&!L.presentationTimeline.Tc(),!O)throw new q(2,9,9005,t);P=m(s),U=P.next();case 7:if(U.done){ge.u(9);break}return B=U.value,D(ge,jM(e,B,L),10);case 10:$=ge.h,L.imageStreams.push($),vi(e),U=P.next(),ge.u(7);break;case 9:W=m(u),J=W.next();case 11:return J.done?(q1(d.drm.clearKeys,L.variants),Y=L.variants.some(function(Te){if(Te.audio){for(var Ce=m(Te.audio.drmInfos),Pe=Ce.next();!Pe.done;Pe=Ce.next())if(Pe.value.licenseServerUri.startsWith("data:"))return!0}if(Te.video){for(Te=m(Te.video.drmInfos),Ce=Te.next();!Ce.done;Ce=Te.next())if(Ce.value.licenseServerUri.startsWith("data:"))return!0}return!1}),Q=d.offline.usePersistentLicense,Y&&(Q=!1),D(ge,e.hd(L,function(Te){_=_||Te},d,Q),15)):(G=J.value,D(ge,$M(e,L,G.uri,G.language,G.kind,G.mime,G.codecs),14));case 14:X=ge.h,L.textStreams.push(X),vi(e),J=W.next(),ge.u(11);break;case 15:if(v=ge.h,vi(e),_)throw _;return D(ge,LM(L,v,d,Q),16);case 16:return D(ge,T.init(),17);case 17:return vi(e),D(ge,DS(T),18);case 18:return b=ge.h,vi(e),ie=DM(v,L,t,n,d,p,Q),te=ie.lk,Z=ie.yh,D(ge,b.bb.addManifests([te]),19);case 19:if(ve=ge.h,vi(e),M=ve[0],vi(e),_)throw _;return D(ge,_M(e,Z,M,te,p,d,b.bb,L,v,Q),20);case 20:return vi(e),KS(L,te,v,Q),D(ge,b.bb.updateManifest(M,te),21);case 21:return vi(e),de=new mr("manifest",b.path.Qb,b.path.bb,M),ge.return(zg(de,te));case 3:return H(ge),D(ge,T.destroy(),22);case 22:if(!g){ge.u(23);break}return D(ge,g.stop(),23);case 23:if(!v){ge.u(25);break}return D(ge,v.destroy(),25);case 25:z(ge,0);break;case 2:if(ae=re(ge),M==null){ge.u(27);break}return D(ge,GS(M),27);case 27:throw _||ae}})}function _M(e,t,n,s,u,l,d,p,g,v){var T,b,M,_,L,O,P,U,B,$,W;return j(function(J){switch(J.g){case 1:if(T={},b=0,M=function(){if(e.j.g||u.l)throw new q(2,9,7001)},_=function(G,X){var Y,Q,ie,te,Z,ve,de,ae,ge;return j(function(Te){if(Te.g==1){for(Y=m(G),Q=Y.next(),ie={};!Q.done;ie={jc:void 0},Q=Y.next())ie.jc=Q.value,M(),te=oM(ie.jc,l),Z=ie.jc.i,ve=ie.jc.h,de=function(Ce){return function(Pe){var Re,yt,pt,At;return j(function(ut){switch(ut.g){case 1:if(Re=Ce.jc.g,yt=Re.Yb(!1),!Re.aesKey||yt){ut.u(2);break}return D(ut,Xp(Pe,Re.aesKey,Ce.jc.j),3);case 3:Pe=ut.h;case 2:return pt=Og(Re),D(ut,d.addSegments([{data:Pe}]),4);case 4:At=ut.h,M(),T[pt]=At[0],b+=Pe.byteLength,ne(ut)}})}}(ie),ae=ie.jc.g,(ge=ae.Yb(!1))?uM(u,ie.jc.groupId,ge,Z,ve,de):u.queue(ie.jc.groupId,te,Z,ve,de);return D(Te,aM(u),2)}return M(),!X||u.l?Te.u(0):(KS(p,s,g,v),D(Te,d.updateManifest(n,s),0))})},L=!1,le(J,2),!Hg(p)||!L||WS(p)){J.u(4);break}return D(J,_(t.filter(function(G){return G.h}),!0),5);case 5:return M(),t=t.filter(function(G){return!G.h}),O=T,P=b,T={},b=0,D(J,XS(d,n,s,O,P,function(){return vi(e)}),6);case 6:M();case 4:if(L){J.u(7);break}return D(J,_(t,!1),8);case 8:return M(),U=T,B=b,T={},b=0,D(J,XS(d,n,s,U,B,function(){return M()}),9);case 9:M();case 7:V(J,0);break;case 2:return $=re(J),W=Object.values(T),D(J,d.removeSegments(W,function(){}),10);case 10:throw $}})}function GS(e){var t,n,s,u;return j(function(l){switch(l.g){case 1:return t=new ti,D(l,t.init(),2);case 2:return D(l,DS(t),3);case 3:return n=l.h,s=new mr("manifest",n.path.Qb,n.path.bb,e),D(l,t.destroy(),4);case 4:return u=new Tn,D(l,u.remove(s.toString()),0)}})}function XS(e,t,n,s,u,l){var d,p,g,v,T,b,M,_,L,O,P;return j(function(U){switch(U.g){case 1:for(d=!1,le(U,2),p=!0,g=m(n.streams),v=g.next();!v.done;v=g.next())for(T=v.value,b=m(T.segments),M=b.next();!M.done;M=b.next())_=M.value,L=_.pendingSegmentRefId?s[_.pendingSegmentRefId]:null,L!=null&&(_.dataKey=L,_.pendingSegmentRefId=void 0),L=_.pendingInitSegmentRefId?s[_.pendingInitSegmentRefId]:null,L!=null&&(_.initSegmentKey=L,_.pendingInitSegmentRefId=void 0),_.pendingSegmentRefId&&(p=!1),_.pendingInitSegmentRefId&&(p=!1);return n.size+=u,p&&(n.isIncomplete=!1),D(U,e.updateManifest(t,n),4);case 4:d=!0,l(),V(U,0);break;case 2:return O=re(U),D(U,GS(t),5);case 5:if(d){U.u(6);break}return P=Object.values(s),D(U,e.removeSegments(P,function(){}),6);case 6:throw O}})}function LM(e,t,n,s){var u,l,d,p,g,v,T,b,M,_,L,O,P,U,B,$,W,J,G,X,Y,Q,ie,te,Z,ve,de,ae,ge,Te;return j(function(Ce){switch(Ce.g){case 1:return u={width:1/0,height:1/0},Q4(e,n.restrictions,u),D(Ce,h1(t,e,s,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(l=[],d=n.preferredDecodingAttributes,p=n.preferredVideoCodecs,g=n.preferredAudioCodecs,v=n.preferredTextFormats,d1(e,p,g,d,v),T=m(e.variants),b=T.next();!b.done;b=T.next())M=b.value,l.push(Fo(M));for(_=m(e.textStreams),L=_.next();!L.done;L=_.next())O=L.value,l.push(jo(O));for(P=m(e.imageStreams),U=P.next();!U.done;U=P.next())B=U.value,l.push(lp(B));return D(Ce,n.offline.trackSelectionCallback(l),3);case 3:for($=Ce.h,W=e.presentationTimeline.getDuration(),J=0,G=m($),X=G.next();!X.done;X=G.next())Y=X.value,Q=Y.bandwidth*W/8,J+=Q;return le(Ce,4),D(Ce,n.offline.downloadSizeCallback(J),6);case 6:if(ie=Ce.h,!ie)throw new q(2,9,9014);V(Ce,5);break;case 4:throw te=re(Ce),te instanceof q?te:new q(2,9,9015);case 5:for(Z=new Set,ve=new Set,de=new Set,ae=m($),ge=ae.next();!ge.done;ge=ae.next())Te=ge.value,Te.type=="variant"&&Z.add(Te.id),Te.type=="text"&&ve.add(Te.id),Te.type=="image"&&de.add(Te.id);e.variants=e.variants.filter(function(Pe){return Z.has(Pe.id)}),e.textStreams=e.textStreams.filter(function(Pe){return ve.has(Pe.id)}),e.imageStreams=e.imageStreams.filter(function(Pe){return de.has(Pe.id)}),YM(e),ne(Ce)}})}function DM(e,t,n,s,u,l,d){var p=AM(n,t,s),g=u.offline.progressCallback;sM(l,function(L,O){p.size=O,g(p,L)},function(L,O){v&&d&&T==O&&ya(e,"cenc",L)});var v=Hg(t)&&!WS(t),T=null;v&&(T=qM.get(e.g.keySystem));for(var b=new EM,M=m(t.textStreams),_=M.next();!_.done;_=M.next())b.g.set(_.value.id,52);for(M=m(t.imageStreams),_=M.next();!_.done;_=M.next())MM(b,_.value);for(M=m(t.variants),_=M.next();!_.done;_=M.next())IM(b,_.value);return l=VM(l,b,t,u),u=l.streams,l=l.yh,(b=e.g)&&d&&(b.initData=[]),{lk:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Pd(),streams:u,sessionIds:d?V1(e):[],drmInfo:b,appMetadata:s,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},yh:l}}function Hg(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function WS(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function KS(e,t,n,s){if(t.expiration=n.Pd(),n=V1(n),t.sessionIds=s?n:[],Hg(e)&&s&&!n.length)throw new q(2,9,9007)}y.remove=function(e){return Gg(this,PM(this,e))};function PM(e,t){var n,s,u,l,d,p;return j(function(g){switch(g.g){case 1:if(yd(),n=$g(t),n==null||n.g!="manifest")throw new q(2,9,9004,t);return s=n,u=new ti,me(g,2),D(g,u.init(),4);case 4:return D(g,hd(u,s.Qb(),s.bb()),5);case 5:return l=g.h,D(g,l.getManifests([s.key()]),6);case 6:return d=g.h,p=d[0],D(g,Promise.all([OM(e,p,u),NM(l,s,p)]),2);case 2:return H(g),D(g,u.destroy(),8);case 8:z(g,0)}})}function YS(e,t){for(var n=[],s=m(e.streams),u=s.next();!u.done;u=s.next())u=u.value,t&&u.type=="video"?n.push({contentType:rn(u.mimeType,u.codecs),robustness:e.drmInfo.videoRobustness}):t||u.type!="audio"||n.push({contentType:rn(u.mimeType,u.codecs),robustness:e.drmInfo.audioRobustness});return n}function OM(e,t,n){return j(function(s){return D(s,KM(e.g,e.h.drm,n,t),0)})}function NM(e,t,n){function s(){}var u=WM(n);return zg(t,n),Promise.all([e.removeSegments(u,s),e.removeManifests([t.key()],s)])}y.Ik=function(){return Gg(this,UM(this))};function UM(e){var t,n,s,u,l,d,p,g,v,T;return j(function(b){switch(b.g){case 1:return yd(),t=e.g,n=e.h.drm,s=new ti,u=!1,me(b,2),D(b,s.init(),4);case 4:l=[],dM(s,function(M){return l.push(M)}),d=m(l),p=d.next();case 5:if(p.done){b.u(2);break}return g=p.value,D(b,g.getAll(),8);case 8:return v=b.h,D(b,zS(n,t,v),9);case 9:return T=b.h,D(b,g.remove(T),10);case 10:T.length!=v.length&&(u=!0),p=d.next(),b.u(5);break;case 2:return H(b),D(b,s.destroy(),11);case 11:z(b,3);break;case 3:return b.return(!u)}})}y.list=function(){return Gg(this,BM())};function BM(){var e,t,n;return j(function(s){switch(s.g){case 1:return yd(),e=[],t=new ti,me(s,2),D(s,t.init(),4);case 4:return n=Promise.resolve(),cM(t,function(u,l){n=n.then(function(){var d;return j(function(p){if(p.g==1)return D(p,l.getAllManifests(),2);d=p.h,d.forEach(function(g,v){g=zg(new mr("manifest",u.Qb,u.bb,v),g),e.push(g)}),ne(p)})})}),D(s,n,2);case 2:return H(s),D(s,t.destroy(),6);case 6:z(s,3);break;case 3:return s.return(e)}})}function FM(e,t,n,s){var u,l,d,p,g;return j(function(v){if(v.g==1)return u=null,l=e.g,d={networkingEngine:l,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(T){u=T},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return s.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(s.manifest),vi(e),D(v,n.start(t,d),2);if(v.g!=3)return p=v.h,vi(e),g=QS(p),D(v,Promise.all(hp(g,function(T){return T.createSegmentIndex()})),3);if(vi(e),u)throw u;return v.return(p)})}function jM(e,t,n){var s,u,l,d,p,g,v,T,b,M,_,L,O,P,U;return j(function(B){switch(B.g){case 1:return D(B,qS(e,t),2);case 2:if(s=B.h,s!="text/vtt")throw new q(1,2,2017,t);return D(B,zM(t,e.g,e.h.streaming.retryParameters),3);case 3:if(u=B.h,l=fa(s),!l)throw new q(2,2,2014,s);for(d=l(),p={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},g=Ze(u),v=d.parseMedia(g,p,t,[]),T=[],b=m(v),M=b.next(),_={};!M.done;_={Pf:void 0,kd:void 0},M=b.next())_.kd=M.value,_.Pf=null,L=function($){return function(){return $.Pf==null&&($.Pf=yn([t],[$.kd.payload])),$.Pf||[]}}(_),O=new He(_.kd.startTime,_.kd.endTime,L,0,null,null,0,0,1/0),_.kd.payload.includes("#xywh")&&(P=_.kd.payload.split("#xywh=")[1].split(","),P.length===4&&O.Hf({height:parseInt(P[3],10),positionX:parseInt(P[0],10),positionY:parseInt(P[1],10),width:parseInt(P[2],10)})),T.push(O);if(U=s,!T.length){B.u(4);break}return D(B,qo(T[0].O()[0],e.g,e.h.manifest.retryParameters),5);case 5:U=B.h;case 4:return B.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vt(T),mimeType:U||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([rn(U||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function $M(e,t,n,s,u,l,d){var p,g,v;return j(function(T){if(T.g==1)return l?T.u(2):D(T,qS(e,n),3);if(T.g!=2&&(l=T.h),p={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:qf(0,t.presentationTimeline.getDuration(),[n]),mimeType:l||"",codecs:d||"",kind:u,encrypted:!1,drmInfos:[],keyIds:new Set,language:s,originalLanguage:s,label:null,type:ct,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([rn(l||"",d||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},g=rn(p.mimeType,p.codecs),v=ca(g),!v)throw new q(2,2,2014,l);return T.return(p)})}function qS(e,t){var n;return j(function(s){switch(s.g){case 1:return le(s,2),D(s,qo(t,e.g,e.h.streaming.retryParameters),4);case 4:n=s.h,V(s,3);break;case 2:re(s);case 3:if(n)return s.return(n);throw new q(1,2,2011,t)}})}function zM(e,t,n){var s,u,l;return j(function(d){return d.g==1?(s=Wi,u=fn([e],n),u.method="GET",D(d,t.request(s,u).promise,2)):(l=d.h,d.return(l.data))})}y.hd=function(e,t,n,s){var u=this,l;return j(function(d){return d.g==1?(l=new Of({pc:u.g,onError:t,rf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),l.configure(n.drm),D(d,gb(l,e.variants,s),2)):d.g!=3?D(d,z1(l),3):d.return(l)})};function VM(e,t,n,s){var u=new Map,l=QS(n),d=new Map;l=m(l);for(var p=l.next();!p.done;p=l.next()){p=p.value;var g=HM(e,t,n,p,s,u);d.set(p.id,g)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&d.get(t.audio.id).variantIds.push(t.id),t.video&&d.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(d.values()),yh:Array.from(u.values())}}function HM(e,t,n,s,u,l){var d={id:s.id,originalId:s.originalId,groupId:s.groupId,primary:s.primary,type:s.type,mimeType:s.mimeType,codecs:s.codecs,frameRate:s.frameRate,pixelAspectRatio:s.pixelAspectRatio,hdr:s.hdr,colorGamut:s.colorGamut,videoLayout:s.videoLayout,kind:s.kind,language:s.language,originalLanguage:s.originalLanguage,label:s.label,width:s.width||null,height:s.height||null,encrypted:s.encrypted,keyIds:s.keyIds,segments:[],variantIds:[],roles:s.roles,forced:s.forced,channelsCount:s.channelsCount,audioSamplingRate:s.audioSamplingRate,spatialAudio:s.spatialAudio,closedCaptions:s.closedCaptions,tilesLayout:s.tilesLayout,mssPrivateData:s.mssPrivateData,external:s.external,fastSwitching:s.fastSwitching,isAudioMuxedInVideo:s.isAudioMuxedInVideo},p=u.offline.numberOfParallelDownloads,g=p===0?s.id:0;return GM(s,n.presentationTimeline.Gb(),function(v,T){var b=Og(v),M=void 0;if(!l.has(b)){var _=v.endTime-v.startTime;_=HS(t,s.id)*_,_=IS(e.g,_),l.set(b,new AS(v,_,g,!1,T))}v.Y&&(M=Og(v.Y),l.has(M)||(_=.5*HS(t,s.id),_=IS(e.g,_),l.set(M,new AS(v.Y,_,g,!0,T)))),d.segments.push({pendingInitSegmentRefId:M,initSegmentKey:M?0:null,startTime:v.startTime,endTime:v.endTime,appendWindowStart:v.appendWindowStart,appendWindowEnd:v.appendWindowEnd,timestampOffset:v.timestampOffset,tilesLayout:v.tilesLayout,pendingSegmentRefId:b,dataKey:0,mimeType:v.mimeType,codecs:v.codecs,thumbnailSprite:v.thumbnailSprite}),p!==0&&(g=(g+1)%p)}),d}function GM(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var s=e.segmentIndex.get(t);s;)n(s,t),s=e.segmentIndex.get(++t)}function vi(e){if(e.j.g)throw new q(2,9,7001)}function yd(){if(!Vg())throw new q(2,9,9e3)}function Gg(e,t){return j(function(n){return n.g==1?(e.i.push(t),me(n,2),D(n,t,4)):n.g!=2?n.return(n.h):(H(n),Vi(e.i,t),z(n,0))})}function XM(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Vi(e.i,n)})}function WM(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var s=n.next();!s.done;s=n.next())s=s.value,s.initSegmentKey!=null&&t.add(s.initSegmentKey),t.add(s.dataKey)}return Array.from(t)}function KM(e,t,n,s){var u,l,d;return j(function(p){return p.g==1?s.drmInfo?(u=hM(n),l=s.sessionIds.map(function(g){return{sessionId:g,keySystem:s.drmInfo.keySystem,licenseUri:s.drmInfo.licenseServerUri,serverCertificate:s.drmInfo.serverCertificate,audioCapabilities:YS(s,!1),videoCapabilities:YS(s,!0)}}),D(p,zS(t,e,l),2)):p.return():p.g!=3?(d=p.h,D(p,u.remove(d),3)):D(p,u.add(l.filter(function(g){return!d.includes(g.sessionId)})),0)})}function QS(e){for(var t=new Set,n=m(e.variants),s=n.next();!s.done;s=n.next())s=s.value,s.audio&&t.add(s.audio),s.video&&t.add(s.video);for(n=m(e.textStreams),s=n.next();!s.done;s=n.next())t.add(s.value);for(e=m(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function YM(e){e.variants.map(function(l){return l.video});var t=new Set(e.variants.map(function(l){return l.audio}));e=e.textStreams;for(var n=m(t),s=n.next();!s.done;s=n.next()){s=m(t);for(var u=s.next();!u.done;u=s.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),s=n.next();!s.done;s=n.next());}be("shaka.offline.Storage",Tn),Tn.deleteAll=function(){var e;return j(function(t){return t.g==1?(e=new ti,me(t,2),D(t,pM(e),2)):t.g!=5?(H(t),D(t,e.destroy(),5)):z(t,0)})},Tn.prototype.list=Tn.prototype.list,Tn.prototype.removeEmeSessions=Tn.prototype.Ik,Tn.prototype.remove=Tn.prototype.remove,Tn.prototype.store=Tn.prototype.store,Tn.prototype.getNetworkingEngine=Tn.prototype.Ob,Tn.prototype.getConfiguration=Tn.prototype.getConfiguration,Tn.prototype.configure=Tn.prototype.configure,Tn.prototype.destroy=Tn.prototype.destroy,Tn.support=Vg;var qM=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");Lx("offline",Vg);function An(){}function Fn(e,t){for(e={priority:t||0,callback:e},t=0;t<hl.length;t++)if(hl[t].priority<e.priority){hl.splice(t,0,e);return}hl.push(e)}be("shaka.polyfill",An),An.register=Fn,An.installAll=function(){for(var e=m(hl),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){ft("Error installing polyfill!",n)}}};var hl=[];function JS(){}function ZS(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=m(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())QM(t.value)}function QM(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}An.Aria=JS,JS.install=ZS,Fn(ZS);function vd(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}vd.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},vd.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function eT(e){return e.startsWith("com.apple")?"cbcs":e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("org.w3")||e.startsWith("com.huawei")?"cenc":(ft("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function tT(e){if(!e)return!1;e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function Xg(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&Be().$c())}function nT(){}var pl;function iT(){Be().If()&&!pl&&!navigator.emeEncryptionSchemePolyfilled&&navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration&&(pl=navigator.requestMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=JM,navigator.emeEncryptionSchemePolyfilled=!0)}function JM(e,t){var n=this,s;return j(function(u){return u.g==1?D(u,pl.call(n,e,t),2):(s=u.h,tT(s)?(navigator.requestMediaKeySystemAccess=pl,u.return(s)):(navigator.requestMediaKeySystemAccess=rT,u.return(rT.call(n,e,t))))})}function rT(e,t){var n=this,s,u,l,d,p,g,v,T,b,M,_,L;return j(function(O){if(O.g==1){for(s=eT(e),u=[],l=m(t),d=l.next();!d.done;d=l.next())p=d.value,g=oT(p.videoCapabilities,s),v=oT(p.audioCapabilities,s),p.videoCapabilities&&p.videoCapabilities.length&&!g.length||p.audioCapabilities&&p.audioCapabilities.length&&!v.length||(T=Object.assign({},p),T.videoCapabilities=g,T.audioCapabilities=v,u.push(T));if(!u.length)throw b=Error("Unsupported keySystem or supportedConfigurations."),b.name="NotSupportedError",b.code=DOMException.NOT_SUPPORTED_ERR,b;return D(O,pl.call(n,e,u),2)}return M=O.h,L=_=null,u[0]&&(u[0].videoCapabilities&&(_=u[0].videoCapabilities[0].encryptionScheme),u[0].audioCapabilities&&(L=u[0].audioCapabilities[0].encryptionScheme)),O.return(new vd(M,_,L))})}function oT(e,t){return e&&e.filter(function(n){return Xg(n.encryptionScheme,t)})}An.EmeEncryptionScheme=nT,nT.install=iT,Fn(iT);function sT(){}function uT(){if(f.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",mu),document.addEventListener("webkitfullscreenerror",mu),document.addEventListener("mozfullscreenchange",mu),document.addEventListener("mozfullscreenerror",mu),document.addEventListener("MSFullscreenChange",mu),document.addEventListener("MSFullscreenError",mu)}}function mu(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}An.Fullscreen=sT,sT.install=uT,Fn(uT);function aT(){}var gl;function lT(){Be().If()&&!gl&&!navigator.mediaCapabilitiesEncryptionSchemePolyfilled&&navigator.mediaCapabilities&&(gl=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=ZM,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0)}function ZM(e){var t=this,n,s;return j(function(u){switch(u.g){case 1:return D(u,gl.call(t,e),2);case 2:if(n=u.h,!n.supported||!e.keySystemConfiguration)return u.return(n);if(s=n.keySystemAccess,tT(s))return navigator.mediaCapabilities.decodingInfo=gl,u.return(n);if(navigator.mediaCapabilities.decodingInfo=fT,s){u.u(3);break}return D(u,cT(e),4);case 4:return n.keySystemAccess=u.h,u.return(n);case 3:return u.return(fT.call(t,e))}})}function fT(e){var t=this,n,s,u,l,d,p,g;return j(function(v){switch(v.g){case 1:return s=n=null,!e.keySystemConfiguration||(u=e.keySystemConfiguration,l=u.keySystem,s=u.audio&&u.audio.encryptionScheme,n=u.video&&u.video.encryptionScheme,d=eT(l),p={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},Xg(s,d)&&Xg(n,d))?D(v,gl.call(t,e),2):v.return(p);case 2:if(g=v.h,g.keySystemAccess){g.keySystemAccess=new vd(g.keySystemAccess,n,s),v.u(3);break}if(!e.keySystemConfiguration){v.u(3);break}return D(v,cT(e),5);case 5:g.keySystemAccess=v.h;case 3:return v.return(g)}})}function cT(e){var t,n;return j(function(s){if(s.g==1){var u=e.keySystemConfiguration,l=[],d=[];return u.audio&&l.push({robustness:u.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:u.audio.encryptionScheme}),u.video&&d.push({robustness:u.video.robustness||"",contentType:e.video.contentType,encryptionScheme:u.video.encryptionScheme}),u={initDataTypes:u.initDataType?[u.initDataType]:[],distinctiveIdentifier:u.distinctiveIdentifier,persistentState:u.persistentState,sessionTypes:u.sessionTypes},l.length&&(u.audioCapabilities=l),d.length&&(u.videoCapabilities=d),t=u,D(s,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=s.h,s.return(n)})}An.MCapEncryptionScheme=aT,aT.install=lT,Fn(lT,-2);function xd(){}function dT(){Be().dc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),xd.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=e6)}function e6(e){var t,n,s,u,l,d,p,g,v,T,b;return j(function(M){switch(M.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},Be(),n=e.video,s=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(u=n.contentType,l=Go().canPlayType(u)!="",!l)||s&&(d=s.contentType,p=Go().canPlayType(d)!="",!p))return M.return(t)}else return M.return(t);M.u(2);break}if(!gr())return M.return(t);if(!n){M.u(3);break}return D(M,t6(n),4);case 4:if(g=M.h,!g)return M.return(t);case 3:if(s){var _=Be().La(),L=s.contentType;if(_==="CAST"&&s.spatialRendering&&(L+="; spatialRendering=true"),v=On(L),!v)return M.return(t)}case 2:return e.keySystemConfiguration?(T=e.keySystemConfiguration,D(M,n6(n,s,T),6)):(t.supported=!0,M.return(t));case 6:(b=M.h)&&(t.supported=!0,t.keySystemAccess=b);case 5:return M.return(t)}})}function t6(e){var t,n,s;return j(function(u){return u.g==1?(t=Be(),n=t.La(),n!=="CAST"?u.u(2):D(u,i6(e),3)):u.g!=2?(s=u.h,u.return(s)):u.return(On(e.contentType))})}function n6(e,t,n){var s,u,l,d,p,g,v,T,b,M,_;return j(function(L){switch(L.g){case 1:if(s=[],u=[],n.audio&&(l={robustness:n.audio.robustness||"",contentType:t.contentType},Be().li()&&t.contentType.includes('codecs="ac-3"')&&(l.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(l.encryptionScheme=n.audio.encryptionScheme),s.push(l)),n.video&&(d={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(d.encryptionScheme=n.video.encryptionScheme),u.push(d)),p={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},s.length&&(p.audioCapabilities=s),u.length&&(p.videoCapabilities=u),g=e?e.contentType:"",v=t?t.contentType:"",T=yi(g)+";"+eo(g),b=yi(v)+";"+eo(v),M=n.keySystem,_=null,le(L,2),Is.has(T+"#"+b+"#"+M)){_=Is.get(T+"#"+b+"#"+M)||null,L.u(4);break}return D(L,navigator.requestMediaKeySystemAccess(n.keySystem,[p]),5);case 5:_=L.h,Is.set(T+"#"+b+"#"+M,_);case 4:V(L,3);break;case 2:re(L);case 3:return L.return(_)}})}function i6(e){var t,n,s,u,l;return j(function(d){if(d.g==1){if(!(f.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return d.return(On(e.contentType));switch(t=e.contentType,e.width&&e.height&&1280<e.width&&720<e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(n=Math.round(e.framerate),24>n||30<n)&&(t+="; framerate="+e.framerate),s=e.transferFunction||"",s){case"":case"srgb":break;case"pq":t+="; eotf=smpte2084";break;case"hlg":t+="; eotf=arib-std-b67";break;default:return d.return(!1)}return u=!1,l=r6,l.has(t)?(u=l.get(t),d.u(2)):D(d,cast.__platform__.canDisplayType(t),3)}return d.g!=2&&(u=d.h,l.set(t,u)),d.return(u)})}An.MediaCapabilities=xd,xd.install=dT,xd.originalMcap=null;var r6=new Map;Fn(dT,-1);function hT(){}function pT(){var e=Be(),t=e.Da()==="WEBKIT"?e.xa():null;for((f.MediaSource||f.ManagedMediaSource)&&t&&f.MediaSource&&(12>=t?(gT(),o6()):15>=t&&gT()),e=m(e.xi()),t=e.next();!t.done;t=e.next())u6(t.value);(f.MediaSource||f.ManagedMediaSource)&&s6(),f.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&a6()}function gT(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,lt.apply(0,arguments));return t.abort=function(){},t}}function o6(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function s6(){if(f.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return mf(n)!="mp2t"&&e(n)}}if(f.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);f.ManagedMediaSource.isTypeSupported=function(n){return mf(n)!="mp2t"&&t(n)}}}function u6(e){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(s){return eo(s)!=e&&t(s)},f.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);f.ManagedMediaSource.isTypeSupported=function(s){return eo(s)!=e&&n(s)}}}function a6(){var e=MediaSource.isTypeSupported;Be().Vi()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),s=n.findIndex(function(d){return d.startsWith("codecs=")});if(0>s)return e(t);var u=n[s].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),l=u.findIndex(function(d){return d.startsWith("vp09")});return 0<=l&&(u[l]="vp9",n[s]='codecs="'+u.join(",")+'"',t=n.join("; ")),e(t)})}An.MediaSource=hT,hT.install=pT,Fn(pT);function mT(){}function yT(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?l6():f.orientation!=null&&f6())}function l6(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function f6(){function e(){switch(f.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new wd;screen.orientation=t,e(),f.addEventListener("orientationchange",function(){e();var n=new Ie("change");t.dispatchEvent(n)})}An.Orientation=mT,mT.install=yT;function wd(){Ct.call(this),this.type="",this.angle=0}ue(wd,Ct),wd.prototype.lock=function(e){function t(s){return screen.lockOrientation?screen.lockOrientation(s):screen.mozLockOrientation?screen.mozLockOrientation(s):screen.msLockOrientation?screen.msLockOrientation(s):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},wd.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Fn(yT);function Wg(){}var Kg,Yg,qg,Qg,Jg,Zg;function vT(e){f.HTMLVideoElement&&f.WebKitMediaKeys&&f.shakaMediaKeysPolyfill!=tm&&(e!==void 0&&e&&(Kg=!0,Yg=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),qg=HTMLMediaElement.prototype.setMediaKeys,Qg=f.MediaKeys,Jg=f.MediaKeySystemAccess,Zg=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=d6,f.MediaKeys=ml,f.MediaKeySystemAccess=Sd,navigator.requestMediaKeySystemAccess=c6,f.shakaMediaKeysPolyfill=tm,bf.clear(),Is.clear())}function c6(e,t){try{var n=new Sd(e,t);return Promise.resolve(n)}catch(s){return Promise.reject(s)}}function d6(e){var t=this.mediaKeys;return t&&t!=e&&xT(t,null),delete this.mediaKeys,(this.mediaKeys=e)?xT(e,this):Promise.resolve()}function h6(e){if(e=Ze(e.initData),Yn(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=qr(e.subarray(4),!0),e=zi(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Ei(e),this.dispatchEvent(t)}An.PatchedMediaKeysApple=Wg,Wg.uninstall=function(){f.shakaMediaKeysPolyfill==tm&&Kg&&(Kg=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Yg),HTMLMediaElement.prototype.setMediaKeys=qg,f.MediaKeys=Qg,f.MediaKeySystemAccess=Jg,navigator.requestMediaKeySystemAccess=Zg,Yg=Zg=qg=Jg=Qg=null,f.shakaMediaKeysPolyfill="",bf.clear(),Is.clear())},Wg.install=vT;function Sd(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var s=!1,u=!1;if(n.audioCapabilities)for(var l=m(n.audioCapabilities),d=l.next();!d.done;d=l.next())d=d.value,d.contentType&&(s=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,d.contentType.split(";")[0])&&(t.audioCapabilities.push(d),u=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),l=n.next();!l.done;l=n.next())l=l.value,l.contentType&&(s=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(t.videoCapabilities.push(l),u=!0));s||(u=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=u?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Sd.prototype.createMediaKeys=function(){var e=new ml(this.keySystem);return Promise.resolve(e)},Sd.prototype.getConfiguration=function(){return this.g};function ml(e){this.h=new WebKitMediaKeys(e),this.g=new Ee}ml.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new em(this.h)},ml.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function xT(e,t){if(e.g.Ra(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",h6);try{return Ws(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}ml.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function em(e){Ct.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Ee,this.sessionId="",this.expiration=NaN,this.closed=new _t,this.keyStatuses=new wT}ue(em,Ct),y=em.prototype,y.generateRequest=function(e,t){var n=this;this.h=new _t;try{var s=this.l.createSession("video/mp4",Ze(t));this.i=s,this.sessionId=s.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(u){n.h&&(n.h.resolve(),n.h=null),u=new Map().set("messageType",n.keyStatuses.Cc()==null?"license-request":"license-renewal").set("message",Ei(u.message)),u=new Ie("message",u),n.dispatchEvent(u)}),this.j.D(s,"webkitkeyadded",function(){n.g&&(Td(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(s,"webkitkeyerror",function(){var u=Error("EME PatchedMediaKeysApple key error");if(u.errorCode=n.i.error,n.h!=null)n.h.reject(u),n.h=null;else if(n.g!=null)n.g.reject(u),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Td(n,"output-not-allowed");break;default:Td(n,"internal-error")}}),Td(this,"status-pending")}catch(u){this.h.reject(u)}return this.h},y.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},y.update=function(e){this.g=new _t;try{this.i.update(Ze(e))}catch(t){this.g.reject(t)}return this.g},y.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ra()}catch(e){this.closed.reject(e)}return this.closed},y.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Td(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Ie("keystatuseschange"),e.dispatchEvent(t)}function wT(){this.size=0,this.g=void 0}y=wT.prototype,y.Cc=function(){return this.g},y.forEach=function(e){this.g&&e(this.g,If.value())},y.get=function(e){if(this.has(e))return this.g},y.has=function(e){var t=If.value();return!!(this.g&&xr(e,t))},y.entries=function(){},y.keys=function(){},y.values=function(){};var tm="apple";Fn(function(){f.HTMLVideoElement&&f.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||vT())});function ST(){}function TT(){if(f.MediaKeys){var e=Be();MediaKeys.prototype.setServerCertificate&&e.je()||(MediaKeys.prototype.setServerCertificate=p6)}}function p6(){return Promise.resolve(!1)}An.PatchedMediaKeysCert=ST,ST.install=TT,Fn(TT);function CT(){}function bT(){if(!(!f.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)sm="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=g6,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=m6,f.MediaKeys=yl,f.MediaKeySystemAccess=Cd,f.shakaMediaKeysPolyfill=y6}}function nm(e){var t=sm;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function g6(e,t){try{var n=new Cd(e,t);return Promise.resolve(n)}catch(s){return Promise.reject(s)}}function m6(e){var t=this.mediaKeys;return t&&t!=e&&kT(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&kT(e,this),Promise.resolve()}An.PatchedMediaKeysWebkit=CT,CT.install=bT;function Cd(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var s=!1,u=document.getElementsByTagName("video");u=u.length?u[0]:document.createElement("video"),t=m(t);for(var l=t.next();!l.done;l=t.next()){l=l.value;var d={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:l.initDataTypes,sessionTypes:["temporary"],label:l.label},p=!1;if(l.audioCapabilities)for(var g=m(l.audioCapabilities),v=g.next();!v.done;v=g.next())v=v.value,v.contentType&&(p=!0,u.canPlayType(v.contentType.split(";")[0],this.g)&&(d.audioCapabilities.push(v),s=!0));if(l.videoCapabilities)for(g=m(l.videoCapabilities),v=g.next();!v.done;v=g.next())v=v.value,v.contentType&&(p=!0,u.canPlayType(v.contentType,this.g)&&(d.videoCapabilities.push(v),s=!0));if(p||(s=u.canPlayType("video/mp4",this.g)||u.canPlayType("video/webm",this.g)),l.persistentState=="required"&&(n?(d.persistentState="required",d.sessionTypes=["persistent-license"]):s=!1),s){this.h=d;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Cd.prototype.createMediaKeys=function(){var e=new yl(this.g);return Promise.resolve(e)},Cd.prototype.getConfiguration=function(){return this.h};function yl(e){this.l=e,this.h=null,this.g=new Ee,this.i=[],this.j=new Map}function kT(e,t){e.h=t,e.g.Ra();var n=sm;t&&(e.g.D(t,n+"needkey",function(s){var u=new CustomEvent("encrypted");u.initDataType="cenc",u.initData=Ei(s.initData),e.h.dispatchEvent(u)}),e.g.D(t,n+"keymessage",function(s){var u=im(e,s.sessionId);u&&(s=new Map().set("messageType",u.keyStatuses.Cc()==null?"licenserequest":"licenserenewal").set("message",s.message),s=new Ie("message",s),u.h&&(u.h.resolve(),u.h=null),u.dispatchEvent(s))}),e.g.D(t,n+"keyadded",function(s){(s=im(e,s.sessionId))&&s.ready()}),e.g.D(t,n+"keyerror",function(s){var u=im(e,s.sessionId);if(u){var l=Error("EME v0.1b key error"),d=s.errorCode;d.systemCode=s.systemCode,l.errorCode=d,!s.sessionId&&u.h?(s.systemCode==45&&(l.message="Unsupported session type."),u.h.reject(l),u.h=null):s.sessionId&&u.g?(u.g.reject(l),u.g=null):(l=s.systemCode,s.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?bd(u,"output-restricted"):l==1?bd(u,"expired"):bd(u,"internal-error"))}}))}yl.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new rm(t,this.l,e),this.i.push(e),e},yl.prototype.setServerCertificate=function(){return Promise.resolve(!1)},yl.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function im(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function rm(e,t,n){Ct.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new _t,this.keyStatuses=new ET}ue(rm,Ct),y=rm.prototype,y.ready=function(){bd(this,"usable"),this.g&&this.g.resolve(),this.g=null};function AT(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var s=Ze(zi("LOAD_SESSION|"+n));else{var u=zi("PERSISTENT|");s=Zt(u,t)}else s=Ze(t)}catch(d){return Promise.reject(d)}e.h=new _t;var l=nm("generateKeyRequest");try{e.j[l](e.i,s)}catch(d){if(d.name!="InvalidStateError")return e.h=null,Promise.reject(d);new ht(function(){try{e.j[l](e.i,s)}catch(p){e.h.reject(p),e.h=null}}).ia(.01)}return e.h}function om(e,t,n){if(e.g)e.g.then(function(){return om(e,t,n)}).catch(function(){return om(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var s=Ht(n),u=JSON.parse(s);u.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),s=Ii(u.keys[0].k),u=Ii(u.keys[0].kid)}else s=Ze(n),u=null;var l=nm("addKey");try{e.j[l](e.i,s,u,e.sessionId)}catch(d){e.g.reject(d),e.g=null}}}function bd(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new Ie("keystatuseschange"),e.dispatchEvent(t)}y.generateRequest=function(e,t){return AT(this,t,null)},y.load=function(e){return this.l=="persistent-license"?AT(this,null,e):Promise.reject(Error("Not a persistent session."))},y.update=function(e){var t=new _t;return om(this,t,e),t},y.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=nm("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},y.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function ET(){this.size=0,this.g=void 0}y=ET.prototype,y.Cc=function(){return this.g},y.forEach=function(e){this.g&&e(this.g,If.value())},y.get=function(e){if(this.has(e))return this.g},y.has=function(e){var t=If.value();return!!(this.g&&xr(e,t))},y.entries=function(){},y.keys=function(){},y.values=function(){};var sm="",y6="webkit";Fn(bT);function IT(){}function MT(){if(f.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=x6,Object.defineProperty(e,"disablePictureInPicture",{get:S6,set:T6,enumerable:!0,configurable:!0}),document.exitPictureInPicture=w6,document.addEventListener("webkitpresentationmodechanged",v6,!0))}}function v6(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function x6(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function w6(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function S6(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function T6(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}An.PiPWebkit=IT,IT.install=MT,Fn(MT);function RT(){}function _T(){f.crypto&&("randomUUID"in f.crypto||(f.crypto.randomUUID=C6))}function C6(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}An.RandomUUID=RT,RT.install=_T,Fn(_T);function LT(){}function DT(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:b6})}function b6(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}An.Symbol=LT,LT.install=DT,Fn(DT);function PT(){}function OT(){for(var e=m([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())t=t.value,t.prototype.indexOf||(t.prototype.indexOf=k6),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=A6),t.prototype.includes||(t.prototype.includes=E6)}function k6(e,t){return Array.prototype.indexOf.call(this,e,t)}function A6(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function E6(e,t){return this.indexOf(e,t)!==-1}An.TypedArray=PT,PT.install=OT,Fn(OT);function NT(){}function UT(){if(f.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}An.VideoPlayPromise=NT,NT.install=UT,Fn(UT);function BT(){}function FT(){if(f.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||typeof Go().webkitDroppedFrameCount=="number")&&(e.getVideoPlaybackQuality=I6)}}function I6(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}An.VideoPlaybackQuality=BT,BT.install=FT,Fn(FT);function jT(){}function $T(){if(!f.VTTCue&&f.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=um;else if(t==6)e=M6;else{try{var n=!!um(1,2,"")}catch{n=!1}n&&(e=um)}e&&(f.VTTCue=function(s,u,l){return e(s,u,l)})}}function um(e,t,n){return new f.TextTrackCue(e,t,n)}function M6(e,t,n){return new f.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}An.VTTCue=jT,jT.install=$T,Fn($T);function wn(e){Ct.call(this),this.h=e,this.l=null,this.g=[],this.i=-1,this.j=null,this.m=new Ee}ue(wn,Ct),y=wn.prototype,y.destroy=function(){var e=this;return j(function(t){if(t.g==1)return D(t,e.removeAllItems(),2);e.h=null,e.m&&(e.m.release(),e.m=null),Ct.prototype.release.call(e),ne(t)})},y.configure=function(e){this.l=e},y.getConfiguration=function(){return this.l},y.getCurrentItem=function(){return this.g.length&&0<=this.i&&this.i<this.g.length?this.g[this.i]:null},y.getCurrentItemIndex=function(){return this.i},y.getItems=function(){return this.g.slice()},y.insertItems=function(e){this.g.push.apply(this.g,S(e)),this.dispatchEvent(new Ie("itemsinserted"))},y.removeAllItems=function(){var e=this;return j(function(t){switch(t.g){case 1:if(e.m.Ra(),!(e.g.length&&0<=e.i)){t.u(2);break}return D(t,e.h.vc(),2);case 2:if(!e.j){t.u(4);break}if(e.j.xf.s){t.u(5);break}return D(t,e.j.xf.destroy(),5);case 5:e.j=null;case 4:e.g=[],e.i=-1,e.dispatchEvent(new Ie("itemsremoved")),ne(t)}})},y.playItem=function(e){var t=this,n,s,u,l,d,p,g,v,T,b,M,_,L,O;return j(function(P){if(P.g==1){if(t.m.Ra(),!t.g.length||e>=t.g.length)throw new q(2,7,7007);return n=t.g[e],t.i!=e&&(t.i=e,t.dispatchEvent(new Ie("currentitemchanged"))),s=t.h.h,u=t.l?t.l.preloadNextUrlWindow:0,0<u&&(l=!1,t.m.D(s,"timeupdate",function(){var U,B,$,W;return j(function(J){switch(J.g){case 1:if(t.j||1>=t.g.length||l||t.h.V()||!s.duration)return J.return();if(U=t.h.Sa().end-s.currentTime,isNaN(U)){J.u(0);break}if(!(U<=u)){J.u(0);break}if(B=t.l&&t.l.repeatMode,$=null,t.i+1<t.g.length?$=t.g[t.i+1]:B==1&&($=t.g[0]),!$){J.u(0);break}return l=!0,W=null,le(J,5),D(J,t.h.preload($.manifestUri,$.startTime,$.mimeType,$.config),7);case 7:W=J.h,V(J,6);break;case 5:re(J),W=null;case 6:t.j={item:$,xf:W},l=!1,ne(J)}})})),t.m.D(t.h,"complete",function(){var U=t.l&&t.l.repeatMode,B=!1;if(U==2)B=!0;else{var $=t.i+1;$<t.g.length?t.playItem($):U==1&&(t.g.length==1?B=!0:t.playItem(0))}B&&(s.paused?(s.currentTime=t.h.Sa().start,s.play()):t.m.D(s,"paused",function(){s.currentTime=t.h.Sa().start,s.play()}))}),n.config&&(t.h.Ci(),t.h.configure(n.config)),d=n.manifestUri,t.j&&t.j.item==n&&t.j.xf&&(d=t.j.xf),D(P,t.h.load(d,n.startTime,n.mimeType),2)}if(t.j=null,n.extraText)for(p=m(n.extraText),g=p.next();!g.done;g=p.next())v=g.value,v.mime?t.h.Hd(v.uri,v.language,v.kind,v.mime,v.codecs):t.h.Hd(v.uri,v.language,v.kind);if(n.extraThumbnail)for(T=m(n.extraThumbnail),b=T.next();!b.done;b=T.next())M=b.value,t.h.He(M);if(n.extraChapter)for(_=m(n.extraChapter),L=_.next();!L.done;L=_.next())O=L.value,t.h.Ge(O.uri,O.language,O.mime);ne(P)})},be("shaka.queue.QueueManager",wn),wn.prototype.playItem=wn.prototype.playItem,wn.prototype.removeAllItems=wn.prototype.removeAllItems,wn.prototype.insertItems=wn.prototype.insertItems,wn.prototype.getItems=wn.prototype.getItems,wn.prototype.getCurrentItemIndex=wn.prototype.getCurrentItemIndex,wn.prototype.getCurrentItem=wn.prototype.getCurrentItem,wn.prototype.getConfiguration=wn.prototype.getConfiguration,wn.prototype.configure=wn.prototype.configure,wn.prototype.destroy=wn.prototype.destroy,Mc=function(e){return new wn(e)};function xi(){}xi.prototype.parseInit=function(){},xi.prototype.setSequenceMode=function(){},xi.prototype.setManifestType=function(){},xi.prototype.parseMedia=function(e,t){var n=null,s=[];e=Ht(e).split(/\r?\n/),e=m(e);for(var u=e.next();!u.done;u=e.next())if((u=u.value)&&!/^\s+$/.test(u)&&(u=R6.exec(u))){var l=_6.exec(u[1]);l=60*parseInt(l[1],10)+parseFloat(l[2].replace(",",".")),u=new Bt(l,t.segmentEnd?t.segmentEnd:l+2,u[2]),n&&(n.endTime=l,s.push(n)),n=u}return n&&s.push(n),s},be("shaka.text.LrcTextParser",xi),xi.prototype.parseMedia=xi.prototype.parseMedia,xi.prototype.setManifestType=xi.prototype.setManifestType,xi.prototype.setSequenceMode=xi.prototype.setSequenceMode,xi.prototype.parseInit=xi.prototype.parseInit;var R6=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,_6=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;kn("application/x-subtitle-lrc",function(){return new xi});function di(){}di.prototype.parseInit=function(){},di.prototype.setSequenceMode=function(){},di.prototype.setManifestType=function(){},di.prototype.parseMedia=function(e,t,n,s){var u=Ht(e);if(e=[],u=="")return e;var l=Oo(u,"tt",!0);if(!l)throw new q(2,2,2005,"Failed to parse TTML.");if(u=tr(l,"body")[0],!u)return[];var d=fr(l,vl,"frameRate"),p=fr(l,vl,"subFrameRate"),g=fr(l,vl,"frameRateMultiplier"),v=fr(l,vl,"tickRate"),T=fr(l,vl,"cellResolution"),b=l.attributes["xml:space"]||"default",M=fr(l,Ed,"extent");if(b!="default"&&b!="preserve")throw new q(2,2,2005,"Invalid xml:space value: "+b);b=b=="default",d=new N6(d,p,g,v),T=O6(T),p=tr(l,"metadata")[0],p=(p?p.children:[]).filter(function(O){return O!=`
`}),g=tr(l,"style"),l=tr(l,"region"),v=[];for(var _=m(l),L=_.next();!L.done;L=_.next())(L=L6(L.value,g,M))&&v.push(L);if(kt(u,"p").length)throw new q(2,2,2001,"<p> can only be inside <div> in TTML");for(M=m(kt(u,"div")),_=M.next();!_.done;_=M.next())if(kt(_.value,"span").length)throw new q(2,2,2001,"<span> can only be inside <p> in TTML");return(t=zT(u,t,d,p,g,l,v,b,T,null,!1,n,s))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function zT(e,t,n,s,u,l,d,p,g,v,T,b,M){var _=v;if(uf(e)){if(!T)return null;var L={tagName:"span",children:[an(e)],attributes:{},parent:null}}else L=e;for(var O=null,P=m(JT),U=P.next();!U.done&&!(O=Ad(L,"backgroundImage",s,"#",U.value)[0]);U=P.next());P=null,U=fr(L,JT,"backgroundImage");var B=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(U&&B.test(U)){if(P=parseInt(U.split(":").pop(),10)-1,P>=M.length)return null;P=M[P]}else b&&U&&!U.startsWith("#")&&(B=new en(b),U=new en(U),(U=B.resolve(U).toString())&&(P=U));if((e.tagName=="p"||O||P)&&(T=!0),e=T,U=(L.attributes["xml:space"]||(p?"default":"preserve"))=="default",B=L.children.every(uf),p=[],!B)for(var $=m(L.children),W=$.next();!W.done;W=$.next())(W=zT(W.value,t,n,s,u,l,d,U,g,L,T,b,M))&&p.push(W);if(s=v!=null,b=an(L),b=L.children.length&&b&&/\S/.test(b),$=L.attributes.begin||L.attributes.end||L.attributes.dur,!($||b||L.tagName=="br"||p.length!=0||s&&!U))return null;for(M=GT(L,n),b=M.start,M=M.end;_&&_.tagName&&_.tagName!="tt";)M=P6(_,n,b,M),b=M.start,M=M.end,_=_.parent;if(b==null&&(b=0),b+=t.periodStart,M=M==null?1/0:M+t.periodStart,b=Math.max(b,t.segmentStart),M=Math.min(M,t.segmentEnd),!$&&0<p.length)for(b=1/0,M=0,t=m(p),n=t.next();!n.done;n=t.next())n=n.value,b=Math.min(b,n.startTime),M=Math.max(M,n.endTime);if(L.tagName=="br")return u=new Bt(b,M,""),u.lineBreak=!0,u;if(t="",B&&(t=qn(an(L)||""),U&&(t=t.replace(/\s+/g," "))),t=new Bt(b,M,t),t.nestedCues=p,T||(t.isContainer=!0),g&&(t.cellResolution=g),g=Ad(L,"region",l,"")[0],L.attributes.region&&g&&g.attributes["xml:id"]){var J=g.attributes["xml:id"];t.region=d.filter(function(G){return G.id==J})[0]}return d=g,v&&s&&!L.attributes.region&&!L.attributes.style&&(d=Ad(v,"region",l,"")[0]),D6(t,L,d,O,P,u,e,p.length==0),t}function L6(e,t,n){var s=new Lo,u=e.attributes["xml:id"];if(!u)return null;s.id=u,u=null,n&&(u=dm.exec(n)||hm.exec(n)),n=u?Number(u[1]):null,u=u?Number(u[2]):null;var l,d=kd(e,t,"extent");if(d){var p=(l=dm.exec(d))||hm.exec(d);p!=null&&(s.width=Number(p[1]),s.height=Number(p[2]),l||(n!=null&&(s.width=100*s.width/n),u!=null&&(s.height=100*s.height/u)),s.widthUnits=l||n!=null?oi:0,s.heightUnits=l||u!=null?oi:0)}return(e=kd(e,t,"origin"))&&(p=(l=dm.exec(e))||hm.exec(e),p!=null&&(s.viewportAnchorX=Number(p[1]),s.viewportAnchorY=Number(p[2]),l?d||(s.width=100-s.viewportAnchorX,s.widthUnits=oi,s.height=100-s.viewportAnchorY,s.heightUnits=oi):(u!=null&&(s.viewportAnchorY=100*s.viewportAnchorY/u),n!=null&&(s.viewportAnchorX=100*s.viewportAnchorX/n)),s.viewportAnchorUnits=l||n!=null?oi:0)),s}function am(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function D6(e,t,n,s,u,l,d,p){if(d=d||p,Dn(t,n,l,"direction",d)=="rtl"&&(e.direction="rtl"),p=Dn(t,n,l,"writingMode",d),p=="tb"||p=="tblr"?e.writingMode="vertical-lr":p=="tbrl"?e.writingMode="vertical-rl":p=="rltb"||p=="rl"?e.direction="rtl":p&&(e.direction=ua),(p=Dn(t,n,l,"textAlign",!0))?(e.positionAlign=F6.get(p),e.lineAlign=B6.get(p),e.textAlign=Jh[p.toUpperCase()]):e.textAlign=hr,(p=Dn(t,n,l,"displayAlign",!0))&&(e.displayAlign=t1[p.toUpperCase()]),(p=Dn(t,n,l,"color",d))&&(e.color=am(p)),(p=Dn(t,n,l,"backgroundColor",d))&&(e.backgroundColor=am(p)),(p=Dn(t,n,l,"border",d))&&(e.border=p),p=Dn(t,n,l,"fontFamily",d))switch(p){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=p.split(",").filter(function(g){return g!="default"}).join(",")}switch((p=Dn(t,n,l,"fontWeight",d))&&p=="bold"&&(e.fontWeight=Cs),p=Dn(t,n,l,"wrapOption",d),e.wrapLine=!(p&&p=="noWrap"),(p=Dn(t,n,l,"lineHeight",d))&&p.match(yu)&&(e.lineHeight=p),(p=Dn(t,n,l,"fontSize",d))&&(p.match(yu)||p.match(U6))&&(e.fontSize=p),(p=Dn(t,n,l,"fontStyle",d))&&(e.fontStyle=o1[p.toUpperCase()]),s?(u=s.attributes.imageType||s.attributes.imagetype,p=s.attributes.encoding,s=an(s).trim(),u=="PNG"&&p=="Base64"&&s&&(e.backgroundImage="data:image/png;base64,"+s)):u&&(e.backgroundImage=u),(s=Dn(t,n,l,"textOutline",d))&&(s=s.split(" "),s[0].match(yu)?e.textStrokeColor=e.color:(e.textStrokeColor=am(s[0]),s.shift()),s[0]&&s[0].match(yu)?e.textStrokeWidth=s[0]:e.textStrokeColor=""),(s=Dn(t,n,l,"letterSpacing",d))&&s.match(yu)&&(e.letterSpacing=s),(s=Dn(t,n,l,"linePadding",d))&&s.match(yu)&&(e.linePadding=s),(s=Dn(t,n,l,"opacity",d))&&(e.opacity=parseFloat(s)),(s=kd(n,l,"textDecoration"))&&VT(e,s),(s=lm(t,l,"textDecoration"))&&VT(e,s),(s=Dn(t,n,l,"textCombine",d))&&(e.textCombineUpright=s),Dn(t,n,l,"ruby",d)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function VT(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(kr)||e.textDecoration.push(kr);break;case"noUnderline":e.textDecoration.includes(kr)&&Vi(e.textDecoration,kr);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Vi(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Vi(e.textDecoration,"overline")}}function Dn(e,t,n,s,u){return u=u===void 0?!0:u,(e=lm(e,n,s))?e:u?kd(t,n,s):null}function kd(e,t,n){if(!e)return null;var s=fr(e,Ed,n);return s||HT(e,t,n)}function lm(e,t,n){var s=fr(e,Ed,n);return s||HT(e,t,n)}function HT(e,t,n){e=Ad(e,"style",t,"");for(var s=null,u=0;u<e.length;u++){var l=Cr(e[u],"urn:ebu:tt:style",n);l||(l=fr(e[u],Ed,n)),l||(l=lm(e[u],t,n)),l&&(s=l)}return s}function Ad(e,t,n,s,u){var l=[];if(!e||1>n.length)return l;var d=e;for(e=null;!e&&!(e=u?Cr(d,u,t):d.attributes[t])&&(d=d.parent,d););if(t=e){for(t=m(t.split(" ")),u=t.next();!u.done;u=t.next())for(u=u.value,e=m(n),d=e.next();!d.done;d=e.next())if(d=d.value,s+d.attributes["xml:id"]==u){l.push(d);break}}return l}function P6(e,t,n,s){return e=GT(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),s==null?s=e.end:e.start!=null&&(s+=e.start),{start:n,end:s}}function GT(e,t){var n=fm(e.attributes.begin,t),s=fm(e.attributes.end,t);return e=fm(e.attributes.dur,t),s==null&&e!=null&&(s=n+e),{start:n,end:s}}function fm(e,t){var n=null;if(XT.test(e)){e=XT.exec(e),n=Number(e[1]);var s=Number(e[2]),u=Number(e[3]),l=Number(e[4]);l+=(Number(e[5])||0)/t.h,u+=l/t.frameRate,n=u+60*s+3600*n}else if(WT.test(e))n=cm(WT,e);else if(KT.test(e))n=cm(KT,e);else if(YT.test(e))e=YT.exec(e),n=Number(e[1])/t.frameRate;else if(qT.test(e))e=qT.exec(e),n=Number(e[1])/t.g;else if(QT.test(e))n=cm(QT,e);else if(e)throw new q(2,2,2001,"Could not parse cue time range in TTML");return n}function cm(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function O6(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{Lc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}be("shaka.text.TtmlTextParser",di),di.prototype.parseMedia=di.prototype.parseMedia,di.prototype.setManifestType=di.prototype.setManifestType,di.prototype.setSequenceMode=di.prototype.setSequenceMode,di.prototype.parseInit=di.prototype.parseInit;function N6(e,t,n,s){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(s),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var dm=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,U6=/^(\d{1,4}(?:\.\d+)?|100)%$/,yu=/^(\d+px|\d+em|\d*\.?\d+c)$/,hm=/^(\d+)px (\d+)px$/,XT=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,WT=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,KT=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,YT=/^(\d*(?:\.\d*)?)f$/,qT=/^(\d*(?:\.\d*)?)t$/,QT=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),B6=new Map().set("left",Uo).set("center","center").set("right","end").set("start",Uo).set("end","end"),F6=new Map().set("left","line-left").set("center","center").set("right","line-right"),vl=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Ed=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],JT=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];kn("application/ttml+xml",function(){return new di});function hn(){this.g=new di}hn.prototype.parseInit=function(e){var t=!1;if(new Lt().box("moov",ot).box("trak",ot).box("mdia",ot).box("minf",ot).box("stbl",ot).R("stsd",Rr).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new q(2,2,2007)},hn.prototype.setSequenceMode=function(){},hn.prototype.setManifestType=function(){},hn.prototype.parseMedia=function(e,t,n){var s=[],u=null,l=[],d=new Map,p=[];if(new Lt().box("moof",ot).box("traf",ot).R("tfhd",function(U){u=Bf(U.reader,U.flags).Nd}).R("trun",function(U){U=$f(U.reader,U.version,U.flags),U=m(U.gh);for(var B=U.next();!B.done;B=U.next())p.push(B.value.sampleSize||u||0)}).R("subs",function(U){for(var B=U.reader,$=B.T(),W=-1,J=0;J<$;J++){var G=B.T();W+=G,G=B.Ba();for(var X=[],Y=0;Y<G;Y++)U.version==1?X.push(B.T()):X.push(B.Ba()),B.X(),B.X(),B.T();d.set(W,X)}}).box("mdat",Ds(function(U){l.push(U)})).parse(e,!1),l.length==0)throw new q(2,2,2007);for(var g=Zt.apply(In,S(l)),v=0,T=0;T<p.length;T++){var b=Ze(g,v,p[T]);v+=p[T];var M=d.get(T);if(M&&M.length){b=Ze(b,0,M[0]);for(var _=[],L=M[0],O=1;O<M.length;O++){var P=Ze(e,L,M[O]);P=rf(P),_.push("data:image/png;base64,"+P),L+=M[O]}s=s.concat(this.g.parseMedia(b,t,n,_))}else s=s.concat(this.g.parseMedia(b,t,n,[]))}return s},be("shaka.text.Mp4TtmlParser",hn),hn.prototype.parseMedia=hn.prototype.parseMedia,hn.prototype.setManifestType=hn.prototype.setManifestType,hn.prototype.setSequenceMode=hn.prototype.setSequenceMode,hn.prototype.parseInit=hn.prototype.parseInit,kn('application/mp4; codecs="stpp"',function(){return new hn}),kn('application/mp4; codecs="stpp.ttml"',function(){return new hn}),kn('application/mp4; codecs="stpp.ttml.im1i"',function(){return new hn}),kn('application/mp4; codecs="stpp.ttml.im1t"',function(){return new hn}),kn('application/mp4; codecs="stpp.ttml.im2i"',function(){return new hn}),kn('application/mp4; codecs="stpp.ttml.im2t"',function(){return new hn}),kn('application/mp4; codecs="stpp.ttml.etd1"',function(){return new hn}),kn('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new hn}),kn('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new hn}),kn('application/mp4; codecs="stpp.TTML.im1t"',function(){return new hn});function Wn(){this.g="UNKNOWN"}Wn.prototype.parseInit=function(){},Wn.prototype.setSequenceMode=function(){},Wn.prototype.setManifestType=function(e){this.g=e},Wn.prototype.parseMedia=function(e,t){e=Ht(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new q(2,2,2e3);if(e=t.vttOffset,this.g=="HLS")if(n[0].includes("X-TIMESTAMP-MAP")){var s=n[0];if(e=s.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),s=s.match(/MPEGTS:(\d+)/m),!e||!s)throw new q(2,2,2e3);if(e=Ts(e[1]),e==null)throw new q(2,2,2e3);s=Number(s[1]);for(var u=t.segmentStart-t.periodStart;95443.7176888889<=u;)u-=95443.7176888889,s+=8589934592;e=t.periodStart+s/9e4-e}else t.periodStart&&t.vttOffset==t.periodStart&&(e=0);for(t=[],s=m(n[0].split(`
`)),u=s.next();!u.done;u=s.next())if(u=u.value,/^Region:/.test(u)){u=new ws(u);var l=new Lo;Po(u),Ss(u);for(var d=Po(u);d;){var p=l,g=d;(d=/^id=(.*)$/.exec(g))?p.id=d[1]:(d=/^width=(\d{1,2}|100)%$/.exec(g))?p.width=Number(d[1]):(d=/^lines=(\d+)$/.exec(g))?(p.height=Number(d[1]),p.heightUnits=2):(d=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(g))?(p.regionAnchorX=Number(d[1]),p.regionAnchorY=Number(d[2])):(d=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(g))?(p.viewportAnchorX=Number(d[1]),p.viewportAnchorY=Number(d[2])):/^scroll=up$/.exec(g)&&(p.scroll="up"),Ss(u),d=Po(u)}t.push(l)}for(s=new Map,Zy(s),u=[],n=m(n.slice(1)),l=n.next();!l.done;l=n.next()){if(l=l.value.split(`
`),(l.length!=1||l[0])&&!/^NOTE($|[ \t])/.test(l[0])&&l[0]=="STYLE"){for(p=[],d=-1,g=1;g<l.length;g++)l[g].includes("::cue")&&(p.push([]),d=p.length-1),d!=-1&&(p[d].push(l[g]),l[g].includes("}")&&(d=-1));for(p=m(p),d=p.next();!d.done;d=p.next()){var v=d.value;d="global",(g=v[0].match(/\((.*)\)/))&&(d=g.pop()),g=v.slice(1,-1),v[0].includes("}")&&(v=/\{(.*?)\}/.exec(v[0]))&&(g=v[1].split(";")),(v=s.get(d))||(v=new Bt(0,0,""));for(var T=!1,b=0;b<g.length;b++){var M=/^\s*([^:]+):\s*(.*)/.exec(g[b]);if(M){var _=M[2].trim().replace(";","");switch(M[1].trim()){case"background-color":case"background":T=!0,v.backgroundColor=_;break;case"color":T=!0,v.color=_;break;case"font-family":T=!0,v.fontFamily=_;break;case"font-size":T=!0,v.fontSize=_;break;case"font-weight":(700<=parseInt(_,10)||_=="bold")&&(T=!0,v.fontWeight=Cs);break;case"font-style":switch(_){case"normal":T=!0,v.fontStyle=ep;break;case"italic":T=!0,v.fontStyle=bs;break;case"oblique":T=!0,v.fontStyle="oblique"}break;case"opacity":T=!0,v.opacity=parseFloat(_);break;case"text-combine-upright":T=!0,v.textCombineUpright=_;break;case"text-shadow":T=!0,v.textShadow=_;break;case"white-space":T=!0,v.wrapLine=_!="noWrap"}}}T&&s.set(d,v)}}if(v=l,T=e,v.length==1&&!v[0]||/^NOTE($|[ \t])/.test(v[0])||v[0]=="STYLE"||v[0]=="REGION")l=null;else if(l=null,v[0].includes("-->")||(l=v[0],v.splice(0,1)),p=new ws(v[0]),d=ia(p),b=Do(p,/[ \t]+--\x3e[ \t]+/g),g=ia(p),d==null||b==null||g==null)ft("Failed to parse VTT time code. Cue skipped:",l,v),l=null;else{for(d+=T,g+=T,T=v.slice(1).join(`
`).trim(),s.has("global")?(v=s.get("global").clone(),v.startTime=d,v.endTime=g,v.payload=T):v=new Bt(d,g,T),Ss(p),d=Po(p);d;)ZT(v,d,t),Ss(p),d=Po(p);hf(v,s),l!=null&&(v.id=l),l=v}l&&u.push(l)}return u};function ZT(e,t,n){var s;(s=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=s[1],t=="middle"?e.textAlign=hr:e.textAlign=Jh[t.toUpperCase()]):(s=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=s[1]=="lr"?"vertical-lr":"vertical-rl":(s=/^size:([\d.]+)%$/.exec(t))?e.size=Number(s[1]):(s=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(s[1]),s[2]&&(t=s[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":pf)):(s=/^region:(.*)$/.exec(t))?(t=j6(n,s[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Zh[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=aa,e.line=Number(n[1]),n[2]&&(e.lineAlign=Zh[n[2].toUpperCase()]))}function j6(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}be("shaka.text.VttTextParser",Wn),Wn.prototype.parseMedia=Wn.prototype.parseMedia,Wn.prototype.setManifestType=Wn.prototype.setManifestType,Wn.prototype.setSequenceMode=Wn.prototype.setSequenceMode,Wn.prototype.parseInit=Wn.prototype.parseInit,kn("text/vtt",function(){return new Wn}),kn('text/vtt; codecs="vtt"',function(){return new Wn}),kn('text/vtt; codecs="wvtt"',function(){return new Wn});function wi(){this.g=null}wi.prototype.parseInit=function(e){var t=this,n=!1;if(new Lt().box("moov",ot).box("trak",ot).box("mdia",ot).R("mdhd",function(s){s=jf(s.reader,s.version),t.g=s.timescale}).box("minf",ot).box("stbl",ot).R("stsd",Rr).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new q(2,2,2008);if(!n)throw new q(2,2,2008)},wi.prototype.setSequenceMode=function(){},wi.prototype.setManifestType=function(){},wi.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new q(2,2,2008);var n=0,s=[],u,l=[],d=!1,p=!1,g=!1,v=null;if(new Lt().box("moof",ot).box("traf",ot).R("tfdt",function($){d=!0,n=Ff($.reader,$.version).baseMediaDecodeTime}).R("tfhd",function($){v=Bf($.reader,$.flags).Md}).R("trun",function($){p=!0,s=$f($.reader,$.version,$.flags).gh}).box("mdat",Ds(function($){g=!0,u=$})).parse(e,!1),!g&&!d&&!p)throw new q(2,2,2008);e=n;for(var T=new Ft(u,0),b=m(s),M=b.next();!M.done;M=b.next()){M=M.value;var _=M.hh||v,L=M.Bf?n+M.Bf:e;e=L+(_||0);var O=0;do{var P=T.T();O+=P;var U=T.T(),B=null;Df(U)=="vttc"?8<P&&(B=T.Tb(P-8)):T.skip(P-8),_&&B&&(P=$6(B,t.periodStart+L/this.g,t.periodStart+e/this.g),l.push(P))}while(M.sampleSize&&O<M.sampleSize)}return l.filter(no)};function $6(e,t,n){var s,u,l;return new Lt().box("payl",Ds(function(d){s=Ht(d)})).box("iden",Ds(function(d){u=Ht(d)})).box("sttg",Ds(function(d){l=Ht(d)})).parse(e),s?z6(s,u,l,t,n):null}function z6(e,t,n,s,u){if(e=new Bt(s,u,e),hf(e),t&&(e.id=t),n)for(t=new ws(n),n=Po(t);n;)ZT(e,n,[]),Ss(t),n=Po(t);return e}be("shaka.text.Mp4VttParser",wi),wi.prototype.parseMedia=wi.prototype.parseMedia,wi.prototype.setManifestType=wi.prototype.setManifestType,wi.prototype.setSequenceMode=wi.prototype.setSequenceMode,wi.prototype.parseInit=wi.prototype.parseInit,kn('application/mp4; codecs="wvtt"',function(){return new wi});function Si(){}Si.prototype.parseInit=function(){},Si.prototype.setSequenceMode=function(){},Si.prototype.setManifestType=function(){},Si.prototype.parseMedia=function(e){var t=Ht(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var s=new ws(n[0]),u=ia(s),l=Do(s,/,/g);if(s=ia(s),u==null||l==null||s==null)throw new q(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Bt(u,s,n.slice(1).join(`
`).trim()))}return e},be("shaka.text.SbvTextParser",Si),Si.prototype.parseMedia=Si.prototype.parseMedia,Si.prototype.setManifestType=Si.prototype.setManifestType,Si.prototype.setSequenceMode=Si.prototype.setSequenceMode,Si.prototype.parseInit=Si.prototype.parseInit,kn("text/x-subviewer",function(){return new Si});function hi(){this.g=new Wn}hi.prototype.parseInit=function(){},hi.prototype.setSequenceMode=function(){},hi.prototype.setManifestType=function(){},hi.prototype.parseMedia=function(e,t,n){return e=Ht(e),e=e3(e),e=Ze(zi(e)),this.g.parseMedia(e,t,n,[])};function e3(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=m(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}be("shaka.text.SrtTextParser",hi),hi.srt2webvtt=e3,hi.prototype.parseMedia=hi.prototype.parseMedia,hi.prototype.setManifestType=hi.prototype.setManifestType,hi.prototype.setSequenceMode=hi.prototype.setSequenceMode,hi.prototype.parseInit=hi.prototype.parseInit,kn("text/srt",function(){return new hi});function Ti(){}Ti.prototype.parseInit=function(){},Ti.prototype.setSequenceMode=function(){},Ti.prototype.setManifestType=function(){},Ti.prototype.parseMedia=function(e){var t="",n="",s=null,u=null;for(u=Ht(e).split(/\r?\n\s*\r?\n/),e=m(u),u=e.next();!u.done;u=e.next()){var l=u.value;u=l,(l=H6.exec(l))&&(s=l[1],u=l[2]),s=="V4 Styles"||s=="V4+ Styles"?(t=u,t=n?t+(`
`+u):u):s=="Events"&&(n=n?n+(`
`+u):u)}for(s=[],u=null,t=m(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(l=i3.exec(e))){if(e=l[1].trim(),l=l[2].trim(),e=="Format")u=l.split(Id);else if(e=="Style"){e=l.split(Id),l={};for(var d=0;d<u.length&&d<e.length;d++)l[u[d]]=e[d];s.push(l)}}for(u=[],t=null,n=m(n.split(/\r?\n/)),l=n.next(),e={};!l.done;e={Qi:void 0},l=n.next())if(l=l.value,!/^\s*;/.test(l)&&(d=i3.exec(l))){if(l=d[1].trim(),d=d[2].trim(),l=="Format")t=d.split(Id);else if(l=="Dialogue"){d=d.split(Id),l={};for(var p=0;p<t.length&&p<d.length;p++)l[t[p]]=d[p];p=n3(l.Start);var g=n3(l.End);d=new Bt(p,g,d.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.Qi=l.Style,(e=s.find(function(v){return function(T){return T.Name==v.Qi}}(e)))&&V6(d,e),u.push(d)}}return u};function V6(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=t3(n))&&(e.color=n),(n=t.BackColour)&&(n=t3(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=Cs),t.Italic&&(e.fontStyle=bs),t.Underline&&e.textDecoration.push(kr),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=sa,e.textAlign="start";break;case 2:e.displayAlign=sa,e.textAlign=hr;break;case 3:e.displayAlign=sa,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=hr;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=hr;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function t3(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function n3(e){return e=G6.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}be("shaka.text.SsaTextParser",Ti),Ti.prototype.parseMedia=Ti.prototype.parseMedia,Ti.prototype.setManifestType=Ti.prototype.setManifestType,Ti.prototype.setSequenceMode=Ti.prototype.setSequenceMode,Ti.prototype.parseInit=Ti.prototype.parseInit;var H6=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,i3=/^\s*([^:]+):\s*(.*)/,Id=/\s*,\s*/,G6=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;kn("text/x-ssa",function(){return new Ti});function r3(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Ud:n,qa:e}:null}function o3(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=(e[t+2]&60)>>>2;if(s>n.length-1)return null;var u=((e[t+2]&192)>>>6)+1,l=(e[t+2]&1)<<2;return l|=(e[t+3]&192)>>>6,{sampleRate:n[s],channelCount:l,codec:"mp4a.40."+u}}function s3(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var s=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return s<=n?!1:(t+=s,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function X6(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Ci(e){this.j=e,this.h=0,this.g=new Map,this.i=null}y=Ci.prototype,y.destroy=function(){this.g.clear()},y.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?On(this.convertCodecs("audio",e)):!1},y.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Mi(t)||"mp4a.40.2")+'"':t},y.getOriginalMimeType=function(){return this.j},y.transmux=function(e,t,n,s){for(var u=Ze(e),l=Fs(u),d=l.length;d<u.length&&!s3(u,d);d++);if(e=1e3*n.endTime,l=Xo(l),l.length&&n&&(l=l.find(function(T){return T.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=l.data),l=o3(u,d),!l)return Promise.reject(new q(2,3,3018,n?n.O()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount;for(var p=[];d<u.length;){var g=r3(u,d);if(!g)return Promise.reject(new q(2,3,3018,n?n.O()[0]:null));var v=g.Ud+g.qa;d+v<=u.length&&p.push({data:u.subarray(d+g.Ud,d+v),size:g.qa,duration:1024,rb:0,flags:{wb:0,kb:0,jb:0,hb:0,ib:2,xb:0}}),d+=v}return u=l.sampleRate,e=Math.floor(e*u/1e3),s={id:t.id,type:"audio",codecs:l.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:s,Ab:[],Ea:new Uint8Array([]),Na:new Uint8Array([]),Wa:0,Xa:0,data:{Ub:this.h,baseMediaDecodeTime:e,yb:p},stream:t},s=new Ns([s]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Us(s),this.g.set(n,t)),n=this.i!==t,s=ba(s),this.i=t,this.h++,n?(t=Zt(t,s),Promise.resolve(t)):Promise.resolve(s)},be("shaka.transmuxer.AacTransmuxer",Ci),Ci.prototype.transmux=Ci.prototype.transmux,Ci.prototype.getOriginalMimeType=Ci.prototype.getOriginalMimeType,Ci.prototype.convertCodecs=Ci.prototype.convertCodecs,Ci.prototype.isSupported=Ci.prototype.isSupported,Ci.prototype.destroy=Ci.prototype.destroy,Ar("audio/aac",function(){return new Ci("audio/aac")},Zr);function u3(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var s=e[t+4]&63,u=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*s+n];if(t+u>e.length)return null;var l=e[t+6]>>5,d=0;l===2?d+=2:(l&1&&l!==1&&(d+=2),l&4&&(d+=2)),d=(e[t+6]<<8|e[t+7])>>12-d&1;var p=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|p>>2,(p&3)<<6|l<<3|d<<2|s>>4,s<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][l]+d,Ea:e,qa:u}}function W6(e,t){if(e[t]===11&&e[t+1]===119){var n=0,s=5;t+=s;for(var u,l;0<s;){l=e[t];var d=Math.min(s,8),p=8-d;u=4278190080>>>24+p<<p,u=(l&u)>>p,n=n?n<<d|u:u,t+=1,s-=d}if(16>n)return!0}return!1}function Oi(e){this.j=e,this.h=0,this.g=new Map,this.i=null}y=Oi.prototype,y.destroy=function(){this.g.clear()},y.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?On(this.convertCodecs("audio",e)):!1},y.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?Be().ee()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},y.getOriginalMimeType=function(){return this.j},y.transmux=function(e,t,n,s){e=Ze(e);for(var u=Fs(e),l=u.length;l<e.length&&!W6(e,l);l++);var d=1e3*n.endTime;u=Xo(u),u.length&&n&&(u=u.find(function(T){return T.description==="com.apple.streaming.transportStreamTimestamp"}))&&(d=u.data),u=0;for(var p=new Uint8Array([]),g=[];l<e.length;){var v=u3(e,l);if(!v)return Promise.reject(new q(2,3,3018,n?n.O()[0]:null));t.audioSamplingRate=v.sampleRate,t.channelsCount=v.channelCount,u=v.sampleRate,p=v.Ea,g.push({data:e.subarray(l,l+v.qa),size:v.qa,duration:1536,rb:0,flags:{wb:0,kb:0,jb:0,hb:0,ib:2,xb:0}}),l+=v.qa}return e=Math.floor(d*u/1e3),s={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:s,Ab:[],Ea:p,Na:new Uint8Array([]),Wa:0,Xa:0,data:{Ub:this.h,baseMediaDecodeTime:e,yb:g},stream:t},s=new Ns([s]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Us(s),this.g.set(n,t)),n=this.i!==t,s=ba(s),this.i=t,this.h++,n?(t=Zt(t,s),Promise.resolve(t)):Promise.resolve(s)},be("shaka.transmuxer.Ac3Transmuxer",Oi),Oi.prototype.transmux=Oi.prototype.transmux,Oi.prototype.getOriginalMimeType=Oi.prototype.getOriginalMimeType,Oi.prototype.convertCodecs=Oi.prototype.convertCodecs,Oi.prototype.isSupported=Oi.prototype.isSupported,Oi.prototype.destroy=Oi.prototype.destroy,Ar("audio/ac3",function(){return new Oi("audio/ac3")},Zr);function a3(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new Dr(e.subarray(t+2));li(n,2),li(n,3);var s=gt(n,11)+1<<1,u=gt(n,2);if(u==3){u=gt(n,2),u=[24e3,22060,16e3][u];var l=3}else u=[48e3,44100,32e3][u],l=gt(n,2);var d=gt(n,3),p=gt(n,1);return n=gt(n,5),t+s>e.byteLength?null:(e=Math.floor(s*u/(16*[1,2,3,6][l])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,u<<6|n<<1|0,0|d<<1|p<<0,0]),{sampleRate:u,channelCount:[2,1,2,3,3,4,4,5][d]+p,Ea:e,qa:s})}function Ni(e){this.j=e,this.h=0,this.g=new Map,this.i=null}y=Ni.prototype,y.destroy=function(){this.g.clear()},y.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?On(this.convertCodecs("audio",e)):!1},y.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},y.getOriginalMimeType=function(){return this.j},y.transmux=function(e,t,n,s){e=Ze(e);for(var u=Fs(e),l=u.length;l<e.length&&(e[l]<<8|e[l+1]<<0)!==2935;l++);var d=1e3*n.endTime;u=Xo(u),u.length&&n&&(u=u.find(function(T){return T.description==="com.apple.streaming.transportStreamTimestamp"}))&&(d=u.data),u=0;for(var p=new Uint8Array([]),g=[];l<e.length;){var v=a3(e,l);if(!v)return Promise.reject(new q(2,3,3018,n?n.O()[0]:null));t.audioSamplingRate=v.sampleRate,t.channelsCount=v.channelCount,u=v.sampleRate,p=v.Ea,g.push({data:e.subarray(l,l+v.qa),size:v.qa,duration:1536,rb:0,flags:{wb:0,kb:0,jb:0,hb:0,ib:2,xb:0}}),l+=v.qa}return e=Math.floor(d*u/1e3),s={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u,duration:s,Ab:[],Ea:p,Na:new Uint8Array([]),Wa:0,Xa:0,data:{Ub:this.h,baseMediaDecodeTime:e,yb:g},stream:t},s=new Ns([s]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Us(s),this.g.set(n,t)),n=this.i!==t,s=ba(s),this.i=t,this.h++,n?(t=Zt(t,s),Promise.resolve(t)):Promise.resolve(s)},be("shaka.transmuxer.Ec3Transmuxer",Ni),Ni.prototype.transmux=Ni.prototype.transmux,Ni.prototype.getOriginalMimeType=Ni.prototype.getOriginalMimeType,Ni.prototype.convertCodecs=Ni.prototype.convertCodecs,Ni.prototype.isSupported=Ni.prototype.isSupported,Ni.prototype.destroy=Ni.prototype.destroy,Ar("audio/ec3",function(){return new Ni("audio/ec3")},Zr);function K6(e){if(!e.length)return null;var t=e.find(function(O){return O.type==7});if(e=e.find(function(O){return O.type==8}),!t||!e)return null;var n=new Dr(t.data),s=bt(n);if(bt(n),bt(n),Zn(n),q6.includes(s)&&(s=_e(n),s===3&&li(n,1),Zn(n),Zn(n),li(n,1),ze(n))){s=s!==3?8:12;for(var u=0;u<s;u++)ze(n)&&(6>u?Gf(n,16):Gf(n,64))}if(Zn(n),s=_e(n),s===0)_e(n);else if(s===1)for(li(n,1),Zn(n),Zn(n),s=_e(n),u=0;u<s;u++)Zn(n);Zn(n),li(n,1);var l=_e(n),d=_e(n),p=gt(n,1);p===0&&li(n,1),li(n,1);var g=0,v=0,T=0,b=0;if(ze(n)&&(g=_e(n),v=_e(n),T=_e(n),b=_e(n)),u=s=1,ze(n)&&ze(n)){var M=bt(n),_=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],L=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<M&&16>=M?(s=_[M-1],u=L[M-1]):M===255&&(s=gt(n,16),u=gt(n,16))}return n=(2-p)*(d+1)*16-2*T-2*b,l=16*(l+1)-2*g-2*v,g=[],t=t.fullData,g.push(t.byteLength>>>8&255),g.push(t.byteLength&255),g=g.concat.apply(g,S(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,S(e)),e=new Uint8Array([1,g[3],g[4],g[5],255,225].concat(g,[1],t)),{height:n,width:l,Na:e,Wa:s,Xa:u}}function Y6(e){function t(L){u={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:L.pts,dts:L.dts,nalus:[]}}function n(){if(u&&u.nalus.length&&u.frame){for(var L=[],O=m(u.nalus),P=O.next();!P.done;P=O.next()){P=P.value;var U=P.fullData.byteLength,B=new Uint8Array(4);B[0]=U>>24&255,B[1]=U>>16&255,B[2]=U>>8&255,B[3]=U&255,L.push(B),L.push(P.fullData)}u.data=Zt.apply(In,S(L)),s.push(u)}}for(var s=[],u=null,l=!1,d=0;d<e.length;d++){var p=e[d],g=p.nalus,v=!1;u&&g.length&&!l&&(n(),t(p)),g=m(p.nalus);for(var T=g.next();!T.done;T=g.next()){T=T.value;var b=!1;switch(T.type){case 1:var M=!1;b=!0;var _=T.data;v&&4<_.length&&(_=ik(new Dr(_)),_===2||_===4||_===7||_===9)&&(M=!0),M&&u&&u.frame&&!u.isKeyframe&&(n(),u=null),u||t(p),u.frame=!0,u.isKeyframe=M;break;case 5:b=!0,u&&u.frame&&!u.isKeyframe&&(n(),u=null),u||t(p),u.frame=!0,u.isKeyframe=!0;break;case 6:b=!0;break;case 7:v=b=!0;break;case 8:b=!0;break;case 9:l=b=!0,u&&u.frame&&(n(),u=null),u||t(p);break;case 12:b=!0;break;default:b=!1}u&&b&&u.nalus.push(T)}}return n(),s}var q6=[100,110,122,244,44,83,86,118,128,138,139,134];function Q6(e){if(!e.length)return null;var t=e.find(function(d){return d.type==32}),n=e.find(function(d){return d.type==33}),s=e.find(function(d){return d.type==34});if(!t||!n||!s)return null;var u=J6(t.fullData);e=Z6(n.fullData);var l=eR(s.fullData);return t=tR(t.fullData,n.fullData,s.fullData,{Sg:u.Sg,wh:u.wh,Cg:e.Cg,Dg:e.Dg,wg:e.wg,Bg:e.Bg,xg:e.xg,yg:e.yg,zg:e.zg,Ag:e.Ag,pg:e.pg,qg:e.qg,rg:e.rg,sg:e.sg,ug:e.ug,vg:e.vg,hg:e.hg,lf:e.lf,fg:e.fg,eg:e.eg,dg:e.dg,Ug:l.Ug}),{height:e.height,width:e.width,Na:t,Wa:e.Mk,Xa:e.Lk}}function J6(e){var t=new Dr(e,!0);return bt(t),bt(t),gt(t,4),gt(t,2),gt(t,6),e=gt(t,3),t=ze(t),{Sg:e+1,wh:t}}function Z6(e){e=new Dr(e,!0),bt(e),bt(e);var t=0,n=0,s=0,u=0;gt(e,4);var l=gt(e,3);ze(e);for(var d=gt(e,2),p=gt(e,1),g=gt(e,5),v=bt(e),T=bt(e),b=bt(e),M=bt(e),_=bt(e),L=bt(e),O=bt(e),P=bt(e),U=bt(e),B=bt(e),$=bt(e),W=[],J=[],G=0;G<l;G++)W.push(ze(e)),J.push(ze(e));if(0<l)for(G=l;8>G;G++)gt(e,2);for(G=0;G<l;G++)W[G]&&gt(e,88),J[G]&&bt(e);_e(e),W=_e(e),W==3&&gt(e,1),J=_e(e),G=_e(e),ze(e)&&(t+=_e(e),n+=_e(e),s+=_e(e),u+=_e(e));var X=_e(e),Y=_e(e),Q=_e(e);if(ze(e))for(var ie=0;ie<=l;ie++)_e(e),_e(e),_e(e);else _e(e),_e(e),_e(e);if(_e(e),_e(e),_e(e),_e(e),_e(e),_e(e),ze(e)&&ze(e))for(ie=0;4>ie;ie++)for(var te=0;te<(ie===3?2:6);te++)if(ze(e)){var Z=Math.min(64,1<<4+(ie<<1));1<ie&&js(e);for(var ve=0;ve<Z;ve++)js(e)}else _e(e);for(ze(e),ze(e),ze(e)&&(bt(e),_e(e),_e(e),ze(e)),ie=_e(e),Z=te=0;Z<ie;Z++)if(ve=!1,Z!==0&&(ve=ze(e)),ve){Z===ie&&_e(e),ze(e),_e(e);for(var de=ve=0;de<=te;de++){var ae=ze(e),ge=!1;ae||(ge=ze(e)),(ae||ge)&&ve++}te=ve}else{for(de=_e(e),ve=_e(e),te=de+ve,ae=0;ae<de;ae++)_e(e),ze(e);for(de=0;de<ve;de++)_e(e),ze(e)}if(ze(e))for(ie=_e(e),te=0;te<ie;te++){for(Z=0;Z<Q+4;Z++)gt(e,1);gt(e,1)}if(ie=Q=1,te=0,ze(e),ze(e),ze(e)){if(ze(e)&&(Z=bt(e),ve=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],de=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<Z&&16>=Z?(Q=ve[Z-1],ie=de[Z-1]):Z===255&&(Q=gt(e,16),ie=gt(e,16))),ze(e)&&ze(e),ze(e)&&(gt(e,3),ze(e),ze(e)&&(bt(e),bt(e),bt(e))),ze(e)&&(_e(e),_e(e)),ze(e),ze(e),ze(e),(Z=ze(e))&&(_e(e),_e(e),_e(e),_e(e)),ze(e)&&(gt(e,32),gt(e,32),ze(e)&&_e(e),ze(e)))for(de=!1,Z=ze(e),ve=ze(e),(Z||ve)&&((de=ze(e))&&(bt(e),gt(e,5),ze(e),gt(e,5)),gt(e,4),gt(e,4),de&&gt(e,4),gt(e,5),gt(e,5),gt(e,5)),ae=0;ae<=l;ae++){var Te=!0;ge=1,ze(e)||(Te=ze(e));var Ce=!1;if(Te?_e(e):Ce=ze(e),Ce||(ge=_e(e)+1),Z){for(Te=0;Te<ge;Te++)_e(e),_e(e),de&&(_e(e),_e(e));ze(e)}if(ve){for(Te=0;Te<ge;Te++)_e(e),_e(e),de&&(_e(e),_e(e));ze(e)}}ze(e)&&(ze(e),ze(e),ze(e),te=_e(e),_e(e),_e(e),_e(e),_e(e))}return{wg:$,Cg:d,Dg:p,Bg:g,xg:v,yg:T,zg:b,Ag:M,pg:_,qg:L,rg:O,sg:P,ug:U,vg:B,lf:te,hg:0,fg:W,eg:X,dg:Y,width:J-(t+n)*(W===1||W===2?2:1),height:G-(s+u)*(W===1?2:1),Mk:Q,Lk:ie}}function eR(e){var t=new Dr(e,!0);bt(t),bt(t),_e(t),_e(t),ze(t),ze(t),gt(t,3),ze(t),ze(t),_e(t),_e(t),js(t),ze(t),ze(t),ze(t)&&_e(t),js(t),js(t),ze(t),ze(t),ze(t),ze(t),e=ze(t),t=ze(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Ug:n}}function tR(e,t,n,s){var u=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return u[0]=1,u[1]=(s.Cg&3)<<6|(s.Dg?1:0)<<5|s.Bg&31,u[2]=s.xg,u[3]=s.yg,u[4]=s.zg,u[5]=s.Ag,u[6]=s.pg,u[7]=s.qg,u[8]=s.rg,u[9]=s.sg,u[10]=s.ug,u[11]=s.vg,u[12]=s.wg,u[13]=240|(s.lf&3840)>>8,u[14]=s.lf&255,u[15]=252|s.Ug&3,u[16]=252|s.fg&3,u[17]=248|s.eg&7,u[18]=248|s.dg&7,u[19]=0,u[20]=0,u[21]=(s.hg&3)<<6|(s.Sg&7)<<3|(s.wh?1:0)<<2|3,u[22]=3,u[23]=160,u[24]=0,u[25]=1,u[26]=(e.byteLength&65280)>>8,u[27]=(e.byteLength&255)>>0,u.set(e,28),u[23+(5+e.byteLength)]=161,u[e.byteLength+29]=0,u[e.byteLength+30]=1,u[e.byteLength+31]=(t.byteLength&65280)>>8,u[e.byteLength+32]=(t.byteLength&255)>>0,u.set(t,e.byteLength+33),u[23+(e.byteLength+10+t.byteLength)]=162,u[e.byteLength+10+t.byteLength+24]=0,u[e.byteLength+10+t.byteLength+25]=1,u[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,u[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,u.set(n,e.byteLength+10+t.byteLength+28),u}function Md(e,t){var n=e[t+1]>>3&3,s=e[t+1]>>1&3,u=e[t+2]>>4&15,l=e[t+2]>>2&3;if(n!==1&&u!==0&&u!==15&&l!==3){var d=e[t+3]>>6;u=1e3*nR[14*(n===3?3-s:s===3?3:4)+u-1],l=iR[3*(n===3?0:n===2?1:2)+l],n=rR[n][s];var p=oR[s],g=Math.floor(n*u/l+(e[t+2]>>1&1))*p,v=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(v=v?parseInt(v[1],10):0)&&87>=v&&s===2&&224e3<=u&&d===0&&(e[t+3]|=128),{sampleRate:l,channelCount:d===3?1:2,qa:g,Kk:8*n*p}}return null}function l3(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function f3(e,t){if(t+1<e.length&&l3(e,t)){var n=Md(e,t),s=4;return n&&n.qa&&(s=n.qa),t+=s,t===e.length||t+1<e.length&&l3(e,t)}return!1}var nR=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],iR=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],rR=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],oR=[0,1,1,4];function Ui(e){this.j=e,this.h=0,this.g=new Map,this.i=null}y=Ui.prototype,y.destroy=function(){this.g.clear()},y.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?On(this.convertCodecs("audio",e)):!1},y.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},y.getOriginalMimeType=function(){return this.j},y.transmux=function(e,t,n,s){for(var u=Ze(e),l=Fs(u).length;l<u.length&&!f3(u,l);l++);var d;for(e=[];l<u.length;){var p=Md(u,l);if(!p)return Promise.reject(new q(2,3,3018,n?n.O()[0]:null));d||(d=p),l+p.qa<=u.length&&e.push({data:u.subarray(l,l+p.qa),size:p.qa,duration:1152,rb:0,flags:{wb:0,kb:0,jb:0,hb:0,ib:2,xb:0}}),l+=p.qa}return d?(u=9e4*d.Kk/d.sampleRate*this.h,s={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:d.sampleRate,duration:s,Ab:[],Ea:new Uint8Array([]),Na:new Uint8Array([]),Wa:0,Xa:0,data:{Ub:this.h,baseMediaDecodeTime:u,yb:e},stream:t},s=new Ns([s]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Us(s),this.g.set(n,t)),n=this.i!==t,s=ba(s),this.i=t,this.h++,n?(t=Zt(t,s),Promise.resolve(t)):Promise.resolve(s)):Promise.reject(new q(2,3,3018,n?n.O()[0]:null))},be("shaka.transmuxer.Mp3Transmuxer",Ui),Ui.prototype.transmux=Ui.prototype.transmux,Ui.prototype.getOriginalMimeType=Ui.prototype.getOriginalMimeType,Ui.prototype.convertCodecs=Ui.prototype.convertCodecs,Ui.prototype.isSupported=Ui.prototype.isSupported,Ui.prototype.destroy=Ui.prototype.destroy,Ar("audio/mpeg",function(){return new Ui("audio/mpeg")},Zr);function Bi(e){this.h=e,this.g=null}y=Bi.prototype,y.destroy=function(){},y.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Mi(e).split(","),n=Qn("audio",t);return t=Qn("video",t),!n||t||Vn(n)!="mp3"?!1:On(this.convertCodecs("audio",e))},y.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},y.getOriginalMimeType=function(){return this.h},y.transmux=function(e,t,n,s,u){if(this.g?this.g.clearData():this.g=new Ut,this.g.Ff(n.i),e=Ze(e),e=this.g.parse(e),e.Od().audio!="mp3"||u!="audio")return Promise.reject(new q(2,3,3018,n?n.O()[0]:null));for(n=new Uint8Array([]),u=m(e.sb()),e=u.next();!e.done;e=u.next())if(e=e.value.data)for(t=0;t<e.length;)(s=Md(e,t))?(t+s.qa<=e.length&&(n=Zt(n,e.subarray(t,t+s.qa))),t+=s.qa):t++;return Promise.resolve(n)},be("shaka.transmuxer.MpegTsTransmuxer",Bi),Bi.prototype.transmux=Bi.prototype.transmux,Bi.prototype.getOriginalMimeType=Bi.prototype.getOriginalMimeType,Bi.prototype.convertCodecs=Bi.prototype.convertCodecs,Bi.prototype.isSupported=Bi.prototype.isSupported,Bi.prototype.destroy=Bi.prototype.destroy,Ar("video/mp2t",function(){return new Bi("video/mp2t")},np);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function bi(e){this.h=e,(this.g=lg.get("ISOBoxer")())&&sR(this)}function sR(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(s){this._procEntryField(s,"BytesOfClearData","uint",16),this._procEntryField(s,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,s=0;16>s;s++)this.usertype[s]!==uR[s]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}y=bi.prototype,y.destroy=function(){},y.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?On(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),On(t)||On(e))},y.convertCodecs=function(e,t){return t.replace("mss/","")},y.getOriginalMimeType=function(){return this.h},y.transmux=function(e,t,n){if(!n)return Promise.resolve(Ze(e));if(!t.mssPrivateData)return Promise.reject(new q(2,3,3020,n?n.O()[0]:null));try{var s,u=this.g.parseBuffer(e),l=u.fetch("tfhd");l.track_ID=t.id+1;var d=u.fetch("tfdt"),p=u.fetch("traf");d===null&&(d=this.g.createFullBox("tfdt",p,l),d.version=1,d.flags=0,d.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var g=u.fetch("trun"),v=u.fetch("tfxd");v&&v._parent.boxes.splice(v._parent.boxes.indexOf(v),1);var T=u.fetch("tfrf");T&&T._parent.boxes.splice(T._parent.boxes.indexOf(T),1);var b=u.fetch("sepiff");if(b!==null){b.type="senc",b.usertype=void 0;var M=u.fetch("saio");if(M===null){M=this.g.createFullBox("saio",p),M.version=0,M.flags=0,M.entry_count=1,M.offset=[0];var _=this.g.createFullBox("saiz",p);if(_.version=0,_.flags=0,_.sample_count=b.sample_count,_.default_sample_info_size=0,_.sample_info_size=[],b.flags&2)for(s=0;s<b.sample_count;s+=1)_.sample_info_size[s]=10+6*b.entry[s].NumberOfEntries;else _.default_sample_info_size=8}}l.flags&=16777214,l.flags|=131072,g.flags|=1;var L=u.fetch("moof");g.data_offset=L.getLength()+8;var O=u.fetch("saio");O!==null&&(O.offset[0]=c3(L,"traf")+c3(p,"senc")+16);var P=Ze(u.write());return Promise.resolve(P)}catch(U){return U instanceof q?Promise.reject(U):Promise.reject(new q(2,3,3022,n?n.O()[0]:null))}};function c3(e,t){for(var n=8,s=0;s<e.boxes.length&&e.boxes[s].type!==t;s++)n+=e.boxes[s].size;return n}be("shaka.transmuxer.MssTransmuxer",bi),bi.prototype.transmux=bi.prototype.transmux,bi.prototype.getOriginalMimeType=bi.prototype.getOriginalMimeType,bi.prototype.convertCodecs=bi.prototype.convertCodecs,bi.prototype.isSupported=bi.prototype.isSupported,bi.prototype.destroy=bi.prototype.destroy;var uR=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ar("mss/audio/mp4",function(){return new bi("mss/audio/mp4")},Zr),Ar("mss/video/mp4",function(){return new bi("mss/video/mp4")},Zr);function Fi(e){this.m=e,this.g=0,this.j=new Map,this.l=this.i=this.h=null}y=Fi.prototype,y.destroy=function(){this.j.clear(),this.i&&this.i.destroy()},y.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var s=Mi(n).split(",");return n=Qn("audio",s),s=Qn("video",s),n&&(n=Vn(n),!aR.includes(n))||s&&(n=Vn(s),!lR.includes(n))?!1:t?On(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),On(t)||On(e))},y.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Mi(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return wf(n,"audio/mp4")}).map(m1).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},y.getOriginalMimeType=function(){return this.m},y.transmux=function(e,t,n,s,u){var l=Ze(e);if(u=="audio"&&!$s(l)){for(var d=Fs(l),p=d.length;p<l.length;p++)if(f3(l,p))return Promise.reject(new q(2,3,3018,n?n.O()[0]:null));for(p=d.length;p<l.length;p++)if(s3(l,p))return this.i||(this.i=new Ci("audio/aac")),this.i.transmux(e,t,n,s,u);return Promise.reject(new q(2,3,3018,n?n.O()[0]:null))}this.h?this.h.clearData():this.h=new Ut,this.h.Ff(n.i);var g=this.h.parse(l),v=[],T=g.Od();try{var b=null;if(u=="video"){switch(T.video){case"avc":var M=[],_=null,L=g.Rc(),O=Y6(L);if(!O.length)throw new q(2,3,3023,n?n.O()[0]:null);for(var P=0;P<O.length;P++){var U=O[P];_==null&&(_=U.dts);var B=void 0;B=P+1<O.length?(O[P+1].dts||0)-(U.dts||0):1<O.length?(U.dts||0)-(O[P-1].dts||0):9e4*(n.endTime-n.startTime),M.push({data:U.data,size:U.data.byteLength,duration:B,rb:Math.round((U.pts||0)-(U.dts||0)),flags:{wb:0,kb:0,jb:0,hb:0,ib:U.isKeyframe?2:1,xb:U.isKeyframe?0:1}})}for(var $=[],W=m(L),J=W.next();!J.done;J=W.next())$.push.apply($,S(J.value.nalus));var G=K6($);if(!G||_==null)throw new q(2,3,3018,n?n.O()[0]:null);t.height=G.height,t.width=G.width,b={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:s,Ab:[],Ea:new Uint8Array([]),Na:G.Na,Wa:G.Wa,Xa:G.Xa,data:{Ub:this.g,baseMediaDecodeTime:_,yb:M},stream:t};break;case"hvc":var X=[],Y=null,Q=[],ie=g.Rc();if(!ie.length)throw new q(2,3,3023,n?n.O()[0]:null);for(var te=0;te<ie.length;te++){var Z=ie[te],ve=Z.nalus;Q.push.apply(Q,S(ve));for(var de=!1,ae=[],ge=!1,Te=m(ve),Ce=Te.next();!Ce.done;Ce=Te.next()){var Pe=Ce.value;switch(Pe.type){case 1:case 0:var Re=ge=!0;break;case 19:case 20:case 21:de=Re=ge=!0;break;case 32:Re=!0;break;case 33:Re=!0;break;case 34:Re=!0;break;case 35:ge=Re=!0;break;case 39:case 40:Re=!0;break;default:Re=!1}if(ge&&Re){var yt=Pe.fullData.byteLength,pt=new Uint8Array(4);pt[0]=yt>>24&255,pt[1]=yt>>16&255,pt[2]=yt>>8&255,pt[3]=yt&255,ae.push(pt),ae.push(Pe.fullData)}}var At=ae.length?{data:Zt.apply(In,S(ae)),isKeyframe:de}:null;if(At){Y==null&&Z.dts!=null&&(Y=Z.dts);var ut=void 0;ut=te+1<ie.length?(ie[te+1].dts||0)-(Z.dts||0):1<ie.length?(Z.dts||0)-(ie[te-1].dts||0):9e4*(n.endTime-n.startTime),X.push({data:At.data,size:At.data.byteLength,duration:ut,rb:Math.round((Z.pts||0)-(Z.dts||0)),flags:{wb:0,kb:0,jb:0,hb:0,ib:At.isKeyframe?2:1,xb:At.isKeyframe?0:1}})}}var et=Q6(Q);if(!et||Y==null)throw new q(2,3,3018,n?n.O()[0]:null);t.height=et.height,t.width=et.width,b={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:s,Ab:[],Ea:new Uint8Array([]),Na:et.Na,Wa:et.Wa,Xa:et.Xa,data:{Ub:this.g,baseMediaDecodeTime:Y,yb:X},stream:t}}b&&(v.push(b),b=null)}if(u=="audio"){switch(T.audio){case"aac":for(var Et=[],at,rt=null,dt=null,Xt=null,Vt=m(g.sb()),Wt=Vt.next();!Wt.done;Wt=Vt.next()){var pn=Wt.value,on=pn.data;if(on){var It=0;if(dt==-1&&Xt)on=Zt(Xt,pn.data),dt=null;else if(dt!=null&&Xt){It=Math.max(0,dt);var go=Zt(Xt,on.subarray(0,It));Et.push({data:go,size:go.byteLength,duration:1024,rb:0,flags:{wb:0,kb:0,jb:0,hb:0,ib:2,xb:0}}),dt=Xt=null}if(at=o3(on,It),!at)throw new q(2,3,3018,n?n.O()[0]:null);for(t.audioSamplingRate=at.sampleRate,t.channelsCount=at.channelCount,rt==null&&pn.pts!==null&&(rt=pn.pts);It<on.length;){var pi=r3(on,It);if(!pi){Xt=on.subarray(It,on.length),dt=-1;break}var mo=pi.Ud+pi.qa;dt=Math.max(0,It+mo-on.length),dt!=0?Xt=on.subarray(It+pi.Ud,It+mo):It+mo<=on.length&&Et.push({data:on.subarray(It+pi.Ud,It+mo),size:pi.qa,duration:1024,rb:0,flags:{wb:0,kb:0,jb:0,hb:0,ib:2,xb:0}}),It+=mo}}}if(!at||rt==null){if(!g.Rc().length)throw new q(2,3,3018,n?n.O()[0]:null);rt=9e4*n.startTime;var vu=Qn("audio",t.codecs.split(","));if(!vu||!t.channelsCount||!t.audioSamplingRate)throw new q(2,3,3018,n?n.O()[0]:null);at={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:vu};var xu=X6(vu,t.channelsCount);if(!xu)throw new q(2,3,3018,n?n.O()[0]:null);for(var sr=rt+9e4*(n.endTime-n.startTime),h3=rt;h3<sr;)Et.push({data:xu,size:xu.byteLength,duration:1024,rb:0,flags:{wb:0,kb:0,jb:0,hb:0,ib:2,xb:0}}),h3+=1024/at.sampleRate*9e4}var p3=at.sampleRate,fR=rt/9e4*p3;b={id:t.id,type:"audio",codecs:at.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:p3,duration:s,Ab:[],Ea:new Uint8Array([]),Na:new Uint8Array([]),Wa:0,Xa:0,data:{Ub:this.g,baseMediaDecodeTime:fR,yb:Et},stream:t};break;case"ac3":for(var g3=[],Rd=0,pm=new Uint8Array([]),_d=null,m3=m(g.sb()),gm=m3.next();!gm.done;gm=m3.next()){var mm=gm.value,ym=mm.data;_d==null&&mm.pts!==null&&(_d=mm.pts);for(var wu=0;wu<ym.length;){var yo=u3(ym,wu);yo?(t.audioSamplingRate=yo.sampleRate,t.channelsCount=yo.channelCount,Rd=yo.sampleRate,pm=yo.Ea,g3.push({data:ym.subarray(wu,wu+yo.qa),size:yo.qa,duration:1536,rb:0,flags:{wb:0,kb:0,jb:0,hb:0,ib:2,xb:0}}),wu+=yo.qa):wu++}}if(Rd==0||pm.byteLength==0||_d==null)throw new q(2,3,3018,n?n.O()[0]:null);var cR=_d/9e4*Rd;b={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Rd,duration:s,Ab:[],Ea:pm,Na:new Uint8Array([]),Wa:0,Xa:0,data:{Ub:this.g,baseMediaDecodeTime:cR,yb:g3},stream:t};break;case"ec3":for(var y3=[],Ld=0,vm=new Uint8Array([]),Dd=null,v3=m(g.sb()),xm=v3.next();!xm.done;xm=v3.next()){var wm=xm.value,Sm=wm.data;Dd==null&&wm.pts!==null&&(Dd=wm.pts);for(var Su=0;Su<Sm.length;){var vo=a3(Sm,Su);vo?(t.audioSamplingRate=vo.sampleRate,t.channelsCount=vo.channelCount,Ld=vo.sampleRate,vm=vo.Ea,y3.push({data:Sm.subarray(Su,Su+vo.qa),size:vo.qa,duration:1536,rb:0,flags:{wb:0,kb:0,jb:0,hb:0,ib:2,xb:0}}),Su+=vo.qa):Su++}}if(Ld==0||vm.byteLength==0||Dd==null)throw new q(2,3,3018,n?n.O()[0]:null);var dR=Dd/9e4*Ld;b={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Ld,duration:s,Ab:[],Ea:vm,Na:new Uint8Array([]),Wa:0,Xa:0,data:{Ub:this.g,baseMediaDecodeTime:dR,yb:y3},stream:t};break;case"mp3":for(var x3=[],Pd,Od=null,w3=m(g.sb()),Tm=w3.next();!Tm.done;Tm=w3.next()){var Cm=Tm.value,xl=Cm.data;if(xl){Od==null&&Cm.pts!==null&&(Od=Cm.pts);for(var is=0;is<xl.length;){var Tu=Md(xl,is);Tu?(Pd||(Pd=Tu),is+Tu.qa<=xl.length&&x3.push({data:xl.subarray(is,is+Tu.qa),size:Tu.qa,duration:1152,rb:0,flags:{wb:0,kb:0,jb:0,hb:0,ib:2,xb:0}}),is+=Tu.qa):is++}}}if(!Pd||Od==null)throw new q(2,3,3018,n?n.O()[0]:null);var S3=Pd.sampleRate,hR=Od/9e4*S3;b={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:S3,duration:s,Ab:[],Ea:new Uint8Array([]),Na:new Uint8Array([]),Wa:0,Xa:0,data:{Ub:this.g,baseMediaDecodeTime:hR,yb:x3},stream:t};break;case"opus":var T3=[],Nd=null,yr=g.G;if(!yr)throw new q(2,3,3018,n?n.O()[0]:null);var Kn=[];switch(yr.jj){case 1:case 2:Kn=[0];break;case 0:Kn=[255,1,1,0,1];break;case 128:Kn=[255,2,0,0,1];break;case 3:Kn=[1,2,1,0,2,1];break;case 4:Kn=[1,2,2,0,1,2,3];break;case 5:Kn=[1,3,2,0,4,1,2,3];break;case 6:Kn=[1,4,2,0,4,1,2,3,5];break;case 7:Kn=[1,4,2,0,4,1,2,3,5,6];break;case 8:Kn=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Kn=[1,1,2,0,1];break;case 131:Kn=[1,1,3,0,1,2];break;case 132:Kn=[1,1,4,0,1,2,3];break;case 133:Kn=[1,1,5,0,1,2,3,4];break;case 134:Kn=[1,1,6,0,1,2,3,4,5];break;case 135:Kn=[1,1,7,0,1,2,3,4,5,6];break;case 136:Kn=[1,1,8,0,1,2,3,4,5,6,7]}for(var C3=new Uint8Array([0,yr.channelCount,0,0,yr.sampleRate>>>24&255,yr.sampleRate>>>17&255,yr.sampleRate>>>8&255,yr.sampleRate>>>0&255,0,0].concat(S(Kn))),b3=yr.sampleRate,k3=m(g.sb()),bm=k3.next();!bm.done;bm=k3.next()){var km=bm.value,Cu=km.data;Nd==null&&km.pts!==null&&(Nd=km.pts);for(var wl=0;wl<Cu.length;){for(var pR=(Cu[wl+1]&16)!==0,gR=(Cu[wl+1]&8)!==0,Vr=wl+2,Ud=0;Cu[Vr]===255;)Ud+=255,Vr+=1;Ud+=Cu[Vr],Vr+=1,Vr+=pR?2:0,Vr+=gR?2:0;var A3=Cu.slice(Vr,Vr+Ud);T3.push({data:A3,size:A3.byteLength,duration:960,rb:0,flags:{wb:0,kb:0,jb:0,hb:0,ib:2,xb:0}}),wl=Vr+Ud}}if(C3.byteLength==0||Nd==null)throw new q(2,3,3018,n?n.O()[0]:null);t.audioSamplingRate=yr.sampleRate,t.channelsCount=yr.channelCount;var mR=Nd/9e4*b3;b={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:b3,duration:s,Ab:[],Ea:C3,Na:new Uint8Array([]),Wa:0,Xa:0,data:{Ub:this.g,baseMediaDecodeTime:mR,yb:T3},stream:t}}b&&(v.push(b),b=null)}}catch(Em){return Em&&Em.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(Em)}if(!v.length)return Promise.reject(new q(2,3,3018,n?n.O()[0]:null));var E3=new Ns(v),Am=t.id+"_"+n.i;if(this.j.has(Am))var Sl=this.j.get(Am);else Sl=Us(E3),this.j.set(Am,Sl);var yR=this.l!==Sl,I3=ba(E3);if(this.l=Sl,this.g++,yR){var vR=Zt(Sl,I3);return Promise.resolve(vR)}return Promise.resolve(I3)},be("shaka.transmuxer.TsTransmuxer",Fi),Fi.prototype.transmux=Fi.prototype.transmux,Fi.prototype.getOriginalMimeType=Fi.prototype.getOriginalMimeType,Fi.prototype.convertCodecs=Fi.prototype.convertCodecs,Fi.prototype.isSupported=Fi.prototype.isSupported,Fi.prototype.destroy=Fi.prototype.destroy;var aR=["aac","ac-3","ec-3","mp3","opus"],lR=["avc","hevc"];Ar("video/mp2t",function(){return new Fi("video/mp2t")},ip);function d3(){}ue(d3,ei),be("shaka.util.FairPlayUtils",d3)}).call(i,o,o,void 0);for(var c in i.shaka)h[c]=i.shaka[c]})()}(Vm)),Vm}var eD=ZL();const aC=JL(eD);let cs,$n;const My={playingState:!1},tD=async h=>{aC.polyfill.installAll(),$n=h,$n||($n=document.createElement("video"),$n.style.cssText="position: absolute; top: 0; left: 0; z-index: -1",$n.width=window.innerWidth,$n.height=window.innerHeight,cs=new aC.Player,await cs.attach($n),$n.autoplay=!1,cs.addEventListener("error",o=>{console.error(o)}),document.body.insertBefore($n,document.body.firstChild))},nD=async h=>{if(!cs||!$n)throw"Player not initialized yet";await cs.load(h.streamUrl)},iD=()=>{$n.play().then(()=>{My.playingState=!0})},rD=()=>{$n.pause(),My.playingState=!1},oD=async()=>{await cs.destroy(),cs=null,$n.remove(),$n=null},sD=()=>$n.currentTime,uD=()=>$n.duration,aD=()=>{let h=o=>new Date(o*1e3).toISOString().substr(14,5);return`${h($n.currentTime)} : ${h(Math.floor($n.duration))}`},xo={init:tD,load:nD,play:iD,pause:rD,getCurrentTime:sD,getVideoDuration:uD,getTimeFormat:aD,state:My,destroy:oD},lD=Oe.Component("Player",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),a[0].populate(r[0]),S===!0&&(E-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].y=1080,r[1].mount="{y:1}",r[1].w=1920,r[1].h=150,r[1].color={top:"0x00000000",bottom:"0x444444ff"},r[1].alpha={transition:i.controlsVisibility},a[1].populate(r[1]),S===!0&&(E-=1),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},S===!0?m:i),r[2].x=60,r[2].y=50,a[2].populate(r[2]),S===!0&&(E-=1),o=a[2],r[3]={},a[3]=this.element({parent:o||"root"},S===!0?m:i),r[3].w=60,r[3].h=60,r[3].color="0x0087ceeb",r[3].effects=[{type:"radius",props:{radius:16}}],a[3].populate(r[3]),S===!0&&(E-=1),o=a[3],r[4]={},a[4]=this.element({parent:o||"root"},S===!0?m:i),r[4].y=14,r[4].x=14,r[4].w=32,r[4].h=32,r[4].src=i.playing?"assets/player/pause.png":"assets/player/play.png",a[4].populate(r[4]),S===!0&&(E-=1),o=a[2],r[5]={},a[5]=this.element({parent:o||"root"},S===!0?m:i),r[5].y=22,r[5].x=100,r[5].w=i.progressLength,r[5].h=16,r[5].color="0xffffff80",r[5].effects=[{type:"radius",props:{radius:8}}],a[5].populate(r[5]),S===!0&&(E-=1),o=a[5],r[6]={},a[6]=this.element({parent:o||"root"},S===!0?m:i),r[6].h=16,r[6].w={transition:{value:i.progress,d:100,f:"ease-in-out"}},r[6].effects=[{type:"radius",props:{radius:8}}],r[6].color="0x0087ceeb",a[6].populate(r[6]),S===!0&&(E-=1),A[7]=c.components&&c.components.Circle||f.Circle,o=a[5],r[7]={},a[7]=this.element({parent:o||"root"},S===!0?m:i),r[7].size=28,r[7].color="0xffffffff",r[7].y="-6",r[7].x={transition:{value:i.progress-8,d:100,f:"ease-in-out"}},R[7]=[],typeof A[7]<"u")for(let N in A[7][Symbol.for("config")].props)delete r[7][A[7][Symbol.for("config")].props[N]],R[7].push(A[7][Symbol.for("config")].props[N]);if(a[7].populate(r[7]),S===!0&&(E-=1),o=a[7],C[8]={},C[8].size=28,C[8].color="0xffffffff",C[8].y="-6",I={transition:{value:i.progress-8,d:100,f:"ease-in-out"}},Array.isArray(I)===!0&&(I=w(I).slice(0)),C[8].x=I,k=C[8].is||"Circle",f[8],typeof k=="string"){if(f[8]=c.components&&c.components[k]||f[k],!f[8])throw new Error('Component "Circle" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[8]=k);return a[8]=f[8].call(null,{props:C[8]},a[7],i),a[8][Symbol.for("slots")][0]?(o=a[8][Symbol.for("slots")][0],m=a[8],S=!0):o=a[8][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),o=a[2],r[9]={},a[9]=this.element({parent:o||"root"},S===!0?m:i),r[9].x=1660,r[9].y=16,a[9].populate(r[9]),S===!0&&(E-=1),o=a[9],r[10]={},a[10]=this.element({parent:o||"root"},S===!0?m:i),r[10].content=i.currentTime,r[10].size=25,r[10].__textnode=!0,a[10].populate(r[10]),S===!0&&(E-=1),o=a[9],r[11]={},a[11]=this.element({parent:o||"root"},S===!0?m:i),r[11].x=70,r[11].size=25,r[11].content="/",r[11].__textnode=!0,a[11].populate(r[11]),S===!0&&(E-=1),o=a[9],r[12]={},a[12]=this.element({parent:o||"root"},S===!0?m:i),r[12].x=85,r[12].size=25,r[12].content=i.duration,r[12].__textnode=!0,a[12].populate(r[12]),S===!0&&(E-=1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[7]=null,C[8]=null,f[8]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(o,i,c,f,x,w){i[1].set("alpha",{transition:o.controlsVisibility})},function(o,i,c,f,x,w){i[3].set("effects",[{type:"radius",props:{radius:16}}])},function(o,i,c,f,x,w){i[4].set("src",o.playing?"assets/player/pause.png":"assets/player/play.png")},function(o,i,c,f,x,w){i[5].set("effects",[{type:"radius",props:{radius:8}}])},function(o,i,c,f,x,w){i[6].set("w",{transition:{value:o.progress,d:100,f:"ease-in-out"}})},function(o,i,c,f,x,w){i[6].set("effects",[{type:"radius",props:{radius:8}}])},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[7]>"u"||skips[7].indexOf("x")===-1)&&i[7].set("x",{transition:{value:o.progress-8,d:100,f:"ease-in-out"}})},function(o,i,c,f,x,w){i[8][Symbol.for("props")].x={transition:{value:o.progress-8,d:100,f:"ease-in-out"}}},function(o,i,c,f,x,w){i[10].set("content",o.currentTime)},function(o,i,c,f,x,w){i[12].set("content",o.duration)}],context:{}},state(){return{controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}},hooks:{focus(){this.$emit("clearBackground")},unfocus(){this.$emit("changeBackground")},async init(){await xo.init()},async ready(){await xo.load({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});const h=i=>new Date(i*1e3).toISOString().substr(14,5),o=xo.getVideoDuration();o&&(this.duration=h(o),this.progressChunkSize=Math.round(this.progressLength/o*100)/100),this.$setInterval(()=>{const i=xo.getCurrentTime();this.currentTime=h(i),this.progress=Math.round(i*this.progressChunkSize)},1e3),this.play()},async destroy(){await xo.destroy()}},input:{space(){this.play()},up(){this.showControls(1)},down(){this.showControls(0)}},methods:{play(){this.showControls(1),this.hideTimeout=this.$setTimeout(()=>this.showControls(0),3e3),xo.state.playingState==!0?(xo.pause(),this.playing=!1):(console.log("play!"),xo.play(),this.playing=!0)},showControls(h){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=h}}}),fD=Oe.Component("Colors",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=1920,r[0].h=1080,r[0].color={transition:i.bg},a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].x=20,r[1].y=20,a[1].populate(r[1]),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].w=100,r[2].h=100,r[2].x=0,r[2].color="0xecfeffff",a[2].populate(r[2]),o=a[1],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].w=100,r[3].h=100,r[3].x=120,r[3].color="0xa5f3fcff",a[3].populate(r[3]),o=a[1],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].w=100,r[4].h=100,r[4].x=240,r[4].color="0x22d3eeff",a[4].populate(r[4]),o=a[1],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].w=100,r[5].h=100,r[5].x=360,r[5].color="0x0891b2ff",a[5].populate(r[5]),o=a[0],r[6]={},a[6]=this.element({parent:o||"root"},i),r[6].x=20,r[6].y=140,a[6].populate(r[6]),o=a[6],r[7]={},a[7]=this.element({parent:o||"root"},i),r[7].w=100,r[7].h=100,r[7].x=0,r[7].color="0xecfeffff",a[7].populate(r[7]),o=a[6],r[8]={},a[8]=this.element({parent:o||"root"},i),r[8].w=100,r[8].h=100,r[8].x=120,r[8].color="0xa5f3fcff",a[8].populate(r[8]),o=a[6],r[9]={},a[9]=this.element({parent:o||"root"},i),r[9].w=100,r[9].h=100,r[9].x=240,r[9].color="0x22d3eeff",a[9].populate(r[9]),o=a[6],r[10]={},a[10]=this.element({parent:o||"root"},i),r[10].w=100,r[10].h=100,r[10].x=360,r[10].color="0x0891b2ff",a[10].populate(r[10]),o=a[0],r[11]={},a[11]=this.element({parent:o||"root"},i),r[11].x=20,r[11].y=260,a[11].populate(r[11]),o=a[11],r[12]={},a[12]=this.element({parent:o||"root"},i),r[12].w=100,r[12].h=100,r[12].x=0,r[12].color="0xecfeffaa",a[12].populate(r[12]),o=a[11],r[13]={},a[13]=this.element({parent:o||"root"},i),r[13].w=100,r[13].h=100,r[13].x=120,r[13].color="0xa5f3fc33",a[13].populate(r[13]),o=a[11],r[14]={},a[14]=this.element({parent:o||"root"},i),r[14].w=100,r[14].h=100,r[14].x=240,r[14].color="0x22d3ee20",a[14].populate(r[14]),o=a[11],r[15]={},a[15]=this.element({parent:o||"root"},i),r[15].w=100,r[15].h=100,r[15].x=360,r[15].color="0x0891b2ff",a[15].populate(r[15]),o=a[0],r[16]={},a[16]=this.element({parent:o||"root"},i),r[16].x=20,r[16].y=380,a[16].populate(r[16]),o=a[16],r[17]={},a[17]=this.element({parent:o||"root"},i),r[17].w=100,r[17].h=100,r[17].x=0,r[17].color="0xecfeffff",a[17].populate(r[17]),o=a[16],r[18]={},a[18]=this.element({parent:o||"root"},i),r[18].w=100,r[18].h=100,r[18].x=120,r[18].color="0xa5f3fcff",a[18].populate(r[18]),o=a[16],r[19]={},a[19]=this.element({parent:o||"root"},i),r[19].w=100,r[19].h=100,r[19].x=240,r[19].color="0x22d3eeff",a[19].populate(r[19]),o=a[16],r[20]={},a[20]=this.element({parent:o||"root"},i),r[20].w=100,r[20].h=100,r[20].x=360,r[20].color="0x0891b2ff",a[20].populate(r[20]),o=a[0],r[21]={},a[21]=this.element({parent:o||"root"},i),r[21].x=20,r[21].y=500,a[21].populate(r[21]),o=a[21],r[22]={},a[22]=this.element({parent:o||"root"},i),r[22].w=100,r[22].h=100,r[22].x=0,r[22].color="0xecfeffab",a[22].populate(r[22]),o=a[21],r[23]={},a[23]=this.element({parent:o||"root"},i),r[23].w=100,r[23].h=100,r[23].x=120,r[23].color="0xa5f3fc33",a[23].populate(r[23]),o=a[21],r[24]={},a[24]=this.element({parent:o||"root"},i),r[24].w=100,r[24].h=100,r[24].x=240,r[24].color="0x22d3ee21",a[24].populate(r[24]),o=a[21],r[25]={},a[25]=this.element({parent:o||"root"},i),r[25].w=100,r[25].h=100,r[25].x=360,r[25].color="0x0891b2ff",a[25].populate(r[25]),o=a[0],r[26]={},a[26]=this.element({parent:o||"root"},i),r[26].x=20,r[26].y=620,a[26].populate(r[26]),o=a[26],r[27]={},a[27]=this.element({parent:o||"root"},i),r[27].w=100,r[27].h=100,r[27].x=0,r[27].color="0x000000ff",a[27].populate(r[27]),o=a[26],r[28]={},a[28]=this.element({parent:o||"root"},i),r[28].w=100,r[28].h=100,r[28].x=120,r[28].color="0xccccccff",a[28].populate(r[28]),o=a[26],r[29]={},a[29]=this.element({parent:o||"root"},i),r[29].w=100,r[29].h=100,r[29].x=240,r[29].color="0x889900ff",a[29].populate(r[29]),o=a[26],r[30]={},a[30]=this.element({parent:o||"root"},i),r[30].w=100,r[30].h=100,r[30].x=360,r[30].color="0x00ff00ff",a[30].populate(r[30]),o=a[0],r[31]={},a[31]=this.element({parent:o||"root"},i),r[31].x=20,r[31].y=740,a[31].populate(r[31]),o=a[31],r[32]={},a[32]=this.element({parent:o||"root"},i),r[32].w=100,r[32].h=100,r[32].x=0,r[32].color="0x000000ff",a[32].populate(r[32]),o=a[31],r[33]={},a[33]=this.element({parent:o||"root"},i),r[33].w=100,r[33].h=100,r[33].x=120,r[33].color="0xccccccff",a[33].populate(r[33]),o=a[31],r[34]={},a[34]=this.element({parent:o||"root"},i),r[34].w=100,r[34].h=100,r[34].x=240,r[34].color="0x889900ff",a[34].populate(r[34]),o=a[31],r[35]={},a[35]=this.element({parent:o||"root"},i),r[35].w=100,r[35].h=100,r[35].x=360,r[35].color="0x00ff00ff",a[35].populate(r[35]),o=a[0],r[36]={},a[36]=this.element({parent:o||"root"},i),r[36].x=620,r[36].y=20,a[36].populate(r[36]),o=a[36],r[37]={},a[37]=this.element({parent:o||"root"},i),r[37].w=300,r[37].h=200,r[37].x=0,r[37].color={transition:i.color1},a[37].populate(r[37]),o=a[36],r[38]={},a[38]=this.element({parent:o||"root"},i),r[38].w=300,r[38].h=200,r[38].x=0,r[38].y=250,r[38].color={transition:i.color2},a[38].populate(r[38]),o=a[36],r[39]={},a[39]=this.element({parent:o||"root"},i),r[39].w=300,r[39].h=200,r[39].x=100,r[39].y=400,r[39].color={transition:i.color3},a[39].populate(r[39]),o=a[36],r[40]={},a[40]=this.element({parent:o||"root"},i),r[40].w=300,r[40].h=200,r[40].x=0,r[40].y=650,r[40].color={transition:{value:i.color4,d:1e3,f:"ease-in-out"}},a[40].populate(r[40]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("color",{transition:o.bg})},function(o,i,c,f,x,w){i[37].set("color",{transition:o.color1})},function(o,i,c,f,x,w){i[38].set("color",{transition:o.color2})},function(o,i,c,f,x,w){i[39].set("color",{transition:o.color3})},function(o,i,c,f,x,w){i[40].set("color",{transition:{value:o.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter(){this.color1=this.color1==="#0891b2"?"#22d3ee":"#0891b2",this.color2=this.color2==="#dc2626"?"#0f0":"#dc2626",this.color3=this.color3==="rgba(251, 191, 36)"?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4=this.color4==="#1e3a8a"?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let h=0;const o=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{h=h+1,h===o.length-1&&(h=0),this.bg=o[h]},2e3)}}}),cD=Oe.Component("Gradients",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].w=1920/4,r[1].h=1080,r[1].color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].w=1920/4,r[2].h=1080,r[2].x=1920/4,r[2].color="{left: '0xdc2626ff',  right: '0xf87171ff'}",a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].w=1920/4,r[3].h=1080,r[3].x=1920/4*2,r[3].color="{top: '0x0891b2ff', right: '0xf87171ff'}",a[3].populate(r[3]),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].w=1920/4,r[4].h=1080,r[4].x=1920/4*3,r[4].color="{right: '0x008000ff', bottom: '0xffd700ff'}",a[4].populate(r[4]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("w",1920/4)},function(o,i,c,f,x,w){i[2].set("w",1920/4)},function(o,i,c,f,x,w){i[2].set("x",1920/4)},function(o,i,c,f,x,w){i[3].set("w",1920/4)},function(o,i,c,f,x,w){i[3].set("x",1920/4*2)},function(o,i,c,f,x,w){i[4].set("w",1920/4)},function(o,i,c,f,x,w){i[4].set("x",1920/4*3)}],context:{}}}),dD=Oe.Component("Transitions",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].x=60,a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].w=200,r[1].h=200,r[1].x=50,r[1].y={transition:i.y},r[1].color="0xc4b5fdff",a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].w=200,r[2].h=200,r[2].x=300,r[2].y={transition:{value:i.y}},r[2].color="0xa78bfaff",a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].w=200,r[3].h=200,r[3].x=550,r[3].y={transition:{value:i.y,duration:1e3,start:i.start,end:i.doneTransition3}},r[3].color="0x8b5cf6ff",r[3].ref="bla",a[3].populate(r[3]),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].w=200,r[4].h=200,r[4].x=800,r[4].y={transition:{value:i.y,duration:500,delay:500,start:i.start,end:i.finished}},r[4].color="0x7c3aedff",a[4].populate(r[4]),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].w=200,r[5].h=200,r[5].x=1050,r[5].y={transition:{value:i.y,easing:"ease-in-out",end:i.finished}},r[5].color="0x6d28d9ff",a[5].populate(r[5]),o=a[0],r[6]={},a[6]=this.element({parent:o||"root"},i),r[6].w=200,r[6].h=200,r[6].x=1300,r[6].y={transition:{value:i.y,duration:3e3,easing:"ease-in-out-back",end:i.finished}},r[6].color="0x5b21b6ff",a[6].populate(r[6]),o=a[0],r[7]={},a[7]=this.element({parent:o||"root"},i),r[7].w=200,r[7].h=200,r[7].x=1550,r[7].y={transition:{value:i.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},r[7].color="0x4c1d95ff",a[7].populate(r[7]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("y",{transition:o.y})},function(o,i,c,f,x,w){i[2].set("y",{transition:{value:o.y}})},function(o,i,c,f,x,w){i[3].set("y",{transition:{value:o.y,duration:1e3,start:o.start,end:o.doneTransition3}})},function(o,i,c,f,x,w){i[4].set("y",{transition:{value:o.y,duration:500,delay:500,start:o.start,end:o.finished}})},function(o,i,c,f,x,w){i[5].set("y",{transition:{value:o.y,easing:"ease-in-out",end:o.finished}})},function(o,i,c,f,x,w){i[6].set("y",{transition:{value:o.y,duration:3e3,easing:"ease-in-out-back",end:o.finished}})},function(o,i,c,f,x,w){i[7].set("y",{transition:{value:o.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state(){return{y:50}},hooks:{init(){this.$setInterval(()=>{this.go()},12e3),this.go()}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(h,o,i){this.$log.info("Start transition",h.nodeId,o,i)},finished(h,o,i){this.$log.info("Finished transition",h.nodeId,o,i)},go(){this.y=50,this.$setTimeout(()=>{this.y=830},1e3),this.$setTimeout(()=>{this.y=50,this.$setTimeout(()=>{this.y=200},1e3)},6e3)}}}),hD=Oe.Component("Alpha",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].y=100,a[1].populate(r[1]),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].w=200,r[2].h=200,r[2].x=100,r[2].color="0xffffffff",r[2].alpha=.2,a[2].populate(r[2]),o=a[1],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].w=200,r[3].h=200,r[3].x=320,r[3].color="0xffffffff",r[3].alpha=.4,a[3].populate(r[3]),o=a[1],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].w=200,r[4].h=200,r[4].x=540,r[4].color="0xffffffff",r[4].alpha=.6,a[4].populate(r[4]),o=a[1],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].w=200,r[5].h=200,r[5].x=760,r[5].color="0xffffffff",r[5].alpha=.8,a[5].populate(r[5]),o=a[1],r[6]={},a[6]=this.element({parent:o||"root"},i),r[6].w=200,r[6].h=200,r[6].x=980,r[6].color="0xffffffff",r[6].alpha=1,a[6].populate(r[6]),o=a[0],r[7]={},a[7]=this.element({parent:o||"root"},i),r[7].w=200,r[7].h=200,r[7].x=100,r[7].y=320,r[7].color="0xffffffff",r[7].alpha=i.alpha,a[7].populate(r[7]),o=a[0],r[8]={},a[8]=this.element({parent:o||"root"},i),r[8].w=200,r[8].h=200,r[8].x=100,r[8].y=540,r[8].color="0xffffffff",r[8].alpha=i.alpha,a[8].populate(r[8]),o=a[0],r[9]={},a[9]=this.element({parent:o||"root"},i),r[9].w=200,r[9].h=200,r[9].x=100,r[9].y=760,r[9].color="0xffffffff",r[9].alpha={transition:{value:i.alpha,duration:1e3,easing:"ease-in-out-circ"}},a[9].populate(r[9]),o=a[0],r[10]={},a[10]=this.element({parent:o||"root"},i),r[10].w=428,r[10].h=234,r[10].x=1200,r[10].y=100,r[10].src=i.image,r[10].alpha=1,a[10].populate(r[10]),o=a[0],r[11]={},a[11]=this.element({parent:o||"root"},i),r[11].w=428,r[11].h=234,r[11].x=1300,r[11].y=294,r[11].src=i.image,r[11].alpha=.4,a[11].populate(r[11]),o=a[0],r[12]={},a[12]=this.element({parent:o||"root"},i),r[12].w=428,r[12].h=234,r[12].x=1200,r[12].y=488,r[12].src=i.image,r[12].alpha=.1,a[12].populate(r[12]),o=a[0],r[13]={},a[13]=this.element({parent:o||"root"},i),r[13].x=400,r[13].y=400,r[13].alpha=.2,r[13].content="Text with alpha applied directly",r[13].__textnode=!0,a[13].populate(r[13]),o=a[0],r[14]={},a[14]=this.element({parent:o||"root"},i),r[14].alpha=.5,r[14].x=400,r[14].y=500,a[14].populate(r[14]),o=a[14],r[15]={},a[15]=this.element({parent:o||"root"},i),r[15].content="Text with alpha applied on parent element",r[15].__textnode=!0,a[15].populate(r[15]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[8].set("alpha",o.alpha)},function(o,i,c,f,x,w){i[9].set("alpha",{transition:{value:o.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(o,i,c,f,x,w){i[10].set("src",o.image)},function(o,i,c,f,x,w){i[11].set("y",294)},function(o,i,c,f,x,w){i[11].set("src",o.image)},function(o,i,c,f,x,w){i[12].set("y",488)},function(o,i,c,f,x,w){i[12].set("src",o.image)}],context:{}},state(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready(){this.$setInterval(()=>{const h=this.direction==="up"?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(h,1),.1),this.alpha===1&&(this.direction="down"),this.alpha===.1&&(this.direction="up")},1400)}}}),pD=Oe.Component("Scaling",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].x=100,r[1].y=100,r[1].w=150,r[1].h=150,r[1].color="0x64748bff",a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].x=300,r[2].y=100,r[2].w=100,r[2].h=100,r[2].color="0x64748bff",r[2].scale=1.5,a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].x=100,r[3].y=400,r[3].w=100,r[3].h=100,r[3].color="0xb45309ff",r[3].scale=i.scale,a[3].populate(r[3]),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].x=900,r[4].y=400,r[4].w=100,r[4].h=100,r[4].src=i.balloon,r[4].scale={transition:{value:i.scale,easing:"ease-in-out"}},a[4].populate(r[4]),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].x=300,r[5].y=600,r[5].w=100,r[5].h=100,r[5].color="0x059669ff",r[5].scale=i.scale2,a[5].populate(r[5]),o=a[5],r[6]={},a[6]=this.element({parent:o||"root"},i),r[6].x=10,r[6].y=10,r[6].h=60,r[6].w=80,r[6].color="0x0369a1ff",a[6].populate(r[6]),o=a[0],r[7]={},a[7]=this.element({parent:o||"root"},i),r[7].x=1500,r[7].y=600,r[7].w=100,r[7].h=100,r[7].color="0x059669ff",r[7].scale=i.scale2,a[7].populate(r[7]),o=a[7],r[8]={},a[8]=this.element({parent:o||"root"},i),r[8].x=10,r[8].y=10,r[8].h=60,r[8].w=80,r[8].color="0x0369a1ff",r[8].scale=i.scale2/2,a[8].populate(r[8]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[4].set("src",o.balloon)},function(o,i,c,f,x,w){i[4].set("scale",{transition:{value:o.scale,easing:"ease-in-out"}})},function(o,i,c,f,x,w){i[5].set("scale",o.scale2)},function(o,i,c,f,x,w){i[7].set("scale",o.scale2)},function(o,i,c,f,x,w){i[8].set("scale",o.scale2/2)}],context:{}},state(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.scale+.5:0;this.scale=Math.max(Math.min(i,8),0),this.scale===8&&(this.direction="down"),this.scale===0&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=this.scale2===1?3:1},2e3)}}}),gD=Oe.Component("Rotation",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].y=70,a[1].populate(r[1]),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].x=100,r[2].y=0,r[2].w=200,r[2].h=100,r[2].color="0xfee2e2ff",r[2].rotation=0,a[2].populate(r[2]),o=a[1],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].x=100,r[3].y=150,r[3].w=200,r[3].h=100,r[3].color="0xfecacaff",r[3].rotation=10,a[3].populate(r[3]),o=a[1],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].x=100,r[4].y=300,r[4].w=200,r[4].h=100,r[4].color="0xfca5a5ff",r[4].rotation=20,a[4].populate(r[4]),o=a[1],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].x=100,r[5].y=450,r[5].w=200,r[5].h=100,r[5].color="0xf87171ff",r[5].rotation=30,a[5].populate(r[5]),o=a[1],r[6]={},a[6]=this.element({parent:o||"root"},i),r[6].x=100,r[6].y=610,r[6].w=200,r[6].h=100,r[6].color="0xef4444ff",r[6].rotation=40,a[6].populate(r[6]),o=a[1],r[7]={},a[7]=this.element({parent:o||"root"},i),r[7].x=100,r[7].y=800,r[7].w=200,r[7].h=100,r[7].color="0xdc2626ff",r[7].rotation=50,a[7].populate(r[7]),o=a[0],r[8]={},a[8]=this.element({parent:o||"root"},i),r[8].y=70,r[8].x=300,a[8].populate(r[8]),o=a[8],r[9]={},a[9]=this.element({parent:o||"root"},i),r[9].x=100,r[9].y=0,r[9].w=200,r[9].h=100,r[9].color="0xfee2e2ff",r[9].rotation=60,a[9].populate(r[9]),o=a[8],r[10]={},a[10]=this.element({parent:o||"root"},i),r[10].x=100,r[10].y=150,r[10].w=200,r[10].h=100,r[10].color="0xfecacaff",r[10].rotation=70,a[10].populate(r[10]),o=a[8],r[11]={},a[11]=this.element({parent:o||"root"},i),r[11].x=100,r[11].y=300,r[11].w=200,r[11].h=100,r[11].color="0xfca5a5ff",r[11].rotation=80,a[11].populate(r[11]),o=a[8],r[12]={},a[12]=this.element({parent:o||"root"},i),r[12].x=100,r[12].y=450,r[12].w=200,r[12].h=100,r[12].color="0xf87171ff",r[12].rotation=90,a[12].populate(r[12]),o=a[8],r[13]={},a[13]=this.element({parent:o||"root"},i),r[13].x=100,r[13].y=610,r[13].w=200,r[13].h=100,r[13].color="0xef4444ff",r[13].rotation=100,a[13].populate(r[13]),o=a[8],r[14]={},a[14]=this.element({parent:o||"root"},i),r[14].x=100,r[14].y=800,r[14].w=200,r[14].h=100,r[14].color="0xdc2626ff",r[14].rotation=100,a[14].populate(r[14]),o=a[0],r[15]={},a[15]=this.element({parent:o||"root"},i),r[15].y=70,r[15].x=600,a[15].populate(r[15]),o=a[15],r[16]={},a[16]=this.element({parent:o||"root"},i),r[16].x=100,r[16].y=0,r[16].w=200,r[16].h=100,r[16].color="0xfee2e2ff",r[16].rotation=110,a[16].populate(r[16]),o=a[15],r[17]={},a[17]=this.element({parent:o||"root"},i),r[17].x=100,r[17].y=150,r[17].w=200,r[17].h=100,r[17].color="0xfecacaff",r[17].rotation=120,a[17].populate(r[17]),o=a[15],r[18]={},a[18]=this.element({parent:o||"root"},i),r[18].x=100,r[18].y=300,r[18].w=200,r[18].h=100,r[18].color="0xfca5a5ff",r[18].rotation=130,a[18].populate(r[18]),o=a[15],r[19]={},a[19]=this.element({parent:o||"root"},i),r[19].x=100,r[19].y=450,r[19].w=200,r[19].h=100,r[19].color="0xf87171ff",r[19].rotation=140,a[19].populate(r[19]),o=a[15],r[20]={},a[20]=this.element({parent:o||"root"},i),r[20].x=100,r[20].y=610,r[20].w=200,r[20].h=100,r[20].color="0xef4444ff",r[20].rotation=150,a[20].populate(r[20]),o=a[15],r[21]={},a[21]=this.element({parent:o||"root"},i),r[21].x=100,r[21].y=800,r[21].w=200,r[21].h=100,r[21].color="0xdc2626ff",r[21].rotation=160,a[21].populate(r[21]),o=a[0],r[22]={},a[22]=this.element({parent:o||"root"},i),r[22].y=70,r[22].x=900,a[22].populate(r[22]),o=a[22],r[23]={},a[23]=this.element({parent:o||"root"},i),r[23].x=100,r[23].y=0,r[23].w=200,r[23].h=100,r[23].color="0xfee2e2ff",r[23].rotation=170,a[23].populate(r[23]),o=a[22],r[24]={},a[24]=this.element({parent:o||"root"},i),r[24].x=100,r[24].y=150,r[24].w=200,r[24].h=100,r[24].color="0xfecacaff",r[24].rotation=180,a[24].populate(r[24]),o=a[22],r[25]={},a[25]=this.element({parent:o||"root"},i),r[25].x=100,r[25].y=300,r[25].w=200,r[25].h=100,r[25].color="0xfca5a5ff",r[25].rotation=190,a[25].populate(r[25]),o=a[22],r[26]={},a[26]=this.element({parent:o||"root"},i),r[26].x=100,r[26].y=450,r[26].w=200,r[26].h=100,r[26].color="0xf87171ff",r[26].rotation=200,a[26].populate(r[26]),o=a[22],r[27]={},a[27]=this.element({parent:o||"root"},i),r[27].x=100,r[27].y=610,r[27].w=200,r[27].h=100,r[27].color="0xef4444ff",r[27].rotation=210,a[27].populate(r[27]),o=a[22],r[28]={},a[28]=this.element({parent:o||"root"},i),r[28].x=100,r[28].y=800,r[28].w=200,r[28].h=100,r[28].color="0xdc2626ff",r[28].rotation=220,a[28].populate(r[28]),o=a[0],r[29]={},a[29]=this.element({parent:o||"root"},i),r[29].y=70,r[29].x=1200,a[29].populate(r[29]),o=a[29],r[30]={},a[30]=this.element({parent:o||"root"},i),r[30].x=100,r[30].y=0,r[30].w=200,r[30].h=100,r[30].color="0xfee2e2ff",r[30].rotation=230,a[30].populate(r[30]),o=a[29],r[31]={},a[31]=this.element({parent:o||"root"},i),r[31].x=100,r[31].y=150,r[31].w=200,r[31].h=100,r[31].color="0xfecacaff",r[31].rotation=240,a[31].populate(r[31]),o=a[29],r[32]={},a[32]=this.element({parent:o||"root"},i),r[32].x=100,r[32].y=300,r[32].w=200,r[32].h=100,r[32].color="0xfca5a5ff",r[32].rotation=250,a[32].populate(r[32]),o=a[29],r[33]={},a[33]=this.element({parent:o||"root"},i),r[33].x=100,r[33].y=450,r[33].w=200,r[33].h=100,r[33].color="0xf87171ff",r[33].rotation=260,a[33].populate(r[33]),o=a[29],r[34]={},a[34]=this.element({parent:o||"root"},i),r[34].x=100,r[34].y=610,r[34].w=200,r[34].h=100,r[34].color="0xef4444ff",r[34].rotation=270,a[34].populate(r[34]),o=a[29],r[35]={},a[35]=this.element({parent:o||"root"},i),r[35].x=100,r[35].y=800,r[35].w=200,r[35].h=100,r[35].color="0xdc2626ff",r[35].rotation=280,a[35].populate(r[35]),o=a[0],r[36]={},a[36]=this.element({parent:o||"root"},i),r[36].y=70,r[36].x=1500,a[36].populate(r[36]),o=a[36],r[37]={},a[37]=this.element({parent:o||"root"},i),r[37].x=100,r[37].y=0,r[37].w=200,r[37].h=100,r[37].color="0xfee2e2ff",r[37].rotation=290,a[37].populate(r[37]),o=a[36],r[38]={},a[38]=this.element({parent:o||"root"},i),r[38].x=100,r[38].y=150,r[38].w=200,r[38].h=100,r[38].color="0xfecacaff",r[38].rotation=300,a[38].populate(r[38]),o=a[36],r[39]={},a[39]=this.element({parent:o||"root"},i),r[39].x=100,r[39].y=300,r[39].w=200,r[39].h=100,r[39].color="0xfca5a5ff",r[39].rotation=310,a[39].populate(r[39]),o=a[36],r[40]={},a[40]=this.element({parent:o||"root"},i),r[40].x=100,r[40].y=450,r[40].w=200,r[40].h=100,r[40].color="0xf87171ff",r[40].rotation=320,a[40].populate(r[40]),o=a[36],r[41]={},a[41]=this.element({parent:o||"root"},i),r[41].x=100,r[41].y=610,r[41].w=200,r[41].h=100,r[41].color="0xef4444ff",r[41].rotation=330,a[41].populate(r[41]),o=a[36],r[42]={},a[42]=this.element({parent:o||"root"},i),r[42].x=100,r[42].y=800,r[42].w=200,r[42].h=100,r[42].color="0xdc2626ff",r[42].rotation=340,a[42].populate(r[42]),o=a[0],r[43]={},a[43]=this.element({parent:o||"root"},i),r[43].x=200,r[43].y=200,r[43].w=400,r[43].h=400,r[43].color="0x0891b2ff",r[43].rotation=i.rotation1,a[43].populate(r[43]),o=a[0],r[44]={},a[44]=this.element({parent:o||"root"},i),r[44].x=800,r[44].y=200,r[44].w=400,r[44].h=400,r[44].color="0x0891b2ff",r[44].rotation=i.rotation2,a[44].populate(r[44]),o=a[0],r[45]={},a[45]=this.element({parent:o||"root"},i),r[45].x=1400,r[45].y=200,r[45].w=400,r[45].h=400,r[45].color="0x0891b2ff",r[45].rotation={transition:i.rotation3},a[45].populate(r[45]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[44].set("rotation",o.rotation2)},function(o,i,c,f,x,w){i[45].set("rotation",{transition:o.rotation3})}],context:{}},state(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready(){let h=800,o=2e3;this.$setInterval(()=>{const i=this.rotation2+10;this.rotation2=i<=360?i:0},h),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,this.rotation3*2)),this.rotation3===720&&(this.rotation3=0)},o)}}}),mD=Oe.Component("KeyInput",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].x=525,r[0].y=130,a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].w=200,r[1].h=200,r[1].color=i.focusColor,r[1].x=i.focusedX*220,r[1].y=i.focusedY*210,a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].w=180,r[2].h=180,r[2].x=10,r[2].y=10,r[2].color=i.blockColor,a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].w=180,r[3].h=180,r[3].x=230,r[3].y=10,r[3].color=i.blockColor,a[3].populate(r[3]),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].w=180,r[4].h=180,r[4].x=450,r[4].y=10,r[4].color=i.blockColor,a[4].populate(r[4]),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].w=180,r[5].h=180,r[5].x=670,r[5].y=10,r[5].color=i.blockColor,a[5].populate(r[5]),o=a[0],r[6]={},a[6]=this.element({parent:o||"root"},i),r[6].w=180,r[6].h=180,r[6].x=10,r[6].y=220,r[6].color=i.blockColor,a[6].populate(r[6]),o=a[0],r[7]={},a[7]=this.element({parent:o||"root"},i),r[7].w=180,r[7].h=180,r[7].x=230,r[7].y=220,r[7].color=i.blockColor,a[7].populate(r[7]),o=a[0],r[8]={},a[8]=this.element({parent:o||"root"},i),r[8].w=180,r[8].h=180,r[8].x=450,r[8].y=220,r[8].color=i.blockColor,a[8].populate(r[8]),o=a[0],r[9]={},a[9]=this.element({parent:o||"root"},i),r[9].w=180,r[9].h=180,r[9].x=670,r[9].y=220,r[9].color=i.blockColor,a[9].populate(r[9]),o=a[0],r[10]={},a[10]=this.element({parent:o||"root"},i),r[10].w=180,r[10].h=180,r[10].x=10,r[10].y=430,r[10].color=i.blockColor,a[10].populate(r[10]),o=a[0],r[11]={},a[11]=this.element({parent:o||"root"},i),r[11].w=180,r[11].h=180,r[11].x=230,r[11].y=430,r[11].color=i.blockColor,a[11].populate(r[11]),o=a[0],r[12]={},a[12]=this.element({parent:o||"root"},i),r[12].w=180,r[12].h=180,r[12].x=450,r[12].y=430,r[12].color=i.blockColor,a[12].populate(r[12]),o=a[0],r[13]={},a[13]=this.element({parent:o||"root"},i),r[13].w=180,r[13].h=180,r[13].x=670,r[13].y=430,r[13].color=i.blockColor,a[13].populate(r[13]),o=a[0],r[14]={},a[14]=this.element({parent:o||"root"},i),r[14].w=180,r[14].h=180,r[14].x=10,r[14].y=640,r[14].color=i.blockColor,a[14].populate(r[14]),o=a[0],r[15]={},a[15]=this.element({parent:o||"root"},i),r[15].w=180,r[15].h=180,r[15].x=230,r[15].y=640,r[15].color=i.blockColor,a[15].populate(r[15]),o=a[0],r[16]={},a[16]=this.element({parent:o||"root"},i),r[16].w=180,r[16].h=180,r[16].x=450,r[16].y=640,r[16].color=i.blockColor,a[16].populate(r[16]),o=a[0],r[17]={},a[17]=this.element({parent:o||"root"},i),r[17].w=180,r[17].h=180,r[17].x=670,r[17].y=640,r[17].color=i.blockColor,a[17].populate(r[17]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("color",o.focusColor)},function(o,i,c,f,x,w){i[1].set("x",o.focusedX*220)},function(o,i,c,f,x,w){i[1].set("y",o.focusedY*210)},function(o,i,c,f,x,w){i[2].set("color",o.blockColor)},function(o,i,c,f,x,w){i[3].set("color",o.blockColor)},function(o,i,c,f,x,w){i[4].set("color",o.blockColor)},function(o,i,c,f,x,w){i[5].set("color",o.blockColor)},function(o,i,c,f,x,w){i[6].set("color",o.blockColor)},function(o,i,c,f,x,w){i[7].set("color",o.blockColor)},function(o,i,c,f,x,w){i[8].set("color",o.blockColor)},function(o,i,c,f,x,w){i[9].set("color",o.blockColor)},function(o,i,c,f,x,w){i[10].set("color",o.blockColor)},function(o,i,c,f,x,w){i[11].set("color",o.blockColor)},function(o,i,c,f,x,w){i[12].set("color",o.blockColor)},function(o,i,c,f,x,w){i[13].set("color",o.blockColor)},function(o,i,c,f,x,w){i[14].set("color",o.blockColor)},function(o,i,c,f,x,w){i[15].set("color",o.blockColor)},function(o,i,c,f,x,w){i[16].set("color",o.blockColor)},function(o,i,c,f,x,w){i[17].set("color",o.blockColor)}],context:{}},state(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor(){return this.colorscheme,this.colorscheme==="yellow"?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme,this.colorscheme==="yellow"?"#facc15":"#38bdf8"}},input:{left(){const h=this.focusedX-1;this.focusedX=Math.max(h,0)},right(){const h=this.focusedX+1;this.focusedX=Math.min(h,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme=this.colorscheme==="yellow"?"blue":"yellow"},any(h){const o=parseInt(h.key);isNaN(o)?this.parent.$focus(h):(this.focusedX=Math.max(0,(o-1)%4),this.focusedY=Math.max(0,Math.ceil(o/4)-1))}}}),Hm=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],Gm=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],yD=Oe.Component("Texts",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].x=100,r[0].y=100,a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].content="Default text",r[1]["@loaded"]=i.textLoaded&&i.textLoaded.bind(i),r[1].__textnode=!0,a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].content="123456",r[2].x=400,r[2].__textnode=!0,a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].content="Text with a different fontsize",r[3].size=i.size,r[3].y=120,r[3].font="raleway",r[3].__textnode=!0,a[3].populate(r[3]),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].content="Text with a different color",r[4].size=50,r[4].color=i.color,r[4].y=250,r[4].__textnode=!0,a[4].populate(r[4]),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].content="Letterspacing",r[5].size=50,r[5].color="0x38bdf8ff",r[5].y=450,r[5].letterspacing=40,r[5].__textnode=!0,a[5].populate(r[5]),o=a[0],r[6]={},a[6]=this.element({parent:o||"root"},i),r[6].w=800,r[6].h=100,r[6].y=550,r[6].color="0x94a3b8ff",a[6].populate(r[6]),o=a[6],r[7]={},a[7]=this.element({parent:o||"root"},i),r[7].content="Text align center",r[7].size=50,r[7].y=15,r[7].color="0xbae6fdff",r[7].align="center",r[7].maxwidth=800,r[7].__textnode=!0,a[7].populate(r[7]),o=a[0],r[8]={},a[8]=this.element({parent:o||"root"},i),r[8].w=800,r[8].h=200,r[8].x=900,r[8].y=550,r[8].color="0x94a3b8ff",a[8].populate(r[8]),o=a[8],r[9]={},a[9]=this.element({parent:o||"root"},i),r[9].content=i.longText,r[9].size=40,r[9].color="0xbae6fdff",r[9].maxwidth=800,r[9].maxlines=5,r[9].textoverflow="!!!",r[9].__textnode=!0,a[9].populate(r[9]),o=a[0],r[10]={},a[10]=this.element({parent:o||"root"},i),r[10].w=800,r[10].h=120,r[10].x=900,r[10].y=800,r[10].color="0x94a3b8ff",a[10].populate(r[10]),o=a[10],r[11]={},a[11]=this.element({parent:o||"root"},i),r[11].content=i.longText,r[11].size=40,r[11].color="0xbae6fdff",r[11].maxwidth=800,r[11].maxlines=2,r[11].lineheight=60,r[11].textoverflow=!1,r[11].__textnode=!0,a[11].populate(r[11]),o=a[0],r[12]={},a[12]=this.element({parent:o||"root"},i),r[12].content=i.character,r[12].size=50,r[12].color=i.color,r[12].y=750,r[12].font="opensans",r[12].__textnode=!0,a[12].populate(r[12]),o=a[0],r[13]={},a[13]=this.element({parent:o||"root"},i),r[13].x=1200,r[13].y=300,a[13].populate(r[13]),o=a[13],r[14]={},a[14]=this.element({parent:o||"root"},i),r[14].rotation={transition:i.rotation},r[14].pivot=0,r[14].content="Hello",r[14].__textnode=!0,a[14].populate(r[14]),o=a[13],r[15]={},a[15]=this.element({parent:o||"root"},i),r[15].x=150,r[15].rotation={transition:i.rotation},r[15].pivot=.5,r[15].content="World",r[15].__textnode=!0,a[15].populate(r[15]),o=a[13],r[16]={},a[16]=this.element({parent:o||"root"},i),r[16].x=300,r[16].rotation={transition:i.rotation},r[16].pivot=1,r[16].content="!!",r[16].__textnode=!0,a[16].populate(r[16]),o=a[0],r[17]={},a[17]=this.element({parent:o||"root"},i),r[17].x=500,r[17].y=700,a[17].populate(r[17]),o=a[17],R[18]=[];let k,I;C[18]=(E=[],A,N)=>{const K=w(E),Se=new Set;let Me=K.length;const ue={};for(k=ue.from||0,I=("to"in ue)?ue.to:K.length;Me--;)K[Me],Me<I&&Me>=k&&Se.add(""+Me);let he=N.length;for(;he--;)if(Se.has(N[he])===!1){const D=N[he];A[18][D]&&A[18][D].destroy(),A[18][D]=null,delete A[18][D]}N.length=0;const oe=K.length,pe=[];for(let D=0;D<oe;D++){if(D<k||D>=I)continue;const ne=Object.create(i);o=A[17],ne.text=K[D],ne.index=D,ne.key=""+D,N.push(ne.key),o=A[17],A[18]===void 0&&(A[18]={}),r[18]={},A[18][ne.key]===void 0&&(A[18][ne.key]=this.element({parent:o||"root"},i)),r[18].content=ne.text,r[18].y=ne.index*50,r[18].__textnode=!0,A[18][ne.key].nodeId===void 0&&A[18][ne.key].populate(r[18]);let le=()=>{A[18][ne.key].set("y",ne.index*50)};x(le,null),pe.push(le),i[Symbol.for("effects")].push(le)}return pe};let m=()=>{C[18](i.texts,a,R[18])};i[Symbol.for("effects")].push(m),x(m,["texts"]);let S=()=>{i.text;for(let E=0;E<i.texts.length;E++){if(E<k||E>=I)continue;const A={};A.index=E,A.text=i.texts[E],A.key=E,a[18][A.key].set("content",A.text)}};return i[Symbol.for("effects")].push(S),x(S),{elms:a,cleanup:()=>{i=null,o=null,R[18].length=0,C[18]=null,m=null,S=null,a.length=0,f.length=0,r.length=0,C.length=0}}},effects:[function(o,i,c,f,x,w){i[3].set("size",o.size)},function(o,i,c,f,x,w){i[4].set("color",o.color)},function(o,i,c,f,x,w){i[12].set("content",o.character)},function(o,i,c,f,x,w){i[12].set("color",o.color)},function(o,i,c,f,x,w){i[14].set("rotation",{transition:o.rotation})},function(o,i,c,f,x,w){i[15].set("rotation",{transition:o.rotation})},function(o,i,c,f,x,w){i[16].set("rotation",{transition:o.rotation})}],context:{}},state(){return{color:Hm[0],size:10,character:Gm[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0,texts:["Hello","World","Lightning 3","Blits"]}},hooks:{ready(){let h=0;this.$setInterval(()=>{h++,h>Hm.length-1&&(h=0),this.color=Hm[h],this.size=10*(h*2+1),this.rotation+=30},1e3);let o=0;this.$setInterval(()=>{o++,o>Gm.length-1&&(o=0),this.character=Gm[o]},1400)}},methods:{textLoaded(h){this.$log.info(`Text loaded with w: ${h.w} and h: ${h.h}`)}}}),eh=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],vD=Oe.Component("Images",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].src="assets/lightningbolt.png",r[1].w=428,r[1].h=234,r[1].x=100,r[1].y=100,a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",r[2].w=428,r[2].h=234,r[2].x=100,r[2].y=400,a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].src=i.image,r[3].x=100,r[3].y=700,r[3]["@loaded"]=i.imageLoaded&&i.imageLoaded.bind(i),a[3].populate(r[3]),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].color="{top: '0xff0000ff', bottom: '0xffd700ff'}",r[4].src="assets/lightningbolt.png",r[4].w=428,r[4].h=234,r[4].x=600,r[4].y=100,a[4].populate(r[4]),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].x=600,r[5].y=400,r[5].w=428,r[5].h=234,r[5].clipping=i.clipping,a[5].populate(r[5]),o=a[5],r[6]={},a[6]=this.element({parent:o||"root"},i),r[6].src="assets/lightningbolt.png",r[6].w=856,r[6].h=468,a[6].populate(r[6]),o=a[0],r[7]={},a[7]=this.element({parent:o||"root"},i),r[7].color=i.color,r[7].src="assets/lightningbolt.png",r[7].w=428,r[7].h=234,r[7].x=1100,r[7].y=100,a[7].populate(r[7]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[3].set("src",o.image)},function(o,i,c,f,x,w){i[5].set("clipping",o.clipping)},function(o,i,c,f,x,w){i[7].set("color",o.color)}],context:{}},state(){return{image:eh[0],clipping:!0,color:"red"}},hooks:{ready(){this.$setInterval(()=>{this.image=this.image===eh[0]?eh[1]:eh[0],this.clipping=!this.clipping,this.color=this.color==="red"?"blue":"red"},2e3)}},methods:{imageLoaded(h){console.log("backstopjs:ready"),this.$log.info(`Image loaded with w: ${h.w} and h: ${h.h}`)}}}),Ju=Oe.Component("Square",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w={transition:i.size},r[0].h={transition:i.size},r[0].color={transition:i.color},a[0].populate(r[0]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("w",{transition:o.size})},function(o,i,c,f,x,w){i[0].set("h",{transition:o.size})},function(o,i,c,f,x,w){i[0].set("color",{transition:o.color})}],context:{}},props:[{key:"size",default:80}],state(){return{color:"#86198f"}},watch:{size(h,o){this.$log.info(`Size changed from ${o} to ${h}`),this.color=this.color==="#86198f"?"#9d174d":"#86198f"}}}),g4=Oe.Component("Card",{components:{Square:Ju},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m=!1,S=0,E=[];if(r[0]={},a[0]=this.element({parent:o||"root"},m===!0?I:i),r[0].w=i.w,r[0].h=i.h,r[0].color="0x0891b2ff",a[0].populate(r[0]),m===!0&&(S-=1),E[1]=c.components&&c.components.Square||f.Square,o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},m===!0?I:i),r[1].x=80,r[1].y=80,R[1]=[],typeof E[1]<"u")for(let A in E[1][Symbol.for("config")].props)delete r[1][E[1][Symbol.for("config")].props[A]],R[1].push(E[1][Symbol.for("config")].props[A]);if(a[1].populate(r[1]),m===!0&&(S-=1),o=a[1],C[2]={},C[2].x=80,C[2].y=80,k=C[2].is||"Square",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);if(a[2]=f[2].call(null,{props:C[2]},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],I=a[2],m=!0):o=a[2][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),E[3]=c.components&&c.components.Square||f.Square,o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},m===!0?I:i),r[3].x=20,r[3].y=20,r[3].size=40,R[3]=[],typeof E[3]<"u")for(let A in E[3][Symbol.for("config")].props)delete r[3][E[3][Symbol.for("config")].props[A]],R[3].push(E[3][Symbol.for("config")].props[A]);if(a[3].populate(r[3]),m===!0&&(S-=1),o=a[3],C[4]={},C[4].x=20,C[4].y=20,C[4].size=40,k=C[4].is||"Square",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);return a[4]=f[4].call(null,{props:C[4]},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],I=a[4],m=!0):o=a[4][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),{elms:a,cleanup:()=>{I=null,i=null,o=null,E[1]=null,C[2]=null,f[2]=null,E[3]=null,C[4]=null,f[4]=null,E.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[],context:{}},props:["size"],computed:{w(){return this.size,this.size==="large"?400:200},h(){return this.size,this.size==="large"?500:300}}}),xD=Oe.Component("Components",{components:{Square:Ju,Card:g4},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E,A=!1,N=0,K=[];if(r[0]={},a[0]=this.element({parent:o||"root"},A===!0?E:i),a[0].populate(r[0]),A===!0&&(N-=1),K[1]=c.components&&c.components.Square||f.Square,o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},A===!0?E:i),r[1].x=100,r[1].y=100,r[1].size=50,I[1]=[],typeof K[1]<"u")for(let he in K[1][Symbol.for("config")].props)delete r[1][K[1][Symbol.for("config")].props[he]],I[1].push(K[1][Symbol.for("config")].props[he]);if(a[1].populate(r[1]),A===!0&&(N-=1),o=a[1],R[2]={},R[2].x=100,R[2].y=100,R[2].size=50,m=R[2].is||"Square",f[2],typeof m=="string"){if(f[2]=c.components&&c.components[m]||f[m],!f[2])throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[2]=m);if(a[2]=f[2].call(null,{props:R[2]},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],E=a[2],A=!0):o=a[2][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[3]=c.components&&c.components.Square||f.Square,o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},A===!0?E:i),r[3].x=100,r[3].y=200,r[3].size=100,I[3]=[],typeof K[3]<"u")for(let he in K[3][Symbol.for("config")].props)delete r[3][K[3][Symbol.for("config")].props[he]],I[3].push(K[3][Symbol.for("config")].props[he]);if(a[3].populate(r[3]),A===!0&&(N-=1),o=a[3],R[4]={},R[4].x=100,R[4].y=200,R[4].size=100,m=R[4].is||"Square",f[4],typeof m=="string"){if(f[4]=c.components&&c.components[m]||f[m],!f[4])throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[4]=m);if(a[4]=f[4].call(null,{props:R[4]},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],E=a[4],A=!0):o=a[4][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[5]=c.components&&c.components.Square||f.Square,o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},A===!0?E:i),r[5].x=100,r[5].y=350,r[5].size=200,I[5]=[],typeof K[5]<"u")for(let he in K[5][Symbol.for("config")].props)delete r[5][K[5][Symbol.for("config")].props[he]],I[5].push(K[5][Symbol.for("config")].props[he]);if(a[5].populate(r[5]),A===!0&&(N-=1),o=a[5],R[6]={},R[6].x=100,R[6].y=350,R[6].size=200,m=R[6].is||"Square",f[6],typeof m=="string"){if(f[6]=c.components&&c.components[m]||f[m],!f[6])throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[6]=m);if(a[6]=f[6].call(null,{props:R[6]},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],E=a[6],A=!0):o=a[6][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[7]=c.components&&c.components.Square||f.Square,o=a[0],r[7]={},a[7]=this.element({parent:o||"root"},A===!0?E:i),r[7].x={transition:i.x},r[7].y=600,r[7].size=50,I[7]=[],typeof K[7]<"u")for(let he in K[7][Symbol.for("config")].props)delete r[7][K[7][Symbol.for("config")].props[he]],I[7].push(K[7][Symbol.for("config")].props[he]);if(a[7].populate(r[7]),A===!0&&(N-=1),o=a[7],R[8]={},S={transition:i.x},Array.isArray(S)===!0&&(S=w(S).slice(0)),R[8].x=S,R[8].y=600,R[8].size=50,m=R[8].is||"Square",f[8],typeof m=="string"){if(f[8]=c.components&&c.components[m]||f[m],!f[8])throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[8]=m);if(a[8]=f[8].call(null,{props:R[8]},a[7],i),a[8][Symbol.for("slots")][0]?(o=a[8][Symbol.for("slots")][0],E=a[8],A=!0):o=a[8][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[9]=c.components&&c.components.Card||f.Card,o=a[0],r[9]={},a[9]=this.element({parent:o||"root"},A===!0?E:i),r[9].x=500,r[9].y=100,I[9]=[],typeof K[9]<"u")for(let he in K[9][Symbol.for("config")].props)delete r[9][K[9][Symbol.for("config")].props[he]],I[9].push(K[9][Symbol.for("config")].props[he]);if(a[9].populate(r[9]),A===!0&&(N-=1),o=a[9],R[10]={},R[10].x=500,R[10].y=100,m=R[10].is||"Card",f[10],typeof m=="string"){if(f[10]=c.components&&c.components[m]||f[m],!f[10])throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[10]=m);if(a[10]=f[10].call(null,{props:R[10]},a[9],i),a[10][Symbol.for("slots")][0]?(o=a[10][Symbol.for("slots")][0],E=a[10],A=!0):o=a[10][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[11]=c.components&&c.components.Card||f.Card,o=a[0],r[11]={},a[11]=this.element({parent:o||"root"},A===!0?E:i),r[11].x=500,r[11].y=500,r[11].size="large",I[11]=[],typeof K[11]<"u")for(let he in K[11][Symbol.for("config")].props)delete r[11][K[11][Symbol.for("config")].props[he]],I[11].push(K[11][Symbol.for("config")].props[he]);if(a[11].populate(r[11]),A===!0&&(N-=1),o=a[11],R[12]={},R[12].x=500,R[12].y=500,R[12].size="large",m=R[12].is||"Card",f[12],typeof m=="string"){if(f[12]=c.components&&c.components[m]||f[m],!f[12])throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[12]=m);if(a[12]=f[12].call(null,{props:R[12]},a[11],i),a[12][Symbol.for("slots")][0]?(o=a[12][Symbol.for("slots")][0],E=a[12],A=!0):o=a[12][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),o=a[0],r[13]={},a[13]=this.element({parent:o||"root"},A===!0?E:i),r[13].x=1e3,r[13].y=100,a[13].populate(r[13]),A===!0&&(N-=1),o=a[13],r[14]={},a[14]=this.element({parent:o||"root"},A===!0?E:i),r[14].content="Dynamic components",r[14].__textnode=!0,a[14].populate(r[14]),A===!0&&(N-=1),K[15]=c.components&&c.components.Component||f.Component,o=a[13],r[15]={},a[15]=this.element({parent:o||"root"},A===!0?E:i),r[15].is=i.dynamicComponent,r[15].y=100,r[15].color="0x0000ffff",I[15]=[],typeof K[15]<"u")for(let he in K[15][Symbol.for("config")].props)delete r[15][K[15][Symbol.for("config")].props[he]],I[15].push(K[15][Symbol.for("config")].props[he]);if(a[15].populate(r[15]),A===!0&&(N-=1),o=a[15],R[16]={},R[16].is=i.dynamicComponent,R[16].y=100,R[16].color="0x0000ffff",m=R[16].is||"Component",f[16],typeof m=="string"){if(f[16]=c.components&&c.components[m]||f[m],!f[16])throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[16]=m);a[16]=f[16].call(null,{props:R[16]},a[15],i),a[16][Symbol.for("slots")][0]?(o=a[16][Symbol.for("slots")][0],E=a[16],A=!0):o=a[16][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),o=a[13],k[17]=[];let Se,Me;C[17]=(he=[],oe,pe)=>{const D=w(he),ne=new Set;let le=D.length;const me={};for(Se=me.from||0,Me=("to"in me)?me.to:D.length;le--;)D[le],le<Me&&le>=Se&&ne.add(""+le);let V=pe.length;for(;V--;)if(ne.has(pe[V])===!1){const z=pe[V];oe[17][z]&&oe[17][z].destroy(),oe[17][z]=null,delete oe[17][z],oe[18][z]&&oe[18][z].destroy(),oe[18][z]=null,delete oe[18][z]}pe.length=0;const re=D.length,H=[];for(let z=0;z<re;z++){if(z<Se||z>=Me)continue;const se=Object.create(i);if(o=oe[13],se.bla=D[z],se.index=z,se.key=""+z,pe.push(se.key),K[17]=c.components&&c.components.Component||f.Component,oe[17]===void 0&&(oe[17]={}),r[17]={},oe[17][se.key]===void 0&&(oe[17][se.key]=this.element({parent:o||"root"},A===!0?E:i)),r[17].is=se.bla,r[17].x=205*se.index,r[17].y=300,I[17]=[],typeof K[17]<"u")for(let Fe in K[17][Symbol.for("config")].props)delete r[17][K[17][Symbol.for("config")].props[Fe]],I[17].push(K[17][Symbol.for("config")].props[Fe]);if(oe[17][se.key].nodeId===void 0&&(oe[17][se.key].populate(r[17]),A===!0&&(N-=1)),oe[18]===void 0&&(oe[18]={}),o=oe[17][se.key],R[18]={},oe[18][se.key]===void 0){if(R[18].is=se.bla,S=205*se.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[18].x=S,R[18].y=300,m=R[18].is||"Component",f[18],typeof m=="string"){if(f[18]=c.components&&c.components[m]||f[m],!f[18])throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[18]=m);oe[18][se.key]=f[18].call(null,{props:R[18]},oe[17][se.key],i),oe[18][se.key][Symbol.for("slots")][0]?(o=oe[18][se.key][Symbol.for("slots")][0],E=oe[18][se.key],A=!0):o=oe[18][se.key][Symbol.for("children")][0]}let we=()=>{(typeof I>"u"||typeof I[17]>"u"||I[17].indexOf("x")===-1)&&oe[17][se.key].set("x",205*se.index)};x(we,null),H.push(we),i[Symbol.for("effects")].push(we),oe[18][se.key][Symbol.for("props")].x=205*se.index}return H};let ue=()=>{C[17](i.dynamicComponents,a,k[17])};return i[Symbol.for("effects")].push(ue),x(ue,["dynamicComponents"]),{elms:a,cleanup:()=>{S=null,E=null,i=null,o=null,K[1]=null,R[2]=null,f[2]=null,K[3]=null,R[4]=null,f[4]=null,K[5]=null,R[6]=null,f[6]=null,K[7]=null,R[8]=null,f[8]=null,K[9]=null,R[10]=null,f[10]=null,K[11]=null,R[12]=null,f[12]=null,K[15]=null,R[16]=null,f[16]=null,k[17].length=0,C[17]=null,K[17]=null,R[18]=null,f[18]=null,ue=null,K.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[7]>"u"||skips[7].indexOf("x")===-1)&&i[7].set("x",{transition:o.x})},function(o,i,c,f,x,w){i[8][Symbol.for("props")].x={transition:o.x}}],context:{}},state(){return{x:100,dynamicComponent:bh,dynamicComponents:["Square","Card","Square",bh],toggle:!1,size:50}},hooks:{ready(){this.$setInterval(()=>{this.x=this.x===100?250:100,this.size=this.size===50?200:50},2e3)}}}),ki=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],wD=Oe.Component("ForLoop",{components:{Square:Ju},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E,A=!1,N=[];r[0]={},a[0]=this.element({parent:o||"root"},A===!0?E:i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},A===!0?E:i),r[1].y=20,a[1].populate(r[1]),o=a[1],k[2]=[];let K,Se;C[2]=(Ue=[],ee,Ee)=>{const tt=w(Ue),jt=new Set;let it=tt.length;const xt={};for(K=xt.from||0,Se=("to"in xt)?xt.to:tt.length;it--;)tt[it],it<Se&&it>=K&&jt.add(""+it);let je=Ee.length;for(;je--;)if(jt.has(Ee[je])===!1){const xe=Ee[je];ee[2][xe]&&ee[2][xe].destroy(),ee[2][xe]=null,delete ee[2][xe]}Ee.length=0;const Be=tt.length,St=[];for(let xe=0;xe<Be;xe++){if(xe<K||xe>=Se)continue;const ce=Object.create(i);o=ee[1],ce.item=tt[xe],ce.undefined=xe,ce.key=""+xe,Ee.push(ce.key),o=ee[1],ee[2]===void 0&&(ee[2]={}),r[2]={},ee[2][ce.key]===void 0&&(ee[2][ce.key]=this.element({parent:o||"root"},A===!0?E:i)),r[2].w=80,r[2].h=80,r[2].x=ce.item,r[2].color="0x4d7c0fff",ee[2][ce.key].nodeId===void 0&&ee[2][ce.key].populate(r[2])}return St};let Me=()=>{C[2](i.collection1,a,k[2])};i[Symbol.for("effects")].push(Me),x(Me,["collection1"]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},A===!0?E:i),r[3].y=120,a[3].populate(r[3]),o=a[3],k[4]=[];let ue,he;C[4]=(Ue=[],ee,Ee)=>{const tt=w(Ue),jt=new Set;let it=tt.length;const xt={};for(ue=xt.from||0,he=("to"in xt)?xt.to:tt.length;it--;){const xe=tt[it];it<he&&it>=ue&&jt.add(""+xe.id)}let je=Ee.length;for(;je--;)if(jt.has(Ee[je])===!1){const xe=Ee[je];ee[4][xe]&&ee[4][xe].destroy(),ee[4][xe]=null,delete ee[4][xe]}Ee.length=0;const Be=tt.length,St=[];for(let xe=0;xe<Be;xe++){if(xe<ue||xe>=he)continue;const ce=Object.create(i);o=ee[3],ce.item=tt[xe],ce.index=xe,ce.key=""+ce.item.id,Ee.push(ce.key),o=ee[3],ee[4]===void 0&&(ee[4]={}),r[4]={},ee[4][ce.key]===void 0&&(ee[4][ce.key]=this.element({parent:o||"root"},A===!0?E:i)),r[4].w=80,r[4].h=80,r[4].x=ce.item.x*ce.index,r[4].color=ce.item.color,ee[4][ce.key].nodeId===void 0&&ee[4][ce.key].populate(r[4]);let Rt=()=>{ee[4][ce.key].set("x",ce.item.x*ce.index)};x(Rt,null),St.push(Rt),i[Symbol.for("effects")].push(Rt)}return St};let oe=()=>{C[4](i.collection2,a,k[4])};i[Symbol.for("effects")].push(oe),x(oe,["collection2"]),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},A===!0?E:i),r[5].y=220,a[5].populate(r[5]),o=a[5],k[6]=[];let pe,D;C[6]=(Ue=[],ee,Ee)=>{const tt=w(Ue),jt=new Set;let it=tt.length;const xt={};for(pe=xt.from||0,D=("to"in xt)?xt.to:tt.length;it--;)tt[it],it<D&&it>=pe&&jt.add(""+it);let je=Ee.length;for(;je--;)if(jt.has(Ee[je])===!1){const xe=Ee[je];ee[6][xe]&&ee[6][xe].destroy(),ee[6][xe]=null,delete ee[6][xe]}Ee.length=0;const Be=tt.length,St=[];for(let xe=0;xe<Be;xe++){if(xe<pe||xe>=D)continue;const ce=Object.create(i);o=ee[5],ce.item=tt[xe],ce.undefined=xe,ce.key=""+xe,Ee.push(ce.key),o=ee[5],ee[6]===void 0&&(ee[6]={}),r[6]={},ee[6][ce.key]===void 0&&(ee[6][ce.key]=this.element({parent:o||"root"},A===!0?E:i)),r[6].w=80,r[6].h=80,r[6].x=ce.item.x,r[6].color=ce.item.color,ee[6][ce.key].nodeId===void 0&&ee[6][ce.key].populate(r[6]);let Rt=()=>{ee[6][ce.key].set("x",ce.item.x)};x(Rt,null),St.push(Rt),i[Symbol.for("effects")].push(Rt)}return St};let ne=()=>{C[6](i.collection3,a,k[6])};i[Symbol.for("effects")].push(ne),x(ne,["collection3"]),o=a[0],r[7]={},a[7]=this.element({parent:o||"root"},A===!0?E:i),r[7].y=320,a[7].populate(r[7]),o=a[7],k[8]=[];let le,me;C[8]=(Ue=[],ee,Ee)=>{const tt=w(Ue),jt=new Set;let it=tt.length;const xt={};for(le=xt.from||0,me=("to"in xt)?xt.to:tt.length;it--;)tt[it],it<me&&it>=le&&jt.add(""+it);let je=Ee.length;for(;je--;)if(jt.has(Ee[je])===!1){const xe=Ee[je];ee[8][xe]&&ee[8][xe].destroy(),ee[8][xe]=null,delete ee[8][xe],ee[9][xe]&&ee[9][xe].destroy(),ee[9][xe]=null,delete ee[9][xe]}Ee.length=0;const Be=tt.length,St=[];for(let xe=0;xe<Be;xe++){if(xe<le||xe>=me)continue;const ce=Object.create(i);if(o=ee[7],ce.item=tt[xe],ce.index=xe,ce.key=""+xe,Ee.push(ce.key),N[8]=c.components&&c.components.Square||f.Square,ee[8]===void 0&&(ee[8]={}),r[8]={},ee[8][ce.key]===void 0&&(ee[8][ce.key]=this.element({parent:o||"root"},A===!0?E:i)),r[8].x=ce.item.x*ce.index,r[8].ref="square"+ce.index,r[8].alpha=ce.alpha,I[8]=[],typeof N[8]<"u")for(let Zl in N[8][Symbol.for("config")].props)delete r[8][N[8][Symbol.for("config")].props[Zl]],I[8].push(N[8][Symbol.for("config")].props[Zl]);if(ee[8][ce.key].nodeId===void 0&&ee[8][ce.key].populate(r[8]),ee[9]===void 0&&(ee[9]={}),o=ee[8][ce.key],R[9]={},ee[9][ce.key]===void 0){if(S=ce.item.x*ce.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[9].x=S,S="square"+ce.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[9].ref=S,S=ce.alpha,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[9].alpha=S,m=R[9].is||"Square",f[9],typeof m=="string"){if(f[9]=c.components&&c.components[m]||f[m],!f[9])throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[9]=m);ee[9][ce.key]=f[9].call(null,{props:R[9]},ee[8][ce.key],i),ee[9][ce.key][Symbol.for("slots")][0]?(o=ee[9][ce.key][Symbol.for("slots")][0],E=ee[9][ce.key],A=!0):o=ee[9][ce.key][Symbol.for("children")][0]}let Rt=()=>{(typeof I>"u"||typeof I[8]>"u"||I[8].indexOf("x")===-1)&&ee[8][ce.key].set("x",ce.item.x*ce.index)};x(Rt,null),St.push(Rt),i[Symbol.for("effects")].push(Rt);let st=()=>{(typeof I>"u"||typeof I[8]>"u"||I[8].indexOf("ref")===-1)&&ee[8][ce.key].set("ref","square"+ce.index)};x(st,null),St.push(st),i[Symbol.for("effects")].push(st),ee[9][ce.key][Symbol.for("props")].x=ce.item.x*ce.index,ee[9][ce.key][Symbol.for("props")].ref="square"+ce.index}return St};let V=()=>{C[8](i.collection2,a,k[8])};i[Symbol.for("effects")].push(V),x(V,["collection2"]);let re=()=>{i.alpha;for(let Ue=0;Ue<i.collection2.length;Ue++){if(Ue<le||Ue>=me)continue;const ee={};ee.index=Ue,ee.item=i.collection2[Ue],ee.key=Ue,(typeof I>"u"||typeof I[8]>"u"||I[8].indexOf("alpha")===-1)&&a[8][ee.key].set("alpha",i.alpha)}};i[Symbol.for("effects")].push(re),x(re);let H=()=>{i.alpha;for(let Ue=0;Ue<i.collection2.length;Ue++){if(Ue<le||Ue>=me)continue;const ee={};ee.index=Ue,ee.item=i.collection2[Ue],ee.key=Ue,a[9][ee.key][Symbol.for("props")].alpha=i.alpha}};i[Symbol.for("effects")].push(H),x(H),o=a[0],r[10]={},a[10]=this.element({parent:o||"root"},A===!0?E:i),r[10].y=420,a[10].populate(r[10]),o=a[10],k[11]=[];let z,se;C[11]=(Ue=[],ee,Ee)=>{const tt=w(Ue),jt=new Set;let it=tt.length;const xt={};for(z=xt.from||0,se=("to"in xt)?xt.to:tt.length;it--;){const xe=tt[it];it<se&&it>=z&&jt.add(""+xe.color)}let je=Ee.length;for(;je--;)if(jt.has(Ee[je])===!1){const xe=Ee[je];ee[11][xe]&&ee[11][xe].destroy(),ee[11][xe]=null,delete ee[11][xe],ee[12][xe]&&ee[12][xe].destroy(),ee[12][xe]=null,delete ee[12][xe]}Ee.length=0;const Be=tt.length,St=[];for(let xe=0;xe<Be;xe++){if(xe<z||xe>=se)continue;const ce=Object.create(i);if(o=ee[10],ce.item=tt[xe],ce.undefined=xe,ce.key=""+ce.item.color,Ee.push(ce.key),N[11]=c.components&&c.components.Square||f.Square,ee[11]===void 0&&(ee[11]={}),r[11]={},ee[11][ce.key]===void 0&&(ee[11][ce.key]=this.element({parent:o||"root"},A===!0?E:i)),r[11].x=ce.item.x,r[11].alpha=ce.alpha,I[11]=[],typeof N[11]<"u")for(let st in N[11][Symbol.for("config")].props)delete r[11][N[11][Symbol.for("config")].props[st]],I[11].push(N[11][Symbol.for("config")].props[st]);if(ee[11][ce.key].nodeId===void 0&&ee[11][ce.key].populate(r[11]),ee[12]===void 0&&(ee[12]={}),o=ee[11][ce.key],R[12]={},ee[12][ce.key]===void 0){if(S=ce.item.x,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[12].x=S,S=ce.alpha,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[12].alpha=S,m=R[12].is||"Square",f[12],typeof m=="string"){if(f[12]=c.components&&c.components[m]||f[m],!f[12])throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[12]=m);ee[12][ce.key]=f[12].call(null,{props:R[12]},ee[11][ce.key],i),ee[12][ce.key][Symbol.for("slots")][0]?(o=ee[12][ce.key][Symbol.for("slots")][0],E=ee[12][ce.key],A=!0):o=ee[12][ce.key][Symbol.for("children")][0]}let Rt=()=>{(typeof I>"u"||typeof I[11]>"u"||I[11].indexOf("x")===-1)&&ee[11][ce.key].set("x",ce.item.x)};x(Rt,null),St.push(Rt),i[Symbol.for("effects")].push(Rt),ee[12][ce.key][Symbol.for("props")].x=ce.item.x}return St};let we=()=>{C[11](i.collection3,a,k[11])};i[Symbol.for("effects")].push(we),x(we,["collection3"]);let Fe=()=>{i.alpha;for(let Ue=0;Ue<i.collection3.length;Ue++){if(Ue<z||Ue>=se)continue;const ee={};ee.undefined=Ue,ee.item=i.collection3[Ue],ee.key=ee.item.color,(typeof I>"u"||typeof I[11]>"u"||I[11].indexOf("alpha")===-1)&&a[11][ee.key].set("alpha",i.alpha)}};i[Symbol.for("effects")].push(Fe),x(Fe);let Je=()=>{i.alpha;for(let Ue=0;Ue<i.collection3.length;Ue++){if(Ue<z||Ue>=se)continue;const ee={};ee.undefined=Ue,ee.item=i.collection3[Ue],ee.key=ee.item.color,a[12][ee.key][Symbol.for("props")].alpha=i.alpha}};i[Symbol.for("effects")].push(Je),x(Je),o=a[0],r[13]={},a[13]=this.element({parent:o||"root"},A===!0?E:i),r[13].y=520,a[13].populate(r[13]),o=a[13],k[14]=[];let $e,ke;C[14]=(Ue=[],ee,Ee)=>{const tt=w(Ue),jt=new Set;let it=tt.length;const xt={};for($e=xt.from||0,ke=("to"in xt)?xt.to:tt.length;it--;)tt[it],it<ke&&it>=$e&&jt.add(""+it);let je=Ee.length;for(;je--;)if(jt.has(Ee[je])===!1){const xe=Ee[je];ee[14][xe]&&ee[14][xe].destroy(),ee[14][xe]=null,delete ee[14][xe]}Ee.length=0;const Be=tt.length,St=[];for(let xe=0;xe<Be;xe++){if(xe<$e||xe>=ke)continue;const ce=Object.create(i);o=ee[13],ce.item=tt[xe],ce.undefined=xe,ce.key=""+xe,Ee.push(ce.key),o=ee[13],ee[14]===void 0&&(ee[14]={}),r[14]={},ee[14][ce.key]===void 0&&(ee[14][ce.key]=this.element({parent:o||"root"},A===!0?E:i)),r[14].w=80,r[14].h=80,r[14].x=ce.item,r[14].color="0xeab308ff",r[14].alpha=ce.alpha,ee[14][ce.key].nodeId===void 0&&ee[14][ce.key].populate(r[14])}return St};let j=()=>{C[14](i.collection1,a,k[14])};i[Symbol.for("effects")].push(j),x(j,["collection1"]);let lt=()=>{i.item;for(let Ue=0;Ue<i.collection1.length;Ue++){if(Ue<$e||Ue>=ke)continue;const ee={};ee.undefined=Ue,ee.item=i.collection1[Ue],ee.key=Ue,a[14][ee.key].set("x",ee.item)}};i[Symbol.for("effects")].push(lt),x(lt);let De=()=>{i.alpha;for(let Ue=0;Ue<i.collection1.length;Ue++){if(Ue<$e||Ue>=ke)continue;const ee={};ee.undefined=Ue,ee.item=i.collection1[Ue],ee.key=Ue,a[14][ee.key].set("alpha",i.alpha)}};i[Symbol.for("effects")].push(De),x(De),o=a[0],r[15]={},a[15]=this.element({parent:o||"root"},A===!0?E:i),r[15].y=620,a[15].populate(r[15]),o=a[15],k[16]=[];let Ye,un;C[16]=(Ue=[],ee,Ee)=>{const tt=w(Ue),jt=new Set;let it=tt.length;const xt={};for(Ye=xt.from||0,un=("to"in xt)?xt.to:tt.length;it--;){const xe=tt[it];it<un&&it>=Ye&&jt.add(""+xe.id)}let je=Ee.length;for(;je--;)if(jt.has(Ee[je])===!1){const xe=Ee[je];ee[16][xe]&&ee[16][xe].destroy(),ee[16][xe]=null,delete ee[16][xe]}Ee.length=0;const Be=tt.length,St=[];for(let xe=0;xe<Be;xe++){if(xe<Ye||xe>=un)continue;const ce=Object.create(i);o=ee[15],ce.item=tt[xe],ce.undefined=xe,ce.key=""+ce.item.id,Ee.push(ce.key),o=ee[15],ee[16]===void 0&&(ee[16]={}),r[16]={},ee[16][ce.key]===void 0&&(ee[16][ce.key]=this.element({parent:o||"root"},A===!0?E:i)),r[16].w=80,r[16].h=80,r[16].x=ce.item.x,r[16].color=ce.item.color,r[16].alpha=ce.alpha,ee[16][ce.key].nodeId===void 0&&ee[16][ce.key].populate(r[16]);let Rt=()=>{ee[16][ce.key].set("x",ce.item.x)};x(Rt,null),St.push(Rt),i[Symbol.for("effects")].push(Rt)}return St};let ji=()=>{C[16](i.collection2,a,k[16])};i[Symbol.for("effects")].push(ji),x(ji,["collection2"]);let Zi=()=>{i.alpha;for(let Ue=0;Ue<i.collection2.length;Ue++){if(Ue<Ye||Ue>=un)continue;const ee={};ee.undefined=Ue,ee.item=i.collection2[Ue],ee.key=ee.item.id,a[16][ee.key].set("alpha",i.alpha)}};i[Symbol.for("effects")].push(Zi),x(Zi),o=a[0],r[17]={},a[17]=this.element({parent:o||"root"},A===!0?E:i),r[17].y=720,a[17].populate(r[17]),o=a[17],k[18]=[];let ii,be;C[18]=(Ue=[],ee,Ee)=>{const tt=w(Ue),jt=new Set;let it=tt.length;const xt={};for(ii=xt.from||0,be=("to"in xt)?xt.to:tt.length;it--;){const xe=tt[it];it<be&&it>=ii&&jt.add(""+xe.id)}let je=Ee.length;for(;je--;)if(jt.has(Ee[je])===!1){const xe=Ee[je];ee[18][xe]&&ee[18][xe].destroy(),ee[18][xe]=null,delete ee[18][xe]}Ee.length=0;const Be=tt.length,St=[];for(let xe=0;xe<Be;xe++){if(xe<ii||xe>=be)continue;const ce=Object.create(i);o=ee[17],ce.item=tt[xe],ce.undefined=xe,ce.key=""+ce.item.id,Ee.push(ce.key),o=ee[17],ee[18]===void 0&&(ee[18]={}),r[18]={},ee[18][ce.key]===void 0&&(ee[18][ce.key]=this.element({parent:o||"root"},A===!0?E:i)),r[18].w=80,r[18].h=80,r[18].x=ce.item.x,r[18].color="0x06b6d4ff",ee[18][ce.key].nodeId===void 0&&ee[18][ce.key].populate(r[18]);let Rt=()=>{ee[18][ce.key].set("x",ce.item.x)};x(Rt,null),St.push(Rt),i[Symbol.for("effects")].push(Rt)}return St};let $i=()=>{C[18](i.collection4,a,k[18])};i[Symbol.for("effects")].push($i),x($i,["collection4"]),o=a[0],r[19]={},a[19]=this.element({parent:o||"root"},A===!0?E:i),r[19].y=720,r[19].x=700,a[19].populate(r[19]),o=a[19],k[20]=[];let gi,ri;C[20]=(Ue=[],ee,Ee)=>{const tt=w(Ue),jt=new Set;let it=tt.length;const xt={};for(gi=xt.from||0,ri=("to"in xt)?xt.to:tt.length;it--;)tt[it],it<ri&&it>=gi&&jt.add(""+it);let je=Ee.length;for(;je--;)if(jt.has(Ee[je])===!1){const xe=Ee[je];ee[20][xe]&&ee[20][xe].destroy(),ee[20][xe]=null,delete ee[20][xe]}Ee.length=0;const Be=tt.length,St=[];for(let xe=0;xe<Be;xe++){if(xe<gi||xe>=ri)continue;const ce=Object.create(i);o=ee[19],ce.item=tt[xe],ce.undefined=xe,ce.key=""+xe,Ee.push(ce.key),o=ee[19],ee[20]===void 0&&(ee[20]={}),r[20]={},ee[20][ce.key]===void 0&&(ee[20][ce.key]=this.element({parent:o||"root"},A===!0?E:i)),r[20].w=80,r[20].h=80,r[20].x=ce.item.x,r[20].color="0x8b5cf6ff",ee[20][ce.key].nodeId===void 0&&ee[20][ce.key].populate(r[20]);let Rt=()=>{ee[20][ce.key].set("x",ce.item.x)};x(Rt,null),St.push(Rt),i[Symbol.for("effects")].push(Rt)}return St};let ar=()=>{C[20](i.collection4,a,k[20])};i[Symbol.for("effects")].push(ar),x(ar,["collection4"]),o=a[0],r[21]={},a[21]=this.element({parent:o||"root"},A===!0?E:i),r[21].y=920,a[21].populate(r[21]),o=a[21],k[22]=[];let En,ft;C[22]=(Ue=[],ee,Ee)=>{const tt=w(Ue),jt=new Set;let it=tt.length;const xt={};for(En=xt.from||0,ft=("to"in xt)?xt.to:tt.length;it--;){const xe=tt[it];it<ft&&it>=En&&jt.add(""+xe.id)}let je=Ee.length;for(;je--;)if(jt.has(Ee[je])===!1){const xe=Ee[je];ee[22][xe]&&ee[22][xe].destroy(),ee[22][xe]=null,delete ee[22][xe],ee[23][xe]&&ee[23][xe].destroy(),ee[23][xe]=null,delete ee[23][xe]}Ee.length=0;const Be=tt.length,St=[];for(let xe=0;xe<Be;xe++){if(xe<En||xe>=ft)continue;const ce=Object.create(i);if(o=ee[21],ce.item=tt[xe],ce.undefined=xe,ce.key=""+ce.item.id,Ee.push(ce.key),N[22]=c.components&&c.components.Square||f.Square,ee[22]===void 0&&(ee[22]={}),r[22]={},ee[22][ce.key]===void 0&&(ee[22][ce.key]=this.element({parent:o||"root"},A===!0?E:i)),r[22].w=80,r[22].h=80,r[22].x=ce.item.x,I[22]=[],typeof N[22]<"u")for(let st in N[22][Symbol.for("config")].props)delete r[22][N[22][Symbol.for("config")].props[st]],I[22].push(N[22][Symbol.for("config")].props[st]);if(ee[22][ce.key].nodeId===void 0&&ee[22][ce.key].populate(r[22]),ee[23]===void 0&&(ee[23]={}),o=ee[22][ce.key],R[23]={},ee[23][ce.key]===void 0){if(R[23].w=80,R[23].h=80,S=ce.item.x,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[23].x=S,m=R[23].is||"Square",f[23],typeof m=="string"){if(f[23]=c.components&&c.components[m]||f[m],!f[23])throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[23]=m);ee[23][ce.key]=f[23].call(null,{props:R[23]},ee[22][ce.key],i),ee[23][ce.key][Symbol.for("slots")][0]?(o=ee[23][ce.key][Symbol.for("slots")][0],E=ee[23][ce.key],A=!0):o=ee[23][ce.key][Symbol.for("children")][0]}let Rt=()=>{(typeof I>"u"||typeof I[22]>"u"||I[22].indexOf("x")===-1)&&ee[22][ce.key].set("x",ce.item.x)};x(Rt,null),St.push(Rt),i[Symbol.for("effects")].push(Rt),ee[23][ce.key][Symbol.for("props")].x=ce.item.x}return St};let mi=()=>{C[22](i.collection4,a,k[22])};i[Symbol.for("effects")].push(mi),x(mi,["collection4"]),o=a[0],r[24]={},a[24]=this.element({parent:o||"root"},A===!0?E:i),r[24].y=920,r[24].x=700,a[24].populate(r[24]),o=a[24],k[25]=[];let Yr,Ql;C[25]=(Ue=[],ee,Ee)=>{const tt=w(Ue),jt=new Set;let it=tt.length;const xt={};for(Yr=xt.from||0,Ql=("to"in xt)?xt.to:tt.length;it--;)tt[it],it<Ql&&it>=Yr&&jt.add(""+it);let je=Ee.length;for(;je--;)if(jt.has(Ee[je])===!1){const xe=Ee[je];ee[25][xe]&&ee[25][xe].destroy(),ee[25][xe]=null,delete ee[25][xe],ee[26][xe]&&ee[26][xe].destroy(),ee[26][xe]=null,delete ee[26][xe]}Ee.length=0;const Be=tt.length,St=[];for(let xe=0;xe<Be;xe++){if(xe<Yr||xe>=Ql)continue;const ce=Object.create(i);if(o=ee[24],ce.item=tt[xe],ce.undefined=xe,ce.key=""+xe,Ee.push(ce.key),N[25]=c.components&&c.components.Square||f.Square,ee[25]===void 0&&(ee[25]={}),r[25]={},ee[25][ce.key]===void 0&&(ee[25][ce.key]=this.element({parent:o||"root"},A===!0?E:i)),r[25].w=80,r[25].h=80,r[25].x=ce.item.x,I[25]=[],typeof N[25]<"u")for(let st in N[25][Symbol.for("config")].props)delete r[25][N[25][Symbol.for("config")].props[st]],I[25].push(N[25][Symbol.for("config")].props[st]);if(ee[25][ce.key].nodeId===void 0&&ee[25][ce.key].populate(r[25]),ee[26]===void 0&&(ee[26]={}),o=ee[25][ce.key],R[26]={},ee[26][ce.key]===void 0){if(R[26].w=80,R[26].h=80,S=ce.item.x,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[26].x=S,m=R[26].is||"Square",f[26],typeof m=="string"){if(f[26]=c.components&&c.components[m]||f[m],!f[26])throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[26]=m);ee[26][ce.key]=f[26].call(null,{props:R[26]},ee[25][ce.key],i),ee[26][ce.key][Symbol.for("slots")][0]?(o=ee[26][ce.key][Symbol.for("slots")][0],E=ee[26][ce.key],A=!0):o=ee[26][ce.key][Symbol.for("children")][0]}let Rt=()=>{(typeof I>"u"||typeof I[25]>"u"||I[25].indexOf("x")===-1)&&ee[25][ce.key].set("x",ce.item.x)};x(Rt,null),St.push(Rt),i[Symbol.for("effects")].push(Rt),ee[26][ce.key][Symbol.for("props")].x=ce.item.x}return St};let Jl=()=>{C[25](i.collection4,a,k[25])};return i[Symbol.for("effects")].push(Jl),x(Jl,["collection4"]),{elms:a,cleanup:()=>{S=null,E=null,i=null,o=null,k[2].length=0,C[2]=null,Me=null,k[4].length=0,C[4]=null,oe=null,k[6].length=0,C[6]=null,ne=null,k[8].length=0,C[8]=null,N[8]=null,R[9]=null,f[9]=null,V=null,re=null,H=null,k[11].length=0,C[11]=null,N[11]=null,R[12]=null,f[12]=null,we=null,Fe=null,Je=null,k[14].length=0,C[14]=null,j=null,lt=null,De=null,k[16].length=0,C[16]=null,ji=null,Zi=null,k[18].length=0,C[18]=null,$i=null,k[20].length=0,C[20]=null,ar=null,k[22].length=0,C[22]=null,N[22]=null,R[23]=null,f[23]=null,mi=null,k[25].length=0,C[25]=null,N[25]=null,R[26]=null,f[26]=null,Jl=null,N.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[],context:{}},state(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:ki[0]},{id:"block2",x:100,color:ki[1]},{id:"block3",x:200,color:ki[2]},{id:"block4",x:300,color:ki[3]},{id:"block5",x:400,color:ki[4]},{id:"block6",x:500,color:ki[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=ki[5],this.collection2[1].color=ki[4],this.collection2[2].color=ki[3],this.collection2[3].color=ki[2],this.collection2[4].color=ki[1],this.collection2[5].color=ki[0]},4e3);let h=0;const o=this.$setInterval(()=>{this.collection3.push({x:h*100,color:ki[h]}),h++,h===ki.length&&clearInterval(o)},1e3);this.$setInterval(()=>{this.alpha=this.alpha===.5?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),lC=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],fC=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],cC=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],Xm=h=>Math.round(Math.random()*1e3)%h;let SD=0;const Nl=()=>({id:SD++,text:`${lC[Xm(lC.length)]} ${fC[Xm(fC.length)]} ${cC[Xm(cC.length)]}`}),TD=(h=1)=>{const o=[];for(let i=0;i<h;i++)o.push(Nl());return o},CD=Oe.Component("LegendItem",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m=!1,S=0,E=[];if(r[0]={},a[0]=this.element({parent:o||"root"},m===!0?I:i),a[0].populate(r[0]),m===!0&&(S-=1),E[1]=c.components&&c.components.Circle||f.Circle,o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},m===!0?I:i),r[1].color="0xfb923cff",r[1].size=60,R[1]=[],typeof E[1]<"u")for(let A in E[1][Symbol.for("config")].props)delete r[1][E[1][Symbol.for("config")].props[A]],R[1].push(E[1][Symbol.for("config")].props[A]);if(a[1].populate(r[1]),m===!0&&(S-=1),o=a[1],C[2]={},C[2].color="0xfb923cff",C[2].size=60,k=C[2].is||"Circle",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "Circle" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);return a[2]=f[2].call(null,{props:C[2]},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],I=a[2],m=!0):o=a[2][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},m===!0?I:i),r[3].color="0xe5e5e5ff",r[3].size=32,r[3].y=10,r[3].maxwidth=57,r[3].align="center",r[3].content=""+i.id,r[3].__textnode=!0,a[3].populate(r[3]),m===!0&&(S-=1),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},m===!0?I:i),r[4].color="0xe5e5e5ff",r[4].x=80,r[4].y=14,r[4].size=28,r[4].content=""+i.text,r[4].__textnode=!0,a[4].populate(r[4]),m===!0&&(S-=1),{elms:a,cleanup:()=>{I=null,i=null,o=null,E[1]=null,C[2]=null,f[2]=null,E.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[],context:{}},props:["id","text"]}),m4=Oe.Component("Row",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=380,r[0].h=60,r[0].y=i.index*80,r[0].color="0xfff7edff",a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].w=10,r[1].h=60,r[1].color="0x06b6d4ff",a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].content=i.text,r[2].x=30,r[2].y=15,r[2].font="lato",r[2].size=28,r[2].color=i.activeRow==i.index?"0x06b6d4ff":"0x1e293bff",r[2].__textnode=!0,a[2].populate(r[2]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("y",o.index*80)},function(o,i,c,f,x,w){i[2].set("content",o.text)},function(o,i,c,f,x,w){i[2].set("color",o.activeRow==o.index?"0x06b6d4ff":"0x1e293bff")}],context:{}},props:["index","text","activeRow"]}),bD=Oe.Component("Rows",{components:{Row:m4},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E,A=!1,N=[];r[0]={},a[0]=this.element({parent:o||"root"},A===!0?E:i),a[0].populate(r[0]),o=a[0],k[1]=[];let K,Se;C[1]=(oe=[],pe,D)=>{const ne=w(oe),le=new Set;let me=ne.length;const V={};for(K=V.from||0,Se=("to"in V)?V.to:ne.length;me--;){const se=ne[me];me<Se&&me>=K&&le.add(""+se.id+"key2")}let re=D.length;for(;re--;)if(le.has(D[re])===!1){const se=D[re];pe[1][se]&&pe[1][se].destroy(),pe[1][se]=null,delete pe[1][se],pe[2][se]&&pe[2][se].destroy(),pe[2][se]=null,delete pe[2][se]}D.length=0;const H=ne.length,z=[];for(let se=0;se<H;se++){if(se<K||se>=Se)continue;const we=Object.create(i);if(o=pe[0],we.item=ne[se],we.index=se,we.key=""+we.item.id+"key2",D.push(we.key),N[1]=c.components&&c.components.Row||f.Row,pe[1]===void 0&&(pe[1]={}),r[1]={},pe[1][we.key]===void 0&&(pe[1][we.key]=this.element({parent:o||"root"},A===!0?E:i)),r[1].activeRow=we.activeRowIndex,r[1].index=we.index,r[1].text=we.item.text,r[1].y=50,I[1]=[],typeof N[1]<"u")for(let $e in N[1][Symbol.for("config")].props)delete r[1][N[1][Symbol.for("config")].props[$e]],I[1].push(N[1][Symbol.for("config")].props[$e]);if(pe[1][we.key].nodeId===void 0&&pe[1][we.key].populate(r[1]),pe[2]===void 0&&(pe[2]={}),o=pe[1][we.key],R[2]={},pe[2][we.key]===void 0){if(S=we.activeRowIndex,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[2].activeRow=S,S=we.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[2].index=S,S=we.item.text,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[2].text=S,R[2].y=50,m=R[2].is||"Row",f[2],typeof m=="string"){if(f[2]=c.components&&c.components[m]||f[m],!f[2])throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[2]=m);pe[2][we.key]=f[2].call(null,{props:R[2]},pe[1][we.key],i),pe[2][we.key][Symbol.for("slots")][0]?(o=pe[2][we.key][Symbol.for("slots")][0],E=pe[2][we.key],A=!0):o=pe[2][we.key][Symbol.for("children")][0]}let Fe=()=>{(typeof I>"u"||typeof I[1]>"u"||I[1].indexOf("index")===-1)&&pe[1][we.key].set("index",we.index)};x(Fe,null),z.push(Fe),i[Symbol.for("effects")].push(Fe);let Je=()=>{(typeof I>"u"||typeof I[1]>"u"||I[1].indexOf("text")===-1)&&pe[1][we.key].set("text",we.item.text)};x(Je,null),z.push(Je),i[Symbol.for("effects")].push(Je),pe[2][we.key][Symbol.for("props")].index=we.index,pe[2][we.key][Symbol.for("props")].text=we.item.text}return z};let Me=()=>{C[1](i.data,a,k[1])};i[Symbol.for("effects")].push(Me),x(Me,["data"]);let ue=()=>{i.activeRowIndex;for(let oe=0;oe<i.data.length;oe++){if(oe<K||oe>=Se)continue;const pe={};pe.index=oe,pe.item=i.data[oe],pe.key=pe.item.id+"key2",(typeof I>"u"||typeof I[1]>"u"||I[1].indexOf("activeRow")===-1)&&a[1][pe.key].set("activeRow",i.activeRowIndex)}};i[Symbol.for("effects")].push(ue),x(ue);let he=()=>{i.activeRowIndex;for(let oe=0;oe<i.data.length;oe++){if(oe<K||oe>=Se)continue;const pe={};pe.index=oe,pe.item=i.data[oe],pe.key=pe.item.id+"key2",a[2][pe.key][Symbol.for("props")].activeRow=i.activeRowIndex}};return i[Symbol.for("effects")].push(he),x(he),{elms:a,cleanup:()=>{S=null,E=null,i=null,o=null,k[1].length=0,C[1]=null,N[1]=null,R[2]=null,f[2]=null,Me=null,ue=null,he=null,N.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[],context:{}},props:["data","activeRowIndex"]}),kD=Oe.Component("ForLoop",{components:{Square:Ju,LegendItem:CD,Row:m4,Rows:bD},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E,A=!1,N=0,K=[];if(r[0]={},a[0]=this.element({parent:o||"root"},A===!0?E:i),a[0].populate(r[0]),A===!0&&(N-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},A===!0?E:i),r[1].x=100,r[1].y=60,r[1].size=48,r[1].content="Array operations test",r[1].__textnode=!0,a[1].populate(r[1]),A===!0&&(N-=1),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},A===!0?E:i),r[2].y=170,r[2].x=140,a[2].populate(r[2]),A===!0&&(N-=1),o=a[2],r[3]={},a[3]=this.element({parent:o||"root"},A===!0?E:i),r[3].x="-10",r[3].w=500,r[3].h=80,r[3].color="0x64748bff",r[3].y={transition:i.y},r[3].alpha={transition:!i.hide},a[3].populate(r[3]),A===!0&&(N-=1),K[4]=c.components&&c.components.LegendItem||f.LegendItem,o=a[2],r[4]={},a[4]=this.element({parent:o||"root"},A===!0?E:i),r[4].y=0,r[4].id="a",r[4].text="Fill array by assignment",I[4]=[],typeof K[4]<"u")for(let me in K[4][Symbol.for("config")].props)delete r[4][K[4][Symbol.for("config")].props[me]],I[4].push(K[4][Symbol.for("config")].props[me]);if(a[4].populate(r[4]),A===!0&&(N-=1),o=a[4],R[5]={},R[5].y=0,R[5].id="a",R[5].text="Fill array by assignment",m=R[5].is||"LegendItem",f[5],typeof m=="string"){if(f[5]=c.components&&c.components[m]||f[m],!f[5])throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[5]=m);if(a[5]=f[5].call(null,{props:R[5]},a[4],i),a[5][Symbol.for("slots")][0]?(o=a[5][Symbol.for("slots")][0],E=a[5],A=!0):o=a[5][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[6]=c.components&&c.components.LegendItem||f.LegendItem,o=a[2],r[6]={},a[6]=this.element({parent:o||"root"},A===!0?E:i),r[6].y=90,r[6].id="b",r[6].text="Push new item to array",I[6]=[],typeof K[6]<"u")for(let me in K[6][Symbol.for("config")].props)delete r[6][K[6][Symbol.for("config")].props[me]],I[6].push(K[6][Symbol.for("config")].props[me]);if(a[6].populate(r[6]),A===!0&&(N-=1),o=a[6],R[7]={},R[7].y=90,R[7].id="b",R[7].text="Push new item to array",m=R[7].is||"LegendItem",f[7],typeof m=="string"){if(f[7]=c.components&&c.components[m]||f[m],!f[7])throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[7]=m);if(a[7]=f[7].call(null,{props:R[7]},a[6],i),a[7][Symbol.for("slots")][0]?(o=a[7][Symbol.for("slots")][0],E=a[7],A=!0):o=a[7][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[8]=c.components&&c.components.LegendItem||f.LegendItem,o=a[2],r[8]={},a[8]=this.element({parent:o||"root"},A===!0?E:i),r[8].y=180,r[8].id="c",r[8].text="Pop item from array",I[8]=[],typeof K[8]<"u")for(let me in K[8][Symbol.for("config")].props)delete r[8][K[8][Symbol.for("config")].props[me]],I[8].push(K[8][Symbol.for("config")].props[me]);if(a[8].populate(r[8]),A===!0&&(N-=1),o=a[8],R[9]={},R[9].y=180,R[9].id="c",R[9].text="Pop item from array",m=R[9].is||"LegendItem",f[9],typeof m=="string"){if(f[9]=c.components&&c.components[m]||f[m],!f[9])throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[9]=m);if(a[9]=f[9].call(null,{props:R[9]},a[8],i),a[9][Symbol.for("slots")][0]?(o=a[9][Symbol.for("slots")][0],E=a[9],A=!0):o=a[9][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[10]=c.components&&c.components.LegendItem||f.LegendItem,o=a[2],r[10]={},a[10]=this.element({parent:o||"root"},A===!0?E:i),r[10].y=270,r[10].id="d",r[10].text="Shift item from array",I[10]=[],typeof K[10]<"u")for(let me in K[10][Symbol.for("config")].props)delete r[10][K[10][Symbol.for("config")].props[me]],I[10].push(K[10][Symbol.for("config")].props[me]);if(a[10].populate(r[10]),A===!0&&(N-=1),o=a[10],R[11]={},R[11].y=270,R[11].id="d",R[11].text="Shift item from array",m=R[11].is||"LegendItem",f[11],typeof m=="string"){if(f[11]=c.components&&c.components[m]||f[m],!f[11])throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[11]=m);if(a[11]=f[11].call(null,{props:R[11]},a[10],i),a[11][Symbol.for("slots")][0]?(o=a[11][Symbol.for("slots")][0],E=a[11],A=!0):o=a[11][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[12]=c.components&&c.components.LegendItem||f.LegendItem,o=a[2],r[12]={},a[12]=this.element({parent:o||"root"},A===!0?E:i),r[12].y=360,r[12].id="e",r[12].text="Splice 2 items from array",I[12]=[],typeof K[12]<"u")for(let me in K[12][Symbol.for("config")].props)delete r[12][K[12][Symbol.for("config")].props[me]],I[12].push(K[12][Symbol.for("config")].props[me]);if(a[12].populate(r[12]),A===!0&&(N-=1),o=a[12],R[13]={},R[13].y=360,R[13].id="e",R[13].text="Splice 2 items from array",m=R[13].is||"LegendItem",f[13],typeof m=="string"){if(f[13]=c.components&&c.components[m]||f[m],!f[13])throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[13]=m);if(a[13]=f[13].call(null,{props:R[13]},a[12],i),a[13][Symbol.for("slots")][0]?(o=a[13][Symbol.for("slots")][0],E=a[13],A=!0):o=a[13][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[14]=c.components&&c.components.LegendItem||f.LegendItem,o=a[2],r[14]={},a[14]=this.element({parent:o||"root"},A===!0?E:i),r[14].y=450,r[14].id="f",r[14].text="Unshift 2 items into array",I[14]=[],typeof K[14]<"u")for(let me in K[14][Symbol.for("config")].props)delete r[14][K[14][Symbol.for("config")].props[me]],I[14].push(K[14][Symbol.for("config")].props[me]);if(a[14].populate(r[14]),A===!0&&(N-=1),o=a[14],R[15]={},R[15].y=450,R[15].id="f",R[15].text="Unshift 2 items into array",m=R[15].is||"LegendItem",f[15],typeof m=="string"){if(f[15]=c.components&&c.components[m]||f[m],!f[15])throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[15]=m);if(a[15]=f[15].call(null,{props:R[15]},a[14],i),a[15][Symbol.for("slots")][0]?(o=a[15][Symbol.for("slots")][0],E=a[15],A=!0):o=a[15][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[16]=c.components&&c.components.LegendItem||f.LegendItem,o=a[2],r[16]={},a[16]=this.element({parent:o||"root"},A===!0?E:i),r[16].y=540,r[16].id="g",r[16].text="Empty array by assignment",I[16]=[],typeof K[16]<"u")for(let me in K[16][Symbol.for("config")].props)delete r[16][K[16][Symbol.for("config")].props[me]],I[16].push(K[16][Symbol.for("config")].props[me]);if(a[16].populate(r[16]),A===!0&&(N-=1),o=a[16],R[17]={},R[17].y=540,R[17].id="g",R[17].text="Empty array by assignment",m=R[17].is||"LegendItem",f[17],typeof m=="string"){if(f[17]=c.components&&c.components[m]||f[m],!f[17])throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[17]=m);if(a[17]=f[17].call(null,{props:R[17]},a[16],i),a[17][Symbol.for("slots")][0]?(o=a[17][Symbol.for("slots")][0],E=a[17],A=!0):o=a[17][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[18]=c.components&&c.components.LegendItem||f.LegendItem,o=a[2],r[18]={},a[18]=this.element({parent:o||"root"},A===!0?E:i),r[18].y=630,r[18].id="h",r[18].text="Concat an array with items",I[18]=[],typeof K[18]<"u")for(let me in K[18][Symbol.for("config")].props)delete r[18][K[18][Symbol.for("config")].props[me]],I[18].push(K[18][Symbol.for("config")].props[me]);if(a[18].populate(r[18]),A===!0&&(N-=1),o=a[18],R[19]={},R[19].y=630,R[19].id="h",R[19].text="Concat an array with items",m=R[19].is||"LegendItem",f[19],typeof m=="string"){if(f[19]=c.components&&c.components[m]||f[m],!f[19])throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[19]=m);if(a[19]=f[19].call(null,{props:R[19]},a[18],i),a[19][Symbol.for("slots")][0]?(o=a[19][Symbol.for("slots")][0],E=a[19],A=!0):o=a[19][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),K[20]=c.components&&c.components.LegendItem||f.LegendItem,o=a[2],r[20]={},a[20]=this.element({parent:o||"root"},A===!0?E:i),r[20].y=720,r[20].id="i",r[20].text="Sort array alphabetically",I[20]=[],typeof K[20]<"u")for(let me in K[20][Symbol.for("config")].props)delete r[20][K[20][Symbol.for("config")].props[me]],I[20].push(K[20][Symbol.for("config")].props[me]);if(a[20].populate(r[20]),A===!0&&(N-=1),o=a[20],R[21]={},R[21].y=720,R[21].id="i",R[21].text="Sort array alphabetically",m=R[21].is||"LegendItem",f[21],typeof m=="string"){if(f[21]=c.components&&c.components[m]||f[m],!f[21])throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[21]=m);a[21]=f[21].call(null,{props:R[21]},a[20],i),a[21][Symbol.for("slots")][0]?(o=a[21][Symbol.for("slots")][0],E=a[21],A=!0):o=a[21][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),o=a[2],r[22]={},a[22]=this.element({parent:o||"root"},A===!0?E:i),r[22].y=840,a[22].populate(r[22]),A===!0&&(N-=1),o=a[22],r[23]={},a[23]=this.element({parent:o||"root"},A===!0?E:i),r[23].size=26,r[23].y=10,r[23].content="Array length:",r[23].__textnode=!0,a[23].populate(r[23]),A===!0&&(N-=1),o=a[22],r[24]={},a[24]=this.element({parent:o||"root"},A===!0?E:i),r[24].content=i.data.length,r[24].size=40,r[24].x=180,r[24].color="0xfb923cff",r[24].__textnode=!0,a[24].populate(r[24]),A===!0&&(N-=1),o=a[0],r[25]={},a[25]=this.element({parent:o||"root"},A===!0?E:i),r[25].x=660,r[25].y=100,a[25].populate(r[25]),A===!0&&(N-=1),o=a[25],r[26]={},a[26]=this.element({parent:o||"root"},A===!0?E:i),r[26].content="For loop on Element",r[26].__textnode=!0,a[26].populate(r[26]),A===!0&&(N-=1),o=a[25],k[27]=[];let Se,Me;C[27]=(me=[],V,re)=>{const H=w(me),z=new Set;let se=H.length;const we={};for(Se=we.from||0,Me=("to"in we)?we.to:H.length;se--;){const ke=H[se];se<Me&&se>=Se&&z.add(""+ke.id+"key")}let Fe=re.length;for(;Fe--;)if(z.has(re[Fe])===!1){const ke=re[Fe];V[27][ke]&&V[27][ke].destroy(),V[27][ke]=null,delete V[27][ke],V[28][ke]&&V[28][ke].destroy(),V[28][ke]=null,delete V[28][ke],V[29][ke]&&V[29][ke].destroy(),V[29][ke]=null,delete V[29][ke]}re.length=0;const Je=H.length,$e=[];for(let ke=0;ke<Je;ke++){if(ke<Se||ke>=Me)continue;const j=Object.create(i);o=V[25],j.item=H[ke],j.index=ke,j.key=""+j.item.id+"key",re.push(j.key),o=V[25],V[27]===void 0&&(V[27]={}),r[27]={},V[27][j.key]===void 0&&(V[27][j.key]=this.element({parent:o||"root"},A===!0?E:i)),r[27].w=380,r[27].h=60,r[27].y=j.index*80+50,r[27].color="0xfff7edff",V[27][j.key].nodeId===void 0&&(V[27][j.key].populate(r[27]),A===!0&&(N-=1)),o=V[27][j.key],V[28]===void 0&&(V[28]={}),r[28]={},V[28][j.key]===void 0&&(V[28][j.key]=this.element({parent:o||"root"},A===!0?E:i)),r[28].w=10,r[28].h=60,r[28].color="0xfb923cff",V[28][j.key].nodeId===void 0&&(V[28][j.key].populate(r[28]),A===!0&&(N-=1)),o=V[27][j.key],V[29]===void 0&&(V[29]={}),r[29]={},V[29][j.key]===void 0&&(V[29][j.key]=this.element({parent:o||"root"},A===!0?E:i)),r[29].content=j.item.text,r[29].x=30,r[29].y=15,r[29].font="lato",r[29].size=28,r[29].color=j.activeRowIndex===j.index?"0x06b6d4ff":"0x1e293bff",r[29].__textnode=!0,V[29][j.key].nodeId===void 0&&(V[29][j.key].populate(r[29]),A===!0&&(N-=1));let lt=()=>{V[27][j.key].set("y",j.index*80+50)};x(lt,null),$e.push(lt),i[Symbol.for("effects")].push(lt);let De=()=>{V[29][j.key].set("content",j.item.text)};x(De,null),$e.push(De),i[Symbol.for("effects")].push(De)}return $e};let ue=()=>{C[27](i.data,a,k[27])};i[Symbol.for("effects")].push(ue),x(ue,["data"]);let he=()=>{i.activeRowIndex;for(let me=0;me<i.data.length;me++){if(me<Se||me>=Me)continue;const V={};V.index=me,V.item=i.data[me],V.key=V.item.id+"key",a[29][V.key].set("color",i.activeRowIndex===V.index?"0x06b6d4ff":"0x1e293bff")}};i[Symbol.for("effects")].push(he),x(he),o=a[0],r[30]={},a[30]=this.element({parent:o||"root"},A===!0?E:i),r[30].x=1080,r[30].y=100,a[30].populate(r[30]),A===!0&&(N-=1),o=a[30],r[31]={},a[31]=this.element({parent:o||"root"},A===!0?E:i),r[31].content="For loop on Component",r[31].__textnode=!0,a[31].populate(r[31]),A===!0&&(N-=1),o=a[30],k[32]=[];let oe,pe;C[32]=(me=[],V,re)=>{const H=w(me),z=new Set;let se=H.length;const we={};for(oe=we.from||0,pe=("to"in we)?we.to:H.length;se--;){const ke=H[se];se<pe&&se>=oe&&z.add(""+ke.id+"key2")}let Fe=re.length;for(;Fe--;)if(z.has(re[Fe])===!1){const ke=re[Fe];V[32][ke]&&V[32][ke].destroy(),V[32][ke]=null,delete V[32][ke],V[33][ke]&&V[33][ke].destroy(),V[33][ke]=null,delete V[33][ke]}re.length=0;const Je=H.length,$e=[];for(let ke=0;ke<Je;ke++){if(ke<oe||ke>=pe)continue;const j=Object.create(i);if(o=V[30],j.item=H[ke],j.index=ke,j.key=""+j.item.id+"key2",re.push(j.key),K[32]=c.components&&c.components.Row||f.Row,V[32]===void 0&&(V[32]={}),r[32]={},V[32][j.key]===void 0&&(V[32][j.key]=this.element({parent:o||"root"},A===!0?E:i)),r[32].activeRow=(j.count>0,j.activeRowIndex),r[32].index=j.index,r[32].text=j.item.text,r[32].y=50,I[32]=[],typeof K[32]<"u")for(let Ye in K[32][Symbol.for("config")].props)delete r[32][K[32][Symbol.for("config")].props[Ye]],I[32].push(K[32][Symbol.for("config")].props[Ye]);if(V[32][j.key].nodeId===void 0&&(V[32][j.key].populate(r[32]),A===!0&&(N-=1)),V[33]===void 0&&(V[33]={}),o=V[32][j.key],R[33]={},V[33][j.key]===void 0){if(S=(j.count>0,j.activeRowIndex),Array.isArray(S)===!0&&(S=w(S).slice(0)),R[33].activeRow=S,S=j.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[33].index=S,S=j.item.text,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[33].text=S,R[33].y=50,m=R[33].is||"Row",f[33],typeof m=="string"){if(f[33]=c.components&&c.components[m]||f[m],!f[33])throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[33]=m);V[33][j.key]=f[33].call(null,{props:R[33]},V[32][j.key],i),V[33][j.key][Symbol.for("slots")][0]?(o=V[33][j.key][Symbol.for("slots")][0],E=V[33][j.key],A=!0):o=V[33][j.key][Symbol.for("children")][0]}let lt=()=>{(typeof I>"u"||typeof I[32]>"u"||I[32].indexOf("index")===-1)&&V[32][j.key].set("index",j.index)};x(lt,null),$e.push(lt),i[Symbol.for("effects")].push(lt);let De=()=>{(typeof I>"u"||typeof I[32]>"u"||I[32].indexOf("text")===-1)&&V[32][j.key].set("text",j.item.text)};x(De,null),$e.push(De),i[Symbol.for("effects")].push(De),V[33][j.key][Symbol.for("props")].index=j.index,V[33][j.key][Symbol.for("props")].text=j.item.text}return $e};let D=()=>{C[32](i.data,a,k[32])};i[Symbol.for("effects")].push(D),x(D,["data"]);let ne=()=>{i.activeRowIndex,i.count;for(let me=0;me<i.data.length;me++){if(me<oe||me>=pe)continue;const V={};V.index=me,V.item=i.data[me],V.key=V.item.id+"key2",(typeof I>"u"||typeof I[32]>"u"||I[32].indexOf("activeRow")===-1)&&a[32][V.key].set("activeRow",(i.count>0,i.activeRowIndex))}};i[Symbol.for("effects")].push(ne),x(ne);let le=()=>{i.activeRowIndex,i.count;for(let me=0;me<i.data.length;me++){if(me<oe||me>=pe)continue;const V={};V.index=me,V.item=i.data[me],V.key=V.item.id+"key2",a[33][V.key][Symbol.for("props")].activeRow=(i.count>0,i.activeRowIndex)}};if(i[Symbol.for("effects")].push(le),x(le),o=a[0],r[34]={},a[34]=this.element({parent:o||"root"},A===!0?E:i),r[34].x=1500,r[34].y=100,a[34].populate(r[34]),A===!0&&(N-=1),o=a[34],r[35]={},a[35]=this.element({parent:o||"root"},A===!0?E:i),r[35].content="RowsComponent",r[35].__textnode=!0,a[35].populate(r[35]),A===!0&&(N-=1),K[36]=c.components&&c.components.Rows||f.Rows,o=a[34],r[36]={},a[36]=this.element({parent:o||"root"},A===!0?E:i),r[36].data=i.data,r[36].activeRowIndex=i.activeRowIndex,I[36]=[],typeof K[36]<"u")for(let me in K[36][Symbol.for("config")].props)delete r[36][K[36][Symbol.for("config")].props[me]],I[36].push(K[36][Symbol.for("config")].props[me]);if(a[36].populate(r[36]),A===!0&&(N-=1),o=a[36],R[37]={},S=i.data,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[37].data=S,S=i.activeRowIndex,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[37].activeRowIndex=S,m=R[37].is||"Rows",f[37],typeof m=="string"){if(f[37]=c.components&&c.components[m]||f[m],!f[37])throw new Error('Component "Rows" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[37]=m);return a[37]=f[37].call(null,{props:R[37]},a[36],i),a[37][Symbol.for("slots")][0]?(o=a[37][Symbol.for("slots")][0],E=a[37],A=!0):o=a[37][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),{elms:a,cleanup:()=>{S=null,E=null,i=null,o=null,K[4]=null,R[5]=null,f[5]=null,K[6]=null,R[7]=null,f[7]=null,K[8]=null,R[9]=null,f[9]=null,K[10]=null,R[11]=null,f[11]=null,K[12]=null,R[13]=null,f[13]=null,K[14]=null,R[15]=null,f[15]=null,K[16]=null,R[17]=null,f[17]=null,K[18]=null,R[19]=null,f[19]=null,K[20]=null,R[21]=null,f[21]=null,k[27].length=0,C[27]=null,ue=null,he=null,k[32].length=0,C[32]=null,K[32]=null,R[33]=null,f[33]=null,D=null,ne=null,le=null,K[36]=null,R[37]=null,f[37]=null,K.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[function(o,i,c,f,x,w){i[3].set("y",{transition:o.y})},function(o,i,c,f,x,w){i[3].set("alpha",{transition:!o.hide})},function(o,i,c,f,x,w){i[24].set("content",o.data.length)},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[36]>"u"||skips[36].indexOf("data")===-1)&&i[36].set("data",o.data)},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[36]>"u"||skips[36].indexOf("activeRowIndex")===-1)&&i[36].set("activeRowIndex",o.activeRowIndex)},function(o,i,c,f,x,w){i[37][Symbol.for("props")].data=o.data},function(o,i,c,f,x,w){i[37][Symbol.for("props")].activeRowIndex=o.activeRowIndex}],context:{}},state(){return{count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1,activeRowIndex:0}},computed:{show(){return this.hide,this.hide===!0},data2(){return this.data,this.data}},watch:{y(){this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(()=>{this.hide=!0},600)}},input:{a(){this.y=-10,this.$trigger("y");const h=[];for(let o=0;o<6;o++)h.push(Nl());this.data=h},b(){this.y=80,this.$trigger("y"),this.data.push(Nl())},c(){this.y=170,this.$trigger("y"),this.data.pop()},d(){this.y=260,this.$trigger("y"),this.data.shift()},e(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f(){this.y=440,this.data.unshift(Nl(),Nl())},g(){this.y=530,this.$trigger("y"),this.data=[]},h(){this.y=620,this.$trigger("y"),this.data=this.data.concat(TD(3))},i(){this.y=710,this.$trigger("y"),this.sortDirection=this.sortDirection===1?0:1,this.data=this.data.sort((h,o)=>{const i=h.text.toLowerCase(),c=o.text.toLowerCase();return this.sortDirection===1?i<c?-1:i>c?1:0:i>c?-1:i<c?1:0})},up(){this.activeRowIndex>0&&(this.activeRowIndex-=1)},down(){this.activeRowIndex<this.data.length-1&&(this.activeRowIndex+=1)}}}),AD=Oe.Component("Effects",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].w=160,r[1].h=160,r[1].x=40,r[1].y=40,r[1].color="0xfb923cff",r[1].effects=[{type:"radius",props:{radius:44}}],a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].w=160,r[2].h=160,r[2].x=240,r[2].y=40,r[2].color="0xd97706ff",r[2].effects=[{type:"radius",props:{radius:25}}],a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].w=160,r[3].h=160,r[3].x=440,r[3].y=40,r[3].color="0xb45309ff",r[3].effects=[{type:"radius",props:{radius:80}}],a[3].populate(r[3]),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].w=160,r[4].h=160,r[4].x=640,r[4].y=40,r[4].color="0x78350fff",r[4].effects=[{type:"radius",props:{radius:10}}],a[4].populate(r[4]),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].w=160,r[5].h=160,r[5].x=40,r[5].y=240,r[5].color="0x65a30dff",r[5].effects=[{type:"radius",props:{radius:i.radius}}],a[5].populate(r[5]),o=a[0],r[6]={},a[6]=this.element({parent:o||"root"},i),r[6].w=300,r[6].h=300,r[6].x=40,r[6].y=440,r[6].color="0x0c4a6eff",r[6].effects=[{type:"radius",props:{radius:30}}],a[6].populate(r[6]),o=a[6],r[7]={},a[7]=this.element({parent:o||"root"},i),r[7].w=200,r[7].h=200,r[7].x=50,r[7].y=50,r[7].color="0x0284c7ff",r[7].effects=[{type:"radius",props:{radius:40}}],a[7].populate(r[7]),o=a[7],r[8]={},a[8]=this.element({parent:o||"root"},i),r[8].w=100,r[8].h=100,r[8].x=50,r[8].y=50,r[8].color="0x38bdf8ff",r[8].effects=[{type:"radius",props:{radius:50}}],a[8].populate(r[8]),o=a[8],r[9]={},a[9]=this.element({parent:o||"root"},i),r[9].w=40,r[9].h=40,r[9].x=30,r[9].y=30,r[9].color="0xbae6fdff",r[9].effects=[{type:"radius",props:{radius:20}}],a[9].populate(r[9]),o=a[0],r[10]={},a[10]=this.element({parent:o||"root"},i),r[10].w=160,r[10].h=160,r[10].x=840,r[10].y=40,r[10].color="0x3b82f6ff",r[10].effects=[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}],a[10].populate(r[10]),o=a[0],r[11]={},a[11]=this.element({parent:o||"root"},i),r[11].w=160,r[11].h=160,r[11].x=1040,r[11].y=40,r[11].color="0x500724ff",r[11].effects=i.effects,a[11].populate(r[11]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("effects",[{type:"radius",props:{radius:44}}])},function(o,i,c,f,x,w){i[2].set("effects",[{type:"radius",props:{radius:25}}])},function(o,i,c,f,x,w){i[3].set("effects",[{type:"radius",props:{radius:80}}])},function(o,i,c,f,x,w){i[4].set("effects",[{type:"radius",props:{radius:10}}])},function(o,i,c,f,x,w){i[5].set("effects",[{type:"radius",props:{radius:o.radius}}])},function(o,i,c,f,x,w){i[6].set("effects",[{type:"radius",props:{radius:30}}])},function(o,i,c,f,x,w){i[7].set("effects",[{type:"radius",props:{radius:40}}])},function(o,i,c,f,x,w){i[8].set("effects",[{type:"radius",props:{radius:50}}])},function(o,i,c,f,x,w){i[9].set("effects",[{type:"radius",props:{radius:20}}])},function(o,i,c,f,x,w){i[10].set("effects",[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}])},function(o,i,c,f,x,w){i[11].set("effects",o.effects)}],context:{}},state(){return{direction:"up",radius:0,effects:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]}},hooks:{ready(){this.$setInterval(()=>{const o=this.direction==="up"?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(o,80),0),this.radius===80&&(this.direction="down"),this.radius===0&&(this.direction="up")},500);let h=0;this.$setInterval(()=>{h++,h%2?this.effects=[{type:"borderTop",props:{width:50,color:"#f43f5e"}},{type:"borderBottom",props:{width:50,color:"#be123c"}}]:this.effects=[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]},2e3)}}}),ED=Oe.Component("ShowIf",{components:{Square:Ju},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),a[0].populate(r[0]),S===!0&&(E-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].y=40,a[1].populate(r[1]),S===!0&&(E-=1),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},S===!0?m:i),r[2].x=50,r[2].w=200,r[2].h=300,r[2].color="0xbef264ff",r[2].show=!0,a[2].populate(r[2]),S===!0&&(E-=1),o=a[1],r[3]={},a[3]=this.element({parent:o||"root"},S===!0?m:i),r[3].x=350,r[3].w=200,r[3].h=300,r[3].color="0xff0000ff",r[3].show=!1,a[3].populate(r[3]),S===!0&&(E-=1),o=a[1],r[4]={},a[4]=this.element({parent:o||"root"},S===!0?m:i),r[4].x=650,r[4].w=200,r[4].h=300,r[4].color="0x84cc16ff",r[4].show=1,a[4].populate(r[4]),S===!0&&(E-=1),o=a[1],r[5]={},a[5]=this.element({parent:o||"root"},S===!0?m:i),r[5].x=950,r[5].w=200,r[5].h=300,r[5].color="0xff0000ff",r[5].show=0,a[5].populate(r[5]),S===!0&&(E-=1),o=a[0],r[6]={},a[6]=this.element({parent:o||"root"},S===!0?m:i),r[6].y=380,a[6].populate(r[6]),S===!0&&(E-=1),o=a[6],r[7]={},a[7]=this.element({parent:o||"root"},S===!0?m:i),r[7].x=50,r[7].w=200,r[7].h=300,r[7].color="0xfde047ff",r[7].show=i.showNr,a[7].populate(r[7]),S===!0&&(E-=1),o=a[6],r[8]={},a[8]=this.element({parent:o||"root"},S===!0?m:i),r[8].x=350,r[8].w=200,r[8].h=300,r[8].color="0x0000ffff",r[8].show=i.hideNr,a[8].populate(r[8]),S===!0&&(E-=1),o=a[6],r[9]={},a[9]=this.element({parent:o||"root"},S===!0?m:i),r[9].x=650,r[9].w=200,r[9].h=300,r[9].color="0x84cc16ff",r[9].show=i.showBool,a[9].populate(r[9]),S===!0&&(E-=1),o=a[6],r[10]={},a[10]=this.element({parent:o||"root"},S===!0?m:i),r[10].x=950,r[10].w=200,r[10].h=300,r[10].color="0xff0000ff",r[10].show=i.hideBool,a[10].populate(r[10]),S===!0&&(E-=1),o=a[0],r[11]={},a[11]=this.element({parent:o||"root"},S===!0?m:i),r[11].y=720,a[11].populate(r[11]),S===!0&&(E-=1),o=a[11],r[12]={},a[12]=this.element({parent:o||"root"},S===!0?m:i),r[12].x=50,r[12].w=200,r[12].h=300,r[12].color="0x5eead4ff",r[12].show=i.showHideToggle,a[12].populate(r[12]),S===!0&&(E-=1),o=a[0],r[13]={},a[13]=this.element({parent:o||"root"},S===!0?m:i),r[13].y=40,r[13].x=1e3,a[13].populate(r[13]),S===!0&&(E-=1),A[14]=c.components&&c.components.Square||f.Square,o=a[13],r[14]={},a[14]=this.element({parent:o||"root"},S===!0?m:i),r[14].show=!0,R[14]=[],typeof A[14]<"u")for(let N in A[14][Symbol.for("config")].props)delete r[14][A[14][Symbol.for("config")].props[N]],R[14].push(A[14][Symbol.for("config")].props[N]);if(a[14].populate(r[14]),S===!0&&(E-=1),o=a[14],C[15]={},C[15].show=!0,k=C[15].is||"Square",f[15],typeof k=="string"){if(f[15]=c.components&&c.components[k]||f[k],!f[15])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[15]=k);if(a[15]=f[15].call(null,{props:C[15]},a[14],i),a[15][Symbol.for("slots")][0]?(o=a[15][Symbol.for("slots")][0],m=a[15],S=!0):o=a[15][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[16]=c.components&&c.components.Square||f.Square,o=a[13],r[16]={},a[16]=this.element({parent:o||"root"},S===!0?m:i),r[16].y=100,r[16].show=!1,R[16]=[],typeof A[16]<"u")for(let N in A[16][Symbol.for("config")].props)delete r[16][A[16][Symbol.for("config")].props[N]],R[16].push(A[16][Symbol.for("config")].props[N]);if(a[16].populate(r[16]),S===!0&&(E-=1),o=a[16],C[17]={},C[17].y=100,C[17].show=!1,k=C[17].is||"Square",f[17],typeof k=="string"){if(f[17]=c.components&&c.components[k]||f[k],!f[17])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[17]=k);if(a[17]=f[17].call(null,{props:C[17]},a[16],i),a[17][Symbol.for("slots")][0]?(o=a[17][Symbol.for("slots")][0],m=a[17],S=!0):o=a[17][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[18]=c.components&&c.components.Square||f.Square,o=a[13],r[18]={},a[18]=this.element({parent:o||"root"},S===!0?m:i),r[18].y=200,r[18].show=i.showHideToggle,R[18]=[],typeof A[18]<"u")for(let N in A[18][Symbol.for("config")].props)delete r[18][A[18][Symbol.for("config")].props[N]],R[18].push(A[18][Symbol.for("config")].props[N]);if(a[18].populate(r[18]),S===!0&&(E-=1),o=a[18],C[19]={},C[19].y=200,I=i.showHideToggle,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[19].show=I,k=C[19].is||"Square",f[19],typeof k=="string"){if(f[19]=c.components&&c.components[k]||f[k],!f[19])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[19]=k);return a[19]=f[19].call(null,{props:C[19]},a[18],i),a[19][Symbol.for("slots")][0]?(o=a[19][Symbol.for("slots")][0],m=a[19],S=!0):o=a[19][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),o=a[0],r[20]={},a[20]=this.element({parent:o||"root"},S===!0?m:i),r[20].y=40,r[20].x=1400,a[20].populate(r[20]),S===!0&&(E-=1),o=a[20],r[21]={},a[21]=this.element({parent:o||"root"},S===!0?m:i),r[21].w=80,r[21].h=80,r[21].show=!0,r[21].alpha=.8,r[21].color="0xff00e4ff",a[21].populate(r[21]),S===!0&&(E-=1),o=a[20],r[22]={},a[22]=this.element({parent:o||"root"},S===!0?m:i),r[22].y=100,r[22].w=80,r[22].h=80,r[22].show=!1,r[22].alpha=.8,r[22].color="0xff00e4ff",a[22].populate(r[22]),S===!0&&(E-=1),o=a[20],r[23]={},a[23]=this.element({parent:o||"root"},S===!0?m:i),r[23].y=200,r[23].w=80,r[23].h=80,r[23].show=i.showHideToggle,r[23].alpha=.8,r[23].color="0xff00e4ff",a[23].populate(r[23]),S===!0&&(E-=1),o=a[0],r[24]={},a[24]=this.element({parent:o||"root"},S===!0?m:i),r[24].x=1e3,r[24].y=380,r[24].direction="horizontal",r[24].gap=20,r[24].padding=20,r[24].color="0xffffffff",r[24].__layout=!0,a[24].populate(r[24]),S===!0&&(E-=1),o=a[24],r[25]={},a[25]=this.element({parent:o||"root"},S===!0?m:i),r[25].w=40,r[25].h=40,r[25].show=i.showHideToggle,r[25].color="0xbfdbfeff",a[25].populate(r[25]),S===!0&&(E-=1),o=a[24],r[26]={},a[26]=this.element({parent:o||"root"},S===!0?m:i),r[26].w=40,r[26].h=40,r[26].color="0x60a5faff",a[26].populate(r[26]),S===!0&&(E-=1),o=a[24],r[27]={},a[27]=this.element({parent:o||"root"},S===!0?m:i),r[27].w=40,r[27].h=40,r[27].color="0x2563ebff",a[27].populate(r[27]),S===!0&&(E-=1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[14]=null,C[15]=null,f[15]=null,A[16]=null,C[17]=null,f[17]=null,A[18]=null,C[19]=null,f[19]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[12].set("show",o.showHideToggle)},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[18]>"u"||skips[18].indexOf("show")===-1)&&i[18].set("show",o.showHideToggle)},function(o,i,c,f,x,w){i[19][Symbol.for("props")].show=o.showHideToggle},function(o,i,c,f,x,w){i[23].set("show",o.showHideToggle)},function(o,i,c,f,x,w){i[25].set("show",o.showHideToggle)}],context:{}},state(){return{showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready(){this.$setInterval(()=>{console.log("backstopjs:ready"),this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),ID=Oe.Component("Events",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].x=400,r[0].y=360,a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].w=280,r[1].h=280,r[1].color="0xe5e7ebff",r[1].x=i.x,r[1].y="-5",a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].w=250,r[2].h=250,r[2].x=10,r[2].y=10,r[2].color=i.colors[0],a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].w=250,r[3].h=250,r[3].x=290,r[3].y=10,r[3].color=i.colors[1],a[3].populate(r[3]),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].w=250,r[4].h=250,r[4].x=570,r[4].y=10,r[4].color=i.colors[2],a[4].populate(r[4]),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].w=250,r[5].h=250,r[5].x=850,r[5].y=10,r[5].color=i.colors[3],a[5].populate(r[5]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("x",o.x)}],context:{}},state(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x(){return this.count,this.count*280-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(h){const o=this.count-1;o===-1?this.parent.$focus(h):this.count=Math.max(o,0)},right(h){const o=this.count+1;o===4?this.parent.$focus(h):this.count=Math.min(o,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),MD=Oe.Component("SlotCard",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=300,r[0].h=500,r[0].effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],r[0].color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1][Symbol.for("isSlot")]=!0,r[1].x=20,r[1].y=20,a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].content=i.label,r[2].maxwidth=260,r[2].x=20,r[2].y=400,r[2].align="center",r[2].__textnode=!0,a[2].populate(r[2]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}},props:[{key:"label"}]}),RD=Oe.Component("NamedSlotCard",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=700,r[0].h=300,r[0].effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],r[0].color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].x=20,r[1].y=20,a[1].populate(r[1]),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].content="First slot",r[2].__textnode=!0,a[2].populate(r[2]),o=a[1],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3][Symbol.for("isSlot")]=!0,r[3].y=40,r[3].ref="first",a[3].populate(r[3]),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].x=200,r[4].y=20,a[4].populate(r[4]),o=a[4],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].content="Second slot",r[5].__textnode=!0,a[5].populate(r[5]),o=a[4],r[6]={},a[6]=this.element({parent:o||"root"},i),r[6][Symbol.for("isSlot")]=!0,r[6].y=40,r[6].ref="second",a[6].populate(r[6]),o=a[0],r[7]={},a[7]=this.element({parent:o||"root"},i),r[7].x=480,r[7].y=20,a[7].populate(r[7]),o=a[7],r[8]={},a[8]=this.element({parent:o||"root"},i),r[8].content="Third slot",r[8].__textnode=!0,a[8].populate(r[8]),o=a[7],r[9]={},a[9]=this.element({parent:o||"root"},i),r[9][Symbol.for("isSlot")]=!0,r[9].y=40,r[9].ref="third",a[9].populate(r[9]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}}}),kl=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],_D=Oe.Component("Components",{components:{SlotCard:MD,NamedSlotCard:RD,Card:g4,Square:Ju},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m=!1,S=0,E=[];if(r[0]={},a[0]=this.element({parent:o||"root"},m===!0?I:i),a[0].populate(r[0]),m===!0&&(S-=1),E[1]=c.components&&c.components.SlotCard||f.SlotCard,o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},m===!0?I:i),r[1].x=400,r[1].y=100,r[1].label="Element",R[1]=[],typeof E[1]<"u")for(let A in E[1][Symbol.for("config")].props)delete r[1][E[1][Symbol.for("config")].props[A]],R[1].push(E[1][Symbol.for("config")].props[A]);if(a[1].populate(r[1]),m===!0&&(S-=1),o=a[1],C[2]={},C[2].x=400,C[2].y=100,C[2].label="Element",k=C[2].is||"SlotCard",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "SlotCard" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);if(a[2]=f[2].call(null,{props:C[2]},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],I=a[2],m=!0):o=a[2][Symbol.for("children")][0],m===!0&&(S=2),r[3]={},a[3]=this.element({parent:o||"root"},m===!0?I:i),a[3].populate(r[3]),m===!0&&(S-=1),o=a[3],r[4]={},a[4]=this.element({parent:o||"root"},m===!0?I:i),r[4].color=i.color,r[4].w=100,r[4].h=100,a[4].populate(r[4]),m===!0&&(S-=1),m===!0&&S===0&&(m=!1),E[5]=c.components&&c.components.SlotCard||f.SlotCard,o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},m===!0?I:i),r[5].x=800,r[5].y=100,r[5].label="Component",R[5]=[],typeof E[5]<"u")for(let A in E[5][Symbol.for("config")].props)delete r[5][E[5][Symbol.for("config")].props[A]],R[5].push(E[5][Symbol.for("config")].props[A]);if(a[5].populate(r[5]),m===!0&&(S-=1),o=a[5],C[6]={},C[6].x=800,C[6].y=100,C[6].label="Component",k=C[6].is||"SlotCard",f[6],typeof k=="string"){if(f[6]=c.components&&c.components[k]||f[k],!f[6])throw new Error('Component "SlotCard" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[6]=k);if(a[6]=f[6].call(null,{props:C[6]},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],I=a[6],m=!0):o=a[6][Symbol.for("children")][0],m===!0&&(S=2),r[7]={},a[7]=this.element({parent:o||"root"},m===!0?I:i),a[7].populate(r[7]),m===!0&&(S-=1),E[8]=c.components&&c.components.Square||f.Square,o=a[7],r[8]={},a[8]=this.element({parent:o||"root"},m===!0?I:i),r[8].size=200,r[8].y=50,R[8]=[],typeof E[8]<"u")for(let A in E[8][Symbol.for("config")].props)delete r[8][E[8][Symbol.for("config")].props[A]],R[8].push(E[8][Symbol.for("config")].props[A]);if(a[8].populate(r[8]),m===!0&&(S-=1),o=a[8],C[9]={},C[9].size=200,C[9].y=50,k=C[9].is||"Square",f[9],typeof k=="string"){if(f[9]=c.components&&c.components[k]||f[k],!f[9])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[9]=k);if(a[9]=f[9].call(null,{props:C[9]},a[8],i),a[9][Symbol.for("slots")][0]?(o=a[9][Symbol.for("slots")][0],I=a[9],m=!0):o=a[9][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),m===!0&&S===0&&(m=!1),E[10]=c.components&&c.components.SlotCard||f.SlotCard,o=a[0],r[10]={},a[10]=this.element({parent:o||"root"},m===!0?I:i),r[10].x=1200,r[10].y=100,r[10].label="Element & Component",R[10]=[],typeof E[10]<"u")for(let A in E[10][Symbol.for("config")].props)delete r[10][E[10][Symbol.for("config")].props[A]],R[10].push(E[10][Symbol.for("config")].props[A]);if(a[10].populate(r[10]),m===!0&&(S-=1),o=a[10],C[11]={},C[11].x=1200,C[11].y=100,C[11].label="Element & Component",k=C[11].is||"SlotCard",f[11],typeof k=="string"){if(f[11]=c.components&&c.components[k]||f[k],!f[11])throw new Error('Component "SlotCard" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[11]=k);if(a[11]=f[11].call(null,{props:C[11]},a[10],i),a[11][Symbol.for("slots")][0]?(o=a[11][Symbol.for("slots")][0],I=a[11],m=!0):o=a[11][Symbol.for("children")][0],m===!0&&(S=3),r[12]={},a[12]=this.element({parent:o||"root"},m===!0?I:i),a[12].populate(r[12]),m===!0&&(S-=1),o=a[12],r[13]={},a[13]=this.element({parent:o||"root"},m===!0?I:i),r[13].color=i.color,r[13].w=100,r[13].h=100,a[13].populate(r[13]),m===!0&&(S-=1),E[14]=c.components&&c.components.Square||f.Square,o=a[12],r[14]={},a[14]=this.element({parent:o||"root"},m===!0?I:i),r[14].size=200,r[14].y=150,R[14]=[],typeof E[14]<"u")for(let A in E[14][Symbol.for("config")].props)delete r[14][E[14][Symbol.for("config")].props[A]],R[14].push(E[14][Symbol.for("config")].props[A]);if(a[14].populate(r[14]),m===!0&&(S-=1),o=a[14],C[15]={},C[15].size=200,C[15].y=150,k=C[15].is||"Square",f[15],typeof k=="string"){if(f[15]=c.components&&c.components[k]||f[k],!f[15])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[15]=k);if(a[15]=f[15].call(null,{props:C[15]},a[14],i),a[15][Symbol.for("slots")][0]?(o=a[15][Symbol.for("slots")][0],I=a[15],m=!0):o=a[15][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),m===!0&&S===0&&(m=!1),E[16]=c.components&&c.components.Card||f.Card,o=a[0],r[16]={},a[16]=this.element({parent:o||"root"},m===!0?I:i),r[16].x=400,r[16].y=700,r[16].size="small",R[16]=[],typeof E[16]<"u")for(let A in E[16][Symbol.for("config")].props)delete r[16][E[16][Symbol.for("config")].props[A]],R[16].push(E[16][Symbol.for("config")].props[A]);if(a[16].populate(r[16]),m===!0&&(S-=1),o=a[16],C[17]={},C[17].x=400,C[17].y=700,C[17].size="small",k=C[17].is||"Card",f[17],typeof k=="string"){if(f[17]=c.components&&c.components[k]||f[k],!f[17])throw new Error('Component "Card" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[17]=k);if(a[17]=f[17].call(null,{props:C[17]},a[16],i),a[17][Symbol.for("slots")][0]?(o=a[17][Symbol.for("slots")][0],I=a[17],m=!0):o=a[17][Symbol.for("children")][0],m===!0&&(S=2),r[18]={},a[18]=this.element({parent:o||"root"},m===!0?I:i),a[18].populate(r[18]),m===!0&&(S-=1),o=a[18],r[19]={},a[19]=this.element({parent:o||"root"},m===!0?I:i),r[19].color=i.color,r[19].w=100,r[19].h=100,a[19].populate(r[19]),m===!0&&(S-=1),m===!0&&S===0&&(m=!1),E[20]=c.components&&c.components.NamedSlotCard||f.NamedSlotCard,o=a[0],r[20]={},a[20]=this.element({parent:o||"root"},m===!0?I:i),r[20].x=800,r[20].y=700,R[20]=[],typeof E[20]<"u")for(let A in E[20][Symbol.for("config")].props)delete r[20][E[20][Symbol.for("config")].props[A]],R[20].push(E[20][Symbol.for("config")].props[A]);if(a[20].populate(r[20]),m===!0&&(S-=1),o=a[20],C[21]={},C[21].x=800,C[21].y=700,k=C[21].is||"NamedSlotCard",f[21],typeof k=="string"){if(f[21]=c.components&&c.components[k]||f[k],!f[21])throw new Error('Component "NamedSlotCard" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[21]=k);if(a[21]=f[21].call(null,{props:C[21]},a[20],i),a[21][Symbol.for("slots")][0]?(o=a[21][Symbol.for("slots")][0],I=a[21],m=!0):o=a[21][Symbol.for("children")][0],m===!0&&(S=5),r[22]={},a[22]=this.element({parent:o||"root"},m===!0?I:i),a[22].populate(r[22]),m===!0&&(S-=1),o=a[22],r[23]={},a[23]=this.element({parent:o||"root"},m===!0?I:i),r[23].color="0x0891b2ff",r[23].x=10,r[23].y=140,r[23].w=80,r[23].h=60,r[23].parent=I[Symbol.for("slots")]!==void 0&&Array.isArray(I[Symbol.for("slots")])===!0&&I[Symbol.for("slots")].filter(A=>A.ref==="second").shift()||o,r[23].slot="second",a[23].populate(r[23]),m===!0&&(S-=1),o=a[22],r[24]={},a[24]=this.element({parent:o||"root"},m===!0?I:i),r[24].color=i.color,r[24].w=100,r[24].h=100,r[24].parent=I[Symbol.for("slots")]!==void 0&&Array.isArray(I[Symbol.for("slots")])===!0&&I[Symbol.for("slots")].filter(A=>A.ref==="third").shift()||o,r[24].slot="third",a[24].populate(r[24]),m===!0&&(S-=1),E[25]=c.components&&c.components.Square||f.Square,o=a[22],r[25]={},a[25]=this.element({parent:o||"root"},m===!0?I:i),r[25].size=100,r[25].parent=I[Symbol.for("slots")]!==void 0&&Array.isArray(I[Symbol.for("slots")])===!0&&I[Symbol.for("slots")].filter(A=>A.ref==="first").shift()||o,r[25].slot="first",R[25]=[],typeof E[25]<"u")for(let A in E[25][Symbol.for("config")].props)delete r[25][E[25][Symbol.for("config")].props[A]],R[25].push(E[25][Symbol.for("config")].props[A]);if(a[25].populate(r[25]),m===!0&&(S-=1),o=a[25],C[26]={},C[26].size=100,C[26].slot="first",k=C[26].is||"Square",f[26],typeof k=="string"){if(f[26]=c.components&&c.components[k]||f[k],!f[26])throw new Error('Component "Square" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[26]=k);return a[26]=f[26].call(null,{props:C[26]},a[25],i),a[26][Symbol.for("slots")][0]?(o=a[26][Symbol.for("slots")][0],I=a[26],m=!0):o=a[26][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),o=a[22],r[27]={},a[27]=this.element({parent:o||"root"},m===!0?I:i),r[27].color="0x4d7c0fff",r[27].x=40,r[27].y=40,r[27].w=40,r[27].h=60,r[27].parent=I[Symbol.for("slots")]!==void 0&&Array.isArray(I[Symbol.for("slots")])===!0&&I[Symbol.for("slots")].filter(A=>A.ref==="second").shift()||o,r[27].slot="second",a[27].populate(r[27]),m===!0&&(S-=1),m===!0&&S===0&&(m=!1),{elms:a,cleanup:()=>{I=null,i=null,o=null,E[1]=null,C[2]=null,f[2]=null,E[5]=null,C[6]=null,f[6]=null,E[8]=null,C[9]=null,f[9]=null,E[10]=null,C[11]=null,f[11]=null,E[14]=null,C[15]=null,f[15]=null,E[16]=null,C[17]=null,f[17]=null,E[20]=null,C[21]=null,f[21]=null,E[25]=null,C[26]=null,f[26]=null,E.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[4].set("color",o.color)},function(o,i,c,f,x,w){i[13].set("color",o.color)},function(o,i,c,f,x,w){i[19].set("color",o.color)},function(o,i,c,f,x,w){i[24].set("color",o.color)}],context:{}},state(){return{color:kl[0]}},hooks:{ready(){this.$setInterval(()=>{const h=kl.indexOf(this.color)+1;this.color=h<=kl.length?kl[h]:kl[0]},600)}}}),LD=Oe.Component("MemoryCard",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=320,r[0].h=200,r[0].x=i.col*360,r[0].y=i.row*250,r[0].scale={transition:i.scale},r[0].rotation={transition:i.disabled?-2:0},a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].h={transition:i.h},r[1].w=320,r[1].y=125,r[1].mount="{y: 0.5}",r[1].color={transition:i.disabled?"#ccc":"#fff"},r[1].src=i.image+"&w=320&h=200",r[1].effects=[{type:"radius",props:{radius:6}}],r[1].show=i.open,a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].h={transition:i.h},r[2].w=320,r[2].y=125,r[2].mount="{y: 0.5}",r[2].color=i.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},r[2].effects=[{type:"radius",props:{radius:6}}],a[2].populate(r[2]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("scale",{transition:o.scale})},function(o,i,c,f,x,w){i[0].set("rotation",{transition:o.disabled?-2:0})},function(o,i,c,f,x,w){i[1].set("h",{transition:o.h})},function(o,i,c,f,x,w){i[1].set("color",{transition:o.disabled?"#ccc":"#fff"})},function(o,i,c,f,x,w){i[1].set("src",o.image+"&w=320&h=200")},function(o,i,c,f,x,w){i[1].set("effects",[{type:"radius",props:{radius:6}}])},function(o,i,c,f,x,w){i[1].set("show",o.open)},function(o,i,c,f,x,w){i[2].set("h",{transition:o.h})},function(o,i,c,f,x,w){i[2].set("color",o.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(o,i,c,f,x,w){i[2].set("effects",[{type:"radius",props:{radius:6}}])}],context:{}},props:["row","col","image","description","index"],state(){return{disabled:!1,open:!1,h:200,scale:1,announcement:null}},hooks:{init(){this.$listen("closeMemoryCard",h=>{h===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",h=>{h===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(h){this.scale=1.08;const o="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.announcement=this.$announcer.speak(o)},unfocus(){this.scale=1,this.announcement.cancel()}},input:{enter(){if(!this.disabled){if(this.open){this.$announcer.speak("Card already open. Choose another");return}this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)}}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),DD=Oe.Component("Toggle",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].w=i.width,r[1].h=i.height,r[1].color="0x121212ff",r[1].alpha={transition:i.hasFocus?0:1},r[1].effects=[{type:"radius",props:{radius:i.radius}},{type:"border",props:{width:2,color:"0x888888ff"}}],a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].w=i.width,r[2].h=i.height,r[2].color="0x121212ff",r[2].alpha={transition:i.hasFocus?1:0},r[2].effects=[{type:"radius",props:{radius:i.radius}},{type:"border",props:{width:4,color:"0xffffffff"}}],a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].w=i.innerWidth,r[3].h=i.innerHeight,r[3].mount=.5,r[3].x={transition:i.toggled?i.width-i.offset:i.offset},r[3].y=i.height/2,r[3].color={transition:i.toggled?"#fff":"#888"},r[3].effects=[{type:"radius",props:{radius:i.innerRadius}}],a[3].populate(r[3]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("alpha",{transition:o.hasFocus?0:1})},function(o,i,c,f,x,w){i[1].set("effects",[{type:"radius",props:{radius:o.radius}},{type:"border",props:{width:2,color:"0x888888ff"}}])},function(o,i,c,f,x,w){i[2].set("alpha",{transition:o.hasFocus?1:0})},function(o,i,c,f,x,w){i[2].set("effects",[{type:"radius",props:{radius:o.radius}},{type:"border",props:{width:4,color:"0xffffffff"}}])},function(o,i,c,f,x,w){i[3].set("x",{transition:o.toggled?o.width-o.offset:o.offset})},function(o,i,c,f,x,w){i[3].set("color",{transition:o.toggled?"#fff":"#888"})},function(o,i,c,f,x,w){i[3].set("effects",[{type:"radius",props:{radius:o.innerRadius}}])}],context:{}},props:["toggled"],state(){return{borderWidth:2,height:40,innerHeight:18,innerRadius:9,innerWidth:18,radius:20,width:60,offset:20}}}),dC=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],PD=Oe.Component("Announcer",{components:{MemoryCard:LD,Toggle:DD},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E,A=!1,N=0,K=[];if(r[0]={},a[0]=this.element({parent:o||"root"},A===!0?E:i),a[0].populate(r[0]),A===!0&&(N-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},A===!0?E:i),r[1].font="raleway",r[1].size=80,r[1].color="0xffffffff",r[1].content="Let's play memory!",r[1].x=580,r[1].y=60,r[1].__textnode=!0,a[1].populate(r[1]),A===!0&&(N-=1),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},A===!0?E:i),r[2].font="kalam",r[2].size=40,r[2].color="0xb91c1cff",r[2].content="the Accessible edition :)",r[2].x=1200,r[2].y=170,r[2].rotation="-6",r[2].__textnode=!0,a[2].populate(r[2]),A===!0&&(N-=1),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},A===!0?E:i),r[3].size=26,r[3].color="0xffffffff",r[3].content="Announcer on / off",r[3].x=260,r[3].y=200,r[3].__textnode=!0,a[3].populate(r[3]),A===!0&&(N-=1),K[4]=c.components&&c.components.Toggle||f.Toggle,o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},A===!0?E:i),r[4].ref="toggle",r[4].x=525,r[4].y=200,r[4].toggled=i.toggle,I[4]=[],typeof K[4]<"u")for(let he in K[4][Symbol.for("config")].props)delete r[4][K[4][Symbol.for("config")].props[he]],I[4].push(K[4][Symbol.for("config")].props[he]);if(a[4].populate(r[4]),A===!0&&(N-=1),o=a[4],R[5]={},R[5].ref="toggle",R[5].x=525,R[5].y=200,S=i.toggle,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[5].toggled=S,m=R[5].is||"Toggle",f[5],typeof m=="string"){if(f[5]=c.components&&c.components[m]||f[m],!f[5])throw new Error('Component "Toggle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[5]=m);a[5]=f[5].call(null,{props:R[5]},a[4],i),a[5][Symbol.for("slots")][0]?(o=a[5][Symbol.for("slots")][0],E=a[5],A=!0):o=a[5][Symbol.for("children")][0],A===!0&&N===0&&(A=!1),o=a[0],r[6]={},a[6]=this.element({parent:o||"root"},A===!0?E:i),r[6].x=260,r[6].y=260,a[6].populate(r[6]),A===!0&&(N-=1),o=a[6],k[7]=[];let Se,Me;C[7]=(he=[],oe,pe)=>{const D=w(he),ne=new Set;let le=D.length;const me={};for(Se=me.from||0,Me=("to"in me)?me.to:D.length;le--;){const z=D[le];le<Me&&le>=Se&&ne.add(""+z.id)}let V=pe.length;for(;V--;)if(ne.has(pe[V])===!1){const z=pe[V];oe[7][z]&&oe[7][z].destroy(),oe[7][z]=null,delete oe[7][z],oe[8][z]&&oe[8][z].destroy(),oe[8][z]=null,delete oe[8][z]}pe.length=0;const re=D.length,H=[];for(let z=0;z<re;z++){if(z<Se||z>=Me)continue;const se=Object.create(i);if(o=oe[6],se.card=D[z],se.index=z,se.key=""+se.card.id,pe.push(se.key),K[7]=c.components&&c.components.MemoryCard||f.MemoryCard,oe[7]===void 0&&(oe[7]={}),r[7]={},oe[7][se.key]===void 0&&(oe[7][se.key]=this.element({parent:o||"root"},A===!0?E:i)),r[7].col=se.index%4,r[7].row=Math.floor(se.index/4)%3,r[7].image=se.card.image,r[7].description=se.card.description,r[7].ref="card"+se.index,r[7].index=se.index,I[7]=[],typeof K[7]<"u")for(let ke in K[7][Symbol.for("config")].props)delete r[7][K[7][Symbol.for("config")].props[ke]],I[7].push(K[7][Symbol.for("config")].props[ke]);if(oe[7][se.key].nodeId===void 0&&(oe[7][se.key].populate(r[7]),A===!0&&(N-=1)),oe[8]===void 0&&(oe[8]={}),o=oe[7][se.key],R[8]={},oe[8][se.key]===void 0){if(S=se.index%4,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[8].col=S,S=Math.floor(se.index/4)%3,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[8].row=S,R[8].image=se.card.image,R[8].description=se.card.description,S="card"+se.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[8].ref=S,S=se.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[8].index=S,m=R[8].is||"MemoryCard",f[8],typeof m=="string"){if(f[8]=c.components&&c.components[m]||f[m],!f[8])throw new Error('Component "MemoryCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[8]=m);oe[8][se.key]=f[8].call(null,{props:R[8]},oe[7][se.key],i),oe[8][se.key][Symbol.for("slots")][0]?(o=oe[8][se.key][Symbol.for("slots")][0],E=oe[8][se.key],A=!0):o=oe[8][se.key][Symbol.for("children")][0]}let we=()=>{(typeof I>"u"||typeof I[7]>"u"||I[7].indexOf("col")===-1)&&oe[7][se.key].set("col",se.index%4)};x(we,null),H.push(we),i[Symbol.for("effects")].push(we);let Fe=()=>{(typeof I>"u"||typeof I[7]>"u"||I[7].indexOf("row")===-1)&&oe[7][se.key].set("row",Math.floor(se.index/4)%3)};x(Fe,null),H.push(Fe),i[Symbol.for("effects")].push(Fe);let Je=()=>{(typeof I>"u"||typeof I[7]>"u"||I[7].indexOf("ref")===-1)&&oe[7][se.key].set("ref","card"+se.index)};x(Je,null),H.push(Je),i[Symbol.for("effects")].push(Je);let $e=()=>{(typeof I>"u"||typeof I[7]>"u"||I[7].indexOf("index")===-1)&&oe[7][se.key].set("index",se.index)};x($e,null),H.push($e),i[Symbol.for("effects")].push($e),oe[8][se.key][Symbol.for("props")].col=se.index%4,oe[8][se.key][Symbol.for("props")].row=Math.floor(se.index/4)%3,oe[8][se.key][Symbol.for("props")].ref="card"+se.index,oe[8][se.key][Symbol.for("props")].index=se.index}return H};let ue=()=>{C[7](i.cards,a,k[7])};return i[Symbol.for("effects")].push(ue),x(ue,["cards"]),{elms:a,cleanup:()=>{S=null,E=null,i=null,o=null,K[4]=null,R[5]=null,f[5]=null,k[7].length=0,C[7]=null,K[7]=null,R[8]=null,f[8]=null,ue=null,K.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[4]>"u"||skips[4].indexOf("toggled")===-1)&&i[4].set("toggled",o.toggle)},function(o,i,c,f,x,w){i[5][Symbol.for("props")].toggled=o.toggle}],context:{}},state(){return{cards:dC.concat(dC).map((h,o)=>({...h,id:`card${o}`})),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0,toggle:!0,focusable:["toggle"],focusIndex:0}},hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",h=>{this.openCards.length<2&&this.openCards.push(h),this.openCards.length===2&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},ready(){this.$announcer.enable(),this.focusedRow=0,this.focusedCol=0},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(h){if(this.focusedRow===-1){this.focusedRow=0;return}h=h+this.focusedRow*4,this.$select("card"+h).$focus()},focusedRow(h){if(this.focusedCol===-1){this.focusedCol=0;return}h=this.focusedCol+h*4,this.$select("card"+h).$focus()}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){this.focusIndex===0&&(this.focusedCol===0?this.focusedRow===0?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1))},right(){this.focusIndex===0&&(this.focusedCol===3?this.focusedRow===2?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1))},up(){this.focusIndex===0&&(this.focusedRow===0?(this.$select("toggle").$focus(),this.focusIndex=-1):this.focusedRow=Math.max(0,this.focusedRow-1))},down(){this.focusIndex===-1?(this.$select("card0").$focus(),this.focusIndex=0,this.focusedRow=0,this.focusedCol=0):this.focusedRow===2?this.$announcer.speak("You are already at the last card"):this.focusedRow=Math.min(2,this.focusedRow+1)},enter(){this.focusIndex===-1&&(this.toggle=!this.toggle,console.log("Toggle:",this.toggle),this.toggle?this.$announcer.enable():this.$announcer.disable())}}}),Al=(h,o)=>Math.floor(Math.random()*(o-h+1)+h),OD=Oe.Component("Item",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].src="assets/blits-b-small.png",r[0].w=96,r[0].h=168,r[0].x={transition:{value:i.x,duration:2900}},r[0].y={transition:{value:i.y,duration:2900}},r[0].rotation={transition:{value:i.rotation,duration:2900}},r[0].scale={transition:{value:i.scale,duration:1e3}},a[0].populate(r[0]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("x",{transition:{value:o.x,duration:2900}})},function(o,i,c,f,x,w){i[0].set("y",{transition:{value:o.y,duration:2900}})},function(o,i,c,f,x,w){i[0].set("rotation",{transition:{value:o.rotation,duration:2900}})},function(o,i,c,f,x,w){i[0].set("scale",{transition:{value:o.scale,duration:1e3}})}],context:{}},state(){return{x:Al(20,1560),y:Al(20,720),rotation:0,scale:.1}},hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=Al(20,1740),this.y=Al(20,900),this.rotation=Al(10,360)},3e3)}}}),ND=Oe.Component("Exponential",{components:{Item:OD},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E=!1,A=[];r[0]={},a[0]=this.element({parent:o||"root"},E===!0?S:i),a[0].populate(r[0]),o=a[0],k[1]=[];let N,K;C[1]=(Me=[],ue,he)=>{const oe=w(Me),pe=new Set;let D=oe.length;const ne={};for(N=ne.from||0,K=("to"in ne)?ne.to:oe.length;D--;){const re=oe[D];D<K&&D>=N&&pe.add(""+re)}let le=he.length;for(;le--;)if(pe.has(he[le])===!1){const re=he[le];ue[1][re]&&ue[1][re].destroy(),ue[1][re]=null,delete ue[1][re],ue[2][re]&&ue[2][re].destroy(),ue[2][re]=null,delete ue[2][re]}he.length=0;const me=oe.length,V=[];for(let re=0;re<me;re++){if(re<N||re>=K)continue;const H=Object.create(i);if(o=ue[0],H.item=oe[re],H.undefined=re,H.key=""+H.item,he.push(H.key),A[1]=c.components&&c.components.Item||f.Item,ue[1]===void 0&&(ue[1]={}),r[1]={},ue[1][H.key]===void 0&&(ue[1][H.key]=this.element({parent:o||"root"},E===!0?S:i)),I[1]=[],typeof A[1]<"u")for(let z in A[1][Symbol.for("config")].props)delete r[1][A[1][Symbol.for("config")].props[z]],I[1].push(A[1][Symbol.for("config")].props[z]);if(ue[1][H.key].nodeId===void 0&&ue[1][H.key].populate(r[1]),ue[2]===void 0&&(ue[2]={}),o=ue[1][H.key],R[2]={},ue[2][H.key]===void 0){if(m=R[2].is||"Item",f[2],typeof m=="string"){if(f[2]=c.components&&c.components[m]||f[m],!f[2])throw new Error('Component "Item" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[2]=m);ue[2][H.key]=f[2].call(null,{props:R[2]},ue[1][H.key],i),ue[2][H.key][Symbol.for("slots")][0]?(o=ue[2][H.key][Symbol.for("slots")][0],S=ue[2][H.key],E=!0):o=ue[2][H.key][Symbol.for("children")][0]}}return V};let Se=()=>{C[1](i.items,a,k[1])};return i[Symbol.for("effects")].push(Se),x(Se,["items"]),{elms:a,cleanup:()=>{S=null,i=null,o=null,k[1].length=0,C[1]=null,A[1]=null,R[2]=null,f[2]=null,Se=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[],context:{}},state(){return{items:[]}},hooks:{ready(){const h=this.$setInterval(()=>{for(let o=0;o<=Math.floor(this.items.length/10);o++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(h)},2e3)}}}),y4=Oe.Component("Ball",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=100,r[0].h=100,r[0].src="/assets/basketball.png",a[0].populate(r[0]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[],context:{}},hooks:{attach(){this.$emit("ballUpdate","Attached to render tree")},detach(){this.$emit("ballUpdate","Detached from render tree")},enter(){this.$emit("ballUpdate","Entered viewport")},exit(){this.$emit("ballUpdate","Exited viewport")}}}),th=(h,o)=>Math.floor(Math.random()*(o-h+1)+h),UD=Oe.Component("Viewport",{components:{Ball:y4},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),a[0].populate(r[0]),S===!0&&(E-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].size=32,r[1].x=960,r[1].y=540,r[1].mount=.5,r[1].content=i.status.join(`
`),r[1].lineheight=52,r[1].maxwidth=500,r[1].__textnode=!0,a[1].populate(r[1]),S===!0&&(E-=1),A[2]=c.components&&c.components.Ball||f.Ball,o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},S===!0?m:i),r[2].x={transition:{value:i.x,duration:1250}},r[2].y={transition:{value:i.y,duration:1250}},r[2].rotation={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},r[2].w=100,r[2].h=100,R[2]=[],typeof A[2]<"u")for(let N in A[2][Symbol.for("config")].props)delete r[2][A[2][Symbol.for("config")].props[N]],R[2].push(A[2][Symbol.for("config")].props[N]);if(a[2].populate(r[2]),S===!0&&(E-=1),o=a[2],C[3]={},I={transition:{value:i.x,duration:1250}},Array.isArray(I)===!0&&(I=w(I).slice(0)),C[3].x=I,I={transition:{value:i.y,duration:1250}},Array.isArray(I)===!0&&(I=w(I).slice(0)),C[3].y=I,I={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},Array.isArray(I)===!0&&(I=w(I).slice(0)),C[3].rotation=I,C[3].w=100,C[3].h=100,k=C[3].is||"Ball",f[3],typeof k=="string"){if(f[3]=c.components&&c.components[k]||f[k],!f[3])throw new Error('Component "Ball" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[3]=k);return a[3]=f[3].call(null,{props:C[3]},a[2],i),a[3][Symbol.for("slots")][0]?(o=a[3][Symbol.for("slots")][0],m=a[3],S=!0):o=a[3][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[2]=null,C[3]=null,f[3]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("content",o.status.join(`
`))},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[2]>"u"||skips[2].indexOf("x")===-1)&&i[2].set("x",{transition:{value:o.x,duration:1250}})},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[2]>"u"||skips[2].indexOf("y")===-1)&&i[2].set("y",{transition:{value:o.y,duration:1250}})},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[2]>"u"||skips[2].indexOf("rotation")===-1)&&i[2].set("rotation",{transition:{value:o.rotation,duration:1400,easing:"ease-in-out"}})},function(o,i,c,f,x,w){i[3][Symbol.for("props")].x={transition:{value:o.x,duration:1250}}},function(o,i,c,f,x,w){i[3][Symbol.for("props")].y={transition:{value:o.y,duration:1250}}},function(o,i,c,f,x,w){i[3][Symbol.for("props")].rotation={transition:{value:o.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state(){return{x:-400,y:-400,rotation:0,status:[],count:1}},hooks:{ready(){this.$listen("ballUpdate",h=>{this.status.unshift(`${this.count++} -  ${h}`),this.status.length=Math.min(this.status.length,8)}),this.rotation=th(-90,90),this.x=1820/2,this.y=980/2,this.$setInterval(()=>{this.x=th(-300,2220),this.y=th(-300,1380),this.rotation=th(-90,90)},2500)}}}),ql={code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=1920,r[0].h=1080,r[0].color="0xffffffff",r[0].effects=[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}],a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].show=i.up!==void 0,a[1].populate(r[1]),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].src="assets/arrow.png",r[2].w=100,r[2].h=44,r[2].x=960,r[2].y=40,r[2].mount="{x: 0.5}",a[2].populate(r[2]),o=a[1],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].content=i.up&&i.up.toUpperCase(),r[3].x=960,r[3].y=100,r[3].size=76,r[3].mount="{x: 0.5}",r[3].__textnode=!0,a[3].populate(r[3]),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].show=i.right!==void 0,a[4].populate(r[4]),o=a[4],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].src="assets/arrow.png",r[5].w=100,r[5].h=44,r[5].x=1900,r[5].y=540,r[5].mount="{x: 1, y: 0.5}",r[5].rotation=90,a[5].populate(r[5]),o=a[4],r[6]={},a[6]=this.element({parent:o||"root"},i),r[6].content=i.right&&i.right.toUpperCase(),r[6].x=1760,r[6].y=540,r[6].size=76,r[6].rotation=90,r[6].mount=.5,r[6].__textnode=!0,a[6].populate(r[6]),o=a[0],r[7]={},a[7]=this.element({parent:o||"root"},i),r[7].show=i.down!==void 0,a[7].populate(r[7]),o=a[7],r[8]={},a[8]=this.element({parent:o||"root"},i),r[8].src="assets/arrow.png",r[8].w=100,r[8].h=44,r[8].x=960,r[8].y=1040,r[8].mount="{x: 0.5, y: 1}",r[8].rotation=180,a[8].populate(r[8]),o=a[7],r[9]={},a[9]=this.element({parent:o||"root"},i),r[9].content=i.down&&i.down.toUpperCase(),r[9].x=960,r[9].y=980,r[9].size=76,r[9].mount="{x: 0.5, y: 1}",r[9].__textnode=!0,a[9].populate(r[9]),o=a[0],r[10]={},a[10]=this.element({parent:o||"root"},i),r[10].show=i.left!==void 0,a[10].populate(r[10]),o=a[10],r[11]={},a[11]=this.element({parent:o||"root"},i),r[11].src="assets/arrow.png",r[11].w=100,r[11].h=44,r[11].x=40,r[11].y=540,r[11].mount="{ y: 0.5}",r[11].rotation="-90",a[11].populate(r[11]),o=a[10],r[12]={},a[12]=this.element({parent:o||"root"},i),r[12].content=i.left&&i.left.toUpperCase(),r[12].x=180,r[12].y=540,r[12].size=76,r[12].mount=.5,r[12].rotation="-90",r[12].__textnode=!0,a[12].populate(r[12]),o=a[0],r[13]={},a[13]=this.element({parent:o||"root"},i),r[13].content=i.pageTitle,r[13].font="raleway",r[13].x=960,r[13].y=540,r[13].size=240,r[13].mount=.5,r[13].__textnode=!0,a[13].populate(r[13]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("effects",[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}])},function(o,i,c,f,x,w){i[1].set("show",o.up!==void 0)},function(o,i,c,f,x,w){i[3].set("content",o.up&&o.up.toUpperCase())},function(o,i,c,f,x,w){i[4].set("show",o.right!==void 0)},function(o,i,c,f,x,w){i[6].set("content",o.right&&o.right.toUpperCase())},function(o,i,c,f,x,w){i[7].set("show",o.down!==void 0)},function(o,i,c,f,x,w){i[9].set("content",o.down&&o.down.toUpperCase())},function(o,i,c,f,x,w){i[10].set("show",o.left!==void 0)},function(o,i,c,f,x,w){i[12].set("content",o.left&&o.left.toUpperCase())},function(o,i,c,f,x,w){i[13].set("content",o.pageTitle)}],context:{}},props:[{key:"page",cast:Object}],computed:{pageTitle(){return this.page&&this.page.title||this.title}},state(){return{title:"Start",up:"up",right:"right",down:"down",left:"left"}}},BD=Oe.Component("RouterHookPage",{...ql,state(){return{title:"Start",down:"episode flow",right:"movie flow"}},input:{right(){this.$router.to("/examples/router-hooks/movie")},down(){this.$router.to("/examples/router-hooks/episode/1")}}}),FD=Oe.Component("RouterHookMovie",{...ql,state(){return{title:"Movie",left:"Back",right:"Rating"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/rating")}}}),jD=Oe.Component("RouterHookRating",{...ql,state(){return{title:"Rating",left:"Back",right:"TO START"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/")}}}),$D=Oe.Component("RouterHookEpisode",{...ql,state(){return{title:"Episode",left:"Back",right:"NEXT EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to(`/examples/router-hooks/episode/${this.page.id+1}`,void 0,{inHistory:!1})}}}),zD=Oe.Component("RouterHookEpisode",{...ql,state(){return{title:`Episodes 
 overview`,right:"FIRST EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/episode/1",void 0,{inHistory:!1})}}}),Hr={slideInOutLeft:{before:{prop:"x",value:"100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"-100%",duration:400}},slideInOutRight:{before:{prop:"x",value:"-100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"100%",duration:400}},slideInOutUp:{before:{prop:"y",value:"100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"-100%",duration:400}},slideInOutDown:{before:{prop:"y",value:"-100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"100%",duration:400}}},VD=[{path:"/examples/router-hooks",component:BD,hooks:{async before(h,o){return o&&o.path==="examples/router-hooks/movie"&&(h.transition=Hr.slideInOutRight),o&&o.path==="examples/router-hooks/rating"&&(h.transition=Hr.slideInOutLeft),o&&o.path.indexOf("episode")>-1&&(h.transition=Hr.slideInOutDown),h}}},{path:"/examples/router-hooks/episode/:id",component:$D,hooks:{before(h,o){o&&o.path.indexOf("episode")>-1&&(h.transition=Hr.slideInOutLeft);const{id:i}=h.params;return i>5?"/examples/router-hooks/":(h.data.page={id:parseInt(i),title:`Episode ${i}`},h)}},transition:Hr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/episode",component:zD,transition:Hr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/movie",component:FD,hooks:{before(h,o){return o&&o.path==="examples/router-hooks"&&(h.transition=Hr.slideInOutLeft),o&&o.path==="examples/router-hooks/rating"&&(h.transition=Hr.slideInOutRight),h}}},{path:"/examples/router-hooks/rating",component:jD,transition:Hr.slideInOutLeft}],HD=Oe.Component("Resize",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].y=30,r[1].content="fit (Resize Mode) sample",r[1].maxwidth=1920,r[1].align="center",r[1].__textnode=!0,a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].x={transition:{value:i.pages.x1,duration:200}},r[2].y=90,a[2].populate(r[2]),o=a[2],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].x=100,r[3].content="Image dimensions: 2560 X 1440",r[3].__textnode=!0,a[3].populate(r[3]),o=a[2],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].x=100,r[4].y=80,r[4].content=i.titles.t1,r[4].__textnode=!0,a[4].populate(r[4]),o=a[2],r[5]={},a[5]=this.element({parent:o||"root"},i),r[5].y=150,r[5].x=100,a[5].populate(r[5]),o=a[5],r[6]={},a[6]=this.element({parent:o||"root"},i),r[6].w=i.w,r[6].h=i.w-300,r[6].src=i.img,r[6].fit="{type: 'cover', position: { y: 0 } }",a[6].populate(r[6]),o=a[5],r[7]={},a[7]=this.element({parent:o||"root"},i),r[7].w=i.w,r[7].h=i.w-300,r[7].src=i.img,r[7].fit="{ type: 'cover', position: { y: 0.5 } }",r[7].x=600,a[7].populate(r[7]),o=a[5],r[8]={},a[8]=this.element({parent:o||"root"},i),r[8].w=i.w,r[8].h=i.w-300,r[8].src=i.img,r[8].fit="{ type: 'cover', position: { y: 1 } }",r[8].x=1200,a[8].populate(r[8]),o=a[2],r[9]={},a[9]=this.element({parent:o||"root"},i),r[9].x=100,r[9].y=500,r[9].content=i.titles.t2,r[9].__textnode=!0,a[9].populate(r[9]),o=a[2],r[10]={},a[10]=this.element({parent:o||"root"},i),r[10].y=600,r[10].x=100,a[10].populate(r[10]),o=a[10],r[11]={},a[11]=this.element({parent:o||"root"},i),r[11].w=i.w,r[11].h=i.w-150,r[11].src=i.img,r[11].fit="{ type: 'cover', position: { x: 0 } }",a[11].populate(r[11]),o=a[10],r[12]={},a[12]=this.element({parent:o||"root"},i),r[12].w=i.w,r[12].h=i.w-150,r[12].src=i.img,r[12].fit="{ type: 'cover', position: { x: 0.5 } }",r[12].x=600,a[12].populate(r[12]),o=a[10],r[13]={},a[13]=this.element({parent:o||"root"},i),r[13].w=i.w,r[13].h=i.w-150,r[13].src=i.img,r[13].fit="{ type: 'cover', position: { x: 1 } }",r[13].x=1200,a[13].populate(r[13]),o=a[0],r[14]={},a[14]=this.element({parent:o||"root"},i),r[14].x={transition:{value:i.pages.x2,duration:200}},r[14].y=90,a[14].populate(r[14]),o=a[14],r[15]={},a[15]=this.element({parent:o||"root"},i),r[15].x=100,r[15].content="Image dimensions: 1440 X 2560",r[15].__textnode=!0,a[15].populate(r[15]),o=a[14],r[16]={},a[16]=this.element({parent:o||"root"},i),r[16].x=100,r[16].y=80,r[16].content=i.titles.t3,r[16].__textnode=!0,a[16].populate(r[16]),o=a[14],r[17]={},a[17]=this.element({parent:o||"root"},i),r[17].y=150,r[17].x=100,a[17].populate(r[17]),o=a[17],r[18]={},a[18]=this.element({parent:o||"root"},i),r[18].w=i.w,r[18].h=i.w-200,r[18].src=i.img1,r[18].fit="{ type: 'cover', position: { y: 0, x: 0 } }",a[18].populate(r[18]),o=a[17],r[19]={},a[19]=this.element({parent:o||"root"},i),r[19].w=i.w,r[19].h=i.w-200,r[19].src=i.img1,r[19].fit="{ type: 'cover', position: { y: 0.5, x: 0.5 } }",r[19].x=600,a[19].populate(r[19]),o=a[17],r[20]={},a[20]=this.element({parent:o||"root"},i),r[20].w=i.w,r[20].h=i.w-200,r[20].src=i.img1,r[20].fit="{ type: 'cover', position: { y: 1, x: 1 } }",r[20].x=1200,a[20].populate(r[20]),o=a[14],r[21]={},a[21]=this.element({parent:o||"root"},i),r[21].x=100,r[21].y=500,r[21].content=i.titles.t4,r[21].__textnode=!0,a[21].populate(r[21]),o=a[14],r[22]={},a[22]=this.element({parent:o||"root"},i),r[22].y=570,r[22].x=100,a[22].populate(r[22]),o=a[22],r[23]={},a[23]=this.element({parent:o||"root"},i),r[23].w=i.w-350,r[23].h=i.w-100,r[23].src=i.img1,r[23].fit="{ type: 'cover', position: { x: 0 } }",a[23].populate(r[23]),o=a[22],r[24]={},a[24]=this.element({parent:o||"root"},i),r[24].w=i.w-350,r[24].h=i.w-100,r[24].src=i.img1,r[24].fit="{ type: 'cover', position: { x: 0.25 } }",r[24].x=250,a[24].populate(r[24]),o=a[22],r[25]={},a[25]=this.element({parent:o||"root"},i),r[25].w=i.w-350,r[25].h=i.w-100,r[25].src=i.img1,r[25].fit="{ type: 'cover', position: { x: 0.5 } }",r[25].x=500,a[25].populate(r[25]),o=a[22],r[26]={},a[26]=this.element({parent:o||"root"},i),r[26].w=i.w-350,r[26].h=i.w-100,r[26].src=i.img1,r[26].fit="{ type: 'cover', position: { x: 0.75 } }",r[26].x=750,a[26].populate(r[26]),o=a[22],r[27]={},a[27]=this.element({parent:o||"root"},i),r[27].w=i.w-350,r[27].h=i.w-100,r[27].src=i.img1,r[27].fit="{ type: 'cover', position: { x: 1 } }",r[27].x=1e3,a[27].populate(r[27]),o=a[0],r[28]={},a[28]=this.element({parent:o||"root"},i),r[28].x={transition:{value:i.pages.x3,duration:200}},r[28].y=90,a[28].populate(r[28]),o=a[28],r[29]={},a[29]=this.element({parent:o||"root"},i),r[29].x=100,r[29].content="Image dimensions: 2560 X 1440",r[29].__textnode=!0,a[29].populate(r[29]),o=a[28],r[30]={},a[30]=this.element({parent:o||"root"},i),r[30].x=100,r[30].y=80,r[30].content=i.titles.t5,r[30].__textnode=!0,a[30].populate(r[30]),o=a[28],r[31]={},a[31]=this.element({parent:o||"root"},i),r[31].y=150,r[31].x=100,r[31].w=i.w+100,r[31].h=i.w-200,r[31].color="0x000000ff",a[31].populate(r[31]),o=a[31],r[32]={},a[32]=this.element({parent:o||"root"},i),r[32].w=i.w+100,r[32].h=i.w-200,r[32].src=i.img,r[32].fit="contain",a[32].populate(r[32]),o=a[28],r[33]={},a[33]=this.element({parent:o||"root"},i),r[33].x=100,r[33].y=500,r[33].content=i.titles.t6,r[33].__textnode=!0,a[33].populate(r[33]),o=a[28],r[34]={},a[34]=this.element({parent:o||"root"},i),r[34].y=550,r[34].x=100,r[34].w=i.w+100,r[34].h=i.w-100,r[34].color="0x000000ff",a[34].populate(r[34]),o=a[34],r[35]={},a[35]=this.element({parent:o||"root"},i),r[35].w=i.w+100,r[35].h=i.w-100,r[35].src=i.img,r[35].fit="contain",a[35].populate(r[35]),o=a[0],r[36]={},a[36]=this.element({parent:o||"root"},i),r[36].x=1700,r[36].y=20,r[36].content="Page "+i.activePage+"/"+i.totalPages,r[36].__textnode=!0,a[36].populate(r[36]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[2].set("x",{transition:{value:o.pages.x1,duration:200}})},function(o,i,c,f,x,w){i[3].set("content","Image dimensions: 2560 X 1440")},function(o,i,c,f,x,w){i[14].set("x",{transition:{value:o.pages.x2,duration:200}})},function(o,i,c,f,x,w){i[15].set("content","Image dimensions: 1440 X 2560")},function(o,i,c,f,x,w){i[28].set("x",{transition:{value:o.pages.x3,duration:200}})},function(o,i,c,f,x,w){i[29].set("content","Image dimensions: 2560 X 1440")},function(o,i,c,f,x,w){i[36].set("content","Page "+o.activePage+"/"+o.totalPages)}],context:{}},state(){return{activePage:1,pages:{x1:0,x2:1920,x3:1920*2},w:500,img:"assets/testscreen.png",img1:"assets/testscreen_rotated.png",titles:{t1:"Texture width > height - fit cover maximum width of node and position Y - 0, 0.5, 1",t2:"Texture width > height - fit:cover maximum width of node and position X - 0, 0.5, 1",t3:"Texture width < height - fit cover maximum width of node and positionY - 0, 0.5, 1",t4:"Texture width < height - fit cover maximum width of node and position X - 0, 0.25, 0.5, 0.75, 1",t5:"Texture width > height - fit contain maximum height of node",t6:"Texture width > height - fit contain maximum width of node"}}},computed:{totalPages(){return this.pages,Object.keys(this.pages).length}},input:{right(){if(this.activePage<this.totalPages){for(let h=1;h<=this.totalPages;h++)this.pages[`x${h}`]=this.pages[`x${h}`]-1920;this.activePage+=1}},left(){if(this.activePage>1){for(let h=this.totalPages;h>=1;h--)this.pages[`x${h}`]=this.pages[`x${h}`]+1920;this.activePage-=1}}}}),GD=Oe.Component("Flags",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];r[0]={},a[0]=this.element({parent:o||"root"},i),a[0].populate(r[0]),o=a[0],R[1]=[];let k,I;C[1]=(A=[],N,K)=>{const Se=w(A),Me=new Set;let ue=Se.length;const he={};for(k=he.from||0,I=("to"in he)?he.to:Se.length;ue--;)Se[ue],ue<I&&ue>=k&&Me.add(""+ue);let oe=K.length;for(;oe--;)if(Me.has(K[oe])===!1){const ne=K[oe];N[1][ne]&&N[1][ne].destroy(),N[1][ne]=null,delete N[1][ne],N[2][ne]&&N[2][ne].destroy(),N[2][ne]=null,delete N[2][ne],N[3][ne]&&N[3][ne].destroy(),N[3][ne]=null,delete N[3][ne]}K.length=0;const pe=Se.length,D=[];for(let ne=0;ne<pe;ne++){if(ne<k||ne>=I)continue;const le=Object.create(i);o=N[0],le.language=Se[ne],le.index=ne,le.key=""+ne,K.push(le.key),o=N[0],N[1]===void 0&&(N[1]={}),r[1]={},N[1][le.key]===void 0&&(N[1][le.key]=this.element({parent:o||"root"},i)),r[1].x=le.index*250,N[1][le.key].nodeId===void 0&&N[1][le.key].populate(r[1]),o=N[1][le.key],N[2]===void 0&&(N[2]={}),r[2]={},N[2][le.key]===void 0&&(N[2][le.key]=this.element({parent:o||"root"},i)),r[2].src=le.language.flag,r[2].w=150,r[2].h=150,r[2].alpha=le.index===le.activeIndex?1:.6,N[2][le.key].nodeId===void 0&&N[2][le.key].populate(r[2]),o=N[1][le.key],N[3]===void 0&&(N[3]={}),r[3]={},N[3][le.key]===void 0&&(N[3][le.key]=this.element({parent:o||"root"},i)),r[3].content=le.language.name,r[3].y=150,r[3].maxwidth=150,r[3].align="center",r[3].color=le.index===le.activeIndex?"0xffffffff":"0xaaaaaaff",r[3].__textnode=!0,N[3][le.key].nodeId===void 0&&N[3][le.key].populate(r[3])}return D};let m=()=>{C[1](i.languages,a,R[1])};i[Symbol.for("effects")].push(m),x(m,["languages"]);let S=()=>{i.activeIndex;for(let A=0;A<i.languages.length;A++){if(A<k||A>=I)continue;const N={};N.index=A,N.language=i.languages[A],N.key=A,a[2][N.key].set("alpha",N.index===i.activeIndex?1:.6)}};i[Symbol.for("effects")].push(S),x(S);let E=()=>{i.activeIndex;for(let A=0;A<i.languages.length;A++){if(A<k||A>=I)continue;const N={};N.index=A,N.language=i.languages[A],N.key=A,a[3][N.key].set("color",N.index===i.activeIndex?"0xffffffff":"0xaaaaaaff")}};return i[Symbol.for("effects")].push(E),x(E),{elms:a,cleanup:()=>{i=null,o=null,R[1].length=0,C[1]=null,m=null,S=null,E=null,a.length=0,f.length=0,r.length=0,C.length=0}}},effects:[],context:{}},props:["languages"],state(){return{activeIndex:0}},watch:{activeIndex(h){const o=this.languages[h];o&&o.code&&this.$language.set(o.code)}},input:{right(){this.activeIndex=Math.min(this.activeIndex+1,this.languages.length-1)},left(){this.activeIndex=Math.max(this.activeIndex-1,0)}}}),hC=Oe.Component("LanguagePlugin",{components:{Flags:GD},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m=!1,S=0,E=[];if(r[0]={},a[0]=this.element({parent:o||"root"},m===!0?I:i),a[0].populate(r[0]),m===!0&&(S-=1),E[1]=c.components&&c.components.Flags||f.Flags,o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},m===!0?I:i),r[1].languages=i.languages,r[1].ref="flags",r[1].x=500,r[1].y=150,R[1]=[],typeof E[1]<"u")for(let A in E[1][Symbol.for("config")].props)delete r[1][E[1][Symbol.for("config")].props[A]],R[1].push(E[1][Symbol.for("config")].props[A]);if(a[1].populate(r[1]),m===!0&&(S-=1),o=a[1],C[2]={},C[2].languages=i.languages,C[2].ref="flags",C[2].x=500,C[2].y=150,k=C[2].is||"Flags",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "Flags" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);return a[2]=f[2].call(null,{props:C[2]},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],I=a[2],m=!0):o=a[2][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},m===!0?I:i),r[3].x=960,r[3].y=540,r[3].mount=.5,r[3].content=i.$language.translate("hello"),r[3].size=80,r[3].__textnode=!0,a[3].populate(r[3]),m===!0&&(S-=1),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},m===!0?I:i),r[4].x=960,r[4].y=640,r[4].mount=.5,r[4].content=i.$language.translate("bye"),r[4].size=50,r[4].__textnode=!0,a[4].populate(r[4]),m===!0&&(S-=1),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},m===!0?I:i),r[5].x=960,r[5].y=720,r[5].mount=.5,r[5].content=i.$language.translate("replacement",{first:"John",last:"Doe",age:18}),r[5].size=36,r[5].__textnode=!0,a[5].populate(r[5]),m===!0&&(S-=1),o=a[0],r[6]={},a[6]=this.element({parent:o||"root"},m===!0?I:i),r[6].size=32,r[6].x=960,r[6].y=940,r[6].mount=.5,r[6].align="center",r[6].content="Current language: "+i.$language.language+`
 Language file: `+(i.loaded===!0?"Loaded":"loading ..."),r[6].__textnode=!0,a[6].populate(r[6]),m===!0&&(S-=1),{elms:a,cleanup:()=>{I=null,i=null,o=null,E[1]=null,C[2]=null,f[2]=null,E.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[3].set("content",o.$language.translate("hello"))},function(o,i,c,f,x,w){i[4].set("content",o.$language.translate("bye"))},function(o,i,c,f,x,w){i[5].set("content",o.$language.translate("replacement",{first:"John",last:"Doe",age:18}))},function(o,i,c,f,x,w){i[6].set("content","Current language: "+o.$language.language+`
 Language file: `+(o.loaded===!0?"Loaded":"loading ..."))}],context:{}},state(){return{loaded:!1,languages:[{flag:"/assets/flags/united-states.png",code:"en-US",name:"English"},{flag:"/assets/flags/netherlands.png",code:"nl-NL",name:"Dutch"},{flag:"/assets/flags/france.png",code:"fr-FR",name:"French"},{flag:"/assets/flags/germany.png",code:"de-DE",name:"German"}]}},hooks:{init(){this.$language.set("en-US"),setTimeout(()=>{this.$language.load("/assets/translations.json").then(()=>{this.loaded=!0})},2e3)},focus(){this.$select("flags").$focus()}}}),XD=Oe.Component("Box",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=430,r[0].h=180,r[0].effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}],r[0].color="{top: '0x667a97ff', bottom: '0x475569ff'}",a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].x=25,r[1].y=20,r[1].content=i.header,r[1].w=280,r[1].color="0x000000ff",r[1].contain="width",r[1].__textnode=!0,a[1].populate(r[1]),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].x=25,r[2].y=90,r[2].content=i.text,r[2].size=45,r[2].w=350,r[2].contain="width",r[2].align="center",r[2].__textnode=!0,a[2].populate(r[2]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}])},function(o,i,c,f,x,w){i[1].set("content",o.header)},function(o,i,c,f,x,w){i[2].set("content",o.text)}],context:{}},props:["header","text"]}),WD=Oe.Application({components:{Box:XD},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),r[0].w=1920,r[0].h=1080,a[0].populate(r[0]),S===!0&&(E-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].y=250,a[1].populate(r[1]),S===!0&&(E-=1),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},S===!0?m:i),r[2].content="KeyCode Finder",r[2].font="raleway",r[2].mount="{x: 0.5}",r[2].x=960,r[2].size=62,r[2].w=800,r[2].h=200,r[2].contain="width",r[2].__textnode=!0,a[2].populate(r[2]),S===!0&&(E-=1),o=a[1],r[3]={},a[3]=this.element({parent:o||"root"},S===!0?m:i),r[3].content="Press any key to get find the correct key code mapping",r[3].mount="{x: 0.5}",r[3].x=960,r[3].y=100,r[3].size=32,r[3].w=800,r[3].h=200,r[3].contain="width",r[3].__textnode=!0,a[3].populate(r[3]),S===!0&&(E-=1),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},S===!0?m:i),r[4].x=200,a[4].populate(r[4]),S===!0&&(E-=1),A[5]=c.components&&c.components.Box||f.Box,o=a[4],r[5]={},a[5]=this.element({parent:o||"root"},S===!0?m:i),r[5].y=600,r[5].header="Key",r[5].text=i.key,R[5]=[],typeof A[5]<"u")for(let N in A[5][Symbol.for("config")].props)delete r[5][A[5][Symbol.for("config")].props[N]],R[5].push(A[5][Symbol.for("config")].props[N]);if(a[5].populate(r[5]),S===!0&&(E-=1),o=a[5],C[6]={},C[6].y=600,C[6].header="Key",I=i.key,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[6].text=I,k=C[6].is||"Box",f[6],typeof k=="string"){if(f[6]=c.components&&c.components[k]||f[k],!f[6])throw new Error('Component "Box" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[6]=k);if(a[6]=f[6].call(null,{props:C[6]},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],m=a[6],S=!0):o=a[6][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[7]=c.components&&c.components.Box||f.Box,o=a[4],r[7]={},a[7]=this.element({parent:o||"root"},S===!0?m:i),r[7].x=500,r[7].y=600,r[7].header="Code",r[7].text=i.code,R[7]=[],typeof A[7]<"u")for(let N in A[7][Symbol.for("config")].props)delete r[7][A[7][Symbol.for("config")].props[N]],R[7].push(A[7][Symbol.for("config")].props[N]);if(a[7].populate(r[7]),S===!0&&(E-=1),o=a[7],C[8]={},C[8].x=500,C[8].y=600,C[8].header="Code",I=i.code,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[8].text=I,k=C[8].is||"Box",f[8],typeof k=="string"){if(f[8]=c.components&&c.components[k]||f[k],!f[8])throw new Error('Component "Box" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[8]=k);if(a[8]=f[8].call(null,{props:C[8]},a[7],i),a[8][Symbol.for("slots")][0]?(o=a[8][Symbol.for("slots")][0],m=a[8],S=!0):o=a[8][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[9]=c.components&&c.components.Box||f.Box,o=a[4],r[9]={},a[9]=this.element({parent:o||"root"},S===!0?m:i),r[9].x=1e3,r[9].y=600,r[9].header="keyCode",r[9].text=i.keyCode,R[9]=[],typeof A[9]<"u")for(let N in A[9][Symbol.for("config")].props)delete r[9][A[9][Symbol.for("config")].props[N]],R[9].push(A[9][Symbol.for("config")].props[N]);if(a[9].populate(r[9]),S===!0&&(E-=1),o=a[9],C[10]={},C[10].x=1e3,C[10].y=600,C[10].header="keyCode",I=i.keyCode,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[10].text=I,k=C[10].is||"Box",f[10],typeof k=="string"){if(f[10]=c.components&&c.components[k]||f[k],!f[10])throw new Error('Component "Box" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[10]=k);return a[10]=f[10].call(null,{props:C[10]},a[9],i),a[10][Symbol.for("slots")][0]?(o=a[10][Symbol.for("slots")][0],m=a[10],S=!0):o=a[10][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),o=a[0],r[11]={},a[11]=this.element({parent:o||"root"},S===!0?m:i),r[11].mount="{x: 1}",r[11].x=1860,r[11].y=1e3,r[11].size=30,r[11].content=i.backLabel,r[11].color=i.backPressed?"0xffffffff":"0x667a97ff",r[11].__textnode=!0,a[11].populate(r[11]),S===!0&&(E-=1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[5]=null,C[6]=null,f[6]=null,A[7]=null,C[8]=null,f[8]=null,A[9]=null,C[10]=null,f[10]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[5]>"u"||skips[5].indexOf("text")===-1)&&i[5].set("text",o.key)},function(o,i,c,f,x,w){i[6][Symbol.for("props")].text=o.key},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[7]>"u"||skips[7].indexOf("text")===-1)&&i[7].set("text",o.code)},function(o,i,c,f,x,w){i[8][Symbol.for("props")].text=o.code},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[9]>"u"||skips[9].indexOf("text")===-1)&&i[9].set("text",o.keyCode)},function(o,i,c,f,x,w){i[10][Symbol.for("props")].text=o.keyCode},function(o,i,c,f,x,w){i[11].set("content",o.backLabel)},function(o,i,c,f,x,w){i[11].set("color",o.backPressed?"0xffffffff":"0x667a97ff")}],context:{}},state(){return{backPressed:!1,key:"...",code:"...",keyCode:"..."}},computed:{backLabel(){return this.backPressed,this.backPressed?"Press back key again to navigate back":""}},methods:{updateLabels(h){this.key=h.key,this.code=h.code,this.keyCode=h.keyCode+""}},input:{any(h){this.backPressed=!1,this.updateLabels(h)},back(h){return this.backPressed===!0?this.$router.back():this.updateLabels(h),()=>{this.backPressed=!0}}}}),KD=Oe.Component("Accent",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=300,r[0].h=250,r[0].color=i.bColor,r[0].effects=[{type:"radius",props:{radius:8}}],a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].x=150,r[1].y=125,r[1].mount="{x:0.5, y:0.5}",r[1].content=i.lang,r[1].color="0xffffffff",r[1].font="lato-black",r[1].__textnode=!0,a[1].populate(r[1]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("color",o.bColor)},function(o,i,c,f,x,w){i[0].set("effects",[{type:"radius",props:{radius:8}}])},function(o,i,c,f,x,w){i[1].set("content",o.lang)}],context:{}},state(){return{bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["lang"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),YD=Oe.Component("Accents",{components:{Accent:KD},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E,A=!1,N=[];r[0]={},a[0]=this.element({parent:o||"root"},A===!0?E:i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},A===!0?E:i),r[1].x={transition:i.x},a[1].populate(r[1]),o=a[1],k[2]=[];let K,Se;C[2]=(ue=[],he,oe)=>{const pe=w(ue),D=new Set;let ne=pe.length;const le={};for(K=le.from||0,Se=("to"in le)?le.to:pe.length;ne--;){const H=pe[ne];ne<Se&&ne>=K&&D.add(""+H.lang)}let me=oe.length;for(;me--;)if(D.has(oe[me])===!1){const H=oe[me];he[2][H]&&he[2][H].destroy(),he[2][H]=null,delete he[2][H],he[3][H]&&he[3][H].destroy(),he[3][H]=null,delete he[3][H]}oe.length=0;const V=pe.length,re=[];for(let H=0;H<V;H++){if(H<K||H>=Se)continue;const z=Object.create(i);if(o=he[1],z.item=pe[H],z.index=H,z.key=""+z.item.lang,oe.push(z.key),N[2]=c.components&&c.components.Accent||f.Accent,he[2]===void 0&&(he[2]={}),r[2]={},he[2][z.key]===void 0&&(he[2][z.key]=this.element({parent:o||"root"},A===!0?E:i)),r[2].lang=z.item.lang,r[2].ref="accent"+z.index,r[2].x=z.index*400,I[2]=[],typeof N[2]<"u")for(let we in N[2][Symbol.for("config")].props)delete r[2][N[2][Symbol.for("config")].props[we]],I[2].push(N[2][Symbol.for("config")].props[we]);if(he[2][z.key].nodeId===void 0&&he[2][z.key].populate(r[2]),he[3]===void 0&&(he[3]={}),o=he[2][z.key],R[3]={},he[3][z.key]===void 0){if(R[3].lang=z.item.lang,S="accent"+z.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[3].ref=S,R[3].x=z.index*400,m=R[3].is||"Accent",f[3],typeof m=="string"){if(f[3]=c.components&&c.components[m]||f[m],!f[3])throw new Error('Component "Accent" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[3]=m);he[3][z.key]=f[3].call(null,{props:R[3]},he[2][z.key],i),he[3][z.key][Symbol.for("slots")][0]?(o=he[3][z.key][Symbol.for("slots")][0],E=he[3][z.key],A=!0):o=he[3][z.key][Symbol.for("children")][0]}let se=()=>{(typeof I>"u"||typeof I[2]>"u"||I[2].indexOf("ref")===-1)&&he[2][z.key].set("ref","accent"+z.index)};x(se,null),re.push(se),i[Symbol.for("effects")].push(se),he[3][z.key][Symbol.for("props")].ref="accent"+z.index}return re};let Me=()=>{C[2](i.data,a,k[2])};return i[Symbol.for("effects")].push(Me),x(Me,["data"]),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},A===!0?E:i),r[4].content=i.activeAccent,r[4].font="lato-black",r[4].x=960,r[4].y=400,r[4].mount="{x:0.5}",r[4].letterspacing=10,r[4].size=40,r[4].__textnode=!0,a[4].populate(r[4]),{elms:a,cleanup:()=>{S=null,E=null,i=null,o=null,k[2].length=0,C[2]=null,N[2]=null,R[3]=null,f[3]=null,Me=null,N.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("x",{transition:o.x})},function(o,i,c,f,x,w){i[4].set("content",o.activeAccent)}],context:{}},props:["data"],state(){return{x:160,activeIndex:0,activeAccent:""}},watch:{activeIndex(h){const o=this.$select(`accent${h}`);o&&o.$focus&&(o.$focus(),this.activeAccent=this.data[h].chars)}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.activeIndex<this.data.length-1&&this.move(1)},left(){this.activeIndex>0&&this.move(-1)}},methods:{move(h){const o=this.activeIndex+h;this.x=o>3?-(o-3)*400-160:160,this.activeIndex=o}}}),qD=Oe.Component("Characters",{components:{Accents:YD},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m=!1,S=0,E=[];if(r[0]={},a[0]=this.element({parent:o||"root"},m===!0?I:i),r[0].w=1920,a[0].populate(r[0]),m===!0&&(S-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},m===!0?I:i),r[1].x=960,r[1].y=50,r[1].mount="{x:0.5}",r[1].content="Alphabets",r[1].font="lato-black",r[1].size=60,r[1].__textnode=!0,a[1].populate(r[1]),m===!0&&(S-=1),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},m===!0?I:i),r[2].x=960,r[2].y=150,r[2].mount="{x:0.5}",r[2].content=i.alphabets,r[2].font="lato-black",r[2].size=40,r[2].letterspacing=10,r[2].__textnode=!0,a[2].populate(r[2]),m===!0&&(S-=1),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},m===!0?I:i),r[3].x=960,r[3].y=290,r[3].mount="{x:0.5}",r[3].content="Accents",r[3].font="lato-black",r[3].size=60,r[3].__textnode=!0,a[3].populate(r[3]),m===!0&&(S-=1),E[4]=c.components&&c.components.Accents||f.Accents,o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},m===!0?I:i),r[4].data=i.accents,r[4].y=400,r[4].ref="accents",R[4]=[],typeof E[4]<"u")for(let A in E[4][Symbol.for("config")].props)delete r[4][E[4][Symbol.for("config")].props[A]],R[4].push(E[4][Symbol.for("config")].props[A]);if(a[4].populate(r[4]),m===!0&&(S-=1),o=a[4],C[5]={},C[5].data=i.accents,C[5].y=400,C[5].ref="accents",k=C[5].is||"Accents",f[5],typeof k=="string"){if(f[5]=c.components&&c.components[k]||f[k],!f[5])throw new Error('Component "Accents" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[5]=k);return a[5]=f[5].call(null,{props:C[5]},a[4],i),a[5][Symbol.for("slots")][0]?(o=a[5][Symbol.for("slots")][0],I=a[5],m=!0):o=a[5][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),o=a[0],r[6]={},a[6]=this.element({parent:o||"root"},m===!0?I:i),r[6].w=950,r[6].h=40,r[6].color="0x000000ff",r[6].effects=[{type:"radius",props:{radius:10}}],r[6].y=1e3,r[6].placement="center",a[6].populate(r[6]),m===!0&&(S-=1),o=a[6],r[7]={},a[7]=this.element({parent:o||"root"},m===!0?I:i),r[7].content="The character ? represents a character that is not supported by the Lato-Black font",r[7].size=25,r[7].x=475,r[7].y=20,r[7].mount="{x:0.5, y:0.5}",r[7].__textnode=!0,a[7].populate(r[7]),m===!0&&(S-=1),{elms:a,cleanup:()=>{I=null,i=null,o=null,E[4]=null,C[5]=null,f[5]=null,E.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[6].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state(){return{alphabets:"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",accents:[{lang:"Dutch",chars:"éèëïüáóĳĲ"},{lang:"French",chars:"éèêëàâîïôùûç"},{lang:"Spanish",chars:"áéíóúñü"},{lang:"Turkish",chars:"ÇçĞğİiÖöÜüŞş"}]}},hooks:{focus(){const h=this.$select("accents");h&&h.$focus&&h.$focus()}}}),QD=Oe.Component("Layout",{components:{Ball:y4},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E=!1,A=0,N=[];r[0]={},a[0]=this.element({parent:o||"root"},E===!0?S:i),r[0].w=1920,r[0].h=1080,r[0].color="0xc4b5fdff",a[0].populate(r[0]),E===!0&&(A-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},E===!0?S:i),r[1].x=40,r[1].y=40,a[1].populate(r[1]),E===!0&&(A-=1),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},E===!0?S:i),r[2].color="0x222222ff",r[2].content="Static horizontal Layout",r[2].__textnode=!0,a[2].populate(r[2]),E===!0&&(A-=1),o=a[1],r[3]={},a[3]=this.element({parent:o||"root"},E===!0?S:i),r[3].y=50,r[3].gap=10,r[3].__layout=!0,a[3].populate(r[3]),E===!0&&(A-=1),o=a[3],r[4]={},a[4]=this.element({parent:o||"root"},E===!0?S:i),r[4].w=50,r[4].h=100,r[4].color="0xeff6ffff",a[4].populate(r[4]),E===!0&&(A-=1),o=a[3],r[5]={},a[5]=this.element({parent:o||"root"},E===!0?S:i),r[5].w=60,r[5].h=100,r[5].color="0xbfdbfeff",a[5].populate(r[5]),E===!0&&(A-=1),o=a[3],r[6]={},a[6]=this.element({parent:o||"root"},E===!0?S:i),r[6].w=70,r[6].h=100,r[6].color="0x60a5faff",a[6].populate(r[6]),E===!0&&(A-=1),o=a[3],r[7]={},a[7]=this.element({parent:o||"root"},E===!0?S:i),r[7].w=80,r[7].h=100,r[7].color="0x2563ebff",a[7].populate(r[7]),E===!0&&(A-=1),o=a[3],r[8]={},a[8]=this.element({parent:o||"root"},E===!0?S:i),r[8].w=90,r[8].h=100,r[8].color="0x1e40afff",a[8].populate(r[8]),E===!0&&(A-=1),o=a[0],r[9]={},a[9]=this.element({parent:o||"root"},E===!0?S:i),r[9].x=40,r[9].y=220,a[9].populate(r[9]),E===!0&&(A-=1),o=a[9],r[10]={},a[10]=this.element({parent:o||"root"},E===!0?S:i),r[10].color="0x222222ff",r[10].content="Static vertical Layout",r[10].__textnode=!0,a[10].populate(r[10]),E===!0&&(A-=1),o=a[9],r[11]={},a[11]=this.element({parent:o||"root"},E===!0?S:i),r[11].y=50,r[11].gap=10,r[11].direction="vertical",r[11].__layout=!0,a[11].populate(r[11]),E===!0&&(A-=1),o=a[11],r[12]={},a[12]=this.element({parent:o||"root"},E===!0?S:i),r[12].w=100,r[12].h=50,r[12].color="0xeff6ffff",a[12].populate(r[12]),E===!0&&(A-=1),o=a[11],r[13]={},a[13]=this.element({parent:o||"root"},E===!0?S:i),r[13].w=100,r[13].h=60,r[13].color="0xbfdbfeff",a[13].populate(r[13]),E===!0&&(A-=1),o=a[11],r[14]={},a[14]=this.element({parent:o||"root"},E===!0?S:i),r[14].w=100,r[14].h=70,r[14].color="0x60a5faff",a[14].populate(r[14]),E===!0&&(A-=1),o=a[11],r[15]={},a[15]=this.element({parent:o||"root"},E===!0?S:i),r[15].w=100,r[15].h=80,r[15].color="0x2563ebff",a[15].populate(r[15]),E===!0&&(A-=1),o=a[11],r[16]={},a[16]=this.element({parent:o||"root"},E===!0?S:i),r[16].w=100,r[16].h=90,r[16].color="0x1e40afff",a[16].populate(r[16]),E===!0&&(A-=1),o=a[0],r[17]={},a[17]=this.element({parent:o||"root"},E===!0?S:i),r[17].x=40,r[17].y=700,a[17].populate(r[17]),E===!0&&(A-=1),o=a[17],r[18]={},a[18]=this.element({parent:o||"root"},E===!0?S:i),r[18].color="0x222222ff",r[18].content="Nested Layouts",r[18].__textnode=!0,a[18].populate(r[18]),E===!0&&(A-=1),o=a[17],r[19]={},a[19]=this.element({parent:o||"root"},E===!0?S:i),r[19].y=50,r[19].gap=10,r[19].direction="horizontal",r[19].__layout=!0,a[19].populate(r[19]),E===!0&&(A-=1),o=a[19],r[20]={},a[20]=this.element({parent:o||"root"},E===!0?S:i),r[20].w=100,r[20].h=50,r[20].color="0xeff6ffff",a[20].populate(r[20]),E===!0&&(A-=1),o=a[19],r[21]={},a[21]=this.element({parent:o||"root"},E===!0?S:i),r[21].w=100,r[21].h=60,r[21].color="0xbfdbfeff",a[21].populate(r[21]),E===!0&&(A-=1),o=a[19],r[22]={},a[22]=this.element({parent:o||"root"},E===!0?S:i),r[22].direction="vertical",r[22].gap=10,r[22].__layout=!0,a[22].populate(r[22]),E===!0&&(A-=1),o=a[22],r[23]={},a[23]=this.element({parent:o||"root"},E===!0?S:i),r[23].w=100,r[23].h=70,r[23].color="0x60a5faff",a[23].populate(r[23]),E===!0&&(A-=1),o=a[22],r[24]={},a[24]=this.element({parent:o||"root"},E===!0?S:i),r[24].w=100,r[24].h=70,r[24].color="0x60a5faff",a[24].populate(r[24]),E===!0&&(A-=1),o=a[22],r[25]={},a[25]=this.element({parent:o||"root"},E===!0?S:i),r[25].w=100,r[25].h=70,r[25].color="0x60a5faff",a[25].populate(r[25]),E===!0&&(A-=1),o=a[22],r[26]={},a[26]=this.element({parent:o||"root"},E===!0?S:i),r[26].gap=50,r[26].__layout=!0,a[26].populate(r[26]),E===!0&&(A-=1),o=a[26],r[27]={},a[27]=this.element({parent:o||"root"},E===!0?S:i),r[27].w=50,r[27].h=50,r[27].color="0x2563ebff",a[27].populate(r[27]),E===!0&&(A-=1),o=a[26],r[28]={},a[28]=this.element({parent:o||"root"},E===!0?S:i),r[28].w=50,r[28].h=50,r[28].color="0x2563ebff",a[28].populate(r[28]),E===!0&&(A-=1),o=a[26],r[29]={},a[29]=this.element({parent:o||"root"},E===!0?S:i),r[29].w=50,r[29].h=50,r[29].color="0x2563ebff",a[29].populate(r[29]),E===!0&&(A-=1),o=a[19],r[30]={},a[30]=this.element({parent:o||"root"},E===!0?S:i),r[30].w=100,r[30].h=80,r[30].color="0x2563ebff",a[30].populate(r[30]),E===!0&&(A-=1),o=a[19],r[31]={},a[31]=this.element({parent:o||"root"},E===!0?S:i),r[31].w=100,r[31].h=90,r[31].color="0x1e40afff",a[31].populate(r[31]),E===!0&&(A-=1),o=a[0],r[32]={},a[32]=this.element({parent:o||"root"},E===!0?S:i),r[32].x=800,r[32].y=40,a[32].populate(r[32]),E===!0&&(A-=1),o=a[32],r[33]={},a[33]=this.element({parent:o||"root"},E===!0?S:i),r[33].color="0x222222ff",r[33].content="Layout with Text",r[33].__textnode=!0,a[33].populate(r[33]),E===!0&&(A-=1),o=a[32],r[34]={},a[34]=this.element({parent:o||"root"},E===!0?S:i),r[34].y=50,r[34].gap=20,r[34].__layout=!0,a[34].populate(r[34]),E===!0&&(A-=1),o=a[34],r[35]={},a[35]=this.element({parent:o||"root"},E===!0?S:i),r[35].w=3,r[35].h=32,r[35].color="0x60a5faff",a[35].populate(r[35]),E===!0&&(A-=1),o=a[34],r[36]={},a[36]=this.element({parent:o||"root"},E===!0?S:i),r[36].color="0x1e40afff",r[36].content="Hello",r[36].__textnode=!0,a[36].populate(r[36]),E===!0&&(A-=1),o=a[34],r[37]={},a[37]=this.element({parent:o||"root"},E===!0?S:i),r[37].w=3,r[37].h=32,r[37].color="0x60a5faff",a[37].populate(r[37]),E===!0&&(A-=1),o=a[34],r[38]={},a[38]=this.element({parent:o||"root"},E===!0?S:i),r[38].content="World",r[38].color="0x1e40afff",r[38].__textnode=!0,a[38].populate(r[38]),E===!0&&(A-=1),o=a[34],r[39]={},a[39]=this.element({parent:o||"root"},E===!0?S:i),r[39].w=3,r[39].h=32,r[39].color="0x60a5faff",a[39].populate(r[39]),E===!0&&(A-=1),o=a[0],r[40]={},a[40]=this.element({parent:o||"root"},E===!0?S:i),r[40].x=800,r[40].y=210,a[40].populate(r[40]),E===!0&&(A-=1),o=a[40],r[41]={},a[41]=this.element({parent:o||"root"},E===!0?S:i),r[41].color="0x222222ff",r[41].content="Dynamic dimensions Layout",r[41].__textnode=!0,a[41].populate(r[41]),E===!0&&(A-=1),o=a[40],r[42]={},a[42]=this.element({parent:o||"root"},E===!0?S:i),r[42].y=50,r[42].gap=20,r[42]["@updated"]=i.dynamicLayoutUpdated&&i.dynamicLayoutUpdated.bind(i),r[42].__layout=!0,a[42].populate(r[42]),E===!0&&(A-=1),o=a[42],r[43]={},a[43]=this.element({parent:o||"root"},E===!0?S:i),r[43].w=i.w*.5,r[43].h=60,r[43].color="0xeff6ffff",a[43].populate(r[43]),E===!0&&(A-=1),o=a[42],r[44]={},a[44]=this.element({parent:o||"root"},E===!0?S:i),r[44].w=i.w*.6,r[44].h=60,r[44].color="0xbfdbfeff",a[44].populate(r[44]),E===!0&&(A-=1),o=a[42],r[45]={},a[45]=this.element({parent:o||"root"},E===!0?S:i),r[45].w=i.w*.7,r[45].h=60,r[45].color="0x60a5faff",a[45].populate(r[45]),E===!0&&(A-=1),o=a[42],r[46]={},a[46]=this.element({parent:o||"root"},E===!0?S:i),r[46].w=i.w*.8,r[46].h=60,r[46].color="0x2563ebff",a[46].populate(r[46]),E===!0&&(A-=1),o=a[42],r[47]={},a[47]=this.element({parent:o||"root"},E===!0?S:i),r[47].w=i.w*.9,r[47].h=60,r[47].color="0x1e40afff",a[47].populate(r[47]),E===!0&&(A-=1),o=a[0],r[48]={},a[48]=this.element({parent:o||"root"},E===!0?S:i),r[48].x=800,r[48].y=400,a[48].populate(r[48]),E===!0&&(A-=1),o=a[48],r[49]={},a[49]=this.element({parent:o||"root"},E===!0?S:i),r[49].color="0x222222ff",r[49].content="For loop Layout",r[49].__textnode=!0,a[49].populate(r[49]),E===!0&&(A-=1),o=a[48],r[50]={},a[50]=this.element({parent:o||"root"},E===!0?S:i),r[50].y=50,r[50].gap=20,r[50].__layout=!0,a[50].populate(r[50]),E===!0&&(A-=1),o=a[50],k[51]=[];let K,Se;C[51]=(H=[],z,se)=>{const we=w(H),Fe=new Set;let Je=we.length;const $e={};for(K=$e.from||0,Se=("to"in $e)?$e.to:we.length;Je--;)we[Je],Je<Se&&Je>=K&&Fe.add(""+Je);let ke=se.length;for(;ke--;)if(Fe.has(se[ke])===!1){const De=se[ke];z[51][De]&&z[51][De].destroy(),z[51][De]=null,delete z[51][De]}se.length=0;const j=we.length,lt=[];for(let De=0;De<j;De++){if(De<K||De>=Se)continue;const Ye=Object.create(i);o=z[50],Ye.color=we[De],Ye.undefined=De,Ye.key=""+De,se.push(Ye.key),o=z[50],z[51]===void 0&&(z[51]={}),r[51]={},z[51][Ye.key]===void 0&&(z[51][Ye.key]=this.element({parent:o||"root"},E===!0?S:i)),r[51].w=60,r[51].h=60,r[51].color=Ye.color,z[51][Ye.key].nodeId===void 0&&(z[51][Ye.key].populate(r[51]),E===!0&&(A-=1))}return lt};let Me=()=>{C[51](i.colors,a,k[51])};i[Symbol.for("effects")].push(Me),x(Me,["colors"]);let ue=()=>{i.color;for(let H=0;H<i.colors.length;H++){if(H<K||H>=Se)continue;const z={};z.undefined=H,z.color=i.colors[H],z.key=H,a[51][z.key].set("color",z.color)}};i[Symbol.for("effects")].push(ue),x(ue),o=a[0],r[52]={},a[52]=this.element({parent:o||"root"},E===!0?S:i),r[52].x=800,r[52].y=600,a[52].populate(r[52]),E===!0&&(A-=1),o=a[52],r[53]={},a[53]=this.element({parent:o||"root"},E===!0?S:i),r[53].color="0x222222ff",r[53].content="Layout with transitions",r[53].__textnode=!0,a[53].populate(r[53]),E===!0&&(A-=1),o=a[52],r[54]={},a[54]=this.element({parent:o||"root"},E===!0?S:i),r[54].direction="horizontal",r[54].gap=20,r[54].y=60,r[54].__layout=!0,a[54].populate(r[54]),E===!0&&(A-=1),o=a[54],k[55]=[];let he,oe;C[55]=(H=[],z,se)=>{const we=w(H),Fe=new Set;let Je=we.length;const $e={};for(he=$e.from||0,oe=("to"in $e)?$e.to:we.length;Je--;)we[Je],Je<oe&&Je>=he&&Fe.add(""+Je);let ke=se.length;for(;ke--;)if(Fe.has(se[ke])===!1){const De=se[ke];z[55][De]&&z[55][De].destroy(),z[55][De]=null,delete z[55][De],z[56][De]&&z[56][De].destroy(),z[56][De]=null,delete z[56][De],z[57][De]&&z[57][De].destroy(),z[57][De]=null,delete z[57][De],z[58][De]&&z[58][De].destroy(),z[58][De]=null,delete z[58][De],z[59][De]&&z[59][De].destroy(),z[59][De]=null,delete z[59][De],z[60][De]&&z[60][De].destroy(),z[60][De]=null,delete z[60][De]}se.length=0;const j=we.length,lt=[];for(let De=0;De<j;De++){if(De<he||De>=oe)continue;const Ye=Object.create(i);o=z[54],Ye.color=we[De],Ye.undefined=De,Ye.key=""+De,se.push(Ye.key),o=z[54],z[55]===void 0&&(z[55]={}),r[55]={},z[55][Ye.key]===void 0&&(z[55][Ye.key]=this.element({parent:o||"root"},E===!0?S:i)),r[55].h=100,r[55].w={transition:{value:Ye.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},r[55].color=Ye.color,z[55][Ye.key].nodeId===void 0&&(z[55][Ye.key].populate(r[55]),E===!0&&(A-=1)),o=z[55][Ye.key],z[56]===void 0&&(z[56]={}),r[56]={},z[56][Ye.key]===void 0&&(z[56][Ye.key]=this.element({parent:o||"root"},E===!0?S:i)),r[56].gap=10,r[56].x=10,r[56].y=35,r[56].__layout=!0,z[56][Ye.key].nodeId===void 0&&(z[56][Ye.key].populate(r[56]),E===!0&&(A-=1)),o=z[56][Ye.key],z[57]===void 0&&(z[57]={}),r[57]={},z[57][Ye.key]===void 0&&(z[57][Ye.key]=this.element({parent:o||"root"},E===!0?S:i)),r[57].h=20,r[57].w={transition:{value:Ye.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},r[57].color="0xffffffff",z[57][Ye.key].nodeId===void 0&&(z[57][Ye.key].populate(r[57]),E===!0&&(A-=1)),o=z[56][Ye.key],z[58]===void 0&&(z[58]={}),r[58]={},z[58][Ye.key]===void 0&&(z[58][Ye.key]=this.element({parent:o||"root"},E===!0?S:i)),r[58].h=20,r[58].w={transition:{value:Ye.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},r[58].color="0xccccccff",z[58][Ye.key].nodeId===void 0&&(z[58][Ye.key].populate(r[58]),E===!0&&(A-=1)),o=z[56][Ye.key],z[59]===void 0&&(z[59]={}),r[59]={},z[59][Ye.key]===void 0&&(z[59][Ye.key]=this.element({parent:o||"root"},E===!0?S:i)),r[59].h=20,r[59].w={transition:{value:Ye.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},r[59].color="0x333333ff",z[59][Ye.key].nodeId===void 0&&(z[59][Ye.key].populate(r[59]),E===!0&&(A-=1)),o=z[56][Ye.key],z[60]===void 0&&(z[60]={}),r[60]={},z[60][Ye.key]===void 0&&(z[60][Ye.key]=this.element({parent:o||"root"},E===!0?S:i)),r[60].h=20,r[60].w={transition:{value:Ye.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},r[60].color="0x000000ff",z[60][Ye.key].nodeId===void 0&&(z[60][Ye.key].populate(r[60]),E===!0&&(A-=1))}return lt};let pe=()=>{C[55](i.colors,a,k[55])};i[Symbol.for("effects")].push(pe),x(pe,["colors"]);let D=()=>{i.w3;for(let H=0;H<i.colors.length;H++){if(H<he||H>=oe)continue;const z={};z.undefined=H,z.color=i.colors[H],z.key=H,a[55][z.key].set("w",{transition:{value:i.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};i[Symbol.for("effects")].push(D),x(D);let ne=()=>{i.color;for(let H=0;H<i.colors.length;H++){if(H<he||H>=oe)continue;const z={};z.undefined=H,z.color=i.colors[H],z.key=H,a[55][z.key].set("color",z.color)}};i[Symbol.for("effects")].push(ne),x(ne);let le=()=>{i.w2;for(let H=0;H<i.colors.length;H++){if(H<he||H>=oe)continue;const z={};z.undefined=H,z.color=i.colors[H],z.key=H,a[57][z.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};i[Symbol.for("effects")].push(le),x(le);let me=()=>{i.w2;for(let H=0;H<i.colors.length;H++){if(H<he||H>=oe)continue;const z={};z.undefined=H,z.color=i.colors[H],z.key=H,a[58][z.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};i[Symbol.for("effects")].push(me),x(me);let V=()=>{i.w2;for(let H=0;H<i.colors.length;H++){if(H<he||H>=oe)continue;const z={};z.undefined=H,z.color=i.colors[H],z.key=H,a[59][z.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};i[Symbol.for("effects")].push(V),x(V);let re=()=>{i.w2;for(let H=0;H<i.colors.length;H++){if(H<he||H>=oe)continue;const z={};z.undefined=H,z.color=i.colors[H],z.key=H,a[60][z.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}};if(i[Symbol.for("effects")].push(re),x(re),o=a[0],r[61]={},a[61]=this.element({parent:o||"root"},E===!0?S:i),r[61].x=800,r[61].y=840,a[61].populate(r[61]),E===!0&&(A-=1),o=a[61],r[62]={},a[62]=this.element({parent:o||"root"},E===!0?S:i),r[62].color="0x222222ff",r[62].content="Layout with padding",r[62].__textnode=!0,a[62].populate(r[62]),E===!0&&(A-=1),o=a[61],r[63]={},a[63]=this.element({parent:o||"root"},E===!0?S:i),r[63].direction="horizontal",r[63].gap=20,r[63].y=60,r[63].padding=20,r[63].color="0xffffffff",r[63].__layout=!0,a[63].populate(r[63]),E===!0&&(A-=1),o=a[63],r[64]={},a[64]=this.element({parent:o||"root"},E===!0?S:i),r[64].w=40,r[64].h=40,r[64].color="0xbfdbfeff",a[64].populate(r[64]),E===!0&&(A-=1),o=a[63],r[65]={},a[65]=this.element({parent:o||"root"},E===!0?S:i),r[65].w=40,r[65].h=40,r[65].color="0x60a5faff",a[65].populate(r[65]),E===!0&&(A-=1),o=a[63],r[66]={},a[66]=this.element({parent:o||"root"},E===!0?S:i),r[66].w=40,r[66].h=40,r[66].color="0x2563ebff",a[66].populate(r[66]),E===!0&&(A-=1),o=a[61],r[67]={},a[67]=this.element({parent:o||"root"},E===!0?S:i),r[67].direction="horizontal",r[67].gap=20,r[67].y=60,r[67].x=240,r[67].padding={top:40,y:10,left:40,x:10},r[67].color="0xffffffff",r[67].__layout=!0,a[67].populate(r[67]),E===!0&&(A-=1),o=a[67],r[68]={},a[68]=this.element({parent:o||"root"},E===!0?S:i),r[68].w=40,r[68].h=40,r[68].color="0xbfdbfeff",a[68].populate(r[68]),E===!0&&(A-=1),o=a[67],r[69]={},a[69]=this.element({parent:o||"root"},E===!0?S:i),r[69].w=40,r[69].h=40,r[69].color="0x60a5faff",a[69].populate(r[69]),E===!0&&(A-=1),o=a[67],r[70]={},a[70]=this.element({parent:o||"root"},E===!0?S:i),r[70].w=40,r[70].h=40,r[70].color="0x2563ebff",a[70].populate(r[70]),E===!0&&(A-=1),o=a[61],r[71]={},a[71]=this.element({parent:o||"root"},E===!0?S:i),r[71].direction="vertical",r[71].gap=20,r[71].y=60,r[71].x=500,r[71].padding=20,r[71].color="0xffffffff",r[71].__layout=!0,a[71].populate(r[71]),E===!0&&(A-=1),o=a[71],r[72]={},a[72]=this.element({parent:o||"root"},E===!0?S:i),r[72].w=40,r[72].h=20,r[72].color="0xbfdbfeff",a[72].populate(r[72]),E===!0&&(A-=1),o=a[71],r[73]={},a[73]=this.element({parent:o||"root"},E===!0?S:i),r[73].w=40,r[73].h=20,r[73].color="0x60a5faff",a[73].populate(r[73]),E===!0&&(A-=1),o=a[71],r[74]={},a[74]=this.element({parent:o||"root"},E===!0?S:i),r[74].w=40,r[74].h=20,r[74].color="0x2563ebff",a[74].populate(r[74]),E===!0&&(A-=1),o=a[61],r[75]={},a[75]=this.element({parent:o||"root"},E===!0?S:i),r[75].direction="vertical",r[75].gap=20,r[75].y=60,r[75].x=640,r[75].padding={top:40,y:10,left:40,x:10},r[75].color="0xffffffff",r[75].__layout=!0,a[75].populate(r[75]),E===!0&&(A-=1),o=a[75],r[76]={},a[76]=this.element({parent:o||"root"},E===!0?S:i),r[76].w=40,r[76].h=20,r[76].color="0xbfdbfeff",a[76].populate(r[76]),E===!0&&(A-=1),o=a[75],r[77]={},a[77]=this.element({parent:o||"root"},E===!0?S:i),r[77].w=40,r[77].h=20,r[77].color="0x60a5faff",a[77].populate(r[77]),E===!0&&(A-=1),o=a[75],r[78]={},a[78]=this.element({parent:o||"root"},E===!0?S:i),r[78].w=40,r[78].h=20,r[78].color="0x2563ebff",a[78].populate(r[78]),E===!0&&(A-=1),o=a[0],r[79]={},a[79]=this.element({parent:o||"root"},E===!0?S:i),r[79].x=1300,r[79].y=210,a[79].populate(r[79]),E===!0&&(A-=1),o=a[79],r[80]={},a[80]=this.element({parent:o||"root"},E===!0?S:i),r[80].color="0x222222ff",r[80].content="Layout with a Component",r[80].__textnode=!0,a[80].populate(r[80]),E===!0&&(A-=1),o=a[79],r[81]={},a[81]=this.element({parent:o||"root"},E===!0?S:i),r[81].y=50,r[81].gap=40,r[81].__layout=!0,a[81].populate(r[81]),E===!0&&(A-=1),o=a[81],r[82]={},a[82]=this.element({parent:o||"root"},E===!0?S:i),r[82].w=100,r[82].h=100,r[82].color="0xff0000ff",a[82].populate(r[82]),E===!0&&(A-=1),o=a[81],r[83]={},a[83]=this.element({parent:o||"root"},E===!0?S:i),r[83].w=i.w,r[83].h=100,r[83].color="0xff0000ff",a[83].populate(r[83]),E===!0&&(A-=1),N[84]=c.components&&c.components.Ball||f.Ball,o=a[81],r[84]={},a[84]=this.element({parent:o||"root"},E===!0?S:i),r[84].y=500,r[84].w=100,I[84]=[],typeof N[84]<"u")for(let H in N[84][Symbol.for("config")].props)delete r[84][N[84][Symbol.for("config")].props[H]],I[84].push(N[84][Symbol.for("config")].props[H]);if(a[84].populate(r[84]),E===!0&&(A-=1),o=a[84],R[85]={},R[85].y=500,R[85].w=100,m=R[85].is||"Ball",f[85],typeof m=="string"){if(f[85]=c.components&&c.components[m]||f[m],!f[85])throw new Error('Component "Ball" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[85]=m);return a[85]=f[85].call(null,{props:R[85]},a[84],i),a[85][Symbol.for("slots")][0]?(o=a[85][Symbol.for("slots")][0],S=a[85],E=!0):o=a[85][Symbol.for("children")][0],E===!0&&A===0&&(E=!1),o=a[81],r[86]={},a[86]=this.element({parent:o||"root"},E===!0?S:i),r[86].w=100,r[86].h=100,r[86].color="0xff0000ff",a[86].populate(r[86]),E===!0&&(A-=1),{elms:a,cleanup:()=>{S=null,i=null,o=null,k[51].length=0,C[51]=null,Me=null,ue=null,k[55].length=0,C[55]=null,pe=null,D=null,ne=null,le=null,me=null,V=null,re=null,N[84]=null,R[85]=null,f[85]=null,N.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[function(o,i,c,f,x,w){i[43].set("w",o.w*.5)},function(o,i,c,f,x,w){i[44].set("w",o.w*.6)},function(o,i,c,f,x,w){i[45].set("w",o.w*.7)},function(o,i,c,f,x,w){i[46].set("w",o.w*.8)},function(o,i,c,f,x,w){i[47].set("w",o.w*.9)},function(o,i,c,f,x,w){i[67].set("padding",{top:40,y:10,left:40,x:10})},function(o,i,c,f,x,w){i[75].set("padding",{top:40,y:10,left:40,x:10})},function(o,i,c,f,x,w){i[83].set("w",o.w)}],context:{}},state(){return{w:50,colors:["green","red","blue","yellow"],w3:150,w2:20}},hooks:{ready(){this.$setInterval(()=>{this.w=this.w===100?50:100,this.w2=this.w2===20?40:20,this.w3=this.w3===150?250:150},2e3),this.$setTimeout(()=>{this.colors.push("purple")},4e3)}},methods:{dynamicLayoutUpdated(h){this.$log.info("Dynamic layout updated",h.w,h.h)}}}),Wm=typeof window<"u"?window:{};let v4;const JD=h=>{v4=h};let Ry;const xy=[],Ul={};let kh,ds;Wm.__firebolt&&Wm.__firebolt.testHarness&&(ds=Wm.__firebolt.testHarness);function x4(h){console.debug("Sending message to transport: "+h);let o=JSON.parse(h);if(Array.isArray(o)){o.forEach(f=>x4(JSON.stringify(f)));return}let[i,c]=o.method.split(".");ds&&ds.onSend&&ds.onSend(i,c,o.params,o.id),c.match(/^on[A-Z]/)&&(o.params.listen?Ul[o.id]=i.toLowerCase()+"."+c[2].toLowerCase()+c.substr(3):Object.keys(Ul).forEach(f=>{Ul[f]===i.toLowerCase()+"."+c[2].toLowerCase()+c.substr(3)&&delete Ul[f]})),Ry?w4(o):xy.push(o)}function w4(h){let o;try{o=tP(h.method,h.params)}catch{setTimeout(()=>kh(JSON.stringify({jsonrpc:"2.0",error:{code:-32602,message:"Invalid params (this is a mock error from the mock transport layer)"},id:h.id})))}setTimeout(()=>kh(JSON.stringify({jsonrpc:"2.0",result:o,id:h.id})))}function ZD(h){kh=h,ds&&typeof ds.initialize=="function"&&ds.initialize({emit:S4,listen:function(...o){v4(...o)}})}function S4(h,o,i){const c=Object.entries(Ul).find(([f,x])=>x.toLowerCase()===h.toLowerCase()+"."+o.toLowerCase());if(c){let f=JSON.stringify({jsonrpc:"2.0",id:parseInt(c[0]),result:i});kh(f)}}function eP(h={},o){const i=o.split(".");let c=h;for(let f=0;f<i.length;f++)c=(Object.entries(c).find(([x,w])=>x.toLowerCase()===i[f].toLowerCase())||[null,{}])[1];return c}function tP(h,o){let i=eP(Ry,h);return h.match(/^[a-zA-Z]+\.on[A-Za-z]+$/)&&(i={event:h,listening:!0}),typeof i=="function"?o==null?i():i(o):i}function nP(h){Ry=h,xy.forEach(o=>w4(o)),xy.length=0}const Ah={send:x4,receive:ZD,event:S4};function T4(h,o,i){const c=h?Object.values(h).length:0;return c===i&&o===void 0?"getter":c===i&&typeof o=="function"||c===0&&typeof o=="function"?"subscriber":c===i&&o!==void 0?"setter":null}const Km={};function iP(h,o,i,c,f,x){const w=T4(i,c,f),y=f?"."+Object.keys(i).filter(r=>r!=="value").map(r=>i[r]).join("."):"",a=`${h}.${o}${y}`;if(w==="getter")return Km.hasOwnProperty(a)?Km[a]:x;if(w!=="subscriber"){if(w==="setter")return Km[a]=c,Ah.event(h,`${o}Changed`,{value:c}),null}}const Jt={mock:iP},C4={closedCaptions:{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]},closedCaptionsSettings:function(h){return Jt.mock("Accessibility","closedCaptionsSettings",h,void 0,0,{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]})},highContrastUI:function(h){return Jt.mock("Accessibility","highContrastUI",h,void 0,0,!0)},voiceGuidance:{enabled:!0,navigationHints:!0,rate:1},voiceGuidanceSettings:function(h){return Jt.mock("Accessibility","voiceGuidanceSettings",h,void 0,0,{enabled:!0,navigationHints:!0,rate:1})},audioDescriptionSettings:function(h){return Jt.mock("Accessibility","audioDescriptionSettings",h,void 0,0,{enabled:!0})}},rP={id:function(h){return Jt.mock("Account","id",h,void 0,0,"123")},uid:function(h){return Jt.mock("Account","uid",h,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")}},oP={config:{adServerUrl:"https://demo.v.fwmrm.net/ad/p/1",adServerUrlTemplate:"https://demo.v.fwmrm.net/ad/p/1?flag=+sltp+exvt+slcb+emcr+amcb+aeti&prof=12345:caf_allinone_profile &nw=12345&mode=live&vdur=123&caid=a110523018&asnw=372464&csid=gmott_ios_tablet_watch_live_ESPNU&ssnw=372464&vip=198.205.92.1&resp=vmap1&metr=1031&pvrn=12345&vprn=12345&vcid=1X0Ce7L3xRWlTeNhc7br8Q%3D%3D",adNetworkId:"519178",adProfileId:"12345:caf_allinone_profile",adSiteSectionId:"caf_allinone_profile_section",adOptOut:!0,privacyData:"ew0KICAicGR0IjogImdkcDp2MSIsDQogICJ1c19wcml2YWN5IjogIjEtTi0iLA0KICAibG10IjogIjEiIA0KfQ0K",ifaValue:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa:"ewogICJ2YWx1ZSI6ICIwMTIzNDU2Ny04OUFCLUNERUYtR0gwMS0yMzQ1Njc4OUFCQ0QiLAogICJpZmFfdHlwZSI6ICJzc3BpZCIsCiAgImxtdCI6ICIwIgp9Cg==",appName:"FutureToday",appBundleId:"FutureToday.comcast",distributorAppId:"1001",deviceAdAttributes:"ewogICJib0F0dHJpYnV0ZXNGb3JSZXZTaGFyZUlkIjogIjEyMzQiCn0=",coppa:0,authenticationEntity:"60f72475281cfba3852413bd53e957f6"},policy:function(h){return Jt.mock("Advertising","policy",h,void 0,0,{skipRestriction:"adsUnwatched",limitAdTracking:!1})},advertisingId:{ifa:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa_type:"sspid",lmt:"0"},deviceAttributes:{},appBundleId:"app.operator"},sP={token:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",expires:"2022-04-23T18:25:43.511Z",type:"platform"},device:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",session:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",root:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},uP={supported:!0,available:!0,permitted:!0,granted:!0,info:[{capability:"xrn:firebolt:capability:device:model",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:input:keyboard",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:protocol:bluetoothle",supported:!1,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unsupported"]},{capability:"xrn:firebolt:capability:token:device",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:token:platform",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unavailable"]},{capability:"xrn:firebolt:capability:protocol:moca",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["disabled","unavailable"]},{capability:"xrn:firebolt:capability:wifi:scan",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unpermitted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:null},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:locality",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["grantDenied","ungranted"]}],request:[{capability:"xrn:firebolt:capability:commerce:purchase",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}}]},b4={id:function(h){return Jt.mock("Device","id",h,void 0,0,"123")},distributor:function(h){return Jt.mock("Device","distributor",h,void 0,0,"Company")},platform:function(h){return Jt.mock("Device","platform",h,void 0,0,"WPE")},uid:function(h){return Jt.mock("Device","uid",h,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")},type:function(h){return Jt.mock("Device","type",h,void 0,0,"STB")},model:function(h){return Jt.mock("Device","model",h,void 0,0,"xi6")},sku:function(h){return Jt.mock("Device","sku",h,void 0,0,"AX061AEI")},make:function(h){return Jt.mock("Device","make",h,void 0,0,"Arris")},version:function(h){return Jt.mock("Device","version",h,void 0,0,{sdk:{major:0,minor:8,patch:0,readable:"Firebolt JS SDK v0.8.0"},api:{major:0,minor:8,patch:0,readable:"Firebolt API v0.8.0"},firmware:{major:1,minor:2,patch:3,readable:"Device Firmware v1.2.3"},os:{major:0,minor:1,patch:0,readable:"Firebolt OS v0.1.0"},debug:"Non-parsable build info for error logging only."})},hdcp:function(h){return Jt.mock("Device","hdcp",h,void 0,0,{"hdcp1.4":!0,"hdcp2.2":!0})},hdr:function(h){return Jt.mock("Device","hdr",h,void 0,0,{hdr10:!0,hdr10Plus:!0,dolbyVision:!0,hlg:!0})},audio:function(h){return Jt.mock("Device","audio",h,void 0,0,{stereo:!0,"dolbyDigital5.1":!0,"dolbyDigital5.1+":!0,dolbyAtmos:!0})},screenResolution:function(h){return Jt.mock("Device","screenResolution",h,void 0,0,[1920,1080])},videoResolution:function(h){return Jt.mock("Device","videoResolution",h,void 0,0,[1920,1080])},name:function(h){return Jt.mock("Device","name",h,void 0,0,"Living Room")},network:function(h){return Jt.mock("Device","network",h,void 0,0,{state:"connected",type:"wifi"})}},aP={policy:function(h){return Jt.mock("Discovery","policy",h,void 0,0,{enableRecommendations:!0,shareWatchHistory:!0,rememberWatchedPrograms:!0})},entityInfo:!0,purchasedContent:!0,watched:!0,watchNext:!0,entitlements:!0,contentAccess:null,clearContentAccess:null,launch:!0,signIn:!0,signOut:!0,userInterest:null,userInterestResponse:null,userInterestError:null},lP={email:"user@domain.com",password:"abc123",standard:"Living Room"};let Au={state:"inactive",previous:"initializing"},pC={state:"foreground",previous:"inactive"},gC={state:"unloading",previous:"inactive"};const El=h=>{Ah.event("Lifecycle",h.state,h)},Eh=typeof window<"u"?window:{},Il=Eh.__firebolt?!!Eh.__firebolt.automation:!1,fP={ready:function(){Au.previous="initializing",setTimeout(()=>El(Au),Il?1:500),pC.previous="inactive",setTimeout(()=>El(pC),Il?2:1e3)},close:function(h){let o=h.reason;if(o==="remoteButton")Au.previous="foreground",setTimeout(()=>El(Au),Il?1:500);else if(["userExit","error"].includes(o))Au.previous="foreground",gC.previous="inactive",setTimeout(()=>El(Au),Il?1:500),setTimeout(()=>El(gC),Il?2:1e3);else throw"Invalid close reason"},finished:function(){Eh.location&&(Eh.location.href="about:blank")}},k4={locality:function(h){return Jt.mock("Localization","locality",h,void 0,0,"Philadelphia")},postalCode:function(h){return Jt.mock("Localization","postalCode",h,void 0,0,"19103")},countryCode:function(h){return Jt.mock("Localization","countryCode",h,void 0,0,"US")},language:function(h){return Jt.mock("Localization","language",h,void 0,0,"en")},preferredAudioLanguages:function(h){return Jt.mock("Localization","preferredAudioLanguages",h,void 0,0,["spa","eng"])},locale:function(h){return Jt.mock("Localization","locale",h,void 0,0,"en-US")},latlon:[39.9549,75.1699],additionalInfo:{}},cP={ready:!0,signIn:!0,signOut:!0,startContent:!0,stopContent:!0,page:!0,action:!0,error:!0,mediaLoadStart:!0,mediaPlay:!0,mediaPlaying:!0,mediaPause:!0,mediaWaiting:!0,mediaProgress:!0,mediaSeeking:!0,mediaSeeked:!0,mediaRateChange:!0,mediaRenditionChange:!0,mediaEnded:!0,appInfo:null},dP={initialization:{lmt:0,us_privacy:"1-Y-",discovery:{navigateTo:{action:"entity",data:{entityId:"abc",entityType:"program",programType:"movie"},context:{source:"voice"}}}}},hP={approveContentRating:!1,approvePurchase:!1,flags:{userExperience:"1000"}},pP={protocols:{"dial1.7":!0},device:"device-id",friendlyName:function(h){return Jt.mock("SecondScreen","friendlyName",h,void 0,0,"Living Room")}},gP={get:"VGhpcyBub3QgYSByZWFsIHRva2VuLgo=",set:null,remove:null,clear:null},mP={localization:k4,device:b4,accessibility:C4};class yP{constructor(){this._callback=null,this._queue=[]}send(o){this._queue.push(o)}receive(o){this._callback=o}flush(o){o.receive(this._callback),this._queue.forEach(i=>o.send(i))}}const ls={},Qi={},vP=(h,o)=>{ls.app=h,ls.platform={logLevel:"WARN",...o},ls.user={}},xP=(h,o)=>{Qi[h]&&Qi[h].forEach(i=>i(o))},wP=(h={},o)=>{const i=o.split(".");for(let c=0;c<i.length;c++)h=h[i[c]]=h[i[c]]!==void 0?h[i[c]]:{};return typeof h=="object"?Object.keys(h).length?h:void 0:h},Ym={get(h,o,i=void 0){const c=wP(ls[h],o);return c!==void 0?c:i},has(h,o){return!!this.get(h,o)},set(h,o){ls.user[h]=o,xP(h,o)},subscribe(h,o){Qi[h]=Qi[h]||[],Qi[h].push(o)},unsubscribe(h,o){if(o){const i=Qi[h]&&Qi[h].findIndex(c=>c===o);i>-1&&Qi[h].splice(i,1)}else h in Qi&&(Qi[h]=[])},clearSubscribers(){for(const h of Object.getOwnPropertyNames(Qi))delete Qi[h]},setLogLevel(h){ls.platform.logLevel=h},getLogLevel(){return ls.platform.logLevel}},vr=typeof window<"u"?window:{};class Ih{constructor(o){this.bridge=o}send(o){this.bridge.JSMessageChanged(o,()=>{})}receive(o){vr.$badger=vr.$badger||{};const i=vr.$badger.callback?vr.$badger.callback.bind(vr.$badger):null,c=vr.$badger.event?vr.$badger.event.bind(vr.$badger):null;vr.$badger.callback=(f,x,w)=>{w.jsonrpc?o(JSON.stringify(w)):i&&i(f,x,w)},vr.$badger.event=(f,x)=>{x.jsonrpc?o(JSON.stringify(x)):c&&c(f,x)}}static isLegacy(o){return Ih.isXREProxy(o)||o.send===void 0&&o.JSMessageChanged}static isXREProxy(o){return o.proxyObjectTest!==void 0}}const SP=100;class TP{constructor(o){this._endpoint=o,this._ws=null,this._connected=!1,this._queue=[],this._callbacks=[]}send(o){this._connect(),this._connected?this._ws.send(o):this._queue.length<SP&&this._queue.push(o)}receive(o){o&&(this._connect(),this._callbacks.push(o))}_notifyCallbacks(o){for(let i=0;i<this._callbacks.length;i++)setTimeout(()=>this._callbacks[i](o),1)}_connect(){this._ws||(this._ws=new WebSocket(this._endpoint,["jsonrpc"]),this._ws.addEventListener("message",o=>{this._notifyCallbacks(o.data)}),this._ws.addEventListener("error",o=>{}),this._ws.addEventListener("close",o=>{this._ws=null,this._connected=!1}),this._ws.addEventListener("open",o=>{this._connected=!0;for(let i=0;i<this._queue.length;i++)this._ws.send(this._queue[i]);this._queue=[]}))}}function CP(h,o){if(!o||!o.methods)return h;const{methods:i}=o,c=JSON.parse(JSON.stringify(h));return Object.keys(i).forEach(f=>{const x=i[f],w=x["x-method"],[y,a]=w.split("."),r={};r[x["x-this-param"]]=c,c[f]=(...C)=>{for(var R=0;R<C.length;R++)r[x["x-additional-params"][R]]=C[R];return tn.send(y.toLowerCase(),a,r)}}),c}const mC={transform:CP},bP="com.comcast.BridgeObject_1";let qm=null;const kP=h=>h&&typeof h.event=="string"&&typeof h.listening=="boolean",gn=typeof window<"u"?window:{};class tn{constructor(){this._promises=[],this._transport=null,this._id=1,this._eventEmitters=[],this._eventIds=[],this._queue=new yP,this._deprecated={},this.isMock=!1}static addEventEmitter(o){tn.get()._eventEmitters.push(o)}static registerDeprecatedMethod(o,i,c){tn.get()._deprecated[o.toLowerCase()+"."+i.toLowerCase()]={alternative:c||""}}_endpoint(){return gn.__firebolt&&gn.__firebolt.endpoint?gn.__firebolt.endpoint:null}constructTransportLayer(){let o;const i=this._endpoint();return i&&(i.startsWith("ws://")||i.startsWith("wss://"))?(o=new TP(i),o.receive(this.receiveHandler.bind(this))):typeof gn.ServiceManager<"u"&&gn.ServiceManager&&gn.ServiceManager.version?(o=this._queue,gn.ServiceManager.getServiceForJavaScript(bP,c=>{Ih.isLegacy(c)?o=new Ih(c):o=c,this.setTransportLayer(o)})):(this.isMock=!0,o=Ah,o.receive(this.receiveHandler.bind(this))),o}setTransportLayer(o){this._transport=o,this._queue.flush(o)}static send(o,i,c,f){return tn.get()._send(o,i,c,f)}static listen(o,i,c,f){return tn.get()._sendAndGetId(o,i,c,f)}_send(o,i,c,f){return Array.isArray(o)&&!i&&!c?this._batch(o):this._sendAndGetId(o,i,c,f).promise}_sendAndGetId(o,i,c,f){const{promise:x,json:w,id:y}=this._processRequest(o,i,c,f),a=JSON.stringify(w);return Ym.getLogLevel()==="DEBUG"&&console.debug("Sending message to transport: "+a),this._transport.send(a),{id:y,promise:x}}_batch(o){const i=[],c=[];o.forEach(({module:x,method:w,params:y,transforms:a})=>{const r=this._processRequest(x,w,y,a);i.push({promise:r.promise,id:r.id}),c.push(r.json)});const f=JSON.stringify(c);return Ym.getLogLevel()==="DEBUG"&&console.debug("Sending message to transport: "+f),this._transport.send(f),i}_processRequest(o,i,c,f){const x=this._addPromiseToQueue(o,i,c,f),w=this._createRequestJSON(o,i,c),y={promise:x,json:w,id:this._id};return this._id++,y}_createRequestJSON(o,i,c){return{jsonrpc:"2.0",method:o.toLowerCase()+"."+i,params:c,id:this._id}}_addPromiseToQueue(o,i,c,f){return new Promise((x,w)=>{this._promises[this._id]={},this._promises[this._id].promise=this,this._promises[this._id].resolve=x,this._promises[this._id].reject=w,this._promises[this._id].transforms=f;const y=this._deprecated[o.toLowerCase()+"."+i.toLowerCase()];y&&console.warn(`WARNING: ${o}.${i}() is deprecated. `+y.alternative),i.match(/^on[A-Z]/)&&(c.listen?this._eventIds.push(this._id):this._eventIds=this._eventIds.filter(a=>a!==this._id))})}static get(){if(gn.__firebolt=gn.__firebolt||{},gn.__firebolt.transport==null&&qm==null){const o=new tn;o.init(),o.isMock?qm=o:(gn.__firebolt=gn.__firebolt||{},gn.__firebolt.transport=o),gn.__firebolt.setTransportLayer=o.setTransportLayer.bind(o)}return gn.__firebolt.transport?gn.__firebolt.transport:qm}receiveHandler(o){Ym.getLogLevel()==="DEBUG"&&console.debug("Received message from transport: "+o);const i=JSON.parse(o),c=this._promises[i.id];if(c){if(i.error)c.reject(i.error);else{let f=i.result;c.transforms&&(Array.isArray(i.result)?f=f.map(x=>mC.transform(x,c.transforms)):f=mC.transform(f,c.transforms)),c.resolve(f)}delete this._promises[i.id]}this._eventIds.includes(i.id)&&!kP(i.result)&&this._eventEmitters.forEach(f=>{f(i.id,i.result)})}init(){vP({},{log:!0}),this._queue.receive(this.receiveHandler.bind(this)),gn.__firebolt&&(gn.__firebolt.mockTransportLayer===!0?(this.isMock=!0,this.setTransportLayer(Ah)):gn.__firebolt.getTransportLayer&&this.setTransportLayer(gn.__firebolt.getTransportLayer())),this._transport==null&&(this._transport=this.constructTransportLayer())}}gn.__firebolt=gn.__firebolt||{};gn.__firebolt.setTransportLayer=h=>{tn.get().setTransportLayer(h)};let Eu=0;const Kt={internal:{},external:{},get:h=>Object.assign(Object.assign({},Kt.internal[h]),Kt.external[h]),set:(h,o,i)=>{Kt.external[h]=Kt.external[h]||{},Kt.external[h][o]=i},setInternal:(h,o,i)=>{Kt.internal[h]=Kt.internal[h]||{},Kt.internal[h][o]=i},find:h=>{let o;return[Kt.internal,Kt.external].find(i=>{if(o=Object.keys(i).find(c=>i[c][h]),o)return!0}),o},remove:h=>{[Kt.internal,Kt.external].forEach(o=>{Object.keys(o).forEach(i=>{o[i]&&o[i][h]&&(delete o[i][h],Object.values(o[i]).length===0&&delete o[i])})})},removeKey:(h,o=!1)=>{o&&Kt.internal[h]&&delete Kt.internal[h],Kt.external[h]&&delete Kt.external[h]},keys:()=>Array.from(new Set(Object.keys(Kt.internal).concat(Object.keys(Kt.external)))),count:h=>Object.values(Kt.get(h)).length},Mh={},hh=[],A4={},ph={};let yC=!1;const E4=(h,o)=>{vC(Kt.internal[Mh[h]],[o]),vC(Kt.external[Mh[h]],[o])},Eo=(h,o)=>{A4[h.toLowerCase()]=o.concat()},Ph=(h,o,i)=>{ph[h.toLowerCase()]=ph[h.toLowerCase()]||{},ph[h.toLowerCase()][o]=i.concat()},vC=(h,o)=>{h&&Object.keys(h).forEach(i=>{let c=h[i];hh.indexOf(parseInt(i))>=0&&(hh.splice(hh.indexOf(parseInt(i)),1),delete h[i]),c.apply(null,o)})},I4=function(h,o,i,c,f,x=!1){if(IP(),typeof i!="function")return Promise.reject("No valid callback function provided.");{if(h==="*")return Promise.reject("No valid module name provided");const w=o==="*",y=w?A4[h]:[o],a=[],r=Object.values(c).length>0,C=Object.keys(c).sort().map(S=>S+"="+JSON.stringify(c[S])).join("&");Eu++,f&&hh.push(Eu),y.forEach(S=>{const E=h+"."+S+(r?`.${C}`:"");if(Object.values(Kt.get(E)).length===0){const N=Object.assign({listen:!0},c),{id:K,promise:Se}=tn.listen(h,"on"+S[0].toUpperCase()+S.substring(1),N);Mh[K]=E,a.push(Se)}const A=x?Kt.setInternal:Kt.set;w?A(E,""+Eu,N=>i(S,N)):A(E,""+Eu,i)});let R,k,I=new Promise((S,E)=>{R=S,k=E});const m=Eu;return a.length?a.reduce((S,E)=>S.then(()=>E).then(A=>{R(m)}).catch(A=>{o==="*"?R(m):(gh(m,o,c),k(A))}),Promise.resolve()):R(Eu),I}},M4=function(...h){const o=h.pop(),[i,c,f]=R4(...h);return[i,c,o,f]},R4=function(...h){const o=(h.shift()||"*").toLowerCase(),i=h.shift()||"*",c={};for(let f=0;h.length;f++)c[ph[o][i][f]]=h.shift();return[o,i,c]},AP=function(...h){const[o,i,c,f]=M4(...h);return I4(o,i,c,f,!0)},_4=function(...h){const[o,i,c,f]=M4(...h);return I4(o,i,c,f,!1)},EP=function(...h){if(h&&h.length&&typeof h[0]=="number")return gh(h[0]);if(h&&h.length&&typeof h[1]=="number")return gh(h[1]);{const[o,i,c]=R4(...h);return gh(o,i,c)}},nh=(h,o)=>{const[i,c]=h.split(".").slice(0,2),f=Object.assign({listen:!1},o);tn.send(i,"on"+c[0].toUpperCase()+c.substr(1),f)},gh=function(h=!1,o=!1,i){if(o==="*"&&(o=!1),typeof h=="number"){const c=h.toString(),f=Kt.find(c);return f?(Kt.remove(c),Kt.count(f)===0&&nh(f),!0):!1}else if(!h&&!o)Kt.keys().forEach(c=>{Kt.removeKey(c),nh(c)});else if(!o)Kt.keys().forEach(c=>{c.indexOf(h.toLowerCase())===0&&(Kt.removeKey(c),nh(c))});else{const c=Object.values(i).length>0,f=Object.keys(i).sort().map(w=>w+"="+JSON.stringify(i[w])).join("&"),x=h+"."+o+(c?`.${f}`:"");Kt.removeKey(x),nh(x,i)}},IP=()=>{yC||(tn.addEventEmitter(E4),JD(_4),yC=!0)},ps={listen:_4,once:AP,clear:EP,broadcast(h,o){E4(Object.entries(Mh).find(([i,c])=>c==="app."+h)[0],o)}};function MP(h,o,i,c=void 0,f,x,w){const y=Object.values(i).length,a=T4(i,c,w);if(a==="getter")return tn.send(h,o,i);if(a==="subscriber"){if(f)throw new Error("Cannot subscribe to an immutable property");return ps.listen(h,o+"Changed",...Object.values(i),c)}else if(a==="setter"){if(f)throw new Error("Cannot set a value to an immutable property");if(x)throw new Error("Cannot set a value to a readonly property");return tn.send(h,"set"+o[0].toUpperCase()+o.substring(1),Object.assign({value:c},i))}else throw y<w?new Error("Cannot get a value without all required context parameters."):new Error("Property accessed with unexpected number of parameters.")}const mn={prop:MP};Eo("Accessibility",["audioDescriptionSettingsChanged","closedCaptionsSettingsChanged","highContrastUIChanged","voiceGuidanceSettingsChanged"]);tn.registerDeprecatedMethod("Accessibility","closedCaptions","Use Accessibility.closedCaptionsSettings() instead.");tn.registerDeprecatedMethod("Accessibility","voiceGuidance","Use Accessibility.voiceGuidanceSettings() instead.");function RP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Account","id",o,h,!0,!0,0)}function _P(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Account","uid",o,h,!0,!0,0)}const LP={id:RP,uid:_P};Eo("Advertising",["policyChanged"]);tn.registerDeprecatedMethod("Authentication","token","Use Authentication module has individual methods for each token type. instead.");Eo("Capabilities",["available","granted","revoked","unavailable"]);Ph("Capabilities","available",["capability"]);Ph("Capabilities","granted",["role","capability"]);Ph("Capabilities","revoked",["role","capability"]);Ph("Capabilities","unavailable",["capability"]);Eo("Device",["audioChanged","deviceNameChanged","hdcpChanged","hdrChanged","nameChanged","networkChanged","screenResolutionChanged","videoResolutionChanged"]);tn.registerDeprecatedMethod("Device","screenResolution","Use Use non-Firebolt APIs specific to your platform, e.g. W3C APIs instead.");tn.registerDeprecatedMethod("Device","onDeviceNameChanged","Use Device.name() instead.");tn.registerDeprecatedMethod("Device","onScreenResolutionChanged","Use screenResolution instead.");function DP(){return new Promise((h,o)=>{tn.send("device","version").then(i=>{i=i||{},i.sdk=i.sdk||{},i.sdk.major=parseInt("1"),i.sdk.minor=parseInt("5"),i.sdk.patch=parseInt("0"),i.sdk.readable="Firebolt Core SDK 1.5.0",h(i)}).catch(i=>{o(i)})})}function PP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","audio",o,h,!1,!0,0)}function OP(...h){return ps.clear("Device",...h)}function NP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","distributor",o,h,!0,!0,0)}function UP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","hdcp",o,h,!1,!0,0)}function BP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","hdr",o,h,!1,!0,0)}function FP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","id",o,h,!0,!0,0)}function jP(...h){return ps.listen("Device",...h)}function $P(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","make",o,h,!0,!0,0)}function zP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","model",o,h,!0,!0,0)}function VP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","name",o,h,!1,!0,0)}function HP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","network",o,h,!1,!0,0)}function GP(...h){return ps.once("Device",...h)}function XP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","platform",o,h,!0,!0,0)}function WP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","screenResolution",o,h,!1,!0,0)}function KP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","sku",o,h,!0,!0,0)}function YP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","type",o,h,!0,!0,0)}function qP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","uid",o,h,!0,!0,0)}function QP(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Device","videoResolution",o,h,!1,!0,0)}const Uu={Events:{DEVICE_NAME_CHANGED:"deviceNameChanged",NAME_CHANGED:"nameChanged",HDCP_CHANGED:"hdcpChanged",HDR_CHANGED:"hdrChanged",AUDIO_CHANGED:"audioChanged",SCREEN_RESOLUTION_CHANGED:"screenResolutionChanged",VIDEO_RESOLUTION_CHANGED:"videoResolutionChanged",NETWORK_CHANGED:"networkChanged"},NetworkState:{CONNECTED:"connected",DISCONNECTED:"disconnected"},NetworkType:{WIFI:"wifi",ETHERNET:"ethernet",HYBRID:"hybrid"},version:DP,audio:PP,clear:OP,distributor:NP,hdcp:UP,hdr:BP,id:FP,listen:jP,make:$P,model:zP,name:VP,network:HP,once:GP,platform:XP,screenResolution:WP,sku:KP,type:YP,uid:qP,videoResolution:QP},xC={},JP=(h,o,i)=>{if(xC[h])throw`Capability ${h} has multiple provider interfaces registered.`;i.forEach(c=>c.name=`${o}.${c.name}`),xC[h]=i.concat()};Eo("Discovery",["navigateTo","policyChanged"]);JP("xrn:firebolt:capability:discovery:interest","Discovery",[{name:"userInterest",focus:!1,response:!0,parameters:!0}]);tn.registerDeprecatedMethod("Discovery","entityInfo","Use null instead.");tn.registerDeprecatedMethod("Discovery","purchasedContent","Use null instead.");tn.registerDeprecatedMethod("Discovery","entitlements","Use Discovery.contentAccess() instead.");tn.registerDeprecatedMethod("Discovery","onPullEntityInfo","Use null instead.");tn.registerDeprecatedMethod("Discovery","onPullPurchasedContent","Use null instead.");Eo("Lifecycle",["background","foreground","inactive","suspended","unloading"]);Eo("Localization",["countryCodeChanged","languageChanged","localeChanged","localityChanged","postalCodeChanged","preferredAudioLanguagesChanged"]);tn.registerDeprecatedMethod("Localization","language","Use Localization.locale instead.");tn.registerDeprecatedMethod("Localization","onLanguageChanged","Use language instead.");function ZP(){return tn.send("Localization","additionalInfo",{},null)}function e9(...h){return ps.clear("Localization",...h)}function t9(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Localization","countryCode",o,h,!1,!0,0)}function n9(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Localization","language",o,h,!1,!0,0)}function i9(){return tn.send("Localization","latlon",{},null)}function r9(...h){return ps.listen("Localization",...h)}function o9(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Localization","locale",o,h,!1,!0,0)}function s9(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Localization","locality",o,h,!1,!0,0)}function u9(...h){return ps.once("Localization",...h)}function a9(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Localization","postalCode",o,h,!1,!0,0)}function l9(){let h=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(h=arguments[0],o={}),mn.prop("Localization","preferredAudioLanguages",o,h,!1,!0,0)}const Ml={Events:{LOCALITY_CHANGED:"localityChanged",POSTAL_CODE_CHANGED:"postalCodeChanged",COUNTRY_CODE_CHANGED:"countryCodeChanged",LANGUAGE_CHANGED:"languageChanged",PREFERRED_AUDIO_LANGUAGES_CHANGED:"preferredAudioLanguagesChanged",LOCALE_CHANGED:"localeChanged"},additionalInfo:ZP,clear:e9,countryCode:t9,language:n9,latlon:i9,listen:r9,locale:o9,locality:s9,once:u9,postalCode:a9,preferredAudioLanguages:l9};Eo("SecondScreen",["closeRequest","friendlyNameChanged","launchRequest"]);nP({Accessibility:C4,Account:rP,Advertising:oP,Authentication:sP,Capabilities:uP,Device:b4,Discovery:aP,Keyboard:lP,Lifecycle:fP,Localization:k4,Metrics:cP,Parameters:dP,Profile:hP,SecondScreen:pP,SecureStorage:gP,Platform:mP});const Oh={device:{about:"A module for querying about the device and it's capabilities",methods:[{name:"make",about:"The manufacturer of the device model"},{name:"model",about:"The manufacturer designated model of the device"},{name:"name",about:"The human readable name of the device"},{name:"network",about:"The current network status and type"},{name:"platform",about:"Platform identifier for the device"}]},account:{about:"A module for querying about the device account",methods:[{name:"id",about:"The platform back-office account identifier"},{name:"uid",about:"Unique id for the current app & account"}]},localization:{about:"Methods for accessing location and language preferences",methods:[{name:"countryCode",about:"Get the ISO 3166-1 alpha-2 code for the country device is located in"},{name:"language",about:"Get the ISO 639 1/2 code for the preferred language"},{name:"latlon",about:"Approximate latitude and longitude coordinates of the device location"},{name:"locality",about:"The locality/city the device is located in"},{name:"postalCode",about:"Get the postal code the device is located in"}]}},f9=Oe.Component("Module",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].w=i.w,r[0].h=i.h,r[0].color=i.bColor,r[0].effects=[{type:"radius",props:{radius:8}}],a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].x=i.w/2,r[1].y=i.h/2,r[1].mount="{x:0.5, y:0.5}",r[1].content=i.name,r[1].color=i.fColor,r[1].font="raleway",r[1].__textnode=!0,a[1].populate(r[1]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("color",o.bColor)},function(o,i,c,f,x,w){i[0].set("effects",[{type:"radius",props:{radius:8}}])},function(o,i,c,f,x,w){i[1].set("content",o.name)}],context:{}},state(){return{w:300,h:250,bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }",fColor:"#fff"}},props:["name"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}},input:{enter(){this.$router.to(`/examples/firebolt/${this.name}`)}}}),c9=Oe.Component("Methods",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].w=i.w,r[1].h=i.h,r[1].color=i.nameBgColor,r[1].effects=[{type:"radius",props:{radius:[8,8,0,0]}}],a[1].populate(r[1]),o=a[1],r[2]={},a[2]=this.element({parent:o||"root"},i),r[2].content=i.name,r[2].x=i.w/2,r[2].y=i.h/2,r[2].mount=.5,r[2].color="0xffffffff",r[2].font="lato",r[2].size=50,r[2].__textnode=!0,a[2].populate(r[2]),o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},i),r[3].w=i.w,r[3].h=50,r[3].color="0x4b5563ff",r[3].y=75,r[3].effects=[{type:"radius",props:{radius:[0,0,8,8]}}],a[3].populate(r[3]),o=a[3],r[4]={},a[4]=this.element({parent:o||"root"},i),r[4].content=i.about,r[4].maxwidth=i.w,r[4].align="center",r[4].font="lato",r[4].maxlines=1,r[4].size=28,r[4].y=6,r[4].__textnode=!0,a[4].populate(r[4]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("color",o.nameBgColor)},function(o,i,c,f,x,w){i[1].set("effects",[{type:"radius",props:{radius:[8,8,0,0]}}])},function(o,i,c,f,x,w){i[2].set("content",o.name)},function(o,i,c,f,x,w){i[3].set("effects",[{type:"radius",props:{radius:[0,0,8,8]}}])},function(o,i,c,f,x,w){i[4].set("content",o.about)}],context:{}},state(){return{w:600,h:75,nameBgColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["name","about"],hooks:{focus(){this.nameBgColor="{ top: '#6366F1', bottom: '#4F46E5' }",this.$emit("execute",this.name)},unfocus(){this.nameBgColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),Nh=Oe.Component("List",{components:{Method:c9,Module:f9},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E,A=!1,N=[];r[0]={},a[0]=this.element({parent:o||"root"},A===!0?E:i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},A===!0?E:i),r[1].y={transition:i.y},a[1].populate(r[1]),o=a[1],k[2]=[];let K,Se;C[2]=(me=[],V,re)=>{const H=w(me),z=new Set;let se=H.length;const we={};for(K=we.from||0,Se=("to"in we)?we.to:H.length;se--;){const ke=H[se];se<Se&&se>=K&&z.add(""+ke.name)}let Fe=re.length;for(;Fe--;)if(z.has(re[Fe])===!1){const ke=re[Fe];V[2][ke]&&V[2][ke].destroy(),V[2][ke]=null,delete V[2][ke],V[3][ke]&&V[3][ke].destroy(),V[3][ke]=null,delete V[3][ke]}re.length=0;const Je=H.length,$e=[];for(let ke=0;ke<Je;ke++){if(ke<K||ke>=Se)continue;const j=Object.create(i);if(o=V[1],j.item=H[ke],j.index=ke,j.key=""+j.item.name,re.push(j.key),N[2]=c.components&&c.components.Method||f.Method,V[2]===void 0&&(V[2]={}),r[2]={},V[2][j.key]===void 0&&(V[2][j.key]=this.element({parent:o||"root"},A===!0?E:i)),r[2].name=j.item.name,r[2].about=j.item.about,r[2].y=j.index*160,r[2].ref=j.type+j.index,I[2]=[],typeof N[2]<"u")for(let De in N[2][Symbol.for("config")].props)delete r[2][N[2][Symbol.for("config")].props[De]],I[2].push(N[2][Symbol.for("config")].props[De]);if(V[2][j.key].nodeId===void 0&&V[2][j.key].populate(r[2]),V[3]===void 0&&(V[3]={}),o=V[2][j.key],R[3]={},V[3][j.key]===void 0){if(R[3].name=j.item.name,R[3].about=j.item.about,S=j.index*160,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[3].y=S,S=j.type+j.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[3].ref=S,m=R[3].is||"Method",f[3],typeof m=="string"){if(f[3]=c.components&&c.components[m]||f[m],!f[3])throw new Error('Component "Method" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[3]=m);V[3][j.key]=f[3].call(null,{props:R[3]},V[2][j.key],i),V[3][j.key][Symbol.for("slots")][0]?(o=V[3][j.key][Symbol.for("slots")][0],E=V[3][j.key],A=!0):o=V[3][j.key][Symbol.for("children")][0]}let lt=()=>{(typeof I>"u"||typeof I[2]>"u"||I[2].indexOf("y")===-1)&&V[2][j.key].set("y",j.index*160)};x(lt,null),$e.push(lt),i[Symbol.for("effects")].push(lt),V[3][j.key][Symbol.for("props")].y=j.index*160}return $e};let Me=()=>{C[2](i.methods,a,k[2])};i[Symbol.for("effects")].push(Me),x(Me,["methods"]);let ue=()=>{i.type;for(let me=0;me<i.methods.length;me++){if(me<K||me>=Se)continue;const V={};V.index=me,V.item=i.methods[me],V.key=V.item.name,(typeof I>"u"||typeof I[2]>"u"||I[2].indexOf("ref")===-1)&&a[2][V.key].set("ref",i.type+V.index)}};i[Symbol.for("effects")].push(ue),x(ue);let he=()=>{i.type;for(let me=0;me<i.methods.length;me++){if(me<K||me>=Se)continue;const V={};V.index=me,V.item=i.methods[me],V.key=V.item.name,a[3][V.key][Symbol.for("props")].ref=i.type+V.index}};i[Symbol.for("effects")].push(he),x(he),o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},A===!0?E:i),r[4].x={transition:i.x},r[4].y=325,a[4].populate(r[4]),o=a[4],k[5]=[];let oe,pe;C[5]=(me=[],V,re)=>{const H=w(me),z=new Set;let se=H.length;const we={};for(oe=we.from||0,pe=("to"in we)?we.to:H.length;se--;){const ke=H[se];se<pe&&se>=oe&&z.add(""+ke.id)}let Fe=re.length;for(;Fe--;)if(z.has(re[Fe])===!1){const ke=re[Fe];V[5][ke]&&V[5][ke].destroy(),V[5][ke]=null,delete V[5][ke],V[6][ke]&&V[6][ke].destroy(),V[6][ke]=null,delete V[6][ke]}re.length=0;const Je=H.length,$e=[];for(let ke=0;ke<Je;ke++){if(ke<oe||ke>=pe)continue;const j=Object.create(i);if(o=V[4],j.item=H[ke],j.index=ke,j.key=""+j.item.id,re.push(j.key),N[5]=c.components&&c.components.Module||f.Module,V[5]===void 0&&(V[5]={}),r[5]={},V[5][j.key]===void 0&&(V[5][j.key]=this.element({parent:o||"root"},A===!0?E:i)),r[5].name=j.item.name,r[5].ref=j.type+j.index,r[5].x=j.index*400,I[5]=[],typeof N[5]<"u")for(let lt in N[5][Symbol.for("config")].props)delete r[5][N[5][Symbol.for("config")].props[lt]],I[5].push(N[5][Symbol.for("config")].props[lt]);if(V[5][j.key].nodeId===void 0&&V[5][j.key].populate(r[5]),V[6]===void 0&&(V[6]={}),o=V[5][j.key],R[6]={},V[6][j.key]===void 0){if(R[6].name=j.item.name,S=j.type+j.index,Array.isArray(S)===!0&&(S=w(S).slice(0)),R[6].ref=S,R[6].x=j.index*400,m=R[6].is||"Module",f[6],typeof m=="string"){if(f[6]=c.components&&c.components[m]||f[m],!f[6])throw new Error('Component "Module" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[6]=m);V[6][j.key]=f[6].call(null,{props:R[6]},V[5][j.key],i),V[6][j.key][Symbol.for("slots")][0]?(o=V[6][j.key][Symbol.for("slots")][0],E=V[6][j.key],A=!0):o=V[6][j.key][Symbol.for("children")][0]}}return $e};let D=()=>{C[5](i.modules,a,k[5])};i[Symbol.for("effects")].push(D),x(D,["modules"]);let ne=()=>{i.type;for(let me=0;me<i.modules.length;me++){if(me<oe||me>=pe)continue;const V={};V.index=me,V.item=i.modules[me],V.key=V.item.id,(typeof I>"u"||typeof I[5]>"u"||I[5].indexOf("ref")===-1)&&a[5][V.key].set("ref",i.type+V.index)}};i[Symbol.for("effects")].push(ne),x(ne);let le=()=>{i.type;for(let me=0;me<i.modules.length;me++){if(me<oe||me>=pe)continue;const V={};V.index=me,V.item=i.modules[me],V.key=V.item.id,a[6][V.key][Symbol.for("props")].ref=i.type+V.index}};return i[Symbol.for("effects")].push(le),x(le),{elms:a,cleanup:()=>{S=null,E=null,i=null,o=null,k[2].length=0,C[2]=null,N[2]=null,R[3]=null,f[3]=null,Me=null,ue=null,he=null,k[5].length=0,C[5]=null,N[5]=null,R[6]=null,f[6]=null,D=null,ne=null,le=null,N.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("y",{transition:o.y})},function(o,i,c,f,x,w){i[4].set("x",{transition:o.x})}],context:{}},state(){return{x:400,y:100,activeIndex:0}},props:["data","type"],computed:{methods(){return this.isModule,this.data,this.isModule?[]:this.data},modules(){return this.isModule,this.data,this.isModule?this.data:[]},isModule(){return this.type,this.type==="module"}},watch:{activeIndex(h){const o=this.$select(`${this.type}${h}`);o&&o.$focus&&o.$focus()}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},left(){this.isModule&&this.activeIndex>0&&this.move(-1)},down(){!this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},up(){!this.isModule&&this.activeIndex>0&&this.move(-1)}},methods:{move(h){const o=this.activeIndex+h;this.type=="method"?this.y=o>5?-(o-5)*160-100:100:this.type=="module"&&(this.x=o>3?-(o-3)*400-400:400),this.activeIndex=o}}}),d9=Oe.Component("FireBolt",{components:{List:Nh},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m=!1,S=0,E=[];if(r[0]={},a[0]=this.element({parent:o||"root"},m===!0?I:i),a[0].populate(r[0]),m===!0&&(S-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},m===!0?I:i),r[1].content="FireBolt Modules",r[1].x=960,r[1].y=80,r[1].mount="{x:0.5}",r[1].size=80,r[1].font="raleway",r[1].__textnode=!0,a[1].populate(r[1]),m===!0&&(S-=1),E[2]=c.components&&c.components.List||f.List,o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},m===!0?I:i),r[2].data=i.moduleNames,r[2].type="module",r[2].ref="modules",R[2]=[],typeof E[2]<"u")for(let A in E[2][Symbol.for("config")].props)delete r[2][E[2][Symbol.for("config")].props[A]],R[2].push(E[2][Symbol.for("config")].props[A]);if(a[2].populate(r[2]),m===!0&&(S-=1),o=a[2],C[3]={},C[3].data=i.moduleNames,C[3].type="module",C[3].ref="modules",k=C[3].is||"List",f[3],typeof k=="string"){if(f[3]=c.components&&c.components[k]||f[k],!f[3])throw new Error('Component "List" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[3]=k);return a[3]=f[3].call(null,{props:C[3]},a[2],i),a[3][Symbol.for("slots")][0]?(o=a[3][Symbol.for("slots")][0],I=a[3],m=!0):o=a[3][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),{elms:a,cleanup:()=>{I=null,i=null,o=null,E[2]=null,C[3]=null,f[3]=null,E.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[],context:{}},computed:{moduleNames(){return Object.keys(Oh).map(h=>({id:h,name:h.charAt(0).toUpperCase()+h.slice(1)}))}},hooks:{focus(){const h=this.$select("modules");h&&h.$focus&&h.$focus()}}}),h9=Oe.Component("DeviceModule",{components:{List:Nh},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m=!1,S=0,E=[];if(r[0]={},a[0]=this.element({parent:o||"root"},m===!0?I:i),a[0].populate(r[0]),m===!0&&(S-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},m===!0?I:i),r[1].content="Device",r[1].x=960,r[1].mount="{x:0.5}",r[1].y=50,r[1].font="raleway",r[1].size=40,r[1].__textnode=!0,a[1].populate(r[1]),m===!0&&(S-=1),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},m===!0?I:i),r[2].content=i.device.about,r[2].x=960,r[2].mount="{x:0.5}",r[2].y=110,r[2].font="lato",r[2].__textnode=!0,a[2].populate(r[2]),m===!0&&(S-=1),E[3]=c.components&&c.components.List||f.List,o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},m===!0?I:i),r[3].data=i.device.methods,r[3].x=300,r[3].ref="methods",r[3].type="method",r[3].y=100,R[3]=[],typeof E[3]<"u")for(let A in E[3][Symbol.for("config")].props)delete r[3][E[3][Symbol.for("config")].props[A]],R[3].push(E[3][Symbol.for("config")].props[A]);if(a[3].populate(r[3]),m===!0&&(S-=1),o=a[3],C[4]={},C[4].data=i.device.methods,C[4].x=300,C[4].ref="methods",C[4].type="method",C[4].y=100,k=C[4].is||"List",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "List" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);return a[4]=f[4].call(null,{props:C[4]},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],I=a[4],m=!0):o=a[4][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},m===!0?I:i),r[5].x=1400,r[5].y=540,r[5].content=i.response,r[5].size=100,r[5].mount=.5,r[5].font="lato",r[5].show=!i.isNetworkRes,r[5].__textnode=!0,a[5].populate(r[5]),m===!0&&(S-=1),o=a[0],r[6]={},a[6]=this.element({parent:o||"root"},m===!0?I:i),r[6].show=i.isNetworkRes,a[6].populate(r[6]),m===!0&&(S-=1),o=a[6],r[7]={},a[7]=this.element({parent:o||"root"},m===!0?I:i),r[7].content="State: "+i.networkRes.state,r[7].size=70,r[7].font="lato",r[7].x=1400,r[7].y=500,r[7].mount=.5,r[7].__textnode=!0,a[7].populate(r[7]),m===!0&&(S-=1),o=a[6],r[8]={},a[8]=this.element({parent:o||"root"},m===!0?I:i),r[8].content="Type: "+i.networkRes.type,r[8].size=70,r[8].font="lato",r[8].y=580,r[8].x=1400,r[8].mount=.5,r[8].__textnode=!0,a[8].populate(r[8]),m===!0&&(S-=1),{elms:a,cleanup:()=>{I=null,i=null,o=null,E[3]=null,C[4]=null,f[4]=null,E.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[5].set("content",o.response)},function(o,i,c,f,x,w){i[5].set("show",!o.isNetworkRes)},function(o,i,c,f,x,w){i[6].set("show",o.isNetworkRes)},function(o,i,c,f,x,w){i[7].set("content","State: "+o.networkRes.state)},function(o,i,c,f,x,w){i[8].set("content","Type: "+o.networkRes.type)}],context:{}},state(){return{device:Oh.device,response:"",networkRes:{},isNetworkRes:!1}},hooks:{ready(){this.$listen("execute",async h=>{switch(this.$log.info(`Execute Device ${h} API`),this.isNetworkRes=!1,h){case"make":this.response=await Uu.make();break;case"model":this.response=await Uu.model();break;case"name":this.response=await Uu.name();break;case"network":Object.assign(this.networkRes,await Uu.network()),this.isNetworkRes=!0;break;case"platform":this.response=await Uu.platform();break}})},focus(){const h=this.$select("methods");h&&h.$focus&&h.$focus()}}}),p9=Oe.Component("AccountModule",{components:{List:Nh},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m=!1,S=0,E=[];if(r[0]={},a[0]=this.element({parent:o||"root"},m===!0?I:i),a[0].populate(r[0]),m===!0&&(S-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},m===!0?I:i),r[1].content="Account",r[1].x=960,r[1].mount="{x:0.5}",r[1].y=50,r[1].font="raleway",r[1].size=40,r[1].__textnode=!0,a[1].populate(r[1]),m===!0&&(S-=1),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},m===!0?I:i),r[2].content=i.account.about,r[2].x=960,r[2].mount="{x:0.5}",r[2].y=110,r[2].font="lato",r[2].__textnode=!0,a[2].populate(r[2]),m===!0&&(S-=1),E[3]=c.components&&c.components.List||f.List,o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},m===!0?I:i),r[3].data=i.account.methods,r[3].x=300,r[3].ref="methods",r[3].y=300,r[3].type="method",R[3]=[],typeof E[3]<"u")for(let A in E[3][Symbol.for("config")].props)delete r[3][E[3][Symbol.for("config")].props[A]],R[3].push(E[3][Symbol.for("config")].props[A]);if(a[3].populate(r[3]),m===!0&&(S-=1),o=a[3],C[4]={},C[4].data=i.account.methods,C[4].x=300,C[4].ref="methods",C[4].y=300,C[4].type="method",k=C[4].is||"List",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "List" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);return a[4]=f[4].call(null,{props:C[4]},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],I=a[4],m=!0):o=a[4][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},m===!0?I:i),r[5].x=1400,r[5].y=540,r[5].content=i.response,r[5].size=i.size,r[5].mount=.5,r[5].font="lato",r[5].__textnode=!0,a[5].populate(r[5]),m===!0&&(S-=1),{elms:a,cleanup:()=>{I=null,i=null,o=null,E[3]=null,C[4]=null,f[4]=null,E.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[5].set("content",o.response)},function(o,i,c,f,x,w){i[5].set("size",o.size)}],context:{}},state(){return{account:Oh.account,response:"",size:100}},hooks:{ready(){this.$listen("execute",async h=>{switch(this.$log.info(`Execute Account ${h} API`),h){case"id":this.size=100,this.response=await LP.id();break;case"uid":this.size=40,this.response=await Uu.uid();break}})},focus(){const h=this.$select("methods");h&&h.$focus&&h.$focus()}}}),g9=Oe.Component("LocalizationModule",{components:{List:Nh},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m=!1,S=0,E=[];if(r[0]={},a[0]=this.element({parent:o||"root"},m===!0?I:i),a[0].populate(r[0]),m===!0&&(S-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},m===!0?I:i),r[1].content="Localization",r[1].x=960,r[1].mount="{x:0.5}",r[1].y=50,r[1].font="raleway",r[1].size=40,r[1].__textnode=!0,a[1].populate(r[1]),m===!0&&(S-=1),o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},m===!0?I:i),r[2].content=i.localization.about,r[2].x=960,r[2].mount="{x:0.5}",r[2].y=110,r[2].font="lato",r[2].__textnode=!0,a[2].populate(r[2]),m===!0&&(S-=1),E[3]=c.components&&c.components.List||f.List,o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},m===!0?I:i),r[3].data=i.localization.methods,r[3].x=300,r[3].ref="methods",r[3].y=100,r[3].type="method",R[3]=[],typeof E[3]<"u")for(let A in E[3][Symbol.for("config")].props)delete r[3][E[3][Symbol.for("config")].props[A]],R[3].push(E[3][Symbol.for("config")].props[A]);if(a[3].populate(r[3]),m===!0&&(S-=1),o=a[3],C[4]={},C[4].data=i.localization.methods,C[4].x=300,C[4].ref="methods",C[4].y=100,C[4].type="method",k=C[4].is||"List",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "List" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);return a[4]=f[4].call(null,{props:C[4]},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],I=a[4],m=!0):o=a[4][Symbol.for("children")][0],m===!0&&S===0&&(m=!1),o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},m===!0?I:i),r[5].x=1400,r[5].y=540,r[5].content=i.response,r[5].size=i.size,r[5].mount=.5,r[5].font="lato",r[5].__textnode=!0,a[5].populate(r[5]),m===!0&&(S-=1),{elms:a,cleanup:()=>{I=null,i=null,o=null,E[3]=null,C[4]=null,f[4]=null,E.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[5].set("content",o.response)},function(o,i,c,f,x,w){i[5].set("size",o.size)}],context:{}},state(){return{localization:Oh.localization,response:"",size:100}},hooks:{ready(){this.$listen("execute",async h=>{switch(this.$log.info(`Execute Keyboard ${h} API`),this.response="null",h){case"countryCode":this.response=await Ml.countryCode();break;case"language":this.response=await Ml.language();break;case"latlon":this.response=(await Ml.latlon()).toString();break;case"locality":this.response=await Ml.locality();break;case"postalCode":this.response=await Ml.postalCode();break}})},focus(){const h=this.$select("methods");h&&h.$focus&&h.$focus()}}}),m9=[{path:"/examples/firebolt",component:d9},{path:"/examples/firebolt/device",component:h9},{path:"/examples/firebolt/account",component:p9},{path:"/examples/firebolt/localization",component:g9}],y9=Oe.Component("Item",{code:{render:function(o,i,c,f,x,w,y){const a=[],r=[];return r[0]={},a[0]=this.element({parent:o||"root"},i),r[0].color=i.hasFocus?"0xe0f2feff":"0xfef9c3ff",r[0].w=200,r[0].h=200,r[0].effects=[{type:"radius",props:{radius:12}}],a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},i),r[1].content=i.name,r[1].size=i.hasFocus?38:32,r[1].color=i.hasFocus?"0x1e3a8aff":"0x2563ebff",r[1].placement="{x: 'center', y: 'middle'}",r[1].__textnode=!0,a[1].populate(r[1]),{elms:a,cleanup:()=>{i=null,o=null,a.length=0,f.length=0,r.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("color",o.hasFocus?"0xe0f2feff":"0xfef9c3ff")},function(o,i,c,f,x,w){i[0].set("effects",[{type:"radius",props:{radius:12}}])},function(o,i,c,f,x,w){i[1].set("content",o.name)},function(o,i,c,f,x,w){i[1].set("size",o.hasFocus?38:32)},function(o,i,c,f,x,w){i[1].set("color",o.hasFocus?"0x1e3a8aff":"0x2563ebff")}],context:{}},props:["name"],state(){return{message:null}},hooks:{focus(){this.message=this.$announcer.speak(this.name)},unfocus(){this.message&&(this.message.stop(),this.message.cancel())}}}),v9=Oe.Component("Row",{components:{Item:y9},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[],k=[],I=[];let m,S,E=!1,A=[];r[0]={},a[0]=this.element({parent:o||"root"},E===!0?S:i),a[0].populate(r[0]),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},E===!0?S:i),r[1].content=i.title,r[1].size=40,r[1].__textnode=!0,a[1].populate(r[1]),o=a[0],k[2]=[];let N,K;C[2]=(Me=[],ue,he)=>{const oe=w(Me),pe=new Set;let D=oe.length;const ne={};for(N=ne.from||0,K=("to"in ne)?ne.to:oe.length;D--;)oe[D],D<K&&D>=N&&pe.add(""+D);let le=he.length;for(;le--;)if(pe.has(he[le])===!1){const re=he[le];ue[2][re]&&ue[2][re].destroy(),ue[2][re]=null,delete ue[2][re],ue[3][re]&&ue[3][re].destroy(),ue[3][re]=null,delete ue[3][re]}he.length=0;const me=oe.length,V=[];for(let re=0;re<me;re++){if(re<N||re>=K)continue;const H=Object.create(i);if(o=ue[0],H.item=oe[re],H.index=re,H.key=""+re,H.__ref="item"+re,he.push(H.key),A[2]=c.components&&c.components.Item||f.Item,ue[2]===void 0&&(ue[2]={}),r[2]={},ue[2][H.key]===void 0&&(ue[2][H.key]=this.element({parent:o||"root"},E===!0?S:i)),r[2].name=H.item,r[2].y=100,r[2].x=H.index*250+100,r[2].ref=H.__ref,I[2]=[],typeof A[2]<"u")for(let z in A[2][Symbol.for("config")].props)delete r[2][A[2][Symbol.for("config")].props[z]],I[2].push(A[2][Symbol.for("config")].props[z]);if(ue[2][H.key].nodeId===void 0&&ue[2][H.key].populate(r[2]),ue[3]===void 0&&(ue[3]={}),o=ue[2][H.key],R[3]={},ue[3][H.key]===void 0){if(R[3].name=H.item,R[3].y=100,R[3].x=H.index*250+100,R[3].ref=H.__ref,m=R[3].is||"Item",f[3],typeof m=="string"){if(f[3]=c.components&&c.components[m]||f[m],!f[3])throw new Error('Component "Item" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(f[3]=m);ue[3][H.key]=f[3].call(null,{props:R[3]},ue[2][H.key],i),ue[3][H.key][Symbol.for("slots")][0]?(o=ue[3][H.key][Symbol.for("slots")][0],S=ue[3][H.key],E=!0):o=ue[3][H.key][Symbol.for("children")][0]}}return V};let Se=()=>{C[2](i.items,a,k[2])};return i[Symbol.for("effects")].push(Se),x(Se,["items"]),{elms:a,cleanup:()=>{S=null,i=null,o=null,k[2].length=0,C[2]=null,A[2]=null,R[3]=null,f[3]=null,Se=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0,I.length=0}}},effects:[function(o,i,c,f,x,w){i[1].set("content",o.title)}],context:{}},props:["title","items"],state(){return{focusIndex:-1,message:null}},hooks:{focus(){this.message=this.$announcer.speak("Row with different "+this.title),this.focusIndex=0,this.$trigger("focusIndex")},unfocus(){this.message&&(this.message.stop(),this.message.cancel())}},watch:{focusIndex(h){this.$select("item"+h).$focus()}},input:{right(){this.focusIndex=Math.min(this.focusIndex+1,this.items.length-1)},left(){this.focusIndex=Math.max(this.focusIndex-1,0)}}}),x9=Oe.Component("Announcer",{components:{Row:v9},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),r[0].width=o.node.width*(100/100),r[0].y=50,a[0].populate(r[0]),S===!0&&(E-=1),o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].placement="{x: 'center'}",r[1].size=50,r[1].content="Food",r[1].__textnode=!0,a[1].populate(r[1]),S===!0&&(E-=1),A[2]=c.components&&c.components.Row||f.Row,o=a[0],r[2]={},a[2]=this.element({parent:o||"root"},S===!0?m:i),r[2].title="Fruits",r[2].x=200,r[2].y=150,r[2].items=["Banana","Strawberry","Kiwi","Mango","Grape"],r[2].ref="row1",R[2]=[],typeof A[2]<"u")for(let N in A[2][Symbol.for("config")].props)delete r[2][A[2][Symbol.for("config")].props[N]],R[2].push(A[2][Symbol.for("config")].props[N]);if(a[2].populate(r[2]),S===!0&&(E-=1),o=a[2],C[3]={},C[3].title="Fruits",C[3].x=200,C[3].y=150,I=["Banana","Strawberry","Kiwi","Mango","Grape"],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[3].items=I,C[3].ref="row1",k=C[3].is||"Row",f[3],typeof k=="string"){if(f[3]=c.components&&c.components[k]||f[k],!f[3])throw new Error('Component "Row" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[3]=k);if(a[3]=f[3].call(null,{props:C[3]},a[2],i),a[3][Symbol.for("slots")][0]?(o=a[3][Symbol.for("slots")][0],m=a[3],S=!0):o=a[3][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[4]=c.components&&c.components.Row||f.Row,o=a[0],r[4]={},a[4]=this.element({parent:o||"root"},S===!0?m:i),r[4].title="Snacks",r[4].x=200,r[4].y=600,r[4].items=["Pizza","Burger","Fries","Popcorn","Chocolate"],r[4].ref="row2",R[4]=[],typeof A[4]<"u")for(let N in A[4][Symbol.for("config")].props)delete r[4][A[4][Symbol.for("config")].props[N]],R[4].push(A[4][Symbol.for("config")].props[N]);if(a[4].populate(r[4]),S===!0&&(E-=1),o=a[4],C[5]={},C[5].title="Snacks",C[5].x=200,C[5].y=600,I=["Pizza","Burger","Fries","Popcorn","Chocolate"],Array.isArray(I)===!0&&(I=w(I).slice(0)),C[5].items=I,C[5].ref="row2",k=C[5].is||"Row",f[5],typeof k=="string"){if(f[5]=c.components&&c.components[k]||f[k],!f[5])throw new Error('Component "Row" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[5]=k);return a[5]=f[5].call(null,{props:C[5]},a[4],i),a[5][Symbol.for("slots")][0]?(o=a[5][Symbol.for("slots")][0],m=a[5],S=!0):o=a[5][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[2]=null,C[3]=null,f[3]=null,A[4]=null,C[5]=null,f[5]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[2]>"u"||skips[2].indexOf("items")===-1)&&i[2].set("items",["Banana","Strawberry","Kiwi","Mango","Grape"])},function(o,i,c,f,x,w){i[3][Symbol.for("props")].items=["Banana","Strawberry","Kiwi","Mango","Grape"]},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[4]>"u"||skips[4].indexOf("items")===-1)&&i[4].set("items",["Pizza","Burger","Fries","Popcorn","Chocolate"])},function(o,i,c,f,x,w){i[5][Symbol.for("props")].items=["Pizza","Burger","Fries","Popcorn","Chocolate"]}],context:{}},state(){return{focusIndex:1}},watch:{focusIndex(h){this.$select("row"+h).$focus()}},hooks:{focus(){this.$announcer.speak("The topic is Food"),this.$trigger("focusIndex")}},input:{up(){this.focusIndex=Math.max(this.focusIndex-1,1)},down(){this.focusIndex=Math.min(this.focusIndex+1,2)}}}),L4=new URLSearchParams(window.location.search),w9=!!L4.get("source"),S9=!!L4.get("fps"),T9=Oe.Application({components:{SourceInfo:f4},code:{render:function(o,i,c,f,x,w,y){const a=[],r=[],C=[],R=[];let k,I,m,S=!1,E=0,A=[];if(r[0]={},a[0]=this.element({parent:o||"root"},S===!0?m:i),r[0].w=1920,r[0].h=1080,r[0].color=i.backgroundColor,a[0].populate(r[0]),S===!0&&(E-=1),A[1]=c.components&&c.components.RouterView||f.RouterView,o=a[0],r[1]={},a[1]=this.element({parent:o||"root"},S===!0?m:i),r[1].w=o.node.width*(100/100),r[1].h=o.node.height*(100/100),R[1]=[],typeof A[1]<"u")for(let N in A[1][Symbol.for("config")].props)delete r[1][A[1][Symbol.for("config")].props[N]],R[1].push(A[1][Symbol.for("config")].props[N]);if(a[1].populate(r[1]),S===!0&&(E-=1),o=a[1],C[2]={},C[2].w=o.node.width*(100/100),C[2].h=o.node.height*(100/100),k=C[2].is||"RouterView",f[2],typeof k=="string"){if(f[2]=c.components&&c.components[k]||f[k],!f[2])throw new Error('Component "RouterView" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[2]=k);if(a[2]=f[2].call(null,{props:C[2]},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],m=a[2],S=!0):o=a[2][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[3]=c.components&&c.components.FPScounter||f.FPScounter,o=a[0],r[3]={},a[3]=this.element({parent:o||"root"},S===!0?m:i),r[3].x=1610,r[3].show=i.showFPS,R[3]=[],typeof A[3]<"u")for(let N in A[3][Symbol.for("config")].props)delete r[3][A[3][Symbol.for("config")].props[N]],R[3].push(A[3][Symbol.for("config")].props[N]);if(a[3].populate(r[3]),S===!0&&(E-=1),o=a[3],C[4]={},C[4].x=1610,I=i.showFPS,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[4].show=I,k=C[4].is||"FPScounter",f[4],typeof k=="string"){if(f[4]=c.components&&c.components[k]||f[k],!f[4])throw new Error('Component "FPScounter" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[4]=k);if(a[4]=f[4].call(null,{props:C[4]},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],m=a[4],S=!0):o=a[4][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),A[5]=c.components&&c.components.SourceInfo||f.SourceInfo,o=a[0],r[5]={},a[5]=this.element({parent:o||"root"},S===!0?m:i),r[5].ref="info",r[5].show=i.showInfo,R[5]=[],typeof A[5]<"u")for(let N in A[5][Symbol.for("config")].props)delete r[5][A[5][Symbol.for("config")].props[N]],R[5].push(A[5][Symbol.for("config")].props[N]);if(a[5].populate(r[5]),S===!0&&(E-=1),o=a[5],C[6]={},C[6].ref="info",I=i.showInfo,Array.isArray(I)===!0&&(I=w(I).slice(0)),C[6].show=I,k=C[6].is||"SourceInfo",f[6],typeof k=="string"){if(f[6]=c.components&&c.components[k]||f[k],!f[6])throw new Error('Component "SourceInfo" not found')}else typeof k=="function"&&k[Symbol.for("isComponent")]===!0&&(f[6]=k);return a[6]=f[6].call(null,{props:C[6]},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],m=a[6],S=!0):o=a[6][Symbol.for("children")][0],S===!0&&E===0&&(S=!1),{elms:a,cleanup:()=>{I=null,m=null,i=null,o=null,A[1]=null,C[2]=null,f[2]=null,A[3]=null,C[4]=null,f[4]=null,A[5]=null,C[6]=null,f[6]=null,A.length=0,a.length=0,f.length=0,r.length=0,C.length=0,R.length=0}}},effects:[function(o,i,c,f,x,w){i[0].set("color",o.backgroundColor)},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[3]>"u"||skips[3].indexOf("show")===-1)&&i[3].set("show",o.showFPS)},function(o,i,c,f,x,w){i[4][Symbol.for("props")].show=o.showFPS},function(o,i,c,f,x,w){(typeof skips>"u"||typeof skips[5]>"u"||skips[5].indexOf("show")===-1)&&i[5].set("show",o.showInfo)},function(o,i,c,f,x,w){i[6][Symbol.for("props")].show=o.showInfo}],context:{}},state(){return{backgroundColor:"#1e293b",showFPS:S9,showInfo:!1}},routes:[{path:"/",component:IL,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>IC(()=>import("./Loading-D9wIrhCI.js"),[])},{path:"/demos/intro",component:()=>new Promise(h=>{h(RL)})},{path:"/demos/theming",component:DL},{path:"/demos/tmdb",component:GL},{path:"/demos/sprites",component:WL},{path:"/demos/focushandling",component:YL},{path:"/demos/memory-game",component:PD,announce:"Let's play Memory"},{path:"/demos/player",component:lD},{path:"/examples/positioning",component:qL},{path:"/examples/colors",component:fD},{path:"/examples/gradients",component:cD},{path:"/examples/transitions",component:dD},{path:"/examples/alpha",component:hD},{path:"/examples/scaling",component:pD},{path:"/examples/rotation",component:gD},{path:"/examples/keyinput",component:mD},{path:"/examples/texts",component:yD},{path:"/examples/images",component:vD},{path:"/examples/components",component:xD},{path:"/examples/forloop",component:wD},{path:"/examples/forloop-advanced",component:kD},{path:"/examples/effects",component:AD},{path:"/examples/showif",component:ED},{path:"/examples/events",component:ID},{path:"/examples/slots",component:_D},{path:"/examples/viewport",component:UD},...VD,{path:"/examples/resize",component:HD},{path:"/examples/languageplugin",component:hC},{path:"/examples/keycodes",component:WD},{path:"/examples/translations",component:hC},{path:"/examples/special-characters",component:qD},{path:"/examples/layout",component:QD},{path:"/examples/announcer",component:x9,announce:"Welcome to the announcement example page"},{path:"/benchmarks/exponential",component:ND},...m9],hooks:{ready(){w9===!0&&(this.showInfo=!0),this.$listen("changeBackground",h=>{this.backgroundColor=h?h+80:"#1e293b"}),this.$listen("clearBackground",()=>{this.backgroundColor="transparent"})}},input:{async intercept(h){return h.key==="x"?(this.$log.info(`Intercepting key press (${h.key}) in App Component`),new Promise(o=>{this.$log.info("Executing an async operation"),setTimeout(()=>{this.$log.info("Finished an async operation"),o(h)},2e3)})):h},escape(){this.quit()},back(){this.$router.to("/")},sourceCode(){this.showInfo=!1;const h=C9(this.$router.currentRoute.path);h&&window.open(`https://github.com/lightning-js/blits-example-app/tree/master/${h}`,"_blank")}}}),C9=h=>({"/":"src/pages/Portal","/demos/loading":"src/pages/Loading","/demos/intro":"src/pages/Intro","/demos/theming":"src/pages/Theming","/demos/tmdb":"src/pages/Tmdb","/demos/sprites":"src/pages/Sprites","/demos/focushandling":"src/pages/FocusHandling","/demos/memory-game":"src/pages/MemoryGame","/demos/player":"src/pages/Player","/examples/positioning":"src/pages/Positioning","/examples/colors":"src/pages/Colors","/examples/gradients":"src/pages/Gradients","/examples/transitions":"src/pages/Transitions","/examples/components":"src/pages/Components","/examples/alpha":"src/pages/Alpha","/examples/scaling":"src/pages/Scaling","/examples/rotation":"src/pages/Rotation","/examples/keyinput":"src/pages/KeyInput","/examples/forloop":"src/pages/ForLoop","/examples/forloop-advanced":"src/pages/ForLoopAdvanced","/examples/effects":"src/pages/Effects","/examples/showif":"src/pages/ShowIf","/examples/events":"src/pages/Events","/examples/images":"src/pages/Images","/examples/texts":"src/pages/Texts","/examples/slots":"src/pages/Slots","/examples/viewport":"src/pages/Viewport","/examples/router-hooks":"src/pages/RouterHooks","/examples/resize":"src/pages/Resize","/examples/translations":"src/pages/LanguagePlugin","/examples/firebolt":"src/pages/Firebolt","/examples/keycodes":"src/pages/KeyCodes","/examples/special-characters":"src/pages/SpecialCharacters","/examples/layout":"src/pages/Layout","/benchmarks/exponential":"src/pages/Exponential"})["/"+h]+".js",wC={light:{color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},dark:{color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"}},SC={large:{w:1200,h:900,block1:{h:720},block2:{y:560,h:300,w:890},graph:{x:270,y:140,w:890,h:400,offset:110,size:"large"}},small:{w:500,h:600,block1:{h:180},block2:{y:140,h:180,w:200},graph:{x:32,y:370,w:0,h:0,offset:0,size:"small"}}};Oe.Plugin(l4,"colors",{themes:{light:wC.light,dark:wC.dark},base:"light",current:"dark"});Oe.Plugin(l4,"sizes",{themes:{small:SC.small,large:SC.large},base:"small",current:"small"});Oe.Plugin(wL);Oe.Launch(T9,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",defaultFont:"lato",keymap:{...CL(),85:"sourceCode"},fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"},{family:"lato-black",type:"msdf",file:"fonts/Lato-Black.ttf"}],canvasColor:"transparent",viewportMargin:100,announcer:!0});export{Oe as B,Ju as S};
