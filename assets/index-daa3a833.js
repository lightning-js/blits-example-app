var KM=Object.defineProperty;var YM=(f,o,i)=>o in f?KM(f,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):f[o]=i;var P=(f,o,i)=>(YM(f,typeof o!="symbol"?o+"":o,i),i);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))u(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const x of g.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&u(x)}).observe(document,{childList:!0,subtree:!0});function i(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function u(h){if(h.ep)return;h.ep=!0;const g=i(h);fetch(h.href,g)}})();const Se={currentView:Symbol("currentView"),cursorTagStart:Symbol("cursorTagStart"),computedKeys:Symbol("computedKeys"),destroy:Symbol("destroy"),getChildren:Symbol("getChildren"),holder:Symbol("holder"),id:Symbol("id"),identifier:Symbol("identifier"),index:Symbol("index"),init:Symbol("init"),inputEvents:Symbol("inputEvents"),intervals:Symbol("intervals"),launched:Symbol("launched"),level:Symbol("level"),methodKeys:Symbol("methodKeys"),originalState:Symbol("originalState"),propKeys:Symbol("propKeys"),raw:Symbol("raw"),ready:Symbol("ready"),renderer:Symbol("renderer"),routes:Symbol("routes"),routerHooks:Symbol("routerHooks"),settings:Symbol("settings"),state:Symbol("state"),stateKeys:Symbol("stateKeys"),textnode:Symbol("textnode"),timeouts:Symbol("timeouts"),type:Symbol("type"),watchers:Symbol("watchers"),watchKeys:Symbol("watchKeys"),wrapper:Symbol("wrapper"),children:Symbol.for("children"),components:Symbol.for("components"),isSlot:Symbol.for("isSlot"),props:Symbol.for("props"),slots:Symbol.for("slots"),componentType:Symbol.for("componentType"),isComponent:Symbol.for("isComponent"),effects:Symbol.for("effects"),removeGlobalEffects:Symbol.for("removeGlobalEffects")},no={[Se.settings]:{},get(f,o=null){return f in this[Se.settings]?this[Se.settings][f]:o},set(f,o){typeof f=="object"?Object.keys(f).forEach(i=>{this.set(i,f[i])}):this[Se.settings][f]=o}},mh=()=>{},km=()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),HC=f=>{const o=no.get("debugLevel"),i={};return Object.defineProperty(i,"info",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("info")>-1)&&console.info.bind(window.console,`%c ⚡️ ${f} %c ${km()}`,"background-color: #0284c7; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||mh}}),Object.defineProperty(i,"warn",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("warn")>-1)&&console.warn.bind(window.console,`%c ⚡️ ${f} %c ${km()}`,"background-color: #fbbf24; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||mh}}),Object.defineProperty(i,"error",{get(){return(o>=1||Array.isArray(o)&&o.indexOf("error")>-1)&&console.error.bind(window.console,`%c ⚡️ ${f} %c ${km()}`,"background-color: #dc2626; color: white; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||mh}}),Object.defineProperty(i,"debug",{get(){return(o>=2||Array.isArray(o)&&o.indexOf("debug")>-1)&&console.debug.bind(window.console,`%c ⚡️ ${f} %c (${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})`,"background-color: #e2e8f0; color: #334155; padding: 3px 6px 3px 1px; border-radius: 3px","color: ##94a3b8;")||mh}}),i};let dn;const QM=()=>{dn=HC("Blits")},gh={aliceblue:"0xf0f8ffff",antiquewhite:"0xfaebd7ff",aqua:"0xffffff00",aquamarine:"0x7fffd4ff",azure:"0xf0ffffff",beige:"0xf5f5dcff",bisque:"0xffe4c4ff",black:"0x000000ff",blanchedalmond:"0xffebcdff",blue:"0x0000ffff",blueviolet:"0x8a2be2ff",brown:"0xa52a2aff",burlywood:"0xdeb887ff",cadetblue:"0x5f9ea0ff",chartreuse:"0x7fff00ff",chocolate:"0xd2691eff",coral:"0xff7f50ff",cornflowerblue:"0x6495edff",cornsilk:"0xfff8dcff",crimson:"0xdc143cff",cyan:"0x00ffffff",darkblue:"0x00008bff",darkcyan:"0x008b8bff",darkgoldenrod:"0xb8860bff",darkgray:"0xa9a9a9ff",darkgreen:"0x006400ff",darkgrey:"0xa9a9a9ff",darkkhaki:"0xbdb76bff",darkmagenta:"0x8b008bff",darkolivegreen:"0x556b2fff",darkorange:"0xff8c00ff",darkorchid:"0x9932ccff",darkred:"0x8b0000ff",darksalmon:"0xe9967aff",darkseagreen:"0x8fbc8fff",darkslateblue:"0x483d8bff",darkslategray:"0x2f4f4fff",darkslategrey:"0x2f4f4fff",darkturquoise:"0x00ced1ff",darkviolet:"0x9400d3ff",deeppink:"0xff1493ff",deepskyblue:"0x00bfffff",dimgray:"0x696969ff",dimgrey:"0x696969ff",dodgerblue:"0x1e90ffff",firebrick:"0xb22222ff",floralwhite:"0xfffaf0ff",forestgreen:"0x228b22ff",fuchsia:"0xff00ffff",gainsboro:"0xdcdcdcff",ghostwhite:"0xf8f8ffff",gold:"0xffd700ff",goldenrod:"0xdaa520ff",gray:"0x808080ff",green:"0x008000ff",greenyellow:"0xadff2fff",grey:"0x808080ff",honeydew:"0xf0fff0ff",hotpink:"0xff69b4ff",indianred:"0xcd5c5cff",indigo:"0x4b0082ff",ivory:"0xfffff0ff",khaki:"0xf0e68cff",lavender:"0xe6e6faff",lavenderblush:"0xfff0f5ff",lawngreen:"0x7cfc00ff",lemonchiffon:"0xfffacdff",lightblue:"0xadd8e6ff",lightcoral:"0xf08080ff",lightcyan:"0xe0ffffff",lightgoldenrodyellow:"0xfafad2ff",lightgray:"0xd3d3d3ff",lightgreen:"0x90ee90ff",lightgrey:"0xd3d3d3ff",lightpink:"0xffb6c1ff",lightsalmon:"0xffa07aff",lightseagreen:"0x20b2aaff",lightskyblue:"0x87cefaff",lightslategray:"0x778899ff",lightslategrey:"0x778899ff",lightsteelblue:"0xb0c4deff",lightyellow:"0xffffe0ff",lime:"0x00ff00ff",limegreen:"0x32cd32ff",linen:"0xfaf0e6ff",magenta:"0xff00ffff",maroon:"0x800000ff",mediumaquamarine:"0x66cdaaff",mediumblue:"0x0000cdff",mediumorchid:"0xba55d3ff",mediumpurple:"0x9370dbff",mediumseagreen:"0x3cb371ff",mediumslateblue:"0x7b68eeff",mediumspringgreen:"0x00fa9aff",mediumturquoise:"0x48d1ccff",mediumvioletred:"0xc71585ff",midnightblue:"0x191970ff",mintcream:"0xf5fffaff",mistyrose:"0xffe4e1ff",moccasin:"0xffe4b5ff",navajowhite:"0xffdeadff",navy:"0x000080ff",oldlace:"0xfdf5e6ff",olive:"0x808000ff",olivedrab:"0x6b8e23ff",orange:"0xffa500ff",orangered:"0xff4500ff",orchid:"0xda70d6ff",palegoldenrod:"0xeee8aaff",palegreen:"0x98fb98ff",paleturquoise:"0xafeeeeff",palevioletred:"0xdb7093ff",papayawhip:"0xffefd5ff",peachpuff:"0xffdab9ff",peru:"0xcd853fff",pink:"0xffc0cbff",plum:"0xdda0ddff",powderblue:"0xb0e0e6ff",purple:"0x800080ff",rebeccapurple:"0x663399ff",red:"0xff0000ff",rosybrown:"0xbc8f8fff",royalblue:"0x4169e1ff",saddlebrown:"0x8b4513ff",salmon:"0xfa8072ff",sandybrown:"0xf4a460ff",seagreen:"0x2e8b57ff",seashell:"0xfff5eeff",sienna:"0xa0522dff",silver:"0xc0c0c0ff",skyblue:"0x87ceebff",slateblue:"0x6a5acdff",slategray:"0x708090ff",slategrey:"0x708090ff",snow:"0xfffafaff",springgreen:"0x00ff7fff",steelblue:"0x4682b4ff",tan:"0xd2b48cff",teal:"0x008080ff",thistle:"0xd8bfd8ff",tomato:"0xff6347ff",transparent:"0x00000000",turquoise:"0x40e0d0ff",violet:"0xee82eeff",wheat:"0xf5deb3ff",white:"0xffffffff",whitesmoke:"0xf5f5f5ff",yellow:"0xffff00ff",yellowgreen:"0x9acd32ff"},ZM=/^#?([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i,JM=/^(rgba?)\((\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*),(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])\s*)(,(\s*(-?\d+(?:\.\d+)?)\s*))?\)$/,e_=/^(hsla?)\((\s*(360|3[0-5][0-9]|[12]?[0-9]{1,2})\s*),(\s*(100|[1-9]?[0-9])\s*)%,(\s*(100|[1-9]?[0-9])\s*)%(,(\s*(1|0(?:\.\d+)?)\s*))?\)$/,Am={},yh=f=>{if(Am[f]!==void 0)return Am[f];const o=parseInt(f).toString(16).padStart(2,"0");return Am[f]=o,o},Ya={normalize:(f="",o="0xffffffff")=>{if(f=f.toString(),f.startsWith("0x")&&f.length===10)return f;if(gh[f]!==void 0)return gh[f];if(ZM.test(f)){f=f.replace("#","").toLowerCase(),f.length===3&&(f=f.split("").map(h=>h+h).join(""));const u="0x"+f.padEnd(8,"f");return gh[f]=u,u}const i=JM.exec(f);if(i){const u=yh(i[3]),h=yh(i[5]),g=yh(i[7]);let x="ff";if(i[10]&&i[1]==="rgba"){const a=Math.min(Math.max(Math.round(parseFloat(i[10])*255),0),255);x=yh(a)}const S="0x"+u+h+g+x;return gh[f]=S,S}return e_.test(f)?(console.warn("HSL(A) color format is not supported yet"),"0xffffffff"):o}},t_=(f="",o,i,u=null)=>{let h=0,g=0,x=[],S=null,a=0;const m=/^<\/?([a-zA-Z0-9_\-.]+)\s*/,C=/^\s*(\/?>)\s*/,y=/^([A-Za-z0-9:.\-_@$]+)=\s*(["'])/,v=/^<>\s*/,M=/^\s*(<\/>)\s*/,b=()=>{f=O(f);try{return _(G),de(x)}catch(W){throw(W.name=="TemplateParseError"||W.name=="TemplateStructureError")&&(W.message=`${W.message}
${W.context}`),W}},_=W=>{h>=f.length||W()},O=W=>W.replace(/<!--.*?-->/gms,"").replace(/\r?\n\s*\r\n/gm," ").replace(/\r?\n\s*(\S)/gm," $1").replace(/\r?\n/g,"").trim(),B=W=>{const Z=f.slice(h).match(W);return Z&&(g=h,h+=Z[0].length),Z},G=()=>{B(v)?(x.push({[Symbol.for("componentType")]:null,[Se.type]:"opening",[Se.level]:a,[Se.cursorTagStart]:g}),a++,_(G)):_($)},$=()=>{B(M)?(a--,x.push({[Symbol.for("componentType")]:null,[Se.type]:"closing",[Se.level]:a}),_(G)):_(j)},j=()=>{const W=B(m);if(W)S={[Symbol.for("componentType")]:W[1],[Se.level]:a,[Se.cursorTagStart]:g},W[0].startsWith("</")?(a--,S[Se.type]="closing",S[Se.level]=a):(S[Se.type]="opening",a++),_(ne);else throw Q("InvalidTag")},ne=()=>{const W=B(C);if(W){if(W[1]==="/>"){if(S[Se.type]==="closing")throw Q("InvalidClosingTag");S[Se.type]="self-closing",a--}if(S[Se.type]==="opening"){const Z=f.slice(h,f.indexOf("<",h));Z&&(S.content=Z,h+=Z.length)}x.push(S),_(G)}else _(X)},X=()=>{const W=B(y);if(W){if(S[Se.type]==="closing")throw Q("AttributesInClosingTag");const Z=W[2],ce=new RegExp(`^(.*?)${Z}\\s*`),xe=B(ce);if(xe){const ge=K(W[1],xe[1]);S[ge.name]=ge.value,_(ne)}else throw Q("MissingOrInvalidAttributeValue")}else throw Q("InvalidAttribute")},K=(W,Z)=>{if(W.includes(".")){const[ce,xe]=W.split(".");return{name:ce,value:`{${xe}: ${Z}}`}}return["color",":color",":effects","effects"].includes(W)?ee(W,Z):{name:W,value:Z}},ee=(W,Z)=>{let ce=Z,xe=Ya.normalize(ce,null);if(xe===null){const ge=/'([^']+)'/g;let pe,Ee=0,Re="";for(;(pe=ge.exec(Z))!==null;){const z=pe[1],Me=pe.index,ye=pe[0].length;Re+=Z.slice(Ee,Me),xe=Ya.normalize(z,null),xe===null?Re+=Z.slice(Me,Me+ye):Re+=`'${xe}'`,Ee=Me+ye}Re+=Z.slice(Ee),ce=Re}else ce=xe;return{name:W,value:ce}},de=W=>{let Z=[],ce=!1,xe={children:[]},ge=xe;for(let pe=0;pe<W.length;pe++){let Ee=W[pe];if(Ee[Se.level]===0&&Ee[Se.type]!=="closing"){if(ce)throw se("MultipleTopLevelTags",Ee);if(Ee[":for"]!==void 0)throw se("ForAttributeOnRootElement",Ee);ce=!0}if(Ee[Se.type]==="opening")Z.push({[Se.level]:Ee[Se.level],[Se.type]:Ee[Se.type],[Se.cursorTagStart]:Ee[Se.cursorTagStart],[Symbol.for("componentType")]:Ee[Symbol.for("componentType")],parent:ge});else if(Ee[Se.type]==="closing"){const z=Z.length===0;let Me=!1,ye=!1;if(z||(Me=Z[Z.length-1][Se.level]!==Ee[Se.level],ye=Z[Z.length-1][Symbol.for("componentType")]!==Ee[Symbol.for("componentType")]),z||Me||ye)throw se("MismatchedClosingTag",Ee);ge=Z.pop().parent}const Re={...Ee};delete Re[Se.type],delete Re[Se.level],delete Re[Se.cursorTagStart],Ee[Se.type]==="opening"?(pe+1<W.length&&W[pe+1][Se.type]!=="closing"&&(Re.children=[]),ge.children.push(Re),ge=Re):Ee[Se.type]==="self-closing"&&ge.children.push(Re)}if(Z.length>0)throw se("UnclosedTags",Z);return xe},k=10,V=50,Q=W=>{const Z=te();W=`${W} in ${Z}`;const ce=new Error(W);ce.name="TemplateParseError";const xe=Math.max(0,g-k),ge=Math.min(f.length,h+V),pe=f.slice(xe,ge),Ee=h-xe;return ce.context=J(Ee,pe),ce},se=(W,Z)=>{const ce=te();W=`${W} in ${ce}`;const xe=new Error(W);xe.name="TemplateStructureError",Array.isArray(Z)?xe.context=Z.map(pe=>ge(pe)).join(`
`):xe.context=ge(Z);function ge(pe){const Ee=Math.max(0,pe[Se.cursorTagStart]-k),Re=f.slice(Ee,Ee+V);return J(k,Re)}return xe},J=(W,Z)=>{const ce=" ".repeat(W)+"^";return`
${Z}
${ce}
`},te=()=>{if(i){let W=o||"",Z=i;for(;Z;)W=`${Z[Symbol.for("componentType")]}/${W}`,Z=Z.parent;return W}return u||"Blits.Application"};return b()};let Gt,Gh;function n_(f={children:[]},o=!1){const i={renderCode:["const elms = []","let componentType","const rootComponent = component","let propData","let slotComponent","let inSlot = false","let slotChildCounter = 0"],effectsCode:[],context:{props:[],components:this.components}};return Gt=-1,Gh=o,Gh===!0&&i.renderCode.push(`
      function propInComponent(prop, kind="dynamic") {
        const property = prop.includes('.') ? prop.split('.')[0] : prop
        if (kind === 'reactive' || prop.includes('.') === false) {
          if (property in component === false) {
            Log.warn('Property ' +  property + ' was accessed during render but is not defined on instance')
          }
        } else {
          const nestedKeys = prop.split('.')
          let base = component
          for(let i =0; i<nestedKeys.length;i++){
            if (base[nestedKeys[i]] === undefined) {
              Log.warn('Property ' +  nestedKeys.slice(0,i+1).join('.') + ' was accessed during render but is not defined on instance')
            }
            base = base[nestedKeys[i]]
          }
        }
      }
    `),WC.call(i,f),i.renderCode.push("return elms"),{render:new Function("parent","component","context","components","effect","getRaw","Log",i.renderCode.join(`
`)),effects:i.effectsCode.map(u=>new Function("component","elms","context","components","rootComponent","effect",u)),context:i.context}}const i_=function(f){const o=/\$\$?\w+(\.\w+)?/g,i=f.match(o);if(i!==null){const u=/\$shader/;return i.filter(h=>!u.test(h))}else return!1},qS=function(f,o,i="dynamic"){const u=i_(f);if(u!==!1)for(let h=0;h<u.length;h++){let g=u[h];i==="reactive"&&g.includes(".")&&(g=g.split(".")[0]),o.push(`propInComponent('${g.replace("$","")}', '${i}')`)}},Wh=function(f,o=!1,i={key:!1,component:"component.",forceEffect:!1,forloop:!1}){const u=i.forceEffect?this.effectsCode:this.renderCode;o&&u.push(`parent = ${o}`),"key"in f&&(i.key=to(f.key,i.component));const h=i.key?`elms[${Gt}][${i.key}]`:`elms[${Gt}]`;i.key&&u.push(`
      if(elms[${Gt}] === undefined) {
        elms[${Gt}] = {}
      }
    `),u.push(`const elementConfig${Gt} = {}`),i.forloop&&u.push(`if(${h} === undefined) {`),u.push(`
    ${h} = this.element({parent: parent || 'root'}, inSlot === true ? slotComponent : component)
  `),i.forloop&&u.push("}");const g=f.children;delete f.children,f[Symbol.for("componentType")]==="Slot"&&u.push(`elementConfig${Gt}[Symbol.for('isSlot')] = true`),Object.keys(f).forEach(x=>{if(x==="slot"&&u.push(`
        elementConfig${Gt}['parent'] = slotComponent[Symbol.for('slots')] !== undefined && Array.isArray(slotComponent[Symbol.for('slots')]) === true && slotComponent[Symbol.for('slots')].filter(slot => slot.ref === '${f.slot}').shift() || parent
      `),x==="key")return;const S=f[x];if(XC(x)){if(i.holder&&x===":color")return;i.holder?this.effectsCode.push(`
        if(typeof skip${Gt} === 'undefined' ||
          skip${Gt}.indexOf('${x.substring(1)}') === -1)
          ${h}.set('${x.substring(1)}', ${to(f[x],i.component)})
        `):this.effectsCode.push(`
            ${h}.set('${x.substring(1)}', ${to(f[x],i.component)})
          `),Gh===!0&&i.component!=="scope."&&S.includes("$")&&qS(S,u,"reactive"),u.push(`elementConfig${Gt}['${x.substring(1)}'] = ${to(S,i.component)}`)}else Gh===!0&&i.component!=="scope."&&S.includes("$")&&qS(S,u),u.push(`elementConfig${Gt}['${x}'] = ${pg(S,x,i.component)}`)}),i.holder===!0&&u.push(`
    const skip${Gt} = []
    if(typeof cmp${Gt} !== 'undefined') {
      for(let key in cmp${Gt}.config.props) {
        delete elementConfig${Gt}[cmp${Gt}.config.props[key]]
        skip${Gt}.push(cmp${Gt}.config.props[key])
      }
    }
    `),i.forloop&&u.push(`if(${h}.nodeId === undefined) {`),u.push(`${h}.populate(elementConfig${Gt})`),u.push(`
    if(inSlot === true) {
      slotChildCounter -= 1
    }
  `),i.forloop&&u.push("}"),g&&WC.call(this,{children:g},`${h}`,i)},GC=function(f,o=!1,i={key:!1,component:"component.",forceEffect:!1,holder:!1,forloop:!1}){const u=i.forceEffect?this.effectsCode:this.renderCode;u.push(`
    const cmp${Gt} =
      (context.components && context.components['${f[Symbol.for("componentType")]}']) || components['${f[Symbol.for("componentType")]}']
  `),"key"in f&&(i.key=to(f.key,i.component));const h=f.children;delete f.children,Wh.call(this,f,o,{...i,holder:!0}),o=i.key?`elms[${Gt}][${i.key}]`:`elms[${Gt}]`,Gt++;const g=i.key?`elms[${Gt}][${i.key}]`:`elms[${Gt}]`;i.key&&u.push(`
      if(elms[${Gt}] === undefined) {
        elms[${Gt}] = {}
      }
    `),o&&u.push(`parent = ${o}`),u.push(`const props${Gt} = {}`),i.forloop&&u.push(`if(${g} === undefined) {`),Object.keys(f).forEach(x=>{XC(x)?(this.effectsCode.push(`
        ${g}[Symbol.for('props')]['${x.substring(1)}'] = ${to(f[x],i.component)}`),u.push(`
        propData = ${to(f[x],i.component)}
        if (Array.isArray(propData) === true) {
          propData = getRaw(propData).slice(0)
        }
        props${Gt}['${x.substring(1)}'] = propData`)):u.push(`props${Gt}['${x}'] = ${pg(f[x],x,i.component)}`)}),u.push(`
    componentType = props${Gt}['is'] || '${f[Symbol.for("componentType")]}'

    let component${Gt}
    if(typeof componentType === 'string') {
      component${Gt} = context.components && context.components[componentType] || components[componentType]
      if(!component${Gt}) {
        throw new Error('Component "${f[Symbol.for("componentType")]}" not found')
      }
    } else if(typeof componentType === 'function' && componentType[Symbol.for('isComponent')] === true) {
      component${Gt} = componentType
    }

    ${g} = component${Gt}.call(null, {props: props${Gt}}, ${o}, component)

    if (${g}[Symbol.for('slots')][0]) {
      parent = ${g}[Symbol.for('slots')][0]
      slotComponent = ${g}
      inSlot = true
    } else {
      parent = ${g}[Symbol.for('children')][0]
    }
  `),i.forloop&&u.push("}"),h&&(i.forloop||u.push(`
        if(inSlot === true) {
          slotChildCounter = ${h.length}  + 1
        }
      `),Gt++,Wh.call(this,{children:h},!1,{...i})),i.forloop||u.push(`
      if (inSlot === true && slotChildCounter === 0) {
        inSlot = false
      }
    `)},o_=function(f,o){const i=f[":for"];delete f[":for"];const u=f.range||f[":range"]||"{}";delete f.range,delete f[":range"];const h=f.key,g=to(h,"scope."),x=!(f.$shallow&&f.$shallow.toLowerCase()==="false");delete f.$shallow,delete f.key;const a=/(.+)\s+in\s+(.+)/gi.exec(i),[m,C]=a[1].replace("(","").replace(")","").split(/\s*,\s*/),y=new RegExp(`(scope\\.(?!${m}\\.|${C}|key)(\\w+))`,"gi"),v={renderCode:[],effectsCode:[],context:{props:[],components:this.components}};if(o&&v.renderCode.push(`parent = ${o}`),C!==void 0){const K=new RegExp(`\\$${C}(?!['\\w])`).exec(h);Array.isArray(K)&&v.renderCode.push(`console.warn(" Using '${C}' in the key, like key=${h},  is not recommended")`)}const M=Gt;v.renderCode.push(`
    const created${M} = []

    let from${M}
    let to${M}

    const forloop${M} = (collection = [], elms, created) => {
      const rawCollection = getRaw(collection)
      const keys = new Set()
      let l = rawCollection.length

      const range = ${to(u)} || {}
      from${M} = range['from'] || 0
      to${M} = 'to' in range ? range['to'] : rawCollection.length

      while(l--) {
        const ${m} = rawCollection[l]
  `),C!==void 0&&v.renderCode.push(`
        const ${C} = l
    `),v.renderCode.push(`
        if(l < to${M} && l >= from${M}) {
          keys.add('' +  ${to(h,"")||"l"})
        }
      }
  `);const b=v.renderCode.length;v.renderCode.push(`
      created.length = 0
      const length = rawCollection.length
      const effects = []
      for(let __index = 0; __index < length; __index++) {
        if(__index < from${M} || __index >= to${M}) continue
        const scope = Object.create(component)
        parent = ${o}
        scope['${m}'] = rawCollection[__index]
  `),C!==""&&v.renderCode.push(`
        scope['${C}'] = __index
    `),v.renderCode.push(`
        scope['key'] = '' + ${g||"__index"}
  `),"ref"in f&&f.ref.indexOf("$")===-1&&(v.renderCode.push(`
        scope['__ref'] = '${f.ref}' + __index
    `),f.ref="$__ref"),v.renderCode.push(`
        created.push(scope.key)
  `),f[Symbol.for("componentType")]==="Element"||f[Symbol.for("componentType")]==="Slot"||f[Symbol.for("componentType")]==="Text"?(f[Symbol.for("componentType")]==="Text"&&(f.__textnode="true"),Wh.call(v,f,o,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0})):GC.call(v,f,!1,{key:"scope.key",component:"scope.",forceEffect:!1,forloop:!0});const _=v.effectsCode.filter(X=>[...X.matchAll(y)].length===0),O=v.effectsCode.filter(X=>[...X.matchAll(y)].length!==0);x===!1&&v.renderCode.push(`
      scope['${m}'] = null
      scope['${m}'] = collection[__index]
  `),_.forEach((X,K)=>{const ee=X.indexOf(`scope.${K}`)>-1?`'${to(a[2],"")}'`:null;X.indexOf("Symbol.for('props')")===-1?v.renderCode.push(`
        let eff${K} = () => {
          ${X}
        }
        effect(eff${K}, ${ee})
        effects.push(eff${K})
      `):v.renderCode.push(`
        ${X}
      `)}),v.renderCode.push(`
    }
    return effects
  }`);const B=[];B.push(`
      let i = created.length

      while (i--) {
        if (keys.has(created[i]) === false) {
          const key = created[i]
  `);const G=Gt;for(let X=M;X<=G;X++)B.push(`
          elms[${X}][key] && elms[${X}][key].destroy()
          delete elms[${X}][key]
      `);B.push(`
      }
    }
  `),v.renderCode.splice(b,0,...B);let $=`${to(a[2],"")}`;$&&$.includes(".")&&($=$.match(/[^.]+$/)[0]);const j=/\$([^,} ]+)/g,ne=[...u.matchAll(j)].map(X=>`'${X[1]}'`);v.renderCode.push(`
    let forEffects${M}
    effect(() => {
      component[Symbol.for('removeGlobalEffects')](forEffects${M})
      forEffects${M} = null
      forEffects${M} = forloop${M}(${pg(a[2],":for")}, elms, created${M})
    }, ['${$}', ${ne.join(",")}] )
  `),O.forEach(X=>{const K=[...X.matchAll(y)];let ee=K.length;const de=[];for(;ee--;){const k=K[ee],V=`component.${k[2]}`;de.indexOf(V)===-1&&de.push(V),k[2]!==m&&(X=X.substring(0,k.index)+V+X.substring(k.index+k[1].length))}v.renderCode.push(`
      effect(() => {
        void ${de.join(", ")}
        for(let __index = 0; __index < ${to(a[2])}.length; __index++) {
          if(__index < from${M} || __index >= to${M}) continue
          const scope = {}
          scope['${C}'] = __index
          scope['${m}'] = ${to(a[2])}[__index]
          scope['key'] = ${g||"__index"}
    `),v.renderCode.push(`
          ${X}
        }
      })
    `)}),this.renderCode.push(v.renderCode.join(`
`))},WC=function(f,o=!1,i={}){f.children&&f.children.forEach(u=>{Gt++,Object.keys(u).indexOf(":for")>-1?o_.call(this,u,o):u[Symbol.for("componentType")]==="Element"||u[Symbol.for("componentType")]==="Slot"||u[Symbol.for("componentType")]==="Text"||u[Symbol.for("componentType")]==="Layout"?(u[Symbol.for("componentType")]==="Text"&&(u.__textnode="true"),u[Symbol.for("componentType")]==="Layout"&&(u.__layout="true"),Wh.call(this,u,o,i)):GC.call(this,u,o,i)})},to=(f,o="component.")=>{if(f===void 0)return f;const i=/('.*?')+/gi,u=/\$(\$(?=\$)|\$?)/g,h=f.matchAll(i),g=[];let x=0;for(const S of h)g.push(S[0]),f=f.replace(S[0],`[@@REPLACEMENT${x}@@]`),x++;return f=f.replace(u,(S,a)=>{if(a==="")return o;if(a==="$")return o+"$"}),g.forEach((S,a)=>{f=f.replace(`[@@REPLACEMENT${a}@@]`,S)}),f},pg=(f="",o=!1,i="component.")=>{const u=/\$\w+/gi;let h;if(o==="content")if(f.startsWith("$"))h=`${i}${f.replace("$","")}`;else{const g=f.replace(/\\\\/g,"__DOUBLE_BACKSLASH__").replace(/(^|[^\\])'/g,"$1\\'").replace(/__DOUBLE_BACKSLASH__/g,"\\\\");h=`'${r_(g,i)}'`}else if(o!=="color"&&/[^0-9%\s.eE]/.test(f)===!1&&!isNaN(parseFloat(f))){if(h=parseFloat(f),f.endsWith("%")){const x={w:"width",width:"width",x:"width",h:"height",height:"height",y:"height"}[o];x&&(h=`parent.node.${x} * (${h} / 100)`)}}else if(f.toLowerCase()==="true")h=!0;else if(f.toLowerCase()==="false")h=!1;else if(o.startsWith("@")&&f){const g=i.slice(0,-1);h=`${g}['${f.replace("$","")}'] && ${g}['${f.replace("$","")}'].bind(${g})`}else if(f.startsWith("$"))h=`${i}${f.replace("$","")}`;else if(u.exec(f)){const g=/\w+\s*:\s*(?:[^\s,}]+|".*?"|'.*?')/g,x=f.match(g);if(h={},x)for(let S=0;S<x.length;S++){const a=x[S].split(/\s*:\s*/);a&&s_(a[0],a[1],i,h)}return a_(h)}else h=`"${f}"`;return h},XC=f=>f.startsWith(":"),r_=(f,o)=>{const i=/\{\{\s*(\$\S+)\s*\}\}/g,u=[...f.matchAll(i)];if(u.length)for(let[h,g]of u)f=f.replace(h,`${g.replace("$",`'+${o}`)}+'`);return f},s_=(f,o,i,u)=>{o.startsWith("$")?u[f]=`${i}${o.replace("$","")}`:u[f]=o},a_=f=>{const o=[];return Object.keys(f).forEach(i=>{o.push(`${i}: ${f[i]}`)}),` { ${o.join(", ")} }`},KS={};let u_=0;const l_=f=>`BlitsComponent::${f}_${KS[f]=(KS[f]||0)+1}`,f_=()=>++u_,Gr={},Xm=(f,o,i,u=[])=>{Gr[o]&&Gr[o][f]&&Gr[o][f].apply(i,u)},c_=(f,o,i)=>{const u=Se[f];Gr[o]&&Gr[o][u]&&Gr[o][u].apply(i)},h_=(f={},o)=>{Gr[o]={},[...Object.keys(f),...Object.getOwnPropertySymbols(f)].forEach(u=>{typeof f[u]=="function"&&(Gr[o][u]=f[u])})};let Qa=null,Ha=null,ad=!1;const d_=()=>{ad=!0},p_=()=>{ad=!1},Xh=new WeakMap,Ph=new Map,YS=f=>{if(Ph.size!==0)for(const[o,i]of Ph){if(f.indexOf(o)===-1)continue;const u=Xh.get(i);if(u!==void 0)for(const h of u.values())h.delete(o),Ph.delete(o)}},Oh=(f,o,i=!1)=>{if(Qa!==null){if(ad)return;if(Array.isArray(Ha)===!0){if(Ha.includes(o)===!1)return}else if(Ha!==null&&o!==Ha)return;let u=Xh.get(f);u===void 0&&(u=new Map,Xh.set(f,u));let h=u.get(o);h===void 0&&(h=new Set,u.set(o,h)),h.add(Qa),i===!0&&Ph.set(Qa,f)}},Za=(f,o,i=!1)=>{if(ad===!0)return;const u=Xh.get(f);if(u===void 0)return;const h=u.get(o);if(h!==void 0)for(let g of h)g(i)},vh=(f,o=null)=>{Qa=f,Ha=o,Qa(),Qa=null,Ha=null},qm=(f,o)=>{if(f===o)return!0;if(f.length!==o.length)return!1;let i=f.length;for(;i--;){const u=f[i],h=o[i];if(Array.isArray(u)&&Array.isArray(h)){if(qm(u,h)===!1)return!1}else if(typeof u=="object"&&u!==null&&typeof h=="object"&&h!==null){if(qm(Object.entries(u),Object.entries(h))===!1)return!1}else if(u!==h)return!1}return!0},Nh=["push","pop","shift","unshift","splice","sort"],QS=new WeakMap,vs=f=>{const o=f&&f[Se.raw];return o?vs(o):f},Km=(f,o=null,i,u)=>{if(typeof f=="object"&&Array.isArray(f)===!1&&Object.getPrototypeOf(f)!==Object.prototype)return f;const h=QS.get(f);if(h!==void 0)return h;const g={get(S,a,m){return a===Se.raw?f:Array.isArray(S)===!0?typeof S[a]=="object"&&S[a]!==null?(Array.isArray(S[a])===!0&&Oh(S,a,u),Km(vs(S[a]),S,a)):Nh.indexOf(a)!==-1?function(...C){d_();const y=S[a].apply(this,C);return p_(),Za(o,i),y}:a==="length"?f.length:Reflect.get(S,a,m):typeof S[a]=="object"&&S[a]!==null?(Array.isArray(S[a])===!0&&Oh(S,a,u),Km(vs(S[a]),S,a)):(Oh(S,a,u),Reflect.get(S,a,m))},set(S,a,m,C){const y=vs(S[a]),v=vs(m);let M=!0,b=!1;return Array.isArray(v)===!0&&Array.isArray(y)===!0?b=qm(y,v):y===v&&(b=!0),b===!1&&(typeof m=="object"&&(Array.isArray(m)===!0?m=vs(m).slice(0):m!==null&&S[a]!==null&&S[a]!==void 0&&Array.isArray(S)===!1&&Object.getPrototypeOf(m)===Object.prototype&&(m=Object.assign(C[a],m))),M=Reflect.set(S,a,m,C)),M===!0&&b===!1&&(Array.isArray(S)===!0&&a in S&&Za(o,i,!0),Za(S,a,!0)),M}},x=new Proxy(f,g);return QS.set(f,x),x},qC=(f,o)=>(Object.keys(f).forEach(i=>{let u=f[i];if(f[i]!==null&&typeof f[i]=="object"){if(Object.getPrototypeOf(f[i])===Object.prototype)return qC(f[i]);if(Array.isArray(f[i])===!0)for(let h=0;h<Nh.length-1;h++)f[i][Nh[h]]=function(g){Array.prototype[Nh[h]].call(this,g),Za(f,i)}}Object.defineProperty(f,i,{enumerable:!0,configurable:!0,get(){return Oh(f,i,o),u},set(h){u!==h&&(u=h,Za(f,i))}})}),f),m_=typeof Proxy<"u",Fl=(f,o="Proxy",i=!1)=>(m_===!1&&(o="defineProperty"),o==="defineProperty"?qC(f,i):Km(f,void 0,void 0,i)),g_=["init","ready","focus","unfocus","destroy","attach","detach","enter","exit"],y_={previous:null,current:null,get state(){return this.current},set state(f){g_.indexOf(f)>-1&&(f!==this.current||f==="focus")&&(dn.debug(`Setting lifecycle state from ${this.current} to ${f} for ${this.component.componentId}`),this.previous=this.current,this.current=f,c_(f,this.component[Se.identifier],this.component),Xm(f,this.component[Se.identifier],this.component))}};function v_(f,o=!1,i){const u={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},h=f.getContext(o?"webgl2":"webgl",u)||f.getContext("experimental-webgl",u);if(!h)throw new Error("Unable to create WebGL context");return i?new Proxy(h,{get(g,x){const S=g[x];return typeof S=="function"?(i.increment(String(x)),S.bind(g)):S}}):h}function ut(f,o){if(tu()!==!0&&!f)throw new Error(o||"Assertion failed")}function ZS(f,o,i){const u=Math.trunc(f>>>24),h=Math.trunc(f>>>16&255),g=Math.trunc(f>>>8&255),x=Math.trunc(f&255),S=Math.trunc(o>>>24),a=Math.trunc(o>>>16&255),m=Math.trunc(o>>>8&255),C=Math.trunc(o&255),y=Math.round(S*i+u*(1-i)),v=Math.round(a*i+h*(1-i)),M=Math.round(m*i+g*(1-i)),b=Math.round(C*i+x*(1-i));return(y<<24|v<<16|M<<8|b)>>>0}function x_(f,o){const i=f>>>24,u=f>>>16&255,h=f>>>8&255,g=Math.trunc((f&255)*o);return(i<<24|u<<16|h<<8|g)>>>0}let KC=!0;function w_(f){KC=f==="webgl"}function xh(f,o,i=!1){const u=(f&255)/255*o,h=KC?u:1,g=Math.trunc((f>>>24)*h),x=Math.trunc((f>>>16&255)*h),S=Math.trunc((f>>>8&255)*h),a=Math.trunc(u*255);return i?(a<<24|S<<16|x<<8|g)>>>0:(g<<24|x<<16|S<<8|a)>>>0}function qh(f,o){return Object.prototype.hasOwnProperty.call(f,o)}function tu(){return{VITE_TMDB_KEY:"ABC123",VITE_TMDB_BASE_URL:"https://8b4fa39d.lightningjs.workers.dev",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&!0}let S_=1;function C_(){return S_++}class Cr{constructor(){P(this,"eventListeners",{})}on(o,i){let u=this.eventListeners[o];u||(u=[]),u.push(i),this.eventListeners[o]=u}off(o,i){const u=this.eventListeners[o];if(!u)return;if(!i){delete this.eventListeners[o];return}const h=u.indexOf(i);h>=0&&u.splice(h,1)}once(o,i){const u=(h,g)=>{this.off(o,u),i(h,g)};this.on(o,u)}emit(o,i){const u=this.eventListeners[o];u&&[...u].forEach(h=>{h(this,i)})}removeAllListeners(){this.eventListeners={}}}var _n;(function(f){f[f.generic=0]="generic",f[f.color=1]="color",f[f.image=2]="image",f[f.noise=3]="noise",f[f.renderToTexture=4]="renderToTexture",f[f.subTexture=5]="subTexture"})(_n||(_n={}));class Hl extends Cr{constructor(i){super();P(this,"txManager");P(this,"_dimensions",null);P(this,"_error",null);P(this,"state","initial");P(this,"renderableOwners",new Set);P(this,"renderable",!1);P(this,"type",_n.generic);P(this,"preventCleanup",!1);P(this,"ctxTexture");P(this,"textureData",null);this.txManager=i}get dimensions(){return this._dimensions}get error(){return this._error}setRenderableOwner(i,u){var g,x;const h=this.renderableOwners.size;if(u===!0){this.renderableOwners.has(i)===!1&&this.renderableOwners.add(i);const S=this.renderableOwners.size;S>h&&S===1&&(this.renderable=!0,(g=this.onChangeIsRenderable)==null||g.call(this,!0),this.load())}else{this.renderableOwners.delete(i);const S=this.renderableOwners.size;S<h&&S===0&&(this.renderable=!1,(x=this.onChangeIsRenderable)==null||x.call(this,!1),this.txManager.orphanTexture(this))}}load(){this.txManager.loadTexture(this)}loadCtxTexture(){return this.ctxTexture===void 0&&(this.ctxTexture=this.txManager.renderer.createCtxTexture(this)),this.ctxTexture}free(){var i;(i=this.ctxTexture)==null||i.free()}freeTextureData(){this.textureData=null}setState(i,u){if(this.state===i)return;let h=null;i==="loaded"?(u!==void 0&&"width"in u&&"height"in u&&u.width!==void 0&&u.height!==void 0&&(this._dimensions=u),h=this._dimensions):i==="failed"&&(this._error=u,h=this._error),this.state=i,this.emit(i,h)}async getTextureData(){return this.textureData===null&&(this.textureData=await this.getTextureSource()),this.textureData}static makeCacheKey(i){return!1}static resolveDefaults(i){return{}}}const T_=/^(data|ftps?|https?):/,Gl=f=>{const o=f>>>24,i=f>>>16&255,u=f>>>8&255,h=f&255;return[o/255,i/255,u/255,h/255]},JS=f=>{const o=f>>>24,i=f>>>16&255,u=f>>>8&255,h=f&255;return[o,i,u,h]};function eC(f){return(f&255)/255}function Im(f){const o=Math.floor(f[0]*255),i=Math.floor(f[1]*255),u=Math.floor(f[2]*255),h=Math.floor(f[3]*255);return`rgba(${o},${i},${u},${h.toFixed(4)})`}function Ga(f,o,i,u,h){return h?(h.x1=f,h.y1=o,h.x2=i,h.y2=u,h):{x1:f,y1:o,x2:i,y2:u}}function Mm(f,o){return f.x1<o.x2&&f.x2>o.x1&&f.y1<o.y2&&f.y2>o.y1}function b_(f,o){return o?(o.x=f.x1,o.y=f.y1,o.width=f.x2-f.x1,o.height=f.y2-f.y1,o):{x:f.x1,y:f.y1,width:f.x2-f.x1,height:f.y2-f.y1}}function YC(f,o,i){const u=Math.max(f.x,o.x),h=Math.max(f.y,o.y),g=Math.min(f.x+f.width,o.x+o.width)-u,x=Math.min(f.y+f.height,o.y+o.height)-h;return g>0&&x>0?i?(i.x=u,i.y=h,i.width=g,i.height=x,i):{x:u,y:h,width:g,height:x}:i?(i.x=0,i.y=0,i.width=0,i.height=0,i):{x:0,y:0,width:0,height:0}}function QC(f,o){return o?(o.x=f.x,o.y=f.y,o.width=f.width,o.height=f.height,o):{x:f.x,y:f.y,width:f.width,height:f.height}}function E_(f,o){return f===o?!0:f===null||o===null?!1:f.x===o.x&&f.y===o.y&&f.width===o.width&&f.height===o.height}function _m(f,o){return f.x1<=o.x2&&f.y1<=o.y2&&f.x2>=o.x1&&f.y2>=o.y1}function k_(f,o){return f.x1<o.x1&&f.x2>o.x2&&f.y1<o.y1&&f.y2>o.y2}function A_(f){return f.x1<f.x2&&f.y1<f.y2}function Ym(f,o){return Ga(f.x1-o[3],f.y1-o[0],f.x2+o[1],f.y2+o[2])}function I_(f){if(self.location.protocol==="file:"&&!T_.test(f)){const i=self.location.pathname.split("/");i.pop();const u=i.join("/"),h=self.location.protocol+"//"+u;return f.charAt(0)==="."&&(f=f.slice(1)),f.charAt(0)==="/"&&(f=f.slice(1)),h+"/"+f}return new URL(f,self.location.href).href}function Rm(f){return f.startsWith("data:")===!0}function M_(f){var a,m;f=f.replace(/^data:/,"");const o=((a=f.match(/image\/[^;]+/))==null?void 0:a[0])||"",i=f.replace(/^[^,]+,/,""),u=1024,h=atob(i),g=h.length,x=Math.ceil(g/u),S=new Array(x);for(let C=0;C<x;++C){const y=C*u,v=Math.min(y+u,g),M=new Array(v-y);for(let b=y,_=0;b<v;++_,++b)M[_]=(m=h[b])==null?void 0:m.charCodeAt(0);S[C]=new Uint8Array(M)}return new Blob(S,{type:o})}class li{constructor(){P(this,"ta");P(this,"tb");P(this,"tx");P(this,"tc");P(this,"td");P(this,"ty");P(this,"_floatArr",null);P(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return __}static multiply(o,i,u){const h=o.ta*i.ta+o.tb*i.tc,g=o.ta*i.tb+o.tb*i.td,x=o.ta*i.tx+o.tb*i.ty+o.tx,S=o.tc*i.ta+o.td*i.tc,a=o.tc*i.tb+o.td*i.td,m=o.tc*i.tx+o.td*i.ty+o.ty;return u||(u=new li),u.ta=h,u.tb=g,u.tx=x,u.tc=S,u.td=a,u.ty=m,u.mutation=!0,u}static identity(o){return o||(o=new li),o.ta=1,o.tb=0,o.tx=0,o.tc=0,o.td=1,o.ty=0,o.mutation=!0,o}static translate(o,i,u){return u||(u=new li),u.ta=1,u.tb=0,u.tx=o,u.tc=0,u.td=1,u.ty=i,u.mutation=!0,u}static scale(o,i,u){return u||(u=new li),u.ta=o,u.tb=0,u.tx=0,u.tc=0,u.td=i,u.ty=0,u.mutation=!0,u}static rotate(o,i){const u=Math.cos(o),h=Math.sin(o);return i||(i=new li),i.ta=u,i.tb=-h,i.tx=0,i.tc=h,i.td=u,i.ty=0,i.mutation=!0,i}static copy(o,i){return i||(i=new li),i.ta=o.ta,i.tc=o.tc,i.tb=o.tb,i.td=o.td,i.tx=o.tx,i.ty=o.ty,i.mutation=!0,i}translate(o,i){return this.tx=this.ta*o+this.tb*i+this.tx,this.ty=this.tc*o+this.td*i+this.ty,this.mutation=!0,this}scale(o,i){return this.ta=this.ta*o,this.tb=this.tb*i,this.tc=this.tc*o,this.td=this.td*i,this.mutation=!0,this}rotate(o){if(o===0||!(o%Math.PI*2))return this;const i=Math.cos(o),u=Math.sin(o),h=this.ta*i+this.tb*u,g=this.tb*i-this.ta*u,x=this.tc*i+this.td*u,S=this.td*i-this.tc*u;return this.ta=h,this.tb=g,this.tc=x,this.td=S,this.mutation=!0,this}multiply(o){return li.multiply(this,o,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const __=new li,wh=0,Sh=2,Ch=4,Th=6,bh=1,Eh=3,kh=5,Ah=7;class Wa{constructor(o){P(this,"data");this.data=new Float32Array(8),o&&(this.data[wh]=o[wh],this.data[Sh]=o[Sh],this.data[Ch]=o[Ch],this.data[Th]=o[Th],this.data[bh]=o[bh],this.data[Eh]=o[Eh],this.data[kh]=o[kh],this.data[Ah]=o[Ah])}static translate(o,i,u,h,g,x,S,a,m){return m||(m=new Wa),m.data[wh]=o,m.data[Sh]=u,m.data[Ch]=g,m.data[Th]=S,m.data[bh]=i,m.data[Eh]=h,m.data[kh]=x,m.data[Ah]=a,m}get x1(){return this.data[wh]}get x2(){return this.data[Sh]}get x3(){return this.data[Ch]}get x4(){return this.data[Th]}get y1(){return this.data[bh]}get y2(){return this.data[Eh]}get y3(){return this.data[kh]}get y4(){return this.data[Ah]}}const ZC=(f,o,i,u)=>{const h=3*f,g=3*(i-f)-h,x=1-h-g,S=3*o,a=3*(u-o)-S,m=1-S-a;return function(C){if(C>=1)return 1;if(C<=0)return 0;let y=.5,v,M,b;for(let B=0;B<20;B++){if(v=y*(y*(y*x+g)+h),b=C-v,b>-1e-8&&b<1e-8)return y*(y*(y*m+a)+S);if(M=y*(y*(3*x)+2*g)+h,M>1e-10&&M<1e-10)break;y+=b/M}let _=0,O=1;for(let B=0;B<20;B++){if(y=.5*(_+O),v=y*(y*(y*x+g)+h),b=C-v,b>-1e-8&&b<1e-8)return y*(y*(y*m+a)+S);b<0?O=y:_=y}}},Uh={},R_={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},Bh=f=>f,L_=f=>{const o=/-?\d*\.?\d+/g,i=f.match(o);if(i){const[u,h,g,x]=i,S=parseFloat(u||"0.42"),a=parseFloat(h||"0"),m=parseFloat(g||"1"),C=parseFloat(x||"1"),y=ZC(S,a,m,C);return Uh[f]=y,y}return console.warn("Unknown cubic-bezier timing: "+f),Bh},D_=f=>{if(f==="linear")return Bh;if(Uh[f]!==void 0)return Uh[f]||Bh;if(f==="step-start")return()=>1;if(f==="step-end")return i=>i===1?1:0;const o=R_[f];if(o!==void 0){const[i,u,h,g]=o,x=ZC(i,u,h,g);return Uh[f]=x,x}return f.startsWith("cubic-bezier")?L_(f):(console.warn("Unknown timing function: "+f),Bh)};function tC(f){return(f/1024/1024).toFixed(2)}class P_ extends Cr{constructor(i,u,h){super();P(this,"node");P(this,"props");P(this,"settings");P(this,"progress",0);P(this,"delayFor",0);P(this,"delay",0);P(this,"timingFunction");P(this,"propValuesMap",{});P(this,"dynPropValuesMap");this.node=i,this.props=u;for(const S in u)if(S!=="shaderProps")this.propValuesMap.props===void 0&&(this.propValuesMap.props={}),this.propValuesMap.props[S]={start:i[S]||0,target:u[S]};else if(i.shader.type!=="DynamicShader"){this.propValuesMap.shaderProps={};for(const a in u.shaderProps)this.propValuesMap.shaderProps[a]={start:i.shader.props[a],target:u.shaderProps[a]}}else{const a=Object.keys(u.shaderProps),m=a.length;this.dynPropValuesMap={};for(let C=0;C<m;C++){const y=a[C],v=u.shaderProps[y];this.dynPropValuesMap[y]={};const M=Object.entries(v),b=M.length;for(let _=0;_<b;_++){const[O,B]=M[_];this.dynPropValuesMap[y][O]={start:i.shader.props[y][O],target:B}}}}const g=h.easing||"linear",x=h.delay??0;this.settings={duration:h.duration??0,delay:x,easing:g,loop:h.loop??!1,repeat:h.repeat??0,repeatDelay:h.repeatDelay??0,stopMethod:h.stopMethod??!1},this.timingFunction=D_(g),this.delayFor=x,this.delay=x}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(i,u){const h=Object.entries(u),g=h.length;for(let x=0;x<g;x++){const[S,a]=h[x];i[S]=a.start}}restore(){if(this.reset(),this.propValuesMap.props!==void 0&&this.restoreValues(this.node,this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),u=i.length;if(u>0)for(let h=0;h<u;h++){const g=i[h];this.restoreValues(this.node.shader.props[g],this.dynPropValuesMap[g])}}}reverseValues(i){const u=Object.entries(i),h=u.length;for(let g=0;g<h;g++){const[x,S]=u[g];i[x]={start:S.target,target:S.start}}}reverse(){if(this.progress=0,this.propValuesMap.props!==void 0&&this.reverseValues(this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.reverseValues(this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const i=Object.keys(this.dynPropValuesMap),u=i.length;if(u>0)for(let h=0;h<u;h++){const g=i[h];this.reverseValues(this.dynPropValuesMap[g])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(i,u,h){return(this.timingFunction(i)||i)*(h-u)+u}updateValue(i,u,h,g){if(this.progress===1)return u;if(this.progress===0)return h;const x=u;if(i.indexOf("color")!==-1){if(h===x)return h;if(g){const S=this.timingFunction(this.progress)||this.progress;return ZS(h,x,S)}return ZS(h,x,this.progress)}return g?this.applyEasing(this.progress,h,x):h+(x-h)*this.progress}updateValues(i,u,h){const g=Object.entries(u),x=g.length;for(let S=0;S<x;S++){const[a,m]=g[S];i[a]=this.updateValue(a,m.target,m.start,h)}}update(i){const{duration:u,loop:h,easing:g,stopMethod:x}=this.settings,{delayFor:S}=this;if(u===0&&S===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=i,this.delayFor>=0)return;i=-this.delayFor,this.delayFor=0}if(u===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=i/u,this.progress>1&&(this.progress=h?0:1,this.delayFor=this.delay,x)){this.emit("finished",{});return}if(this.propValuesMap.props!==void 0&&this.updateValues(this.node,this.propValuesMap.props,g),this.propValuesMap.shaderProps!==void 0&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,g),this.dynPropValuesMap!==void 0){const a=Object.keys(this.dynPropValuesMap),m=a.length;if(m>0)for(let C=0;C<m;C++){const y=a[C];this.updateValues(this.node.shader.props[y],this.dynPropValuesMap[y],g)}}this.progress<1&&this.emit("tick",{progress:this.progress}),this.progress===1&&this.emit("finished",{})}}class O_ extends Cr{constructor(i,u){super();P(this,"manager");P(this,"animation");P(this,"stoppedPromise");P(this,"stoppedResolve",null);P(this,"state");this.manager=i,this.animation=u,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this),this.onTick=this.onTick.bind(this)}start(){return this.state!=="running"&&this.state!=="scheduled"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="scheduled"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.animation.on("tick",this.onTick),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating),this.animation.off("tick",this.onTick)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(i=>{this.stoppedResolve=i}))}onFinished(){ut(this.stoppedResolve);const{loop:i,stopMethod:u}=this.animation.settings;if(u==="reverse"){this.animation.once("finished",this.onFinished),this.animation.reverse();return}i||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.state="running",this.emit("animating",this)}onTick(i,u){this.emit("tick",u)}}var hi;(function(f){f[f.Init=0]="Init",f[f.OutOfBounds=2]="OutOfBounds",f[f.InBounds=4]="InBounds",f[f.InViewport=8]="InViewport"})(hi||(hi={}));const Wl=new Map;Wl.set(hi.Init,"init");Wl.set(hi.OutOfBounds,"outOfBounds");Wl.set(hi.InBounds,"inBounds");Wl.set(hi.InViewport,"inViewport");var Ne;(function(f){f[f.Children=1]="Children",f[f.ScaleRotate=2]="ScaleRotate",f[f.Local=4]="Local",f[f.Global=8]="Global",f[f.Clipping=16]="Clipping",f[f.CalculatedZIndex=32]="CalculatedZIndex",f[f.ZIndexSortedChildren=64]="ZIndexSortedChildren",f[f.PremultipliedColors=128]="PremultipliedColors",f[f.WorldAlpha=256]="WorldAlpha",f[f.RenderState=512]="RenderState",f[f.IsRenderable=1024]="IsRenderable",f[f.RenderTexture=2048]="RenderTexture",f[f.ParentRenderTexture=4096]="ParentRenderTexture",f[f.RenderBounds=8192]="RenderBounds",f[f.None=0]="None",f[f.All=14335]="All"})(Ne||(Ne={}));class Qm extends Cr{constructor(i,u){super();P(this,"stage");P(this,"children",[]);P(this,"_id",C_());P(this,"props");P(this,"updateType",Ne.All);P(this,"childUpdateType",Ne.None);P(this,"globalTransform");P(this,"scaleRotateTransform");P(this,"localTransform");P(this,"sceneGlobalTransform");P(this,"renderCoords");P(this,"sceneRenderCoords");P(this,"renderBound");P(this,"strictBound");P(this,"preloadBound");P(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});P(this,"isRenderable",!1);P(this,"renderState",hi.Init);P(this,"worldAlpha",1);P(this,"premultipliedColorTl",0);P(this,"premultipliedColorTr",0);P(this,"premultipliedColorBl",0);P(this,"premultipliedColorBr",0);P(this,"calcZIndex",0);P(this,"hasRTTupdates",!1);P(this,"parentHasRenderTexture",!1);P(this,"rttParent",null);P(this,"onTextureLoaded",(i,u)=>{var h,g;this.autosizeNode(u),this.setUpdateType(Ne.IsRenderable),this.stage.requestRender(),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),u.width>1&&u.height>1&&this.emit("loaded",{type:"texture",dimensions:u}),((g=(h=this.props.textureOptions)==null?void 0:h.resizeMode)==null?void 0:g.type)==="contain"&&this.setUpdateType(Ne.Local)});P(this,"onTextureFailed",(i,u)=>{this.setUpdateType(Ne.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("failed",{type:"texture",error:u})});P(this,"onTextureFreed",()=>{this.setUpdateType(Ne.IsRenderable),this.parentHasRenderTexture&&this.notifyParentRTTOfUpdate(),this.emit("freed",{type:"texture"})});this.stage=i,this.props={...u,parent:null,texture:null,src:null,rtt:!1},this.parent=u.parent,this.texture=u.texture,this.src=u.src,this.rtt=u.rtt,u.boundsMargin&&(this.boundsMargin=Array.isArray(u.boundsMargin)?u.boundsMargin:[u.boundsMargin,u.boundsMargin,u.boundsMargin,u.boundsMargin]),this.setUpdateType(Ne.ScaleRotate|Ne.Local|Ne.RenderBounds|Ne.RenderState),tu()===!1&&u.preventCleanup===!0&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.stage.defaultTexture&&this.stage.defaultTexture.state!=="loaded"&&this.stage.defaultTexture.once("loaded",()=>{this.setUpdateType(Ne.IsRenderable)})}loadTexture(){const{texture:i}=this.props;ut(i),queueMicrotask(()=>{var u;if(this.textureOptions.preload===!0&&this.stage.txManager.loadTexture(i),i.preventCleanup=((u=this.props.textureOptions)==null?void 0:u.preventCleanup)??!1,i.on("loaded",this.onTextureLoaded),i.on("failed",this.onTextureFailed),i.on("freed",this.onTextureFreed),this.parentHasRenderTexture){this.notifyParentRTTOfUpdate();return}i.state==="loaded"?(ut(i.dimensions),this.onTextureLoaded(i,i.dimensions)):i.state==="failed"?(ut(i.error),this.onTextureFailed(i,i.error)):i.state==="freed"&&this.onTextureFreed(i)})}unloadTexture(){this.texture!==null&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(i){this.autosize&&(this.width=i.width,this.height=i.height)}setUpdateType(i){this.updateType|=i;const u=this.props.parent;u&&(u.updateType&Ne.Children||u.setUpdateType(Ne.Children))}sortChildren(){this.children.sort((i,u)=>i.calcZIndex-u.calcZIndex)}updateScaleRotateTransform(){const{rotation:i,scaleX:u,scaleY:h}=this.props;if(i===0&&u===1&&h===1){this.scaleRotateTransform=void 0;return}this.scaleRotateTransform=li.rotate(i,this.scaleRotateTransform).scale(u,h)}updateLocalTransform(){var m,C;const{x:i,y:u,width:h,height:g}=this.props,x=this.props.mountX*h,S=this.props.mountY*g;if(this.scaleRotateTransform){const y=this.props.pivotX*h,v=this.props.pivotY*g;this.localTransform=li.translate(i-x+y,u-S+v,this.localTransform).multiply(this.scaleRotateTransform).translate(-y,-v)}else this.localTransform=li.translate(i-x,u-S,this.localTransform);const a=this.props.texture;if(a&&a.dimensions&&((C=(m=this.props.textureOptions)==null?void 0:m.resizeMode)==null?void 0:C.type)==="contain"){let y=1,v=1,M=0,b=0;const{width:_,height:O}=a.dimensions,B=_/O,G=h/g;if(B>G){const $=h/_,j=O*$;b=(g-j)/2,v=j/g}else{const $=g/O,j=_*$;M=(h-j)/2,y=j/h}this.localTransform.translate(M,b).scale(y,v)}this.setUpdateType(Ne.Global)}update(i,u){this.updateType&Ne.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(Ne.Local)),this.updateType&Ne.Local&&(this.updateLocalTransform(),this.setUpdateType(Ne.Global));const h=this.props.parent;let g=null;if(this.updateType&Ne.RenderTexture&&this.rtt&&(this.hasRTTupdates=!0),this.updateType&Ne.Global&&(ut(this.localTransform),this.parentHasRenderTexture===!0&&(h==null?void 0:h.rtt)===!0?(this.globalTransform=li.identity(),this.sceneGlobalTransform=li.copy((h==null?void 0:h.globalTransform)||li.identity()).multiply(this.localTransform)):this.parentHasRenderTexture===!0&&(h==null?void 0:h.rtt)===!1?(this.sceneGlobalTransform=li.copy((h==null?void 0:h.sceneGlobalTransform)||this.localTransform).multiply(this.localTransform),this.globalTransform=li.copy((h==null?void 0:h.globalTransform)||this.localTransform,this.globalTransform)):this.globalTransform=li.copy((h==null?void 0:h.globalTransform)||this.localTransform,this.globalTransform),h!==null&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(Ne.RenderState|Ne.Children),this.childUpdateType|=Ne.Global,this.clipping===!0&&(this.setUpdateType(Ne.Clipping|Ne.RenderBounds),this.childUpdateType|=Ne.RenderBounds)),this.updateType&Ne.RenderBounds&&(this.createRenderBounds(),this.setUpdateType(Ne.RenderState),this.setUpdateType(Ne.Children),this.childUpdateType|=Ne.RenderBounds),this.updateType&Ne.RenderState&&(g=this.checkRenderBounds(),this.setUpdateType(Ne.IsRenderable),g!==hi.OutOfBounds&&this.updateRenderState(g)),this.updateType&Ne.WorldAlpha&&(h?this.worldAlpha=h.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(Ne.Children|Ne.PremultipliedColors|Ne.IsRenderable),this.childUpdateType|=Ne.WorldAlpha),this.updateType&Ne.IsRenderable&&this.updateIsRenderable(),this.updateType&Ne.Clipping&&(this.calculateClippingRect(u),this.setUpdateType(Ne.Children),this.childUpdateType|=Ne.Clipping,this.childUpdateType|=Ne.RenderBounds),this.updateType&Ne.PremultipliedColors&&(this.premultipliedColorTl=xh(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=xh(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=xh(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=xh(this.props.colorBr,this.worldAlpha,!0))),h!==null&&this.updateType&Ne.CalculatedZIndex&&(this.calculateZIndex(),h.setUpdateType(Ne.ZIndexSortedChildren)),this.props.strictBounds===!0&&this.renderState===hi.OutOfBounds){this.updateType&=~Ne.RenderBounds;return}if(this.updateType&Ne.Children&&this.children.length>0)for(let x=0,S=this.children.length;x<S;x++){const a=this.children[x];if(a.setUpdateType(this.childUpdateType),a.updateType===0)continue;let m=this.clippingRect;this.rtt===!0&&(m={x:0,y:0,width:0,height:0,valid:!1}),a.update(i,m)}this.parentHasRenderTexture&&this.updateType>0&&this.notifyParentRTTOfUpdate(),this.updateType&Ne.ZIndexSortedChildren&&this.sortChildren(),g===hi.OutOfBounds&&(this.updateRenderState(g),this.updateIsRenderable(),this.rtt===!0&&g===hi.OutOfBounds&&this.notifyChildrenRTTOfUpdate(g)),this.updateType=0,this.childUpdateType=0}findParentRTTNode(){let i=this.parent;for(;i&&!i.rtt;)i=i.parent;return i}getRTTParentRenderState(){const i=this.rttParent||this.findParentRTTNode();return i?i.renderState:null}notifyChildrenRTTOfUpdate(i){for(const u of this.children)u.updateRenderState(i),u.updateIsRenderable(),u.notifyChildrenRTTOfUpdate(i)}notifyParentRTTOfUpdate(){if(this.parent===null)return;const i=this.rttParent||this.findParentRTTNode();i&&(i.hasRTTupdates=!0,i.setUpdateType(Ne.RenderTexture),i.parentHasRenderTexture===!0&&i.notifyParentRTTOfUpdate())}checkRenderBounds(){return ut(this.renderBound),ut(this.strictBound),ut(this.preloadBound),_m(this.renderBound,this.strictBound)?hi.InViewport:_m(this.renderBound,this.preloadBound)?hi.InBounds:k_(this.renderBound,this.strictBound)?hi.InViewport:this.parent!==null&&(this.props.width===0||this.props.height===0)?this.parent.renderState:hi.OutOfBounds}updateBoundingRect(){const i=this.sceneGlobalTransform||this.globalTransform,u=this.sceneRenderCoords||this.renderCoords;ut(i),ut(u);const{tb:h,tc:g}=i,{x1:x,y1:S,x3:a,y3:m}=u;if(h===0||g===0)this.renderBound=Ga(x,S,a,m,this.renderBound);else{const{x2:C,x4:y,y2:v,y4:M}=u;this.renderBound=Ga(Math.min(x,C,a,y),Math.min(S,v,m,M),Math.max(x,C,a,y),Math.max(S,v,m,M),this.renderBound)}}createRenderBounds(){if(ut(this.stage),this.parent!==null&&this.parent.strictBound!==void 0){const C=this.parent.strictBound;this.strictBound=Ga(C.x1,C.y1,C.x2,C.y2),this.preloadBound=Ym(this.strictBound,this.boundsMargin)}else this.strictBound=this.stage.strictBound,this.preloadBound=this.stage.preloadBound;if(this.props.clipping===!1||this.renderBound===void 0||_m(this.renderBound,this.strictBound)===!1)return;const{x:i,y:u,width:h,height:g}=this.props,{tx:x,ty:S}=this.sceneGlobalTransform||this.globalTransform||{},a=x??i,m=S??u;this.strictBound=Ga(a,m,a+h,m+g,this.strictBound),this.preloadBound=Ym(this.strictBound,this.boundsMargin)}updateRenderState(i){if(i===this.renderState)return;const u=this.renderState;this.renderState=i;const h=Wl.get(i);ut(h),this.emit(h,{previous:u,current:i})}updateIsRenderable(){let i=!1,u=!1;if(this.checkBasicRenderability()===!1){this.updateTextureOwnership(!1),this.setRenderable(!1);return}this.texture!==null?(u=!0,i=this.texture.state==="loaded"):(this.hasShader()||this.hasColorProperties()===!0)&&this.hasDimensions()===!0&&this.stage.defaultTexture&&this.stage.defaultTexture.state==="loaded"&&(i=!0),this.updateTextureOwnership(u),this.setRenderable(i)}checkBasicRenderability(){return!(this.worldAlpha===0||this.isOutOfBounds()===!0)}setRenderable(i){this.isRenderable=i}updateTextureOwnership(i){var u;(u=this.texture)==null||u.setRenderableOwner(this,i)}isOutOfBounds(){return this.renderState<=hi.OutOfBounds}hasDimensions(){return this.props.width!==0&&this.props.height!==0}hasColorProperties(){return this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0}hasShader(){return this.props.shader!==null}calculateRenderCoords(){const{width:i,height:u}=this,{tx:h,ty:g,ta:x,tb:S,tc:a,td:m}=this.globalTransform;if(S===0&&a===0){const O=h,B=h+i*x,G=g,$=g+u*m;this.renderCoords=Wa.translate(O,G,B,G,B,$,O,$,this.renderCoords)}else this.renderCoords=Wa.translate(h,g,h+i*x,g+i*a,h+i*x+u*S,g+i*a+u*m,h+u*S,g+u*m,this.renderCoords);if(this.sceneGlobalTransform===void 0)return;const{tx:C,ty:y,ta:v,tb:M,tc:b,td:_}=this.sceneGlobalTransform;if(M===0&&b===0){const O=C,B=C+i*v,G=y,$=y+u*_;this.sceneRenderCoords=Wa.translate(O,G,B,G,B,$,O,$,this.sceneRenderCoords)}else this.sceneRenderCoords=Wa.translate(C,y,C+i*v,y+i*b,C+i*v+u*M,y+i*b+u*_,C+u*M,y+u*_,this.sceneRenderCoords)}calculateClippingRect(i){ut(this.globalTransform);const{clippingRect:u,props:h,globalTransform:g}=this,{clipping:x}=h,S=g.tb!==0||g.tc!==0;x===!0&&S===!1?(u.x=g.tx,u.y=g.ty,u.width=this.width*g.ta,u.height=this.height*g.td,u.valid=!0):u.valid=!1,i.valid===!0&&u.valid===!0?YC(i,u,u):i.valid===!0&&(QC(i,u),u.valid=!0)}calculateZIndex(){var x,S;const i=this.props,u=i.zIndex||0,h=((x=i.parent)==null?void 0:x.zIndex)||0;let g=u;(S=i.parent)!=null&&S.zIndexLocked&&(g=u<h?u:h),this.calcZIndex=g}destroy(){var i;for(this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,this.renderCoords=void 0,this.renderBound=void 0,this.strictBound=void 0,this.preloadBound=void 0,this.globalTransform=void 0,this.scaleRotateTransform=void 0,this.localTransform=void 0,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;this.children.length>0;)(i=this.children[0])==null||i.destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}renderQuads(i){this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(ut(this.globalTransform),ut(this.renderCoords),i.addQuad({width:this.props.width,height:this.props.height,colorTl:this.premultipliedColorTl,colorTr:this.premultipliedColorTr,colorBl:this.premultipliedColorBl,colorBr:this.premultipliedColorBr,texture:this.texture||this.stage.defaultTexture,textureOptions:this.textureOptions,zIndex:this.zIndex,shader:this.shader.shader,shaderProps:this.shader.getResolvedProps(),alpha:this.worldAlpha,clippingRect:this.clippingRect,tx:this.globalTransform.tx,ty:this.globalTransform.ty,ta:this.globalTransform.ta,tb:this.globalTransform.tb,tc:this.globalTransform.tc,td:this.globalTransform.td,renderCoords:this.renderCoords,rtt:this.rtt,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions}))}get id(){return this._id}get data(){return this.props.data}set data(i){this.props.data=i}get x(){return this.props.x}set x(i){this.props.x!==i&&(this.props.x=i,this.setUpdateType(Ne.Local))}get absX(){var i,u,h;return this.props.x+-this.props.width*this.props.mountX+(((i=this.props.parent)==null?void 0:i.absX)||((h=(u=this.props.parent)==null?void 0:u.globalTransform)==null?void 0:h.tx)||0)}get absY(){var i;return this.props.y+-this.props.height*this.props.mountY+(((i=this.props.parent)==null?void 0:i.absY)??0)}get y(){return this.props.y}set y(i){this.props.y!==i&&(this.props.y=i,this.setUpdateType(Ne.Local))}get width(){return this.props.width}set width(i){this.props.width!==i&&(this.props.width=i,this.setUpdateType(Ne.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Ne.RenderTexture)))}get height(){return this.props.height}set height(i){this.props.height!==i&&(this.props.height=i,this.setUpdateType(Ne.Local),this.props.rtt&&(this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.setUpdateType(Ne.RenderTexture)))}get scale(){return this.scaleX}set scale(i){this.scaleX=i,this.scaleY=i}get scaleX(){return this.props.scaleX}set scaleX(i){this.props.scaleX!==i&&(this.props.scaleX=i,this.setUpdateType(Ne.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(i){this.props.scaleY!==i&&(this.props.scaleY=i,this.setUpdateType(Ne.ScaleRotate))}get mount(){return this.props.mount}set mount(i){(this.props.mountX!==i||this.props.mountY!==i)&&(this.props.mountX=i,this.props.mountY=i,this.props.mount=i,this.setUpdateType(Ne.Local))}get mountX(){return this.props.mountX}set mountX(i){this.props.mountX!==i&&(this.props.mountX=i,this.setUpdateType(Ne.Local))}get mountY(){return this.props.mountY}set mountY(i){this.props.mountY!==i&&(this.props.mountY=i,this.setUpdateType(Ne.Local))}get pivot(){return this.props.pivot}set pivot(i){(this.props.pivotX!==i||this.props.pivotY!==i)&&(this.props.pivotX=i,this.props.pivotY=i,this.props.pivot=i,this.setUpdateType(Ne.Local))}get pivotX(){return this.props.pivotX}set pivotX(i){this.props.pivotX!==i&&(this.props.pivotX=i,this.setUpdateType(Ne.Local))}get pivotY(){return this.props.pivotY}set pivotY(i){this.props.pivotY!==i&&(this.props.pivotY=i,this.setUpdateType(Ne.Local))}get rotation(){return this.props.rotation}set rotation(i){this.props.rotation!==i&&(this.props.rotation=i,this.setUpdateType(Ne.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(i){this.props.alpha=i,this.setUpdateType(Ne.PremultipliedColors|Ne.WorldAlpha|Ne.Children|Ne.IsRenderable),this.childUpdateType|=Ne.WorldAlpha}get autosize(){return this.props.autosize}set autosize(i){this.props.autosize=i}get boundsMargin(){var i;return this.props.boundsMargin??((i=this.parent)==null?void 0:i.boundsMargin)??this.stage.boundsMargin}set boundsMargin(i){if(i!==this.props.boundsMargin){if(i===null)this.props.boundsMargin=i;else{const u=Array.isArray(i)?i:[i,i,i,i];this.props.boundsMargin=u}this.setUpdateType(Ne.RenderBounds)}}get clipping(){return this.props.clipping}set clipping(i){this.props.clipping=i,this.setUpdateType(Ne.Clipping|Ne.RenderBounds|Ne.Children),this.childUpdateType|=Ne.Global|Ne.Clipping}get color(){return this.props.color}set color(i){this.colorTop=i,this.colorBottom=i,this.colorLeft=i,this.colorRight=i,this.props.color=i,this.setUpdateType(Ne.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(i){(this.props.colorTl!==i||this.props.colorTr!==i)&&(this.colorTl=i,this.colorTr=i),this.props.colorTop=i,this.setUpdateType(Ne.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(i){(this.props.colorBl!==i||this.props.colorBr!==i)&&(this.colorBl=i,this.colorBr=i),this.props.colorBottom=i,this.setUpdateType(Ne.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(i){(this.props.colorTl!==i||this.props.colorBl!==i)&&(this.colorTl=i,this.colorBl=i),this.props.colorLeft=i,this.setUpdateType(Ne.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(i){(this.props.colorTr!==i||this.props.colorBr!==i)&&(this.colorTr=i,this.colorBr=i),this.props.colorRight=i,this.setUpdateType(Ne.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(i){this.props.colorTl=i,this.setUpdateType(Ne.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(i){this.props.colorTr=i,this.setUpdateType(Ne.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(i){this.props.colorBl=i,this.setUpdateType(Ne.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(i){this.props.colorBr=i,this.setUpdateType(Ne.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(i){this.props.zIndexLocked=i,this.setUpdateType(Ne.CalculatedZIndex|Ne.Children);for(let u=0,h=this.children.length;u<h;u++)this.children[u].setUpdateType(Ne.CalculatedZIndex)}get zIndex(){return this.props.zIndex}set zIndex(i){this.props.zIndex=i,this.setUpdateType(Ne.CalculatedZIndex|Ne.Children);for(let u=0,h=this.children.length;u<h;u++)this.children[u].setUpdateType(Ne.CalculatedZIndex)}get parent(){return this.props.parent}set parent(i){const u=this.props.parent;if(u!==i){if(this.props.parent=i,u){const h=u.children.indexOf(this);ut(h!==-1,"CoreNode.parent: Node not found in old parent's children!"),u.children.splice(h,1),u.setUpdateType(Ne.Children|Ne.ZIndexSortedChildren)}i&&(i.children.push(this),this.setUpdateType(Ne.All),i.setUpdateType(Ne.Children|Ne.ZIndexSortedChildren),(i.rtt||i.parentHasRenderTexture)&&this.applyRTTInheritance(i)),this.updateScaleRotateTransform(),this.setUpdateType(Ne.RenderBounds|Ne.Children)}}get preventCleanup(){return this.props.textureOptions.preventCleanup||!1}set preventCleanup(i){tu()===!1&&console.warn("CoreNode.preventCleanup: Is deprecated and will be removed in upcoming release, please use textureOptions.preventCleanup instead"),this.props.textureOptions.preventCleanup=i}get rtt(){return this.props.rtt}set rtt(i){this.props.rtt!==i&&(this.props.rtt=i,i===!0?(this.initRenderTexture(),this.markChildrenWithRTT()):this.cleanupRenderTexture(),this.setUpdateType(Ne.RenderTexture),this.parentHasRenderTexture===!0&&this.notifyParentRTTOfUpdate())}initRenderTexture(){this.texture=this.stage.txManager.createTexture("RenderTexture",{width:this.width,height:this.height}),this.stage.renderer.renderToTexture(this)}cleanupRenderTexture(){this.unloadTexture(),this.clearRTTInheritance(),this.hasRTTupdates=!1,this.texture=null}markChildrenWithRTT(i=null){const u=i||this;for(const h of u.children)h.setUpdateType(Ne.All),h.parentHasRenderTexture=!0,h.markChildrenWithRTT()}applyRTTInheritance(i){i.rtt&&i.setUpdateType(Ne.RenderTexture),this.markChildrenWithRTT(i)}clearRTTInheritance(){if(!this.rtt)for(const i of this.children)i.parentHasRenderTexture=!1,i.rttParent=null,i.setUpdateType(Ne.All),i.clearRTTInheritance()}get shader(){return this.props.shader}set shader(i){this.props.shader!==i&&(this.props.shader=i,this.setUpdateType(Ne.IsRenderable))}get src(){return this.props.src}set src(i){if(this.props.src!==i){if(this.props.src=i,!i){this.texture=null;return}this.texture=this.stage.txManager.createTexture("ImageTexture",{src:i,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight})}}set imageType(i){this.props.imageType!==i&&(this.props.imageType=i)}get imageType(){return this.props.imageType||null}get srcHeight(){return this.props.srcHeight}set srcHeight(i){this.props.srcHeight=i}get srcWidth(){return this.props.srcWidth}set srcWidth(i){this.props.srcWidth=i}get srcX(){return this.props.srcX}set srcX(i){this.props.srcX=i}get srcY(){return this.props.srcY}set srcY(i){this.props.srcY=i}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let i=this.parent;for(;i;){if(i.rtt)return i;i=i.parent}return null}get texture(){return this.props.texture}set texture(i){if(this.props.texture===i)return;const u=this.props.texture;u&&(u.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=i,i!==null&&(i.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(Ne.IsRenderable)}set textureOptions(i){this.props.textureOptions=i}get textureOptions(){return this.props.textureOptions}get strictBounds(){return this.props.strictBounds}set strictBounds(i){i!==this.props.strictBounds&&(this.props.strictBounds=i,this.setUpdateType(Ne.RenderBounds|Ne.Children),this.childUpdateType|=Ne.RenderBounds|Ne.Children)}animate(i,u){const h=new P_(this,i,u);return new O_(this.stage.animationManager,h)}flush(){}}const N_=f=>{let o=!1;const i=()=>{if(f.updateFrameTime(),f.updateAnimations(),!f.hasSceneUpdates()){f.calculateFps(),setTimeout(i,16.666666666666668),o||(f.eventBus.emit("idle"),o=!0),f.txMemManager.checkCleanup()===!0&&f.txMemManager.cleanup(!1),f.flushFrameEvents();return}o=!1,f.drawFrame(),f.flushFrameEvents(),requestAnimationFrame(i)};requestAnimationFrame(i)},ws=()=>performance?performance.now():Date.now();class U_{constructor(){P(this,"activeAnimations",new Set)}registerAnimation(o){this.activeAnimations.add(o)}unregisterAnimation(o){this.activeAnimations.delete(o)}update(o){this.activeAnimations.forEach(i=>{i.update(o)})}}function B_(){function f(i){return i.indexOf("image/png")!==-1}function o(i,u,h,g,x,S,a){return new Promise(function(m,C){var y=a.supportsOptionsCreateImageBitmap,v=a.supportsFullCreateImageBitmap,M=new XMLHttpRequest;M.open("GET",i,!0),M.responseType="blob",M.onload=function(){if(M.status!==200&&M.status!==0)return C(new Error("Failed to load image: "+M.statusText));var b=M.response,_=u!==void 0?u:f(b.type);if(v===!0&&x!==null&&S!==null){createImageBitmap(b,h||0,g||0,x,S,{premultiplyAlpha:_?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(O){m({data:O,premultiplyAlpha:u})}).catch(function(O){C(O)});return}else y===!1&&y===!1?createImageBitmap(b).then(function(O){m({data:O,premultiplyAlpha:u})}).catch(function(O){C(O)}):createImageBitmap(b,{premultiplyAlpha:_?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(O){m({data:O,premultiplyAlpha:u})}).catch(function(O){C(O)})},M.onerror=function(){C(new Error("Network error occurred while trying to fetch the image."))},M.send()})}self.onmessage=i=>{var u=i.data.src,h=i.data.id,g=i.data.premultiplyAlpha,x=i.data.sx,S=i.data.sy,a=i.data.sw,m=i.data.sh,C=!1,y=!1;o(u,g,x,S,a,m,{supportsOptionsCreateImageBitmap:C,supportsFullCreateImageBitmap:y}).then(function(v){self.postMessage({id:h,src:u,data:v},[v.data])}).catch(function(v){self.postMessage({id:h,src:u,error:v.message})})}}class j_{constructor(o,i){P(this,"imageWorkersEnabled",!0);P(this,"messageManager",{});P(this,"workers",[]);P(this,"workerIndex",0);P(this,"nextId",0);this.workers=this.createWorkers(o,i),this.workers.forEach(u=>{u.onmessage=this.handleMessage.bind(this)})}handleMessage(o){const{id:i,data:u,error:h}=o.data,g=this.messageManager[i];if(g){const[x,S]=g;delete this.messageManager[i],h?S(new Error(h)):x(u)}}createWorkers(o=1,i){let u=`(${B_.toString()})()`;i.options===!0&&(u=u.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;")),i.full===!0&&(u=u.replace("var supportsOptionsCreateImageBitmap = false;","var supportsOptionsCreateImageBitmap = true;"),u=u.replace("var supportsFullCreateImageBitmap = false;","var supportsFullCreateImageBitmap = true;")),u=u.replace('"use strict";',"");const h=new Blob([u],{type:"application/javascript"}),g=(self.URL?URL:webkitURL).createObjectURL(h),x=[];for(let S=0;S<o;S++)x.push(new Worker(g));return x}getNextWorker(){const o=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,o}getImage(o,i,u,h,g,x){return new Promise((S,a)=>{try{if(this.workers){const m=this.nextId++;this.messageManager[m]=[S,a];const C=this.getNextWorker();C&&C.postMessage({id:m,src:o,premultiplyAlpha:i,sx:u,sy:h,sw:g,sh:x})}}catch(m){a(m)}})}}const Nl=class Nl extends Hl{constructor(i,u){super(i);P(this,"type",_n.color);P(this,"props");this.props=Nl.resolveDefaults(u||{})}get color(){return this.props.color}set color(i){this.props.color=i}async getTextureSource(){const i=new Uint8Array(4);return this.color===4294967295?(i[0]=255,i[1]=255,i[2]=255,i[3]=255):(i[0]=this.color>>16&255,i[1]=this.color>>8&255,i[2]=this.color&255,i[3]=this.color>>>24&255),this.setState("fetched",{width:1,height:1}),{data:i,premultiplyAlpha:!0}}static makeCacheKey(i){return`ColorTexture,${Nl.resolveDefaults(i).color}`}static resolveDefaults(i){return{color:i.color||4294967295}}};P(Nl,"z$__type__Props");let Kh=Nl;function F_(f){return/\.(ktx|pvr)$/.test(f)}const nC=async f=>{const i=await(await fetch(f)).arrayBuffer();return f.indexOf(".ktx")!==-1?$_(i):z_(i)},$_=async f=>{const o=new DataView(f),i=o.getUint32(12)===16909060,u=[],h={glInternalFormat:o.getUint32(28,i),pixelWidth:o.getUint32(36,i),pixelHeight:o.getUint32(40,i),numberOfMipmapLevels:o.getUint32(56,i),bytesOfKeyValueData:o.getUint32(60,i)};let g=64;g+=h.bytesOfKeyValueData;for(let x=0;x<h.numberOfMipmapLevels;x++){const S=o.getUint32(g);g+=4,u.push(o.buffer.slice(g,S)),g+=S}return{data:{glInternalFormat:h.glInternalFormat,mipmaps:u,width:h.pixelWidth||0,height:h.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},z_=async f=>{const S=f,a=new Int32Array(S,0,13),m=a[12]+52,C=new Uint8Array(S,m),y=[],v={pixelWidth:a[7],pixelHeight:a[6],numberOfMipmapLevels:a[11]||0};let M=0,b=v.pixelWidth||0,_=v.pixelHeight||0;for(let O=0;O<v.numberOfMipmapLevels;O++){const B=(b+3>>2)*(_+3>>2)*8,G=new Uint8Array(S,C.byteOffset+M,B);y.push(G),M+=B,b=b>>1,_=_>>1}return{data:{glInternalFormat:36196,mipmaps:y,width:v.pixelWidth||0,height:v.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}};function V_(f){return/\.(svg)(\?.*)?$/.test(f)}const iC=(f,o,i,u,h,g,x)=>new Promise((S,a)=>{const m=document.createElement("canvas"),C=m.getContext("2d");ut(C),C.imageSmoothingEnabled=!0;const y=new Image;y.onload=()=>{const v=u??0,M=h??0,b=o||y.width,_=i||y.height;m.width=b,m.height=_,C.drawImage(y,0,0,b,_),S({data:C.getImageData(v,M,g??b,x??_),premultiplyAlpha:!1})},y.onerror=v=>{a(v)},y.src=f});function JC(f,o=""){return new Promise((i,u)=>{const h=new XMLHttpRequest;h.responseType=o,h.onreadystatechange=function(){h.readyState==XMLHttpRequest.DONE&&(h.status===0||h.status===200?i(h.response):u(h.statusText))},h.open("GET",f,!0),h.send(null)})}const Ul=class Ul extends Hl{constructor(i,u){super(i);P(this,"props");P(this,"type",_n.image);this.props=Ul.resolveDefaults(u)}hasAlphaChannel(i){return i.indexOf("image/png")!==-1}async loadImageFallback(i,u){const h=new Image;return typeof i=="string"&&Rm(i)===!1&&(h.crossOrigin="anonymous"),new Promise(g=>{h.onload=()=>{g({data:h,premultiplyAlpha:u})},h.onerror=()=>{console.warn("Image loading failed, returning fallback object."),g({data:h,premultiplyAlpha:u})},i instanceof Blob?h.src=URL.createObjectURL(i):h.src=i})}async createImageBitmap(i,u,h,g,x,S){const a=u??i.type.includes("image/png"),m=this.txManager.imageBitmapSupported;return m.full===!0&&x!==null&&S!==null?{data:await createImageBitmap(i,h||0,g||0,x,S,{premultiplyAlpha:a?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:a}:m.basic===!0?{data:await createImageBitmap(i),premultiplyAlpha:a}:{data:await createImageBitmap(i,{premultiplyAlpha:a?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:a}}async loadImage(i){const{premultiplyAlpha:u,sx:h,sy:g,sw:x,sh:S}=this.props;if(this.txManager.hasCreateImageBitmap===!0){if(Rm(i)===!1&&this.txManager.hasWorker===!0&&this.txManager.imageWorkerManager!==null)return this.txManager.imageWorkerManager.getImage(i,u,h,g,x,S);let a;return Rm(i)===!0?a=M_(i):a=await JC(i,"blob").then(m=>m),this.createImageBitmap(a,u,h,g,x,S)}return this.loadImageFallback(i,u??!0)}async getTextureSource(){var g,x;let i;try{i=await this.determineImageTypeAndLoadImage()}catch(S){return this.setState("failed",S),{data:null}}if(i.data===null)return this.setState("failed",Error("ImageTexture: No image data")),{data:null};let u,h;return i.data instanceof Uint8Array?(u=this.props.width??0,h=this.props.height??0):(u=((g=i.data)==null?void 0:g.width)??(this.props.width||0),h=((x=i.data)==null?void 0:x.height)??(this.props.height||0)),this.setState("fetched",{width:u,height:h}),{data:i.data,premultiplyAlpha:this.props.premultiplyAlpha??!0}}determineImageTypeAndLoadImage(){const{src:i,premultiplyAlpha:u,type:h}=this.props;if(i===null)return{data:null};if(typeof i!="string"){if(i instanceof Blob)if(this.txManager.hasCreateImageBitmap===!0){const{sx:x,sy:S,sw:a,sh:m}=this.props;return this.createImageBitmap(i,u,x,S,a,m)}else return this.loadImageFallback(i,u??!0);return i instanceof ImageData?{data:i,premultiplyAlpha:u}:{data:i(),premultiplyAlpha:u}}const g=I_(i);return h==="regular"?this.loadImage(g):h==="svg"?iC(g,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):V_(i)===!0?iC(g,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):h==="compressed"||F_(i)===!0?nC(g):this.loadImage(g)}static makeCacheKey(i){const u=Ul.resolveDefaults(i),h=u.key||u.src;if(typeof h!="string")return!1;let g="";return u.sh!==null&&u.sw!==null&&(g+=",",g+=u.sx??"",g+=u.sy??"",g+=u.sw||"",g+=u.sh||""),`ImageTexture,${h},${u.premultiplyAlpha??"true"}${g}`}static resolveDefaults(i){return{src:i.src??"",premultiplyAlpha:i.premultiplyAlpha??!0,key:i.key??null,type:i.type??null,width:i.width??null,height:i.height??null,sx:i.sx??null,sy:i.sy??null,sw:i.sw??null,sh:i.sh??null}}};P(Ul,"z$__type__Props");let $l=Ul;const Bl=class Bl extends Hl{constructor(i,u){super(i);P(this,"props");P(this,"type",_n.noise);this.props=Bl.resolveDefaults(u)}async getTextureSource(){const{width:i,height:u}=this.props,h=i*u*4,g=new Uint8ClampedArray(h);for(let x=0;x<h;x+=4){const S=Math.floor(Math.random()*256);g[x]=S,g[x+1]=S,g[x+2]=S,g[x+3]=255}return this.setState("fetched"),{data:new ImageData(g,i,u)}}static makeCacheKey(i){if(i.cacheId===void 0)return!1;const u=Bl.resolveDefaults(i);return`NoiseTexture,${u.width},${u.height},${u.cacheId}`}static resolveDefaults(i){return{width:i.width??128,height:i.height??128,cacheId:i.cacheId??0}}};P(Bl,"z$__type__Props");let Zm=Bl;const rd=class rd extends Hl{constructor(i,u){super(i);P(this,"props");P(this,"parentTexture");P(this,"type",_n.subTexture);P(this,"onParentTxLoaded",()=>{this.forwardParentTxState("loaded",{width:this.props.width,height:this.props.height})});P(this,"onParentTxFailed",(i,u)=>{this.forwardParentTxState("failed",u)});P(this,"onParentTxFetched",()=>{this.forwardParentTxState("fetched",{width:this.props.width,height:this.props.height})});P(this,"onParentTxFetching",()=>{this.forwardParentTxState("fetching")});P(this,"onParentTxLoading",()=>{this.forwardParentTxState("loading")});P(this,"onParentTxFreed",()=>{this.forwardParentTxState("freed")});this.props=rd.resolveDefaults(u||{}),ut(this.props.texture,"SubTexture requires a parent texture"),ut(this.props.texture instanceof $l,"SubTexture requires an ImageTexture parent"),this.parentTexture=i.resolveParentTexture(this.props.texture),this.renderableOwners.size>0&&this.parentTexture.setRenderableOwner(this,!0),queueMicrotask(()=>{const h=this.parentTexture;h.state==="loaded"?this.onParentTxLoaded(h,h.dimensions):h.state==="fetching"?this.onParentTxFetching():h.state==="fetched"?this.onParentTxFetched():h.state==="loading"?this.onParentTxLoading():h.state==="failed"?this.onParentTxFailed(h,h.error):h.state==="freed"&&this.onParentTxFreed(),h.on("fetched",this.onParentTxFetched),h.on("loading",this.onParentTxLoading),h.on("fetching",this.onParentTxFetching),h.on("loaded",this.onParentTxLoaded),h.on("failed",this.onParentTxFailed),h.on("freed",this.onParentTxFreed)})}forwardParentTxState(i,u){this.setState(i,u)}onChangeIsRenderable(i){this.parentTexture.setRenderableOwner(this,i)}async getTextureSource(){return new Promise((i,u)=>{this.setState("fetched"),i({data:this.props})})}static makeCacheKey(i){return!1}static resolveDefaults(i){return{texture:i.texture,x:i.x||0,y:i.y||0,width:i.width||0,height:i.height||0}}};P(rd,"z$__type__Props");let zl=rd;const sd=class sd extends Hl{constructor(i,u){super(i);P(this,"props");P(this,"type",_n.renderToTexture);this.props=sd.resolveDefaults(u||{})}get width(){return this.props.width}set width(i){this.props.width=i}get height(){return this.props.height}set height(i){this.props.height=i}async getTextureSource(){return this.setState("fetched"),{data:null,premultiplyAlpha:null}}static resolveDefaults(i){return{width:i.width||256,height:i.height||256}}};P(sd,"z$__type__Props");let Yh=sd;async function H_(){var h,g,x;const f=new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,1,3,0,0,0,37,219,86,202,0,0,0,3,80,76,84,69,0,0,0,167,122,61,218,0,0,0,1,116,82,78,83,0,64,230,216,102,0,0,0,10,73,68,65,84,8,215,99,96,0,0,0,2,0,1,226,33,188,51,0,0,0,0,73,69,78,68,174,66,96,130]),o={basic:!1,options:!1,full:!1},i=new Blob([f],{type:"image/png"}),u=await createImageBitmap(i);(h=u.close)==null||h.call(u),o.basic=!0;try{const S={premultiplyAlpha:"none"},a=await createImageBitmap(i,S);(g=a.close)==null||g.call(a),o.options=!0}catch{}try{const S=await createImageBitmap(i,0,0,1,1,{premultiplyAlpha:"none"});(x=S.close)==null||x.call(S),o.full=!0}catch{}return o}class G_ extends Cr{constructor(i,u){super();P(this,"keyCache",new Map);P(this,"inverseKeyCache",new WeakMap);P(this,"txConstructors",{});P(this,"downloadTextureSourceQueue",[]);P(this,"priorityQueue",[]);P(this,"uploadTextureQueue",[]);P(this,"initialized",!1);P(this,"stage");P(this,"numImageWorkers");P(this,"imageWorkerManager",null);P(this,"hasCreateImageBitmap",!!self.createImageBitmap);P(this,"imageBitmapSupported",{basic:!1,options:!1,full:!1});P(this,"hasWorker",!!self.Worker);P(this,"renderer");P(this,"frameTime",0);const{numImageWorkers:h,createImageBitmapSupport:g}=u;this.stage=i,this.numImageWorkers=h,g==="auto"?H_().then(x=>{this.initialize(x)}).catch(x=>{console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.initialized=!0,this.emit("initialized")}):this.initialize({basic:g==="basic",options:g==="options",full:g==="full"}),this.registerTextureType("ImageTexture",$l),this.registerTextureType("ColorTexture",Kh),this.registerTextureType("NoiseTexture",Zm),this.registerTextureType("SubTexture",zl),this.registerTextureType("RenderTexture",Yh)}registerTextureType(i,u){this.txConstructors[i]=u}initialize(i){this.hasCreateImageBitmap=i.basic||i.options||i.full,this.imageBitmapSupported=i,this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.hasCreateImageBitmap&&this.hasWorker&&this.numImageWorkers>0?this.imageWorkerManager=new j_(this.numImageWorkers,i):console.warn("[Lightning] Imageworker is 0 or not supported on this browser. Image loading will be slower."),this.initialized=!0,this.emit("initialized")}enqueueDownloadTextureSource(i){this.downloadTextureSourceQueue.includes(i)||this.downloadTextureSourceQueue.push(i)}enqueueUploadTexture(i){this.uploadTextureQueue.includes(i)===!1&&this.uploadTextureQueue.push(i)}createTexture(i,u){let h;const g=this.txConstructors[i];if(!g)throw new Error(`Texture type "${i}" is not registered`);const x=g.makeCacheKey(u);return x&&this.keyCache.has(x)?h=this.keyCache.get(x):(h=new g(this,u),x&&this.initTextureToCache(h,x)),h}orphanTexture(i){this.removeTextureFromQueue(i),i.type!==_n.subTexture&&this.stage.txMemManager.addToOrphanedTextures(i)}loadTexture(i,u){if(this.stage.txMemManager.removeFromOrphanedTextures(i),i.type!==_n.subTexture){if(i.ctxTexture!==void 0&&i.ctxTexture.state==="loaded"){i.setState("loaded");return}if(!(this.downloadTextureSourceQueue.includes(i)===!0||this.uploadTextureQueue.includes(i)===!0)){if(i.ctxTexture!==void 0&&i.ctxTexture.state==="loading"&&(i.textureData!==null&&this.enqueueUploadTexture(i),i.free()),this.initialized===!1){this.priorityQueue.push(i);return}if((i.type===_n.color||i.type===_n.renderToTexture)&&i.state!=="initial"){i.setState("fetched"),this.enqueueUploadTexture(i);return}i.setState("loading"),u===!0&&i.getTextureData().then(()=>{this.uploadTexture(i)}).catch(h=>{console.error(h)}),this.enqueueDownloadTextureSource(i)}}}uploadTexture(i){if(this.stage.txMemManager.doNotExceedCriticalThreshold===!0&&this.stage.txMemManager.criticalCleanupRequested===!0){this.enqueueUploadTexture(i);return}const u=i.loadCtxTexture();if(u!==null&&u.state==="loaded"){i.setState("loaded");return}u.load()}isProcessingTexture(i){return this.downloadTextureSourceQueue.includes(i)===!0||this.uploadTextureQueue.includes(i)===!0}processSome(i){if(this.initialized===!1)return;const u=ws();for(;this.priorityQueue.length>0&&ws()-u<i;){const h=this.priorityQueue.pop();h.getTextureData().then(()=>{this.uploadTexture(h)})}for(;this.uploadTextureQueue.length>0&&ws()-u<i;)this.uploadTexture(this.uploadTextureQueue.pop());for(;this.downloadTextureSourceQueue.length>0&&ws()-u<i;){const h=this.downloadTextureSourceQueue.shift();h.getTextureData().then(()=>{h.state==="fetched"&&this.enqueueUploadTexture(h)})}}hasUpdates(){return this.downloadTextureSourceQueue.length>0||this.uploadTextureQueue.length>0}initTextureToCache(i,u){const{keyCache:h,inverseKeyCache:g}=this;h.set(u,i),g.set(i,u)}getTextureFromCache(i){return this.keyCache.get(i)}removeTextureFromCache(i){const{inverseKeyCache:u,keyCache:h}=this,g=u.get(i);g&&h.delete(g)}removeTextureFromQueue(i){const u=this.downloadTextureSourceQueue.indexOf(i);u!==-1&&this.downloadTextureSourceQueue.splice(u,1);const h=this.uploadTextureQueue.indexOf(i);h!==-1&&this.uploadTextureQueue.splice(h,1)}resolveParentTexture(i){if(!(i!=null&&i.props))return i;const u=$l.makeCacheKey(i.props);return(u?this.getTextureFromCache(u):void 0)??i}}const W_={normal:400,bold:700,bolder:900,lighter:100},oC=f=>typeof f=="number"?f:W_[f]||400;function X_(f,o,i,u,h){let g=oC(i);for(const x of f){const S=x[o];if(!S)continue;if(S.size===1)return console.warn(`TrFontManager: Only one font face found for family: '${o}' - will be used for all weights and styles`),S.values().next().value;const a=new Map;for(const C of S){const y=oC(C.descriptors.weight);if(y===g&&C.descriptors.style===u&&C.descriptors.stretch===h)return C;a.set(y,C)}const m=`TrFontManager: No exact match: '${o} Weight: ${g} Style: ${u} Stretch: ${h}'`;if(console.error(m),g===400&&a.has(500))return a.get(500);if(g===500&&a.has(400))return a.get(400);if(g<400){for(;g>0;){if(a.has(g))return a.get(g);g-=100}g=600}for(;g<1e3;){if(a.has(g))return a.get(g);g+=100}for(g=500;g>0;){if(a.has(g))return a.get(g);g-=100}}}class q_{constructor(o){P(this,"textRenderers");P(this,"fontCache",new Map);this.textRenderers=o}addFontFace(o){for(const i in this.textRenderers){const u=this.textRenderers[i];u&&u.isFontFaceSupported(o)&&u.addFontFace(o)}}resolveFontFace(o,i,u){const{fontFamily:h,fontWeight:g,fontStyle:x,fontStretch:S}=i,a=`${u}_${h}_${x}_${g}_${S}`;if(this.fontCache.has(a)===!0)return this.fontCache.get(a);const m=X_(o,h,g,x,S);return m!==void 0&&this.fontCache.set(a,m),m}}class eT{static makeCacheKey(o){return!1}static resolveDefaults(o){return{}}}function rC(f,o,i){const u=f.createShader(o);if(!u){const g=f.getError();throw new Error(`Unable to create the shader: ${o===f.VERTEX_SHADER?"VERTEX_SHADER":"FRAGMENT_SHADER"}.${g?` WebGlContext Error: ${g}`:""}`)}if(f.shaderSource(u,i),f.compileShader(u),!!f.getShaderParameter(u,f.COMPILE_STATUS))return u;console.error(f.getShaderInfoLog(u)),f.deleteShader(u)}function K_(f,o,i){const u=f.createProgram();if(!u)throw new Error("Unable to create program");if(f.attachShader(u,o),f.attachShader(u,i),f.linkProgram(u),!!f.getProgramParameter(u,f.LINK_STATUS))return u;console.warn(f.getProgramInfoLog(u)),f.deleteProgram(u)}class bs extends eT{constructor(i){super();P(this,"boundBufferCollection",null);P(this,"buffersBound",!1);P(this,"program");P(this,"vao");P(this,"renderer");P(this,"glw");P(this,"attributeBuffers");P(this,"attributeLocations");P(this,"attributeNames");P(this,"uniformLocations");P(this,"uniformTypes");P(this,"supportsIndexedTextures");const u=this.renderer=i.renderer,h=this.glw=this.renderer.glw;this.supportsIndexedTextures=i.supportsIndexedTextures||!1;const g=h.isWebGl2(),x=g&&i.webgl2Extensions||!g&&i.webgl1Extensions||[],S=g?"2.0":"1.0";x.forEach(_=>{if(!h.getExtension(_))throw new Error(`Shader "${this.constructor.name}" requires extension "${_}" for WebGL ${S} but wasn't found`)});const a=i.shaderSources||this.constructor.shaderSources;if(a)g&&(a!=null&&a.webGl2)&&(a.fragment=a.webGl2.fragment,a.vertex=a.webGl2.vertex,delete a.webGl2);else throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);const m=u.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,C=a.vertex instanceof Function?a.vertex(m):a.vertex,y=a.fragment instanceof Function?a.fragment(m):a.fragment,v=rC(h,h.VERTEX_SHADER,C),M=rC(h,h.FRAGMENT_SHADER,y);if(!v||!M)throw new Error(`Unable to create the following shader(s): ${[!v&&"VERTEX_SHADER",!M&&"FRAGMENT_SHADER"].filter(Boolean).join(" and ")}`);const b=K_(h,v,M);if(!b)throw new Error("Unable to create program");this.program=b,this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...i.attributes].forEach(_=>{const O=h.getAttribLocation(this.program,_);if(O<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${_}"!`);const B=h.createBuffer();if(!B)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${_}"`);this.attributeLocations[_]=O,this.attributeBuffers[_]=B,this.attributeNames.push(_)}),this.uniformLocations={},this.uniformTypes={},i.uniforms.forEach(_=>{const O=h.getUniformLocation(this.program,_.name);if(this.uniformTypes[_.name]=_.uniform,!O){console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${_.name}"`);return}this.uniformLocations[_.name]=O})}bindBufferAttribute(i,u,h){const{glw:g}=this;g.enableVertexAttribArray(i),g.vertexAttribPointer(u,i,h.size,h.type,h.normalized,h.stride,h.offset)}disableAttribute(i){this.glw.disableVertexAttribArray(i)}disableAttributes(){for(const i in this.attributeLocations)this.disableAttribute(this.attributeLocations[i]);this.boundBufferCollection=null}canBatchShaderProps(i,u){return!1}bindRenderOp(i,u){this.bindBufferCollection(i.buffers),i.textures.length>0&&this.bindTextures(i.textures);const{glw:h,parentHasRenderTexture:g,renderToTexture:x}=i;if(!(x&&g)){if(g){const{width:S,height:a}=i.framebufferDimensions||{};h.uniform1f(this.getUniformLocation("u_pixelRatio"),1),h.uniform2f(this.getUniformLocation("u_resolution"),S??0,a??0)}else h.uniform1f(this.getUniformLocation("u_pixelRatio"),i.options.pixelRatio),h.uniform2f(this.getUniformLocation("u_resolution"),h.canvas.width,h.canvas.height);if(u){if(qh(u,"$dimensions")){let S=u.$dimensions;S||(S=i.dimensions),h.uniform2f(this.getUniformLocation("u_dimensions"),S.width,S.height)}if(qh(u,"$alpha")){let S=u.$alpha;S||(S=i.alpha),h.uniform1f(this.getUniformLocation("u_alpha"),S)}this.bindProps(u)}}}getUniformLocation(i){return this.uniformLocations[i]||null}bindBufferCollection(i){if(this.boundBufferCollection!==i){for(const u in this.attributeLocations){const h=i.getBuffer(u),g=i.getAttributeInfo(u);ut(h,`Buffer for "${u}" not found`),ut(g),this.bindBufferAttribute(this.attributeLocations[u],h,g)}this.boundBufferCollection=i}}bindProps(i){}bindTextures(i){}attach(){this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}P(bs,"shaderSources");class tT extends bs{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(o){const{glw:i}=this;i.activeTexture(0),i.bindTexture(o[0].ctxTexture)}}P(tT,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;


      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio;
        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);

        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);
        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
          vec4 color = texture2D(u_texture, v_textureCoordinate);
          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);
      }
    `});class nT extends bs{constructor(i){super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});P(this,"supportsIndexedTextures",!0)}bindTextures(i){const{renderer:u,glw:h}=this;if(i.length>u.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${u.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);i.forEach((x,S)=>{h.activeTexture(S),h.bindTexture(x.ctxTexture)});const g=Array.from(Array(i.length).keys());this.glw.uniform1iv(this.getUniformLocation("u_textures[0]"),g)}}P(nT,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_textureCoordinate;
      attribute vec2 a_position;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      void main(){
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;
        v_textureIndex = a_textureIndex;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:i=>`
      #define txUnits ${i}
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform sampler2D u_image;
      uniform sampler2D u_textures[txUnits];

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;
      varying float v_textureIndex;

      vec4 sampleFromTexture(sampler2D textures[${i}], int idx, vec2 uv) {
        ${Array.from(Array(i).keys()).map(u=>`
          ${u!==0?"else ":""}if (idx == ${u}) {
            return texture2D(textures[${u}], uv);
          }
        `).join("")}
        return texture2D(textures[0], uv);
      }

      void main(){
        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);
      }
    `});class pi{constructor(o){P(this,"priority",1);P(this,"name","");P(this,"ref");P(this,"target");P(this,"passParameters","");P(this,"declaredUniforms","");P(this,"uniformInfo",{});const{ref:i,target:u,props:h={}}=o;this.ref=i,this.target=u;const g={},x=[];let S="";const a=this.constructor.uniforms||{};for(const m in a){const C=a[m],y=C.type,v=`${i}_${m}`;let M="";C.size&&(M=`[${C.size(h)}]`),x.push(v),S+=`uniform ${y} ${v}${M};`,g[m]={name:v,uniform:a[m].method}}this.passParameters=x.join(","),this.declaredUniforms=S,this.uniformInfo=g}static getEffectKey(o){return""}static getMethodParameters(o,i){const u=[];for(const h in o){const g=o[h];let x="";g.size&&(x=`[${g.size(i)}]`),u.push(`${g.type} ${h}${x}`)}return u.join(",")}static resolveDefaults(o){return{}}static makeEffectKey(o){return!1}}P(pi,"uniforms",{}),P(pi,"methods"),P(pi,"onShaderMask"),P(pi,"onColorize"),P(pi,"onEffectMask");const Lm=new Map,Y_=(f,o)=>{const i=JSON.stringify(f);if(Lm.has(i))return Lm.get(i);f=f??[];const u=[],h=f.length;let g=0;for(;g<h;g++){const{name:x,type:S,props:a}=f[g],m={name:x,type:S,props:{}},C=o[S],y=C.resolveDefaults(a),v=C.uniforms,M=Object.keys(v),b=M.length;let _=0;for(;_<b;_++){const O=M[_],B=v[O],G={value:y[O],programValue:void 0,method:B.method,updateOnBind:B.updateOnBind||!1,hasValidator:B.validator!==void 0,hasProgramValueUpdater:B.updateProgramValue!==void 0},$=G.hasValidator&&B.validator(y[O],y)||y[O];y[O]!==$&&(G.validatedValue=$),G.hasProgramValueUpdater&&B.updateProgramValue(G),G.programValue===void 0&&(G.programValue=G.value),m.props[O]=G}u.push(m)}return Lm.set(i,u),u},xr=class xr extends bs{constructor(i,u,h){const g=xr.createShader(u,h);super({renderer:i,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...g.uniforms],shaderSources:{vertex:g.vertex,fragment:g.fragment}});P(this,"effects",[]);this.effects=g.effects}bindTextures(i){const{glw:u}=this;u.activeTexture(0),u.bindTexture(i[0].ctxTexture)}bindUniformMethods(i){const u=this.glw,h=i.effects,g=h.length;for(let x=0;x<g;x++){const S=this.effects[x].uniformInfo,a=h[x],m=Object.keys(a.props),C=m.length;for(let y=0;y<C;y++){const v=m[y],M=a.props[v].method,b=this.getUniformLocation(S[v].name);if(M==="uniform2fv"||M==="uniform2iv"||M==="uniform3iv"||M==="uniform4fv"||M==="uniform4iv"||M==="uniformMatrix2fv"||M==="uniformMatrix3fv"||M==="uniformMatrix4fv"||M==="uniform1f"||M==="uniform1fv"||M==="uniform1i"||M==="uniform1iv"){a.props[v].setUniformValue=function(){u[M](b,this.programValue)};continue}if(M==="uniform2f"||M==="uniform2i"){a.props[v].setUniformValue=function(){u[M](b,this.programValue[0],this.programValue[1])};continue}if(M==="uniform3f"||M==="uniform3i"){a.props[v].setUniformValue=function(){u[M](b,this.programValue[0],this.programValue[1],this.programValue[2])};continue}if(M==="uniform4f"||M==="uniform4i"){a.props[v].setUniformValue=function(){u[M](b,this.programValue[0],this.programValue[1],this.programValue[2],this.programValue[3])};continue}}}}bindProps(i){var x;const u=i.effects,h=u.length;let g=0;for(;g<h;g++){const S=u[g],a=Object.keys(S.props),m=a.length;let C=0;for(;C<m;C++){const y=a[C],v=S.props[y];if(v.updateOnBind===!0){const M=(x=this.renderer.shManager.getRegisteredEffects()[S.type])==null?void 0:x.uniforms[y];M==null||M.updateProgramValue(S.props[y],i)}v.setUniformValue()}}}canBatchShaderProps(i,u){if(i.$alpha!==u.$alpha||i.$dimensions.width!==u.$dimensions.width||i.$dimensions.height!==u.$dimensions.height||i.effects.length!==u.effects.length)return!1;const h=i.effects.length;let g=0;for(;g<h;g++){const x=i.effects[g],S=u.effects[g];if(x.type!==S.type)return!1;for(const a in x.props)if(S.props&&!S.props[a]||x.props[a].value!==S.props[a].value)return!1}return!0}static createShader(i,u){const h={},g={};let x="";const S=[],a=[],m=i.effects.map(b=>{const _=u[b.type],O=_.getEffectKey(b.props||{});h[O]=h[O]?++h[O]:1;const B=h[O];B===1&&a.push({key:O,type:b.type,props:b.props});const G=new _({ref:`${O}${B===1?"":B}`,target:O,props:b.props});return x+=G.declaredUniforms,S.push(...Object.values(G.uniformInfo)),G});let C="";a==null||a.forEach(b=>{const _=u[b.type],O=_.resolveDefaults(b.props??{}),B=[];for(const K in _.methods){let ee=K;const de=_.methods[K];g[K]&&g[K]!==de&&(ee=xr.resolveMethodDuplicate(K,de,g)),g[ee]=de.replace("function",ee),B.push({m:K,cm:ee})}let G=_.onShaderMask instanceof Function?_.onShaderMask(O):_.onShaderMask,$=_.onColorize instanceof Function?_.onColorize(O):_.onColorize,j=_.onEffectMask instanceof Function?_.onEffectMask(O):_.onEffectMask;B.forEach(K=>{const{m:ee,cm:de}=K,k=new RegExp(`\\$${ee}`,"g");G&&(G=G.replace(k,de)),$&&($=$.replace(k,de)),j&&(j=j.replace(k,de))});const ne=_.getMethodParameters(_.uniforms,O),X=ne.length>0?`, ${ne}`:"";G&&(C+=`
        float fx_${b.key}_onShaderMask(float shaderMask ${X}) {
          ${G}
        }
        `),$&&(C+=`
          vec4 fx_${b.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${X}) {
            ${$}
          }
        `),j&&(C+=`
          vec4 fx_${b.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${X}) {
            ${j}
          }
        `)});let y="";for(const b in g)y+=g[b];let v="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",M=`

    `;for(let b=0;b<m.length;b++){const _=m[b],O=_.passParameters.length>0?`, ${_.passParameters}`:"",B=u[_.name];B.onShaderMask&&(M+=`
        shaderMask = fx_${_.target}_onShaderMask(shaderMask ${O});
        `),B.onColorize&&(M+=`
        maskColor = fx_${_.target}_onColorize(shaderMask, maskColor, shaderColor${O});
        `),B.onEffectMask&&(v=`fx_${_.target}_onEffectMask(shaderMask, maskColor, shaderColor${O})`);const G=m[b+1];(G===void 0||u[G.name].onEffectMask)&&(M+=`
          shaderColor = ${v};
        `)}return{effects:m,uniforms:S,fragment:xr.fragment(x,y,C,M),vertex:xr.vertex()}}static resolveMethodDuplicate(i,u,h,g=0){const x=i+(g>0?g:"");return h[x]&&h[x]!==u?this.resolveMethodDuplicate(i,u,h,++g):x}static resolveDefaults(i,u){return ut(u),{effects:Y_(i.effects??[],u),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(i,u){var g;let h="";return(g=i.effects)==null||g.forEach(x=>{const a=u[x.type].getEffectKey(x.props||{});h+=`,${a}`}),`DynamicShader${h}`}};P(xr,"z$__type__Props"),P(xr,"vertex",()=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    attribute vec2 a_textureCoordinate;
    attribute vec2 a_position;
    attribute vec4 a_color;
    attribute float a_textureIndex;

    uniform vec2 u_resolution;
    uniform float u_pixelRatio;

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;
    varying float v_textureIndex;

    void main(){
      vec2 normalized = a_position * u_pixelRatio / u_resolution;
      vec2 zero_two = normalized * 2.0;
      vec2 clip_space = zero_two - 1.0;

      // pass to fragment
      v_color = a_color;
      v_textureCoordinate = a_textureCoordinate;
      v_textureIndex = a_textureIndex;

      // flip y
      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
    }
  `),P(xr,"fragment",(i,u,h,g)=>`
    # ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    # else
    precision mediump float;
    # endif

    #define PI 3.14159265359

    uniform vec2 u_resolution;
    uniform vec2 u_dimensions;
    uniform float u_alpha;
    uniform float u_radius;
    uniform sampler2D u_texture;
    uniform float u_pixelRatio;

    ${i}

    varying vec4 v_color;
    varying vec2 v_textureCoordinate;

    ${u}

    ${h}

    void main() {
      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;
      vec2 d = abs(p) - (u_dimensions) * 0.5;
      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));

      vec4 shaderColor = vec4(0.0);
      float shaderMask = lng_DefaultMask;

      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;

      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));

      ${g}

      gl_FragColor = shaderColor * u_alpha;
    }
  `);let Xa=xr;class Jm extends bs{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(o){return{radius:o.radius||10,$dimensions:{width:0,height:0}}}bindTextures(o){const{glw:i}=this;i.activeTexture(0),i.bindTexture(o[0].ctxTexture)}bindProps(o){const i=Math.min(o.$dimensions.width,o.$dimensions.height)/(2*o.radius);this.glw.uniform1f(this.getUniformLocation("u_radius"),o.radius*Math.min(i,1))}canBatchShaderProps(o,i){return o.radius===i.radius&&o.$dimensions.width===i.$dimensions.width&&o.$dimensions.height===i.$dimensions.height}}P(Jm,"z$__type__Props"),P(Jm,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;
      attribute vec4 a_color;
      attribute float a_textureIndex;
      attribute float a_depth;

      uniform vec2 u_resolution;
      uniform float u_pixelRatio;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      void main() {
        vec2 normalized = a_position * u_pixelRatio / u_resolution;
        vec2 zero_two = normalized * 2.0;
        vec2 clip_space = zero_two - 1.0;

        // pass to fragment
        v_color = a_color;
        v_textureCoordinate = a_textureCoordinate;

        // flip y
        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);
      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif

      uniform vec2 u_resolution;
      uniform vec2 u_dimensions;
      uniform float u_radius;
      uniform sampler2D u_texture;

      varying vec4 v_color;
      varying vec2 v_textureCoordinate;

      float boxDist(vec2 p, vec2 size, float radius){
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }

      float fillMask(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }

      void main() {
        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;
        vec2 halfDimensions = u_dimensions * 0.5;

        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);
        gl_FragColor = mix(vec4(0.0), color, fillMask(d));
      }
    `});const Q_=new Float32Array([1,0,0,0,1,0,0,0,1]),jl=class jl extends bs{constructor(o){super({renderer:o,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(o){const{glw:i}=this;i.activeTexture(0),i.bindTexture(o[0].ctxTexture)}bindProps(o){const i=jl.resolveDefaults(o);for(const u in i)if(u==="transform")this.glw.uniformMatrix3fv(this.getUniformLocation("u_transform"),i[u]);else if(u==="scrollY")this.glw.uniform1f(this.getUniformLocation("u_scrollY"),i[u]);else if(u==="color"){const h=Gl(i.color);this.glw.uniform4fv(this.getUniformLocation("u_color"),h)}else u==="size"?this.glw.uniform1f(this.getUniformLocation("u_size"),i[u]):u==="distanceRange"?this.glw.uniform1f(this.getUniformLocation("u_distanceRange"),i[u]):u==="debug"&&this.glw.uniform1i(this.getUniformLocation("u_debug"),i[u]?1:0)}static resolveDefaults(o={}){return{transform:o.transform??Q_,scrollY:o.scrollY??0,color:o.color??4294967295,size:o.size??16,distanceRange:o.distanceRange??1,debug:o.debug??!1}}};P(jl,"z$__type__Props"),P(jl,"shaderSources",{vertex:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      // an attribute is an input (in) to a vertex shader.
      // It will receive data from a buffer
      attribute vec2 a_position;
      attribute vec2 a_textureCoordinate;

      uniform vec2 u_resolution;
      uniform mat3 u_transform;
      uniform float u_scrollY;
      uniform float u_pixelRatio;
      uniform float u_size;

      varying vec2 v_texcoord;

      void main() {
        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);
        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;

        // Calculate screen space with pixel ratio
        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);

        gl_Position = vec4(screenSpace, 0.0, 1.0);
        v_texcoord = a_textureCoordinate;

      }
    `,fragment:`
      # ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      # else
      precision mediump float;
      # endif
      uniform vec4 u_color;
      uniform sampler2D u_texture;
      uniform float u_distanceRange;
      uniform float u_pixelRatio;
      uniform int u_debug;

      varying vec2 v_texcoord;

      float median(float r, float g, float b) {
          return max(min(r, g), min(max(r, g), b));
      }

      void main() {
          vec3 sample = texture2D(u_texture, v_texcoord).rgb;
          if (u_debug == 1) {
            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);
            return;
          }
          float scaledDistRange = u_distanceRange * u_pixelRatio;
          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);
          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;

          // Build the final color.
          // IMPORTANT: We must premultiply the color by the alpha value before returning it.
          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);
      }
    `});let eg=jl;const iu=f=>{f.programValue===void 0&&(f.programValue=new Float32Array(4));const o=f.value,i=f.programValue;i[0]=(o>>>24)/255,i[1]=(o>>>16&255)/255,i[2]=(o>>>8&255)/255,i[3]=(o&255)/255},Z_=f=>{const o=f.validatedValue||f.value;if(f.programValue instanceof Float32Array){const i=f.programValue;i[0]=o[0],i[1]=o[1]}else f.programValue=new Float32Array(o)},J_=f=>{const o=f.validatedValue||f.value;if(f.programValue instanceof Float32Array){const i=f.programValue;i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3]}else f.programValue=new Float32Array(o)},iT=f=>{const o=f.validatedValue||f.value;if(f.programValue instanceof Float32Array){const i=o.length,u=f.programValue;for(let h=0;h<i;h++)u[h]=o[h]}else f.programValue=new Float32Array(o)},mg=f=>{const o=Array.isArray(f);if(o){if(o&&f.length===4)return f;if(o&&f.length===2)return[f[0],f[1],f[0],f[1]];if(o&&f.length===3)return[f[0],f[1],f[2],f[0]]}else return[f,f,f,f];return[f[0],f[0],f[0],f[0]]},oT=(f,o)=>{f.programValue===void 0&&(f.programValue=new Float32Array(4));const i=f.programValue,u=f.validatedValue||f.value;if(o===void 0&&f.$dimensions===void 0){i[0]=u[0],i[1]=u[1],i[2]=u[2],i[3]=u[3];return}let h=f.$dimensions;if(o!==void 0){const{$dimensions:v}=o;if(h!==void 0&&(h.width===v.width||h.height===v.height))return;h===void 0&&(h={width:v==null?void 0:v.width,height:v==null?void 0:v.height},f.$dimensions=h)}const{width:g,height:x}=h,[S,a,m,C]=u,y=Math.min(Math.min(Math.min(g/Math.max(g,S+a),g/Math.max(g,m+C)),Math.min(x/Math.max(x,S+m),x/Math.max(x,a+C))),1);i[0]=S*y,i[1]=a*y,i[2]=m*y,i[3]=C*y};class Oa extends pi{constructor(){super(...arguments);P(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(i){return{radius:i.radius??10}}}P(Oa,"z$__type__Props"),P(Oa,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:mg,updateProgramValue:oT}}),P(Oa,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),P(Oa,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);
  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);
  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);
  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);
  `),P(Oa,"onEffectMask",`
  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));
  `);class Ml extends pi{constructor(){super(...arguments);P(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(Ml,"z$__type__Props"),P(Ml,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:iu,method:"uniform4fv",type:"vec4"}}),P(Ml,"onEffectMask",`
  float intR = shaderMask + 1.0;
  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);
  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);
  `),P(Ml,"onColorize",`
    return color;
  `);const Vr=class Vr extends pi{constructor(){super(...arguments);P(this,"name","linearGradient")}static getEffectKey(i){return i.colors.value?`linearGradient${i.colors.value.length}`:`linearGradient${i.colors.length}`}static resolveDefaults(i){const u=i.colors??[4278190080,4294967295];let h=i.stops||[];if(h.length===0||h.length!==u.length){const g=u.length;let x=0;const S=h;for(;x<g;x++)h[x]?(S[x]=h[x],h[x-1]===void 0&&S[x-2]!==void 0&&(S[x-1]=S[x-2]+(h[x]-S[x-2])/2)):S[x]=x*(1/(u.length-1));h=S}return{colors:u,stops:h,angle:i.angle??0}}};P(Vr,"z$__type__Props"),P(Vr,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:i=>i.reduce((u,h)=>u.concat(Gl(h)),[]),updateProgramValue:iT,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),P(Vr,"methods",{fromLinear:`
      vec4 function(vec4 linearRGB) {
        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);
        vec4 lower = linearRGB * vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,toLinear:`
      vec4 function(vec4 sRGB) {
        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));
        vec4 lower = sRGB/vec4(12.92);
        return mix(higher, lower, 1.0);
      }
    `,calcPoint:`
      vec2 function(float d, float angle) {
        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);
      }
    `}),P(Vr,"ColorLoop",i=>{let u="";for(let h=2;h<i;h++)u+=`colorOut = mix(colorOut, colors[${h}], clamp((dist - stops[${h-1}]) / (stops[${h}] - stops[${h-1}]), 0.0, 1.0));`;return u}),P(Vr,"onColorize",i=>{const u=i.colors.length||1;return`
      float a = angle - (PI / 180.0 * 90.0);
      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));
      vec2 f = $calcPoint(lineDist * 0.5, a);
      vec2 t = $calcPoint(lineDist * 0.5, a + PI);
      vec2 gradVec = t - f;
      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));
      ${Vr.ColorLoop(u)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let tg=Vr;class ng extends pi{constructor(){super(...arguments);P(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(i){return{amount:i.amount??1}}}P(ng,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),P(ng,"onColorize",`
    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;
    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);
  `);class Na extends pi{constructor(){super(...arguments);P(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(Na,"z$__type__Props"),P(Na,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:iu,method:"uniform4fv",type:"vec4"}}),P(Na,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(Na,"onEffectMask",`
  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(Na,"onColorize",`
    return color;
  `);class Ua extends pi{constructor(){super(...arguments);P(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(Ua,"z$__type__Props"),P(Ua,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:iu,method:"uniform4fv",type:"vec4"}}),P(Ua,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(Ua,"onEffectMask",`
  vec2 pos = vec2(0.0, width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(Ua,"onColorize",`
    return color;
  `);class Ba extends pi{constructor(){super(...arguments);P(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(Ba,"z$__type__Props"),P(Ba,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:iu,method:"uniform4fv",type:"vec4"}}),P(Ba,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(Ba,"onEffectMask",`
  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(Ba,"onColorize",`
    return color;
  `);class ja extends pi{constructor(){super(...arguments);P(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(i){return{width:i.width??10,color:i.color??4294967295}}}P(ja,"z$__type__Props"),P(ja,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:iu,method:"uniform4fv",type:"vec4"}}),P(ja,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,rectDist:`
      float function(vec2 p, vec2 size) {
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));
      }
    `}),P(ja,"onEffectMask",`
  vec2 pos = vec2(width * 0.5, 0.0);
  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));
  return mix(shaderColor, maskColor, $fillMask(mask));
  `),P(ja,"onColorize",`
    return color;
  `);class _l extends pi{constructor(){super(...arguments);P(this,"name","glitch")}static getEffectKey(i){return"glitch"}static resolveDefaults(i){return{amplitude:i.amplitude??.2,narrowness:i.narrowness??4,blockiness:i.blockiness??2,minimizer:i.minimizer??8,time:i.time??Date.now()}}}P(_l,"z$__type__Props"),P(_l,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:i=>{const u=i.value=(Date.now()-i.value)%1e3;i.programValue=u},type:"float"}}),P(_l,"methods",{rand:`
      float function(vec2 p, float time) {
        float t = floor(time * 20.) / 10.;
        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);
      }
    `,noise:`
      float function(vec2 uv, float blockiness, float time) {
        vec2 lv = fract(uv);
        vec2 id = floor(uv);

        float n1 = rand(id, time);
        float n2 = rand(id+vec2(1,0), time);
        float n3 = rand(id+vec2(0,1), time);
        float n4 = rand(id+vec2(1,1), time);
        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);
        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);
      }
    `,fbm:`
      float function(vec2 uv, int count, float blockiness, float complexity, float time) {
        float val = 0.0;
        float amp = 0.5;
        const int MAX_ITERATIONS = 10;

        for(int i = 0; i < MAX_ITERATIONS; i++) {
          if(i >= count) {break;}
          val += amp * noise(uv, blockiness, time);
          amp *= 0.5;
          uv *= complexity;
        }
        return val;
      }
    `}),P(_l,"onColorize",`
    vec2 uv = v_textureCoordinate.xy;
    float aspect = u_dimensions.x / u_dimensions.y;
    vec2 a = vec2(uv.x * aspect , uv.y);
    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));

    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);
    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);
    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);
    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);

    vec3 f = vec3(colR, colG, colB);
    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);
  `);class jh extends pi{constructor(){super(...arguments);P(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(i){return{fade:i.fade??10}}}P(jh,"z$__type__Props"),P(jh,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:mg,updateProgramValue:J_}}),P(jh,"onColorize",`
  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;
  vec2 pos1;
  vec2 pos2;
  vec2 d;
  float c;
  vec4 result = maskColor;


  if(fade[0] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x, point.y + fade[0]);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[1] > 0.0) {
    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);
    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[2] > 0.0) {
    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);
    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);
    d = pos1 - pos2;
    c = dot(pos2, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  if(fade[3] > 0.0) {
    pos1 = vec2(point.x, point.y);
    pos2 = vec2(point.x + fade[3], point.y);
    d = pos2 - pos1;
    c = dot(pos1, d) / dot(d, d);
    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));
  }

  return result;
  `);const xs=class xs extends pi{constructor(){super(...arguments);P(this,"name","radialGradient")}static getEffectKey(i){return i.colors.value?`radialGradient${i.colors.value.length}`:`radialGradient${i.colors.length}`}static resolveDefaults(i){const u=i.colors??[4278190080,4294967295];let h=i.stops||[];if(h.length===0||h.length!==u.length){const g=u.length;let x=0;const S=h;for(;x<g;x++)h[x]?(S[x]=h[x],h[x-1]===void 0&&S[x-2]!==void 0&&(S[x-1]=S[x-2]+(h[x]-S[x-2])/2)):S[x]=x*(1/(u.length-1));h=S}return{colors:u,stops:h,width:i.width??0,height:i.height??i.width??0,pivot:i.pivot??[.5,.5]}}};P(xs,"z$__type__Props"),P(xs,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:Z_,method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:i=>i.reduce((u,h)=>u.concat(Gl(h)),[]),updateProgramValue:iT,size:i=>i.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:i=>i.colors.length,method:"uniform1fv",type:"float"}}),P(xs,"ColorLoop",i=>{let u="";for(let h=2;h<i;h++)u+=`colorOut = mix(colorOut, colors[${h}], clamp((dist - stops[${h-1}]) / (stops[${h}] - stops[${h-1}]), 0.0, 1.0));`;return u}),P(xs,"onColorize",i=>{const u=i.colors.length||1;return`
      vec2 point = v_textureCoordinate.xy * u_dimensions;
      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);

      float dist = length((point - projection) / vec2(width, height));

      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);
      vec4 colorOut = mix(colors[0], colors[1], stopCalc);
      ${xs.ColorLoop(u)}
      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));
    `});let ig=xs;class Fa extends pi{constructor(){super(...arguments);P(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(i){return{width:i.width??10,progress:i.progress??.5,offset:i.offset??0,range:i.range??Math.PI*2,rounded:i.rounded??!1,radius:i.radius??1,color:i.color??4294967295}}}P(Fa,"z$__type__Props"),P(Fa,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:i=>i?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:iu,method:"uniform4fv",type:"vec4"}}),P(Fa,"methods",{rotateUV:`
    vec2 function(vec2 uv, float d) {
      float s = sin(d);
      float c = cos(d);
      mat2 rotMatrix = mat2(c, -s, s, c);
      return uv * rotMatrix;
    }
    `,drawDot:`
    float function(vec2 uv, vec2 p, float r) {
      uv += p;
      float circle = length(uv) - r;
      return clamp(-circle, 0.0, 1.0);
    }
    `}),P(Fa,"onEffectMask",`
    float outerRadius = radius * u_dimensions.y * 0.5;

    float endAngle = range * progress - 0.0005;

    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;

    uv = $rotateUV(uv, -(offset));
    float linewidth = width * u_pixelRatio;
    float circle = length(uv) - (outerRadius - linewidth) ;
    circle = abs(circle) - linewidth;
    circle = clamp(-circle, 0.0, 1.0);

    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);
    float p = endAngle / (PI * 2.);

    circle *= step(fract(angle), fract(p));

    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));
    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));

    return mix(shaderColor, maskColor, circle);
  `),P(Fa,"onColorize",`
    return color;
  `);class $a extends pi{constructor(){super(...arguments);P(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(i){return{x:i.x||0,y:i.y||0,width:i.width||50,height:i.height||50,radius:i.radius??0}}}P($a,"z$__type__Props"),P($a,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:mg,updateProgramValue:oT}}),P($a,"methods",{fillMask:`
      float function(float dist) {
        return clamp(-dist, 0.0, 1.0);
      }
    `,boxDist:`
      float function(vec2 p, vec2 size, float radius) {
        size -= vec2(radius);
        vec2 d = abs(p) - size;
        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;
      }
    `}),P($a,"onShaderMask",`
  vec2 halfDimensions = u_dimensions * 0.5;
  vec2 size = vec2(width, height) * 0.5;
  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);
  vec2 pos = basePos - size;
  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);
  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);
  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);
  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);
  return $boxDist(pos, size, r);
  `),P($a,"onEffectMask",`
  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));
  `);const eR="RoundedRectangle";class ud extends eT{constructor(i){super();P(this,"shType");this.shType=i}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class tR{constructor(o,i,u,h){P(this,"type");P(this,"shader");P(this,"resolvedProps");P(this,"props");this.type=o,this.shader=i,this.resolvedProps=u;const g=Object.keys(u),x=g.length,S={};for(let a=0;a<x;a++){const m=g[a];Object.defineProperty(S,m,{get:()=>this.resolvedProps[m],set:C=>{this.resolvedProps[m]=C,h.requestRender()}})}this.props=S}getResolvedProps(){return this.resolvedProps}}class nR{constructor(o,i,u){P(this,"shader");P(this,"resolvedProps");P(this,"props");P(this,"type");this.shader=o,this.type="DynamicShader",this.resolvedProps=i;const h=u.getRegisteredEffects(),g={},x=i.effects,S=x.length;for(let a=0;a<S;a++){const{name:m,props:C,type:y}=x[a];if(m===void 0)continue;const v={},M=Object.keys(C),b=M.length;for(let _=0;_<b;_++){const O=M[_];Object.defineProperty(v,O,{get:()=>this.resolvedProps.effects[a].props[O].value,set:B=>{var $,j;const G=this.resolvedProps.effects[a].props[O];G.value=B,G.hasValidator&&(B=G.validatedValue=($=h[y].uniforms[O])==null?void 0:$.validator(B,C)),G.hasProgramValueUpdater?(j=h[y].uniforms[O])==null||j.updateProgramValue(G):G.programValue=B,u.renderer.stage.requestRender()}})}Object.defineProperty(g,m,{get:()=>v})}this.props=g}getResolvedProps(){return this.resolvedProps}}class iR{constructor(){P(this,"shCache",new Map);P(this,"shConstructors",{});P(this,"attachedShader",null);P(this,"effectConstructors",{});P(this,"renderer");this.registerShaderType("DefaultShader",tT),this.registerShaderType("DefaultShaderBatched",nT),this.registerShaderType("RoundedRectangle",Jm),this.registerShaderType("DynamicShader",Xa),this.registerShaderType("SdfShader",eg),this.registerEffectType("border",Ml),this.registerEffectType("borderBottom",Ba),this.registerEffectType("borderLeft",ja),this.registerEffectType("borderRight",Na),this.registerEffectType("borderTop",Ua),this.registerEffectType("fadeOut",jh),this.registerEffectType("linearGradient",tg),this.registerEffectType("radialGradient",ig),this.registerEffectType("grayscale",ng),this.registerEffectType("glitch",_l),this.registerEffectType("radius",Oa),this.registerEffectType("radialProgress",Fa),this.registerEffectType("holePunch",$a)}registerShaderType(o,i){this.shConstructors[o]=i}registerEffectType(o,i){this.effectConstructors[o]=i}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(o,i){if(!this.renderer)throw new Error("Renderer is not been defined");const u=this.shConstructors[o];if(!u)throw new Error(`Shader type "${o}" is not registered`);if(this.renderer.mode==="canvas"&&u.prototype instanceof bs)return this._createShaderCtr(o,new ud(o),i);if(o==="DynamicShader")return this.loadDynamicShader(i);const h=u.resolveDefaults(i),g=u.makeCacheKey(h)||u.name;if(g&&this.shCache.has(g))return this._createShaderCtr(o,this.shCache.get(g),h);const x=new u(this.renderer,i);return g&&this.shCache.set(g,x),this._createShaderCtr(o,x,h)}loadDynamicShader(o){if(!this.renderer)throw new Error("Renderer is not been defined");const i=Xa.resolveDefaults(o,this.effectConstructors),u=Xa.makeCacheKey(i,this.effectConstructors);if(u&&this.shCache.has(u))return this._createDynShaderCtr(this.shCache.get(u),i);const h=new Xa(this.renderer,o,this.effectConstructors);return u&&this.shCache.set(u,h),this._createDynShaderCtr(h,i)}_createShaderCtr(o,i,u){return new tR(o,i,u,this.renderer.stage)}_createDynShaderCtr(o,i){return o.bindUniformMethods(i),new nR(o,i,this)}useShader(o){this.attachedShader!==o&&(this.attachedShader&&this.attachedShader.detach(),o.attach(),this.attachedShader=o)}}const oR={x:(f,o)=>{f.props.x=o},y:(f,o)=>{f.props.y=o},width:(f,o)=>{f.props.width=o},height:(f,o)=>{f.props.height=o},color:(f,o)=>{f.props.color=o},zIndex:(f,o)=>{f.props.zIndex=o},fontFamily:(f,o)=>{f.props.fontFamily=o},fontWeight:(f,o)=>{f.props.fontWeight=o},fontStyle:(f,o)=>{f.props.fontStyle=o},fontStretch:(f,o)=>{f.props.fontStretch=o},fontSize:(f,o)=>{f.props.fontSize=o},text:(f,o)=>{f.props.text=o},textAlign:(f,o)=>{f.props.textAlign=o},contain:(f,o)=>{f.props.contain=o},offsetY:(f,o)=>{f.props.offsetY=o},scrollable:(f,o)=>{f.props.scrollable=o},scrollY:(f,o)=>{f.props.scrollY=o},letterSpacing:(f,o)=>{f.props.letterSpacing=o},lineHeight:(f,o)=>{f.props.lineHeight=o},maxLines:(f,o)=>{f.props.maxLines=o},textBaseline:(f,o)=>{f.props.textBaseline=o},verticalAlign:(f,o)=>{f.props.verticalAlign=o},overflowSuffix:(f,o)=>{f.props.overflowSuffix=o},debug:(f,o)=>{f.props.debug=o}};class gg{constructor(o){P(this,"stage");P(this,"set");this.stage=o;const i={...oR,...this.getPropertySetters()},u={};Object.keys(i).forEach(h=>{Object.defineProperty(u,h,{value:(g,x)=>{g.props[h]!==x&&(i[h](g,x),this.stage.requestRender())},writable:!1,configurable:!1})}),this.set=u}setStatus(o,i,u){o.status!==i&&(o.status=i,o.emitter.emit(i,u))}setIsRenderable(o,i){o.isRenderable=i}destroyState(o){this.setStatus(o,"destroyed"),o.emitter.removeAllListeners()}scheduleUpdateState(o){o.updateScheduled||(o.updateScheduled=!0,queueMicrotask(()=>{o.status!=="destroyed"&&(o.updateScheduled=!1,this.updateState(o))}))}}class rR{constructor(){P(this,"data",{})}reset(){this.data={}}increment(o){this.data[o]||(this.data[o]=0),this.data[o]++}getData(){return{...this.data}}}class sR{constructor(o,i){P(this,"stage");P(this,"memUsed",0);P(this,"loadedTextures",new Map);P(this,"orphanedTextures",[]);P(this,"criticalThreshold");P(this,"targetThreshold");P(this,"cleanupInterval");P(this,"debugLogging");P(this,"lastCleanupTime",0);P(this,"baselineMemoryAllocation");P(this,"criticalCleanupRequested",!1);P(this,"doNotExceedCriticalThreshold");P(this,"frameTime",0);this.stage=o;const{criticalThreshold:u,doNotExceedCriticalThreshold:h}=i;this.doNotExceedCriticalThreshold=h||!1,this.criticalThreshold=Math.round(u);const g=Math.max(0,Math.min(1,i.targetThresholdLevel));if(this.cleanupInterval=i.cleanupInterval,this.debugLogging=i.debugLogging,this.baselineMemoryAllocation=Math.round(i.baselineMemoryAllocation),this.targetThreshold=Math.max(Math.round(u*g),this.baselineMemoryAllocation),this.memUsed=Math.round(i.baselineMemoryAllocation),i.debugLogging){let x=0;setInterval(()=>{x!==this.memUsed&&(x=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${tC(this.memUsed)} mb / ${tC(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))},1e3)}u===0&&(this.setTextureMemUse=()=>{})}addToOrphanedTextures(o){this.orphanedTextures.includes(o)&&this.removeFromOrphanedTextures(o),o.preventCleanup===!1&&this.orphanedTextures.push(o)}removeFromOrphanedTextures(o){const i=this.orphanedTextures.indexOf(o);i!==-1&&this.orphanedTextures.splice(i,1)}setTextureMemUse(o,i){if(this.loadedTextures.has(o)&&(this.memUsed-=this.loadedTextures.get(o)),i===0){this.loadedTextures.delete(o);return}else this.memUsed+=i,this.loadedTextures.set(o,i);this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}checkCriticalCleanup(){return this.memUsed>this.criticalThreshold}cleanupQuick(o){const i=this.targetThreshold,u=this.stage.txManager,h=ws();for(;this.memUsed>=i&&this.orphanedTextures.length>0&&(o||ws()-h<10);){const g=this.orphanedTextures.shift();g!==void 0&&g.renderable!==!0&&(g.free(),u.removeTextureFromCache(g))}}cleanupDeep(o){const i=o?this.criticalThreshold:this.targetThreshold,u=this.stage.txManager,h=[],g=[...this.loadedTextures.keys()];for(let x=0;x<g.length;x++){const S=g[x];S!==void 0&&(S.type===_n.image||S.type===_n.noise||S.type===_n.renderToTexture)&&(S.renderable===!0?h.push(S):h.unshift(S))}for(;this.memUsed>=i&&h.length>0;){const x=h.shift();if(x!==void 0&&x.preventCleanup!==!0){if(x.renderable===!0)break;x.free(),this.removeFromOrphanedTextures(x),u.removeTextureFromCache(x),u.removeTextureFromQueue(x)}}}cleanup(o=!1){const i=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,i===!0&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging===!0&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${i}. Aggressive: ${o}`),this.cleanupQuick(i),o===!0&&this.memUsed>=this.criticalThreshold&&this.cleanupDeep(i),this.memUsed>=this.criticalThreshold?(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),(this.debugLogging===!0||tu()===!1)&&console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`)):this.criticalCleanupRequested=!1}getMemoryInfo(){let o=0;const i=[...this.loadedTextures.keys()].reduce((u,h)=>(o+=h.renderable?1:0,u+(h.renderable?this.loadedTextures.get(h):0)),this.baselineMemoryAllocation);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:i,memUsed:this.memUsed,renderableTexturesLoaded:o,loadedTextures:this.loadedTextures.size,baselineMemoryAllocation:this.baselineMemoryAllocation}}}class rT{constructor(o,i){P(this,"textureSource");P(this,"memManager");P(this,"state","freed");this.memManager=o,this.textureSource=i}setTextureMemUse(o){this.memManager.setTextureMemUse(this.textureSource,o)}get renderable(){return this.textureSource.renderable}}class sT{constructor(o){P(this,"options");P(this,"mode");P(this,"stage");P(this,"txManager");P(this,"txMemManager");P(this,"shManager");P(this,"rttNodes",[]);this.options=o,this.stage=o.stage,this.txManager=o.txManager,this.txMemManager=o.txMemManager,this.shManager=o.shManager}}class aR extends Qm{constructor(i,u,h){super(i,u);P(this,"textRenderer");P(this,"trState");P(this,"_textRendererOverride",null);P(this,"onTextLoaded",()=>{const{contain:i}=this,u=this.trState.props.width,h=this.trState.props.height,g=this.trState.textW||0,x=this.trState.textH||0;i==="both"?(this.props.width=u,this.props.height=h):i==="width"?(this.props.width=u,this.props.height=x):i==="none"&&(this.props.width=g,this.props.height=x),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});P(this,"onTextFailed",(i,u)=>{this.emit("failed",{type:"text",error:u})});this._textRendererOverride=u.textRendererOverride,this.textRenderer=h;const g=this.createState({x:this.absX,y:this.absY,width:u.width,height:u.height,textAlign:u.textAlign,color:u.color,zIndex:u.zIndex,contain:u.contain,scrollable:u.scrollable,scrollY:u.scrollY,offsetY:u.offsetY,letterSpacing:u.letterSpacing,debug:u.debug,fontFamily:u.fontFamily,fontSize:u.fontSize,fontStretch:u.fontStretch,fontStyle:u.fontStyle,fontWeight:u.fontWeight,text:u.text,lineHeight:u.lineHeight,maxLines:u.maxLines,textBaseline:u.textBaseline,verticalAlign:u.verticalAlign,overflowSuffix:u.overflowSuffix});this.trState=g}get width(){return this.props.width}set width(i){this.props.width=i,this.textRenderer.set.width(this.trState,i),this.contain==="none"&&this.setUpdateType(Ne.Local)}get height(){return this.props.height}set height(i){this.props.height=i,this.textRenderer.set.height(this.trState,i),this.contain!=="both"&&this.setUpdateType(Ne.Local)}get color(){return this.trState.props.color}set color(i){this.textRenderer.set.color(this.trState,i)}get text(){return this.trState.props.text}set text(i){this.textRenderer.set.text(this.trState,i)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(i){this._textRendererOverride=i,this.textRenderer.destroyState(this.trState);const u=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);if(!u){console.warn("Text Renderer not found for font",this.trState.props.fontFamily);return}this.textRenderer=u,this.trState=this.createState(this.trState.props)}get fontSize(){return this.trState.props.fontSize}set fontSize(i){this.textRenderer.set.fontSize(this.trState,i)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(i){this.textRenderer.set.fontFamily(this.trState,i)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(i){this.textRenderer.set.fontStretch(this.trState,i)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(i){this.textRenderer.set.fontStyle(this.trState,i)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(i){this.textRenderer.set.fontWeight(this.trState,i)}get textAlign(){return this.trState.props.textAlign}set textAlign(i){this.textRenderer.set.textAlign(this.trState,i)}get contain(){return this.trState.props.contain}set contain(i){this.textRenderer.set.contain(this.trState,i)}get scrollable(){return this.trState.props.scrollable}set scrollable(i){this.textRenderer.set.scrollable(this.trState,i)}get scrollY(){return this.trState.props.scrollY}set scrollY(i){this.textRenderer.set.scrollY(this.trState,i)}get offsetY(){return this.trState.props.offsetY}set offsetY(i){this.textRenderer.set.offsetY(this.trState,i)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(i){this.textRenderer.set.letterSpacing(this.trState,i)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(i){this.textRenderer.set.lineHeight(this.trState,i)}get maxLines(){return this.trState.props.maxLines}set maxLines(i){this.textRenderer.set.maxLines(this.trState,i)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(i){this.textRenderer.set.textBaseline(this.trState,i)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(i){this.textRenderer.set.verticalAlign(this.trState,i)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(i){this.textRenderer.set.overflowSuffix(this.trState,i)}get debug(){return this.trState.props.debug}set debug(i){this.textRenderer.set.debug(this.trState,i)}update(i,u){super.update(i,u),ut(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkBasicRenderability(){return this.worldAlpha===0||this.isOutOfBounds()===!0?!1:!!(this.trState&&this.trState.props.text!=="")}setRenderable(i){super.setRenderable(i),this.textRenderer.setIsRenderable(this.trState,i)}renderQuads(i){var u;if(ut(this.globalTransform),!this.textRenderer.renderQuads){super.renderQuads(i);return}this.parentHasRenderTexture&&(!i.renderToTextureActive||this.parentRenderTexture!==i.activeRttNode)||(this.parentHasRenderTexture&&((u=this.props.parent)!=null&&u.rtt)&&(this.globalTransform=li.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),ut(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}createState(i){const u=this.textRenderer.createState(i,this);return u.emitter.on("loaded",this.onTextLoaded),u.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(u),u}}function uR(f){const o={boolean:!0,string:!0,number:!0,undefined:!0},i=Object.keys(f);for(let u=0;u<i.length;u++){const h=i[u];if(!h)continue;const g=f[h],x=typeof g;x==="string"&&g.length>2048&&(console.warn(`Custom Data value for ${h} is too long, it will be truncated to 2048 characters`),f[h]=g.substring(0,2048)),o[x]||(console.warn(`Custom Data value for ${h} is not a boolean, string, or number, it will be ignored`),delete f[h])}return f}const lR=2e6;class fR{constructor(o){P(this,"options");P(this,"animationManager");P(this,"txManager");P(this,"txMemManager");P(this,"fontManager");P(this,"textRenderers");P(this,"shManager");P(this,"renderer");P(this,"root");P(this,"boundsMargin");P(this,"defShaderCtr");P(this,"strictBound");P(this,"preloadBound");P(this,"strictBounds");P(this,"defaultTexture",null);P(this,"eventBus");P(this,"deltaTime",0);P(this,"lastFrameTime",0);P(this,"currentFrameTime",0);P(this,"fpsNumFrames",0);P(this,"fpsElapsedTime",0);P(this,"numQuadsRendered",0);P(this,"renderRequested",!1);P(this,"frameEventQueue",[]);P(this,"fontResolveMap",{});P(this,"contextSpy",null);this.options=o;const{canvas:i,clearColor:u,appWidth:h,appHeight:g,boundsMargin:x,enableContextSpy:S,forceWebGL2:a,numImageWorkers:m,textureMemory:C,renderEngine:y,fontEngines:v,createImageBitmapSupport:M}=o;this.eventBus=o.eventBus,this.txManager=new G_(this,{numImageWorkers:m,createImageBitmapSupport:M}),this.txManager.on("initialized",()=>{this.requestRender()}),this.txMemManager=new sR(this,C),this.shManager=new iR,this.animationManager=new U_,this.contextSpy=S?new rR:null,this.strictBounds=o.strictBounds;let b=[0,0,0,0];x&&(b=Array.isArray(x)?x:[x,x,x,x]),this.boundsMargin=b,this.strictBound=Ga(0,0,h,g),this.preloadBound=Ym(this.strictBound,b);const _={stage:this,canvas:i,pixelRatio:o.devicePhysicalPixelRatio*o.deviceLogicalPixelRatio,clearColor:u??4278190080,bufferMemory:lR,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy,forceWebGL2:a};this.renderer=new y(_);const O=this.renderer.mode||"webgl";this.createDefaultTexture(),this.defShaderCtr=this.renderer.getDefShaderCtr(),w_(O),this.txManager.renderer=this.renderer,this.textRenderers={},v.forEach(G=>{const $=new G(this),j=$.type;if(j==="sdf"&&O==="canvas"){console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...");return}$ instanceof gg&&(j==="canvas"?this.textRenderers.canvas=$:j==="sdf"&&(this.textRenderers.sdf=$))}),Object.keys(this.textRenderers).length===0&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new q_(this.textRenderers);const B=new Qm(this,{x:0,y:0,width:h,height:g,alpha:1,autosize:!1,boundsMargin:null,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1,strictBounds:this.strictBounds});this.root=B,N_(this)}setClearColor(o){this.renderer.updateClearColor(o),this.renderRequested=!0}updateFrameTime(){const o=ws();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=o,this.deltaTime=this.lastFrameTime?o-this.lastFrameTime:100/6,this.txManager.frameTime=o,this.txMemManager.frameTime=o,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}createDefaultTexture(){console.log("Creating default texture"),this.defaultTexture=this.txManager.createTexture("ColorTexture",{color:4294967295}),ut(this.defaultTexture instanceof Kh),this.txManager.loadTexture(this.defaultTexture,!0),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.requestRender()})}updateAnimations(){const{animationManager:o}=this;this.root&&o.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested||this.txManager.hasUpdates()}drawFrame(){const{renderer:o,renderRequested:i}=this;ut(o),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),this.txManager.processSome(this.options.textureProcessingTimeLimit),o.reset(),this.txMemManager.criticalCleanupRequested===!0&&(this.txMemManager.cleanup(!1),this.txMemManager.criticalCleanupRequested===!0&&this.txMemManager.cleanup(!0)),o.rttNodes.length>0&&o.renderRTTNodes(),this.addQuads(this.root),o==null||o.render(),this.calculateFps(),this.calculateQuads(),i&&(this.renderRequested=!1)}queueFrameEvent(o,i){this.frameEventQueue.push([o,i])}flushFrameEvents(){for(const[o,i]of this.frameEventQueue)this.eventBus.emit(o,i);this.frameEventQueue=[]}calculateFps(){var i,u;const{fpsUpdateInterval:o}=this.options;if(o&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=o)){const h=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:h,contextSpyData:((i=this.contextSpy)==null?void 0:i.getData())??null}),(u=this.contextSpy)==null||u.reset()}}calculateQuads(){const o=this.renderer.getQuadCount();o&&o!==this.numQuadsRendered&&(this.numQuadsRendered=o,this.queueFrameEvent("quadsUpdate",{quads:o}))}addQuads(o){ut(this.renderer),o.isRenderable===!0&&o.renderQuads(this.renderer);for(let i=0;i<o.children.length;i++){const u=o.children[i];u!==void 0&&(u.worldAlpha===0||u.strictBounds===!0&&u.renderState===hi.OutOfBounds||this.addQuads(u))}}requestRender(){this.renderRequested=!0}resolveTextRenderer(o,i=null){const u=`${o.fontFamily}${o.fontStyle}${o.fontWeight}${o.fontStretch}${i||""}`;if(this.fontResolveMap[u]!==void 0)return this.fontResolveMap[u];let h=i,g=!1;if(h){const S=this.textRenderers[h];S?S.canRenderFont(o)||(console.warn(`Cannot use override text renderer '${h}' for font`,o),h=null,g=!0):(console.warn(`Text renderer override '${h}' not found.`),h=null,g=!0)}if(!h){for(const[S,a]of Object.entries(this.textRenderers))if(a.canRenderFont(o)){h=S;break}!h&&this.textRenderers.canvas!==void 0&&(h="canvas")}if(g&&console.warn(`Falling back to text renderer ${String(h)}`),!h)return null;const x=this.textRenderers[h];return ut(x,"resolvedTextRenderer undefined"),this.fontResolveMap[u]=x,x}createShaderCtr(o,i){return this.shManager.loadShader(o,i)}createNode(o){const i=this.resolveNodeDefaults(o);return new Qm(this,i)}createTextNode(o){const i=o.fontSize??16,u={...this.resolveNodeDefaults(o),text:o.text??"",textRendererOverride:o.textRendererOverride??null,fontSize:i,fontFamily:o.fontFamily??"sans-serif",fontStyle:o.fontStyle??"normal",fontWeight:o.fontWeight??"normal",fontStretch:o.fontStretch??"normal",textAlign:o.textAlign??"left",contain:o.contain??"none",scrollable:o.scrollable??!1,scrollY:o.scrollY??0,offsetY:o.offsetY??0,letterSpacing:o.letterSpacing??0,lineHeight:o.lineHeight,maxLines:o.maxLines??0,textBaseline:o.textBaseline??"alphabetic",verticalAlign:o.verticalAlign??"middle",overflowSuffix:o.overflowSuffix??"...",debug:o.debug??{},shaderProps:null},h=this.resolveTextRenderer(u,o.textRendererOverride);if(!h)throw new Error(`No compatible text renderer found for ${u.fontFamily}`);return new aR(this,u,h)}setBoundsMargin(o){this.boundsMargin=Array.isArray(o)?o:[o,o,o,o],this.root.setUpdateType(Ne.RenderBounds)}resolveNodeDefaults(o){const i=o.color??4294967295,u=o.colorTl??o.colorTop??o.colorLeft??i,h=o.colorTr??o.colorTop??o.colorRight??i,g=o.colorBl??o.colorBottom??o.colorLeft??i,x=o.colorBr??o.colorBottom??o.colorRight??i;let S={};return this.options.inspector===!0&&(S=uR(o.data??{})),{x:o.x??0,y:o.y??0,width:o.width??0,height:o.height??0,alpha:o.alpha??1,autosize:o.autosize??!1,boundsMargin:o.boundsMargin??null,clipping:o.clipping??!1,color:i,colorTop:o.colorTop??i,colorBottom:o.colorBottom??i,colorLeft:o.colorLeft??i,colorRight:o.colorRight??i,colorBl:g,colorBr:x,colorTl:u,colorTr:h,zIndex:o.zIndex??0,zIndexLocked:o.zIndexLocked??0,parent:o.parent??null,texture:o.texture??null,textureOptions:o.textureOptions??{},shader:o.shader??this.defShaderCtr,src:o.src??null,srcHeight:o.srcHeight,srcWidth:o.srcWidth,srcX:o.srcX,srcY:o.srcY,scale:o.scale??null,scaleX:o.scaleX??o.scale??1,scaleY:o.scaleY??o.scale??1,mount:o.mount??0,mountX:o.mountX??o.mount??0,mountY:o.mountY??o.mount??0,pivot:o.pivot??.5,pivotX:o.pivotX??o.pivot??.5,pivotY:o.pivotY??o.pivot??.5,rotation:o.rotation??0,rtt:o.rtt??!1,data:S,preventCleanup:o.preventCleanup??!1,imageType:o.imageType,strictBounds:o.strictBounds??this.strictBounds}}cleanup(o){this.txMemManager.cleanup(o)}}class cR extends Cr{constructor(i,u){var _,O,B,G,$,j;super();P(this,"root");P(this,"canvas");P(this,"settings");P(this,"stage");P(this,"inspector",null);const h={criticalThreshold:((_=i.textureMemory)==null?void 0:_.criticalThreshold)||124e6,targetThresholdLevel:((O=i.textureMemory)==null?void 0:O.targetThresholdLevel)||.5,cleanupInterval:((B=i.textureMemory)==null?void 0:B.cleanupInterval)||5e3,debugLogging:((G=i.textureMemory)==null?void 0:G.debugLogging)||!1,baselineMemoryAllocation:(($=i.textureMemory)==null?void 0:$.baselineMemoryAllocation)||26e6,doNotExceedCriticalThreshold:((j=i.textureMemory)==null?void 0:j.doNotExceedCriticalThreshold)||!1},g={appWidth:i.appWidth||1920,appHeight:i.appHeight||1080,textureMemory:h,boundsMargin:i.boundsMargin||0,deviceLogicalPixelRatio:i.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:i.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:i.clearColor??0,fpsUpdateInterval:i.fpsUpdateInterval||0,numImageWorkers:i.numImageWorkers!==void 0?i.numImageWorkers:2,enableContextSpy:i.enableContextSpy??!1,forceWebGL2:i.forceWebGL2??!1,inspector:i.inspector??!1,renderEngine:i.renderEngine,quadBufferSize:i.quadBufferSize??4*1024*1024,fontEngines:i.fontEngines,strictBounds:i.strictBounds??!0,textureProcessingTimeLimit:i.textureProcessingTimeLimit||10,canvas:i.canvas||document.createElement("canvas"),createImageBitmapSupport:i.createImageBitmapSupport||"full"};this.settings=g;const{appWidth:x,appHeight:S,deviceLogicalPixelRatio:a,devicePhysicalPixelRatio:m,inspector:C,canvas:y}=g,v=x*a,M=S*a;this.canvas=y,y.width=v*m,y.height=M*m,y.style.width=`${v}px`,y.style.height=`${M}px`,this.stage=new fR({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,forceWebGL2:this.settings.forceWebGL2,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderEngine:this.settings.renderEngine,textureMemory:h,eventBus:this,quadBufferSize:this.settings.quadBufferSize,fontEngines:this.settings.fontEngines,inspector:this.settings.inspector!==null,strictBounds:this.settings.strictBounds,textureProcessingTimeLimit:this.settings.textureProcessingTimeLimit,createImageBitmapSupport:this.settings.createImageBitmapSupport}),this.root=this.stage.root;let b;if(typeof u=="string"?b=document.getElementById(u):b=u,!b)throw new Error("Could not find target element");b.appendChild(y),C&&!tu()&&(this.inspector=new C(y,g))}createNode(i){const u=this.stage.createNode(i);return this.inspector?this.inspector.createNode(u):u}createTextNode(i){const u=this.stage.createTextNode(i);return this.inspector?this.inspector.createTextNode(u):u}destroyNode(i){return this.inspector&&this.inspector.destroyNode(i.id),i.destroy()}createTexture(i,u){return this.stage.txManager.createTexture(i,u)}createShader(i,u){return this.stage.shManager.loadShader(i,u)}createDynamicShader(i){return this.stage.shManager.loadDynamicShader({effects:i})}createEffect(i,u,h){return{name:h,type:i,props:u}}getNodeById(i){var g;const u=(g=this.stage)==null?void 0:g.root;if(!u)return null;const h=x=>{if(x.id===i)return x;for(const S of x.children){const a=h(S);if(a)return a}return null};return h(u)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){this.stage.requestRender()}cleanup(i=!1){this.stage.cleanup(i)}setClearColor(i){this.stage.setClearColor(i)}}class aT extends Cr{constructor(i){super();P(this,"fontFamily");P(this,"descriptors");P(this,"loaded",!1);P(this,"metrics",null);const{fontFamily:u,descriptors:h,metrics:g}=i;g&&(this.metrics={ascender:g.ascender/g.unitsPerEm,descender:g.descender/g.unitsPerEm,lineGap:g.lineGap/g.unitsPerEm}),this.fontFamily=u,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...h}}static convertToCssFontFaceDescriptors(i){return{style:i.style,weight:typeof i.weight=="number"?`${i.weight}`:i.weight,stretch:i.stretch,unicodeRange:i.unicodeRange,featureSettings:i.featureSettings,display:i.display}}}class Fh extends aT{constructor(i){super(i);P(this,"fontFace");P(this,"fontUrl");const{fontFamily:u,fontUrl:h}=i,g=h.replace(/\(|\)/g,""),x=this.descriptors;let S={style:x.style,weight:typeof x.weight=="number"?`${x.weight}`:x.weight,stretch:x.stretch,unicodeRange:x.unicodeRange,featureSettings:x.featureSettings,display:x.display};for(const m in S){const C=m;S[C]===void 0&&delete S[C]}const a=new FontFace(u,`url(${g})`,S);g.length>0?a.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error):(this.loaded=!0,this.emit("loaded")),this.fontFace=a,this.fontUrl=h}}class hR{}class uT extends hR{constructor(i,u,h,g,x,S,a,m,C,y,v,M,b){super();P(this,"glw");P(this,"options");P(this,"buffers");P(this,"shader");P(this,"shaderProps");P(this,"alpha");P(this,"clippingRect");P(this,"dimensions");P(this,"bufferIdx");P(this,"zIndex");P(this,"renderToTexture");P(this,"parentHasRenderTexture");P(this,"framebufferDimensions");P(this,"length",0);P(this,"numQuads",0);P(this,"textures",[]);P(this,"maxTextures");this.glw=i,this.options=u,this.buffers=h,this.shader=g,this.shaderProps=x,this.alpha=S,this.clippingRect=a,this.dimensions=m,this.bufferIdx=C,this.zIndex=y,this.renderToTexture=v,this.parentHasRenderTexture=M,this.framebufferDimensions=b,this.maxTextures=g.supportsIndexedTextures?i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(i){const{textures:u,maxTextures:h}=this;let g=-1;const x=u.length;for(let S=0;S<x;S++)if(u[S]===i){g=S;break}return g!==-1?g:x>=h?4294967295:(this.textures.push(i),x)}draw(){const{glw:i,shader:u,shaderProps:h,options:g}=this,{shManager:x}=g;x.useShader(u),u.bindRenderOp(this,h);const S=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:a,y:m,width:C,height:y}=this.clippingRect,v=this.parentHasRenderTexture?1:g.pixelRatio,M=g.canvas.height,b=Math.round(a*v),_=Math.round(C*v),O=Math.round(y*v);let B=Math.round(M-O-m*v);this.parentHasRenderTexture&&(B=this.framebufferDimensions?this.framebufferDimensions.height-this.dimensions.height:0),i.setScissorTest(!0),i.scissor(b,B,_,O)}else i.setScissorTest(!1);i.drawElements(i.TRIANGLES,6*this.numQuads,i.UNSIGNED_SHORT,S)}}function dR(f){const o={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(o).forEach(u=>{o[u]=f.getParameter(f[u])}),o}function pR(f){const o={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(o).forEach(u=>{o[u]=f.getExtension(u)}),o}function mR(f,o){const i=~~(o/80),u=new Uint16Array(i*6);for(let g=0,x=0;g<i;g+=6,x+=4)u[g]=x,u[g+1]=x+1,u[g+2]=x+2,u[g+3]=x+2,u[g+4]=x+1,u[g+5]=x+3;const h=f.createBuffer();f.elementArrayBufferData(h,u,f.STATIC_DRAW)}function gR(f){return f!==null&&(typeof f=="object"&&f.constructor&&f.constructor.name==="HTMLImageElement"||typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement)}const Dm=new Uint8Array([0,0,0,0]);class Qh extends rT{constructor(i,u,h){super(u,h);P(this,"glw");P(this,"_nativeCtxTexture",null);P(this,"_w",0);P(this,"_h",0);this.glw=i}get ctxTexture(){return this.state==="freed"?(this.load(),null):(ut(this._nativeCtxTexture),this._nativeCtxTexture)}get w(){return this._w}get h(){return this._h}load(){if(!(this.state==="loading"||this.state==="loaded")){if(this.state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this._nativeCtxTexture===null){this.state="failed",this.textureSource.setState("failed",new Error("Could not create WebGL Texture")),console.error("Could not create WebGL Texture");return}this.onLoadRequest().then(({width:i,height:u})=>{this.state!=="freed"&&(this.state="loaded",this._w=i,this._h=u,this.textureSource.setState("loaded",{width:i,height:u}),this.textureSource.freeTextureData())}).catch(i=>{this.state!=="freed"&&(this.state="failed",this.textureSource.setState("failed",i),this.textureSource.freeTextureData(),console.error(i))})}}async onLoadRequest(){const{glw:i}=this,u=this.textureSource.textureData;if(u===null||this._nativeCtxTexture===null)throw new Error("Texture data or native texture is null "+this.textureSource.type);i.texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(Dm.byteLength);let h=0,g=0;i.activeTexture(0);const x=u.data,S=i.RGBA,a=4,m=1.1;if(typeof ImageBitmap<"u"&&x instanceof ImageBitmap||x instanceof ImageData||gR(x))h=x.width,g=x.height,i.bindTexture(this._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!u.premultiplyAlpha),i.texImage2D(0,S,S,i.UNSIGNED_BYTE,x),this.setTextureMemUse(g*h*a*m);else if(x===null)h=0,g=0,i.bindTexture(this._nativeCtxTexture),i.texImage2D(0,S,1,1,0,S,i.UNSIGNED_BYTE,Dm),this.setTextureMemUse(Dm.byteLength);else if("mipmaps"in x&&x.mipmaps){const{mipmaps:C,width:y=0,height:v=0,type:M,glInternalFormat:b}=x,_=M==="ktx"?new DataView(C[0]??new ArrayBuffer(0)):C[0];i.bindTexture(this._nativeCtxTexture),i.compressedTexImage2D(0,b,y,v,0,_),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),this.setTextureMemUse(_.byteLength)}else x&&x instanceof Uint8Array?(h=1,g=1,i.bindTexture(this._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!u.premultiplyAlpha),i.texImage2D(0,S,h,g,0,S,i.UNSIGNED_BYTE,x),this.setTextureMemUse(h*g*a)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",u);return{width:h,height:g}}free(){this.state!=="freed"&&(this.state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,this._nativeCtxTexture!==null&&(this.glw.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null),this.textureSource.freeTextureData())}createNativeCtxTexture(){const{glw:i}=this,u=i.createTexture();return u?(i.activeTexture(0),i.bindTexture(u),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),u):null}}class yR extends Qh{constructor(o,i,u){super(o,i,u)}async onLoadRequest(){var i,u;const o=this.textureSource.textureData;return ut(o,"SubTexture must have texture data"),o.data instanceof Uint8Array?{width:1,height:1}:{width:((i=o.data)==null?void 0:i.width)||0,height:((u=o.data)==null?void 0:u.height)||0}}}class lT{constructor(o){P(this,"config");this.config=o}getBuffer(o){var i;return(i=this.config.find(u=>u.attributes[o]))==null?void 0:i.buffer}getAttributeInfo(o){var i;return(i=this.config.find(u=>u.attributes[o]))==null?void 0:i.attributes[o]}}function vR(f){return self.WebGL2RenderingContext&&f instanceof self.WebGL2RenderingContext}class xR{constructor(o){P(this,"gl");P(this,"activeTextureUnit",0);P(this,"texture2dUnits");P(this,"texture2dParams",new WeakMap);P(this,"scissorEnabled");P(this,"scissorX");P(this,"scissorY");P(this,"scissorWidth");P(this,"scissorHeight");P(this,"blendEnabled");P(this,"blendSrcRgb");P(this,"blendDstRgb");P(this,"blendSrcAlpha");P(this,"blendDstAlpha");P(this,"boundArrayBuffer");P(this,"boundElementArrayBuffer");P(this,"curProgram");P(this,"canvas");P(this,"MAX_RENDERBUFFER_SIZE");P(this,"MAX_TEXTURE_SIZE");P(this,"MAX_VIEWPORT_DIMS");P(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");P(this,"MAX_TEXTURE_IMAGE_UNITS");P(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");P(this,"MAX_VERTEX_ATTRIBS");P(this,"MAX_VARYING_VECTORS");P(this,"MAX_VERTEX_UNIFORM_VECTORS");P(this,"MAX_FRAGMENT_UNIFORM_VECTORS");P(this,"TEXTURE_MAG_FILTER");P(this,"TEXTURE_MIN_FILTER");P(this,"TEXTURE_WRAP_S");P(this,"TEXTURE_WRAP_T");P(this,"LINEAR");P(this,"CLAMP_TO_EDGE");P(this,"RGB");P(this,"RGBA");P(this,"UNSIGNED_BYTE");P(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");P(this,"UNPACK_FLIP_Y_WEBGL");P(this,"FLOAT");P(this,"TRIANGLES");P(this,"UNSIGNED_SHORT");P(this,"ONE");P(this,"ONE_MINUS_SRC_ALPHA");P(this,"VERTEX_SHADER");P(this,"FRAGMENT_SHADER");P(this,"STATIC_DRAW");P(this,"COMPILE_STATUS");P(this,"LINK_STATUS");P(this,"DYNAMIC_DRAW");P(this,"COLOR_ATTACHMENT0");P(this,"INVALID_ENUM");P(this,"INVALID_OPERATION");this.gl=o,this.activeTextureUnit=o.getParameter(o.ACTIVE_TEXTURE)-o.TEXTURE0;const i=o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(i).fill(void 0).map((h,g)=>(this.activeTexture(g),o.getParameter(o.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=o.isEnabled(o.SCISSOR_TEST);const u=o.getParameter(o.SCISSOR_BOX);this.scissorX=u[0],this.scissorY=u[1],this.scissorWidth=u[2],this.scissorHeight=u[3],this.blendEnabled=o.isEnabled(o.BLEND),this.blendSrcRgb=o.getParameter(o.BLEND_SRC_RGB),this.blendDstRgb=o.getParameter(o.BLEND_DST_RGB),this.blendSrcAlpha=o.getParameter(o.BLEND_SRC_ALPHA),this.blendDstAlpha=o.getParameter(o.BLEND_DST_ALPHA),this.boundArrayBuffer=o.getParameter(o.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=o.getParameter(o.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=o.getParameter(o.CURRENT_PROGRAM),this.canvas=o.canvas,this.MAX_RENDERBUFFER_SIZE=o.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=o.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=o.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=o.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=o.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=o.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=o.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=o.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=o.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=o.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=o.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=o.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=o.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=o.TEXTURE_WRAP_T,this.LINEAR=o.LINEAR,this.CLAMP_TO_EDGE=o.CLAMP_TO_EDGE,this.RGB=o.RGB,this.RGBA=o.RGBA,this.UNSIGNED_BYTE=o.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=o.UNPACK_FLIP_Y_WEBGL,this.FLOAT=o.FLOAT,this.TRIANGLES=o.TRIANGLES,this.UNSIGNED_SHORT=o.UNSIGNED_SHORT,this.ONE=o.ONE,this.ONE_MINUS_SRC_ALPHA=o.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=o.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=o.TRIANGLES,this.UNSIGNED_SHORT=o.UNSIGNED_SHORT,this.VERTEX_SHADER=o.VERTEX_SHADER,this.FRAGMENT_SHADER=o.FRAGMENT_SHADER,this.STATIC_DRAW=o.STATIC_DRAW,this.COMPILE_STATUS=o.COMPILE_STATUS,this.LINK_STATUS=o.LINK_STATUS,this.DYNAMIC_DRAW=o.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=o.COLOR_ATTACHMENT0,this.INVALID_ENUM=o.INVALID_ENUM,this.INVALID_OPERATION=o.INVALID_OPERATION}isWebGl2(){return vR(this.gl)}activeTexture(o){const{gl:i}=this;this.activeTextureUnit!==o&&(i.activeTexture(o+i.TEXTURE0),this.activeTextureUnit=o)}bindTexture(o){const{gl:i,activeTextureUnit:u,texture2dUnits:h}=this;h[u]!==o&&(h[u]=o,i.bindTexture(this.gl.TEXTURE_2D,o))}_getActiveTexture(){const{activeTextureUnit:o,texture2dUnits:i}=this;return i[o]}texParameteri(o,i){const{gl:u,texture2dParams:h}=this,g=this._getActiveTexture();if(!g)throw new Error("No active texture");let x=h.get(g);x||(x={},h.set(g,x)),x[o]!==i&&(x[o]=i,u.texParameteri(u.TEXTURE_2D,o,i))}texImage2D(o,i,u,h,g,x,S,a){const{gl:m}=this;x?m.texImage2D(m.TEXTURE_2D,o,i,u,h,g,x,S,a):m.texImage2D(m.TEXTURE_2D,o,i,u,h,g)}compressedTexImage2D(o,i,u,h,g,x){const{gl:S}=this;S.compressedTexImage2D(S.TEXTURE_2D,o,i,u,h,g,x)}pixelStorei(o,i){const{gl:u}=this;u.pixelStorei(o,i)}generateMipmap(){const{gl:o}=this;o.generateMipmap(o.TEXTURE_2D)}createTexture(){const{gl:o}=this;return o.createTexture()}deleteTexture(o){const{gl:i}=this;o&&this.texture2dParams.delete(o),i.deleteTexture(o)}deleteFramebuffer(o){this.gl.deleteFramebuffer(o)}viewport(o,i,u,h){const{gl:g}=this;g.viewport(o,i,u,h)}clearColor(o,i,u,h){const{gl:g}=this;g.clearColor(o,i,u,h)}setScissorTest(o){const{gl:i,scissorEnabled:u}=this;o!==u&&(o?i.enable(i.SCISSOR_TEST):i.disable(i.SCISSOR_TEST),this.scissorEnabled=o)}scissor(o,i,u,h){const{gl:g,scissorX:x,scissorY:S,scissorWidth:a,scissorHeight:m}=this;(o!==x||i!==S||u!==a||h!==m)&&(g.scissor(o,i,u,h),this.scissorX=o,this.scissorY=i,this.scissorWidth=u,this.scissorHeight=h)}setBlend(o){const{gl:i,blendEnabled:u}=this;o!==u&&(o?i.enable(i.BLEND):i.disable(i.BLEND),this.blendEnabled=o)}blendFunc(o,i){const{gl:u,blendSrcRgb:h,blendDstRgb:g,blendSrcAlpha:x,blendDstAlpha:S}=this;(o!==h||i!==g||o!==x||i!==S)&&(u.blendFunc(o,i),this.blendSrcRgb=o,this.blendDstRgb=i,this.blendSrcAlpha=o,this.blendDstAlpha=i)}createBuffer(){const{gl:o}=this;return o.createBuffer()}createFramebuffer(){const{gl:o}=this;return o.createFramebuffer()}bindFramebuffer(o){const{gl:i}=this;i.bindFramebuffer(i.FRAMEBUFFER,o)}framebufferTexture2D(o,i,u){const{gl:h}=this;h.framebufferTexture2D(h.FRAMEBUFFER,o,h.TEXTURE_2D,i,u)}clear(){const{gl:o}=this;o.clear(o.COLOR_BUFFER_BIT)}arrayBufferData(o,i,u){const{gl:h,boundArrayBuffer:g}=this;g!==o&&(h.bindBuffer(h.ARRAY_BUFFER,o),this.boundArrayBuffer=o),h.bufferData(h.ARRAY_BUFFER,i,u)}elementArrayBufferData(o,i,u){const{gl:h,boundElementArrayBuffer:g}=this;g!==o&&(h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,o),this.boundElementArrayBuffer=o),h.bufferData(h.ELEMENT_ARRAY_BUFFER,i,u)}vertexAttribPointer(o,i,u,h,g,x,S){const{gl:a,boundArrayBuffer:m}=this;m!==o&&(a.bindBuffer(a.ARRAY_BUFFER,o),this.boundArrayBuffer=o),a.vertexAttribPointer(i,u,h,g,x,S)}useProgram(o){const{gl:i,curProgram:u}=this;u!==o&&(i.useProgram(o),this.curProgram=o)}uniform1f(o,i){const{gl:u}=this;u.uniform1f(o,i)}uniform1fv(o,i){const{gl:u}=this;u.uniform1fv(o,i)}uniform1i(o,i){const{gl:u}=this;u.uniform1i(o,i)}uniform1iv(o,i){const{gl:u}=this;u.uniform1iv(o,i)}uniform2f(o,i,u){const{gl:h}=this;h.uniform2f(o,i,u)}uniform2fv(o,i){const{gl:u}=this;u.uniform2fv(o,i)}uniform2i(o,i,u){const{gl:h}=this;h.uniform2i(o,i,u)}uniform2iv(o,i){const{gl:u}=this;u.uniform2iv(o,i)}uniform3f(o,i,u,h){const{gl:g}=this;g.uniform3f(o,i,u,h)}uniform3fv(o,i){const{gl:u}=this;u.uniform3fv(o,i)}uniform3i(o,i,u,h){const{gl:g}=this;g.uniform3i(o,i,u,h)}uniform3iv(o,i){const{gl:u}=this;u.uniform3iv(o,i)}uniform4f(o,i,u,h,g){const{gl:x}=this;x.uniform4f(o,i,u,h,g)}uniform4fv(o,i){const{gl:u}=this;u.uniform4fv(o,i)}uniform4i(o,i,u,h,g){const{gl:x}=this;x.uniform4i(o,i,u,h,g)}uniform4iv(o,i){const{gl:u}=this;u.uniform4iv(o,i)}uniformMatrix2fv(o,i){const{gl:u}=this;u.uniformMatrix2fv(o,!1,i)}uniformMatrix3fv(o,i){const{gl:u}=this;u.uniformMatrix3fv(o,!1,i)}uniformMatrix4fv(o,i){const{gl:u}=this;u.uniformMatrix4fv(o,!1,i)}getParameter(o){const{gl:i}=this;return i.getParameter(o)}drawElements(o,i,u,h){const{gl:g}=this;g.drawElements(o,i,u,h)}getExtension(o){const{gl:i}=this;return i.getExtension(o)}getError(){const{gl:o}=this;return o.getError()}createVertexArray(){const{gl:o}=this;return ut(o instanceof WebGL2RenderingContext),o.createVertexArray()}bindVertexArray(o){const{gl:i}=this;ut(i instanceof WebGL2RenderingContext),i.bindVertexArray(o)}getAttribLocation(o,i){const{gl:u}=this;return u.getAttribLocation(o,i)}getUniformLocation(o,i){const{gl:u}=this;return u.getUniformLocation(o,i)}enableVertexAttribArray(o){const{gl:i}=this;i.enableVertexAttribArray(o)}disableVertexAttribArray(o){const{gl:i}=this;i.disableVertexAttribArray(o)}createShader(o){const{gl:i}=this;return i.createShader(o)}compileShader(o){const{gl:i}=this;i.compileShader(o)}attachShader(o,i){const{gl:u}=this;u.attachShader(o,i)}linkProgram(o){const{gl:i}=this;i.linkProgram(o)}deleteProgram(o){const{gl:i}=this;i.deleteProgram(o)}getShaderParameter(o,i){const{gl:u}=this;return u.getShaderParameter(o,i)}getShaderInfoLog(o){const{gl:i}=this;return i.getShaderInfoLog(o)}createProgram(){const{gl:o}=this;return o.createProgram()}getProgramParameter(o,i){const{gl:u}=this;return u.getProgramParameter(o,i)}getProgramInfoLog(o){const{gl:i}=this;return i.getProgramInfoLog(o)}shaderSource(o,i){const{gl:u}=this;u.shaderSource(o,i)}deleteShader(o){const{gl:i}=this;i.deleteShader(o)}}class sC extends Qh{constructor(i,u,h){super(i,u,h);P(this,"framebuffer",null)}async onLoadRequest(){const{glw:i}=this,u=this._nativeCtxTexture=this.createNativeCtxTexture(),{width:h,height:g}=this.textureSource;return this.framebuffer=i.createFramebuffer(),i.texImage2D(0,i.RGBA,h,g,0,i.RGBA,i.UNSIGNED_BYTE,null),this.setTextureMemUse(h*g*4),i.bindFramebuffer(this.framebuffer),i.framebufferTexture2D(i.COLOR_ATTACHMENT0,u,0),i.bindFramebuffer(null),{width:h,height:g}}free(){super.free(),this.glw.deleteFramebuffer(this.framebuffer),this.framebuffer=null}}const wR=24;class yg extends sT{constructor(i){super(i);P(this,"glw");P(this,"system");P(this,"quadBuffer");P(this,"fQuadBuffer");P(this,"uiQuadBuffer");P(this,"renderOps",[]);P(this,"curBufferIdx",0);P(this,"curRenderOp",null);P(this,"rttNodes",[]);P(this,"activeRttNode",null);P(this,"defShaderCtrl");P(this,"defaultShader");P(this,"quadBufferCollection");P(this,"clearColor",{raw:0,normalized:[0,0,0,0]});P(this,"quadBufferUsage",0);P(this,"numQuadsRendered",0);P(this,"renderToTextureActive",!1);this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:u,clearColor:h,bufferMemory:g}=i,x=v_(u,i.forceWebGL2,i.contextSpy),S=this.glw=new xR(x);S.viewport(0,0,u.width,u.height),this.updateClearColor(h),S.setBlend(!0),S.blendFunc(S.ONE,S.ONE_MINUS_SRC_ALPHA),mR(S,g),this.system={parameters:dR(this.glw),extensions:pR(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const a=S.createBuffer();ut(a);const m=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new lT([{buffer:a,attributes:{a_position:{name:"a_position",size:2,type:S.FLOAT,normalized:!1,stride:m,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:S.FLOAT,normalized:!1,stride:m,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:S.UNSIGNED_BYTE,normalized:!0,stride:m,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:S.FLOAT,normalized:!1,stride:m,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:i}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,i.setScissorTest(!1),i.clear()}getShaderManager(){return this.shManager}createCtxTexture(i){return i instanceof zl?new yR(this.glw,this.txMemManager,i):i instanceof Yh?new sC(this.glw,this.txMemManager,i):new Qh(this.glw,this.txMemManager,i)}addQuad(i){const{fQuadBuffer:u,uiQuadBuffer:h}=this;let g=i.texture;if(ut(g!==null,"Texture is required"),i.shaderProps!==null){if(qh(i.shaderProps,"$dimensions")==!0){const B=i.shaderProps.$dimensions;B.width=i.width,B.height=i.height}qh(i.shaderProps,"$alpha")===!0&&(i.shaderProps.$alpha=i.alpha)}let{curBufferIdx:x,curRenderOp:S}=this;const a={width:-1,height:-1};a.width=i.width,a.height=i.height;const m=i.shader||this.defaultShader;ut(m.getUniformLocation!==void 0,"Invalid WebGL shader"),this.reuseRenderOp(i)===!1&&(this.newRenderOp(m,i.shaderProps,i.alpha,a,i.clippingRect,x,i.rtt,i.parentHasRenderTexture,i.framebufferDimensions),S=this.curRenderOp,ut(S));let C=0,y=0,v=1,M=1;if(g.type===_n.subTexture){const{x:B,y:G,width:$,height:j}=g.props,{width:ne=0,height:X=0}=g.parentTexture.dimensions||{width:0,height:0};C=B/ne,v=C+$/ne,y=G/X,M=y+j/X,g=g.parentTexture}if(g.type===_n.image&&i.textureOptions!==null&&i.textureOptions.resizeMode!==void 0&&g.dimensions!==null){const B=i.textureOptions.resizeMode,{width:G,height:$}=g.dimensions;if(B.type==="cover"){const j=i.width/G,ne=i.height/$,X=Math.max(j,ne),K=1/X;if(X&&j&&j<X){const ee=K*i.width;C=(1-ee/G)*(B.clipX??.5),v=C+ee/G}if(X&&ne&&ne<X){const ee=K*i.height;y=(1-ee/$)*(B.clipY??.5),M=y+ee/$}}}let b=0;i.textureOptions!==null&&(i.textureOptions.flipX===!0&&([C,v]=[v,C]),b=+(i.textureOptions.flipY||!1)),b^+(g.type===_n.renderToTexture)&&([y,M]=[M,y]);const _=g.ctxTexture;ut(_ instanceof Qh);const O=this.addTexture(_,x);if(ut(this.curRenderOp!==null),i.renderCoords)u[x++]=i.renderCoords.x1,u[x++]=i.renderCoords.y1,u[x++]=C,u[x++]=y,h[x++]=i.colorTl,u[x++]=O,u[x++]=i.renderCoords.x2,u[x++]=i.renderCoords.y2,u[x++]=v,u[x++]=y,h[x++]=i.colorTr,u[x++]=O,u[x++]=i.renderCoords.x4,u[x++]=i.renderCoords.y4,u[x++]=C,u[x++]=M,h[x++]=i.colorBl,u[x++]=O,u[x++]=i.renderCoords.x3,u[x++]=i.renderCoords.y3,u[x++]=v,u[x++]=M,h[x++]=i.colorBr,u[x++]=O;else if(i.tb!==0||i.tc!==0)u[x++]=i.tx,u[x++]=i.ty,u[x++]=C,u[x++]=y,h[x++]=i.colorTl,u[x++]=O,u[x++]=i.tx+i.width*i.ta,u[x++]=i.ty+i.width*i.tc,u[x++]=v,u[x++]=y,h[x++]=i.colorTr,u[x++]=O,u[x++]=i.tx+i.height*i.tb,u[x++]=i.ty+i.height*i.td,u[x++]=C,u[x++]=M,h[x++]=i.colorBl,u[x++]=O,u[x++]=i.tx+i.width*i.ta+i.height*i.tb,u[x++]=i.ty+i.width*i.tc+i.height*i.td,u[x++]=v,u[x++]=M,h[x++]=i.colorBr,u[x++]=O;else{const B=i.tx+i.width*i.ta,G=i.ty+i.height*i.td;u[x++]=i.tx,u[x++]=i.ty,u[x++]=C,u[x++]=y,h[x++]=i.colorTl,u[x++]=O,u[x++]=B,u[x++]=i.ty,u[x++]=v,u[x++]=y,h[x++]=i.colorTr,u[x++]=O,u[x++]=i.tx,u[x++]=G,u[x++]=C,u[x++]=M,h[x++]=i.colorBl,u[x++]=O,u[x++]=B,u[x++]=G,u[x++]=v,u[x++]=M,h[x++]=i.colorBr,u[x++]=O}this.curRenderOp.length+=wR,this.curRenderOp.numQuads++,this.curBufferIdx=x}newRenderOp(i,u,h,g,x,S,a,m,C){const y=new uT(this.glw,this.options,this.quadBufferCollection,i,u,h,x,g,S,0,a,m,C);this.curRenderOp=y,this.renderOps.push(y)}addTexture(i,u,h){const{curRenderOp:g}=this;ut(g);const x=g.addTexture(i);if(x===4294967295){if(h)throw new Error("Unable to add texture to render op");return this.newRenderOp(g.shader,g.shaderProps,g.alpha,g.dimensions,g.clippingRect,u),this.addTexture(i,u,!0)}return x}reuseRenderOp(i){var m;const{shader:u,shaderProps:h,parentHasRenderTexture:g,rtt:x,clippingRect:S}=i,a=u||this.defaultShader;return!(((m=this.curRenderOp)==null?void 0:m.shader)!==a||E_(this.curRenderOp.clippingRect,S)===!1||g!==void 0||x!==void 0||this.curRenderOp.shader!==this.defaultShader&&(h===null||this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,h)===!1))}addRenderOp(i){this.renderOps.push(i),this.curRenderOp=null}render(i="screen"){const{glw:u,quadBuffer:h}=this,g=new Float32Array(h,0,this.curBufferIdx),x=this.quadBufferCollection.getBuffer("a_position")||null;u.arrayBufferData(x,g,u.STATIC_DRAW);for(let a=0,m=this.renderOps.length;a<m;a++)this.renderOps[a].draw();this.quadBufferUsage=this.curBufferIdx*g.BYTES_PER_ELEMENT;const S=4*(6*g.BYTES_PER_ELEMENT);this.numQuadsRendered=this.quadBufferUsage/S}getQuadCount(){return this.numQuadsRendered}renderToTexture(i){for(let u=0;u<this.rttNodes.length;u++)if(this.rttNodes[u]===i)return;this.insertRTTNodeInOrder(i)}insertRTTNodeInOrder(i){let u=this.rttNodes.length,h=i;for(;h&&h.parent;){const x=this.rttNodes.indexOf(h.parent);if(x!==-1){u=x;break}h=h.parent}const g=this.findMaxChildRTTIndex(i);g!==-1&&(u=Math.max(u,g+1)),this.rttNodes.splice(u,0,i)}findMaxChildRTTIndex(i){let u=-1;const h=g=>{const x=this.rttNodes.indexOf(g);x!==-1&&(u=Math.max(u,x));for(const S of g.children)h(S)};return h(i),u}renderRTTNodes(){const{glw:i}=this;this.stage;for(let h=0;h<this.rttNodes.length;h++){const g=this.rttNodes[h];if(g===void 0||g.hasRTTupdates===!1||g.worldAlpha===0||g.strictBounds===!0&&g.renderState===hi.OutOfBounds||g.texture===null||g.texture.state!=="loaded")continue;this.activeRttNode=g,ut(g.texture,"RTT node missing texture");const x=g.texture.ctxTexture;ut(x instanceof sC),this.renderToTextureActive=!0,i.bindFramebuffer(x.framebuffer),i.viewport(0,0,x.w,x.h),i.clearColor(0,0,0,0),i.clear();for(let S=0;S<g.children.length;S++){const a=g.children[S];a!==void 0&&(this.stage.addQuads(a),a.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,g.hasRTTupdates=!1}const u=this.clearColor.normalized;i.clearColor(u[0],u[1],u[2],u[3]),i.bindFramebuffer(null),i.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(i){const u=this.rttNodes.indexOf(i);u!==-1&&this.rttNodes.splice(u,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}updateClearColor(i){if(this.clearColor.raw===i)return;const u=this.glw,h=Gl(i);u.clearColor(h[0],h[1],h[2],h[3]),this.clearColor={raw:i,normalized:h},u.clear()}}const SR={LINE_FEED:10,CARRIAGE_RETURN:13,SPACE:32,TAB:9,ZERO_WIDTH_SPACE:8203,ZERO_WIDTH_NON_JOINER:8204,ZERO_WIDTH_JOINER:8205,LEFT_TO_RIGHT_MARK:8206,RIGHT_TO_LEFT_MARK:8207,LEFT_TO_RIGHT_EMBEDDING:8234,RIGHT_TO_LEFT_EMBEDDING:8235,POP_DIRECTIONAL_FORMATTING:8236,LEFT_TO_RIGHT_OVERRIDE:8237,RIGHT_TO_LEFT_OVERRIDE:8238,LINE_SEPARATOR:8232,PARAGRAPH_SEPARATOR:8233,OBJECT_REPLACEMENT_CHARACTER:65532,REPLACEMENT_CHARACTER:65533,ZERO_WIDTH_NO_BREAK_SPACE:65279,LEFT_TO_RIGHT_ISOLATE:8294,RIGHT_TO_LEFT_ISOLATE:8295,FIRST_STRONG_ISOLATE:8296,POP_DIRECTIONAL_ISOLATE:8297,INHIBIT_SYMMETRIC_SWAPPING:8298,ACTIVATE_SYMMETRIC_SWAPPING:8299,INHIBIT_ARABIC_FORM_SHAPING:8300,ACTIVATE_ARABIC_FORM_SHAPING:8301,NATIONAL_DIGIT_SHAPES:8302,NOMINAL_DIGIT_SHAPES:8303,LEFT_TO_RIGHT_BOUNDARY:8206,RIGHT_TO_LEFT_BOUNDARY:8207};class CR{}class TR extends CR{constructor(i,u){super();P(this,"data");P(this,"glyphMap");P(this,"kernings");this.data=i,this.glyphMap=u;const h=this.kernings={};i.kernings.forEach(g=>{const x=g.second,S=h[x]=h[x]||{};S[g.first]=g.amount}),this.kernings=h}*shapeText(i,u){var x;let h,g;for(;(h=u.peek())&&!h.done;){const S=h.value,a=this.glyphMap.get(S);if(u.next(),a!==void 0){const m=g!==void 0?(((x=this.kernings[a.id])==null?void 0:x[g])||0)+i.letterSpacing:0;g=a.id,yield{mapped:!0,glyphId:a.id,codepoint:S,cluster:u.lastIndex,xAdvance:a.xadvance+m,yAdvance:0,xOffset:a.xoffset+m,yOffset:a.yoffset,xBearing:0,yBearing:0,width:a.width,height:a.height}}else S===SR.LINE_FEED&&(g=void 0),yield{mapped:!1,codepoint:S,cluster:u.lastIndex}}}}class og extends aT{constructor(i,u){super(u);P(this,"type");P(this,"texture");P(this,"maxCharHeight",0);P(this,"shaper");P(this,"glyphMap",new Map);P(this,"data");const{atlasUrl:h,atlasDataUrl:g,stage:x}=u;this.type=i;const S=x.renderer;ut(S instanceof yg,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=x.txManager.createTexture("ImageTexture",{src:h,premultiplyAlpha:!1}),x.txManager.loadTexture(this.texture,!0),this.texture.preventCleanup=!0,this.texture.on("loaded",()=>{this.checkLoaded(),x.requestRender()}),JC(g).then(a=>{var C;this.data=JSON.parse(a),ut(this.data);let m=0;if(this.data.chars.forEach(y=>{this.glyphMap.set(y.id,y);const v=y.yoffset+y.height;v>m&&(m=v)}),this.maxCharHeight=m,this.shaper=new TR(this.data,this.glyphMap),!this.metrics)if((C=this.data)!=null&&C.lightningMetrics){const{ascender:y,descender:v,lineGap:M,unitsPerEm:b}=this.data.lightningMetrics;this.metrics={ascender:y/b,descender:v/b,lineGap:M/b}}else throw new Error(`Font metrics not found in ${this.type} font ${this.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);this.checkLoaded()}).catch(console.error)}getAtlasEntry(i){const u=this.glyphMap.get(i);if(u===void 0)throw new Error(`Glyph ${i} not found in font ${this.fontFamily}`);return{x:u.x,y:u.y,width:u.width,height:u.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}const bR=24;function ER(f,o,i,u,h,g,x,S,a){const m=Math.min(Math.max(x.firstLineIdx,0),S.length),C=0,{metrics:y}=i;ut(y,"Font metrics not loaded"),ut(i.data,"Font data not loaded");const v=(y.ascender-y.descender)*f;let M=0;u==="middle"?M=(o-v)/2:u==="bottom"&&(M=o-v);const b=h/g,_=i.data.common.base,B=y.ascender*f-_,G=b+B+m*o+M;if(!(a&&G>=a/g))return{sdfX:C,sdfY:G,lineIndex:m}}class Rl{constructor(o,i=0){P(this,"iterator");P(this,"peekBuffer",[]);P(this,"_lastIndex");this.iterator=o,this.iterator=o,this._lastIndex=i-1,this.peekBuffer=[]}next(){const o=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return o.done?this._lastIndex=-1:this._lastIndex++,o}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const o=this.iterator.next();return this.peekBuffer.push(o),o}get lastIndex(){return this._lastIndex}}function*Ll(f,o=0){let i=o;for(;i<f.length;){const u=f.codePointAt(i);if(u===void 0)throw new Error("Invalid Unicode code point");yield u,i+=u<=65535?1:2}}function kR(f,o,i){const u=i.shapeText(o,new Rl(Ll(f,0),0));let h=0;for(const g of u)g.mapped&&g.codepoint!==8203&&(h+=g.xAdvance);return h}function AR(f,o,i,u,h,g,x,S,a,m,C,y,v,M,b,_,O,B,G){ut(b,"Font face must be loaded"),ut(b.loaded,"Font face must be loaded"),ut(b.data,"Font face must be loaded"),ut(b.shaper,"Font face must be loaded");const $=S/b.data.info.size,j=a/$,ne=g/$,X=m/$,K=v[f],ee=(K==null?void 0:K.codepointIndex)||0,de=(K==null?void 0:K.maxX)||0,k=(K==null?void 0:K.maxY)||0;let V=de,Q=k,se=o,J=i,te=0;const W={codepointIndex:-1,bufferOffset:-1,xStart:-1},Z=b.shaper,ce={letterSpacing:X};u.endsWith(" ")&&(u+=" ");let xe=Z.shapeText(ce,new Rl(Ll(u,ee),ee)),ge,pe=-1;const Ee=[],Re=x/$,z=kR(B,ce,Z);let Me=!0;for(;Me;){const ye=(G===0||f+1<G)&&(y!=="both"||O||J+j+b.maxCharHeight<=Re),Ue=ye?ne:ne-z;let De=0;const We=J+b.maxCharHeight>=M.y1,Xe=J<=M.y2,ze=We&&Xe;for(;(ge=xe.next())&&!ge.done;){const we=ge.value;if(f===v.length)v.push({codepointIndex:we.cluster,maxY:Q,maxX:V});else if(f>v.length)throw new Error("Unexpected lineCache length");if(we.codepoint===32||we.codepoint===10||we.codepoint===8203?W.codepointIndex!==-1&&(W.codepointIndex=-1,De=se):W.codepointIndex===-1&&(W.codepointIndex=we.cluster,W.bufferOffset=te,W.xStart=De),we.mapped){const et=se+we.xOffset+we.width;if(y!=="none"&&et>=Ue&&W.codepointIndex!==-1&&W.xStart>0)if(ye){xe=Z.shapeText(ce,new Rl(Ll(u,W.codepointIndex),W.codepointIndex)),te=W.bufferOffset;break}else xe=Z.shapeText(ce,new Rl(Ll(B,0),0)),se=W.xStart,te=W.bufferOffset,y="none";else{const Je=se+we.xOffset,Ze=J+we.yOffset;if(ze){pe===-1&&(pe=te);const ot=b.getAtlasEntry(we.glyphId),St=ot.x/b.data.common.scaleW,lt=ot.y/b.data.common.scaleH,It=ot.width/b.data.common.scaleW,je=ot.height/b.data.common.scaleH;C[te++]=Je,C[te++]=Ze,C[te++]=St,C[te++]=lt,C[te++]=Je+we.width,C[te++]=Ze,C[te++]=St+It,C[te++]=lt,C[te++]=Je,C[te++]=Ze+we.height,C[te++]=St,C[te++]=lt+je,C[te++]=Je+we.width,C[te++]=Ze+we.height,C[te++]=St+It,C[te++]=lt+je}Q=Math.max(Q,Ze+we.height),V=Math.max(V,Je+we.width),se+=we.xAdvance}}else if(we.codepoint===10){if(ye)break;xe=Z.shapeText(ce,new Rl(Ll(B,0),0)),y="none"}}pe!==-1&&(Ee.push({bufferStart:pe,bufferEnd:te}),pe=-1),se=0,J+=j,f++,W.codepointIndex=-1,De=0,!_&&y==="both"&&J>M.y2||ge&&ge.done?Me=!1:ye||(Me=!1)}if(h==="center"){const ye=y==="none"?V:ne;for(let Ue=0;Ue<Ee.length;Ue++){const De=Ee[Ue],We=C[De.bufferEnd-4]-C[De.bufferStart],Xe=(ye-We)/2;for(let ze=De.bufferStart;ze<De.bufferEnd;ze+=4)C[ze]+=Xe}}else if(h==="right"){const ye=y==="none"?V:ne;for(let Ue=0;Ue<Ee.length;Ue++){const De=Ee[Ue],We=De.bufferEnd===De.bufferStart?0:C[De.bufferEnd-4]-C[De.bufferStart],Xe=ye-We;for(let ze=De.bufferStart;ze<De.bufferEnd;ze+=4)C[ze]+=Xe}}return ut(ge),{bufferNumFloats:te,bufferNumQuads:te/16,layoutNumCharacters:ge.done?u.length-ee:ge.value.cluster-ee+1,fullyProcessed:!!ge.done,maxX:V,maxY:Q,numLines:v.length}}function IR(f,o){return Math.ceil(f/o)*o}function MR(f,o){return Math.floor(f/o)*o}function _R(f,o,i,u,h,g,x,S){const{screen:a,sdf:m}=f;if(!A_(x))a.x1=0,a.y1=0,a.x2=0,a.y2=0,m.x1=0,m.y1=0,m.x2=0,m.y2=0,f.numLines=0,f.firstLineIdx=0;else{const C=x.x1-o,y=C+(x.x2-x.x1),v=x.y1-i+u,M=MR(v-g,h||1),b=IR(v+(x.y2-x.y1)+g,h||1);a.x1=C,a.y1=M,a.x2=y,a.y2=b,m.x1=C/S,m.y1=M/S,m.x2=y/S,m.y2=b/S,f.numLines=Math.ceil((b-M)/h),f.firstLineIdx=h?Math.floor(M/h):0}f.valid=!0}function fT(f,o){return o*(f.ascender-f.descender+f.lineGap)}const RR={x:0,y:0,width:0,height:0};class LR extends gg{constructor(i){super(i);P(this,"ssdfFontFamilies",{});P(this,"msdfFontFamilies",{});P(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);P(this,"sdfShader");P(this,"rendererBounds");P(this,"type","sdf");this.sdfShader=this.stage.shManager.loadShader("SdfShader",{transform:new Float32Array,color:0,size:0,scrollY:0,distanceRange:0,debug:!1}).shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(i,u)=>{i.props.fontFamily=u,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontWeight:(i,u)=>{i.props.fontWeight=u,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStyle:(i,u)=>{i.props.fontStyle=u,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontStretch:(i,u)=>{i.props.fontStretch=u,this.releaseFontFace(i),this.invalidateLayoutCache(i)},fontSize:(i,u)=>{i.props.fontSize=u,this.invalidateLayoutCache(i)},text:(i,u)=>{i.props.text=u,this.invalidateLayoutCache(i)},textAlign:(i,u)=>{i.props.textAlign=u,this.invalidateLayoutCache(i)},color:(i,u)=>{i.props.color=u},x:(i,u)=>{i.props.x=u,i.elementBounds.valid&&(this.setElementBoundsX(i),!i.renderWindow.valid&&Mm(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},y:(i,u)=>{i.props.y=u,i.elementBounds.valid&&(this.setElementBoundsY(i),!i.renderWindow.valid&&Mm(i.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(i))},contain:(i,u)=>{i.props.contain=u,this.invalidateLayoutCache(i)},width:(i,u)=>{i.props.width=u,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,u)=>{i.props.height=u,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,u)=>{i.props.offsetY=u,this.invalidateLayoutCache(i)},scrollable:(i,u)=>{i.props.scrollable=u,this.invalidateLayoutCache(i)},scrollY:(i,u)=>{i.props.scrollY=u,this.scheduleUpdateState(i)},letterSpacing:(i,u)=>{i.props.letterSpacing=u,this.invalidateLayoutCache(i)},lineHeight:(i,u)=>{i.props.lineHeight=u,i.resLineHeight=void 0,this.invalidateLayoutCache(i)},maxLines:(i,u)=>{i.props.maxLines=u,this.invalidateLayoutCache(i)},textBaseline:(i,u)=>{i.props.textBaseline=u,this.invalidateLayoutCache(i)},verticalAlign:(i,u)=>{i.props.verticalAlign=u,this.invalidateLayoutCache(i)},overflowSuffix:(i,u)=>{i.props.overflowSuffix=u,this.invalidateLayoutCache(i)},debug:(i,u)=>{i.props.debug=u}}}canRenderFont(i){const{fontFamily:u}=i;return u in this.ssdfFontFamilies||u in this.msdfFontFamilies||u==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(i){return i instanceof og}addFontFace(i){ut(i instanceof og);const u=i.fontFamily,h=i.type==="ssdf"?this.ssdfFontFamilies:i.type==="msdf"?this.msdfFontFamilies:void 0;if(!h){console.warn(`Invalid font face type: ${i.type}`);return}let g=h[u];g||(g=new Set,h[u]=g),g.add(i)}createState(i){return{props:i,status:"initialState",updateScheduled:!1,emitter:new Cr,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(i){let{trFontFace:u}=i;const{textH:h,lineCache:g,debugData:x,forceFullLayoutCalc:S}=i;if(x.updateCount++,i.status==="initialState"&&this.setStatus(i,"loading"),u===void 0){if(u=this.resolveFontFace(i.props),i.trFontFace=u,u===void 0){const Z=`SdfTextRenderer: Could not resolve font face for family: '${i.props.fontFamily}'`;console.error(Z),this.setStatus(i,"failed",new Error(Z));return}u.texture.setRenderableOwner(i,!0)}if(u.loaded===!1){u.once("loaded",()=>{this.scheduleUpdateState(i)});return}ut(u.data,"Font face data should be loaded"),ut(u.metrics,"Font face metrics should be loaded");const{text:a,fontSize:m,x:C,y,contain:v,width:M,height:b,verticalAlign:_,scrollable:O,overflowSuffix:B,maxLines:G}=i.props,$=v==="both"&&O?i.props.scrollY:0,{renderWindow:j}=i,ne=u.data.info.size,X=m/ne;let K=i.resLineHeight;if(K===void 0){const Z=i.props.lineHeight;Z===void 0?K=fT(u.metrics,m):K=Z,i.resLineHeight=K}const ee=K/X;i.distanceRange=X*u.data.distanceField.distanceRange;const de=a.length*bR;let k=i.vertexBuffer;(!k||k.length<de)&&(k=new Float32Array(de*2));const V=i.elementBounds;if(V.valid||(this.setElementBoundsX(i),this.setElementBoundsY(i),V.valid=!0),!S&&j.valid){const Z=j.screen;if(C+Z.x1<=V.x1&&C+Z.x2>=V.x2&&y-$+Z.y1<=V.y1&&y-$+Z.y2>=V.y2){this.setStatus(i,"loaded");return}j.valid=!1,this.setStatus(i,"loading")}const{offsetY:Q,textAlign:se}=i.props;if(!j.valid){if(!Mm(V,this.rendererBounds))return;_R(j,C,y,$,K,v==="both"?V.y2-V.y1:0,V,X)}const J=ER(ne,ee,u,_,Q,X,j,g,h);if(!J){this.setStatus(i,"loaded");return}const{letterSpacing:te}=i.props,W=AR(J.lineIndex,J.sdfX,J.sdfY,a,se,M,b,m,K,te,k,v,g,j.sdf,u,S,O,B,G);i.bufferUploaded=!1,i.bufferNumFloats=W.bufferNumFloats,i.bufferNumQuads=W.bufferNumQuads,i.vertexBuffer=k,i.renderWindow=j,x.lastLayoutNumCharacters=W.layoutNumCharacters,x.bufferSize=k.byteLength,W.fullyProcessed&&(i.textW=W.maxX*X,i.textH=W.numLines*ee*X),this.setStatus(i,"loaded")}renderQuads(i,u,h,g,x,S){var V,Q;if(!i.vertexBuffer)return;const a=this.stage.renderer;ut(a instanceof yg);const{fontSize:m,color:C,contain:y,scrollable:v,zIndex:M,debug:b}=i.props,_=y==="both"&&v?i.props.scrollY:0,{textW:O=0,textH:B=0,distanceRange:G,vertexBuffer:$,bufferUploaded:j,trFontFace:ne,elementBounds:X}=i;let{webGlBuffers:K}=i;if(!K){const se=a.glw,J=4*Float32Array.BYTES_PER_ELEMENT,te=se.createBuffer();ut(te),i.webGlBuffers=new lT([{buffer:te,attributes:{a_position:{name:"a_position",size:2,type:se.FLOAT,normalized:!1,stride:J,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:se.FLOAT,normalized:!1,stride:J,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),i.bufferUploaded=!1,ut(i.webGlBuffers),K=i.webGlBuffers}if(!j){const se=a.glw,J=(K==null?void 0:K.getBuffer("a_textureCoordinate"))??null;se.arrayBufferData(J,$,se.STATIC_DRAW),i.bufferUploaded=!0}if(ut(ne),v&&y==="both"){ut(X.valid);const se=b_(X,RR);h.valid?(i.clippingRect.valid=!0,h=YC(h,se,i.clippingRect)):(i.clippingRect.valid=!0,h=QC(se,i.clippingRect))}const ee=new uT(a.glw,a.options,K,this.sdfShader,{transform:u.getFloatArr(),color:x_(C,g),size:m/(((V=ne.data)==null?void 0:V.info.size)||0),scrollY:_,distanceRange:G,debug:b.sdfShaderDebug},g,h,{height:B,width:O},0,M,!1,x,S),de=(Q=i.trFontFace)==null?void 0:Q.texture;ut(de);const k=de.ctxTexture;ee.addTexture(k),ee.length=i.bufferNumFloats,ee.numQuads=i.bufferNumQuads,a.addRenderOp(ee)}setIsRenderable(i,u){var h;super.setIsRenderable(i,u),(h=i.trFontFace)==null||h.texture.setRenderableOwner(i,u)}destroyState(i){var u;super.destroyState(i),(u=i.trFontFace)==null||u.texture.setRenderableOwner(i,!1)}resolveFontFace(i){return this.stage.fontManager.resolveFontFace(this.fontFamilyArray,i,"sdf")}releaseFontFace(i){i.resLineHeight=void 0,i.trFontFace&&(i.trFontFace.texture.setRenderableOwner(i,!1),i.trFontFace=void 0)}invalidateLayoutCache(i){i.renderWindow.valid=!1,i.elementBounds.valid=!1,i.textH=void 0,i.textW=void 0,i.lineCache=[],this.setStatus(i,"loading"),this.scheduleUpdateState(i)}setElementBoundsX(i){const{x:u,contain:h,width:g}=i.props,{elementBounds:x}=i;x.x1=u,x.x2=h!=="none"?u+g:1/0}setElementBoundsY(i){const{y:u,contain:h,height:g}=i.props,{elementBounds:x}=i;x.y1=u,x.y2=h==="both"?u+g:1/0}}function aC(f){return f===""||f==="​"}function DR(f,o,i){if(o.metrics)return o.metrics;const u=f.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");console.warn(`Font metrics not provided for Canvas Web font ${o.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`);let h;return u.actualBoundingBoxDescent&&u.actualBoundingBoxAscent?h={ascender:u.actualBoundingBoxAscent/i,descender:-u.actualBoundingBoxDescent/i,lineGap:.2}:h={ascender:.8,descender:-.2,lineGap:.2},o.metrics=h,h}const uC=2048;function lC(f,o,i,u,h){const g=f!=="bottom"?.5*o:0;return i*(u-1)+g+Math.max(i,o)+(h||0)}class PR{constructor(o,i){P(this,"_canvas");P(this,"_context");P(this,"_settings");this._canvas=o,this._context=i,this._settings=this.mergeDefaults({})}set settings(o){this._settings=this.mergeDefaults(o)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const o=[this._settings.fontFamily],i=[];for(let u=0,h=o.length;u<h;u++)o[u]==="serif"||o[u]==="sans-serif"?i.push(o[u]):i.push(`"${o[u]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${i.join(",")}`}_load(){if(document.fonts){const o=this._getFontSetting();try{if(!document.fonts.check(o,this._settings.text))return document.fonts.load(o,this._settings.text).catch(i=>{console.warn("[Lightning] Font load error",i,o)}).then(()=>{document.fonts.check(o,this._settings.text)||console.warn("[Lightning] Font not found",o)})}catch{console.warn("[Lightning] Can't check font loading for "+o)}}}calculateRenderInfo(){const o={},i=this.getPrecision(),u=this._settings.paddingLeft*i,h=this._settings.paddingRight*i,g=this._settings.fontSize*i;let x=this._settings.offsetY===null?null:this._settings.offsetY*i;const S=this._settings.w*i,a=this._settings.h*i;let m=this._settings.wordWrapWidth*i;const C=this._settings.cutSx*i,y=this._settings.cutEx*i,v=this._settings.cutSy*i,M=this._settings.cutEy*i,b=(this._settings.letterSpacing||0)*i,_=this._settings.textIndent*i,O=this._settings.trFontFace;this.setFontProperties(),ut(O);const B=DR(this._context,O,g),G=fT(B,g)*i,$=this._settings.lineHeight!==null?this._settings.lineHeight*i:G,j=this._settings.maxHeight,ne=j!==null&&$>0?Math.floor(j/$):0,X=this._settings.maxLines,K=ne>0&&X>0?Math.min(ne,X):Math.max(ne,X);let ee=S||2048/this.getPrecision(),de=ee-u;if(de<10&&(ee+=10-de,de=10),m||(m=de),this._settings.textOverflow&&!this._settings.wordWrap){let te;switch(this._settings.textOverflow){case"clip":te="";break;case"ellipsis":te=this._settings.overflowSuffix;break;default:te=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,m-_,te)}let k;if(this._settings.wordWrap)k=this.wrapText(this._settings.text,m,b,_);else{k={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const te=k.l.length;for(let W=0;W<te-1;W++)k.n.push(W)}let V=k.l;if(K&&V.length>K){const te=V.slice(0,K);let W=null;if(this._settings.overflowSuffix){const pe=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,Ee=this.wrapText(te[te.length-1],m-pe,b,_);te[te.length-1]=`${Ee.l[0]}${this._settings.overflowSuffix}`,W=[Ee.l.length>1?Ee.l[1]:""]}else W=[""];let Z;const ce=V.length;let xe=0;const ge=k.n.length;for(Z=K;Z<ce;Z++)W[xe]+=`${W[xe]?" ":""}${V[Z]}`,Z+1<ge&&k.n[Z+1]&&xe++;o.remainingText=W.join(`
`),o.moreTextLines=!0,V=te}else o.moreTextLines=!1,o.remainingText="";let Q=0;const se=[];for(let te=0;te<V.length;te++){const W=this.measureText(V[te],b)+(te===0?_:0);se.push(W),Q=Math.max(Q,W)}o.lineWidths=se,S||(ee=Q+u+h,de=Q),this._settings.wordWrap&&S>Q&&this._settings.textAlign==="left"&&V.length===1&&(ee=Q+u+h);let J;return a?J=a:J=lC(this._settings.textBaseline,g,$,V.length,x),x===null&&(x=g),o.w=ee,o.h=J,o.lines=V,o.precision=i,ee||(ee=1),J||(J=1),(C||y)&&(ee=Math.min(ee,y-C)),(v||M)&&(J=Math.min(J,M-v)),o.width=ee,o.innerWidth=de,o.height=J,o.fontSize=g,o.cutSx=C,o.cutSy=v,o.cutEx=y,o.cutEy=M,o.lineHeight=$,o.defLineHeight=G,o.lineWidths=se,o.offsetY=x,o.paddingLeft=u,o.paddingRight=h,o.letterSpacing=b,o.textIndent=_,o.metrics=B,o}draw(o,i){const u=this.getPrecision(),h=(i==null?void 0:i.lines)||o.lines,g=(i==null?void 0:i.lineWidths)||o.lineWidths,x=i?lC(this._settings.textBaseline,o.fontSize,o.lineHeight,i.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*u):o.height;this._canvas.width=Math.min(Math.ceil(o.width+this._settings.textRenderIssueMargin),uC),this._canvas.height=Math.min(Math.ceil(x),uC),this.setFontProperties(),o.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(o.cutSx||o.cutSy)&&this._context.translate(-o.cutSx,-o.cutSy);let S,a;const m=[],{metrics:C}=o,y=C?C.ascender*o.fontSize:o.fontSize,v=(C.ascender-C.descender)*o.fontSize;for(let b=0,_=h.length;b<_;b++)S=b===0?o.textIndent:0,a=b*o.lineHeight+y,this._settings.verticalAlign=="middle"?a+=(o.lineHeight-v)/2:this._settings.verticalAlign=="bottom"&&(a+=o.lineHeight-v),this._settings.textAlign==="right"?S+=o.innerWidth-g[b]:this._settings.textAlign==="center"&&(S+=(o.innerWidth-g[b])/2),S+=o.paddingLeft,m.push({text:h[b],x:S,y:a,w:g[b]});if(this._settings.highlight){const b=this._settings.highlightColor,_=this._settings.highlightHeight*u||o.fontSize*1.5,O=this._settings.highlightOffset*u,B=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*u:o.paddingLeft,G=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*u:o.paddingRight;this._context.fillStyle=Im(b);for(let $=0;$<m.length;$++){const j=m[$];this._context.fillRect(j.x-B,j.y-o.offsetY+O,j.w+G+B,_)}}let M=null;this._settings.shadow&&(M=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Im(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*u,this._context.shadowOffsetY=this._settings.shadowOffsetY*u,this._context.shadowBlur=this._settings.shadowBlur*u),this._context.fillStyle=Im(this._settings.textColor);for(let b=0,_=m.length;b<_;b++){const O=m[b];if(o.letterSpacing===0)this._context.fillText(O.text,O.x,O.y);else{const B=O.text.split("");let G=O.x;for(let $=0,j=B.length;$<j;$++)this._context.fillText(B[$],G,O.y),G+=this.measureText(B[$],o.letterSpacing)}}M&&(this._context.shadowColor=M[0],this._context.shadowOffsetX=M[1],this._context.shadowOffsetY=M[2],this._context.shadowBlur=M[3]),(o.cutSx||o.cutSy)&&this._context.translate(o.cutSx,o.cutSy)}wrapWord(o,i,u){const h=this._context.measureText(u).width,g=o.length,x=this._context.measureText(o).width;if(x<=i)return o;let S=Math.floor(i*g/x),a=this._context.measureText(o.substring(0,S)).width+h;if(a>i)for(;S>0&&(a=this._context.measureText(o.substring(0,S)).width+h,a>i);)S-=1;else for(;S<g;)if(a=this._context.measureText(o.substring(0,S)).width+h,a<i)S+=1;else{S-=1;break}return o.substring(0,S)+(i>=h?u:"")}wrapText(o,i,u,h=0){const g=/ |\u200B/g,x=o.split(/\r?\n/g);let S=[];const a=[];for(let m=0;m<x.length;m++){const C=[];let y="",v=i-h;const M=x[m].split(g),b=x[m].match(g)||[];for(let _=0;_<M.length;_++){const O=b[_-1]||"",B=M[_],G=this.measureText(B,u),$=aC(O)?G:G+this.measureText(O,u);_===0||$>v?(_>0&&(C.push(y),y=""),y+=B,v=i-G-(_===0?h:0)):(v-=$,y+=O+B)}C.push(y),y="",S=S.concat(C),m<x.length-1&&a.push(S.length)}return{l:S,n:a}}measureText(o,i=0){return i?o.split("").reduce((u,h)=>aC(h)?u:u+this._context.measureText(h).width+i,0):this._context.measureText(o).width}mergeDefaults(o){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...o}}}const fC=typeof self>"u"?globalThis:self;var VC;const cC=((VC=fC.document)==null?void 0:VC.fonts)||fC.fonts;function OR(f){const{fontFamily:o,fontStyle:i,fontWeight:u,fontStretch:h,fontSize:g}=f;return[i,u,h,`${g}px`,o].join(" ")}class hC extends gg{constructor(i){super(i);P(this,"canvas");P(this,"context");P(this,"fontFamilies",{});P(this,"fontFamilyArray",[this.fontFamilies]);P(this,"type","canvas");P(this,"loadFont",i=>{const u=OR(i.props),h=this.stage.fontManager.resolveFontFace(this.fontFamilyArray,i.props,"canvas");if(ut(h,`Could not resolve font face for ${u}`),i.fontInfo={fontFace:h,cssString:u,loaded:!1},!i.fontInfo.loaded){cC.load(u).then(this.onFontLoaded.bind(this,i,u)).catch(this.onFontLoadError.bind(this,i,u));return}});typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let u=this.canvas.getContext("2d",{willReadFrequently:!0});u||(this.canvas=document.createElement("canvas"),u=this.canvas.getContext("2d",{willReadFrequently:!0})),ut(u),this.context=u,this.addFontFace(new Fh({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(i,u)=>{i.props.fontFamily=u,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontWeight:(i,u)=>{i.props.fontWeight=u,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStyle:(i,u)=>{i.props.fontStyle=u,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontStretch:(i,u)=>{i.props.fontStretch=u,i.fontInfo=void 0,this.invalidateLayoutCache(i)},fontSize:(i,u)=>{i.props.fontSize=u,i.fontInfo=void 0,this.invalidateLayoutCache(i)},text:(i,u)=>{i.props.text=u,this.invalidateLayoutCache(i)},textAlign:(i,u)=>{i.props.textAlign=u,this.invalidateLayoutCache(i)},color:(i,u)=>{i.props.color=u,this.invalidateLayoutCache(i)},x:(i,u)=>{i.props.x=u},y:(i,u)=>{i.props.y=u},contain:(i,u)=>{i.props.contain=u,this.invalidateLayoutCache(i)},width:(i,u)=>{i.props.width=u,i.props.contain!=="none"&&this.invalidateLayoutCache(i)},height:(i,u)=>{i.props.height=u,i.props.contain==="both"&&this.invalidateLayoutCache(i)},offsetY:(i,u)=>{i.props.offsetY=u,this.invalidateLayoutCache(i)},scrollY:(i,u)=>{i.props.scrollY=u},letterSpacing:(i,u)=>{i.props.letterSpacing=u,this.invalidateLayoutCache(i)},lineHeight:(i,u)=>{i.props.lineHeight=u,this.invalidateLayoutCache(i)},maxLines:(i,u)=>{i.props.maxLines=u,this.invalidateLayoutCache(i)},textBaseline:(i,u)=>{i.props.textBaseline=u,this.invalidateLayoutCache(i)},verticalAlign:(i,u)=>{i.props.verticalAlign=u,this.invalidateLayoutCache(i)},overflowSuffix:(i,u)=>{i.props.overflowSuffix=u,this.invalidateLayoutCache(i)}}}canRenderFont(i){return!0}isFontFaceSupported(i){return i instanceof Fh}addFontFace(i){ut(i instanceof Fh);const u=i.fontFamily;u!=="sans-serif"&&cC.add(i.fontFace);let h=this.fontFamilies[u];h||(h=new Set,this.fontFamilies[u]=h),h.add(i)}createState(i,u){return{node:u,props:i,status:"initialState",updateScheduled:!1,emitter:new Cr,textureNode:void 0,lightning2TextRenderer:new PR(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(i){if(i.status==="initialState"&&this.setStatus(i,"loading"),i.status!=="loaded"){if(!i.fontInfo)return this.loadFont(i);i.fontInfo.loaded&&(i.renderInfo||(i.renderInfo=this.calculateRenderInfo(i),i.textH=i.renderInfo.lineHeight*i.renderInfo.lines.length,i.textW=i.renderInfo.width,this.renderSingleCanvasPage(i)))}}renderSingleCanvasPage(i){ut(i.renderInfo);const u=i.node,h=this.stage.txManager.createTexture("ImageTexture",{premultiplyAlpha:!0,src:(function(g,x){return ut(x),g.draw(x,{lines:x.lines,lineWidths:x.lineWidths}),this.canvas.width===0||this.canvas.height===0?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}).bind(this,i.lightning2TextRenderer,i.renderInfo)});if(i.textureNode)i.textureNode.texture=h,i.textureNode.alpha=eC(i.props.color);else{const g=this.stage.createNode({parent:u,texture:h,autosize:!0,alpha:eC(i.props.color)});i.textureNode=g}this.setStatus(i,"loaded")}calculateRenderInfo(i){var u;return i.lightning2TextRenderer.settings={text:i.props.text,textAlign:i.props.textAlign,fontFamily:i.props.fontFamily,trFontFace:(u=i.fontInfo)==null?void 0:u.fontFace,fontSize:i.props.fontSize,fontStyle:[i.props.fontStretch,i.props.fontStyle,i.props.fontWeight].join(" "),textColor:Gl(i.props.color),offsetY:i.props.offsetY,wordWrap:i.props.contain!=="none",wordWrapWidth:i.props.contain==="none"?void 0:i.props.width,letterSpacing:i.props.letterSpacing,lineHeight:i.props.lineHeight??null,maxLines:i.props.maxLines,maxHeight:i.props.contain==="both"?i.props.height-i.props.offsetY:null,textBaseline:i.props.textBaseline,verticalAlign:i.props.verticalAlign,overflowSuffix:i.props.overflowSuffix,w:i.props.contain!=="none"?i.props.width:void 0},i.renderInfo=i.lightning2TextRenderer.calculateRenderInfo(),i.renderInfo}renderQuads(){}destroyState(i){i.status!=="destroyed"&&(super.destroyState(i),i.textureNode&&(i.textureNode.destroy(),delete i.textureNode),delete i.renderInfo)}invalidateLayoutCache(i){i.renderInfo=void 0,this.setStatus(i,"loading"),this.scheduleUpdateState(i)}onFontLoaded(i,u){var h;u!==((h=i.fontInfo)==null?void 0:h.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,this.scheduleUpdateState(i))}onFontLoadError(i,u,h){var g;u!==((g=i.fontInfo)==null?void 0:g.cssString)||!i.fontInfo||(i.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${i.fontInfo.cssString}'`,h),this.scheduleUpdateState(i))}}const cT={isWhite:!0,a:1,r:255,g:255,b:255};function Pm(f){if(f===4294967295)return cT;const o=(f>>>24&255)/255,i=f>>>16&255&255,u=f>>>8&255&255,h=f&255&255;return{isWhite:!1,a:o,r:h,g:u,b:i}}function hT(f){if(f===4294967295)return cT;const o=f>>>24&255,i=f>>>16&255&255,u=f>>>8&255&255,h=(f&255&255)/255;return{isWhite:!1,r:o,g:i,b:u,a:h}}function qa({a:f,r:o,g:i,b:u}){return`rgba(${o},${i},${u},${f})`}class NR extends rT{constructor(){super(...arguments);P(this,"image");P(this,"tintCache")}load(){this.textureSource.setState("loading"),this.onLoadRequest().then(i=>{this.textureSource.setState("loaded",i),this.textureSource.freeTextureData(),this.updateMemSize()}).catch(i=>{this.textureSource.setState("failed",i),this.textureSource.freeTextureData()})}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0),this.textureSource.freeTextureData()}updateMemSize(){const i=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:u,height:h}=this.textureSource.dimensions;this.setTextureMemUse(u*h*i)}}hasImage(){return this.image!==void 0}getImage(i){var x;const u=this.image;if(ut(u,"Attempt to get unloaded image texture"),i.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),u;const h=qa(i);if(((x=this.tintCache)==null?void 0:x.key)===h)return this.tintCache.image;const g=this.tintTexture(u,h);return this.tintCache={key:h,image:g},this.updateMemSize(),g}tintTexture(i,u){const{width:h,height:g}=i,x=document.createElement("canvas");x.width=h,x.height=g;const S=x.getContext("2d");return S&&(S.fillStyle=u,S.globalCompositeOperation="copy",S.fillRect(0,0,h,g),S.globalCompositeOperation="multiply",S.drawImage(i,0,0,h,g,0,0,h,g),S.globalCompositeOperation="destination-in",S.drawImage(i,0,0,h,g,0,0,h,g)),x}async onLoadRequest(){var u,h;ut((h=(u=this.textureSource)==null?void 0:u.textureData)==null?void 0:h.data,"Texture data is null");const{data:i}=this.textureSource.textureData;if(i instanceof ImageData){const g=document.createElement("canvas");g.width=i.width,g.height=i.height;const x=g.getContext("2d");return x&&x.putImageData(i,0,0),this.image=g,{width:i.width,height:i.height}}else if(typeof ImageBitmap<"u"&&i instanceof ImageBitmap||i instanceof HTMLImageElement)return this.image=i,{width:i.width,height:i.height};return{width:0,height:0}}}function UR(f){var o,i;if(f.shader instanceof ud){const u=f.shader.shType;if(u===eR)return((o=f.shaderProps)==null?void 0:o.radius)??0;if(u==="DynamicShader"){const h=(i=f.shaderProps)==null?void 0:i.effects;if(h){const g=h.find(x=>{var S;return x.type==="radius"&&((S=x==null?void 0:x.props)==null?void 0:S.radius)});return g&&g.type==="radius"&&g.props.radius||0}}}return 0}function Sl(f,o=""){var i;if(f.shader instanceof ud&&f.shader.shType==="DynamicShader"){const h=(i=f.shaderProps)==null?void 0:i.effects;if(h&&h.length){const g=h.find(x=>x.type===`border${o}`&&x.props&&x.props.width);return g&&g.props}}}function dC(f,o,i,u,h){if(Object.getPrototypeOf(this).roundRect)this.roundRect(f,o,i,u,h);else{const x=a=>{const m=Math.min(i/2,u/2),C=a.topLeft+a.topRight+a.bottomRight+a.bottomLeft;if(C>i||C>u){const y=m/Math.max(a.topLeft,a.topRight,a.bottomRight,a.bottomLeft);a.topLeft*=y,a.topRight*=y,a.bottomRight*=y,a.bottomLeft*=y}},S=typeof h=="number"?{topLeft:h,topRight:h,bottomRight:h,bottomLeft:h}:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0,...h};x(S),this.moveTo(f+S.topLeft,o),this.lineTo(f+i-S.topRight,o),this.ellipse(f+i-S.topRight,o+S.topRight,S.topRight,S.topRight,0,1.5*Math.PI,2*Math.PI),this.lineTo(f+i,o+u-S.bottomRight),this.ellipse(f+i-S.bottomRight,o+u-S.bottomRight,S.bottomRight,S.bottomRight,0,0,.5*Math.PI),this.lineTo(f+S.bottomLeft,o+u),this.ellipse(f+S.bottomLeft,o+u-S.bottomLeft,S.bottomLeft,S.bottomLeft,0,.5*Math.PI,Math.PI),this.lineTo(f,o+S.topLeft),this.ellipse(f+S.topLeft,o+S.topLeft,S.topLeft,S.topLeft,0,Math.PI,1.5*Math.PI)}}function Ih(f,o,i,u,h,g=0,x,S){if(!g)return;let a,m=0,C,y=0;switch(S){case"Top":a=o,m=i,C=u+o,y=i;break;case"Right":a=o+u,m=i,C=o+u,y=i+h;break;case"Bottom":a=o,m=i+h,C=o+u,y=i+h;break;case"Left":a=o,m=i,C=o,y=i+h;break}f.beginPath(),f.lineWidth=g,f.strokeStyle=qa(hT(x??0)),f.moveTo(a,m),f.lineTo(C,y),f.stroke()}class BR extends sT{constructor(i){super(i);P(this,"context");P(this,"canvas");P(this,"pixelRatio");P(this,"clearColor");P(this,"renderToTextureActive",!1);P(this,"activeRttNode",null);P(this,"defShaderCtr");this.mode="canvas",this.shManager.renderer=this;const{canvas:u,pixelRatio:h,clearColor:g}=i;this.canvas=u,this.context=u.getContext("2d"),this.pixelRatio=h,this.clearColor=g?JS(g):void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new ud("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;const i=this.context;if(this.clearColor){const[u,h,g,x]=this.clearColor;i.fillStyle=`rgba(${u}, ${h}, ${g}, ${x/255})`,i.fillRect(0,0,this.canvas.width,this.canvas.height)}i.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(i){const u=this.context,{tx:h,ty:g,width:x,height:S,alpha:a,colorTl:m,colorTr:C,colorBr:y,ta:v,tb:M,tc:b,td:_,clippingRect:O}=i;let B=i.texture,G,$;const j=B==null?void 0:B.type;if(ut(j,"Texture type is not defined"),j!==_n.image&&j!==_n.color&&j!==_n.subTexture&&j!==_n.noise||B&&(B instanceof zl&&($=B.props,B=B.parentTexture),G=B.ctxTexture,B.state==="freed"||B.state!=="loaded"))return;const ne=Pm(m),X=v!==1,K=O.width!==0&&O.height!==0,ee=m!==C||m!==y,de=!!i.shader,k=de?UR(i):0,V=de?Sl(i):void 0;if((X||K||k)&&u.save(),K){const Q=new Path2D,{x:se,y:J,width:te,height:W}=O;Q.rect(se,J,te,W),u.clip(Q)}if(X){const Q=this.pixelRatio;u.setTransform(v,b,M,_,h*Q,g*Q),u.scale(Q,Q),u.translate(-h,-g)}if(k){const Q=new Path2D;dC.call(Q,h,g,x,S,k),u.clip(Q)}if((j===_n.image||j===_n.subTexture||j===_n.noise)&&G){const Q=G.getImage(ne);if(u.globalAlpha=ne.a??a,$)u.drawImage(Q,$.x,$.y,$.width,$.height,h,g,x,S);else try{u.drawImage(Q,h,g,x,S)}catch{}u.globalAlpha=1}else if(j===_n.color&&ee){let Q=h,se=g,J;m===C?(Q=h,se=g+S,J=Pm(y)):(Q=h+x,se=g,J=Pm(C));const te=u.createLinearGradient(h,g,Q,se);te.addColorStop(0,qa(ne)),te.addColorStop(1,qa(J)),u.fillStyle=te,u.fillRect(h,g,x,S)}else j===_n.color&&(u.fillStyle=qa(ne),u.fillRect(h,g,x,S));if(V&&V.width){const Q=V.width,se=V.width/2,J=qa(hT(V.color??0));u.beginPath(),u.lineWidth=Q,u.strokeStyle=J,u.globalAlpha=a,k?(dC.call(u,h+se,g+se,x-Q,S-Q,k),u.stroke()):u.strokeRect(h+se,g+se,x-Q,S-Q),u.globalAlpha=1}else if(de){const Q=Sl(i,"Top"),se=Sl(i,"Right"),J=Sl(i,"Bottom"),te=Sl(i,"Left");Q&&Ih(u,h,g,x,S,Q.width,Q.color,"Top"),se&&Ih(u,h,g,x,S,se.width,se.color,"Right"),J&&Ih(u,h,g,x,S,J.width,J.color,"Bottom"),te&&Ih(u,h,g,x,S,te.width,te.color,"Left")}(X||K||k)&&u.restore()}createCtxTexture(i){return new NR(this.txMemManager,i)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(i){}renderToTexture(i){}getBufferInfo(){return null}getQuadCount(){return null}updateClearColor(i){this.clearColor=i?JS(i):void 0}}const Dl={alpha:f=>f===1?null:{prop:"opacity",value:`${f}`},x:f=>({prop:"left",value:`${f}px`}),y:f=>({prop:"top",value:`${f}px`}),width:f=>f===0?null:{prop:"width",value:`${f}px`},height:f=>f===0?null:{prop:"height",value:`${f}px`},fontSize:f=>f===0?null:{prop:"font-size",value:`${f}px`},lineHeight:f=>f===0?null:{prop:"line-height",value:`${f}px`},zIndex:()=>"z-index",fontFamily:()=>"font-family",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:f=>f===!1?null:{prop:"overflow",value:f?"hidden":"visible"},rotation:f=>f===0?null:{prop:"transform",value:`rotate(${f}rad)`},scale:f=>f===1?null:{prop:"transform",value:`scale(${f})`},scaleX:f=>f===1?null:{prop:"transform",value:`scaleX(${f})`},scaleY:f=>f===1?null:{prop:"transform",value:`scaleY(${f})`},color:f=>f===0?null:{prop:"color",value:dT(f)}},dT=f=>{const o=(f&255)/255,i=f>>8&255,u=f>>16&255;return`rgba(${f>>24&255},${u},${i},${o})`},rg={id:"test-id"},jR=new Set([...Object.keys(Dl),...Object.keys(rg),"src","parent","data"]);class FR{constructor(o,i){P(this,"root",null);P(this,"canvas",null);P(this,"height",1080);P(this,"width",1920);P(this,"scaleX",1);P(this,"scaleY",1);if(tu())return;if(!i)throw new Error("settings is required");this.height=Math.ceil(i.appHeight??1080/(i.deviceLogicalPixelRatio??1)),this.width=Math.ceil(i.appWidth??1920/(i.deviceLogicalPixelRatio??1)),this.scaleX=i.deviceLogicalPixelRatio??1,this.scaleY=i.deviceLogicalPixelRatio??1,this.canvas=o,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(o,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(o),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const o=this.canvas.getBoundingClientRect(),i=document.documentElement.scrollTop+o.top,u=document.documentElement.scrollLeft+o.left;this.root.id="root",this.root.style.left=`${u}px`,this.root.style.top=`${i}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(o,i){const u=document.createElement("div");u.style.position="absolute",u.id=o.toString();for(const h in i)this.updateNodeProperty(u,h,i[h],i);return u}createNode(o){const i=this.createDiv(o.id,o.props);return i.node=o,o.div=i,o.on("inViewport",()=>i.setAttribute("state","inViewport")),o.on("inBounds",()=>i.setAttribute("state","inBounds")),o.on("outOfBounds",()=>i.setAttribute("state","outOfBounds")),this.createProxy(o,i)}createTextNode(o){const i=this.createDiv(o.id,o.props);return i.node=o,o.div=i,this.createProxy(o,i)}createProxy(o,i){jR.forEach(g=>{let x=Object.getOwnPropertyDescriptor(o,g);if(x===void 0){const S=Object.getPrototypeOf(o);x=Object.getOwnPropertyDescriptor(S,g)}x!==void 0&&Object.defineProperty(o,g,{get(){var S;return(S=x==null?void 0:x.get)==null?void 0:S.call(o)},set:S=>{var a;(a=x==null?void 0:x.set)==null||a.call(o,S),this.updateNodeProperty(i,g,S,o.props)},configurable:!0,enumerable:!0})});const u=o.destroy;Object.defineProperty(o,"destroy",{value:()=>{this.destroyNode(o.id),u.call(o)}});const h=o.animate;return Object.defineProperty(o,"animate",{value:(g,x)=>{const S=h.call(o,g,x),a=S.start.bind(S);return S.start=()=>(this.animateNode(i,g,x),a()),S}}),o}destroyNode(o){const i=document.getElementById(o.toString());i==null||i.remove()}updateNodeProperty(o,i,u,h){var g;if(!(this.root===null||u===void 0||u===null)){if(i==="parent"){const x=u.id;if(x===1){this.root.appendChild(o);return}const S=document.getElementById(x.toString());S==null||S.appendChild(o);return}if(i==="text"){o.innerHTML=String(u),o.style.visibility="hidden";return}if(i==="src"&&u){o.setAttribute("data-src",String(u));return}if(i==="rtt"&&u){o.setAttribute("data-rtt",String(u));return}if(Dl[i]){const x=(g=Dl[i])==null?void 0:g.call(Dl,u);if(x===null)return;if(typeof x=="string"){o.style.setProperty(x,String(u));return}if(typeof x=="object"){let S=x.value;if(i==="x"){const a=h.mountX,m=h.width;a&&(S=`${parseInt(S)-m*a}px`)}else if(i==="y"){const a=h.mountY,m=h.height;a&&(S=`${parseInt(S)-m*a}px`)}o.style.setProperty(x.prop,S)}return}if(rg[i]){const x=rg[i];if(!x)return;o.setAttribute(String(x),String(u));return}if(i==="data"){for(const x in u){const S=u[x];S===void 0?o.removeAttribute(`data-${x}`):o.setAttribute(`data-${x}`,String(S))}return}}}animateNode(o,i,u){const{duration:h=1e3,delay:g=0}=u,{x,y:S,width:a,height:m,alpha:C=1,rotation:y=0,scale:v=1,color:M,mountX:b,mountY:_}=i;function O(){setTimeout(()=>{o.style.top=`${S-m*_}px`,o.style.left=`${x-a*b}px`,o.style.width=`${a}px`,o.style.height=`${m}px`,o.style.opacity=`${C}`,o.style.rotate=`${y}rad`,o.style.scale=`${v}`,o.style.color=dT(M)},h)}setTimeout(O,g)}}const pT=50,pC={hd:.66666667,"720p":.66666667,720:.66666667,fhd:1,fullhd:1,"1080p":1,1080:1,"4k":2,"2160p":2,2160:2},$R={low:.66666667,medium:.85,high:1,retina:2},zR=()=>{const f=ko.stage;no.get("fonts",[]).forEach(o=>{o.type==="sdf"||o.type==="msdf"?(!o.png&&o.file&&(o.png=o.file.replace(/\.[^.]+$/,`.${o.type}.png`)),!o.json&&o.file&&(o.json=o.file.replace(/\.[^.]+$/,`.${o.type}.json`)),f.fontManager.addFontFace(new og(o.type,{fontFamily:o.family,descriptors:{},atlasUrl:o.png,atlasDataUrl:o.json,stage:f,metrics:o.metrics}))):o.type==="web"&&f.fontManager.addFontFace(new Fh({fontFamily:o.family,fontUrl:o.file,descriptors:{},metrics:o.metrics}))})},VR=()=>{const f=ko.stage;no.get("shaders",[]).forEach(o=>{f.shManager.registerShaderType(o.name,o.type)}),no.get("effects",[]).forEach(o=>{f.shManager.registerShaderType(o.name,o.type)})};let ko={};const HR=f=>{const o="renderMode"in f?f.renderMode:"webgl";if(o==="webgl")return yg;if(o==="canvas")return BR},GR=f=>{const o="renderMode"in f?f.renderMode:"webgl";if(o==="webgl")return[LR,hC];if(o==="canvas")return[hC]},WR=f=>{const o={max:200,target:.8,cleanupInterval:5e3,baseline:25,strict:!1,..."gpuMemory"in f?f.gpuMemory:{}};return{criticalThreshold:o.max*1024*1024,targetThresholdLevel:o.target,cleanupInterval:o.cleanupInterval,baselineMemoryAllocation:o.baseline*1024*1024,doNotExceedCriticalThreshold:o.strict}},XR=(f,o,i={})=>{ko=new cR({appWidth:i.w||1920,appHeight:i.h||1080,fpsUpdateInterval:i.fpsInterval||1e3,devicePhysicalPixelRatio:$R[i.renderQuality]||i.renderQuality||1,deviceLogicalPixelRatio:i.pixelRatio||pC[i.screenResolution]||pC[window.innerHeight]||1,numImageWorkers:"webWorkersLimit"in i?i.webWorkersLimit:window.navigator.hardwareConcurrency||2,clearColor:i.canvasColor&&Ya.normalize(i.canvasColor)||0,inspector:i.inspector===!0?FR:void 0,boundsMargin:i.viewportMargin||0,renderEngine:HR(i),fontEngines:GR(i),canvas:i.canvas,textureProcessingTimeLimit:i.textureProcessingTimeLimit,textureMemory:WR(i),createImageBitmapSupport:"auto",...i.advanced||{}},o);const u=()=>{let h=f();h.quit=()=>{dn.info("Closing App"),h.destroy(),h=null,ko=null}};return VR(),zR(),u(),ko};let qR=0;const KR=(f,o)=>{if(f===void 0)return{start:0,end:0,oppositeStart:0,oppositeEnd:0};if(typeof f=="number")return{start:f,end:f,oppositeStart:f,oppositeEnd:f};if($r(f)===!0&&(f=zr(f)),typeof f=="object"){const{top:i=void 0,right:u=void 0,bottom:h=void 0,left:g=void 0,x=0,y:S=0}=f;return o==="vertical"?{start:i!==void 0?i:S,end:h!==void 0?h:S,oppositeStart:g!==void 0?g:x,oppositeEnd:u!==void 0?u:x}:{start:g!==void 0?g:x,end:u!==void 0?u:x,oppositeStart:i!==void 0?i:S,oppositeEnd:h!==void 0?h:S}}return{start:0,end:0,oppositeStart:0,oppositeEnd:0}},YR=function(f){const o=f.direction==="vertical"?"y":"x",i=f.direction==="vertical"?"x":"y",u=f.direction==="vertical"?"mountX":"mountY",h=f.direction==="vertical"?"height":"width",g=f.direction==="vertical"?"width":"height",x=KR(f.padding,f.direction);let S=x.start;const a=this.node.children,m=a.length;let C=0;const y=f.gap||0;for(let M=0;M<m;M++){if(this.children[M]!==void 0&&this.children[M].props.raw.show===!1)continue;const b=a[M];b[o]=S,b[i]=x.oppositeStart,h==="width"?S+=b.width+(b.width!==("text"in b?1:0)?y:0):S+="text"in b?b.width>1?b.height+y:0:b.height!==0?b.height+y:0,C=Math.max(C,b[g]+x.oppositeStart+x.oppositeEnd)}this.node[h]=S-y+x.end,this.node[g]=C;const v={start:0,end:1,center:.5}[f["align-items"]||"start"];if(v!==0)for(let M=0;M<m;M++){const b=a[M];b[i]=C*v,b[u]=v}f["@updated"]!==void 0&&f["@updated"]({w:this.node.width,h:this.node.height},this)},mC=f=>f!==null&&typeof f=="object"&&"transition"in f,$r=f=>typeof f=="string"&&f.startsWith("{")&&f.endsWith("}"),zr=f=>JSON.parse(f.replace(/'/g,'"').replace(/([\w-_]+)\s*:/g,'"$1":')),La=function(f,o){return typeof f!="string"?f:f.indexOf("%")===f.length-1?this.element.config.parent&&(this.element.config.parent.node[o]||0)*(parseFloat(f)/100)||0:f},sg=f=>{if(typeof f!="object"||f===null)return f;if(f.constructor===Object){if("value"in f)return f.value;if("transition"in f)return sg(f.transition)}return f},QR={top:"colorTop",bottom:"colorBottom",left:"colorLeft",right:"colorRight"};let ag=null;const ZR={set parent(f){this.props.parent=f==="root"?ko.root:f.node},set rotation(f){this.props.rotation=f*(Math.PI/180)},set w(f){this.props.width=La.call(this,f,"width")},set width(f){this.props.width=La.call(this,f,"width")},set h(f){this.props.height=La.call(this,f,"height")},set height(f){this.props.height=La.call(this,f,"height")},set x(f){this.props.x=La.call(this,f,"width")},set y(f){this.props.y=La.call(this,f,"height")},set z(f){this.props.zIndex=f},set zIndex(f){this.props.zIndex=f},set color(f){typeof f=="string"&&f.startsWith("{")===!1?this.props.color=Ya.normalize(f):(typeof f=="object"||$r(f)===!0&&(f=zr(f)))&&(this.props.color=0,Object.entries(f).forEach(o=>{this.props[QR[o[0]]]=Ya.normalize(o[1])}))},set src(f){this.props.src=f,this.raw.color===void 0&&(this.props.color=this.props.src?4294967295:0),!("w"in this.raw)&&!("w"in this.raw)&&!("h"in this.raw)&&!("height"in this.raw)&&(this.props.autosize=!0)},set texture(f){this.props.texture=f,this.raw.color===void 0&&f==null?this.props.color=0:this.raw.color===void 0&&(this.props.color=4294967295)},set fit(f){const o={};if(f==="cover"||f==="contain"){this.props.textureOptions={resizeMode:{type:f}};return}(typeof f=="object"||$r(f)===!0&&(f=zr(f)))&&(o.type=f.type||"cover",typeof f.position=="number"&&(o.clipY=o.clipX=f.position),typeof f.position=="object"&&(o.clipX="x"in f.position?f.position.x:null,o.clipY="y"in f.position?f.position.y:null),this.props.textureOptions={resizeMode:o})},set rtt(f){this.props.rtt=f,this.raw.color===void 0&&(this.props.color=f===!0?4294967295:0)},set mount(f){typeof f=="object"||$r(f)===!0&&(f=zr(f))?("x"in f&&(this.props.mountX=f.x),"y"in f&&(this.props.mountY=f.y)):(this.props.mountX=f,this.props.mountY=f)},set pivot(f){typeof f=="object"||$r(f)===!0&&(f=zr(f))?("x"in f&&(this.props.pivotX=f.x),"y"in f&&(this.props.pivotY=f.y)):(this.props.pivotX=f,this.props.pivotY=f)},set scale(f){typeof f=="object"||$r(f)===!0&&(f=zr(f))?("x"in f&&(this.props.scaleX=f.x),"y"in f&&(this.props.scaleY=f.y)):this.props.scale=f},set show(f){f?this.props.alpha=this.raw.alpha!==void 0?this.raw.alpha:1:this.props.alpha=0},set alpha(f){(this.raw.show===void 0||this.raw.show==!0)&&(this.props.alpha=f)},set shader(f){f!==null?this.props.shader=ko.createShader(f.type,f.props):this.props.shader=ko.createShader("DefaultShader")},set effects(f){for(let i=0;i<f.length;i++)f[i].props&&f[i].props.color&&(f[i].props.color=Ya.normalize(f[i].props.color));const o={};if(this.element.node===void 0)this.element.effectNames=[],this.props.shader=ko.createShader("DynamicShader",{effects:f.map(i=>{let u=i.type;return o[u]!==void 0?u+=++o[u]:o[u]=1,u+=this.element.counter,this.element.effectNames.push(u),ko.createEffect(i.type,i.props,u)})});else for(let i=0;i<f.length;i++){const u=this.element.effectNames[i],h=this.element.node.shader.props[u],g=Object.keys(f[i].props);if(h!=null)for(let x=0;x<g.length;x++)h[g[x]]=f[i].props[g[x]]}},set clipping(f){this.props.clipping=f},set overflow(f){this.props.clipping=!f},set font(f){this.props.fontFamily=f},set size(f){this.props.fontSize=f},set wordwrap(f){dn.warn("The wordwrap attribute is deprecated, use maxwidth instead"),this.props.width=f,this.props.contain="width"},set maxwidth(f){this.props.width=f,this.props.contain="width"},set maxheight(f){this.props.height=f,this.props.contain="both"},set contain(f){this.props.contain=f},set maxlines(f){this.props.maxLines=f},set textoverflow(f){this.props.overflowSuffix=f===!1?" ":f===!0?void 0:f},set letterspacing(f){this.props.letterSpacing=f||1},set lineheight(f){this.props.lineHeight=f},set align(f){this.props.textAlign=f},set content(f){this.props.text=""+f},set placement(f){let o,i;typeof f=="object"||$r(f)===!0&&(f=zr(f))?("x"in f&&(o=f.x),"y"in f&&(i=f.y)):f==="center"||f==="right"?o=f:i=f,o==="center"?(this.x="50%",this.props.mountX=.5):o==="right"&&(this.x="100%",this.props.mountX=1),i==="middle"?(this.y="50%",this.props.mountY=.5):i==="bottom"&&(this.y="100%",this.props.mountY=1)},set"inspector-data"(f){(typeof f=="object"||$r(f)===!0&&(f=zr(f)))&&(this.props.data=f)}},JR={populate(f){const o=f;o.node=this.config.node,o[Se.isSlot]===!0&&(this[Se.isSlot]=!0),this.props.element=this,this.props.parent=o.parent||this.config.parent,delete o.parent,this.props.raw=f;const i=Object.keys(o),u=i.length;for(let h=0;h<u;h++){const g=i[h],x=o[g];x!==void 0&&(this.props[g]=sg(x))}this.props.props.color===void 0&&!("__textnode"in o)&&(this.props.props.color=0),this.node=o.__textnode?ko.createTextNode({...ag,...this.props.props}):ko.createNode(this.props.props),o["@loaded"]!==void 0&&typeof o["@loaded"]=="function"&&this.node.on("loaded",(h,{type:g,dimensions:x})=>{o["@loaded"]({w:x.width,h:x.height,type:g},this)}),o["@error"]!==void 0&&typeof o["@error"]=="function"&&this.node.on("failed",(h,g)=>{o["@error"](g,this)}),o.__layout===!0&&(this.triggerLayout=YR.bind(this)),this.config.parent.props!==void 0&&this.config.parent.props.__layout===!0&&(this.config.parent.triggerLayout(this.config.parent.props),this.node.on("loaded",()=>{this.config.parent.triggerLayout(this.config.parent.props)}))},set(f,o){if(o===void 0||this.props.raw[f]===o)return;this.props.raw[f]=o,this.props.props={},this.props[f]=sg(o);const i=Object.keys(this.props.props);if(i.length===1){if(mC(o)===!0)return this.animate(i[0],this.props.props[i[0]],o.transition);this.node[i[0]]=this.props.props[i[0]]}else for(let u=0;u<i.length;u++){if(mC(o)===!0)return this.animate(i[u],this.props.props[i[u]],o.transition);this.node[i[u]]=this.props.props[i[u]]}this.config.parent.props&&this.config.parent.props.__layout===!0&&this.config.parent.triggerLayout(this.config.parent.props)},animate(f,o,i){if(this.scheduledTransitions[f]!==void 0&&this.scheduledTransitions[f].f.state==="scheduled"&&this.scheduledTransitions[f].f.stop(),this.node[f]===o)return;const u={};u[f]=o;const h=this.node.animate(u,{duration:typeof i=="object"&&"duration"in i?i.duration:300,easing:typeof i=="object"&&"easing"in i?i.easing:"ease",delay:typeof i=="object"&&"delay"in i?i.delay:0}),g=this.node[f];if(this.scheduledTransitions[f]={v:u[f],f:h},i.start!==void 0&&typeof i.start=="function"&&h.once("animating",()=>{i.start.call(this.component,this,f,g)}),this.config.parent.props&&this.config.parent.props.__layout===!0&&h.on("tick",()=>{this.config.parent.triggerLayout(this.config.parent.props)}),i.progress!==void 0&&typeof i.progress=="function"){let x=0;h.on("tick",(S,{progress:a})=>{i.progress.call(this.component,this,f,a,x),x=a})}h.once("stopped",()=>{this.scheduledTransitions[f]!==void 0&&this.scheduledTransitions[f].canceled===!0||(i.end&&typeof i.end=="function"&&i.end.call(this.component,this,f,this.node[f]),delete this.scheduledTransitions[f])}),h.start()},destroy(){dn.debug("Deleting  Node",this.nodeId),this.node.destroy();const f=Object.keys(this.scheduledTransitions);for(let o=0;o<f.length;o++){const i=this.scheduledTransitions[f[o]];i!==void 0&&(i.canceled=!0,i.f!==void 0&&i.f.stop())}},get nodeId(){return this.node&&this.node.id},get ref(){return this.props.ref||null},get parent(){return this.node&&this.node.parent},get children(){return this.component[Se.getChildren]().filter(f=>f.parent===(this[Se.isSlot]?this.node.children[0]:this.node))}},e5=(f,o)=>(ag===null&&(ag={fontSize:32,fontFamily:no.get("defaultFont","sans-serif")}),Object.assign(Object.create(JR),{props:Object.assign(Object.create(ZR),{props:{}}),scheduledTransitions:{},config:f,component:o,effectNames:[],counter:qR++})),gC={Element:e5,Launch:XR},t5="@lightningjs/blits",n5="1.25.1",i5="Blits: The Lightning 3 App Development Framework",o5="bin/index.js",r5={".":"./index.js","./vite":"./vite/index.js","./transitions":"./src/router/transitions/index.js","./precompiler":"./src/lib/precompiler/precompiler.js","./plugins":"./src/plugins/index.js","./symbols":"./src/lib/symbols.js","./blitsFileConverter":"./src/lib/blitsfileconverter/blitsfileconverter.js"},s5={test:"c8 npm run test:run","test:run":"node -r global-jsdom/register ./node_modules/.bin/tape '{,!(node_modules|packages)/**/}*.test.js' | tap-diff",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",prepublishOnly:"node scripts/prepublishOnly.js",postpublish:"node scripts/postpublish.js"},a5="./index.d.ts",u5={hooks:{"pre-commit":"lint-staged"}},l5="module",f5="Michiel van der Geest <hello@michielvandergeest.com>",c5="Apache-2.0",h5={"@babel/eslint-parser":"^7.26.5","@babel/plugin-syntax-import-assertions":"^7.26.0","babel-eslint":"^10.1.0",c8:"^8.0.1",eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0","global-jsdom":"24.0.0",husky:"^7.0.4",jsdom:"24.0.0","lint-staged":"^12.3.3",prettier:"^2.5.1","tap-diff":"^0.1.1",tape:"^5.5.0"},d5={"@lightningjs/msdf-generator":"^1.1.1","@lightningjs/renderer":"^2.13.2"},p5={type:"git",url:"https://github.com/lightning-js/blits.git"},yC={name:t5,version:n5,description:i5,bin:o5,exports:r5,scripts:s5,types:a5,"lint-staged":{"*.js":["eslint --fix"]},husky:u5,type:l5,author:f5,license:c5,devDependencies:h5,dependencies:d5,repository:p5};let Vl={};const vg={},m5=(f,o,i)=>{no.set(i),QM(),dn.info("Blits Version ",yC.version),dn.info("Renderer Version ",yC.dependencies["@lightningjs/renderer"]),vg.element=gC.Element,Vl=gC.Launch(f,o,i)},g5={before:{prop:"alpha",value:0},in:{prop:"alpha",value:1,duration:200},out:{prop:"alpha",value:0,duration:100}},Hr=window.speechSynthesis,y5=()=>(window.navigator||{}).userAgent||"",vC=()=>/android/i.test(y5());let mT=!1,Zh=null;const xg=()=>Zh&&clearTimeout(Zh),ug=f=>{if(!f||Zh)return xg();Hr.pause(),Hr.resume(),Zh=setTimeout(()=>{ug(f)},5e3)},za={lang:"en-US",pitch:1,rate:1,voice:null,volume:1},v5=()=>{za.voice=Hr.getVoices()[0],mT=!0},x5=(f,o)=>{const i=new SpeechSynthesisUtterance(o.value);i.lang=o.lang||za.lang,i.pitch=o.pitch||za.pitch,i.rate=o.rate||za.rate,i.voice=o.voice||za.voice,i.volume=o.volume||za.volume,i.onstart=()=>{vC()||ug(i),f.onstart()},i.onresume=()=>{vC()||ug(i),f.onresume()},i.onpause=()=>{f.onpause()},i.onend=()=>{f.onend()},i.onerror=()=>{xg(),f.onerror()},Hr.speak(i)},$h={speak(f){mT||v5(),this.cancel(),x5(this,f)},resume(){Hr.resume()},pause(){Hr.pause()},cancel(){Hr.cancel(),xg()},getVoices(){return Hr.getVoices()},onend(){},onerror(){},onstart(){},onresume(){},onpause(){}};let xC,ld=!1;const w5=()=>{ld=!0},S5=()=>{ld=!1},C5=f=>{ld=!!f},wg=(f,o="off")=>{ld!==!1&&(clearTimeout(xC),$h.cancel(),o==="assertive"?$h.speak({value:f}):xC=setTimeout(()=>{$h.speak({value:f})},400))},T5=f=>wg(f,"polite"),b5=f=>wg(f,"assertive"),E5=()=>{$h.cancel()},gT={speak:wg,polite:T5,assertive:b5,stop:E5,enable:w5,disable:S5,toggle:C5};let Sr;const wr=Fl({path:"",navigating:!1,data:null,params:null,hash:""}),lg=new Map,yT=[];let vT={},xT={},Ja=!1,wT;const k5=()=>{const f=(document.location.hash||"/").replace(/^#/,"").split("?");return{path:f[0],queryParams:new URLSearchParams(f[1]),hash:document.location.hash}},wC=f=>f.replace(/^\/+|\/+$/g,"").toLowerCase(),SC=f=>typeof f=="object"&&f!==null,CC=f=>typeof f=="string",ST=(f,o=[])=>{const i=f.replace(/^\/+|\/+$/g,"");f=wC(f);let u=!1,h=0;for(;!u&&h<o.length;){const g=o[h];if(g.path=wC(g.path),g.path===f)g.params={},u=g;else if(g.path.indexOf(":")>-1){const x=[...g.path.matchAll(/:([^\s/]+)/gi)];let S=g.path;x.reverse().forEach(m=>{S=S.substring(0,m.index)+"([^\\s/]+)"+S.substring(m.index+m[0].length)}),S="^"+S;const a=i.match(new RegExp(`${S}`,"i"));a&&(g.params=x.reverse().reduce((m,C,y)=>(m[C[1]]=a[y+1],m),{}),u=g)}else if(g.path.endsWith("*")){const x=new RegExp(g.path.replace(/\/?\*/,"/?([^\\s]*)"),"i"),S=f.match(x);S&&(S[1]&&(g.params={path:S[1]}),u=g)}h++}return u&&(u.options={...u.options,...vT},u.data||(u.data={})),u},A5=async function(){if(wr.navigating=!0,this.parent[Se.routes]){let f=Sr?Object.assign({},Sr):void 0;const{hash:o,path:i,queryParams:u}=k5();let h=ST(i,this.parent[Se.routes]);if(o!==null&&(h.hash=o),Sr=h,h){let g;if(this.parent[Se.routerHooks]){const v=this.parent[Se.routerHooks];if(v.beforeAll&&(g=await v.beforeAll(h,f),CC(g))){nu(g);return}}h=SC(g)?g:h;let x;if(h.hooks&&h.hooks.before&&(x=await h.hooks.before.call(this.parent,h,f),CC(x))){Sr=f,nu(x);return}h=SC(x)?x:h,Ja===!1&&f&&f.options.inHistory===!0&&yT.push(f),"transition"in h||(h.transition=g5),typeof h.transition=="function"&&(h.transition=h.transition(f,h));let S,a,{view:m,focus:C}=lg.get(h.hash)||{};if(m){S=m[Se.holder];let v=!1;if(h.transition.before)if(Array.isArray(h.transition.before)){for(let M=0;M<h.transition.before.length;M++)if(h.transition.before[M].prop==="alpha"){v=!0;break}}else h.transition.before.prop==="alpha"&&(v=!0);v===!1&&S.set("alpha",1)}else{S=vg.element({parent:this[Se.children][0]}),S.populate({}),S.set("w","100%"),S.set("h","100%");const v={},M=[...u.entries()];for(let _=0;_<M.length;_++)v[M[_][0]]=M[_][1];a={...xT,...h.data,...v};const b={...this[Se.props],...h.params,...a};m=await h.component({props:b},S,this),m[Symbol.toStringTag]==="Module"&&(m.default&&typeof m.default=="function"?m=m.default({props:b},S,this):dn.error("Dynamic import doesn't have a default export or default is not a function")),typeof m=="function"&&(m=m({props:b},S,this))}if(this[Se.children].push(m),wT=Ka.get(),C?C.$focus():m.$focus(),h.transition.before)if(Array.isArray(h.transition.before))for(let v=0;v<h.transition.before.length;v++)S.set(h.transition.before[v].prop,h.transition.before[v].value);else S.set(h.transition.before.prop,h.transition.before.value);let y=!1;if(f){y=!0;const v=this[Se.children].splice(1,1).pop();v&&I5(f,v,h.transition.out),f=void 0}if(wr.path=h.path,wr.params=h.params,wr.hash=o,wr.data=a,h.transition.in)if(Array.isArray(h.transition.in))for(let v=0;v<h.transition.in.length;v++)v===h.transition.length-1?await eu(S,h.transition.in[v],y):eu(S,h.transition.in[v],y);else await eu(S,h.transition.in,y);h.announce&&(typeof h.announce=="string"&&(h.announce={message:h.announce}),gT.speak(h.announce.message,h.announce.politeness)),this.activeView=this[Se.children][this[Se.children].length-1]}else dn.error(`Route ${o} not found`)}Ja=!1,wr.navigating=!1},I5=async(f,o,i)=>{if(i)if(Array.isArray(i))for(let u=0;u<i.length;u++)u===i.length-1?await eu(o[Se.holder],i[u]):eu(o[Se.holder],i[u]);else await eu(o[Se.holder],i);Ja===!1&&f.options&&f.options.keepAlive===!0?lg.set(f.hash,{view:o,focus:wT}):Ja===!0&&lg.delete(f.hash),f.options&&(f.options.keepAlive!==!0||Ja===!0)&&(o.destroy(),o=null)},eu=(f,o,i=!0)=>new Promise(u=>{if(i){const h=o.end;o.end=h?(...g)=>{h(...g),u()}:u,f.set(o.prop,{transition:o})}else f.set(o.prop,o.value),u()}),nu=(f,o={},i={})=>{xT=o,vT=i,window.location.hash=f},CT=function(){const f=yT.pop();if(f&&Sr!==f)return Ja=!0,nu(f.hash,f.data,f.options),!0;const o=Sr&&Sr.options.backtrack||!1;if(o===!1)return!1;const i=/(\/:?[\w%\s-]+)$/;let u=Sr.path,h=u.split("/").length;if(h<=1)return!1;for(;h--;){if(!i.test(u))return!1;u=u.replace(i,"");const g=ST(u,this.parent[Se.routes]);if(g&&o)return nu(g.path),!0}return!1},Om={navigate:A5,to:nu,back:CT};let yr=null,Mh=[],TC;const fg=new Map,Ka={_hold:!1,set hold(f){this._hold=f},get hold(){return this._hold},get(){return yr},set(f,o){f!==yr&&(clearTimeout(TC),yr&&yr!==f.parent&&yr.unfocus(),Mh.reverse().forEach(i=>i.unfocus()),f!==yr&&(TC=setTimeout(()=>{yr=f,yr.lifecycle.state="focus",o instanceof KeyboardEvent?document.dispatchEvent(new KeyboardEvent("keydown",o)):Mh=[]},this.hold?no.get("holdTimeout",pT):0)))},input(f,o){if(wr.navigating===!0)return;Mh=TT([yr],f);const i=Mh.shift();if(i){let u;i[Se.inputEvents][f]?u=i[Se.inputEvents][f].call(i,o):i[Se.inputEvents].any&&(u=i[Se.inputEvents].any.call(i,o)),u!==void 0&&fg.set(o.code,u)}}},TT=(f,o)=>f[0][Se.inputEvents]&&(typeof f[0][Se.inputEvents][o]=="function"||typeof f[0][Se.inputEvents].any=="function")?f:f[0].parent?(f.unshift(f[0].parent),TT(f,o)):[],ms=new Map,Da=new Map,zh={registerListener(f,o,i,u=0){let h=ms.get(o);h===void 0&&(h=new Map,ms.set(o,h));let g=h.get(f);g===void 0&&(g=new Set,h.set(f,g)),g.add({cb:i,priority:u}),Da.delete(o)},deregisterListener(f,o){let i=ms.get(o);i!==void 0&&i.has(f)&&(i.delete(f),ms.set(o,i),Da.delete(o))},executeListeners(f,o){const i=ms.get(f);if(i===void 0||i.size===0)return!0;if(Da.has(f)===!1){const h=[];for(const[g,x]of i)for(const S of x)h.push({...S,component:g});h.sort((g,x)=>x.priority-g.priority),Da.set(f,h)}const u=Da.get(f);for(let h=0;h<u.length;h++){const{cb:g,component:x}=u[h];if(g.call(x,o)===!1)return!1}return!0},removeListeners(f){for(const[o,i]of ms)i.has(f)&&(i.delete(f),Da.delete(o),i.size===0&&ms.delete(o))}},M5={focus:{value:function(f){return dn.warn("this.focus is deprecated, use this.$focus instead"),this.$focus(f)},writable:!1,enumerable:!0,configurable:!1},$focus:{value:function(f){this[Se.state].hasFocus=!0,Ka.set(this,f)},writable:!1,enumerable:!0,configurable:!1},unfocus:{value:function(){this[Se.state].hasFocus=!1,this.lifecycle.state="unfocus"},writable:!1,enumerable:!0,configurable:!1},destroy:{value:function(){this.lifecycle.state="destroy",this.$clearTimeouts(),this.$clearIntervals(),zh.removeListeners(this),bT(this[Se.children]),YS(this[Se.effects]),dn.debug(`Destroyed component ${this.componentId}`),this[Se.state]={},this[Se.props]={}},writable:!1,enumerable:!0,configurable:!1},[Se.removeGlobalEffects]:{value:function(f=[]){YS(f)},writable:!1,enumerable:!1,configurable:!1},select:{value:function(f){return dn.warn("this.select is deprecated, use this.$select instead"),this.$select(f)},writable:!1,enumerable:!0,configurable:!1},$select:{value:function(f){let o=null;return this[Se.children].forEach(i=>{Array.isArray(i)?i.forEach(u=>{u.ref===f&&(o=u)}):Object.getPrototypeOf(i)===Object.prototype?Object.keys(i).forEach(u=>{i[u].ref===f&&(o=i[u])}):i.ref===f&&(o=i)}),o},writable:!1,enumerable:!0,configurable:!1},trigger:{value:function(f){return dn.warn("this.trigger is deprecated, use this.$trigger instead"),this.$trigger(f)},writable:!1,enumerable:!0,configurable:!1},$trigger:{value:function(f){let o=this[Se.originalState];if(f.indexOf(".")>-1){const i=f.split(".");f=i.pop(i);for(let u=0;u<i.length;u++)o=o[i[u]]}Za(o,f,!0)},writable:!1,enumerable:!0,configurable:!1},shader:{value:function(f,o){return{type:f,props:o}},writable:!1,enumerable:!0,configurable:!1}},bT=function(f){for(let o=0;o<f.length;o++){if(!f[o])return;f[o].destroy&&typeof f[o].destroy=="function"?f[o].destroy():Object.getPrototypeOf(f[o])===Object.prototype&&bT(Object.values(f[o])),f[o]=null}f.length=0},_5={$setTimeout:{value:function(f,o,...i){const u=setTimeout(()=>{this[Se.timeouts]=this[Se.timeouts].filter(h=>h!==u),f.apply(null,i)},o,i);return this[Se.timeouts].push(u),u},writable:!1,enumerable:!0,configurable:!1},$clearTimeout:{value:function(f){this[Se.timeouts].indexOf(f)>-1&&(this[Se.timeouts]=this[Se.timeouts].filter(o=>o!==f),clearTimeout(f))},writable:!1,enumerable:!0,configurable:!1},$clearTimeouts:{value:function(){for(let f=0;f<this[Se.timeouts].length;f++)clearTimeout(this[Se.timeouts][f]);this[Se.timeouts]=[]},writable:!1,enumerable:!0,configurable:!1},$setInterval:{value:function(f,o,...i){const u=setInterval(()=>f.apply(null,i),o,i);return this[Se.intervals].push(u),u},writable:!1,enumerable:!0,configurable:!1},$clearInterval:{value:function(f){this[Se.intervals].indexOf(f)>-1&&(this[Se.intervals]=this[Se.intervals].filter(o=>o!==f),clearInterval(f))},writable:!1,enumerable:!0,configurable:!1},$clearIntervals:{value:function(){for(let f=0;f<this[Se.intervals].length;f++)clearInterval(this[Se.intervals][f]);this[Se.intervals]=[]},writable:!1,enumerable:!0,configurable:!1}},R5={$emit:{value:function(f,o){return zh.executeListeners(f,o)},writable:!1,enumerable:!0,configurable:!1},$listen:{value:function(f,o,i=0){zh.registerListener(this,f,o,i)},writable:!1,enumerable:!0,configurable:!1},$unlisten:{value:function(f){zh.deregisterListener(this,f)},writable:!1,enumerable:!0,configurable:!1}},L5={$router:{value:{to:nu,back:CT,get currentRoute(){return Sr},get routes(){return this[Se.routes]},get navigating(){return wr.navigating},state:wr},writable:!1,enumerable:!0,configurable:!1}},D5={$announcer:{value:gT,writable:!1,enumerable:!0,configurable:!1}},P5={$size:{value:function(f={w:0,h:0}){this[Se.holder].set("w",f.w||0),this[Se.holder].set("h",f.h||0)},writable:!1,enumerable:!0,configurable:!1},[Se.renderer]:{value:()=>Vl,writable:!1,enumerable:!0,configurable:!1},[Se.getChildren]:{value(){const f=this.rootParent||this.parent;return(this[Se.children]||[]).concat(f&&f[Se.getChildren]().map(o=>Object.getPrototypeOf(o)===Object.prototype?Object.values(o).map(i=>(i.forComponent=i.config&&i.config.parent.component,i)):o).flat().filter(o=>{if(o&&o.component)return o.component&&o.component.componentId===this.componentId||o.forComponent&&o.forComponent.componentId===this.componentId})||[])},writable:!1,enumerable:!0,configurable:!1}},ET={...R5,...L5,...D5},gs=Object.defineProperties({[Se.launched]:!1},{...M5,..._5,...ET,...P5}),O5={cast:f=>f,required:!1},N5=(f,o=[])=>{o.indexOf("ref")===-1&&o.push("ref"),f[Se.propKeys]=[];const i=o.length;for(let u=0;u<i;u++){const h={...O5,...typeof o[u]=="object"?o[u]:{key:o[u]}};f[Se.propKeys].push(h.key),Object.defineProperty(f,h.key,{get(){const g=h.cast(this[Se.props]!==void 0&&h.key in this[Se.props]?this[Se.props][h.key]:"default"in h?h.default:void 0);return h.required===!0&&g===void 0&&dn.warn(`${h.key} is required`),g},set(g){dn.warn(`Warning! Avoid mutating props directly (${h.key})`),this[Se.props][h.key]=g}})}},U5=(f,o)=>{f[Se.methodKeys]=[];for(let i in o)f[Se.propKeys]&&f[Se.propKeys].indexOf(i)>-1?dn.error(`${i} already exists as a prop`):(typeof o[i]!="function"&&dn.warn(`${i} is not a function`),f[Se.methodKeys].push(i),f[i]=o[i])},B5=(f,o=()=>{})=>{Object.defineProperty(f,Se.stateKeys,{value:[],enumerable:!1,configurable:!1,writable:!1});const i=Object.keys(o.apply(f)||{});i.push(["hasFocus"]);const u=i.length;for(let h=0;h<u;h++){const g=i[h];f[Se.propKeys]!==void 0&&f[Se.propKeys].indexOf(g)>-1&&dn.error(`State ${g} already exists as a prop`),f[Se.methodKeys]!==void 0&&f[Se.methodKeys].indexOf(g)>-1&&dn.error(`State ${g} already exists as a method`),f[Se.stateKeys].push(g),Object.defineProperty(f,g,{get(){return this[Se.state][g]},set(x){this[Se.state][g]=x}})}},j5=(f,o)=>{f[Se.computedKeys]=[];for(let i in o)f[Se.stateKeys]&&f[Se.stateKeys].indexOf(i)>-1?dn.error(`${i} already exists as a state variable`):f[Se.propKeys]&&f[Se.propKeys].indexOf(i)>-1?dn.error(`${i} already exists as a prop`):f[Se.methodKeys]&&f[Se.methodKeys].indexOf(i)>-1?dn.error(`${i} already exists as a method`):(typeof o[i]!="function"&&dn.warn(`${i} is not a function`),f[Se.computedKeys].push(i),Object.defineProperty(f,i,{get(){return o[i].apply(this)}}))},F5=(f,o)=>{f[Se.inputEvents]=[],Object.keys(o).forEach(i=>{typeof o[i]!="function"&&dn.warn(`${o[i]} is not a function`),f[Se.inputEvents][i]=o[i]})},$5=(f,o)=>{let i=o;Array.isArray(o)===!1&&(f[Se.routerHooks]=o.hooks,i=o.routes),f[Se.routes]=[],Object.keys(i).forEach(u=>{f[Se.routes][u]={...i[u],options:{inHistory:!0,...i[u].options}}})},z5=(f,o)=>{f[Se.watchKeys]=[],f[Se.watchers]={};for(let i in o)typeof o[i]!="function"&&console.warn(`${i} is not a function`),f[Se.watchKeys].push(i),f[Se.watchers][i]=function(u,h){o[i].call(this,u,h)}};let V5=0;function H5(f,o){f[Se.identifier]=++V5,f[Se.effects]=[],h_(o.hooks,f[Se.identifier]),N5(f,o.props),o.methods&&U5(f,o.methods),B5(f,o.state),o.computed&&j5(f,o.computed),o.watch&&z5(f,o.watch);const i=o.router!==void 0?o.router:o.routes;return i!==void 0&&$5(f,i),o.input&&F5(f,o.input),f}const G5=()=>ou("Circle",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};return a[0]=this.element({parent:o||"root"},i),m.color=i.color,m.w=i.size,m.h=i.size,m.effects=[i.shader("radius",{radius:i.radius})],a[0].populate(m),a},effects:[function(o,i,u,h,g,x){i[0].set("color",o.color)},function(o,i,u,h,g,x){i[0].set("w",o.size)},function(o,i,u,h,g,x){i[0].set("h",o.size)},function(o,i,u,h,g,x){i[0].set("effects",[o.shader("radius",{radius:o.radius})])}],context:{}},props:[{key:"size",default:40},"color"],computed:{radius(){return this.size/2}}});let Nm=null;const W5=()=>ou("RouterView",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};return a[0]=this.element({parent:o||"root"},i),m.w=o.node.width*(100/100),m.height=o.node.height*(100/100),a[0].populate(m),a},effects:[],context:{}},state(){return{activeView:null}},hooks:{ready(){Nm=()=>Om.navigate.apply(this),Om.navigate.apply(this),window.addEventListener("hashchange",Nm)},destroy(){window.removeEventListener("hashchange",Nm,!1)},focus(){this.activeView&&this.activeView.$focus()}},input:{back(f){Om.back.call(this)===!1&&this.parent.$focus(f)}}}),X5=()=>ou("Sprite",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};return a[0]=this.element({parent:o||"root"},i),m.w=o.node.width*(100/100),m.h=o.node.height*(100/100),m.texture=i.texture,m.color=i.color,a[0].populate(m),a},effects:[function(o,i,u,h,g,x){i[0].set("texture",o.texture)},function(o,i,u,h,g,x){i[0].set("color",o.color)}],context:{}},props:["image","map","frame","color"],state(){return{spriteTexture:null}},computed:{texture(){const f="frames"in this.map?Object.assign({},this.map.defaults||{},this.map.frames[this.frame]):this.map[this.frame];if(this.spriteTexture!==null&&f)return this[Se.renderer]().createTexture("SubTexture",{texture:this.spriteTexture,x:f.x,y:f.y,width:f.w,height:f.h})}},hooks:{ready(){this.spriteTexture=this[Se.renderer]().createTexture("ImageTexture",{src:this.image})}}}),q5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaMAAAAbCAYAAADRe+BYAAAAAXNSR0IArs4c6QAAGn9JREFUeF7tXQ1UVdWePxcWFg7ZA0sym5n0Tmk1z4+0YeVU4yo1h1jvPVBo1ETU8QvTdJlhsmKpi0he5jyXX0CKIWkpl3OlME3RGcdJixVEas+nJtq0sMwXN/kIgbxn1m+791n/ezifF0hr7lmrVV3O2Wfv/977//v//h/7uKTQFZJASAIhCYQkEJLADZaAy+j9iqIMkCRpliRJGeSeWkmSClwuV25X9VtRlOGSJI3m7wq6bd5Osqa/6OZSSZJKXC4X+h7UpSgKZABZQCbiKuHt4t+dvri8z5GG3E77rChKtCRJ9TY647ht0aaiKJAx5LCK/4Y5m23jneotiqJgvg84eCaYd6Cf4h/xqgo+ZwUO3h1wK5cx1oIYP/5eJUlSrsvl6tRakGUZbYr9tjQpKanL9lmw4w09F5LAzyUBXTDiih3KAspN76pwuVxjgu2koijYzGibbmg0tzQYoOPt5Zv0xydJ0hiXywWlYfviAAE5UBDSPu9YUep1QFEUvAdKWlyOAYPP26c2BhhM25ivXZo+4lWOxx8EGEHRw6iwdXHjQbu26LMwTlJsNUZusrEeHMuC9kGWZRgSYs/VJiUluZ32MXR/SAK/VAkYgREsdKaAKysr58fFxd0Di23Xrl1ScjKMTUl69913906cODHe6cDNFAVvcyAUHCxNO21rGIVv7969ufHx8djQGatWrZIyMq4bmj6frz4mJuYRSZJsMyQNQJS43e4/19bWThk+fPiA/Px8afhwkDpJKikpKUhJSXHEDujY9MDU7XZLtbWsq1BItvrMWQsAQxozZoxUUQEiYHrZapuzAYCcAOWSnJycv2RmZjZThiRJklMZGDIkyHfWLNgskkRkgXVh+g4N0NUuWLCgYN26dcMHDBiQjPUr5qyoqOjttLS0KVYC0syTui/q6+tX9O7duyU6OnoV2h09+rodEexakGUZG4vNnbiWL18uHT9+HCBsay84Gcv/13s9Hs/osLAwlZW7XK6KxMRES8Pa6/Ue4GuLic7v94+ZMGGC5Qb7OeXcXWMrLS3Nd7lcs+zKKtgxdwAjupnPnDlTNHDgwN9RhlRfXy9FR0dDuUsxMTGYDMuJ1GxooAO0eNWgQYNaX3jhhcfnzp2bhHuWLl0q5eayfWd7AyqKoro2uIJ5jr7vwIEDqqKIi4trqKysfJK7VUxlRl1ebW1tX99yyy3tlCFB+aBtroCklJQUS0Wp90L+Hii5ABYaJBhBtowRjBgxQqqqsiSCdsEISpJZIZcuXVp01113PaPHkKyAQmf8umCE9XXu3Dm2zgCoAFZ+YXGYMiS6HjZt2iSnp6eztYVLZ87gVrPFkCjQX758+d0+ffr8k1gP6Oenn34qDRgwgBkQbrfb8VqQZVnIGCyerYX9+/dLeXl5MERuSoYky7JiU/GoLE+r1A2eh4cEIKG7gD0ez4CwsDCsxwD2qygKmGlFUlKSobtUq7A5sLgnTJhgaPDx91EX+i8CjLpqbHSeXS7XCKN5sbkWDG/TAyNVuSckJHyzZ8+evvxpbNoSRVHgDmMmK1d4toFD0wumOGH9wgruBBip7q2YmBgGkiBCXDGiv6qCnj17tlRQUGBrc5PYgJSZmTk1JyfnAd5/LPTZBESowoTV7igeoSiKUEK1ly5dCo+Njf17vKezYERkAU0etAVHjZPm5uaiqKioxylD4uMNun0DgFbnbNq0aXveeustgB8TixVLpOuTsEPMeYqiKFgXTKkQkLM1ZxTkNPuCrf8rV678qVevXi+QfWGrXdxfXl4e3dbWxmJ933zzzbHz588/OnLkSKmpqUlKT0/Hv9U51CjGDq482hZk1aNHjxEJCQlsU3D2JYxB/MRiXTQG6Pf7TRUzna9uBCPxmg5xM1mW1bVhovxKkpKSdI0MPTAqLi6WvF6voWGt907OWtGFTu2vzipw+nx3jU0wo6+++qpu0aJF/bg+cURC7IxTD4xUK5goRNUipco9JSUFbgks9Bg7L9MBo+EbN24M7wwzIm3S4K+qCKgSIcpphB12xNumSQEqkFElDTYHVgewtmtp42ZqbX/99dfTzp07VzBq1KiIToCRaii4XOrUOhlrh2mk8nv66acr9u/fL+JatpWtk7VBmaLf778QHh5+O2cKtli4jvGB17O+0jkrKCiQYJzYnTMKcnpuQ+pqdWL0cJBQFeybb7557Nq1a4/OmTOHiS0vLw8MKYBpERYlaS1VjbsvNykpiS1MCyWOdc1csMGCUVKSSkDNprvW6/XWCncXUejqM2PHjpXE2PFjdXX10uzsbOYu0Shb39mzZ7MyMjL+BkYt5mTKlCnS4MGDWVunTp0qy8zM/IO2M3oKGyx8yZIlbNvpGTuyLMNFfd0nz69fChh18dgoE+6UXtFbJHpgpDINsulU9DfY7EF3jG7iYNx0ZFA0AQDg6KOK7erVqy2RkZGR/H4nihRgdD14cZ1xCaUGxT/A7/dfue+++27n8R1bCpMDEdoVcRgE1OH2SxaxhyCZEZMBxrpt27ZIEXPhfQdQMjeGQ3BgG7G9vb0pPj4+Cm2KuCFvJ6ikE6M+0PWgcbPZskDpnGNOYDBVVVWNURQFCheGFlMqRL625syAcdF9gTXCKD5Zx7b2hVB2iqL8MHXq1N+gjW3btjERcWWCdQdFyRiO1+udxfsjcateBSuakQcFi+fvvffeD9asWSPiu779+/e/lZeX9wRkAcUPABDX3Llz4Yo1VMx03igz6iowQvsUkI4fPy4tX76csU8Kwh6PZ/uOHTsm0/5ERUVJGzdulPBvXDNmzCjz+XwBgETBCOOMjY1l93JZdfDyeL3e4YqisKSgpqam+qioKGZ43+xg1E1jE8aurT3jRM/gXrtgpFoMBmDEXHhOX86Vst4mDtb1F9AFatVv3br18PTp0/+F32BLsdHGqDIiv1ekpqZuKy4uvq45rrs8bGV9kb75EhMTs3bv3r2OxreCBCM1wG4yFylOUpAVRWHWUEtLy9XIyMhbDdqtgoUezPxrn1EUhY0BivmOO+6Q6uvroZxtuVZFW8gqrKurK+vXrx9cCtqrdv369fnz588XSQG24jt03RNWRfeFyswJGFkaPVTZnT9//sTixYt/iw5v2LDhWN++fR8lilJti7riuLJWvRMiI6+xsVEFtldffbXsgQce+D3a2rdvn1xQUBBAY15//XUGzri6AIwMy0XQPo0ZGSl0Oj64KlNTU/FoCgdaxuBIP1WXPH7Pz88vvfPOO9n4Vq9eLR09ejRgT1Iw8nq9UmJiIhs3/ru4uBhuy4B1TMF93759344bN+4u3K/Xd85KA8oJYPwhlkXjWBp21sHVKsuyuo9RNpGYmGjL9d9dY6P9SUpKYvNL3cUYn6IoyHjNQKID2XCOyhO6CowsN52RoupCZhTwCtruTz/9VBMREYFYDNhIUG5FPTACW5gxY0ZzcXExzCu0i4VsmflG3UU8KwtZXQOqq6svDRs2jJlqQYIR3D0Zp0+fDp88eXKvqqoq9KkkIyNjFjILcTU3N7c9+eSTz1ZWVu62Ag9t7RMSItLT05EEMn7o0KGLNm/eHC+y04LNrqR9oG7L3bt3y4mJiUJpOlpfkK/f738zLCzsXu0YwWRnzpz5fWFhocgMtIxDoQ1togkHHGbUUKMH9zph+FTZbdiwofbgwYPol2/Lli0ro6Oj/8NIUVKWAGXd1NQ0AgpVWPFQnAUFBVCcPlmWsSYZI+T34j9VJU4B4mYAI3ROh3VV8PExNzF3XzKQ0jGEsc9pUhDzlHAlqmbTgVUOGTKEufbAJDB2vofVxAkB7j/88EPF+++/PxquQD0wEnEVkz0VoJg196t/o6wX4zKKfem9h4JRV47NCox4yAPrtkMpEIBq/PjxtrJsf5VgpEnv9Y0cOXLXsWPHhEA6y7ryR48ezZS7UMRz5sw5kZ+fD3eAJRBxxSYsHzAKUF6AiK+xsfHPUVFR/xwsGJEF2oEh0VRpriwt2SwFI7i8kLDiu54hwhYdssfgBsLFs8g6WJZWgKcBI9XVOnDgwK/PnDnzt1yJqC4qq/ZorVVTU9Op+Ph46ciRIw+gr5CBcIOmpqZeKi4uRualbbclBUudfqhxFx4zYrhklZYtlJ3f729IS0vrBSYAJVReXj5bJDUQdqC6/ajS4gxgqSzLeJZZHcJFB9esLMvMWqVsScTRONipacs3AxhRpUpiHj6v17tUuCcJIBkZE2r8lAKWVmE3NzerMSrOdlQmRe997733Prxy5crTemDk9XrB5JmLFvt50aJF2y9cuBDvdruTX3zxRdUVuGrVqvmVlZXrcR/YX0tLy/+Gh4dHYX7nzZt34Z133nm4ra1NgKjv+eefb7p48SL2AC5Lg6w7xob9oQEj1hmPx+MOCwtTMwyPHj0qFRYWFtXX168cMWLE6wsWLEgS7tL09PQV33777XKrvfurAyNt4eeMGTNyCgsLl3FBdEpZ8jbYIqeK+LPPPrv28MMPT7TjqqTunldeeSU9Ozt7I28XGw1WH7P8gmFGZLIZQ+LgiEVcpRO8D4hD6C0UCkaaFGvIkbXb0tJy4tZbb/1HPM8z+CwVsMG71DTv48ePVwwZMkQkSjhqj9aGpaamphYXF2MTMBZEU8YvXLjg79+//7/ZmTPa39OnT//hiy++2JmYmNgDv6N+LTo6+mVaxE3S6k37TpMNvvzyy7+89NJLg/i7mKFA2Y/W5URdWTwFvMrr9SJOOhqxjdTUVJFUBPcWq186ffp0w8svv9yLv0NlC13BjEwUTYAbyspNx2WCPcYMHsKAmK7XnFIhtbe3/xgREbHS7/eXmKVni/5pXVlgW1u2bGmJiIiI1KbSE/biS01NdT333HO/EfE16qaTZRl9ZWtsyZIlQ8+dO4d1xS64AQWA8bGoa4IaFHh3ZGTk3scff/xf8dwnn3wi5+bmCs+ArcSo7hibHTAirBJ6gTEkjFm4QPnatXSH282m040Z8Ww6W6httFi70k2nPTli/fr1GSQ2YNuNZoXg4u/Nzc0Xe/bsyVLfefaaKdtwcFyP2oUDBw6kjh07tthun0zkjEXCLJmSkhIW2Ley3Gl/CRiBAcBCZ24PnSwzR/Ed0V/aTkpKSnVJScnD/G+23GikHRbjunr1al1kZKSIGang2djY+D8a9mnJEHVk2qFAVRSEX7lyBSAXxksMTK1ZCjZW8wvLc/Xq1QEuZvG8SAEXSQ8ffPDBic2bNyP2xO4XLi+iNALm6EaBkdWYz58/v3Px4sXP8vtUQ3LatGn5Dz744CwR5yLtwNNQYBZjoQqbg4/0xhtvnOjfv/9vCQNl7lfBWuvq6vbMnz//GZrsYRDvUuPfnHGneL3eZE2yCbqrrumdO3f+V0REhIhls6EoinJh/PjxIovUtt7qrrFZMSMetxTTwEpfOBtnLJ0YFKoBpDf3pnVGBGwoGKmp38QCtKSQ3Q1G3IpH1guzqD766KOcxx57TDAi/GQrs4koNXFmHn4S7rSAYYhgOwEjU+alc/6c1X5Ehp0tMOLMR6Sf4rimgIJBg7RmS2uFxyCG8yJn9Dcgk4YyEVLbZLrotIOmcvnuu++qY2NjBRBZ9k+nLQZGFy9ebOnXr5/InqTrV5stGhR4kvMUkylLPnLkSOUTTzyBgljTNaepB7JcB7iBx3tU8KTMCjECYYFnZGQ0nD17FgyIyY+mJvM2AuawK8DIRjYdk7PNotdcj8fTtmPHjudJHEKrY5DOnYF4Dyxw4RLie7EiIiIiRdRXUeHqKewJEyaUTZo0iSV4CCtelmXIiDHKDRs27Dl48OAz8+bNa33qqaduwW96YJSVlfV2bGxsXN++ff9Bb0J55iP+pI6FJrCIZwoLCzeXl5f/O/9/256B7hqbAzBS9xItJbCI76miMj2BwSBriJ2fxY/XUV0BTt0dROl3OptOe2bY559/vm7o0KGIB4iAWjDZc1Ds4py3DmfxUQV64sSJ1sGDB7NFqpehqLMwdQ80NcimE4+bjkETz+hwRhplHiTAbkn/deq0VEWmiSn91e1238E765TNqP7911577ciyZctQWIsrmHlTa0K4q5PWhqmB7aampvbbbruN1XTZKaY1QwsKyMOGDfugpqYGadSmblC6WQmT6fAa6u7gykydMw5oLMYAqx4KuaGhoTYtLU0kZwgLX83044ohAIApWHVBzMhIVB3ASK/OyOBhoyxVcTDycIASAFHUGV2+fPnU7NmzH9S2p6eweVwNbUULBsrBCL/5ONBG5+Tk1A4aNIjJloJReXl5VVtbG4ycgFok7bsJGAUADJU/Ya943JGh1B1js+OmI8xI1Q0GYGRKWozOplM3NGdH4vQFlRWtXbv2xMKFC1kaqlPWQSeps2467blptbW1f3S73TNNLCozvRLwN8p8uMWbybOnsOigQNniW7hw4V/Xrl0rFLFpait/geoyoy/sDBihHdpfnt32Co8XqUWVyACMjY2N4m4kS+ZBs8jwzMSJE5s+/PDD2zgQqXU7mZmZp8gpFbaZEW2fH7skArZB1TLQmByy/yZNmoREiL/j71EPevV4PHXJycnCjecIPMWcaU9z52vvJf53U9lSBUSSDTqsTQAqUq9xkWC+Kl+tq+/QoUOH169fD7eP6tKjabgALQDS0aNHWRvaLDAKRvw5duaV3llsBnVGwaR2G+1JgBDWgVWSifBiZGzatCla1A5lZWVVnjx5cpxwKeMlVGETJYokD8iLHWQJGWzatIn1iRfPMta0devW6ttvv52xdgpGpaWlySKlGQkMa9asOYWkGbBnWjOlB0Z6ZxISJuHIGOuOsd0MYIQiR/gyr1ePdbzAFLAAYGk6Qm9tU10ARnaOB1Ff6yJHE1ihEmJQ165dOxQeHi6Cvh0eqaury7/nnntEpl6nEiSohR1MAgP629TUtCcqKup6JV/Hy5eQkPCfe/bsEYFRWy4Aq1O2OyMDCh55eXmVc+fOFS6uzrh+aSZVBym0trYevvvuu4fwGiZHqf4mspjtcrlgSYvEC0OAo66Z77//vm7mzJkCFHXnQwe41Pu0yoy46ALYhCZl2HDpUzAqLS1V60b0UnS7EIwsla5mnIYpz+vWrSvv168fOz6KK/UAo8ZIYXu9XtTKME8IQEowrJUrV1bU1NRgTpHNJxKBAsBIlmVWAI9n09LSahoaGoYKAdsAI5H56vvxxx979ezZM1xk1zU2Nva30lH0790xthsORhggLN+cnJz/XrZsGS0cFN8zAhBdP77bRvqqmUBvZjDicohesWLFl1OmTIlBbIBcBTt27KiZPHnyDELPg1ag/F16p184strBANDfBQsWxCB7jFxLR40aFXP48GFhuVtm09GHy8rKhp09e/bo4sWLaeFrRWVlZVlcXFxaMDKgrKgzRa566ys7O/vtuLi4ySKVm99TVV9fX967d2+kzwvQsGSHtH0NGDGr3e12R+I0d3JmnynIUzZSWlpat337drHHdOOa1OUhMudEcSZ11RHmhC53UPBZWVlTwsLCtglFC5der169cIIGTnRg8jBiRgZFnurxMCRmFAwzsgQjTYzN16NHD7deTIjGpHj8B8NS5WqgsBlg0dgIHmpvbz/57LPPskxRpOhzI4LJSZNNB8Yd3dra2jpx4kThrkebSLfH/SyQr2VGdF5ramq2f/zxx5PFUUh8nh3pk+4Y200BRnwCADqm3zVyemq3CTDRTBRbFrumLUcMyWZsR7zCSg5ssdo9fcEMnPnf6NFGjsCIzBs2iNF3mNj3nRyczye6bPVRvM7IgM5fMPOvJ1ZThiQynqgbx8bcWMnCiQKhcUk7rJqekaYFLno2oxnbo/uMjYWewECKYum6o3KkRw/9bGCEflLlDeA9dOjQsb17947E3wBWra2tq4S7rKGhgdVt8clS58RCYQfokLKysi+LiopEMgKKilfpnKsHEINMmXFOAAdZjAEfYaRg5PF4SkidTu3UqVPDGhsb783Ly/P36dMnDG1xlovCbXHQrehfLXebBtQ1dsfYuhqMPB5PBf+EB3RTQCGw3fiG9rh2xpCsCvocbGzcejODEfonzqjTfvEVckBQ2cqv7UQcnQUj2l8sYEqR2Jdv7Rbo6nRa7wvAGLuQg5NxintpxbwjxmbjZVi7mDP64UIofsigM98JosAs4hqQAVMcNi+q5O0AMFWWWkZH+9PBKOBuLgT5MW7ci7ZGI74i4iN1dXUN8+fPFwqcghFtW2UxP6ebTshz+/btf4qMjGSno5tcvqysrLMnT54ULl81A9FMYWs/FUGAmRkKRjVSvL7LyGhXi6H5kUPo9lKv1ztaABs9oikhIWHz9OnTWSYdZ7oU/E2PCeqOsXU1GPFTNMSHUANq0OyAkc19FbotJIGQBG5GCXAlK8oe6NEzOARUTcQpKir6qqysjH3ChJ/EbwqsNwKM0LGHHnoo9/77739Jm9INpt/Y2Fg+depU1P6JM9ICYtpmChttC8DR1M4wQ8GsYBcyrqqqOvDII48wb0R7ezsKaVf06NGjQJykITLlZs2aJY8bN47FbTWuQFbD5/V6dwmg4myKsWDBDFHUvGTJkphLly7hfhgHjCF119gcpHZbZtNRZrRz5876nTt3IpGGyTcERjej9gj1KSSBLpQAXFjt7e2qgtNruqGh4d20tDRxcoAdlyFthn5awK5OoezfMmak02fqljSSlpk7Wsts6fd5tNmu2uxQo76bufNVhqRx6dO2qIuX9k87H/S4Lz23cHeMjZE14voX80xlpZcBS9k87Sv1hDGDwe7C6cKtEWoqJIGQBG6EBHJzc5+vr69/Iy4ujh1lxK+S6urqquzsbLgzRZ2Mk7gXmrkRYIT3QhGKWiPqirbjhjVT2GhbgISegjUDUvQJCph+dgZuU7jb2AcUSQYyVch6BgB9D3XjqrEjyozInHbX2LoSjCAnjI/FjkLM6EZohNA7QxK4cRKAwlZrrQy64Si78MYNJfTmX5sEQszo1zajofGEJGAtAfHNHVGegSeQ2CD+sW4hdEdIAl0sgRAYdbFAQ82FJBCSQEgCIQk4l0AIjJzLLPRESAIhCYQkEJJAF0vg/wBMng85iZWBHAAAAABJRU5ErkJggg==",K5=()=>ou("FPScounter",{code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(b),v===!0&&(M-=1),o=a[0];const _={};a[1]=this.element({parent:o||"root"},v===!0?y:i),_.y=15,_.x=20,a[1].populate(_),v===!0&&(M-=1),o=a[1];const O={};a[2]=this.element({parent:o||"root"},v===!0?y:i),a[2].populate(O),v===!0&&(M-=1);const B=u.components&&u.components.Sprite||h.Sprite;o=a[2];const G={};a[3]=this.element({parent:o||"root"},v===!0?y:i),G.image=i.image,G.w=43,G.h=25,G.map=i.sprite,G.frame="fps";const $=[];if(typeof B<"u")for(let kt in B.config.props)delete G[B.config.props[kt]],$.push(B.config.props[kt]);a[3].populate(G),v===!0&&(M-=1),o=a[3];const j={};j.image=i.image,j.w=43,j.h=25,j.map=i.sprite,j.frame="fps",m=j.is||"Sprite";let ne;if(typeof m=="string"){if(ne=u.components&&u.components[m]||h[m],!ne)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ne=m);a[4]=ne.call(null,{props:j},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],y=a[4],v=!0):o=a[4][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[2];const X={};a[5]=this.element({parent:o||"root"},v===!0?y:i),X.x=58,X.y=2,a[5].populate(X),v===!0&&(M-=1);const K=u.components&&u.components.Sprite||h.Sprite;o=a[5];const ee={};a[6]=this.element({parent:o||"root"},v===!0?y:i),ee.image=i.image,ee.x=0,ee.h=20,ee.w=20,ee.map=i.sprite,ee.frame=i.fps[0];const de=[];if(typeof K<"u")for(let kt in K.config.props)delete ee[K.config.props[kt]],de.push(K.config.props[kt]);a[6].populate(ee),v===!0&&(M-=1),o=a[6];const k={};k.image=i.image,k.x=0,k.h=20,k.w=20,k.map=i.sprite,C=i.fps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),k.frame=C,m=k.is||"Sprite";let V;if(typeof m=="string"){if(V=u.components&&u.components[m]||h[m],!V)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);a[7]=V.call(null,{props:k},a[6],i),a[7][Symbol.for("slots")][0]?(o=a[7][Symbol.for("slots")][0],y=a[7],v=!0):o=a[7][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Q=u.components&&u.components.Sprite||h.Sprite;o=a[5];const se={};a[8]=this.element({parent:o||"root"},v===!0?y:i),se.image=i.image,se.x=18,se.h=20,se.w=20,se.map=i.sprite,se.frame=i.fps[1];const J=[];if(typeof Q<"u")for(let kt in Q.config.props)delete se[Q.config.props[kt]],J.push(Q.config.props[kt]);a[8].populate(se),v===!0&&(M-=1),o=a[8];const te={};te.image=i.image,te.x=18,te.h=20,te.w=20,te.map=i.sprite,C=i.fps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),te.frame=C,m=te.is||"Sprite";let W;if(typeof m=="string"){if(W=u.components&&u.components[m]||h[m],!W)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);a[9]=W.call(null,{props:te},a[8],i),a[9][Symbol.for("slots")][0]?(o=a[9][Symbol.for("slots")][0],y=a[9],v=!0):o=a[9][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Z=u.components&&u.components.Sprite||h.Sprite;o=a[5];const ce={};a[10]=this.element({parent:o||"root"},v===!0?y:i),ce.image=i.image,ce.x=36,ce.h=20,ce.w=20,ce.map=i.sprite,ce.frame=i.fps[2];const xe=[];if(typeof Z<"u")for(let kt in Z.config.props)delete ce[Z.config.props[kt]],xe.push(Z.config.props[kt]);a[10].populate(ce),v===!0&&(M-=1),o=a[10];const ge={};ge.image=i.image,ge.x=36,ge.h=20,ge.w=20,ge.map=i.sprite,C=i.fps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),ge.frame=C,m=ge.is||"Sprite";let pe;if(typeof m=="string"){if(pe=u.components&&u.components[m]||h[m],!pe)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);a[11]=pe.call(null,{props:ge},a[10],i),a[11][Symbol.for("slots")][0]?(o=a[11][Symbol.for("slots")][0],y=a[11],v=!0):o=a[11][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[1];const Ee={};a[12]=this.element({parent:o||"root"},v===!0?y:i),Ee.x=150,a[12].populate(Ee),v===!0&&(M-=1);const Re=u.components&&u.components.Sprite||h.Sprite;o=a[12];const z={};a[13]=this.element({parent:o||"root"},v===!0?y:i),z.image=i.image,z.y=2,z.w=48,z.h=25,z.map=i.sprite,z.frame="avg";const Me=[];if(typeof Re<"u")for(let kt in Re.config.props)delete z[Re.config.props[kt]],Me.push(Re.config.props[kt]);a[13].populate(z),v===!0&&(M-=1),o=a[13];const ye={};ye.image=i.image,ye.y=2,ye.w=48,ye.h=25,ye.map=i.sprite,ye.frame="avg",m=ye.is||"Sprite";let Ue;if(typeof m=="string"){if(Ue=u.components&&u.components[m]||h[m],!Ue)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ue=m);a[14]=Ue.call(null,{props:ye},a[13],i),a[14][Symbol.for("slots")][0]?(o=a[14][Symbol.for("slots")][0],y=a[14],v=!0):o=a[14][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[12];const De={};a[15]=this.element({parent:o||"root"},v===!0?y:i),De.x=63,De.y=2,a[15].populate(De),v===!0&&(M-=1);const We=u.components&&u.components.Sprite||h.Sprite;o=a[15];const Xe={};a[16]=this.element({parent:o||"root"},v===!0?y:i),Xe.image=i.image,Xe.x=0,Xe.h=20,Xe.w=20,Xe.map=i.sprite,Xe.frame=i.avgFps[0];const ze=[];if(typeof We<"u")for(let kt in We.config.props)delete Xe[We.config.props[kt]],ze.push(We.config.props[kt]);a[16].populate(Xe),v===!0&&(M-=1),o=a[16];const we={};we.image=i.image,we.x=0,we.h=20,we.w=20,we.map=i.sprite,C=i.avgFps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),we.frame=C,m=we.is||"Sprite";let et;if(typeof m=="string"){if(et=u.components&&u.components[m]||h[m],!et)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(et=m);a[17]=et.call(null,{props:we},a[16],i),a[17][Symbol.for("slots")][0]?(o=a[17][Symbol.for("slots")][0],y=a[17],v=!0):o=a[17][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Je=u.components&&u.components.Sprite||h.Sprite;o=a[15];const Ze={};a[18]=this.element({parent:o||"root"},v===!0?y:i),Ze.image=i.image,Ze.x=18,Ze.h=20,Ze.w=20,Ze.map=i.sprite,Ze.frame=i.avgFps[1];const ot=[];if(typeof Je<"u")for(let kt in Je.config.props)delete Ze[Je.config.props[kt]],ot.push(Je.config.props[kt]);a[18].populate(Ze),v===!0&&(M-=1),o=a[18];const St={};St.image=i.image,St.x=18,St.h=20,St.w=20,St.map=i.sprite,C=i.avgFps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),St.frame=C,m=St.is||"Sprite";let lt;if(typeof m=="string"){if(lt=u.components&&u.components[m]||h[m],!lt)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(lt=m);a[19]=lt.call(null,{props:St},a[18],i),a[19][Symbol.for("slots")][0]?(o=a[19][Symbol.for("slots")][0],y=a[19],v=!0):o=a[19][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const It=u.components&&u.components.Sprite||h.Sprite;o=a[15];const je={};a[20]=this.element({parent:o||"root"},v===!0?y:i),je.image=i.image,je.x=36,je.h=20,je.w=20,je.map=i.sprite,je.frame=i.avgFps[2];const at=[];if(typeof It<"u")for(let kt in It.config.props)delete je[It.config.props[kt]],at.push(It.config.props[kt]);a[20].populate(je),v===!0&&(M-=1),o=a[20];const xt={};xt.image=i.image,xt.x=36,xt.h=20,xt.w=20,xt.map=i.sprite,C=i.avgFps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),xt.frame=C,m=xt.is||"Sprite";let dt;if(typeof m=="string"){if(dt=u.components&&u.components[m]||h[m],!dt)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(dt=m);a[21]=dt.call(null,{props:xt},a[20],i),a[21][Symbol.for("slots")][0]?(o=a[21][Symbol.for("slots")][0],y=a[21],v=!0):o=a[21][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[1];const xn={};a[22]=this.element({parent:o||"root"},v===!0?y:i),xn.x=0,xn.y=40,a[22].populate(xn),v===!0&&(M-=1);const pn=u.components&&u.components.Sprite||h.Sprite;o=a[22];const zt={};a[23]=this.element({parent:o||"root"},v===!0?y:i),zt.image=i.image,zt.x="-2",zt.w=47,zt.h=25,zt.map=i.sprite,zt.frame="min";const Ct=[];if(typeof pn<"u")for(let kt in pn.config.props)delete zt[pn.config.props[kt]],Ct.push(pn.config.props[kt]);a[23].populate(zt),v===!0&&(M-=1),o=a[23];const Wt={};Wt.image=i.image,Wt.x="-2",Wt.w=47,Wt.h=25,Wt.map=i.sprite,Wt.frame="min",m=Wt.is||"Sprite";let Tt;if(typeof m=="string"){if(Tt=u.components&&u.components[m]||h[m],!Tt)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Tt=m);a[24]=Tt.call(null,{props:Wt},a[23],i),a[24][Symbol.for("slots")][0]?(o=a[24][Symbol.for("slots")][0],y=a[24],v=!0):o=a[24][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[22];const Pt={};a[25]=this.element({parent:o||"root"},v===!0?y:i),Pt.x=58,Pt.y=2,a[25].populate(Pt),v===!0&&(M-=1);const un=u.components&&u.components.Sprite||h.Sprite;o=a[25];const ct={};a[26]=this.element({parent:o||"root"},v===!0?y:i),ct.image=i.image,ct.x=0,ct.h=20,ct.w=20,ct.map=i.sprite,ct.frame=i.minFps[0];const Pn=[];if(typeof un<"u")for(let kt in un.config.props)delete ct[un.config.props[kt]],Pn.push(un.config.props[kt]);a[26].populate(ct),v===!0&&(M-=1),o=a[26];const an={};an.image=i.image,an.x=0,an.h=20,an.w=20,an.map=i.sprite,C=i.minFps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),an.frame=C,m=an.is||"Sprite";let Bn;if(typeof m=="string"){if(Bn=u.components&&u.components[m]||h[m],!Bn)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Bn=m);a[27]=Bn.call(null,{props:an},a[26],i),a[27][Symbol.for("slots")][0]?(o=a[27][Symbol.for("slots")][0],y=a[27],v=!0):o=a[27][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Ot=u.components&&u.components.Sprite||h.Sprite;o=a[25];const mn={};a[28]=this.element({parent:o||"root"},v===!0?y:i),mn.image=i.image,mn.x=18,mn.h=20,mn.w=20,mn.map=i.sprite,mn.frame=i.minFps[1];const bn=[];if(typeof Ot<"u")for(let kt in Ot.config.props)delete mn[Ot.config.props[kt]],bn.push(Ot.config.props[kt]);a[28].populate(mn),v===!0&&(M-=1),o=a[28];const mi={};mi.image=i.image,mi.x=18,mi.h=20,mi.w=20,mi.map=i.sprite,C=i.minFps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),mi.frame=C,m=mi.is||"Sprite";let jn;if(typeof m=="string"){if(jn=u.components&&u.components[m]||h[m],!jn)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(jn=m);a[29]=jn.call(null,{props:mi},a[28],i),a[29][Symbol.for("slots")][0]?(o=a[29][Symbol.for("slots")][0],y=a[29],v=!0):o=a[29][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Yn=u.components&&u.components.Sprite||h.Sprite;o=a[25];const Fn={};a[30]=this.element({parent:o||"root"},v===!0?y:i),Fn.image=i.image,Fn.x=36,Fn.h=20,Fn.w=20,Fn.map=i.sprite,Fn.frame=i.minFps[2];const Rn=[];if(typeof Yn<"u")for(let kt in Yn.config.props)delete Fn[Yn.config.props[kt]],Rn.push(Yn.config.props[kt]);a[30].populate(Fn),v===!0&&(M-=1),o=a[30];const Ve={};Ve.image=i.image,Ve.x=36,Ve.h=20,Ve.w=20,Ve.map=i.sprite,C=i.minFps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),Ve.frame=C,m=Ve.is||"Sprite";let ie;if(typeof m=="string"){if(ie=u.components&&u.components[m]||h[m],!ie)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ie=m);a[31]=ie.call(null,{props:Ve},a[30],i),a[31][Symbol.for("slots")][0]?(o=a[31][Symbol.for("slots")][0],y=a[31],v=!0):o=a[31][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[1];const Ae={};a[32]=this.element({parent:o||"root"},v===!0?y:i),Ae.x=150,Ae.y=40,a[32].populate(Ae),v===!0&&(M-=1);const qe=u.components&&u.components.Sprite||h.Sprite;o=a[32];const wt={};a[33]=this.element({parent:o||"root"},v===!0?y:i),wt.image=i.image,wt.w=53,wt.h=25,wt.map=i.sprite,wt.frame="max";const nt=[];if(typeof qe<"u")for(let kt in qe.config.props)delete wt[qe.config.props[kt]],nt.push(qe.config.props[kt]);a[33].populate(wt),v===!0&&(M-=1),o=a[33];const ht={};ht.image=i.image,ht.w=53,ht.h=25,ht.map=i.sprite,ht.frame="max",m=ht.is||"Sprite";let _e;if(typeof m=="string"){if(_e=u.components&&u.components[m]||h[m],!_e)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(_e=m);a[34]=_e.call(null,{props:ht},a[33],i),a[34][Symbol.for("slots")][0]?(o=a[34][Symbol.for("slots")][0],y=a[34],v=!0):o=a[34][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[32];const Le={};a[35]=this.element({parent:o||"root"},v===!0?y:i),Le.x=63,Le.y=2,a[35].populate(Le),v===!0&&(M-=1);const bt=u.components&&u.components.Sprite||h.Sprite;o=a[35];const ve={};a[36]=this.element({parent:o||"root"},v===!0?y:i),ve.image=i.image,ve.x=0,ve.h=20,ve.w=20,ve.map=i.sprite,ve.frame=i.maxFps[0];const fe=[];if(typeof bt<"u")for(let kt in bt.config.props)delete ve[bt.config.props[kt]],fe.push(bt.config.props[kt]);a[36].populate(ve),v===!0&&(M-=1),o=a[36];const Ge={};Ge.image=i.image,Ge.x=0,Ge.h=20,Ge.w=20,Ge.map=i.sprite,C=i.maxFps[0],Array.isArray(C)===!0&&(C=x(C).slice(0)),Ge.frame=C,m=Ge.is||"Sprite";let Et;if(typeof m=="string"){if(Et=u.components&&u.components[m]||h[m],!Et)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Et=m);a[37]=Et.call(null,{props:Ge},a[36],i),a[37][Symbol.for("slots")][0]?(o=a[37][Symbol.for("slots")][0],y=a[37],v=!0):o=a[37][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const jt=u.components&&u.components.Sprite||h.Sprite;o=a[35];const Vt={};a[38]=this.element({parent:o||"root"},v===!0?y:i),Vt.image=i.image,Vt.x=18,Vt.h=20,Vt.w=20,Vt.map=i.sprite,Vt.frame=i.maxFps[1];const ln=[];if(typeof jt<"u")for(let kt in jt.config.props)delete Vt[jt.config.props[kt]],ln.push(jt.config.props[kt]);a[38].populate(Vt),v===!0&&(M-=1),o=a[38];const Be={};Be.image=i.image,Be.x=18,Be.h=20,Be.w=20,Be.map=i.sprite,C=i.maxFps[1],Array.isArray(C)===!0&&(C=x(C).slice(0)),Be.frame=C,m=Be.is||"Sprite";let Ke;if(typeof m=="string"){if(Ke=u.components&&u.components[m]||h[m],!Ke)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ke=m);a[39]=Ke.call(null,{props:Be},a[38],i),a[39][Symbol.for("slots")][0]?(o=a[39][Symbol.for("slots")][0],y=a[39],v=!0):o=a[39][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const On=u.components&&u.components.Sprite||h.Sprite;o=a[35];const wn={};a[40]=this.element({parent:o||"root"},v===!0?y:i),wn.image=i.image,wn.x=36,wn.h=20,wn.w=20,wn.map=i.sprite,wn.frame=i.maxFps[2];const gn=[];if(typeof On<"u")for(let kt in On.config.props)delete wn[On.config.props[kt]],gn.push(On.config.props[kt]);a[40].populate(wn),v===!0&&(M-=1),o=a[40];const $n={};$n.image=i.image,$n.x=36,$n.h=20,$n.w=20,$n.map=i.sprite,C=i.maxFps[2],Array.isArray(C)===!0&&(C=x(C).slice(0)),$n.frame=C,m=$n.is||"Sprite";let Jn;if(typeof m=="string"){if(Jn=u.components&&u.components[m]||h[m],!Jn)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Jn=m);return a[41]=Jn.call(null,{props:$n},a[40],i),a[41][Symbol.for("slots")][0]?(o=a[41][Symbol.for("slots")][0],y=a[41],v=!0):o=a[41][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),a},effects:[function(o,i,u,h,g,x){(typeof skip6>"u"||skip6.indexOf("frame")===-1)&&i[6].set("frame",o.fps[0])},function(o,i,u,h,g,x){i[7][Symbol.for("props")].frame=o.fps[0]},function(o,i,u,h,g,x){(typeof skip8>"u"||skip8.indexOf("frame")===-1)&&i[8].set("frame",o.fps[1])},function(o,i,u,h,g,x){i[9][Symbol.for("props")].frame=o.fps[1]},function(o,i,u,h,g,x){(typeof skip10>"u"||skip10.indexOf("frame")===-1)&&i[10].set("frame",o.fps[2])},function(o,i,u,h,g,x){i[11][Symbol.for("props")].frame=o.fps[2]},function(o,i,u,h,g,x){(typeof skip16>"u"||skip16.indexOf("frame")===-1)&&i[16].set("frame",o.avgFps[0])},function(o,i,u,h,g,x){i[17][Symbol.for("props")].frame=o.avgFps[0]},function(o,i,u,h,g,x){(typeof skip18>"u"||skip18.indexOf("frame")===-1)&&i[18].set("frame",o.avgFps[1])},function(o,i,u,h,g,x){i[19][Symbol.for("props")].frame=o.avgFps[1]},function(o,i,u,h,g,x){(typeof skip20>"u"||skip20.indexOf("frame")===-1)&&i[20].set("frame",o.avgFps[2])},function(o,i,u,h,g,x){i[21][Symbol.for("props")].frame=o.avgFps[2]},function(o,i,u,h,g,x){(typeof skip26>"u"||skip26.indexOf("frame")===-1)&&i[26].set("frame",o.minFps[0])},function(o,i,u,h,g,x){i[27][Symbol.for("props")].frame=o.minFps[0]},function(o,i,u,h,g,x){(typeof skip28>"u"||skip28.indexOf("frame")===-1)&&i[28].set("frame",o.minFps[1])},function(o,i,u,h,g,x){i[29][Symbol.for("props")].frame=o.minFps[1]},function(o,i,u,h,g,x){(typeof skip30>"u"||skip30.indexOf("frame")===-1)&&i[30].set("frame",o.minFps[2])},function(o,i,u,h,g,x){i[31][Symbol.for("props")].frame=o.minFps[2]},function(o,i,u,h,g,x){(typeof skip36>"u"||skip36.indexOf("frame")===-1)&&i[36].set("frame",o.maxFps[0])},function(o,i,u,h,g,x){i[37][Symbol.for("props")].frame=o.maxFps[0]},function(o,i,u,h,g,x){(typeof skip38>"u"||skip38.indexOf("frame")===-1)&&i[38].set("frame",o.maxFps[1])},function(o,i,u,h,g,x){i[39][Symbol.for("props")].frame=o.maxFps[1]},function(o,i,u,h,g,x){(typeof skip40>"u"||skip40.indexOf("frame")===-1)&&i[40].set("frame",o.maxFps[2])},function(o,i,u,h,g,x){i[41][Symbol.for("props")].frame=o.maxFps[2]}],context:{}},state(){return{image:q5,sprite:{defaults:{y:1,w:20,h:20},frames:{"-":{x:-1e3},0:{x:1},1:{x:23},2:{x:45},3:{x:67},4:{x:89},5:{x:111},6:{x:133},7:{x:155},8:{x:177},9:{x:199},avg:{x:221,w:48,h:25},fps:{x:271,w:43,h:25},max:{x:316,w:53,h:25},min:{x:371,w:47,h:25}}},fps:"---",avgFps:"---",minFps:"---",maxFps:"---"}},hooks:{ready(){let f=1e4,o=0,i=0,u=0,h=0;Vl.on("fpsUpdate",(g,{fps:x})=>{f=Math.min(x,f),o=Math.max(x,o),u+=x,h++,i=Math.round(u/h),this.fps=x.toString().padStart(3,"0"),this.avgFps=i.toString().padStart(3,"0"),this.minFps=f.toString().padStart(3,"0"),this.maxFps=o.toString().padStart(3,"0")})}}}),Y5=()=>({Circle:G5(),RouterView:W5(),Sprite:X5(),FPScounter:K5()}),Q5={name:"log",plugin(){return HC("App")}},cg={log:Q5},kT=(f,o="",i={})=>{let u;if(typeof o=="object"?i=o:u=o,typeof f=="function"){if(u===void 0)throw Error("Error registering plugin: name is required for plugin");cg[u]={plugin:f,options:i}}else f.plugin&&kT(f.plugin,u||f.name,i)};let Um;const bC=f=>{throw new Error(`Parameter ${f} is required`)},ou=(f=bC("name"),o=bC("config"))=>{let i;const u=function(g,x,S,a){this.componentId=l_(f),this.lifecycle=Object.assign(Object.create(y_),{component:this,previous:null,current:null}),this.parent=S,this.rootParent=a,this[Se.holder]=x,this[Se.id]=f_(),this[Se.props]=Fl(g.props||{},no.get("reactivityMode")),this[Se.timeouts]=[],this[Se.intervals]=[],this[Se.originalState]=o.state&&typeof o.state=="function"&&o.state.apply(this)||{},this[Se.originalState].hasFocus=!1,this[Se.state]=Fl(this[Se.originalState],no.get("reactivityMode")),this.lifecycle.state="init",this[Se.children]=o.code.render.apply(vg,[x,this,o,Um,vh,vs,dn])||[],this[Se.wrapper]=this[Se.children][0],this[Se.slots]=this[Se.children].filter(C=>C[Se.isSlot]),o.hooks&&(o.hooks.frameTick&&Vl.on("frameTick",(C,y)=>Xm("frameTick",this[Se.identifier],this,[y])),o.hooks.idle&&Vl.on("idle",()=>{Xm("idle",this[Se.identifier],this)}),o.hooks.attach&&this[Se.wrapper].node.on("inBounds",()=>{this.lifecycle.state="attach"}),o.hooks.detach&&this[Se.wrapper].node.on("outOfBounds",(C,{previous:y})=>{y>0&&(this.lifecycle.state="detach")}),o.hooks.enter&&this[Se.wrapper].node.on("inViewport",()=>{this.lifecycle.state="enter"}),o.hooks.exit&&this[Se.wrapper].node.on("outOfViewport",()=>{this.lifecycle.state="exit"}));const m=o.code.effects;for(let C=0;C<m.length;C++){const y=()=>{m[C](this,this[Se.children],o,Um,a,vh)};this[Se.effects].push(y),vh(y)}if(this[Se.watchers]){const C=Object.keys(this[Se.watchers]),y=C.length;for(let v=0;v<y;v++){let M=this,b=C[v];const _=b;if(b.indexOf(".")>-1){const B=b.split(".");b=B.pop();for(let G=0;G<B.length;G++)M=M[B[G]]}let O=this[b];vh((B=!1)=>{const G=M[b];(O!==G||B===!0)&&(this[Se.watchers][_].apply(this,[G,O]),O=G)})}}return setTimeout(()=>this.lifecycle.state="ready"),this},h=(g={},x,S,a)=>{if(gs[Se.launched]===!1){const m=Object.keys(cg),C=m.length,y={};for(let v=0;v<C;v++){const M=m[v],b=`$${M}`;b in gs&&dn.warn(`"${M}" (this.${b}) already exists as a property or plugin on the Base Component. You may be overwriting built-in functionality. Proceed with care!`);const _=cg[M];y[b]={value:Object.defineProperties(_.plugin(_.options),ET),writable:!1,enumerable:!0,configurable:!0}}Object.defineProperties(gs,y);for(const v in y)Object.defineProperties(gs[v],y),delete gs[v][v];Um=Y5(),gs[Se.launched]=!0}return i===void 0&&(dn.debug(`Setting up ${f} component`),i=H5(Object.create(gs),o)),o.code===void 0&&(dn.debug(`Generating code for ${f} component`),o.code=n_.call(o,t_(o.template,f))),u.call(Object.create(i),g,x,S,a)};return h.config=o,h[Se.isComponent]=!0,h},Z5=f=>{const o={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Enter:"enter"," ":"space",Backspace:"back",Escape:"escape",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space",8:"back",27:"escape"};f.hooks=f.hooks||{};let i,u,h;return f.hooks[Se.destroy]=function(){document.removeEventListener("keydown",i),document.removeEventListener("keyup",u)},f.hooks[Se.init]=function(){this.$announcer.toggle(no.get("announcer",!1));const g={...o,...no.get("keymap",{})};i=async x=>{const S=g[x.key]||g[x.keyCode]||x.key||x.keyCode;this[Se.inputEvents]!==void 0&&this[Se.inputEvents].intercept!==void 0&&(x=await this[Se.inputEvents].intercept.call(this,x),!(x instanceof KeyboardEvent))||(Ka.input(S,x),clearTimeout(h),h=setTimeout(()=>{Ka.hold=!0},no.get("holdTimeout",pT)))},u=x=>{const S=fg.get(x.code);S!==void 0&&typeof S=="function"&&(fg.delete(x.code),S()),clearTimeout(h),Ka.hold=!1},document.addEventListener("keydown",i),document.addEventListener("keyup",u),setTimeout(()=>Ka.set(this))},ou("App",f)},tt={Component:ou,Application:Z5,Launch:m5,Plugin:kT},EC=f=>new Promise((o,i)=>{const u=new XMLHttpRequest;u.onreadystatechange=function(){u.readyState==XMLHttpRequest.DONE&&(u.status===0||u.status===200?o(JSON.parse(u.responseText)):i(u.statusText))},u.open("GET",f),u.send(null)}),J5={name:"language",plugin(f={}){let o={},i={};const u=Fl({language:"",loaded:0},no.get("reactivityMode"),!0),h=a=>{const m=Object.keys(o).length===0?"No translations loaded. Please load a file with translations or specify a translations object manually":a in o?!1:`Language ${a} not available in the loaded translations`;m?(dn.warn(m),u.language=a):g(a).then(()=>{u.language=a})},g=a=>new Promise(m=>{const C=o[a];typeof C=="object"?(i=C,m()):typeof C=="string"&&EC(C).then(y=>{o[a]=y,i=y,m()}).catch(y=>{dn.error(y)})}),x=a=>EC(a).then(m=>{S(m)}).catch(m=>{dn.error(m)}),S=a=>{o=a,g(u.language).then(()=>{u.loaded++})};return"file"in f?x(f.file).then(()=>{"language"in f&&h(f.language)}):"language"in f&&h(f.language),{translate(a){u.language,u.loaded;let m=[...arguments].slice(1);return m.length===0?i&&i[a]||a:(m.length===1&&typeof m[0]=="object"&&(m=m.pop()),Object.keys(Array.isArray(m)?Object.assign({},m):m).reduce((C,y)=>C.replace(new RegExp("{\\s?"+y+"\\s?}","g"),m[y]),i&&i[a]||a))},get language(){return u.language},set(a){h(a)},translations(a){S(a)},load(a){return x(a)}}}},eL=(f,o,i)=>{const u=i.split(".");for(let h=0;h<u.length;h++){const g=u[h];if(f!==null&&g in f)f=f[g],o=o!==null&&g in o?o[g]:null;else if(o!==null&&g in o)o=o[g],f=o;else{f=void 0;break}}return f},AT={name:"theme",plugin(f={}){let o={};const i=Fl({current:"default"},no.get("reactivityMode"),!0);let u={},h=null;return"themes"in f?(u=f.themes,i.current=f.current||"default",h=f.base||"default"):u={default:f},{get(g,x){if(i.current,o[g]!==void 0)return o[g];const S=eL(u[i.current],u[h]||null,g);return S!==void 0?(o[g]=S,S):x},set(g){g in u?(o={},i.current=g):dn.warn(`Theme ${g} not found`)}}}},Bm=f=>new URLSearchParams(window.location.search).get(f),Cl={sky:{test(){return navigator.userAgent.indexOf("WPE Sky")>-1||Bm("keymapping")==="sky"},mapping:{Escape:"back",27:"back"}},webos:{test(){return navigator.userAgent.indexOf("WebOS")>-1||Bm("keymapping")==="webos"},mapping:{19:"pause",33:"channelUp",34:"channelDown",412:"rewind",413:"stop",415:"play",417:"fastForward",461:"back"}},tizen:{test(){return navigator.userAgent.indexOf("Tizen")>-1||Bm("keymapping")==="tizen"},mapping:{10009:"back",10252:"playPause",19:"pause",412:"rewind",413:"stop",415:"play",417:"fastForward",427:"channelUp",428:"channelDown"}}},tL=()=>{let f={};return Object.keys(Cl).forEach(o=>{if(Cl[o].test&&typeof Cl[o].test=="function"&&Cl[o].test()===!0){f=Cl[o].mapping;return}}),f},nL="modulepreload",iL=function(f){return"/"+f},kC={},oL=function(o,i,u){if(!i||i.length===0)return o();const h=document.getElementsByTagName("link");return Promise.all(i.map(g=>{if(g=iL(g),g in kC)return;kC[g]=!0;const x=g.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(!!u)for(let C=h.length-1;C>=0;C--){const y=h[C];if(y.href===g&&(!x||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${S}`))return;const m=document.createElement("link");if(m.rel=x?"stylesheet":nL,x||(m.as="script",m.crossOrigin=""),m.href=g,document.head.appendChild(m),x)return new Promise((C,y)=>{m.addEventListener("load",C),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${g}`)))})})).then(()=>o()).catch(g=>{const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=g,window.dispatchEvent(x),!x.defaultPrevented)throw g})},rL=tt.Component("PortalItem",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w=370,m.h=320,m.scale={transition:i.hasFocus?1.1:1},m.color=i.backgroundColor,m.effects=[{type:"radius",props:{radius:6}}],a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.x=30,C.y=30,C.content=i.number,C.size=84,C.color=i.fontColor,C.__textnode=!0,a[1].populate(C),o=a[0];const y={};a[2]=this.element({parent:o||"root"},i),y.x=30,y.y=140,y.content=i.title,y.size=42,y.font="raleway",y.color=i.fontColor,y.letterspacing=2,y.__textnode=!0,a[2].populate(y),o=a[0];const v={};return a[3]=this.element({parent:o||"root"},i),v.x=30,v.y=200,v.content=i.description,v.maxwidth=300,v.size=28,v.color=i.fontColor,v.lineheight=32,v.__textnode=!0,a[3].populate(v),a},effects:[function(o,i,u,h,g,x){i[0].set("scale",{transition:o.hasFocus?1.1:1})},function(o,i,u,h,g,x){i[0].set("color",o.backgroundColor)},function(o,i,u,h,g,x){i[0].set("effects",[{type:"radius",props:{radius:6}}])},function(o,i,u,h,g,x){i[1].set("content",o.number)},function(o,i,u,h,g,x){i[1].set("color",o.fontColor)},function(o,i,u,h,g,x){i[2].set("content",o.title)},function(o,i,u,h,g,x){i[2].set("color",o.fontColor)},function(o,i,u,h,g,x){i[3].set("content",o.description)},function(o,i,u,h,g,x){i[3].set("color",o.fontColor)}],context:{}},props:["title","description","index","id"],state(){return{backgroundColor:"#44037a",fontColor:"#e8d7f9",number:this.index<9?`0${this.index+1}`:this.index+1}},hooks:{focus(){this.backgroundColor="#fafafa",this.fontColor="#000"},unfocus(){this.$router.navigating||(this.backgroundColor="#44037a",this.fontColor="#e8d7f9")}},input:{enter(){this.$router.to(`/${this.id}`)},back(){}}}),sL=tt.Component("PortalRow",{components:{PortalItem:rL},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1;const M={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(M),o=a[0];const b={};a[1]=this.element({parent:o||"root"},v===!0?y:i),b.alpha={transition:{value:i.itemOffset<240?1:0,duration:200}},a[1].populate(b),o=a[1];const _={};a[2]=this.element({parent:o||"root"},v===!0?y:i),_.content=i.title,_.x=60,_.__textnode=!0,a[2].populate(_),o=a[1];const O={};a[3]=this.element({parent:o||"root"},v===!0?y:i),O.y=50,O.x=60,O.h=1,O.w=1800,O.color="0xe8d7f9ff",a[3].populate(O),o=a[0];const B={};a[4]=this.element({parent:o||"root"},v===!0?y:i),B.y=100,B.x={transition:i.rowOffset},a[4].populate(B),o=a[4];const G=[];let $,j;const ne=(K=[],ee,de)=>{const k=x(K),V=new Set;let Q=k.length;const se={};for($=se.from||0,j=("to"in se)?se.to:k.length;Q--;){const Z=k[Q];Q<j&&Q>=$&&V.add(""+Z.id)}let J=de.length;for(;J--;)if(V.has(de[J])===!1){const Z=de[J];ee[5][Z]&&ee[5][Z].destroy(),delete ee[5][Z],ee[6][Z]&&ee[6][Z].destroy(),delete ee[6][Z]}de.length=0;const te=k.length,W=[];for(let Z=0;Z<te;Z++){if(Z<$||Z>=j)continue;const ce=Object.create(i);o=ee[4],ce.item=k[Z],ce.index=Z,ce.key=""+ce.item.id,de.push(ce.key);const xe=u.components&&u.components.PortalItem||h.PortalItem;ee[5]===void 0&&(ee[5]={});const ge={};ee[5][ce.key]===void 0&&(ee[5][ce.key]=this.element({parent:o||"root"},v===!0?y:i)),ge.x={transition:{value:ce.itemOffset+ce.index*430,delay:50*(ce.index%4),duration:500}},ge.title=ce.item.title,ge.description=ce.item.description,ge.id=ce.item.id,ge.index=ce.index,ge.ref="item"+ce.index;const pe=[];if(typeof xe<"u")for(let z in xe.config.props)delete ge[xe.config.props[z]],pe.push(xe.config.props[z]);ee[5][ce.key].nodeId===void 0&&ee[5][ce.key].populate(ge),ee[6]===void 0&&(ee[6]={}),o=ee[5][ce.key];const Ee={};if(ee[6][ce.key]===void 0){C={transition:{value:ce.itemOffset+ce.index*430,delay:50*(ce.index%4),duration:500}},Array.isArray(C)===!0&&(C=x(C).slice(0)),Ee.x=C,Ee.title=ce.item.title,Ee.description=ce.item.description,Ee.id=ce.item.id,Ee.index=ce.index,C="item"+ce.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ee.ref=C,m=Ee.is||"PortalItem";let z;if(typeof m=="string"){if(z=u.components&&u.components[m]||h[m],!z)throw new Error('Component "PortalItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);ee[6][ce.key]=z.call(null,{props:Ee},ee[5][ce.key],i),ee[6][ce.key][Symbol.for("slots")][0]?(o=ee[6][ce.key][Symbol.for("slots")][0],y=ee[6][ce.key],v=!0):o=ee[6][ce.key][Symbol.for("children")][0]}let Re=()=>{(typeof pe>"u"||pe.indexOf("ref")===-1)&&ee[5][ce.key].set("ref","item"+ce.index)};g(Re,null),W.push(Re),ee[6][ce.key][Symbol.for("props")].ref="item"+ce.index}return W};let X;return g(()=>{i[Symbol.for("removeGlobalEffects")](X),X=null,X=ne(i.items,a,G)},["items"]),g(()=>{i.itemOffset;for(let K=0;K<i.items.length;K++){if(K<$||K>=j)continue;const ee={};ee.index=K,ee.item=i.items[K],ee.key=ee.item.id,(typeof skip5>"u"||skip5.indexOf("x")===-1)&&a[5][ee.key].set("x",{transition:{value:i.itemOffset+ee.index*430,delay:50*(ee.index%4),duration:500}})}}),g(()=>{i.itemOffset;for(let K=0;K<i.items.length;K++){if(K<$||K>=j)continue;const ee={};ee.index=K,ee.item=i.items[K],ee.key=ee.item.id,a[6][ee.key][Symbol.for("props")].x={transition:{value:i.itemOffset+ee.index*430,delay:50*(ee.index%4),duration:500}}}}),a},effects:[function(o,i,u,h,g,x){i[1].set("alpha",{transition:{value:o.itemOffset<240?1:0,duration:200}})},function(o,i,u,h,g,x){i[4].set("x",{transition:o.rowOffset})}],context:{}},props:["title","items"],state(){return{focused:0,rowOffset:60,itemOffset:240}},hooks:{ready(){this.itemOffset=0},focus(){this.$trigger("focused")}},watch:{focused(f){const o=this.$select(`item${f}`);o&&o.$focus&&(o.$focus(),f<1?this.rowOffset=60:f>this.items.length-2?this.rowOffset=60-(this.items.length-2)*430+430:this.rowOffset=60-f*430+430)}},input:{left(){this.focused>0?this.focused--:this.focused=this.items.length-1},right(){this.focused<this.items.length-1?this.focused++:this.focused=0}}}),IT=tt.Component("SourceInfo",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.x=1860,m.y={transition:{value:1060+i.offsetY,delay:1e3,duration:300,easing:"ease-out"}},m.alpha={transition:{value:i.alpha,delay:1e3,duration:300,easing:"ease-out"}},m.w=480,m.h=100,m.mount=1,m.color="{top: '0x000000dd', bottom: '0x000000ff'}",m.effects=[{type:"radius",props:{radius:10}}],a[0].populate(m),o=a[0];const C={};return a[1]=this.element({parent:o||"root"},i),C.y=18,C.x=20,C.size=26,C.maxwidth=440,C.align="center",C.lineheight=32,C.content='Press "U" to check out the source code of this example on GitHub',C.__textnode=!0,a[1].populate(C),a},effects:[function(o,i,u,h,g,x){i[0].set("y",{transition:{value:1060+o.offsetY,delay:1e3,duration:300,easing:"ease-out"}})},function(o,i,u,h,g,x){i[0].set("alpha",{transition:{value:o.alpha,delay:1e3,duration:300,easing:"ease-out"}})},function(o,i,u,h,g,x){i[0].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state(){return{offsetY:15,alpha:0}},hooks:{ready(){this.offsetY=0,this.alpha=1}}}),aL="@lightningjs/blits-example-app",uL="1.12.0",lL="Lightning 3 Blits Example App",fL="index.js",cL="module",hL={start:"npm run dev","start:test":"NODE_ENV=testing npm run dev",lint:"eslint '**/*.js'","lint:fix":"eslint '**/*.js' --fix",build:"vite build",dev:"vite dev --host",test:"NODE_ENV=testing backstop --config=backstop.cjs test","test:reference":"NODE_ENV=testing backstop --config=backstop.cjs reference"},dL={hooks:{"pre-commit":"lint-staged"}},pL="Michiel van der Geest <hello@michielvandergeest.com>",mL="Apache-2",gL={backstopjs:"^6.3.22",eslint:"^8.8.0","eslint-config-prettier":"^8.3.0","eslint-plugin-prettier":"^4.0.0",husky:"^7.0.4","lint-staged":"^12.3.3",playwright:"^1.41.0",prettier:"^2.5.1","shaka-player":"^4.7.1",vite:"^4.0.4"},yL={"@firebolt-js/sdk":"^1.4.1","@lightningjs/blits":"^1.25.1"},vL={name:aL,version:uL,description:lL,main:fL,type:cL,scripts:hL,"lint-staged":{"*.js":["eslint --fix"]},husky:dL,author:pL,license:mL,devDependencies:gL,dependencies:yL},xL=tt.Component("Portal",{components:{PortalRow:sL,SourceInfo:IT},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),b.w=1920,b.h=1080,b.color="{top: '0x44037aff', bottom: '0x240244ff'}",a[0].populate(b),v===!0&&(M-=1);const _=u.components&&u.components.PortalRow||h.PortalRow;o=a[0];const O={};a[1]=this.element({parent:o||"root"},v===!0?y:i),O.mount="{y: 0.5}",O.h=500,O.y={transition:-i.rowFocused*420+550},O.title="Demos",O.items=i.demo,O.ref="row0";const B=[];if(typeof _<"u")for(let Ee in _.config.props)delete O[_.config.props[Ee]],B.push(_.config.props[Ee]);a[1].populate(O),v===!0&&(M-=1),o=a[1];const G={};G.mount="{y: 0.5}",G.h=500,C={transition:-i.rowFocused*420+550},Array.isArray(C)===!0&&(C=x(C).slice(0)),G.y=C,G.title="Demos",G.items=i.demo,G.ref="row0",m=G.is||"PortalRow";let $;if(typeof m=="string"){if($=u.components&&u.components[m]||h[m],!$)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);a[2]=$.call(null,{props:G},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],y=a[2],v=!0):o=a[2][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const j=u.components&&u.components.PortalRow||h.PortalRow;o=a[0];const ne={};a[3]=this.element({parent:o||"root"},v===!0?y:i),ne.mount="{y: 0.5}",ne.h=500,ne.y={transition:-i.rowFocused*420+1100},ne.title="Examples and tests",ne.items=i.example,ne.ref="row1";const X=[];if(typeof j<"u")for(let Ee in j.config.props)delete ne[j.config.props[Ee]],X.push(j.config.props[Ee]);a[3].populate(ne),v===!0&&(M-=1),o=a[3];const K={};K.mount="{y: 0.5}",K.h=500,C={transition:-i.rowFocused*420+1100},Array.isArray(C)===!0&&(C=x(C).slice(0)),K.y=C,K.title="Examples and tests",K.items=i.example,K.ref="row1",m=K.is||"PortalRow";let ee;if(typeof m=="string"){if(ee=u.components&&u.components[m]||h[m],!ee)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);a[4]=ee.call(null,{props:K},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],y=a[4],v=!0):o=a[4][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const de=u.components&&u.components.PortalRow||h.PortalRow;o=a[0];const k={};a[5]=this.element({parent:o||"root"},v===!0?y:i),k.mount="{y: 0.5}",k.h=500,k.y={transition:-i.rowFocused*420+1650},k.title="Benchmarks and stress tests",k.items=i.benchmark,k.ref="row2";const V=[];if(typeof de<"u")for(let Ee in de.config.props)delete k[de.config.props[Ee]],V.push(de.config.props[Ee]);a[5].populate(k),v===!0&&(M-=1),o=a[5];const Q={};Q.mount="{y: 0.5}",Q.h=500,C={transition:-i.rowFocused*420+1650},Array.isArray(C)===!0&&(C=x(C).slice(0)),Q.y=C,Q.title="Benchmarks and stress tests",Q.items=i.benchmark,Q.ref="row2",m=Q.is||"PortalRow";let se;if(typeof m=="string"){if(se=u.components&&u.components[m]||h[m],!se)throw new Error('Component "PortalRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(se=m);a[6]=se.call(null,{props:Q},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],y=a[6],v=!0):o=a[6][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[0];const J={};a[7]=this.element({parent:o||"root"},v===!0?y:i),J.w=1920,J.h=200,J.color="0x44037aff",a[7].populate(J),v===!0&&(M-=1),o=a[7];const te={};a[8]=this.element({parent:o||"root"},v===!0?y:i),te.w=1920,te.h=70,te.y=200,te.color="{top: '0x44037aff'}",a[8].populate(te),v===!0&&(M-=1),o=a[7];const W={};a[9]=this.element({parent:o||"root"},v===!0?y:i),W.y={transition:{value:80-i.logoOffset,duration:400}},a[9].populate(W),v===!0&&(M-=1),o=a[9];const Z={};a[10]=this.element({parent:o||"root"},v===!0?y:i),Z.src="assets/blits-logo-full.png",Z.w=200,Z.h=112,Z.x=60,a[10].populate(Z),v===!0&&(M-=1),o=a[9];const ce={};a[11]=this.element({parent:o||"root"},v===!0?y:i),ce.w=2,ce.h=120,ce.y="-10",ce.color="0xffffff80",ce.x=300,a[11].populate(ce),v===!0&&(M-=1),o=a[9];const xe={};a[12]=this.element({parent:o||"root"},v===!0?y:i),xe.x=320,xe.y=16,a[12].populate(xe),v===!0&&(M-=1),o=a[12];const ge={};a[13]=this.element({parent:o||"root"},v===!0?y:i),ge.y=0,ge.size=36,ge.content="Example App",ge.__textnode=!0,a[13].populate(ge),v===!0&&(M-=1),o=a[12];const pe={};return a[14]=this.element({parent:o||"root"},v===!0?y:i),pe.y=50,pe.size=24,pe.content="v"+i.version,pe.__textnode=!0,a[14].populate(pe),v===!0&&(M-=1),a},effects:[function(o,i,u,h,g,x){(typeof skip1>"u"||skip1.indexOf("y")===-1)&&i[1].set("y",{transition:-o.rowFocused*420+550})},function(o,i,u,h,g,x){i[2][Symbol.for("props")].y={transition:-o.rowFocused*420+550}},function(o,i,u,h,g,x){(typeof skip3>"u"||skip3.indexOf("y")===-1)&&i[3].set("y",{transition:-o.rowFocused*420+1100})},function(o,i,u,h,g,x){i[4][Symbol.for("props")].y={transition:-o.rowFocused*420+1100}},function(o,i,u,h,g,x){(typeof skip5>"u"||skip5.indexOf("y")===-1)&&i[5].set("y",{transition:-o.rowFocused*420+1650})},function(o,i,u,h,g,x){i[6][Symbol.for("props")].y={transition:-o.rowFocused*420+1650}},function(o,i,u,h,g,x){i[9].set("y",{transition:{value:80-o.logoOffset,duration:400}})}],context:{}},state(){return{version:vL.version,offset:60,rowFocused:0,rows:["demo","example","benchmark"],logoOffset:50,demo:[{title:"Loader",id:"demos/loading",description:"A basic loading screen"},{title:"Intro",id:"demos/intro",description:"A splash screen with custom animations"},{title:"Theming",id:"demos/theming",description:"Dynamically changing the styling of a component with themes"},{title:"TMDB",id:"demos/tmdb",description:"The Movie Database (TMDB) example using data from a remote API"},{title:"Sprites",id:"demos/sprites",description:"Display multiple images while keeping low memory footprint"},{title:"Focus",id:"demos/focushandling",description:"Managing focus between components in a simple layout"},{title:"Memory Game",id:"demos/memory-game",description:"Memory game with speech assistence (for accessibility)"},{title:"Video player",id:"demos/player",description:"Example of Video Playback with basic controls"}],example:[{title:"Positioning",id:"examples/positioning",description:"Positioning Elements and Components"},{title:"Colors",id:"examples/colors",description:"Using different formats and notations for defining colors"},{title:"Gradients",id:"examples/gradients",description:"Example of Basic gradients"},{title:"Transitions",id:"examples/transitions",description:"Comparing different transition easing functions"},{title:"Components",id:"examples/components",description:"Reusable Components"},{title:"Alpha",id:"examples/alpha",description:"Applying transparency to Elements, Images and Components"},{title:"Scaling",id:"examples/scaling",description:"Resizing and scaling Elements and Components"},{title:"Rotation",id:"examples/rotation",description:"Rotating Elements"},{title:"Key input",id:"examples/keyinput",description:"Handling user input events"},{title:"For Loop",id:"examples/forloop",description:"Iterating over Elements and Components using for loops"},{title:"Advanced loop",id:"examples/forloop-advanced",description:"Testing various Array operations with a for loop"},{title:"Effects",id:"examples/effects",description:"Applying one or multiple effects (aka shaders)"},{title:"Show",id:"examples/showif",description:"Conditionally show or hide Elements and Components"},{title:"Events",id:"examples/events",description:"Communication between components by emitting and listening for events"},{title:"Images",id:"examples/images",description:"1 image says more than 1000 words ;)"},{title:"Texts",id:"examples/texts",description:"Displaying and formatting text"},{title:"Slots",id:"examples/slots",description:"Insert dynamic content from a parent into a child using slots"},{title:"Viewport",id:"examples/viewport",description:"Lifecycle events when entering and leaving the viewport (margins)"},{title:"Router Hooks",id:"examples/router-hooks",description:"Example of router before hook"},{title:"Image resizing",id:"examples/resize",description:'Using the "fit" syntax for resizing images on the fly'},{title:"Translations",id:"examples/translations",description:"Language Plugin for internationalization"},{title:"Firebolt",id:"examples/firebolt",description:"Example Firebolt Integration"},{title:"Keycodes",id:"examples/keycodes",description:"Find the correct keycode mappings for your device"},{title:"Special Chars",id:"examples/special-characters",description:"Accents and special characters with MSDF fonts"},{title:"Layout",id:"examples/layout",description:'Using the built-in "Layout" Component'}],benchmark:[{title:"Exponential",id:"benchmarks/exponential",description:"Spawn a large number of components at an exponential rate"}]}},hooks:{ready(){this.logoOffset=0,this.$trigger("rowFocused")}},watch:{rowFocused(f){const o=this.$select(`row${f}`);o&&o.$focus&&o.$focus()}},input:{up(){this.rowFocused=(this.rowFocused-1+this.rows.length)%this.rows.length},down(){this.rowFocused=(this.rowFocused+1)%this.rows.length}}}),wL=tt.Component("Letter",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.w=i.w,C.h={transition:{value:410+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},C.color="0xe6e6e6ff",a[1].populate(C),o=a[0];const y={};a[2]=this.element({parent:o||"root"},i),y.w=i.w,y.h=280,y.src=i.image,y.y={transition:{value:400+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},a[2].populate(y),o=a[0];const v={};return a[3]=this.element({parent:o||"root"},i),v.w=i.w,v.color="0xe6e6e6ff",v.h={transition:{value:500-i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},v.y={transition:{value:660+i.offset,duration:i.duration,delay:i.wait,easing:i.timingFunction}},a[3].populate(v),a},effects:[function(o,i,u,h,g,x){i[1].set("h",{transition:{value:410+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})},function(o,i,u,h,g,x){i[2].set("src",o.image)},function(o,i,u,h,g,x){i[2].set("y",{transition:{value:400+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})},function(o,i,u,h,g,x){i[3].set("h",{transition:{value:500-o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})},function(o,i,u,h,g,x){i[3].set("y",{transition:{value:660+o.offset,duration:o.duration,delay:o.wait,easing:o.timingFunction}})}],context:{}},props:["w","letter","direction","delay"],computed:{image(){return this.letter,`assets/${this.letter}.png`}},state(){return{offset:this.direction==="up"?-680:680,duration:1e3,wait:0,timingFunction:"cubic-bezier(1,-0.64,.39,1.44)"}},hooks:{ready(){this.animate()}},methods:{animate(){this.$setTimeout(()=>{this.offset=0},1e3),this.$setTimeout(()=>{this.wait=this.delay+150,this.duration=1e3,this.offset=1080},2800),this.$setTimeout(()=>{this.wait=this.delay/3,this.timingFunction="ease-in-out",this.duration=1500,this.offset=0},5e3)}}}),SL=tt.Component("Intro",{components:{Letter:wL},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),M.w=1920,M.h=1080,M.src="assets/background.jpg",a[0].populate(M),y===!0&&(v-=1);const b=u.components&&u.components.Letter||h.Letter;o=a[0];const _={};a[1]=this.element({parent:o||"root"},y===!0?C:i),_.letter="l",_.w=294;const O=[];if(typeof b<"u")for(let dt in b.config.props)delete _[b.config.props[dt]],O.push(b.config.props[dt]);a[1].populate(_),y===!0&&(v-=1),o=a[1];const B={};B.letter="l",B.w=294,m=B.is||"Letter";let G;if(typeof m=="string"){if(G=u.components&&u.components[m]||h[m],!G)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);a[2]=G.call(null,{props:B},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],C=a[2],y=!0):o=a[2][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const $=u.components&&u.components.Letter||h.Letter;o=a[0];const j={};a[3]=this.element({parent:o||"root"},y===!0?C:i),j.letter="i-1",j.w=128,j.x=294,j.direction="up",j.delay=50;const ne=[];if(typeof $<"u")for(let dt in $.config.props)delete j[$.config.props[dt]],ne.push($.config.props[dt]);a[3].populate(j),y===!0&&(v-=1),o=a[3];const X={};X.letter="i-1",X.w=128,X.x=294,X.direction="up",X.delay=50,m=X.is||"Letter";let K;if(typeof m=="string"){if(K=u.components&&u.components[m]||h[m],!K)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(K=m);a[4]=K.call(null,{props:X},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],C=a[4],y=!0):o=a[4][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const ee=u.components&&u.components.Letter||h.Letter;o=a[0];const de={};a[5]=this.element({parent:o||"root"},y===!0?C:i),de.letter="g-1",de.w=205,de.x=422,de.delay=100;const k=[];if(typeof ee<"u")for(let dt in ee.config.props)delete de[ee.config.props[dt]],k.push(ee.config.props[dt]);a[5].populate(de),y===!0&&(v-=1),o=a[5];const V={};V.letter="g-1",V.w=205,V.x=422,V.delay=100,m=V.is||"Letter";let Q;if(typeof m=="string"){if(Q=u.components&&u.components[m]||h[m],!Q)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Q=m);a[6]=Q.call(null,{props:V},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],C=a[6],y=!0):o=a[6][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const se=u.components&&u.components.Letter||h.Letter;o=a[0];const J={};a[7]=this.element({parent:o||"root"},y===!0?C:i),J.letter="h",J.w=224,J.x=627,J.direction="up",J.delay=150;const te=[];if(typeof se<"u")for(let dt in se.config.props)delete J[se.config.props[dt]],te.push(se.config.props[dt]);a[7].populate(J),y===!0&&(v-=1),o=a[7];const W={};W.letter="h",W.w=224,W.x=627,W.direction="up",W.delay=150,m=W.is||"Letter";let Z;if(typeof m=="string"){if(Z=u.components&&u.components[m]||h[m],!Z)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Z=m);a[8]=Z.call(null,{props:W},a[7],i),a[8][Symbol.for("slots")][0]?(o=a[8][Symbol.for("slots")][0],C=a[8],y=!0):o=a[8][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const ce=u.components&&u.components.Letter||h.Letter;o=a[0];const xe={};a[9]=this.element({parent:o||"root"},y===!0?C:i),xe.letter="t",xe.w=190,xe.x=851,xe.delay=200;const ge=[];if(typeof ce<"u")for(let dt in ce.config.props)delete xe[ce.config.props[dt]],ge.push(ce.config.props[dt]);a[9].populate(xe),y===!0&&(v-=1),o=a[9];const pe={};pe.letter="t",pe.w=190,pe.x=851,pe.delay=200,m=pe.is||"Letter";let Ee;if(typeof m=="string"){if(Ee=u.components&&u.components[m]||h[m],!Ee)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ee=m);a[10]=Ee.call(null,{props:pe},a[9],i),a[10][Symbol.for("slots")][0]?(o=a[10][Symbol.for("slots")][0],C=a[10],y=!0):o=a[10][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const Re=u.components&&u.components.Letter||h.Letter;o=a[0];const z={};a[11]=this.element({parent:o||"root"},y===!0?C:i),z.letter="n-1",z.w=221,z.x=1041,z.direction="up",z.delay=250;const Me=[];if(typeof Re<"u")for(let dt in Re.config.props)delete z[Re.config.props[dt]],Me.push(Re.config.props[dt]);a[11].populate(z),y===!0&&(v-=1),o=a[11];const ye={};ye.letter="n-1",ye.w=221,ye.x=1041,ye.direction="up",ye.delay=250,m=ye.is||"Letter";let Ue;if(typeof m=="string"){if(Ue=u.components&&u.components[m]||h[m],!Ue)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ue=m);a[12]=Ue.call(null,{props:ye},a[11],i),a[12][Symbol.for("slots")][0]?(o=a[12][Symbol.for("slots")][0],C=a[12],y=!0):o=a[12][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const De=u.components&&u.components.Letter||h.Letter;o=a[0];const We={};a[13]=this.element({parent:o||"root"},y===!0?C:i),We.letter="i-2",We.w=115,We.x=1262,We.delay=300;const Xe=[];if(typeof De<"u")for(let dt in De.config.props)delete We[De.config.props[dt]],Xe.push(De.config.props[dt]);a[13].populate(We),y===!0&&(v-=1),o=a[13];const ze={};ze.letter="i-2",ze.w=115,ze.x=1262,ze.delay=300,m=ze.is||"Letter";let we;if(typeof m=="string"){if(we=u.components&&u.components[m]||h[m],!we)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(we=m);a[14]=we.call(null,{props:ze},a[13],i),a[14][Symbol.for("slots")][0]?(o=a[14][Symbol.for("slots")][0],C=a[14],y=!0):o=a[14][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const et=u.components&&u.components.Letter||h.Letter;o=a[0];const Je={};a[15]=this.element({parent:o||"root"},y===!0?C:i),Je.letter="n-2",Je.w=219,Je.x=1377,Je.direction="up",Je.delay=350;const Ze=[];if(typeof et<"u")for(let dt in et.config.props)delete Je[et.config.props[dt]],Ze.push(et.config.props[dt]);a[15].populate(Je),y===!0&&(v-=1),o=a[15];const ot={};ot.letter="n-2",ot.w=219,ot.x=1377,ot.direction="up",ot.delay=350,m=ot.is||"Letter";let St;if(typeof m=="string"){if(St=u.components&&u.components[m]||h[m],!St)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(St=m);a[16]=St.call(null,{props:ot},a[15],i),a[16][Symbol.for("slots")][0]?(o=a[16][Symbol.for("slots")][0],C=a[16],y=!0):o=a[16][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const lt=u.components&&u.components.Letter||h.Letter;o=a[0];const It={};a[17]=this.element({parent:o||"root"},y===!0?C:i),It.letter="g-2",It.w=324,It.x=1596,It.direction="up",It.delay=400;const je=[];if(typeof lt<"u")for(let dt in lt.config.props)delete It[lt.config.props[dt]],je.push(lt.config.props[dt]);a[17].populate(It),y===!0&&(v-=1),o=a[17];const at={};at.letter="g-2",at.w=324,at.x=1596,at.direction="up",at.delay=400,m=at.is||"Letter";let xt;if(typeof m=="string"){if(xt=u.components&&u.components[m]||h[m],!xt)throw new Error('Component "Letter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xt=m);return a[18]=xt.call(null,{props:at},a[17],i),a[18][Symbol.for("slots")][0]?(o=a[18][Symbol.for("slots")][0],C=a[18],y=!0):o=a[18][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),a},effects:[],context:{}}}),CL=tt.Component("Toggle",{code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),b.w=100,b.h=50,b.y=5,b.color=i.bgColor,b.effects=[{type:"radius",props:{radius:25}}],a[0].populate(b),v===!0&&(M-=1);const _=u.components&&u.components.Circle||h.Circle;o=a[0];const O={};a[1]=this.element({parent:o||"root"},v===!0?y:i),O.x={transition:i.on?0:50},O.size=50;const B=[];if(typeof _<"u")for(let j in _.config.props)delete O[_.config.props[j]],B.push(_.config.props[j]);a[1].populate(O),v===!0&&(M-=1),o=a[1];const G={};C={transition:i.on?0:50},Array.isArray(C)===!0&&(C=x(C).slice(0)),G.x=C,G.size=50,C=i.primaryColor,Array.isArray(C)===!0&&(C=x(C).slice(0)),G.color=C,m=G.is||"Circle";let $;if(typeof m=="string"){if($=u.components&&u.components[m]||h[m],!$)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);return a[2]=$.call(null,{props:G},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],y=a[2],v=!0):o=a[2][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),a},effects:[function(o,i,u,h,g,x){i[0].set("color",o.bgColor)},function(o,i,u,h,g,x){i[0].set("effects",[{type:"radius",props:{radius:25}}])},function(o,i,u,h,g,x){(typeof skip1>"u"||skip1.indexOf("x")===-1)&&i[1].set("x",{transition:o.on?0:50})},function(o,i,u,h,g,x){i[2][Symbol.for("props")].x={transition:o.on?0:50}},function(o,i,u,h,g,x){i[2][Symbol.for("props")].color=o.primaryColor}],context:{}},props:["bgColor","primaryColor","on"]}),TL=tt.Component("Bar",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w={value:i.w,duration:i.duration},m.h={value:i.h,duration:i.duration},m.color=i.bgColor,m.x=i.index*(i.w+i.w/4),m.effects=[{type:"radius",props:{radius:10}}],a[0].populate(m),o=a[0];const C={};return a[1]=this.element({parent:o||"root"},i),C.w=i.w,C.y={transition:{value:i.h-i.innerH,duration:i.duration}},C.h={transition:{value:i.innerH,duration:i.duration}},C.color=i.primaryColor,C.effects=[{type:"radius",props:{radius:10}}],a[1].populate(C),a},effects:[function(o,i,u,h,g,x){i[0].set("w",{value:o.w,duration:o.duration})},function(o,i,u,h,g,x){i[0].set("h",{value:o.h,duration:o.duration})},function(o,i,u,h,g,x){i[0].set("color",o.bgColor)},function(o,i,u,h,g,x){i[0].set("x",o.index*(o.w+o.w/4))},function(o,i,u,h,g,x){i[0].set("effects",[{type:"radius",props:{radius:10}}])},function(o,i,u,h,g,x){i[1].set("w",o.w)},function(o,i,u,h,g,x){i[1].set("y",{transition:{value:o.h-o.innerH,duration:o.duration}})},function(o,i,u,h,g,x){i[1].set("h",{transition:{value:o.innerH,duration:o.duration}})},function(o,i,u,h,g,x){i[1].set("color",o.primaryColor)},function(o,i,u,h,g,x){i[1].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},props:["bgColor","primaryColor","height","index","size"],state(){return{h:200,innerH:0,duration:400}},hooks:{ready(){this.innerH=this.height}},computed:{w(){return this.size,this.size==="large"?110:72}},watch:{bgColor(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},200)},size(){this.duration=1e-6,this.innerH=0,this.$setTimeout(()=>{this.duration=400,this.innerH=this.height},100)}}}),bL=tt.Component("Theming",{components:{Bar:TL,Toggle:CL},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),b.w=1920,b.h=1080,b.color={transition:i.$colors.get("bg")},a[0].populate(b),v===!0&&(M-=1),o=a[0];const _={};a[1]=this.element({parent:o||"root"},v===!0?y:i),_.y=1020,_.x=1160,_.size=28,_.color=i.$colors.get("color4"),_.content='Use "up", "down", "left" and "right" to change the appearance',_.__textnode=!0,a[1].populate(_),v===!0&&(M-=1),o=a[0];const O={};a[2]=this.element({parent:o||"root"},v===!0?y:i),O.x={transition:(1920-i.$sizes.get("w"))/2},O.y={transition:(1080-i.$sizes.get("h"))/2},a[2].populate(O),v===!0&&(M-=1),o=a[2];const B={};a[3]=this.element({parent:o||"root"},v===!0?y:i),B.x="-250",B.y="-100",B.src="assets/shadow.png",B.w=1e3,B.h=900,B.alpha=.5,a[3].populate(B),v===!0&&(M-=1),o=a[2];const G={};a[4]=this.element({parent:o||"root"},v===!0?y:i),G.w={transition:i.$sizes.get("w")},G.h={transition:i.$sizes.get("h")},G.color=i.$colors.get("color1"),G.effects=[{type:"radius",props:{radius:i.radius}}],a[4].populate(G),v===!0&&(M-=1),o=a[4];const $={};a[5]=this.element({parent:o||"root"},v===!0?y:i),$.w={transition:i.$sizes.get("w")},$.h=100,$.color=i.$colors.get("color2"),$.effects=[{type:"radius",props:{radius:i.radius}}],a[5].populate($),v===!0&&(M-=1),o=a[4];const j={};a[6]=this.element({parent:o||"root"},v===!0?y:i),j.w={transition:i.$sizes.get("w")},j.h=80,j.y=20,j.color=i.$colors.get("color2"),a[6].populate(j),v===!0&&(M-=1),o=a[4];const ne={};a[7]=this.element({parent:o||"root"},v===!0?y:i),ne.content=i.text,ne.color=i.$colors.get("color3"),ne.size=28,ne.x=20,ne.y=14,ne.__textnode=!0,a[7].populate(ne),v===!0&&(M-=1);const X=u.components&&u.components.Toggle||h.Toggle;o=a[4];const K={};a[8]=this.element({parent:o||"root"},v===!0?y:i),K.x={transition:i.$sizes.get("w")-120},K.on=i.mode==="dark",K.bgColor=i.$colors.get("color1"),K.primaryColor="#22c55e";const ee=[];if(typeof X<"u")for(let je in X.config.props)delete K[X.config.props[je]],ee.push(X.config.props[je]);a[8].populate(K),v===!0&&(M-=1),o=a[8];const de={};C={transition:i.$sizes.get("w")-120},Array.isArray(C)===!0&&(C=x(C).slice(0)),de.x=C,C=i.mode==="dark",Array.isArray(C)===!0&&(C=x(C).slice(0)),de.on=C,C=i.$colors.get("color1"),Array.isArray(C)===!0&&(C=x(C).slice(0)),de.bgColor=C,de.primaryColor="#22c55e",m=de.is||"Toggle";let k;if(typeof m=="string"){if(k=u.components&&u.components[m]||h[m],!k)throw new Error('Component "Toggle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(k=m);a[9]=k.call(null,{props:de},a[8],i),a[9][Symbol.for("slots")][0]?(o=a[9][Symbol.for("slots")][0],y=a[9],v=!0):o=a[9][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[2];const V={};a[10]=this.element({parent:o||"root"},v===!0?y:i),V.w=200,V.h={transition:i.$sizes.get("block1.h")},V.x=25,V.y=140,V.color=i.$colors.get("color2"),V.effects=[{type:"radius",props:{radius:i.radius/2}}],a[10].populate(V),v===!0&&(M-=1),o=a[2];const Q={};a[11]=this.element({parent:o||"root"},v===!0?y:i),Q.w={transition:i.$sizes.get("block2.w")},Q.h=i.$sizes.get("block2.h"),Q.x=270,Q.y={transition:i.$sizes.get("block2.y")},Q.color=i.$colors.get("color2"),Q.effects=[{type:"radius",props:{radius:i.radius/2}}],a[11].populate(Q),v===!0&&(M-=1),o=a[2];const se={};a[12]=this.element({parent:o||"root"},v===!0?y:i),se.x={transition:i.$sizes.get("graph.x")},se.y={transition:i.$sizes.get("graph.y")},se.w=i.$sizes.get("graph.w"),se.h=i.$sizes.get("graph.h"),se.color="0x00000000",a[12].populate(se),v===!0&&(M-=1),o=a[12];const J={};a[13]=this.element({parent:o||"root"},v===!0?y:i),J.x={transition:i.$sizes.get("graph.offset")},J.y={transition:i.$sizes.get("graph.offset")},a[13].populate(J),v===!0&&(M-=1);const te=u.components&&u.components.Bar||h.Bar;o=a[13];const W={};a[14]=this.element({parent:o||"root"},v===!0?y:i),W.bgColor=i.$colors.get("color2"),W.primaryColor=i.$colors.get("color4"),W.size=i.$sizes.get("graph.size"),W.height=100,W.index=0;const Z=[];if(typeof te<"u")for(let je in te.config.props)delete W[te.config.props[je]],Z.push(te.config.props[je]);a[14].populate(W),v===!0&&(M-=1),o=a[14];const ce={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.size=C,ce.height=100,ce.index=0,m=ce.is||"Bar";let xe;if(typeof m=="string"){if(xe=u.components&&u.components[m]||h[m],!xe)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xe=m);a[15]=xe.call(null,{props:ce},a[14],i),a[15][Symbol.for("slots")][0]?(o=a[15][Symbol.for("slots")][0],y=a[15],v=!0):o=a[15][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const ge=u.components&&u.components.Bar||h.Bar;o=a[13];const pe={};a[16]=this.element({parent:o||"root"},v===!0?y:i),pe.bgColor=i.$colors.get("color2"),pe.primaryColor=i.$colors.get("color4"),pe.size=i.$sizes.get("graph.size"),pe.height=140,pe.index=1;const Ee=[];if(typeof ge<"u")for(let je in ge.config.props)delete pe[ge.config.props[je]],Ee.push(ge.config.props[je]);a[16].populate(pe),v===!0&&(M-=1),o=a[16];const Re={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Re.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Re.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),Re.size=C,Re.height=140,Re.index=1,m=Re.is||"Bar";let z;if(typeof m=="string"){if(z=u.components&&u.components[m]||h[m],!z)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);a[17]=z.call(null,{props:Re},a[16],i),a[17][Symbol.for("slots")][0]?(o=a[17][Symbol.for("slots")][0],y=a[17],v=!0):o=a[17][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Me=u.components&&u.components.Bar||h.Bar;o=a[13];const ye={};a[18]=this.element({parent:o||"root"},v===!0?y:i),ye.bgColor=i.$colors.get("color2"),ye.primaryColor=i.$colors.get("color4"),ye.size=i.$sizes.get("graph.size"),ye.height=170,ye.index=2;const Ue=[];if(typeof Me<"u")for(let je in Me.config.props)delete ye[Me.config.props[je]],Ue.push(Me.config.props[je]);a[18].populate(ye),v===!0&&(M-=1),o=a[18];const De={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),De.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),De.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),De.size=C,De.height=170,De.index=2,m=De.is||"Bar";let We;if(typeof m=="string"){if(We=u.components&&u.components[m]||h[m],!We)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(We=m);a[19]=We.call(null,{props:De},a[18],i),a[19][Symbol.for("slots")][0]?(o=a[19][Symbol.for("slots")][0],y=a[19],v=!0):o=a[19][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Xe=u.components&&u.components.Bar||h.Bar;o=a[13];const ze={};a[20]=this.element({parent:o||"root"},v===!0?y:i),ze.bgColor=i.$colors.get("color2"),ze.primaryColor=i.$colors.get("color4"),ze.size=i.$sizes.get("graph.size"),ze.height=150,ze.index=3;const we=[];if(typeof Xe<"u")for(let je in Xe.config.props)delete ze[Xe.config.props[je]],we.push(Xe.config.props[je]);a[20].populate(ze),v===!0&&(M-=1),o=a[20];const et={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),et.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),et.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),et.size=C,et.height=150,et.index=3,m=et.is||"Bar";let Je;if(typeof m=="string"){if(Je=u.components&&u.components[m]||h[m],!Je)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Je=m);a[21]=Je.call(null,{props:et},a[20],i),a[21][Symbol.for("slots")][0]?(o=a[21][Symbol.for("slots")][0],y=a[21],v=!0):o=a[21][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Ze=u.components&&u.components.Bar||h.Bar;o=a[13];const ot={};a[22]=this.element({parent:o||"root"},v===!0?y:i),ot.bgColor=i.$colors.get("color2"),ot.primaryColor=i.$colors.get("color4"),ot.size=i.$sizes.get("graph.size"),ot.height=90,ot.index=4;const St=[];if(typeof Ze<"u")for(let je in Ze.config.props)delete ot[Ze.config.props[je]],St.push(Ze.config.props[je]);a[22].populate(ot),v===!0&&(M-=1),o=a[22];const lt={};C=i.$colors.get("color2"),Array.isArray(C)===!0&&(C=x(C).slice(0)),lt.bgColor=C,C=i.$colors.get("color4"),Array.isArray(C)===!0&&(C=x(C).slice(0)),lt.primaryColor=C,C=i.$sizes.get("graph.size"),Array.isArray(C)===!0&&(C=x(C).slice(0)),lt.size=C,lt.height=90,lt.index=4,m=lt.is||"Bar";let It;if(typeof m=="string"){if(It=u.components&&u.components[m]||h[m],!It)throw new Error('Component "Bar" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(It=m);return a[23]=It.call(null,{props:lt},a[22],i),a[23][Symbol.for("slots")][0]?(o=a[23][Symbol.for("slots")][0],y=a[23],v=!0):o=a[23][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),a},effects:[function(o,i,u,h,g,x){i[0].set("color",{transition:o.$colors.get("bg")})},function(o,i,u,h,g,x){i[1].set("color",o.$colors.get("color4"))},function(o,i,u,h,g,x){i[2].set("x",{transition:(1920-o.$sizes.get("w"))/2})},function(o,i,u,h,g,x){i[2].set("y",{transition:(1080-o.$sizes.get("h"))/2})},function(o,i,u,h,g,x){i[4].set("w",{transition:o.$sizes.get("w")})},function(o,i,u,h,g,x){i[4].set("h",{transition:o.$sizes.get("h")})},function(o,i,u,h,g,x){i[4].set("color",o.$colors.get("color1"))},function(o,i,u,h,g,x){i[4].set("effects",[{type:"radius",props:{radius:o.radius}}])},function(o,i,u,h,g,x){i[5].set("w",{transition:o.$sizes.get("w")})},function(o,i,u,h,g,x){i[5].set("color",o.$colors.get("color2"))},function(o,i,u,h,g,x){i[5].set("effects",[{type:"radius",props:{radius:o.radius}}])},function(o,i,u,h,g,x){i[6].set("w",{transition:o.$sizes.get("w")})},function(o,i,u,h,g,x){i[6].set("color",o.$colors.get("color2"))},function(o,i,u,h,g,x){i[7].set("content",o.text)},function(o,i,u,h,g,x){i[7].set("color",o.$colors.get("color3"))},function(o,i,u,h,g,x){(typeof skip8>"u"||skip8.indexOf("x")===-1)&&i[8].set("x",{transition:o.$sizes.get("w")-120})},function(o,i,u,h,g,x){(typeof skip8>"u"||skip8.indexOf("on")===-1)&&i[8].set("on",o.mode==="dark")},function(o,i,u,h,g,x){(typeof skip8>"u"||skip8.indexOf("bgColor")===-1)&&i[8].set("bgColor",o.$colors.get("color1"))},function(o,i,u,h,g,x){i[9][Symbol.for("props")].x={transition:o.$sizes.get("w")-120}},function(o,i,u,h,g,x){i[9][Symbol.for("props")].on=o.mode==="dark"},function(o,i,u,h,g,x){i[9][Symbol.for("props")].bgColor=o.$colors.get("color1")},function(o,i,u,h,g,x){i[10].set("h",{transition:o.$sizes.get("block1.h")})},function(o,i,u,h,g,x){i[10].set("color",o.$colors.get("color2"))},function(o,i,u,h,g,x){i[10].set("effects",[{type:"radius",props:{radius:o.radius/2}}])},function(o,i,u,h,g,x){i[11].set("w",{transition:o.$sizes.get("block2.w")})},function(o,i,u,h,g,x){i[11].set("h",o.$sizes.get("block2.h"))},function(o,i,u,h,g,x){i[11].set("y",{transition:o.$sizes.get("block2.y")})},function(o,i,u,h,g,x){i[11].set("color",o.$colors.get("color2"))},function(o,i,u,h,g,x){i[11].set("effects",[{type:"radius",props:{radius:o.radius/2}}])},function(o,i,u,h,g,x){i[12].set("x",{transition:o.$sizes.get("graph.x")})},function(o,i,u,h,g,x){i[12].set("y",{transition:o.$sizes.get("graph.y")})},function(o,i,u,h,g,x){i[12].set("w",o.$sizes.get("graph.w"))},function(o,i,u,h,g,x){i[12].set("h",o.$sizes.get("graph.h"))},function(o,i,u,h,g,x){i[13].set("x",{transition:o.$sizes.get("graph.offset")})},function(o,i,u,h,g,x){i[13].set("y",{transition:o.$sizes.get("graph.offset")})},function(o,i,u,h,g,x){(typeof skip14>"u"||skip14.indexOf("bgColor")===-1)&&i[14].set("bgColor",o.$colors.get("color2"))},function(o,i,u,h,g,x){(typeof skip14>"u"||skip14.indexOf("primaryColor")===-1)&&i[14].set("primaryColor",o.$colors.get("color4"))},function(o,i,u,h,g,x){(typeof skip14>"u"||skip14.indexOf("size")===-1)&&i[14].set("size",o.$sizes.get("graph.size"))},function(o,i,u,h,g,x){i[15][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,u,h,g,x){i[15][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,u,h,g,x){i[15][Symbol.for("props")].size=o.$sizes.get("graph.size")},function(o,i,u,h,g,x){(typeof skip16>"u"||skip16.indexOf("bgColor")===-1)&&i[16].set("bgColor",o.$colors.get("color2"))},function(o,i,u,h,g,x){(typeof skip16>"u"||skip16.indexOf("primaryColor")===-1)&&i[16].set("primaryColor",o.$colors.get("color4"))},function(o,i,u,h,g,x){(typeof skip16>"u"||skip16.indexOf("size")===-1)&&i[16].set("size",o.$sizes.get("graph.size"))},function(o,i,u,h,g,x){i[17][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,u,h,g,x){i[17][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,u,h,g,x){i[17][Symbol.for("props")].size=o.$sizes.get("graph.size")},function(o,i,u,h,g,x){(typeof skip18>"u"||skip18.indexOf("bgColor")===-1)&&i[18].set("bgColor",o.$colors.get("color2"))},function(o,i,u,h,g,x){(typeof skip18>"u"||skip18.indexOf("primaryColor")===-1)&&i[18].set("primaryColor",o.$colors.get("color4"))},function(o,i,u,h,g,x){(typeof skip18>"u"||skip18.indexOf("size")===-1)&&i[18].set("size",o.$sizes.get("graph.size"))},function(o,i,u,h,g,x){i[19][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,u,h,g,x){i[19][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,u,h,g,x){i[19][Symbol.for("props")].size=o.$sizes.get("graph.size")},function(o,i,u,h,g,x){(typeof skip20>"u"||skip20.indexOf("bgColor")===-1)&&i[20].set("bgColor",o.$colors.get("color2"))},function(o,i,u,h,g,x){(typeof skip20>"u"||skip20.indexOf("primaryColor")===-1)&&i[20].set("primaryColor",o.$colors.get("color4"))},function(o,i,u,h,g,x){(typeof skip20>"u"||skip20.indexOf("size")===-1)&&i[20].set("size",o.$sizes.get("graph.size"))},function(o,i,u,h,g,x){i[21][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,u,h,g,x){i[21][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,u,h,g,x){i[21][Symbol.for("props")].size=o.$sizes.get("graph.size")},function(o,i,u,h,g,x){(typeof skip22>"u"||skip22.indexOf("bgColor")===-1)&&i[22].set("bgColor",o.$colors.get("color2"))},function(o,i,u,h,g,x){(typeof skip22>"u"||skip22.indexOf("primaryColor")===-1)&&i[22].set("primaryColor",o.$colors.get("color4"))},function(o,i,u,h,g,x){(typeof skip22>"u"||skip22.indexOf("size")===-1)&&i[22].set("size",o.$sizes.get("graph.size"))},function(o,i,u,h,g,x){i[23][Symbol.for("props")].bgColor=o.$colors.get("color2")},function(o,i,u,h,g,x){i[23][Symbol.for("props")].primaryColor=o.$colors.get("color4")},function(o,i,u,h,g,x){i[23][Symbol.for("props")].size=o.$sizes.get("graph.size")}],context:{}},state(){return{mode:"dark",sizes:"small",radius:20}},watch:{mode(f){this.$colors.set(f)},sizes(f){this.$sizes.set(f)}},computed:{text(){return this.mode,this.mode==="dark"?"Dark mode":"Light mode"}},input:{right(){this.toggleX=0,this.$setTimeout(()=>{this.mode="light"},150)},left(){this.toggleX=48,this.$setTimeout(()=>{this.mode="dark"},150)},up(){this.sizes="large"},down(){this.sizes="small"}}}),EL="ABC123",kL="https://8b4fa39d.lightningjs.workers.dev";let MT,_T;const AL="w185",IL={headers:{"Content-Type":"application/json",Authorization:"Bearer "+EL}};function AC(f,o=AL){return _T+o+f}function ML(...f){return MT?hg(...f):RT().then(()=>hg(...f))}function hg(f,o={}){return fetch(kL+f,{...IL,...o}).then(i=>i.json())}function RT(){return hg("/configuration").then(f=>(MT=f,_T=f.images.secure_base_url,f))}const Sg={get:ML,loadConfig:RT},IC=f=>Sg.get(`/${f}/popular`).then(LT),LT=f=>f.results.filter(i=>!i.adult).map(i=>({poster:AC(i.poster_path||i.profile_path),background:AC(i.backdrop_path,"w1280"),identifier:i.id,title:i.title||i.name,overview:i.overview})),Tl=f=>{const o=Array.isArray(f)?f:[f];return _L("movie").then(({genres:i})=>{let u=[];return i.forEach(h=>{o.includes(h.name)&&u.push(h.id)}),Sg.get(`/discover/movie?with_genres=${u.join()}`).then(LT)})},_L=f=>Sg.get(`/genre/${f}/list`),RL=tt.Component("Poster",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w=1280,m.h=720,m.x=i.x,m.src=i.item.background,m.color="{top: '0xffffffff', bottom: '0x000000ff'}",m.scale={transition:{value:i.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[{type:"radius",props:{radius:8}}],a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},a[1].populate(C),o=a[1];const y={};a[2]=this.element({parent:o||"root"},i),y.w=185,y.h=278,y.x=54,y.y=220,y.src=i.item.poster,a[2].populate(y),o=a[1];const v={};a[3]=this.element({parent:o||"root"},i),v.content=i.item.title,v.font="raleway",v.y=520,v.x=54,v.size=64,v.maxwidth=1e3,v.maxlines=1,v.__textnode=!0,a[3].populate(v),o=a[1];const M={};return a[4]=this.element({parent:o||"root"},i),M.content=i.item.overview,M.size=21,M.y=620,M.x=60,M.color="0xccccccff",M.maxwidth=1e3,M.maxlines=2,M.lineheight=36,M.__textnode=!0,a[4].populate(M),a},effects:[function(o,i,u,h,g,x){i[0].set("src",o.item.background)},function(o,i,u,h,g,x){i[0].set("scale",{transition:{value:o.scale,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,u,h,g,x){i[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(o,i,u,h,g,x){i[1].set("alpha",{transition:{value:o.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,u,h,g,x){i[2].set("src",o.item.poster)},function(o,i,u,h,g,x){i[3].set("content",o.item.title)},function(o,i,u,h,g,x){i[4].set("content",o.item.overview)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,zIndex:1,alpha:0}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1},unfocus(){this.scale=1,this.alpha=0}}}),LL=tt.Component("Poster",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};return a[0]=this.element({parent:o||"root"},i),m.w=185,m.h=278,m.x=i.x,m.src=i.item.poster,m.scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[{type:"radius",props:{radius:8}}],a[0].populate(m),a},effects:[function(o,i,u,h,g,x){i[0].set("src",o.item.poster)},function(o,i,u,h,g,x){i[0].set("scale",{transition:{value:o.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,u,h,g,x){i[0].set("_effects",[{type:"radius",props:{radius:8}}])}],context:{}},props:["src","index","item","width"],state(){return{scale:1,color:"#333"}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.color="#fff",this.scale=1.1},unfocus(){this.color="#333",this.scale=1}}}),DL=tt.Component("PosterTitle",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w=185,m.h=278,m.x=i.x,m.src=i.item.poster,m.scale={transition:{value:i.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},m._effects=[{type:"radius",props:{radius:8}}],a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.x=10,C.y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},C.alpha={transition:{value:i.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},a[1].populate(C),o=a[1];const y={};return a[2]=this.element({parent:o||"root"},i),y.content=i.item.title,y.font="raleway",y.size=22,y.maxwidth=185,y.maxlines=2,y.lineheight=28,y.__textnode=!0,a[2].populate(y),a},effects:[function(o,i,u,h,g,x){i[0].set("src",o.item.poster)},function(o,i,u,h,g,x){i[0].set("scale",{transition:{value:o.scale,duration:200,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,u,h,g,x){i[0].set("_effects",[{type:"radius",props:{radius:8}}])},function(o,i,u,h,g,x){i[1].set("y",{transition:{value:o.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,u,h,g,x){i[1].set("alpha",{transition:{value:o.alpha,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})},function(o,i,u,h,g,x){i[2].set("content",o.item.title)}],context:{}},props:["src","index","item","width"],state(){return{scale:1,alpha:0,y:278}},computed:{x(){return this.index,this.width,this.index*this.width}},hooks:{focus(){this.scale=1.1,this.alpha=1,this.y=288},unfocus(){this.scale=1,this.alpha=0,this.y=278}}}),PL=tt.Component("TmdbRow",{components:{Hero:RL,Poster:LL,PosterTitle:DL},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1;const v={};a[0]=this.element({parent:o||"root"},y===!0?C:i),a[0].populate(v),o=a[0];const M={};a[1]=this.element({parent:o||"root"},y===!0?C:i),M.x={transition:{value:i.x,duration:300,easing:"ease-in-out"}},M.y=80,a[1].populate(M),o=a[1];const b=[];let _,O;const B=($=[],j,ne)=>{const X=x($),K=new Set;let ee=X.length;const de={};for(_=de.from||0,O=("to"in de)?de.to:X.length;ee--;){const se=X[ee];ee<O&&ee>=_&&K.add(""+se.identifier)}let k=ne.length;for(;k--;)if(K.has(ne[k])===!1){const se=ne[k];j[2][se]&&j[2][se].destroy(),delete j[2][se],j[3][se]&&j[3][se].destroy(),delete j[3][se]}ne.length=0;const V=X.length,Q=[];for(let se=0;se<V;se++){if(se<_||se>=O)continue;const J=Object.create(i);o=j[1],J.item=X[se],J.index=se,J.key=""+J.item.identifier,J.__ref="poster"+se,ne.push(J.key);const te=u.components&&u.components.Component||h.Component;j[2]===void 0&&(j[2]={});const W={};j[2][J.key]===void 0&&(j[2][J.key]=this.element({parent:o||"root"},y===!0?C:i)),W.is=J.type,W.index=J.index,W.item=J.item,W.ref=J.__ref,W.width=J.width;const Z=[];if(typeof te<"u")for(let xe in te.config.props)delete W[te.config.props[xe]],Z.push(te.config.props[xe]);j[2][J.key].nodeId===void 0&&j[2][J.key].populate(W),j[3]===void 0&&(j[3]={}),o=j[2][J.key];const ce={};if(j[3][J.key]===void 0){ce.is=J.type,ce.index=J.index,ce.item=J.item,ce.ref=J.__ref,ce.width=J.width,m=ce.is||"Component";let xe;if(typeof m=="string"){if(xe=u.components&&u.components[m]||h[m],!xe)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xe=m);j[3][J.key]=xe.call(null,{props:ce},j[2][J.key],i),j[3][J.key][Symbol.for("slots")][0]?(o=j[3][J.key][Symbol.for("slots")][0],C=j[3][J.key],y=!0):o=j[3][J.key][Symbol.for("children")][0]}}return Q};let G;return g(()=>{i[Symbol.for("removeGlobalEffects")](G),G=null,G=B(i.items,a,b)},["items"]),a},effects:[function(o,i,u,h,g,x){i[1].set("x",{transition:{value:o.x,duration:300,easing:"ease-in-out"}})}],context:{}},props:["title","type","items","width"],state(){return{focused:0,offset:0}},hooks:{focus(){this.$trigger("focused")}},computed:{x(){return this.focused,this.items,this.width,150-Math.min(this.focused,this.items.length-1720/this.width)*this.width}},watch:{focused(f){const o=this.$select("poster"+f);o&&o.$focus&&(o.$focus(),this.$emit("posterSelect",this.items[f]))}},input:{left(){this.focused=Math.max(this.focused-1,0)},right(){this.focused=Math.min(this.focused+1,this.items.length-1)}}}),OL=tt.Component("Background",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.src=i.bg1,C.w=1920,C.h=1080,C.color="{top: '0xffffffff', bottom: '0x000000ff'}",C.alpha={transition:{value:i.alpha1,duration:400,easing:"ease-in"}},a[1].populate(C),o=a[0];const y={};a[2]=this.element({parent:o||"root"},i),y.src=i.bg2,y.w=1920,y.h=1080,y.color="{top: '0xffffffff', bottom: '0x000000ff'}",y.alpha={transition:{value:i.alpha2,duration:400,easing:"ease-in"}},a[2].populate(y),o=a[0];const v={};return a[3]=this.element({parent:o||"root"},i),v.w=1920,v.h=1080,v.src="assets/gradient.png",v.color="0x8866ddff",v.alpha=.8,a[3].populate(v),a},effects:[function(o,i,u,h,g,x){i[1].set("src",o.bg1)},function(o,i,u,h,g,x){i[1].set("alpha",{transition:{value:o.alpha1,duration:400,easing:"ease-in"}})},function(o,i,u,h,g,x){i[2].set("src",o.bg2)},function(o,i,u,h,g,x){i[2].set("alpha",{transition:{value:o.alpha2,duration:400,easing:"ease-in"}})}],context:{}},props:["src"],state(){return{counter:0,alpha1:0,alpha2:0,bg1:!1,bg2:!1}},watch:{src(f){this.counter=(this.counter+1)%2,this.counter===0?(this.bg1=f,this.alpha1=.8,this.alpha2=0):(this.bg2=f,this.alpha1=0,this.alpha2=.8)}}}),NL=tt.Component("TMdb",{components:{Background:OL,TmdbRow:PL},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),b.w=1920,b.h=1080,b.color="0x000000ff",a[0].populate(b),v===!0&&(M-=1);const _=u.components&&u.components.Background||h.Background;o=a[0];const O={};a[1]=this.element({parent:o||"root"},v===!0?y:i),O.src=i.src;const B=[];if(typeof _<"u")for(let te in _.config.props)delete O[_.config.props[te]],B.push(_.config.props[te]);a[1].populate(O),v===!0&&(M-=1),o=a[1];const G={};C=i.src,Array.isArray(C)===!0&&(C=x(C).slice(0)),G.src=C,m=G.is||"Background";let $;if(typeof m=="string"){if($=u.components&&u.components[m]||h[m],!$)throw new Error('Component "Background" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);a[2]=$.call(null,{props:G},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],y=a[2],v=!0):o=a[2][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[0];const j={};a[3]=this.element({parent:o||"root"},v===!0?y:i),a[3].populate(j),v===!0&&(M-=1),o=a[3];const ne={};a[4]=this.element({parent:o||"root"},v===!0?y:i),ne.y={transition:{value:i.contentY,duration:i.duration}},ne.alpha={transition:{value:i.alpha,duration:i.duration}},a[4].populate(ne),v===!0&&(M-=1),o=a[4];const X={};a[5]=this.element({parent:o||"root"},v===!0?y:i),X.src="assets/logo.png",X.x=140,X.y=90,X.w=243,X.h=52,a[5].populate(X),v===!0&&(M-=1),o=a[4];const K={};a[6]=this.element({parent:o||"root"},v===!0?y:i),K.content=i.title,K.font="raleway",K.size=80,K.x=140,K.y=300,K.maxwidth=1e3,K["@loaded"]=i.positionText&&i.positionText.bind(i),K.maxlines=1,K.__textnode=!0,a[6].populate(K),v===!0&&(M-=1),o=a[4];const ee={};a[7]=this.element({parent:o||"root"},v===!0?y:i),ee.content=i.overview,ee.maxwidth=880,ee.x=140,ee.y=430,ee.lineheight=40,ee.maxlines=3,ee.__textnode=!0,a[7].populate(ee),v===!0&&(M-=1),o=a[3];const de={};a[8]=this.element({parent:o||"root"},v===!0?y:i),de.y={transition:{value:i.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}},a[8].populate(de),v===!0&&(M-=1),o=a[8];const k=[];let V,Q;const se=(te=[],W,Z)=>{const ce=x(te),xe=new Set;let ge=ce.length;const pe={};for(V=pe.from||0,Q=("to"in pe)?pe.to:ce.length;ge--;){const Me=ce[ge];ge<Q&&ge>=V&&xe.add(""+Me.title)}let Ee=Z.length;for(;Ee--;)if(xe.has(Z[Ee])===!1){const Me=Z[Ee];W[9][Me]&&W[9][Me].destroy(),delete W[9][Me],W[10][Me]&&W[10][Me].destroy(),delete W[10][Me]}Z.length=0;const Re=ce.length,z=[];for(let Me=0;Me<Re;Me++){if(Me<V||Me>=Q)continue;const ye=Object.create(i);o=W[8],ye.row=ce[Me],ye.index=Me,ye.key=""+ye.row.title,ye.__ref="row"+Me,Z.push(ye.key);const Ue=u.components&&u.components.TmdbRow||h.TmdbRow;W[9]===void 0&&(W[9]={});const De={};W[9][ye.key]===void 0&&(W[9][ye.key]=this.element({parent:o||"root"},v===!0?y:i)),De.title=ye.row.title,De.items=ye.row.items,De.type=ye.row.type,De.width=ye.row.width,De.y=ye.row.y,De.ref=ye.__ref;const We=[];if(typeof Ue<"u")for(let Je in Ue.config.props)delete De[Ue.config.props[Je]],We.push(Ue.config.props[Je]);W[9][ye.key].nodeId===void 0&&(W[9][ye.key].populate(De),v===!0&&(M-=1)),W[10]===void 0&&(W[10]={}),o=W[9][ye.key];const Xe={};if(W[10][ye.key]===void 0){Xe.title=ye.row.title,C=ye.row.items,Array.isArray(C)===!0&&(C=x(C).slice(0)),Xe.items=C,C=ye.row.type,Array.isArray(C)===!0&&(C=x(C).slice(0)),Xe.type=C,C=ye.row.width,Array.isArray(C)===!0&&(C=x(C).slice(0)),Xe.width=C,Xe.y=ye.row.y,Xe.ref=ye.__ref,m=Xe.is||"TmdbRow";let Je;if(typeof m=="string"){if(Je=u.components&&u.components[m]||h[m],!Je)throw new Error('Component "TmdbRow" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Je=m);W[10][ye.key]=Je.call(null,{props:Xe},W[9][ye.key],i),W[10][ye.key][Symbol.for("slots")][0]?(o=W[10][ye.key][Symbol.for("slots")][0],y=W[10][ye.key],v=!0):o=W[10][ye.key][Symbol.for("children")][0]}let ze=()=>{(typeof We>"u"||We.indexOf("items")===-1)&&W[9][ye.key].set("items",ye.row.items)};g(ze,null),z.push(ze);let we=()=>{(typeof We>"u"||We.indexOf("type")===-1)&&W[9][ye.key].set("type",ye.row.type)};g(we,null),z.push(we);let et=()=>{(typeof We>"u"||We.indexOf("width")===-1)&&W[9][ye.key].set("width",ye.row.width)};g(et,null),z.push(et),W[10][ye.key][Symbol.for("props")].items=ye.row.items,W[10][ye.key][Symbol.for("props")].type=ye.row.type,W[10][ye.key][Symbol.for("props")].width=ye.row.width}return z};let J;return g(()=>{i[Symbol.for("removeGlobalEffects")](J),J=null,J=se(i.rows,a,k)},["rows"]),a},effects:[function(o,i,u,h,g,x){(typeof skip1>"u"||skip1.indexOf("src")===-1)&&i[1].set("src",o.src)},function(o,i,u,h,g,x){i[2][Symbol.for("props")].src=o.src},function(o,i,u,h,g,x){i[4].set("y",{transition:{value:o.contentY,duration:o.duration}})},function(o,i,u,h,g,x){i[4].set("alpha",{transition:{value:o.alpha,duration:o.duration}})},function(o,i,u,h,g,x){i[6].set("content",o.title)},function(o,i,u,h,g,x){i[7].set("content",o.overview)},function(o,i,u,h,g,x){i[8].set("y",{transition:{value:o.y,duration:300,easing:"cubic-bezier(0.20, 1.00, 0.80, 1.00)"}})}],context:{}},state(){return{rows:[],src:"",focused:null,alpha:1,y:550,contentY:0,scale:1,title:"",overview:"",type:"Poster",duration:300}},watch:{focused(f){const o=this.$select("row"+f);o&&o.$focus&&o.$focus()}},hooks:{async init(){this.rows=[{title:"Popular Movies",items:await IC("movie"),type:"Poster",width:215,y:0},{title:"Best Western movies",items:await Tl(["Western"]),type:"Hero",width:1370,y:358},{title:"Best Comedy movies",items:await Tl(["Comedy"]),type:"PosterTitle",width:215,y:1158},{title:"Popular TV shows",items:await IC("tv"),type:"PosterTitle",width:215,y:1536},{title:"Best Adventure and Action movies",items:await Tl(["adventure","action"]),type:"Hero",width:1370,y:1914},{title:"Best Documentaries",items:await Tl("Documentary"),type:"PosterTitle",width:215,y:2714},{title:"Best Western movies 2",items:await Tl("Western"),type:"PosterTitle",width:215,y:3092}],this.focused=0},ready(){this.$listen("posterSelect",f=>{this.focused===0&&(this.src=f.background,this.title=f.title,this.overview=f.overview)})},focus(){this.$trigger("focused")}},input:{up(){this.contentY=0,this.duration=300,this.focused=Math.max(this.focused-1,0),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0},down(){this.contentY=-60,this.duration=200,this.focused=Math.min(this.focused+1,this.rows.length-1),this.y=(this.focused===0?550:90)-this.rows[this.focused].y,this.alpha=this.focused===0?1:0}}}),UL=tt.Component("MenuSprite",{code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(b),v===!0&&(M-=1),o=a[0];const _={};a[1]=this.element({parent:o||"root"},v===!0?y:i),_.src="assets/menusprite.png",_.x=748,_.y=120,_.w=425,_.h=340,a[1].populate(_),v===!0&&(M-=1),o=a[0];const O={};a[2]=this.element({parent:o||"root"},v===!0?y:i),O.y=680,O.x=560,a[2].populate(O),v===!0&&(M-=1);const B=u.components&&u.components.Sprite||h.Sprite;o=a[2];const G={};a[3]=this.element({parent:o||"root"},v===!0?y:i),G.image="assets/menusprite.png",G.x=0,G.w=140,G.h=140,G.map=i.map,G.frame=i.icon1;const $=[];if(typeof B<"u")for(let pe in B.config.props)delete G[B.config.props[pe]],$.push(B.config.props[pe]);a[3].populate(G),v===!0&&(M-=1),o=a[3];const j={};j.image="assets/menusprite.png",j.x=0,j.w=140,j.h=140,j.map=i.map,C=i.icon1,Array.isArray(C)===!0&&(C=x(C).slice(0)),j.frame=C,m=j.is||"Sprite";let ne;if(typeof m=="string"){if(ne=u.components&&u.components[m]||h[m],!ne)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ne=m);a[4]=ne.call(null,{props:j},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],y=a[4],v=!0):o=a[4][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const X=u.components&&u.components.Sprite||h.Sprite;o=a[2];const K={};a[5]=this.element({parent:o||"root"},v===!0?y:i),K.image="assets/menusprite.png",K.x=220,K.w=140,K.h=140,K.map=i.map,K.frame="icon2";const ee=[];if(typeof X<"u")for(let pe in X.config.props)delete K[X.config.props[pe]],ee.push(X.config.props[pe]);a[5].populate(K),v===!0&&(M-=1),o=a[5];const de={};de.image="assets/menusprite.png",de.x=220,de.w=140,de.h=140,de.map=i.map,de.frame="icon2",m=de.is||"Sprite";let k;if(typeof m=="string"){if(k=u.components&&u.components[m]||h[m],!k)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(k=m);a[6]=k.call(null,{props:de},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],y=a[6],v=!0):o=a[6][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const V=u.components&&u.components.Sprite||h.Sprite;o=a[2];const Q={};a[7]=this.element({parent:o||"root"},v===!0?y:i),Q.image="assets/menusprite.png",Q.x=440,Q.w=140,Q.h=140,Q.map=i.map,Q.frame="icon3";const se=[];if(typeof V<"u")for(let pe in V.config.props)delete Q[V.config.props[pe]],se.push(V.config.props[pe]);a[7].populate(Q),v===!0&&(M-=1),o=a[7];const J={};J.image="assets/menusprite.png",J.x=440,J.w=140,J.h=140,J.map=i.map,J.frame="icon3",m=J.is||"Sprite";let te;if(typeof m=="string"){if(te=u.components&&u.components[m]||h[m],!te)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(te=m);a[8]=te.call(null,{props:J},a[7],i),a[8][Symbol.for("slots")][0]?(o=a[8][Symbol.for("slots")][0],y=a[8],v=!0):o=a[8][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const W=u.components&&u.components.Sprite||h.Sprite;o=a[2];const Z={};a[9]=this.element({parent:o||"root"},v===!0?y:i),Z.image="assets/menusprite.png",Z.x=660,Z.w=140,Z.h=140,Z.map=i.map,Z.frame="icon4_unfocus";const ce=[];if(typeof W<"u")for(let pe in W.config.props)delete Z[W.config.props[pe]],ce.push(W.config.props[pe]);a[9].populate(Z),v===!0&&(M-=1),o=a[9];const xe={};xe.image="assets/menusprite.png",xe.x=660,xe.w=140,xe.h=140,xe.map=i.map,xe.frame="icon4_unfocus",m=xe.is||"Sprite";let ge;if(typeof m=="string"){if(ge=u.components&&u.components[m]||h[m],!ge)throw new Error('Component "Sprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ge=m);return a[10]=ge.call(null,{props:xe},a[9],i),a[10][Symbol.for("slots")][0]?(o=a[10][Symbol.for("slots")][0],y=a[10],v=!0):o=a[10][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),a},effects:[function(o,i,u,h,g,x){(typeof skip3>"u"||skip3.indexOf("frame")===-1)&&i[3].set("frame",o.icon1)},function(o,i,u,h,g,x){i[4][Symbol.for("props")].frame=o.icon1}],context:{}},state(){return{icon1:"icon1_unfocus",map:{defaults:{w:160,h:160},frames:{icon1_focus:{x:0,y:0},icon1_unfocus:{x:170,y:340},icon2:{x:170,y:0},icon3:{x:350,y:0},icon4_unfocus:{x:680,y:170}}}}},hooks:{ready(){this.$setInterval(()=>{this.icon1=this.icon1==="icon1_unfocus"?"icon1_focus":"icon1_unfocus"},2e3)}}}),_h=["menu"],BL=tt.Component("Sprites",{components:{MenuSprite:UL},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(b),v===!0&&(M-=1);const _=u.components&&u.components.MenuSprite||h.MenuSprite;o=a[0];const O={};a[1]=this.element({parent:o||"root"},v===!0?y:i),O.show=i.currentSprite==="menu";const B=[];if(typeof _<"u")for(let j in _.config.props)delete O[_.config.props[j]],B.push(_.config.props[j]);a[1].populate(O),v===!0&&(M-=1),o=a[1];const G={};C=i.currentSprite==="menu",Array.isArray(C)===!0&&(C=x(C).slice(0)),G.show=C,m=G.is||"MenuSprite";let $;if(typeof m=="string"){if($=u.components&&u.components[m]||h[m],!$)throw new Error('Component "MenuSprite" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);return a[2]=$.call(null,{props:G},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],y=a[2],v=!0):o=a[2][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),a},effects:[function(o,i,u,h,g,x){(typeof skip1>"u"||skip1.indexOf("show")===-1)&&i[1].set("show",o.currentSprite==="menu")},function(o,i,u,h,g,x){i[2][Symbol.for("props")].show=o.currentSprite==="menu"}],context:{}},state(){return{currentSprite:"menu"}},input:{down(){const f=_h.indexOf(this.currentSprite);f<_h.length-1?this.currentSprite=_h[f+1]:this.currentSprite=_h[0]}}}),Jh=tt.Component("Button",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};return a[0]=this.element({parent:o||"root"},i),m.w=300,m.h=80,m.color=i.color||"0xff0000ff",m.effects=[{type:"radius",props:{radius:20}}],m.alpha={transition:i.alpha},m.scale={transition:i.scale},m.rotation=i.rotate,a[0].populate(m),a},effects:[function(o,i,u,h,g,x){i[0].set("effects",[{type:"radius",props:{radius:20}}])},function(o,i,u,h,g,x){i[0].set("alpha",{transition:o.alpha})},function(o,i,u,h,g,x){i[0].set("scale",{transition:o.scale})},function(o,i,u,h,g,x){i[0].set("rotation",o.rotate)}],context:{}},props:["color"],state(){return{alpha:.4,scale:1,rotate:0}},hooks:{focus(){this.$log.info(`Button with color ${this.color} received focus`),this.alpha=1,this.scale=this.scale===1?1.2:1},unfocus(){this.$log.info(`Button with color ${this.color} lost focus`),this.alpha=.4,this.scale=1,this.rotate=0}},input:{enter(){this.rotate=this.rotate===0?-4:0,this.scale=this.scale===1.2?1.3:1.2}}}),jL=tt.Component("Menu",{components:{Button:Jh},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),M.x={transition:i.x},M.w=400,M.h=1080,M.color="{right: '0x64748baa', left: '0x475569aa'}",a[0].populate(M),y===!0&&(v-=1),o=a[0];const b={};a[1]=this.element({parent:o||"root"},y===!0?C:i),b.x=50,b.y=40,a[1].populate(b),y===!0&&(v-=1);const _=u.components&&u.components.Button||h.Button;o=a[1];const O={};a[2]=this.element({parent:o||"root"},y===!0?C:i),O.color="0xe4e4e7ff",O.ref="menu1";const B=[];if(typeof _<"u")for(let xe in _.config.props)delete O[_.config.props[xe]],B.push(_.config.props[xe]);a[2].populate(O),y===!0&&(v-=1),o=a[2];const G={};G.color="0xe4e4e7ff",G.ref="menu1",m=G.is||"Button";let $;if(typeof m=="string"){if($=u.components&&u.components[m]||h[m],!$)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);a[3]=$.call(null,{props:G},a[2],i),a[3][Symbol.for("slots")][0]?(o=a[3][Symbol.for("slots")][0],C=a[3],y=!0):o=a[3][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const j=u.components&&u.components.Button||h.Button;o=a[1];const ne={};a[4]=this.element({parent:o||"root"},y===!0?C:i),ne.color="0xe4e4e7ff",ne.y=100,ne.ref="menu2";const X=[];if(typeof j<"u")for(let xe in j.config.props)delete ne[j.config.props[xe]],X.push(j.config.props[xe]);a[4].populate(ne),y===!0&&(v-=1),o=a[4];const K={};K.color="0xe4e4e7ff",K.y=100,K.ref="menu2",m=K.is||"Button";let ee;if(typeof m=="string"){if(ee=u.components&&u.components[m]||h[m],!ee)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);a[5]=ee.call(null,{props:K},a[4],i),a[5][Symbol.for("slots")][0]?(o=a[5][Symbol.for("slots")][0],C=a[5],y=!0):o=a[5][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const de=u.components&&u.components.Button||h.Button;o=a[1];const k={};a[6]=this.element({parent:o||"root"},y===!0?C:i),k.color="0xe4e4e7ff",k.y=200,k.ref="menu3";const V=[];if(typeof de<"u")for(let xe in de.config.props)delete k[de.config.props[xe]],V.push(de.config.props[xe]);a[6].populate(k),y===!0&&(v-=1),o=a[6];const Q={};Q.color="0xe4e4e7ff",Q.y=200,Q.ref="menu3",m=Q.is||"Button";let se;if(typeof m=="string"){if(se=u.components&&u.components[m]||h[m],!se)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(se=m);a[7]=se.call(null,{props:Q},a[6],i),a[7][Symbol.for("slots")][0]?(o=a[7][Symbol.for("slots")][0],C=a[7],y=!0):o=a[7][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const J=u.components&&u.components.Button||h.Button;o=a[1];const te={};a[8]=this.element({parent:o||"root"},y===!0?C:i),te.color="0xe4e4e7ff",te.y=300,te.ref="menu4";const W=[];if(typeof J<"u")for(let xe in J.config.props)delete te[J.config.props[xe]],W.push(J.config.props[xe]);a[8].populate(te),y===!0&&(v-=1),o=a[8];const Z={};Z.color="0xe4e4e7ff",Z.y=300,Z.ref="menu4",m=Z.is||"Button";let ce;if(typeof m=="string"){if(ce=u.components&&u.components[m]||h[m],!ce)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ce=m);return a[9]=ce.call(null,{props:Z},a[8],i),a[9][Symbol.for("slots")][0]?(o=a[9][Symbol.for("slots")][0],C=a[9],y=!0):o=a[9][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),a},effects:[function(o,i,u,h,g,x){i[0].set("x",{transition:o.x})}],context:{}},state(){return{x:-360,focused:1}},hooks:{focus(){this.$trigger("focused"),this.x=0}},watch:{focused(){const f=this.$select(`menu${this.focused}`);f&&f.$focus&&f.$focus()}},input:{right(){this.parent.$focus(),this.x=-360},down(){this.focused=Math.min(this.focused+1,4)},up(){this.focused=Math.max(this.focused-1,1)},left(){}}}),FL=tt.Component("FocusHandling",{components:{Menu:jL,Button:Jh},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(b),v===!0&&(M-=1),o=a[0];const _={};a[1]=this.element({parent:o||"root"},v===!0?y:i),_.x=300,_.y=150,a[1].populate(_),v===!0&&(M-=1);const O=u.components&&u.components.Button||h.Button;o=a[1];const B={};a[2]=this.element({parent:o||"root"},v===!0?y:i),B.color="0xef4444ff",B.x=0,B.ref="button1",B.z=i.focused===1?1:0;const G=[];if(typeof O<"u")for(let Pt in O.config.props)delete B[O.config.props[Pt]],G.push(O.config.props[Pt]);a[2].populate(B),v===!0&&(M-=1),o=a[2];const $={};$.color="0xef4444ff",$.x=0,$.ref="button1",C=i.focused===1?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),$.z=C,m=$.is||"Button";let j;if(typeof m=="string"){if(j=u.components&&u.components[m]||h[m],!j)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(j=m);a[3]=j.call(null,{props:$},a[2],i),a[3][Symbol.for("slots")][0]?(o=a[3][Symbol.for("slots")][0],y=a[3],v=!0):o=a[3][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const ne=u.components&&u.components.Button||h.Button;o=a[1];const X={};a[4]=this.element({parent:o||"root"},v===!0?y:i),X.color="0xf97316ff",X.x=320,X.ref="button2",X.z=i.focused===2?1:0;const K=[];if(typeof ne<"u")for(let Pt in ne.config.props)delete X[ne.config.props[Pt]],K.push(ne.config.props[Pt]);a[4].populate(X),v===!0&&(M-=1),o=a[4];const ee={};ee.color="0xf97316ff",ee.x=320,ee.ref="button2",C=i.focused===2?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),ee.z=C,m=ee.is||"Button";let de;if(typeof m=="string"){if(de=u.components&&u.components[m]||h[m],!de)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(de=m);a[5]=de.call(null,{props:ee},a[4],i),a[5][Symbol.for("slots")][0]?(o=a[5][Symbol.for("slots")][0],y=a[5],v=!0):o=a[5][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const k=u.components&&u.components.Button||h.Button;o=a[1];const V={};a[6]=this.element({parent:o||"root"},v===!0?y:i),V.color="0x84cc16ff",V.x=640,V.ref="button3",V.z=i.focused===3?1:0;const Q=[];if(typeof k<"u")for(let Pt in k.config.props)delete V[k.config.props[Pt]],Q.push(k.config.props[Pt]);a[6].populate(V),v===!0&&(M-=1),o=a[6];const se={};se.color="0x84cc16ff",se.x=640,se.ref="button3",C=i.focused===3?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),se.z=C,m=se.is||"Button";let J;if(typeof m=="string"){if(J=u.components&&u.components[m]||h[m],!J)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(J=m);a[7]=J.call(null,{props:se},a[6],i),a[7][Symbol.for("slots")][0]?(o=a[7][Symbol.for("slots")][0],y=a[7],v=!0):o=a[7][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const te=u.components&&u.components.Button||h.Button;o=a[1];const W={};a[8]=this.element({parent:o||"root"},v===!0?y:i),W.color="0x10b981ff",W.x=0,W.y=100,W.ref="button4",W.z=i.focused===4?1:0;const Z=[];if(typeof te<"u")for(let Pt in te.config.props)delete W[te.config.props[Pt]],Z.push(te.config.props[Pt]);a[8].populate(W),v===!0&&(M-=1),o=a[8];const ce={};ce.color="0x10b981ff",ce.x=0,ce.y=100,ce.ref="button4",C=i.focused===4?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.z=C,m=ce.is||"Button";let xe;if(typeof m=="string"){if(xe=u.components&&u.components[m]||h[m],!xe)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xe=m);a[9]=xe.call(null,{props:ce},a[8],i),a[9][Symbol.for("slots")][0]?(o=a[9][Symbol.for("slots")][0],y=a[9],v=!0):o=a[9][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const ge=u.components&&u.components.Button||h.Button;o=a[1];const pe={};a[10]=this.element({parent:o||"root"},v===!0?y:i),pe.color="0x06b6d4ff",pe.y=100,pe.x=320,pe.ref="button5",pe.z=i.focused===5?1:0;const Ee=[];if(typeof ge<"u")for(let Pt in ge.config.props)delete pe[ge.config.props[Pt]],Ee.push(ge.config.props[Pt]);a[10].populate(pe),v===!0&&(M-=1),o=a[10];const Re={};Re.color="0x06b6d4ff",Re.y=100,Re.x=320,Re.ref="button5",C=i.focused===5?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),Re.z=C,m=Re.is||"Button";let z;if(typeof m=="string"){if(z=u.components&&u.components[m]||h[m],!z)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(z=m);a[11]=z.call(null,{props:Re},a[10],i),a[11][Symbol.for("slots")][0]?(o=a[11][Symbol.for("slots")][0],y=a[11],v=!0):o=a[11][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Me=u.components&&u.components.Button||h.Button;o=a[1];const ye={};a[12]=this.element({parent:o||"root"},v===!0?y:i),ye.color="0x3b82f6ff",ye.y=100,ye.x=640,ye.ref="button6",ye.z=i.focused===6?1:0;const Ue=[];if(typeof Me<"u")for(let Pt in Me.config.props)delete ye[Me.config.props[Pt]],Ue.push(Me.config.props[Pt]);a[12].populate(ye),v===!0&&(M-=1),o=a[12];const De={};De.color="0x3b82f6ff",De.y=100,De.x=640,De.ref="button6",C=i.focused===6?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),De.z=C,m=De.is||"Button";let We;if(typeof m=="string"){if(We=u.components&&u.components[m]||h[m],!We)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(We=m);a[13]=We.call(null,{props:De},a[12],i),a[13][Symbol.for("slots")][0]?(o=a[13][Symbol.for("slots")][0],y=a[13],v=!0):o=a[13][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Xe=u.components&&u.components.Button||h.Button;o=a[1];const ze={};a[14]=this.element({parent:o||"root"},v===!0?y:i),ze.color="0x8b5cf6ff",ze.y=200,ze.x=0,ze.ref="button7",ze.z=i.focused===7?1:0;const we=[];if(typeof Xe<"u")for(let Pt in Xe.config.props)delete ze[Xe.config.props[Pt]],we.push(Xe.config.props[Pt]);a[14].populate(ze),v===!0&&(M-=1),o=a[14];const et={};et.color="0x8b5cf6ff",et.y=200,et.x=0,et.ref="button7",C=i.focused===7?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),et.z=C,m=et.is||"Button";let Je;if(typeof m=="string"){if(Je=u.components&&u.components[m]||h[m],!Je)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Je=m);a[15]=Je.call(null,{props:et},a[14],i),a[15][Symbol.for("slots")][0]?(o=a[15][Symbol.for("slots")][0],y=a[15],v=!0):o=a[15][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Ze=u.components&&u.components.Button||h.Button;o=a[1];const ot={};a[16]=this.element({parent:o||"root"},v===!0?y:i),ot.color="0xd946efff",ot.y=200,ot.x=320,ot.ref="button8",ot.z=i.focused===8?1:0;const St=[];if(typeof Ze<"u")for(let Pt in Ze.config.props)delete ot[Ze.config.props[Pt]],St.push(Ze.config.props[Pt]);a[16].populate(ot),v===!0&&(M-=1),o=a[16];const lt={};lt.color="0xd946efff",lt.y=200,lt.x=320,lt.ref="button8",C=i.focused===8?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),lt.z=C,m=lt.is||"Button";let It;if(typeof m=="string"){if(It=u.components&&u.components[m]||h[m],!It)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(It=m);a[17]=It.call(null,{props:lt},a[16],i),a[17][Symbol.for("slots")][0]?(o=a[17][Symbol.for("slots")][0],y=a[17],v=!0):o=a[17][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const je=u.components&&u.components.Button||h.Button;o=a[1];const at={};a[18]=this.element({parent:o||"root"},v===!0?y:i),at.color="0xf43f5eff",at.y=200,at.x=640,at.ref="button9",at.z=i.focused===9?1:0;const xt=[];if(typeof je<"u")for(let Pt in je.config.props)delete at[je.config.props[Pt]],xt.push(je.config.props[Pt]);a[18].populate(at),v===!0&&(M-=1),o=a[18];const dt={};dt.color="0xf43f5eff",dt.y=200,dt.x=640,dt.ref="button9",C=i.focused===9?1:0,Array.isArray(C)===!0&&(C=x(C).slice(0)),dt.z=C,m=dt.is||"Button";let xn;if(typeof m=="string"){if(xn=u.components&&u.components[m]||h[m],!xn)throw new Error('Component "Button" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(xn=m);a[19]=xn.call(null,{props:dt},a[18],i),a[19][Symbol.for("slots")][0]?(o=a[19][Symbol.for("slots")][0],y=a[19],v=!0):o=a[19][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const pn=u.components&&u.components.Menu||h.Menu;o=a[0];const zt={};a[20]=this.element({parent:o||"root"},v===!0?y:i),zt.ref="menu";const Ct=[];if(typeof pn<"u")for(let Pt in pn.config.props)delete zt[pn.config.props[Pt]],Ct.push(pn.config.props[Pt]);a[20].populate(zt),v===!0&&(M-=1),o=a[20];const Wt={};Wt.ref="menu",m=Wt.is||"Menu";let Tt;if(typeof m=="string"){if(Tt=u.components&&u.components[m]||h[m],!Tt)throw new Error('Component "Menu" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Tt=m);return a[21]=Tt.call(null,{props:Wt},a[20],i),a[21][Symbol.for("slots")][0]?(o=a[21][Symbol.for("slots")][0],y=a[21],v=!0):o=a[21][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),a},effects:[function(o,i,u,h,g,x){(typeof skip2>"u"||skip2.indexOf("z")===-1)&&i[2].set("z",o.focused===1?1:0)},function(o,i,u,h,g,x){i[3][Symbol.for("props")].z=o.focused===1?1:0},function(o,i,u,h,g,x){(typeof skip4>"u"||skip4.indexOf("z")===-1)&&i[4].set("z",o.focused===2?1:0)},function(o,i,u,h,g,x){i[5][Symbol.for("props")].z=o.focused===2?1:0},function(o,i,u,h,g,x){(typeof skip6>"u"||skip6.indexOf("z")===-1)&&i[6].set("z",o.focused===3?1:0)},function(o,i,u,h,g,x){i[7][Symbol.for("props")].z=o.focused===3?1:0},function(o,i,u,h,g,x){(typeof skip8>"u"||skip8.indexOf("z")===-1)&&i[8].set("z",o.focused===4?1:0)},function(o,i,u,h,g,x){i[9][Symbol.for("props")].z=o.focused===4?1:0},function(o,i,u,h,g,x){(typeof skip10>"u"||skip10.indexOf("z")===-1)&&i[10].set("z",o.focused===5?1:0)},function(o,i,u,h,g,x){i[11][Symbol.for("props")].z=o.focused===5?1:0},function(o,i,u,h,g,x){(typeof skip12>"u"||skip12.indexOf("z")===-1)&&i[12].set("z",o.focused===6?1:0)},function(o,i,u,h,g,x){i[13][Symbol.for("props")].z=o.focused===6?1:0},function(o,i,u,h,g,x){(typeof skip14>"u"||skip14.indexOf("z")===-1)&&i[14].set("z",o.focused===7?1:0)},function(o,i,u,h,g,x){i[15][Symbol.for("props")].z=o.focused===7?1:0},function(o,i,u,h,g,x){(typeof skip16>"u"||skip16.indexOf("z")===-1)&&i[16].set("z",o.focused===8?1:0)},function(o,i,u,h,g,x){i[17][Symbol.for("props")].z=o.focused===8?1:0},function(o,i,u,h,g,x){(typeof skip18>"u"||skip18.indexOf("z")===-1)&&i[18].set("z",o.focused===9?1:0)},function(o,i,u,h,g,x){i[19][Symbol.for("props")].z=o.focused===9?1:0}],context:{}},state(){return{focused:1}},hooks:{focus(){this.$trigger("focused")}},watch:{focused(f){const o=this.$select(`button${f}`);o&&o.$focus&&o.$focus()}},input:{right(){this.focused=Math.min(this.focused+1,9)},left(){const f=this.focused-1;if(f===0){const o=this.$select("menu");o&&o.$focus&&o.$focus()}else this.focused=Math.max(f,1)},a(){const f=this.$select("menu");f&&f.$focus&&f.$focus()}}}),$L=tt.Component("Positioning",{code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),a[0].populate(M),y===!0&&(v-=1),o=a[0];const b={};a[1]=this.element({parent:o||"root"},y===!0?C:i),b.w=100,b.h=100,b.x=20,b.y=20,b.color="0xecfeffff",a[1].populate(b),y===!0&&(v-=1),o=a[0];const _={};a[2]=this.element({parent:o||"root"},y===!0?C:i),_.w=100,_.h=100,_.x=140,_.y=20,_.color="0xa5f3fcff",a[2].populate(_),y===!0&&(v-=1),o=a[0];const O={};a[3]=this.element({parent:o||"root"},y===!0?C:i),O.w=100,O.h=100,O.x=260,O.y=20,O.color="0x22d3eeff",a[3].populate(O),y===!0&&(v-=1),o=a[0];const B={};a[4]=this.element({parent:o||"root"},y===!0?C:i),B.w=100,B.h=100,B.x=380,B.y=20,B.color="0x0891b2ff",a[4].populate(B),y===!0&&(v-=1),o=a[0];const G={};a[5]=this.element({parent:o||"root"},y===!0?C:i),G.w=100,G.h=100,G.x=i.x1,G.y=i.y,G.color="0xfdf4ffff",a[5].populate(G),y===!0&&(v-=1),o=a[0];const $={};a[6]=this.element({parent:o||"root"},y===!0?C:i),$.w=100,$.h=100,$.x=i.x2,$.y=i.y,$.color="0xf5d0feff",a[6].populate($),y===!0&&(v-=1),o=a[0];const j={};a[7]=this.element({parent:o||"root"},y===!0?C:i),j.w=100,j.h=100,j.x=i.x3,j.y=i.y,j.color="0xe879f9ff",a[7].populate(j),y===!0&&(v-=1),o=a[0];const ne={};a[8]=this.element({parent:o||"root"},y===!0?C:i),ne.w=100,ne.h=100,ne.x=i.x4,ne.y=i.y,ne.color="0xc026d3ff",a[8].populate(ne),y===!0&&(v-=1),o=a[0];const X={};a[9]=this.element({parent:o||"root"},y===!0?C:i),X.w=100,X.h=100,X.x=i.xA,X.y=260,X.color="0xfff7edff",a[9].populate(X),y===!0&&(v-=1),o=a[0];const K={};a[10]=this.element({parent:o||"root"},y===!0?C:i),K.w=100,K.h=100,K.x=i.xB,K.y=260,K.color="0xfed7aaff",a[10].populate(K),y===!0&&(v-=1),o=a[0];const ee={};a[11]=this.element({parent:o||"root"},y===!0?C:i),ee.w=100,ee.h=100,ee.x=i.xC,ee.y=260,ee.color="0xfb923cff",a[11].populate(ee),y===!0&&(v-=1),o=a[0];const de={};a[12]=this.element({parent:o||"root"},y===!0?C:i),de.w=100,de.h=100,de.x=i.xD,de.y=260,de.color="0xea580cff",a[12].populate(de),y===!0&&(v-=1),o=a[0];const k={};a[13]=this.element({parent:o||"root"},y===!0?C:i),k.w=800,k.h=800,k.y=20,k.x=800,k.color="0xecfdf5ff",a[13].populate(k),y===!0&&(v-=1),o=a[13];const V={};a[14]=this.element({parent:o||"root"},y===!0?C:i),V.w=600,V.h=600,V.y=20,V.x=20,V.color="0xa7f3d0ff",a[14].populate(V),y===!0&&(v-=1),o=a[14];const Q={};a[15]=this.element({parent:o||"root"},y===!0?C:i),Q.w=400,Q.h=400,Q.y=100,Q.x=20,Q.color="0x34d399ff",a[15].populate(Q),y===!0&&(v-=1),o=a[15];const se={};a[16]=this.element({parent:o||"root"},y===!0?C:i),se.w=200,se.h=100,se.y=(400-100)/2,se.x=(400-200)/2,se.color="0x059669ff",a[16].populate(se),y===!0&&(v-=1),o=a[16];const J={};a[17]=this.element({parent:o||"root"},y===!0?C:i),J.w=50,J.h=50,J.y={transition:i.yNested},J.x={transition:i.xNested},J.color="0x065f46ff",a[17].populate(J),y===!0&&(v-=1),o=a[0];const te={};a[18]=this.element({parent:o||"root"},y===!0?C:i),te.w=100,te.h=100,te.y=500,te.x=20,te.color="0xe11d48ff",a[18].populate(te),y===!0&&(v-=1),o=a[0];const W={};a[19]=this.element({parent:o||"root"},y===!0?C:i),W.w=200,W.h=200,W.x=50,W.y=700,W.color="0x94a3b8ff",W.z=100,a[19].populate(W),y===!0&&(v-=1),o=a[19];const Z={};a[20]=this.element({parent:o||"root"},y===!0?C:i),Z.content="Lightning!",Z.x=100,Z.y=140,Z.__textnode=!0,a[20].populate(Z),y===!0&&(v-=1),o=a[19];const ce={};a[21]=this.element({parent:o||"root"},y===!0?C:i),ce.w=300,ce.h=100,ce.color="0x475569ff",a[21].populate(ce),y===!0&&(v-=1);const xe=u.components&&u.components.Circle||h.Circle;o=a[19];const ge={};a[22]=this.element({parent:o||"root"},y===!0?C:i),ge.x=150,ge.y=150,ge.size=100,ge.color="0xffffffff";const pe=[];if(typeof xe<"u")for(let It in xe.config.props)delete ge[xe.config.props[It]],pe.push(xe.config.props[It]);a[22].populate(ge),y===!0&&(v-=1),o=a[22];const Ee={};Ee.x=150,Ee.y=150,Ee.size=100,Ee.color="0xffffffff",m=Ee.is||"Circle";let Re;if(typeof m=="string"){if(Re=u.components&&u.components[m]||h[m],!Re)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Re=m);a[23]=Re.call(null,{props:Ee},a[22],i),a[23][Symbol.for("slots")][0]?(o=a[23][Symbol.for("slots")][0],C=a[23],y=!0):o=a[23][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),o=a[0];const z={};a[24]=this.element({parent:o||"root"},y===!0?C:i),z.w=300,z.h=300,z.x=50,z.y=700,z.color="0xef444480",a[24].populate(z),y===!0&&(v-=1),o=a[0];const Me={};a[25]=this.element({parent:o||"root"},y===!0?C:i),Me.w=400,Me.h=100,Me.x=800,Me.y=900,Me.color="0x0284c7ff",a[25].populate(Me),y===!0&&(v-=1),o=a[25];const ye={};a[26]=this.element({parent:o||"root"},y===!0?C:i),ye.w=o.node.width*(42/100),ye.h=o.node.height*(30/100),ye.y=o.node.height*(5/100),ye.x=o.node.width*(1/100),ye.color="0x075985ff",a[26].populate(ye),y===!0&&(v-=1),o=a[25];const Ue={};a[27]=this.element({parent:o||"root"},y===!0?C:i),Ue.w=i.bar2.v,Ue.h=o.node.height*(30/100),Ue.y=o.node.height*(35/100),Ue.x=o.node.width*(1/100),Ue.color="0x6b21a8ff",a[27].populate(Ue),y===!0&&(v-=1),o=a[25];const De={};a[28]=this.element({parent:o||"root"},y===!0?C:i),De.w={transition:i.bar3},De.h=o.node.height*(30/100),De.y=o.node.height*(65/100),De.x=o.node.width*(1/100),De.color="0x9f1239ff",a[28].populate(De),y===!0&&(v-=1),o=a[0];const We={};a[29]=this.element({parent:o||"root"},y===!0?C:i),We.w=250,We.h=250,We.color="0xfef08aff",We.x=450,We.y=700,a[29].populate(We),y===!0&&(v-=1),o=a[29];const Xe={};a[30]=this.element({parent:o||"root"},y===!0?C:i),Xe.w=40,Xe.h=40,Xe.placement="left",Xe.color="0x818cf8ff",a[30].populate(Xe),y===!0&&(v-=1),o=a[29];const ze={};a[31]=this.element({parent:o||"root"},y===!0?C:i),ze.w=40,ze.h=40,ze.placement="center",ze.color="0x2563ebff",a[31].populate(ze),y===!0&&(v-=1),o=a[29];const we={};a[32]=this.element({parent:o||"root"},y===!0?C:i),we.w=40,we.h=40,we.placement="right",we.color="0x1e40afff",a[32].populate(we),y===!0&&(v-=1),o=a[29];const et={};a[33]=this.element({parent:o||"root"},y===!0?C:i),et.w=40,et.h=40,et.x=54,et.placement="top",et.color="0xf472b6ff",a[33].populate(et),y===!0&&(v-=1),o=a[29];const Je={};a[34]=this.element({parent:o||"root"},y===!0?C:i),Je.w=40,Je.h=40,Je.x=54,Je.placement="middle",Je.color="0xdb2777ff",a[34].populate(Je),y===!0&&(v-=1),o=a[29];const Ze={};a[35]=this.element({parent:o||"root"},y===!0?C:i),Ze.w=40,Ze.h=40,Ze.x=54,Ze.placement="bottom",Ze.color="0xbe185dff",a[35].populate(Ze),y===!0&&(v-=1),o=a[29];const ot={};a[36]=this.element({parent:o||"root"},y===!0?C:i),ot.w=40,ot.h=40,ot.placement="{x: 'center', y: 'bottom'}",ot.color="0xa3e635ff",a[36].populate(ot),y===!0&&(v-=1),o=a[29];const St={};a[37]=this.element({parent:o||"root"},y===!0?C:i),St.w=40,St.h=40,St.placement="{x: 'right', y: 'middle'}",St.color="0x65a30dff",a[37].populate(St),y===!0&&(v-=1),o=a[29];const lt={};return a[38]=this.element({parent:o||"root"},y===!0?C:i),lt.w=40,lt.h=40,lt.placement="{x: 'center', y: 'middle'}",lt.color="0x4d7c0fff",a[38].populate(lt),y===!0&&(v-=1),a},effects:[function(o,i,u,h,g,x){i[9].set("x",o.xA)},function(o,i,u,h,g,x){i[10].set("x",o.xB)},function(o,i,u,h,g,x){i[11].set("x",o.xC)},function(o,i,u,h,g,x){i[12].set("x",o.xD)},function(o,i,u,h,g,x){i[16].set("y",(400-100)/2)},function(o,i,u,h,g,x){i[16].set("x",(400-200)/2)},function(o,i,u,h,g,x){i[17].set("y",{transition:o.yNested})},function(o,i,u,h,g,x){i[17].set("x",{transition:o.xNested})},function(o,i,u,h,g,x){i[27].set("w",o.bar2.v)},function(o,i,u,h,g,x){i[28].set("w",{transition:o.bar3})}],context:{}},state(){return{x1:20,x2:140,x3:20+140+100,x4:380,y:140,xA:20,xB:140,xC:260,xD:380,yNested:0,xNested:0,bar2:{direction:"up",v:"10%"},bar3:"10%"}},hooks:{ready(){this.$setTimeout(()=>{this.xD=this.xD+200,this.xC=this.xC+100,this.xB=this.xB+50,this.xA=this.xA+25},4e3),this.$setInterval(()=>{this.yNested=this.yNested===0?50:0},2e3),this.$setInterval(()=>{this.xNested=this.xNested===0?150:0},1e3),this.$setInterval(()=>{const f=parseFloat(this.bar2.v),o=this.bar2.direction==="up"?f+10:f-10;this.bar2.v=o+"%",o>=90&&(this.bar2.direction="down"),o<=10&&(this.bar2.direction="up")},400),this.$setInterval(()=>{this.bar3=Math.ceil(Math.random()*96)+"%"},2e3)}}});var zL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function VL(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var DT={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(f){(function(){var o=typeof window<"u"?window:zL,i={};(function(h,g,x){var S;function a(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var m=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function C(e){e=[typeof globalThis=="object"&&globalThis,e,typeof h=="object"&&h,typeof self=="object"&&self,typeof g=="object"&&g];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var y=C(this);function v(e,t){if(t)e:{var n=y;e=e.split(".");for(var r=0;r<e.length-1;r++){var s=e[r];if(!(s in n))break e;n=n[s]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&t!=null&&m(n,e,{configurable:!0,writable:!0,value:t})}}v("Symbol",function(e){function t(l){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(l||"")+"_"+s++,l)}function n(l,c){this.g=l,m(this,"description",{configurable:!0,writable:!0,value:c})}if(e)return e;n.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",s=0;return t}),v("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=y[t[n]];typeof r=="function"&&typeof r.prototype[e]!="function"&&m(r.prototype,e,{configurable:!0,writable:!0,value:function(){return M(a(this))}})}return e});function M(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function b(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:a(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function _(e){if(!(e instanceof Array)){e=b(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var O=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},B;if(typeof Object.setPrototypeOf=="function")B=Object.setPrototypeOf;else{var G;e:{var $={a:!0},j={};try{j.__proto__=$,G=j.a;break e}catch{}G=!1}B=G?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var ne=B;function X(e,t){if(e.prototype=O(t.prototype),e.prototype.constructor=e,ne)ne(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.hk=t.prototype}function K(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function ee(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}K.prototype.s=function(e){this.h=e};function de(e,t){e.i={sg:t,Fg:!0},e.g=e.m||e.j}K.prototype.return=function(e){this.i={return:e},this.g=this.j};function k(e,t,n){return e.g=n,{value:t}}K.prototype.u=function(e){this.g=e};function V(e){e.g=0}function Q(e,t,n){e.m=t,n!=null&&(e.j=n)}function se(e,t){e.m=0,e.j=t||0}function J(e,t,n){e.g=t,e.m=n||0}function te(e,t){return e.m=t||0,t=e.i.sg,e.i=null,t}function W(e){e.A=[e.i],e.m=0,e.j=0}function Z(e,t){var n=e.A.splice(0)[0];(n=e.i=e.i||n)?n.Fg?e.g=e.m||e.j:n.u!=null&&e.j<n.u?(e.g=n.u,e.i=null):e.g=e.j:e.g=t}function ce(e){this.g=new K,this.h=e}function xe(e,t){ee(e.g);var n=e.g.l;return n?ge(e,"return"in n?n.return:function(r){return{value:r,done:!0}},t,e.g.return):(e.g.return(t),pe(e))}function ge(e,t,n,r){try{var s=t.call(e.g.l,n);if(!(s instanceof Object))throw new TypeError("Iterator result "+s+" is not an object");if(!s.done)return e.g.o=!1,s;var l=s.value}catch(c){return e.g.l=null,de(e.g,c),pe(e)}return e.g.l=null,r.call(e.g,l),pe(e)}function pe(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,de(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Fg)throw t.sg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function Ee(e){this.next=function(t){return ee(e.g),e.g.l?t=ge(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=pe(e)),t},this.throw=function(t){return ee(e.g),e.g.l?t=ge(e,e.g.l.throw,t,e.g.s):(de(e.g,t),t=pe(e)),t},this.return=function(t){return xe(e,t)},this[Symbol.iterator]=function(){return this}}function Re(e){function t(r){return e.next(r)}function n(r){return e.throw(r)}return new Promise(function(r,s){function l(c){c.done?r(c.value):Promise.resolve(c.value).then(t,n).then(l,s)}l(e.next())})}function z(e){return Re(new Ee(new ce(e)))}function Me(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}v("Promise",function(e){function t(c){this.h=0,this.i=void 0,this.g=[],this.o=!1;var d=this.j();try{c(d.resolve,d.reject)}catch(p){d.reject(p)}}function n(){this.g=null}function r(c){return c instanceof t?c:new t(function(d){d(c)})}if(e)return e;n.prototype.h=function(c){if(this.g==null){this.g=[];var d=this;this.i(function(){d.l()})}this.g.push(c)};var s=y.setTimeout;n.prototype.i=function(c){s(c,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var c=this.g;this.g=[];for(var d=0;d<c.length;++d){var p=c[d];c[d]=null;try{p()}catch(w){this.j(w)}}}this.g=null},n.prototype.j=function(c){this.i(function(){throw c})},t.prototype.j=function(){function c(w){return function(T){p||(p=!0,w.call(d,T))}}var d=this,p=!1;return{resolve:c(this.F),reject:c(this.l)}},t.prototype.F=function(c){if(c===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof t)this.H(c);else{e:switch(typeof c){case"object":var d=c!=null;break e;case"function":d=!0;break e;default:d=!1}d?this.C(c):this.m(c)}},t.prototype.C=function(c){var d=void 0;try{d=c.then}catch(p){this.l(p);return}typeof d=="function"?this.I(d,c):this.m(c)},t.prototype.l=function(c){this.s(2,c)},t.prototype.m=function(c){this.s(1,c)},t.prototype.s=function(c,d){if(this.h!=0)throw Error("Cannot settle("+c+", "+d+"): Promise already settled in state"+this.h);this.h=c,this.i=d,this.h===2&&this.G(),this.A()},t.prototype.G=function(){var c=this;s(function(){if(c.B()){var d=y.console;typeof d<"u"&&d.error(c.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var c=y.CustomEvent,d=y.Event,p=y.dispatchEvent;return typeof p>"u"?!0:(typeof c=="function"?c=new c("unhandledrejection",{cancelable:!0}):typeof d=="function"?c=new d("unhandledrejection",{cancelable:!0}):(c=y.document.createEvent("CustomEvent"),c.initCustomEvent("unhandledrejection",!1,!0,c)),c.promise=this,c.reason=this.i,p(c))},t.prototype.A=function(){if(this.g!=null){for(var c=0;c<this.g.length;++c)l.h(this.g[c]);this.g=null}};var l=new n;return t.prototype.H=function(c){var d=this.j();c.Ed(d.resolve,d.reject)},t.prototype.I=function(c,d){var p=this.j();try{c.call(d,p.resolve,p.reject)}catch(w){p.reject(w)}},t.prototype.then=function(c,d){function p(I,A){return typeof I=="function"?function(R){try{w(I(R))}catch(D){T(D)}}:A}var w,T,E=new t(function(I,A){w=I,T=A});return this.Ed(p(c,w),p(d,T)),E},t.prototype.catch=function(c){return this.then(void 0,c)},t.prototype.Ed=function(c,d){function p(){switch(w.h){case 1:c(w.i);break;case 2:d(w.i);break;default:throw Error("Unexpected state: "+w.h)}}var w=this;this.g==null?l.h(p):this.g.push(p),this.o=!0},t.resolve=r,t.reject=function(c){return new t(function(d,p){p(c)})},t.race=function(c){return new t(function(d,p){for(var w=b(c),T=w.next();!T.done;T=w.next())r(T.value).Ed(d,p)})},t.all=function(c){var d=b(c),p=d.next();return p.done?r([]):new t(function(w,T){function E(R){return function(D){I[R]=D,A--,A==0&&w(I)}}var I=[],A=0;do I.push(void 0),A++,r(p.value).Ed(E(I.length-1),T),p=d.next();while(!p.done)})},t});function ye(e,t){return Object.prototype.hasOwnProperty.call(e,t)}v("WeakMap",function(e){function t(p){if(this.g=(d+=Math.random()+1).toString(),p){p=b(p);for(var w;!(w=p.next()).done;)w=w.value,this.set(w[0],w[1])}}function n(){}function r(p){var w=typeof p;return w==="object"&&p!==null||w==="function"}function s(p){if(!ye(p,c)){var w=new n;m(p,c,{value:w})}}function l(p){var w=Object[p];w&&(Object[p]=function(T){return T instanceof n?T:(Object.isExtensible(T)&&s(T),w(T))})}if(function(){if(!e||!Object.seal)return!1;try{var p=Object.seal({}),w=Object.seal({}),T=new e([[p,2],[w,3]]);return T.get(p)!=2||T.get(w)!=3?!1:(T.delete(p),T.set(w,4),!T.has(p)&&T.get(w)==4)}catch{return!1}}())return e;var c="$jscomp_hidden_"+Math.random();l("freeze"),l("preventExtensions"),l("seal");var d=0;return t.prototype.set=function(p,w){if(!r(p))throw Error("Invalid WeakMap key");if(s(p),!ye(p,c))throw Error("WeakMap key fail: "+p);return p[c][this.g]=w,this},t.prototype.get=function(p){return r(p)&&ye(p,c)?p[c][this.g]:void 0},t.prototype.has=function(p){return r(p)&&ye(p,c)&&ye(p[c],this.g)},t.prototype.delete=function(p){return r(p)&&ye(p,c)&&ye(p[c],this.g)?delete p[c][this.g]:!1},t}),v("Map",function(e){function t(){var d={};return d.Mb=d.next=d.head=d}function n(d,p){var w=d[1];return M(function(){if(w){for(;w.head!=d[1];)w=w.Mb;for(;w.next!=w.head;)return w=w.next,{done:!1,value:p(w)};w=null}return{done:!0,value:void 0}})}function r(d,p){var w=p&&typeof p;w=="object"||w=="function"?l.has(p)?w=l.get(p):(w=""+ ++c,l.set(p,w)):w="p_"+p;var T=d[0][w];if(T&&ye(d[0],w))for(d=0;d<T.length;d++){var E=T[d];if(p!==p&&E.key!==E.key||p===E.key)return{id:w,list:T,index:d,entry:E}}return{id:w,list:T,index:-1,entry:void 0}}function s(d){if(this[0]={},this[1]=t(),this.size=0,d){d=b(d);for(var p;!(p=d.next()).done;)p=p.value,this.set(p[0],p[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var d=Object.seal({x:4}),p=new e(b([[d,"s"]]));if(p.get(d)!="s"||p.size!=1||p.get({x:4})||p.set({x:4},"t")!=p||p.size!=2)return!1;var w=p.entries(),T=w.next();return T.done||T.value[0]!=d||T.value[1]!="s"?!1:(T=w.next(),!(T.done||T.value[0].x!=4||T.value[1]!="t"||!w.next().done))}catch{return!1}}())return e;var l=new WeakMap;s.prototype.set=function(d,p){d=d===0?0:d;var w=r(this,d);return w.list||(w.list=this[0][w.id]=[]),w.entry?w.entry.value=p:(w.entry={next:this[1],Mb:this[1].Mb,head:this[1],key:d,value:p},w.list.push(w.entry),this[1].Mb.next=w.entry,this[1].Mb=w.entry,this.size++),this},s.prototype.delete=function(d){return d=r(this,d),d.entry&&d.list?(d.list.splice(d.index,1),d.list.length||delete this[0][d.id],d.entry.Mb.next=d.entry.next,d.entry.next.Mb=d.entry.Mb,d.entry.head=null,this.size--,!0):!1},s.prototype.clear=function(){this[0]={},this[1]=this[1].Mb=t(),this.size=0},s.prototype.has=function(d){return!!r(this,d).entry},s.prototype.get=function(d){return(d=r(this,d).entry)&&d.value},s.prototype.entries=function(){return n(this,function(d){return[d.key,d.value]})},s.prototype.keys=function(){return n(this,function(d){return d.key})},s.prototype.values=function(){return n(this,function(d){return d.value})},s.prototype.forEach=function(d,p){for(var w=this.entries(),T;!(T=w.next()).done;)T=T.value,d.call(p,T[1],T[0],this)},s.prototype[Symbol.iterator]=s.prototype.entries;var c=0;return s}),v("Set",function(e){function t(n){if(this.g=new Map,n){n=b(n);for(var r;!(r=n.next()).done;)this.add(r.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),r=new e(b([n]));if(!r.has(n)||r.size!=1||r.add(n)!=r||r.size!=1||r.add({x:4})!=r||r.size!=2)return!1;var s=r.entries(),l=s.next();return l.done||l.value[0]!=n||l.value[1]!=n?!1:(l=s.next(),l.done||l.value[0]==n||l.value[0].x!=4||l.value[1]!=l.value[0]?!1:s.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,r){var s=this;this.g.forEach(function(l){return n.call(r,l,l,s)})},t)});function Ue(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var l=n++;return{value:t(l,e[l]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}v("Array.prototype.keys",function(e){return e||function(){return Ue(this,function(t){return t})}});function De(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,s=0;s<r;s++){var l=e[s];if(t.call(n,l,s,e))return{Dg:s,v:l}}return{Dg:-1,v:void 0}}v("Array.prototype.findIndex",function(e){return e||function(t,n){return De(this,t,n).Dg}}),v("Array.from",function(e){return e||function(t,n,r){n=n??function(d){return d};var s=[],l=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof l=="function"){t=l.call(t);for(var c=0;!(l=t.next()).done;)s.push(n.call(r,l.value,c++))}else for(l=t.length,c=0;c<l;c++)s.push(n.call(r,t[c],c));return s}}),v("Array.prototype.values",function(e){return e||function(){return Ue(this,function(t,n){return n})}}),v("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),v("Array.prototype.includes",function(e){return e||function(t,n){var r=this;r instanceof String&&(r=String(r));var s=r.length;for(n=n||0,0>n&&(n=Math.max(n+s,0));n<s;n++){var l=r[n];if(l===t||Object.is(l,t))return!0}return!1}});function We(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}v("String.prototype.includes",function(e){return e||function(t,n){return We(this,t,"includes").indexOf(t,n||0)!==-1}}),v("String.fromCodePoint",function(e){return e||function(t){for(var n="",r=0;r<arguments.length;r++){var s=Number(arguments[r]);if(0>s||1114111<s||s!==Math.floor(s))throw new RangeError("invalid_code_point "+s);65535>=s?n+=String.fromCharCode(s):(s-=65536,n+=String.fromCharCode(s>>>10&1023|55296),n+=String.fromCharCode(s&1023|56320))}return n}}),v("Array.prototype.find",function(e){return e||function(t,n){return De(this,t,n).v}}),v("String.prototype.startsWith",function(e){return e||function(t,n){var r=We(this,t,"startsWith"),s=r.length,l=t.length;n=Math.max(0,Math.min(n|0,r.length));for(var c=0;c<l&&n<s;)if(r[n++]!=t[c++])return!1;return c>=l}}),v("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=b(n);for(var r;!(r=n.next()).done;)this.add(r.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),r=Object.seal({}),s=new e([n]);return!s.has(n)||s.has(r)?!1:(s.delete(n),s.add(r),!s.has(n)&&s.has(r))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)});var Xe=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var s in r)ye(r,s)&&(e[s]=r[s])}return e};v("Object.assign",function(e){return e||Xe}),v("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),v("Array.prototype.entries",function(e){return e||function(){return Ue(this,function(t,n){return[t,n]})}}),v("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),v("String.prototype.repeat",function(e){return e||function(t){var n=We(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var r="";t;)t&1&&(r+=n),(t>>>=1)&&(n+=n);return r}}),v("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),v("Object.values",function(e){return e||function(t){var n=[],r;for(r in t)ye(t,r)&&n.push(t[r]);return n}}),v("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),v("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),v("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),v("Object.entries",function(e){return e||function(t){var n=[],r;for(r in t)ye(t,r)&&n.push([r,t[r]]);return n}});var ze=this||self;function we(e,t){e=e.split(".");var n=ze;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var r;e.length&&(r=e.shift());)e.length||t===void 0?n[r]&&n[r]!==Object.prototype[r]?n=n[r]:n=n[r]={}:n[r]=t}function et(){}function Je(){}function Ze(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}Ze.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function ot(e){return e.h/(1-Math.pow(e.g,e.i))}function St(){this.h=new Ze(2),this.j=new Ze(5),this.g=0,this.i=128e3,this.l=16e3}St.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},St.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},St.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(ot(this.h),ot(this.j))};function lt(){}function It(){}function je(){}function at(e){var t=Me.apply(1,arguments);pn.has(e)||(pn.add(e),je.apply(lt,_(t)))}function xt(){}function dt(){}function xn(){}var pn=new Set;h.console&&(je=function(){return console.warn.apply(console,_(Me.apply(0,arguments)))},It=function(){console.error.apply(console,_(Me.apply(0,arguments)))});function zt(){this.g={}}S=zt.prototype,S.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},S.get=function(e){return(e=this.g[e])?e.slice():null},S.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},S.forEach=function(e){for(var t in this.g)e(t,this.g[t])},S.size=function(){return Object.keys(this.g).length},S.keys=function(){return Object.keys(this.g)};function Ct(){this.g=new zt}S=Ct.prototype,S.release=function(){this.Ra(),this.g=null},S.D=function(e,t,n,r){this.g&&(e=new Wt(e,t,n,r),this.g.push(t,e))},S.ha=function(e,t,n,r){function s(c){l.jb(e,t,s),n(c)}var l=this;this.D(e,t,s,r)},S.jb=function(e,t,n){if(this.g){var r=this.g.get(t)||[];r=b(r);for(var s=r.next();!s.done;s=r.next())s=s.value,s.target!=e||n!=s.listener&&n||(s.jb(),this.g.remove(t,s))}},S.Ra=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,_(e.g[n]));for(e=b(t),t=e.next();!t.done;t=e.next())t.value.jb();this.g.g={}}},we("shaka.util.EventManager",Ct),Ct.prototype.removeAll=Ct.prototype.Ra,Ct.prototype.unlisten=Ct.prototype.jb,Ct.prototype.listenOnce=Ct.prototype.ha,Ct.prototype.listen=Ct.prototype.D,Ct.prototype.release=Ct.prototype.release;function Wt(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=Tt(e,r),this.target.addEventListener(t,n,this.g)}Wt.prototype.jb=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function Tt(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(r){return!n.has(r)}),Pt(e)?t:t.capture||!1}function Pt(e){var t=un;if(t==null){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch{t=!1}un=t}return t||!1}var un=void 0;function ct(e){if(an.has(e))return an.get(e);if(h.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return an.set(e,t),t}return h.MediaSource?(t=MediaSource.isTypeSupported(e),an.set(e,t),t):!1}function Pn(){return!!h.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var an=new Map;function Bn(e,t){this.g=e,this.h=t}Bn.prototype.toString=function(){return"v"+this.g+"."+this.h};function Ot(e,t){var n=new Bn(5,0),r=mi,s=r.g,l=n.h-s.h;(0<(n.g-s.g||l)?r.i:r.h)(r.g,n,e,t)}function mn(e,t,n,r){je([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function bn(e,t,n,r){It([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}var mi=null;function jn(){}jn.prototype.extract=function(){},jn.prototype.decode=function(){return[]},jn.prototype.clear=function(){},jn.prototype.getStreams=function(){return[]};function Yn(){}Yn.prototype.init=function(){},Yn.prototype.parse=function(){return[]};function Fn(){}function Rn(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Ve(e)==Ve(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Ae(e);t=Ae(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function Ve(e){return e instanceof ArrayBuffer?e:e.buffer}function ie(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Ae(e,t,n){return n=n===void 0?1/0:n,nt(e,t===void 0?0:t,n,Uint8Array)}function qe(e,t,n){return n=n===void 0?1/0:n,nt(e,t===void 0?0:t,n,Uint16Array)}function wt(e,t,n){return n=n===void 0?1/0:n,nt(e,t===void 0?0:t,n,DataView)}function nt(e,t,n,r){var s=Ve(e),l=1;"BYTES_PER_ELEMENT"in r&&(l=r.BYTES_PER_ELEMENT);var c=((e.byteOffset||0)+e.byteLength)/l;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/l,c))),new r(s,e,Math.floor(Math.min(e+Math.max(n,0),c))-e)}we("shaka.util.BufferUtils",Fn),Fn.toDataView=wt,Fn.toUint16=qe,Fn.toUint8=Ae,Fn.toArrayBuffer=ie,Fn.equal=Rn;function ht(){}ht.prototype.init=function(){},ht.prototype.i=function(){},ht.prototype.g=function(){},ht.prototype.j=function(){},we("shaka.media.IClosedCaptionParser",ht);function _e(e){this.l=new Yn,(e=Le[e.toLowerCase()])&&(this.l=e()),this.h=new jn,(e=bt)&&(this.h=e())}_e.prototype.init=function(e,t){t!==void 0&&t||this.g(),this.l.init(e)},_e.prototype.i=function(e){e=this.l.parse(e),e=b(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=Ae(t.packet);0<n.length&&this.h.extract(n,t.pts)}return this.h.decode()},_e.prototype.g=function(){this.h.clear()},_e.prototype.j=function(){return this.h.getStreams()},we("shaka.media.ClosedCaptionParser",_e),_e.findDecoder=function(){return bt},_e.unregisterDecoder=function(){bt=null},_e.registerDecoder=function(e){bt=e},_e.findParser=function(e){return Le[e]},_e.unregisterParser=function(e){delete Le[e]},_e.registerParser=function(e,t){Le[e]=t};var Le={},bt=null;function ve(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=fe,this.scroll=Ge}we("shaka.text.CueRegion",ve);var fe=1;ve.units={PX:0,PERCENTAGE:fe,LINES:2};var Ge="";ve.scrollMode={NONE:Ge,UP:"up"};function Et(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function jt(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function Vt(e,t,n){if(n||(n=Et),e.length!=t.length)return!1;t=t.slice(),e=b(e);for(var r=e.next(),s={};!r.done;s={Gg:void 0},r=e.next()){if(s.Gg=r.value,r=t.findIndex(function(l){return function(c){return n(l.Gg,c)}}(s)),r==-1)return!1;t[r]=t[t.length-1],t.pop()}return t.length==0}function ln(e,t,n){if(n||(n=Et),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Be(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new ve,this.position=null,this.positionAlign=wn,this.size=0,this.textAlign=gn,this.direction=fi,this.writingMode=rt,this.lineInterpretation=Pe,this.line=null,this.lineHeight="",this.lineAlign=oi,this.displayAlign=Jn,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Uo,this.fontStyle=Ao,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={dc:32,rows:15}}function Ke(e,t){return e=new Be(e,t,""),e.lineBreak=!0,e}Be.prototype.clone=function(){var e=new Be(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function On(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!ln(e.nestedCues,t.nestedCues,On))return!1}else if(n=="region"||n=="cellResolution"){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!ln(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}we("shaka.text.Cue",Be),Be.equal=On,Be.prototype.clone=Be.prototype.clone;var wn="auto";Be.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:wn};var gn="center",$n={LEFT:"left",RIGHT:"right",CENTER:gn,START:"start",END:"end"};Be.textAlign=$n;var Jn="after",kt={BEFORE:"before",CENTER:"center",AFTER:Jn};Be.displayAlign=kt;var fi="ltr";Be.direction={HORIZONTAL_LEFT_TO_RIGHT:fi,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var rt="horizontal-tb";Be.writingMode={HORIZONTAL_TOP_TO_BOTTOM:rt,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Pe=0;Be.lineInterpretation={LINE_NUMBER:Pe,PERCENTAGE:1};var oi="start",Mi={CENTER:"center",START:oi,END:"end"};Be.lineAlign=Mi;var Tr={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Be.defaultTextColor=Tr;var Vi={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Be.defaultTextBackgroundColor=Vi;var Uo=400;Be.fontWeight={NORMAL:Uo,BOLD:700};var Ao="normal",ks={NORMAL:Ao,ITALIC:"italic",OBLIQUE:"oblique"};Be.fontStyle=ks,Be.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function go(){}go.prototype.destroy=function(){};function Nt(e,t,n){io[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,ie:t}}function At(e,t){for(var n=e.toLowerCase().split(";")[0],r=b([Xr,Er,br,Hi]),s=r.next();!s.done;s=r.next())if(s=io[n+"-"+s.value]){var l=s.ie(),c=l.isSupported(e,t);if(l.destroy(),c)return s.ie}return null}we("shaka.transmuxer.TransmuxerEngine",go),go.findTransmuxer=At,go.unregisterTransmuxer=function(e,t){delete io[e.toLowerCase().split(";")[0]+"-"+t]},go.registerTransmuxer=Nt,go.prototype.destroy=go.prototype.destroy;var io={},Hi=1,br=2,Er=3,Xr=4;go.PluginPriority={FALLBACK:Hi,PREFERRED_SECONDARY:br,PREFERRED:Er,APPLICATION:Xr};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var As=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Ln(e){var t;e instanceof Ln?(ql(this,e.Bb),this.uc=e.uc,Kl(this,e.Eb),dd(this,e.Mc),this.Pa=e.Pa,su(this,e.g.clone()),this.ec=e.ec):e&&(t=String(e).match(As))?(ql(this,t[1]||"",!0),this.uc=au(t[2]||""),Kl(this,t[3]||"",!0),dd(this,t[4]),this.Pa=au(t[5]||"",!0),su(this,t[6]||"",!0),this.ec=au(t[7]||"")):this.g=new lu(null)}S=Ln.prototype,S.Bb="",S.uc="",S.Eb="",S.Mc=null,S.Pa="",S.ec="",S.toString=function(){var e=[],t=this.Bb;if(t&&e.push(uu(t,bg,!0),":"),t=this.Eb){e.push("//");var n=this.uc;n&&e.push(uu(n,bg,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Mc,t!=null&&e.push(":",String(t))}return(t=this.Pa)&&(this.Eb&&t.charAt(0)!="/"&&e.push("/"),e.push(uu(t,t.charAt(0)=="/"?eb:JT,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.ec)&&e.push("#",uu(t,nb)),e.join("")},S.resolve=function(e){var t=this.clone();t.Bb==="data"&&(t=new Ln);var n=!!e.Bb;n?ql(t,e.Bb):n=!!e.uc,n?t.uc=e.uc:n=!!e.Eb,n?Kl(t,e.Eb):n=e.Mc!=null;var r=e.Pa;if(n)dd(t,e.Mc);else if(n=!!e.Pa){if(r.charAt(0)!="/")if(this.Eb&&!this.Pa)r="/"+r;else{var s=t.Pa.lastIndexOf("/");s!=-1&&(r=t.Pa.substr(0,s+1)+r)}if(r==".."||r==".")r="";else if(r.indexOf("./")!=-1||r.indexOf("/.")!=-1){s=r.lastIndexOf("/",0)==0,r=r.split("/");for(var l=[],c=0;c<r.length;){var d=r[c++];d=="."?s&&c==r.length&&l.push(""):d==".."?((1<l.length||l.length==1&&l[0]!="")&&l.pop(),s&&c==r.length&&l.push("")):(l.push(d),s=!0)}r=l.join("/")}}return n?t.Pa=r:n=e.g.toString()!=="",n?su(t,e.g.clone()):n=!!e.ec,n&&(t.ec=e.ec),t},S.clone=function(){return new Ln(this)};function ql(e,t,n){e.Bb=n?au(t,!0):t,e.Bb&&(e.Bb=e.Bb.replace(/:$/,""))}function Kl(e,t,n){e.Eb=n?au(t,!0):t}function dd(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Mc=t}else e.Mc=null}function su(e,t,n){t instanceof lu?e.g=t:(n||(t=uu(t,tb)),e.g=new lu(t))}function au(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function uu(e,t,n){return e!=null?(e=encodeURI(e).replace(t,ZT),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ZT(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var bg=/[#\/\?@]/g,JT=/[#\?:]/g,eb=/[#\?]/g,tb=/[#\?@]/g,nb=/#/g;function lu(e){this.g=e||null}function Yl(e){if(!e.Ka&&(e.Ka={},e.Xc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var l=t[n].substring(0,r);s=t[n].substring(r+1)}else l=t[n];l=decodeURIComponent(l.replace(/\+/g," ")),s=s||"",e.add(l,decodeURIComponent(s.replace(/\+/g," ")))}}S=lu.prototype,S.Ka=null,S.Xc=null;function Eg(e){return Yl(e),e.Xc}S.add=function(e,t){Yl(this),this.g=null;var n=this.Ka.hasOwnProperty(e)?this.Ka[e]:null;return n||(this.Ka[e]=n=[]),n.push(t),this.Xc++,this},S.set=function(e,t){return Yl(this),this.g=null,this.Ka.hasOwnProperty(e)?this.Ka[e]=[t]:this.add(e,t),this},S.get=function(e){return Yl(this),this.Ka[e]||[]},S.toString=function(){if(this.g)return this.g;if(!this.Ka)return"";var e=[],t;for(t in this.Ka)for(var n=encodeURIComponent(t),r=this.Ka[t],s=0;s<r.length;s++){var l=n;r[s]!==""&&(l+="="+encodeURIComponent(r[s])),e.push(l)}return this.g=e.join("&")},S.clone=function(){var e=new lu;if(e.g=this.g,this.Ka){var t={},n;for(n in this.Ka)t[n]=this.Ka[n].concat();e.Ka=t,e.Xc=this.Xc}return e};function re(e,t,n){var r=Me.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(s){this.stack=s.stack}}re.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},we("shaka.util.Error",re),re.Severity={RECOVERABLE:1,CRITICAL:2},re.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},re.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function Is(e){this.h=e,this.g=void 0}Is.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function kg(e,t){return e.length&&t.length&&e!==t?0<pd(e,t).length:!0}function pd(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=b(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var s=b(t),l=s.next();!l.done;l=s.next())if(l=l.value,r.keySystem==l.keySystem){s=new Map;for(var c=b((r.initData||[]).concat(l.initData||[])),d=c.next();!d.done;d=c.next())d=d.value,s.set(d.keyId,d);s=Array.from(s.values()),c=r.keyIds&&l.keyIds?new Set([].concat(_(r.keyIds),_(l.keyIds))):r.keyIds||l.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||l.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||l.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||l.persistentStateRequired,videoRobustness:r.videoRobustness||l.videoRobustness,audioRobustness:r.audioRobustness||l.audioRobustness,serverCertificate:r.serverCertificate||l.serverCertificate,serverCertificateUri:r.serverCertificateUri||l.serverCertificateUri,initData:s,keyIds:c});break}}return n}function md(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}var Ql=new Is(function(){return ie(new Uint8Array([0]))}),Zl=new Map;function fu(e){this.h=e,this.g=null}fu.prototype.Y=function(e){var t=this;this.stop();var n=!0,r=null;return this.g=function(){h.clearTimeout(r),n=!1},r=h.setTimeout(function(){n&&t.h()},1e3*e),this},fu.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function Mt(e){this.h=e,this.g=null}Mt.prototype.tc=function(){return this.stop(),this.h(),this},Mt.prototype.Y=function(e){var t=this;return this.stop(),this.g=new fu(function(){t.h()}).Y(e),this},Mt.prototype.Sa=function(e){var t=this;return this.stop(),this.g=new fu(function(){t.g.Y(e),t.h()}).Y(e),this},Mt.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},we("shaka.util.Timer",Mt),Mt.prototype.stop=Mt.prototype.stop,Mt.prototype.tickEvery=Mt.prototype.Sa,Mt.prototype.tickAfter=Mt.prototype.Y,Mt.prototype.tickNow=Mt.prototype.tc;function Io(){var e=h.ManagedMediaSource||h.MediaSource;return!!(e&&e.isTypeSupported)}function cu(e){return Ig().canPlayType(e)!=""}function hu(){return!!navigator.userAgent.match(/Edge?\//)}function Bo(){return Qt("Xbox One")}function jo(){return Qt("Tizen")}function du(){return Qt("Tizen 3")}function Jl(){return Qt("Tizen 2")}function Fo(){return Qt("Web0S")}function ef(){return Fo()&&gd()===38}function Gi(){return Qt("CrKey")}function gd(){if(!Qt("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function Ms(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!jo()&&!Qt("PC=EOS")&&!Qt("PC=APL")&&!Qt("VirginMedia")&&!yd()&&!$o()&&!Qt("AFT")&&!Qt("WPE")&&!Qt("DT_STB_BCM")}function tf(){return Qt("PlayStation 5")}function $o(){return Qt("PlayStation 4")}function nf(){return Qt("Hisense")||Qt("VIDAA")}function yd(){return Qt("SOPOpenBrowser")}function _s(){if(!Ms())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function vd(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("windows"):!1}function of(){return Qt("Android")}function Ag(){return!!(jo()||Fo()||Bo()||$o()||tf()||Qt("AFT")||Qt("PC=EOS")||Qt("PC=APL")||Qt("VirginMedia")||yd()||Qt("WPE")||Gi()||nf()||Qt("DT_STB_BCM"))}function Qt(e){return(navigator.userAgent||"").includes(e)}function Ig(){return Rs||(xd||(xd=new Mt(function(){Rs=null})),(Rs=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Rs=document.createElement("video")),xd.Y(1),Rs)}function rf(e){return e?e===h.shakaMediaKeysPolyfill:!!h.shakaMediaKeysPolyfill}function Mg(){var e,t,n,r,s,l,c,d,p,w,T,E,I,A,R;return z(function(D){switch(D.g){case 1:if(e={width:1/0,height:1/0},Gi()){if(E=h.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,Q(D,15),!(I=E)){D.u(17);break}return k(D,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),18)}if(jo()){e.width=1920,e.height=1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(t=webapis.systeminfo.getMaxVideoResolution(),e.width=t.width,e.height=t.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{je("Tizen: Error detecting screen size, default screen size 1920x1080.")}D.u(3);break}if(Bo()){e.width=1920,e.height=1080;try{n=void 0,n=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows,r=new n.Media.Protection.ProtectionCapabilities,s=n.Media.Protection.ProtectionCapabilityResult,l=null;do l=r.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(l===s.maybe);l===s.probably&&(e.width=3840,e.height=2160)}catch{je("Xbox: Error detecting screen size, default screen size 1920x1080.")}D.u(3);break}if(Fo()){try{c=JSON.parse(h.PalmSystem.deviceInfo),e.width=Math.max(1920,c.screenWidth),e.height=Math.max(1080,c.screenHeight)}catch{je("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}D.u(3);break}if(nf()){h.Hisense_Get4KSupportState&&h.Hisense_Get4KSupportState()?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),D.u(3);break}if(!$o()&&!tf()){D.u(3);break}return d=!1,Q(D,9),k(D,h.msdk.device.getDisplayInfo(),11);case 11:p=D.h,d=p.resolution==="4K",J(D,10);break;case 9:return te(D),Q(D,12),k(D,h.msdk.device.getDisplayInfoImmediate(),14);case 14:w=D.h,d=w.resolution==="4K",J(D,10);break;case 12:T=te(D),je("PlayStation: Failed to get the display info:",T);case 10:d?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),D.u(3);break;case 18:I=D.h;case 17:if(I){e.width=3840,e.height=2160,D.u(19);break}if(!(A=E)){D.u(20);break}return k(D,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),21);case 21:A=D.h;case 20:A&&(e.width=1920,e.height=1080);case 19:J(D,3);break;case 15:R=te(D),It("Failed to check canDisplayType:",R);case 3:return D.return(e)}})}var xd=null,Rs=null;function qr(){}function fn(e){if(!e)return"";if(e=Ae(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),h.TextDecoder&&!$o())return e=new TextDecoder().decode(e),e.includes("�")&&It('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var r=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(r=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(r=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(r=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):r=e[n],65535>=r)t+=String.fromCharCode(r);else{r-=65536;var s=r&1023;t+=String.fromCharCode(55296+(r>>10)),t+=String.fromCharCode(56320+s)}}return t}function qo(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new re(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=wt(e);for(var s=0;s<n;s++)r[s]=e.getUint16(2*s,t);return Sd(r)}function Ko(e){function t(r){return n.byteLength<=r||32<=n[r]&&126>=n[r]}if(!e)return"";var n=Ae(e);if(n[0]==239&&n[1]==187&&n[2]==191)return fn(n);if(n[0]==254&&n[1]==255)return qo(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return qo(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return qo(e,!1);if(n[1]==0&&n[3]==0)return qo(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return fn(e);throw new re(2,2,2003)}function Mo(e){if(h.TextEncoder&&!$o()){var t=new TextEncoder;return ie(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return ie(t)}function wd(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),s=0;s<e.length;++s)r.setUint16(2*s,e.charCodeAt(s),t);return n}function Sd(e){return _g.value()(e)}function Ti(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(s){return s[1]=="#"?(s=s[2]=="x"||s[2]=="X"?parseInt(s.substring(3),16):parseInt(s.substring(2),10),0<=s&&1114111>=s?String.fromCodePoint(s):""):t[s]||"'"}):e||""}we("shaka.util.StringUtils",qr),qr.resetFromCharCode=function(){_g.g=void 0},qr.toUTF16=wd,qr.toUTF8=Mo,qr.fromBytesAutoDetect=Ko,qr.fromUTF16=qo,qr.fromUTF8=fn;var _g=new Is(function(){function e(n){try{var r=new Uint8Array(n);return 0<String.fromCharCode.apply(null,r).length}catch{return!1}}for(var t={ac:65536};0<t.ac;t={ac:t.ac},t.ac/=2)if(e(t.ac))return function(n){return function(r){for(var s="",l=0;l<r.length;l+=n.ac)s+=String.fromCharCode.apply(null,r.subarray(l,l+n.ac));return s}}(t);return null});function gi(){}function Rg(e){return e=Sd(Ae(e)),btoa(e)}function Kr(e,t){return t=t??!0,e=Rg(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function oo(e){e=h.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function Yr(e){for(var t=e.length/2,n=new Uint8Array(t),r=0;r<t;r++)n[r]=h.parseInt(e.substr(2*r,2),16);return n}function Yo(e){var t=Ae(e);e="",t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function An(){for(var e=Me.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var s=e[r];s instanceof Uint8Array?t.set(s,n):t.set(Ae(s),n),n+=s.byteLength}return t}we("shaka.util.Uint8ArrayUtils",gi),gi.concat=An,gi.toHex=Yo,gi.fromHex=Yr,gi.fromBase64=oo,gi.toBase64=Kr,gi.toStandardBase64=Rg;function ri(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new Ln(e[0]);return t=new Ln(t[0]),[n.resolve(t).toString()]}t=t.map(function(c){return new Ln(c)}),n=[],e=b(e);for(var r=e.next();!r.done;r=e.next()){r=new Ln(r.value);for(var s=b(t),l=s.next();!l.done;l=s.next())n.push(r.resolve(l.value).toString())}return n}function Qr(e,t,n,r){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},r&&(e.keySystemUris=new Set([r])),e}function Lg(e,t){t=t===void 0?"cenc":t;var n=[],r=[],s=[];e.forEach(function(c,d){var p=d;p.length!=22&&(p=Kr(Yr(d),!1));var w=c;w.length!=22&&(w=Kr(Yr(c),!1)),c={kty:"oct",kid:p,k:w},n.push(c),r.push(c.kid),s.push(d)}),e=JSON.stringify({keys:n});var l=JSON.stringify({kids:r});return l=[{initData:Ae(Mo(l)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+h.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:l,keyIds:new Set(s)}}function Ls(e,t){if(t.length==1)return t[0];if(e=_i(e,t),e!=null)return e;throw new re(2,4,4025,t)}function _i(e,t){for(var n=b(Dg[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var s=b(t),l=s.next();!l.done;l=s.next())if(l=l.value,r.test(l.trim()))return l.trim()}return e==Ut?"":null}function Cd(e,t){var n=[];e=b(Dg[e]);for(var r=e.next();!r.done;r=e.next()){r=r.value;for(var s=b(t),l=s.next();!l.done;l=s.next())l=l.value,r.test(l.trim())&&n.push(l.trim())}return n}var Ut="text",zn={ga:"video",X:"audio",ua:Ut,De:"image",gj:"application"},ib=1/15,Dg={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Td(){}function Vn(e,t){var n=e;return t&&!kr.includes(e)&&(n+='; codecs="'+t+'"'),n}function Zr(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Ds(e,t,n){var r=Vn(e,t);return t=Zr(e,t),At(t)?(e=At(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?r.replace("video","audio"):r,n}function ob(e,t,n){var r=[t];return rb.forEach(function(s,l){var c=e[l];l=="codecs"?kr.includes(e.mimeType)||r.push('codecs="'+n+'"'):c&&r.push(s+'="'+c+'"')}),e.hdr=="PQ"&&r.push('eotf="smpte2084"'),r.join(";")}function sf(e){return e.split(";")[0].split("/")[1]}function bi(e){var t=Og(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function Ps(e){var t=[];e=b(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Og(n.value),t.push(n[0]);return t.sort().join(",")}function yo(e){return e.split(";")[0]}function Wi(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Pg(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function Og(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}we("shaka.util.MimeUtils",Td),Td.getFullTypeWithAllCodecs=Zr,Td.getFullType=Vn;var rb=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),kr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Qo(e){this.i=null,this.j=e,this.B=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function pu(e){return Hn[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!bt:!1}Qo.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function sb(e,t,n,r,s){var l,c,d,p,w,T,E;return z(function(I){if(I.g==1)return k(I,Promise.resolve(),2);if(!e.i||!e.j)return I.return();if(n==null||r==null)return e.i.parseInit(Ae(t)),I.return();for(l=e.B?n:e.s,c={periodStart:e.s,segmentStart:n,segmentEnd:r,vttOffset:l},d=e.i.parseMedia(Ae(t),c,s),p=b(d),w=p.next();!w.done;w=p.next())T=w.value,e.A(T,s||null,c);E=d.filter(function(A){return A.startTime>=e.l&&A.startTime<e.m}),e.j.append(E),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(r,e.m),V(I)})}Qo.prototype.remove=function(e,t){var n=this;return z(function(r){if(r.g==1)return k(r,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),V(r)})};function ab(e,t,n){e.l=t,e.m=n}function Ng(e,t,n){if(e.C=t,t=e.o.get(t))for(var r=b(t.keys()),s=r.next();!s.done;s=r.next())(s=t.get(s.value).filter(function(l){return l.endTime<=n}))&&e.j.append(s)}function Ug(e,t,n){t.startTime+=n,t.endTime+=n,t=b(t.nestedCues);for(var r=t.next();!r.done;r=t.next())Ug(e,r.value,n)}function ub(e,t,n,r,s){var l=n+" "+r,c=new Map;t=b(t);for(var d=t.next();!d.done;d=t.next()){var p=d.value;d=p.stream,p=p.cue,c.has(d)||c.set(d,new Map),c.get(d).has(l)||c.get(d).set(l,[]),Ug(e,p,s),p.startTime>=e.l&&p.startTime<e.m&&(c.get(d).get(l).push(p),d==e.C&&e.j.append([p]))}for(s=b(c.keys()),l=s.next();!l.done;l=s.next())for(l=l.value,e.o.has(l)||e.o.set(l,new Map),t=b(c.get(l).keys()),d=t.next();!d.done;d=t.next())d=d.value,p=c.get(l).get(d),e.o.get(l).set(d,p);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(r,e.m))}we("shaka.text.TextEngine",Qo),Qo.prototype.destroy=Qo.prototype.destroy,Qo.findParser=function(e){return Hn[e]},Qo.unregisterParser=function(e){delete Hn[e]},Qo.registerParser=function(e,t){Hn[e]=t};var Hn={};function lb(e,t){return e.concat(t)}function Bg(){}function Jr(e){return e!=null}function vo(){}function Os(e,t){return e=Kt(e),t=Kt(t),e.split("-")[0]==t.split("-")[0]}function mu(e,t){return e=Kt(e),t=Kt(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function bd(e,t){return e=Kt(e),t=Kt(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Kt(e){e=b(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=b(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=jg.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function es(e,t){return e=Kt(e),t=Kt(t),t==e?4:mu(t,e)?3:bd(t,e)?2:mu(e,t)?1:0}function Ed(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=jg.get(e)||e}function kd(e){return e.language?Kt(e.language):e.audio&&e.audio.language?Kt(e.audio.language):e.video&&e.video.language?Kt(e.video.language):"und"}function af(e,t){e=Kt(e);var n=new Set;t=b(t);for(var r=t.next();!r.done;r=t.next())n.add(Kt(r.value));for(t=b(n),r=t.next();!r.done;r=t.next())if(r=r.value,r==e)return r;for(t=b(n),r=t.next();!r.done;r=t.next())if(r=r.value,mu(r,e))return r;for(t=b(n),r=t.next();!r.done;r=t.next())if(r=r.value,bd(r,e))return r;for(n=b(n),t=n.next();!t.done;t=n.next())if(t=t.value,mu(e,t))return t;return null}we("shaka.util.LanguageUtils",vo),vo.findClosestLocale=af,vo.getLocaleForVariant=kd,vo.getLocaleForText=function(e){return Kt(e.language||"und")},vo.getBase=Ed,vo.relatedness=es,vo.areSiblings=function(e,t){var n=Ed(e),r=Ed(t);return e!=n&&t!=r&&n==r},vo.normalize=Kt,vo.isSiblingOf=bd,vo.isParentOf=mu,vo.areLanguageCompatible=Os,vo.areLocaleCompatible=function(e,t){return e=Kt(e),t=Kt(t),e==t};var jg=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function zo(e){function t(r){switch(typeof r){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return r;default:if(!r||r.buffer instanceof ArrayBuffer)return r;if(n.has(r))return null;var s=r.constructor==Array;if(r.constructor!=Object&&!s)return null;n.add(r);var l=s?[]:{},c;for(c in r)l[c]=t(r[c]);return s&&(l.length=r.length),l}}var n=new WeakSet;return t(e)}function Ad(e){var t={},n;for(n in e)t[n]=e[n];return t}function Fg(){}function $g(e,t,n,r){var s=e.variants;if((t.length||n.length)&&(s=fb(s,t,n)),r.length){for(t=new zt,s=b(s),n=s.next();!n.done;n=s.next())n=n.value,t.push(String(n.video.width||0),n);var l=[];t.forEach(function(R,D){R=0;var L=[];D=b(D);for(var F=D.next(),U={};!F.done;U={Ae:void 0},F=D.next())U.Ae=F.value,F=r.filter(function(q){return function(N){return q.Ae.decodingInfos[0][N]}}(U)).length,F>R?(R=F,L=[U.Ae]):F==R&&L.push(U.Ae);l.push.apply(l,_(L))}),s=l}n=new Set,t=new Set,s=b(s);for(var c=s.next();!c.done;c=s.next())c=c.value,c.audio&&n.add(c.audio),c.video&&t.add(c.video);n=Array.from(n).sort(function(R,D){return R.bandwidth-D.bandwidth});var d=[];for(s=new Map,n=b(n),c=n.next();!c.done;c=n.next()){c=c.value;var p=c.language+(c.channelsCount||0)+(c.audioSamplingRate||0)+c.roles.join(",")+c.label+c.groupId+c.fastSwitching,w=s.get(p)||[];if(w.length){var T=w[w.length-1],E=bi(T.codecs),I=bi(c.codecs);E!=I||c.bandwidth&&T.bandwidth&&!(c.bandwidth>T.bandwidth)||(w.push(c),d.push(c.id))}else w.push(c),d.push(c.id);s.set(p,w)}n=Array.from(t).sort(function(R,D){return R.bandwidth&&D.bandwidth?R.bandwidth-D.bandwidth:R.width-D.width}),t=Pn();var A=[];for(s=new Map,n=b(n),c=n.next();!c.done;c=n.next()){if(c=c.value,p=Math.round(c.frameRate||0)+(c.hdr||"")+c.fastSwitching,w=s.get(p)||[],w.length){if(T=w[w.length-1],!t&&(E=bi(T.codecs),I=bi(c.codecs),E!==I))continue;c.width>T.width||c.height>T.height?(w.push(c),A.push(c.id)):c.width==T.width&&c.height==T.height&&(E=bi(T.codecs),I=bi(c.codecs),E!=I||c.bandwidth&&T.bandwidth&&!(c.bandwidth>T.bandwidth)||(w.push(c),A.push(c.id)))}else w.push(c),A.push(c.id);s.set(p,w)}e.variants=e.variants.filter(function(R){var D=R.audio;return R=R.video,!(D&&!d.includes(D.id)||R&&!A.includes(R.id))})}function fb(e,t,n){t=b(t);for(var r=t.next(),s={};!r.done;s={oh:void 0},r=t.next())if(s.oh=r.value,r=e.filter(function(l){return function(c){return c.video&&c.video.codecs.startsWith(l.oh)}}(s)),r.length){e=r;break}for(n=b(n),t=n.next(),r={};!t.done;r={ig:void 0},t=n.next())if(r.ig=t.value,t=e.filter(function(l){return function(c){return c.audio&&c.audio.codecs.startsWith(l.ig)}}(r)),t.length){e=t;break}return e}function cb(e,t,n){e.variants=e.variants.filter(function(r){return uf(r,t,n)})}function uf(e,t,n){function r(d,p,w){return d>=p&&d<=w}var s=e.video;if(s&&s.width&&s.height){var l=s.width,c=s.height;if(c>l&&(c=b([c,l]),l=c.next().value,c=c.next().value),!r(l,t.minWidth,Math.min(t.maxWidth,n.width))||!r(c,t.minHeight,Math.min(t.maxHeight,n.height))||!r(s.width*s.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function zg(e,t,n){var r=!1;e=b(e);for(var s=e.next();!s.done;s=e.next()){s=s.value;var l=s.allowedByApplication;s.allowedByApplication=uf(s,t,n),l!=s.allowedByApplication&&(r=!0)}return r}function hb(e,t,n){return n=n===void 0?[]:n,z(function(r){return r.g==1?k(r,Vg(e,t,0<t.offlineSessionIds.length,n),2):(gb(t),k(r,yb(t),0))})}function Vg(e,t,n,r){var s,l;return z(function(c){if(c.g==1)return Bo()&&db(t.variants),k(c,Wg(t.variants,n,!1,r),2);s=null,e&&(l=e.g)&&(s=l.keySystem),t.variants=t.variants.filter(function(d){var p=pb(d,s);if(!p){var w=[];d.audio&&w.push(Qg(d.audio)),d.video&&w.push(Qg(d.video))}return p}),V(c)})}function db(e){var t={dvav:"avc3",dva1:"avc1",dvhe:"hev1",dvh1:"hvc1",dvc1:"vvc1",dvi1:"vvi1"},n=new Set;e=b(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&n.add(r.video);for(n=b(n),e=n.next();!e.done;e=n.next()){e=e.value,r=b(Object.keys(t));for(var s=r.next();!s.done;s=r.next())if(s=s.value,e.codecs.includes(s)){e.codecs=e.codecs.replace(s,t[s]);break}}}function pb(e,t){var n=Bo(),r=Qt("Firefox")&&of(),s=e.video,l=s&&s.width||0,c=s&&s.height||0;if(n&&s&&(1920<l||1080<c)&&(s.codecs.includes("avc1.")||s.codecs.includes("avc3.")))return!1;if(s){if(n=gu(s.codecs),s.codecs.includes(",")){if(l=s.codecs.split(","),n=Ls("video",l),n=gu(n),l=Ls("audio",l),l=Ns(l,s.mimeType),c=Ds(s.mimeType,l,"audio"),!ct(c))return!1;n=[n,l].join()}if(l=Ds(s.mimeType,n,"video"),!ct(l))return!1;s.codecs=n}if(s=e.audio,r&&s&&s.encrypted&&s.codecs.toLowerCase().includes("opus"))return!1;if(s){if(r=Ns(s.codecs,s.mimeType),n=Ds(s.mimeType,r,"audio"),!ct(n))return!1;s.codecs=r}return e.decodingInfos.some(function(d){return!(!d.supported||t&&(d=d.keySystemAccess)&&d.keySystem!=t)})}function Hg(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=b(t);for(var r=t.next();!r.done;r=t.next()){var s=r.value;r=JSON.stringify(s),s=e[s],s instanceof Object?(s=Hg(s),n.push(r+":"+s)):(s=JSON.stringify(s),n.push(r+":"+s))}return"{"+n.join(",")+"}"}function Gg(e,t){var n,r,s,l,c,d,p;return z(function(w){if(w.g==1){for(n=function(T,E){if(T){var I=Ad(T);return I.supported=T.supported&&E.supported,I.powerEfficient=T.powerEfficient&&E.powerEfficient,I.smooth=T.smooth&&E.smooth,E.keySystemAccess&&!I.keySystemAccess&&(I.keySystemAccess=E.keySystemAccess),I}return E},r=null,s=[],l=b(t),c=l.next(),d={};!c.done;d={cache:void 0,Dd:void 0},c=l.next())p=c.value,d.Dd=Hg(p),d.cache=Zg,d.cache[d.Dd]?r=n(r,d.cache[d.Dd]):s.push(mb(p).then(function(T){return function(E){var I=null;E=b(E||[]);for(var A=E.next();!A.done;A=E.next())I=n(I,A.value);I&&(T.cache[T.Dd]=I,r=n(r,I))}}(d)));return k(w,Promise.all(s),2)}r&&e.decodingInfos.push(r),V(w)})}function mb(e){var t=[""];e.video&&(t=Wi(e.video.contentType).split(","));var n=[""];e.audio&&(n=Wi(e.audio.contentType).split(","));var r=[];t=b(t);for(var s=t.next();!s.done;s=t.next()){s=s.value;for(var l=b(n),c=l.next(),d={};!c.done;d={xc:void 0},c=l.next())c=c.value,d.xc=zo(e),e.video&&(d.xc.video.contentType=Vn(yo(d.xc.video.contentType),s)),e.audio&&(d.xc.audio.contentType=Vn(yo(d.xc.audio.contentType),c)),r.push(new Promise(function(p){return function(w,T){navigator.mediaCapabilities.decodingInfo(p.xc).then(function(E){w(E)}).catch(T)}}(d)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function Wg(e,t,n,r){var s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H;return z(function(Y){switch(Y.g){case 1:if(e.some(function(oe){return oe.decodingInfos.length}))return Y.return();s=b(r),l=s.next(),c={};case 2:if(l.done){Y.u(4);break}c.Qg=l.value,d=!1,p=b(e),w=p.next();case 5:if(w.done){Y.u(7);break}T=w.value,E=Xg(T,t,n).filter(function(oe){return function(ae){return ae=ae[0],(ae.keySystemConfiguration&&ae.keySystemConfiguration.keySystem)===oe.Qg}}(c)),I=b(E),A=I.next();case 8:if(A.done){Y.u(10);break}return R=A.value,k(Y,Gg(T,R),9);case 9:A=I.next(),Y.u(8);break;case 10:T.decodingInfos.length&&(d=!0),w=p.next(),Y.u(5);break;case 7:if(d)return Y.return();c={Qg:void 0},l=s.next(),Y.u(2);break;case 4:D=b(e),L=D.next();case 12:if(L.done){Y.u(0);break}F=L.value,U=Xg(F,t,n).filter(function(oe){return oe=oe[0],oe=oe.keySystemConfiguration&&oe.keySystemConfiguration.keySystem,!oe||!r.includes(oe)}),q=b(U),N=q.next();case 15:if(N.done){L=D.next(),Y.u(12);break}return H=N.value,k(Y,Gg(F,H),16);case 16:N=q.next(),Y.u(15)}})}function Xg(e,t,n){var r=e.audio,s=e.video,l=[],c=[];if(s)for(var d=b(s.fullMimeTypes),p=d.next();!p.done;p=d.next()){p=p.value;var w=Wi(p);if(w.includes(",")&&!r){var T=w.split(","),E=yo(p);w=Ls("video",T),T=Ls("audio",T),T=Ns(T,E),E=Ds(E,T,"audio"),c.push({contentType:E,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(w=gu(w),p={contentType:Ds(yo(p),w,"video"),width:s.width||64,height:s.height||64,bitrate:s.bandwidth||e.bandwidth||1,framerate:s.frameRate||1},s.hdr)switch(s.hdr){case"SDR":p.transferFunction="srgb";break;case"PQ":p.transferFunction="pq";break;case"HLG":p.transferFunction="hlg"}s.colorGamut&&(p.colorGamut=s.colorGamut),l.push(p)}if(r)for(d=b(r.fullMimeTypes),p=d.next();!p.done;p=d.next())w=p.value,p=yo(w),w=Ns(Wi(w),p),p=Ds(p,w,"audio"),c.push({contentType:p,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(d=[],l.length==0&&l.push(null),c.length==0&&c.push(null),l=b(l),p=l.next();!p.done;p=l.next())for(p=p.value,w=b(c),E=w.next();!E.done;E=w.next())E=E.value,T={type:n?"file":"media-source"},p&&(T.video=p),E&&(T.audio=E),d.push(T);if(c=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!c.length)return[d];for(e=[],n=new Map,c=b(c),l=c.next();!l.done;l=c.next())l=l.value,n.get(l.keySystem)||n.set(l.keySystem,[]),n.get(l.keySystem).push(l);for(c=t?"required":"optional",t=t?["persistent-license"]:["temporary"],l=b(n.keys()),p=l.next();!p.done;p=l.next()){for(p=p.value,w=[],E=b(d),T=E.next();!T.done;T=E.next()){T=Object.assign({},T.value);var I=n.get(p),A={keySystem:p,initDataType:"cenc",persistentState:c,distinctiveIdentifier:"optional",sessionTypes:t};I=b(I);for(var R=I.next();!R.done;R=I.next()){if(R=R.value,R.initData&&R.initData.length){for(var D=new Set,L=b(R.initData),F=L.next();!F.done;F=L.next())D.add(F.value.initDataType);A.initDataType=R.initData[0].initDataType}R.distinctiveIdentifierRequired&&(A.distinctiveIdentifier="required"),R.persistentStateRequired&&(A.persistentState="required"),R.sessionType&&(A.sessionTypes=[R.sessionType]),r&&(A.audio?(R.encryptionScheme&&(A.audio.encryptionScheme=A.audio.encryptionScheme||R.encryptionScheme),A.audio.robustness=A.audio.robustness||R.audioRobustness):(A.audio={robustness:R.audioRobustness},R.encryptionScheme&&(A.audio.encryptionScheme=R.encryptionScheme)),A.audio.robustness==""&&delete A.audio.robustness),s&&(A.video?(R.encryptionScheme&&(A.video.encryptionScheme=A.video.encryptionScheme||R.encryptionScheme),A.video.robustness=A.video.robustness||R.videoRobustness):(A.video={robustness:R.videoRobustness},R.encryptionScheme&&(A.video.encryptionScheme=R.encryptionScheme)),A.video.robustness==""&&delete A.video.robustness)}T.keySystemConfiguration=A,w.push(T)}e.push(w)}return e}function Ns(e,t){return e.toLowerCase()=="flac"?_s()?"fLaC":"flac":e.toLowerCase()==="opus"?_s()&&sf(t)=="mp4"?"Opus":"opus":e}function gu(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function gb(e){e.textStreams=e.textStreams.filter(function(t){return t=Vn(t.mimeType,t.codecs),pu(t)})}function yb(e){var t,n,r,s,l,c,d;return z(function(p){switch(p.g){case 1:t=[],n=b(e.imageStreams),r=n.next();case 2:if(r.done){p.u(4);break}if(s=r.value,l=s.mimeType,l=="application/mp4"&&s.codecs=="mjpg"&&(l="image/jpg"),cf.has(l)){p.u(5);break}if(c=wb.get(l),!c){cf.set(l,!1),p.u(5);break}return k(p,vb(c),7);case 7:d=p.h,cf.set(l,d);case 5:cf.get(l)&&t.push(s),r=n.next(),p.u(2);break;case 4:e.imageStreams=t,V(p)}})}function vb(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Us(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,s=n?n.mimeType:null,l=t?t.codecs:null,c=n?n.codecs:null,d=[];c&&d.push(c),l&&d.push(l);var p=[];n&&p.push(n.mimeType),t&&p.push(t.mimeType),p=p[0]||null;var w=[];t&&w.push(t.kind),n&&w.push(n.kind),w=w[0]||null;var T=new Set;if(t)for(var E=b(t.roles),I=E.next();!I.done;I=E.next())T.add(I.value);if(n)for(E=b(n.roles),I=E.next();!I.done;I=E.next())T.add(I.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:w,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:p,audioMimeType:r,videoMimeType:s,codecs:d.join(", "),audioCodec:l,videoCodec:c,primary:e.primary,roles:Array.from(T),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,c.includes(",")&&(e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage)),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function lf(e){return{id:e.id,active:!1,type:Ut,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Id(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=e.segmentIndex.get(0));var s=e.tilesLayout;return r&&(s=r.tilesLayout||s),s&&t!=null&&(t/=Number(s.split("x")[0])),s&&n!=null&&(n/=Number(s.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:s||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Md(e){return e.__shaka_id||(e.__shaka_id=xb++),e.__shaka_id}function qg(e){var t=Kg(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function _d(e){var t=Kg(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Kg(e){var t=e.language;return{id:Md(e),active:!1,type:"",bandwidth:0,language:Kt(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function yu(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function ff(e){return e.filter(function(t){return yu(t)})}function vu(e,t,n,r){var s=e,l=e.filter(function(p){return p.primary});l.length&&(s=l);var c=s.length?s[0].language:"";if(s=s.filter(function(p){return p.language==c}),t){var d=af(Kt(t),e.map(function(p){return p.language}));d&&(s=e.filter(function(p){return Kt(p.language)==d}))}if(s=s.filter(function(p){return p.forced==r}),n){if(e=Yg(s,n),e.length)return e}else if(e=s.filter(function(p){return p.roles.length==0}),e.length)return e;return e=s.map(function(p){return p.roles}).reduce(lb,[]),e.length?Yg(s,e[0]):s}function Yg(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Qg(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}we("shaka.util.StreamUtils",Fg),Fg.meetsRestrictions=uf;var Zg={},xb=0,cf=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),wb=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function yn(){var e=this;this.A=null,this.j=!1,this.i=new St,this.F=new Ct,navigator.connection&&navigator.connection.addEventListener&&this.F.D(navigator.connection,"change",function(){if(e.j&&e.g.useNetworkInformation){e.i=new St,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.s=[],this.B=1,this.G=!1,this.h=this.o=this.g=this.l=null,this.C=new Mt(function(){if(e.j&&e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.m=null}S=yn.prototype,S.stop=function(){this.A=null,this.j=!1,this.s=[],this.B=1,this.o=this.l=null,this.h&&(this.h.disconnect(),this.h=null),this.C.stop(),this.m=null},S.release=function(){this.F.release(),this.C=null},S.init=function(e){this.A=e},S.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:h.devicePixelRatio;e=h.screen.height*n,t=h.screen.width*n}this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:h.devicePixelRatio,e=Math.min(e,this.o.clientHeight*n),t=Math.min(t,this.o.clientWidth*n)),n=this.s.filter(function(w){return w&&!(w.audio&&w.audio.fastSwitching||w.video&&w.video.fastSwitching)}),n.length||(n=this.s);var r=n;if(n.length!=this.s.length&&(r=this.s.filter(function(w){return w&&!!(w.audio&&w.audio.fastSwitching||w.video&&w.video.fastSwitching)})),n=Rd(this,this.g.restrictions,r,1/0,1/0),e!=1/0||t!=1/0){n=Sb(n),n=b(n);for(var s=n.next();!s.done;s=n.next())if(s=s.value,s.height>=e&&s.width>=t){e=s.height,t=s.width;break}n=Rd(this,this.g.restrictions,r,e,t)}for(e=this.getBandwidthEstimate(),r.length&&!n.length&&(n=Rd(this,null,r,1/0,1/0),n=[n[0]]),t=n[0]||null,r=0;r<n.length;r++){s=n[r];for(var l=isNaN(this.B)?1:Math.abs(this.B),c=l*s.bandwidth/this.g.bandwidthDowngradeTarget,d={bandwidth:1/0},p=r+1;p<n.length;p++)if(s.bandwidth!=n[p].bandwidth){d=n[p];break}l=l*d.bandwidth/this.g.bandwidthUpgradeTarget,e>=c&&e<=l&&(t.bandwidth!=s.bandwidth||t.bandwidth==s.bandwidth&&t.video&&s.video&&(t.video.width<s.video.width||t.video.height<s.video.height))&&(t=s)}return this.l=Date.now(),t},S.enable=function(){this.j=!0},S.disable=function(){this.j=!1},S.segmentDownloaded=function(e,t,n){e<this.g.cacheLoadThreshold||(this.i.sample(e,t),n&&this.l!=null&&this.j&&Jg(this))},S.trySuggestStreams=function(){this.l!=null&&this.j&&Jg(this)},S.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.m?this.m.getBandwidthEstimate(e):e},S.setVariants=function(e){this.s=e},S.playbackRateChanged=function(e){this.B=e},S.setMediaElement=function(e){var t=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in h&&(this.h=new ResizeObserver(function(){t.C.Y(Cb)}),this.h.observe(this.o))},S.setCmsdManager=function(e){this.m=e},S.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function Jg(e){if(!e.G){var t=e.i;if(!(t.g>=t.i))return;e.G=!0,e.l-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.l<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.A(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function Rd(e,t,n,r,s){if(e.m){var l=e.m.zg();l&&(n=n.filter(function(c){return c.bandwidth&&l?c.bandwidth<=l:!0}))}return t&&(n=n.filter(function(c){return uf(c,t,{width:s,height:r})})),n.sort(function(c,d){return c.bandwidth-d.bandwidth})}function Sb(e){var t=[];e=b(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(r,s){return r.width-s.width})}we("shaka.abr.SimpleAbrManager",yn),yn.prototype.configure=yn.prototype.configure,yn.prototype.setCmsdManager=yn.prototype.setCmsdManager,yn.prototype.setMediaElement=yn.prototype.setMediaElement,yn.prototype.playbackRateChanged=yn.prototype.playbackRateChanged,yn.prototype.setVariants=yn.prototype.setVariants,yn.prototype.getBandwidthEstimate=yn.prototype.getBandwidthEstimate,yn.prototype.trySuggestStreams=yn.prototype.trySuggestStreams,yn.prototype.segmentDownloaded=yn.prototype.segmentDownloaded,yn.prototype.disable=yn.prototype.disable,yn.prototype.enable=yn.prototype.enable,yn.prototype.chooseVariant=yn.prototype.chooseVariant,yn.prototype.init=yn.prototype.init,yn.prototype.release=yn.prototype.release,yn.prototype.stop=yn.prototype.stop;var Cb=1;we("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),we("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function hf(e,t,n,r){for(n=n===void 0?!0:n,r=r===void 0?!1:r,this.h=e,this.g=new Set([e]),t=t||[],e=b(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,r)}hf.prototype.add=function(e,t,n){return ey(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function ey(e,t,n,r){var s;if(!(s=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(s=e.audio&&t.audio)){s=e.audio;var l=t.audio;s=!!((!s.channelsCount||!l.channelsCount||2<s.channelsCount||2<l.channelsCount)&&s.channelsCount!=l.channelsCount||s.spatialAudio!==l.spatialAudio||n&&!ty(s,l)||!ny(s.roles,l.roles)||r&&s.groupId!==l.groupId)}return!(r=s)&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!((!n||ty(e,t))&&ny(e.roles,t.roles))),!r}hf.prototype.values=function(){return this.g.values()};function ty(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(r){return Ps(r)}),t=t.codecs.split(",").map(function(r){return Ps(r)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function ny(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=b(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function iy(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Bs(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}iy.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Pn(),r=e.filter(function(s){return ey(t.i,s,!n,t.g)});return r.length?new hf(r[0],r,!n,this.g):this.j.create(e)};function Bs(e,t,n,r,s,l,c,d,p,w,T){this.A=e,this.B=t,this.i=n,this.j=r,this.C=s,this.m=l,this.h=c===void 0?"":c,this.l=d===void 0?"":d,this.o=p===void 0?"reload":p,this.s=w===void 0?!1:w,this.g=T===void 0?"":T}Bs.prototype.create=function(e){var t=[];t=Tb(e,this.A);var n=e.filter(function(r){return r.primary});return t=t.length?t:n.length?n:e,e=bb(t,this.B),e.length&&(t=e),this.m&&(e=Mb(t,this.m),e.length&&(t=e)),this.j&&(e=Ib(t,this.j),e.length&&(t=e)),this.i&&(e=Ab(t,this.i),e.length&&(t=e)),this.h&&(e=Eb(t,this.h),e.length&&(t=e)),this.l&&(e=kb(t,this.l),e.length&&(t=e)),e=_b(t,this.C),e.length&&(t=e),this.g&&(e=Rb(t,this.g),e.length&&(t=e)),new hf(t[0],t,!(this.o=="smooth"&&Pn()),this.s)};function Tb(e,t){t=Kt(t);var n=af(t,e.map(function(r){return kd(r)}));return n?e.filter(function(r){return n==kd(r)}):[]}function bb(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function Eb(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function kb(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function Ab(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function Ib(e,t){return t=="AUTO"&&(t=h.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function Mb(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function _b(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Rb(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function Lb(){this.g=xu,this.i=new Map().set(xu,2).set(js,1),this.h=0}function oy(e,t,n){e.i.set(xu,n).set(js,t)}var js=0,xu=1;function ry(e,t){var n=_o();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function sy(e){var t,n;return z(function(r){if(r.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new re(2,7,1010);return t=e.g,e.g++,t==0?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),k(r,new Promise(function(s){new Mt(s).Y(n/1e3)}),2))}e.h*=e.m,V(r)})}function _o(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Zt(){var e,t,n=new Promise(function(r,s){e=r,t=s});return n.resolve=e,n.reject=t,n}Zt.prototype.resolve=function(){},Zt.prototype.reject=function(){};function Dn(e,t){this.promise=e,this.i=t,this.g=!1}function ts(e){return new Dn(Promise.reject(e),function(){return Promise.resolve()})}function Ld(){var e=Promise.reject(new re(2,7,7001));return e.catch(function(){}),new Dn(e,function(){return Promise.resolve()})}function Fs(e){return new Dn(Promise.resolve(e),function(){return Promise.resolve()})}function ay(e){return new Dn(e,function(){return e.catch(function(){})})}Dn.prototype.abort=function(){return this.g=!0,this.i()};function uy(e){return new Dn(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}Dn.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Dn.prototype.Aa=function(e,t){function n(d){return function(p){if(s.g&&d)l.reject(c);else{var w=d?e:t;w?r=Db(w,p,l):(d?l.resolve:l.reject)(p)}}}function r(){return l.reject(c),s.abort()}var s=this,l=new Zt,c=new re(2,7,7001);return this.promise.then(n(!0),n(!1)),new Dn(l,function(){return r()})};function Db(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(s){return n.reject(s),function(){return Promise.resolve()}}}we("shaka.util.AbortableOperation",Dn),Dn.prototype.chain=Dn.prototype.Aa,Dn.prototype.finally=Dn.prototype.finally,Dn.all=uy,Dn.prototype.abort=Dn.prototype.abort,Dn.notAbortable=ay,Dn.completed=Fs,Dn.aborted=Ld,Dn.failed=ts;function $e(e,t){if(t)if(t instanceof Map)for(var n=b(t.keys()),r=n.next();!r.done;r=n.next())r=r.value,Object.defineProperty(this,r,{value:t.get(r),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=h.performance&&h.performance.now?h.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function ly(e){var t=new $e(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}$e.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},$e.prototype.stopImmediatePropagation=function(){this.g=!0},$e.prototype.stopPropagation=function(){},we("shaka.util.FakeEvent",$e);var df={ij:"abrstatuschanged",jj:"adaptation",kj:"audiotrackchanged",lj:"buffering",mj:"complete",nj:"downloadfailed",oj:"downloadheadersreceived",pj:"drmsessionupdate",rj:"emsg",Ij:"prft",Error:"error",sj:"expirationupdated",tj:"firstquartile",uj:"gapjumped",xj:"keystatuschanged",zj:"loaded",Aj:"loading",Cj:"manifestparsed",Dj:"manifestupdated",Ej:"mediaqualitychanged",Metadata:"metadata",Fj:"midpoint",Gj:"nospatialvideoinfo",Hj:"onstatechange",Jj:"ratechange",Lj:"segmentappended",Mj:"sessiondata",Nj:"spatialvideoinfo",Oj:"stalldetected",Pj:"started",Qj:"statechanged",Rj:"streaming",Sj:"textchanged",Tj:"texttrackvisibility",Uj:"thirdquartile",Vj:"timelineregionadded",Wj:"timelineregionenter",Xj:"timelineregionexit",Yj:"trackschanged",$j:"unloading",bk:"variantchanged"};function Xt(){this.ya=new zt,this.me=this}Xt.prototype.addEventListener=function(e,t){this.ya&&this.ya.push(e,t)},Xt.prototype.removeEventListener=function(e,t){this.ya&&this.ya.remove(e,t)},Xt.prototype.dispatchEvent=function(e){if(!this.ya)return!0;var t=this.ya.get(e.type)||[],n=this.ya.get("All");for(n&&(t=t.concat(n)),t=b(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.me,e.currentTarget=this.me;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Xt.prototype.release=function(){this.ya=null};function $s(){this.g=[]}function ns(e,t){e.g.push(t.finally(function(){jt(e.g,t)}))}$s.prototype.destroy=function(){for(var e=[],t=b(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function nn(e,t,n,r,s,l){Xt.call(this),this.i=!1,this.m=new $s,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.A=n||null,this.B=r||null,this.F=s||null,this.C=l||null,this.o=this.s=!1}X(nn,Xt),S=nn.prototype,S.Pf=function(e){this.s=e},S.Qf=function(e){this.o=e};function Zo(e,t,n,r){n=n||py;var s=mf[e];(!s||n>=s.priority)&&(mf[e]={priority:n,ie:t,Di:r===void 0?!1:r})}function fy(e,t){for(var n=b(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(e=b(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}S.Gi=function(e){this.g.add(e)},S.bj=function(e){this.g.delete(e)},S.mg=function(){this.g.clear()},S.Hi=function(e){this.h.add(e)},S.cj=function(e){this.h.delete(e)},S.ng=function(){this.h.clear()};function Qn(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}S.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Xt.prototype.release.call(this),this.m.destroy()},S.request=function(e,t,n){var r=this,s=new dy;if(this.i){var l=Promise.reject(new re(2,7,7001));return l.catch(function(){}),new pf(l,function(){return Promise.resolve()},s)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?zo(t.retryParameters):_o(),t.uris=zo(t.uris),l=Pb(this,e,t,n);var c=l.Aa(function(){return cy(r,e,t,n,new ry(t.retryParameters,!1),0,null,s)}),d=c.Aa(function(I){return Ob(r,e,I,n)}),p=Date.now(),w=0;l.promise.then(function(){w=Date.now()-p},function(){});var T=0;c.promise.then(function(){T=Date.now()},function(){});var E=d.Aa(function(I){var A=Date.now()-T,R=I.response;return R.timeMs+=w,R.timeMs+=A,I.ii||!r.l||R.fromCache||t.method=="HEAD"||e!=Ro||r.l(R.timeMs,R.data.byteLength,hy(n)),r.C&&r.C(e,R,n),R},function(I){throw I&&(I.severity=2),I});return l=new pf(E.promise,function(){return E.abort()},s),ns(this.m,l),l};function Pb(e,t,n,r){function s(d){l=l.Aa(function(){return n.body&&(n.body=ie(n.body)),d(t,n,r)})}var l=Fs(void 0);e.B&&s(e.B),e=b(e.g);for(var c=e.next();!c.done;c=e.next())s(c.value);return l.Aa(void 0,function(d){throw d instanceof re&&d.code==7001?d:new re(2,1,1006,d)})}function cy(e,t,n,r,s,l,c,d){e.s&&(n.uris[l]=n.uris[l].replace("https://","http://")),e.o&&(n.uris[l]=n.uris[l].replace("http://","https://")),0<l&&e.F&&e.F(t,r,n.uris[l],n.uris[l-1]);var p=new Ln(n.uris[l]),w=p.Bb,T=!1;w||(w=location.protocol,w=w.slice(0,-1),ql(p,w),n.uris[l]=p.toString()),w=w.toLowerCase();var E=(w=mf[w])?w.ie:null;if(!E)return ts(new re(2,1,1e3,p));var I=w.Di,A=null,R=null,D=!1,L=!1,F;return ay(sy(s)).Aa(function(){if(e.i)return Ld();F=Date.now();var U=0;n.requestStartTime=Date.now();var q=E(n.uris[l],n,t,function(Y,oe,ae){A&&A.stop(),R&&R.Y(H/1e3),e.l&&t==Ro&&(U++,n.packetNumber=U,e.l(Y,oe,hy(r),n),T=!0,d.g=ae)},function(Y){e.j&&e.j(Y,n,t),L=!0,n.timeToFirstByte=Date.now()-n.requestStartTime});if(!I)return q;var N=n.retryParameters.connectionTimeout;N&&(A=new Mt(function(){D=!0,q.abort()}),A.Y(N/1e3));var H=n.retryParameters.stallTimeout;return H&&(R=new Mt(function(){D=!0,q.abort()})),q}).Aa(function(U){A&&A.stop(),R&&R.stop(),U.timeMs==null&&(U.timeMs=Date.now()-F);var q={response:U,ii:T};return!L&&e.j&&e.j(U.headers,n,t),q},function(U){if(A&&A.stop(),R&&R.stop(),e.A){var q=null,N=0;U instanceof re&&(q=U,U.code==1001&&(N=U.data[1])),e.A(n,q,N,D)}if(e.i)return Ld();if(D&&(U=new re(1,1,1003,n.uris[l],t)),U instanceof re){if(U.code==7001)throw U;if(U.code==1010)throw c;if(U.severity==1)return q=new Map().set("error",U),q=new $e("retry",q),e.dispatchEvent(q),l=(l+1)%n.uris.length,cy(e,t,n,r,s,l,U,d)}throw U})}function Ob(e,t,n,r){var s=Fs(void 0);e=b(e.h);for(var l=e.next(),c={};!l.done;c={Vg:void 0},l=e.next())c.Vg=l.value,s=s.Aa(function(d){return function(){var p=n.response;return p.data&&(p.data=ie(p.data)),(0,d.Vg)(t,p,r)}}(c));return s.Aa(function(){return n},function(d){var p=2;if(d instanceof re){if(d.code==7001)throw d;p=d.severity}throw new re(p,1,1007,d)})}function hy(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}we("shaka.net.NetworkingEngine",nn),nn.prototype.request=nn.prototype.request,nn.prototype.destroy=nn.prototype.destroy,nn.makeRequest=Qn,nn.defaultRetryParameters=function(){return _o()},nn.prototype.clearAllResponseFilters=nn.prototype.ng,nn.prototype.unregisterResponseFilter=nn.prototype.cj,nn.prototype.registerResponseFilter=nn.prototype.Hi,nn.prototype.clearAllRequestFilters=nn.prototype.mg,nn.prototype.unregisterRequestFilter=nn.prototype.bj,nn.prototype.registerRequestFilter=nn.prototype.Gi,nn.unregisterScheme=function(e){delete mf[e]},nn.registerScheme=Zo,nn.prototype.setForceHTTPS=nn.prototype.Qf,nn.prototype.setForceHTTP=nn.prototype.Pf;function dy(){this.g=0}nn.NumBytesRemainingClass=dy;function pf(e,t,n){Dn.call(this,e,t),this.h=n}X(pf,Dn),nn.PendingRequest=pf;var Ro=1;nn.RequestType={MANIFEST:0,SEGMENT:Ro,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},nn.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6};var py=3;nn.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:py};var mf={};function zs(e){this.g=!1,this.h=new Zt,this.i=e}zs.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Jt(e,t){if(e.g)throw t instanceof re&&t.code==7003?t:new re(2,7,7003,t)}function Dd(e,t){var n=[];e=b(e);for(var r=e.next();!r.done;r=e.next())n.push(t(r.value));return n}function Nb(e,t){e=b(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function wu(e){for(var t=new Map,n=b(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function Pd(e){var t={};return e.forEach(function(n,r){t[r]=n}),t}function en(e,t){this.h=wt(e),this.i=t==my,this.g=0}S=en.prototype,S.na=function(){return this.g<this.h.byteLength},S.va=function(){return this.g},S.getLength=function(){return this.h.byteLength},S.T=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw Jo()}},S.la=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw Jo()}},S.P=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw Jo()}},S.Sg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw Jo()}},S.Nc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw Jo()}if(2097151<t)throw new re(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},S.qb=function(e){if(this.g+e>this.h.byteLength)throw Jo();var t=Ae(this.h,this.g,e);return this.g+=e,t},S.skip=function(e){if(this.g+e>this.h.byteLength)throw Jo();this.g+=e},S.Oi=function(e){if(this.g<e)throw Jo();this.g-=e},S.seek=function(e){if(0>e||e>this.h.byteLength)throw Jo();this.g=e},S.oc=function(){for(var e=this.g;this.na()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=Ae(this.h,e,this.g-e),this.g+=1,fn(e)};function Jo(){return new re(2,3,3e3)}we("shaka.util.DataViewReader",en),en.prototype.readTerminatedString=en.prototype.oc,en.prototype.seek=en.prototype.seek,en.prototype.rewind=en.prototype.Oi,en.prototype.skip=en.prototype.skip,en.prototype.readBytes=en.prototype.qb,en.prototype.readUint64=en.prototype.Nc,en.prototype.readInt32=en.prototype.Sg,en.prototype.readUint32=en.prototype.P,en.prototype.readUint16=en.prototype.la,en.prototype.readUint8=en.prototype.T,en.prototype.getLength=en.prototype.getLength,en.prototype.getPosition=en.prototype.va,en.prototype.hasMoreData=en.prototype.na;var my=1;en.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:my};function tn(){this.i=[],this.h=[],this.g=!1}S=tn.prototype,S.box=function(e,t){return e=gy(e),this.i[e]=Ub,this.h[e]=t,this},S.S=function(e,t){return e=gy(e),this.i[e]=yy,this.h[e]=t,this},S.stop=function(){this.g=!0},S.parse=function(e,t,n){for(e=new en(e,0),this.g=!1;e.na()&&!this.g;)this.Kc(0,e,t,n)},S.Kc=function(e,t,n,r){var s=t.va();if(r&&s+8>t.getLength())this.g=!0;else{var l=t.P(),c=t.P(),d=gf(c),p=!1;switch(l){case 0:l=t.getLength()-s;break;case 1:if(r&&t.va()+8>t.getLength()){this.g=!0;return}l=t.Nc(),p=!0}var w=this.h[c];if(w){var T=null,E=null;if(this.i[c]==yy){if(r&&t.va()+4>t.getLength()){this.g=!0;return}E=t.P(),T=E>>>24,E&=16777215}c=s+l,n&&c>t.getLength()&&(c=t.getLength()),r&&c>t.getLength()?this.g=!0:(r=c-t.va(),t=0<r?t.qb(r):new Uint8Array(0),t=new en(t,0),w({name:d,parser:this,partialOkay:n||!1,version:T,flags:E,reader:t,size:l,start:s+e,has64BitSize:p}))}else t.skip(Math.min(s+l-t.va(),t.getLength()-t.va()))}};function Rt(e){for(var t=Hs(e);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Ar(e){for(var t=Hs(e),n=e.reader.P(),r=0;r<n&&(e.parser.Kc(e.start+t,e.reader,e.partialOkay),!e.parser.g);r++);}function Ri(e){var t=Hs(e);for(e.reader.skip(78);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Od(e){var t=Hs(e);e.reader.skip(8);var n=e.reader.la();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.na()&&!e.parser.g;)e.parser.Kc(e.start+t,e.reader,e.partialOkay)}function Vs(e){return function(t){e(t.reader.qb(t.reader.getLength()-t.reader.va()))}}function gy(e){var t=0;e=b(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function gf(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Hs(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}we("shaka.util.Mp4Parser",tn),tn.headerSize=Hs,tn.typeToString=gf,tn.allData=Vs,tn.audioSampleEntry=Od,tn.visualSampleEntry=Ri,tn.sampleDescription=Ar,tn.children=Rt,tn.prototype.parseNext=tn.prototype.Kc,tn.prototype.parse=tn.prototype.parse,tn.prototype.stop=tn.prototype.stop,tn.prototype.fullBox=tn.prototype.S,tn.prototype.box=tn.prototype.box;var Ub=0,yy=1;function vy(e){var t=this;this.g=[],this.h=[],this.data=[],new tn().box("moov",Rt).box("moof",Rt).S("pssh",function(n){if(!(1<n.version)){var r=Ae(n.reader.h,-12,n.size);if(t.data.push(r),t.g.push(Yo(n.reader.qb(16))),0<n.version){r=n.reader.P();for(var s=0;s<r;s++){var l=Yo(n.reader.qb(16));t.h.push(l)}}}}).parse(e)}function yf(e,t,n,r){var s=e.length,l=t.length+16+s;0<r&&(l+=4+16*n.size);var c=new Uint8Array(l),d=wt(c),p=0;if(d.setUint32(p,l),p+=4,d.setUint32(p,1886614376),p+=4,1>r?d.setUint32(p,0):d.setUint32(p,16777216),p+=4,c.set(t,p),p+=t.length,0<r)for(d.setUint32(p,n.size),p+=4,t=b(n),n=t.next();!n.done;n=t.next())n=Yr(n.value),c.set(n,p),p+=n.length;return d.setUint32(p,s),c.set(e,p+4),c}function Nd(e,t){return e=Ko(e),Gs(e,t)}function Gs(e,t){return e=Bb(e),!t&&e.length?e[0]:(e=e.find(function(n){return n.tagName===t}))?e:null}function Ud(e){return jd.has(e)?jd.get(e):""}function Bb(e){function t(s,l){l=l===void 0?!1:l;for(var c=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){l=r+2,r=e.indexOf(">",r),l=e.substring(l,r);var d=l.indexOf(s);if(d==-1){var p=s.indexOf(".");0<p&&(d=l.indexOf(s.substring(0,p)))}if(d==-1)throw s=e.substring(0,r).split(`
`),Error(`Unexpected close tag
Line: `+(s.length-1)+`
Column: `+(s[s.length-1].length+1)+`
Char: `+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){d=e.indexOf("]]>",r),d==-1?(c.push(e.substr(r+9)),r=e.length):(c.push(e.substring(r+9,d)),r=d+3);continue}r++;continue}e:{p=l,r++;var w=n(),T={};for(d=[];e.charCodeAt(r)!==62&&e[r];){var E=e.charCodeAt(r);if(64<E&&91>E||96<E&&123>E){E=n();for(var I=e.charCodeAt(r);I&&I!==39&&I!==34&&!(64<I&&91>I||96<I&&123>I)&&I!==62;)r++,I=e.charCodeAt(r);var A=r+1;if(r=e.indexOf(e[r],A),A=e.slice(A,r),I===39||I===34){if(r===-1){for(p={tagName:w,attributes:T,children:d,parent:null},w=0;w<d.length;w++)typeof d[w]!="string"&&(d[w].parent=p);d=p;break e}}else A=null,r--;E.startsWith("xmlns:")&&jd.set(A,E.split(":")[1]),w==="tt"&&E==="xml:space"&&A==="preserve"&&(p=!0),T[E]=A}r++}for(e.charCodeAt(r-1)!==47?(r++,d=t(w,p)):r++,p={tagName:w,attributes:T,children:d,parent:null},w=d.length,T=0;T<w;T++)E=d[T],typeof E!="string"?E.parent=p:T==w-1&&E==`
`&&d.pop();d=p}if(c.push(d),typeof d=="string")break;d.tagName[0]==="?"&&d.children&&(c.push.apply(c,_(d.children)),d.children=[])}else d=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),d=e.slice(d,r+1),l?0<d.length&&c.push(d):(c.length&&d.length==1&&d[0]==`
`||0<d.trim().length)&&c.push(d),r++;return c}function n(){for(var s=r;`\r
	>/= `.indexOf(e[r])===-1&&e[r];)r++;return e.slice(s,r)}var r=0;return t("")}function vf(e){return typeof e=="string"}function xy(e){var t=[];if(!e.children)return[];e=b(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function on(e,t){var n=[];if(!e.children)return[];e=b(e.children);for(var r=e.next();!r.done;r=e.next())r=r.value,r.tagName===t&&n.push(r);return n}function Gn(e){return typeof e=="string"?Ti(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:Ti(e))}function xo(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=Gn(e))&&(e=e.trim()),e):null}function wo(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=b(e.children);for(var r=e.next();!r.done;r=e.next())wo(r.value,t,n)}return n}function So(e,t){return e=on(e,t),e.length!=1?null:e[0]}function er(e,t,n){return e=wy(e,t,n),e.length!=1?null:e[0]}function Bt(e,t,n,r){r=r===void 0?null:r;var s=null;return e=e.attributes[t],e!=null&&(s=n(e)),s??r}function tr(e,t,n){return t=Ud(t),e.attributes[t+":"+n]||null}function wy(e,t,n){t=Ud(t);var r=[];if(e.children){e=b(e.children);for(var s=e.next();!s.done;s=e.next())(s=s.value)&&s.tagName===t+":"+n&&r.push(s)}return r}function Vo(e,t,n){t=b(t);for(var r=t.next();!r.done;r=t.next())if(r=tr(e,r.value,n))return r;return null}function Ir(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function Ho(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function xf(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function wf(e){return e=Number(e),e%1===0?e:null}function nr(e){return e=Number(e),e%1===0&&0<e?e:null}function yi(e){return e=Number(e),e%1===0&&0<=e?e:null}function Sf(e){return e=Number(e),isNaN(e)?null:e}function Bd(e){return e?e.toLowerCase()==="true":!1}function jb(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Cf(e){var t=[];e=Ti(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=b(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=n.match(/^([\w]+)/);if(r){var s=n.match(/(@id='(.*?)')/),l=n.match(/(@t='(\d+)')/),c=n.match(/(@n='(\d+)')/),d=n.match(/\[(\d+)\]/);t.push({name:r[0],id:s?s[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:l?Number(l[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:c?Number(c[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:d?Number(d[1])-1:null,Sb:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Sb=n.slice(1))}return t}function Sy(e,t){var n=Cf(t.attributes.sel||"");if(n.length){var r=n[n.length-1],s=t.attributes.pos||null;n=r.position,n==null&&(r.t!==null&&(n=Cy(e,"t",r.t)),r.n!==null&&(n=Cy(e,"n",r.n))),n===null?n=s==="prepend"?0:e.length:s==="prepend"?--n:s==="after"&&++n,s=t.tagName,(r=r.Sb)&&e[n]?Ty(e[n],s,r,xo(t)||""):(s!=="remove"&&s!=="replace"||e.splice(n,1),s!=="add"&&s!=="replace"||e.splice.apply(e,[n,0].concat(_(t.children))))}}function Cy(e,t,n){var r=0;e=b(e);for(var s=e.next();!s.done;s=e.next()){if(Number(s.value.attributes[t])===n)return r;r++}return null}function Ty(e,t,n,r){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=r)}function by(e){var t=document.createElementNS("",e.tagName),n;for(n in e.attributes)t.setAttribute(n,e.attributes[n]);for(e=b(e.children),n=e.next();!n.done;n=e.next()){n=n.value;var r=void 0;typeof n=="string"?r=new Text(n):r=by(n),t.appendChild(r)}return t}var jd=new Map([]);function Tf(e){var t=this;this.C=e,this.H=new Set,this.m=this.s=null,this.fa=this.da=!1,this.I=0,this.g=null,this.B=new Ct,this.i=new Map,this.A=new Map,this.l=new Zt,this.h=null,this.o=function(n){n.severity==2&&t.l.reject(n),e.onError(n)},this.Z=new Map,this.ea=new Map,this.L=new Mt(function(){return Yb(t)}),this.R=!1,this.N=[],this.U=!1,this.K=new Mt(function(){Jb(t)}),this.l.catch(function(){}),this.j=new zs(function(){return Fb(t)}),this.ba=!1,this.F=this.G=null}S=Tf.prototype,S.destroy=function(){return this.j.destroy()};function Fb(e){return z(function(t){switch(t.g){case 1:return e.B.release(),e.B=null,e.l.reject(),e.K.stop(),e.K=null,e.L.stop(),e.L=null,k(t,Py(e),2);case 2:if(!e.m){t.u(3);break}return Q(t,4),k(t,e.m.setMediaKeys(null),6);case 6:J(t,5);break;case 4:te(t);case 5:e.m=null;case 3:e.g=null,e.H.clear(),e.s=null,e.A=new Map,e.h=null,e.o=function(){},e.C=null,e.ba=!1,e.G=null,V(t)}})}S.configure=function(e){this.h=e,this.K&&this.K.Sa(this.h.updateExpirationTime)};function $b(e,t,n){return e.fa=!0,e.A=new Map,e.R=n,ky(e,t)}function Ey(e,t,n){e.A=new Map,n=b(n);for(var r=n.next();!r.done;r=n.next())e.A.set(r.value,{initData:null,initDataType:null});for(n=b(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.A.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.R=0<e.A.size,ky(e,t)}function zb(e,t,n,r,s,l){var c=new Map;return s={audioCapabilities:s,videoCapabilities:l,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},s.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,serverCertificateUri:"",initData:null,keyIds:null}],c.set(t,s),_y(e,c,[])}function ky(e,t){var n,r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N;return z(function(H){if(H.g==1){if(n=qb(e))for(r=b(t),s=r.next();!s.done;s=r.next())l=s.value,l.video&&(l.video.drmInfos=[n]),l.audio&&(l.audio.drmInfos=[n]);for(c=t.some(function(Y){return!!(Y.video&&Y.video.drmInfos.length||Y.audio&&Y.audio.drmInfos.length)}),c||(d=wu(e.h.servers),tE(t,d)),p=new Set,w=b(t),T=w.next();!T.done;T=w.next())for(E=T.value,I=Oy(E),A=b(I),R=A.next();!R.done;R=A.next())D=R.value,p.add(D);for(L=b(p),F=L.next();!F.done;F=L.next())U=F.value,nE(U,wu(e.h.servers),wu(e.h.advanced||{}),e.h.keySystemsMapping);return k(H,Wg(t,e.R,e.ba,e.h.preferredKeySystems),2)}return Jt(e.j),q=c||Object.keys(e.h.servers).length,q?(N=_y(e,void 0,t),H.return(c?N:N.catch(function(){}))):(e.da=!0,H.return(Promise.resolve()))})}function Ay(e){var t;return z(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.G){n.u(2);break}return k(n,e.G,3);case 3:return Jt(e.j),n.return();case 2:return Q(n,4),e.G=e.m.setMediaKeys(e.s),k(n,e.G,6);case 6:J(n,5);break;case 4:t=te(n),e.o(new re(2,6,6003,t.message));case 5:Jt(e.j),V(n)}})}function Vb(e,t){return z(function(n){if(n.g==1)return k(n,Ay(e),2);Su(e,t.initDataType,Ae(t.initData)),V(n)})}S.Rb=function(e){var t=this;return z(function(n){if(n.g==1)return t.s?(t.m=e,t.B.ha(t.m,"play",function(){for(var r=b(t.N),s=r.next();!s.done;s=r.next())$d(t,s.value);t.U=!0,t.N=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.B.D(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Py(t)}),t.F=t.g&&t.g.initData.find(function(r){return 0<r.initData.length})||null,t.F||t.g.keySystem!=="com.apple.fps"||t.A.size?k(n,Ay(t),2):n.u(2)):(t.B.ha(e,"encrypted",function(){t.o(new re(2,6,6010))}),n.return());Iy(t).catch(function(){}),t.F||t.A.size||t.h.parseInbandPsshEnabled||t.B.D(t.m,"encrypted",function(r){return Vb(t,r)}),V(n)})};function Hb(e){var t,n,r,s,l;return z(function(c){switch(c.g){case 1:if(!e.s||!e.g)return c.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){c.u(2);break}return t=Qn([e.g.serverCertificateUri],e.h.retryParameters),Q(c,3),n=e.C.Lb.request(5,t),k(c,n.promise,5);case 5:r=c.h,e.g.serverCertificate=Ae(r.data),J(c,4);break;case 3:throw s=te(c),new re(2,6,6017,s);case 4:if(e.j.g)return c.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?c.return():(Q(c,6),k(c,e.s.setServerCertificate(e.g.serverCertificate),8));case 8:J(c,0);break;case 6:throw l=te(c),new re(2,6,6004,l.message)}})}function Gb(e,t){var n,r,s;return z(function(l){if(l.g==1)return k(l,Ly(e,t,{initData:null,initDataType:null}),2);if(l.g!=3)return n=l.h,n?(r=[],(s=e.i.get(n))&&(s.kb=new Zt,r.push(s.kb)),r.push(n.remove()),k(l,Promise.all(r),3)):l.return();e.i.delete(n),V(l)})}function Iy(e){var t,n,r,s,l;return z(function(c){if(c.g==1)return e.A.size?(e.A.forEach(function(d,p){Ly(e,p,d)}),k(c,e.l,3)):c.u(2);if(c.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&eE(e))return c.return(e.l);e.l=new Zt,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],r=b(n),s=r.next();!s.done;s=r.next())l=s.value,Su(e,l.initDataType,l.initData);return Cu(e)&&e.l.resolve(),c.return(e.l)})}function Su(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){var r=e.i.values();r=b(r);for(var s=r.next();!s.done;s=r.next())if(Rn(n,s.value.initData))return}0<e.i.size&&Cu(e)&&(e.l.resolve(),e.l=new Zt,e.l.catch(function(){})),Kb(e,t,n,e.g.sessionType)}}function My(e){return e=e.i.keys(),e=Dd(e,function(t){return t.sessionId}),Array.from(e)}S.ff=function(){var e=this,t=this.i.keys();return t=Dd(t,function(n){var r=e.i.get(n);return{sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}),Array.from(t)},S.ad=function(){var e=1/0,t=this.i.keys();t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},S.Ld=function(){return Pd(this.ea)};function _y(e,t,n){var r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U;return z(function(q){switch(q.g){case 1:if(r=new Map,n.length){s=Wb(e,n,r),q.u(2);break}return k(q,Xb(e,t),3);case 3:s=q.h;case 2:if(l=s,!l)throw new re(2,6,6001);for(Jt(e.j),Q(q,4),e.H.clear(),c=l.getConfiguration(),d=c.audioCapabilities||[],p=c.videoCapabilities||[],w=b(d),T=w.next();!T.done;T=w.next())E=T.value,e.H.add(E.contentType.toLowerCase());for(I=b(p),A=I.next();!A.done;A=I.next())R=A.value,e.H.add(R.contentType.toLowerCase());if(n.length){var N=l.keySystem,H=r.get(l.keySystem),Y=[],oe=[],ae=[],me=[],ue=[],le=new Set,he=new Set;Ny(H,Y,oe,me,ae,ue,le,he);var be=e.R?"persistent-license":"temporary";for(N={keySystem:N,encryptionScheme:Y[0],licenseServerUri:oe[0],distinctiveIdentifierRequired:H[0].distinctiveIdentifierRequired,persistentStateRequired:H[0].persistentStateRequired,sessionType:H[0].sessionType||be,audioRobustness:H[0].audioRobustness||"",videoRobustness:H[0].videoRobustness||"",serverCertificate:me[0],serverCertificateUri:ae[0],initData:ue,keyIds:le},0<he.size&&(N.keySystemUris=he),H=b(H),he=H.next();!he.done;he=H.next())he=he.value,he.distinctiveIdentifierRequired&&(N.distinctiveIdentifierRequired=he.distinctiveIdentifierRequired),he.persistentStateRequired&&(N.persistentStateRequired=he.persistentStateRequired);H=N}else H=l.keySystem,he=t.get(l.keySystem),N=[],Y=[],oe=[],ae=[],me=[],ue=new Set,Ny(he.drmInfos,N,Y,ae,oe,me,ue),H={keySystem:H,encryptionScheme:N[0],licenseServerUri:Y[0],distinctiveIdentifierRequired:he.distinctiveIdentifier=="required",persistentStateRequired:he.persistentState=="required",sessionType:he.sessionTypes[0]||"temporary",audioRobustness:(he.audioCapabilities?he.audioCapabilities[0].robustness:"")||"",videoRobustness:(he.videoCapabilities?he.videoCapabilities[0].robustness:"")||"",serverCertificate:ae[0],serverCertificateUri:oe[0],initData:me,keyIds:ue};if(e.g=H,!e.g.licenseServerUri)throw new re(2,6,6012,e.g.keySystem);return k(q,l.createMediaKeys(),6);case 6:if(D=q.h,Jt(e.j),e.s=D,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.s)){q.u(7);break}return Q(q,8),k(q,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(L=q.h,L!="usable")throw new re(2,6,6018);Jt(e.j),J(q,7,4);break;case 8:throw F=te(q,4),F instanceof re?F:new re(2,6,6019,F.message);case 7:return e.da=!0,k(q,Hb(e),11);case 11:Jt(e.j),J(q,0);break;case 4:throw U=te(q),Jt(e.j,U),e.g=null,e.H.clear(),U instanceof re?U:new re(2,6,6002,U.message)}})}function Wb(e,t,n){for(var r=b(t),s=r.next();!s.done;s=r.next()){s=b(Oy(s.value));for(var l=s.next();!l.done;l=s.next())l=l.value,n.has(l.keySystem)||n.set(l.keySystem,[]),n.get(l.keySystem).push(l)}if(n.size==1&&n.has(""))throw new re(2,6,6e3);for(e=b(e.h.preferredKeySystems),s=e.next(),r={};!s.done;r={Rg:void 0},s=e.next())for(r.Rg=s.value,s=b(t),l=s.next();!l.done;l=s.next())if(l=l.value.decodingInfos.find(function(w){return function(T){return T.supported&&T.keySystemAccess!=null&&T.keySystemAccess.keySystem==w.Rg}}(r)))return l.keySystemAccess;for(e=b([!0,!1]),r=e.next();!r.done;r=e.next())for(r=r.value,s=b(t),l=s.next();!l.done;l=s.next()){l=b(l.value.decodingInfos);for(var c=l.next();!c.done;c=l.next())if(c=c.value,c.supported&&c.keySystemAccess){var d=n.get(c.keySystemAccess.keySystem);d=b(d);for(var p=d.next();!p.done;p=d.next())if(!!p.value.licenseServerUri==r)return c.keySystemAccess}}return null}function Xb(e,t){var n,r,s,l,c,d,p,w,T,E,I,A,R,D,L,F;return z(function(U){switch(U.g){case 1:if(t.size==1&&t.has(""))throw new re(2,6,6e3);for(r=b(t.values()),s=r.next();!s.done;s=r.next())l=s.value,l.audioCapabilities.length==0&&delete l.audioCapabilities,l.videoCapabilities.length==0&&delete l.videoCapabilities;c=b(e.h.preferredKeySystems),d=c.next();case 2:if(d.done){U.u(4);break}if(p=d.value,!t.has(p)){U.u(3);break}return w=t.get(p),Q(U,6),k(U,navigator.requestMediaKeySystemAccess(p,[w]),8);case 8:return n=U.h,U.return(n);case 6:te(U);case 7:Jt(e.j);case 3:d=c.next(),U.u(2);break;case 4:T=b([!0,!1]),E=T.next();case 9:if(E.done){U.u(11);break}I=E.value,A=b(t.keys()),R=A.next();case 12:if(R.done){E=T.next(),U.u(9);break}if(D=R.value,L=t.get(D),F=L.drmInfos.some(function(q){return!!q.licenseServerUri}),F!=I){U.u(13);break}return Q(U,15),k(U,navigator.requestMediaKeySystemAccess(D,[L]),17);case 17:return n=U.h,U.return(n);case 15:te(U);case 16:Jt(e.j);case 13:R=A.next(),U.u(12);break;case 11:return U.return(n)}})}function qb(e){return e=wu(e.h.clearKeys),e.size==0?null:Lg(e)}function Fd(e){Cu(e)&&e.l.resolve()}function Ry(e,t){new Mt(function(){t.loaded=!0,Fd(e)}).Y(oE)}function Ly(e,t,n){var r,s,l,c,d,p,w;return z(function(T){switch(T.g){case 1:try{r=e.s.createSession("persistent-license")}catch(E){return s=new re(2,6,6005,E.message),e.o(s),T.return(Promise.reject(s))}return e.B.D(r,"message",function(E){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(E):$d(e,E)}),e.B.D(r,"keystatuseschange",function(E){return Dy(e,E)}),l={initData:n.initData,initDataType:n.initDataType,loaded:!1,zf:1/0,kb:null,type:"persistent-license"},e.i.set(r,l),Q(T,2),k(T,r.load(t),4);case 4:return c=T.h,Jt(e.j),c||(e.i.delete(r),d=e.h.persistentSessionOnlinePlayback?1:2,e.o(new re(d,6,6013)),l.loaded=!0),Ry(e,l),Fd(e),T.return(r);case 2:p=te(T),Jt(e.j,p),e.i.delete(r),w=e.h.persistentSessionOnlinePlayback?1:2,e.o(new re(w,6,6005,p.message)),l.loaded=!0,Fd(e);case 3:return T.return(Promise.resolve())}})}function Kb(e,t,n,r){try{var s=e.s.createSession(r)}catch(l){e.o(new re(2,6,6005,l.message));return}e.B.D(s,"message",function(l){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.U?e.N.push(l):$d(e,l)}),e.B.D(s,"keystatuseschange",function(l){return Dy(e,l)}),e.i.set(s,{initData:n,initDataType:t,loaded:!1,zf:1/0,kb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(l){t=l,l instanceof re||(t=new re(2,6,6016,l)),e.o(t);return}e.h.logLicenseExchange&&Kr(n),s.generateRequest(t,n).catch(function(l){if(!e.j.g){e.i.delete(s);var c=l.errorCode;if(c&&c.systemCode){var d=c.systemCode;0>d&&(d+=Math.pow(2,32)),d="0x"+d.toString(16)}e.o(new re(2,6,6006,l.message,l,d))}})}function $d(e,t){var n,r,s,l,c,d,p,w,T,E,I,A,R,D;z(function(L){switch(L.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Kr(t.message),r=e.i.get(n),s=e.g.licenseServerUri,l=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&l&&l.individualizationServer&&(s=l.individualizationServer),c=Qn([s],e.h.retryParameters),c.body=t.message,c.method="POST",c.licenseRequestType=t.messageType,c.sessionId=n.sessionId,c.drmInfo=e.g,r&&(c.initData=r.initData,c.initDataType=r.initDataType),l&&l.headers)for(d in l.headers)c.headers[d]=l.headers[d];if(md(e.g.keySystem)){var F=qo(c.body,!0,!0);if(F.includes("PlayReadyKeyMessage")){F=Gs(F,"PlayReadyKeyMessage");var U=wo(F,"HttpHeader");U=b(U);for(var q=U.next();!q.done;q=U.next()){var N=q.value;q=wo(N,"name")[0],N=wo(N,"value")[0],c.headers[Gn(q)]=Gn(N)}F=wo(F,"Challenge")[0],c.body=oo(Gn(F))}else c.headers["Content-Type"]="text/xml; charset=utf-8"}return p=Date.now(),Q(L,2),T=e.C.Lb.request(2,c),k(L,T.promise,4);case 4:w=L.h,J(L,3);break;case 2:return E=te(L),e.j.g||(I=new re(2,6,6007,E),e.i.size==1?(e.o(I),r&&r.kb&&r.kb.reject(I)):(r&&r.kb&&r.kb.reject(I),e.i.delete(n),Cu(e)&&(e.l.resolve(),e.L.Y(.1)))),L.return();case 3:return e.j.g?L.return():(e.I+=(Date.now()-p)/1e3,e.h.logLicenseExchange&&Kr(w.data),Q(L,5),k(L,n.update(w.data),7));case 7:J(L,6);break;case 5:return A=te(L),R=new re(2,6,6008,A.message),e.o(R),r&&r.kb&&r.kb.reject(R),L.return();case 6:if(e.j.g)return L.return();D=new $e("drmsessionupdate"),e.C.onEvent(D),r&&(r.kb&&r.kb.resolve(),Ry(e,r)),V(L)}})}function Dy(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(l,c){if(typeof c=="string"){var d=c;c=l,l=d}if(md(e.g.keySystem)&&c.byteLength==16&&(hu()||$o())){d=wt(c);var p=d.getUint32(0,!0),w=d.getUint16(4,!0),T=d.getUint16(6,!0);d.setUint32(0,p,!1),d.setUint16(4,w,!1),d.setUint16(6,T,!1)}l!="status-pending"&&(n.loaded=!0),l=="expired"&&(r=!0),c=Yo(c).slice(0,32),e.Z.set(c,l)});var s=t.expiration-Date.now();(0>s||r&&1e3>s)&&n&&!n.kb&&(e.i.delete(t),t.close().catch(function(){})),Cu(e)&&(e.l.resolve(),e.L.Y(rE))}function Yb(e){var t=e.Z,n=e.ea;n.clear(),t.forEach(function(r,s){return n.set(s,r)}),t=Array.from(n.values()),t.length&&t.every(function(r){return r=="expired"})&&e.o(new re(2,6,6014)),e.C.ee(Pd(n))}function Qb(){var e,t,n,r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me,ue,le;return z(function(he){if(he.g==1){for(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps".split(" "),t=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],n=["150","2000","3000"],r={"com.widevine.alpha":t,"com.microsoft.playready.recommendation":n},s=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],l=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],c={videoCapabilities:s,audioCapabilities:l,initDataTypes:["cenc","sinf","skd","keyids"]},d=[null,"cenc","cbcs","cbcs-1-9"],p=new Map,w=function(be,Ce){var ke,Oe,Ie,Fe,vt,Dt,Sn,$t;return z(function(kn){switch(kn.g){case 1:return Q(kn,2),k(kn,Ce.createMediaKeys(),4);case 4:J(kn,3);break;case 2:return te(kn),kn.return();case 3:Oe=(ke=Ce.getConfiguration().sessionTypes)?ke.includes("persistent-license"):!1,du()&&(Oe=!1),Ie=Ce.getConfiguration().videoCapabilities,Fe=Ce.getConfiguration().audioCapabilities,vt={persistentState:Oe,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[]},p.has(be)&&p.get(be)?vt=p.get(be):p.set(be,vt),(Dt=Ie[0].encryptionScheme)&&!vt.encryptionSchemes.includes(Dt)&&vt.encryptionSchemes.push(Dt),(Sn=Ie[0].robustness)&&!vt.videoRobustnessLevels.includes(Sn)&&vt.videoRobustnessLevels.push(Sn),($t=Fe[0].robustness)&&!vt.audioRobustnessLevels.includes($t)&&vt.audioRobustnessLevels.push($t),V(kn)}})},T=function(be,Ce,ke,Oe){var Ie,Fe,vt,Dt,Sn,$t,kn,Un,Cn,qt;return z(function(Mn){switch(Mn.g){case 1:for(Q(Mn,2),Ie=zo(c),Fe=b(Ie.videoCapabilities),vt=Fe.next();!vt.done;vt=Fe.next())Dt=vt.value,Dt.encryptionScheme=Ce,Dt.robustness=ke;for(Sn=b(Ie.audioCapabilities),$t=Sn.next();!$t.done;$t=Sn.next())kn=$t.value,kn.encryptionScheme=Ce,kn.robustness=Oe;return Un=zo(Ie),Un.persistentState="required",Un.sessionTypes=["persistent-license"],Cn=[Un,Ie],k(Mn,navigator.requestMediaKeySystemAccess(be,Cn),4);case 4:return qt=Mn.h,k(Mn,w(be,qt),5);case 5:J(Mn,0);break;case 2:te(Mn),V(Mn)}})},E=function(be,Ce,ke,Oe){var Ie,Fe,vt;return z(function(Dt){switch(Dt.g){case 1:return Q(Dt,2),Ie={type:"media-source",video:{contentType:s[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:l[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:be,video:{encryptionScheme:Ce,robustness:ke},audio:{encryptionScheme:Ce,robustness:Oe}}},k(Dt,navigator.mediaCapabilities.decodingInfo(Ie),4);case 4:return Fe=Dt.h,vt=Fe.keySystemAccess,k(Dt,w(be,vt),5);case 5:J(Dt,0);break;case 2:te(Dt),V(Dt)}})},I=b(e),A=I.next();!A.done;A=I.next())R=A.value,p.set(R,null);for(D=[],L=b(d),F=L.next();!F.done;F=L.next())for(U=F.value,q=b(e),N=q.next();!N.done;N=q.next())H=N.value,H==="org.w3.clearkey"&&_s()||(D.push(T(H,U,"","")),D.push(E(H,U,"","")));for(Y=b(e),oe=Y.next();!oe.done;oe=Y.next())for(ae=oe.value,me=b(r[ae]||[]),ue=me.next();!ue.done;ue=me.next())le=ue.value,D.push(T(ae,null,le,"")),D.push(T(ae,null,"",le)),D.push(E(ae,null,le,"")),D.push(E(ae,null,"",le));return k(he,Promise.all(D),2)}return he.return(Pd(p))})}function Zb(e){var t;return z(function(n){if(n.g==1)return t=new Promise(function(r,s){new Mt(s).Y(iE)}),Q(n,2),k(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return J(n,0);te(n),V(n)})}function Py(e){var t;return z(function(n){return t=Array.from(e.i.entries()),e.i.clear(),k(n,Promise.all(t.map(function(r){r=b(r);var s=r.next().value,l=r.next().value;return z(function(c){if(c.g==1)return Q(c,2),e.fa||e.A.has(s.sessionId)||l.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?k(c,Zb(s),5):k(c,s.remove(),5);if(c.g!=2)return J(c,0);te(c),V(c)})})),0)})}function Oy(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Jb(e){e.i.forEach(function(t,n){var r=t.zf,s=n.expiration;isNaN(s)&&(s=1/0),s!=r&&(e.C.onExpirationUpdated(n.sessionId,s),t.zf=s)})}function Cu(e){return e=e.i.values(),Nb(e,function(t){return t.loaded})}function eE(e){for(var t=b(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.Z.get(n.value)!=="usable")return!1;return!0}function tE(e,t){var n=[];for(t.forEach(function(r,s){n.push({keySystem:s,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=b(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function Ny(e,t,n,r,s,l,c,d){var p=[];e=b(e);for(var w=e.next(),T={};!w.done;T={ra:void 0},w=e.next()){if(T.ra=w.value,t.includes(T.ra.encryptionScheme)||t.push(T.ra.encryptionScheme),T.ra.keySystem=="org.w3.clearkey"&&T.ra.licenseServerUri.startsWith("data:application/json;base64,")?p.includes(T.ra.licenseServerUri)||p.push(T.ra.licenseServerUri):n.includes(T.ra.licenseServerUri)||n.push(T.ra.licenseServerUri),s.includes(T.ra.serverCertificateUri)||s.push(T.ra.serverCertificateUri),T.ra.serverCertificate&&(r.some(function(A){return function(R){return Rn(R,A.ra.serverCertificate)}}(T))||r.push(T.ra.serverCertificate)),T.ra.initData){w=b(T.ra.initData);for(var E=w.next(),I={};!E.done;I={mf:void 0},E=w.next())I.mf=E.value,l.some(function(A){return function(R){var D=A.mf;return R.keyId&&R.keyId==D.keyId?!0:R.initDataType==D.initDataType&&Rn(R.initData,D.initData)}}(I))||l.push(I.mf)}if(T.ra.keyIds)for(w=b(T.ra.keyIds),E=w.next();!E.done;E=w.next())c.add(E.value);if(T.ra.keySystemUris&&d)for(T=b(T.ra.keySystemUris),w=T.next();!w.done;w=T.next())d.add(w.value)}if(p.length==1)n.push(p[0]);else if(0<p.length){for(t=[],p=b(p),r=p.next();!r.done;r=p.next())r=h.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),t.push.apply(t,_(r.keys));p=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+h.btoa(p))}}function nE(e,t,n,r){var s=e.keySystem;s&&(s!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(s)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(s))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),r[s]&&(e.keySystem=r[s]),h.cast&&h.cast.__platform__&&s=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var iE=1,oE=5,rE=.5;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function zd(e,t,n){this.h=e,this.i=t,this.g=n}function Uy(e,t){return z(function(n){if(n.g==1)return k(n,hb(e.g,t,e.h.drm.preferredKeySystems),2);if(e.h.streaming.dontChooseCodecs||$g(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes),!t.variants.some(yu))throw new re(2,4,4032);return n.return(By(e,t))})}function By(e,t){var n=zg(t.variants,e.h.restrictions,e.i);if(t){var r=e.g?e.g.g:null;if(r&&e.g.s)for(var s=b(t.variants),l=s.next();!l.done;l=s.next())l=l.value,Vd(e,r.keySystem,l.video),Vd(e,r.keySystem,l.audio);jy(e,t)}return n}function Vd(e,t,n){if(n){n=b(n.drmInfos);for(var r=n.next();!r.done;r=n.next())if(r=r.value,r.keySystem==t){r=b(r.initData||[]);for(var s=r.next();!s.done;s=r.next())s=s.value,Su(e.g,s.initDataType,s.initData)}}}function jy(e,t){e=e.g?e.g.Ld():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var r=!1,s=!1,l=new Set,c=new Set;t=b(t.variants);for(var d=t.next();!d.done;d=t.next()){d=d.value;var p=[];d.audio&&p.push(d.audio),d.video&&p.push(d.video),p=b(p);for(var w=p.next();!w.done;w=p.next())if(w=w.value,w.keyIds.size){w=b(w.keyIds);for(var T=w.next();!T.done;T=w.next()){T=T.value;var E=e[n?"00":T];E?Fy.includes(E)&&c.add(E):l.add(T)}}d.allowedByApplication?d.allowedByKeySystem&&(r=!0):s=!0}if(!r)throw e={hasAppRestrictions:s,missingKeys:Array.from(l),restrictedKeyStatuses:Array.from(c)},new re(2,4,4012,e)}var Fy=["output-restricted","internal-error"];function Tu(){}function $y(e,t){if(t){var n=Co[t.toLowerCase()];if(n)return n}throw new re(2,4,4e3,e,t)}we("shaka.media.ManifestParser",Tu),Tu.unregisterParserByMime=function(e){delete Co[e]},Tu.registerParserByMime=function(e,t){Co[e]=t},Tu.registerParserByExtension=function(){Ot("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Tu.AccessibilityPurpose={ak:"visually impaired",vj:"hard of hearing"};var Co={};function sE(e,t){function n(){l=!0}function r(T){d.push(T),Rt(T)}var s=e=Ae(e),l=!1,c,d=[],p=[];if(new tn().box("moov",r).box("trak",r).box("mdia",r).box("minf",r).box("stbl",r).S("stsd",function(T){c=T,d.push(T),Ar(T)}).S("encv",n).S("enca",n).S("dvav",function(T){p.push({box:T,Oa:1701733238})}).S("dva1",function(T){p.push({box:T,Oa:1701733238})}).S("dvh1",function(T){p.push({box:T,Oa:1701733238})}).S("dvhe",function(T){p.push({box:T,Oa:1701733238})}).S("dvc1",function(T){p.push({box:T,Oa:1701733238})}).S("dvi1",function(T){p.push({box:T,Oa:1701733238})}).S("hev1",function(T){p.push({box:T,Oa:1701733238})}).S("hvc1",function(T){p.push({box:T,Oa:1701733238})}).S("avc1",function(T){p.push({box:T,Oa:1701733238})}).S("avc3",function(T){p.push({box:T,Oa:1701733238})}).S("ac-3",function(T){p.push({box:T,Oa:1701733217})}).S("ec-3",function(T){p.push({box:T,Oa:1701733217})}).S("ac-4",function(T){p.push({box:T,Oa:1701733217})}).S("mp4a",function(T){p.push({box:T,Oa:1701733217})}).parse(e),l)return e;if(p.length==0||!c)throw Yo(e),new re(2,3,3019,t);p.reverse(),t=b(p);for(var w=t.next();!w.done;w=t.next())w=w.value,s=aE(s,c,w.box,d,w.Oa);return hu()&&vd()?(t=new Uint8Array(e.byteLength+s.byteLength),t.set(s),t.set(e,s.byteLength),t):s}function aE(e,t,n,r,s){var l=uE.value(),c=e.subarray(n.start,n.start+n.size),d=wt(c),p=new Uint8Array(n.size+l.byteLength);for(p.set(c,0),c=wt(p),c.setUint32(4,s),p.set(l,n.size),s=d.getUint32(4),c.setUint32(n.size+16,s),zy(p,0,p.byteLength),s=new Uint8Array(e.byteLength+p.byteLength),n=Bo()||hu()?n.start:n.start+n.size,l=e.subarray(n),s.set(e.subarray(0,n)),s.set(p,n),s.set(l,n+p.byteLength),e=b(r),r=e.next();!r.done;r=e.next())r=r.value,zy(s,r.start,r.size+p.byteLength);return p=wt(s,t.start),t=Hs(t),e=p.getUint32(t),p.setUint32(t,e+1),s}function zy(e,t,n){e=wt(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var uE=new Is(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function Li(e,t,n,r,s,l,c){this.M=e,this.Ha=t,this.sa=n,this.Hc=r===void 0?null:r,this.timescale=s===void 0?null:s,this.g=l===void 0?null:l,this.aesKey=c===void 0?null:c,this.mimeType=this.codecs=null}Li.prototype.Xb=function(){return this.Ha},Li.prototype.Ub=function(){return this.sa},Li.prototype.cd=function(){return this.g};function Hd(e,t){return e===t?!0:e&&t?e.Xb()==t.Xb()&&e.Ub()==t.Ub()&&ln(e.M().sort(),t.M().sort())&&Rn(e.cd(),t.cd()):e==t}we("shaka.media.InitSegmentReference",Li),Li.prototype.getEndByte=Li.prototype.Ub,Li.prototype.getStartByte=Li.prototype.Xb;function ft(e,t,n,r,s,l,c,d,p,w,T,E,I,A,R,D){for(w=w===void 0?[]:w,A=A===void 0?Mr:A,this.startTime=e,this.j=this.endTime=t,this.F=n,this.Ha=r,this.sa=s,this.$=l,this.timestampOffset=c,this.appendWindowStart=d,this.appendWindowEnd=p,this.g=w,this.tilesLayout=T===void 0?"":T,this.B=E===void 0?null:E,this.h=I===void 0?null:I,this.status=A,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=R===void 0?null:R,this.A=null,this.i=0,this.o=D===void 0?!1:D,this.G=this.s=!1,e=b(this.g),t=e.next();!t.done;t=e.next())t.value.Kg();this.o&&this.g.length&&this.g[this.g.length-1].Jg(),this.C=this.mimeType=this.codecs=null}S=ft.prototype,S.M=function(){return this.F()},S.getStartTime=function(){return this.startTime},S.Mh=function(){return this.endTime},S.Xb=function(){return this.Ha},S.Ub=function(){return this.sa},S.di=function(){return this.tilesLayout},S.ci=function(){return this.B},S.Yb=function(){return this.status},S.xi=function(){this.status=Hy},S.wf=function(){this.preload=!0},S.ri=function(){return this.preload},S.Xd=function(){this.l=!1},S.ni=function(){return this.l},S.Kg=function(){this.s=!0},S.pi=function(){return this.s},S.Jg=function(){this.G=!0},S.oi=function(){return this.G},S.Ig=function(){this.m=!0},S.ji=function(){return this.m},S.fh=function(e){this.A=e},S.bi=function(){return this.A},S.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=b(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},S.Vf=function(e){this.h==null?It("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},S.Zi=function(e){this.C=e},S.cd=function(){return this.C};function Vy(e,t){e.$=t,e=b(e.g);for(var n=e.next();!n.done;n=e.next())Vy(n.value,t)}we("shaka.media.SegmentReference",ft),ft.prototype.getSegmentData=ft.prototype.cd,ft.prototype.setSegmentData=ft.prototype.Zi,ft.prototype.syncAgainst=ft.prototype.Vf,ft.prototype.offset=ft.prototype.offset,ft.prototype.getThumbnailSprite=ft.prototype.bi,ft.prototype.setThumbnailSprite=ft.prototype.fh,ft.prototype.hasByterangeOptimization=ft.prototype.ji,ft.prototype.markAsByterangeOptimization=ft.prototype.Ig,ft.prototype.isLastPartial=ft.prototype.oi,ft.prototype.markAsLastPartial=ft.prototype.Jg,ft.prototype.isPartial=ft.prototype.pi,ft.prototype.markAsPartial=ft.prototype.Kg,ft.prototype.isIndependent=ft.prototype.ni,ft.prototype.markAsNonIndependent=ft.prototype.Xd,ft.prototype.isPreload=ft.prototype.ri,ft.prototype.markAsPreload=ft.prototype.wf,ft.prototype.markAsUnavailable=ft.prototype.xi,ft.prototype.getStatus=ft.prototype.Yb,ft.prototype.getTileDuration=ft.prototype.ci,ft.prototype.getTilesLayout=ft.prototype.di,ft.prototype.getEndByte=ft.prototype.Ub,ft.prototype.getStartByte=ft.prototype.Xb,ft.prototype.getEndTime=ft.prototype.Mh,ft.prototype.getStartTime=ft.prototype.getStartTime,ft.prototype.getUris=ft.prototype.M;var Mr=0,Hy=1;ft.Status={hj:Mr,Zj:Hy,Bj:2};function bu(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function Gd(e){return!e||bu(e)?null:e.length?e.end(e.length-1):null}function Wd(e,t){return!e||!e.length||bu(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function Gy(e,t){if(!e||!e.length||bu(e))return 0;var n=0;e=b(_r(e));for(var r=e.next();!r.done;r=e.next()){var s=r.value;r=s.start,s=s.end,s>t&&(n+=s-Math.max(r,t))}return n}function lE(e,t,n){return!e||!e.length||bu(e)?null:(e=_r(e).findIndex(function(r,s,l){return r.start>t&&(s==0||l[s-1].end-t<=n)}),0<=e?e:null)}function _r(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Xd(){}function Wy(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function Xy(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function qd(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function fE(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var r=fn(Ae(e.data,1,n)),s=e.data[2+n],l=e.data.subarray(3+n).indexOf(0);if(l===-1)return null;var c=fn(Ae(e.data,3+n,l)),d;return r==="-->"?d=fn(Ae(e.data,4+n+l)):d=ie(e.data.subarray(4+n+l)),t.mimeType=r,t.pictureType=s,t.description=c,t.data=d,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=fn(Ae(e.data,1,r)),e=fn(Ae(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(r=e.data.subarray(1).indexOf(0),r===-1)?null:(n=fn(Ae(e.data,1,r)),e=fn(Ae(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=fn(Ae(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=ie(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=fn(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=fn(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=ie(e.data),t):null}function is(e){for(var t=0,n=[];Wy(e,t);){var r=qd(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,r=t+r;t+10<r;){var s=e.subarray(t),l=qd(s,4);s={type:String.fromCharCode(s[0],s[1],s[2],s[3]),size:l,data:s.subarray(10,10+l)},(l=fE(s))&&n.push(l),t+=s.size+10}Xy(e,t)&&(t+=10)}return n}function Ws(e,t){for(var n=t=t===void 0?0:t,r=0;Wy(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=qd(e,t+6),Xy(e,t+10)&&(r+=10),t+=r;return 0<r?e.subarray(n,n+r):new Uint8Array([])}we("shaka.util.Id3Utils",Xd),Xd.getID3Data=Ws,Xd.getID3Frames=is;function qy(e,t){var n=null,r=null,s=null,l=e.P();return t&1&&(s=e.Nc()),t&2&&e.skip(4),t&8&&(n=e.P()),t&16&&(r=e.P()),{trackId:l,Yc:n,Id:r,ck:s}}function bf(e,t){return t==1?(t=e.P(),e=e.P(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.P()}}function Ef(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.P(),e.skip(4),e=e.la(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Ky(e,t,n){var r=e.P(),s=[],l=null;n&1&&(l=e.P()),n&4&&e.skip(4);for(var c=0;c<r;c++){var d={Jf:null,sampleSize:null,ne:null};n&256&&(d.Jf=e.P()),n&512&&(d.sampleSize=e.P()),n&1024&&e.skip(4),n&2048&&(d.ne=t==0?e.P():e.Sg()),s.push(d)}return{gk:r,Wg:s,Fh:l}}function Yy(e){e.skip(6),e.skip(2),e.skip(8);var t=e.la();return e.skip(2),e.skip(2),e.skip(2),e=e.la()+e.la()/65536,{channelCount:t,sampleRate:e}}function Qy(e){return e=e.P(),{codec:gf(e)}}function cE(e){var t=null,n=null,r=e.qb(4),s=String.fromCharCode(r[0]);if(s+=String.fromCharCode(r[1]),s+=String.fromCharCode(r[2]),s+=String.fromCharCode(r[3]),s==="nclx"){switch(e.la()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.la(),e.la(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,xd:n}}function Eu(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Di(e){return(10>e?"0":"")+e}function ir(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)2<=r&&e[r]==3&&e[r-1]==0&&e[r-2]==0||(t[n]=e[r],n++);this.j=Ae(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Kd(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);r!==0&&(n.set(e.j.subarray(t,t+r)),e.h=new en(n,0).P(),e.g=8*r,e.i-=r)}function Pi(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Kd(e)}e.h<<=t,e.g-=t}function _t(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Kd(e),n=t-n,0<n?r<<n|_t(e,n):r}function Yd(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Kd(e),t+Yd(e)}function Ei(e){Pi(e,1+Yd(e))}function He(e){var t=Yd(e);return _t(e,t+1)-1}function Xs(e){return e=He(e),1&e?1+e>>>1:-1*(e>>>1)}function it(e){return _t(e,1)===1}function Ht(e){return _t(e,8)}function kf(e,t){for(var n=8,r=8,s=0;s<t;s++)r!==0&&(r=Xs(e),r=(n+r+256)%256),n=r===0?n:r}function hE(e){return Ht(e),He(e),He(e)}we("shaka.util.ExpGolomb",ir);function rn(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.s=null}S=rn.prototype,S.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},S.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Zd(e)),n=e.length-(e.length+t)%188,r=!1,s=t;s<n;s+=188)if(e[s]==71){var l=!!(e[s+1]&64),c=((e[s+1]&31)<<8)+e[s+2];if(1<(e[s+3]&48)>>4){var d=s+5+e[s+4];if(d==s+188)continue}else d=s+4;switch(c){case 0:l&&(d+=e[d]+1),this.G=(e[d+10]&31)<<8|e[d+11];break;case 17:case 8191:break;case this.G:l&&(d+=e[d]+1),l=e,c={audio:-1,video:-1,Rd:-1,audioCodec:"",videoCodec:""};var p=d+3+((l[d+1]&15)<<8|l[d+2])-4;for(d+=12+((l[d+10]&15)<<8|l[d+11]);d<p;){var w=(l[d+1]&31)<<8|l[d+2],T=(l[d+3]&15)<<8|l[d+4];switch(l[d]){case 6:if(0<T)for(var E=d+5,I=T;2<I;){var A=l[E+1]+2;switch(l[E]){case 5:var R=Sd(l.subarray(E+2,E+A));c.audio==-1&&R==="Opus"?(c.audio=w,c.audioCodec="opus"):c.video==-1&&R==="AV01"&&(c.video=w,c.videoCodec="av1");break;case 106:c.audio==-1&&(c.audio=w,c.audioCodec="ac3");break;case 122:c.audio==-1&&(c.audio=w,c.audioCodec="ec3");break;case 124:c.audio==-1&&(c.audio=w,c.audioCodec="aac");break;case 127:c.audioCodec=="opus"&&(R=null,l[E+2]===128&&(R=l[E+3]),R!=null&&(this.F={channelCount:R&15?R&15:2,Ch:R,sampleRate:48e3}))}E+=A,I-=A}break;case 15:c.audio==-1&&(c.audio=w,c.audioCodec="aac");break;case 17:c.audio==-1&&(c.audio=w,c.audioCodec="aac-loas");break;case 21:c.Rd==-1&&(c.Rd=w);break;case 27:c.video==-1&&(c.video=w,c.videoCodec="avc");break;case 3:case 4:c.audio==-1&&(c.audio=w,c.audioCodec="mp3");break;case 36:c.video==-1&&(c.video=w,c.videoCodec="hvc");break;case 129:c.audio==-1&&(c.audio=w,c.audioCodec="ac3");break;case 132:case 135:c.audio==-1&&(c.audio=w,c.audioCodec="ec3")}d+=T+5}l=c,l.video!=-1&&(this.I=l.video,this.m=l.videoCodec),l.audio!=-1&&(this.B=l.audio,this.A=l.audioCodec),l.Rd!=-1&&(this.C=l.Rd),r&&!this.H&&(r=!1,s=t-188),this.H=!0;break;case this.I:d=e.subarray(d,s+188),l?this.j.push([d]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(d);break;case this.B:d=e.subarray(d,s+188),l?this.i.push([d]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(d);break;case this.C:d=e.subarray(d,s+188),l?this.l.push([d]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(d);break;default:r=!0}}return this};function Qd(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(r&192){var s=536870912*(t[9]&14)+4194304*(t[10]&255)+16384*(t[11]&254)+128*(t[12]&255)+(t[13]&254)/2;e.s==null&&(e.s=s),n.pts=Zy(s,e.s),e.s=n.pts,n.dts=n.pts,r&64&&(r=536870912*(t[14]&14)+4194304*(t[15]&255)+16384*(t[16]&254)+128*(t[17]&255)+(t[18]&254)/2,e.o==null&&(e.o=r),n.dts=Zy(r,e.o)),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}S.Ci=function(e){return Ot("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Cf(e)},S.Cf=function(e,t,n){var r=e.pts?e.pts/9e4:null;e=e.data;var s=e.byteLength,l=1;this.m=="hvc"&&(l=2);for(var c=n||0,d=[],p=-1,w=0,T,E=0;E<s;++E){var I=e[E];if(I){if(2<=c&&I==1){if(t&&!d.length&&p==-1&&(I=E-(3<c?3:c),n&&I!=0&&(I=e.subarray(0,I),t.data=An(t.data,I),t.fullData=An(t.fullData,I))),0<=p?(c=E-((3<c?3:c)+1),d.push({data:e.subarray(p+l,c+1),fullData:e.subarray(p,c+1),type:w,time:r})):t&&!d.length&&(p=E-c,0<p&&(p=e.subarray(0,p),t.data=An(t.data,p),t.fullData=An(t.fullData,p))),E>=s-l)return d;E++,p=E,w=this.m=="hvc"?e[E]>>1&63:e[E]&31}c=0}else c++;E>=s-1&&0<=p&&0<=c&&(T={data:e.subarray(p+l,s),fullData:e.subarray(p,s),type:w,time:r})}return T&&d.push(T),!d.length&&t&&(t.data=An(t.data,e),t.fullData=An(t.fullData,e)),d},S.getMetadata=function(){for(var e=[],t=b(this.l),n=t.next();!n.done;n=t.next())n=An.apply(gi,_(n.value)),(n=Qd(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:is(n.data),dts:n.dts,pts:n.pts});return e},S.Tb=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=b(this.i),n=t.next();!n.done;n=t.next()){var r=An.apply(gi,_(n.value)),s=Qd(this,r);n=this.h.length?this.h[this.h.length-1]:null,s&&s.pts!=null&&s.dts!=null&&(!n||n.pts!=s.pts&&n.dts!=s.dts)?(this.h.length&&s.dts<(n.dts||0)&&(e=!0),this.h.push(s)):this.h.length&&(r=s?s.data:r)&&(n=this.h.pop(),n.data=An(n.data,r),this.h.push(n))}e&&(this.h=this.h.sort(function(l,c){var d=(l.pts||0)-(c.pts||0);return(l.dts||0)-(c.dts||0)||d}))}return this.h},S.Fc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=b(this.j),r=n.next();!r.done;r=n.next()){var s=An.apply(gi,_(r.value)),l=Qd(this,s);r=this.g.length?this.g[this.g.length-1]:null,l&&l.pts!=null&&l.dts!=null&&(!r||r.pts!=l.pts&&r.dts!=l.dts)?(this.g.length&&l.dts<(r.dts||0)&&(t=!0),this.g.push(l)):this.g.length&&(s=l?l.data:s)&&(r=this.g.pop(),r.data=An(r.data,s),this.g.push(r))}if(e){for(n=[],r=b(this.g),s=r.next();!s.done;s=r.next())if(s=s.value,s.nalus=this.Cf(s,c,void 0),s.nalus.length){n.push(s);var c=s.nalus[s.nalus.length-1]}this.g=n}t&&(this.g=this.g.sort(function(d,p){var w=(d.pts||0)-(p.pts||0);return(d.dts||0)-(p.dts||0)||w}))}return e?this.g:(e=this.g,this.g=[],e)},S.getStartTime=function(e){if(e=="audio"){e=null;var t=this.Tb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.Fc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},S.$c=function(){return{audio:this.A,video:this.m}},S.Pd=function(){for(var e=[],t=b(this.Fc()),n=t.next();!n.done;n=t.next())e.push.apply(e,_(n.value.nalus));return e},S.gi=function(){Ot("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.kf();return{height:e.height,width:e.width}},S.kf=function(){return this.m=="hvc"?pE(this):dE(this)};function dE(e){var t={height:null,width:null,codec:null};if(e=e.Pd(),!e.length||(e=e.find(function(I){return I.type==7}),!e))return t;e=new ir(e.data);var n=Ht(e),r=Ht(e),s=Ht(e);if(Ei(e),mE.includes(n)){var l=He(e);if(l===3&&Pi(e,1),Ei(e),Ei(e),Pi(e,1),it(e)){l=l!==3?8:12;for(var c=0;c<l;c++)it(e)&&(6>c?kf(e,16):kf(e,64))}}if(Ei(e),l=He(e),l===0)He(e);else if(l===1)for(Pi(e,1),Ei(e),Ei(e),l=He(e),c=0;c<l;c++)Ei(e);Ei(e),Pi(e,1),l=He(e),c=He(e);var d=_t(e,1);d===0&&Pi(e,1),Pi(e,1);var p=0,w=0,T=0,E=0;return it(e)&&(p=He(e),w=He(e),T=He(e),E=He(e)),t.height=String((2-d)*(c+1)*16-2*T-2*E),t.width=String(16*(l+1)-2*p-2*w),t.codec="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+s.toString(16).toUpperCase()).slice(-2),t}function pE(e){var t={height:null,width:null,codec:null};if(e=e.Pd(),!e.length||(e=e.find(function(N){return N.type==33}),!e))return t;var n=new ir(e.fullData,!0);Ht(n),Ht(n),_t(n,4);var r=_t(n,3);it(n);var s=_t(n,2),l=_t(n,1),c=_t(n,5),d=_t(n,32);e=Ht(n);for(var p=Ht(n),w=Ht(n),T=Ht(n),E=Ht(n),I=Ht(n),A=Ht(n),R=[],D=[],L=0;L<r;L++)R.push(it(n)),D.push(it(n));if(0<r)for(L=r;8>L;L++)_t(n,2);for(L=0;L<r;L++)R[L]&&_t(n,88),D[L]&&Ht(n);He(n),r=He(n),r==3&&_t(n,1),R=He(n),D=He(n);var F=L=0,U=0,q=0;return it(n)&&(L+=He(n),F+=He(n),U+=He(n),q+=He(n)),t.width=String(R-(L+F)*(r===1||r===2?2:1)),t.height=String(D-(U+q)*(r===1?2:1)),n=function(N){for(var H=0,Y=0;32>Y;Y++)H|=(N>>Y&1)<<31-Y;return H>>>0}(d),l=l==1?"H":"L",s="hvc1"+("."+["","A","B","C"][s]+c),s+="."+n.toString(16).toUpperCase(),s+="."+l+A,I&&(s+="."+I.toString(16).toUpperCase()),E&&(s+="."+E.toString(16).toUpperCase()),T&&(s+="."+T.toString(16).toUpperCase()),w&&(s+="."+w.toString(16).toUpperCase()),p&&(s+="."+p.toString(16).toUpperCase()),e&&(s+="."+e.toString(16).toUpperCase()),t.codec=s,t}function Zy(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function ku(e){return!(0>Zd(e))}function Zd(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}we("shaka.util.TsParser",rn),rn.syncOffset=Zd,rn.probe=ku,rn.prototype.getVideoInfo=rn.prototype.kf,rn.prototype.getVideoResolution=rn.prototype.gi,rn.prototype.getVideoNalus=rn.prototype.Pd,rn.prototype.getCodecs=rn.prototype.$c,rn.prototype.getStartTime=rn.prototype.getStartTime,rn.prototype.getVideoData=rn.prototype.Fc,rn.prototype.getAudioData=rn.prototype.Tb,rn.prototype.getMetadata=rn.prototype.getMetadata,rn.prototype.parseNalus=rn.prototype.Cf,rn.prototype.parseAvcNalus=rn.prototype.Ci,rn.prototype.parse=rn.prototype.parse,rn.prototype.clearData=rn.prototype.clearData,rn.Timescale=9e4;var mE=[100,110,122,244,44,83,86,118,128,138,139,134];function Au(e,t,n){this.g=null,this.o=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&je("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Ot("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{je("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(je("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||je(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Jy(e){e.g&&e.i.classList.add("shaka-hidden")}Au.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function e1(e,t,n){var r=0,s=-1;switch(t.mimeType){case"video/webm":r=1;break;case"video/mp4":r=2}switch(n){case"DASH":s=1;break;case"HLS":s=0}e.g&&(e.o=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r),e.j||e.g.setStreamingFormat(s))}we("shaka.lcevc.Dec",Au),Au.prototype.release=Au.prototype.release;function t1(e,t,n,r){var s=this;this.i=e,this.da=n,this.A=null,this.F=t,this.h={},this.G={},this.Da={},this.g=null,this.fa=!1,this.Z=r||null,this.l={},this.s=new Ct,this.j={},this.H=null,this.L=new Zt,this.N="",this.qa=!1,this.m=n1(this,this.L),this.C=!1,this.I=new zs(function(){return yE(s)}),this.B=!1,this.ba="UNKNOWN",this.Ea=this.Fa=!1,this.za=new Zt,this.o=!1,this.xa=!0,this.pa=this.R=this.ya=this.U=this.K=this.ea=null,this.oa=new Zt}function n1(e,t){if(h.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.s.D(n,"startstreaming",function(){e.xa=!0}),e.s.D(n,"endstreaming",function(){e.xa=!1}),e.s.ha(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.s.ha(e.i,"playing",function(){e.qa=!0}),e.N=Rf(n),e.i.src=e.N,n}return n=new MediaSource,e.s.ha(n,"sourceopen",function(){URL.revokeObjectURL(e.N),t.resolve()}),e.s.ha(e.i,"playing",function(){e.qa=!0}),e.N=Rf(n),e.i.src=e.N,n}function gE(e,t){var n,r,s,l,c,d,p,w,T,E,I;return z(function(A){if(A.g==1)return e.createSegmentIndex?k(A,e.createSegmentIndex(),2):A.u(2);if(!e.segmentIndex)return A.return(!1);if(e.segmentIndex.getNumReferences()==0)return A.return(!0);for(n=zn,r=new Set,s=b(e.segmentIndex),l=s.next();!l.done;l=s.next())if(c=l.value,d=c.mimeType||e.mimeType||"",p=c.codecs||e.codecs||"",w=d+":"+p,!r.has(w)){if(r.add(w),t==n.ua){if(T=Vn(d,p),!pu(T))return A.return(!1)}else if(t==n.ga?p=gu(p):t==n.X&&(p=Ns(p,d)),E=ob(e,d,p),I=Zr(d,p),!ct(E)&&!At(I))return A.return(!1)}return A.return(!0)})}S=t1.prototype,S.destroy=function(){return this.I.destroy()};function yE(e){var t,n,r,s,l,c,d,p;return z(function(w){if(w.g==1){t=[];for(n in e.l)for(r=e.l[n],s=r[0],e.l[n]=r.slice(0,1),s&&t.push(s.p.catch(Bg)),l=b(r.slice(1)),c=l.next();!c.done;c=l.next())d=c.value,d.p.reject(new re(2,7,7003,void 0));e.g&&t.push(e.g.destroy()),e.F&&t.push(e.F.destroy());for(p in e.j)t.push(e.j[p].destroy());return k(w,Promise.all(t),2)}e.s&&(e.s.release(),e.s=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.A=null,e.m=null,e.g=null,e.F=null,e.h={},e.j={},e.H=null,e.l={},e.Z=null,e.K=null,e.da=null,V(w)})}S.init=function(e,t,n,r){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,r=r===void 0?!1:r;var s=this,l,c,d,p,w;return z(function(T){switch(T.g){case 1:return l=zn,k(T,s.L,2);case 2:s.B=t,s.ba=n,s.Fa=r,s.Ea=!s.B&&s.ba=="HLS"&&!s.Fa,s.K=null,c=b(e.keys()),d=c.next();case 3:if(d.done){T.u(0);break}return p=d.value,w=e.get(p),k(T,Af(s,p,w,w.codecs),6);case 6:s.o?(s.l[l.X]=[],s.l[l.ga]=[]):s.l[p]=[],d=c.next(),T.u(3)}})};function Af(e,t,n,r){var s,l,c,d,p,w,T,E,I,A,R,D;return z(function(L){switch(L.g){case 1:return s=zn,l=et,c=Je,k(L,gE(n,t),2);case 2:if(c.call(l,L.h,"Type negotiation should happen before MediaSourceEngine.init!"),d=Vn(n.mimeType,r),t==s.ua){If(e,d,e.B,n.external),L.u(0);break}if(p=e.A.forceTransmux,(!ct(d)||!e.B&&kr.includes(d))&&(p=!0),w=Zr(n.mimeType,r),!p){L.u(4);break}if(T=_i(s.X,(r||"").split(",")),E=_i(s.ga,(r||"").split(",")),!T||!E){L.u(5);break}return e.o=!0,k(L,Af(e,s.X,n,T),6);case 6:return k(L,Af(e,s.ga,n,E),7);case 7:return L.return();case 5:(I=At(w))&&(A=I(),e.j[t]=A,d=A.convertCodecs(t,w));case 4:R=d+e.A.addExtraFeaturesToSourceBuffer(d),Jt(e.I);try{D=e.m.addSourceBuffer(R)}catch(F){throw new re(2,3,3015,F,"The mediaSource_ status was "+e.m.readyState+" expected 'open'",null)}e.B&&(D.mode=ME),e.s.D(D,"error",function(){var F=e.l[t][0];F.p.reject(new re(2,3,3014,e.i.error?e.i.error.code:0,F.uri))}),e.s.D(D,"updateend",function(){return or(e,t)}),e.h[t]=D,e.G[t]=d,e.Da[t]=!!n.drmInfos.length,V(L)}})}S.configure=function(e){this.A=e,this.g&&(this.g.A=e.modifyCueCallback)};function If(e,t,n,r){e.g||(e.g=new Qo(e.F),e.g&&(e.g.A=e.A.modifyCueCallback));var s=e.g;r=r||e.fa,e=e.ba,t=="application/cea-608"||t=="application/cea-708"?s.i=null:(s.i=(0,Hn[t])(),s.i.setSequenceMode?s.i.setSequenceMode(n):Ot("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),s.i.setManifestType?s.i.setManifestType(e):Ot("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),s.B=r)}function i1(e){return e.C?!1:e.m?e.m.readyState=="ended":!0}function Jd(e,t){return e.C||!Object.keys(e.h).length?e=null:t==Ut?e=e.g.g:(e=qs(e,t),e=!e||bu(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Iu(e,t){return e.C?null:t==Ut?e.g.h:Gd(qs(e,t))}function vE(e,t,n){return e.C?0:t==Ut?(e=e.g,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=qs(e,t),Gy(e,n))}S.wb=function(){var e={total:this.C?[]:_r(this.i.buffered),audio:this.C?[]:_r(qs(this,"audio")),video:this.C?[]:_r(qs(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function qs(e,t){try{return e.h[t].buffered}catch{return null}}function xE(e,t,n,r,s,l){var c=null,d=Ae(n);if(kr.includes(s))l=is(d),l.length&&r&&((t=l.find(function(E){return E.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(c=Math.round(t.data)/1e3),e.da.onMetadata([{cueTime:r.startTime,data:d,frames:l,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(s.includes("/mp4")&&r&&r.timestampOffset==0&&r.$&&r.$.timescale){var p=r.$.timescale;if(!isNaN(p)){var w=0,T=!1;new tn().box("moof",Rt).box("traf",Rt).S("tfdt",function(E){w=bf(E.reader,E.version).baseMediaDecodeTime/p,T=!0,E.parser.stop()}).parse(n,!0),T&&(c=w)}}else!s.includes("/mp4")&&!s.includes("/webm")&&ku(d)&&(e.K?e.K.clearData():e.K=new rn,d=e.K.parse(d),t=d.getStartTime(t),t!=null&&(c=t),d=d.getMetadata(),d.length)&&e.da.onMetadata(d,l,r?r.endTime:null);return c}function Mf(e,t,n,r,s,l,c,d,p,w){c=c===void 0?!1:c,d=d===void 0?!1:d,p=p===void 0?!1:p,w=w===void 0?!1:w;var T,E,I,A,R,D,L,F,U,q,N,H,Y,oe;return z(function(ae){switch(ae.g){case 1:if(T=zn,t!=T.ua){ae.u(2);break}if(!e.B){ae.u(3);break}return k(ae,e.za,4);case 4:E=ae.h,e.g.s=E;case 3:return k(ae,sb(e.g,n,r?r.startTime:null,r?r.endTime:null,r?r.M()[0]:null),5);case 5:return ae.return();case 2:if(w||!e.o){ae.u(6);break}return k(ae,Mf(e,T.X,n,r,s,l,c,d,p,!0),7);case 7:return k(ae,Mf(e,T.ga,n,r,s,l,c,d,p,!0),8);case 8:return ae.return();case 6:if(!e.h[t])return ae.return();if(I=e.h[t].timestampOffset,A=e.G[t],e.j[t]&&(A=e.j[t].getOriginalMimeType()),r&&(R=xE(e,t,n,r,A,I),R!=null&&(e.U==null&&t==T.ga&&(e.U=R,e.ya=r.startTime,e.R!=null&&(D=0,e.ya==e.pa&&(D=e.U-e.R),e.oa.resolve(D))),e.R==null&&t==T.X&&(e.R=R,e.pa=r.startTime,e.U!=null&&(L=0,e.ya==e.pa&&(L=e.U-e.R),e.oa.resolve(L))),F=r.startTime-R,U=Math.abs(I-F),(.001<=U||c||d)&&(!p||0<F||!I)&&(I=F,e.Ea&&(Zn(e,t,function(){return Ks(e,t)},null),Zn(e,t,function(){return Ys(e,t,I)},null))),q=t==T.ga||!(T.ga in e.h),e.B&&q&&e.za.resolve(I))),l&&t==T.ga&&(e.g||If(e,"application/cea-608",e.B,!1),e.H||(N=A.split(";",1)[0],e.H=new _e(N)),r?(H=e.H.i(n),H.length&&ub(e.g,H,r.startTime,r.endTime,I)):e.H.init(n,d)),!e.j[t]){ae.u(9);break}return k(ae,e.j[t].transmux(n,s,r,e.m.duration,t),10);case 10:n=ae.h;case 9:if(n=bE(e,n,r?r.startTime:null,t,r?r.M()[0]:null),!r||!e.B||t==T.ua){ae.u(11);break}if(!c&&!d){ae.u(11);break}if(Y=r.startTime,e.ba!="HLS"||e.o||t!=T.X||!e.h[T.ga]){ae.u(13);break}return k(ae,e.oa,14);case 14:oe=ae.h,.1<Math.abs(oe)&&(Y-=oe);case 13:Zn(e,t,function(){return Ks(e,t)},null),Zn(e,t,function(){return Ys(e,t,Y)},null);case 11:return k(ae,Zn(e,t,function(){var me=n;if(t=="video"&&e.Z){var ue=e.Z;ue.g&&ue.g.appendBuffer(me,"video",ue.o,-I)}e.h[t].appendBuffer(me)},r?r.M()[0]:null),15);case 15:V(ae)}})}function wE(e,t){var n=Iu(e,"video")||0;Ng(e.g,t,n)}function SE(e){e.g&&Ng(e.g,"",0)}S.remove=function(e,t,n){var r=this,s;return z(function(l){return l.g==1?(s=zn,e==s.ua?k(l,r.g.remove(t,n),0):k(l,Zn(r,e,function(){return _f(r,e,t,n)},null),4)):r.o?k(l,Zn(r,s.X,function(){return _f(r,s.X,t,n)},null),0):l.u(0)})};function o1(e,t){var n;return z(function(r){return r.g==1?(n=zn,t==n.ua?e.g?k(r,e.g.remove(0,1/0),0):r.return():k(r,Zn(e,t,function(){return _f(e,t,0,e.m.duration)},null),4)):e.o?k(r,Zn(e,n.X,function(){return _f(e,n.X,0,e.m.duration)},null),0):r.u(0)})}S.flush=function(e){var t=this,n;return z(function(r){return r.g==1?(n=zn,e==n.ua?r.return():k(r,Zn(t,e,function(){t.i.currentTime-=.001,or(t,e)},null),2)):t.o?k(r,Zn(t,n.X,function(){var s=n.X;t.i.currentTime-=.001,or(t,s)},null),0):r.u(0)})};function CE(e,t,n,r,s,l,c,d,p){var w,T,E;return z(function(I){return I.g==1?(w=zn,t==w.ua?(l||(e.g.s=n),ab(e.g,r,s),I.return()):(T=[],k(I,AE(e,t,c,d,p),2))):(E=I.h,E||(T.push(Zn(e,t,function(){return Ks(e,t)},null)),e.o&&T.push(Zn(e,w.X,function(){return Ks(e,w.X)},null))),l||(T.push(Zn(e,t,function(){return Ys(e,t,n)},null)),e.o&&T.push(Zn(e,w.X,function(){return Ys(e,w.X,n)},null))),T.push(Zn(e,t,function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=s,e.h[t].appendWindowStart=r,or(e,t)},null)),e.o&&T.push(Zn(e,w.X,function(){var A=w.X;e.h[A].appendWindowStart=0,e.h[A].appendWindowEnd=s,e.h[A].appendWindowStart=r,or(e,A)},null)),k(I,Promise.all(T),0))})}function TE(e,t,n){var r;return z(function(s){return s.g==1?(r=zn,t==r.ua?s.return():(t==r.ga&&(e.za=new Zt),Zn(e,t,function(){return Ks(e,t)},null),e.o&&Zn(e,r.X,function(){return Ks(e,r.X)},null),k(s,Zn(e,t,function(){return Ys(e,t,n)},null),2))):e.o?k(s,Zn(e,r.X,function(){return Ys(e,r.X,n)},null),0):s.u(0)})}S.endOfStream=function(e){var t=this;return z(function(n){return k(n,ep(t,function(){i1(t)||t.m.readyState==="closed"||(e?t.m.endOfStream(e):t.m.endOfStream())}),0)})},S.Za=function(e){var t=this;return z(function(n){return k(n,ep(t,function(){if(e<t.m.duration)for(var r in t.h){var s={start:function(){},p:new Zt,uri:null};t.l[r].unshift(s)}t.m.duration=e,t.ea=e}),0)})},S.getDuration=function(){return this.m.duration};function _f(e,t,n,r){r<=n?or(e,t):e.h[t].remove(n,r)}function Ks(e,t){var n=e.h[t].appendWindowStart,r=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=r,or(e,t)}function Ys(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,or(e,t)}function or(e,t){if(!e.C){var n=e.l[t][0];n&&(n.p.resolve(),tp(e,t))}}function Zn(e,t,n,r){return Jt(e.I),n={start:n,p:new Zt,uri:r},e.l[t].push(n),e.l[t].length==1&&r1(e,t),n.p}function ep(e,t){var n,r,s,l,c,d,p;return z(function(w){switch(w.g){case 1:Jt(e.I),n=[],r={};for(s in e.h)r={ready:void 0},r.ready=new Zt,l={start:function(T){return function(){return T.ready.resolve()}}(r),p:r.ready,uri:null},e.l[s].push(l),n.push(r.ready),e.l[s].length==1&&l.start();return Q(w,2),k(w,Promise.all(n),4);case 4:J(w,3);break;case 2:throw c=te(w),c;case 3:return Q(w,5,6),k(w,t(),6);case 6:W(w);for(d in e.h)tp(e,d);Z(w,0);break;case 5:throw p=te(w),new re(2,3,3015,p,e.i.error||"No error in the media element",null)}})}function tp(e,t){e.l[t].shift(),r1(e,t)}function r1(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(r){r.name=="QuotaExceededError"?n.p.reject(new re(2,3,3017,t)):n.p.reject(new re(2,3,3015,r,e.i.error||"No error in the media element",n.uri)),tp(e,t)}}function bE(e,t,n,r,s){var l=n==null,c=e.Da[r];return n=e.da.Qh(),(l=e.A.insertFakeEncryptionInInit&&l&&c)&&(n=md(n),l=jo()||Bo()||yd()||hu()&&vd()&&n),l&&sf(e.G[r])=="mp4"&&(t=sE(t,s)),t}function EE(e,t,n,r){return Zn(e,t,function(){t!==Ut&&(Pn()&&(e.j[t]&&(e.j[t].destroy(),delete e.j[t]),r&&(e.j[t]=r),e.h[t].changeType(n+e.A.addExtraFeaturesToSourceBuffer(n)),e.G[t]=n),or(e,t))},null)}function kE(e,t){var n,r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me;return z(function(ue){switch(ue.g){case 1:n=zn,e.C=!0,e.o=!1,r=e.i.currentTime,s=e.i.autoplay,l=e.i.paused,e.qa&&(e.i.autoplay=!1),se(ue,2),e.s.Ra(),c=[];for(d in e.j)c.push(e.j[d].destroy());for(p in e.l)for(w=e.l[p],T=w[0],e.l[p]=w.slice(0,1),T&&c.push(T.p.catch(Bg)),E=b(w.slice(1)),I=E.next();!I.done;I=E.next())A=I.value,A.p.reject(new re(2,7,7003,void 0));for(R in e.h){D=e.h[R];try{e.m.removeSourceBuffer(D)}catch{}}return k(ue,Promise.all(c),4);case 4:return e.j={},e.h={},L=e.m.duration,e.L=new Zt,e.m=n1(e,e.L),k(ue,e.L,5);case 5:!isNaN(L)&&L?e.m.duration=L:!isNaN(e.ea)&&e.ea&&(e.m.duration=e.ea),F=new Zt,U=e.m.sourceBuffers,q=t.size,N=0,H=function(){N++,N===q&&(F.resolve(),e.s.jb(U,"addsourcebuffer",H))},e.s.D(U,"addsourcebuffer",H),Y=b(t.keys()),oe=Y.next();case 6:return oe.done?(e.i.currentTime=r,k(ue,F,2)):(ae=oe.value,me=t.get(ae),k(ue,Af(e,ae,me,me.codecs),9));case 9:e.o?(e.l[n.X]=[],e.l[n.ga]=[]):e.l[ae]=[],oe=Y.next(),ue.u(6);break;case 2:W(ue),e.C=!1,Jt(e.I),e.s.ha(e.i,"canplaythrough",function(){e.I.g||(e.i.autoplay=s,l||e.i.play())}),Z(ue,0)}})}function s1(e,t){return ep(e,function(){return kE(e,t)})}function AE(e,t,n,r,s){var l,c,d,p,w,T,E,I,A,R,D,L,F,U,q;return z(function(N){return N.g==1?(l=zn,t==l.ua?N.return(!1):(c=bi(Wi(e.G[t])),d=yo(e.G[t]),w=!1,T=Vn(n,r),E=e.A.forceTransmux,(!ct(T)||!e.B&&kr.includes(T))&&(E=!0),E&&(I=Zr(n,r),A=At(I))&&(p=A(),R=_i(l.X,(r||"").split(",")),D=_i(l.ga,(r||"").split(",")),R&&D?(w=!0,L=D,t==l.X&&(L=R),T=p.convertCodecs(t,Zr(n,L))):T=p.convertCodecs(t,I)),F=bi(Wi(T)),U=yo(T),c===F&&d===U?(e.j[t]&&!p?(e.j[t].destroy(),delete e.j[t]):!e.j[t]&&p?e.j[t]=p:p&&(e.j[t]&&e.j[t].transmux!=p.transmux?(e.j[t].destroy(),delete e.j[t],e.j[t]=p):p.destroy()),N.return(!1)):(q=!0,(e.o||w&&p&&!e.j[t])&&(q=!1),q&&e.A.codecSwitchingStrategy==="smooth"&&Pn()?k(N,EE(e,t,T,p),3):(p&&p.destroy(),k(N,s1(e,s),3))))):N.return(!0)})}function IE(e,t,n,r){if(t==Ut)var s=!1;else{s=bi(Wi(e.G[t]));var l=yo(e.G[t]),c=Vn(n,r),d=e.A.forceTransmux;(!ct(c)||!e.B&&kr.includes(c))&&(d=!0),n=Zr(n,r),d&&(d=At(n))&&(d=d(),c=d.convertCodecs(t,n),d.destroy()),t=bi(Wi(c)),c=yo(c),s=s!==t||l!==c}return s?e.A.codecSwitchingStrategy!=="smooth"||!Pn()||e.o:!1}var Rf=h.URL.createObjectURL,ME="sequence";function st(e,t,n){this.i=e,this.A=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.B=0,this.G=!0,this.H=0,this.C=n===void 0?!0:n,this.F=0,this.s=!1,this.m=e}S=st.prototype,S.getDuration=function(){return this.j},S.Sh=function(){return this.g},S.dh=function(e){this.i=e},S.Za=function(e){this.j=e},S.Xh=function(){return this.i},S.ah=function(e){this.B=e},S.sc=function(e){this.G=e},S.pe=function(e){this.o=e},S.Od=function(){return this.o},S.Of=function(e){this.A=e},S.Lh=function(){return this.A},S.Ng=function(e,t){if(e.length!=0){var n=(Date.now()+this.B)/1e3;if(e=e.filter(function(s){return s.start+t<n}),e.length!=0){var r=e[e.length-1].end+t;this.ce(e[0].start+t),this.g=e.reduce(function(s,l){return Math.max(s,l.end-l.start)},this.g),this.h=Math.max(this.h,r),this.i!=null&&this.C&&!this.s&&(this.i=n-this.h-this.g)}}},S.sd=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.B)/1e3;e=b(e);for(var s=e.next();!s.done;s=e.next())s=s.value,r<s.startTime||(t=Math.min(t,s.startTime),n=Math.max(n,s.endTime),this.g=Math.max(this.g,s.endTime-s.startTime));this.ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.C&&!this.s&&(this.i=r-this.h-this.g)}},S.Th=function(){return this.h},S.Wd=function(){this.s=!0},S.si=function(){return this.s},S.bh=function(e){this.m=e},S.Ph=function(){return this.m},S.ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},S.xf=function(e){this.g=Math.max(this.g,e)},S.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},S.V=function(){return this.j==1/0&&!this.G},S.kc=function(){return this.j!=1/0&&!this.G},S.mb=function(){return Math.max(this.H,this.Wb()-this.o)},S.hh=function(e){this.H=e},S.Wb=function(){return this.V()||this.kc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},S.bd=function(e){var t=Math.max(this.l,this.H);return this.o==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Wb()-this.o+e,this.yb()))},S.Vb=function(){return this.bd(0)},S.yb=function(){return Math.max(0,this.Wb()-(this.V()||this.kc()?this.A:0))},S.nh=function(){return!(this.i==null||this.h!=null&&this.C)},S.$g=function(e){this.F=e},S.Jh=function(){return this.F},we("shaka.media.PresentationTimeline",st),st.prototype.getAvailabilityTimeOffset=st.prototype.Jh,st.prototype.setAvailabilityTimeOffset=st.prototype.$g,st.prototype.usingPresentationStartTime=st.prototype.nh,st.prototype.getSeekRangeEnd=st.prototype.yb,st.prototype.getSeekRangeStart=st.prototype.Vb,st.prototype.getSafeSeekRangeStart=st.prototype.bd,st.prototype.getSegmentAvailabilityEnd=st.prototype.Wb,st.prototype.setUserSeekStart=st.prototype.hh,st.prototype.getSegmentAvailabilityStart=st.prototype.mb,st.prototype.isInProgress=st.prototype.kc,st.prototype.isLive=st.prototype.V,st.prototype.offset=st.prototype.offset,st.prototype.notifyMaxSegmentDuration=st.prototype.xf,st.prototype.notifyMinSegmentStartTime=st.prototype.ce,st.prototype.getInitialProgramDateTime=st.prototype.Ph,st.prototype.setInitialProgramDateTime=st.prototype.bh,st.prototype.isStartTimeLocked=st.prototype.si,st.prototype.lockStartTime=st.prototype.Wd,st.prototype.getMaxSegmentEndTime=st.prototype.Th,st.prototype.notifySegments=st.prototype.sd,st.prototype.notifyTimeRange=st.prototype.Ng,st.prototype.getDelay=st.prototype.Lh,st.prototype.setDelay=st.prototype.Of,st.prototype.getSegmentAvailabilityDuration=st.prototype.Od,st.prototype.setSegmentAvailabilityDuration=st.prototype.pe,st.prototype.setStatic=st.prototype.sc,st.prototype.setClockOffset=st.prototype.ah,st.prototype.getPresentationStartTime=st.prototype.Xh,st.prototype.setDuration=st.prototype.Za,st.prototype.setPresentationStartTime=st.prototype.dh,st.prototype.getMaxSegmentDuration=st.prototype.Sh,st.prototype.getDuration=st.prototype.getDuration;function a1(e,t,n){this.j=n,this.l=e,this.s=u1(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.A=t,this.i=function(){}}a1.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function _E(e,t){e.i=t}function RE(e){this.g=e}function u1(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=b(_r(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function np(e,t,n,r,s){var l=this;this.A=s,this.g=e,this.B=t,this.s=n,this.l=new Ct,this.j=!1,this.F=e.readyState,this.C=this.i=0,this.h=r,this.o=!1,this.l.D(e,"waiting",function(){return ip(l)}),this.m=new Mt(function(){ip(l)}).Sa(this.s.gapJumpTimerTime)}np.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.A=null},np.prototype.Af=function(){this.o=!0,ip(this)};function ip(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,r=u1(n),s=n.g.currentTime,l=Date.now()/1e3;(t.g!=s||t.s!=r)&&(t.m=l,t.g=s,t.s=r,t.h=!1),s=l-t.m,(r=s>=t.A&&r&&!t.h)&&(t.i(t.g,s),t.h=!0,t.g=n.g.currentTime,t.o++,t.j(new $e("stalldetected"))),t=!r}t&&(t=e.g.currentTime,n=e.g.buffered,r=lE(n,t,e.s.gapDetectionThreshold),r!=null&&(r!=0||e.o))&&(s=n.start(r),(navigator.userAgent.match(/Edge\//)||Bo())&&(s=Math.ceil(100*(s+.01))/100),s>=e.B.yb()||.001>s-t||(r!=0&&n.end(r-1),e.g.currentTime=s,t==e.i&&(e.i=s),e.C++,e.A(new $e("gapjumped"))))}}}function Qs(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=LE.value().get(t),n.ha(e,t,r))}var LE=new Is(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function l1(e,t,n,r){var s=this;this.g=e,this.m=t,this.s=n,this.l=null,this.j=function(){return s.l==null&&(s.l=r()),s.l},this.o=!1,this.h=new Ct,this.i=new d1(e),Qs(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){c1(s,s.j())})}l1.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function op(e){return e.o?e.g.currentTime:e.j()}function f1(e,t){0<e.g.readyState?p1(e.i,t):Qs(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){c1(e,e.j())})}function c1(e,t){.001>Math.abs(e.g.currentTime-t)?h1(e):(e.h.ha(e.g,"seeking",function(){h1(e)}),p1(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function h1(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.s(e.g.currentTime)}function d1(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new Mt(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}d1.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function p1(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Sa(.1)}function m1(e){this.h=e,this.j=!1,this.g=null,this.i=new Ct}S=m1.prototype,S.ready=function(){function e(){if(t.g==null||t.g==0&&t.h.duration!=1/0)t.j=!0;else{var n=t.h.currentTime,r=t.g;0>t.g&&(r=Math.max(0,n+t.g)),n!=r?(t.i.ha(t.h,"seeking",function(){t.j=!0}),t.h.currentTime=r):t.j=!0}}var t=this;Qs(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},S.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},S.Ee=function(e){this.g=this.j?this.g:e},S.yd=function(){return(this.j?this.h.currentTime:this.g)||0},S.gg=function(){return 0},S.fg=function(){return 0},S.Mg=function(){};function g1(e,t,n,r,s,l){var c=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.A=s,this.s=null,this.o=DE(e,n,l),this.j=new np(e,t.presentationTimeline,n,this.o,l),this.h=new l1(e,function(){e:{var d=c.j;d.j=!0,d.o=!1;var p=op(c.h);if(d=v1(c,p),.001<Math.abs(d-p)){if(p=!1,!Gi()||Gi()&&of())p=!0;else{var w=Date.now()/1e3;(!c.s||c.s<w-1)&&(c.s=w,p=!0)}if(p){f1(c.h,d),d=void 0;break e}}c.A(),d=void 0}return d},function(d){var p=c.j;p.g.seeking&&!p.j&&(p.j=!0,p.i=d)},function(){var d=r;return d==null?d=1/0>c.g.getDuration()?c.g.Vb():c.g.yb():0>d&&(d=c.g.yb()+d),y1(c,x1(c,d))}),this.m=new Mt(function(){if(c.i.readyState!=0&&!c.i.paused){var d=op(c.h),p=c.g.Vb(),w=c.g.yb();3>w-p&&(p=w-3),d<p&&(d=v1(c,d),c.i.currentTime=d)}})}S=g1.prototype,S.ready=function(){this.m.Sa(.25)},S.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.A=function(){}},S.Ee=function(e){f1(this.h,e)},S.yd=function(){var e=op(this.h);return 0<this.i.readyState&&!this.i.paused?x1(this,e):e},S.gg=function(){return this.o?this.o.o:0},S.fg=function(){return this.j.C},S.Mg=function(){this.j.Af()};function y1(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function v1(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),r=e.l.safeSeekOffset,s=e.g.Vb(),l=e.g.yb(),c=e.g.getDuration();3>l-s&&(s=l-3);var d=e.g.bd(n),p=e.g.bd(r);return n=e.g.bd(n+r),t>=c?y1(e,t):t>l?l:t<s?Wd(e.i.buffered,p)?p:n:t>=d||Wd(e.i.buffered,t)?t:n}function x1(e,t){var n=e.g.Vb();return t<n?n:(e=e.g.yb(),t>e?e:t)}function DE(e,t,n){if(!t.stallEnabled)return null;var r=t.stallSkip;return t=new a1(new RE(e),t.stallThreshold,n),_E(t,function(){r?e.currentTime+=r:(e.pause(),e.play())}),t}function Ft(e){this.O=e,this.l=null,this.i=0,this.m=!1}S=Ft.prototype,S.getNumReferences=function(){return this.O.length},S.getNumEvicted=function(){return this.i},S.release=function(){this.m||(this.O=[],this.l&&this.l.stop(),this.l=null)},S.yi=function(){this.m=!0},S.Hb=function(e){for(var t=b(this.O),n=t.next();!n.done;n=t.next())e(n.value)},S.find=function(e){for(var t=this.O.length-1,n=t;0<=n;--n){var r=this.O[n],s=n<t?this.O[n+1].startTime:r.endTime;if(e>=r.startTime&&e<s)return n+this.i}return this.O.length&&e<this.O[0].startTime?this.i:null},S.get=function(e){return this.O.length==0?null:(e-=this.i,0>e||e>=this.O.length?null:this.O[e])},S.offset=function(e){if(!this.m)for(var t=b(this.O),n=t.next();!n.done;n=t.next())n.value.offset(e)},S.Zd=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.O=this.O.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.O.push.apply(this.O,_(e))}},S.rd=function(e,t){var n=this;e=e.filter(function(r){return r.endTime>t&&(n.O.length==0||r.endTime>n.O[0].startTime)}),this.Zd(e),this.Ma(t)},S.Ma=function(e){if(!this.m){var t=this.O.length;this.O=this.O.filter(function(n){return n.endTime>e}),this.i+=t-this.O.length}},S.Bc=function(e,t,n){if(n=n===void 0?!1:n,!this.m){for(;this.O.length&&this.O[this.O.length-1].startTime>=t;)this.O.pop();for(;this.O.length&&this.O[0].endTime<=e;)this.O.shift(),n||this.i++;this.O.length!=0&&(e=this.O[this.O.length-1],t=new ft(e.startTime,t,e.F,e.Ha,e.sa,e.$,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.O[this.O.length-1]=t)}},S.ue=function(e,t){var n=this;this.m||(this.l&&this.l.stop(),this.l=new Mt(function(){var r=t();r?n.O.push.apply(n.O,_(r)):(n.l.stop(),n.l=null)}),this.l.Sa(e))},Ft.prototype[Symbol.iterator]=function(){return this.Ib(0)},Ft.prototype.Ib=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var r=this.find(e);if(r==null)return null;var s=this.get(r);n?r++:r--;var l=-1;if(s&&0<s.g.length)for(var c=s.g.length-1;0<=c;--c){var d=s.g[c];if(e>=d.startTime&&e<d.endTime){if(!t){for(;c&&!d.l;)c--,d=s.g[c];if(!d.l)return It("No independent partial segment found!"),null}n?r--:r++,l=c-1;break}}return new Xi(this,r,l,n)};function rp(e,t,n){return e=new ft(e,e+t,function(){return n},0,null,null,e,e,e+t),new Ft([e])}we("shaka.media.SegmentIndex",Ft),Ft.forSingleSegment=rp,Ft.prototype.getIteratorForTime=Ft.prototype.Ib,Ft.prototype.updateEvery=Ft.prototype.ue,Ft.prototype.fit=Ft.prototype.Bc,Ft.prototype.evict=Ft.prototype.Ma,Ft.prototype.mergeAndEvict=Ft.prototype.rd,Ft.prototype.offset=Ft.prototype.offset,Ft.prototype.get=Ft.prototype.get,Ft.prototype.find=Ft.prototype.find,Ft.prototype.markImmutable=Ft.prototype.yi,Ft.prototype.release=Ft.prototype.release,Ft.prototype.getNumEvicted=Ft.prototype.getNumEvicted,Ft.prototype.getNumReferences=Ft.prototype.getNumReferences;function Xi(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}Xi.prototype.Sc=function(e){this.reverse=e},Xi.prototype.Eh=function(){return this.h},Xi.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.o&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Xi.prototype.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.o&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},we("shaka.media.SegmentIterator",Xi),Xi.prototype.next=Xi.prototype.next,Xi.prototype.current=Xi.prototype.current,Xi.prototype.currentPosition=Xi.prototype.Eh,Xi.prototype.setReverse=Xi.prototype.Sc;function In(){Ft.call(this,[]),this.g=[]}X(In,Ft),S=In.prototype,S.clone=function(){var e=new In;return e.g=this.g.slice(),e},S.release=function(){for(var e=b(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g=[]},S.Hb=function(e){for(var t=b(this.g),n=t.next();!n.done;n=t.next())n.value.Hb(e)},S.find=function(e){for(var t=0,n=b(this.g),r=n.next();!r.done;r=n.next()){r=r.value;var s=r.find(e);if(s!=null)return s+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},S.get=function(e){for(var t=0,n=b(this.g),r=n.next();!r.done;r=n.next()){r=r.value;var s=r.get(e-t);if(s)return s;s=r.getNumReferences(),t+=r.getNumEvicted()+s}return null},S.offset=function(){},S.Zd=function(){},S.Ma=function(){},S.rd=function(){},S.Bc=function(){},S.ue=function(){},we("shaka.media.MetaSegmentIndex",In),In.prototype.updateEvery=In.prototype.ue,In.prototype.fit=In.prototype.Bc,In.prototype.mergeAndEvict=In.prototype.rd,In.prototype.evict=In.prototype.Ma,In.prototype.merge=In.prototype.Zd,In.prototype.offset=In.prototype.offset,In.prototype.get=In.prototype.get,In.prototype.find=In.prototype.find,In.prototype.forEachTopLevelReference=In.prototype.Hb,In.prototype.release=In.prototype.release;function Mu(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Nd(),this.h=new Mt(function(){t.g.Lg(.25*t.i)})}Mu.prototype.release=function(){this.set(this.hc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Mu.prototype.set=function(e){this.i=e,w1(this)},Mu.prototype.hc=function(){return this.g.hc()};function w1(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Nd()!=t&&e.g.Rf(t);return}catch{}e.h.Sa(.25),e.g.Nd()!=0&&e.g.Rf(0)}function S1(e){var t=this;this.h=e,this.g=new Set,this.i=new Mt(function(){C1(t,!1)}).Sa(.25)}S1.prototype.release=function(){this.i.stop();for(var e=b(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function C1(e,t){for(var n=b(e.g),r=n.next();!r.done;r=n.next())r.value.j(e.h.currentTime,t)}function PE(){this.g=null,this.h=[]}function sp(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=b(e.h);for(var r=e.next();!r.done;r=e.next())r=r.value,n+=r.state==t?r.duration:0;return n}function OE(e){function t(l){return{timestamp:l.timestamp,state:l.state,duration:l.duration}}for(var n=[],r=b(e.h),s=r.next();!s.done;s=r.next())n.push(t(s.value));return e.g&&n.push(t(e.g)),n}function NE(){this.i=this.h=null,this.g=[]}function ap(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Lf(){this.Cd=this.Hg=this.A=this.B=this.I=this.C=this.s=this.j=this.H=this.m=this.i=this.U=this.Z=this.L=this.N=this.R=this.l=this.o=NaN,this.K=0,this.F=this.G=NaN,this.g=new PE,this.h=new NE}function Df(e,t,n,r){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.o=r}function UE(e,t){e.l=t,e=b(e.h.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function _u(e,t,n){if(n=n===void 0?!1:n,e.i.segmentIndex&&(e.g||(e.g=e.i.segmentIndex.Ib(t,!0,e.o)),e.g)){for(n&&e.g.next();e.h.size<e.m&&(t=e.g.next().value,!!t);)n=!0,t.preload&&t.sa!=null&&(n=!1),t.Yb()==2&&(n=!1),n&&t.$&&T1(e,t.$),n&&!e.h.has(t)&&(n=new lp(e.l),k1(n,t,e.i),e.h.set(t,n));up(e)}}function T1(e,t){if(e.i.segmentIndex&&!Array.from(e.j.keys()).some(function(r){return Hd(r,t)})){var n=new lp(e.l);k1(n,t,e.i),e.j.set(t,n)}}function b1(e,t){t=b(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&Ru(e,n)}function Lo(e){b1(e,e.h),b1(e,e.j),e.g=null}Df.prototype.Ma=function(e,t){t=t===void 0?!1:t;for(var n=b(this.h.keys()),r=n.next();!r.done;r=n.next())r=r.value,e>r.endTime&&Ru(this,r);t&&up(this)},Df.prototype.Sc=function(e){this.o=e,this.g&&this.g.Sc(e)};function up(e){for(var t=Array.from(e.h.keys()),n=b(e.j.keys()),r=n.next(),s={};!r.done;s={nf:void 0},r=n.next())s.nf=r.value,t.some(function(l){return function(c){return Hd(c.$,l.nf)}}(s))||Ru(e,s.nf)}function E1(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var r=n.pop();r&&Ru(e,r)}up(e)}function BE(e,t){t&&t!==e.i&&(Lo(e),e.i=t)}function Ru(e,t){var n=e.h;t instanceof Li&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function lp(e){this.g=e,this.fe=this.Uf=null}function k1(e,t,n){var r=new Uint8Array(0);e.fe=e.g(t,n,function(s){return z(function(l){if(l.g==1)return 0<r.byteLength?r=An(r,s):r=s,e.Uf?k(l,e.Uf(r),3):l.u(0);r=new Uint8Array(0),V(l)})})}lp.prototype.abort=function(){this.fe&&this.fe.abort()};function fp(e){Xt.call(this);var t=this;this.g=new Set,this.i=e,this.h=new Mt(function(){for(var n=t.i(),r=b(t.g),s=r.next();!s.done;s=r.next())s=s.value,s.endTime<n.start&&(t.g.delete(s),s=new $e("regionremove",new Map([["region",s]])),t.dispatchEvent(s))}).Sa(2)}X(fp,Xt),fp.prototype.release=function(){this.g.clear(),this.h.stop(),Xt.prototype.release.call(this)};function Pf(e){Xt.call(this),this.g=new Map,this.h=e}X(Pf,Xt),Pf.prototype.release=function(){this.g.clear(),Xt.prototype.release.call(this)};function jE(e,t){var n=e.g.get(t);return n||(n={ud:[],Pe:null,contentType:t},e.g.set(t,n)),n}function FE(e,t,n){var r=jE(e,t.contentType);$E(e,r),e={Hc:t,position:n},r=r.ud,t=r.findIndex(function(s){return s.position>=n}),0<=t?r.splice(t,r[t].position==n?1:0,e):r.push(e)}Pf.prototype.j=function(e){for(var t=b(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var r=n.Pe;e:{for(var s=n.ud,l=s.length-1;0<=l;l--){var c=s[l];if(c.position<=e){s=c.Hc;break e}}s=null}l=s&&!(r===s||r&&s&&r.bandwidth==s.bandwidth&&r.audioSamplingRate==s.audioSamplingRate&&r.codecs==s.codecs&&r.contentType==s.contentType&&r.frameRate==s.frameRate&&r.height==s.height&&r.mimeType==s.mimeType&&r.channelsCount==s.channelsCount&&r.pixelAspectRatio==s.pixelAspectRatio&&r.width==s.width),c=s&&r&&s.label&&r.label&&r.label!==s.label;var d=s&&r&&s.language&&r.language&&r.language!==s.language;r=s&&r&&s.roles&&r.roles&&!ln(r.roles,s.roles),(c||d||r)&&A1(this,e,s.contentType)&&(n.Pe=s,r=new $e("audiotrackchange",new Map([["quality",s],["position",e]])),this.dispatchEvent(r)),l&&A1(this,e,s.contentType)&&(n.Pe=s,JSON.stringify(s),n=new $e("qualitychange",new Map([["quality",s],["position",e]])),this.dispatchEvent(n))}};function A1(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function $E(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,r=e[e.length-1].end,s=t.ud;t.ud=s.filter(function(l,c){return!(l.position<=n&&c+1<s.length&&s[c+1].position<=n||l.position>=r)})}else t.ud=[]}function Of(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function Nf(e){var t=yo(e),n=t.split("/")[0];return e=Wi(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,xd:null,colorGamut:null}}function zE(e,t){function n(N){L=N.name;var H=N.reader;H.skip(24);var Y=H.la(),oe=H.la();H.skip(50),E=String(Y),T=String(oe),N.reader.na()&&Rt(N)}function r(N){var H=Yy(N.reader);I=H.channelCount,A=H.sampleRate,s(N.name)}function s(N){switch(N=N.toLowerCase(),N){case"avc1":case"avc3":c.push(N+".42E01E"),p=!0;break;case"hev1":case"hvc1":c.push(N+".1.6.L93.90"),p=!0;break;case"dvh1":case"dvhe":c.push(N+".05.04"),p=!0;break;case"vp09":c.push(N+".00.10.08"),p=!0;break;case"av01":c.push(N+".0.01M.08"),p=!0;break;case"mp4a":l.push("mp4a.40.2"),d=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":l.push(N),d=!0}}var l=[],c=[],d=!1,p=!1,w=null,T=null,E=null,I=null,A=null,R=null,D=null,L;if(new tn().box("moov",Rt).box("trak",Rt).box("mdia",Rt).S("mdhd",function(N){w=Ef(N.reader,N.version).language}).box("minf",Rt).box("stbl",Rt).S("stsd",Ar).box("mp4a",function(N){var H=Yy(N.reader);I=H.channelCount,A=H.sampleRate,N.reader.na()?Rt(N):s(N.name)}).box("esds",function(N){N=N.reader;for(var H="mp4a",Y,oe;N.na();){Y=N.T();for(var ae=N.T();ae&128;)ae=N.T();if(Y==3)N.la(),ae=N.T(),ae&128&&N.la(),ae&64&&N.skip(N.T()),ae&32&&N.la();else if(Y==4)oe=N.T(),N.skip(12);else if(Y==5)break}oe&&(H+="."+Eu(oe),Y==5&&N.na()&&(Y=N.T(),oe=(Y&248)>>3,oe===31&&N.na()&&(oe=32+((Y&7)<<3)+((N.T()&224)>>5)),H+="."+oe)),l.push(H),d=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("avc1",n).box("avc3",n).box("hev1",n).box("hvc1",n).box("dva1",n).box("dvav",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("avcC",function(N){var H=L||"";switch(L){case"dvav":H="avc3";break;case"dva1":H="avc1"}N=N.reader,N.skip(1),N=H+"."+Eu(N.T())+Eu(N.T())+Eu(N.T()),c.push(N),p=!0}).box("hvcC",function(N){var H=L||"";switch(L){case"dvh1":H="hvc1";break;case"dvhe":H="hev1"}var Y=N.reader;Y.skip(1),N=Y.T();var oe=["","A","B","C"][N>>6],ae=N&31,me=Y.P(),ue=(N&32)>>5?"H":"L";N=[Y.T(),Y.T(),Y.T(),Y.T(),Y.T(),Y.T()],Y=Y.T();for(var le=0,he=0;32>he&&(le|=me&1,he!=31);he++)le<<=1,me>>=1;for(H=H+("."+oe+ae)+("."+Eu(le,!0)),H+="."+ue+Y,oe="",ae=N.length;ae--;)((ue=N[ae])||oe)&&(oe="."+ue.toString(16).toUpperCase()+oe);H+=oe,c.push(H),p=!0}).box("dvcC",function(N){var H=L||"";switch(L){case"hvc1":H="dvh1";break;case"hev1":H="dvhe";break;case"avc1":H="dva1";break;case"avc3":H="dvav";break;case"av01":H="dav1"}var Y=N.reader;Y.skip(2),N=Y.T(),Y=Y.T(),c.push(H+"."+Di(N>>1&127)+"."+Di(N<<5&32|Y>>3&31)),p=!0}).box("dvvC",function(N){var H=L||"";switch(L){case"hvc1":H="dvh1";break;case"hev1":H="dvhe";break;case"avc1":H="dva1";break;case"avc3":H="dvav";break;case"av01":H="dav1"}var Y=N.reader;Y.skip(2),N=Y.T(),Y=Y.T(),c.push(H+"."+Di(N>>1&127)+"."+Di(N<<5&32|Y>>3&31)),p=!0}).S("vpcC",function(N){var H=L||"",Y=N.reader;N=Y.T();var oe=Y.T();Y=Y.T()>>4&15,c.push(H+"."+Di(N)+"."+Di(oe)+"."+Di(Y)),p=!0}).box("av1C",function(N){var H=L||"";switch(L){case"dav1":H="av01"}var Y=N.reader;Y.skip(1),N=Y.T(),Y=Y.T();var oe=N>>>5,ae=(Y&64)>>6;c.push(H+"."+oe+"."+Di(N&31)+(Y>>>7?"H":"M")+"."+Di(oe===2&&ae?(Y&32)>>5?12:10:ae?10:8)+"."+((Y&16)>>4)+"."+((Y&8)>>3)+((Y&4)>>2)+(Y&3)+"."+Di(1)+"."+Di(1)+"."+Di(1)+".0"),p=!0}).box("enca",Od).box("encv",Ri).box("sinf",Rt).box("frma",function(N){N=Qy(N.reader).codec,s(N)}).box("colr",function(N){c=c.map(function(oe){if(oe.startsWith("av01.")){var ae=N.reader,me=ae.va(),ue=ae.qb(4),le=String.fromCharCode(ue[0]);if(le+=String.fromCharCode(ue[1]),le+=String.fromCharCode(ue[2]),le+=String.fromCharCode(ue[3]),le==="nclx"){ue=ae.la(),le=ae.la();var he=ae.la(),be=ae.T()>>7,Ce=oe.split(".");Ce.length==10&&(Ce[6]=Di(ue),Ce[7]=Di(le),Ce[8]=Di(he),Ce[9]=String(be),oe=Ce.join("."))}ae.seek(me)}return oe});var H=cE(N.reader),Y=H.colorGamut;R=H.xd,D=Y}).parse(e||t,!0),!l.length&&!c.length)return null;var F=d&&!p,U=new Map;if(p){var q=new _e("video/mp4");for(e&&q.init(e),q.i(t),e=b(q.j()),t=e.next();!t.done;t=e.next())t=t.value,U.set(t,t);q.g()}return{type:F?"audio":"video",mimeType:F?"audio/mp4":"video/mp4",codecs:cp(l.concat(c)).join(", "),language:w,height:T,width:E,channelCount:I,sampleRate:A,closedCaptions:U,xd:R,colorGamut:D}}function cp(e){var t=new Set,n=[];e=b(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var s=Ps(r);t.has(s)||(n.push(r),t.add(s))}return t=Cd("audio",n),r=Cd("video",n),e=Cd(Ut,n),r=VE(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function VE(e){if(1>=e.length)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?ct('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function HE(e){var t=null;return new tn().box("moov",Rt).box("trak",Rt).box("mdia",Rt).box("minf",Rt).box("stbl",Rt).S("stsd",Ar).box("encv",Ri).box("enca",Od).box("sinf",Rt).box("schi",Rt).S("tenc",function(n){n=n.reader,n.T(),n.T(),n.T(),n.T(),t=Yo(n.qb(16))}).parse(e,!0),t}function hp(e,t,n){var r,s,l,c,d;return z(function(p){if(p.g==1)return r=t,r.cryptoKey?p.u(2):k(p,r.fetchKey(),3);if(s=r.iv,!s)for(s=Ae(new ArrayBuffer(16)),l=r.firstMediaSequenceNumber+n,c=s.byteLength-1;0<=c;c--)s[c]=l&255,l>>=8;return t.blockCipherMode=="CBC"?d={name:"AES-CBC",iv:s}:d={name:"AES-CTR",counter:s,length:64},p.return(h.crypto.subtle.decrypt(d,r.cryptoKey,e))})}function Zs(e,t,n,r,s){return e=Qn(e,r,s),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function I1(e,t){var n=this;this.g=t,this.l=e,this.h=null,this.B=1,this.s=this.j=null,this.H=0,this.F=!1,this.i=new Map,this.C=!1,this.I=null,this.A=!1,this.m=new zs(function(){return GE(n)}),this.K=Date.now()/1e3,this.o=new Map,this.G={projection:null,hfov:null},this.N=0,this.L=1/0}S=I1.prototype,S.destroy=function(){return this.m.destroy()};function GE(e){var t,n,r,s,l,c,d;return z(function(p){if(p.g==1){for(t=[],n=b(e.i.values()),r=n.next();!r.done;r=n.next())s=r.value,Lu(s),t.push(Du(s)),s.W&&(Lo(s.W),s.W=null);for(l=b(e.o.values()),c=l.next();!c.done;c=l.next())d=c.value,Lo(d);return k(p,Promise.all(t),2)}e.i.clear(),e.o.clear(),e.g=null,e.l=null,e.h=null,V(p)})}S.configure=function(e){if(this.h=e,this.I=new ry({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.i.get("audio");t&&t.W&&(Lo(t.W),t.W=null),t=b(this.o.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,Lo(this.o.get(n)),this.o.delete(n)}for(e.disableTextPrefetch&&(t=this.i.get(Ut))&&t.W&&(Lo(t.W),t.W=null),e.disableVideoPrefetch&&(t=this.i.get("video"))&&t.W&&(Lo(t.W),t.W=null),t=b(this.i.keys()),n=t.next();!n.done;n=t.next())n=this.i.get(n.value),n.W?(E1(n.W,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(Lo(n.W),n.W=null)):0<e.segmentPrefetchLimit&&(n.W=dp(this,n.stream));e.disableAudioPrefetch||QE(this)};function WE(e,t,n){e.l.presentationTimeline.V()||(e.N=t,e.L=n)}S.start=function(e){var t=this;return z(function(n){if(n.g==1)return k(n,YE(t,e||new Map),2);Jt(t.m),t.C=!0,V(n)})};function XE(e,t){var n,r,s,l,c,d;z(function(p){switch(p.g){case 1:return n=zn,e.H++,r=e.H,Q(p,2),k(p,o1(e.g.aa,n.ua),4);case 4:J(p,3);break;case 2:s=te(p),e.g&&e.g.onError(s);case 3:l=Vn(t.mimeType,t.codecs),If(e.g.aa,l,e.l.sequenceMode,t.external),c=e.g.aa.F,(c.isTextVisible()||e.h.alwaysStreamText)&&e.H==r&&(d=R1(e,t),e.i.set(n.ua,d),ro(e,d,0)),V(p)}})}function qE(e){var t=e.i.get(Ut);t&&(Lu(t),Du(t).catch(function(){}),e.i.delete(Ut)),e.s=null}function M1(e,t){for(var n=0>e.g.eb(),r=b(e.i.values()),s=r.next();!s.done;s=r.next())s=s.value,s.ia&&s.ia.Sc(n),s.W&&s.W.Sc(n);for(r=b(e.o.values()),s=r.next();!s.done;s=r.next())s.value.Sc(n);(n=e.i.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.rc&&(Js(e,t,!1,0,!1),n.rc=r):(t=n.rc)&&(n.rc=null,Js(e,t,!0,0,!1)))}function _1(e,t,n,r,s,l){n=n===void 0?!1:n,r=r===void 0?0:r,s=s===void 0?!1:s,l=l===void 0?!1:l,e.j=t,e.C&&(t.video&&Js(e,t.video,n,r,s,l),t.audio&&Js(e,t.audio,n,r,s,l))}function Uf(e,t){z(function(n){if(n.g==1)return e.s=t,e.C?t.segmentIndex?n.u(2):k(n,t.createSegmentIndex(),2):n.return();Js(e,t,!0,0,!1),V(n)})}function Js(e,t,n,r,s,l){var c=e.i.get(t.type);c||t.type!=Ut?c&&(c.rc&&(t.trickModeVideo?(c.rc=t,t=t.trickModeVideo):c.rc=null),c.stream!=t||s)&&(e.o.has(t)?c.W=e.o.get(t):c.W&&BE(c.W,t),t.type==Ut&&(s=Vn(t.mimeType,t.codecs),If(e.g.aa,s,e.l.sequenceMode,t.external)),e.o.has(c.stream)||c.stream.closeSegmentIndex&&c.stream.closeSegmentIndex(),c.stream=t,c.ia=null,c.hg=!!l,n?c.Vc?c.Be=!0:c.Qa?(c.cc=!0,c.Hd=r,c.Be=!0):(Lu(c),yp(e,c,!0,r).catch(function(d){e.g&&e.g.onError(d)})):c.Qa||c.sb||ro(e,c,0),KE(e,c).catch(function(d){e.g&&e.g.onError(d)})):XE(e,t)}function KE(e,t){var n,r;return z(function(s){if(s.g==1)return t.ib?(n=t.stream,r=t.ib,n.segmentIndex?s.u(2):k(s,n.createSegmentIndex(),2)):s.return();if(t.ib!=r||t.stream!=n)return s.return();var l=e.g.Md(),c=Iu(e.g.aa,t.type),d=t.stream.segmentIndex.find(t.Na?t.Na.endTime:l),p=d==null?null:t.stream.segmentIndex.get(d);d=p&&p.sa?p.sa-p.Ha:null,p&&!d&&(d=(p.endTime-p.getStartTime())*(t.stream.bandwidth||0)/8),d?((p=p.$)&&(d+=(p.sa?p.sa-p.Ha:null)||0),p=e.g.getBandwidthEstimate(),l=8*d/p<(c||0)-l-Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal)||t.ib.h.g>d):l=!1,l&&t.ib.abort(),V(s)})}S.Qc=function(){if(this.g)for(var e=this.g.Md(),t=b(this.i.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=this.i.get(r);var s=this.g.aa;if(s.C?s=!1:r==Ut?(s=s.g,s=s.g==null||s.h==null?!1:e>=s.g&&e<s.h):(s=qs(s,r),s=Wd(s,e)),!s){if(n.W&&(n.W.g=null),n.type==="audio"){s=b(this.o.values());for(var l=s.next();!l.done;l=s.next())l.value.g=null}n.ia=null,(Iu(this.g.aa,r)!=null||n.Qa)&&Bf(this,n),n.ib&&(n.ib.abort(),n.ib=null),r===Ut&&(r=this.g.aa,r.H&&r.H.g()),n.Qc=!0}}};function Bf(e,t){t.Vc||t.cc||(t.Qa?(t.cc=!0,t.Hd=0):Jd(e.g.aa,t.type)==null?t.sb==null&&ro(e,t,0):(Lu(t),yp(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function YE(e,t){var n,r,s,l,c,d,p,w,T,E;return z(function(I){if(I.g==1){if(n=zn,!e.j)throw new re(2,5,5006);return r=new Map,s=new Set,e.j.audio&&(r.set(n.X,e.j.audio),s.add(e.j.audio)),e.j.video&&(r.set(n.ga,e.j.video),s.add(e.j.video)),e.s&&(r.set(n.ua,e.s),s.add(e.s)),l=e.g.aa,k(I,l.init(r,e.l.sequenceMode,e.l.type,e.l.ignoreManifestTimestampsInSegmentsMode),2)}for(Jt(e.m),e.updateDuration(),c=b(r.keys()),d=c.next();!d.done;d=c.next())p=d.value,w=r.get(p),e.i.has(p)||(T=R1(e,w),t.has(w.id)&&(E=t.get(w.id),UE(E,function(A,R,D){return jf(A,R,D||null,e.h.retryParameters,e.g.Lb)}),T.W=E),e.i.set(p,T),ro(e,T,0));V(I)})}function R1(e,t){return{stream:t,type:t.type,ia:null,W:dp(e,t),Na:null,lc:null,Vd:null,Ud:null,Td:null,rc:null,endOfStream:!1,Qa:!1,sb:null,cc:!1,Hd:0,Be:!1,Vc:!1,Qc:!0,Gf:!1,fd:!1,ib:null}}function dp(e,t){if(t.type==="video"&&e.h.disableVideoPrefetch||t.type==="audio"&&e.h.disableAudioPrefetch||t.type===Ut&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===Ut&&e.h.disableTextPrefetch)return null;if(e.o.has(t))return e.o.get(t);var n=e.i.get(t.type);return(n=n&&n.W)&&t===n.i?n:0<e.h.segmentPrefetchLimit?new Df(e.h.segmentPrefetchLimit,t,function(r,s,l){return jf(r,s,l||null,e.h.retryParameters,e.g.Lb)},0>e.g.eb()):null}function QE(e){for(var t=e.h.segmentPrefetchLimit,n=e.h.prefetchAudioLanguages,r=b(e.l.variants),s=r.next(),l={};!s.done;l={lb:void 0},s=r.next())if(l.lb=s.value,l.lb.audio)if(e.o.has(l.lb.audio)){if(s=e.o.get(l.lb.audio),E1(s,t),!(0<t&&n.some(function(d){return function(p){return Os(d.lb.audio.language,p)}}(l)))){var c=e.i.get(l.lb.audio.type);s!==(c&&c.W)&&Lo(s),e.o.delete(l.lb.audio)}}else 0>=t||!n.some(function(d){return function(p){return Os(d.lb.audio.language,p)}}(l))||!(s=dp(e,l.lb.audio))||(l.lb.audio.segmentIndex||l.lb.audio.createSegmentIndex(),e.o.set(l.lb.audio,s))}S.updateDuration=function(){var e=this.l.presentationTimeline.getDuration();1/0>e?this.g.aa.Za(e):this.g.aa.Za(this.h.infiniteLiveStreamDuration?1/0:Math.pow(2,32))};function ZE(e,t){var n,r,s,l,c,d;return z(function(p){switch(p.g){case 1:if(Jt(e.m),t.Qa||t.sb==null||t.Vc)return p.return();if(t.sb=null,!t.cc){p.u(2);break}return k(p,yp(e,t,t.Be,t.Hd),3);case 3:return p.return();case 2:if(t.stream.segmentIndex){p.u(4);break}return n=t.stream,Q(p,5),k(p,t.stream.createSegmentIndex(),7);case 7:J(p,6);break;case 5:return r=te(p),k(p,vp(e,t,r),8);case 8:return p.return();case 6:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Qa||t.sb||ro(e,t,0),p.return();case 4:Q(p,9),s=JE(e,t),s!=null&&(ro(e,t,s),t.fd=!1),J(p,10);break;case 9:return l=te(p),k(p,vp(e,t,l),11);case 11:return p.return();case 10:if(c=Array.from(e.i.values()),!e.C||!c.every(function(w){return w.endOfStream})){p.u(0);break}return k(p,e.g.aa.endOfStream(),13);case 13:Jt(e.m),d=e.g.aa.getDuration(),d!=0&&d<e.l.presentationTimeline.getDuration()&&e.l.presentationTimeline.Za(d),V(p)}})}function JE(e,t){if(mp(t))return wE(e.g.aa,t.stream.originalId||""),null;if(t.type==Ut&&SE(e.g.aa),!e.g.aa.xa&&t.type!=Ut)return e.h.updateIntervalSeconds/2;var n=e.g.Md();if(t.type==="audio")for(var r=b(e.o.keys()),s=r.next();!s.done;s=r.next())s=e.o.get(s.value),s.Ma(n,!0),_u(s,n);r=t.Na?t.Na.endTime:n;var l=vE(e.g.aa,t.type,n),c=Math.max(1,Math.max(e.l.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.B),d=e.l.presentationTimeline.getDuration()-r;if(s=Iu(e.g.aa,t.type),1e-6>d&&s)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(Ut))&&mp(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,l>=c)return e.h.updateIntervalSeconds/2;if(c=!t.ia,s=ek(e,t,n,s),!s)return e.h.updateIntervalSeconds;l=!1,c&&t.hg&&(l=!0,t.hg=!1),c=1/0,d=Array.from(e.i.values()),d=b(d);for(var p=d.next();!p.done;p=d.next())p=p.value,mp(p)||p.ia&&!p.ia.current()||(c=Math.min(c,p.Na?p.Na.endTime:n));return r>=c+e.l.presentationTimeline.g?e.h.updateIntervalSeconds:(t.W&&t.ia&&!e.o.has(t.stream)&&(t.W.Ma(s.startTime),_u(t.W,s.startTime)),tk(e,t,n,s,l).catch(function(){}),null)}function ek(e,t,n,r){var s=t.ia?t.ia.current():null;if(s)return s;if(t.Na||r)return t.ia=t.stream.segmentIndex.Ib(t.Na?t.Na.endTime:r,!1,0>e.g.eb()),t.ia&&t.ia.next().value;r=e.l.sequenceMode?0:e.h.inaccurateManifestTolerance,s=Math.max(n-r,0),e=0>e.g.eb();var l=null;return r&&(t.ia=t.stream.segmentIndex.Ib(s,!1,e),l=t.ia&&t.ia.next().value),l||(t.ia=t.stream.segmentIndex.Ib(n,!1,e),l=t.ia&&t.ia.next().value),l}function tk(e,t,n,r,s){var l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N;return z(function(H){switch(H.g){case 1:if(l=zn,c=t.stream,d=t.ia,t.Qa=!0,Q(H,2),r.Yb()==2)throw new re(1,1,1011);return k(H,ok(e,t,r,s),4);case 4:return Jt(e.m),e.A?H.return():(p=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",w=h.ReadableStream,e.h.lowLatencyMode&&e.l.isLowLatency&&w&&p&&(e.l.type!="HLS"||r.m)?(I=new Uint8Array(0),R=A=!1,L=function(Y){var oe,ae,me;return z(function(ue){switch(ue.g){case 1:if(A||(R=!0,Jt(e.m),e.A))return ue.return();if(Q(ue,2),I=nk(I,Y),oe=!1,ae=0,new tn().box("mdat",function(le){ae=le.size+le.start,oe=!0}).parse(I,!1,!0),!oe){ue.u(4);break}return me=I.subarray(0,ae),I=I.subarray(ae),k(ue,pp(e,t,n,c,r,me,!0,s),5);case 5:t.W&&t.ia&&_u(t.W,r.startTime,!0);case 4:J(ue,0);break;case 2:D=te(ue),V(ue)}})},k(H,gp(e,t,r,L),9)):(T=gp(e,t,r),k(H,T,7)));case 7:return E=H.h,Jt(e.m),e.A?H.return():(Jt(e.m),t.cc?(t.Qa=!1,ro(e,t,0),H.return()):k(H,pp(e,t,n,c,r,E,!1,s),6));case 9:if(F=H.h,D)throw D;if(R){H.u(10);break}return A=!0,Jt(e.m),e.A?H.return():t.cc?(t.Qa=!1,ro(e,t,0),H.return()):k(H,pp(e,t,n,c,r,F,!1,s),10);case 10:t.W&&t.ia&&_u(t.W,r.startTime,!0);case 6:if(Jt(e.m),e.A)return H.return();t.Na=r,d.next(),t.Qa=!1,t.Gf=!1,U=e.g.aa.wb(),q=U[t.type],JSON.stringify(q),t.cc||e.g.Af(r,t.stream),ro(e,t,0),J(H,0);break;case 2:if(N=te(H),Jt(e.m,N),e.A)return H.return();if(t.Qa=!1,N.code==7001)t.Qa=!1,Lu(t),ro(e,t,0),H.u(0);else if(t.type==l.ua&&e.h.ignoreTextStreamFailures)e.i.delete(l.ua),H.u(0);else if(N.code==3017)ik(e,t,N),H.u(0);else return t.fd=!0,N.category==1&&t.W&&Ru(t.W,r),N.severity=2,k(H,vp(e,t,N),0)}})}function nk(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function ik(e,t,n){if(!Array.from(e.i.values()).some(function(s){return s!=t&&s.Gf})){if(e.g.disableStream(t.stream,e.h.maxDisabledTime))return;var r=Math.round(100*e.B);if(20<r)e.B-=.2;else if(4<r)e.B-=.04;else{t.fd=!0,e.A=!0,e.g.onError(n);return}t.Gf=!0}ro(e,t,4)}function ok(e,t,n,r){var s,l,c,d,p,w,T,E,I,A,R,D,L,F,U;return z(function(q){switch(q.g){case 1:if(s=zn,l=t.Na==null&&t.lc==null,c=[],d=Math.max(0,Math.max(n.appendWindowStart,e.N)-.1),p=Math.min(n.appendWindowEnd,e.L)+.01,w=Ps(n.codecs||t.stream.codecs),T=yo(n.mimeType||t.stream.mimeType),E=n.timestampOffset,E==t.Vd&&d==t.Ud&&p==t.Td&&w==t.tf&&T==t.uf){q.u(2);break}if(I=t.tf&&t.uf&&IE(e.g.aa,t.type,T,w),!I){q.u(3);break}if(A=null,t.type===s.ga?A=e.i.get(s.X):t.type===s.X&&(A=e.i.get(s.ga)),!A){q.u(3);break}return k(q,Du(A).catch(function(){}),5);case 5:A.lc=null,Bf(e,A);case 3:return k(q,L1(e,t,E,d,p,n,w,T),2);case 2:return Hd(n.$,t.lc)||(t.lc=n.$,n.l&&n.$&&(R=gp(e,t,n.$),D=function(){var N,H,Y,oe,ae,me,ue;return z(function(le){switch(le.g){case 1:return Q(le,2),k(le,R,4);case 4:return N=le.h,Jt(e.m),H=null,Y=new Map,oe={projection:null,hfov:null},ae=new tn,ae.box("moov",Rt).box("trak",Rt).box("mdia",Rt).S("mdhd",function(he){H=Ef(he.reader,he.version).timescale}).box("hdlr",function(he){switch(he=he.reader,he.skip(8),he.oc()){case"soun":Y.set(s.X,H);break;case"vide":Y.set(s.ga,H)}H=null}).box("minf",Rt).box("stbl",Rt).S("stsd",Ar).box("encv",Ri).box("avc1",Ri).box("avc3",Ri).box("hev1",Ri).box("hvc1",Ri).box("dvav",Ri).box("dva1",Ri).box("dvh1",Ri).box("dvhe",Ri).box("dvc1",Ri).box("dvi1",Ri).box("vexu",Rt).box("proj",Rt).S("prji",function(he){he=he.reader.oc(),oe.projection=he}).box("hfov",function(he){he=he.reader.P()/1e3,oe.hfov=he}).parse(N),ak(e,oe),Y.has(t.type)?n.$.timescale=Y.get(t.type):H!=null&&(n.$.timescale=H),me=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,k(le,e.g.kg(t.type,N),5);case 5:return k(le,Mf(e.g.aa,t.type,N,null,t.stream,me,t.Qc,r),6);case 6:J(le,0);break;case 2:throw ue=te(le),t.lc=null,ue}})},L=n.startTime,l&&(F=Iu(e.g.aa,t.type),F!=null&&(L=F)),e.g.Ai(L,n.$),c.push(D()))),e.l.sequenceMode&&(U=t.Na?t.Na.i:null,n.i!=U&&c.push(TE(e.g.aa,t.type,n.startTime))),k(q,Promise.all(c),0)}})}function L1(e,t,n,r,s,l,c,d){var p,w,T,E;return z(function(I){if(I.g==1)return p=zn,w=new Map,e.j.audio&&w.set(p.X,e.j.audio),e.j.video&&w.set(p.ga,e.j.video),Q(I,2),t.Ud=r,t.Td=s,c&&(t.tf=c),d&&(t.uf=d),t.Vd=n,T=e.l.sequenceMode||e.l.type=="HLS",k(I,CE(e.g.aa,t.type,n,r,s,T,l.mimeType||t.stream.mimeType,l.codecs||t.stream.codecs,w),4);if(I.g!=2)return J(I,0);throw E=te(I),t.Ud=null,t.Td=null,t.tf=null,t.uf=null,t.Vd=null,E})}function pp(e,t,n,r,s,l,c,d){c=c===void 0?!1:c,d=d===void 0?!1:d;var p,w,T,E,I,A,R,D;return z(function(L){switch(L.g){case 1:return p=r.closedCaptions&&0<r.closedCaptions.size,T=r.emsgSchemeIdUris!=null&&0<r.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,E=e.h.parsePrftBox&&!e.F,I=r.mimeType=="video/mp4"||r.mimeType=="audio/mp4",A=null,s.$&&(A=s.$.timescale),R=I&&A&&r.type==="video"&&e.l.type=="DASH"&&e.h.shouldFixTimestampOffset,(T||E||R)&&(w=new tn),T&&w.S("emsg",function(F){var U=r.emsgSchemeIdUris;if(F.version===0)var q=F.reader.oc(),N=F.reader.oc(),H=F.reader.P(),Y=F.reader.P(),oe=F.reader.P(),ae=F.reader.P(),me=s.startTime+Y/H;else H=F.reader.P(),me=F.reader.Nc()/H+s.timestampOffset,Y=me-s.startTime,oe=F.reader.P(),ae=F.reader.P(),q=F.reader.oc(),N=F.reader.oc();F=F.reader.qb(F.reader.getLength()-F.reader.va()),(U&&U.includes(q)||e.h.dispatchAllEmsgBoxes)&&(q=="urn:mpeg:dash:event:2012"?e.g.Bi():(U=me+oe/H,H=new Map().set("detail",{startTime:me,endTime:U,schemeIdUri:q,value:N,timescale:H,presentationTimeDelta:Y,eventDuration:oe,id:ae,messageData:F}),H=new $e("emsg",H),H.cancelable=!0,e.g.onEvent(H),!H.defaultPrevented&&(q=="https://aomedia.org/emsg/ID3"||q=="https://developer.apple.com/streaming/emsg-id3")&&(q=is(F),q.length)&&e.g.onMetadata([{cueTime:me,data:F,frames:q,dts:me,pts:me}],0,U)))}),E&&w.S("prft",function(F){if(!e.F&&s.$.timescale){var U=F.reader,q=F.version;U.P(),F=U.P();var N=U.P();F=1e3*F+N/Math.pow(2,32)*1e3,q===0?U=U.P():(q=U.P(),U=U.P(),U=q*Math.pow(2,32)+U),F=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+F).getTime(),U=new Map().set("detail",{wallClockTime:F,programStartDate:new Date(F-U/s.$.timescale*1e3)}),U=new $e("prft",U),e.g.onEvent(U),e.F=!0}}),R&&w.box("moof",Rt).box("traf",Rt).S("tfdt",function(F){var U,q,N,H,Y,oe;return z(function(ae){return U=bf(F.reader,F.version),q=U.baseMediaDecodeTime,q?(N=-q/A,H=Number(t.Vd)||0,H<N?(Y=t.Ud,oe=t.Td,k(ae,L1(e,t,N,Y,oe,s),0)):ae.u(0)):ae.return()})}),(T||E||R)&&w.parse(l,!1,c),k(L,rk(e,t,n),2);case 2:return Jt(e.m),D=t.Qc,t.Qc=!1,k(L,e.g.kg(t.type,l),3);case 3:return k(L,Mf(e.g.aa,t.type,l,s,r,p,D,d,c),4);case 4:Jt(e.m),V(L)}})}function rk(e,t,n){var r,s,l,c;return z(function(d){if(d.g==1)return r=Math.max(e.h.bufferBehind,e.l.presentationTimeline.g),s=Jd(e.g.aa,t.type),s==null?d.return():(l=n-s,c=l-r,c<=e.h.evictionGoal?d.return():k(d,e.g.aa.remove(t.type,s,s+c),2));Jt(e.m),V(d)})}function mp(e){return e&&e.type==Ut&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function gp(e,t,n,r){var s,l,c,d,p;return z(function(w){switch(w.g){case 1:if(s=n.cd())return w.return(s);if(l=null,t.W){var T=t.W,E=T.h;n instanceof Li&&(E=T.j),E.has(n)?(T=E.get(n),r&&(T.Uf=r),l=T.fe):l=null}return l||(l=jf(n,t.stream,r||null,e.h.retryParameters,e.g.Lb)),c=0,t.ia&&(c=t.ia.h),t.ib=l,k(w,l.promise,2);case 2:if(d=w.h,t.ib=null,p=d.data,!n.aesKey){w.u(3);break}return k(w,hp(p,n.aesKey,c),4);case 4:p=w.h;case 3:return w.return(p)}})}function jf(e,t,n,r,s){var l=e instanceof ft?e:void 0,c=l?1:0;return e=Zs(e.M(),e.Ha,e.sa,r,n),e.contentType=t.type,s.request(Ro,e,{type:c,stream:t,segment:l})}function yp(e,t,n,r){var s,l;return z(function(c){if(c.g==1)return t.cc=!1,t.Be=!1,t.Hd=0,t.Vc=!0,t.Na=null,t.ia=null,t.W&&!e.o.has(t.stream)&&Lo(t.W),r?(s=e.g.Md(),l=e.g.aa.getDuration(),k(c,e.g.aa.remove(t.type,s+r,l),3)):k(c,o1(e.g.aa,t.type),4);if(c.g!=3)return Jt(e.m),n?k(c,e.g.aa.flush(t.type),3):c.u(3);Jt(e.m),t.Vc=!1,t.endOfStream=!1,t.Qa||t.sb||ro(e,t,0),V(c)})}function ro(e,t,n){var r=t.type;(r!=Ut||e.i.has(r))&&(t.sb=new fu(function(){var s;return z(function(l){if(l.g==1)return Q(l,2),k(l,ZE(e,t),4);if(l.g!=2)return J(l,0);s=te(l),e.g&&e.g.onError(s),V(l)})}).Y(n))}function Lu(e){e.sb!=null&&(e.sb.stop(),e.sb=null)}function Du(e){return z(function(t){return e.ib?k(t,e.ib.abort(),0):t.u(0)})}function vp(e,t,n){var r;return z(function(s){if(s.g==1)return k(s,sy(e.I),2);Jt(e.m),n.category===1&&(r=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)),(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.h.failureCallback(n),V(s)})}function sk(e){var t,n,r,s,l,c;return z(function(d){return d.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.K<n?d.return(!1):(e.K=t,r=zn,(s=e.i.get(r.X))&&(s.lc=null,Bf(e,s),Du(s).catch(function(){})),(l=e.i.get(r.ga))&&(l.lc=null,Bf(e,l),Du(l).catch(function(){})),c=new Map,e.j.audio&&c.set(r.X,e.j.audio),e.j.video&&c.set(r.ga,e.j.video),k(d,s1(e.g.aa,c),2))):d.return(!0)})}function ak(e,t){if(e.G.projection!=t.projection||e.G.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new $e("spatialvideoinfo",n)}else n=new $e("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.G=t}}function Ff(){}function xp(e,t,n,r,s){var l=s in r,c=l?n.constructor==Object&&Object.keys(r).length==0:n.constructor==Object&&Object.keys(n).length==0,d=l||c,p=!0,w;for(w in t){var T=s+"."+w,E=l?r[s]:n[w];d||w in n?t[w]===void 0?E===void 0||d?delete e[w]:e[w]=zo(E):c?e[w]=t[w]:E.constructor==Object&&t[w]&&t[w].constructor==Object?(e[w]||(e[w]=zo(E)),T=xp(e[w],t[w],E,r,T),p=p&&T):typeof t[w]!=typeof E||t[w]==null||typeof t[w]!="function"&&t[w].constructor!=E.constructor?(It("Invalid config, wrong type for "+T),p=!1):(typeof n[w]=="function"&&n[w].length!=t[w].length&&je("Unexpected number of arguments for "+T),e[w]=t[w]):(It("Invalid config, unrecognized key "+T),p=!1)}return p}function $f(e,t){for(var n={},r=n,s=0,l=0;s=e.indexOf(".",s),!(0>s);)(s==0||e[s-1]!="\\")&&(l=e.substring(l,s).replace(/\\\./g,"."),r[l]={},r=r[l],l=s+1),s+=1;return r[e.substring(l).replace(/\\\./g,".")]=t,n}function ea(e,t){return e&&t}function D1(e,t){function n(c){for(var d=b(Object.keys(c)),p=d.next();!p.done;p=d.next())p=p.value,l(c[p])&&Object.keys(c[p]).length===0||s(c[p])||typeof c[p]=="function"?delete c[p]:l(c[p])&&(n(c[p]),Object.keys(c[p]).length===0&&delete c[p])}function r(c,d){return Object.keys(c).reduce(function(p,w){var T=c[w];return d.hasOwnProperty(w)?l(T)&&l(d[w])?(T=r(T,d[w]),(0<Object.keys(T).length||!l(T))&&(p[w]=T)):s(T)&&s(d[w])||Number.isNaN(T)&&Number.isNaN(d[w])||T!==d[w]&&(p[w]=T):p[w]=T,p},{})}function s(c){return Array.isArray(c)&&c.length===0}function l(c){return c&&typeof c=="object"&&!Array.isArray(c)}return e=r(e,t),n(e),e}we("shaka.util.ConfigUtils",Ff),Ff.getDifferenceFromConfigObjects=D1,Ff.convertToConfigObject=$f,Ff.mergeConfigObjects=xp;function so(){}function P1(e){return e=Ko(e),new Ln(e).Eb}function Pu(e,t,n){function r(d){wt(l).setUint32(c,d.byteLength,!0),c+=4,l.set(Ae(d),c),c+=d.byteLength}if(!n||!n.byteLength)throw new re(2,6,6015);var s;typeof t=="string"?s=wd(t,!0):s=t,e=Ko(e),e=wd(e,!0);var l=new Uint8Array(12+e.byteLength+s.byteLength+n.byteLength),c=0;return r(e),r(s),r(n),l}function O1(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ko(e).split("skd://").pop(),Pu(e,n,t))}function wp(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}we("shaka.util.FairPlayUtils",so),so.commonFairPlayResponse=function(e,t){if(e===2){try{var n=fn(t.data)}catch{return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch{}e&&(t.data=ie(oo(n)))}},so.expressplayFairPlayRequest=function(e,t){wp(e,t)},so.conaxFairPlayRequest=function(e,t){wp(e,t)},so.ezdrmFairPlayRequest=function(e,t){wp(e,t)},so.verimatrixFairPlayRequest=function(e,t){e===2&&(e=Ae(t.body),e=Kr(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Mo("spc="+e))},so.expressplayInitDataTransform=function(e,t,n){return O1(e,t,n)},so.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Ko(e).split("skd://").pop().split("?").shift(),n=h.atob(n);var r=new ArrayBuffer(2*n.length);r=qe(r);for(var s=0,l=n.length;s<l;s++)r[s]=n.charCodeAt(s);return Pu(e,r,t)},so.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ko(e).split(";").pop(),Pu(e,n,t))},so.verimatrixInitDataTransform=function(e,t,n){return O1(e,t,n)},so.initDataTransform=Pu,so.defaultGetContentId=P1,so.isFairPlaySupported=function(){var e;return z(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},Q(t,2),k(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(te(t),t.return(!1))})};function Sp(){}function ta(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:_o(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(T,E,I){return rf()&&E=="skd"&&(E=I.serverCertificate,I=P1(T),T=Pu(T,I,E)),T},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Bo(),minHdcpVersion:"",ignoreDuplicateInitData:!Jl()};(Bo()||$o())&&t.preferredKeySystems.push("com.microsoft.playready");var n="reload",r=!1;Jl()||du()||Qt("Tizen 4")||Qt("Tizen 5")||Qt("Tizen 6")||ef()||Fo()&&gd()===53||Fo()&&gd()===68||!(!Gi()||Gi()&&of()||Gi()&&Qt("Fuchsia"))||vd()&&hu()||(n="smooth",r=!0),r={retryParameters:_o(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"},manifestPreprocessor:zf,manifestPreprocessorTXml:Vf,sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:r,useStreamOnceInPeriodFlattening:!1,updatePeriod:-1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(du()||Jl()||ef()||$o()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:zf,manifestPreprocessorTXml:Vf,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var s={retryParameters:_o(),failureCallback:function(T){return ea([T])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,infiniteLiveStreamDuration:!1,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:$o()||tf(),dontChooseCodecs:!1,shouldFixTimestampOffset:Fo()||jo()};(Fo()||jo()||Gi()||nf())&&(s.stallSkip=0);var l={trackSelectionCallback:function(T){return z(function(E){return E.return(T)})},downloadSizeCallback:function(T){var E;return z(function(I){return I.g==1?navigator.storage&&navigator.storage.estimate?k(I,navigator.storage.estimate(),3):I.return(!0):(E=I.h,I.return(E.usage+T<.95*E.quota))})},progressCallback:function(T,E){return ea([T,E])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:Ms()?.5:0},n={codecSwitchingStrategy:n,addExtraFeaturesToSourceBuffer:function(T){return ea([T],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(T,E){return ea([T,E])}};var c=!1,d=!1,p=!0;Ag()&&(d=c=!0,p=!1);var w={drm:t,manifest:r,streaming:s,mediaSource:n,offline:l,abrFactory:function(){return new yn},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:c,skipPlayDetection:d,supportsMultipleMediaElements:p}};return l.trackSelectionCallback=function(T){return z(function(E){return E.return(uk(T,w.preferredAudioLanguage,w.preferredVideoHdrLevel))})},w}function Rr(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return xp(e,t,n||ta(),r,"")}function uk(e,t,n){var r=n;r=="AUTO"&&(r=h.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var s=e.filter(function(d){return!(d.type!="variant"||d.hdr&&d.hdr!=r)});n=[];var l=af(t,s.map(function(d){return d.language}));l&&(n=s.filter(function(d){return Kt(d.language)==l})),n.length==0&&(n=s.filter(function(d){return d.primary})),n.length==0&&(s.map(function(d){return d.language}),n=s);var c=n.filter(function(d){return d.height&&480>=d.height});for(c.length&&(c.sort(function(d,p){return p.height-d.height}),n=c.filter(function(d){return d.height==c[0].height})),t=[],n.length&&(s=Math.floor(n.length/2),n.sort(function(d,p){return d.bandwidth-p.bandwidth}),t.push(n[s])),e=b(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=Ut&&n.type!="image"||t.push(n);return t}function zf(e){return ea([e],e)}function Vf(e){return ea([e],e)}we("shaka.util.PlayerConfiguration",Sp),Sp.mergeConfigObjects=Rr,Sp.createDefault=ta;function rr(e,t,n,r){Xt.call(this),this.L=e,this.U=t,this.xa=r.networkingEngine,this.A=n,this.o=null,this.qa=0,this.Fa=r.yc,this.C=r.vi,this.ab=r.wi,this.g=r.config,this.j=this.F=this.h=null,this.ea=!1,this.G=r.Fi,this.oa=!1,this.l=null,this.da=!1,this.i=this.B=null,this.ba=!1,this.K=new Map,this.pa=!1,this.za=r.Ei,this.Z=new Lf,this.m=new Zt,this.N=null,this.s=!1,this.Da=r.yh,this.fa=null,this.Ea=r.xh,this.R=!1,this.I=[],this.H=[]}X(rr,Xt);function Ou(e,t,n){(e=t?e.H:e.I)?e.push(n):n()}function lk(e){if(e.H)for(var t=b(e.H),n=t.next();!n.done;n=t.next())n=n.value,n();e.H=null}function N1(e,t){if(e.N=t,e.R=!0,e.I){t=b(e.I);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.I=null}S=rr.prototype,S.getStartTime=function(){return this.A},S.Dc=function(){return this.L},S.gf=function(){return this.h};function fk(e){return e.ba=!0,e.i}function ck(e){return e.ea=!0,e.j}function hk(e){return e.oa=!0,e.G}S.getStats=function(){return this.Z};function dk(e){return e.da=!0,e.l}function pk(e){return e.pa=!0,e.K}S.start=function(){var e=this;(function(){var t;return z(function(n){switch(n.g){case 1:return k(n,Promise.resolve(),2);case 2:return Q(n,3),k(n,mk(e),5);case 5:return Nu(e),k(n,gk(e),6);case 6:if(Nu(e),e.o||(e.o=new Bs(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups)),e.Ea){var r=e.g.abrFactory;e.B=r,e.i=r(),e.i.configure(e.g.abr)}if(e.Da){r=e.h.presentationTimeline.V();var s=ff(e.h.variants);s=e.o.create(s),e.i.configure(e.g.abr),e.i.setVariants(Array.from(s.values())),(s=e.i.chooseVariant())&&(e.fa=s,s.video&&U1(e,s.video,r),s.audio&&U1(e,s.audio,r))}return k(n,void 0,7);case 7:Nu(e),e.m.resolve(),J(n,0);break;case 3:t=te(n),e.m.reject(t),V(n)}})})()},S.dispatchEvent=function(e){return this.N?this.N.dispatchEvent(e):Xt.prototype.dispatchEvent.call(this,e)},S.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var t=new Map().set("detail",e);t=new $e("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function Nu(e){if(e.s)throw new re(2,7,7003)}function Cp(e,t){e.dispatchEvent(new $e("onstatechange",new Map().set("state",t)))}function mk(e){var t,n,r,s;return z(function(l){if(l.g==1)return Cp(e,"manifest-parser"),e.j||(e.F=$y(e.L,e.U),e.j=e.F(),e.j.configure(e.g.manifest)),t=Date.now()/1e3,Cp(e,"manifest"),e.h?l.u(2):k(l,e.j.start(e.L,e.ab),3);if(l.g!=2&&(e.h=l.h),n=new $e("manifestparsed",void 0),e.dispatchEvent(n),e.h.variants.length==0)throw new re(2,4,4036);yk(e.h),r=Date.now()/1e3,s=r-t,e.Z.H=s,V(l)})}function gk(e){var t,n,r,s,l;return z(function(c){switch(c.g){case 1:Cp(e,"drm-engine"),e.qa=Date.now()/1e3,e.l=e.Fa(),e.C.g=e.l,e.l.configure(e.g.drm);var d=e.C;if(t=zg(e.h.variants,d.h.restrictions,d.i),!t){c.u(2);break}return n=new $e("trackschanged",void 0),k(c,Promise.resolve(),3);case 3:Nu(e),e.dispatchEvent(n);case 2:return r=ff(e.h.variants),k(c,Ey(e.l,r,e.h.offlineSessionIds),4);case 4:return Nu(e),k(c,Uy(e.C,e.h),5);case 5:if(s=c.h,!s){c.u(0);break}return l=new $e("trackschanged",void 0),k(c,Promise.resolve(),7);case 7:e.dispatchEvent(l),V(c)}})}S.configure=function(e,t){e=$f(e,t),Rr(this.g,e)},S.getConfiguration=function(){return zo(this.g)};function U1(e,t,n){var r,s,l,c,d;z(function(p){if(p.g==1)return r=e.g.streaming.segmentPrefetchLimit||2,s=new Df(r,t,function(w,T,E){return jf(w,T,E||null,e.g.streaming.retryParameters,e.xa)},!1),e.K.set(t.id,s),k(p,t.createSegmentIndex(),2);l=e.A||0,(d=(c=t.segmentIndex.Ib(l))?c.current():null)||(d=t.segmentIndex.get(0)),d&&(n?d.$&&T1(s,d.$):_u(s,d.startTime)),V(p)})}S.fj=function(){return this.m},S.destroy=function(){var e=this,t,n,r;return z(function(s){switch(s.g){case 1:if(e.s=!0,!e.j||e.ea){s.u(2);break}return k(s,e.j.stop(),2);case 2:if(!e.i||e.ba){s.u(4);break}return k(s,e.i.stop(),4);case 4:if(e.G&&!e.oa&&e.G.release(),!e.l||e.da){s.u(6);break}return k(s,e.l.destroy(),6);case 6:if(0<e.K.size&&!e.pa)for(t=b(e.K.values()),n=t.next();!n.done;n=t.next())r=n.value,Lo(r);V(s)}})};function yk(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}we("shaka.media.PreloadManager",rr),rr.prototype.destroy=rr.prototype.destroy,rr.prototype.waitForFinish=rr.prototype.fj;function Hf(e,t){Xt.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{wc:null,vc:na,jc:function(r,s){return os(n,"enter",r,s)}},{wc:Uu,vc:na,jc:function(r,s){return os(n,"enter",r,s)}},{wc:Bu,vc:na,jc:function(r,s){return os(n,"enter",r,s)}},{wc:na,vc:Uu,jc:function(r,s){return os(n,"exit",r,s)}},{wc:na,vc:Bu,jc:function(r,s){return os(n,"exit",r,s)}},{wc:Uu,vc:Bu,jc:function(r,s){return os(n,"skip",r,s)}},{wc:Bu,vc:Uu,jc:function(r,s){return os(n,"skip",r,s)}}],this.h=new Ct,this.h.D(this.i,"regionremove",function(r){n.g.delete(r.region)})}X(Hf,Xt),Hf.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Xt.prototype.release.call(this)},Hf.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=b(this.i.g),r=n.next();!r.done;r=n.next()){r=r.value;var s=this.g.get(r),l=e<r.startTime?Uu:e>r.endTime?Bu:na;this.g.set(r,l);for(var c=b(this.m),d=c.next();!d.done;d=c.next())d=d.value,d.wc==s&&d.vc==l&&d.jc(r,t)}}};function os(e,t,n,r){t=new $e(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}var Uu=1,na=2,Bu=3;function Tp(e,t,n){var r,s,l,c,d,p,w;return z(function(T){switch(T.g){case 1:var E=new Ln(e).Pa.split("/").pop().split(".");return r=E.length==1?"":E.pop().toLowerCase(),(s=vk[r])?T.return(s):(l=0,c=Qn([e],n),Q(T,2),c.method="HEAD",k(T,t.request(l,c).promise,4));case 4:d=T.h,s=d.headers["content-type"],J(T,3);break;case 2:if(p=te(T),!p||p.code!=1002&&p.code!=1001){T.u(3);break}return c.method="GET",k(T,t.request(l,c).promise,6);case 6:w=T.h,s=w.headers["content-type"];case 3:return T.return(s?s.toLowerCase().split(";").shift():"")}})}var vk={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function B1(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(c){return B1(c,e)}).join("");var n=[],r=700<=e.fontWeight,s=e.fontStyle=="italic",l=e.textDecoration.includes("underline");return r&&n.push(["b"]),s&&n.push(["i"]),l&&n.push(["u"]),s=e.color,s==""&&t&&(s=t.color),r="",(s=j1(s))&&(r+="."+s),s=e.backgroundColor,s==""&&t&&(s=t.backgroundColor),(t=j1(s))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(c,d){var p=b(d);return d=p.next().value,p=p.next().value,"<"+d+(p===void 0?"":p)+">"+c+"</"+d+">"},e.payload)}function j1(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function bp(e,t){var n=[];e=b(F1(e));for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)n.push.apply(n,_(bp(r.nestedCues,r)));else{var s=r.clone();s.nestedCues=[],s.payload=B1(r,t),n.push(s)}return n}function F1(e){var t=[];e=b(e);for(var n=e.next(),r={};!n.done;r={Me:void 0},n=e.next())r.Me=n.value,t.some(function(s){return function(l){return On(s.Me,l)}}(r))||t.push(r.Me);return t}function xk(e){function t(r){for(var s=5381,l=r.length;l;)s=33*s^r.charCodeAt(--l);return(s>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function Oi(e,t){this.g=null;for(var n=b(Array.from(e.textTracks)),r=n.next();!r.done;r=n.next())r=r.value,r.kind!=="metadata"&&r.kind!=="chapters"&&(r.mode="disabled",r.label==t&&(this.g=r));this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}S=Oi.prototype,S.configure=function(){},S.remove=function(e,t){return this.g?($1(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},S.append=function(e){var t=bp(e),n=[];e=this.g.cues?Array.from(this.g.cues):[],t=b(t);for(var r=t.next(),s={};!r.done;s={hd:void 0},r=t.next())s.hd=r.value,e.some(function(l){return function(c){return c.startTime==l.hd.startTime&&c.endTime==l.hd.endTime&&c.text==l.hd.payload}}(s))||(r=xk(s.hd))&&n.push(r);for(e=n.slice().sort(function(l,c){return l.startTime!=c.startTime?l.startTime-c.startTime:l.endTime!=c.endTime?l.endTime-c.startTime:"line"in VTTCue.prototype?n.indexOf(c)-n.indexOf(l):n.indexOf(l)-n.indexOf(c)}),e=b(e),t=e.next();!t.done;t=e.next())this.g.addCue(t.value)},S.destroy=function(){return this.g&&($1(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},S.isTextVisible=function(){return this.g.mode=="showing"},S.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function $1(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var r=b(Array.from(e.cues)),s=r.next();!s.done;s=r.next())(s=s.value)&&t(s)&&e.removeCue(s);e.mode=n}we("shaka.text.SimpleTextDisplayer",Oi),Oi.prototype.setTextVisibility=Oi.prototype.setTextVisibility,Oi.prototype.isTextVisible=Oi.prototype.isTextVisible,Oi.prototype.destroy=Oi.prototype.destroy,Oi.prototype.append=Oi.prototype.append,Oi.prototype.remove=Oi.prototype.remove,Oi.prototype.configure=Oi.prototype.configure;function Ni(){}S=Ni.prototype,S.configure=function(){},S.remove=function(){},S.append=function(){},S.destroy=function(){},S.isTextVisible=function(){return!1},S.setTextVisibility=function(){},we("shaka.text.StubTextDisplayer",Ni),Ni.prototype.setTextVisibility=Ni.prototype.setTextVisibility,Ni.prototype.isTextVisible=Ni.prototype.isTextVisible,Ni.prototype.destroy=Ni.prototype.destroy,Ni.prototype.append=Ni.prototype.append,Ni.prototype.remove=Ni.prototype.remove,Ni.prototype.configure=Ni.prototype.configure;function z1(){}function ia(e){for(;e.firstChild;)e.removeChild(e.firstChild)}we("shaka.util.Dom",z1),z1.removeAllChildren=ia;function Ui(e,t,n){var r=this;this.m=!1,this.h=[],this.A=e,this.s=t,this.l=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.s.appendChild(this.g),n&&n.captionsUpdatePeriod||Ot("UITextDisplayer w/ config","Please migrate to initializing UITextDisplayer with a config."),this.C=new Mt(function(){r.A.paused||oa(r)}).Sa(n&&n.captionsUpdatePeriod?n.captionsUpdatePeriod:.25),this.i=new Map,this.j=new Ct,this.j.D(document,"fullscreenchange",function(){oa(r,!0)}),this.j.D(this.A,"seeking",function(){oa(r,!0)}),this.j.D(this.A,"resize",function(){var s=r.A,l=s.videoWidth;s=s.videoHeight,l&&s?r.l=l/s:r.l=null}),this.o=null,"ResizeObserver"in h&&(this.o=new ResizeObserver(function(){oa(r,!0)}),this.o.observe(this.g)),this.B=new Map}S=Ui.prototype,S.configure=function(e){this.C&&this.C.Sa(e.captionsUpdatePeriod)},S.append=function(e){var t=[].concat(_(this.h));e=b(F1(e));for(var n=e.next(),r={};!n.done;r={Ne:void 0},n=e.next())r.Ne=n.value,t.some(function(s){return function(l){return On(l,s.Ne)}}(r))||this.h.push(r.Ne);oa(this)},S.destroy=function(){return this.g&&(this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.C&&this.C.stop(),this.i.clear(),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.disconnect(),this.o=null)),Promise.resolve()},S.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(r){return r.startTime<e||r.endTime>=t}),oa(this,n>this.h.length),!0},S.isTextVisible=function(){return this.m},S.setTextVisibility=function(e){this.m=e};function wk(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function V1(e,t,n,r,s){var l=!1,c=[],d=[];t=b(t);for(var p=t.next();!p.done;p=t.next()){p=p.value,s.push(p);var w=e.i.get(p),T=p.startTime<=r&&p.endTime>r,E=w?w.qh:null;w&&(c.push(w.Oe),w.qc&&c.push(w.qc),T||(l=!0,e.i.delete(p),w=null)),T&&(d.push(p),w?wk(e,E)||(l=!0):(Sk(e,p,s),w=e.i.get(p),E=w.qh,l=!0)),0<p.nestedCues.length&&E&&V1(e,p.nestedCues,E,r,s),s.pop()}if(l){for(r=b(c),s=r.next();!s.done;s=r.next())s=s.value,s.parentElement&&s.parentElement.removeChild(s);for(d.sort(function(I,A){return I.startTime!=A.startTime?I.startTime-A.startTime:I.endTime-A.endTime}),d=b(d),r=d.next();!r.done;r=d.next())r=e.i.get(r.value),r.qc?(r.qc.contains(n)&&r.qc.removeChild(n),n.appendChild(r.qc),r.qc.appendChild(r.Oe)):n.appendChild(r.Oe)}}function oa(e,t){if(e.g){var n=e.A.currentTime;if(!e.m||t!==void 0&&t){t=b(e.B.values());for(var r=t.next();!r.done;r=t.next())ia(r.value);ia(e.g),e.i.clear(),e.B.clear()}e.m&&V1(e,e.h,e.g,n,[])}}function Sk(e,t,n){var r=1<n.length,s=r?"span":"div";t.lineBreak&&(s="br"),t.rubyTag&&(s=t.rubyTag),r=!r&&0<t.nestedCues.length;var l=document.createElement(s);if(s!="br"&&Tk(e,l,t,n,r),n=null,t.region&&t.region.id){var c=t.region,d=e.l===4/3?2.5:1.9;if(n=c.id+"_"+c.width+"x"+c.height+(c.heightUnits==fe?"%":"px")+"-"+c.viewportAnchorX+"x"+c.viewportAnchorY+(c.viewportAnchorUnits==fe?"%":"px"),e.B.has(n))n=e.B.get(n);else{s=document.createElement("span");var p=c.heightUnits==fe?"%":"px",w=c.widthUnits==fe?"%":"px",T=c.viewportAnchorUnits==fe?"%":"px";s.id="shaka-text-region---"+n,s.classList.add("shaka-text-region"),s.style.position="absolute";var E=c.height,I=c.width;c.heightUnits===2&&(E=5.33*c.height,p="%"),c.widthUnits===2&&(I=c.width*d,w="%"),s.style.height=E+p,s.style.width=I+w,c.viewportAnchorUnits===2?(d=c.viewportAnchorY/75*100,p=c.viewportAnchorX/(e.l===4/3?160:210)*100,d-=c.regionAnchorY*E/100,p-=c.regionAnchorX*I/100,s.style.top=d+"%",s.style.left=p+"%"):(s.style.top=c.viewportAnchorY-c.regionAnchorY*E/100+T,s.style.left=c.viewportAnchorX-c.regionAnchorX*I/100+T),c.heightUnits!==0&&c.widthUnits!==0&&c.viewportAnchorUnits!==0&&(c=Math.max(0,Math.min(100-(parseInt(s.style.width.slice(0,-1),10)||0),parseInt(s.style.left.slice(0,-1),10)||0)),s.style.top=Math.max(0,Math.min(100-(parseInt(s.style.height.slice(0,-1),10)||0),parseInt(s.style.top.slice(0,-1),10)||0))+"%",s.style.left=c+"%"),s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="center",s.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.B.set(n,s),n=s}}s=l,r&&(s=document.createElement("span"),s.classList.add("shaka-text-wrapper"),s.style.backgroundColor=t.backgroundColor,s.style.lineHeight="normal",l.appendChild(s)),e.i.set(t,{Oe:l,qh:s,qc:n})}function Ck(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==wn?n:e==="left"||e==="start"&&t===fi||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===fi?"line-right":"center"}function Tk(e,t,n,r,s){var l=t.style,c=n.nestedCues.length==0,d=1<r.length;l.whiteSpace="pre-wrap";var p=n.payload.replace(/\s+$/g,function(T){return" ".repeat(T.length)});if(l.webkitTextStrokeColor=n.textStrokeColor,l.webkitTextStrokeWidth=n.textStrokeWidth,l.color=n.color,l.direction=n.direction,l.opacity=n.opacity,l.paddingLeft=Ep(n.linePadding,n,e.s),l.paddingRight=Ep(n.linePadding,n,e.s),l.textCombineUpright=n.textCombineUpright,l.textShadow=n.textShadow,n.backgroundImage)l.backgroundImage="url('"+n.backgroundImage+"')",l.backgroundRepeat="no-repeat",l.backgroundSize="contain",l.backgroundPosition="center",n.backgroundColor&&(l.backgroundColor=n.backgroundColor),l.width="100%",l.height="100%";else{if(n.nestedCues.length)var w=t;else w=document.createElement("span"),t.appendChild(w);n.border&&(w.style.border=n.border),!s&&((t=H1(r,function(T){return T.backgroundColor}))?w.style.backgroundColor=t:p&&(w.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=H1(r,function(T){return T.fontFamily}))&&(w.style.fontFamily=t),p&&(w.textContent=p)}d&&!r[r.length-1].isContainer?l.display="inline":(l.display="flex",l.flexDirection="column",l.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(l.width="100%",l.alignItems="start"):(n.textAlign=="right"||n.textAlign=="end")&&(l.width="100%",l.alignItems="end"),l.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),c||(l.margin="0"),l.fontFamily=n.fontFamily,l.fontWeight=n.fontWeight.toString(),l.fontStyle=n.fontStyle,l.letterSpacing=n.letterSpacing,l.fontSize=Ep(n.fontSize,n,e.s),r=n.line,r!=null&&(c=n.lineInterpretation,c==Pe&&(c=1,d=16,e.l&&1>e.l&&(d=32),r=0>r?100+r/d*100:r/d*100),c==1&&(l.position="absolute",n.writingMode==rt?(l.width="100%",n.lineAlign==oi?l.top=r+"%":n.lineAlign=="end"&&(l.bottom=100-r+"%")):n.writingMode=="vertical-lr"?(l.height="100%",n.lineAlign==oi?l.left=r+"%":n.lineAlign=="end"&&(l.right=100-r+"%")):(l.height="100%",n.lineAlign==oi?l.right=r+"%":n.lineAlign=="end"&&(l.left=100-r+"%")))),l.lineHeight=n.lineHeight,e=Ck(n),e=="line-left"?(l.cssFloat="left",n.position!==null&&(l.position="absolute",n.writingMode==rt?(l.left=n.position+"%",l.width="auto"):l.top=n.position+"%")):e=="line-right"?(l.cssFloat="right",n.position!==null&&(l.position="absolute",n.writingMode==rt?(l.right=100-n.position+"%",l.width="auto"):l.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(l.position="absolute",n.writingMode==rt?(l.left=n.position+"%",l.width="auto"):l.top=n.position+"%"),l.textAlign=n.textAlign,l.textDecoration=n.textDecoration.join(" "),l.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&l.writingMode==n.writingMode||(l.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==rt?l.width=n.size+"%":l.height=n.size+"%")}function Ep(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;var s=r.value;switch(r.unit){case"%":return s/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*s/t.cellResolution.rows+"px";default:return e}}function H1(e,t){for(var n=e.length-1;0<=n;n--){var r=t(e[n]);if(r||r===0)return r}return null}we("shaka.text.UITextDisplayer",Ui),Ui.prototype.setTextVisibility=Ui.prototype.setTextVisibility,Ui.prototype.isTextVisible=Ui.prototype.isTextVisible,Ui.prototype.remove=Ui.prototype.remove,Ui.prototype.destroy=Ui.prototype.destroy,Ui.prototype.append=Ui.prototype.append,Ui.prototype.configure=Ui.prototype.configure;function bk(e,t){function n(l){for(var c=l,d=b(t),p=d.next();!p.done;p=d.next())p=p.value,p.end&&p.start<l&&(c+=p.end-p.start);return l=Math.floor(c/3600),d=Math.floor(c/60%60),p=Math.floor(c%60),c=Math.floor(1e3*c%1e3),(10>l?"0":"")+l+":"+(10>d?"0":"")+d+":"+(10>p?"0":"")+p+"."+(100>c?10>c?"00":"0":"")+c}var r=bp(e);e=`WEBVTT

`,r=b(r);for(var s=r.next();!s.done;s=r.next())s=s.value,e+=n(s.startTime)+" --> "+n(s.endTime)+function(l){var c=[];switch(l.textAlign){case"left":c.push("align:left");break;case"right":c.push("align:right");break;case gn:c.push("align:middle");break;case"start":c.push("align:start");break;case"end":c.push("align:end")}switch(l.writingMode){case"vertical-lr":c.push("vertical:lr");break;case"vertical-rl":c.push("vertical:rl")}return c.length?" "+c.join(" "):""}(s)+`
`,e+=s.payload+`

`;return e}we("shaka.text.WebVttGenerator",function(){});function G1(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}G1.prototype.configure=function(e){this.g=e};function Ek(e){e.i=!1,e.l=!0,e.j=!1}function kk(e,t,n){try{if(!e.g.enabled)return t;var r=kp(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var s=Wf;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":s=qf;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":s=X1;break e}s=void 0}r.ot=s,r.su=!0;var l=Gf(r);return Ap(t,l)}catch(c){return at("CMCD_SRC_ERROR","Could not generate src CMCD data.",c),t}}function kp(e){return e.g.sessionId||(e.g.sessionId=h.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function ra(e,t,n){n=n===void 0?{}:n;var r=r===void 0?e.g.useHeaders:r;if(e.g.enabled){Object.assign(n,kp(e)),n.pr=e.h.eb();var s=n.ot===Xf||n.ot===qf;if(e.j&&s&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),e=Ak(e,n),r)r=Rk(e),Object.keys(r).length&&Object.assign(t.headers,r);else{var l=Gf(e);l&&(t.uris=t.uris.map(function(c){return Ap(c,l)}))}}}function Ak(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(r,s){return n.includes(s)&&(r[s]=t[s]),r},{}):t}function Ik(e){if(e.type===0)return Lk;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?qf:Xf;if(t=="audio")return Wf;if(t=="text")return e.mimeType==="application/mp4"?Kf:Ip}}function Mk(e,t){if(t=e.h.wb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):NaN}function W1(e,t){if(t=e.h.wb()[t],!t.length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(r){return r.start<=n&&r.end>=n}))?1e3*(e.end-n):0}function _k(e,t){var n=e.h.ic();if(!n.length)return NaN;e=n[0],n=b(n);for(var r=n.next();!r.done;r=n.next())r=r.value,r.type==="variant"&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case Xf:return e.videoBandwidth||NaN;case Wf:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Gf(e){function t(E){return 100*n(E/100)}function n(E){return Math.round(E)}function r(E){return!Number.isNaN(E)&&E!=null&&E!==""&&E!==!1}var s=[],l={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(E){return encodeURIComponent(E)},rtp:t,tb:n},c=Object.keys(e||{}).sort();c=b(c);for(var d=c.next();!d.done;d=c.next()){d=d.value;var p=e[d];if(r(p)&&(d!=="v"||p!==1)&&(d!="pr"||p!==1)){var w=l[d];w&&(p=w(p)),w=typeof p;var T=void 0;T=w==="string"&&d!=="ot"&&d!=="sf"&&d!=="st"?d+"="+JSON.stringify(p):w==="boolean"?d:w==="symbol"?d+"="+p.description:d+"="+p,s.push(T)}}return s.join(",")}function Rk(e){var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],s=[{},{},{},{}],l={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=b(t);for(var c=t.next();!c.done;c=t.next())c=c.value,s[l[c]!=null?l[c]:1][c]=e[c];for(e=0;e<s.length;e++)(l=Gf(s[e]))&&(n["CMCD-"+r[e]]=l);return n}function Ap(e,t){return!t||e.includes("offline:")?e:(e=new Ln(e),e.g.set("CMCD",t),e.toString())}var X1="m",Wf="a",Xf="v",qf="av",Lk="i",Ip="c",Kf="tt";we("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Kj:"s",OTHER:"o"});function ao(e){this.h=e,this.g=null}S=ao.prototype,S.configure=function(e){this.h=e},S.zg=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(Y1)?1e3*this.g.get(Y1):null},S.xg=function(){return this.h.enabled&&this.g&&this.g.has(K1)?1e3*this.g.get(K1):null},S.Yh=function(){return this.h.enabled&&this.g&&this.g.has(Q1)?this.g.get(Q1):null},S.Zh=function(){return this.h.enabled&&this.g&&this.g.has(Z1)?this.g.get(Z1):null},S.getBandwidthEstimate=function(e){var t=this.xg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function q1(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}we("shaka.util.CmsdManager",ao),ao.prototype.getBandwidthEstimate=ao.prototype.getBandwidthEstimate,ao.prototype.getRoundTripTime=ao.prototype.Zh,ao.prototype.getResponseDelay=ao.prototype.Yh,ao.prototype.getEstimatedThroughput=ao.prototype.xg,ao.prototype.getMaxBitrate=ao.prototype.zg;var K1="etp",Y1="mb",Q1="rd",Z1="rtt";function J1(){this.g=null,this.h=[]}function Mp(e,t){return z(function(n){if(n.g==1)return e.g?k(n,new Promise(function(r){return e.h.push(r)}),2):n.u(2);e.g=t,V(n)})}J1.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function Te(e,t){Xt.call(this);var n=this;this.l=jp,this.de=this.h=null,this.oa=!1,this.qe=new Ct,this.gd=new Ct,this.m=new Ct,this.Fa=new Ct,this.ub=new Ct,this.C=this.G=this.B=this.H=null,this.te=0,this.Z=new J1,this.pa=this.ag=this.da=this.i=this.ab=this.F=this.j=this.Zc=this.K=this.eg=this.ea=this.N=this.dd=this.L=this.he=this.I=this.Fb=null,this.Ea=!1,this.xa=this.o=null,this.cg=1e9,this.qd=[],this.U=NaN,this.g=sr(this),this.R=null,this.ze=-1,this.Da=null,this.fa={width:1/0,height:1/0},this.be=new zd(this.g,this.fa,null),this.ke=[],this.s=null,this.za=new Bs(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Db=this.g.preferredTextLanguage,this.pd=this.g.preferredTextRole,this.od=this.g.preferForcedSubs,this.md=[],t&&t(this),this.N=Gk(this),this.ea=new ao(this.g.cmsd),this.H=sv(this),this.H.Pf(this.g.streaming.forceHTTP),this.H.Qf(this.g.streaming.forceHTTPS),this.Gb=this.ba=this.A=null,this.Ce=!1,this.dg=new Mt(function(){return z(function(r){if(r.g==1)return n.ba?k(r,n.Rb(n.Gb,!0),3):r.u(0);if(r.g!=4)return k(r,n.load(n.ba),4);n.Ce?n.Gb.pause():n.Gb.play(),n.ba=null,n.Ce=!1,V(r)})}),tc&&(this.A=tc(),this.A.configure(this.g.ads),this.ub.D(this.A,"ad-content-pause-requested",function(r){var s;return z(function(l){if(l.g==1)return n.dg.stop(),n.ba?l.u(0):(n.Gb=n.h,n.Ce=n.h.ended,s=r.saveLivePosition||!1,k(l,n.qg(!0,s),3));n.ba=l.h,V(l)})}),this.ub.D(this.A,"ad-content-resume-requested",function(r){if(r=r.offset||0,n.ba){var s=n.ba;s.A&&r&&(s.A+=r)}n.dg.Y(.1)}),this.ub.D(this.A,"ad-content-attach-requested",function(){return z(function(r){return n.h||!n.Gb?r.u(0):k(r,n.Rb(n.Gb,!0),0)})})),this.qe.D(h,"online",function(){Np(n),n.If()}),this.je=new Mt(function(){for(var r=Date.now()/1e3,s=!1,l=!0,c=b(n.i.variants),d=c.next();!d.done;d=c.next())d=d.value,0<d.disabledUntilTime&&d.disabledUntilTime<=r&&(d.disabledUntilTime=0,s=!0),0<d.disabledUntilTime&&(l=!1);l&&n.je.stop(),s&&aa(n,!1,void 0,!1,!1)}),this.qa=null,e&&(Ot("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Rb(e,!0))}X(Te,Xt);function Yf(e){e.K!=null&&(Jy(e.K),e.K.release(),e.K=null)}function Dk(e,t){t.lcevc.enabled?(Yf(e),e.K==null&&(e.K=new Au(e.h,e.eg,t.lcevc),e.G&&(e.G.Z=e.K))):Yf(e)}function cn(e,t){return new $e(e,t)}S=Te.prototype,S.destroy=function(){var e=this,t;return z(function(n){switch(n.g){case 1:return e.l==Do?n.return():(Yf(e),t=e.detach(),e.l=Do,k(n,t,2));case 2:return k(n,e.Qe(),3);case 3:if(e.qe&&(e.qe.release(),e.qe=null),e.gd&&(e.gd.release(),e.gd=null),e.m&&(e.m.release(),e.m=null),e.Fa&&(e.Fa.release(),e.Fa=null),e.ub&&(e.ub.release(),e.ub=null),e.xa=null,e.g=null,e.s=null,e.de=null,e.N=null,e.ea=null,!e.H){n.u(4);break}return k(n,e.H.destroy(),5);case 5:e.H=null;case 4:e.o&&(e.o.release(),e.o=null),Xt.prototype.release.call(e),V(n)}})};function sa(e,t){e.dispatchEvent(cn("onstatechange",new Map().set("state",t)))}S.Rb=function(e,t){t=t===void 0?!0:t;var n=this,r,s,l;return z(function(c){switch(c.g){case 1:if(n.l==Do)throw new re(2,7,7e3);if(r=n.h&&n.h==e,!n.h||n.h==e){c.u(2);break}return k(c,n.detach(),2);case 2:return k(c,_p(n,"attach"),4);case 4:if(c.h)return c.return();if(Q(c,5,6),r||(sa(n,"attach"),s=function(){var d=Up(n,!1);d&&ua(n,d)},n.gd.D(e,"error",s),n.h=e),!t||!Io()||n.G){c.u(6);break}return k(c,Rp(n),6);case 6:W(c),n.Z.release(),Z(c,0);break;case 5:return l=te(c),k(c,n.detach(),10);case 10:throw l}})},S.zh=function(e){this.eg=e},S.detach=function(e){e=e===void 0?!1:e;var t=this;return z(function(n){if(n.g==1){if(t.l==Do)throw new re(2,7,7e3);return k(n,t.bc(!1,e),2)}if(n.g!=3)return k(n,_p(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.gd.Ra(),t.h=null),sa(t,"detach"),t.A&&!e&&t.A.release()}finally{t.Z.release()}V(n)})};function _p(e,t){var n;return z(function(r){return r.g==1?(n=++e.te,k(r,Mp(e.Z,t),2)):n!=e.te?(e.Z.release(),r.return(!0)):r.return(!1)})}S.bc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r,s,l,c,d,p,w,T,E,I;return z(function(A){switch(A.g){case 1:return n.l!=Do&&(n.l=jp),k(A,_p(n,"unload"),2);case 2:return A.h?A.return():(se(A,3),n.Ea=!1,sa(n,"unload"),e&&!Io()&&(e=!1),Yf(n),r=n.md.map(function(R){return R()}),n.md=[],k(A,Promise.all(r),5));case 5:if(n.dispatchEvent(cn("unloading")),n.dd&&(n.dd.release(),n.dd=null),n.h&&(n.m.Ra(),n.Fa.Ra()),n.je.stop(),n.Fb&&(n.Fb.release(),n.Fb=null),n.he&&(n.he.stop(),n.he=null),!n.F){A.u(6);break}return k(A,n.F.stop(),7);case 7:n.F=null,n.ab=null;case 6:if(!n.o){A.u(8);break}return k(A,n.o.stop(),8);case 8:if(!n.j){A.u(10);break}return k(A,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.I&&(n.I.release(),n.I=null),n.C&&(n.C.release(),n.C=null),!rf("webkit")||!n.B){A.u(12);break}return k(A,n.B.destroy(),13);case 13:n.B=null;case 12:if(!n.G){A.u(14);break}return k(A,n.G.destroy(),15);case 15:n.G=null;case 14:if(n.A&&!t&&n.A.onAssetUnload(),n.ba&&!t&&(n.ba.destroy(),n.ba=null),t||n.dg.stop(),n.N&&Ek(n.N),n.ea&&(n.ea.g=null),n.h&&ia(n.h),!n.h||!n.h.src){A.u(16);break}return k(A,new Promise(function(R){return new Mt(R).Y(.1)}),17);case 17:n.h.removeAttribute("src"),n.h.load();case 16:if(!n.B){A.u(18);break}return k(A,n.B.destroy(),19);case 19:n.B=null;case 18:if(n.qa&&n.da!=n.qa.Dc()&&(n.qa.s||n.qa.destroy(),n.qa=null),n.da=null,n.ag=null,n.L=null,n.i){for(s=b(n.i.variants),l=s.next();!l.done;l=s.next())for(c=l.value,d=b([c.audio,c.video]),p=d.next();!p.done;p=d.next())(w=p.value)&&w.segmentIndex&&w.segmentIndex.release();for(T=b(n.i.textStreams),E=T.next();!E.done;E=T.next())I=E.value,I.segmentIndex&&I.segmentIndex.release()}n.g.streaming.clearDecodingCache&&(Zg={},Zl.clear()),n.i=null,n.s=new Lf,n.bg=null,n.Da=null,n.R=null,n.ze=-1,n.qd=[],n.U=NaN,Op(n);case 3:W(A),n.Z.release(),Z(A,4);break;case 4:if(e&&Io()&&!n.G&&n.h)return k(A,Rp(n),0);A.u(0)}})},S.ej=function(e){this.pa=e},S.load=function(e,t,n){t=t===void 0?null:t;var r=this,s,l,c,d,p,w,T,E,I,A,R,D,L;return z(function(F){switch(F.g){case 1:if(r.l==Do)throw new re(2,7,7e3);return s=null,l="",e instanceof rr?(s=e,l=s.Dc()||""):l=e||"",k(F,Mp(r.Z,"load"),2);case 2:if(r.Z.release(),!r.h)throw new re(2,7,7002);if(!r.da){F.u(3);break}return r.da=l,k(F,r.bc(!1),3);case 3:if(c=++r.te,d=function(){return z(function(U){if(U.g==1)return r.te==c?U.u(0):s?k(U,s.destroy(),3):U.u(3);throw new re(2,7,7e3)})},p=function(U,q){return z(function(N){switch(N.g){case 1:return se(N,2),k(N,Mp(r.Z,q),4);case 4:return k(N,d(),5);case 5:return k(N,U(),6);case 6:return k(N,d(),7);case 7:s&&r.g&&(s.g=r.g);case 2:W(N),r.Z.release(),Z(N,0)}})},Q(F,5,6),t==null&&s&&(t=s.getStartTime()),r.pa=t,r.Ea=!1,r.dispatchEvent(cn("loading")),s){n=s.U,F.u(8);break}if(n){F.u(8);break}return k(F,p(function(){return z(function(U){if(U.g==1)return k(U,iv(r,l),2);n=U.h,V(U)})},"guessMimeType_"),8);case 8:if(w=!!s,s){N1(s,r),r.s=s.getStats(),F.u(11);break}return k(F,tv(r,l,t,n,!0),12);case 12:(s=F.h)?(N1(s,r),r.s=s.getStats(),s.start(),s.m.catch(function(){})):r.s=new Lf;case 11:if(T=!s,E=Date.now()/1e3,r.s=s?s.getStats():new Lf,r.da=l,r.ag=n||null,T)return k(F,p(function(){return z(function(U){return k(U,Uk(r,n),0)})},"initializeSrcEqualsDrmInner_"),20);if(r.G){F.u(15);break}return k(F,p(function(){return z(function(U){return k(U,Rp(r),0)})},"initializeMediaSourceEngineInner_"),15);case 15:return k(F,p(function(){return z(function(U){return k(U,s.m,0)})},"waitForFinish"),17);case 17:return r.g=s.getConfiguration(),r.be=s.C,r.ab=s.F,r.F=ck(s),r.F&&r.F.setMediaElement&&r.h&&r.F.setMediaElement(r.h),r.dd=hk(s),r.Zc=s.za,r.i=s.gf(),(I=s.o)&&(r.za=I),w&&r.h&&r.h.nodeName==="AUDIO"&&(Pk(r),r.configure("manifest.disableVideo",!0)),r.B=dk(s),k(F,p(function(){return z(function(U){return k(U,r.B.Rb(r.h),0)})},"drmEngine_.attach"),18);case 18:return!(A=s.B)||r.xa&&r.xa==A||(r.o=fk(s),r.xa=s.B,typeof r.o.setMediaElement!="function"&&(Ot("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),r.o.setMediaElement=function(){}),typeof r.o.setCmsdManager!="function"&&(Ot("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),r.o.setCmsdManager=function(){}),typeof r.o.trySuggestStreams!="function"&&(Ot("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),r.o.trySuggestStreams=function(){})),R=pk(s),D=s.fa,k(F,p(function(){return z(function(U){return k(U,Nk(r,E,D,R),0)})},"loadInner_"),19);case 19:lk(s),F.u(14);break;case 20:return k(F,p(function(){return z(function(U){return k(U,Bk(r,E,n),0)})},"srcEqualsInner_"),14);case 14:r.dispatchEvent(cn("loaded"));case 6:if(W(F),!s){F.u(22);break}return k(F,s.destroy(),22);case 22:r.qa=null,Z(F,0);break;case 5:if(L=te(F),!L||L.code==7e3){F.u(24);break}return k(F,r.bc(!1),24);case 24:throw L}})};function Pk(e){for(var t=b(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(r){return r.audio})}S.aj=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,r;return z(function(s){return s.g==1?k(s,ev(n),2):s.g!=3?(r=s.h,k(s,n.bc(e,t),3)):s.return(r)})},S.qg=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,r;return z(function(s){return s.g==1?k(s,ev(n,t),2):s.g!=3?(r=s.h,k(s,n.detach(e),3)):s.return(r)})};function ev(e,t){t=t===void 0?!1:t;var n,r;return z(function(s){if(s.g==1)return n=null,e.i&&e.F&&e.ab&&e.da?(r=e.h.currentTime,e.V()&&!t&&(r=null),k(s,nv(e,e.da,r,e.ag,!0,!1,!1),3)):s.u(2);if(s.g!=2){n=s.h,e.ke.push(n),e.F&&e.F.setMediaElement&&e.F.setMediaElement(null);var l=n,c=e.F,d=e.ab;l.h=e.i,l.j=c,l.F=d,l=n,c=e.xa,l.i=e.o,l.B=c,n.o=e.za,n.start(),e.i=null,e.F=null,e.ab=null,e.o=null,e.xa=null}return s.return(n)})}S.preload=function(e,t,n){t=t===void 0?null:t;var r=this,s;return z(function(l){return l.g==1?k(l,tv(r,e,t,n),2):((s=l.h)?s.start():ua(r,new re(2,7,7005)),l.return(s))})},S.Qe=function(){var e=this,t,n,r,s;return z(function(l){for(t=[],n=b(e.ke),r=n.next();!r.done;r=n.next())s=r.value,s.s||t.push(s.destroy());return e.ke=[],k(l,Promise.all(t),0)})};function tv(e,t,n,r,s){s=s===void 0?!1:s;var l,c,d;return z(function(p){return p.g==1?r?p.u(2):k(p,iv(e,t),3):(p.g!=2&&(r=p.h),Ok(e,r)?p.return(null):(l=!1,c=!0,s&&(e.o&&e.xa==e.g.abrFactory&&(c=!1),e.h&&e.h.nodeName==="AUDIO"&&(l=!0)),d=nv(e,t,n,r||null,!s,l,c),s||(d=d.then(function(w){return e.ke.push(w),w})),p.return(d)))})}function nv(e,t,n,r,s,l,c){s=s===void 0?!0:s,l=l===void 0?!1:l,c=c===void 0?!0:c;var d,p,w,T,E,I,A,R,D,L,F,U,q,N,H;return z(function(Y){return Y.g==1?(d=null,p=zo(e.g),l&&(p.manifest.disableVideo=!0),w=function(){return d.R&&d.s?null:d},T=function(){return w()?w().getConfiguration():e.g},E=function(oe,ae){w()?d.configure(oe,ae):e.configure(oe,ae)},e.fa.width!=1/0||e.fa.height!=1/0?Y.u(2):k(Y,Mg(),3)):(Y.g!=2&&(I=Y.h,e.fa.width=I.width,e.fa.height=I.height),A=new zd(p,e.fa,null),R={networkingEngine:e.H,filter:function(oe){var ae,me;return z(function(ue){if(ue.g==1)return k(ue,Uy(A,oe),2);if(ue.g!=4)return ae=ue.h,ae?(me=cn("trackschanged"),k(ue,Promise.resolve(),4)):ue.u(0);d.dispatchEvent(me),V(ue)})},makeTextStreamsForClosedCaptions:function(oe){return qk(e,oe)},onTimelineRegionAdded:function(oe){var ae=d.G;e:{for(var me=b(ae.g),ue=me.next();!ue.done;ue=me.next())if(ue=ue.value,ue.schemeIdUri==oe.schemeIdUri&&ue.id==oe.id&&ue.startTime==oe.startTime&&ue.endTime==oe.endTime){me=ue;break e}me=null}me==null&&(ae.g.add(oe),oe=new $e("regionadd",new Map([["region",oe]])),ae.dispatchEvent(oe))},onEvent:function(oe){return d.dispatchEvent(oe)},onError:function(oe){return d.onError(oe)},isLowLatencyMode:function(){return T().streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return T().streaming.autoLowLatencyMode},enableLowLatencyMode:function(){E("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&d.R&&e.j.updateDuration()},newDrmInfo:function(oe){var ae=d.l,me=ae?ae.g:null;me&&ae.s&&Vd(A,me.keySystem,oe)},onManifestUpdated:function(){var oe=new Map().set("isLive",e.V());d.dispatchEvent(cn("manifestupdated",oe)),Ou(d,!1,function(){e.A&&e.A.onManifestUpdated(e.V())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(oe,ae,me,ue){var le=oe;oe=="com.apple.hls.interstitial"&&(le="com.apple.quicktime.HLS",oe={startTime:ae,endTime:me,values:ue},e.A)&&e.A.onInterstitialMetadata(e,e.h,oe),ue=b(ue),oe=ue.next();for(var he={};!oe.done;he={Pg:void 0},oe=ue.next())he.Pg=oe.value,Ou(d,!1,function(be){return function(){Lp(e,ae,me,le,be.Pg)}}(he))},disableStream:function(oe){return e.disableStream(oe,e.g.streaming.maxDisabledTime)}},D=new fp(function(){return e.Ob()}),D.addEventListener("regionadd",function(oe){var ae=oe.region;Fu(e,"timelineregionadded",ae,d),Ou(d,!1,function(){e.A&&e.A.onDashTimedMetadata(ae)})}),L=null,p.streaming.observeQualityChanges&&(L=new Pf(function(){return e.wb()}),L.addEventListener("qualitychange",function(oe){xv(e,oe.quality,oe.position)}),L.addEventListener("audiotrackchange",function(oe){xv(e,oe.quality,oe.position,!0)})),F=!0,U={Lb:e.H,onError:function(oe){return d.onError(oe)},ee:function(oe){Ou(d,!0,function(){e:{var ae=oe,me=cn("keystatuschanged");e.dispatchEvent(me);var ue=Object.keys(ae);ue.length==1&&ue[0]==""&&(ue=["00"],ae={"00":ae[""]}),me=ue.length==1&&ue[0]=="00";var le=!1;if(ue.length){ue=b(e.i.variants);for(var he=ue.next();!he.done;he=ue.next()){he=he.value;var be=[];he.audio&&be.push(he.audio),he.video&&be.push(he.video),be=b(be);for(var Ce=be.next();!Ce.done;Ce=be.next()){var ke=Ce.value;if(Ce=he.allowedByKeySystem,ke.keyIds.size){he.allowedByKeySystem=!0,ke=b(ke.keyIds);for(var Oe=ke.next();!Oe.done;Oe=ke.next())Oe=Oe.value,((Oe=ae[me?"00":Oe])||e.B.F)&&(he.allowedByKeySystem=he.allowedByKeySystem&&!!Oe&&!Fy.includes(Oe))}Ce!=he.allowedByKeySystem&&(le=!0)}}}if(le&&(uo(e),!ss(e)))break e;(ae=e.j.j)&&!ae.allowedByKeySystem&&aa(e)}})},onExpirationUpdated:function(oe,ae){var me=cn("expirationupdated");d.dispatchEvent(me),(me=d.j)&&me.onExpirationUpdated&&me.onExpirationUpdated(oe,ae)},onEvent:function(oe){d.dispatchEvent(oe),oe.type=="drmsessionupdate"&&F&&(F=!1,oe=Date.now()/1e3-d.qa,(e.s||d.getStats()).j=oe,e.K&&Jy(e.K))}},q=sv(e,w),fy(e.H,q),N=function(){return e.yc(U)},H={config:p,wi:R,Fi:D,Ei:L,yc:N,vi:A,networkingEngine:q,yh:s,xh:c},d=new rr(t,r,n,H),Y.return(d))})}function iv(e,t){var n,r;return z(function(s){return s.g==1?(n=e.g.manifest.retryParameters,k(s,Tp(t,e.H,n),2)):(r=s.h,r=="application/x-mpegurl"&&Ms()&&(r="application/vnd.apple.mpegurl"),s.return(r))})}function Ok(e,t){if(!Io())return!0;if(t){if((e.h||Ig()).canPlayType(t)=="")return!1;if(!(Io()&&t in Co))return!0;if(Pg(t))return Ms()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls}return!1}function Rp(e){var t,n,r,s,l;return z(function(c){if(c.g==1)return sa(e,"media-source"),t=e.g.textDisplayFactory,n=t(),n.configure?n.configure(e.g.textDisplayer):Ot("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.bg=t,r=Hk(e.h,n,{Qh:function(){return e.keySystem()},onMetadata:function(d,p,w){ov(e,d,p,w)}},e.K),r.configure(e.g.mediaSource),s=e.g.manifest,l=s.segmentRelativeVttTiming,r.fa=l,k(c,r.L,2);e.G=r,V(c)})}function Nk(e,t,n,r){var s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me;return z(function(ue){switch(ue.g){case 1:sa(e,"load"),s=e.h,e.I=new Mu({Nd:function(){return s.playbackRate},hc:function(){return s.defaultPlaybackRate},Rf:function(le){s.playbackRate=le},Lg:function(le){s.currentTime+=le}}),l=function(){return Qf(e)},c=function(){return dv(e)},e.m.D(s,"playing",l),e.m.D(s,"pause",l),e.m.D(s,"ended",l),e.m.D(s,"ratechange",c),Dk(e,e.g),e.Db=e.g.preferredTextLanguage,e.pd=e.g.preferredTextRole,e.od=e.g.preferForcedSubs,Bp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(le,he,be){e.i&&e.j&&le!=e.j.j&&Jf(e,le,!0,he===void 0?!1:he,be===void 0?0:be)}),e.o.setMediaElement(s),e.o.setCmsdManager(e.ea),e.j=Wk(e),e.j.configure(e.g.streaming),e.l=vi,s.textTracks&&e.m.D(s.textTracks,"addtrack",function(le){if(le.track)switch(le=le.track,le.kind){case"chapters":rv(e,le)}}),e.dispatchEvent(cn("streaming")),d=n;case 2:for((w=e.j.j)||d||(d=ss(e)?e.o.chooseVariant():null),T=[],p=w||d,E=b([p.video,p.audio]),I=E.next();!I.done;I=E.next())(A=I.value)&&!A.segmentIndex&&T.push(A.createSegmentIndex());if(!(0<T.length)){ue.u(4);break}return k(ue,Promise.all(T),4);case 4:if(!p||p.disabledUntilTime!=0){ue.u(2);break}if(e.F&&e.F.onInitialVariantChosen&&e.F.onInitialVariantChosen(p),e.i.isLowLatency&&!e.g.streaming.lowLatencyMode&&je("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),Bp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),WE(e.j,e.g.playRangeStart,e.g.playRangeEnd),R=function(le){e.C=zk(e,le),e.Fb=Vk(e,le),av(e,s,Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal))},e.g.streaming.startAtSegmentBoundary||R(e.pa),w){ue.u(7);break}if(!e.g.streaming.startAtSegmentBoundary){ue.u(8);break}return D=e.i.presentationTimeline,L=e.pa||e.h.currentTime,F=D.Vb(),U=D.yb(),L<F?L=F:L>U&&(L=U),k(ue,Kk(d,L),9);case 9:q=ue.h,R(q);case 8:Jf(e,d,!0,!1,0);case 7:return e.C.ready(),N=e.Ec().find(function(le){return le.active}),N||((H=vu(e.i.textStreams,e.Db,e.pd,e.od)[0]||null)&&ap(e.s.h,H,!0),d&&(H?(Yk(e,d.audio,H)&&(e.oa=!0),e.oa&&e.G.F.setTextVisibility(!0),yv(e)):e.oa=!1),H&&(e.g.streaming.alwaysStreamText||e.qf())&&Uf(e.j,H)),k(ue,e.j.start(r),10);case 10:e.g.abr.enabled&&(e.o.enable(),vv(e)),uo(e),ss(e),e.i.variants.some(function(le){return le.primary}),((Y=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(oe=function(){return pv(e)},e.m.D(s,"timeupdate",oe)),Y||(ae=function(){return Zf(e)},e.m.D(s,"timeupdate",ae),Zf(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(me=function(){var le;return z(function(he){if(he.g==1)return le=e.h.duration-e.h.currentTime,isNaN(le)||!(le<=e.g.streaming.preloadNextUrlWindow)?he.u(0):(e.m.jb(s,"timeupdate",me),k(he,e.preload(e.i.nextUrl),4));e.qa=he.h,V(he)})},e.m.D(s,"timeupdate",me)),e.m.D(s,"ended",function(){e.load(e.qa||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(Y),e.Ea=!0,e.m.ha(s,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),V(ue)}})}function Uk(e,t){var n,r,s,l,c;return z(function(d){return d.g==1?(n=zn,r=Date.now()/1e3,s=!0,e.B=e.yc({Lb:e.H,onError:function(p){ua(e,p)},ee:function(){},onExpirationUpdated:function(){var p=cn("expirationupdated");e.dispatchEvent(p)},onEvent:function(p){e.dispatchEvent(p),p.type=="drmsessionupdate"&&s&&(s=!1,e.s.j=Date.now()/1e3-r)}}),e.B.configure(e.g.drm),l={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},c={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?yo(t):"",codecs:t?Wi(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ga,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set},c.fullMimeTypes.add(Vn(c.mimeType,c.codecs)),t.startsWith("audio/")?(c.type=n.X,l.audio=c):l.video=c,e.B.ba=!0,k(d,Ey(e.B,[l],[]),2)):k(d,e.B.Rb(e.h),0)})}function Bk(e,t,n){var r,s,l,c,d,p,w,T,E,I,A,R;return z(function(D){if(D.g==1)return sa(e,"src-equals"),r=e.h,e.C=new m1(r),s=!1,e.md.push(function(){s=!0}),e.pa!=null&&e.C.Ee(e.pa),e.I=new Mu({Nd:function(){return r.playbackRate},hc:function(){return r.defaultPlaybackRate},Rf:function(L){r.playbackRate=L},Lg:function(L){r.currentTime+=L}}),l=e.g.streaming.rebufferingGoal,av(e,r,l),c=function(){return Qf(e)},d=function(){return dv(e)},e.m.D(r,"playing",c),e.m.D(r,"pause",c),e.m.D(r,"ended",c),e.m.D(r,"ratechange",d),r.preload!="none"&&e.m.ha(r,"loadedmetadata",function(){e.s.m=Date.now()/1e3-t}),r.audioTracks&&(e.m.D(r.audioTracks,"addtrack",function(){return uo(e)}),e.m.D(r.audioTracks,"removetrack",function(){return uo(e)}),e.m.D(r.audioTracks,"change",function(){return uo(e)})),r.textTracks&&(e.m.D(r.textTracks,"addtrack",function(L){if(L.track)switch(L=L.track,L.kind){case"metadata":$k(e,L);break;case"chapters":rv(e,L);break;default:uo(e)}}),e.m.D(r.textTracks,"removetrack",function(){return uo(e)}),e.m.D(r.textTracks,"change",function(){return uo(e)})),p=kk(e.N,e.da,n),!p.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(p+="#t=",0<e.g.playRangeStart&&(p+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(p+=","+e.g.playRangeEnd)),r.src=p,(jo()||Fo())&&r.load(),r.preload!="none"&&!r.autoplay&&Pg(n)&&_s()&&r.load(),e.l=ki,e.dispatchEvent(cn("streaming")),w=new Zt,Qs(r,HTMLMediaElement.HAVE_METADATA,e.m,function(){e.C.ready(),w.resolve()}),Qs(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.m,function(){var L;return z(function(F){if(F.g==1)return jk(e),L=ju(e),L.find(function(U){return U.mode!="disabled"})?(0<L.length&&(e.oa=!0),F.u(2)):k(F,new Promise(function(U){e.m.ha(r.textTracks,"change",U),new Mt(U).Y(1)}),2);if(s)return F.return();Fk(e),V(F)})}),r.error?w.reject(Up(e)):r.preload=="none"&&(je('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),w.resolve()),e.m.ha(r,"error",function(){w.reject(Up(e))}),T=new Promise(function(L,F){new Mt(F).Y(e.g.streaming.loadTimeout)}),k(D,Promise.race([w,T]),2);((E=e.V())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(I=function(){return pv(e)},e.m.D(r,"timeupdate",I)),E||(A=function(){return Zf(e)},e.m.D(r,"timeupdate",A),Zf(e)),e.A&&(e.A.onManifestUpdated(E),E&&(R=e.Ob().end,e.m.D(r,"progress",function(){var L=e.Ob().end;R!=L&&(e.A.onManifestUpdated(e.V()),R=L)}))),e.Ea=!0,V(D)})}function jk(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Xg(t,e.g.preferredVariantRole)}function Fk(e){var t=e.g.preferredTextLanguage;t!=""&&e.Lf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function $k(e,t){if(t.kind=="metadata"){t.mode="hidden",e.m.D(t,"cuechange",function(){if(t.activeCues){for(var r=[],s=b(t.activeCues),l=s.next(),c={};!l.done;c={Ta:void 0},l=s.next())c.Ta=l.value,Lp(e,c.Ta.startTime,c.Ta.endTime,c.Ta.type,c.Ta.value),e.A&&e.A.onCueMetadataChange(c.Ta.value),c.Ta.type=="com.apple.quicktime.HLS"&&c.Ta.startTime!=null&&(l=r.find(function(d){return function(p){return p.startTime==d.Ta.startTime&&p.endTime==d.Ta.endTime}}(c)),l||(l={startTime:c.Ta.startTime,endTime:c.Ta.endTime,values:[]},r.push(l)),l.values.push(c.Ta.value));for(r=b(r),s=r.next();!s.done;s=r.next())s=s.value,s.values.some(function(d){return d.key=="X-ASSET-URI"||d.key=="X-ASSET-LIST"})&&e.A&&(s.values.push({key:"CUE",description:"",data:"ONCE",mimeType:null,pictureType:null}),e.A.onInterstitialMetadata(e,e.h,s))}});var n=new Mt(function(){var r=Xk(e);r=b(r);for(var s=r.next();!s.done;s=r.next())s.value.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}function ov(e,t,n,r){t=b(t);for(var s=t.next();!s.done;s=t.next())if(s=s.value,s.data&&typeof s.cueTime=="number"&&s.frames){var l=s.cueTime+n,c=r;c&&l>c&&(c=l);for(var d=b(s.frames),p=d.next();!p.done;p=d.next())Lp(e,l,c,"org.id3",p.value);e.A&&e.A.onHlsTimedMetadata(s,l)}}function Lp(e,t,n,r,s){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",r).set("payload",s),e.dispatchEvent(cn("metadata",t))}function rv(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new Mt(function(){t.mode="hidden"}).tc().Y(.5);e.md.push(function(){n.stop()})}}S.Ji=function(){for(var e=this.Z;e.g;)e.release()},S.yc=function(e){return new Tf(e)};function sv(e,t){function n(s){t()?t().dispatchEvent(s):e.dispatchEvent(s)}function r(s){t()?Ou(t(),!0,s):s()}return t||(t=function(){return null}),new nn(function(s,l,c,d){var p=t()?t().i:e.o;p&&p.segmentDownloaded(s,l,c,d)},function(s,l,c){l=new Map().set("headers",s).set("request",l).set("requestType",c),n(cn("downloadheadersreceived",l)),r(function(){if(e.ea){var d=e.ea;if(d.h.enabled){var p=s["cmsd-static"];if(p)try{var w=new Map,T=p.split(",");for(p=0;p<T.length;p++){var E=T[p].split("=");w.set(E[0],q1(E[1]))}}catch{}if(w=s["cmsd-dynamic"]){try{var I=new Map,A=w.split(";");for(w=1;w<A.length;w++){var R=A[w].split("=");I.set(R[0],q1(R[1]))}var D=I}catch{D=null}D&&(d.g=D)}}}})},function(s,l,c,d){s=new Map().set("request",s).set("error",l).set("httpResponseCode",c).set("aborted",d),n(cn("downloadfailed",s))},function(s,l,c){r(function(){var d=e.N,p=c;if(p=p===void 0?{}:p,d.g.enabled)if(l.method==="HEAD")ra(d,l);else switch(s){case 0:try{if(d.g.enabled){if(p.type){e:{switch(p.type){case 4:var w="d";break e;case 3:case 2:w="h";break e;case 5:w="s";break e}w=void 0}d.m=w}ra(d,l,{ot:X1,su:!d.i})}}catch(Ce){at("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Ce)}break;case Ro:try{if(d.g.enabled){var T=p.segment;w=0,T&&(w=T.endTime-T.startTime);var E={d:1e3*w,st:d.h.V()?"l":"v"};E.ot=Ik(p);var I=E.ot===Xf||E.ot===Wf||E.ot===qf||E.ot===Kf,A=p.stream;if(A){var R=d.h.eb();if(I&&(E.bl=Mk(d,A.type),E.ot!==Kf)){var D=W1(d,A.type);E.dl=R?D/Math.abs(R):D}if(A.bandwidth&&(E.br=A.bandwidth/1e3),A.segmentIndex&&T){var L=A.segmentIndex.Ib(T.endTime,!0,0>R);if(L){var F=L.next().value;if(F&&F!=T){if(!ln(T.M(),F.M())){var U=F.M()[0],q=l.uris[0],N=new URL(U),H=new URL(q);if(N.origin!==H.origin)var Y=U;else{for(var oe=N.pathname.split("/").slice(1),ae=H.pathname.split("/").slice(1,-1);oe[0]===ae[0];)oe.shift(),ae.shift();for(;ae.length;)ae.shift(),oe.unshift("..");Y=oe.join("/")}E.nor=Y}if((F.Ha||F.sa)&&(T.Ha!=F.Ha||T.sa!=F.sa)){var me=F.Ha+"-";F.sa&&(me+=F.sa),E.nrr=me}}}var ue=d.h.eb()||1,le=W1(d,A.type)||500,he=A.bandwidth,be=he?he*(T.endTime-T.startTime)/1e3/(le/ue/1e3)*d.g.rtpSafetyFactor:NaN;isNaN(be)||(E.rtp=be)}}I&&E.ot!==Kf&&(E.tb=_k(d,E.ot)/1e3),ra(d,l,E)}}catch(Ce){at("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Ce)}break;case 2:case 5:case 6:ra(d,l,{ot:"k"});break;case 4:ra(d,l,{ot:"o"})}})},function(s,l,c,d){(s=t()?t().j:e.F)&&s.banLocation&&s.banLocation(d)},function(s,l){if(l.data){l=l.data.byteLength;var c=t()?t().getStats():e.s;c&&(c.Cd=isNaN(c.Cd)?l:c.Cd+l,s===0&&(c.Hg=l))}})}function zk(e,t){return new g1(e.h,e.i,e.g.streaming,t,function(){e.Fb&&C1(e.Fb,!0),e.j&&e.j.Qc(),e.L&&rs(e)},function(n){return e.dispatchEvent(n)})}function Vk(e,t){t=new Hf(e.dd,e.V()||0<t),t.addEventListener("enter",function(r){Fu(e,"timelineregionenter",r.region)}),t.addEventListener("exit",function(r){Fu(e,"timelineregionexit",r.region)}),t.addEventListener("skip",function(r){var s=r.region;r.seeking||(Fu(e,"timelineregionenter",s),Fu(e,"timelineregionexit",s))});var n=new S1(e.h);return n.g.add(t),e.Zc&&n.g.add(e.Zc),n}function av(e,t,n){e.L=new Lb,e.L.g=js,oy(e.L,n,Math.min(.5,n/2)),Op(e),e.he=new Mt(function(){rs(e)}).Sa(.25),e.m.D(t,"waiting",function(){return rs(e)}),e.m.D(t,"stalled",function(){return rs(e)}),e.m.D(t,"canplaythrough",function(){return rs(e)}),e.m.D(t,"progress",function(){return rs(e)})}function rs(e){switch(e.l){case ki:if(e.h.ended)var t=!0;else{var n=Gd(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case vi:e:if(e.h.ended||i1(e.G))t=!0;else{if(e.i.presentationTimeline.V()){n=e.i.presentationTimeline.Wb();var r=Gd(e.h.buffered);if(r!=null&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=Gy(e.h.buffered,e.h.currentTime),n=e.L;var s=t,l=n.i.get(n.g);t=n.g,r=s||r>=l?xu:js,n.g=r,(t=t!=r)&&r===xu&&(n.h=Date.now()),t&&Op(e)}function Hk(e,t,n,r){return new t1(e,t,n,r)}function Gk(e){return new G1({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},wb:function(){return e.wb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},eb:function(){return e.eb()},xb:function(){return e.xb()},ic:function(){return e.ic()},V:function(){return e.V()}},e.g.cmcd)}function Wk(e){return new I1(e.i,{Md:function(){return e.C?e.C.yd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},eb:function(){return e.eb()},aa:e.G,Lb:e.H,onError:function(t){return ua(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Bi:function(){e.F&&e.F.update&&e.F.update()},Af:function(t,n){var r=t.startTime;t=t.endTime;var s=n.type;if(n=n.codecs.includes(","),e.C){e.C.Mg();var l=Jd(e.G,s);!e.V()&&e.h.paused&&l!=null&&0<l&&e.C.yd()<l&&e.C.Ee(l)}rs(e),r=new Map().set("start",r).set("end",t).set("contentType",s).set("isMuxed",n),e.dispatchEvent(cn("segmentappended",r))},Ai:function(t,n){(n=n.Hc)&&e.Zc&&FE(e.Zc,n,t)},kg:function(t,n){var r=e.B;if(r.h.parseInbandPsshEnabled&&!r.F&&["audio","video"].includes(t)){t=new vy(Ae(n)),n=0;for(var s=b(t.data),l=s.next();!l.done;l=s.next())n+=l.value.length;if(n==0)r=Promise.resolve();else{for(n=new Uint8Array(n),s=0,t=b(t.data),l=t.next();!l.done;l=t.next())l=l.value,n.set(l,s),s+=l.length;Su(r,"cenc",n),r=r.l}}else r=Promise.resolve();return r},onMetadata:function(t,n,r){ov(e,t,n,r)},disableStream:function(t,n){return e.disableStream(t,n)}})}S.configure=function(e,t){if(arguments.length==2&&typeof e=="string"&&(e=$f(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(Ot("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Ot("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(Ot("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&Ms(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){Ot("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var n=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=n}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var r=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+r,e.streaming.liveSync.targetLatencyTolerance=r}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Ot("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Ot("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Ot("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Ot("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Ot("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Ot("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Ot("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Ot("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Ot("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var s=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return s},delete e.mediaSource.sourceBufferExtraFeatures}return e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.updateIntervalSeconds==null&&(e.streaming.updateIntervalSeconds=.1),e.streaming.maxDisabledTime==null&&(e.streaming.maxDisabledTime=1),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.dash==null&&(e.manifest.dash={}),e.manifest.dash.autoCorrectDrift==null&&(e.manifest.dash.autoCorrectDrift=!1),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100)),n=Rr(this.g,e,sr(this)),uv(this),n};function uv(e){if(e.be=new zd(e.g,e.fa,e.B),e.F){var t=zo(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.F.configure(t)}if(e.B&&e.B.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.l!=Do&&By(e.be,e.i)&&uo(e)}catch(l){ua(e,l)}e.o&&ss(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||aa(e)}if(e.H&&(e.H.Pf(e.g.streaming.forceHTTP),e.H.Qf(e.g.streaming.forceHTTPS)),e.G)if(e.G.configure(e.g.mediaSource),e.G.fa=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.bg!=t){var n=t();n.configure?n.configure(e.g.textDisplayer):Ot("Text displayer w/ configure",'Text displayer should have a "configure" method!');var r=e.G,s=r.F;r.F=n,s&&(n.setTextVisibility(s.isTextVisible()),s.destroy()),r.g&&(r.g.j=n),e.bg=t,e.j&&(t=e.j,(n=t.i.get(Ut))&&Js(t,n.stream,!0,0,!0))}else t=e.G.F,t.configure&&t.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),vv(e)),e.L&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),oy(e.L,t,Math.min(.5,t/2))),e.i&&Bp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.N&&e.N.configure(e.g.cmcd),e.ea&&e.ea.configure(e.g.cmsd)}S.getConfiguration=function(){var e=sr(this);return Rr(e,this.g,sr(this)),e},S.Ag=function(){var e=sr(this);return Rr(e,this.g,sr(this)),D1(this.g,sr(this))},S.vg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ob().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},S.Ni=function(){for(var e in this.g)delete this.g[e];Rr(this.g,sr(this),sr(this)),uv(this)},S.yg=function(){return this.l},S.hf=function(){return this.i?this.i.type:null},S.Uh=function(){return this.h},S.xb=function(){return this.H},S.Dc=function(){return this.da},S.ug=function(){return this.A?this.A:null},S.V=function(){return this.i?this.i.presentationTimeline.V():this.h&&this.h.src?this.h.duration==1/0:!1},S.kc=function(){return this.i?this.i.presentationTimeline.kc():!1},S.ki=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},S.Ob=function(){if(this.i){if(!this.Ea&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Vb(),end:e.yb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},S.hi=function(){this.V()&&(this.h.currentTime=this.Ob().end)},S.li=function(){return this.Ea},S.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},S.drmInfo=function(){return this.B?this.B.g:null},S.ad=function(){return this.B?this.B.ad():1/0},S.ff=function(){return this.B?this.B.ff():[]},S.Ld=function(){return this.B?this.B.Ld():{}},S.pf=function(){return this.L?this.L.g==js:!1},S.eb=function(){return this.h?this.I?this.I.i:1:0},S.wd=function(e){var t=this;e==0?je("A trick play rate of 0 is unsupported!"):(this.Fa.Ra(),this.h.paused&&this.h.play(),this.I.set(e),this.l==vi&&(this.o.playbackRateChanged(e),M1(this.j,1<Math.abs(e))),this.V()&&this.Fa.D(this.h,"timeupdate",function(){var n=t.h.currentTime,r=t.Ob(),s=t.g.streaming.safeSeekOffset;0<e?Math.floor(n)>=Math.floor(r.end)&&t.Tc():Math.floor(n)<=Math.floor(r.start+s)&&t.Tc()}))},S.Tc=function(){var e=this.I.hc();this.l==ki&&this.I.set(e),this.l==vi&&(this.I.set(e),this.o.playbackRateChanged(e),M1(this.j,!1)),this.Fa.Ra()},S.ic=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,r=b(this.i.variants),s=r.next();!s.done;s=r.next())if(s=s.value,yu(s)){var l=Us(s);l.active=s==e,l.active||n==1||e==null||s.video!=e.video||s.audio!=e.audio||(l.active=!0),l.active&&n++,t.push(l)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(c){return _d(c)}):[]},S.Ec=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=b(this.i.textStreams),r=n.next();!r.done;r=n.next()){r=r.value;var s=lf(r);s.active=r==e,t.push(s)}return t}return this.h&&this.h.src&&this.h.textTracks?ju(this).map(function(l){return qg(l)}):[]},S.Oh=function(){var e=this.qd;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Id(t)})},S.Gh=function(e){var t=this,n,r,s,l;return z(function(c){return c.g==1?t.l!=vi&&t.l!=ki?c.return(null):(n=t.qd,t.i&&(n=t.i.imageStreams),(r=n.find(function(d){return d.id==e}))?r.segmentIndex?c.u(2):k(c,r.createSegmentIndex(),2):c.return(null)):c.g!=4?(s=[],r.segmentIndex.Hb(function(d){var p=lv(d.tilesLayout||r.tilesLayout);if(p){p=p.rows*p.dc;for(var w=d.j-d.startTime,T=0;T<p;T++)s.push(t.Cg(e,d.startTime+w*T/p))}}),k(c,Promise.all(s),4)):(l=c.h,c.return(l.filter(function(d){return d})))})};function lv(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{dc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}S.Cg=function(e,t){var n=this,r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N;return z(function(H){return H.g==1?n.l!=vi&&n.l!=ki?H.return(null):(r=n.qd,n.i&&(r=n.i.imageStreams),(s=r.find(function(Y){return Y.id==e}))?s.segmentIndex?H.u(2):k(H,s.createSegmentIndex(),2):H.return(null)):(l=s.segmentIndex.find(t),l==null||(c=s.segmentIndex.get(l),d=lv(c.tilesLayout||s.tilesLayout),!d)?H.return(null):(p=s.width||0,w=s.height||0,T=p/d.dc,E=w/d.rows,I=d.dc*d.rows,A=c.j-c.startTime,R=c.B||A/I,D=c.startTime,F=L=0,1<I&&(U=Math.floor((t-c.startTime)/R),D=c.startTime+U*R,L=U%d.dc*T,F=Math.floor(U/d.dc)*E),q=!1,(N=c.A)&&(q=!0,E=N.height,L=N.positionX,F=N.positionY,T=N.width),H.return({segment:c,imageHeight:w,imageWidth:p,height:E,positionX:L,positionY:F,startTime:D,duration:R,uris:c.M(),width:T,sprite:q})))})},S.Yg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(r){return r.id==e.id});t&&t!=this.j.s&&(ap(this.s.h,t,!1),Uf(this.j,t),ec(this),this.Db=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=ju(this),t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value,Md(n)==e.id?n.mode=this.oa?"showing":"hidden":n.mode="disabled";ec(this)}},S.Mf=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){var r=this.i.variants.find(function(l){return l.id==e.id});if(r&&yu(r)){var s=this.j.j;this.g.abr.enabled&&(s.video!=r.video||s.audio&&r.audio&&s.audio.language==r.audio.language&&s.audio.channelsCount==r.audio.channelsCount)&&je("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),Jf(this,r,!1,t,n),this.za=new iy(r,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),ss(this)}}else if(this.h&&this.h.audioTracks){for(t=Array.from(this.h.audioTracks),t=b(t),n=t.next();!n.done;n=t.next())if(n=n.value,Md(n)==e.id){mv(this,n);break}}},S.Ih=function(){return Sv(this.ic())},S.ai=function(){return Sv(this.Ec())},S.Hh=function(){return Array.from(wv(this.ic()))},S.$h=function(){return Array.from(wv(this.Ec()))},S.Xg=function(e,t,n,r,s){if(n=n===void 0?0:n,r=r===void 0?0:r,s=s===void 0?"":s,this.i&&this.C){this.za=new Bs(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups,s),e=function(c,d){return c.video||d.video?c.video&&d.video?Math.abs((c.video.height||0)-(d.video.height||0))+Math.abs((c.video.width||0)-(d.video.width||0)):1/0:0},t=this.j.j,s=this.za.create(this.i.variants),n=null,s=b(s.values());for(var l=s.next();!l.done;l=s.next())l=l.value,yu(l)&&(!n||e(n,t)>e(l,t))&&(n=l);n!=t&&(n?(e=Us(n),this.Mf(e,!0,r)):aa(this))}else this.h&&this.h.audioTracks&&(r=vu(this.ic(),e,t||"",!1)[0])&&this.Mf(r)},S.Lf=function(e,t,n){n=n===void 0?!1:n,this.i&&this.C?(this.Db=e,this.pd=t||"",this.od=n,(e=vu(this.i.textStreams,this.Db,this.pd,this.od)[0]||null)&&e!=this.j.s&&(ap(this.s.h,e,!1),this.g.streaming.alwaysStreamText||this.qf())&&(Uf(this.j,e),ec(this))):(e=vu(this.Ec(),e,t||"",n)[0])&&this.Yg(e)},S.Ti=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.C){for(var r=null,s=b(this.i.variants),l=s.next();!l.done;l=s.next())if(l=l.value,l.audio.label==e){r=l;break}r!=null&&(this.za=new Bs(r.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),aa(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=b(n),r=n.next();!r.done;r=n.next())r=r.value,r.label==e&&(t=r);t&&mv(this,t)}},S.qf=function(){var e=this.oa;return this.G&&this.l==vi?this.G.F.isTextVisible():this.h&&this.h.src&&this.h.textTracks?ju(this).some(function(t){return t.mode=="showing"}):e},S.wg=function(){return this.h&&this.h.src&&this.h.textTracks?fv(this).map(function(e){return qg(e)}):[]},S.Kh=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=Kt(e),n=fv(this).filter(function(d){return Kt(d.language)==t});if(!n||!n.length)return[];e=[];var r=new Set;n=b(n);for(var s=n.next();!s.done;s=n.next())if((s=s.value)&&s.cues){s=b(s.cues);for(var l=s.next();!l.done;l=s.next()){var c=l.value;(l=c.id)&&l!=""||(l=c.startTime+"-"+c.endTime+"-"+c.text),c={id:l,title:c.text,startTime:c.startTime,endTime:c.endTime},r.has(l)||(e.push(c),r.add(l))}}return e};function ju(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function Xk(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function fv(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}S.eh=function(e){if(e=!!e,this.oa!=e){if(this.oa=e,this.l==vi)this.G.F.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=vu(this.i.textStreams,this.Db,this.pd,this.od),0<e.length&&(Uf(this.j,e[0]),ec(this))):qE(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=ju(this);t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}yv(this)}},S.Wh=function(){if(this.C)var e=this.C.yd();else{if(this.pa==null)return new Date;e=this.pa}if(this.i){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},S.Bg=function(){if(this.i){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},S.Od=function(){return this.V()&&this.i?this.i.presentationTimeline.Od():null},S.wb=function(){if(this.l==vi)return this.G.wb();var e={total:[],audio:[],video:[],text:[]};return this.l==ki&&(e.total=_r(this.h.buffered)),e},S.getStats=function(){if(this.l!=vi&&this.l!=ki)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Qf(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)&&!this.V()){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.C&&(this.s.U=this.C.fg(),this.s.Z=this.C.gg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var r=Number(n.totalVideoFrames);t.R=Number(n.droppedVideoFrames),t.N=r,this.s.L=Number(n.corruptedVideoFrames)}if(this.B?(n=this.B,n=n.I?n.I:NaN):n=NaN,this.s.s=n,this.l==vi){if(n=this.j.j,t=this.j.s,n){r=this.I?this.I.i:1;var s=r*n.bandwidth;t&&t.bandwidth&&(s+=r*t.bandwidth),this.s.B=s}n&&n.video&&(t=this.s,r=n.video.height||NaN,t.o=n.video.width||NaN,t.l=r),this.V()&&(n=this.Bg().valueOf()+1e3*e.currentTime,this.s.C=(Date.now()-n)/1e3),this.i&&(this.s.G=this.i.periodCount,this.s.F=this.i.gapCount,this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.g)),n=this.o.getBandwidthEstimate(),this.s.A=n}this.l==ki&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var l=this.s;e=l.o,n=l.l,t=l.B,r=l.N,s=l.R;var c=l.L,d=l.Z,p=l.U,w=l.A,T=l.i,E=l.m,I=l.H,A=l.j,R=sp(l.g,"playing"),D=sp(l.g,"paused"),L=sp(l.g,"buffering"),F=l.s,U=l.C,q=l.I,N=l.Hg,H=l.Cd,Y=l.K,oe=l.G,ae=l.F,me=OE(l.g),ue=[];l=b(l.h.g);for(var le=l.next();!le.done;le=l.next())le=le.value,ue.push({timestamp:le.timestamp,id:le.id,type:le.type,fromAdaptation:le.fromAdaptation,bandwidth:le.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:s,corruptedFrames:c,stallsDetected:d,gapsJumped:p,estimatedBandwidth:w,completionPercent:T,loadLatency:E,manifestTimeSeconds:I,drmTimeSeconds:A,playTime:R,pauseTime:D,bufferingTime:L,licenseTime:F,liveLatency:U,maxSegmentDuration:q,manifestSizeBytes:N,bytesDownloaded:H,nonFatalErrorCount:Y,manifestPeriodCount:oe,manifestGapCount:ae,stateHistory:me,switchHistory:ue}},S.uh=function(e,t,n,r,s,l,c){c=c===void 0?!1:c;var d=this,p,w,T,E,I,A,R,D,L,F,U,q;return z(function(N){switch(N.g){case 1:if(d.l!=vi&&d.l!=ki)throw new re(1,7,7004);if(n!="subtitles"&&n!="captions"&&je("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){N.u(2);break}return k(N,Dp(d,e),3);case 3:r=N.h;case 2:if(p=[],d.A&&(p=d.A.getCuePoints()),d.l!=ki){N.u(4);break}return c&&(n="forced"),k(N,cv(d,e,t,n,r,l||"",p),5);case 5:if(w=Kt(t),T=d.Ec(),E=T.find(function(H){return Kt(H.language)==w&&H.label==(l||"")&&H.kind==n}))return uo(d),N.return(E);throw new re(1,2,2012);case 4:if(I=zn,A=d.h.duration,d.i&&(A=d.i.presentationTimeline.getDuration()),A==1/0)throw new re(1,4,4033);if(!p.length){N.u(6);break}return k(N,Pp(d,e,d.H,d.g.streaming.retryParameters),7);case 7:R=N.h,D=hv(d,R,r,p),L=new Blob([D],{type:"text/vtt"}),e=Rf(L),r="text/vtt";case 6:if(F={id:d.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:rp(0,A,[e]),mimeType:r||"",codecs:s||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:l||null,type:I.ua,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!c,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Vn(r||"",s||"")])},U=Vn(F.mimeType,F.codecs),q=pu(U),!q)throw new re(2,2,2014,r);return d.i.textStreams.push(F),uo(d),N.return(lf(F))}})},S.vh=function(e,t){var n=this,r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U;return z(function(q){switch(q.g){case 1:if(n.l!=vi&&n.l!=ki)throw new re(1,7,7004);if(t){q.u(2);break}return k(q,Dp(n,e),3);case 3:t=q.h;case 2:if(t!="text/vtt")throw new re(1,2,2017,e);if(r=zn,s=n.h.duration,n.i&&(s=n.i.presentationTimeline.getDuration()),s==1/0)throw new re(1,4,4045);return k(q,Pp(n,e,n.H,n.g.streaming.retryParameters),4);case 4:if(l=q.h,c=Hn[t],!c)throw new re(2,2,2014,t);for(d=c(),p={periodStart:0,segmentStart:0,segmentEnd:s,vttOffset:0},w=Ae(l),T=d.parseMedia(w,p,e),E=[],I=b(T),A=I.next(),R={};!A.done;R={ye:void 0,zc:void 0},A=I.next())R.zc=A.value,R.ye=null,D=function(N){return function(){return N.ye==null&&(N.ye=ri([e],[N.zc.payload])),N.ye||[]}}(R),L=new ft(R.zc.startTime,R.zc.endTime,D,0,null,null,0,0,1/0),R.zc.payload.includes("#xywh")&&(F=R.zc.payload.split("#xywh=")[1].split(","),F.length===4&&L.fh({height:parseInt(F[3],10),positionX:parseInt(F[0],10),positionY:parseInt(F[1],10),width:parseInt(F[2],10)})),E.push(L);return U={id:n.cg++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ft(E),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:r.De,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Vn(t||"","")])},n.l==ki?n.qd.push(U):n.i.imageStreams.push(U),uo(n),q.return(Id(U))}})},S.th=function(e,t,n){var r=this,s,l,c,d;return z(function(p){switch(p.g){case 1:if(r.l!=vi&&r.l!=ki)throw new re(1,7,7004);if(n){p.u(2);break}return k(p,Dp(r,e),3);case 3:n=p.h;case 2:return s=[],r.A&&(s=r.A.getCuePoints()),k(p,cv(r,e,t,"chapters",n,"",s),4);case 4:if(l=p.h,c=r.wg(),d=c.find(function(w){return w.language==t}),!d){p.u(5);break}return k(p,new Promise(function(w,T){r.m.ha(l,"load",w),r.m.ha(l,"error",function(){T(new re(1,2,2015))})}),6);case 6:return uo(r),p.return(d);case 5:throw new re(1,2,2012)}})};function Dp(e,t){var n;return z(function(r){switch(r.g){case 1:return Q(r,2),k(r,Tp(t,e.H,e.g.streaming.retryParameters),4);case 4:n=r.h,J(r,3);break;case 2:te(r);case 3:if(n)return r.return(n);throw new re(1,2,2011,t)}})}function cv(e,t,n,r,s,l,c){var d,p,w,T;return z(function(E){if(E.g==1)return s!="text/vtt"||c.length?k(E,Pp(e,t,e.H,e.g.streaming.retryParameters),3):E.u(2);E.g!=2&&(d=E.h,p=hv(e,d,s,c),w=new Blob([p],{type:"text/vtt"}),t=Rf(w),s="text/vtt"),T=document.createElement("track");var I=e.N,A=t;try{if(I.g.enabled){var R=kp(I);R.ot=Ip,R.su=!0;var D=Gf(R),L=Ap(A,D)}else L=A}catch(F){at("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",F),L=A}return T.src=L,T.label=l,T.kind=r,T.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(T),E.return(T)})}function Pp(e,t,n,r){var s,l,c;return z(function(d){if(d.g==1){s=Ro,l=Qn([t],r),l.method="GET";var p=e.N;try{p.g.enabled&&ra(p,l,{ot:Ip,su:!0})}catch(w){at("CMCD_TEXT_ERROR","Could not generate text CMCD data.",w)}return k(d,n.request(s,l).promise,2)}return c=d.h,d.return(c.data)})}function hv(e,t,n,r){var s=Hn[n];if(s)return n=s(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Ae(t),t=n.parseMedia(t,e,null),bk(t,r);throw new re(2,2,2014,n)}S.Yi=function(e,t){this.fa.width=e,this.fa.height=t},S.If=function(e){if(this.l==vi){var t=this.j;if(e=e===void 0?.1:e,t.m.g)t=!1;else if(t.A)t=!1;else{for(var n=b(t.i.values()),r=n.next();!r.done;r=n.next())r=r.value,!r.fd||r.Qa||r.sb||(r.fd=!1,ro(t,r,e));t=!0}}else t=!1;return t},S.gf=function(){return je("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},S.Rh=function(){return this.ab};function sr(e){var t=ta();return t.streaming.failureCallback=function(n){if(e.V()){var r=null;n.code==1001||n.code==1002?(r=1,e.g.streaming.lowLatencyMode&&(r=.1)):n.code==1003&&(r=.1),r!=null&&(n.severity=1,e.If(r))}},t.textDisplayFactory=function(){if(e.de){var n=e.getConfiguration();return new Ui(e.h,e.de,n.textDisplayer)}return HTMLMediaElement.prototype.addTextTrack?new Oi(e.h,"Shaka Player TextTrack"):new Ni},t}S.ih=function(e){this.de=e};function qk(e,t){for(var n=new Set,r=b(t.textStreams),s=r.next();!s.done;s=r.next())s=s.value,s.mimeType!="application/cea-608"&&s.mimeType!="application/cea-708"||n.add(s.originalId);for(r=b(t.variants),s=r.next();!s.done;s=r.next())if((s=s.value.video)&&s.closedCaptions){for(var l=b(s.closedCaptions.keys()),c=l.next();!c.done;c=l.next())if(c=c.value,!n.has(c)){var d=c.startsWith("CC")?"application/cea-608":"application/cea-708",p=new In,w=s.closedCaptions.get(c);d={id:e.cg++,originalId:c,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:p,mimeType:d,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:w,originalLanguage:w,label:null,type:Ut,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:s.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Vn(d,"")])},t.textStreams.push(d),n.add(c)}}}function Kk(e,t){var n,r,s,l,c;return z(function(d){return d.g==1?(n=e.audio,r=e.video,s=function(p,w){var T,E,I;return z(function(A){return A.g==1?p?k(A,p.createSegmentIndex(),2):A.return(null):(E=(T=p.segmentIndex.Ib(w))?T.next().value:null,E?(I=E.startTime,A.return(I)):A.return(null))})},k(d,s(n,t),2)):d.g!=3?(l=d.h,k(d,s(r,t),3)):(c=d.h,c!=null&&l!=null?d.return(Math.max(c,l)):c!=null?d.return(c):l!=null?d.return(l):d.return(t))})}function Op(e){var t=e.pf();if(e.s&&e.L&&e.C){var n=e.I;if(n.j=t,w1(n),e.N&&(n=e.N,t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t),Qf(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.ze<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,s=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.R&&(e.R=Math.min(e.R+ ++e.ze*s,n-r))}}t=new Map().set("buffering",t),e.dispatchEvent(cn("buffering",t))}function dv(e){var t=e.h.playbackRate;t!=0&&(e.I&&e.I.set(t),t=cn("ratechange"),e.dispatchEvent(t))}function Qf(e){if(e.s&&e.L){var t=e.s.g,n="playing";e.L.g==js?n="buffering":e.h.ended?n="ended":e.h.paused&&(n="paused");var r=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var s=Date.now()/1e3;t.g.duration=s-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:s,state:r,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(cn("statechanged",n)))}}function pv(e){var t=e.h.playbackRate,n=e.V();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,s=e.vg();s<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.wd(r):s==1&&t!==e.I.hc()&&e.Tc()}if(n&&(n=e.Ob(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start))){r=e.g.streaming.liveSync.targetLatencyTolerance,s=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var l=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var c=e.g.streaming.liveSync.targetLatency,d=c+r,p=Math.max(0,c-r),w=e.g.streaming.liveSync.maxPlaybackRate,T=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(c=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?d=e.i.serviceDescription.targetLatency+r:e.i.serviceDescription.maxLatency!=null&&(d=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?p=Math.max(0,e.i.serviceDescription.targetLatency-r):e.i.serviceDescription.minLatency!=null&&(p=e.i.serviceDescription.minLatency),w=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,T=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.R||typeof c!="number"||(e.R=c);var E=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;s&&e.Da&&e.R!==null&&typeof c=="number"&&e.ze<E&&Date.now()-e.Da>1e3*l&&(l=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.R=Math.max(e.R-(c-l)/2,l+r),e.Da=Date.now()),s&&e.R!==null&&(d=e.R+r,p=e.R-r),c=n.end-e.h.currentTime,r=0,e.l==ki&&(s=e.h.buffered,0<s.length&&(r=s.end(s.length-1),r=Math.max(w,r-n.end))),n=e.g.streaming.liveSync.panicMode,s=1e3*e.g.streaming.liveSync.panicThreshold,l=Date.now()-e.L.h,n&&!T&&(T=e.g.streaming.liveSync.minPlaybackRate),n&&T&&l<=s?t!=T&&e.wd(T):d&&w&&c-r>d?(t!=w&&e.wd(w),e.Da=null):p&&T&&c-r<p?(t!=T&&e.wd(T),e.Da=null):t!==e.I.hc()&&(e.Tc(),e.Da=Date.now())}}function Zf(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.U)?(e.U=n,t=!0):(n=Math.max(e.U,n),e.U!=n&&(e.U=n,t=!0))),t){var r;e.U==0?r=cn("started"):e.U==25?r=cn("firstquartile"):e.U==50?r=cn("midpoint"):e.U==75?r=cn("thirdquartile"):e.U==100&&(r=cn("complete")),r&&e.dispatchEvent(r)}}}function ss(e){try{jy(e.be,e.i)}catch(n){return ua(e,n),!1}var t=ff(e.i.variants);return t=e.za.create(t),e.o.setVariants(Array.from(t.values())),!0}function aa(e,t,n,r,s){t=t===void 0?!0:t,n=n===void 0?0:n,r=r===void 0?!1:r,s=s===void 0?!0:s;var l;(l=ss(e)?e.o.chooseVariant():null)&&Jf(e,l,s,t,n,r)}function Jf(e,t,n,r,s,l){l=l===void 0?!1:l;var c=e.j.j;if(t==c)r&&_1(e.j,t,r,s,!0);else{var d=e.s.h;d.h!=t&&(d.h=t,d.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),_1(e.j,t,r,s,l,n),r=null,c&&(r=Us(c)),t=Us(t),n?(n=new Map().set("oldTrack",r).set("newTrack",t),e.K&&e1(e.K,t,e.hf()),n=cn("adaptation",n),la(e,n)):gv(e,r,t)}}function mv(e,t){var n=Array.from(e.h.audioTracks).find(function(r){return r.enabled});t.enabled=!0,n&&(t.id!==n.id&&(n.enabled=!1),n=_d(n),t=_d(t),gv(e,n,t))}function Yk(e,t,n){if(e.g.autoShowText==0)return!1;if(e.g.autoShowText==1)return!0;var r=Kt(e.g.preferredTextLanguage);return n=Kt(n.language),e.g.autoShowText==2?Os(n,r):e.g.autoShowText==3?t?(e=Kt(t.language),Os(n,r)&&!Os(e,n)):!1:(je("Invalid autoShowText setting!"),!1)}function uo(e){var t=cn("trackschanged");la(e,t)}function gv(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.K&&e1(e.K,n,e.hf()),n=cn("variantchanged",t),la(e,n)}function ec(e){var t=cn("textchanged");la(e,t)}function yv(e){var t=cn("texttrackvisibility");la(e,t)}function vv(e){e.g.abr.enabled||Np(e);var t=new Map().set("newStatus",e.g.abr.enabled);la(e,cn("abrstatuschanged",t))}function Np(e,t){if(t=t===void 0?!0:t,e.l==vi){e.je.stop();for(var n=b(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&ss(e)}}S.disableStream=function(e,t){if(!this.g.abr.enabled||this.l===Do||!navigator.onLine||t==0)return!1;if(this.i.variants.some(function(l){var c=l[e.type];return c&&c.id!==e.id&&!l.disabledUntilTime?e.type=="audio"?e.language===c.language:!0:!1})){for(var n=b(this.i.variants),r=n.next();!r.done;r=n.next()){r=r.value;var s=r[e.type];s&&s.id===e.id&&(r.disabledUntilTime=Date.now()/1e3+t)}return this.je.Sa(1),t=this.wb().video.reduce(function(l,c){return l+c.end-c.start},0),aa(this,!1,t,!0,!1),!0}return!1};function ua(e,t){var n,r,s;return z(function(l){switch(l.g){case 1:if(e.l==Do)return l.return();if(t.severity===1&&e.s.K++,n=!0,!(e.Ea&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){l.u(2);break}return Q(l,3),k(l,sk(e.j),5);case 5:r=l.h,n=!r,J(l,2);break;case 3:te(l),n=!0;case 2:if(!n)return l.return();t.severity===2&&Np(e,!1),s=cn("error",new Map().set("detail",t)),e.dispatchEvent(s),s.defaultPrevented&&(t.handled=!0),V(l)}})}function Fu(e,t,n,r){r=r===void 0?e:r,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(cn(t,e))}function xv(e,t,n,r){r=r===void 0?!1:r,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(cn(r?"audiotrackchanged":"mediaqualitychanged",t))}function Up(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new re(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new re(2,3,3016,n,t,e.h.error.message))}function Bp(e,t,n){0<t&&(e.V()||e.hh(t)),t=e.getDuration(),n<t&&(e.V()||e.Za(n))}function la(e,t){z(function(n){if(n.g==1)return k(n,Promise.resolve(),2);e.l!=Do&&e.dispatchEvent(t),V(n)})}function wv(e){var t=new Set;e=b(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Kt(n.language)):t.add("und");return t}function Sv(e){var t=new Map,n=new Map;e=b(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var s="und",l=[];r.language&&(s=Kt(r.language)),r.type=="variant"?l=r.audioRoles:l=r.roles,l&&l.length||(l=[""]),t.has(s)||t.set(s,new Set),l=b(l);for(var c=l.next();!c.done;c=l.next())c=c.value,t.get(s).add(c),r.label&&(n.has(s)||n.set(s,new Map),n.get(s).set(c,r.label))}var d=[];return t.forEach(function(p,w){p=b(p);for(var T=p.next();!T.done;T=p.next()){T=T.value;var E=null;n.has(w)&&n.get(w).has(T)&&(E=n.get(w).get(T)),d.push({language:w,role:T,label:E})}}),d}we("shaka.Player",Te),Te.prototype.setVideoContainer=Te.prototype.ih,Te.prototype.getManifestParserFactory=Te.prototype.Rh,Te.prototype.getManifest=Te.prototype.gf,Te.prototype.retryStreaming=Te.prototype.If,Te.prototype.setMaxHardwareResolution=Te.prototype.Yi,Te.prototype.addChaptersTrack=Te.prototype.th,Te.prototype.addThumbnailsTrack=Te.prototype.vh,Te.prototype.addTextTrackAsync=Te.prototype.uh,Te.prototype.getStats=Te.prototype.getStats,Te.prototype.getBufferedInfo=Te.prototype.wb,Te.prototype.getSegmentAvailabilityDuration=Te.prototype.Od,Te.prototype.getPresentationStartTimeAsDate=Te.prototype.Bg,Te.prototype.getPlayheadTimeAsDate=Te.prototype.Wh,Te.prototype.setTextTrackVisibility=Te.prototype.eh,Te.prototype.getChapters=Te.prototype.Kh,Te.prototype.getChaptersTracks=Te.prototype.wg,Te.prototype.isTextTrackVisible=Te.prototype.qf,Te.prototype.selectVariantsByLabel=Te.prototype.Ti,Te.prototype.selectTextLanguage=Te.prototype.Lf,Te.prototype.selectAudioLanguage=Te.prototype.Xg,Te.prototype.getTextLanguages=Te.prototype.$h,Te.prototype.getAudioLanguages=Te.prototype.Hh,Te.prototype.getTextLanguagesAndRoles=Te.prototype.ai,Te.prototype.getAudioLanguagesAndRoles=Te.prototype.Ih,Te.prototype.selectVariantTrack=Te.prototype.Mf,Te.prototype.selectTextTrack=Te.prototype.Yg,Te.prototype.getThumbnails=Te.prototype.Cg,Te.prototype.getAllThumbnails=Te.prototype.Gh,Te.prototype.getImageTracks=Te.prototype.Oh,Te.prototype.getTextTracks=Te.prototype.Ec,Te.prototype.getVariantTracks=Te.prototype.ic,Te.prototype.cancelTrickPlay=Te.prototype.Tc,Te.prototype.trickPlay=Te.prototype.wd,Te.prototype.getPlaybackRate=Te.prototype.eb,Te.prototype.isBuffering=Te.prototype.pf,Te.prototype.getKeyStatuses=Te.prototype.Ld,Te.prototype.getActiveSessionsMetadata=Te.prototype.ff,Te.prototype.getExpiration=Te.prototype.ad,Te.prototype.drmInfo=Te.prototype.drmInfo,Te.prototype.keySystem=Te.prototype.keySystem,Te.prototype.isFullyLoaded=Te.prototype.li,Te.prototype.goToLive=Te.prototype.hi,Te.prototype.seekRange=Te.prototype.Ob,Te.prototype.isAudioOnly=Te.prototype.ki,Te.prototype.isInProgress=Te.prototype.kc,Te.prototype.isLive=Te.prototype.V,Te.prototype.getAdManager=Te.prototype.ug,Te.prototype.getAssetUri=Te.prototype.Dc,Te.prototype.getNetworkingEngine=Te.prototype.xb,Te.prototype.getMediaElement=Te.prototype.Uh,Te.prototype.getManifestType=Te.prototype.hf,Te.prototype.getLoadMode=Te.prototype.yg,Te.prototype.resetConfiguration=Te.prototype.Ni,Te.prototype.getBufferFullness=Te.prototype.vg,Te.prototype.getNonDefaultConfiguration=Te.prototype.Ag,Te.prototype.getConfiguration=Te.prototype.getConfiguration,Te.prototype.configure=Te.prototype.configure,Te.prototype.releaseAllMutexes=Te.prototype.Ji,Te.prototype.destroyAllPreloads=Te.prototype.Qe,Te.prototype.preload=Te.prototype.preload,Te.prototype.detachAndSavePreload=Te.prototype.qg,Te.prototype.unloadAndSavePreload=Te.prototype.aj,Te.prototype.load=Te.prototype.load,Te.prototype.updateStartTime=Te.prototype.ej,Te.prototype.unload=Te.prototype.bc,Te.prototype.detach=Te.prototype.detach,Te.prototype.attachCanvas=Te.prototype.zh,Te.prototype.attach=Te.prototype.Rb,Te.probeSupport=function(e){e=e===void 0?!0:e;var t,n,r,s,l,c,d;return z(function(p){switch(p.g){case 1:if(t={},!e){p.u(2);break}return k(p,Qb(),3);case 3:t=p.h;case 2:var w={};if(Io())for(var T in Co)w[T]=!0;T=b(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var E=T.next();!E.done;E=T.next())E=E.value,w[E]=Io()?!!Co[E]:cu(E);for(n=w,T='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(_(kr)),w={},T=b(T),E=T.next();!E.done;E=T.next()){E=E.value,w[E]=pu(E)?!0:Io()?ct(E)||!!At(E):cu(E);var I=E.split(";")[0];w[I]=w[I]||w[E]}return r=w,k(p,Mg(),4);case 4:s=p.h,l={manifest:n,media:r,drm:t,hardwareResolution:s},c=Fp;for(d in c)l[d]=c[d]();return p.return(l)}})},Te.isBrowserSupported=function(){if(h.Promise||je("A Promise implementation or polyfill is required"),!(h.Promise&&h.Uint8Array&&Array.prototype.forEach)||Qt("Trident/"))return!1;var e=_s();return e&&9>e||!(h.MediaKeys&&h.navigator&&h.navigator.requestMediaKeySystemAccess&&h.MediaKeySystemAccess&&h.MediaKeySystemAccess.prototype.getConfiguration)?!1:Io()?!0:cu("application/x-mpegurl")},Te.setAdManagerFactory=function(e){tc=e},Te.registerSupportPlugin=function(e,t){Fp[e]=t},Te.prototype.destroy=Te.prototype.destroy;var Do=0,jp=1,vi=2,ki=3;Te.LoadMode={DESTROYED:Do,NOT_LOADED:jp,MEDIA_SOURCE:vi,SRC_EQUALS:ki},Te.version="v4.10.12";var Cv=["4","10"];mi=new function(e){this.g=e,this.i=mn,this.h=bn}(new Bn(Number(Cv[0]),Number(Cv[1])));var Fp={},tc=null;function Tv(){this.g=[],this.i=this.l=this.j=this.h=0}function Qk(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function mt(e,t,n){var r=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new Ct,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}S=mt.prototype,S.needsSkipUI=function(){return!1},S.getDuration=function(){return this.g.getDuration()},S.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},S.getRemainingTime=function(){return this.h.getRemainingTime()},S.isPaused=function(){return this.i},S.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},S.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},S.canSkipNow=function(){return this.h.getAdSkippableState()},S.skip=function(){return this.h.skip()},S.pause=function(){return this.h.pause()},S.play=function(){return this.h.resume()},S.getVolume=function(){return this.h.getVolume()},S.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},S.isMuted=function(){return this.h.getVolume()==0},S.isLinear=function(){return this.g.isLinear()},S.resize=function(e,t){var n=!1,r=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:r.webkitSupportsFullscreen&&(n=r.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},S.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},S.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},S.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},S.getTitle=function(){return this.g.getTitle()},S.getDescription=function(){return this.g.getDescription()},S.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},S.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},S.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},S.getAdId=function(){return this.g.getAdId()},S.getCreativeAdId=function(){return this.g.getCreativeAdId()},S.getAdvertiserName=function(){return this.g.getAdvertiserName()},S.getMediaUrl=function(){return this.g.getMediaUrl()},S.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},S.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},S.release=function(){this.h=this.g=null},we("shaka.ads.ClientSideAd",mt),mt.prototype.release=mt.prototype.release,mt.prototype.getPodIndex=mt.prototype.getPodIndex,mt.prototype.getTimeOffset=mt.prototype.getTimeOffset,mt.prototype.getMediaUrl=mt.prototype.getMediaUrl,mt.prototype.getAdvertiserName=mt.prototype.getAdvertiserName,mt.prototype.getCreativeAdId=mt.prototype.getCreativeAdId,mt.prototype.getAdId=mt.prototype.getAdId,mt.prototype.getVastMediaWidth=mt.prototype.getVastMediaWidth,mt.prototype.getVastMediaHeight=mt.prototype.getVastMediaHeight,mt.prototype.getVastMediaBitrate=mt.prototype.getVastMediaBitrate,mt.prototype.getDescription=mt.prototype.getDescription,mt.prototype.getTitle=mt.prototype.getTitle,mt.prototype.getPositionInSequence=mt.prototype.getPositionInSequence,mt.prototype.getSequenceLength=mt.prototype.getSequenceLength,mt.prototype.setMuted=mt.prototype.setMuted,mt.prototype.resize=mt.prototype.resize,mt.prototype.isLinear=mt.prototype.isLinear,mt.prototype.isMuted=mt.prototype.isMuted,mt.prototype.setVolume=mt.prototype.setVolume,mt.prototype.getVolume=mt.prototype.getVolume,mt.prototype.play=mt.prototype.play,mt.prototype.pause=mt.prototype.pause,mt.prototype.skip=mt.prototype.skip,mt.prototype.canSkipNow=mt.prototype.canSkipNow,mt.prototype.getTimeUntilSkippable=mt.prototype.getTimeUntilSkippable,mt.prototype.isSkippable=mt.prototype.isSkippable,mt.prototype.isPaused=mt.prototype.isPaused,mt.prototype.getRemainingTime=mt.prototype.getRemainingTime,mt.prototype.getMinSuggestedDuration=mt.prototype.getMinSuggestedDuration,mt.prototype.getDuration=mt.prototype.getDuration,mt.prototype.needsSkipUI=mt.prototype.needsSkipUI;function sn(){}we("shaka.ads.Utils",sn),sn.ADS_LOADED="ads-loaded",sn.AD_STARTED="ad-started",sn.AD_FIRST_QUARTILE="ad-first-quartile",sn.AD_MIDPOINT="ad-midpoint",sn.AD_THIRD_QUARTILE="ad-third-quartile",sn.AD_COMPLETE="ad-complete",sn.AD_STOPPED="ad-stopped",sn.AD_SKIPPED="ad-skipped",sn.AD_VOLUME_CHANGED="ad-volume-changed",sn.AD_MUTED="ad-muted",sn.AD_PAUSED="ad-paused",sn.AD_RESUMED="ad-resumed",sn.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",sn.CUEPOINTS_CHANGED="ad-cue-points-changed",sn.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",sn.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",sn.AD_CLICKED="ad-clicked",sn.AD_PROGRESS="ad-progress",sn.AD_BUFFERING="ad-buffering",sn.AD_IMPRESSION="ad-impression",sn.AD_DURATION_CHANGED="ad-duration-changed",sn.AD_CLOSED="ad-closed",sn.AD_LOADED="ad-loaded",sn.ALL_ADS_COMPLETED="all-ads-completed",sn.AD_LINEAR_CHANGED="ad-linear-changed",sn.AD_METADATA="ad-metadata",sn.AD_RECOVERABLE_ERROR="ad-recoverable-error",sn.AD_ERROR="ad-error",sn.AD_BREAK_READY="ad-break-ready",sn.AD_INTERACTION="ad-interaction",sn.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",sn.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",sn.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function nc(e,t,n,r,s){var l=this;this.s=e,this.i=t,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=s,this.j=null,this.h=new Ct,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.s,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.10.12"),this.g=null,this.B=r||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(c){Zk(l,c)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(c){bv(l,c)}),this.h.D(this.i,"ended",function(){l.m.contentComplete()}),this.h.ha(this.i,"play",function(){l.F=!0})}nc.prototype.configure=function(e){this.o=e},nc.prototype.stop=function(){this.g&&this.g.stop(),this.s&&ia(this.s)},nc.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function bv(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new $e("ad-error",t)),oc(e,null),e.l(new $e("ad-cue-points-changed",new Map().set("cuepoints",[])))}function Zk(e,t){if(e.l(new $e("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.B);e.l(new $e("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var r=e.g.getCuePoints();if(r.length){t=[],r=b(r);for(var s=r.next();!s.done;s=r.next())t.push({start:s.value,end:null});e.l(new $e("ad-cue-points-changed",new Map().set("cuepoints",t)))}Jk(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,ic(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,ic(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in h?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,ic(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,ic(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.ha(e.i,"play",function(){e.F=!0,e.g.start()})}catch{oc(e,null)}}function ic(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function Jk(e){function t(n,r){n=new Map().set("originalEvent",n),e.l(new $e(r,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){bv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){Ev(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){Ev(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){oc(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){oc(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function Ev(e,t){var n=t.getAd();n?(e.j=new mt(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new $e("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new $e("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):je("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function oc(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new $e("ad-content-resume-requested")),e.l(new $e("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function gt(e,t,n,r,s){this.g=e,this.h=t,this.j=n,this.l=r,this.i=s}S=gt.prototype,S.needsSkipUI=function(){return!0},S.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},S.getMinSuggestedDuration=function(){return this.getDuration()},S.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},S.isPaused=function(){return this.g.paused},S.isSkippable=function(){return this.h},S.getTimeUntilSkippable=function(){return this.h?0:Math.max(this.getRemainingTime(),0)},S.canSkipNow=function(){return this.getTimeUntilSkippable()==0},S.skip=function(){this.j()},S.pause=function(){return this.g.pause()},S.play=function(){return this.g.play()},S.getVolume=function(){return this.g.volume},S.setVolume=function(e){this.g.volume=e},S.isMuted=function(){return this.g.muted},S.isLinear=function(){return!0},S.resize=function(){},S.setMuted=function(e){this.g.muted=e},S.getSequenceLength=function(){return this.l},S.getPositionInSequence=function(){return this.i},S.getTitle=function(){return""},S.getDescription=function(){return""},S.getVastMediaBitrate=function(){return 0},S.getVastMediaHeight=function(){return 0},S.getVastMediaWidth=function(){return 0},S.getAdId=function(){return""},S.getCreativeAdId=function(){return""},S.getAdvertiserName=function(){return""},S.getMediaUrl=function(){return null},S.getTimeOffset=function(){return 0},S.getPodIndex=function(){return 0},S.release=function(){this.g=null},we("shaka.ads.InterstitialAd",gt),gt.prototype.release=gt.prototype.release,gt.prototype.getPodIndex=gt.prototype.getPodIndex,gt.prototype.getTimeOffset=gt.prototype.getTimeOffset,gt.prototype.getMediaUrl=gt.prototype.getMediaUrl,gt.prototype.getAdvertiserName=gt.prototype.getAdvertiserName,gt.prototype.getCreativeAdId=gt.prototype.getCreativeAdId,gt.prototype.getAdId=gt.prototype.getAdId,gt.prototype.getVastMediaWidth=gt.prototype.getVastMediaWidth,gt.prototype.getVastMediaHeight=gt.prototype.getVastMediaHeight,gt.prototype.getVastMediaBitrate=gt.prototype.getVastMediaBitrate,gt.prototype.getDescription=gt.prototype.getDescription,gt.prototype.getTitle=gt.prototype.getTitle,gt.prototype.getPositionInSequence=gt.prototype.getPositionInSequence,gt.prototype.getSequenceLength=gt.prototype.getSequenceLength,gt.prototype.setMuted=gt.prototype.setMuted,gt.prototype.resize=gt.prototype.resize,gt.prototype.isLinear=gt.prototype.isLinear,gt.prototype.isMuted=gt.prototype.isMuted,gt.prototype.setVolume=gt.prototype.setVolume,gt.prototype.getVolume=gt.prototype.getVolume,gt.prototype.play=gt.prototype.play,gt.prototype.pause=gt.prototype.pause,gt.prototype.skip=gt.prototype.skip,gt.prototype.canSkipNow=gt.prototype.canSkipNow,gt.prototype.getTimeUntilSkippable=gt.prototype.getTimeUntilSkippable,gt.prototype.isSkippable=gt.prototype.isSkippable,gt.prototype.isPaused=gt.prototype.isPaused,gt.prototype.getRemainingTime=gt.prototype.getRemainingTime,gt.prototype.getMinSuggestedDuration=gt.prototype.getMinSuggestedDuration,gt.prototype.getDuration=gt.prototype.getDuration,gt.prototype.needsSkipUI=gt.prototype.needsSkipUI;function rc(e,t,n,r){var s=this;this.F=e,this.B=t,this.i=n,this.C=null,this.m=!0,this.s=this.i,this.g=r,this.G=new Set,this.A=new Set,this.o=new Map,this.h=new Te,zp(this),this.I=new Ct,this.j=new Ct,this.H=!1,this.l=null,this.I.D(this.i,"timeupdate",function(){if(!s.H){var l=s.l==null||s.l==0;s.l=s.i.currentTime,(l=kv(s,l))&&Av(s,l,1,1,Date.now())}}),new Mt(function(){var l,c,d,p,w,T,E,I,A,R;return z(function(D){switch(D.g){case 1:if(!s.A.size||s.H||s.l==null){D.u(0);break}l=!1,c=Array.from(s.A),d=s.B.Ob(),p=b(c),w=p.next();case 3:if(w.done){D.u(5);break}if(T=w.value,E=T.endTime||T.startTime,!(1<=d.start-E)){I=T.startTime-s.l,0<I&&10>=I&&(s.o.has(T)||s.o.set(T,s.h.preload(T.uri))),D.u(4);break}if(!s.o.has(T)){D.u(7);break}return k(D,s.o.get(T),8);case 8:(A=D.h)&&A.destroy(),s.o.delete(T);case 7:R=JSON.stringify(T),s.G.has(R)&&s.G.delete(R),s.A.delete(T),l=!0;case 4:w=p.next(),D.u(3);break;case 5:l&&$p(s),V(D)}})}).Sa(1)}rc.prototype.configure=function(e){this.F&&this.m==e.supportsMultipleMediaElements&&((this.m=!e.supportsMultipleMediaElements)?(this.s=this.i,this.C&&(this.C.parentElement&&this.F.removeChild(this.C),this.C=null)):(this.C||(e=document.createElement(this.i.tagName),e.autoplay=!0,e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgb(0, 0, 0)",e.setAttribute("playsinline",""),this.C=e),this.s=this.C))},rc.prototype.stop=function(){this.j&&this.j.Ra(),this.G.clear(),this.A.clear(),this.h.Qe(),this.o.clear(),this.h.detach(),this.H=!1,this.l=null},rc.prototype.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.F&&ia(this.F),this.h.destroy()};function eA(e,t){var n,r,s,l,c,d,p,w;z(function(T){if(T.g==1)return e.B.yg()==ki&&e.m?(je("Unsupported interstitial when using single media element",t),T.return()):(zp(e),n=!1,k(T,tA(e,t),2));if(r=T.h,r.length)for(s=b(r),l=s.next();!l.done;l=s.next())c=l.value,d=JSON.stringify(c),e.G.has(d)||(n=!0,e.G.add(d),e.A.add(c),p=!1,t.Ab&&e.l==null?p=!0:c.startTime!=0||c.Ie?e.l!=null&&(w=t.startTime-e.l,0<w&&10>=w&&(p=!0)):p=!0,p&&(e.o.has(c)||e.o.set(c,e.h.preload(c.uri))));else je("Unsupported interstitial",t);n&&$p(e),V(T)})}function kv(e,t,n){n=n===void 0?0:n;var r=0,s=null;if(e.A.size&&e.l!=null){var l=e.i.ended,c=Array.from(e.A).sort(function(w,T){return T.startTime-w.startTime});c=b(c);for(var d=c.next();!d.done;d=c.next()){d=d.value;var p=!1;if(t?p=d.Ab:l?p=d.nc:d.Ab||d.nc||(p=e.l-Math.round(1e3*d.startTime)/1e3,p=0<p&&(1>=p||!d.Ie)),p){if(r==n){s=d;break}r++}}}return s}function Av(e,t,n,r,s,l){l=l===void 0?0:l;var c,d,p,w,T,E,I,A,R,D,L,F,U,q;z(function(N){switch(N.g){case 1:if(c=Date.now(),!e.s.parentElement&&e.F&&e.F.appendChild(e.s),r==1&&n==1&&(n=Array.from(e.A).filter(function(H){return t.Ab?H.Ab==t.Ab:t.nc?H.nc==t.nc:.001>Math.abs(H.startTime-t.startTime)}).length),(t.once||t.Ab)&&(l++,e.A.delete(t),$p(e)),e.H=!0,!e.m||r!=1){N.u(2);break}return e.g(new $e("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),d=new Zt,p=function(H){return z(function(Y){if(Y.g==1)return H.state!="detach"?Y.u(0):Ag()?k(Y,new Promise(function(oe){return new Mt(oe).Y(.1)}),3):Y.u(3);d.resolve(),e.j.jb(e.B,"onstatechange",p),V(Y)})},e.j.D(e.B,"onstatechange",p),k(N,d,2);case 2:return e.m||(e.i.pause(),t.Oc!=null&&t.Oc!=0&&(e.i.currentTime+=t.Oc)),w=!1,T=null,E=function(){if(!e.m&&t.Oc==null)if(t.se&&t.endTime&&t.endTime!=1/0)e.i.currentTime!=t.endTime&&(e.i.currentTime=t.endTime);else{var H=Date.now();e.i.currentTime+=(H-s)/1e3,s=H}},I=function(){var H,Y;return z(function(oe){if(oe.g==1)return E(),T&&T.stop(),(H=kv(e,t.Ab,r-l))?(e.g(new $e("ad-stopped")),e.j.Ra(),Av(e,H,n,++r,s,l),oe.u(0)):e.m?k(oe,e.h.detach(),4):k(oe,e.h.bc(),4);e.m&&(Y=t.Oc,Y==null&&(Y=t.se&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-s)/1e3),e.g(new $e("ad-content-resume-requested",new Map().set("offset",Y)))),e.g(new $e("ad-stopped")),e.j.Ra(),e.H=!1,e.m||(E(),e.i.ended||e.i.play()),V(oe)})},A=function(H){return z(function(Y){return w?Y.return():(w=!0,e.g(new $e("ad-error",new Map().set("originalEvent",H))),k(Y,I(),0))})},R=function(){return z(function(H){if(H.g==1)return w?H.return():(w=!0,k(H,I(),2));e.g(new $e("ad-complete")),V(H)})},D=function(){return z(function(H){return w?H.return():(w=!0,e.g(new $e("ad-skipped")),k(H,I(),0))})},L=new gt(e.s,t.isSkippable,D,n,r),e.m||(L.setMuted(e.i.muted),L.setVolume(e.i.volume)),e.g(new $e("ad-started",new Map().set("ad",L))),L.canSkipNow()&&e.g(new $e("ad-skip-state-changed")),e.j.ha(e.h,"error",A),e.j.ha(e.h,"firstquartile",function(){E(),e.g(new $e("ad-first-quartile"))}),e.j.ha(e.h,"midpoint",function(){E(),e.g(new $e("ad-midpoint"))}),e.j.ha(e.h,"thirdquartile",function(){E(),e.g(new $e("ad-third-quartile"))}),e.j.ha(e.h,"complete",R),e.j.D(e.s,"play",function(){e.g(new $e("ad-resumed"))}),e.j.D(e.s,"pause",function(){e.g(new $e("ad-paused"))}),e.j.D(e.s,"volumechange",function(){e.s.muted?e.g(new $e("ad-muted")):e.g(new $e("ad-volume-changed"))}),Q(N,4),t.Ef&&(T=new Mt(function(){L.skip()}).Y(t.Ef)),zp(e),k(N,e.h.Rb(e.s),6);case 6:return e.o.has(t)?k(N,e.o.get(t),10):k(N,e.h.load(t.uri),8);case 10:return F=N.h,e.o.delete(t),F?k(N,e.h.load(F),8):k(N,e.h.load(t.uri),8);case 8:U=(Date.now()-c)/1e3,e.g(new $e("ads-loaded",new Map().set("loadTime",U))),e.m&&e.i.play(),J(N,0);break;case 4:q=te(N),A(q),V(N)}})}function tA(e,t){var n,r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me,ue,le,he,be,Ce,ke,Oe;return z(function(Ie){switch(Ie.g){case 1:if(n=[],!t||(r=t.values.find(function(Fe){return Fe.key=="X-ASSET-URI"}),s=t.values.find(function(Fe){return Fe.key=="X-ASSET-LIST"}),!r&&!s))return Ie.return(n);if(l=t.values.find(function(Fe){return Fe.key=="X-RESTRICT"}),d=c=!0,l&&l.data&&(p=l.data,c=!p.includes("SKIP"),d=!p.includes("JUMP")),w=null,(T=t.values.find(function(Fe){return Fe.key=="X-RESUME-OFFSET"}))&&(E=T.data,w=parseFloat(E),isNaN(w)&&(w=null)),I=null,(A=t.values.find(function(Fe){return Fe.key=="X-PLAYOUT-LIMIT"}))&&(R=A.data,I=parseFloat(R),isNaN(I)&&(I=null)),F=L=D=!1,(U=t.values.find(function(Fe){return Fe.key=="CUE"}))&&(q=U.data,D=q.includes("ONCE"),L=q.includes("PRE"),F=q.includes("POST")),N=!1,(H=t.values.find(function(Fe){return Fe.key=="X-TIMELINE-OCCUPIES"}))?(Y=H.data,N=Y.includes("RANGE")):!T&&e.B.V()&&(N=!L&&!F),r){if(oe=r.data,!oe)return Ie.return(n);n.push({startTime:t.startTime,endTime:t.endTime,uri:oe,isSkippable:c,Ie:d,Oc:w,Ef:I,once:D,Ab:L,nc:F,se:N}),Ie.u(2);break}if(!s){Ie.u(2);break}return ae=s.data,ae?(me=Qn([ae],_o()),ue=e.B.xb().request(7,me),Q(Ie,4),k(Ie,ue.promise,6)):Ie.return(n);case 6:for(le=Ie.h,he=fn(le.data),be=JSON.parse(he),Ce=b(be.ASSETS),ke=Ce.next();!ke.done;ke=Ce.next())Oe=ke.value,Oe.URI&&n.push({startTime:t.startTime,endTime:t.endTime,uri:Oe.URI,isSkippable:c,Ie:d,Oc:w,Ef:I,once:D,Ab:L,nc:F,se:N});J(Ie,2);break;case 4:te(Ie);case 2:return Ie.return(n)}})}function $p(e){for(var t=[],n=b(e.A),r=n.next(),s={};!r.done;s={Qb:void 0},r=n.next())r=r.value,s.Qb={start:r.startTime,end:null},r.Ab?(s.Qb.start=0,s.Qb.end=null):r.nc?(s.Qb.start=-1,s.Qb.end=null):r.se&&(s.Qb.end=r.endTime),t.find(function(l){return function(c){return l.Qb.start==c.start&&l.Qb.end==c.end}}(s))||t.push(s.Qb);e.g(new $e("ad-cue-points-changed",new Map().set("cuepoints",t)))}function zp(e){e.h.configure(e.B.Ag());var t=e.h.xb();t.mg(),t.ng(),fy(e.B.xb(),t)}function Lr(e){this.h=e||"",this.g=0}function fa(e){ar(e,/[ \t]+/gm)}function ar(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function as(e){return e.g==e.h.length?null:(e=ar(e,/[^ \t\n]*/gm))?e[0]:null}function pt(e,t,n,r,s){if(this.h=e,e=this.h.skipOffset)if(e=ar(new Lr(e),nA),e==null)e=null;else{var l=Number(e[2]),c=Number(e[3]);e=59<l||59<c?null:(Number(e[4])||0)/1e3+c+60*l+3600*(Number(e[1])||0)}else e=null;this.j=e,this.g=s,this.i=t,this.l=n,this.o=r,this.m=!1}S=pt.prototype,S.needsSkipUI=function(){return!0},S.getDuration=function(){return this.h.durationInSeconds},S.getMinSuggestedDuration=function(){return this.getDuration()},S.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},S.isPaused=function(){return this.g.paused},S.isSkippable=function(){return typeof this.j=="number"},S.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},S.canSkipNow=function(){return this.getTimeUntilSkippable()==0},S.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},S.pause=function(){return this.g.pause()},S.play=function(){return this.g.play()},S.getVolume=function(){return this.g.volume},S.setVolume=function(e){this.g.volume=e},S.isMuted=function(){return this.g.muted},S.isLinear=function(){return this.o},S.resize=function(){},S.setMuted=function(e){this.g.muted=e},S.getSequenceLength=function(){return this.l?this.l:1},S.getPositionInSequence=function(){return this.i?this.i:1},S.getTitle=function(){return this.h.adTitle},S.getDescription=function(){return""},S.getVastMediaBitrate=function(){return 0},S.getVastMediaHeight=function(){return 0},S.getVastMediaWidth=function(){return 0},S.getAdId=function(){return this.h.adId},S.getCreativeAdId=function(){return this.h.creativeId},S.getAdvertiserName=function(){return""},S.getMediaUrl=function(){return null},S.getTimeOffset=function(){return 0},S.getPodIndex=function(){return 0},S.release=function(){this.l=this.i=this.g=this.h=null},we("shaka.ads.MediaTailorAd",pt),pt.prototype.release=pt.prototype.release,pt.prototype.getPodIndex=pt.prototype.getPodIndex,pt.prototype.getTimeOffset=pt.prototype.getTimeOffset,pt.prototype.getMediaUrl=pt.prototype.getMediaUrl,pt.prototype.getAdvertiserName=pt.prototype.getAdvertiserName,pt.prototype.getCreativeAdId=pt.prototype.getCreativeAdId,pt.prototype.getAdId=pt.prototype.getAdId,pt.prototype.getVastMediaWidth=pt.prototype.getVastMediaWidth,pt.prototype.getVastMediaHeight=pt.prototype.getVastMediaHeight,pt.prototype.getVastMediaBitrate=pt.prototype.getVastMediaBitrate,pt.prototype.getDescription=pt.prototype.getDescription,pt.prototype.getTitle=pt.prototype.getTitle,pt.prototype.getPositionInSequence=pt.prototype.getPositionInSequence,pt.prototype.getSequenceLength=pt.prototype.getSequenceLength,pt.prototype.setMuted=pt.prototype.setMuted,pt.prototype.resize=pt.prototype.resize,pt.prototype.isLinear=pt.prototype.isLinear,pt.prototype.isMuted=pt.prototype.isMuted,pt.prototype.setVolume=pt.prototype.setVolume,pt.prototype.getVolume=pt.prototype.getVolume,pt.prototype.play=pt.prototype.play,pt.prototype.pause=pt.prototype.pause,pt.prototype.skip=pt.prototype.skip,pt.prototype.canSkipNow=pt.prototype.canSkipNow,pt.prototype.getTimeUntilSkippable=pt.prototype.getTimeUntilSkippable,pt.prototype.isSkippable=pt.prototype.isSkippable,pt.prototype.isPaused=pt.prototype.isPaused,pt.prototype.getRemainingTime=pt.prototype.getRemainingTime,pt.prototype.getMinSuggestedDuration=pt.prototype.getMinSuggestedDuration,pt.prototype.getDuration=pt.prototype.getDuration,pt.prototype.needsSkipUI=pt.prototype.needsSkipUI;var nA=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function $u(e,t,n,r){this.B=e,this.K=t,this.h=n,this.l=null,this.U=NaN,this.i=r,this.I=!1,this.A=null,this.j=[],this.N=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.o=new Ct}$u.prototype.stop=function(){for(var e=b(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.jb(t.target,t.type,t.listener);ca(this),this.m=[],this.s=[],this.G="",this.R=!0,this.H="",this.A=null,this.j=[],this.N=[],this.F.clear()},$u.prototype.release=function(){this.stop(),this.o&&this.o.release()},$u.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(oA(this,this.G,this.R),this.R=!1)},$u.prototype.getCuePoints=function(){for(var e=[],t=b(this.j),n=t.next();!n.done;n=t.next()){n=b(n.value.ads);for(var r=n.next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds})}return e};function iA(e,t,n){var r,s,l,c,d,p,w,T,E,I,A;z(function(R){if(R.g==1)return r=Qn([t],_o()),r.method="POST",n&&(s=JSON.stringify(n),r.body=Mo(s)),l=e.K.request(7,r),Q(R,2),k(R,l.promise,4);if(R.g!=2){if(c=R.h,d=fn(c.data),p=JSON.parse(d),p.manifestUrl&&p.trackingUrl)w=new Ln(t),T=new Ln(p.trackingUrl),e.G=w.resolve(T).toString(),E=Date.now()/1e3,I=E-e.U,e.i(new $e("ads-loaded",new Map().set("loadTime",I))),A=new Ln(p.manifestUrl),e.l.resolve(w.resolve(A).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return J(R,0)}if(te(R),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,R.return();e.l.resolve(e.H),e.l=null,V(R)})}function oA(e,t,n){var r,s,l,c,d,p,w,T,E,I,A,R,D,L,F;z(function(U){if(U.g==1)return r=Qn([t],_o()),s=e.K.request(7,r),Q(U,2),k(U,s.promise,4);if(U.g!=2){if(l=U.h,c=[],d=fn(l.data),p=JSON.parse(d),0<p.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(p.avails)){for(e.j=p.avails,w=b(e.j),T=w.next();!T.done;T=w.next())for(E=T.value,I=b(E.nonLinearAdsList),A=I.next();!A.done;A=I.next())for(R=A.value,D=b(R.nonLinearAdList),L=D.next();!L.done;L=D.next())F=L.value,rA(e,F);c=e.getCuePoints(),e.i(new $e("ad-cue-points-changed",new Map().set("cuepoints",c)))}}else e.j.length&&e.i(new $e("ad-cue-points-changed",new Map().set("cuepoints",c))),ca(e),e.j=[];return n&&(e.I||0<c.length)&&sA(e),J(U,0)}te(U),V(U)})}function rA(e,t){var n,r,s,l,c,d,p;z(function(w){if(w.g==1)return!t.staticResource||(n=Iv(t),e.F.get(n))?w.return():(r=Qn([t.staticResource],_o()),s=e.K.request(7,r),Q(w,2),e.F.set(n,[]),k(w,s.promise,4));if(w.g!=2)return l=w.h,c=fn(l.data),d=JSON.parse(c),p=d.apps,e.F.set(n,p),J(w,0);te(w),e.F.delete(n),V(w)})}function Iv(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function sA(e){_v(e),e.I||(Mv(e),e.o.D(e.h,"seeked",function(){Mv(e)}),e.o.D(e.h,"ended",function(){ca(e)})),e.o.D(e.h,"timeupdate",function(){_v(e)})}function Mv(e){var t=e.h.currentTime;if(t!=0&&e.A==null){for(var n,r,s=b(e.j),l=s.next();!l.done;l=s.next()){l=l.value;for(var c=b(l.ads),d=c.next();!d.done;d=c.next())if(d=d.value,!r)d.startTimeInSeconds<t&&(r=d,n=l);else if(d.startTimeInSeconds<t&&d.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=d,n=l;break}}n&&r&&!e.N.includes(r.adId)&&(e.A=t,e.h.currentTime=n.startTimeInSeconds)}}function _v(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.C,s=r.startTimeInSeconds+.5*r.durationInSeconds,l=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.s.includes("firstQuartile")?(e.s.push("firstQuartile"),xi(e,"firstQuartile")):t>=s&&!e.s.includes("midpoint")?(e.s.push("midpoint"),xi(e,"midpoint")):t>=l&&!e.s.includes("thirdQuartile")&&(e.s.push("thirdQuartile"),xi(e,"thirdQuartile")),r=e.g.getRemainingTime(),s=e.g.getDuration(),e.g.canSkipNow()&&0<r&&0<s&&xi(e,"skipStateChanged"),0<s&&(0>=r||r>s)&&ca(e)}if(!e.g||!e.g.isLinear()){e:for(r=b(e.j),s=r.next();!s.done&&(s=s.value,!(e.g&&e.g.isLinear()));s=r.next())for(l=0;l<s.ads.length;l++){var c=s.ads[l],d=c.startTimeInSeconds+c.durationInSeconds;if(c.startTimeInSeconds<=t&&d>t){if(e.N.includes(c.adId)){if(e.h.ended)continue;e.h.currentTime=d;break e}ca(e),e.L=s,e.g=new pt(c,l+1,s.ads.length,!0,e.h),e.C=c,l===0&&xi(e,"breakStart"),Rv(e);break}}if(!e.g){for(r=b(e.j),s=r.next();!s.done&&(s=s.value,!e.g);s=r.next())for(l=0;l<s.nonLinearAdsList.length;l++)if(c=s.nonLinearAdsList[l],c.nonLinearAdList.length){d=s.startTimeInSeconds;var p=e.F.get(Iv(c.nonLinearAdList[0]));if(d<=t&&p&&p.length){ca(e),d=e,p=b(p);for(var w=p.next();!w.done;w=p.next())if(w=w.value,w.data.source.length){var T=document.createElement("img");T.src=w.data.source[0].url,T.style.top=(w.placeholder.top||0)+"%",T.style.height=100-(w.placeholder.top||0)+"%",T.style.left=(w.placeholder.left||0)+"%",T.style.maxWidth=100-(w.placeholder.left||0)+"%",T.style.objectFit="contain",T.style.position="absolute",d.B.appendChild(T)}e.L=s,e.g=new pt(c,l+1,s.ads.length,!1,e.h),e.C=c,l===0&&xi(e,"breakStart"),Rv(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.A&&e.A>t&&(e.h.currentTime=e.A),e.A=null)}}}function ca(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.N.push(e.C.adId);var t=e.g.m;t!==void 0&&t?xi(e,"skip"):xi(e,"complete"),t=b(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.jb(n.target,n.type,n.listener);e.m=[],e.s=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&xi(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function Rv(e){var t=!1;e.h.paused?t=!0:(xi(e,"impression"),xi(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&xi(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||xi(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(xi(e,"impression"),xi(e,"start"),t=!1):xi(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){xi(e,"pause")}});for(var n=b(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function xi(e,t){var n=e.C.trackingEvents.find(function(s){return s.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(s){return s.eventType==t})),n){n=b(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=Qn([r],_o()),r.method="POST",e.K.request(7,r))}switch(t){case"impression":e.i(new $e("ad-impression"));break;case"start":e.i(new $e("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new $e("ad-muted"));break;case"unmute":e.i(new $e("ad-volume-changed"));break;case"resume":e.i(new $e("ad-resumed"));break;case"pause":e.i(new $e("ad-paused"));break;case"firstQuartile":e.i(new $e("ad-first-quartile"));break;case"midpoint":e.i(new $e("ad-midpoint"));break;case"thirdQuartile":e.i(new $e("ad-third-quartile"));break;case"complete":e.i(new $e("ad-complete")),e.i(new $e("ad-stopped"));break;case"skip":e.i(new $e("ad-skipped")),e.i(new $e("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new $e("ad-skip-state-changed"))}}function yt(e,t){this.g=e,this.i=null,this.h=t}S=yt.prototype,S.needsSkipUI=function(){return!0},S.getDuration=function(){return this.i?this.i.duration:-1},S.getMinSuggestedDuration=function(){return this.getDuration()},S.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},S.isPaused=function(){return this.h.paused},S.isSkippable=function(){return this.g.isSkippable()},S.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},S.canSkipNow=function(){return this.getTimeUntilSkippable()==0},S.skip=function(){this.h.currentTime+=this.getRemainingTime()},S.pause=function(){return this.h.pause()},S.play=function(){return this.h.play()},S.getVolume=function(){return this.h.volume},S.setVolume=function(e){this.h.volume=e},S.isMuted=function(){return this.h.muted},S.isLinear=function(){return!0},S.resize=function(){},S.setMuted=function(e){this.h.muted=e},S.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},S.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},S.getTitle=function(){return this.g.getTitle()},S.getDescription=function(){return this.g.getDescription()},S.getVastMediaBitrate=function(){return 0},S.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},S.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},S.getAdId=function(){return this.g.getAdId()},S.getCreativeAdId=function(){return this.g.getCreativeAdId()},S.getAdvertiserName=function(){return this.g.getAdvertiserName()},S.getMediaUrl=function(){return null},S.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},S.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},S.release=function(){this.h=this.i=this.g=null},we("shaka.ads.ServerSideAd",yt),yt.prototype.release=yt.prototype.release,yt.prototype.getPodIndex=yt.prototype.getPodIndex,yt.prototype.getTimeOffset=yt.prototype.getTimeOffset,yt.prototype.getMediaUrl=yt.prototype.getMediaUrl,yt.prototype.getAdvertiserName=yt.prototype.getAdvertiserName,yt.prototype.getCreativeAdId=yt.prototype.getCreativeAdId,yt.prototype.getAdId=yt.prototype.getAdId,yt.prototype.getVastMediaWidth=yt.prototype.getVastMediaWidth,yt.prototype.getVastMediaHeight=yt.prototype.getVastMediaHeight,yt.prototype.getVastMediaBitrate=yt.prototype.getVastMediaBitrate,yt.prototype.getDescription=yt.prototype.getDescription,yt.prototype.getTitle=yt.prototype.getTitle,yt.prototype.getPositionInSequence=yt.prototype.getPositionInSequence,yt.prototype.getSequenceLength=yt.prototype.getSequenceLength,yt.prototype.setMuted=yt.prototype.setMuted,yt.prototype.resize=yt.prototype.resize,yt.prototype.isLinear=yt.prototype.isLinear,yt.prototype.isMuted=yt.prototype.isMuted,yt.prototype.setVolume=yt.prototype.setVolume,yt.prototype.getVolume=yt.prototype.getVolume,yt.prototype.play=yt.prototype.play,yt.prototype.pause=yt.prototype.pause,yt.prototype.skip=yt.prototype.skip,yt.prototype.canSkipNow=yt.prototype.canSkipNow,yt.prototype.getTimeUntilSkippable=yt.prototype.getTimeUntilSkippable,yt.prototype.isSkippable=yt.prototype.isSkippable,yt.prototype.isPaused=yt.prototype.isPaused,yt.prototype.getRemainingTime=yt.prototype.getRemainingTime,yt.prototype.getMinSuggestedDuration=yt.prototype.getMinSuggestedDuration,yt.prototype.getDuration=yt.prototype.getDuration,yt.prototype.needsSkipUI=yt.prototype.needsSkipUI;function Lv(e,t,n,r){var s=this;this.s=e,this.l=t,this.j=null,this.F=NaN,this.i=r,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new Ct,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new $e("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(l){aA(s,l)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){s.B.length?s.j.resolve(s.B):s.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),s.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(l){l=l.getAd(),s.m=new yt(l,s.l),s.A&&(s.m.i=s.A),s.i(new $e("ad-started",new Map().set("ad",s.m))),s.s.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){s.s.removeAttribute("ad-active");var l=s.l.currentTime;s.o&&s.o>l&&(s.l.currentTime=s.o,s.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(l){s.A=l.getStreamData().adProgressData,s.m&&(s.m.i=s.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){s.i(new $e("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){s.i(new $e("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){s.i(new $e("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){s.i(new $e("ad-complete")),s.i(new $e("ad-stopped")),s.s.removeAttribute("ad-active"),s.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){s.i(new $e("ad-skipped")),s.i(new $e("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(l){var c=l.getStreamData();l=[],c=b(c.cuepoints);for(var d=c.next();!d.done;d=c.next())d=d.value,l.push({start:d.start,end:d.end});s.C=l,s.i(new $e("ad-cue-points-changed",new Map().set("cuepoints",l)))})}S=Lv.prototype,S.configure=function(){},S.stop=function(){this.B="",this.o=null,this.C=[]},S.release=function(){this.stop(),this.h&&this.h.release()},S.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},S.getCuePoints=function(){return this.C};function aA(e,t){e.i(new $e("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var r=e.g.previousCuePointForStreamTime(n);r&&!r.played&&(e.o=n,e.l.currentTime=r.start)}})}function Qe(){Xt.call(this),this.g=this.h=this.i=this.j=null,this.m=new Tv,this.o=navigator.language,this.l=null}X(Qe,Xt),S=Qe.prototype,S.setLocale=function(e){this.o=e},S.configure=function(e){this.l=e,this.j&&this.j.configure(this.l),this.i&&this.i.configure(this.l),this.g&&this.g.configure(this.l)},S.initInterstitial=function(e,t,n){var r=this;this.j&&this.j.release(),this.j=new rc(e,t,n,function(s){return sc(r,s)}),this.j.configure(this.l)},S.initClientSide=function(e,t,n){var r=this;if(!h.google||!google.ima||!google.ima.AdsLoader)throw new re(2,10,1e4);this.i&&this.i.release(),this.i=new nc(e,t,this.o,n,function(s){return sc(r,s)}),this.i.configure(this.l)},S.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),Xt.prototype.release.call(this)},S.onAssetUnload=function(){this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new $e("ad-stopped")),this.dispatchEvent(new $e("ad-content-attach-requested")),this.m=new Tv},S.requestClientSideAds=function(e){if(!this.i)throw new re(1,10,10001);var t=this.i;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},S.updateClientSideAdsRenderingSettings=function(e){if(!this.i)throw new re(1,10,10001);var t=this.i;t.B=e,t.g&&t.g.updateAdsRenderingSettings(t.B)},S.initMediaTailor=function(e,t,n){var r=this;this.h&&this.h.release(),this.h=new $u(e,t,n,function(s){return sc(r,s)})},S.requestMediaTailorStream=function(e,t,n){if(!this.h)throw new re(1,10,10005);var r=this.h;return n=n===void 0?"":n,r.l?e=Promise.reject(new re(1,10,10004)):(r.l=new Zt,iA(r,e,t),r.H=n||"",r.U=Date.now()/1e3,e=r.l),e},S.addMediaTailorTrackingUrl=function(e){if(!this.h)throw new re(1,10,10005);var t=this.h;t.G=e,t.i(new $e("ads-loaded",new Map().set("loadTime",0)))},S.initServerSide=function(e,t){var n=this;if(!h.google||!google.ima||!google.ima.dai)throw new re(2,10,10002);this.g&&this.g.release(),this.g=new Lv(e,t,this.o,function(r){return sc(n,r)}),this.g.configure(this.l)},S.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new re(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&je('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.10.12",n=this.g,n.j?e=Promise.reject(new re(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Zt,n.g.requestStream(e),n.B=t||"",n.F=Date.now()/1e3,e=n.j),e},S.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new re(1,10,10003);(e.mpt||e.mpv)&&je('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.10.12",this.g.g.replaceAdTagParameters(e)},S.getServerSideCuePoints=function(){return Ot("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},S.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.h&&(e=e.concat(this.h.getCuePoints())),e},S.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:Qk(e),started:e.h,playedCompletely:e.j,skipped:e.l,errors:e.i}},S.onManifestUpdated=function(e){this.h&&this.h.onManifestUpdated(e)},S.onDashTimedMetadata=function(e){this.g&&e.schemeIdUri=="urn:google:dai:2018"&&this.g.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},S.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},S.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},S.onInterstitialMetadata=function(e,t,n){this.j||this.initInterstitial(null,e,t),this.j&&eA(this.j,n)};function sc(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;break;case"ad-complete":e.m.j++;break;case"ad-skipped":e.m.l++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}we("shaka.ads.AdManager",Qe),Qe.prototype.onInterstitialMetadata=Qe.prototype.onInterstitialMetadata,Qe.prototype.onCueMetadataChange=Qe.prototype.onCueMetadataChange,Qe.prototype.onHlsTimedMetadata=Qe.prototype.onHlsTimedMetadata,Qe.prototype.onDashTimedMetadata=Qe.prototype.onDashTimedMetadata,Qe.prototype.onManifestUpdated=Qe.prototype.onManifestUpdated,Qe.prototype.getStats=Qe.prototype.getStats,Qe.prototype.getCuePoints=Qe.prototype.getCuePoints,Qe.prototype.getServerSideCuePoints=Qe.prototype.getServerSideCuePoints,Qe.prototype.replaceServerSideAdTagParameters=Qe.prototype.replaceServerSideAdTagParameters,Qe.prototype.requestServerSideStream=Qe.prototype.requestServerSideStream,Qe.prototype.initServerSide=Qe.prototype.initServerSide,Qe.prototype.addMediaTailorTrackingUrl=Qe.prototype.addMediaTailorTrackingUrl,Qe.prototype.requestMediaTailorStream=Qe.prototype.requestMediaTailorStream,Qe.prototype.initMediaTailor=Qe.prototype.initMediaTailor,Qe.prototype.updateClientSideAdsRenderingSettings=Qe.prototype.updateClientSideAdsRenderingSettings,Qe.prototype.requestClientSideAds=Qe.prototype.requestClientSideAds,Qe.prototype.onAssetUnload=Qe.prototype.onAssetUnload,Qe.prototype.release=Qe.prototype.release,Qe.prototype.initClientSide=Qe.prototype.initClientSide,Qe.prototype.initInterstitial=Qe.prototype.initInterstitial,Qe.prototype.configure=Qe.prototype.configure,Qe.prototype.setLocale=Qe.prototype.setLocale,Qe.ADS_LOADED="ads-loaded",Qe.AD_STARTED="ad-started",Qe.AD_FIRST_QUARTILE="ad-first-quartile",Qe.AD_MIDPOINT="ad-midpoint",Qe.AD_THIRD_QUARTILE="ad-third-quartile",Qe.AD_COMPLETE="ad-complete",Qe.AD_STOPPED="ad-stopped",Qe.AD_SKIPPED="ad-skipped",Qe.AD_VOLUME_CHANGED="ad-volume-changed",Qe.AD_MUTED="ad-muted",Qe.AD_PAUSED="ad-paused",Qe.AD_RESUMED="ad-resumed",Qe.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Qe.CUEPOINTS_CHANGED="ad-cue-points-changed",Qe.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Qe.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Qe.AD_CLICKED="ad-clicked",Qe.AD_PROGRESS="ad-progress",Qe.AD_BUFFERING="ad-buffering",Qe.AD_IMPRESSION="ad-impression",Qe.AD_DURATION_CHANGED="ad-duration-changed",Qe.AD_CLOSED="ad-closed",Qe.AD_LOADED="ad-loaded",Qe.ALL_ADS_COMPLETED="all-ads-completed",Qe.AD_LINEAR_CHANGED="ad-linear-changed",Qe.AD_METADATA="ad-metadata",Qe.AD_RECOVERABLE_ERROR="ad-recoverable-error",Qe.AD_ERROR="ad-error",Qe.AD_BREAK_READY="ad-break-ready",Qe.AD_INTERACTION="ad-interaction",Qe.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Qe.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Qe.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",tc=function(){return new Qe};function Dv(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof $e){var r={};for(s in n)(t=n[s])&&typeof t=="object"?s=="detail"&&(r[s]=t):s in Event||(r[s]=t);return r}if(n instanceof Error){var s=new Set(["name","message","stack"]);for(r in n)s.add(r);for(r=b(Object.getOwnPropertyNames(n)),t=r.next();!t.done;t=r.next())s.add(t.value);for(r={},s=b(s),t=s.next();!t.done;t=s.next())t=t.value,r[t]=n[t];n={__type__:"Error",contents:r}}else if(n instanceof TimeRanges){for(s={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=b(_r(n)),r=n.next();!r.done;r=n.next())r=r.value,t=r.end,s.start.push(r.start),s.end.push(t);n=s}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function Vp(e){return JSON.parse(e,function(t,n){if(n=="NaN")var r=NaN;else if(n=="-Infinity")r=-1/0;else if(n=="Infinity")r=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")r=uA(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")r=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(r in t)n[r]=t[r];r=n}else r=n;return r})}function uA(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var Pv="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),lA="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Hp=["loop","playbackRate"],fA=["pause","play"],ac={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10,isFullyLoaded:1},uc={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Gp={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20,getSegmentAvailabilityDuration:20},Ov=[["getConfiguration","configure"]],Nv=[["isTextTrackVisible","setTextTrackVisibility"]],cA="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),hA=["attach","attachCanvas","detach","load","unload"];function Wp(e,t,n,r,s,l,c){var d=this;this.G=e,this.K=c,this.l=new Mt(t),this.L=n,this.s=!1,this.A=r,this.F=s,this.N=l,this.h=this.m=!1,this.I="",this.o=null,this.B=function(){return Xp(d)},this.C=function(p,w){switch(p=Vp(w),p.type){case"event":var T=p.targetName,E=ly(p.event);d.A(T,E);break;case"update":T=p.update;for(E in T){p=d.g[E]||{};for(var I in T[E])p[I]=T[E][I]}d.s&&(d.L(),d.s=!1);break;case"asyncComplete":if(E=p.id,I=p.error,p=d.i[E],delete d.i[E],p)if(I){E=new re(I.severity,I.category,I.code);for(T in I)E[T]=I[T];p.reject(E)}else p.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.j=null,Vu.add(this)}S=Wp.prototype,S.destroy=function(){return Vu.delete(this),qp(this),To&&Bv(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.h=this.m=!1,this.C=this.B=this.j=this.i=this.g=this.o=null,Promise.resolve()},S.fb=function(){return this.h},S.Ff=function(){return this.I},S.init=function(){if(this.G.length)if(h.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.tc();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=b(Vu),r=n.next();!r.done;r=n.next()){r=r.value;var s=t;r.j=new Zt,r.s=!0,lc(r,s)}},function(t){for(var n=b(Vu),r=n.next();!r.done;r=n.next())r=r.value,fc=t=="available",r.l.tc()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),fc&&this.l.Y(pA),(e=To)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Zt,this.s=!0,lc(this,e)):To=null}else h.__onGCastApiAvailable!==jv&&(cc=h.__onGCastApiAvailable||null,h.__onGCastApiAvailable=jv)},S.Nf=function(e){this.o=e,this.h&&zu(this,{type:"appData",appData:this.o})},S.cast=function(){var e=this;return z(function(t){if(!e.m)throw new re(1,8,8e3);if(!fc)throw new re(1,8,8001);if(e.h)throw new re(1,8,8002);return e.j=new Zt,chrome.cast.requestSession(function(n){return lc(e,n)},function(n){return Uv(e,n)}),k(t,e.j,0)})};function dA(e){e.h&&chrome.cast.requestSession(function(t){return lc(e,t)},function(t){return Uv(e,t)})}S.Cc=function(){if(this.h){if(qp(this),To){Bv(this);try{To.stop(function(){},function(){})}catch{}To=null}Xp(this)}},S.get=function(e,t){var n=this;if(e=="video"){if(fA.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(_(Me.apply(0,arguments))))}}else if(e=="player"){if(Gp[t]&&!this.get("player","isLive")())return function(){};if(cA.includes(t))return function(){return n.Ug.apply(n,[e,t].concat(_(Me.apply(0,arguments))))};if(hA.includes(t))return function(){return n.Ki.apply(n,[e,t].concat(_(Me.apply(0,arguments))))};if(ac[t]||uc[t])return function(){return n.g[e][t]}}return this.g[e][t]},S.set=function(e,t,n){this.g[e][t]=n,zu(this,{type:"set",targetName:e,property:t,value:n})};function lc(e,t){var n=e.N();To=t,t.addUpdateListener(e.B),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),Xp(e),zu(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function Uv(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new re(2,8,n,t))}S.Ug=function(e,t){zu(this,{type:"call",targetName:e,methodName:t,args:Me.apply(2,arguments)})},S.Ki=function(e,t){var n=Me.apply(2,arguments),r=new Zt,s=this.H.toString();this.H++,this.i[s]=r;try{zu(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:s})}catch(l){r.reject(l)}return r};function Bv(e){var t=To;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function Xp(e){var t=To?To.status=="connected":!1;if(e.h&&!t){e.F();for(var n in e.g)e.g[n]={};qp(e)}e.h=t,e.I=t?To.receiver.friendlyName:"",e.l.tc()}function qp(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new re(1,7,7e3))}}function zu(e,t){t=Dv(t);var n=To;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},xt)}catch(r){throw t=new re(2,8,8005,r),n=new $e("error",new Map().set("detail",t)),e.A("player",n),e.Cc(),t}}var pA=.02,fc=!1,To=null,cc=null,Vu=new Set;function jv(e){if(cc?h.__onGCastApiAvailable=cc:delete h.__onGCastApiAvailable,cc=null,e)for(var t=b(Vu),n=t.next();!n.done;n=t.next())n.value.init();typeof h.__onGCastApiAvailable=="function"&&h.__onGCastApiAvailable(e)}function Nn(e,t,n,r){r=r===void 0?!1:r,Xt.call(this);var s=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.B=r,this.A=new Map,this.g=new Wp(n,function(){return zv(s)},function(){return Vv(s)},function(l,c){return Gv(s,l,c)},function(){return Hv(s)},function(){return $v(s)},r),mA(this)}X(Nn,Xt),S=Nn.prototype,S.destroy=function(e){return e&&this.g.Cc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,Xt.prototype.release.call(this),Promise.all(e)},S.fi=function(){return this.l},S.Vh=function(){return this.s},S.Ah=function(){return this.g.m&&fc},S.fb=function(){return this.g.fb()},S.Ff=function(){return this.g.Ff()},S.cast=function(){var e=this;return z(function(t){return t.g==1?k(t,e.g.cast(),2):e.h?k(t,e.h.bc(),0):t.return()})},S.Nf=function(e){this.g.Nf(e)},S.$i=function(){dA(this.g)},S.Cc=function(){this.g.Cc()},S.Bh=function(e,t){t=t===void 0?!1:t;var n=this;return z(function(r){if(r.g==1)return e==n.C&&t==n.B?r.return():(n.C=e,n.B=t,n.g.Cc(),k(r,n.g.destroy(),2));n.g=null,n.g=new Wp(e,function(){return zv(n)},function(){return Vv(n)},function(s,l){return Gv(n,s,l)},function(){return Hv(n)},function(){return $v(n)},t),n.g.init(),V(r)})};function mA(e){e.g.init(),e.m=new Ct;for(var t=b(Pv),n=t.next();!n.done;n=t.next())e.m.D(e.i,n.value,function(l){e.g.fb()||(l=ly(l),e.j.dispatchEvent(l))});for(var r in df)e.m.D(e.h,df[r],function(l){e.g.fb()||e.o.dispatchEvent(l)});e.l={},t={};for(var s in e.i)t={nd:t.nd},t.nd=s,Object.defineProperty(e.l,t.nd,{configurable:!1,enumerable:!0,get:function(l){return function(){return yA(e,l.nd)}}(t),set:function(l){return function(c){var d=l.nd;e.g.fb()?e.g.set("video",d,c):e.i[d]=c}}(t)});e.s={},Fv(e,function(l){Object.defineProperty(e.s,l,{configurable:!1,enumerable:!0,get:function(){return vA(e,l)}})}),gA(e),e.j=new Xt,e.j.me=e.l,e.o=new Xt,e.o.me=e.s}function gA(e){var t=new Map;Fv(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.A.set(n,r):e.A.set(r,n)):t.set(r,n)})}function Fv(e,t){function n(p){return p=="constructor"||typeof r[p]!="function"?!1:!s.has(p)}var r=e.h,s=new Set,l;for(l in r)n(l)&&(s.add(l),t(l,r[l]));for(e=Object.getPrototypeOf(r),l=Object.getPrototypeOf({});e&&e!=l;){for(var c=b(Object.getOwnPropertyNames(e)),d=c.next();!d.done;d=c.next())d=d.value,n(d)&&(s.add(d),t(d,r[d]));e=Object.getPrototypeOf(e)}}function $v(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dc(),startTime:null};e.i.pause();for(var n=b(Hp),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),n=b(Ov),r=n.next();!r.done;r=n.next()){var s=r.value;r=s[1],s=e.h[s[0]](),t.player[r]=s}for(n=b(Nv),r=n.next();!r.done;r=n.next())s=r.value,r=s[1],s=e.h[s[0]](),t.playerAfterLoad[r]=s;return t}function zv(e){var t=new $e("caststatuschanged");e.dispatchEvent(t)}function Vv(e){var t=new $e(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Hv(e){for(var t=b(Ov),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var s=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var l=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime"));var c;(r=e.g.get("player","getTextTracks")())&&r.length&&(c=r.find(function(w){return w.active}));var d=e.g.get("player","isTextTrackVisible")();s&&(e.i.autoplay=!1,t=e.h.load(s,n));var p={};for(n=b(Hp),r=n.next();!r.done;r=n.next())r=r.value,p[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var w=b(Hp),T=w.next();!T.done;T=w.next())T=T.value,e.i[T]=p[T];for(w=b(Nv),T=w.next();!T.done;T=w.next()){var E=T.value;T=E[1],E=e.g.get("player",E[0])(),e.h[T](E)}e.h.eh(d),c&&e.h.Lf(c.language,c.roles,c.forced),e.i.autoplay=l,s&&e.i.play()}},function(w){w=new Map().set("detail",w),w=new $e("error",w),e.h.dispatchEvent(w)})}function yA(e,t){if(t=="addEventListener")return function(r,s,l){return e.j.addEventListener(r,s,l)};if(t=="removeEventListener")return function(r,s,l){return e.j.removeEventListener(r,s,l)};if(e.g.fb()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.fb()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function vA(e,t){if(e.A.has(t)&&(t=e.A.get(t)),t=="addEventListener")return function(n,r,s){return e.o.addEventListener(n,r,s)};if(t=="removeEventListener")return function(n,r,s){return e.o.removeEventListener(n,r,s)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.xb()};if(t=="getDrmEngine")return function(){return e.h.B};if(t=="getAdManager")return function(){return e.h.ug()};if(t=="setVideoContainer")return function(n){return e.h.ih(n)};if(e.g.fb()){if(t=="getManifest"||t=="drmInfo")return function(){return je(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return je(t+"() does not work while casting!"),Promise.resolve()}}return e.g.fb()&&Object.keys(e.g.g.video).length==0&&(ac[t]||uc[t])||!e.g.fb()?e.h[t].bind(e.h):e.g.get("player",t)}function Gv(e,t,n){e.g.fb()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.o.dispatchEvent(n))}we("shaka.cast.CastProxy",Nn),Nn.prototype.changeReceiverId=Nn.prototype.Bh,Nn.prototype.forceDisconnect=Nn.prototype.Cc,Nn.prototype.suggestDisconnect=Nn.prototype.$i,Nn.prototype.setAppData=Nn.prototype.Nf,Nn.prototype.cast=Nn.prototype.cast,Nn.prototype.receiverName=Nn.prototype.Ff,Nn.prototype.isCasting=Nn.prototype.fb,Nn.prototype.canCast=Nn.prototype.Ah,Nn.prototype.getPlayer=Nn.prototype.Vh,Nn.prototype.getVideo=Nn.prototype.fi,Nn.prototype.destroy=Nn.prototype.destroy;function si(e,t,n,r){Xt.call(this);var s=this;this.g=e,this.h=t,this.j=new Ct,this.H={video:e,player:t},this.F=n||function(){},this.I=r||function(l){return l},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.s=this.l=null,this.C=new Mt(function(){Kp(s)}),xA(this)}X(si,Xt),S=si.prototype,S.isConnected=function(){return this.G},S.mi=function(){return this.o},S.Wi=function(e){this.i=e},S.Dh=function(){this.i=null},S.Xi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},S.Vi=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},S.Ui=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},S.destroy=function(){var e=this,t,n;return z(function(r){if(r.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.s=null,Xt.prototype.release.call(e),k(r,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),V(r)})};function xA(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Wv(e)},t.onSenderDisconnected=function(){return Wv(e)},t.onSystemVolumeChanged=function(){var s=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();s&&ur(e,{type:"update",update:{video:{volume:s.level,muted:s.muted}}},e.l),ur(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(s){return CA(e,s)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(s){return SA(e,s)},t.start(),t=b(Pv);for(var n=t.next();!n.done;n=t.next())e.j.D(e.g,n.value,function(s){return Xv(e,"video",s)});for(var r in df)e.j.D(e.h,df[r],function(s){return Xv(e,"player",s)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,ha(e)}),e.j.D(e.g,"playing",function(){e.o=!1,ha(e)}),e.j.D(e.g,"pause",function(){ha(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,ha(e)}),e.j.D(e.g,"ended",function(){new Mt(function(){e.g&&e.g.ended&&(e.o=!0,ha(e))}).Y(bA)})}function Wv(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,ha(e)}function ha(e){var t;z(function(n){if(n.g==1)return k(n,Promise.resolve(),2);if(!e.h)return n.return();t=new $e("caststatuschanged"),e.dispatchEvent(t),qv(e)||lr(e),V(n)})}function wA(e,t,n){var r,s,l,c,d,p,w,T,E,I;z(function(A){switch(A.g){case 1:for(r in t.player)s=t.player[r],e.h[r](s);return e.F(n),l=e.g.autoplay,t.manifest?(e.g.autoplay=!1,Q(A,5),k(A,e.h.load(t.manifest,t.startTime),7)):k(A,Promise.resolve(),3);case 7:J(A,3);break;case 5:return c=te(A),d=new Map().set("detail",c),p=new $e("error",d),e.h&&e.h.dispatchEvent(p),A.return();case 3:if(!e.h)return A.return();for(w in t.video)T=t.video[w],e.g[w]=T;for(E in t.playerAfterLoad)I=t.playerAfterLoad[E],e.h[E](I);e.g.autoplay=l,t.manifest&&(e.g.play(),lr(e)),V(A)}})}function Xv(e,t,n){e.h&&(Kp(e),ur(e,{type:"event",targetName:t,event:n},e.l))}function Kp(e){e.C.Y(TA);for(var t={video:{},player:{}},n=b(lA),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.g[r];if(e.h.V())for(var s in Gp)e.m%Gp[s]==0&&(t.player[s]=e.h[s]());for(var l in ac)e.m%ac[l]==0&&(t.player[l]=e.h[l]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),ur(e,{type:"update",update:t},e.l);for(var c in uc)e.m%uc[c]==0&&(t={player:{}},t.player[c]=e.h[c](),ur(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),qv(e)}function qv(e){return e.A&&(e.g.duration||e.h.V())?(Yp(e),e.A=!1,!0):!1}function Yp(e,t){var n={contentId:e.h.Dc(),streamType:e.h.V()?"LIVE":"BUFFERED",contentType:""};e.h.V()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),lr(e,t===void 0?0:t,n)}function SA(e,t){var n=Vp(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.A=!0,wA(e,n.initState,n.appData),Kp(e);break;case"appData":e.F(n.appData);break;case"set":var r=n.targetName,s=n.property;if(n=n.value,r=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),s=="volume"){t.setSystemVolumeLevel(n);break}else if(s=="muted"){t.setSystemVolumeMuted(n);break}}e.H[r][s]=n;break;case"call":r=e.H[n.targetName],r[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,s=n.methodName,r=="player"&&s=="load"&&(e.m=0,e.B=!1);var l=n.id,c=t.senderId;t=e.H[r],n=t[s].apply(t,n.args),r=="player"&&s=="load"&&(n=n.then(function(){e.A=!0})),n.then(function(){return Kv(e,c,l,null)},function(d){return Kv(e,c,l,d)})}}function CA(e,t){var n=Vp(t.data);switch(n.type){case"PLAY":e.g.play(),lr(e);break;case"PAUSE":e.g.pause(),lr(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),r&&r=="PLAYBACK_START"?(e.g.play(),lr(e)):r&&r=="PLAYBACK_PAUSE"&&(e.g.pause(),lr(e));break;case"STOP":e.h.bc().then(function(){e.h&&lr(e)});break;case"GET_STATUS":Yp(e,Number(n.requestId));break;case"VOLUME":r=n.volume,t=r.level,r=r.muted;var s=e.g.volume,l=e.g.muted;t!=null&&(e.g.volume=Number(t)),r!=null&&(e.g.muted=r),s==e.g.volume&&l==e.g.muted||lr(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,t=n.media,r=n.currentTime,s=e.I(t.contentId),l=n.autoplay||!0,e.F(t.customData),l&&(e.g.autoplay=!0),e.h.load(s,r).then(function(){e.h&&Yp(e)}).catch(function(c){var d="LOAD_FAILED";c.category==7&&c.code==7e3&&(d="LOAD_CANCELLED"),ur(e,{requestId:Number(n.requestId),type:d},e.s)});break;default:ur(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function Kv(e,t,n,r){e.h&&ur(e,{type:"asyncComplete",id:n,error:r},e.l,t)}function ur(e,t,n,r){e.G&&(e=Dv(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function lr(e,t,n){n=n===void 0?null:n;var r={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?EA:e.h.pf()?AA:e.g.paused?IA:kA,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(r.media=n),ur(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[r]},e.s)}we("shaka.cast.CastReceiver",si),si.prototype.destroy=si.prototype.destroy,si.prototype.setContentArtist=si.prototype.Ui,si.prototype.setContentImage=si.prototype.Vi,si.prototype.setContentTitle=si.prototype.Xi,si.prototype.clearContentMetadata=si.prototype.Dh,si.prototype.setContentMetadata=si.prototype.Wi,si.prototype.isIdle=si.prototype.mi,si.prototype.isConnected=si.prototype.isConnected;var TA=.5,bA=5,EA="IDLE",kA="PLAYING",AA="BUFFERING",IA="PAUSED";function Yv(e,t,n,r,s){if(r>=s)return null;for(var l=-1,c=-1,d=0;d<n.length;d++)if(n[d].some(function(N){return N!=null&&N.g.trim()!=""})){l=d;break}for(d=n.length-1;0<=d;d--)if(n[d].some(function(N){return N!=null&&N.g.trim()!=""})){c=d;break}if(l===-1||c===-1)return null;for(var p=d=!1,w="white",T="black",E=Qp(r,s,d,p,w,T);l<=c;l++){for(var I=n[l],A=-1,R=-1,D=0;D<I.length;D++)if(I[D]!=null&&I[D].g.trim()!==""){A=D;break}for(D=I.length-1;0<=D;D--)if(I[D]!=null&&I[D].g.trim()!==""){R=D;break}if(A===-1||R===-1)I=Qv(r,s),e.nestedCues.push(I);else{for(;A<=R;A++)if(D=I[A]){var L=D.l,F=D.i,U=D.j,q=D.h;(L!=d||F!=p||U!=w||q!=T)&&(E.payload&&e.nestedCues.push(E),E=Qp(r,s,L,F,U,q),d=L,p=F,w=U,T=q),E.payload+=D.g}else E.payload+=" ";E.payload&&e.nestedCues.push(E),l!==c&&(E=Qv(r,s),e.nestedCues.push(E)),E=Qp(r,s,d,p,w,T)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Qp(e,t,n,r,s,l){return e=new Be(e,t,""),n&&e.textDecoration.push("underline"),r&&(e.fontStyle="italic"),e.color=s,e.backgroundColor=l,e}function Qv(e,t){return e=new Be(e,t,""),e.lineBreak=!0,e}function Zv(e,t,n,r,s){this.g=e,this.l=t,this.i=n,this.h=r,this.j=s}function Zp(e,t){this.i=[],this.g=1,this.h=0,this.A=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Hu(this)}function hc(e,t,n){var r="CC"+((e.A<<1|e.s)+1),s=new Be(t,n,"");s.lineInterpretation=1;var l=tx.get(e.g);return l&&(s.line=l),(t=Yv(s,r,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(l=tx.get(e.g+3-t.cue.nestedCues.length))&&(s.line=l),t}function Hu(e){fr(e,0,15),e.g=1}function da(e,t,n){if(!(32>n||127<n)){var r="";switch(t){case 0:r=ex.has(n)?ex.get(n):String.fromCharCode(n);break;case 1:r=MA.get(n);break;case 2:e.i[e.g].pop(),r=_A.get(n);break;case 3:e.i[e.g].pop(),r=RA.get(n)}r&&e.i[e.g].push(new Zv(r,e.m,e.j,e.o,e.l))}}function Jv(e,t,n,r){if(!(0>n||0>t))if(t>=n)for(--r;0<=r;r--)e.i[t+r]=e.i[n+r].map(function(l){return l});else for(var s=0;s<r;s++)e.i[t+s]=e.i[n+s].map(function(l){return l})}function fr(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var ex=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),MA=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),_A=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),RA=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),tx=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function dc(e,t){this.h=0,this.o=new Zp(e,t),this.i=new Zp(e,t),this.g=this.j=new Zp(e,t),this.l=0,this.m=null}function Jp(e,t,n){e.g=e.i;var r=e.g,s=null;return e.h!==3&&e.h!==4&&(s=hc(r,e.l,n),n=e.i,n.g=0<n.h?n.h:0,fr(n,0,15),n=e.j,n.g=0<n.h?n.h:0,fr(n,0,15),r.g=15),e.h=3,r.h=t,s}function nx(e){e.h=1,e.g=e.j,e.g.h=0}function ix(e){at("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var LA="black green blue cyan red yellow magenta black".split(" "),ox="white green blue cyan red yellow magenta white_italics".split(" ");function rx(e,t){this.I=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.s="black",e0(this)}function e0(e){e.i=[];for(var t=0;16>t;t++)e.i.push(t0())}function t0(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function us(e,t){sx(e)&&(e.i[e.h][e.g]=new Zv(t,e.C,e.A,e.s,e.B),e.g++)}function sx(e){var t=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&t}rx.prototype.isVisible=function(){return this.l};function ls(e,t,n){var r=new Be(e.j,t,"");r.textAlign=e.F===0?"left":e.F===1?"right":gn;var s=r.region;switch(e.I&&(s.id+="svc"+e.I),s.id+="win"+e.N,s.height=e.o,s.width=e.m,s.heightUnits=2,s.widthUnits=2,s.viewportAnchorX=e.H,s.viewportAnchorY=e.L,s.viewportAnchorUnits=e.K?fe:2,e.G){case 0:s.regionAnchorX=0,s.regionAnchorY=0;break;case 1:s.regionAnchorX=50,s.regionAnchorY=0;break;case 2:s.regionAnchorX=100,s.regionAnchorY=0;break;case 3:s.regionAnchorX=0,s.regionAnchorY=50;break;case 4:s.regionAnchorX=50,s.regionAnchorY=50;break;case 5:s.regionAnchorX=100,s.regionAnchorY=50;break;case 6:s.regionAnchorX=0,s.regionAnchorY=100;break;case 7:s.regionAnchorX=50,s.regionAnchorY=100;break;case 8:s.regionAnchorX=100,s.regionAnchorY=100}return(n=Yv(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function DA(){this.i=[],this.h=null,this.g=0}function PA(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new pc(e.h)),e.h=null,e.g=0))}function pc(e){this.g=0,this.h=e}pc.prototype.na=function(){return this.g<this.h.length},pc.prototype.va=function(){return this.g};function ei(e){if(!e.na())throw new re(2,2,3e3);return e.h[e.g++]}pc.prototype.skip=function(e){if(this.g+e>this.h.length)throw new re(2,2,3e3);this.g+=e};function OA(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function NA(e,t,n,r){if(128<=n&&135>=n)r=n&7,e.h[r]&&(e.g=e.h[r]);else{if(n===136){n=ei(t).value,t=null,n=b(Gu(e,n));for(var s=n.next();!s.done;s=n.next())s=e.h[s.value],s.isVisible()&&(t=ls(s,r,e.i)),e0(s);return t}if(n===137)for(t=ei(t).value,t=b(Gu(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=r),n.l=!0;else{if(n===138){for(n=ei(t).value,t=null,n=b(Gu(e,n)),s=n.next();!s.done;s=n.next())s=e.h[s.value],s.isVisible()&&(t=ls(s,r,e.i)),s.l=!1;return t}if(n===139){for(n=ei(t).value,t=null,n=b(Gu(e,n)),s=n.next();!s.done;s=n.next())s=e.h[s.value],s.isVisible()?t=ls(s,r,e.i):s.j=r,s.l=!s.l;return t}if(n===140)return t=ei(t).value,ax(e,t,r);if(n===143)return r=ax(e,255,r),ux(e),r;if(n===144)t.skip(1),r=ei(t).value,e.g&&(e.g.A=0<(r&128),e.g.C=0<(r&64));else if(n===145)r=ei(t).value,n=ei(t).value,t.skip(1),e.g&&(t=lx((n&48)>>4,(n&12)>>2,n&3),e.g.B=lx((r&48)>>4,(r&12)>>2,r&3),e.g.s=t);else if(n===146)r=ei(t).value,t=ei(t).value,e.g&&(e=e.g,e.h=r&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),r=ei(t).value,t.skip(1),e.g&&(e.g.F=r&3);else if(152<=n&&159>=n){if(n=(n&15)-8,s=e.h[n]!==null,!s){var l=new rx(n,e.i);l.j=r,e.h[n]=l}r=ei(t).value,l=ei(t).value;var c=ei(t).value,d=ei(t).value,p=ei(t).value;t=ei(t).value,s&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.C=!1,t.A=!1,t.B="white",t.s="black"),t=e.h[n],t.l=0<(r&32),t.L=l&127,t.H=c,t.G=(d&240)>>4,t.K=0<(l&128),t.o=(d&15)+1,t.m=(p&63)+1,e.g=e.h[n]}}}return null}function Gu(e,t){for(var n=[],r=0;8>r;r++)(t&1)===1&&e.h[r]&&n.push(r),t>>=1;return n}function ax(e,t,n){var r=null;t=b(Gu(e,t));for(var s=t.next();!s.done;s=t.next()){s=s.value;var l=e.h[s];l.isVisible()&&(r=ls(l,n,e.i)),e.h[s]=null}return r}function ux(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function lx(e,t,n){var r={0:0,1:0,2:1,3:1};return e=r[e],t=r[t],n=r[n],UA[e<<2|t<<1|n]}var fx=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),UA="black blue green cyan red magenta yellow white".split(" ");function pa(){this.h=[],this.g=[],this.i=new DA,this.l=0,this.m=new Map([["CC1",new dc(0,0)],["CC2",new dc(0,1)],["CC3",new dc(1,0)],["CC4",new dc(1,1)]]),this.s=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,n0(this)}pa.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,n0(this),e=b(this.j.values());for(var t=e.next();!t.done;t=e.next())ux(t.value)};function n0(e){e.o=0,e.s=0;for(var t=b(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Hu(n.i),Hu(n.j),Hu(n.o);e.B=!0}pa.prototype.extract=function(e,t){if(this.B){for(var n=b(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.B=!1}if(e=new en(e,0),!(8>e.getLength())&&e.T()===181&&e.la()===49&&e.P()===1195456820&&e.T()===3&&(n=e.T(),(n&64)!==0))for(n&=31,e.skip(1),r=0;r<n;r++){var s=e.T(),l=(s&4)>>2,c=e.T(),d=e.T();l&&(s&=3,s===0||s===1?this.h.push({pts:t,type:s,bb:c,Cb:d,order:this.h.length}):(this.g.push({pts:t,type:s,value:c,order:this.g.length}),this.g.push({pts:t,type:2,value:d,order:this.g.length})))}},pa.prototype.decode=function(){function e(s,l){return s.pts-l.pts||s.order-l.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=b(this.h),r=n.next();!r.done;r=n.next())(r=BA(this,r.value))&&t.push(r);for(n=b(this.g),r=n.next();!r.done;r=n.next())PA(this.i,r.value);for(n=b(this.i.i),r=n.next();!r.done;r=n.next())r=jA(this,r.value),t.push.apply(t,_(r));return this.i.i=[],this.h=[],this.g=[],t};function BA(e,t){var n=t.type;if((t.bb&112)===16){var r=t.bb>>3&1;n===0?e.o=r:e.s=r}if(r="CC"+((n<<1|(n?e.s:e.o))+1),n=e.m.get(r),t.bb===255&&t.Cb===255||!t.bb&&!t.Cb||!cx(t.bb)||!cx(t.Cb))return 45<=++e.l&&n0(e),null;e.l=0,t.bb&=127,t.Cb&=127;var s=t.bb;if(1<=s&&15>=s||!t.bb&&!t.Cb)return null;if(s=null,(t.bb&112)===16)e:{if(e.A.add(r),r=t.bb,e=t.Cb,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,(r&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(r&7)<<1|e>>5&1];var l=(e&30)>>1;r="white",s=!1,7>l?r=ox[l]:l===7&&(s=!0),e=(e&1)===1,n.h!==4&&(l=n.g,n.h===3&&t!==l.g&&(n=1+t-l.h,Jv(l,n,1+l.g-l.h,l.h),fr(l,0,n-1),fr(l,t+1,15-t)),l.g=t,l.m=e,l.j=s,l.l=r,l.o="black")}else if((r&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",da(n.g,0,32),r=!1,t=ox[(e&14)>>1],t==="white_italics"&&(t="white",r=!0),n.g.m=(e&1)===1,n.g.j=r,n.g.l=t;else if((r&247)===16&&(e&240)===32||(r&247)===23&&(e&255)===45)t="black",!(r&7)&&(t=LA[(e&14)>>1]),n.g.o=t;else if((r&247)===17&&(e&240)===48)da(n.g,1,e);else if((r&246)===18&&(e&224)===32)da(n.g,r&1?3:2,e);else if((r&246)===20&&(e&240)===32){switch(e=t.pts,r=null,t.Cb){case 32:nx(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=Jp(n,2,e);break;case 38:r=Jp(n,3,e);break;case 39:r=Jp(n,4,e);break;case 40:da(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Hu(n.o),ix(n);break;case 43:ix(n);break;case 44:t=n.i,r=null,n.h!==4&&(r=hc(t,n.l,e)),fr(t,0,15);break;case 45:t=n.g,n.h!==3?r=null:(r=hc(t,n.l,e),s=t.g-t.h+1,Jv(t,s-1,s,t.h),fr(t,0,s-1),fr(t,t.g,15-t.g),n.l=e);break;case 46:fr(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=hc(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,nx(n),n.l=e,r=t}s=r;break e}s=null}else e=t.Cb,da(n.g,0,t.bb),da(n.g,0,e);return s}function jA(e,t){var n=[];try{for(;t.na();){var r=ei(t).value,s=(r&224)>>5,l=r&31;if(s===7&&l!=0&&(s=ei(t).value&63),s!=0){e.A.add("svc"+s),e.j.has(s)||e.j.set(s,new OA(s));for(var c=e.j.get(s),d=t.va();t.va()-d<l;){s=c;var p=t,w=ei(p),T=w.value,E=w.pts;if(T===16){var I=ei(p);T=T<<16|I.value}if(0<=T&&31>=T){p=s;var A=T,R=E;if(p.g){var D=p.g;switch(s=null,A){case 8:!sx(D)||0>=D.g&&0>=D.h||(0>=D.g?(D.g=D.m-1,D.h--):D.g--,D.i[D.h][D.g]=null);break;case 13:if(D.isVisible()&&(s=ls(D,R,p.i)),D.h+1>=D.o){for(p=D,A=0,R=1;16>R;R++,A++)p.i[A]=p.i[R];for(R=0;1>R;R++,A++)p.i[A]=t0()}else D.h++;D.g=0;break;case 14:D.isVisible()&&(s=ls(D,R,p.i)),D.i[D.h]=t0(),D.g=0;break;case 12:D.isVisible()&&(s=ls(D,R,p.i)),e0(D),p=D,p.h=0,p.g=0}var L=s}else L=null}else if(128<=T&&159>=T)L=NA(s,p,T,E);else{if(4096<=T&&4127>=T)s=p,p=T&255,8<=p&&15>=p?s.skip(1):16<=p&&23>=p?s.skip(2):24<=p&&31>=p&&s.skip(3);else if(4224<=T&&4255>=T)s=p,p=T&255,128<=p&&135>=p?s.skip(4):136<=p&&143>=p&&s.skip(5);else if(32<=T&&127>=T)p=T,s.g&&(p===127?us(s.g,"♪"):us(s.g,String.fromCharCode(p)));else if(160<=T&&255>=T)s.g&&us(s.g,String.fromCharCode(T));else if(4128<=T&&4223>=T){if(p=T&255,s.g)if(fx.has(p)){var F=fx.get(p);us(s.g,F)}else us(s.g,"_")}else 4256<=T&&4351>=T&&s.g&&((T&255)!=160?us(s.g,"_"):us(s.g,"[CC]"));L=null}(s=L)&&n.push(s)}}}}catch(U){if(U instanceof re&&U.code===3e3)at("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw U}return n}function cx(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}pa.prototype.getStreams=function(){return Array.from(this.A)},we("shaka.cea.CeaDecoder",pa),bt=function(){return new pa};function hx(e){for(var t=[],n=e,r=e=0;r<n.length;)e==2&&n[r]==3?(e=0,n=[].concat(_(n)),n.splice(r,1),n=new Uint8Array(n)):n[r]==0?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;e[r]==255;)n+=255,r++;n+=e[r++];for(var s=0;e[r]==255;)s+=255,r++;s+=e[r++],n==4&&t.push(e.subarray(r,r+s)),r+=s}return t}function mc(){this.j=new Map,this.i=this.h=0,this.g=i0}mc.prototype.init=function(e){function t(l){l=l.name,l in gc&&(n.g=gc[l])}var n=this,r=[],s=[];if(new tn().box("moov",Rt).box("mvex",Rt).S("trex",function(l){var c=l.reader;c.skip(4),c.skip(4),l=c.P(),c=c.P(),n.h=l,n.i=c}).box("trak",Rt).S("tkhd",function(l){var c=l.reader;l=l.version,l==1?(c.skip(8),c.skip(8)):(c.skip(4),c.skip(4));var d=c.P();l==1?c.skip(8):c.skip(4),c.skip(4),c.skip(8),c.skip(2),c.skip(2),c.skip(2),c.skip(2),c.skip(36),c.la(),c.la(),c.la(),c.la(),r.push(d)}).box("mdia",Rt).S("mdhd",function(l){l=Ef(l.reader,l.version),s.push(l.timescale)}).box("minf",Rt).box("stbl",Rt).S("stsd",Ar).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",Ri).box("sinf",Rt).box("frma",function(l){l=Qy(l.reader).codec,l in gc&&(n.g=gc[l])}).parse(e,!0),!r.length||!s.length||r.length!=s.length)throw new re(2,2,2010);this.g==i0&&je("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(l,c){n.j.set(l,s[c])})},mc.prototype.parse=function(e){var t=this;if(this.g==i0)return[];var n=[],r=0,s=[];return new tn().box("moof",function(l){r=l.start,s=[],Rt(l)}).box("traf",function(l){s.push({baseMediaDecodeTime:null,Yc:t.h,Id:t.i,Og:[],timescale:9e4}),Rt(l)}).S("trun",function(l){var c=s[s.length-1];l=Ky(l.reader,l.version,l.flags),c.Og.push(l)}).S("tfhd",function(l){var c=s[s.length-1];l=qy(l.reader,l.flags),c.Yc=l.Yc||t.h,c.Id=l.Id||t.i,l=l.trackId,t.j.has(l)&&(c.timescale=t.j.get(l))}).S("tfdt",function(l){var c=s[s.length-1];l=bf(l.reader,l.version),c.baseMediaDecodeTime=l.baseMediaDecodeTime}).box("mdat",function(l){for(var c=r-l.start-8,d=l.reader.va(),p=b(s),w=p.next();!w.done;w=p.next()){if(w=w.value,w.baseMediaDecodeTime===null)throw je("Unable to find base media decode time for CEA captions!"),new re(2,2,2010);l.reader.seek(d),FA(t,l.reader,w.baseMediaDecodeTime,w.timescale,w.Yc,w.Id,c,w.Og,n)}}).parse(e,!1),n};function FA(e,t,n,r,s,l,c,d,p){var w=0,T=l,E=d.map(function(R){return R.Wg});for(E=[].concat.apply([],_(E)),E.length&&(T=E[0].sampleSize||l),t.skip(c+d[0].Fh);t.na();){c=t.P();var I=t.T(),A=null;switch(A=!1,d=1,e.g){case Wu:A=I&31,A=A==6;break;case Xu:d=2,t.skip(1),A=I>>1&63,A=A==39||A==40;break;case qu:d=2,t.skip(1),A=I>>1&63,A=A==23||A==24;break;default:return}if(A)for(I=0,w<E.length&&(I=E[w].ne||0),I=(n+I)/r,d=b(hx(t.qb(c-d))),A=d.next();!A.done;A=d.next())p.push({packet:A.value,pts:I});else try{t.skip(c-d)}catch{break}T-=c+4,T==0&&(n=w<E.length?n+(E[w].Jf||s):n+s,w++,w<E.length?T=E[w].sampleSize||l:T=l)}}we("shaka.cea.Mp4CeaParser",mc);var i0=0,Wu=1,Xu=2,qu=3,gc={avc1:Wu,avc3:Wu,dvav:Wu,dva1:Wu,hev1:Xu,hvc1:Xu,dvh1:Xu,dvhe:Xu,vvc1:qu,vvi1:qu,dvc1:qu,dvi1:qu};Le["video/mp4"]=function(){return new mc};function yc(){this.g=null}yc.prototype.init=function(){},yc.prototype.parse=function(e){this.g?this.g.clearData():this.g=new rn;var t=[];if(e=Ae(e),!ku(e))return t;e=this.g.parse(e);var n=e.$c(),r=e.Pd();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=b(r),r=n.next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&r.time!=null)for(var s=b(hx(r.data)),l=s.next();!l.done;l=s.next())t.push({packet:l.value,pts:r.time});return t},we("shaka.cea.TsCeaParser",yc),Le["video/mp2t"]=function(){return new yc};function dx(e,t,n){var r=GA(e),s=null;e=[];var l=[],c=null,d=new Set(r.map(function(w){return w.keyId}));d.delete(null);var p="cenc";if(1<d.size)throw new re(2,4,4010);if(!t){if(l=r.filter(function(w){return w.Pc=="urn:mpeg:dash:sea:2012"}),1<l.length)throw new re(2,4,4050);l.length&&(c=XA(l[0])),(l=r.find(function(w){return w.Pc=="urn:mpeg:dash:mp4protection:2011"}))&&l.encryptionScheme&&(p=l.encryptionScheme),l=r.filter(function(w){return w.Pc=="urn:mpeg:dash:mp4protection:2011"?(s=w.init||s,!1):w.Pc!="urn:mpeg:dash:sea:2012"}),l.length&&(e=HA(s,p,l,n,d),e.length==0&&(e=[Qr("",p,s)]))}if(r.length&&!c&&(t||!l.length))for(e=[],t=b(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(Qr(n,p,s));if(d=Array.from(d)[0]||null)for(p=b(e),t=p.next();!t.done;t=p.next())for(t=b(t.value.initData),n=t.next();!n.done;n=t.next())n.value.keyId=d;return{pg:d,dk:s,drmInfos:e,Fe:c,tg:!0}}function $A(e,t,n,r){var s=dx(e,n,r);if(t.tg)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=s.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=s.drmInfos),t.tg=!1;else if(0<s.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(l){return s.drmInfos.some(function(c){return c.keySystem==l.keySystem})}),t.drmInfos.length==0))throw new re(2,4,4008);return s.pg||t.pg}function zA(e){var t=0,n=wt(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var s=n.getUint16(e,!0);if(e+=2,s&1||s+e>n.byteLength){n=[];break e}var l=Ae(n,e,s);t.push({type:r,value:l}),e+=s}n=t}return n}function VA(e){e=b(wo(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.children){t=b(t.children);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.tagName=="LA_URL")return Gn(n)}return""}function vc(e){var t=er(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Gn(t))?t:(e=er(e.node,"urn:microsoft:playready","pro"),!e||!Gn(e)||(e=Gn(e),e=oo(e),e=zA(e).filter(function(n){return n.type===qA})[0],!e)?"":(e=qo(e.value,!0),(e=Gs(e,"WRMHEADER"))?VA(e):""))}function HA(e,t,n,r,s){var l=[];n=b(n);for(var c=n.next();!c.done;c=n.next()){c=c.value;var d=r[c.Pc];if(d){var p;if((p=er(c.node,"urn:microsoft:playready","pro"))&&Gn(p)){p=Gn(p),p=oo(p);var w=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);p=[{initData:yf(p,w,new Set,0),initDataType:"cenc",keyId:c.keyId}]}else p=null;if(w=null,c.Pc==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){w=c;var T=s;if(T.size==0)w=null;else{var E=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),I=new Uint8Array([]);w=[{initData:yf(I,E,T,1),initDataType:"cenc",keyId:w.keyId}]}}p=Qr(d,t,c.init||e||p||w),(d=KA.get(d))&&(p.licenseServerUri=d(c)),l.push(p)}}return l}function GA(e){var t=[];e=b(e);for(var n=e.next();!n.done;n=e.next())(n=WA(n.value))&&t.push(n);return t}function WA(e){var t=e.attributes.schemeIdUri,n=tr(e,"urn:mpeg:cenc:2013","default_KID"),r=wy(e,"urn:mpeg:cenc:2013","pssh").map(xo),s=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new re(2,4,4009);var l=[];try{l=r.map(function(c){return{initDataType:"cenc",initData:oo(c),keyId:null}})}catch{throw new re(2,4,4007)}return{node:e,Pc:t,keyId:n,init:0<l.length?l:null,encryptionScheme:s}}function XA(e){if(!h.crypto||!h.crypto.subtle)throw je("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new re(2,4,4042);var t=er(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new re(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new re(2,4,4051);if(t=er(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new re(2,4,4051);if(e=t.attributes.IV,t=Ti(t.attributes.keyUriTemplate),!e||!t)throw new re(2,4,4051);if(e=Yr(e.substr(2)),e.byteLength!=16)throw new re(2,4,4048);return{ti:t,iv:e}}var qA=1,KA=new Map().set("com.widevine.alpha",function(e){var t=er(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Gn(t))?t:(e=er(e.node,"urn:microsoft","laurl"))&&Ti(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",vc).set("com.microsoft.playready.recommendation",vc).set("com.microsoft.playready.software",vc).set("com.microsoft.playready.hardware",vc).set("org.w3.clearkey",function(e){var t=er(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=Gn(t))?t:(e=er(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=Gn(e))?e:""});function xc(e,t,n,r,s,l){var c={RepresentationID:t,Number:n,SubNumber:r,Bandwidth:s,Time:l};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(d,p,w,T){if(d=="$$")return"$";var E=c[p];if(E==null)return d;switch(p=="RepresentationID"&&w&&(w=void 0),p=="Time"&&typeof E!="bigint"&&(.2<=Math.abs(E-Math.round(E))&&je("Calculated $Time$ values must be close to integers"),E=Math.round(E)),T){case void 0:case"d":case"i":case"u":d=E.toString();break;case"o":d=E.toString(8);break;case"x":d=E.toString(16);break;case"X":d=E.toString(16).toUpperCase();break;default:d=E.toString()}return w=h.parseInt(w,10)||1,Array(Math.max(0,w-d.length)+1).join("0")+d})}function px(e,t){var n=Po(e,t,"timescale"),r=1;n&&(r=nr(n)||1),n=Po(e,t,"duration"),(n=nr(n||""))&&(n/=r);var s=Po(e,t,"startNumber"),l=Number(Po(e,t,"presentationTimeOffset"))||0,c=yi(s||"");if((s==null||c==null)&&(c=1),s=null,t=ma(e,t,"SegmentTimeline")){t=on(t,"S"),s=r,e=e.ka.duration||1/0;for(var d=c,p=[],w=-l,T=0;T<t.length;++T){var E=t[T],I=t[T+1],A=Bt(E,"t",yi),R=Bt(E,"d",yi),D=Bt(E,"r",wf);if(E=Bt(E,"k",wf)||0,A!=null&&(A-=l),R){if(A=A??w,D=D||0,0>D)if(I){if(I=Bt(I,"t",yi),I==null)break;if(A>=I)break;D=Math.ceil((I-A)/R)-1}else{if(e==1/0)break;if(A/s>=e)break;D=Math.ceil((e*s-A)/R)-1}for(0<p.length&&A!=w&&(p[p.length-1].end=A/s),I=0;I<=D;++I)w=A+R,p.push({start:A/s,end:w/s,$f:A,zb:E,Si:p.length+d}),A=w}}s=p}return{timescale:r,La:n,vd:c,Nb:l/r||0,Zf:l,timeline:s}}function mx(e,t){return[t(e.J),t(e.ja),t(e.ta)].filter(Jr)}function Po(e,t,n){t=mx(e,t),e=null,t=b(t);for(var r=t.next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function ma(e,t,n){t=mx(e,t),e=null,t=b(t);for(var r=t.next();!r.done&&!(e=So(r.value,n));r=t.next());return e}function YA(e,t,n,r,s,l){for(var c=tr(e,"http://www.w3.org/1999/xlink","href"),d=tr(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",p=b(Object.keys(e.attributes)),w=p.next();!w.done;w=p.next()){w=w.value;var T=w.split(":"),E=Ud("http://www.w3.org/1999/xlink");T[0]==E&&delete e.attributes[w]}if(5<=l)return ts(new re(2,4,4028));if(d!="onLoad")return ts(new re(2,4,4027));var I=ri([r],[c]);return s.request(0,Qn(I,t)).Aa(function(A){if(A=Nd(A.data,e.tagName),!A)return ts(new re(2,4,4001,c));for(e.children=[];A.children.length;){var R=A.children.shift();R.tagName&&(R.parent=e),e.children.push(R)}R=b(Object.keys(A.attributes));for(var D=R.next();!D.done;D=R.next())D=D.value,e.attributes[D]=A.attributes[D];return wc(e,t,n,I[0],s,l+1)})}function wc(e,t,n,r,s,l){if(l=l===void 0?0:l,tr(e,"http://www.w3.org/1999/xlink","href")){var c=YA(e,t,n,r,s,l);return n&&(c=c.Aa(void 0,function(){return wc(e,t,n,r,s,l)})),c}c=[];for(var d=b(xy(e)),p=d.next(),w={};!p.done;w={Uc:void 0},p=d.next())w.Uc=p.value,tr(w.Uc,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(T){return function(E){return E!==T.Uc}}(w)):w.Uc.tagName!="SegmentTimeline"&&c.push(wc(w.Uc,t,n,r,s,l));return uy(c).Aa(function(){return e})}function QA(e,t,n,r,s,l,c){var d,p=new tn().S("sidx",function(w){d=ZA(t,r,s,l,c,n,w)});if(e&&p.parse(e),d)return d;throw new re(2,3,3004)}function ZA(e,t,n,r,s,l,c){var d=[];c.reader.skip(4);var p=c.reader.P();if(p==0)throw new re(2,3,3005);if(c.version==0)var w=c.reader.P(),T=c.reader.P();else w=c.reader.Nc(),T=c.reader.Nc();c.reader.skip(2);var E=c.reader.la();for(e=e+c.size+T,T=0;T<E;T++){var I=c.reader.P(),A=(I&2147483648)>>>31;I&=2147483647;var R=c.reader.P();if(c.reader.skip(4),A==1)throw new re(2,3,3006);d.push(new ft(w/p+n,(w+R)/p+n,function(){return l},e,e+I-1,t,n,r,s)),w+=R,e+=I}return c.parser.stop(),d}function Dr(e){this.h=wt(e),this.g=new en(this.h,0)}Dr.prototype.na=function(){return this.g.na()};function cr(e){var t=gx(e);if(7<t.length)throw new re(2,3,3002);var n=0;t=b(t);for(var r=t.next();!r.done;r=t.next())n=256*n+r.value;t=gx(e);e:{r=b(JA);for(var s=r.next();!s.done;s=r.next())if(Rn(t,new Uint8Array(s.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.va();else{if(t.length==8&&t[1]&224)throw new re(2,3,3001);for(s=r=0;s<t.length;s++){var l=t[s];r=s==0?l&(1<<8-t.length)-1:256*r+l}t=r}return t=e.g.va()+t<=e.h.byteLength?t:e.h.byteLength-e.g.va(),r=wt(e.h,e.g.va(),t),e.g.skip(t),new e4(n,r)}function gx(e){var t=e.g.va(),n=e.g.T();if(n==0)throw new re(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ae(e.h,t,n)}var JA=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function e4(e,t){this.id=e,this.g=t}function o0(e){if(8<e.g.byteLength)throw new re(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new re(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var r=e.g.getUint8(n);t=256*t+r}return t}function t4(e,t,n,r,s,l,c,d,p){function w(){return s}var T=[];e=new Dr(e.g);for(var E=null,I=null;e.na();){var A=cr(e);if(A.id==187){var R=n4(A);R&&(A=n*R.dj,R=t+R.Ii,E!=null&&T.push(new ft(E+c,A+c,w,I,R-1,l,c,d,p)),E=A,I=R)}}return E!=null&&T.push(new ft(E+c,r+c,w,I,null,l,c,d,p)),T}function n4(e){var t=new Dr(e.g);if(e=cr(t),e.id!=179)throw new re(2,3,3013);if(e=o0(e),t=cr(t),t.id!=183)throw new re(2,3,3012);t=new Dr(t.g);for(var n=0;t.na();){var r=cr(t);if(r.id==241){n=o0(r);break}}return{dj:e,Ii:n}}function yx(e,t,n){if(t=ma(e,t,"Initialization"),!t)return null;var r=e.J.Ga(),s=t.attributes.sourceURL;s&&(r=ri(r,[Ti(s)])),s=0;var l=null;return(t=Bt(t,"range",xf))&&(s=t.start,l=t.end),n=new Li(function(){return r},s,l,Sx(e),null,null,n),n.codecs=e.J.codecs,n.mimeType=e.J.mimeType,n}function i4(e,t,n){var r=Number(Po(e,ga,"presentationTimeOffset"))||0,s=Po(e,ga,"timescale"),l=1;s&&(l=nr(s)||1);var c=r/l||0,d=yx(e,ga,n);o4(e,d);var p=Ad(e);return{fc:function(){var w=ma(p,ga,"RepresentationIndex"),T=p.J.Ga();return w&&(w=Ti(w.attributes.sourceURL))&&(T=ri(T,[w])),w=xx(p),vx(p,t,d,T,w.start,w.end,c)}}}function vx(e,t,n,r,s,l,c){var d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae;return z(function(me){if(me.g==1)return d=e.presentationTimeline,p=!e.vb||!e.ka.ld,w=e.ka.start,T=e.ka.duration,E=e.J.mimeType.split("/")[1],I=t,A=null,R=[I(r,s,l,!1),E=="webm"?I(n.M(),n.Ha,n.sa,!0):null],I=null,k(me,Promise.all(R),2);if(D=me.h,L=D[0],F=D[1]||null,U=null,q=w-c,N=w,H=T?w+T:1/0,E=="mp4")var ue=QA(L,s,r,n,q,N,H);else{ue=L;var le=new Dr(F);if(cr(le).id!=440786851)throw new re(2,3,3008);var he=cr(le);if(he.id!=408125543)throw new re(2,3,3009);le=he.g.byteOffset,he=new Dr(he.g);for(var be=null;he.na();){var Ce=cr(he);if(Ce.id==357149030){be=Ce;break}}if(!be)throw new re(2,3,3010);for(be=new Dr(be.g),Ce=1e6,he=null;be.na();){var ke=cr(be);if(ke.id==2807729)Ce=o0(ke);else if(ke.id==17545)if(ke.g.byteLength==4)he=ke.g.getFloat32(0);else if(ke.g.byteLength==8)he=ke.g.getFloat64(0);else throw new re(2,3,3003)}if(he==null)throw new re(2,3,3011);if(be=Ce/1e9,he*=be,ue=cr(new Dr(ue)),ue.id!=475249515)throw new re(2,3,3007);ue=t4(ue,le,be,he,r,n,q,N,H)}for(U=ue,Y=b(U),oe=Y.next();!oe.done;oe=Y.next())ae=oe.value,ae.codecs=e.J.codecs,ae.mimeType=e.J.mimeType;return d.sd(U),A=new Ft(U),p&&A.Bc(N,H,!0),me.return(A)})}function ga(e){return e.Rc}function xx(e){var t=ma(e,ga,"RepresentationIndex");return e=Po(e,ga,"indexRange"),e=xf(e||""),t&&(e=Bt(t,"range",xf,e)),e}function o4(e,t){if(wx(e,t),!xx(e))throw new re(2,4,4002)}function wx(e,t){var n=e.J.mimeType.split("/")[1];if(e.J.contentType!=Ut&&n!="mp4"&&n!="webm")throw new re(2,4,4006);if(n=="webm"&&!t)throw new re(2,4,4005)}function Sx(e){var t=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Jc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.ja.label||null,roles:e.roles||null,language:e.ja.language||null}}function r4(e,t,n){var r=yx(e,Cx,n),s=s4(e);if(!s.La&&!s.timeline&&1<s.Ic.length)throw new re(2,4,4002);if(!s.La&&!e.ka.duration&&!s.timeline&&s.Ic.length==1)throw new re(2,4,4002);if(s.timeline&&s.timeline.length==0)throw new re(2,4,4002);var l=null,c=null;e.ta.id&&e.J.id&&(c=t[e.ta.id+","+e.J.id])&&(l=c.segmentIndex);var d=a4(e.ka.start,e.ka.duration,e.J.Ga,s,r,n,e.J.mimeType,e.J.codecs);return t=!l,l?l.rd(d,e.presentationTimeline.mb()):l=new Ft(d),e.presentationTimeline.sd(d),e.vb&&e.ka.ld||l.Bc(e.ka.start,e.ka.duration?e.ka.start+e.ka.duration:1/0,t),c&&(c.segmentIndex=l),{fc:function(){return l&&l.getNumReferences()!=0||l.Zd(d),Promise.resolve(l)}}}function Cx(e){return e.Pb}function s4(e){var t=u4(e);e=px(e,Cx);var n=e.vd;n==0&&(n=1);var r=0;return e.La?r=e.La*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{La:e.La,startTime:r,vd:n,Nb:e.Nb,timeline:e.timeline,Ic:t}}function a4(e,t,n,r,s,l,c,d){var p=r.Ic.length;r.timeline&&r.timeline.length!=r.Ic.length&&(p=Math.min(r.timeline.length,r.Ic.length));for(var w=e-r.Nb,T=t?e+t:1/0,E=[],I=r.startTime,A={},R=0;R<p;A={ve:void 0,oe:void 0},R++){A.oe=r.Ic[R];var D=I;I=void 0,I=r.La!=null?D+r.La:r.timeline?r.timeline[R].end:D+t,A.ve=null,A=new ft(e+D,e+I,function(L){return function(){return L.ve==null&&(L.ve=ri(n(),[L.oe.zi])),L.ve}}(A),A.oe.start,A.oe.end,s,w,e,T,[],"",null,null,Mr,l),A.codecs=d,A.mimeType=c,E.push(A)}return E}function u4(e){return[e.J.Pb,e.ja.Pb,e.ta.Pb].filter(Jr).map(function(t){return on(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.attributes.indexRange&&!e.lf&&(e.lf=!0);var n=Ti(t.attributes.media);return t=Bt(t,"mediaRange",xf,{start:0,end:null}),{zi:n,start:t.start,end:t.end}})}function Tx(e,t,n,r,s,l,c,d,p){p||e.J.Gc||(e.J.Gc=Po(e,fs,"initialization"));var w=e.J.Gc?h4(e,c):null,T=l4(e);f4(T);var E=Ad(e);if(T.jd)return wx(e,w),{fc:function(){var L=xc(T.jd,E.J.id,null,null,E.bandwidth||null,null);return L=ri(E.J.Ga(),[L]),vx(E,t,w,L,0,null,T.Nb)}};if(T.La)return r||e.ja.contentType==="image"||(e.presentationTimeline.xf(T.La),e.presentationTimeline.ce(e.ka.start)),{fc:function(){return c4(E,T,s,w,l,c,d)}};var I=null;r=r=null,e.ta.id&&e.J.id&&(r=e.ta.id+","+e.J.id,r=n[r])&&(I=r.segmentIndex);var A=e.ka.start,R=e.ka.duration?A+e.ka.duration:1/0,D=!(e.vb&&e.ka.ld);return I?(n=I,bx(n,T,A,R,D,w),n.Ma(e.presentationTimeline.mb())):I=new Sc(T,e.J.id,e.bandwidth,e.J.Ga,A,R,w,D,c,e.J.Kf),T.timeline&&e.ja.contentType!=="image"&&e.presentationTimeline.Ng(T.timeline,A),r&&e.vb&&(r.segmentIndex=I),{fc:function(){return I instanceof Sc&&I.getNumReferences()==0&&bx(I,T,A,R,D,w),Promise.resolve(I)}}}function fs(e){return e.$b}function l4(e){var t=px(e,fs),n=Po(e,fs,"media"),r=Po(e,fs,"index");return{La:t.La,timescale:t.timescale,vd:t.vd,Nb:t.Nb,Zf:t.Zf,timeline:t.timeline,Zb:n&&Ti(n),jd:r,mimeType:e.J.mimeType,codecs:e.J.codecs}}function f4(e){var t=e.jd?1:0;if(t+=e.timeline?1:0,t+=e.La?1:0,t==0)throw new re(2,4,4002);if(t!=1&&(e.jd&&(e.timeline=null),e.La=null),!e.jd&&!e.Zb)throw new re(2,4,4002)}function c4(e,t,n,r,s,l,c){function d(le){var he=(le-D)*R,be=he+t.Nb,Ce=he+E;he=Ce+R;var ke=Math.min(he,w());return Ce=new ft(Ce,ke,function(){var Oe=be*L;return"BigInt"in h&&Oe>Number.MAX_SAFE_INTEGER&&(Oe=BigInt(be)*BigInt(L)),Oe=xc(F,q,le,null,U,Oe),ri(N(),[Oe])},0,null,r,H,E,w(),[],"",null,null,Mr,l),Ce.codecs=e.J.codecs,Ce.mimeType=e.J.mimeType,Ce.j=he,Ce}function p(){var le=[Math.max(T.mb(),E),Math.min(T.Wb(),w())].map(function(he){return he-E});return le=[Math.ceil(le[0]/R),Math.ceil(le[1]/R)-1],e.J.Ia&&le[1]++,le.map(function(he){return he+D})}function w(){var le=I!=null&&s[I]||A;return le?E+le:1/0}var T=e.presentationTimeline,E=e.ka.start,I=e.ta.id,A=e.ka.duration,R=t.La,D=t.vd,L=t.timescale,F=t.Zb,U=e.bandwidth||null,q=e.J.id,N=e.J.Ga,H=E-t.Nb,Y=p();n=e.vb?Math.max(Y[0],Y[1]-n+1):Y[0],c=c||Y[1],Y=[];for(var oe=n;oe<=c;++oe){var ae=d(oe);Y.push(ae)}var me=new Ft(Y);if(Y=T.Wb()<w(),oe=T.V(),Y||oe){var ue=Math.max(n,c+1);n=R,e.J.Ia&&(n=.1),me.ue(n,function(){var le=T.mb();me.Ma(le);var he=b(p());he.next(),he=he.next().value;for(var be=[];ue<=he;){var Ce=d(ue);be.push(Ce),ue++}return le>w()&&!be.length?null:be})}return Promise.resolve(me)}function h4(e,t){var n=e.J.Gc;if(n||(n=Po(e,fs,"initialization")),!n)return null;n=Ti(n);var r=e.J.id,s=e.bandwidth||null,l=e.J.Ga;return t=new Li(function(){var c=xc(n,r,null,null,s,null);return ri(l(),[c])},0,null,Sx(e),null,null,t),t.codecs=e.J.codecs,t.mimeType=e.J.mimeType,t}function Sc(e,t,n,r,s,l,c,d,p,w){Ft.call(this,[]),this.g=e,this.C=t,this.A=n,this.B=r,this.h=s,this.j=l,this.o=c,this.s=p,this.F=w,d&&Ex(this)}X(Sc,Ft),S=Sc.prototype,S.getNumReferences=function(){return this.g?this.g.timeline.length:0},S.release=function(){Ft.prototype.release.call(this),this.g=null},S.Ma=function(e){if(this.g){for(var t=0,n=this.g.timeline,r=0;r<n.length&&n[r].end+this.h<=e;r+=1)t+=1;0<t&&(this.g.timeline=n.slice(t),this.O.length>=t&&(this.O=this.O.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function bx(e,t,n,r,s,l){if(d4(e,l),e.g){if(n=e.g.timeline,e.g.Zb!==t.Zb&&(e.g.Zb=t.Zb),n.length){var c=n[n.length-1];t=t.timeline.filter(function(d){return d.start>=c.end})}else t=t.timeline.slice();0<t.length&&e.g.timeline.push.apply(e.g.timeline,_(t)),e.j!==r&&(e.j=r)}else e.g=t,e.h=n,e.j=r;s&&Ex(e)}function d4(e,t){if(e.o!==t){e.o=t,e=b(e.O);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&Vy(n,t)}}function Ex(e){if(!e.m){for(var t=e.g.timeline;t.length&&t[t.length-1].start>=e.j;)t.pop();e.Ma(e.h)}}S.find=function(e){if(this.g&&this.g.timeline&&this.g.timeline.length&&e<this.g.timeline[0].start+this.h)return this.i;if(!this.g)return null;var t=this.g.timeline;if(e<this.h||e>=this.j)return null;for(var n=t.length-1,r=0;r<t.length;r++){var s=t[r],l=s.start+this.h;if(s=r<n?t[r+1].start+this.h:this.j===1/0?s.end+this.h:this.j,e>=l&&e<s)return r+this.i}return null},S.get=function(e){var t=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.g)return null;var n=this.O[e];if(!n){var r=this.g.timeline[e],s=r.Si,l=this.g.Zf+r.$f;n=this.h-this.g.Nb;var c=this.h+r.end,d=c;e===this.getNumReferences()-1&&this.j!==1/0&&(d=this.j);for(var p=this.g.codecs,w=this.g.mimeType,T=[],E=(r.end-r.start)/r.zb,I={},A=0;A<r.zb;I={we:void 0,kh:void 0},A++){var R=r.start+E*A,D=R+E;I.kh=A+1,I.we=null,I=new ft(this.h+R,this.h+D,function(L){return function(){return t.g?(L.we==null&&(L.we=kx(t.g.Zb,t.C,s,t.A,l,L.kh,t.B)),L.we):[]}}(I),0,null,this.o,n,this.h,this.j,[],"",null,null,Mr,this.s),I.codecs=p,I.mimeType=w,this.F==0?0<A&&I.Xd():A%this.F!=0&&I.Xd(),T.push(I)}n=new ft(this.h+r.start,d,function(){return 0<r.zb||!t.g?[]:kx(t.g.Zb,t.C,s,t.A,l,null,t.B)},0,null,this.o,n,this.h,this.j,T,"",null,null,Mr,this.s,0<r.zb),n.codecs=p,n.mimeType=w,n.j=c,this.O[e]=n}return n};function kx(e,t,n,r,s,l,c){return e=xc(e,t,n,l,r||null,s),ri(c(),[e]).map(function(d){return d.toString()})}function ya(e){this.o=null,this.A=e,this.G=new $s,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.s="UNKNOWN"}ya.prototype.configure=function(e){this.o=e},ya.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},ya.prototype.setManifestType=function(e){this.s=e};function Ku(e,t){var n,r,s,l,c,d,p;return z(function(w){if(w.g==1)return n=ri(e.i,[p4(e,t)]),r=Qn(n,e.o.retryParameters),s=e.A.networkingEngine.request(8,r),ns(e.G,s),Q(w,2),k(w,s.promise,4);if(w.g!=2)return l=w.h,c=fn(l.data),d=JSON.parse(c),d.VERSION==1&&m4(e,d,l.uri),J(w,0);if((p=te(w))&&p.code==7001)return w.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new Mt(function(){Ku(e,t)}),e.g.Y(e.C),V(w)})}function p4(e,t){if(!e.m.length)return t;t=new Ln(t);var n=e.B||e.m[0],r=Math.round(e.A.getBandwidthEstimate()),s=t.g;return e.s=="DASH"?(s.add("_DASH_pathway",n),s.add("_DASH_throughput",String(r))):e.s=="HLS"&&(s.add("_HLS_pathway",n),s.add("_HLS_throughput",String(r))),Eg(s)&&su(t,s),t.toString()}function m4(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new Mt(function(){Ku(e,r)}),(n=t.TTL)&&(e.C=n),e.g.Y(e.C),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}function va(e,t,n,r){var s=e.l.get(t);s||(s=new Map),s.set(n,r),e.l.set(t,s)}ya.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Yu(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var r=[],s=b(e.m),l=s.next(),c={};!l.done;c={Lc:void 0},l=s.next())if(c.Lc=l.value,l=t.get(c.Lc))r.push({Df:c.Lc,location:l});else if(l=e.F.find(function(p){return function(w){return w.wj==p.Lc}}(c))){var d=t.get(l["BASE-ID"]);d&&(l["URI-REPLACEMENT"].rh?(d=new Ln(d),Kl(d,l["URI-REPLACEMENT"].rh),r.push({Df:c.Lc,location:d.toString()})):r.push({Df:c.Lc,location:d}))}for(s=Date.now(),c=b(e.j.keys()),l=c.next();!l.done;l=c.next())l=l.value,d=e.j.get(l),s>d&&e.j.delete(l);if(r=r.filter(function(p){for(var w=b(e.j.keys()),T=w.next();!T.done;T=w.next())if(T.value.includes(new Ln(p.location).Eb))return!1;return!0}),r.length&&(e.B=r[0].Df),r=r.map(function(p){return p.location}),!r.length&&e.h)for(s=b(e.h.split(",")),c=s.next();!c.done;c=s.next())(c=t.get(c.value))&&(e.B=e.h,r.push(c));if(!r.length)for(t=b(t.values()),s=t.next();!s.done;s=t.next())r.push(s.value);return n?r:ri(e.i,r)}function Ai(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.s=this.o=!1,this.m=new Set}S=Ai.prototype,S.release=function(){for(var e=b(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},S.ei=function(){return this.j},S.jf=function(){return this.l.slice()},S.Nh=function(){return this.i};function Ax(e,t){var n=[],r=[],s=[],l=[];e=b(e);for(var c=e.next();!c.done;c=e.next()){var d=c.value;c=new Map(d.audioStreams.map(function(E){return[u0(E),E]}));var p=new Map(d.videoStreams.map(function(E){return[a0(E),E]})),w=new Map(d.textStreams.map(function(E){return[el(E),E]}));if(d=new Map(d.imageStreams.map(function(E){return[tl(E),E]})),t){var T=Dx(Ut);w.set(el(T),T),T=Dx("image"),d.set(tl(T),T)}n.push(c),r.push(p),s.push(w),l.push(d)}return{jg:n,ph:r,lh:s,Eg:l}}S.Ke=function(e,t,n){n=n===void 0?!1:n;var r=this,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me,ue,le,he,be,Ce,ke,Oe,Ie;return z(function(Fe){if(Fe.g==1){if(s=zn,!t&&e.length==1)return l=Ax(e,!1),c=l.jg,d=l.ph,p=l.lh,w=l.Eg,r.h=Array.from(c[0].values()),r.g=Array.from(d[0].values()),r.l=Array.from(p[0].values()),r.i=Array.from(w[0].values()),Fe.u(2);for(T=n?r.m.size:0,E=-1,I=0;I<e.length;I++)A=e[I],r.m.has(A.id)||(r.m.add(A.id),E==-1&&(E=I));return E==-1?Fe.return():(R=Ax(e,!0),D=R.jg,L=R.ph,F=R.lh,U=R.Eg,k(Fe,Promise.all([Pr(r,r.h,D,E,Qu,xa,T),Pr(r,r.g,L,E,Qu,xa,T),Pr(r,r.l,F,E,Qu,xa,T),Pr(r,r.i,U,E,Qu,xa,T)]),2))}if(q=0,N=[],r.g.length&&r.h.length)for(ue=b(r.h),le=ue.next();!le.done;le=ue.next())for(he=le.value,be=b(r.g),Ce=be.next();!Ce.done;Ce=be.next())ke=Ce.value,Oe=pd(he.drmInfos,ke.drmInfos),he.drmInfos.length&&ke.drmInfos.length&&!Oe.length||(Ie=q++,N.push({id:Ie,language:he.language,disabledUntilTime:0,primary:he.primary,audio:he,video:ke,bandwidth:(he.bandwidth||0)+(ke.bandwidth||0),drmInfos:Oe,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(H=r.g.length?r.g:r.h,Y=b(H),oe=Y.next();!oe.done;oe=Y.next())ae=oe.value,me=q++,N.push({id:me,language:ae.language,disabledUntilTime:0,primary:ae.primary,audio:ae.type==s.X?ae:null,video:ae.type==s.ga?ae:null,bandwidth:ae.bandwidth||0,drmInfos:ae.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});r.j=N,V(Fe)})};function Ix(e){var t,n,r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me,ue,le,he,be,Ce;return z(function(ke){switch(ke.g){case 1:if(t=zn,e.length==1)return ke.return(e[0]);for(n=e.map(function(Oe){return new Map(Oe.filter(function(Ie){return Ie.type===t.X}).map(function(Ie){return[u0(Ie),Ie]}))}),r=e.map(function(Oe){return new Map(Oe.filter(function(Ie){return Ie.type===t.ga}).map(function(Ie){return[a0(Ie),Ie]}))}),s=e.map(function(Oe){return new Map(Oe.filter(function(Ie){return Ie.type===t.ua}).map(function(Ie){return[el(Ie),Ie]}))}),l=e.map(function(Oe){return new Map(Oe.filter(function(Ie){return Ie.type===t.De}).map(function(Ie){return[tl(Ie),Ie]}))}),c=b(s),d=c.next();!d.done;d=c.next())p=d.value,w=Lx(t.ua),p.set(el(w),w);for(T=b(l),E=T.next();!E.done;E=T.next())I=E.value,A=Lx(t.De),I.set(tl(A),A);return R=new Ai,k(ke,Pr(R,[],n,0,Cc,Tc,0),2);case 2:return D=ke.h,k(ke,Pr(R,[],r,0,Cc,Tc,0),3);case 3:return L=ke.h,k(ke,Pr(R,[],s,0,Cc,Tc,0),4);case 4:return F=ke.h,k(ke,Pr(R,[],l,0,Cc,Tc,0),5);case 5:if(U=ke.h,q=0,L.length&&D.length)for(ae=b(D),me=ae.next();!me.done;me=ae.next())for(ue=me.value,le=b(L),he=le.next();!he.done;he=le.next())be=he.value,Ce=q++,be.variantIds.push(Ce),ue.variantIds.push(Ce);else for(N=L.concat(D),H=b(N),Y=H.next();!Y.done;Y=H.next())oe=Y.value,oe.variantIds=[q++];return ke.return(L.concat(D).concat(F).concat(U))}})}function Pr(e,t,n,r,s,l,c){var d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me;return z(function(ue){switch(ue.g){case 1:for(d=[],p=0;p<n.length;p++)p>=r?d.push(new Set(n[p].values())):d.push(new Set);w=b(t),T=w.next();case 2:if(T.done){ue.u(4);break}return E=T.value,k(ue,g4(e,E,n,r,l,d,c),5);case 5:if(I=ue.h,!I)throw new re(2,4,4037);T=w.next(),ue.u(2);break;case 4:for(A=b(d),R=A.next();!R.done;R=A.next())for(D=R.value,L=b(D),F=L.next();!F.done;F=L.next())U=F.value,(q=y4(e,U,n,s,l,d))&&t.push(q);for(N=b(d),H=N.next();!H.done;H=N.next())for(Y=H.value,oe=b(Y),ae=oe.next(),me={};!ae.done;me={Tf:void 0},ae=oe.next())if(me.Tf=ae.value,!s0(me.Tf)&&t.some(function(le){return function(he){return r0(e,le.Tf,he)}}(me)))throw new re(2,4,4037);return ue.return(t)}})}function g4(e,t,n,r,s,l,c){return z(function(d){return d.g==1?(Rx(e,n,t,0<c),t.matchedStreams?t.segmentIndex?k(d,Mx(t,r+c),2):d.u(2):d.return(!1)):(_x(t,r,s,l,c),d.return(!0))})}function Mx(e,t){var n,r,s,l,c,d,p;return z(function(w){if(w.g==1){for(n=[],r=e.matchedStreams,s=b(r),l=s.next();!l.done;l=s.next())c=l.value,n.push(c.createSegmentIndex()),c.trickModeVideo&&!c.trickModeVideo.segmentIndex&&n.push(c.trickModeVideo.createSegmentIndex());return k(w,Promise.all(n),2)}if(e.segmentIndex instanceof In)for(d=t;d<r.length;d++)p=r[d],p.segmentIndex&&e.segmentIndex.g.push(p.segmentIndex);V(w)})}function y4(e,t,n,r,s,l){if(s0(t))return null;var c=r(t);return Rx(e,n,c),c.createSegmentIndex&&(c.createSegmentIndex=function(){return z(function(d){return c.segmentIndex?d.u(0):(c.segmentIndex=new In,k(d,Mx(c,0),0))})}),!c.matchedStreams||!c.matchedStreams.length?null:(_x(c,0,s,l,0),c)}function _x(e,t,n,r,s){var l=e.matchedStreams;for(t+=s;t<l.length;t++){var c=l[t];n(e,c);var d=!0;if(e.type=="audio"&&es(e.language,c.language)==0&&(d=!1),d&&(r[t-s].delete(c),c.fullMimeTypes))for(c=b(c.fullMimeTypes.values()),d=c.next();!d.done;d=c.next())e.fullMimeTypes.add(d.value)}}function Qu(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=b(t.matchedStreams),r=n.next();!r.done;r=n.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Cc(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function xa(e,t){function n(c,d){c||(c=[]),d=b(d);for(var p=d.next();!p.done;p=d.next())p=p.value,c.includes(p)||c.push(p);return c}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=b(t.keyIds),s=r.next();!s.done;s=r.next())e.keyIds.add(s.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),r=pd(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new re(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=b(t.closedCaptions),s=r.next();!s.done;s=r.next()){var l=b(s.value);s=l.next().value,l=l.next().value,e.closedCaptions.set(s,l)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Qu(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),xa(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&xa(e.trickModeVideo,t)}function Tc(e,t){var n=e.roles;n||(n=[]);for(var r=b(t.roles),s=r.next();!s.done;s=r.next())s=s.value,n.includes(s)||n.push(s);for(e.roles=n,n=b(t.keyIds),r=n.next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,_(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=b(t.closedCaptions),n=t.next();!n.done;n=t.next())r=b(n.value),n=r.next().value,r=r.next().value,e.closedCaptions.set(n,r)}function Rx(e,t,n,r){r=r!==void 0&&r?n.matchedStreams:[],t=b(t);for(var s=t.next();!s.done;s=t.next()){if(s=v4(e,s.value,n),!s)return;r.push(s)}n.matchedStreams=r}function v4(e,t,n){var r={audio:u0,video:a0,text:el,image:tl}[n.type],s=null,l=r(n);if(t.has(l))s=t.get(l);else{l={audio:function(w,T){return r0(e,w,T)},video:function(w,T){return r0(e,w,T)},text:x4,image:w4}[n.type];for(var c={audio:S4,video:C4,text:T4,image:b4}[n.type],d=b(t.values()),p=d.next();!p.done;p=d.next())p=p.value,!l(n,p)||n.fastSwitching!=p.fastSwitching||s&&!c(n,s,p)||(s=p)}return e.s&&!s0(s)&&t.delete(r(s)),s}function Zu(e,t){return e.mimeType!=t.mimeType?!1:bc(e.codecs)===bc(t.codecs)}S.Zg=function(e){this.o=e},S.gh=function(e){this.s=e};function r0(e,t,n){return!(!Zu(t,n)&&!e.o||t.drmInfos&&!kg(t.drmInfos,n.drmInfos))}function x4(e,t){return t.language?!(e.forced!==t.forced||es(e.language,t.language)==0||t.kind!=e.kind):!0}function w4(){return!0}function S4(e,t,n){var r=Zu(e,t),s=Zu(e,n);if(r&&!s)return!1;if(!r&&s||(r=es(e.language,t.language),s=es(e.language,n.language),s>r))return!0;if(s<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(l){return e.roles.includes(l)}),s=n.roles.filter(function(l){return e.roles.includes(l)}),s.length>r.length)return!0;if(s.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(r=Ju(e.channelsCount,t.channelsCount,n.channelsCount),r==Oo?!0:r==hr?!1:(r=Ju(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),r==Oo?!0:r==hr?!1:!!(e.bandwidth&&Px(e.bandwidth,t.bandwidth,n.bandwidth)==Oo)))}function C4(e,t,n){var r=Zu(e,t),s=Zu(e,n);if(r&&!s)return!1;if(!r&&s||(r=Ju(e.width*e.height,t.width*t.height,n.width*n.height),r==Oo))return!0;if(r==hr)return!1;if(e.frameRate){if(r=Ju(e.frameRate,t.frameRate,n.frameRate),r==Oo)return!0;if(r==hr)return!1}return!!(e.bandwidth&&Px(e.bandwidth,t.bandwidth,n.bandwidth)==Oo)}function T4(e,t,n){var r=es(e.language,t.language),s=es(e.language,n.language);if(s>r)return!0;if(s<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(l){return e.roles.includes(l)}),s=n.roles.filter(function(l){return e.roles.includes(l)}),s.length>r.length)return!0;if(s.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function b4(e,t,n){return Ju(e.width*e.height,t.width*t.height,n.width*n.height)==Oo}function Lx(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Dx(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ft([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set}}function Ju(e,t,n){if(t==e&&e!=n)return hr;if(n==e&&e!=t)return Oo;if(t>e){if(n<=e||n-e<t-e)return Oo;if(n-e>t-e)return hr}else{if(n>e)return hr;if(e-n<e-t)return Oo;if(e-n>e-t)return hr}return Ox}function Px(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Oo:t<e?hr:Ox}function s0(e){switch(e.type){case Ut:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function a0(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,bc(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function u0(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,bc(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function el(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function tl(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function bc(e){if(!l0.has(e)){var t=bi(e);l0.set(e,t)}return l0.get(e)}we("shaka.util.PeriodCombiner",Ai),Ai.prototype.setUseStreamOnce=Ai.prototype.gh,Ai.prototype.setAllowMultiTypeVariants=Ai.prototype.Zg,Ai.prototype.combinePeriods=Ai.prototype.Ke,Ai.prototype.getImageStreams=Ai.prototype.Nh,Ai.prototype.getTextStreams=Ai.prototype.jf,Ai.prototype.getVariants=Ai.prototype.ei;var Oo=1,Ox=0,hr=-1,l0=new Map;function E4(e,t){var n=new DOMParser,r=k4.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function Nx(e,t){try{var n=Ko(e);return E4(n,t)}catch{return null}}var k4=new Is(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Ec(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.ea=1,this.B=[],this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.o=new Map,this.s={},this.ba={},this.m=new Ai,this.H=0,this.da=new Ze(5),this.I=new Mt(function(){if(e.G&&!e.g.continueLoadingWhenPaused&&(e.C.jb(e.G,"timeupdate"),e.G.paused)){e.C.ha(e.G,"timeupdate",function(){return zx(e)});return}zx(e)}),this.N=new $s,this.L=null,this.fa=[],this.R=1/0,this.F=!1,this.h=null,this.K=0,this.U=!1,this.C=new Ct,this.G=null,this.Z=!1}S=Ec.prototype,S.configure=function(e){var t=this.j&&e.dash.updatePeriod!=this.g.dash.updatePeriod&&0<=e.dash.updatePeriod;this.g=e,t&&this.i&&this.i.presentationTimeline.V()&&this.I.tc(),this.h&&this.h.configure(this.g),this.m&&(this.m.Zg(this.g.dash.multiTypeVariantsAllowed&&Pn()),this.m.gh(this.g.dash.useStreamOnceInPeriodFlattening))},S.start=function(e,t){var n=this,r;return z(function(s){if(s.g==1)return n.F=t.isLowLatencyMode(),n.A=[e],n.j=t,k(s,f0(n),2);if(r=s.h,n.j&&c0(n,r),!n.j)throw new re(2,7,7001);return s.return(n.i)})},S.stop=function(){for(var e=b(Object.values(this.s)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.s={},this.o.clear(),this.l={ae:"",type:"",profiles:[],Kb:null,Ia:0,Ga:null,td:0},this.m=null,this.I!=null&&(this.I.stop(),this.I=null),this.h&&this.h.destroy(),this.C&&(this.C.release(),this.C=null),this.N.destroy()},S.update=function(){var e=this,t;return z(function(n){if(n.g==1)return Q(n,2),k(n,f0(e),4);if(n.g!=2)return J(n,0);if(t=te(n),!e.j||!t)return n.return();e.j.onError(t),V(n)})},S.onExpirationUpdated=function(){},S.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.V()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.i.presentationTimeline.Wb();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.H=t.endTime-e,c0(this,0))}}},S.banLocation=function(e){this.h&&this.h.banLocation(e)},S.setMediaElement=function(e){this.G=e};function f0(e){var t,n,r,s,l,c,d,p,w,T;return z(function(E){return E.g==1?(t=4,n="MPD",r=F4(e),s=e.A,r.length?(s=r,n="Patch",t=6):1<e.A.length&&e.h&&(l=Yu(e.h,"Location",!0),l.length&&(s=l)),c=Qn(s,e.g.retryParameters),d=Date.now(),k(E,d0(e,c,0,{type:t}),2)):E.g!=3?(p=E.h,e.j?(p.uri&&p.uri!=p.originalUri&&!e.A.includes(p.uri)&&e.A.unshift(p.uri),k(E,A4(e,p.data,p.uri,n),3)):E.return(0)):(w=Date.now(),T=(w-d)/1e3,e.da.sample(1,T),E.return(T))})}function A4(e,t,n,r){var s,l,c,d,p,w,T,E,I,A;return z(function(R){if(R.g==1){if(s=t,l=e.g.dash.manifestPreprocessor,c=zf,l!=c){if(Ot("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),d=Nx(s,r),!d)throw new re(2,4,4001,n);l(d),s=Mo(d.outerHTML)}if(p=Nd(s,r),!p)throw new re(2,4,4001,n);return w=e.g.dash.manifestPreprocessorTXml,T=Vf,w!=T&&w(p),r==="Patch"?R.return(I4(e,p)):e.g.dash.disableXlinkProcessing?R.return(Ux(e,p,n)):(E=e.g.dash.xlinkFailGracefully,I=wc(p,e.g.retryParameters,E,n,e.j.networkingEngine),ns(e.N,I),k(R,I.promise,2))}return A=R.h,R.return(Ux(e,A,n))})}function Ux(e,t,n){var r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me,ue,le,he,be,Ce,ke,Oe,Ie,Fe,vt,Dt,Sn,$t,kn,Un,Cn,qt,Mn,Wn,Xn,$i,zi,bo,pr,Ur,Aa,mr,sh,yl,vl;return z(function(No){switch(No.g){case 1:for(e.h&&e.h.l.clear(),r=[n],s=[],l=new Map,c=on(t,"Location"),d=b(c),p=d.next();!p.done;p=d.next())w=p.value,T=w.attributes.serviceLocation,(E=xo(w))&&(I=ri(r,[E])[0],T&&(e.h?va(e.h,"Location",T,I):l.set(T,I)),s.push(I));if(e.h?(A=Yu(e.h,"Location",!0),0<A.length&&(r=e.A=A)):s.length&&(r=e.A=s),e.l.ae=t.attributes.id||"",e.l.td=Bt(t,"publishTime",Ir)||0,e.B=on(t,"PatchLocation"),R=Promise.resolve(),(D=So(t,"ContentSteering"))&&e.j)for(L=D.attributes.defaultServiceLocation,e.h?(e.h.i=r,e.h.h=L):(e.h=new ya(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=r,e.h.h=L,(F=xo(D))&&(Bt(D,"queryBeforeStart",Bd,!1)?R=Ku(e.h,F):Ku(e.h,F))),U=b(l.keys()),q=U.next();!q.done;q=U.next())N=q.value,H=l.get(N),va(e.h,"Location",N,H);if(Y=on(t,"BaseURL"),ae=!1,e.h)for(me=b(Y),ue=me.next();!ue.done;ue=me.next())le=ue.value,he=le.attributes.serviceLocation,be=xo(le),he&&be&&(va(e.h,"BaseURL",he,be),ae=!0);if(ae&&e.h||(Ce=Y.map(xo),oe=ri(r,Ce)),ke=function(){return e.h&&ae?Yu(e.h,"BaseURL"):oe||[]},e.l.Ga=ke,Oe=0,Y&&Y.length&&(Oe=Bt(Y[0],"availabilityTimeOffset",Sf)||0),e.l.Ia=Oe,Ie=e.g.dash.ignoreMinBufferTime,Fe=0,Ie||(Fe=Bt(t,"minBufferTime",Ho)||0),e.H=Bt(t,"minimumUpdatePeriod",Ho,-1),vt=Bt(t,"availabilityStartTime",Ir),Dt=Bt(t,"timeShiftBufferDepth",Ho),Sn=e.g.dash.ignoreSuggestedPresentationDelay,$t=null,Sn||($t=Bt(t,"suggestedPresentationDelay",Ho)),kn=e.g.dash.ignoreMaxSegmentDuration,Un=null,kn||(Un=Bt(t,"maxSegmentDuration",Ho)),Cn=t.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.Z=e.i.presentationTimeline.V()&&Cn=="static"),e.l.type=Cn,e.i)for(qt=e.i.presentationTimeline,Mn=b(Object.values(e.s)),Wn=Mn.next();!Wn.done;Wn=Mn.next())Xn=Wn.value,Xn.segmentIndex&&Xn.segmentIndex.Ma(qt.mb());else $i=e.g.defaultPresentationDelay||1.5*Fe,zi=$t??$i,qt=new st(vt,zi,e.g.dash.autoCorrectDrift);return qt.sc(Cn=="static"),qt.V()&&!isNaN(e.g.availabilityWindowOverride)&&(Dt=e.g.availabilityWindowOverride),Dt==null&&(Dt=1/0),qt.pe(Dt),bo=t.attributes.profiles||"",e.l.profiles=bo.split(","),pr={vb:Cn!="static",presentationTimeline:qt,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:Oe,Kb:null,profiles:bo.split(","),roles:null},e.K=0,Ur=$x(e,pr,ke,t),Aa=Ur.duration,mr=Ur.periods,(Cn!="static"||e.Z)&&Ur.rg||qt.Za(Aa||1/0),e.U&&!e.F&&e.j.isAutoLowLatencyMode()&&(e.j.enableLowLatencyMode(),e.F=e.j.isLowLatencyMode()),e.F&&qt.$g(e.R),qt.xf(Un||1),k(No,R,2);case 2:return e.F&&(Fe=0,sh=$t??e.g.defaultPresentationDelay,qt.Of(sh)),e.i?(e.i.periodCount=mr.length,e.i.gapCount=e.K,k(No,Bx(e,mr,!1),4)):k(No,e.m.Ke(mr,pr.vb),6);case 6:if(e.i={presentationTimeline:qt,variants:e.m.j,textStreams:e.m.jf(),imageStreams:e.m.i,offlineSessionIds:[],minBufferTime:Fe||0,sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:M4(t),nextUrl:_4(t),periodCount:mr.length,gapCount:e.K,isLowLatency:e.U},!qt.nh()){No.u(7);break}return yl=on(t,"UTCTiming"),k(No,B4(e,ke,yl),8);case 8:if(vl=No.h,!e.j)return No.return();qt.ah(vl);case 7:qt.Wd();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),V(No)}})}function Bx(e,t,n){var r;return z(function(s){if(s.g==1)return k(s,e.m.Ke(t,!0,n),2);e.i.variants=e.m.j,r=e.m.jf(),0<r.length&&(e.i.textStreams=r),e.i.imageStreams=e.m.i,e.j.filter(e.i),V(s)})}function I4(e,t){var n,r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me,ue,le,he;return z(function(be){if(be.g==1){if(n=t.attributes.mpdId,r=Bt(t,"originalPublishTime",Ir),!n||n!==e.l.ae||r!==e.l.td)throw e.B=[],new re(1,4,4052);for(s=[],l=[],c=new Set,d=b(xy(t)),p=d.next();!p.done;p=d.next())if(w=p.value,T=Cf(w.attributes.sel||""),E=T[T.length-1],I=xo(w)||"",E.name==="MPD")if(E.Sb==="mediaPresentationDuration"){A=xo(w)||"";var Ce=Ho(A);if(Ce!=null){e.l.Kb=Ce;for(var ke=b(e.o.values()),Oe=ke.next();!Oe.done;Oe=ke.next())Oe.value.Kb=Ce}}else if(E.Sb==="type"){for(e.i.presentationTimeline.sc(I=="static"),e.l.type=I,Ce=b(e.o.values()),ke=Ce.next();!ke.done;ke=Ce.next())ke.value.vb=I=="dynamic";I=="static"&&(e.H=-1)}else E.Sb==="publishTime"?e.l.td=Ir(I)||0:E.Sb===null&&w.tagName==="add"&&l.push(w);else if(E.name==="PatchLocation")Sy(e.B,w);else if(E.name==="Period"){if(w.tagName==="add")l.push(w);else if(w.tagName==="remove"&&E.id){Ce=e,ke=E.id,Ce.i.periodCount--,Oe=b(Ce.o.keys());for(var Ie=Oe.next();!Ie.done;Ie=Oe.next())if(Ie=Ie.value,Ie.startsWith(ke)){var Fe=Ce.o.get(Ie);ma(Fe,fs,"SegmentTimeline").children=[],Fx(Ce,Ie),Ce.o.delete(Ie)}}}else if(E.name==="SegmentTemplate"){if(ke=Cf(w.attributes.sel||""),Ce=ke[ke.length-1],Ce.Sb){for(ke=jx(e,ke),Oe=xo(w)||"",Ie=b(ke),Fe=Ie.next();!Fe.done;Fe=Ie.next())Fe=e.o.get(Fe.value),Ty(Fe.J.$b,w.tagName,Ce.Sb,Oe);Ce=ke}else Ce=[];for(R=Ce,D=b(R),L=D.next();!L.done;L=D.next())F=L.value,c.add(F)}else if(E.name==="SegmentTimeline"||E.name==="S"){for(Ce=Cf(w.attributes.sel||""),Ce=jx(e,Ce),ke=b(Ce),Oe=ke.next();!Oe.done;Oe=ke.next())Oe=e.o.get(Oe.value),Oe=ma(Oe,fs,"SegmentTimeline"),Ie=on(Oe,"S"),Sy(Ie,w),Oe.children=Ie;for(U=Ce,q=b(U),N=q.next();!N.done;N=q.next())H=N.value,c.add(H)}for(Y=b(c),oe=Y.next();!oe.done;oe=Y.next())ae=oe.value,Fx(e,ae);for(me=b(l),ue=me.next();!ue.done;ue=me.next())le=ue.value,s.push.apply(s,_($x(e,{vb:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,ta:null,ka:null,ja:null,J:null,bandwidth:0,lf:!1,Ia:e.l.Ia,profiles:e.l.profiles,Kb:e.l.Kb,roles:null},e.l.Ga,le).periods));return s.length?(e.i.periodCount+=s.length,e.i.gapCount=e.K,k(be,Bx(e,s,!0),2)):be.u(2)}e.l.type=="static"&&(he=e.l.Kb,e.i.presentationTimeline.Za(he||1/0)),V(be)})}function jx(e,t){var n="",r="",s=-1,l="";t=b(t);for(var c=t.next();!c.done;c=t.next())c=c.value,c.name==="Period"?n=c.id:c.name==="AdaptationSet"?(r=c.id,c.position!==null&&(s=c.position)):c.name==="Representation"&&(l=c.id);if(t=[],l)t.push(n+","+l);else if(r)for(s=b(e.o.values()),e=s.next();!e.done;e=s.next())e=e.value,e.ta.id===n&&e.ja.id===r&&e.J.id&&t.push(n+","+e.J.id);else if(-1<s)for(r=b(e.o.values()),e=r.next();!e.done;e=r.next())e=e.value,e.ta.id===n&&e.ja.position===s&&e.J.id&&t.push(n+","+e.J.id);return t}function Fx(e,t){var n=e.o.get(t),r=e.s[t];r.segmentIndex&&r.segmentIndex.Ma(e.i.presentationTimeline.mb());try{var s=Tx(n,function(l,c,d,p){return Hx(e,l,c,d,p)},e.s,!0,e.g.dash.initialSegmentLimit,e.ba,n.J.aesKey,null,!0);r.createSegmentIndex=function(){return z(function(l){if(l.g==1)return r.segmentIndex?l.u(0):k(l,s.fc(),3);r.segmentIndex=l.h,V(l)})}}catch(l){if(t=n.J.contentType,t!=Ut&&t!="application"&&t!="image"||l.code!=4002)throw l}}function M4(e){var t=So(e,"ServiceDescription");if(!t||(e=So(t,"Latency"),t=So(t,"PlaybackRate"),!e&&!t))return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function _4(e){if(e=on(e,"SupplementalProperty"),!e.length)return null;e=b(e);for(var t=e.next();!t.done;t=e.next())if(t=t.value,t.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return t.attributes.value;return null}function $x(e,t,n,r){var s=t.Kb;s||(s=Bt(r,"mediaPresentationDuration",Ho),e.l.Kb=s);var l=0;e.i&&e.i.presentationTimeline&&e.Z&&(l=e.i.presentationTimeline.Vb());var c=[],d=l;r=on(r,"Period");for(var p=0;p<r.length;p++){var w=r[p],T=r[p+1],E=Bt(w,"start",Ho,d),I=w.attributes.id,A=Bt(w,"duration",Ho),R=null;if(T){var D=Bt(T,"start",Ho);D!=null&&(R=D-E)}else s!=null&&(R=s-E+l);if(D=ib,R&&A&&Math.abs(R-A)>D&&R>A&&e.K++,R==null&&(R=A),!(e.L!==null&&I!==null&&E!==null&&E<e.L)||e.fa.includes(I)||p+1==r.length){if(E!==null&&(e.L===null||E>e.L)&&(e.L=E),d=R4(e,t,n,{start:E,duration:R,node:w,ld:R==null||!T}),c.push(d),t.ta.id&&R&&(e.ba[t.ta.id]=R),R==null){d=null;break}d=E+R}}return e.fa=c.map(function(L){return L.id}),s!=null?{periods:c,duration:s+l,rg:!1}:{periods:c,duration:d,rg:!0}}function R4(e,t,n,r){t.ta=h0(e,r.node,null,n),t.ka=r,t.ta.Ia=t.Ia,t.ta.id||(t.ta.id="__shaka_period_"+r.start);var s=on(r.node,"EventStream");n=t.presentationTimeline.mb(),s=b(s);for(var l=s.next();!l.done;l=s.next())j4(e,r.start,r.duration,l.value,n);if(n=on(r.node,"AdaptationSet").map(function(T,E){return L4(e,t,E,T)}).filter(Jr),t.vb){for(r=[],s=b(n),l=s.next();!l.done;l=s.next()){l=b(l.value.Mi);for(var c=l.next();!c.done;c=l.next())r.push(c.value)}if(r.length!=new Set(r).size)throw new re(2,4,4018)}for(r=n.filter(function(T){return!T.Yf}),n=n.filter(function(T){return T.Yf}),n=b(n),s=n.next();!s.done;s=n.next()){s=s.value,l=s.Yf.split(" "),c=b(r);for(var d=c.next();!d.done;d=c.next())if(d=d.value,l.includes(d.id)){d=b(d.streams);for(var p=d.next(),w={};!p.done;w={Sf:void 0},p=d.next())w.Sf=p.value,w.Sf.trickModeVideo=s.streams.find(function(T){return function(E){return bi(T.Sf.codecs)==bi(E.codecs)}}(w))}}if(n=kc(e.g.disableAudio,r,"audio"),s=kc(e.g.disableVideo,r,"video"),l=kc(e.g.disableText,r,Ut),r=kc(e.g.disableThumbnails,r,"image"),s.length===0&&n.length===0)throw new re(2,4,4004);return{id:t.ta.id,audioStreams:n,videoStreams:s,textStreams:l,imageStreams:r}}function kc(e,t,n){return e||!t.length?[]:t.reduce(function(r,s){return s.contentType!=n||r.push.apply(r,_(s.streams)),r},[])}function L4(e,t,n,r){function s(le){switch(le){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function l(le){switch(le){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ja=h0(e,r,t.ta,null),t.ja.position=n;var c=!1;n=on(r,"Role");var d=n.map(function(le){return le.attributes.value}).filter(Jr),p=void 0,w=t.ja.contentType==Ut;w&&(p="subtitle"),n=b(n);for(var T=n.next();!T.done;T=n.next()){T=T.value;var E=T.attributes.schemeIdUri;if(E==null||E=="urn:mpeg:dash:role:2011")switch(T=T.attributes.value,T){case"main":c=!0;break;case"caption":case"subtitle":p=T}}var I,A;E=on(r,"EssentialProperty"),n=null;var R=!1;T=!1,E=b(E);for(var D=E.next();!D.done;D=E.next()){D=D.value;var L=D.attributes.schemeIdUri;L=="http://dashif.org/guidelines/trickmode"?n=D.attributes.value:L=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?I=l(parseInt(D.attributes.value,10)):L=="urn:mpeg:mpegB:cicp:ColourPrimaries"?A=s(parseInt(D.attributes.value,10)):L!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(L=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?R=!0:T=!0)}var F=null;for(E=on(r,"SupplementalProperty"),E=b(E),D=E.next();!D.done;D=E.next())D=D.value,L=D.attributes.schemeIdUri,L=="http://dashif.org/guidelines/last-segment-number"?F=parseInt(D.attributes.value,10)-1:L=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?I=l(parseInt(D.attributes.value,10)):L=="urn:mpeg:mpegB:cicp:ColourPrimaries"&&(A=s(parseInt(D.attributes.value,10)));E=on(r,"Accessibility");var U=new Map,q;for(E=b(E),D=E.next();!D.done;D=E.next())if(L=D.value,D=L.attributes.schemeIdUri,L=L.attributes.value,D!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(D!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)D=="urn:mpeg:dash:role:2011"?L!=null&&(d.push(L),L=="captions"&&(p="caption")):D=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(L=="1"?q="visually impaired":L=="2"&&(q="hard of hearing"));else if(D=1,L!=null){L=b(L.split(";"));for(var N=L.next();!N.done;N=L.next()){var H=N.value,Y=N=void 0;H.includes("=")?(H=H.split("="),N="svc"+H[0],Y=H[1].split(",")[0].split(":").pop()):(N="svc"+D,D++,Y=H),U.set(N,Kt(Y))}}else U.set("svc1","und");else if(D=1,L!=null)for(L=L.split(";"),N=b(L),H=N.next();!H.done;H=N.next()){Y=H.value;var oe=H=void 0;Y.includes("=")?(Y=Y.split("="),H=Y[0].startsWith("CC")?Y[0]:"CC"+Y[0],oe=Y[1]||"und"):(H="CC"+D,L.length==2?D+=2:D++,oe=Y),U.set(H,Kt(oe))}else U.set("CC1","und");if(T)return null;T=on(r,"ContentProtection");var ae=dx(T,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),me=Kt(t.ja.language||"und"),ue=t.ja.label;if(T=on(r,"Representation"),r=T.map(function(le){return(le=D4(e,t,ae,p,me,ue,c,d,U,le,q,F))&&(le.hdr=le.hdr||I,le.colorGamut=le.colorGamut||A,le.fastSwitching=R),le}).filter(function(le){return!!le}),r.length==0){if(n=t.ja.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||w||n)return null;throw new re(2,4,4003)}if(!t.ja.contentType||t.ja.contentType=="application")for(t.ja.contentType=Gx(r[0].mimeType,r[0].codecs),w=b(r),E=w.next();!E.done;E=w.next())E.value.type=t.ja.contentType;for(w=t.ja.id||"__fake__"+e.ea++,E=b(r),D=E.next();!D.done;D=E.next()){for(D=D.value,L=b(ae.drmInfos),N=L.next();!N.done;N=L.next())N=N.value,N.keyIds=N.keyIds&&D.keyIds?new Set([].concat(_(N.keyIds),_(D.keyIds))):N.keyIds||D.keyIds;e.g.dash.enableAudioGroups&&(D.groupId=w)}return T=T.map(function(le){return le.attributes.id}).filter(Jr),{id:w,contentType:t.ja.contentType,language:me,ek:c,streams:r,drmInfos:ae.drmInfos,Yf:n,Mi:T}}function D4(e,t,n,r,s,l,c,d,p,w,T,E){t.J=h0(e,w,t.ja,null);var I=t.J.id;if(e.R=Math.min(e.R,t.J.Ia),e.U=0<e.R,!U4(t.J))return null;var A=t.ka.start;t.bandwidth=Bt(w,"bandwidth",nr)||0,t.roles=d;var R=t.J.contentType,D=R==Ut||R=="application";R=R=="image";try{var L=void 0;if(n.Fe){var F=t.J.Ga,U=ri(F(),[n.Fe.ti]),q=Qn(U,e.g.retryParameters);L={bitsKey:128,blockCipherMode:"CBC",iv:n.Fe.iv,firstMediaSequenceNumber:0,fetchKey:function(){var he,be,Ce;return z(function(ke){if(ke.g==1)return k(ke,d0(e,q,6),2);if(ke.g!=3){if(he=ke.h,!he.data||he.data.byteLength!=16)throw new re(2,4,4049);return be={name:"AES-CBC"},Ce=L,k(ke,h.crypto.subtle.importKey("raw",he.data,be,!0,["decrypt"]),3)}Ce.cryptoKey=ke.h,L.fetchKey=void 0,V(ke)})}}}if(t.J.aesKey=L,F=function(he,be,Ce,ke){return Hx(e,he,be,Ce,ke)},t.J.Rc)var N=i4(t,F,L);else if(t.J.Pb)N=r4(t,e.s,L);else if(t.J.$b)N=Tx(t,F,e.s,!!e.i,e.g.dash.initialSegmentLimit,e.ba,L,E,!1);else{var H=t.ka.duration||0,Y=t.J.Ga,oe=t.J.mimeType,ae=t.J.codecs;N={fc:function(){var he=rp(A,H,Y());return he.Hb(function(be){be.mimeType=oe,be.codecs=ae}),Promise.resolve(he)}}}}catch(he){if((D||R)&&he.code==4002)return null;throw he}E=on(w,"ContentProtection"),E=$A(E,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),E=new Set(E?[E]:[]),F=!1,on(w,"SupplementalProperty").some(function(he){return he.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&he.attributes.value=="JOC"})&&(F=!0),U=!1,D&&(U=d.includes("forced_subtitle")||d.includes("forced-subtitle"));var me;if(R&&((w=on(w,"EssentialProperty").find(function(he){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(he.attributes.schemeIdUri)}))&&(me=w.attributes.value),!me))return null;var ue;w=t.J.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(w.includes("hvc1.2.4.L153.B0")||w.includes("hev1.2.4.L153.B0"))&&(ue="PQ"),D=t.J.id?t.ta.id+","+t.J.id:"",e.B.length&&I&&e.o.set(t.ta.id+","+I,P4(t));var le=D&&e.s[D]?e.s[D]:{id:e.ea++,originalId:t.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){le.segmentIndex&&(le.segmentIndex.release(),le.segmentIndex=null)},segmentIndex:null,mimeType:t.J.mimeType,codecs:w,frameRate:t.J.frameRate,pixelAspectRatio:t.J.pixelAspectRatio,bandwidth:t.bandwidth,width:t.J.width,height:t.J.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:E,language:s,originalLanguage:t.ja.language,label:l,type:t.ja.contentType,primary:c,trickModeVideo:null,emsgSchemeIdUris:t.J.emsgSchemeIdUris,roles:d,forced:U,channelsCount:t.J.Jc,audioSamplingRate:t.J.audioSamplingRate,spatialAudio:F,closedCaptions:p,hdr:ue,colorGamut:void 0,videoLayout:void 0,tilesLayout:me,accessibilityPurpose:T,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Vn(t.J.mimeType,t.J.codecs)])};return le.createSegmentIndex=function(){var he;return z(function(be){if(be.g==1)return le.segmentIndex?be.u(0):(he=le,k(be,N.fc(),3));he.segmentIndex=be.h,V(be)})},D&&t.vb&&!e.s[D]&&(e.s[D]=le),le}function P4(e){for(var t={},n=b(Object.keys(e)),r=n.next();!r.done;r=n.next())if(r=r.value,["period","adaptationSet","representation"].includes(r)){var s=e[r];t[r]={Rc:null,Pb:null,$b:s.$b,Ga:s.Ga,width:s.width,height:s.height,contentType:s.contentType,mimeType:s.mimeType,language:s.language,codecs:s.codecs,frameRate:s.frameRate,pixelAspectRatio:s.pixelAspectRatio,emsgSchemeIdUris:s.emsgSchemeIdUris,id:s.id,position:s.position,Jc:s.Jc,audioSamplingRate:s.audioSamplingRate,Ia:s.Ia,Gc:s.Gc}}else r=="periodInfo"?(s=e[r],t[r]={start:s.start,duration:s.duration,node:null,ld:s.ld}):t[r]=e[r];return t}function zx(e){var t,n;return z(function(r){switch(r.g){case 1:return t=0,Q(r,2),k(r,f0(e),4);case 4:t=r.h,J(r,3);break;case 2:if(n=te(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),c0(e,t),V(r)}})}function c0(e,t){if(!(0>e.H)){var n=e.H;0<=e.g.dash.updatePeriod&&(n=e.g.dash.updatePeriod),e.I.Y(Math.max(n-t,ot(e.da)))}}function h0(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Jc:null,audioSamplingRate:null,Ia:0,Kf:0},r=r||n.Ga;var s=t.attributes.id,l=on(t,"BaseURL"),c,d=!1;if(e.h)for(var p=b(l),w=p.next();!w.done;w=p.next()){var T=w.value;w=T.attributes.serviceLocation,T=xo(T),w&&T&&(va(e.h,s,w,T),d=!0)}d&&e.h||(c=l.map(xo)),p=t.attributes.contentType||n.contentType,w=t.attributes.mimeType||n.mimeType,T=[t.attributes.codecs||n.codecs];var E=tr(t,"urn:scte:dash:scte214-extensions","supplementalCodecs");E&&T.push(E),T=cp(T).join(","),E=Bt(t,"frameRate",jb)||n.frameRate;var I=t.attributes.sar||n.pixelAspectRatio,A=O4(on(t,"InbandEventStream"),n.emsgSchemeIdUris),R=on(t,"AudioChannelConfiguration");R=N4(R)||n.Jc;var D=Bt(t,"audioSamplingRate",yi)||n.audioSamplingRate;p||(p=Gx(w,T));var L=So(t,"SegmentBase"),F=So(t,"SegmentTemplate"),U=L&&Bt(L,"availabilityTimeOffset",Sf)||0,q=F&&Bt(F,"availabilityTimeOffset",Sf)||0,N=l&&l.length&&Bt(l[0],"availabilityTimeOffset",Sf)||0;U=n.Ia+N+U+q,q=null,(N=So(t,"SegmentSequenceProperties"))&&(N=So(N,"SAP"))&&(q=Bt(N,"cadence",wf)),N=t.attributes.label;var H=on(t,"Label");return H&&H.length&&(H=H[0],Gn(H)&&(N=Gn(H))),{Ga:function(){return ri(r(),l.length?e.h&&d?Yu(e.h,s):c||[]:[])},Rc:L||n.Rc,Pb:So(t,"SegmentList")||n.Pb,$b:F||n.$b,width:Bt(t,"width",yi)||n.width,height:Bt(t,"height",yi)||n.height,contentType:p,mimeType:w,codecs:T,frameRate:E,pixelAspectRatio:I,emsgSchemeIdUris:A,id:s,language:t.attributes.lang,Jc:R,audioSamplingRate:D,Ia:U,Gc:null,Kf:q||n.Kf,label:N||null}}function O4(e,t){t=t.slice(),e=b(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function N4(e){e=b(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.attributes.schemeIdUri)&&(n=n.attributes.value))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function U4(e){var t=e.Rc?1:0;return t+=e.Pb?1:0,t+=e.$b?1:0,t==0?e.contentType==Ut||e.contentType=="application":(t!=1&&(e.Rc&&(e.Pb=null),e.$b=null),!0)}function Vx(e,t,n,r){var s,l,c,d,p,w,T;return z(function(E){if(E.g==1)return s=[Ti(n)],l=ri(t(),s),c=Qn(l,e.g.retryParameters),c.method=r,d=e.j.networkingEngine.request(4,c),ns(e.N,d),k(E,d.promise,2);if(p=E.h,r=="HEAD"){if(!p.headers||!p.headers.date)return E.return(0);w=p.headers.date}else w=fn(p.data);return T=Date.parse(w),isNaN(T)?E.return(0):E.return(T-Date.now())})}function B4(e,t,n){var r,s,l,c,d,p,w,T;return z(function(E){switch(E.g){case 1:r=n.map(function(I){return{scheme:I.attributes.schemeIdUri,value:I.attributes.value}}),s=e.g.dash.clockSyncUri,!r.length&&s&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:s}),l=b(r),c=l.next();case 2:if(c.done){E.u(4);break}switch(d=c.value,Q(E,5),p=d.scheme,w=d.value,p){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return E.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return E.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return T=Date.parse(w),E.return(isNaN(T)?0:T-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":je("NTP UTCTiming scheme is not supported");break;default:je("Unrecognized scheme in UTCTiming element",p)}E.u(9);break;case 7:return k(E,Vx(e,t,w,"HEAD"),10);case 10:return E.return(E.h);case 8:return k(E,Vx(e,t,w,"GET"),11);case 11:return E.return(E.h);case 9:J(E,3);break;case 5:te(E);case 3:c=l.next(),E.u(2);break;case 4:return je("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),E.return(0)}})}function j4(e,t,n,r,s){var l=r.attributes.schemeIdUri||"",c=r.attributes.value||"",d=Bt(r,"timescale",yi)||1;r=b(on(r,"Event"));for(var p=r.next();!p.done;p=r.next()){p=p.value;var w=Bt(p,"presentationTime",yi)||0,T=Bt(p,"duration",yi)||0;w=w/d+t,T=w+T/d,n!=null&&(w=Math.min(w,t+n),T=Math.min(T,t+n)),T<s||(p={schemeIdUri:l,value:c,startTime:w,endTime:T,id:p.attributes.id||"",eventElement:by(p),eventNode:p},e.j.onTimelineRegionAdded(p))}}function Hx(e,t,n,r,s){var l,c,d,p;return z(function(w){return w.g==1?(l=Ro,c=s?0:1,d=Zs(t,n,r,e.g.retryParameters),k(w,d0(e,d,l,{type:c}),2)):(p=w.h,w.return(p.data))})}function Gx(e,t){return t=Vn(e,t),pu(t)?Ut:e.split("/")[0]}function d0(e,t,n,r){return t=e.j.networkingEngine.request(n,t,r),ns(e.N,t),t.promise}function F4(e){var t=e.l.td;if(!e.l.ae||!t||!e.B.length)return[];var n=Date.now()/1e3,r=e.B.filter(function(s){return s=yi(s.attributes.ttl),!s||t+s>n}).map(xo).filter(Jr);return r.length?ri(e.A,r):[]}we("shaka.dash.DashParser",Ec),Co["application/dash+xml"]=function(){return new Ec},Co["video/vnd.mpeg.dash.mpd"]=function(){return new Ec};function Ac(){}we("shaka.dependencies",Ac),Ac.has=function(e){return p0.has(e)},Ac.add=function(e,t){if(!Xx[e])throw Error(e+" is not supported");e==Wx?Ot("mux.js","mux.js is no longer used in Shaka Player."):p0.set(e,function(){return t})};var Wx="muxjs",Xx={fk:Wx,ISOBoxer:"ISOBoxer"};Ac.Allowed=Xx;var p0=new Map([["ISOBoxer",function(){return h.ISOBoxer}]]);function qx(e,t,n){this.type=e,this.g=t,this.segments=n||null}function Kx(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=r===void 0?null:r}Kx.prototype.toString=function(e){function t(s){return s.name+"="+(isNaN(Number(s.value))?'"'+s.value+'"':s.value)}var n="#"+this.name,r=this.attributes?this.attributes.filter(function(s){return e?!e.has(s.name):!0}).map(t):[];return this.value&&r.unshift(this.value),0<r.length&&(n+=":"+r.join(",")),n};function Yx(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function nl(e,t){return e=e.attributes.filter(function(n){return n.name==t}),e.length?e[0]:null}function Ye(e,t,n){return(e=nl(e,t))?e.value:n||null}function Yt(e,t){if(e=nl(e,t),!e)throw new re(2,4,4023,t);return e.value}function Qx(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.zb=n}function Zx(e,t){this.name=e,this.value=t}function lo(e,t){return e.filter(function(n){return n.name==t})}function Jx(e,t){return e.filter(function(n){return Yt(n,"TYPE")==t})}function ci(e,t){e=b(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function wa(e,t,n){return n=n===void 0?0:n,(e=ci(e,t))?Number(e.value):n}function Or(e,t,n){return t?e2(e,[t],n):[]}function e2(e,t,n){if(!t.length)return[];t=ri(e,t),e=[],t=b(t);for(var r=t.next();!r.done;r=t.next())e.push(t2(r.value,n));return e}function t2(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=b(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var s=r.slice(2,r.length-1),l=t.get(s);if(l)e=e.replace(r,l);else throw new re(2,4,4039,s)}}return e}function $4(){this.g=0}function m0(e,t){t=fn(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new re(2,4,4015);t=0;for(var r=!0,s=b(n),l=s.next();!l.done;l=s.next())if(l=l.value,/^#(?!EXT)/m.test(l)||r)r=!1;else if(l=g0(e,l),--e.g,n2.includes(l.name)){t=1;break}else l.name=="EXT-X-STREAM-INF"&&(r=!0);for(s=[],r=!0,l=0;l<n.length;l++){var c=n[l],d=n[l+1];if(/^#(?!EXT)/m.test(c)||r)r=!1;else{if(c=g0(e,c),z4.includes(c.name)){if(t!=1)throw new re(2,4,4017);c=n.splice(l,n.length-l),n=[],r=[],l=[],d=null,c=b(c);for(var p=c.next();!p.done;p=c.next())p=p.value,/^(#EXT)/.test(p)?(p=g0(e,p),n2.includes(p.name)?s.push(p):p.name=="EXT-X-MAP"?d=p:p.name=="EXT-X-PART"?l.push(p):p.name=="EXT-X-PRELOAD-HINT"?Ye(p,"TYPE")=="PART"?l.push(p):Ye(p,"TYPE")=="MAP"&&(p.name="EXT-X-MAP",d=p):r.push(p)):/^#(?!EXT)/m.test(p)||(p=p.trim(),d&&r.push(d),n.push(new Qx(p,r,l)),r=[],l=[]);return l.length&&(d&&r.push(d),n.push(new Qx("",r,l))),new qx(t,s,n)}s.push(c),c.name=="EXT-X-STREAM-INF"&&(c.attributes.push(new Zx("URI",d)),r=!0)}}return new qx(t,s)}function g0(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new re(2,4,4016,t);t=n[1];var r=n[2];n=[];var s;if(r){r=new Lr(r);var l;(l=ar(r,/^([^,=]+)(?:,|$)/g))&&(s=l[1]);for(var c=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;l=ar(r,c);)n.push(new Zx(l[1],l[2]||l[3])),fa(r)}return new Kx(e,t,n,s)}var n2="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),z4="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP".split(" ");function i2(){}function o2(e){try{var t=y0(e);return Fs({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return ts(n)}}function y0(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new re(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new re(2,1,1004,e);var n=t[0];e=h.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var r=!1;1<t.length&&t[t.length-1]=="base64"&&(r=!0,t.pop());var s;return r?s=oo(e):s=Mo(e),{data:s,contentType:n}}we("shaka.net.DataUriPlugin",i2),i2.parse=o2,Zo("data",o2);function Ic(){var e=this;this.g=this.h=null,this.B=1,this.s=new Map,this.G=new Map,this.N=new Map,this.N.set("video",new Map),this.N.set("audio",new Map),this.N.set(Ut,new Map),this.N.set("image",new Map),this.ub=new Set,this.i=new Map,this.l=null,this.L="",this.Fa=new $4,this.H=-1,this.fa=1/0,this.ea=this.Gb=!1,this.A=new Mt(function(){if(e.ba&&!e.g.continueLoadingWhenPaused&&(e.Z.jb(e.ba,"timeupdate"),e.ba.paused)){e.Z.ha(e.ba,"timeupdate",function(){return E2(e)});return}E2(e)}),this.xa=Dc,this.m=null,this.ab=0,this.o=1/0,this.Da=this.za=this.U=0,this.da=new $s,this.C=new Map,this.F=new Map,this.qa=new Map,this.oa=new Map,this.K=new Map,this.pa=new Map,this.ya=new Map,this.Fb=this.I=!1,this.Db=new Ze(5),this.j=null,this.R=!0,this.Ea=new Set,this.Z=new Ct,this.ba=null}S=Ic.prototype,S.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},S.start=function(e,t){var n=this,r;return z(function(s){return s.g==1?(n.h=t,n.I=t.isLowLatencyMode(),k(s,E0(n,[e]),2)):s.g!=3?(r=s.h,n.L=r.uri,k(s,G4(n,r.data,e),3)):s.return(n.m)})},S.stop=function(){this.A&&(this.A.stop(),this.A=null);var e=[];return this.da&&(e.push(this.da.destroy()),this.da=null),this.g=this.h=null,this.ub.clear(),this.m=null,this.i.clear(),this.G.clear(),this.F.clear(),this.s.clear(),this.qa.clear(),this.oa.clear(),this.K.clear(),this.pa.clear(),this.ya.clear(),this.Ea.clear(),this.j&&this.j.destroy(),this.Z&&(this.Z.release(),this.Z=null),Promise.all(e)},S.update=function(){var e=this,t,n,r,s,l,c,d,p,w,T,E,I;return z(function(A){if(A.g==1){if(!Bi(e))return A.return();for(t=[],n=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,r=n.filter(function(R){return R.stream.segmentIndex}),s=b(r),l=s.next();!l.done;l=s.next())c=l.value,t.push(V4(e,c));return k(A,Promise.all(t),2)}for(d2(e,r.map(function(R){return R.stream})),d=r.some(function(R){return R.ed==0}),r.length&&!d&&(p=f3,Rc(e,p.sh),w=r.map(function(R){return R.Jb}),e.l.Za(Math.min.apply(Math,_(w))),e.h.updateDuration()),d&&x0(e),T=b(r),E=T.next();!E.done;E=T.next())I=E.value,I.stream.segmentIndex&&!I.stream.segmentIndex.O[0]&&e.h.disableStream(I.stream);V(A)})};function v0(e,t){return Bi(e)?e.N.get(t.type):t.Yd}function V4(e,t){var n,r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me,ue,le,he,be,Ce,ke,Oe,Ie,Fe,vt;return z(function(Dt){switch(Dt.g){case 1:for(n=[],r=b(t.M()),s=r.next();!s.done;s=r.next())l=s.value,c=new Ln(l),d=c.g,t.Fd&&(0<=t.ob&&d.add("_HLS_msn",String(t.ob)),0<=t.pb&&d.add("_HLS_part",String(t.pb))),t.Gd&&d.add("_HLS_skip","YES"),Eg(d)&&su(c,d),n.push(c.toString());return Q(Dt,2),k(Dt,E0(e,n,!0),4);case 4:p=Dt.h,J(Dt,3);break;case 2:throw w=te(Dt),e.h&&e.h.disableStream(t.stream),w;case 3:if(!t.stream.segmentIndex)return Dt.return();if(T=m0(e.Fa,p.data),T.type!=1)throw new re(2,4,4017);return E=p.uri,E==p.originalUri||t.M().includes(E)||t.Tg.push(E),I=lo(T.g,"EXT-X-DEFINE"),A=w0(e,I,E),R=t.stream,D=v0(e,t),k(Dt,y2(e,T,R.mimeType,t.M,A),5);case 5:for(L=Dt.h,F=L.keyIds,U=L.drmInfos,q=function(Sn,$t){return Sn.size===$t.size&&[].concat(_(Sn)).every(function(kn){return $t.has(kn)})},q(R.keyIds,F)||(R.keyIds=F,R.drmInfos=U,e.h.newDrmInfo(R)),N=C2(e,T,D,A,t.M,t.type),H=N.segments,(Y=N.bandwidth)&&(R.bandwidth=Y),oe=Of(R),ae=b(H),me=ae.next();!me.done;me=ae.next())ue=me.value,ue.$&&(ue.$.Hc=oe);R.segmentIndex.rd(H,e.l.mb()),H.length&&(le=wa(T.g,"EXT-X-MEDIA-SEQUENCE",0),be=(he=ci(T.g,"EXT-X-SKIP"))?Number(Ye(he,"SKIPPED-SEGMENTS")):0,Ce=m2(le,H),ke=Ce.ob,Oe=Ce.pb,t.ob=ke+be,t.pb=Oe,Ie=D.get(le),R.segmentIndex.Ma(Ie)),(Fe=R.segmentIndex.O[0]||null)&&(t.mc=Fe.startTime,vt=H[H.length-1],t.Jb=vt.endTime),ci(T.g,"EXT-X-ENDLIST")&&(t.ed=!0),C0(e,T),T0(e,T.g,R.type,A,t.M),V(Dt)}})}S.onExpirationUpdated=function(){},S.onInitialVariantChosen=function(){},S.banLocation=function(e){this.j&&this.j.banLocation(e)},S.setMediaElement=function(e){this.ba=e};function r2(e,t){for(var n=e.H==-1,r=b(t),s=r.next();!s.done;s=r.next()){s=s.value;var l=s.stream.segmentIndex,c=v0(e,s);if(l=l.O[0]||null){c=b(c);for(var d=c.next();!d.done;d=c.next()){d=b(d.value);var p=d.next().value;if(d.next().value==l.startTime){n&&(e.H=Math.max(e.H,p)),s.Re=p;break}}}}if(!(0>e.H))for(t=b(t),n=t.next();!n.done;n=t.next())n=n.value,il(e,n.type)&&(r=n.stream.segmentIndex)&&(s=e.H-n.Re,0<s&&(r.O.splice(0,s),r=r.O[0]||null)&&(r=-r.startTime,n.stream.segmentIndex.offset(r),s2(e,n,r)))}function H4(e,t){if(e.fa==1/0){t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value.stream.segmentIndex.O[0]||null,n!=null&&n.h!=null&&(e.fa=Math.min(e.fa,n.h))}if(t=e.fa,t!=1/0){n=b(e.i.values());for(var r=n.next();!r.done;r=n.next())if(r=r.value,!il(e,r.type)){var s=r.stream.segmentIndex;if(s!=null){var l=s.O[0]||null;if(l)if(l.h==null)It("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.M(),"Expect AV sync issues!");else for(s2(e,r,l.h-t-l.startTime),r=b(s),s=r.next();!s.done;s=r.next())s.value.Vf(t)}}}}function s2(e,t,n){t.mc+=n,t.Jb+=n,e=v0(e,t);for(var r=b(e),s=r.next();!s.done;s=r.next()){var l=b(s.value);s=l.next().value,l=l.next().value,e.set(s,l+n)}t.M()}function G4(e,t,n){var r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me,ue,le,he,be,Ce,ke,Oe,Ie,Fe;return z(function(vt){switch(vt.g){case 1:return r=zn,s=m0(e.Fa,t),l=lo(s.g,"EXT-X-DEFINE"),c=[],d=[],p=[],e.l=new st(null,0),e.l.sc(!0),w=function(){return[n]},T=null,E=new Map,s.type==1?(e.R=!1,q=lo(s.g,"EXT-X-DEFINE"),E=w0(e,q,e.L),T=r.ga,N="",H=new Map,k(vt,p2(e,e.B++,E,s,w,"",T,N,!0,"Media Playlist",null,H,null,!1,null,!1),7)):(X4(e,l),I=lo(s.g,"EXT-X-MEDIA"),A=lo(s.g,"EXT-X-STREAM-INF"),R=lo(s.g,"EXT-X-IMAGE-STREAM-INF"),D=lo(s.g,"EXT-X-I-FRAME-STREAM-INF"),L=lo(s.g,"EXT-X-SESSION-KEY"),F=lo(s.g,"EXT-X-SESSION-DATA"),U=lo(s.g,"EXT-X-CONTENT-STEERING"),K4(e,F),k(vt,Y4(e,U),4));case 4:return q4(e,A),i3(e,I),k(vt,e3(e,A,L,I,w,e.s),5);case 5:return c=vt.h,d=Q4(e,I),k(vt,Z4(e,R,D),6);case 6:p=vt.h,vt.u(3);break;case 7:Y=vt.h,e.i.set(n,Y),Y.stream&&(oe=Of(Y.stream),Y.stream.segmentIndex.Hb(function(Dt){Dt.$&&(Dt.$.Hc=oe)})),T=Y.stream.type,c.push({id:0,language:Kt(N||"und"),disabledUntilTime:0,primary:!0,audio:T=="audio"?Y.stream:null,video:T=="video"?Y.stream:null,bandwidth:Y.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new re(2,7,7001);if(s.type==1&&(Bi(e)&&(x2(e,s),ae=e.o,e.A.Y(ae)),me=Array.from(e.i.values()),S0(e,me),x0(e),T0(e,s.g,T,E,w)),e.m={presentationTimeline:e.l,variants:c,textStreams:d,imageStreams:p,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.ea||!e.g.hls.disableCodecGuessing){vt.u(8);break}for(ue=[],le=b(e.m.variants),he=le.next();!he.done;he=le.next())be=he.value,be.audio&&be.audio.codecs===""&&ue.push(be.audio.createSegmentIndex()),be.video&&be.video.codecs===""&&ue.push(be.video.createSegmentIndex());return k(vt,Promise.all(ue),8);case 8:if(e.h.makeTextStreamsForClosedCaptions(e.m),c.length==1){for(Ce=[],ke=c[0],Oe=b([ke.video,ke.audio]),Ie=Oe.next();!Ie.done;Ie=Oe.next())(Fe=Ie.value)&&!Fe.segmentIndex&&Ce.push(Fe.createSegmentIndex());if(0<Ce.length)return k(vt,Promise.all(Ce),0)}vt.u(0)}})}function W4(e,t){var n,r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae;return z(function(me){switch(me.g){case 1:if(n=Nf(e.g.hls.mediaPlaylistFullMimeType),!t.length)return me.return(n);if(r=T2(e,t),s=r.segment,l=r.segmentIndex,c=s.M(),d=c[0],p=new Ln(d),w=p.Pa.split(".").pop(),T=k0[w])return me.return(Nf(T));if(E=Ro,A=I=null,R=s.$,!R){me.u(2);break}return D=Zs(R.M(),R.Xb(),R.Ub(),e.g.retryParameters),k(me,dr(e,D,E,{type:0}),3);case 3:if(L=me.h,I=L.data,!R.aesKey){me.u(4);break}return k(me,hp(I,R.aesKey,0),5);case 5:I=me.h;case 4:(A=L.headers["content-type"])&&(A=A.split(";")[0].toLowerCase());case 2:return F=Zs(s.M(),s.Xb(),s.Ub(),e.g.retryParameters),k(me,dr(e,F,E,{type:1}),6);case 6:if(U=me.h,q=U.data,!s.aesKey){me.u(7);break}return k(me,hp(q,s.aesKey,l),8);case 8:q=me.h;case 7:if((N=U.headers["content-type"])&&(N=N.split(";")[0].toLowerCase()),H="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),Y=["audio/mp4","video/mp4","video/iso.segment"],ku(Ae(q))){var ue=q,le=Ae(ue);le=new rn().parse(le);var he=le.$c();le=le.kf();var be=[],Ce=!1,ke=!1;switch(he.audio){case"aac":case"aac-loas":be.push("mp4a.40.2"),Ce=!0;break;case"mp3":be.push("mp4a.40.34"),Ce=!0;break;case"ac3":be.push("ac-3"),Ce=!0;break;case"ec3":be.push("ec-3"),Ce=!0;break;case"opus":be.push("opus"),Ce=!0}switch(he.video){case"avc":le.codec?be.push(le.codec):be.push("avc1.42E01E"),ke=!0;break;case"hvc":le.codec?be.push(le.codec):be.push("hvc1.1.6.L93.90"),ke=!0;break;case"av1":be.push("av01.0.01M.08"),ke=!0}if(be.length){if(he=Ce&&!ke,Ce=new Map,ke){ke=new _e("video/mp2t"),ke.i(ue),ue=b(ke.j());for(var Oe=ue.next();!Oe.done;Oe=ue.next())Oe=Oe.value,Ce.set(Oe,Oe);ke.g()}le={type:he?"audio":"video",mimeType:"video/mp2t",codecs:be.join(", "),language:null,height:le.height,width:le.width,channelCount:null,sampleRate:null,closedCaptions:Ce,xd:null,colorGamut:null}}else le=null;if(oe=le)return me.return(oe)}else if((H.includes(w)||Y.includes(N)||A&&Y.includes(A))&&(ae=zE(I,q)))return me.return(ae);return N?me.return(Nf(N)):A?me.return(Nf(A)):me.return(n)}})}function x0(e){if(Bi(e)){if(e.xa==Pc){for(var t,n=t=1/0,r=b(e.i.values()),s=r.next();!s.done;s=r.next())s=s.value,s.stream.segmentIndex&&s.stream.type!="text"&&(t=Math.min(t,s.Jb),n=Math.min(n,s.mc));t-=n,e.g.hls.useSafariBehaviorForLive&&(t=e.l.A),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.pe(t)}}else e.l.Za(h2(e));if(!e.l.s)for(t=b(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=n.stream.segmentIndex.get(0))&&n.h&&e.l.bh(n.h);e.l.Wd()}function X4(e,t){var n=new Ln(e.L).g;t=b(t);for(var r=t.next();!r.done;r=t.next()){var s=r.value;r=Ye(s,"NAME");var l=Ye(s,"VALUE");s=Ye(s,"QUERYPARAM"),r&&l&&(e.s.has(r)||e.s.set(r,l)),s&&(r=n.get(s)[0])&&!e.s.has(r)&&e.s.set(s,r)}}function w0(e,t,n){n=new Ln(n).g;var r=new Map;t=b(t);for(var s=t.next();!s.done;s=t.next()){var l=s.value,c=Ye(l,"NAME"),d=Ye(l,"VALUE");s=Ye(l,"QUERYPARAM"),l=Ye(l,"IMPORT"),c&&d&&(r.has(c)||r.set(c,d)),s&&(c=n.get(s)[0])&&!r.has(c)&&r.set(s,c),l&&(s=e.s.get(l))&&r.set(l,s)}return r}function q4(e,t){t=b(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,s=Ye(r,"AUDIO");n=Ye(r,"VIDEO");var l=Ye(r,"SUBTITLES");if(r=a2(e,r),l){var c=_i(Ut,r);e.F.set(l,c),jt(r,c)}s&&(l=_i("audio",r),l||(l=e.g.hls.defaultAudioCodec),e.F.set(s,l)),n&&(s=_i("video",r),s||(s=e.g.hls.defaultVideoCodec),e.F.set(n,s))}}function K4(e,t){t=b(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,s=Ye(r,"DATA-ID");n=Ye(r,"URI");var l=Ye(r,"LANGUAGE");r=Ye(r,"VALUE"),s=new Map().set("id",s),n&&s.set("uri",Or([e.L],n,e.s)[0]),l&&s.set("language",l),r&&s.set("value",r),n=new $e("sessiondata",s),e.h&&e.h.onEvent(n)}}function Y4(e,t){var n,r,s,l,c,d;return z(function(p){if(!e.h||!e.g)return p.return();for(r=b(t),s=r.next();!s.done;s=r.next())if(l=s.value,c=Ye(l,"PATHWAY-ID"),d=Ye(l,"SERVER-URI"),c&&d){e.j=new ya(e.h),e.j.configure(e.g),e.j.i=[e.L],e.j.setManifestType("HLS"),e.j.h=c,n=Ku(e.j,d);break}return k(p,n,0)})}function Q4(e,t){var n=Jx(t,"SUBTITLES");t=n.map(function(c){if(e.g.disableText)return null;try{return c2(e,[c],new Map).stream}catch(d){if(e.g.hls.ignoreTextStreamFailures)return null;throw d}}),n=b(n);for(var r=n.next();!r.done;r=n.next()){var s=Yt(r.value,"GROUP-ID");if((r=e.F.get(s))&&(s=e.G.get(s))){s=b(s);for(var l=s.next();!l.done;l=s.next())l=l.value,l.stream.codecs=r,l.stream.mimeType=b0(Ut,r)||_c(Ut),Sa(l.stream)}}return t.filter(function(c){return c})}function Sa(e){var t=new Set([Vn(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Hb(function(n){n.mimeType&&t.add(Vn(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function Z4(e,t,n){var r,s;return z(function(l){return l.g==1?(r=t.map(function(c){var d,p;return z(function(w){if(w.g==1)return e.g.disableThumbnails?w.return(null):(Q(w,2),k(w,o3(e,c),4));if(w.g!=2)return d=w.h,w.return(d.stream);if(p=te(w),e.g.hls.ignoreImageStreamFailures)return w.return(null);throw p})}).concat(n.map(function(c){if(e.g.disableThumbnails)return null;try{var d=Yt(c,"URI"),p=Ye(c,"CODECS")||"";if(e.i.has(d))var w=e.i.get(d);else{var T=Ye(c,"LANGUAGE"),E=Ye(c,"NAME"),I=Ye(c,"CHARACTERISTICS"),A=Mc(e,e.B++,[d],p,"image",T,!1,E,null,null,I,!1,null,!1),R=Ye(c,"RESOLUTION"),D=b(R?R.split("x"):[null,null]),L=D.next().value,F=D.next().value;A.stream.width=Number(L)||void 0,A.stream.height=Number(F)||void 0;var U=Ye(c,"BANDWIDTH");U&&(A.stream.bandwidth=Number(U)),e.i.set(d,A),w=A}return c=w,c.stream.codecs!=="mjpg"?null:c.stream}catch(q){if(e.g.hls.ignoreImageStreamFailures)return null;throw q}})),k(l,Promise.all(r),2)):(s=l.h,l.return(s.filter(function(c){return c})))})}function J4(e,t,n){t=t.filter(function(d){var p=Ye(d,"URI")||"";return Ye(d,"TYPE")!="SUBTITLES"&&p!=""});var r={};t=b(t);for(var s=t.next();!s.done;s=t.next()){s=s.value;var l=Yx(s,!e.j);r[l]?r[l].push(s):r[l]=[s]}for(var c in r)c2(e,r[c],n)}function e3(e,t,n,r,s,l){var c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me,ue,le,he,be,Ce,ke,Oe,Ie,Fe,vt,Dt,Sn,$t,kn,Un;return z(function(Cn){switch(Cn.g){case 1:if(c=[],d=new Set,!(0<n.length)){Cn.u(2);break}p=b(n),w=p.next();case 3:if(w.done){Cn.u(2);break}if(T=w.value,E=Yt(T,"METHOD"),I=Ye(T,"KEYFORMAT")||"identity",A=null,E=="NONE"){Cn.u(4);break}if(Lc(E)){R=Or(s(),Yt(T,"URI"),l),D=R.sort().join(""),e.K.has(D)||(L=Qn(R,e.g.retryParameters),F=dr(e,L,6),e.K.set(D,F)),Cn.u(4);break}if(I!="identity"){A=(U=I2[I])?U(T,""):null,Cn.u(6);break}return k(Cn,k2(e,T,"",s,null,l),9);case 9:A=Cn.h;case 6:if(A){if(A.keyIds)for(q=b(A.keyIds),N=q.next();!N.done;N=q.next())H=N.value,d.add(H);c.push(A)}case 4:w=p.next(),Cn.u(3);break;case 2:for(Y={},oe=b(t),ae=oe.next();!ae.done;ae=oe.next())me=ae.value,ue=Yx(me,!e.j),Y[ue]?Y[ue].push(me):Y[ue]=[me];le=[];for(he in Y)be=Y[he],Ce=be[0],ke=Ye(Ce,"FRAME-RATE"),Oe=Number(Ye(Ce,"AVERAGE-BANDWIDTH"))||Number(Yt(Ce,"BANDWIDTH")),Ie=Ye(Ce,"RESOLUTION"),Fe=b(Ie?Ie.split("x"):[null,null]),vt=Fe.next().value,Dt=Fe.next().value,Sn=Ye(Ce,"VIDEO-RANGE"),($t=Ye(Ce,"REQ-VIDEO-LAYOUT"))&&$t.includes(",")&&(kn=$t.split(",").filter(function(qt){return qt=="CH-STEREO"||qt=="CH-MONO"}),$t=kn[0]),$t=$t||"CH-MONO",Un=t3(e,be,r),le.push.apply(le,_(n3(e,Un.audio,Un.video,Oe,vt,Dt,ke,Sn,$t,c,d)));return Cn.return(le.filter(function(qt){return qt!=null}))}})}function t3(e,t,n){for(var r={audio:[],video:[]},s=new Map,l=[],c=!1,d=!1,p=b(t),w=p.next();!w.done;w=p.next()){var T=w.value;w=Ye(T,"AUDIO");var E=Ye(T,"VIDEO"),I=w||E;I&&(l.includes(I)||l.push(I),(T=Ye(T,"PATHWAY-ID"))&&s.set(I,T),w?c=!0:E&&(d=!0))}l.length&&n.length&&(p=n.filter(function(D){return l.includes(Yt(D,"GROUP-ID"))}),J4(e,p,s)),p=(s=l.sort().join(","))&&e.G.has(s)?e.G.get(s):[],c?r.audio.push.apply(r.audio,_(p)):d&&r.video.push.apply(r.video,_(p)),w=!1;var A=t.map(function(D){return Yt(D,"URI")});if(d=r.audio.find(function(D){return D&&D.M().find(function(L){return A.includes(L)})}),c=a2(e,t[0]),E=_i("video",c),(I=_i("audio",c))&&!E?(d="audio",w=0<r.audio.length):!r.audio.length&&!r.video.length&&I&&E?(d="video",c=[[E,I].join()]):r.audio.length&&d?(d="audio",w=!0):d=r.video.length&&!r.audio.length?"audio":"video",!w){var R=T=I=E=w=null;!p.length&&(n=n.find(function(D){var L=Ye(D,"URI")||"",F=Ye(D,"TYPE");return D=Yt(D,"GROUP-ID"),F!="SUBTITLES"&&L==""&&l.includes(D)}))&&(w=Ye(n,"LANGUAGE"),E=Ye(n,"NAME"),I=u2(n),f2(n),T=Ye(n,"CHARACTERISTICS"),R=l2(n)),e=r3(e,t,c,d,w,E,I,T,R),s&&(e.stream.groupId=s),r[e.stream.type]=[e]}return r}function a2(e,t){var n=Ye(t,"CODECS")||"";return t=Ye(t,"SUPPLEMENTAL-CODECS"),e.ea=0<n.length,e.ea||e.g.hls.disableCodecGuessing||(n=[],e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=n.join(",")),e=n.split(/\s*,\s*/),t&&(t=t.split(/\s*,\s*/).map(function(r){return r.split("/")[0]}),e.push.apply(e,_(t))),cp(e)}function u2(e){return(e=Ye(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function l2(e){return(e=Ye(e,"SAMPLE-RATE"))?parseInt(e,10):null}function f2(e){return(e=Ye(e,"CHANNELS"))?e.includes("/JOC"):!1}function n3(e,t,n,r,s,l,c,d,p,w,T){for(var E=b(n),I=E.next();!I.done;I=E.next())b2(I.value.stream,s,l,c,d,p,null);for(s=e.g.disableAudio,(!t.length||s)&&(t=[null]),s=e.g.disableVideo,(!n.length||s)&&(n=[null]),s=[],t=b(t),l=t.next();!l.done;l=t.next())for(l=l.value,c=b(n),d=c.next();!d.done;d=c.next()){var A=d.value;(d=l?l.stream:null)&&(d.drmInfos=w,d.keyIds=T),(p=A?A.stream:null)&&(p.drmInfos=w,p.keyIds=T),p&&!d&&(p.bandwidth=r),!p&&d&&(d.bandwidth=r),E=l?l.stream.drmInfos:null,I=A?A.stream.drmInfos:null,A=A?A.M().sort().join(","):"";var R=l?l.M().sort().join(","):"";A=A+" - "+R,d&&p&&!kg(E,I)||e.ub.has(A)||(d={id:e.B++,language:d?d.language:"und",disabledUntilTime:0,primary:!!d&&d.primary||!!p&&p.primary,audio:d,video:p,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},s.push(d),e.ub.add(A))}return s}function i3(e,t){t=Jx(t,"CLOSED-CAPTIONS"),e.R=t.length==0,t=b(t);for(var n=t.next();!n.done;n=t.next()){var r=n.value,s=Ye(r,"LANGUAGE");n=Kt(s||"und"),s||(s=Ye(r,"NAME"))&&(n=s),s=Yt(r,"GROUP-ID"),r=Yt(r,"INSTREAM-ID").replace("SERVICE","svc"),e.C.get(s)||e.C.set(s,new Map),e.C.get(s).set(r,n)}}function c2(e,t,n){for(var r=[],s=[],l=new Map,c=b(t),d=c.next();!d.done;d=c.next()){var p=d.value;d=Yt(p,"URI"),p=Yt(p,"GROUP-ID"),r.push(d),s.push(p),l.set(p,d)}if(c=s.sort().join(","),d=t[0],t="",p=Yt(d,"TYPE").toLowerCase(),p=="subtitles"&&(p=Ut),p==Ut)t=Ye(d,"CODECS")||"";else{s=b(s);for(var w=s.next();!w.done;w=s.next())if(w=w.value,e.F.has(w)){t=e.F.get(w);break}}if(s=r.sort().join(","),e.i.has(s))return e.i.get(s);if(w=e.B++,e.j){l=b(l);for(var T=l.next();!T.done;T=l.next()){var E=b(T.value);T=E.next().value,E=E.next().value,(T=n.get(T))&&va(e.j,w,T,E)}}n=Ye(d,"LANGUAGE"),l=Ye(d,"NAME"),T=Ye(d,"DEFAULT")=="YES",E=p=="audio"?u2(d):null;var I=p=="audio"?f2(d):!1,A=Ye(d,"CHARACTERISTICS"),R=Ye(d,"FORCED")=="YES";return d=p=="audio"?l2(d):null,r=Mc(e,w,r,t,p,n,T,l,E,null,A,R,d,I),r.stream&&(r.stream.groupId=c),e.G.has(c)?e.G.get(c).push(r):e.G.set(c,[r]),e.i.set(s,r),r}function o3(e,t){var n,r,s,l,c,d,p,w,T,E;return z(function(I){return I.g==1?(n=Yt(t,"URI"),r=Ye(t,"CODECS","jpeg")||"",e.i.has(n)?I.return(e.i.get(n)):(s=Ye(t,"LANGUAGE"),l=Ye(t,"NAME"),c=Ye(t,"CHARACTERISTICS"),d=Mc(e,e.B++,[n],r,"image",s,!1,l,null,null,c,!1,null,!1),(p=Ye(t,"RESOLUTION"))?k(I,d.stream.createSegmentIndex(),3):I.u(2))):(I.g!=2&&(w=d.stream.segmentIndex.get(0),T=w.tilesLayout)&&(d.stream.width=Number(p.split("x")[0])*Number(T.split("x")[0]),d.stream.height=Number(p.split("x")[1])*Number(T.split("x")[1])),(E=Ye(t,"BANDWIDTH"))&&(d.stream.bandwidth=Number(E)),e.i.set(n,d),I.return(d))})}function r3(e,t,n,r,s,l,c,d,p){for(var w=e.B++,T=[],E=b(t),I=E.next();!I.done;I=E.next()){var A=I.value;I=Yt(A,"URI"),A=Ye(A,"PATHWAY-ID"),e.j&&A&&va(e.j,w,A,I),T.push(I)}if(E=T.sort().join(","),e.i.has(E))return e.i.get(E);e:{if(t=Ye(t[0],"CLOSED-CAPTIONS"),r=="video"){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if(t!="NONE"){t=e.C.get(t);break e}e.R=!1}else if(!t&&e.C.size)for(t=b(e.C.keys()).next();!t.done;){t=e.C.get(t.value);break e}}t=null}return n=Ls(r,n),r=Mc(e,w,T,n,r,s,!1,l,c,t,d,!1,p,!1),e.i.set(E,r),r}function Mc(e,t,n,r,s,l,c,d,p,w,T,E,I,A){function R(H){var Y,oe,ae,me,ue,le,he,be,Ce,ke,Oe,Ie,Fe,vt,Dt,Sn,$t,kn,Un,Cn,qt,Mn;return z(function(Wn){switch(Wn.g){case 1:return Y=zn,oe=U.M(),Q(Wn,2),k(Wn,E0(e,U.M(),!0),4);case 4:ae=Wn.h,J(Wn,3);break;case 2:if(me=te(Wn),L.closeSegmentIndex(),e.h.disableStream(L))return Wn.return();throw me;case 3:if(H.aborted)return Wn.return();if(ue=ae.uri,ue==ae.originalUri||oe.includes(ue)||F.push(ue),le=m0(e.Fa,ae.data),le.type!=1)throw new re(2,4,4017);return he=lo(le.g,"EXT-X-DEFINE"),be=w0(e,he,ue),Ce=!1,(!e.ea&&e.g.hls.disableCodecGuessing||e.R&&s==Y.ga&&!e.g.hls.disableClosedCaptionsDetection)&&0<le.segments.length&&(e.R=!1,Ce=!0),ke=!e.ea&&e.g.hls.disableCodecGuessing,Oe=Bi(e),k(Wn,p2(e,0,be,le,D,r,s,l,c,d,p,w,T,E,I,A,void 0,Ce,ke),5);case 5:if(Ie=Wn.h,H.aborted)return Wn.return();if(Fe=Ie.stream,Bi(e)&&!Oe&&x2(e,le),U.mc=Ie.mc,U.Jb=Ie.Jb,U.Gd=Ie.Gd,U.Fd=Ie.Fd,U.ed=Ie.ed,U.Yd=Ie.Yd,U.ob=Ie.ob,U.pb=Ie.pb,U.vf=!0,L.segmentIndex=Fe.segmentIndex,L.encrypted=Fe.encrypted,L.drmInfos=Fe.drmInfos,L.keyIds=Fe.keyIds,L.mimeType=Fe.mimeType,L.bandwidth=L.bandwidth||Fe.bandwidth,L.codecs=L.codecs||Fe.codecs,L.closedCaptions=L.closedCaptions||Fe.closedCaptions,L.width=L.width||Fe.width,L.height=L.height||Fe.height,L.hdr=L.hdr||Fe.hdr,L.colorGamut=L.colorGamut||Fe.colorGamut,L.language=="und"&&Fe.language!="und"&&(L.language=Fe.language),L.language=L.language||Fe.language,L.channelsCount=L.channelsCount||Fe.channelsCount,L.audioSamplingRate=L.audioSamplingRate||Fe.audioSamplingRate,Sa(L),L.drmInfos.length&&e.h.newDrmInfo(L),vt=!1,(!w&&L.closedCaptions||w&&L.closedCaptions&&w.size!=L.closedCaptions.size)&&(vt=!0),e.m&&vt&&e.h.makeTextStreamsForClosedCaptions(e.m),s==Y.ga||s==Y.X)for(Dt=b(e.i.values()),Sn=Dt.next();!Sn.done;Sn=Dt.next())$t=Sn.value,$t.vf||$t.type!=s||($t.stream.mimeType=Fe.mimeType,Sa($t.stream));s==Y.ua&&(kn=Fe.segmentIndex.get(0))&&kn.$&&(L.mimeType="application/mp4",Sa(L)),Un=Of(L),L.segmentIndex.Hb(function(Xn){Xn.$&&(Xn.$.Hc=Un)}),s3(e)&&(e.Gb?S0(e,[U]):(e.Gb=!0,Cn=Array.from(e.i.values()),qt=Cn.filter(function(Xn){return Xn.stream.segmentIndex}),S0(e,qt),x0(e),Mn=e.o,0<Mn&&e.A.Y(Mn))),T0(e,le.g,L.type,be,D),V(Wn)}})}function D(){return e.j&&1<n.length?Yu(e.j,t):F.concat(e2([e.L],n,e.s))}var L=g2(e,r,s,l,c,d,p,w,T,E,I,A),F=[],U={stream:L,type:s,Tg:F,M:D,mc:0,Jb:0,Yd:new Map,Gd:!1,Fd:!1,ed:!1,Re:-1,ob:-1,pb:-1,vf:!1},q=null,N=new AbortController;return L.createSegmentIndex=function(){return q||(N=new AbortController,q=new Promise(function(H){H(R(N.signal))}))},L.closeSegmentIndex=function(){q&&!L.segmentIndex&&N.abort(),L.segmentIndex&&(L.segmentIndex.release(),L.segmentIndex=null),q=null},U}function h2(e){var t=1/0;e=b(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.Jb));return t}function d2(e,t){var n=[];t=b(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r.segmentIndex&&r.segmentIndex.Hb(function(s){n.push(s)});e.l.sd(n)}function S0(e,t){if(!Bi(e))for(var n=h2(e),r=b(t),s=r.next();!s.done;s=r.next())s.value.stream.segmentIndex.Bc(0,n);d2(e,t.map(function(l){return l.stream})),e.g.hls.ignoreManifestProgramDateTime?r2(e,t):(H4(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&r2(e,t))}function il(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function s3(e){if(!e.m)return!1;var t=[],n=[];e=b(e.m.variants);for(var r=e.next();!r.done;r=e.next())r=r.value,r.video&&t.push(r.video),r.audio&&n.push(r.audio);return!(0<t.length&&!t.some(function(s){return s.segmentIndex})||0<n.length&&!n.some(function(s){return s.segmentIndex}))}function p2(e,t,n,r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U){F=F===void 0?!0:F,U=U===void 0?!0:U;var q,N,H,Y,oe,ae,me,ue,le,he,be,Ce,ke,Oe,Ie,Fe,vt,Dt,Sn,$t,kn,Un,Cn,qt,Mn,Wn;return z(function(Xn){switch(Xn.g){case 1:var $i=ci(r.g,"EXT-X-PLAYLIST-TYPE"),zi=ci(r.g,"EXT-X-ENDLIST");if(zi=$i&&$i.value=="VOD"||zi,$i=$i&&$i.value=="EVENT"&&!zi,$i=!zi&&!$i,zi?Rc(e,Dc):$i?Rc(e,Pc):Rc(e,M2),Bi(e)&&C0(e,r),q=Bi(e)?e.N.get(c):new Map,N=C2(e,r,q,n,s,c),H=N.segments,Y=N.bandwidth,ue=me=ae=oe=null,!(0<H.length&&F)){Xn.u(2);break}return k(Xn,W4(e,H),3);case 3:le=Xn.h,c=le.type,d=le.language,T=le.channelCount,R=le.sampleRate,e.g.disableText||(E=le.closedCaptions),ae=le.height,oe=le.width,me=le.xd,ue=le.colorGamut,U&&(L=le.mimeType,l=le.codecs);case 2:if(L){Xn.u(4);break}return k(Xn,l3(e,c,l,H),5);case 5:L=Xn.h;case 4:return k(Xn,y2(e,r,L,s,n),6);case 6:if(he=Xn.h,be=he.drmInfos,Ce=he.keyIds,ke=he.encrypted,Oe=he.wh,ke&&!be.length&&!Oe)throw new re(2,4,4026);return Ie=g2(e,l,c,d,p,w,T,E,I,A,R,D),Ie.encrypted=ke,Ie.drmInfos=be,Ie.keyIds=Ce,Ie.mimeType=L,Y&&(Ie.bandwidth=Y),Sa(Ie),c=="video"&&(oe||ae||me||ue)&&b2(Ie,oe,ae,null,me,null,ue),Bi(e)&&C0(e,r),Fe=H[0].startTime,vt=H[H.length-1],Dt=vt.endTime,Sn=new Ft(H),Ie.segmentIndex=Sn,kn=($t=ci(r.g,"EXT-X-SERVER-CONTROL"))?nl($t,"CAN-SKIP-UNTIL")!=null:!1,Un=$t?nl($t,"CAN-BLOCK-RELOAD")!=null:!1,Cn=wa(r.g,"EXT-X-MEDIA-SEQUENCE",0),qt=m2(Cn,H),Mn=qt.ob,Wn=qt.pb,Xn.return({stream:Ie,type:c,Tg:[],M:s,mc:Fe,Jb:Dt,Gd:kn,Fd:Un,ed:!1,Re:-1,ob:Mn,pb:Wn,Yd:q,vf:!1})}})}function m2(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{ob:e,pb:n};t=t[t.length-1];var r=t.g;return t.g.length?(n=r.length-1,r[r.length-1].preload||(e++,n=0),{ob:e,pb:n}):(e++,t.m&&(n=0),{ob:e,pb:n})}function g2(e,t,n,r,s,l,c,d,p,w,T,E){var I=b0(n,t)||_c(n),A=[];if(p){p=b(p.split(","));for(var R=p.next();!R.done;R=p.next())A.push(R.value)}return p=void 0,R=null,n==Ut?p=A.includes("public.accessibility.transcribes-spoken-dialog")&&A.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":A.includes("public.accessibility.describes-video")&&(R="visually impaired"),A.length||p!=="subtitle"||A.push("subtitle"),e={id:e.B++,originalId:l,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:I,codecs:t,kind:n==Ut?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Kt(r||"und"),originalLanguage:r,label:l,type:n,primary:s,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:A,forced:w,channelsCount:c,audioSamplingRate:T,spatialAudio:E,closedCaptions:d,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:R,external:!1,fastSwitching:!1,fullMimeTypes:new Set},Sa(e),e}function y2(e,t,n,r,s){var l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me,ue,le,he,be,Ce,ke,Oe;return z(function(Ie){switch(Ie.g){case 1:if(l=new Map,t.segments){for(c=b(t.segments),d=c.next();!d.done;d=c.next())if(p=d.value,w=lo(p.g,"EXT-X-KEY"),T=null,w.length)for(T=w2(e,t,p.g,r,s),E=b(w),I=E.next();!I.done;I=E.next())A=I.value,l.set(A,T)}D=R=!1,L=[],F=new Set,U=b(l),q=U.next();case 2:if(q.done){Ie.u(4);break}if(N=q.value,H=b(N),Y=H.next().value,oe=H.next().value,ae=Y,me=oe,ue=Yt(ae,"METHOD"),ue=="NONE"){Ie.u(3);break}if(R=!0,le=Ye(ae,"KEYFORMAT")||"identity",he=null,Lc(ue)){D=!0,Ie.u(3);break}if(le!="identity"){he=(be=I2[le])?be(ae,n):null,Ie.u(6);break}return k(Ie,k2(e,ae,n,r,me,s),8);case 8:he=Ie.h;case 6:if(he){if(he.keyIds)for(Ce=b(he.keyIds),ke=Ce.next();!ke.done;ke=Ce.next())Oe=ke.value,F.add(Oe);L.push(he)}case 3:q=U.next(),Ie.u(2);break;case 4:return Ie.return({drmInfos:L,keyIds:F,encrypted:R,wh:D})}})}function v2(e,t,n,r,s){if(!h.crypto||!h.crypto.subtle)throw je("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new re(2,4,4042);var l=0,c=Ye(t,"IV","");if(c){var d=Yr(c.substr(2));if(d.byteLength!=16)throw new re(2,4,4048)}else l=wa(n.g,"EXT-X-MEDIA-SEQUENCE",0);if(n=t.toString()+"-"+l,!e.oa.has(n)){var p={bitsKey:128,blockCipherMode:"CBC",iv:d,firstMediaSequenceNumber:l};switch(Yt(t,"METHOD")){case"AES-256":p.bitsKey=256;break;case"AES-256-CTR":p.bitsKey=256,p.blockCipherMode="CTR"}p.fetchKey=function(){var w,T,E,I,A,R;return z(function(D){if(D.g==1)return w=Or(r(),Yt(t,"URI"),s),T=w.sort().join(""),e.K.has(T)||(E=Qn(w,e.g.retryParameters),I=dr(e,E,6),e.K.set(T,I)),k(D,e.K.get(T),2);if(D.g!=3){if(A=D.h,!A.data||A.data.byteLength!=p.bitsKey/8)throw new re(2,4,4049);return R={name:p.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:p.bitsKey},k(D,h.crypto.subtle.importKey("raw",A.data,R,!0,["decrypt"]),3)}p.cryptoKey=D.h,p.fetchKey=void 0,V(D)})},e.oa.set(n,p)}return e.oa.get(n)}function C0(e,t){var n=1/0,r=t.segments;if(r.length)for(var s=r.length-1;0<=s;){var l=ci(r[s].g,"EXTINF");if(l){n=Number(l.value.split(",")[0]);break}s--}if(r=ci(t.g,"EXT-X-TARGETDURATION"),!r)throw new re(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(s=ci(t.g,"EXT-X-PART-INF"))&&(e.U=Number(Yt(s,"PART-TARGET"))),t=ci(t.g,"EXT-X-SERVER-CONTROL"),e.I&&e.U?(e.o=e.Fb?5*e.U<=n?Math.min(e.U,e.o):Math.min(n,e.o):Math.min(e.U,e.o),e.Da=t?Number(Yt(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?nl(t,"HOLD-BACK"):null,e.za=n?Number(n.value):0),e.ab=Math.max(r,e.ab)}function x2(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.Da)t=e.Da;else if(e.za)t=e.za;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.ab*n}e.l.dh(0),e.l.Of(t),e.l.sc(!1)}function w2(e,t,n,r,s){var l=ci(n,"EXT-X-MAP");if(!l)return null;var c=Yt(l,"URI"),d=Or(r(),c,s);if(c=[d.toString(),Ye(l,"BYTERANGE","")].join("-"),!e.qa.has(c)){var p=void 0,w=null;n=b(n);for(var T=n.next();!T.done;T=n.next())T=T.value,T.name=="EXT-X-KEY"?Lc(Yt(T,"METHOD"))&&T.id<l.id&&(p=v2(e,T,t,r,s)):T.name=="EXT-X-BYTERANGE"&&T.id<l.id&&(w=T);t=a3(d,l,w,p),e.qa.set(c,t)}return e.qa.get(c)}function a3(e,t,n,r){var s=0,l=null;return t=Ye(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(s=t.split("@"),l=Number(s[0]),s=Number(s[1]),l=s+l-1,r&&(n=l+1-s,n%16&&(l+=16-n%16))),new Li(function(){return e},s,l,null,null,null,r)}function u3(e,t,n,r,s,l,c,d,p){function w(Fe){Fe=new Ln(Fe).Pa.split(".").pop();var vt=A0[c][Fe];return vt||(vt=k0[Fe]),vt}var T=r.g,E=ci(T,"EXTINF"),I=0,A=0,R=null;r.zb.length&&(e.m.isLowLatency=!0);var D=null;if(!e.g.hls.ignoreManifestProgramDateTime){var L=ci(T,"EXT-X-PROGRAM-DATE-TIME");L&&L.value&&(D=Ir(L.value))}var F=Mr;if(ci(T,"EXT-X-GAP")&&(e.m.gapCount++,F=2),!E){if(r.zb.length==0)throw new re(2,4,4024,"EXTINF");if(!e.I)return null}var U=[];L=!1;var q=null,N=!1,H=!1;if(e.I&&r.zb.length){I=t&&h.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var Y=D,oe={},ae=0;ae<r.zb.length;oe={xe:void 0,ge:void 0},ae++){var me=r.zb[ae],ue=ae==0?n:U[U.length-1],le=ae==0?s:ue.endTime,he=Number(Ye(me,"DURATION"))||e.U;if(he){var be=le+he,Ce=0,ke=null;if(me.name=="EXT-X-PRELOAD-HINT"?(Ce=(Ce=Ye(me,"BYTERANGE-START"))?Number(Ce):0,(ue=Ye(me,"BYTERANGE-LENGTH"))?ke=Ce+Number(ue)-1:Ce&&(ke=Number.MAX_SAFE_INTEGER)):(Ce=Ye(me,"BYTERANGE"),ke=b(S2(ue,Ce)),Ce=ke.next().value,ke=ke.next().value),oe.ge=Ye(me,"URI"),oe.ge){ue=Mr,Ye(me,"GAP")=="YES"&&(e.m.gapCount++,ue=2,N=!0),oe.xe=null;var Oe=function(Fe){return function(){return Fe.xe==null&&(Fe.xe=Or(d(),Fe.ge,l)),Fe.xe}}(oe);I&&0<=Ce&&ke!=null&&(q=Oe,L=!0),le=new ft(le,be,Oe,Ce,ke,t,0,0,1/0,[],"",null,Y,ue,p),me.name=="EXT-X-PRELOAD-HINT"&&(le.wf(),H=!0),Ye(me,"INDEPENDENT")!="YES"&&0<ae&&le.Xd(),(oe=w(oe.ge))&&(le.mimeType=oe,A2.has(oe)&&(le.$=null)),U.push(le),Y&&(Y+=he)}}}}if(E){if(E=Number(E.value.split(",")[0]),E==0)return null;I=s+E}else if(U.length)I=U[U.length-1].endTime;else return null;L&&(N||U[0].Ha!=0?(L=!1,q=null):U=[]),(E=ci(T,"EXT-X-BYTERANGE"))?(R=b(S2(n,E.value)),A=R.next().value,R=R.next().value):U.length&&(A=U[0].Ha,R=U[U.length-1].sa),n="",E=null,c=="image"&&(n="1x1",T=ci(T,"EXT-X-TILES"))&&(n=Yt(T,"LAYOUT"),(T=Ye(T,"DURATION"))&&(E=Number(T)));var Ie=null;return t=new ft(s,I,function(){return q?q():(Ie==null&&(Ie=Or(d(),r.h,l)),Ie||[])},A,R,t,0,0,1/0,U,n,E,D,F,p,0<U.length&&!!r.h),(s=w(r.h))&&(t.mimeType=s,A2.has(s)&&(t.$=null)),L&&(e.Fb=!0,t.Ig(),H&&t.wf()),t}function S2(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.sa+1,r=n+t-1),[n,r]}function T0(e,t,n,r,s){if(n=="video"||n=="audio"){var l=e.l.m;if(l&&!il(e,n))for(t=lo(t,"EXT-X-DATERANGE"),t=t.sort(function(D,L){return D=Yt(D,"START-DATE"),L=Yt(L,"START-DATE"),D<L?-1:D>L?1:0}),n=0;n<t.length;n++){var c=t[n],d=Yt(c,"ID");if(!e.Ea.has(d)){var p=Yt(c,"START-DATE"),w=Ir(p);if(!isNaN(w)){p=Math.max(0,w-l);var T=null,E=Ye(c,"END-DATE");if(E&&(E=Ir(E),!isNaN(E)&&(T=E-l,0>T))||T==null&&(E=Ye(c,"DURATION")||Ye(c,"PLANNED-DURATION"))&&(E=parseFloat(E),isNaN(E)||(T=p+E),0>w-l+E))continue;E=Ye(c,"CLASS")||"com.apple.quicktime.HLS";var I=Ye(c,"END-ON-NEXT")=="YES";if(T==null&&I){for(I=n+1;I<t.length;I++){var A=Ye(t[I],"CLASS")||"com.apple.quicktime.HLS";if(E==A&&(A=Yt(t[I],"START-DATE"),A=Ir(A),!isNaN(A)&&A&&A>w)){T=Math.max(0,A-l);break}}if(T==null)continue}for(w="ID CLASS START-DATE END-DATE DURATION END-ON-NEXT".split(" "),I=[],c=b(c.attributes),A=c.next();!A.done;A=c.next())if(A=A.value,!w.includes(A.name)){var R=t2(A.value,r);(A.name=="X-ASSET-URI"||A.name=="X-ASSET-LIST")&&(R=Or(s(),A.value,r)[0]),I.push({key:A.name,description:"",data:R,mimeType:null,pictureType:null})}I.length&&e.h.onMetadata(E,p,T,I),e.Ea.add(d)}}}}}function C2(e,t,n,r,s,l){var c=t.segments,d=void 0,p=wa(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),w=wa(t.g,"EXT-X-MEDIA-SEQUENCE",0),T=ci(t.g,"EXT-X-SKIP"),E=T?Number(Ye(T,"SKIPPED-SEGMENTS")):0,I=w+E,A=0;Bi(e)&&n.has(I)&&(A=n.get(I)),A===0&&e.xa==Pc&&0<n.size&&!n.has(I)&&(A=e.l.mb());var R=[],D=null;T=[];for(var L=0;L<c.length;L++){var F=c[L],U=L==0?A:D.endTime;I=w+E+L,ci(F.g,"EXT-X-DISCONTINUITY")&&p++;for(var q=b(F.g),N=q.next();!N.done;N=q.next())N=N.value,N.name=="EXT-X-KEY"&&(Lc(Yt(N,"METHOD"))?d=v2(e,N,t,s,r):d=void 0);n.set(I,U),q=w2(e,t,F.g,s,r),!e.I&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.I=e.h.isLowLatencyMode()),(U=u3(e,q,D,F,U,r,l,s,d))&&((D=wa(F.g,"EXT-X-BITRATE"))?T.push({bitrate:D,duration:U.endTime-U.startTime}):T.length&&(D=T.pop(),D.duration+=U.endTime-U.startTime,T.push(D)),D=U,U.i=p,il(e,l)&&e.H!=null&&I<e.H||R.push(U))}if(t=void 0,T.length&&(t=T.reduce(function(H,Y){return H+Y.duration},0),t=Math.round(T.reduce(function(H,Y){return H+Y.bitrate*Y.duration},0)/t*1e3)),T=R.some(function(H){return H.h!=null})){for(n={},r=0;r<R.length;n={Kd:void 0,Jd:void 0,Bd:void 0,pc:void 0,zd:void 0},r++)if(n.pc=R[r],n.pc.h==null)for(n.Jd=0,n.Kd=r,s=function(H){return function(){var Y=R[H.Kd];if(Y){if(Y.h!=null)return Y.h+H.Jd;H.Jd-=Y.endTime-Y.startTime,H.Kd+=1}return null}}(n),n.zd=0,n.Bd=r,c=function(H){return function(){var Y=R[H.Bd];if(Y){if(Y!=H.pc&&(H.zd+=Y.endTime-Y.startTime),Y.h!=null)return Y.h+H.zd;--H.Bd}return null}}(n);n.pc.h==null;)n.pc.h=c(),n.pc.h==null&&(n.pc.h=s())}if(T)for(n=b(R),r=n.next();!r.done;r=n.next())for(s=r.value,r=s.h,s=b(s.g),c=s.next();!c.done;c=s.next())c=c.value,c.h=r,r+=c.endTime-c.startTime;if(n=e.fa,T&&n!=1/0&&!il(e,l))for(e=b(R),l=e.next();!l.done;l=e.next())l.value.Vf(n);return{segments:R,bandwidth:t}}function b0(e,t){if(e==Ut){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function _c(e){return e==Ut?"text/vtt":A0[e].mp4}function T2(e,t){e=Bi(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.Yb()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function l3(e,t,n,r){var s,l,c,d,p,w,T,E,I,A,R,D,L,F;return z(function(U){switch(U.g){case 1:return s=Ro,l=T2(e,r),c=l.segment,c.status==2?U.return(_c(t)):(d=c.M(),p=new Ln(d[0]),w=p.Pa.split(".").pop(),T=A0[t],(E=T[w])||(E=k0[w])||(E=b0(t,n))?U.return(E):(A=1,R=Qn(d,e.g.retryParameters),Q(U,2),R.method="HEAD",k(U,dr(e,R,s,{type:A}),4)));case 4:D=U.h,I=D.headers["content-type"],J(U,3);break;case 2:if(L=te(U),!L||L.code!=1002&&L.code!=1001){U.u(3);break}return R.method="GET",k(U,dr(e,R,s,{type:A}),6);case 6:F=U.h,I=F.headers["content-type"];case 3:return I?U.return(I.toLowerCase().split(";")[0]):U.return(_c(t))}})}function b2(e,t,n,r,s,l,c){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=s||void 0,e.videoLayout=l||void 0,e.colorGamut=c||void 0)}function E0(e,t,n){return dr(e,Qn(t,e.g.retryParameters),0,{type:n?2:3})}function E2(e){var t,n,r,s,l,c;return z(function(d){switch(d.g){case 1:return e.h?(Q(d,2),t=Date.now(),k(d,e.update(),4)):d.return();case 4:n=Date.now(),Bi(e)&&(r=(n-t)/1e3,e.Db.sample(1,r),s=e.o,l=Math.max(0,s-ot(e.Db)),e.A.Y(l)),J(d,3);break;case 2:if(c=te(d),!e.h)return d.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(c),d.return();c.severity=1,e.h.onError(c),e.A.Y(.1);case 3:if(!e.h)return d.return();e.h.onManifestUpdated(),V(d)}})}function Bi(e){return e.xa!=Dc}function Rc(e,t){e.xa=t,e.l&&e.l.sc(!Bi(e)),Bi(e)||e.A.stop()}function dr(e,t,n,r){if(!e.da)throw new re(2,7,7001);return t=e.h.networkingEngine.request(n,t,r),ns(e.da,t),t.promise}function Lc(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function k2(e,t,n,r,s,l){var c,d,p,w,T,E,I,A,R,D,L,F,U,q,N;return z(function(H){switch(H.g){case 1:if(n=="video/mp2t")throw new re(2,4,4040);if(rf())throw new re(2,4,4041);if(c=Yt(t,"METHOD"),d=["SAMPLE-AES","SAMPLE-AES-CTR"],!d.includes(c))return H.return(null);if(p=Or(r(),Yt(t,"URI"),l),p[0].startsWith("data:text/plain;base64,")){w=Yo(oo(p[0].split("data:text/plain;base64,").pop())),H.u(2);break}return T=p.sort().join(""),e.pa.has(T)||(E=Qn(p,e.g.retryParameters),I=dr(e,E,6),e.pa.set(T,I)),k(H,e.pa.get(T),3);case 3:A=H.h,w=Yo(A.data);case 2:if(R="00000000000000000000000000000000",!s){H.u(4);break}if(e.ya.has(s)){D=e.ya.get(s),H.u(5);break}return L=Zs(s.M(),s.Xb(),s.Ub(),e.g.retryParameters),F=Ro,k(H,dr(e,L,F,{type:0}),6);case 6:U=H.h,D=HE(U.data),e.ya.set(s,D);case 5:D&&(R=D);case 4:return q=new Map,q.set(R,w),N="cenc",c=="SAMPLE-AES"&&(N="cbcs"),H.return(Lg(q,N))}})}we("shaka.hls.HlsParser",Ic);var k0={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},A0={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},A2=new Set(["video/mp2t"].concat(_(kr))),I2={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new re(2,4,4040);if(rf())throw new re(2,4,4041);if(t=Yt(e,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),Qr("com.apple.fps",n,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],Yt(e,"URI"))},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Yt(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),t=Yt(e,"URI"),t=y0(t.split("?")[0]),t=Ae(t.data),n=Qr("com.widevine.alpha",n,[{initDataType:"cenc",initData:t}]),(e=Ye(e,"KEYID"))&&(n.keyIds=new Set([e.toLowerCase().substr(2)])),n},"com.microsoft.playready":function(e){var t=Yt(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;var n="cenc";return t=="SAMPLE-AES"&&(n="cbcs"),e=Yt(e,"URI"),e=y0(e.split("?")[0]),e=Ae(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=yf(e,t,new Set,0),Qr("com.microsoft.playready",n,[{initDataType:"cenc",initData:e}])}},Dc="VOD",M2="EVENT",Pc="LIVE",f3={sh:Dc,qj:M2,yj:Pc};Co["application/x-mpegurl"]=function(){return new Ic},Co["application/vnd.apple.mpegurl"]=function(){return new Ic};function c3(e){var t=0,n=wt(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var s=n.getUint16(e,!0);if(e+=2,s&1||s+e>n.byteLength){n=[];break e}var l=Ae(n,e,s);t.push({type:r,value:l}),e+=s}n=t}return n}function Oc(e){if(e=_2(e))e:{e=b(wo(e,"DATA"));for(var t=e.next();!t.done;t=e.next())if(t=So(t.value,"LA_URL")){e=Gn(t);break e}e=""}else e="";return e}function _2(e){return e=oo(Gn(e)),e=c3(e).filter(function(t){return t.type===h3})[0],e?(e=qo(e.value,!0),(e=Gs(e,"WRMHEADER"))?e:null):null}var h3=1,d3=new Map().set("com.microsoft.playready",Oc).set("com.microsoft.playready.recommendation",Oc).set("com.microsoft.playready.software",Oc).set("com.microsoft.playready.hardware",Oc);function Ca(e){if(!P2){P2=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),r=new Uint8Array([0,0,0,1]);Nc=Lt("ftyp",t,r,t,n),t=Lt("dref",b3),I0=Lt("dinf",t)}this.g=e}function Ta(e){for(var t=[],n=b(e.g),r=n.next();!r.done;r=n.next()){var s=t,l=s.push,c=r.value;r=Lt;var d=c.id+1,p=c.stream.width||0,w=c.stream.height||0;c.type=="audio"&&(w=p=0);var T=c.duration*c.timescale,E=Math.floor(T/(Nr+1));switch(T=Math.floor(T%(Nr+1)),d=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(_(vn(d,4)),[0,0,0,0],_(vn(E,4)),_(vn(T,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],_(vn(p,2)),[0,0],_(vn(w,2)),[0,0])),d=Lt("tkhd",d),p=Lt,E=c.duration*c.timescale,w=Math.floor(E/(Nr+1)),E=Math.floor(E%(Nr+1)),T=c.stream.language,T=T.charCodeAt(0)-96<<10|T.charCodeAt(1)-96<<5|T.charCodeAt(2)-96,w=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(_(vn(c.timescale,4)),_(vn(w,4)),_(vn(E,4)),_(vn(T,2)),[0,0])),w=Lt("mdhd",w),E=c,T=new Uint8Array([]),E.type){case"video":T=m3;break;case"audio":T=g3}E=Lt("hdlr",T);e:{switch(c.type){case"video":c=Lt("minf",Lt("vmhd",S3),I0,R2(c));break e;case"audio":c=Lt("minf",Lt("smhd",C3),I0,R2(c));break e}c=new Uint8Array([])}c=p("mdia",w,E,c),r=r("trak",d,c),l.call(s,r)}for(t=An.apply(gi,_(t)),l=e.g[0],n=Lt,r=l.duration*l.timescale,s=Math.floor(r/(Nr+1)),r=Math.floor(r%(Nr+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(_(vn(l.timescale,4)),_(vn(s,4)),_(vn(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),s=Lt("mvhd",s),r=[],e=b(e.g),p=e.next();!p.done;p=e.next())c=r,d=c.push,p=new Uint8Array([0,0,0,0].concat(_(vn(p.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),p=Lt("trex",p),d.call(c,p);if(e=An.apply(gi,_(r)),e=Lt("mvex",e),r=[],l.encrypted){for(l=b(l.stream.drmInfos),c=l.next();!c.done;c=l.next())if(c=c.value,c.initData)for(c=b(c.initData),d=c.next();!d.done;d=c.next())r.push(d.value.initData);l=An.apply(gi,_(r))}else l=new Uint8Array([]);return e=n("moov",s,t,e,l),t=new Uint8Array(Nc.byteLength+e.byteLength),t.set(Nc),t.set(e,Nc.byteLength),t}function R2(e){var t=Lt,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var r=e.stream.height||0;if(0<e.wa.byteLength)var s=Lt("avcC",e.wa);else{s=Lt;for(var l=7,c=[],d=[],p=0,w=0,T=0,E=0;E<e.$a.length;E++){var I=D2(e.$a[E]);switch(I[0]&31){case 7:c.push(I),l+=I.length+2;break;case 8:d.push(I),l+=I.length+2}}for(0<c.length&&(p=c[0][1],T=c[0][2],w=c[0][3]),l=new Uint8Array(l),E=0,l[E++]=1,l[E++]=p,l[E++]=T,l[E++]=w,l[E++]=255,l[E++]=224|c.length,p=0;p<c.length;p++)l[E++]=(c[p].length&65280)>>8,l[E++]=c[p].length&255,l.set(c[p],E),E+=c[p].length;for(l[E++]=d.length,c=0;c<d.length;c++)l[E++]=(d[c].length&65280)>>8,l[E++]=d[c].length&255,l.set(d[c],E),E+=d[c].length;s=s("avcC",l)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(_(vn(n,2)),_(vn(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",d=L2(e),c=new Uint8Array([]),e.encrypted&&(c=ba(e),r="encv"),n=Lt(r,n,s,d,c)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,s=e.stream.height||0,n=new Uint8Array([]),0<e.wa.byteLength&&(n=Lt("hvcC",e.wa)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(_(vn(r,2)),_(vn(s,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),s="hvc1",d=L2(e),c=new Uint8Array([]),e.encrypted&&(c=ba(e),s="encv"),n=Lt(s,r,n,d,c));break;case"audio":e.codecs.includes("mp3")?e=Lt(".mp3",ol(e)):e.codecs.includes("ac-3")?(n=Lt("dac3",e.ma),r="ac-3",s=new Uint8Array([]),e.encrypted&&(s=ba(e),r="enca"),e=Lt(r,ol(e),n,s)):e.codecs.includes("ec-3")?(n=Lt("dec3",e.ma),r="ec-3",s=new Uint8Array([]),e.encrypted&&(s=ba(e),r="enca"),e=Lt(r,ol(e),n,s)):e.codecs.includes("opus")?(n=Lt("dOps",e.ma),r="Opus",s=new Uint8Array([]),e.encrypted&&(s=ba(e),r="enca"),e=Lt(r,ol(e),n,s)):(0<e.ma.byteLength?n=Lt("esds",e.ma):(n=Lt,r=e.id+1,s=e.stream.channelsCount||2,c=e.stream.audioSamplingRate||44100,p=Ls("audio",e.codecs.split(",")),w={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},d=w[c],(p==="mp4a.40.5"||p==="mp4a.40.29")&&(d=w[2*c]),c=parseInt(p.split(".").pop(),10),r=new Uint8Array([0,0,0,0,3,25].concat(_(vn(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,c<<3|d>>>1,d<<7|s<<3,6,1,2])),n=n("esds",r)),r="mp4a",s=new Uint8Array([]),e.encrypted&&(s=ba(e),r="enca"),e=Lt(r,ol(e),n,s)),n=e}return e=Lt("stsd",T3,n),t("stbl",e,Lt("stts",y3),Lt("stsc",v3),Lt("stsz",w3),Lt("stco",x3))}function L2(e){if(!e.Ba&&!e.Ca)return new Uint8Array([]);var t=e.Ca;return e=new Uint8Array([].concat(_(vn(e.Ba,4)),_(vn(t,4)))),Lt("pasp",e)}function ol(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(_(vn(e.stream.audioSamplingRate||44100,2)),[0,0]))}function ba(e){for(var t=Lt,n=e.codecs.substring(0,e.codecs.indexOf(".")),r=0,s=0;s<n.length;s+=1)r|=n.charCodeAt(s)<<8*(n.length-s-1);n=new Uint8Array([].concat(_(vn(r,4)))),n=Lt("frma",n),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),r=Lt("schm",r),s=Lt;var l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=b(e.stream.drmInfos);for(var c=e.next();!c.done;c=e.next())if((c=c.value)&&c.keyIds&&c.keyIds.size){c=b(c.keyIds);for(var d=c.next();!d.done;d=c.next())l=D2(d.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),l=Lt("tenc",e,l),t("sinf",n,r,s("schi",l))}function rl(e){var t=[];e=b(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var r=t.push,s=r.apply,l=Lt,c=new Uint8Array([0,0,0,0].concat(_(vn(n.data?n.data.rb:0,4))));c=Lt("mfhd",c);var d,p=n.data?n.data.Ya:[],w=new Uint8Array(4+p.length);for(d=0;d<p.length;d++){var T=p[d].flags;w[d+4]=T.Va<<4|T.Xa<<2|T.Wa}p=Lt("sdtp",w);var E=p.length+92;w=Lt,d=new Uint8Array([0,0,0,58].concat(_(vn(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),d=Lt("tfhd",d),T=n.data?n.data.baseMediaDecodeTime:0;var I=Math.floor(T%(Nr+1));T=new Uint8Array([1,0,0,0].concat(_(vn(Math.floor(T/(Nr+1)),4)),_(vn(I,4)))),T=Lt("tfdt",T);var A=E;E=n.data?n.data.Ya:[],I=E.length;var R=12+16*I,D=new Uint8Array(R);for(A+=8+R,D.set([n.type==="video"?1:0,0,15,1].concat(_(vn(I,4)),_(vn(A,4))),0),A=0;A<I;A++){var L=E[A];R=vn(L.duration,4);var F=vn(L.size,4),U=L.flags;L=vn(L.cb,4),D.set([].concat(_(R),_(F),[U.gb<<2|U.Va,U.Xa<<6|U.Wa<<4|U.hb,U.Ua&61440,U.Ua&15],_(L)),12+16*A)}E=Lt("trun",D),p=w("traf",d,T,E,p),l=l("moof",c,p),s.call(r,t,[l,p3(n)])}return An.apply(gi,_(t))}function p3(e){return e=(e.data?e.data.Ya:[]).map(function(t){return t.data}),e=An.apply(gi,_(e)),Lt("mdat",e)}function vn(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function D2(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function Lt(e){var t=Me.apply(1,arguments),n=O2[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],O2[e]=n);for(var r=8,s=t.length-1;0<=s;s--)r+=t[s].byteLength;for(s=new Uint8Array(r),s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=r&255,s.set(n,4),n=0,r=8;n<t.length;n++)s.set(t[n],r),r+=t[n].byteLength;return s}var P2=!1,Nr=Math.pow(2,32)-1,O2={},m3=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),g3=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),y3=new Uint8Array([0,0,0,0,0,0,0,0]),v3=new Uint8Array([0,0,0,0,0,0,0,0]),x3=new Uint8Array([0,0,0,0,0,0,0,0]),w3=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),S3=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),C3=new Uint8Array([0,0,0,0,0,0,0,0]),T3=new Uint8Array([0,0,0,0,0,0,0,1]),Nc=new Uint8Array([]),b3=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),I0=new Uint8Array([]);function M0(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.s=1,this.i=null,this.B=new Ze(5),this.o=new Mt(function(){E3(e)}),this.A=new $s,this.m=new Map}S=M0.prototype,S.configure=function(e){this.g=e},S.start=function(e,t){var n=this;return z(function(r){if(r.g==1)return n.l=[e],n.h=t,k(r,_0(n),2);if(!n.h)throw new re(2,7,7001);return r.return(n.j)})};function E3(e){var t;z(function(n){switch(n.g){case 1:return Q(n,2),k(n,_0(e),4);case 4:J(n,3);break;case 2:t=te(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();V(n)}})}S.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.A.destroy()},S.update=function(){var e=this,t;return z(function(n){if(n.g==1)return Q(n,2),k(n,_0(e),4);if(n.g!=2)return J(n,0);if(t=te(n),!e.h||!t)return n.return();e.h.onError(t),V(n)})},S.onExpirationUpdated=function(){},S.onInitialVariantChosen=function(){},S.banLocation=function(){},S.setMediaElement=function(){};function _0(e){var t,n,r,s,l,c,d;return z(function(p){if(p.g==1)return t=Qn(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),s=n.request(0,t,{type:5}),ns(e.A,s),k(p,s.promise,2);if(l=p.h,!e.h)return p.return();l.uri&&!e.l.includes(l.uri)&&e.l.unshift(l.uri);var w=l.uri,T=l.data,E=e.g.mss.manifestPreprocessor;if(E!=zf){if(Ot("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),T=Nx(T,"SmoothStreamingMedia"),!T)throw new re(2,4,4046,w);E(T),T=Mo(T.outerHTML)}var I=Nd(T,"SmoothStreamingMedia");if(!I)throw new re(2,4,4046,w);if(w=e.g.mss.manifestPreprocessorTXml,w!=Vf&&w(I),e.i||(e.i=new st(null,0)),w=Bt(I,"IsLive",Bd,!1))throw new re(2,4,4047);e.i.sc(!w),E=Bt(I,"TimeScale",yi,1e7),T=Bt(I,"DVRWindowLength",yi),w&&(T===0||isNaN(T))&&(T=1/0);var A=Bt(I,"CanSeek",Bd,!1);T===0&&A&&(T=1/0),A=null,T&&0<T&&(A=T/E),w&&!isNaN(e.g.availabilityWindowOverride)&&(A=e.g.availabilityWindowOverride),A==null&&(A=1/0),e.i.pe(A),T=Bt(I,"Duration",yi,1/0),w||e.i.Za(T/E),w={variants:[],textStreams:[],timescale:E,duration:T/E};var R;for(A=on(I,"Protection"),E=e.g.mss.keySystemsBySystemId,T=[],A=b(A),R=A.next();!R.done;R=A.next())T=T.concat(on(R.value,"ProtectionHeader"));if(T.length){for(A=[],R=0;R<T.length;R++){var D=T[R],L=D.attributes.SystemID.toLowerCase(),F=E[L];if(F){var U=_2(D);if(U)e:{U=b(wo(U,"DATA"));for(var q=U.next();!q.done;q=U.next())if(q=So(q.value,"KID")){U=oo(Gn(q)),U=new Uint8Array([U[3],U[2],U[1],U[0],U[5],U[4],U[7],U[6]].concat(_(U.slice(8)))),U=Yo(U);break e}U=null}else U=null;q=oo(Gn(D)),L=Yr(L.replace(/-/g,"")),L=[{initData:yf(q,L,new Set,0),initDataType:"cenc",keyId:U}],L=Qr(F,"cenc",L),U&&L.keyIds.add(U),(F=d3.get(F))&&(L.licenseServerUri=F(D)),A.push(L)}}E=A}else E=[];for(R=E,A=[],E=[],T=[],I=on(I,"StreamIndex"),I=b(I),D=I.next();!D.done;D=I.next()){D=D.value,F=on(D,"QualityLevel"),L=w.timescale,U=w.duration,q=on(D,"c");for(var N=[],H=0,Y=0;Y<q.length;++Y){var oe=q[Y],ae=q[Y+1],me=Bt(oe,"t",yi),ue=Bt(oe,"d",yi);if(oe=Bt(oe,"r",wf),!ue)break;if(me=me??H,oe=oe||0,0>oe)if(ae){if(ae=Bt(ae,"t",yi),ae==null)break;if(me>=ae)break;oe=Math.ceil((ae-me)/ue)-1}else{if(U==1/0)break;if(me/L>=U)break;oe=Math.ceil((U*L-me)/ue)-1}for(ae=0;ae<=oe;++ae)H=me+ue,N.push({start:me/L,end:H/L,$f:me}),me=H}for(L=N,F=b(F),U=F.next();!U.done;U=F.next())(U=k3(e,D,U.value,L,R,w))&&(U.type!="audio"||e.g.disableAudio?U.type!="video"||e.g.disableVideo?U.type!=Ut||e.g.disableText||T.push(U):E.push(U):A.push(U))}for(I=[],A=b(0<A.length?A:[null]),R=A.next();!R.done;R=A.next())for(R=R.value,D=b(0<E.length?E:[null]),N=D.next();!N.done;N=D.next())F=I,L=F.push,U=e,q=R,N=N.value,Y=0,q&&q.bandwidth&&0<q.bandwidth&&(Y+=q.bandwidth),N&&N.bandwidth&&0<N.bandwidth&&(Y+=N.bandwidth),U={id:U.s++,language:q?q.language:"und",disabledUntilTime:0,primary:!!q&&q.primary||!!N&&N.primary,audio:q,video:N,bandwidth:Y,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},L.call(F,U);w.variants=I,w.textStreams=T,e.j?(e.j.variants=w.variants,e.j.textStreams=w.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:w.variants,textStreams:w.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1},e.i.Wd()),Promise.resolve(),c=Date.now(),d=(c-r)/1e3,e.B.sample(1,d),V(p)})}function k3(e,t,n,r,s,l){var c=t.attributes.Type;if(c!=="audio"&&c!=="video"&&c!=="text")return je("Ignoring unrecognized type:",c),null;var d=t.attributes.Language,p=e.s++,w=Bt(n,"Bitrate",nr),T=Bt(n,"MaxWidth",nr),E=Bt(n,"MaxHeight",nr),I=Bt(n,"Channels",nr),A=Bt(n,"SamplingRate",nr),R=l.duration;r.length&&(R=r[r.length-1].end-r[0].start);var D=e.i.getDuration();e.i.Za(Math.min(R,D));var L={id:p,originalId:t.attributes.Name||String(p),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:w||0,width:T||void 0,height:E||void 0,kind:"",encrypted:0<s.length,drmInfos:s,keyIds:new Set,language:Kt(d||"und"),originalLanguage:d,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:I,audioSamplingRate:A,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:R,timescale:l.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set};if((s=t.attributes.Subtype)&&((s=L3[s])&&L.roles.push(s),s==="main"&&(L.primary=!0)),s=n.attributes.FourCC,(s===null||s==="")&&(s=t.attributes.FourCC),!s){if(c==="audio")s="AAC";else if(c==="video")return je('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!R3.includes(s.toUpperCase()))return je("Codec not supported:",s),null;switch(n=A3(n,c,s,L),L.mssPrivateData.codecPrivateData=n,c){case"audio":if(!n)return je("Quality unsupported without CodecPrivateData",c),null;L.type="audio",L.mimeType="mss/audio/mp4",L.codecs=I3(s,n);break;case"video":if(!n)return je("Quality unsupported without CodecPrivateData",c),null;L.type="video",L.mimeType="mss/video/mp4",L.codecs=M3(n);break;case"text":L.type=Ut,L.mimeType="application/mp4",(s==="TTML"||s==="DFXP")&&(L.codecs="stpp")}return L.fullMimeTypes.add(Vn(L.mimeType,L.codecs)),L.createSegmentIndex=function(){if(L.segmentIndex)return Promise.resolve();if(e.m.has(L.id))var F=e.m.get(L.id);else F=[],L.type=="video"&&(F=L.mssPrivateData.codecPrivateData.split("00000001").slice(1)),F={id:L.id,type:L.type,codecs:L.codecs,encrypted:L.encrypted,timescale:L.mssPrivateData.timescale,duration:L.mssPrivateData.duration,$a:F,ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:null,stream:L},F=Ta(new Ca([F])),e.m.set(L.id,F);return F=_3(e,new Li(function(){return[]},0,null,Of(L),L.mssPrivateData.timescale,F),L,t,r),L.segmentIndex=new Ft(F),Promise.resolve()},L.closeSegmentIndex=function(){L.segmentIndex&&(L.segmentIndex.release(),L.segmentIndex=null)},L}function A3(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var s={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=s[e],n==="AACH"?(n=new Uint8Array(4),e=s[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|r>>1,n[1]=r<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function I3(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function M3(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function _3(e,t,n,r,s){var l=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[],s=b(s);for(var c=s.next(),d={};!c.done;d={re:void 0},c=s.next())d.re=c.value,r.push(new ft(d.re.start,d.re.end,function(p){return function(){return ri(e.l,[l.replace("{start time}",String(p.re.$f))])}}(d),0,null,t,0,0,n.mssPrivateData.duration));return r}we("shaka.mss.MssParser",M0);var R3="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),L3={CAPT:"main",SUBT:"alternate",DESC:"main"};Co["application/vnd.ms-sstr+xml"]=function(){return new M0};function N2(e,t,n,r,s,l){if(200<=n&&299>=n&&n!=202)return{uri:s||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};var c=null;try{c=Ko(t)}catch{}throw new re(n==401||n==403?2:1,1,1001,r,n,c,e,l,s||r)}function R0(){}function Uc(e,t,n,r,s){var l=new U3;wu(t.headers).forEach(function(w,T){l.append(T,w)});var c=new O3,d={lg:!1,mh:!1};if(e=D3(e,n,{body:t.body||void 0,headers:l,method:t.method,signal:c.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},d,r,s,t.streamDataCallback),e=new Dn(e,function(){return d.lg=!0,c.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var p=new Mt(function(){d.mh=!0,c.abort()});p.Y(t/1e3),e.finally(function(){p.stop()})}return e}function D3(e,t,n,r,s,l,c){var d,p,w,T,E,I,A,R,D,L,F,U,q;return z(function(N){switch(N.g){case 1:return d=P3,p=N3,I=E=0,A=Date.now(),Q(N,2),k(N,d(e,n),4);case 4:if(w=N.h,l(U2(w.headers)),n.method=="HEAD"){N.u(5);break}return R=w.clone().body.getReader(),L=(D=w.headers.get("Content-Length"))?parseInt(D,10):0,F=function(H){function Y(){var oe,ae,me;return z(function(ue){switch(ue.g){case 1:return Q(ue,2),k(ue,R.read(),4);case 4:oe=ue.h,J(ue,3);break;case 2:return te(ue),ue.return();case 3:if(oe.done){ue.u(5);break}if(E+=oe.value.byteLength,!c){ue.u(5);break}return k(ue,c(oe.value),5);case 5:ae=Date.now(),(100<ae-A||oe.done)&&(me=oe.done?0:L-E,s(ae-A,E-I,me),I=E,A=ae),oe.done?H.close():(H.enqueue(oe.value),Y()),V(ue)}})}Y()},new p({start:F}),k(N,w.arrayBuffer(),6);case 6:T=N.h;case 5:J(N,3);break;case 2:throw U=te(N),r.lg?new re(1,1,7001,e,t):r.mh?new re(1,1,1003,e,t):new re(1,1,1002,e,U,t);case 3:return q=U2(w.headers),N.return(N2(q,T,w.status,e,w.url,t))}})}function U2(e){var t={};return e.forEach(function(n,r){t[r.trim()]=n}),t}function B2(){if(h.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(h.Response){if(!new Response("").body)return!1}else return!1;return!(!h.fetch||"polyfill"in h.fetch||!h.AbortController)}we("shaka.net.HttpFetchPlugin",R0),R0.isSupported=B2,R0.parse=Uc;var P3=h.fetch,O3=h.AbortController,N3=h.ReadableStream,U3=h.Headers;B2()&&(Zo("http",Uc,2,!0),Zo("https",Uc,2,!0),Zo("blob",Uc,2,!0));function j2(){}function Bc(e,t,n,r,s){var l=new B3,c=Date.now(),d=0,p=new Promise(function(w,T){l.open(t.method,e,!0),l.responseType="arraybuffer",l.timeout=t.retryParameters.timeout,l.withCredentials=t.allowCrossSiteCredentials,l.onabort=function(){T(new re(1,1,7001,e,n))};var E=!1;l.onreadystatechange=function(){if(l.readyState==2&&!E){var A=F2(l);s(A),E=!0}},l.onload=function(A){var R=F2(l),D=l.response;try{r(Date.now()-c,A.loaded-d,0);var L=N2(R,D,l.status,e,l.responseURL,n);w(L)}catch(F){T(F)}},l.onerror=function(A){T(new re(1,1,1002,e,A,n))},l.ontimeout=function(){T(new re(1,1,1003,e,n))},l.onprogress=function(A){var R=Date.now();(100<R-c||A.lengthComputable&&A.loaded==A.total)&&(r(R-c,A.loaded-d,l.readyState==4?0:A.total-A.loaded),d=A.loaded,c=R)};for(var I in t.headers)l.setRequestHeader(I.toLowerCase(),t.headers[I]);l.send(t.body)});return new Dn(p,function(){return l.abort(),Promise.resolve()})}function F2(e){var t=e.getAllResponseHeaders().trim().split(`\r
`);e={},t=b(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}we("shaka.net.HttpXHRPlugin",j2),j2.parse=Bc;var B3=h.XMLHttpRequest;Zo("http",Bc,1,!0),Zo("https",Bc,1,!0),Zo("blob",Bc,1,!0);function $2(e,t,n,r){this.g=e,this.i=t,this.groupId=n,this.h=r}function L0(e){return e.M().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.Ha+":"+e.sa}function j3(e,t){return Zs(e.g.M(),e.g.Ha,e.g.sa,t.streaming.retryParameters)}function z2(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function V2(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}z2.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function H2(e){var t=this;this.o=e,this.j=new Map,this.i=new zs(function(){return D0(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new z2}H2.prototype.destroy=function(){return this.i.destroy()};function F3(e,t,n){e.m=t,e.l=n}function D0(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function $3(e,t,n,r,s,l){Jt(e.i);var c=(e.j.get(t)||Promise.resolve()).then(function(){var d,p,w,T,E,I,A;return z(function(R){if(R.g==1)return k(R,V3(e,n),2);if(d=R.h,e.i.g)throw new re(2,9,7001);if(s)for(T in p=Ae(d),w=new vy(p),w.data)E=Number(T),I=w.data[E],A=w.g[E],e.l(I,A);e.g.close(r,d.byteLength);var D=e.g;return e.m(D.i==0?0:D.j/D.i,e.g.h),R.return(l(d))})});e.j.set(t,c)}function z3(e){return z(function(t){return t.g==1?k(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function V3(e,t){var n,r,s,l;return z(function(c){return c.g==1?(n=Ro,r=e.o.request(n,t),s=function(){return r.abort()},e.h.push(s),k(c,r.promise,2)):(l=c.h,jt(e.h,s),c.return(l.data))})}function jc(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Zt,e.onabort=function(r){r.preventDefault(),n.g.reject()},e.onerror=function(r){r.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}jc.prototype.abort=function(){var e=this;return z(function(t){if(t.g==1){try{e.i.abort()}catch{}return Q(t,2),k(t,e.g,4)}if(t.g!=2)return J(t,0);te(t),V(t)})};function P0(e,t){return new Promise(function(n,r){var s=e.h.openCursor();s.onerror=r,s.onsuccess=function(){var l;return z(function(c){if(c.g==1)return s.result==null?(n(),c.return()):(l=s.result,k(c,t(l.key,l.value,l),2));l.continue(),V(c)})}})}jc.prototype.store=function(){return this.h},jc.prototype.promise=function(){return this.g};function O0(e){this.h=e,this.g=[]}O0.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function cs(e,t){return Fc(e,t,"readwrite")}function Fc(e,t,n){n=e.h.transaction([t],n);var r=new jc(n,t);return e.g.push(r),r.promise().then(function(){jt(e.g,r)},function(){jt(e.g,r)}),r}function hs(e,t,n){this.h=new O0(e),this.i=t,this.g=n}S=hs.prototype,S.destroy=function(){return this.h.destroy()},S.hasFixedKeySpace=function(){return!0},S.addSegments=function(){return G2(this.i)},S.removeSegments=function(e,t){return W2(this,this.i,e,t)},S.getSegments=function(e){var t=this,n;return z(function(r){return r.g==1?k(r,X2(t,t.i,e),2):(n=r.h,r.return(n.map(function(s){return t.og(s)})))})},S.addManifests=function(){return G2(this.g)},S.updateManifest=function(){return Promise.reject(new re(2,9,9016,"Cannot modify values in "+this.g))};function H3(e,t,n){e=cs(e.h,e.g);var r=e.store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}S.updateManifestExpiration=function(e,t){var n=cs(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(s){(s=s.target.result)&&(s.expiration=t,r.put(s,e))},n.promise()},S.removeManifests=function(e,t){return W2(this,this.g,e,t)},S.getManifests=function(e){var t=this,n;return z(function(r){return r.g==1?k(r,X2(t,t.g,e),2):(n=r.h,r.return(Promise.all(n.map(function(s){return t.Wc(s)}))))})},S.getAllManifests=function(){var e=this,t,n;return z(function(r){return r.g==1?(t=Fc(e.h,e.g,"readonly"),n=new Map,k(r,P0(t,function(s,l){var c;return z(function(d){if(d.g==1)return k(d,e.Wc(l),2);c=d.h,n.set(s,c),V(d)})}),2)):r.g!=3?k(r,t.promise(),3):r.return(n)})},S.og=function(e){return e},S.Wc=function(e){return Promise.resolve(e)};function G2(e){return Promise.reject(new re(2,9,9011,"Cannot add new value to "+e))}S.add=function(e,t){var n=this,r,s,l,c,d,p,w;return z(function(T){if(T.g==1){for(r=cs(n.h,e),s=r.store(),l=[],c=b(t),d=c.next(),p={};!d.done;p={Hf:void 0},d=c.next())w=d.value,p.Hf=s.add(w),p.Hf.onsuccess=function(E){return function(){l.push(E.Hf.result)}}(p);return k(T,r.promise(),2)}return T.return(l)})};function W2(e,t,n,r){e=cs(e.h,t),t=e.store(),n=b(n);for(var s=n.next(),l={};!s.done;l={rf:void 0},s=n.next())l.rf=s.value,t.delete(l.rf).onsuccess=function(c){return function(){return r(c.rf)}}(l);return e.promise()}function X2(e,t,n){var r,s,l,c,d,p,w;return z(function(T){if(T.g==1){for(r=Fc(e.h,t,"readonly"),s=r.store(),l={},c=[],d=b(n),p=d.next(),w={};!p.done;w={le:void 0,Sd:void 0},p=d.next())w.Sd=p.value,w.le=s.get(w.Sd),w.le.onsuccess=function(E){return function(){E.le.result==null&&c.push(E.Sd),l[E.Sd]=E.le.result}}(w);return k(T,r.promise(),2)}if(c.length)throw new re(2,9,9012,"Could not find values for "+c);return T.return(n.map(function(E){return l[E]}))})}function sl(e){this.g=new O0(e)}sl.prototype.destroy=function(){return this.g.destroy()},sl.prototype.getAll=function(){var e=this,t,n;return z(function(r){return r.g==1?(t=Fc(e.g,"session-ids","readonly"),n=[],k(r,P0(t,function(s,l){n.push(l)}),2)):r.g!=3?k(r,t.promise(),3):r.return(n)})},sl.prototype.add=function(e){var t=cs(this.g,"session-ids"),n=t.store();e=b(e);for(var r=e.next();!r.done;r=e.next())n.add(r.value);return t.promise()},sl.prototype.remove=function(e){var t=this,n;return z(function(r){return r.g==1?(n=cs(t.g,"session-ids"),k(r,P0(n,function(s,l,c){e.includes(l.sessionId)&&c.delete()}),2)):k(r,n.promise(),0)})};function Ii(){this.g=new Map}Ii.prototype.destroy=function(){for(var e=[],t=b(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Ii.prototype.init=function(){var e=this;al.forEach(function(s,l){(s=s())&&e.g.set(l,s)});for(var t=[],n=b(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)};function q2(e){var t=null;if(e.g.forEach(function(n,r){n.getCells().forEach(function(s,l){s.hasFixedKeySpace()||t||(t={path:{nb:r,Ja:l},Ja:s})})}),t)return t;throw new re(2,9,9013,"Could not find a cell that supports add-operations")}function G3(e,t){e.g.forEach(function(n,r){n.getCells().forEach(function(s,l){t({nb:r,Ja:l},s)})})}function $c(e,t,n){if(e=e.g.get(t),!e)throw new re(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new re(2,9,9013,"Could not find cell with name "+n);return t}function W3(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function X3(e){var t=Array.from(e.g.keys());if(!t.length)throw new re(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function q3(e){var t,n,r;return z(function(s){return s.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(r=al,r.forEach(function(l){(l=l())&&t.push(l)})),k(s,Promise.all(t.map(function(l){return l.erase()})),2)):n?s.u(0):k(s,Promise.all(t.map(function(l){return l.destroy()})),0)})}function K2(e,t){al.set(e,t)}we("shaka.offline.StorageMuxer",Ii),Ii.unregister=function(e){al.delete(e)},Ii.register=K2,Ii.prototype.destroy=Ii.prototype.destroy;var al=new Map;function ul(){hs.apply(this,arguments)}X(ul,hs),ul.prototype.updateManifestExpiration=function(e,t){var n=this,r,s,l;return z(function(c){return r=cs(n.h,n.g),s=r.store(),l=new Zt,s.get(e).onsuccess=function(d){(d=d.target.result)?(d.expiration=t,s.put(d),l.resolve()):l.reject(new re(2,9,9012,"Could not find values for "+e))},k(c,Promise.all([r.promise(),l]),0)})},ul.prototype.Wc=function(e){var t,n,r,s,l,c;return z(function(d){if(d.g==1){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,s=r-e.periods[n].startTime,l=K3(e.periods[n],s),t.push(l);return k(d,Ix(t),2)}return c=d.h,d.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:c,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function K3(e,t){Q3(e);for(var n=b(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(s){return Y3(s,e.startTime,t)})}function Y3(e,t,n){var r=e.initSegmentUri?Y2(e.initSegmentUri):null,s=t+e.presentationTimeOffset,l=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(c){var d=Y2(c.uri);return{startTime:t+c.startTime,endTime:t+c.endTime,dataKey:d,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:l,timestampOffset:s,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}ul.prototype.og=function(e){return{data:e.data}};function Y2(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new re(2,9,9004,"Could not parse uri "+e)}function Q3(e){var t=e.streams.filter(function(d){return d.contentType=="audio"});if(e=e.streams.filter(function(d){return d.contentType=="video"}),!t.every(function(d){return d.variantIds})||!e.every(function(d){return d.variantIds})){for(var n=b(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=b(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var s=b(e),l=s.next();!l.done;l=s.next())l.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,s=b(t),l=s.next();!l.done;l=s.next())l.value.variantIds.push(r);if(e.length&&t.length)for(t=b(t),r=t.next();!r.done;r=t.next())for(r=r.value,s=b(e),l=s.next();!l.done;l=s.next()){l=l.value;var c=n++;r.variantIds.push(c),l.variantIds.push(c)}}}function zc(){hs.apply(this,arguments)}X(zc,hs),zc.prototype.Wc=function(e){var t,n,r,s,l,c;return z(function(d){if(d.g==1){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,s=r-e.periods[n].startTime;for(var p=e.periods[n],w=[],T=b(p.streams),E=T.next();!E.done;E=T.next())E=E.value,E.variantIds.length!=0&&w.push(Z3(E,p.startTime,p.startTime+s));l=w,t.push(l)}return k(d,Ix(t),2)}return c=d.h,d.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:c,sequenceMode:!1})})};function Z3(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function N0(){hs.apply(this,arguments)}X(N0,hs),S=N0.prototype,S.hasFixedKeySpace=function(){return!1},S.addSegments=function(e){return this.add(this.i,e)},S.addManifests=function(e){return this.add(this.g,e)},S.updateManifest=function(e,t){return H3(this,e,t)},S.Wc=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function Q2(){this.m=this.j=this.i=this.h=this.g=this.l=null}S=Q2.prototype,S.init=function(){var e=this,t=new Zt,n=!1,r=new Mt(function(){n=!0,t.reject(new re(2,9,9017))});r.Y(5);var s=h.indexedDB.open("shaka_offline_db",5);return s.onsuccess=function(){if(!n){var l=s.result;e.l=l;var c=l.objectStoreNames;c=c.contains("manifest")&&c.contains("segment")?new ul(l,"segment","manifest"):null,e.g=c,c=l.objectStoreNames,c=c.contains("manifest-v2")&&c.contains("segment-v2")?new zc(l,"segment-v2","manifest-v2"):null,e.h=c,c=l.objectStoreNames,c=c.contains("manifest-v3")&&c.contains("segment-v3")?new zc(l,"segment-v3","manifest-v3"):null,e.i=c,c=l.objectStoreNames,c=c.contains("manifest-v5")&&c.contains("segment-v5")?new N0(l,"segment-v5","manifest-v5"):null,e.j=c,l=l.objectStoreNames.contains("session-ids")?new sl(l):null,e.m=l,r.stop(),t.resolve()}},s.onupgradeneeded=function(){for(var l=s.result,c=b(["segment-v5","manifest-v5","session-ids"]),d=c.next();!d.done;d=c.next())d=d.value,l.objectStoreNames.contains(d)||l.createObjectStore(d,{autoIncrement:!0})},s.onerror=function(l){n||(t.reject(new re(2,9,9001,s.error)),r.stop(),l.preventDefault())},t},S.destroy=function(){var e=this;return z(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return k(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return k(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return k(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return k(t,e.j.destroy(),8);case 8:if(!e.m){t.u(10);break}return k(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),V(t)}})},S.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},S.getEmeSessionCell=function(){return this.m},S.erase=function(){var e=this;return z(function(t){switch(t.g){case 1:if(!e.g){t.u(2);break}return k(t,e.g.destroy(),2);case 2:if(!e.h){t.u(4);break}return k(t,e.h.destroy(),4);case 4:if(!e.i){t.u(6);break}return k(t,e.i.destroy(),6);case 6:if(!e.j){t.u(8);break}return k(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),k(t,J3(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,k(t,e.init(),0)}})};function J3(){var e=new Zt,t=h.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new re(2,9,9001,t.error)),n.preventDefault()},e}K2("idb",function(){return Gi()||Bo()||!h.indexedDB?null:new Q2});function Go(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}Go.prototype.nb=function(){return this.i},Go.prototype.Ja=function(){return this.h},Go.prototype.key=function(){return this.l},Go.prototype.toString=function(){return this.j};function U0(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var r=e[3];return r&&t!=null?new Go(t,n,r,Number(e[4])):null}function Z2(e,t){this.h=e,this.g=t}function J2(e,t){var n=new st(null,0);n.Za(t.duration);var r=t.streams.filter(function(w){return w.type=="audio"}),s=t.streams.filter(function(w){return w.type=="video"});r=eI(e,r,s,n),s=t.streams.filter(function(w){return w.type==Ut}).map(function(w){return Vc(e,w,n)});var l=t.streams.filter(function(w){return w.type=="image"}).map(function(w){return Vc(e,w,n)}),c=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var d=b(r.values()),p=d.next();!p.done;p=d.next())p=p.value,p.audio&&p.audio.encrypted&&(p.audio.drmInfos=c),p.video&&p.video.encrypted&&(p.video.drmInfos=c);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:s,imageStreams:l,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1}}function eI(e,t,n,r){for(var s=new Set,l=b(t),c=l.next();!c.done;c=l.next()){c=b(c.value.variantIds);for(var d=c.next();!d.done;d=c.next())s.add(d.value)}for(l=b(n),c=l.next();!c.done;c=l.next())for(c=b(c.value.variantIds),d=c.next();!d.done;d=c.next())s.add(d.value);for(l=new Map,s=b(s),c=s.next();!c.done;c=s.next())c=c.value,l.set(c,{id:c,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=b(t),s=t.next();!s.done;s=t.next())for(c=s.value,s=Vc(e,c,r),c=b(c.variantIds),d=c.next();!d.done;d=c.next())d=l.get(d.value),d.language=s.language,d.primary=d.primary||s.primary,d.audio=s;for(n=b(n),t=n.next();!t.done;t=n.next())for(s=t.value,t=Vc(e,s,r),s=b(s.variantIds),c=s.next();!c.done;c=s.next())c=l.get(c.value),c.primary=c.primary||t.primary,c.video=t;return l}function Vc(e,t,n){var r=t.segments.map(function(s){return tI(e,s,t)});return n.sd(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ft(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Vn(t.mimeType,t.codecs)])}}function tI(e,t,n){var r=new Go("segment",e.h,e.g,t.dataKey);return e=new ft(t.startTime,t.endTime,function(){return[r.toString()]},0,null,t.initSegmentKey!=null?nI(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",e}function nI(e,t){var n=new Go("segment",e.h,e.g,t);return new Li(function(){return[n.toString()]},0,null)}function ew(){this.g=null}S=ew.prototype,S.configure=function(){},S.start=function(e,t){var n=this,r,s,l,c,d,p,w;return z(function(T){switch(T.g){case 1:if(r=U0(e),n.g=r,r==null||r.g!="manifest")throw new re(2,1,9004,e);return s=new Ii,se(T,2),k(T,s.init(),4);case 4:return k(T,$c(s,r.nb(),r.Ja()),5);case 5:return l=T.h,k(T,l.getManifests([r.key()]),6);case 6:return c=T.h,d=c[0],p=new Z2(r.nb(),r.Ja()),w=J2(p,d),t.makeTextStreamsForClosedCaptions(w),T.return(w);case 2:return W(T),k(T,s.destroy(),7);case 7:Z(T,0)}})},S.stop=function(){return Promise.resolve()},S.update=function(){},S.onExpirationUpdated=function(e,t){var n=this,r,s,l,c,d,p,w;return z(function(T){switch(T.g){case 1:return r=n.g,s=new Ii,Q(T,2,3),k(T,s.init(),5);case 5:return k(T,$c(s,r.nb(),r.Ja()),6);case 6:return l=T.h,k(T,l.getManifests([r.key()]),7);case 7:if(c=T.h,d=c[0],p=d.sessionIds.includes(e),w=d.expiration==null||d.expiration>t,!p||!w){T.u(3);break}return k(T,l.updateManifestExpiration(r.key(),t),3);case 3:return W(T),k(T,s.destroy(),10);case 10:Z(T,0);break;case 2:te(T),T.u(3)}})},S.onInitialVariantChosen=function(){},S.banLocation=function(){},S.setMediaElement=function(){},Co["application/x-offline-manifest"]=function(){return new ew};function tw(){}function nw(e){var t=U0(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Fs(e)):e=t&&t.g=="segment"?iI(t.key(),t):ts(new re(2,1,9004,e)),e}function iI(e,t){var n=new Ii;return Fs(void 0).Aa(function(){return n.init()}).Aa(function(){return $c(n,t.nb(),t.Ja())}).Aa(function(r){return r.getSegments([t.key()])}).Aa(function(r){return{uri:t,data:r[0].data,headers:{}}}).finally(function(){return n.destroy()})}we("shaka.offline.OfflineScheme",tw),tw.plugin=nw,Zo("offline",nw);function iw(e,t,n){var r,s,l,c,d,p;return z(function(w){switch(w.g){case 1:r=[];for(var T=[],E=b(n),I=E.next();!I.done;I=E.next()){I=I.value;for(var A=!1,R=b(T),D=R.next();!D.done;D=R.next())if(D=D.value,rI(D.info,I)){D.sessionIds.push(I.sessionId),A=!0;break}A||T.push({info:I,sessionIds:[I.sessionId]})}s=b(T),l=s.next();case 2:if(l.done){w.u(4);break}return c=l.value,d=oI(e,t,c),k(w,d,5);case 5:p=w.h,r=r.concat(p),l=s.next(),w.u(2);break;case 4:return w.return(r)}})}function oI(e,t,n){var r,s;return z(function(l){switch(l.g){case 1:return r=new Tf({Lb:t,onError:function(){},ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),Q(l,2),r.configure(e),k(l,zb(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:J(l,3);break;case 2:return te(l),k(l,r.destroy(),5);case 5:return l.return([]);case 3:return s=[],k(l,Promise.all(n.sessionIds.map(function(c){return z(function(d){if(d.g==1)return Q(d,2),k(d,Gb(r,c),4);if(d.g!=2)return s.push(c),J(d,0);te(d),V(d)})})),6);case 6:return k(l,r.destroy(),7);case 7:return l.return(s)}})}function rI(e,t){function n(r,s){return r.robustness==s.robustness&&r.contentType==s.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Vt(e.audioCapabilities,t.audioCapabilities,n)&&Vt(e.videoCapabilities,t.videoCapabilities,n)}function sI(e,t,n){var r=t.presentationTimeline.getDuration();return t=ow(t),{offlineUri:null,originalManifestUri:e,duration:r,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function B0(e,t){var n=J2(new Z2(e.nb(),e.Ja()),t),r=t.appMetadata||{};return n=ow(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function ow(e){var t=[],n=ff(e.variants);n=b(n);for(var r=n.next();!r.done;r=n.next())t.push(Us(r.value));for(e=b(e.textStreams),n=e.next();!n.done;n=e.next())t.push(lf(n.value));return t}function aI(){this.g={}}function uI(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var s=n.bandwidth||393216,l=r.bandwidth||t.bandwidth-s;0>=l&&(l=t.bandwidth),e.g[n.id]=s,e.g[r.id]=l}}function lI(e,t){e.g[t.id]=t.bandwidth||2048}function rw(e,t){return e=e.g[t],e==null&&(e=0),e}function ti(e){var t=this;if(e&&e.constructor!=Te)throw new re(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.xb()):(this.h=ta(),this.g=new nn),this.i=[],this.j=[];var n=!e;this.l=new zs(function(){var r,s,l,c,d;return z(function(p){switch(p.g){case 1:return k(p,Promise.all(t.j.map(function(w){return D0(w)})),2);case 2:for(r=function(){},s=[],l=b(t.i),c=l.next();!c.done;c=l.next())d=c.value,s.push(d.then(r,r));return k(p,Promise.all(s),3);case 3:if(!n){p.u(4);break}return k(p,t.g.destroy(),4);case 4:t.h=null,t.g=null,V(p)}})})}function j0(){if(Io())e:{for(var e=b(al.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}S=ti.prototype,S.destroy=function(){return this.l.destroy()},S.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=$f(e,t)),Rr(this.h,e)},S.getConfiguration=function(){var e=ta();return Rr(e,this.h,ta()),e},S.xb=function(){return this.g},S.store=function(e,t,n){var r=this,s=this.getConfiguration(),l=new H2(this.g);return this.j.push(l),t=fI(this,e,t||{},function(){var c;return z(function(d){return d.g==1?n?d.u(2):k(d,Tp(e,r.g,s.manifest.retryParameters),3):(d.g!=2&&(n=d.h),c=$y(e,n||null),d.return(c()))})},s,l),t=new Dn(t,function(){return D0(l)}),t.finally(function(){jt(r.j,l)}),TI(this,t)};function fI(e,t,n,r,s,l){var c,d,p,w,T,E,I,A,R,D,L,F,U,q;return z(function(N){switch(N.g){case 1:return Hc(),d=c=null,p=new Ii,E=T=w=null,Q(N,2,3),k(N,r(),5);case 5:return c=N.h,k(N,xI(e,t,c,s),6);case 6:if(I=N.h,ai(e),A=!I.presentationTimeline.V()&&!I.presentationTimeline.kc(),!A)throw new re(2,9,9005,t);return k(N,e.yc(I,function(H){E=E||H},s),7);case 7:if(d=N.h,ai(e),E)throw E;return k(N,hI(I,d,s),8);case 8:return k(N,p.init(),9);case 9:return ai(e),k(N,q2(p),10);case 10:return w=N.h,ai(e),R=dI(d,I,t,n,s,l),D=R.ui,L=R.Xf,k(N,w.Ja.addManifests([D]),11);case 11:if(F=N.h,ai(e),T=F[0],ai(e),E)throw E;return k(N,cI(e,L,T,D,l,s,w.Ja,I,d),12);case 12:return ai(e),lw(I,D,d,s),k(N,w.Ja.updateManifest(T,D),13);case 13:return ai(e),U=new Go("manifest",w.path.nb,w.path.Ja,T),N.return(B0(U,D));case 3:return W(N),k(N,p.destroy(),14);case 14:if(!c){N.u(15);break}return k(N,c.stop(),15);case 15:if(!d){N.u(17);break}return k(N,d.destroy(),17);case 17:Z(N,0);break;case 2:if(q=te(N),T==null){N.u(19);break}return k(N,sw(T),19);case 19:throw E||q}})}function cI(e,t,n,r,s,l,c,d,p){var w,T,E,I,A,R,D,L,F,U;return z(function(q){switch(q.g){case 1:if(w={},T=0,E=function(N,H){var Y,oe,ae,me,ue,le,he;return z(function(be){if(be.g==1){for(Y=b(N),oe=Y.next(),ae={};!oe.done;ae={Ac:void 0},oe=Y.next())ae.Ac=oe.value,me=j3(ae.Ac,l),ue=ae.Ac.i,le=ae.Ac.h,he=function(Ce){return function(ke){var Oe,Ie,Fe;return z(function(vt){if(vt.g==1)return k(vt,c.addSegments([{data:ke}]),2);Oe=vt.h,ai(e),Ie=Ce.Ac.g,Fe=L0(Ie),w[Fe]=Oe[0],T+=ke.byteLength,V(vt)})}}(ae),$3(s,ae.Ac.groupId,me,ue,le,he);return k(be,z3(s),2)}return H?(ai(e),lw(d,r,p,l),k(be,c.updateManifest(n,r),0)):be.u(0)})},I=!1,Q(q,2),!F0(d)||!I||uw(d)){q.u(4);break}return k(q,E(t.filter(function(N){return N.h}),!0),5);case 5:return ai(e),t=t.filter(function(N){return!N.h}),A=w,R=T,w={},T=0,k(q,aw(c,n,r,A,R,function(){return ai(e)}),6);case 6:ai(e);case 4:if(I){q.u(7);break}return k(q,E(t,!1),8);case 8:return ai(e),D=w,L=T,w={},T=0,k(q,aw(c,n,r,D,L,function(){return ai(e)}),9);case 9:ai(e);case 7:J(q,0);break;case 2:return F=te(q),U=Object.values(w),k(q,c.removeSegments(U,function(){}),10);case 10:throw F}})}function sw(e){var t,n,r,s;return z(function(l){switch(l.g){case 1:return t=new Ii,k(l,t.init(),2);case 2:return k(l,q2(t),3);case 3:return n=l.h,r=new Go("manifest",n.path.nb,n.path.Ja,e),k(l,t.destroy(),4);case 4:return s=new ti,k(l,s.remove(r.toString()),0)}})}function aw(e,t,n,r,s,l){var c,d,p,w,T,E,I,A,R,D,L;return z(function(F){switch(F.g){case 1:for(c=!1,Q(F,2),d=!0,p=b(n.streams),w=p.next();!w.done;w=p.next())for(T=w.value,E=b(T.segments),I=E.next();!I.done;I=E.next())A=I.value,R=A.pendingSegmentRefId?r[A.pendingSegmentRefId]:null,R!=null&&(A.dataKey=R,A.pendingSegmentRefId=void 0),R=A.pendingInitSegmentRefId?r[A.pendingInitSegmentRefId]:null,R!=null&&(A.initSegmentKey=R,A.pendingInitSegmentRefId=void 0),A.pendingSegmentRefId&&(d=!1),A.pendingInitSegmentRefId&&(d=!1);return n.size+=s,d&&(n.isIncomplete=!1),k(F,e.updateManifest(t,n),4);case 4:c=!0,l(),J(F,0);break;case 2:return D=te(F),k(F,sw(t),5);case 5:if(c){F.u(6);break}return L=Object.values(r),k(F,e.removeSegments(L,function(){}),6);case 6:throw D}})}function hI(e,t,n){var r,s,l,c,d,p,w,T,E,I,A,R,D,L,F,U,q,N,H,Y,oe,ae,me,ue,le,he,be,Ce,ke;return z(function(Oe){switch(Oe.g){case 1:return r={width:1/0,height:1/0},cb(e,n.restrictions,r),k(Oe,Vg(t,e,n.offline.usePersistentLicense,n.drm.preferredKeySystems),2);case 2:for(s=[],l=n.preferredDecodingAttributes,c=n.preferredVideoCodecs,d=n.preferredAudioCodecs,$g(e,c,d,l),p=b(e.variants),w=p.next();!w.done;w=p.next())T=w.value,s.push(Us(T));for(E=b(e.textStreams),I=E.next();!I.done;I=E.next())A=I.value,s.push(lf(A));for(R=b(e.imageStreams),D=R.next();!D.done;D=R.next())L=D.value,s.push(Id(L));return k(Oe,n.offline.trackSelectionCallback(s),3);case 3:for(F=Oe.h,U=e.presentationTimeline.getDuration(),q=0,N=b(F),H=N.next();!H.done;H=N.next())Y=H.value,oe=Y.bandwidth*U/8,q+=oe;return Q(Oe,4),k(Oe,n.offline.downloadSizeCallback(q),6);case 6:if(ae=Oe.h,!ae)throw new re(2,9,9014);J(Oe,5);break;case 4:throw me=te(Oe),me instanceof re?me:new re(2,9,9015);case 5:for(ue=new Set,le=new Set,he=new Set,be=b(F),Ce=be.next();!Ce.done;Ce=be.next())ke=Ce.value,ke.type=="variant"&&ue.add(ke.id),ke.type=="text"&&le.add(ke.id),ke.type=="image"&&he.add(ke.id);e.variants=e.variants.filter(function(Ie){return ue.has(Ie.id)}),e.textStreams=e.textStreams.filter(function(Ie){return le.has(Ie.id)}),e.imageStreams=e.imageStreams.filter(function(Ie){return he.has(Ie.id)}),kI(e),V(Oe)}})}function dI(e,t,n,r,s,l){var c=sI(n,t,r),d=s.offline.progressCallback;F3(l,function(A,R){c.size=R,d(c,A)},function(A,R){p&&s.offline.usePersistentLicense&&w==R&&Su(e,"cenc",A)});var p=F0(t)&&!uw(t),w=null;p&&(w=AI.get(e.g.keySystem));for(var T=new aI,E=b(t.textStreams),I=E.next();!I.done;I=E.next())T.g[I.value.id]=52;for(E=b(t.imageStreams),I=E.next();!I.done;I=E.next())lI(T,I.value);for(E=b(t.variants),I=E.next();!I.done;I=E.next())uI(T,I.value);return T=wI(l,T,t,s),l=T.streams,T=T.Xf,E=e.g,I=s.offline.usePersistentLicense,E&&I&&(E.initData=[]),{ui:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ad(),streams:l,sessionIds:I?My(e):[],drmInfo:E,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Xf:T}}function F0(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function uw(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function lw(e,t,n,r){if(t.expiration=n.ad(),n=My(n),t.sessionIds=r.offline.usePersistentLicense?n:[],F0(e)&&r.offline.usePersistentLicense&&!n.length)throw new re(2,9,9007)}S.remove=function(e){return $0(this,pI(this,e))};function pI(e,t){var n,r,s,l,c,d;return z(function(p){switch(p.g){case 1:if(Hc(),n=U0(t),n==null||n.g!="manifest")throw new re(2,9,9004,t);return r=n,s=new Ii,se(p,2),k(p,s.init(),4);case 4:return k(p,$c(s,r.nb(),r.Ja()),5);case 5:return l=p.h,k(p,l.getManifests([r.key()]),6);case 6:return c=p.h,d=c[0],k(p,Promise.all([mI(e,d,s),gI(l,r,d)]),2);case 2:return W(p),k(p,s.destroy(),8);case 8:Z(p,0)}})}function fw(e,t){for(var n=[],r=b(e.streams),s=r.next();!s.done;s=r.next())s=s.value,t&&s.type=="video"?n.push({contentType:Vn(s.mimeType,s.codecs),robustness:e.drmInfo.videoRobustness}):t||s.type!="audio"||n.push({contentType:Vn(s.mimeType,s.codecs),robustness:e.drmInfo.audioRobustness});return n}function mI(e,t,n){return z(function(r){return k(r,EI(e.g,e.h.drm,n,t),0)})}function gI(e,t,n){function r(){}var s=bI(n);return B0(t,n),Promise.all([e.removeSegments(s,r),e.removeManifests([t.key()],r)])}S.Li=function(){return $0(this,yI(this))};function yI(e){var t,n,r,s,l,c,d,p,w,T;return z(function(E){switch(E.g){case 1:return Hc(),t=e.g,n=e.h.drm,r=new Ii,s=!1,se(E,2),k(E,r.init(),4);case 4:l=[],W3(r,function(I){return l.push(I)}),c=b(l),d=c.next();case 5:if(d.done){E.u(2);break}return p=d.value,k(E,p.getAll(),8);case 8:return w=E.h,k(E,iw(n,t,w),9);case 9:return T=E.h,k(E,p.remove(T),10);case 10:T.length!=w.length&&(s=!0),d=c.next(),E.u(5);break;case 2:return W(E),k(E,r.destroy(),11);case 11:Z(E,3);break;case 3:return E.return(!s)}})}S.list=function(){return $0(this,vI())};function vI(){var e,t,n;return z(function(r){switch(r.g){case 1:return Hc(),e=[],t=new Ii,se(r,2),k(r,t.init(),4);case 4:return n=Promise.resolve(),G3(t,function(s,l){n=n.then(function(){var c;return z(function(d){if(d.g==1)return k(d,l.getAllManifests(),2);c=d.h,c.forEach(function(p,w){p=B0(new Go("manifest",s.nb,s.Ja,w),p),e.push(p)}),V(d)})})}),k(r,n,2);case 2:return W(r),k(r,t.destroy(),6);case 6:Z(r,3);break;case 3:return r.return(e)}})}function xI(e,t,n,r){var s,l,c,d,p;return z(function(w){if(w.g==1)return s=null,l=e.g,c={networkingEngine:l,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(T){s=T},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){}},n.configure(r.manifest),ai(e),k(w,n.start(t,c),2);if(w.g!=3)return d=w.h,ai(e),p=cw(d),k(w,Promise.all(Dd(p,function(T){return T.createSegmentIndex()})),3);if(ai(e),s)throw s;return w.return(d)})}S.yc=function(e,t,n){var r=this,s;return z(function(l){return l.g==1?(s=new Tf({Lb:r.g,onError:t,ee:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),s.configure(n.drm),k(l,$b(s,e.variants,n.offline.usePersistentLicense),2)):l.g!=3?k(l,Iy(s),3):l.return(s)})};function wI(e,t,n,r){var s=new Map,l=cw(n),c=new Map;l=b(l);for(var d=l.next();!d.done;d=l.next()){d=d.value;var p=SI(e,t,n,d,r,s);c.set(d.id,p)}for(e=b(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&c.get(t.audio.id).variantIds.push(t.id),t.video&&c.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(c.values()),Xf:Array.from(s.values())}}function SI(e,t,n,r,s,l){var c={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,external:r.external,fastSwitching:r.fastSwitching},d=s.offline.numberOfParallelDownloads,p=0;return CI(r,n.presentationTimeline.mb(),function(w){var T=L0(w),E=void 0;if(!l.has(T)){var I=w.endTime-w.startTime;I=rw(t,r.id)*I,I=V2(e.g,I),l.set(T,new $2(w,I,p,!1))}w.$&&(E=L0(w.$),l.has(E)||(I=.5*rw(t,r.id),I=V2(e.g,I),l.set(E,new $2(w.$,I,p,!0)))),c.segments.push({pendingInitSegmentRefId:E,initSegmentKey:E?0:null,startTime:w.startTime,endTime:w.endTime,appendWindowStart:w.appendWindowStart,appendWindowEnd:w.appendWindowEnd,timestampOffset:w.timestampOffset,tilesLayout:w.tilesLayout,pendingSegmentRefId:T,dataKey:0,mimeType:w.mimeType,codecs:w.codecs}),p=(p+1)%d}),c}function CI(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}function ai(e){if(e.l.g)throw new re(2,9,7001)}function Hc(){if(!j0())throw new re(2,9,9e3)}function $0(e,t){return z(function(n){return n.g==1?(e.i.push(t),se(n,2),k(n,t,4)):n.g!=2?n.return(n.h):(W(n),jt(e.i,t),Z(n,0))})}function TI(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){jt(e.i,n)})}function bI(e){var t=new Set;e=b(e.streams);for(var n=e.next();!n.done;n=e.next()){n=b(n.value.segments);for(var r=n.next();!r.done;r=n.next())r=r.value,r.initSegmentKey!=null&&t.add(r.initSegmentKey),t.add(r.dataKey)}return Array.from(t)}function EI(e,t,n,r){var s,l,c;return z(function(d){return d.g==1?r.drmInfo?(s=X3(n),l=r.sessionIds.map(function(p){return{sessionId:p,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:fw(r,!1),videoCapabilities:fw(r,!0)}}),k(d,iw(t,e,l),2)):d.return():d.g!=3?(c=d.h,k(d,s.remove(c),3)):k(d,s.add(l.filter(function(p){return!c.includes(p.sessionId)})),0)})}function cw(e){for(var t=new Set,n=b(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=b(e.imageStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=b(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function kI(e){e.variants.map(function(l){return l.video});var t=new Set(e.variants.map(function(l){return l.audio}));e=e.textStreams;for(var n=b(t),r=n.next();!r.done;r=n.next()){r=b(t);for(var s=r.next();!s.done;s=r.next());}for(t=b(e),n=t.next();!n.done;n=t.next())for(n=b(e),r=n.next();!r.done;r=n.next());}we("shaka.offline.Storage",ti),ti.deleteAll=function(){var e;return z(function(t){return t.g==1?(e=new Ii,se(t,2),k(t,q3(e),2)):t.g!=5?(W(t),k(t,e.destroy(),5)):Z(t,0)})},ti.prototype.list=ti.prototype.list,ti.prototype.removeEmeSessions=ti.prototype.Li,ti.prototype.remove=ti.prototype.remove,ti.prototype.store=ti.prototype.store,ti.prototype.getNetworkingEngine=ti.prototype.xb,ti.prototype.getConfiguration=ti.prototype.getConfiguration,ti.prototype.configure=ti.prototype.configure,ti.prototype.destroy=ti.prototype.destroy,ti.support=j0;var AI=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95");Fp.offline=j0;function ii(){}function wi(e,t){for(e={priority:t||0,callback:e},t=0;t<ll.length;t++)if(ll[t].priority<e.priority){ll.splice(t,0,e);return}ll.push(e)}we("shaka.polyfill",ii),ii.register=wi,ii.installAll=function(){for(var e=b(ll),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){je("Error installing polyfill!",n)}}};var ll=[];function fl(){this.g=new ds}function hw(){h.AbortController||(h.AbortController=fl,h.AbortSignal=ds)}fl.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new $e("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},y.Object.defineProperties(fl.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),ii.AbortController=fl,fl.install=hw;function ds(){this.h=!1,this.g=void 0,this.onabort=null,this.i=new Xt}ds.prototype.addEventListener=function(e,t,n){return this.i.addEventListener(e,t,n)},ds.prototype.removeEventListener=function(e,t,n){return this.i.removeEventListener(e,t,n)},ds.prototype.dispatchEvent=function(e){return this.i.dispatchEvent(e)},ds.prototype.throwIfAborted=function(){if(this.h)throw this.g},y.Object.defineProperties(ds.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),wi(hw);function dw(){}function pw(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=b(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())II(t.value)}function II(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}ii.Aria=dw,dw.install=pw,wi(pw);function mw(){}function gw(){PS()}ii.EncryptionScheme=mw,mw.install=gw,wi(gw,-2);function yw(){}function vw(){if(h.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Ea),document.addEventListener("webkitfullscreenerror",Ea),document.addEventListener("mozfullscreenchange",Ea),document.addEventListener("mozfullscreenerror",Ea),document.addEventListener("MSFullscreenChange",Ea),document.addEventListener("MSFullscreenError",Ea)}}function Ea(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}ii.Fullscreen=yw,yw.install=vw,wi(vw);function Gc(){}function xw(){var e=!0;!Gi()||Gi()&&of()||Gi()&&Qt("Fuchsia")||(e=!1),(Ms()||tf()||$o()||Fo()||jo()||Qt("PC=EOS")||nf())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),ww=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=MI)}function MI(e){var t,n,r,s,l,c,d,p,w,T,E;return z(function(I){switch(I.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},n=e.video,r=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(s=n.contentType,l=cu(s),!l)||r&&(c=r.contentType,d=cu(c),!d))return I.return(t)}else return I.return(t);I.u(2);break}if(!Io())return I.return(t);if(!n){I.u(3);break}return k(I,_I(n),4);case 4:if(p=I.h,!p)return I.return(t);case 3:if(r){var A=r.contentType;if(Gi()&&r.spatialRendering&&(A+="; spatialRendering=true"),w=ct(A),!w)return I.return(t)}case 2:return e.keySystemConfiguration?(T=e.keySystemConfiguration,k(I,RI(n,r,T),6)):(t.supported=!0,I.return(t));case 6:(E=I.h)&&(t.supported=!0,t.keySystemAccess=E);case 5:return I.return(t)}})}function _I(e){var t,n;return z(function(r){return r.g==1?Gi()?k(r,LI(e),3):jo()?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width,t+="; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.bitrate&&(t+="; bitrate="+e.bitrate),r.return(ct(t))):r.u(2):r.g!=2?(n=r.h,r.return(n)):r.return(ct(e.contentType))})}function RI(e,t,n){var r,s,l,c,d,p,w,T,E;return z(function(I){switch(I.g){case 1:if(r=[],s=[],n.audio&&(l={robustness:n.audio.robustness||"",contentType:t.contentType},jo()&&t.contentType.includes('codecs="ac-3"')&&(l.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(l.encryptionScheme=n.audio.encryptionScheme),r.push(l)),n.video&&(c={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(c.encryptionScheme=n.video.encryptionScheme),s.push(c)),d={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(d.audioCapabilities=r),s.length&&(d.videoCapabilities=s),p=e?e.contentType:"",w=t?t.contentType:"",T=n.keySystem,E=null,Q(I,2),Zl.has(p+"#"+w+"#"+T)){E=Zl.get(p+"#"+w+"#"+T)||null,I.u(4);break}return k(I,navigator.requestMediaKeySystemAccess(n.keySystem,[d]),5);case 5:E=I.h,Zl.set(p+"#"+w+"#"+T,E);case 4:J(I,3);break;case 2:te(I);case 3:return I.return(E)}})}function LI(e){var t,n;return z(function(r){return r.g==1?h.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(t=e.contentType,e.width&&e.height&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(t+="; framerate="+e.framerate),e.transferFunction==="pq"&&(t+="; eotf=smpte2084"),n=!1,t in Wc?(n=Wc[t],r.u(2)):k(r,cast.__platform__.canDisplayType(t),3)):r.return(ct(e.contentType)):(r.g!=2&&(n=r.h,Wc[t]=n),r.return(n))})}ii.MediaCapabilities=Gc,Gc.install=xw;var ww=null;Gc.originalMcap=ww;var Wc={};Gc.memoizedCanDisplayTypeRequests_=Wc,wi(xw,-1);function Sw(){}function Cw(){var e=_s();(h.MediaSource||h.ManagedMediaSource)&&(e&&h.MediaSource?10>=e?h.MediaSource=null:12>=e?(z0(),Tw()):15>=e&&z0():Qt("DT_STB_BCM")?(z0(),Tw()):(Jl()||du()||Qt("Tizen 4"))&&PI()),(h.MediaSource||h.ManagedMediaSource)&&DI(),h.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&OI()}function z0(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,Me.apply(0,arguments));return t.abort=function(){},t}}function Tw(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function DI(){if(h.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return sf(n)!="mp2t"&&e(n)}}if(h.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);h.ManagedMediaSource.isTypeSupported=function(n){return sf(n)!="mp2t"&&t(n)}}}function PI(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(n){return Ps(n)!="opus"&&e(n)},h.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);h.ManagedMediaSource.isTypeSupported=function(n){return Ps(n)!="opus"&&t(n)}}}function OI(){var e=MediaSource.isTypeSupported;Fo()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(c){return c.startsWith("codecs=")});if(0>r)return e(t);var s=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),l=s.findIndex(function(c){return c.startsWith("vp09")});return 0<=l&&(s[l]="vp9",n[r]='codecs="'+s.join(",")+'"',t=n.join("; ")),e(t)})}ii.MediaSource=Sw,Sw.install=Cw,wi(Cw);function bw(){}function Ew(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?NI():h.orientation!=null&&UI())}function NI(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function UI(){function e(){switch(h.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new Xc;screen.orientation=t,e(),h.addEventListener("orientationchange",function(){e();var n=new $e("change");t.dispatchEvent(n)})}ii.Orientation=bw,bw.install=Ew;function Xc(){Xt.call(this),this.type="",this.angle=0}X(Xc,Xt),Xc.prototype.lock=function(e){function t(r){return screen.lockOrientation?screen.lockOrientation(r):screen.mozLockOrientation?screen.mozLockOrientation(r):screen.msLockOrientation?screen.msLockOrientation(r):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Xc.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},wi(Ew);function V0(){}var H0,G0,W0,X0,q0,K0;function BI(e,t){try{var n=new qc(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function jI(e){var t=this.mediaKeys;return t&&t!=e&&kw(t,null),delete this.mediaKeys,(this.mediaKeys=e)?kw(e,this):Promise.resolve()}function FI(e){if(e=Ae(e.initData),wt(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=qo(e.subarray(4),!0),e=Mo(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=ie(e),this.dispatchEvent(t)}ii.PatchedMediaKeysApple=V0,V0.uninstall=function(){H0&&(H0=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",G0),HTMLMediaElement.prototype.setMediaKeys=W0,h.MediaKeys=X0,h.MediaKeySystemAccess=q0,navigator.requestMediaKeySystemAccess=K0,G0=K0=W0=q0=X0=null,h.shakaMediaKeysPolyfill="")},V0.install=function(e){h.HTMLVideoElement&&h.WebKitMediaKeys&&(e!==void 0&&e&&(H0=!0,G0=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),W0=HTMLMediaElement.prototype.setMediaKeys,X0=h.MediaKeys,q0=h.MediaKeySystemAccess,K0=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=jI,h.MediaKeys=cl,h.MediaKeySystemAccess=qc,navigator.requestMediaKeySystemAccess=BI,h.shakaMediaKeysPolyfill=$I)};function qc(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=b(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,s=!1;if(n.audioCapabilities)for(var l=b(n.audioCapabilities),c=l.next();!c.done;c=l.next())c=c.value,c.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(t.audioCapabilities.push(c),s=!0));if(n.videoCapabilities)for(n=b(n.videoCapabilities),l=n.next();!l.done;l=n.next())l=l.value,l.contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(t.videoCapabilities.push(l),s=!0));r||(s=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=s?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}qc.prototype.createMediaKeys=function(){var e=new cl(this.keySystem);return Promise.resolve(e)},qc.prototype.getConfiguration=function(){return this.g};function cl(e){this.h=new WebKitMediaKeys(e),this.g=new Ct}cl.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Y0(this.h)},cl.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function kw(e,t){if(e.g.Ra(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",FI);try{return Qs(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}cl.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Y0(e){Xt.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Ct,this.sessionId="",this.expiration=NaN,this.closed=new Zt,this.keyStatuses=new Aw}X(Y0,Xt),S=Y0.prototype,S.generateRequest=function(e,t){var n=this;this.h=new Zt;try{var r=this.l.createSession("video/mp4",Ae(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(s){n.h&&(n.h.resolve(),n.h=null),s=new Map().set("messageType",n.keyStatuses.Yb()==null?"license-request":"license-renewal").set("message",ie(s.message)),s=new $e("message",s),n.dispatchEvent(s)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(Kc(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var s=Error("EME PatchedMediaKeysApple key error");if(s.errorCode=n.i.error,n.h!=null)n.h.reject(s),n.h=null;else if(n.g!=null)n.g.reject(s),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Kc(n,"output-not-allowed");break;default:Kc(n,"internal-error")}}),Kc(this,"status-pending")}catch(s){this.h.reject(s)}return this.h},S.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},S.update=function(e){this.g=new Zt;try{this.i.update(Ae(e))}catch(t){this.g.reject(t)}return this.g},S.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ra()}catch(e){this.closed.reject(e)}return this.closed},S.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Kc(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new $e("keystatuseschange"),e.dispatchEvent(t)}function Aw(){this.size=0,this.g=void 0}S=Aw.prototype,S.Yb=function(){return this.g},S.forEach=function(e){this.g&&e(this.g,Ql.value())},S.get=function(e){if(this.has(e))return this.g},S.has=function(e){var t=Ql.value();return!!(this.g&&Rn(e,t))},S.entries=function(){},S.keys=function(){},S.values=function(){};var $I="apple";function Iw(){}function Mw(){h.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||du()||Qt("Tizen 4")||Qt("Tizen 5.0")||ef())&&(MediaKeys.prototype.setServerCertificate=zI)}function zI(){return Promise.resolve(!1)}ii.PatchedMediaKeysCert=Iw,Iw.install=Mw,wi(Mw);function _w(){}function Rw(){!h.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=VI,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=HI,h.MediaKeys=Yc,h.MediaKeySystemAccess=Q0,h.shakaMediaKeysPolyfill=GI)}function VI(){return Promise.reject(Error("The key system specified is not supported."))}function HI(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}ii.PatchedMediaKeysNop=_w,_w.install=Rw;function Yc(){throw new TypeError("Illegal constructor.")}Yc.prototype.createSession=function(){},Yc.prototype.setServerCertificate=function(){},Yc.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Q0(){throw this.keySystem="",new TypeError("Illegal constructor.")}Q0.prototype.getConfiguration=function(){},Q0.prototype.createMediaKeys=function(){};var GI="nop";wi(Rw,-10);function Lw(){}function Dw(){if(!(!h.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)nm="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=WI,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=XI,h.MediaKeys=hl,h.MediaKeySystemAccess=Qc,h.shakaMediaKeysPolyfill=qI}}function Z0(e){var t=nm;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function WI(e,t){try{var n=new Qc(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function XI(e){var t=this.mediaKeys;return t&&t!=e&&Pw(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Pw(e,this),Promise.resolve()}ii.PatchedMediaKeysWebkit=Lw,Lw.install=Dw;function Qc(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,s=document.getElementsByTagName("video");s=s.length?s[0]:document.createElement("video"),t=b(t);for(var l=t.next();!l.done;l=t.next()){l=l.value;var c={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:l.initDataTypes,sessionTypes:["temporary"],label:l.label},d=!1;if(l.audioCapabilities)for(var p=b(l.audioCapabilities),w=p.next();!w.done;w=p.next())w=w.value,w.contentType&&(d=!0,s.canPlayType(w.contentType.split(";")[0],this.g)&&(c.audioCapabilities.push(w),r=!0));if(l.videoCapabilities)for(p=b(l.videoCapabilities),w=p.next();!w.done;w=p.next())w=w.value,w.contentType&&(d=!0,s.canPlayType(w.contentType,this.g)&&(c.videoCapabilities.push(w),r=!0));if(d||(r=s.canPlayType("video/mp4",this.g)||s.canPlayType("video/webm",this.g)),l.persistentState=="required"&&(n?(c.persistentState="required",c.sessionTypes=["persistent-license"]):r=!1),r){this.h=c;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Qc.prototype.createMediaKeys=function(){var e=new hl(this.g);return Promise.resolve(e)},Qc.prototype.getConfiguration=function(){return this.h};function hl(e){this.l=e,this.h=null,this.g=new Ct,this.i=[],this.j=new Map}function Pw(e,t){e.h=t,e.g.Ra();var n=nm;t&&(e.g.D(t,n+"needkey",function(r){var s=new CustomEvent("encrypted");s.initDataType="cenc",s.initData=ie(r.initData),e.h.dispatchEvent(s)}),e.g.D(t,n+"keymessage",function(r){var s=J0(e,r.sessionId);s&&(r=new Map().set("messageType",s.keyStatuses.Yb()==null?"licenserequest":"licenserenewal").set("message",r.message),r=new $e("message",r),s.h&&(s.h.resolve(),s.h=null),s.dispatchEvent(r))}),e.g.D(t,n+"keyadded",function(r){(r=J0(e,r.sessionId))&&r.ready()}),e.g.D(t,n+"keyerror",function(r){var s=J0(e,r.sessionId);if(s){var l=Error("EME v0.1b key error"),c=r.errorCode;c.systemCode=r.systemCode,l.errorCode=c,!r.sessionId&&s.h?(r.systemCode==45&&(l.message="Unsupported session type."),s.h.reject(l),s.h=null):r.sessionId&&s.g?(s.g.reject(l),s.g=null):(l=r.systemCode,r.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Zc(s,"output-restricted"):l==1?Zc(s,"expired"):Zc(s,"internal-error"))}}))}hl.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new em(t,this.l,e),this.i.push(e),e},hl.prototype.setServerCertificate=function(){return Promise.resolve(!1)},hl.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function J0(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function em(e,t,n){Xt.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Zt,this.keyStatuses=new Nw}X(em,Xt),S=em.prototype,S.ready=function(){Zc(this,"usable"),this.g&&this.g.resolve(),this.g=null};function Ow(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var r=Ae(Mo("LOAD_SESSION|"+n));else{var s=Mo("PERSISTENT|");r=An(s,t)}else r=Ae(t)}catch(c){return Promise.reject(c)}e.h=new Zt;var l=Z0("generateKeyRequest");try{e.j[l](e.i,r)}catch(c){if(c.name!="InvalidStateError")return e.h=null,Promise.reject(c);new Mt(function(){try{e.j[l](e.i,r)}catch(d){e.h.reject(d),e.h=null}}).Y(.01)}return e.h}function tm(e,t,n){if(e.g)e.g.then(function(){return tm(e,t,n)}).catch(function(){return tm(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var r=fn(n),s=JSON.parse(r);s.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=oo(s.keys[0].k),s=oo(s.keys[0].kid)}else r=Ae(n),s=null;var l=Z0("addKey");try{e.j[l](e.i,r,s,e.sessionId)}catch(c){e.g.reject(c),e.g=null}}}function Zc(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new $e("keystatuseschange"),e.dispatchEvent(t)}S.generateRequest=function(e,t){return Ow(this,t,null)},S.load=function(e){return this.l=="persistent-license"?Ow(this,null,e):Promise.reject(Error("Not a persistent session."))},S.update=function(e){var t=new Zt;return tm(this,t,e),t},S.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Z0("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},S.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function Nw(){this.size=0,this.g=void 0}S=Nw.prototype,S.Yb=function(){return this.g},S.forEach=function(e){this.g&&e(this.g,Ql.value())},S.get=function(e){if(this.has(e))return this.g},S.has=function(e){var t=Ql.value();return!!(this.g&&Rn(e,t))},S.entries=function(){},S.keys=function(){},S.values=function(){};var nm="",qI="webkit";wi(Dw);function Uw(){}function Bw(){if(h.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=YI,Object.defineProperty(e,"disablePictureInPicture",{get:ZI,set:JI,enumerable:!0,configurable:!0}),document.exitPictureInPicture=QI,document.addEventListener("webkitpresentationmodechanged",KI,!0))}}function KI(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function YI(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function QI(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function ZI(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function JI(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}ii.PiPWebkit=Uw,Uw.install=Bw,wi(Bw);function jw(){}function Fw(){h.crypto&&("randomUUID"in h.crypto||(h.crypto.randomUUID=eM))}function eM(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}ii.RandomUUID=jw,jw.install=Fw,wi(Fw);function $w(){}function zw(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:tM})}function tM(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}ii.Symbol=$w,$w.install=zw,wi(zw);function Vw(){}function Hw(){if(h.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}ii.VideoPlayPromise=Vw,Vw.install=Hw,wi(Hw);function Gw(){}function Ww(){if(h.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||ef())&&(e.getVideoPlaybackQuality=nM)}}function nM(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}ii.VideoPlaybackQuality=Gw,Gw.install=Ww,wi(Ww);function Xw(){}function qw(){if(!h.VTTCue&&h.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=im;else if(t==6)e=iM;else{try{var n=!!im(1,2,"")}catch{n=!1}n&&(e=im)}e&&(h.VTTCue=function(r,s,l){return e(r,s,l)})}}function im(e,t,n){return new h.TextTrackCue(e,t,n)}function iM(e,t,n){return new h.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}ii.VTTCue=Xw,Xw.install=qw,wi(qw);function qi(){}qi.prototype.parseInit=function(){},qi.prototype.setSequenceMode=function(){},qi.prototype.setManifestType=function(){},qi.prototype.parseMedia=function(e,t){var n=null,r=[];e=fn(e).split(/\r?\n/),e=b(e);for(var s=e.next();!s.done;s=e.next())if((s=s.value)&&!/^\s+$/.test(s)&&(s=oM.exec(s))){var l=rM.exec(s[1]);l=60*parseInt(l[1],10)+parseFloat(l[2].replace(",",".")),s=new Be(l,t.segmentEnd?t.segmentEnd:l+2,s[2]),n&&(n.endTime=l,r.push(n)),n=s}return n&&r.push(n),r},we("shaka.text.LrcTextParser",qi),qi.prototype.parseMedia=qi.prototype.parseMedia,qi.prototype.setManifestType=qi.prototype.setManifestType,qi.prototype.setSequenceMode=qi.prototype.setSequenceMode,qi.prototype.parseInit=qi.prototype.parseInit;var oM=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,rM=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Hn["application/x-subtitle-lrc"]=function(){return new qi};function ji(){}ji.prototype.parseInit=function(){},ji.prototype.setSequenceMode=function(){},ji.prototype.setManifestType=function(){},ji.prototype.parseMedia=function(e,t,n){var r=fn(e);if(e=[],r=="")return e;var s=Gs(r,"tt");if(!s)throw new re(2,2,2005,"Failed to parse TTML.");if(r=wo(s,"body")[0],!r)return[];var l=Vo(s,dl,"frameRate"),c=Vo(s,dl,"subFrameRate"),d=Vo(s,dl,"frameRateMultiplier"),p=Vo(s,dl,"tickRate"),w=Vo(s,dl,"cellResolution"),T=s.attributes["xml:space"]||"default",E=Vo(s,th,"extent");if(T!="default"&&T!="preserve")throw new re(2,2,2005,"Invalid xml:space value: "+T);T=T=="default",l=new uM(l,c,d,p),w=w&&(w=/^(\d+) (\d+)$/.exec(w))?{dc:parseInt(w[1],10),rows:parseInt(w[2],10)}:null,c=(c=wo(s,"metadata")[0])?c.children:[],d=wo(s,"style"),s=wo(s,"region"),p=[];for(var I=b(s),A=I.next();!A.done;A=I.next()){var R=A.value;A=new ve;var D=R.attributes["xml:id"];if(D){A.id=D;var L=null;E&&(L=am.exec(E)||um.exec(E)),D=L?Number(L[1]):null,L=L?Number(L[2]):null;var F,U=Jc(R,d,"extent");if(U){var q=(F=am.exec(U))||um.exec(U);q!=null&&(A.width=Number(q[1]),A.height=Number(q[2]),F||(D!=null&&(A.width=100*A.width/D),L!=null&&(A.height=100*A.height/L)),A.widthUnits=F||D!=null?fe:0,A.heightUnits=F||L!=null?fe:0)}(R=Jc(R,d,"origin"))&&(q=(F=am.exec(R))||um.exec(R),q!=null&&(A.viewportAnchorX=Number(q[1]),A.viewportAnchorY=Number(q[2]),F?U||(A.width=100-A.viewportAnchorX,A.widthUnits=fe,A.height=100-A.viewportAnchorY,A.heightUnits=fe):(L!=null&&(A.viewportAnchorY=100*A.viewportAnchorY/L),D!=null&&(A.viewportAnchorX=100*A.viewportAnchorX/D)),A.viewportAnchorUnits=F||D!=null?fe:0))}else A=null;A&&p.push(A)}if(on(r,"p").length)throw new re(2,2,2001,"<p> can only be inside <div> in TTML");for(E=b(on(r,"div")),I=E.next();!I.done;I=E.next())if(on(I.value,"span").length)throw new re(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Kw(r,t,l,c,d,s,p,T,w,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function Kw(e,t,n,r,s,l,c,d,p,w,T,E){var I=w;if(vf(e)){if(!T)return null;var A={tagName:"span",children:[Gn(e)],attributes:{},parent:null}}else A=e;for(var R=null,D=b(rS),L=D.next();!L.done&&!(R=eh(A,"backgroundImage",r,"#",L.value)[0]);L=D.next());D=null;var F=Vo(A,rS,"backgroundImage");if(E&&F&&!F.startsWith("#")&&(L=new Ln(E),F=new Ln(F),(L=L.resolve(F).toString())&&(D=L)),(e.tagName=="p"||R||D)&&(T=!0),e=T,L=(A.attributes["xml:space"]||(d?"default":"preserve"))=="default",F=A.children.every(vf),d=[],!F)for(var U=b(A.children),q=U.next();!q.done;q=U.next())(q=Kw(q.value,t,n,r,s,l,c,L,p,A,T,E))&&d.push(q);if(r=w!=null,E=Gn(A),E=A.children.length&&E&&/\S/.test(E),q=A.attributes.begin||A.attributes.end||A.attributes.dur,!(q||E||A.tagName=="br"||d.length!=0||r&&!L))return null;for(U=Zw(A,n),E=U.start,U=U.end;I&&I.tagName&&I.tagName!="tt";)U=aM(I,n,E,U),E=U.start,U=U.end,I=I.parent;if(E==null&&(E=0),E+=t.periodStart,U=U==null?1/0:U+t.periodStart,E=Math.max(E,t.segmentStart),U=Math.min(U,t.segmentEnd),!q&&0<d.length)for(E=1/0,U=0,t=b(d),n=t.next();!n.done;n=t.next())n=n.value,E=Math.min(E,n.startTime),U=Math.max(U,n.endTime);if(A.tagName=="br")return s=new Be(E,U,""),s.lineBreak=!0,s;if(t="",F&&(t=Ti(Gn(A)||""),L&&(t=t.replace(/\s+/g," "))),t=new Be(E,U,t),t.nestedCues=d,T||(t.isContainer=!0),p&&(t.cellResolution=p),p=eh(A,"region",l,"")[0],A.attributes.region&&p&&p.attributes["xml:id"]){var N=p.attributes["xml:id"];t.region=c.filter(function(H){return H.id==N})[0]}return c=p,w&&r&&!A.attributes.region&&!A.attributes.style&&(c=eh(w,"region",l,"")[0]),sM(t,A,c,R,D,s,e,d.length==0),t}function sM(e,t,n,r,s,l,c,d){if(c=c||d,ui(t,n,l,"direction",c)=="rtl"&&(e.direction="rtl"),d=ui(t,n,l,"writingMode",c),d=="tb"||d=="tblr"?e.writingMode="vertical-lr":d=="tbrl"?e.writingMode="vertical-rl":d=="rltb"||d=="rl"?e.direction="rtl":d&&(e.direction=fi),(d=ui(t,n,l,"textAlign",!0))?(e.positionAlign=cM[d],e.lineAlign=fM[d],e.textAlign=$n[d.toUpperCase()]):e.textAlign=gn,(d=ui(t,n,l,"displayAlign",!0))&&(e.displayAlign=kt[d.toUpperCase()]),(d=ui(t,n,l,"color",c))&&(e.color=d),(d=ui(t,n,l,"backgroundColor",c))&&(e.backgroundColor=d),(d=ui(t,n,l,"border",c))&&(e.border=d),d=ui(t,n,l,"fontFamily",c))switch(d){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=d.split(",").filter(function(p){return p!="default"}).join(",")}switch((d=ui(t,n,l,"fontWeight",c))&&d=="bold"&&(e.fontWeight=700),d=ui(t,n,l,"wrapOption",c),e.wrapLine=!(d&&d=="noWrap"),(d=ui(t,n,l,"lineHeight",c))&&d.match(ka)&&(e.lineHeight=d),(d=ui(t,n,l,"fontSize",c))&&(d.match(ka)||d.match(lM))&&(e.fontSize=d),(d=ui(t,n,l,"fontStyle",c))&&(e.fontStyle=ks[d.toUpperCase()]),r?(s=r.attributes.imageType||r.attributes.imagetype,d=r.attributes.encoding,r=Gn(r).trim(),s=="PNG"&&d=="Base64"&&r&&(e.backgroundImage="data:image/png;base64,"+r)):s&&(e.backgroundImage=s),(r=ui(t,n,l,"textOutline",c))&&(r=r.split(" "),r[0].match(ka)?e.textStrokeColor=e.color:(e.textStrokeColor=r[0],r.shift()),r[0]&&r[0].match(ka)?e.textStrokeWidth=r[0]:e.textStrokeColor=""),(r=ui(t,n,l,"letterSpacing",c))&&r.match(ka)&&(e.letterSpacing=r),(r=ui(t,n,l,"linePadding",c))&&r.match(ka)&&(e.linePadding=r),(r=ui(t,n,l,"opacity",c))&&(e.opacity=parseFloat(r)),(r=Jc(n,l,"textDecoration"))&&Yw(e,r),(r=om(t,l,"textDecoration"))&&Yw(e,r),(r=ui(t,n,l,"textCombine",c))&&(e.textCombineUpright=r),ui(t,n,l,"ruby",c)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function Yw(e,t){t=b(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&jt(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&jt(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&jt(e.textDecoration,"overline")}}function ui(e,t,n,r,s){return s=s===void 0?!0:s,(e=om(e,n,r))?e:s?Jc(t,n,r):null}function Jc(e,t,n){if(!e)return null;var r=Vo(e,th,n);return r||Qw(e,t,n)}function om(e,t,n){var r=Vo(e,th,n);return r||Qw(e,t,n)}function Qw(e,t,n){e=eh(e,"style",t,"");for(var r=null,s=0;s<e.length;s++){var l=tr(e[s],"urn:ebu:tt:style",n);l||(l=Vo(e[s],th,n)),l||(l=om(e[s],t,n)),l&&(r=l)}return r}function eh(e,t,n,r,s){var l=[];if(!e||1>n.length)return l;var c=e;for(e=null;!e&&!(e=s?tr(c,s,t):c.attributes[t])&&(c=c.parent,c););if(t=e){for(t=b(t.split(" ")),s=t.next();!s.done;s=t.next())for(s=s.value,e=b(n),c=e.next();!c.done;c=e.next())if(c=c.value,r+c.attributes["xml:id"]==s){l.push(c);break}}return l}function aM(e,t,n,r){return e=Zw(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),r==null?r=e.end:e.start!=null&&(r+=e.start),{start:n,end:r}}function Zw(e,t){var n=rm(e.attributes.begin,t),r=rm(e.attributes.end,t);return e=rm(e.attributes.dur,t),r==null&&e!=null&&(r=n+e),{start:n,end:r}}function rm(e,t){var n=null;if(Jw.test(e)){e=Jw.exec(e),n=Number(e[1]);var r=Number(e[2]),s=Number(e[3]),l=Number(e[4]);l+=(Number(e[5])||0)/t.h,s+=l/t.frameRate,n=s+60*r+3600*n}else if(eS.test(e))n=sm(eS,e);else if(tS.test(e))n=sm(tS,e);else if(nS.test(e))e=nS.exec(e),n=Number(e[1])/t.frameRate;else if(iS.test(e))e=iS.exec(e),n=Number(e[1])/t.g;else if(oS.test(e))n=sm(oS,e);else if(e)throw new re(2,2,2001,"Could not parse cue time range in TTML");return n}function sm(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}we("shaka.text.TtmlTextParser",ji),ji.prototype.parseMedia=ji.prototype.parseMedia,ji.prototype.setManifestType=ji.prototype.setManifestType,ji.prototype.setSequenceMode=ji.prototype.setSequenceMode,ji.prototype.parseInit=ji.prototype.parseInit;function uM(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var am=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,lM=/^(\d{1,4}(?:\.\d+)?|100)%$/,ka=/^(\d+px|\d+em|\d*\.?\d+c)$/,um=/^(\d+)px (\d+)px$/,Jw=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,eS=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,tS=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,nS=/^(\d*(?:\.\d*)?)f$/,iS=/^(\d*(?:\.\d*)?)t$/,oS=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),fM={left:oi,center:"center",right:"end",start:oi,end:"end"},cM={left:"line-left",center:"center",right:"line-right"},dl=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],th=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],rS=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Hn["application/ttml+xml"]=function(){return new ji};function ni(){this.g=new ji}ni.prototype.parseInit=function(e){var t=!1;if(new tn().box("moov",Rt).box("trak",Rt).box("mdia",Rt).box("minf",Rt).box("stbl",Rt).S("stsd",Ar).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new re(2,2,2007)},ni.prototype.setSequenceMode=function(){},ni.prototype.setManifestType=function(){},ni.prototype.parseMedia=function(e,t,n){var r=this,s=!1,l=[];if(new tn().box("mdat",Vs(function(c){s=!0,l=l.concat(r.g.parseMedia(c,t,n))})).parse(e,!1),!s)throw new re(2,2,2007);return l},we("shaka.text.Mp4TtmlParser",ni),ni.prototype.parseMedia=ni.prototype.parseMedia,ni.prototype.setManifestType=ni.prototype.setManifestType,ni.prototype.setSequenceMode=ni.prototype.setSequenceMode,ni.prototype.parseInit=ni.prototype.parseInit,Hn['application/mp4; codecs="stpp"']=function(){return new ni},Hn['application/mp4; codecs="stpp.ttml"']=function(){return new ni},Hn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new ni},Hn['application/mp4; codecs="stpp.ttml.im2t"']=function(){return new ni},Hn['application/mp4; codecs="stpp.ttml.etd1"']=function(){return new ni},Hn['application/mp4; codecs="stpp.ttml.etd1|im1t"']=function(){return new ni},Hn['application/mp4; codecs="stpp.ttml.im1t|etd1"']=function(){return new ni},Hn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new ni};function Si(){this.h=!1,this.g="UNKNOWN"}Si.prototype.parseInit=function(){},Si.prototype.setSequenceMode=function(e){this.h=e},Si.prototype.setManifestType=function(e){this.g=e},Si.prototype.parseMedia=function(e,t){e=fn(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new re(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS")if(this.h){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new re(2,2,2e3);if(e=nh(new Lr(e[1])),e==null)throw new re(2,2,2e3);r=Number(r[1]);for(var s=t.segmentStart-t.periodStart;95443.7176888889<=s;)s-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}else e=t.segmentStart;for(t=[],r=b(n[0].split(`
`)),s=r.next();!s.done;s=r.next())if(s=s.value,/^Region:/.test(s)){s=new Lr(s);var l=new ve;as(s),fa(s);for(var c=as(s);c;){var d=l,p=c;(c=/^id=(.*)$/.exec(p))?d.id=c[1]:(c=/^width=(\d{1,2}|100)%$/.exec(p))?d.width=Number(c[1]):(c=/^lines=(\d+)$/.exec(p))?(d.height=Number(c[1]),d.heightUnits=2):(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(d.regionAnchorX=Number(c[1]),d.regionAnchorY=Number(c[2])):(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(p))?(d.viewportAnchorX=Number(c[1]),d.viewportAnchorY=Number(c[2])):/^scroll=up$/.exec(p)&&(d.scroll="up"),fa(s),c=as(s)}t.push(l)}for(r=new Map,sS(r),s=[],n=b(n.slice(1)),l=n.next();!l.done;l=n.next()){if(l=l.value.split(`
`),(l.length!=1||l[0])&&!/^NOTE($|[ \t])/.test(l[0])&&l[0]=="STYLE"){for(d=[],c=-1,p=1;p<l.length;p++)l[p].includes("::cue")&&(d.push([]),c=d.length-1),c!=-1&&(d[c].push(l[p]),l[p].includes("}")&&(c=-1));for(d=b(d),c=d.next();!c.done;c=d.next()){var w=c.value;c="global",(p=w[0].match(/\((.*)\)/))&&(c=p.pop()),p=w.slice(1,-1),w[0].includes("}")&&(w=/\{(.*?)\}/.exec(w[0]))&&(p=w[1].split(";")),(w=r.get(c))||(w=new Be(0,0,""));for(var T=!1,E=0;E<p.length;E++){var I=/^\s*([^:]+):\s*(.*)/.exec(p[E]);if(I){var A=I[2].trim().replace(";","");switch(I[1].trim()){case"background-color":case"background":T=!0,w.backgroundColor=A;break;case"color":T=!0,w.color=A;break;case"font-family":T=!0,w.fontFamily=A;break;case"font-size":T=!0,w.fontSize=A;break;case"font-weight":(700<=parseInt(A,10)||A=="bold")&&(T=!0,w.fontWeight=700);break;case"font-style":switch(A){case"normal":T=!0,w.fontStyle=Ao;break;case"italic":T=!0,w.fontStyle="italic";break;case"oblique":T=!0,w.fontStyle="oblique"}break;case"opacity":T=!0,w.opacity=parseFloat(A);break;case"text-combine-upright":T=!0,w.textCombineUpright=A;break;case"text-shadow":T=!0,w.textShadow=A;break;case"white-space":T=!0,w.wrapLine=A!="noWrap"}}}T&&r.set(c,w)}}if(w=l,T=e,w.length==1&&!w[0]||/^NOTE($|[ \t])/.test(w[0])||w[0]=="STYLE"||w[0]=="REGION")l=null;else if(l=null,w[0].includes("-->")||(l=w[0],w.splice(0,1)),d=new Lr(w[0]),c=nh(d),E=ar(d,/[ \t]+--\x3e[ \t]+/g),p=nh(d),c==null||E==null||p==null)je("Failed to parse VTT time code. Cue skipped:",l,w),l=null;else{for(c+=T,p+=T,w=w.slice(1).join(`
`).trim(),r.has("global")?(T=r.get("global").clone(),T.startTime=c,T.endTime=p,T.payload=""):T=new Be(c,p,""),fa(d),c=as(d);c;)lS(T,c,t),fa(d),c=as(d);aS(w,T,r),l!=null&&(T.id=l),l=T}l&&s.push(l)}return s};function sS(e){for(var t=b(Object.entries(Tr)),n=t.next();!n.done;n=t.next()){var r=b(n.value);n=r.next().value,r=r.next().value;var s=new Be(0,0,"");s.color=r,e.set("."+n,s)}for(t=b(Object.entries(Vi)),n=t.next();!n.done;n=t.next())r=b(n.value),n=r.next().value,r=r.next().value,s=new Be(0,0,""),s.backgroundColor=r,e.set("."+n,s)}function aS(e,t,n){if(e.includes("<")){n.size===0&&sS(n);var r=e;e=[];for(var s=-1,l=0;l<r.length;l++)r[l]==="<"?s=l+1:r[l]===">"&&0<s&&(s=r.substr(s,l-s),s.match(fS)&&e.push(s),s=-1);for(e=b(e),l=e.next();!l.done;l=e.next())l=l.value,r=r.replace("<"+l+">",'<div time="'+l+'">'),r+="</div>";e=r;e:{l=e,s=[];var c=-1;e="",r=!1;for(var d=0;d<l.length;d++)if(l[d]==="/"){var p=l.indexOf(">",d);if(p===-1){e=l;break e}if((p=l.substring(d+1,p))&&p=="v"){r=!0;var w=null;if(s.length&&(w=s[s.length-1]),w){if(w===p)e+="/"+p+">";else{if(!w.startsWith("v")){e+=l[d];continue}e+="/"+w+">"}d+=p.length+1}else e+=l[d]}else e+=l[d]}else l[d]==="<"?(c=d+1,l[c]!="v"&&(c=-1)):l[d]===">"&&0<c&&(s.push(l.substr(c,d-c)),c=-1),e+=l[d];for(l=b(s),s=l.next();!s.done;s=l.next())s=s.value,c=s.replace(" ",".voice-"),e=e.replace("<"+s+">","<"+c+">"),e=e.replace("</"+s+">","</"+c+">"),r||(e+="</"+c+">")}e=hM(e);try{var T=Gs("<span>"+e+"</span>","span")}catch{}if(T)if(T=T.children,T.length!=1||T[0].tagName)for(T=b(T),e=T.next();!e.done;e=T.next())uS(e.value,t,n);else t.payload=Ti(e);else t.payload=Ti(e)}else t.payload=Ti(e)}function hM(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(s){return t[s]||""}):e||""}function pl(e,t){return e&&0<e.length?e:t}function uS(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new ve,r.position=null,r.size=0,e.tagName)for(var s=b(e.tagName.split(/(?=[ .])+/g)),l=s.next();!l.done;l=s.next()){var c=l=l.value;if(c.startsWith(".voice-")){var d=c.split("-").pop();c='v[voice="'+d+'"]',n.has(c)||(c="v[voice="+d+"]")}switch(n.has(c)&&(d=r,c=n.get(c))&&(d.backgroundColor=pl(c.backgroundColor,d.backgroundColor),d.color=pl(c.color,d.color),d.fontFamily=pl(c.fontFamily,d.fontFamily),d.fontSize=pl(c.fontSize,d.fontSize),d.textShadow=pl(c.textShadow,d.textShadow),d.fontWeight=c.fontWeight,d.fontStyle=c.fontStyle,d.opacity=c.opacity,d.rubyTag=c.rubyTag,d.textCombineUpright=c.textCombineUpright,d.wrapLine=c.wrapLine),l){case"br":r=Ke(r.startTime,r.endTime),t.nestedCues.push(r);return;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"font":(l=e.attributes.color)&&(r.color=l);break;case"div":if(l=e.attributes.time,!l)break;(l=nh(new Lr(l)))&&(r.startTime=l);break;case"ruby":case"rp":case"rt":r.rubyTag=l}}if(s=e.children,vf(e)||s.length==1&&vf(s[0]))for(n=Gn(e).split(`
`),e=!0,n=b(n),s=n.next();!s.done;s=n.next())s=s.value,e||(e=Ke(r.startTime,r.endTime),t.nestedCues.push(e)),0<s.length&&(e=r.clone(),e.payload=Ti(s),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),t=b(s),e=t.next();!e.done;e=t.next())uS(e.value,r,n)}function lS(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],t=="middle"?e.textAlign=gn:e.textAlign=$n[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=r[1]=="lr"?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":wn)):(r=/^region:(.*)$/.exec(t))?(t=dM(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Mi[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Pe,e.line=Number(n[1]),n[2]&&(e.lineAlign=Mi[n[2].toUpperCase()]))}function dM(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function nh(e){if(e=ar(e,fS),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}we("shaka.text.VttTextParser",Si),Si.prototype.parseMedia=Si.prototype.parseMedia,Si.prototype.setManifestType=Si.prototype.setManifestType,Si.prototype.setSequenceMode=Si.prototype.setSequenceMode,Si.prototype.parseInit=Si.prototype.parseInit;var fS=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;Hn["text/vtt"]=function(){return new Si},Hn['text/vtt; codecs="vtt"']=function(){return new Si},Hn['text/vtt; codecs="wvtt"']=function(){return new Si};function Ki(){this.g=null}Ki.prototype.parseInit=function(e){var t=this,n=!1;if(new tn().box("moov",Rt).box("trak",Rt).box("mdia",Rt).S("mdhd",function(r){r=Ef(r.reader,r.version),t.g=r.timescale}).box("minf",Rt).box("stbl",Rt).S("stsd",Ar).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new re(2,2,2008);if(!n)throw new re(2,2,2008)},Ki.prototype.setSequenceMode=function(){},Ki.prototype.setManifestType=function(){},Ki.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new re(2,2,2008);var n=0,r=[],s,l=[],c=!1,d=!1,p=!1,w=null;if(new tn().box("moof",Rt).box("traf",Rt).S("tfdt",function(q){c=!0,n=bf(q.reader,q.version).baseMediaDecodeTime}).S("tfhd",function(q){w=qy(q.reader,q.flags).Yc}).S("trun",function(q){d=!0,r=Ky(q.reader,q.version,q.flags).Wg}).box("mdat",Vs(function(q){p=!0,s=q})).parse(e,!1),!p&&!c&&!d)throw new re(2,2,2008);e=n;for(var T=new en(s,0),E=b(r),I=E.next();!I.done;I=E.next()){I=I.value;var A=I.Jf||w,R=I.ne?n+I.ne:e;e=R+(A||0);var D=0;do{var L=T.P();D+=L;var F=T.P(),U=null;gf(F)=="vttc"?8<L&&(U=T.qb(L-8)):T.skip(L-8),A&&U&&(L=pM(U,t.periodStart+R/this.g,t.periodStart+e/this.g),l.push(L))}while(I.sampleSize&&D<I.sampleSize)}return l.filter(Jr)};function pM(e,t,n){var r,s,l;return new tn().box("payl",Vs(function(c){r=fn(c)})).box("iden",Vs(function(c){s=fn(c)})).box("sttg",Vs(function(c){l=fn(c)})).parse(e),r?mM(r,s,l,t,n):null}function mM(e,t,n,r,s){if(r=new Be(r,s,""),aS(e,r,new Map),t&&(r.id=t),n)for(e=new Lr(n),t=as(e);t;)lS(r,t,[]),fa(e),t=as(e);return r}we("shaka.text.Mp4VttParser",Ki),Ki.prototype.parseMedia=Ki.prototype.parseMedia,Ki.prototype.setManifestType=Ki.prototype.setManifestType,Ki.prototype.setSequenceMode=Ki.prototype.setSequenceMode,Ki.prototype.parseInit=Ki.prototype.parseInit,Hn['application/mp4; codecs="wvtt"']=function(){return new Ki};function Yi(){}Yi.prototype.parseInit=function(){},Yi.prototype.setSequenceMode=function(){},Yi.prototype.setManifestType=function(){},Yi.prototype.parseMedia=function(e){var t=fn(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=b(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var r=new Lr(n[0]),s=cS(r),l=ar(r,/,/g);if(r=cS(r),s==null||l==null||r==null)throw new re(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Be(s,r,n.slice(1).join(`
`).trim()))}return e};function cS(e){if(e=ar(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}we("shaka.text.SbvTextParser",Yi),Yi.prototype.parseMedia=Yi.prototype.parseMedia,Yi.prototype.setManifestType=Yi.prototype.setManifestType,Yi.prototype.setSequenceMode=Yi.prototype.setSequenceMode,Yi.prototype.parseInit=Yi.prototype.parseInit,Hn["text/x-subviewer"]=function(){return new Yi};function Fi(){this.g=new Si}Fi.prototype.parseInit=function(){},Fi.prototype.setSequenceMode=function(){},Fi.prototype.setManifestType=function(){},Fi.prototype.parseMedia=function(e,t,n){return e=fn(e),e=hS(e),e=Ae(Mo(e)),this.g.parseMedia(e,t,n)};function hS(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=b(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}we("shaka.text.SrtTextParser",Fi),Fi.srt2webvtt=hS,Fi.prototype.parseMedia=Fi.prototype.parseMedia,Fi.prototype.setManifestType=Fi.prototype.setManifestType,Fi.prototype.setSequenceMode=Fi.prototype.setSequenceMode,Fi.prototype.parseInit=Fi.prototype.parseInit,Hn["text/srt"]=function(){return new Fi};function Qi(){}Qi.prototype.parseInit=function(){},Qi.prototype.setSequenceMode=function(){},Qi.prototype.setManifestType=function(){},Qi.prototype.parseMedia=function(e){var t="",n="",r=null,s=null;for(s=fn(e).split(/\r?\n\s*\r?\n/),e=b(s),s=e.next();!s.done;s=e.next()){var l=s.value;s=l,(l=yM.exec(l))&&(r=l[1],s=l[2]),r=="V4 Styles"||r=="V4+ Styles"?(t=s,t=n?t+(`
`+s):s):r=="Events"&&(n=n?n+(`
`+s):s)}for(r=[],s=null,t=b(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(l=mS.exec(e))){if(e=l[1].trim(),l=l[2].trim(),e=="Format")s=l.split(ih);else if(e=="Style"){e=l.split(ih),l={};for(var c=0;c<s.length&&c<e.length;c++)l[s[c]]=e[c];r.push(l)}}for(s=[],t=null,n=b(n.split(/\r?\n/)),l=n.next(),e={};!l.done;e={jh:void 0},l=n.next())if(l=l.value,!/^\s*;/.test(l)&&(c=mS.exec(l))){if(l=c[1].trim(),c=c[2].trim(),l=="Format")t=c.split(ih);else if(l=="Dialogue"){c=c.split(ih),l={};for(var d=0;d<t.length&&d<c.length;d++)l[t[d]]=c[d];d=pS(l.Start);var p=pS(l.End);c=new Be(d,p,c.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.jh=l.Style,(e=r.find(function(w){return function(T){return T.Name==w.jh}}(e)))&&gM(c,e),s.push(c)}}return s};function gM(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=dS(n))&&(e.color=n),(n=t.BackColour)&&(n=dS(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Jn,e.textAlign="start";break;case 2:e.displayAlign=Jn,e.textAlign=gn;break;case 3:e.displayAlign=Jn,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=gn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=gn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function dS(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function pS(e){return e=vM.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}we("shaka.text.SsaTextParser",Qi),Qi.prototype.parseMedia=Qi.prototype.parseMedia,Qi.prototype.setManifestType=Qi.prototype.setManifestType,Qi.prototype.setSequenceMode=Qi.prototype.setSequenceMode,Qi.prototype.parseInit=Qi.prototype.parseInit;var yM=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,mS=/^\s*([^:]+):\s*(.*)/,ih=/\s*,\s*/,vM=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Hn["text/x-ssa"]=function(){return new Qi};function gS(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{Qd:n,ca:e}:null}function yS(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(e[t+2]&60)>>>2;if(r>n.length-1)return null;var s=((e[t+2]&192)>>>6)+1,l=(e[t+2]&1)<<2;return l|=(e[t+3]&192)>>>6,{sampleRate:n[r],channelCount:l,codec:"mp4a.40."+s}}function vS(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var r=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return r<=n?!1:(t+=r,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function xM(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function Zi(e){this.i=e,this.h=0,this.g=new Map}S=Zi.prototype,S.destroy=function(){this.g.clear()},S.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?ct(this.convertCodecs("audio",e)):!1},S.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Wi(t)||"mp4a.40.2")+'"':t},S.getOriginalMimeType=function(){return this.i},S.transmux=function(e,t,n,r){for(var s=Ae(e),l=Ws(s),c=l.length;c<s.length&&!vS(s,c);c++);if(e=1e3*n.endTime,l=is(l),l.length&&n&&(l=l.find(function(T){return T.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=l.data),l=yS(s,c),!l)return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount;for(var d=[];c<s.length;){var p=gS(s,c);if(!p)return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));var w=p.Qd+p.ca;c+w<=s.length&&d.push({data:s.subarray(c+p.Qd,c+w),size:p.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),c+=w}return s=l.sampleRate,e=Math.floor(e*s/1e3),r={id:t.id,type:"audio",codecs:l.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:d},stream:t},r=new Ca([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Ta(r),this.g.set(n,t)),n=rl(r),this.h++,t=An(t,n),Promise.resolve(t)},we("shaka.transmuxer.AacTransmuxer",Zi),Zi.prototype.transmux=Zi.prototype.transmux,Zi.prototype.getOriginalMimeType=Zi.prototype.getOriginalMimeType,Zi.prototype.convertCodecs=Zi.prototype.convertCodecs,Zi.prototype.isSupported=Zi.prototype.isSupported,Zi.prototype.destroy=Zi.prototype.destroy,Nt("audio/aac",function(){return new Zi("audio/aac")},Hi);function xS(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var r=e[t+4]&63,s=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+s>e.length)return null;var l=e[t+6]>>5,c=0;l===2?c+=2:(l&1&&l!==1&&(c+=2),l&4&&(c+=2)),c=(e[t+6]<<8|e[t+7])>>12-c&1;var d=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|d>>2,(d&3)<<6|l<<3|c<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][l]+c,ma:e,ca:s}}function wM(e,t){if(e[t]===11&&e[t+1]===119){var n=0,r=5;t+=r;for(var s,l;0<r;){l=e[t];var c=Math.min(r,8),d=8-c;s=4278190080>>>24+d<<d,s=(l&s)>>d,n=n?n<<c|s:s,t+=1,r-=c}if(16>n)return!0}return!1}function fo(e){this.i=e,this.h=0,this.g=new Map}S=fo.prototype,S.destroy=function(){this.g.clear()},S.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?ct(this.convertCodecs("audio",e)):!1},S.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},S.getOriginalMimeType=function(){return this.i},S.transmux=function(e,t,n,r){e=Ae(e);for(var s=Ws(e),l=s.length;l<e.length&&!wM(e,l);l++);var c=1e3*n.endTime;s=is(s),s.length&&n&&(s=s.find(function(T){return T.description==="com.apple.streaming.transportStreamTimestamp"}))&&(c=s.data),s=0;for(var d=new Uint8Array([]),p=[];l<e.length;){var w=xS(e,l);if(!w)return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=w.sampleRate,t.channelsCount=w.channelCount,s=w.sampleRate,d=w.ma,p.push({data:e.subarray(l,l+w.ca),size:w.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),l+=w.ca}return e=Math.floor(c*s/1e3),r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s,duration:r,$a:[],ma:d,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:p},stream:t},r=new Ca([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Ta(r),this.g.set(n,t)),n=rl(r),this.h++,t=An(t,n),Promise.resolve(t)},we("shaka.transmuxer.Ac3Transmuxer",fo),fo.prototype.transmux=fo.prototype.transmux,fo.prototype.getOriginalMimeType=fo.prototype.getOriginalMimeType,fo.prototype.convertCodecs=fo.prototype.convertCodecs,fo.prototype.isSupported=fo.prototype.isSupported,fo.prototype.destroy=fo.prototype.destroy,Nt("audio/ac3",function(){return new fo("audio/ac3")},Hi);function wS(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new ir(e.subarray(t+2));Pi(n,2),Pi(n,3);var r=_t(n,11)+1<<1,s=_t(n,2);if(s==3){s=_t(n,2),s=[24e3,22060,16e3][s];var l=3}else s=[48e3,44100,32e3][s],l=_t(n,2);var c=_t(n,3),d=_t(n,1);return n=_t(n,5),t+r>e.byteLength?null:(e=Math.floor(r*s/(16*[1,2,3,6][l])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,s<<6|n<<1|0,0|c<<1|d<<0,0]),{sampleRate:s,channelCount:[2,1,2,3,3,4,4,5][c]+d,ma:e,ca:r})}function co(e){this.i=e,this.h=0,this.g=new Map}S=co.prototype,S.destroy=function(){this.g.clear()},S.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?ct(this.convertCodecs("audio",e)):!1},S.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},S.getOriginalMimeType=function(){return this.i},S.transmux=function(e,t,n,r){e=Ae(e);for(var s=Ws(e),l=s.length;l<e.length&&(e[l]<<8|e[l+1]<<0)!==2935;l++);var c=1e3*n.endTime;s=is(s),s.length&&n&&(s=s.find(function(T){return T.description==="com.apple.streaming.transportStreamTimestamp"}))&&(c=s.data),s=0;for(var d=new Uint8Array([]),p=[];l<e.length;){var w=wS(e,l);if(!w)return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));t.audioSamplingRate=w.sampleRate,t.channelsCount=w.channelCount,s=w.sampleRate,d=w.ma,p.push({data:e.subarray(l,l+w.ca),size:w.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),l+=w.ca}return e=Math.floor(c*s/1e3),r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s,duration:r,$a:[],ma:d,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:e,Ya:p},stream:t},r=new Ca([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Ta(r),this.g.set(n,t)),n=rl(r),this.h++,t=An(t,n),Promise.resolve(t)},we("shaka.transmuxer.Ec3Transmuxer",co),co.prototype.transmux=co.prototype.transmux,co.prototype.getOriginalMimeType=co.prototype.getOriginalMimeType,co.prototype.convertCodecs=co.prototype.convertCodecs,co.prototype.isSupported=co.prototype.isSupported,co.prototype.destroy=co.prototype.destroy,Nt("audio/ec3",function(){return new co("audio/ec3")},Hi);function SM(e){if(!e.length)return null;var t=e.find(function(D){return D.type==7});if(e=e.find(function(D){return D.type==8}),!t||!e)return null;var n=new ir(t.data),r=Ht(n);if(Ht(n),Ht(n),Ei(n),TM.includes(r)&&(r=He(n),r===3&&Pi(n,1),Ei(n),Ei(n),Pi(n,1),it(n))){r=r!==3?8:12;for(var s=0;s<r;s++)it(n)&&(6>s?kf(n,16):kf(n,64))}if(Ei(n),r=He(n),r===0)He(n);else if(r===1)for(Pi(n,1),Ei(n),Ei(n),r=He(n),s=0;s<r;s++)Ei(n);Ei(n),Pi(n,1);var l=He(n),c=He(n),d=_t(n,1);d===0&&Pi(n,1),Pi(n,1);var p=0,w=0,T=0,E=0;if(it(n)&&(p=He(n),w=He(n),T=He(n),E=He(n)),s=r=1,it(n)&&it(n)){var I=Ht(n),A=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],R=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<I&&16>=I?(r=A[I-1],s=R[I-1]):I===255&&(r=_t(n,16),s=_t(n,16))}return n=(2-d)*(c+1)*16-2*T-2*E,l=16*(l+1)-2*p-2*w,p=[],t=t.fullData,p.push(t.byteLength>>>8&255),p.push(t.byteLength&255),p=p.concat.apply(p,_(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,_(e)),e=new Uint8Array([1,p[3],p[4],p[5],255,225].concat(p,[1],t)),{height:n,width:l,wa:e,Ba:r,Ca:s}}function CM(e){var t=!1,n=[],r=e.find(function(p){return p.type==7}),s=!1;e=b(e);for(var l=e.next();!l.done;l=e.next()){l=l.value;var c=!1;switch(l.type){case 1:c=s=!0;var d=l.data;r&&4<d.length&&(d=hE(new ir(d)),d===2||d===4||d===7||d===9)&&(t=!0);break;case 5:t=c=s=!0;break;case 6:c=!0;break;case 7:c=!0;break;case 8:c=!0;break;case 9:s=c=!0;break;case 12:c=!0;break;default:c=!1}s&&c&&(c=l.fullData.byteLength,d=new Uint8Array(4),d[0]=c>>24&255,d[1]=c>>16&255,d[2]=c>>8&255,d[3]=c&255,n.push(d),n.push(l.fullData))}return n.length?{data:An.apply(gi,_(n)),kd:t}:null}var TM=[100,110,122,244,44,83,86,118,128,138,139,134];function bM(e){if(!e.length)return null;var t=e.find(function(c){return c.type==32}),n=e.find(function(c){return c.type==33}),r=e.find(function(c){return c.type==34});if(!t||!n||!r)return null;var s=EM(t.fullData);e=kM(n.fullData);var l=AM(r.fullData);return t=IM(t.fullData,n.fullData,r.fullData,{yf:s.yf,Wf:s.Wf,df:e.df,ef:e.ef,Ye:e.Ye,cf:e.cf,Ze:e.Ze,$e:e.$e,af:e.af,bf:e.bf,Se:e.Se,Te:e.Te,Ue:e.Ue,Ve:e.Ve,We:e.We,Xe:e.Xe,Le:e.Le,$d:e.$d,Je:e.Je,He:e.He,Ge:e.Ge,Bf:l.Bf}),{height:e.height,width:e.width,wa:t,Ba:e.Ri,Ca:e.Qi}}function EM(e){var t=new ir(e,!0);return Ht(t),Ht(t),_t(t,4),_t(t,2),_t(t,6),e=_t(t,3),t=it(t),{yf:e+1,Wf:t}}function kM(e){e=new ir(e,!0),Ht(e),Ht(e);var t=0,n=0,r=0,s=0;_t(e,4);var l=_t(e,3);it(e);for(var c=_t(e,2),d=_t(e,1),p=_t(e,5),w=Ht(e),T=Ht(e),E=Ht(e),I=Ht(e),A=Ht(e),R=Ht(e),D=Ht(e),L=Ht(e),F=Ht(e),U=Ht(e),q=Ht(e),N=[],H=[],Y=0;Y<l;Y++)N.push(it(e)),H.push(it(e));if(0<l)for(Y=l;8>Y;Y++)_t(e,2);for(Y=0;Y<l;Y++)N[Y]&&_t(e,88),H[Y]&&Ht(e);He(e),N=He(e),N==3&&_t(e,1),H=He(e),Y=He(e),it(e)&&(t+=He(e),n+=He(e),r+=He(e),s+=He(e));var oe=He(e),ae=He(e),me=He(e);if(it(e))for(var ue=0;ue<=l;ue++)He(e),He(e),He(e);else He(e),He(e),He(e);if(He(e),He(e),He(e),He(e),He(e),He(e),it(e)&&it(e))for(ue=0;4>ue;ue++)for(var le=0;le<(ue===3?2:6);le++)if(it(e)){var he=Math.min(64,1<<4+(ue<<1));1<ue&&Xs(e);for(var be=0;be<he;be++)Xs(e)}else He(e);for(it(e),it(e),it(e)&&(Ht(e),He(e),He(e),it(e)),ue=He(e),he=le=0;he<ue;he++)if(be=!1,he!==0&&(be=it(e)),be){he===ue&&He(e),it(e),He(e);for(var Ce=be=0;Ce<=le;Ce++){var ke=it(e),Oe=!1;ke||(Oe=it(e)),(ke||Oe)&&be++}le=be}else{for(Ce=He(e),be=He(e),le=Ce+be,ke=0;ke<Ce;ke++)He(e),it(e);for(Ce=0;Ce<be;Ce++)He(e),it(e)}if(it(e))for(ue=He(e),le=0;le<ue;le++){for(he=0;he<me+4;he++)_t(e,1);_t(e,1)}if(ue=me=1,le=0,it(e),it(e),it(e)){if(it(e)&&(he=Ht(e),be=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Ce=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<he&&16>=he?(me=be[he-1],ue=Ce[he-1]):he===255&&(me=_t(e,16),ue=_t(e,16))),it(e)&&it(e),it(e)&&(_t(e,3),it(e),it(e)&&(Ht(e),Ht(e),Ht(e))),it(e)&&(He(e),He(e)),it(e),it(e),it(e),(he=it(e))&&(He(e),He(e),He(e),He(e)),it(e)&&(_t(e,32),_t(e,32),it(e)&&He(e),it(e)))for(Ce=!1,he=it(e),be=it(e),(he||be)&&((Ce=it(e))&&(Ht(e),_t(e,5),it(e),_t(e,5)),_t(e,4),_t(e,4),Ce&&_t(e,4),_t(e,5),_t(e,5),_t(e,5)),ke=0;ke<=l;ke++){var Ie=!0;Oe=1,it(e)||(Ie=it(e));var Fe=!1;if(Ie?He(e):Fe=it(e),Fe||(Oe=He(e)+1),he){for(Ie=0;Ie<Oe;Ie++)He(e),He(e),Ce&&(He(e),He(e));it(e)}if(be){for(Ie=0;Ie<Oe;Ie++)He(e),He(e),Ce&&(He(e),He(e));it(e)}}it(e)&&(it(e),it(e),it(e),le=He(e),He(e),He(e),He(e),He(e))}return{Ye:q,df:c,ef:d,cf:p,Ze:w,$e:T,af:E,bf:I,Se:A,Te:R,Ue:D,Ve:L,We:F,Xe:U,$d:le,Le:0,Je:N,He:oe,Ge:ae,width:H-(t+n)*(N===1||N===2?2:1),height:Y-(r+s)*(N===1?2:1),Ri:me,Qi:ue}}function AM(e){var t=new ir(e,!0);Ht(t),Ht(t),He(t),He(t),it(t),it(t),_t(t,3),it(t),it(t),He(t),He(t),Xs(t),it(t),it(t),it(t)&&He(t),Xs(t),Xs(t),it(t),it(t),it(t),it(t),e=it(t),t=it(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Bf:n}}function IM(e,t,n,r){var s=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return s[0]=1,s[1]=(r.df&3)<<6|(r.ef?1:0)<<5|r.cf&31,s[2]=r.Ze,s[3]=r.$e,s[4]=r.af,s[5]=r.bf,s[6]=r.Se,s[7]=r.Te,s[8]=r.Ue,s[9]=r.Ve,s[10]=r.We,s[11]=r.Xe,s[12]=r.Ye,s[13]=240|(r.$d&3840)>>8,s[14]=r.$d&255,s[15]=252|r.Bf&3,s[16]=252|r.Je&3,s[17]=248|r.He&7,s[18]=248|r.Ge&7,s[19]=0,s[20]=0,s[21]=(r.Le&3)<<6|(r.yf&7)<<3|(r.Wf?1:0)<<2|3,s[22]=3,s[23]=160,s[24]=0,s[25]=1,s[26]=(e.byteLength&65280)>>8,s[27]=(e.byteLength&255)>>0,s.set(e,28),s[23+(5+e.byteLength)]=161,s[e.byteLength+29]=0,s[e.byteLength+30]=1,s[e.byteLength+31]=(t.byteLength&65280)>>8,s[e.byteLength+32]=(t.byteLength&255)>>0,s.set(t,e.byteLength+33),s[23+(e.byteLength+10+t.byteLength)]=162,s[e.byteLength+10+t.byteLength+24]=0,s[e.byteLength+10+t.byteLength+25]=1,s[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,s[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,s.set(n,e.byteLength+10+t.byteLength+28),s}function oh(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,s=e[t+2]>>4&15,l=e[t+2]>>2&3;if(n!==1&&s!==0&&s!==15&&l!==3){var c=e[t+3]>>6;s=1e3*MM[14*(n===3?3-r:r===3?3:4)+s-1],l=_M[3*(n===3?0:n===2?1:2)+l],n=RM[n][r];var d=LM[r],p=Math.floor(n*s/l+(e[t+2]>>1&1))*d,w=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(w=w?parseInt(w[1],10):0)&&87>=w&&r===2&&224e3<=s&&c===0&&(e[t+3]|=128),{sampleRate:l,channelCount:c===3?1:2,ca:p,Pi:8*n*d}}return null}function SS(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function CS(e,t){if(t+1<e.length&&SS(e,t)){var n=oh(e,t),r=4;return n&&n.ca&&(r=n.ca),t+=r,t===e.length||t+1<e.length&&SS(e,t)}return!1}var MM=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],_M=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],RM=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],LM=[0,1,1,4];function ho(e){this.i=e,this.h=0,this.g=new Map}S=ho.prototype,S.destroy=function(){this.g.clear()},S.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?ct(this.convertCodecs("audio",e)):!1},S.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},S.getOriginalMimeType=function(){return this.i},S.transmux=function(e,t,n,r){for(var s=Ae(e),l=Ws(s).length;l<s.length&&!CS(s,l);l++);var c;for(e=[];l<s.length;){var d=oh(s,l);if(!d)return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));c||(c=d),l+d.ca<=s.length&&e.push({data:s.subarray(l,l+d.ca),size:d.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),l+=d.ca}return c?(s=9e4*c.Pi/c.sampleRate*this.h,r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:c.sampleRate,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.h,baseMediaDecodeTime:s,Ya:e},stream:t},r=new Ca([r]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=Ta(r),this.g.set(n,t)),n=rl(r),this.h++,t=An(t,n),Promise.resolve(t)):Promise.reject(new re(2,3,3018,n?n.M()[0]:null))},we("shaka.transmuxer.Mp3Transmuxer",ho),ho.prototype.transmux=ho.prototype.transmux,ho.prototype.getOriginalMimeType=ho.prototype.getOriginalMimeType,ho.prototype.convertCodecs=ho.prototype.convertCodecs,ho.prototype.isSupported=ho.prototype.isSupported,ho.prototype.destroy=ho.prototype.destroy,Nt("audio/mpeg",function(){return new ho("audio/mpeg")},Hi);function po(e){this.h=e,this.g=null}S=po.prototype,S.destroy=function(){},S.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Wi(e).split(","),n=_i("audio",t);return t=_i("video",t),!n||t||bi(n)!="mp3"?!1:ct(this.convertCodecs("audio",e))},S.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},S.getOriginalMimeType=function(){return this.h},S.transmux=function(e,t,n,r,s){if(this.g?this.g.clearData():this.g=new rn,e=Ae(e),e=this.g.parse(e),e.$c().audio!="mp3"||s!="audio")return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));for(n=new Uint8Array([]),s=b(e.Tb()),e=s.next();!e.done;e=s.next())if(e=e.value.data)for(t=0;t<e.length;)(r=oh(e,t))?(t+r.ca<=e.length&&(n=An(n,e.subarray(t,t+r.ca))),t+=r.ca):t++;return Promise.resolve(n)},we("shaka.transmuxer.MpegTsTransmuxer",po),po.prototype.transmux=po.prototype.transmux,po.prototype.getOriginalMimeType=po.prototype.getOriginalMimeType,po.prototype.convertCodecs=po.prototype.convertCodecs,po.prototype.isSupported=po.prototype.isSupported,po.prototype.destroy=po.prototype.destroy,Nt("video/mp2t",function(){return new po("video/mp2t")},br);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function Ji(e){this.h=e,(this.g=p0.get("ISOBoxer")())&&DM(this)}function DM(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(r){this._procEntryField(r,"BytesOfClearData","uint",16),this._procEntryField(r,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,r=0;16>r;r++)this.usertype[r]!==PM[r]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}S=Ji.prototype,S.destroy=function(){},S.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?ct(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ct(t)||ct(e))},S.convertCodecs=function(e,t){return t.replace("mss/","")},S.getOriginalMimeType=function(){return this.h},S.transmux=function(e,t,n){if(!n)return Promise.resolve(Ae(e));if(!t.mssPrivateData)return Promise.reject(new re(2,3,3020,n?n.M()[0]:null));try{var r,s=this.g.parseBuffer(e),l=s.fetch("tfhd");l.track_ID=t.id+1;var c=s.fetch("tfdt"),d=s.fetch("traf");c===null&&(c=this.g.createFullBox("tfdt",d,l),c.version=1,c.flags=0,c.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var p=s.fetch("trun"),w=s.fetch("tfxd");w&&w._parent.boxes.splice(w._parent.boxes.indexOf(w),1);var T=s.fetch("tfrf");T&&T._parent.boxes.splice(T._parent.boxes.indexOf(T),1);var E=s.fetch("sepiff");if(E!==null){E.type="senc",E.usertype=void 0;var I=s.fetch("saio");if(I===null){I=this.g.createFullBox("saio",d),I.version=0,I.flags=0,I.entry_count=1,I.offset=[0];var A=this.g.createFullBox("saiz",d);if(A.version=0,A.flags=0,A.sample_count=E.sample_count,A.default_sample_info_size=0,A.sample_info_size=[],E.flags&2)for(r=0;r<E.sample_count;r+=1)A.sample_info_size[r]=10+6*E.entry[r].NumberOfEntries;else A.default_sample_info_size=8}}l.flags&=16777214,l.flags|=131072,p.flags|=1;var R=s.fetch("moof");p.data_offset=R.getLength()+8;var D=s.fetch("saio");D!==null&&(D.offset[0]=TS(R,"traf")+TS(d,"senc")+16);var L=Ae(s.write());return Promise.resolve(L)}catch(F){return F instanceof re?Promise.reject(F):Promise.reject(new re(2,3,3022,n?n.M()[0]:null))}};function TS(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}we("shaka.transmuxer.MssTransmuxer",Ji),Ji.prototype.transmux=Ji.prototype.transmux,Ji.prototype.getOriginalMimeType=Ji.prototype.getOriginalMimeType,Ji.prototype.convertCodecs=Ji.prototype.convertCodecs,Ji.prototype.isSupported=Ji.prototype.isSupported,Ji.prototype.destroy=Ji.prototype.destroy;var PM=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Nt("mss/audio/mp4",function(){return new Ji("mss/audio/mp4")},Hi),Nt("mss/video/mp4",function(){return new Ji("mss/video/mp4")},Hi);function mo(e){this.l=e,this.g=0,this.i=new Map,this.h=this.j=null}S=mo.prototype,S.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},S.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=Wi(n).split(",");return n=_i("audio",r),r=_i("video",r),n&&(n=bi(n),!OM.includes(n))||r&&(n=bi(r),!NM.includes(n))?!1:t?ct(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),ct(t)||ct(e))},S.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Wi(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return Ns(n,"audio/mp4")}).map(gu).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},S.getOriginalMimeType=function(){return this.l},S.transmux=function(e,t,n,r,s){var l=Ae(e);if(s=="audio"&&!ku(l)){for(var c=Ws(l),d=c.length;d<l.length;d++)if(CS(l,d))return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));for(d=c.length;d<l.length;d++)if(vS(l,d))return this.h||(this.h=new Zi("audio/aac")),this.h.transmux(e,t,n,r,s);return Promise.reject(new re(2,3,3018,n?n.M()[0]:null))}this.j?this.j.clearData():this.j=new rn;var p=this.j.parse(l),w=[],T=p.$c();try{var E=null;if(s=="video"){switch(T.video){case"avc":var I=[],A=null,R=[],D=p.Fc();if(!D.length)throw new re(2,3,3023,n?n.M()[0]:null);for(var L=0;L<D.length;L++){var F=D[L],U=F.nalus;R.push.apply(R,_(U));var q=CM(U);if(q){A==null&&(A=F.dts);var N=void 0;N=L+1<D.length?(D[L+1].dts||0)-(F.dts||0):1<D.length?(F.dts||0)-(D[L-1].dts||0):9e4*(n.endTime-n.startTime),I.push({data:q.data,size:q.data.byteLength,duration:N,cb:Math.round((F.pts||0)-(F.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:q.kd?2:1,hb:q.kd?0:1}})}}var H=SM(R);if(!H||A==null)throw new re(2,3,3018,n?n.M()[0]:null);t.height=H.height,t.width=H.width,E={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,$a:[],ma:new Uint8Array([]),wa:H.wa,Ba:H.Ba,Ca:H.Ca,data:{rb:this.g,baseMediaDecodeTime:A,Ya:I},stream:t};break;case"hvc":var Y=[],oe=null,ae=[],me=p.Fc();if(!me.length)throw new re(2,3,3023,n?n.M()[0]:null);for(var ue=0;ue<me.length;ue++){var le=me[ue],he=le.nalus;ae.push.apply(ae,_(he));for(var be=!1,Ce=[],ke=!1,Oe=b(he),Ie=Oe.next();!Ie.done;Ie=Oe.next()){var Fe=Ie.value;switch(Fe.type){case 1:case 0:var vt=ke=!0;break;case 19:case 20:case 21:be=vt=ke=!0;break;case 32:vt=!0;break;case 33:vt=!0;break;case 34:vt=!0;break;case 35:ke=vt=!0;break;case 39:case 40:vt=!0;break;default:vt=!1}if(ke&&vt){var Dt=Fe.fullData.byteLength,Sn=new Uint8Array(4);Sn[0]=Dt>>24&255,Sn[1]=Dt>>16&255,Sn[2]=Dt>>8&255,Sn[3]=Dt&255,Ce.push(Sn),Ce.push(Fe.fullData)}}var $t=Ce.length?{data:An.apply(gi,_(Ce)),kd:be}:null;if($t){oe==null&&le.dts!=null&&(oe=le.dts);var kn=void 0;kn=ue+1<me.length?(me[ue+1].dts||0)-(le.dts||0):1<me.length?(le.dts||0)-(me[ue-1].dts||0):9e4*(n.endTime-n.startTime),Y.push({data:$t.data,size:$t.data.byteLength,duration:kn,cb:Math.round((le.pts||0)-(le.dts||0)),flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:$t.kd?2:1,hb:$t.kd?0:1}})}}var Un=bM(ae);if(!Un||oe==null)throw new re(2,3,3018,n?n.M()[0]:null);t.height=Un.height,t.width=Un.width,E={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:r,$a:[],ma:new Uint8Array([]),wa:Un.wa,Ba:Un.Ba,Ca:Un.Ca,data:{rb:this.g,baseMediaDecodeTime:oe,Ya:Y},stream:t}}E&&(w.push(E),E=null)}if(s=="audio"){switch(T.audio){case"aac":for(var Cn=[],qt,Mn=null,Wn=b(p.Tb()),Xn=Wn.next();!Xn.done;Xn=Wn.next()){var $i=Xn.value,zi=$i.data;if(zi){var bo=0;if(qt=yS(zi,bo),!qt)throw new re(2,3,3018,n?n.M()[0]:null);for(t.audioSamplingRate=qt.sampleRate,t.channelsCount=qt.channelCount,Mn==null&&$i.pts!==null&&(Mn=$i.pts);bo<zi.length;){var pr=gS(zi,bo);if(pr){var Ur=pr.Qd+pr.ca;bo+Ur<=zi.length&&Cn.push({data:zi.subarray(bo+pr.Qd,bo+Ur),size:pr.ca,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),bo+=Ur}else bo++}}}if(!qt||Mn==null){if(!p.Fc().length)throw new re(2,3,3018,n?n.M()[0]:null);Mn=9e4*n.startTime;var Aa=_i("audio",t.codecs.split(","));if(!Aa||!t.channelsCount||!t.audioSamplingRate)throw new re(2,3,3018,n?n.M()[0]:null);qt={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:Aa};var mr=xM(Aa,t.channelsCount);if(!mr)throw new re(2,3,3018,n?n.M()[0]:null);for(var sh=Mn+9e4*(n.endTime-n.startTime),yl=Mn;yl<sh;)Cn.push({data:mr,size:mr.byteLength,duration:1024,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),yl+=1024/qt.sampleRate*9e4}var vl=qt.sampleRate,No=Mn/9e4*vl;E={id:t.id,type:"audio",codecs:qt.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:vl,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:No,Ya:Cn},stream:t};break;case"ac3":for(var OS=[],ah=0,cm=new Uint8Array([]),uh=null,NS=b(p.Tb()),hm=NS.next();!hm.done;hm=NS.next()){var dm=hm.value,pm=dm.data;uh==null&&dm.pts!==null&&(uh=dm.pts);for(var Ia=0;Ia<pm.length;){var Br=xS(pm,Ia);Br?(t.audioSamplingRate=Br.sampleRate,t.channelsCount=Br.channelCount,ah=Br.sampleRate,cm=Br.ma,OS.push({data:pm.subarray(Ia,Ia+Br.ca),size:Br.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Ia+=Br.ca):Ia++}}if(ah==0||cm.byteLength==0||uh==null)throw new re(2,3,3018,n?n.M()[0]:null);var $M=uh/9e4*ah;E={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:ah,duration:r,$a:[],ma:cm,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:$M,Ya:OS},stream:t};break;case"ec3":for(var US=[],lh=0,mm=new Uint8Array([]),fh=null,BS=b(p.Tb()),gm=BS.next();!gm.done;gm=BS.next()){var ym=gm.value,vm=ym.data;fh==null&&ym.pts!==null&&(fh=ym.pts);for(var Ma=0;Ma<vm.length;){var jr=wS(vm,Ma);jr?(t.audioSamplingRate=jr.sampleRate,t.channelsCount=jr.channelCount,lh=jr.sampleRate,mm=jr.ma,US.push({data:vm.subarray(Ma,Ma+jr.ca),size:jr.ca,duration:1536,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),Ma+=jr.ca):Ma++}}if(lh==0||mm.byteLength==0||fh==null)throw new re(2,3,3018,n?n.M()[0]:null);var zM=fh/9e4*lh;E={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:lh,duration:r,$a:[],ma:mm,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:zM,Ya:US},stream:t};break;case"mp3":for(var jS=[],ch,hh=null,FS=b(p.Tb()),xm=FS.next();!xm.done;xm=FS.next()){var wm=xm.value,xl=wm.data;if(xl){hh==null&&wm.pts!==null&&(hh=wm.pts);for(var ps=0;ps<xl.length;){var _a=oh(xl,ps);_a?(ch||(ch=_a),ps+_a.ca<=xl.length&&jS.push({data:xl.subarray(ps,ps+_a.ca),size:_a.ca,duration:1152,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),ps+=_a.ca):ps++}}}if(!ch||hh==null)throw new re(2,3,3018,n?n.M()[0]:null);var $S=ch.sampleRate,VM=hh/9e4*$S;E={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:$S,duration:r,$a:[],ma:new Uint8Array([]),wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:VM,Ya:jS},stream:t};break;case"opus":var zS=[],dh=null,Wo=p.F;if(!Wo)throw new re(2,3,3018,n?n.M()[0]:null);var Ci=[];switch(Wo.Ch){case 1:case 2:Ci=[0];break;case 0:Ci=[255,1,1,0,1];break;case 128:Ci=[255,2,0,0,1];break;case 3:Ci=[1,2,1,0,2,1];break;case 4:Ci=[1,2,2,0,1,2,3];break;case 5:Ci=[1,3,2,0,4,1,2,3];break;case 6:Ci=[1,4,2,0,4,1,2,3,5];break;case 7:Ci=[1,4,2,0,4,1,2,3,5,6];break;case 8:Ci=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Ci=[1,1,2,0,1];break;case 131:Ci=[1,1,3,0,1,2];break;case 132:Ci=[1,1,4,0,1,2,3];break;case 133:Ci=[1,1,5,0,1,2,3,4];break;case 134:Ci=[1,1,6,0,1,2,3,4,5];break;case 135:Ci=[1,1,7,0,1,2,3,4,5,6];break;case 136:Ci=[1,1,8,0,1,2,3,4,5,6,7]}for(var VS=new Uint8Array([0,Wo.channelCount,0,0,Wo.sampleRate>>>24&255,Wo.sampleRate>>>17&255,Wo.sampleRate>>>8&255,Wo.sampleRate>>>0&255,0,0].concat(_(Ci))),HS=Wo.sampleRate,GS=b(p.Tb()),Sm=GS.next();!Sm.done;Sm=GS.next()){var Cm=Sm.value,Ra=Cm.data;dh==null&&Cm.pts!==null&&(dh=Cm.pts);for(var wl=0;wl<Ra.length;){for(var HM=(Ra[wl+1]&16)!==0,GM=(Ra[wl+1]&8)!==0,gr=wl+2,ph=0;Ra[gr]===255;)ph+=255,gr+=1;ph+=Ra[gr],gr+=1,gr+=HM?2:0,gr+=GM?2:0;var WS=Ra.slice(gr,gr+ph);zS.push({data:WS,size:WS.byteLength,duration:960,cb:0,flags:{gb:0,Xa:0,Wa:0,Ua:0,Va:2,hb:0}}),wl=gr+ph}}if(VS.byteLength==0||dh==null)throw new re(2,3,3018,n?n.M()[0]:null);t.audioSamplingRate=Wo.sampleRate,t.channelsCount=Wo.channelCount;var WM=dh/9e4*HS;E={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:HS,duration:r,$a:[],ma:VS,wa:new Uint8Array([]),Ba:0,Ca:0,data:{rb:this.g,baseMediaDecodeTime:WM,Ya:zS},stream:t}}E&&(w.push(E),E=null)}}catch(Em){return Em&&Em.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(Em)}if(!w.length)return Promise.reject(new re(2,3,3018,n?n.M()[0]:null));var XS=new Ca(w),Tm=t.id+"_"+n.i;if(this.i.has(Tm))var bm=this.i.get(Tm);else bm=Ta(XS),this.i.set(Tm,bm);var XM=rl(XS);this.g++;var qM=An(bm,XM);return Promise.resolve(qM)},we("shaka.transmuxer.TsTransmuxer",mo),mo.prototype.transmux=mo.prototype.transmux,mo.prototype.getOriginalMimeType=mo.prototype.getOriginalMimeType,mo.prototype.convertCodecs=mo.prototype.convertCodecs,mo.prototype.isSupported=mo.prototype.isSupported,mo.prototype.destroy=mo.prototype.destroy;var OM=["aac","ac-3","ec-3","mp3","opus"],NM=["avc","hevc"];Nt("video/mp2t",function(){return new mo("video/mp2t")},Er);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function bS(){}var ml;function ES(){ml||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(ml=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=UM,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function UM(e,t){var n=this,r;return z(function(s){return s.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),k(s,ml.call(n,e,t),2)):(r=s.h,DS(r)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=ml,s.return(r)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=kS,s.return(kS.call(n,e,t))))})}function kS(e,t){var n=this,r,s,l,c,d,p,w,T,E,I,A,R;return z(function(D){if(D.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),r=LS(e),s=[],l=b(t),c=l.next();!c.done;c=l.next())d=c.value,p=AS(d.videoCapabilities,r),w=AS(d.audioCapabilities,r),d.videoCapabilities&&d.videoCapabilities.length&&!p.length||d.audioCapabilities&&d.audioCapabilities.length&&!w.length||(T=Object.assign({},d),T.videoCapabilities=p,T.audioCapabilities=w,s.push(T));if(!s.length)throw E=Error("Unsupported keySystem or supportedConfigurations."),E.name="NotSupportedError",E.code=DOMException.NOT_SUPPORTED_ERR,E;return k(D,ml.call(n,e,s),2)}return I=D.h,R=A=null,s[0]&&(s[0].videoCapabilities&&(A=s[0].videoCapabilities[0].encryptionScheme),s[0].audioCapabilities&&(R=s[0].audioCapabilities[0].encryptionScheme)),D.return(new rh(I,A,R))})}function AS(e,t){return e&&e.filter(function(n){return lm(n.encryptionScheme,t)})}we("EmeEncryptionSchemePolyfill",bS),bS.install=ES;function IS(){}var gl;function MS(){gl||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(gl=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=BM,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function BM(e){var t=this,n,r;return z(function(s){switch(s.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),k(s,gl.call(t,e),2);case 2:if(n=s.h,!e.keySystemConfiguration)return s.return(n);if((r=n.keySystemAccess)&&DS(r))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=gl,s.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=_S,r){s.u(3);break}return k(s,RS(e),4);case 4:return n.keySystemAccess=s.h,s.return(n);case 3:return s.return(_S.call(t,e))}})}function _S(e){var t=this,n,r,s,l,c,d,p;return z(function(w){switch(w.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=n=null,!e.keySystemConfiguration||(s=e.keySystemConfiguration,l=s.keySystem,r=s.audio&&s.audio.encryptionScheme,n=s.video&&s.video.encryptionScheme,c=LS(l),d={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},lm(r,c)&&lm(n,c))?k(w,gl.call(t,e),2):w.return(d);case 2:if(p=w.h,p.keySystemAccess){p.keySystemAccess=new rh(p.keySystemAccess,n,r),w.u(3);break}if(!e.keySystemConfiguration){w.u(3);break}return k(w,RS(e),5);case 5:p.keySystemAccess=w.h;case 3:return w.return(p)}})}function RS(e){var t,n;return z(function(r){if(r.g==1){var s=e.keySystemConfiguration,l=[],c=[];return s.audio&&l.push({robustness:s.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:s.audio.encryptionScheme}),s.video&&c.push({robustness:s.video.robustness||"",contentType:e.video.contentType,encryptionScheme:s.video.encryptionScheme}),s={initDataTypes:s.initDataType?[s.initDataType]:[],distinctiveIdentifier:s.distinctiveIdentifier,persistentState:s.persistentState,sessionTypes:s.sessionTypes},l.length&&(s.audioCapabilities=l),c.length&&(s.videoCapabilities=c),t=s,k(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}we("McEncryptionSchemePolyfill",IS),IS.install=MS;function rh(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}rh.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=b(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=b(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},rh.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function LS(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function DS(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function lm(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&(FM||jM))}function fm(){}function PS(){ES(),MS()}we("EncryptionSchemePolyfills",fm),fm.install=PS;var jM=navigator.userAgent.includes("CrKey"),FM=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10);typeof x<"u"&&x.exports&&(x.exports=fm)}).call(i,o,o,void 0);for(var u in i.shaka)f[u]=i.shaka[u]})()})(DT);const MC=VL(DT);let Cs,di;const Cg={playingState:!1},HL=async f=>{MC.polyfill.installAll(),di=f,di||(di=document.createElement("video"),di.style.cssText="position: absolute; top: 0; left: 0; z-index: -1",di.width=window.innerWidth,di.height=window.innerHeight,Cs=new MC.Player,await Cs.attach(di),di.autoplay=!1,Cs.addEventListener("error",o=>{console.error(o)}),document.body.insertBefore(di,document.body.firstChild))},GL=async f=>{if(!Cs||!di)throw"Player not initialized yet";await Cs.load(f.streamUrl)},WL=()=>{di.play().then(()=>{Cg.playingState=!0})},XL=()=>{di.pause(),Cg.playingState=!1},qL=async()=>{await Cs.destroy(),Cs=null,di.remove(),di=null},KL=()=>di.currentTime,YL=()=>di.duration,QL=()=>{let f=o=>new Date(o*1e3).toISOString().substr(14,5);return`${f(di.currentTime)} : ${f(Math.floor(di.duration))}`},Fr={init:HL,load:GL,play:WL,pause:XL,getCurrentTime:KL,getVideoDuration:YL,getTimeFormat:QL,state:Cg,destroy:qL},ZL=tt.Component("Player",{code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(b),v===!0&&(M-=1),o=a[0];const _={};a[1]=this.element({parent:o||"root"},v===!0?y:i),_.y=1080,_.mount="{y:1}",_.w=1920,_.h=150,_.color={top:"0x00000000",bottom:"0x444444ff"},_.alpha={transition:i.controlsVisibility},a[1].populate(_),v===!0&&(M-=1),o=a[1];const O={};a[2]=this.element({parent:o||"root"},v===!0?y:i),O.x=60,O.y=50,a[2].populate(O),v===!0&&(M-=1),o=a[2];const B={};a[3]=this.element({parent:o||"root"},v===!0?y:i),B.w=60,B.h=60,B.color="0x0087ceeb",B.effects=[{type:"radius",props:{radius:16}}],a[3].populate(B),v===!0&&(M-=1),o=a[3];const G={};a[4]=this.element({parent:o||"root"},v===!0?y:i),G.y=14,G.x=14,G.w=32,G.h=32,G.src=i.playing?"assets/player/pause.png":"assets/player/play.png",a[4].populate(G),v===!0&&(M-=1),o=a[2];const $={};a[5]=this.element({parent:o||"root"},v===!0?y:i),$.y=22,$.x=100,$.w=i.progressLength,$.h=16,$.color="0xffffff80",$.effects=[{type:"radius",props:{radius:8}}],a[5].populate($),v===!0&&(M-=1),o=a[5];const j={};a[6]=this.element({parent:o||"root"},v===!0?y:i),j.h=16,j.w={transition:{value:i.progress,d:100,f:"ease-in-out"}},j.effects=[{type:"radius",props:{radius:8}}],j.color="0x0087ceeb",a[6].populate(j),v===!0&&(M-=1);const ne=u.components&&u.components.Circle||h.Circle;o=a[5];const X={};a[7]=this.element({parent:o||"root"},v===!0?y:i),X.size=28,X.color="0xffffffff",X.y="-6",X.x={transition:{value:i.progress-8,d:100,f:"ease-in-out"}};const K=[];if(typeof ne<"u")for(let J in ne.config.props)delete X[ne.config.props[J]],K.push(ne.config.props[J]);a[7].populate(X),v===!0&&(M-=1),o=a[7];const ee={};ee.size=28,ee.color="0xffffffff",ee.y="-6",C={transition:{value:i.progress-8,d:100,f:"ease-in-out"}},Array.isArray(C)===!0&&(C=x(C).slice(0)),ee.x=C,m=ee.is||"Circle";let de;if(typeof m=="string"){if(de=u.components&&u.components[m]||h[m],!de)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(de=m);a[8]=de.call(null,{props:ee},a[7],i),a[8][Symbol.for("slots")][0]?(o=a[8][Symbol.for("slots")][0],y=a[8],v=!0):o=a[8][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[2];const k={};a[9]=this.element({parent:o||"root"},v===!0?y:i),k.x=1660,k.y=16,a[9].populate(k),v===!0&&(M-=1),o=a[9];const V={};a[10]=this.element({parent:o||"root"},v===!0?y:i),V.content=i.currentTime,V.size=25,V.__textnode=!0,a[10].populate(V),v===!0&&(M-=1),o=a[9];const Q={};a[11]=this.element({parent:o||"root"},v===!0?y:i),Q.x=70,Q.size=25,Q.content="/",Q.__textnode=!0,a[11].populate(Q),v===!0&&(M-=1),o=a[9];const se={};return a[12]=this.element({parent:o||"root"},v===!0?y:i),se.x=85,se.size=25,se.content=i.duration,se.__textnode=!0,a[12].populate(se),v===!0&&(M-=1),a},effects:[function(o,i,u,h,g,x){i[1].set("color",{top:"0x00000000",bottom:"0x444444ff"})},function(o,i,u,h,g,x){i[1].set("alpha",{transition:o.controlsVisibility})},function(o,i,u,h,g,x){i[3].set("effects",[{type:"radius",props:{radius:16}}])},function(o,i,u,h,g,x){i[4].set("src",o.playing?"assets/player/pause.png":"assets/player/play.png")},function(o,i,u,h,g,x){i[5].set("effects",[{type:"radius",props:{radius:8}}])},function(o,i,u,h,g,x){i[6].set("w",{transition:{value:o.progress,d:100,f:"ease-in-out"}})},function(o,i,u,h,g,x){i[6].set("effects",[{type:"radius",props:{radius:8}}])},function(o,i,u,h,g,x){(typeof skip7>"u"||skip7.indexOf("x")===-1)&&i[7].set("x",{transition:{value:o.progress-8,d:100,f:"ease-in-out"}})},function(o,i,u,h,g,x){i[8][Symbol.for("props")].x={transition:{value:o.progress-8,d:100,f:"ease-in-out"}}},function(o,i,u,h,g,x){i[10].set("content",o.currentTime)},function(o,i,u,h,g,x){i[12].set("content",o.duration)}],context:{}},state(){return{controlsVisibility:0,progressLength:1520,progress:0,currentTime:"00:00",duration:"00:00",playing:!1,hideTimeout:null}},hooks:{focus(){this.$emit("clearBackground")},unfocus(){this.$emit("changeBackground")},async init(){await Fr.init()},async ready(){await Fr.load({streamUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"});const f=i=>new Date(i*1e3).toISOString().substr(14,5),o=Fr.getVideoDuration();o&&(this.duration=f(o),this.progressChunkSize=Math.round(this.progressLength/o*100)/100),this.$setInterval(()=>{const i=Fr.getCurrentTime();this.currentTime=f(i),this.progress=Math.round(i*this.progressChunkSize)},1e3),this.play()},async destroy(){await Fr.destroy()}},input:{space(){this.play()},up(){this.showControls(1)},down(){this.showControls(0)}},methods:{play(){this.showControls(1),this.hideTimeout=this.$setTimeout(()=>this.showControls(0),3e3),Fr.state.playingState==!0?(Fr.pause(),this.playing=!1):(console.log("play!"),Fr.play(),this.playing=!0)},showControls(f){this.$clearTimeout(this.hideTimeout),this.controlsVisibility=f}}}),JL=tt.Component("Colors",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w=1920,m.h=1080,m.color={transition:i.bg},a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.x=20,C.y=20,a[1].populate(C),o=a[1];const y={};a[2]=this.element({parent:o||"root"},i),y.w=100,y.h=100,y.x=0,y.color="0xecfeffff",a[2].populate(y),o=a[1];const v={};a[3]=this.element({parent:o||"root"},i),v.w=100,v.h=100,v.x=120,v.color="0xa5f3fcff",a[3].populate(v),o=a[1];const M={};a[4]=this.element({parent:o||"root"},i),M.w=100,M.h=100,M.x=240,M.color="0x22d3eeff",a[4].populate(M),o=a[1];const b={};a[5]=this.element({parent:o||"root"},i),b.w=100,b.h=100,b.x=360,b.color="0x0891b2ff",a[5].populate(b),o=a[0];const _={};a[6]=this.element({parent:o||"root"},i),_.x=20,_.y=140,a[6].populate(_),o=a[6];const O={};a[7]=this.element({parent:o||"root"},i),O.w=100,O.h=100,O.x=0,O.color="0xecfeffff",a[7].populate(O),o=a[6];const B={};a[8]=this.element({parent:o||"root"},i),B.w=100,B.h=100,B.x=120,B.color="0xa5f3fcff",a[8].populate(B),o=a[6];const G={};a[9]=this.element({parent:o||"root"},i),G.w=100,G.h=100,G.x=240,G.color="0x22d3eeff",a[9].populate(G),o=a[6];const $={};a[10]=this.element({parent:o||"root"},i),$.w=100,$.h=100,$.x=360,$.color="0x0891b2ff",a[10].populate($),o=a[0];const j={};a[11]=this.element({parent:o||"root"},i),j.x=20,j.y=260,a[11].populate(j),o=a[11];const ne={};a[12]=this.element({parent:o||"root"},i),ne.w=100,ne.h=100,ne.x=0,ne.color="0xecfeffaa",a[12].populate(ne),o=a[11];const X={};a[13]=this.element({parent:o||"root"},i),X.w=100,X.h=100,X.x=120,X.color="0xa5f3fc33",a[13].populate(X),o=a[11];const K={};a[14]=this.element({parent:o||"root"},i),K.w=100,K.h=100,K.x=240,K.color="0x22d3ee20",a[14].populate(K),o=a[11];const ee={};a[15]=this.element({parent:o||"root"},i),ee.w=100,ee.h=100,ee.x=360,ee.color="0x0891b2ff",a[15].populate(ee),o=a[0];const de={};a[16]=this.element({parent:o||"root"},i),de.x=20,de.y=380,a[16].populate(de),o=a[16];const k={};a[17]=this.element({parent:o||"root"},i),k.w=100,k.h=100,k.x=0,k.color="0xecfeffff",a[17].populate(k),o=a[16];const V={};a[18]=this.element({parent:o||"root"},i),V.w=100,V.h=100,V.x=120,V.color="0xa5f3fcff",a[18].populate(V),o=a[16];const Q={};a[19]=this.element({parent:o||"root"},i),Q.w=100,Q.h=100,Q.x=240,Q.color="0x22d3eeff",a[19].populate(Q),o=a[16];const se={};a[20]=this.element({parent:o||"root"},i),se.w=100,se.h=100,se.x=360,se.color="0x0891b2ff",a[20].populate(se),o=a[0];const J={};a[21]=this.element({parent:o||"root"},i),J.x=20,J.y=500,a[21].populate(J),o=a[21];const te={};a[22]=this.element({parent:o||"root"},i),te.w=100,te.h=100,te.x=0,te.color="0xecfeffab",a[22].populate(te),o=a[21];const W={};a[23]=this.element({parent:o||"root"},i),W.w=100,W.h=100,W.x=120,W.color="0xa5f3fc33",a[23].populate(W),o=a[21];const Z={};a[24]=this.element({parent:o||"root"},i),Z.w=100,Z.h=100,Z.x=240,Z.color="0x22d3ee21",a[24].populate(Z),o=a[21];const ce={};a[25]=this.element({parent:o||"root"},i),ce.w=100,ce.h=100,ce.x=360,ce.color="0x0891b2ff",a[25].populate(ce),o=a[0];const xe={};a[26]=this.element({parent:o||"root"},i),xe.x=20,xe.y=620,a[26].populate(xe),o=a[26];const ge={};a[27]=this.element({parent:o||"root"},i),ge.w=100,ge.h=100,ge.x=0,ge.color="0x000000ff",a[27].populate(ge),o=a[26];const pe={};a[28]=this.element({parent:o||"root"},i),pe.w=100,pe.h=100,pe.x=120,pe.color="0xccccccff",a[28].populate(pe),o=a[26];const Ee={};a[29]=this.element({parent:o||"root"},i),Ee.w=100,Ee.h=100,Ee.x=240,Ee.color="0x889900ff",a[29].populate(Ee),o=a[26];const Re={};a[30]=this.element({parent:o||"root"},i),Re.w=100,Re.h=100,Re.x=360,Re.color="0x00ff00ff",a[30].populate(Re),o=a[0];const z={};a[31]=this.element({parent:o||"root"},i),z.x=20,z.y=740,a[31].populate(z),o=a[31];const Me={};a[32]=this.element({parent:o||"root"},i),Me.w=100,Me.h=100,Me.x=0,Me.color="0x000000ff",a[32].populate(Me),o=a[31];const ye={};a[33]=this.element({parent:o||"root"},i),ye.w=100,ye.h=100,ye.x=120,ye.color="0xccccccff",a[33].populate(ye),o=a[31];const Ue={};a[34]=this.element({parent:o||"root"},i),Ue.w=100,Ue.h=100,Ue.x=240,Ue.color="0x889900ff",a[34].populate(Ue),o=a[31];const De={};a[35]=this.element({parent:o||"root"},i),De.w=100,De.h=100,De.x=360,De.color="0x00ff00ff",a[35].populate(De),o=a[0];const We={};a[36]=this.element({parent:o||"root"},i),We.x=620,We.y=20,a[36].populate(We),o=a[36];const Xe={};a[37]=this.element({parent:o||"root"},i),Xe.w=300,Xe.h=200,Xe.x=0,Xe.color={transition:i.color1},a[37].populate(Xe),o=a[36];const ze={};a[38]=this.element({parent:o||"root"},i),ze.w=300,ze.h=200,ze.x=0,ze.y=250,ze.color={transition:i.color2},a[38].populate(ze),o=a[36];const we={};a[39]=this.element({parent:o||"root"},i),we.w=300,we.h=200,we.x=100,we.y=400,we.color={transition:i.color3},a[39].populate(we),o=a[36];const et={};return a[40]=this.element({parent:o||"root"},i),et.w=300,et.h=200,et.x=0,et.y=650,et.color={transition:{value:i.color4,d:1e3,f:"ease-in-out"}},a[40].populate(et),a},effects:[function(o,i,u,h,g,x){i[0].set("color",{transition:o.bg})},function(o,i,u,h,g,x){i[37].set("color",{transition:o.color1})},function(o,i,u,h,g,x){i[38].set("color",{transition:o.color2})},function(o,i,u,h,g,x){i[39].set("color",{transition:o.color3})},function(o,i,u,h,g,x){i[40].set("color",{transition:{value:o.color4,d:1e3,f:"ease-in-out"}})}],context:{}},state(){return{bg:"#fff",color1:"#22d3ee",color2:"#dc2626",color3:"rgba(251, 191, 36)",color4:"#bfdbfe"}},input:{enter(){this.color1=this.color1==="#0891b2"?"#22d3ee":"#0891b2",this.color2=this.color2==="#dc2626"?"#0f0":"#dc2626",this.color3=this.color3==="rgba(251, 191, 36)"?"rgba(30, 64, 175, 0.5)":"rgba(251, 191, 36)",this.color4=this.color4==="#1e3a8a"?"#bfdbfe":"#1e3a8a"}},hooks:{ready(){let f=0;const o=["#fff","#333","#c0ff33","#546aaa","#000","tomato"];this.$setInterval(()=>{f=f+1,f===o.length-1&&(f=0),this.bg=o[f]},2e3)}}}),e6=tt.Component("Gradients",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.w=1920/4,C.h=1080,C.color="{top: '0x0891b2ff', bottom: '0xa5f3fcff'}",a[1].populate(C),o=a[0];const y={};a[2]=this.element({parent:o||"root"},i),y.w=1920/4,y.h=1080,y.x=1920/4,y.color="{left: '0xdc2626ff',  right: '0xf87171ff'}",a[2].populate(y),o=a[0];const v={};a[3]=this.element({parent:o||"root"},i),v.w=1920/4,v.h=1080,v.x=1920/4*2,v.color="{top: '0x0891b2ff', right: '0xf87171ff'}",a[3].populate(v),o=a[0];const M={};return a[4]=this.element({parent:o||"root"},i),M.w=1920/4,M.h=1080,M.x=1920/4*3,M.color="{right: '0x008000ff', bottom: '0xffd700ff'}",a[4].populate(M),a},effects:[function(o,i,u,h,g,x){i[1].set("w",1920/4)},function(o,i,u,h,g,x){i[2].set("w",1920/4)},function(o,i,u,h,g,x){i[2].set("x",1920/4)},function(o,i,u,h,g,x){i[3].set("w",1920/4)},function(o,i,u,h,g,x){i[3].set("x",1920/4*2)},function(o,i,u,h,g,x){i[4].set("w",1920/4)},function(o,i,u,h,g,x){i[4].set("x",1920/4*3)}],context:{}}}),t6=tt.Component("Transitions",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.x=60,a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.w=200,C.h=200,C.x=50,C.y={transition:i.y},C.color="0xc4b5fdff",a[1].populate(C),o=a[0];const y={};a[2]=this.element({parent:o||"root"},i),y.w=200,y.h=200,y.x=300,y.y={transition:{value:i.y}},y.color="0xa78bfaff",a[2].populate(y),o=a[0];const v={};a[3]=this.element({parent:o||"root"},i),v.w=200,v.h=200,v.x=550,v.y={transition:{value:i.y,duration:1e3,start:i.start,end:i.doneTransition3}},v.color="0x8b5cf6ff",v.ref="bla",a[3].populate(v),o=a[0];const M={};a[4]=this.element({parent:o||"root"},i),M.w=200,M.h=200,M.x=800,M.y={transition:{value:i.y,duration:500,delay:500,start:i.start,end:i.finished}},M.color="0x7c3aedff",a[4].populate(M),o=a[0];const b={};a[5]=this.element({parent:o||"root"},i),b.w=200,b.h=200,b.x=1050,b.y={transition:{value:i.y,easing:"ease-in-out",end:i.finished}},b.color="0x6d28d9ff",a[5].populate(b),o=a[0];const _={};a[6]=this.element({parent:o||"root"},i),_.w=200,_.h=200,_.x=1300,_.y={transition:{value:i.y,duration:3e3,easing:"ease-in-out-back",end:i.finished}},_.color="0x5b21b6ff",a[6].populate(_),o=a[0];const O={};return a[7]=this.element({parent:o||"root"},i),O.w=200,O.h=200,O.x=1550,O.y={transition:{value:i.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},O.color="0x4c1d95ff",a[7].populate(O),a},effects:[function(o,i,u,h,g,x){i[1].set("y",{transition:o.y})},function(o,i,u,h,g,x){i[2].set("y",{transition:{value:o.y}})},function(o,i,u,h,g,x){i[3].set("y",{transition:{value:o.y,duration:1e3,start:o.start,end:o.doneTransition3}})},function(o,i,u,h,g,x){i[4].set("y",{transition:{value:o.y,duration:500,delay:500,start:o.start,end:o.finished}})},function(o,i,u,h,g,x){i[5].set("y",{transition:{value:o.y,easing:"ease-in-out",end:o.finished}})},function(o,i,u,h,g,x){i[6].set("y",{transition:{value:o.y,duration:3e3,easing:"ease-in-out-back",end:o.finished}})},function(o,i,u,h,g,x){i[7].set("y",{transition:{value:o.y,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}],context:{}},state(){return{y:50}},hooks:{init(){this.$setInterval(()=>{this.go()},12e3),this.go()}},methods:{doneTransition3(){this.$log.info("Transition 3 is done!")},start(f,o,i){this.$log.info("Start transition",f.nodeId,o,i)},finished(f,o,i){this.$log.info("Finished transition",f.nodeId,o,i)},go(){this.y=50,this.$setTimeout(()=>{this.y=1080-50-200},1e3),this.$setTimeout(()=>{this.y=50,this.$setTimeout(()=>{this.y=200},1e3)},6e3)}}}),n6=tt.Component("Alpha",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.y=100,a[1].populate(C),o=a[1];const y={};a[2]=this.element({parent:o||"root"},i),y.w=200,y.h=200,y.x=100,y.color="0xffffffff",y.alpha=.2,a[2].populate(y),o=a[1];const v={};a[3]=this.element({parent:o||"root"},i),v.w=200,v.h=200,v.x=320,v.color="0xffffffff",v.alpha=.4,a[3].populate(v),o=a[1];const M={};a[4]=this.element({parent:o||"root"},i),M.w=200,M.h=200,M.x=540,M.color="0xffffffff",M.alpha=.6,a[4].populate(M),o=a[1];const b={};a[5]=this.element({parent:o||"root"},i),b.w=200,b.h=200,b.x=760,b.color="0xffffffff",b.alpha=.8,a[5].populate(b),o=a[1];const _={};a[6]=this.element({parent:o||"root"},i),_.w=200,_.h=200,_.x=980,_.color="0xffffffff",_.alpha=1,a[6].populate(_),o=a[0];const O={};a[7]=this.element({parent:o||"root"},i),O.w=200,O.h=200,O.x=100,O.y=320,O.color="0xffffffff",O.alpha=i.alpha,a[7].populate(O),o=a[0];const B={};a[8]=this.element({parent:o||"root"},i),B.w=200,B.h=200,B.x=100,B.y=540,B.color="0xffffffff",B.alpha=i.alpha,a[8].populate(B),o=a[0];const G={};a[9]=this.element({parent:o||"root"},i),G.w=200,G.h=200,G.x=100,G.y=760,G.color="0xffffffff",G.alpha={transition:{value:i.alpha,duration:1e3,easing:"ease-in-out-circ"}},a[9].populate(G),o=a[0];const $={};a[10]=this.element({parent:o||"root"},i),$.w=428,$.h=234,$.x=1200,$.y=100,$.src=i.image,$.alpha=1,a[10].populate($),o=a[0];const j={};a[11]=this.element({parent:o||"root"},i),j.w=428,j.h=234,j.x=1300,j.y=100+234-40,j.src=i.image,j.alpha=.4,a[11].populate(j),o=a[0];const ne={};a[12]=this.element({parent:o||"root"},i),ne.w=428,ne.h=234,ne.x=1200,ne.y=100+234*2-40*2,ne.src=i.image,ne.alpha=.1,a[12].populate(ne),o=a[0];const X={};a[13]=this.element({parent:o||"root"},i),X.x=400,X.y=400,X.alpha=.2,X.content="Text with alpha applied directly",X.__textnode=!0,a[13].populate(X),o=a[0];const K={};a[14]=this.element({parent:o||"root"},i),K.alpha=.5,K.x=400,K.y=500,a[14].populate(K),o=a[14];const ee={};return a[15]=this.element({parent:o||"root"},i),ee.content="Text with alpha applied on parent element",ee.__textnode=!0,a[15].populate(ee),a},effects:[function(o,i,u,h,g,x){i[8].set("alpha",o.alpha)},function(o,i,u,h,g,x){i[9].set("alpha",{transition:{value:o.alpha,duration:1e3,easing:"ease-in-out-circ"}})},function(o,i,u,h,g,x){i[10].set("src",o.image)},function(o,i,u,h,g,x){i[11].set("y",100+234-40)},function(o,i,u,h,g,x){i[11].set("src",o.image)},function(o,i,u,h,g,x){i[12].set("y",100+234*2-40*2)},function(o,i,u,h,g,x){i[12].set("src",o.image)}],context:{}},state(){return{alpha:.5,direction:"up",image:"assets/lightningbolt.png"}},hooks:{ready(){this.$setInterval(()=>{const f=this.direction==="up"?this.alpha+.2:this.alpha-.2;this.alpha=Math.max(Math.min(f,1),.1),this.alpha===1&&(this.direction="down"),this.alpha===.1&&(this.direction="up")},1400)}}}),i6=tt.Component("Scaling",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.x=100,C.y=100,C.w=150,C.h=150,C.color="0x64748bff",a[1].populate(C),o=a[0];const y={};a[2]=this.element({parent:o||"root"},i),y.x=300,y.y=100,y.w=100,y.h=100,y.color="0x64748bff",y.scale=1.5,a[2].populate(y),o=a[0];const v={};a[3]=this.element({parent:o||"root"},i),v.x=100,v.y=400,v.w=100,v.h=100,v.color="0xb45309ff",v.scale=i.scale,a[3].populate(v),o=a[0];const M={};a[4]=this.element({parent:o||"root"},i),M.x=900,M.y=400,M.w=100,M.h=100,M.src=i.balloon,M.scale={transition:{value:i.scale,easing:"ease-in-out"}},a[4].populate(M),o=a[0];const b={};a[5]=this.element({parent:o||"root"},i),b.x=300,b.y=600,b.w=100,b.h=100,b.color="0x059669ff",b.scale=i.scale2,a[5].populate(b),o=a[5];const _={};a[6]=this.element({parent:o||"root"},i),_.x=10,_.y=10,_.h=60,_.w=80,_.color="0x0369a1ff",a[6].populate(_),o=a[0];const O={};a[7]=this.element({parent:o||"root"},i),O.x=1500,O.y=600,O.w=100,O.h=100,O.color="0x059669ff",O.scale=i.scale2,a[7].populate(O),o=a[7];const B={};return a[8]=this.element({parent:o||"root"},i),B.x=10,B.y=10,B.h=60,B.w=80,B.color="0x0369a1ff",B.scale=i.scale2/2,a[8].populate(B),a},effects:[function(o,i,u,h,g,x){i[4].set("src",o.balloon)},function(o,i,u,h,g,x){i[4].set("scale",{transition:{value:o.scale,easing:"ease-in-out"}})},function(o,i,u,h,g,x){i[5].set("scale",o.scale2)},function(o,i,u,h,g,x){i[7].set("scale",o.scale2)},function(o,i,u,h,g,x){i[8].set("scale",o.scale2/2)}],context:{}},state(){return{scale:2,direction:"up",balloon:"assets/balloon.png",scale2:1}},hooks:{ready(){this.$setInterval(()=>{const i=this.direction==="up"?this.scale+.5:0;this.scale=Math.max(Math.min(i,8),0),this.scale===8&&(this.direction="down"),this.scale===0&&(this.direction="up")},500),this.$setInterval(()=>{this.scale2=this.scale2===1?3:1},2e3)}}}),o6=tt.Component("Rotation",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.y=70,a[1].populate(C),o=a[1];const y={};a[2]=this.element({parent:o||"root"},i),y.x=100,y.y=0,y.w=200,y.h=100,y.color="0xfee2e2ff",y.rotation=0,a[2].populate(y),o=a[1];const v={};a[3]=this.element({parent:o||"root"},i),v.x=100,v.y=150,v.w=200,v.h=100,v.color="0xfecacaff",v.rotation=10,a[3].populate(v),o=a[1];const M={};a[4]=this.element({parent:o||"root"},i),M.x=100,M.y=300,M.w=200,M.h=100,M.color="0xfca5a5ff",M.rotation=20,a[4].populate(M),o=a[1];const b={};a[5]=this.element({parent:o||"root"},i),b.x=100,b.y=450,b.w=200,b.h=100,b.color="0xf87171ff",b.rotation=30,a[5].populate(b),o=a[1];const _={};a[6]=this.element({parent:o||"root"},i),_.x=100,_.y=610,_.w=200,_.h=100,_.color="0xef4444ff",_.rotation=40,a[6].populate(_),o=a[1];const O={};a[7]=this.element({parent:o||"root"},i),O.x=100,O.y=800,O.w=200,O.h=100,O.color="0xdc2626ff",O.rotation=50,a[7].populate(O),o=a[0];const B={};a[8]=this.element({parent:o||"root"},i),B.y=70,B.x=300,a[8].populate(B),o=a[8];const G={};a[9]=this.element({parent:o||"root"},i),G.x=100,G.y=0,G.w=200,G.h=100,G.color="0xfee2e2ff",G.rotation=60,a[9].populate(G),o=a[8];const $={};a[10]=this.element({parent:o||"root"},i),$.x=100,$.y=150,$.w=200,$.h=100,$.color="0xfecacaff",$.rotation=70,a[10].populate($),o=a[8];const j={};a[11]=this.element({parent:o||"root"},i),j.x=100,j.y=300,j.w=200,j.h=100,j.color="0xfca5a5ff",j.rotation=80,a[11].populate(j),o=a[8];const ne={};a[12]=this.element({parent:o||"root"},i),ne.x=100,ne.y=450,ne.w=200,ne.h=100,ne.color="0xf87171ff",ne.rotation=90,a[12].populate(ne),o=a[8];const X={};a[13]=this.element({parent:o||"root"},i),X.x=100,X.y=610,X.w=200,X.h=100,X.color="0xef4444ff",X.rotation=100,a[13].populate(X),o=a[8];const K={};a[14]=this.element({parent:o||"root"},i),K.x=100,K.y=800,K.w=200,K.h=100,K.color="0xdc2626ff",K.rotation=100,a[14].populate(K),o=a[0];const ee={};a[15]=this.element({parent:o||"root"},i),ee.y=70,ee.x=600,a[15].populate(ee),o=a[15];const de={};a[16]=this.element({parent:o||"root"},i),de.x=100,de.y=0,de.w=200,de.h=100,de.color="0xfee2e2ff",de.rotation=110,a[16].populate(de),o=a[15];const k={};a[17]=this.element({parent:o||"root"},i),k.x=100,k.y=150,k.w=200,k.h=100,k.color="0xfecacaff",k.rotation=120,a[17].populate(k),o=a[15];const V={};a[18]=this.element({parent:o||"root"},i),V.x=100,V.y=300,V.w=200,V.h=100,V.color="0xfca5a5ff",V.rotation=130,a[18].populate(V),o=a[15];const Q={};a[19]=this.element({parent:o||"root"},i),Q.x=100,Q.y=450,Q.w=200,Q.h=100,Q.color="0xf87171ff",Q.rotation=140,a[19].populate(Q),o=a[15];const se={};a[20]=this.element({parent:o||"root"},i),se.x=100,se.y=610,se.w=200,se.h=100,se.color="0xef4444ff",se.rotation=150,a[20].populate(se),o=a[15];const J={};a[21]=this.element({parent:o||"root"},i),J.x=100,J.y=800,J.w=200,J.h=100,J.color="0xdc2626ff",J.rotation=160,a[21].populate(J),o=a[0];const te={};a[22]=this.element({parent:o||"root"},i),te.y=70,te.x=900,a[22].populate(te),o=a[22];const W={};a[23]=this.element({parent:o||"root"},i),W.x=100,W.y=0,W.w=200,W.h=100,W.color="0xfee2e2ff",W.rotation=170,a[23].populate(W),o=a[22];const Z={};a[24]=this.element({parent:o||"root"},i),Z.x=100,Z.y=150,Z.w=200,Z.h=100,Z.color="0xfecacaff",Z.rotation=180,a[24].populate(Z),o=a[22];const ce={};a[25]=this.element({parent:o||"root"},i),ce.x=100,ce.y=300,ce.w=200,ce.h=100,ce.color="0xfca5a5ff",ce.rotation=190,a[25].populate(ce),o=a[22];const xe={};a[26]=this.element({parent:o||"root"},i),xe.x=100,xe.y=450,xe.w=200,xe.h=100,xe.color="0xf87171ff",xe.rotation=200,a[26].populate(xe),o=a[22];const ge={};a[27]=this.element({parent:o||"root"},i),ge.x=100,ge.y=610,ge.w=200,ge.h=100,ge.color="0xef4444ff",ge.rotation=210,a[27].populate(ge),o=a[22];const pe={};a[28]=this.element({parent:o||"root"},i),pe.x=100,pe.y=800,pe.w=200,pe.h=100,pe.color="0xdc2626ff",pe.rotation=220,a[28].populate(pe),o=a[0];const Ee={};a[29]=this.element({parent:o||"root"},i),Ee.y=70,Ee.x=1200,a[29].populate(Ee),o=a[29];const Re={};a[30]=this.element({parent:o||"root"},i),Re.x=100,Re.y=0,Re.w=200,Re.h=100,Re.color="0xfee2e2ff",Re.rotation=230,a[30].populate(Re),o=a[29];const z={};a[31]=this.element({parent:o||"root"},i),z.x=100,z.y=150,z.w=200,z.h=100,z.color="0xfecacaff",z.rotation=240,a[31].populate(z),o=a[29];const Me={};a[32]=this.element({parent:o||"root"},i),Me.x=100,Me.y=300,Me.w=200,Me.h=100,Me.color="0xfca5a5ff",Me.rotation=250,a[32].populate(Me),o=a[29];const ye={};a[33]=this.element({parent:o||"root"},i),ye.x=100,ye.y=450,ye.w=200,ye.h=100,ye.color="0xf87171ff",ye.rotation=260,a[33].populate(ye),o=a[29];const Ue={};a[34]=this.element({parent:o||"root"},i),Ue.x=100,Ue.y=610,Ue.w=200,Ue.h=100,Ue.color="0xef4444ff",Ue.rotation=270,a[34].populate(Ue),o=a[29];const De={};a[35]=this.element({parent:o||"root"},i),De.x=100,De.y=800,De.w=200,De.h=100,De.color="0xdc2626ff",De.rotation=280,a[35].populate(De),o=a[0];const We={};a[36]=this.element({parent:o||"root"},i),We.y=70,We.x=1500,a[36].populate(We),o=a[36];const Xe={};a[37]=this.element({parent:o||"root"},i),Xe.x=100,Xe.y=0,Xe.w=200,Xe.h=100,Xe.color="0xfee2e2ff",Xe.rotation=290,a[37].populate(Xe),o=a[36];const ze={};a[38]=this.element({parent:o||"root"},i),ze.x=100,ze.y=150,ze.w=200,ze.h=100,ze.color="0xfecacaff",ze.rotation=300,a[38].populate(ze),o=a[36];const we={};a[39]=this.element({parent:o||"root"},i),we.x=100,we.y=300,we.w=200,we.h=100,we.color="0xfca5a5ff",we.rotation=310,a[39].populate(we),o=a[36];const et={};a[40]=this.element({parent:o||"root"},i),et.x=100,et.y=450,et.w=200,et.h=100,et.color="0xf87171ff",et.rotation=320,a[40].populate(et),o=a[36];const Je={};a[41]=this.element({parent:o||"root"},i),Je.x=100,Je.y=610,Je.w=200,Je.h=100,Je.color="0xef4444ff",Je.rotation=330,a[41].populate(Je),o=a[36];const Ze={};a[42]=this.element({parent:o||"root"},i),Ze.x=100,Ze.y=800,Ze.w=200,Ze.h=100,Ze.color="0xdc2626ff",Ze.rotation=340,a[42].populate(Ze),o=a[0];const ot={};a[43]=this.element({parent:o||"root"},i),ot.x=200,ot.y=200,ot.w=400,ot.h=400,ot.color="0x0891b2ff",ot.rotation=i.rotation1,a[43].populate(ot),o=a[0];const St={};a[44]=this.element({parent:o||"root"},i),St.x=800,St.y=200,St.w=400,St.h=400,St.color="0x0891b2ff",St.rotation=i.rotation2,a[44].populate(St),o=a[0];const lt={};return a[45]=this.element({parent:o||"root"},i),lt.x=1400,lt.y=200,lt.w=400,lt.h=400,lt.color="0x0891b2ff",lt.rotation={transition:i.rotation3},a[45].populate(lt),a},effects:[function(o,i,u,h,g,x){i[44].set("rotation",o.rotation2)},function(o,i,u,h,g,x){i[45].set("rotation",{transition:o.rotation3})}],context:{}},state(){return{rotation1:38,rotation2:0,rotation3:0}},hooks:{ready(){let f=800,o=2e3;this.$setInterval(()=>{const i=this.rotation2+10;this.rotation2=i<=360?i:0},f),this.$setInterval(()=>{this.rotation3=Math.max(10,Math.min(720,this.rotation3*2)),this.rotation3===720&&(this.rotation3=0)},o)}}}),r6=tt.Component("KeyInput",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.x=525,m.y=130,a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.w=200,C.h=200,C.color=i.focusColor,C.x=i.focusedX*220,C.y=i.focusedY*210,a[1].populate(C),o=a[0];const y={};a[2]=this.element({parent:o||"root"},i),y.w=180,y.h=180,y.x=10,y.y=10,y.color=i.blockColor,a[2].populate(y),o=a[0];const v={};a[3]=this.element({parent:o||"root"},i),v.w=180,v.h=180,v.x=230,v.y=10,v.color=i.blockColor,a[3].populate(v),o=a[0];const M={};a[4]=this.element({parent:o||"root"},i),M.w=180,M.h=180,M.x=450,M.y=10,M.color=i.blockColor,a[4].populate(M),o=a[0];const b={};a[5]=this.element({parent:o||"root"},i),b.w=180,b.h=180,b.x=670,b.y=10,b.color=i.blockColor,a[5].populate(b),o=a[0];const _={};a[6]=this.element({parent:o||"root"},i),_.w=180,_.h=180,_.x=10,_.y=220,_.color=i.blockColor,a[6].populate(_),o=a[0];const O={};a[7]=this.element({parent:o||"root"},i),O.w=180,O.h=180,O.x=230,O.y=220,O.color=i.blockColor,a[7].populate(O),o=a[0];const B={};a[8]=this.element({parent:o||"root"},i),B.w=180,B.h=180,B.x=450,B.y=220,B.color=i.blockColor,a[8].populate(B),o=a[0];const G={};a[9]=this.element({parent:o||"root"},i),G.w=180,G.h=180,G.x=670,G.y=220,G.color=i.blockColor,a[9].populate(G),o=a[0];const $={};a[10]=this.element({parent:o||"root"},i),$.w=180,$.h=180,$.x=10,$.y=430,$.color=i.blockColor,a[10].populate($),o=a[0];const j={};a[11]=this.element({parent:o||"root"},i),j.w=180,j.h=180,j.x=230,j.y=430,j.color=i.blockColor,a[11].populate(j),o=a[0];const ne={};a[12]=this.element({parent:o||"root"},i),ne.w=180,ne.h=180,ne.x=450,ne.y=430,ne.color=i.blockColor,a[12].populate(ne),o=a[0];const X={};a[13]=this.element({parent:o||"root"},i),X.w=180,X.h=180,X.x=670,X.y=430,X.color=i.blockColor,a[13].populate(X),o=a[0];const K={};a[14]=this.element({parent:o||"root"},i),K.w=180,K.h=180,K.x=10,K.y=640,K.color=i.blockColor,a[14].populate(K),o=a[0];const ee={};a[15]=this.element({parent:o||"root"},i),ee.w=180,ee.h=180,ee.x=230,ee.y=640,ee.color=i.blockColor,a[15].populate(ee),o=a[0];const de={};a[16]=this.element({parent:o||"root"},i),de.w=180,de.h=180,de.x=450,de.y=640,de.color=i.blockColor,a[16].populate(de),o=a[0];const k={};return a[17]=this.element({parent:o||"root"},i),k.w=180,k.h=180,k.x=670,k.y=640,k.color=i.blockColor,a[17].populate(k),a},effects:[function(o,i,u,h,g,x){i[1].set("color",o.focusColor)},function(o,i,u,h,g,x){i[1].set("x",o.focusedX*220)},function(o,i,u,h,g,x){i[1].set("y",o.focusedY*210)},function(o,i,u,h,g,x){i[2].set("color",o.blockColor)},function(o,i,u,h,g,x){i[3].set("color",o.blockColor)},function(o,i,u,h,g,x){i[4].set("color",o.blockColor)},function(o,i,u,h,g,x){i[5].set("color",o.blockColor)},function(o,i,u,h,g,x){i[6].set("color",o.blockColor)},function(o,i,u,h,g,x){i[7].set("color",o.blockColor)},function(o,i,u,h,g,x){i[8].set("color",o.blockColor)},function(o,i,u,h,g,x){i[9].set("color",o.blockColor)},function(o,i,u,h,g,x){i[10].set("color",o.blockColor)},function(o,i,u,h,g,x){i[11].set("color",o.blockColor)},function(o,i,u,h,g,x){i[12].set("color",o.blockColor)},function(o,i,u,h,g,x){i[13].set("color",o.blockColor)},function(o,i,u,h,g,x){i[14].set("color",o.blockColor)},function(o,i,u,h,g,x){i[15].set("color",o.blockColor)},function(o,i,u,h,g,x){i[16].set("color",o.blockColor)},function(o,i,u,h,g,x){i[17].set("color",o.blockColor)}],context:{}},state(){return{focusedX:0,focusedY:0,colorscheme:"yellow"}},computed:{blockColor(){return this.colorscheme,this.colorscheme==="yellow"?"#fef08a":"#bae6fd"},focusColor(){return this.colorscheme,this.colorscheme==="yellow"?"#facc15":"#38bdf8"}},input:{left(){const f=this.focusedX-1;this.focusedX=Math.max(f,0)},right(){const f=this.focusedX+1;this.focusedX=Math.min(f,3)},up(){this.focusedY=Math.max(this.focusedY-1,0)},down(){this.focusedY=Math.min(this.focusedY+1,3)},enter(){this.colorscheme=this.colorscheme==="yellow"?"blue":"yellow"},any(f){const o=parseInt(f.key);isNaN(o)?this.parent.$focus(f):(this.focusedX=Math.max(0,(o-1)%4),this.focusedY=Math.max(0,Math.ceil(o/4)-1))}}}),jm=["#64748b","#ef4444","#f97316","#84cc16","#14b8a6","#3b82f6"],Fm=["Iron Man","Captain America","Thor","Hulk","Black Widow","Hawkeye","Scarlet Witch","Vision","Black Panther","Doctor Strange","Spider-Man","Ant-Man","Wasp","Captain Marvel","Falcon","Winter Soldier","War Machine","Quicksilver","Star-Lord","Gamora"],s6=tt.Component("Texts",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.x=100,m.y=100,a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.content="Default text",C["@loaded"]=i.textLoaded&&i.textLoaded.bind(i),C.__textnode=!0,a[1].populate(C),o=a[0];const y={};a[2]=this.element({parent:o||"root"},i),y.content="123456",y.x=400,y.__textnode=!0,a[2].populate(y),o=a[0];const v={};a[3]=this.element({parent:o||"root"},i),v.content="Text with a different fontsize",v.size=i.size,v.y=120,v.font="raleway",v.__textnode=!0,a[3].populate(v),o=a[0];const M={};a[4]=this.element({parent:o||"root"},i),M.content="Text with a different color",M.size=50,M.color=i.color,M.y=250,M.__textnode=!0,a[4].populate(M),o=a[0];const b={};a[5]=this.element({parent:o||"root"},i),b.content="Letterspacing",b.size=50,b.color="0x38bdf8ff",b.y=450,b.letterspacing=40,b.__textnode=!0,a[5].populate(b),o=a[0];const _={};a[6]=this.element({parent:o||"root"},i),_.w=800,_.h=100,_.y=550,_.color="0x94a3b8ff",a[6].populate(_),o=a[6];const O={};a[7]=this.element({parent:o||"root"},i),O.content="Text align center",O.size=50,O.y=15,O.color="0xbae6fdff",O.align="center",O.maxwidth=800,O.__textnode=!0,a[7].populate(O),o=a[0];const B={};a[8]=this.element({parent:o||"root"},i),B.w=800,B.h=200,B.x=900,B.y=550,B.color="0x94a3b8ff",a[8].populate(B),o=a[8];const G={};a[9]=this.element({parent:o||"root"},i),G.content=i.longText,G.size=40,G.color="0xbae6fdff",G.maxwidth=800,G.maxlines=5,G.textoverflow="!!!",G.__textnode=!0,a[9].populate(G),o=a[0];const $={};a[10]=this.element({parent:o||"root"},i),$.w=800,$.h=120,$.x=900,$.y=800,$.color="0x94a3b8ff",a[10].populate($),o=a[10];const j={};a[11]=this.element({parent:o||"root"},i),j.content=i.longText,j.size=40,j.color="0xbae6fdff",j.maxwidth=800,j.maxlines=2,j.lineheight=60,j.textoverflow=!1,j.__textnode=!0,a[11].populate(j),o=a[0];const ne={};a[12]=this.element({parent:o||"root"},i),ne.content=i.character,ne.size=50,ne.color=i.color,ne.y=750,ne.font="opensans",ne.__textnode=!0,a[12].populate(ne),o=a[0];const X={};a[13]=this.element({parent:o||"root"},i),X.x=1200,X.y=300,a[13].populate(X),o=a[13];const K={};a[14]=this.element({parent:o||"root"},i),K.rotation={transition:i.rotation},K.pivot=0,K.content="Hello",K.__textnode=!0,a[14].populate(K),o=a[13];const ee={};a[15]=this.element({parent:o||"root"},i),ee.x=150,ee.rotation={transition:i.rotation},ee.pivot=.5,ee.content="World",ee.__textnode=!0,a[15].populate(ee),o=a[13];const de={};a[16]=this.element({parent:o||"root"},i),de.x=300,de.rotation={transition:i.rotation},de.pivot=1,de.content="!!",de.__textnode=!0,a[16].populate(de),o=a[0];const k={};a[17]=this.element({parent:o||"root"},i),k.x=500,k.y=700,a[17].populate(k),o=a[17];const V=[];let Q,se;const J=(W=[],Z,ce)=>{const xe=x(W),ge=new Set;let pe=xe.length;const Ee={};for(Q=Ee.from||0,se=("to"in Ee)?Ee.to:xe.length;pe--;)xe[pe],pe<se&&pe>=Q&&ge.add(""+pe);let Re=ce.length;for(;Re--;)if(ge.has(ce[Re])===!1){const ye=ce[Re];Z[18][ye]&&Z[18][ye].destroy(),delete Z[18][ye]}ce.length=0;const z=xe.length,Me=[];for(let ye=0;ye<z;ye++){if(ye<Q||ye>=se)continue;const Ue=Object.create(i);o=Z[17],Ue.text=xe[ye],Ue.index=ye,Ue.key=""+ye,ce.push(Ue.key),o=Z[17],Z[18]===void 0&&(Z[18]={});const De={};Z[18][Ue.key]===void 0&&(Z[18][Ue.key]=this.element({parent:o||"root"},i)),De.content=Ue.text,De.y=Ue.index*50,De.__textnode=!0,Z[18][Ue.key].nodeId===void 0&&Z[18][Ue.key].populate(De);let We=()=>{Z[18][Ue.key].set("y",Ue.index*50)};g(We,null),Me.push(We)}return Me};let te;return g(()=>{i[Symbol.for("removeGlobalEffects")](te),te=null,te=J(i.texts,a,V)},["texts"]),g(()=>{i.text;for(let W=0;W<i.texts.length;W++){if(W<Q||W>=se)continue;const Z={};Z.index=W,Z.text=i.texts[W],Z.key=W,a[18][Z.key].set("content",Z.text)}}),a},effects:[function(o,i,u,h,g,x){i[3].set("size",o.size)},function(o,i,u,h,g,x){i[4].set("color",o.color)},function(o,i,u,h,g,x){i[12].set("content",o.character)},function(o,i,u,h,g,x){i[12].set("color",o.color)},function(o,i,u,h,g,x){i[14].set("rotation",{transition:o.rotation})},function(o,i,u,h,g,x){i[15].set("rotation",{transition:o.rotation})},function(o,i,u,h,g,x){i[16].set("rotation",{transition:o.rotation})}],context:{}},state(){return{color:jm[0],size:10,character:Fm[0],myText:"This is my test yeah",longText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent at ante non mauris commodo tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Ut quis mattis mi. Aliquam ultricies mi vel lobortis luctus. Ut non feugiat urna. Duis sed blandit dui. Donec venenatis, mauris at blandit malesuada, elit nibh scelerisque lacus, non tempus arcu mi at justo.",rotation:0,texts:["Hello","World","Lightning 3","Blits"]}},hooks:{ready(){let f=0;this.$setInterval(()=>{f++,f>jm.length-1&&(f=0),this.color=jm[f],this.size=10*(f*2+1),this.rotation+=30},1e3);let o=0;this.$setInterval(()=>{o++,o>Fm.length-1&&(o=0),this.character=Fm[o]},1400)}},methods:{textLoaded(f){this.$log.info(`Text loaded with w: ${f.w} and h: ${f.h}`)}}}),Rh=["https://images.unsplash.com/photo-1690360994204-3d10cc73a08d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80","https://images.unsplash.com/photo-1582971103098-bfc707d2ad92?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80"],a6=tt.Component("Images",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.src="assets/lightningbolt.png",C.w=428,C.h=234,C.x=100,C.y=100,a[1].populate(C),o=a[0];const y={};a[2]=this.element({parent:o||"root"},i),y.src="https://images.unsplash.com/photo-1611148799269-63df34f63f6c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=428&q=80",y.w=428,y.h=234,y.x=100,y.y=400,a[2].populate(y),o=a[0];const v={};a[3]=this.element({parent:o||"root"},i),v.src=i.image,v.x=100,v.y=700,v["@loaded"]=i.imageLoaded&&i.imageLoaded.bind(i),a[3].populate(v),o=a[0];const M={};a[4]=this.element({parent:o||"root"},i),M.color="{top: '0xff0000ff', bottom: '0xffd700ff'}",M.src="assets/lightningbolt.png",M.w=428,M.h=234,M.x=600,M.y=100,a[4].populate(M),o=a[0];const b={};a[5]=this.element({parent:o||"root"},i),b.x=600,b.y=400,b.w=428,b.h=234,b.clipping=i.clipping,a[5].populate(b),o=a[5];const _={};a[6]=this.element({parent:o||"root"},i),_.src="assets/lightningbolt.png",_.w=856,_.h=468,a[6].populate(_),o=a[0];const O={};return a[7]=this.element({parent:o||"root"},i),O.color=i.color,O.src="assets/lightningbolt.png",O.w=428,O.h=234,O.x=1100,O.y=100,a[7].populate(O),a},effects:[function(o,i,u,h,g,x){i[3].set("src",o.image)},function(o,i,u,h,g,x){i[5].set("clipping",o.clipping)},function(o,i,u,h,g,x){i[7].set("color",o.color)}],context:{}},state(){return{image:Rh[0],clipping:!0,color:"red"}},hooks:{ready(){this.$setInterval(()=>{this.image=this.image===Rh[0]?Rh[1]:Rh[0],this.clipping=!this.clipping,this.color=this.color==="red"?"blue":"red"},2e3)}},methods:{imageLoaded(f){console.log("backstopjs:ready"),this.$log.info(`Image loaded with w: ${f.w} and h: ${f.h}`)}}}),ru=tt.Component("Square",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};return a[0]=this.element({parent:o||"root"},i),m.w={transition:i.size},m.h={transition:i.size},m.color={transition:i.color},a[0].populate(m),a},effects:[function(o,i,u,h,g,x){i[0].set("w",{transition:o.size})},function(o,i,u,h,g,x){i[0].set("h",{transition:o.size})},function(o,i,u,h,g,x){i[0].set("color",{transition:o.color})}],context:{}},props:[{key:"size",default:80}],state(){return{color:"#86198f"}},watch:{size(f,o){this.$log.info(`Size changed from ${o} to ${f}`),this.color=this.color==="#86198f"?"#9d174d":"#86198f"}}}),PT=tt.Component("Card",{components:{Square:ru},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),M.w=i.w,M.h=i.h,M.color="0x0891b2ff",a[0].populate(M),y===!0&&(v-=1);const b=u.components&&u.components.Square||h.Square;o=a[0];const _={};a[1]=this.element({parent:o||"root"},y===!0?C:i),_.x=80,_.y=80;const O=[];if(typeof b<"u")for(let ee in b.config.props)delete _[b.config.props[ee]],O.push(b.config.props[ee]);a[1].populate(_),y===!0&&(v-=1),o=a[1];const B={};B.x=80,B.y=80,m=B.is||"Square";let G;if(typeof m=="string"){if(G=u.components&&u.components[m]||h[m],!G)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);a[2]=G.call(null,{props:B},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],C=a[2],y=!0):o=a[2][Symbol.for("children")][0],y===!0&&v===0&&(y=!1);const $=u.components&&u.components.Square||h.Square;o=a[0];const j={};a[3]=this.element({parent:o||"root"},y===!0?C:i),j.x=20,j.y=20,j.size=40;const ne=[];if(typeof $<"u")for(let ee in $.config.props)delete j[$.config.props[ee]],ne.push($.config.props[ee]);a[3].populate(j),y===!0&&(v-=1),o=a[3];const X={};X.x=20,X.y=20,X.size=40,m=X.is||"Square";let K;if(typeof m=="string"){if(K=u.components&&u.components[m]||h[m],!K)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(K=m);return a[4]=K.call(null,{props:X},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],C=a[4],y=!0):o=a[4][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),a},effects:[],context:{}},props:["size"],computed:{w(){return this.size,this.size==="large"?400:200},h(){return this.size,this.size==="large"?500:300}}}),u6=tt.Component("Components",{components:{Square:ru,Card:PT},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(b),v===!0&&(M-=1);const _=u.components&&u.components.Square||h.Square;o=a[0];const O={};a[1]=this.element({parent:o||"root"},v===!0?y:i),O.x=100,O.y=100,O.size=50;const B=[];if(typeof _<"u")for(let at in _.config.props)delete O[_.config.props[at]],B.push(_.config.props[at]);a[1].populate(O),v===!0&&(M-=1),o=a[1];const G={};G.x=100,G.y=100,G.size=50,m=G.is||"Square";let $;if(typeof m=="string"){if($=u.components&&u.components[m]||h[m],!$)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);a[2]=$.call(null,{props:G},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],y=a[2],v=!0):o=a[2][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const j=u.components&&u.components.Square||h.Square;o=a[0];const ne={};a[3]=this.element({parent:o||"root"},v===!0?y:i),ne.x=100,ne.y=200,ne.size=100;const X=[];if(typeof j<"u")for(let at in j.config.props)delete ne[j.config.props[at]],X.push(j.config.props[at]);a[3].populate(ne),v===!0&&(M-=1),o=a[3];const K={};K.x=100,K.y=200,K.size=100,m=K.is||"Square";let ee;if(typeof m=="string"){if(ee=u.components&&u.components[m]||h[m],!ee)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);a[4]=ee.call(null,{props:K},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],y=a[4],v=!0):o=a[4][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const de=u.components&&u.components.Square||h.Square;o=a[0];const k={};a[5]=this.element({parent:o||"root"},v===!0?y:i),k.x=100,k.y=350,k.size=200;const V=[];if(typeof de<"u")for(let at in de.config.props)delete k[de.config.props[at]],V.push(de.config.props[at]);a[5].populate(k),v===!0&&(M-=1),o=a[5];const Q={};Q.x=100,Q.y=350,Q.size=200,m=Q.is||"Square";let se;if(typeof m=="string"){if(se=u.components&&u.components[m]||h[m],!se)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(se=m);a[6]=se.call(null,{props:Q},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],y=a[6],v=!0):o=a[6][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const J=u.components&&u.components.Square||h.Square;o=a[0];const te={};a[7]=this.element({parent:o||"root"},v===!0?y:i),te.x={transition:i.x},te.y=600,te.size=50;const W=[];if(typeof J<"u")for(let at in J.config.props)delete te[J.config.props[at]],W.push(J.config.props[at]);a[7].populate(te),v===!0&&(M-=1),o=a[7];const Z={};C={transition:i.x},Array.isArray(C)===!0&&(C=x(C).slice(0)),Z.x=C,Z.y=600,Z.size=50,m=Z.is||"Square";let ce;if(typeof m=="string"){if(ce=u.components&&u.components[m]||h[m],!ce)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ce=m);a[8]=ce.call(null,{props:Z},a[7],i),a[8][Symbol.for("slots")][0]?(o=a[8][Symbol.for("slots")][0],y=a[8],v=!0):o=a[8][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const xe=u.components&&u.components.Card||h.Card;o=a[0];const ge={};a[9]=this.element({parent:o||"root"},v===!0?y:i),ge.x=500,ge.y=100;const pe=[];if(typeof xe<"u")for(let at in xe.config.props)delete ge[xe.config.props[at]],pe.push(xe.config.props[at]);a[9].populate(ge),v===!0&&(M-=1),o=a[9];const Ee={};Ee.x=500,Ee.y=100,m=Ee.is||"Card";let Re;if(typeof m=="string"){if(Re=u.components&&u.components[m]||h[m],!Re)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Re=m);a[10]=Re.call(null,{props:Ee},a[9],i),a[10][Symbol.for("slots")][0]?(o=a[10][Symbol.for("slots")][0],y=a[10],v=!0):o=a[10][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const z=u.components&&u.components.Card||h.Card;o=a[0];const Me={};a[11]=this.element({parent:o||"root"},v===!0?y:i),Me.x=500,Me.y=500,Me.size="large";const ye=[];if(typeof z<"u")for(let at in z.config.props)delete Me[z.config.props[at]],ye.push(z.config.props[at]);a[11].populate(Me),v===!0&&(M-=1),o=a[11];const Ue={};Ue.x=500,Ue.y=500,Ue.size="large",m=Ue.is||"Card";let De;if(typeof m=="string"){if(De=u.components&&u.components[m]||h[m],!De)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(De=m);a[12]=De.call(null,{props:Ue},a[11],i),a[12][Symbol.for("slots")][0]?(o=a[12][Symbol.for("slots")][0],y=a[12],v=!0):o=a[12][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[0];const We={};a[13]=this.element({parent:o||"root"},v===!0?y:i),We.x=1e3,We.y=100,a[13].populate(We),v===!0&&(M-=1),o=a[13];const Xe={};a[14]=this.element({parent:o||"root"},v===!0?y:i),Xe.content="Dynamic components",Xe.__textnode=!0,a[14].populate(Xe),v===!0&&(M-=1);const ze=u.components&&u.components.Component||h.Component;o=a[13];const we={};a[15]=this.element({parent:o||"root"},v===!0?y:i),we.is=i.dynamicComponent,we.y=100,we.color="0x0000ffff";const et=[];if(typeof ze<"u")for(let at in ze.config.props)delete we[ze.config.props[at]],et.push(ze.config.props[at]);a[15].populate(we),v===!0&&(M-=1),o=a[15];const Je={};Je.is=i.dynamicComponent,Je.y=100,Je.color="0x0000ffff",m=Je.is||"Component";let Ze;if(typeof m=="string"){if(Ze=u.components&&u.components[m]||h[m],!Ze)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ze=m);a[16]=Ze.call(null,{props:Je},a[15],i),a[16][Symbol.for("slots")][0]?(o=a[16][Symbol.for("slots")][0],y=a[16],v=!0):o=a[16][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[13];const ot=[];let St,lt;const It=(at=[],xt,dt)=>{const xn=x(at),pn=new Set;let zt=xn.length;const Ct={};for(St=Ct.from||0,lt=("to"in Ct)?Ct.to:xn.length;zt--;)xn[zt],zt<lt&&zt>=St&&pn.add(""+zt);let Wt=dt.length;for(;Wt--;)if(pn.has(dt[Wt])===!1){const un=dt[Wt];xt[17][un]&&xt[17][un].destroy(),delete xt[17][un],xt[18][un]&&xt[18][un].destroy(),delete xt[18][un]}dt.length=0;const Tt=xn.length,Pt=[];for(let un=0;un<Tt;un++){if(un<St||un>=lt)continue;const ct=Object.create(i);o=xt[13],ct.bla=xn[un],ct.index=un,ct.key=""+un,dt.push(ct.key);const Pn=u.components&&u.components.Component||h.Component;xt[17]===void 0&&(xt[17]={});const an={};xt[17][ct.key]===void 0&&(xt[17][ct.key]=this.element({parent:o||"root"},v===!0?y:i)),an.is=ct.bla,an.x=205*ct.index,an.y=300;const Bn=[];if(typeof Pn<"u")for(let bn in Pn.config.props)delete an[Pn.config.props[bn]],Bn.push(Pn.config.props[bn]);xt[17][ct.key].nodeId===void 0&&(xt[17][ct.key].populate(an),v===!0&&(M-=1)),xt[18]===void 0&&(xt[18]={}),o=xt[17][ct.key];const Ot={};if(xt[18][ct.key]===void 0){Ot.is=ct.bla,C=205*ct.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),Ot.x=C,Ot.y=300,m=Ot.is||"Component";let bn;if(typeof m=="string"){if(bn=u.components&&u.components[m]||h[m],!bn)throw new Error('Component "Component" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(bn=m);xt[18][ct.key]=bn.call(null,{props:Ot},xt[17][ct.key],i),xt[18][ct.key][Symbol.for("slots")][0]?(o=xt[18][ct.key][Symbol.for("slots")][0],y=xt[18][ct.key],v=!0):o=xt[18][ct.key][Symbol.for("children")][0]}let mn=()=>{(typeof Bn>"u"||Bn.indexOf("x")===-1)&&xt[17][ct.key].set("x",205*ct.index)};g(mn,null),Pt.push(mn),xt[18][ct.key][Symbol.for("props")].x=205*ct.index}return Pt};let je;return g(()=>{i[Symbol.for("removeGlobalEffects")](je),je=null,je=It(i.dynamicComponents,a,ot)},["dynamicComponents"]),a},effects:[function(o,i,u,h,g,x){(typeof skip7>"u"||skip7.indexOf("x")===-1)&&i[7].set("x",{transition:o.x})},function(o,i,u,h,g,x){i[8][Symbol.for("props")].x={transition:o.x}}],context:{}},state(){return{x:100,dynamicComponent:Jh,dynamicComponents:["Square","Card","Square",Jh],toggle:!1,size:50}},hooks:{ready(){this.$setInterval(()=>{this.x=this.x===100?250:100,this.size=this.size===50?200:50},2e3)}}}),eo=["#bbf7d0","#86efac","#4ade80","#22c55e","#16a34a","#15803d"],l6=tt.Component("ForLoop",{components:{Square:ru},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1;const M={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(M),o=a[0];const b={};a[1]=this.element({parent:o||"root"},v===!0?y:i),b.y=20,a[1].populate(b),o=a[1];const _=[];let O,B;const G=(Ve=[],ie,Ae)=>{const qe=x(Ve),wt=new Set;let nt=qe.length;const ht={};for(O=ht.from||0,B=("to"in ht)?ht.to:qe.length;nt--;)qe[nt],nt<B&&nt>=O&&wt.add(""+nt);let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const ve=Ae[_e];ie[2][ve]&&ie[2][ve].destroy(),delete ie[2][ve]}Ae.length=0;const Le=qe.length,bt=[];for(let ve=0;ve<Le;ve++){if(ve<O||ve>=B)continue;const fe=Object.create(i);o=ie[1],fe.item=qe[ve],fe.undefined=ve,fe.key=""+ve,Ae.push(fe.key),o=ie[1],ie[2]===void 0&&(ie[2]={});const Ge={};ie[2][fe.key]===void 0&&(ie[2][fe.key]=this.element({parent:o||"root"},v===!0?y:i)),Ge.w=80,Ge.h=80,Ge.x=fe.item,Ge.color="0x4d7c0fff",ie[2][fe.key].nodeId===void 0&&ie[2][fe.key].populate(Ge)}return bt};let $;g(()=>{i[Symbol.for("removeGlobalEffects")]($),$=null,$=G(i.collection1,a,_)},["collection1"]),o=a[0];const j={};a[3]=this.element({parent:o||"root"},v===!0?y:i),j.y=120,a[3].populate(j),o=a[3];const ne=[];let X,K;const ee=(Ve=[],ie,Ae)=>{const qe=x(Ve),wt=new Set;let nt=qe.length;const ht={};for(X=ht.from||0,K=("to"in ht)?ht.to:qe.length;nt--;){const ve=qe[nt];nt<K&&nt>=X&&wt.add(""+ve.id)}let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const ve=Ae[_e];ie[4][ve]&&ie[4][ve].destroy(),delete ie[4][ve]}Ae.length=0;const Le=qe.length,bt=[];for(let ve=0;ve<Le;ve++){if(ve<X||ve>=K)continue;const fe=Object.create(i);o=ie[3],fe.item=qe[ve],fe.index=ve,fe.key=""+fe.item.id,Ae.push(fe.key),o=ie[3],ie[4]===void 0&&(ie[4]={});const Ge={};ie[4][fe.key]===void 0&&(ie[4][fe.key]=this.element({parent:o||"root"},v===!0?y:i)),Ge.w=80,Ge.h=80,Ge.x=fe.item.x*fe.index,Ge.color=fe.item.color,ie[4][fe.key].nodeId===void 0&&ie[4][fe.key].populate(Ge);let Et=()=>{ie[4][fe.key].set("x",fe.item.x*fe.index)};g(Et,null),bt.push(Et)}return bt};let de;g(()=>{i[Symbol.for("removeGlobalEffects")](de),de=null,de=ee(i.collection2,a,ne)},["collection2"]),o=a[0];const k={};a[5]=this.element({parent:o||"root"},v===!0?y:i),k.y=220,a[5].populate(k),o=a[5];const V=[];let Q,se;const J=(Ve=[],ie,Ae)=>{const qe=x(Ve),wt=new Set;let nt=qe.length;const ht={};for(Q=ht.from||0,se=("to"in ht)?ht.to:qe.length;nt--;)qe[nt],nt<se&&nt>=Q&&wt.add(""+nt);let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const ve=Ae[_e];ie[6][ve]&&ie[6][ve].destroy(),delete ie[6][ve]}Ae.length=0;const Le=qe.length,bt=[];for(let ve=0;ve<Le;ve++){if(ve<Q||ve>=se)continue;const fe=Object.create(i);o=ie[5],fe.item=qe[ve],fe.undefined=ve,fe.key=""+ve,Ae.push(fe.key),o=ie[5],ie[6]===void 0&&(ie[6]={});const Ge={};ie[6][fe.key]===void 0&&(ie[6][fe.key]=this.element({parent:o||"root"},v===!0?y:i)),Ge.w=80,Ge.h=80,Ge.x=fe.item.x,Ge.color=fe.item.color,ie[6][fe.key].nodeId===void 0&&ie[6][fe.key].populate(Ge);let Et=()=>{ie[6][fe.key].set("x",fe.item.x)};g(Et,null),bt.push(Et)}return bt};let te;g(()=>{i[Symbol.for("removeGlobalEffects")](te),te=null,te=J(i.collection3,a,V)},["collection3"]),o=a[0];const W={};a[7]=this.element({parent:o||"root"},v===!0?y:i),W.y=320,a[7].populate(W),o=a[7];const Z=[];let ce,xe;const ge=(Ve=[],ie,Ae)=>{const qe=x(Ve),wt=new Set;let nt=qe.length;const ht={};for(ce=ht.from||0,xe=("to"in ht)?ht.to:qe.length;nt--;)qe[nt],nt<xe&&nt>=ce&&wt.add(""+nt);let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const ve=Ae[_e];ie[8][ve]&&ie[8][ve].destroy(),delete ie[8][ve],ie[9][ve]&&ie[9][ve].destroy(),delete ie[9][ve]}Ae.length=0;const Le=qe.length,bt=[];for(let ve=0;ve<Le;ve++){if(ve<ce||ve>=xe)continue;const fe=Object.create(i);o=ie[7],fe.item=qe[ve],fe.index=ve,fe.key=""+ve,Ae.push(fe.key);const Ge=u.components&&u.components.Square||h.Square;ie[8]===void 0&&(ie[8]={});const Et={};ie[8][fe.key]===void 0&&(ie[8][fe.key]=this.element({parent:o||"root"},v===!0?y:i)),Et.x=fe.item.x*fe.index,Et.ref="square"+fe.index,Et.alpha=fe.alpha;const jt=[];if(typeof Ge<"u")for(let Ke in Ge.config.props)delete Et[Ge.config.props[Ke]],jt.push(Ge.config.props[Ke]);ie[8][fe.key].nodeId===void 0&&ie[8][fe.key].populate(Et),ie[9]===void 0&&(ie[9]={}),o=ie[8][fe.key];const Vt={};if(ie[9][fe.key]===void 0){C=fe.item.x*fe.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),Vt.x=C,C="square"+fe.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),Vt.ref=C,C=fe.alpha,Array.isArray(C)===!0&&(C=x(C).slice(0)),Vt.alpha=C,m=Vt.is||"Square";let Ke;if(typeof m=="string"){if(Ke=u.components&&u.components[m]||h[m],!Ke)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ke=m);ie[9][fe.key]=Ke.call(null,{props:Vt},ie[8][fe.key],i),ie[9][fe.key][Symbol.for("slots")][0]?(o=ie[9][fe.key][Symbol.for("slots")][0],y=ie[9][fe.key],v=!0):o=ie[9][fe.key][Symbol.for("children")][0]}let ln=()=>{(typeof jt>"u"||jt.indexOf("x")===-1)&&ie[8][fe.key].set("x",fe.item.x*fe.index)};g(ln,null),bt.push(ln);let Be=()=>{(typeof jt>"u"||jt.indexOf("ref")===-1)&&ie[8][fe.key].set("ref","square"+fe.index)};g(Be,null),bt.push(Be),ie[9][fe.key][Symbol.for("props")].x=fe.item.x*fe.index,ie[9][fe.key][Symbol.for("props")].ref="square"+fe.index}return bt};let pe;g(()=>{i[Symbol.for("removeGlobalEffects")](pe),pe=null,pe=ge(i.collection2,a,Z)},["collection2"]),g(()=>{i.alpha;for(let Ve=0;Ve<i.collection2.length;Ve++){if(Ve<ce||Ve>=xe)continue;const ie={};ie.index=Ve,ie.item=i.collection2[Ve],ie.key=Ve,(typeof skip8>"u"||skip8.indexOf("alpha")===-1)&&a[8][ie.key].set("alpha",i.alpha)}}),g(()=>{i.alpha;for(let Ve=0;Ve<i.collection2.length;Ve++){if(Ve<ce||Ve>=xe)continue;const ie={};ie.index=Ve,ie.item=i.collection2[Ve],ie.key=Ve,a[9][ie.key][Symbol.for("props")].alpha=i.alpha}}),o=a[0];const Ee={};a[10]=this.element({parent:o||"root"},v===!0?y:i),Ee.y=420,a[10].populate(Ee),o=a[10];const Re=[];let z,Me;const ye=(Ve=[],ie,Ae)=>{const qe=x(Ve),wt=new Set;let nt=qe.length;const ht={};for(z=ht.from||0,Me=("to"in ht)?ht.to:qe.length;nt--;){const ve=qe[nt];nt<Me&&nt>=z&&wt.add(""+ve.color)}let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const ve=Ae[_e];ie[11][ve]&&ie[11][ve].destroy(),delete ie[11][ve],ie[12][ve]&&ie[12][ve].destroy(),delete ie[12][ve]}Ae.length=0;const Le=qe.length,bt=[];for(let ve=0;ve<Le;ve++){if(ve<z||ve>=Me)continue;const fe=Object.create(i);o=ie[10],fe.item=qe[ve],fe.undefined=ve,fe.key=""+fe.item.color,Ae.push(fe.key);const Ge=u.components&&u.components.Square||h.Square;ie[11]===void 0&&(ie[11]={});const Et={};ie[11][fe.key]===void 0&&(ie[11][fe.key]=this.element({parent:o||"root"},v===!0?y:i)),Et.x=fe.item.x,Et.alpha=fe.alpha;const jt=[];if(typeof Ge<"u")for(let Be in Ge.config.props)delete Et[Ge.config.props[Be]],jt.push(Ge.config.props[Be]);ie[11][fe.key].nodeId===void 0&&ie[11][fe.key].populate(Et),ie[12]===void 0&&(ie[12]={}),o=ie[11][fe.key];const Vt={};if(ie[12][fe.key]===void 0){C=fe.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),Vt.x=C,C=fe.alpha,Array.isArray(C)===!0&&(C=x(C).slice(0)),Vt.alpha=C,m=Vt.is||"Square";let Be;if(typeof m=="string"){if(Be=u.components&&u.components[m]||h[m],!Be)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Be=m);ie[12][fe.key]=Be.call(null,{props:Vt},ie[11][fe.key],i),ie[12][fe.key][Symbol.for("slots")][0]?(o=ie[12][fe.key][Symbol.for("slots")][0],y=ie[12][fe.key],v=!0):o=ie[12][fe.key][Symbol.for("children")][0]}let ln=()=>{(typeof jt>"u"||jt.indexOf("x")===-1)&&ie[11][fe.key].set("x",fe.item.x)};g(ln,null),bt.push(ln),ie[12][fe.key][Symbol.for("props")].x=fe.item.x}return bt};let Ue;g(()=>{i[Symbol.for("removeGlobalEffects")](Ue),Ue=null,Ue=ye(i.collection3,a,Re)},["collection3"]),g(()=>{i.alpha;for(let Ve=0;Ve<i.collection3.length;Ve++){if(Ve<z||Ve>=Me)continue;const ie={};ie.undefined=Ve,ie.item=i.collection3[Ve],ie.key=ie.item.color,(typeof skip11>"u"||skip11.indexOf("alpha")===-1)&&a[11][ie.key].set("alpha",i.alpha)}}),g(()=>{i.alpha;for(let Ve=0;Ve<i.collection3.length;Ve++){if(Ve<z||Ve>=Me)continue;const ie={};ie.undefined=Ve,ie.item=i.collection3[Ve],ie.key=ie.item.color,a[12][ie.key][Symbol.for("props")].alpha=i.alpha}}),o=a[0];const De={};a[13]=this.element({parent:o||"root"},v===!0?y:i),De.y=520,a[13].populate(De),o=a[13];const We=[];let Xe,ze;const we=(Ve=[],ie,Ae)=>{const qe=x(Ve),wt=new Set;let nt=qe.length;const ht={};for(Xe=ht.from||0,ze=("to"in ht)?ht.to:qe.length;nt--;)qe[nt],nt<ze&&nt>=Xe&&wt.add(""+nt);let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const ve=Ae[_e];ie[14][ve]&&ie[14][ve].destroy(),delete ie[14][ve]}Ae.length=0;const Le=qe.length,bt=[];for(let ve=0;ve<Le;ve++){if(ve<Xe||ve>=ze)continue;const fe=Object.create(i);o=ie[13],fe.item=qe[ve],fe.undefined=ve,fe.key=""+ve,Ae.push(fe.key),o=ie[13],ie[14]===void 0&&(ie[14]={});const Ge={};ie[14][fe.key]===void 0&&(ie[14][fe.key]=this.element({parent:o||"root"},v===!0?y:i)),Ge.w=80,Ge.h=80,Ge.x=fe.item,Ge.color="0xeab308ff",Ge.alpha=fe.alpha,ie[14][fe.key].nodeId===void 0&&ie[14][fe.key].populate(Ge)}return bt};let et;g(()=>{i[Symbol.for("removeGlobalEffects")](et),et=null,et=we(i.collection1,a,We)},["collection1"]),g(()=>{i.item;for(let Ve=0;Ve<i.collection1.length;Ve++){if(Ve<Xe||Ve>=ze)continue;const ie={};ie.undefined=Ve,ie.item=i.collection1[Ve],ie.key=Ve,a[14][ie.key].set("x",ie.item)}}),g(()=>{i.alpha;for(let Ve=0;Ve<i.collection1.length;Ve++){if(Ve<Xe||Ve>=ze)continue;const ie={};ie.undefined=Ve,ie.item=i.collection1[Ve],ie.key=Ve,a[14][ie.key].set("alpha",i.alpha)}}),o=a[0];const Je={};a[15]=this.element({parent:o||"root"},v===!0?y:i),Je.y=620,a[15].populate(Je),o=a[15];const Ze=[];let ot,St;const lt=(Ve=[],ie,Ae)=>{const qe=x(Ve),wt=new Set;let nt=qe.length;const ht={};for(ot=ht.from||0,St=("to"in ht)?ht.to:qe.length;nt--;){const ve=qe[nt];nt<St&&nt>=ot&&wt.add(""+ve.id)}let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const ve=Ae[_e];ie[16][ve]&&ie[16][ve].destroy(),delete ie[16][ve]}Ae.length=0;const Le=qe.length,bt=[];for(let ve=0;ve<Le;ve++){if(ve<ot||ve>=St)continue;const fe=Object.create(i);o=ie[15],fe.item=qe[ve],fe.undefined=ve,fe.key=""+fe.item.id,Ae.push(fe.key),o=ie[15],ie[16]===void 0&&(ie[16]={});const Ge={};ie[16][fe.key]===void 0&&(ie[16][fe.key]=this.element({parent:o||"root"},v===!0?y:i)),Ge.w=80,Ge.h=80,Ge.x=fe.item.x,Ge.color=fe.item.color,Ge.alpha=fe.alpha,ie[16][fe.key].nodeId===void 0&&ie[16][fe.key].populate(Ge);let Et=()=>{ie[16][fe.key].set("x",fe.item.x)};g(Et,null),bt.push(Et)}return bt};let It;g(()=>{i[Symbol.for("removeGlobalEffects")](It),It=null,It=lt(i.collection2,a,Ze)},["collection2"]),g(()=>{i.alpha;for(let Ve=0;Ve<i.collection2.length;Ve++){if(Ve<ot||Ve>=St)continue;const ie={};ie.undefined=Ve,ie.item=i.collection2[Ve],ie.key=ie.item.id,a[16][ie.key].set("alpha",i.alpha)}}),o=a[0];const je={};a[17]=this.element({parent:o||"root"},v===!0?y:i),je.y=720,a[17].populate(je),o=a[17];const at=[];let xt,dt;const xn=(Ve=[],ie,Ae)=>{const qe=x(Ve),wt=new Set;let nt=qe.length;const ht={};for(xt=ht.from||0,dt=("to"in ht)?ht.to:qe.length;nt--;){const ve=qe[nt];nt<dt&&nt>=xt&&wt.add(""+ve.id)}let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const ve=Ae[_e];ie[18][ve]&&ie[18][ve].destroy(),delete ie[18][ve]}Ae.length=0;const Le=qe.length,bt=[];for(let ve=0;ve<Le;ve++){if(ve<xt||ve>=dt)continue;const fe=Object.create(i);o=ie[17],fe.item=qe[ve],fe.undefined=ve,fe.key=""+fe.item.id,Ae.push(fe.key),o=ie[17],ie[18]===void 0&&(ie[18]={});const Ge={};ie[18][fe.key]===void 0&&(ie[18][fe.key]=this.element({parent:o||"root"},v===!0?y:i)),Ge.w=80,Ge.h=80,Ge.x=fe.item.x,Ge.color="0x06b6d4ff",ie[18][fe.key].nodeId===void 0&&ie[18][fe.key].populate(Ge);let Et=()=>{ie[18][fe.key].set("x",fe.item.x)};g(Et,null),bt.push(Et)}return bt};let pn;g(()=>{i[Symbol.for("removeGlobalEffects")](pn),pn=null,pn=xn(i.collection4,a,at)},["collection4"]),o=a[0];const zt={};a[19]=this.element({parent:o||"root"},v===!0?y:i),zt.y=720,zt.x=700,a[19].populate(zt),o=a[19];const Ct=[];let Wt,Tt;const Pt=(Ve=[],ie,Ae)=>{const qe=x(Ve),wt=new Set;let nt=qe.length;const ht={};for(Wt=ht.from||0,Tt=("to"in ht)?ht.to:qe.length;nt--;)qe[nt],nt<Tt&&nt>=Wt&&wt.add(""+nt);let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const ve=Ae[_e];ie[20][ve]&&ie[20][ve].destroy(),delete ie[20][ve]}Ae.length=0;const Le=qe.length,bt=[];for(let ve=0;ve<Le;ve++){if(ve<Wt||ve>=Tt)continue;const fe=Object.create(i);o=ie[19],fe.item=qe[ve],fe.undefined=ve,fe.key=""+ve,Ae.push(fe.key),o=ie[19],ie[20]===void 0&&(ie[20]={});const Ge={};ie[20][fe.key]===void 0&&(ie[20][fe.key]=this.element({parent:o||"root"},v===!0?y:i)),Ge.w=80,Ge.h=80,Ge.x=fe.item.x,Ge.color="0x8b5cf6ff",ie[20][fe.key].nodeId===void 0&&ie[20][fe.key].populate(Ge);let Et=()=>{ie[20][fe.key].set("x",fe.item.x)};g(Et,null),bt.push(Et)}return bt};let un;g(()=>{i[Symbol.for("removeGlobalEffects")](un),un=null,un=Pt(i.collection4,a,Ct)},["collection4"]),o=a[0];const ct={};a[21]=this.element({parent:o||"root"},v===!0?y:i),ct.y=920,a[21].populate(ct),o=a[21];const Pn=[];let an,Bn;const Ot=(Ve=[],ie,Ae)=>{const qe=x(Ve),wt=new Set;let nt=qe.length;const ht={};for(an=ht.from||0,Bn=("to"in ht)?ht.to:qe.length;nt--;){const ve=qe[nt];nt<Bn&&nt>=an&&wt.add(""+ve.id)}let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const ve=Ae[_e];ie[22][ve]&&ie[22][ve].destroy(),delete ie[22][ve],ie[23][ve]&&ie[23][ve].destroy(),delete ie[23][ve]}Ae.length=0;const Le=qe.length,bt=[];for(let ve=0;ve<Le;ve++){if(ve<an||ve>=Bn)continue;const fe=Object.create(i);o=ie[21],fe.item=qe[ve],fe.undefined=ve,fe.key=""+fe.item.id,Ae.push(fe.key);const Ge=u.components&&u.components.Square||h.Square;ie[22]===void 0&&(ie[22]={});const Et={};ie[22][fe.key]===void 0&&(ie[22][fe.key]=this.element({parent:o||"root"},v===!0?y:i)),Et.w=80,Et.h=80,Et.x=fe.item.x;const jt=[];if(typeof Ge<"u")for(let Be in Ge.config.props)delete Et[Ge.config.props[Be]],jt.push(Ge.config.props[Be]);ie[22][fe.key].nodeId===void 0&&ie[22][fe.key].populate(Et),ie[23]===void 0&&(ie[23]={}),o=ie[22][fe.key];const Vt={};if(ie[23][fe.key]===void 0){Vt.w=80,Vt.h=80,C=fe.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),Vt.x=C,m=Vt.is||"Square";let Be;if(typeof m=="string"){if(Be=u.components&&u.components[m]||h[m],!Be)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Be=m);ie[23][fe.key]=Be.call(null,{props:Vt},ie[22][fe.key],i),ie[23][fe.key][Symbol.for("slots")][0]?(o=ie[23][fe.key][Symbol.for("slots")][0],y=ie[23][fe.key],v=!0):o=ie[23][fe.key][Symbol.for("children")][0]}let ln=()=>{(typeof jt>"u"||jt.indexOf("x")===-1)&&ie[22][fe.key].set("x",fe.item.x)};g(ln,null),bt.push(ln),ie[23][fe.key][Symbol.for("props")].x=fe.item.x}return bt};let mn;g(()=>{i[Symbol.for("removeGlobalEffects")](mn),mn=null,mn=Ot(i.collection4,a,Pn)},["collection4"]),o=a[0];const bn={};a[24]=this.element({parent:o||"root"},v===!0?y:i),bn.y=920,bn.x=700,a[24].populate(bn),o=a[24];const mi=[];let jn,Yn;const Fn=(Ve=[],ie,Ae)=>{const qe=x(Ve),wt=new Set;let nt=qe.length;const ht={};for(jn=ht.from||0,Yn=("to"in ht)?ht.to:qe.length;nt--;)qe[nt],nt<Yn&&nt>=jn&&wt.add(""+nt);let _e=Ae.length;for(;_e--;)if(wt.has(Ae[_e])===!1){const ve=Ae[_e];ie[25][ve]&&ie[25][ve].destroy(),delete ie[25][ve],ie[26][ve]&&ie[26][ve].destroy(),delete ie[26][ve]}Ae.length=0;const Le=qe.length,bt=[];for(let ve=0;ve<Le;ve++){if(ve<jn||ve>=Yn)continue;const fe=Object.create(i);o=ie[24],fe.item=qe[ve],fe.undefined=ve,fe.key=""+ve,Ae.push(fe.key);const Ge=u.components&&u.components.Square||h.Square;ie[25]===void 0&&(ie[25]={});const Et={};ie[25][fe.key]===void 0&&(ie[25][fe.key]=this.element({parent:o||"root"},v===!0?y:i)),Et.w=80,Et.h=80,Et.x=fe.item.x;const jt=[];if(typeof Ge<"u")for(let Be in Ge.config.props)delete Et[Ge.config.props[Be]],jt.push(Ge.config.props[Be]);ie[25][fe.key].nodeId===void 0&&ie[25][fe.key].populate(Et),ie[26]===void 0&&(ie[26]={}),o=ie[25][fe.key];const Vt={};if(ie[26][fe.key]===void 0){Vt.w=80,Vt.h=80,C=fe.item.x,Array.isArray(C)===!0&&(C=x(C).slice(0)),Vt.x=C,m=Vt.is||"Square";let Be;if(typeof m=="string"){if(Be=u.components&&u.components[m]||h[m],!Be)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Be=m);ie[26][fe.key]=Be.call(null,{props:Vt},ie[25][fe.key],i),ie[26][fe.key][Symbol.for("slots")][0]?(o=ie[26][fe.key][Symbol.for("slots")][0],y=ie[26][fe.key],v=!0):o=ie[26][fe.key][Symbol.for("children")][0]}let ln=()=>{(typeof jt>"u"||jt.indexOf("x")===-1)&&ie[25][fe.key].set("x",fe.item.x)};g(ln,null),bt.push(ln),ie[26][fe.key][Symbol.for("props")].x=fe.item.x}return bt};let Rn;return g(()=>{i[Symbol.for("removeGlobalEffects")](Rn),Rn=null,Rn=Fn(i.collection4,a,mi)},["collection4"]),a},effects:[],context:{}},state(){return{collection1:[0,100,200,300,400,500],collection2:[{id:"block1",x:0,color:eo[0]},{id:"block2",x:100,color:eo[1]},{id:"block3",x:200,color:eo[2]},{id:"block4",x:300,color:eo[3]},{id:"block5",x:400,color:eo[4]},{id:"block6",x:500,color:eo[5]}],collection3:[],collection4:[{x:0,id:"one"},{x:200,id:"two"},{x:400,id:"three"}],alpha:.5}},hooks:{ready(){this.$setTimeout(()=>{this.collection2[0].color=eo[5],this.collection2[1].color=eo[4],this.collection2[2].color=eo[3],this.collection2[3].color=eo[2],this.collection2[4].color=eo[1],this.collection2[5].color=eo[0]},4e3);let f=0;const o=this.$setInterval(()=>{this.collection3.push({x:f*100,color:eo[f]}),f++,f===eo.length&&clearInterval(o)},1e3);this.$setInterval(()=>{this.alpha=this.alpha===.5?1:.5},800),this.$setTimeout(()=>{this.collection4=[{x:100,id:4},{x:500,id:5}]},2e3)}}}),_C=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],RC=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],LC=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],$m=f=>Math.round(Math.random()*1e3)%f;let f6=0;const Pl=()=>({id:f6++,text:`${_C[$m(_C.length)]} ${RC[$m(RC.length)]} ${LC[$m(LC.length)]}`}),c6=(f=1)=>{const o=[];for(let i=0;i<f;i++)o.push(Pl());return o},h6=tt.Component("LegendItem",{code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),a[0].populate(M),y===!0&&(v-=1);const b=u.components&&u.components.Circle||h.Circle;o=a[0];const _={};a[1]=this.element({parent:o||"root"},y===!0?C:i),_.color="0xfb923cff",_.size=60;const O=[];if(typeof b<"u")for(let ne in b.config.props)delete _[b.config.props[ne]],O.push(b.config.props[ne]);a[1].populate(_),y===!0&&(v-=1),o=a[1];const B={};B.color="0xfb923cff",B.size=60,m=B.is||"Circle";let G;if(typeof m=="string"){if(G=u.components&&u.components[m]||h[m],!G)throw new Error('Component "Circle" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);a[2]=G.call(null,{props:B},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],C=a[2],y=!0):o=a[2][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),o=a[0];const $={};a[3]=this.element({parent:o||"root"},y===!0?C:i),$.color="0xe5e5e5ff",$.size=32,$.y=10,$.maxwidth=57,$.align="center",$.content=""+i.id,$.__textnode=!0,a[3].populate($),y===!0&&(v-=1),o=a[0];const j={};return a[4]=this.element({parent:o||"root"},y===!0?C:i),j.color="0xe5e5e5ff",j.x=80,j.y=14,j.size=28,j.content=""+i.text,j.__textnode=!0,a[4].populate(j),y===!0&&(v-=1),a},effects:[],context:{}},props:["id","text"]}),OT=tt.Component("Row",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w=380,m.h=60,m.y=i.index*80,m.color="0xfff7edff",a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.w=10,C.h=60,C.color="0x06b6d4ff",a[1].populate(C),o=a[0];const y={};return a[2]=this.element({parent:o||"root"},i),y.content=i.text,y.x=30,y.y=15,y.font="lato",y.size=28,y.color=i.activeRow==i.index?"0x06b6d4ff":"0x1e293bff",y.__textnode=!0,a[2].populate(y),a},effects:[function(o,i,u,h,g,x){i[0].set("y",o.index*80)},function(o,i,u,h,g,x){i[2].set("content",o.text)},function(o,i,u,h,g,x){i[2].set("color",o.activeRow==o.index?"0x06b6d4ff":"0x1e293bff")}],context:{}},props:["index","text","activeRow"]}),d6=tt.Component("Rows",{components:{Row:OT},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1;const M={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(M),o=a[0];const b=[];let _,O;const B=($=[],j,ne)=>{const X=x($),K=new Set;let ee=X.length;const de={};for(_=de.from||0,O=("to"in de)?de.to:X.length;ee--;){const se=X[ee];ee<O&&ee>=_&&K.add(""+se.id+"key2")}let k=ne.length;for(;k--;)if(K.has(ne[k])===!1){const se=ne[k];j[1][se]&&j[1][se].destroy(),delete j[1][se],j[2][se]&&j[2][se].destroy(),delete j[2][se]}ne.length=0;const V=X.length,Q=[];for(let se=0;se<V;se++){if(se<_||se>=O)continue;const J=Object.create(i);o=j[0],J.item=X[se],J.index=se,J.key=""+J.item.id+"key2",ne.push(J.key);const te=u.components&&u.components.Row||h.Row;j[1]===void 0&&(j[1]={});const W={};j[1][J.key]===void 0&&(j[1][J.key]=this.element({parent:o||"root"},v===!0?y:i)),W.activeRow=J.activeRowIndex,W.index=J.index,W.text=J.item.text,W.y=50;const Z=[];if(typeof te<"u")for(let pe in te.config.props)delete W[te.config.props[pe]],Z.push(te.config.props[pe]);j[1][J.key].nodeId===void 0&&j[1][J.key].populate(W),j[2]===void 0&&(j[2]={}),o=j[1][J.key];const ce={};if(j[2][J.key]===void 0){C=J.activeRowIndex,Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.activeRow=C,C=J.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.index=C,C=J.item.text,Array.isArray(C)===!0&&(C=x(C).slice(0)),ce.text=C,ce.y=50,m=ce.is||"Row";let pe;if(typeof m=="string"){if(pe=u.components&&u.components[m]||h[m],!pe)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);j[2][J.key]=pe.call(null,{props:ce},j[1][J.key],i),j[2][J.key][Symbol.for("slots")][0]?(o=j[2][J.key][Symbol.for("slots")][0],y=j[2][J.key],v=!0):o=j[2][J.key][Symbol.for("children")][0]}let xe=()=>{(typeof Z>"u"||Z.indexOf("index")===-1)&&j[1][J.key].set("index",J.index)};g(xe,null),Q.push(xe);let ge=()=>{(typeof Z>"u"||Z.indexOf("text")===-1)&&j[1][J.key].set("text",J.item.text)};g(ge,null),Q.push(ge),j[2][J.key][Symbol.for("props")].index=J.index,j[2][J.key][Symbol.for("props")].text=J.item.text}return Q};let G;return g(()=>{i[Symbol.for("removeGlobalEffects")](G),G=null,G=B(i.data,a,b)},["data"]),g(()=>{i.activeRowIndex;for(let $=0;$<i.data.length;$++){if($<_||$>=O)continue;const j={};j.index=$,j.item=i.data[$],j.key=j.item.id+"key2",(typeof skip1>"u"||skip1.indexOf("activeRow")===-1)&&a[1][j.key].set("activeRow",i.activeRowIndex)}}),g(()=>{i.activeRowIndex;for(let $=0;$<i.data.length;$++){if($<_||$>=O)continue;const j={};j.index=$,j.item=i.data[$],j.key=j.item.id+"key2",a[2][j.key][Symbol.for("props")].activeRow=i.activeRowIndex}}),a},effects:[],context:{}},props:["data","activeRowIndex"]}),p6=tt.Component("ForLoop",{components:{Square:ru,LegendItem:h6,Row:OT,Rows:d6},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(b),v===!0&&(M-=1),o=a[0];const _={};a[1]=this.element({parent:o||"root"},v===!0?y:i),_.x=100,_.y=60,_.size=48,_.content="Array operations test",_.__textnode=!0,a[1].populate(_),v===!0&&(M-=1),o=a[0];const O={};a[2]=this.element({parent:o||"root"},v===!0?y:i),O.y=170,O.x=140,a[2].populate(O),v===!0&&(M-=1),o=a[2];const B={};a[3]=this.element({parent:o||"root"},v===!0?y:i),B.x="-10",B.w=500,B.h=80,B.color="0x64748bff",B.y={transition:i.y},B.alpha={transition:!i.hide},a[3].populate(B),v===!0&&(M-=1);const G=u.components&&u.components.LegendItem||h.LegendItem;o=a[2];const $={};a[4]=this.element({parent:o||"root"},v===!0?y:i),$.y=0,$.id="a",$.text="Fill array by assignment";const j=[];if(typeof G<"u")for(let _e in G.config.props)delete $[G.config.props[_e]],j.push(G.config.props[_e]);a[4].populate($),v===!0&&(M-=1),o=a[4];const ne={};ne.y=0,ne.id="a",ne.text="Fill array by assignment",m=ne.is||"LegendItem";let X;if(typeof m=="string"){if(X=u.components&&u.components[m]||h[m],!X)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(X=m);a[5]=X.call(null,{props:ne},a[4],i),a[5][Symbol.for("slots")][0]?(o=a[5][Symbol.for("slots")][0],y=a[5],v=!0):o=a[5][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const K=u.components&&u.components.LegendItem||h.LegendItem;o=a[2];const ee={};a[6]=this.element({parent:o||"root"},v===!0?y:i),ee.y=90,ee.id="b",ee.text="Push new item to array";const de=[];if(typeof K<"u")for(let _e in K.config.props)delete ee[K.config.props[_e]],de.push(K.config.props[_e]);a[6].populate(ee),v===!0&&(M-=1),o=a[6];const k={};k.y=90,k.id="b",k.text="Push new item to array",m=k.is||"LegendItem";let V;if(typeof m=="string"){if(V=u.components&&u.components[m]||h[m],!V)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(V=m);a[7]=V.call(null,{props:k},a[6],i),a[7][Symbol.for("slots")][0]?(o=a[7][Symbol.for("slots")][0],y=a[7],v=!0):o=a[7][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Q=u.components&&u.components.LegendItem||h.LegendItem;o=a[2];const se={};a[8]=this.element({parent:o||"root"},v===!0?y:i),se.y=180,se.id="c",se.text="Pop item from array";const J=[];if(typeof Q<"u")for(let _e in Q.config.props)delete se[Q.config.props[_e]],J.push(Q.config.props[_e]);a[8].populate(se),v===!0&&(M-=1),o=a[8];const te={};te.y=180,te.id="c",te.text="Pop item from array",m=te.is||"LegendItem";let W;if(typeof m=="string"){if(W=u.components&&u.components[m]||h[m],!W)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);a[9]=W.call(null,{props:te},a[8],i),a[9][Symbol.for("slots")][0]?(o=a[9][Symbol.for("slots")][0],y=a[9],v=!0):o=a[9][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Z=u.components&&u.components.LegendItem||h.LegendItem;o=a[2];const ce={};a[10]=this.element({parent:o||"root"},v===!0?y:i),ce.y=270,ce.id="d",ce.text="Shift item from array";const xe=[];if(typeof Z<"u")for(let _e in Z.config.props)delete ce[Z.config.props[_e]],xe.push(Z.config.props[_e]);a[10].populate(ce),v===!0&&(M-=1),o=a[10];const ge={};ge.y=270,ge.id="d",ge.text="Shift item from array",m=ge.is||"LegendItem";let pe;if(typeof m=="string"){if(pe=u.components&&u.components[m]||h[m],!pe)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);a[11]=pe.call(null,{props:ge},a[10],i),a[11][Symbol.for("slots")][0]?(o=a[11][Symbol.for("slots")][0],y=a[11],v=!0):o=a[11][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Ee=u.components&&u.components.LegendItem||h.LegendItem;o=a[2];const Re={};a[12]=this.element({parent:o||"root"},v===!0?y:i),Re.y=360,Re.id="e",Re.text="Splice 2 items from array";const z=[];if(typeof Ee<"u")for(let _e in Ee.config.props)delete Re[Ee.config.props[_e]],z.push(Ee.config.props[_e]);a[12].populate(Re),v===!0&&(M-=1),o=a[12];const Me={};Me.y=360,Me.id="e",Me.text="Splice 2 items from array",m=Me.is||"LegendItem";let ye;if(typeof m=="string"){if(ye=u.components&&u.components[m]||h[m],!ye)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ye=m);a[13]=ye.call(null,{props:Me},a[12],i),a[13][Symbol.for("slots")][0]?(o=a[13][Symbol.for("slots")][0],y=a[13],v=!0):o=a[13][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Ue=u.components&&u.components.LegendItem||h.LegendItem;o=a[2];const De={};a[14]=this.element({parent:o||"root"},v===!0?y:i),De.y=450,De.id="f",De.text="Unshift 2 items into array";const We=[];if(typeof Ue<"u")for(let _e in Ue.config.props)delete De[Ue.config.props[_e]],We.push(Ue.config.props[_e]);a[14].populate(De),v===!0&&(M-=1),o=a[14];const Xe={};Xe.y=450,Xe.id="f",Xe.text="Unshift 2 items into array",m=Xe.is||"LegendItem";let ze;if(typeof m=="string"){if(ze=u.components&&u.components[m]||h[m],!ze)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ze=m);a[15]=ze.call(null,{props:Xe},a[14],i),a[15][Symbol.for("slots")][0]?(o=a[15][Symbol.for("slots")][0],y=a[15],v=!0):o=a[15][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const we=u.components&&u.components.LegendItem||h.LegendItem;o=a[2];const et={};a[16]=this.element({parent:o||"root"},v===!0?y:i),et.y=540,et.id="g",et.text="Empty array by assignment";const Je=[];if(typeof we<"u")for(let _e in we.config.props)delete et[we.config.props[_e]],Je.push(we.config.props[_e]);a[16].populate(et),v===!0&&(M-=1),o=a[16];const Ze={};Ze.y=540,Ze.id="g",Ze.text="Empty array by assignment",m=Ze.is||"LegendItem";let ot;if(typeof m=="string"){if(ot=u.components&&u.components[m]||h[m],!ot)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ot=m);a[17]=ot.call(null,{props:Ze},a[16],i),a[17][Symbol.for("slots")][0]?(o=a[17][Symbol.for("slots")][0],y=a[17],v=!0):o=a[17][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const St=u.components&&u.components.LegendItem||h.LegendItem;o=a[2];const lt={};a[18]=this.element({parent:o||"root"},v===!0?y:i),lt.y=630,lt.id="h",lt.text="Concat an array with items";const It=[];if(typeof St<"u")for(let _e in St.config.props)delete lt[St.config.props[_e]],It.push(St.config.props[_e]);a[18].populate(lt),v===!0&&(M-=1),o=a[18];const je={};je.y=630,je.id="h",je.text="Concat an array with items",m=je.is||"LegendItem";let at;if(typeof m=="string"){if(at=u.components&&u.components[m]||h[m],!at)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(at=m);a[19]=at.call(null,{props:je},a[18],i),a[19][Symbol.for("slots")][0]?(o=a[19][Symbol.for("slots")][0],y=a[19],v=!0):o=a[19][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const xt=u.components&&u.components.LegendItem||h.LegendItem;o=a[2];const dt={};a[20]=this.element({parent:o||"root"},v===!0?y:i),dt.y=720,dt.id="i",dt.text="Sort array alphabetically";const xn=[];if(typeof xt<"u")for(let _e in xt.config.props)delete dt[xt.config.props[_e]],xn.push(xt.config.props[_e]);a[20].populate(dt),v===!0&&(M-=1),o=a[20];const pn={};pn.y=720,pn.id="i",pn.text="Sort array alphabetically",m=pn.is||"LegendItem";let zt;if(typeof m=="string"){if(zt=u.components&&u.components[m]||h[m],!zt)throw new Error('Component "LegendItem" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(zt=m);a[21]=zt.call(null,{props:pn},a[20],i),a[21][Symbol.for("slots")][0]?(o=a[21][Symbol.for("slots")][0],y=a[21],v=!0):o=a[21][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[2];const Ct={};a[22]=this.element({parent:o||"root"},v===!0?y:i),Ct.y=840,a[22].populate(Ct),v===!0&&(M-=1),o=a[22];const Wt={};a[23]=this.element({parent:o||"root"},v===!0?y:i),Wt.size=26,Wt.y=10,Wt.content="Array length:",Wt.__textnode=!0,a[23].populate(Wt),v===!0&&(M-=1),o=a[22];const Tt={};a[24]=this.element({parent:o||"root"},v===!0?y:i),Tt.content=i.data.length,Tt.size=40,Tt.x=180,Tt.color="0xfb923cff",Tt.__textnode=!0,a[24].populate(Tt),v===!0&&(M-=1),o=a[0];const Pt={};a[25]=this.element({parent:o||"root"},v===!0?y:i),Pt.x=660,Pt.y=100,a[25].populate(Pt),v===!0&&(M-=1),o=a[25];const un={};a[26]=this.element({parent:o||"root"},v===!0?y:i),un.content="For loop on Element",un.__textnode=!0,a[26].populate(un),v===!0&&(M-=1),o=a[25];const ct=[];let Pn,an;const Bn=(_e=[],Le,bt)=>{const ve=x(_e),fe=new Set;let Ge=ve.length;const Et={};for(Pn=Et.from||0,an=("to"in Et)?Et.to:ve.length;Ge--;){const Be=ve[Ge];Ge<an&&Ge>=Pn&&fe.add(""+Be.id+"key")}let jt=bt.length;for(;jt--;)if(fe.has(bt[jt])===!1){const Be=bt[jt];Le[27][Be]&&Le[27][Be].destroy(),delete Le[27][Be],Le[28][Be]&&Le[28][Be].destroy(),delete Le[28][Be],Le[29][Be]&&Le[29][Be].destroy(),delete Le[29][Be]}bt.length=0;const Vt=ve.length,ln=[];for(let Be=0;Be<Vt;Be++){if(Be<Pn||Be>=an)continue;const Ke=Object.create(i);o=Le[25],Ke.item=ve[Be],Ke.index=Be,Ke.key=""+Ke.item.id+"key",bt.push(Ke.key),o=Le[25],Le[27]===void 0&&(Le[27]={});const On={};Le[27][Ke.key]===void 0&&(Le[27][Ke.key]=this.element({parent:o||"root"},v===!0?y:i)),On.w=380,On.h=60,On.y=Ke.index*80+50,On.color="0xfff7edff",Le[27][Ke.key].nodeId===void 0&&(Le[27][Ke.key].populate(On),v===!0&&(M-=1)),o=Le[27][Ke.key],Le[28]===void 0&&(Le[28]={});const wn={};Le[28][Ke.key]===void 0&&(Le[28][Ke.key]=this.element({parent:o||"root"},v===!0?y:i)),wn.w=10,wn.h=60,wn.color="0xfb923cff",Le[28][Ke.key].nodeId===void 0&&(Le[28][Ke.key].populate(wn),v===!0&&(M-=1)),o=Le[27][Ke.key],Le[29]===void 0&&(Le[29]={});const gn={};Le[29][Ke.key]===void 0&&(Le[29][Ke.key]=this.element({parent:o||"root"},v===!0?y:i)),gn.content=Ke.item.text,gn.x=30,gn.y=15,gn.font="lato",gn.size=28,gn.color=Ke.activeRowIndex===Ke.index?"0x06b6d4ff":"0x1e293bff",gn.__textnode=!0,Le[29][Ke.key].nodeId===void 0&&(Le[29][Ke.key].populate(gn),v===!0&&(M-=1));let $n=()=>{Le[27][Ke.key].set("y",Ke.index*80+50)};g($n,null),ln.push($n);let Jn=()=>{Le[29][Ke.key].set("content",Ke.item.text)};g(Jn,null),ln.push(Jn)}return ln};let Ot;g(()=>{i[Symbol.for("removeGlobalEffects")](Ot),Ot=null,Ot=Bn(i.data,a,ct)},["data"]),g(()=>{i.activeRowIndex;for(let _e=0;_e<i.data.length;_e++){if(_e<Pn||_e>=an)continue;const Le={};Le.index=_e,Le.item=i.data[_e],Le.key=Le.item.id+"key",a[29][Le.key].set("color",i.activeRowIndex===Le.index?"0x06b6d4ff":"0x1e293bff")}}),o=a[0];const mn={};a[30]=this.element({parent:o||"root"},v===!0?y:i),mn.x=1080,mn.y=100,a[30].populate(mn),v===!0&&(M-=1),o=a[30];const bn={};a[31]=this.element({parent:o||"root"},v===!0?y:i),bn.content="For loop on Component",bn.__textnode=!0,a[31].populate(bn),v===!0&&(M-=1),o=a[30];const mi=[];let jn,Yn;const Fn=(_e=[],Le,bt)=>{const ve=x(_e),fe=new Set;let Ge=ve.length;const Et={};for(jn=Et.from||0,Yn=("to"in Et)?Et.to:ve.length;Ge--;){const Be=ve[Ge];Ge<Yn&&Ge>=jn&&fe.add(""+Be.id+"key2")}let jt=bt.length;for(;jt--;)if(fe.has(bt[jt])===!1){const Be=bt[jt];Le[32][Be]&&Le[32][Be].destroy(),delete Le[32][Be],Le[33][Be]&&Le[33][Be].destroy(),delete Le[33][Be]}bt.length=0;const Vt=ve.length,ln=[];for(let Be=0;Be<Vt;Be++){if(Be<jn||Be>=Yn)continue;const Ke=Object.create(i);o=Le[30],Ke.item=ve[Be],Ke.index=Be,Ke.key=""+Ke.item.id+"key2",bt.push(Ke.key);const On=u.components&&u.components.Row||h.Row;Le[32]===void 0&&(Le[32]={});const wn={};Le[32][Ke.key]===void 0&&(Le[32][Ke.key]=this.element({parent:o||"root"},v===!0?y:i)),wn.activeRow=(Ke.count>0,Ke.activeRowIndex),wn.index=Ke.index,wn.text=Ke.item.text,wn.y=50;const gn=[];if(typeof On<"u")for(let fi in On.config.props)delete wn[On.config.props[fi]],gn.push(On.config.props[fi]);Le[32][Ke.key].nodeId===void 0&&(Le[32][Ke.key].populate(wn),v===!0&&(M-=1)),Le[33]===void 0&&(Le[33]={}),o=Le[32][Ke.key];const $n={};if(Le[33][Ke.key]===void 0){C=(Ke.count>0,Ke.activeRowIndex),Array.isArray(C)===!0&&(C=x(C).slice(0)),$n.activeRow=C,C=Ke.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),$n.index=C,C=Ke.item.text,Array.isArray(C)===!0&&(C=x(C).slice(0)),$n.text=C,$n.y=50,m=$n.is||"Row";let fi;if(typeof m=="string"){if(fi=u.components&&u.components[m]||h[m],!fi)throw new Error('Component "Row" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(fi=m);Le[33][Ke.key]=fi.call(null,{props:$n},Le[32][Ke.key],i),Le[33][Ke.key][Symbol.for("slots")][0]?(o=Le[33][Ke.key][Symbol.for("slots")][0],y=Le[33][Ke.key],v=!0):o=Le[33][Ke.key][Symbol.for("children")][0]}let Jn=()=>{(typeof gn>"u"||gn.indexOf("index")===-1)&&Le[32][Ke.key].set("index",Ke.index)};g(Jn,null),ln.push(Jn);let kt=()=>{(typeof gn>"u"||gn.indexOf("text")===-1)&&Le[32][Ke.key].set("text",Ke.item.text)};g(kt,null),ln.push(kt),Le[33][Ke.key][Symbol.for("props")].index=Ke.index,Le[33][Ke.key][Symbol.for("props")].text=Ke.item.text}return ln};let Rn;g(()=>{i[Symbol.for("removeGlobalEffects")](Rn),Rn=null,Rn=Fn(i.data,a,mi)},["data"]),g(()=>{i.activeRowIndex,i.count;for(let _e=0;_e<i.data.length;_e++){if(_e<jn||_e>=Yn)continue;const Le={};Le.index=_e,Le.item=i.data[_e],Le.key=Le.item.id+"key2",(typeof skip32>"u"||skip32.indexOf("activeRow")===-1)&&a[32][Le.key].set("activeRow",(i.count>0,i.activeRowIndex))}}),g(()=>{i.activeRowIndex,i.count;for(let _e=0;_e<i.data.length;_e++){if(_e<jn||_e>=Yn)continue;const Le={};Le.index=_e,Le.item=i.data[_e],Le.key=Le.item.id+"key2",a[33][Le.key][Symbol.for("props")].activeRow=(i.count>0,i.activeRowIndex)}}),o=a[0];const Ve={};a[34]=this.element({parent:o||"root"},v===!0?y:i),Ve.x=1500,Ve.y=100,a[34].populate(Ve),v===!0&&(M-=1),o=a[34];const ie={};a[35]=this.element({parent:o||"root"},v===!0?y:i),ie.content="RowsComponent",ie.__textnode=!0,a[35].populate(ie),v===!0&&(M-=1);const Ae=u.components&&u.components.Rows||h.Rows;o=a[34];const qe={};a[36]=this.element({parent:o||"root"},v===!0?y:i),qe.data=i.data,qe.activeRowIndex=i.activeRowIndex;const wt=[];if(typeof Ae<"u")for(let _e in Ae.config.props)delete qe[Ae.config.props[_e]],wt.push(Ae.config.props[_e]);a[36].populate(qe),v===!0&&(M-=1),o=a[36];const nt={};C=i.data,Array.isArray(C)===!0&&(C=x(C).slice(0)),nt.data=C,C=i.activeRowIndex,Array.isArray(C)===!0&&(C=x(C).slice(0)),nt.activeRowIndex=C,m=nt.is||"Rows";let ht;if(typeof m=="string"){if(ht=u.components&&u.components[m]||h[m],!ht)throw new Error('Component "Rows" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ht=m);return a[37]=ht.call(null,{props:nt},a[36],i),a[37][Symbol.for("slots")][0]?(o=a[37][Symbol.for("slots")][0],y=a[37],v=!0):o=a[37][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),a},effects:[function(o,i,u,h,g,x){i[3].set("y",{transition:o.y})},function(o,i,u,h,g,x){i[3].set("alpha",{transition:!o.hide})},function(o,i,u,h,g,x){i[24].set("content",o.data.length)},function(o,i,u,h,g,x){(typeof skip36>"u"||skip36.indexOf("data")===-1)&&i[36].set("data",o.data)},function(o,i,u,h,g,x){(typeof skip36>"u"||skip36.indexOf("activeRowIndex")===-1)&&i[36].set("activeRowIndex",o.activeRowIndex)},function(o,i,u,h,g,x){i[37][Symbol.for("props")].data=o.data},function(o,i,u,h,g,x){i[37][Symbol.for("props")].activeRowIndex=o.activeRowIndex}],context:{}},state(){return{count:0,data:[],x:0,y:0,timeout:null,hide:!0,sortDirection:1,activeRowIndex:0}},computed:{show(){return this.hide,this.hide===!0},data2(){return this.data,this.data}},watch:{y(){this.hide=!1,this.$clearTimeout(this.timeout),this.timeout=this.$setTimeout(()=>{this.hide=!0},600)}},input:{a(){this.y=-10,this.$trigger("y");const f=[];for(let o=0;o<6;o++)f.push(Pl());this.data=f},b(){this.y=80,this.$trigger("y"),this.data.push(Pl())},c(){this.y=170,this.$trigger("y"),this.data.pop()},d(){this.y=260,this.$trigger("y"),this.data.shift()},e(){this.y=350,this.$trigger("y"),this.data.splice(2,4)},f(){this.y=440,this.data.unshift(Pl(),Pl())},g(){this.y=530,this.$trigger("y"),this.data=[]},h(){this.y=620,this.$trigger("y"),this.data=this.data.concat(c6(3))},i(){this.y=710,this.$trigger("y"),this.sortDirection=this.sortDirection===1?0:1,this.data=this.data.sort((f,o)=>{const i=f.text.toLowerCase(),u=o.text.toLowerCase();return this.sortDirection===1?i<u?-1:i>u?1:0:i>u?-1:i<u?1:0})},up(){this.activeRowIndex>0&&(this.activeRowIndex-=1)},down(){this.activeRowIndex<this.data.length-1&&(this.activeRowIndex+=1)}}}),m6=tt.Component("Effects",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.w=160,C.h=160,C.x=40,C.y=40,C.color="0xfb923cff",C.effects=[{type:"radius",props:{radius:44}}],a[1].populate(C),o=a[0];const y={};a[2]=this.element({parent:o||"root"},i),y.w=160,y.h=160,y.x=240,y.y=40,y.color="0xd97706ff",y.effects=[{type:"radius",props:{radius:25}}],a[2].populate(y),o=a[0];const v={};a[3]=this.element({parent:o||"root"},i),v.w=160,v.h=160,v.x=440,v.y=40,v.color="0xb45309ff",v.effects=[{type:"radius",props:{radius:80}}],a[3].populate(v),o=a[0];const M={};a[4]=this.element({parent:o||"root"},i),M.w=160,M.h=160,M.x=640,M.y=40,M.color="0x78350fff",M.effects=[{type:"radius",props:{radius:10}}],a[4].populate(M),o=a[0];const b={};a[5]=this.element({parent:o||"root"},i),b.w=160,b.h=160,b.x=40,b.y=240,b.color="0x65a30dff",b.effects=[{type:"radius",props:{radius:i.radius}}],a[5].populate(b),o=a[0];const _={};a[6]=this.element({parent:o||"root"},i),_.w=300,_.h=300,_.x=40,_.y=440,_.color="0x0c4a6eff",_.effects=[{type:"radius",props:{radius:30}}],a[6].populate(_),o=a[6];const O={};a[7]=this.element({parent:o||"root"},i),O.w=200,O.h=200,O.x=50,O.y=50,O.color="0x0284c7ff",O.effects=[{type:"radius",props:{radius:40}}],a[7].populate(O),o=a[7];const B={};a[8]=this.element({parent:o||"root"},i),B.w=100,B.h=100,B.x=50,B.y=50,B.color="0x38bdf8ff",B.effects=[{type:"radius",props:{radius:50}}],a[8].populate(B),o=a[8];const G={};a[9]=this.element({parent:o||"root"},i),G.w=40,G.h=40,G.x=30,G.y=30,G.color="0xbae6fdff",G.effects=[{type:"radius",props:{radius:20}}],a[9].populate(G),o=a[0];const $={};a[10]=this.element({parent:o||"root"},i),$.w=160,$.h=160,$.x=840,$.y=40,$.color="0x3b82f6ff",$.effects=[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}],a[10].populate($),o=a[0];const j={};return a[11]=this.element({parent:o||"root"},i),j.w=160,j.h=160,j.x=1040,j.y=40,j.color="0x500724ff",j.effects=i.effects,a[11].populate(j),a},effects:[function(o,i,u,h,g,x){i[1].set("effects",[{type:"radius",props:{radius:44}}])},function(o,i,u,h,g,x){i[2].set("effects",[{type:"radius",props:{radius:25}}])},function(o,i,u,h,g,x){i[3].set("effects",[{type:"radius",props:{radius:80}}])},function(o,i,u,h,g,x){i[4].set("effects",[{type:"radius",props:{radius:10}}])},function(o,i,u,h,g,x){i[5].set("effects",[{type:"radius",props:{radius:o.radius}}])},function(o,i,u,h,g,x){i[6].set("effects",[{type:"radius",props:{radius:30}}])},function(o,i,u,h,g,x){i[7].set("effects",[{type:"radius",props:{radius:40}}])},function(o,i,u,h,g,x){i[8].set("effects",[{type:"radius",props:{radius:50}}])},function(o,i,u,h,g,x){i[9].set("effects",[{type:"radius",props:{radius:20}}])},function(o,i,u,h,g,x){i[10].set("effects",[{type:"radius",props:{radius:10}},{type:"border",props:{width:20,color:"0x60a5faff"}}])},function(o,i,u,h,g,x){i[11].set("effects",o.effects)}],context:{}},state(){return{direction:"up",radius:0,effects:[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]}},hooks:{ready(){this.$setInterval(()=>{const o=this.direction==="up"?this.radius+10:this.radius-10;this.radius=Math.max(Math.min(o,80),0),this.radius===80&&(this.direction="down"),this.radius===0&&(this.direction="up")},500);let f=0;this.$setInterval(()=>{f++,f%2?this.effects=[{type:"borderTop",props:{width:50,color:"#f43f5e"}},{type:"borderBottom",props:{width:50,color:"#be123c"}}]:this.effects=[{type:"borderTop",props:{width:20,color:"#be123c"}},{type:"borderBottom",props:{width:20,color:"#f43f5e"}}]},2e3)}}}),g6=tt.Component("ShowIf",{components:{Square:ru},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(b),v===!0&&(M-=1),o=a[0];const _={};a[1]=this.element({parent:o||"root"},v===!0?y:i),_.y=40,a[1].populate(_),v===!0&&(M-=1),o=a[1];const O={};a[2]=this.element({parent:o||"root"},v===!0?y:i),O.x=50,O.w=200,O.h=300,O.color="0xbef264ff",O.show=!0,a[2].populate(O),v===!0&&(M-=1),o=a[1];const B={};a[3]=this.element({parent:o||"root"},v===!0?y:i),B.x=350,B.w=200,B.h=300,B.color="0xff0000ff",B.show=!1,a[3].populate(B),v===!0&&(M-=1),o=a[1];const G={};a[4]=this.element({parent:o||"root"},v===!0?y:i),G.x=650,G.w=200,G.h=300,G.color="0x84cc16ff",G.show=1,a[4].populate(G),v===!0&&(M-=1),o=a[1];const $={};a[5]=this.element({parent:o||"root"},v===!0?y:i),$.x=950,$.w=200,$.h=300,$.color="0xff0000ff",$.show=0,a[5].populate($),v===!0&&(M-=1),o=a[0];const j={};a[6]=this.element({parent:o||"root"},v===!0?y:i),j.y=380,a[6].populate(j),v===!0&&(M-=1),o=a[6];const ne={};a[7]=this.element({parent:o||"root"},v===!0?y:i),ne.x=50,ne.w=200,ne.h=300,ne.color="0xfde047ff",ne.show=i.showNr,a[7].populate(ne),v===!0&&(M-=1),o=a[6];const X={};a[8]=this.element({parent:o||"root"},v===!0?y:i),X.x=350,X.w=200,X.h=300,X.color="0x0000ffff",X.show=i.hideNr,a[8].populate(X),v===!0&&(M-=1),o=a[6];const K={};a[9]=this.element({parent:o||"root"},v===!0?y:i),K.x=650,K.w=200,K.h=300,K.color="0x84cc16ff",K.show=i.showBool,a[9].populate(K),v===!0&&(M-=1),o=a[6];const ee={};a[10]=this.element({parent:o||"root"},v===!0?y:i),ee.x=950,ee.w=200,ee.h=300,ee.color="0xff0000ff",ee.show=i.hideBool,a[10].populate(ee),v===!0&&(M-=1),o=a[0];const de={};a[11]=this.element({parent:o||"root"},v===!0?y:i),de.y=720,a[11].populate(de),v===!0&&(M-=1),o=a[11];const k={};a[12]=this.element({parent:o||"root"},v===!0?y:i),k.x=50,k.w=200,k.h=300,k.color="0x5eead4ff",k.show=i.showHideToggle,a[12].populate(k),v===!0&&(M-=1),o=a[0];const V={};a[13]=this.element({parent:o||"root"},v===!0?y:i),V.y=40,V.x=1e3,a[13].populate(V),v===!0&&(M-=1);const Q=u.components&&u.components.Square||h.Square;o=a[13];const se={};a[14]=this.element({parent:o||"root"},v===!0?y:i),se.show=!0;const J=[];if(typeof Q<"u")for(let Ze in Q.config.props)delete se[Q.config.props[Ze]],J.push(Q.config.props[Ze]);a[14].populate(se),v===!0&&(M-=1),o=a[14];const te={};te.show=!0,m=te.is||"Square";let W;if(typeof m=="string"){if(W=u.components&&u.components[m]||h[m],!W)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(W=m);a[15]=W.call(null,{props:te},a[14],i),a[15][Symbol.for("slots")][0]?(o=a[15][Symbol.for("slots")][0],y=a[15],v=!0):o=a[15][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Z=u.components&&u.components.Square||h.Square;o=a[13];const ce={};a[16]=this.element({parent:o||"root"},v===!0?y:i),ce.y=100,ce.show=!1;const xe=[];if(typeof Z<"u")for(let Ze in Z.config.props)delete ce[Z.config.props[Ze]],xe.push(Z.config.props[Ze]);a[16].populate(ce),v===!0&&(M-=1),o=a[16];const ge={};ge.y=100,ge.show=!1,m=ge.is||"Square";let pe;if(typeof m=="string"){if(pe=u.components&&u.components[m]||h[m],!pe)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(pe=m);a[17]=pe.call(null,{props:ge},a[16],i),a[17][Symbol.for("slots")][0]?(o=a[17][Symbol.for("slots")][0],y=a[17],v=!0):o=a[17][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const Ee=u.components&&u.components.Square||h.Square;o=a[13];const Re={};a[18]=this.element({parent:o||"root"},v===!0?y:i),Re.y=200,Re.show=i.showHideToggle;const z=[];if(typeof Ee<"u")for(let Ze in Ee.config.props)delete Re[Ee.config.props[Ze]],z.push(Ee.config.props[Ze]);a[18].populate(Re),v===!0&&(M-=1),o=a[18];const Me={};Me.y=200,C=i.showHideToggle,Array.isArray(C)===!0&&(C=x(C).slice(0)),Me.show=C,m=Me.is||"Square";let ye;if(typeof m=="string"){if(ye=u.components&&u.components[m]||h[m],!ye)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ye=m);a[19]=ye.call(null,{props:Me},a[18],i),a[19][Symbol.for("slots")][0]?(o=a[19][Symbol.for("slots")][0],y=a[19],v=!0):o=a[19][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[0];const Ue={};a[20]=this.element({parent:o||"root"},v===!0?y:i),Ue.y=40,Ue.x=1400,a[20].populate(Ue),v===!0&&(M-=1),o=a[20];const De={};a[21]=this.element({parent:o||"root"},v===!0?y:i),De.w=80,De.h=80,De.show=!0,De.alpha=.8,De.color="0xff00e4ff",a[21].populate(De),v===!0&&(M-=1),o=a[20];const We={};a[22]=this.element({parent:o||"root"},v===!0?y:i),We.y=100,We.w=80,We.h=80,We.show=!1,We.alpha=.8,We.color="0xff00e4ff",a[22].populate(We),v===!0&&(M-=1),o=a[20];const Xe={};a[23]=this.element({parent:o||"root"},v===!0?y:i),Xe.y=200,Xe.w=80,Xe.h=80,Xe.show=i.showHideToggle,Xe.alpha=.8,Xe.color="0xff00e4ff",a[23].populate(Xe),v===!0&&(M-=1),o=a[0];const ze={};a[24]=this.element({parent:o||"root"},v===!0?y:i),ze.x=1e3,ze.y=380,ze.direction="horizontal",ze.gap=20,ze.padding=20,ze.color="0xffffffff",ze.__layout=!0,a[24].populate(ze),v===!0&&(M-=1),o=a[24];const we={};a[25]=this.element({parent:o||"root"},v===!0?y:i),we.w=40,we.h=40,we.show=i.showHideToggle,we.color="0xbfdbfeff",a[25].populate(we),v===!0&&(M-=1),o=a[24];const et={};a[26]=this.element({parent:o||"root"},v===!0?y:i),et.w=40,et.h=40,et.color="0x60a5faff",a[26].populate(et),v===!0&&(M-=1),o=a[24];const Je={};return a[27]=this.element({parent:o||"root"},v===!0?y:i),Je.w=40,Je.h=40,Je.color="0x2563ebff",a[27].populate(Je),v===!0&&(M-=1),a},effects:[function(o,i,u,h,g,x){i[12].set("show",o.showHideToggle)},function(o,i,u,h,g,x){(typeof skip18>"u"||skip18.indexOf("show")===-1)&&i[18].set("show",o.showHideToggle)},function(o,i,u,h,g,x){i[19][Symbol.for("props")].show=o.showHideToggle},function(o,i,u,h,g,x){i[23].set("show",o.showHideToggle)},function(o,i,u,h,g,x){i[25].set("show",o.showHideToggle)}],context:{}},state(){return{showNr:1,hideNr:0,showBool:!0,hideBool:!1,showHideToggle:!0}},hooks:{ready(){this.$setInterval(()=>{console.log("backstopjs:ready"),this.showHideToggle=!this.showHideToggle},2e3),this.$setTimeout(()=>{this.showNr=0,this.hideNr=1,this.showBool=!1,this.hideBool=!0},4e3)}}}),y6=tt.Component("Events",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.x=400,m.y=360,a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.w=280,C.h=280,C.color="0xe5e7ebff",C.x=i.x,C.y="-5",a[1].populate(C),o=a[0];const y={};a[2]=this.element({parent:o||"root"},i),y.w=250,y.h=250,y.x=10,y.y=10,y.color=i.colors[0],a[2].populate(y),o=a[0];const v={};a[3]=this.element({parent:o||"root"},i),v.w=250,v.h=250,v.x=290,v.y=10,v.color=i.colors[1],a[3].populate(v),o=a[0];const M={};a[4]=this.element({parent:o||"root"},i),M.w=250,M.h=250,M.x=570,M.y=10,M.color=i.colors[2],a[4].populate(M),o=a[0];const b={};return a[5]=this.element({parent:o||"root"},i),b.w=250,b.h=250,b.x=850,b.y=10,b.color=i.colors[3],a[5].populate(b),a},effects:[function(o,i,u,h,g,x){i[1].set("x",o.x)}],context:{}},state(){return{count:0,colors:["#fbbf24","#a3e635","#22d3ee","#f472b6"]}},computed:{x(){return this.count,this.count*280-5}},hooks:{unfocus(){this.$emit("changeBackground")}},input:{left(f){const o=this.count-1;o===-1?this.parent.$focus(f):this.count=Math.max(o,0)},right(f){const o=this.count+1;o===4?this.parent.$focus(f):this.count=Math.min(o,3)},enter(){this.$emit("changeBackground",this.colors[this.count])}}}),v6=tt.Component("SlotCard",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w=300,m.h=500,m.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],m.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C[Symbol.for("isSlot")]=!0,C.x=20,C.y=20,a[1].populate(C),o=a[0];const y={};return a[2]=this.element({parent:o||"root"},i),y.content=i.label,y.maxwidth=260,y.x=20,y.y=400,y.align="center",y.__textnode=!0,a[2].populate(y),a},effects:[function(o,i,u,h,g,x){i[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}},props:[{key:"label"}]}),x6=tt.Component("NamedSlotCard",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w=700,m.h=300,m.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}],m.color="{top: '0x94a3b8ff', bottom: '0x475569ff'}",a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.x=20,C.y=20,a[1].populate(C),o=a[1];const y={};a[2]=this.element({parent:o||"root"},i),y.content="First slot",y.__textnode=!0,a[2].populate(y),o=a[1];const v={};a[3]=this.element({parent:o||"root"},i),v[Symbol.for("isSlot")]=!0,v.y=40,v.ref="first",a[3].populate(v),o=a[0];const M={};a[4]=this.element({parent:o||"root"},i),M.x=200,M.y=20,a[4].populate(M),o=a[4];const b={};a[5]=this.element({parent:o||"root"},i),b.content="Second slot",b.__textnode=!0,a[5].populate(b),o=a[4];const _={};a[6]=this.element({parent:o||"root"},i),_[Symbol.for("isSlot")]=!0,_.y=40,_.ref="second",a[6].populate(_),o=a[0];const O={};a[7]=this.element({parent:o||"root"},i),O.x=480,O.y=20,a[7].populate(O),o=a[7];const B={};a[8]=this.element({parent:o||"root"},i),B.content="Third slot",B.__textnode=!0,a[8].populate(B),o=a[7];const G={};return a[9]=this.element({parent:o||"root"},i),G[Symbol.for("isSlot")]=!0,G.y=40,G.ref="third",a[9].populate(G),a},effects:[function(o,i,u,h,g,x){i[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:6,color:"0xe2e8f0ff"}}])}],context:{}}}),bl=["#fff7ed","#fdba74","#f97316","#ea580c","#9a3412","#431407"],w6=tt.Component("Components",{components:{SlotCard:v6,NamedSlotCard:x6,Card:PT,Square:ru},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),a[0].populate(M),y===!0&&(v-=1);const b=u.components&&u.components.SlotCard||h.SlotCard;o=a[0];const _={};a[1]=this.element({parent:o||"root"},y===!0?C:i),_.x=400,_.y=100,_.label="Element";const O=[];if(typeof b<"u")for(let Tt in b.config.props)delete _[b.config.props[Tt]],O.push(b.config.props[Tt]);a[1].populate(_),y===!0&&(v-=1),o=a[1];const B={};B.x=400,B.y=100,B.label="Element",m=B.is||"SlotCard";let G;if(typeof m=="string"){if(G=u.components&&u.components[m]||h[m],!G)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);a[2]=G.call(null,{props:B},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],C=a[2],y=!0):o=a[2][Symbol.for("children")][0],y===!0&&(v=1+1);const $={};a[3]=this.element({parent:o||"root"},y===!0?C:i),a[3].populate($),y===!0&&(v-=1),o=a[3];const j={};a[4]=this.element({parent:o||"root"},y===!0?C:i),j.color=i.color,j.w=100,j.h=100,a[4].populate(j),y===!0&&(v-=1),y===!0&&v===0&&(y=!1);const ne=u.components&&u.components.SlotCard||h.SlotCard;o=a[0];const X={};a[5]=this.element({parent:o||"root"},y===!0?C:i),X.x=800,X.y=100,X.label="Component";const K=[];if(typeof ne<"u")for(let Tt in ne.config.props)delete X[ne.config.props[Tt]],K.push(ne.config.props[Tt]);a[5].populate(X),y===!0&&(v-=1),o=a[5];const ee={};ee.x=800,ee.y=100,ee.label="Component",m=ee.is||"SlotCard";let de;if(typeof m=="string"){if(de=u.components&&u.components[m]||h[m],!de)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(de=m);a[6]=de.call(null,{props:ee},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],C=a[6],y=!0):o=a[6][Symbol.for("children")][0],y===!0&&(v=1+1);const k={};a[7]=this.element({parent:o||"root"},y===!0?C:i),a[7].populate(k),y===!0&&(v-=1);const V=u.components&&u.components.Square||h.Square;o=a[7];const Q={};a[8]=this.element({parent:o||"root"},y===!0?C:i),Q.size=200,Q.y=50;const se=[];if(typeof V<"u")for(let Tt in V.config.props)delete Q[V.config.props[Tt]],se.push(V.config.props[Tt]);a[8].populate(Q),y===!0&&(v-=1),o=a[8];const J={};J.size=200,J.y=50,m=J.is||"Square";let te;if(typeof m=="string"){if(te=u.components&&u.components[m]||h[m],!te)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(te=m);a[9]=te.call(null,{props:J},a[8],i),a[9][Symbol.for("slots")][0]?(o=a[9][Symbol.for("slots")][0],C=a[9],y=!0):o=a[9][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),y===!0&&v===0&&(y=!1);const W=u.components&&u.components.SlotCard||h.SlotCard;o=a[0];const Z={};a[10]=this.element({parent:o||"root"},y===!0?C:i),Z.x=1200,Z.y=100,Z.label="Element & Component";const ce=[];if(typeof W<"u")for(let Tt in W.config.props)delete Z[W.config.props[Tt]],ce.push(W.config.props[Tt]);a[10].populate(Z),y===!0&&(v-=1),o=a[10];const xe={};xe.x=1200,xe.y=100,xe.label="Element & Component",m=xe.is||"SlotCard";let ge;if(typeof m=="string"){if(ge=u.components&&u.components[m]||h[m],!ge)throw new Error('Component "SlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ge=m);a[11]=ge.call(null,{props:xe},a[10],i),a[11][Symbol.for("slots")][0]?(o=a[11][Symbol.for("slots")][0],C=a[11],y=!0):o=a[11][Symbol.for("children")][0],y===!0&&(v=2+1);const pe={};a[12]=this.element({parent:o||"root"},y===!0?C:i),a[12].populate(pe),y===!0&&(v-=1),o=a[12];const Ee={};a[13]=this.element({parent:o||"root"},y===!0?C:i),Ee.color=i.color,Ee.w=100,Ee.h=100,a[13].populate(Ee),y===!0&&(v-=1);const Re=u.components&&u.components.Square||h.Square;o=a[12];const z={};a[14]=this.element({parent:o||"root"},y===!0?C:i),z.size=200,z.y=150;const Me=[];if(typeof Re<"u")for(let Tt in Re.config.props)delete z[Re.config.props[Tt]],Me.push(Re.config.props[Tt]);a[14].populate(z),y===!0&&(v-=1),o=a[14];const ye={};ye.size=200,ye.y=150,m=ye.is||"Square";let Ue;if(typeof m=="string"){if(Ue=u.components&&u.components[m]||h[m],!Ue)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ue=m);a[15]=Ue.call(null,{props:ye},a[14],i),a[15][Symbol.for("slots")][0]?(o=a[15][Symbol.for("slots")][0],C=a[15],y=!0):o=a[15][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),y===!0&&v===0&&(y=!1);const De=u.components&&u.components.Card||h.Card;o=a[0];const We={};a[16]=this.element({parent:o||"root"},y===!0?C:i),We.x=400,We.y=700,We.size="small";const Xe=[];if(typeof De<"u")for(let Tt in De.config.props)delete We[De.config.props[Tt]],Xe.push(De.config.props[Tt]);a[16].populate(We),y===!0&&(v-=1),o=a[16];const ze={};ze.x=400,ze.y=700,ze.size="small",m=ze.is||"Card";let we;if(typeof m=="string"){if(we=u.components&&u.components[m]||h[m],!we)throw new Error('Component "Card" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(we=m);a[17]=we.call(null,{props:ze},a[16],i),a[17][Symbol.for("slots")][0]?(o=a[17][Symbol.for("slots")][0],C=a[17],y=!0):o=a[17][Symbol.for("children")][0],y===!0&&(v=1+1);const et={};a[18]=this.element({parent:o||"root"},y===!0?C:i),a[18].populate(et),y===!0&&(v-=1),o=a[18];const Je={};a[19]=this.element({parent:o||"root"},y===!0?C:i),Je.color=i.color,Je.w=100,Je.h=100,a[19].populate(Je),y===!0&&(v-=1),y===!0&&v===0&&(y=!1);const Ze=u.components&&u.components.NamedSlotCard||h.NamedSlotCard;o=a[0];const ot={};a[20]=this.element({parent:o||"root"},y===!0?C:i),ot.x=800,ot.y=700;const St=[];if(typeof Ze<"u")for(let Tt in Ze.config.props)delete ot[Ze.config.props[Tt]],St.push(Ze.config.props[Tt]);a[20].populate(ot),y===!0&&(v-=1),o=a[20];const lt={};lt.x=800,lt.y=700,m=lt.is||"NamedSlotCard";let It;if(typeof m=="string"){if(It=u.components&&u.components[m]||h[m],!It)throw new Error('Component "NamedSlotCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(It=m);a[21]=It.call(null,{props:lt},a[20],i),a[21][Symbol.for("slots")][0]?(o=a[21][Symbol.for("slots")][0],C=a[21],y=!0):o=a[21][Symbol.for("children")][0],y===!0&&(v=4+1);const je={};a[22]=this.element({parent:o||"root"},y===!0?C:i),a[22].populate(je),y===!0&&(v-=1),o=a[22];const at={};a[23]=this.element({parent:o||"root"},y===!0?C:i),at.color="0x0891b2ff",at.x=10,at.y=140,at.w=80,at.h=60,at.parent=C[Symbol.for("slots")]!==void 0&&Array.isArray(C[Symbol.for("slots")])===!0&&C[Symbol.for("slots")].filter(Tt=>Tt.ref==="second").shift()||o,at.slot="second",a[23].populate(at),y===!0&&(v-=1),o=a[22];const xt={};a[24]=this.element({parent:o||"root"},y===!0?C:i),xt.color=i.color,xt.w=100,xt.h=100,xt.parent=C[Symbol.for("slots")]!==void 0&&Array.isArray(C[Symbol.for("slots")])===!0&&C[Symbol.for("slots")].filter(Tt=>Tt.ref==="third").shift()||o,xt.slot="third",a[24].populate(xt),y===!0&&(v-=1);const dt=u.components&&u.components.Square||h.Square;o=a[22];const xn={};a[25]=this.element({parent:o||"root"},y===!0?C:i),xn.size=100,xn.parent=C[Symbol.for("slots")]!==void 0&&Array.isArray(C[Symbol.for("slots")])===!0&&C[Symbol.for("slots")].filter(Tt=>Tt.ref==="first").shift()||o,xn.slot="first";const pn=[];if(typeof dt<"u")for(let Tt in dt.config.props)delete xn[dt.config.props[Tt]],pn.push(dt.config.props[Tt]);a[25].populate(xn),y===!0&&(v-=1),o=a[25];const zt={};zt.size=100,zt.slot="first",m=zt.is||"Square";let Ct;if(typeof m=="string"){if(Ct=u.components&&u.components[m]||h[m],!Ct)throw new Error('Component "Square" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ct=m);a[26]=Ct.call(null,{props:zt},a[25],i),a[26][Symbol.for("slots")][0]?(o=a[26][Symbol.for("slots")][0],C=a[26],y=!0):o=a[26][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),o=a[22];const Wt={};return a[27]=this.element({parent:o||"root"},y===!0?C:i),Wt.color="0x4d7c0fff",Wt.x=40,Wt.y=40,Wt.w=40,Wt.h=60,Wt.parent=C[Symbol.for("slots")]!==void 0&&Array.isArray(C[Symbol.for("slots")])===!0&&C[Symbol.for("slots")].filter(Tt=>Tt.ref==="second").shift()||o,Wt.slot="second",a[27].populate(Wt),y===!0&&(v-=1),y===!0&&v===0&&(y=!1),a},effects:[function(o,i,u,h,g,x){i[4].set("color",o.color)},function(o,i,u,h,g,x){i[13].set("color",o.color)},function(o,i,u,h,g,x){i[19].set("color",o.color)},function(o,i,u,h,g,x){i[24].set("color",o.color)}],context:{}},state(){return{color:bl[0]}},hooks:{ready(){this.$setInterval(()=>{const f=bl.indexOf(this.color)+1;this.color=f<=bl.length?bl[f]:bl[0]},600)}}}),S6=tt.Component("MemoryCard",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w=320,m.h=200,m.x=i.col*360,m.y=i.row*250,m.scale={transition:i.scale},m.rotation={transition:i.disabled?-2:0},a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.h={transition:i.h},C.w=320,C.y=125,C.mount="{y: 0.5}",C.color={transition:i.disabled?"#ccc":"#fff"},C.src=i.image+"&w=320&h=200",C.effects=[{type:"radius",props:{radius:6}}],C.show=i.open,a[1].populate(C),o=a[0];const y={};return a[2]=this.element({parent:o||"root"},i),y.h={transition:i.h},y.w=320,y.y=125,y.mount="{y: 0.5}",y.color=i.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"},y.effects=[{type:"radius",props:{radius:6}}],a[2].populate(y),a},effects:[function(o,i,u,h,g,x){i[0].set("scale",{transition:o.scale})},function(o,i,u,h,g,x){i[0].set("rotation",{transition:o.disabled?-2:0})},function(o,i,u,h,g,x){i[1].set("h",{transition:o.h})},function(o,i,u,h,g,x){i[1].set("color",{transition:o.disabled?"#ccc":"#fff"})},function(o,i,u,h,g,x){i[1].set("src",o.image+"&w=320&h=200")},function(o,i,u,h,g,x){i[1].set("effects",[{type:"radius",props:{radius:6}}])},function(o,i,u,h,g,x){i[1].set("show",o.open)},function(o,i,u,h,g,x){i[2].set("h",{transition:o.h})},function(o,i,u,h,g,x){i[2].set("color",o.open?"0x00000000":{top:"0xefefefff",bottom:"0xaaaaaaff"})},function(o,i,u,h,g,x){i[2].set("effects",[{type:"radius",props:{radius:6}}])}],context:{}},props:["row","col","image","description","index"],state(){return{disabled:!1,open:!1,h:200,scale:1}},hooks:{init(){this.$listen("closeMemoryCard",f=>{f===this.index&&this.$setTimeout(()=>this.flip(),1e3)}),this.$listen("deactivateMemoryCard",f=>{f===this.index&&(this.$setTimeout(()=>{this.scale=1.16},500),this.$setTimeout(()=>{this.disabled=!0,this.scale=1},800))})},focus(f){this.scale=1.08;const o="Card "+(this.index+1)+(this.disabled?" (disabled)":"");this.$announcer.speak(o)},unfocus(){this.scale=1}},input:{enter(){if(!this.disabled){if(this.open){this.$announcer.speak("Card already open. Choose another");return}this.flip(),this.$announcer.speak(`Image of a ${this.description}`),this.$emit("selectMemoryCard",this.index)}}},methods:{flip(){this.h=0,this.$setTimeout(()=>{this.open=!this.open,this.h=200},250)}}}),DC=[{image:"https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb",description:"House"},{image:"https://images.pexels.com/photos/2902440/pexels-photo-2902440.jpeg?auto=compress&cs=tinysrgb",description:"Tree"},{image:"https://images.pexels.com/photos/686094/pexels-photo-686094.jpeg?auto=compress&cs=tinysrgb",description:"Dog"},{image:"https://images.pexels.com/photos/1302290/pexels-photo-1302290.jpeg?auto=compress&cs=tinysrgb",description:"Cat"},{image:"https://images.pexels.com/photos/627678/pexels-photo-627678.jpeg?auto=compress&cs=tinysrgb",description:"Car"},{image:"https://images.pexels.com/photos/1616566/pexels-photo-1616566.jpeg?auto=compress&cs=tinysrgb",description:"Bicycle"}],C6=tt.Component("Announcer",{components:{MemoryCard:S6},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1;const M={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(M),o=a[0];const b={};a[1]=this.element({parent:o||"root"},v===!0?y:i),b.font="raleway",b.size=80,b.color="0xffffffff",b.content="Let's play memory!",b.x=580,b.y=60,b.__textnode=!0,a[1].populate(b),o=a[0];const _={};a[2]=this.element({parent:o||"root"},v===!0?y:i),_.font="kalam",_.size=40,_.color="0xb91c1cff",_.content="the Accessible edition :)",_.x=1200,_.y=170,_.rotation="-6",_.__textnode=!0,a[2].populate(_),o=a[0];const O={};a[3]=this.element({parent:o||"root"},v===!0?y:i),O.x=260,O.y=260,a[3].populate(O),o=a[3];const B=[];let G,$;const j=(X=[],K,ee)=>{const de=x(X),k=new Set;let V=de.length;const Q={};for(G=Q.from||0,$=("to"in Q)?Q.to:de.length;V--;){const W=de[V];V<$&&V>=G&&k.add(""+W.id)}let se=ee.length;for(;se--;)if(k.has(ee[se])===!1){const W=ee[se];K[4][W]&&K[4][W].destroy(),delete K[4][W],K[5][W]&&K[5][W].destroy(),delete K[5][W]}ee.length=0;const J=de.length,te=[];for(let W=0;W<J;W++){if(W<G||W>=$)continue;const Z=Object.create(i);o=K[3],Z.card=de[W],Z.index=W,Z.key=""+Z.card.id,ee.push(Z.key);const ce=u.components&&u.components.MemoryCard||h.MemoryCard;K[4]===void 0&&(K[4]={});const xe={};K[4][Z.key]===void 0&&(K[4][Z.key]=this.element({parent:o||"root"},v===!0?y:i)),xe.col=Z.index%4,xe.row=Math.floor(Z.index/4)%3,xe.image=Z.card.image,xe.description=Z.card.description,xe.ref="card"+Z.index,xe.index=Z.index;const ge=[];if(typeof ce<"u")for(let ye in ce.config.props)delete xe[ce.config.props[ye]],ge.push(ce.config.props[ye]);K[4][Z.key].nodeId===void 0&&K[4][Z.key].populate(xe),K[5]===void 0&&(K[5]={}),o=K[4][Z.key];const pe={};if(K[5][Z.key]===void 0){C=Z.index%4,Array.isArray(C)===!0&&(C=x(C).slice(0)),pe.col=C,C=Math.floor(Z.index/4)%3,Array.isArray(C)===!0&&(C=x(C).slice(0)),pe.row=C,pe.image=Z.card.image,pe.description=Z.card.description,C="card"+Z.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),pe.ref=C,C=Z.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),pe.index=C,m=pe.is||"MemoryCard";let ye;if(typeof m=="string"){if(ye=u.components&&u.components[m]||h[m],!ye)throw new Error('Component "MemoryCard" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ye=m);K[5][Z.key]=ye.call(null,{props:pe},K[4][Z.key],i),K[5][Z.key][Symbol.for("slots")][0]?(o=K[5][Z.key][Symbol.for("slots")][0],y=K[5][Z.key],v=!0):o=K[5][Z.key][Symbol.for("children")][0]}let Ee=()=>{(typeof ge>"u"||ge.indexOf("col")===-1)&&K[4][Z.key].set("col",Z.index%4)};g(Ee,null),te.push(Ee);let Re=()=>{(typeof ge>"u"||ge.indexOf("row")===-1)&&K[4][Z.key].set("row",Math.floor(Z.index/4)%3)};g(Re,null),te.push(Re);let z=()=>{(typeof ge>"u"||ge.indexOf("ref")===-1)&&K[4][Z.key].set("ref","card"+Z.index)};g(z,null),te.push(z);let Me=()=>{(typeof ge>"u"||ge.indexOf("index")===-1)&&K[4][Z.key].set("index",Z.index)};g(Me,null),te.push(Me),K[5][Z.key][Symbol.for("props")].col=Z.index%4,K[5][Z.key][Symbol.for("props")].row=Math.floor(Z.index/4)%3,K[5][Z.key][Symbol.for("props")].ref="card"+Z.index,K[5][Z.key][Symbol.for("props")].index=Z.index}return te};let ne;return g(()=>{i[Symbol.for("removeGlobalEffects")](ne),ne=null,ne=j(i.cards,a,B)},["cards"]),a},effects:[],context:{}},state(){return{cards:DC.concat(DC).map((f,o)=>({...f,id:`card${o}`})),focusedRow:-1,focusedCol:-1,openCards:[],pairs:0}},hooks:{init(){this.shuffle(),this.$listen("selectMemoryCard",f=>{this.openCards.length<2&&this.openCards.push(f),this.openCards.length===2&&(this.cards[this.openCards[0]].description===this.cards[this.openCards[1]].description?(this.$emit("deactivateMemoryCard",this.openCards[0]),this.$emit("deactivateMemoryCard",this.openCards[1]),this.pairs++,this.$setTimeout(()=>{this.$announcer.speak(this.pairs===this.cards.length/2?"Congratulations, you found all pairs!":`You found a pair! ${this.cards.length/2-this.pairs} more to go.`)},1500)):(this.$emit("closeMemoryCard",this.openCards[0]),this.$emit("closeMemoryCard",this.openCards[1]),this.$setTimeout(()=>{this.$announcer.speak("No match. Try again")},1500)),this.openCards.length=0)})},destroy(){this.$announcer.speak("Thanks for playing Memory")}},watch:{focusedCol(f){if(this.focusedRow===-1){this.focusedRow=0;return}f=f+this.focusedRow*4,this.$select("card"+f).$focus()},focusedRow(f){if(this.focusedCol===-1){this.focusedCol=0;return}f=this.focusedCol+f*4,this.$select("card"+f).$focus()}},methods:{shuffle(){this.cards.sort(()=>.5-Math.random())}},input:{left(){this.focusedCol===0?this.focusedRow===0?this.$announcer.speak("You are already at the first card"):(this.focusedCol=3,this.focusedRow--):this.focusedCol=Math.max(0,this.focusedCol-1)},right(){this.focusedCol===3?this.focusedRow===2?this.$announcer.speak("You are already at the last card"):(this.focusedCol=0,this.focusedRow++):this.focusedCol=Math.min(3,this.focusedCol+1)},up(){this.focusedCol===0&&this.$announcer.speak("You are already at the first card"),this.focusedRow=Math.max(0,this.focusedRow-1)},down(){this.focusedRow===2&&this.$announcer.speak("You are already at the last card"),this.focusedRow=Math.min(2,this.focusedRow+1)}}}),El=(f,o)=>Math.floor(Math.random()*(o-f+1)+f),T6=tt.Component("Item",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};return a[0]=this.element({parent:o||"root"},i),m.src="assets/blits-b-small.png",m.w=96,m.h=168,m.x={transition:{value:i.x,duration:2900}},m.y={transition:{value:i.y,duration:2900}},m.rotation={transition:{value:i.rotation,duration:2900}},m.scale={transition:{value:i.scale,duration:1e3}},a[0].populate(m),a},effects:[function(o,i,u,h,g,x){i[0].set("x",{transition:{value:o.x,duration:2900}})},function(o,i,u,h,g,x){i[0].set("y",{transition:{value:o.y,duration:2900}})},function(o,i,u,h,g,x){i[0].set("rotation",{transition:{value:o.rotation,duration:2900}})},function(o,i,u,h,g,x){i[0].set("scale",{transition:{value:o.scale,duration:1e3}})}],context:{}},state(){return{x:El(20,1560),y:El(20,720),rotation:0,scale:.1}},hooks:{ready(){this.scale=1,this.$setInterval(()=>{this.scale=1,this.x=El(20,1740),this.y=El(20,900),this.rotation=El(10,360)},3e3)}}}),b6=tt.Component("Exponential",{components:{Item:T6},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1;const v={};a[0]=this.element({parent:o||"root"},y===!0?C:i),a[0].populate(v),o=a[0];const M=[];let b,_;const O=(G=[],$,j)=>{const ne=x(G),X=new Set;let K=ne.length;const ee={};for(b=ee.from||0,_=("to"in ee)?ee.to:ne.length;K--;){const Q=ne[K];K<_&&K>=b&&X.add(""+Q)}let de=j.length;for(;de--;)if(X.has(j[de])===!1){const Q=j[de];$[1][Q]&&$[1][Q].destroy(),delete $[1][Q],$[2][Q]&&$[2][Q].destroy(),delete $[2][Q]}j.length=0;const k=ne.length,V=[];for(let Q=0;Q<k;Q++){if(Q<b||Q>=_)continue;const se=Object.create(i);o=$[0],se.item=ne[Q],se.undefined=Q,se.key=""+se.item,j.push(se.key);const J=u.components&&u.components.Item||h.Item;$[1]===void 0&&($[1]={});const te={};$[1][se.key]===void 0&&($[1][se.key]=this.element({parent:o||"root"},y===!0?C:i));const W=[];if(typeof J<"u")for(let ce in J.config.props)delete te[J.config.props[ce]],W.push(J.config.props[ce]);$[1][se.key].nodeId===void 0&&$[1][se.key].populate(te),$[2]===void 0&&($[2]={}),o=$[1][se.key];const Z={};if($[2][se.key]===void 0){m=Z.is||"Item";let ce;if(typeof m=="string"){if(ce=u.components&&u.components[m]||h[m],!ce)throw new Error('Component "Item" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ce=m);$[2][se.key]=ce.call(null,{props:Z},$[1][se.key],i),$[2][se.key][Symbol.for("slots")][0]?(o=$[2][se.key][Symbol.for("slots")][0],C=$[2][se.key],y=!0):o=$[2][se.key][Symbol.for("children")][0]}}return V};let B;return g(()=>{i[Symbol.for("removeGlobalEffects")](B),B=null,B=O(i.items,a,M)},["items"]),a},effects:[],context:{}},state(){return{items:[]}},hooks:{ready(){const f=this.$setInterval(()=>{for(let o=0;o<=Math.floor(this.items.length/10);o++)this.items.push(`item${this.items.length}`);this.$log.info("# items",this.items.length),this.items.length>100&&clearInterval(f)},2e3)}}}),NT=tt.Component("Ball",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};return a[0]=this.element({parent:o||"root"},i),m.w=100,m.h=100,m.src="/assets/basketball.png",a[0].populate(m),a},effects:[],context:{}},hooks:{attach(){this.$emit("ballUpdate","Attached to render tree")},detach(){this.$emit("ballUpdate","Detached from render tree")},enter(){this.$emit("ballUpdate","Entered viewport")},exit(){this.$emit("ballUpdate","Exited viewport")}}}),Lh=(f,o)=>Math.floor(Math.random()*(o-f+1)+f),E6=tt.Component("Viewport",{components:{Ball:NT},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(b),v===!0&&(M-=1),o=a[0];const _={};a[1]=this.element({parent:o||"root"},v===!0?y:i),_.size=32,_.x=960,_.y=540,_.mount=.5,_.content=i.status.join(`
`),_.lineheight=52,_.maxwidth=500,_.__textnode=!0,a[1].populate(_),v===!0&&(M-=1);const O=u.components&&u.components.Ball||h.Ball;o=a[0];const B={};a[2]=this.element({parent:o||"root"},v===!0?y:i),B.x={transition:{value:i.x,duration:1250}},B.y={transition:{value:i.y,duration:1250}},B.rotation={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},B.w=100,B.h=100;const G=[];if(typeof O<"u")for(let ne in O.config.props)delete B[O.config.props[ne]],G.push(O.config.props[ne]);a[2].populate(B),v===!0&&(M-=1),o=a[2];const $={};C={transition:{value:i.x,duration:1250}},Array.isArray(C)===!0&&(C=x(C).slice(0)),$.x=C,C={transition:{value:i.y,duration:1250}},Array.isArray(C)===!0&&(C=x(C).slice(0)),$.y=C,C={transition:{value:i.rotation,duration:1400,easing:"ease-in-out"}},Array.isArray(C)===!0&&(C=x(C).slice(0)),$.rotation=C,$.w=100,$.h=100,m=$.is||"Ball";let j;if(typeof m=="string"){if(j=u.components&&u.components[m]||h[m],!j)throw new Error('Component "Ball" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(j=m);return a[3]=j.call(null,{props:$},a[2],i),a[3][Symbol.for("slots")][0]?(o=a[3][Symbol.for("slots")][0],y=a[3],v=!0):o=a[3][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),a},effects:[function(o,i,u,h,g,x){i[1].set("content",o.status.join(`
`))},function(o,i,u,h,g,x){(typeof skip2>"u"||skip2.indexOf("x")===-1)&&i[2].set("x",{transition:{value:o.x,duration:1250}})},function(o,i,u,h,g,x){(typeof skip2>"u"||skip2.indexOf("y")===-1)&&i[2].set("y",{transition:{value:o.y,duration:1250}})},function(o,i,u,h,g,x){(typeof skip2>"u"||skip2.indexOf("rotation")===-1)&&i[2].set("rotation",{transition:{value:o.rotation,duration:1400,easing:"ease-in-out"}})},function(o,i,u,h,g,x){i[3][Symbol.for("props")].x={transition:{value:o.x,duration:1250}}},function(o,i,u,h,g,x){i[3][Symbol.for("props")].y={transition:{value:o.y,duration:1250}}},function(o,i,u,h,g,x){i[3][Symbol.for("props")].rotation={transition:{value:o.rotation,duration:1400,easing:"ease-in-out"}}}],context:{}},state(){return{x:-400,y:-400,rotation:0,status:[],count:1}},hooks:{ready(){this.$listen("ballUpdate",f=>{this.status.unshift(`${this.count++} -  ${f}`),this.status.length=Math.min(this.status.length,8)}),this.rotation=Lh(-90,90),this.x=(1920-100)/2,this.y=(1080-100)/2,this.$setInterval(()=>{this.x=Lh(-300,2220),this.y=Lh(-300,1380),this.rotation=Lh(-90,90)},2500)}}}),Xl={code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w=1920,m.h=1080,m.color="0xffffffff",m.effects=[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}],a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.show=i.up!==void 0,a[1].populate(C),o=a[1];const y={};a[2]=this.element({parent:o||"root"},i),y.src="assets/arrow.png",y.w=100,y.h=44,y.x=960,y.y=40,y.mount="{x: 0.5}",a[2].populate(y),o=a[1];const v={};a[3]=this.element({parent:o||"root"},i),v.content=i.up&&i.up.toUpperCase(),v.x=960,v.y=100,v.size=76,v.mount="{x: 0.5}",v.__textnode=!0,a[3].populate(v),o=a[0];const M={};a[4]=this.element({parent:o||"root"},i),M.show=i.right!==void 0,a[4].populate(M),o=a[4];const b={};a[5]=this.element({parent:o||"root"},i),b.src="assets/arrow.png",b.w=100,b.h=44,b.x=1900,b.y=540,b.mount="{x: 1, y: 0.5}",b.rotation=90,a[5].populate(b),o=a[4];const _={};a[6]=this.element({parent:o||"root"},i),_.content=i.right&&i.right.toUpperCase(),_.x=1760,_.y=540,_.size=76,_.rotation=90,_.mount=.5,_.__textnode=!0,a[6].populate(_),o=a[0];const O={};a[7]=this.element({parent:o||"root"},i),O.show=i.down!==void 0,a[7].populate(O),o=a[7];const B={};a[8]=this.element({parent:o||"root"},i),B.src="assets/arrow.png",B.w=100,B.h=44,B.x=960,B.y=1040,B.mount="{x: 0.5, y: 1}",B.rotation=180,a[8].populate(B),o=a[7];const G={};a[9]=this.element({parent:o||"root"},i),G.content=i.down&&i.down.toUpperCase(),G.x=960,G.y=980,G.size=76,G.mount="{x: 0.5, y: 1}",G.__textnode=!0,a[9].populate(G),o=a[0];const $={};a[10]=this.element({parent:o||"root"},i),$.show=i.left!==void 0,a[10].populate($),o=a[10];const j={};a[11]=this.element({parent:o||"root"},i),j.src="assets/arrow.png",j.w=100,j.h=44,j.x=40,j.y=540,j.mount="{ y: 0.5}",j.rotation="-90",a[11].populate(j),o=a[10];const ne={};a[12]=this.element({parent:o||"root"},i),ne.content=i.left&&i.left.toUpperCase(),ne.x=180,ne.y=540,ne.size=76,ne.mount=.5,ne.rotation="-90",ne.__textnode=!0,a[12].populate(ne),o=a[0];const X={};return a[13]=this.element({parent:o||"root"},i),X.content=i.pageTitle,X.font="raleway",X.x=960,X.y=540,X.size=240,X.mount=.5,X.__textnode=!0,a[13].populate(X),a},effects:[function(o,i,u,h,g,x){i[0].set("effects",[{type:"radialGradient",props:{colors:["0xb43fcbff","0x6150cbff"],pivot:[.5,1.1],width:2400,height:800}}])},function(o,i,u,h,g,x){i[1].set("show",o.up!==void 0)},function(o,i,u,h,g,x){i[3].set("content",o.up&&o.up.toUpperCase())},function(o,i,u,h,g,x){i[4].set("show",o.right!==void 0)},function(o,i,u,h,g,x){i[6].set("content",o.right&&o.right.toUpperCase())},function(o,i,u,h,g,x){i[7].set("show",o.down!==void 0)},function(o,i,u,h,g,x){i[9].set("content",o.down&&o.down.toUpperCase())},function(o,i,u,h,g,x){i[10].set("show",o.left!==void 0)},function(o,i,u,h,g,x){i[12].set("content",o.left&&o.left.toUpperCase())},function(o,i,u,h,g,x){i[13].set("content",o.pageTitle)}],context:{}},props:[{key:"page",cast:Object}],computed:{pageTitle(){return this.page&&this.page.title||this.title}},state(){return{title:"Start",up:"up",right:"right",down:"down",left:"left"}}},k6=tt.Component("RouterHookPage",{...Xl,state(){return{title:"Start",down:"episode flow",right:"movie flow"}},input:{right(){this.$router.to("/examples/router-hooks/movie")},down(){this.$router.to("/examples/router-hooks/episode/1")}}}),A6=tt.Component("RouterHookMovie",{...Xl,state(){return{title:"Movie",left:"Back",right:"Rating"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/rating")}}}),I6=tt.Component("RouterHookRating",{...Xl,state(){return{title:"Rating",left:"Back",right:"TO START"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/")}}}),M6=tt.Component("RouterHookEpisode",{...Xl,state(){return{title:"Episode",left:"Back",right:"NEXT EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to(`/examples/router-hooks/episode/${this.page.id+1}`,void 0,{inHistory:!1})}}}),_6=tt.Component("RouterHookEpisode",{...Xl,state(){return{title:`Episodes 
 overview`,right:"FIRST EPISODE"}},input:{left(){this.$router.back()},right(){this.$router.to("/examples/router-hooks/episode/1",void 0,{inHistory:!1})}}}),vr={slideInOutLeft:{before:{prop:"x",value:"100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"-100%",duration:400}},slideInOutRight:{before:{prop:"x",value:"-100%"},in:{prop:"x",value:0,duration:400},out:{prop:"x",value:"100%",duration:400}},slideInOutUp:{before:{prop:"y",value:"100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"-100%",duration:400}},slideInOutDown:{before:{prop:"y",value:"-100%"},in:{prop:"y",value:0,duration:400},out:{prop:"y",value:"100%",duration:400}}},R6=[{path:"/examples/router-hooks",component:k6,hooks:{async before(f,o){return o&&o.path==="examples/router-hooks/movie"&&(f.transition=vr.slideInOutRight),o&&o.path==="examples/router-hooks/rating"&&(f.transition=vr.slideInOutLeft),o&&o.path.indexOf("episode")>-1&&(f.transition=vr.slideInOutDown),f}}},{path:"/examples/router-hooks/episode/:id",component:M6,hooks:{before(f,o){o&&o.path.indexOf("episode")>-1&&(f.transition=vr.slideInOutLeft);const{id:i}=f.params;return i>5?"/examples/router-hooks/":(f.data.page={id:parseInt(i),title:`Episode ${i}`},f)}},transition:vr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/episode",component:_6,transition:vr.slideInOutUp,options:{backtrack:!0}},{path:"/examples/router-hooks/movie",component:A6,hooks:{before(f,o){return o&&o.path==="examples/router-hooks"&&(f.transition=vr.slideInOutLeft),o&&o.path==="examples/router-hooks/rating"&&(f.transition=vr.slideInOutRight),f}}},{path:"/examples/router-hooks/rating",component:I6,transition:vr.slideInOutLeft}],L6=tt.Component("Resize",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.y=30,C.content="fit (Resize Mode) sample",C.maxwidth=1920,C.align="center",C.__textnode=!0,a[1].populate(C),o=a[0];const y={};a[2]=this.element({parent:o||"root"},i),y.x={transition:{value:i.pages.x1,duration:200}},y.y=90,a[2].populate(y),o=a[2];const v={};a[3]=this.element({parent:o||"root"},i),v.x=100,v.content="Image dimensions: 2560 X 1440",v.__textnode=!0,a[3].populate(v),o=a[2];const M={};a[4]=this.element({parent:o||"root"},i),M.x=100,M.y=80,M.content=i.titles.t1,M.__textnode=!0,a[4].populate(M),o=a[2];const b={};a[5]=this.element({parent:o||"root"},i),b.y=150,b.x=100,a[5].populate(b),o=a[5];const _={};a[6]=this.element({parent:o||"root"},i),_.w=i.w,_.h=i.w-300,_.src=i.img,_.fit="{type: 'cover', position: { y: 0 } }",a[6].populate(_),o=a[5];const O={};a[7]=this.element({parent:o||"root"},i),O.w=i.w,O.h=i.w-300,O.src=i.img,O.fit="{ type: 'cover', position: { y: 0.5 } }",O.x=600,a[7].populate(O),o=a[5];const B={};a[8]=this.element({parent:o||"root"},i),B.w=i.w,B.h=i.w-300,B.src=i.img,B.fit="{ type: 'cover', position: { y: 1 } }",B.x=1200,a[8].populate(B),o=a[2];const G={};a[9]=this.element({parent:o||"root"},i),G.x=100,G.y=500,G.content=i.titles.t2,G.__textnode=!0,a[9].populate(G),o=a[2];const $={};a[10]=this.element({parent:o||"root"},i),$.y=600,$.x=100,a[10].populate($),o=a[10];const j={};a[11]=this.element({parent:o||"root"},i),j.w=i.w,j.h=i.w-150,j.src=i.img,j.fit="{ type: 'cover', position: { x: 0 } }",a[11].populate(j),o=a[10];const ne={};a[12]=this.element({parent:o||"root"},i),ne.w=i.w,ne.h=i.w-150,ne.src=i.img,ne.fit="{ type: 'cover', position: { x: 0.5 } }",ne.x=600,a[12].populate(ne),o=a[10];const X={};a[13]=this.element({parent:o||"root"},i),X.w=i.w,X.h=i.w-150,X.src=i.img,X.fit="{ type: 'cover', position: { x: 1 } }",X.x=1200,a[13].populate(X),o=a[0];const K={};a[14]=this.element({parent:o||"root"},i),K.x={transition:{value:i.pages.x2,duration:200}},K.y=90,a[14].populate(K),o=a[14];const ee={};a[15]=this.element({parent:o||"root"},i),ee.x=100,ee.content="Image dimensions: 1440 X 2560",ee.__textnode=!0,a[15].populate(ee),o=a[14];const de={};a[16]=this.element({parent:o||"root"},i),de.x=100,de.y=80,de.content=i.titles.t3,de.__textnode=!0,a[16].populate(de),o=a[14];const k={};a[17]=this.element({parent:o||"root"},i),k.y=150,k.x=100,a[17].populate(k),o=a[17];const V={};a[18]=this.element({parent:o||"root"},i),V.w=i.w,V.h=i.w-200,V.src=i.img1,V.fit="{ type: 'cover', position: { y: 0, x: 0 } }",a[18].populate(V),o=a[17];const Q={};a[19]=this.element({parent:o||"root"},i),Q.w=i.w,Q.h=i.w-200,Q.src=i.img1,Q.fit="{ type: 'cover', position: { y: 0.5, x: 0.5 } }",Q.x=600,a[19].populate(Q),o=a[17];const se={};a[20]=this.element({parent:o||"root"},i),se.w=i.w,se.h=i.w-200,se.src=i.img1,se.fit="{ type: 'cover', position: { y: 1, x: 1 } }",se.x=1200,a[20].populate(se),o=a[14];const J={};a[21]=this.element({parent:o||"root"},i),J.x=100,J.y=500,J.content=i.titles.t4,J.__textnode=!0,a[21].populate(J),o=a[14];const te={};a[22]=this.element({parent:o||"root"},i),te.y=570,te.x=100,a[22].populate(te),o=a[22];const W={};a[23]=this.element({parent:o||"root"},i),W.w=i.w-350,W.h=i.w-100,W.src=i.img1,W.fit="{ type: 'cover', position: { x: 0 } }",a[23].populate(W),o=a[22];const Z={};a[24]=this.element({parent:o||"root"},i),Z.w=i.w-350,Z.h=i.w-100,Z.src=i.img1,Z.fit="{ type: 'cover', position: { x: 0.25 } }",Z.x=250,a[24].populate(Z),o=a[22];const ce={};a[25]=this.element({parent:o||"root"},i),ce.w=i.w-350,ce.h=i.w-100,ce.src=i.img1,ce.fit="{ type: 'cover', position: { x: 0.5 } }",ce.x=500,a[25].populate(ce),o=a[22];const xe={};a[26]=this.element({parent:o||"root"},i),xe.w=i.w-350,xe.h=i.w-100,xe.src=i.img1,xe.fit="{ type: 'cover', position: { x: 0.75 } }",xe.x=750,a[26].populate(xe),o=a[22];const ge={};a[27]=this.element({parent:o||"root"},i),ge.w=i.w-350,ge.h=i.w-100,ge.src=i.img1,ge.fit="{ type: 'cover', position: { x: 1 } }",ge.x=1e3,a[27].populate(ge),o=a[0];const pe={};a[28]=this.element({parent:o||"root"},i),pe.x={transition:{value:i.pages.x3,duration:200}},pe.y=90,a[28].populate(pe),o=a[28];const Ee={};a[29]=this.element({parent:o||"root"},i),Ee.x=100,Ee.content="Image dimensions: 2560 X 1440",Ee.__textnode=!0,a[29].populate(Ee),o=a[28];const Re={};a[30]=this.element({parent:o||"root"},i),Re.x=100,Re.y=80,Re.content=i.titles.t5,Re.__textnode=!0,a[30].populate(Re),o=a[28];const z={};a[31]=this.element({parent:o||"root"},i),z.y=150,z.x=100,z.w=i.w+100,z.h=i.w-200,z.color="0x000000ff",a[31].populate(z),o=a[31];const Me={};a[32]=this.element({parent:o||"root"},i),Me.w=i.w+100,Me.h=i.w-200,Me.src=i.img,Me.fit="contain",a[32].populate(Me),o=a[28];const ye={};a[33]=this.element({parent:o||"root"},i),ye.x=100,ye.y=500,ye.content=i.titles.t6,ye.__textnode=!0,a[33].populate(ye),o=a[28];const Ue={};a[34]=this.element({parent:o||"root"},i),Ue.y=550,Ue.x=100,Ue.w=i.w+100,Ue.h=i.w-100,Ue.color="0x000000ff",a[34].populate(Ue),o=a[34];const De={};a[35]=this.element({parent:o||"root"},i),De.w=i.w+100,De.h=i.w-100,De.src=i.img,De.fit="contain",a[35].populate(De),o=a[0];const We={};return a[36]=this.element({parent:o||"root"},i),We.x=1700,We.y=20,We.content="Page "+i.activePage+"/"+i.totalPages,We.__textnode=!0,a[36].populate(We),a},effects:[function(o,i,u,h,g,x){i[2].set("x",{transition:{value:o.pages.x1,duration:200}})},function(o,i,u,h,g,x){i[3].set("content","Image dimensions: 2560 X 1440")},function(o,i,u,h,g,x){i[14].set("x",{transition:{value:o.pages.x2,duration:200}})},function(o,i,u,h,g,x){i[15].set("content","Image dimensions: 1440 X 2560")},function(o,i,u,h,g,x){i[28].set("x",{transition:{value:o.pages.x3,duration:200}})},function(o,i,u,h,g,x){i[29].set("content","Image dimensions: 2560 X 1440")},function(o,i,u,h,g,x){i[36].set("content","Page "+o.activePage+"/"+o.totalPages)}],context:{}},state(){return{activePage:1,pages:{x1:0,x2:1920,x3:1920*2},w:500,img:"assets/testscreen.png",img1:"assets/testscreen_rotated.png",titles:{t1:"Texture width > height - fit cover maximum width of node and position Y - 0, 0.5, 1",t2:"Texture width > height - fit:cover maximum width of node and position X - 0, 0.5, 1",t3:"Texture width < height - fit cover maximum width of node and positionY - 0, 0.5, 1",t4:"Texture width < height - fit cover maximum width of node and position X - 0, 0.25, 0.5, 0.75, 1",t5:"Texture width > height - fit contain maximum height of node",t6:"Texture width > height - fit contain maximum width of node"}}},computed:{totalPages(){return this.pages,Object.keys(this.pages).length}},input:{right(){if(this.activePage<this.totalPages){for(let f=1;f<=this.totalPages;f++)this.pages[`x${f}`]=this.pages[`x${f}`]-1920;this.activePage+=1}},left(){if(this.activePage>1){for(let f=this.totalPages;f>=1;f--)this.pages[`x${f}`]=this.pages[`x${f}`]+1920;this.activePage-=1}}}}),D6=tt.Component("Flags",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),a[0].populate(m),o=a[0];const C=[];let y,v;const M=(_=[],O,B)=>{const G=x(_),$=new Set;let j=G.length;const ne={};for(y=ne.from||0,v=("to"in ne)?ne.to:G.length;j--;)G[j],j<v&&j>=y&&$.add(""+j);let X=B.length;for(;X--;)if($.has(B[X])===!1){const de=B[X];O[1][de]&&O[1][de].destroy(),delete O[1][de],O[2][de]&&O[2][de].destroy(),delete O[2][de],O[3][de]&&O[3][de].destroy(),delete O[3][de]}B.length=0;const K=G.length,ee=[];for(let de=0;de<K;de++){if(de<y||de>=v)continue;const k=Object.create(i);o=O[0],k.language=G[de],k.index=de,k.key=""+de,B.push(k.key),o=O[0],O[1]===void 0&&(O[1]={});const V={};O[1][k.key]===void 0&&(O[1][k.key]=this.element({parent:o||"root"},i)),V.x=k.index*250,O[1][k.key].nodeId===void 0&&O[1][k.key].populate(V),o=O[1][k.key],O[2]===void 0&&(O[2]={});const Q={};O[2][k.key]===void 0&&(O[2][k.key]=this.element({parent:o||"root"},i)),Q.src=k.language.flag,Q.w=150,Q.h=150,Q.alpha=k.index===k.activeIndex?1:.6,O[2][k.key].nodeId===void 0&&O[2][k.key].populate(Q),o=O[1][k.key],O[3]===void 0&&(O[3]={});const se={};O[3][k.key]===void 0&&(O[3][k.key]=this.element({parent:o||"root"},i)),se.content=k.language.name,se.y=150,se.maxwidth=150,se.align="center",se.color=k.index===k.activeIndex?"0xffffffff":"0xaaaaaaff",se.__textnode=!0,O[3][k.key].nodeId===void 0&&O[3][k.key].populate(se)}return ee};let b;return g(()=>{i[Symbol.for("removeGlobalEffects")](b),b=null,b=M(i.languages,a,C)},["languages"]),g(()=>{i.activeIndex;for(let _=0;_<i.languages.length;_++){if(_<y||_>=v)continue;const O={};O.index=_,O.language=i.languages[_],O.key=_,a[2][O.key].set("alpha",O.index===i.activeIndex?1:.6)}}),g(()=>{i.activeIndex;for(let _=0;_<i.languages.length;_++){if(_<y||_>=v)continue;const O={};O.index=_,O.language=i.languages[_],O.key=_,a[3][O.key].set("color",O.index===i.activeIndex?"0xffffffff":"0xaaaaaaff")}}),a},effects:[],context:{}},props:["languages"],state(){return{activeIndex:0}},watch:{activeIndex(f){const o=this.languages[f];o&&o.code&&this.$language.set(o.code)}},input:{right(){this.activeIndex=Math.min(this.activeIndex+1,this.languages.length-1)},left(){this.activeIndex=Math.max(this.activeIndex-1,0)}}}),PC=tt.Component("LanguagePlugin",{components:{Flags:D6},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),a[0].populate(M),y===!0&&(v-=1);const b=u.components&&u.components.Flags||h.Flags;o=a[0];const _={};a[1]=this.element({parent:o||"root"},y===!0?C:i),_.languages=i.languages,_.ref="flags",_.x=500,_.y=150;const O=[];if(typeof b<"u")for(let K in b.config.props)delete _[b.config.props[K]],O.push(b.config.props[K]);a[1].populate(_),y===!0&&(v-=1),o=a[1];const B={};B.languages=i.languages,B.ref="flags",B.x=500,B.y=150,m=B.is||"Flags";let G;if(typeof m=="string"){if(G=u.components&&u.components[m]||h[m],!G)throw new Error('Component "Flags" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(G=m);a[2]=G.call(null,{props:B},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],C=a[2],y=!0):o=a[2][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),o=a[0];const $={};a[3]=this.element({parent:o||"root"},y===!0?C:i),$.x=960,$.y=540,$.mount=.5,$.content=i.$language.translate("hello"),$.size=80,$.__textnode=!0,a[3].populate($),y===!0&&(v-=1),o=a[0];const j={};a[4]=this.element({parent:o||"root"},y===!0?C:i),j.x=960,j.y=640,j.mount=.5,j.content=i.$language.translate("bye"),j.size=50,j.__textnode=!0,a[4].populate(j),y===!0&&(v-=1),o=a[0];const ne={};a[5]=this.element({parent:o||"root"},y===!0?C:i),ne.x=960,ne.y=720,ne.mount=.5,ne.content=i.$language.translate("replacement",{first:"John",last:"Doe",age:18}),ne.size=36,ne.__textnode=!0,a[5].populate(ne),y===!0&&(v-=1),o=a[0];const X={};return a[6]=this.element({parent:o||"root"},y===!0?C:i),X.size=32,X.x=960,X.y=940,X.mount=.5,X.align="center",X.content="Current language: "+i.$language.language+`
 Language file: `+(i.loaded===!0?"Loaded":"loading ..."),X.__textnode=!0,a[6].populate(X),y===!0&&(v-=1),a},effects:[function(o,i,u,h,g,x){i[3].set("content",o.$language.translate("hello"))},function(o,i,u,h,g,x){i[4].set("content",o.$language.translate("bye"))},function(o,i,u,h,g,x){i[5].set("content",o.$language.translate("replacement",{first:"John",last:"Doe",age:18}))},function(o,i,u,h,g,x){i[6].set("content","Current language: "+o.$language.language+`
 Language file: `+(o.loaded===!0?"Loaded":"loading ..."))}],context:{}},state(){return{loaded:!1,languages:[{flag:"/assets/flags/united-states.png",code:"en-US",name:"English"},{flag:"/assets/flags/netherlands.png",code:"nl-NL",name:"Dutch"},{flag:"/assets/flags/france.png",code:"fr-FR",name:"French"},{flag:"/assets/flags/germany.png",code:"de-DE",name:"German"}]}},hooks:{init(){this.$language.set("en-US"),setTimeout(()=>{this.$language.load("/assets/translations.json").then(()=>{this.loaded=!0})},2e3)},focus(){this.$select("flags").$focus()}}}),P6=tt.Component("Box",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w=330,m.h=180,m.effects=[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}],m.color="{top: '0x667a97ff', bottom: '0x475569ff'}",a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.x=25,C.y=20,C.content=i.header,C.w=280,C.color="0x000000ff",C.contain="width",C.__textnode=!0,a[1].populate(C),o=a[0];const y={};return a[2]=this.element({parent:o||"root"},i),y.x=25,y.y=90,y.content=i.text,y.size=52,y.w=280,y.contain="width",y.align="center",y.__textnode=!0,a[2].populate(y),a},effects:[function(o,i,u,h,g,x){i[0].set("effects",[{type:"radius",props:{radius:20}},{type:"border",props:{width:1,color:"0xe2e8f0ff"}}])},function(o,i,u,h,g,x){i[1].set("content",o.header)},function(o,i,u,h,g,x){i[2].set("content",o.text)}],context:{}},props:["header","text"]}),O6=tt.Application({components:{Box:P6},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),b.w=1920,b.h=1080,a[0].populate(b),v===!0&&(M-=1),o=a[0];const _={};a[1]=this.element({parent:o||"root"},v===!0?y:i),_.y=250,a[1].populate(_),v===!0&&(M-=1),o=a[1];const O={};a[2]=this.element({parent:o||"root"},v===!0?y:i),O.content="KeyCode Finder",O.font="raleway",O.mount="{x: 0.5}",O.x=960,O.size=62,O.w=800,O.h=200,O.contain="width",O.__textnode=!0,a[2].populate(O),v===!0&&(M-=1),o=a[1];const B={};a[3]=this.element({parent:o||"root"},v===!0?y:i),B.content="Press any key to get find the correct key code mapping",B.mount="{x: 0.5}",B.x=960,B.y=100,B.size=32,B.w=800,B.h=200,B.contain="width",B.__textnode=!0,a[3].populate(B),v===!0&&(M-=1),o=a[0];const G={};a[4]=this.element({parent:o||"root"},v===!0?y:i),G.x=395,a[4].populate(G),v===!0&&(M-=1);const $=u.components&&u.components.Box||h.Box;o=a[4];const j={};a[5]=this.element({parent:o||"root"},v===!0?y:i),j.y=600,j.header="Key",j.text=i.key;const ne=[];if(typeof $<"u")for(let xe in $.config.props)delete j[$.config.props[xe]],ne.push($.config.props[xe]);a[5].populate(j),v===!0&&(M-=1),o=a[5];const X={};X.y=600,X.header="Key",C=i.key,Array.isArray(C)===!0&&(C=x(C).slice(0)),X.text=C,m=X.is||"Box";let K;if(typeof m=="string"){if(K=u.components&&u.components[m]||h[m],!K)throw new Error('Component "Box" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(K=m);a[6]=K.call(null,{props:X},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],y=a[6],v=!0):o=a[6][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const ee=u.components&&u.components.Box||h.Box;o=a[4];const de={};a[7]=this.element({parent:o||"root"},v===!0?y:i),de.x=400,de.y=600,de.header="Code",de.text=i.code;const k=[];if(typeof ee<"u")for(let xe in ee.config.props)delete de[ee.config.props[xe]],k.push(ee.config.props[xe]);a[7].populate(de),v===!0&&(M-=1),o=a[7];const V={};V.x=400,V.y=600,V.header="Code",C=i.code,Array.isArray(C)===!0&&(C=x(C).slice(0)),V.text=C,m=V.is||"Box";let Q;if(typeof m=="string"){if(Q=u.components&&u.components[m]||h[m],!Q)throw new Error('Component "Box" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Q=m);a[8]=Q.call(null,{props:V},a[7],i),a[8][Symbol.for("slots")][0]?(o=a[8][Symbol.for("slots")][0],y=a[8],v=!0):o=a[8][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const se=u.components&&u.components.Box||h.Box;o=a[4];const J={};a[9]=this.element({parent:o||"root"},v===!0?y:i),J.x=800,J.y=600,J.header="keyCode",J.text=i.keyCode;const te=[];if(typeof se<"u")for(let xe in se.config.props)delete J[se.config.props[xe]],te.push(se.config.props[xe]);a[9].populate(J),v===!0&&(M-=1),o=a[9];const W={};W.x=800,W.y=600,W.header="keyCode",C=i.keyCode,Array.isArray(C)===!0&&(C=x(C).slice(0)),W.text=C,m=W.is||"Box";let Z;if(typeof m=="string"){if(Z=u.components&&u.components[m]||h[m],!Z)throw new Error('Component "Box" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Z=m);a[10]=Z.call(null,{props:W},a[9],i),a[10][Symbol.for("slots")][0]?(o=a[10][Symbol.for("slots")][0],y=a[10],v=!0):o=a[10][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),o=a[0];const ce={};return a[11]=this.element({parent:o||"root"},v===!0?y:i),ce.mount="{x: 1}",ce.x=1860,ce.y=1e3,ce.size=30,ce.content=i.backLabel,ce.color=i.backPressed?"0xffffffff":"0x667a97ff",ce.__textnode=!0,a[11].populate(ce),v===!0&&(M-=1),a},effects:[function(o,i,u,h,g,x){(typeof skip5>"u"||skip5.indexOf("text")===-1)&&i[5].set("text",o.key)},function(o,i,u,h,g,x){i[6][Symbol.for("props")].text=o.key},function(o,i,u,h,g,x){(typeof skip7>"u"||skip7.indexOf("text")===-1)&&i[7].set("text",o.code)},function(o,i,u,h,g,x){i[8][Symbol.for("props")].text=o.code},function(o,i,u,h,g,x){(typeof skip9>"u"||skip9.indexOf("text")===-1)&&i[9].set("text",o.keyCode)},function(o,i,u,h,g,x){i[10][Symbol.for("props")].text=o.keyCode},function(o,i,u,h,g,x){i[11].set("content",o.backLabel)},function(o,i,u,h,g,x){i[11].set("color",o.backPressed?"0xffffffff":"0x667a97ff")}],context:{}},state(){return{backPressed:!1,key:"...",code:"...",keyCode:"..."}},computed:{backLabel(){return this.backPressed,this.backPressed?"Press back key again to navigate back":""}},methods:{updateLabels(f){this.key=f.key,this.code=f.code,this.keyCode=f.keyCode+""}},input:{any(f){this.backPressed=!1,this.updateLabels(f)},back(f){return this.backPressed===!0?this.$router.back():this.updateLabels(f),()=>{this.backPressed=!0}}}}),N6=tt.Component("Accent",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w=300,m.h=250,m.color=i.bColor,m.effects=[{type:"radius",props:{radius:8}}],a[0].populate(m),o=a[0];const C={};return a[1]=this.element({parent:o||"root"},i),C.x=150,C.y=125,C.mount="{x:0.5, y:0.5}",C.content=i.lang,C.color="0xffffffff",C.font="lato-black",C.__textnode=!0,a[1].populate(C),a},effects:[function(o,i,u,h,g,x){i[0].set("color",o.bColor)},function(o,i,u,h,g,x){i[0].set("effects",[{type:"radius",props:{radius:8}}])},function(o,i,u,h,g,x){i[1].set("content",o.lang)}],context:{}},state(){return{bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["lang"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}}}),U6=tt.Component("Accents",{components:{Accent:N6},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1;const M={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(M),o=a[0];const b={};a[1]=this.element({parent:o||"root"},v===!0?y:i),b.x={transition:i.x},a[1].populate(b),o=a[1];const _=[];let O,B;const G=(ne=[],X,K)=>{const ee=x(ne),de=new Set;let k=ee.length;const V={};for(O=V.from||0,B=("to"in V)?V.to:ee.length;k--;){const te=ee[k];k<B&&k>=O&&de.add(""+te.lang)}let Q=K.length;for(;Q--;)if(de.has(K[Q])===!1){const te=K[Q];X[2][te]&&X[2][te].destroy(),delete X[2][te],X[3][te]&&X[3][te].destroy(),delete X[3][te]}K.length=0;const se=ee.length,J=[];for(let te=0;te<se;te++){if(te<O||te>=B)continue;const W=Object.create(i);o=X[1],W.item=ee[te],W.index=te,W.key=""+W.item.lang,K.push(W.key);const Z=u.components&&u.components.Accent||h.Accent;X[2]===void 0&&(X[2]={});const ce={};X[2][W.key]===void 0&&(X[2][W.key]=this.element({parent:o||"root"},v===!0?y:i)),ce.lang=W.item.lang,ce.ref="accent"+W.index,ce.x=W.index*400;const xe=[];if(typeof Z<"u")for(let Ee in Z.config.props)delete ce[Z.config.props[Ee]],xe.push(Z.config.props[Ee]);X[2][W.key].nodeId===void 0&&X[2][W.key].populate(ce),X[3]===void 0&&(X[3]={}),o=X[2][W.key];const ge={};if(X[3][W.key]===void 0){ge.lang=W.item.lang,C="accent"+W.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),ge.ref=C,ge.x=W.index*400,m=ge.is||"Accent";let Ee;if(typeof m=="string"){if(Ee=u.components&&u.components[m]||h[m],!Ee)throw new Error('Component "Accent" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ee=m);X[3][W.key]=Ee.call(null,{props:ge},X[2][W.key],i),X[3][W.key][Symbol.for("slots")][0]?(o=X[3][W.key][Symbol.for("slots")][0],y=X[3][W.key],v=!0):o=X[3][W.key][Symbol.for("children")][0]}let pe=()=>{(typeof xe>"u"||xe.indexOf("ref")===-1)&&X[2][W.key].set("ref","accent"+W.index)};g(pe,null),J.push(pe),X[3][W.key][Symbol.for("props")].ref="accent"+W.index}return J};let $;g(()=>{i[Symbol.for("removeGlobalEffects")]($),$=null,$=G(i.data,a,_)},["data"]),o=a[0];const j={};return a[4]=this.element({parent:o||"root"},v===!0?y:i),j.content=i.activeAccent,j.font="lato-black",j.x=960,j.y=400,j.mount="{x:0.5}",j.letterspacing=10,j.size=40,j.__textnode=!0,a[4].populate(j),a},effects:[function(o,i,u,h,g,x){i[1].set("x",{transition:o.x})},function(o,i,u,h,g,x){i[4].set("content",o.activeAccent)}],context:{}},props:["data"],state(){return{x:160,activeIndex:0,activeAccent:""}},watch:{activeIndex(f){const o=this.$select(`accent${f}`);o&&o.$focus&&(o.$focus(),this.activeAccent=this.data[f].chars)}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.activeIndex<this.data.length-1&&this.move(1)},left(){this.activeIndex>0&&this.move(-1)}},methods:{move(f){const o=this.activeIndex+f;this.x=o>3?-(o-3)*400-160:160,this.activeIndex=o}}}),B6=tt.Component("Characters",{components:{Accents:U6},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),M.w=1920,a[0].populate(M),y===!0&&(v-=1),o=a[0];const b={};a[1]=this.element({parent:o||"root"},y===!0?C:i),b.x=960,b.y=50,b.mount="{x:0.5}",b.content="Alphabets",b.font="lato-black",b.size=60,b.__textnode=!0,a[1].populate(b),y===!0&&(v-=1),o=a[0];const _={};a[2]=this.element({parent:o||"root"},y===!0?C:i),_.x=960,_.y=150,_.mount="{x:0.5}",_.content=i.alphabets,_.font="lato-black",_.size=40,_.letterspacing=10,_.__textnode=!0,a[2].populate(_),y===!0&&(v-=1),o=a[0];const O={};a[3]=this.element({parent:o||"root"},y===!0?C:i),O.x=960,O.y=290,O.mount="{x:0.5}",O.content="Accents",O.font="lato-black",O.size=60,O.__textnode=!0,a[3].populate(O),y===!0&&(v-=1);const B=u.components&&u.components.Accents||h.Accents;o=a[0];const G={};a[4]=this.element({parent:o||"root"},y===!0?C:i),G.data=i.accents,G.y=400,G.ref="accents";const $=[];if(typeof B<"u")for(let ee in B.config.props)delete G[B.config.props[ee]],$.push(B.config.props[ee]);a[4].populate(G),y===!0&&(v-=1),o=a[4];const j={};j.data=i.accents,j.y=400,j.ref="accents",m=j.is||"Accents";let ne;if(typeof m=="string"){if(ne=u.components&&u.components[m]||h[m],!ne)throw new Error('Component "Accents" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ne=m);a[5]=ne.call(null,{props:j},a[4],i),a[5][Symbol.for("slots")][0]?(o=a[5][Symbol.for("slots")][0],C=a[5],y=!0):o=a[5][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),o=a[0];const X={};a[6]=this.element({parent:o||"root"},y===!0?C:i),X.w=950,X.h=40,X.color="0x000000ff",X.effects=[{type:"radius",props:{radius:10}}],X.y=1e3,X.placement="center",a[6].populate(X),y===!0&&(v-=1),o=a[6];const K={};return a[7]=this.element({parent:o||"root"},y===!0?C:i),K.content="The character ? represents a character that is not supported by the Lato-Black font",K.size=25,K.x=475,K.y=20,K.mount="{x:0.5, y:0.5}",K.__textnode=!0,a[7].populate(K),y===!0&&(v-=1),a},effects:[function(o,i,u,h,g,x){i[6].set("effects",[{type:"radius",props:{radius:10}}])}],context:{}},state(){return{alphabets:"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",accents:[{lang:"Dutch",chars:"éèëïüáóĳĲ"},{lang:"French",chars:"éèêëàâîïôùûç"},{lang:"Spanish",chars:"áéíóúñü"},{lang:"Turkish",chars:"ÇçĞğİiÖöÜüŞş"}]}},hooks:{focus(){const f=this.$select("accents");f&&f.$focus&&f.$focus()}}}),j6=tt.Component("Layout",{components:{Ball:NT},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),M.w=1920,M.h=1080,M.color="0xc4b5fdff",a[0].populate(M),y===!0&&(v-=1),o=a[0];const b={};a[1]=this.element({parent:o||"root"},y===!0?C:i),b.x=40,b.y=40,a[1].populate(b),y===!0&&(v-=1),o=a[1];const _={};a[2]=this.element({parent:o||"root"},y===!0?C:i),_.color="0x222222ff",_.content="Static horizontal Layout",_.__textnode=!0,a[2].populate(_),y===!0&&(v-=1),o=a[1];const O={};a[3]=this.element({parent:o||"root"},y===!0?C:i),O.y=50,O.gap=10,O.__layout=!0,a[3].populate(O),y===!0&&(v-=1),o=a[3];const B={};a[4]=this.element({parent:o||"root"},y===!0?C:i),B.w=50,B.h=100,B.color="0xeff6ffff",a[4].populate(B),y===!0&&(v-=1),o=a[3];const G={};a[5]=this.element({parent:o||"root"},y===!0?C:i),G.w=60,G.h=100,G.color="0xbfdbfeff",a[5].populate(G),y===!0&&(v-=1),o=a[3];const $={};a[6]=this.element({parent:o||"root"},y===!0?C:i),$.w=70,$.h=100,$.color="0x60a5faff",a[6].populate($),y===!0&&(v-=1),o=a[3];const j={};a[7]=this.element({parent:o||"root"},y===!0?C:i),j.w=80,j.h=100,j.color="0x2563ebff",a[7].populate(j),y===!0&&(v-=1),o=a[3];const ne={};a[8]=this.element({parent:o||"root"},y===!0?C:i),ne.w=90,ne.h=100,ne.color="0x1e40afff",a[8].populate(ne),y===!0&&(v-=1),o=a[0];const X={};a[9]=this.element({parent:o||"root"},y===!0?C:i),X.x=40,X.y=220,a[9].populate(X),y===!0&&(v-=1),o=a[9];const K={};a[10]=this.element({parent:o||"root"},y===!0?C:i),K.color="0x222222ff",K.content="Static vertical Layout",K.__textnode=!0,a[10].populate(K),y===!0&&(v-=1),o=a[9];const ee={};a[11]=this.element({parent:o||"root"},y===!0?C:i),ee.y=50,ee.gap=10,ee.direction="vertical",ee.__layout=!0,a[11].populate(ee),y===!0&&(v-=1),o=a[11];const de={};a[12]=this.element({parent:o||"root"},y===!0?C:i),de.w=100,de.h=50,de.color="0xeff6ffff",a[12].populate(de),y===!0&&(v-=1),o=a[11];const k={};a[13]=this.element({parent:o||"root"},y===!0?C:i),k.w=100,k.h=60,k.color="0xbfdbfeff",a[13].populate(k),y===!0&&(v-=1),o=a[11];const V={};a[14]=this.element({parent:o||"root"},y===!0?C:i),V.w=100,V.h=70,V.color="0x60a5faff",a[14].populate(V),y===!0&&(v-=1),o=a[11];const Q={};a[15]=this.element({parent:o||"root"},y===!0?C:i),Q.w=100,Q.h=80,Q.color="0x2563ebff",a[15].populate(Q),y===!0&&(v-=1),o=a[11];const se={};a[16]=this.element({parent:o||"root"},y===!0?C:i),se.w=100,se.h=90,se.color="0x1e40afff",a[16].populate(se),y===!0&&(v-=1),o=a[0];const J={};a[17]=this.element({parent:o||"root"},y===!0?C:i),J.x=40,J.y=700,a[17].populate(J),y===!0&&(v-=1),o=a[17];const te={};a[18]=this.element({parent:o||"root"},y===!0?C:i),te.color="0x222222ff",te.content="Nested Layouts",te.__textnode=!0,a[18].populate(te),y===!0&&(v-=1),o=a[17];const W={};a[19]=this.element({parent:o||"root"},y===!0?C:i),W.y=50,W.gap=10,W.direction="horizontal",W.__layout=!0,a[19].populate(W),y===!0&&(v-=1),o=a[19];const Z={};a[20]=this.element({parent:o||"root"},y===!0?C:i),Z.w=100,Z.h=50,Z.color="0xeff6ffff",a[20].populate(Z),y===!0&&(v-=1),o=a[19];const ce={};a[21]=this.element({parent:o||"root"},y===!0?C:i),ce.w=100,ce.h=60,ce.color="0xbfdbfeff",a[21].populate(ce),y===!0&&(v-=1),o=a[19];const xe={};a[22]=this.element({parent:o||"root"},y===!0?C:i),xe.direction="vertical",xe.gap=10,xe.__layout=!0,a[22].populate(xe),y===!0&&(v-=1),o=a[22];const ge={};a[23]=this.element({parent:o||"root"},y===!0?C:i),ge.w=100,ge.h=70,ge.color="0x60a5faff",a[23].populate(ge),y===!0&&(v-=1),o=a[22];const pe={};a[24]=this.element({parent:o||"root"},y===!0?C:i),pe.w=100,pe.h=70,pe.color="0x60a5faff",a[24].populate(pe),y===!0&&(v-=1),o=a[22];const Ee={};a[25]=this.element({parent:o||"root"},y===!0?C:i),Ee.w=100,Ee.h=70,Ee.color="0x60a5faff",a[25].populate(Ee),y===!0&&(v-=1),o=a[22];const Re={};a[26]=this.element({parent:o||"root"},y===!0?C:i),Re.gap=50,Re.__layout=!0,a[26].populate(Re),y===!0&&(v-=1),o=a[26];const z={};a[27]=this.element({parent:o||"root"},y===!0?C:i),z.w=50,z.h=50,z.color="0x2563ebff",a[27].populate(z),y===!0&&(v-=1),o=a[26];const Me={};a[28]=this.element({parent:o||"root"},y===!0?C:i),Me.w=50,Me.h=50,Me.color="0x2563ebff",a[28].populate(Me),y===!0&&(v-=1),o=a[26];const ye={};a[29]=this.element({parent:o||"root"},y===!0?C:i),ye.w=50,ye.h=50,ye.color="0x2563ebff",a[29].populate(ye),y===!0&&(v-=1),o=a[19];const Ue={};a[30]=this.element({parent:o||"root"},y===!0?C:i),Ue.w=100,Ue.h=80,Ue.color="0x2563ebff",a[30].populate(Ue),y===!0&&(v-=1),o=a[19];const De={};a[31]=this.element({parent:o||"root"},y===!0?C:i),De.w=100,De.h=90,De.color="0x1e40afff",a[31].populate(De),y===!0&&(v-=1),o=a[0];const We={};a[32]=this.element({parent:o||"root"},y===!0?C:i),We.x=800,We.y=40,a[32].populate(We),y===!0&&(v-=1),o=a[32];const Xe={};a[33]=this.element({parent:o||"root"},y===!0?C:i),Xe.color="0x222222ff",Xe.content="Layout with Text",Xe.__textnode=!0,a[33].populate(Xe),y===!0&&(v-=1),o=a[32];const ze={};a[34]=this.element({parent:o||"root"},y===!0?C:i),ze.y=50,ze.gap=20,ze.__layout=!0,a[34].populate(ze),y===!0&&(v-=1),o=a[34];const we={};a[35]=this.element({parent:o||"root"},y===!0?C:i),we.w=3,we.h=32,we.color="0x60a5faff",a[35].populate(we),y===!0&&(v-=1),o=a[34];const et={};a[36]=this.element({parent:o||"root"},y===!0?C:i),et.color="0x1e40afff",et.content="Hello",et.__textnode=!0,a[36].populate(et),y===!0&&(v-=1),o=a[34];const Je={};a[37]=this.element({parent:o||"root"},y===!0?C:i),Je.w=3,Je.h=32,Je.color="0x60a5faff",a[37].populate(Je),y===!0&&(v-=1),o=a[34];const Ze={};a[38]=this.element({parent:o||"root"},y===!0?C:i),Ze.content="World",Ze.color="0x1e40afff",Ze.__textnode=!0,a[38].populate(Ze),y===!0&&(v-=1),o=a[34];const ot={};a[39]=this.element({parent:o||"root"},y===!0?C:i),ot.w=3,ot.h=32,ot.color="0x60a5faff",a[39].populate(ot),y===!0&&(v-=1),o=a[0];const St={};a[40]=this.element({parent:o||"root"},y===!0?C:i),St.x=800,St.y=210,a[40].populate(St),y===!0&&(v-=1),o=a[40];const lt={};a[41]=this.element({parent:o||"root"},y===!0?C:i),lt.color="0x222222ff",lt.content="Dynamic dimensions Layout",lt.__textnode=!0,a[41].populate(lt),y===!0&&(v-=1),o=a[40];const It={};a[42]=this.element({parent:o||"root"},y===!0?C:i),It.y=50,It.gap=20,It["@updated"]=i.dynamicLayoutUpdated&&i.dynamicLayoutUpdated.bind(i),It.__layout=!0,a[42].populate(It),y===!0&&(v-=1),o=a[42];const je={};a[43]=this.element({parent:o||"root"},y===!0?C:i),je.w=i.w*.5,je.h=60,je.color="0xeff6ffff",a[43].populate(je),y===!0&&(v-=1),o=a[42];const at={};a[44]=this.element({parent:o||"root"},y===!0?C:i),at.w=i.w*.6,at.h=60,at.color="0xbfdbfeff",a[44].populate(at),y===!0&&(v-=1),o=a[42];const xt={};a[45]=this.element({parent:o||"root"},y===!0?C:i),xt.w=i.w*.7,xt.h=60,xt.color="0x60a5faff",a[45].populate(xt),y===!0&&(v-=1),o=a[42];const dt={};a[46]=this.element({parent:o||"root"},y===!0?C:i),dt.w=i.w*.8,dt.h=60,dt.color="0x2563ebff",a[46].populate(dt),y===!0&&(v-=1),o=a[42];const xn={};a[47]=this.element({parent:o||"root"},y===!0?C:i),xn.w=i.w*.9,xn.h=60,xn.color="0x1e40afff",a[47].populate(xn),y===!0&&(v-=1),o=a[0];const pn={};a[48]=this.element({parent:o||"root"},y===!0?C:i),pn.x=800,pn.y=400,a[48].populate(pn),y===!0&&(v-=1),o=a[48];const zt={};a[49]=this.element({parent:o||"root"},y===!0?C:i),zt.color="0x222222ff",zt.content="For loop Layout",zt.__textnode=!0,a[49].populate(zt),y===!0&&(v-=1),o=a[48];const Ct={};a[50]=this.element({parent:o||"root"},y===!0?C:i),Ct.y=50,Ct.gap=20,Ct.__layout=!0,a[50].populate(Ct),y===!0&&(v-=1),o=a[50];const Wt=[];let Tt,Pt;const un=(rt=[],Pe,oi)=>{const Mi=x(rt),Tr=new Set;let Vi=Mi.length;const Uo={};for(Tt=Uo.from||0,Pt=("to"in Uo)?Uo.to:Mi.length;Vi--;)Mi[Vi],Vi<Pt&&Vi>=Tt&&Tr.add(""+Vi);let Ao=oi.length;for(;Ao--;)if(Tr.has(oi[Ao])===!1){const Nt=oi[Ao];Pe[51][Nt]&&Pe[51][Nt].destroy(),delete Pe[51][Nt]}oi.length=0;const ks=Mi.length,go=[];for(let Nt=0;Nt<ks;Nt++){if(Nt<Tt||Nt>=Pt)continue;const At=Object.create(i);o=Pe[50],At.color=Mi[Nt],At.undefined=Nt,At.key=""+Nt,oi.push(At.key),o=Pe[50],Pe[51]===void 0&&(Pe[51]={});const io={};Pe[51][At.key]===void 0&&(Pe[51][At.key]=this.element({parent:o||"root"},y===!0?C:i)),io.w=60,io.h=60,io.color=At.color,Pe[51][At.key].nodeId===void 0&&(Pe[51][At.key].populate(io),y===!0&&(v-=1))}return go};let ct;g(()=>{i[Symbol.for("removeGlobalEffects")](ct),ct=null,ct=un(i.colors,a,Wt)},["colors"]),g(()=>{i.color;for(let rt=0;rt<i.colors.length;rt++){if(rt<Tt||rt>=Pt)continue;const Pe={};Pe.undefined=rt,Pe.color=i.colors[rt],Pe.key=rt,a[51][Pe.key].set("color",Pe.color)}}),o=a[0];const Pn={};a[52]=this.element({parent:o||"root"},y===!0?C:i),Pn.x=800,Pn.y=600,a[52].populate(Pn),y===!0&&(v-=1),o=a[52];const an={};a[53]=this.element({parent:o||"root"},y===!0?C:i),an.color="0x222222ff",an.content="Layout with transitions",an.__textnode=!0,a[53].populate(an),y===!0&&(v-=1),o=a[52];const Bn={};a[54]=this.element({parent:o||"root"},y===!0?C:i),Bn.direction="horizontal",Bn.gap=20,Bn.y=60,Bn.__layout=!0,a[54].populate(Bn),y===!0&&(v-=1),o=a[54];const Ot=[];let mn,bn;const mi=(rt=[],Pe,oi)=>{const Mi=x(rt),Tr=new Set;let Vi=Mi.length;const Uo={};for(mn=Uo.from||0,bn=("to"in Uo)?Uo.to:Mi.length;Vi--;)Mi[Vi],Vi<bn&&Vi>=mn&&Tr.add(""+Vi);let Ao=oi.length;for(;Ao--;)if(Tr.has(oi[Ao])===!1){const Nt=oi[Ao];Pe[55][Nt]&&Pe[55][Nt].destroy(),delete Pe[55][Nt],Pe[56][Nt]&&Pe[56][Nt].destroy(),delete Pe[56][Nt],Pe[57][Nt]&&Pe[57][Nt].destroy(),delete Pe[57][Nt],Pe[58][Nt]&&Pe[58][Nt].destroy(),delete Pe[58][Nt],Pe[59][Nt]&&Pe[59][Nt].destroy(),delete Pe[59][Nt],Pe[60][Nt]&&Pe[60][Nt].destroy(),delete Pe[60][Nt]}oi.length=0;const ks=Mi.length,go=[];for(let Nt=0;Nt<ks;Nt++){if(Nt<mn||Nt>=bn)continue;const At=Object.create(i);o=Pe[54],At.color=Mi[Nt],At.undefined=Nt,At.key=""+Nt,oi.push(At.key),o=Pe[54],Pe[55]===void 0&&(Pe[55]={});const io={};Pe[55][At.key]===void 0&&(Pe[55][At.key]=this.element({parent:o||"root"},y===!0?C:i)),io.h=100,io.w={transition:{value:At.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},io.color=At.color,Pe[55][At.key].nodeId===void 0&&(Pe[55][At.key].populate(io),y===!0&&(v-=1)),o=Pe[55][At.key],Pe[56]===void 0&&(Pe[56]={});const Hi={};Pe[56][At.key]===void 0&&(Pe[56][At.key]=this.element({parent:o||"root"},y===!0?C:i)),Hi.gap=10,Hi.x=10,Hi.y=35,Hi.__layout=!0,Pe[56][At.key].nodeId===void 0&&(Pe[56][At.key].populate(Hi),y===!0&&(v-=1)),o=Pe[56][At.key],Pe[57]===void 0&&(Pe[57]={});const br={};Pe[57][At.key]===void 0&&(Pe[57][At.key]=this.element({parent:o||"root"},y===!0?C:i)),br.h=20,br.w={transition:{value:At.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},br.color="0xffffffff",Pe[57][At.key].nodeId===void 0&&(Pe[57][At.key].populate(br),y===!0&&(v-=1)),o=Pe[56][At.key],Pe[58]===void 0&&(Pe[58]={});const Er={};Pe[58][At.key]===void 0&&(Pe[58][At.key]=this.element({parent:o||"root"},y===!0?C:i)),Er.h=20,Er.w={transition:{value:At.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Er.color="0xccccccff",Pe[58][At.key].nodeId===void 0&&(Pe[58][At.key].populate(Er),y===!0&&(v-=1)),o=Pe[56][At.key],Pe[59]===void 0&&(Pe[59]={});const Xr={};Pe[59][At.key]===void 0&&(Pe[59][At.key]=this.element({parent:o||"root"},y===!0?C:i)),Xr.h=20,Xr.w={transition:{value:At.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},Xr.color="0x333333ff",Pe[59][At.key].nodeId===void 0&&(Pe[59][At.key].populate(Xr),y===!0&&(v-=1)),o=Pe[56][At.key],Pe[60]===void 0&&(Pe[60]={});const As={};Pe[60][At.key]===void 0&&(Pe[60][At.key]=this.element({parent:o||"root"},y===!0?C:i)),As.h=20,As.w={transition:{value:At.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}},As.color="0x000000ff",Pe[60][At.key].nodeId===void 0&&(Pe[60][At.key].populate(As),y===!0&&(v-=1))}return go};let jn;g(()=>{i[Symbol.for("removeGlobalEffects")](jn),jn=null,jn=mi(i.colors,a,Ot)},["colors"]),g(()=>{i.w3;for(let rt=0;rt<i.colors.length;rt++){if(rt<mn||rt>=bn)continue;const Pe={};Pe.undefined=rt,Pe.color=i.colors[rt],Pe.key=rt,a[55][Pe.key].set("w",{transition:{value:i.w3,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),g(()=>{i.color;for(let rt=0;rt<i.colors.length;rt++){if(rt<mn||rt>=bn)continue;const Pe={};Pe.undefined=rt,Pe.color=i.colors[rt],Pe.key=rt,a[55][Pe.key].set("color",Pe.color)}}),g(()=>{i.w2;for(let rt=0;rt<i.colors.length;rt++){if(rt<mn||rt>=bn)continue;const Pe={};Pe.undefined=rt,Pe.color=i.colors[rt],Pe.key=rt,a[57][Pe.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),g(()=>{i.w2;for(let rt=0;rt<i.colors.length;rt++){if(rt<mn||rt>=bn)continue;const Pe={};Pe.undefined=rt,Pe.color=i.colors[rt],Pe.key=rt,a[58][Pe.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),g(()=>{i.w2;for(let rt=0;rt<i.colors.length;rt++){if(rt<mn||rt>=bn)continue;const Pe={};Pe.undefined=rt,Pe.color=i.colors[rt],Pe.key=rt,a[59][Pe.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),g(()=>{i.w2;for(let rt=0;rt<i.colors.length;rt++){if(rt<mn||rt>=bn)continue;const Pe={};Pe.undefined=rt,Pe.color=i.colors[rt],Pe.key=rt,a[60][Pe.key].set("w",{transition:{value:i.w2,duration:800,easing:"cubic-bezier(1,-0.64,.39,1.44)"}})}}),o=a[0];const Yn={};a[61]=this.element({parent:o||"root"},y===!0?C:i),Yn.x=800,Yn.y=840,a[61].populate(Yn),y===!0&&(v-=1),o=a[61];const Fn={};a[62]=this.element({parent:o||"root"},y===!0?C:i),Fn.color="0x222222ff",Fn.content="Layout with padding",Fn.__textnode=!0,a[62].populate(Fn),y===!0&&(v-=1),o=a[61];const Rn={};a[63]=this.element({parent:o||"root"},y===!0?C:i),Rn.direction="horizontal",Rn.gap=20,Rn.y=60,Rn.padding=20,Rn.color="0xffffffff",Rn.__layout=!0,a[63].populate(Rn),y===!0&&(v-=1),o=a[63];const Ve={};a[64]=this.element({parent:o||"root"},y===!0?C:i),Ve.w=40,Ve.h=40,Ve.color="0xbfdbfeff",a[64].populate(Ve),y===!0&&(v-=1),o=a[63];const ie={};a[65]=this.element({parent:o||"root"},y===!0?C:i),ie.w=40,ie.h=40,ie.color="0x60a5faff",a[65].populate(ie),y===!0&&(v-=1),o=a[63];const Ae={};a[66]=this.element({parent:o||"root"},y===!0?C:i),Ae.w=40,Ae.h=40,Ae.color="0x2563ebff",a[66].populate(Ae),y===!0&&(v-=1),o=a[61];const qe={};a[67]=this.element({parent:o||"root"},y===!0?C:i),qe.direction="horizontal",qe.gap=20,qe.y=60,qe.x=240,qe.padding={top:40,y:10,left:40,x:10},qe.color="0xffffffff",qe.__layout=!0,a[67].populate(qe),y===!0&&(v-=1),o=a[67];const wt={};a[68]=this.element({parent:o||"root"},y===!0?C:i),wt.w=40,wt.h=40,wt.color="0xbfdbfeff",a[68].populate(wt),y===!0&&(v-=1),o=a[67];const nt={};a[69]=this.element({parent:o||"root"},y===!0?C:i),nt.w=40,nt.h=40,nt.color="0x60a5faff",a[69].populate(nt),y===!0&&(v-=1),o=a[67];const ht={};a[70]=this.element({parent:o||"root"},y===!0?C:i),ht.w=40,ht.h=40,ht.color="0x2563ebff",a[70].populate(ht),y===!0&&(v-=1),o=a[61];const _e={};a[71]=this.element({parent:o||"root"},y===!0?C:i),_e.direction="vertical",_e.gap=20,_e.y=60,_e.x=500,_e.padding=20,_e.color="0xffffffff",_e.__layout=!0,a[71].populate(_e),y===!0&&(v-=1),o=a[71];const Le={};a[72]=this.element({parent:o||"root"},y===!0?C:i),Le.w=40,Le.h=20,Le.color="0xbfdbfeff",a[72].populate(Le),y===!0&&(v-=1),o=a[71];const bt={};a[73]=this.element({parent:o||"root"},y===!0?C:i),bt.w=40,bt.h=20,bt.color="0x60a5faff",a[73].populate(bt),y===!0&&(v-=1),o=a[71];const ve={};a[74]=this.element({parent:o||"root"},y===!0?C:i),ve.w=40,ve.h=20,ve.color="0x2563ebff",a[74].populate(ve),y===!0&&(v-=1),o=a[61];const fe={};a[75]=this.element({parent:o||"root"},y===!0?C:i),fe.direction="vertical",fe.gap=20,fe.y=60,fe.x=640,fe.padding={top:40,y:10,left:40,x:10},fe.color="0xffffffff",fe.__layout=!0,a[75].populate(fe),y===!0&&(v-=1),o=a[75];const Ge={};a[76]=this.element({parent:o||"root"},y===!0?C:i),Ge.w=40,Ge.h=20,Ge.color="0xbfdbfeff",a[76].populate(Ge),y===!0&&(v-=1),o=a[75];const Et={};a[77]=this.element({parent:o||"root"},y===!0?C:i),Et.w=40,Et.h=20,Et.color="0x60a5faff",a[77].populate(Et),y===!0&&(v-=1),o=a[75];const jt={};a[78]=this.element({parent:o||"root"},y===!0?C:i),jt.w=40,jt.h=20,jt.color="0x2563ebff",a[78].populate(jt),y===!0&&(v-=1),o=a[0];const Vt={};a[79]=this.element({parent:o||"root"},y===!0?C:i),Vt.x=1300,Vt.y=210,a[79].populate(Vt),y===!0&&(v-=1),o=a[79];const ln={};a[80]=this.element({parent:o||"root"},y===!0?C:i),ln.color="0x222222ff",ln.content="Layout with a Component",ln.__textnode=!0,a[80].populate(ln),y===!0&&(v-=1),o=a[79];const Be={};a[81]=this.element({parent:o||"root"},y===!0?C:i),Be.y=50,Be.gap=40,Be.__layout=!0,a[81].populate(Be),y===!0&&(v-=1),o=a[81];const Ke={};a[82]=this.element({parent:o||"root"},y===!0?C:i),Ke.w=100,Ke.h=100,Ke.color="0xff0000ff",a[82].populate(Ke),y===!0&&(v-=1),o=a[81];const On={};a[83]=this.element({parent:o||"root"},y===!0?C:i),On.w=i.w,On.h=100,On.color="0xff0000ff",a[83].populate(On),y===!0&&(v-=1);const wn=u.components&&u.components.Ball||h.Ball;o=a[81];const gn={};a[84]=this.element({parent:o||"root"},y===!0?C:i),gn.y=500,gn.w=100;const $n=[];if(typeof wn<"u")for(let rt in wn.config.props)delete gn[wn.config.props[rt]],$n.push(wn.config.props[rt]);a[84].populate(gn),y===!0&&(v-=1),o=a[84];const Jn={};Jn.y=500,Jn.w=100,m=Jn.is||"Ball";let kt;if(typeof m=="string"){if(kt=u.components&&u.components[m]||h[m],!kt)throw new Error('Component "Ball" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(kt=m);a[85]=kt.call(null,{props:Jn},a[84],i),a[85][Symbol.for("slots")][0]?(o=a[85][Symbol.for("slots")][0],C=a[85],y=!0):o=a[85][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),o=a[81];const fi={};return a[86]=this.element({parent:o||"root"},y===!0?C:i),fi.w=100,fi.h=100,fi.color="0xff0000ff",a[86].populate(fi),y===!0&&(v-=1),a},effects:[function(o,i,u,h,g,x){i[43].set("w",o.w*.5)},function(o,i,u,h,g,x){i[44].set("w",o.w*.6)},function(o,i,u,h,g,x){i[45].set("w",o.w*.7)},function(o,i,u,h,g,x){i[46].set("w",o.w*.8)},function(o,i,u,h,g,x){i[47].set("w",o.w*.9)},function(o,i,u,h,g,x){i[67].set("padding",{top:40,y:10,left:40,x:10})},function(o,i,u,h,g,x){i[75].set("padding",{top:40,y:10,left:40,x:10})},function(o,i,u,h,g,x){i[83].set("w",o.w)}],context:{}},state(){return{w:50,colors:["green","red","blue","yellow"],w3:150,w2:20}},hooks:{ready(){this.$setInterval(()=>{this.w=this.w===100?50:100,this.w2=this.w2===20?40:20,this.w3=this.w3===150?250:150},2e3),this.$setTimeout(()=>{this.colors.push("purple")},4e3)}},methods:{dynamicLayoutUpdated(f){this.$log.info("Dynamic layout updated",f.w,f.h)}}}),zm=typeof window<"u"?window:{};let UT;const F6=f=>{UT=f};let Tg;const dg=[],Ol={};let ed,Ts;zm.__firebolt&&zm.__firebolt.testHarness&&(Ts=zm.__firebolt.testHarness);function BT(f){console.debug("Sending message to transport: "+f);let o=JSON.parse(f);if(Array.isArray(o)){o.forEach(h=>BT(JSON.stringify(h)));return}let[i,u]=o.method.split(".");Ts&&Ts.onSend&&Ts.onSend(i,u,o.params,o.id),u.match(/^on[A-Z]/)&&(o.params.listen?Ol[o.id]=i.toLowerCase()+"."+u[2].toLowerCase()+u.substr(3):Object.keys(Ol).forEach(h=>{Ol[h]===i.toLowerCase()+"."+u[2].toLowerCase()+u.substr(3)&&delete Ol[h]})),Tg?jT(o):dg.push(o)}function jT(f){let o;try{o=V6(f.method,f.params)}catch{setTimeout(()=>ed(JSON.stringify({jsonrpc:"2.0",error:{code:-32602,message:"Invalid params (this is a mock error from the mock transport layer)"},id:f.id})))}setTimeout(()=>ed(JSON.stringify({jsonrpc:"2.0",result:o,id:f.id})))}function $6(f){ed=f,Ts&&typeof Ts.initialize=="function"&&Ts.initialize({emit:FT,listen:function(...o){UT(...o)}})}function FT(f,o,i){const u=Object.entries(Ol).find(([h,g])=>g.toLowerCase()===f.toLowerCase()+"."+o.toLowerCase());if(u){let h=JSON.stringify({jsonrpc:"2.0",id:parseInt(u[0]),result:i});ed(h)}}function z6(f={},o){const i=o.split(".");let u=f;for(let h=0;h<i.length;h++)u=(Object.entries(u).find(([g,x])=>g.toLowerCase()===i[h].toLowerCase())||[null,{}])[1];return u}function V6(f,o){let i=z6(Tg,f);return f.match(/^[a-zA-Z]+\.on[A-Za-z]+$/)&&(i={event:f,listening:!0}),typeof i=="function"?o==null?i():i(o):i}function H6(f){Tg=f,dg.forEach(o=>jT(o)),dg.length=0}const td={send:BT,receive:$6,event:FT};function $T(f,o,i){const u=f?Object.values(f).length:0;return u===i&&o===void 0?"getter":u===i&&typeof o=="function"||u===0&&typeof o=="function"?"subscriber":u===i&&o!==void 0?"setter":null}const Vm={};function G6(f,o,i,u,h,g){const x=$T(i,u,h),S=h?"."+Object.keys(i).filter(m=>m!=="value").map(m=>i[m]).join("."):"",a=`${f}.${o}${S}`;if(x==="getter")return Vm.hasOwnProperty(a)?Vm[a]:g;if(x!=="subscriber"){if(x==="setter")return Vm[a]=u,td.event(f,`${o}Changed`,{value:u}),null}}const Tn={mock:G6},zT={closedCaptions:{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]},closedCaptionsSettings:function(f){return Tn.mock("Accessibility","closedCaptionsSettings",f,void 0,0,{enabled:!0,styles:{fontFamily:"monospaced_sanserif",fontSize:1,fontColor:"#ffffff",fontEdge:"none",fontEdgeColor:"#7F7F7F",fontOpacity:100,backgroundColor:"#000000",backgroundOpacity:100,textAlign:"center",textAlignVertical:"middle",windowColor:"white",windowOpacity:50},preferredLanguages:["eng","spa"]})},voiceGuidance:{enabled:!0,speed:2},voiceGuidanceSettings:function(f){return Tn.mock("Accessibility","voiceGuidanceSettings",f,void 0,0,{enabled:!0,speed:2})},audioDescriptionSettings:function(f){return Tn.mock("Accessibility","audioDescriptionSettings",f,void 0,0,{enabled:!0})}},W6={id:function(f){return Tn.mock("Account","id",f,void 0,0,"123")},uid:function(f){return Tn.mock("Account","uid",f,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")}},X6={config:{adServerUrl:"https://demo.v.fwmrm.net/ad/p/1",adServerUrlTemplate:"https://demo.v.fwmrm.net/ad/p/1?flag=+sltp+exvt+slcb+emcr+amcb+aeti&prof=12345:caf_allinone_profile &nw=12345&mode=live&vdur=123&caid=a110523018&asnw=372464&csid=gmott_ios_tablet_watch_live_ESPNU&ssnw=372464&vip=198.205.92.1&resp=vmap1&metr=1031&pvrn=12345&vprn=12345&vcid=1X0Ce7L3xRWlTeNhc7br8Q%3D%3D",adNetworkId:"519178",adProfileId:"12345:caf_allinone_profile",adSiteSectionId:"caf_allinone_profile_section",adOptOut:!0,privacyData:"ew0KICAicGR0IjogImdkcDp2MSIsDQogICJ1c19wcml2YWN5IjogIjEtTi0iLA0KICAibG10IjogIjEiIA0KfQ0K",ifaValue:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa:"ewogICJ2YWx1ZSI6ICIwMTIzNDU2Ny04OUFCLUNERUYtR0gwMS0yMzQ1Njc4OUFCQ0QiLAogICJpZmFfdHlwZSI6ICJzc3BpZCIsCiAgImxtdCI6ICIwIgp9Cg==",appName:"FutureToday",appBundleId:"FutureToday.comcast",distributorAppId:"1001",deviceAdAttributes:"ewogICJib0F0dHJpYnV0ZXNGb3JSZXZTaGFyZUlkIjogIjEyMzQiCn0=",coppa:0,authenticationEntity:"60f72475281cfba3852413bd53e957f6"},policy:function(f){return Tn.mock("Advertising","policy",f,void 0,0,{skipRestriction:"adsUnwatched",limitAdTracking:!1})},advertisingId:{ifa:"01234567-89AB-CDEF-GH01-23456789ABCD",ifa_type:"sspid",lmt:"0"},deviceAttributes:{},appBundleId:"app.operator"},q6={token:{value:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",expires:"2022-04-23T18:25:43.511Z",type:"platform"},device:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",session:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",root:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"},K6={supported:!0,available:!0,permitted:!0,granted:!0,info:[{capability:"xrn:firebolt:capability:device:model",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:input:keyboard",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:protocol:bluetoothle",supported:!1,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unsupported"]},{capability:"xrn:firebolt:capability:token:device",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}},{capability:"xrn:firebolt:capability:token:platform",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unavailable"]},{capability:"xrn:firebolt:capability:protocol:moca",supported:!0,available:!1,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["disabled","unavailable"]},{capability:"xrn:firebolt:capability:wifi:scan",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["unpermitted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:null},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:postal-code",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["ungranted"]},{capability:"xrn:firebolt:capability:localization:locality",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0},details:["grantDenied","ungranted"]}],request:[{capability:"xrn:firebolt:capability:commerce:purchase",supported:!0,available:!0,use:{permitted:!0,granted:!0},manage:{permitted:!0,granted:!0},provide:{permitted:!0,granted:!0}}]},VT={id:function(f){return Tn.mock("Device","id",f,void 0,0,"123")},distributor:function(f){return Tn.mock("Device","distributor",f,void 0,0,"Company")},platform:function(f){return Tn.mock("Device","platform",f,void 0,0,"WPE")},uid:function(f){return Tn.mock("Device","uid",f,void 0,0,"ee6723b8-7ab3-462c-8d93-dbf61227998e")},type:function(f){return Tn.mock("Device","type",f,void 0,0,"STB")},model:function(f){return Tn.mock("Device","model",f,void 0,0,"xi6")},sku:function(f){return Tn.mock("Device","sku",f,void 0,0,"AX061AEI")},make:function(f){return Tn.mock("Device","make",f,void 0,0,"Arris")},version:function(f){return Tn.mock("Device","version",f,void 0,0,{sdk:{major:0,minor:8,patch:0,readable:"Firebolt JS SDK v0.8.0"},api:{major:0,minor:8,patch:0,readable:"Firebolt API v0.8.0"},firmware:{major:1,minor:2,patch:3,readable:"Device Firmware v1.2.3"},os:{major:0,minor:1,patch:0,readable:"Firebolt OS v0.1.0"},debug:"Non-parsable build info for error logging only."})},hdcp:function(f){return Tn.mock("Device","hdcp",f,void 0,0,{"hdcp1.4":!0,"hdcp2.2":!0})},hdr:function(f){return Tn.mock("Device","hdr",f,void 0,0,{hdr10:!0,hdr10Plus:!0,dolbyVision:!0,hlg:!0})},audio:function(f){return Tn.mock("Device","audio",f,void 0,0,{stereo:!0,"dolbyDigital5.1":!0,"dolbyDigital5.1+":!0,dolbyAtmos:!0})},screenResolution:function(f){return Tn.mock("Device","screenResolution",f,void 0,0,[1920,1080])},videoResolution:function(f){return Tn.mock("Device","videoResolution",f,void 0,0,[1920,1080])},name:function(f){return Tn.mock("Device","name",f,void 0,0,"Living Room")},network:function(f){return Tn.mock("Device","network",f,void 0,0,{state:"connected",type:"wifi"})}},Y6={policy:function(f){return Tn.mock("Discovery","policy",f,void 0,0,{enableRecommendations:!0,shareWatchHistory:!0,rememberWatchedPrograms:!0})},entityInfo:!0,purchasedContent:!0,watched:!0,watchNext:!0,entitlements:!0,contentAccess:null,clearContentAccess:null,launch:!0,signIn:!0,signOut:!0,userInterest:null,userInterestResponse:null,userInterestError:null},Q6={email:"user@domain.com",password:"abc123",standard:"Living Room"};let Pa={state:"inactive",previous:"initializing"},OC={state:"foreground",previous:"inactive"},NC={state:"unloading",previous:"inactive"};const kl=f=>{td.event("Lifecycle",f.state,f)},nd=typeof window<"u"?window:{},Al=nd.__firebolt?!!nd.__firebolt.automation:!1,Z6={ready:function(){Pa.previous="initializing",setTimeout(()=>kl(Pa),Al?1:500),OC.previous="inactive",setTimeout(()=>kl(OC),Al?2:1e3)},close:function(f){let o=f.reason;if(o==="remoteButton")Pa.previous="foreground",setTimeout(()=>kl(Pa),Al?1:500);else if(["userExit","error"].includes(o))Pa.previous="foreground",NC.previous="inactive",setTimeout(()=>kl(Pa),Al?1:500),setTimeout(()=>kl(NC),Al?2:1e3);else throw"Invalid close reason"},finished:function(){nd.location&&(nd.location.href="about:blank")}},HT={locality:function(f){return Tn.mock("Localization","locality",f,void 0,0,"Philadelphia")},postalCode:function(f){return Tn.mock("Localization","postalCode",f,void 0,0,"19103")},countryCode:function(f){return Tn.mock("Localization","countryCode",f,void 0,0,"US")},language:function(f){return Tn.mock("Localization","language",f,void 0,0,"en")},preferredAudioLanguages:function(f){return Tn.mock("Localization","preferredAudioLanguages",f,void 0,0,["spa","eng"])},locale:function(f){return Tn.mock("Localization","locale",f,void 0,0,"en-US")},latlon:[39.9549,75.1699],additionalInfo:{}},J6={ready:!0,signIn:!0,signOut:!0,startContent:!0,stopContent:!0,page:!0,action:!0,error:!0,mediaLoadStart:!0,mediaPlay:!0,mediaPlaying:!0,mediaPause:!0,mediaWaiting:!0,mediaProgress:!0,mediaSeeking:!0,mediaSeeked:!0,mediaRateChange:!0,mediaRenditionChange:!0,mediaEnded:!0,appInfo:null},eD={initialization:{lmt:0,us_privacy:"1-Y-",discovery:{navigateTo:{action:"entity",data:{entityId:"abc",entityType:"program",programType:"movie"},context:{source:"voice"}}}}},tD={approveContentRating:!1,approvePurchase:!1,flags:{userExperience:"1000"}},nD={protocols:{"dial1.7":!0},device:"device-id",friendlyName:function(f){return Tn.mock("SecondScreen","friendlyName",f,void 0,0,"Living Room")}},iD={get:"VGhpcyBub3QgYSByZWFsIHRva2VuLgo=",set:null,remove:null,clear:null},oD={localization:HT,device:VT,accessibility:zT};class rD{constructor(){this._callback=null,this._queue=[]}send(o){this._queue.push(o)}receive(o){this._callback=o}flush(o){o.receive(this._callback),this._queue.forEach(i=>o.send(i))}}const Ss={},Eo={},sD=(f,o)=>{Ss.app=f,Ss.platform={logLevel:"WARN",...o},Ss.user={}},aD=(f,o)=>{Eo[f]&&Eo[f].forEach(i=>i(o))},uD=(f={},o)=>{const i=o.split(".");for(let u=0;u<i.length;u++)f=f[i[u]]=f[i[u]]!==void 0?f[i[u]]:{};return typeof f=="object"?Object.keys(f).length?f:void 0:f},Hm={get(f,o,i=void 0){const u=uD(Ss[f],o);return u!==void 0?u:i},has(f,o){return!!this.get(f,o)},set(f,o){Ss.user[f]=o,aD(f,o)},subscribe(f,o){Eo[f]=Eo[f]||[],Eo[f].push(o)},unsubscribe(f,o){if(o){const i=Eo[f]&&Eo[f].findIndex(u=>u===o);i>-1&&Eo[f].splice(i,1)}else f in Eo&&(Eo[f]=[])},clearSubscribers(){for(const f of Object.getOwnPropertyNames(Eo))delete Eo[f]},setLogLevel(f){Ss.platform.logLevel=f},getLogLevel(){return Ss.platform.logLevel}},Xo=typeof window<"u"?window:{};class id{constructor(o){this.bridge=o}send(o){this.bridge.JSMessageChanged(o,()=>{})}receive(o){Xo.$badger=Xo.$badger||{};const i=Xo.$badger.callback?Xo.$badger.callback.bind(Xo.$badger):null,u=Xo.$badger.event?Xo.$badger.event.bind(Xo.$badger):null;Xo.$badger.callback=(h,g,x)=>{x.jsonrpc?o(JSON.stringify(x)):i&&i(h,g,x)},Xo.$badger.event=(h,g)=>{g.jsonrpc?o(JSON.stringify(g)):u&&u(h,g)}}static isLegacy(o){return id.isXREProxy(o)||o.send===void 0&&o.JSMessageChanged}static isXREProxy(o){return o.proxyObjectTest!==void 0}}const lD=100;class fD{constructor(o){this._endpoint=o,this._ws=null,this._connected=!1,this._queue=[],this._callbacks=[]}send(o){this._connect(),this._connected?this._ws.send(o):this._queue.length<lD&&this._queue.push(o)}receive(o){o&&(this._connect(),this._callbacks.push(o))}_notifyCallbacks(o){for(let i=0;i<this._callbacks.length;i++)setTimeout(()=>this._callbacks[i](o),1)}_connect(){this._ws||(this._ws=new WebSocket(this._endpoint,["jsonrpc"]),this._ws.addEventListener("message",o=>{this._notifyCallbacks(o.data)}),this._ws.addEventListener("error",o=>{}),this._ws.addEventListener("close",o=>{this._ws=null,this._connected=!1}),this._ws.addEventListener("open",o=>{this._connected=!0;for(let i=0;i<this._queue.length;i++)this._ws.send(this._queue[i]);this._queue=[]}))}}function cD(f,o){if(!o||!o.methods)return f;const{methods:i}=o,u=JSON.parse(JSON.stringify(f));return Object.keys(i).forEach(h=>{const g=i[h],x=g["x-method"],[S,a]=x.split("."),m={};m[g["x-this-param"]]=u,u[h]=(...C)=>{for(var y=0;y<C.length;y++)m[g["x-additional-params"][y]]=C[y];return En.send(S.toLowerCase(),a,m)}}),u}const UC={transform:cD},hD="com.comcast.BridgeObject_1";let Gm=null;const dD=f=>f&&typeof f.event=="string"&&typeof f.listening=="boolean",qn=typeof window<"u"?window:{};class En{constructor(){this._promises=[],this._transport=null,this._id=1,this._eventEmitters=[],this._eventIds=[],this._queue=new rD,this._deprecated={},this.isMock=!1}static addEventEmitter(o){En.get()._eventEmitters.push(o)}static registerDeprecatedMethod(o,i,u){En.get()._deprecated[o.toLowerCase()+"."+i.toLowerCase()]={alternative:u||""}}_endpoint(){return qn.__firebolt&&qn.__firebolt.endpoint?qn.__firebolt.endpoint:null}constructTransportLayer(){let o;const i=this._endpoint();return i&&(i.startsWith("ws://")||i.startsWith("wss://"))?(o=new fD(i),o.receive(this.receiveHandler.bind(this))):typeof qn.ServiceManager<"u"&&qn.ServiceManager&&qn.ServiceManager.version?(o=this._queue,qn.ServiceManager.getServiceForJavaScript(hD,u=>{id.isLegacy(u)?o=new id(u):o=u,this.setTransportLayer(o)})):(this.isMock=!0,o=td,o.receive(this.receiveHandler.bind(this))),o}setTransportLayer(o){this._transport=o,this._queue.flush(o)}static send(o,i,u,h){return En.get()._send(o,i,u,h)}static listen(o,i,u,h){return En.get()._sendAndGetId(o,i,u,h)}_send(o,i,u,h){return Array.isArray(o)&&!i&&!u?this._batch(o):this._sendAndGetId(o,i,u,h).promise}_sendAndGetId(o,i,u,h){const{promise:g,json:x,id:S}=this._processRequest(o,i,u,h),a=JSON.stringify(x);return Hm.getLogLevel()==="DEBUG"&&console.debug("Sending message to transport: "+a),this._transport.send(a),{id:S,promise:g}}_batch(o){const i=[],u=[];o.forEach(({module:g,method:x,params:S,transforms:a})=>{const m=this._processRequest(g,x,S,a);i.push({promise:m.promise,id:m.id}),u.push(m.json)});const h=JSON.stringify(u);return Hm.getLogLevel()==="DEBUG"&&console.debug("Sending message to transport: "+h),this._transport.send(h),i}_processRequest(o,i,u,h){const g=this._addPromiseToQueue(o,i,u,h),x=this._createRequestJSON(o,i,u),S={promise:g,json:x,id:this._id};return this._id++,S}_createRequestJSON(o,i,u){return{jsonrpc:"2.0",method:o.toLowerCase()+"."+i,params:u,id:this._id}}_addPromiseToQueue(o,i,u,h){return new Promise((g,x)=>{this._promises[this._id]={},this._promises[this._id].promise=this,this._promises[this._id].resolve=g,this._promises[this._id].reject=x,this._promises[this._id].transforms=h;const S=this._deprecated[o.toLowerCase()+"."+i.toLowerCase()];S&&console.warn(`WARNING: ${o}.${i}() is deprecated. `+S.alternative),i.match(/^on[A-Z]/)&&(u.listen?this._eventIds.push(this._id):this._eventIds=this._eventIds.filter(a=>a!==this._id))})}static get(){if(qn.__firebolt=qn.__firebolt||{},qn.__firebolt.transport==null&&Gm==null){const o=new En;o.init(),o.isMock?Gm=o:(qn.__firebolt=qn.__firebolt||{},qn.__firebolt.transport=o),qn.__firebolt.setTransportLayer=o.setTransportLayer.bind(o)}return qn.__firebolt.transport?qn.__firebolt.transport:Gm}receiveHandler(o){Hm.getLogLevel()==="DEBUG"&&console.debug("Received message from transport: "+o);const i=JSON.parse(o),u=this._promises[i.id];if(u){if(i.error)u.reject(i.error);else{let h=i.result;u.transforms&&(Array.isArray(i.result)?h=h.map(g=>UC.transform(g,u.transforms)):h=UC.transform(h,u.transforms)),u.resolve(h)}delete this._promises[i.id]}this._eventIds.includes(i.id)&&!dD(i.result)&&this._eventEmitters.forEach(h=>{h(i.id,i.result)})}init(){sD({},{log:!0}),this._queue.receive(this.receiveHandler.bind(this)),qn.__firebolt&&(qn.__firebolt.mockTransportLayer===!0?(this.isMock=!0,this.setTransportLayer(td)):qn.__firebolt.getTransportLayer&&this.setTransportLayer(qn.__firebolt.getTransportLayer())),this._transport==null&&(this._transport=this.constructTransportLayer())}}qn.__firebolt=qn.__firebolt||{};qn.__firebolt.setTransportLayer=f=>{En.get().setTransportLayer(f)};let ys=0;const hn={internal:{},external:{},get:f=>Object.assign(Object.assign({},hn.internal[f]),hn.external[f]),set:(f,o,i)=>{hn.external[f]=hn.external[f]||{},hn.external[f][o]=i},setInternal:(f,o,i)=>{hn.internal[f]=hn.internal[f]||{},hn.internal[f][o]=i},find:f=>{let o;return[hn.internal,hn.external].find(i=>{if(o=Object.keys(i).find(u=>i[u][f]),o)return!0}),o},remove:f=>{[hn.internal,hn.external].forEach(o=>{Object.keys(o).forEach(i=>{o[i]&&o[i][f]&&(delete o[i][f],Object.values(o[i]).length===0&&delete o[i])})})},removeKey:(f,o=!1)=>{o&&hn.internal[f]&&delete hn.internal[f],hn.external[f]&&delete hn.external[f]},keys:()=>Array.from(new Set(Object.keys(hn.internal).concat(Object.keys(hn.external)))),count:f=>Object.values(hn.get(f)).length},od={},Vh=[],GT={},Hh={};let BC=!1;const WT=(f,o)=>{jC(hn.internal[od[f]],[o]),jC(hn.external[od[f]],[o])},Wr=(f,o)=>{GT[f.toLowerCase()]=o.concat()},fd=(f,o,i)=>{Hh[f.toLowerCase()]=Hh[f.toLowerCase()]||{},Hh[f.toLowerCase()][o]=i.concat()},jC=(f,o)=>{f&&Object.keys(f).forEach(i=>{let u=f[i];Vh.indexOf(parseInt(i))>=0&&(Vh.splice(Vh.indexOf(parseInt(i)),1),delete f[i]),u.apply(null,o)})},XT=function(f,o,i,u,h,g=!1){if(gD(),typeof i!="function")return Promise.reject("No valid callback function provided.");{if(f==="*")return Promise.reject("No valid module name provided");const x=o==="*",S=x?GT[f]:[o],a=[],m=Object.values(u).length>0,C=Object.keys(u).sort().map(b=>b+"="+JSON.stringify(u[b])).join("&");ys++,h&&Vh.push(ys),S.forEach(b=>{const _=f+"."+b+(m?`.${C}`:"");if(Object.values(hn.get(_)).length===0){const B=Object.assign({listen:!0},u),{id:G,promise:$}=En.listen(f,"on"+b[0].toUpperCase()+b.substring(1),B);od[G]=_,a.push($)}const O=g?hn.setInternal:hn.set;x?O(_,""+ys,B=>i(b,B)):O(_,""+ys,i)});let y,v,M=new Promise((b,_)=>{y=b,v=_});return a.length?Promise.all(a).then(b=>{y(ys)}).catch(b=>{o==="*"?y(ys):v(b)}):y(ys),M}},qT=function(...f){const o=f.pop(),[i,u,h]=KT(...f);return[i,u,o,h]},KT=function(...f){const o=(f.shift()||"*").toLowerCase(),i=f.shift()||"*",u={};for(let h=0;f.length;h++)u[Hh[o][i][h]]=f.shift();return[o,i,u]},pD=function(...f){const[o,i,u,h]=qT(...f);return XT(o,i,u,h,!0)},YT=function(...f){const[o,i,u,h]=qT(...f);return XT(o,i,u,h,!1)},mD=function(...f){if(f&&f.length&&typeof f[0]=="number")return Wm(f[0]);if(f&&f.length&&typeof f[1]=="number")return Wm(f[1]);{const[o,i,u]=KT(...f);return Wm(o,i,u)}},Dh=(f,o)=>{const[i,u]=f.split(".").slice(0,2),h=Object.assign({listen:!1},o);En.send(i,"on"+u[0].toUpperCase()+u.substr(1),h)},Wm=function(f=!1,o=!1,i){if(o==="*"&&(o=!1),typeof f=="number"){const u=f.toString(),h=hn.find(u);return h?(hn.remove(u),hn.count(h)===0&&Dh(h),!0):!1}else if(!f&&!o)hn.keys().forEach(u=>{hn.removeKey(u),Dh(u)});else if(!o)hn.keys().forEach(u=>{u.indexOf(f.toLowerCase())===0&&(hn.removeKey(u),Dh(u))});else{const u=Object.values(i).length>0,h=Object.keys(i).sort().map(x=>x+"="+JSON.stringify(i[x])).join("&"),g=f+"."+o+(u?`.${h}`:"");hn.removeKey(g),Dh(g,i)}},gD=()=>{BC||(En.addEventEmitter(WT),F6(YT),BC=!0)},Es={listen:YT,once:pD,clear:mD,broadcast(f,o){WT(Object.entries(od).find(([i,u])=>u==="app."+f)[0],o)}};function yD(f,o,i,u=void 0,h,g,x){const S=Object.values(i).length,a=$T(i,u,x);if(a==="getter")return En.send(f,o,i);if(a==="subscriber"){if(h)throw new Error("Cannot subscribe to an immutable property");return Es.listen(f,o+"Changed",...Object.values(i),u)}else if(a==="setter"){if(h)throw new Error("Cannot set a value to an immutable property");if(g)throw new Error("Cannot set a value to a readonly property");return En.send(f,"set"+o[0].toUpperCase()+o.substring(1),Object.assign({value:u},i))}else throw S<x?new Error("Cannot get a value without all required context parameters."):new Error("Property accessed with unexpected number of parameters.")}const Kn={prop:yD};Wr("Accessibility",["audioDescriptionSettingsChanged","closedCaptionsSettingsChanged","voiceGuidanceSettingsChanged"]);En.registerDeprecatedMethod("Accessibility","closedCaptions","Use Accessibility.closedCaptionsSettings() instead.");En.registerDeprecatedMethod("Accessibility","voiceGuidance","Use Accessibility.voiceGuidanceSettings() instead.");function vD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Account","id",o,f,!0,!0,0)}function xD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Account","uid",o,f,!0,!0,0)}const wD={id:vD,uid:xD};Wr("Advertising",["policyChanged"]);En.registerDeprecatedMethod("Authentication","token","Use Authentication module has individual methods for each token type. instead.");Wr("Capabilities",["available","granted","revoked","unavailable"]);fd("Capabilities","available",["capability"]);fd("Capabilities","granted",["role","capability"]);fd("Capabilities","revoked",["role","capability"]);fd("Capabilities","unavailable",["capability"]);Wr("Device",["audioChanged","deviceNameChanged","hdcpChanged","hdrChanged","nameChanged","networkChanged","screenResolutionChanged","videoResolutionChanged"]);En.registerDeprecatedMethod("Device","screenResolution","Use Use non-Firebolt APIs specific to your platform, e.g. W3C APIs instead.");En.registerDeprecatedMethod("Device","onDeviceNameChanged","Use Device.name() instead.");En.registerDeprecatedMethod("Device","onScreenResolutionChanged","Use screenResolution instead.");function SD(){return new Promise((f,o)=>{En.send("device","version").then(i=>{i=i||{},i.sdk=i.sdk||{},i.sdk.major=parseInt("1"),i.sdk.minor=parseInt("4"),i.sdk.patch=parseInt("1"),i.sdk.readable="Firebolt Core SDK 1.4.1",f(i)}).catch(i=>{o(i)})})}function CD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","audio",o,f,!1,!0,0)}function TD(...f){return Es.clear("Device",...f)}function bD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","distributor",o,f,!0,!0,0)}function ED(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","hdcp",o,f,!1,!0,0)}function kD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","hdr",o,f,!1,!0,0)}function AD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","id",o,f,!0,!0,0)}function ID(...f){return Es.listen("Device",...f)}function MD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","make",o,f,!0,!0,0)}function _D(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","model",o,f,!0,!0,0)}function RD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","name",o,f,!1,!0,0)}function LD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","network",o,f,!1,!0,0)}function DD(...f){return Es.once("Device",...f)}function PD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","platform",o,f,!0,!0,0)}function OD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","screenResolution",o,f,!1,!0,0)}function ND(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","sku",o,f,!0,!0,0)}function UD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","type",o,f,!0,!0,0)}function BD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","uid",o,f,!0,!0,0)}function jD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Device","videoResolution",o,f,!1,!0,0)}const Va={Events:{DEVICE_NAME_CHANGED:"deviceNameChanged",NAME_CHANGED:"nameChanged",HDCP_CHANGED:"hdcpChanged",HDR_CHANGED:"hdrChanged",AUDIO_CHANGED:"audioChanged",SCREEN_RESOLUTION_CHANGED:"screenResolutionChanged",VIDEO_RESOLUTION_CHANGED:"videoResolutionChanged",NETWORK_CHANGED:"networkChanged"},NetworkState:{CONNECTED:"connected",DISCONNECTED:"disconnected"},NetworkType:{WIFI:"wifi",ETHERNET:"ethernet",HYBRID:"hybrid"},version:SD,audio:CD,clear:TD,distributor:bD,hdcp:ED,hdr:kD,id:AD,listen:ID,make:MD,model:_D,name:RD,network:LD,once:DD,platform:PD,screenResolution:OD,sku:ND,type:UD,uid:BD,videoResolution:jD},FC={},FD=(f,o,i)=>{if(FC[f])throw`Capability ${f} has multiple provider interfaces registered.`;i.forEach(u=>u.name=`${o}.${u.name}`),FC[f]=i.concat()};Wr("Discovery",["navigateTo","policyChanged"]);FD("xrn:firebolt:capability:discovery:interest","Discovery",[{name:"userInterest",focus:!1,response:!0,parameters:!0}]);En.registerDeprecatedMethod("Discovery","entityInfo","Use null instead.");En.registerDeprecatedMethod("Discovery","purchasedContent","Use null instead.");En.registerDeprecatedMethod("Discovery","entitlements","Use Discovery.contentAccess() instead.");En.registerDeprecatedMethod("Discovery","onPullEntityInfo","Use null instead.");En.registerDeprecatedMethod("Discovery","onPullPurchasedContent","Use null instead.");Wr("Lifecycle",["background","foreground","inactive","suspended","unloading"]);Wr("Localization",["countryCodeChanged","languageChanged","localeChanged","localityChanged","postalCodeChanged","preferredAudioLanguagesChanged"]);En.registerDeprecatedMethod("Localization","language","Use Localization.locale instead.");En.registerDeprecatedMethod("Localization","onLanguageChanged","Use language instead.");function $D(){return En.send("Localization","additionalInfo",{},null)}function zD(...f){return Es.clear("Localization",...f)}function VD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Localization","countryCode",o,f,!1,!0,0)}function HD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Localization","language",o,f,!1,!0,0)}function GD(){return En.send("Localization","latlon",{},null)}function WD(...f){return Es.listen("Localization",...f)}function XD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Localization","locale",o,f,!1,!0,0)}function qD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Localization","locality",o,f,!1,!0,0)}function KD(...f){return Es.once("Localization",...f)}function YD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Localization","postalCode",o,f,!1,!0,0)}function QD(){let f=arguments[0],o={};return arguments.length===1&&typeof arguments[0]=="function"&&(f=arguments[0],o={}),Kn.prop("Localization","preferredAudioLanguages",o,f,!1,!0,0)}const Il={Events:{LOCALITY_CHANGED:"localityChanged",POSTAL_CODE_CHANGED:"postalCodeChanged",COUNTRY_CODE_CHANGED:"countryCodeChanged",LANGUAGE_CHANGED:"languageChanged",PREFERRED_AUDIO_LANGUAGES_CHANGED:"preferredAudioLanguagesChanged",LOCALE_CHANGED:"localeChanged"},additionalInfo:$D,clear:zD,countryCode:VD,language:HD,latlon:GD,listen:WD,locale:XD,locality:qD,once:KD,postalCode:YD,preferredAudioLanguages:QD};Wr("SecondScreen",["closeRequest","friendlyNameChanged","launchRequest"]);H6({Accessibility:zT,Account:W6,Advertising:X6,Authentication:q6,Capabilities:K6,Device:VT,Discovery:Y6,Keyboard:Q6,Lifecycle:Z6,Localization:HT,Metrics:J6,Parameters:eD,Profile:tD,SecondScreen:nD,SecureStorage:iD,Platform:oD});const cd={device:{about:"A module for querying about the device and it's capabilities",methods:[{name:"make",about:"The manufacturer of the device model"},{name:"model",about:"The manufacturer designated model of the device"},{name:"name",about:"The human readable name of the device"},{name:"network",about:"The current network status and type"},{name:"platform",about:"Platform identifier for the device"}]},account:{about:"A module for querying about the device account",methods:[{name:"id",about:"The platform back-office account identifier"},{name:"uid",about:"Unique id for the current app & account"}]},localization:{about:"Methods for accessing location and language preferences",methods:[{name:"countryCode",about:"Get the ISO 3166-1 alpha-2 code for the country device is located in"},{name:"language",about:"Get the ISO 639 1/2 code for the preferred language"},{name:"latlon",about:"Approximate latitude and longitude coordinates of the device location"},{name:"locality",about:"The locality/city the device is located in"},{name:"postalCode",about:"Get the postal code the device is located in"}]}},ZD=tt.Component("Module",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),m.w=i.w,m.h=i.h,m.color=i.bColor,m.effects=[{type:"radius",props:{radius:8}}],a[0].populate(m),o=a[0];const C={};return a[1]=this.element({parent:o||"root"},i),C.x=i.w/2,C.y=i.h/2,C.mount="{x:0.5, y:0.5}",C.content=i.name,C.color=i.fColor,C.font="raleway",C.__textnode=!0,a[1].populate(C),a},effects:[function(o,i,u,h,g,x){i[0].set("color",o.bColor)},function(o,i,u,h,g,x){i[0].set("effects",[{type:"radius",props:{radius:8}}])},function(o,i,u,h,g,x){i[1].set("content",o.name)}],context:{}},state(){return{w:300,h:250,bColor:"{ top: '#93C5FD', bottom: '#3B82F6' }",fColor:"#fff"}},props:["name"],hooks:{focus(){this.bColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.bColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}},input:{enter(){this.$router.to(`/examples/firebolt/${this.name}`)}}}),JD=tt.Component("Methods",{code:{render:function(o,i,u,h,g,x,S){const a=[],m={};a[0]=this.element({parent:o||"root"},i),a[0].populate(m),o=a[0];const C={};a[1]=this.element({parent:o||"root"},i),C.w=i.w,C.h=i.h,C.color=i.nameBgColor,C.effects=[{type:"radius",props:{radius:[8,8,0,0]}}],a[1].populate(C),o=a[1];const y={};a[2]=this.element({parent:o||"root"},i),y.content=i.name,y.x=i.w/2,y.y=i.h/2,y.mount=.5,y.color="0xffffffff",y.font="lato",y.size=50,y.__textnode=!0,a[2].populate(y),o=a[0];const v={};a[3]=this.element({parent:o||"root"},i),v.w=i.w,v.h=50,v.color="0x4b5563ff",v.y=75,v.effects=[{type:"radius",props:{radius:[0,0,8,8]}}],a[3].populate(v),o=a[3];const M={};return a[4]=this.element({parent:o||"root"},i),M.content=i.about,M.wordwrap=i.w,M.align="center",M.font="lato",M.maxlines=1,M.size=28,M.y=6,M.__textnode=!0,a[4].populate(M),a},effects:[function(o,i,u,h,g,x){i[1].set("color",o.nameBgColor)},function(o,i,u,h,g,x){i[1].set("effects",[{type:"radius",props:{radius:[8,8,0,0]}}])},function(o,i,u,h,g,x){i[2].set("content",o.name)},function(o,i,u,h,g,x){i[3].set("effects",[{type:"radius",props:{radius:[0,0,8,8]}}])},function(o,i,u,h,g,x){i[4].set("content",o.about)}],context:{}},state(){return{w:600,h:75,nameBgColor:"{ top: '#93C5FD', bottom: '#3B82F6' }"}},props:["name","about"],hooks:{focus(){this.nameBgColor="{ top: '#6366F1', bottom: '#4F46E5' }"},unfocus(){this.nameBgColor="{ top: '#93C5FD', bottom: '#3B82F6' }"}},input:{enter(){this.$emit("execute",this.name)}}}),hd=tt.Component("List",{components:{Method:JD,Module:ZD},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1;const M={};a[0]=this.element({parent:o||"root"},v===!0?y:i),a[0].populate(M),o=a[0];const b={};a[1]=this.element({parent:o||"root"},v===!0?y:i),b.y={transition:i.y},a[1].populate(b),o=a[1];const _=[];let O,B;const G=(k=[],V,Q)=>{const se=x(k),J=new Set;let te=se.length;const W={};for(O=W.from||0,B=("to"in W)?W.to:se.length;te--;){const ge=se[te];te<B&&te>=O&&J.add(""+ge.name)}let Z=Q.length;for(;Z--;)if(J.has(Q[Z])===!1){const ge=Q[Z];V[2][ge]&&V[2][ge].destroy(),delete V[2][ge],V[3][ge]&&V[3][ge].destroy(),delete V[3][ge]}Q.length=0;const ce=se.length,xe=[];for(let ge=0;ge<ce;ge++){if(ge<O||ge>=B)continue;const pe=Object.create(i);o=V[1],pe.item=se[ge],pe.index=ge,pe.key=""+pe.item.name,Q.push(pe.key);const Ee=u.components&&u.components.Method||h.Method;V[2]===void 0&&(V[2]={});const Re={};V[2][pe.key]===void 0&&(V[2][pe.key]=this.element({parent:o||"root"},v===!0?y:i)),Re.name=pe.item.name,Re.about=pe.item.about,Re.y=pe.index*160,Re.ref=pe.type+pe.index;const z=[];if(typeof Ee<"u")for(let Ue in Ee.config.props)delete Re[Ee.config.props[Ue]],z.push(Ee.config.props[Ue]);V[2][pe.key].nodeId===void 0&&V[2][pe.key].populate(Re),V[3]===void 0&&(V[3]={}),o=V[2][pe.key];const Me={};if(V[3][pe.key]===void 0){Me.name=pe.item.name,Me.about=pe.item.about,C=pe.index*160,Array.isArray(C)===!0&&(C=x(C).slice(0)),Me.y=C,C=pe.type+pe.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),Me.ref=C,m=Me.is||"Method";let Ue;if(typeof m=="string"){if(Ue=u.components&&u.components[m]||h[m],!Ue)throw new Error('Component "Method" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(Ue=m);V[3][pe.key]=Ue.call(null,{props:Me},V[2][pe.key],i),V[3][pe.key][Symbol.for("slots")][0]?(o=V[3][pe.key][Symbol.for("slots")][0],y=V[3][pe.key],v=!0):o=V[3][pe.key][Symbol.for("children")][0]}let ye=()=>{(typeof z>"u"||z.indexOf("y")===-1)&&V[2][pe.key].set("y",pe.index*160)};g(ye,null),xe.push(ye),V[3][pe.key][Symbol.for("props")].y=pe.index*160}return xe};let $;g(()=>{i[Symbol.for("removeGlobalEffects")]($),$=null,$=G(i.methods,a,_)},["methods"]),g(()=>{i.type;for(let k=0;k<i.methods.length;k++){if(k<O||k>=B)continue;const V={};V.index=k,V.item=i.methods[k],V.key=V.item.name,(typeof skip2>"u"||skip2.indexOf("ref")===-1)&&a[2][V.key].set("ref",i.type+V.index)}}),g(()=>{i.type;for(let k=0;k<i.methods.length;k++){if(k<O||k>=B)continue;const V={};V.index=k,V.item=i.methods[k],V.key=V.item.name,a[3][V.key][Symbol.for("props")].ref=i.type+V.index}}),o=a[0];const j={};a[4]=this.element({parent:o||"root"},v===!0?y:i),j.x={transition:i.x},j.y=325,a[4].populate(j),o=a[4];const ne=[];let X,K;const ee=(k=[],V,Q)=>{const se=x(k),J=new Set;let te=se.length;const W={};for(X=W.from||0,K=("to"in W)?W.to:se.length;te--;){const ge=se[te];te<K&&te>=X&&J.add(""+ge.id)}let Z=Q.length;for(;Z--;)if(J.has(Q[Z])===!1){const ge=Q[Z];V[5][ge]&&V[5][ge].destroy(),delete V[5][ge],V[6][ge]&&V[6][ge].destroy(),delete V[6][ge]}Q.length=0;const ce=se.length,xe=[];for(let ge=0;ge<ce;ge++){if(ge<X||ge>=K)continue;const pe=Object.create(i);o=V[4],pe.item=se[ge],pe.index=ge,pe.key=""+pe.item.id,Q.push(pe.key);const Ee=u.components&&u.components.Module||h.Module;V[5]===void 0&&(V[5]={});const Re={};V[5][pe.key]===void 0&&(V[5][pe.key]=this.element({parent:o||"root"},v===!0?y:i)),Re.name=pe.item.name,Re.ref=pe.type+pe.index,Re.x=pe.index*400;const z=[];if(typeof Ee<"u")for(let ye in Ee.config.props)delete Re[Ee.config.props[ye]],z.push(Ee.config.props[ye]);V[5][pe.key].nodeId===void 0&&V[5][pe.key].populate(Re),V[6]===void 0&&(V[6]={}),o=V[5][pe.key];const Me={};if(V[6][pe.key]===void 0){Me.name=pe.item.name,C=pe.type+pe.index,Array.isArray(C)===!0&&(C=x(C).slice(0)),Me.ref=C,Me.x=pe.index*400,m=Me.is||"Module";let ye;if(typeof m=="string"){if(ye=u.components&&u.components[m]||h[m],!ye)throw new Error('Component "Module" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ye=m);V[6][pe.key]=ye.call(null,{props:Me},V[5][pe.key],i),V[6][pe.key][Symbol.for("slots")][0]?(o=V[6][pe.key][Symbol.for("slots")][0],y=V[6][pe.key],v=!0):o=V[6][pe.key][Symbol.for("children")][0]}}return xe};let de;return g(()=>{i[Symbol.for("removeGlobalEffects")](de),de=null,de=ee(i.modules,a,ne)},["modules"]),g(()=>{i.type;for(let k=0;k<i.modules.length;k++){if(k<X||k>=K)continue;const V={};V.index=k,V.item=i.modules[k],V.key=V.item.id,(typeof skip5>"u"||skip5.indexOf("ref")===-1)&&a[5][V.key].set("ref",i.type+V.index)}}),g(()=>{i.type;for(let k=0;k<i.modules.length;k++){if(k<X||k>=K)continue;const V={};V.index=k,V.item=i.modules[k],V.key=V.item.id,a[6][V.key][Symbol.for("props")].ref=i.type+V.index}}),a},effects:[function(o,i,u,h,g,x){i[1].set("y",{transition:o.y})},function(o,i,u,h,g,x){i[4].set("x",{transition:o.x})}],context:{}},state(){return{x:400,y:100,activeIndex:0}},props:["data","type"],computed:{methods(){return this.isModule,this.data,this.isModule?[]:this.data},modules(){return this.isModule,this.data,this.isModule?this.data:[]},isModule(){return this.type,this.type==="module"}},watch:{activeIndex(f){const o=this.$select(`${this.type}${f}`);o&&o.$focus&&o.$focus()}},hooks:{focus(){this.$trigger("activeIndex")}},input:{right(){this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},left(){this.isModule&&this.activeIndex>0&&this.move(-1)},down(){!this.isModule&&this.activeIndex<this.data.length-1&&this.move(1)},up(){!this.isModule&&this.activeIndex>0&&this.move(-1)}},methods:{move(f){const o=this.activeIndex+f;this.type=="method"?this.y=o>5?-(o-5)*160-100:100:this.type=="module"&&(this.x=o>3?-(o-3)*400-400:400),this.activeIndex=o}}}),eP=tt.Component("FireBolt",{components:{List:hd},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),a[0].populate(M),y===!0&&(v-=1),o=a[0];const b={};a[1]=this.element({parent:o||"root"},y===!0?C:i),b.content="FireBolt Modules",b.x=960,b.y=80,b.mount="{x:0.5}",b.size=80,b.font="raleway",b.__textnode=!0,a[1].populate(b),y===!0&&(v-=1);const _=u.components&&u.components.List||h.List;o=a[0];const O={};a[2]=this.element({parent:o||"root"},y===!0?C:i),O.data=i.moduleNames,O.type="module",O.ref="modules";const B=[];if(typeof _<"u")for(let j in _.config.props)delete O[_.config.props[j]],B.push(_.config.props[j]);a[2].populate(O),y===!0&&(v-=1),o=a[2];const G={};G.data=i.moduleNames,G.type="module",G.ref="modules",m=G.is||"List";let $;if(typeof m=="string"){if($=u.components&&u.components[m]||h[m],!$)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);return a[3]=$.call(null,{props:G},a[2],i),a[3][Symbol.for("slots")][0]?(o=a[3][Symbol.for("slots")][0],C=a[3],y=!0):o=a[3][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),a},effects:[],context:{}},computed:{moduleNames(){return Object.keys(cd).map(f=>({id:f,name:f.charAt(0).toUpperCase()+f.slice(1)}))}},hooks:{focus(){const f=this.$select("modules");f&&f.$focus&&f.$focus()}}}),tP=tt.Component("DeviceModule",{components:{List:hd},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),a[0].populate(M),y===!0&&(v-=1),o=a[0];const b={};a[1]=this.element({parent:o||"root"},y===!0?C:i),b.content="Device",b.x=960,b.mount="{x:0.5}",b.y=50,b.font="raleway",b.size=40,b.__textnode=!0,a[1].populate(b),y===!0&&(v-=1),o=a[0];const _={};a[2]=this.element({parent:o||"root"},y===!0?C:i),_.content=i.device.about,_.x=960,_.mount="{x:0.5}",_.y=110,_.font="lato",_.__textnode=!0,a[2].populate(_),y===!0&&(v-=1);const O=u.components&&u.components.List||h.List;o=a[0];const B={};a[3]=this.element({parent:o||"root"},y===!0?C:i),B.data=i.device.methods,B.x=300,B.ref="methods",B.type="method",B.y=100;const G=[];if(typeof O<"u")for(let de in O.config.props)delete B[O.config.props[de]],G.push(O.config.props[de]);a[3].populate(B),y===!0&&(v-=1),o=a[3];const $={};$.data=i.device.methods,$.x=300,$.ref="methods",$.type="method",$.y=100,m=$.is||"List";let j;if(typeof m=="string"){if(j=u.components&&u.components[m]||h[m],!j)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(j=m);a[4]=j.call(null,{props:$},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],C=a[4],y=!0):o=a[4][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),o=a[0];const ne={};a[5]=this.element({parent:o||"root"},y===!0?C:i),ne.x=1400,ne.y=540,ne.content=i.response,ne.size=100,ne.mount=.5,ne.font="lato",ne.show=!i.isNetworkRes,ne.__textnode=!0,a[5].populate(ne),y===!0&&(v-=1),o=a[0];const X={};a[6]=this.element({parent:o||"root"},y===!0?C:i),X.show=i.isNetworkRes,a[6].populate(X),y===!0&&(v-=1),o=a[6];const K={};a[7]=this.element({parent:o||"root"},y===!0?C:i),K.content="State: "+i.networkRes.state,K.size=70,K.font="lato",K.x=1400,K.y=500,K.mount=.5,K.__textnode=!0,a[7].populate(K),y===!0&&(v-=1),o=a[6];const ee={};return a[8]=this.element({parent:o||"root"},y===!0?C:i),ee.content="Type: "+i.networkRes.type,ee.size=70,ee.font="lato",ee.y=580,ee.x=1400,ee.mount=.5,ee.__textnode=!0,a[8].populate(ee),y===!0&&(v-=1),a},effects:[function(o,i,u,h,g,x){i[5].set("content",o.response)},function(o,i,u,h,g,x){i[5].set("show",!o.isNetworkRes)},function(o,i,u,h,g,x){i[6].set("show",o.isNetworkRes)},function(o,i,u,h,g,x){i[7].set("content","State: "+o.networkRes.state)},function(o,i,u,h,g,x){i[8].set("content","Type: "+o.networkRes.type)}],context:{}},state(){return{device:cd.device,response:"",networkRes:{},isNetworkRes:!1}},hooks:{ready(){this.$listen("execute",async f=>{switch(this.$log.info(`Execute Device ${f} API`),this.isNetworkRes=!1,f){case"make":this.response=await Va.make();break;case"model":this.response=await Va.model();break;case"name":this.response=await Va.name();break;case"network":Object.assign(this.networkRes,await Va.network()),this.isNetworkRes=!0;break;case"platform":this.response=await Va.platform();break}})},focus(){const f=this.$select("methods");f&&f.$focus&&f.$focus()}}}),nP=tt.Component("AccountModule",{components:{List:hd},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),a[0].populate(M),y===!0&&(v-=1),o=a[0];const b={};a[1]=this.element({parent:o||"root"},y===!0?C:i),b.content="Account",b.x=960,b.mount="{x:0.5}",b.y=50,b.font="raleway",b.size=40,b.__textnode=!0,a[1].populate(b),y===!0&&(v-=1),o=a[0];const _={};a[2]=this.element({parent:o||"root"},y===!0?C:i),_.content=i.account.about,_.x=960,_.mount="{x:0.5}",_.y=110,_.font="lato",_.__textnode=!0,a[2].populate(_),y===!0&&(v-=1);const O=u.components&&u.components.List||h.List;o=a[0];const B={};a[3]=this.element({parent:o||"root"},y===!0?C:i),B.data=i.account.methods,B.x=300,B.ref="methods",B.y=300,B.type="method";const G=[];if(typeof O<"u")for(let X in O.config.props)delete B[O.config.props[X]],G.push(O.config.props[X]);a[3].populate(B),y===!0&&(v-=1),o=a[3];const $={};$.data=i.account.methods,$.x=300,$.ref="methods",$.y=300,$.type="method",m=$.is||"List";let j;if(typeof m=="string"){if(j=u.components&&u.components[m]||h[m],!j)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(j=m);a[4]=j.call(null,{props:$},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],C=a[4],y=!0):o=a[4][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),o=a[0];const ne={};return a[5]=this.element({parent:o||"root"},y===!0?C:i),ne.x=1400,ne.y=540,ne.content=i.response,ne.size=i.size,ne.mount=.5,ne.font="lato",ne.__textnode=!0,a[5].populate(ne),y===!0&&(v-=1),a},effects:[function(o,i,u,h,g,x){i[5].set("content",o.response)},function(o,i,u,h,g,x){i[5].set("size",o.size)}],context:{}},state(){return{account:cd.account,response:"",size:100}},hooks:{ready(){this.$listen("execute",async f=>{switch(this.$log.info(`Execute Account ${f} API`),f){case"id":this.size=100,this.response=await wD.id();break;case"uid":this.size=40,this.response=await Va.uid();break}})},focus(){const f=this.$select("methods");f&&f.$focus&&f.$focus()}}}),iP=tt.Component("LocalizationModule",{components:{List:hd},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y=!1,v=0;const M={};a[0]=this.element({parent:o||"root"},y===!0?C:i),a[0].populate(M),y===!0&&(v-=1),o=a[0];const b={};a[1]=this.element({parent:o||"root"},y===!0?C:i),b.content="Localization",b.x=960,b.mount="{x:0.5}",b.y=50,b.font="raleway",b.size=40,b.__textnode=!0,a[1].populate(b),y===!0&&(v-=1),o=a[0];const _={};a[2]=this.element({parent:o||"root"},y===!0?C:i),_.content=i.localization.about,_.x=960,_.mount="{x:0.5}",_.y=110,_.font="lato",_.__textnode=!0,a[2].populate(_),y===!0&&(v-=1);const O=u.components&&u.components.List||h.List;o=a[0];const B={};a[3]=this.element({parent:o||"root"},y===!0?C:i),B.data=i.localization.methods,B.x=300,B.ref="methods",B.y=100,B.type="method";const G=[];if(typeof O<"u")for(let X in O.config.props)delete B[O.config.props[X]],G.push(O.config.props[X]);a[3].populate(B),y===!0&&(v-=1),o=a[3];const $={};$.data=i.localization.methods,$.x=300,$.ref="methods",$.y=100,$.type="method",m=$.is||"List";let j;if(typeof m=="string"){if(j=u.components&&u.components[m]||h[m],!j)throw new Error('Component "List" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(j=m);a[4]=j.call(null,{props:$},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],C=a[4],y=!0):o=a[4][Symbol.for("children")][0],y===!0&&v===0&&(y=!1),o=a[0];const ne={};return a[5]=this.element({parent:o||"root"},y===!0?C:i),ne.x=1400,ne.y=540,ne.content=i.response,ne.size=i.size,ne.mount=.5,ne.font="lato",ne.__textnode=!0,a[5].populate(ne),y===!0&&(v-=1),a},effects:[function(o,i,u,h,g,x){i[5].set("content",o.response)},function(o,i,u,h,g,x){i[5].set("size",o.size)}],context:{}},state(){return{localization:cd.localization,response:"",size:100}},hooks:{ready(){this.$listen("execute",async f=>{switch(this.$log.info(`Execute Keyboard ${f} API`),this.response="null",f){case"countryCode":this.response=await Il.countryCode();break;case"language":this.response=await Il.language();break;case"latlon":this.response=(await Il.latlon()).toString();break;case"locality":this.response=await Il.locality();break;case"postalCode":this.response=await Il.postalCode();break}})},focus(){const f=this.$select("methods");f&&f.$focus&&f.$focus()}}}),oP=[{path:"/examples/firebolt",component:eP},{path:"/examples/firebolt/device",component:tP},{path:"/examples/firebolt/account",component:nP},{path:"/examples/firebolt/localization",component:iP}],QT=new URLSearchParams(window.location.search),rP=!!QT.get("source"),sP=!!QT.get("fps"),aP=tt.Application({components:{SourceInfo:IT},code:{render:function(o,i,u,h,g,x,S){const a=[];let m,C,y,v=!1,M=0;const b={};a[0]=this.element({parent:o||"root"},v===!0?y:i),b.w=1920,b.h=1080,b.color=i.backgroundColor,a[0].populate(b),v===!0&&(M-=1);const _=u.components&&u.components.RouterView||h.RouterView;o=a[0];const O={};a[1]=this.element({parent:o||"root"},v===!0?y:i),O.w=o.node.width*(100/100),O.h=o.node.height*(100/100);const B=[];if(typeof _<"u")for(let J in _.config.props)delete O[_.config.props[J]],B.push(_.config.props[J]);a[1].populate(O),v===!0&&(M-=1),o=a[1];const G={};G.w=o.node.width*(100/100),G.h=o.node.height*(100/100),m=G.is||"RouterView";let $;if(typeof m=="string"){if($=u.components&&u.components[m]||h[m],!$)throw new Error('Component "RouterView" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&($=m);a[2]=$.call(null,{props:G},a[1],i),a[2][Symbol.for("slots")][0]?(o=a[2][Symbol.for("slots")][0],y=a[2],v=!0):o=a[2][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const j=u.components&&u.components.FPScounter||h.FPScounter;o=a[0];const ne={};a[3]=this.element({parent:o||"root"},v===!0?y:i),ne.x=1610,ne.show=i.showFPS;const X=[];if(typeof j<"u")for(let J in j.config.props)delete ne[j.config.props[J]],X.push(j.config.props[J]);a[3].populate(ne),v===!0&&(M-=1),o=a[3];const K={};K.x=1610,C=i.showFPS,Array.isArray(C)===!0&&(C=x(C).slice(0)),K.show=C,m=K.is||"FPScounter";let ee;if(typeof m=="string"){if(ee=u.components&&u.components[m]||h[m],!ee)throw new Error('Component "FPScounter" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(ee=m);a[4]=ee.call(null,{props:K},a[3],i),a[4][Symbol.for("slots")][0]?(o=a[4][Symbol.for("slots")][0],y=a[4],v=!0):o=a[4][Symbol.for("children")][0],v===!0&&M===0&&(v=!1);const de=u.components&&u.components.SourceInfo||h.SourceInfo;o=a[0];const k={};a[5]=this.element({parent:o||"root"},v===!0?y:i),k.ref="info",k.show=i.showInfo;const V=[];if(typeof de<"u")for(let J in de.config.props)delete k[de.config.props[J]],V.push(de.config.props[J]);a[5].populate(k),v===!0&&(M-=1),o=a[5];const Q={};Q.ref="info",C=i.showInfo,Array.isArray(C)===!0&&(C=x(C).slice(0)),Q.show=C,m=Q.is||"SourceInfo";let se;if(typeof m=="string"){if(se=u.components&&u.components[m]||h[m],!se)throw new Error('Component "SourceInfo" not found')}else typeof m=="function"&&m[Symbol.for("isComponent")]===!0&&(se=m);return a[6]=se.call(null,{props:Q},a[5],i),a[6][Symbol.for("slots")][0]?(o=a[6][Symbol.for("slots")][0],y=a[6],v=!0):o=a[6][Symbol.for("children")][0],v===!0&&M===0&&(v=!1),a},effects:[function(o,i,u,h,g,x){i[0].set("color",o.backgroundColor)},function(o,i,u,h,g,x){(typeof skip3>"u"||skip3.indexOf("show")===-1)&&i[3].set("show",o.showFPS)},function(o,i,u,h,g,x){i[4][Symbol.for("props")].show=o.showFPS},function(o,i,u,h,g,x){(typeof skip5>"u"||skip5.indexOf("show")===-1)&&i[5].set("show",o.showInfo)},function(o,i,u,h,g,x){i[6][Symbol.for("props")].show=o.showInfo}],context:{}},state(){return{backgroundColor:"#1e293b",showFPS:sP,showInfo:!1}},routes:[{path:"/",component:xL,options:{keepAlive:!0}},{path:"/demos/loading",component:()=>oL(()=>import("./Loading-0c5a8b4e.js"),[])},{path:"/demos/intro",component:()=>new Promise(f=>{f(SL)})},{path:"/demos/theming",component:bL},{path:"/demos/tmdb",component:NL},{path:"/demos/sprites",component:BL},{path:"/demos/focushandling",component:FL},{path:"/demos/memory-game",component:C6,announce:"Let's play Memory"},{path:"/demos/player",component:ZL},{path:"/examples/positioning",component:$L},{path:"/examples/colors",component:JL},{path:"/examples/gradients",component:e6},{path:"/examples/transitions",component:t6},{path:"/examples/alpha",component:n6},{path:"/examples/scaling",component:i6},{path:"/examples/rotation",component:o6},{path:"/examples/keyinput",component:r6},{path:"/examples/texts",component:s6},{path:"/examples/images",component:a6},{path:"/examples/components",component:u6},{path:"/examples/forloop",component:l6},{path:"/examples/forloop-advanced",component:p6},{path:"/examples/effects",component:m6},{path:"/examples/showif",component:g6},{path:"/examples/events",component:y6},{path:"/examples/slots",component:w6},{path:"/examples/viewport",component:E6},...R6,{path:"/examples/resize",component:L6},{path:"/examples/languageplugin",component:PC},{path:"/examples/keycodes",component:O6},{path:"/examples/translations",component:PC},{path:"/examples/special-characters",component:B6},{path:"/examples/layout",component:j6},{path:"/benchmarks/exponential",component:b6},...oP],hooks:{ready(){rP===!0&&(this.showInfo=!0),this.$listen("changeBackground",f=>{this.backgroundColor=f?f+80:"#1e293b"}),this.$listen("clearBackground",()=>{this.backgroundColor="transparent"})}},input:{async intercept(f){return f.key==="x"?(this.$log.info(`Intercepting key press (${f.key}) in App Component`),new Promise(o=>{this.$log.info("Executing an async operation"),setTimeout(()=>{this.$log.info("Finished an async operation"),o(f)},2e3)})):f},escape(){this.quit()},back(){this.$router.to("/")},sourceCode(){this.showInfo=!1;const f=uP(this.$router.currentRoute.path);f&&window.open(`https://github.com/lightning-js/blits-example-app/tree/master/${f}`,"_blank")}}}),uP=f=>({"/":"src/pages/Portal","/demos/loading":"src/pages/Loading","/demos/intro":"src/pages/Intro","/demos/theming":"src/pages/Theming","/demos/tmdb":"src/pages/Tmdb","/demos/sprites":"src/pages/Sprites","/demos/focushandling":"src/pages/FocusHandling","/demos/memory-game":"src/pages/MemoryGame","/demos/player":"src/pages/Player","/examples/positioning":"src/pages/Positioning","/examples/colors":"src/pages/Colors","/examples/gradients":"src/pages/Gradients","/examples/transitions":"src/pages/Transitions","/examples/components":"src/pages/Components","/examples/alpha":"src/pages/Alpha","/examples/scaling":"src/pages/Scaling","/examples/rotation":"src/pages/Rotation","/examples/keyinput":"src/pages/KeyInput","/examples/forloop":"src/pages/ForLoop","/examples/forloop-advanced":"src/pages/ForLoopAdvanced","/examples/effects":"src/pages/Effects","/examples/showif":"src/pages/ShowIf","/examples/events":"src/pages/Events","/examples/images":"src/pages/Images","/examples/texts":"src/pages/Texts","/examples/slots":"src/pages/Slots","/examples/viewport":"src/pages/Viewport","/examples/router-hooks":"src/pages/RouterHooks","/examples/resize":"src/pages/Resize","/examples/translations":"src/pages/LanguagePlugin","/examples/firebolt":"src/pages/Firebolt","/examples/keycodes":"src/pages/KeyCodes","/examples/special-characters":"src/pages/SpecialCharacters","/examples/layout":"src/pages/Layout","/benchmarks/exponential":"src/pages/Exponential"})["/"+f]+".js",$C={light:{color1:"#f8fafc",color2:"#e2e8f0",color3:"#1e293b",color4:"#0369a1",bg:"#f1f5f9"},dark:{color1:"#475569",color2:"#64748b",color3:"#cbd5e1",color4:"#38bdf8",bg:"#1e293b80"}},zC={large:{w:1200,h:900,block1:{h:720},block2:{y:560,h:300,w:890},graph:{x:270,y:140,w:890,h:400,offset:110,size:"large"}},small:{w:500,h:600,block1:{h:180},block2:{y:140,h:180,w:200},graph:{x:32,y:370,w:0,h:0,offset:0,size:"small"}}};tt.Plugin(AT,"colors",{themes:{light:$C.light,dark:$C.dark},base:"light",current:"dark"});tt.Plugin(AT,"sizes",{themes:{small:zC.small,large:zC.large},base:"small",current:"small"});tt.Plugin(J5);tt.Launch(aP,"app",{w:1920,h:1080,multithreaded:!1,debugLevel:1,reactivityMode:"Proxy",defaultFont:"lato",keymap:{...tL(),85:"sourceCode"},fonts:[{family:"lato",type:"msdf",file:"fonts/Lato-Regular.ttf"},{family:"raleway",type:"msdf",file:"fonts/Raleway-ExtraBold.ttf"},{family:"opensans",type:"web",file:"fonts/OpenSans-Medium.ttf"},{family:"kalam",type:"msdf",file:"fonts/Kalam-Regular.ttf"},{family:"lato-black",type:"msdf",file:"fonts/Lato-Black.ttf"}],canvasColor:"transparent",viewportMargin:100,announcer:!0});export{tt as B,ru as S};
